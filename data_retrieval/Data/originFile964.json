{"items":[{"tags":["java","jpa","one-to-many","cascade","many-to-one"],"answers":[{"tags":[],"owner":{"account_id":1558198,"reputation":3820,"user_id":1448704,"accept_rate":72,"display_name":"seba.wagner"},"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1590763582,"creation_date":1350984447,"answer_id":13027330,"question_id":13027214,"body_markdown":"[See here][1] for an example from the OpenJPA docs. `CascadeType.ALL` means it will do all actions.\n\nQuote:\n\n&gt;  CascadeType.PERSIST: When persisting an entity, also persist the entities held in its fields. We suggest a liberal application of this cascade rule, because if the EntityManager finds a field that references a new entity during the flush, and the field does not use CascadeType.PERSIST, it is an error.\n&gt;\n&gt;  CascadeType.REMOVE: When deleting an entity, it also deletes the entities held in this field.\n&gt;\n&gt;    CascadeType.REFRESH: When refreshing an entity, also refresh the entities held in this field.\n&gt;\n&gt;    CascadeType.MERGE: When merging entity state, also merge the entities held in this field.\n\nSebastian\n\n[1]:http://openjpa.apache.org/builds/2.4.0/apache-openjpa/docs/jpa_overview_meta_field.html#jpa_overview_meta_cascade","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p><a href=\"http://openjpa.apache.org/builds/2.4.0/apache-openjpa/docs/jpa_overview_meta_field.html#jpa_overview_meta_cascade\" rel=\"noreferrer\">See here</a> for an example from the OpenJPA docs. <code>CascadeType.ALL</code> means it will do all actions.</p>\n<p>Quote:</p>\n<blockquote>\n<p>CascadeType.PERSIST: When persisting an entity, also persist the entities held in its fields. We suggest a liberal application of this cascade rule, because if the EntityManager finds a field that references a new entity during the flush, and the field does not use CascadeType.PERSIST, it is an error.</p>\n<p>CascadeType.REMOVE: When deleting an entity, it also deletes the entities held in this field.</p>\n<p>CascadeType.REFRESH: When refreshing an entity, also refresh the entities held in this field.</p>\n<p>CascadeType.MERGE: When merging entity state, also merge the entities held in this field.</p>\n</blockquote>\n<p>Sebastian</p>\n"},{"tags":[],"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1444458965,"creation_date":1350984779,"answer_id":13027429,"question_id":13027214,"body_markdown":"[From the EJB3.0 Specification][1]:\n\n&gt; Use of the cascade annotation element may be used to propagate the\n&gt; effect of an operation to associated entities. The cascade\n&gt; functionality is most typically used in parent-child relationships.\n&gt;\n&gt; If X is a managed entity, the remove operation causes it to become\n&gt; removed. The remove operation is cascaded to entities referenced by X,\n&gt; if the relationships from X to these other entities is annotated with\n&gt; the cascade=REMOVE or cascade=ALL annotation element value.\n\nSo in a nutshell, entity relationships defined with `CascadeType.All` will ensure that all persistence events such as persist, refresh, merge and remove that occur on the parent, will be passed to the child. Defining other `CascadeType` options provides the developer with a more granular level of control over how the entity association handles persistence.\n\nFor example if I had an object Book that contained a List of pages and I add a page object within this list.  If the `@OneToMany` annotation defining the association between Book and Page is marked as `CascadeType.All`, persisting the Book would result in the Page also being persisted to the database.\n\n[1]:\nhttp://download.oracle.com/otn-pub/jcp/ejb-3_0-fr-eval-oth-JSpec/ejb-3_0-fr-spec-persistence.pdf","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p><a href=\"http://download.oracle.com/otn-pub/jcp/ejb-3_0-fr-eval-oth-JSpec/ejb-3_0-fr-spec-persistence.pdf\" rel=\"noreferrer\">From the EJB3.0 Specification</a>:</p>\n<blockquote>\n<p>Use of the cascade annotation element may be used to propagate the\neffect of an operation to associated entities. The cascade\nfunctionality is most typically used in parent-child relationships.</p>\n<p>If X is a managed entity, the remove operation causes it to become\nremoved. The remove operation is cascaded to entities referenced by X,\nif the relationships from X to these other entities is annotated with\nthe cascade=REMOVE or cascade=ALL annotation element value.</p>\n</blockquote>\n<p>So in a nutshell, entity relationships defined with <code>CascadeType.All</code> will ensure that all persistence events such as persist, refresh, merge and remove that occur on the parent, will be passed to the child. Defining other <code>CascadeType</code> options provides the developer with a more granular level of control over how the entity association handles persistence.</p>\n<p>For example if I had an object Book that contained a List of pages and I add a page object within this list.  If the <code>@OneToMany</code> annotation defining the association between Book and Page is marked as <code>CascadeType.All</code>, persisting the Book would result in the Page also being persisted to the database.</p>\n"},{"tags":[],"owner":{"account_id":75292,"reputation":60810,"user_id":216021,"accept_rate":82,"display_name":"kostja"},"down_vote_count":0,"up_vote_count":477,"is_accepted":true,"score":477,"last_activity_date":1367432705,"creation_date":1350984824,"answer_id":13027444,"question_id":13027214,"body_markdown":"The meaning of `CascadeType.ALL` is that the persistence will propagate (cascade) all `EntityManager` operations (`PERSIST, REMOVE, REFRESH, MERGE, DETACH`) to the relating entities.\r\n\r\nIt seems in your case to be a bad idea, as removing an `Address` would lead to removing the related `User`. As a user can have multiple addresses, the other addresses would become orphans. However the inverse case (annotating the `User`) would make sense - if an address belongs to a single user only, it is safe to propagate the removal of all addresses belonging to a user if this user is deleted. \r\n\r\nBTW: you may want to add a `mappedBy=&quot;addressOwner&quot;` attribute to your `User` to signal to the persistence provider that the join column should be in the ADDRESS table.\r\n","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>The meaning of <code>CascadeType.ALL</code> is that the persistence will propagate (cascade) all <code>EntityManager</code> operations (<code>PERSIST, REMOVE, REFRESH, MERGE, DETACH</code>) to the relating entities.</p>\n\n<p>It seems in your case to be a bad idea, as removing an <code>Address</code> would lead to removing the related <code>User</code>. As a user can have multiple addresses, the other addresses would become orphans. However the inverse case (annotating the <code>User</code>) would make sense - if an address belongs to a single user only, it is safe to propagate the removal of all addresses belonging to a user if this user is deleted. </p>\n\n<p>BTW: you may want to add a <code>mappedBy=\"addressOwner\"</code> attribute to your <code>User</code> to signal to the persistence provider that the join column should be in the ADDRESS table.</p>\n"},{"tags":[],"owner":{"account_id":3408319,"reputation":10093,"user_id":2858871,"accept_rate":79,"display_name":"Emilien Brigand"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1444453761,"creation_date":1438851317,"answer_id":31851146,"question_id":13027214,"body_markdown":"In JPA 2.0 if you want to delete an address if you removed it from a User entity you can add `orphanRemoval=true` (instead of `CascadeType.REMOVE`) to your `@OneToMany`.\r\n\r\n\r\nMore explanation between `orphanRemoval=true` and `CascadeType.REMOVE` is [here][1].\r\n\r\n\r\n  [1]: http://www.objectdb.com/java/jpa/persistence/delete#Orphan_Removal","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>In JPA 2.0 if you want to delete an address if you removed it from a User entity you can add <code>orphanRemoval=true</code> (instead of <code>CascadeType.REMOVE</code>) to your <code>@OneToMany</code>.</p>\n\n<p>More explanation between <code>orphanRemoval=true</code> and <code>CascadeType.REMOVE</code> is <a href=\"http://www.objectdb.com/java/jpa/persistence/delete#Orphan_Removal\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":1,"up_vote_count":129,"is_accepted":false,"score":128,"last_activity_date":1665669771,"creation_date":1502367255,"answer_id":45613450,"question_id":13027214,"body_markdown":"You shouldn&#39;t use `CascadeType.ALL` on `@ManyToOne` since entity state transitions should propagate from parent entities to child ones, not the other way around.\r\n\r\nThe `@ManyToOne` is on the child side of the association as it maps the underlying Foreign Key column.\r\n\r\nTherefore, you should move the `CascadeType.ALL` from the `@ManyToOne` association to the `@OneToMany` side, which should also use the `mappedBy` attribute since it&#39;s the most efficient one-to-many table relationship mapping.","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>You shouldn't use <code>CascadeType.ALL</code> on <code>@ManyToOne</code> since entity state transitions should propagate from parent entities to child ones, not the other way around.</p>\n<p>The <code>@ManyToOne</code> is on the child side of the association as it maps the underlying Foreign Key column.</p>\n<p>Therefore, you should move the <code>CascadeType.ALL</code> from the <code>@ManyToOne</code> association to the <code>@OneToMany</code> side, which should also use the <code>mappedBy</code> attribute since it's the most efficient one-to-many table relationship mapping.</p>\n"},{"tags":[],"owner":{"account_id":14868083,"reputation":196,"user_id":10736451,"display_name":"szachMati"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1578475629,"creation_date":1547922724,"answer_id":54270152,"question_id":13027214,"body_markdown":"If you just want to delete the address assigned to the user and not to affect on User entity class you should try something like that:\r\n\r\n   \r\n\r\n    @Entity\r\n    public class User {\r\n       @OneToMany(mappedBy = &quot;addressOwner&quot;, cascade = CascadeType.ALL)\r\n       protected Set&lt;Address&gt; userAddresses = new HashSet&lt;&gt;();\r\n    }\r\n\r\n    @Entity \r\n    public class Addresses {\r\n       @ManyToOne(cascade = CascadeType.REFRESH) @JoinColumn(name = &quot;user_id&quot;)\r\n       protected User addressOwner;\r\n    }\r\nThis way you dont need to worry about using fetch in annotations. But remember when deleting the User you will also delete connected address to user object.\r\n\r\n\r\n\r\n\r\n \r\n","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>If you just want to delete the address assigned to the user and not to affect on User entity class you should try something like that:</p>\n\n<pre><code>@Entity\npublic class User {\n   @OneToMany(mappedBy = \"addressOwner\", cascade = CascadeType.ALL)\n   protected Set&lt;Address&gt; userAddresses = new HashSet&lt;&gt;();\n}\n\n@Entity \npublic class Addresses {\n   @ManyToOne(cascade = CascadeType.REFRESH) @JoinColumn(name = \"user_id\")\n   protected User addressOwner;\n}\n</code></pre>\n\n<p>This way you dont need to worry about using fetch in annotations. But remember when deleting the User you will also delete connected address to user object.</p>\n"}],"owner":{"account_id":476430,"reputation":11691,"user_id":887343,"accept_rate":77,"display_name":"forhas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":482963,"favorite_count":0,"down_vote_count":1,"up_vote_count":307,"accepted_answer_id":13027444,"answer_count":6,"score":306,"last_activity_date":1665669771,"creation_date":1350984088,"question_id":13027214,"body_markdown":"I think I misunderstood the meaning of cascading in the context of a `@ManyToOne` relationship.\r\n\r\nThe case:\r\n\r\n    public class User {\r\n    \r\n       @OneToMany(fetch = FetchType.EAGER)\r\n       protected Set&lt;Address&gt; userAddresses;\r\n    \r\n    }\r\n    \r\n    public class Address {\r\n    \r\n       @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n       protected User addressOwner;\r\n    \r\n    }\r\n\r\nWhat is the meaning of the `cascade = CascadeType.ALL`? For example, if I delete a certain address from the database, how does the fact that I added the `cascade = CascadeType.ALL` affect my data (the `User`, I guess)?","title":"What is the meaning of the CascadeType.ALL for a @ManyToOne JPA association","body":"<p>I think I misunderstood the meaning of cascading in the context of a <code>@ManyToOne</code> relationship.</p>\n\n<p>The case:</p>\n\n<pre><code>public class User {\n\n   @OneToMany(fetch = FetchType.EAGER)\n   protected Set&lt;Address&gt; userAddresses;\n\n}\n\npublic class Address {\n\n   @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n   protected User addressOwner;\n\n}\n</code></pre>\n\n<p>What is the meaning of the <code>cascade = CascadeType.ALL</code>? For example, if I delete a certain address from the database, how does the fact that I added the <code>cascade = CascadeType.ALL</code> affect my data (the <code>User</code>, I guess)?</p>\n"},{"tags":["java","xml","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1475733772,"post_id":39886439,"comment_id":67063434,"body_markdown":"Don&#39;t use images better past text into the post...","body":"Don&#39;t use images better past text into the post..."},{"owner":{"display_name":"user6811693"},"score":0,"creation_date":1475733833,"post_id":39886439,"comment_id":67063463,"body_markdown":"Sorry for the inconvenience.I won&#39;t use it from next time.","body":"Sorry for the inconvenience.I won&#39;t use it from next time."}],"answers":[{"tags":[],"owner":{"display_name":"user6811693"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1475734091,"creation_date":1475733789,"answer_id":39888619,"question_id":39886439,"body_markdown":"It was solved by adding the dependency in the pom.xml file.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.jolira&lt;/groupId&gt;\r\n        &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.4&lt;/version&gt;\r\n    &lt;/dependency&gt;​\r\n","title":"Failure to find org.dstovall:onejar-maven-plugin-jar","body":"<p>It was solved by adding the dependency in the pom.xml file.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n    &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.4.4&lt;/version&gt;\n&lt;/dependency&gt;​\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1444169,"reputation":1261,"user_id":1363310,"display_name":"Asraful"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665669319,"creation_date":1665669319,"answer_id":74056983,"question_id":39886439,"body_markdown":"Including configuration :\r\n\r\n        &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.jolira&lt;/groupId&gt;\r\n                &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;MainClassName&lt;/mainClass&gt;\r\n                            &lt;attachToBuild&gt;true&lt;/attachToBuild&gt;\r\n                            &lt;filename&gt;\r\n                                ${project.build.finalName}.${project.packaging}\r\n                            &lt;/filename&gt;\r\n                        &lt;/configuration&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;one-jar&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nIt works like charm.\r\n","title":"Failure to find org.dstovall:onejar-maven-plugin-jar","body":"<p>Including configuration :</p>\n<pre><code>    &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n            &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;configuration&gt;\n                        &lt;mainClass&gt;MainClassName&lt;/mainClass&gt;\n                        &lt;attachToBuild&gt;true&lt;/attachToBuild&gt;\n                        &lt;filename&gt;\n                            ${project.build.finalName}.${project.packaging}\n                        &lt;/filename&gt;\n                    &lt;/configuration&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;one-jar&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>It works like charm.</p>\n"}],"owner":{"display_name":"user6811693"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2426,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1665669319,"creation_date":1475719853,"question_id":39886439,"body_markdown":"I am new to Maven and while importing an existing Maven project from the pom.xml I find that the  following error occurs.\r\n\r\n**Failure to find org.dstovall:onejar-maven-plugin-jar:1.4.4**.Should I remove any Dependency to fix this? \r\n\r\n  [error snapshot][1]\r\nAny help is appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S1wCF.png","title":"Failure to find org.dstovall:onejar-maven-plugin-jar","body":"<p>I am new to Maven and while importing an existing Maven project from the pom.xml I find that the  following error occurs.</p>\n\n<p><strong>Failure to find org.dstovall:onejar-maven-plugin-jar:1.4.4</strong>.Should I remove any Dependency to fix this? </p>\n\n<p><a href=\"https://i.stack.imgur.com/S1wCF.png\" rel=\"nofollow\">error snapshot</a>\nAny help is appreciated.</p>\n"},{"tags":["java","database","arraylist","jdbc","hashmap"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665571012,"post_id":74040256,"comment_id":130730296,"body_markdown":"Probably easier to do something like ```select foo from bar group by foo having count(foo) &gt; 1```","body":"Probably easier to do something like <code>select foo from bar group by foo having count(foo) &gt; 1</code>"},{"owner":{"account_id":21832130,"reputation":19,"user_id":16126951,"display_name":"pooja b"},"score":0,"creation_date":1665585050,"post_id":74040256,"comment_id":130735953,"body_markdown":"I am using H2DB database in that this query is returning only a blank EarthriseAccount column....can you please suggest how to write this query which will give output for H2DB","body":"I am using H2DB database in that this query is returning only a blank EarthriseAccount column....can you please suggest how to write this query which will give output for H2DB"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665588200,"post_id":74040256,"comment_id":130737276,"body_markdown":"I don&#39;t know it. Won&#39;t it do sql?","body":"I don&#39;t know it. Won&#39;t it do sql?"},{"owner":{"account_id":21832130,"reputation":19,"user_id":16126951,"display_name":"pooja b"},"score":0,"creation_date":1665657165,"post_id":74040256,"comment_id":130753225,"body_markdown":"No my tables are in h2db...thanks for replying","body":"No my tables are in h2db...thanks for replying"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665657693,"post_id":74040256,"comment_id":130753399,"body_markdown":"[Welcome to H2, the Java **SQL** database](http://h2database.com/html/main.html) (My emphasis)","body":"<a href=\"http://h2database.com/html/main.html\" rel=\"nofollow noreferrer\">Welcome to H2, the Java <b>SQL</b> database</a> (My emphasis)"}],"owner":{"account_id":21832130,"reputation":19,"user_id":16126951,"display_name":"pooja b"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665669308,"creation_date":1665570144,"question_id":74040256,"body_markdown":"I have H2 database. I want to retrieve values of a column into an ArrayList. Then I want to find the duplicate values in a column\r\nand after finding the duplicate columns, I want to set the result column values as duplicate or unique.\r\n\r\nI have retrieved the table from SQL Server in JDBC resultset\r\n`````\r\nwhile(resultset.next()){\r\n\r\nArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\r\nlist.add(resultset.getString(1));\r\n\r\nSet&lt;String&gt; s =new HashSet&lt;String&gt;();\r\nfor(String name: list){\r\n  if(s.add(name)==false){\r\n    System.out.println(name + &quot;is duplicate&quot;)\r\n    St.setString(2 ,&quot;Duplicate&quot;)\r\n   }\r\n}\r\n````````\r\n\r\nHere 1 is the column which has IDs, and column 2 has to be set to &quot;Unique&quot; or &quot;duplicate&quot;, depending on if count(id)&gt;1.\r\n\r\nThe problem with ArrayList is it&#39;s storing value in list after every time while loop runs, and that&#39;s why it is giving &quot;duplicate&quot; output for every id. Can anyone please guide me what I am doing wrong?\r\n\r\nOr do I have to use something else in place of ArrayList? For example, is Hashmap be a better option?","title":"how to find duplicates from a column of a table using arraylist or hashmap","body":"<p>I have H2 database. I want to retrieve values of a column into an ArrayList. Then I want to find the duplicate values in a column\nand after finding the duplicate columns, I want to set the result column values as duplicate or unique.</p>\n<p>I have retrieved the table from SQL Server in JDBC resultset</p>\n<pre><code>while(resultset.next()){\n\nArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\nlist.add(resultset.getString(1));\n\nSet&lt;String&gt; s =new HashSet&lt;String&gt;();\nfor(String name: list){\n  if(s.add(name)==false){\n    System.out.println(name + &quot;is duplicate&quot;)\n    St.setString(2 ,&quot;Duplicate&quot;)\n   }\n}\n</code></pre>\n<p>Here 1 is the column which has IDs, and column 2 has to be set to &quot;Unique&quot; or &quot;duplicate&quot;, depending on if count(id)&gt;1.</p>\n<p>The problem with ArrayList is it's storing value in list after every time while loop runs, and that's why it is giving &quot;duplicate&quot; output for every id. Can anyone please guide me what I am doing wrong?</p>\n<p>Or do I have to use something else in place of ArrayList? For example, is Hashmap be a better option?</p>\n"},{"tags":["java","jpa","orm","quarkus","quarkus-panache"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":1,"creation_date":1665651684,"post_id":74052772,"comment_id":130751449,"body_markdown":"Replace `Subscription.tenantKey` with a `Tenant` object and problem should gone. You are using an ORM, so use it&#39;s capabilities.","body":"Replace <code>Subscription.tenantKey</code> with a <code>Tenant</code> object and problem should gone. You are using an ORM, so use it&#39;s capabilities."},{"owner":{"account_id":5701253,"reputation":4320,"user_id":4506140,"accept_rate":73,"display_name":"Jude Niroshan"},"score":0,"creation_date":1665653083,"post_id":74052772,"comment_id":130751910,"body_markdown":"In that case, it will become a **bi-directional** relationship. I only want one-way relationship with these 2 entities.","body":"In that case, it will become a <b>bi-directional</b> relationship. I only want one-way relationship with these 2 entities."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1665674484,"post_id":74052772,"comment_id":130759422,"body_markdown":"Then remove the Subscription.tenantKey property outright. Your issue is you have JPA trying to set the tenantKey foriegn key column through the Tenant.subscription relationships, but you also have a Subscription.tenantKey property you are likely leaving set to null. Use one or the other. Alternative to removing it, you can make it read only by mapping it as updatable=false, insertable=false, but it&#39;ll likely be out of synch with the values when it changes.","body":"Then remove the Subscription.tenantKey property outright. Your issue is you have JPA trying to set the tenantKey foriegn key column through the Tenant.subscription relationships, but you also have a Subscription.tenantKey property you are likely leaving set to null. Use one or the other. Alternative to removing it, you can make it read only by mapping it as updatable=false, insertable=false, but it&#39;ll likely be out of synch with the values when it changes."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1665674658,"post_id":74052772,"comment_id":130759494,"body_markdown":"PS what exactly do you wish tenantKey in your join column to reference? JPA mandates that relationships involve foreign keys that point to IDs. The setup you have means there is a Subscription.&quot;TENANTKEY&quot; foreign key that points to the Tenant.&quot;ID&quot; column - but you also seem to have a Tenant.tenantKey property (and db column). Did you mean to try to link the two up somehow, or is tenantKey a natural ID you might be using instead of the ID property?","body":"PS what exactly do you wish tenantKey in your join column to reference? JPA mandates that relationships involve foreign keys that point to IDs. The setup you have means there is a Subscription.&quot;TENANTKEY&quot; foreign key that points to the Tenant.&quot;ID&quot; column - but you also seem to have a Tenant.tenantKey property (and db column). Did you mean to try to link the two up somehow, or is tenantKey a natural ID you might be using instead of the ID property?"}],"owner":{"account_id":5701253,"reputation":4320,"user_id":4506140,"accept_rate":73,"display_name":"Jude Niroshan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":663,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665669247,"creation_date":1665650174,"question_id":74052772,"body_markdown":"I want to implement a simple uni-directional one-to-many association. I have tried the below setup. But when I fetch the `Tenant` entity, I always see `null` for the `subscriptions` field.\r\n\r\n\r\n\r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    @ToString\r\n    public class Tenant {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n        private String tenantKey;\r\n\r\n        @OneToMany(fetch = FetchType.EAGER)\r\n        @JoinColumn(name=&quot;tenantKey&quot;)\r\n        private Set&lt;Subscription&gt; subscriptions;\r\n    \r\n        public Set&lt;Subscription&gt; getSubscriptions() {\r\n            return subscriptions;\r\n        }\r\n    \r\n        public void setSubscriptions(Set&lt;Subscription&gt; subscriptions) {\r\n            this.subscriptions = subscriptions;\r\n        }\r\n    }\r\n\r\nand below is the Subscription entity\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    public class Subscription {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n        private String tenantKey;\r\n        private String serviceName;\r\n    }\r\n\r\nBelow is my repository class which I fetch the `Tenant` object\r\n\r\n    @ApplicationScoped\r\n    public class TenantRepository implements PanacheRepository&lt;Tenant&gt; {\r\n    \r\n        public Uni&lt;Tenant&gt; findByTenantKey(String tenantKey) {\r\n            return find(&quot;tenantKey= ?1&quot;, tenantKey).firstResult();\r\n        }\r\n    }\r\n\r\n","title":"Quarkus panache unidirectional OneToMany relationship","body":"<p>I want to implement a simple uni-directional one-to-many association. I have tried the below setup. But when I fetch the <code>Tenant</code> entity, I always see <code>null</code> for the <code>subscriptions</code> field.</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@ToString\npublic class Tenant {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    private String tenantKey;\n\n    @OneToMany(fetch = FetchType.EAGER)\n    @JoinColumn(name=&quot;tenantKey&quot;)\n    private Set&lt;Subscription&gt; subscriptions;\n\n    public Set&lt;Subscription&gt; getSubscriptions() {\n        return subscriptions;\n    }\n\n    public void setSubscriptions(Set&lt;Subscription&gt; subscriptions) {\n        this.subscriptions = subscriptions;\n    }\n}\n</code></pre>\n<p>and below is the Subscription entity</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@ToString\npublic class Subscription {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    private String tenantKey;\n    private String serviceName;\n}\n</code></pre>\n<p>Below is my repository class which I fetch the <code>Tenant</code> object</p>\n<pre><code>@ApplicationScoped\npublic class TenantRepository implements PanacheRepository&lt;Tenant&gt; {\n\n    public Uni&lt;Tenant&gt; findByTenantKey(String tenantKey) {\n        return find(&quot;tenantKey= ?1&quot;, tenantKey).firstResult();\n    }\n}\n</code></pre>\n"},{"tags":["java","security","servlets","passwords","http-headers"],"comments":[{"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"score":0,"creation_date":1361503267,"post_id":15016250,"comment_id":21097978,"body_markdown":"Isnt everything 1s and 0s.. How is a string more of a security threat than a byte[] ?","body":"Isnt everything 1s and 0s.. How is a string more of a security threat than a byte[] ?"},{"owner":{"account_id":218120,"reputation":52202,"user_id":474283,"display_name":"Cameron Skinner"},"score":3,"creation_date":1361503544,"post_id":15016250,"comment_id":21098037,"body_markdown":"@smk: Because `String`s can be interned, which means they stick around in memory long after you&#39;ve finished using them.","body":"@smk: Because <code>String</code>s can be interned, which means they stick around in memory long after you&#39;ve finished using them."},{"owner":{"account_id":75277,"reputation":33905,"user_id":215974,"display_name":"cheeken"},"score":7,"creation_date":1361503551,"post_id":15016250,"comment_id":21098038,"body_markdown":"@smk Strings are immutable.  Once you have one, it&#39;s going to hang around in memory until it&#39;s garbage-collected (long after you&#39;re done with it).  With a `byte[]`, once you&#39;re done with it, you can overwrite the contents to prevent the data from being read.","body":"@smk Strings are immutable.  Once you have one, it&#39;s going to hang around in memory until it&#39;s garbage-collected (long after you&#39;re done with it).  With a <code>byte[]</code>, once you&#39;re done with it, you can overwrite the contents to prevent the data from being read."},{"owner":{"account_id":444729,"reputation":27331,"user_id":836738,"display_name":"Tim Pote"},"score":1,"creation_date":1361503694,"post_id":15016250,"comment_id":21098073,"body_markdown":"@CameronSkinner It has nothing to do with interning (although that does exacerbate the problem).  Even a String in heap space that has yet to be garbage collected is still available in its immutable entirety in memory.","body":"@CameronSkinner It has nothing to do with interning (although that does exacerbate the problem).  Even a String in heap space that has yet to be garbage collected is still available in its immutable entirety in memory."},{"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"score":0,"creation_date":1361504278,"post_id":15016250,"comment_id":21098204,"body_markdown":"Thanks guys. This is why i love SO.","body":"Thanks guys. This is why i love SO."},{"owner":{"account_id":141815,"reputation":33481,"user_id":349112,"display_name":"tc."},"score":0,"creation_date":1361506761,"post_id":15016250,"comment_id":21098833,"body_markdown":"Of course, a good optimizer can potentially notice that the array will never be read from again and get rid of the zeroing. The garbage collector can also move the memory backing an array around. `ByteBuffer.allocateDirect()` should be reasonably safe...","body":"Of course, a good optimizer can potentially notice that the array will never be read from again and get rid of the zeroing. The garbage collector can also move the memory backing an array around. <code>ByteBuffer.allocateDirect()</code> should be reasonably safe..."},{"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"score":1,"creation_date":1361506812,"post_id":15016250,"comment_id":21098848,"body_markdown":"Maybe this concern has some validity on a client machine, but none on a server machine, where a lot more critical secrets are easily accessible.","body":"Maybe this concern has some validity on a client machine, but none on a server machine, where a lot more critical secrets are easily accessible."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":1,"creation_date":1430507193,"post_id":15016250,"comment_id":48106047,"body_markdown":"See   http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords","body":"See   <a href=\"http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords\" title=\"why is char preferred over string for passwords\">stackoverflow.com/questions/8881291/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1665669228,"creation_date":1361504912,"answer_id":15016494,"question_id":15016250,"body_markdown":"The simple answer is that you can&#39;t get the parameter in any other form than a String.   At least, not using the standard servlet APIs.  But there are a couple of possible &quot;get outs&quot;.\r\n\r\n  1. If you are prepared to get really ugly, you can in fact break the abstraction of the String object, and reach in and overwrite the characters.  (Strings are in fact mutable if you are prepared to break the rules.  This is one of the few situations where this might be justified.)\r\n\r\n  1. There might be a nonstandard API extension in your web container&#39;s implementation of (say) `HttpServletRequest` for doing this.  If not, you may be able to get hold of the source code and add one.  (Assuming you are using an open-source web container.)\r\n\r\n---------------------------\r\n\r\nHaving said that, IMO the &quot;no strings&quot; approach to Java security is misguided, or at least over-rated in terms of what it achieves.  \r\n\r\nThe &quot;no strings&quot; approach guards against the possibility that something can trawl through the address space of your application, locate things that look like strings, and sniff out possible passwords.  In theory, this could be done by:\r\n  \r\n  - a hacked (or vulnerable) Java application that breaks the JVM&#39;s execution model and looks at the raw memory,\r\n  - attaching a Java debugger and trawling through the reachable objects,\r\n  - using &quot;/dev/mem&quot; or similar to read process memory from the outside, \r\n  - accessing the remains of a program&#39;s swap image on the hard drive, or\r\n  - somehow causing it to core dump and reading the dump.\r\n\r\nHowever, all but the first of these requires that the bad guy has already broken security on the system.  And if the bad guy has done that there are other (probably simpler) ways to steal passwords from your program ... which the &quot;no strings&quot; approach won&#39;t prevent.  \r\n\r\nAnd if you are worried about a hack that exploits a Java security flaw to read raw memory, that flaw could probably used in other ways; e.g. to inject code to alter the way that the passwords are handled by the code.\r\n\r\nSo in summary, &quot;no strings&quot; is protecting against either really difficult hacks, or against cases where your security *is already* blown.  IMO&lt;sup&gt;1&lt;/sup&gt;, it is not worth the effort ... unless you are *required* to implement military grade security.\r\n\r\n------------------\r\n\r\n&lt;sup&gt;1 - See https://stackoverflow.com/questions/8881291 for other viewpoints.&lt;/sup&gt;\r\n\r\n","title":"In Java, how do I extract a password from a HttpServletRequest header without generating a String object?","body":"<p>The simple answer is that you can't get the parameter in any other form than a String.   At least, not using the standard servlet APIs.  But there are a couple of possible &quot;get outs&quot;.</p>\n<ol>\n<li><p>If you are prepared to get really ugly, you can in fact break the abstraction of the String object, and reach in and overwrite the characters.  (Strings are in fact mutable if you are prepared to break the rules.  This is one of the few situations where this might be justified.)</p>\n</li>\n<li><p>There might be a nonstandard API extension in your web container's implementation of (say) <code>HttpServletRequest</code> for doing this.  If not, you may be able to get hold of the source code and add one.  (Assuming you are using an open-source web container.)</p>\n</li>\n</ol>\n<hr />\n<p>Having said that, IMO the &quot;no strings&quot; approach to Java security is misguided, or at least over-rated in terms of what it achieves.</p>\n<p>The &quot;no strings&quot; approach guards against the possibility that something can trawl through the address space of your application, locate things that look like strings, and sniff out possible passwords.  In theory, this could be done by:</p>\n<ul>\n<li>a hacked (or vulnerable) Java application that breaks the JVM's execution model and looks at the raw memory,</li>\n<li>attaching a Java debugger and trawling through the reachable objects,</li>\n<li>using &quot;/dev/mem&quot; or similar to read process memory from the outside,</li>\n<li>accessing the remains of a program's swap image on the hard drive, or</li>\n<li>somehow causing it to core dump and reading the dump.</li>\n</ul>\n<p>However, all but the first of these requires that the bad guy has already broken security on the system.  And if the bad guy has done that there are other (probably simpler) ways to steal passwords from your program ... which the &quot;no strings&quot; approach won't prevent.</p>\n<p>And if you are worried about a hack that exploits a Java security flaw to read raw memory, that flaw could probably used in other ways; e.g. to inject code to alter the way that the passwords are handled by the code.</p>\n<p>So in summary, &quot;no strings&quot; is protecting against either really difficult hacks, or against cases where your security <em>is already</em> blown.  IMO<sup>1</sup>, it is not worth the effort ... unless you are <em>required</em> to implement military grade security.</p>\n<hr />\n<p><sup>1 - See <a href=\"https://stackoverflow.com/questions/8881291\">Why is char[] preferred over String for passwords?</a> for other viewpoints.</sup></p>\n"}],"owner":{"account_id":2399959,"reputation":3504,"user_id":2097858,"display_name":"Daniel S."},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1587,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":15016494,"answer_count":1,"score":16,"last_activity_date":1665669228,"creation_date":1361503139,"question_id":15016250,"body_markdown":"A common Java security guideline for handling sensitive data (== passwords) recommends never using a String object to store the data, and instead using an array of bytes or chars.  I am trying to apply this guideline in a HttpServlet handler.  In particular, I am using a basic-authentication-like approach where the credentials are passed in in a header (this is a GET request, so no body).\r\n\r\nThe issue I&#39;m running into is that it seems impossible to get to the header data without generating a String object, which violates the guideline from the get-go.  I&#39;ve searched for a solution pretty thoroughly, and didn&#39;t find any relevant discussion.  Does anybody have any insight into this issue?\r\n\r\nNOTE: this takes place over HTTPS, so there is no connection security problem here.","title":"In Java, how do I extract a password from a HttpServletRequest header without generating a String object?","body":"<p>A common Java security guideline for handling sensitive data (== passwords) recommends never using a String object to store the data, and instead using an array of bytes or chars.  I am trying to apply this guideline in a HttpServlet handler.  In particular, I am using a basic-authentication-like approach where the credentials are passed in in a header (this is a GET request, so no body).</p>\n\n<p>The issue I'm running into is that it seems impossible to get to the header data without generating a String object, which violates the guideline from the get-go.  I've searched for a solution pretty thoroughly, and didn't find any relevant discussion.  Does anybody have any insight into this issue?</p>\n\n<p>NOTE: this takes place over HTTPS, so there is no connection security problem here.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":26562047,"reputation":61,"user_id":20189731,"display_name":"mildgrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665644803,"creation_date":1665644755,"answer_id":74051690,"question_id":74051625,"body_markdown":"    @OneToMany\r\n    @JoinColumn(name = &quot;orderId&quot;, referencedColumnName = &quot;productId&quot;)// try orderId\r\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<pre><code>@OneToMany\n@JoinColumn(name = &quot;orderId&quot;, referencedColumnName = &quot;productId&quot;)// try orderId\nprivate List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26557785,"reputation":159,"user_id":20186121,"display_name":"Abhishek Kumar Jena"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665645300,"creation_date":1665645300,"answer_id":74051801,"question_id":74051625,"body_markdown":"Once you try this \r\nhope this will work out\r\n\r\nchange to this in **Order.java**\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy= &quot;order&quot;)\r\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\r\n\r\nadd this in **Product.java**\r\n\r\n    @ManyToOne\r\n    @JsonIgnore\r\n    private Order order;\r\n\r\nlet me know","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<p>Once you try this\nhope this will work out</p>\n<p>change to this in <strong>Order.java</strong></p>\n<pre><code>@OneToMany(cascade = CascadeType.ALL, mappedBy= &quot;order&quot;)\nprivate List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>add this in <strong>Product.java</strong></p>\n<pre><code>@ManyToOne\n@JsonIgnore\nprivate Order order;\n</code></pre>\n<p>let me know</p>\n"},{"tags":[],"owner":{"account_id":25495448,"reputation":1,"user_id":19289580,"display_name":"NandaniK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665659329,"creation_date":1665659329,"answer_id":74054783,"question_id":74051625,"body_markdown":"You should try this too.\r\n \r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;order&quot;)\r\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\r\n\r\n\r\nalong with this in Product.java\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;productId&quot;,\r\n            foreignKey = @ForeignKey(\r\n                    name = &quot;product_id_fk&quot;))\r\n    private Order order;","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<p>You should try this too.</p>\n<pre><code>@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;order&quot;)\nprivate List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>along with this in Product.java</p>\n<pre><code>@ManyToOne\n@JoinColumn(name = &quot;productId&quot;,\n        foreignKey = @ForeignKey(\n                name = &quot;product_id_fk&quot;))\nprivate Order order;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6484184,"reputation":2035,"user_id":5020294,"display_name":"Andriy Slobodyanyk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665669224,"creation_date":1665669224,"answer_id":74056968,"question_id":74051625,"body_markdown":"First, let&#39;s clarify what 1 is and what many are at your schema. As Order has a reference to Product that means many Orders might be related to the same Product, mightn&#39;t they? A bidirectional relationship is usually preferred but you need the unidirectional one, it should be something like\r\n\r\n    public class Order {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long orderId;\r\n\r\n        @Column\r\n        private String clientName;\r\n    }\r\n\r\nand\r\n\r\n    public class Product {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long productId;\r\n\r\n        @Column\r\n        private String name;\r\n\r\n        @OneToMany\r\n        @JoinColumn(name = &quot;productIdFK&quot;, referencedColumnName = &quot;productId&quot;)\r\n        private List&lt;Order&gt; orderList = new ArrayList&lt;&gt;();\r\n}","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<p>First, let's clarify what 1 is and what many are at your schema. As Order has a reference to Product that means many Orders might be related to the same Product, mightn't they? A bidirectional relationship is usually preferred but you need the unidirectional one, it should be something like</p>\n<pre><code>public class Order {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long orderId;\n\n    @Column\n    private String clientName;\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class Product {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long productId;\n\n    @Column\n    private String name;\n\n    @OneToMany\n    @JoinColumn(name = &quot;productIdFK&quot;, referencedColumnName = &quot;productId&quot;)\n    private List&lt;Order&gt; orderList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":18606859,"reputation":183,"user_id":13560278,"display_name":"maciejd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1665669224,"creation_date":1665644298,"question_id":74051625,"body_markdown":"I have got two entities in my application Orders and Products (one-to-many association). I am aiming to set up a unidirectional OneToMany relationship in Order entity (I&#39;m aware that it is not the best solution, however this is a business requirement). The database schema is generated by Liquibase and validated by Hibernate. Entities have been simplified for the sake of clarity. Database is Postgres.\r\n\r\nAlthough the schema is created correctly, Hibernate throws an exception:\r\n\r\n```\r\nCaused by: org.hibernate.cfg.RecoverableException: Unable to find column with logical name: productId in org.hibernate.mapping.Table(orders) and its related supertables and secondary tables\r\n\tat org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:844) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\tat org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:126) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\tat org.hibernate.cfg.annotations.CollectionBinder.bindCollectionSecondPass(CollectionBinder.java:1740) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\t... 37 common frames omitted\r\nCaused by: org.hibernate.MappingException: Unable to find column with logical name: productId in org.hibernate.mapping.Table(orders) and its related supertables and secondary tables\r\n\tat org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:839) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\t... 39 common frames omitted\r\n```\r\n\r\nTo prove that the schema is generated appropriately, I replaced *@OneToMany* annotation with *@ManyToOne* and **it works fine**! All of the sudden, Hibernate is able to find the column. After that I began assuming that there is some kind of bug in Hibernate...\r\n\r\nDoes anyone have an idea, how to solve this issue?\r\n\r\nMy code looks as follows:\r\n\r\n**Order.java**\r\n```\r\n@Entity\r\n@Table(name = &quot;orders&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Order {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long orderId;\r\n\r\n    @Column\r\n    private String clientName;\r\n\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;productIdFK&quot;, referencedColumnName = &quot;productId&quot;)\r\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\n**Product.java**\r\n```\r\n@Entity\r\n@Table(name = &quot;products&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Product {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long productId;\r\n\r\n    @Column\r\n    private String name;\r\n}\r\n```\r\n\r\n**Liquibase script**\r\n```\r\n{\r\n  &quot;databaseChangeLog&quot;: [\r\n    {\r\n      &quot;changeSet&quot;: {\r\n        &quot;id&quot;: &quot;Create PRODUCT table&quot;,\r\n        &quot;author&quot;: &quot;me&quot;,\r\n        &quot;changes&quot;: [\r\n          {\r\n            &quot;createTable&quot;: {\r\n              &quot;tableName&quot;: &quot;products&quot;,\r\n              &quot;columns&quot;: [\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;productId&quot;,\r\n                    &quot;type&quot;: &quot;bigint&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: false,\r\n                      &quot;unique&quot;: true,\r\n                      &quot;primaryKey&quot;: true\r\n                    }\r\n                  }\r\n                },\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;name&quot;,\r\n                    &quot;type&quot;: &quot;varchar(250)&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: true,\r\n                      &quot;unique&quot;: false\r\n                    }\r\n                  }\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            &quot;createTable&quot;: {\r\n              &quot;tableName&quot;: &quot;orders&quot;,\r\n              &quot;columns&quot;: [\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;orderId&quot;,\r\n                    &quot;type&quot;: &quot;bigint&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: false,\r\n                      &quot;unique&quot;: true,\r\n                      &quot;primaryKey&quot;: true\r\n                    }\r\n                  }\r\n                },\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;clientName&quot;,\r\n                    &quot;type&quot;: &quot;varchar(250)&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: true,\r\n                      &quot;unique&quot;: false\r\n                    }\r\n                  }\r\n                },\r\n                {\r\n                  &quot;column&quot;: {\r\n                    &quot;name&quot;: &quot;productIdFK&quot;,\r\n                    &quot;type&quot;: &quot;bigint&quot;,\r\n                    &quot;constraints&quot;: {\r\n                      &quot;nullable&quot;: true,\r\n                      &quot;unique&quot;: false\r\n                    }\r\n                  }\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n**Snippet from liquibase script generating relationships**\r\n```\r\n{\r\n            &quot;addForeignKeyConstraint&quot;: {\r\n              &quot;constraintName&quot;: &quot;fk_product_order&quot;,\r\n              &quot;baseColumnNames&quot;: &quot;productIdFK&quot;,\r\n              &quot;baseTableName&quot;: &quot;orders&quot;,\r\n              &quot;referencedColumnNames&quot;: &quot;productId&quot;,\r\n              &quot;referencedTableName&quot;: &quot;products&quot;\r\n            }\r\n          }\r\n```","title":"Unable to find column with logical name - hibernate exception when using @OneToMany and @JoinColumn","body":"<p>I have got two entities in my application Orders and Products (one-to-many association). I am aiming to set up a unidirectional OneToMany relationship in Order entity (I'm aware that it is not the best solution, however this is a business requirement). The database schema is generated by Liquibase and validated by Hibernate. Entities have been simplified for the sake of clarity. Database is Postgres.</p>\n<p>Although the schema is created correctly, Hibernate throws an exception:</p>\n<pre><code>Caused by: org.hibernate.cfg.RecoverableException: Unable to find column with logical name: productId in org.hibernate.mapping.Table(orders) and its related supertables and secondary tables\n    at org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:844) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    at org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:126) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    at org.hibernate.cfg.annotations.CollectionBinder.bindCollectionSecondPass(CollectionBinder.java:1740) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    ... 37 common frames omitted\nCaused by: org.hibernate.MappingException: Unable to find column with logical name: productId in org.hibernate.mapping.Table(orders) and its related supertables and secondary tables\n    at org.hibernate.cfg.Ejb3JoinColumn.checkReferencedColumnsType(Ejb3JoinColumn.java:839) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    ... 39 common frames omitted\n</code></pre>\n<p>To prove that the schema is generated appropriately, I replaced <em>@OneToMany</em> annotation with <em>@ManyToOne</em> and <strong>it works fine</strong>! All of the sudden, Hibernate is able to find the column. After that I began assuming that there is some kind of bug in Hibernate...</p>\n<p>Does anyone have an idea, how to solve this issue?</p>\n<p>My code looks as follows:</p>\n<p><strong>Order.java</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;orders&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Order {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long orderId;\n\n    @Column\n    private String clientName;\n\n    @OneToMany\n    @JoinColumn(name = &quot;productIdFK&quot;, referencedColumnName = &quot;productId&quot;)\n    private List&lt;Product&gt; productList = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p><strong>Product.java</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;products&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Product {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long productId;\n\n    @Column\n    private String name;\n}\n</code></pre>\n<p><strong>Liquibase script</strong></p>\n<pre><code>{\n  &quot;databaseChangeLog&quot;: [\n    {\n      &quot;changeSet&quot;: {\n        &quot;id&quot;: &quot;Create PRODUCT table&quot;,\n        &quot;author&quot;: &quot;me&quot;,\n        &quot;changes&quot;: [\n          {\n            &quot;createTable&quot;: {\n              &quot;tableName&quot;: &quot;products&quot;,\n              &quot;columns&quot;: [\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;productId&quot;,\n                    &quot;type&quot;: &quot;bigint&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: false,\n                      &quot;unique&quot;: true,\n                      &quot;primaryKey&quot;: true\n                    }\n                  }\n                },\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;name&quot;,\n                    &quot;type&quot;: &quot;varchar(250)&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: true,\n                      &quot;unique&quot;: false\n                    }\n                  }\n                }\n              ]\n            }\n          },\n          {\n            &quot;createTable&quot;: {\n              &quot;tableName&quot;: &quot;orders&quot;,\n              &quot;columns&quot;: [\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;orderId&quot;,\n                    &quot;type&quot;: &quot;bigint&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: false,\n                      &quot;unique&quot;: true,\n                      &quot;primaryKey&quot;: true\n                    }\n                  }\n                },\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;clientName&quot;,\n                    &quot;type&quot;: &quot;varchar(250)&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: true,\n                      &quot;unique&quot;: false\n                    }\n                  }\n                },\n                {\n                  &quot;column&quot;: {\n                    &quot;name&quot;: &quot;productIdFK&quot;,\n                    &quot;type&quot;: &quot;bigint&quot;,\n                    &quot;constraints&quot;: {\n                      &quot;nullable&quot;: true,\n                      &quot;unique&quot;: false\n                    }\n                  }\n                }\n              ]\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\n</code></pre>\n<p><strong>Snippet from liquibase script generating relationships</strong></p>\n<pre><code>{\n            &quot;addForeignKeyConstraint&quot;: {\n              &quot;constraintName&quot;: &quot;fk_product_order&quot;,\n              &quot;baseColumnNames&quot;: &quot;productIdFK&quot;,\n              &quot;baseTableName&quot;: &quot;orders&quot;,\n              &quot;referencedColumnNames&quot;: &quot;productId&quot;,\n              &quot;referencedTableName&quot;: &quot;products&quot;\n            }\n          }\n</code></pre>\n"},{"tags":["java","c#","unit-testing"],"comments":[{"owner":{"account_id":16750514,"reputation":856,"user_id":12107765,"display_name":"Klamsi"},"score":1,"creation_date":1665668334,"post_id":74056722,"comment_id":130757056,"body_markdown":"puh, much stuff. One thing you always have to ask yourself if your test gets complicated: Is my function doing too much?","body":"puh, much stuff. One thing you always have to ask yourself if your test gets complicated: Is my function doing too much?"},{"owner":{"display_name":"user13314823"},"score":0,"creation_date":1665668792,"post_id":74056722,"comment_id":130757228,"body_markdown":"@Klamsi while this is absolutely true, I have scenarios where, even though my function is doing little, it has more than one unexpected error scenarios, where it should throw an exception. So I would still need to test each scenario to verify if the function behaves as it should. So I think the question remains.","body":"@Klamsi while this is absolutely true, I have scenarios where, even though my function is doing little, it has more than one unexpected error scenarios, where it should throw an exception. So I would still need to test each scenario to verify if the function behaves as it should. So I think the question remains."},{"owner":{"account_id":16750514,"reputation":856,"user_id":12107765,"display_name":"Klamsi"},"score":1,"creation_date":1665668872,"post_id":74056722,"comment_id":130757257,"body_markdown":"Ah ok. I use special exception classes if I want to be sure it&#39;s the right exception that is thrown.","body":"Ah ok. I use special exception classes if I want to be sure it&#39;s the right exception that is thrown."},{"owner":{"display_name":"user13314823"},"score":0,"creation_date":1665669413,"post_id":74056722,"comment_id":130757452,"body_markdown":"@Klamsi cool. So like the &quot;HiImFooAndTheApiThatICalledFailed_Exception&quot; approach? Or you would try to make it more generic so it can be used by other classes too? If you have no problem with making it very specific, where would you put the class? In a folder that centralizes the exceptions of the layer/context, or together with the class that throws it?","body":"@Klamsi cool. So like the &quot;HiImFooAndTheApiThatICalledFailed_Exception&quot; approach? Or you would try to make it more generic so it can be used by other classes too? If you have no problem with making it very specific, where would you put the class? In a folder that centralizes the exceptions of the layer/context, or together with the class that throws it?"},{"owner":{"account_id":16750514,"reputation":856,"user_id":12107765,"display_name":"Klamsi"},"score":1,"creation_date":1665669964,"post_id":74056722,"comment_id":130757617,"body_markdown":"Yes like that. But I would not overdo that concept. Do you relly care about the exeption class in all cases? If you for example say: wrong paremeters =&gt; exception; right parameters =&gt; OK and your module behaves like that it works as expected.","body":"Yes like that. But I would not overdo that concept. Do you relly care about the exeption class in all cases? If you for example say: wrong paremeters =&gt; exception; right parameters =&gt; OK and your module behaves like that it works as expected."},{"owner":{"display_name":"user13314823"},"score":0,"creation_date":1665670628,"post_id":74056722,"comment_id":130757883,"body_markdown":"This sounds very reasonable. Thank you @Klamsi","body":"This sounds very reasonable. Thank you @Klamsi"}],"answers":[{"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665669209,"creation_date":1665669209,"answer_id":74056962,"question_id":74056722,"body_markdown":"You can mock other dependency and check that no methods where called. So if you get exception you will be sure it is from your code.\r\n\r\nIf you code can throw exception in several different scenarios you test them all separately.\r\n\r\nYou don&#39;t need to worry about which piece of your code thrown exception, only that correct exception was thrown.\r\n\r\nAs long as you have test for all scenarios you can be reasonably sure you code is fine. Just treat it as black box. If all inputs give you expected outputs it doesn&#39;t matter how it happens.","title":"While unit testing if an exception is being thrown, how can I know if the exception was thrown due to the error that I setted up?","body":"<p>You can mock other dependency and check that no methods where called. So if you get exception you will be sure it is from your code.</p>\n<p>If you code can throw exception in several different scenarios you test them all separately.</p>\n<p>You don't need to worry about which piece of your code thrown exception, only that correct exception was thrown.</p>\n<p>As long as you have test for all scenarios you can be reasonably sure you code is fine. Just treat it as black box. If all inputs give you expected outputs it doesn't matter how it happens.</p>\n"}],"owner":{"display_name":"user13314823"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74056962,"answer_count":1,"score":0,"last_activity_date":1665669209,"creation_date":1665668199,"question_id":74056722,"body_markdown":"**TL;DR version**: \r\n\r\nHow should I known if my method is throwing an exception because of the error scenario that I configured and not because of another error? Also, should I always configure everything in order to test if an exception is being thrown, or only configuring what is used to the point where the exception is thrown is enough?\r\n\r\n**Long version:**\r\n\r\nI have a class, MyClass, which has a method called foo. The method foo calls an API that returns an object indicating if the operation succeded. If the object returned by the API indicates an error, the foo method should throw an unchecked exception.\r\n\r\nIn order to test if foo is throwing the exception, I&#39;m mocking the API, so that it always indicates a fail. The foo method is working as expected, throwing an exception.\r\n\r\nIt is true, however, that other things can make foo throw exceptions. For instance, if the API succeds but other dependency of fool fails, fool will and should throw an excpetion.\r\n\r\nBecause of that, in order to test if foo is throwing an exception as results of a fail in the API, I need to mock every other dependency that foo has. Because of that, the unit test that tests if foo throws an exception when the API fails gets too big. This is also true for every other test involving exceptions.\r\n\r\nThe worst part is that, at the end of the day, I&#39;m always questioning, is it throwing an exception because the API failed, or because there&#39;s another error happening?\r\n\r\nThe solution I can think is creating exception for every possible case of failure, like &quot;HiImFooAndTheApiThatICalledFailed_Exception&quot;. I&#39;m not sure if this is a reaonable approach though. Other solution is testing the exception&#39;s message, but I think this is bad because I would be limiting message to be static.\r\n","title":"While unit testing if an exception is being thrown, how can I know if the exception was thrown due to the error that I setted up?","body":"<p><strong>TL;DR version</strong>:</p>\n<p>How should I known if my method is throwing an exception because of the error scenario that I configured and not because of another error? Also, should I always configure everything in order to test if an exception is being thrown, or only configuring what is used to the point where the exception is thrown is enough?</p>\n<p><strong>Long version:</strong></p>\n<p>I have a class, MyClass, which has a method called foo. The method foo calls an API that returns an object indicating if the operation succeded. If the object returned by the API indicates an error, the foo method should throw an unchecked exception.</p>\n<p>In order to test if foo is throwing the exception, I'm mocking the API, so that it always indicates a fail. The foo method is working as expected, throwing an exception.</p>\n<p>It is true, however, that other things can make foo throw exceptions. For instance, if the API succeds but other dependency of fool fails, fool will and should throw an excpetion.</p>\n<p>Because of that, in order to test if foo is throwing an exception as results of a fail in the API, I need to mock every other dependency that foo has. Because of that, the unit test that tests if foo throws an exception when the API fails gets too big. This is also true for every other test involving exceptions.</p>\n<p>The worst part is that, at the end of the day, I'm always questioning, is it throwing an exception because the API failed, or because there's another error happening?</p>\n<p>The solution I can think is creating exception for every possible case of failure, like &quot;HiImFooAndTheApiThatICalledFailed_Exception&quot;. I'm not sure if this is a reaonable approach though. Other solution is testing the exception's message, but I think this is bad because I would be limiting message to be static.</p>\n"},{"tags":["java","spring","apache-kafka"],"comments":[{"owner":{"account_id":11116821,"reputation":11,"user_id":9020288,"display_name":"Antronset"},"score":0,"creation_date":1665673288,"post_id":74056653,"comment_id":130758920,"body_markdown":"Possible solution: set content-type: application/x-java-object, change Message&lt;HashMap&lt;String, Object&gt;&gt; to Message&lt;byte[]&gt;, all additional info add into header.","body":"Possible solution: set content-type: application/x-java-object, change Message&lt;HashMap&lt;String, Object&gt;&gt; to Message&lt;byte[]&gt;, all additional info add into header."}],"owner":{"account_id":11116821,"reputation":11,"user_id":9020288,"display_name":"Antronset"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665668963,"creation_date":1665667923,"question_id":74056653,"body_markdown":"Now I am using org.springframework.messaging.Message to send a message and I need to add some text info and a byte array there.\r\n\r\n    @Bean public Function&lt;Message&lt;HashMap&lt;String, Object&gt;&gt;, Message&lt;HashMap&lt;String, Object&gt;&gt;&gt; handleCreateImageRequest() {\r\n    return comments -&gt; {\r\n        final byte[] byteImage = ...\r\n        final HashMap&lt;String, Object&gt; result = new HashMap&lt;&gt;();\r\n        result.put(&quot;file&quot;, byteImage);\r\n        result.put(&quot;youtubeUrl&quot;, extractedComments.get(&quot;youtubeUrl&quot;));\r\n        return MessageBuilder.withPayload(result).build();\r\n    };}\r\n        \r\nWith current configuration I receive error on the consumer side:\r\n\r\nCaused by: org.springframework.messaging.converter.MessageConversionException: Cannot parse payload ; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of java.util.Objects (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;iVBORw0KGgoAAAANSUhEUgAABLAAAASwCAYAAADrIbPPAACAAE..........\r\n\r\n    spring:\r\n      cloud:\r\n        function:\r\n          definition: handleCreateImageRequest\r\n        stream:\r\n          bindings:\r\n            handleCreateImageRequest-in-0:\r\n              destination: createImageQueue\r\n              content-type: application/json\r\n            handleCreateImageRequest-out-0:\r\n              destination: readyImageQueue\r\n              content-type: application/json\r\n          kafka:\r\n            binder:\r\n              zkNodes: kafka\r\n              brokers: kafka\r\n\r\nWhat is the best way to pass byte array with kafka? Is it possible that way? ","title":"Sending byte array in spring cloud Message with spring cloud stream, kafka binder","body":"<p>Now I am using org.springframework.messaging.Message to send a message and I need to add some text info and a byte array there.</p>\n<pre><code>@Bean public Function&lt;Message&lt;HashMap&lt;String, Object&gt;&gt;, Message&lt;HashMap&lt;String, Object&gt;&gt;&gt; handleCreateImageRequest() {\nreturn comments -&gt; {\n    final byte[] byteImage = ...\n    final HashMap&lt;String, Object&gt; result = new HashMap&lt;&gt;();\n    result.put(&quot;file&quot;, byteImage);\n    result.put(&quot;youtubeUrl&quot;, extractedComments.get(&quot;youtubeUrl&quot;));\n    return MessageBuilder.withPayload(result).build();\n};}\n    \n</code></pre>\n<p>With current configuration I receive error on the consumer side:</p>\n<p>Caused by: org.springframework.messaging.converter.MessageConversionException: Cannot parse payload ; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of java.util.Objects (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('iVBORw0KGgoAAAANSUhEUgAABLAAAASwCAYAAADrIbPPAACAAE..........</p>\n<pre><code>spring:\n  cloud:\n    function:\n      definition: handleCreateImageRequest\n    stream:\n      bindings:\n        handleCreateImageRequest-in-0:\n          destination: createImageQueue\n          content-type: application/json\n        handleCreateImageRequest-out-0:\n          destination: readyImageQueue\n          content-type: application/json\n      kafka:\n        binder:\n          zkNodes: kafka\n          brokers: kafka\n</code></pre>\n<p>What is the best way to pass byte array with kafka? Is it possible that way?</p>\n"},{"tags":["java","algorithm","data-structures"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1660019073,"post_id":73286470,"comment_id":129427292,"body_markdown":"Instead of using a heap as your only data structure, use another as well that has the same objects, for example a hashmap.","body":"Instead of using a heap as your only data structure, use another as well that has the same objects, for example a hashmap."},{"owner":{"account_id":6734029,"reputation":31,"user_id":5189406,"display_name":"Samrat K S"},"score":0,"creation_date":1660019374,"post_id":73286470,"comment_id":129427343,"body_markdown":"Problem with hashmap is finding top n elements, we have to sort and find which is O(nlogn)","body":"Problem with hashmap is finding top n elements, we have to sort and find which is O(nlogn)"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":1,"creation_date":1660019416,"post_id":73286470,"comment_id":129427347,"body_markdown":"Use the hashmap to look up the product and to update the count.  Use the heap to retrieve the top product.","body":"Use the hashmap to look up the product and to update the count.  Use the heap to retrieve the top product."},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1660019438,"post_id":73286470,"comment_id":129427353,"body_markdown":"Put your products in both data structures, as I wrote.","body":"Put your products in both data structures, as I wrote."}],"answers":[{"tags":[],"owner":{"account_id":449564,"reputation":78054,"user_id":844416,"display_name":"MBo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660024272,"creation_date":1660024272,"answer_id":73287078,"question_id":73286470,"body_markdown":"There is rather simple data structure based on binary heap - indexed (indirect) binary heap. You have some **objects in an array**, their **indices** are in heap, this heap is ordered by some object property/complex key. So you can easily update object keys, keeping heap in order. **Seeking is not needed**.\r\n\r\nThis structure is described, for example, in the book **Algorithms** of Robert Sedgewick and Kevin Wayne.   \r\nVery simple end concise implementation [is available online][1]\r\n\r\nNote that retrieving of top `n` products takes `nlogN` time. If you have to know top n at every step, consider also approach with **two** heaps - like hour glass - lower one is max-heap, upper one is min-heap. When upper heap top (really bottom) becomes smaller than top of lower heap, exchange these items. \r\n\r\n(Alike aproach is sometimes used in algorithms of online median determination, so you may also look at corresponding questions)\r\n\r\n\r\n  [1]: https://algs4.cs.princeton.edu/code/edu/princeton/cs/algs4/IndexMaxPQ.java.html","title":"How to find top n products based on number of items sold","body":"<p>There is rather simple data structure based on binary heap - indexed (indirect) binary heap. You have some <strong>objects in an array</strong>, their <strong>indices</strong> are in heap, this heap is ordered by some object property/complex key. So you can easily update object keys, keeping heap in order. <strong>Seeking is not needed</strong>.</p>\n<p>This structure is described, for example, in the book <strong>Algorithms</strong> of Robert Sedgewick and Kevin Wayne.<br />\nVery simple end concise implementation <a href=\"https://algs4.cs.princeton.edu/code/edu/princeton/cs/algs4/IndexMaxPQ.java.html\" rel=\"nofollow noreferrer\">is available online</a></p>\n<p>Note that retrieving of top <code>n</code> products takes <code>nlogN</code> time. If you have to know top n at every step, consider also approach with <strong>two</strong> heaps - like hour glass - lower one is max-heap, upper one is min-heap. When upper heap top (really bottom) becomes smaller than top of lower heap, exchange these items.</p>\n<p>(Alike aproach is sometimes used in algorithms of online median determination, so you may also look at corresponding questions)</p>\n"}],"owner":{"account_id":6734029,"reputation":31,"user_id":5189406,"display_name":"Samrat K S"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"closed_date":1665839336,"answer_count":1,"score":2,"last_activity_date":1665668799,"creation_date":1660018457,"question_id":73286470,"body_markdown":"How to find the top n products based on number items sold.\r\nWe can use max heap to keep track of number of times product was sold and find the top n from the heap. But the problem is let&#39;s say we have to find in real time when a product is brought we have to update the count and then heapify. Finding the product in heap is again O(N), deleting the product and adding back the product with updated count is O(LogN)\r\nIs there any better solution?","title":"How to find top n products based on number of items sold","body":"<p>How to find the top n products based on number items sold.\nWe can use max heap to keep track of number of times product was sold and find the top n from the heap. But the problem is let's say we have to find in real time when a product is brought we have to update the count and then heapify. Finding the product in heap is again O(N), deleting the product and adding back the product with updated count is O(LogN)\nIs there any better solution?</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-test"],"answers":[{"tags":[],"owner":{"account_id":26557785,"reputation":159,"user_id":20186121,"display_name":"Abhishek Kumar Jena"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665668670,"creation_date":1665668670,"answer_id":74056840,"question_id":74056182,"body_markdown":"have you mentioned the annotations in their respective places?\r\n\r\nlike this\r\n\r\n**entity class**\r\n\r\n    @Entity\r\n    @Table(name = &quot;demoEntity&quot;)\r\n    public class  DemoEntity{\r\n    \r\n    @Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate int id;\r\n\r\n    //attributes\r\n    \r\n    //methods / getters &amp; setters\r\n    \r\n    }\r\n\r\nthen repository\r\n\r\n    @Repository\r\n    public interface DemoEntityRepository extends JpaRepository&lt;DemoEntity, Intiger&gt;{\r\n    \t\r\n    \t\r\n    }\r\n\r\nhopefully, then it should work else you can ping me any time, I&#39;m always here.\r\n\r\nand please provide some sample code or error pages for better understanding.\r\n","title":"Defining JPA repositories in test","body":"<p>have you mentioned the annotations in their respective places?</p>\n<p>like this</p>\n<p><strong>entity class</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;demoEntity&quot;)\npublic class  DemoEntity{\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate int id;\n\n//attributes\n\n//methods / getters &amp; setters\n\n}\n</code></pre>\n<p>then repository</p>\n<pre><code>@Repository\npublic interface DemoEntityRepository extends JpaRepository&lt;DemoEntity, Intiger&gt;{\n    \n    \n}\n</code></pre>\n<p>hopefully, then it should work else you can ping me any time, I'm always here.</p>\n<p>and please provide some sample code or error pages for better understanding.</p>\n"}],"owner":{"account_id":21508935,"reputation":11,"user_id":15851933,"display_name":"Dmitri Zamysloff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665668670,"creation_date":1665665854,"question_id":74056182,"body_markdown":"I created some library with aspect which works with JPA repositories. What I am trying to achieve is to create tests for that particular aspect. There are neither repositories nor entities in source code of the library. So in test I need to test this aspect inside of spring context with test entities and repositories. So in test sources I defined DataJpaTest with properties to enable in-memory h2 and jpa ddl create, an entity class and repository interface which derives from CrudRepository. By starting of test I see JPA saying after scanning that 0 repositories found.\r\n\r\nI have tried to add repository class into context configuration annotation, then in enable JPA repositories, used also entity scan. Nothing works and I understand that what can be is that probably either repositories and entities scan generally disabled in test classes or there is some kind of other trick which I do not know yet. Does enybody tackled already such a problem?","title":"Defining JPA repositories in test","body":"<p>I created some library with aspect which works with JPA repositories. What I am trying to achieve is to create tests for that particular aspect. There are neither repositories nor entities in source code of the library. So in test I need to test this aspect inside of spring context with test entities and repositories. So in test sources I defined DataJpaTest with properties to enable in-memory h2 and jpa ddl create, an entity class and repository interface which derives from CrudRepository. By starting of test I see JPA saying after scanning that 0 repositories found.</p>\n<p>I have tried to add repository class into context configuration annotation, then in enable JPA repositories, used also entity scan. Nothing works and I understand that what can be is that probably either repositories and entities scan generally disabled in test classes or there is some kind of other trick which I do not know yet. Does enybody tackled already such a problem?</p>\n"},{"tags":["java","jms","activemq-artemis"],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665668503,"creation_date":1665668503,"answer_id":74056798,"question_id":74055875,"body_markdown":"Queues are essentially immutable. This is so that configuration changes don&#39;t unintentionally negatively impact the messages in the queue (e.g. changing a queue to durable = false and then restarting the broker only to find that all the durable messages in the queue have been dropped). The recommended way to &quot;change&quot; configuration would be to create a new queue with the configuration you want, move messages (if any) to that queue as necessary, &amp; delete the old queue.\r\n\r\nIf you create a durable queue or address via the web console that data is persisted to the broker&#39;s &quot;bindings&quot; journal. It isn&#39;t written back to `broker.xml` which is why you can&#39;t find it using `grep`.","title":"How to edit ActiveMQ Artemis Attributes","body":"<p>Queues are essentially immutable. This is so that configuration changes don't unintentionally negatively impact the messages in the queue (e.g. changing a queue to durable = false and then restarting the broker only to find that all the durable messages in the queue have been dropped). The recommended way to &quot;change&quot; configuration would be to create a new queue with the configuration you want, move messages (if any) to that queue as necessary, &amp; delete the old queue.</p>\n<p>If you create a durable queue or address via the web console that data is persisted to the broker's &quot;bindings&quot; journal. It isn't written back to <code>broker.xml</code> which is why you can't find it using <code>grep</code>.</p>\n"}],"owner":{"account_id":13011419,"reputation":271,"user_id":9404300,"display_name":"William Pham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74056798,"answer_count":1,"score":1,"last_activity_date":1665668614,"creation_date":1665664517,"question_id":74055875,"body_markdown":"I&#39;m new to ActiveMQ Artemis and unsure how to modify/edit/set any configurations (attributes) after creation of the address, or queues, or anything in there. On the web console, when I click on say an address or a queue, on the attribute tab, I can view tons of information like: Routing Type, Address, Role, Durable, etc... But when I click on a field, I can only view it, but there&#39;s no option to edit it.\r\n\r\nI tried to shoot in the dark by creating a queue named &quot;TestTopic&quot; within the web console. Went to the broker folder and searched for that string using the following command:\r\n```\r\ngrep -R &quot;TestTopic&quot; .\r\n```\r\nBut no luck!\r\n\r\nI then tried researching on the [java API doc][1] itself, but they only have getter methods. And jolokia API only gives read-only data.\r\n\r\nI thought that it might be because of my role which gives me read-only permission but that would be odd as the original user should have admin rights, and when I inspected it, it seems to be correct to me with a &quot;set*&quot; access method.\r\n\r\nIn artemis-roles.properties file:\r\n```\r\namq = admin\r\n```\r\n\r\nIn broker.xml file:\r\n```xml\r\n&lt;security-settings&gt;\r\n   &lt;security-setting match=&quot;#&quot;&gt;\r\n      &lt;permission type=&quot;createNonDurableQueue&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;deleteNonDurableQueue&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;createDurableQueue&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;deleteDurableQueue&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;createAddress&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;deleteAddress&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;consume&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;browse&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;permission type=&quot;send&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;!-- we need this otherwise ./artemis data imp wouldn&#39;t work --&gt;\r\n      &lt;permission type=&quot;manage&quot; roles=&quot;amq&quot;/&gt;\r\n   &lt;/security-setting&gt;\r\n&lt;/security-settings&gt;\r\n```\r\n\r\nIn management.xml file:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;management-context xmlns=&quot;http://activemq.apache.org/schema&quot;&gt;\r\n   &lt;authorisation&gt;\r\n      &lt;allowlist&gt;\r\n         &lt;entry domain=&quot;hawtio&quot;/&gt;\r\n      &lt;/allowlist&gt;\r\n      &lt;default-access&gt;\r\n         &lt;access method=&quot;list*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;access method=&quot;get*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;access method=&quot;is*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;access method=&quot;set*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;access method=&quot;*&quot; roles=&quot;amq&quot;/&gt;\r\n      &lt;/default-access&gt;\r\n      &lt;role-access&gt;\r\n         &lt;match domain=&quot;org.apache.activemq.artemis&quot;&gt;\r\n            &lt;access method=&quot;list*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;get*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;is*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;set*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;!-- Note count and browse are need to access the browse tab in the console--&gt;\r\n            &lt;access method=&quot;browse*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;count*&quot; roles=&quot;amq&quot;/&gt;\r\n            &lt;access method=&quot;*&quot; roles=&quot;amq&quot;/&gt;\r\n         &lt;/match&gt;\r\n      &lt;/role-access&gt;\r\n   &lt;/authorisation&gt;\r\n&lt;/management-context&gt;\r\n```\r\n\r\nI&#39;m running out of options on where to look for. If you guys can point me in the correct direction, it would be much appreciated :)\r\n\r\n  [1]: https://javadoc.io/doc/org.apache.activemq/artemis-core-client/latest/org/apache/activemq/artemis/api/core/management/package-summary.html","title":"How to edit ActiveMQ Artemis Attributes","body":"<p>I'm new to ActiveMQ Artemis and unsure how to modify/edit/set any configurations (attributes) after creation of the address, or queues, or anything in there. On the web console, when I click on say an address or a queue, on the attribute tab, I can view tons of information like: Routing Type, Address, Role, Durable, etc... But when I click on a field, I can only view it, but there's no option to edit it.</p>\n<p>I tried to shoot in the dark by creating a queue named &quot;TestTopic&quot; within the web console. Went to the broker folder and searched for that string using the following command:</p>\n<pre><code>grep -R &quot;TestTopic&quot; .\n</code></pre>\n<p>But no luck!</p>\n<p>I then tried researching on the <a href=\"https://javadoc.io/doc/org.apache.activemq/artemis-core-client/latest/org/apache/activemq/artemis/api/core/management/package-summary.html\" rel=\"nofollow noreferrer\">java API doc</a> itself, but they only have getter methods. And jolokia API only gives read-only data.</p>\n<p>I thought that it might be because of my role which gives me read-only permission but that would be odd as the original user should have admin rights, and when I inspected it, it seems to be correct to me with a &quot;set*&quot; access method.</p>\n<p>In artemis-roles.properties file:</p>\n<pre><code>amq = admin\n</code></pre>\n<p>In broker.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;security-settings&gt;\n   &lt;security-setting match=&quot;#&quot;&gt;\n      &lt;permission type=&quot;createNonDurableQueue&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;deleteNonDurableQueue&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;createDurableQueue&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;deleteDurableQueue&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;createAddress&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;deleteAddress&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;consume&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;browse&quot; roles=&quot;amq&quot;/&gt;\n      &lt;permission type=&quot;send&quot; roles=&quot;amq&quot;/&gt;\n      &lt;!-- we need this otherwise ./artemis data imp wouldn't work --&gt;\n      &lt;permission type=&quot;manage&quot; roles=&quot;amq&quot;/&gt;\n   &lt;/security-setting&gt;\n&lt;/security-settings&gt;\n</code></pre>\n<p>In management.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;management-context xmlns=&quot;http://activemq.apache.org/schema&quot;&gt;\n   &lt;authorisation&gt;\n      &lt;allowlist&gt;\n         &lt;entry domain=&quot;hawtio&quot;/&gt;\n      &lt;/allowlist&gt;\n      &lt;default-access&gt;\n         &lt;access method=&quot;list*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;access method=&quot;get*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;access method=&quot;is*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;access method=&quot;set*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;access method=&quot;*&quot; roles=&quot;amq&quot;/&gt;\n      &lt;/default-access&gt;\n      &lt;role-access&gt;\n         &lt;match domain=&quot;org.apache.activemq.artemis&quot;&gt;\n            &lt;access method=&quot;list*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;get*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;is*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;set*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;!-- Note count and browse are need to access the browse tab in the console--&gt;\n            &lt;access method=&quot;browse*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;count*&quot; roles=&quot;amq&quot;/&gt;\n            &lt;access method=&quot;*&quot; roles=&quot;amq&quot;/&gt;\n         &lt;/match&gt;\n      &lt;/role-access&gt;\n   &lt;/authorisation&gt;\n&lt;/management-context&gt;\n</code></pre>\n<p>I'm running out of options on where to look for. If you guys can point me in the correct direction, it would be much appreciated :)</p>\n"},{"tags":["java","algorithm"],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662849091,"creation_date":1662849091,"answer_id":73675598,"question_id":73675548,"body_markdown":"The text of the code challenge says:\r\n\r\n&gt; The **first line** contains a single integer, &#119899;, the number of students.\r\n&gt;\r\n&gt; Each line &#119894; of the &#119899; **subsequent** lines contains a single integer, *grades*[&#119894;].\r\n\r\nBut then if you look at the code template you get to work with, you&#39;ll see it takes care of reading the input and creating the data structure for it. It then calls your function with that data structure as argument. Obviously this does not include the information that was in the first line, just a `List` (which has a size) or whatever array type you get in the different languages you can use to solve these challenges.","title":"Do hackerrank challenge(s) treat first element specially?","body":"<p>The text of the code challenge says:</p>\n<blockquote>\n<p>The <strong>first line</strong> contains a single integer, 𝑛, the number of students.</p>\n<p>Each line 𝑖 of the 𝑛 <strong>subsequent</strong> lines contains a single integer, <em>grades</em>[𝑖].</p>\n</blockquote>\n<p>But then if you look at the code template you get to work with, you'll see it takes care of reading the input and creating the data structure for it. It then calls your function with that data structure as argument. Obviously this does not include the information that was in the first line, just a <code>List</code> (which has a size) or whatever array type you get in the different languages you can use to solve these challenges.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662849426,"creation_date":1662849426,"answer_id":73675624,"question_id":73675548,"body_markdown":"The &quot;lines of data&quot;, which includes the length, are **not** passed to `gradingStudents()`. Only the data elements (ie not the length) are passed.\r\n\r\nIf you scroll down in that problem, you&#39;ll see that the `main()` method reads all lines of data from stdin and builds the list of 4 elements *then* passes that list to the `gradingStudents()` that you must implement.","title":"Do hackerrank challenge(s) treat first element specially?","body":"<p>The &quot;lines of data&quot;, which includes the length, are <strong>not</strong> passed to <code>gradingStudents()</code>. Only the data elements (ie not the length) are passed.</p>\n<p>If you scroll down in that problem, you'll see that the <code>main()</code> method reads all lines of data from stdin and builds the list of 4 elements <em>then</em> passes that list to the <code>gradingStudents()</code> that you must implement.</p>\n"}],"owner":{"account_id":11020509,"reputation":354,"user_id":8094926,"display_name":"chocalaca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73675598,"answer_count":2,"score":0,"last_activity_date":1665668591,"creation_date":1662848553,"question_id":73675548,"body_markdown":"I&#39;m doing [this][1] hackerrank problem and am confused. The first element in the parameter array is an int representing number of grades, the rest are the grades themselves. In hackerrank, itself, I have this code (yes it could likely be better), and it passes:\r\n\r\n    public static List&lt;Integer&gt; gradingStudents(List&lt;Integer&gt; grades) {\r\n            List&lt;Integer&gt; result = new ArrayList&lt;&gt;();\r\n    \r\n            for (int i=0;i&lt;grades.size();i++) {\r\n                int grade = grades.get(i);\r\n                if (grade &gt;= 38) {\r\n                    int nextMultipleOfFive=0;\r\n                    for (int j=grade;j&lt;grade+6;j++) {\r\n                        if (j%5==0) {\r\n                            nextMultipleOfFive = j;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (nextMultipleOfFive-grade &lt; 3) {\r\n                        result.add(nextMultipleOfFive);\r\n                    } else {\r\n                        result.add(grade);\r\n                    }\r\n                } else {\r\n                    result.add(grade);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://www.hackerrank.com/challenges/grading/problem?isFullScreen=true\r\n  [2]: https://i.stack.imgur.com/Llu0z.png\r\n  [3]: https://i.stack.imgur.com/Kpu7g.png\r\n\r\n\r\nFine. But if I run that **same code** locally, I add main method \r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; grades = Arrays.asList(4,73,67,38,33);\r\n        System.out.println(gradingStudents(grades));\r\n    }\r\n\r\n...and get `[4, 75, 67, 40, 33]`. Wrong answer.\r\n\r\nOn the other hand, if I edit the for loop to start at 1: `for (int i=1;i&lt;grades.size();i++) {`, locally I get `[75, 67, 40, 33]`. Correct answer.\r\n\r\nIt seems like I should start at 1 since the first list element is not a grade. \r\n\r\nFor instances where hackerrank is used as a code test for an interview, this is unnerving. Am I looking at this wrong? Doesn&#39;t looping from 1 make more sense? Why does looping from zero work, and looping from 1 not work? ","title":"Do hackerrank challenge(s) treat first element specially?","body":"<p>I'm doing <a href=\"https://www.hackerrank.com/challenges/grading/problem?isFullScreen=true\" rel=\"nofollow noreferrer\">this</a> hackerrank problem and am confused. The first element in the parameter array is an int representing number of grades, the rest are the grades themselves. In hackerrank, itself, I have this code (yes it could likely be better), and it passes:</p>\n<pre><code>public static List&lt;Integer&gt; gradingStudents(List&lt;Integer&gt; grades) {\n        List&lt;Integer&gt; result = new ArrayList&lt;&gt;();\n\n        for (int i=0;i&lt;grades.size();i++) {\n            int grade = grades.get(i);\n            if (grade &gt;= 38) {\n                int nextMultipleOfFive=0;\n                for (int j=grade;j&lt;grade+6;j++) {\n                    if (j%5==0) {\n                        nextMultipleOfFive = j;\n                        break;\n                    }\n                }\n                if (nextMultipleOfFive-grade &lt; 3) {\n                    result.add(nextMultipleOfFive);\n                } else {\n                    result.add(grade);\n                }\n            } else {\n                result.add(grade);\n            }\n        }\n        return result;\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Llu0z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Llu0z.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/Kpu7g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kpu7g.png\" alt=\"enter image description here\" /></a></p>\n<p>Fine. But if I run that <strong>same code</strong> locally, I add main method</p>\n<pre><code>public static void main(String[] args) {\n    List&lt;Integer&gt; grades = Arrays.asList(4,73,67,38,33);\n    System.out.println(gradingStudents(grades));\n}\n</code></pre>\n<p>...and get <code>[4, 75, 67, 40, 33]</code>. Wrong answer.</p>\n<p>On the other hand, if I edit the for loop to start at 1: <code>for (int i=1;i&lt;grades.size();i++) {</code>, locally I get <code>[75, 67, 40, 33]</code>. Correct answer.</p>\n<p>It seems like I should start at 1 since the first list element is not a grade.</p>\n<p>For instances where hackerrank is used as a code test for an interview, this is unnerving. Am I looking at this wrong? Doesn't looping from 1 make more sense? Why does looping from zero work, and looping from 1 not work?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":10531491,"reputation":330,"user_id":7760687,"display_name":"Mayur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665668589,"creation_date":1665649398,"answer_id":74052606,"question_id":74052395,"body_markdown":"**Try This**\r\n\r\n     TextView charge_month = findViewById(R.id.charge_per_month);\r\n        String exp_amount = &quot;₹ 5600&quot;;\r\n        String act_amount = &quot;₹ 6708&quot;;\r\n        String complete_string = exp_amount + &quot;  &quot; + act_amount;\r\n        Spannable str = new SpannableString(complete_string);\r\n        str.setSpan(new StrikethroughSpan(), 0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n        str.setSpan(new ForegroundColorSpan(Color.WHITE),0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n        str.setSpan(new ForegroundColorSpan(Color.RED),6, str.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n        charge_month.setText(str);\r\n\r\nclick this link to check out look like - https://i.stack.imgur.com/CBCwf.jpg","title":"Spannable text shows only for a second, when button is clicked. Why?","body":"<p><strong>Try This</strong></p>\n<pre><code> TextView charge_month = findViewById(R.id.charge_per_month);\n    String exp_amount = &quot;₹ 5600&quot;;\n    String act_amount = &quot;₹ 6708&quot;;\n    String complete_string = exp_amount + &quot;  &quot; + act_amount;\n    Spannable str = new SpannableString(complete_string);\n    str.setSpan(new StrikethroughSpan(), 0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n    str.setSpan(new ForegroundColorSpan(Color.WHITE),0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n    str.setSpan(new ForegroundColorSpan(Color.RED),6, str.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n    charge_month.setText(str);\n</code></pre>\n<p>click this link to check out look like - <a href=\"https://i.stack.imgur.com/CBCwf.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/CBCwf.jpg</a></p>\n"},{"tags":[],"owner":{"account_id":23733633,"reputation":742,"user_id":17752564,"display_name":"ninhnau19"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665651711,"creation_date":1665651711,"answer_id":74053121,"question_id":74052395,"body_markdown":"change this from:\r\n```\r\nstr.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.indexOf(exp_amount.charAt(0)),act_amount.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n```\r\n\r\nto\r\n```\r\nstr.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.length() + 1,complete_string.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n```","title":"Spannable text shows only for a second, when button is clicked. Why?","body":"<p>change this from:</p>\n<pre><code>str.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.indexOf(exp_amount.charAt(0)),act_amount.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n</code></pre>\n<p>to</p>\n<pre><code>str.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.length() + 1,complete_string.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n</code></pre>\n"}],"owner":{"display_name":"user20229203"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665668589,"creation_date":1665648460,"question_id":74052395,"body_markdown":"I want to set a `spannable` string in my text view when a button is clicked, where the first word has white foreground color and striked out and the second word has red foreground color. This is my code:\r\n\r\n**My textview:**\r\n\r\n    &lt;TextView\r\n       android:id=&quot;@+id/charge_per_month&quot;\r\n       android:layout_width=&quot;match_parent&quot;\r\n       android:layout_height=&quot;wrap_content&quot;\r\n       android:layout_marginStart=&quot;16pt&quot;&gt;\r\n    &lt;/TextView&gt;\r\n\r\n**My java code:**\r\n\r\n    TextView charge_month = findViewById(R.id.charge_per_month);\r\n\r\n    String exp_amount = &quot;₹ 5600&quot;; //should be white in color and striked out\r\n\r\n    String act_amount = &quot;₹ 6708&quot;; //should be red in color\r\n\r\n    String complete_string = exp_amount + &quot;  &quot;+act_amount;\r\n\r\n    submit.setOnClickListener(new View.OnClickListener() {\r\n \r\n        @Override\r\n\r\n        public void onClick(View view) {\r\n\r\n            Spannable str = new SpannableString (complete_string);\r\n\r\n            str.setSpan(new StrikethroughSpan(), 0, exp_amount.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n\r\n            str.setSpan(new ForegroundColorSpan(Color.WHITE),0, exp_amount.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n\r\n            str.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.length() + 1,complete_string.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\r\n\r\n            charge_month.setText(str);\r\n         \r\n            }\r\n    }\r\n\r\nThe spannable string just shows for a split second, when the button is clicked. How do I fix this?","title":"Spannable text shows only for a second, when button is clicked. Why?","body":"<p>I want to set a <code>spannable</code> string in my text view when a button is clicked, where the first word has white foreground color and striked out and the second word has red foreground color. This is my code:</p>\n<p><strong>My textview:</strong></p>\n<pre><code>&lt;TextView\n   android:id=&quot;@+id/charge_per_month&quot;\n   android:layout_width=&quot;match_parent&quot;\n   android:layout_height=&quot;wrap_content&quot;\n   android:layout_marginStart=&quot;16pt&quot;&gt;\n&lt;/TextView&gt;\n</code></pre>\n<p><strong>My java code:</strong></p>\n<pre><code>TextView charge_month = findViewById(R.id.charge_per_month);\n\nString exp_amount = &quot;₹ 5600&quot;; //should be white in color and striked out\n\nString act_amount = &quot;₹ 6708&quot;; //should be red in color\n\nString complete_string = exp_amount + &quot;  &quot;+act_amount;\n\nsubmit.setOnClickListener(new View.OnClickListener() {\n\n    @Override\n\n    public void onClick(View view) {\n\n        Spannable str = new SpannableString (complete_string);\n\n        str.setSpan(new StrikethroughSpan(), 0, exp_amount.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\n        str.setSpan(new ForegroundColorSpan(Color.WHITE),0, exp_amount.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\n        str.setSpan(new ForegroundColorSpan(Color.RED),exp_amount.length() + 1,complete_string.length(),Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);\n\n        charge_month.setText(str);\n     \n        }\n}\n</code></pre>\n<p>The spannable string just shows for a split second, when the button is clicked. How do I fix this?</p>\n"},{"tags":["java","jbutton","imageicon"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1665658962,"post_id":74042542,"comment_id":130753761,"body_markdown":"Are you running your application on Windows with monitor scaling &gt; 100%?","body":"Are you running your application on Windows with monitor scaling &gt; 100%?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1665666838,"post_id":74042542,"comment_id":130756506,"body_markdown":"No, it&#39;s the same size","body":"No, it&#39;s the same size"},{"owner":{"account_id":13553491,"reputation":1,"user_id":9777692,"display_name":"Brabudu"},"score":0,"creation_date":1665768839,"post_id":74042542,"comment_id":130783257,"body_markdown":"@GilbertLeBlanc yes, that was the problem, a 125% scaling. I&#39;ve resolved with VM parameter -Dsun.java2d.uiScale=1","body":"@GilbertLeBlanc yes, that was the problem, a 125% scaling. I&#39;ve resolved with VM parameter -Dsun.java2d.uiScale=1"}],"answers":[{"tags":[],"owner":{"account_id":13553491,"reputation":1,"user_id":9777692,"display_name":"Brabudu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665668315,"creation_date":1665586845,"answer_id":74044042,"question_id":74042542,"body_markdown":"Resolved! \r\nThe problem was due to the 125% magnification set in Windows.\r\nIt now works well with VM parameter -Dsun.java2d.uiScale=1","title":"Distorted image with ImageIcon in JButton or JLabel","body":"<p>Resolved!\nThe problem was due to the 125% magnification set in Windows.\nIt now works well with VM parameter -Dsun.java2d.uiScale=1</p>\n"}],"owner":{"account_id":13553491,"reputation":1,"user_id":9777692,"display_name":"Brabudu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665668315,"creation_date":1665580772,"question_id":74042542,"body_markdown":"I&#39;m making a panel with some buttons and images.\r\nFor i.e. \r\n```\r\nurl = ImageIO.read(Electroneddas.class.getResourceAsStream(&quot;/Img/disk_out.png&quot;));\r\nImageIcon t=new ImageIcon(url);\r\n\t\t\t\t\t\t\r\nJButton bl=new JButton(t);\r\n```\r\nbut the image in the button is resized and not shown at 1: 1 scale\r\n[screenshot compared to actual image][1]\r\n\r\nThanks\r\n\r\n  [1]: https://i.stack.imgur.com/rwON7.png\r\n\r\nEDIT\r\n\r\nComplete Test code\r\n\r\n```\r\nimport java.awt.Insets;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.IOException;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class Test extends JFrame {\r\n\t\r\n\tpublic Test() {\r\n\t\tJPanel p=new JPanel();\r\n\t\tBufferedImage url;\r\n\t\ttry {\r\n\t\t\turl = ImageIO.read(Test.class.getResourceAsStream(&quot;circle.png&quot;));\r\n\t\t\tJButton bs=new JButton(new ImageIcon(url));\r\n\t\t\t\r\n\t\t\tp.add(bs);\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\r\n\t\tadd(p);\r\n\t\t\r\n\t\tpack();\r\n\t\tsetVisible(true);\r\n\t\t\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tTest t=new Test();\r\n\t}\r\n\r\n}\r\n```\r\nResult:\r\n[Frame][1]\r\n\r\nOriginal image:\r\n[Circle][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FziKS.png\r\n  [2]: https://i.stack.imgur.com/WDyuF.png","title":"Distorted image with ImageIcon in JButton or JLabel","body":"<p>I'm making a panel with some buttons and images.\nFor i.e.</p>\n<pre><code>url = ImageIO.read(Electroneddas.class.getResourceAsStream(&quot;/Img/disk_out.png&quot;));\nImageIcon t=new ImageIcon(url);\n                        \nJButton bl=new JButton(t);\n</code></pre>\n<p>but the image in the button is resized and not shown at 1: 1 scale\n<a href=\"https://i.stack.imgur.com/rwON7.png\" rel=\"nofollow noreferrer\">screenshot compared to actual image</a></p>\n<p>Thanks</p>\n<p>EDIT</p>\n<p>Complete Test code</p>\n<pre><code>import java.awt.Insets;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class Test extends JFrame {\n    \n    public Test() {\n        JPanel p=new JPanel();\n        BufferedImage url;\n        try {\n            url = ImageIO.read(Test.class.getResourceAsStream(&quot;circle.png&quot;));\n            JButton bs=new JButton(new ImageIcon(url));\n            \n            p.add(bs);\n            \n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    \n        add(p);\n        \n        pack();\n        setVisible(true);\n        \n    }\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Test t=new Test();\n    }\n\n}\n</code></pre>\n<p>Result:\n<a href=\"https://i.stack.imgur.com/rwON7.png\" rel=\"nofollow noreferrer\">Frame</a></p>\n<p>Original image:\n<a href=\"https://i.stack.imgur.com/WDyuF.png\" rel=\"nofollow noreferrer\">Circle</a></p>\n"},{"tags":["java","spring","rest","web-services"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":3,"creation_date":1628089976,"post_id":68653734,"comment_id":121329607,"body_markdown":"It has nothing to do with the @PathVariable. This says that you already have a process running on the same port. My guess is that you try running a new one and the old one is still running","body":"It has nothing to do with the @PathVariable. This says that you already have a process running on the same port. My guess is that you try running a new one and the old one is still running"},{"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"score":0,"creation_date":1628090708,"post_id":68653734,"comment_id":121329939,"body_markdown":"What is the operation system? depends your OS, you need to understand which app holds this port, if it a different app from your app you can change the 8080 in springboot application.properties [server.port=XXXX]. In case your springboot app already holds it you should kill the process from IDE or command line.","body":"What is the operation system? depends your OS, you need to understand which app holds this port, if it a different app from your app you can change the 8080 in springboot application.properties [server.port=XXXX]. In case your springboot app already holds it you should kill the process from IDE or command line."},{"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"score":0,"creation_date":1628091174,"post_id":68653734,"comment_id":121330158,"body_markdown":"Possible duplicate https://stackoverflow.com/questions/34253779/tomcat-server-error-port-8080-already-in-use","body":"Possible duplicate <a href=\"https://stackoverflow.com/questions/34253779/tomcat-server-error-port-8080-already-in-use\" title=\"tomcat server error port 8080 already in use\">stackoverflow.com/questions/34253779/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":14115707,"reputation":550,"user_id":10197536,"display_name":"Michael Scott"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1628090270,"creation_date":1628090270,"answer_id":68653848,"question_id":68653734,"body_markdown":"On mac, try this\r\n```\r\nsudo lsof -i :8080\r\n\r\n# get the process id from here and run\r\n\r\nkill -9 &lt;process_id&gt;","title":"Port 8080 is already in use","body":"<p>On mac, try this</p>\n<pre><code>sudo lsof -i :8080\n\n# get the process id from here and run\n\nkill -9 &lt;process_id&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17025432,"reputation":29,"user_id":12316832,"display_name":"Ivana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1628093113,"creation_date":1628090991,"answer_id":68654035,"question_id":68653734,"body_markdown":"I solved it, on Windows\r\n```\r\nnetstat ano | findstr 8080 \r\n\r\ntaskkill /F /PID &lt;number of task&gt;\r\n\r\n","title":"Port 8080 is already in use","body":"<p>I solved it, on Windows</p>\n<pre><code>netstat ano | findstr 8080 \n\ntaskkill /F /PID &lt;number of task&gt;\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22239052,"reputation":92,"user_id":16587205,"display_name":"Dev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1628163549,"creation_date":1628094731,"answer_id":68654972,"question_id":68653734,"body_markdown":"First your issue is not with **Path variable**, Port **8080** is been used by some **other application** \r\n\r\nCommand for Linux,\r\n\r\n```\r\nsudo netstat -nlap | grep 8080\r\nsudo kill &lt;process id&gt;\r\n```\r\n\r\nCommand for Windows \r\n\r\n```\r\nnetstat -ano | findstr :8080\r\ntaskkill /PID &lt;process id&gt; /F\r\n```\r\n\r\nIf any application uses the port 8080, it will return the process id.\r\n","title":"Port 8080 is already in use","body":"<p>First your issue is not with <strong>Path variable</strong>, Port <strong>8080</strong> is been used by some <strong>other application</strong></p>\n<p>Command for Linux,</p>\n<pre><code>sudo netstat -nlap | grep 8080\nsudo kill &lt;process id&gt;\n</code></pre>\n<p>Command for Windows</p>\n<pre><code>netstat -ano | findstr :8080\ntaskkill /PID &lt;process id&gt; /F\n</code></pre>\n<p>If any application uses the port 8080, it will return the process id.</p>\n"},{"tags":[],"owner":{"account_id":26611564,"reputation":1,"user_id":20231686,"display_name":"Rajan Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665667841,"creation_date":1665667841,"answer_id":74056627,"question_id":68653734,"body_markdown":"To get rid from Port was already in use just put server.port=0 in yml or properties file ,it will auto generate port number for application.","title":"Port 8080 is already in use","body":"<p>To get rid from Port was already in use just put server.port=0 in yml or properties file ,it will auto generate port number for application.</p>\n"}],"owner":{"account_id":17025432,"reputation":29,"user_id":12316832,"display_name":"Ivana"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6162,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":68654035,"answer_count":4,"score":-1,"last_activity_date":1665667841,"creation_date":1628089814,"question_id":68653734,"body_markdown":"The method works properly without path variable but then when I write path variable and run app it says port 8080 is already in use  \r\n```\t\r\n@GetMapping(path=&quot;/{userId}&quot;)\r\npublic String getUser(@PathVariable String userId) {\r\n\treturn &quot;Get User Info with id &quot;+userId;\r\n}","title":"Port 8080 is already in use","body":"<p>The method works properly without path variable but then when I write path variable and run app it says port 8080 is already in use</p>\n<pre><code>@GetMapping(path=&quot;/{userId}&quot;)\npublic String getUser(@PathVariable String userId) {\n    return &quot;Get User Info with id &quot;+userId;\n}\n</code></pre>\n"},{"tags":["java","string","list","groovy"],"comments":[{"owner":{"display_name":"user626607"},"score":0,"creation_date":1362009945,"post_id":15125003,"comment_id":21287545,"body_markdown":"It is already a list in groovy?","body":"It is already a list in groovy?"},{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":0,"creation_date":1362010185,"post_id":15125003,"comment_id":21287616,"body_markdown":"This is a `List` do you want to convert it to a `String`?","body":"This is a <code>List</code> do you want to convert it to a <code>String</code>?"},{"owner":{"account_id":2362613,"reputation":308,"user_id":2068981,"display_name":"user2068981"},"score":0,"creation_date":1362010539,"post_id":15125003,"comment_id":21287742,"body_markdown":"But when I do \n\nids.each{println it}\n\nI have this result :\n[&lt;/br&gt;\n1&lt;/br&gt;\n0&lt;/br&gt;\n,&lt;/br&gt;\n&lt;/br&gt;\n1&lt;/br&gt;\n]&lt;/br&gt;","body":"But when I do   ids.each{println it}  I have this result : [&lt;/br&gt; 1&lt;/br&gt; 0&lt;/br&gt; ,&lt;/br&gt; &lt;/br&gt; 1&lt;/br&gt; ]&lt;/br&gt;"}],"answers":[{"tags":[],"owner":{"account_id":1427657,"reputation":925,"user_id":1350772,"accept_rate":67,"display_name":"Sergio Martinez"},"down_vote_count":3,"up_vote_count":33,"is_accepted":false,"score":30,"last_activity_date":1362798306,"creation_date":1362010243,"answer_id":15125100,"question_id":15125003,"body_markdown":"    def l = ids.split(&#39;,&#39;).collect{it as int}\r\n","title":"Convert String variable to a List [Groovy]","body":"<pre><code>def l = ids.split(',').collect{it as int}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1089367,"reputation":3761,"user_id":1084364,"display_name":"Rick Mangi"},"down_vote_count":2,"up_vote_count":37,"is_accepted":true,"score":35,"last_activity_date":1362082812,"creation_date":1362082812,"answer_id":15144918,"question_id":15125003,"body_markdown":"\r\n\r\n    def l = Eval.me(ids)\r\n\r\nTakes the string of groovy code (in this case &quot;[10,1,9]&quot;) and evaluates it as groovy. This will give you a list of 3 ints.\r\n","title":"Convert String variable to a List [Groovy]","body":"<pre><code>def l = Eval.me(ids)\n</code></pre>\n\n<p>Takes the string of groovy code (in this case \"[10,1,9]\") and evaluates it as groovy. This will give you a list of 3 ints.</p>\n"},{"tags":[],"owner":{"account_id":1249256,"reputation":10253,"user_id":1242842,"accept_rate":70,"display_name":"Alexander Suraphel"},"down_vote_count":2,"up_vote_count":32,"is_accepted":false,"score":30,"last_activity_date":1665667650,"creation_date":1429188073,"answer_id":29675035,"question_id":15125003,"body_markdown":"**Use the built-in [JsonSlurper][1]!**\r\n\r\n[Using `Eval` could be **risky** as it executes any code][2] and the string manipulation solution will fail once the data type is changed so it is not adaptable. So it&#39;s best to use [JsonSlurper][3].\r\n\r\n    import groovy.json.JsonSlurper\r\n    \r\n    //List of ints \r\n    def ids = &quot;[10, 1, 9]&quot;\r\n    def idList = new JsonSlurper().parseText(ids)\r\n    \r\n    assert 10 == idList[0]\r\n    \r\n    //List of strings \r\n    def ids = &#39;[&quot;10&quot;, &quot;1&quot;, &quot;9&quot;]&#39;\r\n    idList = new JsonSlurper().parseText(ids)\r\n    \r\n    assert &#39;10&#39; == idList[0]\r\n\r\n\r\n  [1]: http://docs.groovy-lang.org/latest/html/gapi/groovy/json/JsonSlurper.html\r\n  [2]: https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html\r\n  [3]: http://groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html","title":"Convert String variable to a List [Groovy]","body":"<p><strong>Use the built-in <a href=\"http://docs.groovy-lang.org/latest/html/gapi/groovy/json/JsonSlurper.html\" rel=\"nofollow noreferrer\">JsonSlurper</a>!</strong></p>\n<p><a href=\"https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html\" rel=\"nofollow noreferrer\">Using <code>Eval</code> could be <strong>risky</strong> as it executes any code</a> and the string manipulation solution will fail once the data type is changed so it is not adaptable. So it's best to use <a href=\"http://groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html\" rel=\"nofollow noreferrer\">JsonSlurper</a>.</p>\n<pre><code>import groovy.json.JsonSlurper\n\n//List of ints \ndef ids = &quot;[10, 1, 9]&quot;\ndef idList = new JsonSlurper().parseText(ids)\n\nassert 10 == idList[0]\n\n//List of strings \ndef ids = '[&quot;10&quot;, &quot;1&quot;, &quot;9&quot;]'\nidList = new JsonSlurper().parseText(ids)\n\nassert '10' == idList[0]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9597337,"reputation":665,"user_id":7126065,"accept_rate":0,"display_name":"TangHongWan"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1553316986,"creation_date":1553316986,"answer_id":55310743,"question_id":15125003,"body_markdown":"This does work for me. And `Eval.me` will not work in Jenkins groovy script. I have tried.\r\n\r\n    assert &quot;[a,b,c]&quot;.tokenize(&#39;,[]&#39;) == [a,b,c]","title":"Convert String variable to a List [Groovy]","body":"<p>This does work for me. And <code>Eval.me</code> will not work in Jenkins groovy script. I have tried.</p>\n\n<pre><code>assert \"[a,b,c]\".tokenize(',[]') == [a,b,c]\n</code></pre>\n"}],"owner":{"account_id":2362613,"reputation":308,"user_id":2068981,"display_name":"user2068981"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100317,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":15144918,"answer_count":4,"score":29,"last_activity_date":1665667650,"creation_date":1362009665,"question_id":15125003,"body_markdown":"How can I convert this `String` variable to a `List` ?\r\n\r\n    def ids = &quot;[10, 1, 9]&quot;\r\n\r\nI tried with: as `List` and `toList();`","title":"Convert String variable to a List [Groovy]","body":"<p>How can I convert this <code>String</code> variable to a <code>List</code> ?</p>\n\n<pre><code>def ids = \"[10, 1, 9]\"\n</code></pre>\n\n<p>I tried with: as <code>List</code> and <code>toList();</code></p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":10531491,"reputation":330,"user_id":7760687,"display_name":"Mayur"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665667501,"creation_date":1665639562,"answer_id":74050910,"question_id":74050573,"body_markdown":"**Try This**\r\n\r\n    private int selectedItem = -1;\r\n    \r\n        public void onBindViewHolder(@NonNull RecyclerView.ViewHolder viewHolder, int position) {\r\n            ViewHolder holder = (ViewHolder) viewHolder;\r\n            ChannelMainBean bean = mList.get(position);\r\n            holder.tvContent.setText(bean.getChannelName());\r\n    \t\t\r\n    \t\tholder.tvContent.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    selectedItem = position;\r\n    \t\t\t\tnotifyDataSetChanged();\r\n                }\r\n            });\r\n            if (selectedItem == position){\r\n                holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_border_blue));\r\n            }\r\n            else{\r\n                holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_background_default));\r\n            }\r\n        }\r\n        }\r\n\r\n`selectedItem` is integer variable set global and than set click listener on `TextView` and inside click method set click position in to `selectedItem` and than `notifyDataSetChanged()` for update background for text view","title":"How to highlight selected items in the Adapter in Android(Java)","body":"<p><strong>Try This</strong></p>\n<pre><code>private int selectedItem = -1;\n\n    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder viewHolder, int position) {\n        ViewHolder holder = (ViewHolder) viewHolder;\n        ChannelMainBean bean = mList.get(position);\n        holder.tvContent.setText(bean.getChannelName());\n        \n        holder.tvContent.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                selectedItem = position;\n                notifyDataSetChanged();\n            }\n        });\n        if (selectedItem == position){\n            holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_border_blue));\n        }\n        else{\n            holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_background_default));\n        }\n    }\n    }\n</code></pre>\n<p><code>selectedItem</code> is integer variable set global and than set click listener on <code>TextView</code> and inside click method set click position in to <code>selectedItem</code> and than <code>notifyDataSetChanged()</code> for update background for text view</p>\n"}],"owner":{"account_id":26213782,"reputation":73,"user_id":19892188,"display_name":"Dinuka Shehan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74050910,"answer_count":1,"score":0,"last_activity_date":1665667501,"creation_date":1665636118,"question_id":74050573,"body_markdown":"couldn&#39;t highlight the selected item in the adapter recyclerview.\r\n\r\n```@Override\r\npublic void onBindViewHolder(@NonNull RecyclerView.ViewHolder viewHolder, int position) {\r\n    ViewHolder holder = (ViewHolder) viewHolder;\r\n    ChannelMainBean bean = mList.get(position);\r\n    holder.tvContent.setText(bean.getChannelName());\r\n    if (holder.selectedItem == position){\r\n        holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_border_blue));\r\n    }\r\n    else{\r\n        holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_background_default));\r\n    }\r\n}\r\n```","title":"How to highlight selected items in the Adapter in Android(Java)","body":"<p>couldn't highlight the selected item in the adapter recyclerview.</p>\n<pre><code>public void onBindViewHolder(@NonNull RecyclerView.ViewHolder viewHolder, int position) {\n    ViewHolder holder = (ViewHolder) viewHolder;\n    ChannelMainBean bean = mList.get(position);\n    holder.tvContent.setText(bean.getChannelName());\n    if (holder.selectedItem == position){\n        holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_border_blue));\n    }\n    else{\n        holder.tvContent.setBackground(ResUtils.getDrawable(R.drawable.choose_network_background_default));\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1650580718,"post_id":71961575,"comment_id":127158956,"body_markdown":"Mock the CustomerRepo.  I&#39;d suggest Mockito.","body":"Mock the CustomerRepo.  I&#39;d suggest Mockito."}],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1650585680,"creation_date":1650585680,"answer_id":71962052,"question_id":71961575,"body_markdown":"In `Mockito` `ArgumentMatcher` is a functional interface and you could use `argThat` matcher.\r\n\r\n```\r\n@Mock\r\nprivate CustomerRepo customerRepo;\r\n\r\n@Test\r\nvoid updateCustomerThrowsException() {\r\n\tdoThrow(RuntimeException.class)\r\n\t\t\t.when(customerRepo).save(argThat(customer -&gt; customer.getId() == 5));\r\n\r\n\tvar customer = new Customer();\r\n\tcustomer.setId(5);\r\n\r\n\tassertThrows(RuntimeException.class, () -&gt; updateCustomer(customer));\r\n}\r\n```","title":"How to throw an exception based on some condition in Junit 5?","body":"<p>In <code>Mockito</code> <code>ArgumentMatcher</code> is a functional interface and you could use <code>argThat</code> matcher.</p>\n<pre><code>@Mock\nprivate CustomerRepo customerRepo;\n\n@Test\nvoid updateCustomerThrowsException() {\n    doThrow(RuntimeException.class)\n            .when(customerRepo).save(argThat(customer -&gt; customer.getId() == 5));\n\n    var customer = new Customer();\n    customer.setId(5);\n\n    assertThrows(RuntimeException.class, () -&gt; updateCustomer(customer));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26611564,"reputation":1,"user_id":20231686,"display_name":"Rajan Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665667406,"creation_date":1665666393,"answer_id":74056293,"question_id":71961575,"body_markdown":"With Junit 5 you can use - assertThrows() to throw exception based on condition.\r\n\r\nExample :- \r\n\r\n    @Test\r\n    public void testFooThrowsIndexOutOfBoundsException() {\r\n        Throwable exception = assertThrows(IndexOutOfBoundsException.class, () -&gt; foo.doStuff());\r\n        assertEquals(&quot;expected messages&quot;, exception.getMessage());\r\n    }","title":"How to throw an exception based on some condition in Junit 5?","body":"<p>With Junit 5 you can use - assertThrows() to throw exception based on condition.</p>\n<p>Example :-</p>\n<pre><code>@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n    Throwable exception = assertThrows(IndexOutOfBoundsException.class, () -&gt; foo.doStuff());\n    assertEquals(&quot;expected messages&quot;, exception.getMessage());\n}\n</code></pre>\n"}],"owner":{"account_id":7938311,"reputation":537,"user_id":6164682,"display_name":"sub"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1625,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71962052,"answer_count":2,"score":0,"last_activity_date":1665667406,"creation_date":1650580541,"question_id":71961575,"body_markdown":"I have a spring boot application with Junit 5 and Mockito. \r\n\r\nI have the below code. \r\n\r\n\r\n     @Autowired\r\n        CustomerRepo customerRepo;\r\n    \r\n        public UpdatedCustomer updateCustomer(Customer customer) {\r\n            UpdatedCustomer updCustomer = new UpdatedCustomer();\r\n            updCustomer.setId(customer.getId());\r\n            //some more setters\r\n    \r\n            //Here I need to throw exceptions for the customer whose id is 5 only. Can I do this in mockito or any other framework?\r\n            customerRepo.save(updCustomer);\r\n            return updCustomer;\r\n        }\r\n\r\nI need to throw an exception for the customer whose ID is 5 in the above code and for other customers actual implementation of save should be invoked. Is it possible in SpyBean or any other way?\r\n\r\nKindly suggest.","title":"How to throw an exception based on some condition in Junit 5?","body":"<p>I have a spring boot application with Junit 5 and Mockito.</p>\n<p>I have the below code.</p>\n<pre><code> @Autowired\n    CustomerRepo customerRepo;\n\n    public UpdatedCustomer updateCustomer(Customer customer) {\n        UpdatedCustomer updCustomer = new UpdatedCustomer();\n        updCustomer.setId(customer.getId());\n        //some more setters\n\n        //Here I need to throw exceptions for the customer whose id is 5 only. Can I do this in mockito or any other framework?\n        customerRepo.save(updCustomer);\n        return updCustomer;\n    }\n</code></pre>\n<p>I need to throw an exception for the customer whose ID is 5 in the above code and for other customers actual implementation of save should be invoked. Is it possible in SpyBean or any other way?</p>\n<p>Kindly suggest.</p>\n"},{"tags":["java","windows","ldap","ipv6","openldap"],"answers":[{"tags":[],"owner":{"account_id":2256321,"reputation":3472,"user_id":1987437,"accept_rate":100,"display_name":"Liam Kelly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665667139,"creation_date":1665667139,"answer_id":74056455,"question_id":74039248,"body_markdown":"I am not a `Java` expert but the `permission denied` is an odd error for a networking problem. \r\n\r\nDigging into the problem it looks like this mainly happens when you set a socket  to IPv4 and give it an IPv6 address or vice versa. If possible I would repeat your test using the IPv6 address instead of the domain name for `YVONTEXXXXX1F3.XXXXXX.net` (you&#39;ll need to disable the SSL hostname check). This will ensure you are passing an IPv6 address to the connect. If the error persists then I would look into the socket properties. You may be able to do this at compile time with:\r\n\r\n`-Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true`\r\n\r\n**References**\r\n* https://stackoverflow.com/a/12902187/1987437\r\n* https://blog.miyuru.lk/enabling-ipv6-on-maven-java/#:~:text=For%20Java%20Applications%20you%20can,property%20in%20the%20app%20itself.","title":"(91) Connect Error java.net.SocketException: Permission denied: connect&#39; LDAP IPV6","body":"<p>I am not a <code>Java</code> expert but the <code>permission denied</code> is an odd error for a networking problem.</p>\n<p>Digging into the problem it looks like this mainly happens when you set a socket  to IPv4 and give it an IPv6 address or vice versa. If possible I would repeat your test using the IPv6 address instead of the domain name for <code>YVONTEXXXXX1F3.XXXXXX.net</code> (you'll need to disable the SSL hostname check). This will ensure you are passing an IPv6 address to the connect. If the error persists then I would look into the socket properties. You may be able to do this at compile time with:</p>\n<p><code>-Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true</code></p>\n<p><strong>References</strong></p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/12902187/1987437\">https://stackoverflow.com/a/12902187/1987437</a></li>\n<li><a href=\"https://blog.miyuru.lk/enabling-ipv6-on-maven-java/#:%7E:text=For%20Java%20Applications%20you%20can,property%20in%20the%20app%20itself\" rel=\"nofollow noreferrer\">https://blog.miyuru.lk/enabling-ipv6-on-maven-java/#:~:text=For%20Java%20Applications%20you%20can,property%20in%20the%20app%20itself</a>.</li>\n</ul>\n"}],"owner":{"account_id":26579111,"reputation":21,"user_id":20204033,"display_name":"Yugandhar Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":869,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665667139,"creation_date":1665565606,"question_id":74039248,"body_markdown":"we are testing our appliction to work only on IPV6 \r\nwhen trying to connect to LDAP in windows 10 java 17 env and after disabling IPV4 from network level settings was facing below issue \r\n\r\n    SEVERE: LDAPException: Unable to connect to server YVONTEXXXXX1F3.XXXXXX.net:6,366 (91) Connect Error\r\n    java.net.SocketException: Permission denied: connect&#39;\r\n    \r\n    Caused by: java.net.SocketException: Permission denied: connect\r\n            at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n            at java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n            at java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n            at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\r\n            at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n            at java.base/java.net.Socket.connect(Socket.java:633)\r\n            at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:299)\r\n            at java.base/sun.security.ssl.SSLSocketImpl.&lt;init&gt;(SSLSocketImpl.java:158)\r\n            at java.base/sun.security.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:88)\r\n            at com.novell.ldap.LDAPJSSESecureSocketFactory.createSocket(LDAPJSSESecureSocketFactory.java:96)\r\n            at com.novell.ldap.Connection.connect(Connection.java:455)\r\n            ... 42 more\r\n\r\nwhat can be the issue\r\n\r\n - does LDAP support IPV6 ?\r\n - do we need to remove any firewall settings\r\n\r\nconnection is working fine when IPV4 is enabled","title":"(91) Connect Error java.net.SocketException: Permission denied: connect&#39; LDAP IPV6","body":"<p>we are testing our appliction to work only on IPV6\nwhen trying to connect to LDAP in windows 10 java 17 env and after disabling IPV4 from network level settings was facing below issue</p>\n<pre><code>SEVERE: LDAPException: Unable to connect to server YVONTEXXXXX1F3.XXXXXX.net:6,366 (91) Connect Error\njava.net.SocketException: Permission denied: connect'\n\nCaused by: java.net.SocketException: Permission denied: connect\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n        at java.base/java.net.Socket.connect(Socket.java:633)\n        at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:299)\n        at java.base/sun.security.ssl.SSLSocketImpl.&lt;init&gt;(SSLSocketImpl.java:158)\n        at java.base/sun.security.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:88)\n        at com.novell.ldap.LDAPJSSESecureSocketFactory.createSocket(LDAPJSSESecureSocketFactory.java:96)\n        at com.novell.ldap.Connection.connect(Connection.java:455)\n        ... 42 more\n</code></pre>\n<p>what can be the issue</p>\n<ul>\n<li>does LDAP support IPV6 ?</li>\n<li>do we need to remove any firewall settings</li>\n</ul>\n<p>connection is working fine when IPV4 is enabled</p>\n"},{"tags":["java","selenium","xpath","webdriver","webdriverwait"],"comments":[{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1665656105,"post_id":74053830,"comment_id":130752859,"body_markdown":"Where is the link element and what is the tag and the text? Totally unclear. Can you share a link to that page or at least the XML of it with more explanations what is your goal?","body":"Where is the link element and what is the tag and the text? Totally unclear. Can you share a link to that page or at least the XML of it with more explanations what is your goal?"},{"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"score":0,"creation_date":1665657412,"post_id":74053830,"comment_id":130753302,"body_markdown":"@Prophet quite clear as for me. I found a link by xpath - the code line for that is in topic. Then I know there should be a `span` tag inside that link (tag `a`). That span tag has a `class=&quot;extra-light&quot;` and it wraps a given text (for example `stackoverflow`). So I just try to detect if the link contains that span tag. Clear?","body":"@Prophet quite clear as for me. I found a link by xpath - the code line for that is in topic. Then I know there should be a <code>span</code> tag inside that link (tag <code>a</code>). That span tag has a <code>class=&quot;extra-light&quot;</code> and it wraps a given text (for example <code>stackoverflow</code>). So I just try to detect if the link contains that span tag. Clear?"},{"owner":{"account_id":25717722,"reputation":10119,"user_id":19475185,"display_name":"Barry the Platipus"},"score":0,"creation_date":1665659059,"post_id":74053830,"comment_id":130753796,"body_markdown":"Still not clear: are you looking **only** for `a` tags containing those spans, or are you also looking for `a` tags not containing that span?","body":"Still not clear: are you looking <b>only</b> for <code>a</code> tags containing those spans, or are you also looking for <code>a</code> tags not containing that span?"},{"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"score":0,"creation_date":1665659193,"post_id":74053830,"comment_id":130753850,"body_markdown":"@BarrythePlatipus I&#39;m looking only for `a` tags with attribute `so-extra=&quot;x12fog&quot;` containing span with `class=&quot;extra-light&quot;` which contains a given text.","body":"@BarrythePlatipus I&#39;m looking only for <code>a</code> tags with attribute <code>so-extra=&quot;x12fog&quot;</code> containing span with <code>class=&quot;extra-light&quot;</code> which contains a given text."},{"owner":{"account_id":25717722,"reputation":10119,"user_id":19475185,"display_name":"Barry the Platipus"},"score":0,"creation_date":1665659379,"post_id":74053830,"comment_id":130753907,"body_markdown":"So then locate those `span` tags, and their `a` ancestors (with that attribute). Easy, no drama.","body":"So then locate those <code>span</code> tags, and their <code>a</code> ancestors (with that attribute). Easy, no drama."}],"answers":[{"tags":[],"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665658076,"creation_date":1665658076,"answer_id":74054509,"question_id":74053830,"body_markdown":"Try either of the `xpath`.\r\n\r\n    //a[.//span[@class=&#39;extra-light&#39;]]\r\n\r\nOr\r\n\r\n    //a[.//span[@class=&#39;extra-light&#39; and text()=&#39;stackoverflow&#39;]]\r\n\r\nOr\r\n\r\n    //a[.//span[@class=&#39;extra-light&#39; and contains(.,&#39;stackoverflow&#39;)]]\r\n\r\n\r\n----------\r\nCode should be\r\n\r\n\r\n    ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class=&#39;extra-light&#39; and text()=&#39;stackoverflow&#39;]]&quot;))\r\n\r\nOr\r\n\r\n    ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class=&#39;extra-light&#39; and contains(.,&#39;stackoverflow&#39;)]]&quot;))\r\n\r\nor\r\n\r\n    ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class=&#39;extra-light&#39;]]&quot;))","title":"How to check if located link contains a tag with a given text?","body":"<p>Try either of the <code>xpath</code>.</p>\n<pre><code>//a[.//span[@class='extra-light']]\n</code></pre>\n<p>Or</p>\n<pre><code>//a[.//span[@class='extra-light' and text()='stackoverflow']]\n</code></pre>\n<p>Or</p>\n<pre><code>//a[.//span[@class='extra-light' and contains(.,'stackoverflow')]]\n</code></pre>\n<hr />\n<p>Code should be</p>\n<pre><code>ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class='extra-light' and text()='stackoverflow']]&quot;))\n</code></pre>\n<p>Or</p>\n<pre><code>ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class='extra-light' and contains(.,'stackoverflow')]]&quot;))\n</code></pre>\n<p>or</p>\n<pre><code>ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[.//span[@class='extra-light']]&quot;))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665662741,"creation_date":1665662741,"answer_id":74055497,"question_id":74053830,"body_markdown":"You can use `findElements` method with XPath locator defining the desired element as following:\r\n```java\r\nif(driver.findElements(By.xpath(&quot;//a[@so-extra=&#39;x12fog&#39;]//span[@class=&#39;extra-light&#39; and contains(.,&#39;stackoverflow&#39;)]&quot;)).size()&gt;0){\r\n    System.out.println(&quot;Element found&quot;);\r\n}\r\n```\r\n`findElements` method return a list of found matching elements. So, if there is such element the list will be non-empty (size&gt;0), otherwise the returned list will be empty.","title":"How to check if located link contains a tag with a given text?","body":"<p>You can use <code>findElements</code> method with XPath locator defining the desired element as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(driver.findElements(By.xpath(&quot;//a[@so-extra='x12fog']//span[@class='extra-light' and contains(.,'stackoverflow')]&quot;)).size()&gt;0){\n    System.out.println(&quot;Element found&quot;);\n}\n</code></pre>\n<p><code>findElements</code> method return a list of found matching elements. So, if there is such element the list will be non-empty (size&gt;0), otherwise the returned list will be empty.</p>\n"}],"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74055497,"answer_count":2,"score":0,"last_activity_date":1665666968,"creation_date":1665655065,"question_id":74053830,"body_markdown":"I need to check if located link contains `&lt;span class=&quot;extra-light&quot;&gt;` with a given text. \r\nThe way I locate the link:\r\n\r\n    ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@so-extra=\\&quot;x12fog\\&quot;]&quot;))\r\n\r\nHow to make it?\r\n","title":"How to check if located link contains a tag with a given text?","body":"<p>I need to check if located link contains <code>&lt;span class=&quot;extra-light&quot;&gt;</code> with a given text.\nThe way I locate the link:</p>\n<pre><code>ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@so-extra=\\&quot;x12fog\\&quot;]&quot;))\n</code></pre>\n<p>How to make it?</p>\n"},{"tags":["java","xml","web","servlets","server"],"comments":[{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1663678940,"post_id":73786254,"comment_id":130292558,"body_markdown":"It is not clear to me what you are trying to do. You imported the project in Eclipse and how are you trying to start it? Regarding the question for jar files: Usually you do not have to copy jar files manually. The pom,xml might be helpful.","body":"It is not clear to me what you are trying to do. You imported the project in Eclipse and how are you trying to start it? Regarding the question for jar files: Usually you do not have to copy jar files manually. The pom,xml might be helpful."},{"owner":{"account_id":22873416,"reputation":23,"user_id":17016103,"display_name":"utente1234567890"},"score":0,"creation_date":1663680940,"post_id":73786254,"comment_id":130293407,"body_markdown":"I run it from the server. First I remove the project from the server, then I clean the server, re-add the project to the server, then go to the project and run it with the server. I added the pom.xml file","body":"I run it from the server. First I remove the project from the server, then I clean the server, re-add the project to the server, then go to the project and run it with the server. I added the pom.xml file"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663681075,"post_id":73786254,"comment_id":130293465,"body_markdown":"YO need to build the war file and deploy that to the server. However you are using Spring Boot why deploy to the server at all. That being said your dependencies are quite a mess, mixing jars from different versions of a framework, using incompatible versions... Plugins as dependencies","body":"YO need to build the war file and deploy that to the server. However you are using Spring Boot why deploy to the server at all. That being said your dependencies are quite a mess, mixing jars from different versions of a framework, using incompatible versions... Plugins as dependencies"},{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1663681338,"post_id":73786254,"comment_id":130293588,"body_markdown":"As M. Deinum said you don&#39;t need a dedicated server, Spring Boot comes with an embedded server. To run it, see this question for example: https://stackoverflow.com/questions/23677808/how-to-run-spring-boot-web-application-in-eclipse-itself","body":"As M. Deinum said you don&#39;t need a dedicated server, Spring Boot comes with an embedded server. To run it, see this question for example: <a href=\"https://stackoverflow.com/questions/23677808/how-to-run-spring-boot-web-application-in-eclipse-itself\" title=\"how to run spring boot web application in eclipse itself\">stackoverflow.com/questions/23677808/&hellip;</a>"},{"owner":{"account_id":22873416,"reputation":23,"user_id":17016103,"display_name":"utente1234567890"},"score":0,"creation_date":1663681449,"post_id":73786254,"comment_id":130293647,"body_markdown":"my professor told me to use eclipse, so i was forced to abandon spring, using embedded server, it gave me other errors, i posted the question and someone told me these errors depended on the server referencing a project version not updated and therefore I had to redeploy it. On another page in the forum, I read that it is always better to have the external server and not the internal one, so I put it external. I have 290 jar files in my maven dependencies and I don&#39;t know which ones to keep and which to delete.","body":"my professor told me to use eclipse, so i was forced to abandon spring, using embedded server, it gave me other errors, i posted the question and someone told me these errors depended on the server referencing a project version not updated and therefore I had to redeploy it. On another page in the forum, I read that it is always better to have the external server and not the internal one, so I put it external. I have 290 jar files in my maven dependencies and I don&#39;t know which ones to keep and which to delete."}],"owner":{"account_id":22873416,"reputation":23,"user_id":17016103,"display_name":"utente1234567890"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665666966,"creation_date":1663674721,"question_id":73786254,"body_markdown":"I have a dynamic web project imported from Spring into Eclipse. I updated the server, it was embedded before, I updated the dependencies in the pom regarding the server, I read the other solutions regarding the various entries in the stacktrace, but nothing worked, I deleted .m2, the web.xml file I edited several times, some tutorials suggest creating a separate class for each jsp page, but this would no longer work for me a page that contains multiple forms and therefore refers to multiple methods in the class. However, I commented on the other servlets in the web.xml file because in the meantime I want you to load at least the first one that contains the references to all the others. I have been stuck on this error for several days. Can someone help me? thanks to who helps me.\r\n\r\nThe jar files contained in the Maven, do I have to copy them all in the WEB-INF \\ lib folder?\r\n\r\ndo I need to add the pom.xml file here in the question?\r\n\r\nSTACKTRACE:\r\n\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Server version name:   Apache Tomcat/10.0.23\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Server built:          Jul 14 2022 08:16:11 UTC\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Server version number: 10.0.23.0\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: OS Name:               Windows 8\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: OS Version:            6.2\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Architecture:          amd64\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Java Home:             C:\\Program Files\\Java\\jdk-18.0.2.1\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: JVM Version:           18.0.2.1+1-1\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: JVM Vendor:            Oracle Corporation\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: CATALINA_BASE:         \r\n    C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\org.eclipse.wst.\r\n    server.core\\tmp0\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: CATALINA_HOME:         C:\\Program Files\\Apache2\\apache-tomcat-10.0.23-windows- \r\n    x64\\apache-tomcat-10.0.23\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: - \r\n    Dcatalina.base=C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\r\n    \\org.eclipse.wst.server.core\\tmp0\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: -Dcatalina.home=C:\\Program Files\\Apache2\\apache-tomcat- \r\n    10.0.23-windows-x64\\apache-tomcat-10.0.23\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: - \r\n    Dwtp.deploy=C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\r\n    \\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.base/java.lang=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.base/java.io=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.base/java.util=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: -Dfile.encoding=UTF-8\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\r\n    INFO: Command line argument: -XX:+ShowCodeDetailsInExceptionMessages\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\n    INFO: Loaded Apache Tomcat Native library [1.2.35] using APR version [1.7.0].\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\n    INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random \r\n    [true], UDS [true].\r\n    set 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\r\n    INFO: OpenSSL successfully initialized [OpenSSL 1.1.1q  5 Jul 2022]\r\n    set 20, 2022 1:29:32 PM org.apache.coyote.AbstractProtocol init\r\n    INFO: Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\r\n    set 20, 2022 1:29:32 PM org.apache.catalina.startup.Catalina load\r\n    INFO: Server initialization in [2187] milliseconds\r\n    set 20, 2022 1:29:33 PM org.apache.catalina.core.StandardService startInternal\r\n    INFO: Starting service [Catalina]\r\n    set 20, 2022 1:29:33 PM org.apache.catalina.core.StandardEngine startInternal\r\n    INFO: Starting Servlet engine: [Apache Tomcat/10.0.23]\r\n    set 20, 2022 1:29:34 PM org.apache.catalina.core.ContainerBase startInternal\r\n    SEVERE: A child container failed during start\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: \r\n    Failed to start component [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat \r\n    org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat \r\n    java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\r\n\tat \r\n    java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\r\n    DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat \r\n    org.apache.catalina.util.LifecycleBase.handleSubClassException(\r\n    LifecycleBase.java:440)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\tat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat \r\n    org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 19 more\r\n    Caused by: java.lang.IllegalArgumentException: The main resource set specified \r\n    [C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\r\n    org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\r\n\tat \r\n    org.apache.catalina.webresources.StandardRoot.createMainResourceSet\r\n    (StandardRoot.java:762)\r\n\tat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t... 28 more\r\n\r\n    set 20, 2022 1:29:34 PM org.apache.catalina.core.ContainerBase startInternal\r\n    SEVERE: A child container failed during start\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A \r\n    child container failed during start\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\r\n    DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during \r\n    start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat \r\n    java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 11 more\r\n    Caused by: java.util.concurrent.ExecutionException: \r\n    org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\t... 19 more\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat \r\n    org.apache.catalina.util.LifecycleBase.handleSubClassException(\r\n    LifecycleBase.java:440)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\tat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 19 more\r\n    Caused by: java.lang.IllegalArgumentException: The main resource set specified \r\n    [C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\r\n    org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\r\n\tat \r\n    org.apache.catalina.webresources.StandardRoot.createMainResourceSet(\r\n    StandardRoot.java:762)\r\n\tat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t... 28 more\r\n\r\n    set 20, 2022 1:29:34 PM org.apache.catalina.startup.Catalina start\r\n    SEVERE: The required Server component failed to start so Tomcat is unable to start.\r\n    org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\r\n\tat \r\n    java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\r\n    DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: java.util.concurrent.ExecutionException:  \r\n    org.apache.catalina.LifecycleException: A child container failed during start\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\t... 11 more\r\n    Caused by: org.apache.catalina.LifecycleException: A child container failed during \r\n    start\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat \r\n    java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 11 more\r\n    Caused by: java.util.concurrent.ExecutionException: \r\n    org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\r\n\t... 19 more\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component \r\n    [org.apache.catalina.webresources.StandardRoot@74bada02]\r\n\tat \r\n    org.apache.catalina.util.LifecycleBase.handleSubClassException\r\n    (LifecycleBase.java:440)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\tat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(\r\n    InlineExecutorService.java:75)\r\n\tat java.base/java.util.concurrent.AbstractExecutorService.submit(\r\n    AbstractExecutorService.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t... 19 more\r\n    Caused by: java.lang.IllegalArgumentException: The main resource set specified \r\n    [C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\r\n    org.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\r\n\tat org.apache.catalina.webresources.StandardRoot.createMainResourceSet(\r\n    StandardRoot.java:762)\r\n\tat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t... 28 more\r\n\r\n    set 20, 2022 1:29:34 PM org.apache.coyote.AbstractProtocol pause\r\n    INFO: Pausing ProtocolHandler [&quot;http-nio-8080&quot;]\r\n    set 20, 2022 1:29:34 PM org.apache.catalina.core.StandardService stopInternal\r\n    INFO: Stopping service [Catalina]\r\n    set 20, 2022 1:29:34 PM org.apache.coyote.AbstractProtocol destroy\r\n    INFO: Destroying ProtocolHandler [&quot;http-nio-8080&quot;]\r\n\r\nweb.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee\r\n                      https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;\r\n    version=&quot;5.0&quot;&gt;\r\n    &lt;!--  \r\n    &lt;display-name&gt;Parlamento2&lt;/display-name&gt; --&gt;\r\n  \r\n\r\n\r\n    &lt;display-name&gt;Parlamento&lt;/display-name&gt;\r\n    &lt;!--\r\n    &lt;welcome-file-list&gt;\r\n    \r\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n    --&gt;\r\n    &lt;!-- \r\n    &lt;welcome-file-list&gt;\r\n                &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n               &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n    class&gt;   \r\n        &lt;/welcome-file-list&gt;\r\n         --&gt;\r\n           \r\n         &lt;servlet&gt; \r\n     &lt;servlet-name&gt;index&lt;/servlet-name&gt; \r\n     &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet-class&gt; \r\n     &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;index&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n       \r\n        \r\n        \r\n          \r\n         \r\n         &lt;servlet&gt;\r\n                &lt;servlet-name&gt;parlamentari&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt; \r\n        &lt;/servlet&gt;\r\n        \r\n         &lt;servlet-mapping&gt;\r\n         &lt;servlet-name&gt;parlamentari&lt;/servlet-name&gt;\r\n         &lt;url-pattern&gt;/parlamentari&lt;/url-pattern&gt;\r\n         &lt;/servlet-mapping&gt;\r\n        \r\n        &lt;!-- \r\n        \r\n        \r\n         &lt;servlet&gt;\r\n                &lt;servlet-name&gt;lista_periodi_cariche.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;lista_periodi_cariche.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/lista_periodi_cariche&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        \r\n        \r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;showParlamentare.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;showParlamentare.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/showParlamentare&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        \r\n        \r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;parlamentareDeleted.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;parlamentareDeleted.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/parlamentareDeleted&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        \r\n        \r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;lista_parlamentari.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;lista_parlamentari.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/lista_parlamentari&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        \r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;showParlamentare2.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n     class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;showParlamentare2.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/updateParlamentare&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        &lt;servlet&gt;\r\n                &lt;servlet-name&gt;showParlamentare3.jsp&lt;/servlet-name&gt;\r\n                &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \r\n      class&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n             &lt;servlet-name&gt;showParlamentare3.jsp&lt;/servlet-name&gt;\r\n             &lt;url-pattern&gt;/getParlamentare&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n         --&gt;\r\n        \r\n     &lt;!--  \r\n        &lt;context-param&gt;\r\n                &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n                &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\r\n        &lt;/context-param&gt;\r\n        --&gt;\r\n        &lt;/web-app&gt;\r\n\r\npom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \r\n    https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.giuggiola&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;Parlamento&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;bootjpa&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;18&lt;/java.version&gt;\r\n\t\t\r\n\t\t\r\n    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n\r\n\t&lt;/properties&gt;\r\n\t\r\n\t&lt;dependencies&gt;\r\n\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n    &lt;version&gt;6.0.0&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\t\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n    &lt;version&gt;5.3.22&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n    &lt;!--    &lt;version&gt;\r\n      5.0.1\r\n    &lt;/version&gt; --&gt;\r\n    &lt;/dependency&gt;\r\n\t\r\n\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\r\n    &lt;!--    &lt;scope&gt;runtime&lt;/scope&gt; --&gt;\r\n         &lt;version&gt;2.6.3&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n    &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n    &lt;version&gt;19.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\t\r\n\t\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n         &lt;version&gt;2.6.2&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\r\n   \r\n    &lt;/dependency&gt;\r\n\t\r\n\t  \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-types-55&lt;/artifactId&gt;\r\n    &lt;version&gt;2.14.0&lt;/version&gt;\r\n    &lt;/dependency&gt; \r\n\t\t\r\n\t\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt;\r\n    &lt;version&gt;10.0.23&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.3.9.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\t\t\r\n\t\t\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n      &lt;version&gt;1.18.22&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n \r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok-maven&lt;/artifactId&gt;\r\n    &lt;version&gt;1.18.20.0&lt;/version&gt;\r\n    &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    &lt;!--  &lt;version&gt;2.6.4&lt;/version&gt;  --&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.6.4&lt;/version&gt;\r\n    &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n    &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n    &lt;version&gt;5.9.0&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n    &lt;artifactId&gt;common-tomcat-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n    &lt;version&gt;10.0.23&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\t&lt;/dependencies&gt;\t\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t\r\n\t\t&lt;/plugins&gt;\r\n\t\t\r\n    &lt;resources&gt;\r\n        &lt;resource&gt;\r\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n            &lt;filtering&gt;true&lt;/filtering&gt;\r\n        &lt;/resource&gt;\r\n    &lt;/resources&gt;\r\n   \r\n\r\n\t&lt;/build&gt;\r\n\r\n   &lt;/project&gt;\r\n\r\nI was trying to start it with the server, but now that I have decided to keep the embedded version, I start it as a java application.\r\n","title":"Caused by: java.lang.IllegalArgumentException: The main resource set specified [C:\\Users\\segreteria\\Desktop...] is not valid","body":"<p>I have a dynamic web project imported from Spring into Eclipse. I updated the server, it was embedded before, I updated the dependencies in the pom regarding the server, I read the other solutions regarding the various entries in the stacktrace, but nothing worked, I deleted .m2, the web.xml file I edited several times, some tutorials suggest creating a separate class for each jsp page, but this would no longer work for me a page that contains multiple forms and therefore refers to multiple methods in the class. However, I commented on the other servlets in the web.xml file because in the meantime I want you to load at least the first one that contains the references to all the others. I have been stuck on this error for several days. Can someone help me? thanks to who helps me.</p>\n<p>The jar files contained in the Maven, do I have to copy them all in the WEB-INF \\ lib folder?</p>\n<p>do I need to add the pom.xml file here in the question?</p>\n<p>STACKTRACE:</p>\n<pre><code>set 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Server version name:   Apache Tomcat/10.0.23\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Server built:          Jul 14 2022 08:16:11 UTC\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Server version number: 10.0.23.0\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: OS Name:               Windows 8\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: OS Version:            6.2\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Architecture:          amd64\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Java Home:             C:\\Program Files\\Java\\jdk-18.0.2.1\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: JVM Version:           18.0.2.1+1-1\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: JVM Vendor:            Oracle Corporation\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: CATALINA_BASE:         \nC:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\org.eclipse.wst.\nserver.core\\tmp0\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: CATALINA_HOME:         C:\\Program Files\\Apache2\\apache-tomcat-10.0.23-windows- \nx64\\apache-tomcat-10.0.23\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: - \nDcatalina.base=C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\n\\org.eclipse.wst.server.core\\tmp0\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: -Dcatalina.home=C:\\Program Files\\Apache2\\apache-tomcat- \n10.0.23-windows-x64\\apache-tomcat-10.0.23\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: - \nDwtp.deploy=C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\n\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.base/java.lang=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.base/java.io=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.base/java.util=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: -Dfile.encoding=UTF-8\nset 20, 2022 1:29:31 PM org.apache.catalina.startup.VersionLoggerListener log\nINFO: Command line argument: -XX:+ShowCodeDetailsInExceptionMessages\nset 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: Loaded Apache Tomcat Native library [1.2.35] using APR version [1.7.0].\nset 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random \n[true], UDS [true].\nset 20, 2022 1:29:31 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\nINFO: OpenSSL successfully initialized [OpenSSL 1.1.1q  5 Jul 2022]\nset 20, 2022 1:29:32 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\nset 20, 2022 1:29:32 PM org.apache.catalina.startup.Catalina load\nINFO: Server initialization in [2187] milliseconds\nset 20, 2022 1:29:33 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service [Catalina]\nset 20, 2022 1:29:33 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet engine: [Apache Tomcat/10.0.23]\nset 20, 2022 1:29:34 PM org.apache.catalina.core.ContainerBase startInternal\nSEVERE: A child container failed during start\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: \nFailed to start component [org.apache.catalina.webresources.StandardRoot@74bada02]\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\nat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat \norg.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat \njava.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\nat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\nat \njava.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\nDirectMethodHandleAccessor.java:104)\nat java.base/java.lang.reflect.Method.invoke(Method.java:577)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: org.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat \norg.apache.catalina.util.LifecycleBase.handleSubClassException(\nLifecycleBase.java:440)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\nat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat \norg.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat java.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 19 more\nCaused by: java.lang.IllegalArgumentException: The main resource set specified \n[C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\norg.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\nat \norg.apache.catalina.webresources.StandardRoot.createMainResourceSet\n(StandardRoot.java:762)\nat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n... 28 more\n\nset 20, 2022 1:29:34 PM org.apache.catalina.core.ContainerBase startInternal\nSEVERE: A child container failed during start\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A \nchild container failed during start\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\nat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\nat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\nDirectMethodHandleAccessor.java:104)\nat java.base/java.lang.reflect.Method.invoke(Method.java:577)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: org.apache.catalina.LifecycleException: A child container failed during \nstart\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\nat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat \njava.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 11 more\nCaused by: java.util.concurrent.ExecutionException: \norg.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\n... 19 more\nCaused by: org.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat \norg.apache.catalina.util.LifecycleBase.handleSubClassException(\nLifecycleBase.java:440)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\nat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat java.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 19 more\nCaused by: java.lang.IllegalArgumentException: The main resource set specified \n[C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\norg.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\nat \norg.apache.catalina.webresources.StandardRoot.createMainResourceSet(\nStandardRoot.java:762)\nat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n... 28 more\n\nset 20, 2022 1:29:34 PM org.apache.catalina.startup.Catalina start\nSEVERE: The required Server component failed to start so Tomcat is unable to start.\norg.apache.catalina.LifecycleException: A child container failed during start\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\nat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:795)\nat \njava.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(\nDirectMethodHandleAccessor.java:104)\nat java.base/java.lang.reflect.Method.invoke(Method.java:577)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: java.util.concurrent.ExecutionException:  \norg.apache.catalina.LifecycleException: A child container failed during start\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\n... 11 more\nCaused by: org.apache.catalina.LifecycleException: A child container failed during \nstart\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:938)\nat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat \njava.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 11 more\nCaused by: java.util.concurrent.ExecutionException: \norg.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\nat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:926)\n... 19 more\nCaused by: org.apache.catalina.LifecycleException: Failed to start component \n[org.apache.catalina.webresources.StandardRoot@74bada02]\nat \norg.apache.catalina.util.LifecycleBase.handleSubClassException\n(LifecycleBase.java:440)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\nat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4834)\nat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4972)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\nat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.apache.tomcat.util.threads.InlineExecutorService.execute(\nInlineExecutorService.java:75)\nat java.base/java.util.concurrent.AbstractExecutorService.submit(\nAbstractExecutorService.java:145)\nat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n... 19 more\nCaused by: java.lang.IllegalArgumentException: The main resource set specified \n[C:\\Users\\segreteria\\Desktop\\WORKSPACE3\\.metadata\\.plugins\\\norg.eclipse.wst.server.core\\tmp0\\wtpwebapps\\Parlamento] is not valid\nat org.apache.catalina.webresources.StandardRoot.createMainResourceSet(\nStandardRoot.java:762)\nat org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:719)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n... 28 more\n\nset 20, 2022 1:29:34 PM org.apache.coyote.AbstractProtocol pause\nINFO: Pausing ProtocolHandler [&quot;http-nio-8080&quot;]\nset 20, 2022 1:29:34 PM org.apache.catalina.core.StandardService stopInternal\nINFO: Stopping service [Catalina]\nset 20, 2022 1:29:34 PM org.apache.coyote.AbstractProtocol destroy\nINFO: Destroying ProtocolHandler [&quot;http-nio-8080&quot;]\n</code></pre>\n<p>web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee\n                  https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;\nversion=&quot;5.0&quot;&gt;\n&lt;!--  \n&lt;display-name&gt;Parlamento2&lt;/display-name&gt; --&gt;\n\n\n\n&lt;display-name&gt;Parlamento&lt;/display-name&gt;\n&lt;!--\n&lt;welcome-file-list&gt;\n\n&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n--&gt;\n&lt;!-- \n&lt;welcome-file-list&gt;\n            &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n           &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \nclass&gt;   \n    &lt;/welcome-file-list&gt;\n     --&gt;\n       \n     &lt;servlet&gt; \n &lt;servlet-name&gt;index&lt;/servlet-name&gt; \n &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet-class&gt; \n &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;index&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n   \n    \n    \n      \n     \n     &lt;servlet&gt;\n            &lt;servlet-name&gt;parlamentari&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt; \n    &lt;/servlet&gt;\n    \n     &lt;servlet-mapping&gt;\n     &lt;servlet-name&gt;parlamentari&lt;/servlet-name&gt;\n     &lt;url-pattern&gt;/parlamentari&lt;/url-pattern&gt;\n     &lt;/servlet-mapping&gt;\n    \n    &lt;!-- \n    \n    \n     &lt;servlet&gt;\n            &lt;servlet-name&gt;lista_periodi_cariche.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;lista_periodi_cariche.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/lista_periodi_cariche&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    \n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;showParlamentare.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;showParlamentare.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/showParlamentare&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    \n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;parlamentareDeleted.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;parlamentareDeleted.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/parlamentareDeleted&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    \n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;lista_parlamentari.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;lista_parlamentari.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/lista_parlamentari&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;showParlamentare2.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;showParlamentare2.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/updateParlamentare&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    &lt;servlet&gt;\n            &lt;servlet-name&gt;showParlamentare3.jsp&lt;/servlet-name&gt;\n            &lt;servlet-class&gt;com.giuggiola.controller.ParlamentareController&lt;/servlet- \n  class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n         &lt;servlet-name&gt;showParlamentare3.jsp&lt;/servlet-name&gt;\n         &lt;url-pattern&gt;/getParlamentare&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n     --&gt;\n    \n &lt;!--  \n    &lt;context-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    --&gt;\n    &lt;/web-app&gt;\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \nhttps://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.4&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.giuggiola&lt;/groupId&gt;\n&lt;artifactId&gt;Parlamento&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;bootjpa&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;18&lt;/java.version&gt;\n    \n    \n&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n&lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n&lt;version&gt;6.0.0&lt;/version&gt;\n&lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;version&gt;2.7.3&lt;/version&gt;\n&lt;/dependency&gt;\n\n    \n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework&lt;/groupId&gt;\n&lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n&lt;version&gt;5.3.22&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n&lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n&lt;!--    &lt;version&gt;\n  5.0.1\n&lt;/version&gt; --&gt;\n&lt;/dependency&gt;\n\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\n&lt;!--    &lt;scope&gt;runtime&lt;/scope&gt; --&gt;\n     &lt;version&gt;2.6.3&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n&lt;artifactId&gt;guava&lt;/artifactId&gt;\n&lt;version&gt;19.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n\n\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n     &lt;version&gt;2.6.2&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\n\n&lt;/dependency&gt;\n\n  \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n&lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n&lt;artifactId&gt;hibernate-types-55&lt;/artifactId&gt;\n&lt;version&gt;2.14.0&lt;/version&gt;\n&lt;/dependency&gt; \n    \n    \n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n&lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt;\n&lt;version&gt;10.0.23&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n&lt;version&gt;4.3.9.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n&lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n&lt;artifactId&gt;jstl&lt;/artifactId&gt;\n&lt;/dependency&gt;\n    \n    \n&lt;dependency&gt;\n&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n&lt;artifactId&gt;lombok&lt;/artifactId&gt;\n  &lt;version&gt;1.18.22&lt;/version&gt; &lt;!--$NO-MVN-MAN-VER$--&gt;\n&lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n&lt;artifactId&gt;lombok-maven&lt;/artifactId&gt;\n&lt;version&gt;1.18.20.0&lt;/version&gt;\n&lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n&lt;!--  &lt;version&gt;2.6.4&lt;/version&gt;  --&gt;\n&lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n&lt;version&gt;2.6.4&lt;/version&gt;\n&lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n&lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n&lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n&lt;version&gt;5.9.0&lt;/version&gt;\n&lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n&lt;artifactId&gt;common-tomcat-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n&lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n&lt;version&gt;10.0.23&lt;/version&gt;\n&lt;/dependency&gt;\n\n\n&lt;/dependencies&gt; \n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        \n    &lt;/plugins&gt;\n    \n&lt;resources&gt;\n    &lt;resource&gt;\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\n        &lt;filtering&gt;true&lt;/filtering&gt;\n    &lt;/resource&gt;\n&lt;/resources&gt;\n\n\n&lt;/build&gt;\n</code></pre>\n   \n<p>I was trying to start it with the server, but now that I have decided to keep the embedded version, I start it as a java application.</p>\n"},{"tags":["java","hadoop","hdfs"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665666752,"creation_date":1665666752,"answer_id":74056376,"question_id":74052437,"body_markdown":"`Filesystem.get(config_1)` will return a Filesystem object. From that, you need to specify String locations in the Path constructor, and create two of them. For example, you&#39;re already getting `args[0]`, so get another one for `args[1]`. \r\n\r\nYour files need to exist on HDFS already, such as by `hadoop fs -put` commands. \r\n\r\nAlternatively, just use `hadoop fs -getmerge` command, which is written in Java itself, and you could look at the source code, if you wanted\r\n\r\n","title":"Merging two files by making a HDFS application that merges them into one file located in HDFS","body":"<p><code>Filesystem.get(config_1)</code> will return a Filesystem object. From that, you need to specify String locations in the Path constructor, and create two of them. For example, you're already getting <code>args[0]</code>, so get another one for <code>args[1]</code>.</p>\n<p>Your files need to exist on HDFS already, such as by <code>hadoop fs -put</code> commands.</p>\n<p>Alternatively, just use <code>hadoop fs -getmerge</code> command, which is written in Java itself, and you could look at the source code, if you wanted</p>\n"}],"owner":{"account_id":22147028,"reputation":13,"user_id":16396104,"display_name":"Ariel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74056376,"answer_count":1,"score":0,"last_activity_date":1665666803,"creation_date":1665648626,"question_id":74052437,"body_markdown":"how the two different files may be indicated in the application, and then how to merge them \r\n\r\n```\r\nimport java.net.URI;\r\n\r\nimport org.apache.hadoop.conf.Configuration;\r\nimport org.apache.hadoop.fs.FileSystem;\r\nimport org.apache.hadoop.fs.Path;\r\nimport org.apache.hadoop.fs.FSDataInputStream;\r\nimport org.apache.hadoop.fs.FSDataOutputStream;\r\nimport org.apache.hadoop.io.IOUtils;\r\n\r\npublic class Task1\r\n{\r\n\tpublic static void main(String[] args) throws Exception\r\n\t{\r\n\t\tString file_1 = args[0];\r\n        Configuration config_1 = new Configuration();\r\n        FileSystem into_fs = ???\r\n        Path into_path = new Path(file_1)\r\n```\r\n\r\nWhere is the file made, or how do I continue from here?","title":"Merging two files by making a HDFS application that merges them into one file located in HDFS","body":"<p>how the two different files may be indicated in the application, and then how to merge them</p>\n<pre><code>import java.net.URI;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.fs.FSDataInputStream;\nimport org.apache.hadoop.fs.FSDataOutputStream;\nimport org.apache.hadoop.io.IOUtils;\n\npublic class Task1\n{\n    public static void main(String[] args) throws Exception\n    {\n        String file_1 = args[0];\n        Configuration config_1 = new Configuration();\n        FileSystem into_fs = ???\n        Path into_path = new Path(file_1)\n</code></pre>\n<p>Where is the file made, or how do I continue from here?</p>\n"},{"tags":["java","hadoop","mapreduce","bigdata"],"answers":[{"tags":[],"owner":{"account_id":7418913,"reputation":1387,"user_id":5644037,"accept_rate":62,"display_name":"Coursal"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1618404991,"creation_date":1618404991,"answer_id":67092250,"question_id":67085393,"body_markdown":"You are indeed right, you do need two MapReduce jobs chained together. More specifically, you need:\r\n\r\n* one job to compute the wordcount for every word stored inside the input documents,\r\n\r\n* and one job to be able to &quot;sort&quot; all those words and wordcounts in order to pick and output the top `N` of them.\r\n\r\nThe first job is fairly similar to what you have come up with already, so I&#39;m going to focus on the second job, to make things a bit clearer about how TopN works in the MapReduce paradigm.\r\n\r\nThinking of the TopN MR job as a standalone thing, we know that this particular job will receive a bunch of key-value pairs where every word from the last step is going to be the key and its wordcount is going to be the value. Since mappers and reducers are isolated instances of the `map` and `reduce` functions running in parallel, we need to find a way to first find the TopN words locally (i.e. for every mapper), and then group all of those local TopN results to find the &quot;global&quot; TopN words for all the data given to the application by the input.\r\n\r\nSo, the `TopNMapper` will first have to create a `TreeMap` (a Java key-value data structure that internally sorts its elements by key) in the `setup` function (so before mapper instances will be created), which every mapper will initialize an object of it and put every word and its wordcount as elements. For this type of computation (TopN), we will put the wordcount as key and the word as value to have a ascending order sorted list of the words. Since we only need to find out the top `N` of the words here, it is safe to say that we only want the top `N` words for every mapper, so we can remove all of the other elements below and have a `TreeMap` of `N` elements, which will be given to the reducers in the end of the mappers&#39; execution (i.e. through the `cleanup` function). The mappers will write key-value pairs where the words are going to be keys and their wordcounts are going to be values, like that:\r\n\r\n`&lt;word, wordcount&gt;`\r\n\r\nNow for the `TopNReducer`, we need to do the same exact thing using a `TreeMap` data structure again to populate it with all of the local TopN elements, remove the elements that are not the top `N` of them, and write the words and their wordcounts as output. To be more &quot;clean&quot; with the approach, we can &quot;reverse&quot; words and wordcounts in the key-value pair structure so we can have the wordcounts as key and the words as value. This results into an (ascending order) sorted amount of key-value pairs that are going to be stored in disk after this job is done like this:\r\n\r\n`wordcount, word&gt;`\r\n\r\nThe program that can do such a thing in 2 MR jobs looks like the following (where we set `N` as a global `Configuration` value inside the `main` function with the `conf.set(&quot;N&quot;, &quot;10&quot;);` command, and access it in the `setup` functions of the `TopNMapper` and `TopNReducer` classes), with all of the classes being put in one class `TopNWordCount` for simplicity:\r\n\r\n    import org.apache.hadoop.conf.Configuration;\r\n    import org.apache.hadoop.fs.FileSystem;\r\n    import org.apache.hadoop.fs.Path;\r\n    import org.apache.hadoop.io.IntWritable;\r\n    import org.apache.hadoop.io.Text;\r\n    import org.apache.hadoop.mapreduce.Job;\r\n    import org.apache.hadoop.mapreduce.Mapper;\r\n    import org.apache.hadoop.mapreduce.Reducer;\r\n    import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\r\n    import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\r\n    import org.apache.hadoop.util.GenericOptionsParser;\r\n\r\n    import java.io.IOException;\r\n    import java.util.Map;\r\n    import java.util.TreeMap;\r\n\r\n\r\n    public class TopNWordCount\r\n    {\r\n        /* input:  &lt;document, contents&gt;\r\n         * output: &lt;word, 1&gt;\r\n         */\r\n        public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\r\n        {\r\n            private final static IntWritable one = new IntWritable(1);\r\n\r\n            public void map(Object key, Text value, Context context) throws IOException, InterruptedException\r\n            {\r\n                // clean up the document text and split the words into an array\r\n                String[] words = value.toString()\r\n                                    .replaceAll(&quot;\\\\d+&quot;, &quot;&quot;)           // get rid of numbers...\r\n                                    .replaceAll(&quot;[^a-zA-Z ]&quot;, &quot; &quot;)    // get rid of punctuation...\r\n                                    .toLowerCase()                                      // turn every letter to lowercase...\r\n                                    .trim()                                             // trim the spaces\r\n                                    .replaceAll(&quot;\\\\s+&quot;, &quot; &quot;)\r\n                                    .split(&quot; &quot;);\r\n\r\n                // write every word as key with `1` as value that indicates that the word is\r\n                // found at least 1 time inside the input text\r\n                for(String word : words)\r\n                    context.write(new Text(word), one);\r\n            }\r\n        }\r\n        \r\n        /* input: &lt;word, 1&gt;\r\n         * output: &lt;word, wordcount&gt;\r\n         */\r\n        public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;\r\n        {\r\n            private IntWritable wordcount = new IntWritable();\r\n\r\n            public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\r\n            {\r\n                int word_cnt = 0;\r\n\r\n                for(IntWritable value : values)\r\n                    word_cnt += value.get();\r\n\r\n                wordcount.set(word_cnt);\r\n\r\n                context.write(key, wordcount);\r\n            }\r\n        }\r\n\r\n\r\n\r\n        /* input:  &lt;word, wordcount&gt;\r\n         * output: &lt;NULL, (word, wordcount)&gt; (with the local topN words)\r\n         */\r\n        public static class TopNMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\r\n        {\r\n            private int n;  // the N of TopN\r\n            private TreeMap&lt;Integer, String&gt; word_list; // local list with words sorted by their frequency\r\n\r\n            public void setup(Context context)\r\n            {\r\n                n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\r\n                word_list = new TreeMap&lt;Integer, String&gt;();\r\n            }\r\n\r\n            public void map(Object key, Text value, Context context)\r\n            {\r\n                String[] line = value.toString().split(&quot;\\t&quot;);   // split the word and the wordcount\r\n\r\n                // put the wordcount as key and the word as value in the word list\r\n                // so the words can be sorted by their wordcounts\r\n                word_list.put(Integer.valueOf(line[1]), line[0]);\r\n\r\n                // if the local word list is populated with more than N elements\r\n                // remove the first (aka remove the word with the smallest wordcount)\r\n                if (word_list.size() &gt; n)\r\n                    word_list.remove(word_list.firstKey());\r\n            }\r\n\r\n            public void cleanup(Context context) throws IOException, InterruptedException\r\n            {\r\n                // write the topN local words before continuing to TopNReducer\r\n                // with each word as key and its wordcount as value\r\n                for (Map.Entry&lt;Integer, String&gt; entry : word_list.entrySet())\r\n                {\r\n                    context.write(new Text(entry.getValue()), new IntWritable(entry.getKey()));\r\n                }\r\n            }\r\n        }\r\n\r\n        /* input:  &lt;word, wordcount&gt; (with the local topN words)\r\n         * output: &lt;wordcount, word&gt; (with the global topN words)\r\n         */\r\n        public static class TopNReducer extends Reducer&lt;Text, IntWritable, IntWritable, Text&gt;\r\n        {\r\n            private int n;  // the N of TopN\r\n            private TreeMap&lt;Integer, String&gt; word_list; //  list with words globally sorted by their frequency\r\n\r\n            public void setup(Context context)\r\n            {\r\n                n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\r\n                word_list = new TreeMap&lt;Integer, String&gt;();\r\n            }\r\n\r\n            public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context)\r\n            {\r\n                int wordcount = 0;\r\n\r\n                // get the one and only value (aka the wordcount) for each word\r\n                for(IntWritable value : values)\r\n                    wordcount = value.get();\r\n\r\n                // put the wordcount as key and the word as value in the word list\r\n                // so the words can be sorted by their wordcounts\r\n                word_list.put(wordcount, key.toString());\r\n\r\n                // if the global word list is populated with more than N elements\r\n                // remove the first (aka remove the word with the smallest wordcount)\r\n                if (word_list.size() &gt; n)\r\n                    word_list.remove(word_list.firstKey());\r\n            }\r\n\r\n            public void cleanup(Context context) throws IOException, InterruptedException\r\n            {\r\n                // write the topN global words with each word as key and its wordcount as value\r\n                // so the output will be sorted by the wordcount\r\n                for (Map.Entry&lt;Integer, String&gt; entry : word_list.entrySet())\r\n                {\r\n                    context.write(new IntWritable(entry.getKey()), new Text(entry.getValue()));\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        public static void main(String[] args) throws Exception\r\n        {\r\n            Configuration conf = new Configuration();\r\n            String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\r\n\r\n            conf.set(&quot;N&quot;, &quot;10&quot;); // set the N as a &quot;public&quot; value in the current Configuration\r\n\r\n            if (pathArgs.length &lt; 2)\r\n            {\r\n              System.err.println(&quot;MR Project Usage: TopNWordCount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\r\n              System.exit(2);\r\n            }\r\n\r\n            Path wordcount_dir = new Path(&quot;wordcount&quot;);\r\n            Path output_dir = new Path(pathArgs[pathArgs.length - 1]);\r\n\r\n            // if the in-between and output directories exists, delete them\r\n            FileSystem fs = FileSystem.get(conf);\r\n            if(fs.exists(wordcount_dir))\r\n                fs.delete(wordcount_dir, true);\r\n            if(fs.exists(output_dir))\r\n                fs.delete(output_dir, true);\r\n\r\n            Job wc_job = Job.getInstance(conf, &quot;WordCount&quot;);\r\n            wc_job.setJarByClass(TopNWordCount.class);\r\n            wc_job.setMapperClass(WordCountMapper.class);\r\n            wc_job.setReducerClass(WordCountReducer.class);\r\n            wc_job.setMapOutputKeyClass(Text.class);\r\n            wc_job.setMapOutputValueClass(IntWritable.class);\r\n            wc_job.setOutputKeyClass(Text.class);\r\n            wc_job.setOutputValueClass(IntWritable.class);\r\n            for (int i = 0; i &lt; pathArgs.length - 1; ++i)\r\n            {\r\n              FileInputFormat.addInputPath(wc_job, new Path(pathArgs[i]));\r\n            }\r\n            FileOutputFormat.setOutputPath(wc_job, wordcount_dir);\r\n            wc_job.waitForCompletion(true);\r\n            \r\n            Job topn_job = Job.getInstance(conf, &quot;TopN&quot;);\r\n            topn_job.setJarByClass(TopNWordCount.class);\r\n            topn_job.setMapperClass(TopNMapper.class);\r\n            topn_job.setReducerClass(TopNReducer.class);\r\n            topn_job.setMapOutputKeyClass(Text.class);\r\n            topn_job.setMapOutputValueClass(IntWritable.class);\r\n            topn_job.setOutputKeyClass(IntWritable.class);\r\n            topn_job.setOutputValueClass(Text.class);\r\n            FileInputFormat.addInputPath(topn_job, wordcount_dir);\r\n            FileOutputFormat.setOutputPath(topn_job, output_dir);\r\n            topn_job.waitForCompletion(true);\r\n        }\r\n    }\r\n\r\n\r\nThe output of this program (using [this](https://github.com/Coursal/Hadoop-Examples/tree/main/MaxTF/metamorphosis) directory with text files as input) is the following:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNotice that the top 10 of the words here are [stopwords](https://en.wikipedia.org/wiki/Stop_word) (like `the`, `to`, etc.), as we should expect. If you want to filter out those stopwords, you can of course use [TF-IDF](http://tfidf.com/) and implement it in Hadoop with a lot of ways like [this](https://github.com/carolio7/tfIdf_calculationWithHadoop_java/) one for example.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bSuwZ.png","title":"Map Reduce for Top N Items","body":"<p>You are indeed right, you do need two MapReduce jobs chained together. More specifically, you need:</p>\n<ul>\n<li><p>one job to compute the wordcount for every word stored inside the input documents,</p>\n</li>\n<li><p>and one job to be able to &quot;sort&quot; all those words and wordcounts in order to pick and output the top <code>N</code> of them.</p>\n</li>\n</ul>\n<p>The first job is fairly similar to what you have come up with already, so I'm going to focus on the second job, to make things a bit clearer about how TopN works in the MapReduce paradigm.</p>\n<p>Thinking of the TopN MR job as a standalone thing, we know that this particular job will receive a bunch of key-value pairs where every word from the last step is going to be the key and its wordcount is going to be the value. Since mappers and reducers are isolated instances of the <code>map</code> and <code>reduce</code> functions running in parallel, we need to find a way to first find the TopN words locally (i.e. for every mapper), and then group all of those local TopN results to find the &quot;global&quot; TopN words for all the data given to the application by the input.</p>\n<p>So, the <code>TopNMapper</code> will first have to create a <code>TreeMap</code> (a Java key-value data structure that internally sorts its elements by key) in the <code>setup</code> function (so before mapper instances will be created), which every mapper will initialize an object of it and put every word and its wordcount as elements. For this type of computation (TopN), we will put the wordcount as key and the word as value to have a ascending order sorted list of the words. Since we only need to find out the top <code>N</code> of the words here, it is safe to say that we only want the top <code>N</code> words for every mapper, so we can remove all of the other elements below and have a <code>TreeMap</code> of <code>N</code> elements, which will be given to the reducers in the end of the mappers' execution (i.e. through the <code>cleanup</code> function). The mappers will write key-value pairs where the words are going to be keys and their wordcounts are going to be values, like that:</p>\n<p><code>&lt;word, wordcount&gt;</code></p>\n<p>Now for the <code>TopNReducer</code>, we need to do the same exact thing using a <code>TreeMap</code> data structure again to populate it with all of the local TopN elements, remove the elements that are not the top <code>N</code> of them, and write the words and their wordcounts as output. To be more &quot;clean&quot; with the approach, we can &quot;reverse&quot; words and wordcounts in the key-value pair structure so we can have the wordcounts as key and the words as value. This results into an (ascending order) sorted amount of key-value pairs that are going to be stored in disk after this job is done like this:</p>\n<p><code>wordcount, word&gt;</code></p>\n<p>The program that can do such a thing in 2 MR jobs looks like the following (where we set <code>N</code> as a global <code>Configuration</code> value inside the <code>main</code> function with the <code>conf.set(&quot;N&quot;, &quot;10&quot;);</code> command, and access it in the <code>setup</code> functions of the <code>TopNMapper</code> and <code>TopNReducer</code> classes), with all of the classes being put in one class <code>TopNWordCount</code> for simplicity:</p>\n<pre><code>import org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\nimport org.apache.hadoop.util.GenericOptionsParser;\n\nimport java.io.IOException;\nimport java.util.Map;\nimport java.util.TreeMap;\n\n\npublic class TopNWordCount\n{\n    /* input:  &lt;document, contents&gt;\n     * output: &lt;word, 1&gt;\n     */\n    public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\n    {\n        private final static IntWritable one = new IntWritable(1);\n\n        public void map(Object key, Text value, Context context) throws IOException, InterruptedException\n        {\n            // clean up the document text and split the words into an array\n            String[] words = value.toString()\n                                .replaceAll(&quot;\\\\d+&quot;, &quot;&quot;)           // get rid of numbers...\n                                .replaceAll(&quot;[^a-zA-Z ]&quot;, &quot; &quot;)    // get rid of punctuation...\n                                .toLowerCase()                                      // turn every letter to lowercase...\n                                .trim()                                             // trim the spaces\n                                .replaceAll(&quot;\\\\s+&quot;, &quot; &quot;)\n                                .split(&quot; &quot;);\n\n            // write every word as key with `1` as value that indicates that the word is\n            // found at least 1 time inside the input text\n            for(String word : words)\n                context.write(new Text(word), one);\n        }\n    }\n    \n    /* input: &lt;word, 1&gt;\n     * output: &lt;word, wordcount&gt;\n     */\n    public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;\n    {\n        private IntWritable wordcount = new IntWritable();\n\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\n        {\n            int word_cnt = 0;\n\n            for(IntWritable value : values)\n                word_cnt += value.get();\n\n            wordcount.set(word_cnt);\n\n            context.write(key, wordcount);\n        }\n    }\n\n\n\n    /* input:  &lt;word, wordcount&gt;\n     * output: &lt;NULL, (word, wordcount)&gt; (with the local topN words)\n     */\n    public static class TopNMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\n    {\n        private int n;  // the N of TopN\n        private TreeMap&lt;Integer, String&gt; word_list; // local list with words sorted by their frequency\n\n        public void setup(Context context)\n        {\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\n            word_list = new TreeMap&lt;Integer, String&gt;();\n        }\n\n        public void map(Object key, Text value, Context context)\n        {\n            String[] line = value.toString().split(&quot;\\t&quot;);   // split the word and the wordcount\n\n            // put the wordcount as key and the word as value in the word list\n            // so the words can be sorted by their wordcounts\n            word_list.put(Integer.valueOf(line[1]), line[0]);\n\n            // if the local word list is populated with more than N elements\n            // remove the first (aka remove the word with the smallest wordcount)\n            if (word_list.size() &gt; n)\n                word_list.remove(word_list.firstKey());\n        }\n\n        public void cleanup(Context context) throws IOException, InterruptedException\n        {\n            // write the topN local words before continuing to TopNReducer\n            // with each word as key and its wordcount as value\n            for (Map.Entry&lt;Integer, String&gt; entry : word_list.entrySet())\n            {\n                context.write(new Text(entry.getValue()), new IntWritable(entry.getKey()));\n            }\n        }\n    }\n\n    /* input:  &lt;word, wordcount&gt; (with the local topN words)\n     * output: &lt;wordcount, word&gt; (with the global topN words)\n     */\n    public static class TopNReducer extends Reducer&lt;Text, IntWritable, IntWritable, Text&gt;\n    {\n        private int n;  // the N of TopN\n        private TreeMap&lt;Integer, String&gt; word_list; //  list with words globally sorted by their frequency\n\n        public void setup(Context context)\n        {\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\n            word_list = new TreeMap&lt;Integer, String&gt;();\n        }\n\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context)\n        {\n            int wordcount = 0;\n\n            // get the one and only value (aka the wordcount) for each word\n            for(IntWritable value : values)\n                wordcount = value.get();\n\n            // put the wordcount as key and the word as value in the word list\n            // so the words can be sorted by their wordcounts\n            word_list.put(wordcount, key.toString());\n\n            // if the global word list is populated with more than N elements\n            // remove the first (aka remove the word with the smallest wordcount)\n            if (word_list.size() &gt; n)\n                word_list.remove(word_list.firstKey());\n        }\n\n        public void cleanup(Context context) throws IOException, InterruptedException\n        {\n            // write the topN global words with each word as key and its wordcount as value\n            // so the output will be sorted by the wordcount\n            for (Map.Entry&lt;Integer, String&gt; entry : word_list.entrySet())\n            {\n                context.write(new IntWritable(entry.getKey()), new Text(entry.getValue()));\n            }\n        }\n    }\n\n\n    public static void main(String[] args) throws Exception\n    {\n        Configuration conf = new Configuration();\n        String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\n\n        conf.set(&quot;N&quot;, &quot;10&quot;); // set the N as a &quot;public&quot; value in the current Configuration\n\n        if (pathArgs.length &lt; 2)\n        {\n          System.err.println(&quot;MR Project Usage: TopNWordCount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\n          System.exit(2);\n        }\n\n        Path wordcount_dir = new Path(&quot;wordcount&quot;);\n        Path output_dir = new Path(pathArgs[pathArgs.length - 1]);\n\n        // if the in-between and output directories exists, delete them\n        FileSystem fs = FileSystem.get(conf);\n        if(fs.exists(wordcount_dir))\n            fs.delete(wordcount_dir, true);\n        if(fs.exists(output_dir))\n            fs.delete(output_dir, true);\n\n        Job wc_job = Job.getInstance(conf, &quot;WordCount&quot;);\n        wc_job.setJarByClass(TopNWordCount.class);\n        wc_job.setMapperClass(WordCountMapper.class);\n        wc_job.setReducerClass(WordCountReducer.class);\n        wc_job.setMapOutputKeyClass(Text.class);\n        wc_job.setMapOutputValueClass(IntWritable.class);\n        wc_job.setOutputKeyClass(Text.class);\n        wc_job.setOutputValueClass(IntWritable.class);\n        for (int i = 0; i &lt; pathArgs.length - 1; ++i)\n        {\n          FileInputFormat.addInputPath(wc_job, new Path(pathArgs[i]));\n        }\n        FileOutputFormat.setOutputPath(wc_job, wordcount_dir);\n        wc_job.waitForCompletion(true);\n        \n        Job topn_job = Job.getInstance(conf, &quot;TopN&quot;);\n        topn_job.setJarByClass(TopNWordCount.class);\n        topn_job.setMapperClass(TopNMapper.class);\n        topn_job.setReducerClass(TopNReducer.class);\n        topn_job.setMapOutputKeyClass(Text.class);\n        topn_job.setMapOutputValueClass(IntWritable.class);\n        topn_job.setOutputKeyClass(IntWritable.class);\n        topn_job.setOutputValueClass(Text.class);\n        FileInputFormat.addInputPath(topn_job, wordcount_dir);\n        FileOutputFormat.setOutputPath(topn_job, output_dir);\n        topn_job.waitForCompletion(true);\n    }\n}\n</code></pre>\n<p>The output of this program (using <a href=\"https://github.com/Coursal/Hadoop-Examples/tree/main/MaxTF/metamorphosis\" rel=\"nofollow noreferrer\">this</a> directory with text files as input) is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/bSuwZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bSuwZ.png\" alt=\"enter image description here\" /></a></p>\n<p>Notice that the top 10 of the words here are <a href=\"https://en.wikipedia.org/wiki/Stop_word\" rel=\"nofollow noreferrer\">stopwords</a> (like <code>the</code>, <code>to</code>, etc.), as we should expect. If you want to filter out those stopwords, you can of course use <a href=\"http://tfidf.com/\" rel=\"nofollow noreferrer\">TF-IDF</a> and implement it in Hadoop with a lot of ways like <a href=\"https://github.com/carolio7/tfIdf_calculationWithHadoop_java/\" rel=\"nofollow noreferrer\">this</a> one for example.</p>\n"},{"tags":[],"owner":{"account_id":15864689,"reputation":55,"user_id":11446994,"display_name":"Nguyễn Huy Ho&#224;ng"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665666460,"creation_date":1665666460,"answer_id":74056313,"question_id":67085393,"body_markdown":"The answer of Coursal is not good enough. The problem occurs when the same wordcount appears. \r\n\r\nConsider the following list of wordcount:\r\n```\r\nred    4\r\ngreen  4\r\nblue   3\r\npurple 3\r\nblack  2\r\nbrown  1\r\nyellow 1\r\npink   1\r\nwhite  1\r\n```\r\n\r\nExpected result when choose N = 6:\r\n```\r\nred    4\r\ngreen  4\r\nblue   3\r\npurple 3\r\nblack  2\r\nbrown  1\r\n```\r\n\r\nBut the java program of Coursal will output the following result:\r\n```\r\ngreen  4\r\npurple 3\r\nblack  2\r\nbrown  1\r\n```\r\n\r\nBelow is the corrected program\r\n\r\n```java\r\nimport org.apache.hadoop.conf.Configuration;\r\nimport org.apache.hadoop.fs.FileSystem;\r\nimport org.apache.hadoop.fs.Path;\r\nimport org.apache.hadoop.io.IntWritable;\r\nimport org.apache.hadoop.io.Text;\r\nimport org.apache.hadoop.mapreduce.Job;\r\nimport org.apache.hadoop.mapreduce.Mapper;\r\nimport org.apache.hadoop.mapreduce.Reducer;\r\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\r\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\r\nimport org.apache.hadoop.util.GenericOptionsParser;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Map;\r\nimport java.util.Random;\r\nimport java.util.TreeMap;\r\nimport java.util.StringTokenizer;\r\n\r\npublic class TopNWordCount\r\n{\r\n    /* input:  &lt;document, contents&gt;\r\n     * output: &lt;word, 1&gt;\r\n     */\r\n    public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\r\n    {\r\n        private final static IntWritable one = new IntWritable(1);\r\n        private Text word = new Text();\r\n\r\n        public void map(Object key, Text value, Context context) throws IOException, InterruptedException\r\n        {\r\n            StringTokenizer itr = new StringTokenizer(value.toString());\r\n\r\n            while (itr.hasMoreTokens()) {\r\n                word.set(itr.nextToken());\r\n                context.write(word, one);\r\n            }\r\n        }\r\n    }\r\n    \r\n    /* input: &lt;word, 1&gt;\r\n     * output: &lt;word, wordcount&gt;\r\n     */\r\n    public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;\r\n    {\r\n        private IntWritable wordcount = new IntWritable();\r\n\r\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\r\n        {\r\n            int word_cnt = 0;\r\n\r\n            for(IntWritable value : values)\r\n                word_cnt += value.get();\r\n\r\n            wordcount.set(word_cnt);\r\n\r\n            context.write(key, wordcount);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /* input:  &lt;word, wordcount&gt;\r\n     * output: &lt;NULL, (word, wordcount)&gt; (with the local topN words)\r\n     */\r\n    public static class TopNMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\r\n    {\r\n        private int n;  // the N of TopN\r\n        private TreeMap&lt;Float, String&gt; word_list; // local list with words sorted by their frequency\r\n        private Random random;\r\n\r\n        public void setup(Context context)\r\n        {\r\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\r\n            word_list = new TreeMap&lt;Float, String&gt;();\r\n            random = new Random(0);\r\n        }\r\n\r\n        public void map(Object key, Text value, Context context)\r\n        {\r\n            String[] line = value.toString().split(&quot;\\t&quot;);   // split the word and the wordcount\r\n\r\n            // put the wordcount as key and the word as value in the word list\r\n            // so the words can be sorted by their wordcounts\r\n            word_list.put(Integer.valueOf(line[1]) + random.nextFloat(), line[0]);\r\n\r\n            // if the local word list is populated with more than N elements\r\n            // remove the first (aka remove the word with the smallest wordcount)\r\n            if (word_list.size() &gt; n)\r\n                word_list.remove(word_list.firstKey());\r\n        }\r\n\r\n        public void cleanup(Context context) throws IOException, InterruptedException\r\n        {\r\n            // write the topN local words before continuing to TopNReducer\r\n            // with each word as key and its wordcount as value\r\n            for (Map.Entry&lt;Float, String&gt; entry : word_list.entrySet())\r\n            {\r\n                String word = entry.getValue();\r\n                Integer wordcount = (int) Math.floor(entry.getKey());\r\n                context.write(new Text(word), new IntWritable(wordcount));\r\n            }\r\n        }\r\n    }\r\n\r\n    /* input:  &lt;word, wordcount&gt; (with the local topN words)\r\n     * output: &lt;wordcount, word&gt; (with the global topN words)\r\n     */\r\n    public static class TopNReducer extends Reducer&lt;Text, IntWritable, IntWritable, Text&gt;\r\n    {\r\n        private int n;  // the N of TopN\r\n        private TreeMap&lt;Float, String&gt; word_list; //  list with words globally sorted by their frequency\r\n        private Random random;\r\n\r\n        public void setup(Context context)\r\n        {\r\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\r\n            word_list = new TreeMap&lt;Float, String&gt;();\r\n            random = new Random(0);\r\n        }\r\n\r\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context)\r\n        {\r\n            int wordcount = 0;\r\n\r\n            // get the one and only value (aka the wordcount) for each word\r\n            for(IntWritable value : values)\r\n                wordcount = value.get();\r\n\r\n            // put the wordcount as key and the word as value in the word list\r\n            // so the words can be sorted by their wordcounts\r\n            word_list.put(wordcount + random.nextFloat(), key.toString());\r\n\r\n            // if the global word list is populated with more than N elements\r\n            // remove the first (aka remove the word with the smallest wordcount)\r\n            if (word_list.size() &gt; n)\r\n                word_list.remove(word_list.firstKey());\r\n        }\r\n\r\n        public void cleanup(Context context) throws IOException, InterruptedException\r\n        {\r\n            // write the topN global words with each word as key and its wordcount as value\r\n            // so the output will be sorted by the wordcount\r\n            for (Map.Entry&lt;Float, String&gt; entry : word_list.entrySet())\r\n            {\r\n                String word = entry.getValue();\r\n                Integer wordcount = (int) Math.floor(entry.getKey());\r\n                context.write(new IntWritable(wordcount), new Text(word));\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        Configuration conf = new Configuration();\r\n        String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\r\n\r\n        conf.set(&quot;N&quot;, &quot;10&quot;); // set the N as a &quot;public&quot; value in the current Configuration\r\n\r\n        if (pathArgs.length &lt; 2)\r\n        {\r\n          System.err.println(&quot;MR Project Usage: TopNWordCount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\r\n          System.exit(2);\r\n        }\r\n\r\n        Path wordcount_dir = new Path(&quot;wordcount&quot;);\r\n        Path output_dir = new Path(pathArgs[pathArgs.length - 1]);\r\n\r\n        // if the in-between and output directories exists, delete them\r\n        FileSystem fs = FileSystem.get(conf);\r\n        if(fs.exists(wordcount_dir))\r\n            fs.delete(wordcount_dir, true);\r\n        if(fs.exists(output_dir))\r\n            fs.delete(output_dir, true);\r\n\r\n        Job wc_job = Job.getInstance(conf, &quot;WordCount&quot;);\r\n        wc_job.setJarByClass(TopNWordCount.class);\r\n        wc_job.setMapperClass(WordCountMapper.class);\r\n        wc_job.setReducerClass(WordCountReducer.class);\r\n        wc_job.setMapOutputKeyClass(Text.class);\r\n        wc_job.setMapOutputValueClass(IntWritable.class);\r\n        wc_job.setOutputKeyClass(Text.class);\r\n        wc_job.setOutputValueClass(IntWritable.class);\r\n        for (int i = 0; i &lt; pathArgs.length - 1; ++i)\r\n        {\r\n          FileInputFormat.addInputPath(wc_job, new Path(pathArgs[i]));\r\n        }\r\n        FileOutputFormat.setOutputPath(wc_job, wordcount_dir);\r\n        wc_job.waitForCompletion(true);\r\n        \r\n        Job topn_job = Job.getInstance(conf, &quot;TopN&quot;);\r\n        topn_job.setJarByClass(TopNWordCount.class);\r\n        topn_job.setMapperClass(TopNMapper.class);\r\n        topn_job.setReducerClass(TopNReducer.class);\r\n        topn_job.setMapOutputKeyClass(Text.class);\r\n        topn_job.setMapOutputValueClass(IntWritable.class);\r\n        topn_job.setOutputKeyClass(IntWritable.class);\r\n        topn_job.setOutputValueClass(Text.class);\r\n        FileInputFormat.addInputPath(topn_job, wordcount_dir);\r\n        FileOutputFormat.setOutputPath(topn_job, output_dir);\r\n        topn_job.waitForCompletion(true);\r\n    }\r\n}\r\n```\r\n\r\nI add a random float number (0-1) to every key before add it to the tree. And compute the floor of key when get it from the tree. Thanks to that, the keys won&#39;t be duplicated.","title":"Map Reduce for Top N Items","body":"<p>The answer of Coursal is not good enough. The problem occurs when the same wordcount appears.</p>\n<p>Consider the following list of wordcount:</p>\n<pre><code>red    4\ngreen  4\nblue   3\npurple 3\nblack  2\nbrown  1\nyellow 1\npink   1\nwhite  1\n</code></pre>\n<p>Expected result when choose N = 6:</p>\n<pre><code>red    4\ngreen  4\nblue   3\npurple 3\nblack  2\nbrown  1\n</code></pre>\n<p>But the java program of Coursal will output the following result:</p>\n<pre><code>green  4\npurple 3\nblack  2\nbrown  1\n</code></pre>\n<p>Below is the corrected program</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\nimport org.apache.hadoop.util.GenericOptionsParser;\n\nimport java.io.IOException;\nimport java.util.Map;\nimport java.util.Random;\nimport java.util.TreeMap;\nimport java.util.StringTokenizer;\n\npublic class TopNWordCount\n{\n    /* input:  &lt;document, contents&gt;\n     * output: &lt;word, 1&gt;\n     */\n    public static class WordCountMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\n    {\n        private final static IntWritable one = new IntWritable(1);\n        private Text word = new Text();\n\n        public void map(Object key, Text value, Context context) throws IOException, InterruptedException\n        {\n            StringTokenizer itr = new StringTokenizer(value.toString());\n\n            while (itr.hasMoreTokens()) {\n                word.set(itr.nextToken());\n                context.write(word, one);\n            }\n        }\n    }\n    \n    /* input: &lt;word, 1&gt;\n     * output: &lt;word, wordcount&gt;\n     */\n    public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;\n    {\n        private IntWritable wordcount = new IntWritable();\n\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\n        {\n            int word_cnt = 0;\n\n            for(IntWritable value : values)\n                word_cnt += value.get();\n\n            wordcount.set(word_cnt);\n\n            context.write(key, wordcount);\n        }\n    }\n\n\n\n    /* input:  &lt;word, wordcount&gt;\n     * output: &lt;NULL, (word, wordcount)&gt; (with the local topN words)\n     */\n    public static class TopNMapper extends Mapper&lt;Object, Text, Text, IntWritable&gt;\n    {\n        private int n;  // the N of TopN\n        private TreeMap&lt;Float, String&gt; word_list; // local list with words sorted by their frequency\n        private Random random;\n\n        public void setup(Context context)\n        {\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\n            word_list = new TreeMap&lt;Float, String&gt;();\n            random = new Random(0);\n        }\n\n        public void map(Object key, Text value, Context context)\n        {\n            String[] line = value.toString().split(&quot;\\t&quot;);   // split the word and the wordcount\n\n            // put the wordcount as key and the word as value in the word list\n            // so the words can be sorted by their wordcounts\n            word_list.put(Integer.valueOf(line[1]) + random.nextFloat(), line[0]);\n\n            // if the local word list is populated with more than N elements\n            // remove the first (aka remove the word with the smallest wordcount)\n            if (word_list.size() &gt; n)\n                word_list.remove(word_list.firstKey());\n        }\n\n        public void cleanup(Context context) throws IOException, InterruptedException\n        {\n            // write the topN local words before continuing to TopNReducer\n            // with each word as key and its wordcount as value\n            for (Map.Entry&lt;Float, String&gt; entry : word_list.entrySet())\n            {\n                String word = entry.getValue();\n                Integer wordcount = (int) Math.floor(entry.getKey());\n                context.write(new Text(word), new IntWritable(wordcount));\n            }\n        }\n    }\n\n    /* input:  &lt;word, wordcount&gt; (with the local topN words)\n     * output: &lt;wordcount, word&gt; (with the global topN words)\n     */\n    public static class TopNReducer extends Reducer&lt;Text, IntWritable, IntWritable, Text&gt;\n    {\n        private int n;  // the N of TopN\n        private TreeMap&lt;Float, String&gt; word_list; //  list with words globally sorted by their frequency\n        private Random random;\n\n        public void setup(Context context)\n        {\n            n = Integer.parseInt(context.getConfiguration().get(&quot;N&quot;));  // get N\n            word_list = new TreeMap&lt;Float, String&gt;();\n            random = new Random(0);\n        }\n\n        public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context)\n        {\n            int wordcount = 0;\n\n            // get the one and only value (aka the wordcount) for each word\n            for(IntWritable value : values)\n                wordcount = value.get();\n\n            // put the wordcount as key and the word as value in the word list\n            // so the words can be sorted by their wordcounts\n            word_list.put(wordcount + random.nextFloat(), key.toString());\n\n            // if the global word list is populated with more than N elements\n            // remove the first (aka remove the word with the smallest wordcount)\n            if (word_list.size() &gt; n)\n                word_list.remove(word_list.firstKey());\n        }\n\n        public void cleanup(Context context) throws IOException, InterruptedException\n        {\n            // write the topN global words with each word as key and its wordcount as value\n            // so the output will be sorted by the wordcount\n            for (Map.Entry&lt;Float, String&gt; entry : word_list.entrySet())\n            {\n                String word = entry.getValue();\n                Integer wordcount = (int) Math.floor(entry.getKey());\n                context.write(new IntWritable(wordcount), new Text(word));\n            }\n        }\n    }\n\n\n    public static void main(String[] args) throws Exception\n    {\n        Configuration conf = new Configuration();\n        String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\n\n        conf.set(&quot;N&quot;, &quot;10&quot;); // set the N as a &quot;public&quot; value in the current Configuration\n\n        if (pathArgs.length &lt; 2)\n        {\n          System.err.println(&quot;MR Project Usage: TopNWordCount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\n          System.exit(2);\n        }\n\n        Path wordcount_dir = new Path(&quot;wordcount&quot;);\n        Path output_dir = new Path(pathArgs[pathArgs.length - 1]);\n\n        // if the in-between and output directories exists, delete them\n        FileSystem fs = FileSystem.get(conf);\n        if(fs.exists(wordcount_dir))\n            fs.delete(wordcount_dir, true);\n        if(fs.exists(output_dir))\n            fs.delete(output_dir, true);\n\n        Job wc_job = Job.getInstance(conf, &quot;WordCount&quot;);\n        wc_job.setJarByClass(TopNWordCount.class);\n        wc_job.setMapperClass(WordCountMapper.class);\n        wc_job.setReducerClass(WordCountReducer.class);\n        wc_job.setMapOutputKeyClass(Text.class);\n        wc_job.setMapOutputValueClass(IntWritable.class);\n        wc_job.setOutputKeyClass(Text.class);\n        wc_job.setOutputValueClass(IntWritable.class);\n        for (int i = 0; i &lt; pathArgs.length - 1; ++i)\n        {\n          FileInputFormat.addInputPath(wc_job, new Path(pathArgs[i]));\n        }\n        FileOutputFormat.setOutputPath(wc_job, wordcount_dir);\n        wc_job.waitForCompletion(true);\n        \n        Job topn_job = Job.getInstance(conf, &quot;TopN&quot;);\n        topn_job.setJarByClass(TopNWordCount.class);\n        topn_job.setMapperClass(TopNMapper.class);\n        topn_job.setReducerClass(TopNReducer.class);\n        topn_job.setMapOutputKeyClass(Text.class);\n        topn_job.setMapOutputValueClass(IntWritable.class);\n        topn_job.setOutputKeyClass(IntWritable.class);\n        topn_job.setOutputValueClass(Text.class);\n        FileInputFormat.addInputPath(topn_job, wordcount_dir);\n        FileOutputFormat.setOutputPath(topn_job, output_dir);\n        topn_job.waitForCompletion(true);\n    }\n}\n</code></pre>\n<p>I add a random float number (0-1) to every key before add it to the tree. And compute the floor of key when get it from the tree. Thanks to that, the keys won't be duplicated.</p>\n"}],"owner":{"account_id":14868264,"reputation":27,"user_id":10736568,"display_name":"Widget"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2459,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67092250,"answer_count":2,"score":1,"last_activity_date":1665666460,"creation_date":1618373279,"question_id":67085393,"body_markdown":"I am working on a Hadoop Project in Java and having some difficulties. I understand the goal of what I am supposed to be doing but truly do not understand exactly how to implement it. I am attempting to extract the top N results from a map reduce job, such as the top 5 highest frequency values.\r\n\r\nI understand that this will generally require two map reduces, one for the reduce and one to sort the values. However, like I said, I am fairly lost on how to actually implement this.\r\n\r\nThe code I am using is a fairly standard map reduce code with some filtering for special values.\r\n\r\n    public class MapWordCount extends Mapper &lt;LongWritable, Text, Text, IntWritable&gt;\r\n    {\r\n    \t  private Text wordToken = new Text();\r\n    \t  public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException\r\n    \t  {\r\n    \t\t  StringTokenizer tokens = new StringTokenizer(value.toString(), &quot;[_|$#0123456789&lt;&gt;\\\\^=\\\\[\\\\]\\\\*/\\\\\\\\,;,.\\\\-:()?!\\&quot;&#39;]&quot;); //Dividing String into tokens\r\n    \t    while (tokens.hasMoreTokens())\r\n    \t    {\r\n    \t      wordToken.set(tokens.nextToken());\r\n    \t      context.write(wordToken, new IntWritable(1));\r\n    \t    }\r\n    \t  }\r\n    \t}\r\n\r\nReducer\r\n\r\n    public class ReduceWordCount extends Reducer &lt;Text, IntWritable, Text, IntWritable&gt;\r\n    {\r\n    \t  private IntWritable count = new IntWritable();\r\n    \t  public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\r\n    \t  {\r\n    \t    int valueSum = 0;\r\n    \t    for (IntWritable val : values)\r\n    \t    {\r\n    \t      valueSum += val.get();\r\n    \t    }\r\n    \t    count.set(valueSum);\r\n    \t    context.write(key, count);\r\n    \t  }\r\n    \t}\r\n\r\nDriver\r\n\r\n    public class WordCount {\r\n    \t  public static void main(String[] args) throws Exception\r\n    \t  {\r\n    \t    Configuration conf = new Configuration();\r\n    \t    String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\r\n    \t    if (pathArgs.length &lt; 2)\r\n    \t    {\r\n    \t      System.err.println(&quot;MR Project Usage: wordcount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\r\n    \t      System.exit(2);\r\n    \t    }\r\n    \t    Job wcJob = Job.getInstance(conf, &quot;MapReduce WordCount&quot;);\r\n    \t    wcJob.setJarByClass(WordCount.class);\r\n    \t    wcJob.setMapperClass(MapWordCount.class);\r\n    \t    wcJob.setCombinerClass(ReduceWordCount.class);\r\n    \t    wcJob.setReducerClass(ReduceWordCount.class);\r\n    \t    wcJob.setOutputKeyClass(Text.class);\r\n    \t    wcJob.setOutputValueClass(IntWritable.class);\r\n    \t    for (int i = 0; i &lt; pathArgs.length - 1; ++i)\r\n    \t    {\r\n    \t      FileInputFormat.addInputPath(wcJob, new Path(pathArgs[i]));\r\n    \t    }\r\n    \t    FileOutputFormat.setOutputPath(wcJob, new Path(pathArgs[pathArgs.length - 1]));\r\n    \t    System.exit(wcJob.waitForCompletion(true) ? 0 : 1);\r\n    \t  }\r\n    \t}\r\n\r\nIf anybody could assist me with this I would appreciate it. As I said, I know I need two map reduces, but am not quite sure how to start with this. I attempted a couple of other solutions I found on StackOverflow but didn&#39;t have much luck for my case. Thanks so much!","title":"Map Reduce for Top N Items","body":"<p>I am working on a Hadoop Project in Java and having some difficulties. I understand the goal of what I am supposed to be doing but truly do not understand exactly how to implement it. I am attempting to extract the top N results from a map reduce job, such as the top 5 highest frequency values.</p>\n<p>I understand that this will generally require two map reduces, one for the reduce and one to sort the values. However, like I said, I am fairly lost on how to actually implement this.</p>\n<p>The code I am using is a fairly standard map reduce code with some filtering for special values.</p>\n<pre><code>public class MapWordCount extends Mapper &lt;LongWritable, Text, Text, IntWritable&gt;\n{\n      private Text wordToken = new Text();\n      public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException\n      {\n          StringTokenizer tokens = new StringTokenizer(value.toString(), &quot;[_|$#0123456789&lt;&gt;\\\\^=\\\\[\\\\]\\\\*/\\\\\\\\,;,.\\\\-:()?!\\&quot;']&quot;); //Dividing String into tokens\n        while (tokens.hasMoreTokens())\n        {\n          wordToken.set(tokens.nextToken());\n          context.write(wordToken, new IntWritable(1));\n        }\n      }\n    }\n</code></pre>\n<p>Reducer</p>\n<pre><code>public class ReduceWordCount extends Reducer &lt;Text, IntWritable, Text, IntWritable&gt;\n{\n      private IntWritable count = new IntWritable();\n      public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException\n      {\n        int valueSum = 0;\n        for (IntWritable val : values)\n        {\n          valueSum += val.get();\n        }\n        count.set(valueSum);\n        context.write(key, count);\n      }\n    }\n</code></pre>\n<p>Driver</p>\n<pre><code>public class WordCount {\n      public static void main(String[] args) throws Exception\n      {\n        Configuration conf = new Configuration();\n        String[] pathArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\n        if (pathArgs.length &lt; 2)\n        {\n          System.err.println(&quot;MR Project Usage: wordcount &lt;input-path&gt; [...] &lt;output-path&gt;&quot;);\n          System.exit(2);\n        }\n        Job wcJob = Job.getInstance(conf, &quot;MapReduce WordCount&quot;);\n        wcJob.setJarByClass(WordCount.class);\n        wcJob.setMapperClass(MapWordCount.class);\n        wcJob.setCombinerClass(ReduceWordCount.class);\n        wcJob.setReducerClass(ReduceWordCount.class);\n        wcJob.setOutputKeyClass(Text.class);\n        wcJob.setOutputValueClass(IntWritable.class);\n        for (int i = 0; i &lt; pathArgs.length - 1; ++i)\n        {\n          FileInputFormat.addInputPath(wcJob, new Path(pathArgs[i]));\n        }\n        FileOutputFormat.setOutputPath(wcJob, new Path(pathArgs[pathArgs.length - 1]));\n        System.exit(wcJob.waitForCompletion(true) ? 0 : 1);\n      }\n    }\n</code></pre>\n<p>If anybody could assist me with this I would appreciate it. As I said, I know I need two map reduces, but am not quite sure how to start with this. I attempted a couple of other solutions I found on StackOverflow but didn't have much luck for my case. Thanks so much!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1665665468,"post_id":74056055,"comment_id":130755931,"body_markdown":"Why would you say it is a bad idea?","body":"Why would you say it is a bad idea?"},{"owner":{"account_id":16673497,"reputation":2011,"user_id":12050506,"display_name":"possum"},"score":1,"creation_date":1665665515,"post_id":74056055,"comment_id":130755948,"body_markdown":"Please reformulate your post in terms of a definitively answerable question.  Asking for &quot;a better way&quot; leads to opinion-based answers which will be downvoted or removed.","body":"Please reformulate your post in terms of a definitively answerable question.  Asking for &quot;a better way&quot; leads to opinion-based answers which will be downvoted or removed."},{"owner":{"account_id":3992180,"reputation":1526,"user_id":3290745,"display_name":"Tristate"},"score":0,"creation_date":1665665830,"post_id":74056055,"comment_id":130756094,"body_markdown":"reformulated my question","body":"reformulated my question"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665666098,"creation_date":1665666098,"answer_id":74056231,"question_id":74056055,"body_markdown":"One option is to separately loop and set your properties after collecting:\r\n\r\n```\r\nList&lt;MyDto&gt; myDtoList = service.getDtos()\r\n .filter(...)\r\n .sorted(...)\r\n .collect(Collectors.toList());\r\nmyDtoList.forEach(e -&gt; e.setPredicted(false));\r\n```\r\n\r\nor stay in functional land and `map` to new objects:\r\n\r\n```\r\nList&lt;MyDto&gt; myDtoList = service.getDtos()\r\n .filter(...)\r\n .sorted(...)\r\n .map(e -&gt; {\r\n    final MyDto dto = new MyDto();\r\n    dto.set...(e.get...());\r\n    dto.set...(e.get...());\r\n    dto.setPredicted(false);\r\n    return dto;\r\n })\r\n .collect(Collectors.toList());\r\n```\r\n\r\nIntroducing a copy-constructor/factory or static copy-method can make your life and your code simpler.","title":"Best way to make a mid-stream forEach","body":"<p>One option is to separately loop and set your properties after collecting:</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = service.getDtos()\n .filter(...)\n .sorted(...)\n .collect(Collectors.toList());\nmyDtoList.forEach(e -&gt; e.setPredicted(false));\n</code></pre>\n<p>or stay in functional land and <code>map</code> to new objects:</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = service.getDtos()\n .filter(...)\n .sorted(...)\n .map(e -&gt; {\n    final MyDto dto = new MyDto();\n    dto.set...(e.get...());\n    dto.set...(e.get...());\n    dto.setPredicted(false);\n    return dto;\n })\n .collect(Collectors.toList());\n</code></pre>\n<p>Introducing a copy-constructor/factory or static copy-method can make your life and your code simpler.</p>\n"}],"owner":{"account_id":3992180,"reputation":1526,"user_id":3290745,"display_name":"Tristate"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74056231,"answer_count":1,"score":0,"last_activity_date":1665666098,"creation_date":1665665290,"question_id":74056055,"body_markdown":"I have a class\r\n\r\n    class MyDto{\r\n    \r\n    ...\r\n    boolean isPredicted;\r\n    ...\r\n    \r\n    }\r\n\r\nAnd a List of it\r\n\r\n    List&lt;MyDto&gt; myDtoList = ....\r\n\r\nI need to filter, sort and set isPredicted to false for each element. Actually my code is.\r\n\r\n    List&lt;MyDto&gt; myDtoList = service.getDtos()\r\n     .filter(...)\r\n     .sorted(...)\r\n     .collect(Collectors.toList());\r\n\r\nMy Idea was to place a &quot;for each element set isPredicted to false&quot;, between sorted and collect.\r\n\r\n    List&lt;MyDto&gt; myDtoList = service.getDtos()\r\n     .filter(...)\r\n     .sorted(...)\r\n     .peek(e-&gt;e.setPredicted(false))\r\n     .collect(Collectors.toList());\r\n\r\nBut after I read some resources on the internet, I think to use peek here is bad Idea. As it was build for Debug operations.\r\n\r\nHow I can avoid peek() here?\r\n","title":"Best way to make a mid-stream forEach","body":"<p>I have a class</p>\n<pre><code>class MyDto{\n\n...\nboolean isPredicted;\n...\n\n}\n</code></pre>\n<p>And a List of it</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = ....\n</code></pre>\n<p>I need to filter, sort and set isPredicted to false for each element. Actually my code is.</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = service.getDtos()\n .filter(...)\n .sorted(...)\n .collect(Collectors.toList());\n</code></pre>\n<p>My Idea was to place a &quot;for each element set isPredicted to false&quot;, between sorted and collect.</p>\n<pre><code>List&lt;MyDto&gt; myDtoList = service.getDtos()\n .filter(...)\n .sorted(...)\n .peek(e-&gt;e.setPredicted(false))\n .collect(Collectors.toList());\n</code></pre>\n<p>But after I read some resources on the internet, I think to use peek here is bad Idea. As it was build for Debug operations.</p>\n<p>How I can avoid peek() here?</p>\n"},{"tags":["java","spring","elasticsearch","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":26562666,"reputation":119,"user_id":20190240,"display_name":"Jalena"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665665796,"creation_date":1665665796,"answer_id":74056159,"question_id":74055174,"body_markdown":"You can use the terms query to match a field with multiple values by passing an array or set of String.\r\n\r\n     QueryBuilder queryBuilder = QueryBuilders.boolQuery()\r\n                .should(QueryBuilders.termsQuery(&quot;mainId&quot;,mainId));\r\n\r\nDo note the &#39;s&#39; in `termsQuery`.","title":"How to query list of values from a specific field in Elastic Search?","body":"<p>You can use the terms query to match a field with multiple values by passing an array or set of String.</p>\n<pre><code> QueryBuilder queryBuilder = QueryBuilders.boolQuery()\n            .should(QueryBuilders.termsQuery(&quot;mainId&quot;,mainId));\n</code></pre>\n<p>Do note the 's' in <code>termsQuery</code>.</p>\n"}],"owner":{"account_id":26579158,"reputation":7,"user_id":20204076,"display_name":"Java2Avaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1051,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665665796,"creation_date":1665661331,"question_id":74055174,"body_markdown":"I have a following POJO:\r\n\r\n    @Data\r\n    @Document(indexName = &quot;person&quot;)\r\n    public class Person {\r\n    \r\n      @Id\r\n      @JsonIgnore\r\n      private String id;\r\n    \r\n       private String mainId;\r\n    \r\n      private String name;\r\n    }\r\n\r\nHow can I search from mainId field given a list of values (Example: [&quot;1234&quot;, &quot;567&quot;, &quot;8910&quot;]?\r\n\r\nSo far I am using this to code. but it gave me an exception when I tried to pass a list of too many values:\r\n\r\n     BoolQueryBuilder queryBuilder = QueryBuilders.boolQuery();\r\n        for (String mainId : mainIds) {\r\n          queryBuilder.should(QueryBuilders.matchQuery(&quot;mainId&quot;, mainId ));\r\n        }\r\n        NativeSearchQuery searchQuery = new NativeSearchQueryBuilder()\r\n            .withQuery(queryBuilder).build();\r\n    \r\n        SearchHits&lt;T&gt; searchHits = this.operations.search(searchQuery, this.entityClass,\r\n            this.operations.getIndexCoordinatesFor(this.entityClass));","title":"How to query list of values from a specific field in Elastic Search?","body":"<p>I have a following POJO:</p>\n<pre><code>@Data\n@Document(indexName = &quot;person&quot;)\npublic class Person {\n\n  @Id\n  @JsonIgnore\n  private String id;\n\n   private String mainId;\n\n  private String name;\n}\n</code></pre>\n<p>How can I search from mainId field given a list of values (Example: [&quot;1234&quot;, &quot;567&quot;, &quot;8910&quot;]?</p>\n<p>So far I am using this to code. but it gave me an exception when I tried to pass a list of too many values:</p>\n<pre><code> BoolQueryBuilder queryBuilder = QueryBuilders.boolQuery();\n    for (String mainId : mainIds) {\n      queryBuilder.should(QueryBuilders.matchQuery(&quot;mainId&quot;, mainId ));\n    }\n    NativeSearchQuery searchQuery = new NativeSearchQueryBuilder()\n        .withQuery(queryBuilder).build();\n\n    SearchHits&lt;T&gt; searchHits = this.operations.search(searchQuery, this.entityClass,\n        this.operations.getIndexCoordinatesFor(this.entityClass));\n</code></pre>\n"},{"tags":["java","dictionary"],"comments":[{"owner":{"account_id":6712727,"reputation":640,"user_id":5175581,"display_name":"Ewan Brown"},"score":0,"creation_date":1650044172,"post_id":71887053,"comment_id":127030996,"body_markdown":"It isn&#39;t very clear what you are asking for. Could you elaborate on what you want the output to be/what isn&#39;t working? Side note : Avoid using raw types in Java","body":"It isn&#39;t very clear what you are asking for. Could you elaborate on what you want the output to be/what isn&#39;t working? Side note : Avoid using raw types in Java"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1650120162,"post_id":71887053,"comment_id":127043721,"body_markdown":"Not related to your problem, but you shouldn&#39;t use `Hashtable`: in most cases, using `HashMap` is preferred, and instead of `Dictionary`, you should use the interface `Map`.","body":"Not related to your problem, but you shouldn&#39;t use <code>Hashtable</code>: in most cases, using <code>HashMap</code> is preferred, and instead of <code>Dictionary</code>, you should use the interface <code>Map</code>."}],"answers":[{"tags":[],"owner":{"account_id":6712727,"reputation":640,"user_id":5175581,"display_name":"Ewan Brown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1650044498,"creation_date":1650044498,"answer_id":71887211,"question_id":71887053,"body_markdown":"I tried to rewrite your code in a way that made more sense to me.\r\n\r\nI&#39;ve added the use of proper types as well, using raw types in java is dangerous. The last line of my code does what I believe you want. Note the difference between using Integers as keys and Strings as keys.\r\n\r\n```\r\n\r\n    public static void main(String[] args) {\r\n        Dictionary&lt;Integer, Dictionary&gt; parent_dic = new Hashtable();\r\n        Dictionary&lt;String, String&gt; child1 = new Hashtable();\r\n        Dictionary&lt;String, String&gt; child2 = new Hashtable();\r\n\r\n        child1.put(&quot;1&quot;, &quot;one&quot;);\r\n        child1.put(&quot;2&quot;, &quot;two&quot;);\r\n        System.out.println(&quot;Child1&quot; + child1);\r\n\r\n        child2.put(&quot;3&quot;, &quot;three&quot;);\r\n        child2.put(&quot;4&quot;, &quot;four&quot;);\r\n        System.out.println(&quot;Child2&quot; + child2);\r\n\r\n        parent_dic.put(1, child1);\r\n        parent_dic.put(2, child2);\r\n\r\n        System.out.println(&quot;Parent&quot; + parent_dic);\r\n        System.out.println(&quot;test : &quot; + parent_dic.get(1));\r\n        System.out.println(&quot;two : &quot; + parent_dic.get(1).get(&quot;2&quot;));\r\n    }\r\n```","title":"How to retrieve data from nested dictionary in java","body":"<p>I tried to rewrite your code in a way that made more sense to me.</p>\n<p>I've added the use of proper types as well, using raw types in java is dangerous. The last line of my code does what I believe you want. Note the difference between using Integers as keys and Strings as keys.</p>\n<pre><code>\n    public static void main(String[] args) {\n        Dictionary&lt;Integer, Dictionary&gt; parent_dic = new Hashtable();\n        Dictionary&lt;String, String&gt; child1 = new Hashtable();\n        Dictionary&lt;String, String&gt; child2 = new Hashtable();\n\n        child1.put(&quot;1&quot;, &quot;one&quot;);\n        child1.put(&quot;2&quot;, &quot;two&quot;);\n        System.out.println(&quot;Child1&quot; + child1);\n\n        child2.put(&quot;3&quot;, &quot;three&quot;);\n        child2.put(&quot;4&quot;, &quot;four&quot;);\n        System.out.println(&quot;Child2&quot; + child2);\n\n        parent_dic.put(1, child1);\n        parent_dic.put(2, child2);\n\n        System.out.println(&quot;Parent&quot; + parent_dic);\n        System.out.println(&quot;test : &quot; + parent_dic.get(1));\n        System.out.println(&quot;two : &quot; + parent_dic.get(1).get(&quot;2&quot;));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24881285,"reputation":36,"user_id":18754437,"display_name":"Liam G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650046580,"creation_date":1650046580,"answer_id":71887510,"question_id":71887053,"body_markdown":"You need to add generic types to your variable declarations (e.g. `Dictionary&lt;Integer, Dictionary&gt; parent_dic = new HashTable&lt;Integer, Dictionary&gt;();`)\r\n\r\nWithout them the compiler tries to add them in, not always successfully. The key and value pairs for your `parent_dic`, `child1`, and `child2` have defaulted to `Object`. You can add anything to them, even a `Random` object or an `ArrayList`. If you try to access the output of your last line by adding `.get(&quot;1&quot;)` it won&#39;t compile, because you are trying to use `get(&quot;1&quot;)` on an `Object`.\r\n\r\nIf you add the types, like `Dictionary&lt;Integer, Dictionary&gt;` you can access the data in the child dictionaries.","title":"How to retrieve data from nested dictionary in java","body":"<p>You need to add generic types to your variable declarations (e.g. <code>Dictionary&lt;Integer, Dictionary&gt; parent_dic = new HashTable&lt;Integer, Dictionary&gt;();</code>)</p>\n<p>Without them the compiler tries to add them in, not always successfully. The key and value pairs for your <code>parent_dic</code>, <code>child1</code>, and <code>child2</code> have defaulted to <code>Object</code>. You can add anything to them, even a <code>Random</code> object or an <code>ArrayList</code>. If you try to access the output of your last line by adding <code>.get(&quot;1&quot;)</code> it won't compile, because you are trying to use <code>get(&quot;1&quot;)</code> on an <code>Object</code>.</p>\n<p>If you add the types, like <code>Dictionary&lt;Integer, Dictionary&gt;</code> you can access the data in the child dictionaries.</p>\n"}],"owner":{"account_id":10455431,"reputation":35,"user_id":7707732,"display_name":"Sarayu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71887211,"answer_count":2,"score":0,"last_activity_date":1665665570,"creation_date":1650043492,"question_id":71887053,"body_markdown":"I have two dictionaries added into parent dictionary. How to retrieve data from a value (which is a dictionary)\r\n\r\n    import java.util.*;\r\n\r\n    class HelloWorld {\r\n      public static void main(String[] args) {\r\n        int count =2;\r\n        \r\n        Dictionary parent_dic = new Hashtable();\r\n        Dictionary child1 = new Hashtable();\r\n        Dictionary child2 = new Hashtable();\r\n        Dictionary child = new Hashtable();\r\n        \r\n        child1.put(&quot;1&quot;, &quot;one&quot;);\r\n        child1.put(&quot;2&quot;, &quot;two&quot;);\r\n        System.out.println(&quot;Child1&quot; + child1);\r\n        \r\n        child2.put(&quot;3&quot;, &quot;three&quot;);\r\n        child2.put(&quot;4&quot;, &quot;four&quot;);\r\n        System.out.println(&quot;Child2&quot; + child2);\r\n        \r\n       for(int each_c = 1; each_c &lt;= count; each_c++) {\r\n           if(each_c==1) {\r\n               child = child1;\r\n           } else {\r\n               child = child2;\r\n           }\r\n           parent_dic.put(each_c,child);\r\n       }\r\n       \r\n        \r\n        System.out.println(&quot;Parent&quot; + parent_dic);\r\n        System.out.println(&quot;test ::: &quot; + parent_dic.get(1));\r\n        \r\n    }\r\n}\r\n\r\nHow to get value from resultant value (which is dictionary)?\r\n\r\nOutput:\r\n\r\n    Child1{2=two, 1=one}\r\n    Child2{4=four, 3=three}\r\n    Parent{2={4=four, 3=three}, 1={2=two, 1=one}}\r\n    test ::: {2=two, 1=one}\r\n\r\n\r\nHow to get value &quot;two&quot; from above test dictionary.","title":"How to retrieve data from nested dictionary in java","body":"<p>I have two dictionaries added into parent dictionary. How to retrieve data from a value (which is a dictionary)</p>\n<pre><code>import java.util.*;\n\nclass HelloWorld {\n  public static void main(String[] args) {\n    int count =2;\n    \n    Dictionary parent_dic = new Hashtable();\n    Dictionary child1 = new Hashtable();\n    Dictionary child2 = new Hashtable();\n    Dictionary child = new Hashtable();\n    \n    child1.put(&quot;1&quot;, &quot;one&quot;);\n    child1.put(&quot;2&quot;, &quot;two&quot;);\n    System.out.println(&quot;Child1&quot; + child1);\n    \n    child2.put(&quot;3&quot;, &quot;three&quot;);\n    child2.put(&quot;4&quot;, &quot;four&quot;);\n    System.out.println(&quot;Child2&quot; + child2);\n    \n   for(int each_c = 1; each_c &lt;= count; each_c++) {\n       if(each_c==1) {\n           child = child1;\n       } else {\n           child = child2;\n       }\n       parent_dic.put(each_c,child);\n   }\n   \n    \n    System.out.println(&quot;Parent&quot; + parent_dic);\n    System.out.println(&quot;test ::: &quot; + parent_dic.get(1));\n    \n}\n</code></pre>\n<p>}</p>\n<p>How to get value from resultant value (which is dictionary)?</p>\n<p>Output:</p>\n<pre><code>Child1{2=two, 1=one}\nChild2{4=four, 3=three}\nParent{2={4=four, 3=three}, 1={2=two, 1=one}}\ntest ::: {2=two, 1=one}\n</code></pre>\n<p>How to get value &quot;two&quot; from above test dictionary.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665626767,"creation_date":1665626767,"answer_id":74049760,"question_id":74049345,"body_markdown":"Images can be stored in a variety of places depending on how you code things.  In you&#39;re adapter you&#39;re assuming that you get paths.  That would work if you save them to the filesystem.  That will not work with image resources, as resources are internal to your app, not part of the filesystem.  \r\n\r\nYour code is trying to list all the files in the directory `Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)`  Which will only work with images stored in the global pictures directory, not images embedded in your app (and isn&#39;t the best way to do that either).\r\n","title":"Android Studio: Where do my images need to be saved for this program to be able to show them in the RecyclerView?","body":"<p>Images can be stored in a variety of places depending on how you code things.  In you're adapter you're assuming that you get paths.  That would work if you save them to the filesystem.  That will not work with image resources, as resources are internal to your app, not part of the filesystem.</p>\n<p>Your code is trying to list all the files in the directory <code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)</code>  Which will only work with images stored in the global pictures directory, not images embedded in your app (and isn't the best way to do that either).</p>\n"}],"owner":{"account_id":26606017,"reputation":1,"user_id":20226834,"display_name":"Rodrigo Nogueira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665665091,"creation_date":1665622020,"question_id":74049345,"body_markdown":"I am not sure where the images need to be saved for them to appear in the RecyclerView. Should they be in the drawable folder in resources? If so, isn&#39;t the code to input the image files missing? \r\n\r\nI believe they should be saved on the device emulator, but I do not know where to save the image files. Please give me a directory if so.\r\n\r\nThank you!\r\n\r\nBelow are 4 Java classes, MainActivity.java, Item.java, MyRecyclerViewAdapter.java, and DisplayImage.java\r\n\r\nMain Activity\r\n```\r\npackage com.example.gridlayout;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.util.DisplayMetrics;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\n\r\nimport java.io.File;\r\nimport java.util.ArrayList;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    String PIC_PATH =\r\n            Environment.getExternalStoragePublicDirectory(\r\n                    Environment.DIRECTORY_PICTURES).toString();\r\n    private ArrayList&lt;Item&gt; images = new ArrayList&lt;Item&gt;();\r\n    private RecyclerView gallery;\r\n    int columns = 3;\r\n    int PERMISSION_CODE = 1;\r\n\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        gallery = (RecyclerView) findViewById(R.id.gallery);\r\n        gallery.setLayoutManager(new GridLayoutManager(this, columns));\r\n        if (ContextCompat.checkSelfPermission(this,\r\n                Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            // Request permission if permission is not granted\r\n            ActivityCompat.requestPermissions(this,\r\n                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    PERMISSION_CODE);\r\n        } else {\r\n            updatePictures();\r\n            MyRecyclerViewAdapter myAdapter = new MyRecyclerViewAdapter(R.layout.layout_row, images);\r\n\r\n            gallery.setAdapter(myAdapter);\r\n        }\r\n    }\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n\r\n        if (requestCode == PERMISSION_CODE) {\r\n            if (grantResults.length &gt; 0\r\n                    &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                updatePictures();\r\n                MyRecyclerViewAdapter myAdapter = new\r\n                        MyRecyclerViewAdapter(R.layout.layout_row, images);\r\n                gallery.setAdapter(myAdapter);\r\n            }\r\n        }\r\n    }\r\n    public void updatePictures() {\r\n        try {\r\n            File f = new File(PIC_PATH);\r\n            File[] files = f.listFiles();\r\n            for (int i = 0; i &lt; files.length; i++) {\r\n                if (files[i].getName().endsWith(&quot;.jpg&quot;)) {\r\n                    images.add(new Item(files[i].getAbsolutePath()));\r\n                }\r\n            }\r\n        }\r\n        catch (Exception e) {\r\n        }\r\n    }\r\n\r\n} \r\n```\r\nStart of Item\r\n```\r\npackage com.example.gridlayout;\r\n\r\npublic class Item {\r\n    private String imagePath;\r\n\r\n    public Item(String imagePath) {\r\n        this.imagePath = imagePath;\r\n    }\r\n\r\n    public String getImagePath() {\r\n        return imagePath;\r\n    }\r\n} \r\n```\r\n\r\n\r\nMyRecyclerViewAdapter\r\n```\r\npackage com.example.gridlayout;\r\n\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\n\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.ArrayList;\r\n\r\nclass MyRecyclerViewAdapter extends RecyclerView.Adapter&lt;MyRecyclerViewAdapter.ViewHolder&gt; {\r\n\r\n    private int listItemLayout;\r\n    private ArrayList&lt;Item&gt; itemList;\r\n    private String [] imagePaths;\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        if (itemList == null)\r\n            return 0;\r\n        else\r\n            return itemList.size();\r\n    }\r\n\r\n    // Constructor of the class\r\n    public MyRecyclerViewAdapter(int layoutId, ArrayList&lt;Item&gt; itemList) {\r\n        listItemLayout = layoutId;\r\n        this.itemList = itemList;\r\n        imagePaths = new String[itemList.size()];\r\n        for (int i = 0; i &lt; imagePaths.length; i++)\r\n            imagePaths[i] = itemList.get(i).getImagePath();\r\n    }\r\n\r\n    // specify the row layout file and click for each row\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext())\r\n                .inflate(listItemLayout, parent, false);\r\n        ViewHolder myViewHolder = new ViewHolder(view);\r\n        return myViewHolder;\r\n    }\r\n\r\n\r\n    // load data in each row element\r\n    @Override\r\n    public void onBindViewHolder(final ViewHolder holder, final int listPosition) {\r\n        Bitmap bm = BitmapFactory.decodeFile(itemList.get(listPosition).getImagePath());\r\n        holder.image.setImageBitmap(bm);\r\n        holder.image.setTag(itemList.get(listPosition).getImagePath());\r\n    }\r\n\r\n    // inner class to initialize the views of rows\r\n    class ViewHolder extends RecyclerView.ViewHolder\r\n            implements View.OnClickListener {\r\n\r\n        public ImageView image;\r\n\r\n\r\n        public ViewHolder(View itemView) {\r\n            super(itemView);\r\n            itemView.setOnClickListener(this);\r\n            image = (ImageView) itemView.findViewById(R.id.imageView);\r\n            image.setScaleType(ImageView.ScaleType.CENTER_CROP);\r\n\r\n        }\r\n        @Override\r\n        public void onClick(View view) {\r\n            Intent in = new Intent(view.getContext(), DisplayImage.class);\r\n            in.putExtra(&quot;selectedIndex&quot;, getLayoutPosition());\r\n            in.putExtra(&quot;imagePathArray&quot;, imagePaths);\r\n            view.getContext().startActivity(in);\r\n        }\r\n    }\r\n} \r\n```\r\n\r\nDisplay Image\r\n```\r\npackage com.example.gridlayout;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.os.Bundle;\r\nimport android.util.DisplayMetrics;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\n\r\npublic class DisplayImage extends AppCompatActivity {\r\n\r\n    private double x1=0, x2=0;\r\n    private int selectedIndex = -1;\r\n    String[] imagePathArray = null;\r\n\r\n    @SuppressLint(&quot;ClickableViewAccessibility&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_display_image);\r\n        ImageView fullPicture = (ImageView) findViewById(R.id.fullPicture);\r\n\r\n        Bundle extras = getIntent().getExtras();\r\n        if (extras != null) {\r\n            selectedIndex = extras.getInt(&quot;selectedIndex&quot;);\r\n            imagePathArray = extras.getStringArray(&quot;imagePathArray&quot;);\r\n        }\r\n\r\n        if (imagePathArray != null &amp;&amp; selectedIndex &gt;= 0\r\n                &amp;&amp; selectedIndex &lt; imagePathArray.length) {\r\n\r\n            Bitmap bm = BitmapFactory.decodeFile(imagePathArray[selectedIndex]);\r\n            fullPicture.setImageBitmap(bm);\r\n        }\r\n\r\n        fullPicture.setOnTouchListener(new View.OnTouchListener() {\r\n            public boolean onTouch(View v, MotionEvent event) {\r\n                double distanceThreshold = 100;\r\n\r\n                if (event.getAction() == MotionEvent.ACTION_DOWN) {\r\n                    x1 = event.getX();\r\n                }\r\n                if (event.getAction() == MotionEvent.ACTION_UP) {\r\n                    x2 = event.getX();\r\n                    if ((x1 - x2) &gt; distanceThreshold) {    // if right to left sweep event\r\n                        selectedIndex++;\r\n                        if (selectedIndex &gt; imagePathArray.length - 1)\r\n                            selectedIndex = imagePathArray.length - 1;\r\n                    }\r\n                    if ((x2 - x1) &gt; distanceThreshold) {    //left to right sweep event\r\n                        selectedIndex--;\r\n                        if (selectedIndex &lt; 0) selectedIndex = 0;\r\n                    }\r\n                    Bitmap bm = BitmapFactory.decodeFile(imagePathArray[selectedIndex]);\r\n                    fullPicture.setImageBitmap(bm);\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n} \r\n```","title":"Android Studio: Where do my images need to be saved for this program to be able to show them in the RecyclerView?","body":"<p>I am not sure where the images need to be saved for them to appear in the RecyclerView. Should they be in the drawable folder in resources? If so, isn't the code to input the image files missing?</p>\n<p>I believe they should be saved on the device emulator, but I do not know where to save the image files. Please give me a directory if so.</p>\n<p>Thank you!</p>\n<p>Below are 4 Java classes, MainActivity.java, Item.java, MyRecyclerViewAdapter.java, and DisplayImage.java</p>\n<p>Main Activity</p>\n<pre><code>package com.example.gridlayout;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\nimport androidx.recyclerview.widget.GridLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.Manifest;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.util.DisplayMetrics;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.LinearLayout;\n\nimport java.io.File;\nimport java.util.ArrayList;\n\npublic class MainActivity extends AppCompatActivity {\n    String PIC_PATH =\n            Environment.getExternalStoragePublicDirectory(\n                    Environment.DIRECTORY_PICTURES).toString();\n    private ArrayList&lt;Item&gt; images = new ArrayList&lt;Item&gt;();\n    private RecyclerView gallery;\n    int columns = 3;\n    int PERMISSION_CODE = 1;\n\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        gallery = (RecyclerView) findViewById(R.id.gallery);\n        gallery.setLayoutManager(new GridLayoutManager(this, columns));\n        if (ContextCompat.checkSelfPermission(this,\n                Manifest.permission.READ_EXTERNAL_STORAGE)\n                != PackageManager.PERMISSION_GRANTED) {\n            // Request permission if permission is not granted\n            ActivityCompat.requestPermissions(this,\n                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\n                    PERMISSION_CODE);\n        } else {\n            updatePictures();\n            MyRecyclerViewAdapter myAdapter = new MyRecyclerViewAdapter(R.layout.layout_row, images);\n\n            gallery.setAdapter(myAdapter);\n        }\n    }\n    @Override\n    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n\n        if (requestCode == PERMISSION_CODE) {\n            if (grantResults.length &gt; 0\n                    &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                updatePictures();\n                MyRecyclerViewAdapter myAdapter = new\n                        MyRecyclerViewAdapter(R.layout.layout_row, images);\n                gallery.setAdapter(myAdapter);\n            }\n        }\n    }\n    public void updatePictures() {\n        try {\n            File f = new File(PIC_PATH);\n            File[] files = f.listFiles();\n            for (int i = 0; i &lt; files.length; i++) {\n                if (files[i].getName().endsWith(&quot;.jpg&quot;)) {\n                    images.add(new Item(files[i].getAbsolutePath()));\n                }\n            }\n        }\n        catch (Exception e) {\n        }\n    }\n\n} \n</code></pre>\n<p>Start of Item</p>\n<pre><code>package com.example.gridlayout;\n\npublic class Item {\n    private String imagePath;\n\n    public Item(String imagePath) {\n        this.imagePath = imagePath;\n    }\n\n    public String getImagePath() {\n        return imagePath;\n    }\n} \n</code></pre>\n<p>MyRecyclerViewAdapter</p>\n<pre><code>package com.example.gridlayout;\n\nimport android.content.Intent;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\n\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.ArrayList;\n\nclass MyRecyclerViewAdapter extends RecyclerView.Adapter&lt;MyRecyclerViewAdapter.ViewHolder&gt; {\n\n    private int listItemLayout;\n    private ArrayList&lt;Item&gt; itemList;\n    private String [] imagePaths;\n\n    @Override\n    public int getItemCount() {\n        if (itemList == null)\n            return 0;\n        else\n            return itemList.size();\n    }\n\n    // Constructor of the class\n    public MyRecyclerViewAdapter(int layoutId, ArrayList&lt;Item&gt; itemList) {\n        listItemLayout = layoutId;\n        this.itemList = itemList;\n        imagePaths = new String[itemList.size()];\n        for (int i = 0; i &lt; imagePaths.length; i++)\n            imagePaths[i] = itemList.get(i).getImagePath();\n    }\n\n    // specify the row layout file and click for each row\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext())\n                .inflate(listItemLayout, parent, false);\n        ViewHolder myViewHolder = new ViewHolder(view);\n        return myViewHolder;\n    }\n\n\n    // load data in each row element\n    @Override\n    public void onBindViewHolder(final ViewHolder holder, final int listPosition) {\n        Bitmap bm = BitmapFactory.decodeFile(itemList.get(listPosition).getImagePath());\n        holder.image.setImageBitmap(bm);\n        holder.image.setTag(itemList.get(listPosition).getImagePath());\n    }\n\n    // inner class to initialize the views of rows\n    class ViewHolder extends RecyclerView.ViewHolder\n            implements View.OnClickListener {\n\n        public ImageView image;\n\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n            itemView.setOnClickListener(this);\n            image = (ImageView) itemView.findViewById(R.id.imageView);\n            image.setScaleType(ImageView.ScaleType.CENTER_CROP);\n\n        }\n        @Override\n        public void onClick(View view) {\n            Intent in = new Intent(view.getContext(), DisplayImage.class);\n            in.putExtra(&quot;selectedIndex&quot;, getLayoutPosition());\n            in.putExtra(&quot;imagePathArray&quot;, imagePaths);\n            view.getContext().startActivity(in);\n        }\n    }\n} \n</code></pre>\n<p>Display Image</p>\n<pre><code>package com.example.gridlayout;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.os.Bundle;\nimport android.util.DisplayMetrics;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.LinearLayout;\n\npublic class DisplayImage extends AppCompatActivity {\n\n    private double x1=0, x2=0;\n    private int selectedIndex = -1;\n    String[] imagePathArray = null;\n\n    @SuppressLint(&quot;ClickableViewAccessibility&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_display_image);\n        ImageView fullPicture = (ImageView) findViewById(R.id.fullPicture);\n\n        Bundle extras = getIntent().getExtras();\n        if (extras != null) {\n            selectedIndex = extras.getInt(&quot;selectedIndex&quot;);\n            imagePathArray = extras.getStringArray(&quot;imagePathArray&quot;);\n        }\n\n        if (imagePathArray != null &amp;&amp; selectedIndex &gt;= 0\n                &amp;&amp; selectedIndex &lt; imagePathArray.length) {\n\n            Bitmap bm = BitmapFactory.decodeFile(imagePathArray[selectedIndex]);\n            fullPicture.setImageBitmap(bm);\n        }\n\n        fullPicture.setOnTouchListener(new View.OnTouchListener() {\n            public boolean onTouch(View v, MotionEvent event) {\n                double distanceThreshold = 100;\n\n                if (event.getAction() == MotionEvent.ACTION_DOWN) {\n                    x1 = event.getX();\n                }\n                if (event.getAction() == MotionEvent.ACTION_UP) {\n                    x2 = event.getX();\n                    if ((x1 - x2) &gt; distanceThreshold) {    // if right to left sweep event\n                        selectedIndex++;\n                        if (selectedIndex &gt; imagePathArray.length - 1)\n                            selectedIndex = imagePathArray.length - 1;\n                    }\n                    if ((x2 - x1) &gt; distanceThreshold) {    //left to right sweep event\n                        selectedIndex--;\n                        if (selectedIndex &lt; 0) selectedIndex = 0;\n                    }\n                    Bitmap bm = BitmapFactory.decodeFile(imagePathArray[selectedIndex]);\n                    fullPicture.setImageBitmap(bm);\n                }\n                return true;\n            }\n        });\n    }\n} \n</code></pre>\n"},{"tags":["java","android","uri","documentfile"],"comments":[{"owner":{"account_id":17597757,"reputation":1107,"user_id":12768366,"display_name":"Md Hanif"},"score":1,"creation_date":1601203785,"post_id":64087565,"comment_id":113327721,"body_markdown":"Yes this is due to the newly introduced Scope Storage in android Q. You can add this line in your manifest `android:requestLegacyExternalStorage=&quot;true&quot;` and it should work. but remember this is temporary solution and you need to eventually work with scope storage as this newly added line will be ignored after android sdk version 30","body":"Yes this is due to the newly introduced Scope Storage in android Q. You can add this line in your manifest <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> and it should work. but remember this is temporary solution and you need to eventually work with scope storage as this newly added line will be ignored after android sdk version 30"},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1601203957,"post_id":64087565,"comment_id":113327756,"body_markdown":"@AppDev. Yeah i already know about that flag but isn&#39;t there a way to do this without using this temporary solution?","body":"@AppDev. Yeah i already know about that flag but isn&#39;t there a way to do this without using this temporary solution?"},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1601204187,"post_id":64087565,"comment_id":113327805,"body_markdown":"@AppDev. Im also confused by why it works for some files and some return this error.","body":"@AppDev. Im also confused by why it works for some files and some return this error."},{"owner":{"account_id":17597757,"reputation":1107,"user_id":12768366,"display_name":"Md Hanif"},"score":0,"creation_date":1601204506,"post_id":64087565,"comment_id":113327877,"body_markdown":"Even I found this permission error for camera and my gallery URI&#39;s and I also faced this issues only on some of the times like for some devices I was getting proper image data in `onActivity result`  while in some other devices i was getting this Security Exception. Although I got something to workaround with my issue but here&#39;s a different case. Not sure about &quot;Why it works for some files&quot;.","body":"Even I found this permission error for camera and my gallery URI&#39;s and I also faced this issues only on some of the times like for some devices I was getting proper image data in <code>onActivity result</code>  while in some other devices i was getting this Security Exception. Although I got something to workaround with my issue but here&#39;s a different case. Not sure about &quot;Why it works for some files&quot;."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1601204722,"post_id":64087565,"comment_id":113327937,"body_markdown":"`getDocumentUri(Uri mediaUri)` Please start your post with the exact value of mediaUri. And tell how your app obtained it. Also tell if it is from a file which your app created. Put all in your post. Start your post with it.","body":"<code>getDocumentUri(Uri mediaUri)</code> Please start your post with the exact value of mediaUri. And tell how your app obtained it. Also tell if it is from a file which your app created. Put all in your post. Start your post with it."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1601204921,"post_id":64087565,"comment_id":113327985,"body_markdown":"Also tell, if you have a media store uri, why you would first convert it to a document uri.","body":"Also tell, if you have a media store uri, why you would first convert it to a document uri."},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1601214179,"post_id":64087565,"comment_id":113330341,"body_markdown":"@blackapps I added the value for mediaUri in my post, &quot;why you would first convert it to a document uri?&quot;, so i can delete the file with DocumentFile from the storage.","body":"@blackapps I added the value for mediaUri in my post, &quot;why you would first convert it to a document uri?&quot;, so i can delete the file with DocumentFile from the storage."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1601225371,"post_id":64087565,"comment_id":113333748,"body_markdown":"Why dont you just delete using the media store if it is a media store uri? I asked that before.","body":"Why dont you just delete using the media store if it is a media store uri? I asked that before."},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1601310349,"post_id":64087565,"comment_id":113361279,"body_markdown":"@blackapps do you mean with ContentResolver? That doesn&#39;t work, it deletes the entry in the MediaStore and not the file itself.","body":"@blackapps do you mean with ContentResolver? That doesn&#39;t work, it deletes the entry in the MediaStore and not the file itself."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1601316412,"post_id":64087565,"comment_id":113363796,"body_markdown":"In Android Q the file is also deleted. Below Q you have to do it yourself yet.","body":"In Android Q the file is also deleted. Below Q you have to do it yourself yet."},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1602526739,"post_id":64087565,"comment_id":113743034,"body_markdown":"@blackapps Can you post an example then? Because i&#39;m pretty sure thats not true `getContentResolver().delete(mediaUri, null, null);` doesn&#39;t delete the physical file. It only deletes the database entry and will reappear after rebooting device.","body":"@blackapps Can you post an example then? Because i&#39;m pretty sure thats not true <code>getContentResolver().delete(mediaUri, null, null);</code> doesn&#39;t delete the physical file. It only deletes the database entry and will reappear after rebooting device."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1602576642,"post_id":64087565,"comment_id":113756648,"body_markdown":"You did not tell which uri you tried to delete and i asked you before.","body":"You did not tell which uri you tried to delete and i asked you before."},{"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"score":0,"creation_date":1602792921,"post_id":64087565,"comment_id":113840254,"body_markdown":"@blackapps I already told you what it was, look at the 7th comment. The Uri i&#39;m trying to delete is a content Uri obtained with `ContentUris.withAppendedId();`","body":"@blackapps I already told you what it was, look at the 7th comment. The Uri i&#39;m trying to delete is a content Uri obtained with <code>ContentUris.withAppendedId();</code>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1602793513,"post_id":64087565,"comment_id":113840478,"body_markdown":"If SAF has never given you permission for that file or its directory you cannot do much. Further you did not ppst reproducable code.","body":"If SAF has never given you permission for that file or its directory you cannot do much. Further you did not ppst reproducable code."}],"answers":[{"tags":[],"owner":{"account_id":14338249,"reputation":3000,"user_id":10357086,"display_name":"Dev4Life"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665664998,"creation_date":1665664998,"answer_id":74055992,"question_id":64087565,"body_markdown":"Try this method. You need to take the persistable uri permission using SAF of the parent folder, then pass the uri &amp; name of the file to delete. (I have a model class to handle both.)\r\n\r\n    public void deleteAPI29(ArrayList&lt;Media&gt; mediaList) {\r\n            Uri persistedUri = getContentResolver().getPersistedUriPermissions().get(0).getUri();\r\n            DocumentFile documentFile = DocumentFile.fromTreeUri(this, persistedUri);\r\n            for (int i = 0; i &lt; mediaList.size(); i++) {\r\n                File file = new File(mediaList.get(i).getPath());\r\n                DocumentFile nextDocument = documentFile.findFile(file.getName());\r\n                try {\r\n                    DocumentsContract.deleteDocument(getContentResolver(), nextDocument.getUri());\r\n                } catch (FileNotFoundException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }","title":"How to delete files with DocumentFile in Android Q?","body":"<p>Try this method. You need to take the persistable uri permission using SAF of the parent folder, then pass the uri &amp; name of the file to delete. (I have a model class to handle both.)</p>\n<pre><code>public void deleteAPI29(ArrayList&lt;Media&gt; mediaList) {\n        Uri persistedUri = getContentResolver().getPersistedUriPermissions().get(0).getUri();\n        DocumentFile documentFile = DocumentFile.fromTreeUri(this, persistedUri);\n        for (int i = 0; i &lt; mediaList.size(); i++) {\n            File file = new File(mediaList.get(i).getPath());\n            DocumentFile nextDocument = documentFile.findFile(file.getName());\n            try {\n                DocumentsContract.deleteDocument(getContentResolver(), nextDocument.getUri());\n            } catch (FileNotFoundException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":12365223,"reputation":1526,"user_id":9017620,"accept_rate":55,"display_name":"Vince VD"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":775,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1665664998,"creation_date":1601203559,"question_id":64087565,"body_markdown":"**Method for deleting file with document uri**\r\n\r\n    private void getDocumentUri(Uri mediaUri){\r\n            try {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O &amp;&amp; getActivity() != null) {\r\n                    Uri documentUri = MediaStore.getDocumentUri(getActivity(), mediaUri);\r\n                    if (documentUri != null) {\r\n                        Log.d(TAG,&quot;getDocumentUri: &quot;+documentUri);\r\n                        DocumentFile documentFile = DocumentFile.fromSingleUri(getActivity(), documentUri);\r\n                        if (documentFile != null) {\r\n                            Log.d(TAG, &quot;getDocumentUri documentFile not null: &quot; + documentFile);\r\n                            if (documentFile.delete()) {\r\n                                Log.i(TAG, &quot;getDocumentUri Delete successful&quot;);\r\n                            } else {\r\n                                Log.i(TAG, &quot;getDocumentUri Delete unsuccessful&quot;);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }catch(Exception e){\r\n                Log.e(TAG,&quot;getDocumentUri error: &quot; + e);\r\n            }\r\n    }\r\n\r\n**Logcat error**\r\n\r\n    SecurityException: The app is not given any access to the document under path /storage/emulated/0/test/song.mp3 with permissions granted in [UriPermission {uri=content://com.android.externalstorage.documents/tree/primary%3AMusic, modeFlags=3, persistedTime=1601203263354}]\r\n\r\n\r\nWeird thing is that for some files this works and for some it gives this error and all audio files are in the same place on the internal storage.\r\n\r\n\r\n**EDIT**\r\n\r\n**mediaUri&#39;s** value is obtained with `ContentUris.withAppendedId(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,cursor.getLong(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media._ID)));`\r\n\r\nAlso the files i&#39;m trying to delete are not created by my app\r\n\r\n\r\n","title":"How to delete files with DocumentFile in Android Q?","body":"<p><strong>Method for deleting file with document uri</strong></p>\n<pre><code>private void getDocumentUri(Uri mediaUri){\n        try {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O &amp;&amp; getActivity() != null) {\n                Uri documentUri = MediaStore.getDocumentUri(getActivity(), mediaUri);\n                if (documentUri != null) {\n                    Log.d(TAG,&quot;getDocumentUri: &quot;+documentUri);\n                    DocumentFile documentFile = DocumentFile.fromSingleUri(getActivity(), documentUri);\n                    if (documentFile != null) {\n                        Log.d(TAG, &quot;getDocumentUri documentFile not null: &quot; + documentFile);\n                        if (documentFile.delete()) {\n                            Log.i(TAG, &quot;getDocumentUri Delete successful&quot;);\n                        } else {\n                            Log.i(TAG, &quot;getDocumentUri Delete unsuccessful&quot;);\n                        }\n                    }\n                }\n            }\n        }catch(Exception e){\n            Log.e(TAG,&quot;getDocumentUri error: &quot; + e);\n        }\n}\n</code></pre>\n<p><strong>Logcat error</strong></p>\n<pre><code>SecurityException: The app is not given any access to the document under path /storage/emulated/0/test/song.mp3 with permissions granted in [UriPermission {uri=content://com.android.externalstorage.documents/tree/primary%3AMusic, modeFlags=3, persistedTime=1601203263354}]\n</code></pre>\n<p>Weird thing is that for some files this works and for some it gives this error and all audio files are in the same place on the internal storage.</p>\n<p><strong>EDIT</strong></p>\n<p><strong>mediaUri's</strong> value is obtained with <code>ContentUris.withAppendedId(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,cursor.getLong(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media._ID)));</code></p>\n<p>Also the files i'm trying to delete are not created by my app</p>\n"},{"tags":["java","spring","spring-boot","httpclient","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":2469660,"reputation":154,"user_id":2151879,"display_name":"Liran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665664907,"creation_date":1665664907,"answer_id":74055975,"question_id":70931260,"body_markdown":"ResourceAccessException is commonly wrapping IOException coming from Spring RestTemplate, where HttpClient is not from Spring.\r\n\r\nThis is only one of the cases to be possibly retried, in addition to cases like HTTP 503 Service Unavailable status response.\r\n\r\nSolution based on RestTemplate/HttpClient while combining all cases can be tricky.\r\n\r\nTo add retry for ResourceAccessException, related topic may help:  \r\n[Solution based on Spring RetryTemplate](https://stackoverflow.com/questions/66639819/how-to-retry-restapi-connection-if-it-fails-for-first-time-in-resttemplate/73973394#73973394) \r\n","title":"Retry in RestTemplate not working against ResourceAccessException","body":"<p>ResourceAccessException is commonly wrapping IOException coming from Spring RestTemplate, where HttpClient is not from Spring.</p>\n<p>This is only one of the cases to be possibly retried, in addition to cases like HTTP 503 Service Unavailable status response.</p>\n<p>Solution based on RestTemplate/HttpClient while combining all cases can be tricky.</p>\n<p>To add retry for ResourceAccessException, related topic may help:<br />\n<a href=\"https://stackoverflow.com/questions/66639819/how-to-retry-restapi-connection-if-it-fails-for-first-time-in-resttemplate/73973394#73973394\">Solution based on Spring RetryTemplate</a></p>\n"}],"owner":{"account_id":2274545,"reputation":135,"user_id":2001165,"accept_rate":0,"display_name":"user2001165"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":727,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665664907,"creation_date":1643654846,"question_id":70931260,"body_markdown":"My retry handler not working against ResourceAccessException. This only works against IOException and its sub-type. I even tried adding interceptor but no luck. Any idea how to add retry for ResourceAccessException???\r\n\r\n    @Bean\r\n    public ClientHttpRequestFactory clientFactory() {\r\n        HttpClient httpClient = HttpClients.custom()            \r\n            .setRetryHandler((exception, executionCount, context) -&gt; {\r\n                if (executionCount &gt; 3) {\r\n                    log.warn(&quot;Maximum retries {} reached&quot;, 3);\r\n                    return false;\r\n                }\r\n                if (&lt;some condition for retry&gt;) {\r\n                    log.warn(&quot;Retry {}&quot;, executionCount);\r\n                    return true;\r\n                }\r\n                return false;\r\n            })\r\n            .build();\r\n    \r\n        return new HttpComponentsClientHttpRequestFactory(httpClient);\r\n    }\r\n    @Bean\r\n    public RestTemplate customRestTemplate(@Qualifier(&quot;clientFactory&quot;) ClientHttpRequestFactory clientFactory){ \r\n        return new RestTemplate(clientFactory);\r\n    }\r\n\r\n","title":"Retry in RestTemplate not working against ResourceAccessException","body":"<p>My retry handler not working against ResourceAccessException. This only works against IOException and its sub-type. I even tried adding interceptor but no luck. Any idea how to add retry for ResourceAccessException???</p>\n<pre><code>@Bean\npublic ClientHttpRequestFactory clientFactory() {\n    HttpClient httpClient = HttpClients.custom()            \n        .setRetryHandler((exception, executionCount, context) -&gt; {\n            if (executionCount &gt; 3) {\n                log.warn(&quot;Maximum retries {} reached&quot;, 3);\n                return false;\n            }\n            if (&lt;some condition for retry&gt;) {\n                log.warn(&quot;Retry {}&quot;, executionCount);\n                return true;\n            }\n            return false;\n        })\n        .build();\n\n    return new HttpComponentsClientHttpRequestFactory(httpClient);\n}\n@Bean\npublic RestTemplate customRestTemplate(@Qualifier(&quot;clientFactory&quot;) ClientHttpRequestFactory clientFactory){ \n    return new RestTemplate(clientFactory);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665661937,"creation_date":1665661937,"answer_id":74055300,"question_id":74054952,"body_markdown":"You have two separate relationships between `ActivityCategory` and `Activity` they are completely unrelated.\r\n\r\nIf you want on to be the inverse of the other you have to add a `mappedBy` attribute to the `@ManyToOne` or `@OneToMany` annotation. \r\n\r\nNote that the side without the `mappedBy` attribute defines what will be persisted to the database while the other side will mirror that information after it got reloaded from the database, which won&#39;t happen within a single transaction due to the 1st level cache.\r\n\r\nFor more details read up on first level cache and on bidirectional relationship.","title":"SPRING BOOT - @OneToMany and my Set&lt;&gt; is empty","body":"<p>You have two separate relationships between <code>ActivityCategory</code> and <code>Activity</code> they are completely unrelated.</p>\n<p>If you want on to be the inverse of the other you have to add a <code>mappedBy</code> attribute to the <code>@ManyToOne</code> or <code>@OneToMany</code> annotation.</p>\n<p>Note that the side without the <code>mappedBy</code> attribute defines what will be persisted to the database while the other side will mirror that information after it got reloaded from the database, which won't happen within a single transaction due to the 1st level cache.</p>\n<p>For more details read up on first level cache and on bidirectional relationship.</p>\n"},{"tags":[],"owner":{"account_id":3592539,"reputation":2396,"user_id":2998222,"display_name":"Issam El-atif"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665664397,"creation_date":1665664397,"answer_id":74055861,"question_id":74054952,"body_markdown":"To add to [Jens Schauder][1] answer (very good explanatory answer by the way).\r\n\r\n`@OneToMany` should know how to map `ActivityCategory` and `Activity`. This can be done like this :\r\n\r\n    @OneToMany(mappedBy = &quot;activityCategory&quot;, targetEntity = Activity.class,\r\n    cascade = CascadeType.ALL,\r\n    fetch = FetchType.EAGER)\r\n    private Set&lt;Activity&gt; activities;\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/66686/jens-schauder","title":"SPRING BOOT - @OneToMany and my Set&lt;&gt; is empty","body":"<p>To add to <a href=\"https://stackoverflow.com/users/66686/jens-schauder\">Jens Schauder</a> answer (very good explanatory answer by the way).</p>\n<p><code>@OneToMany</code> should know how to map <code>ActivityCategory</code> and <code>Activity</code>. This can be done like this :</p>\n<pre><code>@OneToMany(mappedBy = &quot;activityCategory&quot;, targetEntity = Activity.class,\ncascade = CascadeType.ALL,\nfetch = FetchType.EAGER)\nprivate Set&lt;Activity&gt; activities;\n</code></pre>\n"}],"owner":{"account_id":24566710,"reputation":47,"user_id":18473757,"display_name":"Tokoro-San"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":628,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74055300,"answer_count":2,"score":0,"last_activity_date":1665664519,"creation_date":1665660261,"question_id":74054952,"body_markdown":"I ask this question because my OneToMany don&#39;t add the objects into my set. I would like to know if I made an error or if it&#39;s something that I&#39;ve missed in the configurations. Here is my code :\r\n\r\napplication.properties :\r\n```java\r\nspring.mail.host=smtp.gmail.com\r\nspring.mail.port=587\r\nspring.mail.username=${SMTP_SPREE_USERNAME}\r\nspring.mail.password=${SMTP_SPREE_PASSWORD}\r\nspring.mail.properties.mail.smtp.auth=true\r\nspring.mail.properties.mail.smtp.starttls.enable=true\r\n\r\nserver.servlet.context-path=/api\r\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/Workshop\r\nspring.datasource.username=${SPREE_DB_USERNAME}\r\nspring.datasource.password=${SPREE_DB_PASSWORD}\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\njwt.secret=${SPREE_JWT_SECRET}\r\n```\r\n\r\nActivityCategory.java : \r\n```java\r\npackage com.spreeapi.spree.models;\r\n\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\nimport javax.persistence.*;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Getter\r\n@Setter\r\n@Table(name=&quot;activity_category&quot;)\r\npublic class ActivityCategory {\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n\r\n    @OneToMany(targetEntity = Activity.class,\r\n    cascade = CascadeType.ALL,\r\n    fetch = FetchType.EAGER)\r\n    private Set&lt;Activity&gt; activities;\r\n}\r\n```\r\n\r\nActivity.java : \r\n\r\n```java\r\npackage com.spreeapi.spree.models;\r\n\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\nimport javax.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;activity&quot;)\r\n@Getter\r\n@Setter\r\npublic class Activity {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n\r\n    @Column(name = &quot;description&quot;)\r\n    private String description;\r\n\r\n    @Column(name = &quot;min_persons&quot;)\r\n    private String minimalPersons;\r\n\r\n    @Column(name = &quot;max_persons&quot;)\r\n    private String maximumPersons;\r\n\r\n    @Column(name = &quot;is_remote&quot;)\r\n    private boolean isRemote;\r\n\r\n    @Column(name = &quot;working_hours&quot;)\r\n    private boolean workingHours;\r\n\r\n    @Column(name = &quot;minimal_duration&quot;)\r\n    private String minimalDuration;\r\n\r\n    @ManyToOne(targetEntity = ActivityCategory.class)\r\n    @JoinColumn(name = &quot;activity_category_id&quot;)\r\n    private ActivityCategory activityCategory;\r\n}\r\n```\r\n\r\nActivityCategoryRepository.java :\r\n\r\n```java\r\n\r\npackage com.spreeapi.spree.repository;\r\n\r\nimport com.spreeapi.spree.models.ActivityCategory;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface ActivityCategoryRepository extends JpaRepository&lt;ActivityCategory, Integer&gt; {\r\n}\r\n```\r\n\r\nActivityRepository.java : \r\n```java\r\npackage com.spreeapi.spree.repository;\r\n\r\nimport com.spreeapi.spree.models.Activity;\r\nimport org.springframework.data.domain.Page;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface ActivityRepository extends JpaRepository&lt;Activity, Long&gt; {\r\n    public Page&lt;Activity&gt; findByActivityCategoryId(int id, Pageable pageable);\r\n}\r\n```\r\n\r\nTest.java :\r\n```java\r\n\r\npackage com.spreeapi.spree.controllers;\r\n\r\nimport com.spreeapi.spree.models.Activity;\r\nimport com.spreeapi.spree.models.ActivityCategory;\r\nimport com.spreeapi.spree.repository.ActivityCategoryRepository;\r\nimport com.spreeapi.spree.repository.ActivityRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\npublic class Test {\r\n\r\n    @Autowired\r\n    private ActivityRepository activityRepository;\r\n\r\n    @Autowired\r\n    private ActivityCategoryRepository activityCategoryRepository;\r\n\r\n    @GetMapping(&quot;/rest/demand/categories&quot;)\r\n    public List&lt;ActivityCategory&gt; test3(){\r\n        return activityCategoryRepository.findAll();\r\n    }\r\n\r\n    @GetMapping(&quot;/rest/demand/activities&quot;)\r\n    public List&lt;Activity&gt; test(){\r\n        return activityRepository.findAll();\r\n    }\r\n}\r\n\r\n```\r\n\r\npom.xml :\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.4&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.spree-api&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spree&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;spree&lt;/name&gt;\r\n    &lt;description&gt;spree&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.24&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n              &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n              &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n              &lt;scope&gt;test&lt;/scope&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd the result when I did a GET to the /categories : \r\n\r\n```json\r\n[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;Escape game&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 2,\r\n        &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 3,\r\n        &quot;title&quot;: &quot;Sports&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 4,\r\n        &quot;title&quot;: &quot;Voyage&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 5,\r\n        &quot;title&quot;: &quot;Laser-game&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 6,\r\n        &quot;title&quot;: &quot;Activit&#233; culturelle&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 7,\r\n        &quot;title&quot;: &quot;After Work&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 8,\r\n        &quot;title&quot;: &quot;Jeux de cartes&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 9,\r\n        &quot;title&quot;: &quot;Jeux Vid&#233;o&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 10,\r\n        &quot;title&quot;: &quot;Jeux de R&#244;le sur Table&quot;,\r\n        &quot;activities&quot;: []\r\n    },\r\n    {\r\n        &quot;id&quot;: 11,\r\n        &quot;title&quot;: &quot;Karaok&#233;&quot;,\r\n        &quot;activities&quot;: []\r\n    }\r\n]\r\n```\r\n\r\nAs you can see the activities attribute of the ActivityCategory return empty but if I do it by getting the list of all activities of the DB here is the result by accessing the /activities :\r\n\r\n```json\r\n[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;Escape Game&quot;,\r\n        &quot;description&quot;: &quot;L&#39;Escape Game est un jeu dont le but est &#224; tenter de s’&#233;chapper d’une pi&#232;ce en un temps limit&#233;. En groupe de 2 &#224; 6 participants, les joueurs doivent chercher des indices diss&#233;min&#233;s dans une ou plusieurs pi&#232;ces, puis les combiner pour avancer dans la salle.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;50&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 1,\r\n            &quot;title&quot;: &quot;Escape game&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 2,\r\n        &quot;title&quot;: &quot;7 wonders&quot;,\r\n        &quot;description&quot;: &quot;7 Wonders est un jeu de cartes ayant pour th&#232;me le d&#233;veloppement de civilisations autour de chacune des sept Merveilles du monde en utilisant un syst&#232;me de draft.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;7&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 2,\r\n            &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 3,\r\n        &quot;title&quot;: &quot;Catan&quot;,\r\n        &quot;description&quot;: &quot;Catan est un classique du jeux de soci&#233;t&#233;, un jeu de plateau strat&#233;gique mais convivial avec un principe d&#39;&#233;change de ressource.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;7&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 2,\r\n            &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 4,\r\n        &quot;title&quot;: &quot;Risk&quot;,\r\n        &quot;description&quot;: &quot;Risk est un jeux de soci&#233;t&#233; inspir&#233; du jeux de guerre, en plus simplifier, o&#249; votre but est de conqu&#233;rique le monde.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;6&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 2,\r\n            &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 5,\r\n        &quot;title&quot;: &quot;Les demeures de l&#39;&#233;pouvante&quot;,\r\n        &quot;description&quot;: &quot;Les Demeures de l’&#201;pouvante est un jeu de plateau coop&#233;ratif d’horreur et d’enqu&#234;te. Les joueurs y incarnent des investigateurs qui s’aventurent dans les salles sombres des demeures hant&#233;es d’Arkham&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;5&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 2,\r\n            &quot;title&quot;: &quot;Jeux de soci&#233;t&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 6,\r\n        &quot;title&quot;: &quot;Foot&quot;,\r\n        &quot;description&quot;: &quot;Le football est un sport collectif qui se joue avec un ballon sph&#233;rique, o&#249; il faut faire p&#233;n&#233;trer un ballon rond dans les buts adverses sans utiliser les mains&quot;,\r\n        &quot;minimalPersons&quot;: &quot;5&quot;,\r\n        &quot;maximumPersons&quot;: &quot;100&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 3,\r\n            &quot;title&quot;: &quot;Sports&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 7,\r\n        &quot;title&quot;: &quot;Tennis de table&quot;,\r\n        &quot;description&quot;: &quot;Le tennis de table, appel&#233; aussi ping-pong, est un sport de raquette opposant deux ou quatre joueurs autour d&#39;une table&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;100&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 3,\r\n            &quot;title&quot;: &quot;Sports&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 8,\r\n        &quot;title&quot;: &quot;Bowling&quot;,\r\n        &quot;description&quot;: &quot;Le bowling est un jeu qui consiste &#224; renverser des quilles &#224; l&#39;aide d&#39;une boule.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;10&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 3,\r\n            &quot;title&quot;: &quot;Sports&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 9,\r\n        &quot;title&quot;: &quot;Voyage&quot;,\r\n        &quot;description&quot;: &quot;Un voyage en &#233;quipe est un bon moyen de souder ses &#233;quipes.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;5&quot;,\r\n        &quot;maximumPersons&quot;: &quot;100&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 4,\r\n            &quot;title&quot;: &quot;Voyage&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 10,\r\n        &quot;title&quot;: &quot;Laser-game&quot;,\r\n        &quot;description&quot;: &quot;Un jeu laser aussi connu sous le terme anglophone Laser tag est une activit&#233; physique o&#249; les participants, rev&#234;tus habituellement d&#39;une veste &#224; capteurs, se tirent dessus avec des &#171; pistolets laser &#187;&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;10&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 5,\r\n            &quot;title&quot;: &quot;Laser-game&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 11,\r\n        &quot;title&quot;: &quot;Mus&#233;e&quot;,\r\n        &quot;description&quot;: &quot;le mus&#233;e est un lieu d&#39;exp&#233;riences m&#233;morables et &#233;mouvantes quand les sens sont interpell&#233;s pour attirer, susciter la curiosit&#233;, amuser, &#233;merveiller, faire comprendre.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;100&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 6,\r\n            &quot;title&quot;: &quot;Activit&#233; culturelle&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 12,\r\n        &quot;title&quot;: &quot;After Work&quot;,\r\n        &quot;description&quot;: &quot;Cet instant entre coll&#232;gues permet de resserrer les liens, de souder les &#233;quipes, de cr&#233;er une sorte d&#39;&#233;mulation. C&#39;est aussi un moment o&#249; l&#39;on dresse un bilan, o&#249; l&#39;on cherche &#224; d&#233;compresser ensemble dans un lieu en soir&#233;e neutre et agr&#233;able, loin de l&#39;ambiance du travail.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;20&quot;,\r\n        &quot;workingHours&quot;: false,\r\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 7,\r\n            &quot;title&quot;: &quot;After Work&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 13,\r\n        &quot;title&quot;: &quot;Poker&quot;,\r\n        &quot;description&quot;: &quot;Le poker est une famille de jeux de cartes comprenant de nombreuses formules et variantes. Il se pratique &#224; plusieurs joueurs avec un jeu g&#233;n&#233;ralement de cinquante-deux cartes et des jetons repr&#233;sentant les sommes mis&#233;es. Les s&#233;quences de jeu alternent distribution de cartes et tours d&#39;ench&#232;res.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;5&quot;,\r\n        &quot;maximumPersons&quot;: &quot;50&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;es&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 8,\r\n            &quot;title&quot;: &quot;Jeux de cartes&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    },\r\n    {\r\n        &quot;id&quot;: 14,\r\n        &quot;title&quot;: &quot;Arcade&quot;,\r\n        &quot;description&quot;: &quot;Une salle d’arcade est un &#233;tablissement de loisirs regroupant des appareils tels que des jeux d’arcade, des flippers, des baby-foots, des tables d&#39;air hockey, des machines attrape-jouet ainsi que des billards.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;10&quot;,\r\n        &quot;maximumPersons&quot;: &quot;50&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 9,\r\n            &quot;title&quot;: &quot;Jeux Vid&#233;o&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 15,\r\n        &quot;title&quot;: &quot;Honey Heist&quot;,\r\n        &quot;description&quot;: &quot;Y en a deux : OURS et CRIMINEL. Les deux commencent &#224; 3. OURS sert &#224; courir, escalader, p&#233;ter des trucs, ignorer les dommages, effrayer les gens et autres trucs d’ours. CRIMINEL sert pour tous les autres trucs, ce que les ours ne font pas en g&#233;n&#233;ral.&quot;,\r\n        &quot;minimalPersons&quot;: &quot;3&quot;,\r\n        &quot;maximumPersons&quot;: &quot;6&quot;,\r\n        &quot;workingHours&quot;: true,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 10,\r\n            &quot;title&quot;: &quot;Jeux de R&#244;le sur Table&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: true\r\n    },\r\n    {\r\n        &quot;id&quot;: 16,\r\n        &quot;title&quot;: &quot;Karaok&#233;&quot;,\r\n        &quot;description&quot;: &quot;Prends le micro et chante&quot;,\r\n        &quot;minimalPersons&quot;: &quot;2&quot;,\r\n        &quot;maximumPersons&quot;: &quot;110&quot;,\r\n        &quot;workingHours&quot;: false,\r\n        &quot;minimalDuration&quot;: &quot;1/2 journ&#233;e&quot;,\r\n        &quot;activityCategory&quot;: {\r\n            &quot;id&quot;: 11,\r\n            &quot;title&quot;: &quot;Karaok&#233;&quot;,\r\n            &quot;activities&quot;: []\r\n        },\r\n        &quot;remote&quot;: false\r\n    }\r\n]\r\n```\r\n\r\n \r\nPlease let me know if something is missing or an error has been made.","title":"SPRING BOOT - @OneToMany and my Set&lt;&gt; is empty","body":"<p>I ask this question because my OneToMany don't add the objects into my set. I would like to know if I made an error or if it's something that I've missed in the configurations. Here is my code :</p>\n<p>application.properties :</p>\n<pre class=\"lang-java prettyprint-override\"><code>spring.mail.host=smtp.gmail.com\nspring.mail.port=587\nspring.mail.username=${SMTP_SPREE_USERNAME}\nspring.mail.password=${SMTP_SPREE_PASSWORD}\nspring.mail.properties.mail.smtp.auth=true\nspring.mail.properties.mail.smtp.starttls.enable=true\n\nserver.servlet.context-path=/api\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/Workshop\nspring.datasource.username=${SPREE_DB_USERNAME}\nspring.datasource.password=${SPREE_DB_PASSWORD}\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL8Dialect\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=update\n\njwt.secret=${SPREE_JWT_SECRET}\n</code></pre>\n<p>ActivityCategory.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.spreeapi.spree.models;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport java.util.Set;\n\n@Entity\n@Getter\n@Setter\n@Table(name=&quot;activity_category&quot;)\npublic class ActivityCategory {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @OneToMany(targetEntity = Activity.class,\n    cascade = CascadeType.ALL,\n    fetch = FetchType.EAGER)\n    private Set&lt;Activity&gt; activities;\n}\n</code></pre>\n<p>Activity.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.spreeapi.spree.models;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(name = &quot;activity&quot;)\n@Getter\n@Setter\npublic class Activity {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @Column(name = &quot;description&quot;)\n    private String description;\n\n    @Column(name = &quot;min_persons&quot;)\n    private String minimalPersons;\n\n    @Column(name = &quot;max_persons&quot;)\n    private String maximumPersons;\n\n    @Column(name = &quot;is_remote&quot;)\n    private boolean isRemote;\n\n    @Column(name = &quot;working_hours&quot;)\n    private boolean workingHours;\n\n    @Column(name = &quot;minimal_duration&quot;)\n    private String minimalDuration;\n\n    @ManyToOne(targetEntity = ActivityCategory.class)\n    @JoinColumn(name = &quot;activity_category_id&quot;)\n    private ActivityCategory activityCategory;\n}\n</code></pre>\n<p>ActivityCategoryRepository.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage com.spreeapi.spree.repository;\n\nimport com.spreeapi.spree.models.ActivityCategory;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface ActivityCategoryRepository extends JpaRepository&lt;ActivityCategory, Integer&gt; {\n}\n</code></pre>\n<p>ActivityRepository.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.spreeapi.spree.repository;\n\nimport com.spreeapi.spree.models.Activity;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface ActivityRepository extends JpaRepository&lt;Activity, Long&gt; {\n    public Page&lt;Activity&gt; findByActivityCategoryId(int id, Pageable pageable);\n}\n</code></pre>\n<p>Test.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage com.spreeapi.spree.controllers;\n\nimport com.spreeapi.spree.models.Activity;\nimport com.spreeapi.spree.models.ActivityCategory;\nimport com.spreeapi.spree.repository.ActivityCategoryRepository;\nimport com.spreeapi.spree.repository.ActivityRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\n@RestController\npublic class Test {\n\n    @Autowired\n    private ActivityRepository activityRepository;\n\n    @Autowired\n    private ActivityCategoryRepository activityCategoryRepository;\n\n    @GetMapping(&quot;/rest/demand/categories&quot;)\n    public List&lt;ActivityCategory&gt; test3(){\n        return activityCategoryRepository.findAll();\n    }\n\n    @GetMapping(&quot;/rest/demand/activities&quot;)\n    public List&lt;Activity&gt; test(){\n        return activityRepository.findAll();\n    }\n}\n\n</code></pre>\n<p>pom.xml :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.spree-api&lt;/groupId&gt;\n    &lt;artifactId&gt;spree&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spree&lt;/name&gt;\n    &lt;description&gt;spree&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.24&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n              &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n              &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n              &lt;scope&gt;test&lt;/scope&gt;\n          &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>And the result when I did a GET to the /categories :</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;title&quot;: &quot;Escape game&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 2,\n        &quot;title&quot;: &quot;Jeux de société&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 3,\n        &quot;title&quot;: &quot;Sports&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 4,\n        &quot;title&quot;: &quot;Voyage&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 5,\n        &quot;title&quot;: &quot;Laser-game&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 6,\n        &quot;title&quot;: &quot;Activité culturelle&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 7,\n        &quot;title&quot;: &quot;After Work&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 8,\n        &quot;title&quot;: &quot;Jeux de cartes&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 9,\n        &quot;title&quot;: &quot;Jeux Vidéo&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 10,\n        &quot;title&quot;: &quot;Jeux de Rôle sur Table&quot;,\n        &quot;activities&quot;: []\n    },\n    {\n        &quot;id&quot;: 11,\n        &quot;title&quot;: &quot;Karaoké&quot;,\n        &quot;activities&quot;: []\n    }\n]\n</code></pre>\n<p>As you can see the activities attribute of the ActivityCategory return empty but if I do it by getting the list of all activities of the DB here is the result by accessing the /activities :</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;title&quot;: &quot;Escape Game&quot;,\n        &quot;description&quot;: &quot;L'Escape Game est un jeu dont le but est à tenter de s’échapper d’une pièce en un temps limité. En groupe de 2 à 6 participants, les joueurs doivent chercher des indices disséminés dans une ou plusieurs pièces, puis les combiner pour avancer dans la salle.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;50&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 1,\n            &quot;title&quot;: &quot;Escape game&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 2,\n        &quot;title&quot;: &quot;7 wonders&quot;,\n        &quot;description&quot;: &quot;7 Wonders est un jeu de cartes ayant pour thème le développement de civilisations autour de chacune des sept Merveilles du monde en utilisant un système de draft.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;7&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 2,\n            &quot;title&quot;: &quot;Jeux de société&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 3,\n        &quot;title&quot;: &quot;Catan&quot;,\n        &quot;description&quot;: &quot;Catan est un classique du jeux de société, un jeu de plateau stratégique mais convivial avec un principe d'échange de ressource.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;7&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 2,\n            &quot;title&quot;: &quot;Jeux de société&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 4,\n        &quot;title&quot;: &quot;Risk&quot;,\n        &quot;description&quot;: &quot;Risk est un jeux de société inspiré du jeux de guerre, en plus simplifier, où votre but est de conquérique le monde.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;6&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 2,\n            &quot;title&quot;: &quot;Jeux de société&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 5,\n        &quot;title&quot;: &quot;Les demeures de l'épouvante&quot;,\n        &quot;description&quot;: &quot;Les Demeures de l’Épouvante est un jeu de plateau coopératif d’horreur et d’enquête. Les joueurs y incarnent des investigateurs qui s’aventurent dans les salles sombres des demeures hantées d’Arkham&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;5&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 2,\n            &quot;title&quot;: &quot;Jeux de société&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 6,\n        &quot;title&quot;: &quot;Foot&quot;,\n        &quot;description&quot;: &quot;Le football est un sport collectif qui se joue avec un ballon sphérique, où il faut faire pénétrer un ballon rond dans les buts adverses sans utiliser les mains&quot;,\n        &quot;minimalPersons&quot;: &quot;5&quot;,\n        &quot;maximumPersons&quot;: &quot;100&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 3,\n            &quot;title&quot;: &quot;Sports&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 7,\n        &quot;title&quot;: &quot;Tennis de table&quot;,\n        &quot;description&quot;: &quot;Le tennis de table, appelé aussi ping-pong, est un sport de raquette opposant deux ou quatre joueurs autour d'une table&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;100&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 3,\n            &quot;title&quot;: &quot;Sports&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 8,\n        &quot;title&quot;: &quot;Bowling&quot;,\n        &quot;description&quot;: &quot;Le bowling est un jeu qui consiste à renverser des quilles à l'aide d'une boule.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;10&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 3,\n            &quot;title&quot;: &quot;Sports&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 9,\n        &quot;title&quot;: &quot;Voyage&quot;,\n        &quot;description&quot;: &quot;Un voyage en équipe est un bon moyen de souder ses équipes.&quot;,\n        &quot;minimalPersons&quot;: &quot;5&quot;,\n        &quot;maximumPersons&quot;: &quot;100&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 4,\n            &quot;title&quot;: &quot;Voyage&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 10,\n        &quot;title&quot;: &quot;Laser-game&quot;,\n        &quot;description&quot;: &quot;Un jeu laser aussi connu sous le terme anglophone Laser tag est une activité physique où les participants, revêtus habituellement d'une veste à capteurs, se tirent dessus avec des « pistolets laser »&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;10&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 5,\n            &quot;title&quot;: &quot;Laser-game&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 11,\n        &quot;title&quot;: &quot;Musée&quot;,\n        &quot;description&quot;: &quot;le musée est un lieu d'expériences mémorables et émouvantes quand les sens sont interpellés pour attirer, susciter la curiosité, amuser, émerveiller, faire comprendre.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;100&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 6,\n            &quot;title&quot;: &quot;Activité culturelle&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 12,\n        &quot;title&quot;: &quot;After Work&quot;,\n        &quot;description&quot;: &quot;Cet instant entre collègues permet de resserrer les liens, de souder les équipes, de créer une sorte d'émulation. C'est aussi un moment où l'on dresse un bilan, où l'on cherche à décompresser ensemble dans un lieu en soirée neutre et agréable, loin de l'ambiance du travail.&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;20&quot;,\n        &quot;workingHours&quot;: false,\n        &quot;minimalDuration&quot;: &quot;Quelques heures&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 7,\n            &quot;title&quot;: &quot;After Work&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 13,\n        &quot;title&quot;: &quot;Poker&quot;,\n        &quot;description&quot;: &quot;Le poker est une famille de jeux de cartes comprenant de nombreuses formules et variantes. Il se pratique à plusieurs joueurs avec un jeu généralement de cinquante-deux cartes et des jetons représentant les sommes misées. Les séquences de jeu alternent distribution de cartes et tours d'enchères.&quot;,\n        &quot;minimalPersons&quot;: &quot;5&quot;,\n        &quot;maximumPersons&quot;: &quot;50&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journées&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 8,\n            &quot;title&quot;: &quot;Jeux de cartes&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    },\n    {\n        &quot;id&quot;: 14,\n        &quot;title&quot;: &quot;Arcade&quot;,\n        &quot;description&quot;: &quot;Une salle d’arcade est un établissement de loisirs regroupant des appareils tels que des jeux d’arcade, des flippers, des baby-foots, des tables d'air hockey, des machines attrape-jouet ainsi que des billards.&quot;,\n        &quot;minimalPersons&quot;: &quot;10&quot;,\n        &quot;maximumPersons&quot;: &quot;50&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 9,\n            &quot;title&quot;: &quot;Jeux Vidéo&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 15,\n        &quot;title&quot;: &quot;Honey Heist&quot;,\n        &quot;description&quot;: &quot;Y en a deux : OURS et CRIMINEL. Les deux commencent à 3. OURS sert à courir, escalader, péter des trucs, ignorer les dommages, effrayer les gens et autres trucs d’ours. CRIMINEL sert pour tous les autres trucs, ce que les ours ne font pas en général.&quot;,\n        &quot;minimalPersons&quot;: &quot;3&quot;,\n        &quot;maximumPersons&quot;: &quot;6&quot;,\n        &quot;workingHours&quot;: true,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 10,\n            &quot;title&quot;: &quot;Jeux de Rôle sur Table&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: true\n    },\n    {\n        &quot;id&quot;: 16,\n        &quot;title&quot;: &quot;Karaoké&quot;,\n        &quot;description&quot;: &quot;Prends le micro et chante&quot;,\n        &quot;minimalPersons&quot;: &quot;2&quot;,\n        &quot;maximumPersons&quot;: &quot;110&quot;,\n        &quot;workingHours&quot;: false,\n        &quot;minimalDuration&quot;: &quot;1/2 journée&quot;,\n        &quot;activityCategory&quot;: {\n            &quot;id&quot;: 11,\n            &quot;title&quot;: &quot;Karaoké&quot;,\n            &quot;activities&quot;: []\n        },\n        &quot;remote&quot;: false\n    }\n]\n</code></pre>\n<p>Please let me know if something is missing or an error has been made.</p>\n"},{"tags":["java","resttemplate","spring-webflux","project-reactor","spring-websocket"],"answers":[{"tags":[],"owner":{"account_id":2427398,"reputation":4736,"user_id":2119041,"accept_rate":100,"display_name":"NikolaB"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1574238512,"creation_date":1574165337,"answer_id":58933790,"question_id":58932752,"body_markdown":"There are couple of issues here, first `RestTemplate` is synchronous/blocking HTTP client so you should use `WebClient` which is reactive, also to create `ConnectableFlux` (`Flux` which can have multiple subscribers) you need to share it before `map` operator and create new `Flux`-es which are created from connected one.\r\n\r\nExample:\r\n\r\n    Flux&lt;MyEvent&gt; connectedFlux = mySource.events().share();\r\n    Flux.from(connectedFlux).subscribe(event -&gt; notifier.sendNotification(event));\r\n    return webSocketSession.send(Flux.from(connectedFlux).map(this::toJson).map(webSocketSession::textMessage));\r\n\r\nAlso `sendNotification` method should return `Mono&lt;Void&gt;` since reactive methods should always return `Mono` or `Flux`types.\r\n\r\nTo initiate independent executions you could `Zip` those two `Mono`s.\r\n\r\n**Edit**\r\n\r\nFirst of all as mentioned above use `WebClient` for outgoing HTTP calls which is reactive HTTP client and rework the `Notifier` class:\r\n\r\n    public class Notifier {\r\n    \r\n       public Mono&lt;Void&gt; sendNotification (MyEvent event) {\r\n          log.info(&quot;notifier sendNotification &quot; + event.getValue());\r\n          return Mono.just(event)\r\n                     .filter(e -&gt; /* your condition */)\r\n                     .flatMap(e -&gt; WebClient.builder().baseUrl(&quot;XXX&quot;)...)\r\n                     .then();\r\n       }\r\n    \r\n    }\r\n\r\nNow take a look if execution context is different.\r\n\r\n","title":"How to have multiple subscribers to Flux that run on different execution contexts / threads","body":"<p>There are couple of issues here, first <code>RestTemplate</code> is synchronous/blocking HTTP client so you should use <code>WebClient</code> which is reactive, also to create <code>ConnectableFlux</code> (<code>Flux</code> which can have multiple subscribers) you need to share it before <code>map</code> operator and create new <code>Flux</code>-es which are created from connected one.</p>\n\n<p>Example:</p>\n\n<pre><code>Flux&lt;MyEvent&gt; connectedFlux = mySource.events().share();\nFlux.from(connectedFlux).subscribe(event -&gt; notifier.sendNotification(event));\nreturn webSocketSession.send(Flux.from(connectedFlux).map(this::toJson).map(webSocketSession::textMessage));\n</code></pre>\n\n<p>Also <code>sendNotification</code> method should return <code>Mono&lt;Void&gt;</code> since reactive methods should always return <code>Mono</code> or <code>Flux</code>types.</p>\n\n<p>To initiate independent executions you could <code>Zip</code> those two <code>Mono</code>s.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>First of all as mentioned above use <code>WebClient</code> for outgoing HTTP calls which is reactive HTTP client and rework the <code>Notifier</code> class:</p>\n\n<pre><code>public class Notifier {\n\n   public Mono&lt;Void&gt; sendNotification (MyEvent event) {\n      log.info(\"notifier sendNotification \" + event.getValue());\n      return Mono.just(event)\n                 .filter(e -&gt; /* your condition */)\n                 .flatMap(e -&gt; WebClient.builder().baseUrl(\"XXX\")...)\n                 .then();\n   }\n\n}\n</code></pre>\n\n<p>Now take a look if execution context is different.</p>\n"},{"tags":[],"owner":{"account_id":15459711,"reputation":1631,"user_id":11152683,"display_name":"Lubo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665664472,"creation_date":1665664472,"answer_id":74055870,"question_id":58932752,"body_markdown":"Note also that you are using &quot;cold&quot; flux to simulate events (Flux.interval(...)). In reality, there will be some Sink I think. Try to play with this code:\r\n\r\n\r\n    @Controller\r\n    @Slf4j\r\n    public class ReactiveController {\r\n        record SomeDTO(String name, String address) {\r\n        }\r\n    \r\n        private final Sinks.Many&lt;SomeDTO&gt; eventSink = Sinks.many().replay().latest();\r\n    \r\n        @RequestMapping(path = &quot;/sse&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)\r\n        public Flux&lt;ServerSentEvent&lt;SomeDTO&gt;&gt; sse() {\r\n            final AtomicLong counter = new AtomicLong(0);\r\n            return eventSink.asFlux()\r\n                    .map(e -&gt; ServerSentEvent.builder(e)\r\n                            .id(counter.incrementAndGet() + &quot;&quot;)\r\n                            //.event(e.getClass().getName())\r\n                            .build());\r\n        }\r\n    \r\n        // note, when you want this to work in production, ensure, that http request is not being cached on its way, using POST method for example.\r\n        @ResponseStatus(HttpStatus.OK)\r\n        @ResponseBody\r\n        @GetMapping(path = &quot;/sendSomething&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\r\n        public String sendSomething() {\r\n            this.eventSink.emitNext(\r\n                    new SomeDTO(&quot;name&quot;, &quot;address&quot;),\r\n                    (signalType, emitResult) -&gt; {\r\n                        log.warn(&quot;Some event is being not send to all subscribers. It will vanish...&quot;);\r\n                        // returning false, to not retry emitting given data again.\r\n                        return false;\r\n                    }\r\n            );\r\n            return &quot;Have a look at /sse endpoint (using \\&quot;curl http://localhost/sse\\&quot; for example), to see events in realtime.&quot;;\r\n        }\r\n    }\r\n\r\n","title":"How to have multiple subscribers to Flux that run on different execution contexts / threads","body":"<p>Note also that you are using &quot;cold&quot; flux to simulate events (Flux.interval(...)). In reality, there will be some Sink I think. Try to play with this code:</p>\n<pre><code>@Controller\n@Slf4j\npublic class ReactiveController {\n    record SomeDTO(String name, String address) {\n    }\n\n    private final Sinks.Many&lt;SomeDTO&gt; eventSink = Sinks.many().replay().latest();\n\n    @RequestMapping(path = &quot;/sse&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)\n    public Flux&lt;ServerSentEvent&lt;SomeDTO&gt;&gt; sse() {\n        final AtomicLong counter = new AtomicLong(0);\n        return eventSink.asFlux()\n                .map(e -&gt; ServerSentEvent.builder(e)\n                        .id(counter.incrementAndGet() + &quot;&quot;)\n                        //.event(e.getClass().getName())\n                        .build());\n    }\n\n    // note, when you want this to work in production, ensure, that http request is not being cached on its way, using POST method for example.\n    @ResponseStatus(HttpStatus.OK)\n    @ResponseBody\n    @GetMapping(path = &quot;/sendSomething&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\n    public String sendSomething() {\n        this.eventSink.emitNext(\n                new SomeDTO(&quot;name&quot;, &quot;address&quot;),\n                (signalType, emitResult) -&gt; {\n                    log.warn(&quot;Some event is being not send to all subscribers. It will vanish...&quot;);\n                    // returning false, to not retry emitting given data again.\n                    return false;\n                }\n        );\n        return &quot;Have a look at /sse endpoint (using \\&quot;curl http://localhost/sse\\&quot; for example), to see events in realtime.&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3675939,"reputation":1113,"user_id":3062048,"accept_rate":60,"display_name":"vortex.alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11349,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":58933790,"answer_count":2,"score":5,"last_activity_date":1665664472,"creation_date":1574162021,"question_id":58932752,"body_markdown":"I&#39;m developing a Spring Boot WebFlux application for IoT real time data visualization.\r\n\r\nI have a `Flux` which simulates data coming from a device, and I want that upon websocket connection established every single event:\r\n\r\n - must be sent over the websocket for real time visualization (using reactive `WebSocketHandler`)\r\n - must be checked against a given condition so to send a notification via HTTP REST call (`RestTemplate`)\r\n\r\n\r\nFrom my logs it seems the two subscribers (the websocket handler and the notifier) gets two different flows with completely different values (below the logs). \r\n\r\nI also tried a variant chaining the `share` method after the `map` in the `MySource` class, in this case it looks like though I have just one Flux, there is only ONE thread so everything is blocking (I can see the REST call blocks the sending over the websocket).\r\n\r\n\r\nWhat happens here? How can I make the two subscribers to be run in different execution contexts (different threads), so completely independent from each other? \r\n\r\n\r\nBelow relevant code snippets and logs.\r\n\r\nThank you all in advance!\r\n\r\n**UPDATE:** for the sake of clarity I have to specify that `MyEvent`s have RANDOM-generated values, so I solved one issue thanks to @NikolaB&#39;s answer by using the `ConnectableFlux` / `share` which guarantees to have the same `Flux`, but I still want to have separate execution contexts for the two subscribers.\r\n\r\n\r\n```\r\npublic class MyWebSocketHandler implements WebSocketHandler {\r\n\r\n   @Autowired\r\n   public MySource mySource;\r\n\r\n   @Autowired\r\n   public Notifier notifier;\r\n\r\n   public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\r\n            Flux&lt;MyEvent&gt; events = mySource.events();\r\n            events.subscribe(event -&gt; notifier.sendNotification(event));\r\n            return webSocketSession.send(events.map(this::toJson).map(webSocketSession::textMessage));\r\n   }\r\n\r\n   private String toJson(MyEvent event) {\r\n       log.info(&quot;websocket toJson &quot; + event.getValue());\r\n       ...\r\n   }\r\n}\r\n```\r\n\r\n```\r\npublic class MySource {\r\n   public Flux&lt;MyEvent&gt; events() {\r\n      return Flux.interval(...).map(i -&gt; new MyEvent(*Random Generate Value*);\r\n   }\r\n}\r\n```\r\n\r\n```\r\npublic class Notifier {\r\n\r\n   public void sendNotification (MyEvent event) {\r\n      log.info(&quot;notifier sendNotification &quot; + event.getValue());\r\n      if (condition met)\r\n         restTemplate.exchange(...)\r\n   }\r\n}\r\n```\r\n\r\n```\r\n2019-11-19 11:58:55.375 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.09\r\n2019-11-19 11:58:55.375 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.86\r\n2019-11-19 11:58:57.366 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.24\r\n2019-11-19 11:58:57.374 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.11\r\n2019-11-19 11:58:59.365 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.61\r\n2019-11-19 11:58:59.374 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.03\r\n2019-11-19 11:59:01.365 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.88\r\n2019-11-19 11:59:01.375 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.29\r\n2019-11-19 11:59:03.364 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.37\r\n```\r\n","title":"How to have multiple subscribers to Flux that run on different execution contexts / threads","body":"<p>I'm developing a Spring Boot WebFlux application for IoT real time data visualization.</p>\n\n<p>I have a <code>Flux</code> which simulates data coming from a device, and I want that upon websocket connection established every single event:</p>\n\n<ul>\n<li>must be sent over the websocket for real time visualization (using reactive <code>WebSocketHandler</code>)</li>\n<li>must be checked against a given condition so to send a notification via HTTP REST call (<code>RestTemplate</code>)</li>\n</ul>\n\n<p>From my logs it seems the two subscribers (the websocket handler and the notifier) gets two different flows with completely different values (below the logs). </p>\n\n<p>I also tried a variant chaining the <code>share</code> method after the <code>map</code> in the <code>MySource</code> class, in this case it looks like though I have just one Flux, there is only ONE thread so everything is blocking (I can see the REST call blocks the sending over the websocket).</p>\n\n<p>What happens here? How can I make the two subscribers to be run in different execution contexts (different threads), so completely independent from each other? </p>\n\n<p>Below relevant code snippets and logs.</p>\n\n<p>Thank you all in advance!</p>\n\n<p><strong>UPDATE:</strong> for the sake of clarity I have to specify that <code>MyEvent</code>s have RANDOM-generated values, so I solved one issue thanks to @NikolaB's answer by using the <code>ConnectableFlux</code> / <code>share</code> which guarantees to have the same <code>Flux</code>, but I still want to have separate execution contexts for the two subscribers.</p>\n\n<pre><code>public class MyWebSocketHandler implements WebSocketHandler {\n\n   @Autowired\n   public MySource mySource;\n\n   @Autowired\n   public Notifier notifier;\n\n   public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\n            Flux&lt;MyEvent&gt; events = mySource.events();\n            events.subscribe(event -&gt; notifier.sendNotification(event));\n            return webSocketSession.send(events.map(this::toJson).map(webSocketSession::textMessage));\n   }\n\n   private String toJson(MyEvent event) {\n       log.info(\"websocket toJson \" + event.getValue());\n       ...\n   }\n}\n</code></pre>\n\n<pre><code>public class MySource {\n   public Flux&lt;MyEvent&gt; events() {\n      return Flux.interval(...).map(i -&gt; new MyEvent(*Random Generate Value*);\n   }\n}\n</code></pre>\n\n<pre><code>public class Notifier {\n\n   public void sendNotification (MyEvent event) {\n      log.info(\"notifier sendNotification \" + event.getValue());\n      if (condition met)\n         restTemplate.exchange(...)\n   }\n}\n</code></pre>\n\n<pre><code>2019-11-19 11:58:55.375 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.09\n2019-11-19 11:58:55.375 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.86\n2019-11-19 11:58:57.366 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.24\n2019-11-19 11:58:57.374 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.11\n2019-11-19 11:58:59.365 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.61\n2019-11-19 11:58:59.374 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.03\n2019-11-19 11:59:01.365 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.88\n2019-11-19 11:59:01.375 INFO [     parallel-3] i.a.m.websocket.MyWebSocketHandler  : websocket toJson 4.29\n2019-11-19 11:59:03.364 INFO [     parallel-1] i.a.m.notifier.Notifier : notifier sendNotification 4.37\n</code></pre>\n"},{"tags":["java","loops","while-loop"],"comments":[{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":0,"creation_date":1665143645,"post_id":73986687,"comment_id":130636441,"body_markdown":"`} else { break; }`?","body":"<code>} else { break; }</code>?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665143721,"post_id":73986687,"comment_id":130636476,"body_markdown":"_what would the best way to exit the loop?_ Do you not know about the [break](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html) statement?","body":"<i>what would the best way to exit the loop?</i> Do you not know about the <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html\" rel=\"nofollow noreferrer\">break</a> statement?"},{"owner":{"account_id":2679531,"reputation":2832,"user_id":2315162,"accept_rate":81,"display_name":"sinclair"},"score":0,"creation_date":1665563927,"post_id":73986687,"comment_id":130727684,"body_markdown":"Does this answer your question? [How do I exit a while loop in Java?](https://stackoverflow.com/questions/7951690/how-do-i-exit-a-while-loop-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7951690/how-do-i-exit-a-while-loop-in-java\">How do I exit a while loop in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665221287,"creation_date":1665143876,"answer_id":73986841,"question_id":73986687,"body_markdown":"You can read initial input before loop and put the inverted conditions with logical `OR` in the loops condition\r\n```\r\n//read initial input\r\nwhile(!condition1() || !condition2() || !condition3()) {\r\n  //inform input is not valid\r\n  //read next input\r\n}\r\n```\r\nThe loop will continue for as long as at least one condition is not met - evaluated to `false`. When all conditions have been met - all of them were `true`, the loop ends.","title":"While loop strategy with multiple conditionals inside","body":"<p>You can read initial input before loop and put the inverted conditions with logical <code>OR</code> in the loops condition</p>\n<pre><code>//read initial input\nwhile(!condition1() || !condition2() || !condition3()) {\n  //inform input is not valid\n  //read next input\n}\n</code></pre>\n<p>The loop will continue for as long as at least one condition is not met - evaluated to <code>false</code>. When all conditions have been met - all of them were <code>true</code>, the loop ends.</p>\n"},{"tags":[],"owner":{"account_id":7091735,"reputation":2510,"user_id":5426703,"display_name":"Spyros K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665664139,"creation_date":1665144094,"answer_id":73986886,"question_id":73986687,"body_markdown":"The input capture use case you describe seems suitable for a `do-while` loop.\r\n- The input is repeatedly re-captured inside the `do-while`\r\n- All the conditions can be encapsulated inside a function that takes as argument the captured input\r\n- A single if-else statement can be used that makes sure that the loop either repeats with a `continue` if conditions are not met or ends with a `break`.\r\n```java\r\ndo {\r\n    final String input;    //Code that gets input\r\n    //shouldRepeat should include all conditions\r\n    if (shouldRepeat(input)) {\r\n        print(&quot;This doesnt meet the condition. Try again!&quot;);\r\n        continue;\r\n    } else {\r\n        print(&quot;Success&quot;);\r\n        break;\r\n    }\r\n} while(true);\r\n\r\n\r\n//Function signature\r\nprivate boolean shouldRepeat(final String input){\r\n    //conditions\r\n    //Condition1 OR Condition2 OR Condition3\r\n}\r\n```\r\n","title":"While loop strategy with multiple conditionals inside","body":"<p>The input capture use case you describe seems suitable for a <code>do-while</code> loop.</p>\n<ul>\n<li>The input is repeatedly re-captured inside the <code>do-while</code></li>\n<li>All the conditions can be encapsulated inside a function that takes as argument the captured input</li>\n<li>A single if-else statement can be used that makes sure that the loop either repeats with a <code>continue</code> if conditions are not met or ends with a <code>break</code>.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>do {\n    final String input;    //Code that gets input\n    //shouldRepeat should include all conditions\n    if (shouldRepeat(input)) {\n        print(&quot;This doesnt meet the condition. Try again!&quot;);\n        continue;\n    } else {\n        print(&quot;Success&quot;);\n        break;\n    }\n} while(true);\n\n\n//Function signature\nprivate boolean shouldRepeat(final String input){\n    //conditions\n    //Condition1 OR Condition2 OR Condition3\n}\n</code></pre>\n"}],"owner":{"account_id":12391188,"reputation":37,"user_id":9033161,"display_name":"Greddy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1665664139,"creation_date":1665143133,"question_id":73986687,"body_markdown":"I am looking for advice on how to write a `while` loop with a multiple conditionals. The main idea is that we have conditions which are checked and if they don&#39;t meet the requirements, they are repeated. \r\nFor example, we need to enter some input (Numeric String with two numbers). Input has to be numeric, has to be no less than 3 and has to have the same numbers. If whichever condition is not met, it informs the user and ask for the input again. If input matches all the requirements, the loop stops. What is the best scenario for that? \r\nMy idea was something like that:\r\n\r\n```java\r\nwhile (true) {\r\n    if (!(someMethod)) {\r\n        print(&quot;This doesnt meet the condition. Try again!&quot;);\r\n        continue;\r\n    }\r\n}\r\n```\r\n`continue` does the job of repeating the condition &quot;anew&quot;, but I am not sure about what would be the best way to exit the loop?\r\n","title":"While loop strategy with multiple conditionals inside","body":"<p>I am looking for advice on how to write a <code>while</code> loop with a multiple conditionals. The main idea is that we have conditions which are checked and if they don't meet the requirements, they are repeated.\nFor example, we need to enter some input (Numeric String with two numbers). Input has to be numeric, has to be no less than 3 and has to have the same numbers. If whichever condition is not met, it informs the user and ask for the input again. If input matches all the requirements, the loop stops. What is the best scenario for that?\nMy idea was something like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>while (true) {\n    if (!(someMethod)) {\n        print(&quot;This doesnt meet the condition. Try again!&quot;);\n        continue;\n    }\n}\n</code></pre>\n<p><code>continue</code> does the job of repeating the condition &quot;anew&quot;, but I am not sure about what would be the best way to exit the loop?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4140837,"reputation":1308,"user_id":3396216,"accept_rate":88,"display_name":"Shakir Ahamed"},"score":0,"creation_date":1395586343,"post_id":22592401,"comment_id":34395370,"body_markdown":"It&#39;s means Web camera","body":"It&#39;s means Web camera"},{"owner":{"account_id":147727,"reputation":12641,"user_id":359035,"accept_rate":92,"display_name":"BillRobertson42"},"score":0,"creation_date":1395593472,"post_id":22592401,"comment_id":34398120,"body_markdown":"Hi, maybe it would help if you made your question a little bit more specific. For example, &quot;After getting an image with Java Media&#39;s FrameGrabbingControl, how do I stop the camera?&quot;","body":"Hi, maybe it would help if you made your question a little bit more specific. For example, &quot;After getting an image with Java Media&#39;s FrameGrabbingControl, how do I stop the camera?&quot;"},{"owner":{"account_id":147727,"reputation":12641,"user_id":359035,"accept_rate":92,"display_name":"BillRobertson42"},"score":0,"creation_date":1395593934,"post_id":22592401,"comment_id":34398300,"body_markdown":"It looks like your `broadcast` object should implement the [Controller interface](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html) and you can call the [close](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html) method on that.","body":"It looks like your <code>broadcast</code> object should implement the <a href=\"http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html\" rel=\"nofollow noreferrer\">Controller interface</a> and you can call the <a href=\"http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/index.html\" rel=\"nofollow noreferrer\">close</a> method on that."}],"owner":{"account_id":4140837,"reputation":1308,"user_id":3396216,"accept_rate":88,"display_name":"Shakir Ahamed"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665663846,"creation_date":1395586059,"question_id":22592401,"body_markdown":"I want to capture an image using an available webcam. I have successfully accessed the webcam but I couldn&#39;t stop the webcam process. I want to stop the webcam process using a stop button. How can I accomplish this? This my code:\r\n\r\n    public Component componen() throws IOException , NoPlayerException, CannotRealizeException\r\n            {\r\n                \r\n                Component comp_video;\r\n                MediaLocator loo = new MediaLocator(&quot;vfw://0&quot;);\r\n                try {\r\n                    broadcast = Manager.createRealizedPlayer(loo);\r\n                } catch (IOException ex) {\r\n                    Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\r\n                } catch (NoPlayerException ex) {\r\n                    Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\r\n                } catch (CannotRealizeException ex) {\r\n                    Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\r\n                }\r\n                broadcast.start();\r\n                \r\n                if((comp_video = broadcast.getVisualComponent()) != null)\r\n                {\r\n                    comp_video.setSize(321,228);\r\n                    return comp_video;\r\n                    \r\n                }\r\n                else\r\n                {\r\n                         return null;\r\n                }\r\n    \r\n        }\r\n\r\n    public void capture_image()\r\n    {\r\n        FrameGrabbingControl grab = (FrameGrabbingControl)    broadcast.getControl(&quot;javax.media.control.FrameGrabbingControl&quot;);\r\n         javax.media.Buffer buff = grab.grabFrame();\r\n         \r\n         BufferToImage buffer =new BufferToImage((VideoFormat) buff.getFormat());\r\n         img = buffer.createImage(buff);\r\n         \r\n        }\r\n\r\n    public void set_iamge_label(final JLabel lb)\r\n    {\r\n        Thread web = new Thread(){\r\n            \r\n        public void run(){\r\n       \r\n            \r\n        capture_image();\r\n        Rectangle rect = lb.getBounds();\r\n        Image img1 = img.getScaledInstance(rect.width,rect.height,Image.SCALE_DEFAULT);\r\n        lb.setIcon(new javax.swing.ImageIcon(img1));  \r\n        }\r\n        };\r\n        \r\n        web.start();\r\n    }\r\n    \r\n      ","title":"Stop process of webcam in java netbeans","body":"<p>I want to capture an image using an available webcam. I have successfully accessed the webcam but I couldn't stop the webcam process. I want to stop the webcam process using a stop button. How can I accomplish this? This my code:</p>\n\n<pre><code>public Component componen() throws IOException , NoPlayerException, CannotRealizeException\n        {\n\n            Component comp_video;\n            MediaLocator loo = new MediaLocator(\"vfw://0\");\n            try {\n                broadcast = Manager.createRealizedPlayer(loo);\n            } catch (IOException ex) {\n                Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\n            } catch (NoPlayerException ex) {\n                Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\n            } catch (CannotRealizeException ex) {\n                Logger.getLogger(CapturImage.class.getName()).log(Level.SEVERE, null, ex);\n            }\n            broadcast.start();\n\n            if((comp_video = broadcast.getVisualComponent()) != null)\n            {\n                comp_video.setSize(321,228);\n                return comp_video;\n\n            }\n            else\n            {\n                     return null;\n            }\n\n    }\n\npublic void capture_image()\n{\n    FrameGrabbingControl grab = (FrameGrabbingControl)    broadcast.getControl(\"javax.media.control.FrameGrabbingControl\");\n     javax.media.Buffer buff = grab.grabFrame();\n\n     BufferToImage buffer =new BufferToImage((VideoFormat) buff.getFormat());\n     img = buffer.createImage(buff);\n\n    }\n\npublic void set_iamge_label(final JLabel lb)\n{\n    Thread web = new Thread(){\n\n    public void run(){\n\n\n    capture_image();\n    Rectangle rect = lb.getBounds();\n    Image img1 = img.getScaledInstance(rect.width,rect.height,Image.SCALE_DEFAULT);\n    lb.setIcon(new javax.swing.ImageIcon(img1));  \n    }\n    };\n\n    web.start();\n}\n</code></pre>\n"},{"tags":["java","spring","validation","json-view"],"comments":[{"owner":{"account_id":4989848,"reputation":1593,"user_id":4012408,"display_name":"Rafael Guillen"},"score":0,"creation_date":1665584993,"post_id":74043530,"comment_id":130735921,"body_markdown":"Check this out: https://stackoverflow.com/questions/9257673/conditional-validations-in-spring","body":"Check this out: <a href=\"https://stackoverflow.com/questions/9257673/conditional-validations-in-spring\" title=\"conditional validations in spring\">stackoverflow.com/questions/9257673/&hellip;</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665585018,"post_id":74043530,"comment_id":130735932,"body_markdown":"I think &quot;validation groups&quot; offers the same functionality (for validation) as &quot;json views&quot; (for json;)","body":"I think &quot;validation groups&quot; offers the same functionality (for validation) as &quot;json views&quot; (for json;)"},{"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"score":1,"creation_date":1665585247,"post_id":74043530,"comment_id":130736041,"body_markdown":"@xerx593 Yes, but I can&#39;t use my views as groups: `groups = { View.Admin.class, View.Tech.class }`","body":"@xerx593 Yes, but I can&#39;t use my views as groups: <code>groups = { View.Admin.class, View.Tech.class }</code>"},{"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"score":0,"creation_date":1665585440,"post_id":74043530,"comment_id":130736125,"body_markdown":"@RafaelGuillen I looked at it but I have to pass the group in @Validated but now I want it to be dynamic depending on my user&#39;s role, that&#39;s my problem. I also looked at using `@GroupSequenceProvider`, but I can&#39;t @Autowired my user in the custom provider :/","body":"@RafaelGuillen I looked at it but I have to pass the group in @Validated but now I want it to be dynamic depending on my user&#39;s role, that&#39;s my problem. I also looked at using <code>@GroupSequenceProvider</code>, but I can&#39;t @Autowired my user in the custom provider :/"}],"answers":[{"tags":[],"owner":{"account_id":26562047,"reputation":61,"user_id":20189731,"display_name":"mildgrey"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665587414,"creation_date":1665587366,"answer_id":74044171,"question_id":74043530,"body_markdown":"use @JsonIgnore may help you to achieve,because it will ignore the column and validation annotation as well","title":"Disable validation annotation when filtering with Jackson @JsonView","body":"<p>use @JsonIgnore may help you to achieve,because it will ignore the column and validation annotation as well</p>\n"}],"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665663706,"creation_date":1665584703,"question_id":74043530,"body_markdown":"I have the same form that displays more or less fields depending on the user&#39;s role. So I use [@JsonView][1] to hide/ignore the fields that are not related to the current user&#39;s role. But the validation is still enabled and the `@NotNull` rule is triggered.\r\n\r\n```\r\n@JsonView({View.Admin.class, View.Tech.class})\r\n@NotNull\r\nprivate String name;\r\n```\r\n\r\nI would like to find a way to enable or disable some validation annotations for example when the user&#39;s role is not administrator.\r\n\r\nIs it possible to use these view (`View.Admin.class` / `View.Tech.class`) as a group for validation please?\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-security-role-filter-json#how-to-integrate","title":"Disable validation annotation when filtering with Jackson @JsonView","body":"<p>I have the same form that displays more or less fields depending on the user's role. So I use <a href=\"https://www.baeldung.com/spring-security-role-filter-json#how-to-integrate\" rel=\"nofollow noreferrer\">@JsonView</a> to hide/ignore the fields that are not related to the current user's role. But the validation is still enabled and the <code>@NotNull</code> rule is triggered.</p>\n<pre><code>@JsonView({View.Admin.class, View.Tech.class})\n@NotNull\nprivate String name;\n</code></pre>\n<p>I would like to find a way to enable or disable some validation annotations for example when the user's role is not administrator.</p>\n<p>Is it possible to use these view (<code>View.Admin.class</code> / <code>View.Tech.class</code>) as a group for validation please?</p>\n"},{"tags":["java","spring","enums","spring-el"],"comments":[{"owner":{"account_id":26552394,"reputation":306,"user_id":20181494,"display_name":"Janil101"},"score":0,"creation_date":1665661403,"post_id":74054826,"comment_id":130754551,"body_markdown":"how the getCode get it&#39;s value?","body":"how the getCode get it&#39;s value?"},{"owner":{"account_id":26562666,"reputation":119,"user_id":20190240,"display_name":"Jalena"},"score":0,"creation_date":1665663521,"post_id":74054826,"comment_id":130755281,"body_markdown":"You have to just change `exp` to `#{#targetType.getCode()}`","body":"You have to just change <code>exp</code> to <code>#{#targetType.getCode()}</code>"}],"answers":[{"tags":[],"owner":{"account_id":16076957,"reputation":575,"user_id":11603961,"display_name":"Mario Klisanic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665663352,"creation_date":1665662370,"answer_id":74055400,"question_id":74054826,"body_markdown":"    String exp = &quot;#targetType.getCode()&quot;;\r\n    SpelExpressionParser parser = new SpelExpressionParser();\r\n    Expression expression = parser.parseExpression(exp);\r\n    EvaluationContext context = new StandardEvaluationContext();\r\n    context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\r\n    String value = expression.getValue(context, String.class);\r\n    System.out.println(value);  // &lt;--- prints out 1\r\n\r\nIs there a specific reason you were passing `new TemplateParserContext()` to the `parseExpression()` method? Because when you do pass that argument it means you want to parse template and that is not what you are doing in this case.\r\n\r\n&gt; Supports parsing templates as well as standard expression strings.\r\n\r\n^ Taken from [docs][1] we can clearly see that this method can be used when parsing both templates and expression strings, you were using the right function with wrong parameters.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/expression/ExpressionParser.html","title":"Something wrong when i used SpelExpressionParser to parse a expression with enum","body":"<pre><code>String exp = &quot;#targetType.getCode()&quot;;\nSpelExpressionParser parser = new SpelExpressionParser();\nExpression expression = parser.parseExpression(exp);\nEvaluationContext context = new StandardEvaluationContext();\ncontext.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\nString value = expression.getValue(context, String.class);\nSystem.out.println(value);  // &lt;--- prints out 1\n</code></pre>\n<p>Is there a specific reason you were passing <code>new TemplateParserContext()</code> to the <code>parseExpression()</code> method? Because when you do pass that argument it means you want to parse template and that is not what you are doing in this case.</p>\n<blockquote>\n<p>Supports parsing templates as well as standard expression strings.</p>\n</blockquote>\n<p>^ Taken from <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/expression/ExpressionParser.html\" rel=\"nofollow noreferrer\">docs</a> we can clearly see that this method can be used when parsing both templates and expression strings, you were using the right function with wrong parameters.</p>\n"},{"tags":[],"owner":{"account_id":26552394,"reputation":306,"user_id":20181494,"display_name":"Janil101"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665663110,"creation_date":1665663110,"answer_id":74055574,"question_id":74054826,"body_markdown":"try this it is working\r\n```\r\npackage com.example.test;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonValue;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport org.springframework.expression.EvaluationContext;\r\nimport org.springframework.expression.Expression;\r\nimport org.springframework.expression.common.TemplateParserContext;\r\nimport org.springframework.expression.spel.standard.SpelExpressionParser;\r\nimport org.springframework.expression.spel.support.StandardEvaluationContext;\r\n\r\npublic class SpELTest {\r\n    public static void main(String[] args) {\r\n        EvaluationContext context = new StandardEvaluationContext();\r\n        context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\r\n        String exp = &quot;#targetType.getCode()&quot;;\r\n        SpelExpressionParser parser = new SpelExpressionParser();\r\n        Expression expression = parser.parseExpression(exp);\r\n        // SpelEvaluationException: EL1007E: Property or field &#39;targetType&#39; cannot be found on null\r\n        String value = expression.getValue(context,String.class);\r\n        System.out.println(value);\r\n    }\r\n    @Getter\r\n    @AllArgsConstructor\r\n    public enum FavorTargetType implements BaseEnum {\r\n        ARTICLE(1, &quot;article&quot;),\r\n        POSTS(2, &quot;posts&quot;),\r\n        COMMENT(3, &quot;comment&quot;)\r\n        ;\r\n        private final int code;\r\n        private final String name;\r\n    }\r\n    public interface BaseEnum {\r\n        @JsonValue\r\n        int getCode();\r\n        String getName();\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n```","title":"Something wrong when i used SpelExpressionParser to parse a expression with enum","body":"<p>try this it is working</p>\n<pre><code>package com.example.test;\n\nimport com.fasterxml.jackson.annotation.JsonValue;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport org.springframework.expression.EvaluationContext;\nimport org.springframework.expression.Expression;\nimport org.springframework.expression.common.TemplateParserContext;\nimport org.springframework.expression.spel.standard.SpelExpressionParser;\nimport org.springframework.expression.spel.support.StandardEvaluationContext;\n\npublic class SpELTest {\n    public static void main(String[] args) {\n        EvaluationContext context = new StandardEvaluationContext();\n        context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\n        String exp = &quot;#targetType.getCode()&quot;;\n        SpelExpressionParser parser = new SpelExpressionParser();\n        Expression expression = parser.parseExpression(exp);\n        // SpelEvaluationException: EL1007E: Property or field 'targetType' cannot be found on null\n        String value = expression.getValue(context,String.class);\n        System.out.println(value);\n    }\n    @Getter\n    @AllArgsConstructor\n    public enum FavorTargetType implements BaseEnum {\n        ARTICLE(1, &quot;article&quot;),\n        POSTS(2, &quot;posts&quot;),\n        COMMENT(3, &quot;comment&quot;)\n        ;\n        private final int code;\n        private final String name;\n    }\n    public interface BaseEnum {\n        @JsonValue\n        int getCode();\n        String getName();\n    }\n\n}\n\n\n\n\n\n</code></pre>\n"}],"owner":{"account_id":24772763,"reputation":1,"user_id":18656443,"display_name":"etherealss"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665663352,"creation_date":1665659520,"question_id":74054826,"body_markdown":"Code show as below:\r\n```java\r\npublic class SpELTest {\r\n    public static void main(String[] args) {\r\n        EvaluationContext context = new StandardEvaluationContext();\r\n        context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\r\n        String exp = &quot;#{targetType.getCode()}&quot;;\r\n        SpelExpressionParser parser = new SpelExpressionParser();\r\n        Expression expression = parser.parseExpression(exp, new TemplateParserContext());\r\n        // SpelEvaluationException: EL1007E: Property or field &#39;targetType&#39; cannot be found on null\r\n        String value = expression.getValue(context, String.class);\r\n        System.out.println(value);\r\n    }\r\n}\r\n\r\n@Getter\r\n@AllArgsConstructor\r\npublic enum FavorTargetType implements BaseEnum {\r\n    ARTICLE(1, &quot;article&quot;),\r\n    POSTS(2, &quot;posts&quot;),\r\n    COMMENT(3, &quot;comment&quot;)\r\n    ;\r\n    private final int code;\r\n    private final String name;\r\n}\r\npublic interface BaseEnum {\r\n    @JsonValue\r\n    int getCode();\r\n    String getName();\r\n}\r\n```\r\nWhen I run the code I will get a SpelEvaluationException: EL1007E: Property or field &#39;targetType&#39; cannot be found on null. But as you can see, targetType is not null. So where am I going wrong? Please help me! Thanks!","title":"Something wrong when i used SpelExpressionParser to parse a expression with enum","body":"<p>Code show as below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SpELTest {\n    public static void main(String[] args) {\n        EvaluationContext context = new StandardEvaluationContext();\n        context.setVariable(&quot;targetType&quot;, FavorTargetType.ARTICLE);\n        String exp = &quot;#{targetType.getCode()}&quot;;\n        SpelExpressionParser parser = new SpelExpressionParser();\n        Expression expression = parser.parseExpression(exp, new TemplateParserContext());\n        // SpelEvaluationException: EL1007E: Property or field 'targetType' cannot be found on null\n        String value = expression.getValue(context, String.class);\n        System.out.println(value);\n    }\n}\n\n@Getter\n@AllArgsConstructor\npublic enum FavorTargetType implements BaseEnum {\n    ARTICLE(1, &quot;article&quot;),\n    POSTS(2, &quot;posts&quot;),\n    COMMENT(3, &quot;comment&quot;)\n    ;\n    private final int code;\n    private final String name;\n}\npublic interface BaseEnum {\n    @JsonValue\n    int getCode();\n    String getName();\n}\n</code></pre>\n<p>When I run the code I will get a SpelEvaluationException: EL1007E: Property or field 'targetType' cannot be found on null. But as you can see, targetType is not null. So where am I going wrong? Please help me! Thanks!</p>\n"},{"tags":["java","nullpointerexception","nodes"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":5,"creation_date":1665475977,"post_id":74024956,"comment_id":130703057,"body_markdown":"If something throws a `NullPointerException`, don&#39;t ignore it: fix it.","body":"If something throws a <code>NullPointerException</code>, don&#39;t ignore it: fix it."},{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1665476548,"post_id":74024956,"comment_id":130703272,"body_markdown":"The code with all the null checks is verbose, but it&#39;s not inefficient.","body":"The code with all the null checks is verbose, but it&#39;s not inefficient."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1665476070,"creation_date":1665476070,"answer_id":74024999,"question_id":74024956,"body_markdown":"&gt; How should i go about this?\r\n\r\nDon&#39;t. Just don&#39;t. Ignoring (or attempting to ignore) exceptions is not a good practice.\r\n\r\n&gt; This seems like inefficient code.\r\n\r\nIt&#39;s not. Checking if something is null is _vastly_ more efficient than creating a `NullPointerException`.\r\n\r\nConsider that creating an exception requires the JVM to walk all the way back up the stack to create the stack trace; compare that to a single bytecode instruction to check if a thing is null.","title":"How to ignore statements throwing NullPointerException in java?","body":"<blockquote>\n<p>How should i go about this?</p>\n</blockquote>\n<p>Don't. Just don't. Ignoring (or attempting to ignore) exceptions is not a good practice.</p>\n<blockquote>\n<p>This seems like inefficient code.</p>\n</blockquote>\n<p>It's not. Checking if something is null is <em>vastly</em> more efficient than creating a <code>NullPointerException</code>.</p>\n<p>Consider that creating an exception requires the JVM to walk all the way back up the stack to create the stack trace; compare that to a single bytecode instruction to check if a thing is null.</p>\n"},{"tags":[],"owner":{"account_id":1948681,"reputation":522,"user_id":1753273,"accept_rate":86,"display_name":"agaonsindhe"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1665663280,"creation_date":1665476135,"answer_id":74025009,"question_id":74024956,"body_markdown":"NullPointerExceptions must be fixed. \r\nUse Optional from Java 8 to effectively handle such situations.","title":"How to ignore statements throwing NullPointerException in java?","body":"<p>NullPointerExceptions must be fixed.\nUse Optional from Java 8 to effectively handle such situations.</p>\n"}],"owner":{"account_id":14110570,"reputation":1,"user_id":10193534,"display_name":"Ashish verma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1665663280,"creation_date":1665475891,"question_id":74024956,"body_markdown":"I have a linked list like structure of Node objects.\r\n\r\n```\r\nclass Node {\r\n    int key;\r\n    Node prev;   //previous Node\r\n    Node next;   //next Node\r\n}\r\n```\r\n\r\nNow, to delete a node N of this chain, there are four cases, N.prev being null, N.next being null, both of them being null or neither of them. It leads to four checks in code.\r\n\r\n```\r\nvoid delete(Node N) {\r\n    Node Prev = N.prev;\r\n    Node Next = N.next;\r\n\r\n    //Case: N is the only node in list\r\n    if (Prev == null &amp;&amp; Next == null) {\r\n        TreeHead = null;          //Treehead is the first Node of list\r\n    }\r\n    //Case: N is the starting node\r\n    else if (Prev == null) {\r\n        Next.prev = null;\r\n        TreeHead = n;\r\n    }\r\n    //Case: N is the last node\r\n    else if (Next == null) {\r\n        Prev.next = null;\r\n    }\r\n    //Case: N is neither first nor last\r\n    else {\r\n        Prev.next = Next;\r\n        Next.prev = Prev;\r\n    }\r\n}\r\n```\r\nThis seems like inefficient code. I can write it like this(see below), but it will throw NullPointerException when an property of null object is accessed. I want to just ignore the statement if the object is null and move onto next line. How should i go about this?\r\n```\r\nstatic void delete(Node N) {\r\n    Node Prev = N.prev;\r\n    Node Next = N.next;\r\n\r\n    if(Next == null &amp;&amp; Prev == null) {TreeHead = null;return;}\r\n    Prev.next = Next;\r\n    Next.prev = Prev;\r\n    //if Next becomes the starting node\r\n    if(Next.prev == null) TreeHead = Next;\r\n}\r\n```","title":"How to ignore statements throwing NullPointerException in java?","body":"<p>I have a linked list like structure of Node objects.</p>\n<pre><code>class Node {\n    int key;\n    Node prev;   //previous Node\n    Node next;   //next Node\n}\n</code></pre>\n<p>Now, to delete a node N of this chain, there are four cases, N.prev being null, N.next being null, both of them being null or neither of them. It leads to four checks in code.</p>\n<pre><code>void delete(Node N) {\n    Node Prev = N.prev;\n    Node Next = N.next;\n\n    //Case: N is the only node in list\n    if (Prev == null &amp;&amp; Next == null) {\n        TreeHead = null;          //Treehead is the first Node of list\n    }\n    //Case: N is the starting node\n    else if (Prev == null) {\n        Next.prev = null;\n        TreeHead = n;\n    }\n    //Case: N is the last node\n    else if (Next == null) {\n        Prev.next = null;\n    }\n    //Case: N is neither first nor last\n    else {\n        Prev.next = Next;\n        Next.prev = Prev;\n    }\n}\n</code></pre>\n<p>This seems like inefficient code. I can write it like this(see below), but it will throw NullPointerException when an property of null object is accessed. I want to just ignore the statement if the object is null and move onto next line. How should i go about this?</p>\n<pre><code>static void delete(Node N) {\n    Node Prev = N.prev;\n    Node Next = N.next;\n\n    if(Next == null &amp;&amp; Prev == null) {TreeHead = null;return;}\n    Prev.next = Next;\n    Next.prev = Prev;\n    //if Next becomes the starting node\n    if(Next.prev == null) TreeHead = Next;\n}\n</code></pre>\n"},{"tags":["java","yaml","snakeyaml"],"comments":[{"owner":{"account_id":20146581,"reputation":3244,"user_id":14774959,"display_name":"ClaudiaR"},"score":0,"creation_date":1665737451,"post_id":74055464,"comment_id":130772790,"body_markdown":"Please show your current attempt and the exception that you get","body":"Please show your current attempt and the exception that you get"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1665737456,"post_id":74055464,"comment_id":130772793,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1665833180,"post_id":74055464,"comment_id":130793883,"body_markdown":"In particular, you need to show what you have implemented to process those `!include` tags.","body":"In particular, you need to show what you have implemented to process those <code>!include</code> tags."}],"owner":{"account_id":23791468,"reputation":11,"user_id":17802855,"display_name":"Harish Algat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665662621,"creation_date":1665662621,"question_id":74055464,"body_markdown":"I am trying to parse below yaml file content to java object but getting excepion.\r\n\r\n\r\nthis is yaml file content \r\n\r\nbeforeSuiteActions:\r\n  - !include \\commonSteps\\getConfig.yaml\r\n  - !include \\commonSteps\\adminLogin.yaml\r\n  - !include \\commonSteps\\login.yaml\r\n  - !include \\commonSteps\\getDeviceDomain.yaml\r\n  - !include \\commonSteps\\getLinearChannels.yaml\r\n  - !include \\commonSteps\\getAssetList.yaml\r\n\r\n\r\ncan anyone suggest why it is giving exception","title":"SnakeYaml parsing Yaml files to java Objects","body":"<p>I am trying to parse below yaml file content to java object but getting excepion.</p>\n<p>this is yaml file content</p>\n<p>beforeSuiteActions:</p>\n<ul>\n<li>!include \\commonSteps\\getConfig.yaml</li>\n<li>!include \\commonSteps\\adminLogin.yaml</li>\n<li>!include \\commonSteps\\login.yaml</li>\n<li>!include \\commonSteps\\getDeviceDomain.yaml</li>\n<li>!include \\commonSteps\\getLinearChannels.yaml</li>\n<li>!include \\commonSteps\\getAssetList.yaml</li>\n</ul>\n<p>can anyone suggest why it is giving exception</p>\n"},{"tags":["java","android","location","currency"],"comments":[{"owner":{"account_id":8130642,"reputation":108,"user_id":6124047,"display_name":"ntepp jean marc"},"score":0,"creation_date":1663060590,"post_id":73700018,"comment_id":130144562,"body_markdown":"You can use Java [java.util.Currency](https://docs.oracle.com/javase/7/docs/api/java/util/Currency.html) class `Currency.getInstance(Locale.US).getCurrencyCode()`","body":"You can use Java <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Currency.html\" rel=\"nofollow noreferrer\">java.util.Currency</a> class <code>Currency.getInstance(Locale.US).getCurrencyCode()</code>"}],"answers":[{"tags":[],"owner":{"account_id":18702501,"reputation":23,"user_id":13634409,"display_name":"Hatem Darwish"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665662586,"creation_date":1663060227,"answer_id":73700355,"question_id":73700018,"body_markdown":"You can use ([Locale][1] And [Currency][2]) classes to find currency code.\r\n\r\nLike:\r\n\r\n    final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n    final String simCountry = tm.getSimCountryIso();\r\n    if (simCountry != null &amp;&amp; simCountry.length() == 2) { \r\n        String country_code = simCountry.toLowerCase(Locale.US);\r\n        Currency.getInstance(new Locale(&quot;&quot;, country_code)).getCurrencyCode()\r\n    }\r\n\r\n\r\n    //  Currency.getInstance(new Locale(&quot;&quot;, &quot;us&quot;)).getCurrencyCode() -- This Return USD\r\n    //  Currency.getInstance(new Locale(&quot;&quot;, &quot;in&quot;)).getCurrencyCode() -- This Retrun INR\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Locale.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/Currency.html","title":"How to get currency according to country code in Android?","body":"<p>You can use (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Locale.html\" rel=\"nofollow noreferrer\">Locale</a> And <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Currency.html\" rel=\"nofollow noreferrer\">Currency</a>) classes to find currency code.</p>\n<p>Like:</p>\n<pre><code>final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\nfinal String simCountry = tm.getSimCountryIso();\nif (simCountry != null &amp;&amp; simCountry.length() == 2) { \n    String country_code = simCountry.toLowerCase(Locale.US);\n    Currency.getInstance(new Locale(&quot;&quot;, country_code)).getCurrencyCode()\n}\n\n\n//  Currency.getInstance(new Locale(&quot;&quot;, &quot;us&quot;)).getCurrencyCode() -- This Return USD\n//  Currency.getInstance(new Locale(&quot;&quot;, &quot;in&quot;)).getCurrencyCode() -- This Retrun INR\n</code></pre>\n"}],"owner":{"account_id":14058986,"reputation":47,"user_id":10155542,"display_name":"Mukesh Roy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":468,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665662586,"creation_date":1663058737,"question_id":73700018,"body_markdown":"In below code I can get country code (2 alpha). Is it possible to get currency according to the country code? If yes please tell me how? I don&#39;t want to add any runtime permission for this app.\r\n\r\n    final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n    final String simCountry = tm.getSimCountryIso();\r\n    if (simCountry != null &amp;&amp; simCountry.length() == 2) { // SIM country code is available\r\n        String country_code = simCountry.toLowerCase(Locale.US);\r\n        //return result - &quot;in&quot;. (for India)\r\n        //here I want to get the currency according to the country code\r\n    }","title":"How to get currency according to country code in Android?","body":"<p>In below code I can get country code (2 alpha). Is it possible to get currency according to the country code? If yes please tell me how? I don't want to add any runtime permission for this app.</p>\n<pre><code>final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\nfinal String simCountry = tm.getSimCountryIso();\nif (simCountry != null &amp;&amp; simCountry.length() == 2) { // SIM country code is available\n    String country_code = simCountry.toLowerCase(Locale.US);\n    //return result - &quot;in&quot;. (for India)\n    //here I want to get the currency according to the country code\n}\n</code></pre>\n"},{"tags":["java","spring","multithreading","concurrency"],"comments":[{"owner":{"account_id":26301533,"reputation":1119,"user_id":19966820,"display_name":"YJR"},"score":1,"creation_date":1665650566,"post_id":74052686,"comment_id":130751050,"body_markdown":"I can not understand what you want to do and why do you not using repo.save?","body":"I can not understand what you want to do and why do you not using repo.save?"},{"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"score":0,"creation_date":1665650739,"post_id":74052686,"comment_id":130751106,"body_markdown":"@VJR the executor service is called twice right so I want 2 records to be inserted. Now one record is inserted, for the second one I get duplicate key exception","body":"@VJR the executor service is called twice right so I want 2 records to be inserted. Now one record is inserted, for the second one I get duplicate key exception"},{"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"score":0,"creation_date":1665655024,"post_id":74052686,"comment_id":130752490,"body_markdown":"@VJR The question is about concurrent insertion and not about jpa save method!. I have updated my question removing  the custom insert for the sake of simplicity","body":"@VJR The question is about concurrent insertion and not about jpa save method!. I have updated my question removing  the custom insert for the sake of simplicity"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665656606,"post_id":74052686,"comment_id":130753013,"body_markdown":"Please read https://vladmihalcea.com/jpa-entity-version-property-hibernate/ (esp. the (NOT) &quot;Changing the entity version&quot; part;)","body":"Please read <a href=\"https://vladmihalcea.com/jpa-entity-version-property-hibernate/\" rel=\"nofollow noreferrer\">vladmihalcea.com/jpa-entity-version-property-hibernate</a> (esp. the (NOT) &quot;Changing the entity version&quot; part;)"}],"answers":[{"tags":[],"owner":{"account_id":26564177,"reputation":36,"user_id":20191548,"display_name":"AbhishekVinayak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665658543,"creation_date":1665658543,"answer_id":74054605,"question_id":74052686,"body_markdown":"@Version annotation is making the version header values lockup and generating the same values. Here is the use case of [@Version][1] annotation. Try making it a serial generated value.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/5/api/javax/persistence/Version.html#:~:text=Annotation%20Type%20Version&amp;text=This%20annotation%20specifies%20the%20version,and%20for%20optimistic%20concurrency%20control.","title":"Insert Concurrently in jpa","body":"<p>@Version annotation is making the version header values lockup and generating the same values. Here is the use case of <a href=\"https://docs.oracle.com/javaee/5/api/javax/persistence/Version.html#:%7E:text=Annotation%20Type%20Version&amp;text=This%20annotation%20specifies%20the%20version,and%20for%20optimistic%20concurrency%20control.\" rel=\"nofollow noreferrer\">@Version</a> annotation. Try making it a serial generated value.</p>\n"}],"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1665662583,"creation_date":1665649796,"question_id":74052686,"body_markdown":"I am working on a project where we have to insert record into a table concurrently.\r\n\r\nexample if 2 instances are inserting the data into a table then the execution should be concurrent. I want both the records to be inserted into the database.\r\n\r\nBelow is the entity class\r\n\r\n    @Entity\r\n    public class Department {\r\n      @Id\r\n      @GeneratedValue\r\n      private Integer id;\r\n      @Version\r\n      private long version;\r\n      private Integer address\r\n      private String name;\r\n       \r\n    }\r\n\r\n Below is the Executor service\r\n\r\n  \r\n\r\n \r\n\r\n    public class EmployeeUpdateWithoutForceIncrement {\r\n    \r\n    \r\n      public static void main(String[] args) throws Exception {\r\n          ExecutorService es = Executors.newFixedThreadPool(2);\r\n         \r\n              \r\n              es.execute(() -&gt; {\r\n                  saveEmployee();\r\n              });\r\n              es.execute(() -&gt; {\r\n                 saveEmployee();\r\n              });\r\n              es.shutdown();\r\n              es.awaitTermination(10, TimeUnit.SECONDS);\r\n          } \r\n    }\r\nI have not added the static main class here in order to keep it short\r\n\r\n   \r\n\r\n  \r\n\r\n   \r\n\r\n    saveEmployee(){\r\n            List&lt;Employee&gt; elist=rpo.findAll();\r\n            Employee e=elist.get(el.size()-1);\r\n            e.setAddress(e.getAddress()+1);\r\n            repo.save(e);\r\n            }\r\n**Excepted Output**\r\n  \r\n\r\n        id  name  Address\r\n        1   test    1\r\n        2   test2   2\r\n        3   test2   3\r\n\r\n**Actual Output**\r\n  \r\n    id  name  Address\r\n    1   test    1\r\n    2   test2   2\r\n    3   test2   2\r\n\r\n\r\n How can I make this work. I want both the record to be inserted with incremental address.\r\nAddress should be max value of previous record stored in the db\r\n","title":"Insert Concurrently in jpa","body":"<p>I am working on a project where we have to insert record into a table concurrently.</p>\n<p>example if 2 instances are inserting the data into a table then the execution should be concurrent. I want both the records to be inserted into the database.</p>\n<p>Below is the entity class</p>\n<pre><code>@Entity\npublic class Department {\n  @Id\n  @GeneratedValue\n  private Integer id;\n  @Version\n  private long version;\n  private Integer address\n  private String name;\n   \n}\n</code></pre>\n<p>Below is the Executor service</p>\n<pre><code>public class EmployeeUpdateWithoutForceIncrement {\n\n\n  public static void main(String[] args) throws Exception {\n      ExecutorService es = Executors.newFixedThreadPool(2);\n     \n          \n          es.execute(() -&gt; {\n              saveEmployee();\n          });\n          es.execute(() -&gt; {\n             saveEmployee();\n          });\n          es.shutdown();\n          es.awaitTermination(10, TimeUnit.SECONDS);\n      } \n}\n</code></pre>\n<p>I have not added the static main class here in order to keep it short</p>\n<pre><code>saveEmployee(){\n        List&lt;Employee&gt; elist=rpo.findAll();\n        Employee e=elist.get(el.size()-1);\n        e.setAddress(e.getAddress()+1);\n        repo.save(e);\n        }\n</code></pre>\n<p><strong>Excepted Output</strong></p>\n<pre><code>    id  name  Address\n    1   test    1\n    2   test2   2\n    3   test2   3\n</code></pre>\n<p><strong>Actual Output</strong></p>\n<pre><code>id  name  Address\n1   test    1\n2   test2   2\n3   test2   2\n</code></pre>\n<p>How can I make this work. I want both the record to be inserted with incremental address.\nAddress should be max value of previous record stored in the db</p>\n"},{"tags":["java","android","android-studio","permissions","google-play-console"],"answers":[{"tags":[],"owner":{"account_id":18702501,"reputation":23,"user_id":13634409,"display_name":"Hatem Darwish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665662543,"creation_date":1665662220,"answer_id":74055364,"question_id":74054692,"body_markdown":"We cannot determine what if you collect user data from manifest file, but depend on your manifest.\r\n\r\nandroid.permission.ACCESS_NETWORK_STATE is needed for accessing ConnectivityManager (mainly for monitoring network connections in general), while android.permission.ACCESS_WIFI_STATE grants access to WifiManager (for managing all aspects of Wi-Fi connectivity in particular).\r\n\r\nIn the latest release of Google Play, Google removed the need to ask permission for internet as &quot;most apps need it anyways nowadays&quot;. However, for users who have older versions, it is still recommended to leave the code below in your manifest.\r\n\r\nIf the app doesn&#39;t contain any ads:\r\nYou can simply remove/ignore it by adding tools:node=&quot;remove&quot; in the AndroidManifest.xml file.\r\n\r\n    &lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot; tools:node=&quot;remove&quot;/&gt;\r\n\r\nEven if another third-party library asks for this specific permission, the build will be forced not to merge it in your final Manifest file. You can get more info from this [SO answer][1].\r\n\r\nAlso you can read about all permission from this [link][2].\r\n\r\nFinally, don&#39;t worry depend on your manifest they can&#39;t be determine if you collect user data or not.\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/39353173/android-find-out-which-third-party-library-is-requesting-a-permission/39353246#39353246\r\n  [2]: https://developer.android.com/reference/android/Manifest.permission","title":"What permissions are considered collection of users&#39; data?","body":"<p>We cannot determine what if you collect user data from manifest file, but depend on your manifest.</p>\n<p>android.permission.ACCESS_NETWORK_STATE is needed for accessing ConnectivityManager (mainly for monitoring network connections in general), while android.permission.ACCESS_WIFI_STATE grants access to WifiManager (for managing all aspects of Wi-Fi connectivity in particular).</p>\n<p>In the latest release of Google Play, Google removed the need to ask permission for internet as &quot;most apps need it anyways nowadays&quot;. However, for users who have older versions, it is still recommended to leave the code below in your manifest.</p>\n<p>If the app doesn't contain any ads:\nYou can simply remove/ignore it by adding tools:node=&quot;remove&quot; in the AndroidManifest.xml file.</p>\n<pre><code>&lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot; tools:node=&quot;remove&quot;/&gt;\n</code></pre>\n<p>Even if another third-party library asks for this specific permission, the build will be forced not to merge it in your final Manifest file. You can get more info from this <a href=\"https://stackoverflow.com/questions/39353173/android-find-out-which-third-party-library-is-requesting-a-permission/39353246#39353246\">SO answer</a>.</p>\n<p>Also you can read about all permission from this <a href=\"https://developer.android.com/reference/android/Manifest.permission\" rel=\"nofollow noreferrer\">link</a>.</p>\n<p>Finally, don't worry depend on your manifest they can't be determine if you collect user data or not.</p>\n"}],"owner":{"account_id":26581201,"reputation":17,"user_id":20205826,"display_name":"AlecW123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665662543,"creation_date":1665658954,"question_id":74054692,"body_markdown":"I have recently rolled out a simple app and it is currently still in review. When I filled out the questions I remember that I was asked whether my app collects data or not and I stated no. I am wondering if I chose the right option since I am not so sure now.\r\n\r\nThese are my permissions in my manifest file:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot;/&gt;\r\n\r\nI also am not sure if this log code is considered collection of data which is part of my app.\r\n\r\n    Log.d(&quot;TAG&quot;, &quot;The interstitial ad wasn&#39;t ready yet.&quot;);\r\n\r\nand \r\n\r\n    Log.d(LOG_TAG, &quot;onStart&quot;);\r\n\r\nThese log code segments are the same ones available on the ad guide pages for android developers, I&#39;ve integrated, app open ads, interstitial and banner ads. Also all the permissions are purely to allow the user to be able to see the ads so I&#39;m not sure if this is considered collecting data. My application can work without any internet connection.\r\n\r\nI have also made my app available to users from the ages of 6 and above as I believe that it is simple enough to use. Do I need to add in any special code that asks for permission because of this or does my app have to be made specifically for a certain age group if its below the ages of 13? I read through the policies but I don&#39;t consider that I&#39;m collecting data or have violated any policies, or showing any type of inappropriate ads as I have disabled all these types of potential ads in my admob account for this specific ad. I&#39;m not sure if I&#39;ve done everything right or not, can someone tell me how this should be handled as I have not added any targeting code in my app. Its just the basic ad code that I have added to my app.","title":"What permissions are considered collection of users&#39; data?","body":"<p>I have recently rolled out a simple app and it is currently still in review. When I filled out the questions I remember that I was asked whether my app collects data or not and I stated no. I am wondering if I chose the right option since I am not so sure now.</p>\n<p>These are my permissions in my manifest file:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot;/&gt;\n</code></pre>\n<p>I also am not sure if this log code is considered collection of data which is part of my app.</p>\n<pre><code>Log.d(&quot;TAG&quot;, &quot;The interstitial ad wasn't ready yet.&quot;);\n</code></pre>\n<p>and</p>\n<pre><code>Log.d(LOG_TAG, &quot;onStart&quot;);\n</code></pre>\n<p>These log code segments are the same ones available on the ad guide pages for android developers, I've integrated, app open ads, interstitial and banner ads. Also all the permissions are purely to allow the user to be able to see the ads so I'm not sure if this is considered collecting data. My application can work without any internet connection.</p>\n<p>I have also made my app available to users from the ages of 6 and above as I believe that it is simple enough to use. Do I need to add in any special code that asks for permission because of this or does my app have to be made specifically for a certain age group if its below the ages of 13? I read through the policies but I don't consider that I'm collecting data or have violated any policies, or showing any type of inappropriate ads as I have disabled all these types of potential ads in my admob account for this specific ad. I'm not sure if I've done everything right or not, can someone tell me how this should be handled as I have not added any targeting code in my app. Its just the basic ad code that I have added to my app.</p>\n"},{"tags":["java","spring-boot","docker","gradle","apple-m1"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1652734015,"post_id":72264754,"comment_id":127673319,"body_markdown":"You should re-run this with --stacktrace and --debug so that you can get more insight into this.","body":"You should re-run this with --stacktrace and --debug so that you can get more insight into this."}],"answers":[{"tags":[],"owner":{"account_id":17590903,"reputation":26,"user_id":12762794,"display_name":"Gerard Molina"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665662300,"creation_date":1665586867,"answer_id":74044048,"question_id":72264754,"body_markdown":"I had the same problem, and I had to do the following to make it work:\r\n\r\n1. Upgrading my [docker desktop][1] version seems to have fixed it.\r\n2. Using amd64 architecture (`amd64/gradle:7.5.0-jdk18-alpine`) for the docker image\r\n\r\n\r\nI hope it helps.\r\n\r\n\r\n  [1]: https://docs.docker.com/desktop/mac/apple-silicon/","title":"M1 Mac A problem occurred starting process &#39;Gradle build daemon&#39;","body":"<p>I had the same problem, and I had to do the following to make it work:</p>\n<ol>\n<li>Upgrading my <a href=\"https://docs.docker.com/desktop/mac/apple-silicon/\" rel=\"nofollow noreferrer\">docker desktop</a> version seems to have fixed it.</li>\n<li>Using amd64 architecture (<code>amd64/gradle:7.5.0-jdk18-alpine</code>) for the docker image</li>\n</ol>\n<p>I hope it helps.</p>\n"}],"owner":{"account_id":15366056,"reputation":47,"user_id":11286307,"display_name":"Shrek.Spongebob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2359,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74044048,"answer_count":1,"score":0,"last_activity_date":1665662300,"creation_date":1652730095,"question_id":72264754,"body_markdown":"I cloned [this repo](https://github.com/dantheman213/java-spring-gradle-docker-mvc-rest-starter-app) and attempted to run it on my M1 Mac by running the command `docker-compose up --build -d` in the terminal, and this was the output:\r\n\r\n```\r\nBuilding myapp\r\n[+] Building 144.5s (13/14)                                                     \r\n =&gt; [internal] load build definition from Dockerfile                       0.0s\r\n =&gt; =&gt; transferring dockerfile: 536B                                       0.0s\r\n =&gt; [internal] load .dockerignore                                          0.0s\r\n =&gt; =&gt; transferring context: 2B                                            0.0s\r\n =&gt; [internal] load metadata for docker.io/library/openjdk:13              1.0s\r\n =&gt; [auth] library/openjdk:pull token for registry-1.docker.io             0.0s\r\n =&gt; [internal] load build context                                          0.1s\r\n =&gt; =&gt; transferring context: 82.08kB                                       0.0s\r\n =&gt; [build 1/7] FROM docker.io/library/openjdk:13@sha256:08ab736e5b08665c  0.0s\r\n =&gt; CACHED [deploy 2/3] RUN mkdir -p /opt/app                              0.0s\r\n =&gt; CACHED [build 2/7] RUN mkdir -p /workspace                             0.0s\r\n =&gt; CACHED [build 3/7] WORKDIR /workspace                                  0.0s\r\n =&gt; [build 4/7] COPY . .                                                   0.0s\r\n =&gt; [build 5/7] RUN yum install -y wget unzip                             89.6s\r\n =&gt; [build 6/7] RUN wget -O /tmp/gradle.zip https://services.gradle.org/  49.4s\r\n =&gt; ERROR [build 7/7] RUN /opt/gradle/bin/gradle build                     4.4s \r\n------                                                                          \r\n &gt; [build 7/7] RUN /opt/gradle/bin/gradle build:                                \r\n#13 3.142                                                                       \r\n#13 3.142 Welcome to Gradle 6.1!                                                \r\n#13 3.142                                                                       \r\n#13 3.143 Here are the highlights of this release:                              \r\n#13 3.143  - Dependency cache is relocatable\r\n#13 3.144  - Configurable compilation order between Groovy, Java &amp; Scala\r\n#13 3.144  - New sample projects in Gradle&#39;s documentation\r\n#13 3.144 \r\n#13 3.145 For more details see https://docs.gradle.org/6.1/release-notes.html\r\n#13 3.145 \r\n#13 4.047 Starting a Gradle Daemon (subsequent builds will be faster)\r\n#13 4.342 \r\n#13 4.343 FAILURE: Build failed with an exception.\r\n#13 4.344 \r\n#13 4.344 * What went wrong:\r\n#13 4.345 A problem occurred starting process &#39;Gradle build daemon&#39;\r\n#13 4.345 \r\n#13 4.345 * Try:\r\n#13 4.346 Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n#13 4.348 \r\n#13 4.348 * Get more help at https://help.gradle.org\r\n------\r\nexecutor failed running [/bin/sh -c /opt/gradle/bin/gradle build]: exit code: 1\r\nERROR: Service &#39;myapp&#39; failed to build : Build failed\r\n```\r\nI added `platform: linux/amd64` to the docker-compose files, and made sure all the dependencies are installed, but I have no idea how to solve this problem. I tried terminating all Daemon processes, and this did not solve the problem either.","title":"M1 Mac A problem occurred starting process &#39;Gradle build daemon&#39;","body":"<p>I cloned <a href=\"https://github.com/dantheman213/java-spring-gradle-docker-mvc-rest-starter-app\" rel=\"nofollow noreferrer\">this repo</a> and attempted to run it on my M1 Mac by running the command <code>docker-compose up --build -d</code> in the terminal, and this was the output:</p>\n<pre><code>Building myapp\n[+] Building 144.5s (13/14)                                                     \n =&gt; [internal] load build definition from Dockerfile                       0.0s\n =&gt; =&gt; transferring dockerfile: 536B                                       0.0s\n =&gt; [internal] load .dockerignore                                          0.0s\n =&gt; =&gt; transferring context: 2B                                            0.0s\n =&gt; [internal] load metadata for docker.io/library/openjdk:13              1.0s\n =&gt; [auth] library/openjdk:pull token for registry-1.docker.io             0.0s\n =&gt; [internal] load build context                                          0.1s\n =&gt; =&gt; transferring context: 82.08kB                                       0.0s\n =&gt; [build 1/7] FROM docker.io/library/openjdk:13@sha256:08ab736e5b08665c  0.0s\n =&gt; CACHED [deploy 2/3] RUN mkdir -p /opt/app                              0.0s\n =&gt; CACHED [build 2/7] RUN mkdir -p /workspace                             0.0s\n =&gt; CACHED [build 3/7] WORKDIR /workspace                                  0.0s\n =&gt; [build 4/7] COPY . .                                                   0.0s\n =&gt; [build 5/7] RUN yum install -y wget unzip                             89.6s\n =&gt; [build 6/7] RUN wget -O /tmp/gradle.zip https://services.gradle.org/  49.4s\n =&gt; ERROR [build 7/7] RUN /opt/gradle/bin/gradle build                     4.4s \n------                                                                          \n &gt; [build 7/7] RUN /opt/gradle/bin/gradle build:                                \n#13 3.142                                                                       \n#13 3.142 Welcome to Gradle 6.1!                                                \n#13 3.142                                                                       \n#13 3.143 Here are the highlights of this release:                              \n#13 3.143  - Dependency cache is relocatable\n#13 3.144  - Configurable compilation order between Groovy, Java &amp; Scala\n#13 3.144  - New sample projects in Gradle's documentation\n#13 3.144 \n#13 3.145 For more details see https://docs.gradle.org/6.1/release-notes.html\n#13 3.145 \n#13 4.047 Starting a Gradle Daemon (subsequent builds will be faster)\n#13 4.342 \n#13 4.343 FAILURE: Build failed with an exception.\n#13 4.344 \n#13 4.344 * What went wrong:\n#13 4.345 A problem occurred starting process 'Gradle build daemon'\n#13 4.345 \n#13 4.345 * Try:\n#13 4.346 Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n#13 4.348 \n#13 4.348 * Get more help at https://help.gradle.org\n------\nexecutor failed running [/bin/sh -c /opt/gradle/bin/gradle build]: exit code: 1\nERROR: Service 'myapp' failed to build : Build failed\n</code></pre>\n<p>I added <code>platform: linux/amd64</code> to the docker-compose files, and made sure all the dependencies are installed, but I have no idea how to solve this problem. I tried terminating all Daemon processes, and this did not solve the problem either.</p>\n"},{"tags":["java","partial","composite-primary-key","google-cloud-spanner","mutation"],"answers":[{"tags":[],"owner":{"account_id":10326713,"reputation":3074,"user_id":7617957,"display_name":"Knut Olav L&#248;ite"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665662223,"creation_date":1665662223,"answer_id":74055368,"question_id":74054457,"body_markdown":"You can use `KeySet.prefixRange(..)` for this:\r\n\r\n```java\r\nMutation.delete(&quot;my-table&quot;, KeySet.prefixRange(Key.of(key1Value, key2Value)));\r\n```","title":"Google Spanner - Java Mutation - Delete rows with subset of composite key values","body":"<p>You can use <code>KeySet.prefixRange(..)</code> for this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Mutation.delete(&quot;my-table&quot;, KeySet.prefixRange(Key.of(key1Value, key2Value)));\n</code></pre>\n"}],"owner":{"account_id":8458977,"reputation":13,"user_id":6345348,"display_name":"Rajagopal M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74055368,"answer_count":1,"score":0,"last_activity_date":1665662223,"creation_date":1665657806,"question_id":74054457,"body_markdown":"I have a requirement where I need to delete rows based on the subset of composite keys via mutation.\r\n\r\nI have a table \r\n\r\n    CREATE TABLE FOO\r\n    (KEY1 INT64, KEY2 INT64, KEY3 INT64, VALUE STRING(100))\r\n    PRIMARY KEY (KEY1, KEY2, KEY3)\r\n\r\n\r\nHowever I need a mutation that should delete all rows matching KEY1 and KEY2 ignoring KEY3 value. I am trying to achieve with Mutation and I get this error\r\n\r\nMy Code:\r\n\r\n    Mutation.delete(&quot;FOO&quot;,\r\n                KeySet.newBuilder().\r\n                        addKey(Key.of(key1Value,\r\n                                key2Value))\r\n                        .build())\r\n\r\nError:\r\n&gt; com.google.cloud.spanner.SpannerException: FAILED_PRECONDITION:\r\n&gt; io.grpc.StatusRuntimeException: FAILED_PRECONDITION: Wrong number of\r\n&gt; key parts for FOO. Expected: 3. Got: [&quot;943598&quot;,&quot;213122&quot;]\r\n\r\n\r\nI have links for all composite keys but not a subset of them: https://stackoverflow.com/questions/45001488/deleting-row-using-composite-key","title":"Google Spanner - Java Mutation - Delete rows with subset of composite key values","body":"<p>I have a requirement where I need to delete rows based on the subset of composite keys via mutation.</p>\n<p>I have a table</p>\n<pre><code>CREATE TABLE FOO\n(KEY1 INT64, KEY2 INT64, KEY3 INT64, VALUE STRING(100))\nPRIMARY KEY (KEY1, KEY2, KEY3)\n</code></pre>\n<p>However I need a mutation that should delete all rows matching KEY1 and KEY2 ignoring KEY3 value. I am trying to achieve with Mutation and I get this error</p>\n<p>My Code:</p>\n<pre><code>Mutation.delete(&quot;FOO&quot;,\n            KeySet.newBuilder().\n                    addKey(Key.of(key1Value,\n                            key2Value))\n                    .build())\n</code></pre>\n<p>Error:</p>\n<blockquote>\n<p>com.google.cloud.spanner.SpannerException: FAILED_PRECONDITION:\nio.grpc.StatusRuntimeException: FAILED_PRECONDITION: Wrong number of\nkey parts for FOO. Expected: 3. Got: [&quot;943598&quot;,&quot;213122&quot;]</p>\n</blockquote>\n<p>I have links for all composite keys but not a subset of them: <a href=\"https://stackoverflow.com/questions/45001488/deleting-row-using-composite-key\">Deleting row using composite key</a></p>\n"},{"tags":["java","selenium","selenium-webdriver","webdriverwait"],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665661930,"creation_date":1665661930,"answer_id":74055296,"question_id":74055134,"body_markdown":"You should **never** mix implicit waits with explicit waits.  \r\nThat means if you defined non-default value for `implicitlyWait` you should not use `WebDriverWait` in that driver session.  \r\nSee the [official recommendations][1] saying `Warning: Do not mix implicit and explicit waits. Doing so can cause unpredictable wait times. For example, setting an implicit wait of 10 seconds and an explicit wait of 15 seconds could cause a timeout to occur after 20 seconds`.  \r\nNormally we always use `WebDriverWait` explicit waits only leaving `implicitlyWait` set to it default value `0`.  \r\nYou can see more explanations [here][2] and in more similar discussions.\r\n\r\n\r\n  [1]: https://www.selenium.dev/documentation/webdriver/waits/#:~:text=Warning%3A%20Do%20not%20mix%20implicit,to%20occur%20after%2020%20seconds.\r\n  [2]: https://stackoverflow.com/questions/29474296/clarification-of-the-cause-of-mixing-implicit-and-explicit-waits-in-selenium-doc","title":"How to declare WebDriver timeouts and how to manage their priority?","body":"<p>You should <strong>never</strong> mix implicit waits with explicit waits.<br />\nThat means if you defined non-default value for <code>implicitlyWait</code> you should not use <code>WebDriverWait</code> in that driver session.<br />\nSee the <a href=\"https://www.selenium.dev/documentation/webdriver/waits/#:%7E:text=Warning%3A%20Do%20not%20mix%20implicit,to%20occur%20after%2020%20seconds.\" rel=\"nofollow noreferrer\">official recommendations</a> saying <code>Warning: Do not mix implicit and explicit waits. Doing so can cause unpredictable wait times. For example, setting an implicit wait of 10 seconds and an explicit wait of 15 seconds could cause a timeout to occur after 20 seconds</code>.<br />\nNormally we always use <code>WebDriverWait</code> explicit waits only leaving <code>implicitlyWait</code> set to it default value <code>0</code>.<br />\nYou can see more explanations <a href=\"https://stackoverflow.com/questions/29474296/clarification-of-the-cause-of-mixing-implicit-and-explicit-waits-in-selenium-doc\">here</a> and in more similar discussions.</p>\n"}],"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74055296,"answer_count":1,"score":0,"last_activity_date":1665662194,"creation_date":1665661116,"question_id":74055134,"body_markdown":"For the webdriver I set up at some early point of code\r\n\r\n    driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);\r\n    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n    driver.manage().timeouts().setScriptTimeout(30, TimeUnit.SECONDS);\r\n\r\nthen later I declare something like that\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 5);\r\n    wait.until(bla bla\r\n\r\nor\r\n\r\n    new WebDriverWait(driver, 5).until(bla bla\r\n\r\nand it seems it doesn&#39;t have effect I expect because it waits longer then 5 sec\r\n\r\nWhat are the rulles for those timeouts?","title":"How to declare WebDriver timeouts and how to manage their priority?","body":"<p>For the webdriver I set up at some early point of code</p>\n<pre><code>driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);\ndriver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\ndriver.manage().timeouts().setScriptTimeout(30, TimeUnit.SECONDS);\n</code></pre>\n<p>then later I declare something like that</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 5);\nwait.until(bla bla\n</code></pre>\n<p>or</p>\n<pre><code>new WebDriverWait(driver, 5).until(bla bla\n</code></pre>\n<p>and it seems it doesn't have effect I expect because it waits longer then 5 sec</p>\n<p>What are the rulles for those timeouts?</p>\n"},{"tags":["java","docker","jvm","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642137042,"creation_date":1642137042,"answer_id":70706247,"question_id":70706125,"body_markdown":"These are not comparing the same thing.\r\n\r\nWhen running `jmap` or `jstack`, these attach to the existing process with PID 9, as listed in the first `jps` command.\r\n\r\nWhen running `java -XX:+PrintFlagsFinal -version`, this creates a new JVM process, and prints the information for that new process. Note that the original PID 9 process has a number of additional flags that can affect the calculated heap size.\r\n\r\nFor a more accurate comparison, you could add the `-XX:+PrintFlagsFinal` flags to the main command run when the container starts. I would expect this to match the values returned by `jinfo` and `jmap`.","title":"why the MaxHeapSize values are different between java -XX:+PrintFlagsFinal and jinfo -flag MaxHeapSize","body":"<p>These are not comparing the same thing.</p>\n<p>When running <code>jmap</code> or <code>jstack</code>, these attach to the existing process with PID 9, as listed in the first <code>jps</code> command.</p>\n<p>When running <code>java -XX:+PrintFlagsFinal -version</code>, this creates a new JVM process, and prints the information for that new process. Note that the original PID 9 process has a number of additional flags that can affect the calculated heap size.</p>\n<p>For a more accurate comparison, you could add the <code>-XX:+PrintFlagsFinal</code> flags to the main command run when the container starts. I would expect this to match the values returned by <code>jinfo</code> and <code>jmap</code>.</p>\n"}],"owner":{"account_id":23936357,"reputation":3,"user_id":17930051,"display_name":"xue wen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":475,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70706247,"answer_count":1,"score":0,"last_activity_date":1665662132,"creation_date":1642135694,"question_id":70706125,"body_markdown":"I&#39;m running my java application on apline linux system in docker container, and I wanna find out the value of MaxHeapSize, so I use several command : java -XX:+PrintFlagsFinal, jinfo -flag MaxHeapSize , jmap -heap, but the output made me feel confused. The output of \r\njinfo -flag MaxHeapSize , jmap -heap are consistent. However, The output of java -XX:+PrintFlagsFinal is different.so why did this happen?\r\n\r\nThe default container memory Limit setting is 4096MiB.\r\n\r\n[enter image description here][1]\r\n\r\n\r\nThe output of java commonds is shown below.(I marked some important parts in the picture)\r\n```\r\nbash-5.0# jps -v\r\n9 jar -Dfile.encoding=utf-8 -XX:+UseG1GC -XX:+UseStringDeduplication -XX:-OmitStackTraceInFastThrow -XX:MaxRAMPercentage=60.0 -XX:InitialRAMPercentage=20.0 -XX:+PrintTenuringDistribution -XX:+PrintGCDetails -XX:+PrintCommandLineFlags -XX:+PrintHeapAtGC -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Xloggc:log/gc-%t.log -Duser.timezone=Asia/Shanghai -Delastic.apm.service_name=SUPER-STUDENTS -Delastic.apm.environment=k8s-prod-th-zhidao-manhattan -Delastic.apm.server_urls= -Delastic.apm.trace_methods= -Delastic.apm.trace_methods_duration_threshold=100ms -Delastic.apm.application_packages=outfox -Delastic.apm.capture_body=all -Delastic.apm.ignore_message_queues=* -Delastic.apm.profiling_inferred_spans_enabled=true -Delastic.apm.profiling_inferred_spans_sampling_interval=10ms -Delastic.apm.profiling_inferred_spans_min_duration=50ms -Dskywalking.agent.service_name=super-students -Dskywalking.agent.instance_name=super-students-75f964dbbd-5gfnv -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=1234\r\n64155 Jps -Dapplication.home=/opt/java/openjdk -Xms8m\r\nbash-5.0# java -XX:+PrintFlagsFinal -version | grep -Ei &quot;maxheapsize|maxram&quot;\r\n    uintx DefaultMaxRAMFraction                     = 4                                   {product}\r\n    uintx MaxHeapSize                              := 1073741824                          {product}\r\n uint64_t MaxRAM                                    = 137438953472                        {pd product}\r\n    uintx MaxRAMFraction                            = 4                                   {product}\r\n   double MaxRAMPercentage                          = 25.000000                           {product}\r\nopenjdk version &quot;1.8.0_282&quot;\r\nOpenJDK Runtime Environment (AdoptOpenJDK)(build 1.8.0_282-b08)\r\nOpenJDK 64-Bit Server VM (AdoptOpenJDK)(build 25.282-b08, mixed mode)\r\nbash-5.0# jinfo -flag MaxHeapSize 9\r\n-XX:MaxHeapSize=2577399808\r\nbash-5.0# jmap -heap 9\r\nAttaching to process ID 9, please wait...\r\nDebugger attached successfully.\r\nServer compiler detected.\r\nJVM version is 25.282-b08\r\n\r\nusing thread-local object allocation.\r\nGarbage-First (G1) GC with 1 thread(s)\r\n\r\nHeap Configuration:\r\n   MinHeapFreeRatio         = 40\r\n   MaxHeapFreeRatio         = 70\r\n   MaxHeapSize              = 2577399808 (2458.0MB)\r\n   NewSize                  = 1363144 (1.2999954223632812MB)\r\n   MaxNewSize               = 1545601024 (1474.0MB)\r\n   OldSize                  = 5452592 (5.1999969482421875MB)\r\n   NewRatio                 = 2\r\n   SurvivorRatio            = 8\r\n   MetaspaceSize            = 21807104 (20.796875MB)\r\n   CompressedClassSpaceSize = 1073741824 (1024.0MB)\r\n   MaxMetaspaceSize         = 17592186044415 MB\r\n   G1HeapRegionSize         = 1048576 (1.0MB)\r\n\r\nHeap Usage:\r\nG1 Heap:\r\n   regions  = 2458\r\n   capacity = 2577399808 (2458.0MB)\r\n   used     = 320120112 (305.2903289794922MB)\r\n   free     = 2257279696 (2152.709671020508MB)\r\n   12.420273758319455% used\r\nG1 Young Generation:\r\nEden Space:\r\n   regions  = 53\r\n   capacity = 654311424 (624.0MB)\r\n   used     = 55574528 (53.0MB)\r\n   free     = 598736896 (571.0MB)\r\n   8.493589743589743% used\r\nSurvivor Space:\r\n   regions  = 10\r\n   capacity = 10485760 (10.0MB)\r\n   used     = 10485760 (10.0MB)\r\n   free     = 0 (0.0MB)\r\n   100.0% used\r\nG1 Old Generation:\r\n   regions  = 247\r\n   capacity = 389021696 (371.0MB)\r\n   used     = 254059824 (242.2903289794922MB)\r\n   free     = 134961872 (128.7096710205078MB)\r\n   65.30736630174992% used\r\n\r\n63962 interned Strings occupying 6772928 bytes.\r\n```\r\n\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dZqRJ.png\r\n  [2]: https://i.stack.imgur.com/p0Nlm.png","title":"why the MaxHeapSize values are different between java -XX:+PrintFlagsFinal and jinfo -flag MaxHeapSize","body":"<p>I'm running my java application on apline linux system in docker container, and I wanna find out the value of MaxHeapSize, so I use several command : java -XX:+PrintFlagsFinal, jinfo -flag MaxHeapSize , jmap -heap, but the output made me feel confused. The output of\njinfo -flag MaxHeapSize , jmap -heap are consistent. However, The output of java -XX:+PrintFlagsFinal is different.so why did this happen?</p>\n<p>The default container memory Limit setting is 4096MiB.</p>\n<p><a href=\"https://i.stack.imgur.com/dZqRJ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>The output of java commonds is shown below.(I marked some important parts in the picture)</p>\n<pre><code>bash-5.0# jps -v\n9 jar -Dfile.encoding=utf-8 -XX:+UseG1GC -XX:+UseStringDeduplication -XX:-OmitStackTraceInFastThrow -XX:MaxRAMPercentage=60.0 -XX:InitialRAMPercentage=20.0 -XX:+PrintTenuringDistribution -XX:+PrintGCDetails -XX:+PrintCommandLineFlags -XX:+PrintHeapAtGC -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Xloggc:log/gc-%t.log -Duser.timezone=Asia/Shanghai -Delastic.apm.service_name=SUPER-STUDENTS -Delastic.apm.environment=k8s-prod-th-zhidao-manhattan -Delastic.apm.server_urls= -Delastic.apm.trace_methods= -Delastic.apm.trace_methods_duration_threshold=100ms -Delastic.apm.application_packages=outfox -Delastic.apm.capture_body=all -Delastic.apm.ignore_message_queues=* -Delastic.apm.profiling_inferred_spans_enabled=true -Delastic.apm.profiling_inferred_spans_sampling_interval=10ms -Delastic.apm.profiling_inferred_spans_min_duration=50ms -Dskywalking.agent.service_name=super-students -Dskywalking.agent.instance_name=super-students-75f964dbbd-5gfnv -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=1234\n64155 Jps -Dapplication.home=/opt/java/openjdk -Xms8m\nbash-5.0# java -XX:+PrintFlagsFinal -version | grep -Ei &quot;maxheapsize|maxram&quot;\n    uintx DefaultMaxRAMFraction                     = 4                                   {product}\n    uintx MaxHeapSize                              := 1073741824                          {product}\n uint64_t MaxRAM                                    = 137438953472                        {pd product}\n    uintx MaxRAMFraction                            = 4                                   {product}\n   double MaxRAMPercentage                          = 25.000000                           {product}\nopenjdk version &quot;1.8.0_282&quot;\nOpenJDK Runtime Environment (AdoptOpenJDK)(build 1.8.0_282-b08)\nOpenJDK 64-Bit Server VM (AdoptOpenJDK)(build 25.282-b08, mixed mode)\nbash-5.0# jinfo -flag MaxHeapSize 9\n-XX:MaxHeapSize=2577399808\nbash-5.0# jmap -heap 9\nAttaching to process ID 9, please wait...\nDebugger attached successfully.\nServer compiler detected.\nJVM version is 25.282-b08\n\nusing thread-local object allocation.\nGarbage-First (G1) GC with 1 thread(s)\n\nHeap Configuration:\n   MinHeapFreeRatio         = 40\n   MaxHeapFreeRatio         = 70\n   MaxHeapSize              = 2577399808 (2458.0MB)\n   NewSize                  = 1363144 (1.2999954223632812MB)\n   MaxNewSize               = 1545601024 (1474.0MB)\n   OldSize                  = 5452592 (5.1999969482421875MB)\n   NewRatio                 = 2\n   SurvivorRatio            = 8\n   MetaspaceSize            = 21807104 (20.796875MB)\n   CompressedClassSpaceSize = 1073741824 (1024.0MB)\n   MaxMetaspaceSize         = 17592186044415 MB\n   G1HeapRegionSize         = 1048576 (1.0MB)\n\nHeap Usage:\nG1 Heap:\n   regions  = 2458\n   capacity = 2577399808 (2458.0MB)\n   used     = 320120112 (305.2903289794922MB)\n   free     = 2257279696 (2152.709671020508MB)\n   12.420273758319455% used\nG1 Young Generation:\nEden Space:\n   regions  = 53\n   capacity = 654311424 (624.0MB)\n   used     = 55574528 (53.0MB)\n   free     = 598736896 (571.0MB)\n   8.493589743589743% used\nSurvivor Space:\n   regions  = 10\n   capacity = 10485760 (10.0MB)\n   used     = 10485760 (10.0MB)\n   free     = 0 (0.0MB)\n   100.0% used\nG1 Old Generation:\n   regions  = 247\n   capacity = 389021696 (371.0MB)\n   used     = 254059824 (242.2903289794922MB)\n   free     = 134961872 (128.7096710205078MB)\n   65.30736630174992% used\n\n63962 interned Strings occupying 6772928 bytes.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/p0Nlm.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring","spring-boot","security","spring-security"],"answers":[{"tags":[],"owner":{"account_id":1873870,"reputation":985,"user_id":1695525,"display_name":"Bruce Ritchie"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1556570400,"creation_date":1556570400,"answer_id":55910540,"question_id":53640372,"body_markdown":"For anyone hitting this issue for me the solution was to remove the duplicate @EnableGlobalMethodSecurity annotation I had configured on a WebSecurityConfigurer I had setup.\r\n","title":"Get error stating that &quot;methodSecurityInterceptor&quot; is already defined when extend GlobalMethodSecurityConfiguration in SPring Boot 2.1.1","body":"<p>For anyone hitting this issue for me the solution was to remove the duplicate @EnableGlobalMethodSecurity annotation I had configured on a WebSecurityConfigurer I had setup.</p>\n"},{"tags":[],"owner":{"account_id":23665731,"reputation":11,"user_id":17693205,"display_name":"Gabriel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649424434,"creation_date":1649424434,"answer_id":71797883,"question_id":53640372,"body_markdown":"I solved by merging both configuration classes\r\n\r\n    \r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n    \r\n    \t@Configuration\r\n    \t@RequiredArgsConstructor\r\n    \t@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n    \tpublic static class GlobalMethodSecurityConfig extends GlobalMethodSecurityConfiguration {\r\n    \t\t\r\n            private final ApplicationContext applicationContext;\r\n    \r\n    \t\t@Override\r\n    \t\tprotected MethodSecurityExpressionHandler createExpressionHandler() {\r\n    \t\t\tvar expressionHandler = new CustomMethodSecurityExpressionHandler();\r\n    \t\t\texpressionHandler.setApplicationContext(applicationContext);\r\n    \r\n    \t\t\treturn expressionHandler;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Configuration\r\n    \tpublic static class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \t\t@Override\r\n    \t\tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\t\t//http config\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\nAs suggested [here][1] in Spring docs\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity","title":"Get error stating that &quot;methodSecurityInterceptor&quot; is already defined when extend GlobalMethodSecurityConfiguration in SPring Boot 2.1.1","body":"<p>I solved by merging both configuration classes</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Configuration\n    @RequiredArgsConstructor\n    @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\n    public static class GlobalMethodSecurityConfig extends GlobalMethodSecurityConfiguration {\n        \n        private final ApplicationContext applicationContext;\n\n        @Override\n        protected MethodSecurityExpressionHandler createExpressionHandler() {\n            var expressionHandler = new CustomMethodSecurityExpressionHandler();\n            expressionHandler.setApplicationContext(applicationContext);\n\n            return expressionHandler;\n        }\n    }\n\n    @Configuration\n    public static class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            //http config\n        }\n\n    }\n}\n</code></pre>\n<p>As suggested <a href=\"https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity\" rel=\"nofollow noreferrer\">here</a> in Spring docs</p>\n"},{"tags":[],"owner":{"account_id":23828425,"reputation":755,"user_id":17835092,"display_name":"Samuel Olufemi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665662036,"creation_date":1665662036,"answer_id":74055318,"question_id":53640372,"body_markdown":"The solution below worked for me.\r\n\r\nSet this key and values in your application.yml or application.properties \r\n\r\napplication.yml\r\nspring:  \r\n  main:\r\n    allow-bean-definition-overriding: true\r\n\r\napplication.properties\r\n\r\nspring.main.allow-bean-definition-overriding=true","title":"Get error stating that &quot;methodSecurityInterceptor&quot; is already defined when extend GlobalMethodSecurityConfiguration in SPring Boot 2.1.1","body":"<p>The solution below worked for me.</p>\n<p>Set this key and values in your application.yml or application.properties</p>\n<p>application.yml\nspring:<br />\nmain:\nallow-bean-definition-overriding: true</p>\n<p>application.properties</p>\n<p>spring.main.allow-bean-definition-overriding=true</p>\n"}],"owner":{"account_id":457598,"reputation":24938,"user_id":857025,"accept_rate":55,"display_name":"Don Rhummy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6895,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1665662036,"creation_date":1544042350,"question_id":53640372,"body_markdown":"I&#39;m overriding the `GlobalMethodSecurityConfiguration` class but only one method: `protected MethodSecurityExpressionHandler createExpressionHandler()`.\r\n\r\nWhen I try to run the app, I get:\r\n\r\n&gt; Description:\r\n&gt;\r\n&gt; The bean &#39;methodSecurityInterceptor&#39;, defined in class path resource [org/springframework/security/config/annotation/method/configuration/GlobalMethodSecurityConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [com/testing/config/MyMethodSecurityConfig.class] and overriding is disabled.\r\n&gt;\r\n&gt; Action:\r\n&gt;\r\n&gt; Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\r\n\r\n**CONFIG CLASS**\r\n\r\nWhy is it doing this when I am not overriding that base method? How can i override the `MethodSecurityExpressionHandler` without getting this error?\r\n\r\n    import com.testing.AadMethodSecurityExpressionHandler;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.access.expression.method.MethodSecurityExpressionHandler;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n    import org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration;\r\n    \r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n    public class MyMethodSecurityConfig extends GlobalMethodSecurityConfiguration\r\n    {\r\n        @Override\r\n        protected MethodSecurityExpressionHandler createExpressionHandler()\r\n        {\r\n            return new MyMethodSecurityExpressionHandler();\r\n        }\r\n    }\r\n\r\n**Expression Handler**\r\n\r\n    import org.aopalliance.intercept.MethodInvocation;\r\n    import org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler;\r\n    import org.springframework.security.access.expression.method.MethodSecurityExpressionOperations;\r\n    import org.springframework.security.core.Authentication;\r\n    \r\n    public class MyMethodSecurityExpressionHandler extends DefaultMethodSecurityExpressionHandler\r\n    {\r\n        @Override\r\n        protected MethodSecurityExpressionOperations createSecurityExpressionRoot(Authentication authentication, MethodInvocation invocation)\r\n        {\r\n            MyMethodSecurityExpressionRoot root = new MyMethodSecurityExpressionRoot( authentication );\r\n            root.setPermissionEvaluator( getPermissionEvaluator() );\r\n            root.setTrustResolver( getTrustResolver() );\r\n            root.setRoleHierarchy( getRoleHierarchy() );\r\n    \r\n            return root;\r\n        }\r\n    }\r\n\r\n**Expression Root**\r\n\r\n    import org.springframework.security.access.expression.SecurityExpressionRoot;\r\n    import org.springframework.security.access.expression.method.MethodSecurityExpressionOperations;\r\n    import org.springframework.security.core.Authentication;\r\n    \r\n    public class MyMethodSecurityExpressionRoot extends SecurityExpressionRoot implements MethodSecurityExpressionOperations\r\n    {\r\n        private Object filterObject;\r\n        private Object returnObject;\r\n        private Object target;\r\n    \r\n        public MyMethodSecurityExpressionRoot(Authentication a)\r\n        {\r\n            super( a );\r\n        }\r\n    \r\n        @Override\r\n        public void setDefaultRolePrefix(String defaultRolePrefix)\r\n        {\r\n            //Simple test to see if this works\r\n            super.setDefaultRolePrefix( &quot;&quot; );\r\n        }\r\n    \r\n        public void setFilterObject(Object filterObject)\r\n        {\r\n            this.filterObject = filterObject;\r\n        }\r\n    \r\n        public Object getFilterObject()\r\n        {\r\n            return filterObject;\r\n        }\r\n    \r\n        public void setReturnObject(Object returnObject)\r\n        {\r\n            this.returnObject = returnObject;\r\n        }\r\n    \r\n        public Object getReturnObject()\r\n        {\r\n            return returnObject;\r\n        }\r\n    \r\n        void setThis(Object target)\r\n        {\r\n            this.target = target;\r\n        }\r\n    \r\n        public Object getThis()\r\n        {\r\n            return target;\r\n        }\r\n    }\r\n","title":"Get error stating that &quot;methodSecurityInterceptor&quot; is already defined when extend GlobalMethodSecurityConfiguration in SPring Boot 2.1.1","body":"<p>I'm overriding the <code>GlobalMethodSecurityConfiguration</code> class but only one method: <code>protected MethodSecurityExpressionHandler createExpressionHandler()</code>.</p>\n\n<p>When I try to run the app, I get:</p>\n\n<blockquote>\n  <p>Description:</p>\n  \n  <p>The bean 'methodSecurityInterceptor', defined in class path resource [org/springframework/security/config/annotation/method/configuration/GlobalMethodSecurityConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [com/testing/config/MyMethodSecurityConfig.class] and overriding is disabled.</p>\n  \n  <p>Action:</p>\n  \n  <p>Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true</p>\n</blockquote>\n\n<p><strong>CONFIG CLASS</strong></p>\n\n<p>Why is it doing this when I am not overriding that base method? How can i override the <code>MethodSecurityExpressionHandler</code> without getting this error?</p>\n\n<pre><code>import com.testing.AadMethodSecurityExpressionHandler;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.access.expression.method.MethodSecurityExpressionHandler;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration;\n\n@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class MyMethodSecurityConfig extends GlobalMethodSecurityConfiguration\n{\n    @Override\n    protected MethodSecurityExpressionHandler createExpressionHandler()\n    {\n        return new MyMethodSecurityExpressionHandler();\n    }\n}\n</code></pre>\n\n<p><strong>Expression Handler</strong></p>\n\n<pre><code>import org.aopalliance.intercept.MethodInvocation;\nimport org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler;\nimport org.springframework.security.access.expression.method.MethodSecurityExpressionOperations;\nimport org.springframework.security.core.Authentication;\n\npublic class MyMethodSecurityExpressionHandler extends DefaultMethodSecurityExpressionHandler\n{\n    @Override\n    protected MethodSecurityExpressionOperations createSecurityExpressionRoot(Authentication authentication, MethodInvocation invocation)\n    {\n        MyMethodSecurityExpressionRoot root = new MyMethodSecurityExpressionRoot( authentication );\n        root.setPermissionEvaluator( getPermissionEvaluator() );\n        root.setTrustResolver( getTrustResolver() );\n        root.setRoleHierarchy( getRoleHierarchy() );\n\n        return root;\n    }\n}\n</code></pre>\n\n<p><strong>Expression Root</strong></p>\n\n<pre><code>import org.springframework.security.access.expression.SecurityExpressionRoot;\nimport org.springframework.security.access.expression.method.MethodSecurityExpressionOperations;\nimport org.springframework.security.core.Authentication;\n\npublic class MyMethodSecurityExpressionRoot extends SecurityExpressionRoot implements MethodSecurityExpressionOperations\n{\n    private Object filterObject;\n    private Object returnObject;\n    private Object target;\n\n    public MyMethodSecurityExpressionRoot(Authentication a)\n    {\n        super( a );\n    }\n\n    @Override\n    public void setDefaultRolePrefix(String defaultRolePrefix)\n    {\n        //Simple test to see if this works\n        super.setDefaultRolePrefix( \"\" );\n    }\n\n    public void setFilterObject(Object filterObject)\n    {\n        this.filterObject = filterObject;\n    }\n\n    public Object getFilterObject()\n    {\n        return filterObject;\n    }\n\n    public void setReturnObject(Object returnObject)\n    {\n        this.returnObject = returnObject;\n    }\n\n    public Object getReturnObject()\n    {\n        return returnObject;\n    }\n\n    void setThis(Object target)\n    {\n        this.target = target;\n    }\n\n    public Object getThis()\n    {\n        return target;\n    }\n}\n</code></pre>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"score":0,"creation_date":1665144564,"post_id":73986872,"comment_id":130636786,"body_markdown":"Its worth to give a try with latest versions of chrome driver and browser. If you have the same issue then definitely it is the locator issue as you mentioned html markup changes.","body":"Its worth to give a try with latest versions of chrome driver and browser. If you have the same issue then definitely it is the locator issue as you mentioned html markup changes."},{"owner":{"account_id":2428368,"reputation":1,"user_id":3757260,"accept_rate":75,"display_name":"Frank H."},"score":0,"creation_date":1665144831,"post_id":73986872,"comment_id":130636901,"body_markdown":"Tried with chromedriver 105.","body":"Tried with chromedriver 105."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1665182104,"post_id":73986872,"comment_id":130647728,"body_markdown":"Do you set this anywhere?:  driver.manage().timeouts().setScriptTimeout  It sounds like it&#39;s set to something and you do have something in &quot;ExtendedWebDriver&quot; which is calling async script(s).   Maybe include the code for ExtendedWebDriver.  In general it&#39;s a very bad idea to check for readystate as you can&#39;t know when exactly it will run.","body":"Do you set this anywhere?:  driver.manage().timeouts().setScriptTimeout  It sounds like it&#39;s set to something and you do have something in &quot;ExtendedWebDriver&quot; which is calling async script(s).   Maybe include the code for ExtendedWebDriver.  In general it&#39;s a very bad idea to check for readystate as you can&#39;t know when exactly it will run."},{"owner":{"account_id":2428368,"reputation":1,"user_id":3757260,"accept_rate":75,"display_name":"Frank H."},"score":0,"creation_date":1665571296,"post_id":73986872,"comment_id":130730412,"body_markdown":"Thanks for the tip. I&#39;ve included some code from the ExtendedWebDriver class. It seems that the findElement(s) methods are overridden with a call to the isPageReady() method. Could it be that this &quot;crashes&quot; with an existing internal pageReady() method, or some other place?","body":"Thanks for the tip. I&#39;ve included some code from the ExtendedWebDriver class. It seems that the findElement(s) methods are overridden with a call to the isPageReady() method. Could it be that this &quot;crashes&quot; with an existing internal pageReady() method, or some other place?"},{"owner":{"account_id":26308422,"reputation":126,"user_id":19972444,"display_name":"Neos"},"score":0,"creation_date":1665740806,"post_id":73986872,"comment_id":130773879,"body_markdown":"Hello , apparently with the changes on html/markup there are some resource in the getAngularScript() method should be modified as well . I am not assuming anything here , just try to spot the differences . you can verify if the ChromeDriver is compatible with your chrome version so no updates happened to your browser  because it could be a reason for selenium failure","body":"Hello , apparently with the changes on html/markup there are some resource in the getAngularScript() method should be modified as well . I am not assuming anything here , just try to spot the differences . you can verify if the ChromeDriver is compatible with your chrome version so no updates happened to your browser  because it could be a reason for selenium failure"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":1,"creation_date":1666036833,"post_id":73986872,"comment_id":130835960,"body_markdown":"I would get rid of those &quot;isPageReady();&quot; calls...  if you want to keep them, you might set a specific ScriptTimeout to see if it helps.  (&quot;driver.manage().timeouts().setScriptTimeout...&quot;)  Instead of checking readystate, you can use Selenium&#39;s WebDriverWait along with an expectedCondition... (i.e. &quot;Explicit Wait&quot;).  Handle stale element exceptions if needed.   (Selenium has added some useful expected conditions to deal with stale element exceptions, too.)","body":"I would get rid of those &quot;isPageReady();&quot; calls...  if you want to keep them, you might set a specific ScriptTimeout to see if it helps.  (&quot;driver.manage().timeouts().setScriptTimeout...&quot;)  Instead of checking readystate, you can use Selenium&#39;s WebDriverWait along with an expectedCondition... (i.e. &quot;Explicit Wait&quot;).  Handle stale element exceptions if needed.   (Selenium has added some useful expected conditions to deal with stale element exceptions, too.)"},{"owner":{"display_name":"user9347168"},"score":0,"creation_date":1666099514,"post_id":73986872,"comment_id":130851265,"body_markdown":"I&#39;ll try that. I know Selenium has added some useful things in version 4 - upgrading is in the pipeline :-)","body":"I&#39;ll try that. I know Selenium has added some useful things in version 4 - upgrading is in the pipeline :-)"},{"owner":{"account_id":3043770,"reputation":318,"user_id":9699127,"display_name":"Bits Please"},"score":0,"creation_date":1666228682,"post_id":73986872,"comment_id":130888521,"body_markdown":"Have you tried this : https://stackoverflow.com/questions/63798832/error-org-openqa-selenium-scripttimeoutexception-script-timeout","body":"Have you tried this : <a href=\"https://stackoverflow.com/questions/63798832/error-org-openqa-selenium-scripttimeoutexception-script-timeout\" title=\"error org openqa selenium scripttimeoutexception script timeout\">stackoverflow.com/questions/63798832/&hellip;</a>"}],"owner":{"account_id":2428368,"reputation":1,"user_id":3757260,"accept_rate":75,"display_name":"Frank H."},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665661960,"creation_date":1665144014,"question_id":73986872,"body_markdown":"I might be stupid, but I really don&#39;t get this at all. It&#39;s an Angular application, with a page on which the Selenium tests have been running fine up until now. Then a frontend developer did some markup changes (not quite sure what, but I wouldn&#39;t think it mattered as long as it&#39;s just html/markup and the page is working fine), and now nothing works.\r\n\r\nAnd I mean nothing; Every Selenium operation, be it .elementVisible(), .click() or absolutely whatever, fails with a script timeout. No more details as far as I can see - it just times out. While the page is open, and every element is visible and interactable manually.\r\n\r\nThis is the script timeout error:\r\n\r\n    org.openqa.selenium.ScriptTimeoutException: script timeout\r\n    (Session info: chrome=101.0.4951.64)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;frank-ulyana-xfce&#39;, ip: &#39;127.0.1.1&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, \r\n    os.version: &#39;5.4.0-110-generic&#39;, java.version: &#39;11.0.15&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 101.0.4951.64,     chrome: {chromedriverVersion: 101.0.4951.41 (93c720db8323..., userDataDir:     /tmp/.com.google.Chrome.RjyGbe}, goog:chromeOptions: {debuggerAddress: localhost:42731},     javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform:     LINUX, platformName: LINUX, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false,     timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and     notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true,     webauthn:virtualAuthenticators: true}\r\n    Session ID: 6d9e43e080e1877deda638b34d533500\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.executeAsyncScript(RemoteWebDriver.java:506)\r\n\tat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.isPageReady(ExtendedWebDriver.java:38)\r\n\tat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.findElement(ExtendedWebDriver.java:56)\r\n\tat e2e.sak.vedtak.VedtakPage2.velgInnstilling(VedtakPage2.java:24)\r\n\tat e2e.sak.vedtak.VedtakSteps.jegInnstillerTilAvslag(VedtakSteps.java:87)\r\n\r\n\r\nAny ideas? Short of making the frontend developer revert the changes to a working version, I don&#39;t know where to look.\r\n\r\nUPDATE:\r\n\r\nFrom the ExtendeWebDriver class in the framework (own project used by the test project):\r\n\r\n    @Override\r\n    public WebElement findElement(By by) {\r\n        isPageReady();\r\n        return this.webDriver.findElement(by);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;WebElement&gt; findElements(final By by) {\r\n        isPageReady();\r\n        return this.webDriver.findElements(by);\r\n    }\r\n    \r\n    ....\r\n    \r\n    public void isPageReady() {\r\n        if (teknologi == STARTLAN_ESOKNAD){\r\n            waitUntilAngularReady();\r\n        } else {\r\n            Object response = jsExecutor.executeAsyncScript(venteScript);\r\n            if (response != null) {\r\n                poll(1000);\r\n                response = jsExecutor.executeAsyncScript(venteScript);\r\n                if (response != null) {\r\n                    throw new IllegalStateException(format(&quot;Responsen fra isPageReady() skal alltid v&#230;re null, men var: %s&quot;, response));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThe JavaScript executed:\r\n\r\n    private static String getAngularScript() {\r\n        return &quot;function getNg1Hooks(t,e){function n(t){try{if(!e&amp;&amp;angular.getTestability){var n=angular.getTestability(t);if&quot; +\r\n                &quot;(n)return{$$testability:n}}else{var i=angular.element(t).injector();if(i)return{$injector:i}}}catch(t)&quot; +\r\n                &quot;{}}function i(t){for(var e=document.querySelectorAll(t),i=0;i&lt;e.length;i++){var r=n(e[i]);if(r)return r}}if(t)&quot; +\r\n                &quot;return i(t);if(window.__TESTABILITY__NG1_APP_ROOT_INJECTOR__){var r=window&quot; +\r\n                &quot;.__TESTABILITY__NG1_APP_ROOT_INJECTOR__,a=null;try{a=r.get(\\&quot;$$testability\\&quot;)}catch(t){}return{$injector:r,&quot; +\r\n                &quot;$$testability:a}}return n(document.body)||i(\\&quot;[ng-app]\\&quot;)||i(\\&quot;[ng\\\\\\\\:app]\\&quot;)||i(\\&quot;[ng-controller]\\&quot;)||i&quot; +\r\n                &quot;(\\&quot;[ng\\\\\\\\:controller]\\&quot;)}waitForAngular=function(t,e){try{var n=e;if(!window.angular&amp;&amp;!window&quot; +\r\n                &quot;.getAngularTestability)throw new Error(\\&quot;both angularJS testability and angular testability are undefined.  &quot; +\r\n                &quot;This could be either because this is a non-angular page or because your test involves client-side navigation, &quot; +\r\n                &quot;which can interfere with Protractor&#39;s bootstrapping.  See http://git.io/v4gXM for details\\&quot;);!function(e){if&quot; +\r\n                &quot;(window.angular){var n=getNg1Hooks(t);if(n)if(n.$$testability)n.$$testability.whenStable(e);else{if(!n&quot; +\r\n                &quot;.$injector)throw t?new Error(\\&quot;root element (\\&quot;+t+\\&quot;) has no injector. this may mean it is not inside ng-app&quot; +\r\n                &quot;.\\&quot;):new Error(&#39;Could not automatically find injector on page: \\&quot;&#39;+window.location.toString()+&#39;\\&quot;.  Consider &quot; +\r\n                &quot;using config.rootEl&#39;);n.$injector.get(\\&quot;$browser\\&quot;).notifyWhenNoOutstandingRequests(e)}else e()}else e()}&quot; +\r\n                &quot;(function(){if(window.getAngularTestability){if(t){var e=null,i=document.querySelector(t);try{e=window&quot; +\r\n                &quot;.getAngularTestability(i)}catch(t){}if(e)return void e.whenStable(n)}var r=window.getAllAngularTestabilities()&quot; +\r\n                &quot;,a=r.length;if(0===a)return void n();var o=function(){0==--a&amp;&amp;n()};r.forEach(function(t){t.whenStable(o)})&quot; +\r\n                &quot;}else n()})}catch(t){e(t.message)}},waitForAngular(\\&quot;body\\&quot;,arguments[arguments.length-1]);&quot;;\r\n    }","title":"Selenium and Java - script timeout on accessing every element on a page","body":"<p>I might be stupid, but I really don't get this at all. It's an Angular application, with a page on which the Selenium tests have been running fine up until now. Then a frontend developer did some markup changes (not quite sure what, but I wouldn't think it mattered as long as it's just html/markup and the page is working fine), and now nothing works.</p>\n<p>And I mean nothing; Every Selenium operation, be it .elementVisible(), .click() or absolutely whatever, fails with a script timeout. No more details as far as I can see - it just times out. While the page is open, and every element is visible and interactable manually.</p>\n<p>This is the script timeout error:</p>\n<pre><code>org.openqa.selenium.ScriptTimeoutException: script timeout\n(Session info: chrome=101.0.4951.64)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'frank-ulyana-xfce', ip: '127.0.1.1', os.name: 'Linux', os.arch: 'amd64', \nos.version: '5.4.0-110-generic', java.version: '11.0.15'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 101.0.4951.64,     chrome: {chromedriverVersion: 101.0.4951.41 (93c720db8323..., userDataDir:     /tmp/.com.google.Chrome.RjyGbe}, goog:chromeOptions: {debuggerAddress: localhost:42731},     javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform:     LINUX, platformName: LINUX, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false,     timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and     notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true,     webauthn:virtualAuthenticators: true}\nSession ID: 6d9e43e080e1877deda638b34d533500\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\nat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\nat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\nat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\nat org.openqa.selenium.remote.RemoteWebDriver.executeAsyncScript(RemoteWebDriver.java:506)\nat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.isPageReady(ExtendedWebDriver.java:38)\nat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.findElement(ExtendedWebDriver.java:56)\nat e2e.sak.vedtak.VedtakPage2.velgInnstilling(VedtakPage2.java:24)\nat e2e.sak.vedtak.VedtakSteps.jegInnstillerTilAvslag(VedtakSteps.java:87)\n</code></pre>\n<p>Any ideas? Short of making the frontend developer revert the changes to a working version, I don't know where to look.</p>\n<p>UPDATE:</p>\n<p>From the ExtendeWebDriver class in the framework (own project used by the test project):</p>\n<pre><code>@Override\npublic WebElement findElement(By by) {\n    isPageReady();\n    return this.webDriver.findElement(by);\n}\n\n@Override\npublic List&lt;WebElement&gt; findElements(final By by) {\n    isPageReady();\n    return this.webDriver.findElements(by);\n}\n\n....\n\npublic void isPageReady() {\n    if (teknologi == STARTLAN_ESOKNAD){\n        waitUntilAngularReady();\n    } else {\n        Object response = jsExecutor.executeAsyncScript(venteScript);\n        if (response != null) {\n            poll(1000);\n            response = jsExecutor.executeAsyncScript(venteScript);\n            if (response != null) {\n                throw new IllegalStateException(format(&quot;Responsen fra isPageReady() skal alltid være null, men var: %s&quot;, response));\n            }\n        }\n    }\n}\n</code></pre>\n<p>The JavaScript executed:</p>\n<pre><code>private static String getAngularScript() {\n    return &quot;function getNg1Hooks(t,e){function n(t){try{if(!e&amp;&amp;angular.getTestability){var n=angular.getTestability(t);if&quot; +\n            &quot;(n)return{$$testability:n}}else{var i=angular.element(t).injector();if(i)return{$injector:i}}}catch(t)&quot; +\n            &quot;{}}function i(t){for(var e=document.querySelectorAll(t),i=0;i&lt;e.length;i++){var r=n(e[i]);if(r)return r}}if(t)&quot; +\n            &quot;return i(t);if(window.__TESTABILITY__NG1_APP_ROOT_INJECTOR__){var r=window&quot; +\n            &quot;.__TESTABILITY__NG1_APP_ROOT_INJECTOR__,a=null;try{a=r.get(\\&quot;$$testability\\&quot;)}catch(t){}return{$injector:r,&quot; +\n            &quot;$$testability:a}}return n(document.body)||i(\\&quot;[ng-app]\\&quot;)||i(\\&quot;[ng\\\\\\\\:app]\\&quot;)||i(\\&quot;[ng-controller]\\&quot;)||i&quot; +\n            &quot;(\\&quot;[ng\\\\\\\\:controller]\\&quot;)}waitForAngular=function(t,e){try{var n=e;if(!window.angular&amp;&amp;!window&quot; +\n            &quot;.getAngularTestability)throw new Error(\\&quot;both angularJS testability and angular testability are undefined.  &quot; +\n            &quot;This could be either because this is a non-angular page or because your test involves client-side navigation, &quot; +\n            &quot;which can interfere with Protractor's bootstrapping.  See http://git.io/v4gXM for details\\&quot;);!function(e){if&quot; +\n            &quot;(window.angular){var n=getNg1Hooks(t);if(n)if(n.$$testability)n.$$testability.whenStable(e);else{if(!n&quot; +\n            &quot;.$injector)throw t?new Error(\\&quot;root element (\\&quot;+t+\\&quot;) has no injector. this may mean it is not inside ng-app&quot; +\n            &quot;.\\&quot;):new Error('Could not automatically find injector on page: \\&quot;'+window.location.toString()+'\\&quot;.  Consider &quot; +\n            &quot;using config.rootEl');n.$injector.get(\\&quot;$browser\\&quot;).notifyWhenNoOutstandingRequests(e)}else e()}else e()}&quot; +\n            &quot;(function(){if(window.getAngularTestability){if(t){var e=null,i=document.querySelector(t);try{e=window&quot; +\n            &quot;.getAngularTestability(i)}catch(t){}if(e)return void e.whenStable(n)}var r=window.getAllAngularTestabilities()&quot; +\n            &quot;,a=r.length;if(0===a)return void n();var o=function(){0==--a&amp;&amp;n()};r.forEach(function(t){t.whenStable(o)})&quot; +\n            &quot;}else n()})}catch(t){e(t.message)}},waitForAngular(\\&quot;body\\&quot;,arguments[arguments.length-1]);&quot;;\n}\n</code></pre>\n"},{"tags":["java","multithreading","wait","notify"],"answers":[{"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1442335986,"creation_date":1442335986,"answer_id":32591551,"question_id":32591479,"body_markdown":"The threads are started sequentially, and in theory thread 1 would execute before thread 2, although it&#39;s **not guaranteed** (pretty sure it&#39;ll be consistent in this simple case though, as there are no real or simulated aleatory delays). \r\n\r\nThis is why when thread 2 is started slightly before, it has a chance to wait on a lock that gets notified (by thread 1) subsequently, instead of waiting forever for a lock that&#39;s already been notified once (hence, no printing). \r\n\r\nOn the `static` lock `Object`: you&#39;re binding your `[First/Second]Thread` nested classes to **instances** of `Main`, so the lock has to be common to both if you want them to synchronize on the same lock. \r\n\r\nIf it was an instance object, your threads would access and synchronize on a different lock, as your `new Main()...` idiom would get two instances of `Main` and subsequently two instances of `lock`. ","title":"Java Thread wait and notify methods","body":"<p>The threads are started sequentially, and in theory thread 1 would execute before thread 2, although it's <strong>not guaranteed</strong> (pretty sure it'll be consistent in this simple case though, as there are no real or simulated aleatory delays). </p>\n\n<p>This is why when thread 2 is started slightly before, it has a chance to wait on a lock that gets notified (by thread 1) subsequently, instead of waiting forever for a lock that's already been notified once (hence, no printing). </p>\n\n<p>On the <code>static</code> lock <code>Object</code>: you're binding your <code>[First/Second]Thread</code> nested classes to <strong>instances</strong> of <code>Main</code>, so the lock has to be common to both if you want them to synchronize on the same lock. </p>\n\n<p>If it was an instance object, your threads would access and synchronize on a different lock, as your <code>new Main()...</code> idiom would get two instances of <code>Main</code> and subsequently two instances of <code>lock</code>. </p>\n"},{"tags":[],"owner":{"account_id":1005212,"reputation":28558,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1442411753,"creation_date":1442336031,"answer_id":32591568,"question_id":32591479,"body_markdown":"&gt; &quot;Is that happening because the computer is so fast and the threads run\r\n&gt; sequentially? Theoretically the second start() method can be called\r\n&gt; first in my opinion is it?. &quot;\r\n\r\nYes, you can introduce a sleep() with random time, for better (unit-) test, or demonstration purpose. (Of course, the final running code should not have that sleep)\r\n\r\n    \r\n\r\n&gt; And the last question I have, is why the lock Object must be static\r\n\r\nPrincipally, it does not matter whether the lock is static or not, but you have to have the possibility to access it, and it must be the same lock object. (Not one object instance for each class). In your case it must be static, otherwise it would be two different objects instances.","title":"Java Thread wait and notify methods","body":"<blockquote>\n  <p>\"Is that happening because the computer is so fast and the threads run\n  sequentially? Theoretically the second start() method can be called\n  first in my opinion is it?. \"</p>\n</blockquote>\n\n<p>Yes, you can introduce a sleep() with random time, for better (unit-) test, or demonstration purpose. (Of course, the final running code should not have that sleep)</p>\n\n<blockquote>\n  <p>And the last question I have, is why the lock Object must be static</p>\n</blockquote>\n\n<p>Principally, it does not matter whether the lock is static or not, but you have to have the possibility to access it, and it must be the same lock object. (Not one object instance for each class). In your case it must be static, otherwise it would be two different objects instances.</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665661692,"creation_date":1442348866,"answer_id":32595029,"question_id":32591479,"body_markdown":"This is wrong because it doesn&#39;t change any shared state that the other thread can test:\r\n\r\n    synchronized (lock) {\r\n        lock.notify();\r\n        System.out.println(&quot;I&#39;ve entered in FirstThread&quot;);\r\n    }\r\n\r\nAnd this is wrong because it does not test anything:\r\n\r\n    synchronized (lock) {\r\n        lock.wait();\r\n        System.out.println(&quot;I&#39;m in the second thread&quot;);\r\n    }\r\n\r\nThe problem is, `lock.notify()` does not do _anything at all_ if there is no thread sleeping in `lock.wait()`.   In your program, it is possible for the `FirstThread` to call notify() before the `SecondThread` calls wait().  The wait() call will never return in that case because the notify() call will do nothing in that case.\r\n\r\nThere&#39;s a reason why they make you enter a mutex (i.e., a `synchronized` block) before you can call wait() or notify().  It&#39;s because you are supposed to use the mutex to protect the shared shared state for which the waiter is waiting.\r\n\r\n&quot;shared state&quot; can be as simple as a single boolean:\r\n\r\n     boolean firstThreadRan = false;\r\n\r\nThe notifier (a.k.a., &quot;producer&quot;) does this:\r\n\r\n     synchronized(lock) {\r\n         firstThreadRan = true;\r\n         lock.notify();\r\n         ...\r\n     }\r\n\r\nThe waiter (a.k.a., &quot;consumer&quot;) does this:\r\n\r\n    synchronized(lock) {\r\n        while (! firstThreadRan) {\r\n            lock.wait();\r\n        }\r\n        ...\r\n    }\r\n\r\nThe while loop is not strictly necessary in this case, but it becomes very important when more than one consumer is competing for the same event.  It&#39;s good practice to always use a loop.\r\n\r\nSee https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html for a tutorial that explains `wait()` and `notify()` in more detail.","title":"Java Thread wait and notify methods","body":"<p>This is wrong because it doesn't change any shared state that the other thread can test:</p>\n<pre><code>synchronized (lock) {\n    lock.notify();\n    System.out.println(&quot;I've entered in FirstThread&quot;);\n}\n</code></pre>\n<p>And this is wrong because it does not test anything:</p>\n<pre><code>synchronized (lock) {\n    lock.wait();\n    System.out.println(&quot;I'm in the second thread&quot;);\n}\n</code></pre>\n<p>The problem is, <code>lock.notify()</code> does not do <em>anything at all</em> if there is no thread sleeping in <code>lock.wait()</code>.   In your program, it is possible for the <code>FirstThread</code> to call notify() before the <code>SecondThread</code> calls wait().  The wait() call will never return in that case because the notify() call will do nothing in that case.</p>\n<p>There's a reason why they make you enter a mutex (i.e., a <code>synchronized</code> block) before you can call wait() or notify().  It's because you are supposed to use the mutex to protect the shared shared state for which the waiter is waiting.</p>\n<p>&quot;shared state&quot; can be as simple as a single boolean:</p>\n<pre><code> boolean firstThreadRan = false;\n</code></pre>\n<p>The notifier (a.k.a., &quot;producer&quot;) does this:</p>\n<pre><code> synchronized(lock) {\n     firstThreadRan = true;\n     lock.notify();\n     ...\n }\n</code></pre>\n<p>The waiter (a.k.a., &quot;consumer&quot;) does this:</p>\n<pre><code>synchronized(lock) {\n    while (! firstThreadRan) {\n        lock.wait();\n    }\n    ...\n}\n</code></pre>\n<p>The while loop is not strictly necessary in this case, but it becomes very important when more than one consumer is competing for the same event.  It's good practice to always use a loop.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html</a> for a tutorial that explains <code>wait()</code> and <code>notify()</code> in more detail.</p>\n"}],"owner":{"account_id":5728149,"reputation":279,"user_id":4524562,"accept_rate":54,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":32591551,"answer_count":3,"score":4,"last_activity_date":1665661692,"creation_date":1442335765,"question_id":32591479,"body_markdown":"I&#39;m learning for OCJP and now I&#39;m at &quot;Thread&quot; chapter, I have some questions about wait and notify methods. I think I understand what&#39;s happening here but I just want to make sure that I&#39;m on the right way.I wrote this code as an example:\r\n\r\n    package threads;\r\n    \r\n    public class Main {\r\n    \r\n    \tstatic Object lock = new Object();\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew Main().new FirstThread().start();\r\n    \t\tnew Main().new SecondThread().start();\r\n    \t}\r\n    \r\n    \tclass FirstThread extends Thread {\r\n    \t\tpublic void run() {\r\n    \t\t\tsynchronized (lock) {\r\n    \t\t\t\tlock.notify();\r\n    \t\t\t\tSystem.out.println(&quot;I&#39;ve entered in FirstThread&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \tclass SecondThread extends Thread {\r\n    \t\tpublic void run() {\r\n    \t\t\tsynchronized (lock) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tlock.wait();\r\n    \t\t\t\t\tSystem.out.println(&quot;I&#39;m in the second thread&quot;);\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nIn this example the console output is `I&#39;ve entered in FirstThread`, because the first thread starts, the notify() method is called, then the second thread starts, the wait() method is called and the String &quot;I&#39;m in the second thread&quot; is not printed.\r\n\r\nThe next scenario is that I reverse the positions of `new Main().new FirstThread().start();` and `new Main().new SecondThread().start();` the output is\r\n\r\n    I&#39;ve entered in FirstThread\r\n    I&#39;m in the second thread\r\n\r\nbecause the second thread starts, the wait() method is called, then the first thread starts, the method notify() is called, the console prints `I&#39;ve entered in FirstThread`, the wait is released and `I&#39;m in the second thread` is printed in the console.\r\n\r\nIs that happening because the computer is so fast and the threads run sequentially? Theoretically the second start() method can be called first in my opinion is it?. \r\n\r\nAnd the last question I have, is why the lock Object must be static, because if I remove the static modifier the output is always `I&#39;ve entered in FirstThread`?\r\n\r\nI know that static fields are loaded in JVM when the class is loaded, but I can&#39;t understand the logic of lock Object.","title":"Java Thread wait and notify methods","body":"<p>I'm learning for OCJP and now I'm at \"Thread\" chapter, I have some questions about wait and notify methods. I think I understand what's happening here but I just want to make sure that I'm on the right way.I wrote this code as an example:</p>\n\n<pre><code>package threads;\n\npublic class Main {\n\n    static Object lock = new Object();\n\n    public static void main(String[] args) {\n        new Main().new FirstThread().start();\n        new Main().new SecondThread().start();\n    }\n\n    class FirstThread extends Thread {\n        public void run() {\n            synchronized (lock) {\n                lock.notify();\n                System.out.println(\"I've entered in FirstThread\");\n            }\n        }\n    }\n    class SecondThread extends Thread {\n        public void run() {\n            synchronized (lock) {\n                try {\n                    lock.wait();\n                    System.out.println(\"I'm in the second thread\");\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>In this example the console output is <code>I've entered in FirstThread</code>, because the first thread starts, the notify() method is called, then the second thread starts, the wait() method is called and the String \"I'm in the second thread\" is not printed.</p>\n\n<p>The next scenario is that I reverse the positions of <code>new Main().new FirstThread().start();</code> and <code>new Main().new SecondThread().start();</code> the output is</p>\n\n<pre><code>I've entered in FirstThread\nI'm in the second thread\n</code></pre>\n\n<p>because the second thread starts, the wait() method is called, then the first thread starts, the method notify() is called, the console prints <code>I've entered in FirstThread</code>, the wait is released and <code>I'm in the second thread</code> is printed in the console.</p>\n\n<p>Is that happening because the computer is so fast and the threads run sequentially? Theoretically the second start() method can be called first in my opinion is it?. </p>\n\n<p>And the last question I have, is why the lock Object must be static, because if I remove the static modifier the output is always <code>I've entered in FirstThread</code>?</p>\n\n<p>I know that static fields are loaded in JVM when the class is loaded, but I can't understand the logic of lock Object.</p>\n"},{"tags":["java","kubernetes","ffmpeg","jvm","keda"],"comments":[{"owner":{"account_id":3408395,"reputation":11432,"user_id":2858934,"display_name":"Thomas"},"score":0,"creation_date":1665409623,"post_id":74014853,"comment_id":130687088,"body_markdown":"Can you show the output of `kubectl get pod &lt;name&gt; -o yaml` of a failed attempt?","body":"Can you show the output of <code>kubectl get pod &lt;name&gt; -o yaml</code> of a failed attempt?"},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1665410020,"post_id":74014853,"comment_id":130687234,"body_markdown":"ProcessBuilder can freeze indefinitely if not set up correctly. Where is code for `Execution.executeAndWait`?","body":"ProcessBuilder can freeze indefinitely if not set up correctly. Where is code for <code>Execution.executeAndWait</code>?"}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665661237,"creation_date":1665477271,"answer_id":74025236,"question_id":74014853,"body_markdown":"Some suggestions for checking that the sub-process handling is correct:\r\n\r\nCarefully check the logs to see if `ffmpeg` is waiting on input (eg overwrite file confirmation etc). You could eliminate that possibility by closing STDIN explicitly (also see `-y` flag to force overwrite, or `-nostdin` to remove use of stdin altogether):\r\n\r\n    proc.getOutputStream().close();\r\n\r\nYour command looks like a shell command as it contains pipe so isn&#39;t valid for direct launch from Java, drop the pipe and following parts, or change command to launch inside a shell which would handle the pipe correctly:\r\n\r\n    /usr/local/bin/ffmpeg -i ... | stdout: xxx.log | stderr: yyy.log\r\n    =&gt; \r\n    /usr/local/bin/ffmpeg -i ...\r\n    or\r\n    {&quot;bash&quot;,&quot;-c&quot;,&quot;/usr/local/bin/ffmpeg -i ... | stdout: xxx.log | stderr: yyy.log&quot;}\r\n\r\nThe STDOUT/ERR streams should be dealt with before calling `proc.waitFor()`, not afterwards and not after `destroy()`. You may be better off ensuring that these streams end inside `exec()`:\r\n\r\n    // execute data read/write in separate threads\r\n    Future&lt;?&gt; so = outExecutor.submit(outConsumer);\r\n    Future&lt;?&gt; se = errorExecutor.submit(errConsumer);\r\n\r\n    // Await STDOUT/ERR termination:\r\n    try {\r\n        so.get();\r\n        se.get();\r\n    } catch (InterruptedException |ExecutionException e) {\r\n        throw new RuntimeException(&quot;failed&quot;, e);\r\n    }\r\n","title":"What could make the JVM fail catastrophically (or hang indefinitely) when executing ffmpeg?","body":"<p>Some suggestions for checking that the sub-process handling is correct:</p>\n<p>Carefully check the logs to see if <code>ffmpeg</code> is waiting on input (eg overwrite file confirmation etc). You could eliminate that possibility by closing STDIN explicitly (also see <code>-y</code> flag to force overwrite, or <code>-nostdin</code> to remove use of stdin altogether):</p>\n<pre><code>proc.getOutputStream().close();\n</code></pre>\n<p>Your command looks like a shell command as it contains pipe so isn't valid for direct launch from Java, drop the pipe and following parts, or change command to launch inside a shell which would handle the pipe correctly:</p>\n<pre><code>/usr/local/bin/ffmpeg -i ... | stdout: xxx.log | stderr: yyy.log\n=&gt; \n/usr/local/bin/ffmpeg -i ...\nor\n{&quot;bash&quot;,&quot;-c&quot;,&quot;/usr/local/bin/ffmpeg -i ... | stdout: xxx.log | stderr: yyy.log&quot;}\n</code></pre>\n<p>The STDOUT/ERR streams should be dealt with before calling <code>proc.waitFor()</code>, not afterwards and not after <code>destroy()</code>. You may be better off ensuring that these streams end inside <code>exec()</code>:</p>\n<pre><code>// execute data read/write in separate threads\nFuture&lt;?&gt; so = outExecutor.submit(outConsumer);\nFuture&lt;?&gt; se = errorExecutor.submit(errConsumer);\n\n// Await STDOUT/ERR termination:\ntry {\n    so.get();\n    se.get();\n} catch (InterruptedException |ExecutionException e) {\n    throw new RuntimeException(&quot;failed&quot;, e);\n}\n</code></pre>\n"}],"owner":{"account_id":2105842,"reputation":3516,"user_id":1872194,"accept_rate":55,"display_name":"Brendan Hill"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665661237,"creation_date":1665404388,"question_id":74014853,"body_markdown":"I am trying to debug a Java microservice hosted in Kubernetes, in pods which are created dynamically by KEDA feeding off an SQS queue. Pods have dedicated resources of up to 3GB RAM, which to our knowledge is sufficient (although this assumption might need to be revisited).\r\n\r\nThe service at one point calls ffmpeg, and sometimes randomly this appears to cause catastrophic failure of the process. (Sometimes it succeed on the next attempt of exactly the same job.)\r\n\r\nIt is so catastrophic that no logs are generated, no exceptions thrown, and even the finally {} block is not even triggered.\r\n\r\nThis appears to occur in the remote k8 environment only and I have failed to replicate it locally.\r\n\r\nWhat general reasons are there for a Java, executing another program with Execution.executeAndWait(), to fail so catastrophically? \r\n\r\nHow could I continue investigating the cause?\r\n\r\n```\r\n    public void executeFfmpeg(String[] cmd) {\r\n\r\n        log.info(&quot;1&quot;);  // &lt;-- this IS logged!\r\n        int retval = 0;\r\n        try {\r\n            retval = Execution.executeAndWait(cmd, stdout, stderr);\r\n            if ( retval != 0 ) {\r\n                log.error(&quot;FFMPEG broke. stderr: {}&quot;, errorFile);   // &lt;-- this log never occurs\r\n                throw new TranscodingFailedException(&quot;ffmpeg command failed: &quot; + String.valueOf(retval) + &quot; - &quot; + String.join(&quot; &quot;, cmd)); // &lt;-- never thrown\r\n            }\r\n        } catch (InterruptedException e) {\r\n            log.error(&quot;InterruptedException caught in the middle of the execution of ffmpeg. this will now proceed to crash...&quot;, e); // &lt;-- this log never occurs\r\n            throw e;\r\n        } finally {\r\n            log.info(&quot;2&quot;); // &lt;-- THIS IS NOT CALLED!!! even in the finally block!?\r\n            stdout.close();\r\n            stderr.close();\r\n        }\r\n    }\r\n\r\n\r\n/// Execution class:\r\n\r\n    public static int executeAndWait(String[] cmd, Writer stdout, Writer stderr) throws IOException, InterruptedException {\r\n        Process proc = null;\r\n        ExecutorService outExecutor = Executors.newSingleThreadExecutor();\r\n        ExecutorService errExecutor = Executors.newSingleThreadExecutor();\r\n\r\n        try {\r\n            proc = exec(cmd, stdout, stderr, outExecutor, errExecutor);\r\n            // block until sub-process exits\r\n            return proc.waitFor();\r\n        } finally {\r\n            shutdownProcess(proc);\r\n            shutdownAndAwaitTermination(outExecutor);\r\n            shutdownAndAwaitTermination(errExecutor);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private static void shutdownProcess(Process proc) {\r\n        try {\r\n            if (proc != null) {\r\n                proc.destroy();\r\n            }\r\n        } catch (Exception e) {\r\n            log.error(e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    private static void shutdownAndAwaitTermination(ExecutorService pool) {\r\n        try {\r\n            pool.shutdown(); // Disable new tasks from being submitted\r\n            try {\r\n                // Wait a while for existing tasks to terminate\r\n                if (!pool.awaitTermination(800, TimeUnit.MILLISECONDS)) {\r\n                    pool.shutdownNow(); // Cancel currently executing tasks\r\n                }\r\n            } catch (InterruptedException ie) {\r\n                // (Re-)Cancel if current thread also interrupted\r\n                pool.shutdownNow();\r\n            }\r\n        } catch (Exception e) {\r\n            log.error(e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    private static Process exec(String[] cmd, Writer stdout, Writer stderr, ExecutorService outExecutor, ExecutorService errorExecutor) throws IOException {\r\n        // execute input command in a sub-process\r\n        Process proc = Runtime.getRuntime().exec(cmd);\r\n\r\n        StreamConsumer outConsumer = new StreamConsumer(proc.getInputStream(), stdout);\r\n        StreamConsumer errConsumer = new StreamConsumer(proc.getErrorStream(), stderr);\r\n\r\n        // execute data read/write in separate threads\r\n        outExecutor.submit(outConsumer);\r\n        errorExecutor.submit(errConsumer);\r\n\r\n        return proc;\r\n\r\n    }\r\n```\r\n\r\nAn example of the ffmpeg command is:\r\n\r\n```\r\n/usr/local/bin/ffmpeg -i /tmp/transcode-a5ff7706-488a-4e24-9ef8-9657d1254a26626348807122071896/str_CAM_Z2VH_con_H0Zqr2flbT.webm -filter_complex [0:v]setpts=0.8363824*PTS,scale=w=1280:h=720:force_original_aspect_ratio=1,pad=1280:720:(ow-iw)/2:(oh-ih)/2[v0];[0:a]aresample=async=1000[0sync] -map [v0] -map [0sync] -vsync vfr -r 25 -c:v libx264 -c:a mp3 /tmp/transcode-a5ff7706-488a-4e24-9ef8-9657d1254a26626348807122071896/intermediate-str_CAM_Z2VH_con_H0Zqr2flbT.webm.mkv | stdout: /tmp/intermediate-stdout-12310474463787935763.log | stderr: /tmp/intermediate-stderr-12166558954928907997.log\r\n```\r\n","title":"What could make the JVM fail catastrophically (or hang indefinitely) when executing ffmpeg?","body":"<p>I am trying to debug a Java microservice hosted in Kubernetes, in pods which are created dynamically by KEDA feeding off an SQS queue. Pods have dedicated resources of up to 3GB RAM, which to our knowledge is sufficient (although this assumption might need to be revisited).</p>\n<p>The service at one point calls ffmpeg, and sometimes randomly this appears to cause catastrophic failure of the process. (Sometimes it succeed on the next attempt of exactly the same job.)</p>\n<p>It is so catastrophic that no logs are generated, no exceptions thrown, and even the finally {} block is not even triggered.</p>\n<p>This appears to occur in the remote k8 environment only and I have failed to replicate it locally.</p>\n<p>What general reasons are there for a Java, executing another program with Execution.executeAndWait(), to fail so catastrophically?</p>\n<p>How could I continue investigating the cause?</p>\n<pre><code>    public void executeFfmpeg(String[] cmd) {\n\n        log.info(&quot;1&quot;);  // &lt;-- this IS logged!\n        int retval = 0;\n        try {\n            retval = Execution.executeAndWait(cmd, stdout, stderr);\n            if ( retval != 0 ) {\n                log.error(&quot;FFMPEG broke. stderr: {}&quot;, errorFile);   // &lt;-- this log never occurs\n                throw new TranscodingFailedException(&quot;ffmpeg command failed: &quot; + String.valueOf(retval) + &quot; - &quot; + String.join(&quot; &quot;, cmd)); // &lt;-- never thrown\n            }\n        } catch (InterruptedException e) {\n            log.error(&quot;InterruptedException caught in the middle of the execution of ffmpeg. this will now proceed to crash...&quot;, e); // &lt;-- this log never occurs\n            throw e;\n        } finally {\n            log.info(&quot;2&quot;); // &lt;-- THIS IS NOT CALLED!!! even in the finally block!?\n            stdout.close();\n            stderr.close();\n        }\n    }\n\n\n/// Execution class:\n\n    public static int executeAndWait(String[] cmd, Writer stdout, Writer stderr) throws IOException, InterruptedException {\n        Process proc = null;\n        ExecutorService outExecutor = Executors.newSingleThreadExecutor();\n        ExecutorService errExecutor = Executors.newSingleThreadExecutor();\n\n        try {\n            proc = exec(cmd, stdout, stderr, outExecutor, errExecutor);\n            // block until sub-process exits\n            return proc.waitFor();\n        } finally {\n            shutdownProcess(proc);\n            shutdownAndAwaitTermination(outExecutor);\n            shutdownAndAwaitTermination(errExecutor);\n        }\n    }\n\n\n\n    private static void shutdownProcess(Process proc) {\n        try {\n            if (proc != null) {\n                proc.destroy();\n            }\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n        }\n    }\n\n    private static void shutdownAndAwaitTermination(ExecutorService pool) {\n        try {\n            pool.shutdown(); // Disable new tasks from being submitted\n            try {\n                // Wait a while for existing tasks to terminate\n                if (!pool.awaitTermination(800, TimeUnit.MILLISECONDS)) {\n                    pool.shutdownNow(); // Cancel currently executing tasks\n                }\n            } catch (InterruptedException ie) {\n                // (Re-)Cancel if current thread also interrupted\n                pool.shutdownNow();\n            }\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n        }\n    }\n\n    private static Process exec(String[] cmd, Writer stdout, Writer stderr, ExecutorService outExecutor, ExecutorService errorExecutor) throws IOException {\n        // execute input command in a sub-process\n        Process proc = Runtime.getRuntime().exec(cmd);\n\n        StreamConsumer outConsumer = new StreamConsumer(proc.getInputStream(), stdout);\n        StreamConsumer errConsumer = new StreamConsumer(proc.getErrorStream(), stderr);\n\n        // execute data read/write in separate threads\n        outExecutor.submit(outConsumer);\n        errorExecutor.submit(errConsumer);\n\n        return proc;\n\n    }\n</code></pre>\n<p>An example of the ffmpeg command is:</p>\n<pre><code>/usr/local/bin/ffmpeg -i /tmp/transcode-a5ff7706-488a-4e24-9ef8-9657d1254a26626348807122071896/str_CAM_Z2VH_con_H0Zqr2flbT.webm -filter_complex [0:v]setpts=0.8363824*PTS,scale=w=1280:h=720:force_original_aspect_ratio=1,pad=1280:720:(ow-iw)/2:(oh-ih)/2[v0];[0:a]aresample=async=1000[0sync] -map [v0] -map [0sync] -vsync vfr -r 25 -c:v libx264 -c:a mp3 /tmp/transcode-a5ff7706-488a-4e24-9ef8-9657d1254a26626348807122071896/intermediate-str_CAM_Z2VH_con_H0Zqr2flbT.webm.mkv | stdout: /tmp/intermediate-stdout-12310474463787935763.log | stderr: /tmp/intermediate-stderr-12166558954928907997.log\n</code></pre>\n"},{"tags":["java","groovy","dynamic","assert","execute"],"comments":[{"owner":{"account_id":7979619,"reputation":347,"user_id":6021482,"accept_rate":77,"display_name":"Azeem112"},"score":0,"creation_date":1665660821,"post_id":74025357,"comment_id":130754336,"body_markdown":"I have tried but it gives an error that matching constructor isn&#39;t found.","body":"I have tried but it gives an error that matching constructor isn&#39;t found."},{"owner":{"account_id":5050148,"reputation":662,"user_id":4054975,"display_name":"Onno Rouast"},"score":0,"creation_date":1665670400,"post_id":74025357,"comment_id":130757794,"body_markdown":"that probably means means you got the wrong class name","body":"that probably means means you got the wrong class name"},{"owner":{"account_id":7979619,"reputation":347,"user_id":6021482,"accept_rate":77,"display_name":"Azeem112"},"score":0,"creation_date":1665673552,"post_id":74025357,"comment_id":130759031,"body_markdown":"Thanks, I&#39;ve managed to do it using def object = Eval.me(&quot;Code&quot;) ;","body":"Thanks, I&#39;ve managed to do it using def object = Eval.me(&quot;Code&quot;) ;"}],"owner":{"account_id":7979619,"reputation":347,"user_id":6021482,"accept_rate":77,"display_name":"Azeem112"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1665673560,"answer_count":0,"score":0,"last_activity_date":1665661039,"creation_date":1665477916,"question_id":74025357,"body_markdown":"I have around 250 classes with almost the same functions. The selection of classes is based on the parameter.\r\n\r\nThe name of the class is customObject(n) where n is 1-250.\r\n\r\nInstead of adding 250 if else conditions based on the parameter I want to dynamically create the instance of the class based on the given parameter. \r\n\r\nI have created a string field for the class names and I&#39;ve tried the below. \r\n\r\n    String ClassName = &quot;FullPath&quot; + className + n + &quot;object.create()&quot;;\r\n    \r\n    assert &quot;className&quot;;\r\n    def object = ClassName.execte();\r\n\r\nassert is working fine but I can&#39;t return the object from assert as I need to do further operations with this dynamic object. \r\n\r\n    def test = assert &quot;className&quot;;\r\n    assert &quot;def test = &quot; + className;\r\n    return test;\r\n\r\nthe above lines aren&#39;t working and execute method is throwing an error that the file is not found. \r\n\r\nI have also tried `groovy -e &quot;script&quot;` but it&#39;s not working as excepted as well.\r\n\r\nHow can I create a dynamic object to optimize my code instead of creating 250 if conditions? \r\n\r\nThe only piece of code that I want to change is \r\n\r\n    Long ObjectRk = 1000; //ObjectRk is the function parameter\r\n    def Object = CustomObject110.object.fetchIfExist(ObjectRk);\r\n\r\nhere at 110, I want to write the class of my choice and the remaining piece of code is general.","title":"Java groovy creating dynamic class object","body":"<p>I have around 250 classes with almost the same functions. The selection of classes is based on the parameter.</p>\n<p>The name of the class is customObject(n) where n is 1-250.</p>\n<p>Instead of adding 250 if else conditions based on the parameter I want to dynamically create the instance of the class based on the given parameter.</p>\n<p>I have created a string field for the class names and I've tried the below.</p>\n<pre><code>String ClassName = &quot;FullPath&quot; + className + n + &quot;object.create()&quot;;\n\nassert &quot;className&quot;;\ndef object = ClassName.execte();\n</code></pre>\n<p>assert is working fine but I can't return the object from assert as I need to do further operations with this dynamic object.</p>\n<pre><code>def test = assert &quot;className&quot;;\nassert &quot;def test = &quot; + className;\nreturn test;\n</code></pre>\n<p>the above lines aren't working and execute method is throwing an error that the file is not found.</p>\n<p>I have also tried <code>groovy -e &quot;script&quot;</code> but it's not working as excepted as well.</p>\n<p>How can I create a dynamic object to optimize my code instead of creating 250 if conditions?</p>\n<p>The only piece of code that I want to change is</p>\n<pre><code>Long ObjectRk = 1000; //ObjectRk is the function parameter\ndef Object = CustomObject110.object.fetchIfExist(ObjectRk);\n</code></pre>\n<p>here at 110, I want to write the class of my choice and the remaining piece of code is general.</p>\n"},{"tags":["java","spring-boot","rx-java","project-reactor"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1632198593,"post_id":69262929,"comment_id":122421425,"body_markdown":"Can you show the constructor(s) for the `Code` class?  InjectMocks is a bit fussy about whether to choose a constructor, or try to inject the fields directly.  If it can&#39;t find a suitable constructor, it might go for field injection, and fall over because of the `final`.","body":"Can you show the constructor(s) for the <code>Code</code> class?  InjectMocks is a bit fussy about whether to choose a constructor, or try to inject the fields directly.  If it can&#39;t find a suitable constructor, it might go for field injection, and fall over because of the <code>final</code>."},{"owner":{"account_id":3965515,"reputation":2640,"user_id":3271600,"accept_rate":27,"display_name":"GvSharma"},"score":0,"creation_date":1632199133,"post_id":69262929,"comment_id":122421510,"body_markdown":"have you seen this.. https://stackoverflow.com/questions/56883605/how-to-test-function-inside-rxjava-flatmap","body":"have you seen this.. <a href=\"https://stackoverflow.com/questions/56883605/how-to-test-function-inside-rxjava-flatmap\" title=\"how to test function inside rxjava flatmap\">stackoverflow.com/questions/56883605/&hellip;</a>"},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1632199427,"post_id":69262929,"comment_id":122421562,"body_markdown":"Can you confirm which line is throwing the Exception?   On some tests, it’s failing on the `when` before it ever involves the code under test - in which case the solution is to simply use `doReturn(Mono.just(new ResolvedObject())).when(objectResolver).resolve(any())`.   Note the different syntax here, that the `when` contains only the object, not the call to `resolve`.","body":"Can you confirm which line is throwing the Exception?   On some tests, it’s failing on the <code>when</code> before it ever involves the code under test - in which case the solution is to simply use <code>doReturn(Mono.just(new ResolvedObject())).when(objectResolver).resolve(any())</code>.   Note the different syntax here, that the <code>when</code> contains only the object, not the call to <code>resolve</code>."},{"owner":{"account_id":13286748,"reputation":303,"user_id":9592585,"display_name":"Shubhankar Agrawal"},"score":0,"creation_date":1632204579,"post_id":69262929,"comment_id":122422651,"body_markdown":"@DawoodibnKareem, I&#39;m using Lombok&#39;s RequiredArgsConstructor","body":"@DawoodibnKareem, I&#39;m using Lombok&#39;s RequiredArgsConstructor"},{"owner":{"account_id":13286748,"reputation":303,"user_id":9592585,"display_name":"Shubhankar Agrawal"},"score":0,"creation_date":1632204634,"post_id":69262929,"comment_id":122422662,"body_markdown":"@GvSharma, yes I tried that too, unfortunately didn&#39;t work.","body":"@GvSharma, yes I tried that too, unfortunately didn&#39;t work."},{"owner":{"account_id":13286748,"reputation":303,"user_id":9592585,"display_name":"Shubhankar Agrawal"},"score":0,"creation_date":1632204671,"post_id":69262929,"comment_id":122422676,"body_markdown":"@racraman, I&#39;m not getting an exception, but an unnecessary stubbing from Mockito and no coverage on the code inside the flatmap.","body":"@racraman, I&#39;m not getting an exception, but an unnecessary stubbing from Mockito and no coverage on the code inside the flatmap."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1632253048,"post_id":69262929,"comment_id":122441287,"body_markdown":"My advice would be to try it without the Lombok annotation.  Mockito uses its own reflection, and I don&#39;t know whether it will find the methods generated by Lombok.","body":"My advice would be to try it without the Lombok annotation.  Mockito uses its own reflection, and I don&#39;t know whether it will find the methods generated by Lombok."}],"answers":[{"tags":[],"owner":{"account_id":26576601,"reputation":21,"user_id":20201851,"display_name":"Aankit Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665660917,"creation_date":1665660917,"answer_id":74055091,"question_id":69262929,"body_markdown":"You need to subscribe the mono to release the item.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Test\r\n    void testToTest() {\r\n        when(objectResolver.resolve(any()).thenReturn(Mono.just(new ResolvedObject()));\r\n        StepVerifier.create(code.toTest(new Object()))\r\n            .expectNext(&quot;resultString&quot;)\r\n            .verifyComplete();\r\n            \r\n            Mono&lt;String&gt; returnedMono = code.toTest(new Object());\r\n            returnedMono.subscribe();\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Mockito Unable to mock code within FlatMap RxJava","body":"<p>You need to subscribe the mono to release the item.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Test\nvoid testToTest() {\n    when(objectResolver.resolve(any()).thenReturn(Mono.just(new ResolvedObject()));\n    StepVerifier.create(code.toTest(new Object()))\n        .expectNext(\"resultString\")\n        .verifyComplete();\n        \n        Mono&lt;String&gt; returnedMono = code.toTest(new Object());\n        returnedMono.subscribe();\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":13286748,"reputation":303,"user_id":9592585,"display_name":"Shubhankar Agrawal"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":789,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1665660917,"creation_date":1632193742,"question_id":69262929,"body_markdown":"I have a code block with a flatMap which I&#39;m trying to test, but it seems Mockito does not go inside the flatMap. \r\n\r\nHere is my actual code class Code.java\r\n```\r\n\r\nprivate final ObjectResolver objectResolver;\r\n\r\npublic Mono&lt;String&gt; function toTest(Object obj) {\r\n    return Mono.just(obj)\r\n        .flatMap(obj -&gt; objectResolver.resolve(obj.getField())\r\n             .map(resolved -&gt; StringUtils.join(resolved.getField(), obj.getAnotherField())))\r\n}\r\n```\r\n\r\nAnd here is how I&#39;m trying to test it out:\r\n```\r\n@InjectMocks\r\nprivate Code code\r\n\r\n@Mock\r\nprivate ObjectResolver objectResolver\r\n\r\n@Test\r\nvoid testToTest() {\r\n    when(objectResolver.resolve(any()).thenReturn(Mono.just(new ResolvedObject()));\r\n    StepVerifier.create(code.toTest(new Object()))\r\n        .expectNext(&quot;resultString&quot;)\r\n        .verifyComplete();\r\n}\r\n```\r\nMockito doesn&#39;t seem to go within the flatMap when I try to debug. Any ideas?","title":"Mockito Unable to mock code within FlatMap RxJava","body":"<p>I have a code block with a flatMap which I'm trying to test, but it seems Mockito does not go inside the flatMap.</p>\n<p>Here is my actual code class Code.java</p>\n<pre><code>\nprivate final ObjectResolver objectResolver;\n\npublic Mono&lt;String&gt; function toTest(Object obj) {\n    return Mono.just(obj)\n        .flatMap(obj -&gt; objectResolver.resolve(obj.getField())\n             .map(resolved -&gt; StringUtils.join(resolved.getField(), obj.getAnotherField())))\n}\n</code></pre>\n<p>And here is how I'm trying to test it out:</p>\n<pre><code>@InjectMocks\nprivate Code code\n\n@Mock\nprivate ObjectResolver objectResolver\n\n@Test\nvoid testToTest() {\n    when(objectResolver.resolve(any()).thenReturn(Mono.just(new ResolvedObject()));\n    StepVerifier.create(code.toTest(new Object()))\n        .expectNext(&quot;resultString&quot;)\n        .verifyComplete();\n}\n</code></pre>\n<p>Mockito doesn't seem to go within the flatMap when I try to debug. Any ideas?</p>\n"},{"tags":["java","enums","jackson","annotations"],"comments":[{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":0,"creation_date":1665730574,"post_id":74053582,"comment_id":130770894,"body_markdown":"You can always add a `JavaDoc` - `@see`, `@link` tags. You can mention about an enum in `JavaDoc` and `IDE` will find that usage. [Javadoc: @see and @link](https://www.baeldung.com/javadoc-see-vs-link)","body":"You can always add a <code>JavaDoc</code> - <code>@see</code>, <code>@link</code> tags. You can mention about an enum in <code>JavaDoc</code> and <code>IDE</code> will find that usage. <a href=\"https://www.baeldung.com/javadoc-see-vs-link\" rel=\"nofollow noreferrer\">Javadoc: @see and @link</a>"}],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665658414,"creation_date":1665658414,"answer_id":74054582,"question_id":74053582,"body_markdown":"The value for annotation needs to be a compile time constant, so I think there is no straight forward way unless you use your own implementation of Annotation which might look like:\r\n\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ElementType.METHOD})\r\n    public @interface TestAnnotation {\r\n        MyEnum name() default MyEnum.Enum1;\r\n    }\r\n    \r\n    enum MyEnum { \r\n        Enum1, \r\n        Enum2; \r\n    }\r\n\r\n\r\n@JsonSubTypes.Type&#39;s name uses String for which compile time constants can only be [primitive or String][1].\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28","title":"How to link between a String that matches an Enum to the Enum itself in Java (to make IDE track its usage)","body":"<p>The value for annotation needs to be a compile time constant, so I think there is no straight forward way unless you use your own implementation of Annotation which might look like:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.METHOD})\npublic @interface TestAnnotation {\n    MyEnum name() default MyEnum.Enum1;\n}\n\nenum MyEnum { \n    Enum1, \n    Enum2; \n}\n</code></pre>\n<p>@JsonSubTypes.Type's name uses String for which compile time constants can only be <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28\" rel=\"nofollow noreferrer\">primitive or String</a>.</p>\n"}],"owner":{"account_id":10649563,"reputation":577,"user_id":7841035,"accept_rate":0,"display_name":"sale108"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665660837,"creation_date":1665653852,"question_id":74053582,"body_markdown":"One of the benefits of using IDE is it tracks your usage of different parts of the code, such as your usage of enums:\r\n\r\n![enum usage example](https://i.stack.imgur.com/TAD6J.jpg)\r\n\r\nIn Jackson (Java library) occasionally you are required to use strings in its custom annotations, if the string is actually a representation of a defined Enum, you lose this awesome tracking feature.\r\n \r\nfor example (the field `name` requires Strings that in this match the Enum values):\r\n\r\n```java\r\npublic enum MyEnum {\r\n    ENUM1,\r\n    ENUM2\r\n}\r\n\r\n@JsonSubTypes({\r\n\t@JsonSubTypes.Type(value = MyClass1.class, name = &quot;ENUM1&quot;),\r\n\t@JsonSubTypes.Type(value = MyClass2.class, name = &quot;ENUM2&quot;)\r\n})\r\n```\r\n\r\nUnfortunately, I can&#39;t use the actual enum because it requires the value at compile time, so `.toString()` and `.name()` can&#39;t be used here.\r\n\r\nAnd due to that, the IDE won&#39;t recognize it&#39;s being used.\r\n\r\n#### The question is:\r\nIs there a way I can preserve tracking when using Jackson annotations?\r\n(maybe there&#39;s a hack to use the enum itself, or alternatively to mark that the used string is related to the enum? or anything else...)","title":"How to link between a String that matches an Enum to the Enum itself in Java (to make IDE track its usage)","body":"<p>One of the benefits of using IDE is it tracks your usage of different parts of the code, such as your usage of enums:</p>\n<p><img src=\"https://i.stack.imgur.com/TAD6J.jpg\" alt=\"enum usage example\" /></p>\n<p>In Jackson (Java library) occasionally you are required to use strings in its custom annotations, if the string is actually a representation of a defined Enum, you lose this awesome tracking feature.</p>\n<p>for example (the field <code>name</code> requires Strings that in this match the Enum values):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum MyEnum {\n    ENUM1,\n    ENUM2\n}\n\n@JsonSubTypes({\n    @JsonSubTypes.Type(value = MyClass1.class, name = &quot;ENUM1&quot;),\n    @JsonSubTypes.Type(value = MyClass2.class, name = &quot;ENUM2&quot;)\n})\n</code></pre>\n<p>Unfortunately, I can't use the actual enum because it requires the value at compile time, so <code>.toString()</code> and <code>.name()</code> can't be used here.</p>\n<p>And due to that, the IDE won't recognize it's being used.</p>\n<h4>The question is:</h4>\n<p>Is there a way I can preserve tracking when using Jackson annotations?\n(maybe there's a hack to use the enum itself, or alternatively to mark that the used string is related to the enum? or anything else...)</p>\n"},{"tags":["java","multithreading","concurrency","wait","notify"],"comments":[{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":1,"creation_date":1665661614,"post_id":74054669,"comment_id":130754629,"body_markdown":"TLDR: `o.wait()` will not return until some _other thread_ calls `o.notify()`. https://stackoverflow.com/a/32595029/801894","body":"TLDR: <code>o.wait()</code> will not return until some <i>other thread</i> calls <code>o.notify()</code>. <a href=\"https://stackoverflow.com/a/32595029/801894\">stackoverflow.com/a/32595029/801894</a>"},{"owner":{"account_id":9810219,"reputation":55,"user_id":7268653,"display_name":"Tommaso Pellegrini"},"score":0,"creation_date":1665664488,"post_id":74054669,"comment_id":130755567,"body_markdown":"And that other thread, I imagine, has to be declared explicitly since otherwise there would be no way for it to execute the instruction notify(), right?","body":"And that other thread, I imagine, has to be declared explicitly since otherwise there would be no way for it to execute the instruction notify(), right?"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1665665118,"post_id":74054669,"comment_id":130755801,"body_markdown":"I don&#39;t know about &quot;declared.&quot; A thread in a Java program can exist without any declared variable referring to it. Every Java program has a _main_ thread, and it would be rather unusual for a program to have a `Thread` variable that refers to it. It&#39;s also possible for a program to call `new&#160;Thread(...).start()`, and thereby create a new thread without ever saving a reference to the `Thread` instance in any variable.","body":"I don&#39;t know about &quot;declared.&quot; A thread in a Java program can exist without any declared variable referring to it. Every Java program has a <i>main</i> thread, and it would be rather unusual for a program to have a <code>Thread</code> variable that refers to it. It&#39;s also possible for a program to call <code>new Thread(...).start()</code>, and thereby create a new thread without ever saving a reference to the <code>Thread</code> instance in any variable."},{"owner":{"account_id":9810219,"reputation":55,"user_id":7268653,"display_name":"Tommaso Pellegrini"},"score":0,"creation_date":1665666973,"post_id":74054669,"comment_id":130756564,"body_markdown":"That was my bad, by declared I meant creating a `Thread t1 = (()-&gt;{...});` and then doing the `t1.start`","body":"That was my bad, by declared I meant creating a <code>Thread t1 = (()-&gt;{...});</code> and then doing the <code>t1.start</code>"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":1,"creation_date":1665672314,"post_id":74054669,"comment_id":130758536,"body_markdown":"OK then. Yes. There must be at least two concurrent threads in order for the program to use `wait()` and `notify()` in any meaningful way.","body":"OK then. Yes. There must be at least two concurrent threads in order for the program to use <code>wait()</code> and <code>notify()</code> in any meaningful way."}],"answers":[{"tags":[],"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665660762,"creation_date":1665660762,"answer_id":74055060,"question_id":74054669,"body_markdown":"Once you call ```mutex#wait```, the current thread is added to the wait set of object ```mutex```.   And thread will not execute **any further instructions** until it has been removed from ```mutex```&#39;s wait set. That&#39;s why ```step2``` cannot be executed by the current thread.\r\n\r\n\r\nThe current thread will be removed from the wait set and resume if other threads call ```mutex#notify/notifyAll```.  See [JLS#WAIT][1] for all situations in which the current thread can resume..\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.2.1","title":"Using synchronized blocks, notify() and wait() the right way","body":"<p>Once you call <code>mutex#wait</code>, the current thread is added to the wait set of object <code>mutex</code>.   And thread will not execute <strong>any further instructions</strong> until it has been removed from <code>mutex</code>'s wait set. That's why <code>step2</code> cannot be executed by the current thread.</p>\n<p>The current thread will be removed from the wait set and resume if other threads call <code>mutex#notify/notifyAll</code>.  See <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.2.1\" rel=\"nofollow noreferrer\">JLS#WAIT</a> for all situations in which the current thread can resume..</p>\n"}],"owner":{"account_id":9810219,"reputation":55,"user_id":7268653,"display_name":"Tommaso Pellegrini"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74055060,"answer_count":1,"score":0,"last_activity_date":1665660762,"creation_date":1665658853,"question_id":74054669,"body_markdown":"I&#39;m curious to submit here a short example I made and hopefully have someone able to explain to me one thing: is it possible to use the wait() and notify() inside a synchronized block without having to declare threads explicitly? (AKA: not using dedicated threads). \r\n\r\nHere&#39;s the example: \r\n```\r\npublic class mutex {\r\n\t\r\n\tprivate Object mutex = new Object(); \r\n\t\r\n\tpublic mutex(Object mutex) {\r\n\t\tthis.mutex = mutex; \r\n\t}\r\n\t\r\n\tpublic void step1() throws InterruptedException {\r\n\t\tSystem.out.println(&quot;acquiring lock&quot;); \r\n\t\tsynchronized(mutex) {\r\n\t\t\tSystem.out.println(&quot;got in sync block&quot;); \r\n\t\t\tSystem.out.println(&quot;calling wait&quot;); \r\n\t\t\tmutex.wait(); \r\n\t\t\tSystem.out.println(&quot;wait finished &quot;); \r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void step2() throws InterruptedException{\r\n\t\tSystem.out.println(&quot;acquiring lock&quot;);\r\n\t\tsynchronized(mutex){\r\n\t\t\tSystem.out.println(&quot;got in sync block&quot;); \r\n\t\t\tSystem.out.println(&quot;calling notify&quot;); \r\n\t\t\tmutex.notify();\r\n\t\t\tSystem.out.println(&quot;notify called&quot;); \r\n\t\t}\r\n\t}\r\n```\r\n\r\nThose two simple step are just prints for logging and what should be happening. \r\nThe idea is to be able to call a wait() in step1 and be able to complete the call once step2 has been called with its notify(). \r\n\r\nNow, as far as I understood the whole thing, this is the right way to do what I want to do: \r\n```\r\npublic void go1() {\r\n\t\tObject mutex = new Object(); \r\n\t\tmutex m = new mutex(mutex); \r\n\t\t\r\n\t\t\r\n\t\tThread t1 = new Thread(()-&gt;{\r\n\t\t\ttry {\r\n\t\t\t\tm.step1();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}); \r\n\t\t\r\n\t\tThread t2 = new Thread(()-&gt;{\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tm.step2();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}); \r\n\t\tt1.start(); \r\n\t\tt2.start();\r\n\t}\r\n```\r\n\r\n and finally the main \r\n\r\n    public static void main(String[] args) {\r\n\t\tObject mutex = new Object();\r\n\t\t\r\n\t\tnew mutex(mutex).go1();\r\n\t\t//new mutex(mutex).go2();\r\n\t}\r\n\r\n\r\nThe above code works and shows what I am expecting: \r\n```\r\nacquiring lock\r\ngot in sync block\r\ncalling wait\r\nacquiring lock\r\ngot in sync block\r\ncalling notify\r\nnotify called\r\nwait finished \r\n```\r\nI get why it works. This is what I expected to happen and how I have been taught to do this. The question comes now as I will paste the second variant of the main function I wanted to test - this one just hangs when the wait() is called. \r\n\r\n    public void go2() {\r\n\t\tObject mutex = new Object(); \r\n\t\tmutex m = new mutex(mutex); \r\n\t\t\r\n\t\ttry {\r\n\t\t\tm.step1();\r\n\t\t\tThread.sleep(1000);\r\n\t\t\tm.step2();\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nWhy does this hang? \r\nIs it because there is just one thread doing everything and it goes into waiting state after the wait() is called? \r\nI know that when wait is called on the monitor object it should also release the lock, so why in this case the program can&#39;t get to call the step2()? \r\nIs there a way to use the my second go() function to achieve this process or is it impossible for it to work? \r\n\r\nTLDR just so I am making sure I can be understood: do I have to use dedicated threads to also use properly wait() and notify()? Because I seem to get deadlocks if I don&#39;t. \r\n\r\nThank you. ","title":"Using synchronized blocks, notify() and wait() the right way","body":"<p>I'm curious to submit here a short example I made and hopefully have someone able to explain to me one thing: is it possible to use the wait() and notify() inside a synchronized block without having to declare threads explicitly? (AKA: not using dedicated threads).</p>\n<p>Here's the example:</p>\n<pre><code>public class mutex {\n    \n    private Object mutex = new Object(); \n    \n    public mutex(Object mutex) {\n        this.mutex = mutex; \n    }\n    \n    public void step1() throws InterruptedException {\n        System.out.println(&quot;acquiring lock&quot;); \n        synchronized(mutex) {\n            System.out.println(&quot;got in sync block&quot;); \n            System.out.println(&quot;calling wait&quot;); \n            mutex.wait(); \n            System.out.println(&quot;wait finished &quot;); \n        }\n    }\n    \n    public void step2() throws InterruptedException{\n        System.out.println(&quot;acquiring lock&quot;);\n        synchronized(mutex){\n            System.out.println(&quot;got in sync block&quot;); \n            System.out.println(&quot;calling notify&quot;); \n            mutex.notify();\n            System.out.println(&quot;notify called&quot;); \n        }\n    }\n</code></pre>\n<p>Those two simple step are just prints for logging and what should be happening.\nThe idea is to be able to call a wait() in step1 and be able to complete the call once step2 has been called with its notify().</p>\n<p>Now, as far as I understood the whole thing, this is the right way to do what I want to do:</p>\n<pre><code>public void go1() {\n        Object mutex = new Object(); \n        mutex m = new mutex(mutex); \n        \n        \n        Thread t1 = new Thread(()-&gt;{\n            try {\n                m.step1();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }); \n        \n        Thread t2 = new Thread(()-&gt;{\n            try {\n                Thread.sleep(1000);\n                m.step2();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }); \n        t1.start(); \n        t2.start();\n    }\n</code></pre>\n<p>and finally the main</p>\n<pre><code>public static void main(String[] args) {\n    Object mutex = new Object();\n    \n    new mutex(mutex).go1();\n    //new mutex(mutex).go2();\n}\n</code></pre>\n<p>The above code works and shows what I am expecting:</p>\n<pre><code>acquiring lock\ngot in sync block\ncalling wait\nacquiring lock\ngot in sync block\ncalling notify\nnotify called\nwait finished \n</code></pre>\n<p>I get why it works. This is what I expected to happen and how I have been taught to do this. The question comes now as I will paste the second variant of the main function I wanted to test - this one just hangs when the wait() is called.</p>\n<pre><code>public void go2() {\n    Object mutex = new Object(); \n    mutex m = new mutex(mutex); \n    \n    try {\n        m.step1();\n        Thread.sleep(1000);\n        m.step2();\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Why does this hang?\nIs it because there is just one thread doing everything and it goes into waiting state after the wait() is called?\nI know that when wait is called on the monitor object it should also release the lock, so why in this case the program can't get to call the step2()?\nIs there a way to use the my second go() function to achieve this process or is it impossible for it to work?</p>\n<p>TLDR just so I am making sure I can be understood: do I have to use dedicated threads to also use properly wait() and notify()? Because I seem to get deadlocks if I don't.</p>\n<p>Thank you.</p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"owner":{"account_id":10066486,"reputation":725,"user_id":7441537,"display_name":"Andr&#233; Machado"},"score":0,"creation_date":1664369900,"post_id":73881781,"comment_id":130455675,"body_markdown":"Map the list and calculate the distance to each location. Sort and extract top 3? It would be good to have some example of what you tried so far","body":"Map the list and calculate the distance to each location. Sort and extract top 3? It would be good to have some example of what you tried so far"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1664376947,"post_id":73881781,"comment_id":130458620,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":18459057,"reputation":3,"user_id":14631286,"display_name":"IcePack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665660205,"creation_date":1665660205,"answer_id":74054941,"question_id":73881781,"body_markdown":"I ussed Knn Query in Apache Sedona. more info [here][1]\r\n\r\n\r\n  [1]: https://sedona.apache.org/archive/tutorial/sql/?h=knn#knn-query","title":"Find the closest bus stops on the map using Scala spark","body":"<p>I ussed Knn Query in Apache Sedona. more info <a href=\"https://sedona.apache.org/archive/tutorial/sql/?h=knn#knn-query\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":18459057,"reputation":3,"user_id":14631286,"display_name":"IcePack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74054941,"answer_count":1,"score":-1,"last_activity_date":1665660205,"creation_date":1664369544,"question_id":73881781,"body_markdown":"I have a list of locations for the bus stops:\r\n\r\nbusStopLocations =[(x1,y1),(x2,y2), etc]\r\n\r\nI&#39;m trying to find 3 closest locations to my current location(X,Y) using Scala. any suggestions? \r\n\r\n\r\n\r\n","title":"Find the closest bus stops on the map using Scala spark","body":"<p>I have a list of locations for the bus stops:</p>\n<p>busStopLocations =[(x1,y1),(x2,y2), etc]</p>\n<p>I'm trying to find 3 closest locations to my current location(X,Y) using Scala. any suggestions?</p>\n"},{"tags":["java","json","jackson","json-deserialization"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665660044,"creation_date":1665652142,"answer_id":74053200,"question_id":74052556,"body_markdown":"Instead of your method `responseInfo()` you can declare a method returning a single-entry Map that would serve as a *getter*.\r\n\r\n***Note*** that this method doesn&#39;t require any data-binding annotations, it just needs to be named as a conventional getter in order to be treated by Jackson as a getter.\r\n\r\nTo avoid duplicating `&quot;status&quot;` property as a part of the attribute `&quot;responseInfo&quot;` and as a representation of the `status` field while serializing `DefaultResponse` you can either\r\n* Prevent Jackson accessing it by not exposing a getter (which might be not convenient because you might need a getter).\r\n* Another way is to annotate the field with `@JsonIgnore`, that would cause the `status` to be omitted during both *serialization* and *desrialization*.\r\n* The most flexible solution is to make use of the `access` attribute of the `@JsonProperty` annotation because it gives more control. For instance, if assigning `access` attribute to `JsonProperty.Access.WRITE_ONLY` it would be taken into account while deserializing JSON, but excluded during serialization.\r\n\r\nThat&#39;s how it might be implemented:\r\n\r\n    @JsonInclude(value = JsonInclude.Include.NON_EMPTY)\r\n    @Setter\r\n    @Getter\r\n    public static class DefaultResponse {\r\n        @JsonProperty(value = &quot;status&quot;, access = JsonProperty.Access.WRITE_ONLY)\r\n        private String status;\r\n        \r\n        public Map&lt;String, String&gt; getResponseInfo() {\r\n            return Map.of(&quot;status&quot;, status);\r\n        }\r\n    }\r\n\r\n*Usage example:*\r\n\r\n    public static void main(String[] args) throws JsonProcessingException {\r\n        ParentResponse response = new ParentResponse();\r\n        response.setStatus(&quot;success&quot;);\r\n        \r\n        String jsonResponse = new ObjectMapper().writer()\r\n            .withDefaultPrettyPrinter()\r\n            .writeValueAsString(response);\r\n        \r\n        System.out.println(jsonResponse);\r\n    }\r\n\r\n*Output:*\r\n```\r\n{\r\n  &quot;responseInfo&quot; : {\r\n    &quot;status&quot; : &quot;success&quot;\r\n  }\r\n}\r\n```","title":"Add parent variables inside an json object while deserialize in jackson","body":"<p>Instead of your method <code>responseInfo()</code> you can declare a method returning a single-entry Map that would serve as a <em>getter</em>.</p>\n<p><em><strong>Note</strong></em> that this method doesn't require any data-binding annotations, it just needs to be named as a conventional getter in order to be treated by Jackson as a getter.</p>\n<p>To avoid duplicating <code>&quot;status&quot;</code> property as a part of the attribute <code>&quot;responseInfo&quot;</code> and as a representation of the <code>status</code> field while serializing <code>DefaultResponse</code> you can either</p>\n<ul>\n<li>Prevent Jackson accessing it by not exposing a getter (which might be not convenient because you might need a getter).</li>\n<li>Another way is to annotate the field with <code>@JsonIgnore</code>, that would cause the <code>status</code> to be omitted during both <em>serialization</em> and <em>desrialization</em>.</li>\n<li>The most flexible solution is to make use of the <code>access</code> attribute of the <code>@JsonProperty</code> annotation because it gives more control. For instance, if assigning <code>access</code> attribute to <code>JsonProperty.Access.WRITE_ONLY</code> it would be taken into account while deserializing JSON, but excluded during serialization.</li>\n</ul>\n<p>That's how it might be implemented:</p>\n<pre><code>@JsonInclude(value = JsonInclude.Include.NON_EMPTY)\n@Setter\n@Getter\npublic static class DefaultResponse {\n    @JsonProperty(value = &quot;status&quot;, access = JsonProperty.Access.WRITE_ONLY)\n    private String status;\n    \n    public Map&lt;String, String&gt; getResponseInfo() {\n        return Map.of(&quot;status&quot;, status);\n    }\n}\n</code></pre>\n<p><em>Usage example:</em></p>\n<pre><code>public static void main(String[] args) throws JsonProcessingException {\n    ParentResponse response = new ParentResponse();\n    response.setStatus(&quot;success&quot;);\n    \n    String jsonResponse = new ObjectMapper().writer()\n        .withDefaultPrettyPrinter()\n        .writeValueAsString(response);\n    \n    System.out.println(jsonResponse);\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>{\n  &quot;responseInfo&quot; : {\n    &quot;status&quot; : &quot;success&quot;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2338218,"reputation":23,"user_id":2050089,"display_name":"Manivannan R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":597,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74053200,"answer_count":1,"score":1,"last_activity_date":1665660044,"creation_date":1665649189,"question_id":74052556,"body_markdown":"I wanted to add extended class variables inside and jsonobject during deserialization in jackson.\r\n\r\nParentResponse Class :\r\n```\r\n@JsonInclude(value = Include.NON_EMPTY)\r\npublic class ParentResponse extends DefaultResponse {\r\n\r\n@JsonProperty(&quot;parentname&quot;)\r\nprivate String parentName;\r\n\r\n// Getter and setter\r\n}\r\n```\r\nDefaultResponse Class :\r\n```\r\n@JsonInclude(value = Include.NON_EMPTY)\r\npublic class DefaultResponse{\r\n\r\n@JsonProperty(&quot;status&quot;)\r\nprivate String status;\r\n\r\n// Getter and Setter\r\n\r\n\r\n@JsonProperty(&quot;responseInfo&quot;)\r\n\tpublic JSONObject responseInfo() {\r\n\t\tJSONObject jsonResponse = new JSONObject();\r\n\t\tjsonResponse.put(&quot;status&quot;, this.status);\r\n\t\treturn new JSONObject();\r\n\t}\r\n}\r\n```\r\n\r\n```\r\npublic class ResponseResource {\r\npublic static void main(String[] args) {\r\nParentResponse response = new ParentResponse();\r\n\t\tresponse.setStatus(&quot;success&quot;);\r\nSystem.out.println(new ObjectMapper().writer().withDefaultPrettyPrinter().writeValueAsString(response));\r\n}\r\n}\r\n```\r\n\r\nThis returns \r\n```\r\n{\r\n    &quot;status&quot;: &quot;success&quot;,\r\n}\r\n```\r\n\r\nMy Requirement is \r\n\r\n```\r\n{\r\n&quot;responseInfo&quot; : {\r\n     &quot;status&quot; : &quot;success&quot;\r\n}\r\n```\r\n\r\nIs this possible without customSerializer in jackson ?\r\n","title":"Add parent variables inside an json object while deserialize in jackson","body":"<p>I wanted to add extended class variables inside and jsonobject during deserialization in jackson.</p>\n<p>ParentResponse Class :</p>\n<pre><code>@JsonInclude(value = Include.NON_EMPTY)\npublic class ParentResponse extends DefaultResponse {\n\n@JsonProperty(&quot;parentname&quot;)\nprivate String parentName;\n\n// Getter and setter\n}\n</code></pre>\n<p>DefaultResponse Class :</p>\n<pre><code>@JsonInclude(value = Include.NON_EMPTY)\npublic class DefaultResponse{\n\n@JsonProperty(&quot;status&quot;)\nprivate String status;\n\n// Getter and Setter\n\n\n@JsonProperty(&quot;responseInfo&quot;)\n    public JSONObject responseInfo() {\n        JSONObject jsonResponse = new JSONObject();\n        jsonResponse.put(&quot;status&quot;, this.status);\n        return new JSONObject();\n    }\n}\n</code></pre>\n<pre><code>public class ResponseResource {\npublic static void main(String[] args) {\nParentResponse response = new ParentResponse();\n        response.setStatus(&quot;success&quot;);\nSystem.out.println(new ObjectMapper().writer().withDefaultPrettyPrinter().writeValueAsString(response));\n}\n}\n</code></pre>\n<p>This returns</p>\n<pre><code>{\n    &quot;status&quot;: &quot;success&quot;,\n}\n</code></pre>\n<p>My Requirement is</p>\n<pre><code>{\n&quot;responseInfo&quot; : {\n     &quot;status&quot; : &quot;success&quot;\n}\n</code></pre>\n<p>Is this possible without customSerializer in jackson ?</p>\n"},{"tags":["java","data-structures","binary-tree"],"comments":[{"owner":{"account_id":7360252,"reputation":133,"user_id":5603732,"display_name":"rohit garg"},"score":0,"creation_date":1450114958,"post_id":34249476,"comment_id":56288323,"body_markdown":"@Idos ,where should be the final return statement in the code you suggested, I added `return false;`  just before **final braces** , in that case the whole function returns false , even if the leaf node is found. With the current code , it will not compile because there is no final return.","body":"@Idos ,where should be the final return statement in the code you suggested, I added <code>return false;</code>  just before <b>final braces</b> , in that case the whole function returns false , even if the leaf node is found. With the current code , it will not compile because there is no final return."},{"owner":{"account_id":2538485,"reputation":15111,"user_id":2204926,"accept_rate":96,"display_name":"Idos"},"score":0,"creation_date":1450115728,"post_id":34249476,"comment_id":56288720,"body_markdown":"(Edited to make it more simple to understand and to be similar to your code)","body":"(Edited to make it more simple to understand and to be similar to your code)"},{"owner":{"account_id":7360252,"reputation":133,"user_id":5603732,"display_name":"rohit garg"},"score":0,"creation_date":1450118921,"post_id":34249476,"comment_id":56290473,"body_markdown":"@Idos , the code will still throw compilation error, as it does not have final return statement. Also in your current code , we are not checking for given node , and even if we add the node value argument in `isLeaf(BTNode node , int data)` and `return false` in end and `node.data==data` condition while returning true, the code keeps traversing other nodes , even if it has located the leaf node. I have run the code with all these changes, it does not give the desired answer. the code will work for finding all leaf nodes but not for checking if given node is leaf node or not.","body":"@Idos , the code will still throw compilation error, as it does not have final return statement. Also in your current code , we are not checking for given node , and even if we add the node value argument in <code>isLeaf(BTNode node , int data)</code> and <code>return false</code> in end and <code>node.data==data</code> condition while returning true, the code keeps traversing other nodes , even if it has located the leaf node. I have run the code with all these changes, it does not give the desired answer. the code will work for finding all leaf nodes but not for checking if given node is leaf node or not."},{"owner":{"account_id":2538485,"reputation":15111,"user_id":2204926,"accept_rate":96,"display_name":"Idos"},"score":0,"creation_date":1450119627,"post_id":34249476,"comment_id":56290887,"body_markdown":"check my edit, I think that is what you wanted -&gt; it returns &quot;finally&quot; in all paths and check if a node is a leaf or not.","body":"check my edit, I think that is what you wanted -&gt; it returns &quot;finally&quot; in all paths and check if a node is a leaf or not."},{"owner":{"account_id":7360252,"reputation":133,"user_id":5603732,"display_name":"rohit garg"},"score":0,"creation_date":1450120893,"post_id":34249476,"comment_id":56291630,"body_markdown":"@Idos , Your First code , will give compilation error , I have checked.","body":"@Idos , Your First code , will give compilation error , I have checked."},{"owner":{"account_id":2538485,"reputation":15111,"user_id":2204926,"accept_rate":96,"display_name":"Idos"},"score":0,"creation_date":1450254172,"post_id":34249476,"comment_id":56355642,"body_markdown":"did my second solution work?","body":"did my second solution work?"},{"owner":{"account_id":7360252,"reputation":133,"user_id":5603732,"display_name":"rohit garg"},"score":0,"creation_date":1450342299,"post_id":34249476,"comment_id":56401867,"body_markdown":"@Idos , the second solution will work , when we are not using recursion for traversing to the node. I applied the solution such that , I am traversing the tree using search node solution and when I reach to that node , I call this method and and pass the searched node to this function , if the function returns true , then its leaf node. So your solution works for single time check. Thanks.","body":"@Idos , the second solution will work , when we are not using recursion for traversing to the node. I applied the solution such that , I am traversing the tree using search node solution and when I reach to that node , I call this method and and pass the searched node to this function , if the function returns true , then its leaf node. So your solution works for single time check. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":6583624,"reputation":2692,"user_id":5087125,"display_name":"pvg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449997403,"creation_date":1449997403,"answer_id":34249513,"question_id":34249476,"body_markdown":"That&#39;s because your code includes traversal for no obvious reason. Think about what this recursive call does -  `return (isLeaf(node.left, data) || isLeaf(node.right, data));` . That should most likely be `return false`","title":"in Binary Tree ,checking if given node is leaf node or not","body":"<p>That's because your code includes traversal for no obvious reason. Think about what this recursive call does -  <code>return (isLeaf(node.left, data) || isLeaf(node.right, data));</code> . That should most likely be <code>return false</code></p>\n"},{"tags":[],"owner":{"account_id":2538485,"reputation":15111,"user_id":2204926,"accept_rate":96,"display_name":"Idos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1561436896,"creation_date":1449997520,"answer_id":34249523,"question_id":34249476,"body_markdown":"Try something like this:\r\n\r\n    boolean isLeaf(BTNode node, int data) {\r\n        if (node == null)       \r\n            return false;\r\n        if (node.left == null &amp;&amp; node.right == null)      \r\n            return true; \r\n        isLeaf(node.left); \r\n        isLeaf(node.right);      \r\n    }\r\n\r\nThe main problem with the way you implemented it is the line: &lt;br&gt;\r\n\r\n    return (isLeaf(node.left, data) || isLeaf(node.right, data));\r\nDid you think of what happens when you execute it actually?\r\n\r\nEdit: If you just want to check if a node is a leaf do:&lt;br\r\n\r\n    boolean isLeaf(BTNode node, int data) {\r\n        if (node == null)\r\n            return false;    \r\n        if (node.right == null &amp;&amp; node.left == null)\r\n            return true;\r\n        return false; \r\n    }","title":"in Binary Tree ,checking if given node is leaf node or not","body":"<p>Try something like this:</p>\n\n<pre><code>boolean isLeaf(BTNode node, int data) {\n    if (node == null)       \n        return false;\n    if (node.left == null &amp;&amp; node.right == null)      \n        return true; \n    isLeaf(node.left); \n    isLeaf(node.right);      \n}\n</code></pre>\n\n<p>The main problem with the way you implemented it is the line: <br></p>\n\n<pre><code>return (isLeaf(node.left, data) || isLeaf(node.right, data));\n</code></pre>\n\n<p>Did you think of what happens when you execute it actually?</p>\n\n<p>Edit: If you just want to check if a node is a leaf do:\n\n<pre><code>boolean isLeaf(BTNode node, int data) {\n    if (node == null)\n        return false;    \n    if (node.right == null &amp;&amp; node.left == null)\n        return true;\n    return false; \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22075230,"reputation":11,"user_id":16335661,"display_name":"Kunal Saha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631622547,"creation_date":1631622547,"answer_id":69177797,"question_id":34249476,"body_markdown":"```\r\nbool isleaf(Node* root)\r\n    {\r\n        if(root-&gt;left==NULL &amp;&amp; root-&gt;right==NULL) return true;\r\n        else return false;\r\n    }\r\n```","title":"in Binary Tree ,checking if given node is leaf node or not","body":"<pre><code>bool isleaf(Node* root)\n    {\n        if(root-&gt;left==NULL &amp;&amp; root-&gt;right==NULL) return true;\n        else return false;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3469277,"reputation":1572,"user_id":2904103,"accept_rate":78,"display_name":"Haswell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665659759,"creation_date":1665659291,"answer_id":74054772,"question_id":34249476,"body_markdown":"Here&#39;s my solution using plain C for a BST:\r\n\r\n    bool isLeaf(struct node *root, int data) {\r\n\r\n        if (root == NULL)\r\n            return false;\r\n\r\n        if (root-&gt;data == data) {\r\n            if (root-&gt;left == NULL &amp;&amp; root-&gt;right == NULL)\r\n                return true;\r\n            else\r\n                return false;\r\n        }\r\n        if (data &gt; root-&gt;data)\r\n            return isLeaf(root-&gt;right, data);\r\n        else\r\n            return isLeaf(root-&gt;left, data);\r\n    }\r\n\r\nI think you need to traverse the tree using the search/insert approach using the property of a BST\r\n\r\nFor a Binary Tree (instead of a BST):\r\n\r\n    bool isLeafBtree(struct node *root, int data) {\r\n        if (root == NULL)\r\n            return false;\r\n        if (root-&gt;data == data) {\r\n            if (root-&gt;left == NULL &amp;&amp; root-&gt;right == NULL)\r\n                return true;\r\n            else\r\n                return false;\r\n        }\r\n        if (isLeaf(root-&gt;left, data) == true)\r\n            return true;\r\n        else\r\n            return isLeaf(root-&gt;right, data);\r\n    }\r\n","title":"in Binary Tree ,checking if given node is leaf node or not","body":"<p>Here's my solution using plain C for a BST:</p>\n<pre><code>bool isLeaf(struct node *root, int data) {\n\n    if (root == NULL)\n        return false;\n\n    if (root-&gt;data == data) {\n        if (root-&gt;left == NULL &amp;&amp; root-&gt;right == NULL)\n            return true;\n        else\n            return false;\n    }\n    if (data &gt; root-&gt;data)\n        return isLeaf(root-&gt;right, data);\n    else\n        return isLeaf(root-&gt;left, data);\n}\n</code></pre>\n<p>I think you need to traverse the tree using the search/insert approach using the property of a BST</p>\n<p>For a Binary Tree (instead of a BST):</p>\n<pre><code>bool isLeafBtree(struct node *root, int data) {\n    if (root == NULL)\n        return false;\n    if (root-&gt;data == data) {\n        if (root-&gt;left == NULL &amp;&amp; root-&gt;right == NULL)\n            return true;\n        else\n            return false;\n    }\n    if (isLeaf(root-&gt;left, data) == true)\n        return true;\n    else\n        return isLeaf(root-&gt;right, data);\n}\n</code></pre>\n"}],"owner":{"account_id":7360252,"reputation":133,"user_id":5603732,"display_name":"rohit garg"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20269,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":34249523,"answer_count":4,"score":4,"last_activity_date":1665659759,"creation_date":1449997048,"question_id":34249476,"body_markdown":"I have written the code to find if the given node is leaf node or not , It works fine for positive case , i.e. when the entered node is a leaf node , the code code traverse till the node and and if it is leaf node , gives the output and stops , but the negative scenario is failing when the entered node is not a leaf node, The code keeps traversing the complete tree even when it has passed through the node and it is not a leaf node.\r\n    \r\n    boolean isLeaf(BTNode node, int data) {\r\n       if (node == null) {\r\n\t    return false;\r\n\t   }\r\n\tSystem.out.println(&quot;Node traversed :&quot;+ node.data);\r\n\tif (node.left == null &amp;&amp; node.right == null &amp;&amp; node.data == data) {\r\n\t    System.out.println(&quot;Node : &quot; + node.data + &quot; is leaf node&quot;);\r\n\t    return true;\r\n\t}\r\n\treturn (isLeaf(node.left, data) || isLeaf(node.right, data));\r\n    }\r\n\r\nCan any one tell what is the condition to stop the recursion if the node is found and  it is not a leaf node.\r\n\r\nThanks.","title":"in Binary Tree ,checking if given node is leaf node or not","body":"<p>I have written the code to find if the given node is leaf node or not , It works fine for positive case , i.e. when the entered node is a leaf node , the code code traverse till the node and and if it is leaf node , gives the output and stops , but the negative scenario is failing when the entered node is not a leaf node, The code keeps traversing the complete tree even when it has passed through the node and it is not a leaf node.</p>\n\n<pre><code>boolean isLeaf(BTNode node, int data) {\n   if (node == null) {\n    return false;\n   }\nSystem.out.println(\"Node traversed :\"+ node.data);\nif (node.left == null &amp;&amp; node.right == null &amp;&amp; node.data == data) {\n    System.out.println(\"Node : \" + node.data + \" is leaf node\");\n    return true;\n}\nreturn (isLeaf(node.left, data) || isLeaf(node.right, data));\n}\n</code></pre>\n\n<p>Can any one tell what is the condition to stop the recursion if the node is found and  it is not a leaf node.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","logging","package","classname"],"answers":[{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1464007089,"creation_date":1464007089,"answer_id":37391238,"question_id":37391098,"body_markdown":"Something like this:\r\n\r\n    String pack = getClass().getPackage().getName();\r\n    String[] split = pack.split(&quot;\\\\.&quot;);\r\n    pack = split[split.length-1];\r\n\r\n","title":"java get name of package of class","body":"<p>Something like this:</p>\n\n<pre><code>String pack = getClass().getPackage().getName();\nString[] split = pack.split(\"\\\\.\");\npack = split[split.length-1];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1464007349,"creation_date":1464007349,"answer_id":37391331,"question_id":37391098,"body_markdown":"You could try retrieving the package object from the class first, then reading its name. The following code will give you the full containing package name (such as &quot;com.foo.bar&quot;) in the ``packageName`` variable, and the direct parent name (such as ``bar``) in the ``directParent`` variable:\r\n\r\n        String packageName = getMyClass().getPackage().getName();\r\n\t\t\r\n\t\tString directParent;\r\n\t\tif(packageName.contains(&quot;.&quot;)) {\r\n\t\t\tdirectParent = packageName.substring(1 + packageName.lastIndexOf(&quot;.&quot;));\r\n\t\t} else {\r\n\t\t\tdirectParent = packageName;\r\n\t\t}\r\n\r\nSo, your log statement could just use one of these variables if you put it after this snippet.","title":"java get name of package of class","body":"<p>You could try retrieving the package object from the class first, then reading its name. The following code will give you the full containing package name (such as \"com.foo.bar\") in the <code>packageName</code> variable, and the direct parent name (such as <code>bar</code>) in the <code>directParent</code> variable:</p>\n\n<pre><code>    String packageName = getMyClass().getPackage().getName();\n\n    String directParent;\n    if(packageName.contains(\".\")) {\n        directParent = packageName.substring(1 + packageName.lastIndexOf(\".\"));\n    } else {\n        directParent = packageName;\n    }\n</code></pre>\n\n<p>So, your log statement could just use one of these variables if you put it after this snippet.</p>\n"},{"tags":[],"owner":{"account_id":4431901,"reputation":613,"user_id":3608870,"accept_rate":67,"display_name":"siliconchris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464012008,"creation_date":1464012008,"answer_id":37393078,"question_id":37391098,"body_markdown":"thanks to Ernest for his tip, it works flawlessly. \r\nFor all others that may have the same requirement, I&#39;ll post my code below:\r\n\r\n    @ComponentScan(basePackages = &quot;com.foo.fileexportservice&quot;)\r\n    @EnableAutoConfiguration(exclude = {MetricFilterAutoConfiguration.class, MetricRepositoryAutoConfiguration.class, LiquibaseAutoConfiguration.class})\r\n    @EnableEurekaClient\r\n    @EnableCircuitBreaker\r\n    @EnableFeignClients(basePackages = &quot;com.foo.fileexportservice&quot;)\r\n    public class Application {\r\n    \r\n        private static final Logger LOG = LoggerFactory.getLogger(Application.class);\r\n        private static final String ERROR_MSG = &quot;You have misconfigured your application! &quot;;\r\n    \r\n        @Inject\r\n        private Environment env;\r\n    \r\n        /**\r\n         * Main method, used to run the application.\r\n         */\r\n        public static void main(String[] args) throws UnknownHostException {\r\n            SpringApplication app = new SpringApplication(Application.class);\r\n            app.setShowBanner(true);\r\n            SimpleCommandLinePropertySource source = new SimpleCommandLinePropertySource(args);\r\n            addDefaultProfile(app, source);\r\n            Environment env = app.run(args).getEnvironment();\r\n            LOG.info(&quot;Access URLs:\\n----------------------------------------------------------\\n&quot; +\r\n                &quot;\\tLocal: \\t\\thttp://127.0.0.1:{}/&quot; + getPackageName() + &quot;/admin/info\\n&quot; +\r\n                &quot;\\tExternal: \\thttp://{}:{}/&quot; + getPackageName() + &quot;/admin/info\\n----------------------------------------------------------&quot;,\r\n                    env.getProperty(&quot;server.port&quot;),\r\n                    InetAddress.getLocalHost().getHostAddress(),\r\n                    env.getProperty(&quot;server.port&quot;)\r\n            );\r\n    \r\n        }\r\n    \r\n        /**\r\n         * Get the name of the application class as a static value, so we can show it in the log\r\n         */\r\n        private static final String getPackageName() {\r\n            String packageName = getMyClass().getPackage().getName();\r\n    \r\n            String directParent;\r\n            if(packageName.contains(&quot;.&quot;)) {\r\n                directParent = packageName.substring(1 + packageName.lastIndexOf(&quot;.&quot;));\r\n            } else {\r\n                directParent = packageName;\r\n            }\r\n            return directParent;\r\n        };\r\n        private static final Class[] getClassContext() {\r\n            return new SecurityManager() {\r\n                protected Class[] getClassContext(){return super.getClassContext();}\r\n            }.getClassContext();\r\n        };\r\n        private static final Class getMyClass() { return getClassContext()[2];}\r\n        \r\n        \r\n        /**\r\n         * If no profile has been configured, set by default the &quot;dev&quot; profile.\r\n         */\r\n        private static void addDefaultProfile(SpringApplication app, SimpleCommandLinePropertySource source) {\r\n            if (!source.containsProperty(&quot;spring.profiles.active&quot;) &amp;&amp;\r\n                    !System.getenv().containsKey(&quot;SPRING_PROFILES_ACTIVE&quot;)) {\r\n    \r\n                app.setAdditionalProfiles(Constants.SPRING_PROFILE_DEVELOPMENT);\r\n            }\r\n        }\r\n    }","title":"java get name of package of class","body":"<p>thanks to Ernest for his tip, it works flawlessly. \nFor all others that may have the same requirement, I'll post my code below:</p>\n\n<pre><code>@ComponentScan(basePackages = \"com.foo.fileexportservice\")\n@EnableAutoConfiguration(exclude = {MetricFilterAutoConfiguration.class, MetricRepositoryAutoConfiguration.class, LiquibaseAutoConfiguration.class})\n@EnableEurekaClient\n@EnableCircuitBreaker\n@EnableFeignClients(basePackages = \"com.foo.fileexportservice\")\npublic class Application {\n\n    private static final Logger LOG = LoggerFactory.getLogger(Application.class);\n    private static final String ERROR_MSG = \"You have misconfigured your application! \";\n\n    @Inject\n    private Environment env;\n\n    /**\n     * Main method, used to run the application.\n     */\n    public static void main(String[] args) throws UnknownHostException {\n        SpringApplication app = new SpringApplication(Application.class);\n        app.setShowBanner(true);\n        SimpleCommandLinePropertySource source = new SimpleCommandLinePropertySource(args);\n        addDefaultProfile(app, source);\n        Environment env = app.run(args).getEnvironment();\n        LOG.info(\"Access URLs:\\n----------------------------------------------------------\\n\" +\n            \"\\tLocal: \\t\\thttp://127.0.0.1:{}/\" + getPackageName() + \"/admin/info\\n\" +\n            \"\\tExternal: \\thttp://{}:{}/\" + getPackageName() + \"/admin/info\\n----------------------------------------------------------\",\n                env.getProperty(\"server.port\"),\n                InetAddress.getLocalHost().getHostAddress(),\n                env.getProperty(\"server.port\")\n        );\n\n    }\n\n    /**\n     * Get the name of the application class as a static value, so we can show it in the log\n     */\n    private static final String getPackageName() {\n        String packageName = getMyClass().getPackage().getName();\n\n        String directParent;\n        if(packageName.contains(\".\")) {\n            directParent = packageName.substring(1 + packageName.lastIndexOf(\".\"));\n        } else {\n            directParent = packageName;\n        }\n        return directParent;\n    };\n    private static final Class[] getClassContext() {\n        return new SecurityManager() {\n            protected Class[] getClassContext(){return super.getClassContext();}\n        }.getClassContext();\n    };\n    private static final Class getMyClass() { return getClassContext()[2];}\n\n\n    /**\n     * If no profile has been configured, set by default the \"dev\" profile.\n     */\n    private static void addDefaultProfile(SpringApplication app, SimpleCommandLinePropertySource source) {\n        if (!source.containsProperty(\"spring.profiles.active\") &amp;&amp;\n                !System.getenv().containsKey(\"SPRING_PROFILES_ACTIVE\")) {\n\n            app.setAdditionalProfiles(Constants.SPRING_PROFILE_DEVELOPMENT);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3446101,"reputation":11355,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665658097,"creation_date":1665658097,"answer_id":74054512,"question_id":37391098,"body_markdown":"Since Java 9, there is a new method [Class.getPackageName()][1]:\r\n\r\n&gt; Returns the fully qualified package name.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getPackageName()","title":"java get name of package of class","body":"<p>Since Java 9, there is a new method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getPackageName()\" rel=\"nofollow noreferrer\">Class.getPackageName()</a>:</p>\n<blockquote>\n<p>Returns the fully qualified package name.</p>\n</blockquote>\n"}],"owner":{"account_id":4431901,"reputation":613,"user_id":3608870,"accept_rate":67,"display_name":"siliconchris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5315,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":37391331,"answer_count":4,"score":5,"last_activity_date":1665658097,"creation_date":1464006632,"question_id":37391098,"body_markdown":"I have a bunch of little services, conveniently called Microservices ;-), that all have the same startup behavior. They are arranged in packages - each one for one service. The package naming is like this:\r\n\r\n    com.foo.bar.Application\r\n\r\nwhere com.foo is the domain part, bar is the actual service name and Application is my main instance class with the main method. \r\n\r\nNow what I would like to do is print out a standardized log message when they are started, showing the URL a user may query to get some information on the service.  Per definition the URL to get infos for the service shall be constructed like this:\r\n\r\n       IP:PORT/bar/admin/info \r\n\r\nI tried to get this bar.name with getClass()... and the like, but that does not work. So I tried this:\r\n\r\n\r\n    LOG.info(&quot;Access URLs:\\n----------------------------------------------------------\\n&quot; +\r\n                &quot;\\tLocal: \\t\\thttp://127.0.0.1:{}/&quot; + getMyClass() + &quot;/info\\n&quot; +\r\n                &quot;\\tExternal: \\thttp://{}:{}/&quot; + getMyClass() + &quot;/info\\n----------------------------------------------------------&quot;,\r\n                    env.getProperty(&quot;server.port&quot;),\r\n                    InetAddress.getLocalHost().getHostAddress(),\r\n                    env.getProperty(&quot;server.port&quot;)\r\n            );\r\n    \r\n     /**\r\n         * Get the name of the application class as a static value, so we can show it in the log\r\n         */\r\n        public static final Class[] getClassContext() {\r\n            return new SecurityManager() {\r\n                protected Class[] getClassContext(){return super.getClassContext();}\r\n            }.getClassContext();\r\n        };\r\n        public static final Class getMyClass() { return getClassContext()[2];}\r\n\r\n\r\nBut as you may already have guessed, this prints out far too much:\r\n\r\n    class com.foo.bar.Application\r\n\r\nWhere all I&#39;d like to get is\r\n\r\n    bar\r\n\r\nHow can I achieve this???\r\n\r\nBy the way, I&#39;m using Java 8 and Spring boot - if that helps\r\n\r\nBest regards,\r\n\r\nChris","title":"java get name of package of class","body":"<p>I have a bunch of little services, conveniently called Microservices ;-), that all have the same startup behavior. They are arranged in packages - each one for one service. The package naming is like this:</p>\n\n<pre><code>com.foo.bar.Application\n</code></pre>\n\n<p>where com.foo is the domain part, bar is the actual service name and Application is my main instance class with the main method. </p>\n\n<p>Now what I would like to do is print out a standardized log message when they are started, showing the URL a user may query to get some information on the service.  Per definition the URL to get infos for the service shall be constructed like this:</p>\n\n<pre><code>   IP:PORT/bar/admin/info \n</code></pre>\n\n<p>I tried to get this bar.name with getClass()... and the like, but that does not work. So I tried this:</p>\n\n<pre><code>LOG.info(\"Access URLs:\\n----------------------------------------------------------\\n\" +\n            \"\\tLocal: \\t\\thttp://127.0.0.1:{}/\" + getMyClass() + \"/info\\n\" +\n            \"\\tExternal: \\thttp://{}:{}/\" + getMyClass() + \"/info\\n----------------------------------------------------------\",\n                env.getProperty(\"server.port\"),\n                InetAddress.getLocalHost().getHostAddress(),\n                env.getProperty(\"server.port\")\n        );\n\n /**\n     * Get the name of the application class as a static value, so we can show it in the log\n     */\n    public static final Class[] getClassContext() {\n        return new SecurityManager() {\n            protected Class[] getClassContext(){return super.getClassContext();}\n        }.getClassContext();\n    };\n    public static final Class getMyClass() { return getClassContext()[2];}\n</code></pre>\n\n<p>But as you may already have guessed, this prints out far too much:</p>\n\n<pre><code>class com.foo.bar.Application\n</code></pre>\n\n<p>Where all I'd like to get is</p>\n\n<pre><code>bar\n</code></pre>\n\n<p>How can I achieve this???</p>\n\n<p>By the way, I'm using Java 8 and Spring boot - if that helps</p>\n\n<p>Best regards,</p>\n\n<p>Chris</p>\n"},{"tags":["java","spring","spring-boot","record","java-17"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1665659125,"post_id":74054194,"comment_id":130753827,"body_markdown":"if I think a bit more, this would make no sense if possible. `min.from=1` (if it was possible), but then `mine.getBase().getFrom()`... yeah, I don&#39;t think this is sane at all","body":"if I think a bit more, this would make no sense if possible. <code>min.from=1</code> (if it was possible), but then <code>mine.getBase().getFrom()</code>... yeah, I don&#39;t think this is sane at all"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1665730515,"post_id":74054194,"comment_id":130770880,"body_markdown":"What is the actual meaning of this setup? That every instance of `Properties` is supposed to have the specified values?","body":"What is the actual meaning of this setup? That every instance of <code>Properties</code> is supposed to have the specified values?"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1665751126,"post_id":74054194,"comment_id":130776935,"body_markdown":"@Holger right. basically providing a file with two lines like so :`mine.from=1` and `mine.to=2` (+ some Spring specific annotations), will result in an actual instance of `Properties` created with the specific values from the file.","body":"@Holger right. basically providing a file with two lines like so :<code>mine.from=1</code> and <code>mine.to=2</code> (+ some Spring specific annotations), will result in an actual instance of <code>Properties</code> created with the specific values from the file."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1665751906,"post_id":74054194,"comment_id":130777190,"body_markdown":"Wouldn’t it make more sense if some other class’s field of type `Properties` had such an annotation to denote that this specific field should be initialized with such an instance? Why should the annotation be of a global nature (being placed at the class) when describing only one instance (and where does that instance live, actually)?","body":"Wouldn’t it make more sense if some other class’s field of type <code>Properties</code> had such an annotation to denote that this specific field should be initialized with such an instance? Why should the annotation be of a global nature (being placed at the class) when describing only one instance (and where does that instance live, actually)?"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1665752217,"post_id":74054194,"comment_id":130777301,"body_markdown":"@Holger its a _single_ instance per application anyway, so it makes sense to be on the class, but that&#39;s not the point anyway. imo.","body":"@Holger its a <i>single</i> instance per application anyway, so it makes sense to be on the class, but that&#39;s not the point anyway. imo."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1665754206,"post_id":74054194,"comment_id":130778177,"body_markdown":"I’m just trying to wrap my head around the idea that a strictly immutable value-like object is a valid replacement for a mutable bean.","body":"I’m just trying to wrap my head around the idea that a strictly immutable value-like object is a valid replacement for a mutable bean."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1665853257,"post_id":74054194,"comment_id":130798112,"body_markdown":"@Holger I see. The bean can be made immutable though, but I&#39;ve tried to simplify the example.","body":"@Holger I see. The bean can be made immutable though, but I&#39;ve tried to simplify the example."}],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665657989,"creation_date":1665656720,"question_id":74054194,"body_markdown":"Suppose I have two classes:\r\n\r\n```\r\nclass Base {\r\n    String from;\r\n    // getters/setters\r\n}\r\n```\r\n\r\n```\r\n@ConfigurationProperties(&quot;mine&quot;)\r\nclass Properties extends Base {\r\n   String to;\r\n   // getters/setters\r\n}\r\n```\r\n\r\nWith such a scenario, I can do : \r\n\r\n    mine.from = 1\r\n    mine.to   = 2\r\n\r\n\r\nI&#39;d like to move `Properties` to a `record`, but records do not allow extends, as such the only option I have is to do composition instead of inheritance here:\r\n\r\n\r\n```\r\n@ConfigurationProperties(&quot;mine&quot;)\r\nrecord Properties(String to, Base base) {\r\n}\r\n```\r\n\r\nThe problem is that now properties need to be changed:\r\n\r\n\r\n```\r\nmine.base.from = 1\r\nmine.to        = 2\r\n```\r\n\r\nIs there a way to tell Spring to use `mine.from` instead of `mine.base.from` for the binding? ","title":"ConfigurationProperties with record and inheritance","body":"<p>Suppose I have two classes:</p>\n<pre><code>class Base {\n    String from;\n    // getters/setters\n}\n</code></pre>\n<pre><code>@ConfigurationProperties(&quot;mine&quot;)\nclass Properties extends Base {\n   String to;\n   // getters/setters\n}\n</code></pre>\n<p>With such a scenario, I can do :</p>\n<pre><code>mine.from = 1\nmine.to   = 2\n</code></pre>\n<p>I'd like to move <code>Properties</code> to a <code>record</code>, but records do not allow extends, as such the only option I have is to do composition instead of inheritance here:</p>\n<pre><code>@ConfigurationProperties(&quot;mine&quot;)\nrecord Properties(String to, Base base) {\n}\n</code></pre>\n<p>The problem is that now properties need to be changed:</p>\n<pre><code>mine.base.from = 1\nmine.to        = 2\n</code></pre>\n<p>Is there a way to tell Spring to use <code>mine.from</code> instead of <code>mine.base.from</code> for the binding?</p>\n"},{"tags":["java","spring","spring-boot","spring-data","spring-data-jdbc"],"answers":[{"tags":[],"owner":{"account_id":25435554,"reputation":135,"user_id":19239331,"display_name":"Gun Slinger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665644497,"creation_date":1665644188,"answer_id":74051599,"question_id":74051529,"body_markdown":"do OneToOne Mapping with Address entity and than try\r\n\r\nExample of a one-to-one relationship, in this case between user and address entities.\r\n```\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n    //... \r\n\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;address_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Address address;\r\n\r\n    // ... getters and setters\r\n}\r\n\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;address&quot;)\r\npublic class Address {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n    //...\r\n\r\n    @OneToOne(mappedBy = &quot;address&quot;)\r\n    private User user;\r\n\r\n    //... getters and setters\r\n}\r\n\r\n```","title":"Lifecycle event not working for non aggregate entity Spring Data JDBC","body":"<p>do OneToOne Mapping with Address entity and than try</p>\n<p>Example of a one-to-one relationship, in this case between user and address entities.</p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n    //... \n\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;address_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Address address;\n\n    // ... getters and setters\n}\n\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;address&quot;)\npublic class Address {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n    //...\n\n    @OneToOne(mappedBy = &quot;address&quot;)\n    private User user;\n\n    //... getters and setters\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665657871,"creation_date":1665657871,"answer_id":74054468,"question_id":74051529,"body_markdown":"Lifecycle events and callbacks only get fired for aggregates.\r\n\r\nPart of the design rule for aggregates says that you should access entities internal to an aggregate only by the aggregate. \r\nThis would be violated when Spring Data JDBC hands out references to such entities to a listener or callback.\r\n\r\nSo the correct solution is to listen to `BeforeSaveEvent` for the aggregate root, i.e. `Employee` and access the `Address` via the `Employee`.","title":"Lifecycle event not working for non aggregate entity Spring Data JDBC","body":"<p>Lifecycle events and callbacks only get fired for aggregates.</p>\n<p>Part of the design rule for aggregates says that you should access entities internal to an aggregate only by the aggregate.\nThis would be violated when Spring Data JDBC hands out references to such entities to a listener or callback.</p>\n<p>So the correct solution is to listen to <code>BeforeSaveEvent</code> for the aggregate root, i.e. <code>Employee</code> and access the <code>Address</code> via the <code>Employee</code>.</p>\n"}],"owner":{"account_id":5433912,"reputation":150,"user_id":5845010,"display_name":"Ravi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74054468,"answer_count":2,"score":0,"last_activity_date":1665657871,"creation_date":1665643735,"question_id":74051529,"body_markdown":"I am using two entities, *Employee* and *Address*, where *Employee* has the controller to do CRUD operations. So for both the entities I am using lifecycle events where *Employee* events are working fine but not the *Address* events. So I am trying to save *Employee* which has *Address* in it (one to one relations) and expecting *Employee* and *Address* both lifecycle events to get trigger. \r\n\r\nPlease help me.  \r\nAm I doing wrong anywhere?\r\n\r\nHere is my code. \r\n```\r\n@Table(&quot;EMPLOYEE&quot;)\r\n@Builder // these are lombok code\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\n@Data\r\npublic class Employee {\r\n\r\n    @LastModifiedBy\r\n    private String updatedBy;\r\n    @CreatedBy\r\n    private String createdBy;\r\n    private Date dob;\r\n    @Size(max = 10)\r\n    private String name;\r\n    @Id\r\n    private Integer id;\r\n    @LastModifiedDate\r\n    private Date updatedOn;\r\n    @Version\r\n    private Long version;\r\n    @CreatedDate\r\n    private Date createdOn;\r\n    private Integer age;\r\n    @Valid\r\n    private Address address;\r\n}\r\n```\r\n```\r\n@Table(&quot;ADDRESS&quot;)\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\n@Data\r\npublic class Address {\r\n    private Integer zip;\r\n    @Id\r\n    private Integer id;\r\n    @Size(max = 10)\r\n    @NotNull\r\n    private String line1;\r\n}\r\n```\r\n```\r\n@RestController\r\npublic class EmployeeController\r\n{\r\n//CRUD APIs code\r\n}\r\n```\r\n```\r\n@Component\r\npublic class EmployeeEvents\r\n    extends AbstractRelationalEventListener&lt;Employee&gt;\r\n{\r\n    @Override\r\n    protected void onBeforeSave(BeforeSaveEvent event) {\r\n        System.out.println(&quot;........&quot;+ event.getEntity());\r\n\r\n    }\r\n}\r\n```\r\n```\r\n@Component\r\npublic class AddressEvents\r\n    extends AbstractRelationalEventListener&lt;Address&gt;\r\n{\r\n    @Override\r\n    protected void onBeforeSave(BeforeSaveEvent event) {\r\n        System.out.println(&quot;........&quot;+ event.getEntity());\r\n\r\n    }\r\n}\r\n```\r\nEDIT 1:  \r\nData getting saved properly. All I want is events to get trigger. And since it&#39;s *Spring Data* JDBC one to one will work without any extra annotations.","title":"Lifecycle event not working for non aggregate entity Spring Data JDBC","body":"<p>I am using two entities, <em>Employee</em> and <em>Address</em>, where <em>Employee</em> has the controller to do CRUD operations. So for both the entities I am using lifecycle events where <em>Employee</em> events are working fine but not the <em>Address</em> events. So I am trying to save <em>Employee</em> which has <em>Address</em> in it (one to one relations) and expecting <em>Employee</em> and <em>Address</em> both lifecycle events to get trigger.</p>\n<p>Please help me.<br />\nAm I doing wrong anywhere?</p>\n<p>Here is my code.</p>\n<pre><code>@Table(&quot;EMPLOYEE&quot;)\n@Builder // these are lombok code\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\n@Data\npublic class Employee {\n\n    @LastModifiedBy\n    private String updatedBy;\n    @CreatedBy\n    private String createdBy;\n    private Date dob;\n    @Size(max = 10)\n    private String name;\n    @Id\n    private Integer id;\n    @LastModifiedDate\n    private Date updatedOn;\n    @Version\n    private Long version;\n    @CreatedDate\n    private Date createdOn;\n    private Integer age;\n    @Valid\n    private Address address;\n}\n</code></pre>\n<pre><code>@Table(&quot;ADDRESS&quot;)\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\n@Data\npublic class Address {\n    private Integer zip;\n    @Id\n    private Integer id;\n    @Size(max = 10)\n    @NotNull\n    private String line1;\n}\n</code></pre>\n<pre><code>@RestController\npublic class EmployeeController\n{\n//CRUD APIs code\n}\n</code></pre>\n<pre><code>@Component\npublic class EmployeeEvents\n    extends AbstractRelationalEventListener&lt;Employee&gt;\n{\n    @Override\n    protected void onBeforeSave(BeforeSaveEvent event) {\n        System.out.println(&quot;........&quot;+ event.getEntity());\n\n    }\n}\n</code></pre>\n<pre><code>@Component\npublic class AddressEvents\n    extends AbstractRelationalEventListener&lt;Address&gt;\n{\n    @Override\n    protected void onBeforeSave(BeforeSaveEvent event) {\n        System.out.println(&quot;........&quot;+ event.getEntity());\n\n    }\n}\n</code></pre>\n<p>EDIT 1:<br />\nData getting saved properly. All I want is events to get trigger. And since it's <em>Spring Data</em> JDBC one to one will work without any extra annotations.</p>\n"},{"tags":["java","apache-kafka","apache-zookeeper","consumer"],"comments":[{"owner":{"account_id":26589807,"reputation":11,"user_id":20213202,"display_name":"sayf21"},"score":0,"creation_date":1665660901,"post_id":74054299,"comment_id":130754362,"body_markdown":"I solved this problem on my own. It was about the bit depth of the JDK. A 32-bit JDK was installed. After reinstalling everything worked successfully!","body":"I solved this problem on my own. It was about the bit depth of the JDK. A 32-bit JDK was installed. After reinstalling everything worked successfully!"},{"owner":{"account_id":175700,"reputation":167,"user_id":405889,"display_name":"themoah"},"score":0,"creation_date":1665664609,"post_id":74054299,"comment_id":130755612,"body_markdown":"You are probably running non-production cluster, but there is a general idea of using same heap sizes for workloads like Kafka: e.g. same `Xmx and Xms`\nhttps://docs.confluent.io/platform/current/kafka/deployment.html#jvm","body":"You are probably running non-production cluster, but there is a general idea of using same heap sizes for workloads like Kafka: e.g. same <code>Xmx and Xms</code> <a href=\"https://docs.confluent.io/platform/current/kafka/deployment.html#jvm\" rel=\"nofollow noreferrer\">docs.confluent.io/platform/current/kafka/deployment.html#jvm</a>"}],"owner":{"account_id":26589807,"reputation":11,"user_id":20213202,"display_name":"sayf21"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665657681,"creation_date":1665657133,"question_id":74054299,"body_markdown":"I use kafka on windows, run zookeeper first through the console, then kafka. Everything starts perfectly. The producer runs fine as well. But as soon as I start the consumer, logs start pouring into the console and I get the map failed error. I tried to change the allocated memory in the kafka server start file.\r\n\r\nAt the moment my file kafka-server-start.sh it looks like this:\r\n\r\n    export KAFKA_HEAP_OPTS=&quot;-Xmx1G -Xms512M&quot;\r\n\r\nAnd if i delete KafkaListener everything starts up perfectly as well, but the interaction between the topics is important to me.\r\n\r\nKafka version: 2.13-3.2.1\r\nConsumer property:\r\n\r\n    @Value(&quot;${spring.kafka.bootstrap-servers}&quot;)\r\n    private String bootstrapService;\r\n\r\n    public Map&lt;String, Object&gt; getDefaultConsumerConfig() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapService);\r\n        props.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;*&quot;);\r\n        return props;\r\n    }\r\n\r\nConsumer config:\r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String, ConfigurationEventDto&gt; configurationEventDtoConsumerFactory() {\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(kafkaService.getDefaultConsumerConfig(),\r\n                new JsonDeserializer&lt;&gt;(),\r\n                new JsonDeserializer&lt;&gt;(ConfigurationEventDto.class, false));\r\n    }\r\n\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, ConfigurationEventDto&gt; configurationEventDtoKafkaFactory(\r\n            ConsumerFactory&lt;String, ConfigurationEventDto&gt; configurationEventDtoConsumerFactory) {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, ConfigurationEventDto&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(configurationEventDtoConsumerFactory);\r\n        return factory;\r\n    }\r\n\r\nKafka listener:\r\n\r\n    @KafkaListener(topics = &quot;activity-record-configuration-event&quot;,\r\n            groupId = &quot;activity-record-configuration-event&quot;,\r\n            containerFactory = &quot;configurationEventDtoKafkaFactory&quot;)\r\n    void listen(ConfigurationEventDto configurationEventDto) {\r\n        log.info(&quot;new configurationEventDto received&quot;);\r\n        service.save(configurationEventDto);\r\n    }\r\n\r\nAnd when i start my consumer microservice kafka logs are:\r\n\r\n\r\n    java.io.IOException: Map failed\r\n        at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:938)\r\n        at kafka.log.AbstractIndex.&lt;init&gt;(AbstractIndex.scala:124)\r\n        at kafka.log.OffsetIndex.&lt;init&gt;(OffsetIndex.scala:54)\r\n        at kafka.log.LazyIndex$.$anonfun$forOffset$1(LazyIndex.scala:106)\r\n        at kafka.log.LazyIndex.$anonfun$get$1(LazyIndex.scala:63)\r\n        at kafka.log.LazyIndex.get(LazyIndex.scala:60)\r\n        at kafka.log.LogSegment.offsetIndex(LogSegment.scala:64)\r\n        at kafka.log.LogSegment.readNextOffset(LogSegment.scala:453)\r\n        at kafka.log.LogLoader.$anonfun$recoverLog$6(LogLoader.scala:457)\r\n        at scala.runtime.java8.JFunction0$mcJ$sp.apply(JFunction0$mcJ$sp.scala:17)\r\n        at scala.Option.getOrElse(Option.scala:201)\r\n        at kafka.log.LogLoader.recoverLog(LogLoader.scala:457)\r\n        at kafka.log.LogLoader.load(LogLoader.scala:162)\r\n        at kafka.log.UnifiedLog$.apply(UnifiedLog.scala:1810)\r\n        at kafka.log.LogManager.$anonfun$getOrCreateLog$1(LogManager.scala:901)\r\n        at scala.Option.getOrElse(Option.scala:201)\r\n        at kafka.log.LogManager.getOrCreateLog(LogManager.scala:852)\r\n        at kafka.cluster.Partition.createLog(Partition.scala:372)\r\n        at kafka.cluster.Partition.maybeCreate$1(Partition.scala:347)\r\n        at kafka.cluster.Partition.createLogIfNotExists(Partition.scala:354)\r\n        at kafka.cluster.Partition.$anonfun$makeLeader$1(Partition.scala:566)\r\n        at kafka.cluster.Partition.makeLeader(Partition.scala:543)\r\n        at kafka.server.ReplicaManager.$anonfun$makeLeaders$5(ReplicaManager.scala:1592)\r\n        at kafka.utils.Implicits$MapExtensionMethods$.$anonfun$forKeyValue$1(Implicits.scala:62)\r\n        at scala.collection.mutable.HashMap$Node.foreachEntry(HashMap.scala:633)\r\n        at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:499)\r\n        at kafka.server.ReplicaManager.becomeLeaderOrFollower(ReplicaManager.scala:1590)\r\n        at kafka.server.KafkaApis.handleLeaderAndIsrRequest(KafkaApis.scala:269)\r\n        at kafka.server.KafkaApis.handle(KafkaApis.scala:176)\r\n        at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:75)\r\n        at java.lang.Thread.run(Thread.java:750)\r\n\r\nAnd of course i cleaned the folders with logs!\r\n\r\n","title":"Kafka is falling when consumer start","body":"<p>I use kafka on windows, run zookeeper first through the console, then kafka. Everything starts perfectly. The producer runs fine as well. But as soon as I start the consumer, logs start pouring into the console and I get the map failed error. I tried to change the allocated memory in the kafka server start file.</p>\n<p>At the moment my file kafka-server-start.sh it looks like this:</p>\n<pre><code>export KAFKA_HEAP_OPTS=&quot;-Xmx1G -Xms512M&quot;\n</code></pre>\n<p>And if i delete KafkaListener everything starts up perfectly as well, but the interaction between the topics is important to me.</p>\n<p>Kafka version: 2.13-3.2.1\nConsumer property:</p>\n<pre><code>@Value(&quot;${spring.kafka.bootstrap-servers}&quot;)\nprivate String bootstrapService;\n\npublic Map&lt;String, Object&gt; getDefaultConsumerConfig() {\n    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n    props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapService);\n    props.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;*&quot;);\n    return props;\n}\n</code></pre>\n<p>Consumer config:</p>\n<pre><code>@Bean\npublic ConsumerFactory&lt;String, ConfigurationEventDto&gt; configurationEventDtoConsumerFactory() {\n    return new DefaultKafkaConsumerFactory&lt;&gt;(kafkaService.getDefaultConsumerConfig(),\n            new JsonDeserializer&lt;&gt;(),\n            new JsonDeserializer&lt;&gt;(ConfigurationEventDto.class, false));\n}\n\n@Bean\npublic ConcurrentKafkaListenerContainerFactory&lt;String, ConfigurationEventDto&gt; configurationEventDtoKafkaFactory(\n        ConsumerFactory&lt;String, ConfigurationEventDto&gt; configurationEventDtoConsumerFactory) {\n    ConcurrentKafkaListenerContainerFactory&lt;String, ConfigurationEventDto&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n    factory.setConsumerFactory(configurationEventDtoConsumerFactory);\n    return factory;\n}\n</code></pre>\n<p>Kafka listener:</p>\n<pre><code>@KafkaListener(topics = &quot;activity-record-configuration-event&quot;,\n        groupId = &quot;activity-record-configuration-event&quot;,\n        containerFactory = &quot;configurationEventDtoKafkaFactory&quot;)\nvoid listen(ConfigurationEventDto configurationEventDto) {\n    log.info(&quot;new configurationEventDto received&quot;);\n    service.save(configurationEventDto);\n}\n</code></pre>\n<p>And when i start my consumer microservice kafka logs are:</p>\n<pre><code>java.io.IOException: Map failed\n    at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:938)\n    at kafka.log.AbstractIndex.&lt;init&gt;(AbstractIndex.scala:124)\n    at kafka.log.OffsetIndex.&lt;init&gt;(OffsetIndex.scala:54)\n    at kafka.log.LazyIndex$.$anonfun$forOffset$1(LazyIndex.scala:106)\n    at kafka.log.LazyIndex.$anonfun$get$1(LazyIndex.scala:63)\n    at kafka.log.LazyIndex.get(LazyIndex.scala:60)\n    at kafka.log.LogSegment.offsetIndex(LogSegment.scala:64)\n    at kafka.log.LogSegment.readNextOffset(LogSegment.scala:453)\n    at kafka.log.LogLoader.$anonfun$recoverLog$6(LogLoader.scala:457)\n    at scala.runtime.java8.JFunction0$mcJ$sp.apply(JFunction0$mcJ$sp.scala:17)\n    at scala.Option.getOrElse(Option.scala:201)\n    at kafka.log.LogLoader.recoverLog(LogLoader.scala:457)\n    at kafka.log.LogLoader.load(LogLoader.scala:162)\n    at kafka.log.UnifiedLog$.apply(UnifiedLog.scala:1810)\n    at kafka.log.LogManager.$anonfun$getOrCreateLog$1(LogManager.scala:901)\n    at scala.Option.getOrElse(Option.scala:201)\n    at kafka.log.LogManager.getOrCreateLog(LogManager.scala:852)\n    at kafka.cluster.Partition.createLog(Partition.scala:372)\n    at kafka.cluster.Partition.maybeCreate$1(Partition.scala:347)\n    at kafka.cluster.Partition.createLogIfNotExists(Partition.scala:354)\n    at kafka.cluster.Partition.$anonfun$makeLeader$1(Partition.scala:566)\n    at kafka.cluster.Partition.makeLeader(Partition.scala:543)\n    at kafka.server.ReplicaManager.$anonfun$makeLeaders$5(ReplicaManager.scala:1592)\n    at kafka.utils.Implicits$MapExtensionMethods$.$anonfun$forKeyValue$1(Implicits.scala:62)\n    at scala.collection.mutable.HashMap$Node.foreachEntry(HashMap.scala:633)\n    at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:499)\n    at kafka.server.ReplicaManager.becomeLeaderOrFollower(ReplicaManager.scala:1590)\n    at kafka.server.KafkaApis.handleLeaderAndIsrRequest(KafkaApis.scala:269)\n    at kafka.server.KafkaApis.handle(KafkaApis.scala:176)\n    at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:75)\n    at java.lang.Thread.run(Thread.java:750)\n</code></pre>\n<p>And of course i cleaned the folders with logs!</p>\n"},{"tags":["java","jsch"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665655237,"creation_date":1665655237,"answer_id":74053868,"question_id":74053535,"body_markdown":"First, you cannot reuse the &quot;exec&quot; channel this way. You have to open a new channel for the new command.\r\n\r\n---\r\n\r\nAnd note that Cisco is known not to support multiple commands in one &quot;exec&quot; channel, even if specified together upfront:  \r\nhttps://stackoverflow.com/q/28504014/850848  \r\nI would not be surprised if it did not support multiple &quot;exec&quot; channels in one connection either.\r\n\r\n*Did you test with an SSH client, if it is even possible, to do what you are trying to implement?*","title":"Hard Time Keeping JSCH Session Alive","body":"<p>First, you cannot reuse the &quot;exec&quot; channel this way. You have to open a new channel for the new command.</p>\n<hr />\n<p>And note that Cisco is known not to support multiple commands in one &quot;exec&quot; channel, even if specified together upfront:<br />\n<a href=\"https://stackoverflow.com/q/28504014/850848\">Error passing multiple commands to Cisco CLI via plink</a><br />\nI would not be surprised if it did not support multiple &quot;exec&quot; channels in one connection either.</p>\n<p><em>Did you test with an SSH client, if it is even possible, to do what you are trying to implement?</em></p>\n"}],"owner":{"account_id":1041234,"reputation":1441,"user_id":1047226,"accept_rate":70,"display_name":"hell_storm2004"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":305,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74053868,"answer_count":1,"score":0,"last_activity_date":1665657562,"creation_date":1665653617,"question_id":74053535,"body_markdown":"I am trying to run a sequence of commands on a CSICO router using JSCH and SSH. But the problem I am having is after executing the first command, the second one just doesn&#39;t execute. The session seems to go down after running the first command. It throws this exception:\r\n\r\n    com.jcraft.jsch.JSchException: Packet corrupt\r\n    \tat com.jcraft.jsch.Session.start_discard(Session.java:1067)\r\n    \tat com.jcraft.jsch.Session.read(Session.java:937)\r\n    \tat com.jcraft.jsch.Session.connect(Session.java:309)\r\n    \tat com.jcraft.jsch.Session.connect(Session.java:183)\r\n    \tat com.att.ncaas.device.connection.ssh.SSHConnectionJSch.connect(SSHConnectionJSch.java:120)\r\n\r\n\r\nThe code look likes this:\r\n\r\n\r\n    public void connect () {\r\n    \r\n    \tChannelExec channelExec = null;\r\n    \tJSch jSch = new JSch();\r\n    \tSession session = null;\r\n    \r\n    \ttry {\r\n    \r\n    \t\tsession = jSch.getSession(userid, ipAddress, port);\r\n    \r\n    \t\t// Set the password.\r\n    \t\tsession.setPassword(&quot;XXXXXXXXX&quot;);\r\n    \r\n    \t\tProperties properties = new Properties();\r\n    \r\n    \t\tproperties.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n    \r\n    \t\t// Set the Ciphers.\r\n    \t\t/*\r\n    \t\t * properties.put(&quot;cipher.s2c&quot;, &quot;aes128-cbc&quot;); properties.put(&quot;cipher.c2s&quot;,\r\n    \t\t * &quot;aes128-cbc&quot;); properties.put(&quot;CheckCiphers&quot;, &quot;aes128-cbc&quot;);\r\n    \t\t */\r\n    \r\n    \t\tsession.setConfig(properties);\r\n    \r\n    \t\t// Finally make the connection.\r\n    \t\tsession.connect();\r\n    \r\n    \t\tchannelExec = (ChannelExec) session.openChannel(&quot;exec&quot;);\r\n    \r\n    \t\t// Command 1\r\n    \t\tchannelExec.setCommand(&quot;show run&quot;);\r\n    \r\n    \t\tByteArrayOutputStream responseStream = new ByteArrayOutputStream();\r\n    \r\n    \t\tchannelExec.setOutputStream(responseStream);\r\n    \r\n    \t\tchannelExec.connect();\r\n    \r\n    \t\twhile (channelExec.isConnected()) {\r\n    \t\t\tThread.sleep(1000);\r\n    \t\t}\r\n    \r\n    \t\tString responseString = new String(responseStream.toByteArray());\r\n    \r\n    \t\tSystem.out.println(&quot;Show Run Output:\\n&quot;);\r\n    \t\tSystem.out.println(responseString);\r\n    \r\n    \t\tif (session.isConnected()) {\r\n    \t\t\tSystem.out.println(&quot;Wooooooooooooooooooohoooooooooooooooooooooooo!!!!&quot;);\r\n    \t\t} else {\r\n    \t\t\tsession.connect();\r\n    \t\t}\r\n    \r\n    \t\t// Command 2\r\n    \t\tchannelExec.setCommand(&quot;show version&quot;);\r\n    \r\n    \t\tchannelExec.connect();\r\n    \r\n    \t\twhile (channelExec.isConnected()) {\r\n    \t\t\tThread.sleep(1000);\r\n    \t\t}\r\n    \r\n    \t\tresponseString = new String(responseStream.toByteArray());\r\n    \r\n    \t\tSystem.out.println(&quot;Show Version Output:\\n&quot;);\r\n    \t\tSystem.out.println(responseString);\r\n    \r\n    \t} catch (JSchException e) {\r\n    \r\n    \t\te.printStackTrace();\r\n    \r\n    \t} catch (InterruptedException e) {\r\n    \r\n    \t\te.printStackTrace();\r\n    \r\n    \t} catch (Exception e) {\r\n    \r\n    \t\te.printStackTrace();\r\n    \r\n    \t} finally {\r\n    \r\n    \t\tif (session != null) {\r\n    \t\t\tsession.disconnect();\r\n    \t\t}\r\n    \r\n    \t\tif (channelExec != null) {\r\n    \t\t\tchannelExec.disconnect();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nWhen it comes for the second `session.connect()` inside the `if` block, it throws the error. The only other thing I noticed is the when I put the ciphers in, this part:\r\n\r\n    // Set the Ciphers.\r\n    properties.put(&quot;cipher.s2c&quot;, &quot;aes128-cbc&quot;);\r\n    properties.put(&quot;cipher.c2s&quot;, &quot;aes128-cbc&quot;);\r\n    properties.put(&quot;CheckCiphers&quot;, &quot;aes128-cbc&quot;);\r\n\r\n\r\nI get a different error on the same line. I get:\r\n\r\n    com.jcraft.jsch.JSchException: Session.connect: java.io.IOException: End of IO Stream Read\r\n    \tat com.jcraft.jsch.Session.connect(Session.java:565)\r\n    \tat com.jcraft.jsch.Session.connect(Session.java:183)\r\n\r\n\r\nAny pointers on how to keep the session alive between two `ChannelExec` execute would really helpful. Thanks.","title":"Hard Time Keeping JSCH Session Alive","body":"<p>I am trying to run a sequence of commands on a CSICO router using JSCH and SSH. But the problem I am having is after executing the first command, the second one just doesn't execute. The session seems to go down after running the first command. It throws this exception:</p>\n<pre><code>com.jcraft.jsch.JSchException: Packet corrupt\n    at com.jcraft.jsch.Session.start_discard(Session.java:1067)\n    at com.jcraft.jsch.Session.read(Session.java:937)\n    at com.jcraft.jsch.Session.connect(Session.java:309)\n    at com.jcraft.jsch.Session.connect(Session.java:183)\n    at com.att.ncaas.device.connection.ssh.SSHConnectionJSch.connect(SSHConnectionJSch.java:120)\n</code></pre>\n<p>The code look likes this:</p>\n<pre><code>public void connect () {\n\n    ChannelExec channelExec = null;\n    JSch jSch = new JSch();\n    Session session = null;\n\n    try {\n\n        session = jSch.getSession(userid, ipAddress, port);\n\n        // Set the password.\n        session.setPassword(&quot;XXXXXXXXX&quot;);\n\n        Properties properties = new Properties();\n\n        properties.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n\n        // Set the Ciphers.\n        /*\n         * properties.put(&quot;cipher.s2c&quot;, &quot;aes128-cbc&quot;); properties.put(&quot;cipher.c2s&quot;,\n         * &quot;aes128-cbc&quot;); properties.put(&quot;CheckCiphers&quot;, &quot;aes128-cbc&quot;);\n         */\n\n        session.setConfig(properties);\n\n        // Finally make the connection.\n        session.connect();\n\n        channelExec = (ChannelExec) session.openChannel(&quot;exec&quot;);\n\n        // Command 1\n        channelExec.setCommand(&quot;show run&quot;);\n\n        ByteArrayOutputStream responseStream = new ByteArrayOutputStream();\n\n        channelExec.setOutputStream(responseStream);\n\n        channelExec.connect();\n\n        while (channelExec.isConnected()) {\n            Thread.sleep(1000);\n        }\n\n        String responseString = new String(responseStream.toByteArray());\n\n        System.out.println(&quot;Show Run Output:\\n&quot;);\n        System.out.println(responseString);\n\n        if (session.isConnected()) {\n            System.out.println(&quot;Wooooooooooooooooooohoooooooooooooooooooooooo!!!!&quot;);\n        } else {\n            session.connect();\n        }\n\n        // Command 2\n        channelExec.setCommand(&quot;show version&quot;);\n\n        channelExec.connect();\n\n        while (channelExec.isConnected()) {\n            Thread.sleep(1000);\n        }\n\n        responseString = new String(responseStream.toByteArray());\n\n        System.out.println(&quot;Show Version Output:\\n&quot;);\n        System.out.println(responseString);\n\n    } catch (JSchException e) {\n\n        e.printStackTrace();\n\n    } catch (InterruptedException e) {\n\n        e.printStackTrace();\n\n    } catch (Exception e) {\n\n        e.printStackTrace();\n\n    } finally {\n\n        if (session != null) {\n            session.disconnect();\n        }\n\n        if (channelExec != null) {\n            channelExec.disconnect();\n        }\n    }\n}\n</code></pre>\n<p>When it comes for the second <code>session.connect()</code> inside the <code>if</code> block, it throws the error. The only other thing I noticed is the when I put the ciphers in, this part:</p>\n<pre><code>// Set the Ciphers.\nproperties.put(&quot;cipher.s2c&quot;, &quot;aes128-cbc&quot;);\nproperties.put(&quot;cipher.c2s&quot;, &quot;aes128-cbc&quot;);\nproperties.put(&quot;CheckCiphers&quot;, &quot;aes128-cbc&quot;);\n</code></pre>\n<p>I get a different error on the same line. I get:</p>\n<pre><code>com.jcraft.jsch.JSchException: Session.connect: java.io.IOException: End of IO Stream Read\n    at com.jcraft.jsch.Session.connect(Session.java:565)\n    at com.jcraft.jsch.Session.connect(Session.java:183)\n</code></pre>\n<p>Any pointers on how to keep the session alive between two <code>ChannelExec</code> execute would really helpful. Thanks.</p>\n"},{"tags":["java","java-stream"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665657448,"creation_date":1665645909,"answer_id":74051920,"question_id":74051740,"body_markdown":"The behavior you&#39;ve observed is correct.\r\n\r\nFor the condition `!isJenniferReached.get()` to be evaluated to `true`, firstly, string `&quot;Jennifer&quot;` should be processed by `forEach` operation (and it would be added to the list `newPpl`), and only then when dealing with the next stream element `takeWhile()` will terminate the execution of the pipeline.\r\n\r\n**Note**\r\n* That the code you&#39;ve listed unnecessarily operates via side-effects, which discouraged by the [Stream API documentation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#SideEffects).\r\n* Classes from the package `java.util.concurrent.atomic` are meant to be utilized in a multitiered environment, not for hacky tricks serving as a substation of a `boolean` flag, or `int` counter-variable. They act slower and more importantly make the code much more convoluted than it could be.\r\n\r\n* Also as mentioned by *@Holger* in the comments, this code can be considered to be broken since operation [`forEach()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#forEach(java.util.function.Consumer)) *&quot;does not guarantee to respect the encounter order of the stream&quot;*, hence if the stream would be parallelized the contents of the resulting list will unpredictably change.\r\n\r\nThat how the logic *&quot;take strings from the source while Jennifer is not encountered&quot;* can be expressed in a more simple manner without side-effects.\r\n\r\n```\r\nList&lt;String&gt; newPpl = ppl.stream()\r\n    .takeWhile(person -&gt; !person.equals(&quot;Jennifer&quot;))\r\n    .map(person -&gt; person + &quot; 1&quot;)\r\n    .toList(); // for Java 16+ or collect(Collectors.toList())\r\n```\r\n*Output:*\r\n```\r\n[Bill 1, Bob 1]\r\n```","title":"Understanding Java stream takeWhile","body":"<p>The behavior you've observed is correct.</p>\n<p>For the condition <code>!isJenniferReached.get()</code> to be evaluated to <code>true</code>, firstly, string <code>&quot;Jennifer&quot;</code> should be processed by <code>forEach</code> operation (and it would be added to the list <code>newPpl</code>), and only then when dealing with the next stream element <code>takeWhile()</code> will terminate the execution of the pipeline.</p>\n<p><strong>Note</strong></p>\n<ul>\n<li><p>That the code you've listed unnecessarily operates via side-effects, which discouraged by the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#SideEffects\" rel=\"nofollow noreferrer\">Stream API documentation</a>.</p>\n</li>\n<li><p>Classes from the package <code>java.util.concurrent.atomic</code> are meant to be utilized in a multitiered environment, not for hacky tricks serving as a substation of a <code>boolean</code> flag, or <code>int</code> counter-variable. They act slower and more importantly make the code much more convoluted than it could be.</p>\n</li>\n<li><p>Also as mentioned by <em>@Holger</em> in the comments, this code can be considered to be broken since operation <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#forEach(java.util.function.Consumer)\" rel=\"nofollow noreferrer\"><code>forEach()</code></a> <em>&quot;does not guarantee to respect the encounter order of the stream&quot;</em>, hence if the stream would be parallelized the contents of the resulting list will unpredictably change.</p>\n</li>\n</ul>\n<p>That how the logic <em>&quot;take strings from the source while Jennifer is not encountered&quot;</em> can be expressed in a more simple manner without side-effects.</p>\n<pre><code>List&lt;String&gt; newPpl = ppl.stream()\n    .takeWhile(person -&gt; !person.equals(&quot;Jennifer&quot;))\n    .map(person -&gt; person + &quot; 1&quot;)\n    .toList(); // for Java 16+ or collect(Collectors.toList())\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>[Bill 1, Bob 1]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1665646602,"creation_date":1665646602,"answer_id":74052049,"question_id":74051740,"body_markdown":"_From my understanding, each member of the list pass the entire intermediate pipeline_: your understanding is wrong.\r\n\r\nIt is the terminal operation that requests an item from the previous step and this requests ultimately leads to fetching an item from the source and processing it in the intermediate steps.\r\n\r\nThe is summarized in the [Stream JavaDoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html):\r\n\r\n&gt; * No storage. **A stream is not a data structure that stores elements**; [...]\r\n&gt; * Laziness-seeking. Many stream operations, such as filtering, mapping, or duplicate removal, can be implemented lazily, exposing opportunities for optimization. For example, &quot;find the first String with three consecutive vowels&quot; need not examine all the input strings. Stream operations are divided into intermediate (Stream-producing) operations and terminal (value- or side-effect-producing) operations. **Intermediate operations are always lazy.**\r\n&gt; * **Possibly unbounded**. While collections have a finite size, streams need not. [...]\r\n\r\nNote that the last point is only possible if streams are evaluated lazily - you cannot store all the intermediate results of an unbounded stream in memory.\r\n","title":"Understanding Java stream takeWhile","body":"<p><em>From my understanding, each member of the list pass the entire intermediate pipeline</em>: your understanding is wrong.</p>\n<p>It is the terminal operation that requests an item from the previous step and this requests ultimately leads to fetching an item from the source and processing it in the intermediate steps.</p>\n<p>The is summarized in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\">Stream JavaDoc</a>:</p>\n<blockquote>\n<ul>\n<li>No storage. <strong>A stream is not a data structure that stores elements</strong>; [...]</li>\n<li>Laziness-seeking. Many stream operations, such as filtering, mapping, or duplicate removal, can be implemented lazily, exposing opportunities for optimization. For example, &quot;find the first String with three consecutive vowels&quot; need not examine all the input strings. Stream operations are divided into intermediate (Stream-producing) operations and terminal (value- or side-effect-producing) operations. <strong>Intermediate operations are always lazy.</strong></li>\n<li><strong>Possibly unbounded</strong>. While collections have a finite size, streams need not. [...]</li>\n</ul>\n</blockquote>\n<p>Note that the last point is only possible if streams are evaluated lazily - you cannot store all the intermediate results of an unbounded stream in memory.</p>\n"}],"owner":{"account_id":5160779,"reputation":154,"user_id":4132541,"display_name":"Lior Derei"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":850,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74051920,"answer_count":2,"score":2,"last_activity_date":1665657448,"creation_date":1665644982,"question_id":74051740,"body_markdown":"I have a piece of code and I&#39;m not sure why it&#39;s working:\r\n```JAVA\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; ppl = List.of(&quot;Bill&quot;, &quot;Bob&quot;, &quot;Jennifer&quot;, &quot;Ben&quot;);\r\n        List&lt;String&gt; newPpl = new ArrayList&lt;&gt;();\r\n        AtomicBoolean isJenniferReached = new AtomicBoolean(false);\r\n\r\n        ppl.stream()\r\n                .takeWhile(person -&gt; !isJenniferReached.get())\r\n                .forEach(person -&gt; {\r\n                    newPpl.add(person + &quot; 1&quot;);\r\n                    if(person.equals(&quot;Jennifer&quot;)) {\r\n                        isJenniferReached.set(true);\r\n                    }\r\n                });\r\n        System.out.println(newPpl);\r\n    }\r\n```\r\nthe result is:\r\n\r\n```\r\n[Bill 1, Bob 1, Jennifer 1]\r\n```\r\n\r\nFrom my understanding, each member of the list pass the entire intermediate pipeline and after all members finished, the terminal operation is being executed on them.\r\n\r\nif this is the case - how come this method works? since the boolean is being set to true only in the terminal operation I would expect it to be too late and all members will be processed. \r\n\r\nBut since this isn&#39;t the case, can you please help me understand what&#39;s going on?","title":"Understanding Java stream takeWhile","body":"<p>I have a piece of code and I'm not sure why it's working:</p>\n<pre><code>    public static void main(String[] args) {\n        List&lt;String&gt; ppl = List.of(&quot;Bill&quot;, &quot;Bob&quot;, &quot;Jennifer&quot;, &quot;Ben&quot;);\n        List&lt;String&gt; newPpl = new ArrayList&lt;&gt;();\n        AtomicBoolean isJenniferReached = new AtomicBoolean(false);\n\n        ppl.stream()\n                .takeWhile(person -&gt; !isJenniferReached.get())\n                .forEach(person -&gt; {\n                    newPpl.add(person + &quot; 1&quot;);\n                    if(person.equals(&quot;Jennifer&quot;)) {\n                        isJenniferReached.set(true);\n                    }\n                });\n        System.out.println(newPpl);\n    }\n</code></pre>\n<p>the result is:</p>\n<pre><code>[Bill 1, Bob 1, Jennifer 1]\n</code></pre>\n<p>From my understanding, each member of the list pass the entire intermediate pipeline and after all members finished, the terminal operation is being executed on them.</p>\n<p>if this is the case - how come this method works? since the boolean is being set to true only in the terminal operation I would expect it to be too late and all members will be processed.</p>\n<p>But since this isn't the case, can you please help me understand what's going on?</p>\n"},{"tags":["java","eclipse","maven","apache-poi"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":3,"creation_date":1665657181,"post_id":74054184,"comment_id":130753229,"body_markdown":"_&quot;poi.xml page&quot;_ - you mean the `pom.xml` tab, right? _&quot;after changing the laptop&quot;_ - Did you use a fresh workspace on the new laptop in which you imported your projects (copying the workspace will not work in case paths have changed or when using a different Eclipse version)? Is your Eclipse up to date (please add the version to your question)?","body":"<i>&quot;poi.xml page&quot;</i> - you mean the <code>pom.xml</code> tab, right? <i>&quot;after changing the laptop&quot;</i> - Did you use a fresh workspace on the new laptop in which you imported your projects (copying the workspace will not work in case paths have changed or when using a different Eclipse version)? Is your Eclipse up to date (please add the version to your question)?"}],"answers":[{"tags":[],"owner":{"account_id":10469593,"reputation":74,"user_id":7911017,"display_name":"Pavlo Kuchereshko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665657367,"creation_date":1665657367,"answer_id":74054362,"question_id":74054184,"body_markdown":"try to use the latest version - https://maven.apache.org/plugins/maven-resources-plugin/dependency-info.html#apache-maven","title":"Maven issue after changing device","body":"<p>try to use the latest version - <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/dependency-info.html#apache-maven\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-resources-plugin/dependency-info.html#apache-maven</a></p>\n"}],"owner":{"account_id":24850125,"reputation":35,"user_id":18727166,"display_name":"Arpan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74054362,"answer_count":1,"score":0,"last_activity_date":1665657367,"creation_date":1665656691,"question_id":74054184,"body_markdown":"Trying to get back to the old project after changing the laptop and the poi.xml page keeps saying a problem occurred while I open the page. Doesn&#39;t allow me to run any thing at all in the project. Working on eclipse.\r\n\r\n```\r\nErrors occurred during the build.\r\nErrors running builder &#39;Maven Project Builder&#39; on project &#39;scratchit&#39;.\r\nCould not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\r\nPlugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\r\nCould not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\r\nPlugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\r\n```","title":"Maven issue after changing device","body":"<p>Trying to get back to the old project after changing the laptop and the poi.xml page keeps saying a problem occurred while I open the page. Doesn't allow me to run any thing at all in the project. Working on eclipse.</p>\n<pre><code>Errors occurred during the build.\nErrors running builder 'Maven Project Builder' on project 'scratchit'.\nCould not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\nPlugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\nCould not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\nPlugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","logback"],"comments":[{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":0,"creation_date":1665601612,"post_id":74044221,"comment_id":130741749,"body_markdown":"in root tag can you additionally adding one more appender ref for OTEL?","body":"in root tag can you additionally adding one more appender ref for OTEL?"}],"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665657260,"creation_date":1665587569,"question_id":74044221,"body_markdown":"I am trying to implement trace context for my Spring Boot application.\r\n\r\nI have added the following dependency,\r\n\r\n&gt; implementation\r\n&gt; &#39;io.opentelemetry.instrumentation:opentelemetry-logback-1.0:0.16.1&#39;\r\n\r\n\r\nMy logback-spring.xml file is as follows,\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;&lt;encoder&gt;\r\n            &lt;pattern&gt;&lt;![CDATA[%date{HH:mm:ss.SSS} [%thread] %-5level %logger{15}#%line %X{req.requestURI} traceId: %X{trace_id} spanId: %X{span_id} %msg\\n]]&gt;&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n        &lt;appender name=&quot;OTEL&quot; class=&quot;io.opentelemetry.instrumentation.logback.v1_0.OpenTelemetryAppender&quot;&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n        &lt;/appender&gt;\r\n        &lt;root&gt;\r\n            &lt;level value=&quot;INFO&quot; /&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\nBut I am seeing only clumsy and empty traces like below\r\n\r\n    17:03:57.851 [main] INFO  o.s.c.c.s.GenericScope#283  traceId:  spanId:  BeanFactory id=b301daf5-b80a-67e2-bcc9-d6e276481af3\r\n\r\n\r\nFollowed by the error\r\n\r\n    ERROR o.s.b.SpringApplication#824  traceId:  spanId:  Application run failed\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;otelRestTemplateBeanPostProcessor&#39; defined in class path resource [io/opentelemetry/instrumentation/spring/autoconfigure/httpclients/resttemplate/RestTemplateAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;otelRestTemplateBeanPostProcessor&#39; parameter 0; \r\n\r\nAny hints on the same will be quite helpful.","title":"Empty Tracelogs in Springboot console","body":"<p>I am trying to implement trace context for my Spring Boot application.</p>\n<p>I have added the following dependency,</p>\n<blockquote>\n<p>implementation\n'io.opentelemetry.instrumentation:opentelemetry-logback-1.0:0.16.1'</p>\n</blockquote>\n<p>My logback-spring.xml file is as follows,</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;configuration&gt;\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;&lt;encoder&gt;\n        &lt;pattern&gt;&lt;![CDATA[%date{HH:mm:ss.SSS} [%thread] %-5level %logger{15}#%line %X{req.requestURI} traceId: %X{trace_id} spanId: %X{span_id} %msg\\n]]&gt;&lt;/pattern&gt;\n    &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;appender name=&quot;OTEL&quot; class=&quot;io.opentelemetry.instrumentation.logback.v1_0.OpenTelemetryAppender&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n    &lt;/appender&gt;\n    &lt;root&gt;\n        &lt;level value=&quot;INFO&quot; /&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>But I am seeing only clumsy and empty traces like below</p>\n<pre><code>17:03:57.851 [main] INFO  o.s.c.c.s.GenericScope#283  traceId:  spanId:  BeanFactory id=b301daf5-b80a-67e2-bcc9-d6e276481af3\n</code></pre>\n<p>Followed by the error</p>\n<pre><code>ERROR o.s.b.SpringApplication#824  traceId:  spanId:  Application run failed\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'otelRestTemplateBeanPostProcessor' defined in class path resource [io/opentelemetry/instrumentation/spring/autoconfigure/httpclients/resttemplate/RestTemplateAutoConfiguration.class]: Unsatisfied dependency expressed through method 'otelRestTemplateBeanPostProcessor' parameter 0; \n</code></pre>\n<p>Any hints on the same will be quite helpful.</p>\n"},{"tags":["java","aspectj"],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665657029,"creation_date":1665657029,"answer_id":74054265,"question_id":74038781,"body_markdown":"This is not possible directly with an exact pointcut expression, but you can use [`if()` pointcuts](https://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-pcadvice.html#d0e3697) to dynamically determine from the stack trace or - like in this case - from the enclosing join point static part exposed by AspectJ - what the executing method is. Here is a little example and an aspect in two variants: native syntax (my preference, more elegant and less boilerplate) and annotation-style syntax:\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\npublic class Application {\r\n  private int field = 0;\r\n\r\n  public static void main(String[] args) {\r\n    Application app = new Application();\r\n    app.foo(11);\r\n    app.bar(22);\r\n  }\r\n\r\n  public void foo(int i) {\r\n    field = i;\r\n    bar(2 * i);\r\n  }\r\n\r\n  void bar(int i) {\r\n    field = i;\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.aspect;\r\n\r\nimport org.aspectj.lang.JoinPoint;\r\n\r\npublic aspect MyAspectNative {\r\n  pointcut pointcutForSpecificMethod() : execution(* foo(*));\r\n\r\n  public static boolean executingMethodMatches(JoinPoint.StaticPart staticPart) {\r\n    return staticPart.getSignature().toLongString().contains(&quot;de.scrum_master.app.Application.foo(int)&quot;);\r\n  }\r\n\r\n  before() :\r\n    cflow(pointcutForSpecificMethod()) &amp;&amp; set(* *) &amp;&amp;\r\n    if(executingMethodMatches(thisEnclosingJoinPointStaticPart))\r\n  {\r\n    System.out.println(thisEnclosingJoinPointStaticPart);\r\n    System.out.println(thisJoinPoint);\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.aspect;\r\n\r\nimport org.aspectj.lang.JoinPoint;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\nimport org.aspectj.lang.annotation.Pointcut;\r\n\r\n@Aspect\r\npublic class MyAspect {\r\n  @Pointcut(&quot;execution(* foo(*))&quot;)\r\n  private static void pointcutForSpecificMethod() {}\r\n\r\n  @Pointcut(&quot;if()&quot;)\r\n  public static boolean executingMethodMatches(JoinPoint.EnclosingStaticPart staticPart) {\r\n    return staticPart.getSignature().toLongString().contains(&quot;de.scrum_master.app.Application.foo(int)&quot;);\r\n  }\r\n\r\n  @Before(\r\n    &quot;cflow(pointcutForSpecificMethod()) &amp;&amp; set(* *) &amp;&amp; &quot; +\r\n    &quot;executingMethodMatches(thisEnclosingJoinPointStaticPart)&quot;\r\n  )\r\n  public void beforeAdvice(JoinPoint thisJoinPoint, JoinPoint.EnclosingStaticPart thisEnclosingJoinPointStaticPart)\r\n  {\r\n    System.out.println(thisEnclosingJoinPointStaticPart);\r\n    System.out.println(thisJoinPoint);\r\n  }\r\n}\r\n```\r\n\r\nI tried to keep the two aspects as similar as possible structurally. No matter which aspect syntax variant you choose, the output will be:\r\n\r\n```none\r\nexecution(void de.scrum_master.app.Application.foo(int))\r\nset(int de.scrum_master.app.Application.field)\r\n```\r\n","title":"how to pick set joinpoints in specific methods in AspectJ","body":"<p>This is not possible directly with an exact pointcut expression, but you can use <a href=\"https://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-pcadvice.html#d0e3697\" rel=\"nofollow noreferrer\"><code>if()</code> pointcuts</a> to dynamically determine from the stack trace or - like in this case - from the enclosing join point static part exposed by AspectJ - what the executing method is. Here is a little example and an aspect in two variants: native syntax (my preference, more elegant and less boilerplate) and annotation-style syntax:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Application {\n  private int field = 0;\n\n  public static void main(String[] args) {\n    Application app = new Application();\n    app.foo(11);\n    app.bar(22);\n  }\n\n  public void foo(int i) {\n    field = i;\n    bar(2 * i);\n  }\n\n  void bar(int i) {\n    field = i;\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.JoinPoint;\n\npublic aspect MyAspectNative {\n  pointcut pointcutForSpecificMethod() : execution(* foo(*));\n\n  public static boolean executingMethodMatches(JoinPoint.StaticPart staticPart) {\n    return staticPart.getSignature().toLongString().contains(&quot;de.scrum_master.app.Application.foo(int)&quot;);\n  }\n\n  before() :\n    cflow(pointcutForSpecificMethod()) &amp;&amp; set(* *) &amp;&amp;\n    if(executingMethodMatches(thisEnclosingJoinPointStaticPart))\n  {\n    System.out.println(thisEnclosingJoinPointStaticPart);\n    System.out.println(thisJoinPoint);\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\n\n@Aspect\npublic class MyAspect {\n  @Pointcut(&quot;execution(* foo(*))&quot;)\n  private static void pointcutForSpecificMethod() {}\n\n  @Pointcut(&quot;if()&quot;)\n  public static boolean executingMethodMatches(JoinPoint.EnclosingStaticPart staticPart) {\n    return staticPart.getSignature().toLongString().contains(&quot;de.scrum_master.app.Application.foo(int)&quot;);\n  }\n\n  @Before(\n    &quot;cflow(pointcutForSpecificMethod()) &amp;&amp; set(* *) &amp;&amp; &quot; +\n    &quot;executingMethodMatches(thisEnclosingJoinPointStaticPart)&quot;\n  )\n  public void beforeAdvice(JoinPoint thisJoinPoint, JoinPoint.EnclosingStaticPart thisEnclosingJoinPointStaticPart)\n  {\n    System.out.println(thisEnclosingJoinPointStaticPart);\n    System.out.println(thisJoinPoint);\n  }\n}\n</code></pre>\n<p>I tried to keep the two aspects as similar as possible structurally. No matter which aspect syntax variant you choose, the output will be:</p>\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.app.Application.foo(int))\nset(int de.scrum_master.app.Application.field)\n</code></pre>\n"}],"owner":{"account_id":23587902,"reputation":53,"user_id":17697751,"display_name":"avenue68"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74054265,"answer_count":1,"score":0,"last_activity_date":1665657029,"creation_date":1665563509,"question_id":74038781,"body_markdown":"I&#39;m developing an Advice and I want to make it advise only on field sets in specific methods.\r\nI tried `cflow(pointcutForSpecificMethod()) &amp;&amp; set(* *)` pointcut expression but it picks field sets in other methods under control flow of specific methods.\r\n\r\nAny idea?","title":"how to pick set joinpoints in specific methods in AspectJ","body":"<p>I'm developing an Advice and I want to make it advise only on field sets in specific methods.\nI tried <code>cflow(pointcutForSpecificMethod()) &amp;&amp; set(* *)</code> pointcut expression but it picks field sets in other methods under control flow of specific methods.</p>\n<p>Any idea?</p>\n"},{"tags":["java","swagger","codegen"],"answers":[{"tags":[],"owner":{"account_id":19310186,"reputation":21,"user_id":16347427,"display_name":"Drew Haven"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1625029479,"creation_date":1625029479,"answer_id":68188717,"question_id":67111763,"body_markdown":"That option doesn&#39;t do anything on its own, but rather it modifies the way _that invocation_ of Java will run.  You still need to add that option to the `java` that is invoked when you run `mvn`.\r\n\r\nOne way to do that, is to add the option to the Maven files (someone else can help with that or you can search for how to set Java options in Maven files).\r\n\r\nI ran into a similar situation and instead used `_JAVA_OPTIONS` to pass it through.  You may be able to do something similar by prefixing your invocation of `mvn` with `_JAVA_OPTIONS`, though it is possible that Maven will override those and you&#39;ll have to modify the file as described above.\r\n\r\nFor reference, here is the command I used successfully:\r\n```\r\n_JAVA_OPTIONS=&quot;--add-opens=java.base/java.util=ALL-UNNAMED&quot; swagger-codegen3 generate --lang python --input-spec spec.yaml\r\n```","title":"JDK14 can&#39;t run &quot;java --add-opens&quot;","body":"<p>That option doesn't do anything on its own, but rather it modifies the way <em>that invocation</em> of Java will run.  You still need to add that option to the <code>java</code> that is invoked when you run <code>mvn</code>.</p>\n<p>One way to do that, is to add the option to the Maven files (someone else can help with that or you can search for how to set Java options in Maven files).</p>\n<p>I ran into a similar situation and instead used <code>_JAVA_OPTIONS</code> to pass it through.  You may be able to do something similar by prefixing your invocation of <code>mvn</code> with <code>_JAVA_OPTIONS</code>, though it is possible that Maven will override those and you'll have to modify the file as described above.</p>\n<p>For reference, here is the command I used successfully:</p>\n<pre><code>_JAVA_OPTIONS=&quot;--add-opens=java.base/java.util=ALL-UNNAMED&quot; swagger-codegen3 generate --lang python --input-spec spec.yaml\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1164676,"reputation":717,"user_id":6950119,"display_name":"Techflash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657743135,"creation_date":1657743135,"answer_id":72972098,"question_id":67111763,"body_markdown":"&gt; This error suggests that code generation plugin failed to access\r\n&gt; `java.base` and `java.util` package through reflection. JDK 16+ throws exception instead of warnings in these cases.\r\n&gt; \r\n&gt; To execute codegen in a JDK 16+ environment you have to set following JVM option to allow access to these packages:\r\n\r\n    --add-opens=java.base/java.util=ALL-UNNAMED\r\n\r\n&gt; To configure maven to use this option at runtime create a file `jvm.config` at path `${maven.projectBasedir}/.mvn` and add above option into this file.\r\n&gt; \r\n&gt; See here for more info:\r\n&gt; \r\n&gt; [--add-opens][1]  \r\n&gt; [jva.config file][2]\r\n\r\n\r\n  [1]: https://nipafx.dev/five-command-line-options-hack-java-module-system/#Reflectively-Accessing-Internal-APIs-With--add-opens\r\n  [2]: https://maven.apache.org/configure.html#mvn-jvm-config-file","title":"JDK14 can&#39;t run &quot;java --add-opens&quot;","body":"<blockquote>\n<p>This error suggests that code generation plugin failed to access\n<code>java.base</code> and <code>java.util</code> package through reflection. JDK 16+ throws exception instead of warnings in these cases.</p>\n<p>To execute codegen in a JDK 16+ environment you have to set following JVM option to allow access to these packages:</p>\n</blockquote>\n<pre><code>--add-opens=java.base/java.util=ALL-UNNAMED\n</code></pre>\n<blockquote>\n<p>To configure maven to use this option at runtime create a file <code>jvm.config</code> at path <code>${maven.projectBasedir}/.mvn</code> and add above option into this file.</p>\n<p>See here for more info:</p>\n<p><a href=\"https://nipafx.dev/five-command-line-options-hack-java-module-system/#Reflectively-Accessing-Internal-APIs-With--add-opens\" rel=\"nofollow noreferrer\">--add-opens</a><br />\n<a href=\"https://maven.apache.org/configure.html#mvn-jvm-config-file\" rel=\"nofollow noreferrer\">jva.config file</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3093619,"reputation":135,"user_id":2619258,"display_name":"Bruno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665656976,"creation_date":1665656976,"answer_id":74054255,"question_id":67111763,"body_markdown":"I had the same problem. I could workaround it by upgrading handlebars, a swagger-codegen dependency:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;io.swagger.codegen.v3&lt;/groupId&gt;\r\n                &lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;com.github.jknack&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;handlebars&lt;/artifactId&gt;\r\n                        &lt;version&gt;4.3.0&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n                &lt;executions&gt;\r\n                 .\r\n                 .\r\n                 .\r\n            &lt;/plugin&gt;\r\n\r\n\r\nAnother option is to simply upgrade your swagger-code-maven-plugin to a version 3.0.0 or higher. [More info here][1]\r\n\r\n\r\n  [1]: https://github.com/swagger-api/swagger-codegen/pull/11705","title":"JDK14 can&#39;t run &quot;java --add-opens&quot;","body":"<p>I had the same problem. I could workaround it by upgrading handlebars, a swagger-codegen dependency:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;io.swagger.codegen.v3&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;com.github.jknack&lt;/groupId&gt;\n                    &lt;artifactId&gt;handlebars&lt;/artifactId&gt;\n                    &lt;version&gt;4.3.0&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;executions&gt;\n             .\n             .\n             .\n        &lt;/plugin&gt;\n</code></pre>\n<p>Another option is to simply upgrade your swagger-code-maven-plugin to a version 3.0.0 or higher. <a href=\"https://github.com/swagger-api/swagger-codegen/pull/11705\" rel=\"nofollow noreferrer\">More info here</a></p>\n"}],"owner":{"account_id":6034487,"reputation":198,"user_id":11421559,"display_name":"kinderproc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4199,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1665656976,"creation_date":1618501805,"question_id":67111763,"body_markdown":"I&#39;m doing a small project to learn swagger-codegen. When I&#39;m executing &quot;mvn clean install&quot; the next errors appear:\r\n\r\n`Unable to make public boolean java.util.Collections$EmptyMap.isEmpty() accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @1e1b061`\r\n\r\nand then\r\n\r\n`Failed to execute goal io.swagger.codegen.v3:swagger-codegen-maven-plugin:3.0.18:generate (default) on project swgtst-api: Code generation failed. See above for the full exception.`\r\n\r\nWhen i&#39;m trying to solve it with `java --add-opens=java.base/java.util=ALL-UNNAMED` as written here https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66\r\nNothing happens, just java help is shown.\r\n\r\nFor sure the last command has problem with syntax, but I have no Idea what exactly... What am I doing wrong?","title":"JDK14 can&#39;t run &quot;java --add-opens&quot;","body":"<p>I'm doing a small project to learn swagger-codegen. When I'm executing &quot;mvn clean install&quot; the next errors appear:</p>\n<p><code>Unable to make public boolean java.util.Collections$EmptyMap.isEmpty() accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @1e1b061</code></p>\n<p>and then</p>\n<p><code>Failed to execute goal io.swagger.codegen.v3:swagger-codegen-maven-plugin:3.0.18:generate (default) on project swgtst-api: Code generation failed. See above for the full exception.</code></p>\n<p>When i'm trying to solve it with <code>java --add-opens=java.base/java.util=ALL-UNNAMED</code> as written here <a href=\"https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66\" rel=\"noreferrer\">https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-2F61F3A9-0979-46A4-8B49-325BA0EE8B66</a>\nNothing happens, just java help is shown.</p>\n<p>For sure the last command has problem with syntax, but I have no Idea what exactly... What am I doing wrong?</p>\n"},{"tags":["java","drools","rules","bpmn","rule-engine"],"comments":[{"owner":{"account_id":19235586,"reputation":264,"user_id":14056614,"display_name":"Deb Das"},"score":0,"creation_date":1665659559,"post_id":74054243,"comment_id":130753955,"body_markdown":"would help if you share the bpmn file as the process flow needs to be clearly understood to answer the question","body":"would help if you share the bpmn file as the process flow needs to be clearly understood to answer the question"},{"owner":{"account_id":1211231,"reputation":11,"user_id":1179718,"display_name":"Vishal Pardava"},"score":0,"creation_date":1665672672,"post_id":74054243,"comment_id":130758678,"body_markdown":"@DebDas I would love to but I am not allowed to as per company policy","body":"@DebDas I would love to but I am not allowed to as per company policy"},{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":1,"creation_date":1665674437,"post_id":74054243,"comment_id":130759407,"body_markdown":"so create an anonymized example which still causes the same problem and share that.","body":"so create an anonymized example which still causes the same problem and share that."},{"owner":{"account_id":19235586,"reputation":264,"user_id":14056614,"display_name":"Deb Das"},"score":0,"creation_date":1666009071,"post_id":74054243,"comment_id":130826216,"body_markdown":"@VishalPardava you can write an example without actually using the business models","body":"@VishalPardava you can write an example without actually using the business models"}],"owner":{"account_id":1211231,"reputation":11,"user_id":1179718,"display_name":"Vishal Pardava"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665656924,"creation_date":1665656924,"question_id":74054243,"body_markdown":"I am using Drools BPMN rule engine for business rules validation and getting below errors intermittently in my application.\r\n\r\n**Exception while executing rules. [determine_flow_name:1 - Determine Flow Name Setup:3] -- [poareqflow:6 - POA Flow Setup:17] -- [poareqflow:6 - App Request:43] -- [poareqflow:6 - SDM Mapping:28] -- [poareqflow:6 - SDMEnrichment:41] – null**\r\n\r\nI am looking for below information.\r\n\r\n1. How can I know more about what is this NULL , I changed log level to TRACE but no more information on logs.\r\n2. What are these number with colon : **SDMEnrichment:41** [They are not line number for sure]\r\n\r\n\r\nAny help is much appreciated \r\n","title":"Drools Business Rules : Unable to determine what is this NULL in exception detail and What these number with colon","body":"<p>I am using Drools BPMN rule engine for business rules validation and getting below errors intermittently in my application.</p>\n<p><strong>Exception while executing rules. [determine_flow_name:1 - Determine Flow Name Setup:3] -- [poareqflow:6 - POA Flow Setup:17] -- [poareqflow:6 - App Request:43] -- [poareqflow:6 - SDM Mapping:28] -- [poareqflow:6 - SDMEnrichment:41] – null</strong></p>\n<p>I am looking for below information.</p>\n<ol>\n<li>How can I know more about what is this NULL , I changed log level to TRACE but no more information on logs.</li>\n<li>What are these number with colon : <strong>SDMEnrichment:41</strong> [They are not line number for sure]</li>\n</ol>\n<p>Any help is much appreciated</p>\n"},{"tags":["java","android","android-edittext"],"comments":[{"owner":{"account_id":218521,"reputation":18298,"user_id":474883,"accept_rate":100,"display_name":"blindstuff"},"score":0,"creation_date":1300480645,"post_id":5357455,"comment_id":6052197,"body_markdown":"You could write a regular expression and verify the content of the edit text when it looses focus.","body":"You could write a regular expression and verify the content of the edit text when it looses focus."},{"owner":{"account_id":300330,"reputation":6240,"user_id":607405,"accept_rate":84,"display_name":"Konstantin Weitz"},"score":0,"creation_date":1300483887,"post_id":5357455,"comment_id":6052779,"body_markdown":"I found the `InputFilter` interface, it seems to do what i want http://developer.android.com/reference/android/text/method/NumberKeyListener.html#filter%28java.lang.CharSequence,%20int,%20int,%20android.text.Spanned,%20int,%20int%29, but the method `filter` that I have to implement is rather confusing to me. Did somebody write such a Filter already and knows how to use it?","body":"I found the <code>InputFilter</code> interface, it seems to do what i want <a href=\"http://developer.android.com/reference/android/text/method/NumberKeyListener.html#filter%28java.lang.CharSequence,%20int,%20int,%20android.text.Spanned,%20int,%20int%29\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/text/method/&hellip;</a>, but the method <code>filter</code> that I have to implement is rather confusing to me. Did somebody write such a Filter already and knows how to use it?"},{"owner":{"account_id":268069,"reputation":8191,"user_id":556613,"accept_rate":80,"display_name":"Nick"},"score":0,"creation_date":1470155554,"post_id":5357455,"comment_id":64827874,"body_markdown":"Do any of the suggested solutions work for RTL locales?  As far as I can tell they will not...","body":"Do any of the suggested solutions work for RTL locales?  As far as I can tell they will not..."}],"answers":[{"tags":[],"owner":{"account_id":129700,"reputation":44876,"user_id":328445,"accept_rate":100,"display_name":"Matthew"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1300481981,"creation_date":1300480394,"answer_id":5357531,"question_id":5357455,"body_markdown":"Try using [NumberFormat.getCurrencyInstance()][1] to format your string before you put it into a TextView.\r\n\r\nSomething like:\r\n\r\n    NumberFormat currency = NumberFormat.getCurrencyInstance();\r\n    myTextView.setText(currency.format(dollars));\r\n\r\n**Edit** - There is no inputType for currency that I could find in the docs. I imagine this is because there are some currencies that don&#39;t follow the same rule for decimal places, such as the Japanese Yen.\r\n\r\nAs LeffelMania mentioned, you can correct user input by using the above code with a `TextWatcher` that is set on your `EditText`.\r\n\r\n\r\n  [1]: http://developer.android.com/reference/java/text/NumberFormat.html#getCurrencyInstance%28%29","title":"Limit Decimal Places in Android EditText","body":"<p>Try using <a href=\"http://developer.android.com/reference/java/text/NumberFormat.html#getCurrencyInstance%28%29\" rel=\"noreferrer\">NumberFormat.getCurrencyInstance()</a> to format your string before you put it into a TextView.</p>\n\n<p>Something like:</p>\n\n<pre><code>NumberFormat currency = NumberFormat.getCurrencyInstance();\nmyTextView.setText(currency.format(dollars));\n</code></pre>\n\n<p><strong>Edit</strong> - There is no inputType for currency that I could find in the docs. I imagine this is because there are some currencies that don't follow the same rule for decimal places, such as the Japanese Yen.</p>\n\n<p>As LeffelMania mentioned, you can correct user input by using the above code with a <code>TextWatcher</code> that is set on your <code>EditText</code>.</p>\n"},{"tags":[],"owner":{"account_id":300330,"reputation":6240,"user_id":607405,"accept_rate":84,"display_name":"Konstantin Weitz"},"down_vote_count":1,"up_vote_count":42,"is_accepted":true,"score":41,"last_activity_date":1300630277,"creation_date":1300628245,"answer_id":5368816,"question_id":5357455,"body_markdown":"This implementation of `InputFilter` solves the problem.\r\n\r\n    import android.text.SpannableStringBuilder;\r\n    import android.text.Spanned;\r\n    import android.text.method.DigitsKeyListener;\r\n    \r\n    public class MoneyValueFilter extends DigitsKeyListener {\r\n    \tpublic MoneyValueFilter() {\r\n    \t\tsuper(false, true);\r\n    \t}\r\n    \r\n    \tprivate int digits = 2;\r\n    \r\n    \tpublic void setDigits(int d) {\r\n    \t\tdigits = d;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic CharSequence filter(CharSequence source, int start, int end,\r\n    \t\t\tSpanned dest, int dstart, int dend) {\r\n    \t\tCharSequence out = super.filter(source, start, end, dest, dstart, dend);\r\n    \r\n    \t\t// if changed, replace the source\r\n    \t\tif (out != null) {\r\n    \t\t\tsource = out;\r\n    \t\t\tstart = 0;\r\n    \t\t\tend = out.length();\r\n    \t\t}\r\n    \r\n    \t\tint len = end - start;\r\n    \r\n    \t\t// if deleting, source is empty\r\n    \t\t// and deleting can&#39;t break anything\r\n    \t\tif (len == 0) {\r\n    \t\t\treturn source;\r\n    \t\t}\r\n    \r\n    \t\tint dlen = dest.length();\r\n    \r\n    \t\t// Find the position of the decimal .\r\n    \t\tfor (int i = 0; i &lt; dstart; i++) {\r\n    \t\t\tif (dest.charAt(i) == &#39;.&#39;) {\r\n    \t\t\t\t// being here means, that a number has\r\n    \t\t\t\t// been inserted after the dot\r\n    \t\t\t\t// check if the amount of digits is right\r\n    \t\t\t\treturn (dlen-(i+1) + len &gt; digits) ? \r\n    \t\t\t\t\t&quot;&quot; :\r\n    \t\t\t\t\tnew SpannableStringBuilder(source, start, end);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tfor (int i = start; i &lt; end; ++i) {\r\n    \t\t\tif (source.charAt(i) == &#39;.&#39;) {\r\n    \t\t\t\t// being here means, dot has been inserted\r\n    \t\t\t\t// check if the amount of digits is right\r\n    \t\t\t\tif ((dlen-dend) + (end-(i + 1)) &gt; digits)\r\n    \t\t\t\t\treturn &quot;&quot;;\r\n    \t\t\t\telse\r\n    \t\t\t\t\tbreak;\t// return new SpannableStringBuilder(source, start, end);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t// if the dot is after the inserted part,\r\n    \t\t// nothing can break\r\n    \t\treturn new SpannableStringBuilder(source, start, end);\r\n    \t}\r\n    }\r\n\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>This implementation of <code>InputFilter</code> solves the problem.</p>\n\n<pre><code>import android.text.SpannableStringBuilder;\nimport android.text.Spanned;\nimport android.text.method.DigitsKeyListener;\n\npublic class MoneyValueFilter extends DigitsKeyListener {\n    public MoneyValueFilter() {\n        super(false, true);\n    }\n\n    private int digits = 2;\n\n    public void setDigits(int d) {\n        digits = d;\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end,\n            Spanned dest, int dstart, int dend) {\n        CharSequence out = super.filter(source, start, end, dest, dstart, dend);\n\n        // if changed, replace the source\n        if (out != null) {\n            source = out;\n            start = 0;\n            end = out.length();\n        }\n\n        int len = end - start;\n\n        // if deleting, source is empty\n        // and deleting can't break anything\n        if (len == 0) {\n            return source;\n        }\n\n        int dlen = dest.length();\n\n        // Find the position of the decimal .\n        for (int i = 0; i &lt; dstart; i++) {\n            if (dest.charAt(i) == '.') {\n                // being here means, that a number has\n                // been inserted after the dot\n                // check if the amount of digits is right\n                return (dlen-(i+1) + len &gt; digits) ? \n                    \"\" :\n                    new SpannableStringBuilder(source, start, end);\n            }\n        }\n\n        for (int i = start; i &lt; end; ++i) {\n            if (source.charAt(i) == '.') {\n                // being here means, dot has been inserted\n                // check if the amount of digits is right\n                if ((dlen-dend) + (end-(i + 1)) &gt; digits)\n                    return \"\";\n                else\n                    break;  // return new SpannableStringBuilder(source, start, end);\n            }\n        }\n\n        // if the dot is after the inserted part,\n        // nothing can break\n        return new SpannableStringBuilder(source, start, end);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":289517,"reputation":17358,"user_id":590531,"accept_rate":91,"display_name":"peceps"},"down_vote_count":2,"up_vote_count":72,"is_accepted":false,"score":70,"last_activity_date":1363781035,"creation_date":1307447918,"answer_id":6264829,"question_id":5357455,"body_markdown":"Simpler solution without using regex:\r\n\r\n    import android.text.InputFilter;\r\n    import android.text.Spanned;\r\n    \r\n    /**\r\n     * Input filter that limits the number of decimal digits that are allowed to be\r\n     * entered.\r\n     */\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n    \r\n      private final int decimalDigits;\r\n    \r\n      /**\r\n       * Constructor.\r\n       * \r\n       * @param decimalDigits maximum decimal digits\r\n       */\r\n      public DecimalDigitsInputFilter(int decimalDigits) {\r\n        this.decimalDigits = decimalDigits;\r\n      }\r\n    \r\n      @Override\r\n      public CharSequence filter(CharSequence source,\r\n          int start,\r\n          int end,\r\n          Spanned dest,\r\n          int dstart,\r\n          int dend) {\r\n    \r\n    \r\n        int dotPos = -1;\r\n        int len = dest.length();\r\n        for (int i = 0; i &lt; len; i++) {\r\n          char c = dest.charAt(i);\r\n          if (c == &#39;.&#39; || c == &#39;,&#39;) {\r\n            dotPos = i;\r\n            break;\r\n          }\r\n        }\r\n        if (dotPos &gt;= 0) {\r\n\r\n          // protects against many dots\r\n          if (source.equals(&quot;.&quot;) || source.equals(&quot;,&quot;))\r\n          {\r\n              return &quot;&quot;;\r\n          }\r\n          // if the text is entered before the dot\r\n          if (dend &lt;= dotPos) {\r\n            return null;\r\n          }\r\n          if (len - dotPos &gt; decimalDigits) {\r\n            return &quot;&quot;;\r\n          }\r\n        }\r\n    \r\n        return null;\r\n      }\r\n    \r\n    }\r\n\r\nTo use: \r\n\r\n    editText.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(2)});","title":"Limit Decimal Places in Android EditText","body":"<p>Simpler solution without using regex:</p>\n\n<pre><code>import android.text.InputFilter;\nimport android.text.Spanned;\n\n/**\n * Input filter that limits the number of decimal digits that are allowed to be\n * entered.\n */\npublic class DecimalDigitsInputFilter implements InputFilter {\n\n  private final int decimalDigits;\n\n  /**\n   * Constructor.\n   * \n   * @param decimalDigits maximum decimal digits\n   */\n  public DecimalDigitsInputFilter(int decimalDigits) {\n    this.decimalDigits = decimalDigits;\n  }\n\n  @Override\n  public CharSequence filter(CharSequence source,\n      int start,\n      int end,\n      Spanned dest,\n      int dstart,\n      int dend) {\n\n\n    int dotPos = -1;\n    int len = dest.length();\n    for (int i = 0; i &lt; len; i++) {\n      char c = dest.charAt(i);\n      if (c == '.' || c == ',') {\n        dotPos = i;\n        break;\n      }\n    }\n    if (dotPos &gt;= 0) {\n\n      // protects against many dots\n      if (source.equals(\".\") || source.equals(\",\"))\n      {\n          return \"\";\n      }\n      // if the text is entered before the dot\n      if (dend &lt;= dotPos) {\n        return null;\n      }\n      if (len - dotPos &gt; decimalDigits) {\n        return \"\";\n      }\n    }\n\n    return null;\n  }\n\n}\n</code></pre>\n\n<p>To use: </p>\n\n<pre><code>editText.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(2)});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218905,"reputation":15285,"user_id":475472,"accept_rate":72,"display_name":"Asaf Pinhassi"},"down_vote_count":6,"up_vote_count":134,"is_accepted":false,"score":128,"last_activity_date":1348048992,"creation_date":1322240640,"answer_id":8272212,"question_id":5357455,"body_markdown":"More elegant way would be using a regular expression ( regex ) as follows:\r\n\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n\r\n\tPattern mPattern;\r\n\r\n\tpublic DecimalDigitsInputFilter(int digitsBeforeZero,int digitsAfterZero) {\r\n\t\tmPattern=Pattern.compile(&quot;[0-9]{0,&quot; + (digitsBeforeZero-1) + &quot;}+((\\\\.[0-9]{0,&quot; + (digitsAfterZero-1) + &quot;})?)||(\\\\.)?&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic CharSequence filter(CharSequence source,\tint start, int end,\tSpanned dest, int dstart, int dend) {\r\n\r\n\t\t\tMatcher matcher=mPattern.matcher(dest);       \r\n\t\t\tif(!matcher.matches())\r\n\t\t\t\treturn &quot;&quot;;\r\n\t\t\treturn null;\r\n    \t}\r\n    \r\n    }\r\n\r\nTo use it do: \r\n\r\n    editText.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)});\r\n\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>More elegant way would be using a regular expression ( regex ) as follows:</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n\nPattern mPattern;\n\npublic DecimalDigitsInputFilter(int digitsBeforeZero,int digitsAfterZero) {\n    mPattern=Pattern.compile(\"[0-9]{0,\" + (digitsBeforeZero-1) + \"}+((\\\\.[0-9]{0,\" + (digitsAfterZero-1) + \"})?)||(\\\\.)?\");\n}\n\n@Override\npublic CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n\n        Matcher matcher=mPattern.matcher(dest);       \n        if(!matcher.matches())\n            return \"\";\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>To use it do: </p>\n\n<pre><code>editText.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1741106,"reputation":2301,"user_id":1592489,"display_name":"Sipka"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1346068136,"creation_date":1345990757,"answer_id":12130851,"question_id":5357455,"body_markdown":"    DecimalFormat form = new DecimalFormat(&quot;#.##&quot;, new DecimalFormatSymbols(Locale.US));\r\n        EditText et; \r\n        et.setOnEditorActionListener(new TextView.OnEditorActionListener() {\r\n            @Override\r\n            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {\r\n        \r\n            if (actionId == EditorInfo.IME_ACTION_DONE) {\r\n                double a = Double.parseDouble(et.getText().toString());\r\n                et.setText(form.format(a));\r\n            }\r\n            return false;\r\n        }\r\n    });\r\n\r\nWhat this does is when you exit editing phase it formats the field to the right format. At them moment it has only 2 decimal charachters. I think this is pretty easy way to do this.","title":"Limit Decimal Places in Android EditText","body":"<pre><code>DecimalFormat form = new DecimalFormat(\"#.##\", new DecimalFormatSymbols(Locale.US));\n    EditText et; \n    et.setOnEditorActionListener(new TextView.OnEditorActionListener() {\n        @Override\n        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {\n\n        if (actionId == EditorInfo.IME_ACTION_DONE) {\n            double a = Double.parseDouble(et.getText().toString());\n            et.setText(form.format(a));\n        }\n        return false;\n    }\n});\n</code></pre>\n\n<p>What this does is when you exit editing phase it formats the field to the right format. At them moment it has only 2 decimal charachters. I think this is pretty easy way to do this.</p>\n"},{"tags":[],"owner":{"account_id":112364,"reputation":25221,"user_id":296427,"accept_rate":91,"display_name":"pixel"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1347981999,"creation_date":1347981999,"answer_id":12480136,"question_id":5357455,"body_markdown":"Slightly improved @Pinhassi solution.\r\n\r\nWorks very well. It validates concatenated strings.\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n\r\n\tPattern mPattern;\r\n\r\n\tpublic DecimalDigitsInputFilter() {\r\n\t\tmPattern = Pattern.compile(&quot;([1-9]{1}[0-9]{0,2}([0-9]{3})*(\\\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\\\.[0-9]{0,2})?|0(\\\\.[0-9]{0,2})?|(\\\\.[0-9]{1,2})?)&quot;);\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n\r\n\t\tString formatedSource = source.subSequence(start, end).toString();\r\n\t\t\r\n\t\tString destPrefix = dest.subSequence(0, dstart).toString();\r\n\t\t\r\n\t\tString destSuffix = dest.subSequence(dend, dest.length()).toString();\r\n\t\t\r\n\t\tString result = destPrefix + formatedSource + destSuffix;\r\n\r\n\t\tresult = result.replace(&quot;,&quot;, &quot;.&quot;);\r\n\r\n\t\tMatcher matcher = mPattern.matcher(result);\r\n\r\n\t\tif (matcher.matches()) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn &quot;&quot;;\r\n\t}\r\n\r\n     }","title":"Limit Decimal Places in Android EditText","body":"<p>Slightly improved @Pinhassi solution.</p>\n\n<p>Works very well. It validates concatenated strings.</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n\nPattern mPattern;\n\npublic DecimalDigitsInputFilter() {\n    mPattern = Pattern.compile(\"([1-9]{1}[0-9]{0,2}([0-9]{3})*(\\\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\\\.[0-9]{0,2})?|0(\\\\.[0-9]{0,2})?|(\\\\.[0-9]{1,2})?)\");\n\n}\n\n@Override\npublic CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n\n    String formatedSource = source.subSequence(start, end).toString();\n\n    String destPrefix = dest.subSequence(0, dstart).toString();\n\n    String destSuffix = dest.subSequence(dend, dest.length()).toString();\n\n    String result = destPrefix + formatedSource + destSuffix;\n\n    result = result.replace(\",\", \".\");\n\n    Matcher matcher = mPattern.matcher(result);\n\n    if (matcher.matches()) {\n        return null;\n    }\n\n    return \"\";\n}\n\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053917,"reputation":9981,"user_id":1832221,"accept_rate":79,"display_name":"lopez.mikhael"},"down_vote_count":4,"up_vote_count":6,"is_accepted":false,"score":2,"last_activity_date":1369147202,"creation_date":1369147202,"answer_id":16672777,"question_id":5357455,"body_markdown":"Here is my solution:\r\n\r\n         yourEditText.addTextChangedListener(new TextWatcher() {\r\n\t\t\t@Override\r\n\t\t\tpublic void onTextChanged(CharSequence s, int start, int before, int count) {\r\n\t\t\t\tNumberFormat formatter = new DecimalFormat(&quot;#.##&quot;);\r\n\t\t\t\tdouble doubleVal = Double.parseDouble(s.toString());\r\n\t\t\t\tyourEditText.setText(formatter.format(doubleVal));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void beforeTextChanged(CharSequence s, int start, int count,int after) {}\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void afterTextChanged(Editable s) {}\r\n\t\t});\r\n\r\nIf the user enters a number with more than two numbers after the decimal point, it will be automatically corrected.\r\n\r\nI hope I have helped!","title":"Limit Decimal Places in Android EditText","body":"<p>Here is my solution:</p>\n\n<pre><code>     yourEditText.addTextChangedListener(new TextWatcher() {\n        @Override\n        public void onTextChanged(CharSequence s, int start, int before, int count) {\n            NumberFormat formatter = new DecimalFormat(\"#.##\");\n            double doubleVal = Double.parseDouble(s.toString());\n            yourEditText.setText(formatter.format(doubleVal));\n        }\n\n        @Override\n        public void beforeTextChanged(CharSequence s, int start, int count,int after) {}\n\n        @Override\n        public void afterTextChanged(Editable s) {}\n    });\n</code></pre>\n\n<p>If the user enters a number with more than two numbers after the decimal point, it will be automatically corrected.</p>\n\n<p>I hope I have helped!</p>\n"},{"tags":[],"owner":{"account_id":1716285,"reputation":14695,"user_id":1573279,"accept_rate":67,"display_name":"Gunaseelan"},"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1629631040,"creation_date":1369203086,"answer_id":16684661,"question_id":5357455,"body_markdown":"I achieved this with the help of `TextWatcher` by the following way\r\n    \r\n    final EditText et = (EditText) findViewById(R.id.EditText1);\r\n    int count = -1;\r\n    et.addTextChangedListener(new TextWatcher() {\r\n\t\tpublic void onTextChanged(CharSequence arg0, int arg1, int arg2,int arg3) {\t\t\t\t\r\n\r\n\t\t}\r\n\t\tpublic void beforeTextChanged(CharSequence arg0, int arg1,int arg2, int arg3) {\t\t\t\t\r\n\r\n\t\t}\r\n\r\n\t\tpublic void afterTextChanged(Editable arg0) {\r\n\t\t\tif (arg0.length() &gt; 0) {\r\n\t\t\t\tString str = et.getText().toString();\r\n\t\t\t\tet.setOnKeyListener(new OnKeyListener() {\r\n\t\t\t\t\tpublic boolean onKey(View v, int keyCode, KeyEvent event) {\r\n\t\t\t\t\t\tif (keyCode == KeyEvent.KEYCODE_DEL) {\r\n\t\t\t\t\t\t\tcount--;\r\n\t\t\t\t\t\t\tInputFilter[] fArray = new InputFilter[1];\r\n\t\t\t\t\t\t\tfArray[0] = new InputFilter.LengthFilter(100);\r\n\t\t\t\t\t\t\tet.setFilters(fArray);\r\n                            //change the edittext&#39;s maximum length to 100. \r\n                            //If we didn&#39;t change this the edittext&#39;s maximum length will\r\n                            //be number of digits we previously entered.\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tchar t = str.charAt(arg0.length() - 1);\r\n\t\t\t\tif (t == &#39;.&#39;) {\r\n\t\t\t\t\tcount = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (count &gt;= 0) {\r\n\t\t\t\t\tif (count == 2) {                        \r\n\t\t\t\t\t\tInputFilter[] fArray = new InputFilter[1];\r\n\t\t\t\t\t\tfArray[0] = new InputFilter.LengthFilter(arg0.length());\r\n\t\t\t\t\t\tet.setFilters(fArray);\r\n                        //prevent the edittext from accessing digits \r\n                        //by setting maximum length as total number of digits we typed till now.\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nThis solution will not allow the user to enter more than two digit after decimal point. Also you can enter any number of digits before decimal point. I hope this will help. Thank you.","title":"Limit Decimal Places in Android EditText","body":"<p>I achieved this with the help of <code>TextWatcher</code> by the following way</p>\n<pre><code>final EditText et = (EditText) findViewById(R.id.EditText1);\nint count = -1;\net.addTextChangedListener(new TextWatcher() {\n    public void onTextChanged(CharSequence arg0, int arg1, int arg2,int arg3) {             \n\n    }\n    public void beforeTextChanged(CharSequence arg0, int arg1,int arg2, int arg3) {             \n\n    }\n\n    public void afterTextChanged(Editable arg0) {\n        if (arg0.length() &gt; 0) {\n            String str = et.getText().toString();\n            et.setOnKeyListener(new OnKeyListener() {\n                public boolean onKey(View v, int keyCode, KeyEvent event) {\n                    if (keyCode == KeyEvent.KEYCODE_DEL) {\n                        count--;\n                        InputFilter[] fArray = new InputFilter[1];\n                        fArray[0] = new InputFilter.LengthFilter(100);\n                        et.setFilters(fArray);\n                        //change the edittext's maximum length to 100. \n                        //If we didn't change this the edittext's maximum length will\n                        //be number of digits we previously entered.\n                    }\n                    return false;\n                }\n            });\n            char t = str.charAt(arg0.length() - 1);\n            if (t == '.') {\n                count = 0;\n            }\n            if (count &gt;= 0) {\n                if (count == 2) {                        \n                    InputFilter[] fArray = new InputFilter[1];\n                    fArray[0] = new InputFilter.LengthFilter(arg0.length());\n                    et.setFilters(fArray);\n                    //prevent the edittext from accessing digits \n                    //by setting maximum length as total number of digits we typed till now.\n                }\n                count++;\n            }\n        }\n    }\n});\n</code></pre>\n<p>This solution will not allow the user to enter more than two digit after decimal point. Also you can enter any number of digits before decimal point. I hope this will help. Thank you.</p>\n"},{"tags":[],"owner":{"account_id":2166659,"reputation":12171,"user_id":1919641,"accept_rate":59,"display_name":"mihirjoshi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1369585859,"creation_date":1369585859,"answer_id":16761295,"question_id":5357455,"body_markdown":"All answers here are pretty complex I tried to make it much simpler.Look at my code and decide for yourself - \r\n\r\n    int temp  = 0;\r\n    int check = 0;\r\n\r\n\teditText.addTextChangedListener(new TextWatcher() {\r\n\r\n\t\t@Override\r\n\t\tpublic void onTextChanged(CharSequence s, int start, int before, int count) {\r\n\r\n\t\t\tif(editText.getText().toString().length()&lt;temp)\r\n\t\t\t{\r\n\t\t\t\tif(!editText.getText().toString().contains(&quot;.&quot;))\r\n\t\t\t\t\teditText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(editText.getText().toString().length()-1) });\r\n\t\t\t\telse\r\n\t\t\t\t\teditText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(editText.getText().toString().length()+1) });\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(!editText.getText().toString().contains(&quot;.&quot;))\r\n\t\t\t{\r\n\t\t\t\teditText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(editText.getText().toString().length()+1) });\r\n\t\t\t\tcheck=0;\r\n\t\t\t}\r\n\r\n\r\n\t\t\telse if(check==0)\r\n\t\t\t{\r\n\t\t\t\tcheck=1;\r\n\t\t\t\teditText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(editText.getText().toString().length()+2) });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void beforeTextChanged(CharSequence s, int start, int count,\r\n\t\t\t\tint after) {\r\n\t\t\ttemp = editText.getText().toString().length();\r\n\r\n\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void afterTextChanged(Editable s) {\r\n\t\t\t// TODO Auto-generated method stub\r\n\r\n\t\t}\r\n\t});","title":"Limit Decimal Places in Android EditText","body":"<p>All answers here are pretty complex I tried to make it much simpler.Look at my code and decide for yourself - </p>\n\n<pre><code>int temp  = 0;\nint check = 0;\n\neditText.addTextChangedListener(new TextWatcher() {\n\n    @Override\n    public void onTextChanged(CharSequence s, int start, int before, int count) {\n\n        if(editText.getText().toString().length()&lt;temp)\n        {\n            if(!editText.getText().toString().contains(\".\"))\n                editText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(editText.getText().toString().length()-1) });\n            else\n                editText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(editText.getText().toString().length()+1) });\n\n        }\n\n        if(!editText.getText().toString().contains(\".\"))\n        {\n            editText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(editText.getText().toString().length()+1) });\n            check=0;\n        }\n\n\n        else if(check==0)\n        {\n            check=1;\n            editText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(editText.getText().toString().length()+2) });\n        }\n    }\n\n    @Override\n    public void beforeTextChanged(CharSequence s, int start, int count,\n            int after) {\n        temp = editText.getText().toString().length();\n\n\n    }\n\n    @Override\n    public void afterTextChanged(Editable s) {\n        // TODO Auto-generated method stub\n\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2584705,"reputation":408,"user_id":2240673,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1377529742,"creation_date":1373534761,"answer_id":17589748,"question_id":5357455,"body_markdown":"I&#39;ve also came across this problem. I wanted to be able to reuse the code in many EditTexts. This is my solution:\r\n\r\nUsage :\r\n\r\n    CurrencyFormat watcher = new CurrencyFormat();\r\n    priceEditText.addTextChangedListener(watcher);\r\n\r\n\r\nClass:\r\n\r\n    public static class CurrencyFormat implements TextWatcher {\r\n    \r\n    \tpublic void onTextChanged(CharSequence arg0, int start, int arg2,int arg3) {}\r\n    \t\t\r\n    \tpublic void beforeTextChanged(CharSequence arg0, int start,int arg2, int arg3) {}\r\n    \r\n    \tpublic void afterTextChanged(Editable arg0) {\r\n    \t\tint length = arg0.length();\r\n    \t\tif(length&gt;0){\r\n    \t\t\tif(nrOfDecimal(arg0.toString())&gt;2)\r\n    \t\t\t\t\targ0.delete(length-1, length);\r\n    \t\t}\r\n    \t\t\t\r\n    \t}\r\n    \t\r\n\t\r\n    \tprivate int nrOfDecimal(String nr){\r\n    \t\tint len = nr.length();\r\n    \t\tint pos = len;\r\n    \t\tfor(int i=0 ; i&lt;len; i++){\r\n    \t\t\tif(nr.charAt(i)==&#39;.&#39;){\r\n    \t\t\t\tpos=i+1;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn len-pos;\r\n    \t}\r\n    }","title":"Limit Decimal Places in Android EditText","body":"<p>I've also came across this problem. I wanted to be able to reuse the code in many EditTexts. This is my solution:</p>\n\n<p>Usage :</p>\n\n<pre><code>CurrencyFormat watcher = new CurrencyFormat();\npriceEditText.addTextChangedListener(watcher);\n</code></pre>\n\n<p>Class:</p>\n\n<pre><code>public static class CurrencyFormat implements TextWatcher {\n\n    public void onTextChanged(CharSequence arg0, int start, int arg2,int arg3) {}\n\n    public void beforeTextChanged(CharSequence arg0, int start,int arg2, int arg3) {}\n\n    public void afterTextChanged(Editable arg0) {\n        int length = arg0.length();\n        if(length&gt;0){\n            if(nrOfDecimal(arg0.toString())&gt;2)\n                    arg0.delete(length-1, length);\n        }\n\n    }\n\n\n    private int nrOfDecimal(String nr){\n        int len = nr.length();\n        int pos = len;\n        for(int i=0 ; i&lt;len; i++){\n            if(nr.charAt(i)=='.'){\n                pos=i+1;\n                    break;\n            }\n        }\n        return len-pos;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3297687,"reputation":341,"user_id":2774560,"display_name":"David Murry"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1400791048,"creation_date":1400790619,"answer_id":23816494,"question_id":5357455,"body_markdown":"I really liked Pinhassi&#39;s answer, but noticed that after the user had entered the specified number digits after the decimal point you could no longer enter text to the left side of the decimal point.  The problem was that the solution only tested the previous text that had been entered, not the current text being entered.  So here is my solution that inserts the new character into the original text for validation.\r\n\r\n\r\n    package com.test.test;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    import android.text.InputFilter;\r\n    import android.text.Spanned;\r\n    import android.util.Log;\r\n    \r\n    public class InputFilterCurrency implements InputFilter {\r\n    \tPattern moPattern;\r\n    \t\r\n    \tpublic InputFilterCurrency(int aiMinorUnits) {\r\n    \t\t// http://www.regexplanet.com/advanced/java/index.html\r\n    \t    moPattern=Pattern.compile(&quot;[0-9]*+((\\\\.[0-9]{0,&quot;+ aiMinorUnits + &quot;})?)||(\\\\.)?&quot;);\r\n    \r\n    \t} // InputFilterCurrency\r\n    \r\n    \t@Override\r\n    \tpublic CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n    \t\tString lsStart  = &quot;&quot;;\r\n    \t\tString lsInsert = &quot;&quot;;\r\n    \t\tString lsEnd    = &quot;&quot;;\r\n    \t\tString lsText   = &quot;&quot;;\r\n    \r\n    \t\tLog.d(&quot;debug&quot;, moPattern.toString());\r\n    \t\tLog.d(&quot;debug&quot;, &quot;source: &quot; + source + &quot;, start: &quot; + start + &quot;, end:&quot; + end + &quot;, dest: &quot; + dest + &quot;, dstart: &quot; + dstart + &quot;, dend: &quot; + dend );\r\n    \r\n    \t\tlsText = dest.toString();\r\n    \t\t\r\n    \t\t// If the length is greater then 0, then insert the new character\r\n    \t\t// into the original text for validation\r\n    \t\tif (lsText.length() &gt; 0) {\r\n    \t\t\t\r\n    \t\t\tlsStart = lsText.substring(0, dstart);\r\n    \t\t\tLog.d(&quot;debug&quot;, &quot;lsStart : &quot; + lsStart);\r\n    \t\t\t// Check to see if they have deleted a character\r\n    \t\t\tif (source != &quot;&quot;) {\r\n    \t\t\t\tlsInsert = source.toString();\r\n    \t\t\t\tLog.d(&quot;debug&quot;, &quot;lsInsert: &quot; + lsInsert);\r\n    \t\t\t} // if\r\n    \t\t\tlsEnd = lsText.substring(dend);\r\n    \t\t\tLog.d(&quot;debug&quot;, &quot;lsEnd   : &quot; + lsEnd);\r\n    \t\t\tlsText = lsStart + lsInsert + lsEnd;\r\n    \t\t\tLog.d(&quot;debug&quot;, &quot;lsText  : &quot; + lsText);\r\n    \t\t\t\r\n    \t\t} // if\r\n    \r\n            Matcher loMatcher = moPattern.matcher(lsText);\r\n            Log.d(&quot;debug&quot;, &quot;loMatcher.matches(): &quot; + loMatcher.matches() + &quot;, lsText: &quot; + lsText);\r\n            if(!loMatcher.matches()) {\r\n                return &quot;&quot;;\r\n            }\r\n            return null;\r\n            \r\n        } // CharSequence\r\n    \r\n    } // InputFilterCurrency\r\n\r\nAnd the call to set the editText filter\r\n\r\n    editText.setFilters(new InputFilter[] {new InputFilterCurrency(2)});\r\n\r\n    Ouput with two decimal places\r\n    05-22 15:25:33.434: D/debug(30524): [0-9]*+((\\.[0-9]{0,2})?)||(\\.)?\r\n    05-22 15:25:33.434: D/debug(30524): source: 5, start: 0, end:1, dest: 123.4, dstart: 5, dend: 5\r\n    05-22 15:25:33.434: D/debug(30524): lsStart : 123.4\r\n    05-22 15:25:33.434: D/debug(30524): lsInsert: 5\r\n    05-22 15:25:33.434: D/debug(30524): lsEnd   : \r\n    05-22 15:25:33.434: D/debug(30524): lsText  : 123.45\r\n    05-22 15:25:33.434: D/debug(30524): loMatcher.matches(): true, lsText: 123.45\r\n    \r\n    Ouput inserting a 5 in the middle\r\n    05-22 15:26:17.624: D/debug(30524): [0-9]*+((\\.[0-9]{0,2})?)||(\\.)?\r\n    05-22 15:26:17.624: D/debug(30524): source: 5, start: 0, end:1, dest: 123.45, dstart: 2, dend: 2\r\n    05-22 15:26:17.624: D/debug(30524): lsStart : 12\r\n    05-22 15:26:17.624: D/debug(30524): lsInsert: 5\r\n    05-22 15:26:17.624: D/debug(30524): lsEnd   : 3.45\r\n    05-22 15:26:17.624: D/debug(30524): lsText  : 1253.45\r\n    05-22 15:26:17.624: D/debug(30524): loMatcher.matches(): true, lsText: 1253.45\r\n\r\n\r\n\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>I really liked Pinhassi's answer, but noticed that after the user had entered the specified number digits after the decimal point you could no longer enter text to the left side of the decimal point.  The problem was that the solution only tested the previous text that had been entered, not the current text being entered.  So here is my solution that inserts the new character into the original text for validation.</p>\n\n<pre><code>package com.test.test;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport android.text.InputFilter;\nimport android.text.Spanned;\nimport android.util.Log;\n\npublic class InputFilterCurrency implements InputFilter {\n    Pattern moPattern;\n\n    public InputFilterCurrency(int aiMinorUnits) {\n        // http://www.regexplanet.com/advanced/java/index.html\n        moPattern=Pattern.compile(\"[0-9]*+((\\\\.[0-9]{0,\"+ aiMinorUnits + \"})?)||(\\\\.)?\");\n\n    } // InputFilterCurrency\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n        String lsStart  = \"\";\n        String lsInsert = \"\";\n        String lsEnd    = \"\";\n        String lsText   = \"\";\n\n        Log.d(\"debug\", moPattern.toString());\n        Log.d(\"debug\", \"source: \" + source + \", start: \" + start + \", end:\" + end + \", dest: \" + dest + \", dstart: \" + dstart + \", dend: \" + dend );\n\n        lsText = dest.toString();\n\n        // If the length is greater then 0, then insert the new character\n        // into the original text for validation\n        if (lsText.length() &gt; 0) {\n\n            lsStart = lsText.substring(0, dstart);\n            Log.d(\"debug\", \"lsStart : \" + lsStart);\n            // Check to see if they have deleted a character\n            if (source != \"\") {\n                lsInsert = source.toString();\n                Log.d(\"debug\", \"lsInsert: \" + lsInsert);\n            } // if\n            lsEnd = lsText.substring(dend);\n            Log.d(\"debug\", \"lsEnd   : \" + lsEnd);\n            lsText = lsStart + lsInsert + lsEnd;\n            Log.d(\"debug\", \"lsText  : \" + lsText);\n\n        } // if\n\n        Matcher loMatcher = moPattern.matcher(lsText);\n        Log.d(\"debug\", \"loMatcher.matches(): \" + loMatcher.matches() + \", lsText: \" + lsText);\n        if(!loMatcher.matches()) {\n            return \"\";\n        }\n        return null;\n\n    } // CharSequence\n\n} // InputFilterCurrency\n</code></pre>\n\n<p>And the call to set the editText filter</p>\n\n<pre><code>editText.setFilters(new InputFilter[] {new InputFilterCurrency(2)});\n\nOuput with two decimal places\n05-22 15:25:33.434: D/debug(30524): [0-9]*+((\\.[0-9]{0,2})?)||(\\.)?\n05-22 15:25:33.434: D/debug(30524): source: 5, start: 0, end:1, dest: 123.4, dstart: 5, dend: 5\n05-22 15:25:33.434: D/debug(30524): lsStart : 123.4\n05-22 15:25:33.434: D/debug(30524): lsInsert: 5\n05-22 15:25:33.434: D/debug(30524): lsEnd   : \n05-22 15:25:33.434: D/debug(30524): lsText  : 123.45\n05-22 15:25:33.434: D/debug(30524): loMatcher.matches(): true, lsText: 123.45\n\nOuput inserting a 5 in the middle\n05-22 15:26:17.624: D/debug(30524): [0-9]*+((\\.[0-9]{0,2})?)||(\\.)?\n05-22 15:26:17.624: D/debug(30524): source: 5, start: 0, end:1, dest: 123.45, dstart: 2, dend: 2\n05-22 15:26:17.624: D/debug(30524): lsStart : 12\n05-22 15:26:17.624: D/debug(30524): lsInsert: 5\n05-22 15:26:17.624: D/debug(30524): lsEnd   : 3.45\n05-22 15:26:17.624: D/debug(30524): lsText  : 1253.45\n05-22 15:26:17.624: D/debug(30524): loMatcher.matches(): true, lsText: 1253.45\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1801211,"reputation":1499,"user_id":1639523,"accept_rate":100,"display_name":"Dominik Suszczewicz"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1414596333,"creation_date":1401794903,"answer_id":24014006,"question_id":5357455,"body_markdown":"My solution is simple and works perfect!\r\n\r\n    public class DecimalInputTextWatcher implements TextWatcher {\r\n\r\n    private String mPreviousValue;\r\n    private int mCursorPosition;\r\n    private boolean mRestoringPreviousValueFlag;\r\n    private int mDigitsAfterZero;\r\n    private EditText mEditText;\r\n\r\n    public DecimalInputTextWatcher(EditText editText, int digitsAfterZero) {\r\n        mDigitsAfterZero = digitsAfterZero;\r\n        mEditText = editText;\r\n        mPreviousValue = &quot;&quot;;\r\n        mRestoringPreviousValueFlag = false;\r\n    }\r\n\r\n    @Override\r\n    public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n        if (!mRestoringPreviousValueFlag) {\r\n            mPreviousValue = s.toString();\r\n            mCursorPosition = mEditText.getSelectionStart();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n    }\r\n\r\n    @Override\r\n    public void afterTextChanged(Editable s) {\r\n        if (!mRestoringPreviousValueFlag) {\r\n\r\n            if (!isValid(s.toString())) {\r\n                mRestoringPreviousValueFlag = true;\r\n                restorePreviousValue();\r\n            }\r\n\r\n        } else {\r\n            mRestoringPreviousValueFlag = false;\r\n        }\r\n    }\r\n\r\n    private void restorePreviousValue() {\r\n        mEditText.setText(mPreviousValue);\r\n        mEditText.setSelection(mCursorPosition);\r\n    }\r\n\r\n    private boolean isValid(String s) {\r\n        Pattern patternWithDot = Pattern.compile(&quot;[0-9]*((\\\\.[0-9]{0,&quot; + mDigitsAfterZero + &quot;})?)||(\\\\.)?&quot;);\r\n        Pattern patternWithComma = Pattern.compile(&quot;[0-9]*((,[0-9]{0,&quot; + mDigitsAfterZero + &quot;})?)||(,)?&quot;);\r\n\r\n        Matcher matcherDot = patternWithDot.matcher(s);\r\n        Matcher matcherComa = patternWithComma.matcher(s);\r\n\r\n        return matcherDot.matches() || matcherComa.matches();\r\n    }\r\n    }\r\n\r\nUsage:\r\n\r\n    myTextEdit.addTextChangedListener(new DecimalInputTextWatcher(myTextEdit, 2));","title":"Limit Decimal Places in Android EditText","body":"<p>My solution is simple and works perfect!</p>\n\n<pre><code>public class DecimalInputTextWatcher implements TextWatcher {\n\nprivate String mPreviousValue;\nprivate int mCursorPosition;\nprivate boolean mRestoringPreviousValueFlag;\nprivate int mDigitsAfterZero;\nprivate EditText mEditText;\n\npublic DecimalInputTextWatcher(EditText editText, int digitsAfterZero) {\n    mDigitsAfterZero = digitsAfterZero;\n    mEditText = editText;\n    mPreviousValue = \"\";\n    mRestoringPreviousValueFlag = false;\n}\n\n@Override\npublic void beforeTextChanged(CharSequence s, int start, int count, int after) {\n    if (!mRestoringPreviousValueFlag) {\n        mPreviousValue = s.toString();\n        mCursorPosition = mEditText.getSelectionStart();\n    }\n}\n\n@Override\npublic void onTextChanged(CharSequence s, int start, int before, int count) {\n}\n\n@Override\npublic void afterTextChanged(Editable s) {\n    if (!mRestoringPreviousValueFlag) {\n\n        if (!isValid(s.toString())) {\n            mRestoringPreviousValueFlag = true;\n            restorePreviousValue();\n        }\n\n    } else {\n        mRestoringPreviousValueFlag = false;\n    }\n}\n\nprivate void restorePreviousValue() {\n    mEditText.setText(mPreviousValue);\n    mEditText.setSelection(mCursorPosition);\n}\n\nprivate boolean isValid(String s) {\n    Pattern patternWithDot = Pattern.compile(\"[0-9]*((\\\\.[0-9]{0,\" + mDigitsAfterZero + \"})?)||(\\\\.)?\");\n    Pattern patternWithComma = Pattern.compile(\"[0-9]*((,[0-9]{0,\" + mDigitsAfterZero + \"})?)||(,)?\");\n\n    Matcher matcherDot = patternWithDot.matcher(s);\n    Matcher matcherComa = patternWithComma.matcher(s);\n\n    return matcherDot.matches() || matcherComa.matches();\n}\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>myTextEdit.addTextChangedListener(new DecimalInputTextWatcher(myTextEdit, 2));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2474598,"reputation":2115,"user_id":2155494,"accept_rate":60,"display_name":"Apoleo"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1603803243,"creation_date":1403651490,"answer_id":24397810,"question_id":5357455,"body_markdown":"I don&#39;t like the other solution and I created my own.\r\nWith this solution you can&#39;t enter more than MAX_BEFORE_POINT digit before the point and the decimals can&#39;t be more than MAX_DECIMAL.\r\n\r\nYou just can&#39;t type the digit in excess, no other effects!\r\nIn additional if you write &quot;.&quot; it types &quot;0.&quot;\r\n\r\n 1. Set the EditText in the layout to:\r\n\r\n    android:inputType=&quot;numberDecimal&quot;\r\n\r\n 2. Add the Listener in your onCreate. If you want modify the number of digits before and after the point edit the call to PerfectDecimal(str, NUMBER_BEFORE_POINT, NUMBER_DECIMALS), here is set to 3 and 2 \r\n\r\n        \r\n        EditText targetEditText = (EditText)findViewById(R.id.targetEditTextLayoutId);\r\n\r\n        targetEditText.addTextChangedListener(new TextWatcher() {\r\n          public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}\r\n\r\n          public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}\r\n\r\n          public void afterTextChanged(Editable arg0) {\r\n            String str = targetEditText.getText().toString();\r\n            if (str.isEmpty()) return;\r\n            String str2 = PerfectDecimal(str, 3, 2);\r\n\r\n            if (!str2.equals(str)) {\r\n                targetEditText.setText(str2);\r\n                targetEditText.setSelection(str2.length());\r\n            }\r\n          }\r\n        });\r\n\r\n 1. Include this Funcion: \r\n\r\n    \r\n        public String PerfectDecimal(String str, int MAX_BEFORE_POINT, int MAX_DECIMAL){\r\n          if(str.charAt(0) == &#39;.&#39;) str = &quot;0&quot;+str;\r\n          int max = str.length();\r\n\r\n          String rFinal = &quot;&quot;;\r\n          boolean after = false;\r\n          int i = 0, up = 0, decimal = 0; char t;\r\n          while(i &lt; max){\r\n            t = str.charAt(i);\r\n            if(t != &#39;.&#39; &amp;&amp; after == false){\r\n                up++;\r\n                if(up &gt; MAX_BEFORE_POINT) return rFinal;\r\n            }else if(t == &#39;.&#39;){\r\n                after = true;\r\n            }else{\r\n                decimal++;\r\n                if(decimal &gt; MAX_DECIMAL)\r\n                    return rFinal;\r\n            }\r\n            rFinal = rFinal + t;\r\n            i++;\r\n          }return rFinal;\r\n        }\r\n\r\nAnd it&#39;s done!","title":"Limit Decimal Places in Android EditText","body":"<p>I don't like the other solution and I created my own.\nWith this solution you can't enter more than MAX_BEFORE_POINT digit before the point and the decimals can't be more than MAX_DECIMAL.</p>\n<p>You just can't type the digit in excess, no other effects!\nIn additional if you write &quot;.&quot; it types &quot;0.&quot;</p>\n<ol>\n<li><p>Set the EditText in the layout to:</p>\n<p>android:inputType=&quot;numberDecimal&quot;</p>\n</li>\n<li><p>Add the Listener in your onCreate. If you want modify the number of digits before and after the point edit the call to PerfectDecimal(str, NUMBER_BEFORE_POINT, NUMBER_DECIMALS), here is set to 3 and 2</p>\n<pre><code>EditText targetEditText = (EditText)findViewById(R.id.targetEditTextLayoutId);\n\ntargetEditText.addTextChangedListener(new TextWatcher() {\n  public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}\n\n  public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}\n\n  public void afterTextChanged(Editable arg0) {\n    String str = targetEditText.getText().toString();\n    if (str.isEmpty()) return;\n    String str2 = PerfectDecimal(str, 3, 2);\n\n    if (!str2.equals(str)) {\n        targetEditText.setText(str2);\n        targetEditText.setSelection(str2.length());\n    }\n  }\n});\n</code></pre>\n</li>\n<li><p>Include this Funcion:</p>\n<pre><code>public String PerfectDecimal(String str, int MAX_BEFORE_POINT, int MAX_DECIMAL){\n  if(str.charAt(0) == '.') str = &quot;0&quot;+str;\n  int max = str.length();\n\n  String rFinal = &quot;&quot;;\n  boolean after = false;\n  int i = 0, up = 0, decimal = 0; char t;\n  while(i &lt; max){\n    t = str.charAt(i);\n    if(t != '.' &amp;&amp; after == false){\n        up++;\n        if(up &gt; MAX_BEFORE_POINT) return rFinal;\n    }else if(t == '.'){\n        after = true;\n    }else{\n        decimal++;\n        if(decimal &gt; MAX_DECIMAL)\n            return rFinal;\n    }\n    rFinal = rFinal + t;\n    i++;\n  }return rFinal;\n}\n</code></pre>\n</li>\n</ol>\n<p>And it's done!</p>\n"},{"tags":[],"owner":{"account_id":1796123,"reputation":3966,"user_id":1635488,"accept_rate":40,"display_name":"android_dev"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1404823845,"creation_date":1404823845,"answer_id":24632346,"question_id":5357455,"body_markdown":"I made some fixes for @Pinhassi solution. It handles some cases:\r\n\r\n1.you can move cursor anywhere\r\n\r\n2.minus sign handling\r\n\r\n3.digitsbefore = 2  and digitsafter = 4 and you enter 12.4545. Then if you want to remove &quot;.&quot;, it will not allow.\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n        private int mDigitsBeforeZero;\r\n        private int mDigitsAfterZero;\r\n        private Pattern mPattern;\r\n    \r\n        private static final int DIGITS_BEFORE_ZERO_DEFAULT = 100;\r\n        private static final int DIGITS_AFTER_ZERO_DEFAULT = 100;\r\n    \r\n        public DecimalDigitsInputFilter(Integer digitsBeforeZero, Integer digitsAfterZero) {\r\n    \tthis.mDigitsBeforeZero = (digitsBeforeZero != null ? digitsBeforeZero : DIGITS_BEFORE_ZERO_DEFAULT);\r\n    \tthis.mDigitsAfterZero = (digitsAfterZero != null ? digitsAfterZero : DIGITS_AFTER_ZERO_DEFAULT);\r\n    \tmPattern = Pattern.compile(&quot;-?[0-9]{0,&quot; + (mDigitsBeforeZero) + &quot;}+((\\\\.[0-9]{0,&quot; + (mDigitsAfterZero)\r\n    \t\t+ &quot;})?)||(\\\\.)?&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n    \tString replacement = source.subSequence(start, end).toString();\r\n    \tString newVal = dest.subSequence(0, dstart).toString() + replacement\r\n    \t\t+ dest.subSequence(dend, dest.length()).toString();\r\n    \tMatcher matcher = mPattern.matcher(newVal);\r\n    \tif (matcher.matches())\r\n    \t    return null;\r\n    \r\n    \tif (TextUtils.isEmpty(source))\r\n    \t    return dest.subSequence(dstart, dend);\r\n    \telse\r\n    \t    return &quot;&quot;;\r\n        }\r\n    }","title":"Limit Decimal Places in Android EditText","body":"<p>I made some fixes for @Pinhassi solution. It handles some cases:</p>\n\n<p>1.you can move cursor anywhere</p>\n\n<p>2.minus sign handling</p>\n\n<p>3.digitsbefore = 2  and digitsafter = 4 and you enter 12.4545. Then if you want to remove \".\", it will not allow.</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n    private int mDigitsBeforeZero;\n    private int mDigitsAfterZero;\n    private Pattern mPattern;\n\n    private static final int DIGITS_BEFORE_ZERO_DEFAULT = 100;\n    private static final int DIGITS_AFTER_ZERO_DEFAULT = 100;\n\n    public DecimalDigitsInputFilter(Integer digitsBeforeZero, Integer digitsAfterZero) {\n    this.mDigitsBeforeZero = (digitsBeforeZero != null ? digitsBeforeZero : DIGITS_BEFORE_ZERO_DEFAULT);\n    this.mDigitsAfterZero = (digitsAfterZero != null ? digitsAfterZero : DIGITS_AFTER_ZERO_DEFAULT);\n    mPattern = Pattern.compile(\"-?[0-9]{0,\" + (mDigitsBeforeZero) + \"}+((\\\\.[0-9]{0,\" + (mDigitsAfterZero)\n        + \"})?)||(\\\\.)?\");\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n    String replacement = source.subSequence(start, end).toString();\n    String newVal = dest.subSequence(0, dstart).toString() + replacement\n        + dest.subSequence(dend, dest.length()).toString();\n    Matcher matcher = mPattern.matcher(newVal);\n    if (matcher.matches())\n        return null;\n\n    if (TextUtils.isEmpty(source))\n        return dest.subSequence(dstart, dend);\n    else\n        return \"\";\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3124546,"reputation":104,"user_id":2643666,"display_name":"reisub"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1406637333,"creation_date":1406637333,"answer_id":25015474,"question_id":5357455,"body_markdown":"I improved on the solution that uses a regex by Pinhassi so it also handles the edge cases correctly. Before checking if the input is correct, first the final string is constructed as described by the android docs.\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n    \r\n        private Pattern mPattern;\r\n    \r\n        private static final Pattern mFormatPattern = Pattern.compile(&quot;\\\\d+\\\\.\\\\d+&quot;);\r\n    \r\n        public DecimalDigitsInputFilter(int digitsBeforeDecimal, int digitsAfterDecimal) {\r\n            mPattern = Pattern.compile(\r\n                &quot;^\\\\d{0,&quot; + digitsBeforeDecimal + &quot;}([\\\\.,](\\\\d{0,&quot; + digitsAfterDecimal +\r\n                    &quot;})?)?$&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, \r\n                                   int dstart, int dend) {\r\n    \r\n            String newString =\r\n                dest.toString().substring(0, dstart) + source.toString().substring(start, end) \r\n                + dest.toString().substring(dend, dest.toString().length());\r\n    \r\n            Matcher matcher = mPattern.matcher(newString);\r\n            if (!matcher.matches()) {\r\n                return &quot;&quot;;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\nUsage:\r\n\r\n    editText.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)});","title":"Limit Decimal Places in Android EditText","body":"<p>I improved on the solution that uses a regex by Pinhassi so it also handles the edge cases correctly. Before checking if the input is correct, first the final string is constructed as described by the android docs.</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n\n    private Pattern mPattern;\n\n    private static final Pattern mFormatPattern = Pattern.compile(\"\\\\d+\\\\.\\\\d+\");\n\n    public DecimalDigitsInputFilter(int digitsBeforeDecimal, int digitsAfterDecimal) {\n        mPattern = Pattern.compile(\n            \"^\\\\d{0,\" + digitsBeforeDecimal + \"}([\\\\.,](\\\\d{0,\" + digitsAfterDecimal +\n                \"})?)?$\");\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, \n                               int dstart, int dend) {\n\n        String newString =\n            dest.toString().substring(0, dstart) + source.toString().substring(start, end) \n            + dest.toString().substring(dend, dest.toString().length());\n\n        Matcher matcher = mPattern.matcher(newString);\n        if (!matcher.matches()) {\n            return \"\";\n        }\n        return null;\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>editText.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3163687,"reputation":2024,"user_id":2674149,"accept_rate":62,"display_name":"RaRa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1416473852,"creation_date":1416473852,"answer_id":27035402,"question_id":5357455,"body_markdown":"@Meh for u..\r\n\r\n    txtlist.setFilters(new InputFilter[] { new DigitsKeyListener( Boolean.FALSE,Boolean.TRUE) {\r\n               \r\n            int beforeDecimal = 7;\r\n            int afterDecimal = 2;\r\n\r\n            @Override\r\n            public CharSequence filter(CharSequence source, int start, int end,Spanned dest, int dstart, int dend) {\r\n                    \r\n                String etText = txtlist.getText().toString();\r\n                String temp = txtlist.getText() + source.toString();\r\n                if (temp.equals(&quot;.&quot;)) {\r\n                    return &quot;0.&quot;;\r\n                } else if (temp.toString().indexOf(&quot;.&quot;) == -1) {\r\n                    // no decimal point placed yet\r\n                     if (temp.length() &gt; beforeDecimal) {\r\n                        return &quot;&quot;;\r\n                    }\r\n                } else {\r\n                    int dotPosition ;\r\n                    int cursorPositon = txtlistprice.getSelectionStart();\r\n                    if (etText.indexOf(&quot;.&quot;) == -1) {\r\n                        dotPosition = temp.indexOf(&quot;.&quot;);\r\n                    }else{\r\n                        dotPosition = etText.indexOf(&quot;.&quot;);\r\n                    }\r\n                    if(cursorPositon &lt;= dotPosition){\r\n                        String beforeDot = etText.substring(0, dotPosition);\r\n                        if(beforeDot.length()&lt;beforeDecimal){\r\n                            return source;\r\n                        }else{\r\n                            if(source.toString().equalsIgnoreCase(&quot;.&quot;)){\r\n                                return source;\r\n                            }else{\r\n                                return &quot;&quot;;\r\n                            }\r\n                        }\r\n                    }else{\r\n                        temp = temp.substring(temp.indexOf(&quot;.&quot;) + 1);\r\n                        if (temp.length() &gt; afterDecimal) {\r\n                            return &quot;&quot;;\r\n                        }\r\n                    }\r\n                }\r\n                return super.filter(source, start, end, dest, dstart, dend);\r\n            }\r\n        } });","title":"Limit Decimal Places in Android EditText","body":"<p>@Meh for u..</p>\n\n<pre><code>txtlist.setFilters(new InputFilter[] { new DigitsKeyListener( Boolean.FALSE,Boolean.TRUE) {\n\n        int beforeDecimal = 7;\n        int afterDecimal = 2;\n\n        @Override\n        public CharSequence filter(CharSequence source, int start, int end,Spanned dest, int dstart, int dend) {\n\n            String etText = txtlist.getText().toString();\n            String temp = txtlist.getText() + source.toString();\n            if (temp.equals(\".\")) {\n                return \"0.\";\n            } else if (temp.toString().indexOf(\".\") == -1) {\n                // no decimal point placed yet\n                 if (temp.length() &gt; beforeDecimal) {\n                    return \"\";\n                }\n            } else {\n                int dotPosition ;\n                int cursorPositon = txtlistprice.getSelectionStart();\n                if (etText.indexOf(\".\") == -1) {\n                    dotPosition = temp.indexOf(\".\");\n                }else{\n                    dotPosition = etText.indexOf(\".\");\n                }\n                if(cursorPositon &lt;= dotPosition){\n                    String beforeDot = etText.substring(0, dotPosition);\n                    if(beforeDot.length()&lt;beforeDecimal){\n                        return source;\n                    }else{\n                        if(source.toString().equalsIgnoreCase(\".\")){\n                            return source;\n                        }else{\n                            return \"\";\n                        }\n                    }\n                }else{\n                    temp = temp.substring(temp.indexOf(\".\") + 1);\n                    if (temp.length() &gt; afterDecimal) {\n                        return \"\";\n                    }\n                }\n            }\n            return super.filter(source, start, end, dest, dstart, dend);\n        }\n    } });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":986177,"reputation":2991,"user_id":1004605,"display_name":"Favas Kv"},"down_vote_count":1,"up_vote_count":37,"is_accepted":false,"score":36,"last_activity_date":1419857409,"creation_date":1419857409,"answer_id":27689253,"question_id":5357455,"body_markdown":"Here is a sample **InputFilter** which only allows max 4 digits before the decimal point and max 1 digit after that.\r\n\r\nValues that edittext allows: **555.2**, **555**, **.2**\r\n   \r\nValues that edittext blocks: **55555.2**, **055.2**, **555.42**\r\n\r\n\r\n\r\n    \t\tInputFilter filter = new InputFilter() {\r\n\t\t\tfinal int maxDigitsBeforeDecimalPoint=4;\r\n\t\t\tfinal int maxDigitsAfterDecimalPoint=1;\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic CharSequence filter(CharSequence source, int start, int end,\r\n\t\t\t\t\tSpanned dest, int dstart, int dend) {\r\n\t\t\t\t\tStringBuilder builder = new StringBuilder(dest);\r\n\t\t\t\t\tbuilder.replace(dstart, dend, source\r\n\t\t\t\t\t\t\t.subSequence(start, end).toString());\r\n\t\t\t\t\tif (!builder.toString().matches(\r\n\t\t\t\t\t\t\t&quot;(([1-9]{1})([0-9]{0,&quot;+(maxDigitsBeforeDecimalPoint-1)+&quot;})?)?(\\\\.[0-9]{0,&quot;+maxDigitsAfterDecimalPoint+&quot;})?&quot;\r\n\r\n\t\t\t\t\t\t\t)) {\r\n\t\t\t\t\t\tif(source.length()==0)\r\n\t\t\t\t\t\t\treturn dest.subSequence(dstart, dend);\r\n\t\t\t\t\t\treturn &quot;&quot;;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tmEdittext.setFilters(new InputFilter[] { filter });","title":"Limit Decimal Places in Android EditText","body":"<p>Here is a sample <strong>InputFilter</strong> which only allows max 4 digits before the decimal point and max 1 digit after that.</p>\n\n<p>Values that edittext allows: <strong>555.2</strong>, <strong>555</strong>, <strong>.2</strong></p>\n\n<p>Values that edittext blocks: <strong>55555.2</strong>, <strong>055.2</strong>, <strong>555.42</strong></p>\n\n<pre><code>        InputFilter filter = new InputFilter() {\n        final int maxDigitsBeforeDecimalPoint=4;\n        final int maxDigitsAfterDecimalPoint=1;\n\n        @Override\n        public CharSequence filter(CharSequence source, int start, int end,\n                Spanned dest, int dstart, int dend) {\n                StringBuilder builder = new StringBuilder(dest);\n                builder.replace(dstart, dend, source\n                        .subSequence(start, end).toString());\n                if (!builder.toString().matches(\n                        \"(([1-9]{1})([0-9]{0,\"+(maxDigitsBeforeDecimalPoint-1)+\"})?)?(\\\\.[0-9]{0,\"+maxDigitsAfterDecimalPoint+\"})?\"\n\n                        )) {\n                    if(source.length()==0)\n                        return dest.subSequence(dstart, dend);\n                    return \"\";\n                }\n\n            return null;\n\n        }\n    };\n\n    mEdittext.setFilters(new InputFilter[] { filter });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5604133,"reputation":1,"user_id":4439330,"display_name":"Shukana789"},"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1502612042,"creation_date":1422172653,"answer_id":28134393,"question_id":5357455,"body_markdown":"This is the simplest solution to limit the number of digits after decimal point to two:\r\n\r\n    myeditText2 = (EditText) findViewById(R.id.editText2);  \r\n\tmyeditText2.setInputType(3);","title":"Limit Decimal Places in Android EditText","body":"<p>This is the simplest solution to limit the number of digits after decimal point to two:</p>\n\n<pre><code>myeditText2 = (EditText) findViewById(R.id.editText2);  \nmyeditText2.setInputType(3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3391999,"reputation":41,"user_id":2846636,"display_name":"Pawan Shukla"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1502611977,"creation_date":1426068177,"answer_id":28983534,"question_id":5357455,"body_markdown":"    et = (EditText) vw.findViewById(R.id.tx_edittext);\r\n \r\n    et.setFilters(new InputFilter[] {\r\n            new DigitsKeyListener(Boolean.FALSE, Boolean.TRUE) {\r\n                int beforeDecimal = 5, afterDecimal = 2;\r\n \r\n                @Override\r\n                public CharSequence filter(CharSequence source, int start, int end,\r\n                        Spanned dest, int dstart, int dend) {\r\n                    String temp = et.getText() + source.toString();\r\n \r\n                    if (temp.equals(&quot;.&quot;)) {\r\n                        return &quot;0.&quot;;\r\n                    }\r\n                    else if (temp.toString().indexOf(&quot;.&quot;) == -1) {\r\n                        // no decimal point placed yet\r\n                        if (temp.length() &gt; beforeDecimal) {\r\n                            return &quot;&quot;;\r\n                        }\r\n                    } else {\r\n                        temp = temp.substring(temp.indexOf(&quot;.&quot;) + 1);\r\n                        if (temp.length() &gt; afterDecimal) {\r\n                            return &quot;&quot;;\r\n                        }\r\n                    }\r\n \r\n                    return super.filter(source, start, end, dest, dstart, dend);\r\n                }\r\n            }\r\n    });","title":"Limit Decimal Places in Android EditText","body":"<pre><code>et = (EditText) vw.findViewById(R.id.tx_edittext);\n\net.setFilters(new InputFilter[] {\n        new DigitsKeyListener(Boolean.FALSE, Boolean.TRUE) {\n            int beforeDecimal = 5, afterDecimal = 2;\n\n            @Override\n            public CharSequence filter(CharSequence source, int start, int end,\n                    Spanned dest, int dstart, int dend) {\n                String temp = et.getText() + source.toString();\n\n                if (temp.equals(\".\")) {\n                    return \"0.\";\n                }\n                else if (temp.toString().indexOf(\".\") == -1) {\n                    // no decimal point placed yet\n                    if (temp.length() &gt; beforeDecimal) {\n                        return \"\";\n                    }\n                } else {\n                    temp = temp.substring(temp.indexOf(\".\") + 1);\n                    if (temp.length() &gt; afterDecimal) {\n                        return \"\";\n                    }\n                }\n\n                return super.filter(source, start, end, dest, dstart, dend);\n            }\n        }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5966461,"reputation":21,"user_id":4690138,"display_name":"Karthi Keyan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1431154503,"creation_date":1428730140,"answer_id":29574460,"question_id":5357455,"body_markdown":"This works fine for me. It allows value to be entered even after focus changed and retrieved back. For example: `123.00`,  `12.12`, `0.01`, etc..\r\n\r\n1.`Integer.parseInt(getString(R.string.valuelength))`\r\nSpecifies the length of the input `digits.Values` accessed from `string.xml` file.It is quiet easy to change values.\r\n2.`Integer.parseInt(getString(R.string.valuedecimal))`, this is for decimal places max limit.\r\n\r\n    private InputFilter[] valDecimalPlaces;\r\n    private ArrayList&lt;EditText&gt; edittextArray;\r\n    \r\n    valDecimalPlaces = new InputFilter[] { new DecimalDigitsInputFilterNew(\r\n    \tInteger.parseInt(getString(R.string.valuelength)),\r\n    \tInteger.parseInt(getString(R.string.valuedecimal))) \r\n    };\r\n\r\nArray of `EditText` values that allows to perform action.\r\n\r\n    for (EditText etDecimalPlace : edittextArray) {\r\n\t\t\t\tetDecimalPlace.setFilters(valDecimalPlaces);\r\nI just used array of values that contain multiple edittext\r\nNext `DecimalDigitsInputFilterNew.class` file.\r\n\r\n    import android.text.InputFilter;\r\n    import android.text.Spanned;\r\n    \r\n    public class DecimalDigitsInputFilterNew implements InputFilter {\r\n    \r\n        private final int decimalDigits;\r\n        private final int before;\r\n    \r\n        public DecimalDigitsInputFilterNew(int before ,int decimalDigits) {\r\n            this.decimalDigits = decimalDigits;\r\n            this.before = before;\r\n        }\r\n    \r\n        @Override\r\n        public CharSequence filter(CharSequence source, int start, int end,\r\n            Spanned dest, int dstart, int dend) {\r\n            StringBuilder builder = new StringBuilder(dest);\r\n            builder.replace(dstart, dend, source\r\n                  .subSequence(start, end).toString());\r\n            if (!builder.toString().matches(&quot;(([0-9]{1})([0-9]{0,&quot;+(before-1)+&quot;})?)?(\\\\.[0-9]{0,&quot;+decimalDigits+&quot;})?&quot;)) {\r\n                 if(source.length()==0)\r\n                      return dest.subSequence(dstart, dend);\r\n                 return &quot;&quot;;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>This works fine for me. It allows value to be entered even after focus changed and retrieved back. For example: <code>123.00</code>,  <code>12.12</code>, <code>0.01</code>, etc..</p>\n\n<p>1.<code>Integer.parseInt(getString(R.string.valuelength))</code>\nSpecifies the length of the input <code>digits.Values</code> accessed from <code>string.xml</code> file.It is quiet easy to change values.\n2.<code>Integer.parseInt(getString(R.string.valuedecimal))</code>, this is for decimal places max limit.</p>\n\n<pre><code>private InputFilter[] valDecimalPlaces;\nprivate ArrayList&lt;EditText&gt; edittextArray;\n\nvalDecimalPlaces = new InputFilter[] { new DecimalDigitsInputFilterNew(\n    Integer.parseInt(getString(R.string.valuelength)),\n    Integer.parseInt(getString(R.string.valuedecimal))) \n};\n</code></pre>\n\n<p>Array of <code>EditText</code> values that allows to perform action.</p>\n\n<pre><code>for (EditText etDecimalPlace : edittextArray) {\n            etDecimalPlace.setFilters(valDecimalPlaces);\n</code></pre>\n\n<p>I just used array of values that contain multiple edittext\nNext <code>DecimalDigitsInputFilterNew.class</code> file.</p>\n\n<pre><code>import android.text.InputFilter;\nimport android.text.Spanned;\n\npublic class DecimalDigitsInputFilterNew implements InputFilter {\n\n    private final int decimalDigits;\n    private final int before;\n\n    public DecimalDigitsInputFilterNew(int before ,int decimalDigits) {\n        this.decimalDigits = decimalDigits;\n        this.before = before;\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end,\n        Spanned dest, int dstart, int dend) {\n        StringBuilder builder = new StringBuilder(dest);\n        builder.replace(dstart, dend, source\n              .subSequence(start, end).toString());\n        if (!builder.toString().matches(\"(([0-9]{1})([0-9]{0,\"+(before-1)+\"})?)?(\\\\.[0-9]{0,\"+decimalDigits+\"})?\")) {\n             if(source.length()==0)\n                  return dest.subSequence(dstart, dend);\n             return \"\";\n        }\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3968897,"reputation":5551,"user_id":3273962,"accept_rate":76,"display_name":"Mangesh"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1435399943,"creation_date":1435399943,"answer_id":31087540,"question_id":5357455,"body_markdown":"The requirement is **2 digits after decimal.** There should be **no limit** for digits before decimal point. So, solution should be,\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n    \r\n        Pattern mPattern;\r\n    \r\n        public DecimalDigitsInputFilter() {\r\n            mPattern = Pattern.compile(&quot;[0-9]*+((\\\\.[0-9]?)?)||(\\\\.)?&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n            Matcher matcher = mPattern.matcher(dest);\r\n            if (!matcher.matches())\r\n                return &quot;&quot;;\r\n            return null;\r\n        }\r\n    }\r\n\r\nAnd use it as,\r\n\r\n    mEditText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter()});\r\n\r\nThanks to @Pinhassi for the inspiration.","title":"Limit Decimal Places in Android EditText","body":"<p>The requirement is <strong>2 digits after decimal.</strong> There should be <strong>no limit</strong> for digits before decimal point. So, solution should be,</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n\n    Pattern mPattern;\n\n    public DecimalDigitsInputFilter() {\n        mPattern = Pattern.compile(\"[0-9]*+((\\\\.[0-9]?)?)||(\\\\.)?\");\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n        Matcher matcher = mPattern.matcher(dest);\n        if (!matcher.matches())\n            return \"\";\n        return null;\n    }\n}\n</code></pre>\n\n<p>And use it as,</p>\n\n<pre><code>mEditText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter()});\n</code></pre>\n\n<p>Thanks to @Pinhassi for the inspiration.</p>\n"},{"tags":[],"owner":{"account_id":227932,"reputation":3693,"user_id":489902,"accept_rate":67,"display_name":"Hiren Dabhi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502611992,"creation_date":1435746561,"answer_id":31158810,"question_id":5357455,"body_markdown":"Here is the `TextWatcher` that allow only **n** number of digits after decimal point.\r\n\r\n**TextWatcher**\r\n\r\n    private static boolean flag;\r\n\tpublic static TextWatcher getTextWatcherAllowAfterDeci(final int allowAfterDecimal){\r\n\t\t\r\n\t\tTextWatcher watcher = new TextWatcher() {\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void onTextChanged(CharSequence s, int start, int before, int count) {\r\n\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void beforeTextChanged(CharSequence s, int start, int count,\r\n\t\t\t\t\tint after) {\r\n\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void afterTextChanged(Editable s) {\r\n\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\tString str = s.toString();\r\n\t\t\t\tint index = str.indexOf ( &quot;.&quot; );\r\n\t\t\t\tif(index&gt;=0){\r\n\t\t\t\t\tif((index+1)&lt;str.length()){\r\n\t\t\t\t\t\tString numberD = str.substring(index+1);\r\n\t\t\t\t\t\tif (numberD.length()!=allowAfterDecimal) {\r\n\t\t\t\t\t\t\tflag=true;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tflag=false;\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tflag=false;\r\n\t\t\t\t}\r\n\t\t\t\tif(flag)\r\n\t\t\t\t\ts.delete(s.length() - 1,\r\n\t\t\t\t            s.length());\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn watcher;\r\n\t}\r\n\r\n**How to use**\r\n\r\n    yourEditText.addTextChangedListener(getTextWatcherAllowAfterDeci(1));","title":"Limit Decimal Places in Android EditText","body":"<p>Here is the <code>TextWatcher</code> that allow only <strong>n</strong> number of digits after decimal point.</p>\n\n<p><strong>TextWatcher</strong></p>\n\n<pre><code>private static boolean flag;\npublic static TextWatcher getTextWatcherAllowAfterDeci(final int allowAfterDecimal){\n\n    TextWatcher watcher = new TextWatcher() {\n\n        @Override\n        public void onTextChanged(CharSequence s, int start, int before, int count) {\n            // TODO Auto-generated method stub\n\n        }\n\n        @Override\n        public void beforeTextChanged(CharSequence s, int start, int count,\n                int after) {\n            // TODO Auto-generated method stub\n\n        }\n\n        @Override\n        public void afterTextChanged(Editable s) {\n            // TODO Auto-generated method stub\n            String str = s.toString();\n            int index = str.indexOf ( \".\" );\n            if(index&gt;=0){\n                if((index+1)&lt;str.length()){\n                    String numberD = str.substring(index+1);\n                    if (numberD.length()!=allowAfterDecimal) {\n                        flag=true;\n                    }else{\n                        flag=false;\n                    }   \n                }else{\n                    flag = false;\n                }                   \n            }else{\n                flag=false;\n            }\n            if(flag)\n                s.delete(s.length() - 1,\n                        s.length());\n        }\n    };\n    return watcher;\n}\n</code></pre>\n\n<p><strong>How to use</strong></p>\n\n<pre><code>yourEditText.addTextChangedListener(getTextWatcherAllowAfterDeci(1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3104667,"reputation":93,"user_id":2627839,"display_name":"tmorcinek"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1438596184,"creation_date":1438596184,"answer_id":31784559,"question_id":5357455,"body_markdown":"I have modified the above solutions and created following one. You can set number of digits before and after decimal point.\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n\r\n    private final Pattern mPattern;\r\n\r\n    public DecimalDigitsInputFilter(int digitsBeforeZero, int digitsAfterZero) {\r\n        mPattern = Pattern.compile(String.format(&quot;[0-9]{0,%d}(\\\\.[0-9]{0,%d})?&quot;, digitsBeforeZero, digitsAfterZero));\r\n    }\r\n\r\n    @Override\r\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n        Matcher matcher = mPattern.matcher(createResultString(source, start, end, dest, dstart, dend));\r\n        if (!matcher.matches())\r\n            return &quot;&quot;;\r\n        return null;\r\n    }\r\n\r\n    private String createResultString(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n        String sourceString = source.toString();\r\n        String destString = dest.toString();\r\n        return destString.substring(0, dstart) + sourceString.substring(start, end) + destString.substring(dend);\r\n    }\r\n}\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>I have modified the above solutions and created following one. You can set number of digits before and after decimal point.</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n\nprivate final Pattern mPattern;\n\npublic DecimalDigitsInputFilter(int digitsBeforeZero, int digitsAfterZero) {\n    mPattern = Pattern.compile(String.format(\"[0-9]{0,%d}(\\\\.[0-9]{0,%d})?\", digitsBeforeZero, digitsAfterZero));\n}\n\n@Override\npublic CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n    Matcher matcher = mPattern.matcher(createResultString(source, start, end, dest, dstart, dend));\n    if (!matcher.matches())\n        return \"\";\n    return null;\n}\n\nprivate String createResultString(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n    String sourceString = source.toString();\n    String destString = dest.toString();\n    return destString.substring(0, dstart) + sourceString.substring(start, end) + destString.substring(dend);\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":462465,"reputation":4966,"user_id":864787,"accept_rate":77,"display_name":"Santhosh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1441280352,"creation_date":1441280352,"answer_id":32374585,"question_id":5357455,"body_markdown":"Simple Helper class is here to prevent the user entering more than 2 digits after decimal :\r\n\r\n    public class CostFormatter  implements TextWatcher {\r\n\r\n    private final EditText costEditText;\r\n\r\n    public CostFormatter(EditText costEditText) {\r\n        this.costEditText = costEditText;\r\n    }\r\n\r\n    @Override\r\n    public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n    }\r\n\r\n    @Override\r\n    public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n    }\r\n\r\n    @Override\r\n    public synchronized void afterTextChanged(final Editable text) {\r\n        String cost = text.toString().trim();\r\n\r\n        if(!cost.endsWith(&quot;.&quot;) &amp;&amp; cost.contains(&quot;.&quot;)){\r\n            String numberBeforeDecimal = cost.split(&quot;\\\\.&quot;)[0];\r\n            String numberAfterDecimal = cost.split(&quot;\\\\.&quot;)[1];\r\n\r\n            if(numberAfterDecimal.length() &gt; 2){\r\n                numberAfterDecimal = numberAfterDecimal.substring(0, 2);\r\n            }\r\n            cost = numberBeforeDecimal + &quot;.&quot; + numberAfterDecimal;\r\n        }\r\n        costEditText.removeTextChangedListener(this);\r\n        costEditText.setText(cost);\r\n        costEditText.setSelection(costEditText.getText().toString().trim().length());\r\n        costEditText.addTextChangedListener(this);\r\n    }\r\n    }","title":"Limit Decimal Places in Android EditText","body":"<p>Simple Helper class is here to prevent the user entering more than 2 digits after decimal :</p>\n\n<pre><code>public class CostFormatter  implements TextWatcher {\n\nprivate final EditText costEditText;\n\npublic CostFormatter(EditText costEditText) {\n    this.costEditText = costEditText;\n}\n\n@Override\npublic void beforeTextChanged(CharSequence s, int start, int count, int after) {\n}\n\n@Override\npublic void onTextChanged(CharSequence s, int start, int before, int count) {\n}\n\n@Override\npublic synchronized void afterTextChanged(final Editable text) {\n    String cost = text.toString().trim();\n\n    if(!cost.endsWith(\".\") &amp;&amp; cost.contains(\".\")){\n        String numberBeforeDecimal = cost.split(\"\\\\.\")[0];\n        String numberAfterDecimal = cost.split(\"\\\\.\")[1];\n\n        if(numberAfterDecimal.length() &gt; 2){\n            numberAfterDecimal = numberAfterDecimal.substring(0, 2);\n        }\n        cost = numberBeforeDecimal + \".\" + numberAfterDecimal;\n    }\n    costEditText.removeTextChangedListener(this);\n    costEditText.setText(cost);\n    costEditText.setSelection(costEditText.getText().toString().trim().length());\n    costEditText.addTextChangedListener(this);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1775775,"reputation":802,"user_id":1619595,"accept_rate":75,"display_name":"Navinpd"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1445955328,"creation_date":1445955328,"answer_id":33370368,"question_id":5357455,"body_markdown":"A very late response:\r\nWe can do it simply like this:\r\n\r\n    etv.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                if (s.toString().length() &gt; 3 &amp;&amp; s.toString().contains(&quot;.&quot;)) {\r\n                    if (s.toString().length() - s.toString().indexOf(&quot;.&quot;) &gt; 3) {\r\n                        etv.setText(s.toString().substring(0, s.length() - 1));\r\n                        etv.setSelection(edtSendMoney.getText().length());\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable arg0) {\r\n            }\r\n    }","title":"Limit Decimal Places in Android EditText","body":"<p>A very late response:\nWe can do it simply like this:</p>\n\n<pre><code>etv.addTextChangedListener(new TextWatcher() {\n        @Override\n        public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n        }\n\n        @Override\n        public void onTextChanged(CharSequence s, int start, int before, int count) {\n            if (s.toString().length() &gt; 3 &amp;&amp; s.toString().contains(\".\")) {\n                if (s.toString().length() - s.toString().indexOf(\".\") &gt; 3) {\n                    etv.setText(s.toString().substring(0, s.length() - 1));\n                    etv.setSelection(edtSendMoney.getText().length());\n                }\n            }\n        }\n\n        @Override\n        public void afterTextChanged(Editable arg0) {\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1665114,"reputation":172,"user_id":1532687,"display_name":"Robert Conley"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1446145824,"creation_date":1446145824,"answer_id":33422682,"question_id":5357455,"body_markdown":"This is to build on pinhassi&#39;s answer - the issue that I came across was that you couldn&#39;t add values before the decimal once the decimal limit has been reached.  To fix the issue, we need to construct the final string before doing the pattern match.\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n\r\n    import android.text.InputFilter;\r\n    import android.text.Spanned;\r\n\r\n    public class DecimalLimiter implements InputFilter\r\n    {\r\n\t    Pattern mPattern;\r\n\r\n\t    public DecimalLimiter(int digitsBeforeZero,int digitsAfterZero) \r\n\t    {\r\n\t        mPattern=Pattern.compile(&quot;[0-9]{0,&quot; + (digitsBeforeZero) + &quot;}+((\\\\.[0-9]{0,&quot; + (digitsAfterZero) + &quot;})?)||(\\\\.)?&quot;);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) \r\n\t    {\r\n\t\t    StringBuilder sb = new StringBuilder(dest);\r\n\t\t    sb.insert(dstart, source, start, end);\r\n\r\n\t\t    Matcher matcher = mPattern.matcher(sb.toString());\r\n            if(!matcher.matches())\r\n                return &quot;&quot;;\r\n            return null;\r\n\t    }\r\n    }","title":"Limit Decimal Places in Android EditText","body":"<p>This is to build on pinhassi's answer - the issue that I came across was that you couldn't add values before the decimal once the decimal limit has been reached.  To fix the issue, we need to construct the final string before doing the pattern match.</p>\n\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport android.text.InputFilter;\nimport android.text.Spanned;\n\npublic class DecimalLimiter implements InputFilter\n{\n    Pattern mPattern;\n\n    public DecimalLimiter(int digitsBeforeZero,int digitsAfterZero) \n    {\n        mPattern=Pattern.compile(\"[0-9]{0,\" + (digitsBeforeZero) + \"}+((\\\\.[0-9]{0,\" + (digitsAfterZero) + \"})?)||(\\\\.)?\");\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) \n    {\n        StringBuilder sb = new StringBuilder(dest);\n        sb.insert(dstart, source, start, end);\n\n        Matcher matcher = mPattern.matcher(sb.toString());\n        if(!matcher.matches())\n            return \"\";\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3368866,"reputation":111,"user_id":2828662,"display_name":"Sasa Ilic"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1502612001,"creation_date":1446737044,"answer_id":33548446,"question_id":5357455,"body_markdown":"The simplest way to achieve that is:\r\n\r\n\tet.addTextChangedListener(new TextWatcher() {\r\n\t\tpublic void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {\r\n\t\t\tString text = arg0.toString();\r\n\t\t\tif (text.contains(&quot;.&quot;) &amp;&amp; text.substring(text.indexOf(&quot;.&quot;) + 1).length() &gt; 2) {\r\n\t\t\t\tet.setText(text.substring(0, text.length() - 1));\r\n\t\t\t\tet.setSelection(et.getText().length());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {\r\n\r\n\t\t}\r\n\r\n\t\tpublic void afterTextChanged(Editable arg0) {\r\n\t\t}\r\n\t});\r\n\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>The simplest way to achieve that is:</p>\n\n<pre><code>et.addTextChangedListener(new TextWatcher() {\n    public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {\n        String text = arg0.toString();\n        if (text.contains(\".\") &amp;&amp; text.substring(text.indexOf(\".\") + 1).length() &gt; 2) {\n            et.setText(text.substring(0, text.length() - 1));\n            et.setSelection(et.getText().length());\n        }\n    }\n\n    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {\n\n    }\n\n    public void afterTextChanged(Editable arg0) {\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7274275,"reputation":861,"user_id":5546244,"accept_rate":31,"display_name":"koa73"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1502612011,"creation_date":1450701529,"answer_id":34395902,"question_id":5357455,"body_markdown":"I have changed answer №6 (by Favas Kv)  because there You can put just point in the first position.  \r\n\r\n    final InputFilter [] filter = { new InputFilter() {\r\n\r\n        @Override\r\n        public CharSequence filter(CharSequence source, int start, int end,\r\n                                   Spanned dest, int dstart, int dend) {\r\n            StringBuilder builder = new StringBuilder(dest);\r\n            builder.replace(dstart, dend, source\r\n                    .subSequence(start, end).toString());\r\n            if (!builder.toString().matches(\r\n                    &quot;(([1-9]{1})([0-9]{0,4})?(\\\\.)?)?([0-9]{0,2})?&quot;\r\n\r\n            )) {\r\n                if(source.length()==0)\r\n                    return dest.subSequence(dstart, dend);\r\n                return &quot;&quot;;\r\n            }\r\n            return null;\r\n        }\r\n    }};\r\n\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>I have changed answer №6 (by Favas Kv)  because there You can put just point in the first position.  </p>\n\n<pre><code>final InputFilter [] filter = { new InputFilter() {\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end,\n                               Spanned dest, int dstart, int dend) {\n        StringBuilder builder = new StringBuilder(dest);\n        builder.replace(dstart, dend, source\n                .subSequence(start, end).toString());\n        if (!builder.toString().matches(\n                \"(([1-9]{1})([0-9]{0,4})?(\\\\.)?)?([0-9]{0,2})?\"\n\n        )) {\n            if(source.length()==0)\n                return dest.subSequence(dstart, dend);\n            return \"\";\n        }\n        return null;\n    }\n}};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3788825,"reputation":23829,"user_id":3145960,"accept_rate":100,"display_name":"Reaz Murshed"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1471489178,"creation_date":1471489178,"answer_id":39009314,"question_id":5357455,"body_markdown":"Like others said, I added this class in my project and set the filter to the `EditText` I want. \r\n\r\nThe filter is copied from @Pixel&#39;s answer. I&#39;m just putting it all together. \r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n        \r\n        Pattern mPattern;\r\n        \r\n        public DecimalDigitsInputFilter() {\r\n            mPattern = Pattern.compile(&quot;([1-9]{1}[0-9]{0,2}([0-9]{3})*(\\\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\\\.[0-9]{0,2})?|0(\\\\.[0-9]{0,2})?|(\\\\.[0-9]{1,2})?)&quot;);\r\n        \r\n        }\r\n        \r\n        @Override\r\n        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n        \r\n            String formatedSource = source.subSequence(start, end).toString();\r\n        \r\n            String destPrefix = dest.subSequence(0, dstart).toString();\r\n        \r\n            String destSuffix = dest.subSequence(dend, dest.length()).toString();\r\n        \r\n            String result = destPrefix + formatedSource + destSuffix;\r\n        \r\n            result = result.replace(&quot;,&quot;, &quot;.&quot;);\r\n        \r\n            Matcher matcher = mPattern.matcher(result);\r\n        \r\n            if (matcher.matches()) {\r\n                return null;\r\n            }\r\n        \r\n            return &quot;&quot;;\r\n        }\r\n    }\r\n\r\nNow set the filter in your `EditText` like this.\r\n\r\n    mEditText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter()});\r\n\r\nHere one important thing is it does solves my problem of not allowing showing more than two digits after the decimal point in that `EditText` but the problem is when I `getText()` from that `EditText`, it returns the whole input I typed. \r\n\r\nFor example, after applying the filter over the `EditText`, I tried to set input 1.5699856987. So in the screen it shows 1.56 which is perfect.\r\n\r\nThen I wanted to use this input for some other calculations so I wanted to get the text from that input field (`EditText`). When I called `mEditText.getText().toString()` it returns 1.5699856987 which was not acceptable in my case.\r\n\r\nSo I had to parse the value again after getting it from the `EditText`. \r\n\r\n    BigDecimal amount = new BigDecimal(Double.parseDouble(mEditText.getText().toString().trim()))\r\n        .setScale(2, RoundingMode.HALF_UP);\r\n\r\n`setScale` does the trick here after getting the full text from the `EditText`. ","title":"Limit Decimal Places in Android EditText","body":"<p>Like others said, I added this class in my project and set the filter to the <code>EditText</code> I want. </p>\n\n<p>The filter is copied from @Pixel's answer. I'm just putting it all together. </p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n\n    Pattern mPattern;\n\n    public DecimalDigitsInputFilter() {\n        mPattern = Pattern.compile(\"([1-9]{1}[0-9]{0,2}([0-9]{3})*(\\\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\\\.[0-9]{0,2})?|0(\\\\.[0-9]{0,2})?|(\\\\.[0-9]{1,2})?)\");\n\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n\n        String formatedSource = source.subSequence(start, end).toString();\n\n        String destPrefix = dest.subSequence(0, dstart).toString();\n\n        String destSuffix = dest.subSequence(dend, dest.length()).toString();\n\n        String result = destPrefix + formatedSource + destSuffix;\n\n        result = result.replace(\",\", \".\");\n\n        Matcher matcher = mPattern.matcher(result);\n\n        if (matcher.matches()) {\n            return null;\n        }\n\n        return \"\";\n    }\n}\n</code></pre>\n\n<p>Now set the filter in your <code>EditText</code> like this.</p>\n\n<pre><code>mEditText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter()});\n</code></pre>\n\n<p>Here one important thing is it does solves my problem of not allowing showing more than two digits after the decimal point in that <code>EditText</code> but the problem is when I <code>getText()</code> from that <code>EditText</code>, it returns the whole input I typed. </p>\n\n<p>For example, after applying the filter over the <code>EditText</code>, I tried to set input 1.5699856987. So in the screen it shows 1.56 which is perfect.</p>\n\n<p>Then I wanted to use this input for some other calculations so I wanted to get the text from that input field (<code>EditText</code>). When I called <code>mEditText.getText().toString()</code> it returns 1.5699856987 which was not acceptable in my case.</p>\n\n<p>So I had to parse the value again after getting it from the <code>EditText</code>. </p>\n\n<pre><code>BigDecimal amount = new BigDecimal(Double.parseDouble(mEditText.getText().toString().trim()))\n    .setScale(2, RoundingMode.HALF_UP);\n</code></pre>\n\n<p><code>setScale</code> does the trick here after getting the full text from the <code>EditText</code>. </p>\n"},{"tags":[],"owner":{"account_id":2607716,"reputation":2197,"user_id":2258512,"accept_rate":71,"display_name":"Luke"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1478551583,"creation_date":1478551583,"answer_id":40474307,"question_id":5357455,"body_markdown":"The InputFilter I came up with allows you to configure the number of digits before and after the decimal place.  Additionally, it disallows leading zeroes.\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter\r\n    {\r\n        Pattern pattern;\r\n    \r\n        public DecimalDigitsInputFilter(int digitsBeforeDecimal, int digitsAfterDecimal)\r\n        {\r\n            pattern = Pattern.compile(&quot;(([1-9]{1}[0-9]{0,&quot; + (digitsBeforeDecimal - 1) + &quot;})?||[0]{1})((\\\\.[0-9]{0,&quot; + digitsAfterDecimal + &quot;})?)||(\\\\.)?&quot;);\r\n        }\r\n    \r\n        @Override public CharSequence filter(CharSequence source, int sourceStart, int sourceEnd, Spanned destination, int destinationStart, int destinationEnd)\r\n        {\r\n            // Remove the string out of destination that is to be replaced.\r\n            String newString = destination.toString().substring(0, destinationStart) + destination.toString().substring(destinationEnd, destination.toString().length());\r\n    \r\n            // Add the new string in.\r\n            newString = newString.substring(0, destinationStart) + source.toString() + newString.substring(destinationStart, newString.length());\r\n    \r\n            // Now check if the new string is valid.\r\n            Matcher matcher = pattern.matcher(newString);\r\n    \r\n            if(matcher.matches())\r\n            {\r\n                // Returning null indicates that the input is valid.\r\n                return null;\r\n            }\r\n    \r\n            // Returning the empty string indicates the input is invalid.\r\n            return &quot;&quot;;\r\n        }\r\n    }\r\n\r\n    // To use this InputFilter, attach it to your EditText like so:\r\n    final EditText editText = (EditText) findViewById(R.id.editText);\r\n\r\n    EditText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter(4, 4)});","title":"Limit Decimal Places in Android EditText","body":"<p>The InputFilter I came up with allows you to configure the number of digits before and after the decimal place.  Additionally, it disallows leading zeroes.</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter\n{\n    Pattern pattern;\n\n    public DecimalDigitsInputFilter(int digitsBeforeDecimal, int digitsAfterDecimal)\n    {\n        pattern = Pattern.compile(\"(([1-9]{1}[0-9]{0,\" + (digitsBeforeDecimal - 1) + \"})?||[0]{1})((\\\\.[0-9]{0,\" + digitsAfterDecimal + \"})?)||(\\\\.)?\");\n    }\n\n    @Override public CharSequence filter(CharSequence source, int sourceStart, int sourceEnd, Spanned destination, int destinationStart, int destinationEnd)\n    {\n        // Remove the string out of destination that is to be replaced.\n        String newString = destination.toString().substring(0, destinationStart) + destination.toString().substring(destinationEnd, destination.toString().length());\n\n        // Add the new string in.\n        newString = newString.substring(0, destinationStart) + source.toString() + newString.substring(destinationStart, newString.length());\n\n        // Now check if the new string is valid.\n        Matcher matcher = pattern.matcher(newString);\n\n        if(matcher.matches())\n        {\n            // Returning null indicates that the input is valid.\n            return null;\n        }\n\n        // Returning the empty string indicates the input is invalid.\n        return \"\";\n    }\n}\n\n// To use this InputFilter, attach it to your EditText like so:\nfinal EditText editText = (EditText) findViewById(R.id.editText);\n\nEditText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter(4, 4)});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10349342,"reputation":1,"user_id":7633231,"display_name":"Jhony Urbano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502612020,"creation_date":1502595054,"answer_id":45656796,"question_id":5357455,"body_markdown":"    @Override\r\n    public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n        String numero = total.getText().toString();\r\n        int dec = numero.indexOf(&quot;.&quot;);\r\n        int longitud = numero.length();\r\n        if (dec+3 == longitud &amp;&amp; dec != -1) { //3 number decimal + 1\r\n            log.i(&quot;ento&quot;,&quot;si&quot;);\r\n            numero = numero.substring(0,dec+3);\r\n            if (contador == 0) {\r\n                contador = 1;\r\n                total.setText(numero);\r\n                total.setSelection(numero.length());\r\n            } else {\r\n                contador = 0;\r\n            }\r\n        }\r\n    }","title":"Limit Decimal Places in Android EditText","body":"<pre><code>@Override\npublic void beforeTextChanged(CharSequence s, int start, int count, int after) {\n    String numero = total.getText().toString();\n    int dec = numero.indexOf(\".\");\n    int longitud = numero.length();\n    if (dec+3 == longitud &amp;&amp; dec != -1) { //3 number decimal + 1\n        log.i(\"ento\",\"si\");\n        numero = numero.substring(0,dec+3);\n        if (contador == 0) {\n            contador = 1;\n            total.setText(numero);\n            total.setSelection(numero.length());\n        } else {\n            contador = 0;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4779799,"reputation":2144,"user_id":3861913,"display_name":"Karthik Kompelli"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1553498800,"creation_date":1553498800,"answer_id":55332971,"question_id":5357455,"body_markdown":"This code works well,\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n    \r\n        private final int digitsBeforeZero;\r\n        private final int digitsAfterZero;\r\n        private Pattern mPattern;\r\n    \r\n        public DecimalDigitsInputFilter(int digitsBeforeZero, int digitsAfterZero) {\r\n            this.digitsBeforeZero = digitsBeforeZero;\r\n            this.digitsAfterZero = digitsAfterZero;\r\n            applyPattern(digitsBeforeZero, digitsAfterZero);\r\n        }\r\n    \r\n        private void applyPattern(int digitsBeforeZero, int digitsAfterZero) {\r\n            mPattern = Pattern.compile(&quot;[0-9]{0,&quot; + (digitsBeforeZero - 1) + &quot;}+((\\\\.[0-9]{0,&quot; + (digitsAfterZero - 1) + &quot;})?)|(\\\\.)?&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n            if (dest.toString().contains(&quot;.&quot;) || source.toString().contains(&quot;.&quot;))\r\n                applyPattern(digitsBeforeZero + 2, digitsAfterZero);\r\n            else\r\n                applyPattern(digitsBeforeZero, digitsAfterZero);\r\n    \r\n            Matcher matcher = mPattern.matcher(dest);\r\n            if (!matcher.matches())\r\n                return &quot;&quot;;\r\n            return null;\r\n        }\r\n    \r\n    }\r\n\r\napplying filter:\r\n\r\n    edittext.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)});\r\n\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>This code works well,</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n\n    private final int digitsBeforeZero;\n    private final int digitsAfterZero;\n    private Pattern mPattern;\n\n    public DecimalDigitsInputFilter(int digitsBeforeZero, int digitsAfterZero) {\n        this.digitsBeforeZero = digitsBeforeZero;\n        this.digitsAfterZero = digitsAfterZero;\n        applyPattern(digitsBeforeZero, digitsAfterZero);\n    }\n\n    private void applyPattern(int digitsBeforeZero, int digitsAfterZero) {\n        mPattern = Pattern.compile(\"[0-9]{0,\" + (digitsBeforeZero - 1) + \"}+((\\\\.[0-9]{0,\" + (digitsAfterZero - 1) + \"})?)|(\\\\.)?\");\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n        if (dest.toString().contains(\".\") || source.toString().contains(\".\"))\n            applyPattern(digitsBeforeZero + 2, digitsAfterZero);\n        else\n            applyPattern(digitsBeforeZero, digitsAfterZero);\n\n        Matcher matcher = mPattern.matcher(dest);\n        if (!matcher.matches())\n            return \"\";\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>applying filter:</p>\n\n<pre><code>edittext.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":412487,"reputation":1082,"user_id":785576,"accept_rate":41,"display_name":"saravanan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1554224830,"creation_date":1554224830,"answer_id":55480143,"question_id":5357455,"body_markdown":"Like others said, I added this class in my project and set the filter to the EditText Simpler solution without using regex:\r\n\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n    int digitsBeforeZero =0;\r\n    int digitsAfterZero=0;\r\n\r\n    public DecimalDigitsInputFilter(int digitsBeforeZero,int digitsAfterZero) {\r\n    this.digitsBeforeZero=digitsBeforeZero;\r\n    this.digitsAfterZero=digitsAfterZero;\r\n    }\r\n\r\n    @Override\r\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n    if(dest!=null &amp;&amp; dest.toString().trim().length()&lt;(digitsBeforeZero+digitsAfterZero)){\r\n        String value=dest.toString().trim();\r\n        if(value.contains(&quot;.&quot;) &amp;&amp; (value.substring(value.indexOf(&quot;.&quot;)).length()&lt;(digitsAfterZero+1))){\r\n            return ((value.indexOf(&quot;.&quot;)+1+digitsAfterZero)&gt;dstart)?null:&quot;&quot;;\r\n        }else if(value.contains(&quot;.&quot;) &amp;&amp; (value.indexOf(&quot;.&quot;)&lt;dstart)){\r\n            return &quot;&quot;;\r\n        }else if(source!=null &amp;&amp; source.equals(&quot;.&quot;)&amp;&amp; ((value.length()-dstart)&gt;=(digitsAfterZero+1))){\r\n            return &quot;&quot;;\r\n        }\r\n\r\n    }else{\r\n        return &quot;&quot;;\r\n    }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\n\r\napplying filter:\r\n\r\n    edittext.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)});\r\n\r\n ","title":"Limit Decimal Places in Android EditText","body":"<p>Like others said, I added this class in my project and set the filter to the EditText Simpler solution without using regex:</p>\n\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\nint digitsBeforeZero =0;\nint digitsAfterZero=0;\n\npublic DecimalDigitsInputFilter(int digitsBeforeZero,int digitsAfterZero) {\nthis.digitsBeforeZero=digitsBeforeZero;\nthis.digitsAfterZero=digitsAfterZero;\n}\n\n@Override\npublic CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\nif(dest!=null &amp;&amp; dest.toString().trim().length()&lt;(digitsBeforeZero+digitsAfterZero)){\n    String value=dest.toString().trim();\n    if(value.contains(\".\") &amp;&amp; (value.substring(value.indexOf(\".\")).length()&lt;(digitsAfterZero+1))){\n        return ((value.indexOf(\".\")+1+digitsAfterZero)&gt;dstart)?null:\"\";\n    }else if(value.contains(\".\") &amp;&amp; (value.indexOf(\".\")&lt;dstart)){\n        return \"\";\n    }else if(source!=null &amp;&amp; source.equals(\".\")&amp;&amp; ((value.length()-dstart)&gt;=(digitsAfterZero+1))){\n        return \"\";\n    }\n\n}else{\n    return \"\";\n}\n    return null;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>applying filter:</p>\n\n<pre><code>edittext.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10649447,"reputation":227,"user_id":7840973,"display_name":"Sagar Bandamwar"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1610317367,"creation_date":1564471342,"answer_id":57266311,"question_id":5357455,"body_markdown":"**Create a new class in Android  kotlin with the name DecimalDigitsInputFilter**\r\n\r\n\r\n\r\n    class DecimalDigitsInputFilter(digitsBeforeDecimal: Int, digitsAfterDecimal: Int) : InputFilter {\r\n    \r\n        var mPattern: Pattern = Pattern.compile(&quot;[0-9]{0,$digitsBeforeDecimal}+((\\\\.[0-9]{0,$digitsAfterDecimal})?)||(\\\\.)?&quot;)\r\n    \r\n        override fun filter(\r\n            source: CharSequence?,\r\n            start: Int,\r\n            end: Int,\r\n            dest: Spanned?,\r\n            dstart: Int,\r\n            dend: Int\r\n        ): CharSequence? {\r\n            val matcher: Matcher = mPattern.matcher(\r\n                dest?.subSequence(0, dstart).toString() + source?.subSequence(\r\n                    start,\r\n                    end\r\n                ).toString() + dest?.subSequence(dend, dest.length).toString()\r\n            )\r\n            if (!matcher.matches())\r\n                return &quot;&quot;\r\n            else\r\n                return null\r\n        }\r\n    }\r\n\r\n**Call this class with the following line**\r\n\r\n     et_buy_amount.filters = (arrayOf&lt;InputFilter&gt;(DecimalDigitsInputFilter(8,2)))\r\n\r\nthere are too many answers for the same but it will allow you to enter 8 digit before decimal and 2 digits after decimal \r\n\r\nother answers are accepting only 8 digits ","title":"Limit Decimal Places in Android EditText","body":"<p><strong>Create a new class in Android  kotlin with the name DecimalDigitsInputFilter</strong></p>\n<pre><code>class DecimalDigitsInputFilter(digitsBeforeDecimal: Int, digitsAfterDecimal: Int) : InputFilter {\n\n    var mPattern: Pattern = Pattern.compile(&quot;[0-9]{0,$digitsBeforeDecimal}+((\\\\.[0-9]{0,$digitsAfterDecimal})?)||(\\\\.)?&quot;)\n\n    override fun filter(\n        source: CharSequence?,\n        start: Int,\n        end: Int,\n        dest: Spanned?,\n        dstart: Int,\n        dend: Int\n    ): CharSequence? {\n        val matcher: Matcher = mPattern.matcher(\n            dest?.subSequence(0, dstart).toString() + source?.subSequence(\n                start,\n                end\n            ).toString() + dest?.subSequence(dend, dest.length).toString()\n        )\n        if (!matcher.matches())\n            return &quot;&quot;\n        else\n            return null\n    }\n}\n</code></pre>\n<p><strong>Call this class with the following line</strong></p>\n<pre><code> et_buy_amount.filters = (arrayOf&lt;InputFilter&gt;(DecimalDigitsInputFilter(8,2)))\n</code></pre>\n<p>there are too many answers for the same but it will allow you to enter 8 digit before decimal and 2 digits after decimal</p>\n<p>other answers are accepting only 8 digits</p>\n"},{"tags":[],"owner":{"account_id":5530955,"reputation":43,"user_id":4390932,"display_name":"Paolo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582217974,"creation_date":1582217974,"answer_id":60325081,"question_id":5357455,"body_markdown":"My simple solution without regex\r\n\r\n        int start=Edit1.getSelectionStart();\r\n        String sp=Edit1.getText().toString();\r\n        sp=sp.replace(&quot;,&quot;,&quot;.&quot;);\r\n        Double d=Double.valueOf(sp);\r\n        String s=String.format(&quot;%.2f&quot;,d );\r\n        if(!Edit1.getText().toString().equals(s))\r\n            Edit1.setText(s);\r\n        if(start&gt;Edit1.getText().length())start--;\r\n        Edit1.setSelection(start);\r\n\r\nputting into onTextChange. By deleting the comma, the zeros double because the number becomes an integer.","title":"Limit Decimal Places in Android EditText","body":"<p>My simple solution without regex</p>\n\n<pre><code>    int start=Edit1.getSelectionStart();\n    String sp=Edit1.getText().toString();\n    sp=sp.replace(\",\",\".\");\n    Double d=Double.valueOf(sp);\n    String s=String.format(\"%.2f\",d );\n    if(!Edit1.getText().toString().equals(s))\n        Edit1.setText(s);\n    if(start&gt;Edit1.getText().length())start--;\n    Edit1.setSelection(start);\n</code></pre>\n\n<p>putting into onTextChange. By deleting the comma, the zeros double because the number becomes an integer.</p>\n"},{"tags":[],"owner":{"account_id":3814553,"reputation":722,"user_id":3164227,"display_name":"shubomb"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1583511894,"creation_date":1583511894,"answer_id":60568019,"question_id":5357455,"body_markdown":"For Kotlin\r\n\r\n    val inputFilter =  arrayOf&lt;InputFilter&gt;(DecimalDigitsInputFilter(5,2))\r\n                et_total_value.setFilters(inputFilter)","title":"Limit Decimal Places in Android EditText","body":"<p>For Kotlin</p>\n\n<pre><code>val inputFilter =  arrayOf&lt;InputFilter&gt;(DecimalDigitsInputFilter(5,2))\n            et_total_value.setFilters(inputFilter)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16551310,"reputation":135,"user_id":11959527,"display_name":"Bao Bao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600066755,"creation_date":1600055670,"answer_id":63877875,"question_id":5357455,"body_markdown":"This implementation of InputFilter solves the problem.\r\n\r\n    import android.text.SpannableStringBuilder;\r\n    import android.text.Spanned;\r\n    import android.text.method.DigitsKeyListener;\r\n    \r\n    public class MoneyValueFilter extends DigitsKeyListener {\r\n        public MoneyValueFilter() {\r\n            super(false, true);\r\n        }\r\n    \r\n        private int digits = 2;\r\n    \r\n        public void setDigits(int d) {\r\n            digits = d;\r\n        }\r\n    \r\n        @Override\r\n        public CharSequence filter(CharSequence source, int start, int end,\r\n                Spanned dest, int dstart, int dend) {\r\n            CharSequence out = super.filter(source, start, end, dest, dstart, dend);\r\n    \r\n            // if changed, replace the source\r\n            if (out != null) {\r\n                source = out;\r\n                start = 0;\r\n                end = out.length();\r\n            }\r\n    \r\n            int len = end - start;\r\n    \r\n            // if deleting, source is empty\r\n            // and deleting can&#39;t break anything\r\n            if (len == 0) {\r\n                return source;\r\n            }\r\n    \r\n            int dlen = dest.length();\r\n    \r\n            // Find the position of the decimal .\r\n            for (int i = 0; i &lt; dstart; i++) {\r\n                if (dest.charAt(i) == &#39;.&#39;) {\r\n                    // being here means, that a number has\r\n                    // been inserted after the dot\r\n                    // check if the amount of digits is right\r\n                    return (dlen-(i+1) + len &gt; digits) ? \r\n                        &quot;&quot; :\r\n                        new SpannableStringBuilder(source, start, end);\r\n                }\r\n            }\r\n    \r\n            for (int i = start; i &lt; end; ++i) {\r\n                if (source.charAt(i) == &#39;.&#39;) {\r\n                    // being here means, dot has been inserted\r\n                    // check if the amount of digits is right\r\n                    if ((dlen-dend) + (end-(i + 1)) &gt; digits)\r\n                        return &quot;&quot;;\r\n                    else\r\n                        break;  // return new SpannableStringBuilder(source, start, end);\r\n                }\r\n            }\r\n    \r\n            // if the dot is after the inserted part,\r\n            // nothing can break\r\n            return new SpannableStringBuilder(source, start, end);\r\n        }\r\n    }\r\n\r\nTo use:\r\n\r\n    editCoin.setFilters(new InputFilter[] {new MoneyValueFilter(2)});\r\n\r\n\r\n","title":"Limit Decimal Places in Android EditText","body":"<p>This implementation of InputFilter solves the problem.</p>\n<pre><code>import android.text.SpannableStringBuilder;\nimport android.text.Spanned;\nimport android.text.method.DigitsKeyListener;\n\npublic class MoneyValueFilter extends DigitsKeyListener {\n    public MoneyValueFilter() {\n        super(false, true);\n    }\n\n    private int digits = 2;\n\n    public void setDigits(int d) {\n        digits = d;\n    }\n\n    @Override\n    public CharSequence filter(CharSequence source, int start, int end,\n            Spanned dest, int dstart, int dend) {\n        CharSequence out = super.filter(source, start, end, dest, dstart, dend);\n\n        // if changed, replace the source\n        if (out != null) {\n            source = out;\n            start = 0;\n            end = out.length();\n        }\n\n        int len = end - start;\n\n        // if deleting, source is empty\n        // and deleting can't break anything\n        if (len == 0) {\n            return source;\n        }\n\n        int dlen = dest.length();\n\n        // Find the position of the decimal .\n        for (int i = 0; i &lt; dstart; i++) {\n            if (dest.charAt(i) == '.') {\n                // being here means, that a number has\n                // been inserted after the dot\n                // check if the amount of digits is right\n                return (dlen-(i+1) + len &gt; digits) ? \n                    &quot;&quot; :\n                    new SpannableStringBuilder(source, start, end);\n            }\n        }\n\n        for (int i = start; i &lt; end; ++i) {\n            if (source.charAt(i) == '.') {\n                // being here means, dot has been inserted\n                // check if the amount of digits is right\n                if ((dlen-dend) + (end-(i + 1)) &gt; digits)\n                    return &quot;&quot;;\n                else\n                    break;  // return new SpannableStringBuilder(source, start, end);\n            }\n        }\n\n        // if the dot is after the inserted part,\n        // nothing can break\n        return new SpannableStringBuilder(source, start, end);\n    }\n}\n</code></pre>\n<p>To use:</p>\n<pre><code>editCoin.setFilters(new InputFilter[] {new MoneyValueFilter(2)});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15064658,"reputation":211,"user_id":17281786,"display_name":"Marek"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1636042111,"creation_date":1636042111,"answer_id":69842340,"question_id":5357455,"body_markdown":"Simple BindingAdapter in Kotlin:\r\n\r\n    @BindingAdapter(&quot;maxDecimalPlaces&quot;)\r\n    fun TextInputEditText.limitDecimalPlaces(maxDecimalPlaces: Int) {\r\n        filters += InputFilter { source, _, _, dest, dstart, dend -&gt;\r\n            val value = if (source.isEmpty()) {\r\n                dest.removeRange(dstart, dend)\r\n            } else {\r\n                StringBuilder(dest).insert(dstart, source)\r\n            }\r\n            val matcher = Pattern.compile(&quot;([1-9][0-9]*)|([1-9][0-9]*\\\\.[0-9]{0,$maxDecimalPlaces})|(\\\\.[0-9]{0,$maxDecimalPlaces})&quot;).matcher(value)\r\n            if (!matcher.matches()) &quot;&quot; else null\r\n        }\r\n    }","title":"Limit Decimal Places in Android EditText","body":"<p>Simple BindingAdapter in Kotlin:</p>\n<pre><code>@BindingAdapter(&quot;maxDecimalPlaces&quot;)\nfun TextInputEditText.limitDecimalPlaces(maxDecimalPlaces: Int) {\n    filters += InputFilter { source, _, _, dest, dstart, dend -&gt;\n        val value = if (source.isEmpty()) {\n            dest.removeRange(dstart, dend)\n        } else {\n            StringBuilder(dest).insert(dstart, source)\n        }\n        val matcher = Pattern.compile(&quot;([1-9][0-9]*)|([1-9][0-9]*\\\\.[0-9]{0,$maxDecimalPlaces})|(\\\\.[0-9]{0,$maxDecimalPlaces})&quot;).matcher(value)\n        if (!matcher.matches()) &quot;&quot; else null\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7783248,"reputation":225,"user_id":5889013,"display_name":"Булат Мухутдинов"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644002190,"creation_date":1644002190,"answer_id":70991742,"question_id":5357455,"body_markdown":"If you want to have restrictions on integer part also here is the code\r\n\r\n    class PropertyCostInputFilter : DigitsKeyListener(false, true) {\r\n\r\n    override fun filter(source: CharSequence, start: Int, end: Int, dest: Spanned, dstart: Int, dend: Int): CharSequence {\r\n        var source = source\r\n        var start = start\r\n        var end = end\r\n        val out = super.filter(source, start, end, dest, dstart, dend)\r\n\r\n        if (out != null) {\r\n            source = out\r\n            start = 0\r\n            end = out.length\r\n        }\r\n\r\n        val sourceLength = end - start\r\n\r\n        // If length = 0, then there was a deletion and therefore the length could not become greater than the max value\r\n        if (sourceLength == 0) {\r\n            return source\r\n        }\r\n\r\n        val result = dest.replaceRange((dstart until dend), source.substring(start, end))\r\n        val parts = result.split(SEPARATOR)\r\n\r\n        if (parts.size &gt; 0 &amp;&amp; parts[0].length &gt; INTEGER_PART_MAX_DIGITS\r\n            || parts.size &gt; 1 &amp;&amp; parts[1].length &gt; FRACTIONAL_PART_MAX_DIGITS\r\n        ) {\r\n            return &quot;&quot;\r\n        }\r\n\r\n        return SpannableStringBuilder(source, start, end)\r\n    }\r\n\r\n    companion object {\r\n        private const val INTEGER_PART_MAX_DIGITS = 20\r\n        private const val FRACTIONAL_PART_MAX_DIGITS = 2\r\n        private const val SEPARATOR = &#39;.&#39;\r\n    }\r\n    }","title":"Limit Decimal Places in Android EditText","body":"<p>If you want to have restrictions on integer part also here is the code</p>\n<pre><code>class PropertyCostInputFilter : DigitsKeyListener(false, true) {\n\noverride fun filter(source: CharSequence, start: Int, end: Int, dest: Spanned, dstart: Int, dend: Int): CharSequence {\n    var source = source\n    var start = start\n    var end = end\n    val out = super.filter(source, start, end, dest, dstart, dend)\n\n    if (out != null) {\n        source = out\n        start = 0\n        end = out.length\n    }\n\n    val sourceLength = end - start\n\n    // If length = 0, then there was a deletion and therefore the length could not become greater than the max value\n    if (sourceLength == 0) {\n        return source\n    }\n\n    val result = dest.replaceRange((dstart until dend), source.substring(start, end))\n    val parts = result.split(SEPARATOR)\n\n    if (parts.size &gt; 0 &amp;&amp; parts[0].length &gt; INTEGER_PART_MAX_DIGITS\n        || parts.size &gt; 1 &amp;&amp; parts[1].length &gt; FRACTIONAL_PART_MAX_DIGITS\n    ) {\n        return &quot;&quot;\n    }\n\n    return SpannableStringBuilder(source, start, end)\n}\n\ncompanion object {\n    private const val INTEGER_PART_MAX_DIGITS = 20\n    private const val FRACTIONAL_PART_MAX_DIGITS = 2\n    private const val SEPARATOR = '.'\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11516458,"reputation":707,"user_id":8439685,"display_name":"Kishan Thakkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665656770,"creation_date":1665656770,"answer_id":74054203,"question_id":5357455,"body_markdown":"if you have restriction like maxDigitsBeforeDecimalPoint or maxDigitsAfterDecimalPoint then you can use below class.\r\n\r\n    public class DecimalDigitsInputFilter implements InputFilter {\r\n    @Override\r\n    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\r\n        StringBuilder builder = new StringBuilder(dest);\r\n        int maxDigitsBeforeDecimalPoint = 6;\r\n        int maxDigitsAfterDecimalPoint = 2;\r\n        builder.replace(dstart, dend, source\r\n                .subSequence(start, end).toString());\r\n        if (!builder.toString().matches(\r\n                &quot;(([1-9]{1})([0-9]{0,&quot; + (maxDigitsBeforeDecimalPoint - 1) + &quot;})?)?(\\\\.[0-9]{0,&quot; + maxDigitsAfterDecimalPoint + &quot;})?&quot;\r\n\r\n        )) {\r\n            if (source.length() == 0)\r\n                return dest.subSequence(dstart, dend);\r\n            return &quot;&quot;;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n}\r\n\r\nfor me I have required max 6 digit before decimal point and max 2 digit after decimal so I have declared variable like int maxDigitsBeforeDecimalPoint = 6;\r\n    int maxDigitsAfterDecimalPoint = 2; you can use according your requirement.\r\n\r\nUsage\r\n\r\n    editText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter()});\r\n\r\nHope it will help you as well.","title":"Limit Decimal Places in Android EditText","body":"<p>if you have restriction like maxDigitsBeforeDecimalPoint or maxDigitsAfterDecimalPoint then you can use below class.</p>\n<pre><code>public class DecimalDigitsInputFilter implements InputFilter {\n@Override\npublic CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {\n    StringBuilder builder = new StringBuilder(dest);\n    int maxDigitsBeforeDecimalPoint = 6;\n    int maxDigitsAfterDecimalPoint = 2;\n    builder.replace(dstart, dend, source\n            .subSequence(start, end).toString());\n    if (!builder.toString().matches(\n            &quot;(([1-9]{1})([0-9]{0,&quot; + (maxDigitsBeforeDecimalPoint - 1) + &quot;})?)?(\\\\.[0-9]{0,&quot; + maxDigitsAfterDecimalPoint + &quot;})?&quot;\n\n    )) {\n        if (source.length() == 0)\n            return dest.subSequence(dstart, dend);\n        return &quot;&quot;;\n    }\n\n    return null;\n}\n</code></pre>\n<p>}</p>\n<p>for me I have required max 6 digit before decimal point and max 2 digit after decimal so I have declared variable like int maxDigitsBeforeDecimalPoint = 6;\nint maxDigitsAfterDecimalPoint = 2; you can use according your requirement.</p>\n<p>Usage</p>\n<pre><code>editText.setFilters(new InputFilter[]{new DecimalDigitsInputFilter()});\n</code></pre>\n<p>Hope it will help you as well.</p>\n"}],"owner":{"account_id":300330,"reputation":6240,"user_id":607405,"accept_rate":84,"display_name":"Konstantin Weitz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147093,"favorite_count":0,"down_vote_count":0,"up_vote_count":152,"accepted_answer_id":5368816,"answer_count":40,"score":152,"last_activity_date":1665656770,"creation_date":1300479774,"question_id":5357455,"body_markdown":"I&#39;m trying to write an app that helps you manage your finances.  I&#39;m using an `EditText` Field where the user can specify an amount of money.\r\n\r\nI set the `inputType` to `numberDecimal` which works fine, except that this allows people to enter numbers such as `123.122` which is not perfect for money.\r\n\r\nIs there a way to limit the number of characters after the decimal point to two?","title":"Limit Decimal Places in Android EditText","body":"<p>I'm trying to write an app that helps you manage your finances.  I'm using an <code>EditText</code> Field where the user can specify an amount of money.</p>\n\n<p>I set the <code>inputType</code> to <code>numberDecimal</code> which works fine, except that this allows people to enter numbers such as <code>123.122</code> which is not perfect for money.</p>\n\n<p>Is there a way to limit the number of characters after the decimal point to two?</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1665650672,"post_id":74051753,"comment_id":130751076,"body_markdown":"Check if the package `TableARepository` resides in is being scanned.","body":"Check if the package <code>TableARepository</code> resides in is being scanned."}],"answers":[{"tags":[],"owner":{"account_id":17332293,"reputation":109,"user_id":12555084,"display_name":"Karim SNOUSSI"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665656738,"creation_date":1665656738,"answer_id":74054196,"question_id":74051753,"body_markdown":"add the annotation `@Repository`\r\n\r\n    @Repository\r\n    public interface TableARepository extends CrudRepository&lt;TableA, Long&gt;{\r\n        @Query(value = &quot;SELECT r FROM TableA r  WHERE r.Id = :Id&quot;, nativeQuery = true)\r\n        public Rater getTableAById(@Param(&quot;Id&quot;) Long Id);\r\n    }\r\n\r\n","title":"Spring Data JPA Autowired repository returns null","body":"<p>add the annotation <code>@Repository</code></p>\n<pre><code>@Repository\npublic interface TableARepository extends CrudRepository&lt;TableA, Long&gt;{\n    @Query(value = &quot;SELECT r FROM TableA r  WHERE r.Id = :Id&quot;, nativeQuery = true)\n    public Rater getTableAById(@Param(&quot;Id&quot;) Long Id);\n}\n</code></pre>\n"}],"owner":{"account_id":8720587,"reputation":163,"user_id":6523875,"display_name":"StudentOfTheGame"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665656738,"creation_date":1665645047,"question_id":74051753,"body_markdown":"I am using the following repository and controller to retrieve some records from the DB:\r\n\r\n```\r\npublic interface TableARepository extends CrudRepository&lt;TableA, Long&gt;{\r\n\t@Query(value = &quot;SELECT r FROM TableA r  WHERE r.Id = :Id&quot;, nativeQuery = true)\r\n\tpublic Rater getTableAById(@Param(&quot;Id&quot;) Long Id);\r\n}\r\n\r\n@RestController\r\npublic class TableAController {\r\n\t@Autowired\r\n    TableARepository tableARepository;\r\n\t\r\n\t@GetMapping(value=&quot;/GetTableAById&quot;)\r\n\tpublic TableA getTableAById(@RequestParam String email) {\r\n\t\tTableA tableA = new TableA();\r\n\t\ttableA = tableARepository.getTableAById(email);\r\n\t\treturn tableA;\r\n\t}\r\n}\r\n```\r\n\r\nThe following error appears once i invoke the REST api:\r\n\r\n```\r\nCannot invoke com.TableARepository.getTableAById(Long) because this.tableARepository is null","title":"Spring Data JPA Autowired repository returns null","body":"<p>I am using the following repository and controller to retrieve some records from the DB:</p>\n<pre><code>public interface TableARepository extends CrudRepository&lt;TableA, Long&gt;{\n    @Query(value = &quot;SELECT r FROM TableA r  WHERE r.Id = :Id&quot;, nativeQuery = true)\n    public Rater getTableAById(@Param(&quot;Id&quot;) Long Id);\n}\n\n@RestController\npublic class TableAController {\n    @Autowired\n    TableARepository tableARepository;\n    \n    @GetMapping(value=&quot;/GetTableAById&quot;)\n    public TableA getTableAById(@RequestParam String email) {\n        TableA tableA = new TableA();\n        tableA = tableARepository.getTableAById(email);\n        return tableA;\n    }\n}\n</code></pre>\n<p>The following error appears once i invoke the REST api:</p>\n<pre><code>Cannot invoke com.TableARepository.getTableAById(Long) because this.tableARepository is null\n</code></pre>\n"},{"tags":["java","spring-boot","hazelcast","spring-cache","hazelcast-imap"],"comments":[{"owner":{"account_id":7592512,"reputation":3070,"user_id":5759723,"display_name":"Neil Stevenson"},"score":1,"creation_date":1664986924,"post_id":73959123,"comment_id":130595467,"body_markdown":"How is performance on a newer version of Hazelcast ? Same or better ? Can you try `EXPLAIN &lt;your query&gt;` on the query ?","body":"How is performance on a newer version of Hazelcast ? Same or better ? Can you try <code>EXPLAIN &lt;your query&gt;</code> on the query ?"},{"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"score":0,"creation_date":1665049589,"post_id":73959123,"comment_id":130610046,"body_markdown":"The context forces me to keep this Hazelcast version. And it&#39;s not about a query in particular, because I tried this optimization for multiple queries, even really, really simple one. And the minimum latency with all the optimizations I was able to achieve was around 10 milliseconds. This makes me think that maybe it is kind of like the limit of the SQL engine of Hazelcast. This is basically what I wanted to see if it is true.","body":"The context forces me to keep this Hazelcast version. And it&#39;s not about a query in particular, because I tried this optimization for multiple queries, even really, really simple one. And the minimum latency with all the optimizations I was able to achieve was around 10 milliseconds. This makes me think that maybe it is kind of like the limit of the SQL engine of Hazelcast. This is basically what I wanted to see if it is true."},{"owner":{"account_id":2621552,"reputation":328,"user_id":2269454,"display_name":"mrck"},"score":0,"creation_date":1665063309,"post_id":73959123,"comment_id":130615253,"body_markdown":"By query cache, you meant [QueryCache](https://docs.hazelcast.org/docs/4.0/javadoc/index.html?com/hazelcast/map/QueryCache.html)? If it is the case, it can give microseconds latency.","body":"By query cache, you meant <a href=\"https://docs.hazelcast.org/docs/4.0/javadoc/index.html?com/hazelcast/map/QueryCache.html\" rel=\"nofollow noreferrer\">QueryCache</a>? If it is the case, it can give microseconds latency."},{"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"score":0,"creation_date":1665134783,"post_id":73959123,"comment_id":130633415,"body_markdown":"Yes but even with that enabled on the client side, I can only get at best a couple of milliseconds - 10 milliseconds in average for a batch of requests.","body":"Yes but even with that enabled on the client side, I can only get at best a couple of milliseconds - 10 milliseconds in average for a batch of requests."},{"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"score":0,"creation_date":1665134971,"post_id":73959123,"comment_id":130633453,"body_markdown":"Basically the map has 14k items, memory count is 10 MB, the query is a filter of two fields. The client and hazelcast runs on localhost. The client has query cache enabled, with memory format OBJECT. The best I could get was that latency I mentioned. There is no custom or complex implementation, just a simple usage client-server of Hazelcast. Also checked in debug that it uses the query cache on client side and that it is populated, so all good.","body":"Basically the map has 14k items, memory count is 10 MB, the query is a filter of two fields. The client and hazelcast runs on localhost. The client has query cache enabled, with memory format OBJECT. The best I could get was that latency I mentioned. There is no custom or complex implementation, just a simple usage client-server of Hazelcast. Also checked in debug that it uses the query cache on client side and that it is populated, so all good."},{"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"score":0,"creation_date":1665140510,"post_id":73959123,"comment_id":130635361,"body_markdown":"I also have an index in the query cache for those exact two fields from the query.","body":"I also have an index in the query cache for those exact two fields from the query."},{"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"score":0,"creation_date":1665143942,"post_id":73959123,"comment_id":130636553,"body_markdown":"Also what is odd to me is that when this code is executed on the client side:\n\n`map.getQueryCache(name).values(somePredicate)\n`","body":"Also what is odd to me is that when this code is executed on the client side:  <code>map.getQueryCache(name).values(somePredicate) </code>"},{"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"score":0,"creation_date":1665144338,"post_id":73959123,"comment_id":130636699,"body_markdown":"the serializer seem to be used, but the query cache has memory format as OBJECT, so not really sure why the serializer is involved.","body":"the serializer seem to be used, but the query cache has memory format as OBJECT, so not really sure why the serializer is involved."},{"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"score":0,"creation_date":1665144501,"post_id":73959123,"comment_id":130636755,"body_markdown":"I have some tracing enabled for debug purposes, so I saw the serializer being used for both read and write on client side when that piece of code runs. And also checked that the query cache is populated, no request seem to be made to the server cache.","body":"I have some tracing enabled for debug purposes, so I saw the serializer being used for both read and write on client side when that piece of code runs. And also checked that the query cache is populated, no request seem to be made to the server cache."},{"owner":{"account_id":2621552,"reputation":328,"user_id":2269454,"display_name":"mrck"},"score":2,"creation_date":1665350866,"post_id":73959123,"comment_id":130674107,"body_markdown":"With version 5.1, situation was improved and some unneeded serialization/deserialization was removed for OBJECT format.","body":"With version 5.1, situation was improved and some unneeded serialization/deserialization was removed for OBJECT format."},{"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"score":0,"creation_date":1665479299,"post_id":73959123,"comment_id":130704207,"body_markdown":"The issue is that the project uses Spring Hazelcast repositories, and from what I saw the framework is not yet updated to be able to use the version 5.","body":"The issue is that the project uses Spring Hazelcast repositories, and from what I saw the framework is not yet updated to be able to use the version 5."},{"owner":{"account_id":2621552,"reputation":328,"user_id":2269454,"display_name":"mrck"},"score":0,"creation_date":1665501569,"post_id":73959123,"comment_id":130712939,"body_markdown":"Unfortunately it is in upgrade-it-yourself state for now, maybe you can create an issue for this on its github repo.","body":"Unfortunately it is in upgrade-it-yourself state for now, maybe you can create an issue for this on its github repo."},{"owner":{"account_id":7592512,"reputation":3070,"user_id":5759723,"display_name":"Neil Stevenson"},"score":2,"creation_date":1665561156,"post_id":73959123,"comment_id":130726752,"body_markdown":"https://github.com/hazelcast/spring-data-hazelcast you mean ? It&#39;s using HZ 4.2.2 but advancing wouldn&#39;t be too hard. I&#39;ve logged https://github.com/hazelcast/spring-data-hazelcast/issues/257","body":"<a href=\"https://github.com/hazelcast/spring-data-hazelcast\" rel=\"nofollow noreferrer\">github.com/hazelcast/spring-data-hazelcast</a> you mean ? It&#39;s using HZ 4.2.2 but advancing wouldn&#39;t be too hard. I&#39;ve logged <a href=\"https://github.com/hazelcast/spring-data-hazelcast/issues/257\" rel=\"nofollow noreferrer\">github.com/hazelcast/spring-data-hazelcast/issues/257</a>"}],"answers":[{"tags":[],"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665656139,"creation_date":1665656139,"answer_id":74054064,"question_id":73959123,"body_markdown":"So after all the debugging, seems that the query is capped in latency in milliseconds range. Doesn&#39;t seem that there is a way to go towards microseconds in the 4.2 version. When using continous query cache, there seem to be some unnecessary serialization carried out, which in certain cases can take 30-40 percent of the total latency, but even without that the total latency will still stay in the milliseconds range.","title":"Hazelcast Java - Query latency maximum optimization","body":"<p>So after all the debugging, seems that the query is capped in latency in milliseconds range. Doesn't seem that there is a way to go towards microseconds in the 4.2 version. When using continous query cache, there seem to be some unnecessary serialization carried out, which in certain cases can take 30-40 percent of the total latency, but even without that the total latency will still stay in the milliseconds range.</p>\n"}],"owner":{"account_id":11261286,"reputation":301,"user_id":8259507,"display_name":"raduone"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74054064,"answer_count":1,"score":0,"last_activity_date":1665656139,"creation_date":1664965858,"question_id":73959123,"body_markdown":"I am currently working on a context where the application uses Hazelcast. The paradigm used is not embedded, therefore server-client is used.\r\n\r\nI am having a flow where on a distributed map is executed a query.\r\nAfter all the optimizations I could think of, different combinations with memory format, query cache, indexes etc. The most I could achieve was around ~10 milliseconds latency, which I know it sounds fast for a single operation.\r\n\r\nThe issue is that the current application is basing some flows on microseconds latency.\r\n\r\n**So my question is, is that kind of optimization possible for the query engine of Hazelcast.** ? Or should I try to focus on maybe updating the business code ? \r\n\r\nI am using Hazelcast: 4.2 with a map of around 14 000 items, with a memory count (total) of around 10 MB, so not that big.\r\nThe testing is done using local workstation.","title":"Hazelcast Java - Query latency maximum optimization","body":"<p>I am currently working on a context where the application uses Hazelcast. The paradigm used is not embedded, therefore server-client is used.</p>\n<p>I am having a flow where on a distributed map is executed a query.\nAfter all the optimizations I could think of, different combinations with memory format, query cache, indexes etc. The most I could achieve was around ~10 milliseconds latency, which I know it sounds fast for a single operation.</p>\n<p>The issue is that the current application is basing some flows on microseconds latency.</p>\n<p><strong>So my question is, is that kind of optimization possible for the query engine of Hazelcast.</strong> ? Or should I try to focus on maybe updating the business code ?</p>\n<p>I am using Hazelcast: 4.2 with a map of around 14 000 items, with a memory count (total) of around 10 MB, so not that big.\nThe testing is done using local workstation.</p>\n"},{"tags":["java","concurrency","java-threads","happens-before"],"comments":[{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1665598869,"post_id":74046131,"comment_id":130740908,"body_markdown":"It is important to understand that caches on modern cpus are always coherent due to the cache coherence protocol like MESI. Another important thing to understand is that correctly synchronized programs exhibit sequential consistent behavior and for sequential consistency the real time order isnt relevant. So reads and writes can be skewed as long as nobody can observe a violation of the program order.","body":"It is important to understand that caches on modern cpus are always coherent due to the cache coherence protocol like MESI. Another important thing to understand is that correctly synchronized programs exhibit sequential consistent behavior and for sequential consistency the real time order isnt relevant. So reads and writes can be skewed as long as nobody can observe a violation of the program order."},{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1665598960,"post_id":74046131,"comment_id":130740937,"body_markdown":"In short, the above program is correctly synchronized because it doesnt contain any dataraces.","body":"In short, the above program is correctly synchronized because it doesnt contain any dataraces."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1665601006,"post_id":74046131,"comment_id":130741568,"body_markdown":"@pveentjer, Can you say that the _program_ is correctly synchronized when you haven&#39;t seen most of it? The _class,_ `Example` is &quot;thread-safe&quot; in the sense that it provides certain useful guarantees\\* that hold true regardless of how many different threads operate on the same `Example` instance. [\\* E.g., if `getIsSafe()` is called when the program is otherwise quiescent, then the value returned is _guaranteed_ to be equal to the `i` given in the constructor call plus the number of prior calls to `someMethod1()`.] But, the program still could use an `Example` instance in an &quot;unsafe&quot; algorithm.","body":"@pveentjer, Can you say that the <i>program</i> is correctly synchronized when you haven&#39;t seen most of it? The <i>class,</i> <code>Example</code> is &quot;thread-safe&quot; in the sense that it provides certain useful guarantees* that hold true regardless of how many different threads operate on the same <code>Example</code> instance. [* E.g., if <code>getIsSafe()</code> is called when the program is otherwise quiescent, then the value returned is <i>guaranteed</i> to be equal to the <code>i</code> given in the constructor call plus the number of prior calls to <code>someMethod1()</code>.] But, the program still could use an <code>Example</code> instance in an &quot;unsafe&quot; algorithm."},{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1665613666,"post_id":74046131,"comment_id":130744520,"body_markdown":"@SolomonSlow quiescence is no guarantee for sequential consistency to see latest value since that implies preserving the real time ordering which seqiential consistence doesn&#39;t need to preserve. You need linearizability, quiescence consistence  or strict serializability for that.","body":"@SolomonSlow quiescence is no guarantee for sequential consistency to see latest value since that implies preserving the real time ordering which seqiential consistence doesn&#39;t need to preserve. You need linearizability, quiescence consistence  or strict serializability for that."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1665623343,"post_id":74046131,"comment_id":130745878,"body_markdown":"@pveentjer, I&#39;m pretty sure that when one thread releases the write lock in `someMethod1`, it _happens before_ any other thread can subsequently acquire the read lock in `getIsSafe`. Maybe I guess I made a mistake when I said &quot;...program is quiescent...&quot; I should have said, quiescent and _no thread is in a call to either method._","body":"@pveentjer, I&#39;m pretty sure that when one thread releases the write lock in <code>someMethod1</code>, it <i>happens before</i> any other thread can subsequently acquire the read lock in <code>getIsSafe</code>. Maybe I guess I made a mistake when I said &quot;...program is quiescent...&quot; I should have said, quiescent and <i>no thread is in a call to either method.</i>"}],"answers":[{"tags":[],"owner":{"account_id":14927328,"reputation":97,"user_id":10911230,"display_name":"Meysam Karimi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665598096,"creation_date":1665598096,"answer_id":74046240,"question_id":74046131,"body_markdown":"Yes, This approach is thread-safe. If there is no thread that has requested the write lock and the lock for writing, then multiple threads can lock the lock for reading. It means multiple threads can read the data at the very moment, as long as there’s no thread to write the data or to update the data.","title":"Thread-safety of int field in Java","body":"<p>Yes, This approach is thread-safe. If there is no thread that has requested the write lock and the lock for writing, then multiple threads can lock the lock for reading. It means multiple threads can read the data at the very moment, as long as there’s no thread to write the data or to update the data.</p>\n"},{"tags":[],"owner":{"account_id":26594824,"reputation":13,"user_id":20217370,"display_name":"dallin_sh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665655499,"creation_date":1665655478,"answer_id":74053924,"question_id":74046131,"body_markdown":"Get answer from @pveentjer in comments under question:\r\n\r\n&gt; It is important to understand that caches on modern cpus are always\r\n&gt; coherent due to the cache coherence protocol like MESI. Another\r\n&gt; important thing to understand is that correctly synchronized programs\r\n&gt; exhibit sequential consistent behavior and for sequential consistency\r\n&gt; the real time order isnt relevant. So reads and writes can be skewed\r\n&gt; as long as nobody can observe a violation of the program order.","title":"Thread-safety of int field in Java","body":"<p>Get answer from @pveentjer in comments under question:</p>\n<blockquote>\n<p>It is important to understand that caches on modern cpus are always\ncoherent due to the cache coherence protocol like MESI. Another\nimportant thing to understand is that correctly synchronized programs\nexhibit sequential consistent behavior and for sequential consistency\nthe real time order isnt relevant. So reads and writes can be skewed\nas long as nobody can observe a violation of the program order.</p>\n</blockquote>\n"}],"owner":{"account_id":26594824,"reputation":13,"user_id":20217370,"display_name":"dallin_sh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74053924,"answer_count":2,"score":1,"last_activity_date":1665655499,"creation_date":1665597241,"question_id":74046131,"body_markdown":"If class has field with int type (not Atomic Integer and without volatile keyword) and all access to this field happens under read/write locks - will this field thread-safe in this case? Or in some moment some thread can see not real value of this field but something from cache?\r\n```\r\npublic static class Example {\r\n        private int isSafe;\r\n        private final ReadWriteLock lock;\r\n        \r\n        public Example(int i) {\r\n            isSafe = i;\r\n            lock = new ReentrantReadWriteLock();\r\n        }\r\n        \r\n        public int getIsSafe() {\r\n            final Lock lock = this.lock.readLock();\r\n            lock.lock();\r\n            try {\r\n                return isSafe;\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n        }\r\n\r\n        public void someMethod1() {\r\n            final Lock lock = this.lock.writeLock();\r\n            lock.lock();\r\n            try {\r\n                isSafe++;\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n        }\r\n        \r\n    }","title":"Thread-safety of int field in Java","body":"<p>If class has field with int type (not Atomic Integer and without volatile keyword) and all access to this field happens under read/write locks - will this field thread-safe in this case? Or in some moment some thread can see not real value of this field but something from cache?</p>\n<pre><code>public static class Example {\n        private int isSafe;\n        private final ReadWriteLock lock;\n        \n        public Example(int i) {\n            isSafe = i;\n            lock = new ReentrantReadWriteLock();\n        }\n        \n        public int getIsSafe() {\n            final Lock lock = this.lock.readLock();\n            lock.lock();\n            try {\n                return isSafe;\n            } finally {\n                lock.unlock();\n            }\n        }\n\n        public void someMethod1() {\n            final Lock lock = this.lock.writeLock();\n            lock.lock();\n            try {\n                isSafe++;\n            } finally {\n                lock.unlock();\n            }\n        }\n        \n    }\n</code></pre>\n"},{"tags":["java","spring-boot","elasticsearch"],"comments":[{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1665654403,"post_id":74053531,"comment_id":130752303,"body_markdown":"Can you share the ES server logs, the detailed error must be there.","body":"Can you share the ES server logs, the detailed error must be there."},{"owner":{"account_id":20910311,"reputation":3,"user_id":15361360,"display_name":"snoocky"},"score":0,"creation_date":1665654589,"post_id":74053531,"comment_id":130752346,"body_markdown":"Elasticsearch exception [type=search_phase_execution_exception, reason=all shards failed]","body":"Elasticsearch exception [type=search_phase_execution_exception, reason=all shards failed]"},{"owner":{"account_id":20910311,"reputation":3,"user_id":15361360,"display_name":"snoocky"},"score":0,"creation_date":1665654616,"post_id":74053531,"comment_id":130752355,"body_markdown":"and now I found: {&quot;error&quot;:{&quot;root_cause&quot;:[{&quot;type&quot;:&quot;query_shard_exception&quot;,&quot;reason&quot;:&quot;Failed to parse query [*list/*]&quot;,&quot;index_uuid&quot;:&quot;","body":"and now I found: {&quot;error&quot;:{&quot;root_cause&quot;:[{&quot;type&quot;:&quot;query_shard_exception&quot;,&quot;rea&zwnj;&#8203;son&quot;:&quot;Failed to parse query [<i>list/</i>]&quot;,&quot;index_uuid&quot;:&quot;"}],"answers":[{"tags":[],"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665654720,"creation_date":1665654720,"answer_id":74053759,"question_id":74053531,"body_markdown":"The `query_string` query has some [reserved characters](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#_reserved_characters) that you&#39;re now allowed to use in queries (such as `/`), except if properly escaped.\r\n\r\nSo you should escape all reserved characters that are present in `valueSearch.toLowerCase()`","title":"type=search_phase_execution_exception, reason=all shards failed when i send &#39;/&#39;","body":"<p>The <code>query_string</code> query has some <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#_reserved_characters\" rel=\"nofollow noreferrer\">reserved characters</a> that you're now allowed to use in queries (such as <code>/</code>), except if properly escaped.</p>\n<p>So you should escape all reserved characters that are present in <code>valueSearch.toLowerCase()</code></p>\n"}],"owner":{"account_id":20910311,"reputation":3,"user_id":15361360,"display_name":"snoocky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74053759,"answer_count":1,"score":0,"last_activity_date":1665654720,"creation_date":1665653596,"question_id":74053531,"body_markdown":"I&#39;m using elasticSearch with RestHighLevelClient and Java. When I put query: \r\nQueryBuilder qb = new QueryStringQueryBuilder(&quot;*&quot; + valueSearch.toLowerCase() + &quot;*&quot;). Where valueSearch contain &quot;/&quot; -&gt; example REC2/. The searchResponse = client.search(searchRequest, RequestOptions.DEFAULT) return me Caused by: org.elasticsearch.ElasticsearchStatusException: Elasticsearch exception [type=search_phase_execution_exception, reason=all shards failed]. \r\nHowever, when I send Rec2/2/3 or Rec// everything its ok.\r\n\r\nVersion elastic: 7.3.0\r\n    ","title":"type=search_phase_execution_exception, reason=all shards failed when i send &#39;/&#39;","body":"<p>I'm using elasticSearch with RestHighLevelClient and Java. When I put query:\nQueryBuilder qb = new QueryStringQueryBuilder(&quot;<em>&quot; + valueSearch.toLowerCase() + &quot;</em>&quot;). Where valueSearch contain &quot;/&quot; -&gt; example REC2/. The searchResponse = client.search(searchRequest, RequestOptions.DEFAULT) return me Caused by: org.elasticsearch.ElasticsearchStatusException: Elasticsearch exception [type=search_phase_execution_exception, reason=all shards failed].\nHowever, when I send Rec2/2/3 or Rec// everything its ok.</p>\n<p>Version elastic: 7.3.0</p>\n"},{"tags":["java","apache-tika"],"comments":[{"owner":{"account_id":5478729,"reputation":661,"user_id":4355934,"accept_rate":86,"display_name":"Robert McCoy"},"score":1,"creation_date":1665638443,"post_id":74050403,"comment_id":130747855,"body_markdown":"Based on what I&#39;m seeing in the Tika source for the `RecursiveParserWrapperHandler`, the parent metadata isn&#39;t available in the list until all embedded documents have been processed: https://github.com/apache/tika/blob/41a99cce34f90259ad8775cb8abbdbcc19e7ca27/tika-core/src/main/java/org/apache/tika/sax/RecursiveParserWrapperHandler.java#L128\n\nHoping maybe someone else knows of a way to retrieve this through some other internal Tika source?","body":"Based on what I&#39;m seeing in the Tika source for the <code>RecursiveParserWrapperHandler</code>, the parent metadata isn&#39;t available in the list until all embedded documents have been processed: <a href=\"https://github.com/apache/tika/blob/41a99cce34f90259ad8775cb8abbdbcc19e7ca27/tika-core/src/main/java/org/apache/tika/sax/RecursiveParserWrapperHandler.java#L128\" rel=\"nofollow noreferrer\">github.com/apache/tika/blob/&hellip;</a>  Hoping maybe someone else knows of a way to retrieve this through some other internal Tika source?"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1665663021,"post_id":74050403,"comment_id":130755117,"body_markdown":"It will vary somewhat between file formats, but for at least some, the embedded document will be triggered as soon as it is found, which may be before any of the metadata has been found + processed","body":"It will vary somewhat between file formats, but for at least some, the embedded document will be triggered as soon as it is found, which may be before any of the metadata has been found + processed"},{"owner":{"account_id":8363906,"reputation":615,"user_id":6281268,"display_name":"Tim Allison"},"score":0,"creation_date":1667320444,"post_id":74050403,"comment_id":131137884,"body_markdown":"You&#39;re both right.  The parent metadata object isn&#39;t added to the list until the end of the document (https://github.com/apache/tika/blob/main/tika-core/src/main/java/org/apache/tika/sax/RecursiveParserWrapperHandler.java#L127).   Why do you need the parent metadata?  Is there another way to accomplish what you need, short of implementing your own RecursiveParserWrapperHandler?","body":"You&#39;re both right.  The parent metadata object isn&#39;t added to the list until the end of the document (<a href=\"https://github.com/apache/tika/blob/main/tika-core/src/main/java/org/apache/tika/sax/RecursiveParserWrapperHandler.java#L127\" rel=\"nofollow noreferrer\">github.com/apache/tika/blob/main/tika-core/src/main/java/or&zwnj;&#8203;g/&hellip;</a>).   Why do you need the parent metadata?  Is there another way to accomplish what you need, short of implementing your own RecursiveParserWrapperHandler?"},{"owner":{"account_id":5478729,"reputation":661,"user_id":4355934,"accept_rate":86,"display_name":"Robert McCoy"},"score":1,"creation_date":1667411342,"post_id":74050403,"comment_id":131162934,"body_markdown":"@TimAllison The main thing I was looking to achieve was to be able to apply metadata from a &quot;parent&quot; container file to a given &quot;child&quot; embedded file if the child file didn&#39;t have that information. For example, if a file doesn&#39;t have created/modified dates, derive from the parents. It seems to accomplish this you would have to run the &quot;parent&quot; file through a parser by itself to extract this information, and then send the file through another parser using `RecursiveParserWrapperHandler` while supplying the parents metadata from the first run.","body":"@TimAllison The main thing I was looking to achieve was to be able to apply metadata from a &quot;parent&quot; container file to a given &quot;child&quot; embedded file if the child file didn&#39;t have that information. For example, if a file doesn&#39;t have created/modified dates, derive from the parents. It seems to accomplish this you would have to run the &quot;parent&quot; file through a parser by itself to extract this information, and then send the file through another parser using <code>RecursiveParserWrapperHandler</code> while supplying the parents metadata from the first run."},{"owner":{"account_id":8363906,"reputation":615,"user_id":6281268,"display_name":"Tim Allison"},"score":0,"creation_date":1667417031,"post_id":74050403,"comment_id":131164800,"body_markdown":"We have a MetadataFilter that is applied post parse per metadata object that allows you to modify metadata before the data is returned.  I think there&#39;s also a need for a post-parse filter that takes the list of metadata objects from a parse and modifies it...perhaps enriches the container document or pushes data from the parent into the contained files.  If you open an issue on our JIRA (https://issues.apache.org/jira/projects/TIKA), I&#39;ll see what we can do.","body":"We have a MetadataFilter that is applied post parse per metadata object that allows you to modify metadata before the data is returned.  I think there&#39;s also a need for a post-parse filter that takes the list of metadata objects from a parse and modifies it...perhaps enriches the container document or pushes data from the parent into the contained files.  If you open an issue on our JIRA (<a href=\"https://issues.apache.org/jira/projects/TIKA\" rel=\"nofollow noreferrer\">issues.apache.org/jira/projects/TIKA</a>), I&#39;ll see what we can do."}],"owner":{"account_id":5478729,"reputation":661,"user_id":4355934,"accept_rate":86,"display_name":"Robert McCoy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665653869,"creation_date":1665634248,"question_id":74050403,"body_markdown":"I&#39;m working with Tika and using the Java library for it. Using a custom implementation of a `EmbeddedDocumentExtractor` with a `RecursiveParserWrapper` to process embedded files. This custom `EmbeddedDocumentExtractor` uses the override of the `parseEmbedded` method to process the files within a given container file. \r\n\r\nI&#39;m trying to identify if there is anyway to access the parent containers metadata while the embedded file is being processed. Or, does Tika not finish with the parent metadata until all embedded files are processed?\r\n\r\nI&#39;ve tried setting the `RecursiveParserWrapperHandler` on the context object and along the `ParseContext` to the `EmbeddedDocumentExtractor` like this:\r\n```java\r\nTikaConfig config = new TikaConfig(TikaProcessor.class.getResourceAsStream(&quot;/tika-config.xml&quot;));\r\nAutoDetectParser parser = new AutoDetectParser(config);\r\nParseContext context = new ParseContext();\r\nContentHandlerFactory factory = new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.BODY, 100000);\r\n\r\nRecursiveWrapperParser wrapper = new RecursiveParserWrapper(parser);\r\nRecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(factory);\r\nMyCustomEmbeddedDocumentExtractor myCustomExtractor = new MyCustomEmbeddedDocumentExtractor(context);\r\n\r\ncontext.set(RecursiveParserWrapper.class, wrapper);\r\ncontext.set(RecursiveParserWrapperHandler.class, handler);\r\ncontext.set(EmbeddedDocumentExtractor.class, myCustomExtractor);\r\ncontext.set(Parser.class, parser);\r\n\r\nMetadata metadata = new Metadata();\r\nwrapper.parse(someInputStream, handler, metadata, context);\r\n```\r\n\r\nand then attempting to access it inside of the custom extractor:\r\n\r\n```java\r\npublic class MyCustomEmbeddedDocumentExtractor extends ParsingEmbeddedDocumentExtractor {\r\n    ParseContext context;\r\n    \r\n    public MyCustomEmbeddedDocumentExtractor(ParseContext parentContext) {\r\n        super(parentContext);\r\n        this.context = parentContext;\r\n    }\r\n\r\n    public boolean shouldParseEmbedded(Metadata metadata) {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void parseEmbedded(InputStream inputStream, ContentHandler contentHandler, Metadata metadata, boolean outputHtml) throws SAXException, IOException {\r\n        // do some stuff\r\n        RecursiveParserWrapperHandler wrapperHandler = (RecursiveParserWrapperHandler) context.get(RecursiveParserWrapperHandler.class);\r\n        if (wrapperHandler != null) {\r\n           List&lt;Metadata&gt; parentMetadata = wrapperHandler.getMetadataList();\r\n           // ==&gt; List has size of zero here? &lt;==\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe `getMetadataList()` call doesn&#39;t seem to contain the parent metadata in the embedded extractor. For what it&#39;s worth, on subsequent `parseEmbedded` calls, the call to `getMetadataList()` does start populating with children metadata, so I know this is somewhat working.\r\n\r\n","title":"Access parent file metadata from embedded extractor processing","body":"<p>I'm working with Tika and using the Java library for it. Using a custom implementation of a <code>EmbeddedDocumentExtractor</code> with a <code>RecursiveParserWrapper</code> to process embedded files. This custom <code>EmbeddedDocumentExtractor</code> uses the override of the <code>parseEmbedded</code> method to process the files within a given container file.</p>\n<p>I'm trying to identify if there is anyway to access the parent containers metadata while the embedded file is being processed. Or, does Tika not finish with the parent metadata until all embedded files are processed?</p>\n<p>I've tried setting the <code>RecursiveParserWrapperHandler</code> on the context object and along the <code>ParseContext</code> to the <code>EmbeddedDocumentExtractor</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TikaConfig config = new TikaConfig(TikaProcessor.class.getResourceAsStream(&quot;/tika-config.xml&quot;));\nAutoDetectParser parser = new AutoDetectParser(config);\nParseContext context = new ParseContext();\nContentHandlerFactory factory = new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.BODY, 100000);\n\nRecursiveWrapperParser wrapper = new RecursiveParserWrapper(parser);\nRecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(factory);\nMyCustomEmbeddedDocumentExtractor myCustomExtractor = new MyCustomEmbeddedDocumentExtractor(context);\n\ncontext.set(RecursiveParserWrapper.class, wrapper);\ncontext.set(RecursiveParserWrapperHandler.class, handler);\ncontext.set(EmbeddedDocumentExtractor.class, myCustomExtractor);\ncontext.set(Parser.class, parser);\n\nMetadata metadata = new Metadata();\nwrapper.parse(someInputStream, handler, metadata, context);\n</code></pre>\n<p>and then attempting to access it inside of the custom extractor:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyCustomEmbeddedDocumentExtractor extends ParsingEmbeddedDocumentExtractor {\n    ParseContext context;\n    \n    public MyCustomEmbeddedDocumentExtractor(ParseContext parentContext) {\n        super(parentContext);\n        this.context = parentContext;\n    }\n\n    public boolean shouldParseEmbedded(Metadata metadata) {\n        return true;\n    }\n\n    @Override\n    public void parseEmbedded(InputStream inputStream, ContentHandler contentHandler, Metadata metadata, boolean outputHtml) throws SAXException, IOException {\n        // do some stuff\n        RecursiveParserWrapperHandler wrapperHandler = (RecursiveParserWrapperHandler) context.get(RecursiveParserWrapperHandler.class);\n        if (wrapperHandler != null) {\n           List&lt;Metadata&gt; parentMetadata = wrapperHandler.getMetadataList();\n           // ==&gt; List has size of zero here? &lt;==\n        }\n    }\n}\n</code></pre>\n<p>The <code>getMetadataList()</code> call doesn't seem to contain the parent metadata in the embedded extractor. For what it's worth, on subsequent <code>parseEmbedded</code> calls, the call to <code>getMetadataList()</code> does start populating with children metadata, so I know this is somewhat working.</p>\n"},{"tags":["java","elasticsearch","elastic-stack","elasticsearch-painless"],"comments":[{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1665125931,"post_id":73983403,"comment_id":130630545,"body_markdown":"I will suggest to do this math / calculation at indexing time and store in new seperate field and use that new field for aggregation which will fast compare to this.","body":"I will suggest to do this math / calculation at indexing time and store in new seperate field and use that new field for aggregation which will fast compare to this."},{"owner":{"account_id":12826545,"reputation":8857,"user_id":9279354,"display_name":"jaspreet chahal"},"score":0,"creation_date":1665127531,"post_id":73983403,"comment_id":130631076,"body_markdown":"can you two sample documents and your HashMap along with expected result","body":"can you two sample documents and your HashMap along with expected result"},{"owner":{"account_id":15937106,"reputation":1426,"user_id":11499971,"display_name":"Rushikesh Sabde"},"score":0,"creation_date":1665131323,"post_id":73983403,"comment_id":130632243,"body_markdown":"@SagarPatel I am not sure that the above solution will work as it not sending correct result.","body":"@SagarPatel I am not sure that the above solution will work as it not sending correct result."},{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1665132803,"post_id":73983403,"comment_id":130632786,"body_markdown":"@RushikeshSabde I am suggesting to do the calculation at index time and store output to the seperate field and used that field for aggregation.","body":"@RushikeshSabde I am suggesting to do the calculation at index time and store output to the seperate field and used that field for aggregation."},{"owner":{"account_id":12826545,"reputation":8857,"user_id":9279354,"display_name":"jaspreet chahal"},"score":0,"creation_date":1665570951,"post_id":73983403,"comment_id":130730266,"body_markdown":"@RushikeshSabde are userid unique in hashmap?","body":"@RushikeshSabde are userid unique in hashmap?"},{"owner":{"account_id":15937106,"reputation":1426,"user_id":11499971,"display_name":"Rushikesh Sabde"},"score":0,"creation_date":1665653440,"post_id":73983403,"comment_id":130752028,"body_markdown":"@jaspreetchahal Yes the userId are unique in hashmap.","body":"@jaspreetchahal Yes the userId are unique in hashmap."}],"answers":[{"tags":[],"owner":{"account_id":12826545,"reputation":8857,"user_id":9279354,"display_name":"jaspreet chahal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665653659,"creation_date":1665653659,"answer_id":74053540,"question_id":73983403,"body_markdown":"I think a simple return in your if condition will give difference per document.\r\n\r\nI have tried to simulate hashmap in my query below. Change is only to add &quot;return&quot; in if condition. Let me know If I have not understood your question correctly\r\n\r\n**Query**\r\n````\r\n{\r\n  &quot;aggs&quot;: {\r\n    &quot;NAME&quot;: {\r\n      &quot;avg&quot;: {\r\n        &quot;script&quot;: {\r\n          &quot;source&quot;: &quot;&quot;&quot;\r\n                      Map map = new HashMap();\r\n                      map.put(&quot;1&quot;,&quot;2021-01-01T00:00:00.000Z&quot;);\r\n                      map.put(&quot;2&quot;, &quot;2021-01-01T00:00:00.000Z&quot;);  \r\n                     \r\n                      for(entry in map.entrySet())\r\n                      {\r\n                        if (entry.getKey() == doc[&#39;userId.keyword&#39;].value)\r\n                        {\r\n                          return (doc[&#39;updatedAt&#39;].value.toInstant().toEpochMilli() -  ZonedDateTime.parse(entry.getValue()).toInstant().toEpochMilli())/ (1000*60*60); \r\n                        }\r\n                      }\r\n                      \r\n                      return 0;\r\n                  &quot;&quot;&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n````","title":"Elasticsearch Painless script for the average aggregation based on date difference and one of the date is from params maps","body":"<p>I think a simple return in your if condition will give difference per document.</p>\n<p>I have tried to simulate hashmap in my query below. Change is only to add &quot;return&quot; in if condition. Let me know If I have not understood your question correctly</p>\n<p><strong>Query</strong></p>\n<pre><code>{\n  &quot;aggs&quot;: {\n    &quot;NAME&quot;: {\n      &quot;avg&quot;: {\n        &quot;script&quot;: {\n          &quot;source&quot;: &quot;&quot;&quot;\n                      Map map = new HashMap();\n                      map.put(&quot;1&quot;,&quot;2021-01-01T00:00:00.000Z&quot;);\n                      map.put(&quot;2&quot;, &quot;2021-01-01T00:00:00.000Z&quot;);  \n                     \n                      for(entry in map.entrySet())\n                      {\n                        if (entry.getKey() == doc['userId.keyword'].value)\n                        {\n                          return (doc['updatedAt'].value.toInstant().toEpochMilli() -  ZonedDateTime.parse(entry.getValue()).toInstant().toEpochMilli())/ (1000*60*60); \n                        }\n                      }\n                      \n                      return 0;\n                  &quot;&quot;&quot;\n        }\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":15937106,"reputation":1426,"user_id":11499971,"display_name":"Rushikesh Sabde"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":457,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1665653659,"creation_date":1665125308,"question_id":73983403,"body_markdown":"I am trying to calculate the average aggregation based on date difference.\r\nEarlier both the date were in the same index, so tired this for the average index:\r\n\r\n        &quot;avg&quot;: {\r\n                &quot;script&quot;: {\r\n                  &quot;source&quot;: &quot;(doc[&#39;lastFixed&#39;] - doc[&#39;firstFound&#39;])/ (1000*60*60)&quot;,\r\n                  &quot;lang&quot;: &quot;expression&quot;\r\n                }\r\n              }\r\nbut now the I have the 2nd date as HashMap in java and trying to pass that as param. I have around 100 entries in the map with the id and it&#39;s date.\r\n\r\nIs there any way to iterate the HaspMap in painless script and check the Id of HashMap with the document Id and if they matches then calculate the combined average aggregation for all Ids with their dates.\r\n\r\nI am trying with this painless script :\r\n\r\n    &quot;for(entry in param.dataset.entrySet())&quot;+\r\n          &quot;{if (item.getKey() == doc[&#39;id&#39;])&quot;+\r\n          &quot;{ (doc[&#39;lastFixed&#39;] - item.getValue())/ (1000*60*60) }&quot;+\r\n      &quot;}&quot;\r\nBut I am not sure will calculate the combined aggregation for all Ids and their dates. as we are not saving or returning anything from the for loop iteration.\r\n\r\nPlease help me on this","title":"Elasticsearch Painless script for the average aggregation based on date difference and one of the date is from params maps","body":"<p>I am trying to calculate the average aggregation based on date difference.\nEarlier both the date were in the same index, so tired this for the average index:</p>\n<pre><code>    &quot;avg&quot;: {\n            &quot;script&quot;: {\n              &quot;source&quot;: &quot;(doc['lastFixed'] - doc['firstFound'])/ (1000*60*60)&quot;,\n              &quot;lang&quot;: &quot;expression&quot;\n            }\n          }\n</code></pre>\n<p>but now the I have the 2nd date as HashMap in java and trying to pass that as param. I have around 100 entries in the map with the id and it's date.</p>\n<p>Is there any way to iterate the HaspMap in painless script and check the Id of HashMap with the document Id and if they matches then calculate the combined average aggregation for all Ids with their dates.</p>\n<p>I am trying with this painless script :</p>\n<pre><code>&quot;for(entry in param.dataset.entrySet())&quot;+\n      &quot;{if (item.getKey() == doc['id'])&quot;+\n      &quot;{ (doc['lastFixed'] - item.getValue())/ (1000*60*60) }&quot;+\n  &quot;}&quot;\n</code></pre>\n<p>But I am not sure will calculate the combined aggregation for all Ids and their dates. as we are not saving or returning anything from the for loop iteration.</p>\n<p>Please help me on this</p>\n"},{"tags":["java","spring","spring-boot","gradle","intellij-idea"],"comments":[{"owner":{"display_name":"user16891224"},"score":0,"creation_date":1665646202,"post_id":74051921,"comment_id":130749713,"body_markdown":"If you are using @RequestMapping, you need to specify the method to use, such as GET, POST, PATCH etc, otherwise it will map any request.","body":"If you are using @RequestMapping, you need to specify the method to use, such as GET, POST, PATCH etc, otherwise it will map any request."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665646207,"post_id":74051921,"comment_id":130749714,"body_markdown":"`logging.level.web=debug`, please (hi &amp; welcome!&#128521;)","body":"<code>logging.level.web=debug</code>, please (hi &amp; welcome!😉)"},{"owner":{"account_id":26135806,"reputation":21,"user_id":19825816,"display_name":"terius"},"score":0,"creation_date":1665646618,"post_id":74051921,"comment_id":130749837,"body_markdown":"@MarcusCvjeticanin \nOf course, I tried that method, but it wasn&#39;t a solution to this problem, so I presented a concise code.","body":"@MarcusCvjeticanin  Of course, I tried that method, but it wasn&#39;t a solution to this problem, so I presented a concise code."},{"owner":{"account_id":26135806,"reputation":21,"user_id":19825816,"display_name":"terius"},"score":1,"creation_date":1665646802,"post_id":74051921,"comment_id":130749887,"body_markdown":"@xerx593 Thank you for welcoming me\n[classpath [static/], classpath [public/], classpath [], classpath [resources/], classpath [META-INF/resources/], classpath [META-INF/resources/webjars/]]","body":"@xerx593 Thank you for welcoming me [classpath [static/], classpath [public/], classpath [], classpath [resources/], classpath [META-INF/resources/], classpath [META-INF/resources/webjars/]]"},{"owner":{"account_id":26135806,"reputation":21,"user_id":19825816,"display_name":"terius"},"score":0,"creation_date":1665646807,"post_id":74051921,"comment_id":130749890,"body_markdown":"As a result of checking, it seems that we are looking for resources in the following path However, in my case, the file is kept in /resource/template. How do I specify this?","body":"As a result of checking, it seems that we are looking for resources in the following path However, in my case, the file is kept in /resource/template. How do I specify this?"}],"answers":[{"tags":[],"owner":{"account_id":26564177,"reputation":36,"user_id":20191548,"display_name":"AbhishekVinayak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665646200,"creation_date":1665646200,"answer_id":74051982,"question_id":74051921,"body_markdown":"Try giving this it works:\r\n\r\n    @Slf4j\r\n    @Controller\r\n    public class HomeController {\r\n        @GetMapping(&quot;&quot;)\r\n        public String index(){\r\n            return &quot;index&quot;;\r\n        }\r\n    }","title":"@RequestMapping(&quot;/&quot;) from Spring Boot Returns 404 pages only","body":"<p>Try giving this it works:</p>\n<pre><code>@Slf4j\n@Controller\npublic class HomeController {\n    @GetMapping(&quot;&quot;)\n    public String index(){\n        return &quot;index&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665648305,"creation_date":1665646739,"answer_id":74052081,"question_id":74051921,"body_markdown":"**You can try with the below approaches:**\r\n\r\n***1) Use @Controller along with @ResponseBody***\r\n\r\n`@Controller` is used to mark classes as Spring MVC Controller.If you use only `@Controller` , you have to specify the `@ResponseBody` as well in each API methods.\r\n\r\n    @Controller\r\n    @Slf4j\r\n    public class HomeController {\r\n    \r\n      @RequestMapping(&quot;/&quot;)\r\n      @ResponseBody\r\n      public String index() {\r\n        return &quot;index&quot;;\r\n      }\r\n    \r\n      @RequestMapping(&quot;/anything&quot;)\r\n      @ResponseBody\r\n      public String index2() {\r\n        return &quot;index&quot;;\r\n      }\r\n    \r\n    }\r\n\r\n**Output:** The above code will return the &quot;index&quot; string as a response of this API.\r\n\r\nIf you want to show index.html page, then you have to modify your code as below and **please note your index.html should be placed in resources/static folder**.\r\n\r\n    @RequestMapping(&quot;/&quot;)\r\n    @ResponseBody\r\n      public ModelAndView index() {\r\n        return new ModelAndView(&quot;index.html&quot;);\r\n      }\r\n\r\n**Output:** This will redirect you to index.html page.\r\n\r\n ***2) Use @RestController*** \r\n\r\n`@RestController` annotation is a special controller used in RESTful Web services, and it&#39;s the combination of @Controller and @ResponseBody annotation. It is a specialised version of @Component annotation.\r\n\r\n    @RestController\r\n    @Slf4j\r\n    public class HomeController {\r\n    \r\n      @RequestMapping(&quot;/&quot;)\r\n      public String index() {\r\n        return &quot;index&quot;;\r\n      }\r\n    \r\n      @RequestMapping(&quot;/anything&quot;)\r\n      public String index2() {\r\n        return &quot;index&quot;;\r\n      }\r\n    }\r\n\r\n**Output:** The above code will return the &quot;index&quot; string as a response of this API.\r\n\r\nIf you want to show index.html page, then you have to modify your code as below and **please note your index.html should be placed in resources/static folder**.\r\n\r\n    @RequestMapping(&quot;/&quot;)\r\n      public ModelAndView index() {\r\n        return new ModelAndView(&quot;index.html&quot;);\r\n      }\r\n\r\n**Output:** This will redirect you to index.html page.","title":"@RequestMapping(&quot;/&quot;) from Spring Boot Returns 404 pages only","body":"<p><strong>You can try with the below approaches:</strong></p>\n<p><em><strong>1) Use @Controller along with @ResponseBody</strong></em></p>\n<p><code>@Controller</code> is used to mark classes as Spring MVC Controller.If you use only <code>@Controller</code> , you have to specify the <code>@ResponseBody</code> as well in each API methods.</p>\n<pre><code>@Controller\n@Slf4j\npublic class HomeController {\n\n  @RequestMapping(&quot;/&quot;)\n  @ResponseBody\n  public String index() {\n    return &quot;index&quot;;\n  }\n\n  @RequestMapping(&quot;/anything&quot;)\n  @ResponseBody\n  public String index2() {\n    return &quot;index&quot;;\n  }\n\n}\n</code></pre>\n<p><strong>Output:</strong> The above code will return the &quot;index&quot; string as a response of this API.</p>\n<p>If you want to show index.html page, then you have to modify your code as below and <strong>please note your index.html should be placed in resources/static folder</strong>.</p>\n<pre><code>@RequestMapping(&quot;/&quot;)\n@ResponseBody\n  public ModelAndView index() {\n    return new ModelAndView(&quot;index.html&quot;);\n  }\n</code></pre>\n<p><strong>Output:</strong> This will redirect you to index.html page.</p>\n<p><em><strong>2) Use @RestController</strong></em></p>\n<p><code>@RestController</code> annotation is a special controller used in RESTful Web services, and it's the combination of @Controller and @ResponseBody annotation. It is a specialised version of @Component annotation.</p>\n<pre><code>@RestController\n@Slf4j\npublic class HomeController {\n\n  @RequestMapping(&quot;/&quot;)\n  public String index() {\n    return &quot;index&quot;;\n  }\n\n  @RequestMapping(&quot;/anything&quot;)\n  public String index2() {\n    return &quot;index&quot;;\n  }\n}\n</code></pre>\n<p><strong>Output:</strong> The above code will return the &quot;index&quot; string as a response of this API.</p>\n<p>If you want to show index.html page, then you have to modify your code as below and <strong>please note your index.html should be placed in resources/static folder</strong>.</p>\n<pre><code>@RequestMapping(&quot;/&quot;)\n  public ModelAndView index() {\n    return new ModelAndView(&quot;index.html&quot;);\n  }\n</code></pre>\n<p><strong>Output:</strong> This will redirect you to index.html page.</p>\n"},{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665653491,"creation_date":1665647794,"answer_id":74052259,"question_id":74051921,"body_markdown":"### Problem:\r\n\r\nNot sure/cannot reporoduce!\r\n\r\nTo achieve: serving `templates/index.html` from a request to `&lt;context_root&gt;/` in a &quot;default [spring-starter-web-thymeleaf][1]&quot;\r\n\r\n### Solution:\r\n\r\n1. Delete this controller (if it doesn&#39;t anything than returning the view)\r\n2. Place a (thymeleaf) view at `&lt;project_root&gt;/src/main/resources/templates/index.html` (e.g.:\r\n   ```lang-html\r\n    &lt;!DOCTYPE HTML&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt; \r\n        &lt;title&gt;Hello&lt;/title&gt; \r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n        &lt;p&gt;Hello, [[${param.name}?:&#39;Dear&#39;]]!&lt;/p&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n   ```\r\n3. Issuing &lt;a href=&quot;http://localhost:8080/&quot;&gt;http://localhost:8080/&lt;/a&gt; will give us:\r\n   \r\n   [![success screenshot][2]][2]\r\n   \r\n### When Controller *does* some additional BL\r\n\r\nI could work around like:\r\n```lang-java\r\n@Controller ... class ... { // @RestController returns rather a &quot;response body&quot; than the &quot;view name&quot;.\r\n  @RequestMapping(&quot;/&quot;/*, add more here!?*/) // !\r\n  public String index(/*...*/){\r\n    // do something useful..., then:\r\n    return &quot;index&quot;;\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.7.4&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=web,thymeleaf\r\n \r\n  [2]: https://i.stack.imgur.com/jZSvp.jpg","title":"@RequestMapping(&quot;/&quot;) from Spring Boot Returns 404 pages only","body":"<h3>Problem:</h3>\n<p>Not sure/cannot reporoduce!</p>\n<p>To achieve: serving <code>templates/index.html</code> from a request to <code>&lt;context_root&gt;/</code> in a &quot;default <a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.7.4&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=web,thymeleaf\" rel=\"nofollow noreferrer\">spring-starter-web-thymeleaf</a>&quot;</p>\n<h3>Solution:</h3>\n<ol>\n<li><p>Delete this controller (if it doesn't anything than returning the view)</p>\n</li>\n<li><p>Place a (thymeleaf) view at <code>&lt;project_root&gt;/src/main/resources/templates/index.html</code> (e.g.:</p>\n<pre class=\"lang-html prettyprint-override\"><code> &lt;!DOCTYPE HTML&gt;\n &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n &lt;head&gt; \n     &lt;title&gt;Hello&lt;/title&gt; \n     &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n &lt;/head&gt;\n &lt;body&gt;\n     &lt;p&gt;Hello, [[${param.name}?:'Dear']]!&lt;/p&gt;\n &lt;/body&gt;\n &lt;/html&gt;\n</code></pre>\n</li>\n<li><p>Issuing <a href=\"http://localhost:8080/\" rel=\"nofollow noreferrer\">http://localhost:8080/</a> will give us:</p>\n<p><a href=\"https://i.stack.imgur.com/jZSvp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jZSvp.jpg\" alt=\"success screenshot\" /></a></p>\n</li>\n</ol>\n<h3>When Controller <em>does</em> some additional BL</h3>\n<p>I could work around like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller ... class ... { // @RestController returns rather a &quot;response body&quot; than the &quot;view name&quot;.\n  @RequestMapping(&quot;/&quot;/*, add more here!?*/) // !\n  public String index(/*...*/){\n    // do something useful..., then:\n    return &quot;index&quot;;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26135806,"reputation":21,"user_id":19825816,"display_name":"terius"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665648958,"creation_date":1665648958,"answer_id":74052504,"question_id":74051921,"body_markdown":"everyone. Thank you for answering my question.\r\n\r\nbut it didn&#39;t have solve on me.\r\n\r\nInstead, we will solve it in another way and share it with you.\r\n\r\n\r\nThe first word of @xerx593,\r\nI got a hint from telling me to set the logging level to debug.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    2022-10-13 16:54:01.710 DEBUG 79836 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/&quot;, parameters={}\r\n    2022-10-13 16:54:01.712 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view=&quot;forward:/index&quot;]\r\n    2022-10-13 16:54:01.724 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected &#39;text/html&#39; given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, application/signed-exchange;v=b3;q=0.9, */*;q=0.8]\r\n    2022-10-13 16:54:01.724 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.servlet.view.InternalResourceView  : View name &#39;forward:&#39;, model {}\r\n    2022-10-13 16:54:01.725 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.servlet.view.InternalResourceView  : Forwarding to [/index]\r\n    2022-10-13 16:54:01.728 DEBUG 79836 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : &quot;FORWARD&quot; dispatch for GET &quot;/index&quot;, parameters={}\r\n    2022-10-13 16:54:01.734 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/], classpath [public/], classpath [], classpath [resources/], classpath [META-INF/resources/], classpath [META-INF/resources/webjars/]]\r\n    2022-10-13 16:54:01.736 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\r\n    2022-10-13 16:54:01.736 DEBUG 79836 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;FORWARD&quot; dispatch, status 404\r\n    2022-10-13 16:54:01.740 DEBUG 79836 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n(Imports logs into snippet for viewing.)\r\n\r\nIf you check the log and approach &quot;/&quot;, you are forwarding it to &quot;/index&quot;.\r\n\r\nSo I changed the code to receive &quot;/index&quot; and process it.\r\n\r\n------------------\r\n\r\n    @Slf4j\r\n    @Controller\r\n    public class HomeController {\r\n        @RequestMapping(&quot;/index&quot;)\r\n        public String index(){\r\n            return &quot;index&quot;;\r\n        }\r\n    }\r\n\r\n--------------------\r\n\r\nIt works for me.\r\n\r\nThank you.\r\n","title":"@RequestMapping(&quot;/&quot;) from Spring Boot Returns 404 pages only","body":"<p>everyone. Thank you for answering my question.</p>\n<p>but it didn't have solve on me.</p>\n<p>Instead, we will solve it in another way and share it with you.</p>\n<p>The first word of @xerx593,\nI got a hint from telling me to set the logging level to debug.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>2022-10-13 16:54:01.710 DEBUG 79836 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET \"/\", parameters={}\n2022-10-13 16:54:01.712 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view=\"forward:/index\"]\n2022-10-13 16:54:01.724 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, application/signed-exchange;v=b3;q=0.9, */*;q=0.8]\n2022-10-13 16:54:01.724 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.servlet.view.InternalResourceView  : View name 'forward:', model {}\n2022-10-13 16:54:01.725 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.servlet.view.InternalResourceView  : Forwarding to [/index]\n2022-10-13 16:54:01.728 DEBUG 79836 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : \"FORWARD\" dispatch for GET \"/index\", parameters={}\n2022-10-13 16:54:01.734 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [static/], classpath [public/], classpath [], classpath [resources/], classpath [META-INF/resources/], classpath [META-INF/resources/webjars/]]\n2022-10-13 16:54:01.736 DEBUG 79836 --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\n2022-10-13 16:54:01.736 DEBUG 79836 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from \"FORWARD\" dispatch, status 404\n2022-10-13 16:54:01.740 DEBUG 79836 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>(Imports logs into snippet for viewing.)</p>\n<p>If you check the log and approach &quot;/&quot;, you are forwarding it to &quot;/index&quot;.</p>\n<p>So I changed the code to receive &quot;/index&quot; and process it.</p>\n<hr />\n<pre><code>@Slf4j\n@Controller\npublic class HomeController {\n    @RequestMapping(&quot;/index&quot;)\n    public String index(){\n        return &quot;index&quot;;\n    }\n}\n</code></pre>\n<hr />\n<p>It works for me.</p>\n<p>Thank you.</p>\n"}],"owner":{"account_id":26135806,"reputation":21,"user_id":19825816,"display_name":"terius"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":956,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1665653491,"creation_date":1665645911,"question_id":74051921,"body_markdown":"In spring boot, there is no problem in any URL, such as localhost:8080/anything, but only in the default URL, such as localhost:8080/ or localhost:8080.\r\n\r\nIDE is currently using Intellij.\r\n\r\n\r\nThis is not being done.\r\nI tried to grab a breakpoint to try debugging, but I didn&#39;t run that method in the first place\r\n\r\nDuring debugging, it was confirmed whether a bean was generated or not, but it was confirmed that a bean was generated without problem.\r\n\r\n---------------------------------\r\nThis is not being done.\r\nI tried to grab a breakpoint to try debugging, but I didn&#39;t run that method in the first place\r\n    \r\nDuring debugging, it was confirmed whether a bean was generated or not, but it was confirmed that a bean was generated without problem.\r\n\r\n\r\n    @Slf4j\r\n    @Controller\r\n    public class HomeController {\r\n        @RequestMapping(&quot;/&quot;)\r\n        public String index(){\r\n            return &quot;index&quot;;\r\n        }\r\n    }\r\n\r\n-------------------\r\nIt works normally.\r\nWhatever URI is set, it works fine.\r\n\r\n    @Slf4j\r\n        @Controller\r\n        public class HomeController {\r\n            @RequestMapping(&quot;/anyting&quot;)\r\n            public String index(){\r\n                return &quot;index&quot;;\r\n            }\r\n        }\r\n-------------------------------------\r\nMy sauce is as follows What should I check?\r\n\r\n\r\n\r\nThank you in advance for your help.","title":"@RequestMapping(&quot;/&quot;) from Spring Boot Returns 404 pages only","body":"<p>In spring boot, there is no problem in any URL, such as localhost:8080/anything, but only in the default URL, such as localhost:8080/ or localhost:8080.</p>\n<p>IDE is currently using Intellij.</p>\n<p>This is not being done.\nI tried to grab a breakpoint to try debugging, but I didn't run that method in the first place</p>\n<p>During debugging, it was confirmed whether a bean was generated or not, but it was confirmed that a bean was generated without problem.</p>\n<hr />\n<p>This is not being done.\nI tried to grab a breakpoint to try debugging, but I didn't run that method in the first place</p>\n<p>During debugging, it was confirmed whether a bean was generated or not, but it was confirmed that a bean was generated without problem.</p>\n<pre><code>@Slf4j\n@Controller\npublic class HomeController {\n    @RequestMapping(&quot;/&quot;)\n    public String index(){\n        return &quot;index&quot;;\n    }\n}\n</code></pre>\n<hr />\n<p>It works normally.\nWhatever URI is set, it works fine.</p>\n<pre><code>@Slf4j\n    @Controller\n    public class HomeController {\n        @RequestMapping(&quot;/anyting&quot;)\n        public String index(){\n            return &quot;index&quot;;\n        }\n    }\n</code></pre>\n<hr />\n<p>My sauce is as follows What should I check?</p>\n<p>Thank you in advance for your help.</p>\n"},{"tags":["java","list","collections","hashmap"],"comments":[{"owner":{"account_id":18925477,"reputation":13,"user_id":13808706,"display_name":"Mateusz"},"score":0,"creation_date":1665496941,"post_id":74028897,"comment_id":130711116,"body_markdown":"Code and description added into the question","body":"Code and description added into the question"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1665497193,"post_id":74028897,"comment_id":130711224,"body_markdown":"So, didn&#39;t try to implement the transformation `List&lt;Map&lt;String, Object&gt;&gt;` → `Map&lt;String, List&lt;Object&gt;&gt;` yourself? If you did share this code as well.","body":"So, didn&#39;t try to implement the transformation <code>List&lt;Map&lt;String, Object&gt;&gt;</code> → <code>Map&lt;String, List&lt;Object&gt;&gt;</code> yourself? If you did share this code as well."},{"owner":{"account_id":18925477,"reputation":13,"user_id":13808706,"display_name":"Mateusz"},"score":0,"creation_date":1665498387,"post_id":74028897,"comment_id":130711739,"body_markdown":"Of course I tried, but I failed.","body":"Of course I tried, but I failed."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1665498488,"post_id":74028897,"comment_id":130711781,"body_markdown":"Ok, failure is a part of a process, if you had a satisfactory solution there would be a question, right? Attempt always bring value to the question, and every question on SO is expected to demonstrate a research effort (see [*How do I ask a good question?*](https://stackoverflow.com/help/how-to-ask)). Every questioner is encouraged to share their attempt, it not a recommendation, but rather a requirement.","body":"Ok, failure is a part of a process, if you had a satisfactory solution there would be a question, right? Attempt always bring value to the question, and every question on SO is expected to demonstrate a research effort (see <a href=\"https://stackoverflow.com/help/how-to-ask\"><i>How do I ask a good question?</i></a>). Every questioner is encouraged to share their attempt, it not a recommendation, but rather a requirement."},{"owner":{"account_id":18925477,"reputation":13,"user_id":13808706,"display_name":"Mateusz"},"score":0,"creation_date":1665499460,"post_id":74028897,"comment_id":130712211,"body_markdown":"Okay, got it. I admit that I have not read it so far. Thank you. As for my question, I would like to know if what I want to do is possible at all and if my search for a solution makes sense. I tried the foreach loop, I tried to substitute MultiValuedMap for Map, but that also did not give a satisfactory result.","body":"Okay, got it. I admit that I have not read it so far. Thank you. As for my question, I would like to know if what I want to do is possible at all and if my search for a solution makes sense. I tried the foreach loop, I tried to substitute MultiValuedMap for Map, but that also did not give a satisfactory result."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1665499708,"post_id":74028897,"comment_id":130712323,"body_markdown":"Sure, it&#39;s doable, even without multimap using standard JDK Collections. Consider improving the question by sharing one of your attempts.","body":"Sure, it&#39;s doable, even without multimap using standard JDK Collections. Consider improving the question by sharing one of your attempts."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1665501838,"post_id":74028897,"comment_id":130713047,"body_markdown":"Although, I posted the solution. You&#39;re still advised to improve your question.","body":"Although, I posted the solution. You&#39;re still advised to improve your question."}],"answers":[{"tags":[],"owner":{"account_id":9163275,"reputation":695,"user_id":6813906,"display_name":"Jeferson Macedo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665502152,"creation_date":1665501414,"answer_id":74030405,"question_id":74028897,"body_markdown":"Its possible to do so using Collectors.toMap to convert the List to Map\r\n, Here a small exemple to how to do it.\r\n\r\n\r\n    package org.example;\r\n    \r\n    import java.util.*;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            ArrayList&lt;Map&lt;String, Object &gt;&gt; list =  new ArrayList &lt;Map &lt;String, Object &gt;&gt;(){{ // just to simulate the result\r\n                for(int i = 0; i &lt; 10; i++){\r\n                    final Integer finalI = i + 1;\r\n                    final Integer simulateID = (finalI % 3) + 1;\r\n    \r\n                    add(new HashMap&lt;String, Object&gt;(){{\r\n                        Calendar cal = Calendar.getInstance();\r\n                        cal.add(Calendar.DAY_OF_MONTH, finalI);\r\n                        put(&quot;userid&quot;, simulateID.toString() );\r\n                        put(&quot;date&quot;, cal.getTime());\r\n                    }});\r\n                }\r\n            }};\r\n    \r\n            Map&lt;String, ArrayList&lt;Object&gt;&gt; map = list\r\n            .stream()\r\n            .collect(\r\n                Collectors.toMap(\r\n                        e -&gt; (String) e.get(&quot;userid&quot;),\r\n                        e -&gt; new ArrayList&lt;Object&gt;(){{ add(e.get(&quot;date&quot;)); }},\r\n                        (v1, v2) -&gt; {\r\n                            v1.addAll(v2);\r\n                            return v1;\r\n                        }\r\n                )\r\n            );\r\n    \r\n            System.out.println(map);\r\n        }\r\n    }\r\n\r\n\r\nBut before using something like that maybe is better take a look in this article to see if it fit to your needs \r\nhttps://arnaudroger.github.io/blog/2017/06/13/jdbc-template-one-to-many.html","title":"How to transform a List&lt;Map&lt;String, Object&gt;&gt; into Map&lt;String, List&lt;Object&gt;&gt; using Java 8","body":"<p>Its possible to do so using Collectors.toMap to convert the List to Map\n, Here a small exemple to how to do it.</p>\n<pre><code>package org.example;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\n\npublic class App \n{\n    public static void main( String[] args )\n    {\n        ArrayList&lt;Map&lt;String, Object &gt;&gt; list =  new ArrayList &lt;Map &lt;String, Object &gt;&gt;(){{ // just to simulate the result\n            for(int i = 0; i &lt; 10; i++){\n                final Integer finalI = i + 1;\n                final Integer simulateID = (finalI % 3) + 1;\n\n                add(new HashMap&lt;String, Object&gt;(){{\n                    Calendar cal = Calendar.getInstance();\n                    cal.add(Calendar.DAY_OF_MONTH, finalI);\n                    put(&quot;userid&quot;, simulateID.toString() );\n                    put(&quot;date&quot;, cal.getTime());\n                }});\n            }\n        }};\n\n        Map&lt;String, ArrayList&lt;Object&gt;&gt; map = list\n        .stream()\n        .collect(\n            Collectors.toMap(\n                    e -&gt; (String) e.get(&quot;userid&quot;),\n                    e -&gt; new ArrayList&lt;Object&gt;(){{ add(e.get(&quot;date&quot;)); }},\n                    (v1, v2) -&gt; {\n                        v1.addAll(v2);\n                        return v1;\n                    }\n            )\n        );\n\n        System.out.println(map);\n    }\n}\n</code></pre>\n<p>But before using something like that maybe is better take a look in this article to see if it fit to your needs\n<a href=\"https://arnaudroger.github.io/blog/2017/06/13/jdbc-template-one-to-many.html\" rel=\"nofollow noreferrer\">https://arnaudroger.github.io/blog/2017/06/13/jdbc-template-one-to-many.html</a></p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665501684,"creation_date":1665501684,"answer_id":74030473,"question_id":74028897,"body_markdown":"# Plain for-loop\r\n\r\nYou can group *entries* having identical *keys* using Java 8 method [`computeIfAbsent()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)):\r\n\r\n```\r\nList&lt;Map&lt;String, Object&gt;&gt; listOfMaps = // initilizing the list\r\n\r\nMap&lt;String, List&lt;Object&gt;&gt; result = new HashMap&lt;&gt;();\r\n\r\nfor (Map&lt;String, Object&gt; map: listOfMaps) {\r\n    for (Map.Entry&lt;String, Object&gt; entry: map.entrySet()) {\r\n        result\r\n            .computeIfAbsent(entry.getKey(), k -&gt; new ArrayList&lt;&gt;())\r\n            .add(entry.getValue());\r\n    }\r\n}\r\n```\r\n\r\nIf you don&#39;t feel comfortable with Java 8 features than you can replace `computeIfAbsent()` with the lines shown below (note that used of `computeIfAbsent()` is preferred over `putIfAbsent()` because function would be evaluated lazily, meanwhile `putIfAbsent()` would create a new empty List with every call):\r\n\r\n```\r\nresult.putIfAbsent(entry.getKey(), new ArrayList&lt;&gt;());\r\nresult.get(entry.getKey()).add(entry.getValue());\r\n```\r\n\r\n# Stream API\r\n\r\nYou can address this problem using Stream API:\r\n\r\n* Flatten the *entries* of each Map using `flatMap()` operation;\r\n\r\n* Group the *entries* having the same *key* using collector `groupingBy()` and apply the combination of collectors `mapping()` and `toList()` as a downstream.\r\n\r\nThat&#39;s how it might look like:\r\n\r\n```\r\nList&lt;Map&lt;String, Object&gt;&gt; listOfMaps = // initilizing the list\r\n\r\nMap&lt;String, List&lt;Object&gt;&gt; result = listOfMaps.stream()\r\n    .flatMap(map -&gt; map.entrySet().stream())\r\n    .collect(Collectors.groupingBy(\r\n        Map.Entry::getKey,\r\n        Collectors.mapping(Map.Entry::getValue,\r\n            Collectors.toList())\r\n    ));\r\n```","title":"How to transform a List&lt;Map&lt;String, Object&gt;&gt; into Map&lt;String, List&lt;Object&gt;&gt; using Java 8","body":"<h1>Plain for-loop</h1>\n<p>You can group <em>entries</em> having identical <em>keys</em> using Java 8 method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#computeIfAbsent(K,java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>computeIfAbsent()</code></a>:</p>\n<pre><code>List&lt;Map&lt;String, Object&gt;&gt; listOfMaps = // initilizing the list\n\nMap&lt;String, List&lt;Object&gt;&gt; result = new HashMap&lt;&gt;();\n\nfor (Map&lt;String, Object&gt; map: listOfMaps) {\n    for (Map.Entry&lt;String, Object&gt; entry: map.entrySet()) {\n        result\n            .computeIfAbsent(entry.getKey(), k -&gt; new ArrayList&lt;&gt;())\n            .add(entry.getValue());\n    }\n}\n</code></pre>\n<p>If you don't feel comfortable with Java 8 features than you can replace <code>computeIfAbsent()</code> with the lines shown below (note that used of <code>computeIfAbsent()</code> is preferred over <code>putIfAbsent()</code> because function would be evaluated lazily, meanwhile <code>putIfAbsent()</code> would create a new empty List with every call):</p>\n<pre><code>result.putIfAbsent(entry.getKey(), new ArrayList&lt;&gt;());\nresult.get(entry.getKey()).add(entry.getValue());\n</code></pre>\n<h1>Stream API</h1>\n<p>You can address this problem using Stream API:</p>\n<ul>\n<li><p>Flatten the <em>entries</em> of each Map using <code>flatMap()</code> operation;</p>\n</li>\n<li><p>Group the <em>entries</em> having the same <em>key</em> using collector <code>groupingBy()</code> and apply the combination of collectors <code>mapping()</code> and <code>toList()</code> as a downstream.</p>\n</li>\n</ul>\n<p>That's how it might look like:</p>\n<pre><code>List&lt;Map&lt;String, Object&gt;&gt; listOfMaps = // initilizing the list\n\nMap&lt;String, List&lt;Object&gt;&gt; result = listOfMaps.stream()\n    .flatMap(map -&gt; map.entrySet().stream())\n    .collect(Collectors.groupingBy(\n        Map.Entry::getKey,\n        Collectors.mapping(Map.Entry::getValue,\n            Collectors.toList())\n    ));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665504188,"creation_date":1665504188,"answer_id":74031027,"question_id":74028897,"body_markdown":"**Plain Java**\r\n\r\n```java\r\npublic static &lt;T&gt; Map&lt;String, List&lt;T&gt;&gt; convert(List&lt;Map&lt;String, T&gt;&gt; items) {\r\n    Map&lt;String, List&lt;T&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\n    for (Map&lt;String, T&gt; item : items)\r\n        for (Map.Entry&lt;String, T&gt; entry : item.entrySet())\r\n            map.computeIfAbsent(entry.getKey(), key -&gt; new ArrayList&lt;&gt;()).add(entry.getValue());\r\n\r\n    return map;\r\n}\r\n```\r\n\r\n**Stream**\r\n```java\r\npublic static &lt;T&gt; Map&lt;String, List&lt;T&gt;&gt; convert(List&lt;Map&lt;String, T&gt;&gt; items) {\r\n    return items.stream()\r\n                .flatMap(item -&gt; item.entrySet().stream())\r\n                .collect(Collectors.groupingBy(Map.Entry::getKey,\r\n                                               Collectors.mapping(Map.Entry::getValue,\r\n                                                                  Collectors.toList())));\r\n}\r\n```\r\n","title":"How to transform a List&lt;Map&lt;String, Object&gt;&gt; into Map&lt;String, List&lt;Object&gt;&gt; using Java 8","body":"<p><strong>Plain Java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Map&lt;String, List&lt;T&gt;&gt; convert(List&lt;Map&lt;String, T&gt;&gt; items) {\n    Map&lt;String, List&lt;T&gt;&gt; map = new HashMap&lt;&gt;();\n\n    for (Map&lt;String, T&gt; item : items)\n        for (Map.Entry&lt;String, T&gt; entry : item.entrySet())\n            map.computeIfAbsent(entry.getKey(), key -&gt; new ArrayList&lt;&gt;()).add(entry.getValue());\n\n    return map;\n}\n</code></pre>\n<p><strong>Stream</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Map&lt;String, List&lt;T&gt;&gt; convert(List&lt;Map&lt;String, T&gt;&gt; items) {\n    return items.stream()\n                .flatMap(item -&gt; item.entrySet().stream())\n                .collect(Collectors.groupingBy(Map.Entry::getKey,\n                                               Collectors.mapping(Map.Entry::getValue,\n                                                                  Collectors.toList())));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18925477,"reputation":13,"user_id":13808706,"display_name":"Mateusz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665653464,"creation_date":1665653464,"answer_id":74053499,"question_id":74028897,"body_markdown":"It turned out that I needed to change the database query and the return type. This solved the problem and there was no need to change the structure. The link https://arnaudroger.github.io/blog/2017/06/13/jdbc-template-one-to-many.html turned out to be very helpful.\r\n\r\nThank you for all the hints, they will definitely be useful in the future.","title":"How to transform a List&lt;Map&lt;String, Object&gt;&gt; into Map&lt;String, List&lt;Object&gt;&gt; using Java 8","body":"<p>It turned out that I needed to change the database query and the return type. This solved the problem and there was no need to change the structure. The link <a href=\"https://arnaudroger.github.io/blog/2017/06/13/jdbc-template-one-to-many.html\" rel=\"nofollow noreferrer\">https://arnaudroger.github.io/blog/2017/06/13/jdbc-template-one-to-many.html</a> turned out to be very helpful.</p>\n<p>Thank you for all the hints, they will definitely be useful in the future.</p>\n"}],"owner":{"account_id":18925477,"reputation":13,"user_id":13808706,"display_name":"Mateusz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1028,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74030405,"answer_count":4,"score":0,"last_activity_date":1665653464,"creation_date":1665494735,"question_id":74028897,"body_markdown":"I have a list with a map inside and I need to turn it into a map with a list inside.\r\n\r\nI have a `List &lt;Map &lt;String, Object &gt;&gt;` \r\nand I need to change it to\r\n`Map&lt;String, List &lt;Object&lt;Object&gt;&gt;&gt;`.\r\n\r\n, of course, by passing the data contained in it, matching the keys to the values\r\n\r\nThere are objects of the Date class in the Object class, this structure was used because it is the result returned by jdbcTemplate.\r\nNow I need to change that to have a date list for each unique String key.\r\n\r\nI have a method that takes two columns from a database\r\nand returns `List&lt;Map&lt;String, Object &gt;&gt;`. One column is the username and the second column is the dates on which he was on vacation. I need a data structure that will allow me to match the key (`userId`) with a list of his vacation dates.\r\n\r\n\tpublic List&lt;Map&lt;String, Object&gt;&gt; getHoliday(String teamLeaderId) {\r\n        String query = &quot;SELECT  H.userid, date FROM Holiday H INNER JOIN Contact C on H.userid = C.UserId INNER JOIN Team T on C.TeamId = T.team_id WHERE team_leader = ? AND isApproved = 0&quot;;\r\n        return this.getJdbcTemplate().queryForList(query, teamLeaderId);\r\n    }\r\n\r\nI&#39;m using Java 8.\r\n\r\nIs it possible to do?","title":"How to transform a List&lt;Map&lt;String, Object&gt;&gt; into Map&lt;String, List&lt;Object&gt;&gt; using Java 8","body":"<p>I have a list with a map inside and I need to turn it into a map with a list inside.</p>\n<p>I have a <code>List &lt;Map &lt;String, Object &gt;&gt;</code>\nand I need to change it to\n<code>Map&lt;String, List &lt;Object&lt;Object&gt;&gt;&gt;</code>.</p>\n<p>, of course, by passing the data contained in it, matching the keys to the values</p>\n<p>There are objects of the Date class in the Object class, this structure was used because it is the result returned by jdbcTemplate.\nNow I need to change that to have a date list for each unique String key.</p>\n<p>I have a method that takes two columns from a database\nand returns <code>List&lt;Map&lt;String, Object &gt;&gt;</code>. One column is the username and the second column is the dates on which he was on vacation. I need a data structure that will allow me to match the key (<code>userId</code>) with a list of his vacation dates.</p>\n<pre><code>public List&lt;Map&lt;String, Object&gt;&gt; getHoliday(String teamLeaderId) {\n    String query = &quot;SELECT  H.userid, date FROM Holiday H INNER JOIN Contact C on H.userid = C.UserId INNER JOIN Team T on C.TeamId = T.team_id WHERE team_leader = ? AND isApproved = 0&quot;;\n    return this.getJdbcTemplate().queryForList(query, teamLeaderId);\n}\n</code></pre>\n<p>I'm using Java 8.</p>\n<p>Is it possible to do?</p>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1665653089,"creation_date":1665653089,"answer_id":74053404,"question_id":74053257,"body_markdown":"Select &#39;Edit&#39; -&gt; &#39;Find&#39;-&gt;&#39;Replace in Files&#39; &amp; then under first search box use &quot;import com.company.myapi&quot; &amp; second search box would be &quot;import com.functions.exc.myapi&quot;.\r\n\r\n\r\nUse file mask as *.java &amp; select `In Project` option for replacement.\r\n\r\nHope this works for you.","title":"How to change namespace of import in all files in project in Intellij IDEA","body":"<p>Select 'Edit' -&gt; 'Find'-&gt;'Replace in Files' &amp; then under first search box use &quot;import com.company.myapi&quot; &amp; second search box would be &quot;import com.functions.exc.myapi&quot;.</p>\n<p>Use file mask as *.java &amp; select <code>In Project</code> option for replacement.</p>\n<p>Hope this works for you.</p>\n"}],"owner":{"account_id":26609370,"reputation":23,"user_id":20229763,"display_name":"John Lincoln"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74053404,"answer_count":1,"score":2,"last_activity_date":1665653097,"creation_date":1665652380,"question_id":74053257,"body_markdown":"I need to change the namespace in all files in my project. In instance, from &quot;import com.company.myapi&quot; to &quot;import com.functions.exc.myapi&quot;\r\nI don&#39;t have library in which com.functions.exc.myapi is situated,since I need to change manually. How can I speed up the process?","title":"How to change namespace of import in all files in project in Intellij IDEA","body":"<p>I need to change the namespace in all files in my project. In instance, from &quot;import com.company.myapi&quot; to &quot;import com.functions.exc.myapi&quot;\nI don't have library in which com.functions.exc.myapi is situated,since I need to change manually. How can I speed up the process?</p>\n"},{"tags":["java","substring","text-extraction"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1665649893,"post_id":74052680,"comment_id":130750854,"body_markdown":"I think that String::replace would be better/easier","body":"I think that String::replace would be better/easier"},{"owner":{"account_id":12296841,"reputation":543,"user_id":8972207,"accept_rate":38,"display_name":"DarknessPlusPlus"},"score":0,"creation_date":1665650013,"post_id":74052680,"comment_id":130750876,"body_markdown":"I am unaware of any language that can convert a number represented in text (as in &#39;FOUR&#39;) to its numerical value (as in 4). You might want to use some sort of mapping where one =&gt; 1, two =&gt;2, etc.","body":"I am unaware of any language that can convert a number represented in text (as in &#39;FOUR&#39;) to its numerical value (as in 4). You might want to use some sort of mapping where one =&gt; 1, two =&gt;2, etc."},{"owner":{"account_id":3466983,"reputation":8589,"user_id":3800782,"accept_rate":77,"display_name":"rghome"},"score":0,"creation_date":1665650177,"post_id":74052680,"comment_id":130750929,"body_markdown":"String replace fires up the whole regular expression engine, so for me, substring is much faster and simpler. You could run into trouble with replace if there were non-alphabetic characters in the first part of the string.","body":"String replace fires up the whole regular expression engine, so for me, substring is much faster and simpler. You could run into trouble with replace if there were non-alphabetic characters in the first part of the string."},{"owner":{"account_id":3466983,"reputation":8589,"user_id":3800782,"accept_rate":77,"display_name":"rghome"},"score":0,"creation_date":1665650253,"post_id":74052680,"comment_id":130750951,"body_markdown":"Also, for converting words to numbers, see: https://stackoverflow.com/questions/3911966/how-to-convert-number-to-words-in-java","body":"Also, for converting words to numbers, see: <a href=\"https://stackoverflow.com/questions/3911966/how-to-convert-number-to-words-in-java\" title=\"how to convert number to words in java\">stackoverflow.com/questions/3911966/&hellip;</a>"},{"owner":{"account_id":3466983,"reputation":8589,"user_id":3800782,"accept_rate":77,"display_name":"rghome"},"score":0,"creation_date":1665650305,"post_id":74052680,"comment_id":130750969,"body_markdown":"Does this answer your question? [How to convert number to words in java](https://stackoverflow.com/questions/3911966/how-to-convert-number-to-words-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/3911966/how-to-convert-number-to-words-in-java\">How to convert number to words in java</a>"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665651094,"creation_date":1665650342,"answer_id":74052810,"question_id":74052680,"body_markdown":"Use `String#substring` to extract your digits, `String#split` to get an array of digits and then loop over them (classic loop or stream API) to look up numeric values for the digit words. You can use a switch-case statement or a lookup map for the last step. Finally, sum and multiply your digits\r\n\r\n```\r\nfinal Map&lt;String, Integer&gt; digitmap = Map.ofEntries(\r\n    Map.entry(&quot;zero&quot;, 0),\r\n    Map.entry(&quot;one&quot;, 1),\r\n    Map.entry(&quot;two&quot;, 2),\r\n    …);\r\nfinal String input = &quot;…&quot;;\r\nfinal String[] digitwords = input.substring(&quot;your identification code is &quot;.length()).split(&quot; &quot;);\r\nfinal List&lt;Integer&gt; digits = Arrays.stream(digitwords)\r\n    .map(digitmap::get)\r\n    .toList();\r\nlong result = 0;\r\nfor (int i = 0; i &lt; digits.size(); ++i) {\r\n  result = result*10 + digits.get(i);\r\n}\r\n```\r\n\r\nIf you want a string and preserve leading zeros, then don&#39;t map `&quot;zero&quot; -&gt; 0`, but `&quot;zero&quot; -&gt; &quot;0&quot;` and then `String.join` instead of sum + multiply or collect in a string builder:\r\n\r\n```\r\nfinal Map&lt;String, String&gt; digitmap = Map.ofEntries(\r\n    Map.entry(&quot;zero&quot;, &quot;0&quot;),\r\n    …);\r\n// …\r\nfinal StringBuilder sb = new StringBuilder(digitwords.size());\r\nfor (final String digit : digitwords) {\r\n  sb.append(digitmap.get(digit));\r\n}\r\nfinal String result = sb.toString();\r\n```","title":"how to extract substring , of a particular format, from a string in java","body":"<p>Use <code>String#substring</code> to extract your digits, <code>String#split</code> to get an array of digits and then loop over them (classic loop or stream API) to look up numeric values for the digit words. You can use a switch-case statement or a lookup map for the last step. Finally, sum and multiply your digits</p>\n<pre><code>final Map&lt;String, Integer&gt; digitmap = Map.ofEntries(\n    Map.entry(&quot;zero&quot;, 0),\n    Map.entry(&quot;one&quot;, 1),\n    Map.entry(&quot;two&quot;, 2),\n    …);\nfinal String input = &quot;…&quot;;\nfinal String[] digitwords = input.substring(&quot;your identification code is &quot;.length()).split(&quot; &quot;);\nfinal List&lt;Integer&gt; digits = Arrays.stream(digitwords)\n    .map(digitmap::get)\n    .toList();\nlong result = 0;\nfor (int i = 0; i &lt; digits.size(); ++i) {\n  result = result*10 + digits.get(i);\n}\n</code></pre>\n<p>If you want a string and preserve leading zeros, then don't map <code>&quot;zero&quot; -&gt; 0</code>, but <code>&quot;zero&quot; -&gt; &quot;0&quot;</code> and then <code>String.join</code> instead of sum + multiply or collect in a string builder:</p>\n<pre><code>final Map&lt;String, String&gt; digitmap = Map.ofEntries(\n    Map.entry(&quot;zero&quot;, &quot;0&quot;),\n    …);\n// …\nfinal StringBuilder sb = new StringBuilder(digitwords.size());\nfor (final String digit : digitwords) {\n  sb.append(digitmap.get(digit));\n}\nfinal String result = sb.toString();\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user17233545"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665652949,"creation_date":1665652949,"answer_id":74053374,"question_id":74052680,"body_markdown":"Try this.\r\n\r\n    String input = &quot;your identification code is four zero two four three six&quot;;\r\n    Map&lt;String, String&gt; map = Map.of(\r\n        &quot;zero&quot;, &quot;0&quot;, &quot;one&quot;, &quot;1&quot;, &quot;two&quot;, &quot;2&quot;, &quot;three&quot;, &quot;3&quot;, &quot;four&quot;, &quot;4&quot;,\r\n        &quot;five&quot;, &quot;5&quot;, &quot;six&quot;, &quot;6&quot;, &quot;seven&quot;, &quot;7&quot;, &quot;eight&quot;, &quot;8&quot;, &quot;nene&quot;, &quot;9&quot;\r\n    );\r\n    String output = Stream.of(input.split(&quot;\\\\s+&quot;))\r\n        .map(w -&gt; map.getOrDefault(w, &quot;&quot;))\r\n        .collect(Collectors.joining());\r\n    System.out.println(output);\r\n\r\noutput:\r\n\r\n    402436\r\n","title":"how to extract substring , of a particular format, from a string in java","body":"<p>Try this.</p>\n<pre><code>String input = &quot;your identification code is four zero two four three six&quot;;\nMap&lt;String, String&gt; map = Map.of(\n    &quot;zero&quot;, &quot;0&quot;, &quot;one&quot;, &quot;1&quot;, &quot;two&quot;, &quot;2&quot;, &quot;three&quot;, &quot;3&quot;, &quot;four&quot;, &quot;4&quot;,\n    &quot;five&quot;, &quot;5&quot;, &quot;six&quot;, &quot;6&quot;, &quot;seven&quot;, &quot;7&quot;, &quot;eight&quot;, &quot;8&quot;, &quot;nene&quot;, &quot;9&quot;\n);\nString output = Stream.of(input.split(&quot;\\\\s+&quot;))\n    .map(w -&gt; map.getOrDefault(w, &quot;&quot;))\n    .collect(Collectors.joining());\nSystem.out.println(output);\n</code></pre>\n<p>output:</p>\n<pre><code>402436\n</code></pre>\n"}],"owner":{"account_id":18734419,"reputation":29,"user_id":13659094,"display_name":"Niladri"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":338,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1665652949,"creation_date":1665649774,"question_id":74052680,"body_markdown":"I have a string like &quot;your identification code is four zero two four three six&quot;.\r\nI want to extract &quot;four zero two four three six&quot; from this , and then convert it to &#39;402436&#39;. Note that , the text &quot;your identification code is&quot; will always be there, but the numbers might change.\r\n\r\nNeed help/guidance to perform this activity in java.","title":"how to extract substring , of a particular format, from a string in java","body":"<p>I have a string like &quot;your identification code is four zero two four three six&quot;.\nI want to extract &quot;four zero two four three six&quot; from this , and then convert it to '402436'. Note that , the text &quot;your identification code is&quot; will always be there, but the numbers might change.</p>\n<p>Need help/guidance to perform this activity in java.</p>\n"},{"tags":["java","android","augmented-reality","arcore","image-slider"],"owner":{"account_id":26609046,"reputation":11,"user_id":20229463,"display_name":"divyangrana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665652466,"creation_date":1665652466,"question_id":74053273,"body_markdown":"I am new to android and there is my first augmented reality related project. I am trying **ar invitation card.** I have found a solution by stackoverflow like this : https://thomasgorisse.github.io/sceneform-android-sdk/ in (simple-augmented-images) but i didn&#39;t understand how to create **2d image slider** using image detection. ","title":"How to display/render a 2D multiple image by image slider with ARCore in android studio","body":"<p>I am new to android and there is my first augmented reality related project. I am trying <strong>ar invitation card.</strong> I have found a solution by stackoverflow like this : <a href=\"https://thomasgorisse.github.io/sceneform-android-sdk/\" rel=\"nofollow noreferrer\">https://thomasgorisse.github.io/sceneform-android-sdk/</a> in (simple-augmented-images) but i didn't understand how to create <strong>2d image slider</strong> using image detection.</p>\n"},{"tags":["java","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665614529,"creation_date":1665614529,"answer_id":74048688,"question_id":74046365,"body_markdown":"I did find a trick for this issue. I created a ManagedBean class\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor @NoArgsConstructor\r\n    @ManagedBean @ApplicationScope\r\n    public class ServletContext {\r\n        private HttpServletRequest request;\r\n        private HttpServletResponse response;\r\n    }\r\n\r\nI inject it in my AuthenticationFilter custom class. Here in my attemptAuthentication method I can get access to HttpServletRequest and HttpServletResponse objects. I just have to set my ServletContext object with the request and the response.  \r\n\r\n    @Override\r\n    public Authentication attemptAuthentication(HttpServletRequest request,\r\n                                                HttpServletResponse response) throws AuthenticationException {\r\n        // we may need to pass request and response object if we fail authentication,\r\n        servletContext.setRequest(request);\r\n        servletContext.setResponse(response);\r\n\r\n        // spring tries to authenticate user\r\n        try {\r\n            UserLoginRequestModel creds = new ObjectMapper()\r\n                    .readValue(request.getInputStream(), UserLoginRequestModel.class);\r\n\r\n            // we return authentication with email and password\r\n            return authenticationManager.authenticate(\r\n                    new UsernamePasswordAuthenticationToken(\r\n                            creds.getEmail(),\r\n                            creds.getPassword(),\r\n                            new ArrayList&lt;&gt;()\r\n                    )\r\n            );\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\nNow in my AuthenticationFailureListener, I also inject my ServletContext class and retrieve the values in the method that handle onAuthenticationFailure: \r\n\r\n\r\n    @EventListener\r\n    public void onAuthenticationFailure(AuthenticationFailureBadCredentialsEvent event) throws ExecutionException, IOException {\r\n        System.out.println(event);\r\n        Object principal = event.getAuthentication().getPrincipal();\r\n        if (principal instanceof String) {\r\n            String username = (String) event.getAuthentication().getPrincipal();\r\n            loginAttemptService.addUserToLoginAttemptCache(username);\r\n            int attempts = loginAttemptService.getLoginAttempts(username);\r\n            String message;\r\n            if(!loginAttemptService.hasExceededMaxAttempts(username)) {\r\n                message = &quot;Invalid email or password. You tried : &quot; + attempts + &quot;/&quot; + SecurityConstants.MAX_AUTH_ATTEMPTS;\r\n            } else {\r\n                message = &quot;You reached &quot; + attempts + &quot; attempts. Account is now locked for &quot; + SecurityConstants.LOCK_DURATION + &quot; min&quot;;\r\n            }\r\n            ErrorMessageResponse errorMessageResponse = new ErrorMessageResponse(new Date(), message);\r\n            HttpServletResponse response = servletContext.getResponse();\r\n            response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n            new ObjectMapper().writeValue(response.getOutputStream(), errorMessageResponse);\r\n        }\r\n    }\r\n\r\nAt this stage, I do have HttpServletResponse object and I can use it to write value. I do believe there may be more elegant ways to handle this, but it works fine. ","title":"Return custom error message to login entry point with eventListeners","body":"<p>I did find a trick for this issue. I created a ManagedBean class</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor @NoArgsConstructor\n@ManagedBean @ApplicationScope\npublic class ServletContext {\n    private HttpServletRequest request;\n    private HttpServletResponse response;\n}\n</code></pre>\n<p>I inject it in my AuthenticationFilter custom class. Here in my attemptAuthentication method I can get access to HttpServletRequest and HttpServletResponse objects. I just have to set my ServletContext object with the request and the response.</p>\n<pre><code>@Override\npublic Authentication attemptAuthentication(HttpServletRequest request,\n                                            HttpServletResponse response) throws AuthenticationException {\n    // we may need to pass request and response object if we fail authentication,\n    servletContext.setRequest(request);\n    servletContext.setResponse(response);\n\n    // spring tries to authenticate user\n    try {\n        UserLoginRequestModel creds = new ObjectMapper()\n                .readValue(request.getInputStream(), UserLoginRequestModel.class);\n\n        // we return authentication with email and password\n        return authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(\n                        creds.getEmail(),\n                        creds.getPassword(),\n                        new ArrayList&lt;&gt;()\n                )\n        );\n    } catch (IOException e) {\n        e.printStackTrace();\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>Now in my AuthenticationFailureListener, I also inject my ServletContext class and retrieve the values in the method that handle onAuthenticationFailure:</p>\n<pre><code>@EventListener\npublic void onAuthenticationFailure(AuthenticationFailureBadCredentialsEvent event) throws ExecutionException, IOException {\n    System.out.println(event);\n    Object principal = event.getAuthentication().getPrincipal();\n    if (principal instanceof String) {\n        String username = (String) event.getAuthentication().getPrincipal();\n        loginAttemptService.addUserToLoginAttemptCache(username);\n        int attempts = loginAttemptService.getLoginAttempts(username);\n        String message;\n        if(!loginAttemptService.hasExceededMaxAttempts(username)) {\n            message = &quot;Invalid email or password. You tried : &quot; + attempts + &quot;/&quot; + SecurityConstants.MAX_AUTH_ATTEMPTS;\n        } else {\n            message = &quot;You reached &quot; + attempts + &quot; attempts. Account is now locked for &quot; + SecurityConstants.LOCK_DURATION + &quot; min&quot;;\n        }\n        ErrorMessageResponse errorMessageResponse = new ErrorMessageResponse(new Date(), message);\n        HttpServletResponse response = servletContext.getResponse();\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n        new ObjectMapper().writeValue(response.getOutputStream(), errorMessageResponse);\n    }\n}\n</code></pre>\n<p>At this stage, I do have HttpServletResponse object and I can use it to write value. I do believe there may be more elegant ways to handle this, but it works fine.</p>\n"},{"tags":[],"owner":{"account_id":8867701,"reputation":203,"user_id":6622356,"display_name":"Messaoud GUERNOUTI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665652408,"creation_date":1665652408,"answer_id":74053263,"question_id":74046365,"body_markdown":"You can use `.accessDeniedHandler` at your `HttpSecurity` in you Security Config.\r\n\r\nBelow Simple way de return JSON For 403 error :\r\n\r\n1. Define a private method in Config Security like this :\r\n\r\n&gt;     @Configuration\r\n&gt;     @EnableWebSecurity\r\n&gt;     public class SecurityConfig  extends WebSecurityConfigurerAdapter {\r\n&gt;\r\n&gt;     .....\r\n&gt;\r\n&gt;     private void writeResponse(HttpServletResponse httpResponse, int code, String message) throws IOException {\r\n&gt;             httpResponse.setContentType(&quot;application/json&quot;);\r\n&gt;             httpResponse.setStatus(code);\r\n&gt;             httpResponse.getOutputStream().write((&quot;{\\&quot;code\\&quot;:&quot; + code + &quot;,&quot;).getBytes());\r\n&gt;             httpResponse.getOutputStream().write((&quot;\\&quot;message\\&quot;:\\&quot;&quot; + message + &quot;\\&quot;}&quot;).getBytes());\r\n&gt;             httpResponse.getOutputStream().flush();\r\n&gt;         }\r\n&gt;     \r\n&gt;     }\r\n\r\n2. Add exceptionHandling at your HttpSecurity Config :\r\n\r\n&gt;     @Override\r\n&gt;     protected void configure(HttpSecurity http) throws Exception {\r\n&gt;     ....\r\n&gt;     http  = http.exceptionHandling()\r\n&gt;                     .accessDeniedHandler((request, response, accessDeniedException) -&gt; {\r\n&gt;                                 this.writeResponse(response,HttpServletResponse.SC_FORBIDDEN,accessDeniedException.getMessage());\r\n&gt;                             }\r\n&gt;                             )\r\n&gt;                     .and();\r\n&gt;     \r\n&gt;     ....\r\n&gt;     \r\n&gt;     }","title":"Return custom error message to login entry point with eventListeners","body":"<p>You can use <code>.accessDeniedHandler</code> at your <code>HttpSecurity</code> in you Security Config.</p>\n<p>Below Simple way de return JSON For 403 error :</p>\n<ol>\n<li>Define a private method in Config Security like this :</li>\n</ol>\n<blockquote>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig  extends WebSecurityConfigurerAdapter {\n\n.....\n\nprivate void writeResponse(HttpServletResponse httpResponse, int code, String message) throws IOException {\n        httpResponse.setContentType(&quot;application/json&quot;);\n        httpResponse.setStatus(code);\n        httpResponse.getOutputStream().write((&quot;{\\&quot;code\\&quot;:&quot; + code + &quot;,&quot;).getBytes());\n        httpResponse.getOutputStream().write((&quot;\\&quot;message\\&quot;:\\&quot;&quot; + message + &quot;\\&quot;}&quot;).getBytes());\n        httpResponse.getOutputStream().flush();\n    }\n\n}\n</code></pre>\n</blockquote>\n<ol start=\"2\">\n<li>Add exceptionHandling at your HttpSecurity Config :</li>\n</ol>\n<blockquote>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n....\nhttp  = http.exceptionHandling()\n                .accessDeniedHandler((request, response, accessDeniedException) -&gt; {\n                            this.writeResponse(response,HttpServletResponse.SC_FORBIDDEN,accessDeniedException.getMessage());\n                        }\n                        )\n                .and();\n\n....\n\n}\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":497,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74048688,"answer_count":2,"score":1,"last_activity_date":1665652408,"creation_date":1665598665,"question_id":74046365,"body_markdown":"In a rest API, i implemented 2 event listners to handle Authentication success and failure. It works fine and I do have a 403 error but i want to return a JSON Message.\r\n\r\nFor my login I implemented, the following : \r\n\r\n    @PostMapping(&quot;/login&quot;)\r\n    public ResponseEntity&lt;UserResponse&gt; loadUserByUsername(@RequestBody UserDetailsRequestModel userDetails) {\r\n        if(userDetails.getEmail().isEmpty() || userDetails.getPassword().isEmpty()) {\r\n            throw new UserServiceException(ErrorMessages.MISSING_REQUIRED_FIELD.getErrorMessage());\r\n        }\r\n        authenticate(userDetails.getEmail(), userDetails.getPassword());\r\n        UserResponse userRestResponseModel = new UserResponse();\r\n\r\n        ModelMapper modelMapper = new CustomMapper();\r\n        modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STANDARD);\r\n\r\n        UserDto loggedInUser = userService.getUser(userDetails.getEmail());\r\n\r\n        userRestResponseModel = modelMapper.map(loggedInUser, UserResponse.class);\r\n        // retrieve authorities manually\r\n        for(RoleDto roleDto: loggedInUser.getRoles()) {\r\n            Collection&lt;AuthorityDto&gt; authorityDtos = authorityService.getRoleAuthorities(roleDto);\r\n            roleDto.setAuthorities(authorityDtos);\r\n        }\r\n        UserPrincipalManager userPrincipal = new UserPrincipalManager(modelMapper.map(loggedInUser, UserEntity.class));\r\n\r\n        // authorities are not fetched ... so we&#39;ll fetch them manually\r\n        HttpHeaders jwtHeader = getJwtHeader(userPrincipal);\r\n\r\n        ResponseEntity&lt;UserResponse&gt; returnValue =\r\n                new ResponseEntity&lt;&gt;(userRestResponseModel, jwtHeader, HttpStatus.OK);\r\n\r\n        return returnValue;\r\n    }\r\n\r\n\r\n    private void authenticate(String userName, String password) {\r\n        AuthenticationManager authenticationManager =\r\n                (AuthenticationManager) SpringApplicationContext.getBean(&quot;authenticationManager&quot;);\r\n        authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(userName, password));\r\n    }\r\n    private HttpHeaders getJwtHeader(UserPrincipalManager userPrincipal) {\r\n        HttpHeaders headers = new HttpHeaders();\r\n        String token = jwtTokenProvider.generateJwtToken(userPrincipal);\r\n        headers.add(SecurityConstants.TOKEN_PREFIX, token);\r\n        return headers;\r\n    }\r\n\r\n\r\n    @Component\r\n    public class AuthenticationFailureListener {\r\n        private final LoginAttemptService loginAttemptService;\r\n    \r\n    \r\n        @Autowired\r\n        public AuthenticationFailureListener(LoginAttemptService loginAttemptService) {\r\n            this.loginAttemptService = loginAttemptService;\r\n        }\r\n    \r\n        @EventListener\r\n        public void onAuthenticationFailure(AuthenticationFailureBadCredentialsEvent event) throws ExecutionException {\r\n            Object principal = event.getAuthentication().getPrincipal();\r\n            if (principal instanceof String) {\r\n                String username = (String) event.getAuthentication().getPrincipal();\r\n                loginAttemptService.addUserToLoginAttemptCache(username);\r\n            }\r\n        }\r\n    }\r\n\r\nIn my loginAttemptService I try to prepare a return to a rest response. \r\n\r\n\r\n    @Override\r\n    public void addUserToLoginAttemptCache(String username) {\r\n        int attempts = 0;\r\n        try {\r\n            attempts = SecurityConstants.AUTH_ATTEMPT_INCREMENT + loginAttemptCache.get(username);\r\n            loginAttemptCache.put(username, attempts);\r\n            String message = &quot;&quot;;\r\n            if(!errorContext.isHasExceededMaxAttempts()) {\r\n                message = &quot;Invalid email or password. You tried : &quot; + attempts + &quot;/&quot; + SecurityConstants.MAX_AUTH_ATTEMPTS;\r\n            } else {\r\n                message = &quot;You reached &quot; + attempts + &quot; attempts. Account is now locked for &quot; + SecurityConstants.LOCK_DURATION + &quot; min&quot;;\r\n            }\r\n            throw new SecurityServiceException(message);\r\n        } catch (ExecutionException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nMy issue is the following: using ControllerAdvice won&#39;t work because the error is handled before it could reach it. How can I then return a JSON response to the client ?\r\n","title":"Return custom error message to login entry point with eventListeners","body":"<p>In a rest API, i implemented 2 event listners to handle Authentication success and failure. It works fine and I do have a 403 error but i want to return a JSON Message.</p>\n<p>For my login I implemented, the following :</p>\n<pre><code>@PostMapping(&quot;/login&quot;)\npublic ResponseEntity&lt;UserResponse&gt; loadUserByUsername(@RequestBody UserDetailsRequestModel userDetails) {\n    if(userDetails.getEmail().isEmpty() || userDetails.getPassword().isEmpty()) {\n        throw new UserServiceException(ErrorMessages.MISSING_REQUIRED_FIELD.getErrorMessage());\n    }\n    authenticate(userDetails.getEmail(), userDetails.getPassword());\n    UserResponse userRestResponseModel = new UserResponse();\n\n    ModelMapper modelMapper = new CustomMapper();\n    modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STANDARD);\n\n    UserDto loggedInUser = userService.getUser(userDetails.getEmail());\n\n    userRestResponseModel = modelMapper.map(loggedInUser, UserResponse.class);\n    // retrieve authorities manually\n    for(RoleDto roleDto: loggedInUser.getRoles()) {\n        Collection&lt;AuthorityDto&gt; authorityDtos = authorityService.getRoleAuthorities(roleDto);\n        roleDto.setAuthorities(authorityDtos);\n    }\n    UserPrincipalManager userPrincipal = new UserPrincipalManager(modelMapper.map(loggedInUser, UserEntity.class));\n\n    // authorities are not fetched ... so we'll fetch them manually\n    HttpHeaders jwtHeader = getJwtHeader(userPrincipal);\n\n    ResponseEntity&lt;UserResponse&gt; returnValue =\n            new ResponseEntity&lt;&gt;(userRestResponseModel, jwtHeader, HttpStatus.OK);\n\n    return returnValue;\n}\n\n\nprivate void authenticate(String userName, String password) {\n    AuthenticationManager authenticationManager =\n            (AuthenticationManager) SpringApplicationContext.getBean(&quot;authenticationManager&quot;);\n    authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(userName, password));\n}\nprivate HttpHeaders getJwtHeader(UserPrincipalManager userPrincipal) {\n    HttpHeaders headers = new HttpHeaders();\n    String token = jwtTokenProvider.generateJwtToken(userPrincipal);\n    headers.add(SecurityConstants.TOKEN_PREFIX, token);\n    return headers;\n}\n\n\n@Component\npublic class AuthenticationFailureListener {\n    private final LoginAttemptService loginAttemptService;\n\n\n    @Autowired\n    public AuthenticationFailureListener(LoginAttemptService loginAttemptService) {\n        this.loginAttemptService = loginAttemptService;\n    }\n\n    @EventListener\n    public void onAuthenticationFailure(AuthenticationFailureBadCredentialsEvent event) throws ExecutionException {\n        Object principal = event.getAuthentication().getPrincipal();\n        if (principal instanceof String) {\n            String username = (String) event.getAuthentication().getPrincipal();\n            loginAttemptService.addUserToLoginAttemptCache(username);\n        }\n    }\n}\n</code></pre>\n<p>In my loginAttemptService I try to prepare a return to a rest response.</p>\n<pre><code>@Override\npublic void addUserToLoginAttemptCache(String username) {\n    int attempts = 0;\n    try {\n        attempts = SecurityConstants.AUTH_ATTEMPT_INCREMENT + loginAttemptCache.get(username);\n        loginAttemptCache.put(username, attempts);\n        String message = &quot;&quot;;\n        if(!errorContext.isHasExceededMaxAttempts()) {\n            message = &quot;Invalid email or password. You tried : &quot; + attempts + &quot;/&quot; + SecurityConstants.MAX_AUTH_ATTEMPTS;\n        } else {\n            message = &quot;You reached &quot; + attempts + &quot; attempts. Account is now locked for &quot; + SecurityConstants.LOCK_DURATION + &quot; min&quot;;\n        }\n        throw new SecurityServiceException(message);\n    } catch (ExecutionException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>My issue is the following: using ControllerAdvice won't work because the error is handled before it could reach it. How can I then return a JSON response to the client ?</p>\n"},{"tags":["java","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665652198,"creation_date":1665652198,"answer_id":74053213,"question_id":74053175,"body_markdown":"term queries are not analyzed, and you need to use it on the `.keyword` fields, if your Elasticsearch index mapping is generated by Elasticsearch than in the new Elasticsearch versions, every `text` field will also have `.keyword` field, so you need to use\r\n\r\n    sourceBuilder.query(QueryBuilders.termQuery(&quot;external_reference.keyword&quot;, id))","title":"termQuery not returning results","body":"<p>term queries are not analyzed, and you need to use it on the <code>.keyword</code> fields, if your Elasticsearch index mapping is generated by Elasticsearch than in the new Elasticsearch versions, every <code>text</code> field will also have <code>.keyword</code> field, so you need to use</p>\n<pre><code>sourceBuilder.query(QueryBuilders.termQuery(&quot;external_reference.keyword&quot;, id))\n</code></pre>\n"}],"owner":{"account_id":23836453,"reputation":17,"user_id":17842135,"display_name":"juju11"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665652198,"creation_date":1665651973,"question_id":74053175,"body_markdown":"When i use QueryBuilders.matchQuery method, all the matches that contains the given value returns, but i only want to return an exact value. I searched that it can be resolved by using termQuery method instead of matchQuery, but it returned nothing. How can i do only return the exact matched string?\r\n\r\n val sourceBuilder = SearchSourceBuilder()\r\n            sourceBuilder.query(QueryBuilders.matchQuery(&quot;external_reference&quot;, id))\r\n\r\n\r\n            val searchRequest = SearchRequest()\r\n            searchRequest.indices(elasticIndex)\r\n            searchRequest.source(sourceBuilder)\r\n\r\n            var searchResponse: SearchResponse?\r\n            searchResponse = esClient.search(searchRequest, RequestOptions.DEFAULT)\r\n","title":"termQuery not returning results","body":"<p>When i use QueryBuilders.matchQuery method, all the matches that contains the given value returns, but i only want to return an exact value. I searched that it can be resolved by using termQuery method instead of matchQuery, but it returned nothing. How can i do only return the exact matched string?</p>\n<p>val sourceBuilder = SearchSourceBuilder()\nsourceBuilder.query(QueryBuilders.matchQuery(&quot;external_reference&quot;, id))</p>\n<pre><code>        val searchRequest = SearchRequest()\n        searchRequest.indices(elasticIndex)\n        searchRequest.source(sourceBuilder)\n\n        var searchResponse: SearchResponse?\n        searchResponse = esClient.search(searchRequest, RequestOptions.DEFAULT)\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":3,"creation_date":1665649295,"post_id":74052424,"comment_id":130750664,"body_markdown":"Does this answer your question? [Using Regular Expressions to Extract a Value in Java](https://stackoverflow.com/questions/237061/using-regular-expressions-to-extract-a-value-in-java) with the appropriate regex such as `&quot;\\\\$\\\\{[^}]+\\}&quot;`","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/237061/using-regular-expressions-to-extract-a-value-in-java\">Using Regular Expressions to Extract a Value in Java</a> with the appropriate regex such as <code>&quot;\\\\$\\\\{[^}]+\\}&quot;</code>"}],"answers":[{"tags":[],"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665652105,"creation_date":1665651074,"answer_id":74052980,"question_id":74052424,"body_markdown":"**Using Java 8:**\r\n\r\nYou can try the below approach for extracting out the values enclosed with `${}`\r\n\r\nHere,\r\n\r\n1) I have first split the string based on `$` and then filter the values which contains `&quot;{&quot;` and `&quot;}&quot;`.\r\n2) Then I have iterated over the list and find the starting and ending index of that string and using these indexes, prepared the substring and added it to the list.\r\n\r\n**Note:** *In the final list, ignoring the data like ${}, ${   }, and so on, which contains no variable enclosing ${}*\r\n\r\n**Code:**\r\n\r\n \r\n\r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            String s = &quot;This is a ${VARIABLE1} sample string ${VARIABLE2} to process data ${VARIABLE3} ${TEST} ${    } ${}&quot;;\r\n    \r\n            List&lt;String&gt; output = new ArrayList&lt;&gt;();\r\n            Stream.of(s.split(&quot;\\\\$&quot;)).filter(x -&gt; x.contains(&quot;{&quot;) \r\n                    &amp;&amp; x.contains(&quot;}&quot;)).forEach(x -&gt; {\r\n                int i1= x.indexOf(&quot;{&quot;);\r\n                int i2 = x.indexOf(&quot;}&quot;);\r\n                String ss = x.substring(i1+1,i2);\r\n                if(!ss.trim().equals(&quot;&quot;)){\r\n                    output.add(ss);\r\n                }\r\n            });\r\n            System.out.println(output);\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    [VARIABLE1, VARIABLE2, VARIABLE3, TEST]\r\n\r\n ","title":"Need logic to extract variable out of given string","body":"<p><strong>Using Java 8:</strong></p>\n<p>You can try the below approach for extracting out the values enclosed with <code>${}</code></p>\n<p>Here,</p>\n<ol>\n<li>I have first split the string based on <code>$</code> and then filter the values which contains <code>&quot;{&quot;</code> and <code>&quot;}&quot;</code>.</li>\n<li>Then I have iterated over the list and find the starting and ending index of that string and using these indexes, prepared the substring and added it to the list.</li>\n</ol>\n<p><strong>Note:</strong> <em>In the final list, ignoring the data like ${}, ${   }, and so on, which contains no variable enclosing ${}</em></p>\n<p><strong>Code:</strong></p>\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        String s = &quot;This is a ${VARIABLE1} sample string ${VARIABLE2} to process data ${VARIABLE3} ${TEST} ${    } ${}&quot;;\n\n        List&lt;String&gt; output = new ArrayList&lt;&gt;();\n        Stream.of(s.split(&quot;\\\\$&quot;)).filter(x -&gt; x.contains(&quot;{&quot;) \n                &amp;&amp; x.contains(&quot;}&quot;)).forEach(x -&gt; {\n            int i1= x.indexOf(&quot;{&quot;);\n            int i2 = x.indexOf(&quot;}&quot;);\n            String ss = x.substring(i1+1,i2);\n            if(!ss.trim().equals(&quot;&quot;)){\n                output.add(ss);\n            }\n        });\n        System.out.println(output);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>[VARIABLE1, VARIABLE2, VARIABLE3, TEST]\n</code></pre>\n"}],"owner":{"account_id":4857664,"reputation":27,"user_id":3918214,"display_name":"Praveen Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1665652947,"answer_count":1,"score":0,"last_activity_date":1665652105,"creation_date":1665648588,"question_id":74052424,"body_markdown":"I am new to Java language, I need to extract all variables which are defined within ${} the given string. This string can be of any length and it can contain any number of variables.\r\n\r\nFor example:\r\n\r\n**This is a${VARIABLE1} sample string ${VARIABLE2} to process data ${VARIABLE3}**\r\n\r\nAfter processing I just want to get whichever is defined within ${} - It means I should be getting VARIABLE1,VARIABLE2, VARIABLE3 \r\n\r\nCan someone please help me code for it.\r\n\r\nThanks","title":"Need logic to extract variable out of given string","body":"<p>I am new to Java language, I need to extract all variables which are defined within ${} the given string. This string can be of any length and it can contain any number of variables.</p>\n<p>For example:</p>\n<p><strong>This is a${VARIABLE1} sample string ${VARIABLE2} to process data ${VARIABLE3}</strong></p>\n<p>After processing I just want to get whichever is defined within ${} - It means I should be getting VARIABLE1,VARIABLE2, VARIABLE3</p>\n<p>Can someone please help me code for it.</p>\n<p>Thanks</p>\n"},{"tags":["java","xml","freemarker"],"comments":[{"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"score":0,"creation_date":1496761352,"post_id":44384816,"comment_id":75786776,"body_markdown":"This wasn&#39;t the question, but note that generally you can write `name` instead of `getName()`.","body":"This wasn&#39;t the question, but note that generally you can write <code>name</code> instead of <code>getName()</code>."}],"answers":[{"tags":[],"owner":{"account_id":3315904,"reputation":9017,"user_id":2788297,"display_name":"zeppelin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1500664979,"creation_date":1496742012,"answer_id":44386524,"question_id":44384816,"body_markdown":"If all your tags follow the same basic structure:\r\n\r\n    &lt;Tag&gt;value&lt;/Tag&gt;\r\n\r\nyou can use a macro, to save yourself some typing:\r\n\r\n    &lt;#macro optional tag value=[]&gt;\r\n        &lt;#if value?has_content&gt;\r\n             &lt;${tag}&gt;${value}&lt;/${tag}&gt;\r\n        &lt;/#if&gt;\r\n    &lt;/#macro&gt;\r\n\r\nand then apply it like this:\r\n\r\n      &lt;@optional tag=&#39;User&#39; value=user/&gt; \r\n      &lt;@optional tag=&#39;Name&#39; value=name/&gt;\r\n\r\nresulting in the following output code:\r\n\r\n      &lt;User&gt;myuser&lt;/User&gt;\r\n      &lt;Name&gt;myname&lt;/User&gt;\r\n\r\nif one of the properties is not defined the whole tag will be omitted from the output.","title":"FreeMarker : diplay tag on condition without if block","body":"<p>If all your tags follow the same basic structure:</p>\n\n<pre><code>&lt;Tag&gt;value&lt;/Tag&gt;\n</code></pre>\n\n<p>you can use a macro, to save yourself some typing:</p>\n\n<pre><code>&lt;#macro optional tag value=[]&gt;\n    &lt;#if value?has_content&gt;\n         &lt;${tag}&gt;${value}&lt;/${tag}&gt;\n    &lt;/#if&gt;\n&lt;/#macro&gt;\n</code></pre>\n\n<p>and then apply it like this:</p>\n\n<pre><code>  &lt;@optional tag='User' value=user/&gt; \n  &lt;@optional tag='Name' value=name/&gt;\n</code></pre>\n\n<p>resulting in the following output code:</p>\n\n<pre><code>  &lt;User&gt;myuser&lt;/User&gt;\n  &lt;Name&gt;myname&lt;/User&gt;\n</code></pre>\n\n<p>if one of the properties is not defined the whole tag will be omitted from the output.</p>\n"}],"owner":{"account_id":10919032,"reputation":5,"user_id":8025979,"display_name":"horakiel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":44386524,"answer_count":1,"score":0,"last_activity_date":1665652049,"creation_date":1496737120,"question_id":44384816,"body_markdown":"I am looking for a way to avoid using this in a FreeMarker template : \r\n\r\n    &lt;#if getName()??&gt;\r\n        &lt;Name&gt;getName()&lt;/Name&gt;\r\n    &lt;/#if&gt;\r\n\r\nBecause I need to test many things. \r\n\r\nIs there any way to do it by using, for example, a parameter in the tag? \r\nI don&#39;t want the tag to be written at all if the value is null. (So exclamation mark is not enough)","title":"FreeMarker : diplay tag on condition without if block","body":"<p>I am looking for a way to avoid using this in a FreeMarker template :</p>\n<pre><code>&lt;#if getName()??&gt;\n    &lt;Name&gt;getName()&lt;/Name&gt;\n&lt;/#if&gt;\n</code></pre>\n<p>Because I need to test many things.</p>\n<p>Is there any way to do it by using, for example, a parameter in the tag?\nI don't want the tag to be written at all if the value is null. (So exclamation mark is not enough)</p>\n"},{"tags":["java","maven","cxf"],"answers":[{"tags":[],"owner":{"account_id":5066322,"reputation":183,"user_id":4066331,"accept_rate":25,"display_name":"pacionet"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1613832351,"creation_date":1613832351,"answer_id":66292848,"question_id":66289162,"body_markdown":"Change version of plugin from:\r\n\r\n   \r\n\r\n&gt; &lt;version&gt;3.3.0&lt;/version&gt;\r\n\r\nto\r\n\r\n  \r\n\r\n&gt;  &lt;version&gt;3.4.2&lt;/version&gt;","title":"Apache CXF 3.4.2 JDK 11 - Issue while Wsdl2Java. Could not load extension class org.apache.cxf.common.util.ASMHelperImpl","body":"<p>Change version of plugin from:</p>\n<blockquote>\n<p>3.3.0</p>\n</blockquote>\n<p>to</p>\n<blockquote>\n<p>3.4.2</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627397389,"creation_date":1627385123,"answer_id":68543978,"question_id":66289162,"body_markdown":"When you&#39;ll try to find `ASMHelper` class in your IDE then you can see that your class look like this: `public class ASMHelper` (`cxf-core:3.3.0` / `cxf-core:3.3.1` / `cxf-core:3.3.5`) so indeed it&#39;s not an interface. However when you look at `ASMHelper` in `cxf-core:3.4.4` you&#39;ll see `public interface ASMHelper` which can be implemented. \r\n\r\nSo problem is caused by old version of library.\r\n","title":"Apache CXF 3.4.2 JDK 11 - Issue while Wsdl2Java. Could not load extension class org.apache.cxf.common.util.ASMHelperImpl","body":"<p>When you'll try to find <code>ASMHelper</code> class in your IDE then you can see that your class look like this: <code>public class ASMHelper</code> (<code>cxf-core:3.3.0</code> / <code>cxf-core:3.3.1</code> / <code>cxf-core:3.3.5</code>) so indeed it's not an interface. However when you look at <code>ASMHelper</code> in <code>cxf-core:3.4.4</code> you'll see <code>public interface ASMHelper</code> which can be implemented.</p>\n<p>So problem is caused by old version of library.</p>\n"},{"tags":[],"owner":{"account_id":8720587,"reputation":163,"user_id":6523875,"display_name":"StudentOfTheGame"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632225874,"creation_date":1632225874,"answer_id":69268585,"question_id":66289162,"body_markdown":"In my case, the problem was solved by aligning all the CXF type dependencies 3.4.4.\r\n","title":"Apache CXF 3.4.2 JDK 11 - Issue while Wsdl2Java. Could not load extension class org.apache.cxf.common.util.ASMHelperImpl","body":"<p>In my case, the problem was solved by aligning all the CXF type dependencies 3.4.4.</p>\n"},{"tags":[],"owner":{"account_id":15409394,"reputation":36,"user_id":11116551,"display_name":"subhashreddy22"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665652030,"creation_date":1656345109,"answer_id":72774948,"question_id":66289162,"body_markdown":"Please remove the `cxf-api` dependency from your pom.xml. It is outdated and has the class `ASMHelper.java` which is getting loaded instead of the interface of same name from `cxf-core` jar which is the right package to load. No need to declare `cxf-core` separately, it is transitively included as part of `cxf-rt-frontend-jaxws`","title":"Apache CXF 3.4.2 JDK 11 - Issue while Wsdl2Java. Could not load extension class org.apache.cxf.common.util.ASMHelperImpl","body":"<p>Please remove the <code>cxf-api</code> dependency from your pom.xml. It is outdated and has the class <code>ASMHelper.java</code> which is getting loaded instead of the interface of same name from <code>cxf-core</code> jar which is the right package to load. No need to declare <code>cxf-core</code> separately, it is transitively included as part of <code>cxf-rt-frontend-jaxws</code></p>\n"}],"owner":{"account_id":12723373,"reputation":31,"user_id":9242924,"display_name":"Pravin Bhirud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12788,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1665652030,"creation_date":1613806696,"question_id":66289162,"body_markdown":"Am trying to generate Java code from wsdl using apache cxf 3.4.2 &amp; JDK 11 .\r\nGetting following exceptions\r\n\r\nException in thread &quot;main&quot; org.apache.cxf.tools.common.ToolException: org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.common.util.ASMHelperImpl\r\nCaused by: java.lang.IncompatibleClassChangeError: class org.apache.cxf.common.util.ASMHelperImpl can not implement org.apache.cxf.common.util.ASMHelper, because it is not an interface (org.apache.cxf.common.util.ASMHelper is in unnamed module of loader &#39;app&#39;)\r\n\r\n\r\nfollowing is snippet from pom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-rt-rs-client&lt;/artifactId&gt;\r\n        &lt;version&gt;3.4.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.4.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;cxf-spring-boot-starter-jaxws&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.4.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.18&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;\r\n        &lt;version&gt;3.4.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-rt-frontend-simple&lt;/artifactId&gt;\r\n        &lt;version&gt;3.4.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.neethi&lt;/groupId&gt;\r\n                &lt;artifactId&gt;neethi&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;generate-sources&lt;/id&gt;\r\n                &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;sourceRoot&gt;${project.basedir}/src/main/generated&lt;/sourceRoot&gt;\r\n                    &lt;wsdlOptions&gt;\r\n                        &lt;wsdlOption&gt;\r\n                            &lt;wsdl&gt;${basedir}/src/main/resources/wsdl/test.wsdl&lt;/wsdl&gt;\r\n                            &lt;wsdlLocation&gt;classpath:wsdl/test.wsdl&lt;/wsdlLocation&gt;\r\n                            &lt;extraargs&gt;\r\n                                &lt;extraarg&gt;-client&lt;/extraarg&gt;\r\n                                &lt;extraarg&gt;-verbose&lt;/extraarg&gt;\r\n                                &lt;extraarg&gt;-autoNameResolution&lt;/extraarg&gt;\r\n                                &lt;extraarg&gt;-p&lt;/extraarg&gt;\r\n                                &lt;extraarg&gt;com.cxf&lt;/extraarg&gt;\r\n                            &lt;/extraargs&gt;\r\n                        &lt;/wsdlOption&gt;\r\n                    &lt;/wsdlOptions&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;wsdl2java&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;","title":"Apache CXF 3.4.2 JDK 11 - Issue while Wsdl2Java. Could not load extension class org.apache.cxf.common.util.ASMHelperImpl","body":"<p>Am trying to generate Java code from wsdl using apache cxf 3.4.2 &amp; JDK 11 .\nGetting following exceptions</p>\n<p>Exception in thread &quot;main&quot; org.apache.cxf.tools.common.ToolException: org.apache.cxf.bus.extension.ExtensionException: Could not load extension class org.apache.cxf.common.util.ASMHelperImpl\nCaused by: java.lang.IncompatibleClassChangeError: class org.apache.cxf.common.util.ASMHelperImpl can not implement org.apache.cxf.common.util.ASMHelper, because it is not an interface (org.apache.cxf.common.util.ASMHelper is in unnamed module of loader 'app')</p>\n<p>following is snippet from pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-rs-client&lt;/artifactId&gt;\n    &lt;version&gt;3.4.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt;\n    &lt;version&gt;3.4.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-spring-boot-starter-jaxws&lt;/artifactId&gt;\n    &lt;version&gt;3.4.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-api&lt;/artifactId&gt;\n    &lt;version&gt;2.7.18&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;\n    &lt;version&gt;3.4.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-frontend-simple&lt;/artifactId&gt;\n    &lt;version&gt;3.4.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.0&lt;/version&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.neethi&lt;/groupId&gt;\n            &lt;artifactId&gt;neethi&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;generate-sources&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;configuration&gt;\n                &lt;sourceRoot&gt;${project.basedir}/src/main/generated&lt;/sourceRoot&gt;\n                &lt;wsdlOptions&gt;\n                    &lt;wsdlOption&gt;\n                        &lt;wsdl&gt;${basedir}/src/main/resources/wsdl/test.wsdl&lt;/wsdl&gt;\n                        &lt;wsdlLocation&gt;classpath:wsdl/test.wsdl&lt;/wsdlLocation&gt;\n                        &lt;extraargs&gt;\n                            &lt;extraarg&gt;-client&lt;/extraarg&gt;\n                            &lt;extraarg&gt;-verbose&lt;/extraarg&gt;\n                            &lt;extraarg&gt;-autoNameResolution&lt;/extraarg&gt;\n                            &lt;extraarg&gt;-p&lt;/extraarg&gt;\n                            &lt;extraarg&gt;com.cxf&lt;/extraarg&gt;\n                        &lt;/extraargs&gt;\n                    &lt;/wsdlOption&gt;\n                &lt;/wsdlOptions&gt;\n            &lt;/configuration&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;wsdl2java&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","ignite","gridgain"],"answers":[{"tags":[],"owner":{"account_id":2182,"reputation":51860,"user_id":2998,"accept_rate":69,"display_name":"Stephen Darlington"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665651940,"creation_date":1665651940,"answer_id":74053169,"question_id":74047445,"body_markdown":"I&#39;m not sure what to add. As per the documentation you link to:\r\n\r\n&gt; [TRANSACTIONAL] Enables support for ACID-compliant transactions executed via the key-value API. SQL transactions are not supported.\r\n\r\nYou can do a SQL select to find the records you want to delete and then use the key-value delete operation. Something like:\r\n\r\n    try (var c = cache.query(new SqlFieldsQuery(&quot;select _key from person where ... &quot;))) {\r\n        var toDelete = c.getAll().stream()\r\n                .map(x -&gt; (Long) x.get(0))\r\n                .collect(Collectors.toSet());\r\n        cache.removeAll(toDelete);\r\n    }\r\n\r\n(Yes, this is not semantically identical.)","title":"Ignite fails DELETE query in transaction with &quot;DML statements are not allowed inside a transaction over cache(s) with TRANSACTIONAL atomicity mode&quot;","body":"<p>I'm not sure what to add. As per the documentation you link to:</p>\n<blockquote>\n<p>[TRANSACTIONAL] Enables support for ACID-compliant transactions executed via the key-value API. SQL transactions are not supported.</p>\n</blockquote>\n<p>You can do a SQL select to find the records you want to delete and then use the key-value delete operation. Something like:</p>\n<pre><code>try (var c = cache.query(new SqlFieldsQuery(&quot;select _key from person where ... &quot;))) {\n    var toDelete = c.getAll().stream()\n            .map(x -&gt; (Long) x.get(0))\n            .collect(Collectors.toSet());\n    cache.removeAll(toDelete);\n}\n</code></pre>\n<p>(Yes, this is not semantically identical.)</p>\n"}],"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74053169,"answer_count":1,"score":0,"last_activity_date":1665651940,"creation_date":1665605003,"question_id":74047445,"body_markdown":"While trying to execute a DELETE query on a cache with TRANSACTIONAL atomicity mode, Ignite fails it with the error,\r\n\r\n&gt; javax.cache.CacheException: DML statements are not allowed inside a transaction over cache(s) with TRANSACTIONAL atomicity mode (change atomicity mode to TRANSACTIONAL_SNAPSHOT or disable this error message with system property &quot;-DIGNITE_ALLOW_DML_INSIDE_TRANSACTION=true&quot;)\r\n\r\nOn Ignite documentation there is no reference to such a restriction. In addition both the [documentation][1] &amp; the [docs][2] clearly mention that &quot;TRANSACTIONAL_SNAPSHOT&quot; is deprecated &amp; would be removed. Yet the error message suggests using that as an option,\r\n\r\n&gt; \tTRANSACTIONAL_SNAPSHOT is deprecated since 2.12 and will be removed in the next releases.\r\n\r\nI can add the other suggestion of adding the system property, but would love to better understand what is the support &amp; why this error as i didn&#39;t expect that DELETE is not possible inside transactions.\r\n\r\nThanks\r\n\r\nBelow is the error trace,\r\n\r\n\r\n\r\n    javax.cache.CacheException: DML statements are not allowed inside a transaction over cache(s) with TRANSACTIONAL atomicity mode (change atomicity mode to TRANSACTIONAL_SNAPSHOT or disable this error message with system property &quot;-DIGNITE_ALLOW_DML_INSIDE_TRANSACTION=true&quot;)\r\n    \r\n     at org.apache.ignite.internal.processors.cache.IgniteCacheProxyImpl.query(IgniteCacheProxyImpl.java:828)\r\n    \r\n     at org.apache.ignite.internal.processors.cache.IgniteCacheProxyImpl.query(IgniteCacheProxyImpl.java:761)\r\n    \r\n     at org.apache.ignite.internal.processors.cache.GatewayProtectedCacheProxy.query(GatewayProtectedCacheProxy.java:394)\r\n    \r\n     at com.xxx.xxx.domain.repositories.rbac.RbacCustomRepositoryImpl.removeRoleByUserId(RbacCustomRepositoryImpl.java:976)\r\n    \r\n     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \r\n     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \r\n     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \r\n     at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \r\n     at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:515)\r\n    \r\n     at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:490)\r\n    \r\n     at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:477)\r\n    \r\n     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n    \r\n     at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:56)\r\n    \r\n     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n    \r\n     at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)\r\n    \r\n     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n    \r\n     at org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:57)\r\n    \r\n     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n    \r\n     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n    \r\n     at com.sun.proxy.$Proxy205.removeRoleByUserId(Unknown Source)\r\n    \r\n     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \r\n     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \r\n     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \r\n     at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \r\n     at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n    \r\n     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)\r\n    \r\n     at com.sun.proxy.$Proxy113.removeRoleByUserId(Unknown Source)\r\n    \r\n     at com.xxx.xxx.rbac.server.util.RbacPersistenceUtil.modifyUser(RbacPersistenceUtil.java:621)\r\n    \r\n     at com.xxx.xxx.rbac.server.controller.RbacController.modifyUser(RbacController.java:1818)\r\n    \r\n     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \r\n     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \r\n     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \r\n     at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \r\n     at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n    \r\n     at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\r\n    \r\n     at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:97)\r\n    \r\n     at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n    \r\n     at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n    \r\n     at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n    \r\n     at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:967)\r\n    \r\n     at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:901)\r\n    \r\n     at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n    \r\n     at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:883)\r\n    \r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)\r\n    \r\n     at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n    \r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.springframework.boot.web.filter.ApplicationContextHeaderFilter.doFilterInternal(ApplicationContextHeaderFilter.java:55)\r\n    \r\n     at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:111)\r\n    \r\n     at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\r\n    \r\n     at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)\r\n    \r\n     at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)\r\n    \r\n     at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\r\n    \r\n     at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:103)\r\n    \r\n     at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \r\n     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\r\n    \r\n     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n    \r\n     at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\r\n    \r\n     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\r\n    \r\n     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\r\n    \r\n     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\r\n    \r\n     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\r\n    \r\n     at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)\r\n    \r\n     at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n    \r\n     at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)\r\n    \r\n     at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)\r\n    \r\n     at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \r\n     at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \r\n     at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \r\n     at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \r\n     at java.base/java.lang.Thread.run(Thread.java:829)\r\n    \r\n    Caused by: org.apache.ignite.internal.processors.query.IgniteSQLException: DML statements are not allowed inside a transaction over cache(s) with TRANSACTIONAL atomicity mode (change atomicity mode to TRANSACTIONAL_SNAPSHOT or disable this error message with system property &quot;-DIGNITE_ALLOW_DML_INSIDE_TRANSACTION=true&quot;)\r\n    \r\n     at org.apache.ignite.internal.processors.query.h2.IgniteH2Indexing.executeDml(IgniteH2Indexing.java:1219)\r\n    \r\n     at org.apache.ignite.internal.processors.query.h2.IgniteH2Indexing.querySqlFields(IgniteH2Indexing.java:1153)\r\n    \r\n     at org.apache.ignite.internal.processors.query.GridQueryProcessor$4.applyx(GridQueryProcessor.java:2542)\r\n    \r\n     at org.apache.ignite.internal.processors.query.GridQueryProcessor$4.applyx(GridQueryProcessor.java:2538)\r\n    \r\n     at org.apache.ignite.internal.util.lang.IgniteOutClosureX.apply(IgniteOutClosureX.java:35)\r\n    \r\n     at org.apache.ignite.internal.processors.query.GridQueryProcessor.executeQuery(GridQueryProcessor.java:3054)\r\n    \r\n     at org.apache.ignite.internal.processors.query.GridQueryProcessor.lambda$querySqlFields$1(GridQueryProcessor.java:2558)\r\n    \r\n     at org.apache.ignite.internal.processors.query.GridQueryProcessor.executeQuerySafe(GridQueryProcessor.java:2596)\r\n    \r\n     at org.apache.ignite.internal.processors.query.GridQueryProcessor.querySqlFields(GridQueryProcessor.java:2532)\r\n    \r\n     at org.apache.ignite.internal.processors.query.GridQueryProcessor.querySqlFields(GridQueryProcessor.java:2459)\r\n    \r\n     at org.apache.ignite.internal.processors.cache.IgniteCacheProxyImpl.query(IgniteCacheProxyImpl.java:813)\r\n    \r\n     ... 94 common frames omitted\r\n\r\n\r\n\r\n\r\n  [1]: https://ignite.apache.org/docs/latest/configuring-caches/atomicity-modes#atomicity-modes\r\n  [2]: https://ignite.apache.org/releases/latest/javadoc/org/apache/ignite/cache/CacheAtomicityMode.html#TRANSACTIONAL_SNAPSHOT","title":"Ignite fails DELETE query in transaction with &quot;DML statements are not allowed inside a transaction over cache(s) with TRANSACTIONAL atomicity mode&quot;","body":"<p>While trying to execute a DELETE query on a cache with TRANSACTIONAL atomicity mode, Ignite fails it with the error,</p>\n<blockquote>\n<p>javax.cache.CacheException: DML statements are not allowed inside a transaction over cache(s) with TRANSACTIONAL atomicity mode (change atomicity mode to TRANSACTIONAL_SNAPSHOT or disable this error message with system property &quot;-DIGNITE_ALLOW_DML_INSIDE_TRANSACTION=true&quot;)</p>\n</blockquote>\n<p>On Ignite documentation there is no reference to such a restriction. In addition both the <a href=\"https://ignite.apache.org/docs/latest/configuring-caches/atomicity-modes#atomicity-modes\" rel=\"nofollow noreferrer\">documentation</a> &amp; the <a href=\"https://ignite.apache.org/releases/latest/javadoc/org/apache/ignite/cache/CacheAtomicityMode.html#TRANSACTIONAL_SNAPSHOT\" rel=\"nofollow noreferrer\">docs</a> clearly mention that &quot;TRANSACTIONAL_SNAPSHOT&quot; is deprecated &amp; would be removed. Yet the error message suggests using that as an option,</p>\n<blockquote>\n<p>TRANSACTIONAL_SNAPSHOT is deprecated since 2.12 and will be removed in the next releases.</p>\n</blockquote>\n<p>I can add the other suggestion of adding the system property, but would love to better understand what is the support &amp; why this error as i didn't expect that DELETE is not possible inside transactions.</p>\n<p>Thanks</p>\n<p>Below is the error trace,</p>\n<pre><code>javax.cache.CacheException: DML statements are not allowed inside a transaction over cache(s) with TRANSACTIONAL atomicity mode (change atomicity mode to TRANSACTIONAL_SNAPSHOT or disable this error message with system property &quot;-DIGNITE_ALLOW_DML_INSIDE_TRANSACTION=true&quot;)\n\n at org.apache.ignite.internal.processors.cache.IgniteCacheProxyImpl.query(IgniteCacheProxyImpl.java:828)\n\n at org.apache.ignite.internal.processors.cache.IgniteCacheProxyImpl.query(IgniteCacheProxyImpl.java:761)\n\n at org.apache.ignite.internal.processors.cache.GatewayProtectedCacheProxy.query(GatewayProtectedCacheProxy.java:394)\n\n at com.xxx.xxx.domain.repositories.rbac.RbacCustomRepositoryImpl.removeRoleByUserId(RbacCustomRepositoryImpl.java:976)\n\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\n at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\n at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\n at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:515)\n\n at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:490)\n\n at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:477)\n\n at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n\n at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:56)\n\n at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n\n at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)\n\n at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n\n at org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:57)\n\n at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n\n at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\n\n at com.sun.proxy.$Proxy205.removeRoleByUserId(Unknown Source)\n\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\n at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\n at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\n at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\n\n at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)\n\n at com.sun.proxy.$Proxy113.removeRoleByUserId(Unknown Source)\n\n at com.xxx.xxx.rbac.server.util.RbacPersistenceUtil.modifyUser(RbacPersistenceUtil.java:621)\n\n at com.xxx.xxx.rbac.server.controller.RbacController.modifyUser(RbacController.java:1818)\n\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\n at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\n at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n\n at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n\n at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\n\n at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:97)\n\n at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\n\n at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\n\n at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\n\n at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:967)\n\n at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:901)\n\n at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n\n at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:883)\n\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)\n\n at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.springframework.boot.web.filter.ApplicationContextHeaderFilter.doFilterInternal(ApplicationContextHeaderFilter.java:55)\n\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:111)\n\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\n\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)\n\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)\n\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:103)\n\n at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\n\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n\n at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\n\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\n\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\n\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\n\n at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)\n\n at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n\n at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)\n\n at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)\n\n at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n\n at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n\n at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n\n at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\n at java.base/java.lang.Thread.run(Thread.java:829)\n\nCaused by: org.apache.ignite.internal.processors.query.IgniteSQLException: DML statements are not allowed inside a transaction over cache(s) with TRANSACTIONAL atomicity mode (change atomicity mode to TRANSACTIONAL_SNAPSHOT or disable this error message with system property &quot;-DIGNITE_ALLOW_DML_INSIDE_TRANSACTION=true&quot;)\n\n at org.apache.ignite.internal.processors.query.h2.IgniteH2Indexing.executeDml(IgniteH2Indexing.java:1219)\n\n at org.apache.ignite.internal.processors.query.h2.IgniteH2Indexing.querySqlFields(IgniteH2Indexing.java:1153)\n\n at org.apache.ignite.internal.processors.query.GridQueryProcessor$4.applyx(GridQueryProcessor.java:2542)\n\n at org.apache.ignite.internal.processors.query.GridQueryProcessor$4.applyx(GridQueryProcessor.java:2538)\n\n at org.apache.ignite.internal.util.lang.IgniteOutClosureX.apply(IgniteOutClosureX.java:35)\n\n at org.apache.ignite.internal.processors.query.GridQueryProcessor.executeQuery(GridQueryProcessor.java:3054)\n\n at org.apache.ignite.internal.processors.query.GridQueryProcessor.lambda$querySqlFields$1(GridQueryProcessor.java:2558)\n\n at org.apache.ignite.internal.processors.query.GridQueryProcessor.executeQuerySafe(GridQueryProcessor.java:2596)\n\n at org.apache.ignite.internal.processors.query.GridQueryProcessor.querySqlFields(GridQueryProcessor.java:2532)\n\n at org.apache.ignite.internal.processors.query.GridQueryProcessor.querySqlFields(GridQueryProcessor.java:2459)\n\n at org.apache.ignite.internal.processors.cache.IgniteCacheProxyImpl.query(IgniteCacheProxyImpl.java:813)\n\n ... 94 common frames omitted\n</code></pre>\n"},{"tags":["java","syntax"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":1,"creation_date":1416324256,"post_id":26997800,"comment_id":42526062,"body_markdown":"Show the code you have tried...","body":"Show the code you have tried..."},{"owner":{"account_id":2419234,"reputation":29081,"user_id":2112633,"accept_rate":66,"display_name":"usha"},"score":3,"creation_date":1416324321,"post_id":26997800,"comment_id":42526110,"body_markdown":"Did you try `System.out.println(&quot;[&quot; + intValue + &quot;]&quot;)` ?","body":"Did you try <code>System.out.println(&quot;[&quot; + intValue + &quot;]&quot;)</code> ?"},{"owner":{"account_id":5215450,"reputation":71,"user_id":4191506,"accept_rate":80,"display_name":"Bryn Dukes"},"score":0,"creation_date":1416324877,"post_id":26997800,"comment_id":42526493,"body_markdown":"So i had this System.out.print(&quot;[int]&quot;)    ..... Added the extra quotes and the plus signs and it now works! Thankyou. Do the plus signs mean anything in particular?","body":"So i had this System.out.print(&quot;[int]&quot;)    ..... Added the extra quotes and the plus signs and it now works! Thankyou. Do the plus signs mean anything in particular?"},{"owner":{"account_id":4785346,"reputation":787,"user_id":3960650,"display_name":"DejaVuSansMono"},"score":0,"creation_date":1416326256,"post_id":26997800,"comment_id":42527379,"body_markdown":"@BrynDukes Means concatenation in the case of strings.","body":"@BrynDukes Means concatenation in the case of strings."}],"answers":[{"tags":[],"owner":{"account_id":4785346,"reputation":787,"user_id":3960650,"display_name":"DejaVuSansMono"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1416324327,"creation_date":1416324327,"answer_id":26997837,"question_id":26997800,"body_markdown":"If I am understanding the question. \r\n\r\nSay you have an int\r\n\r\n    int number = 0;\r\n\r\nand you have a print statement.\r\n\r\n    System.out.println(&quot;This is the number : [&quot; + number + &quot;]&quot;);\r\n\r\n\r\nThat is how you do it. ","title":"How do you print the value of an int inside square brackets in Java?","body":"<p>If I am understanding the question. </p>\n\n<p>Say you have an int</p>\n\n<pre><code>int number = 0;\n</code></pre>\n\n<p>and you have a print statement.</p>\n\n<pre><code>System.out.println(\"This is the number : [\" + number + \"]\");\n</code></pre>\n\n<p>That is how you do it. </p>\n"},{"tags":[],"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416324642,"creation_date":1416324642,"answer_id":26997952,"question_id":26997800,"body_markdown":"just append the `&quot;[&quot; + number + &quot;]&quot;`\r\n\r\n     public static void main(String[] args) {\r\n            int a = 10;\r\n            System.out.println(&quot;[&quot; + a + &quot;]&quot;);\r\n        }\r\n\r\n**Output**\r\n\r\n    [10]\r\n\r\n","title":"How do you print the value of an int inside square brackets in Java?","body":"<p>just append the <code>\"[\" + number + \"]\"</code></p>\n\n<pre><code> public static void main(String[] args) {\n        int a = 10;\n        System.out.println(\"[\" + a + \"]\");\n    }\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[10]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5321584,"reputation":338,"user_id":4244885,"display_name":"eyebleach"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416325682,"creation_date":1416325682,"answer_id":26998279,"question_id":26997800,"body_markdown":"As said:             \r\n\r\n    System.out.println(&quot;[&quot; + a + &quot;]&quot;);\r\n\r\nThe + signs means &quot;and&quot;. print string AND int AND string.","title":"How do you print the value of an int inside square brackets in Java?","body":"<p>As said:             </p>\n\n<pre><code>System.out.println(\"[\" + a + \"]\");\n</code></pre>\n\n<p>The + signs means \"and\". print string AND int AND string.</p>\n"}],"owner":{"account_id":5215450,"reputation":71,"user_id":4191506,"accept_rate":80,"display_name":"Bryn Dukes"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8657,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"accepted_answer_id":26997837,"answer_count":3,"score":-5,"last_activity_date":1665651807,"creation_date":1416324223,"question_id":26997800,"body_markdown":"The output of my program needs to be the value of an int printed inside square brackets but i can&#39;t work out how to type this so that it will compile!?\r\n","title":"How do you print the value of an int inside square brackets in Java?","body":"<p>The output of my program needs to be the value of an int printed inside square brackets but i can't work out how to type this so that it will compile!?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1665165906,"post_id":73991017,"comment_id":130644122,"body_markdown":"you need to learn `nohup` command (alternatively it is possible to run boot applications as [service](https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.installing))","body":"you need to learn <code>nohup</code> command (alternatively it is possible to run boot applications as <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.installing\" rel=\"nofollow noreferrer\">service</a>)"}],"answers":[{"tags":[],"owner":{"account_id":13331423,"reputation":391,"user_id":10441871,"display_name":"Shyam Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665651715,"creation_date":1665651715,"answer_id":74053122,"question_id":73991017,"body_markdown":"you need to create your custom service in your machine \r\n\r\nEX: In Linux we use ``` sudo systemctl start MySQL ``` like that you have to create,\r\n\r\nPlease refer to this [documentation][1] which will help you to create your own. \r\n\r\nEX: ``` sudo systemctl start my_java_spring_service ```\r\n\r\nI hope it helps!\r\n\r\n\r\n  [1]: https://www.auroria.io/spring-boot-as-systemd-service/","title":"Springboot application is stopping after closing the putty in unix box","body":"<p>you need to create your custom service in your machine</p>\n<p>EX: In Linux we use <code>sudo systemctl start MySQL</code> like that you have to create,</p>\n<p>Please refer to this <a href=\"https://www.auroria.io/spring-boot-as-systemd-service/\" rel=\"nofollow noreferrer\">documentation</a> which will help you to create your own.</p>\n<p>EX: <code>sudo systemctl start my_java_spring_service</code></p>\n<p>I hope it helps!</p>\n"}],"owner":{"account_id":26412994,"reputation":1,"user_id":20061827,"display_name":"Sai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1665651715,"creation_date":1665165590,"question_id":73991017,"body_markdown":"How to deploy the jar/war file in unix box and it should not stop after closing putty.\r\n\r\nSteps tried:\r\n1. Created jar/war file from Springboot project\r\n2. Login to Unix box with root user\r\n3. Created a Project folder in /opt path\r\n4. Copied the jar/war file in Project folder\r\n5. Executed below command to run the application in putty:\r\nCommand: java -jar myapplication.jar\r\n6. Application is running fine but issue comes when i close my putty. Application shutdowns. \r\n\r\n\r\nAny suggestions... ","title":"Springboot application is stopping after closing the putty in unix box","body":"<p>How to deploy the jar/war file in unix box and it should not stop after closing putty.</p>\n<p>Steps tried:</p>\n<ol>\n<li>Created jar/war file from Springboot project</li>\n<li>Login to Unix box with root user</li>\n<li>Created a Project folder in /opt path</li>\n<li>Copied the jar/war file in Project folder</li>\n<li>Executed below command to run the application in putty:\nCommand: java -jar myapplication.jar</li>\n<li>Application is running fine but issue comes when i close my putty. Application shutdowns.</li>\n</ol>\n<p>Any suggestions...</p>\n"},{"tags":["java","api","testing","hamcrest","assertthat"],"comments":[{"owner":{"account_id":154192,"reputation":3472,"user_id":369946,"accept_rate":75,"display_name":"Matt"},"score":2,"creation_date":1665650181,"post_id":74052730,"comment_id":130750930,"body_markdown":"Is the `equals` method overridden in `ExampleResponse `?\nBy default in java, 2 references are equals only if they are exactly the same instance.","body":"Is the <code>equals</code> method overridden in <code>ExampleResponse </code>? By default in java, 2 references are equals only if they are exactly the same instance."},{"owner":{"account_id":25365531,"reputation":127,"user_id":19180163,"display_name":"Marcin"},"score":0,"creation_date":1665650519,"post_id":74052730,"comment_id":130751037,"body_markdown":"I think I don&#39;t understand what you mean. Can you explain more detalistic :)","body":"I think I don&#39;t understand what you mean. Can you explain more detalistic :)"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1665657392,"post_id":74052730,"comment_id":130753293,"body_markdown":"`new Object().equals(new Object())` is false, because the `equals` method is not overridden. If you haven&#39;t overridden this method, two instances cannot be tested for equality.","body":"<code>new Object().equals(new Object())</code> is false, because the <code>equals</code> method is not overridden. If you haven&#39;t overridden this method, two instances cannot be tested for equality."},{"owner":{"account_id":25365531,"reputation":127,"user_id":19180163,"display_name":"Marcin"},"score":0,"creation_date":1665659092,"post_id":74052730,"comment_id":130753808,"body_markdown":"Thanks for explanation, but I think I found another solution using is(equalTo())\n      So now, code looks like that :  assertThat(&quot;Response body is not the same with expected body&quot;, bodyResponse, is(equalTo(bodyExpected)));\nand it is working :)","body":"Thanks for explanation, but I think I found another solution using is(equalTo())       So now, code looks like that :  assertThat(&quot;Response body is not the same with expected body&quot;, bodyResponse, is(equalTo(bodyExpected))); and it is working :)"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1665660271,"post_id":74052730,"comment_id":130754176,"body_markdown":"@Marcin that&#39;s odd, given that `is` doesn&#39;t do anything, it exists [solely to make tests read nicer](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#is(org.hamcrest.Matcher)).","body":"@Marcin that&#39;s odd, given that <code>is</code> doesn&#39;t do anything, it exists <a href=\"http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#is(org.hamcrest.Matcher)\" rel=\"nofollow noreferrer\">solely to make tests read nicer</a>."}],"answers":[{"tags":[],"owner":{"account_id":282514,"reputation":1467,"user_id":579448,"accept_rate":65,"display_name":"Josef"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665651293,"creation_date":1665651293,"answer_id":74053027,"question_id":74052730,"body_markdown":"Java uses the equals Method to check for equality.\r\nYou need to implement this!\r\n\r\nSee [here](https://stackoverflow.com/a/34411967/579448)","title":"Hamcrest assertThat() error - objects are not the same","body":"<p>Java uses the equals Method to check for equality.\nYou need to implement this!</p>\n<p>See <a href=\"https://stackoverflow.com/a/34411967/579448\">here</a></p>\n"}],"owner":{"account_id":25365531,"reputation":127,"user_id":19180163,"display_name":"Marcin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665651293,"creation_date":1665649981,"question_id":74052730,"body_markdown":"I have trouble with comparing two object.\r\n\r\n    var response = api.getRequest();\r\n    response.statusCode(200);\r\n\r\n    response.body(JsonSchemaValidator.matchesJsonSchema....);\r\n    \r\n    var bodyResponse = response.extract().as(ExampleResponse.class);\r\n    var bodyExpected = ExampleResponse.builder()...build().\r\n    \r\n    assertThat(&quot;Response body is not the same with expected body&quot;,bodyResponse, equalTo(bodyExpected));\r\n\r\nIn test I&#39;m getting error that response body and expected are not the same :/ \r\n\r\nI couldn&#39;t upload image with compared object but belive me, they are the same (I checked in debugger) :) \r\n\r\nThanks for any tips :) ","title":"Hamcrest assertThat() error - objects are not the same","body":"<p>I have trouble with comparing two object.</p>\n<pre><code>var response = api.getRequest();\nresponse.statusCode(200);\n\nresponse.body(JsonSchemaValidator.matchesJsonSchema....);\n\nvar bodyResponse = response.extract().as(ExampleResponse.class);\nvar bodyExpected = ExampleResponse.builder()...build().\n\nassertThat(&quot;Response body is not the same with expected body&quot;,bodyResponse, equalTo(bodyExpected));\n</code></pre>\n<p>In test I'm getting error that response body and expected are not the same :/</p>\n<p>I couldn't upload image with compared object but belive me, they are the same (I checked in debugger) :)</p>\n<p>Thanks for any tips :)</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":25719058,"reputation":407,"user_id":19476294,"display_name":"Sumit"},"score":0,"creation_date":1665578304,"post_id":74041734,"comment_id":130732997,"body_markdown":"Can you show your customerController Code too","body":"Can you show your customerController Code too"},{"owner":{"account_id":25719058,"reputation":407,"user_id":19476294,"display_name":"Sumit"},"score":0,"creation_date":1665583430,"post_id":74041734,"comment_id":130735256,"body_markdown":"Could you please show the entity table too as everything seems fine here","body":"Could you please show the entity table too as everything seems fine here"},{"owner":{"account_id":18552972,"reputation":3,"user_id":13518809,"display_name":"VisualNewbie"},"score":0,"creation_date":1665586525,"post_id":74041734,"comment_id":130736590,"body_markdown":"I added the table. I can reach it from MySQL, it has values, seems to be OK. Tried the link other person provided, while nearly the same it still has changes, so I would like to stick to this particular code, simply because figuring out the issue might be worth it.","body":"I added the table. I can reach it from MySQL, it has values, seems to be OK. Tried the link other person provided, while nearly the same it still has changes, so I would like to stick to this particular code, simply because figuring out the issue might be worth it."},{"owner":{"account_id":25719058,"reputation":407,"user_id":19476294,"display_name":"Sumit"},"score":0,"creation_date":1665586660,"post_id":74041734,"comment_id":130736652,"body_markdown":"Sorry i mean share the entity which you created in java . As sometimes this issue comes when using updated hibernate version","body":"Sorry i mean share the entity which you created in java . As sometimes this issue comes when using updated hibernate version"},{"owner":{"account_id":18552972,"reputation":3,"user_id":13518809,"display_name":"VisualNewbie"},"score":0,"creation_date":1665587938,"post_id":74041734,"comment_id":130737158,"body_markdown":"Here is the entity class, since it has to annotations that map to sessionFactory I thought this might not be the issue, but honestly everything seems fine, I have absolutely no clue what is wrong here. Maybe the libraries added to the project interfere some sort of versions.","body":"Here is the entity class, since it has to annotations that map to sessionFactory I thought this might not be the issue, but honestly everything seems fine, I have absolutely no clue what is wrong here. Maybe the libraries added to the project interfere some sort of versions."}],"answers":[{"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665651280,"creation_date":1665651280,"answer_id":74053022,"question_id":74041734,"body_markdown":"I will assume that you have a collision with your dependencies, which means that you probably have a lib folder with some hibernate jars that are colliding with dependencies from your pom.xml\r\nWhat you need to do is to remove that lib folder completely because you already have all dependencies that you need in your pom.xml\r\nAfter that find your .m2 folder \r\n\r\n    Unix/Mac OS X – ~/. m2/repository.\r\n    Windows – C:\\Users\\{your-username}\\. m2\\repository.\r\nDelete the content of it, import your project back into your IDE &gt; Maven &gt; Update, and simply run your project again.","title":"Error message: Internal server error 500 sessionFactory","body":"<p>I will assume that you have a collision with your dependencies, which means that you probably have a lib folder with some hibernate jars that are colliding with dependencies from your pom.xml\nWhat you need to do is to remove that lib folder completely because you already have all dependencies that you need in your pom.xml\nAfter that find your .m2 folder</p>\n<pre><code>Unix/Mac OS X – ~/. m2/repository.\nWindows – C:\\Users\\{your-username}\\. m2\\repository.\n</code></pre>\n<p>Delete the content of it, import your project back into your IDE &gt; Maven &gt; Update, and simply run your project again.</p>\n"}],"owner":{"account_id":18552972,"reputation":3,"user_id":13518809,"display_name":"VisualNewbie"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74053022,"answer_count":1,"score":0,"last_activity_date":1665651280,"creation_date":1665577234,"question_id":74041734,"body_markdown":"so I am using IntelliJ and the code was running up until using @Autowired\r\n\r\n\r\n\r\nTroubleshooting done:\r\n\r\nI have copied Customer controller, CustomerDAO and CustomerDAOImpl from Chad to make sure the imports and spelling are alright\r\n\r\nCopied over xml files too, checked my folder mappings\r\n\r\n\r\n\r\nUnfortunately the issue persists, I have read some threads on issues between jar files but I was not able to resolve the issue\r\n\r\n\r\n\r\nThe main cause seems to be that sessionFactory is unable to initialize for a reason, which I cannot resolve by myself. Any help would be greatly appreciated.\r\n\r\n**CustomerDAO.java**\r\n```\r\npackage com.luv2code.springdemo.dao;\r\n\r\nimport java.util.List;\r\n\r\nimport com.luv2code.springdemo.entity.Customer;\r\n\r\npublic interface CustomerDAO {\r\n\r\n    public List&lt;Customer&gt; getCustomers();\r\n\r\n}\r\n```\r\n\r\n**CustomerDAOImpl**\r\n```\r\npackage com.luv2code.springdemo.dao;\r\n\r\nimport java.util.List;\r\n\r\nimport org.hibernate.Session;\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.query.Query;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Repository;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\nimport com.luv2code.springdemo.entity.Customer;\r\n\r\n@Repository\r\npublic class CustomerDAOImpl implements CustomerDAO {\r\n\r\n    // need to inject the session factory\r\n    @Autowired\r\n    private SessionFactory sessionFactory;\r\n\r\n    @Override\r\n    @Transactional\r\n    public List&lt;Customer&gt; getCustomers() {\r\n\r\n        // get the current hibernate session\r\n        Session currentSession = sessionFactory.getCurrentSession();\r\n\r\n        // create a query\r\n        Query&lt;Customer&gt; theQuery = currentSession.createQuery(&quot;from Customer&quot;, Customer.class);\r\n\r\n        // execute query and get result list\r\n        List&lt;Customer&gt; customers = theQuery.getResultList();\r\n\r\n        // return the results\r\n        return customers;\r\n    }\r\n\r\n}\r\n```\r\n\r\n**spring-mvc-crud-demo-servlet.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n\txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n\txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n\txsi:schemaLocation=&quot;\r\n\t\thttp://www.springframework.org/schema/beans\r\n\t\thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n\t\thttp://www.springframework.org/schema/context\r\n\t\thttp://www.springframework.org/schema/context/spring-context.xsd\r\n\t\thttp://www.springframework.org/schema/mvc\r\n\t\thttp://www.springframework.org/schema/mvc/spring-mvc.xsd\r\n\t\thttp://www.springframework.org/schema/tx \r\n\t\thttp://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;\r\n\r\n\t&lt;!-- Add support for component scanning --&gt;\r\n\t&lt;context:component-scan base-package=&quot;com.luv2code.springdemo&quot; /&gt;\r\n\r\n\t&lt;!-- Add support for conversion, formatting and validation support --&gt;\r\n\t&lt;mvc:annotation-driven/&gt;\r\n\r\n\t&lt;!-- Define Spring MVC view resolver --&gt;\r\n\t&lt;bean\r\n\t\tclass=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n\t\t&lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/view/&quot; /&gt;\r\n\t\t&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n    &lt;!-- Step 1: Define Database DataSource / connection pool --&gt;\r\n\t&lt;bean id=&quot;myDataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;\r\n          destroy-method=&quot;close&quot;&gt;\r\n        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;\r\n        &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/web_customer_tracker?useSSL=false&amp;amp;serverTimezone=UTC&quot; /&gt;\r\n        &lt;property name=&quot;user&quot; value=&quot;springstudent&quot; /&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;springstudent&quot; /&gt; \r\n\r\n        &lt;!-- these are connection pool properties for C3P0 --&gt;\r\n        &lt;property name=&quot;minPoolSize&quot; value=&quot;5&quot; /&gt;\r\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;20&quot; /&gt;\r\n        &lt;property name=&quot;maxIdleTime&quot; value=&quot;30000&quot; /&gt;\r\n\t&lt;/bean&gt;  \r\n\t\r\n    &lt;!-- Step 2: Setup Hibernate session factory --&gt;\r\n\t&lt;bean id=&quot;sessionFactory&quot;\r\n\t\tclass=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;packagesToScan&quot; value=&quot;com.luv2code.springdemo&quot; /&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t   &lt;props&gt;\r\n\t\t      &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\r\n\t\t      &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n\t\t   &lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n   &lt;/bean&gt;\t  \r\n\r\n    &lt;!-- Step 3: Setup Hibernate transaction manager --&gt;\r\n\t&lt;bean id=&quot;myTransactionManager&quot;\r\n            class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\r\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;/&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;!-- Step 4: Enable configuration of transactional behavior based on annotations --&gt;\r\n\t&lt;tx:annotation-driven transaction-manager=&quot;myTransactionManager&quot; /&gt;\r\n\r\n&lt;/beans&gt;\r\n```\r\n\r\n**web.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt;\r\n  &lt;display-name&gt;spring-mvc-crud-demo&lt;/display-name&gt;\r\n\r\n  &lt;absolute-ordering /&gt;\r\n\r\n  &lt;welcome-file-list&gt;\r\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\r\n  &lt;/welcome-file-list&gt;\r\n\r\n  &lt;servlet&gt;\r\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n    &lt;init-param&gt;\r\n      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n      &lt;param-value&gt;/WEB-INF/spring-mvc-crud-demo-servlet.xml&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n  &lt;/servlet&gt;\r\n  \r\n  &lt;servlet-mapping&gt;\r\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\r\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n  &lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n```\r\n\r\n**pom.xml**\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.luv2code.springdemo&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-crm&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0.0&lt;/version&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;springframework.version&gt;5.1.0.RELEASE&lt;/springframework.version&gt;\r\n    &lt;hibernate.version&gt;5.3.6.Final&lt;/hibernate.version&gt;\r\n    &lt;mysql.connector.version&gt;8.0.12&lt;/mysql.connector.version&gt;\r\n    &lt;c3po.version&gt;0.9.5.2&lt;/c3po.version&gt;\r\n\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n\r\n    &lt;!-- Spring --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n      &lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n      &lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n      &lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- Hibernate --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n      &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n      &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- MySQL --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n      &lt;version&gt;${mysql.connector.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- C3PO --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.mchange&lt;/groupId&gt;\r\n      &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\r\n      &lt;version&gt;${c3po.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- Servlet+JSP+JSTL --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n      &lt;version&gt;3.1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n      &lt;version&gt;1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n    &lt;!-- to compensate for java 9 not including jaxb --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n\r\n    &lt;finalName&gt;spring-crm&lt;/finalName&gt;\r\n\r\n    &lt;plugins&gt;\r\n\r\n      &lt;!-- Builds a Web Application Archive (WAR) file from the project output\r\n          and its dependencies. --&gt;\r\n      &lt;plugin&gt;\r\n        &lt;!-- Add Maven coordinates (GAV) for: maven-war-plugin --&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.0&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**Directories**\r\n[path of classes][1]\r\n\r\n\r\n**And the actual error**\r\n```\r\n12-Oct-2022 15:17:12.697 SEVERE [main] org.springframework.web.servlet.FrameworkServlet.initServletBean Context initialization failed\r\n\torg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;customerController&#39;: Unsatisfied dependency expressed through field &#39;customerDAO&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;customerDAOImpl&#39;: Unsatisfied dependency expressed through field &#39;sessionFactory&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in ServletContext resource [/WEB-INF/spring-mvc-crud-demo-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: &#39;javax.persistence.Index[] javax.persistence.Table.indexes()&#39;\r\n\t\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:598)\r\n\t\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\r\n\t\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:376)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1377)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:848)\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:865)\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:548)\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:696)\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:662)\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:710)\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:587)\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:526)\r\n\t\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\r\n\t\tat javax.servlet.GenericServlet.init(GenericServlet.java:158)\r\n\t\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1164)\r\n\t\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1117)\r\n\t\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)\r\n\t\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4958)\r\n\t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5265)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n\t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:690)\r\n\t\tat org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1889)\r\n\t\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\t\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\t\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:583)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:473)\r\n\t\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n\t\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n\t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n\t\tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n\t\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n\t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n\t\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\t\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\t\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n\t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\t\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n\tCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;customerDAOImpl&#39;: Unsatisfied dependency expressed through field &#39;sessionFactory&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in ServletContext resource [/WEB-INF/spring-mvc-crud-demo-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: &#39;javax.persistence.Index[] javax.persistence.Table.indexes()&#39;\r\n\t\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:598)\r\n\t\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\r\n\t\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:376)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1377)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1241)\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168)\r\n\t\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:595)\r\n\t\t... 63 more\r\n\tCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in ServletContext resource [/WEB-INF/spring-mvc-crud-demo-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: &#39;javax.persistence.Index[] javax.persistence.Table.indexes()&#39;\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1744)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\t\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1241)\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168)\r\n\t\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:595)\r\n\t\t... 76 more\r\n\tCaused by: java.lang.NoSuchMethodError: &#39;javax.persistence.Index[] javax.persistence.Table.indexes()&#39;\r\n\t\tat org.hibernate.cfg.annotations.EntityBinder.processComplementaryTableDefinitions(EntityBinder.java:1236)\r\n\t\tat org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:833)\r\n\t\tat org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:250)\r\n\t\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:231)\r\n\t\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:274)\r\n\t\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:84)\r\n\t\tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:474)\r\n\t\tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:85)\r\n\t\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:689)\r\n\t\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\r\n\t\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:615)\r\n\t\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:599)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1803)\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1740)\r\n\t\t... 86 more\r\n12-Oct-2022 15:17:12.709 INFO [main] org.apache.catalina.startup.HostConfig.deployDescriptor Deployment of deployment descriptor [C:\\Users\\Slimas\\.SmartTomcat\\hMvc\\hMvc\\conf\\Catalina\\localhost\\web-hibernate-mvc.xml] has finished in [3,309] ms\r\n12-Oct-2022 15:17:12.711 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-7070&quot;]\r\n12-Oct-2022 15:17:12.721 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [3360] milliseconds\r\nhttp://localhost:7070/web-hibernate-mvc/\r\n```\r\n\r\n**CustomerController.java**\r\n```\r\npackage com.luv2code.springdemo.controller;\r\n\r\nimport java.util.List;\r\n\r\nimport com.luv2code.springdemo.dao.CustomerDAO;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\nimport com.luv2code.springdemo.entity.Customer;\r\n\r\n@Controller\r\n@RequestMapping(&quot;/customer&quot;)\r\npublic class CustomerController {\r\n\r\n\t// need to inject the customer dao\r\n\t@Autowired\r\n\tprivate CustomerDAO customerDAO;\r\n\r\n\t@RequestMapping(&quot;/list&quot;)\r\n\tpublic String listCustomers(Model theModel) {\r\n\r\n\t\t// get customers from the dao\r\n\t\tList&lt;Customer&gt; theCustomers = customerDAO.getCustomers();\r\n\r\n\t\t// add the customers to the model\r\n\t\ttheModel.addAttribute(&quot;customers&quot;, theCustomers);\r\n\r\n\t\treturn &quot;list-customers&quot;;\r\n\t}\r\n\r\n}\r\n```\r\n**Table itself in MySQL**\r\n[Table][2]\r\n\r\n**Customer.java entity**\r\n```\r\npackage com.luv2code.springdemo.entity;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n\r\n@Entity\r\n@Table(name=&quot;customer&quot;)\r\npublic class Customer {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    @Column(name=&quot;id&quot;)\r\n    private int id;\r\n\r\n    @Column(name=&quot;first_name&quot;)\r\n    private String firstName;\r\n\r\n    @Column(name=&quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    @Column(name=&quot;email&quot;)\r\n    private String email;\r\n\r\n    public Customer() {\r\n\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n\r\n    public void setLastName(String lastName) {\r\n        this.lastName = lastName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Customer [id=&quot; + id + &quot;, firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;, email=&quot; + email + &quot;]&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nNow sorry for this is quite a bit of code, but I&#39;ve honestly tried troubleshooting which led nowhere. Last time a similar issue was resolved by changing dependencies, but since I am not very familiar with them it is a bit troublesome to find an issue there.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VsULZ.png\r\n  [2]: https://i.stack.imgur.com/YWsg5.png","title":"Error message: Internal server error 500 sessionFactory","body":"<p>so I am using IntelliJ and the code was running up until using @Autowired</p>\n<p>Troubleshooting done:</p>\n<p>I have copied Customer controller, CustomerDAO and CustomerDAOImpl from Chad to make sure the imports and spelling are alright</p>\n<p>Copied over xml files too, checked my folder mappings</p>\n<p>Unfortunately the issue persists, I have read some threads on issues between jar files but I was not able to resolve the issue</p>\n<p>The main cause seems to be that sessionFactory is unable to initialize for a reason, which I cannot resolve by myself. Any help would be greatly appreciated.</p>\n<p><strong>CustomerDAO.java</strong></p>\n<pre><code>package com.luv2code.springdemo.dao;\n\nimport java.util.List;\n\nimport com.luv2code.springdemo.entity.Customer;\n\npublic interface CustomerDAO {\n\n    public List&lt;Customer&gt; getCustomers();\n\n}\n</code></pre>\n<p><strong>CustomerDAOImpl</strong></p>\n<pre><code>package com.luv2code.springdemo.dao;\n\nimport java.util.List;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.query.Query;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport com.luv2code.springdemo.entity.Customer;\n\n@Repository\npublic class CustomerDAOImpl implements CustomerDAO {\n\n    // need to inject the session factory\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    @Override\n    @Transactional\n    public List&lt;Customer&gt; getCustomers() {\n\n        // get the current hibernate session\n        Session currentSession = sessionFactory.getCurrentSession();\n\n        // create a query\n        Query&lt;Customer&gt; theQuery = currentSession.createQuery(&quot;from Customer&quot;, Customer.class);\n\n        // execute query and get result list\n        List&lt;Customer&gt; customers = theQuery.getResultList();\n\n        // return the results\n        return customers;\n    }\n\n}\n</code></pre>\n<p><strong>spring-mvc-crud-demo-servlet.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n    xsi:schemaLocation=&quot;\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context.xsd\n        http://www.springframework.org/schema/mvc\n        http://www.springframework.org/schema/mvc/spring-mvc.xsd\n        http://www.springframework.org/schema/tx \n        http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;\n\n    &lt;!-- Add support for component scanning --&gt;\n    &lt;context:component-scan base-package=&quot;com.luv2code.springdemo&quot; /&gt;\n\n    &lt;!-- Add support for conversion, formatting and validation support --&gt;\n    &lt;mvc:annotation-driven/&gt;\n\n    &lt;!-- Define Spring MVC view resolver --&gt;\n    &lt;bean\n        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/view/&quot; /&gt;\n        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Step 1: Define Database DataSource / connection pool --&gt;\n    &lt;bean id=&quot;myDataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;\n          destroy-method=&quot;close&quot;&gt;\n        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;\n        &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/web_customer_tracker?useSSL=false&amp;amp;serverTimezone=UTC&quot; /&gt;\n        &lt;property name=&quot;user&quot; value=&quot;springstudent&quot; /&gt;\n        &lt;property name=&quot;password&quot; value=&quot;springstudent&quot; /&gt; \n\n        &lt;!-- these are connection pool properties for C3P0 --&gt;\n        &lt;property name=&quot;minPoolSize&quot; value=&quot;5&quot; /&gt;\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;20&quot; /&gt;\n        &lt;property name=&quot;maxIdleTime&quot; value=&quot;30000&quot; /&gt;\n    &lt;/bean&gt;  \n    \n    &lt;!-- Step 2: Setup Hibernate session factory --&gt;\n    &lt;bean id=&quot;sessionFactory&quot;\n        class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;com.luv2code.springdemo&quot; /&gt;\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\n           &lt;props&gt;\n              &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n              &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\n           &lt;/props&gt;\n        &lt;/property&gt;\n   &lt;/bean&gt;    \n\n    &lt;!-- Step 3: Setup Hibernate transaction manager --&gt;\n    &lt;bean id=&quot;myTransactionManager&quot;\n            class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;/&gt;\n    &lt;/bean&gt;\n    \n    &lt;!-- Step 4: Enable configuration of transactional behavior based on annotations --&gt;\n    &lt;tx:annotation-driven transaction-manager=&quot;myTransactionManager&quot; /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n<p><strong>web.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt;\n  &lt;display-name&gt;spring-mvc-crud-demo&lt;/display-name&gt;\n\n  &lt;absolute-ordering /&gt;\n\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n      &lt;param-value&gt;/WEB-INF/spring-mvc-crud-demo-servlet.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  \n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.luv2code.springdemo&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-crm&lt;/artifactId&gt;\n  &lt;version&gt;1.0.0&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n\n  &lt;properties&gt;\n    &lt;springframework.version&gt;5.1.0.RELEASE&lt;/springframework.version&gt;\n    &lt;hibernate.version&gt;5.3.6.Final&lt;/hibernate.version&gt;\n    &lt;mysql.connector.version&gt;8.0.12&lt;/mysql.connector.version&gt;\n    &lt;c3po.version&gt;0.9.5.2&lt;/c3po.version&gt;\n\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n\n    &lt;!-- Spring --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n      &lt;version&gt;${springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n      &lt;version&gt;${springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n      &lt;version&gt;${springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Hibernate --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n      &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n      &lt;version&gt;${hibernate.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- MySQL --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n      &lt;version&gt;${mysql.connector.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- C3PO --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.mchange&lt;/groupId&gt;\n      &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\n      &lt;version&gt;${c3po.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Servlet+JSP+JSTL --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;3.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\n      &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n      &lt;version&gt;1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;!-- to compensate for java 9 not including jaxb --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n      &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n      &lt;version&gt;2.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n\n    &lt;finalName&gt;spring-crm&lt;/finalName&gt;\n\n    &lt;plugins&gt;\n\n      &lt;!-- Builds a Web Application Archive (WAR) file from the project output\n          and its dependencies. --&gt;\n      &lt;plugin&gt;\n        &lt;!-- Add Maven coordinates (GAV) for: maven-war-plugin --&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n      &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Directories</strong>\n<a href=\"https://i.stack.imgur.com/VsULZ.png\" rel=\"nofollow noreferrer\">path of classes</a></p>\n<p><strong>And the actual error</strong></p>\n<pre><code>12-Oct-2022 15:17:12.697 SEVERE [main] org.springframework.web.servlet.FrameworkServlet.initServletBean Context initialization failed\n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'customerController': Unsatisfied dependency expressed through field 'customerDAO'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'customerDAOImpl': Unsatisfied dependency expressed through field 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-mvc-crud-demo-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: 'javax.persistence.Index[] javax.persistence.Table.indexes()'\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:598)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:376)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1377)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:848)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:865)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:548)\n        at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:696)\n        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:662)\n        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:710)\n        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:587)\n        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:526)\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\n        at javax.servlet.GenericServlet.init(GenericServlet.java:158)\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1164)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1117)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4958)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5265)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:690)\n        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1889)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\n        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:583)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:473)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'customerDAOImpl': Unsatisfied dependency expressed through field 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-mvc-crud-demo-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: 'javax.persistence.Index[] javax.persistence.Table.indexes()'\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:598)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:376)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1377)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1241)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:595)\n        ... 63 more\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-mvc-crud-demo-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: 'javax.persistence.Index[] javax.persistence.Table.indexes()'\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1744)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1241)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:595)\n        ... 76 more\n    Caused by: java.lang.NoSuchMethodError: 'javax.persistence.Index[] javax.persistence.Table.indexes()'\n        at org.hibernate.cfg.annotations.EntityBinder.processComplementaryTableDefinitions(EntityBinder.java:1236)\n        at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:833)\n        at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:250)\n        at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:231)\n        at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:274)\n        at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:84)\n        at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:474)\n        at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:85)\n        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:689)\n        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\n        at org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:615)\n        at org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:599)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1803)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1740)\n        ... 86 more\n12-Oct-2022 15:17:12.709 INFO [main] org.apache.catalina.startup.HostConfig.deployDescriptor Deployment of deployment descriptor [C:\\Users\\Slimas\\.SmartTomcat\\hMvc\\hMvc\\conf\\Catalina\\localhost\\web-hibernate-mvc.xml] has finished in [3,309] ms\n12-Oct-2022 15:17:12.711 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-7070&quot;]\n12-Oct-2022 15:17:12.721 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [3360] milliseconds\nhttp://localhost:7070/web-hibernate-mvc/\n</code></pre>\n<p><strong>CustomerController.java</strong></p>\n<pre><code>package com.luv2code.springdemo.controller;\n\nimport java.util.List;\n\nimport com.luv2code.springdemo.dao.CustomerDAO;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport com.luv2code.springdemo.entity.Customer;\n\n@Controller\n@RequestMapping(&quot;/customer&quot;)\npublic class CustomerController {\n\n    // need to inject the customer dao\n    @Autowired\n    private CustomerDAO customerDAO;\n\n    @RequestMapping(&quot;/list&quot;)\n    public String listCustomers(Model theModel) {\n\n        // get customers from the dao\n        List&lt;Customer&gt; theCustomers = customerDAO.getCustomers();\n\n        // add the customers to the model\n        theModel.addAttribute(&quot;customers&quot;, theCustomers);\n\n        return &quot;list-customers&quot;;\n    }\n\n}\n</code></pre>\n<p><strong>Table itself in MySQL</strong>\n<a href=\"https://i.stack.imgur.com/YWsg5.png\" rel=\"nofollow noreferrer\">Table</a></p>\n<p><strong>Customer.java entity</strong></p>\n<pre><code>package com.luv2code.springdemo.entity;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name=&quot;customer&quot;)\npublic class Customer {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private int id;\n\n    @Column(name=&quot;first_name&quot;)\n    private String firstName;\n\n    @Column(name=&quot;last_name&quot;)\n    private String lastName;\n\n    @Column(name=&quot;email&quot;)\n    private String email;\n\n    public Customer() {\n\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Customer [id=&quot; + id + &quot;, firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;, email=&quot; + email + &quot;]&quot;;\n    }\n\n}\n</code></pre>\n<p>Now sorry for this is quite a bit of code, but I've honestly tried troubleshooting which led nowhere. Last time a similar issue was resolved by changing dependencies, but since I am not very familiar with them it is a bit troublesome to find an issue there.</p>\n"},{"tags":["java","encryption","hash","sha","hmac"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1475245981,"post_id":39784955,"comment_id":66880848,"body_markdown":"According to your description the `message input must be coded in the ASCII` but you encode it in hex: `hexvalue= stringToHexByte(str);`.","body":"According to your description the <code>message input must be coded in the ASCII</code> but you encode it in hex: <code>hexvalue= stringToHexByte(str);</code>."},{"owner":{"account_id":1355213,"reputation":1093,"user_id":1293752,"accept_rate":59,"display_name":"kamal"},"score":0,"creation_date":1525933820,"post_id":39784955,"comment_id":87551477,"body_markdown":"Sandesh, did you solve the problem which you asked? I am face to face \nwith this problem now.","body":"Sandesh, did you solve the problem which you asked? I am face to face  with this problem now."},{"owner":{"account_id":3010720,"reputation":1175,"user_id":5413146,"display_name":"Sandesh Gupta"},"score":0,"creation_date":1525933962,"post_id":39784955,"comment_id":87551552,"body_markdown":"@kamal Yes. I completed it, but I don&#39;t remember the solution. I don&#39;t have access to code as well. sorry mate!","body":"@kamal Yes. I completed it, but I don&#39;t remember the solution. I don&#39;t have access to code as well. sorry mate!"},{"owner":{"account_id":1355213,"reputation":1093,"user_id":1293752,"accept_rate":59,"display_name":"kamal"},"score":0,"creation_date":1525939200,"post_id":39784955,"comment_id":87554110,"body_markdown":"@SandeshGupta ok thanks","body":"@SandeshGupta ok thanks"}],"owner":{"account_id":3010720,"reputation":1175,"user_id":5413146,"display_name":"Sandesh Gupta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15176,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":0,"score":2,"last_activity_date":1665651016,"creation_date":1475216593,"question_id":39784955,"body_markdown":"I have been given a set of steps to obtain a hash of data. I have trying to comprehend the steps for quite long now, but the hash that I am getting doesn&#39;t seem to match expected hash.\r\n\r\nThe steps that was mentioned is as follows:\r\n\r\n1. Use the FIN message input as a binary value (unsigned char in C language, byte in Java). The FIN message input must be coded in the ASCII character set.\r\n2. Combine the left LAU key and the right LAU key as one string. The merged LAU key must be used as a binary value (unsigned char in C language, byte in Java). The merged LAU key must be coded in the ASCII character set.\r\n3. Call a HMAC256 routine to compute the hash value. The hash value must also be treated as a binary value (unsigned char in C language, byte in Java). The hmac size is 32 bytes.\r\n4. Convert the hmac binary values to uppercase hexadecimal printable characters (for example, a onebyte binary value of 0000 1010 has a hexadecimal value of 0x0A and will be translated to the twobyte characters “0A”).\r\n\r\n\r\nThis is what I have tried. \r\n\r\n    import javax.crypto.Mac;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import javax.xml.bind.DatatypeConverter;\r\n    \r\n    import java.security.InvalidKeyException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import org.apache.commons.codec.binary.Hex;\r\n    \r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.math.BigInteger;\r\n    import java.nio.charset.StandardCharsets;\r\n    \r\n    \r\n    public class ABCHash {\r\n        public static void main(String[] args) throws Exception {\r\n            try {\r\n                int character;\r\n                StringBuffer buffer = new StringBuffer(&quot;&quot;);\r\n                FileInputStream inputStream = new FileInputStream(new File(&quot;C:/EncPDF.txt&quot;));\r\n\r\n                while( (character = inputStream.read()) != -1)\r\n                    buffer.append((char) character);\r\n\r\n                inputStream.close();\r\n                System.out.println(&quot;Fetching data from the file&quot;+buffer);\r\n\r\n                StringBuffer sbuf = new StringBuffer(buffer);\r\n               \r\n                String str=sbuf.toString();\r\n               \r\n                System.out.println( &quot;Data = &quot;+ str);\r\n                if(str!=null) {\r\n                    String key = &quot;0123456789ABCDEF0123456789ABCDEF&quot;; // Assuming the key as 0123456789ABCDEF\r\n                   \r\n                    byte[] hexvalue= stringToHexByte(str);\r\n                    byte[] hexkey=stringToHexByte(key);\r\n                    byte[] byHMAC = encode(hexkey, hexvalue);\r\n                    String stEncryptedData = Hex.encodeHexString(byHMAC).toUpperCase();\r\n                   \r\n                    System.out.println(&quot;Encrypted data =\\n &quot;+stEncryptedData);\r\n                }\r\n            } catch(Exception e) {\r\n                System.out.println(&quot;Exception in the file reading&quot;+e);\r\n            }\r\n        }\r\n\r\n        private static byte[] encode(byte[] hexkey, byte[] hexvalue) {\r\n            try {\r\n                Mac sha256_HMAC = Mac.getInstance(&quot;HmacSHA256&quot;);\r\n                SecretKeySpec secret_key = new SecretKeySpec(hexkey, &quot;HmacSHA256&quot;);\r\n                sha256_HMAC.init(secret_key);\r\n\r\n                return sha256_HMAC.doFinal(hexvalue);\r\n\r\n            } catch (NoSuchAlgorithmException e) {\r\n                e.printStackTrace();\r\n            } catch (InvalidKeyException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            return null;\r\n        }\r\n       \r\n        public static String stringToHex(String base) throws UnsupportedEncodingException {\r\n            return String.format(&quot;%040x&quot;, new BigInteger(1, base.getBytes(StandardCharsets.US_ASCII)));\r\n        }\r\n       \r\n        public static byte[] stringToHexByte(String base) throws UnsupportedEncodingException {\r\n            System.out.println(stringToHex(base).toUpperCase());\r\n            return DatatypeConverter.parseHexBinary(stringToHex(base).toUpperCase());\r\n        }\r\n\r\n    }\r\n\r\nIt will be really helpful if someone can point whats wrong with the implementation.\r\n","title":"HmacSHA256 Hashing in Java","body":"<p>I have been given a set of steps to obtain a hash of data. I have trying to comprehend the steps for quite long now, but the hash that I am getting doesn't seem to match expected hash.</p>\n<p>The steps that was mentioned is as follows:</p>\n<ol>\n<li>Use the FIN message input as a binary value (unsigned char in C language, byte in Java). The FIN message input must be coded in the ASCII character set.</li>\n<li>Combine the left LAU key and the right LAU key as one string. The merged LAU key must be used as a binary value (unsigned char in C language, byte in Java). The merged LAU key must be coded in the ASCII character set.</li>\n<li>Call a HMAC256 routine to compute the hash value. The hash value must also be treated as a binary value (unsigned char in C language, byte in Java). The hmac size is 32 bytes.</li>\n<li>Convert the hmac binary values to uppercase hexadecimal printable characters (for example, a onebyte binary value of 0000 1010 has a hexadecimal value of 0x0A and will be translated to the twobyte characters “0A”).</li>\n</ol>\n<p>This is what I have tried.</p>\n<pre><code>import javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\nimport javax.xml.bind.DatatypeConverter;\n\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport org.apache.commons.codec.binary.Hex;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.UnsupportedEncodingException;\nimport java.math.BigInteger;\nimport java.nio.charset.StandardCharsets;\n\n\npublic class ABCHash {\n    public static void main(String[] args) throws Exception {\n        try {\n            int character;\n            StringBuffer buffer = new StringBuffer(&quot;&quot;);\n            FileInputStream inputStream = new FileInputStream(new File(&quot;C:/EncPDF.txt&quot;));\n\n            while( (character = inputStream.read()) != -1)\n                buffer.append((char) character);\n\n            inputStream.close();\n            System.out.println(&quot;Fetching data from the file&quot;+buffer);\n\n            StringBuffer sbuf = new StringBuffer(buffer);\n           \n            String str=sbuf.toString();\n           \n            System.out.println( &quot;Data = &quot;+ str);\n            if(str!=null) {\n                String key = &quot;0123456789ABCDEF0123456789ABCDEF&quot;; // Assuming the key as 0123456789ABCDEF\n               \n                byte[] hexvalue= stringToHexByte(str);\n                byte[] hexkey=stringToHexByte(key);\n                byte[] byHMAC = encode(hexkey, hexvalue);\n                String stEncryptedData = Hex.encodeHexString(byHMAC).toUpperCase();\n               \n                System.out.println(&quot;Encrypted data =\\n &quot;+stEncryptedData);\n            }\n        } catch(Exception e) {\n            System.out.println(&quot;Exception in the file reading&quot;+e);\n        }\n    }\n\n    private static byte[] encode(byte[] hexkey, byte[] hexvalue) {\n        try {\n            Mac sha256_HMAC = Mac.getInstance(&quot;HmacSHA256&quot;);\n            SecretKeySpec secret_key = new SecretKeySpec(hexkey, &quot;HmacSHA256&quot;);\n            sha256_HMAC.init(secret_key);\n\n            return sha256_HMAC.doFinal(hexvalue);\n\n        } catch (NoSuchAlgorithmException e) {\n            e.printStackTrace();\n        } catch (InvalidKeyException e) {\n            e.printStackTrace();\n        }\n\n        return null;\n    }\n   \n    public static String stringToHex(String base) throws UnsupportedEncodingException {\n        return String.format(&quot;%040x&quot;, new BigInteger(1, base.getBytes(StandardCharsets.US_ASCII)));\n    }\n   \n    public static byte[] stringToHexByte(String base) throws UnsupportedEncodingException {\n        System.out.println(stringToHex(base).toUpperCase());\n        return DatatypeConverter.parseHexBinary(stringToHex(base).toUpperCase());\n    }\n\n}\n</code></pre>\n<p>It will be really helpful if someone can point whats wrong with the implementation.</p>\n"},{"tags":["java","apache-flink","avro","flink-sql"],"comments":[{"owner":{"account_id":13829132,"reputation":477,"user_id":11041430,"display_name":"D. Sikilai"},"score":0,"creation_date":1657106593,"post_id":72882412,"comment_id":128729407,"body_markdown":"follow the stack trace or debug your code... surely there must be some errors. maybe somewhere you might have something like `new byte[a&amp;Integer.MAX_VALUE` Or `Integer.MAX_VALUE]` for a buffer where `a` becomes `-1` or something. just debug your code. good debugging :).","body":"follow the stack trace or debug your code... surely there must be some errors. maybe somewhere you might have something like <code>new byte[a&amp;Integer.MAX_VALUE</code> Or <code>Integer.MAX_VALUE]</code> for a buffer where <code>a</code> becomes <code>-1</code> or something. just debug your code. good debugging :)."},{"owner":{"account_id":6565374,"reputation":75,"user_id":5075177,"display_name":"mjennet"},"score":1,"creation_date":1671254313,"post_id":72882412,"comment_id":132064887,"body_markdown":"Were you able to sort this out? I am facing the same problem. This specifically surfaced when I used KafkaSource instead of FlinkKafkaConsumer class. Changing from former to latter helped once but the issue is transient. Didn&#39;t appear every time.","body":"Were you able to sort this out? I am facing the same problem. This specifically surfaced when I used KafkaSource instead of FlinkKafkaConsumer class. Changing from former to latter helped once but the issue is transient. Didn&#39;t appear every time."},{"owner":{"account_id":1567051,"reputation":91,"user_id":1455598,"display_name":"Sajith"},"score":1,"creation_date":1681217578,"post_id":72882412,"comment_id":134017875,"body_markdown":"I&#39;m also getting the same error, but in a different context. When trying to read a message from Kafka, where the message is Avro encoded. Were you able to sort the issue out?","body":"I&#39;m also getting the same error, but in a different context. When trying to read a message from Kafka, where the message is Avro encoded. Were you able to sort the issue out?"}],"owner":{"account_id":16632732,"reputation":179,"user_id":12020220,"display_name":"Invisible"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":500,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665650903,"creation_date":1657105262,"question_id":72882412,"body_markdown":"I am a newbie to Flink/Avro. I am trying Flink 1.14.4 Table API to read the Avro format from Kafka (not the confluent one). I am not able to read any of the message. I am getting the following exception,\r\n\r\n```\r\nCaused by: java.lang.UnsupportedOperationException: Cannot read strings longer than 2147483639 bytes\r\n\tat org.apache.avro.io.BinaryDecoder.readString(BinaryDecoder.java:282)\r\n\tat org.apache.avro.io.ResolvingDecoder.readString(ResolvingDecoder.java:208)\r\n\tat org.apache.avro.generic.GenericDatumReader.readString(GenericDatumReader.java:469)\r\n\tat org.apache.avro.generic.GenericDatumReader.readString(GenericDatumReader.java:459)\r\n\tat org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:191)\r\n```\r\n\r\nSurely I don&#39;t have any string to have 2gb of length. Even the total Kafka storage is a few MB bytes so I don&#39;t think its an issue in the encoded message. What could be the issue here?\r\n\r\nNote: I wrote a simple code (without anything with Flink) to parse the Kafka message and to deserialise myself, which is working perfectly fine. This makes me trouble only when using Flink. What could be the issue?\r\n","title":"Flink Table API SQL throws &quot;Cannot read strings longer than 2147483639 bytes&quot;","body":"<p>I am a newbie to Flink/Avro. I am trying Flink 1.14.4 Table API to read the Avro format from Kafka (not the confluent one). I am not able to read any of the message. I am getting the following exception,</p>\n<pre><code>Caused by: java.lang.UnsupportedOperationException: Cannot read strings longer than 2147483639 bytes\n    at org.apache.avro.io.BinaryDecoder.readString(BinaryDecoder.java:282)\n    at org.apache.avro.io.ResolvingDecoder.readString(ResolvingDecoder.java:208)\n    at org.apache.avro.generic.GenericDatumReader.readString(GenericDatumReader.java:469)\n    at org.apache.avro.generic.GenericDatumReader.readString(GenericDatumReader.java:459)\n    at org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:191)\n</code></pre>\n<p>Surely I don't have any string to have 2gb of length. Even the total Kafka storage is a few MB bytes so I don't think its an issue in the encoded message. What could be the issue here?</p>\n<p>Note: I wrote a simple code (without anything with Flink) to parse the Kafka message and to deserialise myself, which is working perfectly fine. This makes me trouble only when using Flink. What could be the issue?</p>\n"},{"tags":["java","c++","templates","binding","java-native-interface"],"comments":[{"owner":{"account_id":248409,"reputation":4974,"user_id":523744,"display_name":"Samuel Audet"},"score":0,"creation_date":1415320669,"post_id":26776574,"comment_id":42159695,"body_markdown":"Instead of static methods, could you create Java objects, cram any data you need to keep in there, and call methods on that instead?","body":"Instead of static methods, could you create Java objects, cram any data you need to keep in there, and call methods on that instead?"}],"answers":[{"tags":[],"owner":{"account_id":1106277,"reputation":101,"user_id":1097597,"display_name":"crazybie"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1415338684,"creation_date":1415338684,"answer_id":26794791,"question_id":26776574,"body_markdown":"add a integer to the template as a parameter to make unique templates and use macro __LINE__ to auto generate that integer (see note 1):\r\n\r\n    // note 1\r\n    template&lt;int METHODID, typename Arg1&gt;\r\n    struct Wrapper\r\n    {\r\n        map&lt;string, SlotFuncPtr&gt; funMap;\r\n\r\n        void* GetSlotFunc(const char* className, function&lt;void(Arg1)&gt;* slotFunc)\r\n        {\r\n            funcMap[className] = slotFunc; // note 2\r\n            return StaticJniFunc;\r\n        }\r\n\r\n        static JNICALL void StaticJniFunc(JNIEnv* e, jclass c, Arg1 param1)\r\n        {\r\n            auto* slotFunc = funcMap[getClassName(c)]; // note2\r\n\r\n            (*slotFunc)(param1);\r\n        }\r\n    };\r\n    \r\n    // note1\r\n    #define bind_native(name,f) bind_native_&lt;__LINE__&gt;(name,f)\r\n\r\nThen bind_native(...) can generate different static method even for methods with same signature. and in case that same signature functions bound with the same line number, you can distinguish them from the jclass(see note2).\r\n","title":"use c++ template to generate JNI functions","body":"<p>add a integer to the template as a parameter to make unique templates and use macro <strong>LINE</strong> to auto generate that integer (see note 1):</p>\n\n<pre><code>// note 1\ntemplate&lt;int METHODID, typename Arg1&gt;\nstruct Wrapper\n{\n    map&lt;string, SlotFuncPtr&gt; funMap;\n\n    void* GetSlotFunc(const char* className, function&lt;void(Arg1)&gt;* slotFunc)\n    {\n        funcMap[className] = slotFunc; // note 2\n        return StaticJniFunc;\n    }\n\n    static JNICALL void StaticJniFunc(JNIEnv* e, jclass c, Arg1 param1)\n    {\n        auto* slotFunc = funcMap[getClassName(c)]; // note2\n\n        (*slotFunc)(param1);\n    }\n};\n\n// note1\n#define bind_native(name,f) bind_native_&lt;__LINE__&gt;(name,f)\n</code></pre>\n\n<p>Then bind_native(...) can generate different static method even for methods with same signature. and in case that same signature functions bound with the same line number, you can distinguish them from the jclass(see note2).</p>\n"},{"tags":[],"owner":{"account_id":6430985,"reputation":102,"user_id":4984168,"display_name":"Twaik Yont"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665650546,"creation_date":1665650546,"answer_id":74052864,"question_id":26776574,"body_markdown":"I know my answer is a bit late but I hope it will be useful to someone.\r\nI had to bind C++ class (i.e. `C`) to Java class. I implemented Java class with `long peer` inside it to hold a pointer to native instance and method `C::fromJava` which calls `env-&gt;GetLongField(instance, peer)` and casts it to `C*`. This way I can do something like that:\r\n\r\n```\r\n#include &lt;jni.h&gt;\r\n\r\n/* ... */\r\nstatic JavaVM* vm;\r\nstatic inline JNIEnv* getEnv() {\r\n    JNIEnv *env;\r\n\tvm-&gt;GetEnv((void**)&amp;env, JNI_VERSION_1_6);\r\n\treturn env;\r\n}\r\n\r\nstatic thread_local JNIEnv* env = getEnv();\r\n\r\n/* ... */\r\n\r\n/*\r\n * It is simple. Those wrappers get native pointer from Java\r\n * object (from it&#39;s `jlong peer` field) and call given function `f`.\r\n * There are two almost identical templates. One for simple functions and one more for\r\n * class member functions.\r\n * In class member function wrapper pointer to object is available as `this`.\r\n * static_cast`ing let us use every single type, including `void`.\r\n * No need to use `__LINE__` or other integer to identify methods,\r\n * compiler does this automatically.\r\n * if `peer` field is 0 method is noop.\r\n */\r\ntemplate&lt;class F, F f, auto defaultValue&gt; struct wrapper_impl;\r\ntemplate&lt;class R, class A0, class... A, R(*f)(A0*, A...), auto defaultValue&gt;\r\nstruct wrapper_impl&lt;R(*)(A0*, A...), f, defaultValue&gt; {\r\n    static R wrap(JNIEnv* env, jobject obj, A... args) {\r\n        A0* native = A0::fromJava(obj);\r\n        if (native != nullptr)\r\n            return f(native, args...);\r\n        return static_cast&lt;R&gt;(defaultValue);\r\n    }\r\n};\r\ntemplate&lt;class R, class C, class... A, R(C::*f)(A...), auto defaultValue&gt;\r\nstruct wrapper_impl&lt;R(C::*)(A...), f, defaultValue&gt; {\r\n    static R wrap(JNIEnv* env, jobject obj, A... args) {\r\n        C* native = C::fromJava(obj);\r\n        if (native != nullptr)\r\n            return (native-&gt;*f)(args...);\r\n        return static_cast&lt;R&gt;(defaultValue);\r\n    }\r\n};\r\ntemplate&lt;auto f, auto defaultValue = 0&gt;\r\nvoid* wrap = (void*)&amp;wrapper_impl&lt;decltype(f), f, defaultValue&gt;::wrap;\r\n\r\n/* ... */\r\n\r\nstruct Smth {\r\n\tstatic Smth* fromJava(jobject instance) {\r\n\t\treturn (Smth*) env-&gt;GetLongField(instance, peer);\r\n\t}\r\n\t\r\n\t// `this` is got from jobject automatically\r\n\tvoid smth() {}\r\n\tstatic jfieldID peer;\r\n};\r\n\r\n// `instance` is got from jobject automatically\r\njboolean smthInvert(struct Smth* instance, jboolean someBool) {\r\n\treturn !someBool;\r\n}\r\n\r\n/* ... */\r\n\r\njfieldID Smth::peer = nullptr;\r\n\r\nextern &quot;C&quot; JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* jvm, void* reserved) {\r\n\tvm = jvm;\r\n\tenv = getEnv();\r\n\t\r\n\tSmth::peer = env-&gt;GetFieldID(env-&gt;FindClass(&quot;my.class&quot;), &quot;peer&quot;, &quot;J&quot;);\r\n    if (Smth::peer == nullptr)\r\n        return -1;\r\n\t\r\n\tstatic JNINativeMethod methods[] = {\r\n\t#define m(name, signature, func) { (char*) #name, (char*) signature, (void*) func }\r\n\t    m(smth, &quot;()V&quot;, wrap&lt;&amp;Smth::smth&gt;),\r\n\t    m(invert, &quot;(J)J&quot;, wrap&lt;&amp;smthInvert&gt;),\r\n\t    #undef m\r\n    };\r\n\r\n\treturn (0 == env-&gt;RegisterNatives(env-&gt;FindClass(&quot;my.class&quot;), methods,\r\n            sizeof(methods)/sizeof(JNINativeMethod))) ? JNI_VERSION_1_6 : -1;\r\n}\r\n\r\n```","title":"use c++ template to generate JNI functions","body":"<p>I know my answer is a bit late but I hope it will be useful to someone.\nI had to bind C++ class (i.e. <code>C</code>) to Java class. I implemented Java class with <code>long peer</code> inside it to hold a pointer to native instance and method <code>C::fromJava</code> which calls <code>env-&gt;GetLongField(instance, peer)</code> and casts it to <code>C*</code>. This way I can do something like that:</p>\n<pre><code>#include &lt;jni.h&gt;\n\n/* ... */\nstatic JavaVM* vm;\nstatic inline JNIEnv* getEnv() {\n    JNIEnv *env;\n    vm-&gt;GetEnv((void**)&amp;env, JNI_VERSION_1_6);\n    return env;\n}\n\nstatic thread_local JNIEnv* env = getEnv();\n\n/* ... */\n\n/*\n * It is simple. Those wrappers get native pointer from Java\n * object (from it's `jlong peer` field) and call given function `f`.\n * There are two almost identical templates. One for simple functions and one more for\n * class member functions.\n * In class member function wrapper pointer to object is available as `this`.\n * static_cast`ing let us use every single type, including `void`.\n * No need to use `__LINE__` or other integer to identify methods,\n * compiler does this automatically.\n * if `peer` field is 0 method is noop.\n */\ntemplate&lt;class F, F f, auto defaultValue&gt; struct wrapper_impl;\ntemplate&lt;class R, class A0, class... A, R(*f)(A0*, A...), auto defaultValue&gt;\nstruct wrapper_impl&lt;R(*)(A0*, A...), f, defaultValue&gt; {\n    static R wrap(JNIEnv* env, jobject obj, A... args) {\n        A0* native = A0::fromJava(obj);\n        if (native != nullptr)\n            return f(native, args...);\n        return static_cast&lt;R&gt;(defaultValue);\n    }\n};\ntemplate&lt;class R, class C, class... A, R(C::*f)(A...), auto defaultValue&gt;\nstruct wrapper_impl&lt;R(C::*)(A...), f, defaultValue&gt; {\n    static R wrap(JNIEnv* env, jobject obj, A... args) {\n        C* native = C::fromJava(obj);\n        if (native != nullptr)\n            return (native-&gt;*f)(args...);\n        return static_cast&lt;R&gt;(defaultValue);\n    }\n};\ntemplate&lt;auto f, auto defaultValue = 0&gt;\nvoid* wrap = (void*)&amp;wrapper_impl&lt;decltype(f), f, defaultValue&gt;::wrap;\n\n/* ... */\n\nstruct Smth {\n    static Smth* fromJava(jobject instance) {\n        return (Smth*) env-&gt;GetLongField(instance, peer);\n    }\n    \n    // `this` is got from jobject automatically\n    void smth() {}\n    static jfieldID peer;\n};\n\n// `instance` is got from jobject automatically\njboolean smthInvert(struct Smth* instance, jboolean someBool) {\n    return !someBool;\n}\n\n/* ... */\n\njfieldID Smth::peer = nullptr;\n\nextern &quot;C&quot; JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* jvm, void* reserved) {\n    vm = jvm;\n    env = getEnv();\n    \n    Smth::peer = env-&gt;GetFieldID(env-&gt;FindClass(&quot;my.class&quot;), &quot;peer&quot;, &quot;J&quot;);\n    if (Smth::peer == nullptr)\n        return -1;\n    \n    static JNINativeMethod methods[] = {\n    #define m(name, signature, func) { (char*) #name, (char*) signature, (void*) func }\n        m(smth, &quot;()V&quot;, wrap&lt;&amp;Smth::smth&gt;),\n        m(invert, &quot;(J)J&quot;, wrap&lt;&amp;smthInvert&gt;),\n        #undef m\n    };\n\n    return (0 == env-&gt;RegisterNatives(env-&gt;FindClass(&quot;my.class&quot;), methods,\n            sizeof(methods)/sizeof(JNINativeMethod))) ? JNI_VERSION_1_6 : -1;\n}\n\n</code></pre>\n"}],"owner":{"account_id":1106277,"reputation":101,"user_id":1097597,"display_name":"crazybie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1393,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":26794791,"answer_count":2,"score":3,"last_activity_date":1665650546,"creation_date":1415268294,"question_id":26776574,"body_markdown":"I want to use C++ template to generate slot functions and register these functions to the jvm the java code can call, like:\r\n\r\n    \r\n    template&lt;typename Arg1&gt;\r\n    void bind_native(const char* className, const char* staticMethodName, function&lt;void(Arg1)&gt;* slotFunc)\r\n    {\r\n        JNINativeMethod sig;\r\n        sig.name        = staticMethodName;\r\n        sig.signature   = Wrapper&lt;void(Arg1)&gt;::Get().GetSignature();\r\n        sig.fnPtr       = Wrapper&lt;void(Arg1)&gt;::Get().GetSlotFunc(slotFunc);\r\n        \r\n        // register to jni..\r\n    }\r\n\r\n    // bind our native function to java.\r\n    function&lt;void(int)&gt; cppIntFunc = [](int intFromJava) \r\n    { \r\n        printf(&quot;called from java&quot;);\r\n    };\r\n    bind_native(&quot;MyClass&quot;, &quot;MyCppMethod&quot;, &amp;cppIntFunc);\r\n\r\n    // we can also bind different functions with the same signature to jni.\r\n    function&lt;void(int)&gt; cppIntFunc1;\r\n    function&lt;void(int)&gt; cppIntFunc2;\r\n    bind_native(&quot;MyClass&quot;, &quot;MyCppMethod1&quot;, &amp;cppIntFunc1);\r\n    bind_native(&quot;MyClass&quot;, &quot;MyCppMethod2&quot;, &amp;cppIntFunc2);\r\n\r\n    // in java code:\r\n    class MyClas {\r\n        private static native MyCppMethod(int i);\r\n        private static native MyCppMethod1(int i);\r\n        private static native MyCppMethod2(int i);\r\n    }\r\n\r\n\r\n\r\n\r\nbut question is, the same template generate the same function, so I can not distinguish which method is called in the jni therefore I can not get the original slot function back:\r\n\r\n    \r\n    template&lt;typename Arg1&gt;\r\n    struct Wrapper\r\n    {\r\n        void* GetSlotFunc(function&lt;void(Arg1)&gt;* slotFunc)\r\n        {\r\n            // how to map the slotFunc to the StaticJniFunc?\r\n            \r\n            return StaticJniFunc;\r\n        }\r\n        \r\n        static JNICALL void StaticJniFunc(JNIEnv* e, jclass c, Arg1 param1)\r\n        {\r\n            // how to get the slotFunc back here? \r\n            \r\n            (*slotFunc)(param1);\r\n        }\r\n    };    \r\n\r\nmaybe I need to find a way to get the running jmethodID from jni?","title":"use c++ template to generate JNI functions","body":"<p>I want to use C++ template to generate slot functions and register these functions to the jvm the java code can call, like:</p>\n\n<pre><code>template&lt;typename Arg1&gt;\nvoid bind_native(const char* className, const char* staticMethodName, function&lt;void(Arg1)&gt;* slotFunc)\n{\n    JNINativeMethod sig;\n    sig.name        = staticMethodName;\n    sig.signature   = Wrapper&lt;void(Arg1)&gt;::Get().GetSignature();\n    sig.fnPtr       = Wrapper&lt;void(Arg1)&gt;::Get().GetSlotFunc(slotFunc);\n\n    // register to jni..\n}\n\n// bind our native function to java.\nfunction&lt;void(int)&gt; cppIntFunc = [](int intFromJava) \n{ \n    printf(\"called from java\");\n};\nbind_native(\"MyClass\", \"MyCppMethod\", &amp;cppIntFunc);\n\n// we can also bind different functions with the same signature to jni.\nfunction&lt;void(int)&gt; cppIntFunc1;\nfunction&lt;void(int)&gt; cppIntFunc2;\nbind_native(\"MyClass\", \"MyCppMethod1\", &amp;cppIntFunc1);\nbind_native(\"MyClass\", \"MyCppMethod2\", &amp;cppIntFunc2);\n\n// in java code:\nclass MyClas {\n    private static native MyCppMethod(int i);\n    private static native MyCppMethod1(int i);\n    private static native MyCppMethod2(int i);\n}\n</code></pre>\n\n<p>but question is, the same template generate the same function, so I can not distinguish which method is called in the jni therefore I can not get the original slot function back:</p>\n\n<pre><code>template&lt;typename Arg1&gt;\nstruct Wrapper\n{\n    void* GetSlotFunc(function&lt;void(Arg1)&gt;* slotFunc)\n    {\n        // how to map the slotFunc to the StaticJniFunc?\n\n        return StaticJniFunc;\n    }\n\n    static JNICALL void StaticJniFunc(JNIEnv* e, jclass c, Arg1 param1)\n    {\n        // how to get the slotFunc back here? \n\n        (*slotFunc)(param1);\n    }\n};    \n</code></pre>\n\n<p>maybe I need to find a way to get the running jmethodID from jni?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","tomcat"],"answers":[{"tags":[],"owner":{"account_id":1310803,"reputation":2557,"user_id":1258838,"accept_rate":68,"display_name":"Juliyanage Silva"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665650444,"creation_date":1665650444,"answer_id":74052841,"question_id":74052592,"body_markdown":"Remove it from HTTP Security config and add it as a WebSecurity:\r\n\r\n    @Override\r\n        public void configure(WebSecurity web) throws Exception {\r\n            web.ignoring().antMatchers(&quot;/v3/api-docs/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/swagger-ui/**&quot;);\r\n        }","title":"After configuring swagger I get Unauthorized error: Full authentication is required to access this resource","body":"<p>Remove it from HTTP Security config and add it as a WebSecurity:</p>\n<pre><code>@Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring().antMatchers(&quot;/v3/api-docs/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/swagger-ui/**&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":24071840,"reputation":57,"user_id":18047686,"display_name":"l3miage-crivoid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2720,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74052841,"answer_count":1,"score":2,"last_activity_date":1665650444,"creation_date":1665649341,"question_id":74052592,"body_markdown":"I followed instruction for setup the swagger in my back-end spring boot application.\r\n\r\nHere is my configure method from WebSecurityConfig which should by idea allow me to access swagger ui.\r\n\r\n```java\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n        http.cors().and().csrf().disable()\r\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authorizeRequests().antMatchers(&quot;/api/account/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/station/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/contact/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/package/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/location/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/borders-filter/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/weather/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/promo/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/activity/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/shop/get-card-price-by-station&quot;).permitAll()\r\n                .antMatchers(&quot;/api/partner/time-slot/get-slots-between-dates-by-activities&quot;).permitAll()\r\n                .antMatchers(&quot;/v2/api-docs&quot;, &quot;/configuration/ui&quot;, &quot;/swagger-resources&quot;, &quot;/configuration/security&quot;, &quot;/swagger-ui.html&quot;, &quot;/webjars/**&quot;,&quot;/swagger-resources/configuration/ui&quot;,&quot;/swagger-ui.html&quot;).permitAll()\r\n                .anyRequest().authenticated();\r\n\r\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n```\r\nAuthEntryPointJwt class \r\n\r\n```java\r\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n\r\n    @Override\r\n    public void commence(HttpServletRequest request, HttpServletResponse response,\r\n                         AuthenticationException authException) throws IOException, ServletException {\r\n        logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\r\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Error: Unauthorized&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd finally the logs and you see ERROR when accesing page http://localhost:8080/spring-security-rest/api/v2/api-docs\r\n\r\n```\r\n2022-10-13 09:59:03.379  INFO 4108 --- [           main] fr.veryski.veryski.VeryskiApplication    : Starting VeryskiApplication using Java 16.0.2 on fnyve with PID 4108 (C:\\Users\\qwert\\OneDrive\\BUREAU\\Veryski\\veryski\\target\\classes started by qwert in C:\\Users\\qwert\\OneDrive\\BUREAU\\Veryski\\veryski)\r\n2022-10-13 09:59:03.381  INFO 4108 --- [           main] fr.veryski.veryski.VeryskiApplication    : The following profiles are active: dev\r\n2022-10-13 09:59:05.199  INFO 4108 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@27bcb4ad&#39; of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n2022-10-13 09:59:05.206  INFO 4108 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;methodSecurityMetadataSource&#39; of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n2022-10-13 09:59:05.464  INFO 4108 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2022-10-13 09:59:05.473  INFO 4108 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2022-10-13 09:59:05.473  INFO 4108 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.44]\r\n2022-10-13 09:59:05.601  INFO 4108 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2022-10-13 09:59:05.601  INFO 4108 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2165 ms\r\n2022-10-13 09:59:05.786  INFO 4108 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2022-10-13 09:59:05.887  INFO 4108 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2022-10-13 09:59:08.702  INFO 4108 --- [           main] l.lockservice.StandardLockService        : Successfully acquired change log lock\r\n2022-10-13 09:59:09.074  INFO 4108 --- [           main] l.c.StandardChangeLogHistoryService      : Reading from public.databasechangelog\r\n2022-10-13 09:59:09.136  INFO 4108 --- [           main] l.lockservice.StandardLockService        : Successfully released change log lock\r\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern=&#39;/v2/api-docs&#39;] with []\r\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern=&#39;/configuration/ui&#39;] with []\r\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern=&#39;/swagger-resources/**&#39;] with []\r\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern=&#39;/configuration/security&#39;] with []\r\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern=&#39;/swagger-ui.html&#39;] with []\r\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern=&#39;/webjars/**&#39;] with []\r\n2022-10-13 09:59:10.824  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2cf5cc43, org.springframework.security.web.context.SecurityContextPersistenceFilter@6639a9f0, org.springframework.security.web.header.HeaderWriterFilter@28ec9c23, org.springframework.web.filter.CorsFilter@52a3a9ef, org.springframework.security.web.authentication.logout.LogoutFilter@60d46bd7, fr.veryski.veryski.config.AuthTokenFilter@26107e6d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@51430893, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2e37cd0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@25d77b18, org.springframework.security.web.session.SessionManagementFilter@29ad358c, org.springframework.security.web.access.ExceptionTranslationFilter@2b515b5c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@33588b68]\r\n2022-10-13 09:59:10.931  INFO 4108 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;\r\n2022-10-13 09:59:11.134  INFO 4108 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService &#39;taskScheduler&#39;\r\n2022-10-13 09:59:11.240  INFO 4108 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2022-10-13 09:59:12.061  INFO 4108 --- [           main] fr.veryski.veryski.VeryskiApplication    : Started VeryskiApplication in 9.455 seconds (JVM running for 10.485)\r\n2022-10-13 10:00:49.961  INFO 4108 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2022-10-13 10:00:49.962  INFO 4108 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2022-10-13 10:00:49.966  INFO 4108 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms\r\n2022-10-13 10:00:50.019 ERROR 4108 --- [nio-8080-exec-1] f.v.veryski.config.AuthEntryPointJwt     : Unauthorized error: Full authentication is required to access this resource\r\n2022-10-13 10:00:50.339 ERROR 4108 --- [nio-8080-exec-2] f.v.veryski.config.AuthEntryPointJwt     : Unauthorized error: Full authentication is required to access this resource\r\n```\r\nWhat is wrong it tells me Will secure MVC [pattern=&#39;/v2/api-docs&#39;] ","title":"After configuring swagger I get Unauthorized error: Full authentication is required to access this resource","body":"<p>I followed instruction for setup the swagger in my back-end spring boot application.</p>\n<p>Here is my configure method from WebSecurityConfig which should by idea allow me to access swagger ui.</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests().antMatchers(&quot;/api/account/**&quot;).permitAll()\n                .antMatchers(&quot;/api/station/**&quot;).permitAll()\n                .antMatchers(&quot;/api/contact/**&quot;).permitAll()\n                .antMatchers(&quot;/api/package/**&quot;).permitAll()\n                .antMatchers(&quot;/api/location/**&quot;).permitAll()\n                .antMatchers(&quot;/api/borders-filter/**&quot;).permitAll()\n                .antMatchers(&quot;/api/weather/**&quot;).permitAll()\n                .antMatchers(&quot;/api/promo/**&quot;).permitAll()\n                .antMatchers(&quot;/api/activity/**&quot;).permitAll()\n                .antMatchers(&quot;/api/shop/get-card-price-by-station&quot;).permitAll()\n                .antMatchers(&quot;/api/partner/time-slot/get-slots-between-dates-by-activities&quot;).permitAll()\n                .antMatchers(&quot;/v2/api-docs&quot;, &quot;/configuration/ui&quot;, &quot;/swagger-resources&quot;, &quot;/configuration/security&quot;, &quot;/swagger-ui.html&quot;, &quot;/webjars/**&quot;,&quot;/swagger-resources/configuration/ui&quot;,&quot;/swagger-ui.html&quot;).permitAll()\n                .anyRequest().authenticated();\n\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n</code></pre>\n<p>AuthEntryPointJwt class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n                         AuthenticationException authException) throws IOException, ServletException {\n        logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Error: Unauthorized&quot;);\n    }\n\n}\n</code></pre>\n<p>And finally the logs and you see ERROR when accesing page http://localhost:8080/spring-security-rest/api/v2/api-docs</p>\n<pre><code>2022-10-13 09:59:03.379  INFO 4108 --- [           main] fr.veryski.veryski.VeryskiApplication    : Starting VeryskiApplication using Java 16.0.2 on fnyve with PID 4108 (C:\\Users\\qwert\\OneDrive\\BUREAU\\Veryski\\veryski\\target\\classes started by qwert in C:\\Users\\qwert\\OneDrive\\BUREAU\\Veryski\\veryski)\n2022-10-13 09:59:03.381  INFO 4108 --- [           main] fr.veryski.veryski.VeryskiApplication    : The following profiles are active: dev\n2022-10-13 09:59:05.199  INFO 4108 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@27bcb4ad' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2022-10-13 09:59:05.206  INFO 4108 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2022-10-13 09:59:05.464  INFO 4108 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2022-10-13 09:59:05.473  INFO 4108 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-10-13 09:59:05.473  INFO 4108 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.44]\n2022-10-13 09:59:05.601  INFO 4108 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2022-10-13 09:59:05.601  INFO 4108 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2165 ms\n2022-10-13 09:59:05.786  INFO 4108 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2022-10-13 09:59:05.887  INFO 4108 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2022-10-13 09:59:08.702  INFO 4108 --- [           main] l.lockservice.StandardLockService        : Successfully acquired change log lock\n2022-10-13 09:59:09.074  INFO 4108 --- [           main] l.c.StandardChangeLogHistoryService      : Reading from public.databasechangelog\n2022-10-13 09:59:09.136  INFO 4108 --- [           main] l.lockservice.StandardLockService        : Successfully released change log lock\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern='/v2/api-docs'] with []\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern='/configuration/ui'] with []\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern='/swagger-resources/**'] with []\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern='/configuration/security'] with []\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern='/swagger-ui.html'] with []\n2022-10-13 09:59:10.795  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Mvc [pattern='/webjars/**'] with []\n2022-10-13 09:59:10.824  INFO 4108 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2cf5cc43, org.springframework.security.web.context.SecurityContextPersistenceFilter@6639a9f0, org.springframework.security.web.header.HeaderWriterFilter@28ec9c23, org.springframework.web.filter.CorsFilter@52a3a9ef, org.springframework.security.web.authentication.logout.LogoutFilter@60d46bd7, fr.veryski.veryski.config.AuthTokenFilter@26107e6d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@51430893, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2e37cd0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@25d77b18, org.springframework.security.web.session.SessionManagementFilter@29ad358c, org.springframework.security.web.access.ExceptionTranslationFilter@2b515b5c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@33588b68]\n2022-10-13 09:59:10.931  INFO 4108 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'\n2022-10-13 09:59:11.134  INFO 4108 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'\n2022-10-13 09:59:11.240  INFO 4108 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2022-10-13 09:59:12.061  INFO 4108 --- [           main] fr.veryski.veryski.VeryskiApplication    : Started VeryskiApplication in 9.455 seconds (JVM running for 10.485)\n2022-10-13 10:00:49.961  INFO 4108 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2022-10-13 10:00:49.962  INFO 4108 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2022-10-13 10:00:49.966  INFO 4108 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms\n2022-10-13 10:00:50.019 ERROR 4108 --- [nio-8080-exec-1] f.v.veryski.config.AuthEntryPointJwt     : Unauthorized error: Full authentication is required to access this resource\n2022-10-13 10:00:50.339 ERROR 4108 --- [nio-8080-exec-2] f.v.veryski.config.AuthEntryPointJwt     : Unauthorized error: Full authentication is required to access this resource\n</code></pre>\n<p>What is wrong it tells me Will secure MVC [pattern='/v2/api-docs']</p>\n"},{"tags":["java","html","deepl"],"answers":[{"tags":[],"owner":{"account_id":24628834,"reputation":63,"user_id":18528284,"display_name":"lsa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665650402,"creation_date":1665650402,"answer_id":74052826,"question_id":74039527,"body_markdown":"For now, I solved it by parsing my `df[TEXT]` to ignore tag before translating and setting it back to the original. see the below method, it may help someone with the same request.\r\n\r\n        \r\n      private static final String BEGIN_IGNORE_TAG = &quot;&lt;loveIgnoreTag&gt;&quot;;\r\n      private static final String END_IGNORE_TAG = &quot;&lt;/loveIgnoreTag&gt;&quot;;\r\n    \r\n      public String translate( String source , String target, String text )\r\n        \t\t\tthrows DeepLException, InterruptedException\r\n        \t{\r\n        \t\t//https://www.deepl.com/docs-api/xml/ignored-tags/\r\n        \t\tArrayList&lt;String&gt; ignoreTags = new ArrayList&lt;&gt;( ) ;\r\n        \t\tignoreTags.add( &quot;loveIgnoreTag&quot; );\r\n        \t\t\r\n        \t\ttext = parseToIgnoreTage(text);\r\n        \t\t\r\n        \t\tTextTranslationOptions translationOptions = new TextTranslationOptions( )\r\n        \t\t\t\t.setTagHandling( &quot;xml&quot; )\r\n        \t\t\t\t.setFormality( Formality.PreferMore )\r\n        \t\t\t\t.setPreserveFormatting( true )\r\n        \t\t\t\t.setIgnoreTags( () -&gt; ignoreTags.iterator( )  )\r\n        \t\t\t\t.setSentenceSplittingMode( SentenceSplittingMode.All );\r\n        \r\n        \t\tTextResult result = translator.translateText( text, source, target, translationOptions );\r\n        \t\tString translationResult = parseToDataFrame(result.getText( ));\t\t\r\n        \t\treturn translationResult;\r\n        \t}\r\n        \r\n        \tprivate String parseToIgnoreTage( String text )\r\n        \t{\r\n        \t\ttext = text.replace( &quot;[&quot;, BEGIN_IGNORE_TAG ).replace( &quot;]&quot;, END_IGNORE_TAG );\r\n        \t\treturn text;\r\n        \t}\r\n        \r\n        \tprivate String parseToDataFrame( String result )\r\n        \t{\r\n        \t\tresult = result.replace(BEGIN_IGNORE_TAG,&quot;[&quot; ).replace(  END_IGNORE_TAG, &quot;]&quot; );\r\n        \t\treturn result;\r\n        \t}\r\n\r\n\r\n","title":"How to avoid translating df [TEXT] in the html text by Deepl?","body":"<p>For now, I solved it by parsing my <code>df[TEXT]</code> to ignore tag before translating and setting it back to the original. see the below method, it may help someone with the same request.</p>\n<pre><code>  private static final String BEGIN_IGNORE_TAG = &quot;&lt;loveIgnoreTag&gt;&quot;;\n  private static final String END_IGNORE_TAG = &quot;&lt;/loveIgnoreTag&gt;&quot;;\n\n  public String translate( String source , String target, String text )\n                throws DeepLException, InterruptedException\n        {\n            //https://www.deepl.com/docs-api/xml/ignored-tags/\n            ArrayList&lt;String&gt; ignoreTags = new ArrayList&lt;&gt;( ) ;\n            ignoreTags.add( &quot;loveIgnoreTag&quot; );\n            \n            text = parseToIgnoreTage(text);\n            \n            TextTranslationOptions translationOptions = new TextTranslationOptions( )\n                    .setTagHandling( &quot;xml&quot; )\n                    .setFormality( Formality.PreferMore )\n                    .setPreserveFormatting( true )\n                    .setIgnoreTags( () -&gt; ignoreTags.iterator( )  )\n                    .setSentenceSplittingMode( SentenceSplittingMode.All );\n    \n            TextResult result = translator.translateText( text, source, target, translationOptions );\n            String translationResult = parseToDataFrame(result.getText( ));     \n            return translationResult;\n        }\n    \n        private String parseToIgnoreTage( String text )\n        {\n            text = text.replace( &quot;[&quot;, BEGIN_IGNORE_TAG ).replace( &quot;]&quot;, END_IGNORE_TAG );\n            return text;\n        }\n    \n        private String parseToDataFrame( String result )\n        {\n            result = result.replace(BEGIN_IGNORE_TAG,&quot;[&quot; ).replace(  END_IGNORE_TAG, &quot;]&quot; );\n            return result;\n        }\n</code></pre>\n"}],"owner":{"account_id":24628834,"reputation":63,"user_id":18528284,"display_name":"lsa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":944,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74052826,"answer_count":1,"score":1,"last_activity_date":1665650402,"creation_date":1665566784,"question_id":74039527,"body_markdown":"I have a lot of data frame such as `[COMPANY]`in my html text file which I want exclude while Deepl translating my text. I use Deepl Java lib with api and not allowed to change the data frame format.\r\n\r\n**Any Idea how to exclude df[TEXT] from translation?**\r\n\r\n**Example text:** \r\n\r\n    Dear client,\r\n    \r\n    Please find enclosed [EVENT] for the order you wish to execute for your account [ACCOUNT_NAME_TEXT].\r\n    \r\n    \r\n    Kind regards,\r\n    \r\n    [COMPANY_NAME]\r\n\r\n**html file**\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    \t&lt;head&gt;\r\n    \t&lt;/head&gt;\r\n    \t&lt;body&gt;\r\n    \t\t&lt;p&gt;Dear client,&lt;/p&gt;\r\n    \t\t&lt;p&gt;Please find enclosed the Events for the order you wish to execute for your account [ACCOUNT_NAME_TEXT].&lt;/p&gt;\r\n    \t\t&lt;p&gt;&amp;#160;&lt;/p&gt;\r\n    \t\t&lt;p&gt;Kind regards,&lt;/p&gt;\r\n    \t\t&lt;p&gt;[COMPANY_NAME]&lt;/p&gt;\r\n    \t&lt;/body&gt;\r\n    &lt;/html&gt;","title":"How to avoid translating df [TEXT] in the html text by Deepl?","body":"<p>I have a lot of data frame such as <code>[COMPANY]</code>in my html text file which I want exclude while Deepl translating my text. I use Deepl Java lib with api and not allowed to change the data frame format.</p>\n<p><strong>Any Idea how to exclude df[TEXT] from translation?</strong></p>\n<p><strong>Example text:</strong></p>\n<pre><code>Dear client,\n\nPlease find enclosed [EVENT] for the order you wish to execute for your account [ACCOUNT_NAME_TEXT].\n\n\nKind regards,\n\n[COMPANY_NAME]\n</code></pre>\n<p><strong>html file</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;p&gt;Dear client,&lt;/p&gt;\n        &lt;p&gt;Please find enclosed the Events for the order you wish to execute for your account [ACCOUNT_NAME_TEXT].&lt;/p&gt;\n        &lt;p&gt;&amp;#160;&lt;/p&gt;\n        &lt;p&gt;Kind regards,&lt;/p&gt;\n        &lt;p&gt;[COMPANY_NAME]&lt;/p&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","apache-flink","naming"],"answers":[{"tags":[],"owner":{"account_id":7132987,"reputation":461,"user_id":5453610,"display_name":"diegoreico"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1520091595,"creation_date":1520091595,"answer_id":49085912,"question_id":49073433,"body_markdown":"As far as i have used the name() function, each tranformation that you can do using the datastream or dataset API is an operation, so in your second case the graph will look like this\r\n\r\n    &quot;Transformation A&quot; -------&gt; &quot;Transformation B&quot;\r\n\r\n\r\nBut on the Flink dashborad, there&#39;s the posibility that those tasks could be grouped inside the same task like this:\r\n\r\n    -----------------------         -----------------------\r\n    | SOURCE              |  ---&gt;   |&quot;Transformation A&quot; -&gt;| ---&gt; More operations\r\n    -----------------------         |&quot;Transformation B&quot;   |\r\n                                    -----------------------","title":"Naming Flink Operators","body":"<p>As far as i have used the name() function, each tranformation that you can do using the datastream or dataset API is an operation, so in your second case the graph will look like this</p>\n\n<pre><code>\"Transformation A\" -------&gt; \"Transformation B\"\n</code></pre>\n\n<p>But on the Flink dashborad, there's the posibility that those tasks could be grouped inside the same task like this:</p>\n\n<pre><code>-----------------------         -----------------------\n| SOURCE              |  ---&gt;   |\"Transformation A\" -&gt;| ---&gt; More operations\n-----------------------         |\"Transformation B\"   |\n                                -----------------------\n</code></pre>\n"},{"tags":[],"owner":{"account_id":82425,"reputation":8270,"user_id":231762,"display_name":"kkrugler"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665650384,"creation_date":1520092311,"answer_id":49086035,"question_id":49073433,"body_markdown":"Yes, you can name every transformation. But as @diegoreico noted, if operators are chained*, then the Flink UI will show them grouped into a single box (node) in the DAG.\r\n\r\n*chained operators: see Flink docu [Task Chaining and Resource Groups][1]\r\n\r\n\r\n  [1]: https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/operators/overview/#task-chaining-and-resource-groups","title":"Naming Flink Operators","body":"<p>Yes, you can name every transformation. But as @diegoreico noted, if operators are chained*, then the Flink UI will show them grouped into a single box (node) in the DAG.</p>\n<p>*chained operators: see Flink docu <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/operators/overview/#task-chaining-and-resource-groups\" rel=\"nofollow noreferrer\">Task Chaining and Resource Groups</a></p>\n"}],"owner":{"account_id":8199410,"reputation":2119,"user_id":6171195,"accept_rate":96,"display_name":"Christos Hadjinikolis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2402,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":49085912,"answer_count":2,"score":3,"last_activity_date":1665650384,"creation_date":1520008507,"question_id":49073433,"body_markdown":"I am using `Flink v.1.4.0`.\r\n\r\nI want to be able to name the operators in the `Flink UI`. I understand that to do so all I need is to just use the `.name()` method on a `DataSet` or `DataStream`. For example, like this:\r\n\r\n    DataSet&lt;SomePojo&gt; flinkDataSet = ...;\r\n    \r\n    flinkDataSet\r\n        .map(new SomeTransformation())\r\n        .name(&quot;Transformation A&quot;);\r\n\r\nWhat I would like to know is what exactly defines an operator? Is it the DataSet&#39;s/DataStream&#39;s key? or maybe the element types? I understand that the operator will remain the same if I apply a `MapFunction` that has the same return type as the element the function was applied on, but noticed that the operator usually changes if I apply a `FlatMapFunction` or a `KeyBy` or `GroupBy` operation, as well as applying actions of, course.\r\n\r\nThe reason I am asking this is because I want to understand how granular I can get the Flink DAG to be in the Flink UI, e.g. could I name every transformation? or are operators defined by the type of the DataSet/DataStream being processed and hence I can only name those? For example, would this work?\r\n\r\n    flinkDataSet\r\n        .map(new SomeTransformation())\r\n        .name(&quot;Transformation A&quot;)\r\n        .map(new SomeOtherTransformation())\r\n        .name(&quot;Transformation B&quot;);\r\n\r\nor would the first name be overwritten by the second? I can experiment and find out of course, but I would like to understand the whys too.","title":"Naming Flink Operators","body":"<p>I am using <code>Flink v.1.4.0</code>.</p>\n\n<p>I want to be able to name the operators in the <code>Flink UI</code>. I understand that to do so all I need is to just use the <code>.name()</code> method on a <code>DataSet</code> or <code>DataStream</code>. For example, like this:</p>\n\n<pre><code>DataSet&lt;SomePojo&gt; flinkDataSet = ...;\n\nflinkDataSet\n    .map(new SomeTransformation())\n    .name(\"Transformation A\");\n</code></pre>\n\n<p>What I would like to know is what exactly defines an operator? Is it the DataSet's/DataStream's key? or maybe the element types? I understand that the operator will remain the same if I apply a <code>MapFunction</code> that has the same return type as the element the function was applied on, but noticed that the operator usually changes if I apply a <code>FlatMapFunction</code> or a <code>KeyBy</code> or <code>GroupBy</code> operation, as well as applying actions of, course.</p>\n\n<p>The reason I am asking this is because I want to understand how granular I can get the Flink DAG to be in the Flink UI, e.g. could I name every transformation? or are operators defined by the type of the DataSet/DataStream being processed and hence I can only name those? For example, would this work?</p>\n\n<pre><code>flinkDataSet\n    .map(new SomeTransformation())\n    .name(\"Transformation A\")\n    .map(new SomeOtherTransformation())\n    .name(\"Transformation B\");\n</code></pre>\n\n<p>or would the first name be overwritten by the second? I can experiment and find out of course, but I would like to understand the whys too.</p>\n"},{"tags":["java","android","android-recyclerview","multiview"],"comments":[{"owner":{"account_id":14218047,"reputation":11740,"user_id":10271334,"display_name":"Jeel Vankhede"},"score":0,"creation_date":1665682141,"post_id":74052139,"comment_id":130761977,"body_markdown":"Can you please elaborate more on the issue? Not able to understand the problem statement here.","body":"Can you please elaborate more on the issue? Not able to understand the problem statement here."},{"owner":{"account_id":19223398,"reputation":200,"user_id":14046751,"display_name":"android dev"},"score":0,"creation_date":1665721916,"post_id":74052139,"comment_id":130769232,"body_markdown":"@JeelVankhede refer the ss in this link https://stackoverflow.com/questions/42219507/list-item-is-being-replaced-by-a-header-on-recyclerview-using-multiple-viewtype  im facing same issue just like this question","body":"@JeelVankhede refer the ss in this link <a href=\"https://stackoverflow.com/questions/42219507/list-item-is-being-replaced-by-a-header-on-recyclerview-using-multiple-viewtype\" title=\"list item is being replaced by a header on recyclerview using multiple viewtype\">stackoverflow.com/questions/42219507/&hellip;</a>  im facing same issue just like this question"},{"owner":{"account_id":19223398,"reputation":200,"user_id":14046751,"display_name":"android dev"},"score":0,"creation_date":1665731389,"post_id":74052139,"comment_id":130771102,"body_markdown":"@JeelVankhede i followed the solution in above link but is there any other solution for it why first item of list is not visble?","body":"@JeelVankhede i followed the solution in above link but is there any other solution for it why first item of list is not visble?"},{"owner":{"account_id":14218047,"reputation":11740,"user_id":10271334,"display_name":"Jeel Vankhede"},"score":0,"creation_date":1665854447,"post_id":74052139,"comment_id":130798344,"body_markdown":"Either you&#39;ll need to add popular_rt type to your post list at item level zero or else let adapter know total how many items you need to render. Because, when you provide list items to your adapter you only tell to render list items and not popular_rt.","body":"Either you&#39;ll need to add popular_rt type to your post list at item level zero or else let adapter know total how many items you need to render. Because, when you provide list items to your adapter you only tell to render list items and not popular_rt."}],"owner":{"account_id":19223398,"reputation":200,"user_id":14046751,"display_name":"android dev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1665650109,"creation_date":1665647142,"question_id":74052139,"body_markdown":"I&#39;m trying to achieve like this https://stackoverflow.com/questions/45688512/two-recyclerview-when-i-scroll-down-the-first-recylcer-to-be-scrolled-too-how/45688735#45688735\r\n\r\nI implemented this but I&#39;m facing issue like 0th element of second list in second view type is missing but when I post new item then that missing item visible at position 1 of adapter but then that new item in second list is missing until and unless I don&#39;t post any any item in second list\r\n\r\n\r\n    @Override\r\n    public int getItemViewType(int position) {\r\n        if (isPositionPopularRt(position)) {\r\n            return TYPE_POPULAR_RT;\r\n        }\r\n        return TYPE_POST_LIST;\r\n    }\r\n\r\n    private boolean isPositionPopularRt(int position) {\r\n        return position == 0;\r\n    }\r\n    @NotNull\r\n    @Override\r\n    public RecyclerView.ViewHolder onCreateViewHolder(@NotNull ViewGroup viewGroup, int viewType) {\r\n        mUserModel = SharedPrefsUtils.getObject(AppConstants.PrefKey.KEY_USER_MODEL, UserModel.class);\r\n        if (viewType == TYPE_POST_LIST) {\r\n            //inflate your layout and pass it to view holder\r\n            View view = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.view_for_cell, viewGroup, false);\r\n            CustomViewHolder tempViewHolder = new CustomViewHolder(view);\r\n            view.setTag(tempViewHolder);\r\n            return tempViewHolder;\r\n        } else if (viewType == TYPE_POPULAR_RT) {\r\n            //inflate your layout and pass it to view holder\r\n            View v =  LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.popular_rt_recycler_view, viewGroup, false);\r\n            return new MyViewHolderPopularRt(v);\r\n        }\r\n        throw new RuntimeException(&quot;there is no type that matches the type &quot; + viewType + &quot; + make sure your using types correctly&quot;);\r\n    }\r\n","title":"Facing the missing element issue in Multi view type in recyclerview","body":"<p>I'm trying to achieve like this <a href=\"https://stackoverflow.com/questions/45688512/two-recyclerview-when-i-scroll-down-the-first-recylcer-to-be-scrolled-too-how/45688735#45688735\">Two recyclerview when i scroll down , the first recylcer to be scrolled too, how?</a></p>\n<p>I implemented this but I'm facing issue like 0th element of second list in second view type is missing but when I post new item then that missing item visible at position 1 of adapter but then that new item in second list is missing until and unless I don't post any any item in second list</p>\n<pre><code>@Override\npublic int getItemViewType(int position) {\n    if (isPositionPopularRt(position)) {\n        return TYPE_POPULAR_RT;\n    }\n    return TYPE_POST_LIST;\n}\n\nprivate boolean isPositionPopularRt(int position) {\n    return position == 0;\n}\n@NotNull\n@Override\npublic RecyclerView.ViewHolder onCreateViewHolder(@NotNull ViewGroup viewGroup, int viewType) {\n    mUserModel = SharedPrefsUtils.getObject(AppConstants.PrefKey.KEY_USER_MODEL, UserModel.class);\n    if (viewType == TYPE_POST_LIST) {\n        //inflate your layout and pass it to view holder\n        View view = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.view_for_cell, viewGroup, false);\n        CustomViewHolder tempViewHolder = new CustomViewHolder(view);\n        view.setTag(tempViewHolder);\n        return tempViewHolder;\n    } else if (viewType == TYPE_POPULAR_RT) {\n        //inflate your layout and pass it to view holder\n        View v =  LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.popular_rt_recycler_view, viewGroup, false);\n        return new MyViewHolderPopularRt(v);\n    }\n    throw new RuntimeException(&quot;there is no type that matches the type &quot; + viewType + &quot; + make sure your using types correctly&quot;);\n}\n</code></pre>\n"},{"tags":["java","servlets"],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665649881,"creation_date":1665649881,"answer_id":74052707,"question_id":74052489,"body_markdown":"You cannot. A redirect is a way to tell **the browser** to use a different URL for the current request. The browser will then retry the same request with the new URL.\r\n\r\nAccording to https://httpwg.org/specs/rfc9110.html#status.302 some browsers _might_ in the process change the request from POST to GET:\r\n\r\n&gt; **Note**: For historical reasons, a user agent MAY change the request method from POST to GET for the subsequent request.\r\n\r\nHowever this entirely depends upon the user agent (browser) and it is not something that your servlet can request.\r\n\r\nAlso there is no way that a redirect can tell the browser to use a POST instead of a GET.","title":"How to redirect from a get servlet to a post servlet?","body":"<p>You cannot. A redirect is a way to tell <strong>the browser</strong> to use a different URL for the current request. The browser will then retry the same request with the new URL.</p>\n<p>According to <a href=\"https://httpwg.org/specs/rfc9110.html#status.302\" rel=\"nofollow noreferrer\">https://httpwg.org/specs/rfc9110.html#status.302</a> some browsers <em>might</em> in the process change the request from POST to GET:</p>\n<blockquote>\n<p><strong>Note</strong>: For historical reasons, a user agent MAY change the request method from POST to GET for the subsequent request.</p>\n</blockquote>\n<p>However this entirely depends upon the user agent (browser) and it is not something that your servlet can request.</p>\n<p>Also there is no way that a redirect can tell the browser to use a POST instead of a GET.</p>\n"}],"owner":{"account_id":25460166,"reputation":1,"user_id":19260099,"display_name":"Gidde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1665654042,"answer_count":1,"score":-1,"last_activity_date":1665649881,"creation_date":1665648846,"question_id":74052489,"body_markdown":"I want to redirect for mystart.java servlet to two servlet edit.java and upload.java I’m using get method for mystart.java and get method for edit.java which works fine but upload.java isn’t working because I’m using post method so I get 405 error Get method not supported by this URL. \r\n\r\n    Response.sendRedirect(“upload”)","title":"How to redirect from a get servlet to a post servlet?","body":"<p>I want to redirect for mystart.java servlet to two servlet edit.java and upload.java I’m using get method for mystart.java and get method for edit.java which works fine but upload.java isn’t working because I’m using post method so I get 405 error Get method not supported by this URL.</p>\n<pre><code>Response.sendRedirect(“upload”)\n</code></pre>\n"},{"tags":["java","spring-boot","postman","servlet-filters","response-headers"],"answers":[{"tags":[],"owner":{"account_id":1854272,"reputation":2117,"user_id":1680196,"display_name":"kasoban"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665649322,"creation_date":1665649322,"answer_id":74052586,"question_id":74051747,"body_markdown":"This might be a case of inverted cause and effect? Depends on what you want to achieve in regards to\r\n\r\n&gt; There is now a requirement to add the &#39;Transfer-Encoding&#39; header to\r\n&gt; the response.\r\n\r\nFrom the discussion over at this possibly related question (\r\nhttps://stackoverflow.com/questions/49317331/how-to-remove-content-length-header-from-http-response-generated-in-a-simple-ser), we can see that there seems to be some special behaviour for the Content-Length header where it&#39;s always present unless explicitly set to 0 or -1. Which in turn should automatically lead to a `Transfer-Encoding: chunked` on the response.\r\n\r\nSo as long as `Transfer-Encoding: chunked` is what you want to achieve on your response, then I would suggest going that route of explicitly setting the Content-Length to 0.","title":"Springboot - Remove Content-Length header","body":"<p>This might be a case of inverted cause and effect? Depends on what you want to achieve in regards to</p>\n<blockquote>\n<p>There is now a requirement to add the 'Transfer-Encoding' header to\nthe response.</p>\n</blockquote>\n<p>From the discussion over at this possibly related question (\n<a href=\"https://stackoverflow.com/questions/49317331/how-to-remove-content-length-header-from-http-response-generated-in-a-simple-ser\">How to remove Content-length header from HTTP response generated in a simple server?</a>), we can see that there seems to be some special behaviour for the Content-Length header where it's always present unless explicitly set to 0 or -1. Which in turn should automatically lead to a <code>Transfer-Encoding: chunked</code> on the response.</p>\n<p>So as long as <code>Transfer-Encoding: chunked</code> is what you want to achieve on your response, then I would suggest going that route of explicitly setting the Content-Length to 0.</p>\n"}],"owner":{"account_id":3679937,"reputation":331,"user_id":3065102,"display_name":"sap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2598,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665649322,"creation_date":1665645017,"question_id":74051747,"body_markdown":"In the spring boot (2.2.3 RELEASE) application, the &#39;Content-Length&#39; header is not added explicitly but, present in every response.  \r\nThere is now a requirement to add the &#39;Transfer-Encoding&#39; header to the response. When it is added and the API is tested via Postman, it shows an error.  \r\nConsole log:\r\n&gt; Error: Parse Error: Content-Length can&#39;t be present with\r\n&gt; Transfer-Encoding\r\n\r\nWhich was found to be in sync with [IETF HTTP 1.1 RFC7230][1] document.\r\n\r\nSince the &#39;Content-Length&#39; header is not required in the response API, it&#39;s filtered out using *@WebFilter* annotation.  \r\n*@Order* annotation is added with MAX Integer value to ensure that this filter is executed at the end.\r\n````\r\n@WebFilter(urlPatterns = &quot;/*&quot;, asyncSupported = true)\r\n@Order(Integer.MAX_VALUE)\r\npublic class ContentLengthHeaderFilter implements Filter {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(ContentLengthHeaderFilter.class);\r\n\r\n    @Override\r\n    public void init(FilterConfig filterConfig) throws ServletException {\r\n        LOGGER.info(&quot;filter init called !!!&quot;);\r\n        Filter.super.init(filterConfig);\r\n    }\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n        LOGGER.info(&quot;doFilter called ...............@@@&quot;);\r\n        chain.doFilter(request, new HttpServletResponseWrapper((HttpServletResponse) response) {\r\n\r\n            @Override\r\n            public void addHeader(String name, String value) {\r\n                if (!HttpHeaders.CONTENT_LENGTH.equals(name)) {\r\n                    LOGGER.info(&quot;adding header :&quot; + name);\r\n                    super.addHeader(name, value);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void setHeader(String name, String value) {\r\n                if (!HttpHeaders.CONTENT_LENGTH.equals(name)) {\r\n                    LOGGER.info(&quot;setting header :&quot; + name);\r\n                    super.setHeader(name, value);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void destroy() {\r\n        LOGGER.info(&quot;filter destroy called !!!&quot;);\r\n        Filter.super.destroy();\r\n    }\r\n}\r\n````\r\nThe logs shows that headers other than &#39;Content-Length&#39; are added.  \r\n````\r\n13.10.2022 11:25:34.947+0530 INFO  [o.s.web.servlet.DispatcherServlet] [http-nio-8080-exec-1] Completed initialization in 8 ms\r\n13.10.2022 11:25:34.959+0530 INFO  [a.b.c.d.ContentLengthHeaderFilter] [http-nio-8080-exec-1] doFilter called ...............@@@\r\n13.10.2022 11:25:36.597+0530 INFO  [a.b.c.d.ContentLengthHeaderFilter] [http-nio-8080-exec-3] adding header :Location\r\n13.10.2022 11:25:36.597+0530 INFO  [a.b.c.d.ContentLengthHeaderFilter] [http-nio-8080-exec-3] adding header :X-CustomHeader\r\n13.10.2022 11:25:36.597+0530 INFO  [a.b.c.d.ContentLengthHeaderFilter] [http-nio-8080-exec-3] adding header :Transfer-Encoding\r\n````\r\nStill the API call results in &#39;Content-Length&#39; header getting added to the response which causes the error mentioned above.\r\nAm I messing any thing or is there any other way to remove &#39;Content-Length&#39; header?\r\n\r\n  [1]: https://datatracker.ietf.org/doc/html/rfc7230#section-3.3.2","title":"Springboot - Remove Content-Length header","body":"<p>In the spring boot (2.2.3 RELEASE) application, the 'Content-Length' header is not added explicitly but, present in every response.<br />\nThere is now a requirement to add the 'Transfer-Encoding' header to the response. When it is added and the API is tested via Postman, it shows an error.<br />\nConsole log:</p>\n<blockquote>\n<p>Error: Parse Error: Content-Length can't be present with\nTransfer-Encoding</p>\n</blockquote>\n<p>Which was found to be in sync with <a href=\"https://datatracker.ietf.org/doc/html/rfc7230#section-3.3.2\" rel=\"nofollow noreferrer\">IETF HTTP 1.1 RFC7230</a> document.</p>\n<p>Since the 'Content-Length' header is not required in the response API, it's filtered out using <em>@WebFilter</em> annotation.<br />\n<em>@Order</em> annotation is added with MAX Integer value to ensure that this filter is executed at the end.</p>\n<pre><code>@WebFilter(urlPatterns = &quot;/*&quot;, asyncSupported = true)\n@Order(Integer.MAX_VALUE)\npublic class ContentLengthHeaderFilter implements Filter {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(ContentLengthHeaderFilter.class);\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n        LOGGER.info(&quot;filter init called !!!&quot;);\n        Filter.super.init(filterConfig);\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        LOGGER.info(&quot;doFilter called ...............@@@&quot;);\n        chain.doFilter(request, new HttpServletResponseWrapper((HttpServletResponse) response) {\n\n            @Override\n            public void addHeader(String name, String value) {\n                if (!HttpHeaders.CONTENT_LENGTH.equals(name)) {\n                    LOGGER.info(&quot;adding header :&quot; + name);\n                    super.addHeader(name, value);\n                }\n            }\n\n            @Override\n            public void setHeader(String name, String value) {\n                if (!HttpHeaders.CONTENT_LENGTH.equals(name)) {\n                    LOGGER.info(&quot;setting header :&quot; + name);\n                    super.setHeader(name, value);\n                }\n            }\n        });\n    }\n\n    @Override\n    public void destroy() {\n        LOGGER.info(&quot;filter destroy called !!!&quot;);\n        Filter.super.destroy();\n    }\n}\n</code></pre>\n<p>The logs shows that headers other than 'Content-Length' are added.</p>\n<pre><code>13.10.2022 11:25:34.947+0530 INFO  [o.s.web.servlet.DispatcherServlet] [http-nio-8080-exec-1] Completed initialization in 8 ms\n13.10.2022 11:25:34.959+0530 INFO  [a.b.c.d.ContentLengthHeaderFilter] [http-nio-8080-exec-1] doFilter called ...............@@@\n13.10.2022 11:25:36.597+0530 INFO  [a.b.c.d.ContentLengthHeaderFilter] [http-nio-8080-exec-3] adding header :Location\n13.10.2022 11:25:36.597+0530 INFO  [a.b.c.d.ContentLengthHeaderFilter] [http-nio-8080-exec-3] adding header :X-CustomHeader\n13.10.2022 11:25:36.597+0530 INFO  [a.b.c.d.ContentLengthHeaderFilter] [http-nio-8080-exec-3] adding header :Transfer-Encoding\n</code></pre>\n<p>Still the API call results in 'Content-Length' header getting added to the response which causes the error mentioned above.\nAm I messing any thing or is there any other way to remove 'Content-Length' header?</p>\n"},{"tags":["java","inner-classes"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":3,"creation_date":1665649190,"post_id":74052475,"comment_id":130750617,"body_markdown":"Does this answer your question? [Why does Java prohibit static fields in inner classes?](https://stackoverflow.com/questions/1953530/why-does-java-prohibit-static-fields-in-inner-classes) Java 16 has lifted this restriction","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1953530/why-does-java-prohibit-static-fields-in-inner-classes\">Why does Java prohibit static fields in inner classes?</a> Java 16 has lifted this restriction"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1665649331,"post_id":74052475,"comment_id":130750677,"body_markdown":"For quoted material, please link to the source.","body":"For quoted material, please link to the source."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665655824,"post_id":74052475,"comment_id":130752751,"body_markdown":"the restriction was removed in Java 16 by [JEP 395](https://openjdk.org/jeps/395) - Also in the Java Language Specification [JLS 8.1.3](https://docs.oracle.com/javase/specs/jls/se16/html/jls-8.html#jls-8.1.3-130): &quot;*All of the rules that apply to nested classes apply to inner classes. In particular, an inner class may declare and inherit static members (&#167;8.2), and declare static initializers (&#167;8.7), even though the inner class itself is not static.*&quot;","body":"the restriction was removed in Java 16 by <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">JEP 395</a> - Also in the Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se16/html/jls-8.html#jls-8.1.3-130\" rel=\"nofollow noreferrer\">JLS 8.1.3</a>: &quot;<i>All of the rules that apply to nested classes apply to inner classes. In particular, an inner class may declare and inherit static members (&#167;8.2), and declare static initializers (&#167;8.7), even though the inner class itself is not static.</i>&quot;"},{"owner":{"account_id":26608801,"reputation":1,"user_id":20229239,"display_name":"Bharat Purwar"},"score":0,"creation_date":1665738904,"post_id":74052475,"comment_id":130773236,"body_markdown":"Thanks @user16320675 too, I was looking at java 8 documentation. The link you provided is really good.","body":"Thanks @user16320675 too, I was looking at java 8 documentation. The link you provided is really good."}],"owner":{"account_id":26608801,"reputation":1,"user_id":20229239,"display_name":"Bharat Purwar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1665650775,"answer_count":0,"score":0,"last_activity_date":1665649320,"creation_date":1665648802,"question_id":74052475,"body_markdown":"The official documentation says it is not possible, but it is getting created. How?\r\n\r\n\r\n&gt; As with instance methods and variables, an inner class is associated\r\n&gt; with an instance of its enclosing class and has direct access to that\r\n&gt; object&#39;s methods and fields. Also, because an inner class is\r\n&gt; associated with an instance, it cannot define any static members\r\n&gt; itself.\r\n\r\n```\r\n// outer class\r\nclass OuterClass\r\n{ \r\n\t\r\n\t// nested class\r\n\t class StaticNestedClass\r\n\t{\r\n        static int a;\r\n        static void hi(){\r\n            System.out.println(&quot;inside hi&quot;);\r\n        }\r\n\t\tvoid display()\r\n\t\t{\r\n            a = 9;\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;inner a = &quot; + a);\r\n\t\t\t\r\n            hi();\r\n\t\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Driver class\r\npublic class StaticNestedClassDemo\r\n{\r\n\tpublic static void main(String[] args)\r\n\t{\r\n        OuterClass outer = new OuterClass();\r\n        OuterClass.StaticNestedClass inner = outer.new StaticNestedClass();\r\n        // all these works\r\n        inner.hi();\r\n        OuterClass.StaticNestedClass.hi();\r\n\t\t\r\n\t}\r\n}\r\n```","title":"Inner class able to define static members in java","body":"<p>The official documentation says it is not possible, but it is getting created. How?</p>\n<blockquote>\n<p>As with instance methods and variables, an inner class is associated\nwith an instance of its enclosing class and has direct access to that\nobject's methods and fields. Also, because an inner class is\nassociated with an instance, it cannot define any static members\nitself.</p>\n</blockquote>\n<pre><code>// outer class\nclass OuterClass\n{ \n    \n    // nested class\n     class StaticNestedClass\n    {\n        static int a;\n        static void hi(){\n            System.out.println(&quot;inside hi&quot;);\n        }\n        void display()\n        {\n            a = 9;\n            \n            System.out.println(&quot;inner a = &quot; + a);\n            \n            hi();\n        \n        }\n    }\n}\n\n// Driver class\npublic class StaticNestedClassDemo\n{\n    public static void main(String[] args)\n    {\n        OuterClass outer = new OuterClass();\n        OuterClass.StaticNestedClass inner = outer.new StaticNestedClass();\n        // all these works\n        inner.hi();\n        OuterClass.StaticNestedClass.hi();\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","loops","nested","nested-loops"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1665241751,"post_id":73998060,"comment_id":130656041,"body_markdown":"Please post less bolded text and better formatted code. I&#39;ve tried to fix your question text and code formatting for you, but in the future, this is something that you yourself should be doing. No sense posting code that is harder to read than need-be.","body":"Please post less bolded text and better formatted code. I&#39;ve tried to fix your question text and code formatting for you, but in the future, this is something that you yourself should be doing. No sense posting code that is harder to read than need-be."},{"owner":{"account_id":2392155,"reputation":2372,"user_id":2091803,"accept_rate":86,"display_name":"Abdullah Leghari"},"score":0,"creation_date":1665242432,"post_id":73998060,"comment_id":130656192,"body_markdown":"Are you allowed to use if statements?","body":"Are you allowed to use if statements?"}],"answers":[{"tags":[],"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665243157,"creation_date":1665243157,"answer_id":73998265,"question_id":73998060,"body_markdown":"there are could be multiple approaches to this problem, here is how I would think about it:\r\n\r\n1. you need to display 9 lines of &quot;something&quot;, so lets have top level loop:\r\n\r\n```\r\nfor (int i=0; i&lt;9; i++) {...}\r\n```\r\n\r\n2. now, each iteration of this loop you need to display X stars, Y equal signs, Z plus signs:\r\n\r\n```\r\nfor (int i=0; i&lt;9; i++) {\r\n    for (int j=0; j&lt; #X# ; j++) System.out.print(&quot;*&quot;);\r\n    for (int j=0; j&lt; #Y# ; j++) System.out.print(&quot;=&quot;);\r\n    for (int j=0; j&lt; #Z# ; j++) System.out.print(&quot;+&quot;);\r\n    System.out.println();\r\n}\r\n```\r\n\r\n3. now you need to determine rules how X,Y,Z are changed, here is the logic I came up with:\r\n\r\n```\r\nif (stars &gt; 0 &amp;&amp; equals == 0) {\r\n    stars = 0;\r\n    equals = 5;\r\n}\r\nequals--;\r\npluses++;\r\n```\r\n\r\nso, final code will look like:\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        int stars = 5; // initial state\r\n        int equals = 4;\r\n        int pluses = 1;\r\n        for (int i=0; i&lt;9; i++) {\r\n            for (int j=0; j&lt;stars; j++) System.out.print(&quot;*&quot;);\r\n            for (int j=0; j&lt;equals; j++) System.out.print(&quot;=&quot;);\r\n            for (int j=0; j&lt;pluses; j++) System.out.print(&quot;+&quot;);\r\n            System.out.println();\r\n\r\n            if (stars &gt; 0 &amp;&amp; equals == 0) {\r\n                stars = 0;\r\n                equals = 5;\r\n            }\r\n            equals--;\r\n            pluses++;\r\n        }\r\n    }","title":"Can this problem be solved using nested loops?","body":"<p>there are could be multiple approaches to this problem, here is how I would think about it:</p>\n<ol>\n<li>you need to display 9 lines of &quot;something&quot;, so lets have top level loop:</li>\n</ol>\n<pre><code>for (int i=0; i&lt;9; i++) {...}\n</code></pre>\n<ol start=\"2\">\n<li>now, each iteration of this loop you need to display X stars, Y equal signs, Z plus signs:</li>\n</ol>\n<pre><code>for (int i=0; i&lt;9; i++) {\n    for (int j=0; j&lt; #X# ; j++) System.out.print(&quot;*&quot;);\n    for (int j=0; j&lt; #Y# ; j++) System.out.print(&quot;=&quot;);\n    for (int j=0; j&lt; #Z# ; j++) System.out.print(&quot;+&quot;);\n    System.out.println();\n}\n</code></pre>\n<ol start=\"3\">\n<li>now you need to determine rules how X,Y,Z are changed, here is the logic I came up with:</li>\n</ol>\n<pre><code>if (stars &gt; 0 &amp;&amp; equals == 0) {\n    stars = 0;\n    equals = 5;\n}\nequals--;\npluses++;\n</code></pre>\n<p>so, final code will look like:</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    int stars = 5; // initial state\n    int equals = 4;\n    int pluses = 1;\n    for (int i=0; i&lt;9; i++) {\n        for (int j=0; j&lt;stars; j++) System.out.print(&quot;*&quot;);\n        for (int j=0; j&lt;equals; j++) System.out.print(&quot;=&quot;);\n        for (int j=0; j&lt;pluses; j++) System.out.print(&quot;+&quot;);\n        System.out.println();\n\n        if (stars &gt; 0 &amp;&amp; equals == 0) {\n            stars = 0;\n            equals = 5;\n        }\n        equals--;\n        pluses++;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2392155,"reputation":2372,"user_id":2091803,"accept_rate":86,"display_name":"Abdullah Leghari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665243689,"creation_date":1665243209,"answer_id":73998275,"question_id":73998060,"body_markdown":"If you notice there is a pattern.\r\nIt prints a `*` starting from left to right.\r\nIt prints a `+` for each increasing number starting from right to  left.\r\nIt prints a `=` instead of * if you are past mid point (first the mid point of left to right, then the mid point of top to bottom).\r\n\r\nThe logic can be applied as following,\r\n\r\n\r\n    class Main {\r\n        public static void main(String[] args) {\r\n            int max = 10;\r\n            int switchPoint = max - 1;\r\n            \r\n            for(int i = 1; i &lt;= max -1; i++) {\r\n                for(int j = 1; j &lt;= max; j++) {\r\n                    if(j &gt; switchPoint)\r\n                        System.out.print(&quot;+&quot;);\r\n                    else if( i &gt; max/2 || j &gt; max / 2)\r\n                        System.out.print(&quot;=&quot;);\r\n                    else\r\n                        System.out.print(&quot;*&quot;);\r\n                    \r\n                }\r\n                switchPoint--;\r\n                \r\n                System.out.println();\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n    /* Output:\r\n    *****====+\r\n    *****===++\r\n    *****==+++\r\n    *****=++++\r\n    *****+++++\r\n    ====++++++\r\n    ===+++++++\r\n    ==++++++++\r\n    =+++++++++\r\n    */\r\n\r\n","title":"Can this problem be solved using nested loops?","body":"<p>If you notice there is a pattern.\nIt prints a <code>*</code> starting from left to right.\nIt prints a <code>+</code> for each increasing number starting from right to  left.\nIt prints a <code>=</code> instead of * if you are past mid point (first the mid point of left to right, then the mid point of top to bottom).</p>\n<p>The logic can be applied as following,</p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        int max = 10;\n        int switchPoint = max - 1;\n        \n        for(int i = 1; i &lt;= max -1; i++) {\n            for(int j = 1; j &lt;= max; j++) {\n                if(j &gt; switchPoint)\n                    System.out.print(&quot;+&quot;);\n                else if( i &gt; max/2 || j &gt; max / 2)\n                    System.out.print(&quot;=&quot;);\n                else\n                    System.out.print(&quot;*&quot;);\n                \n            }\n            switchPoint--;\n            \n            System.out.println();\n            \n        }\n    }\n}\n\n/* Output:\n*****====+\n*****===++\n*****==+++\n*****=++++\n*****+++++\n====++++++\n===+++++++\n==++++++++\n=+++++++++\n*/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26564956,"reputation":1,"user_id":20192173,"display_name":"Ankit kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665648891,"creation_date":1665247126,"answer_id":73998747,"question_id":73998060,"body_markdown":"    public class A {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tfor (int k = 4; k &gt; 0; k--) {\r\n    \t\t\tSystem.out.print(&quot;*****&quot;);\r\n    \t\t\tfor (int l = 0; l &lt; k; l++) {\r\n    \t\t\t\tSystem.out.print(&quot;=&quot;);\r\n    \t\t\t}\r\n    \t\t\tfor (int m = 0; m &lt; 5 - k; m++) {\r\n    \t\t\t\tSystem.out.print(&quot;+&quot;);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println();\r\n    \t\t}\r\n    \t\tSystem.out.print(&quot;*****+++++&quot;);\r\n    \t\tSystem.out.println();\r\n    \t\tfor (int s = 4; s &gt; 0; s--) {\r\n    \r\n    \t\t\tfor (int k = 0; k &lt; s; k++) {\r\n    \t\t\t\tSystem.out.print(&quot;=&quot;);\r\n    \t\t\t}\r\n    \r\n    \t\t\tfor (int l = 0; l &lt; 5; l++) {\r\n    \t\t\t\tSystem.out.print(&quot;+&quot;);\r\n    \t\t\t}\r\n    \t\t\tfor (int m = 0; m &lt; 5 - s; m++) {\r\n    \t\t\t\tSystem.out.print(&quot;+&quot;);\r\n    \t\t\t}\r\n    \r\n    \t\t\tSystem.out.println();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }","title":"Can this problem be solved using nested loops?","body":"<pre><code>public class A {\n\n    public static void main(String[] args) {\n        for (int k = 4; k &gt; 0; k--) {\n            System.out.print(&quot;*****&quot;);\n            for (int l = 0; l &lt; k; l++) {\n                System.out.print(&quot;=&quot;);\n            }\n            for (int m = 0; m &lt; 5 - k; m++) {\n                System.out.print(&quot;+&quot;);\n            }\n            System.out.println();\n        }\n        System.out.print(&quot;*****+++++&quot;);\n        System.out.println();\n        for (int s = 4; s &gt; 0; s--) {\n\n            for (int k = 0; k &lt; s; k++) {\n                System.out.print(&quot;=&quot;);\n            }\n\n            for (int l = 0; l &lt; 5; l++) {\n                System.out.print(&quot;+&quot;);\n            }\n            for (int m = 0; m &lt; 5 - s; m++) {\n                System.out.print(&quot;+&quot;);\n            }\n\n            System.out.println();\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17587036,"reputation":134,"user_id":12759597,"display_name":"Ramy Nabil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665250051,"creation_date":1665249390,"answer_id":73999026,"question_id":73998060,"body_markdown":"As you may notice the behavior of the &quot;*&quot; and &quot;=&quot; is different in the first five lines than in the next five lines, so you may either divide the loop in two loops or make a single one and check wether you are printing the first five lines or the last ones, that check may be done either by an if statement or in the loops conditions.\r\n\r\nSo the code will look like:\r\n\r\n    class Main {\r\n    \r\n      public static void main(String[] args) {\r\n        for (int i = 1; i &lt; 10; i++){\r\n            for (int j = 1; i &lt;= 5 &amp;&amp; j &lt;= 5; j++){\r\n                System.out.print(&quot;*&quot;);\r\n            }\r\n            for (int k = 5; (i &lt;= 5 &amp;&amp; k &gt; i) || (i &gt; 5 &amp;&amp; k &gt; i-5); k--){\r\n                System.out.print(&quot;=&quot;);\r\n            }\r\n            for (int l = 1; l &lt;= i; l++){\r\n                System.out.print(&quot;+&quot;);\r\n            } \r\n            System.out.println();    \r\n        }\r\n      }\r\n    }","title":"Can this problem be solved using nested loops?","body":"<p>As you may notice the behavior of the &quot;*&quot; and &quot;=&quot; is different in the first five lines than in the next five lines, so you may either divide the loop in two loops or make a single one and check wether you are printing the first five lines or the last ones, that check may be done either by an if statement or in the loops conditions.</p>\n<p>So the code will look like:</p>\n<pre><code>class Main {\n\n  public static void main(String[] args) {\n    for (int i = 1; i &lt; 10; i++){\n        for (int j = 1; i &lt;= 5 &amp;&amp; j &lt;= 5; j++){\n            System.out.print(&quot;*&quot;);\n        }\n        for (int k = 5; (i &lt;= 5 &amp;&amp; k &gt; i) || (i &gt; 5 &amp;&amp; k &gt; i-5); k--){\n            System.out.print(&quot;=&quot;);\n        }\n        for (int l = 1; l &lt;= i; l++){\n            System.out.print(&quot;+&quot;);\n        } \n        System.out.println();    \n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":26563914,"reputation":17,"user_id":20191319,"display_name":"Chad Boseman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":4,"score":0,"last_activity_date":1665648891,"creation_date":1665241578,"question_id":73998060,"body_markdown":"Would it be possible to produce this layout with nested loops? I&#39;m still new to nested to Java/loops and cannot solve this issue.\r\n```\r\n*****====+\r\n*****===++\r\n*****==+++\r\n*****=++++\r\n*****+++++\r\n====++++++\r\n===+++++++\r\n==++++++++\r\n=+++++++++\r\n```\r\n\r\nI&#39;m having trouble looping through five times with the &quot;*&quot; character without allowing the &quot;+&quot; to increment.\r\n\r\nHere is my code:\r\n```\r\nclass Main {\r\n\r\n  public static void main(String[] args) {\r\n    for (int k = 4; k &gt; 0; k--) {\r\n      System.out.print(&quot;*****&quot;);\r\n      for (int l = 0; l &lt; k; l++) {\r\n        System.out.print(&quot;=&quot;);\r\n      }\r\n      for (int m = 0; m &lt; 1; m++) {\r\n        for (int n = 0; n &lt; m; n++) {\r\n          System.out.print(&quot;+&quot;);\r\n        }\r\n      }\r\n      System.out.println();\r\n    }\r\n    System.out.print(&quot;*****+++++&quot;);\r\n  }\r\n\r\n}\r\n```","title":"Can this problem be solved using nested loops?","body":"<p>Would it be possible to produce this layout with nested loops? I'm still new to nested to Java/loops and cannot solve this issue.</p>\n<pre><code>*****====+\n*****===++\n*****==+++\n*****=++++\n*****+++++\n====++++++\n===+++++++\n==++++++++\n=+++++++++\n</code></pre>\n<p>I'm having trouble looping through five times with the &quot;*&quot; character without allowing the &quot;+&quot; to increment.</p>\n<p>Here is my code:</p>\n<pre><code>class Main {\n\n  public static void main(String[] args) {\n    for (int k = 4; k &gt; 0; k--) {\n      System.out.print(&quot;*****&quot;);\n      for (int l = 0; l &lt; k; l++) {\n        System.out.print(&quot;=&quot;);\n      }\n      for (int m = 0; m &lt; 1; m++) {\n        for (int n = 0; n &lt; m; n++) {\n          System.out.print(&quot;+&quot;);\n        }\n      }\n      System.out.println();\n    }\n    System.out.print(&quot;*****+++++&quot;);\n  }\n\n}\n</code></pre>\n"},{"tags":["java","devops","grafana","prometheus","spring-boot-actuator"],"comments":[{"owner":{"account_id":8186304,"reputation":707,"user_id":6162023,"display_name":"Sofo Gial"},"score":0,"creation_date":1557318164,"post_id":56040558,"comment_id":98723280,"body_markdown":"https://grafana.com/docs/alerting/rules/ Take a look here","body":"<a href=\"https://grafana.com/docs/alerting/rules/\" rel=\"nofollow noreferrer\">grafana.com/docs/alerting/rules</a> Take a look here"}],"answers":[{"tags":[],"owner":{"account_id":15711437,"reputation":197,"user_id":11336781,"display_name":"Jean"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1557320087,"creation_date":1557320087,"answer_id":56041312,"question_id":56040558,"body_markdown":"You can do it like that :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nFor the notification , you have to set up the notification channel in the alerting panel, to the left.\r\n\r\n  [1]: https://i.stack.imgur.com/a6fMO.png\r\n  [2]: https://i.stack.imgur.com/dQPB8.png","title":"How to create health check in Grafana?","body":"<p>You can do it like that :</p>\n\n<p><a href=\"https://i.stack.imgur.com/a6fMO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a6fMO.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/dQPB8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dQPB8.png\" alt=\"enter image description here\"></a></p>\n\n<p>For the notification , you have to set up the notification channel in the alerting panel, to the left.</p>\n"},{"tags":[],"owner":{"account_id":13280693,"reputation":1818,"user_id":9591240,"display_name":"Pasha"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1557327851,"creation_date":1557327851,"answer_id":56043714,"question_id":56040558,"body_markdown":"I just created a new dashboard with &quot;up&quot; query and it works. Only &quot;up&quot; in query and that&#39;s it.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Eg1dP.png","title":"How to create health check in Grafana?","body":"<p>I just created a new dashboard with \"up\" query and it works. Only \"up\" in query and that's it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Eg1dP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eg1dP.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":15371025,"reputation":31,"user_id":11089049,"display_name":"Arshad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665648608,"creation_date":1665648608,"answer_id":74052431,"question_id":56040558,"body_markdown":"[blackbox-exporter](https://github.com/prometheus/blackbox_exporter) can help you in this case. You can use blackbox exporter to monitor the application&#39;s status. You just need to specify the target URL to query an endpoint. Look at an [example](https://geekflare.com/monitor-website-with-blackbox-prometheus-grafana) here.","title":"How to create health check in Grafana?","body":"<p><a href=\"https://github.com/prometheus/blackbox_exporter\" rel=\"nofollow noreferrer\">blackbox-exporter</a> can help you in this case. You can use blackbox exporter to monitor the application's status. You just need to specify the target URL to query an endpoint. Look at an <a href=\"https://geekflare.com/monitor-website-with-blackbox-prometheus-grafana\" rel=\"nofollow noreferrer\">example</a> here.</p>\n"}],"owner":{"account_id":13280693,"reputation":1818,"user_id":9591240,"display_name":"Pasha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11433,"favorite_count":0,"down_vote_count":2,"up_vote_count":5,"answer_count":3,"score":3,"last_activity_date":1665648608,"creation_date":1557317631,"question_id":56040558,"body_markdown":"I have a running Docker container Spring Boot + Spring Boot Actuator + Prometheus.\r\n\r\nGrafana is also running as a Docker image and JVM (Micrometer) dashboard is displayed correctly.\r\n\r\nMy task is to create an alert that invokes in case `/api/actuator/health` doesn&#39;t return `200 {&quot;status&quot;:&quot;UP&quot;}`.\r\n\r\nCould you tell me how can I create such alert?","title":"How to create health check in Grafana?","body":"<p>I have a running Docker container Spring Boot + Spring Boot Actuator + Prometheus.</p>\n\n<p>Grafana is also running as a Docker image and JVM (Micrometer) dashboard is displayed correctly.</p>\n\n<p>My task is to create an alert that invokes in case <code>/api/actuator/health</code> doesn't return <code>200 {\"status\":\"UP\"}</code>.</p>\n\n<p>Could you tell me how can I create such alert?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9028,"page":964,"page_size":100}
