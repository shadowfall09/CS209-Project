{"items":[{"tags":["java","image","rgb","rgba"],"comments":[{"owner":{"account_id":25066,"reputation":66292,"user_id":64174,"accept_rate":100,"display_name":"Sean Owen"},"score":0,"creation_date":1310998287,"post_id":6734171,"comment_id":7979087,"body_markdown":"Set these values in what context? what API, the `Color` class?","body":"Set these values in what context? what API, the <code>Color</code> class?"}],"answers":[{"comments":[{"owner":{"account_id":1848634,"reputation":1545,"user_id":1675724,"accept_rate":61,"display_name":"Brethlosze"},"score":0,"creation_date":1427616278,"post_id":6734194,"comment_id":46843958,"body_markdown":"How do i change the already set RGBA values?. Is there a `c.setRGB(red,green,blue,alpha)` function?","body":"How do i change the already set RGBA values?. Is there a <code>c.setRGB(red,green,blue,alpha)</code> function?"},{"owner":{"account_id":100718,"reputation":43156,"user_id":271357,"accept_rate":83,"display_name":"dacwe"},"score":1,"creation_date":1427782901,"post_id":6734194,"comment_id":46907547,"body_markdown":"`setRGB(x, y, rgba)` takes an integer composite of red, green, blue and _alpha_. Create the color with transparency using `rgba = new Color(r, g, b, alpha).getRGB()`","body":"<code>setRGB(x, y, rgba)</code> takes an integer composite of red, green, blue and <i>alpha</i>. Create the color with transparency using <code>rgba = new Color(r, g, b, alpha).getRGB()</code>"}],"tags":[],"owner":{"account_id":100718,"reputation":43156,"user_id":271357,"accept_rate":83,"display_name":"dacwe"},"comment_count":2,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1310998436,"creation_date":1310998103,"answer_id":6734194,"question_id":6734171,"body_markdown":"You can create a [`Color`][1] object (the values should either be [`int`s][2] between `0`-`255` or [`float`s][3] between `0f`-`1f`:\r\n\r\n    Color c = new Color(red, green, blue, alpha);\r\n\r\n-----\r\n\r\nIf you want to paint an image with that color:\r\n\r\n    BufferedImage image = new BufferedImage(300, 200, BufferedImage.TYPE_INT_ARGB);\r\n    Graphics graphics = image.getGraphics(); \r\n    graphics.setColor(c);\r\n    graphics.fillRect(50, 50, 100, 100);\r\n    graphics.dispose();\r\n\r\nIf you only want to set a pixel (color model must be ARGB):\r\n\r\n    image.setRGB(50, 50, c.getRGB());\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/awt/Color.html\r\n  [2]: http://download.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html#Color%28int,%20int,%20int,%20int%29\r\n  [3]: http://download.oracle.com/javase/6/docs/api/java/awt/Color.html#Color%28float,%20float,%20float,%20float%29","title":"How do I set the R, G, B and Alpha components of a color?","body":"<p>You can create a <a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/Color.html\" rel=\"noreferrer\"><code>Color</code></a> object (the values should either be <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html#Color%28int,%20int,%20int,%20int%29\" rel=\"noreferrer\"><code>int</code>s</a> between <code>0</code>-<code>255</code> or <a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/Color.html#Color%28float,%20float,%20float,%20float%29\" rel=\"noreferrer\"><code>float</code>s</a> between <code>0f</code>-<code>1f</code>:</p>\n\n<pre><code>Color c = new Color(red, green, blue, alpha);\n</code></pre>\n\n<hr>\n\n<p>If you want to paint an image with that color:</p>\n\n<pre><code>BufferedImage image = new BufferedImage(300, 200, BufferedImage.TYPE_INT_ARGB);\nGraphics graphics = image.getGraphics(); \ngraphics.setColor(c);\ngraphics.fillRect(50, 50, 100, 100);\ngraphics.dispose();\n</code></pre>\n\n<p>If you only want to set a pixel (color model must be ARGB):</p>\n\n<pre><code>image.setRGB(50, 50, c.getRGB());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4275999,"reputation":34098,"user_id":3496570,"accept_rate":39,"display_name":"Zar E Ahmer"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1429283617,"creation_date":1429283617,"answer_id":29703098,"question_id":6734171,"body_markdown":"you can also  use\r\n\r\n    int colorToSet = Color.argb(alpha, red, green, blue); to set Alpha\r\n\r\n","title":"How do I set the R, G, B and Alpha components of a color?","body":"<p>you can also  use</p>\n\n<pre><code>int colorToSet = Color.argb(alpha, red, green, blue); to set Alpha\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24235045,"reputation":17,"user_id":18188300,"display_name":"Yasmine El"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678451345,"creation_date":1678451345,"answer_id":75696166,"question_id":6734171,"body_markdown":"you can use :\r\n\r\n    panel1.setBackground(new Color(0.0f, 0.0f, 0.0f,0.5f));","title":"How do I set the R, G, B and Alpha components of a color?","body":"<p>you can use :</p>\n<pre><code>panel1.setBackground(new Color(0.0f, 0.0f, 0.0f,0.5f));\n</code></pre>\n"}],"owner":{"account_id":449847,"reputation":16473,"user_id":844872,"accept_rate":61,"display_name":"Illep"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57223,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":6734194,"answer_count":3,"score":11,"last_activity_date":1678451345,"creation_date":1310997996,"question_id":6734171,"body_markdown":"There are 3 integer values that makes up a RGB value, and also i have the Alpha component value of the color. how do i set these 4 values to get the desired colour\r\n\r\n","title":"How do I set the R, G, B and Alpha components of a color?","body":"<p>There are 3 integer values that makes up a RGB value, and also i have the Alpha component value of the color. how do i set these 4 values to get the desired colour</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1678428714,"post_id":75692704,"comment_id":133533991,"body_markdown":"Emulator? Does this mean you are writing an Android app? If so, add a mention, and add a tag.","body":"Emulator? Does this mean you are writing an Android app? If so, add a mention, and add a tag."}],"owner":{"account_id":27979905,"reputation":1,"user_id":21367847,"display_name":"Jitendra Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1678460413,"answer_count":0,"score":0,"last_activity_date":1678451282,"creation_date":1678427899,"question_id":75692704,"body_markdown":"I programmed for contact list adding and updating Programme is given below\r\n```\r\npublic class RecyclerContactAdapter extends RecyclerView.Adapter&lt;RecyclerContactAdapter.ViewHolder&gt; {\r\n    Context context;\r\n    ArrayList&lt;ContactModel&gt; arrContacts;\r\n\r\n\r\n    RecyclerContactAdapter(Context Context, ArrayList&lt;ContactModel&gt; ArrContacts){\r\n        this.context = context;\r\n        this.arrContacts = arrContacts;\r\n    }\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(context).inflate(R.layout.contact_view, parent, false);\r\n        ViewHolder viewHolder = new ViewHolder(v);\r\n        return viewHolder;\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        holder.imgContact.setImageResource(arrContacts.get(position).img);\r\n        holder.txtName.setText(arrContacts.get(position).name);\r\n        holder.txtNumber.setText(arrContacts.get(position).number);\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount(){\r\n        return arrContacts.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder{\r\n        TextView txtName, txtNumber;\r\n        ImageView imgContact;\r\n        public ViewHolder(@NonNull View Viewitem){\r\n            super(Viewitem);\r\n            txtName = Viewitem.findViewById(R.id.contact);\r\n            txtNumber = Viewitem.findViewById(R.id.contactNumber);\r\n            imgContact = Viewitem.findViewById(R.id.imgContact);\r\n\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nin logcat show \r\n java.lang.NullPointerException: Attempt to invoke virtual method &#39;int java.util.ArrayList.size()&#39; on a null object reference. and not run on emulator when i run app is crashed what i do pease suggest.\r\n                                                                                                    \tat com.jkapp.myapplication.RecyclerContactAdapter.getItemCount(RecyclerContactAdapter.java:40)\r\n\r\n\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    ArrayList&lt;ContactModel&gt; arrContacts = new ArrayList&lt;ContactModel&gt;();\r\n    RecyclerContactAdapter adapter;\r\n    FloatingActionButton btnOpenDilog;\r\n    RecyclerView recyclerView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        RecyclerView recyclerView = findViewById(R.id.recyclerContact);\r\n        btnOpenDilog = findViewById(R.id.btnOpenDilog);\r\n        btnOpenDilog.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v){\r\n                Dialog dialog = new Dialog(MainActivity.this);\r\n                dialog.setContentView(R.layout.add_update_lay);\r\n                EditText edtName = dialog.findViewById(R.id.edtName);\r\n                EditText edtNumber = dialog.findViewById(R.id.edtNumber);\r\n                Button btnAction = dialog.findViewById(R.id.btnOpenDilog);\r\n                btnAction.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        String name = &quot;&quot;, number = &quot;&quot;;\r\n\r\n                        if (!edtName.getText().toString().equals(&quot;&quot;)) {\r\n                               name = edtName.getText().toString();\r\n                            }\r\n                        else {\r\n                            Toast.makeText(MainActivity.this, &quot;Please Enter Contact Name&quot;,         \r\n                             Toast.LENGTH_SHORT);\r\n                        }\r\n                        if (!edtNumber.getText().toString().equals(&quot;&quot;)) {\r\n                            number = edtNumber.getText().toString();\r\n                        }\r\n                        else {\r\n                            Toast.makeText(MainActivity.this, &quot;Please Enter Contact Number&quot;,     \r\n                            Toast.LENGTH_SHORT);\r\n                        }\r\n                        arrContacts.add(new ContactModel(name, number));\r\n                        adapter.notifyItemInserted(arrContacts.size()-1);\r\n                        recyclerView.scrollToPosition(arrContacts.size()-1);\r\n                    }\r\n                });\r\n                dialog.show();\r\n\r\n            };\r\n        });\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;A&quot;, &quot;9097887662&quot;));\r\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;B&quot;, &quot;9097887662&quot;));\r\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;C&quot;, &quot;9097887662&quot;));\r\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;D&quot;, &quot;9097887662&quot;));\r\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;E&quot;, &quot;9097887662&quot;));\r\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;F&quot;, &quot;9097887662&quot;));\r\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;G&quot;, &quot;9097887662&quot;));\r\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;H&quot;, &quot;9097887662&quot;));\r\n        RecyclerContactAdapter adapter = new RecyclerContactAdapter(this,arrContacts);\r\n        recyclerView.setAdapter(adapter);\r\n    }\r\n}\r\n```","title":"I am build program for contact list adding and updating. My problem is when i run app it show launch successfully but in emulator show app crashes","body":"<p>I programmed for contact list adding and updating Programme is given below</p>\n<pre><code>public class RecyclerContactAdapter extends RecyclerView.Adapter&lt;RecyclerContactAdapter.ViewHolder&gt; {\n    Context context;\n    ArrayList&lt;ContactModel&gt; arrContacts;\n\n\n    RecyclerContactAdapter(Context Context, ArrayList&lt;ContactModel&gt; ArrContacts){\n        this.context = context;\n        this.arrContacts = arrContacts;\n    }\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(context).inflate(R.layout.contact_view, parent, false);\n        ViewHolder viewHolder = new ViewHolder(v);\n        return viewHolder;\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n        holder.imgContact.setImageResource(arrContacts.get(position).img);\n        holder.txtName.setText(arrContacts.get(position).name);\n        holder.txtNumber.setText(arrContacts.get(position).number);\n\n    }\n\n    @Override\n    public int getItemCount(){\n        return arrContacts.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder{\n        TextView txtName, txtNumber;\n        ImageView imgContact;\n        public ViewHolder(@NonNull View Viewitem){\n            super(Viewitem);\n            txtName = Viewitem.findViewById(R.id.contact);\n            txtNumber = Viewitem.findViewById(R.id.contactNumber);\n            imgContact = Viewitem.findViewById(R.id.imgContact);\n\n        }\n    }\n}\n\n</code></pre>\n<p>in logcat show\njava.lang.NullPointerException: Attempt to invoke virtual method 'int java.util.ArrayList.size()' on a null object reference. and not run on emulator when i run app is crashed what i do pease suggest.\nat com.jkapp.myapplication.RecyclerContactAdapter.getItemCount(RecyclerContactAdapter.java:40)</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    ArrayList&lt;ContactModel&gt; arrContacts = new ArrayList&lt;ContactModel&gt;();\n    RecyclerContactAdapter adapter;\n    FloatingActionButton btnOpenDilog;\n    RecyclerView recyclerView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        RecyclerView recyclerView = findViewById(R.id.recyclerContact);\n        btnOpenDilog = findViewById(R.id.btnOpenDilog);\n        btnOpenDilog.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v){\n                Dialog dialog = new Dialog(MainActivity.this);\n                dialog.setContentView(R.layout.add_update_lay);\n                EditText edtName = dialog.findViewById(R.id.edtName);\n                EditText edtNumber = dialog.findViewById(R.id.edtNumber);\n                Button btnAction = dialog.findViewById(R.id.btnOpenDilog);\n                btnAction.setOnClickListener(new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n                        String name = &quot;&quot;, number = &quot;&quot;;\n\n                        if (!edtName.getText().toString().equals(&quot;&quot;)) {\n                               name = edtName.getText().toString();\n                            }\n                        else {\n                            Toast.makeText(MainActivity.this, &quot;Please Enter Contact Name&quot;,         \n                             Toast.LENGTH_SHORT);\n                        }\n                        if (!edtNumber.getText().toString().equals(&quot;&quot;)) {\n                            number = edtNumber.getText().toString();\n                        }\n                        else {\n                            Toast.makeText(MainActivity.this, &quot;Please Enter Contact Number&quot;,     \n                            Toast.LENGTH_SHORT);\n                        }\n                        arrContacts.add(new ContactModel(name, number));\n                        adapter.notifyItemInserted(arrContacts.size()-1);\n                        recyclerView.scrollToPosition(arrContacts.size()-1);\n                    }\n                });\n                dialog.show();\n\n            };\n        });\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;A&quot;, &quot;9097887662&quot;));\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;B&quot;, &quot;9097887662&quot;));\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;C&quot;, &quot;9097887662&quot;));\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;D&quot;, &quot;9097887662&quot;));\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;E&quot;, &quot;9097887662&quot;));\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;F&quot;, &quot;9097887662&quot;));\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;G&quot;, &quot;9097887662&quot;));\n        arrContacts.add(new ContactModel(R.drawable.contact_svgrepo_com, &quot;H&quot;, &quot;9097887662&quot;));\n        RecyclerContactAdapter adapter = new RecyclerContactAdapter(this,arrContacts);\n        recyclerView.setAdapter(adapter);\n    }\n}\n</code></pre>\n"},{"tags":["java","liquibase"],"comments":[{"owner":{"account_id":19497,"reputation":15503,"user_id":45756,"accept_rate":87,"display_name":"Nathan Voxland"},"score":0,"creation_date":1678478048,"post_id":75696077,"comment_id":133546775,"body_markdown":"Liquibase will convert some types for cross-database reasons, but it shouldn&#39;t be converting either of those types on postgresql. If you run `liquibase update-sql` to see what SQL it&#39;s actually running, is it sending it to the database as wrong types as part of that changeSet executing?","body":"Liquibase will convert some types for cross-database reasons, but it shouldn&#39;t be converting either of those types on postgresql. If you run <code>liquibase update-sql</code> to see what SQL it&#39;s actually running, is it sending it to the database as wrong types as part of that changeSet executing?"},{"owner":{"account_id":13098889,"reputation":41,"user_id":9463937,"display_name":"Lev83"},"score":0,"creation_date":1678484689,"post_id":75696077,"comment_id":133548297,"body_markdown":"It sending correct types but create nothing.","body":"It sending correct types but create nothing."},{"owner":{"account_id":13098889,"reputation":41,"user_id":9463937,"display_name":"Lev83"},"score":0,"creation_date":1678486135,"post_id":75696077,"comment_id":133548544,"body_markdown":"I found a reason: this table has created twice - by liquibase and by EclipseLink. It was beacuse I forgot to set the `DDL_GENERATION` to `none` in the EclipseLink&#39;s configuration.","body":"I found a reason: this table has created twice - by liquibase and by EclipseLink. It was beacuse I forgot to set the <code>DDL_GENERATION</code> to <code>none</code> in the EclipseLink&#39;s configuration."}],"owner":{"account_id":13098889,"reputation":41,"user_id":9463937,"display_name":"Lev83"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678450804,"creation_date":1678450804,"question_id":75696077,"body_markdown":"I created a changelog for quite simple table:\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;databaseChangeLog\r\n    xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog\r\n         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd&quot;&gt;\r\n\r\n    &lt;changeSet id=&quot;01&quot; author=&quot;me&quot;&gt;\r\n        &lt;createTable tableName=&quot;folders&quot; remarks=&quot;Folders&quot;&gt;\r\n            &lt;column name=&quot;id&quot; type=&quot;uuid&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot; primaryKey=&quot;true&quot;/&gt;\r\n            &lt;/column&gt;\r\n            &lt;column name=&quot;name&quot; type=&quot;varchar(255)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n            &lt;column name=&quot;last_edited&quot; type=&quot;datetime&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n            &lt;column name=&quot;folder_type&quot; type=&quot;varchar(10)&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n        &lt;/createTable&gt;\r\n    &lt;/changeSet&gt;\r\n\r\n&lt;/databaseChangeLog&gt;\r\n```\r\nAfter table has created I see that column `id` has type `varchar(255)` instead of `uuid` and column `folder_type` has type `int4` instead of `varchar(10)`. Why? How I can create columns with required types? I&#39;m working with PostgreSQL.","title":"Liquibase create columns of other type","body":"<p>I created a changelog for quite simple table:</p>\n<pre><code>\n&lt;databaseChangeLog\n    xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog\n         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd&quot;&gt;\n\n    &lt;changeSet id=&quot;01&quot; author=&quot;me&quot;&gt;\n        &lt;createTable tableName=&quot;folders&quot; remarks=&quot;Folders&quot;&gt;\n            &lt;column name=&quot;id&quot; type=&quot;uuid&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot; primaryKey=&quot;true&quot;/&gt;\n            &lt;/column&gt;\n            &lt;column name=&quot;name&quot; type=&quot;varchar(255)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n            &lt;column name=&quot;last_edited&quot; type=&quot;datetime&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n            &lt;column name=&quot;folder_type&quot; type=&quot;varchar(10)&quot;&gt;\n                &lt;constraints nullable=&quot;false&quot;/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n\n&lt;/databaseChangeLog&gt;\n</code></pre>\n<p>After table has created I see that column <code>id</code> has type <code>varchar(255)</code> instead of <code>uuid</code> and column <code>folder_type</code> has type <code>int4</code> instead of <code>varchar(10)</code>. Why? How I can create columns with required types? I'm working with PostgreSQL.</p>\n"},{"tags":["java","google-cloud-platform","google-bigquery","google-bigquery-java"],"owner":{"account_id":20264040,"reputation":1,"user_id":14861715,"display_name":"dominosski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678450781,"creation_date":1678450781,"question_id":75696073,"body_markdown":"I&#39;m using BigQuery java library to send data to BigQuery table. I have list of data to send and I&#39;m using bigQuery.insertAll() method to send all that data at once but I wanted to get rid of duplicates with the same timestamp so I added insertId parameter on timestamps so now when 2 rows with the same timestamp are added timestamp is merged but not the values. There is only 1 value, and other columns are null. \r\n(https://i.stack.imgur.com/MGmGn.png)\r\nI want it to be merged with all of the values within 1 timestamp. I searched for the solution and found &quot;WRITE_APPEND&quot; option that could possibly help me, but I don&#39;t know how to use it with InsertAllRequest and bigQuery.insertAll() method. \r\n\r\nHere is code to get insertId of timestamp (createRowsToInsert is just a method to create Map with field-value data).\r\n```\r\nList&lt;RowToInsert&gt; rowsToInsert = infoTableHelper.createRowsToInsert(inputInfoTable, fieldsNames);\r\n         List&lt;RowToInsert&gt; rowsToInsertWithId = new ArrayList&lt;&gt;();\r\n         for(RowToInsert row : rowsToInsert){\r\n            String insertId = null;\r\n\r\n            if(row.getContent().containsKey(&quot;timestamp&quot;)){\r\n               insertId = row.getContent().get(&quot;timestamp&quot;).toString();\r\n            }\r\n\r\n            if(insertId != null){\r\n               InsertAllRequest.RowToInsert insertAllRequest = InsertAllRequest.RowToInsert.of(insertId, row.getContent());\r\n               rowsToInsertWithId.add(insertAllRequest);\r\n            }\r\n         }\r\n```\r\nHere I&#39;m using bigQuery.insertAll() to send all data with insertId&#39;s at once to BigQuery.\r\n\r\n```\r\nInsertAllResponse response = bigQuery.insertAll(InsertAllRequest.newBuilder(tableId)\r\n                 .setRows(rowsToInsertWithId)\r\n                 .build());\r\n```\r\n\r\n\r\nI tried to add JobConfigurationLoad which has .setWriteDisposition(&quot;WRITE_APPEND&quot;) option but I couldn&#39;t connect it with insertAll() method.","title":"Can I use &quot;WRITE_APPEND&quot; option with insertAll() method of BigQuery class?","body":"<p>I'm using BigQuery java library to send data to BigQuery table. I have list of data to send and I'm using bigQuery.insertAll() method to send all that data at once but I wanted to get rid of duplicates with the same timestamp so I added insertId parameter on timestamps so now when 2 rows with the same timestamp are added timestamp is merged but not the values. There is only 1 value, and other columns are null.\n(<a href=\"https://i.stack.imgur.com/MGmGn.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/MGmGn.png</a>)\nI want it to be merged with all of the values within 1 timestamp. I searched for the solution and found &quot;WRITE_APPEND&quot; option that could possibly help me, but I don't know how to use it with InsertAllRequest and bigQuery.insertAll() method.</p>\n<p>Here is code to get insertId of timestamp (createRowsToInsert is just a method to create Map with field-value data).</p>\n<pre><code>List&lt;RowToInsert&gt; rowsToInsert = infoTableHelper.createRowsToInsert(inputInfoTable, fieldsNames);\n         List&lt;RowToInsert&gt; rowsToInsertWithId = new ArrayList&lt;&gt;();\n         for(RowToInsert row : rowsToInsert){\n            String insertId = null;\n\n            if(row.getContent().containsKey(&quot;timestamp&quot;)){\n               insertId = row.getContent().get(&quot;timestamp&quot;).toString();\n            }\n\n            if(insertId != null){\n               InsertAllRequest.RowToInsert insertAllRequest = InsertAllRequest.RowToInsert.of(insertId, row.getContent());\n               rowsToInsertWithId.add(insertAllRequest);\n            }\n         }\n</code></pre>\n<p>Here I'm using bigQuery.insertAll() to send all data with insertId's at once to BigQuery.</p>\n<pre><code>InsertAllResponse response = bigQuery.insertAll(InsertAllRequest.newBuilder(tableId)\n                 .setRows(rowsToInsertWithId)\n                 .build());\n</code></pre>\n<p>I tried to add JobConfigurationLoad which has .setWriteDisposition(&quot;WRITE_APPEND&quot;) option but I couldn't connect it with insertAll() method.</p>\n"},{"tags":["java","javafx","javafx-2","javafx-8","fxml"],"comments":[{"owner":{"account_id":6410016,"reputation":7025,"user_id":4970079,"accept_rate":76,"display_name":"GOXR3PLUS"},"score":0,"creation_date":1532279597,"post_id":31492749,"comment_id":89903404,"body_markdown":"Excellent question!!","body":"Excellent question!!"}],"answers":[{"tags":[],"owner":{"account_id":964125,"reputation":2496,"user_id":987889,"accept_rate":45,"display_name":"Mati"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1437242460,"creation_date":1437242460,"answer_id":31493974,"question_id":31492749,"body_markdown":"Something like this? Maybe not so pretty (I&#39;m not an artist), but I think it may cover the solution.\r\n\r\n![Sample solution][1]\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.scene.paint.*?&gt;\r\n    &lt;?import javafx.scene.shape.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    \r\n    &lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;${button.prefHeight}&quot; prefWidth=&quot;${button.prefWidth}&quot; xmlns=&quot;http://javafx.com/javafx/8&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;&gt;\r\n       &lt;children&gt;\r\n          &lt;Button fx:id=&quot;button&quot; layoutY=&quot;8.0&quot; mnemonicParsing=&quot;false&quot; text=&quot;Click &quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot; /&gt;\r\n          &lt;StackPane layoutX=&quot;57.0&quot; layoutY=&quot;-13.0&quot; AnchorPane.rightAnchor=&quot;-10&quot; AnchorPane.topAnchor=&quot;-10&quot;&gt;\r\n             &lt;children&gt;\r\n                &lt;Circle radius=&quot;10.0&quot; stroke=&quot;BLACK&quot; strokeType=&quot;INSIDE&quot;&gt;\r\n                   &lt;fill&gt;\r\n                      &lt;RadialGradient centerX=&quot;0.5&quot; centerY=&quot;0.5&quot; radius=&quot;0.8164556962025317&quot;&gt;\r\n                         &lt;stops&gt;\r\n                            &lt;Stop color=&quot;#ff361beb&quot; /&gt;\r\n                            &lt;Stop color=&quot;WHITE&quot; offset=&quot;1.0&quot; /&gt;\r\n                         &lt;/stops&gt;\r\n                      &lt;/RadialGradient&gt;\r\n                   &lt;/fill&gt;\r\n                &lt;/Circle&gt;\r\n                &lt;Label text=&quot;5&quot; /&gt;\r\n             &lt;/children&gt;\r\n          &lt;/StackPane&gt;\r\n       &lt;/children&gt;\r\n    &lt;/AnchorPane&gt;\r\n    \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/EVKLG.png\r\n\r\n","title":"How can I create a notification bubble, similar to the notification badge on iPhones&#39; menus, using JavaFX?","body":"<p>Something like this? Maybe not so pretty (I'm not an artist), but I think it may cover the solution.</p>\n\n<p><img src=\"https://i.stack.imgur.com/EVKLG.png\" alt=\"Sample solution\"></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import javafx.scene.paint.*?&gt;\n&lt;?import javafx.scene.shape.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import java.lang.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;AnchorPane maxHeight=\"-Infinity\" maxWidth=\"-Infinity\" minHeight=\"-Infinity\" minWidth=\"-Infinity\" prefHeight=\"${button.prefHeight}\" prefWidth=\"${button.prefWidth}\" xmlns=\"http://javafx.com/javafx/8\" xmlns:fx=\"http://javafx.com/fxml/1\"&gt;\n   &lt;children&gt;\n      &lt;Button fx:id=\"button\" layoutY=\"8.0\" mnemonicParsing=\"false\" text=\"Click \" AnchorPane.bottomAnchor=\"0.0\" AnchorPane.leftAnchor=\"0.0\" AnchorPane.rightAnchor=\"0.0\" AnchorPane.topAnchor=\"0.0\" /&gt;\n      &lt;StackPane layoutX=\"57.0\" layoutY=\"-13.0\" AnchorPane.rightAnchor=\"-10\" AnchorPane.topAnchor=\"-10\"&gt;\n         &lt;children&gt;\n            &lt;Circle radius=\"10.0\" stroke=\"BLACK\" strokeType=\"INSIDE\"&gt;\n               &lt;fill&gt;\n                  &lt;RadialGradient centerX=\"0.5\" centerY=\"0.5\" radius=\"0.8164556962025317\"&gt;\n                     &lt;stops&gt;\n                        &lt;Stop color=\"#ff361beb\" /&gt;\n                        &lt;Stop color=\"WHITE\" offset=\"1.0\" /&gt;\n                     &lt;/stops&gt;\n                  &lt;/RadialGradient&gt;\n               &lt;/fill&gt;\n            &lt;/Circle&gt;\n            &lt;Label text=\"5\" /&gt;\n         &lt;/children&gt;\n      &lt;/StackPane&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3219748,"reputation":115,"user_id":2717481,"accept_rate":20,"display_name":"JeroenV"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678450237,"creation_date":1678450237,"answer_id":75695963,"question_id":31492749,"body_markdown":"I found an easier solution (and used and ellipse instead of a circle to show double digit numbers in a nicer way), simply add an Ellipse and Label after the Button in the fxml file like this:\r\n\r\n    &lt;Button fx:id=&quot;btnAddMarking&quot; layoutX=&quot;640.0&quot; layoutY=&quot;60.0&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#stopRecording&quot; prefHeight=&quot;48.0&quot; prefWidth=&quot;205.0&quot; styleClass=&quot;button-remark&quot; text=&quot;Add marking&quot; visible=&quot;false&quot; /&gt;\r\n    &lt;Ellipse fx:id=&quot;elMarking&quot; fill=&quot;#ffaa00&quot; layoutX=&quot;841.0&quot; layoutY=&quot;63.0&quot; radiusX=&quot;16.0&quot; radiusY=&quot;12.0&quot; stroke=&quot;#ffaa00&quot; strokeType=&quot;INSIDE&quot; visible=&quot;false&quot; /&gt;\r\n    &lt;Label fx:id=&quot;lblMarking&quot; alignment=&quot;CENTER&quot; layoutX=&quot;829.0&quot; layoutY=&quot;51.0&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;25.0&quot; styleClass=&quot;label-white&quot; text=&quot;42&quot; visible=&quot;false&quot; /&gt;\r\n\r\n\r\nIve used this trick several times now: JavaFX simply plots the elements on screen in the order they are present in the fxml file, so you can always get an element &#39;on top&#39; of another one (and scene builder shows it correctly too).\r\n\r\nWell, at least in JavaFX 17, as that&#39;s what I&#39;m using at the moment.","title":"How can I create a notification bubble, similar to the notification badge on iPhones&#39; menus, using JavaFX?","body":"<p>I found an easier solution (and used and ellipse instead of a circle to show double digit numbers in a nicer way), simply add an Ellipse and Label after the Button in the fxml file like this:</p>\n<pre><code>&lt;Button fx:id=&quot;btnAddMarking&quot; layoutX=&quot;640.0&quot; layoutY=&quot;60.0&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#stopRecording&quot; prefHeight=&quot;48.0&quot; prefWidth=&quot;205.0&quot; styleClass=&quot;button-remark&quot; text=&quot;Add marking&quot; visible=&quot;false&quot; /&gt;\n&lt;Ellipse fx:id=&quot;elMarking&quot; fill=&quot;#ffaa00&quot; layoutX=&quot;841.0&quot; layoutY=&quot;63.0&quot; radiusX=&quot;16.0&quot; radiusY=&quot;12.0&quot; stroke=&quot;#ffaa00&quot; strokeType=&quot;INSIDE&quot; visible=&quot;false&quot; /&gt;\n&lt;Label fx:id=&quot;lblMarking&quot; alignment=&quot;CENTER&quot; layoutX=&quot;829.0&quot; layoutY=&quot;51.0&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;25.0&quot; styleClass=&quot;label-white&quot; text=&quot;42&quot; visible=&quot;false&quot; /&gt;\n</code></pre>\n<p>Ive used this trick several times now: JavaFX simply plots the elements on screen in the order they are present in the fxml file, so you can always get an element 'on top' of another one (and scene builder shows it correctly too).</p>\n<p>Well, at least in JavaFX 17, as that's what I'm using at the moment.</p>\n"}],"owner":{"account_id":5513405,"reputation":43,"user_id":4378999,"display_name":"GuruWizard91"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1962,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31493974,"answer_count":2,"score":1,"last_activity_date":1678450237,"creation_date":1437233811,"question_id":31492749,"body_markdown":"I am new to JavaFX and I&#39;m trying to create a notification badge similar to the image below. ![enter image description here][1]\r\n\r\nIt is to be used as a notification count and I was hoping to place it over the corner of a JavaFX button. My problem is that I cannot find a native solution that supports this. Can anyone recommend an approach?\r\n\r\nThanks\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/CfSLe.jpg","title":"How can I create a notification bubble, similar to the notification badge on iPhones&#39; menus, using JavaFX?","body":"<p>I am new to JavaFX and I'm trying to create a notification badge similar to the image below. <img src=\"https://i.stack.imgur.com/CfSLe.jpg\" alt=\"enter image description here\"></p>\n\n<p>It is to be used as a notification count and I was hoping to place it over the corner of a JavaFX button. My problem is that I cannot find a native solution that supports this. Can anyone recommend an approach?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","android","module","compiler-construction"],"owner":{"account_id":11580129,"reputation":11,"user_id":8484319,"display_name":"More.Rich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678449826,"creation_date":1678449826,"question_id":75695881,"body_markdown":"I am using the abstract processor to generate part of the code, but the compilation has been completed in the android component, and I want to hand it over to the app module for processing. Is there a way to let part of the code in the component be handed over to the project it depends on?.\r\n\r\nI&#39;ve tried this, but it just skip it...\r\n```\r\nsourceSets {\r\n        main {\r\n            java {\r\n                filter.exclude(&quot;com/frank/simplelib/SimpleClass.java&quot;)\r\n            }\r\n        }\r\n    }\r\n```","title":"Can gradle compile some java later?","body":"<p>I am using the abstract processor to generate part of the code, but the compilation has been completed in the android component, and I want to hand it over to the app module for processing. Is there a way to let part of the code in the component be handed over to the project it depends on?.</p>\n<p>I've tried this, but it just skip it...</p>\n<pre><code>sourceSets {\n        main {\n            java {\n                filter.exclude(&quot;com/frank/simplelib/SimpleClass.java&quot;)\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","loops","hashmap","hashset"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":4,"creation_date":1678383473,"post_id":75688122,"comment_id":133526256,"body_markdown":"Please see the [How to Ask](https://stackoverflow.com/help/how-to-ask) page. You have not described any actual issue. What happens? What&#39;s supposed to happen? What is the **specific** issue(s) you&#39;re having?","body":"Please see the <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a> page. You have not described any actual issue. What happens? What&#39;s supposed to happen? What is the <b>specific</b> issue(s) you&#39;re having?"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1678385048,"post_id":75688122,"comment_id":133526735,"body_markdown":"So you want to make a set of all stops and a hashmap mapping each stop to the result of `getBusesStoppingHere(stop)`. It&#39;s not doing anything too exotic compared to the code you already have.","body":"So you want to make a set of all stops and a hashmap mapping each stop to the result of <code>getBusesStoppingHere(stop)</code>. It&#39;s not doing anything too exotic compared to the code you already have."},{"owner":{"account_id":27026966,"reputation":23,"user_id":20584068,"display_name":"Harry"},"score":0,"creation_date":1678387773,"post_id":75688122,"comment_id":133527395,"body_markdown":"@teapot418 thank you for responding. I feel the solution is starring me in the face but I&#39;m rather stumped ... I want to return a map derived from routes, in which each stop included in the routes map is a key and each value is a set of bus numbers that have that stop on their route. Does that make what I&#39;m trying to achieve clear?","body":"@teapot418 thank you for responding. I feel the solution is starring me in the face but I&#39;m rather stumped ... I want to return a map derived from routes, in which each stop included in the routes map is a key and each value is a set of bus numbers that have that stop on their route. Does that make what I&#39;m trying to achieve clear?"},{"owner":{"account_id":27026966,"reputation":23,"user_id":20584068,"display_name":"Harry"},"score":0,"creation_date":1678387837,"post_id":75688122,"comment_id":133527415,"body_markdown":"@DaveNewton@teapot418 thank you for responding. I feel the solution is starring me in the face but I&#39;m rather stumped ... I want to return a map derived from routes, in which each stop included in the routes map is a key and each value is a set of bus numbers that have that stop on their route. Does that make what I&#39;m trying to achieve clear?","body":"@DaveNewton@teapot418 thank you for responding. I feel the solution is starring me in the face but I&#39;m rather stumped ... I want to return a map derived from routes, in which each stop included in the routes map is a key and each value is a set of bus numbers that have that stop on their route. Does that make what I&#39;m trying to achieve clear?"},{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1678389413,"post_id":75688122,"comment_id":133527802,"body_markdown":"@Harry So the way I see it, what you need to do is collect all of the stop names from all bus routes into a single `Set&lt;String&gt; stops`, then go through this new list and for each `stop`, create a new `Set&lt;Integer&gt; busNumbers` and check if any entries in `routes` contains that stop. If it does, add the key for that entry to the set and finally `map.put(stop, busNumbers);`.","body":"@Harry So the way I see it, what you need to do is collect all of the stop names from all bus routes into a single <code>Set&lt;String&gt; stops</code>, then go through this new list and for each <code>stop</code>, create a new <code>Set&lt;Integer&gt; busNumbers</code> and check if any entries in <code>routes</code> contains that stop. If it does, add the key for that entry to the set and finally <code>map.put(stop, busNumbers);</code>."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678449604,"creation_date":1678391459,"answer_id":75689384,"question_id":75688122,"body_markdown":"&gt; I want to return a map derived from routes, in which each stop included in the routes map is a key and each value is a set of bus numbers that have that stop on their route.\r\n\r\nI believe this will work do what you want.\r\n- first allocate a record to hold a Stop and Bus number. The `Map.entry()` method could also be used but the record doesn&#39;t cost anything and gives the arguments meaningful names.\r\n- then stream the existing map&#39;s entrySet()\r\n- Then using `flatMap()`, stream the `entrySet&#39;s` stops. Each stop and the associated bus will then be mapped to the record.\r\n- Now it is just a matter of grouping each stop to a set of buses.\r\n- [Collectors.groupingBy](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)) will also take another collector, in this case [Collectors.mapping](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/Collectors.html#mapping(java.util.function.Function,java.util.stream.Collector)) to extract the Bus number from the `Pair` instance, and then put in a set.\r\n```\r\nrecord Pair(String getStop, Integer getBus) {}\r\n\r\npublic  Map&lt;String, Set&lt;Integer&gt;&gt; getStopsAndBusNumbers(Map&lt;Integer, List&lt;String&gt;&gt; map) {\r\n  return map.entrySet()\r\n      .stream()\r\n      .flatMap(e-&gt;e.getValue().stream().map(stop-&gt;new Pair(stop, e.getKey())))\r\n      .collect(Collectors.groupingBy(Pair::getStop,\r\n           Collectors.mapping(Pair::getBus, Collectors.toSet())));\r\n}\r\n```\r\nWhen called with the routes map, here will be the results.\r\n```\r\nStation=[32, 13]\r\nSchool=[13]\r\nBrown Street=[32, 13]\r\nHigh Street=[32, 13]\r\nAcacia Avenue=[32]\r\nBroadway=[32]\r\nHospital=[13]\r\n```\r\nFor this to work smoothly, you should change your types to their defining interface.\r\nSo `HashMap&lt;String, ArrayList&lt;Integer&gt;&gt;` should be declared as `Map&lt;String, List&lt;Integer&gt;&gt;`, etc.  This is not just for this exercise but is standard practice in Java.  You can always pass or assign an `object` to its defining `interface` but not the converse (without casting) since different implementations of that interface could exist.\r\n\r\nHere is a more imperative solution that might have been the approach prior to Java 8.  The results are the same although when maps and sets are involved the order of contents may change.  It uses a nested loop to first iterate over the keys (buses) and then the values (stops).  The heart of the matter is to check if the stop exists.  If not, add it with a new HashSet.  Then simply continue out of the conditional and add the bus number to the set.\r\n\r\n```\r\npublic Map&lt;String, Set&lt;Integer&gt;&gt; getStopsAndBusNumbers2(\r\n        Map&lt;Integer, List&lt;String&gt;&gt; map) {\r\n    Map&lt;String, Set&lt;Integer&gt;&gt; result = new HashMap&lt;&gt;();\r\n    for (Entry&lt;Integer, List&lt;String&gt;&gt; e : map.entrySet()) {\r\n        for (String stop : e.getValue()) {\r\n            if (!result.containsKey(stop)) {\r\n                result.put(stop, new HashSet&lt;Integer&gt;());\r\n            }\r\n            result.get(stop).add(e.getKey()); // add bus for stop\r\n        }\r\n    }\r\n    return result;\r\n}\r\n \r\n","title":"Return a hashmap derived from an arraylist","body":"<blockquote>\n<p>I want to return a map derived from routes, in which each stop included in the routes map is a key and each value is a set of bus numbers that have that stop on their route.</p>\n</blockquote>\n<p>I believe this will work do what you want.</p>\n<ul>\n<li>first allocate a record to hold a Stop and Bus number. The <code>Map.entry()</code> method could also be used but the record doesn't cost anything and gives the arguments meaningful names.</li>\n<li>then stream the existing map's entrySet()</li>\n<li>Then using <code>flatMap()</code>, stream the <code>entrySet's</code> stops. Each stop and the associated bus will then be mapped to the record.</li>\n<li>Now it is just a matter of grouping each stop to a set of buses.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\">Collectors.groupingBy</a> will also take another collector, in this case <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/Collectors.html#mapping(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\">Collectors.mapping</a> to extract the Bus number from the <code>Pair</code> instance, and then put in a set.</li>\n</ul>\n<pre><code>record Pair(String getStop, Integer getBus) {}\n\npublic  Map&lt;String, Set&lt;Integer&gt;&gt; getStopsAndBusNumbers(Map&lt;Integer, List&lt;String&gt;&gt; map) {\n  return map.entrySet()\n      .stream()\n      .flatMap(e-&gt;e.getValue().stream().map(stop-&gt;new Pair(stop, e.getKey())))\n      .collect(Collectors.groupingBy(Pair::getStop,\n           Collectors.mapping(Pair::getBus, Collectors.toSet())));\n}\n</code></pre>\n<p>When called with the routes map, here will be the results.</p>\n<pre><code>Station=[32, 13]\nSchool=[13]\nBrown Street=[32, 13]\nHigh Street=[32, 13]\nAcacia Avenue=[32]\nBroadway=[32]\nHospital=[13]\n</code></pre>\n<p>For this to work smoothly, you should change your types to their defining interface.\nSo <code>HashMap&lt;String, ArrayList&lt;Integer&gt;&gt;</code> should be declared as <code>Map&lt;String, List&lt;Integer&gt;&gt;</code>, etc.  This is not just for this exercise but is standard practice in Java.  You can always pass or assign an <code>object</code> to its defining <code>interface</code> but not the converse (without casting) since different implementations of that interface could exist.</p>\n<p>Here is a more imperative solution that might have been the approach prior to Java 8.  The results are the same although when maps and sets are involved the order of contents may change.  It uses a nested loop to first iterate over the keys (buses) and then the values (stops).  The heart of the matter is to check if the stop exists.  If not, add it with a new HashSet.  Then simply continue out of the conditional and add the bus number to the set.</p>\n<pre><code>public Map&lt;String, Set&lt;Integer&gt;&gt; getStopsAndBusNumbers2(\n        Map&lt;Integer, List&lt;String&gt;&gt; map) {\n    Map&lt;String, Set&lt;Integer&gt;&gt; result = new HashMap&lt;&gt;();\n    for (Entry&lt;Integer, List&lt;String&gt;&gt; e : map.entrySet()) {\n        for (String stop : e.getValue()) {\n            if (!result.containsKey(stop)) {\n                result.put(stop, new HashSet&lt;Integer&gt;());\n            }\n            result.get(stop).add(e.getKey()); // add bus for stop\n        }\n    }\n    return result;\n}\n \n</code></pre>\n"}],"owner":{"account_id":27026966,"reputation":23,"user_id":20584068,"display_name":"Harry"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1678449604,"creation_date":1678383120,"question_id":75688122,"body_markdown":"I am trying to return a `HashMap` with the bus numbers and their stops.\r\n\r\nI have already created a method to return a `HashSet` by passing one of the stops into it.\r\n\r\nI feel like it can all come together, but I keep going around in circles.\r\n\r\n```\r\npublic class BusRoutes\r\n{\r\n\r\n    public HashMap&lt;Integer,ArrayList&lt;String&gt;&gt; routes;\r\n\r\n    public void populateRoutes()\r\n    {\r\n        ArrayList&lt;String&gt; stops = new ArrayList&lt;&gt;();\r\n        stops.add(&quot;High Street&quot;);\r\n        stops.add(&quot;Acacia Avenue&quot;);\r\n        stops.add(&quot;Brown Street&quot;);\r\n        stops.add(&quot;Broadway&quot;);\r\n        stops.add(&quot;Station&quot;);\r\n        routes.put(32, stops);\r\n\r\n        ArrayList&lt;String&gt; stops1 = new ArrayList&lt;&gt;();\r\n        stops1.add(&quot;High Street&quot;);\r\n        stops1.add(&quot;Hospital&quot;);\r\n        stops1.add(&quot;Brown Street&quot;);\r\n        stops1.add(&quot;School&quot;);\r\n        stops1.add(&quot;Station&quot;);\r\n        routes.put(13, stops1);\r\n    }\r\n\r\n    public BusRoutes() {\r\n        routes = new HashMap&lt;&gt;();\r\n        reader = new InputReader();\r\n        populateRoutes();        \r\n    }\r\n    public void printRoute(int busNum) {\r\n        System.out.println(&quot;Bus number &quot; + busNum + &quot; route:&quot;);\r\n\r\n        for (int i = 0; i &lt; routes.get(busNum).size(); i++) {\r\n            System.out.println(routes.get(busNum).get(i));\r\n        }        \r\n\r\n    }\r\n\r\n    public void printAllRoutes() {\r\n        for (int i = 0; i &lt; routes.size(); i++) {\r\n            System.out.println(routes.get(i));\r\n        }       \r\n    }\r\n\r\n    public HashSet&lt;Integer&gt; getBusesStoppingHere(String aStop) {    \r\n        HashSet&lt;Integer&gt; busNumbers = new HashSet&lt;&gt;();\r\n\r\n        for (Integer key : routes.keySet()) {\r\n            if (routes.get(key).contains(aStop)) {\r\n                busNumbers.add(key);\r\n            }\r\n        }\r\n\r\n        return busNumbers;\r\n    }\r\n\r\n    public HashMap&lt;String, HashSet&lt;Integer&gt;&gt; getStopsAndBusNumbers() {\r\n        HashMap&lt;String, HashSet&lt;Integer&gt;&gt; map = new HashMap&lt;String, HashSet&lt;Integer&gt;&gt;();\r\n        \r\n        // This is where I am stuck\r\n\r\n        return map;\r\n    }\r\n}\r\n```","title":"Return a hashmap derived from an arraylist","body":"<p>I am trying to return a <code>HashMap</code> with the bus numbers and their stops.</p>\n<p>I have already created a method to return a <code>HashSet</code> by passing one of the stops into it.</p>\n<p>I feel like it can all come together, but I keep going around in circles.</p>\n<pre><code>public class BusRoutes\n{\n\n    public HashMap&lt;Integer,ArrayList&lt;String&gt;&gt; routes;\n\n    public void populateRoutes()\n    {\n        ArrayList&lt;String&gt; stops = new ArrayList&lt;&gt;();\n        stops.add(&quot;High Street&quot;);\n        stops.add(&quot;Acacia Avenue&quot;);\n        stops.add(&quot;Brown Street&quot;);\n        stops.add(&quot;Broadway&quot;);\n        stops.add(&quot;Station&quot;);\n        routes.put(32, stops);\n\n        ArrayList&lt;String&gt; stops1 = new ArrayList&lt;&gt;();\n        stops1.add(&quot;High Street&quot;);\n        stops1.add(&quot;Hospital&quot;);\n        stops1.add(&quot;Brown Street&quot;);\n        stops1.add(&quot;School&quot;);\n        stops1.add(&quot;Station&quot;);\n        routes.put(13, stops1);\n    }\n\n    public BusRoutes() {\n        routes = new HashMap&lt;&gt;();\n        reader = new InputReader();\n        populateRoutes();        \n    }\n    public void printRoute(int busNum) {\n        System.out.println(&quot;Bus number &quot; + busNum + &quot; route:&quot;);\n\n        for (int i = 0; i &lt; routes.get(busNum).size(); i++) {\n            System.out.println(routes.get(busNum).get(i));\n        }        \n\n    }\n\n    public void printAllRoutes() {\n        for (int i = 0; i &lt; routes.size(); i++) {\n            System.out.println(routes.get(i));\n        }       \n    }\n\n    public HashSet&lt;Integer&gt; getBusesStoppingHere(String aStop) {    \n        HashSet&lt;Integer&gt; busNumbers = new HashSet&lt;&gt;();\n\n        for (Integer key : routes.keySet()) {\n            if (routes.get(key).contains(aStop)) {\n                busNumbers.add(key);\n            }\n        }\n\n        return busNumbers;\n    }\n\n    public HashMap&lt;String, HashSet&lt;Integer&gt;&gt; getStopsAndBusNumbers() {\n        HashMap&lt;String, HashSet&lt;Integer&gt;&gt; map = new HashMap&lt;String, HashSet&lt;Integer&gt;&gt;();\n        \n        // This is where I am stuck\n\n        return map;\n    }\n}\n</code></pre>\n"},{"tags":["java","visual-studio-code","openjdk-11"],"comments":[{"owner":{"account_id":19088616,"reputation":8294,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"score":0,"creation_date":1615967644,"post_id":66666406,"comment_id":117852690,"body_markdown":"How about running your code in external Terminal? use `javac Helloworld.java` to generate .class file. Then run `java Helloworld` to show result. if there&#39;s no error shown, try to **clean java workspace** and reinstall [Java Extension Pack](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack) in VS Code.","body":"How about running your code in external Terminal? use <code>javac Helloworld.java</code> to generate .class file. Then run <code>java Helloworld</code> to show result. if there&#39;s no error shown, try to <b>clean java workspace</b> and reinstall <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">Java Extension Pack</a> in VS Code."},{"owner":{"account_id":20742791,"reputation":61,"user_id":15232001,"display_name":"MaxMobileYT"},"score":0,"creation_date":1616125521,"post_id":66666406,"comment_id":117910850,"body_markdown":"@MollyWang it says in the terminal could not find or load main Class Helloworld, what does this mean?","body":"@MollyWang it says in the terminal could not find or load main Class Helloworld, what does this mean?"},{"owner":{"account_id":19088616,"reputation":8294,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"score":0,"creation_date":1616125885,"post_id":66666406,"comment_id":117910900,"body_markdown":"Can you show the error screenshots? both the folder structure in vscode and the error in external terminal. please provide as much information about your question as possible.","body":"Can you show the error screenshots? both the folder structure in vscode and the error in external terminal. please provide as much information about your question as possible."}],"answers":[{"tags":[],"owner":{"account_id":14548106,"reputation":81,"user_id":10507824,"display_name":"gabriel-pimentel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620333389,"creation_date":1620333389,"answer_id":67425621,"question_id":66666406,"body_markdown":"In VSCode: \r\n\r\n 1. Go to &quot;Extensions&quot;\r\n 2. Type &quot;Java Extension Pack&quot;\r\n 3. Uninstall\r\n 4. Install\r\n\r\n","title":"Java &quot;&#39;java.execute.workspaceCommand&#39; failed&quot; in VSCode","body":"<p>In VSCode:</p>\n<ol>\n<li>Go to &quot;Extensions&quot;</li>\n<li>Type &quot;Java Extension Pack&quot;</li>\n<li>Uninstall</li>\n<li>Install</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":36818,"reputation":2521,"user_id":105101,"display_name":"Greg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622043021,"creation_date":1622043021,"answer_id":67708098,"question_id":66666406,"body_markdown":"I had this error, and it disappeared after reloading the window:\r\n\r\n    &lt;Ctrl-P&gt; Developer: Reload Window\r\n\r\nor simply,\r\n\r\n    &lt;Ctrl-R&gt;","title":"Java &quot;&#39;java.execute.workspaceCommand&#39; failed&quot; in VSCode","body":"<p>I had this error, and it disappeared after reloading the window:</p>\n<pre><code>&lt;Ctrl-P&gt; Developer: Reload Window\n</code></pre>\n<p>or simply,</p>\n<pre><code>&lt;Ctrl-R&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52103,"reputation":4428,"user_id":155684,"accept_rate":92,"display_name":"Keshav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623035983,"creation_date":1623035983,"answer_id":67865566,"question_id":66666406,"body_markdown":"I was running into this problem when something with my maven repository settings was incorrect. When I placed the right settings.xml file in the .m2 directory, I was able to launch the program from vscode.\r\n\r\nI could also be related to this issue:\r\nhttps://github.com/redhat-developer/vscode-java/issues/1929","title":"Java &quot;&#39;java.execute.workspaceCommand&#39; failed&quot; in VSCode","body":"<p>I was running into this problem when something with my maven repository settings was incorrect. When I placed the right settings.xml file in the .m2 directory, I was able to launch the program from vscode.</p>\n<p>I could also be related to this issue:\n<a href=\"https://github.com/redhat-developer/vscode-java/issues/1929\" rel=\"nofollow noreferrer\">https://github.com/redhat-developer/vscode-java/issues/1929</a></p>\n"},{"tags":[],"owner":{"account_id":12461251,"reputation":61,"user_id":9072810,"display_name":"user9072810"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1625700192,"creation_date":1625700192,"answer_id":68293944,"question_id":66666406,"body_markdown":"1. Go to extensions tab\r\n2. Search for **Java extension package**\r\n3. Click on disable. If it gets disabled, well and good otherwise a pop-up may appear at the bottom, in the bottom of pop-up, click on *disable for all windows* or something similar text.\r\n4. Enable the **Java extension package** again.\r\n\r\nIn my case, it worked after step 4, let me know about yours","title":"Java &quot;&#39;java.execute.workspaceCommand&#39; failed&quot; in VSCode","body":"<ol>\n<li>Go to extensions tab</li>\n<li>Search for <strong>Java extension package</strong></li>\n<li>Click on disable. If it gets disabled, well and good otherwise a pop-up may appear at the bottom, in the bottom of pop-up, click on <em>disable for all windows</em> or something similar text.</li>\n<li>Enable the <strong>Java extension package</strong> again.</li>\n</ol>\n<p>In my case, it worked after step 4, let me know about yours</p>\n"},{"tags":[],"owner":{"account_id":1090797,"reputation":8695,"user_id":1085483,"accept_rate":83,"display_name":"Rui Marques"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678449476,"creation_date":1678449476,"answer_id":75695832,"question_id":66666406,"body_markdown":"If you are facing this error around the time of this post March 2023, there is a bug in vscode-java-dependency extension. You can either check if you have the latest version or try to install this pre-release, it fixed it for me:\r\n\r\nhttps://github.com/microsoft/vscode-java-dependency/issues/720","title":"Java &quot;&#39;java.execute.workspaceCommand&#39; failed&quot; in VSCode","body":"<p>If you are facing this error around the time of this post March 2023, there is a bug in vscode-java-dependency extension. You can either check if you have the latest version or try to install this pre-release, it fixed it for me:</p>\n<p><a href=\"https://github.com/microsoft/vscode-java-dependency/issues/720\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode-java-dependency/issues/720</a></p>\n"}],"owner":{"account_id":20742791,"reputation":61,"user_id":15232001,"display_name":"MaxMobileYT"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9089,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1678449476,"creation_date":1615950226,"question_id":66666406,"body_markdown":"I recently wanted to try Java, so i started out with Hello World! I installed OpenJDK 11 for VSCode and ran the program, but it produced the following error:\r\n`Running the contributed command: &#39;java.execute.workspaceCommand&#39; failed.`\r\n\r\nI looked at the Java runtime configuration and it detected the JDK, but it showed that error!\r\n","title":"Java &quot;&#39;java.execute.workspaceCommand&#39; failed&quot; in VSCode","body":"<p>I recently wanted to try Java, so i started out with Hello World! I installed OpenJDK 11 for VSCode and ran the program, but it produced the following error:\n<code>Running the contributed command: 'java.execute.workspaceCommand' failed.</code></p>\n<p>I looked at the Java runtime configuration and it detected the JDK, but it showed that error!</p>\n"},{"tags":["java","spring"],"answers":[{"comments":[{"owner":{"account_id":27981669,"reputation":1,"user_id":21369321,"display_name":"Stuthemp"},"score":0,"creation_date":1678438427,"post_id":75693954,"comment_id":133536005,"body_markdown":"Well, thats not the worst option, ty","body":"Well, thats not the worst option, ty"}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678438367,"creation_date":1678438367,"answer_id":75693954,"question_id":75693915,"body_markdown":"I don&#39;t see any other option than to split the chain, using an intermediate variable:\r\n```\r\n    var builder = webClient.post()\r\n                        .uri(requestUrl);\r\n    if (someParam) {\r\n        builder = builder.header(&quot;Authorization&quot;, String.format(&quot;Bearer %s&quot;, token));\r\n    }\r\n    String responseString = builder\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .accept(MediaType.APPLICATION_JSON)\r\n                        .body(Mono.just(request), request.getClass())\r\n                        .retrieve()\r\n                        .bodyToMono(String.class)\r\n                        .timeout(Duration.ofSeconds(maxAnalysingTime))\r\n                        .block();\r\n```","title":"Make funciton call in chain on condition","body":"<p>I don't see any other option than to split the chain, using an intermediate variable:</p>\n<pre><code>    var builder = webClient.post()\n                        .uri(requestUrl);\n    if (someParam) {\n        builder = builder.header(&quot;Authorization&quot;, String.format(&quot;Bearer %s&quot;, token));\n    }\n    String responseString = builder\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .accept(MediaType.APPLICATION_JSON)\n                        .body(Mono.just(request), request.getClass())\n                        .retrieve()\n                        .bodyToMono(String.class)\n                        .timeout(Duration.ofSeconds(maxAnalysingTime))\n                        .block();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1678438524,"creation_date":1678438524,"answer_id":75693984,"question_id":75693915,"body_markdown":"There&#39;s no way to avoid a branch, but you can keep the chaining by calling the `headers` method (which accepts a `Consumer&lt;HttpHeaders&gt;` as its parameter).\r\n\r\n```java\r\nwebClient.post().uri(requestUrl).headers(headers -&gt; {\r\n    if (someParam) headers.set(&quot;Authorization&quot;, String.format(&quot;Bearer %s&quot;, token));\r\n})\r\n// other configuration options...","title":"Make funciton call in chain on condition","body":"<p>There's no way to avoid a branch, but you can keep the chaining by calling the <code>headers</code> method (which accepts a <code>Consumer&lt;HttpHeaders&gt;</code> as its parameter).</p>\n<pre class=\"lang-java prettyprint-override\"><code>webClient.post().uri(requestUrl).headers(headers -&gt; {\n    if (someParam) headers.set(&quot;Authorization&quot;, String.format(&quot;Bearer %s&quot;, token));\n})\n// other configuration options...\n</code></pre>\n"}],"owner":{"account_id":27981669,"reputation":1,"user_id":21369321,"display_name":"Stuthemp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1678438689,"answer_count":2,"score":-1,"last_activity_date":1678449064,"creation_date":1678438113,"question_id":75693915,"body_markdown":"Let&#39;s say I&#39;m making request with webClient, and I need to make \r\n`.header(&quot;Authorization&quot;, String.format(&quot;Bearer %s&quot;, token))`\r\ncall here optional. I mean if `someParam` is `true`, I add authorization header, and if it&#39;s false I don&#39;t want authorization at all. Is it possible without adding if-else here.\r\n\r\n```java\r\n    void function(someParam bool) { \r\n       String responseString = webClient.post()\r\n                            .uri(requestUrl)\r\n                            .header(&quot;Authorization&quot;, String.format(&quot;Bearer %s&quot;, token))\r\n                            .contentType(MediaType.APPLICATION_JSON)\r\n                            .accept(MediaType.APPLICATION_JSON)\r\n                            .body(Mono.just(request), request.getClass())\r\n                            .retrieve()\r\n                            .bodyToMono(String.class)\r\n                            .timeout(Duration.ofSeconds(maxAnalysingTime))\r\n                            .block();\r\n    }\r\n```\r\n\r\nI&#39;m not sure how to google this question, because search engine gets triggered by words optional, and conditional, and all I get are articles about Optional class and if-else in java.","title":"Make funciton call in chain on condition","body":"<p>Let's say I'm making request with webClient, and I need to make\n<code>.header(&quot;Authorization&quot;, String.format(&quot;Bearer %s&quot;, token))</code>\ncall here optional. I mean if <code>someParam</code> is <code>true</code>, I add authorization header, and if it's false I don't want authorization at all. Is it possible without adding if-else here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    void function(someParam bool) { \n       String responseString = webClient.post()\n                            .uri(requestUrl)\n                            .header(&quot;Authorization&quot;, String.format(&quot;Bearer %s&quot;, token))\n                            .contentType(MediaType.APPLICATION_JSON)\n                            .accept(MediaType.APPLICATION_JSON)\n                            .body(Mono.just(request), request.getClass())\n                            .retrieve()\n                            .bodyToMono(String.class)\n                            .timeout(Duration.ofSeconds(maxAnalysingTime))\n                            .block();\n    }\n</code></pre>\n<p>I'm not sure how to google this question, because search engine gets triggered by words optional, and conditional, and all I get are articles about Optional class and if-else in java.</p>\n"},{"tags":["java","spring-boot","unit-testing","junit5"],"answers":[{"tags":[],"owner":{"account_id":1218250,"reputation":2051,"user_id":1185421,"accept_rate":60,"display_name":"Seppo420"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678359626,"creation_date":1678359626,"answer_id":75683680,"question_id":75683647,"body_markdown":"Argh, JFC, just after posting this I noticed that I have \r\n\r\n```\r\n    @Bean\r\n    @Primary\r\n    public GenericDataProcessor genericDataProcessor() {\r\n        return new GenericDataProcessor();\r\n    }\r\n```\r\n\r\nBut no\r\n\r\n```\r\n    @Bean\r\n    @Primary\r\n    public DerpProcessor derpProcessor() {\r\n        return new DerpProcessor();\r\n    }\r\n```\r\n\r\nThanks, rubberducks!","title":"Strange UnsatisfiedDependencyExceptions with spring boot tests","body":"<p>Argh, JFC, just after posting this I noticed that I have</p>\n<pre><code>    @Bean\n    @Primary\n    public GenericDataProcessor genericDataProcessor() {\n        return new GenericDataProcessor();\n    }\n</code></pre>\n<p>But no</p>\n<pre><code>    @Bean\n    @Primary\n    public DerpProcessor derpProcessor() {\n        return new DerpProcessor();\n    }\n</code></pre>\n<p>Thanks, rubberducks!</p>\n"}],"owner":{"account_id":1218250,"reputation":2051,"user_id":1185421,"accept_rate":60,"display_name":"Seppo420"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1678449037,"creation_date":1678359435,"question_id":75683647,"body_markdown":"So, I&#39;m trying to inject a dependency to my test class with `@Autowired`, but I am getting weird errors with certain dependencies. \r\n\r\nI&#39;ve tried to isolate the issue and this is the simplest example: \r\n\r\n```java\r\npackage mycompany.service;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class GenericDataProcessor {\r\n\r\n\r\n}\r\n```\r\n\r\n```java\r\npackage mycompany.service;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport mycompany.config.ServiceTestConfiguration;\r\nimport mycompany.query.CachedQueryService;\r\nimport mycompany.sink.ProcessedDataSink;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.mockito.junit.MockitoJUnitRunner;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.mock.mockito.MockBean;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport org.springframework.test.context.ContextConfiguration;\r\n\r\n@RunWith(MockitoJUnitRunner.class)\r\n@ActiveProfiles(&quot;test&quot;)\r\n@SpringBootTest(classes = {ServiceTestConfiguration.class})\r\n@ContextConfiguration(classes = {ObjectMapper.class})\r\nclass GenericDataProcessorTest {\r\n\r\n    @Autowired\r\n    GenericDataProcessor genericDataProcessor;\r\n\r\n    @Autowired\r\n    ObjectMapper objectMapper;\r\n\r\n    @MockBean\r\n    ProcessedDataSink processedDataSink;\r\n\r\n    @MockBean\r\n    CachedQueryService cachedQueryService;\r\n\r\n\r\n    @Test\r\n    void test() {\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThis works just fine. But now when I just copypaste this (all to the same packages) as `DerpProcessor` and `DerpProcessorTest` like this:\r\n\r\n```java\r\npackage mycompany.service;\r\n\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class DerpProcessor {\r\n\r\n}\r\n```\r\n\r\n\r\n```java\r\npackage mycompany.service;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport mycompany.config.ServiceTestConfiguration;\r\nimport mycompany.query.CachedQueryService;\r\nimport mycompany.sink.ProcessedDataSink;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.mockito.junit.MockitoJUnitRunner;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.mock.mockito.MockBean;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport org.springframework.test.context.ContextConfiguration;\r\n\r\n@RunWith(MockitoJUnitRunner.class)\r\n@ActiveProfiles(&quot;test&quot;)\r\n@SpringBootTest(classes = {ServiceTestConfiguration.class})\r\n@ContextConfiguration(classes = {ObjectMapper.class})\r\nclass DerpProcessorTest {\r\n\r\n    @Autowired\r\n    DerpProcessor derp;\r\n\r\n    @Autowired\r\n    ObjectMapper objectMapper;\r\n\r\n    @MockBean\r\n    ProcessedDataSink processedDataSink;\r\n\r\n    @MockBean\r\n    CachedQueryService cachedQueryService;\r\n\r\n\r\n    @Test\r\n    void test() {\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nI get the following error:\r\n\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;mycompany.service.DerpProcessorTest&#39;: Unsatisfied dependency expressed through field &#39;derp&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;fi.cinia.dataconsumerservice.service.DerpProcessor&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:417)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:119)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;mycompany.service.DerpProcessor&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\r\n\t... 76 more\r\n```\r\n\r\nI get the same error both when running it with IntelliJ &amp; mvn command line. I also checked the target folder and it&#39;s building the `DerpProcessor` `DerpProcessorTest` classes correctly. There are also no weird configurations that would either filter `DerpProcessor` out or only include `GenericDataProcessor`\r\n\r\nReally starting to run out of ideas &amp; considering a career as a hermit fisherman. ","title":"Strange UnsatisfiedDependencyExceptions with spring boot tests","body":"<p>So, I'm trying to inject a dependency to my test class with <code>@Autowired</code>, but I am getting weird errors with certain dependencies.</p>\n<p>I've tried to isolate the issue and this is the simplest example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package mycompany.service;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class GenericDataProcessor {\n\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package mycompany.service;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport mycompany.config.ServiceTestConfiguration;\nimport mycompany.query.CachedQueryService;\nimport mycompany.sink.ProcessedDataSink;\nimport org.junit.jupiter.api.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.ContextConfiguration;\n\n@RunWith(MockitoJUnitRunner.class)\n@ActiveProfiles(&quot;test&quot;)\n@SpringBootTest(classes = {ServiceTestConfiguration.class})\n@ContextConfiguration(classes = {ObjectMapper.class})\nclass GenericDataProcessorTest {\n\n    @Autowired\n    GenericDataProcessor genericDataProcessor;\n\n    @Autowired\n    ObjectMapper objectMapper;\n\n    @MockBean\n    ProcessedDataSink processedDataSink;\n\n    @MockBean\n    CachedQueryService cachedQueryService;\n\n\n    @Test\n    void test() {\n\n    }\n\n}\n\n</code></pre>\n<p>This works just fine. But now when I just copypaste this (all to the same packages) as <code>DerpProcessor</code> and <code>DerpProcessorTest</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package mycompany.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class DerpProcessor {\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package mycompany.service;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport mycompany.config.ServiceTestConfiguration;\nimport mycompany.query.CachedQueryService;\nimport mycompany.sink.ProcessedDataSink;\nimport org.junit.jupiter.api.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.ContextConfiguration;\n\n@RunWith(MockitoJUnitRunner.class)\n@ActiveProfiles(&quot;test&quot;)\n@SpringBootTest(classes = {ServiceTestConfiguration.class})\n@ContextConfiguration(classes = {ObjectMapper.class})\nclass DerpProcessorTest {\n\n    @Autowired\n    DerpProcessor derp;\n\n    @Autowired\n    ObjectMapper objectMapper;\n\n    @MockBean\n    ProcessedDataSink processedDataSink;\n\n    @MockBean\n    CachedQueryService cachedQueryService;\n\n\n    @Test\n    void test() {\n\n    }\n\n}\n\n</code></pre>\n<p>I get the following error:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mycompany.service.DerpProcessorTest': Unsatisfied dependency expressed through field 'derp'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'fi.cinia.dataconsumerservice.service.DerpProcessor' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:417)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:119)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'mycompany.service.DerpProcessor' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\n    ... 76 more\n</code></pre>\n<p>I get the same error both when running it with IntelliJ &amp; mvn command line. I also checked the target folder and it's building the <code>DerpProcessor</code> <code>DerpProcessorTest</code> classes correctly. There are also no weird configurations that would either filter <code>DerpProcessor</code> out or only include <code>GenericDataProcessor</code></p>\n<p>Really starting to run out of ideas &amp; considering a career as a hermit fisherman.</p>\n"},{"tags":["java","selenium","url","automation","pdf-parsing"],"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1576191822,"post_id":59313902,"comment_id":104829648,"body_markdown":"Update the question with the relevant HTML, code trials and complete error stack trace.","body":"Update the question with the relevant HTML, code trials and complete error stack trace."},{"owner":{"account_id":17297514,"reputation":1,"user_id":12527846,"display_name":"Shantanu"},"score":0,"creation_date":1576193448,"post_id":59313902,"comment_id":104830039,"body_markdown":"@DebanjanB Added sample code, screenshots and error stack. please let me know if it&#39;s useful","body":"@DebanjanB Added sample code, screenshots and error stack. please let me know if it&#39;s useful"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1576195983,"post_id":59313902,"comment_id":104830574,"body_markdown":"Have you tried removing the `blob:` prefix from the URL?","body":"Have you tried removing the <code>blob:</code> prefix from the URL?"},{"owner":{"account_id":17297514,"reputation":1,"user_id":12527846,"display_name":"Shantanu"},"score":0,"creation_date":1576258709,"post_id":59313902,"comment_id":104854050,"body_markdown":"@VGR - I tried it before. But, if I remove the prefix, it won&#39;t consider it a valid url for required document. i.e. I&#39;m not able to access document without prefix and it&#39;s throwing IOException saying End Of file.","body":"@VGR - I tried it before. But, if I remove the prefix, it won&#39;t consider it a valid url for required document. i.e. I&#39;m not able to access document without prefix and it&#39;s throwing IOException saying End Of file."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1576489897,"post_id":59313902,"comment_id":104903154,"body_markdown":"Then it means the file is empty there, or maybe this URL is just a key into some database? Can you access these URLs from the browser?","body":"Then it means the file is empty there, or maybe this URL is just a key into some database? Can you access these URLs from the browser?"},{"owner":{"account_id":17297514,"reputation":1,"user_id":12527846,"display_name":"Shantanu"},"score":0,"creation_date":1576506617,"post_id":59313902,"comment_id":104911544,"body_markdown":"@TilmanHausherr Yes. I can access URL in the browser as it is. but, If I remove prefix, then pdf isn&#39;t displaying in browser - making it invalid url.","body":"@TilmanHausherr Yes. I can access URL in the browser as it is. but, If I remove prefix, then pdf isn&#39;t displaying in browser - making it invalid url."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1576507372,"post_id":59313902,"comment_id":104911982,"body_markdown":"So I searched for this &quot;blob URL&quot; thing myself and found this: https://superuser.com/a/1109873/389820 and https://stackoverflow.com/a/30881444/535646 This is new to me too, my understanding after reading these answers is that this URL is generated by the browser (probably javascript?) and only exists there.","body":"So I searched for this &quot;blob URL&quot; thing myself and found this: <a href=\"https://superuser.com/a/1109873/389820\">superuser.com/a/1109873/389820</a> and <a href=\"https://stackoverflow.com/a/30881444/535646\">stackoverflow.com/a/30881444/535646</a> This is new to me too, my understanding after reading these answers is that this URL is generated by the browser (probably javascript?) and only exists there."},{"owner":{"account_id":17297514,"reputation":1,"user_id":12527846,"display_name":"Shantanu"},"score":0,"creation_date":1576607041,"post_id":59313902,"comment_id":104952128,"body_markdown":"@TilmanHausherr Thank you for your research. And yes. I agree that these URLs are generated by browser internally (mostly JS) and so those are specific to that browser instance. But don&#39;t know if we can automate those/extract text from those.","body":"@TilmanHausherr Thank you for your research. And yes. I agree that these URLs are generated by browser internally (mostly JS) and so those are specific to that browser instance. But don&#39;t know if we can automate those/extract text from those."}],"answers":[{"tags":[],"owner":{"account_id":3399928,"reputation":1809,"user_id":2852405,"display_name":"Gleidson Cardoso da Silva"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582841506,"creation_date":1582841506,"answer_id":60442487,"question_id":59313902,"body_markdown":"I got the same problem and found a solution injecting Javascript like in here:\r\n\r\n[How to download an image with Python 3/Selenium if the URL begins with “blob:”?][1]\r\n\r\nI wrote in Java and it worked very well, here is the code:   \r\n\r\n     private String getBytesBase64FromBlobURI(ChromeDriver driver, String uri) {\r\n    \tString script = &quot; &quot;\r\n    \t\t\t+ &quot;var uri = arguments[0];&quot;\r\n    \t\t\t+ &quot;var callback = arguments[1];&quot;\r\n    \t\t\t+ &quot;var toBase64 = function(buffer){for(var r,n=new Uint8Array(buffer),t=n.length,a=new Uint8Array(4*Math.ceil(t/3)),i=new Uint8Array(64),o=0,c=0;64&gt;c;++c)i[c]=&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&#39;.charCodeAt(c);for(c=0;t-t%3&gt;c;c+=3,o+=4)r=n[c]&lt;&lt;16|n[c+1]&lt;&lt;8|n[c+2],a[o]=i[r&gt;&gt;18],a[o+1]=i[r&gt;&gt;12&amp;63],a[o+2]=i[r&gt;&gt;6&amp;63],a[o+3]=i[63&amp;r];return t%3===1?(r=n[t-1],a[o]=i[r&gt;&gt;2],a[o+1]=i[r&lt;&lt;4&amp;63],a[o+2]=61,a[o+3]=61):t%3===2&amp;&amp;(r=(n[t-2]&lt;&lt;8)+n[t-1],a[o]=i[r&gt;&gt;10],a[o+1]=i[r&gt;&gt;4&amp;63],a[o+2]=i[r&lt;&lt;2&amp;63],a[o+3]=61),new TextDecoder(&#39;ascii&#39;).decode(a)};&quot;\r\n    \t\t\t+ &quot;var xhr = new XMLHttpRequest();&quot;\r\n    \t\t\t+ &quot;xhr.responseType = &#39;arraybuffer&#39;;&quot;\r\n    \t\t\t+ &quot;xhr.onload = function(){ callback(toBase64(xhr.response)) };&quot;\r\n    \t\t\t+ &quot;xhr.onerror = function(){ callback(xhr.status) };&quot;\r\n    \t\t\t+ &quot;xhr.open(&#39;GET&#39;,&#39;&quot;+ uri +&quot;&#39;);&quot;\r\n    \t\t\t+ &quot;xhr.send();&quot;;\r\n    \tString result = (String) driver.executeAsyncScript(script, uri);\r\n    \treturn result;\r\n    }\r\n\r\nI hope it help someone. \r\n\r\nCheers!\r\n\r\n  [1]: https://stackoverflow.com/questions/47424245/how-to-download-an-image-with-python-3-selenium-if-the-url-begins-with-blob\r\n","title":"java.net.URL class throwing MalformedException because of unknown protocol: blob","body":"<p>I got the same problem and found a solution injecting Javascript like in here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/47424245/how-to-download-an-image-with-python-3-selenium-if-the-url-begins-with-blob\">How to download an image with Python 3/Selenium if the URL begins with “blob:”?</a></p>\n\n<p>I wrote in Java and it worked very well, here is the code:   </p>\n\n<pre><code> private String getBytesBase64FromBlobURI(ChromeDriver driver, String uri) {\n    String script = \" \"\n            + \"var uri = arguments[0];\"\n            + \"var callback = arguments[1];\"\n            + \"var toBase64 = function(buffer){for(var r,n=new Uint8Array(buffer),t=n.length,a=new Uint8Array(4*Math.ceil(t/3)),i=new Uint8Array(64),o=0,c=0;64&gt;c;++c)i[c]='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.charCodeAt(c);for(c=0;t-t%3&gt;c;c+=3,o+=4)r=n[c]&lt;&lt;16|n[c+1]&lt;&lt;8|n[c+2],a[o]=i[r&gt;&gt;18],a[o+1]=i[r&gt;&gt;12&amp;63],a[o+2]=i[r&gt;&gt;6&amp;63],a[o+3]=i[63&amp;r];return t%3===1?(r=n[t-1],a[o]=i[r&gt;&gt;2],a[o+1]=i[r&lt;&lt;4&amp;63],a[o+2]=61,a[o+3]=61):t%3===2&amp;&amp;(r=(n[t-2]&lt;&lt;8)+n[t-1],a[o]=i[r&gt;&gt;10],a[o+1]=i[r&gt;&gt;4&amp;63],a[o+2]=i[r&lt;&lt;2&amp;63],a[o+3]=61),new TextDecoder('ascii').decode(a)};\"\n            + \"var xhr = new XMLHttpRequest();\"\n            + \"xhr.responseType = 'arraybuffer';\"\n            + \"xhr.onload = function(){ callback(toBase64(xhr.response)) };\"\n            + \"xhr.onerror = function(){ callback(xhr.status) };\"\n            + \"xhr.open('GET','\"+ uri +\"');\"\n            + \"xhr.send();\";\n    String result = (String) driver.executeAsyncScript(script, uri);\n    return result;\n}\n</code></pre>\n\n<p>I hope it help someone. </p>\n\n<p>Cheers!</p>\n"},{"tags":[],"owner":{"account_id":19482358,"reputation":11,"user_id":14252370,"display_name":"Bala kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678448987,"creation_date":1678448987,"answer_id":75695774,"question_id":59313902,"body_markdown":"If the image URL begins with &quot;data&quot;, it means that the image data is embedded in the HTML page itself, rather than being stored on a remote server that can be accessed via a URL. Therefore, you cannot download the image using a standard HTTP connection. So, the base64 mechanism helps us.\r\n\r\nImage Source URL : data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAWAUNoinFRBWASIUA........AAAAElFTkSuQmCC\r\n\r\nTo download the image, the below code can be used:\r\n\r\n    // Get the image source data\r\n    String imageData = webElement.getAttribute(&quot;src&quot;);\r\n    \r\n    // Extract the image data and file extension from the data URL\r\n    String[] parts = imageData.split(&quot;,&quot;);\r\n    String mimeType = parts[0].split(&quot;:&quot;)[1];\r\n    String base64Data = parts[1];\r\n    String fileExtension = &quot;&quot;;\r\n    \r\n    if (mimeType.equals(&quot;image/jpeg&quot;)) {\r\n        fileExtension = &quot;.jpg&quot;;\r\n    } else if (mimeType.equals(&quot;image/png&quot;)) {\r\n        fileExtension = &quot;.png&quot;;\r\n    } else if (mimeType.equals(&quot;image/gif&quot;)) {\r\n        fileExtension = &quot;.gif&quot;;\r\n    } else {\r\n        // Unsupported image format\r\n        throw new IOException(&quot;Unsupported image format&quot;);\r\n    }\r\n    \r\n    // Set the output file path and stream. Here, we save the image file.\r\n    String outputPath = &quot;C:/images/image&quot; + fileExtension;\r\n    FileOutputStream outputStream = new FileOutputStream(outputPath);\r\n    \r\n    // Close the output stream\r\n    outputStream.close();\r\n\r\nThis code first extracts the image data from the &quot;data&quot; URL and splits it into its MIME type and base64-encoded data components. It then determines the file extension based on the MIME type and saves the image to a file on disk, after decoding the base64-encoded image data. Note that you will need to handle any exceptions that may occur during the decoding and file I/O processes.\r\n\r\nTo use this code, you will need to import the following classes in addition to the ones I mentioned in my previous answer:\r\n\r\n    import java.io.File;\r\n    import java.util.Base64;\r\n\r\nThe java.util.Base64 class is used to decode the base64-encoded image data. The java.io.File class is used to represent the output file on disk.","title":"java.net.URL class throwing MalformedException because of unknown protocol: blob","body":"<p>If the image URL begins with &quot;data&quot;, it means that the image data is embedded in the HTML page itself, rather than being stored on a remote server that can be accessed via a URL. Therefore, you cannot download the image using a standard HTTP connection. So, the base64 mechanism helps us.</p>\n<p>Image Source URL : data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAWAUNoinFRBWASIUA........AAAAElFTkSuQmCC</p>\n<p>To download the image, the below code can be used:</p>\n<pre><code>// Get the image source data\nString imageData = webElement.getAttribute(&quot;src&quot;);\n\n// Extract the image data and file extension from the data URL\nString[] parts = imageData.split(&quot;,&quot;);\nString mimeType = parts[0].split(&quot;:&quot;)[1];\nString base64Data = parts[1];\nString fileExtension = &quot;&quot;;\n\nif (mimeType.equals(&quot;image/jpeg&quot;)) {\n    fileExtension = &quot;.jpg&quot;;\n} else if (mimeType.equals(&quot;image/png&quot;)) {\n    fileExtension = &quot;.png&quot;;\n} else if (mimeType.equals(&quot;image/gif&quot;)) {\n    fileExtension = &quot;.gif&quot;;\n} else {\n    // Unsupported image format\n    throw new IOException(&quot;Unsupported image format&quot;);\n}\n\n// Set the output file path and stream. Here, we save the image file.\nString outputPath = &quot;C:/images/image&quot; + fileExtension;\nFileOutputStream outputStream = new FileOutputStream(outputPath);\n\n// Close the output stream\noutputStream.close();\n</code></pre>\n<p>This code first extracts the image data from the &quot;data&quot; URL and splits it into its MIME type and base64-encoded data components. It then determines the file extension based on the MIME type and saves the image to a file on disk, after decoding the base64-encoded image data. Note that you will need to handle any exceptions that may occur during the decoding and file I/O processes.</p>\n<p>To use this code, you will need to import the following classes in addition to the ones I mentioned in my previous answer:</p>\n<pre><code>import java.io.File;\nimport java.util.Base64;\n</code></pre>\n<p>The java.util.Base64 class is used to decode the base64-encoded image data. The java.io.File class is used to represent the output file on disk.</p>\n"}],"owner":{"account_id":17297514,"reputation":1,"user_id":12527846,"display_name":"Shantanu"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2315,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1678448987,"creation_date":1576191651,"question_id":59313902,"body_markdown":"I&#39;m automating my test scenario for validation of a pdf document. This document opens in a new browser tab once clicked on the document link(anchor tag). I want to validate a few important contents in a document for which I&#39;m using Apache PDFBox. But, the document URL has a prefix &#39;blob&#39; because of which, java.net.URL class is throwing MalformedException for unknown protocol: blob. how should I define/add that protocol in java?\r\n\r\nPlease let me know how to get rid of this error so that I can successfully use PDFBox to parse my pdf file.\r\n\r\nJava version - 1.8\r\n\r\nThis is the screenshot of pdf document after it opens in a browser.\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThis is HTML source of document. But, as it&#39;s a pdf view, cannot perform any operations such as fetching text/windowTitle etc.\r\n[![enter image description here][1]][1]\r\n\r\n\r\nfollowing is a sample code snippet  - \r\n\r\n    public void readPdfContents() throws IOException {\r\n    \r\n    \tString url = &quot;blob:https://cpswebqa.testcbidata.com/f9ad63bc-700e-4f49-a4fb-807ad1a44b01&quot;;\r\n    \tURL pdfUrl = new URL(url);\r\n    \tInputStream ips = pdfUrl.openStream();\r\n    \tBufferedInputStream bis = new BufferedInputStream(ips);\r\n    \tPDFParser pdfParser = new PDFParser(bis);\r\n    \tpdfParser.parse();\r\n    \tString pdfData = new PDFTextStripper().getText(pdfParser.getPDDocument());\r\n    \r\n    \tSystem.out.println(&quot;PDF Data is - &quot; + pdfData);\r\n    \r\n    }\r\n\r\nError stack trace - \r\n\r\n    Exception in thread &quot;main&quot; java.net.MalformedURLException: unknown protocol: blob\r\n    \tat java.net.URL.&lt;init&gt;(URL.java:600)\r\n    \tat java.net.URL.&lt;init&gt;(URL.java:490)\r\n    \tat java.net.URL.&lt;init&gt;(URL.java:439)\r\n    \tat com.cbsh.automation.file.testrunner.WEB.Sample.main(Sample.java:11)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ygQh6.png","title":"java.net.URL class throwing MalformedException because of unknown protocol: blob","body":"<p>I'm automating my test scenario for validation of a pdf document. This document opens in a new browser tab once clicked on the document link(anchor tag). I want to validate a few important contents in a document for which I'm using Apache PDFBox. But, the document URL has a prefix 'blob' because of which, java.net.URL class is throwing MalformedException for unknown protocol: blob. how should I define/add that protocol in java?</p>\n\n<p>Please let me know how to get rid of this error so that I can successfully use PDFBox to parse my pdf file.</p>\n\n<p>Java version - 1.8</p>\n\n<p>This is the screenshot of pdf document after it opens in a browser.\n<a href=\"https://i.stack.imgur.com/ygQh6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ygQh6.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is HTML source of document. But, as it's a pdf view, cannot perform any operations such as fetching text/windowTitle etc.\n<a href=\"https://i.stack.imgur.com/ygQh6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ygQh6.png\" alt=\"enter image description here\"></a></p>\n\n<p>following is a sample code snippet  - </p>\n\n<pre><code>public void readPdfContents() throws IOException {\n\n    String url = \"blob:https://cpswebqa.testcbidata.com/f9ad63bc-700e-4f49-a4fb-807ad1a44b01\";\n    URL pdfUrl = new URL(url);\n    InputStream ips = pdfUrl.openStream();\n    BufferedInputStream bis = new BufferedInputStream(ips);\n    PDFParser pdfParser = new PDFParser(bis);\n    pdfParser.parse();\n    String pdfData = new PDFTextStripper().getText(pdfParser.getPDDocument());\n\n    System.out.println(\"PDF Data is - \" + pdfData);\n\n}\n</code></pre>\n\n<p>Error stack trace - </p>\n\n<pre><code>Exception in thread \"main\" java.net.MalformedURLException: unknown protocol: blob\n    at java.net.URL.&lt;init&gt;(URL.java:600)\n    at java.net.URL.&lt;init&gt;(URL.java:490)\n    at java.net.URL.&lt;init&gt;(URL.java:439)\n    at com.cbsh.automation.file.testrunner.WEB.Sample.main(Sample.java:11)\n</code></pre>\n"},{"tags":["java","spring","git","spring-boot","spring-cloud"],"comments":[{"owner":{"account_id":2837108,"reputation":27359,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1678437489,"post_id":75693720,"comment_id":133535731,"body_markdown":"@SwethaSharma, I do not think having the key there in the first place is a good idea from a security POV. I would go right now into whatever place you have it setup and discard it and create a new one.","body":"@SwethaSharma, I do not think having the key there in the first place is a good idea from a security POV. I would go right now into whatever place you have it setup and discard it and create a new one."},{"owner":{"account_id":2837108,"reputation":27359,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1678437579,"post_id":75693720,"comment_id":133535755,"body_markdown":"I do not think it&#39;s a git problem. You have a problem in the way you are trying to read the key.","body":"I do not think it&#39;s a git problem. You have a problem in the way you are trying to read the key."},{"owner":{"account_id":8411933,"reputation":2534,"user_id":6313539,"display_name":"Sweta Sharma"},"score":0,"creation_date":1678437730,"post_id":75693720,"comment_id":133535787,"body_markdown":"@eftshift0 Thank you for your reply. I&#39;m trying to follow ``` https://docs.spring.io/spring-cloud-config/docs/current/reference/html/#_git_ssh_configuration_using_properties ``` document. Here they have put the private key in the application.properties file.","body":"@eftshift0 Thank you for your reply. I&#39;m trying to follow ``` <a href=\"https://docs.spring.io/spring-cloud-config/docs/current/reference/html/#_git_ssh_configuration_using_properties\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-config/docs/current/reference/ht&zwnj;&#8203;ml/&hellip;</a> ``` document. Here they have put the private key in the application.properties file."},{"owner":{"account_id":2837108,"reputation":27359,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":2,"creation_date":1678437898,"post_id":75693720,"comment_id":133535838,"body_markdown":"when I say &quot;having the key _there_&quot; I mean _in the question that you posted_.","body":"when I say &quot;having the key <i>there</i>&quot; I mean <i>in the question that you posted</i>."},{"owner":{"account_id":8411933,"reputation":2534,"user_id":6313539,"display_name":"Sweta Sharma"},"score":0,"creation_date":1678438019,"post_id":75693720,"comment_id":133535868,"body_markdown":"Do you think \\n\\ or \\ is not placed correctly in the key?","body":"Do you think \\n\\ or \\ is not placed correctly in the key?"}],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678448979,"creation_date":1678448979,"answer_id":75695771,"question_id":75693720,"body_markdown":"&gt; Do you think \\n\\ or \\ is not placed correctly in the key?\r\n\r\nCheck if, as [in here][1], you can use\r\n\r\n```\r\nspring.cloud.config.server.git.private-key= \\\r\n-----BEGIN RSA PRIVATE KEY-----\\n\\\r\nyour_key_here_your_key_here_you\\n\\\r\nyour_key_here_your_key_here_you\\n\\\r\nyour_key_here_your_key_here_you\\n\\\r\nyour_key_here_your_key_here_you\\n\\\r\nyour_key_here_your_key_here_you\\n\\\r\n-----END RSA PRIVATE KEY-----\\n\r\n```\r\n\r\nI do not think you should include the\r\n```\r\nProc-Type: 4,ENCRYPTED\\n\\\r\nDEK-Info: AES-128-CBC,947ABEEB0FE4132D7074662CE7FF5068\\n\\\r\n\\n\\\r\nTHE_KEY\\n\\\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/63695528/6309","title":"Spring Cloud Config Server gives IllegalArgumentException: Illegal base64 character 2d Error","body":"<blockquote>\n<p>Do you think \\n\\ or \\ is not placed correctly in the key?</p>\n</blockquote>\n<p>Check if, as <a href=\"https://stackoverflow.com/a/63695528/6309\">in here</a>, you can use</p>\n<pre><code>spring.cloud.config.server.git.private-key= \\\n-----BEGIN RSA PRIVATE KEY-----\\n\\\nyour_key_here_your_key_here_you\\n\\\nyour_key_here_your_key_here_you\\n\\\nyour_key_here_your_key_here_you\\n\\\nyour_key_here_your_key_here_you\\n\\\nyour_key_here_your_key_here_you\\n\\\n-----END RSA PRIVATE KEY-----\\n\n</code></pre>\n<p>I do not think you should include the</p>\n<pre><code>Proc-Type: 4,ENCRYPTED\\n\\\nDEK-Info: AES-128-CBC,947ABEEB0FE4132D7074662CE7FF5068\\n\\\n\\n\\\nTHE_KEY\\n\\\n</code></pre>\n"}],"owner":{"account_id":8411933,"reputation":2534,"user_id":6313539,"display_name":"Sweta Sharma"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1678448979,"creation_date":1678436631,"question_id":75693720,"body_markdown":"I&#39;m trying to connect to the bitbucket repo using ssh in the application.properties file.\r\n```\r\nspring.cloud.config.server.git.uri=git@prod-cvs2.test.com:7999/properties.git\r\nspring.cloud.config.server.git.ignoreLocalSshSettings=true\r\nspring.cloud.config.server.git.hostKey=prod-cvs2.test.com\r\nspring.cloud.config.server.git.hostKeyAlgorithm=ssh-rsa\r\nspring.cloud.config.server.git.strictHostKeyChecking=false\r\nspring.cloud.config.server.git.passphrase=Secret123\r\n\r\nspring.cloud.config.server.git.privateKey=-----BEGIN RSA PRIVATE KEY-----\\n\\\r\nProc-Type: 4,ENCRYPTED\\n\\\r\nDEK-Info: AES-128-CBC,947ABEEB0FE4132D7074662CE7FF5068\\n\\\r\n\\n\\\r\nTHE_KEY\\n\\\r\n-----END RSA PRIVATE KEY-----\r\n\r\nspring.cloud.config.server.git.default-label=master\r\n\r\n```\r\n\r\nThe config server starts successfully. However, when I try to read the properties from postman it gives me below error.\r\n```\r\nCaused by: org.apache.sshd.common.SshException: DefaultConnectFuture[git@prod-cvs2.test.com/162.134.121.63:22]: Failed (IllegalArgumentException) to execute: Illegal base64 character 2d\r\n\tat org.apache.sshd.common.future.AbstractSshFuture.lambda$verifyResult$1(AbstractSshFuture.java:131) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.common.future.AbstractSshFuture.formatExceptionMessage(AbstractSshFuture.java:185) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:130) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.client.future.DefaultConnectFuture.verify(DefaultConnectFuture.java:42) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.client.future.DefaultConnectFuture.verify(DefaultConnectFuture.java:34) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:191) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\r\n\tat org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:142) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\r\n\tat org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:99) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\r\n\tat org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:235) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\r\n\t... 136 common frames omitted\r\nCaused by: java.lang.IllegalArgumentException: Illegal base64 character 2d\r\n\tat java.base/java.util.Base64$Decoder.decode0(Base64.java:743) ~[na:na]\r\n\tat java.base/java.util.Base64$Decoder.decode(Base64.java:535) ~[na:na]\r\n\tat java.base/java.util.Base64$Decoder.decode(Base64.java:558) ~[na:na]\r\n\tat org.apache.sshd.common.config.keys.PublicKeyEntryDataResolver.decodeEntryKeyData(PublicKeyEntryDataResolver.java:53) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.common.config.keys.PublicKeyEntry.parsePublicKeyEntry(PublicKeyEntry.java:408) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.common.config.keys.AuthorizedKeyEntry.parseAuthorizedKeyEntry(AuthorizedKeyEntry.java:318) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.common.config.keys.AuthorizedKeyEntry.parseAuthorizedKeyEntry(AuthorizedKeyEntry.java:273) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.springframework.cloud.config.server.ssh.PropertyBasedSshSessionFactory$2.getHostKey(PropertyBasedSshSessionFactory.java:151) ~[spring-cloud-config-server-3.1.5.jar:3.1.5]\r\n\tat org.springframework.cloud.config.server.ssh.PropertyBasedSshSessionFactory$2.lookup(PropertyBasedSshSessionFactory.java:122) ~[spring-cloud-config-server-3.1.5.jar:3.1.5]\r\n\tat org.eclipse.jgit.internal.transport.sshd.JGitServerKeyVerifier.lookup(JGitServerKeyVerifier.java:72) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\r\n\tat org.eclipse.jgit.internal.transport.sshd.JGitClientSession.resolveAvailableSignaturesProposal(JGitClientSession.java:275) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.resolveAvailableSignaturesProposal(AbstractSession.java:2356) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n```\r\n\r\nCan someone please guide me on what am I missing? Thanks!","title":"Spring Cloud Config Server gives IllegalArgumentException: Illegal base64 character 2d Error","body":"<p>I'm trying to connect to the bitbucket repo using ssh in the application.properties file.</p>\n<pre><code>spring.cloud.config.server.git.uri=git@prod-cvs2.test.com:7999/properties.git\nspring.cloud.config.server.git.ignoreLocalSshSettings=true\nspring.cloud.config.server.git.hostKey=prod-cvs2.test.com\nspring.cloud.config.server.git.hostKeyAlgorithm=ssh-rsa\nspring.cloud.config.server.git.strictHostKeyChecking=false\nspring.cloud.config.server.git.passphrase=Secret123\n\nspring.cloud.config.server.git.privateKey=-----BEGIN RSA PRIVATE KEY-----\\n\\\nProc-Type: 4,ENCRYPTED\\n\\\nDEK-Info: AES-128-CBC,947ABEEB0FE4132D7074662CE7FF5068\\n\\\n\\n\\\nTHE_KEY\\n\\\n-----END RSA PRIVATE KEY-----\n\nspring.cloud.config.server.git.default-label=master\n\n</code></pre>\n<p>The config server starts successfully. However, when I try to read the properties from postman it gives me below error.</p>\n<pre><code>Caused by: org.apache.sshd.common.SshException: DefaultConnectFuture[git@prod-cvs2.test.com/162.134.121.63:22]: Failed (IllegalArgumentException) to execute: Illegal base64 character 2d\n    at org.apache.sshd.common.future.AbstractSshFuture.lambda$verifyResult$1(AbstractSshFuture.java:131) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.common.future.AbstractSshFuture.formatExceptionMessage(AbstractSshFuture.java:185) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:130) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.client.future.DefaultConnectFuture.verify(DefaultConnectFuture.java:42) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.client.future.DefaultConnectFuture.verify(DefaultConnectFuture.java:34) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:191) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\n    at org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:142) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\n    at org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:99) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\n    at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:235) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\n    ... 136 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Illegal base64 character 2d\n    at java.base/java.util.Base64$Decoder.decode0(Base64.java:743) ~[na:na]\n    at java.base/java.util.Base64$Decoder.decode(Base64.java:535) ~[na:na]\n    at java.base/java.util.Base64$Decoder.decode(Base64.java:558) ~[na:na]\n    at org.apache.sshd.common.config.keys.PublicKeyEntryDataResolver.decodeEntryKeyData(PublicKeyEntryDataResolver.java:53) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.common.config.keys.PublicKeyEntry.parsePublicKeyEntry(PublicKeyEntry.java:408) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.common.config.keys.AuthorizedKeyEntry.parseAuthorizedKeyEntry(AuthorizedKeyEntry.java:318) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.common.config.keys.AuthorizedKeyEntry.parseAuthorizedKeyEntry(AuthorizedKeyEntry.java:273) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.springframework.cloud.config.server.ssh.PropertyBasedSshSessionFactory$2.getHostKey(PropertyBasedSshSessionFactory.java:151) ~[spring-cloud-config-server-3.1.5.jar:3.1.5]\n    at org.springframework.cloud.config.server.ssh.PropertyBasedSshSessionFactory$2.lookup(PropertyBasedSshSessionFactory.java:122) ~[spring-cloud-config-server-3.1.5.jar:3.1.5]\n    at org.eclipse.jgit.internal.transport.sshd.JGitServerKeyVerifier.lookup(JGitServerKeyVerifier.java:72) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\n    at org.eclipse.jgit.internal.transport.sshd.JGitClientSession.resolveAvailableSignaturesProposal(JGitClientSession.java:275) ~[org.eclipse.jgit.ssh.apache-5.13.1.202206130422-r.jar:5.13.1.202206130422-r]\n    at org.apache.sshd.common.session.helpers.AbstractSession.resolveAvailableSignaturesProposal(AbstractSession.java:2356) ~[sshd-osgi-2.7.0.jar:2.7.0]\n</code></pre>\n<p>Can someone please guide me on what am I missing? Thanks!</p>\n"},{"tags":["java","amazon-web-services","spring-boot","aws-msk","amazon-msk"],"comments":[{"owner":{"account_id":222922,"reputation":3153,"user_id":481816,"accept_rate":71,"display_name":"Dude0001"},"score":0,"creation_date":1668301461,"post_id":74407121,"comment_id":131372229,"body_markdown":"It looks like you are on the right track but missing permissions in AWS. What IAM role are you using to connect and what policies does it jave to give access to MSK?","body":"It looks like you are on the right track but missing permissions in AWS. What IAM role are you using to connect and what policies does it jave to give access to MSK?"},{"owner":{"account_id":25080737,"reputation":63,"user_id":18933536,"display_name":"giiyiraj"},"score":0,"creation_date":1668387426,"post_id":74407121,"comment_id":131385972,"body_markdown":"@Dude0001 I have updated the post with the policy im using for aws msk","body":"@Dude0001 I have updated the post with the policy im using for aws msk"},{"owner":{"account_id":222922,"reputation":3153,"user_id":481816,"accept_rate":71,"display_name":"Dude0001"},"score":0,"creation_date":1669661526,"post_id":74407121,"comment_id":131688542,"body_markdown":"Did you get it working or have any other information?","body":"Did you get it working or have any other information?"},{"owner":{"account_id":25080737,"reputation":63,"user_id":18933536,"display_name":"giiyiraj"},"score":0,"creation_date":1670497125,"post_id":74407121,"comment_id":131890998,"body_markdown":"I tried the things mentioned in your answer but I&#39;m still getting the same error digging more information on the same on internet","body":"I tried the things mentioned in your answer but I&#39;m still getting the same error digging more information on the same on internet"},{"owner":{"account_id":222922,"reputation":3153,"user_id":481816,"accept_rate":71,"display_name":"Dude0001"},"score":0,"creation_date":1670513535,"post_id":74407121,"comment_id":131896755,"body_markdown":"Can you update the example with the latest changes you made? Are you using use aws-msk-iam-auth &gt;= 1.1.0? Can you show where you assign the role to the EKS pod and the attached policy? I added another step in my answer to find the error in CloudTrail which might have more troubleshooting information.","body":"Can you update the example with the latest changes you made? Are you using use aws-msk-iam-auth &gt;= 1.1.0? Can you show where you assign the role to the EKS pod and the attached policy? I added another step in my answer to find the error in CloudTrail which might have more troubleshooting information."}],"answers":[{"comments":[{"owner":{"account_id":25080737,"reputation":63,"user_id":18933536,"display_name":"giiyiraj"},"score":0,"creation_date":1668936166,"post_id":74454664,"comment_id":131523265,"body_markdown":"It was a typo for the policies i tested the policies with IAM policy simulator it did has access to the MSK cluster to the role im using with EKS. I will try to update to the latest version of the aws-msk-iam-auth-library and give it a try thanks!","body":"It was a typo for the policies i tested the policies with IAM policy simulator it did has access to the MSK cluster to the role im using with EKS. I will try to update to the latest version of the aws-msk-iam-auth-library and give it a try thanks!"}],"tags":[],"owner":{"account_id":222922,"reputation":3153,"user_id":481816,"accept_rate":71,"display_name":"Dude0001"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670513823,"creation_date":1668567978,"answer_id":74454664,"question_id":74407121,"body_markdown":"I would love to help more, but this policy is a little hard to validate.\r\n\r\nSome of the actions don&#39;t have the right resources on them you list EKS ARN for many `kafka:*` and `kafka-cluster:*` that should use MSK ARNs, etc.\r\n\r\nThere are syntax issues like\r\n\r\n`&quot;Action&quot;: &quot;kakfa-cluster&quot;:DescribeGroup,`\r\n\r\nIf these are just typos, it should be sufficient to redact your account number in the policy but leave the rest in place of you can so we can see as much of the real policy. It is just not r3al useful as is.\r\n\r\n1. Have you tried to run IAM policy simulator on this policy, and use it to simulate the `kafka-cluster:Connect` action on the ARN for your cluster? It should tell you if your policy gives you access or not.\r\n\r\n2. Have you tried to start with a policy that gives blanket access? If you can get in with a very loose policy, tighten it up from there until it breaks again to pinpoint the problem. e.g. a policy with a single statement that gives you all permissions to MSK for any resource. I would again test this with the policy simulator for any validation issues and that it really does give you access. If it works there, but not EKS then you might not be using a role that has access to this policy as you think.\r\n\r\n```\r\n        {\r\n            &quot;Sid&quot;: &quot;MSKAllowAllNotProductionReady&quot;,\r\n            &quot;Effect&quot;: &quot;Allow&quot;,\r\n            &quot;Action&quot;: [\r\n                    &quot;kafka:*&quot;,\r\n                    &quot;kafka-cluster:*&quot;,\r\n            ],\r\n            &quot;Resource&quot;: &quot;*&quot;\r\n        }\r\n```\r\n\r\n 3. I noticed you are using 1.0.0 of the aws-msk-iam-auth library. There was an issue in early releases where the library was missing the aws-java-sdk-sts dependency. This was fixed in 1.1.0. There are many other performance, bug, and security fixes in the latest version. I would suggest you try again in the latest. My comments above still apply and would cause a similar error. The policy you shared as is looks off to me.\r\n\r\nSee https://github.com/aws/aws-msk-iam-auth/pull/18/files and https://github.com/aws/aws-msk-iam-auth/compare/1.0.0...1.1.0 looking for the commit message &quot;Add sts module to the implementation dependencies.&quot; where you can see com.amazonaws:aws-java-sdk-sts added as a dependency to the Gradle bundle.\r\n\r\n 4. Search in AWS CloudTrail for the AWS API event that is failing. It should have more information about what is failing exactly. I believe you can find it by the request id (UUID) in your error message, but you might have to look by service and action around the time you are seeing the error in your logs.\r\n\r\n 5. Use the `awsDebugCreds` option to debug which credentials are being used to authenticate to IAM. https://github.com/aws/aws-msk-iam-auth#finding-out-which-identity-is-being-used\r\n\r\n`sasl.jaas.config=software.amazon.msk.auth.iam.IAMLoginModule required awsDebugCreds=true;` \r\n\r\nHope this helps. If not and you can provide a cleaned-up version of the policy, screenshots of the Policy Simulator showing it gives access, or other information I can take another look. You got this!","title":"AWS MSK IAM - Authentication Failure Access Denied Spring Boot","body":"<p>I would love to help more, but this policy is a little hard to validate.</p>\n<p>Some of the actions don't have the right resources on them you list EKS ARN for many <code>kafka:*</code> and <code>kafka-cluster:*</code> that should use MSK ARNs, etc.</p>\n<p>There are syntax issues like</p>\n<p><code>&quot;Action&quot;: &quot;kakfa-cluster&quot;:DescribeGroup,</code></p>\n<p>If these are just typos, it should be sufficient to redact your account number in the policy but leave the rest in place of you can so we can see as much of the real policy. It is just not r3al useful as is.</p>\n<ol>\n<li><p>Have you tried to run IAM policy simulator on this policy, and use it to simulate the <code>kafka-cluster:Connect</code> action on the ARN for your cluster? It should tell you if your policy gives you access or not.</p>\n</li>\n<li><p>Have you tried to start with a policy that gives blanket access? If you can get in with a very loose policy, tighten it up from there until it breaks again to pinpoint the problem. e.g. a policy with a single statement that gives you all permissions to MSK for any resource. I would again test this with the policy simulator for any validation issues and that it really does give you access. If it works there, but not EKS then you might not be using a role that has access to this policy as you think.</p>\n</li>\n</ol>\n<pre><code>        {\n            &quot;Sid&quot;: &quot;MSKAllowAllNotProductionReady&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                    &quot;kafka:*&quot;,\n                    &quot;kafka-cluster:*&quot;,\n            ],\n            &quot;Resource&quot;: &quot;*&quot;\n        }\n</code></pre>\n<ol start=\"3\">\n<li>I noticed you are using 1.0.0 of the aws-msk-iam-auth library. There was an issue in early releases where the library was missing the aws-java-sdk-sts dependency. This was fixed in 1.1.0. There are many other performance, bug, and security fixes in the latest version. I would suggest you try again in the latest. My comments above still apply and would cause a similar error. The policy you shared as is looks off to me.</li>\n</ol>\n<p>See <a href=\"https://github.com/aws/aws-msk-iam-auth/pull/18/files\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-msk-iam-auth/pull/18/files</a> and <a href=\"https://github.com/aws/aws-msk-iam-auth/compare/1.0.0...1.1.0\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-msk-iam-auth/compare/1.0.0...1.1.0</a> looking for the commit message &quot;Add sts module to the implementation dependencies.&quot; where you can see com.amazonaws:aws-java-sdk-sts added as a dependency to the Gradle bundle.</p>\n<ol start=\"4\">\n<li><p>Search in AWS CloudTrail for the AWS API event that is failing. It should have more information about what is failing exactly. I believe you can find it by the request id (UUID) in your error message, but you might have to look by service and action around the time you are seeing the error in your logs.</p>\n</li>\n<li><p>Use the <code>awsDebugCreds</code> option to debug which credentials are being used to authenticate to IAM. <a href=\"https://github.com/aws/aws-msk-iam-auth#finding-out-which-identity-is-being-used\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-msk-iam-auth#finding-out-which-identity-is-being-used</a></p>\n</li>\n</ol>\n<p><code>sasl.jaas.config=software.amazon.msk.auth.iam.IAMLoginModule required awsDebugCreds=true;</code></p>\n<p>Hope this helps. If not and you can provide a cleaned-up version of the policy, screenshots of the Policy Simulator showing it gives access, or other information I can take another look. You got this!</p>\n"},{"tags":[],"owner":{"account_id":13122277,"reputation":67,"user_id":9479331,"display_name":"moez skanjii"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678448707,"creation_date":1678448209,"answer_id":75695659,"question_id":74407121,"body_markdown":"the msk cluster should create a role that allows to read/write to the cluster `kafka-cluster:*`.\r\nthe created role should be assumed in your kafka connector this way: \r\n\r\n    {\r\n      &quot;Effect&quot;: &quot;Allow&quot;,\r\n      &quot;Action&quot;: &quot;iam:PassRole&quot;,\r\n      &quot;Resource&quot;: &quot;*&quot;\r\n    }\r\nand then, add to this policy the operation that you want to do with the kafka cluster: \r\n\r\n    {\r\n      &quot;Effect&quot;: &quot;Allow&quot;,\r\n      &quot;Action&quot;: &quot;kafka-cluster:*&quot;,\r\n      &quot;Resource&quot;: &quot;*&quot;\r\n    }\r\n\r\nhope that help you\r\n\r\n","title":"AWS MSK IAM - Authentication Failure Access Denied Spring Boot","body":"<p>the msk cluster should create a role that allows to read/write to the cluster <code>kafka-cluster:*</code>.\nthe created role should be assumed in your kafka connector this way:</p>\n<pre><code>{\n  &quot;Effect&quot;: &quot;Allow&quot;,\n  &quot;Action&quot;: &quot;iam:PassRole&quot;,\n  &quot;Resource&quot;: &quot;*&quot;\n}\n</code></pre>\n<p>and then, add to this policy the operation that you want to do with the kafka cluster:</p>\n<pre><code>{\n  &quot;Effect&quot;: &quot;Allow&quot;,\n  &quot;Action&quot;: &quot;kafka-cluster:*&quot;,\n  &quot;Resource&quot;: &quot;*&quot;\n}\n</code></pre>\n<p>hope that help you</p>\n"}],"owner":{"account_id":25080737,"reputation":63,"user_id":18933536,"display_name":"giiyiraj"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5283,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1678448707,"creation_date":1668193714,"question_id":74407121,"body_markdown":"I have a spring boot app deployed on AWS EKS POD and have provisioned AWS MSK with IAM authentication they both are under the same VPC and roles has been configured as well as in MSK inbound rules the port 9098 has also being added.\r\n\r\nTo test connectivity between EKS and MSK i did telnet with broker name and port 9098 it was successfully connected as well when my run spring boot app in eks pod it gives the below error:\r\n\r\n    \r\n    org.springframework.kafka.KafkaException: Send failed;nested exception in org.apache.kafka.common.errors. SaslAuthenticationException: [63a192cc-599-43e-bfe8-bc880e50c2e1]: Access Denied\r\n    \r\n    \r\n    org.apache. kafka.clients.Networkclient: [Producer clientId=producer-1] Connection to node -3 b-3.xxxx.xxxx.amazonaws.com/10.7.2.1:9098) failed authentication due to: [63a192cc-599-43e-bfe8-bc880e50\r\nCreated a role in IAM attached it to EKS pod and assigned the below policies:\r\n\r\n    {\r\n    \t&quot;version&quot;: &quot;2012-10-17&quot;,\r\n    \t&quot;Statement&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessCluster&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: [\r\n    \t\t\t\t&quot;kafka:ListScramSecrets&quot;,\r\n    \t\t\t\t&quot;kafka:GetBootstrapBrokers&quot;,\r\n    \t\t\t\t&quot;kafka:DescribeCluster&quot;,\r\n    \t\t\t\t&quot;kafka-cluster:DescribeCluster&quot;,\r\n    \t\t\t\t&quot;kafka-cluster:Connect&quot;,\r\n    \t\t\t\t&quot;kafka-cluster:AlterCluster&quot;,\r\n    \t\t\t],\r\n    \t\t\t&quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN&quot;\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessTopic&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: [\r\n    \t\t\t\t&quot;kakfa-cluster:DescribeTopicDynamicConfiguration&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:DescribeTopic&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:DeleteTopic&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:CreateTopic&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:AlterTopicDynamicConfiguration&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:AlterTopic&quot;,\r\n    \t\t\t],\r\n    \t\t\t&quot;Resource&quot;: [\r\n    \t\t\t\t&quot;arn:AWS_EKS_CLUSTER_ARN/*&quot;,\r\n    \t\t\t\t&quot;*&quot;\r\n    \t\t\t]\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessGroup&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: [\r\n    \t\t\t\t\t&quot;kafka-cluster:DescribeCluster&quot;,\r\n    \t\t\t\t\t&quot;kafka-cluster:DeleteGroup&quot;,\r\n    \t\t\t\t\t&quot;kafka-cluster:AlterGroup&quot;,\r\n    \t\t\t],\r\n    \t\t\t&quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN/*&quot;\r\n    \t\t}\r\n    \t]\r\n    }\r\n    {\r\n    \t&quot;version&quot;: &quot;2012-10-17&quot;,\r\n    \t&quot;Statement&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessCluster&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: [\r\n    \t\t\t\t&quot;kafka:ListScramSecrets&quot;,\r\n    \t\t\t\t&quot;kafka:GetBootstrapBrokers&quot;,\r\n    \t\t\t\t&quot;kafka:DescribeCluster&quot;,\r\n    \t\t\t\t&quot;kafka-cluster:WriteDataIdempotently&quot;,\r\n    \t\t\t\t&quot;kafka-cluster:Connect&quot;,\r\n    \t\t\t],\r\n    \t\t\t&quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN&quot;\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessTopic&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: [\r\n    \t\t\t\t&quot;kakfa-cluster:WriteData&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:DescribeTransactionalId&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:DescribeTopic&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:AlterTransactionalId&quot;,\r\n    \t\t\t],\r\n    \t\t\t&quot;Resource&quot;:&quot;*&quot;\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessGroup&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: &quot;kakfa-cluster&quot;:DescribeGroup,\r\n    \t\t\t&quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN/*&quot;\r\n    \t\t}\r\n    \t]\r\n    }\r\n    {\r\n    \t&quot;version&quot;: &quot;2012-10-17&quot;,\r\n    \t&quot;Statement&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessCluster&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: [\r\n    \t\t\t\t&quot;kafka:ListScramSecrets&quot;,\r\n    \t\t\t\t&quot;kafka:GetBootstrapBrokers&quot;,\r\n    \t\t\t\t&quot;kafka:DescribeCluster&quot;,\r\n    \t\t\t\t&quot;kafka-cluster:Connect&quot;,\r\n    \t\t\t],\r\n    \t\t\t&quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN&quot;\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessTopic&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: [\r\n    \t\t\t\t&quot;kakfa-cluster:ReadData&quot;,\r\n    \t\t\t\t&quot;kakfa-cluster:DescribeTopic&quot;,\r\n    \t\t\t],\r\n    \t\t\t&quot;Resource&quot;: &quot;*&quot;\r\n    \t\t\t\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;Sid&quot;: &quot;AllowMskAccessGroup&quot;,\r\n    \t\t\t&quot;Effect&quot;: &quot;Allow&quot;,\r\n    \t\t\t&quot;Action&quot;: [\r\n    \t\t\t\t\t&quot;kafka-cluster:DescribeGroup&quot;,\r\n    \t\t\t\t\t&quot;kafka-cluster:AlterGroup&quot;,\r\n    \t\t\t],\r\n    \t\t\t&quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN/*&quot;\r\n    \t\t}\r\n    \t]\r\n    }\r\n\r\nMy spring boot kafka config:\r\n\r\n    ssl.truststore.location=path to trust file\r\n    security.protocol=SASL_SSL\r\n    sasl.mechanism=AWS_MSK_IAM\r\n    sasl.jaas.config=software.amazon.msk.auth.iam.IAMLoginModule required;\r\n    sasl.client.callback.handler.class=software.amazon.msk.auth.iam.IAMClientCallbackHandler\r\n\r\nim using this dependencies in my spring app:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n        &lt;artifactId&gt;sts&lt;/artifactId&gt;\r\n        &lt;version&gt;2.16.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n        &lt;artifactId&gt;apache-client&lt;/artifactId&gt;\r\n        &lt;version&gt;2.16.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n        &lt;artifactId&gt;kafka_2.13&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;software.amazon.msk&lt;/groupId&gt;\r\n        &lt;artifactId&gt;aws-msk-iam-auth&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"AWS MSK IAM - Authentication Failure Access Denied Spring Boot","body":"<p>I have a spring boot app deployed on AWS EKS POD and have provisioned AWS MSK with IAM authentication they both are under the same VPC and roles has been configured as well as in MSK inbound rules the port 9098 has also being added.</p>\n<p>To test connectivity between EKS and MSK i did telnet with broker name and port 9098 it was successfully connected as well when my run spring boot app in eks pod it gives the below error:</p>\n<pre><code>org.springframework.kafka.KafkaException: Send failed;nested exception in org.apache.kafka.common.errors. SaslAuthenticationException: [63a192cc-599-43e-bfe8-bc880e50c2e1]: Access Denied\n\n\norg.apache. kafka.clients.Networkclient: [Producer clientId=producer-1] Connection to node -3 b-3.xxxx.xxxx.amazonaws.com/10.7.2.1:9098) failed authentication due to: [63a192cc-599-43e-bfe8-bc880e50\n</code></pre>\n<p>Created a role in IAM attached it to EKS pod and assigned the below policies:</p>\n<pre><code>{\n    &quot;version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessCluster&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;kafka:ListScramSecrets&quot;,\n                &quot;kafka:GetBootstrapBrokers&quot;,\n                &quot;kafka:DescribeCluster&quot;,\n                &quot;kafka-cluster:DescribeCluster&quot;,\n                &quot;kafka-cluster:Connect&quot;,\n                &quot;kafka-cluster:AlterCluster&quot;,\n            ],\n            &quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN&quot;\n        },\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessTopic&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;kakfa-cluster:DescribeTopicDynamicConfiguration&quot;,\n                &quot;kakfa-cluster:DescribeTopic&quot;,\n                &quot;kakfa-cluster:DeleteTopic&quot;,\n                &quot;kakfa-cluster:CreateTopic&quot;,\n                &quot;kakfa-cluster:AlterTopicDynamicConfiguration&quot;,\n                &quot;kakfa-cluster:AlterTopic&quot;,\n            ],\n            &quot;Resource&quot;: [\n                &quot;arn:AWS_EKS_CLUSTER_ARN/*&quot;,\n                &quot;*&quot;\n            ]\n        },\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessGroup&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                    &quot;kafka-cluster:DescribeCluster&quot;,\n                    &quot;kafka-cluster:DeleteGroup&quot;,\n                    &quot;kafka-cluster:AlterGroup&quot;,\n            ],\n            &quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN/*&quot;\n        }\n    ]\n}\n{\n    &quot;version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessCluster&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;kafka:ListScramSecrets&quot;,\n                &quot;kafka:GetBootstrapBrokers&quot;,\n                &quot;kafka:DescribeCluster&quot;,\n                &quot;kafka-cluster:WriteDataIdempotently&quot;,\n                &quot;kafka-cluster:Connect&quot;,\n            ],\n            &quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN&quot;\n        },\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessTopic&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;kakfa-cluster:WriteData&quot;,\n                &quot;kakfa-cluster:DescribeTransactionalId&quot;,\n                &quot;kakfa-cluster:DescribeTopic&quot;,\n                &quot;kakfa-cluster:AlterTransactionalId&quot;,\n            ],\n            &quot;Resource&quot;:&quot;*&quot;\n        },\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessGroup&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: &quot;kakfa-cluster&quot;:DescribeGroup,\n            &quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN/*&quot;\n        }\n    ]\n}\n{\n    &quot;version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessCluster&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;kafka:ListScramSecrets&quot;,\n                &quot;kafka:GetBootstrapBrokers&quot;,\n                &quot;kafka:DescribeCluster&quot;,\n                &quot;kafka-cluster:Connect&quot;,\n            ],\n            &quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN&quot;\n        },\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessTopic&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;kakfa-cluster:ReadData&quot;,\n                &quot;kakfa-cluster:DescribeTopic&quot;,\n            ],\n            &quot;Resource&quot;: &quot;*&quot;\n            \n        },\n        {\n            &quot;Sid&quot;: &quot;AllowMskAccessGroup&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                    &quot;kafka-cluster:DescribeGroup&quot;,\n                    &quot;kafka-cluster:AlterGroup&quot;,\n            ],\n            &quot;Resource&quot;: &quot;AWS_EKS_CLUSTER_ARN/*&quot;\n        }\n    ]\n}\n</code></pre>\n<p>My spring boot kafka config:</p>\n<pre><code>ssl.truststore.location=path to trust file\nsecurity.protocol=SASL_SSL\nsasl.mechanism=AWS_MSK_IAM\nsasl.jaas.config=software.amazon.msk.auth.iam.IAMLoginModule required;\nsasl.client.callback.handler.class=software.amazon.msk.auth.iam.IAMClientCallbackHandler\n</code></pre>\n<p>im using this dependencies in my spring app:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n    &lt;artifactId&gt;sts&lt;/artifactId&gt;\n    &lt;version&gt;2.16.13&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n    &lt;artifactId&gt;apache-client&lt;/artifactId&gt;\n    &lt;version&gt;2.16.13&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka_2.13&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;software.amazon.msk&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-msk-iam-auth&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","azure","hadoop","azure-data-lake-gen2"],"answers":[{"tags":[],"owner":{"account_id":2611206,"reputation":12820,"user_id":2261274,"display_name":"stevel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678448703,"creation_date":1678448703,"answer_id":75695732,"question_id":75519886,"body_markdown":"It just uses the java sysprops mechanism, as covered in [the oracle docs](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/doc-files/net-properties.html)\r\n\r\nThere are some cloudera docs [which cover how to pass these through distcp and similar apps](https://docs.cloudera.com/cdp-private-cloud-base/7.1.6/cloud-data-access/topics/cr-cda-distcp-and-proxy-settings.html)...it is a bit trickier than for hadoop properties and if wrong you get a job which launches fine but then fails in its workers. \r\n","title":"How to go via proxy while connecting to ADLS Gen2 through Hadoop/Java?","body":"<p>It just uses the java sysprops mechanism, as covered in <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/doc-files/net-properties.html\" rel=\"nofollow noreferrer\">the oracle docs</a></p>\n<p>There are some cloudera docs <a href=\"https://docs.cloudera.com/cdp-private-cloud-base/7.1.6/cloud-data-access/topics/cr-cda-distcp-and-proxy-settings.html\" rel=\"nofollow noreferrer\">which cover how to pass these through distcp and similar apps</a>...it is a bit trickier than for hadoop properties and if wrong you get a job which launches fine but then fails in its workers.</p>\n"}],"owner":{"account_id":27841014,"reputation":1,"user_id":21257504,"display_name":"snahar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678448703,"creation_date":1676978970,"question_id":75519886,"body_markdown":"Below is a working program that connects to ADLS Gen2 through Hadoop and Java. Does anybody know how to set proxy details (host, port, username, password etc.) in **conf**?\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.net.URI;\r\nimport java.net.URISyntaxException;\r\n\r\nimport org.apache.hadoop.conf.Configuration;\r\nimport org.apache.hadoop.fs.FSDataInputStream;\r\nimport org.apache.hadoop.fs.FileSystem;\r\nimport org.apache.hadoop.fs.Path;\r\n\r\npublic class App {\r\n   public static void main(String[] args) throws IOException, URISyntaxException {\r\n      // Set the configuration for the Hadoop client\r\n      Configuration conf = new Configuration();\r\n\t  conf.set(&quot;fs.azure.account.auth.type&quot;, &quot;OAuth&quot;);\r\n\t  conf.set(&quot;fs.azure.account.oauth.provider.type&quot;, &quot;org.apache.hadoop.fs.azurebfs.oauth2.ClientCredsTokenProvider&quot;);\r\n\t  conf.set(&quot;fs.azure.account.oauth2.client.endpoint&quot;, &quot;&lt;endpoint&gt;&quot;);\r\n\t  conf.set(&quot;fs.azure.account.oauth2.client.id&quot;, &quot;&lt;client_id&gt;&quot;);\r\n\t  conf.set(&quot;fs.azure.account.oauth2.client.secret&quot;, &quot;&lt;client_secret&gt;&quot;);\r\n\r\n      // Connect to ADLS Gen2 using the Hadoop client\r\n      FileSystem fs = FileSystem.get(new URI(&quot;&lt;abfs_uri&gt;&quot;), conf);\r\n      Path filePath = new Path(&quot;/data.avro&quot;);\r\n      FSDataInputStream inStream = fs.open(filePath);\r\n\r\n      // Read data from the file in ADLS Gen2\r\n      byte[] buffer = new byte[1024];\r\n      int bytesRead = inStream.read(buffer);\r\n      while (bytesRead &gt; 0) {\r\n         System.out.write(buffer, 0, bytesRead);\r\n         bytesRead = inStream.read(buffer);\r\n      }\r\n\r\n      // Close the input stream and the file system\r\n      inStream.close();\r\n      fs.close();\r\n   }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\nI&#39;ve tried setting the properties like below but they don&#39;t seem to get honoured:\r\n`conf.set(&quot;fs.azure.proxy.host&quot;, &quot;&lt;httpsProxyHost&gt;&quot;);`\r\n","title":"How to go via proxy while connecting to ADLS Gen2 through Hadoop/Java?","body":"<p>Below is a working program that connects to ADLS Gen2 through Hadoop and Java. Does anybody know how to set proxy details (host, port, username, password etc.) in <strong>conf</strong>?</p>\n<pre><code>import java.io.IOException;\nimport java.net.URI;\nimport java.net.URISyntaxException;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FSDataInputStream;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\n\npublic class App {\n   public static void main(String[] args) throws IOException, URISyntaxException {\n      // Set the configuration for the Hadoop client\n      Configuration conf = new Configuration();\n      conf.set(&quot;fs.azure.account.auth.type&quot;, &quot;OAuth&quot;);\n      conf.set(&quot;fs.azure.account.oauth.provider.type&quot;, &quot;org.apache.hadoop.fs.azurebfs.oauth2.ClientCredsTokenProvider&quot;);\n      conf.set(&quot;fs.azure.account.oauth2.client.endpoint&quot;, &quot;&lt;endpoint&gt;&quot;);\n      conf.set(&quot;fs.azure.account.oauth2.client.id&quot;, &quot;&lt;client_id&gt;&quot;);\n      conf.set(&quot;fs.azure.account.oauth2.client.secret&quot;, &quot;&lt;client_secret&gt;&quot;);\n\n      // Connect to ADLS Gen2 using the Hadoop client\n      FileSystem fs = FileSystem.get(new URI(&quot;&lt;abfs_uri&gt;&quot;), conf);\n      Path filePath = new Path(&quot;/data.avro&quot;);\n      FSDataInputStream inStream = fs.open(filePath);\n\n      // Read data from the file in ADLS Gen2\n      byte[] buffer = new byte[1024];\n      int bytesRead = inStream.read(buffer);\n      while (bytesRead &gt; 0) {\n         System.out.write(buffer, 0, bytesRead);\n         bytesRead = inStream.read(buffer);\n      }\n\n      // Close the input stream and the file system\n      inStream.close();\n      fs.close();\n   }\n}\n\n\n</code></pre>\n<p>I've tried setting the properties like below but they don't seem to get honoured:\n<code>conf.set(&quot;fs.azure.proxy.host&quot;, &quot;&lt;httpsProxyHost&gt;&quot;);</code></p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":3573284,"reputation":3329,"user_id":2983132,"accept_rate":67,"display_name":"Slate"},"score":2,"creation_date":1385746398,"post_id":20290847,"comment_id":30273455,"body_markdown":"Oracle gives pretty neat examples with the Scanner API: http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html","body":"Oracle gives pretty neat examples with the Scanner API: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/Scanner.html</a>"},{"owner":{"account_id":15525540,"reputation":587,"user_id":11211041,"display_name":"Snostorp"},"score":0,"creation_date":1678448807,"post_id":20290847,"comment_id":133538927,"body_markdown":"A tip for more experienced coders are to put the Scanner object in a &quot;utility class&quot; i.e. https://stackoverflow.com/a/75674577/11211041 or in a Singleton class i.e. https://stackoverflow.com/a/29323215/11211041","body":"A tip for more experienced coders are to put the Scanner object in a &quot;utility class&quot; i.e. <a href=\"https://stackoverflow.com/a/75674577/11211041\">stackoverflow.com/a/75674577/11211041</a> or in a Singleton class i.e. <a href=\"https://stackoverflow.com/a/29323215/11211041\">stackoverflow.com/a/29323215/11211041</a>"}],"answers":[{"comments":[{"owner":{"account_id":3660173,"reputation":15,"user_id":3050212,"display_name":"Source Code"},"score":0,"creation_date":1385750914,"post_id":20290875,"comment_id":30275273,"body_markdown":"thank you, I&#39;m just starting to learn Java and am also new to stackoverflow.","body":"thank you, I&#39;m just starting to learn Java and am also new to stackoverflow."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1385746397,"creation_date":1385746397,"answer_id":20290875,"question_id":20290847,"body_markdown":"The simplest solution is often to do a little research before asking a question, e.g. use google, but since this is your first question, I assume, I will just give you the answer\r\n\r\n    Scanner scanner = new Scanner(new File(filename));","title":"How do I set up a scanner object in Java?","body":"<p>The simplest solution is often to do a little research before asking a question, e.g. use google, but since this is your first question, I assume, I will just give you the answer</p>\n\n<pre><code>Scanner scanner = new Scanner(new File(filename));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2698224,"reputation":4890,"user_id":2329659,"accept_rate":62,"display_name":"Prashant Ghimire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385746471,"creation_date":1385746471,"answer_id":20290884,"question_id":20290847,"body_markdown":"    Scanner input = new Scanner(new File(&quot;filename.extenstion&quot;));","title":"How do I set up a scanner object in Java?","body":"<pre><code>Scanner input = new Scanner(new File(\"filename.extenstion\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6848015,"reputation":11,"user_id":5266118,"display_name":"Patricio Clavel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443681945,"creation_date":1443681945,"answer_id":32881057,"question_id":20290847,"body_markdown":"In the beginning of your program, make sure you have \r\n\r\nimport java.util.Scanner;\r\n\r\nas your first line. Continuing, you should create a scanner in your program. \r\n\r\n// Create a Scanner\r\nScanner input = new Scanner(System.in);\r\n\r\n","title":"How do I set up a scanner object in Java?","body":"<p>In the beginning of your program, make sure you have </p>\n\n<p>import java.util.Scanner;</p>\n\n<p>as your first line. Continuing, you should create a scanner in your program. </p>\n\n<p>// Create a Scanner\nScanner input = new Scanner(System.in);</p>\n"}],"owner":{"account_id":3660173,"reputation":15,"user_id":3050212,"display_name":"Source Code"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":697,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":20290875,"answer_count":3,"score":1,"last_activity_date":1678448579,"creation_date":1385746286,"question_id":20290847,"body_markdown":"I&#39;m trying to write a program that will read in a file of students academic credit data and create a list of students on academic warning.  \r\n \r\nI first need to set up a Scanner object to read from the input file. I am new to Java and I need step by step instructions.","title":"How do I set up a scanner object in Java?","body":"<p>I'm trying to write a program that will read in a file of students academic credit data and create a list of students on academic warning.</p>\n<p>I first need to set up a Scanner object to read from the input file. I am new to Java and I need step by step instructions.</p>\n"},{"tags":["java","generics","inheritance"],"answers":[{"comments":[{"owner":{"account_id":15162,"reputation":1114,"user_id":31749,"accept_rate":88,"display_name":"Robert Ngetich"},"score":1,"creation_date":1225118314,"post_id":239663,"comment_id":103439,"body_markdown":"You say &#39;List&lt;? extends EmailAccount&gt;&#39;. Now I can&#39;t pass EmailAccount through at all; Was that a typo?. \n\nI wanted to check that EmailMonitor always receives a list of EmailAccount and always returns a list of EmailAccount that can be used without dynamic casting.\n\nposting my solution now :)","body":"You say &#39;List&lt;? extends EmailAccount&gt;&#39;. Now I can&#39;t pass EmailAccount through at all; Was that a typo?.   I wanted to check that EmailMonitor always receives a list of EmailAccount and always returns a list of EmailAccount that can be used without dynamic casting.  posting my solution now :)"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":1,"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1678448059,"creation_date":1225108583,"answer_id":239663,"question_id":239645,"body_markdown":"No, it&#39;s not overriding it properly. Overriding means you should be able to cope with any valid input to the base class. Consider what would happen if a client did this:\r\n\r\n    Monitor x = new EmailMonitor();\r\n    List&lt;NonEmailAccount&gt; nonEmailAccounts = ...;\r\n    x.performMonitor(nonEmailAccounts);\r\n\r\nThere&#39;s nothing in there which should give a compile-time error given your description - but it&#39;s clearly wrong.\r\n\r\nIt sounds to me like `Monitor` should be generic in the type of account it can monitor, so your `EmailMonitor` should extend `Monitor&lt;EmailAccount&gt;`. So:\r\n\r\n    public abstract class Monitor&lt;T extends MonitorAccount&gt;\r\n    {\r\n        ...\r\n        public abstract List&lt;? extends T&gt; performMonitor(\r\n            List&lt;? extends T&gt; accounts);\r\n    }\r\n\r\n    public class EmailMonitor extends Monitor&lt;EmailAccount&gt;\r\n    {\r\n        @Override\r\n        public abstract List&lt;? extends EmailAccount&gt; performMonitor(\r\n            List&lt;? extends EmailAccount&gt; accounts)\r\n        {\r\n            // Code goes here\r\n        }\r\n    }\r\n\r\nYou might want to think carefully about the generics in the `performMonitor` call though - what&#39;s the return value meant to signify?","title":"Overriding a method with Generic Parameters in Java?","body":"<p>No, it's not overriding it properly. Overriding means you should be able to cope with any valid input to the base class. Consider what would happen if a client did this:</p>\n<pre><code>Monitor x = new EmailMonitor();\nList&lt;NonEmailAccount&gt; nonEmailAccounts = ...;\nx.performMonitor(nonEmailAccounts);\n</code></pre>\n<p>There's nothing in there which should give a compile-time error given your description - but it's clearly wrong.</p>\n<p>It sounds to me like <code>Monitor</code> should be generic in the type of account it can monitor, so your <code>EmailMonitor</code> should extend <code>Monitor&lt;EmailAccount&gt;</code>. So:</p>\n<pre><code>public abstract class Monitor&lt;T extends MonitorAccount&gt;\n{\n    ...\n    public abstract List&lt;? extends T&gt; performMonitor(\n        List&lt;? extends T&gt; accounts);\n}\n\npublic class EmailMonitor extends Monitor&lt;EmailAccount&gt;\n{\n    @Override\n    public abstract List&lt;? extends EmailAccount&gt; performMonitor(\n        List&lt;? extends EmailAccount&gt; accounts)\n    {\n        // Code goes here\n    }\n}\n</code></pre>\n<p>You might want to think carefully about the generics in the <code>performMonitor</code> call though - what's the return value meant to signify?</p>\n"},{"comments":[{"owner":{"account_id":31622,"reputation":120351,"user_id":86989,"display_name":"newacct"},"score":1,"creation_date":1358109956,"post_id":240192,"comment_id":19877759,"body_markdown":"EmailMonitor does not extend MonitorAccount","body":"EmailMonitor does not extend MonitorAccount"}],"tags":[],"owner":{"account_id":15162,"reputation":1114,"user_id":31749,"accept_rate":88,"display_name":"Robert Ngetich"},"comment_count":1,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1434552561,"creation_date":1225119567,"answer_id":240192,"question_id":239645,"body_markdown":"Here is my own solution. I suspect this is the same thing Jon Skeet was trying to get at... without the typo (see my comment in reply to his answer). \r\n\r\nthe &lt;b&gt;Monitor.java&lt;/b&gt; class:\r\n\r\n    public abstract class Monitor &lt;T extends MonitorAccount&gt; {\r\n      ...\r\n      public abstract List&lt;T&gt; performMonitor(List&lt;T&gt; accounts);\r\n      ..\r\n    }\r\n\r\n&lt;b&gt;EmailMonitor.java&lt;/b&gt;\r\n\r\n    public class EmailMonitor extends Monitor&lt;EmailAccount&gt; {\r\n      ...\r\n      public List&lt;EmailAccount&gt; performMonitor(List&lt;EmailAccount&gt; emailAccounts) {\r\n        ..//logic...logic...logic\r\n        return emailAccounts;\r\n      }\r\n      ...\r\n    }\r\n\r\nIn this configuration, &lt;i&gt;EmailMonitor.performMonitor()&lt;/i&gt; will always check at compile time that it receives a list of &lt;b&gt;EmailAccount&lt;/b&gt; rather than any of my other types &lt;b&gt;FTPAccount, DBAccount,&lt;/b&gt; etc... It&#39;s much cleaner than the alternative, which would have been receiving/sending a raw list and then having to coerce it the required type resulting in potential runtime type casting exceptions. \r\n\r\n\r\n","title":"Overriding a method with Generic Parameters in Java?","body":"<p>Here is my own solution. I suspect this is the same thing Jon Skeet was trying to get at... without the typo (see my comment in reply to his answer). </p>\n\n<p>the <b>Monitor.java</b> class:</p>\n\n<pre><code>public abstract class Monitor &lt;T extends MonitorAccount&gt; {\n  ...\n  public abstract List&lt;T&gt; performMonitor(List&lt;T&gt; accounts);\n  ..\n}\n</code></pre>\n\n<p><b>EmailMonitor.java</b></p>\n\n<pre><code>public class EmailMonitor extends Monitor&lt;EmailAccount&gt; {\n  ...\n  public List&lt;EmailAccount&gt; performMonitor(List&lt;EmailAccount&gt; emailAccounts) {\n    ..//logic...logic...logic\n    return emailAccounts;\n  }\n  ...\n}\n</code></pre>\n\n<p>In this configuration, <i>EmailMonitor.performMonitor()</i> will always check at compile time that it receives a list of <b>EmailAccount</b> rather than any of my other types <b>FTPAccount, DBAccount,</b> etc... It's much cleaner than the alternative, which would have been receiving/sending a raw list and then having to coerce it the required type resulting in potential runtime type casting exceptions. </p>\n"}],"owner":{"account_id":15162,"reputation":1114,"user_id":31749,"accept_rate":88,"display_name":"Robert Ngetich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42628,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"accepted_answer_id":239663,"answer_count":2,"score":45,"last_activity_date":1678448059,"creation_date":1225108017,"question_id":239645,"body_markdown":"I have an abstract Class **Monitor.java** which is subclassed by a Class **EmailMonitor.java**. \r\n\r\nThe method:\r\n\r\n    public abstract List&lt;? extends MonitorAccount&gt; performMonitor(List&lt;? extends MonitorAccount&gt; accounts)\r\n\r\n is defined in **Monitor.java** and must be overridden in **EmailMonitor.java**.\r\n\r\n\r\nI currently have the method overridden in **EmailMonitor.java** as follows:\r\n\r\n\r\n    @Override\r\n    public List&lt;EmailAccount&gt; performMonitor(List&lt;EmailAccount&gt; emailAccounts) {\r\n        //...unrelated logic\r\n        return emailAccounts;\r\n    }\r\n\r\nHowever, this produces the compile time error: \r\n\r\n`Name clash: The method performMonitor(List&lt;EmailAccount&gt;) of type EmailMonitor has the same erasure as performMonitor(Lis&lt;? extends MonitorAccount&gt; emailAccounts) of type Monitor but does not override it`\r\n\r\n`EmailAccount` is a subclass of `MonitorAccount`, so (in my mind at least) overriding it in this way makes perfect sense. Seeing as the compiler is not happy with my logic though, How should I go about this correctly while still keeping my compile time checks to make sure that all calls to `EmailMonitor.performMonitor()` receive Lists of `EmailAccount` rather than some other type of `MonitorAccount`? \r\n&lt;/p&gt;","title":"Overriding a method with Generic Parameters in Java?","body":"<p>I have an abstract Class <strong>Monitor.java</strong> which is subclassed by a Class <strong>EmailMonitor.java</strong>. </p>\n\n<p>The method:</p>\n\n<pre><code>public abstract List&lt;? extends MonitorAccount&gt; performMonitor(List&lt;? extends MonitorAccount&gt; accounts)\n</code></pre>\n\n<p>is defined in <strong>Monitor.java</strong> and must be overridden in <strong>EmailMonitor.java</strong>.</p>\n\n<p>I currently have the method overridden in <strong>EmailMonitor.java</strong> as follows:</p>\n\n<pre><code>@Override\npublic List&lt;EmailAccount&gt; performMonitor(List&lt;EmailAccount&gt; emailAccounts) {\n    //...unrelated logic\n    return emailAccounts;\n}\n</code></pre>\n\n<p>However, this produces the compile time error: </p>\n\n<p><code>Name clash: The method performMonitor(List&lt;EmailAccount&gt;) of type EmailMonitor has the same erasure as performMonitor(Lis&lt;? extends MonitorAccount&gt; emailAccounts) of type Monitor but does not override it</code></p>\n\n<p><code>EmailAccount</code> is a subclass of <code>MonitorAccount</code>, so (in my mind at least) overriding it in this way makes perfect sense. Seeing as the compiler is not happy with my logic though, How should I go about this correctly while still keeping my compile time checks to make sure that all calls to <code>EmailMonitor.performMonitor()</code> receive Lists of <code>EmailAccount</code> rather than some other type of <code>MonitorAccount</code>? \n</p></p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","firebase-app-check"],"owner":{"display_name":"user20897932"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":434,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1678447947,"creation_date":1672459579,"question_id":74967449,"body_markdown":"I am trying to implement `Firebase app check` in my android app. I have followed all the steps as shown in the [documentation page](https://firebase.google.com/docs/app-check/android/play-integrity-provider).\r\n\r\n- I am using Firebase BoM libraries as shown in the documentation page:\r\n\r\n\r\n```\r\ndependencies {\r\n&#160; &#160; implementation platform(&#39;com.google.firebase:firebase-bom:31.1.1&#39;)\r\n&#160; &#160; implementation &#39;com.google.firebase:firebase-appcheck-playintegrity&#39;\r\n}\r\n```\r\n\r\n- I got my `SHA 256` fingerprint which I got from android studio after running this command in the terminal:\r\n\r\n\r\n```\r\n./gradlew signingReport\r\n```\r\n- I added the fingerprint in both `PlayIntegrity` and `SafetyNet` attestations (just in case `PlayIntegrity` doesn&#39;t work)\r\n\r\n- Inside all the activities in my app, I added this code:\r\n\r\n\r\n```\r\nFirebaseApp.initializeApp(activity_name.this);\r\nFirebaseAppCheck firebaseAppCheck = FirebaseAppCheck.getInstance();\r\nfirebaseAppCheck.installAppCheckProviderFactory(\r\n&#160; &#160; &#160; &#160; PlayIntegrityAppCheckProviderFactory.getInstance());\r\n\r\n\r\nFirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n\r\nmAuth.signInAnonymously()\r\n        .addOnCompleteListener(record_viewer.this, (OnCompleteListener&lt;AuthResult&gt;) task -&gt; {\r\n            if (task.isSuccessful()) { \r\n\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n\r\n                //rest of the code here\r\n            }\r\n        });\r\n\r\n```\r\n\r\nEvery time I run my app on my physical device, I get these warnings in my console:\r\n\r\n```\r\n pc_0 - Detected invalid AppCheck token. Reconnecting (2 attempts remaining)\r\n pc_0 - Detected invalid AppCheck token. Reconnecting (1 attempts remaining)\r\n pc_0 - Detected invalid AppCheck token. Reconnecting (0 attempts remaining)\r\n pc_0 - Firebase Database connection was forcefully killed by the server. Will not attempt reconnect.   Reason: Invalid appcheck token\r\n```\r\n\r\n\r\nHow is my appcheck token invalid? I have tried regenerating and reattaching my `SHA 256` fingerprint again and again into my `Playintegrity` attestation (thinking the key might be wrong), but this warning keeps on reappearing.\r\nWhere am I going wrong?\r\n\r\n\r\n----------\r\n**EDIT :** Ok, I&#39;ve noticed this line in the documentation page:\r\n\r\n&gt; Currently, the built-in Play Integrity provider only supports Android apps distributed by Google Play. To use Play Integrity&#39;s off-Play features, or to use App Check with your own custom provider, see Implement a custom App Check provider.\r\n\r\nDoes this mean I have to publish the app in Google play store for the `PlayIntegrity` attestation to work?","title":"Firebase android: Getting invalid appcheck token error even though SHA 256 fingerprint is registered in console","body":"<p>I am trying to implement <code>Firebase app check</code> in my android app. I have followed all the steps as shown in the <a href=\"https://firebase.google.com/docs/app-check/android/play-integrity-provider\" rel=\"nofollow noreferrer\">documentation page</a>.</p>\n<ul>\n<li>I am using Firebase BoM libraries as shown in the documentation page:</li>\n</ul>\n<pre><code>dependencies {\n    implementation platform('com.google.firebase:firebase-bom:31.1.1')\n    implementation 'com.google.firebase:firebase-appcheck-playintegrity'\n}\n</code></pre>\n<ul>\n<li>I got my <code>SHA 256</code> fingerprint which I got from android studio after running this command in the terminal:</li>\n</ul>\n<pre><code>./gradlew signingReport\n</code></pre>\n<ul>\n<li><p>I added the fingerprint in both <code>PlayIntegrity</code> and <code>SafetyNet</code> attestations (just in case <code>PlayIntegrity</code> doesn't work)</p>\n</li>\n<li><p>Inside all the activities in my app, I added this code:</p>\n</li>\n</ul>\n<pre><code>FirebaseApp.initializeApp(activity_name.this);\nFirebaseAppCheck firebaseAppCheck = FirebaseAppCheck.getInstance();\nfirebaseAppCheck.installAppCheckProviderFactory(\n        PlayIntegrityAppCheckProviderFactory.getInstance());\n\n\nFirebaseAuth mAuth = FirebaseAuth.getInstance();\n\nmAuth.signInAnonymously()\n        .addOnCompleteListener(record_viewer.this, (OnCompleteListener&lt;AuthResult&gt;) task -&gt; {\n            if (task.isSuccessful()) { \n\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\n\n                //rest of the code here\n            }\n        });\n\n</code></pre>\n<p>Every time I run my app on my physical device, I get these warnings in my console:</p>\n<pre><code> pc_0 - Detected invalid AppCheck token. Reconnecting (2 attempts remaining)\n pc_0 - Detected invalid AppCheck token. Reconnecting (1 attempts remaining)\n pc_0 - Detected invalid AppCheck token. Reconnecting (0 attempts remaining)\n pc_0 - Firebase Database connection was forcefully killed by the server. Will not attempt reconnect.   Reason: Invalid appcheck token\n</code></pre>\n<p>How is my appcheck token invalid? I have tried regenerating and reattaching my <code>SHA 256</code> fingerprint again and again into my <code>Playintegrity</code> attestation (thinking the key might be wrong), but this warning keeps on reappearing.\nWhere am I going wrong?</p>\n<hr />\n<p><strong>EDIT :</strong> Ok, I've noticed this line in the documentation page:</p>\n<blockquote>\n<p>Currently, the built-in Play Integrity provider only supports Android apps distributed by Google Play. To use Play Integrity's off-Play features, or to use App Check with your own custom provider, see Implement a custom App Check provider.</p>\n</blockquote>\n<p>Does this mean I have to publish the app in Google play store for the <code>PlayIntegrity</code> attestation to work?</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1582902373,"post_id":60454346,"comment_id":106947815,"body_markdown":"Java doesn&#39;t support the concept of global variables. basically,you&#39;re just looking about how to provide input by console?","body":"Java doesn&#39;t support the concept of global variables. basically,you&#39;re just looking about how to provide input by console?"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1582902412,"post_id":60454346,"comment_id":106947831,"body_markdown":"Use way 2. If you use it correctly and there is valid input to read, there won’t be an exception.","body":"Use way 2. If you use it correctly and there is valid input to read, there won’t be an exception."},{"owner":{"account_id":15887681,"reputation":349,"user_id":11463636,"display_name":"CR0N0S.LXIII"},"score":0,"creation_date":1582902503,"post_id":60454346,"comment_id":106947894,"body_markdown":"I&#39;m using number 2 and I&#39;m getting a NoSuchElementException. I can provide some basic code if you want","body":"I&#39;m using number 2 and I&#39;m getting a NoSuchElementException. I can provide some basic code if you want"},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":1,"creation_date":1582902934,"post_id":60454346,"comment_id":106948140,"body_markdown":"@Konrad Rudolph 2 would not work if you close the `Scanner`, as he specifically mentions asking for user input, meaning he is using `System.in` to open the `Scanner`.  If you close the `Scanner` that is on `System.in` you will be unable to open `System.in` again and the code will fail when you try to create and use another `Scanner`.  You will have to _not_ close the `Scanner` irregardless of the warning if it uses `System.in`.","body":"@Konrad Rudolph 2 would not work if you close the <code>Scanner</code>, as he specifically mentions asking for user input, meaning he is using <code>System.in</code> to open the <code>Scanner</code>.  If you close the <code>Scanner</code> that is on <code>System.in</code> you will be unable to open <code>System.in</code> again and the code will fail when you try to create and use another <code>Scanner</code>.  You will have to <i>not</i> close the <code>Scanner</code> irregardless of the warning if it uses <code>System.in</code>."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1582903009,"post_id":60454346,"comment_id":106948202,"body_markdown":"&quot;I declare a new Scanner variable, use it, and close it before exiting function&quot; closing Scanner will also close resource from which it reads its data, so if you have function like `void foo(){Scanner sc = new Scanner(System.in); /*do some stuff with scanner*/ sc.close()}` then after `foo` will be called first time it will close `System.in` which will prevent you from reading from it again (like when you would like to use `foo()` again). Instead create one scanner and *pass it as parameter* like `void foo(Scanner sc){/*use scanner*/}` and use it with already existing scanner like `foo(scan);`.","body":"&quot;I declare a new Scanner variable, use it, and close it before exiting function&quot; closing Scanner will also close resource from which it reads its data, so if you have function like <code>void foo(){Scanner sc = new Scanner(System.in); &#47;*do some stuff with scanner*&#47; sc.close()}</code> then after <code>foo</code> will be called first time it will close <code>System.in</code> which will prevent you from reading from it again (like when you would like to use <code>foo()</code> again). Instead create one scanner and <i>pass it as parameter</i> like <code>void foo(Scanner sc){&#47;*use scanner*&#47;}</code> and use it with already existing scanner like <code>foo(scan);</code>."},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":0,"creation_date":1582903075,"post_id":60454346,"comment_id":106948243,"body_markdown":"@Pshemo You don&#39;t need to pass it as a parameter, depending on the functionality it is completely valid to open the `Scanner` from within the method, you just need to not close it if it uses `System.in`.","body":"@Pshemo You don&#39;t need to pass it as a parameter, depending on the functionality it is completely valid to open the <code>Scanner</code> from within the method, you just need to not close it if it uses <code>System.in</code>."},{"owner":{"account_id":15887681,"reputation":349,"user_id":11463636,"display_name":"CR0N0S.LXIII"},"score":0,"creation_date":1582903083,"post_id":60454346,"comment_id":106948246,"body_markdown":"Ok, so not closing Scanner when using 2 or declaring Scanner in Main and passing it as parameter. Thank you very much. You can provide the answer so I accept it if you want","body":"Ok, so not closing Scanner when using 2 or declaring Scanner in Main and passing it as parameter. Thank you very much. You can provide the answer so I accept it if you want"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1582903118,"post_id":60454346,"comment_id":106948268,"body_markdown":"@Nexevis I mean, yeah, obviously don’t `close` a scanner attached to the standard input stream.","body":"@Nexevis I mean, yeah, obviously don’t <code>close</code> a scanner attached to the standard input stream."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1582903237,"post_id":60454346,"comment_id":106948327,"body_markdown":"@Nexevis Well you are right, we don&#39;t *need* to pass it as parameter, but creating new Scanner each time method is called feels like wasting resource (memory and time). Passing already existing scanner as parameter feels more natural to me. But that is just my opinion.","body":"@Nexevis Well you are right, we don&#39;t <i>need</i> to pass it as parameter, but creating new Scanner each time method is called feels like wasting resource (memory and time). Passing already existing scanner as parameter feels more natural to me. But that is just my opinion."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1582904110,"post_id":60454346,"comment_id":106948773,"body_markdown":"@KonradRudolph OK, thanks for pointing that out.","body":"@KonradRudolph OK, thanks for pointing that out."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1582904290,"post_id":60454346,"comment_id":106948869,"body_markdown":"Beware of another problem with having multiple Scanners which handle same resource which is: they read entire (or some big chunk - need to check) data available in resource and cache it. For instance when we have `int getNumber(){return new Scanner(System.in).nextInt();}` and we ask user to provide N numbers like `print(&quot;give me 4 numbers);for (/*N times/*){ list.add(getNumber()); }` but user will provide input in form `1 2 3 4(enter)` then Scanner from first call of `getNumber()` will consume all available data leaving nothing for other scanners created in next calls of `getNumber()`.","body":"Beware of another problem with having multiple Scanners which handle same resource which is: they read entire (or some big chunk - need to check) data available in resource and cache it. For instance when we have <code>int getNumber(){return new Scanner(System.in).nextInt();}</code> and we ask user to provide N numbers like <code>print(&quot;give me 4 numbers);for (&#47;*N times&#47;*){ list.add(getNumber()); }</code> but user will provide input in form <code>1 2 3 4(enter)</code> then Scanner from first call of <code>getNumber()</code> will consume all available data leaving nothing for other scanners created in next calls of <code>getNumber()</code>."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1582904293,"post_id":60454346,"comment_id":106948872,"body_markdown":"@Pshemo Actually I double-checked the implementation, and hence removed my comment: the `Scanner` class is *horrifically* wasteful. It *should* be cheap to construct, but it simply isn’t. Your instinct was right. Most of this is a quality-of-implementation issue: it could be fixed.","body":"@Pshemo Actually I double-checked the implementation, and hence removed my comment: the <code>Scanner</code> class is <i>horrifically</i> wasteful. It <i>should</i> be cheap to construct, but it simply isn’t. Your instinct was right. Most of this is a quality-of-implementation issue: it could be fixed."}],"answers":[{"comments":[{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1582903604,"post_id":60454683,"comment_id":106948519,"body_markdown":"Beware that your “singleton” isn’t thread safe, and it feels conceptually iffy (besides the general problems with singletons): you *don’t* want a single scanner. You want a single *standard input scanner*. Yes, that’s what your code does, but the class name reflects this poorly.","body":"Beware that your “singleton” isn’t thread safe, and it feels conceptually iffy (besides the general problems with singletons): you <i>don’t</i> want a single scanner. You want a single <i>standard input scanner</i>. Yes, that’s what your code does, but the class name reflects this poorly."},{"owner":{"account_id":7930464,"reputation":2055,"user_id":5988526,"accept_rate":37,"display_name":"Bashir"},"score":0,"creation_date":1582903838,"post_id":60454683,"comment_id":106948630,"body_markdown":"how it isn&#39;t safe?","body":"how it isn&#39;t safe?"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1582903980,"post_id":60454683,"comment_id":106948693,"body_markdown":"If two threads call `getInstance` simultaneously, `sc` potentially gets initialised twice, and you’ve therefore created two `ScannerSingleton`s, and two `Scanner`s over `System.in`.","body":"If two threads call <code>getInstance</code> simultaneously, <code>sc</code> potentially gets initialised twice, and you’ve therefore created two <code>ScannerSingleton</code>s, and two <code>Scanner</code>s over <code>System.in</code>."},{"owner":{"account_id":7930464,"reputation":2055,"user_id":5988526,"accept_rate":37,"display_name":"Bashir"},"score":1,"creation_date":1582904577,"post_id":60454683,"comment_id":106949011,"body_markdown":"I understand, after editing my answer, you won&#39;t have this problem which statistically, its risk is low, since it can only happen when the Singleton is called for the first time.","body":"I understand, after editing my answer, you won&#39;t have this problem which statistically, its risk is low, since it can only happen when the Singleton is called for the first time."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1582904747,"post_id":60454683,"comment_id":106949098,"body_markdown":"A Microsoft engineer famously noted that “‘one in a million’ is next Tuesday”. Meaning, when code is run frequently, even occurrences with a *very* small chance are statistically guaranteed to occur in the long run. **Never** trust low chances (unless you can exactly quantify them, as in the case of GUID collisions, which are indeed so rare that they will *never* happen).","body":"A Microsoft engineer famously noted that “‘one in a million’ is next Tuesday”. Meaning, when code is run frequently, even occurrences with a <i>very</i> small chance are statistically guaranteed to occur in the long run. <b>Never</b> trust low chances (unless you can exactly quantify them, as in the case of GUID collisions, which are indeed so rare that they will <i>never</i> happen)."},{"owner":{"account_id":7930464,"reputation":2055,"user_id":5988526,"accept_rate":37,"display_name":"Bashir"},"score":0,"creation_date":1582905905,"post_id":60454683,"comment_id":106949705,"body_markdown":"that&#39;s right, I assume that now we have no risk, I mean after the edit of the answer, no? since the risk can happens only on the first call, we synchronize after testing if it is null(only on the first call will be null), so that we don&#39;t synchronize on each call.","body":"that&#39;s right, I assume that now we have no risk, I mean after the edit of the answer, no? since the risk can happens only on the first call, we synchronize after testing if it is null(only on the first call will be null), so that we don&#39;t synchronize on each call."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1582906050,"post_id":60454683,"comment_id":106949773,"body_markdown":"Your initial edit fixed the problem (though it made calling it expensive). But your second edit *reintroduced the problem!* You need to employ double-checked synchronisation; in other words, inside your `synchronized` block you need to perform the null check *again*.","body":"Your initial edit fixed the problem (though it made calling it expensive). But your second edit <i>reintroduced the problem!</i> You need to employ double-checked synchronisation; in other words, inside your <code>synchronized</code> block you need to perform the null check <i>again</i>."},{"owner":{"account_id":7930464,"reputation":2055,"user_id":5988526,"accept_rate":37,"display_name":"Bashir"},"score":0,"creation_date":1582906330,"post_id":60454683,"comment_id":106949899,"body_markdown":"I re-edit it to avoid the coast of the synchronization at each time. we don&#39;t need to null check again, since the risk may happens only on the first call. So only at the first call all the threads will find it null, so at this time we synchronize. but in later calls we won&#39;t have any problem, since it will never be null","body":"I re-edit it to avoid the coast of the synchronization at each time. we don&#39;t need to null check again, since the risk may happens only on the first call. So only at the first call all the threads will find it null, so at this time we synchronize. but in later calls we won&#39;t have any problem, since it will never be null"},{"owner":{"account_id":7930464,"reputation":2055,"user_id":5988526,"accept_rate":37,"display_name":"Bashir"},"score":0,"creation_date":1582906517,"post_id":60454683,"comment_id":106949974,"body_markdown":"well well, you&#39;re right, I have to double check .. thanks for this interesting discussion","body":"well well, you&#39;re right, I have to double check .. thanks for this interesting discussion"}],"tags":[],"owner":{"account_id":7930464,"reputation":2055,"user_id":5988526,"accept_rate":37,"display_name":"Bashir"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1591864095,"creation_date":1582903427,"answer_id":60454683,"question_id":60454346,"body_markdown":"to use a single instance of Scanner (or any other datatype or class), you can use the design pattern &quot;Singleton&quot; which consist to instantiate a single instance of your Object for the whole project.\r\n\r\nThe Singleton definition (a new class) : \r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class ScannerSingleton {\r\n        private static Scanner sc = null;\r\n    \r\n        private ScannerSingleton() {\r\n            sc = new Scanner(System.in);\r\n    \r\n        }\r\n    \r\n        public static Scanner getInstance() {\r\n            if (sc == null) {\r\n                synchronized(ScannerSingleton.class) {\r\n                    if (sc == null)\r\n                        sc = new ScannerSingleton();\r\n                }\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nand each time you want to use your scanner anywhere you only have to call `ScannerSingleton.getInstance()` which will return your single instance of scanner\r\n\r\nexample of use:\r\n\r\n    String test = ScannerSingleton.getInstance().nextLine();\r\n","title":"Proper way to use Scanner with multiple methods in Java?","body":"<p>to use a single instance of Scanner (or any other datatype or class), you can use the design pattern \"Singleton\" which consist to instantiate a single instance of your Object for the whole project.</p>\n\n<p>The Singleton definition (a new class) : </p>\n\n<pre><code>import java.util.Scanner;\n\npublic class ScannerSingleton {\n    private static Scanner sc = null;\n\n    private ScannerSingleton() {\n        sc = new Scanner(System.in);\n\n    }\n\n    public static Scanner getInstance() {\n        if (sc == null) {\n            synchronized(ScannerSingleton.class) {\n                if (sc == null)\n                    sc = new ScannerSingleton();\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>and each time you want to use your scanner anywhere you only have to call <code>ScannerSingleton.getInstance()</code> which will return your single instance of scanner</p>\n\n<p>example of use:</p>\n\n<pre><code>String test = ScannerSingleton.getInstance().nextLine();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16641188,"reputation":449,"user_id":12026681,"display_name":"lue"},"score":0,"creation_date":1582904071,"post_id":60454749,"comment_id":106948745,"body_markdown":"before, import java.util.Scanner.","body":"before, import java.util.Scanner."}],"tags":[],"owner":{"account_id":16641188,"reputation":449,"user_id":12026681,"display_name":"lue"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582903691,"creation_date":1582903691,"answer_id":60454749,"question_id":60454346,"body_markdown":"I suggest to pass your `Scanner` object as another parameter for your functions.\r\n\r\n    public static void main(String[] args)\r\n    {\r\n      Scanner scanner=new Scanner(System.in);\r\n      String answer = ask(scanner, &quot;what is your name?&quot;);\r\n      System.out.println(&quot;Oh! Hello dear &quot; + answer + &quot;!&quot;);\r\n      scanner.close();\r\n    }\r\n    \r\n    private static String ask(Scanner scanner, String question)\r\n    {\r\n      System.out.println(question);\r\n      return scanner.nextLine();\r\n    }","title":"Proper way to use Scanner with multiple methods in Java?","body":"<p>I suggest to pass your <code>Scanner</code> object as another parameter for your functions.</p>\n\n<pre><code>public static void main(String[] args)\n{\n  Scanner scanner=new Scanner(System.in);\n  String answer = ask(scanner, \"what is your name?\");\n  System.out.println(\"Oh! Hello dear \" + answer + \"!\");\n  scanner.close();\n}\n\nprivate static String ask(Scanner scanner, String question)\n{\n  System.out.println(question);\n  return scanner.nextLine();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582907466,"creation_date":1582905495,"answer_id":60455260,"question_id":60454346,"body_markdown":"**One way:**\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n    \tprivate Scanner scanner = new Scanner(System.in);\r\n    \r\n    \tpublic Scanner getScanner() {\r\n    \t\treturn scanner;\r\n    \t}\r\n    \r\n    \tvoid fun1() {\r\n    \t\tScanner in = getScanner();\r\n    \t\tSystem.out.print(&quot;Enter a string: &quot;);\r\n    \t\tSystem.out.println(&quot;You entered: &quot; + in.nextLine());\r\n    \t}\r\n    \r\n    \tvoid fun2() {\r\n    \t\tScanner in = getScanner();\r\n    \t\tSystem.out.print(&quot;Enter an integer: &quot;);\r\n    \t\tint n = 0;\r\n    \t\ttry {\r\n    \t\t\tn = Integer.parseInt(in.nextLine());\r\n    \t\t} catch (NumberFormatException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\tSystem.out.println(n + &quot; + 10 = &quot; + (n + 10));\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tMain m = new Main();\r\n    \t\tm.fun1();\r\n    \t\tm.fun2();\r\n    \t}\r\n    }\r\n**A sample run:**\r\n\r\n    Enter a string: Hello world!\r\n    You entered: Hello world!\r\n    Enter an integer: 25\r\n    25 + 10 = 35\r\n\r\n**Another way:**\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n    \tstatic void fun1(Scanner in) {\r\n    \t\tSystem.out.print(&quot;Enter a string: &quot;);\r\n    \t\tSystem.out.println(&quot;You entered: &quot; + in.nextLine());\r\n    \t}\r\n    \r\n    \tstatic void fun2(Scanner in) {\r\n    \t\tSystem.out.print(&quot;Enter an integer: &quot;);\r\n    \t\tint n = 0;\r\n    \t\ttry {\r\n    \t\t\tn = Integer.parseInt(in.nextLine());\r\n    \t\t} catch (NumberFormatException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\tSystem.out.println(n + &quot; + 10 = &quot; + (n + 10));\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner in = new Scanner(System.in);\r\n    \t\tfun1(in);\r\n    \t\tfun2(in);\r\n    \t}\r\n    }\r\n\r\n**A sample run:**\r\n\r\n    Enter a string: Hello world!\r\n    You entered: Hello world!\r\n    Enter an integer: 25\r\n    25 + 10 = 35\r\n**Regarding your problem with `next()` or `nextInt()`:** Given below is the recommended way for multiple inputs in one go.\r\n\r\n    import java.util.Arrays;\r\n    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner in = new Scanner(System.in);\r\n    \t\tboolean valid = true;\r\n    \t\tSystem.out.print(&quot;Enter some intgers: &quot;);\r\n    \t\tString strNum = in.nextLine();\r\n    \t\tString[] strNumArr = strNum.split(&quot;\\\\s+&quot;);\r\n    \t\tint[] numArr = new int[strNumArr.length];\r\n    \t\tfor (int i = 0; i &lt; strNumArr.length; i++) {\r\n    \t\t\ttry {\r\n    \t\t\t\tnumArr[i] = Integer.parseInt(strNumArr[i]);\r\n    \t\t\t} catch (NumberFormatException e) {\r\n    \t\t\t\tnumArr[i] = Integer.MIN_VALUE;\r\n    \t\t\t\tvalid = false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSystem.out.println(Arrays.toString(numArr));\r\n    \t\tif (!valid) {\r\n    \t\t\tSystem.out.println(&quot;Note: invalid inputs have been reset to &quot; + Integer.MIN_VALUE);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**A sample run:**\r\n\r\n    Enter some intgers: 10 5 20 15\r\n    [10, 5, 20, 15]\r\n**Another sample run:**\r\n\r\n    Enter some intgers: 4     40 a    20   b   15\r\n    [4, 40, -2147483648, 20, -2147483648, 15]\r\n    Note: invalid inputs have been reset to -2147483648\r\n\r\nCheck https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo for more information about console input using `Scanner`.\r\n","title":"Proper way to use Scanner with multiple methods in Java?","body":"<p><strong>One way:</strong></p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    private Scanner scanner = new Scanner(System.in);\n\n    public Scanner getScanner() {\n        return scanner;\n    }\n\n    void fun1() {\n        Scanner in = getScanner();\n        System.out.print(\"Enter a string: \");\n        System.out.println(\"You entered: \" + in.nextLine());\n    }\n\n    void fun2() {\n        Scanner in = getScanner();\n        System.out.print(\"Enter an integer: \");\n        int n = 0;\n        try {\n            n = Integer.parseInt(in.nextLine());\n        } catch (NumberFormatException e) {\n            e.printStackTrace();\n        }\n        System.out.println(n + \" + 10 = \" + (n + 10));\n    }\n\n    public static void main(String[] args) {\n        Main m = new Main();\n        m.fun1();\n        m.fun2();\n    }\n}\n</code></pre>\n\n<p><strong>A sample run:</strong></p>\n\n<pre><code>Enter a string: Hello world!\nYou entered: Hello world!\nEnter an integer: 25\n25 + 10 = 35\n</code></pre>\n\n<p><strong>Another way:</strong></p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    static void fun1(Scanner in) {\n        System.out.print(\"Enter a string: \");\n        System.out.println(\"You entered: \" + in.nextLine());\n    }\n\n    static void fun2(Scanner in) {\n        System.out.print(\"Enter an integer: \");\n        int n = 0;\n        try {\n            n = Integer.parseInt(in.nextLine());\n        } catch (NumberFormatException e) {\n            e.printStackTrace();\n        }\n        System.out.println(n + \" + 10 = \" + (n + 10));\n    }\n\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        fun1(in);\n        fun2(in);\n    }\n}\n</code></pre>\n\n<p><strong>A sample run:</strong></p>\n\n<pre><code>Enter a string: Hello world!\nYou entered: Hello world!\nEnter an integer: 25\n25 + 10 = 35\n</code></pre>\n\n<p><strong>Regarding your problem with <code>next()</code> or <code>nextInt()</code>:</strong> Given below is the recommended way for multiple inputs in one go.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        boolean valid = true;\n        System.out.print(\"Enter some intgers: \");\n        String strNum = in.nextLine();\n        String[] strNumArr = strNum.split(\"\\\\s+\");\n        int[] numArr = new int[strNumArr.length];\n        for (int i = 0; i &lt; strNumArr.length; i++) {\n            try {\n                numArr[i] = Integer.parseInt(strNumArr[i]);\n            } catch (NumberFormatException e) {\n                numArr[i] = Integer.MIN_VALUE;\n                valid = false;\n            }\n        }\n        System.out.println(Arrays.toString(numArr));\n        if (!valid) {\n            System.out.println(\"Note: invalid inputs have been reset to \" + Integer.MIN_VALUE);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>A sample run:</strong></p>\n\n<pre><code>Enter some intgers: 10 5 20 15\n[10, 5, 20, 15]\n</code></pre>\n\n<p><strong>Another sample run:</strong></p>\n\n<pre><code>Enter some intgers: 4     40 a    20   b   15\n[4, 40, -2147483648, 20, -2147483648, 15]\nNote: invalid inputs have been reset to -2147483648\n</code></pre>\n\n<p>Check <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a> for more information about console input using <code>Scanner</code>.</p>\n"}],"owner":{"account_id":15887681,"reputation":349,"user_id":11463636,"display_name":"CR0N0S.LXIII"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4306,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1582913804,"accepted_answer_id":60454683,"answer_count":3,"score":1,"last_activity_date":1678447897,"creation_date":1582902284,"question_id":60454346,"body_markdown":"I have a console application with a `main` method and some methods that I call from `main`. There, I want to ask the user for some input, for which I use the `Scanner` class.\r\n\r\nHere&#39;s my problem:\r\n\r\nI find there is no way to use `Scanner` when reading inputs from outside `main` without random exceptions or unexpected behaviour. I have tried two approaches:\r\n\r\n 1. Having a `Scanner` global variable in the class containing `main`. Then\r\n    I use this same `Scanner` in all functions in that same class.\r\n 2. In every function I need to ask for input, I declare a new `Scanner`\r\n    variable, use it, and `close` it before exiting the function.\r\n\r\n1\\. makes `Scanner` try to read twice. I mean, I have a `sc.readLine` in a function and when I exit that function I have another `sc.readLine` in `main`. I input once and the two `readLine` lines get executed, the second one reading an empty `String`.\r\n\r\n2\\. throws `Exception` (*base class Exception*) when I call any `sc.readLine` for a second time during the execution of the program.\r\n\r\nI have also noticed that any other method other than `readLine` is going to read various items on the same line. For example, line `&quot;10 20 30 40&quot;` would execute 4 `sc.nextInt` calls.\r\n\r\n**TL;DR:** how do you use `Scanner` in a console application?","title":"Proper way to use Scanner with multiple methods in Java?","body":"<p>I have a console application with a <code>main</code> method and some methods that I call from <code>main</code>. There, I want to ask the user for some input, for which I use the <code>Scanner</code> class.</p>\n<p>Here's my problem:</p>\n<p>I find there is no way to use <code>Scanner</code> when reading inputs from outside <code>main</code> without random exceptions or unexpected behaviour. I have tried two approaches:</p>\n<ol>\n<li>Having a <code>Scanner</code> global variable in the class containing <code>main</code>. Then\nI use this same <code>Scanner</code> in all functions in that same class.</li>\n<li>In every function I need to ask for input, I declare a new <code>Scanner</code>\nvariable, use it, and <code>close</code> it before exiting the function.</li>\n</ol>\n<p>1. makes <code>Scanner</code> try to read twice. I mean, I have a <code>sc.readLine</code> in a function and when I exit that function I have another <code>sc.readLine</code> in <code>main</code>. I input once and the two <code>readLine</code> lines get executed, the second one reading an empty <code>String</code>.</p>\n<p>2. throws <code>Exception</code> (<em>base class Exception</em>) when I call any <code>sc.readLine</code> for a second time during the execution of the program.</p>\n<p>I have also noticed that any other method other than <code>readLine</code> is going to read various items on the same line. For example, line <code>&quot;10 20 30 40&quot;</code> would execute 4 <code>sc.nextInt</code> calls.</p>\n<p><strong>TL;DR:</strong> how do you use <code>Scanner</code> in a console application?</p>\n"},{"tags":["java","android","firebase","firebase-app-check","google-play-integrity-api"],"comments":[{"owner":{"account_id":1164568,"reputation":117,"user_id":3804613,"accept_rate":67,"display_name":"Abzal Serekov"},"score":0,"creation_date":1673886985,"post_id":74992711,"comment_id":132592266,"body_markdown":"Consider filing an issue via https://github.com/firebase/firebase-android-sdk/issues with more details (e.g. package name)","body":"Consider filing an issue via <a href=\"https://github.com/firebase/firebase-android-sdk/issues\" rel=\"nofollow noreferrer\">github.com/firebase/firebase-android-sdk/issues</a> with more details (e.g. package name)"},{"owner":{"account_id":21878885,"reputation":190,"user_id":16167525,"display_name":"Victor Fan"},"score":0,"creation_date":1673888597,"post_id":74992711,"comment_id":132592828,"body_markdown":"_Firebaser here._\n\nAgree with Abzal&#39;s response -- please file an issue at the above link, and include details you are comfortable sharing. You can also file a support ticket directly with [Firebase Support](https://firebase.google.com/support/troubleshooter/contact) without publicizing those details.","body":"<i>Firebaser here.</i>  Agree with Abzal&#39;s response -- please file an issue at the above link, and include details you are comfortable sharing. You can also file a support ticket directly with <a href=\"https://firebase.google.com/support/troubleshooter/contact\" rel=\"nofollow noreferrer\">Firebase Support</a> without publicizing those details."}],"answers":[{"tags":[],"owner":{"account_id":6302644,"reputation":5803,"user_id":4896784,"display_name":"ismail alaoui"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678447838,"creation_date":1678447838,"answer_id":75695611,"question_id":74992711,"body_markdown":"if you are under debug mode you should add debug token to your appcheck :\r\n\r\n**Appcheck** -- &gt; **Application** -- &gt; **Manage debug token** \r\n\r\nadd this line to your gradle :\r\n\r\n        implementation &#39;com.google.firebase:firebase-appcheck-debug:16.1.2&#39;\r\n\r\nAnd then instantiate your appcheck this way : \r\n\r\n       FirebaseApp.initializeApp(getApplicationContext());\r\n       FirebaseAppCheck firebaseAppCheck = FirebaseAppCheck.getInstance();\r\n       firebaseAppCheck.installAppCheckProviderFactory(\r\n                DebugAppCheckProviderFactory.getInstance());\r\n\r\nAfter that , lunch your application , in your logcat , look for this :\r\n\r\n    D DebugAppCheckProvider: Enter this debug secret into the allow list in\r\n    the Firebase Console for your project: 123a4567-b89c-12d3-e456-789012345678\r\n\r\nSo you need to add this token `123a4567-b89c-12d3-e456-789012345678` in your Appcheck debug token .\r\n\r\nthis should work for you !","title":"Google play integrity API - Invalid app check token error after adding app to Firebase project","body":"<p>if you are under debug mode you should add debug token to your appcheck :</p>\n<p><strong>Appcheck</strong> -- &gt; <strong>Application</strong> -- &gt; <strong>Manage debug token</strong></p>\n<p>add this line to your gradle :</p>\n<pre><code>    implementation 'com.google.firebase:firebase-appcheck-debug:16.1.2'\n</code></pre>\n<p>And then instantiate your appcheck this way :</p>\n<pre><code>   FirebaseApp.initializeApp(getApplicationContext());\n   FirebaseAppCheck firebaseAppCheck = FirebaseAppCheck.getInstance();\n   firebaseAppCheck.installAppCheckProviderFactory(\n            DebugAppCheckProviderFactory.getInstance());\n</code></pre>\n<p>After that , lunch your application , in your logcat , look for this :</p>\n<pre><code>D DebugAppCheckProvider: Enter this debug secret into the allow list in\nthe Firebase Console for your project: 123a4567-b89c-12d3-e456-789012345678\n</code></pre>\n<p>So you need to add this token <code>123a4567-b89c-12d3-e456-789012345678</code> in your Appcheck debug token .</p>\n<p>this should work for you !</p>\n"}],"owner":{"display_name":"user20918628"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2483,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1678447838,"creation_date":1672745158,"question_id":74992711,"body_markdown":"I am trying to implement `firebase app check` in my android app using `Play-Integrity API`. I have added both my **SHA-1** &amp; **SHA-256** fingerprints in my firebase app (acquired from `Google play console` and `Android studio gradle signing report` both) into my firebase app.\r\n\r\nI have added this code inside all my activities in my app, before using any other `Firebase SDKs`:\r\n\r\n```\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n    FirebaseApp.initializeApp(this);\r\n    FirebaseAppCheck firebaseAppCheck = FirebaseAppCheck.getInstance();\r\n    firebaseAppCheck.installAppCheckProviderFactory(PlayIntegrityAppCheckProviderFactory.getInstance());\r\n}\r\n```\r\n\r\n---\r\n\r\n\r\nNow no matter how many times I run my app, I keep getting the error in my console:\r\n```\r\npc_0 - Detected invalid AppCheck token. Reconnecting (2 attempts remaining)\r\npc_0 - Detected invalid AppCheck token. Reconnecting (1 attempts remaining)\r\npc_0 - Detected invalid AppCheck token. Reconnecting (0 attempts remaining)\r\n\r\npc_0 - Firebase Database connection was forcefully killed by the server. Will not attempt reconnect. Reason: Invalid appcheck token\r\n```\r\n\r\nI have followed all the steps exactly as mentioned in [this](https://firebase.google.com/docs/app-check/android/play-integrity-provider) page. My app is already uploaded in **Google play store**, and **Google Play Integrity API** is already enabled in `Google cloud console`. What more do I need to do? Please help me.","title":"Google play integrity API - Invalid app check token error after adding app to Firebase project","body":"<p>I am trying to implement <code>firebase app check</code> in my android app using <code>Play-Integrity API</code>. I have added both my <strong>SHA-1</strong> &amp; <strong>SHA-256</strong> fingerprints in my firebase app (acquired from <code>Google play console</code> and <code>Android studio gradle signing report</code> both) into my firebase app.</p>\n<p>I have added this code inside all my activities in my app, before using any other <code>Firebase SDKs</code>:</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    FirebaseApp.initializeApp(this);\n    FirebaseAppCheck firebaseAppCheck = FirebaseAppCheck.getInstance();\n    firebaseAppCheck.installAppCheckProviderFactory(PlayIntegrityAppCheckProviderFactory.getInstance());\n}\n</code></pre>\n<hr />\n<p>Now no matter how many times I run my app, I keep getting the error in my console:</p>\n<pre><code>pc_0 - Detected invalid AppCheck token. Reconnecting (2 attempts remaining)\npc_0 - Detected invalid AppCheck token. Reconnecting (1 attempts remaining)\npc_0 - Detected invalid AppCheck token. Reconnecting (0 attempts remaining)\n\npc_0 - Firebase Database connection was forcefully killed by the server. Will not attempt reconnect. Reason: Invalid appcheck token\n</code></pre>\n<p>I have followed all the steps exactly as mentioned in <a href=\"https://firebase.google.com/docs/app-check/android/play-integrity-provider\" rel=\"nofollow noreferrer\">this</a> page. My app is already uploaded in <strong>Google play store</strong>, and <strong>Google Play Integrity API</strong> is already enabled in <code>Google cloud console</code>. What more do I need to do? Please help me.</p>\n"},{"tags":["java","selenium-webdriver","logging","automation","log4j"],"comments":[{"owner":{"account_id":16914462,"reputation":585,"user_id":12232795,"display_name":"Sooraj"},"score":0,"creation_date":1575293016,"post_id":59138909,"comment_id":104506412,"body_markdown":"It looks fine, and it should work if you have placed the log4j.properties file under test/resources path. What is &quot;devpinoyLogger&quot; and what are you logging? Please add those lines as well, so that it would help to get the proper solution.","body":"It looks fine, and it should work if you have placed the log4j.properties file under test/resources path. What is &quot;devpinoyLogger&quot; and what are you logging? Please add those lines as well, so that it would help to get the proper solution."},{"owner":{"account_id":461547,"reputation":3094,"user_id":863311,"accept_rate":62,"display_name":"Simon"},"score":0,"creation_date":1575300942,"post_id":59138909,"comment_id":104510739,"body_markdown":"Just want to make sure we&#39;re not misunderstanding something: What are you expecting to see in the logfile? Is there a log-Statement in Set_Driver  that&#39;s not showing up? If yes, could you post that","body":"Just want to make sure we&#39;re not misunderstanding something: What are you expecting to see in the logfile? Is there a log-Statement in Set_Driver  that&#39;s not showing up? If yes, could you post that"},{"owner":{"account_id":17220853,"reputation":21,"user_id":12467658,"display_name":"Rohit Gupta"},"score":0,"creation_date":1575355816,"post_id":59138909,"comment_id":104528102,"body_markdown":"@SoorajSathianandan I want logging application logs so after automation complete, I can easily share log file with the developer so it easy debugs any issue.","body":"@SoorajSathianandan I want logging application logs so after automation complete, I can easily share log file with the developer so it easy debugs any issue."},{"owner":{"account_id":17220853,"reputation":21,"user_id":12467658,"display_name":"Rohit Gupta"},"score":0,"creation_date":1575357412,"post_id":59138909,"comment_id":104528721,"body_markdown":"@Simon what is log-statement? I just want logs all type log when automation running.","body":"@Simon what is log-statement? I just want logs all type log when automation running."},{"owner":{"account_id":17220853,"reputation":21,"user_id":12467658,"display_name":"Rohit Gupta"},"score":0,"creation_date":1575357890,"post_id":59138909,"comment_id":104528910,"body_markdown":"It print only some error :\n\n03/12/2019 12:54:03 DEBUG Set_Driver:36 - Start website admitkard\n03/12/2019 12:54:24 DEBUG cache:45 - Couldn&#39;t find template in cache for &quot;v3html/v3-html-index.ftl&quot;(&quot;en&quot;, UTF-8, parsed); will try to load it.","body":"It print only some error :  03/12/2019 12:54:03 DEBUG Set_Driver:36 - Start website admitkard 03/12/2019 12:54:24 DEBUG cache:45 - Couldn&#39;t find template in cache for &quot;v3html/v3-html-index.ftl&quot;(&quot;en&quot;, UTF-8, parsed); will try to load it."},{"owner":{"account_id":16914462,"reputation":585,"user_id":12232795,"display_name":"Sooraj"},"score":0,"creation_date":1575364462,"post_id":59138909,"comment_id":104531712,"body_markdown":"@rohit, I tried with your log4j.properties, maven dependency and the Logger from your Driver class. It is working fine and it is logging properly. Just to make sure, are you logging each steps like _log.info(&quot;App is initialized&quot;)_, _log.fatal(&quot;App is not initialized: &quot;)_","body":"@rohit, I tried with your log4j.properties, maven dependency and the Logger from your Driver class. It is working fine and it is logging properly. Just to make sure, are you logging each steps like <i>log.info(&quot;App is initialized&quot;)</i>, <i>log.fatal(&quot;App is not initialized: &quot;)</i>"},{"owner":{"account_id":17220853,"reputation":21,"user_id":12467658,"display_name":"Rohit Gupta"},"score":0,"creation_date":1575365032,"post_id":59138909,"comment_id":104532045,"body_markdown":"@SoorajSathianandan log4j using for logged two type logs. 1. manual log and 2. application log, so manual log working fine but I want to log application log.","body":"@SoorajSathianandan log4j using for logged two type logs. 1. manual log and 2. application log, so manual log working fine but I want to log application log."},{"owner":{"account_id":16914462,"reputation":585,"user_id":12232795,"display_name":"Sooraj"},"score":0,"creation_date":1575365405,"post_id":59138909,"comment_id":104532284,"body_markdown":"@rohit, If you are logging the steps correctly, then it should work for both Selenium.log and Application.log. And you are not providing the answers for the questions I&#39;m asking in comments which won&#39;t help.","body":"@rohit, If you are logging the steps correctly, then it should work for both Selenium.log and Application.log. And you are not providing the answers for the questions I&#39;m asking in comments which won&#39;t help."},{"owner":{"account_id":17220853,"reputation":21,"user_id":12467658,"display_name":"Rohit Gupta"},"score":0,"creation_date":1575369152,"post_id":59138909,"comment_id":104534394,"body_markdown":"@SoorajSathianandan &quot;devpinoyLogeer&quot; by mistake. I used     &quot;public static Logger log = Logger.getLogger(Set_Driver.class);&quot; in Set_Driver file. and I want to log all type logs like which Http connection, application workflow","body":"@SoorajSathianandan &quot;devpinoyLogeer&quot; by mistake. I used     &quot;public static Logger log = Logger.getLogger(Set_Driver.class);&quot; in Set_Driver file. and I want to log all type logs like which Http connection, application workflow"}],"answers":[{"comments":[{"owner":{"account_id":17220853,"reputation":21,"user_id":12467658,"display_name":"Rohit Gupta"},"score":0,"creation_date":1575356838,"post_id":59139999,"comment_id":104528500,"body_markdown":"where we pass log4j file in the application?","body":"where we pass log4j file in the application?"},{"owner":{"account_id":5672693,"reputation":305,"user_id":4486886,"display_name":"Dayananda"},"score":0,"creation_date":1581797571,"post_id":59139999,"comment_id":106558567,"body_markdown":"@RohitGupta Did you find the solution for this ? I am observing same issue. Kindly let me know what the issue was and how you resolved. it will help me also .","body":"@RohitGupta Did you find the solution for this ? I am observing same issue. Kindly let me know what the issue was and how you resolved. it will help me also ."}],"tags":[],"owner":{"account_id":15960338,"reputation":117,"user_id":11517600,"display_name":"Sunny Patel"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575293494,"creation_date":1575293494,"answer_id":59139999,"question_id":59138909,"body_markdown":"How are you passing in the log4j file to the application? Maybe you need to specify it as `file:/home/usr/log4j.properties` (note the **file**)","title":"log4j not printing logs in selenium","body":"<p>How are you passing in the log4j file to the application? Maybe you need to specify it as <code>file:/home/usr/log4j.properties</code> (note the <strong>file</strong>)</p>\n"},{"comments":[{"owner":{"account_id":6783365,"reputation":5546,"user_id":5222902,"accept_rate":100,"display_name":"AVI"},"score":0,"creation_date":1624759613,"post_id":60243203,"comment_id":120444184,"body_markdown":"i reduced the org.seleniumhq.selenium version from 3.141.59 to 2.53.1 still doesn&#39;t work :/","body":"i reduced the org.seleniumhq.selenium version from 3.141.59 to 2.53.1 still doesn&#39;t work :/"}],"tags":[],"owner":{"account_id":5672693,"reputation":305,"user_id":4486886,"display_name":"Dayananda"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581801287,"creation_date":1581801287,"answer_id":60243203,"question_id":59138909,"body_markdown":"So I just faced this Issue. On replacing the selenium dependency from **3.141.59** to **2.53.1** the logs started appearing again.\r\n\r\nThe selenium version 3 is not compatible with log4j I guess. Still not sure, But It sure did consume a lot of time on figuring this out.","title":"log4j not printing logs in selenium","body":"<p>So I just faced this Issue. On replacing the selenium dependency from <strong>3.141.59</strong> to <strong>2.53.1</strong> the logs started appearing again.</p>\n\n<p>The selenium version 3 is not compatible with log4j I guess. Still not sure, But It sure did consume a lot of time on figuring this out.</p>\n"},{"tags":[],"owner":{"account_id":15464431,"reputation":1,"user_id":11156213,"display_name":"Sanket Gajbhiv"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598637579,"creation_date":1598637579,"answer_id":63638814,"question_id":59138909,"body_markdown":"Working fine after changing selenium dependency from 3.141.59 to 2.53.1.\r\nselenium logs are coming with 2.53.1 dependency.","title":"log4j not printing logs in selenium","body":"<p>Working fine after changing selenium dependency from 3.141.59 to 2.53.1.\nselenium logs are coming with 2.53.1 dependency.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1636898506,"post_id":69963691,"comment_id":123675088,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/69963691/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":22130289,"reputation":1,"user_id":16381931,"display_name":"Akash Sharma"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636897996,"creation_date":1636897996,"answer_id":69963691,"question_id":59138909,"body_markdown":"I was also facing the same issue. I had even tried 3.141.59, 3.5.3 and 2.53.1 it didn&#39;t work for me.\r\nAfter changing selenium dependency to 4.0.0 it started working for me.","title":"log4j not printing logs in selenium","body":"<p>I was also facing the same issue. I had even tried 3.141.59, 3.5.3 and 2.53.1 it didn't work for me.\nAfter changing selenium dependency to 4.0.0 it started working for me.</p>\n"},{"tags":[],"owner":{"account_id":27956855,"reputation":1,"user_id":21349518,"display_name":"Sheetal Chaudhari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678447435,"creation_date":1678194742,"answer_id":75662430,"question_id":59138909,"body_markdown":"After Logger class object creation, do use this method, helps you to configure the log4j.properties file   \r\n\r\n    public class Set_Driver {\r\n        public static Logger log = Logger.getLogger(&quot;devpinoyLogger&quot;);\r\n        PropertyConfigurator.configure(&quot;c:\\\\path\\\\log4j.properties&quot;);\r\n    }\r\n\r\n","title":"log4j not printing logs in selenium","body":"<p>After Logger class object creation, do use this method, helps you to configure the log4j.properties file</p>\n<pre><code>public class Set_Driver {\n    public static Logger log = Logger.getLogger(&quot;devpinoyLogger&quot;);\n    PropertyConfigurator.configure(&quot;c:\\\\path\\\\log4j.properties&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":17220853,"reputation":21,"user_id":12467658,"display_name":"Rohit Gupta"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2243,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1678447435,"creation_date":1575289582,"question_id":59138909,"body_markdown":"I try to logging automation log using log4j. logs file created but logs not print in log file\r\n\r\nlog4j.properties File  \r\n\r\n    #Root logger option\r\n    log4j.rootLogger=debug, file\r\n    log4j.appender.file=org.apache.log4j.RollingFileAppender\r\n    log4j.appender.file.File=/home/rohit/akd_e2e/src/test/resources/Logs/Selenium.log\r\n    log4j.appender.file.maxFileSize=5000KB\r\n    log4j.appender.file.maxBackupIndex=1\r\n    log4j.appender.file.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.file.layout.ConversionPattern=%d{dd/MM/yyyy HH:mm:ss} %5p %c{1}:%L - %m%n\r\n    #do not append the old file. Create a new log file everytime\r\n    log4j.appender.file.Append=false\r\n    \r\n    \r\n    #Application Logs\r\n    log4j.logger.devpinoyLogger=DEBUG, dest1\r\n    log4j.appender.dest1=org.apache.log4j.RollingFileAppender\r\n    log4j.appender.dest1.maxFileSize=5000KB\r\n    log4j.appender.dest1.maxBackupIndex=3\r\n    log4j.appender.dest1.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.dest1.layout.ConversionPattern=%d{dd/MM/yyyy HH:mm:ss} %c %m%n\r\n    log4j.appender.dest1.File=/home/rohit/akd_e2e/src/test/resources/Logs/Application.log\r\n    #do not append the old file. Create a new log file everytime\r\n    log4j.appender.dest1.Append=false\r\n\r\n\r\nSet Driver file\r\n\r\n    import org.apache.log4j.Logger;\r\n    \r\n    \r\n    public class Set_Driver {\r\n    public static Logger log = Logger.getLogger(&quot;devpinoyLogger&quot;);\r\n\r\npom.xml where I add dependencies of log4j\r\n\r\n        &lt;dependencies&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.17&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n    &lt;/project&gt;","title":"log4j not printing logs in selenium","body":"<p>I try to logging automation log using log4j. logs file created but logs not print in log file</p>\n\n<p>log4j.properties File  </p>\n\n<pre><code>#Root logger option\nlog4j.rootLogger=debug, file\nlog4j.appender.file=org.apache.log4j.RollingFileAppender\nlog4j.appender.file.File=/home/rohit/akd_e2e/src/test/resources/Logs/Selenium.log\nlog4j.appender.file.maxFileSize=5000KB\nlog4j.appender.file.maxBackupIndex=1\nlog4j.appender.file.layout=org.apache.log4j.PatternLayout\nlog4j.appender.file.layout.ConversionPattern=%d{dd/MM/yyyy HH:mm:ss} %5p %c{1}:%L - %m%n\n#do not append the old file. Create a new log file everytime\nlog4j.appender.file.Append=false\n\n\n#Application Logs\nlog4j.logger.devpinoyLogger=DEBUG, dest1\nlog4j.appender.dest1=org.apache.log4j.RollingFileAppender\nlog4j.appender.dest1.maxFileSize=5000KB\nlog4j.appender.dest1.maxBackupIndex=3\nlog4j.appender.dest1.layout=org.apache.log4j.PatternLayout\nlog4j.appender.dest1.layout.ConversionPattern=%d{dd/MM/yyyy HH:mm:ss} %c %m%n\nlog4j.appender.dest1.File=/home/rohit/akd_e2e/src/test/resources/Logs/Application.log\n#do not append the old file. Create a new log file everytime\nlog4j.appender.dest1.Append=false\n</code></pre>\n\n<p>Set Driver file</p>\n\n<pre><code>import org.apache.log4j.Logger;\n\n\npublic class Set_Driver {\npublic static Logger log = Logger.getLogger(\"devpinoyLogger\");\n</code></pre>\n\n<p>pom.xml where I add dependencies of log4j</p>\n\n<pre><code>    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","class","oop","scope"],"comments":[{"owner":{"account_id":3529067,"reputation":1647,"user_id":2949230,"accept_rate":83,"display_name":"Angel Cuenca"},"score":0,"creation_date":1503081454,"post_id":45763037,"comment_id":78484204,"body_markdown":"Why not upload images of code https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question","body":"Why not upload images of code <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question\" title=\"why not upload images of code on so when asking a question\">meta.stackoverflow.com/questions/285551/&hellip;</a>"},{"owner":{"account_id":7538846,"reputation":85,"user_id":8903677,"accept_rate":100,"display_name":"matematika"},"score":0,"creation_date":1503081581,"post_id":45763037,"comment_id":78484253,"body_markdown":"Sorry, I&#39;ll correct that!","body":"Sorry, I&#39;ll correct that!"},{"owner":{"account_id":175154,"reputation":65064,"user_id":404970,"display_name":"molbdnilo"},"score":0,"creation_date":1503082099,"post_id":45763037,"comment_id":78484490,"body_markdown":"Different variables with the same name have no connection to each other, although they may have the same value. Read about the concept of scope in your favourite book.","body":"Different variables with the same name have no connection to each other, although they may have the same value. Read about the concept of scope in your favourite book."}],"answers":[{"comments":[{"owner":{"account_id":7538846,"reputation":85,"user_id":8903677,"accept_rate":100,"display_name":"matematika"},"score":0,"creation_date":1503082490,"post_id":45763324,"comment_id":78484697,"body_markdown":"Would you use it in the same way (create new Scanner, too)?","body":"Would you use it in the same way (create new Scanner, too)?"},{"owner":{"account_id":2681994,"reputation":409,"user_id":2317187,"accept_rate":100,"display_name":"jthort"},"score":0,"creation_date":1503082545,"post_id":45763324,"comment_id":78484721,"body_markdown":"If you needed another instance of Scanner, you would create a new instance using Scanner input = new Scanner()","body":"If you needed another instance of Scanner, you would create a new instance using Scanner input = new Scanner()"},{"owner":{"account_id":7538846,"reputation":85,"user_id":8903677,"accept_rate":100,"display_name":"matematika"},"score":0,"creation_date":1503082588,"post_id":45763324,"comment_id":78484749,"body_markdown":"Thank you, I got that part!","body":"Thank you, I got that part!"}],"tags":[],"owner":{"account_id":2681994,"reputation":409,"user_id":2317187,"accept_rate":100,"display_name":"jthort"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1503082388,"creation_date":1503082388,"answer_id":45763324,"question_id":45763037,"body_markdown":"Scanner just like any other object, can be passed by reference into another method/class and still be used.\r\n\r\nA different instance of the scanner class can be created and also used.\r\n\r\nYou would use Scanner in whichever class you needed it in. If you create a new instance of the object, it will not be connected with the other instance. This question isn&#39;t specific to Scanner, but as java Objects in general.","title":"OOP questions, i.e. where to put the separate classes?","body":"<p>Scanner just like any other object, can be passed by reference into another method/class and still be used.</p>\n\n<p>A different instance of the scanner class can be created and also used.</p>\n\n<p>You would use Scanner in whichever class you needed it in. If you create a new instance of the object, it will not be connected with the other instance. This question isn't specific to Scanner, but as java Objects in general.</p>\n"},{"tags":[],"owner":{"account_id":9489110,"reputation":2186,"user_id":7054574,"display_name":"Anddo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1503082602,"creation_date":1503082602,"answer_id":45763380,"question_id":45763037,"body_markdown":"&gt; Would you create the separate class and the program itself in separate\r\n&gt; .java files or the same*?\r\n\r\n[Every class in Java should be in its own file][1] but you **can** create more than one class in one file. For example\r\n\r\n    class A{\r\n    \tpublic A(){\r\n    \t\tSystem.out.println(&quot;A created&quot;);\r\n    \t}\r\n    }\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tA x = new A();\r\n    \t}\r\n    }\r\n\r\n&gt; Can you use Scanner within the separate class, or should you use it in\r\n&gt; main() method? If so, how?\r\n\r\nDepending on your application. Many would prefer organization and separation as much as possible so the top advice is to make it in its own class. But for very simple samples and applications I just throw it in the `main()` method or if I would use only once in any method. Scanner is class on its own so if you will create another class just to wrap it only alone, it really not worth it at all.\r\n\r\nYou can create Scanner as member variable of any class and use it if there are some methods you would use with it.\r\n\r\nThese just some ideas, totally depends on your design, application behavior and personal recommendation\r\n\r\nAs for how, here is an example\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            System.out.println(&quot;Enter a number&quot;);\r\n            int number = sc.nextInt();\r\n            System.out.println(&quot;You entered number &quot; + number);\r\n        }\r\n    }\r\n\r\n&gt; Suppose you have to use Scanner in main() method, and you declared a\r\n&gt; new variable input and initialized it as the Scanner input. How would\r\n&gt; you set that as one of the variables in the separate class? Would you\r\n&gt; make a new object and do...\r\n\r\nYes I would make new object of that class and initialize its members with the input value. Or i put the Scanner inside the class to ask about radius of every object created with constructor with no parameters. There are many different approaches and no right or wrong about any of them. Just avoid duplication and dependency as much as possible.\r\n\r\nHere is your code edited with example of doing such that\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class TestSimpleCircle {\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tSystem.out.println(&quot;Enter radius of your choice please&quot;);\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \r\n    \t\tSimpleCircle circle1 = new SimpleCircle(sc.nextInt()); // taking the radius as input\r\n    \r\n    \t\tSystem.out.println(&quot;The area of the circle of radius &quot; + circle1.radius + &quot; is &quot; + circle1.getArea());\r\n    \r\n    \t\t// Create a circle with radius 25\r\n    \t\tSimpleCircle circle2 = new SimpleCircle(25);\r\n    \t\tSystem.out.println(&quot;The area of the circle of radius &quot; + circle2.radius + &quot; is &quot; + circle2.getArea());\r\n    \r\n    \t\t// Create a circle with radius 125\r\n    \t\tSimpleCircle circle3 = new SimpleCircle(125);\r\n    \t\tSystem.out.println(&quot;The area of the circle of radius &quot; + circle3.radius + &quot; is &quot; + circle3.getArea());\r\n    \r\n    \t\t// Modify circle radius\r\n    \t\tcircle2.radius = 100;\r\n    \t\tSystem.out.println(&quot;The area of the circle of radius &quot; + circle2.radius + &quot; is &quot; + circle2.getArea());\r\n    \r\n    \t}\r\n    }\r\n    \r\n    class SimpleCircle {\r\n    \tdouble radius;\r\n    \r\n    \tSimpleCircle() {\r\n    \t\tradius = 1;\r\n    \t}\r\n    \r\n    \tSimpleCircle(double newRadius) {\r\n    \t\tradius = newRadius;\r\n    \t}\r\n    \r\n    \tdouble getArea() {\r\n    \t\treturn radius * radius * Math.PI;\r\n    \t}\r\n    \r\n    \tdouble getPerimeter() {\r\n    \t\treturn 2 * radius * Math.PI;\r\n    \t}\r\n    \r\n    \tvoid setRadius(double newRadius) {\r\n    \t\tradius = newRadius;\r\n    \t}\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/968347/can-a-java-file-have-more-than-one-class","title":"OOP questions, i.e. where to put the separate classes?","body":"<blockquote>\n  <p>Would you create the separate class and the program itself in separate\n  .java files or the same*?</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/968347/can-a-java-file-have-more-than-one-class\">Every class in Java should be in its own file</a> but you <strong>can</strong> create more than one class in one file. For example</p>\n\n<pre><code>class A{\n    public A(){\n        System.out.println(\"A created\");\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        A x = new A();\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Can you use Scanner within the separate class, or should you use it in\n  main() method? If so, how?</p>\n</blockquote>\n\n<p>Depending on your application. Many would prefer organization and separation as much as possible so the top advice is to make it in its own class. But for very simple samples and applications I just throw it in the <code>main()</code> method or if I would use only once in any method. Scanner is class on its own so if you will create another class just to wrap it only alone, it really not worth it at all.</p>\n\n<p>You can create Scanner as member variable of any class and use it if there are some methods you would use with it.</p>\n\n<p>These just some ideas, totally depends on your design, application behavior and personal recommendation</p>\n\n<p>As for how, here is an example</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(\"Enter a number\");\n        int number = sc.nextInt();\n        System.out.println(\"You entered number \" + number);\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Suppose you have to use Scanner in main() method, and you declared a\n  new variable input and initialized it as the Scanner input. How would\n  you set that as one of the variables in the separate class? Would you\n  make a new object and do...</p>\n</blockquote>\n\n<p>Yes I would make new object of that class and initialize its members with the input value. Or i put the Scanner inside the class to ask about radius of every object created with constructor with no parameters. There are many different approaches and no right or wrong about any of them. Just avoid duplication and dependency as much as possible.</p>\n\n<p>Here is your code edited with example of doing such that</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class TestSimpleCircle {\n    public static void main(String[] args) {\n\n        System.out.println(\"Enter radius of your choice please\");\n        Scanner sc = new Scanner(System.in);\n\n        SimpleCircle circle1 = new SimpleCircle(sc.nextInt()); // taking the radius as input\n\n        System.out.println(\"The area of the circle of radius \" + circle1.radius + \" is \" + circle1.getArea());\n\n        // Create a circle with radius 25\n        SimpleCircle circle2 = new SimpleCircle(25);\n        System.out.println(\"The area of the circle of radius \" + circle2.radius + \" is \" + circle2.getArea());\n\n        // Create a circle with radius 125\n        SimpleCircle circle3 = new SimpleCircle(125);\n        System.out.println(\"The area of the circle of radius \" + circle3.radius + \" is \" + circle3.getArea());\n\n        // Modify circle radius\n        circle2.radius = 100;\n        System.out.println(\"The area of the circle of radius \" + circle2.radius + \" is \" + circle2.getArea());\n\n    }\n}\n\nclass SimpleCircle {\n    double radius;\n\n    SimpleCircle() {\n        radius = 1;\n    }\n\n    SimpleCircle(double newRadius) {\n        radius = newRadius;\n    }\n\n    double getArea() {\n        return radius * radius * Math.PI;\n    }\n\n    double getPerimeter() {\n        return 2 * radius * Math.PI;\n    }\n\n    void setRadius(double newRadius) {\n        radius = newRadius;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9286286,"reputation":408,"user_id":6896067,"display_name":"Alexey Rykhalskiy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503087485,"creation_date":1503082728,"answer_id":45763406,"question_id":45763037,"body_markdown":"One class - one file. No exception. This will save a huge time when maintain product in future.\r\n\r\n    class SimpleCircle {\r\n        // be private - accessible only inside class\r\n        // be final - assign only in constructor\r\n        private final double radius;\r\n    \r\n        SimpleCircle(double newRadius) {\r\n            radius = newRadius;\r\n        }\r\n    \r\n        double area() {\r\n            return radius * radius * Math.PI;\r\n        }\r\n    \r\n        double perimeter() {\r\n            return 2 * radius * Math.PI;\r\n        }\r\n    }\r\n\r\ntry to avoid Constructors with useless assignments (what sense default `radius=1` if you youse Constructor without parameters). Try to avoid change class state via setters. Create new objects with new state (radius).\r\n\r\nTry to call methods nouns, that reflect the returned entity\r\n\r\nTry to name void methods verbs, that reflect object behavior.\r\n\r\nNow about Scanner.\r\n\r\ntry to use this idea/template\r\n\r\n    public class MyClass {\r\n        private final Scanner scanner;\r\n    \r\n        public MyClass(Scanner scanner) {\r\n            this.scanner = scanner;\r\n        }\r\n    \r\n        public void any_work() {\r\n            ...\r\n            int readed = scanner.nextInt();\r\n            ...\r\n        }\r\n    }\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            ...\r\n            MyClass myClass = new MyClass(new Scanner(System.in));\r\n            ...\r\n            myClass.any_work();\r\n            ...\r\n        }\r\n    }\r\n\r\n&gt; When you create variables in a separate class, are they in any way\r\n&gt; connected to variables with the same name in the main() method or a\r\n&gt; different class?\r\n\r\nOnly one way. by method or constructor parameters. See previous code with `Main`/`MyClass`.","title":"OOP questions, i.e. where to put the separate classes?","body":"<p>One class - one file. No exception. This will save a huge time when maintain product in future.</p>\n\n<pre><code>class SimpleCircle {\n    // be private - accessible only inside class\n    // be final - assign only in constructor\n    private final double radius;\n\n    SimpleCircle(double newRadius) {\n        radius = newRadius;\n    }\n\n    double area() {\n        return radius * radius * Math.PI;\n    }\n\n    double perimeter() {\n        return 2 * radius * Math.PI;\n    }\n}\n</code></pre>\n\n<p>try to avoid Constructors with useless assignments (what sense default <code>radius=1</code> if you youse Constructor without parameters). Try to avoid change class state via setters. Create new objects with new state (radius).</p>\n\n<p>Try to call methods nouns, that reflect the returned entity</p>\n\n<p>Try to name void methods verbs, that reflect object behavior.</p>\n\n<p>Now about Scanner.</p>\n\n<p>try to use this idea/template</p>\n\n<pre><code>public class MyClass {\n    private final Scanner scanner;\n\n    public MyClass(Scanner scanner) {\n        this.scanner = scanner;\n    }\n\n    public void any_work() {\n        ...\n        int readed = scanner.nextInt();\n        ...\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        ...\n        MyClass myClass = new MyClass(new Scanner(System.in));\n        ...\n        myClass.any_work();\n        ...\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>When you create variables in a separate class, are they in any way\n  connected to variables with the same name in the main() method or a\n  different class?</p>\n</blockquote>\n\n<p>Only one way. by method or constructor parameters. See previous code with <code>Main</code>/<code>MyClass</code>.</p>\n"},{"tags":[],"owner":{"account_id":11581418,"reputation":157,"user_id":8485201,"display_name":"Namrata Shukla"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1503083554,"creation_date":1503083554,"answer_id":45763613,"question_id":45763037,"body_markdown":"For the 1st question. yes,you can create different classes in the same java file,\r\nafter compilation of the java file, separate .class files will be created for each class that you have defined.\r\n\r\ni would like to mention that you can save your java file by any name and then compile it.but if any class is declared as public (as in the above example **public class filename**) then the java file should have the same name as that of the public class.\r\n\r\nOn not doing so.You will get compile time error saying: \r\n *class filename is public ,should be declared in a file named* **filename**.\r\n\r\nHope this helps you a little...","title":"OOP questions, i.e. where to put the separate classes?","body":"<p>For the 1st question. yes,you can create different classes in the same java file,\nafter compilation of the java file, separate .class files will be created for each class that you have defined.</p>\n\n<p>i would like to mention that you can save your java file by any name and then compile it.but if any class is declared as public (as in the above example <strong>public class filename</strong>) then the java file should have the same name as that of the public class.</p>\n\n<p>On not doing so.You will get compile time error saying: \n <em>class filename is public ,should be declared in a file named</em> <strong>filename</strong>.</p>\n\n<p>Hope this helps you a little...</p>\n"}],"owner":{"account_id":7538846,"reputation":85,"user_id":8903677,"accept_rate":100,"display_name":"matematika"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3225,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":45763380,"answer_count":4,"score":3,"last_activity_date":1678447289,"creation_date":1503081295,"question_id":45763037,"body_markdown":"I am working on using separate classes in a Object-Oriented Programming program.  \r\n\r\n 1. Would you create the separate class and the program itself in separate .java files or the same?\r\n\r\nAs in:\r\n\r\n    public class filename {\r\n        // ... content\r\n    }\r\n    \r\n    class name {\r\n    \r\n    }\r\n\r\n2. Can you use the Scanner within the separate class, or should you use it in the main() method?  \r\nIf so, how? \r\n\r\n3. Suppose you have to use the Scanner in the main() method, and you declared a new variable input and initialized it as the Scanner input.  \r\nHow would you set that as one of the variables in the separate class? Would you make a new object and do.\r\n\r\nExample:\r\n\r\n    public class TestSimpleCircle {\r\n    \tpublic static void main(String[] args {\r\n    \tSimpleCircle circle1 = new SimpleCircle();\r\n    \tSystem.out.println(&quot;The area of the circle of radius &quot; + circle1.radius + &quot; is &quot;  + circle1.getArea());\r\n    \r\n    \t// Create a circle with radius 25\r\n    \tSimpleCircle circle2 = new SimpleCircle(25); \t\tSystem.out.println(&quot;The area of the circle of radius &quot; + circle2.radius + &quot; is &quot; + circle2.getArea());\r\n    \r\n    \t// Create a circle with radius 125\r\n    \tSimpleCircle circle3 = new SimpleCircle(125); \t\tSystem.out.println(&quot;The area of the circle of radius &quot; + circle3.radius + &quot; is &quot; + circle3.getArea());\r\n    \r\n    \t// Modify circle radius\r\n    \tcircle2.radius = 100; // or circle2.setRadius(100) \tSystem.out.println(&quot;The area of the circle of radius &quot; + circle2.radius + &quot; is &quot; + circle2.getArea());\r\n    \t}\r\n    }\r\n    \r\n    class SimpleCircle {\r\n    \tdouble radius;\r\n    \r\n    \tSimpleCircle() {\r\n    \t\tradius = 1;\r\n    \t}\r\n    \r\n    \tSimpleCircle(double newRadius) {\r\n    \t\tradius = newRadius;\r\n    \t}\r\n    \r\n    \tdouble getArea() {\r\n    \t\treturn radius * radius * Math.PI;\r\n    \t}\r\n    \r\n    \tdouble getPerimeter() {\r\n    \t\treturn 2 * radius * Math.PI;\r\n    \t}\r\n    \r\n    \tvoid setRadius(double newRadius) {\r\n    \t\tradius = newRadius;\r\n    \t}\r\n    }\r\n\r\n...that (e.g. circle1.getArea())?\r\n\r\n4. When you create variables in a separate class, are they in any way connected to variables with the same name in the main() method or a different class?","title":"OOP questions, i.e. where to put the separate classes?","body":"<p>I am working on using separate classes in a Object-Oriented Programming program.</p>\n<ol>\n<li>Would you create the separate class and the program itself in separate .java files or the same?</li>\n</ol>\n<p>As in:</p>\n<pre><code>public class filename {\n    // ... content\n}\n\nclass name {\n\n}\n</code></pre>\n<ol start=\"2\">\n<li><p>Can you use the Scanner within the separate class, or should you use it in the main() method?<br />\nIf so, how?</p>\n</li>\n<li><p>Suppose you have to use the Scanner in the main() method, and you declared a new variable input and initialized it as the Scanner input.<br />\nHow would you set that as one of the variables in the separate class? Would you make a new object and do.</p>\n</li>\n</ol>\n<p>Example:</p>\n<pre><code>public class TestSimpleCircle {\n    public static void main(String[] args {\n    SimpleCircle circle1 = new SimpleCircle();\n    System.out.println(&quot;The area of the circle of radius &quot; + circle1.radius + &quot; is &quot;  + circle1.getArea());\n\n    // Create a circle with radius 25\n    SimpleCircle circle2 = new SimpleCircle(25);        System.out.println(&quot;The area of the circle of radius &quot; + circle2.radius + &quot; is &quot; + circle2.getArea());\n\n    // Create a circle with radius 125\n    SimpleCircle circle3 = new SimpleCircle(125);       System.out.println(&quot;The area of the circle of radius &quot; + circle3.radius + &quot; is &quot; + circle3.getArea());\n\n    // Modify circle radius\n    circle2.radius = 100; // or circle2.setRadius(100)  System.out.println(&quot;The area of the circle of radius &quot; + circle2.radius + &quot; is &quot; + circle2.getArea());\n    }\n}\n\nclass SimpleCircle {\n    double radius;\n\n    SimpleCircle() {\n        radius = 1;\n    }\n\n    SimpleCircle(double newRadius) {\n        radius = newRadius;\n    }\n\n    double getArea() {\n        return radius * radius * Math.PI;\n    }\n\n    double getPerimeter() {\n        return 2 * radius * Math.PI;\n    }\n\n    void setRadius(double newRadius) {\n        radius = newRadius;\n    }\n}\n</code></pre>\n<p>...that (e.g. circle1.getArea())?</p>\n<ol start=\"4\">\n<li>When you create variables in a separate class, are they in any way connected to variables with the same name in the main() method or a different class?</li>\n</ol>\n"},{"tags":["java","selenium-webdriver","electron","winappdriver"],"owner":{"account_id":18757976,"reputation":21,"user_id":13677526,"display_name":"sowmiya abi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678446924,"creation_date":1678446924,"question_id":75695460,"body_markdown":"Microsoft API source is not loading in pop up of windows or electron application while we click on &quot;Login with Microsoft Account&quot; when automating it. But its working fine while we opening it manually.\r\n\r\nPossible reasons:\r\nSeems source for login page and pop up is different and also it might due to the environment variables in .env file which contains the Microsoft API not gets loaded while automating the application.\r\n\r\nI can&#39;t able to find solutions for above.\r\n\r\nIssue:\r\n\r\n1.Once application gets launched, Login button will be available\r\n\r\n[![enter image description here][1]][1]\r\n\r\n2.When we click on &quot;Login with Microsoft account&quot;, we will get pop up with Microsoft account or login page to enter an account.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n3.But, while launching the application via automation, this source not getting loaded.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9rJsK.png\r\n  [2]: https://i.stack.imgur.com/QcMqT.png\r\n  [3]: https://i.stack.imgur.com/4RTLd.png","title":"Microsoft API source is not loading in pop up when we click on &quot;Login with Microsoft Account&quot; of windows or electron application while automating it","body":"<p>Microsoft API source is not loading in pop up of windows or electron application while we click on &quot;Login with Microsoft Account&quot; when automating it. But its working fine while we opening it manually.</p>\n<p>Possible reasons:\nSeems source for login page and pop up is different and also it might due to the environment variables in .env file which contains the Microsoft API not gets loaded while automating the application.</p>\n<p>I can't able to find solutions for above.</p>\n<p>Issue:</p>\n<p>1.Once application gets launched, Login button will be available</p>\n<p><a href=\"https://i.stack.imgur.com/9rJsK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9rJsK.png\" alt=\"enter image description here\" /></a></p>\n<p>2.When we click on &quot;Login with Microsoft account&quot;, we will get pop up with Microsoft account or login page to enter an account.</p>\n<p><a href=\"https://i.stack.imgur.com/QcMqT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QcMqT.png\" alt=\"enter image description here\" /></a></p>\n<p>3.But, while launching the application via automation, this source not getting loaded.</p>\n<p><a href=\"https://i.stack.imgur.com/4RTLd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4RTLd.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","scope"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":3,"creation_date":1604132151,"post_id":64619712,"comment_id":114258391,"body_markdown":"You don&#39;t have to. You can create a variable with a broader (class) scope, and you&#39;ll be able to use it in both methods (as long as it&#39;s initialized correctly)","body":"You don&#39;t have to. You can create a variable with a broader (class) scope, and you&#39;ll be able to use it in both methods (as long as it&#39;s initialized correctly)"}],"answers":[{"tags":[],"owner":{"account_id":13870433,"reputation":86,"user_id":10013726,"display_name":"Ankur Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604132735,"creation_date":1604132735,"answer_id":64619797,"question_id":64619712,"body_markdown":"You don&#39;t need to!\r\nYou can declare Scanner object at the class level like this,\r\n\r\n    class Test {\r\n        static Scanner j = new Scanner(System.in);\r\n    \r\n        ....\r\n    }","title":"Why declare an object in both main() and in an outside method?","body":"<p>You don't need to!\nYou can declare Scanner object at the class level like this,</p>\n<pre><code>class Test {\n    static Scanner j = new Scanner(System.in);\n\n    ....\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1604137090,"post_id":64620300,"comment_id":114259379,"body_markdown":"The object will not be &quot;destroyed&quot; at the end of the method.","body":"The object will not be &quot;destroyed&quot; at the end of the method."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1604137104,"post_id":64620300,"comment_id":114259383,"body_markdown":"You should instantiate the Constructor class one time, and use the instance in other methods.","body":"You should instantiate the Constructor class one time, and use the instance in other methods."}],"tags":[],"owner":{"account_id":19860900,"reputation":11,"user_id":14549281,"display_name":"Tomas Calaf Marti"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604136904,"creation_date":1604136904,"answer_id":64620300,"question_id":64619712,"body_markdown":"In Java the objects can be created inside methodsor outside and so they are only for that method or for the whole class but I don&#39;t recomend you to do that becouse every time the class is used the method is created even though you&#39;re accesing a method that don&#39;t uses it. Instead, you can declarate it outside the method and it will be accessible for all the methods from the class, but it will have to be created separately inside every method and they will be destroyed in the end of the method. Example:\r\n\r\n    class example{\r\n        Canstructor name;\r\n        public void method1(){\r\n            name = new Constructor();\r\n        }\r\n        public void method2(){\r\n            name = new Constructor();\r\n        }\r\n    }","title":"Why declare an object in both main() and in an outside method?","body":"<p>In Java the objects can be created inside methodsor outside and so they are only for that method or for the whole class but I don't recomend you to do that becouse every time the class is used the method is created even though you're accesing a method that don't uses it. Instead, you can declarate it outside the method and it will be accessible for all the methods from the class, but it will have to be created separately inside every method and they will be destroyed in the end of the method. Example:</p>\n<pre><code>class example{\n    Canstructor name;\n    public void method1(){\n        name = new Constructor();\n    }\n    public void method2(){\n        name = new Constructor();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1604138451,"creation_date":1604138451,"answer_id":64620501,"question_id":64619712,"body_markdown":"&gt; ... why we declare a scanner class object the second time if we want\r\n&gt; to use it in a method outside the main method?\r\n\r\nYou do not have to do it and it is also not a clean way to do it. I would use one of the following ways:\r\n\r\n 1. Declare the `Scanner` object as an instance variable. However, you won&#39;t be able to use it directly inside a `static` method (including `main`) as you can&#39;t access a non-`static` member inside a `static` method directly.  In a `static` method, you will be able to access an instance variable only through the instance of the class e.g.\r\n\r\n        import java.util.Scanner;\r\n        \r\n        public class MyClass {\r\n            Scanner scanner = new Scanner(System.in);\r\n        \r\n            public static void main(String[] args) {\r\n                MyClass obj = new MyClass();\r\n                System.out.print(&quot;Enter a word: &quot;);\r\n                System.out.println(obj.scanner.nextLine());\r\n            }\r\n        \r\n            static void lod() {\r\n                MyClass obj = new MyClass();\r\n                String m = obj.scanner.next();\r\n            }\r\n        }\r\n\r\n 2. Declare the `Scanner` object as a class variable (i.e. static variable at class level) e.g.\r\n\r\n        import java.util.Scanner;\r\n        \r\n        public class MyClass {\r\n            static Scanner scanner = new Scanner(System.in);\r\n        \r\n            public static void main(String[] args) {\r\n                System.out.print(&quot;Enter a word: &quot;);\r\n                System.out.println(scanner.nextLine());\r\n            }\r\n        \r\n            static void lod() {\r\n                String m = scanner.next();\r\n            }\r\n        }\r\n\r\n 3. Pass the `Scanner` object to the methods being called from `main` e.g.\r\n\r\n        import java.util.Scanner;\r\n        \r\n        public class MyClass {\r\n        \tpublic static void main(String[] args) {\r\n        \t\tScanner scanner = new Scanner(System.in);\r\n        \t\tSystem.out.print(&quot;Enter a word: &quot;);\r\n        \t\tSystem.out.println(scanner.nextLine());\r\n        \t}\r\n        \r\n        \tstatic void lod(Scanner scanner) {\r\n        \t\tString m = scanner.next();\r\n        \t}\r\n        }\r\n\r\n","title":"Why declare an object in both main() and in an outside method?","body":"<blockquote>\n<p>... why we declare a scanner class object the second time if we want\nto use it in a method outside the main method?</p>\n</blockquote>\n<p>You do not have to do it and it is also not a clean way to do it. I would use one of the following ways:</p>\n<ol>\n<li><p>Declare the <code>Scanner</code> object as an instance variable. However, you won't be able to use it directly inside a <code>static</code> method (including <code>main</code>) as you can't access a non-<code>static</code> member inside a <code>static</code> method directly.  In a <code>static</code> method, you will be able to access an instance variable only through the instance of the class e.g.</p>\n<pre><code>import java.util.Scanner;\n\npublic class MyClass {\n    Scanner scanner = new Scanner(System.in);\n\n    public static void main(String[] args) {\n        MyClass obj = new MyClass();\n        System.out.print(&quot;Enter a word: &quot;);\n        System.out.println(obj.scanner.nextLine());\n    }\n\n    static void lod() {\n        MyClass obj = new MyClass();\n        String m = obj.scanner.next();\n    }\n}\n</code></pre>\n</li>\n<li><p>Declare the <code>Scanner</code> object as a class variable (i.e. static variable at class level) e.g.</p>\n<pre><code>import java.util.Scanner;\n\npublic class MyClass {\n    static Scanner scanner = new Scanner(System.in);\n\n    public static void main(String[] args) {\n        System.out.print(&quot;Enter a word: &quot;);\n        System.out.println(scanner.nextLine());\n    }\n\n    static void lod() {\n        String m = scanner.next();\n    }\n}\n</code></pre>\n</li>\n<li><p>Pass the <code>Scanner</code> object to the methods being called from <code>main</code> e.g.</p>\n<pre><code>import java.util.Scanner;\n\npublic class MyClass {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.print(&quot;Enter a word: &quot;);\n        System.out.println(scanner.nextLine());\n    }\n\n    static void lod(Scanner scanner) {\n        String m = scanner.next();\n    }\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":19865901,"reputation":21,"user_id":14553176,"display_name":"Prolific"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":751,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1678446601,"creation_date":1604131934,"question_id":64619712,"body_markdown":"Can anyone tell me the reason why we declare a `Scanner` class object a second time if we want to use it in a method outside the main method where it was first declared?  \r\nFor example:\r\n\r\n    public static void main(String[] args) {\r\n        Scanner j = new Scanner(System.in);\r\n        String val = j.next();\r\n    }\r\n\r\n    static void lod() {\r\n        Scanner j = new Scanner(System.in);\r\n        String m = j.next();\r\n    }\r\n\r\nWhy should I declare the `Scanner` class object again before using it in the method lod()?","title":"Why declare an object in both main() and in an outside method?","body":"<p>Can anyone tell me the reason why we declare a <code>Scanner</code> class object a second time if we want to use it in a method outside the main method where it was first declared?<br />\nFor example:</p>\n<pre><code>public static void main(String[] args) {\n    Scanner j = new Scanner(System.in);\n    String val = j.next();\n}\n\nstatic void lod() {\n    Scanner j = new Scanner(System.in);\n    String m = j.next();\n}\n</code></pre>\n<p>Why should I declare the <code>Scanner</code> class object again before using it in the method lod()?</p>\n"},{"tags":["java","amazon-web-services"],"answers":[{"comments":[{"owner":{"account_id":1900514,"reputation":331,"user_id":1716464,"accept_rate":50,"display_name":"Suyash"},"score":0,"creation_date":1513156019,"post_id":47787680,"comment_id":82539355,"body_markdown":"HI Ashan, can u please provide some reference or examples.","body":"HI Ashan, can u please provide some reference or examples."}],"tags":[],"owner":{"account_id":1685845,"reputation":19130,"user_id":1549165,"accept_rate":100,"display_name":"Ashan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513150214,"creation_date":1513150214,"answer_id":47787680,"question_id":47786885,"body_markdown":"Instead of a synchronous flow in your code where you do the compression before upload, you can follow the following approach.\r\n\r\n - Upload the uncompressed image to S3.\r\n - From S3 have a Lambda trigger which will be invoked upon image upload.\r\n - In the Lambda code, download the image to the /tmp directory do the compression there and upload it back to S3.\r\n\r\nThis approach is highly scalable and a pattern used for creating thumbnails of the images &amp; etc. (You should be able to find a Lambda template for Thumbnail creation which you can modify for this)","title":"How to Compress and save image in Amazon server in rest API","body":"<p>Instead of a synchronous flow in your code where you do the compression before upload, you can follow the following approach.</p>\n\n<ul>\n<li>Upload the uncompressed image to S3.</li>\n<li>From S3 have a Lambda trigger which will be invoked upon image upload.</li>\n<li>In the Lambda code, download the image to the /tmp directory do the compression there and upload it back to S3.</li>\n</ul>\n\n<p>This approach is highly scalable and a pattern used for creating thumbnails of the images &amp; etc. (You should be able to find a Lambda template for Thumbnail creation which you can modify for this)</p>\n"}],"owner":{"account_id":1900514,"reputation":331,"user_id":1716464,"accept_rate":50,"display_name":"Suyash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678446599,"creation_date":1513146719,"question_id":47786885,"body_markdown":"I am working on saving compressing and saving image on AWS server. Currently using PutObjectRequest of com.amazonaws.services.s3.model to save the image. I checked online and everywhere following code is used to save image on disk.\r\n\r\n    writer.write(null, new IIOImage(image, null, null), param);\r\nI am confused on how to compress it first and then send the inputstream to save in the server.\r\nhow do i compress the image in rest API and save it in AWS server?\r\n\r\n","title":"How to Compress and save image in Amazon server in rest API","body":"<p>I am working on saving compressing and saving image on AWS server. Currently using PutObjectRequest of com.amazonaws.services.s3.model to save the image. I checked online and everywhere following code is used to save image on disk.</p>\n\n<pre><code>writer.write(null, new IIOImage(image, null, null), param);\n</code></pre>\n\n<p>I am confused on how to compress it first and then send the inputstream to save in the server.\nhow do i compress the image in rest API and save it in AWS server?</p>\n"},{"tags":["java","eclipse","jakarta-ee","weblogic"],"comments":[{"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"score":0,"creation_date":1668033957,"post_id":74381008,"comment_id":131312750,"body_markdown":"Do you have another weblogic domain on your machine using the same port that is already running?","body":"Do you have another weblogic domain on your machine using the same port that is already running?"},{"owner":{"account_id":20669014,"reputation":31,"user_id":15175189,"display_name":"S Mugunthan kumar"},"score":0,"creation_date":1668045806,"post_id":74381008,"comment_id":131314611,"body_markdown":"no I have only one domain","body":"no I have only one domain"},{"owner":{"account_id":3747484,"reputation":3573,"user_id":3115822,"display_name":"Borja"},"score":0,"creation_date":1678451206,"post_id":74381008,"comment_id":133539483,"body_markdown":"Does this answer your question? [The server is invalid. Error occurred reading server credential. If the domain was recreated, the server instance in Eclipse must also be recreated](https://stackoverflow.com/questions/75279875/the-server-is-invalid-error-occurred-reading-server-credential-if-the-domain-w)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75279875/the-server-is-invalid-error-occurred-reading-server-credential-if-the-domain-w\">The server is invalid. Error occurred reading server credential. If the domain was recreated, the server instance in Eclipse must also be recreated</a>"}],"owner":{"account_id":20669014,"reputation":31,"user_id":15175189,"display_name":"S Mugunthan kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":571,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678446347,"creation_date":1668025733,"question_id":74381008,"body_markdown":"I am trying to connect the WebLogic server in the eclipse, but it pop out error,\r\n**The server is invalid. Error occurred reading server credential. If the domain was recreated, the server instance in Eclipse must also be recreated. Required classpath for credential detection is missing. Detection is disabled.** I tried with jdk8,11,17,18 the same error is pops out. What goes wrong unable to find.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uBtyp.png","title":"Unable to connect the Weblogic server in eclipse","body":"<p>I am trying to connect the WebLogic server in the eclipse, but it pop out error,\n<strong>The server is invalid. Error occurred reading server credential. If the domain was recreated, the server instance in Eclipse must also be recreated. Required classpath for credential detection is missing. Detection is disabled.</strong> I tried with jdk8,11,17,18 the same error is pops out. What goes wrong unable to find.</p>\n<p><a href=\"https://i.stack.imgur.com/uBtyp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uBtyp.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","domain-driven-design","hexagonal-architecture"],"comments":[{"owner":{"account_id":24430255,"reputation":88,"user_id":18355295,"display_name":"Stefan Billmaier"},"score":0,"creation_date":1680272507,"post_id":75695363,"comment_id":133875117,"body_markdown":"Basically there&#39;s nothing wrong how you do this. Since `User` is your aggregate, the propagation of saving and deleting the `Comment`s can be &quot;delegated&quot; to JPA/Hibernate. I guess there&#39;s some issue in the mapping of the domain model `User` to the JPA entity `User`. Did you create new instances of the JPA entity of its `Comment`s?","body":"Basically there&#39;s nothing wrong how you do this. Since <code>User</code> is your aggregate, the propagation of saving and deleting the <code>Comment</code>s can be &quot;delegated&quot; to JPA/Hibernate. I guess there&#39;s some issue in the mapping of the domain model <code>User</code> to the JPA entity <code>User</code>. Did you create new instances of the JPA entity of its <code>Comment</code>s?"}],"owner":{"account_id":6322532,"reputation":541,"user_id":4910038,"display_name":"a4dev92"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678446339,"creation_date":1678446339,"question_id":75695363,"body_markdown":"Let&#39;s assume I have a project done with hexagonal architecture together with DDD where my domain objects doesn&#39;t depend on any JPA implementation. Example project structure looks like below:\r\n\r\n**com.example.domain:**\r\n\r\n    class User {\r\n        Integer id;\r\n        String username;\r\n        List &lt; Comment &gt; comments;\r\n    }\r\n    \r\n    class Comment {\r\n        Integer id;\r\n        String title;\r\n    }\r\n\r\n**com.example.infrastructure:**\r\n\r\n    @Table\r\n    class UserEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        Integer id;\r\n        String username;\r\n        @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\r\n        List &lt; CommentEntity &gt; comments;\r\n    }\r\n    \r\n    \r\n    @Table\r\n    class CommentEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        Integer id;\r\n        String title;\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;user_id&quot;)\r\n        User user;\r\n    }\r\n    \r\n    class SqlUserRepository implements UserRepository {\r\n    \r\n        UserCrudRepository springDataUserRepo;\r\n    \r\n        User save(User user) {\r\n            UserEntity userEntity = UserMapper.map(user);\r\n            UserEntity savedEntity = springDataUserRepo.save(user);\r\n            User mappedUser = UserMapper.map(savedEntity);\r\n            return mappedUser;\r\n        }\r\n    \r\n        User findById(Integer userId) {\r\n            UserEntity findByIdEntity = springDataUserRepo.findById(Integer userId);\r\n            User mappedUser = UserMapper.map(findByIdEntity);\r\n            return mappedUser;\r\n        }\r\n    \r\n    }\r\n\r\n**com.example.application:**\r\n\r\n    interface UserRepository {\r\n    \r\n        User save(User user);\r\n        User findById(Integer id);\r\n    \r\n    }\r\n\r\nNow i have these two problems:\r\n\r\n**1. Object creation**\r\n\r\nI can&#39;t create new User and add few comments and save both parent and child objects with only one save() call on parent object. Like sth like below doesn&#39;t work:\r\n\r\n    User user = new User(null,&quot;username&quot;,null);\r\n    Comment c1 = new Comment(null,&quot;title1&quot;, user);\r\n    Comment c2 = new Comment(null,&quot;title2&quot;, user);\r\n    user.setComments(List.of(c1,c2);\r\n    userRepository.save(user);\r\n\r\nit complains that: *Object references an unsaved transient ...*\r\n\r\n**2. Updating the object (like removing one item from the comments list**\r\n\r\nFor example, sth like this doesn&#39;t work:\r\n\r\n    User user = userRepository.findById(1);\r\n    Comment comments = user.getComments();\r\n    List&lt;Comment&gt; commentsMinusOne = comments.remove(0);\r\n    user.setComments(commentsMinusOne);\r\n    userRepository.save(user) //this will not remove one of the comments from db.\r\n\r\n\r\nSo my question is how people deal with these two issues when they do DDD + hexagonal architecture in Spring projects?","title":"Hxagonal architecture and DDD with Hibernate and OneToMany relationship","body":"<p>Let's assume I have a project done with hexagonal architecture together with DDD where my domain objects doesn't depend on any JPA implementation. Example project structure looks like below:</p>\n<p><strong>com.example.domain:</strong></p>\n<pre><code>class User {\n    Integer id;\n    String username;\n    List &lt; Comment &gt; comments;\n}\n\nclass Comment {\n    Integer id;\n    String title;\n}\n</code></pre>\n<p><strong>com.example.infrastructure:</strong></p>\n<pre><code>@Table\nclass UserEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    Integer id;\n    String username;\n    @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\n    List &lt; CommentEntity &gt; comments;\n}\n\n\n@Table\nclass CommentEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    Integer id;\n    String title;\n    @ManyToOne\n    @JoinColumn(name = &quot;user_id&quot;)\n    User user;\n}\n\nclass SqlUserRepository implements UserRepository {\n\n    UserCrudRepository springDataUserRepo;\n\n    User save(User user) {\n        UserEntity userEntity = UserMapper.map(user);\n        UserEntity savedEntity = springDataUserRepo.save(user);\n        User mappedUser = UserMapper.map(savedEntity);\n        return mappedUser;\n    }\n\n    User findById(Integer userId) {\n        UserEntity findByIdEntity = springDataUserRepo.findById(Integer userId);\n        User mappedUser = UserMapper.map(findByIdEntity);\n        return mappedUser;\n    }\n\n}\n</code></pre>\n<p><strong>com.example.application:</strong></p>\n<pre><code>interface UserRepository {\n\n    User save(User user);\n    User findById(Integer id);\n\n}\n</code></pre>\n<p>Now i have these two problems:</p>\n<p><strong>1. Object creation</strong></p>\n<p>I can't create new User and add few comments and save both parent and child objects with only one save() call on parent object. Like sth like below doesn't work:</p>\n<pre><code>User user = new User(null,&quot;username&quot;,null);\nComment c1 = new Comment(null,&quot;title1&quot;, user);\nComment c2 = new Comment(null,&quot;title2&quot;, user);\nuser.setComments(List.of(c1,c2);\nuserRepository.save(user);\n</code></pre>\n<p>it complains that: <em>Object references an unsaved transient ...</em></p>\n<p><strong>2. Updating the object (like removing one item from the comments list</strong></p>\n<p>For example, sth like this doesn't work:</p>\n<pre><code>User user = userRepository.findById(1);\nComment comments = user.getComments();\nList&lt;Comment&gt; commentsMinusOne = comments.remove(0);\nuser.setComments(commentsMinusOne);\nuserRepository.save(user) //this will not remove one of the comments from db.\n</code></pre>\n<p>So my question is how people deal with these two issues when they do DDD + hexagonal architecture in Spring projects?</p>\n"},{"tags":["java","android","authentication","single-sign-on","cas"],"answers":[{"tags":[],"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1391781214,"creation_date":1391781214,"answer_id":21629566,"question_id":21603477,"body_markdown":"You can set up CAS in order to expose REST service, this allow to validate credentials.\r\n\r\nDocumentation: https://wiki.jasig.org/display/casum/restful+api","title":"Can i use Jasig CAS server for android mobile applications?","body":"<p>You can set up CAS in order to expose REST service, this allow to validate credentials.</p>\n\n<p>Documentation: <a href=\"https://wiki.jasig.org/display/casum/restful+api\" rel=\"nofollow\">https://wiki.jasig.org/display/casum/restful+api</a></p>\n"},{"comments":[{"owner":{"account_id":2336417,"reputation":1219,"user_id":2048658,"accept_rate":57,"display_name":"fnkbz"},"score":0,"creation_date":1394300250,"post_id":22010949,"comment_id":33832768,"body_markdown":"Thanks! this helped me a lot, but i have a question.\nI have the restful api and the oauth configured in my cas server.\nSo,if i want to combine the restful api with the oauth mechanism, should i create a rest service that uses the oauth mechanism? i&#39;m confused..","body":"Thanks! this helped me a lot, but i have a question. I have the restful api and the oauth configured in my cas server. So,if i want to combine the restful api with the oauth mechanism, should i create a rest service that uses the oauth mechanism? i&#39;m confused.."},{"owner":{"account_id":171586,"reputation":4477,"user_id":399113,"accept_rate":51,"display_name":"John John Pichler"},"score":0,"creation_date":1467816119,"post_id":22010949,"comment_id":63875597,"body_markdown":"It would works, but consider that with REST exposed, it would be easy to do a brute force attack.","body":"It would works, but consider that with REST exposed, it would be easy to do a brute force attack."},{"owner":{"account_id":65614,"reputation":3854,"user_id":192976,"accept_rate":77,"display_name":"Hons"},"score":0,"creation_date":1467896564,"post_id":22010949,"comment_id":63913438,"body_markdown":"You&#39;re right... actually this system is not really meant to be used by APPs. Everything that you do is just hacking into it.","body":"You&#39;re right... actually this system is not really meant to be used by APPs. Everything that you do is just hacking into it."}],"tags":[],"owner":{"account_id":65614,"reputation":3854,"user_id":192976,"accept_rate":77,"display_name":"Hons"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1678446157,"creation_date":1393323191,"answer_id":22010949,"question_id":21603477,"body_markdown":"Actually there exist two ways of doing this, each of them has some drawbacks.\r\n\r\n1) Expose the REST interface ([here you&#39;ll find a simple JAVA client that consumes them][1] and a [iOS sample][2] how to use it on a mobile)\r\n\r\nThe problem here is that if somebody downloads your application from the store and checks the network traffic in it (or simply decomposes it) he&#39;ll find the calls you make. With this he could create an APP that does the same as you do, and log the passwords entered by the users (like a [man-in-the-middle attack][3])\r\n\r\n2) Open the real website in a web view inside your APP\r\n\r\nYou&#39;ll need to create a modle login page, or a responsive one on your CAS server so that it looks nice. Obviously even here somebody could theoretically copy your APP and the Website on your CAS fake both to look like your APP grab the username and password and send it in background to your CAS to give to the user the impression that everything went right but it is much more complex.\r\nHowever even here u&#39;ll need to tweak the CAS; CAS is designed to accept a login for a service to which it would redirect after successful login. Therefore in this case you&#39;ll need to add a fake service to the CAS configuration and check if the webview will redirect to it. when that happens u&#39;ll find the TGT in the CASTGC cookie.\r\n\r\nIn our first APPs we used the REST version, but then as we use our CAS for websites too we wanted to restrict the REST access only to other servers in the facility, so we came up with the second solution which seems to fit better, but overall CAS seems not to be prepared for mobile APPs\r\n\r\n\r\n  [1]: http://hantri.blogspot.it/2013/09/cas-sample-client-for-java.html\r\n  [2]: http://hantri.blogspot.it/2013/01/cas-login-from-ios.html\r\n  [3]: http://en.wikipedia.org/wiki/Man-in-the-middle_attack","title":"Can i use Jasig CAS server for android mobile applications?","body":"<p>Actually there exist two ways of doing this, each of them has some drawbacks.</p>\n<ol>\n<li>Expose the REST interface (<a href=\"http://hantri.blogspot.it/2013/09/cas-sample-client-for-java.html\" rel=\"nofollow noreferrer\">here you'll find a simple JAVA client that consumes them</a> and a <a href=\"http://hantri.blogspot.it/2013/01/cas-login-from-ios.html\" rel=\"nofollow noreferrer\">iOS sample</a> how to use it on a mobile)</li>\n</ol>\n<p>The problem here is that if somebody downloads your application from the store and checks the network traffic in it (or simply decomposes it) he'll find the calls you make. With this he could create an APP that does the same as you do, and log the passwords entered by the users (like a <a href=\"http://en.wikipedia.org/wiki/Man-in-the-middle_attack\" rel=\"nofollow noreferrer\">man-in-the-middle attack</a>)</p>\n<ol start=\"2\">\n<li>Open the real website in a web view inside your APP</li>\n</ol>\n<p>You'll need to create a modle login page, or a responsive one on your CAS server so that it looks nice. Obviously even here somebody could theoretically copy your APP and the Website on your CAS fake both to look like your APP grab the username and password and send it in background to your CAS to give to the user the impression that everything went right but it is much more complex.\nHowever even here u'll need to tweak the CAS; CAS is designed to accept a login for a service to which it would redirect after successful login. Therefore in this case you'll need to add a fake service to the CAS configuration and check if the webview will redirect to it. when that happens u'll find the TGT in the CASTGC cookie.</p>\n<p>In our first APPs we used the REST version, but then as we use our CAS for websites too we wanted to restrict the REST access only to other servers in the facility, so we came up with the second solution which seems to fit better, but overall CAS seems not to be prepared for mobile APPs</p>\n"}],"owner":{"account_id":2336417,"reputation":1219,"user_id":2048658,"accept_rate":57,"display_name":"fnkbz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6364,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":22010949,"answer_count":2,"score":8,"last_activity_date":1678446157,"creation_date":1391690970,"question_id":21603477,"body_markdown":"I know that CAS is a single sign-on protocol for the web. Its purpose is to permit a user to access multiple applications while providing their credentials (such as userid and password) only once. It also allows web applications to authenticate users without gaining access to a user&#39;s security credentials, such as a password. \r\n\r\nSo, How can i use Jasig CAS server for android mobile applications ? some guidelines would be very useful!","title":"Can i use Jasig CAS server for android mobile applications?","body":"<p>I know that CAS is a single sign-on protocol for the web. Its purpose is to permit a user to access multiple applications while providing their credentials (such as userid and password) only once. It also allows web applications to authenticate users without gaining access to a user's security credentials, such as a password. </p>\n\n<p>So, How can i use Jasig CAS server for android mobile applications ? some guidelines would be very useful!</p>\n"},{"tags":["java","spring","rest","boot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1678467723,"post_id":75695298,"comment_id":133544385,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":17271785,"reputation":17,"user_id":12507345,"display_name":"Sergiu Stefan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678446056,"creation_date":1678446056,"question_id":75695298,"body_markdown":"I am new to spring and now i am learning to do crud&#39;s with @OneToMany relationships. \r\nI have a bidirectional OneToMany relationship between a Employee entity and a Organization entity. The organization can have multiple entities.\r\nI can create, remove and edit any employee and organization but i cannot remove a employee from a organization.\r\n\r\n\r\nMy Employee entity\r\n```\r\n@Getter\r\n@Setter\r\n@ToString\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\n@Builder\r\n@Table(name = &quot;employees&quot;)\r\npublic class Employee {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;employees_seq_gen&quot;)\r\n    @SequenceGenerator(name = &quot;employees_seq_gen&quot;, sequenceName = &quot;emp_seq&quot;)\r\n    private long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;organization_id&quot;)\r\n    @JsonBackReference\r\n    private Organization organization;\r\n\r\n\r\n    public Organization getOrganization(){\r\n        return organization;\r\n    }\r\n}\r\n```\r\nMy Organization Entity\r\n\r\n```\r\n@ToString\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\n\r\n@Table(name = &quot;organization&quot;)\r\npublic class Organization {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;organization_seq_gen&quot;)\r\n    @SequenceGenerator(name = &quot;organization_seq_gen&quot;, sequenceName = &quot;org_seq&quot;)\r\n    private long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @OneToMany(mappedBy = &quot;organization&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    @JsonManagedReference\r\n    private List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public List&lt;Employee&gt; getEmployees() {\r\n        return employees;\r\n    }\r\n\r\n    public void setEmployees(List&lt;Employee&gt; employees) {\r\n        this.employees = employees;\r\n        for (Employee emp : employees) {\r\n            emp.setOrganization(this);\r\n        }\r\n    }\r\n\r\n    public void addEmployee(Employee employee){\r\n        employees.add(employee);\r\n    }\r\n\r\n\r\n    public void removeEmployee(Employee employee){\r\n        employees.remove(employee);\r\n    }\r\n}\r\n```\r\nOrganization Controller\r\n\r\n```\r\n\r\n@CrossOrigin\r\n@RestController\r\npublic class OrganizationController {\r\n\r\n    @Autowired\r\n    OrganizationService organizationService;\r\n\r\n    @Autowired\r\n    OrganizationRepository organizationRepository;\r\n    @Autowired\r\n    EmployeesRepository employeesRepository;\r\n\r\n\r\n\r\n\r\n    @PostMapping(&quot;/org/assign&quot;)\r\n    public ResponseEntity&lt;Organization&gt; assignEmpToOrg(@RequestBody CreateOrganizationModel createOrganizationModel) {\r\n        ;\r\n        return new ResponseEntity&lt;&gt;(\r\n                organizationService.newPopulatedOrg(createOrganizationModel),\r\n                HttpStatus.CREATED);\r\n    }\r\n\r\n    @GetMapping(&quot;/org&quot;)\r\n    public ResponseEntity&lt;List&lt;Organization&gt;&gt; getAllOrganizations(){\r\n        return new ResponseEntity&lt;&gt;(organizationRepository.findAll(),HttpStatus.OK\r\n        );\r\n    }\r\n\r\n\r\n    @DeleteMapping(&quot;/org/del&quot;)\r\n    public void deleteAllOrganizations(){\r\n        organizationService.deleteAll();\r\n    }\r\n\r\n\r\n    @PutMapping(&quot;org/{orgId}/removeEmpl/{emplId}&quot;)\r\n    public ResponseEntity&lt;Organization&gt; removeEmployee(@PathVariable Long orgId,\r\n                                                       @PathVariable Long emplId){\r\n        return new  ResponseEntity&lt;&gt;(organizationService.removeEmployee(orgId,emplId),HttpStatus.OK);\r\n    }\r\n}\r\n```\r\n\r\nOrganiation Service class\r\n\r\n```\r\n@Service\r\npublic class OrganizationService {\r\n    @Autowired\r\n    EmployeeService employeeService;\r\n    @Autowired\r\n    OrganizationRepository organizationRepository;\r\n    @Autowired\r\n    EmployeesRepository employeesRepository;\r\n\r\n\r\n    //create organzation using existing employee&#39;s ids\r\n    public Organization newPopulatedOrg(CreateOrganizationModel createOrganizationModel) {\r\n        //get Employee list from db\r\n        List&lt;Employee&gt; employees =  employeeService.getEmployeesByIds(createOrganizationModel.getEmpIdList());\r\n\r\n        //create organization\r\n        Organization newOrganization = new Organization();\r\n        newOrganization.setName(createOrganizationModel.getName());\r\n        newOrganization.setEmployees(employees);\r\n\r\n        return  organizationRepository.saveAndFlush(newOrganization);\r\n\r\n\r\n    }\r\n\r\n\r\n    public void deleteAll() {\r\n        organizationRepository.deleteAll();\r\n    }\r\n\r\n\r\n    @Transactional\r\n    public Organization removeEmployee(Long orgId, Long emplId) {\r\n       Organization organizationToEdit =  organizationRepository.findById(orgId).orElseThrow(EntityNotFoundException::new);\r\n       Employee employeeToRemove = employeeService.getEmployeeById(emplId);\r\n\r\n        organizationToEdit.removeEmployee(employeeToRemove);\r\n\r\n       return organizationToEdit;\r\n    }\r\n}\r\n```\r\nPom xml file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.amigoscode&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.20&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n My api responds to the Put request with the supposed updated organization which is correct, but when i verify and fetch all organizations using  another request, the entity is still the same.\r\nI tried using @Transactional over the method in my service, i tried using save method of my repository but i get the same result. If i delete the employee, then the organization get updated.!","title":"My spring boot app doesn&#39;t update my OneToMany relationship","body":"<p>I am new to spring and now i am learning to do crud's with @OneToMany relationships.\nI have a bidirectional OneToMany relationship between a Employee entity and a Organization entity. The organization can have multiple entities.\nI can create, remove and edit any employee and organization but i cannot remove a employee from a organization.</p>\n<p>My Employee entity</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Builder\n@Table(name = &quot;employees&quot;)\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;employees_seq_gen&quot;)\n    @SequenceGenerator(name = &quot;employees_seq_gen&quot;, sequenceName = &quot;emp_seq&quot;)\n    private long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;organization_id&quot;)\n    @JsonBackReference\n    private Organization organization;\n\n\n    public Organization getOrganization(){\n        return organization;\n    }\n}\n</code></pre>\n<p>My Organization Entity</p>\n<pre><code>@ToString\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n\n@Table(name = &quot;organization&quot;)\npublic class Organization {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;organization_seq_gen&quot;)\n    @SequenceGenerator(name = &quot;organization_seq_gen&quot;, sequenceName = &quot;org_seq&quot;)\n    private long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @OneToMany(mappedBy = &quot;organization&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @JsonManagedReference\n    private List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public List&lt;Employee&gt; getEmployees() {\n        return employees;\n    }\n\n    public void setEmployees(List&lt;Employee&gt; employees) {\n        this.employees = employees;\n        for (Employee emp : employees) {\n            emp.setOrganization(this);\n        }\n    }\n\n    public void addEmployee(Employee employee){\n        employees.add(employee);\n    }\n\n\n    public void removeEmployee(Employee employee){\n        employees.remove(employee);\n    }\n}\n</code></pre>\n<p>Organization Controller</p>\n<pre><code>\n@CrossOrigin\n@RestController\npublic class OrganizationController {\n\n    @Autowired\n    OrganizationService organizationService;\n\n    @Autowired\n    OrganizationRepository organizationRepository;\n    @Autowired\n    EmployeesRepository employeesRepository;\n\n\n\n\n    @PostMapping(&quot;/org/assign&quot;)\n    public ResponseEntity&lt;Organization&gt; assignEmpToOrg(@RequestBody CreateOrganizationModel createOrganizationModel) {\n        ;\n        return new ResponseEntity&lt;&gt;(\n                organizationService.newPopulatedOrg(createOrganizationModel),\n                HttpStatus.CREATED);\n    }\n\n    @GetMapping(&quot;/org&quot;)\n    public ResponseEntity&lt;List&lt;Organization&gt;&gt; getAllOrganizations(){\n        return new ResponseEntity&lt;&gt;(organizationRepository.findAll(),HttpStatus.OK\n        );\n    }\n\n\n    @DeleteMapping(&quot;/org/del&quot;)\n    public void deleteAllOrganizations(){\n        organizationService.deleteAll();\n    }\n\n\n    @PutMapping(&quot;org/{orgId}/removeEmpl/{emplId}&quot;)\n    public ResponseEntity&lt;Organization&gt; removeEmployee(@PathVariable Long orgId,\n                                                       @PathVariable Long emplId){\n        return new  ResponseEntity&lt;&gt;(organizationService.removeEmployee(orgId,emplId),HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>Organiation Service class</p>\n<pre><code>@Service\npublic class OrganizationService {\n    @Autowired\n    EmployeeService employeeService;\n    @Autowired\n    OrganizationRepository organizationRepository;\n    @Autowired\n    EmployeesRepository employeesRepository;\n\n\n    //create organzation using existing employee's ids\n    public Organization newPopulatedOrg(CreateOrganizationModel createOrganizationModel) {\n        //get Employee list from db\n        List&lt;Employee&gt; employees =  employeeService.getEmployeesByIds(createOrganizationModel.getEmpIdList());\n\n        //create organization\n        Organization newOrganization = new Organization();\n        newOrganization.setName(createOrganizationModel.getName());\n        newOrganization.setEmployees(employees);\n\n        return  organizationRepository.saveAndFlush(newOrganization);\n\n\n    }\n\n\n    public void deleteAll() {\n        organizationRepository.deleteAll();\n    }\n\n\n    @Transactional\n    public Organization removeEmployee(Long orgId, Long emplId) {\n       Organization organizationToEdit =  organizationRepository.findById(orgId).orElseThrow(EntityNotFoundException::new);\n       Employee employeeToRemove = employeeService.getEmployeeById(emplId);\n\n        organizationToEdit.removeEmployee(employeeToRemove);\n\n       return organizationToEdit;\n    }\n}\n</code></pre>\n<p>Pom xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.amigoscode&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.20&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>My api responds to the Put request with the supposed updated organization which is correct, but when i verify and fetch all organizations using  another request, the entity is still the same.\nI tried using @Transactional over the method in my service, i tried using save method of my repository but i get the same result. If i delete the employee, then the organization get updated.!</p>\n"},{"tags":["java","analytics"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1678452123,"post_id":75695273,"comment_id":133539736,"body_markdown":"Unfortunately the code is not hugely packaging-friendly as it depends on resources but those are read as `File`s. It will run from a jar as long as directories &#39;settings&#39; and &#39;images&#39; are off the current directory","body":"Unfortunately the code is not hugely packaging-friendly as it depends on resources but those are read as <code>File</code>s. It will run from a jar as long as directories &#39;settings&#39; and &#39;images&#39; are off the current directory"},{"owner":{"account_id":27982652,"reputation":1,"user_id":21370129,"display_name":"freedom freedom"},"score":0,"creation_date":1678470732,"post_id":75695273,"comment_id":133545117,"body_markdown":"you are a GOAT;; I spent ages trying to make compilation and carrying those files into a complete jar and your solution, which i should&#39;ve saw but didnt is excellent man;; just incredible, thank you","body":"you are a GOAT;; I spent ages trying to make compilation and carrying those files into a complete jar and your solution, which i should&#39;ve saw but didnt is excellent man;; just incredible, thank you"}],"owner":{"account_id":27982652,"reputation":1,"user_id":21370129,"display_name":"freedom freedom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678445969,"creation_date":1678445969,"question_id":75695273,"body_markdown":"Good morning!\r\n\r\nIn Eclipse I receive no errors when running/building the project \r\n\r\n`Running TimeFlow 0.5\r\nNo existing settings file found.`\r\n\r\nWhen the application is Jarred\r\nThe following Error happens\r\n\r\n`Running TimeFlow 0.5\r\nNo existing settings file found.\r\n        java.io.FileNotFoundException: intro.gif (The system cannot find the file specified)\r\n        at java.base/java.io.FileInputStream.open0(Native Method)\r\n        at java.base/java.io.FileInputStream.open(FileInputStream.java:216)\r\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157)\r\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111)\r\n        at timeflow.app.AboutWindow.&lt;init&gt;(AboutWindow.java:24)\r\n        at timeflow.app.TimeflowAppLauncher.main(TimeflowAppLauncher.java:26)\r\n        java.lang.NullPointerException: Cannot read the array length because &quot;s&quot; is null\r\n        at timeflow.app.TimeflowApp.getVisibleFiles(TimeflowApp.java:603)\r\n        at timeflow.app.TimeflowApp.init(TimeflowApp.java:95)\r\n        at timeflow.app.TimeflowAppLauncher$1.run(TimeflowAppLauncher.java:33)\r\n        at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\r\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at                     java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)`\r\n\r\nI have moved Images from images/ to the root directory of the project, in the source and copied the folder with the pointer to images/ to where the jar is located and this error persists\r\n\r\nI have modified the build path to include the images folder and the images are added to the jar but not in an images folder, just to the root directory of the jar\r\n\r\nAny help is welcome\r\nI wish you the very best and thank you for your time!","title":"Jarring https://github.com/FlowingMedia/TimeFlow","body":"<p>Good morning!</p>\n<p>In Eclipse I receive no errors when running/building the project</p>\n<p><code>Running TimeFlow 0.5 No existing settings file found.</code></p>\n<p>When the application is Jarred\nThe following Error happens</p>\n<p><code>Running TimeFlow 0.5 No existing settings file found. java.io.FileNotFoundException: intro.gif (The system cannot find the file specified) at java.base/java.io.FileInputStream.open0(Native Method) at java.base/java.io.FileInputStream.open(FileInputStream.java:216) at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157) at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111) at timeflow.app.AboutWindow.&lt;init&gt;(AboutWindow.java:24) at timeflow.app.TimeflowAppLauncher.main(TimeflowAppLauncher.java:26) java.lang.NullPointerException: Cannot read the array length because &quot;s&quot; is null at timeflow.app.TimeflowApp.getVisibleFiles(TimeflowApp.java:603) at timeflow.app.TimeflowApp.init(TimeflowApp.java:95) at timeflow.app.TimeflowAppLauncher$1.run(TimeflowAppLauncher.java:33) at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318) at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771) at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722) at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716) at java.base/java.security.AccessController.doPrivileged(AccessController.java:399) at                     java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86) at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741) at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203) at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124) at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113) at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109) at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)</code></p>\n<p>I have moved Images from images/ to the root directory of the project, in the source and copied the folder with the pointer to images/ to where the jar is located and this error persists</p>\n<p>I have modified the build path to include the images folder and the images are added to the jar but not in an images folder, just to the root directory of the jar</p>\n<p>Any help is welcome\nI wish you the very best and thank you for your time!</p>\n"},{"tags":["java","scope"],"comments":[{"owner":{"account_id":3595277,"reputation":44036,"user_id":3000206,"accept_rate":98,"display_name":"Carcigenicate"},"score":1,"creation_date":1490532687,"post_id":43028927,"comment_id":73143614,"body_markdown":"Do you understand scoping? If you create a Scanner in main, it can only be used in main unless you pass it as a argument to another method.","body":"Do you understand scoping? If you create a Scanner in main, it can only be used in main unless you pass it as a argument to another method."},{"owner":{"account_id":9665920,"reputation":9,"user_id":7172422,"display_name":"Roi Zrihan"},"score":0,"creation_date":1490532852,"post_id":43028927,"comment_id":73143659,"body_markdown":"yea.. i know..\ni was programming in c for a long time and now back to java\nbut i remember there was a way to declare a scanner somehow so outside of the main it still can recognize it,\n(tried to declare public Scanner input = new.....)\nstill no good...","body":"yea.. i know.. i was programming in c for a long time and now back to java but i remember there was a way to declare a scanner somehow so outside of the main it still can recognize it, (tried to declare public Scanner input = new.....) still no good..."},{"owner":{"account_id":3103722,"reputation":1311,"user_id":2627137,"display_name":"wandering-geek"},"score":0,"creation_date":1490532854,"post_id":43028927,"comment_id":73143661,"body_markdown":"The ```input``` variable has been declared inside the main method, and therefore will only be available inside the main method&#39;s scope.","body":"The <code>input</code> variable has been declared inside the main method, and therefore will only be available inside the main method&#39;s scope."},{"owner":{"account_id":5263098,"reputation":4148,"user_id":4204026,"accept_rate":90,"display_name":"Drew Kennedy"},"score":0,"creation_date":1490532855,"post_id":43028927,"comment_id":73143662,"body_markdown":"If two people were talking in a room, would you expect to know what was said if you were in another room?","body":"If two people were talking in a room, would you expect to know what was said if you were in another room?"},{"owner":{"account_id":3595277,"reputation":44036,"user_id":3000206,"accept_rate":98,"display_name":"Carcigenicate"},"score":0,"creation_date":1490532902,"post_id":43028927,"comment_id":73143681,"body_markdown":"@RoiZrihan Afaik, variable scoping is the same in C as it is in Java.","body":"@RoiZrihan Afaik, variable scoping is the same in C as it is in Java."},{"owner":{"account_id":9665920,"reputation":9,"user_id":7172422,"display_name":"Roi Zrihan"},"score":0,"creation_date":1490533017,"post_id":43028927,"comment_id":73143726,"body_markdown":"i know scoping.. i just want to know how i make the methods recognize the scanner too.\nthere is a way, i used this 2 years ago, i just dont remember how and i hope u do, so u can tell me pls","body":"i know scoping.. i just want to know how i make the methods recognize the scanner too. there is a way, i used this 2 years ago, i just dont remember how and i hope u do, so u can tell me pls"},{"owner":{"account_id":5263098,"reputation":4148,"user_id":4204026,"accept_rate":90,"display_name":"Drew Kennedy"},"score":0,"creation_date":1490533315,"post_id":43028927,"comment_id":73143836,"body_markdown":"Take a look at [this answer](http://stackoverflow.com/a/19109430/4204026) and you&#39;ll see how.","body":"Take a look at <a href=\"http://stackoverflow.com/a/19109430/4204026\">this answer</a> and you&#39;ll see how."}],"answers":[{"comments":[{"owner":{"account_id":9665920,"reputation":9,"user_id":7172422,"display_name":"Roi Zrihan"},"score":0,"creation_date":1490533494,"post_id":43029052,"comment_id":73143915,"body_markdown":"i think theres another way for the methods to recognize the scanner..\nill search my papers for this way and post it here..\nbut thank u very much man... i didnt know this way works too.. thanks bro","body":"i think theres another way for the methods to recognize the scanner.. ill search my papers for this way and post it here.. but thank u very much man... i didnt know this way works too.. thanks bro"},{"owner":{"account_id":9451707,"reputation":590,"user_id":7028310,"display_name":"0xDEADBEEF"},"score":0,"creation_date":1490533578,"post_id":43029052,"comment_id":73143936,"body_markdown":"if you find this answer helpful please accept this as an answer you need to learn about method with parameter","body":"if you find this answer helpful please accept this as an answer you need to learn about method with parameter"}],"tags":[],"owner":{"account_id":9451707,"reputation":590,"user_id":7028310,"display_name":"0xDEADBEEF"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678445163,"creation_date":1490533279,"answer_id":43029052,"question_id":43028927,"body_markdown":"    public static void main(String[] args) {\r\n        Scanner input= new Scanner(System.in);\r\n\r\n        int x = start(input);\r\n        System.out.println(&quot;enter another number&quot;);\r\n        int i = input.nextInt();\r\n\r\n        System.out.println(&quot;a number:&quot; + x);\r\n        System.out.println(&quot;another number&quot; + i);\r\n    }\r\n\r\n    public static int start(Scanner scan) {\r\n        System.out.println(&quot;Please enter a number&quot;);\r\n        int x = scan.nextInt();\r\n        return x;\r\n    }\r\n\r\nTo use the Scanner in another method, send the Scanner in a parameter to the method, i.e. `start(Scanner scan)` and then `return x` to test and print the value in the main() method.","title":"Make a Scanner object declared in main() accessible in all methods","body":"<pre><code>public static void main(String[] args) {\n    Scanner input= new Scanner(System.in);\n\n    int x = start(input);\n    System.out.println(&quot;enter another number&quot;);\n    int i = input.nextInt();\n\n    System.out.println(&quot;a number:&quot; + x);\n    System.out.println(&quot;another number&quot; + i);\n}\n\npublic static int start(Scanner scan) {\n    System.out.println(&quot;Please enter a number&quot;);\n    int x = scan.nextInt();\n    return x;\n}\n</code></pre>\n<p>To use the Scanner in another method, send the Scanner in a parameter to the method, i.e. <code>start(Scanner scan)</code> and then <code>return x</code> to test and print the value in the main() method.</p>\n"},{"tags":[],"owner":{"account_id":6906417,"reputation":1380,"user_id":5304124,"accept_rate":38,"display_name":"apilat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1490533413,"creation_date":1490533413,"answer_id":43029077,"question_id":43028927,"body_markdown":"You need to declare the `Scanner` as an object outside the main function and then you can use it in other functions.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    class ScannerTest {\r\n    \r\n        private static Scanner scanner;\r\n    \r\n        public static void main(String[] args){\r\n            scanner = new Scanner(System.in);\r\n            start();\r\n        }\r\n    \r\n        private static void start(){\r\n            String input = scanner.nextLine();\r\n            System.out.println(&quot;Input: &quot; + input);\r\n        }\r\n    }\r\n\r\n**NOTE: The `scanner` object as well as the `start` function need to be static in order for you to access them inside the `main` function.**","title":"Make a Scanner object declared in main() accessible in all methods","body":"<p>You need to declare the <code>Scanner</code> as an object outside the main function and then you can use it in other functions.</p>\n\n<pre><code>import java.util.Scanner;\n\nclass ScannerTest {\n\n    private static Scanner scanner;\n\n    public static void main(String[] args){\n        scanner = new Scanner(System.in);\n        start();\n    }\n\n    private static void start(){\n        String input = scanner.nextLine();\n        System.out.println(\"Input: \" + input);\n    }\n}\n</code></pre>\n\n<p><strong>NOTE: The <code>scanner</code> object as well as the <code>start</code> function need to be static in order for you to access them inside the <code>main</code> function.</strong></p>\n"},{"tags":[],"owner":{"account_id":9665920,"reputation":9,"user_id":7172422,"display_name":"Roi Zrihan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678444844,"creation_date":1490534017,"answer_id":43029184,"question_id":43028927,"body_markdown":"Solved, now it works great!\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Exe1GenericSort {\r\n\r\n    \tprivate static final Scanner input = new Scanner (System.in);\r\n\r\n\t    public static void main(String[] args) {\r\n        //...\r\n","title":"Make a Scanner object declared in main() accessible in all methods","body":"<p>Solved, now it works great!</p>\n<pre><code>import java.util.Scanner;\n\npublic class Exe1GenericSort {\n\n    private static final Scanner input = new Scanner (System.in);\n\n    public static void main(String[] args) {\n    //...\n</code></pre>\n"}],"owner":{"account_id":9665920,"reputation":9,"user_id":7172422,"display_name":"Roi Zrihan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2999,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1678445163,"creation_date":1490532581,"question_id":43028927,"body_markdown":"I tried to declare a new Scanner object.\r\n\r\nIt works fine in the main() method, but in the other methods it is not accessible.\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Exe1GenericSort {\r\n\r\n        public static void main(String[] args) {\r\n            Scanner input= new Scanner(System.in);\r\n\r\n            start();\r\n\r\n            int i = input.nextInt();\r\n        }\r\n\r\n        public static void start() {\r\n            int i = input.nextInt();\r\n            //...\r\n        }\r\n    }\r\n\r\nI tried to write the `Scanner input = new Scanner(System.in);` above the main() method but it still won&#39;t work...","title":"Make a Scanner object declared in main() accessible in all methods","body":"<p>I tried to declare a new Scanner object.</p>\n<p>It works fine in the main() method, but in the other methods it is not accessible.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Exe1GenericSort {\n\n    public static void main(String[] args) {\n        Scanner input= new Scanner(System.in);\n\n        start();\n\n        int i = input.nextInt();\n    }\n\n    public static void start() {\n        int i = input.nextInt();\n        //...\n    }\n}\n</code></pre>\n<p>I tried to write the <code>Scanner input = new Scanner(System.in);</code> above the main() method but it still won't work...</p>\n"},{"tags":["java","jackson","deserialization","json-deserialization","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":10491586,"reputation":179,"user_id":7864377,"display_name":"Dmitry Pukhov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678403918,"creation_date":1678403918,"answer_id":75690938,"question_id":75688729,"body_markdown":"Yes - @JsonUnwrapped.\r\n \r\n```java\r\npublic class Information {\r\n  public String id;\r\n\r\n  public String url;\r\n\r\n  @JsonUnwrapped\r\n  public ClassContainingArrivals var; \r\n}\r\n```","title":"deserialize nested object using objectMapper","body":"<p>Yes - @JsonUnwrapped.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Information {\n  public String id;\n\n  public String url;\n\n  @JsonUnwrapped\n  public ClassContainingArrivals var; \n}\n</code></pre>\n"}],"owner":{"account_id":3262430,"reputation":15,"user_id":2747727,"display_name":"cesarknbv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75690938,"answer_count":1,"score":0,"last_activity_date":1678445093,"creation_date":1678386858,"question_id":75688729,"body_markdown":"Here it goes a toy version of what I want to do.\r\n\r\nI have a JSON in the following format.\r\n\r\n    {\r\n        &quot;id&quot;: &quot;XXXXX&quot;,\r\n        &quot;url&quot;: null,\r\n        &quot;arrival&quot;:[       \r\n         {\r\n           &quot;from&quot;: &quot;13:00&quot;,\r\n           &quot;to&quot;: &quot;14:00&quot;,\r\n           &quot;max&quot;: 100\r\n         },\r\n         {\r\n           &quot;from&quot;: &quot;14:00&quot;,\r\n           &quot;to&quot;: &quot;15:00&quot;,\r\n           &quot;max&quot;: 200\r\n         }\r\n       ]\r\n    }\r\n\r\nWhich is to be deserialized into \r\n\r\n    public class Information{\r\n    \r\n      private String id;\r\n    \r\n      private String url;\r\n    \r\n      private ClassContainingArrivals var; \r\n    \r\n    }\r\n\r\n`ClassContainingArrivals` is the one having the field `List&lt;HoursAndMax&gt; arrival`, which in turn holds the information from &quot;arrivals&quot;.\r\n\r\nWhat I plan to do is adding the field `List&lt;HoursAndMax&gt; arrival` to `Information`, and pass it on to `var.arrival` later in the code, in order to `objectMapper.readValue` to work correctly.\r\n\r\nIs there a way to tell `objectMapper` or annotate the field `var` so I can deserialize that JSON list straight into `var.arrival` instead of having to add that other field to `Information`?","title":"deserialize nested object using objectMapper","body":"<p>Here it goes a toy version of what I want to do.</p>\n<p>I have a JSON in the following format.</p>\n<pre><code>{\n    &quot;id&quot;: &quot;XXXXX&quot;,\n    &quot;url&quot;: null,\n    &quot;arrival&quot;:[       \n     {\n       &quot;from&quot;: &quot;13:00&quot;,\n       &quot;to&quot;: &quot;14:00&quot;,\n       &quot;max&quot;: 100\n     },\n     {\n       &quot;from&quot;: &quot;14:00&quot;,\n       &quot;to&quot;: &quot;15:00&quot;,\n       &quot;max&quot;: 200\n     }\n   ]\n}\n</code></pre>\n<p>Which is to be deserialized into</p>\n<pre><code>public class Information{\n\n  private String id;\n\n  private String url;\n\n  private ClassContainingArrivals var; \n\n}\n</code></pre>\n<p><code>ClassContainingArrivals</code> is the one having the field <code>List&lt;HoursAndMax&gt; arrival</code>, which in turn holds the information from &quot;arrivals&quot;.</p>\n<p>What I plan to do is adding the field <code>List&lt;HoursAndMax&gt; arrival</code> to <code>Information</code>, and pass it on to <code>var.arrival</code> later in the code, in order to <code>objectMapper.readValue</code> to work correctly.</p>\n<p>Is there a way to tell <code>objectMapper</code> or annotate the field <code>var</code> so I can deserialize that JSON list straight into <code>var.arrival</code> instead of having to add that other field to <code>Information</code>?</p>\n"},{"tags":["java","gradle","javadoc","java-18"],"answers":[{"comments":[{"owner":{"account_id":8838381,"reputation":1306,"user_id":6601614,"accept_rate":64,"display_name":"Shankha057"},"score":0,"creation_date":1678445889,"post_id":75695110,"comment_id":133538132,"body_markdown":"I get the error: `class java.lang.String cannot be cast to class java.util.List` when running the javadoc task after performing the changes","body":"I get the error: <code>class java.lang.String cannot be cast to class java.util.List</code> when running the javadoc task after performing the changes"},{"owner":{"account_id":8838381,"reputation":1306,"user_id":6601614,"accept_rate":64,"display_name":"Shankha057"},"score":0,"creation_date":1678446815,"post_id":75695110,"comment_id":133538380,"body_markdown":"And this is coming from the line: \n`options.addStringOption(&#39;-module-path&#39;,&quot;${rootDir}/snippets&quot;)`","body":"And this is coming from the line:  <code>options.addStringOption(&#39;-module-path&#39;,&quot;${rootDir}&#47;snippets&quot;&zwnj;&#8203;)</code>"}],"tags":[],"owner":{"account_id":26714684,"reputation":11,"user_id":20319446,"display_name":"Kostia"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678445014,"creation_date":1678445014,"answer_id":75695110,"question_id":75695026,"body_markdown":"To use code snippets using external files in Gradle with the Application plugin, you need to follow these steps:\r\n\r\nCreate a directory to store your snippet files. For example, you can create a directory named snippets at the root of your project.\r\n\r\nCreate a package structure that matches the package structure of the class that contains the code snippet. For example, if the class that contains the code snippet is in the package com.example.myapp, create a directory structure snippets/com/example/myapp.\r\n\r\nCreate a file in the directory structure you created in step 2 that contains the code snippet. For example, if the code snippet is named restServicePost, create a file named restServicePost.java in the snippets/com/example/myapp directory.\r\n\r\nAdd the --module-path and --add-modules options to the javadoc task in your build.gradle file to include the external files in the classpath:\r\n\r\n    javadoc {\r\n        doFirst {\r\n            options.addStringOption(&#39;-module-path&#39;, &quot;${rootDir}/snippets&quot;)\r\n            options.addStringOption(&#39;-add-modules&#39;, &#39;ALL-SYSTEM&#39;)\r\n        }\r\n    }\r\n\r\nIn the Javadoc comment, use the @snippet tag to reference the code snippet. For example:\r\n\r\n        /**\r\n     * The following method uses the {@code HttpRequest.GET()} method. Please use it like follows:\r\n     * {@snippet class=&quot;com.example.myapp.ShowHttpClientExamples&quot; region=&quot;restServicePost&quot;}\r\n     */\r\n\r\nRun the javadoc task to generate the documentation.\r\nBy following these steps, you should be able to use code snippets using external files in Gradle with the Application plugin.\r\n","title":"How to provide external file based code snippets using a Gradle Java project","body":"<p>To use code snippets using external files in Gradle with the Application plugin, you need to follow these steps:</p>\n<p>Create a directory to store your snippet files. For example, you can create a directory named snippets at the root of your project.</p>\n<p>Create a package structure that matches the package structure of the class that contains the code snippet. For example, if the class that contains the code snippet is in the package com.example.myapp, create a directory structure snippets/com/example/myapp.</p>\n<p>Create a file in the directory structure you created in step 2 that contains the code snippet. For example, if the code snippet is named restServicePost, create a file named restServicePost.java in the snippets/com/example/myapp directory.</p>\n<p>Add the --module-path and --add-modules options to the javadoc task in your build.gradle file to include the external files in the classpath:</p>\n<pre><code>javadoc {\n    doFirst {\n        options.addStringOption('-module-path', &quot;${rootDir}/snippets&quot;)\n        options.addStringOption('-add-modules', 'ALL-SYSTEM')\n    }\n}\n</code></pre>\n<p>In the Javadoc comment, use the @snippet tag to reference the code snippet. For example:</p>\n<pre><code>    /**\n * The following method uses the {@code HttpRequest.GET()} method. Please use it like follows:\n * {@snippet class=&quot;com.example.myapp.ShowHttpClientExamples&quot; region=&quot;restServicePost&quot;}\n */\n</code></pre>\n<p>Run the javadoc task to generate the documentation.\nBy following these steps, you should be able to use code snippets using external files in Gradle with the Application plugin.</p>\n"}],"owner":{"account_id":8838381,"reputation":1306,"user_id":6601614,"accept_rate":64,"display_name":"Shankha057"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678445014,"creation_date":1678444586,"question_id":75695026,"body_markdown":"I am trying to use [code snippets][1] using external file. My documentation looks like this:\r\n\r\n\t/**\r\n\t * The following method uses the {@code HttpRequest.GET()} method. Please use it like follows:\r\n\t * {@snippet class=&quot;ShowHttpClientExamples&quot; region=&quot;restServicePost&quot;}\r\n\t */\r\nI have a directory named `snippets-file` in the directory `src/java/` and in my `build.gradle` file I have he following code in the `javadoc` task :\r\n\r\n    javadoc {\r\n        doFirst {\r\n            options.addStringOption(&#39;-snippet-path&#39;, &quot;${rootDir}/src/java/snippet-files&quot;)\r\n        }\r\n    }\r\n\r\nI am trying to specify the `snippet-path` for the `javadoc` task.   \r\nWhen I execute the task I get the error that class `ShowHttpClientExamples` isn&#39;t found on the source path or snippet path.    \r\n\r\nI tried to create a directory first and then a package named `snippet-files` inside the package containing the class containing the method documented with the `@snippet` tag, all according to the [guide][2]. I still get the same error.\r\n\r\n**How to I use code snippets using external code file in Gradle with Application plugin?**  \r\n\r\n\r\nI tried to follow this [blog][3] which is for Maven and tried to adapt for my case but the error still persists.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/413\r\n  [2]: https://docs.oracle.com/en/java/javase/18/code-snippet/index.html\r\n  [3]: https://www.morling.dev/blog/executable-javadoc-code-snippets/","title":"How to provide external file based code snippets using a Gradle Java project","body":"<p>I am trying to use <a href=\"https://openjdk.org/jeps/413\" rel=\"nofollow noreferrer\">code snippets</a> using external file. My documentation looks like this:</p>\n<pre><code>/**\n * The following method uses the {@code HttpRequest.GET()} method. Please use it like follows:\n * {@snippet class=&quot;ShowHttpClientExamples&quot; region=&quot;restServicePost&quot;}\n */\n</code></pre>\n<p>I have a directory named <code>snippets-file</code> in the directory <code>src/java/</code> and in my <code>build.gradle</code> file I have he following code in the <code>javadoc</code> task :</p>\n<pre><code>javadoc {\n    doFirst {\n        options.addStringOption('-snippet-path', &quot;${rootDir}/src/java/snippet-files&quot;)\n    }\n}\n</code></pre>\n<p>I am trying to specify the <code>snippet-path</code> for the <code>javadoc</code> task.<br />\nWhen I execute the task I get the error that class <code>ShowHttpClientExamples</code> isn't found on the source path or snippet path.</p>\n<p>I tried to create a directory first and then a package named <code>snippet-files</code> inside the package containing the class containing the method documented with the <code>@snippet</code> tag, all according to the <a href=\"https://docs.oracle.com/en/java/javase/18/code-snippet/index.html\" rel=\"nofollow noreferrer\">guide</a>. I still get the same error.</p>\n<p><strong>How to I use code snippets using external code file in Gradle with Application plugin?</strong></p>\n<p>I tried to follow this <a href=\"https://www.morling.dev/blog/executable-javadoc-code-snippets/\" rel=\"nofollow noreferrer\">blog</a> which is for Maven and tried to adapt for my case but the error still persists.</p>\n"},{"tags":["java","lambda","interface"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1678424537,"post_id":75692410,"comment_id":133533435,"body_markdown":"How about an anonymous class instead?","body":"How about an anonymous class instead?"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1678424789,"post_id":75692410,"comment_id":133533469,"body_markdown":"Lambda expressions and method references can only be used with _functional interfaces_, which are interfaces that have only a single abstract method.","body":"Lambda expressions and method references can only be used with <i>functional interfaces</i>, which are interfaces that have only a single abstract method."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1678444175,"creation_date":1678424766,"answer_id":75692434,"question_id":75692410,"body_markdown":"You&#39;re thinking about [functional interfaces](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html#approach6). Anonymously defining a class with a lambda expression is a syntactic sugar that&#39;s only available for interfaces with a single method. If you have more than one method, you&#39;ll have to resort to a good old fashioned anonymous class:\r\n\r\n```java\r\nInterface r = new Interface() {\r\n    public void st1() {\r\n        // do something;\r\n    }\r\n\r\n    public String ra(String p) {\r\n        return p;\r\n    }\r\n}\r\n```","title":"How can I define Lambda Expression for an interface with more than one method?","body":"<p>You're thinking about <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html#approach6\" rel=\"nofollow noreferrer\">functional interfaces</a>. Anonymously defining a class with a lambda expression is a syntactic sugar that's only available for interfaces with a single method. If you have more than one method, you'll have to resort to a good old fashioned anonymous class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Interface r = new Interface() {\n    public void st1() {\n        // do something;\n    }\n\n    public String ra(String p) {\n        return p;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678426064,"creation_date":1678426064,"answer_id":75692541,"question_id":75692410,"body_markdown":"If you like the look of it better you could write:\r\n\r\n```\r\ninterface Interface{\r\n    public void st1();\r\n    public String ra(String p);\r\n    public static Interface build(Runnable st1, Function&lt;String,String&gt; ra) {\r\n        return new Interface() {\r\n\r\n            @Override\r\n            public void st1() {\r\n                st1.run();\r\n            }\r\n\r\n            @Override\r\n            public String ra(String p) {\r\n                return ra.apply(p);\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n        Interface thing = Interface.build(\r\n                () -&gt; System.out.println(&quot;foo&quot;),\r\n                String::toUpperCase\r\n        );\r\n    }\r\n}\r\n```\r\nPerhaps there are circumstances where that&#39;s clearer.\r\n\r\nIf you have two methods with the same signature I would *not* recommend this -- unless you use the builder pattern, but then a simple anonymous class is likely to be clearer.","title":"How can I define Lambda Expression for an interface with more than one method?","body":"<p>If you like the look of it better you could write:</p>\n<pre><code>interface Interface{\n    public void st1();\n    public String ra(String p);\n    public static Interface build(Runnable st1, Function&lt;String,String&gt; ra) {\n        return new Interface() {\n\n            @Override\n            public void st1() {\n                st1.run();\n            }\n\n            @Override\n            public String ra(String p) {\n                return ra.apply(p);\n            }\n        };\n    }\n}\n\npublic class Test {\n    public static void main(String[] args) {\n        Interface thing = Interface.build(\n                () -&gt; System.out.println(&quot;foo&quot;),\n                String::toUpperCase\n        );\n    }\n}\n</code></pre>\n<p>Perhaps there are circumstances where that's clearer.</p>\n<p>If you have two methods with the same signature I would <em>not</em> recommend this -- unless you use the builder pattern, but then a simple anonymous class is likely to be clearer.</p>\n"}],"owner":{"account_id":26400943,"reputation":105,"user_id":20051416,"display_name":"rakib3903"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75692434,"answer_count":2,"score":1,"last_activity_date":1678444175,"creation_date":1678424454,"question_id":75692410,"body_markdown":"I can not define a lambda expression for an interface with multiple methods shown in the code below.\r\n```java\r\ninterface Interface{\r\n    public void st1();\r\n    public String ra(String p);\r\n}\r\n```\r\n\r\n\r\n\r\nI can define a lambda expression for a single-method interface. \r\n\r\n```java\r\ninterface Interface{\r\n    public String ra(String p);\r\n}\r\n\r\npublic static void main(String[] args) {\r\n    Interface r = (x)-&gt;{\r\n        return x;\r\n    };\r\n    String getValue = r.ra(&quot;string&quot;);\r\n    System.out.println(getValue);\r\n}\r\n```\r\nBut how can I define a lambda Expression for multiple methods? ","title":"How can I define Lambda Expression for an interface with more than one method?","body":"<p>I can not define a lambda expression for an interface with multiple methods shown in the code below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Interface{\n    public void st1();\n    public String ra(String p);\n}\n</code></pre>\n<p>I can define a lambda expression for a single-method interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Interface{\n    public String ra(String p);\n}\n\npublic static void main(String[] args) {\n    Interface r = (x)-&gt;{\n        return x;\n    };\n    String getValue = r.ra(&quot;string&quot;);\n    System.out.println(getValue);\n}\n</code></pre>\n<p>But how can I define a lambda Expression for multiple methods?</p>\n"},{"tags":["java","spring-security","jwt"],"comments":[{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1670144791,"post_id":74673915,"comment_id":131801644,"body_markdown":"What is your version of Spring Boot?","body":"What is your version of Spring Boot?"},{"owner":{"account_id":16641195,"reputation":359,"user_id":13154548,"display_name":"eternal"},"score":0,"creation_date":1670145291,"post_id":74673915,"comment_id":131801713,"body_markdown":"@JamesGrey 3.0.0. I can upload a project to GitHub if needed.","body":"@JamesGrey 3.0.0. I can upload a project to GitHub if needed."},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1670146278,"post_id":74673915,"comment_id":131801887,"body_markdown":"You can upload to GitHub for more clear.","body":"You can upload to GitHub for more clear."},{"owner":{"account_id":16641195,"reputation":359,"user_id":13154548,"display_name":"eternal"},"score":0,"creation_date":1670147084,"post_id":74673915,"comment_id":131802024,"body_markdown":"@JamesGrey here is link to repo https://github.com/EternalSadnes/chat-app","body":"@JamesGrey here is link to repo <a href=\"https://github.com/EternalSadnes/chat-app\" rel=\"nofollow noreferrer\">github.com/EternalSadnes/chat-app</a>"},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1670147332,"post_id":74673915,"comment_id":131802057,"body_markdown":"What is your &quot;one endpoint&quot; ?","body":"What is your &quot;one endpoint&quot; ?"},{"owner":{"account_id":16641195,"reputation":359,"user_id":13154548,"display_name":"eternal"},"score":0,"creation_date":1670147456,"post_id":74673915,"comment_id":131802080,"body_markdown":"@JamesGrey In AuthController I have /token/refresh endpoint. I want the refresh token to be accepted only in this endpoint and return 403 if it is used to access other endpoints","body":"@JamesGrey In AuthController I have /token/refresh endpoint. I want the refresh token to be accepted only in this endpoint and return 403 if it is used to access other endpoints"},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1670147509,"post_id":74673915,"comment_id":131802088,"body_markdown":"Add `.requestMatchers(&quot;/token/refresh&quot;).permitAll()`","body":"Add <code>.requestMatchers(&quot;&#47;token&#47;refresh&quot;).permitAll()</code>"},{"owner":{"account_id":16641195,"reputation":359,"user_id":13154548,"display_name":"eternal"},"score":0,"creation_date":1670148684,"post_id":74673915,"comment_id":131802296,"body_markdown":"@JamesGrey and what it changed? I still can send the access token to the refresh endpoint and the refresh token to the hello endpoint and it is accepted.","body":"@JamesGrey and what it changed? I still can send the access token to the refresh endpoint and the refresh token to the hello endpoint and it is accepted."},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1670149039,"post_id":74673915,"comment_id":131802359,"body_markdown":"You expected maybe not feasibility. Because when refresh token will affect to all end-points.","body":"You expected maybe not feasibility. Because when refresh token will affect to all end-points."}],"answers":[{"comments":[{"owner":{"account_id":16641195,"reputation":359,"user_id":13154548,"display_name":"eternal"},"score":0,"creation_date":1670150359,"post_id":74674587,"comment_id":131802628,"body_markdown":"But then what&#39;s the point of having two tokens(access - short-lived and refresh - long-lived) if I can throw out a short-lived token and use just refresh token for all requests?","body":"But then what&#39;s the point of having two tokens(access - short-lived and refresh - long-lived) if I can throw out a short-lived token and use just refresh token for all requests?"}],"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670149224,"creation_date":1670149224,"answer_id":74674587,"question_id":74673915,"body_markdown":"```\r\nthe refresh token is bound to the\r\n   client to which it was issued. \r\n```\r\n\r\nsource https://www.rfc-editor.org/rfc/rfc6749#section-6\r\n\r\nRefresh token affect to client scope (it means all end-points). Therefore your expected is not feasibility.","title":"Restrict jwt refresh token to only one endpoint","body":"<pre><code>the refresh token is bound to the\n   client to which it was issued. \n</code></pre>\n<p>source <a href=\"https://www.rfc-editor.org/rfc/rfc6749#section-6\" rel=\"nofollow noreferrer\">https://www.rfc-editor.org/rfc/rfc6749#section-6</a></p>\n<p>Refresh token affect to client scope (it means all end-points). Therefore your expected is not feasibility.</p>\n"},{"tags":[],"owner":{"account_id":26620608,"reputation":11,"user_id":20239442,"display_name":"Vadim M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678444170,"creation_date":1678443495,"answer_id":75694848,"question_id":74673915,"body_markdown":"You can add &quot;access&quot; authority to every access token and make it mandatory for all endpoints except refresh token endpoint. Therefore refresh token will not have access to all enpoints.\r\n\r\nTokenService class:\r\n\r\n        @Override\r\n        public String generateAccessToken(User user) {\r\n            Instant now = Instant.now();\r\n            String scope = user.getAuthorities().stream()\r\n                .map(GrantedAuthority::getAuthority)\r\n                .collect(Collectors.joining(&quot; &quot;));\r\n\r\n            String accessScope = scope.concat(&quot; access&quot;);\r\n\r\n            JwtClaimsSet claims = JwtClaimsSet.builder()\r\n                .issuer(&quot;self&quot;)\r\n                .issuedAt(now)\r\n                .expiresAt(now.plus(2, ChronoUnit.MINUTES))\r\n                .subject(user.getUsername())\r\n                .claim(&quot;roles&quot;, accessScope)\r\n                .build();\r\n            ...\r\nand WebSecurityConfig class:\r\n    \r\n        http.authorizeHttpRequests()\r\n                .requestMatchers(&quot;/auth/sign-in&quot;).permitAll()\r\n                .requestMatchers(&quot;/auth/sign-up&quot;).permitAll()\r\n                .anyRequest().hasAuthority(&quot;ROLE_access&quot;)\r\n                .and()\r\n                .httpBasic(Customizer.withDefaults())\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\r\nBTW in WebSecurityConfig class you set claim name to &quot;roles&quot;:\r\n\r\n    jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\r\nbut in JwtTokenServiceImpl class you use &quot;claim&quot; for claim name:\r\n\r\n    JwtClaimsSet claims = JwtClaimsSet.builder()\r\n                .issuer(&quot;self&quot;)\r\n                .issuedAt(now)\r\n                .expiresAt(now.plus(2, ChronoUnit.MINUTES))\r\n                .subject(user.getUsername())\r\n                .claim(&quot;scope&quot;, scope)\r\n                .build();\r\n\r\nI think you have to use one name everywhere.\r\n","title":"Restrict jwt refresh token to only one endpoint","body":"<p>You can add &quot;access&quot; authority to every access token and make it mandatory for all endpoints except refresh token endpoint. Therefore refresh token will not have access to all enpoints.</p>\n<p>TokenService class:</p>\n<pre><code>    @Override\n    public String generateAccessToken(User user) {\n        Instant now = Instant.now();\n        String scope = user.getAuthorities().stream()\n            .map(GrantedAuthority::getAuthority)\n            .collect(Collectors.joining(&quot; &quot;));\n\n        String accessScope = scope.concat(&quot; access&quot;);\n\n        JwtClaimsSet claims = JwtClaimsSet.builder()\n            .issuer(&quot;self&quot;)\n            .issuedAt(now)\n            .expiresAt(now.plus(2, ChronoUnit.MINUTES))\n            .subject(user.getUsername())\n            .claim(&quot;roles&quot;, accessScope)\n            .build();\n        ...\n</code></pre>\n<p>and WebSecurityConfig class:</p>\n<pre><code>    http.authorizeHttpRequests()\n            .requestMatchers(&quot;/auth/sign-in&quot;).permitAll()\n            .requestMatchers(&quot;/auth/sign-up&quot;).permitAll()\n            .anyRequest().hasAuthority(&quot;ROLE_access&quot;)\n            .and()\n            .httpBasic(Customizer.withDefaults())\n            .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n</code></pre>\n<p>BTW in WebSecurityConfig class you set claim name to &quot;roles&quot;:</p>\n<pre><code>jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\n</code></pre>\n<p>but in JwtTokenServiceImpl class you use &quot;claim&quot; for claim name:</p>\n<pre><code>JwtClaimsSet claims = JwtClaimsSet.builder()\n            .issuer(&quot;self&quot;)\n            .issuedAt(now)\n            .expiresAt(now.plus(2, ChronoUnit.MINUTES))\n            .subject(user.getUsername())\n            .claim(&quot;scope&quot;, scope)\n            .build();\n</code></pre>\n<p>I think you have to use one name everywhere.</p>\n"}],"owner":{"account_id":16641195,"reputation":359,"user_id":13154548,"display_name":"eternal"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":385,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1678444170,"creation_date":1670142543,"question_id":74673915,"body_markdown":"I have implemented JWT token authorization &amp; authentication from Spring resource server dependency. Here is the config file:\r\n\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig {\r\n    \r\n        @Value(&quot;${app.chat.jwt.public.key}&quot;)\r\n        private RSAPublicKey publicKey;\r\n    \r\n        @Value(&quot;${app.chat.jwt.private.key}&quot;)\r\n        private RSAPrivateKey privateKey;\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.cors().and().csrf().disable();\r\n    \r\n            http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \r\n            http.exceptionHandling(\r\n                    exceptions -&gt;\r\n                            exceptions\r\n                                    .authenticationEntryPoint(new BearerTokenAuthenticationEntryPoint())\r\n                                    .accessDeniedHandler(new BearerTokenAccessDeniedHandler()));\r\n    \r\n            http.authorizeHttpRequests()\r\n                    .requestMatchers(&quot;/auth/sign-in&quot;).permitAll()\r\n                    .requestMatchers(&quot;/auth/sign-up&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .httpBasic(Customizer.withDefaults())\r\n                    .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n    \r\n            return http.build();\r\n        }\r\n    \r\n        @SneakyThrows\r\n        @Bean\r\n        public JwtEncoder jwtEncoder() {\r\n            var jwk = new RSAKey.Builder(publicKey).privateKey(privateKey).build();\r\n            var jwks = new ImmutableJWKSet&lt;&gt;(new JWKSet(jwk));\r\n            return new NimbusJwtEncoder(jwks);\r\n        }\r\n    \r\n        @SneakyThrows\r\n        @Bean\r\n        public JwtDecoder jwtDecoder() {\r\n            return NimbusJwtDecoder.withPublicKey(publicKey).build();\r\n        }\r\n    \r\n        @Bean\r\n        public JwtAuthenticationConverter jwtAuthenticationConverter() {\r\n            var jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n            jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\r\n            jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\r\n    \r\n            var jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n            jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\r\n            return jwtAuthenticationConverter;\r\n        }\r\n    \r\n        @Bean\r\n        public CorsFilter corsFilter() {\r\n            UrlBasedCorsConfigurationSource source =\r\n                    new UrlBasedCorsConfigurationSource();\r\n            CorsConfiguration config = new CorsConfiguration();\r\n            config.setAllowCredentials(true);\r\n            config.addAllowedOrigin(&quot;*&quot;);\r\n            config.addAllowedHeader(&quot;*&quot;);\r\n            config.addAllowedMethod(&quot;*&quot;);\r\n            source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n            return new CorsFilter(source);\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager(\r\n                AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n        }\r\n    }\r\n\r\n It works fine. I have AuthController where I have implemented endpoints for sign-in, sign-up, and refresh token. In each endpoint, I return a response with an access token and a refresh token. Here is the controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/auth&quot;)\r\n    @RequiredArgsConstructor\r\n    public class AuthController {\r\n        private final JwtTokenService tokenService;\r\n        private final AuthenticationManager authManager;\r\n        private final UserDetailsService usrDetailsService;\r\n    \r\n        private final UserService userService;\r\n    \r\n    \r\n    \r\n        record LoginRequest(String username, String password) {}\r\n        @PostMapping(&quot;/sign-in&quot;)\r\n        public TokensResponse login(@RequestBody LoginRequest request) {\r\n    \r\n            UsernamePasswordAuthenticationToken authenticationToken =\r\n                    new UsernamePasswordAuthenticationToken(request.username, request.password);\r\n            authManager.authenticate(authenticationToken);\r\n    \r\n            var user = (User) usrDetailsService.loadUserByUsername(request.username);\r\n            String accessToken = tokenService.generateAccessToken(user);\r\n            String refreshToken = tokenService.generateRefreshToken(user);\r\n    \r\n            return new TokensResponse(accessToken, refreshToken);\r\n        }\r\n    \r\n        record SignUpRequest(String username, String password){}\r\n    \r\n        @PostMapping(&quot;/sign-up&quot;)\r\n        public TokensResponse signUp(@RequestBody SignUpRequest signUpRequest) {\r\n            User registeredUser = userService.register(new AuthRequestDto(signUpRequest.username(), signUpRequest.password()));\r\n    \r\n            String accessToken = tokenService.generateAccessToken(registeredUser);\r\n            String refreshToken = tokenService.generateRefreshToken(registeredUser);\r\n    \r\n            return new TokensResponse(accessToken, refreshToken);\r\n        }\r\n    \r\n        @PreAuthorize(&quot;hasRole(&#39;REFRESH_TOKEN&#39;)&quot;)\r\n        @GetMapping(&quot;/token/refresh&quot;)\r\n        public TokensResponse refreshToken(HttpServletRequest request) {\r\n            String headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n            String previousRefreshToken = headerAuth.substring(7);\r\n    \r\n            String username = tokenService.parseToken(previousRefreshToken);\r\n            var user = (User) usrDetailsService.loadUserByUsername(username);\r\n            String accessToken = tokenService.generateAccessToken(user);\r\n            String refreshToken = tokenService.generateRefreshToken(user);\r\n    \r\n            return new TokensResponse(accessToken, refreshToken);\r\n        }\r\n    \r\n        record TokensResponse(String accessToken, String refreshToken) {}\r\n    \r\n    }\r\n\r\nAnd here is TokenService class where I generate those tokens:\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class JwtTokenServiceImpl implements JwtTokenService {\r\n    \r\n        private final JwtEncoder jwtEncoder;\r\n    \r\n        @Override\r\n        public String generateAccessToken(User user) {\r\n            Instant now = Instant.now();\r\n            String scope = user.getAuthorities().stream()\r\n                    .map(GrantedAuthority::getAuthority)\r\n                    .collect(Collectors.joining(&quot; &quot;));\r\n    \r\n            JwtClaimsSet claims = JwtClaimsSet.builder()\r\n                    .issuer(&quot;self&quot;)\r\n                    .issuedAt(now)\r\n                    .expiresAt(now.plus(2, ChronoUnit.MINUTES))\r\n                    .subject(user.getUsername())\r\n                    .claim(&quot;scope&quot;, scope)\r\n                    .build();\r\n            return this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\r\n        }\r\n    \r\n        @Override\r\n        public String generateRefreshToken(User user) {\r\n            Instant now = Instant.now();\r\n            String scope = &quot;ROLE_REFRESH_TOKEN&quot;;\r\n    \r\n            JwtClaimsSet claims = JwtClaimsSet.builder()\r\n                    .issuer(&quot;self&quot;)\r\n                    .issuedAt(now)\r\n                    .expiresAt(now.plus(10, ChronoUnit.MINUTES))\r\n                    .subject(user.getUsername())\r\n                    .claim(&quot;scope&quot;, scope)\r\n                    .build();\r\n            return this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\r\n        }\r\n    \r\n        @Override\r\n        public String parseToken(String token) {\r\n            try {\r\n                SignedJWT decodedJWT = SignedJWT.parse(token);\r\n                return decodedJWT.getJWTClaimsSet().getSubject();\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\nWhat I want to do is to restrict the refresh token to be used only for the refresh endpoint. Because what&#39;s the point of having a short-term live access token if you can use a refresh token for all endpoints? I have tried to give the refresh token scope REFRESH_TOKEN and added `@PreAuthorize(&quot;hasRole(&#39;REFRESH_TOKEN&#39;)&quot;)` annotation for the refresh token endpoint. But it doesn&#39;t work(I can still send access token to refresh endpoint and get new tokens), because Spring doesn&#39;t look for claims from token. He just loads the user from the database by username from token and checks his roles from here. \r\n\r\nPlease suggest how can I make the refresh token restricted only to one endpoint. Also would be great to make him one-time use but seems that I would need to store tokens somewhere for that.","title":"Restrict jwt refresh token to only one endpoint","body":"<p>I have implemented JWT token authorization &amp; authentication from Spring resource server dependency. Here is the config file:</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Value(&quot;${app.chat.jwt.public.key}&quot;)\n    private RSAPublicKey publicKey;\n\n    @Value(&quot;${app.chat.jwt.private.key}&quot;)\n    private RSAPrivateKey privateKey;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable();\n\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        http.exceptionHandling(\n                exceptions -&gt;\n                        exceptions\n                                .authenticationEntryPoint(new BearerTokenAuthenticationEntryPoint())\n                                .accessDeniedHandler(new BearerTokenAccessDeniedHandler()));\n\n        http.authorizeHttpRequests()\n                .requestMatchers(&quot;/auth/sign-in&quot;).permitAll()\n                .requestMatchers(&quot;/auth/sign-up&quot;).permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .httpBasic(Customizer.withDefaults())\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n\n        return http.build();\n    }\n\n    @SneakyThrows\n    @Bean\n    public JwtEncoder jwtEncoder() {\n        var jwk = new RSAKey.Builder(publicKey).privateKey(privateKey).build();\n        var jwks = new ImmutableJWKSet&lt;&gt;(new JWKSet(jwk));\n        return new NimbusJwtEncoder(jwks);\n    }\n\n    @SneakyThrows\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        return NimbusJwtDecoder.withPublicKey(publicKey).build();\n    }\n\n    @Bean\n    public JwtAuthenticationConverter jwtAuthenticationConverter() {\n        var jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n        jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\n        jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;);\n\n        var jwtAuthenticationConverter = new JwtAuthenticationConverter();\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\n        return jwtAuthenticationConverter;\n    }\n\n    @Bean\n    public CorsFilter corsFilter() {\n        UrlBasedCorsConfigurationSource source =\n                new UrlBasedCorsConfigurationSource();\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowCredentials(true);\n        config.addAllowedOrigin(&quot;*&quot;);\n        config.addAllowedHeader(&quot;*&quot;);\n        config.addAllowedMethod(&quot;*&quot;);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return new CorsFilter(source);\n    }\n\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(\n            AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n}\n</code></pre>\n<p>It works fine. I have AuthController where I have implemented endpoints for sign-in, sign-up, and refresh token. In each endpoint, I return a response with an access token and a refresh token. Here is the controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/auth&quot;)\n@RequiredArgsConstructor\npublic class AuthController {\n    private final JwtTokenService tokenService;\n    private final AuthenticationManager authManager;\n    private final UserDetailsService usrDetailsService;\n\n    private final UserService userService;\n\n\n\n    record LoginRequest(String username, String password) {}\n    @PostMapping(&quot;/sign-in&quot;)\n    public TokensResponse login(@RequestBody LoginRequest request) {\n\n        UsernamePasswordAuthenticationToken authenticationToken =\n                new UsernamePasswordAuthenticationToken(request.username, request.password);\n        authManager.authenticate(authenticationToken);\n\n        var user = (User) usrDetailsService.loadUserByUsername(request.username);\n        String accessToken = tokenService.generateAccessToken(user);\n        String refreshToken = tokenService.generateRefreshToken(user);\n\n        return new TokensResponse(accessToken, refreshToken);\n    }\n\n    record SignUpRequest(String username, String password){}\n\n    @PostMapping(&quot;/sign-up&quot;)\n    public TokensResponse signUp(@RequestBody SignUpRequest signUpRequest) {\n        User registeredUser = userService.register(new AuthRequestDto(signUpRequest.username(), signUpRequest.password()));\n\n        String accessToken = tokenService.generateAccessToken(registeredUser);\n        String refreshToken = tokenService.generateRefreshToken(registeredUser);\n\n        return new TokensResponse(accessToken, refreshToken);\n    }\n\n    @PreAuthorize(&quot;hasRole('REFRESH_TOKEN')&quot;)\n    @GetMapping(&quot;/token/refresh&quot;)\n    public TokensResponse refreshToken(HttpServletRequest request) {\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\n        String previousRefreshToken = headerAuth.substring(7);\n\n        String username = tokenService.parseToken(previousRefreshToken);\n        var user = (User) usrDetailsService.loadUserByUsername(username);\n        String accessToken = tokenService.generateAccessToken(user);\n        String refreshToken = tokenService.generateRefreshToken(user);\n\n        return new TokensResponse(accessToken, refreshToken);\n    }\n\n    record TokensResponse(String accessToken, String refreshToken) {}\n\n}\n</code></pre>\n<p>And here is TokenService class where I generate those tokens:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class JwtTokenServiceImpl implements JwtTokenService {\n\n    private final JwtEncoder jwtEncoder;\n\n    @Override\n    public String generateAccessToken(User user) {\n        Instant now = Instant.now();\n        String scope = user.getAuthorities().stream()\n                .map(GrantedAuthority::getAuthority)\n                .collect(Collectors.joining(&quot; &quot;));\n\n        JwtClaimsSet claims = JwtClaimsSet.builder()\n                .issuer(&quot;self&quot;)\n                .issuedAt(now)\n                .expiresAt(now.plus(2, ChronoUnit.MINUTES))\n                .subject(user.getUsername())\n                .claim(&quot;scope&quot;, scope)\n                .build();\n        return this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\n    }\n\n    @Override\n    public String generateRefreshToken(User user) {\n        Instant now = Instant.now();\n        String scope = &quot;ROLE_REFRESH_TOKEN&quot;;\n\n        JwtClaimsSet claims = JwtClaimsSet.builder()\n                .issuer(&quot;self&quot;)\n                .issuedAt(now)\n                .expiresAt(now.plus(10, ChronoUnit.MINUTES))\n                .subject(user.getUsername())\n                .claim(&quot;scope&quot;, scope)\n                .build();\n        return this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\n    }\n\n    @Override\n    public String parseToken(String token) {\n        try {\n            SignedJWT decodedJWT = SignedJWT.parse(token);\n            return decodedJWT.getJWTClaimsSet().getSubject();\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>What I want to do is to restrict the refresh token to be used only for the refresh endpoint. Because what's the point of having a short-term live access token if you can use a refresh token for all endpoints? I have tried to give the refresh token scope REFRESH_TOKEN and added <code>@PreAuthorize(&quot;hasRole('REFRESH_TOKEN')&quot;)</code> annotation for the refresh token endpoint. But it doesn't work(I can still send access token to refresh endpoint and get new tokens), because Spring doesn't look for claims from token. He just loads the user from the database by username from token and checks his roles from here.</p>\n<p>Please suggest how can I make the refresh token restricted only to one endpoint. Also would be great to make him one-time use but seems that I would need to store tokens somewhere for that.</p>\n"},{"tags":["java","security","networking","firewall"],"answers":[{"comments":[{"owner":{"account_id":878519,"reputation":2255,"user_id":130858,"accept_rate":33,"display_name":"nilesh"},"score":0,"creation_date":1252334256,"post_id":1389094,"comment_id":1230096,"body_markdown":"1 No I cannot telnet the hostIP/port. \n\n2 Yes I am able to connect to other IP in lan. The only remote server is being tried.\n\n3 I am using IP address. \n\n4 Yes both machines are using firewall, but server firewall but has allowed listening on specific port, client machine firewall I guess should not be problem as it is creating outgoing connection. \n\nnetstat -pan | grep 5014 tcp 0 0 :::5014 :::* LISTEN 6212/java","body":"1 No I cannot telnet the hostIP/port.   2 Yes I am able to connect to other IP in lan. The only remote server is being tried.  3 I am using IP address.   4 Yes both machines are using firewall, but server firewall but has allowed listening on specific port, client machine firewall I guess should not be problem as it is creating outgoing connection.   netstat -pan | grep 5014 tcp 0 0 :::5014 :::* LISTEN 6212/java"},{"owner":{"account_id":44790,"reputation":5396,"user_id":131652,"accept_rate":75,"display_name":"SteveD"},"score":0,"creation_date":1252357161,"post_id":1389094,"comment_id":1231539,"body_markdown":"If you can&#39;t telnet to the host/port then there&#39;s something fundamentally broken with the network settings somewhere.","body":"If you can&#39;t telnet to the host/port then there&#39;s something fundamentally broken with the network settings somewhere."},{"owner":{"account_id":878519,"reputation":2255,"user_id":130858,"accept_rate":33,"display_name":"nilesh"},"score":0,"creation_date":1252390035,"post_id":1389094,"comment_id":1232923,"body_markdown":"Recently I checked, I am able to telnet certain ports (the port on which mysql-cluster is running) ; but not any other such as 5014 mentioned earlier. I even tried to use some other ports but to no use.","body":"Recently I checked, I am able to telnet certain ports (the port on which mysql-cluster is running) ; but not any other such as 5014 mentioned earlier. I even tried to use some other ports but to no use."},{"owner":{"account_id":44790,"reputation":5396,"user_id":131652,"accept_rate":75,"display_name":"SteveD"},"score":0,"creation_date":1252446249,"post_id":1389094,"comment_id":1237503,"body_markdown":"Either something on your PC is stopping outgoing connections to those ports or something is blocking incoming connections to those ports on the other computer.","body":"Either something on your PC is stopping outgoing connections to those ports or something is blocking incoming connections to those ports on the other computer."}],"tags":[],"owner":{"account_id":44790,"reputation":5396,"user_id":131652,"accept_rate":75,"display_name":"SteveD"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1252325410,"creation_date":1252325410,"answer_id":1389094,"question_id":1389055,"body_markdown":"I suggest testing things to narrow down the problem area:\r\n\r\n1. can you telnet to the host/port?\r\n1. Can Java connect to any other host/port successfully?\r\n1. Are you using host names or IP addresses - try which ever one you are not using.\r\n1. Is either computer running a firewall?","title":"UnknownHostException for server java","body":"<p>I suggest testing things to narrow down the problem area:</p>\n\n<ol>\n<li>can you telnet to the host/port?</li>\n<li>Can Java connect to any other host/port successfully?</li>\n<li>Are you using host names or IP addresses - try which ever one you are not using.</li>\n<li>Is either computer running a firewall?</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":878519,"reputation":2255,"user_id":130858,"accept_rate":33,"display_name":"nilesh"},"score":0,"creation_date":1252334363,"post_id":1389158,"comment_id":1230103,"body_markdown":"there is no such file in my knowledge, also I have tried connecting through other machines as well, it connected fine.","body":"there is no such file in my knowledge, also I have tried connecting through other machines as well, it connected fine."}],"tags":[],"owner":{"account_id":18835,"reputation":82201,"user_id":43582,"accept_rate":83,"display_name":"Bombe"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1252326208,"creation_date":1252326208,"answer_id":1389158,"question_id":1389055,"body_markdown":"Additionally you should also check your `.ssh/config` file, maybe there is a different `Hostname` defined for the name you use on the command line.","title":"UnknownHostException for server java","body":"<p>Additionally you should also check your <code>.ssh/config</code> file, maybe there is a different <code>Hostname</code> defined for the name you use on the command line.</p>\n"},{"tags":[],"owner":{"account_id":56914,"reputation":8368,"user_id":170451,"accept_rate":55,"display_name":"KarolDepka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1252449834,"creation_date":1252449834,"answer_id":1396727,"question_id":1389055,"body_markdown":"What about /etc/hosts? Maybe it interferes somehow? Just a guess.","title":"UnknownHostException for server java","body":"<p>What about /etc/hosts? Maybe it interferes somehow? Just a guess.</p>\n"},{"tags":[],"owner":{"account_id":2111,"reputation":1579,"user_id":2910,"accept_rate":67,"display_name":"benc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678443942,"creation_date":1678443942,"answer_id":75694916,"question_id":1389055,"body_markdown":"Your two examples did not use the same port. \r\n\r\n&gt; It will try to establish a TCP connection on port 7 (Echo) of the destination host\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#isReachable(int)\r\n\r\nThe default ssh port is 22.\r\n\r\nIf you really want to test basic connectivity (opening a TCP connection), you need to do like for like comparisons.\r\n\r\nIf you read the API documentation, the network logic used is rather poor (the fact that it doesn&#39;t give you a clear approach, and document errors for each phase, is a give-away). \r\n\r\nAssuming the &quot;No route to host&quot; error came from making the ECHO connection, SSH should fail the same way. In my option, firewalls should not drop specific connections to **a port** with a routing error, but network API writers and network admins seem to do whatever they want these days, and you have to live with it.\r\n\r\nIf you needed to clearly narrow this down, you&#39;d want to look at a packet trace.","title":"UnknownHostException for server java","body":"<p>Your two examples did not use the same port.</p>\n<blockquote>\n<p>It will try to establish a TCP connection on port 7 (Echo) of the destination host</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#isReachable(int)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#isReachable(int)</a></p>\n<p>The default ssh port is 22.</p>\n<p>If you really want to test basic connectivity (opening a TCP connection), you need to do like for like comparisons.</p>\n<p>If you read the API documentation, the network logic used is rather poor (the fact that it doesn't give you a clear approach, and document errors for each phase, is a give-away).</p>\n<p>Assuming the &quot;No route to host&quot; error came from making the ECHO connection, SSH should fail the same way. In my option, firewalls should not drop specific connections to <strong>a port</strong> with a routing error, but network API writers and network admins seem to do whatever they want these days, and you have to live with it.</p>\n<p>If you needed to clearly narrow this down, you'd want to look at a packet trace.</p>\n"}],"owner":{"account_id":878519,"reputation":2255,"user_id":130858,"accept_rate":33,"display_name":"nilesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2069,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1678443942,"creation_date":1252324856,"question_id":1389055,"body_markdown":"I am not able to connect to an remote known server through Java code; the exception while connecting is java.net.NoRouteToHostException: No route to host.\r\n\r\nBut strangely, I am able to connect to same server through ssh.\r\n\r\n*Details:*\r\nSimple Java client when tries to establish connection with Java standalone server, while conneting the exception occurs at following statement:\r\n\r\n    Socket socket = new Socket(ServerIP ServerPort);\r\n\r\nThe port needed is open on server so that externally request can come in. \r\n\r\nAgain the following is returns false\r\n\r\n    InetAddress.getByName(SERVER_IP).isReachable(1000)\r\n\r\nThe Server is running on Fedora, Java 5.\r\n\r\nFYI: [Java cannot resolve DNS address from AIX: UnknownHostException][1] is almost same to my question, but somehow this is not AIX related; moreover I feel the issue to be more of Network or firewall issue.\r\n\r\nPlease guide me.\r\n\r\n\r\n  [1]: https://serverfault.com/questions/22290/java-cannot-resolve-dns-address-from-aix-unknownhostexception","title":"UnknownHostException for server java","body":"<p>I am not able to connect to an remote known server through Java code; the exception while connecting is java.net.NoRouteToHostException: No route to host.</p>\n\n<p>But strangely, I am able to connect to same server through ssh.</p>\n\n<p><em>Details:</em>\nSimple Java client when tries to establish connection with Java standalone server, while conneting the exception occurs at following statement:</p>\n\n<pre><code>Socket socket = new Socket(ServerIP ServerPort);\n</code></pre>\n\n<p>The port needed is open on server so that externally request can come in. </p>\n\n<p>Again the following is returns false</p>\n\n<pre><code>InetAddress.getByName(SERVER_IP).isReachable(1000)\n</code></pre>\n\n<p>The Server is running on Fedora, Java 5.</p>\n\n<p>FYI: <a href=\"https://serverfault.com/questions/22290/java-cannot-resolve-dns-address-from-aix-unknownhostexception\">Java cannot resolve DNS address from AIX: UnknownHostException</a> is almost same to my question, but somehow this is not AIX related; moreover I feel the issue to be more of Network or firewall issue.</p>\n\n<p>Please guide me.</p>\n"},{"tags":["java","android","database","firebase","android-studio"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":1,"creation_date":1678395479,"post_id":75689456,"comment_id":133529207,"body_markdown":"You&#39;re trying to get &quot;schede&quot; instead of &quot;list&quot;. Get the list and then take the button the user needs from the list.","body":"You&#39;re trying to get &quot;schede&quot; instead of &quot;list&quot;. Get the list and then take the button the user needs from the list."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678434393,"post_id":75689456,"comment_id":133535023,"body_markdown":"&quot;doesn&#39;t seem to work&quot; doesn&#39;t provide enough information so we can help. What exactly doesn&#39;t work? Do you have any errors?","body":"&quot;doesn&#39;t seem to work&quot; doesn&#39;t provide enough information so we can help. What exactly doesn&#39;t work? Do you have any errors?"},{"owner":{"account_id":23395252,"reputation":5,"user_id":17459382,"display_name":"Francesco"},"score":0,"creation_date":1678443678,"post_id":75689456,"comment_id":133537530,"body_markdown":"Sorry, I&#39;ve adjusted the question properly","body":"Sorry, I&#39;ve adjusted the question properly"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1678474755,"post_id":75689456,"comment_id":133546051,"body_markdown":"You didn&#39;t retrieve the data you just have a reference. You need to add an eventlistener to get the values.","body":"You didn&#39;t retrieve the data you just have a reference. You need to add an eventlistener to get the values."},{"owner":{"account_id":23395252,"reputation":5,"user_id":17459382,"display_name":"Francesco"},"score":0,"creation_date":1678530449,"post_id":75689456,"comment_id":133552971,"body_markdown":"I tried adding an eventlistener &quot;OnDataChange&quot; but then how I retrieve when I want to (at the start of the activity to create the buttons), and not only when data is changed?","body":"I tried adding an eventlistener &quot;OnDataChange&quot; but then how I retrieve when I want to (at the start of the activity to create the buttons), and not only when data is changed?"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1678572355,"post_id":75689456,"comment_id":133560691,"body_markdown":"You need to use `addListenerForSingleValueEvent`.","body":"You need to use <code>addListenerForSingleValueEvent</code>."},{"owner":{"account_id":23395252,"reputation":5,"user_id":17459382,"display_name":"Francesco"},"score":0,"creation_date":1678697936,"post_id":75689456,"comment_id":133576976,"body_markdown":"Ho do I retrieve it then?","body":"Ho do I retrieve it then?"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1678818293,"post_id":75689456,"comment_id":133606130,"body_markdown":"`onDataChange` executes immediately so you just need to take the value from the snapshot.","body":"<code>onDataChange</code> executes immediately so you just need to take the value from the snapshot."},{"owner":{"account_id":23395252,"reputation":5,"user_id":17459382,"display_name":"Francesco"},"score":0,"creation_date":1678954482,"post_id":75689456,"comment_id":133633641,"body_markdown":"But what if I want to retrieve at the start of the application, and not when I assign the listener?","body":"But what if I want to retrieve at the start of the application, and not when I assign the listener?"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1678996475,"post_id":75689456,"comment_id":133646244,"body_markdown":"You may have to use `SharedPreferences`.","body":"You may have to use <code>SharedPreferences</code>."}],"owner":{"account_id":23395252,"reputation":5,"user_id":17459382,"display_name":"Francesco"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678443612,"creation_date":1678391874,"question_id":75689456,"body_markdown":"I&#39;m using Realtime Database (Firebase) in my android application with Java and I wanted to store data to create custom buttons every time a user opens my app. I dont want a user&#39;s custom buttons to disappear when the app is closed, but I cant seem to get this right. \r\n\r\nI tried saving a list in my databse as so:\r\n`mDatabase.child(&quot;users&quot;).child(userId).child(&quot;list&quot;).setValue(list);`\r\nand retrieving like so:\r\n`schede=(List)mDatabase.child(&quot;users&quot;).child(userId).child(&quot;list&quot;);`\r\nBut I get this error on the latter piece of code:\r\n\r\n    Caused by: java.lang.ClassCastException: com.google.firebase.database.DatabaseReference cannot be cast to java.util.List\r\n\r\nI&#39;m also open to alternative solutions, firebase seems the best to me.","title":"firebase to create buttons android studio","body":"<p>I'm using Realtime Database (Firebase) in my android application with Java and I wanted to store data to create custom buttons every time a user opens my app. I dont want a user's custom buttons to disappear when the app is closed, but I cant seem to get this right.</p>\n<p>I tried saving a list in my databse as so:\n<code>mDatabase.child(&quot;users&quot;).child(userId).child(&quot;list&quot;).setValue(list);</code>\nand retrieving like so:\n<code>schede=(List)mDatabase.child(&quot;users&quot;).child(userId).child(&quot;list&quot;);</code>\nBut I get this error on the latter piece of code:</p>\n<pre><code>Caused by: java.lang.ClassCastException: com.google.firebase.database.DatabaseReference cannot be cast to java.util.List\n</code></pre>\n<p>I'm also open to alternative solutions, firebase seems the best to me.</p>\n"},{"tags":["java","docker","gradle","sonarqube","jacoco"],"comments":[{"owner":{"account_id":4567592,"reputation":4316,"user_id":3708208,"accept_rate":75,"display_name":"Simon Schrottner"},"score":0,"creation_date":1586531411,"post_id":61064703,"comment_id":108168045,"body_markdown":"are you aware of the missing s in `sonar.coverage.jacoco.xmlReportPaths` at the end?","body":"are you aware of the missing s in <code>sonar.coverage.jacoco.xmlReportPaths</code> at the end?"},{"owner":{"account_id":11987807,"reputation":196,"user_id":8771870,"display_name":"bWilliamson"},"score":0,"creation_date":1586854839,"post_id":61064703,"comment_id":108274171,"body_markdown":"@SimonSchrottner in the docs both `Paths` and `Path` are accepted, either way I&#39;ve tried both and they don&#39;t work","body":"@SimonSchrottner in the docs both <code>Paths</code> and <code>Path</code> are accepted, either way I&#39;ve tried both and they don&#39;t work"},{"owner":{"account_id":4567592,"reputation":4316,"user_id":3708208,"accept_rate":75,"display_name":"Simon Schrottner"},"score":0,"creation_date":1586855300,"post_id":61064703,"comment_id":108274378,"body_markdown":"you do not need sonar.jacoco.reportPaht(s) if you use `sonar.coverage.jacoco.xmlReportPaths` as long as you use `sonar.coverage.jacoco.xmlReportPaths` and not `sonar.coverage.jacoco.xmlReportPath` -https://docs.sonarqube.org/latest/analysis/coverage","body":"you do not need sonar.jacoco.reportPaht(s) if you use <code>sonar.coverage.jacoco.xmlReportPaths</code> as long as you use <code>sonar.coverage.jacoco.xmlReportPaths</code> and not <code>sonar.coverage.jacoco.xmlReportPath</code> -<a href=\"https://docs.sonarqube.org/latest/analysis/coverage\" rel=\"nofollow noreferrer\">docs.sonarqube.org/latest/analysis/coverage</a>"}],"answers":[{"tags":[],"owner":{"account_id":49950,"reputation":437,"user_id":148905,"accept_rate":62,"display_name":"qasanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1587578036,"creation_date":1587578036,"answer_id":61371855,"question_id":61064703,"body_markdown":"You have to enable XML report property as true.\r\n\r\nxml.enabled true\r\n","title":"Jacoco code coverage for Sonarqube 8 using Gradle","body":"<p>You have to enable XML report property as true.</p>\n\n<p>xml.enabled true</p>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1678443041,"creation_date":1610465306,"answer_id":65686950,"question_id":61064703,"body_markdown":"The issue in your configuration is type of the property name. It is **sonar.coverage.jacoco.xmlReportPaths** and not **sonar.coverage.jacoco.xmlReportPath** \r\n\r\nI am not using the gradle sonar plugin, but using Jenkin Job&#39;s -&gt; Execute SonarQube Scanner configuration.\r\n\r\nBy default Jacoco generates only html files, for SonarQube we need xmlReportPath.\r\n\r\nBelow code in gradle will enable the xml reporting and will generate the file with default name as **jacocoTestReport.xml**\r\n\r\n    jacocoTestReport {\r\n        reports {\r\n            xml.enabled true\r\n        }\r\n    }\r\n\r\nThis generates the following file in Jenkins workspace at location &lt;JenkinsJobFullPath&gt;/ws/build/reports/jacoco/test/jacocoTestReport.xml\talong with \r\n&lt;JenkinsJobFullPath&gt;/ws/build/reports/jacoco/html folder which contains all the html file for the coverage reports. This report can be accessed by accessing index.html file located at &lt;JenkinsJobFullPath&gt;/ws/build/reports/jacoco/html/index.xml\r\n\r\nAnd path to the Jacoco xml report file to be provided in the below property\r\n\r\n    sonar.coverage.jacoco.xmlReportPaths=&lt;rootFolder&gt;/build/reports/jacoco/test/jacocoTestReport.xml\r\n\r\n\r\nThis did work for me.\r\n\r\nBefore this in SonarQube I was not able to see the Coverage and in other project Coverage was shown as 0.0%.\r\n\r\nSo, in summary SonarQube is not able to see your JaCoCo report file.","title":"Jacoco code coverage for Sonarqube 8 using Gradle","body":"<p>The issue in your configuration is type of the property name. It is <strong>sonar.coverage.jacoco.xmlReportPaths</strong> and not <strong>sonar.coverage.jacoco.xmlReportPath</strong></p>\n<p>I am not using the gradle sonar plugin, but using Jenkin Job's -&gt; Execute SonarQube Scanner configuration.</p>\n<p>By default Jacoco generates only html files, for SonarQube we need xmlReportPath.</p>\n<p>Below code in gradle will enable the xml reporting and will generate the file with default name as <strong>jacocoTestReport.xml</strong></p>\n<pre><code>jacocoTestReport {\n    reports {\n        xml.enabled true\n    }\n}\n</code></pre>\n<p>This generates the following file in Jenkins workspace at location /ws/build/reports/jacoco/test/jacocoTestReport.xml   along with\n/ws/build/reports/jacoco/html folder which contains all the html file for the coverage reports. This report can be accessed by accessing index.html file located at /ws/build/reports/jacoco/html/index.xml</p>\n<p>And path to the Jacoco xml report file to be provided in the below property</p>\n<pre><code>sonar.coverage.jacoco.xmlReportPaths=&lt;rootFolder&gt;/build/reports/jacoco/test/jacocoTestReport.xml\n</code></pre>\n<p>This did work for me.</p>\n<p>Before this in SonarQube I was not able to see the Coverage and in other project Coverage was shown as 0.0%.</p>\n<p>So, in summary SonarQube is not able to see your JaCoCo report file.</p>\n"},{"comments":[{"owner":{"account_id":11987807,"reputation":196,"user_id":8771870,"display_name":"bWilliamson"},"score":1,"creation_date":1627945026,"post_id":68578880,"comment_id":121286228,"body_markdown":"required insted of enabled... you could be onto something here :)","body":"required insted of enabled... you could be onto something here :)"}],"tags":[],"owner":{"account_id":203641,"reputation":2744,"user_id":451420,"accept_rate":81,"display_name":"luthier"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1627572774,"creation_date":1627572774,"answer_id":68578880,"question_id":61064703,"body_markdown":"To expand on [qasanov][1]&#39;s answer, I had to add this to my `build.gradle` file in order for JaCoCo to generate the XML report, which was then picked up automatically by SonarQube:\r\n\r\n```\r\njacocoTestReport {\r\n    reports {\r\n        xml.required = true\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/148905/qasanov","title":"Jacoco code coverage for Sonarqube 8 using Gradle","body":"<p>To expand on <a href=\"https://stackoverflow.com/users/148905/qasanov\">qasanov</a>'s answer, I had to add this to my <code>build.gradle</code> file in order for JaCoCo to generate the XML report, which was then picked up automatically by SonarQube:</p>\n<pre><code>jacocoTestReport {\n    reports {\n        xml.required = true\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11987807,"reputation":196,"user_id":8771870,"display_name":"bWilliamson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10947,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":61371855,"answer_count":3,"score":8,"last_activity_date":1678443041,"creation_date":1586191302,"question_id":61064703,"body_markdown":"Code Coverage is showing 0% on dashboard \r\n\r\n[![enter image description here][1]][1]\r\n\r\nbuild.gradle file\r\n\r\n```\r\nplugins {\r\n    id &quot;org.sonarqube&quot; version &quot;2.8&quot;\r\n    id &quot;java&quot;\r\n    id &quot;idea&quot;\r\n    id &quot;jacoco&quot;\r\n}\r\n\r\njacoco {\r\n    toolVersion = &quot;0.8.5&quot;\r\n}\r\n\r\njacocoTestReport {\r\n    reports {\r\n        html.enabled true\r\n        xml.enabled true\r\n        xml.destination file(&quot;${buildDir}/reports/jacoco.xml&quot;)\r\n    }\r\n}\r\n\r\nplugins.withType(JacocoPlugin) {\r\n    tasks[&quot;test&quot;].finalizedBy &#39;jacocoTestReport&#39;\r\n}\r\n\r\nsonarqube {\r\n    properties {\r\n        property &quot;sonar.java.coveragePlugin&quot;, &quot;jacoco&quot;\r\n        property &quot;sonar.host.url&quot;, &quot;http://169.254.1.100:9000&quot;\r\n        property &quot;sonar.coverage.jacoco.xmlReportPath&quot;, &quot;${buildDir}/reports/jacoco.xml&quot;\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    jcenter()\r\n}\r\n\r\ndependencies {\r\n    // https://mvnrepository.com/artifact/junit/junit\r\n    testCompile &#39;junit:junit:4.12&#39;\r\n\r\n}\r\n\r\ncheck.dependsOn jacocoTestReport\r\n```\r\nRunning this command\r\n```\r\n./gradlew build jacocoTestReport sonarqube\r\n```\r\n\r\nThe JacocoTestReport gets generated with the correct code coverage\r\n\r\nSonarqube gradle task produces this log\r\n```\r\n&gt; Task :sonarqube\r\nSonarScanner will require Java 11 to run starting in SonarQube 8.x\r\nProperty &#39;sonar.jacoco.reportPath&#39; is no longer supported. Use JaCoCo&#39;s xml report and sonar-jacoco plugin.\r\nProperty &#39;sonar.jacoco.reportPaths&#39; is no longer supported. Use JaCoCo&#39;s xml report and sonar-jacoco plugin.\r\n```\r\n\r\nBeen Googling for half a day, and the only real solutions to this problem is the following:\r\nhttps://stackoverflow.com/questions/44892248/property-sonar-jacoco-reportpath-is-deprecated-please-use-sonar-jacoco-repor\r\n\r\nThis answer [here][2] explains the double output of:\r\n\r\n\r\n```\r\nProperty &#39;sonar.jacoco.reportPaths&#39; is no longer supported. Use JaCoCo&#39;s xml report and sonar-jacoco plugin.\r\n```\r\nHowever this seems to not have been added to the gradle plugin as the plugin being used is 2.8, the lastest as of posting.\r\n\r\nIs there something I&#39;m missing?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ylK8i.png\r\n  [2]: https://jira.sonarsource.com/browse/SONARJAVA-3300","title":"Jacoco code coverage for Sonarqube 8 using Gradle","body":"<p>Code Coverage is showing 0% on dashboard </p>\n\n<p><a href=\"https://i.stack.imgur.com/ylK8i.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ylK8i.png\" alt=\"enter image description here\"></a></p>\n\n<p>build.gradle file</p>\n\n<pre><code>plugins {\n    id \"org.sonarqube\" version \"2.8\"\n    id \"java\"\n    id \"idea\"\n    id \"jacoco\"\n}\n\njacoco {\n    toolVersion = \"0.8.5\"\n}\n\njacocoTestReport {\n    reports {\n        html.enabled true\n        xml.enabled true\n        xml.destination file(\"${buildDir}/reports/jacoco.xml\")\n    }\n}\n\nplugins.withType(JacocoPlugin) {\n    tasks[\"test\"].finalizedBy 'jacocoTestReport'\n}\n\nsonarqube {\n    properties {\n        property \"sonar.java.coveragePlugin\", \"jacoco\"\n        property \"sonar.host.url\", \"http://169.254.1.100:9000\"\n        property \"sonar.coverage.jacoco.xmlReportPath\", \"${buildDir}/reports/jacoco.xml\"\n    }\n}\n\nrepositories {\n    mavenCentral()\n    jcenter()\n}\n\ndependencies {\n    // https://mvnrepository.com/artifact/junit/junit\n    testCompile 'junit:junit:4.12'\n\n}\n\ncheck.dependsOn jacocoTestReport\n</code></pre>\n\n<p>Running this command</p>\n\n<pre><code>./gradlew build jacocoTestReport sonarqube\n</code></pre>\n\n<p>The JacocoTestReport gets generated with the correct code coverage</p>\n\n<p>Sonarqube gradle task produces this log</p>\n\n<pre><code>&gt; Task :sonarqube\nSonarScanner will require Java 11 to run starting in SonarQube 8.x\nProperty 'sonar.jacoco.reportPath' is no longer supported. Use JaCoCo's xml report and sonar-jacoco plugin.\nProperty 'sonar.jacoco.reportPaths' is no longer supported. Use JaCoCo's xml report and sonar-jacoco plugin.\n</code></pre>\n\n<p>Been Googling for half a day, and the only real solutions to this problem is the following:\n<a href=\"https://stackoverflow.com/questions/44892248/property-sonar-jacoco-reportpath-is-deprecated-please-use-sonar-jacoco-repor\">Property &#39;sonar.jacoco.reportPath&#39; is deprecated. Please use &#39;sonar.jacoco.reportPaths&#39; instead</a></p>\n\n<p>This answer <a href=\"https://jira.sonarsource.com/browse/SONARJAVA-3300\" rel=\"noreferrer\">here</a> explains the double output of:</p>\n\n<pre><code>Property 'sonar.jacoco.reportPaths' is no longer supported. Use JaCoCo's xml report and sonar-jacoco plugin.\n</code></pre>\n\n<p>However this seems to not have been added to the gradle plugin as the plugin being used is 2.8, the lastest as of posting.</p>\n\n<p>Is there something I'm missing?</p>\n"},{"tags":["java","microsoft-teams"],"comments":[{"owner":{"account_id":22099631,"reputation":757,"user_id":16356296,"display_name":"Prasad-MSFT"},"score":0,"creation_date":1678692221,"post_id":75694740,"comment_id":133575711,"body_markdown":"Could you please provide more details on your issue? Any repro steps or reference would be really helpful.","body":"Could you please provide more details on your issue? Any repro steps or reference would be really helpful."}],"owner":{"account_id":21256601,"reputation":13,"user_id":15638015,"display_name":"danielbres"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678442883,"creation_date":1678442883,"question_id":75694740,"body_markdown":"Trying to make a notification service for MS Teams in Java.\r\n\r\nUsing IntelliJ IDEA 2020.3.4 with OpenJDK 11 and Maven.\r\n\r\nUsed the code and the dependencies from the doscs:\r\n\r\nhttps://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=Java#client-credentials-provider\r\nhttps://learn.microsoft.com/en-us/graph/sdks/sdk-installation\r\n\r\nThen the following error comes up:\r\n[![unknown class](https://i.stack.imgur.com/iENfu.png)](https://i.stack.imgur.com/iENfu.png)\r\n\r\nTried using different versions of JDK (19 and 17) and tried using the latest dependecies, but still didn&#39;t find the cause or solution for it.","title":"Microsoft Graph classes unknown, but the classes are already imported, why is that?","body":"<p>Trying to make a notification service for MS Teams in Java.</p>\n<p>Using IntelliJ IDEA 2020.3.4 with OpenJDK 11 and Maven.</p>\n<p>Used the code and the dependencies from the doscs:</p>\n<p><a href=\"https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=Java#client-credentials-provider\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=Java#client-credentials-provider</a>\n<a href=\"https://learn.microsoft.com/en-us/graph/sdks/sdk-installation\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/sdks/sdk-installation</a></p>\n<p>Then the following error comes up:\n<a href=\"https://i.stack.imgur.com/iENfu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iENfu.png\" alt=\"unknown class\" /></a></p>\n<p>Tried using different versions of JDK (19 and 17) and tried using the latest dependecies, but still didn't find the cause or solution for it.</p>\n"},{"tags":["java","parsing","antlr","antlr4"],"comments":[{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":1,"creation_date":1554712649,"post_id":55568320,"comment_id":97837552,"body_markdown":"I cannot reproduce it. The input `Variable = foo(some_foo);` is properly parsed.","body":"I cannot reproduce it. The input <code>Variable = foo(some_foo);</code> is properly parsed."},{"owner":{"account_id":11218771,"reputation":669,"user_id":8230508,"display_name":"Jakob Sachs"},"score":0,"creation_date":1554714061,"post_id":55568320,"comment_id":97838393,"body_markdown":"@BartKiers I updated the question. This is now my smallest example that still produces the error.","body":"@BartKiers I updated the question. This is now my smallest example that still produces the error."},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":1,"creation_date":1554714637,"post_id":55568320,"comment_id":97838718,"body_markdown":"If I add the `SEMICOLON` to your lexer grammar, the input `Foo = mpsga(LT);` is, again, properly parsed with ANTLR 4.7.2. Parse tree is: https://ibb.co/HxgX8Xt","body":"If I add the <code>SEMICOLON</code> to your lexer grammar, the input <code>Foo = mpsga(LT);</code> is, again, properly parsed with ANTLR 4.7.2. Parse tree is: <a href=\"https://ibb.co/HxgX8Xt\" rel=\"nofollow noreferrer\">ibb.co/HxgX8Xt</a>"},{"owner":{"account_id":11218771,"reputation":669,"user_id":8230508,"display_name":"Jakob Sachs"},"score":0,"creation_date":1554714977,"post_id":55568320,"comment_id":97838911,"body_markdown":"@BartKiers Strange. What are you using to parse it? Looks like the IntelliJ ANTLR plugin. \nI&#39;m using the &quot;test rule&quot; feature of that plugin right now and it still gives me `line 1:6 mismatched input &#39;mpsga(LT)&#39; expecting &#39;mpsga&#39;`","body":"@BartKiers Strange. What are you using to parse it? Looks like the IntelliJ ANTLR plugin.  I&#39;m using the &quot;test rule&quot; feature of that plugin right now and it still gives me <code>line 1:6 mismatched input &#39;mpsga(LT)&#39; expecting &#39;mpsga&#39;</code>"},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":1,"creation_date":1554715702,"post_id":55568320,"comment_id":97839299,"body_markdown":"Yes IntelliJ&#39;s ANTLR plugin. Here it is: https://ibb.co/6Pf4Bc4","body":"Yes IntelliJ&#39;s ANTLR plugin. Here it is: <a href=\"https://ibb.co/6Pf4Bc4\" rel=\"nofollow noreferrer\">ibb.co/6Pf4Bc4</a>"},{"owner":{"account_id":11218771,"reputation":669,"user_id":8230508,"display_name":"Jakob Sachs"},"score":0,"creation_date":1554716170,"post_id":55568320,"comment_id":97839569,"body_markdown":"@BartKiers Thanks. I just restarted my IntelliJ (which I did twice before) and now the minimal example actually works. I guess i now need to find the difference to my actual code. But thanks ^^","body":"@BartKiers Thanks. I just restarted my IntelliJ (which I did twice before) and now the minimal example actually works. I guess i now need to find the difference to my actual code. But thanks ^^"},{"owner":{"account_id":11218771,"reputation":669,"user_id":8230508,"display_name":"Jakob Sachs"},"score":0,"creation_date":1554717628,"post_id":55568320,"comment_id":97840450,"body_markdown":"Okay i think i know what the issue is. There seems to be a bug in the ANTLR Plugin. I get the error , restart my InteliiJ and the error is gone.","body":"Okay i think i know what the issue is. There seems to be a bug in the ANTLR Plugin. I get the error , restart my InteliiJ and the error is gone."},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":1,"creation_date":1554717738,"post_id":55568320,"comment_id":97840514,"body_markdown":"No problem @Jakob","body":"No problem @Jakob"}],"answers":[{"comments":[{"owner":{"account_id":11218771,"reputation":669,"user_id":8230508,"display_name":"Jakob Sachs"},"score":0,"creation_date":1554709419,"post_id":55568425,"comment_id":97835925,"body_markdown":"Thanks for the quick Response, that was a typo. I fixed the question ^^","body":"Thanks for the quick Response, that was a typo. I fixed the question ^^"},{"owner":{"account_id":11218771,"reputation":669,"user_id":8230508,"display_name":"Jakob Sachs"},"score":0,"creation_date":1554709558,"post_id":55568425,"comment_id":97835994,"body_markdown":"Yes, the typo was in the question, not in my grammar.","body":"Yes, the typo was in the question, not in my grammar."}],"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554709308,"creation_date":1554709308,"answer_id":55568425,"question_id":55568320,"body_markdown":"It&#39;s the argument: your grammar accepts &#39;foo&#39; or &#39;foo2&#39; as constants, not some_foo.","title":"ANTLR mismatched input &#39;foo(some_foo)&#39; expecting {&#39;foo&#39;}","body":"<p>It's the argument: your grammar accepts 'foo' or 'foo2' as constants, not some_foo.</p>\n"}],"owner":{"account_id":11218771,"reputation":669,"user_id":8230508,"display_name":"Jakob Sachs"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1678442747,"creation_date":1554708886,"question_id":55568320,"body_markdown":"I&#39;m writing a parser using ANTLR and am now at the stage of testing my parser/lexer.\nI stumbled over a strange bug while trying to parse basically a variable assignment. (Like this)\n\n`Foo = mpsga(LT);`\n\nI get the error : `mismatched input &#39;line 1:6 mismatched input &#39;mpsga(LT)&#39; expecting &#39;mpsga&#39;`\n\nThis is especially strange for when I remove the brackets (or the argument `LT`),\nthe parser recognizes `mpsga` and it only misses the brackets (or the argument).\n\n\n\n---\nMy Grammar looks something like this:\n\n## Lexer ##\n```\nlexer grammar FooLexer;\n\nCOMMENT\n:\n    &#39;#&#39; ~[\\r\\n]* -&gt; channel ( HIDDEN )\n;\n\n\nNEWLINE\n:\n    (\n        &#39;\\r&#39;? &#39;\\n&#39;\n        | &#39;\\r&#39;\n    )+ -&gt; channel ( HIDDEN )\n;\n\n\nEQUALSSIGN\n:\n    &#39;=&#39;\n;\n\nSEMICOLON\n:\n    &#39;;&#39;\n;\n\nMPSGA_255_1\n:\n    &#39;LT&#39;\n;\n\nMPSGA\n:\n    &#39;mpsga&#39;\n;\n\nWHITESPACE\n:\n    (\n        &#39; &#39;\n        | &#39;\\t&#39;\n    )+ -&gt; channel ( HIDDEN )\n;\n\nBRACKET_OPEN\n:\n    &#39;(&#39;\n;\n\nBRACKET_CLOSED\n:\n    &#39;)&#39;\n;\n\nVAR\n:\n    [a-zA-Z][0-9a-zA-Z_]*\n;\n\n```\n\n## Parser ##\n```\nparser grammar FooParser;\n\noptions {\n    tokenVocab = FooLexer;\n}\n\nstmt_block\n:\n    stmt_list EOF\n;\n\nstmt\n:\n    VAR EQUALSSIGN expr SEMICOLON NEWLINE?\n;\n\nstmt_list\n:\n    stmt\n    | stmt_list stmt\n;\n\nexpr\n:\n     extvar\n;\n\nextvar\n:\n\n    MPSGA BRACKET_OPEN mpsga_field BRACKET_CLOSED\n\n;\n\nmpsga_field\n:\n\n    MPSGA_255_1\n;\n```\n---\n\n\n---\nWhen I try to parse this `Foo = mpsga(LT);` in Java i get the error. \nAny help is appreciated!\n\n# Edit: #\nMy Parse hierachy looks like the following:\n\n\n&gt; Foo = mpsga(LT);\n```\nstmt_block\n-&gt;stmt_list:1\n--&gt;stmt\n---&gt;&quot;Foo&quot;\n---&gt;&quot;=&quot;\n---&gt;expr\n----&gt;extvar\n-----&gt;&quot;mpsga(LT)&quot;\n----&gt;&quot;;&quot;\n-&gt;&lt;EOF&gt;\n```\n\n&gt; Foo = mpsga(LT;\n```\nstmt_block\n-&gt;stmt_list:1\n--&gt;stmt\n---&gt;&quot;Foo&quot;\n---&gt;&quot;=&quot;\n---&gt;expr\n----&gt;extvar\n-----&gt;&quot;mpsga&quot;\n-----&gt;&quot;(&quot;\n-----&gt;mpsga_field\n------&gt;&quot;LT&quot;\n-----&gt;&quot;&lt;missing &#39;)&#39;&gt;&quot;\n----&gt;&quot;;&quot;\n-&gt;&lt;EOF&gt;\n```\n\n\n**DISCLAIMER:** I solved the problem. For anyone experiencing the same issue: I had some Lexer rules that were ambiguous for the `mpsga` part.\n\n  ","title":"ANTLR mismatched input &#39;foo(some_foo)&#39; expecting {&#39;foo&#39;}","body":"<p>I'm writing a parser using ANTLR and am now at the stage of testing my parser/lexer.\nI stumbled over a strange bug while trying to parse basically a variable assignment. (Like this)</p>\n<p><code>Foo = mpsga(LT);</code></p>\n<p>I get the error : <code>mismatched input 'line 1:6 mismatched input 'mpsga(LT)' expecting 'mpsga'</code></p>\n<p>This is especially strange for when I remove the brackets (or the argument <code>LT</code>),\nthe parser recognizes <code>mpsga</code> and it only misses the brackets (or the argument).</p>\n<hr />\n<p>My Grammar looks something like this:</p>\n<h2>Lexer</h2>\n<pre><code>lexer grammar FooLexer;\n\nCOMMENT\n:\n    '#' ~[\\r\\n]* -&gt; channel ( HIDDEN )\n;\n\n\nNEWLINE\n:\n    (\n        '\\r'? '\\n'\n        | '\\r'\n    )+ -&gt; channel ( HIDDEN )\n;\n\n\nEQUALSSIGN\n:\n    '='\n;\n\nSEMICOLON\n:\n    ';'\n;\n\nMPSGA_255_1\n:\n    'LT'\n;\n\nMPSGA\n:\n    'mpsga'\n;\n\nWHITESPACE\n:\n    (\n        ' '\n        | '\\t'\n    )+ -&gt; channel ( HIDDEN )\n;\n\nBRACKET_OPEN\n:\n    '('\n;\n\nBRACKET_CLOSED\n:\n    ')'\n;\n\nVAR\n:\n    [a-zA-Z][0-9a-zA-Z_]*\n;\n\n</code></pre>\n<h2>Parser</h2>\n<pre><code>parser grammar FooParser;\n\noptions {\n    tokenVocab = FooLexer;\n}\n\nstmt_block\n:\n    stmt_list EOF\n;\n\nstmt\n:\n    VAR EQUALSSIGN expr SEMICOLON NEWLINE?\n;\n\nstmt_list\n:\n    stmt\n    | stmt_list stmt\n;\n\nexpr\n:\n     extvar\n;\n\nextvar\n:\n\n    MPSGA BRACKET_OPEN mpsga_field BRACKET_CLOSED\n\n;\n\nmpsga_field\n:\n\n    MPSGA_255_1\n;\n</code></pre>\n<hr />\n<hr />\n<p>When I try to parse this <code>Foo = mpsga(LT);</code> in Java i get the error.\nAny help is appreciated!</p>\n<h1>Edit:</h1>\n<p>My Parse hierachy looks like the following:</p>\n<blockquote>\n<p>Foo = mpsga(LT);</p>\n</blockquote>\n<pre><code>stmt_block\n-&gt;stmt_list:1\n--&gt;stmt\n---&gt;&quot;Foo&quot;\n---&gt;&quot;=&quot;\n---&gt;expr\n----&gt;extvar\n-----&gt;&quot;mpsga(LT)&quot;\n----&gt;&quot;;&quot;\n-&gt;&lt;EOF&gt;\n</code></pre>\n<blockquote>\n<p>Foo = mpsga(LT;</p>\n</blockquote>\n<pre><code>stmt_block\n-&gt;stmt_list:1\n--&gt;stmt\n---&gt;&quot;Foo&quot;\n---&gt;&quot;=&quot;\n---&gt;expr\n----&gt;extvar\n-----&gt;&quot;mpsga&quot;\n-----&gt;&quot;(&quot;\n-----&gt;mpsga_field\n------&gt;&quot;LT&quot;\n-----&gt;&quot;&lt;missing ')'&gt;&quot;\n----&gt;&quot;;&quot;\n-&gt;&lt;EOF&gt;\n</code></pre>\n<p><strong>DISCLAIMER:</strong> I solved the problem. For anyone experiencing the same issue: I had some Lexer rules that were ambiguous for the <code>mpsga</code> part.</p>\n"},{"tags":["java","antlr","antlr4"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":2,"creation_date":1507636664,"post_id":46666032,"comment_id":80280468,"body_markdown":"Why the program needs a WS: Because that&#39;s what you specified, the declaration for `program` means: first a WS, then an EOF, and then myRules.","body":"Why the program needs a WS: Because that&#39;s what you specified, the declaration for <code>program</code> means: first a WS, then an EOF, and then myRules."},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1507636723,"post_id":46666032,"comment_id":80280514,"body_markdown":"@Jesper is right: your program rule doesn&#39;t make any sense.","body":"@Jesper is right: your program rule doesn&#39;t make any sense."},{"owner":{"account_id":8589821,"reputation":1745,"user_id":6434747,"accept_rate":89,"display_name":"Nebulosar"},"score":0,"creation_date":1507636784,"post_id":46666032,"comment_id":80280558,"body_markdown":"So what you saw is: If i don&#39;t put in ws anywhere but just state it as a rule; it will still do its work?","body":"So what you saw is: If i don&#39;t put in ws anywhere but just state it as a rule; it will still do its work?"}],"answers":[{"tags":[],"owner":{"account_id":7565177,"reputation":7258,"user_id":5741073,"accept_rate":57,"display_name":"TomServo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1508261280,"creation_date":1507665766,"answer_id":46675043,"question_id":46666032,"body_markdown":"The very first thing you do in your grammar is demand WS:\r\n\r\n    program: WS EOF myRules;\r\n\r\nSo, lacking any whitespace characters, your parse fails.  I&#39;d simply suggest:\r\n\r\n    program: myRule*;\r\n\r\nsince you&#39;re discarding whitespace already with the skip option.\r\n\r\n","title":"Antlr Syntax error: mismatched input &#39;p&#39; expecting WS","body":"<p>The very first thing you do in your grammar is demand WS:</p>\n\n<pre><code>program: WS EOF myRules;\n</code></pre>\n\n<p>So, lacking any whitespace characters, your parse fails.  I'd simply suggest:</p>\n\n<pre><code>program: myRule*;\n</code></pre>\n\n<p>since you're discarding whitespace already with the skip option.</p>\n"}],"owner":{"account_id":8589821,"reputation":1745,"user_id":6434747,"accept_rate":89,"display_name":"Nebulosar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":476,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":46675043,"answer_count":1,"score":0,"last_activity_date":1678442687,"creation_date":1507636185,"question_id":46666032,"body_markdown":"I have the following grammar:\r\n\r\n    grammar myProject;\r\n    \r\n    program: WS EOF myRules;\r\n    WS: [ \\t\\r\\n]+ -&gt; skip;\r\n    myRules: myRule+;\r\n    myRule: SELECTOR OPEN declarations CLOSE;\r\n    declarations: declaration+;\r\n    declaration: PROPERTY EQ value ENDSYMBOL;\r\n    value: INT | STRING | COLOR;\r\n    \r\n    SELECTOR : ((&#39;#&#39;CHAR+)|(&#39;.&#39;CHAR+)|CHAR+);\r\n    PROPERTY : [A-z-]+;\r\n    \r\n    STRING : &#39;&quot;&#39; .*? &#39;&quot;&#39;;\r\n    INT : [0-9]+ ;\r\n    COLOR : &#39;#&#39; [0-9a-fA-F] [0-9a-fA-F] [0-9a-fA-F] [0-9a-fA-F] [0-9a-fA-F] [0-9a-fA-F];\r\n    CHAR: [A-z];\r\n    \r\n    EQ : &#39;:&#39; ;\r\n    OPEN : &#39;{&#39;;\r\n    CLOSE : &#39;}&#39;;\r\n    ENDSYMBOL : &#39;;&#39; ;\r\n\r\n\r\nNow my input is this:\r\n\r\n    p {\r\n    \tcolor: #054593;\r\n    \twidth: 100px;\r\n    }\r\n\r\nNow, when i parse this i get the following error:\r\n\r\n*Syntax error: mismatched input &#39;p&#39; expecting WS*\r\n\r\nI have red many questions here on stack and googled a lot already, but I simpeley can&#39;t find a anwser. What am I doing wrong in my grammar?\r\nWhy does the program needs a WS and how do I fix this.\r\nMany, many thanks in advance!","title":"Antlr Syntax error: mismatched input &#39;p&#39; expecting WS","body":"<p>I have the following grammar:</p>\n\n<pre><code>grammar myProject;\n\nprogram: WS EOF myRules;\nWS: [ \\t\\r\\n]+ -&gt; skip;\nmyRules: myRule+;\nmyRule: SELECTOR OPEN declarations CLOSE;\ndeclarations: declaration+;\ndeclaration: PROPERTY EQ value ENDSYMBOL;\nvalue: INT | STRING | COLOR;\n\nSELECTOR : (('#'CHAR+)|('.'CHAR+)|CHAR+);\nPROPERTY : [A-z-]+;\n\nSTRING : '\"' .*? '\"';\nINT : [0-9]+ ;\nCOLOR : '#' [0-9a-fA-F] [0-9a-fA-F] [0-9a-fA-F] [0-9a-fA-F] [0-9a-fA-F] [0-9a-fA-F];\nCHAR: [A-z];\n\nEQ : ':' ;\nOPEN : '{';\nCLOSE : '}';\nENDSYMBOL : ';' ;\n</code></pre>\n\n<p>Now my input is this:</p>\n\n<pre><code>p {\n    color: #054593;\n    width: 100px;\n}\n</code></pre>\n\n<p>Now, when i parse this i get the following error:</p>\n\n<p><em>Syntax error: mismatched input 'p' expecting WS</em></p>\n\n<p>I have red many questions here on stack and googled a lot already, but I simpeley can't find a anwser. What am I doing wrong in my grammar?\nWhy does the program needs a WS and how do I fix this.\nMany, many thanks in advance!</p>\n"},{"tags":["java","android","bluetooth","camera","accessibility"],"answers":[{"tags":[],"owner":{"account_id":692529,"reputation":17134,"user_id":556495,"accept_rate":50,"display_name":"Emil"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678067965,"creation_date":1678067965,"answer_id":75646498,"question_id":75646131,"body_markdown":"These &quot;chinese&quot; triggers all use HID over GATT to simulate a volume button press, i.e. like a Bluetooth keyboard. That way you can pair it directly in the System settings. No app needed.","title":"How to take picture in camera app programatically using accessibility service via Bluetooth BLE device?","body":"<p>These &quot;chinese&quot; triggers all use HID over GATT to simulate a volume button press, i.e. like a Bluetooth keyboard. That way you can pair it directly in the System settings. No app needed.</p>\n"},{"comments":[{"owner":{"account_id":27855774,"reputation":11,"user_id":21269292,"display_name":"Jirka Martinec"},"score":0,"creation_date":1678380222,"post_id":75670463,"comment_id":133525371,"body_markdown":"How can you dispatch the VOLUME_UP key code programatically (how the code could looks like, how can I use it ?)","body":"How can you dispatch the VOLUME_UP key code programatically (how the code could looks like, how can I use it ?)"},{"owner":{"account_id":894472,"reputation":5501,"user_id":932052,"accept_rate":94,"display_name":"Quintin Balsdon"},"score":0,"creation_date":1678442707,"post_id":75670463,"comment_id":133537247,"body_markdown":"I have added a C++ example for your BLE controller. As I am unsure what your input device is coded in, I guessed C++. I also added an ADB command you can use for testing, and a way to do it from a Java Android application","body":"I have added a C++ example for your BLE controller. As I am unsure what your input device is coded in, I guessed C++. I also added an ADB command you can use for testing, and a way to do it from a Java Android application"}],"tags":[],"owner":{"account_id":894472,"reputation":5501,"user_id":932052,"accept_rate":94,"display_name":"Quintin Balsdon"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678442666,"creation_date":1678261742,"answer_id":75670463,"question_id":75646131,"body_markdown":"As far as I can see, you should be able to just send a [VOLUME_UP key code][4] to the phone (I only tested on a Samsung S21 though). Not knowing how you set your Bluetooth up, I can&#39;t offer much in terms of code, but [Adafruit][3] have a really comprehensive tutorial and libraries. [Silicon labs&#39; documentation][5] also looks fairly promising for explaining all the details on a lower level.\r\n\r\n## Edit 10 March 2023: Sending a keycode in BLE C++\r\n\r\nI was asked in the comment how to send this keycode, which I mentioned I am not sure of the particular BLE implementation. I am assuming Arduino C++, because I have nothing else to go on. In other parts of the answer I do reference [Adafruit for a python version][3]\r\n\r\n```\r\n#include &lt;BleKeyboard.h&gt;\r\n\r\nBleKeyboard bleKeyboard;\r\n\r\nvoid setup() {\r\n  Serial.begin(115200);\r\n  Serial.println(&quot;Starting BLE work!&quot;);\r\n  bleKeyboard.begin();\r\n}\r\n\r\nvoid loop() {\r\n  if(bleKeyboard.isConnected()) {\r\n    Serial.println(&quot;Sending &#39;Hello world&#39;...&quot;);\r\n    bleKeyboard.print(&quot;Hello world&quot;);\r\n\r\n    delay(1000);\r\n\r\n    Serial.println(&quot;Sending Volume Up Key...&quot;);\r\n    bleKeyboard.write(KEY_MEDIA_VOLUME_UP); // edited for the purpose of this answer\r\n\r\n    delay(1000);\r\n\r\n    Serial.println(&quot;Sending Play/Pause media key...&quot;);\r\n    bleKeyboard.write(KEY_MEDIA_PLAY_PAUSE);\r\n\r\n    delay(1000);\r\n\r\n  }\r\n  Serial.println(&quot;Waiting 5 seconds...&quot;);\r\n  delay(5000);\r\n}\r\n```\r\n\r\n[Code Source][6] \r\n[Arduino key codes][7]\r\n\r\nI did try to compare the [Android KeyCode][8] with the [C++ Keyboard Library keycode][9] and they seem different, but I imagine there is probably some fancy mathematics, not the actual code.\r\n\r\nIf you wanted to send a keycode in Android, you can test it with the adb:\r\n\r\n```\r\nadb shell input keyevent KEYCODE_VOLUME_UP\r\n```\r\n\r\nor in a Java app:\r\n```\r\nInstrumentation inst = new Instrumentation();\r\ninst.sendKeyDownUpSync(KeyEvent.KEYCODE_VOLUME_UP);\r\n```\r\n-- end edit 10 March 2023\r\n\r\n## A long note on Accessibility Services and their usage.\r\n\r\nAn [accessibility service][0] for this particular problem is probably too much work and not likely going to be well received if you ever intend to publish your app to the Play Store:\r\n\r\n&gt; Accessibility services should only be used to assist users with disabilities in using Android devices and apps.\r\n\r\nMany apps that have been abusing the purpose of accessibility services have already been removed from the store, leading to a requirement that apps must declare an [`isAccessibilityTool`][2] flag in their manifest:\r\n\r\n&gt; Google Play permits the use of the AccessibilityService API for a wide range of applications. However, only services that are designed to help people with disabilities access their device or otherwise overcome challenges stemming from their disabilities are eligible to declare that they are accessibility tools. This is done using the isAccessibilityTool attribute in the service’s metadata file. [Source][1]\r\n\r\nYour users might not appreciate seeing the privacy notice (which is about granting your app privileged access):\r\n\r\n&gt; Attribute indicating whether the accessibility service is used to assist users with disabilities. This criteria might be defined by the installer. The default is false.\r\n&gt;\r\n&gt; Note: If this flag is false, system will show a notification after a duration to inform the user about the privacy implications of the service. [Source][3]\r\n\r\n[0]: https://developer.android.com/reference/android/accessibilityservice/AccessibilityService\r\n[1]: https://support.google.com/googleplay/android-developer/answer/10964491?hl=en\r\n[2]: https://developer.android.com/reference/android/R.styleable#AccessibilityService_isAccessibilityTool\r\n[3]: https://learn.adafruit.com/ble-hid-keyboard-buttons-with-circuitpython?view=all\r\n[4]: https://developer.android.com/reference/android/view/KeyEvent#KEYCODE_VOLUME_UP\r\n[5]: https://docs.silabs.com/bluetooth/2.13/code-examples/applications/ble-hid-keyboard\r\n[6]: https://github.com/T-vK/ESP32-BLE-Keyboard\r\n[7]: https://www.arduino.cc/reference/en/language/functions/usb/keyboard/keyboardmodifiers/\r\n[8]: https://developer.android.com/reference/android/view/KeyEvent#KEYCODE_VOLUME_UP\r\n[9]: https://github.com/T-vK/ESP32-BLE-Keyboard/blob/c96bc0e8f2e98a277c75a1491bedbaf944b5c6ce/BleKeyboard.h#L110\r\n","title":"How to take picture in camera app programatically using accessibility service via Bluetooth BLE device?","body":"<p>As far as I can see, you should be able to just send a <a href=\"https://developer.android.com/reference/android/view/KeyEvent#KEYCODE_VOLUME_UP\" rel=\"nofollow noreferrer\">VOLUME_UP key code</a> to the phone (I only tested on a Samsung S21 though). Not knowing how you set your Bluetooth up, I can't offer much in terms of code, but <a href=\"https://learn.adafruit.com/ble-hid-keyboard-buttons-with-circuitpython?view=all\" rel=\"nofollow noreferrer\">Adafruit</a> have a really comprehensive tutorial and libraries. <a href=\"https://docs.silabs.com/bluetooth/2.13/code-examples/applications/ble-hid-keyboard\" rel=\"nofollow noreferrer\">Silicon labs' documentation</a> also looks fairly promising for explaining all the details on a lower level.</p>\n<h2>Edit 10 March 2023: Sending a keycode in BLE C++</h2>\n<p>I was asked in the comment how to send this keycode, which I mentioned I am not sure of the particular BLE implementation. I am assuming Arduino C++, because I have nothing else to go on. In other parts of the answer I do reference <a href=\"https://learn.adafruit.com/ble-hid-keyboard-buttons-with-circuitpython?view=all\" rel=\"nofollow noreferrer\">Adafruit for a python version</a></p>\n<pre><code>#include &lt;BleKeyboard.h&gt;\n\nBleKeyboard bleKeyboard;\n\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println(&quot;Starting BLE work!&quot;);\n  bleKeyboard.begin();\n}\n\nvoid loop() {\n  if(bleKeyboard.isConnected()) {\n    Serial.println(&quot;Sending 'Hello world'...&quot;);\n    bleKeyboard.print(&quot;Hello world&quot;);\n\n    delay(1000);\n\n    Serial.println(&quot;Sending Volume Up Key...&quot;);\n    bleKeyboard.write(KEY_MEDIA_VOLUME_UP); // edited for the purpose of this answer\n\n    delay(1000);\n\n    Serial.println(&quot;Sending Play/Pause media key...&quot;);\n    bleKeyboard.write(KEY_MEDIA_PLAY_PAUSE);\n\n    delay(1000);\n\n  }\n  Serial.println(&quot;Waiting 5 seconds...&quot;);\n  delay(5000);\n}\n</code></pre>\n<p><a href=\"https://github.com/T-vK/ESP32-BLE-Keyboard\" rel=\"nofollow noreferrer\">Code Source</a>\n<a href=\"https://www.arduino.cc/reference/en/language/functions/usb/keyboard/keyboardmodifiers/\" rel=\"nofollow noreferrer\">Arduino key codes</a></p>\n<p>I did try to compare the <a href=\"https://developer.android.com/reference/android/view/KeyEvent#KEYCODE_VOLUME_UP\" rel=\"nofollow noreferrer\">Android KeyCode</a> with the <a href=\"https://github.com/T-vK/ESP32-BLE-Keyboard/blob/c96bc0e8f2e98a277c75a1491bedbaf944b5c6ce/BleKeyboard.h#L110\" rel=\"nofollow noreferrer\">C++ Keyboard Library keycode</a> and they seem different, but I imagine there is probably some fancy mathematics, not the actual code.</p>\n<p>If you wanted to send a keycode in Android, you can test it with the adb:</p>\n<pre><code>adb shell input keyevent KEYCODE_VOLUME_UP\n</code></pre>\n<p>or in a Java app:</p>\n<pre><code>Instrumentation inst = new Instrumentation();\ninst.sendKeyDownUpSync(KeyEvent.KEYCODE_VOLUME_UP);\n</code></pre>\n<p>-- end edit 10 March 2023</p>\n<h2>A long note on Accessibility Services and their usage.</h2>\n<p>An <a href=\"https://developer.android.com/reference/android/accessibilityservice/AccessibilityService\" rel=\"nofollow noreferrer\">accessibility service</a> for this particular problem is probably too much work and not likely going to be well received if you ever intend to publish your app to the Play Store:</p>\n<blockquote>\n<p>Accessibility services should only be used to assist users with disabilities in using Android devices and apps.</p>\n</blockquote>\n<p>Many apps that have been abusing the purpose of accessibility services have already been removed from the store, leading to a requirement that apps must declare an <a href=\"https://developer.android.com/reference/android/R.styleable#AccessibilityService_isAccessibilityTool\" rel=\"nofollow noreferrer\"><code>isAccessibilityTool</code></a> flag in their manifest:</p>\n<blockquote>\n<p>Google Play permits the use of the AccessibilityService API for a wide range of applications. However, only services that are designed to help people with disabilities access their device or otherwise overcome challenges stemming from their disabilities are eligible to declare that they are accessibility tools. This is done using the isAccessibilityTool attribute in the service’s metadata file. <a href=\"https://support.google.com/googleplay/android-developer/answer/10964491?hl=en\" rel=\"nofollow noreferrer\">Source</a></p>\n</blockquote>\n<p>Your users might not appreciate seeing the privacy notice (which is about granting your app privileged access):</p>\n<blockquote>\n<p>Attribute indicating whether the accessibility service is used to assist users with disabilities. This criteria might be defined by the installer. The default is false.</p>\n<p>Note: If this flag is false, system will show a notification after a duration to inform the user about the privacy implications of the service. <a href=\"https://learn.adafruit.com/ble-hid-keyboard-buttons-with-circuitpython?view=all\" rel=\"nofollow noreferrer\">Source</a></p>\n</blockquote>\n"}],"owner":{"account_id":27855774,"reputation":11,"user_id":21269292,"display_name":"Jirka Martinec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1678442666,"creation_date":1678060977,"question_id":75646131,"body_markdown":"I have Bluetooth (BLE) device where when I click button I want to perform action to capture photo or video in default camera app. \r\n\r\nThere are many Bluetooth devices (mostly from China) which &quot;remotely take photo&quot; when you are in default camera application with a single click of a button.\r\n\r\nI searched the internet for the past month and I cou&#39;dn&#39;t find a way how to perform the action to &quot;click&quot; on button in the camera app.\r\n\r\nThere are lots of tutorials how to do it via increasing volume up or down to perform capture image, but it does not work because you need special system permission to perform it via AudioManager.FLAG_FROM_KEY, but for that you need rooted device.\r\n\r\nAnother tutorial showed how to find the &quot;button&quot; via accessibilityEvent and find in currently opened application (camera app) text &quot;Take photo&quot; and perform a click action. This does not work, because many default application now don&#39;t have hidden text/label to the button.\r\n\r\nDoes anyone have any idea where to start looking or experience?\r\n\r\n---\r\n\r\nExample code:\r\n\r\n**MyAccessibilityService.java**\r\n```java\r\npublic class MyAccessibilityService extends android.accessibilityservice.AccessibilityService\r\n{\r\n    public static AccessibilityService getInstance() {\r\n        return this;\r\n    }\r\n\r\n    public void takePhoto() {\r\n        // How to take photo ?\r\n    }\r\n\r\n    // ...\r\n```\r\n\r\n**RandomClassWhereWeCallTheTakePhotoMethodFrom.java**\r\n```java\r\npublic void onSingleClick() {\r\n    myAccessibilityService = MyAccessibilityService.getInstance();\r\n    myAccessibilityService.takePhoto();\r\n}\r\n```\r\n\r\n---\r\n\r\nWhat I mean by clicking on &quot;button&quot; in the camera app:\\\r\n[![phone](https://i.stack.imgur.com/IbwAO.png)](https://i.stack.imgur.com/IbwAO.png)","title":"How to take picture in camera app programatically using accessibility service via Bluetooth BLE device?","body":"<p>I have Bluetooth (BLE) device where when I click button I want to perform action to capture photo or video in default camera app.</p>\n<p>There are many Bluetooth devices (mostly from China) which &quot;remotely take photo&quot; when you are in default camera application with a single click of a button.</p>\n<p>I searched the internet for the past month and I cou'dn't find a way how to perform the action to &quot;click&quot; on button in the camera app.</p>\n<p>There are lots of tutorials how to do it via increasing volume up or down to perform capture image, but it does not work because you need special system permission to perform it via AudioManager.FLAG_FROM_KEY, but for that you need rooted device.</p>\n<p>Another tutorial showed how to find the &quot;button&quot; via accessibilityEvent and find in currently opened application (camera app) text &quot;Take photo&quot; and perform a click action. This does not work, because many default application now don't have hidden text/label to the button.</p>\n<p>Does anyone have any idea where to start looking or experience?</p>\n<hr />\n<p>Example code:</p>\n<p><strong>MyAccessibilityService.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyAccessibilityService extends android.accessibilityservice.AccessibilityService\n{\n    public static AccessibilityService getInstance() {\n        return this;\n    }\n\n    public void takePhoto() {\n        // How to take photo ?\n    }\n\n    // ...\n</code></pre>\n<p><strong>RandomClassWhereWeCallTheTakePhotoMethodFrom.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public void onSingleClick() {\n    myAccessibilityService = MyAccessibilityService.getInstance();\n    myAccessibilityService.takePhoto();\n}\n</code></pre>\n<hr />\n<p>What I mean by clicking on &quot;button&quot; in the camera app:<br />\n<a href=\"https://i.stack.imgur.com/IbwAO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IbwAO.png\" alt=\"phone\" /></a></p>\n"},{"tags":["java","c++","loops","for-loop","antlr4"],"comments":[{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":0,"creation_date":1600269197,"post_id":63922105,"comment_id":113036144,"body_markdown":"Looks like you are programming in Java and not C++.  The C++ does not have the `boolean` type and does not use `public` outside of a class.  Please adjust your language tags as appropriate.","body":"Looks like you are programming in Java and not C++.  The C++ does not have the <code>boolean</code> type and does not use <code>public</code> outside of a class.  Please adjust your language tags as appropriate."},{"owner":{"account_id":10744562,"reputation":11,"user_id":7906359,"display_name":"Hisham"},"score":0,"creation_date":1600269890,"post_id":63922105,"comment_id":113036537,"body_markdown":"thank you for your comment, actually, I am coding with java but I am working on c++ antlr grammar.","body":"thank you for your comment, actually, I am coding with java but I am working on c++ antlr grammar."},{"owner":{"account_id":6128906,"reputation":1172,"user_id":4779853,"display_name":"kaby76"},"score":0,"creation_date":1600272647,"post_id":63922105,"comment_id":113037908,"body_markdown":"Please provide a link to your CPP14 grammar. I&#39;ve used both C grammars ([here](https://github.com/antlr/grammars-v4/blob/master/c/C.g4) and [here](https://github.com/antlr/grammars-v4/blob/master/cpp/CPP14Parser.g4)), and there is no `classicForStatement` parser symbol. You can insert the semantic checks on any set of visitors, but you are always going to need to either navigate around the parse tree or set up attributes in a dictionary. What happens if you assign j=i-1 and use j as an array index? You will need to add data flow to your analysis.","body":"Please provide a link to your CPP14 grammar. I&#39;ve used both C grammars (<a href=\"https://github.com/antlr/grammars-v4/blob/master/c/C.g4\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/antlr/grammars-v4/blob/master/cpp/CPP14Parser.g4\" rel=\"nofollow noreferrer\">here</a>), and there is no <code>classicForStatement</code> parser symbol. You can insert the semantic checks on any set of visitors, but you are always going to need to either navigate around the parse tree or set up attributes in a dictionary. What happens if you assign j=i-1 and use j as an array index? You will need to add data flow to your analysis."},{"owner":{"account_id":10744562,"reputation":11,"user_id":7906359,"display_name":"Hisham"},"score":0,"creation_date":1600274545,"post_id":63922105,"comment_id":113038806,"body_markdown":"I am sorry I edited the post and I upload CPP grammar because the GitHub page not found.","body":"I am sorry I edited the post and I upload CPP grammar because the GitHub page not found."},{"owner":{"account_id":10744562,"reputation":11,"user_id":7906359,"display_name":"Hisham"},"score":0,"creation_date":1600388549,"post_id":63922105,"comment_id":113080083,"body_markdown":"@kaby76 Can you please refer to me the part in the book that addresses the semantic checks, and how can I add the data flow to my analysis, and is it possible to use a visitor or listener to do the data flow?","body":"@kaby76 Can you please refer to me the part in the book that addresses the semantic checks, and how can I add the data flow to my analysis, and is it possible to use a visitor or listener to do the data flow?"},{"owner":{"account_id":6128906,"reputation":1172,"user_id":4779853,"display_name":"kaby76"},"score":0,"creation_date":1600425849,"post_id":63922105,"comment_id":113091407,"body_markdown":"@Hisham I guess what I was trying to get at is for you to decide what your requirements are. This is a long, hard problem. Usually, the parse tree would be converted into a basic block graph before starting this analysis, eg LLVM. You can do the checks in other visitors, referencing `.Parent&#39;s` and checking the context from that direction. [Dragon book](https://www.worldcat.org/title/compilers-principles-techniques-and-tools/oclc/1055658673&amp;referer=brief_results), [Muchnick](https://www.worldcat.org/title/advanced-compiler-design-and-implementation/oclc/932262043&amp;referer=brief_results).","body":"@Hisham I guess what I was trying to get at is for you to decide what your requirements are. This is a long, hard problem. Usually, the parse tree would be converted into a basic block graph before starting this analysis, eg LLVM. You can do the checks in other visitors, referencing <code>.Parent&#39;s</code> and checking the context from that direction. <a href=\"https://www.worldcat.org/title/compilers-principles-techniques-and-tools/oclc/1055658673&amp;referer=brief_results\" rel=\"nofollow noreferrer\">Dragon book</a>, <a href=\"https://www.worldcat.org/title/advanced-compiler-design-and-implementation/oclc/932262043&amp;referer=brief_results\" rel=\"nofollow noreferrer\">Muchnick</a>."},{"owner":{"account_id":10744562,"reputation":11,"user_id":7906359,"display_name":"Hisham"},"score":0,"creation_date":1601068491,"post_id":63922105,"comment_id":113300226,"body_markdown":"I was able to see if there are multi statements inside the loop by using the same declaration above for each statement, but some declaration is so long, and I did some type of analysis on them, the maximum statements I used is three and the result of the analysis will be put in boolean. now when I want to reduce the statements in the source code, I can&#39;t and error appear https://ibb.co/vPF3cj2 this is a photo of the error.  How I can handle this error and is there any way to receive the statement with a different approach, no matter how much is the statement, and without a previous declaration","body":"I was able to see if there are multi statements inside the loop by using the same declaration above for each statement, but some declaration is so long, and I did some type of analysis on them, the maximum statements I used is three and the result of the analysis will be put in boolean. now when I want to reduce the statements in the source code, I can&#39;t and error appear <a href=\"https://ibb.co/vPF3cj2\" rel=\"nofollow noreferrer\">ibb.co/vPF3cj2</a> this is a photo of the error.  How I can handle this error and is there any way to receive the statement with a different approach, no matter how much is the statement, and without a previous declaration"},{"owner":{"account_id":27816,"reputation":6650,"user_id":73764,"accept_rate":91,"display_name":"Mike Cargal"},"score":0,"creation_date":1615436085,"post_id":63922105,"comment_id":117691852,"body_markdown":"I&#39;d like to help, but to be honest, I can&#39;t understand what you&#39;re asking.  Perhaps clarify the question?  It jumps around quite a lot.  The proximate cause of your exception is a null pointer exception in your visitor (which you&#39;ve not shared).  So, you&#39;re trying to reference an optional value in your context (I would guess) without having really ascertained that it exists.  (sorry, it sounds a bit insulting to suggest that you got a NullPointerException because you tried to dereference a null, but that&#39;s about all we can tell).  Even your example code is VERY (VERY) specific to your input,","body":"I&#39;d like to help, but to be honest, I can&#39;t understand what you&#39;re asking.  Perhaps clarify the question?  It jumps around quite a lot.  The proximate cause of your exception is a null pointer exception in your visitor (which you&#39;ve not shared).  So, you&#39;re trying to reference an optional value in your context (I would guess) without having really ascertained that it exists.  (sorry, it sounds a bit insulting to suggest that you got a NullPointerException because you tried to dereference a null, but that&#39;s about all we can tell).  Even your example code is VERY (VERY) specific to your input,"}],"owner":{"account_id":10744562,"reputation":11,"user_id":7906359,"display_name":"Hisham"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678442589,"creation_date":1600266073,"question_id":63922105,"body_markdown":"I am using Antlr 4.8 and using the CPP14 Antlr Grammar in Github I upload it here because the Github page is not found [CPP grammar][1].\r\nI am trying to compare between two statements inside the for loop:\r\nfor example:\r\n\r\n 1. a[i] = a[i] + 10;\r\n 2. b[i] = b[i-1];\r\n 3. b[i] = b[i+1] +10;\r\n\r\neach of these numbers represents an example. the reason for me comparing the statements is to do dependency analysis on them and see if it is a dependency or not. \r\nfor example:\r\na[i] = a[i] + 10; -&gt; there is no dependency here because we work with same &quot;i&quot;.\r\nbut in b[i] = b[i + 1] +10; -&gt; there is a loop carried dependency because we are wating the value of [b + i]. \r\n\r\nin my visitor, I access to for loop and I did the following:\r\n\r\n    public class visitor&lt;T&gt; extends GrammarBaseVisitor&lt;T&gt; {\r\n\r\n    public static boolean status;\r\n\r\n    @Override\r\n    public T visitClassicForStatement(GrammarParser.ClassicForStatementContext ctx) {\r\n\r\n        String str3 = ctx.statement().getText();\r\n        String str1 = ctx.statement().compoundstatement().statementseq().statement().expressionstatement().expression().assignmentexpression().logicalorexpression().getText().toString();\r\n        String str2 = ctx.statement().compoundstatement().statementseq().statement().expressionstatement().expression().assignmentexpression().initializerclause().assignmentexpression().getText().toString();\r\n\r\nstr 3 will take the full statement in it.\r\nstr 1 will be the part on the left-hand side.\r\nstr 2 will be all the part on the right-hand side.\r\n\r\nwhat I did to handle the dependency is:\r\n\r\nI used chatAt and .equal function to compare between the left-hand-side and right-hand-side.\r\n\r\nbut still not work perfectly.\r\n\r\nmy question is: how I can access what inside a single loop and nested loop and control it and do some dependency analysis on it, and see if there is a single statement inside the loop or multi statements lets say two statements and compare between them to check the dependency if exist in a single statement and multi statements, then write a comment above each loop statement, and what is the simple way to avoid these lines I used to declare the strings and reach the rule I want directly?\r\n\r\nthank you in advance.\r\n\r\n\r\n  [1]: https://gofile.io/d/YfZyd0","title":"Is there a way to reach the end of the AST without putting all rules?","body":"<p>I am using Antlr 4.8 and using the CPP14 Antlr Grammar in Github I upload it here because the Github page is not found <a href=\"https://gofile.io/d/YfZyd0\" rel=\"nofollow noreferrer\">CPP grammar</a>.\nI am trying to compare between two statements inside the for loop:\nfor example:</p>\n<ol>\n<li>a[i] = a[i] + 10;</li>\n<li>b[i] = b[i-1];</li>\n<li>b[i] = b[i+1] +10;</li>\n</ol>\n<p>each of these numbers represents an example. the reason for me comparing the statements is to do dependency analysis on them and see if it is a dependency or not.\nfor example:\na[i] = a[i] + 10; -&gt; there is no dependency here because we work with same &quot;i&quot;.\nbut in b[i] = b[i + 1] +10; -&gt; there is a loop carried dependency because we are wating the value of [b + i].</p>\n<p>in my visitor, I access to for loop and I did the following:</p>\n<pre><code>public class visitor&lt;T&gt; extends GrammarBaseVisitor&lt;T&gt; {\n\npublic static boolean status;\n\n@Override\npublic T visitClassicForStatement(GrammarParser.ClassicForStatementContext ctx) {\n\n    String str3 = ctx.statement().getText();\n    String str1 = ctx.statement().compoundstatement().statementseq().statement().expressionstatement().expression().assignmentexpression().logicalorexpression().getText().toString();\n    String str2 = ctx.statement().compoundstatement().statementseq().statement().expressionstatement().expression().assignmentexpression().initializerclause().assignmentexpression().getText().toString();\n</code></pre>\n<p>str 3 will take the full statement in it.\nstr 1 will be the part on the left-hand side.\nstr 2 will be all the part on the right-hand side.</p>\n<p>what I did to handle the dependency is:</p>\n<p>I used chatAt and .equal function to compare between the left-hand-side and right-hand-side.</p>\n<p>but still not work perfectly.</p>\n<p>my question is: how I can access what inside a single loop and nested loop and control it and do some dependency analysis on it, and see if there is a single statement inside the loop or multi statements lets say two statements and compare between them to check the dependency if exist in a single statement and multi statements, then write a comment above each loop statement, and what is the simple way to avoid these lines I used to declare the strings and reach the rule I want directly?</p>\n<p>thank you in advance.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"score":0,"creation_date":1678386715,"post_id":75688433,"comment_id":133527157,"body_markdown":"try @RequestPart annotation instead of it","body":"try @RequestPart annotation instead of it"},{"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"score":0,"creation_date":1678386950,"post_id":75688433,"comment_id":133527211,"body_markdown":"its accepted this - @RequestParam(&quot;image&quot;) List&lt;Object&gt; image -- but now I am left trying to loop through an object FileList","body":"its accepted this - @RequestParam(&quot;image&quot;) List&lt;Object&gt; image -- but now I am left trying to loop through an object FileList"}],"answers":[{"tags":[],"owner":{"account_id":139494,"reputation":804,"user_id":345130,"accept_rate":40,"display_name":"ILya Cyclone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678442535,"creation_date":1678442535,"answer_id":75694688,"question_id":75688433,"body_markdown":"This works for me:\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/multifileupload&quot;)\r\npublic class MultiFileUploadController {\r\n\r\n    @PostMapping(path = &quot;/requestparam&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n    public String postWithRequestParam(\r\n\t                   @RequestParam String email,\r\n\r\n                       @RequestParam(required = false) List&lt;MultipartFile&gt; files\r\n    ) {\r\n        return &quot;email: &quot; + email + &quot;, number of files: &quot; + Optional.ofNullable(files).map(List::size).orElse(0);\r\n    }\r\n```\r\n\r\n\r\n```\r\n@WebMvcTest(controllers = MultiFileUploadController.class)\r\nclass MultiFileUploadControllerTest {\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Test\r\n    void postWithRequestParam() throws Exception {\r\n        String email = &quot;some@example.org&quot;;\r\n        byte[] emailBytes = email.getBytes();\r\n\r\n        MockPart emailMockPart = new MockPart(&quot;email&quot;, emailBytes);\r\n\r\n        MockMultipartFile file1 = new MockMultipartFileToStringable(&quot;files&quot;, &quot;file1&quot;, APPLICATION_OCTET_STREAM_VALUE, &quot;File 1 content&quot;.getBytes());\r\n        MockMultipartFile file2 = new MockMultipartFileToStringable(&quot;files&quot;, &quot;file2&quot;, APPLICATION_OCTET_STREAM_VALUE, &quot;File 2 content&quot;.getBytes());\r\n\r\n\r\n        mockMvc.perform(multipart(&quot;/multifileupload/requestparam&quot;)\r\n                                .part(emailMockPart)\r\n                                .file(file1)\r\n                                .file(file2)\r\n                                .contentType(MediaType.MULTIPART_FORM_DATA_VALUE)\r\n                )\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().string(&quot;email: some@example.org, number of files: 2&quot;));\r\n    }\r\n\r\n\r\n    @Test\r\n    void postWithRequestParam_noFiles() throws Exception {\r\n        String email = &quot;some@example.org&quot;;\r\n        byte[] emailBytes = email.getBytes();\r\n\r\n        MockPart emailMockPart = new MockPart(&quot;email&quot;, emailBytes);\r\n\r\n        mockMvc.perform(multipart(&quot;/multifileupload/requestparam&quot;)\r\n                        .part(emailMockPart)\r\n                        .contentType(MediaType.MULTIPART_FORM_DATA_VALUE)\r\n                )\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().string(&quot;email: some@example.org, number of files: 0&quot;));\r\n    }\r\n\t\r\n}\r\n```\r\n\r\n\r\nTests passed.\r\nHope, this helps.\r\n","title":"Java Springboot - unable to get multiple file uploads working in @RequestParam(&quot;image&quot;) MultipartFile[] image","body":"<p>This works for me:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/multifileupload&quot;)\npublic class MultiFileUploadController {\n\n    @PostMapping(path = &quot;/requestparam&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n    public String postWithRequestParam(\n                       @RequestParam String email,\n\n                       @RequestParam(required = false) List&lt;MultipartFile&gt; files\n    ) {\n        return &quot;email: &quot; + email + &quot;, number of files: &quot; + Optional.ofNullable(files).map(List::size).orElse(0);\n    }\n</code></pre>\n<pre><code>@WebMvcTest(controllers = MultiFileUploadController.class)\nclass MultiFileUploadControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    void postWithRequestParam() throws Exception {\n        String email = &quot;some@example.org&quot;;\n        byte[] emailBytes = email.getBytes();\n\n        MockPart emailMockPart = new MockPart(&quot;email&quot;, emailBytes);\n\n        MockMultipartFile file1 = new MockMultipartFileToStringable(&quot;files&quot;, &quot;file1&quot;, APPLICATION_OCTET_STREAM_VALUE, &quot;File 1 content&quot;.getBytes());\n        MockMultipartFile file2 = new MockMultipartFileToStringable(&quot;files&quot;, &quot;file2&quot;, APPLICATION_OCTET_STREAM_VALUE, &quot;File 2 content&quot;.getBytes());\n\n\n        mockMvc.perform(multipart(&quot;/multifileupload/requestparam&quot;)\n                                .part(emailMockPart)\n                                .file(file1)\n                                .file(file2)\n                                .contentType(MediaType.MULTIPART_FORM_DATA_VALUE)\n                )\n                .andExpect(status().isOk())\n                .andExpect(content().string(&quot;email: some@example.org, number of files: 2&quot;));\n    }\n\n\n    @Test\n    void postWithRequestParam_noFiles() throws Exception {\n        String email = &quot;some@example.org&quot;;\n        byte[] emailBytes = email.getBytes();\n\n        MockPart emailMockPart = new MockPart(&quot;email&quot;, emailBytes);\n\n        mockMvc.perform(multipart(&quot;/multifileupload/requestparam&quot;)\n                        .part(emailMockPart)\n                        .contentType(MediaType.MULTIPART_FORM_DATA_VALUE)\n                )\n                .andExpect(status().isOk())\n                .andExpect(content().string(&quot;email: some@example.org, number of files: 0&quot;));\n    }\n    \n}\n</code></pre>\n<p>Tests passed.\nHope, this helps.</p>\n"}],"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678442535,"creation_date":1678384952,"question_id":75688433,"body_markdown":"I am using Java Spring boot for an application and I am struggling to get multiple files to hit the endpoint.\r\n\r\n&quot;Required request part &#39;image&#39; is not present&quot;\r\n[![enter image description here][1]][1]\r\nIm the formData -- its coming back as image[0], image[1]\r\n\r\n\r\nmy code looks like this\r\n\r\n    @CrossOrigin\r\n    @RequestMapping(value = &quot;/api/register&quot;, method = RequestMethod.POST)\r\n    //@PostMapping(&quot;/api/register&quot;)\r\n    @ResponseBody\r\n    public ResponseEntity&lt;BaseResponse&gt; register(@RequestParam(&quot;email&quot;) String email, @RequestParam(&quot;image&quot;) MultipartFile[] image) throws IOException {\r\n        System.out.println(&quot;email &quot; + email);\r\n        System.out.println(&quot;image &quot; + image);\r\n        return null;\r\n    }\r\n\r\nI&#39;ve followed various links - that indicate the code is correct\r\n\r\nhttps://www.baeldung.com/spring-file-upload\r\nhttps://www.oodlestechnologies.com/blogs/upload-a-file-using-multipartfile-in-spring-mvc/\r\nhttps://www.bezkoder.com/spring-boot-file-upload/\r\n\r\n--- this may work - but this looks really clumsy and not the right approach\r\n\r\n    @RequestParam(&quot;image[0]&quot;) MultipartFile image)\r\n\r\n\r\n----\r\nis it the way I am making the formData? -- I&#39;ve done a conversion from json using these functions \r\n\r\n\r\n    export function buildFormData(formData, data, parentKey) {\r\n      if (data &amp;&amp; typeof data === &#39;object&#39; &amp;&amp; !(data instanceof Date) &amp;&amp; !(data instanceof File)) {\r\n        Object.keys(data).forEach(key =&gt; {\r\n          buildFormData(formData, data[key], parentKey ? `${parentKey}[${key}]` : key);\r\n        });\r\n      } else {\r\n        const value = data == null ? &#39;&#39; : data;\r\n    \r\n        formData.append(parentKey, value);\r\n      }\r\n    }\r\n    \r\n    export function jsonToFormData(data) {\r\n      const formData = new FormData();\r\n      \r\n      buildFormData(formData, data);\r\n      \r\n      return formData;\r\n    }\r\n\r\n\r\nI&#39;ve tried a different method - used here -- \r\nhttps://dev.to/bawa_geek/how-to-convert-json-to-formdata-for-better-file-uploading-using-ajax-2ahf\r\n\r\nit returns as a single entity now - but I still get the same error - &quot;Required request part &#39;image&#39; is not present&quot;\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAlso tried\r\n\r\n    @PostMapping(value = &quot;/api/register&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE )\r\n\r\n--------------------------\r\n\r\n*** 09/03/2023 - Working solution. but need a programmatically way of replacing the old jsonToFromData to ensure it works properly/expected -- not sure why the other versions weren&#39;t working or how to make them similar to this hardcoded example.\r\n\r\nfrontend\r\n\r\nI&#39;ve had to rejig the jsonToFromData function\r\n\r\n    export function jsonToFormData(data) {\r\n          const formData = new FormData();\r\n            formData.append(&quot;email&quot;, data.email);\r\n        \r\n            // Retrieve FileList boject\r\n            const files = data.image;\r\n        \r\n            // Loop through files\r\n            for (let i = 0; i &lt; files.length; i++) {\r\n              let file = files.item(i)\r\n              formData.append(&quot;image&quot;, file);\r\n            }\r\n          return formData;\r\n        }\r\n\r\n[![enter image description here][3]][3]\r\n\r\n^ this lists the &quot;image&quot; multiple times in the FormData payload without any square brackets.\r\n\r\nthe backend -- I&#39;ve got it working on MultipartFile[]\r\n\r\n    public ResponseEntity&lt;BaseResponse&gt; register(@RequestParam(&quot;email&quot;) String email, @RequestParam(&quot;image&quot;) MultipartFile[] image) throws IOException {\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\nthen I&#39;ve been able to loop through it like this\r\n\r\n    System.out.println(&quot;email &quot; + email);\r\n    System.out.println(&quot;image &quot; + image);\r\n\r\n    for (int i = 0; i &lt; image.length; i++){\r\n        System.out.println(&quot;each img = &quot;+ image[i]);\r\n    }\r\n\r\n   \r\n-=-- \r\nalso wanting to make adding images optional - but this seems to be an issue too\r\n\r\n    @RequestParam(&quot;image&quot;) Optional&lt;MultipartFile[]&gt; image)\r\n\r\nfails with a same error - &quot;image Optional.empty&quot; value looks like this\r\n\r\nhow can I make a RequestParam optional for multipartfiles?\r\n\r\nthis does not work\r\n@RequestParam(value = &quot;image&quot;, required=false) MultipartFile[] image\r\n\r\n  [1]: https://i.stack.imgur.com/r7mUH.png\r\n  [2]: https://i.stack.imgur.com/MrSrR.png\r\n  [3]: https://i.stack.imgur.com/OhI5g.png\r\n  [4]: https://i.stack.imgur.com/VK4FU.png\r\n\r\n","title":"Java Springboot - unable to get multiple file uploads working in @RequestParam(&quot;image&quot;) MultipartFile[] image","body":"<p>I am using Java Spring boot for an application and I am struggling to get multiple files to hit the endpoint.</p>\n<p>&quot;Required request part 'image' is not present&quot;\n<a href=\"https://i.stack.imgur.com/r7mUH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r7mUH.png\" alt=\"enter image description here\" /></a>\nIm the formData -- its coming back as image[0], image<a href=\"https://i.stack.imgur.com/r7mUH.png\" rel=\"nofollow noreferrer\">1</a></p>\n<p>my code looks like this</p>\n<pre><code>@CrossOrigin\n@RequestMapping(value = &quot;/api/register&quot;, method = RequestMethod.POST)\n//@PostMapping(&quot;/api/register&quot;)\n@ResponseBody\npublic ResponseEntity&lt;BaseResponse&gt; register(@RequestParam(&quot;email&quot;) String email, @RequestParam(&quot;image&quot;) MultipartFile[] image) throws IOException {\n    System.out.println(&quot;email &quot; + email);\n    System.out.println(&quot;image &quot; + image);\n    return null;\n}\n</code></pre>\n<p>I've followed various links - that indicate the code is correct</p>\n<p><a href=\"https://www.baeldung.com/spring-file-upload\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-file-upload</a>\n<a href=\"https://www.oodlestechnologies.com/blogs/upload-a-file-using-multipartfile-in-spring-mvc/\" rel=\"nofollow noreferrer\">https://www.oodlestechnologies.com/blogs/upload-a-file-using-multipartfile-in-spring-mvc/</a>\n<a href=\"https://www.bezkoder.com/spring-boot-file-upload/\" rel=\"nofollow noreferrer\">https://www.bezkoder.com/spring-boot-file-upload/</a></p>\n<p>--- this may work - but this looks really clumsy and not the right approach</p>\n<pre><code>@RequestParam(&quot;image[0]&quot;) MultipartFile image)\n</code></pre>\n<hr />\n<p>is it the way I am making the formData? -- I've done a conversion from json using these functions</p>\n<pre><code>export function buildFormData(formData, data, parentKey) {\n  if (data &amp;&amp; typeof data === 'object' &amp;&amp; !(data instanceof Date) &amp;&amp; !(data instanceof File)) {\n    Object.keys(data).forEach(key =&gt; {\n      buildFormData(formData, data[key], parentKey ? `${parentKey}[${key}]` : key);\n    });\n  } else {\n    const value = data == null ? '' : data;\n\n    formData.append(parentKey, value);\n  }\n}\n\nexport function jsonToFormData(data) {\n  const formData = new FormData();\n  \n  buildFormData(formData, data);\n  \n  return formData;\n}\n</code></pre>\n<p>I've tried a different method - used here --\n<a href=\"https://dev.to/bawa_geek/how-to-convert-json-to-formdata-for-better-file-uploading-using-ajax-2ahf\" rel=\"nofollow noreferrer\">https://dev.to/bawa_geek/how-to-convert-json-to-formdata-for-better-file-uploading-using-ajax-2ahf</a></p>\n<p>it returns as a single entity now - but I still get the same error - &quot;Required request part 'image' is not present&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/MrSrR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MrSrR.png\" alt=\"enter image description here\" /></a></p>\n<p>Also tried</p>\n<pre><code>@PostMapping(value = &quot;/api/register&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE )\n</code></pre>\n<hr />\n<p>*** 09/03/2023 - Working solution. but need a programmatically way of replacing the old jsonToFromData to ensure it works properly/expected -- not sure why the other versions weren't working or how to make them similar to this hardcoded example.</p>\n<p>frontend</p>\n<p>I've had to rejig the jsonToFromData function</p>\n<pre><code>export function jsonToFormData(data) {\n      const formData = new FormData();\n        formData.append(&quot;email&quot;, data.email);\n    \n        // Retrieve FileList boject\n        const files = data.image;\n    \n        // Loop through files\n        for (let i = 0; i &lt; files.length; i++) {\n          let file = files.item(i)\n          formData.append(&quot;image&quot;, file);\n        }\n      return formData;\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/OhI5g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OhI5g.png\" alt=\"enter image description here\" /></a></p>\n<p>^ this lists the &quot;image&quot; multiple times in the FormData payload without any square brackets.</p>\n<p>the backend -- I've got it working on MultipartFile[]</p>\n<pre><code>public ResponseEntity&lt;BaseResponse&gt; register(@RequestParam(&quot;email&quot;) String email, @RequestParam(&quot;image&quot;) MultipartFile[] image) throws IOException {\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/VK4FU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VK4FU.png\" alt=\"enter image description here\" /></a></p>\n<p>then I've been able to loop through it like this</p>\n<pre><code>System.out.println(&quot;email &quot; + email);\nSystem.out.println(&quot;image &quot; + image);\n\nfor (int i = 0; i &lt; image.length; i++){\n    System.out.println(&quot;each img = &quot;+ image[i]);\n}\n</code></pre>\n<p>-=--\nalso wanting to make adding images optional - but this seems to be an issue too</p>\n<pre><code>@RequestParam(&quot;image&quot;) Optional&lt;MultipartFile[]&gt; image)\n</code></pre>\n<p>fails with a same error - &quot;image Optional.empty&quot; value looks like this</p>\n<p>how can I make a RequestParam optional for multipartfiles?</p>\n<p>this does not work\n@RequestParam(value = &quot;image&quot;, required=false) MultipartFile[] image</p>\n"},{"tags":["java","reactjs","rest","onos"],"answers":[{"tags":[],"owner":{"account_id":23032897,"reputation":36,"user_id":17152104,"display_name":"FortyWinters"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678442387,"creation_date":1678442387,"answer_id":75694650,"question_id":71261181,"body_markdown":"You would find Onos had avoided CORS error, if you ever read Onos&#39;s source code. But I still met the same problem recently, ajax couldn&#39;t fatch the data through rest api. I just did it in controller with php instead. Here is an example:\r\n\r\n    public function index() { \r\n        $url = &#39;your rest api&#39;;\r\n        $curl = curl_init($url);\r\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\r\n        curl_setopt($curl, CURLOPT_USERPWD, &#39;username:password&#39;);\r\n        curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);\r\n        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);\r\n        curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);\r\n        \r\n        $response = curl_exec($curl);\r\n        $resultStatus = curl_getinfo($curl);\r\n\r\n        if($resultStatus[&#39;http_code&#39;] == 200) {\r\n            echo $response;\r\n        } else {\r\n            echo &#39;Call Failed&#39;;\r\n        }\r\n    }\r\n\r\n\r\nHope it helps.","title":"ONOS rest api configuration to handle cors error","body":"<p>You would find Onos had avoided CORS error, if you ever read Onos's source code. But I still met the same problem recently, ajax couldn't fatch the data through rest api. I just did it in controller with php instead. Here is an example:</p>\n<pre><code>public function index() { \n    $url = 'your rest api';\n    $curl = curl_init($url);\n    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n    curl_setopt($curl, CURLOPT_USERPWD, 'username:password');\n    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);\n    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);\n    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);\n    \n    $response = curl_exec($curl);\n    $resultStatus = curl_getinfo($curl);\n\n    if($resultStatus['http_code'] == 200) {\n        echo $response;\n    } else {\n        echo 'Call Failed';\n    }\n}\n</code></pre>\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":21103266,"reputation":23,"user_id":15512771,"display_name":"Agniswar Chakraborty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1678442387,"creation_date":1645764488,"question_id":71261181,"body_markdown":"I am using reactjs to show ONOS data. But I am getting CORS error when fetching onos rest api url. How to configure rest api to overcome this problem. I did not find any documentation. Please helo me. Thanks in advance.","title":"ONOS rest api configuration to handle cors error","body":"<p>I am using reactjs to show ONOS data. But I am getting CORS error when fetching onos rest api url. How to configure rest api to overcome this problem. I did not find any documentation. Please helo me. Thanks in advance.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":2,"creation_date":1678435211,"post_id":75693534,"comment_id":133535206,"body_markdown":"Could you provide some sample data and expected output? It&#39;s not clear at the moment what exactly you&#39;re doing.","body":"Could you provide some sample data and expected output? It&#39;s not clear at the moment what exactly you&#39;re doing."},{"owner":{"account_id":2185983,"reputation":2728,"user_id":1934402,"accept_rate":92,"display_name":"yaserso"},"score":0,"creation_date":1678436279,"post_id":75693534,"comment_id":133535435,"body_markdown":"@Unmitigated added sample data and expected output.","body":"@Unmitigated added sample data and expected output."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1678438544,"creation_date":1678438544,"answer_id":75693987,"question_id":75693534,"body_markdown":"If I understand correctly, this can indeed be done with `teeing`. The downstreams are just rather complicated compositions of other collectors.\r\n\r\n    Pair&lt;String, String&gt; result = stream.collect(Collectors.teeing(\r\n        Collectors.mapping(Pair::getFirst, Collectors.joining(&quot;, &quot;, &quot;(&quot;, &quot;)&quot;)),\r\n        Collectors.flatMapping(pair -&gt; pair.getSecond().entrySet().stream(),\r\n            Collectors.mapping(entry -&gt; entry.getKey() + &quot; &quot; + entry.getValue(),\r\n                Collectors.joining(&quot;, &quot;, &quot;&quot;, &quot; are all very nutritious for the human body!&quot;))),\r\n        Pair::of\r\n    ));\r\n\r\n`result.getFirst()` is:\r\n\r\n    (fruits, vegetables, red meat, white meat)\r\n\r\nThis is achieved by a `mapping` collector getting the first of each pair in the stream, and then using `joining` to make the result string, with `&quot;, &quot;` as the separator, `&quot;(&quot;` as the prefix, and `&quot;)&quot;` as the suffix.\r\n\r\n`result.getSecond()` is:\r\n\r\n    red apple, yellow banana, red tomatoe, yellow corn, sheep mutton, cow beef, poultry chicken, fish tunaare all very nutritious for the human body!\r\n\r\nSince the second part of the pairs in the original stream is a map, and you want to process each entry, a `flatMapping` collector had to be used to map to the map entries. Then the entries are mapped to strings, and joined together like in the first downstream.","title":"How to map through a stream of Java pairs to consolidate into a single pair after some processing?","body":"<p>If I understand correctly, this can indeed be done with <code>teeing</code>. The downstreams are just rather complicated compositions of other collectors.</p>\n<pre><code>Pair&lt;String, String&gt; result = stream.collect(Collectors.teeing(\n    Collectors.mapping(Pair::getFirst, Collectors.joining(&quot;, &quot;, &quot;(&quot;, &quot;)&quot;)),\n    Collectors.flatMapping(pair -&gt; pair.getSecond().entrySet().stream(),\n        Collectors.mapping(entry -&gt; entry.getKey() + &quot; &quot; + entry.getValue(),\n            Collectors.joining(&quot;, &quot;, &quot;&quot;, &quot; are all very nutritious for the human body!&quot;))),\n    Pair::of\n));\n</code></pre>\n<p><code>result.getFirst()</code> is:</p>\n<pre><code>(fruits, vegetables, red meat, white meat)\n</code></pre>\n<p>This is achieved by a <code>mapping</code> collector getting the first of each pair in the stream, and then using <code>joining</code> to make the result string, with <code>&quot;, &quot;</code> as the separator, <code>&quot;(&quot;</code> as the prefix, and <code>&quot;)&quot;</code> as the suffix.</p>\n<p><code>result.getSecond()</code> is:</p>\n<pre><code>red apple, yellow banana, red tomatoe, yellow corn, sheep mutton, cow beef, poultry chicken, fish tunaare all very nutritious for the human body!\n</code></pre>\n<p>Since the second part of the pairs in the original stream is a map, and you want to process each entry, a <code>flatMapping</code> collector had to be used to map to the map entries. Then the entries are mapped to strings, and joined together like in the first downstream.</p>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678442217,"creation_date":1678440327,"answer_id":75694289,"question_id":75693534,"body_markdown":"You can also use reduction. Personally i find a combination of [Stream.map()][1] and [Stream.reduce()][2] much easier to read, create and maintain.\r\n```\r\nBinaryOperator&lt;String&gt; stringMerger = (first, second) -&gt; first + &quot;, &quot; + second;\r\nPair&lt;String, String&gt; result = stream\r\n        .map(p -&gt; Pair.of(p.left(), p.right().entrySet().stream().map(entry -&gt; entry.getKey() + &quot; &quot; + entry.getValue()).toList()))\r\n        .map(p -&gt; Pair.of(p.left(), String.join(&quot;, &quot;, p.right()))) //you can also directly join the stream elements in the previous map() if you want\r\n        .reduce((p1, p2) -&gt; p1.merge(p2, stringMerger, stringMerger))\r\n        .map(pair -&gt; Pair.of(String.format(&quot;(%s)&quot;, pair.left()), pair.right() + &quot; add some desired text&quot;))\r\n        .orElseThrow(() -&gt; new RuntimeException(&quot;Should not have happened&quot;));\r\nSystem.out.println(result.left());\r\nSystem.out.println(result.right());\r\n```\r\nPrints:\r\n```\r\n(fruits, vegetables, red meat, white meat)\r\nyellow banana, red apple, yellow corn, red tomatoe, sheep mutton, cow beef, fish tuna, poultry chicken add some desired text\r\n```\r\nPair is custom class for this example, since i don&#39;t know what the class you use looks like.\r\n```\r\npublic record Pair&lt;L, R&gt;(L left, R right) {\r\n\r\n  public static &lt;L, R&gt; Pair&lt;L, R&gt; of(L left, R right) {\r\n    return new Pair&lt;&gt;(left, right);\r\n  }\r\n\r\n  public Pair&lt;L, R&gt; merge(Pair&lt;L, R&gt; other, BinaryOperator&lt;L&gt; leftMerger, BinaryOperator&lt;R&gt; rightMerger) {\r\n    return of(leftMerger.apply(this.left, other.left), rightMerger.apply(this.right, other.right));\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-","title":"How to map through a stream of Java pairs to consolidate into a single pair after some processing?","body":"<p>You can also use reduction. Personally i find a combination of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\" rel=\"nofollow noreferrer\">Stream.map()</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#reduce-java.util.function.BinaryOperator-\" rel=\"nofollow noreferrer\">Stream.reduce()</a> much easier to read, create and maintain.</p>\n<pre><code>BinaryOperator&lt;String&gt; stringMerger = (first, second) -&gt; first + &quot;, &quot; + second;\nPair&lt;String, String&gt; result = stream\n        .map(p -&gt; Pair.of(p.left(), p.right().entrySet().stream().map(entry -&gt; entry.getKey() + &quot; &quot; + entry.getValue()).toList()))\n        .map(p -&gt; Pair.of(p.left(), String.join(&quot;, &quot;, p.right()))) //you can also directly join the stream elements in the previous map() if you want\n        .reduce((p1, p2) -&gt; p1.merge(p2, stringMerger, stringMerger))\n        .map(pair -&gt; Pair.of(String.format(&quot;(%s)&quot;, pair.left()), pair.right() + &quot; add some desired text&quot;))\n        .orElseThrow(() -&gt; new RuntimeException(&quot;Should not have happened&quot;));\nSystem.out.println(result.left());\nSystem.out.println(result.right());\n</code></pre>\n<p>Prints:</p>\n<pre><code>(fruits, vegetables, red meat, white meat)\nyellow banana, red apple, yellow corn, red tomatoe, sheep mutton, cow beef, fish tuna, poultry chicken add some desired text\n</code></pre>\n<p>Pair is custom class for this example, since i don't know what the class you use looks like.</p>\n<pre><code>public record Pair&lt;L, R&gt;(L left, R right) {\n\n  public static &lt;L, R&gt; Pair&lt;L, R&gt; of(L left, R right) {\n    return new Pair&lt;&gt;(left, right);\n  }\n\n  public Pair&lt;L, R&gt; merge(Pair&lt;L, R&gt; other, BinaryOperator&lt;L&gt; leftMerger, BinaryOperator&lt;R&gt; rightMerger) {\n    return of(leftMerger.apply(this.left, other.left), rightMerger.apply(this.right, other.right));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2185983,"reputation":2728,"user_id":1934402,"accept_rate":92,"display_name":"yaserso"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1678479568,"accepted_answer_id":75693987,"answer_count":2,"score":0,"last_activity_date":1678442217,"creation_date":1678435180,"question_id":75693534,"body_markdown":"I have a Stream of pairs that I wish to map through and return them as a pair of strings, but not before doing something with them, first (I learned that teeing is a possible solution):\r\n```java\r\nStream&lt;Pair&lt;String, CustomObject&gt;&gt; stream = Stream.of(\r\n  Pair.of(&quot;fruits&quot;,     Map.of(&quot;red&quot;,&quot;apple&quot;,   &quot;yellow&quot;, &quot;banana&quot;)),\r\n  Pair.of(&quot;vegetables&quot;, Map.of(&quot;red&quot;,&quot;tomatoe&quot;, &quot;yellow&quot;, &quot;corn&quot;)),\r\n  Pair.of(&quot;red meat&quot;,   Map.of(&quot;cow&quot;,&quot;beef&quot;,    &quot;sheep&quot;, &quot;mutton&quot;))\r\n  Pair.of(&quot;white meat&quot;, Map.of(&quot;fish&quot;,&quot;tuna&quot;,   &quot;poultry&quot;, &quot;chicken&quot;))\r\n);\r\nPair&lt;String, String&gt; result = stream.collect(Collectors.teeing(\r\n  Collectors.?(this::parseFirstPair),\r\n  Collectors.?(this::parseSecondPair),\r\n  Pair::of\r\n));\r\n/*\r\nresult will be:\r\nPair&lt;\r\n  &quot;(fruits, vegetables, red meat, white meat)&quot;,\r\n  &quot;Red apples, yellow bananas, red tomatoes, yellow corns, cow beef, sheep mutton, fish tuna, poultry chickens are all very nutritious for the human body!&quot;\r\n&gt;\r\n*/\r\n```\r\n\r\nI don&#39;t wish to group them, I don&#39;t wish to use a predicate.","title":"How to map through a stream of Java pairs to consolidate into a single pair after some processing?","body":"<p>I have a Stream of pairs that I wish to map through and return them as a pair of strings, but not before doing something with them, first (I learned that teeing is a possible solution):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;Pair&lt;String, CustomObject&gt;&gt; stream = Stream.of(\n  Pair.of(&quot;fruits&quot;,     Map.of(&quot;red&quot;,&quot;apple&quot;,   &quot;yellow&quot;, &quot;banana&quot;)),\n  Pair.of(&quot;vegetables&quot;, Map.of(&quot;red&quot;,&quot;tomatoe&quot;, &quot;yellow&quot;, &quot;corn&quot;)),\n  Pair.of(&quot;red meat&quot;,   Map.of(&quot;cow&quot;,&quot;beef&quot;,    &quot;sheep&quot;, &quot;mutton&quot;))\n  Pair.of(&quot;white meat&quot;, Map.of(&quot;fish&quot;,&quot;tuna&quot;,   &quot;poultry&quot;, &quot;chicken&quot;))\n);\nPair&lt;String, String&gt; result = stream.collect(Collectors.teeing(\n  Collectors.?(this::parseFirstPair),\n  Collectors.?(this::parseSecondPair),\n  Pair::of\n));\n/*\nresult will be:\nPair&lt;\n  &quot;(fruits, vegetables, red meat, white meat)&quot;,\n  &quot;Red apples, yellow bananas, red tomatoes, yellow corns, cow beef, sheep mutton, fish tuna, poultry chickens are all very nutritious for the human body!&quot;\n&gt;\n*/\n</code></pre>\n<p>I don't wish to group them, I don't wish to use a predicate.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":4996428,"reputation":362,"user_id":4016860,"accept_rate":75,"display_name":"Popeye"},"score":0,"creation_date":1678439505,"post_id":75694135,"comment_id":133536302,"body_markdown":"How did you write the method in java?","body":"How did you write the method in java?"}],"answers":[{"comments":[{"owner":{"account_id":1947573,"reputation":6810,"user_id":1752366,"accept_rate":54,"display_name":"silentsudo"},"score":0,"creation_date":1678440707,"post_id":75694186,"comment_id":133536654,"body_markdown":"How should he solve it?","body":"How should he solve it?"}],"tags":[],"owner":{"account_id":27981936,"reputation":11,"user_id":21369541,"display_name":"msg51246"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678439674,"creation_date":1678439674,"answer_id":75694186,"question_id":75694135,"body_markdown":"You don&#39;t hava colum `amount`.\r\nJust read error: Unable to find column position by name: `amount` [Column &#39;amount&#39; not found.]","title":"Inner Join query shows error in spring boot but the same query gives the result in mysql workbench","body":"<p>You don't hava colum <code>amount</code>.\nJust read error: Unable to find column position by name: <code>amount</code> [Column 'amount' not found.]</p>\n"},{"tags":[],"owner":{"account_id":27944401,"reputation":1,"user_id":21339692,"display_name":"Mohamed Hamras"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678441627,"creation_date":1678441627,"answer_id":75694528,"question_id":75694135,"body_markdown":"Its because in the query below &#39;amount&#39; is an extra column","title":"Inner Join query shows error in spring boot but the same query gives the result in mysql workbench","body":"<p>Its because in the query below 'amount' is an extra column</p>\n"}],"owner":{"account_id":27977133,"reputation":1,"user_id":21365668,"display_name":"Shelina Heerji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1678441627,"creation_date":1678439292,"question_id":75694135,"body_markdown":"When I use Inner join in Spring Boot, I get an `InvalidDataAccessResourceUsageException` but an equivalent query works in MySQL Workbench.\r\n\r\nThis is the query which runs successfully in MySQL Workbench:\r\n\r\n```sql\r\nselect gstem.orders.id,gstem.orders.order_no,gstem.orders.date, gstem.orders.quantity,gstem.orders.weight,\r\ngstem.orders.eta_date, gstem.statuses_types.name as status, gstem.customers.company_name from gstem.orders inner join gstem.statuses_types on gstem.orders.status_id = gstem.statuses_types.id inner join gstem.customers on gstem.orders.customer_id = customers.id where gstem.statuses_types.category = &quot;order_status&quot; and statuses_types.name = &quot;Received&quot; and stage = &quot;order&quot; order by order_no;\r\n```\r\n\r\n\r\nAnd this query fails in Spring Boot:\r\n```sql\r\nSelect `orders`.`id`, `order_no`, `date`, `quantity`, `weight`, `amount`, `eta_date`, `statuses_types`.`name` as `status`, `customers`.`company_name` from `orders` inner join `statuses_types` on `orders`.`status_id` = `statuses_types`.`id` inner join `customers` on `orders`.`customer_id` = `customers`.`id` where     `statuses_types`.`category` = :category and `stage` = :stage order by `order_no` &quot;\r\n```\r\n\r\nThis is the error I am getting:\r\n```\r\nFailed to complete request: org.springframework.dao.InvalidDataAccessResourceUsageException: Unable to find column position by name: `amount` [Column &#39;amount&#39; not found.] [n/a]; SQL [n/a]\r\n2023-03-10T13:58:58.783+05:30 ERROR 23388 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: Unable to find column position by name: `amount` [Column &#39;amount&#39; not found.] [n/a]; SQL [n/a]] with root cause\r\n```","title":"Inner Join query shows error in spring boot but the same query gives the result in mysql workbench","body":"<p>When I use Inner join in Spring Boot, I get an <code>InvalidDataAccessResourceUsageException</code> but an equivalent query works in MySQL Workbench.</p>\n<p>This is the query which runs successfully in MySQL Workbench:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select gstem.orders.id,gstem.orders.order_no,gstem.orders.date, gstem.orders.quantity,gstem.orders.weight,\ngstem.orders.eta_date, gstem.statuses_types.name as status, gstem.customers.company_name from gstem.orders inner join gstem.statuses_types on gstem.orders.status_id = gstem.statuses_types.id inner join gstem.customers on gstem.orders.customer_id = customers.id where gstem.statuses_types.category = &quot;order_status&quot; and statuses_types.name = &quot;Received&quot; and stage = &quot;order&quot; order by order_no;\n</code></pre>\n<p>And this query fails in Spring Boot:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>Select `orders`.`id`, `order_no`, `date`, `quantity`, `weight`, `amount`, `eta_date`, `statuses_types`.`name` as `status`, `customers`.`company_name` from `orders` inner join `statuses_types` on `orders`.`status_id` = `statuses_types`.`id` inner join `customers` on `orders`.`customer_id` = `customers`.`id` where     `statuses_types`.`category` = :category and `stage` = :stage order by `order_no` &quot;\n</code></pre>\n<p>This is the error I am getting:</p>\n<pre><code>Failed to complete request: org.springframework.dao.InvalidDataAccessResourceUsageException: Unable to find column position by name: `amount` [Column 'amount' not found.] [n/a]; SQL [n/a]\n2023-03-10T13:58:58.783+05:30 ERROR 23388 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: Unable to find column position by name: `amount` [Column 'amount' not found.] [n/a]; SQL [n/a]] with root cause\n</code></pre>\n"},{"tags":["java","jms","junit5"],"answers":[{"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1678850730,"post_id":75694404,"comment_id":133611958,"body_markdown":"If this is the correct answer please mark it as such to help other users who hit this same problem in the future. Thanks!","body":"If this is the correct answer please mark it as such to help other users who hit this same problem in the future. Thanks!"}],"tags":[],"owner":{"account_id":975141,"reputation":2185,"user_id":2968729,"accept_rate":72,"display_name":"anat0lius"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678441538,"creation_date":1678440916,"answer_id":75694404,"question_id":75693773,"body_markdown":"I have solved it by resetting the message with `outputMsg.reset();` just before the assertions.\r\n\r\nJavadoc:\r\n\r\n    Puts the message body in read-only mode and repositions the stream of bytes to the beginning.\r\n\r\nPS: As I was already expecting, the `readUTF` does not work for me either (same as for `writeUTF`), so I&#39;m just using this instead:\r\n\r\n    String getMessageContent(BytesMessage msg) {\r\n        try {\r\n            msg.reset();\r\n            int bodyLength = (int) msg.getBodyLength();\r\n            byte[] result = new byte[bodyLength];\r\n            msg.readBytes(result, bodyLength);\r\n            return new String(result, StandardCharsets.UTF_8);\r\n        } catch (JMSException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }","title":"Can not read from ActiveMQBytesMessage","body":"<p>I have solved it by resetting the message with <code>outputMsg.reset();</code> just before the assertions.</p>\n<p>Javadoc:</p>\n<pre><code>Puts the message body in read-only mode and repositions the stream of bytes to the beginning.\n</code></pre>\n<p>PS: As I was already expecting, the <code>readUTF</code> does not work for me either (same as for <code>writeUTF</code>), so I'm just using this instead:</p>\n<pre><code>String getMessageContent(BytesMessage msg) {\n    try {\n        msg.reset();\n        int bodyLength = (int) msg.getBodyLength();\n        byte[] result = new byte[bodyLength];\n        msg.readBytes(result, bodyLength);\n        return new String(result, StandardCharsets.UTF_8);\n    } catch (JMSException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":975141,"reputation":2185,"user_id":2968729,"accept_rate":72,"display_name":"anat0lius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75694404,"answer_count":1,"score":1,"last_activity_date":1678441538,"creation_date":1678437006,"question_id":75693773,"body_markdown":"I&#39;m writing a junit test where I&#39;m trying to assert the ack message:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class MessageHandlerBeanTest {\r\n    \r\n    \t//... @Mock\r\n\r\n        @InjectMocks\r\n        MessageHandlerBean messageHandlerBean;\r\n    \r\n    \r\n        private BytesMessage inputMsg;\r\n    \r\n        private BytesMessage outputMsg;\r\n\r\n\r\n\t    void setMessageContent(String xml) {\r\n\t        try {\r\n\t            inputMsg.clearBody();\r\n\t            inputMsg.writeBytes(xml.getBytes(StandardCharsets.UTF_8));\t// for some reason writeUTF() does not encode correctly\r\n\t        } catch (JMSException e) {\r\n\t            throw new RuntimeException(e);\r\n\t        }\r\n\t    }\r\n    \r\n    \r\n        @BeforeEach\r\n        void setUp() {\r\n    \r\n        \t//...\r\n\r\n        \tinputMsg = new ActiveMQBytesMessage();\r\n            setMessageContent(envelope);\r\n    \r\n            outputMsg = new ActiveMQBytesMessage();\r\n        \tMockito.when(currSession.createBytesMessage()).thenReturn(outputMsg);\r\n    \r\n        }\r\n    \r\n    \r\n        @Test\r\n        void valid_msg_returns_ok() throws Exception {\r\n    \r\n            messageHandlerBean.onMessage(inputMsg);\r\n        \r\n            Assertions.assertThat(outputMsg.getBodyLength()).isNotZero();\r\n            Assertions.assertThat(outputMsg.readUTF()).isEqualTo(&quot;&lt;xml&gt;...&lt;xml&gt;&quot;);\r\n        }\r\n    }\r\n\r\nBut I end getting this exception:\r\n\r\n    javax.jms.MessageNotReadableException: Message body is write-only\r\n    \r\n    \tat org.apache.activemq.command.ActiveMQBytesMessage.checkWriteOnlyBody(ActiveMQBytesMessage.java:819)\r\n    \tat org.apache.activemq.command.ActiveMQBytesMessage.initializeReading(ActiveMQBytesMessage.java:824)\r\n    \tat org.apache.activemq.command.ActiveMQBytesMessage.getBodyLength(ActiveMQBytesMessage.java:182)\r\n\r\nIf I insepct the `outputMsg` while in debug, this is fine, I can see the body is populated and jms properties are set as well.","title":"Can not read from ActiveMQBytesMessage","body":"<p>I'm writing a junit test where I'm trying to assert the ack message:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass MessageHandlerBeanTest {\n\n    //... @Mock\n\n    @InjectMocks\n    MessageHandlerBean messageHandlerBean;\n\n\n    private BytesMessage inputMsg;\n\n    private BytesMessage outputMsg;\n\n\n    void setMessageContent(String xml) {\n        try {\n            inputMsg.clearBody();\n            inputMsg.writeBytes(xml.getBytes(StandardCharsets.UTF_8));  // for some reason writeUTF() does not encode correctly\n        } catch (JMSException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n\n    @BeforeEach\n    void setUp() {\n\n        //...\n\n        inputMsg = new ActiveMQBytesMessage();\n        setMessageContent(envelope);\n\n        outputMsg = new ActiveMQBytesMessage();\n        Mockito.when(currSession.createBytesMessage()).thenReturn(outputMsg);\n\n    }\n\n\n    @Test\n    void valid_msg_returns_ok() throws Exception {\n\n        messageHandlerBean.onMessage(inputMsg);\n    \n        Assertions.assertThat(outputMsg.getBodyLength()).isNotZero();\n        Assertions.assertThat(outputMsg.readUTF()).isEqualTo(&quot;&lt;xml&gt;...&lt;xml&gt;&quot;);\n    }\n}\n</code></pre>\n<p>But I end getting this exception:</p>\n<pre><code>javax.jms.MessageNotReadableException: Message body is write-only\n\n    at org.apache.activemq.command.ActiveMQBytesMessage.checkWriteOnlyBody(ActiveMQBytesMessage.java:819)\n    at org.apache.activemq.command.ActiveMQBytesMessage.initializeReading(ActiveMQBytesMessage.java:824)\n    at org.apache.activemq.command.ActiveMQBytesMessage.getBodyLength(ActiveMQBytesMessage.java:182)\n</code></pre>\n<p>If I insepct the <code>outputMsg</code> while in debug, this is fine, I can see the body is populated and jms properties are set as well.</p>\n"},{"tags":["java","eclipse","spring-boot","properties","terminal"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":1,"creation_date":1496825865,"post_id":44407960,"comment_id":75814854,"body_markdown":"what is the reason that you are doing this `.properties(System.getProperties()`?","body":"what is the reason that you are doing this <code>.properties(System.getProperties()</code>?"},{"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"score":1,"creation_date":1496825914,"post_id":44407960,"comment_id":75814892,"body_markdown":"you just need `SpringApplication.run(Application.class, args);` in `main ` method.","body":"you just need <code>SpringApplication.run(Application.class, args);</code> in <code>main </code> method."}],"answers":[{"tags":[],"owner":{"account_id":1887647,"reputation":5271,"user_id":1706545,"accept_rate":89,"display_name":"Daniel Taub"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1496827952,"creation_date":1496827952,"answer_id":44408798,"question_id":44407960,"body_markdown":"Your `properties` file should be under the `resources` folder.&lt;br&gt;\r\nif you using maven/gradle it should be under `src/main/java/resources/application.properties`\r\n","title":"Spring boot running from Eclipse vs running from Terminal [Not Loading properties file]","body":"<p>Your <code>properties</code> file should be under the <code>resources</code> folder.<br>\nif you using maven/gradle it should be under <code>src/main/java/resources/application.properties</code></p>\n"},{"tags":[],"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496828511,"creation_date":1496828110,"answer_id":44408848,"question_id":44407960,"body_markdown":"change your `main` method as follows, it will load the `application.properties` from `src/main/resources` folder\r\n\r\n    public static void main(String[] args) throws Exception {\r\n       SpringApplication.run(Application.class, args);\r\n    }","title":"Spring boot running from Eclipse vs running from Terminal [Not Loading properties file]","body":"<p>change your <code>main</code> method as follows, it will load the <code>application.properties</code> from <code>src/main/resources</code> folder</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n   SpringApplication.run(Application.class, args);\n}\n</code></pre>\n"}],"owner":{"account_id":6011371,"reputation":1250,"user_id":4721737,"accept_rate":78,"display_name":"Saqib Ahmed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":845,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":44408798,"answer_count":2,"score":2,"last_activity_date":1678441497,"creation_date":1496825685,"question_id":44407960,"body_markdown":"I am working on spring boot application in which I have made a property file, \r\n\r\n&gt; application.properties\r\n\r\n    #Generated by Eclipse Messages Editor (Eclipse Babel)\r\n    # ===============================\r\n    # = Spring Application\r\n    # ===============================\r\n    \r\n    server.port = 80\r\n\r\nand here is main method:\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tnew SpringApplicationBuilder().sources(SpringBootWebApplication.class).properties(System.getProperties()).run(args);\r\n\t}\r\n\r\nit is working fine when I am running it on eclipse.\r\n\r\nif when I am running using commandline:\r\n\r\n    java -jar target\\tmfboot-0.0.1-SNAPSHOT.jar\r\napplication is running on default port of tomcat **8080**\r\n\r\nI think it is not loading `application.properties` file while running using terminal.\r\n\r\nI’m using Maven 3.2.","title":"Spring boot running from Eclipse vs running from Terminal [Not Loading properties file]","body":"<p>I am working on spring boot application in which I have made a property file,</p>\n<blockquote>\n<p>application.properties</p>\n</blockquote>\n<pre><code>#Generated by Eclipse Messages Editor (Eclipse Babel)\n# ===============================\n# = Spring Application\n# ===============================\n\nserver.port = 80\n</code></pre>\n<p>and here is main method:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    new SpringApplicationBuilder().sources(SpringBootWebApplication.class).properties(System.getProperties()).run(args);\n}\n</code></pre>\n<p>it is working fine when I am running it on eclipse.</p>\n<p>if when I am running using commandline:</p>\n<pre><code>java -jar target\\tmfboot-0.0.1-SNAPSHOT.jar\n</code></pre>\n<p>application is running on default port of tomcat <strong>8080</strong></p>\n<p>I think it is not loading <code>application.properties</code> file while running using terminal.</p>\n<p>I’m using Maven 3.2.</p>\n"},{"tags":["java","flexbuilder","flatbuffers"],"owner":{"account_id":3334422,"reputation":612,"user_id":2802446,"display_name":"G.G."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678441388,"creation_date":1678441388,"question_id":75694482,"body_markdown":"I have a requirement where I need to serialise a payload whose schema is unknown. The payload size is in MBs. Hence, I am thinking to use FlexBuffer to reduce the network bandwidth.\r\n\r\nHow can I know the size of FlexBuffer once data is serialized in it?\r\n\r\nI am using com.google.flatbuffers:flatbuffers-java:23.3.3 library. \r\n\r\n```\r\n  byte[] fileContent = Files.readAllBytes(Path.of(&quot;data.txt&quot;));\r\n  ByteBuffer bb = ByteBuffer.wrap(fileContent);\r\n\r\n  int beforeSize = smb.array().length;\r\n  System.out.println(&quot;before: &quot; + beforeSize); // before: 9085\r\n\r\n  FlexBuffersBuilder builder = new FlexBuffersBuilder(FlexBuffersBuilder.BUILDER_FLAG_SHARE_KEYS_AND_STRINGS);\r\n  builder.putBlob(fileContent);\r\n  int afterSize = builder.getBuffer().data().length\r\n  System.out.println(&quot;after: &quot; + afterSize); // after: 9087\r\n```\r\n\r\nIs above way of getting serialised data size is correct? \r\nAs far as I understand, the afterSize should be smaller than beforeSize. But, with above method I am getting almost same size i.e. before: 9085 and after: 9087\r\n\r\nCan anyone please guide me how can I measure the size of FlexBuffer created so that I can be sure that data size is reduced before sending over network?\r\n\r\nAlso, does FlexBuffer reduce the size at all with un-known schema data?\r\n\r\nThanks a lot in advance.","title":"FlexBuffer serialised/deserialised data size for blob added","body":"<p>I have a requirement where I need to serialise a payload whose schema is unknown. The payload size is in MBs. Hence, I am thinking to use FlexBuffer to reduce the network bandwidth.</p>\n<p>How can I know the size of FlexBuffer once data is serialized in it?</p>\n<p>I am using com.google.flatbuffers:flatbuffers-java:23.3.3 library.</p>\n<pre><code>  byte[] fileContent = Files.readAllBytes(Path.of(&quot;data.txt&quot;));\n  ByteBuffer bb = ByteBuffer.wrap(fileContent);\n\n  int beforeSize = smb.array().length;\n  System.out.println(&quot;before: &quot; + beforeSize); // before: 9085\n\n  FlexBuffersBuilder builder = new FlexBuffersBuilder(FlexBuffersBuilder.BUILDER_FLAG_SHARE_KEYS_AND_STRINGS);\n  builder.putBlob(fileContent);\n  int afterSize = builder.getBuffer().data().length\n  System.out.println(&quot;after: &quot; + afterSize); // after: 9087\n</code></pre>\n<p>Is above way of getting serialised data size is correct?\nAs far as I understand, the afterSize should be smaller than beforeSize. But, with above method I am getting almost same size i.e. before: 9085 and after: 9087</p>\n<p>Can anyone please guide me how can I measure the size of FlexBuffer created so that I can be sure that data size is reduced before sending over network?</p>\n<p>Also, does FlexBuffer reduce the size at all with un-known schema data?</p>\n<p>Thanks a lot in advance.</p>\n"},{"tags":["java","spring-boot","maven","jpa"],"comments":[{"owner":{"account_id":26506001,"reputation":2574,"user_id":20142156,"display_name":"Dhaval Gajjar"},"score":0,"creation_date":1678369642,"post_id":75685306,"comment_id":133521731,"body_markdown":"Have you created `entityManagerFactory` bean? Or you have specified the bean name `jpaSharedEM_entityManagerFactory` at any place in the code? Please share.","body":"Have you created <code>entityManagerFactory</code> bean? Or you have specified the bean name <code>jpaSharedEM_entityManagerFactory</code> at any place in the code? Please share."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1678369934,"post_id":75685306,"comment_id":133521839,"body_markdown":"Hi&amp;Welcome! What is your spring (&#129406;) , tomcat, java version ? What is your (jpa) db dependency? Is the db up and running? Please [edit] to improve your question. &quot;Must read&quot;: [mre] (*creating* a good mre will *solve* your issue in 88%;)","body":"Hi&amp;Welcome! What is your spring (🥾) , tomcat, java version ? What is your (jpa) db dependency? Is the db up and running? Please <a href=\"https://stackoverflow.com/posts/75685306/edit\">edit</a> to improve your question. &quot;Must read&quot;: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (<i>creating</i> a good mre will <i>solve</i> your issue in 88%;)"},{"owner":{"account_id":27809789,"reputation":13,"user_id":21232401,"display_name":"trying to be alive"},"score":0,"creation_date":1678370584,"post_id":75685306,"comment_id":133522081,"body_markdown":"@DhavalGajjar I didnt find any mention of this in the project files, this project is a task from the university (as an example)","body":"@DhavalGajjar I didnt find any mention of this in the project files, this project is a task from the university (as an example)"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1678373486,"post_id":75685306,"comment_id":133523077,"body_markdown":"Please also share your spring.datasource properties from application.properties (or equivalent). Can you see any logs about connecting to the database?","body":"Please also share your spring.datasource properties from application.properties (or equivalent). Can you see any logs about connecting to the database?"},{"owner":{"account_id":27809789,"reputation":13,"user_id":21232401,"display_name":"trying to be alive"},"score":0,"creation_date":1678373876,"post_id":75685306,"comment_id":133523197,"body_markdown":"@Mar-Z added this, and connection with my db works fine","body":"@Mar-Z added this, and connection with my db works fine"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1678379108,"post_id":75685306,"comment_id":133525027,"body_markdown":"Try to remove hardcoded versions from pom.xml for spring and spring.security. They should be taken from the parent (spring-boot-starter-parent). I have seen on the web there were issues regarding jpaSharedEM_entityManagerFactory in the early versions of spring 6.","body":"Try to remove hardcoded versions from pom.xml for spring and spring.security. They should be taken from the parent (spring-boot-starter-parent). I have seen on the web there were issues regarding jpaSharedEM_entityManagerFactory in the early versions of spring 6."},{"owner":{"account_id":27809789,"reputation":13,"user_id":21232401,"display_name":"trying to be alive"},"score":0,"creation_date":1678435879,"post_id":75685306,"comment_id":133535339,"body_markdown":"@Mar-Z thank you! Your answer helped me to find the reason.\nI switch to 3.0.1 spring-boot-starter-parent and it&#39;s done","body":"@Mar-Z thank you! Your answer helped me to find the reason. I switch to 3.0.1 spring-boot-starter-parent and it&#39;s done"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678441242,"creation_date":1678441242,"answer_id":75694450,"question_id":75685306,"body_markdown":"&gt; What means this error?\r\n\r\nThe first two errors are about unsatisfied dependencies to the constructor parameters. From the code we can see that this parameter is &#39;tokenRepository&#39;. Unsatisfied dependency error in Spring means that the injection of a reference to an object (bean) is not possible. However both errors a just subsequent errors of the third one.\r\n\r\nThe third error shows the reason why the &#39;tokenRepository&#39; can&#39;t be created (instantiated): there is an unknown reference to bean &#39;jpaSharedEM_entityManagerFactory&#39; in JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration class. This looks like a bug in a configuration class of Spring Data where we can&#39;t fix anything. Searching the web shows that there were some issue with this reference in the early versions of Spring 6, respectively Hibernate.\r\n\r\n&gt; How I can fix it?\r\n\r\nWait until the bug is fixed or try to use an earlier version of Spring. From the comment I can see that switching spring-boot-starter-parent to 3.0.1 (instead of 3.0.4) was helpful.\r\n","title":"Java Spring Boot -- Error starting Tomcat context","body":"<blockquote>\n<p>What means this error?</p>\n</blockquote>\n<p>The first two errors are about unsatisfied dependencies to the constructor parameters. From the code we can see that this parameter is 'tokenRepository'. Unsatisfied dependency error in Spring means that the injection of a reference to an object (bean) is not possible. However both errors a just subsequent errors of the third one.</p>\n<p>The third error shows the reason why the 'tokenRepository' can't be created (instantiated): there is an unknown reference to bean 'jpaSharedEM_entityManagerFactory' in JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration class. This looks like a bug in a configuration class of Spring Data where we can't fix anything. Searching the web shows that there were some issue with this reference in the early versions of Spring 6, respectively Hibernate.</p>\n<blockquote>\n<p>How I can fix it?</p>\n</blockquote>\n<p>Wait until the bug is fixed or try to use an earlier version of Spring. From the comment I can see that switching spring-boot-starter-parent to 3.0.1 (instead of 3.0.4) was helpful.</p>\n"}],"owner":{"account_id":27809789,"reputation":13,"user_id":21232401,"display_name":"trying to be alive"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":849,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75694450,"answer_count":1,"score":1,"last_activity_date":1678441242,"creation_date":1678368744,"question_id":75685306,"body_markdown":"**Edit: added pom.xml info**\r\n\r\n```   \r\n Error: *o.s.b.web.embedded.tomcat.TomcatStarter: \r\n    \r\n    Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. \r\n    \r\n    Message: Error creating bean with name &#39;jwtRequestFilter&#39; defined in file [C:...\\target\\classes\\com\\...\\Semen\\security\\JwtRequestFilter.class]: \r\n    \r\n    Unsatisfied dependency expressed through constructor parameter 1: \r\n    \r\n    Error creating bean with name &#39;jwtTokenService&#39; defined in file [C:...\\target\\classes\\com\\...\\Semen\\security\\JwtTokenService.class]: \r\n    \r\n    Unsatisfied dependency expressed through constructor parameter 1: \r\n    \r\n    Error creating bean with name &#39;tokenRepository&#39; defined in com.psuti.Semen.security.token.TokenRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: \r\n    \r\n    Cannot resolve reference to bean &#39;jpaSharedEM_entityManagerFactory&#39; while setting bean property &#39;entityManager&#39;\r\n```\r\n\r\n**application.properties**\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql://127.0.0.1:5432/testdb\r\nspring.datasource.username=testuser\r\nspring.datasource.password=testpassword\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.hibernate.ddl-auto=validate\r\nspring.profiles.active=development\r\njwt.secret=simple\r\n```\r\n\r\nInfo from **pom.xml**:\r\n\r\n```\r\norg.springframework.boot:spring-boot-starter-parentL3.0.4\r\njava.version 18\r\nspring 6.0.5\r\nspring-security.version 6.0.2\r\norg.springframework.boot:spring-boot-starter-web\r\norg.springframework.boot:spring-boot-devtools:runtime:true\r\norg.springframework.boot:spring-boot-starter-test:test\r\norg.springframework.boot:spring-boot-starter-data-jpa\r\norg.flywaydb:flyway-core\r\norg.postgresql:postgresql:runtime\r\norg.projectlombok:lombok:true\r\norg.springframework.boot:spring-boot-starter-security\r\nio.jsonwebtoken:jjwt-api:0.11.5\r\nio.jsonwebtoken:jjwt-impl:0.11.5:runtime\r\nio.jsonwebtoken:jjwt-jackson:0.11.5:runtime\r\norg.springframework.boot:spring-boot-maven-plugin\r\n```\r\n\r\n**Token**\r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport jakarta.persistence.*;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.UUID;\r\n\r\n@Getter\r\n@Setter\r\n@Entity(name = &quot;token&quot;)\r\n@Table(name = &quot;tokens&quot;, schema = &quot;public&quot;)\r\npublic class Token implements Serializable {\r\n    @Column(nullable = false, unique = true)\r\n    private String value;\r\n    @JsonIgnore\r\n    private boolean killed;\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;user_id&quot;)\r\n    private UUID userId;\r\n}\r\n\r\n```\r\n\r\n**TokenRepository**\r\n\r\n```\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\n\r\npublic interface TokenRepository extends JpaRepository&lt;Token, UUID&gt; {\r\n    Optional&lt;Token&gt; findByValue(String value);\r\n    Optional&lt;Token&gt; findTokenByUserId(UUID id);\r\n}\r\n```\r\n**JwtTokenService**\r\n\r\n```\r\npackage com.psuti.Semen.security;\r\n\r\nimport com.psuti.Semen.security.token.JwtTokenUtil;\r\nimport com.psuti.Semen.security.token.Token;\r\nimport com.psuti.Semen.security.token.TokenRepository;\r\nimport jakarta.persistence.EntityExistsException;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.Date;\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\nimport java.util.concurrent.atomic.AtomicBoolean;\r\n\r\n@Service\r\npublic class JwtTokenService {\r\n    private final JwtTokenUtil&lt;UUID&gt; jwtUserIdTokenUtil;\r\n    private final TokenRepository tokenRepository;\r\n    @Autowired\r\n    public JwtTokenService(JwtTokenUtil&lt;UUID&gt; jwtUserIdTokenUtil,\r\n                           TokenRepository tokenRepository) {\r\n        this.jwtUserIdTokenUtil = jwtUserIdTokenUtil;\r\n        this.tokenRepository = tokenRepository;\r\n    }\r\n    public Token createToken(UUID userId){\r\n        String token = jwtUserIdTokenUtil.generateToken(userId);\r\n        Token tokenEntity = new Token();\r\n        tokenEntity.setUserId(userId);\r\n        tokenEntity.setValue(token);\r\n        tokenEntity.setKilled(false);\r\n        return tokenRepository.save(tokenEntity);\r\n    }\r\n    public void kill(String tokenValue){\r\n        Token token = tokenByValue(tokenValue);\r\n        token.setKilled(true);\r\n        tokenRepository.save(token);\r\n    }\r\n    public void kill(Token token){\r\n        token.setKilled(true);\r\n        tokenRepository.save(token);\r\n    }\r\n    public boolean tokenIsKilled(String tokenValue){\r\n        return tokenByValue(tokenValue).isKilled();\r\n    }\r\n    public boolean tokenExists(String tokenValue){\r\n        AtomicBoolean exists = new AtomicBoolean(false);\r\n        tokenRepository.findByValue(tokenValue).ifPresent(\r\n                (t)-&gt; exists.set(!t.isKilled())\r\n        );\r\n        return exists.get();\r\n    }\r\n    private Token tokenByValue(String val){\r\n        Token token = tokenRepository.findByValue(val).orElseThrow(()-&gt;{\r\n            throw new EntityExistsException(&quot;token with value: &#39;&quot; + val + &quot;&#39; doesn&#39;t exists&quot;);\r\n        });\r\n        return token;\r\n    }\r\n    public Optional&lt;Token&gt; findOptionalByUserId(UUID id){\r\n        return tokenRepository.findTokenByUserId(id);\r\n    }\r\n    public Token findByUserId(UUID id){\r\n        return tokenRepository.findTokenByUserId(id).orElseThrow(()-&gt;{\r\n            throw new EntityExistsException(&quot;token by user id: &quot; + id + &quot; doesn&#39;t exists&quot;);\r\n        });\r\n    }\r\n    public boolean validateToken(String token, UUID id){\r\n        if(!jwtUserIdTokenUtil.validateToken(token,id)){\r\n            if(new Date().before(jwtUserIdTokenUtil.getExpirationDateFromToken(token))){\r\n                kill(token);\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    public UUID getIdFromToken(String token){\r\n        return jwtUserIdTokenUtil.getSubjectFromToken(token);\r\n    }\r\n    public Token refreshToken(String tokenValue){\r\n        Token token = tokenByValue(tokenValue);\r\n        token.setValue(jwtUserIdTokenUtil.generateToken(token.getUserId()));\r\n        return tokenRepository.save(token);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI tried search info about this but nothing helped me\r\n\r\nWhat means this error? How I can fix it? ","title":"Java Spring Boot -- Error starting Tomcat context","body":"<p><strong>Edit: added pom.xml info</strong></p>\n<pre><code> Error: *o.s.b.web.embedded.tomcat.TomcatStarter: \n    \n    Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. \n    \n    Message: Error creating bean with name 'jwtRequestFilter' defined in file [C:...\\target\\classes\\com\\...\\Semen\\security\\JwtRequestFilter.class]: \n    \n    Unsatisfied dependency expressed through constructor parameter 1: \n    \n    Error creating bean with name 'jwtTokenService' defined in file [C:...\\target\\classes\\com\\...\\Semen\\security\\JwtTokenService.class]: \n    \n    Unsatisfied dependency expressed through constructor parameter 1: \n    \n    Error creating bean with name 'tokenRepository' defined in com.psuti.Semen.security.token.TokenRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: \n    \n    Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.url=jdbc:postgresql://127.0.0.1:5432/testdb\nspring.datasource.username=testuser\nspring.datasource.password=testpassword\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.hibernate.ddl-auto=validate\nspring.profiles.active=development\njwt.secret=simple\n</code></pre>\n<p>Info from <strong>pom.xml</strong>:</p>\n<pre><code>org.springframework.boot:spring-boot-starter-parentL3.0.4\njava.version 18\nspring 6.0.5\nspring-security.version 6.0.2\norg.springframework.boot:spring-boot-starter-web\norg.springframework.boot:spring-boot-devtools:runtime:true\norg.springframework.boot:spring-boot-starter-test:test\norg.springframework.boot:spring-boot-starter-data-jpa\norg.flywaydb:flyway-core\norg.postgresql:postgresql:runtime\norg.projectlombok:lombok:true\norg.springframework.boot:spring-boot-starter-security\nio.jsonwebtoken:jjwt-api:0.11.5\nio.jsonwebtoken:jjwt-impl:0.11.5:runtime\nio.jsonwebtoken:jjwt-jackson:0.11.5:runtime\norg.springframework.boot:spring-boot-maven-plugin\n</code></pre>\n<p><strong>Token</strong></p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport jakarta.persistence.*;\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport java.io.Serializable;\nimport java.util.UUID;\n\n@Getter\n@Setter\n@Entity(name = &quot;token&quot;)\n@Table(name = &quot;tokens&quot;, schema = &quot;public&quot;)\npublic class Token implements Serializable {\n    @Column(nullable = false, unique = true)\n    private String value;\n    @JsonIgnore\n    private boolean killed;\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;user_id&quot;)\n    private UUID userId;\n}\n\n</code></pre>\n<p><strong>TokenRepository</strong></p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\n\nimport java.util.Optional;\nimport java.util.UUID;\n\npublic interface TokenRepository extends JpaRepository&lt;Token, UUID&gt; {\n    Optional&lt;Token&gt; findByValue(String value);\n    Optional&lt;Token&gt; findTokenByUserId(UUID id);\n}\n</code></pre>\n<p><strong>JwtTokenService</strong></p>\n<pre><code>package com.psuti.Semen.security;\n\nimport com.psuti.Semen.security.token.JwtTokenUtil;\nimport com.psuti.Semen.security.token.Token;\nimport com.psuti.Semen.security.token.TokenRepository;\nimport jakarta.persistence.EntityExistsException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Date;\nimport java.util.Optional;\nimport java.util.UUID;\nimport java.util.concurrent.atomic.AtomicBoolean;\n\n@Service\npublic class JwtTokenService {\n    private final JwtTokenUtil&lt;UUID&gt; jwtUserIdTokenUtil;\n    private final TokenRepository tokenRepository;\n    @Autowired\n    public JwtTokenService(JwtTokenUtil&lt;UUID&gt; jwtUserIdTokenUtil,\n                           TokenRepository tokenRepository) {\n        this.jwtUserIdTokenUtil = jwtUserIdTokenUtil;\n        this.tokenRepository = tokenRepository;\n    }\n    public Token createToken(UUID userId){\n        String token = jwtUserIdTokenUtil.generateToken(userId);\n        Token tokenEntity = new Token();\n        tokenEntity.setUserId(userId);\n        tokenEntity.setValue(token);\n        tokenEntity.setKilled(false);\n        return tokenRepository.save(tokenEntity);\n    }\n    public void kill(String tokenValue){\n        Token token = tokenByValue(tokenValue);\n        token.setKilled(true);\n        tokenRepository.save(token);\n    }\n    public void kill(Token token){\n        token.setKilled(true);\n        tokenRepository.save(token);\n    }\n    public boolean tokenIsKilled(String tokenValue){\n        return tokenByValue(tokenValue).isKilled();\n    }\n    public boolean tokenExists(String tokenValue){\n        AtomicBoolean exists = new AtomicBoolean(false);\n        tokenRepository.findByValue(tokenValue).ifPresent(\n                (t)-&gt; exists.set(!t.isKilled())\n        );\n        return exists.get();\n    }\n    private Token tokenByValue(String val){\n        Token token = tokenRepository.findByValue(val).orElseThrow(()-&gt;{\n            throw new EntityExistsException(&quot;token with value: '&quot; + val + &quot;' doesn't exists&quot;);\n        });\n        return token;\n    }\n    public Optional&lt;Token&gt; findOptionalByUserId(UUID id){\n        return tokenRepository.findTokenByUserId(id);\n    }\n    public Token findByUserId(UUID id){\n        return tokenRepository.findTokenByUserId(id).orElseThrow(()-&gt;{\n            throw new EntityExistsException(&quot;token by user id: &quot; + id + &quot; doesn't exists&quot;);\n        });\n    }\n    public boolean validateToken(String token, UUID id){\n        if(!jwtUserIdTokenUtil.validateToken(token,id)){\n            if(new Date().before(jwtUserIdTokenUtil.getExpirationDateFromToken(token))){\n                kill(token);\n            }\n            return false;\n        }\n        return true;\n    }\n    public UUID getIdFromToken(String token){\n        return jwtUserIdTokenUtil.getSubjectFromToken(token);\n    }\n    public Token refreshToken(String tokenValue){\n        Token token = tokenByValue(tokenValue);\n        token.setValue(jwtUserIdTokenUtil.generateToken(token.getUserId()));\n        return tokenRepository.save(token);\n    }\n}\n\n</code></pre>\n<p>I tried search info about this but nothing helped me</p>\n<p>What means this error? How I can fix it?</p>\n"},{"tags":["java","selenium-webdriver","selenide"],"comments":[{"owner":{"account_id":153568,"reputation":2613,"user_id":368907,"accept_rate":88,"display_name":"nicholas"},"score":0,"creation_date":1678501329,"post_id":75694251,"comment_id":133550306,"body_markdown":"What are the email sending facility you guys recommend?","body":"What are the email sending facility you guys recommend?"}],"answers":[{"comments":[{"owner":{"account_id":153568,"reputation":2613,"user_id":368907,"accept_rate":88,"display_name":"nicholas"},"score":0,"creation_date":1678484108,"post_id":75694327,"comment_id":133548163,"body_markdown":"How to generate the oauth token? Any documentation?","body":"How to generate the oauth token? Any documentation?"},{"owner":{"account_id":17258715,"reputation":96,"user_id":21301929,"display_name":"vinoth raj"},"score":0,"creation_date":1678506356,"post_id":75694327,"comment_id":133550655,"body_markdown":"Yes, Think so this source will give the solution [Documentation](https://developers.google.com/gmail/api/quickstart/java)","body":"Yes, Think so this source will give the solution <a href=\"https://developers.google.com/gmail/api/quickstart/java\" rel=\"nofollow noreferrer\">Documentation</a>"}],"tags":[],"owner":{"account_id":17258715,"reputation":96,"user_id":21301929,"display_name":"vinoth raj"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678440542,"creation_date":1678440542,"answer_id":75694327,"question_id":75694251,"body_markdown":"Think so there are some dependency are missing, this are `LocalServerReceiver` and `HttpCredentailsAdapter` and for the tokens directory once the auth is done on this place all the google API client library get stored. In the code directory is set as `tokens` this is mention to the root of the project directory. \r\n\r\n     &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\r\n      &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\r\n      &lt;version&gt;1.23.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.auth&lt;/groupId&gt;\r\n      &lt;artifactId&gt;google-auth-library-oauth2-http&lt;/artifactId&gt;\r\n      &lt;version&gt;0.23.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Gmail API Send email with Attachment unavailable import class","body":"<p>Think so there are some dependency are missing, this are <code>LocalServerReceiver</code> and <code>HttpCredentailsAdapter</code> and for the tokens directory once the auth is done on this place all the google API client library get stored. In the code directory is set as <code>tokens</code> this is mention to the root of the project directory.</p>\n<pre><code> &lt;dependency&gt;\n  &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\n  &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\n  &lt;version&gt;1.23.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;com.google.auth&lt;/groupId&gt;\n  &lt;artifactId&gt;google-auth-library-oauth2-http&lt;/artifactId&gt;\n  &lt;version&gt;0.23.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":153568,"reputation":2613,"user_id":368907,"accept_rate":88,"display_name":"nicholas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678440542,"creation_date":1678440041,"question_id":75694251,"body_markdown":"I coded automation testing using selenide framework and need send the test report via email at the end of testing execution. \r\n\r\nI have tried **sendgrid** service but it cannot send attachment. Sometimes can send email with attachment and sometimes cannot send email with attachment. \r\n\r\nThen, I decided to give Gmail API a try but **some classes are not resolvable**. Below is the code: \r\n\r\n    public class EmailManager {\r\n\r\n\tprivate static final String APPLICATION_NAME = &quot;Buletin TV3&quot;;\r\n\tprivate static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\r\n\tprivate static final String TOKENS_DIRECTORY_PATH = &quot;tokens&quot;;\r\n\tprivate static final List&lt;String&gt; SCOPES = Collections.singletonList(GmailScopes.GMAIL_SEND);\r\n\tprivate static final String CREDENTIALS_FILE_PATH = &quot;./credentials.json&quot;;\r\n\r\n\tprivate static final String FROMEMAILAddress = &quot;qa-automation@revmedia.my&quot;;\r\n\tprivate static final String TOEMAILAddress = &quot;qa-automation@revmedia.my&quot;;\r\n\r\n    public EmailManager() {\r\n    }\r\n\r\n\tprivate static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT)\r\n\t\t\tthrows IOException {\r\n\t\t// Load client secrets.\r\n\t\tInputStream in = EmailManager.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n\t\tif (in == null) {\r\n\t\t\tthrow new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\r\n\t\t}\r\n\t\tGoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\r\n\r\n\t\t// Build flow and trigger user authorization request.\r\n\t\tGoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n\t\t\t\tHTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\r\n\t\t\t\t.setDataStoreFactory(new FileDataStoreFactory(new java.io.File(TOKENS_DIRECTORY_PATH)))\r\n\t\t\t\t.setAccessType(&quot;offline&quot;)\r\n\t\t\t\t.build();\r\n\t\tLocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\r\n\t\tCredential credential = new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\r\n\t\t//returns an authorized Credential object.\r\n\t\treturn credential;\r\n\t}\r\n\r\n\tpublic synchronized void sendEmail() throws IOException, GeneralSecurityException, MessagingException {\r\n\t\tfinal NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\r\n\t\tGmail service = new Gmail.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\r\n\t\t\t\t.setApplicationName(APPLICATION_NAME)\r\n\t\t\t\t.build();\r\n\r\n\r\n\t\tGoogleCredentials credentials = GoogleCredentials.getApplicationDefault()\r\n\t\t\t\t.createScoped(GmailScopes.GMAIL_COMPOSE);\r\n\t\tHttpRequestInitializer requestInitializer = new HttpCredentialsAdapter(credentials);\r\n\r\n\t\t// Create the gmail API client\r\n\t\tGmail gmailService = new Gmail.Builder(new NetHttpTransport(),\r\n\t\t\t\tGsonFactory.getDefaultInstance(),\r\n\t\t\t\trequestInitializer)\r\n\t\t\t\t.setApplicationName(APPLICATION_NAME)\r\n\t\t\t\t.build();\r\n\r\n\t\t// Create the email content\r\n\t\tString messageSubject = &quot;Buletv3 Test Report&quot;;\r\n\t\tString bodyText = &quot;Dear Stakeholder, Please find the test report from attachment&quot;;\r\n\r\n\t\t// Encode as MIME message\r\n\t\tProperties props = new Properties();\r\n\t\tSession session = Session.getDefaultInstance(props, null);\r\n\t\tMimeMessage email = new MimeMessage(session);\r\n\t\temail.setFrom(new InternetAddress(FROMEMAILAddress));\r\n\t\temail.addRecipient(javax.mail.Message.RecipientType.TO,\r\n\t\t\t\tnew InternetAddress(TOEMAILAddress));\r\n\t\temail.setSubject(messageSubject);\r\n\r\n\t\tMimeBodyPart mimeBodyPart = new MimeBodyPart();\r\n\t\tmimeBodyPart.setContent(bodyText, &quot;text/plain&quot;);\r\n\t\tMultipart multipart = new MimeMultipart();\r\n\t\tmultipart.addBodyPart(mimeBodyPart);\r\n\t\tmimeBodyPart = new MimeBodyPart();\r\n\t\tDataSource source = new FileDataSource(file);\r\n\t\tmimeBodyPart.setDataHandler(new DataHandler(source));\r\n\t\tmimeBodyPart.setFileName(file.getName());\r\n\t\tmultipart.addBodyPart(mimeBodyPart);\r\n\t\temail.setContent(multipart);\r\n\r\n\t\t// Encode and wrap the MIME message into a gmail message\r\n\t\tByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n\t\temail.writeTo(buffer);\r\n\t\tbyte[] rawMessageBytes = buffer.toByteArray();\r\n\t\tString encodedEmail = Base64.encodeBase64URLSafeString(rawMessageBytes);\r\n\t\tMessage message = new Message();\r\n\t\tmessage.setRaw(encodedEmail);\r\n\r\n\t\ttry {\r\n\t\t\t// Create the draft message\r\n\t\t\tDraft draft = new Draft();\r\n\t\t\tdraft.setMessage(message);\r\n\t\t\tdraft = service.users().drafts().create(&quot;me&quot;, draft).execute();\r\n\t\t\tSystem.out.println(&quot;Draft id: &quot; + draft.getId());\r\n\t\t\tSystem.out.println(draft.toPrettyString());\r\n\r\n\t\t} catch (Exception ex) {\r\n\r\n\t\t}\r\n\r\n\t}\r\n    \r\nThese lines are not resolvable in Intellij IDE. \r\n\r\n    LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\r\n    \t\tCredential credential = new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\r\n    \r\n    GoogleCredentials credentials = GoogleCredentials.getApplicationDefault()\r\n    \t\t\t\t.createScoped(GmailScopes.GMAIL_COMPOSE);\r\n    \t\tHttpRequestInitializer requestInitializer = new HttpCredentialsAdapter(credentials);\r\n\r\nThe import is not resolved as i copy from internet. \r\n\r\n    import com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\n    import com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\n    import com.google.auth.oauth2.GoogleCredentials;\r\n    import com.google.auth.http.HttpCredentialsAdapter;\r\n\r\nPom.xml\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-oauth-client&lt;/artifactId&gt;\r\n            &lt;version&gt;1.34.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-services-gmail&lt;/artifactId&gt;\r\n            &lt;version&gt;v1-rev110-1.25.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nBy the way, I&#39;m using JDK 18.    \r\n\r\nQuestions: \r\n1. Why the import are not resolved? \r\n2. What is tokens directory? How to generate it?\r\n3. What are the best method/facility send email with attachment? \r\n\r\nPlease help me. I really need help. Thanks in advance. \r\n","title":"Gmail API Send email with Attachment unavailable import class","body":"<p>I coded automation testing using selenide framework and need send the test report via email at the end of testing execution.</p>\n<p>I have tried <strong>sendgrid</strong> service but it cannot send attachment. Sometimes can send email with attachment and sometimes cannot send email with attachment.</p>\n<p>Then, I decided to give Gmail API a try but <strong>some classes are not resolvable</strong>. Below is the code:</p>\n<pre><code>public class EmailManager {\n\nprivate static final String APPLICATION_NAME = &quot;Buletin TV3&quot;;\nprivate static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\nprivate static final String TOKENS_DIRECTORY_PATH = &quot;tokens&quot;;\nprivate static final List&lt;String&gt; SCOPES = Collections.singletonList(GmailScopes.GMAIL_SEND);\nprivate static final String CREDENTIALS_FILE_PATH = &quot;./credentials.json&quot;;\n\nprivate static final String FROMEMAILAddress = &quot;qa-automation@revmedia.my&quot;;\nprivate static final String TOEMAILAddress = &quot;qa-automation@revmedia.my&quot;;\n\npublic EmailManager() {\n}\n\nprivate static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT)\n        throws IOException {\n    // Load client secrets.\n    InputStream in = EmailManager.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\n    if (in == null) {\n        throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\n    }\n    GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\n\n    // Build flow and trigger user authorization request.\n    GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n            HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\n            .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(TOKENS_DIRECTORY_PATH)))\n            .setAccessType(&quot;offline&quot;)\n            .build();\n    LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\n    Credential credential = new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\n    //returns an authorized Credential object.\n    return credential;\n}\n\npublic synchronized void sendEmail() throws IOException, GeneralSecurityException, MessagingException {\n    final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\n    Gmail service = new Gmail.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\n            .setApplicationName(APPLICATION_NAME)\n            .build();\n\n\n    GoogleCredentials credentials = GoogleCredentials.getApplicationDefault()\n            .createScoped(GmailScopes.GMAIL_COMPOSE);\n    HttpRequestInitializer requestInitializer = new HttpCredentialsAdapter(credentials);\n\n    // Create the gmail API client\n    Gmail gmailService = new Gmail.Builder(new NetHttpTransport(),\n            GsonFactory.getDefaultInstance(),\n            requestInitializer)\n            .setApplicationName(APPLICATION_NAME)\n            .build();\n\n    // Create the email content\n    String messageSubject = &quot;Buletv3 Test Report&quot;;\n    String bodyText = &quot;Dear Stakeholder, Please find the test report from attachment&quot;;\n\n    // Encode as MIME message\n    Properties props = new Properties();\n    Session session = Session.getDefaultInstance(props, null);\n    MimeMessage email = new MimeMessage(session);\n    email.setFrom(new InternetAddress(FROMEMAILAddress));\n    email.addRecipient(javax.mail.Message.RecipientType.TO,\n            new InternetAddress(TOEMAILAddress));\n    email.setSubject(messageSubject);\n\n    MimeBodyPart mimeBodyPart = new MimeBodyPart();\n    mimeBodyPart.setContent(bodyText, &quot;text/plain&quot;);\n    Multipart multipart = new MimeMultipart();\n    multipart.addBodyPart(mimeBodyPart);\n    mimeBodyPart = new MimeBodyPart();\n    DataSource source = new FileDataSource(file);\n    mimeBodyPart.setDataHandler(new DataHandler(source));\n    mimeBodyPart.setFileName(file.getName());\n    multipart.addBodyPart(mimeBodyPart);\n    email.setContent(multipart);\n\n    // Encode and wrap the MIME message into a gmail message\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n    email.writeTo(buffer);\n    byte[] rawMessageBytes = buffer.toByteArray();\n    String encodedEmail = Base64.encodeBase64URLSafeString(rawMessageBytes);\n    Message message = new Message();\n    message.setRaw(encodedEmail);\n\n    try {\n        // Create the draft message\n        Draft draft = new Draft();\n        draft.setMessage(message);\n        draft = service.users().drafts().create(&quot;me&quot;, draft).execute();\n        System.out.println(&quot;Draft id: &quot; + draft.getId());\n        System.out.println(draft.toPrettyString());\n\n    } catch (Exception ex) {\n\n    }\n\n}\n</code></pre>\n<p>These lines are not resolvable in Intellij IDE.</p>\n<pre><code>LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\n        Credential credential = new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\n\nGoogleCredentials credentials = GoogleCredentials.getApplicationDefault()\n                .createScoped(GmailScopes.GMAIL_COMPOSE);\n        HttpRequestInitializer requestInitializer = new HttpCredentialsAdapter(credentials);\n</code></pre>\n<p>The import is not resolved as i copy from internet.</p>\n<pre><code>import com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.auth.oauth2.GoogleCredentials;\nimport com.google.auth.http.HttpCredentialsAdapter;\n</code></pre>\n<p>Pom.xml</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n        &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\n        &lt;version&gt;2.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\n        &lt;artifactId&gt;google-oauth-client&lt;/artifactId&gt;\n        &lt;version&gt;1.34.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n        &lt;artifactId&gt;google-api-services-gmail&lt;/artifactId&gt;\n        &lt;version&gt;v1-rev110-1.25.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>By the way, I'm using JDK 18.</p>\n<p>Questions:</p>\n<ol>\n<li>Why the import are not resolved?</li>\n<li>What is tokens directory? How to generate it?</li>\n<li>What are the best method/facility send email with attachment?</li>\n</ol>\n<p>Please help me. I really need help. Thanks in advance.</p>\n"},{"tags":["java","intellij-idea","derby"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1678442365,"post_id":75694306,"comment_id":133537160,"body_markdown":"Make sure that Derby JDBC classes were added to the JAR file you&#39;re trying to run https://stackoverflow.com/a/42200519/12844632","body":"Make sure that Derby JDBC classes were added to the JAR file you&#39;re trying to run <a href=\"https://stackoverflow.com/a/42200519/12844632\">stackoverflow.com/a/42200519/12844632</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1678444446,"post_id":75694306,"comment_id":133537742,"body_markdown":"So, yes, if you don&#39;t want to deploy a separate driver jar, the driver must be inside a &#39;fat jar&#39; along with everything else","body":"So, yes, if you don&#39;t want to deploy a separate driver jar, the driver must be inside a &#39;fat jar&#39; along with everything else"},{"owner":{"account_id":65826,"reputation":16198,"user_id":193453,"display_name":"Bryan Pendleton"},"score":0,"creation_date":1679183457,"post_id":75694306,"comment_id":133676298,"body_markdown":"And include the full details of the exception that you get.","body":"And include the full details of the exception that you get."}],"owner":{"account_id":23296370,"reputation":17,"user_id":17377723,"display_name":"Aviv Moyal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678440401,"creation_date":1678440401,"question_id":75694306,"body_markdown":"I start learning java and this is my first project in java, I tried every StackOverflow answer I could find but it didn&#39;t work in my case.\r\n\r\nin my project I was required to work whit derbyDB, I run the project in IntelliJ investment and the DB connection work. The problem start when I create a jar file for my project.\r\nWhen I try to run the jar file I get this exception: &#39;java.sql.SQLException: No suitable driver found for jdbc:derby:C\\CostManagerDB&#39;\r\n\r\nI try with and without: \r\n\r\n - Class.forName(&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;);\r\n - Add java.sql.Driver file to src\\META-INF\\services, file content: org.apache.derby.jdbc.EmbeddedDriver\r\n - Add modules-&gt;dependencies: derby.jar. derbynet.jar, derbyclient.jar, derbytool.jar\r\n\r\nMy project ended when it try to create a connection, how I can fix that? \r\n\r\nMy code\r\n\r\n    \r\n     import java.sql.*;\r\n\r\n\r\n     public class CostManagerDB {\r\n\r\n    // Check if the database exists if not create local database\r\n    public CostManagerDB() throws Exception{\r\n        // Check if the database exists\r\n        try {\r\n            Connection conn;\r\n            // Register the DerbyDB JDBC driver\r\n            Class.forName(&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;);\r\n\r\n            // Establish a connection to the database\r\n            conn = DriverManager.getConnection(&quot;jdbc:derby:C:\\\\CostManagerDB&quot;);\r\n            conn.close();\r\n        }// Create the database if not exists\r\n        catch (SQLException e) {\r\n            // Check if the exception is database not found\r\n            if(e.getSQLState().startsWith(&quot;XJ&quot;)){\r\n                CreateDB();\r\n            }\r\n            else { throw e; }\r\n        }\r\n    }\r\n\r\n    /* Create a local database for the program whit 2 tables (Expenses, Categories) and add initial data  */\r\n    public void CreateDB() throws SQLException{\r\n        // Create the database\r\n        Connection conn = DriverManager.getConnection(&quot;jdbc:derby:C:\\\\CostManagerDB;create=true&quot;);\r\n\r\n        // Execute a SQL statement to create a new tables\r\n        Statement stmt = conn.createStatement();\r\n\r\n        // Create a categories table\r\n        String createCategories = &quot;CREATE TABLE Categories (Id INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY &quot; +\r\n                &quot;(START WITH 1, INCREMENT BY 1), CategoryName VARCHAR(50))&quot;;\r\n        stmt.executeUpdate(createCategories);\r\n\r\n        // Insert to categories table\r\n        PreparedStatement pstmt = conn.prepareStatement(&quot;INSERT INTO Categories (CategoryName) VALUES (?)&quot;);\r\n        pstmt.setString(1, &quot;Grocery&quot;);\r\n        pstmt.addBatch();\r\n        pstmt.setString(1, &quot;Books&quot;);\r\n        pstmt.addBatch();\r\n        pstmt.setString(1, &quot;Clothing&quot;);\r\n        pstmt.addBatch();\r\n        pstmt.setString(1, &quot;Electronics&quot;);\r\n        pstmt.addBatch();\r\n        pstmt.setString(1, &quot;Bills&quot;);\r\n        pstmt.addBatch();\r\n        pstmt.setString(1, &quot;Entertainment&quot;);\r\n        pstmt.addBatch();\r\n        pstmt.executeBatch();\r\n\r\n        // Create a expenses table\r\n        String createExpenses = &quot;CREATE TABLE Expenses (Id INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY &quot; +\r\n                &quot;(START WITH 1, INCREMENT BY 1),Amount FLOAT, Category VARCHAR(50), Currency VARCHAR(20), &quot; +\r\n                &quot;Description VARCHAR(100),Date DATE)&quot;;\r\n        stmt.executeUpdate(createExpenses);\r\n\r\n        // Close the statements and connection\r\n        pstmt.close();\r\n        stmt.close();\r\n        conn.close();\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"SQLException: No suitable driver found when in run my project as a exe JAR file","body":"<p>I start learning java and this is my first project in java, I tried every StackOverflow answer I could find but it didn't work in my case.</p>\n<p>in my project I was required to work whit derbyDB, I run the project in IntelliJ investment and the DB connection work. The problem start when I create a jar file for my project.\nWhen I try to run the jar file I get this exception: 'java.sql.SQLException: No suitable driver found for jdbc:derby:C\\CostManagerDB'</p>\n<p>I try with and without:</p>\n<ul>\n<li>Class.forName(&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;);</li>\n<li>Add java.sql.Driver file to src\\META-INF\\services, file content: org.apache.derby.jdbc.EmbeddedDriver</li>\n<li>Add modules-&gt;dependencies: derby.jar. derbynet.jar, derbyclient.jar, derbytool.jar</li>\n</ul>\n<p>My project ended when it try to create a connection, how I can fix that?</p>\n<p>My code</p>\n<pre><code> import java.sql.*;\n\n\n public class CostManagerDB {\n\n// Check if the database exists if not create local database\npublic CostManagerDB() throws Exception{\n    // Check if the database exists\n    try {\n        Connection conn;\n        // Register the DerbyDB JDBC driver\n        Class.forName(&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;);\n\n        // Establish a connection to the database\n        conn = DriverManager.getConnection(&quot;jdbc:derby:C:\\\\CostManagerDB&quot;);\n        conn.close();\n    }// Create the database if not exists\n    catch (SQLException e) {\n        // Check if the exception is database not found\n        if(e.getSQLState().startsWith(&quot;XJ&quot;)){\n            CreateDB();\n        }\n        else { throw e; }\n    }\n}\n\n/* Create a local database for the program whit 2 tables (Expenses, Categories) and add initial data  */\npublic void CreateDB() throws SQLException{\n    // Create the database\n    Connection conn = DriverManager.getConnection(&quot;jdbc:derby:C:\\\\CostManagerDB;create=true&quot;);\n\n    // Execute a SQL statement to create a new tables\n    Statement stmt = conn.createStatement();\n\n    // Create a categories table\n    String createCategories = &quot;CREATE TABLE Categories (Id INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY &quot; +\n            &quot;(START WITH 1, INCREMENT BY 1), CategoryName VARCHAR(50))&quot;;\n    stmt.executeUpdate(createCategories);\n\n    // Insert to categories table\n    PreparedStatement pstmt = conn.prepareStatement(&quot;INSERT INTO Categories (CategoryName) VALUES (?)&quot;);\n    pstmt.setString(1, &quot;Grocery&quot;);\n    pstmt.addBatch();\n    pstmt.setString(1, &quot;Books&quot;);\n    pstmt.addBatch();\n    pstmt.setString(1, &quot;Clothing&quot;);\n    pstmt.addBatch();\n    pstmt.setString(1, &quot;Electronics&quot;);\n    pstmt.addBatch();\n    pstmt.setString(1, &quot;Bills&quot;);\n    pstmt.addBatch();\n    pstmt.setString(1, &quot;Entertainment&quot;);\n    pstmt.addBatch();\n    pstmt.executeBatch();\n\n    // Create a expenses table\n    String createExpenses = &quot;CREATE TABLE Expenses (Id INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY &quot; +\n            &quot;(START WITH 1, INCREMENT BY 1),Amount FLOAT, Category VARCHAR(50), Currency VARCHAR(20), &quot; +\n            &quot;Description VARCHAR(100),Date DATE)&quot;;\n    stmt.executeUpdate(createExpenses);\n\n    // Close the statements and connection\n    pstmt.close();\n    stmt.close();\n    conn.close();\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","interface","go","static-methods","abstract"],"comments":[{"owner":{"account_id":22484,"reputation":7800,"user_id":55504,"display_name":"Dave C"},"score":1,"creation_date":1584194322,"post_id":24232513,"comment_id":107364498,"body_markdown":"Forget trying to implement a thing in language X the way you would have done it in language Y. That way will often lead to hard to read/write/debug spaghetti code. Go doesn&#39;t have classes, stop thinking in terms of classes when you design in Go.","body":"Forget trying to implement a thing in language X the way you would have done it in language Y. That way will often lead to hard to read/write/debug spaghetti code. Go doesn&#39;t have classes, stop thinking in terms of classes when you design in Go."},{"owner":{"account_id":402018,"reputation":16610,"user_id":768935,"accept_rate":93,"display_name":"allprog"},"score":4,"creation_date":1610125599,"post_id":24232513,"comment_id":116042445,"body_markdown":"@DaveC you are thinking backwards. If a programmer is familiar with a patern, it is natural instinct to try to go and find corresponding pattern(s) in a new language. Show what the corresponding pattern is and how the mental model is shifted/mapped to the new language. Don&#39;t just say &#39;stop thinking.&#39;","body":"@DaveC you are thinking backwards. If a programmer is familiar with a patern, it is natural instinct to try to go and find corresponding pattern(s) in a new language. Show what the corresponding pattern is and how the mental model is shifted/mapped to the new language. Don&#39;t just say &#39;stop thinking.&#39;"},{"owner":{"account_id":22484,"reputation":7800,"user_id":55504,"display_name":"Dave C"},"score":0,"creation_date":1610277640,"post_id":24232513,"comment_id":116076420,"body_markdown":"@allprog &quot;natural&quot; does not mean good or correct.","body":"@allprog &quot;natural&quot; does not mean good or correct."},{"owner":{"account_id":402018,"reputation":16610,"user_id":768935,"accept_rate":93,"display_name":"allprog"},"score":1,"creation_date":1610559935,"post_id":24232513,"comment_id":116175153,"body_markdown":"@DaveC people learn by relating to things they know. I didn&#39;t say there is always a 1-1 match for constructs but design patterns are good starting point as these are usually language independent constructs. The OP did just that and the reponders realized this.","body":"@DaveC people learn by relating to things they know. I didn&#39;t say there is always a 1-1 match for constructs but design patterns are good starting point as these are usually language independent constructs. The OP did just that and the reponders realized this."}],"answers":[{"comments":[{"owner":{"account_id":1800162,"reputation":970,"user_id":1638708,"accept_rate":25,"display_name":"User42"},"score":0,"creation_date":1402859999,"post_id":24232759,"comment_id":37425099,"body_markdown":"Thanks. Let me see if I understand you correctly. You mean I should make an interface for method1, one interface for method2 and a composite interface. But where do I put my implementation for method1 that uses method2 (maybe I didn&#39;t state this clear enough)? I&#39;d still have duplicate code this way, right?","body":"Thanks. Let me see if I understand you correctly. You mean I should make an interface for method1, one interface for method2 and a composite interface. But where do I put my implementation for method1 that uses method2 (maybe I didn&#39;t state this clear enough)? I&#39;d still have duplicate code this way, right?"},{"owner":{"account_id":48952,"reputation":95959,"user_id":145587,"accept_rate":89,"display_name":"OneOfOne"},"score":0,"creation_date":1402869348,"post_id":24232759,"comment_id":37427648,"body_markdown":"I&#39;m not very sure I understand you but if 1 struct can satisfy multiple interfaces, or you can define functions that do things on `interfaceA`, `interfaceB` and pass your structs to them instead of implementing the code on the struct itself.","body":"I&#39;m not very sure I understand you but if 1 struct can satisfy multiple interfaces, or you can define functions that do things on <code>interfaceA</code>, <code>interfaceB</code> and pass your structs to them instead of implementing the code on the struct itself."}],"tags":[],"owner":{"account_id":48952,"reputation":95959,"user_id":145587,"accept_rate":89,"display_name":"OneOfOne"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1402856955,"creation_date":1402856955,"answer_id":24232759,"question_id":24232513,"body_markdown":"You can have composite interfaces, for example from the [io](http://golang.org/pkg/io/) package :\r\n\r\nhttp://golang.org/src/pkg/io/io.go?s=2987:3047#L57\r\n\r\n\r\n    type Reader interface {\r\n    \tRead(p []byte) (n int, err error)\r\n    }\r\n    type Writer interface {\r\n    \tWrite(p []byte) (n int, err error)\r\n    }\r\n    \r\n    type ReadWriter interface {\r\n    \tReader\r\n    \tWriter\r\n    }\r\n\r\n\r\nAs a side note, don&#39;t try to implement java code using go, try to learn the [Go Way](http://tip.golang.org/doc/effective_go.html).","title":"Equivalence of abstract classes/methods (Java) in Google Go","body":"<p>You can have composite interfaces, for example from the <a href=\"http://golang.org/pkg/io/\">io</a> package :</p>\n\n<p><a href=\"http://golang.org/src/pkg/io/io.go?s=2987:3047#L57\">http://golang.org/src/pkg/io/io.go?s=2987:3047#L57</a></p>\n\n<pre><code>type Reader interface {\n    Read(p []byte) (n int, err error)\n}\ntype Writer interface {\n    Write(p []byte) (n int, err error)\n}\n\ntype ReadWriter interface {\n    Reader\n    Writer\n}\n</code></pre>\n\n<p>As a side note, don't try to implement java code using go, try to learn the <a href=\"http://tip.golang.org/doc/effective_go.html\">Go Way</a>.</p>\n"},{"comments":[{"owner":{"account_id":3419240,"reputation":774,"user_id":2867339,"accept_rate":85,"display_name":"Altenrion"},"score":0,"creation_date":1483693279,"post_id":24234998,"comment_id":70209495,"body_markdown":"Like this answer, and want to add, that if you would need to have structure interface, like an abstract class, than you can use the same principle as @ANisus wrote, but add getters methods. So that you can call for structure params like ```Model.getName``` where ```Model``` wouldbean exact structure that resolves some interface you have created.","body":"Like this answer, and want to add, that if you would need to have structure interface, like an abstract class, than you can use the same principle as @ANisus wrote, but add getters methods. So that you can call for structure params like <code>Model.getName</code> where <code>Model</code> wouldbean exact structure that resolves some interface you have created."}],"tags":[],"owner":{"account_id":355398,"reputation":75252,"user_id":694331,"accept_rate":90,"display_name":"ANisus"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1402876224,"creation_date":1402874516,"answer_id":24234998,"question_id":24232513,"body_markdown":"Since Go does not have `static` methods in the OOP sense, you often see those types of methods being implemented as package level functions:\r\n\r\n    package mypackage\r\n    \r\n    func() Method1() { ... } // Below I will call it Function instead\r\n\r\nSuch package level functions would then take an interface as an argument. Your code would in that case look something like this:\r\n\r\n    package main\r\n    \r\n    import &quot;fmt&quot;\r\n    \r\n    type Methoder interface {\r\n    \tMethod()\r\n    }\r\n    \r\n    func Function(m Methoder) {\r\n    \tm.Method()\r\n    }\r\n    \r\n    type StructB struct{}\r\n    \r\n    func (s *StructB) Method() { fmt.Println(&quot;StructB&quot;) }\r\n    \r\n    type StructC struct{} // You can do some &quot;inheritance&quot; by embedding a base struct\r\n    \r\n    func (s *StructC) Method() { fmt.Println(&quot;StructC&quot;) }\r\n    \r\n    func main() {    \r\n    \tb := &amp;StructB{}\r\n    \tFunction(b)    \r\n    }\r\n\r\n**Output:**\r\n\r\n    StructB\r\n\r\n","title":"Equivalence of abstract classes/methods (Java) in Google Go","body":"<p>Since Go does not have <code>static</code> methods in the OOP sense, you often see those types of methods being implemented as package level functions:</p>\n\n<pre><code>package mypackage\n\nfunc() Method1() { ... } // Below I will call it Function instead\n</code></pre>\n\n<p>Such package level functions would then take an interface as an argument. Your code would in that case look something like this:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Methoder interface {\n    Method()\n}\n\nfunc Function(m Methoder) {\n    m.Method()\n}\n\ntype StructB struct{}\n\nfunc (s *StructB) Method() { fmt.Println(\"StructB\") }\n\ntype StructC struct{} // You can do some \"inheritance\" by embedding a base struct\n\nfunc (s *StructC) Method() { fmt.Println(\"StructC\") }\n\nfunc main() {    \n    b := &amp;StructB{}\n    Function(b)    \n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>StructB\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22484,"reputation":7800,"user_id":55504,"display_name":"Dave C"},"score":0,"creation_date":1584193843,"post_id":39279776,"comment_id":107364378,"body_markdown":"IMO, this is very convoluted and a confusing abuse of embedding. I&#39;d never let code this pass a code review. Also the comments are very misleading, there is no &quot;inherit&quot;ing or &quot;abstract&quot;, the comments hide and confuse what Go embedding is doing.","body":"IMO, this is very convoluted and a confusing abuse of embedding. I&#39;d never let code this pass a code review. Also the comments are very misleading, there is no &quot;inherit&quot;ing or &quot;abstract&quot;, the comments hide and confuse what Go embedding is doing."},{"owner":{"account_id":8651143,"reputation":1983,"user_id":6476791,"display_name":"Adrian"},"score":0,"creation_date":1584215106,"post_id":39279776,"comment_id":107370379,"body_markdown":"@Dave C - not disagreeing that this is a bit convoluted, having said that propose something better, I would love to see a simple way of abstract class implementation.  All in all, If you do not need an abstract class like functionality simply DO NOT USE presented pattern.","body":"@Dave C - not disagreeing that this is a bit convoluted, having said that propose something better, I would love to see a simple way of abstract class implementation.  All in all, If you do not need an abstract class like functionality simply DO NOT USE presented pattern."},{"owner":{"account_id":1649350,"reputation":359,"user_id":1520230,"display_name":"kdmitry"},"score":0,"creation_date":1665389058,"post_id":39279776,"comment_id":130680098,"body_markdown":"This answer is basically the same as jucardi&#39;s above, but jucardi&#39;s got +2 and this one got -2, interesting.","body":"This answer is basically the same as jucardi&#39;s above, but jucardi&#39;s got +2 and this one got -2, interesting."}],"tags":[],"owner":{"account_id":8651143,"reputation":1983,"user_id":6476791,"display_name":"Adrian"},"comment_count":3,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1584215733,"creation_date":1472759286,"answer_id":39279776,"question_id":24232513,"body_markdown":"The example you are asking would not compile in Java unless you remove static keyword from method1, so the correct abstract class in Java would like like this.\r\n\r\n    public abstract class A {\r\n        void method1(){\r\n        method2();}\r\n        abstract void  method2();\r\n    }\r\n\r\n\r\nTo provide equivalent in go-lang you would have to use an interface in the following way: [Go Playground][1]\r\n\r\n\r\n    package main\r\n\r\n    import (\r\n\t    &quot;fmt&quot;\r\n    )\r\n\r\n    type AI interface {\r\n  \t    method2()\r\n    }\r\n    \r\n    type A struct {\r\n    \tAI\r\n    }\r\n\r\n    func (a * A) method1() {\r\n       a.method2()\r\n    }\r\n    \r\n    type B struct {\r\n\t    *A\r\n    }\r\n    func (b *B) method2() {\r\n       fmt.Print(&quot;Hello from B method1\\n&quot;)\r\n    }\r\n\r\n    func NewB() *B{\r\n       b := &amp;B{}\r\n       a := &amp;A{b}\r\n       b.A = a\r\n       return b\t\r\n    }\r\n\r\n    type C struct {\r\n\t    *A\r\n    }\r\n\r\n    func (c *C) method2() {\r\n        fmt.Print(&quot;Hello from C method1\\n&quot;)\r\n    }\r\n\r\n    func NewC() *C{\r\n        c := &amp;C{}\r\n        a := &amp;A{c}\r\n        c.A = a\r\n        return c\t\r\n    }\r\n\r\n    func main() {\r\n    \r\n\t     b := NewB()\r\n      \t b.method1()\r\n\r\n   \t    c:= NewC()\r\n\t    c.method1()\r\n    }\r\n\r\nSince this still not may be easy how to translate/implement java abstract classes/multi-inheritance to go-lang here is the post with comprehensive details. [Abstract Class in golang][2]\r\n\r\n[1]: https://play.golang.org/p/2g9jJ8qnbW\r\n[2]: http://blog.bingecoder.net/index.php/2016/06/20/abstract-classes-in-golang/","title":"Equivalence of abstract classes/methods (Java) in Google Go","body":"<p>The example you are asking would not compile in Java unless you remove static keyword from method1, so the correct abstract class in Java would like like this.</p>\n\n<pre><code>public abstract class A {\n    void method1(){\n    method2();}\n    abstract void  method2();\n}\n</code></pre>\n\n<p>To provide equivalent in go-lang you would have to use an interface in the following way: <a href=\"https://play.golang.org/p/2g9jJ8qnbW\" rel=\"nofollow noreferrer\">Go Playground</a></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\ntype AI interface {\n    method2()\n}\n\ntype A struct {\n    AI\n}\n\nfunc (a * A) method1() {\n   a.method2()\n}\n\ntype B struct {\n    *A\n}\nfunc (b *B) method2() {\n   fmt.Print(\"Hello from B method1\\n\")\n}\n\nfunc NewB() *B{\n   b := &amp;B{}\n   a := &amp;A{b}\n   b.A = a\n   return b \n}\n\ntype C struct {\n    *A\n}\n\nfunc (c *C) method2() {\n    fmt.Print(\"Hello from C method1\\n\")\n}\n\nfunc NewC() *C{\n    c := &amp;C{}\n    a := &amp;A{c}\n    c.A = a\n    return c    \n}\n\nfunc main() {\n\n     b := NewB()\n     b.method1()\n\n    c:= NewC()\n    c.method1()\n}\n</code></pre>\n\n<p>Since this still not may be easy how to translate/implement java abstract classes/multi-inheritance to go-lang here is the post with comprehensive details. <a href=\"http://blog.bingecoder.net/index.php/2016/06/20/abstract-classes-in-golang/\" rel=\"nofollow noreferrer\">Abstract Class in golang</a></p>\n"},{"tags":[],"owner":{"account_id":3049748,"reputation":1873,"user_id":2584597,"display_name":"jucardi"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1527888948,"creation_date":1524966813,"answer_id":50082686,"question_id":24232513,"body_markdown":"This is the way I achieved implementing an abstract class the easy way avoiding to run into cyclic references and maintaining good factory patterns.\r\n\r\nLet us assume we have the following package structure for our component\r\n\r\n\r\n    component\r\n      base\r\n        types.go\r\n        abstract.go\r\n      impl1\r\n        impl.go\r\n      impl2\r\n        impl.go\r\n      types.go\r\n      factory.go\r\n\r\nDefine the definition of the component, in this example it will be defined here:\r\n\r\n**component/types.go**\r\n\r\n    package component\r\n\r\n    type IComponent interface{\r\n        B() int\r\n        A() int\r\n        Sum() int\r\n        Average() int\r\n    }\r\n\r\nNow let&#39;s assume we want to create an abstract class that implements **Sum** and **Average** only, but in this abstract implementation we would like to have access to use the values returned by the implemented **A** and **B**\r\n\r\nTo achieve this, we should define another interface for the abstract members of the abstract implementation\r\n\r\n**component/base/types.go**\r\n\r\n    package base\r\n\r\n    type IAbstractComponentMembers {\r\n        A() int\r\n        B() int\r\n    }\r\n\r\nAnd then we can proceed to implement the abstract &quot;class&quot;\r\n\r\n**component/base/abstract.go**\r\n\r\n    package base\r\n\r\n    type AbstractComponent struct {\r\n        IAbstractComponentsMember\r\n    }\r\n\r\n    func (a *AbstractComponent) Sum() int {\r\n        return a.A() + a.B()\r\n    }\r\n\r\n    func (a *AbstractComponent) Average() int {\r\n        return a.Sum() / 2\r\n    }\r\n\r\nAnd now we proceed to the implementations\r\n\r\n**component/impl1/impl.go**  // Asume something similar for **impl2**\r\n\r\n    package impl1\r\n\r\n    type ComponentImpl1 struct {\r\n        base.AbstractComponent\r\n    }\r\n\r\n    func (c *ComponentImpl1) A() int {\r\n        return 2\r\n    }\r\n\r\n    func (c *ComponentImpl1) A() int {\r\n        return 4\r\n    }\r\n\r\n    // Here is how we would build this component\r\n    func New() *ComponentImpl1 {\r\n        impl1 := &amp;ComponentImpl1{}\r\n        abs:=&amp;base.AbstractComponent{\r\n            IAbstractComponentsMember: impl1,\r\n        }\r\n        impl1.AbstractComponent = abs\r\n        return impl1\r\n    }\r\n\r\nThe reason we use a separate interface for this instead of using the same IComponent interface, is because if we use the same interface in this case, if we import the **base** package in **impl*** to use the abstract &quot;class&quot; and also we import the **impl*** packages in the **components** package, so the factory can register them, we&#39;ll find a circular reference.\r\n\r\nSo we could have a factory implementation like this\r\n\r\n**component/factory.go**\r\n\r\n    package component\r\n\r\n    // Default component implementation to use\r\n    const defaultName = &quot;impl1&quot;\r\n    var instance *Factory\r\n\r\n    type Factory struct {\r\n        // Map of constructors for the components\r\n        ctors map[string]func() IComponent\r\n    }\r\n\r\n    func (f *factory) New() IComponent {\r\n        ret, _ := f.Create(defaultName)\r\n        return ret\r\n    }\r\n    \r\n    func (f *factory) Create(name string) (IComponent, error) {\r\n    \tctor, ok := f.ctors[name]\r\n    \tif !ok {\r\n    \t\treturn nil, errors.New(&quot;component not found&quot;)\r\n    \t}\r\n    \treturn ctor(), nil\r\n    }\r\n    \r\n    func (f *factory) Register(name string, constructor func() IComponent) {\r\n    \tf.ctors[name] = constructor\r\n    }\r\n\r\n    func Factory() *Factory {\r\n        if instance == nil {\r\n            instance = &amp;factory{ctors: map[string]func() IComponent{}}\r\n        }\r\n        return instance\r\n    }\r\n\r\n    // Here we register the implementations in the factory\r\n    func init() {\r\n        Factory().Register(&quot;impl1&quot;, func() IComponent { return impl1.New() })\r\n        Factory().Register(&quot;impl2&quot;, func() IComponent { return impl2.New() })\r\n    }\r\n","title":"Equivalence of abstract classes/methods (Java) in Google Go","body":"<p>This is the way I achieved implementing an abstract class the easy way avoiding to run into cyclic references and maintaining good factory patterns.</p>\n\n<p>Let us assume we have the following package structure for our component</p>\n\n<pre><code>component\n  base\n    types.go\n    abstract.go\n  impl1\n    impl.go\n  impl2\n    impl.go\n  types.go\n  factory.go\n</code></pre>\n\n<p>Define the definition of the component, in this example it will be defined here:</p>\n\n<p><strong>component/types.go</strong></p>\n\n<pre><code>package component\n\ntype IComponent interface{\n    B() int\n    A() int\n    Sum() int\n    Average() int\n}\n</code></pre>\n\n<p>Now let's assume we want to create an abstract class that implements <strong>Sum</strong> and <strong>Average</strong> only, but in this abstract implementation we would like to have access to use the values returned by the implemented <strong>A</strong> and <strong>B</strong></p>\n\n<p>To achieve this, we should define another interface for the abstract members of the abstract implementation</p>\n\n<p><strong>component/base/types.go</strong></p>\n\n<pre><code>package base\n\ntype IAbstractComponentMembers {\n    A() int\n    B() int\n}\n</code></pre>\n\n<p>And then we can proceed to implement the abstract \"class\"</p>\n\n<p><strong>component/base/abstract.go</strong></p>\n\n<pre><code>package base\n\ntype AbstractComponent struct {\n    IAbstractComponentsMember\n}\n\nfunc (a *AbstractComponent) Sum() int {\n    return a.A() + a.B()\n}\n\nfunc (a *AbstractComponent) Average() int {\n    return a.Sum() / 2\n}\n</code></pre>\n\n<p>And now we proceed to the implementations</p>\n\n<p><strong>component/impl1/impl.go</strong>  // Asume something similar for <strong>impl2</strong></p>\n\n<pre><code>package impl1\n\ntype ComponentImpl1 struct {\n    base.AbstractComponent\n}\n\nfunc (c *ComponentImpl1) A() int {\n    return 2\n}\n\nfunc (c *ComponentImpl1) A() int {\n    return 4\n}\n\n// Here is how we would build this component\nfunc New() *ComponentImpl1 {\n    impl1 := &amp;ComponentImpl1{}\n    abs:=&amp;base.AbstractComponent{\n        IAbstractComponentsMember: impl1,\n    }\n    impl1.AbstractComponent = abs\n    return impl1\n}\n</code></pre>\n\n<p>The reason we use a separate interface for this instead of using the same IComponent interface, is because if we use the same interface in this case, if we import the <strong>base</strong> package in <strong>impl*</strong> to use the abstract \"class\" and also we import the <strong>impl*</strong> packages in the <strong>components</strong> package, so the factory can register them, we'll find a circular reference.</p>\n\n<p>So we could have a factory implementation like this</p>\n\n<p><strong>component/factory.go</strong></p>\n\n<pre><code>package component\n\n// Default component implementation to use\nconst defaultName = \"impl1\"\nvar instance *Factory\n\ntype Factory struct {\n    // Map of constructors for the components\n    ctors map[string]func() IComponent\n}\n\nfunc (f *factory) New() IComponent {\n    ret, _ := f.Create(defaultName)\n    return ret\n}\n\nfunc (f *factory) Create(name string) (IComponent, error) {\n    ctor, ok := f.ctors[name]\n    if !ok {\n        return nil, errors.New(\"component not found\")\n    }\n    return ctor(), nil\n}\n\nfunc (f *factory) Register(name string, constructor func() IComponent) {\n    f.ctors[name] = constructor\n}\n\nfunc Factory() *Factory {\n    if instance == nil {\n        instance = &amp;factory{ctors: map[string]func() IComponent{}}\n    }\n    return instance\n}\n\n// Here we register the implementations in the factory\nfunc init() {\n    Factory().Register(\"impl1\", func() IComponent { return impl1.New() })\n    Factory().Register(\"impl2\", func() IComponent { return impl2.New() })\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user5560811"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1584194202,"creation_date":1528708971,"answer_id":50794357,"question_id":24232513,"body_markdown":"Go gets its object oriented concepts from Small Talk, not Simula like C++ and not from Java which gets its OO concepts from C++. Remember this and Go will suddenly become clear and obvious.\r\n\r\nThus, there is no concept of class in Go. Just objects, sending and receiving messages. Go&#39;s interfaces can be conceptually explained as collection of messages.\r\n\r\nGo types do not “implement” interfaces, they just implement messages that are part of some interface.\r\n\r\nRepeat: there is no class, no abstract base class and thus there is no “class based design” in Go (as in Small Talk).\r\n\r\nNo wonder trying to implement ABC in Go is a mess, as we see here clearly.","title":"Equivalence of abstract classes/methods (Java) in Google Go","body":"<p>Go gets its object oriented concepts from Small Talk, not Simula like C++ and not from Java which gets its OO concepts from C++. Remember this and Go will suddenly become clear and obvious.</p>\n\n<p>Thus, there is no concept of class in Go. Just objects, sending and receiving messages. Go's interfaces can be conceptually explained as collection of messages.</p>\n\n<p>Go types do not “implement” interfaces, they just implement messages that are part of some interface.</p>\n\n<p>Repeat: there is no class, no abstract base class and thus there is no “class based design” in Go (as in Small Talk).</p>\n\n<p>No wonder trying to implement ABC in Go is a mess, as we see here clearly.</p>\n"},{"tags":[],"owner":{"account_id":3199937,"reputation":535,"user_id":2702193,"accept_rate":40,"display_name":"rox"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678440361,"creation_date":1678439406,"answer_id":75694156,"question_id":24232513,"body_markdown":"I use this trick to implement some sugar API with common implementations:\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n        &quot;fmt&quot;\r\n)\r\n\r\ntype Api interface {\r\n        Sugar()\r\n        Impl()\r\n}\r\n\r\n// Common sugar API implementation\r\ntype CommonSugar struct {\r\n        BasicApi interface {\r\n                Impl()\r\n        }\r\n}\r\n\r\nfunc (s CommonSugar) Sugar() {\r\n        fmt.Println(&quot;Calling Impl in Sugar&quot;)\r\n        s.BasicApi.Impl()\r\n        fmt.Println(&quot;Called Impl in Sugar\\n&quot;)\r\n}\r\n\r\n// A implementation\r\ntype ImplA struct {\r\n        CommonSugar\r\n}\r\n\r\nfunc (a *ImplA) Impl() {\r\n        fmt.Println(&quot;A Impl&quot;)\r\n}\r\n\r\nfunc NewApiA() Api {\r\n        impl := &amp;ImplA{}\r\n        impl.CommonSugar.BasicApi = impl\r\n        return impl\r\n}\r\n\r\n// B implementation\r\ntype ImplB struct {\r\n        CommonSugar\r\n}\r\n\r\nfunc (a *ImplB) Impl() {\r\n        fmt.Println(&quot;B Impl&quot;)\r\n}\r\n\r\nfunc NewApiB() Api {\r\n        impl := &amp;ImplB{}\r\n        impl.CommonSugar.BasicApi = impl\r\n        return impl\r\n}\r\n\r\nfunc main() {\r\n        api := NewApiA()\r\n        api.Sugar()\r\n\r\n        api = NewApiB()\r\n        api.Sugar()\r\n}\r\n\r\n```\r\n\r\nHere&#39;s the program output:\r\n\r\n```\r\nCalling Impl in Sugar\r\nA Impl\r\nCalled Impl in Sugar\r\n\r\nCalling Impl in Sugar\r\nB Impl\r\nCalled Impl in Sugar\r\n```","title":"Equivalence of abstract classes/methods (Java) in Google Go","body":"<p>I use this trick to implement some sugar API with common implementations:</p>\n<pre class=\"lang-golang prettyprint-override\"><code>package main\n\nimport (\n        &quot;fmt&quot;\n)\n\ntype Api interface {\n        Sugar()\n        Impl()\n}\n\n// Common sugar API implementation\ntype CommonSugar struct {\n        BasicApi interface {\n                Impl()\n        }\n}\n\nfunc (s CommonSugar) Sugar() {\n        fmt.Println(&quot;Calling Impl in Sugar&quot;)\n        s.BasicApi.Impl()\n        fmt.Println(&quot;Called Impl in Sugar\\n&quot;)\n}\n\n// A implementation\ntype ImplA struct {\n        CommonSugar\n}\n\nfunc (a *ImplA) Impl() {\n        fmt.Println(&quot;A Impl&quot;)\n}\n\nfunc NewApiA() Api {\n        impl := &amp;ImplA{}\n        impl.CommonSugar.BasicApi = impl\n        return impl\n}\n\n// B implementation\ntype ImplB struct {\n        CommonSugar\n}\n\nfunc (a *ImplB) Impl() {\n        fmt.Println(&quot;B Impl&quot;)\n}\n\nfunc NewApiB() Api {\n        impl := &amp;ImplB{}\n        impl.CommonSugar.BasicApi = impl\n        return impl\n}\n\nfunc main() {\n        api := NewApiA()\n        api.Sugar()\n\n        api = NewApiB()\n        api.Sugar()\n}\n\n</code></pre>\n<p>Here's the program output:</p>\n<pre><code>Calling Impl in Sugar\nA Impl\nCalled Impl in Sugar\n\nCalling Impl in Sugar\nB Impl\nCalled Impl in Sugar\n</code></pre>\n"}],"owner":{"account_id":1800162,"reputation":970,"user_id":1638708,"accept_rate":25,"display_name":"User42"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15526,"favorite_count":0,"down_vote_count":2,"up_vote_count":18,"accepted_answer_id":24234998,"answer_count":6,"score":16,"last_activity_date":1678440361,"creation_date":1402855296,"question_id":24232513,"body_markdown":"I am new to Go and I&#39;m wondering how I can implement a structure similar to abstract classes &amp; methods in Java. In Java, I&#39;d do the following:\r\n\r\n    abstract class A{\r\n    \r\n     static method1(){\r\n      ...\r\n      method2();\r\n      ...\r\n     }\r\n    \r\n     abstract method2();\r\n    \r\n    }\r\n    \r\n    class B extends A{\r\n    \r\n     method2(){\r\n      ...\r\n     }\r\n        \r\n    }\r\n    \r\n    class C extends A{\r\n    \r\n     method2(){\r\n      ...\r\n     }\r\n    \r\n    }\r\n\r\nI know about interfaces and structs. I could build an interface and then a struct to implement method1. But what about method2?\r\nI know that I can embed one interface in another and also a struct as a field of another struct. But I don&#39;t see a way to implement my structure with those methods.\r\n\r\nThe only solution I see is to implement method1 both in class B and class C. Isn&#39;t there another way?\r\n\r\nNote: of course in my case it&#39;s not just one method. Also I&#39;ve got a hierarchy of abstract classes and don&#39;t really want to move everything down to the &#39;subclasses&#39;.\r\n\r\nThe examples I&#39;ve found on the internet are mostly with only one method per interface. It would be great if one of you guys could give me a hint here! Thanks.","title":"Equivalence of abstract classes/methods (Java) in Google Go","body":"<p>I am new to Go and I'm wondering how I can implement a structure similar to abstract classes &amp; methods in Java. In Java, I'd do the following:</p>\n\n<pre><code>abstract class A{\n\n static method1(){\n  ...\n  method2();\n  ...\n }\n\n abstract method2();\n\n}\n\nclass B extends A{\n\n method2(){\n  ...\n }\n\n}\n\nclass C extends A{\n\n method2(){\n  ...\n }\n\n}\n</code></pre>\n\n<p>I know about interfaces and structs. I could build an interface and then a struct to implement method1. But what about method2?\nI know that I can embed one interface in another and also a struct as a field of another struct. But I don't see a way to implement my structure with those methods.</p>\n\n<p>The only solution I see is to implement method1 both in class B and class C. Isn't there another way?</p>\n\n<p>Note: of course in my case it's not just one method. Also I've got a hierarchy of abstract classes and don't really want to move everything down to the 'subclasses'.</p>\n\n<p>The examples I've found on the internet are mostly with only one method per interface. It would be great if one of you guys could give me a hint here! Thanks.</p>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":953250,"reputation":2033,"user_id":979000,"accept_rate":42,"display_name":"Hrishikesh"},"score":1,"creation_date":1391160420,"post_id":21476401,"comment_id":32414081,"body_markdown":"do you want that member to be saved to disk as well when you perform IO on it? if not, you need to mark it as `Transient`","body":"do you want that member to be saved to disk as well when you perform IO on it? if not, you need to mark it as <code>Transient</code>"},{"owner":{"account_id":1861835,"reputation":4286,"user_id":1686291,"accept_rate":73,"display_name":"Not a bug"},"score":0,"creation_date":1391160591,"post_id":21476401,"comment_id":32414186,"body_markdown":"http://stackoverflow.com/q/910374/1686291","body":"<a href=\"http://stackoverflow.com/q/910374/1686291\">stackoverflow.com/q/910374/1686291</a>"}],"answers":[{"tags":[],"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623306589,"creation_date":1391160464,"answer_id":21476448,"question_id":21476401,"body_markdown":"It&#39;ll throw a [`NotSerializableException`](http://docs.oracle.com/javase/7/docs/api/java/io/NotSerializableException.html) when you try to `Serialize` it. To avoid that, make that field a `transient` field.\r\n\r\n    private transient YourNonSerializableObject doNotSerializeMe; // This field won&#39;t be serialized","title":"What happens if your Serializable class contains a member which is not serializable? How do you fix it?","body":"<p>It'll throw a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/NotSerializableException.html\" rel=\"nofollow noreferrer\"><code>NotSerializableException</code></a> when you try to <code>Serialize</code> it. To avoid that, make that field a <code>transient</code> field.</p>\n<pre><code>private transient YourNonSerializableObject doNotSerializeMe; // This field won't be serialized\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2876105,"reputation":3271,"user_id":2468131,"display_name":"Njol"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391160592,"creation_date":1391160592,"answer_id":21476495,"question_id":21476401,"body_markdown":"The class will not be serialisable, unless the field is declared `transient` (which will prevent the field from being serialised, i.e. it will not be saved).\r\n\r\nIf you can, I suggest to make that member serialisable, otherwise you have to use `writeObject` and `readObject` to write and/or read the field manually. See the docs for information on these methods: http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html","title":"What happens if your Serializable class contains a member which is not serializable? How do you fix it?","body":"<p>The class will not be serialisable, unless the field is declared <code>transient</code> (which will prevent the field from being serialised, i.e. it will not be saved).</p>\n\n<p>If you can, I suggest to make that member serialisable, otherwise you have to use <code>writeObject</code> and <code>readObject</code> to write and/or read the field manually. See the docs for information on these methods: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html</a></p>\n"},{"tags":[],"owner":{"account_id":3893308,"reputation":2664,"user_id":3222971,"display_name":"Suneet Bansal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391163425,"creation_date":1391162554,"answer_id":21477221,"question_id":21476401,"body_markdown":"@HashUser123: use transient keyword before the field which you do not want to serialized.\r\nFor ex: \r\n\r\n    private transient int salary;","title":"What happens if your Serializable class contains a member which is not serializable? How do you fix it?","body":"<p>@HashUser123: use transient keyword before the field which you do not want to serialized.\nFor ex: </p>\n\n<pre><code>private transient int salary;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1391164441,"creation_date":1391164441,"answer_id":21477848,"question_id":21476401,"body_markdown":"One of the fields of your class is an instance of a class that does not implement `Serializable`, which is a marker interface (no methods) that tells the JVM it may serialize it using the default serialization mechanism.\r\n\r\nIf all the fields of that class are themselves `Serializable`, easy - just add `implements Serializable` to the class declaration.\r\n\r\nIf not, either repeat the process for that field&#39;s class and so on down into your object graph.\r\n\r\nIf you hit a class that can&#39;t, or *shouldn&#39;t*, be made `Serializable`,  add the `transient` keyword to the field declaration. That will tell the JVM to ignore that field when performing `Serialization`.","title":"What happens if your Serializable class contains a member which is not serializable? How do you fix it?","body":"<p>One of the fields of your class is an instance of a class that does not implement <code>Serializable</code>, which is a marker interface (no methods) that tells the JVM it may serialize it using the default serialization mechanism.</p>\n\n<p>If all the fields of that class are themselves <code>Serializable</code>, easy - just add <code>implements Serializable</code> to the class declaration.</p>\n\n<p>If not, either repeat the process for that field's class and so on down into your object graph.</p>\n\n<p>If you hit a class that can't, or <em>shouldn't</em>, be made <code>Serializable</code>,  add the <code>transient</code> keyword to the field declaration. That will tell the JVM to ignore that field when performing <code>Serialization</code>.</p>\n"},{"tags":[],"owner":{"account_id":27942187,"reputation":1,"user_id":21337967,"display_name":"Rutvik Jadhav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678440287,"creation_date":1678043721,"answer_id":75644724,"question_id":21476401,"body_markdown":"At the time of serialization, if some filed value, we dont want to save in files we use transient in java. Similarly some fields in class are not able to serialisable but class we extended as a serialisable at that time we use Transient field \r\n```java\r\n\r\nclass Cat implements serializable {\r\n private int eyes;\r\n private String voice;\r\n}\r\n```\r\n\r\nUse transient for excluding some fields which ll not come under serializable.\r\n\r\n```java\r\n\r\nclass Cat implements serializable {\r\n private int eyes;\r\n private transient String voice;\r\n}","title":"What happens if your Serializable class contains a member which is not serializable? How do you fix it?","body":"<p>At the time of serialization, if some filed value, we dont want to save in files we use transient in java. Similarly some fields in class are not able to serialisable but class we extended as a serialisable at that time we use Transient field</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nclass Cat implements serializable {\n private int eyes;\n private String voice;\n}\n</code></pre>\n<p>Use transient for excluding some fields which ll not come under serializable.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nclass Cat implements serializable {\n private int eyes;\n private transient String voice;\n}\n</code></pre>\n"}],"owner":{"account_id":3641423,"reputation":57,"user_id":3035399,"display_name":"HashUser123"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6181,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":21477848,"answer_count":5,"score":3,"last_activity_date":1678440287,"creation_date":1391160334,"question_id":21476401,"body_markdown":"What happens if your Serializable class contains a member which is not  serializable? \r\nHow do you fix it?","title":"What happens if your Serializable class contains a member which is not serializable? How do you fix it?","body":"<p>What happens if your Serializable class contains a member which is not  serializable? \nHow do you fix it?</p>\n"},{"tags":["java","for-loop","substring","java.util.scanner"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1678249648,"post_id":75669429,"comment_id":133494956,"body_markdown":"you&#39;re looking for &quot;how to pad a string in java&quot; for the case you&#39;re flagging. If `*` needs to be at the 20th spot, and you have a string that&#39;s only four letters long, you&#39;re going to need (20 - 5) spaces before writing that `*`. Thankfully, there are several easily found answers on SO for how to pad strings in Java.","body":"you&#39;re looking for &quot;how to pad a string in java&quot; for the case you&#39;re flagging. If <code>*</code> needs to be at the 20th spot, and you have a string that&#39;s only four letters long, you&#39;re going to need (20 - 5) spaces before writing that <code>*</code>. Thankfully, there are several easily found answers on SO for how to pad strings in Java."},{"owner":{"account_id":4196075,"reputation":17303,"user_id":3437460,"accept_rate":49,"display_name":"user3437460"},"score":0,"creation_date":1678251243,"post_id":75669429,"comment_id":133495116,"body_markdown":"Just search for space padding or string padding. For e.g. https://stackoverflow.com/questions/388461/how-can-i-pad-a-string-in-java","body":"Just search for space padding or string padding. For e.g. <a href=\"https://stackoverflow.com/questions/388461/how-can-i-pad-a-string-in-java\" title=\"how can i pad a string in java\">stackoverflow.com/questions/388461/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":4196075,"reputation":17303,"user_id":3437460,"accept_rate":49,"display_name":"user3437460"},"score":0,"creation_date":1678251006,"post_id":75669491,"comment_id":133495094,"body_markdown":"This is hard coding, and in my opinion should be avoided.","body":"This is hard coding, and in my opinion should be avoided."},{"owner":{"account_id":27961726,"reputation":3,"user_id":21353356,"display_name":"Senuka Liyanage"},"score":0,"creation_date":1678338302,"post_id":75669491,"comment_id":133513912,"body_markdown":"Their header and footer was hardcoded anyway; however I&#39;ll edit the for loop to not have the hardcoded 18","body":"Their header and footer was hardcoded anyway; however I&#39;ll edit the for loop to not have the hardcoded 18"}],"tags":[],"owner":{"account_id":27961726,"reputation":3,"user_id":21353356,"display_name":"Senuka Liyanage"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678338487,"creation_date":1678250289,"answer_id":75669491,"question_id":75669429,"body_markdown":"A simple way to do this would be to simply to print out a bunch of spaces to fill in the empty space (padding the string).\r\nFor example, for the last line in input you could do\r\n\r\n``` java\r\n    System.out.print(&quot;*&quot; + part);\r\n    for(int i=0; i &lt; numberOfCharacters - 2 - part.length(); i++){\r\n        System.out.print(&quot; &quot;);\r\n    }\r\n    System.out.println(&quot;*&quot;);\r\n```\r\nWhat this code is doing is just finding the difference between the part&#39;s length, and the length of an ideal substring, then prints out that many spaces.","title":"How to insert a character into a specific spot in a line in java?","body":"<p>A simple way to do this would be to simply to print out a bunch of spaces to fill in the empty space (padding the string).\nFor example, for the last line in input you could do</p>\n<pre class=\"lang-java prettyprint-override\"><code>    System.out.print(&quot;*&quot; + part);\n    for(int i=0; i &lt; numberOfCharacters - 2 - part.length(); i++){\n        System.out.print(&quot; &quot;);\n    }\n    System.out.println(&quot;*&quot;);\n</code></pre>\n<p>What this code is doing is just finding the difference between the part's length, and the length of an ideal substring, then prints out that many spaces.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678252720,"creation_date":1678252720,"answer_id":75669649,"question_id":75669429,"body_markdown":"    System.out.printf(&quot;*%-20s*%n&quot;, part);\r\n\r\nThis will print `part` formatted, left aligned (`-`), paddel to 20. `%n` for a line break.\r\n","title":"How to insert a character into a specific spot in a line in java?","body":"<pre><code>System.out.printf(&quot;*%-20s*%n&quot;, part);\n</code></pre>\n<p>This will print <code>part</code> formatted, left aligned (<code>-</code>), paddel to 20. <code>%n</code> for a line break.</p>\n"},{"comments":[{"owner":{"account_id":22331850,"reputation":1,"user_id":16553019,"display_name":"bingfeng"},"score":0,"creation_date":1678343369,"post_id":75681114,"comment_id":133514614,"body_markdown":"Quoting the comment area answer, there should not be a minus 2 here","body":"Quoting the comment area answer, there should not be a minus 2 here"}],"tags":[],"owner":{"account_id":22331850,"reputation":1,"user_id":16553019,"display_name":"bingfeng"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678343355,"creation_date":1678343355,"answer_id":75681114,"question_id":75669429,"body_markdown":"```java\r\npublic static void main(String[] args) {\r\n\r\n        System.out.println(&quot;Please input a word: &quot;);\r\n        Scanner stringScanner = new Scanner(System.in);\r\n        String input = stringScanner.nextLine();\r\n        int numberOfCharacters = 20;\r\n        System.out.println(&quot;**********************&quot;);\r\n        for (int i = 0; i &lt; input.length(); i += numberOfCharacters) {\r\n            String part = input.substring(i, Math.min(input.length(), i + numberOfCharacters));\r\n            System.out.print(&quot;*&quot; + part);\r\n            // Quoting the comment area answer, there should not be a minus 2 here\r\n            for (int j = 0; j &lt; numberOfCharacters - part.length(); j++) {\r\n                System.out.print(&quot; &quot;);\r\n            }\r\n            System.out.println(&quot;*&quot;);\r\n        }\r\n        System.out.println(&quot;**********************&quot;);\r\n    }\r\n```","title":"How to insert a character into a specific spot in a line in java?","body":"<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n\n        System.out.println(&quot;Please input a word: &quot;);\n        Scanner stringScanner = new Scanner(System.in);\n        String input = stringScanner.nextLine();\n        int numberOfCharacters = 20;\n        System.out.println(&quot;**********************&quot;);\n        for (int i = 0; i &lt; input.length(); i += numberOfCharacters) {\n            String part = input.substring(i, Math.min(input.length(), i + numberOfCharacters));\n            System.out.print(&quot;*&quot; + part);\n            // Quoting the comment area answer, there should not be a minus 2 here\n            for (int j = 0; j &lt; numberOfCharacters - part.length(); j++) {\n                System.out.print(&quot; &quot;);\n            }\n            System.out.println(&quot;*&quot;);\n        }\n        System.out.println(&quot;**********************&quot;);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678440160,"creation_date":1678440160,"answer_id":75694258,"question_id":75669429,"body_markdown":"You wrote in your question:\r\n&gt; I also would like it to, instead of cutting off at the twentieth character, cut off at the space before that.\r\n\r\nConsider the following code. It uses method [printf][1] (of class `java.io.PrintStream`) to print each line of output as a string of 20 characters with a single leading and single trailing asterisk (`*`). The [format][2] string is:\r\n```java\r\n*%-20s*%n\r\n```\r\nwhich means that the string is left justified and padded with trailing spaces if it is less than 20 characters long and it is followed by a newline. As mentioned, the `*` characters are literals.\r\n\r\nI suggest that you run it with a debugger as I believe that will help you to understand how it works.\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class NewTry {\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Please input a word: &quot;);\r\n        Scanner stringScanner = new Scanner(System.in);\r\n        String input = stringScanner.nextLine();\r\n        input = input.trim();\r\n        int numberOfCharacters = 20;\r\n        String format = &quot;*%-&quot; + numberOfCharacters + &quot;s*%n&quot;;\r\n        System.out.println(&quot;**********************&quot;);\r\n        int total = input.length();\r\n        int start = 0;\r\n        String hyphen;\r\n        String substr;\r\n        while (start + numberOfCharacters &lt; total) {\r\n            if (input.charAt(start) == &#39; &#39;) {\r\n                start++;\r\n            }\r\n            hyphen = &quot;&quot;;\r\n            int index = start + numberOfCharacters;\r\n            if (index &lt; total) {\r\n                while (index &gt; start  &amp;&amp;  input.charAt(index) != &#39; &#39;) {\r\n                    index--;\r\n                }\r\n                if (index == start) {\r\n                    index = start + numberOfCharacters - 1;\r\n                    hyphen = &quot;-&quot;;\r\n                }\r\n            }\r\n            substr = input.substring(start, index);\r\n            if (substr.charAt(0) == &#39; &#39;) {\r\n                substr = substr.substring(1);\r\n                index++;\r\n                start++;\r\n                int temp = start + numberOfCharacters;\r\n                if (temp &lt; total) {\r\n                    if (input.charAt(temp) == &#39; &#39;) {\r\n                        index = temp;\r\n                        substr = input.substring(start, index);\r\n                    }\r\n                }\r\n            }\r\n            System.out.printf(format, substr + hyphen);\r\n            start = index;\r\n        }\r\n        if (start &lt; total) {\r\n            substr = input.substring(start);\r\n            if (substr.charAt(0) == &#39; &#39;) {\r\n                substr = substr.substring(1);\r\n            }\r\n            System.out.printf(format, substr);\r\n        }\r\n        System.out.println(&quot;**********************&quot;);\r\n        stringScanner.close();\r\n    }\r\n}\r\n```\r\nThe above code assumes the following regarding the string entered by the user:\r\n- The string contains no punctuation, i.e. commas, [hyphens][3], etc.\r\n- Words in the string are separated by a single space only, i.e. no TAB characters or more than one consecutive spaces.\r\n\r\nNote that the above code also handles words that are longer than 20 characters. It does so by taking 19 characters and adding a hyphen.\r\n\r\nHere are my test runs:\r\n```none\r\nPlease input a word: \r\nGeorge Best was a professional footballer who began his professional career playing for English football club Manchester United at the age of 17\r\n**********************\r\n*George Best was a   *\r\n*professional        *\r\n*footballer who began*\r\n*his professional    *\r\n*career playing for  *\r\n*English football    *\r\n*club Manchester     *\r\n*United at the age of*\r\n*17                  *\r\n**********************\r\n```\r\n---------------------\r\n```none\r\nPlease input a word: \r\nantidisestablishmentarianism\r\n**********************\r\n*antidisestablishmen-*\r\n*tarianism           *\r\n**********************\r\n```\r\n----------------\r\n```none\r\nPlease input a word: \r\ncan you spell antidisestablishmentarianism\r\n**********************\r\n*can you spell       *\r\n*antidisestablishmen-*\r\n*tarianism           *\r\n**********************\r\n```\r\n----------------\r\n```none\r\nPlease input a word: \r\nantidisestablishmentarianism is a long word\r\n**********************\r\n*antidisestablishmen-*\r\n*tarianism is a long *\r\n*word                *\r\n**********************\r\n```\r\n-----------------\r\n```none\r\nPlease input a word: \r\nplease find the word antidisestablishmentarianism in the dictionary\r\n**********************\r\n*please find the word*\r\n*antidisestablishmen-*\r\n*tarianism in the    *\r\n*dictionary          *\r\n**********************\r\n```\r\n--------------------------\r\n```none\r\nPlease input a word: \r\nstackoverflow\r\n**********************\r\n*stackoverflow       *\r\n**********************\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Formatter.html#syntax\r\n  [3]: https://en.wikipedia.org/wiki/Hyphen","title":"How to insert a character into a specific spot in a line in java?","body":"<p>You wrote in your question:</p>\n<blockquote>\n<p>I also would like it to, instead of cutting off at the twentieth character, cut off at the space before that.</p>\n</blockquote>\n<p>Consider the following code. It uses method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\">printf</a> (of class <code>java.io.PrintStream</code>) to print each line of output as a string of 20 characters with a single leading and single trailing asterisk (<code>*</code>). The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Formatter.html#syntax\" rel=\"nofollow noreferrer\">format</a> string is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>*%-20s*%n\n</code></pre>\n<p>which means that the string is left justified and padded with trailing spaces if it is less than 20 characters long and it is followed by a newline. As mentioned, the <code>*</code> characters are literals.</p>\n<p>I suggest that you run it with a debugger as I believe that will help you to understand how it works.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class NewTry {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Please input a word: &quot;);\n        Scanner stringScanner = new Scanner(System.in);\n        String input = stringScanner.nextLine();\n        input = input.trim();\n        int numberOfCharacters = 20;\n        String format = &quot;*%-&quot; + numberOfCharacters + &quot;s*%n&quot;;\n        System.out.println(&quot;**********************&quot;);\n        int total = input.length();\n        int start = 0;\n        String hyphen;\n        String substr;\n        while (start + numberOfCharacters &lt; total) {\n            if (input.charAt(start) == ' ') {\n                start++;\n            }\n            hyphen = &quot;&quot;;\n            int index = start + numberOfCharacters;\n            if (index &lt; total) {\n                while (index &gt; start  &amp;&amp;  input.charAt(index) != ' ') {\n                    index--;\n                }\n                if (index == start) {\n                    index = start + numberOfCharacters - 1;\n                    hyphen = &quot;-&quot;;\n                }\n            }\n            substr = input.substring(start, index);\n            if (substr.charAt(0) == ' ') {\n                substr = substr.substring(1);\n                index++;\n                start++;\n                int temp = start + numberOfCharacters;\n                if (temp &lt; total) {\n                    if (input.charAt(temp) == ' ') {\n                        index = temp;\n                        substr = input.substring(start, index);\n                    }\n                }\n            }\n            System.out.printf(format, substr + hyphen);\n            start = index;\n        }\n        if (start &lt; total) {\n            substr = input.substring(start);\n            if (substr.charAt(0) == ' ') {\n                substr = substr.substring(1);\n            }\n            System.out.printf(format, substr);\n        }\n        System.out.println(&quot;**********************&quot;);\n        stringScanner.close();\n    }\n}\n</code></pre>\n<p>The above code assumes the following regarding the string entered by the user:</p>\n<ul>\n<li>The string contains no punctuation, i.e. commas, <a href=\"https://en.wikipedia.org/wiki/Hyphen\" rel=\"nofollow noreferrer\">hyphens</a>, etc.</li>\n<li>Words in the string are separated by a single space only, i.e. no TAB characters or more than one consecutive spaces.</li>\n</ul>\n<p>Note that the above code also handles words that are longer than 20 characters. It does so by taking 19 characters and adding a hyphen.</p>\n<p>Here are my test runs:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Please input a word: \nGeorge Best was a professional footballer who began his professional career playing for English football club Manchester United at the age of 17\n**********************\n*George Best was a   *\n*professional        *\n*footballer who began*\n*his professional    *\n*career playing for  *\n*English football    *\n*club Manchester     *\n*United at the age of*\n*17                  *\n**********************\n</code></pre>\n<hr />\n<pre class=\"lang-none prettyprint-override\"><code>Please input a word: \nantidisestablishmentarianism\n**********************\n*antidisestablishmen-*\n*tarianism           *\n**********************\n</code></pre>\n<hr />\n<pre class=\"lang-none prettyprint-override\"><code>Please input a word: \ncan you spell antidisestablishmentarianism\n**********************\n*can you spell       *\n*antidisestablishmen-*\n*tarianism           *\n**********************\n</code></pre>\n<hr />\n<pre class=\"lang-none prettyprint-override\"><code>Please input a word: \nantidisestablishmentarianism is a long word\n**********************\n*antidisestablishmen-*\n*tarianism is a long *\n*word                *\n**********************\n</code></pre>\n<hr />\n<pre class=\"lang-none prettyprint-override\"><code>Please input a word: \nplease find the word antidisestablishmentarianism in the dictionary\n**********************\n*please find the word*\n*antidisestablishmen-*\n*tarianism in the    *\n*dictionary          *\n**********************\n</code></pre>\n<hr />\n<pre class=\"lang-none prettyprint-override\"><code>Please input a word: \nstackoverflow\n**********************\n*stackoverflow       *\n**********************\n</code></pre>\n"}],"owner":{"account_id":27948642,"reputation":1,"user_id":21343042,"display_name":"Nick Slack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1678440160,"creation_date":1678249439,"question_id":75669429,"body_markdown":"I looked around and haven&#39;t found anything that I really understand or can do to do this and am hoping there is a simple solution. I have to add a `*` in the 20th character slot after each line in this program.\r\n\r\nThis is my code:\r\n```java\r\npackage StarBorder;\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class NewTry {\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Please input a word: &quot;);\r\n        Scanner stringScanner = new Scanner(System.in);\r\n        String input = stringScanner.nextLine();\r\n        int numberOfCharacters = 20;\r\n        System.out.println(&quot;**********************&quot;);\r\n        for (int i = 0; i &lt; input.length(); i += numberOfCharacters) {\r\n            String part = input.substring(i, Math.min(input.length(), i + numberOfCharacters));\r\n            System.out.println(&quot;*&quot; + part + &quot;*&quot;);\r\n        }\r\n        System.out.println(&quot;**********************&quot;);\r\n    }\r\n}\r\n```\r\nThis is what it prints out:\r\n\r\n    **********************\r\n    *Hello I am doing som*\r\n    *e code, hello ther p*\r\n    *eople on stack overf*\r\n    *low* // I need this to be over where the other *&#39;s are.\r\n    **********************\r\n\r\nI need it to be a full square of stars. Thanks for any answers.\r\n\r\nI also would like it to, instead of cutting off at the twentieth character, cut off at the space before that. That is a secondary issue, however.","title":"How to insert a character into a specific spot in a line in java?","body":"<p>I looked around and haven't found anything that I really understand or can do to do this and am hoping there is a simple solution. I have to add a <code>*</code> in the 20th character slot after each line in this program.</p>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package StarBorder;\n\nimport java.util.Scanner;\n\npublic class NewTry {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Please input a word: &quot;);\n        Scanner stringScanner = new Scanner(System.in);\n        String input = stringScanner.nextLine();\n        int numberOfCharacters = 20;\n        System.out.println(&quot;**********************&quot;);\n        for (int i = 0; i &lt; input.length(); i += numberOfCharacters) {\n            String part = input.substring(i, Math.min(input.length(), i + numberOfCharacters));\n            System.out.println(&quot;*&quot; + part + &quot;*&quot;);\n        }\n        System.out.println(&quot;**********************&quot;);\n    }\n}\n</code></pre>\n<p>This is what it prints out:</p>\n<pre><code>**********************\n*Hello I am doing som*\n*e code, hello ther p*\n*eople on stack overf*\n*low* // I need this to be over where the other *'s are.\n**********************\n</code></pre>\n<p>I need it to be a full square of stars. Thanks for any answers.</p>\n<p>I also would like it to, instead of cutting off at the twentieth character, cut off at the space before that. That is a secondary issue, however.</p>\n"},{"tags":["java","exception"],"answers":[{"comments":[{"owner":{"account_id":27196046,"reputation":1,"user_id":20728927,"display_name":"CoderDai"},"score":0,"creation_date":1678439773,"post_id":75681977,"comment_id":133536376,"body_markdown":"i&#39;ve solved this problem by adding a version description of this package,thanks anyway~","body":"i&#39;ve solved this problem by adding a version description of this package,thanks anyway~"}],"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678350013,"creation_date":1678350013,"answer_id":75681977,"question_id":75681615,"body_markdown":"The library version of apache commons lang is too old and doesn&#39;t contain that function.\r\n\r\nHow I found out:\r\n\r\nFirst you have to analyze the function signature: \r\n\r\n`org.apache.commons.lang.ArrayUtils.isNotEmpty([Ljava/lang/Object;)Z`\r\n\r\n - `org.apache.commons.lang` - this is the package\r\n - `ArrayUtils` - this is the classname where the method is located\r\n - `isNotEmpty` - the method name inside the class\r\n - `(...)` the parameters. `...` will be a list of further class or primitive types, but in a special form with letters, see below.\r\n - `Z` the return type of the method. Letters explained below.\r\n\r\nWhat the letters mean: The type names for parameters and return value are taken from the method `java.lang.Class.getName()`. You can read it&#39;s [JavaDocs](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getName()) to see the details, here in brief for your case: \r\n\r\n - `[` is for one level of Array (multiple nested arrays will have several `[` concatenated)\r\n - `L&lt;classname&gt;;` is for an object with the type of `&lt;classname&gt;` - for your case its the base class `java.lang.Object`.\r\n - `Z` is for primitive `boolean`\r\n\r\nWith that information you find that the missing method is `boolean org.apache.commons.lang.ArrayUtils.isNotEmpty(java.lang.Object[])`.\r\n\r\nNext step is to find javadocs and hope there is a version information given there, so you can search the internet for that method signature. It lead me to the [JavaDocs for Apache Commons Lang](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#isNotEmpty(java.lang.Object[]))\r\n\r\nIn there, find your way to the method you searched (I linked it already), and you hopefully will find information like \r\n\r\n&gt; **Since:** 2.5\r\n\r\nThis means, the method you are using in your code is not contained in the library version you are using at runtime. Your code was compiled with a more recent version of the library, otherwise the compiler would have complained.\r\n\r\nHow this can happen can have multiple reasons, you could have taken a JAR file &quot;off the shelf&quot;, that didn&#39;t specify it&#39;s dependencies properly, or you ignored that specs, etc. \r\n\r\nDeclaring a dependency of your own project to the right version of the library would be a fairly easy, but probably also is kind of a workaround, depending on your build system.","title":"An error occurred when the project referenced seata","body":"<p>The library version of apache commons lang is too old and doesn't contain that function.</p>\n<p>How I found out:</p>\n<p>First you have to analyze the function signature:</p>\n<p><code>org.apache.commons.lang.ArrayUtils.isNotEmpty([Ljava/lang/Object;)Z</code></p>\n<ul>\n<li><code>org.apache.commons.lang</code> - this is the package</li>\n<li><code>ArrayUtils</code> - this is the classname where the method is located</li>\n<li><code>isNotEmpty</code> - the method name inside the class</li>\n<li><code>(...)</code> the parameters. <code>...</code> will be a list of further class or primitive types, but in a special form with letters, see below.</li>\n<li><code>Z</code> the return type of the method. Letters explained below.</li>\n</ul>\n<p>What the letters mean: The type names for parameters and return value are taken from the method <code>java.lang.Class.getName()</code>. You can read it's <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getName()\" rel=\"nofollow noreferrer\">JavaDocs</a> to see the details, here in brief for your case:</p>\n<ul>\n<li><code>[</code> is for one level of Array (multiple nested arrays will have several <code>[</code> concatenated)</li>\n<li><code>L&lt;classname&gt;;</code> is for an object with the type of <code>&lt;classname&gt;</code> - for your case its the base class <code>java.lang.Object</code>.</li>\n<li><code>Z</code> is for primitive <code>boolean</code></li>\n</ul>\n<p>With that information you find that the missing method is <code>boolean org.apache.commons.lang.ArrayUtils.isNotEmpty(java.lang.Object[])</code>.</p>\n<p>Next step is to find javadocs and hope there is a version information given there, so you can search the internet for that method signature. It lead me to the <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#isNotEmpty(java.lang.Object%5B%5D)\" rel=\"nofollow noreferrer\">JavaDocs for Apache Commons Lang</a></p>\n<p>In there, find your way to the method you searched (I linked it already), and you hopefully will find information like</p>\n<blockquote>\n<p><strong>Since:</strong> 2.5</p>\n</blockquote>\n<p>This means, the method you are using in your code is not contained in the library version you are using at runtime. Your code was compiled with a more recent version of the library, otherwise the compiler would have complained.</p>\n<p>How this can happen can have multiple reasons, you could have taken a JAR file &quot;off the shelf&quot;, that didn't specify it's dependencies properly, or you ignored that specs, etc.</p>\n<p>Declaring a dependency of your own project to the right version of the library would be a fairly easy, but probably also is kind of a workaround, depending on your build system.</p>\n"}],"owner":{"account_id":27196046,"reputation":1,"user_id":20728927,"display_name":"CoderDai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678439894,"creation_date":1678347272,"question_id":75681615,"body_markdown":"The following error occurred when the project started:\r\n\r\n&gt; 2023-03-09 15:25:36.979  WARN 16788 --- [           main]\r\n&gt; ConfigServletWebServerApplicationContext : Exception encountered\r\n&gt; during context initialization - cancelling refresh attempt:\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;globalTransactionScanner&#39; defined in class\r\n&gt; path resource\r\n&gt; [io/seata/spring/boot/autoconfigure/SeataAutoConfiguration.class]:\r\n&gt; Bean instantiation via factory method failed; nested exception is\r\n&gt; org.springframework.beans.BeanInstantiationException: Failed to\r\n&gt; instantiate [io.seata.spring.annotation.GlobalTransactionScanner]:\r\n&gt; Factory method &#39;globalTransactionScanner&#39; threw exception; nested\r\n&gt; exception is java.lang.NoSuchMethodError:\r\n&gt; org.apache.commons.lang.ArrayUtils.isNotEmpty([Ljava/lang/Object;)Z\r\n&gt; 2023-03-09 15:25:36.996 ERROR 16788 --- [           main]\r\n&gt; o.s.b.d.LoggingFailureAnalysisReporter   :\r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    io.seata.spring.annotation.scannercheckers.PackageScannerChecker.addScannablePackages(PackageScannerChecker.java:48)\r\n\r\nThe following method did not exist:\r\n\r\n    org.apache.commons.lang.ArrayUtils.isNotEmpty([Ljava/lang/Object;)Z\r\n\r\nThe method&#39;s class, org.apache.commons.lang.ArrayUtils, is available from the following locations:\r\n\r\n    jar:file:/D:/respository/commons-lang/commons-lang/2.4/commons-lang-2.4.jar!/org/apache/commons/lang/ArrayUtils.class\r\n\r\nIt was loaded from the following location:\r\n\r\n    file:/D:/respository/commons-lang/commons-lang/2.4/commons-lang-2.4.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains a single, compatible version of org.apache.commons.lang.ArrayUtils\r\n\r\n\r\n\r\nI&#39;ve tried many ways but can&#39;t solve it，help!\r\n\r\n\r\nsomebody can telle me how to solve this problem?","title":"An error occurred when the project referenced seata","body":"<p>The following error occurred when the project started:</p>\n<blockquote>\n<p>2023-03-09 15:25:36.979  WARN 16788 --- [           main]\nConfigServletWebServerApplicationContext : Exception encountered\nduring context initialization - cancelling refresh attempt:\norg.springframework.beans.factory.BeanCreationException: Error\ncreating bean with name 'globalTransactionScanner' defined in class\npath resource\n[io/seata/spring/boot/autoconfigure/SeataAutoConfiguration.class]:\nBean instantiation via factory method failed; nested exception is\norg.springframework.beans.BeanInstantiationException: Failed to\ninstantiate [io.seata.spring.annotation.GlobalTransactionScanner]:\nFactory method 'globalTransactionScanner' threw exception; nested\nexception is java.lang.NoSuchMethodError:\norg.apache.commons.lang.ArrayUtils.isNotEmpty([Ljava/lang/Object;)Z\n2023-03-09 15:25:36.996 ERROR 16788 --- [           main]\no.s.b.d.LoggingFailureAnalysisReporter   :</p>\n</blockquote>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>An attempt was made to call a method that does not exist. The attempt was made from the following location:</p>\n<pre><code>io.seata.spring.annotation.scannercheckers.PackageScannerChecker.addScannablePackages(PackageScannerChecker.java:48)\n</code></pre>\n<p>The following method did not exist:</p>\n<pre><code>org.apache.commons.lang.ArrayUtils.isNotEmpty([Ljava/lang/Object;)Z\n</code></pre>\n<p>The method's class, org.apache.commons.lang.ArrayUtils, is available from the following locations:</p>\n<pre><code>jar:file:/D:/respository/commons-lang/commons-lang/2.4/commons-lang-2.4.jar!/org/apache/commons/lang/ArrayUtils.class\n</code></pre>\n<p>It was loaded from the following location:</p>\n<pre><code>file:/D:/respository/commons-lang/commons-lang/2.4/commons-lang-2.4.jar\n</code></pre>\n<p>Action:</p>\n<p>Correct the classpath of your application so that it contains a single, compatible version of org.apache.commons.lang.ArrayUtils</p>\n<p>I've tried many ways but can't solve it，help!</p>\n<p>somebody can telle me how to solve this problem?</p>\n"},{"tags":["java","maven","gitlab","coreos"],"comments":[{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":2,"creation_date":1419945455,"post_id":27706082,"comment_id":43824228,"body_markdown":"It seems some network permission/firewall problem. Try to use the same user that your script is running and test the `mvn install` command again and see if it download what it is needed.","body":"It seems some network permission/firewall problem. Try to use the same user that your script is running and test the <code>mvn install</code> command again and see if it download what it is needed."},{"owner":{"account_id":5363916,"reputation":322,"user_id":4274419,"accept_rate":100,"display_name":"Paulo Botelho"},"score":0,"creation_date":1419956094,"post_id":27706082,"comment_id":43829297,"body_markdown":"I just tested what you said and both users are root so thats not the problem =(","body":"I just tested what you said and both users are root so thats not the problem =("},{"owner":{"account_id":310272,"reputation":4258,"user_id":623159,"display_name":"gaoithe"},"score":0,"creation_date":1479126856,"post_id":27706082,"comment_id":68412975,"body_markdown":"Was it the docker run command that was hanging? I had fun before but with docker exec. 1. fun with ttys 2. hang/freeze docker exec run under timeout. 1. jenkins job -&gt; script ssh to test driver -&gt; ssh to system-under-test -&gt; bash script -&gt; calls docker exec. Ssh tty flags had to be used in a particular way to get things working. 2. There seem to be various docker exec hanging issues e.g. this one particular to my experience: https://github.com/docker/docker/issues/28207","body":"Was it the docker run command that was hanging? I had fun before but with docker exec. 1. fun with ttys 2. hang/freeze docker exec run under timeout. 1. jenkins job -&gt; script ssh to test driver -&gt; ssh to system-under-test -&gt; bash script -&gt; calls docker exec. Ssh tty flags had to be used in a particular way to get things working. 2. There seem to be various docker exec hanging issues e.g. this one particular to my experience: <a href=\"https://github.com/docker/docker/issues/28207\" rel=\"nofollow noreferrer\">github.com/docker/docker/issues/28207</a>"},{"owner":{"account_id":5363916,"reputation":322,"user_id":4274419,"accept_rate":100,"display_name":"Paulo Botelho"},"score":0,"creation_date":1479565292,"post_id":27706082,"comment_id":68617204,"body_markdown":"I cant remenber to be honest its been almost 2 years but i think so","body":"I cant remenber to be honest its been almost 2 years but i think so"}],"answers":[{"tags":[],"owner":{"account_id":5363916,"reputation":322,"user_id":4274419,"accept_rate":100,"display_name":"Paulo Botelho"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1420224336,"creation_date":1420224336,"answer_id":27746989,"question_id":27706082,"body_markdown":"UPDATE: Maven doesnt actually hangs, the build is completed successfully.But the runner doesnt communicate to the gitlab ci saying it made its work sucessfully due to a response error: 500.\r\n\r\n    &gt;     2015-01-02 18:37:54 +0000 | Submitting build 439 to coordinator...response error: 500\r\n    &gt;     2015-01-02 18:38:02 +0000 | Submitting build 439 to coordinator...response error: 500\r\n    &gt;     2015-01-02 18:38:06 +0000 | Completed build 439, success.\r\n    &gt;     2015-01-02 18:38:06 +0000 | Submitting build 439 to coordinator...response error: 500\r\n    &gt;     2015-01-02 18:38:15 +0000 | Submitting build 439 to coordinator...response error: 500\r\n    &gt;     2015-01-02 18:38:18 +0000 | Completed build 439, success.\r\n    &gt;     2015-01-02 18:38:18 +0000 | Submitting build 439 to coordinator...response error: 500\r\n    &gt;     2015-01-02 18:38:27 +0000 | Submitting build 439 to coordinator...response error: 500\r\n    &gt;     2015-01-02 18:38:30 +0000 | Completed build 439, success.\r\n    &gt;     2015-01-02 18:38:30 +0000 | Submitting build 439 to coordinator...response error: 500\r\n    &gt;     2015-01-02 18:38:39 +0000 | Submitting build 439 to coordinator...response error: 500\r\n\r\n\r\n","title":"Maven Hangs Downloading Inside a Docker Container","body":"<p>UPDATE: Maven doesnt actually hangs, the build is completed successfully.But the runner doesnt communicate to the gitlab ci saying it made its work sucessfully due to a response error: 500.</p>\n\n<pre><code>&gt;     2015-01-02 18:37:54 +0000 | Submitting build 439 to coordinator...response error: 500\n&gt;     2015-01-02 18:38:02 +0000 | Submitting build 439 to coordinator...response error: 500\n&gt;     2015-01-02 18:38:06 +0000 | Completed build 439, success.\n&gt;     2015-01-02 18:38:06 +0000 | Submitting build 439 to coordinator...response error: 500\n&gt;     2015-01-02 18:38:15 +0000 | Submitting build 439 to coordinator...response error: 500\n&gt;     2015-01-02 18:38:18 +0000 | Completed build 439, success.\n&gt;     2015-01-02 18:38:18 +0000 | Submitting build 439 to coordinator...response error: 500\n&gt;     2015-01-02 18:38:27 +0000 | Submitting build 439 to coordinator...response error: 500\n&gt;     2015-01-02 18:38:30 +0000 | Completed build 439, success.\n&gt;     2015-01-02 18:38:30 +0000 | Submitting build 439 to coordinator...response error: 500\n&gt;     2015-01-02 18:38:39 +0000 | Submitting build 439 to coordinator...response error: 500\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5612953,"reputation":2976,"user_id":4445175,"accept_rate":33,"display_name":"Wlad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625595620,"creation_date":1625595620,"answer_id":68275609,"question_id":27706082,"body_markdown":"&lt;h2&gt; Make sure your VPN is OFF ;-) &lt;/h2&gt; \r\n\r\nI came here googling the same issue. After reading the comments below OP\r\n&gt; It seems some network permission/firewall problem.\r\n\r\nI remembered that I was using a VPN connection. Turning off VPN solved my issue.\r\n\r\n","title":"Maven Hangs Downloading Inside a Docker Container","body":"<h2> Make sure your VPN is OFF ;-) </h2> \n<p>I came here googling the same issue. After reading the comments below OP</p>\n<blockquote>\n<p>It seems some network permission/firewall problem.</p>\n</blockquote>\n<p>I remembered that I was using a VPN connection. Turning off VPN solved my issue.</p>\n"},{"tags":[],"owner":{"account_id":4673460,"reputation":2327,"user_id":3784642,"accept_rate":0,"display_name":"Bernard Hauzeur"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678439807,"creation_date":1678439807,"answer_id":75694208,"question_id":27706082,"body_markdown":"encountered the case with Docker-in-docker running container builds in gitlab runners (that in addition ran in an OpenShift cluster!).\r\n\r\nThe simple `docker build -t $REPO_IMAGE_TAG .` hangs indefinitely on the very first maven download, although working like a breeze in my IDE. \r\n\r\nIf I connect as a terminal to the hanging gitlab runner instance, I can execute for instance a `wget &lt;url-from-logs-over-which-maven-hangs&gt;` fine. Henceforth, there&#39;s no core networking or DNS issue. (tip: check this by running &#39;wget&#39; in the gitlab-ci script if you can&#39;t connect as a terminal).\r\n\r\nUpon such condition, try in your gitlab-ci scripts:\r\n\r\n`docker build --network host -t $REPO_IMAGE_TAG .` \r\n\r\nThe extra option tells docker to use the built-in &#39;host&#39; network driver (i.e. access the gitlab-runner networking stack directly) in place of the default &#39;bridge&#39; mode.","title":"Maven Hangs Downloading Inside a Docker Container","body":"<p>encountered the case with Docker-in-docker running container builds in gitlab runners (that in addition ran in an OpenShift cluster!).</p>\n<p>The simple <code>docker build -t $REPO_IMAGE_TAG .</code> hangs indefinitely on the very first maven download, although working like a breeze in my IDE.</p>\n<p>If I connect as a terminal to the hanging gitlab runner instance, I can execute for instance a <code>wget &lt;url-from-logs-over-which-maven-hangs&gt;</code> fine. Henceforth, there's no core networking or DNS issue. (tip: check this by running 'wget' in the gitlab-ci script if you can't connect as a terminal).</p>\n<p>Upon such condition, try in your gitlab-ci scripts:</p>\n<p><code>docker build --network host -t $REPO_IMAGE_TAG .</code></p>\n<p>The extra option tells docker to use the built-in 'host' network driver (i.e. access the gitlab-runner networking stack directly) in place of the default 'bridge' mode.</p>\n"}],"owner":{"account_id":5363916,"reputation":322,"user_id":4274419,"accept_rate":100,"display_name":"Paulo Botelho"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3400,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":27746989,"answer_count":3,"score":3,"last_activity_date":1678439807,"creation_date":1419944784,"question_id":27706082,"body_markdown":"I have a gitlab with gitlab ci and a runner all running fine in a CoreOs Machine.\r\n\r\nAll 3 services are running using the following dockerfiles service files and  build script:\r\n\r\nBuild Script:\r\n\r\n    git submodule update --init\r\n    \r\n    ls -la\r\n    \r\n    mvn install\r\n\r\nCI service:\r\n\r\n        [Unit]\r\n        Description=CI\r\n        \r\n        # Requirements\r\n        Requires=docker.service\r\n        Requires=db.service\r\n        Requires=gitlab.service\r\n        Requires=redis.service\r\n        \r\n        \r\n        # Dependency ordering\r\n        After=docker.service\r\n        After=db.service\r\n        After=gitlab.service\r\n        After=redis.service\r\n        \r\n        [Service]\r\n        User=core\r\n        \r\n        # Let the process take awhile to start up (for first run Docker containers)\r\n        TimeoutStartSec=0\r\n        \r\n        # Get CoreOS environmental variables\r\n        EnvironmentFile=/etc/environment\r\n        \r\n        # Pre-start and Start\r\n        ## Directives with &quot;=-&quot; are allowed to fail without consequence\r\n        KillMode=none\r\n        Restart=always\r\n        RestartSec=2\r\n        \r\n        ExecStartPre=-/usr/bin/docker kill ci\r\n        ExecStartPre=-/usr/bin/docker rm ci\r\n        ExecStartPre=/usr/bin/docker pull sameersbn/gitlab-ci:5.2.0\r\n        ExecStart=/usr/bin/docker run --name ci \\\r\n         -e &#39;DB_TYPE=mysql&#39; -e &#39;DB_HOST=${COREOS_PRIVATE_IPV4}&#39; -e &#39;DB_NAME=***&#39; -e &#39;DB_USER=***&#39; -e &#39;DB_PASS=********&#39;\\\r\n         -e &#39;REDIS_HOST=${COREOS_PRIVATE_IPV4}&#39; -e &#39;REDIS_PORT=6379&#39;\\\r\n         -e &#39;GITLAB_URL=http://${COREOS_PRIVATE_IPV4}:8081/&#39;\\\r\n         -e &#39;GITLAB_CI_HOST=${COREOS_PRIVATE_IPV4}&#39;\\\r\n         -e &#39;GITLAB_CI_PORT=8080&#39;\\\r\n         -e &#39;GITLAB_CI_HTTPS=true&#39;\\\r\n         -e &#39;GITLAB_CI_EMAIL=*****************&#39;\\\r\n         -e &#39;SMTP_USER=**********&#39; -e &#39;SMTP_PASS=**********&#39;\\\r\n         -p 8080:80 \\\r\n         sameersbn/gitlab-ci:5.2.0\r\n        \r\n        # Stop\r\n        ExecStop=/usr/bin/docker stop ci\r\n    \r\nCI-runner service:\r\n    \r\n            [Unit]\r\n            Description=CI Runner Maven &amp; Dart\r\n            \r\n            # Requirements\r\n            Requires=docker.service\r\n            Requires=ci.service\r\n            Requires=db.service\r\n            Requires=gitlab.service\r\n            Requires=redis.service\r\n            \r\n            # Dependency ordering\r\n            After=docker.service\r\n            After=ci.service\r\n            After=db.service\r\n            After=gitlab.service\r\n            After=redis.service\r\n            \r\n            \r\n            [Service]\r\n            User=core\r\n            \r\n            # Let the process take awhile to start up (for first run Docker containers)\r\n            TimeoutStartSec=0\r\n            \r\n            RemainAfterExit=yes\r\n            \r\n            # Get CoreOS environmental variables\r\n            EnvironmentFile=/etc/environment\r\n            \r\n            #Pre-start and Start\r\n            ## Directives with &quot;=-&quot; are allowed to fail without consequence\r\n            \r\n            ExecStartPre=-/usr/bin/docker kill ci-runner-maven-dart\r\n            ExecStartPre=-/usr/bin/docker rm ci-runner-maven-dart\r\n            ExecStartPre=/usr/bin/docker pull registry.globaleda.pt/globaleda/ci-runner-maven-dart:latest\r\n            ExecStart=/usr/bin/docker run --name ci-runner-maven-dart -d \\\r\n                -v /data/ci-runner-maven-dart:/home/gitlab_ci_runner/data \\\r\n                registry.globaleda.pt/globaleda/ci-runner-maven-dart:latest\r\n            \r\n            # Stop\r\n            ExecStop=/usr/bin/docker stop ci-runner-maven-dart\r\n    \r\n    \r\nCi runner dockerfile:\r\n\r\n    \r\n    FROM lemonbar/gitlab-runner-jdk-maven:1.0\r\n    MAINTAINER jrofurtado@gmail.com\r\n    \r\n    RUN apt-get update\r\n    RUN apt-get install curl -y\r\n    \r\n    # Install dartIn the dockerfile i added ENV MAVEN_OPTS -Djava.net.preferIPv4Stack=true\r\n\r\n    RUN apt-get install apt-transport-https -y\r\n    RUN sh -c &#39;curl https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -&#39;\r\n    RUN sh -c &#39;curl https://storage.googleapis.com/download.dartlang.org/linux/debian/dart_stable.list &gt; /etc/apt/sources.list.d/dart_stable.list&#39;\r\n    RUN apt-get update\r\n    RUN apt-get install dart -y\r\n    ENV DART_HOME /usr/lib/dart\r\n    \r\n    RUN apt-get -y install ca-certificates curl\r\n    ADD globaleda.crt /usr/local/share/ca-certificates/\r\n    RUN update-ca-certificates\r\n    RUN git config --global http.sslverify false \r\n    RUN apt-get update\r\n    RUN curl -sSL https://get.docker.com/ubuntu/ | sudo sh\r\n    ENV DOCKER_HOST tcp://*************\r\n    ADD .dockercfg /\r\n    RUN rm -f /app/init\r\n    ADD init /app/\r\n    RUN chmod 777 /app/init\r\n\r\nCi dockerfile is unmodified version of sameersbn/gitlab-ci:5.2.0.\r\n\r\nwhen i compile a maven project (with mvn install) it starts to download the required artifacts and the download hangs, if i retry the download over and over again it manages to fully download problem is i need to download all at once without interruptions (it manages to continue cause im storing all the downloads on a mapped volume)\r\n\r\nObservations:\r\n\r\n-I deployed the Ci runner container on my local machine instead of the server and linked to the gitlab ci and the problem persists.\r\n\r\n-If you go inside the container (with docker-enter script  or docker exec container bash) and run mvn install on a terminal it downloads everything as it should, although downloading it within the build it hangs.\r\n\r\n-i tried using Setting MAVEN_OPTS to -Djava.net.preferIPv4Stack=true on dockerfile of CI-Runner,i also tried to include it in the build script of CI-Runner to force this variable:\r\n  \r\n\r\n - In the dockerfile i added ENV MAVEN_OPTS -Djava.net.preferIPv4Stack=true\r\n - In the build script i added MAVEN_OPTS=-Djava.net.preferIPv4Stack=true\r\n\r\n&gt; -Running in debug mode (-e) or reading the logs the only information i have is :Download Timeout","title":"Maven Hangs Downloading Inside a Docker Container","body":"<p>I have a gitlab with gitlab ci and a runner all running fine in a CoreOs Machine.</p>\n\n<p>All 3 services are running using the following dockerfiles service files and  build script:</p>\n\n<p>Build Script:</p>\n\n<pre><code>git submodule update --init\n\nls -la\n\nmvn install\n</code></pre>\n\n<p>CI service:</p>\n\n<pre><code>    [Unit]\n    Description=CI\n\n    # Requirements\n    Requires=docker.service\n    Requires=db.service\n    Requires=gitlab.service\n    Requires=redis.service\n\n\n    # Dependency ordering\n    After=docker.service\n    After=db.service\n    After=gitlab.service\n    After=redis.service\n\n    [Service]\n    User=core\n\n    # Let the process take awhile to start up (for first run Docker containers)\n    TimeoutStartSec=0\n\n    # Get CoreOS environmental variables\n    EnvironmentFile=/etc/environment\n\n    # Pre-start and Start\n    ## Directives with \"=-\" are allowed to fail without consequence\n    KillMode=none\n    Restart=always\n    RestartSec=2\n\n    ExecStartPre=-/usr/bin/docker kill ci\n    ExecStartPre=-/usr/bin/docker rm ci\n    ExecStartPre=/usr/bin/docker pull sameersbn/gitlab-ci:5.2.0\n    ExecStart=/usr/bin/docker run --name ci \\\n     -e 'DB_TYPE=mysql' -e 'DB_HOST=${COREOS_PRIVATE_IPV4}' -e 'DB_NAME=***' -e 'DB_USER=***' -e 'DB_PASS=********'\\\n     -e 'REDIS_HOST=${COREOS_PRIVATE_IPV4}' -e 'REDIS_PORT=6379'\\\n     -e 'GITLAB_URL=http://${COREOS_PRIVATE_IPV4}:8081/'\\\n     -e 'GITLAB_CI_HOST=${COREOS_PRIVATE_IPV4}'\\\n     -e 'GITLAB_CI_PORT=8080'\\\n     -e 'GITLAB_CI_HTTPS=true'\\\n     -e 'GITLAB_CI_EMAIL=*****************'\\\n     -e 'SMTP_USER=**********' -e 'SMTP_PASS=**********'\\\n     -p 8080:80 \\\n     sameersbn/gitlab-ci:5.2.0\n\n    # Stop\n    ExecStop=/usr/bin/docker stop ci\n</code></pre>\n\n<p>CI-runner service:</p>\n\n<pre><code>        [Unit]\n        Description=CI Runner Maven &amp; Dart\n\n        # Requirements\n        Requires=docker.service\n        Requires=ci.service\n        Requires=db.service\n        Requires=gitlab.service\n        Requires=redis.service\n\n        # Dependency ordering\n        After=docker.service\n        After=ci.service\n        After=db.service\n        After=gitlab.service\n        After=redis.service\n\n\n        [Service]\n        User=core\n\n        # Let the process take awhile to start up (for first run Docker containers)\n        TimeoutStartSec=0\n\n        RemainAfterExit=yes\n\n        # Get CoreOS environmental variables\n        EnvironmentFile=/etc/environment\n\n        #Pre-start and Start\n        ## Directives with \"=-\" are allowed to fail without consequence\n\n        ExecStartPre=-/usr/bin/docker kill ci-runner-maven-dart\n        ExecStartPre=-/usr/bin/docker rm ci-runner-maven-dart\n        ExecStartPre=/usr/bin/docker pull registry.globaleda.pt/globaleda/ci-runner-maven-dart:latest\n        ExecStart=/usr/bin/docker run --name ci-runner-maven-dart -d \\\n            -v /data/ci-runner-maven-dart:/home/gitlab_ci_runner/data \\\n            registry.globaleda.pt/globaleda/ci-runner-maven-dart:latest\n\n        # Stop\n        ExecStop=/usr/bin/docker stop ci-runner-maven-dart\n</code></pre>\n\n<p>Ci runner dockerfile:</p>\n\n<pre><code>FROM lemonbar/gitlab-runner-jdk-maven:1.0\nMAINTAINER jrofurtado@gmail.com\n\nRUN apt-get update\nRUN apt-get install curl -y\n\n# Install dartIn the dockerfile i added ENV MAVEN_OPTS -Djava.net.preferIPv4Stack=true\n\nRUN apt-get install apt-transport-https -y\nRUN sh -c 'curl https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -'\nRUN sh -c 'curl https://storage.googleapis.com/download.dartlang.org/linux/debian/dart_stable.list &gt; /etc/apt/sources.list.d/dart_stable.list'\nRUN apt-get update\nRUN apt-get install dart -y\nENV DART_HOME /usr/lib/dart\n\nRUN apt-get -y install ca-certificates curl\nADD globaleda.crt /usr/local/share/ca-certificates/\nRUN update-ca-certificates\nRUN git config --global http.sslverify false \nRUN apt-get update\nRUN curl -sSL https://get.docker.com/ubuntu/ | sudo sh\nENV DOCKER_HOST tcp://*************\nADD .dockercfg /\nRUN rm -f /app/init\nADD init /app/\nRUN chmod 777 /app/init\n</code></pre>\n\n<p>Ci dockerfile is unmodified version of sameersbn/gitlab-ci:5.2.0.</p>\n\n<p>when i compile a maven project (with mvn install) it starts to download the required artifacts and the download hangs, if i retry the download over and over again it manages to fully download problem is i need to download all at once without interruptions (it manages to continue cause im storing all the downloads on a mapped volume)</p>\n\n<p>Observations:</p>\n\n<p>-I deployed the Ci runner container on my local machine instead of the server and linked to the gitlab ci and the problem persists.</p>\n\n<p>-If you go inside the container (with docker-enter script  or docker exec container bash) and run mvn install on a terminal it downloads everything as it should, although downloading it within the build it hangs.</p>\n\n<p>-i tried using Setting MAVEN_OPTS to -Djava.net.preferIPv4Stack=true on dockerfile of CI-Runner,i also tried to include it in the build script of CI-Runner to force this variable:</p>\n\n<ul>\n<li>In the dockerfile i added ENV MAVEN_OPTS -Djava.net.preferIPv4Stack=true</li>\n<li>In the build script i added MAVEN_OPTS=-Djava.net.preferIPv4Stack=true</li>\n</ul>\n\n<blockquote>\n  <p>-Running in debug mode (-e) or reading the logs the only information i have is :Download Timeout</p>\n</blockquote>\n"},{"tags":["java","spring","spring-boot","jsp"],"answers":[{"comments":[{"owner":{"account_id":4906212,"reputation":2720,"user_id":3952885,"accept_rate":0,"display_name":"Amir Dora."},"score":1,"creation_date":1613414154,"post_id":66211096,"comment_id":117062710,"body_markdown":"Please consider adding some explanation. Often &quot;just code&quot; answers aren&#39;t useful, or at best they could be a lot more useful with an explanation.","body":"Please consider adding some explanation. Often &quot;just code&quot; answers aren&#39;t useful, or at best they could be a lot more useful with an explanation."},{"owner":{"account_id":1085233,"reputation":730,"user_id":1081088,"accept_rate":68,"display_name":"spacing"},"score":0,"creation_date":1613559642,"post_id":66211096,"comment_id":117109734,"body_markdown":"Doesn&#39;t work either way. Ive tried both. Still displays `JSP file [/WEB-INF/views/index.jsp] not found`","body":"Doesn&#39;t work either way. Ive tried both. Still displays <code>JSP file [&#47;WEB-INF&#47;views&#47;index.jsp] not found</code>"}],"tags":[],"owner":{"account_id":15608990,"reputation":632,"user_id":11260972,"display_name":"Vladimir"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613404076,"creation_date":1613404076,"answer_id":66211096,"question_id":66206674,"body_markdown":"\r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        @GetMapping(value = &quot;/&quot;)  &lt;&lt;&lt; Try  @RequestMapping(&quot;/&quot;)\r\n        public String homePage() {\r\n            return &quot;index&quot;;\r\n        }\r\n    }","title":".jsp file not found in Spring Boot webapp","body":"<pre><code>@Controller\npublic class HomeController {\n\n    @GetMapping(value = &quot;/&quot;)  &lt;&lt;&lt; Try  @RequestMapping(&quot;/&quot;)\n    public String homePage() {\n        return &quot;index&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1085233,"reputation":730,"user_id":1081088,"accept_rate":68,"display_name":"spacing"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1613582409,"creation_date":1613582409,"answer_id":66246935,"question_id":66206674,"body_markdown":"Ok so for whoever has the same issue. I have solved it.\r\n\r\nMy project structure was as follow \r\n\r\n    main-directory           &lt;---- Content from original repo (not a java project)\r\n    --java-project-directory &lt;----- JAVA project created here\r\n    ----src\r\n    ------main\r\n    --------webapp\r\n    ----------WEB-INF\r\n    ------------view\r\n    --------------index.jsp\r\n\r\nI was opening the project with my IDE directly on the `main-directory`, I could still run the project fine and it compiled without errors, however this caused the HTML server or JSP to mess up the pathing because the root directory was different. So the `.jsp` files (which were correctly set up) were never found.\r\n\r\nBy opening the project on my IDE directly from `java-project-directory` I was able to get .jsp and all the pages working correctly. Presumably, because it assumed the correct path.","title":".jsp file not found in Spring Boot webapp","body":"<p>Ok so for whoever has the same issue. I have solved it.</p>\n<p>My project structure was as follow</p>\n<pre><code>main-directory           &lt;---- Content from original repo (not a java project)\n--java-project-directory &lt;----- JAVA project created here\n----src\n------main\n--------webapp\n----------WEB-INF\n------------view\n--------------index.jsp\n</code></pre>\n<p>I was opening the project with my IDE directly on the <code>main-directory</code>, I could still run the project fine and it compiled without errors, however this caused the HTML server or JSP to mess up the pathing because the root directory was different. So the <code>.jsp</code> files (which were correctly set up) were never found.</p>\n<p>By opening the project on my IDE directly from <code>java-project-directory</code> I was able to get .jsp and all the pages working correctly. Presumably, because it assumed the correct path.</p>\n"},{"tags":[],"owner":{"account_id":25711096,"reputation":11,"user_id":19522280,"display_name":"pythonpg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657488138,"creation_date":1657488138,"answer_id":72931989,"question_id":66206674,"body_markdown":"I had the same error and applied many answers (of course one by one), including the answers posted on this page. None of them brought resolution to the 404 Not Found (White Label error).\r\nFinally, I identified that my package naming parts (the parts separated by the intervening . (period) had inconsistency (com.msoftgp.**springboot** and com.msoftgp.**springbootmvc**.controller). Once I made them to be same and ran the application and sent a request, the response came correctly with the home page showing up on the browser. All my carelessness not to pay attention to stick with consistent package structure.","title":".jsp file not found in Spring Boot webapp","body":"<p>I had the same error and applied many answers (of course one by one), including the answers posted on this page. None of them brought resolution to the 404 Not Found (White Label error).\nFinally, I identified that my package naming parts (the parts separated by the intervening . (period) had inconsistency (com.msoftgp.<strong>springboot</strong> and com.msoftgp.<strong>springbootmvc</strong>.controller). Once I made them to be same and ran the application and sent a request, the response came correctly with the home page showing up on the browser. All my carelessness not to pay attention to stick with consistent package structure.</p>\n"},{"tags":[],"owner":{"account_id":19499025,"reputation":131,"user_id":14265581,"display_name":"Zrn-dev"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678439400,"creation_date":1678427690,"answer_id":75692674,"question_id":66206674,"body_markdown":"In my case, I did a typo when I was creating **&quot;webapp&quot;** folder","title":".jsp file not found in Spring Boot webapp","body":"<p>In my case, I did a typo when I was creating <strong>&quot;webapp&quot;</strong> folder</p>\n"}],"owner":{"account_id":1085233,"reputation":730,"user_id":1081088,"accept_rate":68,"display_name":"spacing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2521,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":66246935,"answer_count":4,"score":1,"last_activity_date":1678439400,"creation_date":1613386310,"question_id":66206674,"body_markdown":"So, yesterday I was working on deploying a webapp in spring boot with JSP and everything was working fine, then I had to pull some commits from remote and it stopped working and displaying the error below when accessing http://localhost:8080/\r\n\r\n&gt; Whitelabel Error Page This application has no explicit mapping for\r\n&gt; /error, so you are seeing this as a fallback.\r\n&gt; \r\n&gt; Mon Feb 15 10:35:53 WET 2021 There was an unexpected error (type=Not\r\n&gt; Found, status=404). JSP file [/WEB-INF/views/index.jsp] not found\r\n\r\nI didn&#39;t change any setting and I don&#39;t know what is happening, everything appears to be in the correct directory and with the correct settings\r\n\r\nHomeController at `\\src\\main\\java\\projectName\\Controllers`\r\n\r\n```\r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        @GetMapping(value = &quot;/&quot;)\r\n        public String homePage() {\r\n            return &quot;index&quot;;\r\n        }\r\n    }\r\n```\r\n\r\n`application.properties`\r\n\r\n```\r\nspring.mvc.view.suffix=.jsp\r\nspring.mvc.view.prefix=/WEB-INF/views/\r\n ```\r\n\r\nindex.jsp at `\\src\\main\\webapp\\WEB-INF\\views\\`\r\n\r\nI have searched everything I can online, but it leads me always to the same pointers, all my directories appear to be correct and this has worked before with these settings so I don&#39;t know why it suddenly stopped working\r\n\r\n\r\n","title":".jsp file not found in Spring Boot webapp","body":"<p>So, yesterday I was working on deploying a webapp in spring boot with JSP and everything was working fine, then I had to pull some commits from remote and it stopped working and displaying the error below when accessing http://localhost:8080/</p>\n<blockquote>\n<p>Whitelabel Error Page This application has no explicit mapping for\n/error, so you are seeing this as a fallback.</p>\n<p>Mon Feb 15 10:35:53 WET 2021 There was an unexpected error (type=Not\nFound, status=404). JSP file [/WEB-INF/views/index.jsp] not found</p>\n</blockquote>\n<p>I didn't change any setting and I don't know what is happening, everything appears to be in the correct directory and with the correct settings</p>\n<p>HomeController at <code>\\src\\main\\java\\projectName\\Controllers</code></p>\n<pre><code>    @Controller\n    public class HomeController {\n    \n        @GetMapping(value = &quot;/&quot;)\n        public String homePage() {\n            return &quot;index&quot;;\n        }\n    }\n</code></pre>\n<p><code>application.properties</code></p>\n<pre><code>spring.mvc.view.suffix=.jsp\nspring.mvc.view.prefix=/WEB-INF/views/\n</code></pre>\n<p>index.jsp at <code>\\src\\main\\webapp\\WEB-INF\\views\\</code></p>\n<p>I have searched everything I can online, but it leads me always to the same pointers, all my directories appear to be correct and this has worked before with these settings so I don't know why it suddenly stopped working</p>\n"},{"tags":["java","android","firebase","firebase-authentication"],"comments":[{"owner":{"account_id":5019871,"reputation":342,"user_id":4033623,"accept_rate":14,"display_name":"gStephin"},"score":0,"creation_date":1678447382,"post_id":75694104,"comment_id":133538550,"body_markdown":"Did you add the release SHA1 Key in the firebase console ?","body":"Did you add the release SHA1 Key in the firebase console ?"},{"owner":{"account_id":25871104,"reputation":51,"user_id":19601969,"display_name":"phanz"},"score":0,"creation_date":1678699132,"post_id":75694104,"comment_id":133577305,"body_markdown":"Of course, I added the release SHA1key in the firebase console.\nI also added Google Publishing app signing SHA1key in Google Developer console.\nBut still not working.","body":"Of course, I added the release SHA1key in the firebase console. I also added Google Publishing app signing SHA1key in Google Developer console. But still not working."},{"owner":{"account_id":7742408,"reputation":11085,"user_id":5861618,"accept_rate":80,"display_name":"Ros&#225;rio Pereira Fernandes"},"score":0,"creation_date":1680710739,"post_id":75694104,"comment_id":133945511,"body_markdown":"We have recently released [Firebase Auth 21.2.0](https://firebase.google.com/support/release-notes/android#auth_v21-2-0) which adds support for Play Integrity in phone auth. Can you test it with that version?","body":"We have recently released <a href=\"https://firebase.google.com/support/release-notes/android#auth_v21-2-0\" rel=\"nofollow noreferrer\">Firebase Auth 21.2.0</a> which adds support for Play Integrity in phone auth. Can you test it with that version?"},{"owner":{"account_id":25871104,"reputation":51,"user_id":19601969,"display_name":"phanz"},"score":0,"creation_date":1681117301,"post_id":75694104,"comment_id":134000678,"body_markdown":"I tried with the latest Firebase Auth version 21.2.0.\nThis time, I got the below issue:\n&quot;this app is not authorized to use firebase authentication. please verify that the correct package name and sha-1 are configured in the firebase console&quot;\nI already verified the exact package name and sha-1 key in the firebase console.\nWhy is that?","body":"I tried with the latest Firebase Auth version 21.2.0. This time, I got the below issue: &quot;this app is not authorized to use firebase authentication. please verify that the correct package name and sha-1 are configured in the firebase console&quot; I already verified the exact package name and sha-1 key in the firebase console. Why is that?"}],"owner":{"account_id":25871104,"reputation":51,"user_id":19601969,"display_name":"phanz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678439139,"creation_date":1678439139,"question_id":75694104,"body_markdown":"Recently I&#39;ve built an android app based on Firebase Phone Authentication.\r\nAfter publishing to Google Play, it caused error like below.\r\n&quot;This request is missing a valid app identifier, meaning that neither safetyNet checks nor reCAPTCHA checks succeeded&quot;\r\nWhen I didn&#39;t restrict app singing in google developer console, it works fine.\r\n\r\nThere are many questions and answers about this problem on stack overflow and I tried all cases.\r\neg. https://stackoverflow.com/questions/65490555/this-request-is-missing-a-valid-app-identifier-meaning-that-neither-safetynet-c\r\nBut it&#39;s still causing the same issue.\r\nI found out safetyNet is deprecated, instead using google play integrity since last month.\r\nBut I couldn&#39;t find any example code for phone auth using google play integrity.\r\nDoes anybody resolve this already?","title":"Why can&#39;t I success in Firebase Phone Auth in Android","body":"<p>Recently I've built an android app based on Firebase Phone Authentication.\nAfter publishing to Google Play, it caused error like below.\n&quot;This request is missing a valid app identifier, meaning that neither safetyNet checks nor reCAPTCHA checks succeeded&quot;\nWhen I didn't restrict app singing in google developer console, it works fine.</p>\n<p>There are many questions and answers about this problem on stack overflow and I tried all cases.\neg. <a href=\"https://stackoverflow.com/questions/65490555/this-request-is-missing-a-valid-app-identifier-meaning-that-neither-safetynet-c\">This request is missing a valid app identifier, meaning that neither safetyNet checks nor reCAPTCHA checks succeeded</a>\nBut it's still causing the same issue.\nI found out safetyNet is deprecated, instead using google play integrity since last month.\nBut I couldn't find any example code for phone auth using google play integrity.\nDoes anybody resolve this already?</p>\n"},{"tags":["java","android","kotlin","sockets"],"answers":[{"comments":[{"owner":{"account_id":25062339,"reputation":3,"user_id":18917065,"display_name":"Ale"},"score":0,"creation_date":1678488466,"post_id":75694093,"comment_id":133548902,"body_markdown":"just changing that linea? like: &#39;printWriter.println(&quot;Hello, Kotlin!&quot; + &quot;\\n&quot;);&#39; it didn&#39;t workv :(","body":"just changing that linea? like: &#39;printWriter.println(&quot;Hello, Kotlin!&quot; + &quot;\\n&quot;);&#39; it didn&#39;t workv :("},{"owner":{"account_id":19682641,"reputation":80,"user_id":14409408,"display_name":"Lookyus"},"score":0,"creation_date":1678608666,"post_id":75694093,"comment_id":133563861,"body_markdown":"Yeah, I though that’s the problem. Sorry!","body":"Yeah, I though that’s the problem. Sorry!"}],"tags":[],"owner":{"account_id":19682641,"reputation":80,"user_id":14409408,"display_name":"Lookyus"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678439097,"creation_date":1678439097,"answer_id":75694093,"question_id":75693266,"body_markdown":"You need to send newline character at the end of your message from your Java socket. Just add &quot;\\n&quot; at the end of it.","title":"How to recibe message from java socket to kotlin client?","body":"<p>You need to send newline character at the end of your message from your Java socket. Just add &quot;\\n&quot; at the end of it.</p>\n"}],"owner":{"account_id":25062339,"reputation":3,"user_id":18917065,"display_name":"Ale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678439097,"creation_date":1678433106,"question_id":75693266,"body_markdown":"I have this socket in Java that has to receive and send messages to a Kotlin client. Java successfully receives the message from Kotlin, but when analyzing and transforming the message, I have to return it to Kotlin and save it in an .xml file. I am unable to return the message and I don&#39;t understand my error. please help.\r\n\r\nI&#39;m using android studio and java netbeans\r\n\r\nKotlin: sends message thru a button -&gt; done\r\nJava: successfully receives the message and analyzes it. -&gt; done\r\njava: If the message has errors, it sends a message with these errors. -&gt; NO (with this errors I mean in the syntax, no java errors)\r\nKotlin: It receives the errors and saves them in an XML file. -&gt; NO\r\n\r\nI&#39;m sending this &#39;errors&#39; in a string format\r\n\r\njava socket:\r\n\r\n```\r\n    public static void main(String[] args) throws IOException, JSONException {\r\n        sjf.setVisible(true);\r\n\r\n        logger.info(&quot;Starting server...&quot;);\r\n        sjf.agregarLog(&quot;Iniciando servidor&quot;);\r\n\r\n        ServerSocket serverSocket = new ServerSocket(8080);\r\n        logger.info(&quot;Server started on port {}&quot;, serverSocket.getLocalPort());\r\n\r\n        while (true) {\r\n            Socket clientSocket = serverSocket.accept();\r\n            logger.info(&quot;Accepted connection from {}&quot;, clientSocket.getInetAddress().getHostAddress());\r\n            sjf.agregarLog(&quot;Se acepto conexion&quot;);\r\n\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n\r\n            StringBuilder messageBuilder = new StringBuilder(); // Usamos un StringBuilder para concatenar todas las\r\n            // l&#237;neas\r\n            String line;\r\n            while ((line = reader.readLine()) != null) { // Leer todas las l&#237;neas disponibles\r\n                messageBuilder.append(line);\r\n                messageBuilder.append(&quot;\\n&quot;); //\r\n            }\r\n            String message = messageBuilder.toString(); // Convertir el StringBuilder a una cadena\r\n\r\n            logger.info(&quot;Received message from {}: {}&quot;, clientSocket.getInetAddress().getHostAddress(), message);\r\n            peti = message;\r\n            sjf.agregarLog(peti);\r\n\r\n            // write json file\r\n            FileWriter fileWriter = new FileWriter(\r\n                    &quot;mypath/archivo.json&quot;);\r\n\r\n            fileWriter.write(message);\r\n            fileWriter.close();\r\n            // analizar\r\n            aux = false;\r\n            lista = new Lista(); // reiniciar lista de errores\r\n            analizarMensaje();\r\n\r\n//send errors feedback !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nOutputStream outputStream = socket.getOutputStream();\r\n            PrintWriter printWriter = new PrintWriter(outputStream, true);\r\n            printWriter.println(&quot;Hello, Kotlin!&quot;);\r\n            printWriter.close();\r\n\r\n        }\r\n    \r\n```\r\n\r\nand kotlin :\r\n\r\n```\r\nprivate inner class SendMessageTask : AsyncTask&lt;String, Void, Boolean&gt;() {\r\n\r\n    override fun doInBackground(vararg params: String): Boolean {\r\n        try {\r\n            val socket = Socket(&quot;192.168.0.36&quot;, 8080)\r\n            val writer = PrintWriter(socket.getOutputStream(), true)\r\n            for (mensaje in params) { // Iterar sobre todas las l&#237;neas recibidas\r\n                writer.println(mensaje) // Enviar cada l&#237;nea al socket\r\n            }\r\n\r\n            writer.close()\r\n            \r\n\r\n            // Receive the message from the Java socket and save it to a text file\r\n            val inputStream = socket.getInputStream()\r\n            val bufferedReader = BufferedReader(InputStreamReader(inputStream))\r\n            val message = bufferedReader.readLine()\r\n            bufferedReader.close()\r\n\r\n            val file = File(&quot;received_message.txt&quot;)\r\n            val printWriter = PrintWriter(file)\r\n            printWriter.println(message)\r\n            printWriter.close()\r\n\r\n            println(&quot;Received message saved to file: ${file.absolutePath}&quot;)\r\n            socket.close()\r\n            return true\r\n        } catch (e: Exception) {\r\n            e.printStackTrace()\r\n            return false\r\n        }\r\n    }\r\n\r\n    override fun onPostExecute(result: Boolean) {\r\n        if (!result) {\r\n            Toast.makeText(context, &quot;Error al enviar el mensaje&quot;, Toast.LENGTH_SHORT).show()\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"How to recibe message from java socket to kotlin client?","body":"<p>I have this socket in Java that has to receive and send messages to a Kotlin client. Java successfully receives the message from Kotlin, but when analyzing and transforming the message, I have to return it to Kotlin and save it in an .xml file. I am unable to return the message and I don't understand my error. please help.</p>\n<p>I'm using android studio and java netbeans</p>\n<p>Kotlin: sends message thru a button -&gt; done\nJava: successfully receives the message and analyzes it. -&gt; done\njava: If the message has errors, it sends a message with these errors. -&gt; NO (with this errors I mean in the syntax, no java errors)\nKotlin: It receives the errors and saves them in an XML file. -&gt; NO</p>\n<p>I'm sending this 'errors' in a string format</p>\n<p>java socket:</p>\n<pre><code>    public static void main(String[] args) throws IOException, JSONException {\n        sjf.setVisible(true);\n\n        logger.info(&quot;Starting server...&quot;);\n        sjf.agregarLog(&quot;Iniciando servidor&quot;);\n\n        ServerSocket serverSocket = new ServerSocket(8080);\n        logger.info(&quot;Server started on port {}&quot;, serverSocket.getLocalPort());\n\n        while (true) {\n            Socket clientSocket = serverSocket.accept();\n            logger.info(&quot;Accepted connection from {}&quot;, clientSocket.getInetAddress().getHostAddress());\n            sjf.agregarLog(&quot;Se acepto conexion&quot;);\n\n            BufferedReader reader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n\n            StringBuilder messageBuilder = new StringBuilder(); // Usamos un StringBuilder para concatenar todas las\n            // líneas\n            String line;\n            while ((line = reader.readLine()) != null) { // Leer todas las líneas disponibles\n                messageBuilder.append(line);\n                messageBuilder.append(&quot;\\n&quot;); //\n            }\n            String message = messageBuilder.toString(); // Convertir el StringBuilder a una cadena\n\n            logger.info(&quot;Received message from {}: {}&quot;, clientSocket.getInetAddress().getHostAddress(), message);\n            peti = message;\n            sjf.agregarLog(peti);\n\n            // write json file\n            FileWriter fileWriter = new FileWriter(\n                    &quot;mypath/archivo.json&quot;);\n\n            fileWriter.write(message);\n            fileWriter.close();\n            // analizar\n            aux = false;\n            lista = new Lista(); // reiniciar lista de errores\n            analizarMensaje();\n\n//send errors feedback !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nOutputStream outputStream = socket.getOutputStream();\n            PrintWriter printWriter = new PrintWriter(outputStream, true);\n            printWriter.println(&quot;Hello, Kotlin!&quot;);\n            printWriter.close();\n\n        }\n    \n</code></pre>\n<p>and kotlin :</p>\n<pre><code>private inner class SendMessageTask : AsyncTask&lt;String, Void, Boolean&gt;() {\n\n    override fun doInBackground(vararg params: String): Boolean {\n        try {\n            val socket = Socket(&quot;192.168.0.36&quot;, 8080)\n            val writer = PrintWriter(socket.getOutputStream(), true)\n            for (mensaje in params) { // Iterar sobre todas las líneas recibidas\n                writer.println(mensaje) // Enviar cada línea al socket\n            }\n\n            writer.close()\n            \n\n            // Receive the message from the Java socket and save it to a text file\n            val inputStream = socket.getInputStream()\n            val bufferedReader = BufferedReader(InputStreamReader(inputStream))\n            val message = bufferedReader.readLine()\n            bufferedReader.close()\n\n            val file = File(&quot;received_message.txt&quot;)\n            val printWriter = PrintWriter(file)\n            printWriter.println(message)\n            printWriter.close()\n\n            println(&quot;Received message saved to file: ${file.absolutePath}&quot;)\n            socket.close()\n            return true\n        } catch (e: Exception) {\n            e.printStackTrace()\n            return false\n        }\n    }\n\n    override fun onPostExecute(result: Boolean) {\n        if (!result) {\n            Toast.makeText(context, &quot;Error al enviar el mensaje&quot;, Toast.LENGTH_SHORT).show()\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","maven","intellij-idea","pom.xml"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1678440603,"post_id":75694059,"comment_id":133536620,"body_markdown":"Does it work from the command line outside of the IDE? Are you behind a corporate proxy?","body":"Does it work from the command line outside of the IDE? Are you behind a corporate proxy?"},{"owner":{"account_id":16759564,"reputation":83,"user_id":12114675,"display_name":"Aditya VSM"},"score":0,"creation_date":1678444025,"post_id":75694059,"comment_id":133537618,"body_markdown":"It doesn&#39;t work in cmd too (same error), and YES I&#39;m under corporate proxy","body":"It doesn&#39;t work in cmd too (same error), and YES I&#39;m under corporate proxy"},{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1678444787,"post_id":75694059,"comment_id":133537841,"body_markdown":"In this case, it looks like some project / PC misconfiguration rather than the IDE bug. Try to make it work from the command line first. You can enable debug logging for Maven by adding the `-X` attribute to get more output about the problem.","body":"In this case, it looks like some project / PC misconfiguration rather than the IDE bug. Try to make it work from the command line first. You can enable debug logging for Maven by adding the <code>-X</code> attribute to get more output about the problem."},{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":1,"creation_date":1678444791,"post_id":75694059,"comment_id":133537842,"body_markdown":"See also https://stackoverflow.com/questions/1251192/how-do-i-use-maven-through-a-proxy","body":"See also <a href=\"https://stackoverflow.com/questions/1251192/how-do-i-use-maven-through-a-proxy\" title=\"how do i use maven through a proxy\">stackoverflow.com/questions/1251192/&hellip;</a>"}],"owner":{"account_id":16759564,"reputation":83,"user_id":12114675,"display_name":"Aditya VSM"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678438936,"creation_date":1678438936,"question_id":75694059,"body_markdown":"I&#39;m following JavaBrains youtube channel to learn spring boot and I&#39;m getting this error while getting started with databases using JPA and apache derby.\r\n\r\nIt was a common issue in IntelliJ community edition whenever I try to open mvn project generated by spring initializr I had to manually change `&lt;version&gt;3.0.4&lt;/version&gt;` into `&lt;version&gt;3.0.2&lt;/version&gt;` in `pom.xml` to make it work (PS : don&#39;t know why!)\r\n\r\nI&#39;m using IntelliJ idea community version. &lt;br&gt;\r\n\r\nStarted spring-boot project using [`spring initalizr`][1]\r\n[![Spring initalizr data][2]][2]\r\n\r\n**Error**:\r\n\r\n    Could not resolve dependencies for project com.example:rest-demo-db:jar:0.0.1- SNAPSHOT: \r\n    The following artifacts could not be resolved: \r\n    org.aspectj:aspectjweaver:jar:1.9.19, org.hibernate.orm:hibernate- \r\n    core:jar:6.1.6.Final, org.springframework.data:spring-data-jpa:jar:3.0.1, \r\n    org.apache.derby:derby:jar:10.16.1.1: Could not transfer artifact \r\n    org.aspectj:aspectjweaver:jar:1.9.19 from/to central \r\n    (https://repo.maven.apache.org/maven2): GET request of: \r\n    org/aspectj/aspectjweaver/1.9.19/aspectjweaver-1.9.19.jar from central failed: \r\n    Tag mismatch -&gt; [Help 1]\r\n\r\n&lt;br&gt;\r\n**pom.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \r\n    https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;rest-demo-db&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;rest-demo-db&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;derby&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\nOther info : &lt;br&gt;\r\n`java version : 17` &lt;br&gt;\r\n`mvn version : 3.8.2` &lt;br&gt;\r\n\r\n**mvn settings**\r\n[![mvn settings in IntelliJ][3]][3]\r\n\r\n\r\n&lt;br&gt;\r\ntried and didn&#39;t work:\r\n\r\n - `Invalidate cache and restart` in IntelliJ\r\n - Clearing `.m2/repository` and re-installing mvn dependencies\r\n - `mvn clean install -U`\r\n - System restart\r\n\r\n\r\nCan anyone help me with this. Thank you &#128578;\r\n\r\n\r\n  [1]: https://start.spring.io/\r\n  [2]: https://i.stack.imgur.com/qRk7w.png\r\n  [3]: https://i.stack.imgur.com/5ERVW.png","title":"Could not resolve dependencies for project ... : The following artifacts could not be resolved: org.aspectj:aspectjweaver:jar:1.9.19 . . . .","body":"<p>I'm following JavaBrains youtube channel to learn spring boot and I'm getting this error while getting started with databases using JPA and apache derby.</p>\n<p>It was a common issue in IntelliJ community edition whenever I try to open mvn project generated by spring initializr I had to manually change <code>&lt;version&gt;3.0.4&lt;/version&gt;</code> into <code>&lt;version&gt;3.0.2&lt;/version&gt;</code> in <code>pom.xml</code> to make it work (PS : don't know why!)</p>\n<p>I'm using IntelliJ idea community version. <br></p>\n<p>Started spring-boot project using <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\"><code>spring initalizr</code></a>\n<a href=\"https://i.stack.imgur.com/qRk7w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qRk7w.png\" alt=\"Spring initalizr data\" /></a></p>\n<p><strong>Error</strong>:</p>\n<pre><code>Could not resolve dependencies for project com.example:rest-demo-db:jar:0.0.1- SNAPSHOT: \nThe following artifacts could not be resolved: \norg.aspectj:aspectjweaver:jar:1.9.19, org.hibernate.orm:hibernate- \ncore:jar:6.1.6.Final, org.springframework.data:spring-data-jpa:jar:3.0.1, \norg.apache.derby:derby:jar:10.16.1.1: Could not transfer artifact \norg.aspectj:aspectjweaver:jar:1.9.19 from/to central \n(https://repo.maven.apache.org/maven2): GET request of: \norg/aspectj/aspectjweaver/1.9.19/aspectjweaver-1.9.19.jar from central failed: \nTag mismatch -&gt; [Help 1]\n</code></pre>\n<br>\n**pom.xml**\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \nhttps://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;groupId&gt;com.example&lt;/groupId&gt;\n&lt;artifactId&gt;rest-demo-db&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;rest-demo-db&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\n        &lt;artifactId&gt;derby&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Other info : <br>\n<code>java version : 17</code> <br>\n<code>mvn version : 3.8.2</code> <br></p>\n<p><strong>mvn settings</strong>\n<a href=\"https://i.stack.imgur.com/5ERVW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ERVW.png\" alt=\"mvn settings in IntelliJ\" /></a></p>\n<br>\ntried and didn't work:\n<ul>\n<li><code>Invalidate cache and restart</code> in IntelliJ</li>\n<li>Clearing <code>.m2/repository</code> and re-installing mvn dependencies</li>\n<li><code>mvn clean install -U</code></li>\n<li>System restart</li>\n</ul>\n<p>Can anyone help me with this. Thank you 🙂</p>\n"},{"tags":["java","intellij-idea","opc-ua"],"answers":[{"tags":[],"owner":{"account_id":18882550,"reputation":146,"user_id":13774637,"display_name":"Ethan Yin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678438875,"creation_date":1678438875,"answer_id":75694049,"question_id":75690013,"body_markdown":"It&#39;s because there&#39;s no UaTcpStackClient class under the package.\r\nhttps://github.com/eclipse/milo/tree/master/opc-ua-stack/stack-client/src/main/java/org/eclipse/milo/opcua/stack/client","title":"package org.eclipse.milo.opcua.stack.client.UaTcpStackClient not found using intellij","body":"<p>It's because there's no UaTcpStackClient class under the package.\n<a href=\"https://github.com/eclipse/milo/tree/master/opc-ua-stack/stack-client/src/main/java/org/eclipse/milo/opcua/stack/client\" rel=\"nofollow noreferrer\">https://github.com/eclipse/milo/tree/master/opc-ua-stack/stack-client/src/main/java/org/eclipse/milo/opcua/stack/client</a></p>\n"}],"owner":{"account_id":26571685,"reputation":11,"user_id":20197816,"display_name":"Rafael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1678438875,"creation_date":1678395751,"question_id":75690013,"body_markdown":"Im doing a project where Im required to establish an OPC UA connection using Java.\r\nI have done my research and it seems like the easiest way is using eclipse.milo library/package.\r\nA lot of example codes I&#39;ve seen use the package I mentioned in the title, but my IDE can&#180;t find it.\r\n\r\nIm using Maven, this is what I have in my pom.xml regarding this package:\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.eclipse.milo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;sdk-client&lt;/artifactId&gt;\r\n                &lt;version&gt;0.6.8&lt;/version&gt;\r\n    &lt;/dependency&gt; \r\nI don&#39;t think this is the problem since IntelliJ is fine with other packages from eclipse.milo like:\r\n\r\n    import org.eclipse.milo.opcua.stack.core.types.structured.EndpointDescription;\r\n    import org.eclipse.milo.opcua.sdk.client.OpcUaClient;\r\n    import org.eclipse.milo.opcua.sdk.client.api.config.OpcUaClientConfigBuilder;\r\nDoes anyone have any idea on how to solve this issue?","title":"package org.eclipse.milo.opcua.stack.client.UaTcpStackClient not found using intellij","body":"<p>Im doing a project where Im required to establish an OPC UA connection using Java.\nI have done my research and it seems like the easiest way is using eclipse.milo library/package.\nA lot of example codes I've seen use the package I mentioned in the title, but my IDE can´t find it.</p>\n<p>Im using Maven, this is what I have in my pom.xml regarding this package:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.milo&lt;/groupId&gt;\n            &lt;artifactId&gt;sdk-client&lt;/artifactId&gt;\n            &lt;version&gt;0.6.8&lt;/version&gt;\n&lt;/dependency&gt; \n</code></pre>\n<p>I don't think this is the problem since IntelliJ is fine with other packages from eclipse.milo like:</p>\n<pre><code>import org.eclipse.milo.opcua.stack.core.types.structured.EndpointDescription;\nimport org.eclipse.milo.opcua.sdk.client.OpcUaClient;\nimport org.eclipse.milo.opcua.sdk.client.api.config.OpcUaClientConfigBuilder;\n</code></pre>\n<p>Does anyone have any idea on how to solve this issue?</p>\n"},{"tags":["java","netflix-eureka"],"owner":{"account_id":27981619,"reputation":1,"user_id":21369277,"display_name":"rastoliska25"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678438332,"creation_date":1678438332,"question_id":75693948,"body_markdown":"I have multiple instances under one appname - they are the same app just with a different port. Does eureka have any load balancer that determines which instance to call based on its load, or is there just some round robin? I send requests from the Java service based on the appname. I just need to know that if one instance is loaded for e.g 1 hour and I send requests in between, will the second instance be called or will I have to wait for the 1 hour response on the first instance to complete... Thank you in advance for your reply!\r\n\r\nBased on my tests I figured it works like a round robin. For me, it would be best if eureka can determine the load of a given instance and return an instance with less load. Alternatively, is there any setting for load balancing? ","title":"Eureka discovery service -&gt; how does eureka select instances?","body":"<p>I have multiple instances under one appname - they are the same app just with a different port. Does eureka have any load balancer that determines which instance to call based on its load, or is there just some round robin? I send requests from the Java service based on the appname. I just need to know that if one instance is loaded for e.g 1 hour and I send requests in between, will the second instance be called or will I have to wait for the 1 hour response on the first instance to complete... Thank you in advance for your reply!</p>\n<p>Based on my tests I figured it works like a round robin. For me, it would be best if eureka can determine the load of a given instance and return an instance with less load. Alternatively, is there any setting for load balancing?</p>\n"},{"tags":["java","spring","jpa","spring-boot","junit"],"comments":[{"owner":{"account_id":1202789,"reputation":427,"user_id":1173099,"display_name":"nick79"},"score":0,"creation_date":1503922190,"post_id":45915811,"comment_id":78795738,"body_markdown":"I have had similar  problem with Derby database. Solution was to add @Sql annotation and provide sql script that reset auto increment columns.","body":"I have had similar  problem with Derby database. Solution was to add @Sql annotation and provide sql script that reset auto increment columns."}],"owner":{"account_id":10453418,"reputation":301,"user_id":7706269,"accept_rate":91,"display_name":"LOUDKING"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":475,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678438246,"creation_date":1503912479,"question_id":45915811,"body_markdown":"I have a test case which runs perfectly by itself (mvn -Dtest=MurexResponseOkTest test) but when running with other tests (mvn clean install) it always fail with jpa query error.\r\n\r\nThe error was raised because the auto increment column (ID column) was not reset to 1 between tests. For example,\r\n\r\nmvn -Dtest=MurexResponseOkTest test will log\r\n\r\nmessage body after save: = 1\r\n\r\nmessage header after save: 1\r\n\r\nmarkit trade event after save: 1\r\n\r\nbut mvn test will log:\r\n\r\nmessage body after save: = 4\r\n\r\nmessage header after save: 1\r\n\r\nmarkit trade event after save: 2\r\n\r\nI already have AFTER_EACH_TEST_METHOD set but it seems not working.\r\n\r\n    @RunWith(CamelSpringJUnit4ClassRunner.class)\r\n    @SpringBootTest(classes = {Application.class})\r\n    @DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\r\n    @ActiveProfiles({&quot;boot&quot;, &quot;test&quot;})\r\n\r\n\r\nAny suggestions?","title":"in memory database not reset auto increment column between tests even if DirtiesContext is set","body":"<p>I have a test case which runs perfectly by itself (mvn -Dtest=MurexResponseOkTest test) but when running with other tests (mvn clean install) it always fail with jpa query error.</p>\n\n<p>The error was raised because the auto increment column (ID column) was not reset to 1 between tests. For example,</p>\n\n<p>mvn -Dtest=MurexResponseOkTest test will log</p>\n\n<p>message body after save: = 1</p>\n\n<p>message header after save: 1</p>\n\n<p>markit trade event after save: 1</p>\n\n<p>but mvn test will log:</p>\n\n<p>message body after save: = 4</p>\n\n<p>message header after save: 1</p>\n\n<p>markit trade event after save: 2</p>\n\n<p>I already have AFTER_EACH_TEST_METHOD set but it seems not working.</p>\n\n<pre><code>@RunWith(CamelSpringJUnit4ClassRunner.class)\n@SpringBootTest(classes = {Application.class})\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@ActiveProfiles({\"boot\", \"test\"})\n</code></pre>\n\n<p>Any suggestions?</p>\n"},{"tags":["java","hashmap"],"answers":[{"tags":[],"owner":{"account_id":881640,"reputation":4624,"user_id":266254,"accept_rate":47,"display_name":"bilak"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678437151,"creation_date":1678437151,"answer_id":75693789,"question_id":75693740,"body_markdown":"depends on what you need, but following code will filter out all entries where value is not of given type(s)\r\n\r\n```java\r\nprivate Map&lt;String, Object&gt; getSupportedTypes(final Map&lt;String, Object&gt; source) {\r\n    return source.entrySet()\r\n            .stream()\r\n            .filter(entry -&gt; entry.getValue() instanceof Integer\r\n                    || entry.getValue() instanceof String\r\n                    || entry.getValue() instanceof Boolean)\r\n            .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n}\r\n```","title":"How do I type validate values in a map?","body":"<p>depends on what you need, but following code will filter out all entries where value is not of given type(s)</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Map&lt;String, Object&gt; getSupportedTypes(final Map&lt;String, Object&gt; source) {\n    return source.entrySet()\n            .stream()\n            .filter(entry -&gt; entry.getValue() instanceof Integer\n                    || entry.getValue() instanceof String\n                    || entry.getValue() instanceof Boolean)\n            .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1678437158,"creation_date":1678437158,"answer_id":75693790,"question_id":75693740,"body_markdown":"You can check all of `myMap.values()` with `Stream#allMatch`.\r\n\r\n```java\r\nboolean pass = myMap.values().stream().allMatch(o -&gt; o instanceof String || \r\n                    o instanceof Integer || o instanceof Boolean);\r\n```\r\n\r\nNote that it is impossible for the value to be of type `int`; it can only be the wrapper class `Integer`.","title":"How do I type validate values in a map?","body":"<p>You can check all of <code>myMap.values()</code> with <code>Stream#allMatch</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean pass = myMap.values().stream().allMatch(o -&gt; o instanceof String || \n                    o instanceof Integer || o instanceof Boolean);\n</code></pre>\n<p>Note that it is impossible for the value to be of type <code>int</code>; it can only be the wrapper class <code>Integer</code>.</p>\n"},{"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1678438080,"post_id":75693842,"comment_id":133535892,"body_markdown":"Nice answer. I would use `Set` here, though.","body":"Nice answer. I would use <code>Set</code> here, though."},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":1,"creation_date":1678438252,"post_id":75693842,"comment_id":133535949,"body_markdown":"@Unmitigated exactly, I edit it my answer, thank you :)","body":"@Unmitigated exactly, I edit it my answer, thank you :)"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1678475751,"post_id":75693842,"comment_id":133546273,"body_markdown":"Note this works because `String`, `Integer`, and `Boolean` are all `final`. But if someone is using non-final classes, and they want to check the values are an _instance of_ some type, rather than _exactly_ that type, this won&#39;t work. Also, it should probably be `Set&lt;Class&lt;?&gt;&gt;`, as `Class` is a generic type.","body":"Note this works because <code>String</code>, <code>Integer</code>, and <code>Boolean</code> are all <code>final</code>. But if someone is using non-final classes, and they want to check the values are an <i>instance of</i> some type, rather than <i>exactly</i> that type, this won&#39;t work. Also, it should probably be <code>Set&lt;Class&lt;?&gt;&gt;</code>, as <code>Class</code> is a generic type."}],"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1678438229,"creation_date":1678437596,"answer_id":75693842,"question_id":75693740,"body_markdown":"Here is another solution:\r\n\r\n    Set&lt;Class&gt; expectedTypes = Set.of(String.class, Integer.class, Boolean.class);\r\n    boolean check = myList.values().stream()\r\n            .allMatch(v -&gt; expectedTypes.contains(v.getClass()));\r\n\r\nOr:\r\n\r\n    boolean check = myList.values().stream()\r\n            .map(Object::getClass)\r\n            .allMatch(expectedTypes::contains);\r\n\r\nThe idea here is to create a set of accepted types, then you can use `contains(v.getClass())` to check if the type is correct or not.\r\n\r\n[**Full example here.**][1]\r\n\r\n\r\n  [1]: http://tpcg.io/_LHYDE3","title":"How do I type validate values in a map?","body":"<p>Here is another solution:</p>\n<pre><code>Set&lt;Class&gt; expectedTypes = Set.of(String.class, Integer.class, Boolean.class);\nboolean check = myList.values().stream()\n        .allMatch(v -&gt; expectedTypes.contains(v.getClass()));\n</code></pre>\n<p>Or:</p>\n<pre><code>boolean check = myList.values().stream()\n        .map(Object::getClass)\n        .allMatch(expectedTypes::contains);\n</code></pre>\n<p>The idea here is to create a set of accepted types, then you can use <code>contains(v.getClass())</code> to check if the type is correct or not.</p>\n<p><a href=\"http://tpcg.io/_LHYDE3\" rel=\"nofollow noreferrer\"><strong>Full example here.</strong></a></p>\n"}],"owner":{"account_id":13216928,"reputation":1467,"user_id":9545125,"display_name":"TheStranger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75693790,"answer_count":3,"score":0,"last_activity_date":1678438229,"creation_date":1678436762,"question_id":75693740,"body_markdown":"I have a `Map&lt;String, Object&gt;` which I call **myMap**, and I want to iterate through each key and ensure that its value is either of type `String`, `int` &amp; `Boolean`.\r\n\r\nI&#39;ve tried something along these lines:\r\n\r\n    myMap.entrySet().forEach(key -&gt; myMap.get(key));\r\n\r\nI don&#39;t know how to do the actual check...","title":"How do I type validate values in a map?","body":"<p>I have a <code>Map&lt;String, Object&gt;</code> which I call <strong>myMap</strong>, and I want to iterate through each key and ensure that its value is either of type <code>String</code>, <code>int</code> &amp; <code>Boolean</code>.</p>\n<p>I've tried something along these lines:</p>\n<pre><code>myMap.entrySet().forEach(key -&gt; myMap.get(key));\n</code></pre>\n<p>I don't know how to do the actual check...</p>\n"},{"tags":["java","mysql","hibernate","jpa"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1678094387,"post_id":75648779,"comment_id":133460069,"body_markdown":"`SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED` - how do you apply that? that command has session scope, so you need to issue it every time when new JDBC connection has created.","body":"<code>SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED</code> - how do you apply that? that command has session scope, so you need to issue it every time when new JDBC connection has created."},{"owner":{"account_id":9224441,"reputation":2843,"user_id":6852684,"display_name":"RazvanParautiu"},"score":0,"creation_date":1678094945,"post_id":75648779,"comment_id":133460195,"body_markdown":"I looked over the docs from mysql again and I set the isolation to global SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED\nHow I did was to set on SESSION so I guess that only he first session will have that isolation level.","body":"I looked over the docs from mysql again and I set the isolation to global SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED How I did was to set on SESSION so I guess that only he first session will have that isolation level."},{"owner":{"account_id":9224441,"reputation":2843,"user_id":6852684,"display_name":"RazvanParautiu"},"score":0,"creation_date":1678095239,"post_id":75648779,"comment_id":133460271,"body_markdown":"@AndreyB.Panfilov should I  trigger an SQL statement with SET SESSION... everytime I start a transaction ?","body":"@AndreyB.Panfilov should I  trigger an SQL statement with SET SESSION... everytime I start a transaction ?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1678096117,"post_id":75648779,"comment_id":133460511,"body_markdown":"That depends on how you are going to manage jdbc connections, typically if you assume that is a property of particular application, then connection pool should be responsible for that (for example, we use HikariCP and it has `connectionInitSql` option), in your case (you manage JDBC via PU) I would reconned to add `?sessionVariables=transaction_isolation=&#39;READ-COMMITTED&#39;` to JDBC URL.","body":"That depends on how you are going to manage jdbc connections, typically if you assume that is a property of particular application, then connection pool should be responsible for that (for example, we use HikariCP and it has <code>connectionInitSql</code> option), in your case (you manage JDBC via PU) I would reconned to add <code>?sessionVariables=transaction_isolation=&#39;READ-COMMITTED&#39;</code> to JDBC URL."},{"owner":{"account_id":9224441,"reputation":2843,"user_id":6852684,"display_name":"RazvanParautiu"},"score":0,"creation_date":1678096826,"post_id":75648779,"comment_id":133460702,"body_markdown":"I understand now. So the isolation level is set by the PU or by a ConnectionPool and is set as application scope and not per session/transaction. Cool. Thanks. Could you write it as an answer in order to mark it as the correct answer ?","body":"I understand now. So the isolation level is set by the PU or by a ConnectionPool and is set as application scope and not per session/transaction. Cool. Thanks. Could you write it as an answer in order to mark it as the correct answer ?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1678098342,"post_id":75648779,"comment_id":133461107,"body_markdown":"`and not per session/transaction` - actually, I meant **default** isolation level for particular application. There are no barriers to set isolation level per transaction, for example, `spring` framework does allow to do that, however without `spring` that could be challenging: in pure HBN case you can change it via `entityManager.unwrap(SessionImplementor.class).connection().setTransactionIsolation(...)`, but you must to return previous isolation level back upon transaction completion, otherwise you have all chances to poison connection pool.","body":"<code>and not per session&#47;transaction</code> - actually, I meant <b>default</b> isolation level for particular application. There are no barriers to set isolation level per transaction, for example, <code>spring</code> framework does allow to do that, however without <code>spring</code> that could be challenging: in pure HBN case you can change it via <code>entityManager.unwrap(SessionImplementor.class).connection().&zwnj;&#8203;setTransactionIsolat&zwnj;&#8203;ion(...)</code>, but you must to return previous isolation level back upon transaction completion, otherwise you have all chances to poison connection pool."}],"owner":{"account_id":9224441,"reputation":2843,"user_id":6852684,"display_name":"RazvanParautiu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678437732,"creation_date":1678092928,"question_id":75648779,"body_markdown":"I&#39;m learning about locking and isolation levels along with Hibernate 5 and I&#39;m trying to do some tests on isolation levels; I want to test the **READ_COMMITED** isolation level, but the result is not the expected one. Long story short:\r\n\r\nI set the isolation level on MySql (version 8).\r\n\r\n    SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED\r\n\r\nI have a Dummy entity model:\r\n    \r\n    @Getter\r\n    @Setter\r\n    @EqualsAndHashCode\r\n    @Table\r\n    @Entity\r\n    public class Dummy {\r\n        @Id\r\n        @Column(name = &quot;id&quot;, nullable = false)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n        private Long id;\r\n\r\n        private String value;\r\n\r\n        private int countDown;\r\n    }\r\n\r\nAnd the following test:\r\n\r\n    @Test\r\n    public void testReadCommitted() {\r\n        doInJPA(entityManagerFactorySupplier, entityManager1 -&gt; {\r\n            doInJPA(entityManagerFactorySupplier, entityManager2 -&gt; {\r\n                Dummy victim = entityManager2.find(Dummy.class, id);\r\n                victim.setValue(&quot;Changed by T2&quot;);\r\n\r\n                entityManager1.clear();\r\n                Dummy beforeT2Commit = entityManager1.find(Dummy.class, id);\r\n                assertEquals(beforeT2Commit.getValue(), &quot;Default&quot;);\r\n            });\r\n            entityManager1.clear();\r\n            Dummy afterT2Commit = entityManager1.find(Dummy.class, id);\r\n            // Here I expect to have the new value but for some reason I receive the old one\r\n            assertEquals(afterT2Commit.getValue(), &quot;Changed by T2&quot;);\r\n        });\r\n    }\r\n\r\nRelevant dependecies:\r\n\r\n           &lt;dependency&gt;\r\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                &lt;version&gt;8.0.32&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                &lt;version&gt;5.6.15.Final&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n                &lt;version&gt;5.3.25&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n\r\nPersistence unit config\r\n\r\n\r\n    &lt;persistence-unit name=&quot;DBCONFIG&quot;&gt;\r\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n        &lt;class&gt;edu.example.test.entities.Dummy&lt;/class&gt;\r\n        &lt;class&gt;edu.example.test.entities.lock.OptimisticVersionDummy&lt;/class&gt;\r\n        &lt;class&gt;edu.example.test.entities.lock.OptimisticDirtyDummy&lt;/class&gt;\r\n        &lt;exclude-unlisted-classes&gt;true&lt;/exclude-unlisted-classes&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot;\r\n                      value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot;\r\n                      value=&quot;jdbc:mysql://localhost:3306/hibernate_test&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;password&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.query.timeout&quot; value=&quot;100&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL8Dialect&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n\r\nFrom logs I can see that a SELECT is triggered after the transaction from entityManager2 was committed and closed. \r\nAlso while I&#39;m debugging I can see that the row was changed into DB after the commit, but even so I&#39;m receiving the old result from entityManager1 transaction. \r\nI do not use any level 2 cache and also I clear the persistence context from entityManager1 before reading again.\r\n\r\nlogs:\r\n\r\n    Hibernate: \r\n        select\r\n            dummy0_.id as id1_0_0_,\r\n            dummy0_.countDown as countdow2_0_0_,\r\n            dummy0_.value as value3_0_0_ \r\n        from\r\n            Dummy dummy0_ \r\n        where\r\n            dummy0_.id=?\r\n    2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [BIGINT] - [773]\r\n    2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([countdow2_0_0_] : [INTEGER]) - [0]\r\n    2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([value3_0_0_] : [VARCHAR]) - [Default]\r\n    Hibernate: \r\n        select\r\n            dummy0_.id as id1_0_0_,\r\n            dummy0_.countDown as countdow2_0_0_,\r\n            dummy0_.value as value3_0_0_ \r\n        from\r\n            Dummy dummy0_ \r\n        where\r\n            dummy0_.id=?\r\n    2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [BIGINT] - [773]\r\n    2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([countdow2_0_0_] : [INTEGER]) - [0]\r\n    2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([value3_0_0_] : [VARCHAR]) - [Default]\r\n    Hibernate: \r\n        update\r\n            Dummy \r\n        set\r\n            countDown=?,\r\n            value=? \r\n        where\r\n            id=?\r\n    2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [INTEGER] - [0]\r\n    2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [2] as [VARCHAR] - [Changed by T2]\r\n    2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [3] as [BIGINT] - [773]\r\n    Hibernate: \r\n        select\r\n            dummy0_.id as id1_0_0_,\r\n            dummy0_.countDown as countdow2_0_0_,\r\n            dummy0_.value as value3_0_0_ \r\n        from\r\n            Dummy dummy0_ \r\n        where\r\n            dummy0_.id=?\r\n    2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [BIGINT] - [773]\r\n    2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([countdow2_0_0_] : [INTEGER]) - [0]\r\n    2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([value3_0_0_] : [VARCHAR]) - [Default]\r\n\r\n  \r\n**UPDATE_1: WITH SOLUTION**\r\nThe URL for DB connection has to specify the isolation level \r\n\r\n       &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost:3306/hibernate_test?sessionVariables=transaction_isolation=&#39;READ-COMMITTED&#39;&quot;/&gt;\r\n\r\n**UPDATE_2**\r\nIsolation levels are working different from DB to DB and some phenomenas migh not occur. For example\r\n\r\nREAD_UNCOMMITTED:\r\n- Dirty Read on MySQL occur\r\n- Dirty Read on PostgreSQL DO NOT occur \r\n","title":"Hibernate do not read the commited changes by another transaction on READ_COMMITED isolation level","body":"<p>I'm learning about locking and isolation levels along with Hibernate 5 and I'm trying to do some tests on isolation levels; I want to test the <strong>READ_COMMITED</strong> isolation level, but the result is not the expected one. Long story short:</p>\n<p>I set the isolation level on MySql (version 8).</p>\n<pre><code>SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED\n</code></pre>\n<p>I have a Dummy entity model:</p>\n<pre><code>@Getter\n@Setter\n@EqualsAndHashCode\n@Table\n@Entity\npublic class Dummy {\n    @Id\n    @Column(name = &quot;id&quot;, nullable = false)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    private Long id;\n\n    private String value;\n\n    private int countDown;\n}\n</code></pre>\n<p>And the following test:</p>\n<pre><code>@Test\npublic void testReadCommitted() {\n    doInJPA(entityManagerFactorySupplier, entityManager1 -&gt; {\n        doInJPA(entityManagerFactorySupplier, entityManager2 -&gt; {\n            Dummy victim = entityManager2.find(Dummy.class, id);\n            victim.setValue(&quot;Changed by T2&quot;);\n\n            entityManager1.clear();\n            Dummy beforeT2Commit = entityManager1.find(Dummy.class, id);\n            assertEquals(beforeT2Commit.getValue(), &quot;Default&quot;);\n        });\n        entityManager1.clear();\n        Dummy afterT2Commit = entityManager1.find(Dummy.class, id);\n        // Here I expect to have the new value but for some reason I receive the old one\n        assertEquals(afterT2Commit.getValue(), &quot;Changed by T2&quot;);\n    });\n}\n</code></pre>\n<p>Relevant dependecies:</p>\n<pre><code>       &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.32&lt;/version&gt;\n       &lt;/dependency&gt;\n       &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;5.6.15.Final&lt;/version&gt;\n       &lt;/dependency&gt;\n       &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;5.3.25&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Persistence unit config</p>\n<pre><code>&lt;persistence-unit name=&quot;DBCONFIG&quot;&gt;\n    &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n    &lt;class&gt;edu.example.test.entities.Dummy&lt;/class&gt;\n    &lt;class&gt;edu.example.test.entities.lock.OptimisticVersionDummy&lt;/class&gt;\n    &lt;class&gt;edu.example.test.entities.lock.OptimisticDirtyDummy&lt;/class&gt;\n    &lt;exclude-unlisted-classes&gt;true&lt;/exclude-unlisted-classes&gt;\n    &lt;properties&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.driver&quot;\n                  value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.url&quot;\n                  value=&quot;jdbc:mysql://localhost:3306/hibernate_test&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;password&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.query.timeout&quot; value=&quot;100&quot;/&gt;\n        &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL8Dialect&quot;/&gt;\n        &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n<p>From logs I can see that a SELECT is triggered after the transaction from entityManager2 was committed and closed.\nAlso while I'm debugging I can see that the row was changed into DB after the commit, but even so I'm receiving the old result from entityManager1 transaction.\nI do not use any level 2 cache and also I clear the persistence context from entityManager1 before reading again.</p>\n<p>logs:</p>\n<pre><code>Hibernate: \n    select\n        dummy0_.id as id1_0_0_,\n        dummy0_.countDown as countdow2_0_0_,\n        dummy0_.value as value3_0_0_ \n    from\n        Dummy dummy0_ \n    where\n        dummy0_.id=?\n2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [BIGINT] - [773]\n2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([countdow2_0_0_] : [INTEGER]) - [0]\n2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([value3_0_0_] : [VARCHAR]) - [Default]\nHibernate: \n    select\n        dummy0_.id as id1_0_0_,\n        dummy0_.countDown as countdow2_0_0_,\n        dummy0_.value as value3_0_0_ \n    from\n        Dummy dummy0_ \n    where\n        dummy0_.id=?\n2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [BIGINT] - [773]\n2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([countdow2_0_0_] : [INTEGER]) - [0]\n2023-Mar-06 10:32:19 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([value3_0_0_] : [VARCHAR]) - [Default]\nHibernate: \n    update\n        Dummy \n    set\n        countDown=?,\n        value=? \n    where\n        id=?\n2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [INTEGER] - [0]\n2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [2] as [VARCHAR] - [Changed by T2]\n2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [3] as [BIGINT] - [773]\nHibernate: \n    select\n        dummy0_.id as id1_0_0_,\n        dummy0_.countDown as countdow2_0_0_,\n        dummy0_.value as value3_0_0_ \n    from\n        Dummy dummy0_ \n    where\n        dummy0_.id=?\n2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicBinder - binding parameter [1] as [BIGINT] - [773]\n2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([countdow2_0_0_] : [INTEGER]) - [0]\n2023-Mar-06 10:32:22 AM [main] TRACE org.hibernate.type.descriptor.sql.BasicExtractor - extracted value ([value3_0_0_] : [VARCHAR]) - [Default]\n</code></pre>\n<p><strong>UPDATE_1: WITH SOLUTION</strong>\nThe URL for DB connection has to specify the isolation level</p>\n<pre><code>   &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost:3306/hibernate_test?sessionVariables=transaction_isolation='READ-COMMITTED'&quot;/&gt;\n</code></pre>\n<p><strong>UPDATE_2</strong>\nIsolation levels are working different from DB to DB and some phenomenas migh not occur. For example</p>\n<p>READ_UNCOMMITTED:</p>\n<ul>\n<li>Dirty Read on MySQL occur</li>\n<li>Dirty Read on PostgreSQL DO NOT occur</li>\n</ul>\n"},{"tags":["java","html","spring","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1678331323,"post_id":75679809,"comment_id":133513172,"body_markdown":"The syntax looks good to me. Show us please how do you pass the model.","body":"The syntax looks good to me. Show us please how do you pass the model."},{"owner":{"account_id":1327194,"reputation":1809,"user_id":1271785,"accept_rate":67,"display_name":"pfurbacher"},"score":0,"creation_date":1678336930,"post_id":75679809,"comment_id":133513767,"body_markdown":"To debug your Thymeleaf template code, comment out the `&lt;a&gt;` elements and add a `&lt;p th:text=&quot;${file.name}&quot;/&gt;File&lt;/p&gt;`. Does it display the file name? If it does, then your expression for the `href` is the problem.","body":"To debug your Thymeleaf template code, comment out the <code>&lt;a&gt;</code> elements and add a <code>&lt;p th:text=&quot;${file.name}&quot;&#47;&gt;File&lt;&#47;p&gt;</code>. Does it display the file name? If it does, then your expression for the <code>href</code> is the problem."},{"owner":{"account_id":27963948,"reputation":13,"user_id":21355184,"display_name":"asd"},"score":0,"creation_date":1678338624,"post_id":75679809,"comment_id":133513955,"body_markdown":"Thank you but I have already tried the above, unfortunately with no luck. The template keeps resolving to empty &lt;body&gt;&lt;/body&gt;.","body":"Thank you but I have already tried the above, unfortunately with no luck. The template keeps resolving to empty &lt;body&gt;&lt;/body&gt;."},{"owner":{"account_id":27963948,"reputation":13,"user_id":21355184,"display_name":"asd"},"score":0,"creation_date":1678339255,"post_id":75679809,"comment_id":133514056,"body_markdown":"it has something to do with returning the result.html, while the bit I am trying to iterate is inside home.html. But from result.html I click and get back to home.html","body":"it has something to do with returning the result.html, while the bit I am trying to iterate is inside home.html. But from result.html I click and get back to home.html"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1678344247,"post_id":75679809,"comment_id":133514784,"body_markdown":"Please add the full form. The fact that your submit has the model doesn&#39;t mean it is available when rendering the form (the GET request that is). You are sending files to the controller which you probably add, and I suspect you have an input type named `files`, which is what would  show up in the model. So pleas add your full form as well as your controller (not only snippets as that is far from the information needed to have a clear picture).","body":"Please add the full form. The fact that your submit has the model doesn&#39;t mean it is available when rendering the form (the GET request that is). You are sending files to the controller which you probably add, and I suspect you have an input type named <code>files</code>, which is what would  show up in the model. So pleas add your full form as well as your controller (not only snippets as that is far from the information needed to have a clear picture)."},{"owner":{"account_id":27963948,"reputation":13,"user_id":21355184,"display_name":"asd"},"score":0,"creation_date":1678437572,"post_id":75679809,"comment_id":133535752,"body_markdown":"I updated the thread with my forms/templates.","body":"I updated the thread with my forms/templates."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1678968750,"post_id":75693809,"comment_id":133637711,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75693809/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27963948,"reputation":13,"user_id":21355184,"display_name":"asd"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678437349,"creation_date":1678437349,"answer_id":75693809,"question_id":75679809,"body_markdown":"I think the reason was that I was serving a result.html view and when I clicked from result.html to get back to home.html it was just an &lt;a&gt;&lt;/a&gt; element that took me to the home.html. Instead, when I added a request to the button that takes me back from the result view to the home view which is responsible for updating the model. I thought that the Model&#39;s information is preserved somewhere in the front end but I guess this is not the case?","title":"Thymeleaf code does not work when I try to iterate through List&lt;String&gt; or String[]","body":"<p>I think the reason was that I was serving a result.html view and when I clicked from result.html to get back to home.html it was just an  element that took me to the home.html. Instead, when I added a request to the button that takes me back from the result view to the home view which is responsible for updating the model. I thought that the Model's information is preserved somewhere in the front end but I guess this is not the case?</p>\n"}],"owner":{"account_id":27963948,"reputation":13,"user_id":21355184,"display_name":"asd"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678437530,"creation_date":1678327377,"question_id":75679809,"body_markdown":"I have this thymeleaf template code snippet\r\n\r\n      `                      &lt;tr th:each=&quot;file : ${files}&quot;&gt;\r\n                                    &lt;td&gt;\r\n                                        &lt;a target=&quot;_blank&quot; class=&quot;btn btn-success&quot;\r\n                                           th:href=&quot;@{/home/get-file/{file}(file = ${file})}&quot;&gt;View&lt;/a&gt;\r\n                                        &lt;a class=&quot;btn btn-danger&quot;\r\n                                           th:href=&quot;@{/home/delete-file/{file}(file = ${file})}&quot;&gt;Delete&lt;/a&gt;\r\n                                    &lt;/td&gt;\r\n                                    &lt;th scope=&quot;row&quot; th:text=&quot;${file}&quot;&gt;ExampleFile.txt&lt;/th&gt;\r\n                                &lt;/tr&gt;`\r\n\r\nit does not works when files is `String[]` and nothing is displayed when files is `List&lt;String&gt;` either\r\n\r\nI have tried changing between the two different types.\r\n\r\nIs there something wrong in the way I iterate? I believe the syntax is correct. Also, this is my `model:Model` just before the controller endpoint method returns and it looks like all the data is there:\r\n\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gMF1L.png\r\n\r\n\r\n&#39;&#39;&#39;UPDATE&#39;&#39;&#39;\r\nThis is how I pass the model:\r\n&#39;CONTROLLER&#39;\r\n\r\n    @PostMapping(&quot;/upload&quot;)\r\n    public String handleFileUpload(@RequestParam(&quot;fileUpload&quot;) MultipartFile file,\r\n                                   -&gt;&gt;Model model&lt;--) throws IOException {\r\n        fileService.addFile(SecurityContextHolder.getContext().getAuthentication(), file, model);\r\n        return &quot;result&quot;;\r\n    }\r\n&#39;SERVICE&#39;\r\n\r\n    public int addFile(Authentication authentication, MultipartFile multipartFile, Model model) throws IOException {\r\n        String userName = authentication.getName();\r\n        User user = userMapper.getUser(userName);\r\n        Integer userId = user.getUserId();\r\n        String fileName = multipartFile.getOriginalFilename();\r\n        if (!fileIsDuplicate(userId, fileName)) {\r\n            try {\r\n                byte[] fileData = multipartFile.getBytes();\r\n                String contentType = multipartFile.getContentType();\r\n                String fileSize = String.valueOf(multipartFile.getSize());\r\n                File file = new File(fileName, contentType, fileSize, (long)userId, fileData);\r\n                int id = fileMapper.insertFile(file);\r\n          -----&gt; -------&gt;&gt;&gt;model.addAttribute(&quot;files&quot;, fileMapper.getFilesByUserId(userId).toArray(new String[0]));\r\n                model.addAttribute(&quot;result&quot;, &quot;success&quot;);\r\n\r\n                return id;\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n                model.addAttribute(&quot;result&quot;, &quot;error&quot;);\r\n                model.addAttribute(&quot;message&quot;, &quot;Exception occurred while trying to save file.&quot;);\r\n                return -1;\r\n            }\r\n        }\r\n        model.addAttribute(&quot;result&quot;, &quot;error&quot;);\r\n        model.addAttribute(&quot;message&quot;, &quot;You have tried to add a duplicate file.&quot;);\r\n        return -1;\r\n    }\r\n\r\nPlease note that as it can be seen in the debugger session screenshot attached, by the time I am back up at the controller layer and about to return the View, the Model has files values in it, meaning that upon backend controller endpoint method return, the Model is not empty.\r\n\r\nThis is my home.html template\r\n\r\n        &lt;!DOCTYPE html&gt;\r\n    &lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;\r\n        &lt;head&gt;\r\n            &lt;meta charset=&quot;utf-8&quot;&gt;\r\n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\r\n            &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot; th:href=&quot;@{/css/bootstrap.min.css}&quot;&gt;\r\n            &lt;title&gt;Home&lt;/title&gt;\r\n        &lt;/head&gt;\r\n        &lt;body class=&quot;p-3 mb-2 bg-light text-black&quot;&gt;\r\n            &lt;div class=&quot;container&quot;&gt;\r\n                &lt;div id=&quot;logoutDiv&quot;&gt;\r\n                    &lt;form action=&quot;#&quot; th:action=&quot;@{/logout}&quot; method=&quot;POST&quot;&gt;\r\n                        &lt;button type=&quot;submit&quot; class=&quot;btn btn-secondary float-right&quot; id=&quot;btn-logout&quot;&gt;Logout&lt;/button&gt;\r\n                    &lt;/form&gt;\r\n                &lt;/div&gt;\r\n                &lt;div id=&quot;contentDiv&quot; style=&quot;clear: right;&quot;&gt;\r\n                    &lt;nav style=&quot;clear: right;&quot;&gt;\r\n                        &lt;div class=&quot;nav nav-tabs&quot; id=&quot;nav-tab&quot; role=&quot;tablist&quot;&gt;\r\n                            &lt;a class=&quot;nav-item nav-link active&quot; id=&quot;nav-files-tab&quot; data-toggle=&quot;tab&quot; href=&quot;#nav-files&quot; role=&quot;tab&quot; aria-controls=&quot;nav-files&quot; aria-selected=&quot;true&quot;&gt;Files&lt;/a&gt;\r\n                            &lt;a class=&quot;nav-item nav-link&quot; id=&quot;nav-notes-tab&quot; data-toggle=&quot;tab&quot; href=&quot;#nav-notes&quot; role=&quot;tab&quot; aria-controls=&quot;nav-notes&quot; aria-selected=&quot;false&quot;&gt;Notes&lt;/a&gt;\r\n                            &lt;a class=&quot;nav-item nav-link&quot; id=&quot;nav-credentials-tab&quot; data-toggle=&quot;tab&quot; href=&quot;#nav-credentials&quot; role=&quot;tab&quot; aria-controls=&quot;nav-credentials&quot; aria-selected=&quot;false&quot;&gt;Credentials&lt;/a&gt;\r\n                        &lt;/div&gt;\r\n                    &lt;/nav&gt;\r\n                    &lt;div class=&quot;tab-content&quot; id=&quot;nav-tabContent&quot;&gt;\r\n                        &lt;div class=&quot;tab-pane fade show active&quot; id=&quot;nav-files&quot; role=&quot;tabpanel&quot; aria-labelledby=&quot;nav-files-tab&quot;&gt;\r\n                                &lt;form action=&quot;#&quot; enctype=&quot;multipart/form-data&quot; th:action=&quot;@{/file/upload}&quot; method=&quot;POST&quot;&gt;\r\n                                &lt;div class=&quot;container&quot;&gt;\r\n                                    &lt;div class=&quot;row&quot; style=&quot;margin: 1em;&quot;&gt;\r\n                                        &lt;div class=&quot;col-sm-2&quot;&gt;\r\n                                            &lt;label for=&quot;fileUpload&quot;&gt;Upload a New File:&lt;/label&gt;\r\n                                        &lt;/div&gt;\r\n                                        &lt;div class=&quot;col-sm-6&quot;&gt;\r\n                                            &lt;input type=&quot;file&quot; class=&quot;form-control-file&quot; id=&quot;fileUpload&quot; name=&quot;fileUpload&quot;&gt;\r\n                                        &lt;/div&gt;\r\n                                        &lt;div class=&quot;col-sm-4&quot;&gt;\r\n                                            &lt;button type=&quot;submit&quot; class=&quot;btn btn-dark&quot; id=&quot;uploadButton&quot;&gt;Upload&lt;/button&gt;\r\n                                        &lt;/div&gt;\r\n                                    &lt;/div&gt;\r\n                                &lt;/div&gt;\r\n                            &lt;/form&gt;\r\n                            &lt;div th:if=&quot;${not #strings.isEmpty(error)}&quot; th:text=&quot;${error}&quot;&gt;&lt;/div&gt;\r\n                            &lt;div class=&quot;table-responsive&quot;&gt;\r\n                                &lt;table class=&quot;table table-striped&quot; id=&quot;fileTable&quot;&gt;\r\n                                    &lt;thead&gt;\r\n                                        &lt;tr&gt;\r\n                                            &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;&lt;/th&gt;\r\n                                            &lt;th style=&quot;width: 80%&quot; scope=&quot;col&quot;&gt;File Name&lt;/th&gt;\r\n                                        &lt;/tr&gt;\r\n                                    &lt;/thead&gt;\r\n                                    &lt;tbody&gt;\r\n                                    &lt;tr th:each=&quot;file : ${files}&quot;&gt;\r\n                                        &lt;td&gt;\r\n                                            &lt;a target=&quot;_blank&quot; class=&quot;btn btn-success&quot;\r\n                                                   th:href=&quot;@{/file/{file}(file = ${file})}&quot;&gt;View&lt;/a&gt;\r\n                                            &lt;a class=&quot;btn btn-danger&quot;\r\n                                               th:href=&quot;@{/file/delete/{file}(file = ${file})}&quot;&gt;Delete&lt;/a&gt;\r\n                                        &lt;/td&gt;\r\n                                        &lt;td scope=&quot;row&quot; th:text=&quot;${file}&quot;&gt;ExampleFile.txt&lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n                                    &lt;/tbody&gt;\r\n                                    &lt;tbody&gt;\r\n                                        &lt;tr th:each=&quot;file : ${filess}&quot;&gt;\r\n                                            &lt;td scope=&quot;row&quot; th:text=&quot;${file}&quot;&gt;File&lt;/td&gt;\r\n                                        &lt;/tr&gt;\r\n                                    &lt;/tbody&gt;\r\n                                &lt;/table&gt;\r\n    \r\n                            &lt;/div&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;div class=&quot;tab-pane fade&quot; id=&quot;nav-notes&quot; role=&quot;tabpanel&quot; aria-labelledby=&quot;nav-notes-tab&quot;&gt;\r\n                            &lt;button style=&quot;margin: 0.25em;&quot; type=&quot;button&quot; class=&quot;btn btn-info float-right&quot;\r\n                                    onclick=&quot;showNoteModal()&quot; id=&quot;btnAddNewNote&quot;&gt;\r\n                                + Add a New Note\r\n                            &lt;/button&gt;\r\n                            &lt;div class=&quot;table-responsive&quot;&gt;\r\n                                &lt;table class=&quot;table table-striped&quot; id=&quot;userTable&quot;&gt;\r\n                                    &lt;thead&gt;\r\n                                    &lt;tr&gt;\r\n                                        &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;&lt;/th&gt;\r\n                                        &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;Title&lt;/th&gt;\r\n                                        &lt;th style=&quot;width: 60%&quot; scope=&quot;col&quot;&gt;Description&lt;/th&gt;\r\n                                    &lt;/tr&gt;\r\n                                    &lt;/thead&gt;\r\n                                    &lt;tbody&gt;\r\n                                    &lt;tr th:each=&quot;note : ${notes}&quot;&gt;\r\n                                        &lt;td&gt;\r\n                                            &lt;button id=&quot;btnEditNote&quot; type=&quot;button&quot; class=&quot;btn btn-success&quot;\r\n                                                    th:data-id=&quot;${note.getNoteId()}&quot;\r\n                                                    th:data-title=&quot;${note.getNoteTitle()}&quot;\r\n                                                    th:data-description=&quot;${note.getNoteDescription()}&quot;\r\n                                                    th:onclick=&quot;showNoteModal(this.getAttribute(&#39;data-id&#39;), this.getAttribute(&#39;data-title&#39;), this.getAttribute(&#39;data-description&#39;))&quot;&gt;\r\n                                                Edit\r\n                                            &lt;/button&gt;\r\n                                            &lt;a id=&quot;ancDeleteNote&quot; class=&quot;btn btn-danger&quot;\r\n                                               th:href=&quot;@{/note/delete-note/{noteId}(noteId = ${note.getNoteId()})}&quot;&gt;Delete&lt;/a&gt;\r\n                                        &lt;/td&gt;\r\n                                        &lt;th id=&quot;tableNoteTitle&quot; scope=&quot;row&quot; th:text=&quot;${note.getNoteTitle()}&quot;&gt;Example Note Title&lt;/th&gt;\r\n                                        &lt;td id=&quot;tableNoteDescription&quot; th:text=&quot;${note.getNoteDescription()}&quot;&gt;Example Note Description&lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n                                    &lt;/tbody&gt;\r\n                                &lt;/table&gt;\r\n                            &lt;/div&gt;\r\n                            &lt;div class=&quot;modal fade&quot; id=&quot;noteModal&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; aria-labelledby=&quot;noteModalLabel&quot;\r\n                                 aria-hidden=&quot;true&quot;&gt;\r\n                                &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;\r\n                                    &lt;div class=&quot;modal-content&quot;&gt;\r\n                                        &lt;div class=&quot;modal-header&quot;&gt;\r\n                                            &lt;h5 class=&quot;modal-title&quot; id=&quot;noteModalLabel&quot;&gt;Note&lt;/h5&gt;\r\n                                            &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;\r\n                                                &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;\r\n                                            &lt;/button&gt;\r\n                                        &lt;/div&gt;\r\n                                        &lt;div class=&quot;modal-body&quot;&gt;\r\n                                            &lt;form action=&quot;#&quot; method=&quot;POST&quot; th:action=&quot;@{/note/add-note}&quot; th:object=&quot;${newNote}&quot;&gt;\r\n                                                &lt;input type=&quot;hidden&quot; name=&quot;noteId&quot; th:field=&quot;*{noteId}&quot; id=&quot;note-id&quot;&gt;\r\n                                                &lt;div class=&quot;form-group&quot;&gt;\r\n                                                    &lt;label for=&quot;note-title&quot; class=&quot;col-form-label&quot;&gt;Title&lt;/label&gt;\r\n                                                    &lt;input type=&quot;text&quot; name=&quot;noteTitle&quot; th:field=&quot;*{title}&quot; class=&quot;form-control&quot;\r\n                                                           id=&quot;note-title&quot; maxlength=&quot;20&quot; required&gt;\r\n                                                &lt;/div&gt;\r\n                                                &lt;div class=&quot;form-group&quot;&gt;\r\n                                                    &lt;label for=&quot;note-description&quot; class=&quot;col-form-label&quot;&gt;Description&lt;/label&gt;\r\n                                                    &lt;textarea class=&quot;form-control&quot; name=&quot;noteDescription&quot; th:field=&quot;*{description}&quot;\r\n                                                              id=&quot;note-description&quot; rows=&quot;5&quot; maxlength=&quot;1000&quot; required&gt;&lt;/textarea&gt;\r\n                                                &lt;/div&gt;\r\n                                                &lt;button id=&quot;noteSubmit&quot; type=&quot;submit&quot; class=&quot;d-none&quot;&gt;&lt;/button&gt;\r\n                                            &lt;/form&gt;\r\n                                        &lt;/div&gt;\r\n                                        &lt;div class=&quot;modal-footer&quot;&gt;\r\n                                            &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-dismiss=&quot;modal&quot;&gt;Close&lt;/button&gt;\r\n                                            &lt;button type=&quot;button&quot; id=&quot;btnSaveChanges&quot; class=&quot;btn btn-primary&quot; onclick=&quot;$(&#39;#noteSubmit&#39;).click();&quot;&gt;Save\r\n                                                changes\r\n                                            &lt;/button&gt;\r\n                                        &lt;/div&gt;\r\n                                    &lt;/div&gt;\r\n                                &lt;/div&gt;\r\n                            &lt;/div&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;div class=&quot;tab-pane fade&quot; id=&quot;nav-credentials&quot; role=&quot;tabpanel&quot; aria-labelledby=&quot;nav-credentials-tab&quot;&gt;\r\n                            &lt;button style=&quot;margin: 0.25em;&quot; type=&quot;button&quot; class=&quot;btn btn-info float-right&quot; onclick=&quot;showCredentialModal()&quot;&gt;\r\n                                + Add a New Credential\r\n                            &lt;/button&gt;\r\n                            &lt;div class=&quot;table-responsive&quot;&gt;\r\n                                &lt;table class=&quot;table table-striped&quot; th:object=&quot;${credentials}&quot; id=&quot;credentialTable&quot;&gt;\r\n                                    &lt;thead&gt;\r\n                                        &lt;tr&gt;\r\n                                            &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;&lt;/th&gt;\r\n                                            &lt;th style=&quot;width: 35%&quot; scope=&quot;col&quot;&gt;URL&lt;/th&gt;\r\n                                            &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;Username&lt;/th&gt;\r\n                                            &lt;th style=&quot;width: 25%&quot; scope=&quot;col&quot;&gt;Password&lt;/th&gt;\r\n                                        &lt;/tr&gt;\r\n                                    &lt;/thead&gt;\r\n                                    &lt;tbody&gt;\r\n                                    &lt;tr&gt;\r\n                                        &lt;td&gt;\r\n                                            &lt;button type=&quot;button&quot; class=&quot;btn btn-success&quot;&gt;Edit&lt;/button&gt;\r\n                                            &lt;a class=&quot;btn btn-danger&quot;&gt;Delete&lt;/a&gt;\r\n                                        &lt;/td&gt;\r\n                                        &lt;th scope=&quot;row&quot;&gt;Example Credential URL&lt;/th&gt;\r\n                                        &lt;td&gt;Example Credential Username&lt;/td&gt;\r\n                                        &lt;td&gt;Example Credential Password&lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n                                    &lt;/tbody&gt;\r\n                                &lt;/table&gt;\r\n                            &lt;/div&gt;\r\n    \r\n                            &lt;div class=&quot;modal fade&quot; id=&quot;credentialModal&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; aria-labelledby=&quot;credentialModalLabel&quot; aria-hidden=&quot;true&quot;&gt;\r\n                                &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;\r\n                                    &lt;div class=&quot;modal-content&quot;&gt;\r\n                                        &lt;div class=&quot;modal-header&quot;&gt;\r\n                                            &lt;h5 class=&quot;modal-title&quot; id=&quot;credentialModalLabel&quot;&gt;Credential&lt;/h5&gt;\r\n                                            &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;\r\n                                                &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;\r\n                                            &lt;/button&gt;\r\n                                        &lt;/div&gt;\r\n                                        &lt;div class=&quot;modal-body&quot;&gt;\r\n                                            &lt;form action=&quot;#&quot; method=&quot;POST&quot;&gt;\r\n                                                &lt;input type=&quot;hidden&quot; name=&quot;credentialId&quot; id=&quot;credential-id&quot;&gt;\r\n                                                &lt;div class=&quot;form-group&quot;&gt;\r\n                                                    &lt;label for=&quot;credential-url&quot; class=&quot;col-form-label&quot;&gt;URL&lt;/label&gt;\r\n                                                    &lt;input type=&quot;text&quot; name= &quot;url&quot; class=&quot;form-control&quot; id=&quot;credential-url&quot; maxlength=&quot;100&quot; required&gt;\r\n                                                &lt;/div&gt;\r\n                                                &lt;div class=&quot;form-group&quot;&gt;\r\n                                                    &lt;label for=&quot;credential-username&quot; class=&quot;col-form-label&quot;&gt;Username&lt;/label&gt;\r\n                                                    &lt;input type=&quot;text&quot; name= &quot;username&quot; class=&quot;form-control&quot; id=&quot;credential-username&quot; maxlength=&quot;30&quot; required&gt;\r\n                                                &lt;/div&gt;\r\n                                                &lt;div class=&quot;form-group&quot;&gt;\r\n                                                    &lt;label for=&quot;credential-password&quot; class=&quot;col-form-label&quot;&gt;Password&lt;/label&gt;\r\n                                                    &lt;input type=&quot;text&quot; name= &quot;password&quot; class=&quot;form-control&quot; id=&quot;credential-password&quot; maxlength=&quot;30&quot; required&gt;\r\n                                                &lt;/div&gt;\r\n                                                &lt;button id=&quot;credentialSubmit&quot; type=&quot;submit&quot; class=&quot;d-none&quot;&gt;&lt;/button&gt;\r\n                                            &lt;/form&gt;\r\n                                        &lt;/div&gt;\r\n                                        &lt;div class=&quot;modal-footer&quot;&gt;\r\n                                            &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-dismiss=&quot;modal&quot;&gt;Close&lt;/button&gt;\r\n                                            &lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot; onclick=&quot;$(&#39;#credentialSubmit&#39;).click();&quot;&gt;Save changes&lt;/button&gt;\r\n                                        &lt;/div&gt;\r\n                                    &lt;/div&gt;\r\n                                &lt;/div&gt;\r\n                            &lt;/div&gt;\r\n                        &lt;/div&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;script type=&quot;text/javascript&quot; src=&quot;/js/home.js&quot;&gt;&lt;/script&gt;\r\n    \r\n            &lt;script th:src=&quot;@{/js/jquery-slim.min.js}&quot;&gt;&lt;/script&gt;\r\n            &lt;script th:src=&quot;@{/js/popper.min.js}&quot;&gt;&lt;/script&gt;\r\n            &lt;script th:src=&quot;@{/js/bootstrap.min.js}&quot;&gt;&lt;/script&gt;\r\n            &lt;!--For opening the note modal--&gt;\r\n            &lt;script type=&quot;text/javascript&quot;&gt;\r\n                // For opening the note modal\r\n                function showNoteModal(noteId, noteTitle, noteDescription) {\r\n                    $(&#39;#note-id&#39;).val(noteId ? noteId : &#39;&#39;);\r\n                    $(&#39;#note-title&#39;).val(noteTitle ? noteTitle : &#39;&#39;);\r\n                    $(&#39;#note-description&#39;).val(noteDescription ? noteDescription : &#39;&#39;);\r\n                    $(&#39;#noteModal&#39;).modal(&#39;show&#39;);\r\n                }\r\n    \r\n                // For opening the credentials modal\r\n                function showCredentialModal(credentialId, url, username, password) {\r\n                    $(&#39;#credential-id&#39;).val(credentialId ? credentialId : &#39;&#39;);\r\n                    $(&#39;#credential-url&#39;).val(url ? url : &#39;&#39;);\r\n                    $(&#39;#credential-username&#39;).val(username ? username : &#39;&#39;);\r\n                    $(&#39;#credential-password&#39;).val(password ? password : &#39;&#39;);\r\n                    $(&#39;#credentialModal&#39;).modal(&#39;show&#39;);\r\n                }\r\n            &lt;/script&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\nand my result.html template\r\n\r\n\r\n\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;utf-8&quot;&gt;\r\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\r\n\r\n        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot; th:href=&quot;@{/css/bootstrap.min.css}&quot;&gt;\r\n\r\n        &lt;title&gt;Result&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body class=&quot;p-3 mb-2 bg-light text-black&quot;&gt;\r\n        &lt;div class=&quot;container justify-content-center w-50 p-3&quot; style=&quot;margin-top: 5em;&quot;&gt;\r\n            &lt;div th:if=&quot;${result == &#39;success&#39;}&quot; class=&quot;alert alert-success fill-parent&quot;&gt;\r\n                &lt;h1 class=&quot;display-5&quot;&gt;Success&lt;/h1&gt;\r\n                &lt;span&gt;Your changes were successfully saved. Click &lt;a href=&quot;/home&quot; id=&quot;aResultSuccess&quot;&gt;here&lt;/a&gt; to continue.&lt;/span&gt;\r\n            &lt;/div&gt;\r\n            &lt;div th:if=&quot;${result == &#39;notSaved&#39;}&quot; class=&quot;alert alert-danger fill-parent&quot;&gt;\r\n                &lt;h1 class=&quot;display-5&quot;&gt;Error&lt;/h1&gt;\r\n                &lt;span&gt;Your changes were not saved. Click &lt;a&gt;here&lt;/a&gt; to continue.&lt;/span&gt;\r\n            &lt;/div&gt;\r\n            &lt;div th:if=&quot;${result == &#39;error&#39;}&quot; class=&quot;alert alert-danger fill-parent&quot;&gt;\r\n                &lt;h1 class=&quot;display-5&quot;&gt;Error&lt;/h1&gt;\r\n                &lt;span th:text=&quot;${message}&quot;&gt;Example Error Message&lt;/span&gt;\r\n                &lt;span&gt;Click &lt;a href=&quot;/home&quot; id=&quot;aResultFailure&quot;&gt;here&lt;/a&gt; to continue.&lt;/span&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;","title":"Thymeleaf code does not work when I try to iterate through List&lt;String&gt; or String[]","body":"<p>I have this thymeleaf template code snippet</p>\n<pre><code>  `                      &lt;tr th:each=&quot;file : ${files}&quot;&gt;\n                                &lt;td&gt;\n                                    &lt;a target=&quot;_blank&quot; class=&quot;btn btn-success&quot;\n                                       th:href=&quot;@{/home/get-file/{file}(file = ${file})}&quot;&gt;View&lt;/a&gt;\n                                    &lt;a class=&quot;btn btn-danger&quot;\n                                       th:href=&quot;@{/home/delete-file/{file}(file = ${file})}&quot;&gt;Delete&lt;/a&gt;\n                                &lt;/td&gt;\n                                &lt;th scope=&quot;row&quot; th:text=&quot;${file}&quot;&gt;ExampleFile.txt&lt;/th&gt;\n                            &lt;/tr&gt;`\n</code></pre>\n<p>it does not works when files is <code>String[]</code> and nothing is displayed when files is <code>List&lt;String&gt;</code> either</p>\n<p>I have tried changing between the two different types.</p>\n<p>Is there something wrong in the way I iterate? I believe the syntax is correct. Also, this is my <code>model:Model</code> just before the controller endpoint method returns and it looks like all the data is there:</p>\n<p><a href=\"https://i.stack.imgur.com/gMF1L.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>'''UPDATE'''\nThis is how I pass the model:\n'CONTROLLER'</p>\n<pre><code>@PostMapping(&quot;/upload&quot;)\npublic String handleFileUpload(@RequestParam(&quot;fileUpload&quot;) MultipartFile file,\n                               -&gt;&gt;Model model&lt;--) throws IOException {\n    fileService.addFile(SecurityContextHolder.getContext().getAuthentication(), file, model);\n    return &quot;result&quot;;\n}\n</code></pre>\n<p>'SERVICE'</p>\n<pre><code>public int addFile(Authentication authentication, MultipartFile multipartFile, Model model) throws IOException {\n    String userName = authentication.getName();\n    User user = userMapper.getUser(userName);\n    Integer userId = user.getUserId();\n    String fileName = multipartFile.getOriginalFilename();\n    if (!fileIsDuplicate(userId, fileName)) {\n        try {\n            byte[] fileData = multipartFile.getBytes();\n            String contentType = multipartFile.getContentType();\n            String fileSize = String.valueOf(multipartFile.getSize());\n            File file = new File(fileName, contentType, fileSize, (long)userId, fileData);\n            int id = fileMapper.insertFile(file);\n      -----&gt; -------&gt;&gt;&gt;model.addAttribute(&quot;files&quot;, fileMapper.getFilesByUserId(userId).toArray(new String[0]));\n            model.addAttribute(&quot;result&quot;, &quot;success&quot;);\n\n            return id;\n        } catch (IOException e) {\n            e.printStackTrace();\n            model.addAttribute(&quot;result&quot;, &quot;error&quot;);\n            model.addAttribute(&quot;message&quot;, &quot;Exception occurred while trying to save file.&quot;);\n            return -1;\n        }\n    }\n    model.addAttribute(&quot;result&quot;, &quot;error&quot;);\n    model.addAttribute(&quot;message&quot;, &quot;You have tried to add a duplicate file.&quot;);\n    return -1;\n}\n</code></pre>\n<p>Please note that as it can be seen in the debugger session screenshot attached, by the time I am back up at the controller layer and about to return the View, the Model has files values in it, meaning that upon backend controller endpoint method return, the Model is not empty.</p>\n<p>This is my home.html template</p>\n<pre><code>    &lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;utf-8&quot;&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\n        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot; th:href=&quot;@{/css/bootstrap.min.css}&quot;&gt;\n        &lt;title&gt;Home&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body class=&quot;p-3 mb-2 bg-light text-black&quot;&gt;\n        &lt;div class=&quot;container&quot;&gt;\n            &lt;div id=&quot;logoutDiv&quot;&gt;\n                &lt;form action=&quot;#&quot; th:action=&quot;@{/logout}&quot; method=&quot;POST&quot;&gt;\n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-secondary float-right&quot; id=&quot;btn-logout&quot;&gt;Logout&lt;/button&gt;\n                &lt;/form&gt;\n            &lt;/div&gt;\n            &lt;div id=&quot;contentDiv&quot; style=&quot;clear: right;&quot;&gt;\n                &lt;nav style=&quot;clear: right;&quot;&gt;\n                    &lt;div class=&quot;nav nav-tabs&quot; id=&quot;nav-tab&quot; role=&quot;tablist&quot;&gt;\n                        &lt;a class=&quot;nav-item nav-link active&quot; id=&quot;nav-files-tab&quot; data-toggle=&quot;tab&quot; href=&quot;#nav-files&quot; role=&quot;tab&quot; aria-controls=&quot;nav-files&quot; aria-selected=&quot;true&quot;&gt;Files&lt;/a&gt;\n                        &lt;a class=&quot;nav-item nav-link&quot; id=&quot;nav-notes-tab&quot; data-toggle=&quot;tab&quot; href=&quot;#nav-notes&quot; role=&quot;tab&quot; aria-controls=&quot;nav-notes&quot; aria-selected=&quot;false&quot;&gt;Notes&lt;/a&gt;\n                        &lt;a class=&quot;nav-item nav-link&quot; id=&quot;nav-credentials-tab&quot; data-toggle=&quot;tab&quot; href=&quot;#nav-credentials&quot; role=&quot;tab&quot; aria-controls=&quot;nav-credentials&quot; aria-selected=&quot;false&quot;&gt;Credentials&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/nav&gt;\n                &lt;div class=&quot;tab-content&quot; id=&quot;nav-tabContent&quot;&gt;\n                    &lt;div class=&quot;tab-pane fade show active&quot; id=&quot;nav-files&quot; role=&quot;tabpanel&quot; aria-labelledby=&quot;nav-files-tab&quot;&gt;\n                            &lt;form action=&quot;#&quot; enctype=&quot;multipart/form-data&quot; th:action=&quot;@{/file/upload}&quot; method=&quot;POST&quot;&gt;\n                            &lt;div class=&quot;container&quot;&gt;\n                                &lt;div class=&quot;row&quot; style=&quot;margin: 1em;&quot;&gt;\n                                    &lt;div class=&quot;col-sm-2&quot;&gt;\n                                        &lt;label for=&quot;fileUpload&quot;&gt;Upload a New File:&lt;/label&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=&quot;col-sm-6&quot;&gt;\n                                        &lt;input type=&quot;file&quot; class=&quot;form-control-file&quot; id=&quot;fileUpload&quot; name=&quot;fileUpload&quot;&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=&quot;col-sm-4&quot;&gt;\n                                        &lt;button type=&quot;submit&quot; class=&quot;btn btn-dark&quot; id=&quot;uploadButton&quot;&gt;Upload&lt;/button&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/form&gt;\n                        &lt;div th:if=&quot;${not #strings.isEmpty(error)}&quot; th:text=&quot;${error}&quot;&gt;&lt;/div&gt;\n                        &lt;div class=&quot;table-responsive&quot;&gt;\n                            &lt;table class=&quot;table table-striped&quot; id=&quot;fileTable&quot;&gt;\n                                &lt;thead&gt;\n                                    &lt;tr&gt;\n                                        &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;&lt;/th&gt;\n                                        &lt;th style=&quot;width: 80%&quot; scope=&quot;col&quot;&gt;File Name&lt;/th&gt;\n                                    &lt;/tr&gt;\n                                &lt;/thead&gt;\n                                &lt;tbody&gt;\n                                &lt;tr th:each=&quot;file : ${files}&quot;&gt;\n                                    &lt;td&gt;\n                                        &lt;a target=&quot;_blank&quot; class=&quot;btn btn-success&quot;\n                                               th:href=&quot;@{/file/{file}(file = ${file})}&quot;&gt;View&lt;/a&gt;\n                                        &lt;a class=&quot;btn btn-danger&quot;\n                                           th:href=&quot;@{/file/delete/{file}(file = ${file})}&quot;&gt;Delete&lt;/a&gt;\n                                    &lt;/td&gt;\n                                    &lt;td scope=&quot;row&quot; th:text=&quot;${file}&quot;&gt;ExampleFile.txt&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;/tbody&gt;\n                                &lt;tbody&gt;\n                                    &lt;tr th:each=&quot;file : ${filess}&quot;&gt;\n                                        &lt;td scope=&quot;row&quot; th:text=&quot;${file}&quot;&gt;File&lt;/td&gt;\n                                    &lt;/tr&gt;\n                                &lt;/tbody&gt;\n                            &lt;/table&gt;\n\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;tab-pane fade&quot; id=&quot;nav-notes&quot; role=&quot;tabpanel&quot; aria-labelledby=&quot;nav-notes-tab&quot;&gt;\n                        &lt;button style=&quot;margin: 0.25em;&quot; type=&quot;button&quot; class=&quot;btn btn-info float-right&quot;\n                                onclick=&quot;showNoteModal()&quot; id=&quot;btnAddNewNote&quot;&gt;\n                            + Add a New Note\n                        &lt;/button&gt;\n                        &lt;div class=&quot;table-responsive&quot;&gt;\n                            &lt;table class=&quot;table table-striped&quot; id=&quot;userTable&quot;&gt;\n                                &lt;thead&gt;\n                                &lt;tr&gt;\n                                    &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;&lt;/th&gt;\n                                    &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;Title&lt;/th&gt;\n                                    &lt;th style=&quot;width: 60%&quot; scope=&quot;col&quot;&gt;Description&lt;/th&gt;\n                                &lt;/tr&gt;\n                                &lt;/thead&gt;\n                                &lt;tbody&gt;\n                                &lt;tr th:each=&quot;note : ${notes}&quot;&gt;\n                                    &lt;td&gt;\n                                        &lt;button id=&quot;btnEditNote&quot; type=&quot;button&quot; class=&quot;btn btn-success&quot;\n                                                th:data-id=&quot;${note.getNoteId()}&quot;\n                                                th:data-title=&quot;${note.getNoteTitle()}&quot;\n                                                th:data-description=&quot;${note.getNoteDescription()}&quot;\n                                                th:onclick=&quot;showNoteModal(this.getAttribute('data-id'), this.getAttribute('data-title'), this.getAttribute('data-description'))&quot;&gt;\n                                            Edit\n                                        &lt;/button&gt;\n                                        &lt;a id=&quot;ancDeleteNote&quot; class=&quot;btn btn-danger&quot;\n                                           th:href=&quot;@{/note/delete-note/{noteId}(noteId = ${note.getNoteId()})}&quot;&gt;Delete&lt;/a&gt;\n                                    &lt;/td&gt;\n                                    &lt;th id=&quot;tableNoteTitle&quot; scope=&quot;row&quot; th:text=&quot;${note.getNoteTitle()}&quot;&gt;Example Note Title&lt;/th&gt;\n                                    &lt;td id=&quot;tableNoteDescription&quot; th:text=&quot;${note.getNoteDescription()}&quot;&gt;Example Note Description&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;/tbody&gt;\n                            &lt;/table&gt;\n                        &lt;/div&gt;\n                        &lt;div class=&quot;modal fade&quot; id=&quot;noteModal&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; aria-labelledby=&quot;noteModalLabel&quot;\n                             aria-hidden=&quot;true&quot;&gt;\n                            &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;\n                                &lt;div class=&quot;modal-content&quot;&gt;\n                                    &lt;div class=&quot;modal-header&quot;&gt;\n                                        &lt;h5 class=&quot;modal-title&quot; id=&quot;noteModalLabel&quot;&gt;Note&lt;/h5&gt;\n                                        &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;\n                                            &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;\n                                        &lt;/button&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=&quot;modal-body&quot;&gt;\n                                        &lt;form action=&quot;#&quot; method=&quot;POST&quot; th:action=&quot;@{/note/add-note}&quot; th:object=&quot;${newNote}&quot;&gt;\n                                            &lt;input type=&quot;hidden&quot; name=&quot;noteId&quot; th:field=&quot;*{noteId}&quot; id=&quot;note-id&quot;&gt;\n                                            &lt;div class=&quot;form-group&quot;&gt;\n                                                &lt;label for=&quot;note-title&quot; class=&quot;col-form-label&quot;&gt;Title&lt;/label&gt;\n                                                &lt;input type=&quot;text&quot; name=&quot;noteTitle&quot; th:field=&quot;*{title}&quot; class=&quot;form-control&quot;\n                                                       id=&quot;note-title&quot; maxlength=&quot;20&quot; required&gt;\n                                            &lt;/div&gt;\n                                            &lt;div class=&quot;form-group&quot;&gt;\n                                                &lt;label for=&quot;note-description&quot; class=&quot;col-form-label&quot;&gt;Description&lt;/label&gt;\n                                                &lt;textarea class=&quot;form-control&quot; name=&quot;noteDescription&quot; th:field=&quot;*{description}&quot;\n                                                          id=&quot;note-description&quot; rows=&quot;5&quot; maxlength=&quot;1000&quot; required&gt;&lt;/textarea&gt;\n                                            &lt;/div&gt;\n                                            &lt;button id=&quot;noteSubmit&quot; type=&quot;submit&quot; class=&quot;d-none&quot;&gt;&lt;/button&gt;\n                                        &lt;/form&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=&quot;modal-footer&quot;&gt;\n                                        &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-dismiss=&quot;modal&quot;&gt;Close&lt;/button&gt;\n                                        &lt;button type=&quot;button&quot; id=&quot;btnSaveChanges&quot; class=&quot;btn btn-primary&quot; onclick=&quot;$('#noteSubmit').click();&quot;&gt;Save\n                                            changes\n                                        &lt;/button&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;tab-pane fade&quot; id=&quot;nav-credentials&quot; role=&quot;tabpanel&quot; aria-labelledby=&quot;nav-credentials-tab&quot;&gt;\n                        &lt;button style=&quot;margin: 0.25em;&quot; type=&quot;button&quot; class=&quot;btn btn-info float-right&quot; onclick=&quot;showCredentialModal()&quot;&gt;\n                            + Add a New Credential\n                        &lt;/button&gt;\n                        &lt;div class=&quot;table-responsive&quot;&gt;\n                            &lt;table class=&quot;table table-striped&quot; th:object=&quot;${credentials}&quot; id=&quot;credentialTable&quot;&gt;\n                                &lt;thead&gt;\n                                    &lt;tr&gt;\n                                        &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;&lt;/th&gt;\n                                        &lt;th style=&quot;width: 35%&quot; scope=&quot;col&quot;&gt;URL&lt;/th&gt;\n                                        &lt;th style=&quot;width: 20%&quot; scope=&quot;col&quot;&gt;Username&lt;/th&gt;\n                                        &lt;th style=&quot;width: 25%&quot; scope=&quot;col&quot;&gt;Password&lt;/th&gt;\n                                    &lt;/tr&gt;\n                                &lt;/thead&gt;\n                                &lt;tbody&gt;\n                                &lt;tr&gt;\n                                    &lt;td&gt;\n                                        &lt;button type=&quot;button&quot; class=&quot;btn btn-success&quot;&gt;Edit&lt;/button&gt;\n                                        &lt;a class=&quot;btn btn-danger&quot;&gt;Delete&lt;/a&gt;\n                                    &lt;/td&gt;\n                                    &lt;th scope=&quot;row&quot;&gt;Example Credential URL&lt;/th&gt;\n                                    &lt;td&gt;Example Credential Username&lt;/td&gt;\n                                    &lt;td&gt;Example Credential Password&lt;/td&gt;\n                                &lt;/tr&gt;\n                                &lt;/tbody&gt;\n                            &lt;/table&gt;\n                        &lt;/div&gt;\n\n                        &lt;div class=&quot;modal fade&quot; id=&quot;credentialModal&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; aria-labelledby=&quot;credentialModalLabel&quot; aria-hidden=&quot;true&quot;&gt;\n                            &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;\n                                &lt;div class=&quot;modal-content&quot;&gt;\n                                    &lt;div class=&quot;modal-header&quot;&gt;\n                                        &lt;h5 class=&quot;modal-title&quot; id=&quot;credentialModalLabel&quot;&gt;Credential&lt;/h5&gt;\n                                        &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;\n                                            &lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;\n                                        &lt;/button&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=&quot;modal-body&quot;&gt;\n                                        &lt;form action=&quot;#&quot; method=&quot;POST&quot;&gt;\n                                            &lt;input type=&quot;hidden&quot; name=&quot;credentialId&quot; id=&quot;credential-id&quot;&gt;\n                                            &lt;div class=&quot;form-group&quot;&gt;\n                                                &lt;label for=&quot;credential-url&quot; class=&quot;col-form-label&quot;&gt;URL&lt;/label&gt;\n                                                &lt;input type=&quot;text&quot; name= &quot;url&quot; class=&quot;form-control&quot; id=&quot;credential-url&quot; maxlength=&quot;100&quot; required&gt;\n                                            &lt;/div&gt;\n                                            &lt;div class=&quot;form-group&quot;&gt;\n                                                &lt;label for=&quot;credential-username&quot; class=&quot;col-form-label&quot;&gt;Username&lt;/label&gt;\n                                                &lt;input type=&quot;text&quot; name= &quot;username&quot; class=&quot;form-control&quot; id=&quot;credential-username&quot; maxlength=&quot;30&quot; required&gt;\n                                            &lt;/div&gt;\n                                            &lt;div class=&quot;form-group&quot;&gt;\n                                                &lt;label for=&quot;credential-password&quot; class=&quot;col-form-label&quot;&gt;Password&lt;/label&gt;\n                                                &lt;input type=&quot;text&quot; name= &quot;password&quot; class=&quot;form-control&quot; id=&quot;credential-password&quot; maxlength=&quot;30&quot; required&gt;\n                                            &lt;/div&gt;\n                                            &lt;button id=&quot;credentialSubmit&quot; type=&quot;submit&quot; class=&quot;d-none&quot;&gt;&lt;/button&gt;\n                                        &lt;/form&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=&quot;modal-footer&quot;&gt;\n                                        &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-dismiss=&quot;modal&quot;&gt;Close&lt;/button&gt;\n                                        &lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot; onclick=&quot;$('#credentialSubmit').click();&quot;&gt;Save changes&lt;/button&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;script type=&quot;text/javascript&quot; src=&quot;/js/home.js&quot;&gt;&lt;/script&gt;\n\n        &lt;script th:src=&quot;@{/js/jquery-slim.min.js}&quot;&gt;&lt;/script&gt;\n        &lt;script th:src=&quot;@{/js/popper.min.js}&quot;&gt;&lt;/script&gt;\n        &lt;script th:src=&quot;@{/js/bootstrap.min.js}&quot;&gt;&lt;/script&gt;\n        &lt;!--For opening the note modal--&gt;\n        &lt;script type=&quot;text/javascript&quot;&gt;\n            // For opening the note modal\n            function showNoteModal(noteId, noteTitle, noteDescription) {\n                $('#note-id').val(noteId ? noteId : '');\n                $('#note-title').val(noteTitle ? noteTitle : '');\n                $('#note-description').val(noteDescription ? noteDescription : '');\n                $('#noteModal').modal('show');\n            }\n\n            // For opening the credentials modal\n            function showCredentialModal(credentialId, url, username, password) {\n                $('#credential-id').val(credentialId ? credentialId : '');\n                $('#credential-url').val(url ? url : '');\n                $('#credential-username').val(username ? username : '');\n                $('#credential-password').val(password ? password : '');\n                $('#credentialModal').modal('show');\n            }\n        &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>and my result.html template</p>\n\n\n    \n        \n        \n<pre><code>    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot; th:href=&quot;@{/css/bootstrap.min.css}&quot;&gt;\n\n    &lt;title&gt;Result&lt;/title&gt;\n&lt;/head&gt;\n&lt;body class=&quot;p-3 mb-2 bg-light text-black&quot;&gt;\n    &lt;div class=&quot;container justify-content-center w-50 p-3&quot; style=&quot;margin-top: 5em;&quot;&gt;\n        &lt;div th:if=&quot;${result == 'success'}&quot; class=&quot;alert alert-success fill-parent&quot;&gt;\n            &lt;h1 class=&quot;display-5&quot;&gt;Success&lt;/h1&gt;\n            &lt;span&gt;Your changes were successfully saved. Click &lt;a href=&quot;/home&quot; id=&quot;aResultSuccess&quot;&gt;here&lt;/a&gt; to continue.&lt;/span&gt;\n        &lt;/div&gt;\n        &lt;div th:if=&quot;${result == 'notSaved'}&quot; class=&quot;alert alert-danger fill-parent&quot;&gt;\n            &lt;h1 class=&quot;display-5&quot;&gt;Error&lt;/h1&gt;\n            &lt;span&gt;Your changes were not saved. Click &lt;a&gt;here&lt;/a&gt; to continue.&lt;/span&gt;\n        &lt;/div&gt;\n        &lt;div th:if=&quot;${result == 'error'}&quot; class=&quot;alert alert-danger fill-parent&quot;&gt;\n            &lt;h1 class=&quot;display-5&quot;&gt;Error&lt;/h1&gt;\n            &lt;span th:text=&quot;${message}&quot;&gt;Example Error Message&lt;/span&gt;\n            &lt;span&gt;Click &lt;a href=&quot;/home&quot; id=&quot;aResultFailure&quot;&gt;here&lt;/a&gt; to continue.&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n"},{"tags":["java","static","program-entry-point"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1678403978,"post_id":75690819,"comment_id":133530911,"body_markdown":"It&#39;s not? It doesn&#39;t. Your assertions of the first one &quot;working&quot; are specious.","body":"It&#39;s not? It doesn&#39;t. Your assertions of the first one &quot;working&quot; are specious."},{"owner":{"account_id":26423787,"reputation":15,"user_id":20071077,"display_name":"Azi"},"score":0,"creation_date":1678404360,"post_id":75690819,"comment_id":133530971,"body_markdown":"I am checking both in leetcode, and both are working but my questions are 1- How and Why the first one is working without main()?! According to my knowledge, we cannot execute without a main method because when we are running the java program. 2- How I can use main() for the first one?","body":"I am checking both in leetcode, and both are working but my questions are 1- How and Why the first one is working without main()?! According to my knowledge, we cannot execute without a main method because when we are running the java program. 2- How I can use main() for the first one?"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1678404910,"post_id":75690819,"comment_id":133531047,"body_markdown":"1- you can&#39;t. they must have a &quot;tester&quot; program (with a `main()`) that loads the class and executes it (with unseen code). 2- By writing one and calling `new Solution().twoSum()` with an array and a target value. Best of luck!","body":"1- you can&#39;t. they must have a &quot;tester&quot; program (with a <code>main()</code>) that loads the class and executes it (with unseen code). 2- By writing one and calling <code>new Solution().twoSum()</code> with an array and a target value. Best of luck!"}],"answers":[{"comments":[{"owner":{"account_id":26423787,"reputation":15,"user_id":20071077,"display_name":"Azi"},"score":0,"creation_date":1678409934,"post_id":75691175,"comment_id":133531762,"body_markdown":"I wrote:  public static void main(String[] args) {\n        \n    \tSolutiontest1 sol = new Solutiontest1();\n        System.out.println(sol.twoSum({1,2,3}, 4));\n\n    } and recived : Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \n\tSyntax error on token &quot;.&quot;, @ expected after this token\n\tSyntax error, insert &quot;)&quot; to complete SingleMemberAnnotation\n\tSyntax error, insert &quot;SimpleName&quot; to complete ArgumentList\n\tSyntax error on token &quot;)&quot;, delete this token\n\n\tat java_test1/java_test1.Solutiontest1.main(Solutiontest1.java:20)","body":"I wrote:  public static void main(String[] args) {              \tSolutiontest1 sol = new Solutiontest1();         System.out.println(sol.twoSum({1,2,3}, 4));      } and recived : Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems:  \tSyntax error on token &quot;.&quot;, @ expected after this token \tSyntax error, insert &quot;)&quot; to complete SingleMemberAnnotation \tSyntax error, insert &quot;SimpleName&quot; to complete ArgumentList \tSyntax error on token &quot;)&quot;, delete this token  \tat java_test1/java_test1.Solutiontest1.main(Solutiontest1.java:&zwnj;&#8203;20)"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1678436827,"post_id":75691175,"comment_id":133535569,"body_markdown":"I left out new on new int[]. Fixes the answer.","body":"I left out new on new int[]. Fixes the answer."}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678436776,"creation_date":1678407142,"answer_id":75691175,"question_id":75690819,"body_markdown":"Add this to the first definition of Solution and run it:\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        Solution sol = new Solution();\r\n        System.out.println(sol.twoSum(new int[]{1,2,3}, 4));\r\n    \r\n    }   \r\n\r\nFor any Java program to run it requires a main method with signature as follows. It’s the entry-point or start point. If it’s not in your code it is provided by the surrounding code - online or IDE.\r\n\r\n    public static void main(String[] args)\r\n\r\nAny static method (`firstUniqChar`) can be called without referring to an object. A non-static method (`twoSum`) is linked to an object so has to be invoked from an object, in this case `sol`","title":"How should I use Main and static for this block of code?","body":"<p>Add this to the first definition of Solution and run it:</p>\n<pre><code>public static void main(String[] args) {\n    \n    Solution sol = new Solution();\n    System.out.println(sol.twoSum(new int[]{1,2,3}, 4));\n\n}   \n</code></pre>\n<p>For any Java program to run it requires a main method with signature as follows. It’s the entry-point or start point. If it’s not in your code it is provided by the surrounding code - online or IDE.</p>\n<pre><code>public static void main(String[] args)\n</code></pre>\n<p>Any static method (<code>firstUniqChar</code>) can be called without referring to an object. A non-static method (<code>twoSum</code>) is linked to an object so has to be invoked from an object, in this case <code>sol</code></p>\n"}],"owner":{"account_id":26423787,"reputation":15,"user_id":20071077,"display_name":"Azi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75691175,"answer_count":1,"score":0,"last_activity_date":1678436776,"creation_date":1678402737,"question_id":75690819,"body_markdown":"I have a question regarding these two blocks of code:\r\nThe first one:\r\n\r\n    class Solution {\r\n    public  int[] twoSum(int[] nums, int target) {\r\n     int[] result= new int[2];\r\n     for (int i=0; i&lt;nums.length; i++){\r\n        for (int j=i+1; j&lt;nums.length; j++){\r\n             if ( nums[i]+nums[j]==target){\r\n                result[0]=i;\r\n                result[1]=j;\r\n             }\r\n         }\r\n     }\r\n     return(result);\r\n     }\r\n    }\r\n\r\nand the second one:\r\n\r\n    import java. util.*;\r\n\r\n    public class Solution {\r\n\r\n\tpublic static int firstUniqChar(String s) {\r\n\t\tHashMap&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n\t\t\r\n\t\tString[] s_arr = s.split(&quot;&quot;);\r\n\r\n\t\tfor (int i = 0; i &lt; s_arr.length; i++) {\r\n\t\t\tif (map.containsKey(s_arr[i])) {\r\n\t\t\t\r\n\t\t\t\tmap.put(s_arr[i], map.get(s_arr[i]) + 1);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t    map.put(s_arr[i], 1);\r\n\t\t}\r\n\t\t\r\n       \tfor (int i = 0; i &lt; s_arr.length; i++) {\r\n\t\t\tif (map.get(s_arr[i]) == 1) {\r\n\t\t\t\treturn i;\r\n\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t    \r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.println(firstUniqChar(sc.nextLine()));\r\n\r\n    }   \r\n\r\n    }\r\n\r\nMy question is why and how the first code is working without &quot;main&quot;!! And if I want to put &quot;main&quot; for the first code how should I do that? I follow the pattern of the second code regarding static and main and.. but it does not work.\r\nThanks\r\n\r\n\r\n    ","title":"How should I use Main and static for this block of code?","body":"<p>I have a question regarding these two blocks of code:\nThe first one:</p>\n<pre><code>class Solution {\npublic  int[] twoSum(int[] nums, int target) {\n int[] result= new int[2];\n for (int i=0; i&lt;nums.length; i++){\n    for (int j=i+1; j&lt;nums.length; j++){\n         if ( nums[i]+nums[j]==target){\n            result[0]=i;\n            result[1]=j;\n         }\n     }\n }\n return(result);\n }\n}\n</code></pre>\n<p>and the second one:</p>\n<pre><code>import java. util.*;\n\npublic class Solution {\n\npublic static int firstUniqChar(String s) {\n    HashMap&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\n    \n    String[] s_arr = s.split(&quot;&quot;);\n\n    for (int i = 0; i &lt; s_arr.length; i++) {\n        if (map.containsKey(s_arr[i])) {\n        \n            map.put(s_arr[i], map.get(s_arr[i]) + 1);\n        }\n        else\n            map.put(s_arr[i], 1);\n    }\n    \n    for (int i = 0; i &lt; s_arr.length; i++) {\n        if (map.get(s_arr[i]) == 1) {\n            return i;\n        \n        }\n    }\n    return -1;\n}\n\npublic static void main(String[] args) {\n    \n    Scanner sc = new Scanner(System.in);\n    System.out.println(firstUniqChar(sc.nextLine()));\n\n}   \n\n}\n</code></pre>\n<p>My question is why and how the first code is working without &quot;main&quot;!! And if I want to put &quot;main&quot; for the first code how should I do that? I follow the pattern of the second code regarding static and main and.. but it does not work.\nThanks</p>\n"},{"tags":["java","logging","reflection"],"comments":[{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":0,"creation_date":1349945505,"post_id":12835677,"comment_id":17365828,"body_markdown":"I don&#39;t quite follow, do you want to print the method you&#39;re in or the method you&#39;ve just called? And should Calc start with a lower case c?","body":"I don&#39;t quite follow, do you want to print the method you&#39;re in or the method you&#39;ve just called? And should Calc start with a lower case c?"},{"owner":{"account_id":327885,"reputation":583,"user_id":650521,"accept_rate":37,"display_name":"user650521"},"score":0,"creation_date":1349945575,"post_id":12835677,"comment_id":17365857,"body_markdown":"@berry the method tht ive just called","body":"@berry the method tht ive just called"},{"owner":{"account_id":407825,"reputation":22412,"user_id":778118,"accept_rate":67,"display_name":"jahroy"},"score":1,"creation_date":1349946530,"post_id":12835677,"comment_id":17366275,"body_markdown":"Where do you want the _printing_ to take place?  Are you trying to write to a log file?  If so, look into _Log4J_.  It&#39;s a logging library for java.","body":"Where do you want the <i>printing</i> to take place?  Are you trying to write to a log file?  If so, look into <i>Log4J</i>.  It&#39;s a logging library for java."}],"answers":[{"comments":[{"owner":{"account_id":327885,"reputation":583,"user_id":650521,"accept_rate":37,"display_name":"user650521"},"score":0,"creation_date":1349946060,"post_id":12835727,"comment_id":17366067,"body_markdown":"im getting \nException in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 6\n\tat Reflections.getCallerMethodName(Reflections.java:32)\n\tat Reflections.main(Reflections.java:41)","body":"im getting  Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 6 \tat Reflections.getCallerMethodName(Reflections.java:32) \tat Reflections.main(Reflections.java:41)"},{"owner":{"account_id":1635514,"reputation":1970,"user_id":1509129,"accept_rate":76,"display_name":"urir"},"score":0,"creation_date":1349946190,"post_id":12835727,"comment_id":17366130,"body_markdown":"probably because &#39;main&#39; has no &#39;caller&#39;","body":"probably because &#39;main&#39; has no &#39;caller&#39;"}],"tags":[],"owner":{"account_id":1635514,"reputation":1970,"user_id":1509129,"accept_rate":76,"display_name":"urir"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1349945501,"creation_date":1349945501,"answer_id":12835727,"question_id":12835677,"body_markdown":"\tprivate static final int CLIENT_CODE_STACK_INDEX;\r\n\r\n\tstatic {\r\n\t\t// Finds out the index of &quot;this code&quot; in the returned stack trace - funny but it differs in JDK 1.5 and 1.6\r\n\t\tint i = 0;\r\n\t\tfor (StackTraceElement ste : Thread.currentThread().getStackTrace()) {\r\n\t\t\ti++;\r\n\t\t\tif (ste.getClassName().equals(Resource.class.getName())) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tCLIENT_CODE_STACK_INDEX = i;\r\n\t}\r\n\r\n\tpublic static String getCurrentMethodName() {\r\n\t\treturn Thread.currentThread().getStackTrace()[CLIENT_CODE_STACK_INDEX].getMethodName();\r\n\t}\r\n\tpublic static String getCallerMethodName() {\r\n\t\treturn Thread.currentThread().getStackTrace()[CLIENT_CODE_STACK_INDEX+1].getMethodName();\r\n\t}","title":"How to get the name of called method in java","body":"<pre><code>private static final int CLIENT_CODE_STACK_INDEX;\n\nstatic {\n    // Finds out the index of \"this code\" in the returned stack trace - funny but it differs in JDK 1.5 and 1.6\n    int i = 0;\n    for (StackTraceElement ste : Thread.currentThread().getStackTrace()) {\n        i++;\n        if (ste.getClassName().equals(Resource.class.getName())) {\n            break;\n        }\n    }\n    CLIENT_CODE_STACK_INDEX = i;\n}\n\npublic static String getCurrentMethodName() {\n    return Thread.currentThread().getStackTrace()[CLIENT_CODE_STACK_INDEX].getMethodName();\n}\npublic static String getCallerMethodName() {\n    return Thread.currentThread().getStackTrace()[CLIENT_CODE_STACK_INDEX+1].getMethodName();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":327885,"reputation":583,"user_id":650521,"accept_rate":37,"display_name":"user650521"},"score":0,"creation_date":1349947230,"post_id":12835743,"comment_id":17366618,"body_markdown":"I cannot edit the methods im calling. I should be able to achive this goal from the method where i called the method.","body":"I cannot edit the methods im calling. I should be able to achive this goal from the method where i called the method."}],"tags":[],"owner":{"account_id":407825,"reputation":22412,"user_id":778118,"accept_rate":67,"display_name":"jahroy"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1349946058,"creation_date":1349945573,"answer_id":12835743,"question_id":12835677,"body_markdown":"As the very simplest approach, remember you can always call `this.getClass().getName()`:\r\n\r\n    class SimpleCalculator {\r\n    \r\n        public int add(int a, int b) {\r\n            System.out.println(this.getClass().getName() +\r\n                    &quot; - adding &quot; + a + &quot; and &quot; + b);\r\n            return a + b;\r\n        }\r\n    }\r\n\r\n\r\n---\r\n\r\nAnother common approach is to use a  logging library like [Log4J][1].\r\n\r\n  - [Log4J API][2]\r\n\r\nThe class you&#39;d be using is [Logger][3]\r\n\r\nYou configure _Log4J_ to write to a certain file.\r\n\r\nEach class declares a _Logger object_ that prints messages to a file.\r\n\r\nEach message begins with the name of the class that generated the message.\r\n\r\n\r\n    class SimpleCalculator {\r\n\r\n        Logger calcLogger = Logger.getLogger(SimpleCalculator.class);\r\n\r\n        public int add(int a, int b) {\r\n            calcLogger.debug(&quot;add - adding &quot; + a + &quot; and &quot; + b);\r\n            return a + b;\r\n        }\r\n    }\r\n\r\n\r\n... or you could use a method like @urir suggests.\r\n\r\n... or you could get crazy and use [AOP][4].\r\n\r\n\r\n  [1]: http://www.tutorialspoint.com/log4j/index.htm\r\n  [2]: http://logging.apache.org/log4j/1.2/apidocs/\r\n  [3]: http://logging.apache.org/log4j/1.2/apidocs/\r\n  [4]: http://en.wikipedia.org/wiki/Aspect-oriented_programming","title":"How to get the name of called method in java","body":"<p>As the very simplest approach, remember you can always call <code>this.getClass().getName()</code>:</p>\n\n<pre><code>class SimpleCalculator {\n\n    public int add(int a, int b) {\n        System.out.println(this.getClass().getName() +\n                \" - adding \" + a + \" and \" + b);\n        return a + b;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Another common approach is to use a  logging library like <a href=\"http://www.tutorialspoint.com/log4j/index.htm\" rel=\"nofollow\">Log4J</a>.</p>\n\n<ul>\n<li><a href=\"http://logging.apache.org/log4j/1.2/apidocs/\" rel=\"nofollow\">Log4J API</a></li>\n</ul>\n\n<p>The class you'd be using is <a href=\"http://logging.apache.org/log4j/1.2/apidocs/\" rel=\"nofollow\">Logger</a></p>\n\n<p>You configure <em>Log4J</em> to write to a certain file.</p>\n\n<p>Each class declares a <em>Logger object</em> that prints messages to a file.</p>\n\n<p>Each message begins with the name of the class that generated the message.</p>\n\n<pre><code>class SimpleCalculator {\n\n    Logger calcLogger = Logger.getLogger(SimpleCalculator.class);\n\n    public int add(int a, int b) {\n        calcLogger.debug(\"add - adding \" + a + \" and \" + b);\n        return a + b;\n    }\n}\n</code></pre>\n\n<p>... or you could use a method like @urir suggests.</p>\n\n<p>... or you could get crazy and use <a href=\"http://en.wikipedia.org/wiki/Aspect-oriented_programming\" rel=\"nofollow\">AOP</a>.</p>\n"},{"tags":[],"owner":{"account_id":1883570,"reputation":264,"user_id":1703232,"accept_rate":57,"display_name":"mahipal purohit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1349945994,"creation_date":1349945994,"answer_id":12835883,"question_id":12835677,"body_markdown":"user Calculator.getClass().getName());for finding name of class and  Calculator.getMethod();\r\n\r\n\r\nor use System.out.println( &quot;I was called by &quot; + e.getStackTrace()[1].getClassName() + \r\n                             &quot;.&quot; +\r\n                             e.getStackTrace()[1].getMethodName() + \r\n                             &quot;()!&quot; );","title":"How to get the name of called method in java","body":"<p>user Calculator.getClass().getName());for finding name of class and  Calculator.getMethod();</p>\n\n<p>or use System.out.println( \"I was called by \" + e.getStackTrace()[1].getClassName() + \n                             \".\" +\n                             e.getStackTrace()[1].getMethodName() + \n                             \"()!\" );</p>\n"},{"tags":[],"owner":{"account_id":7591312,"reputation":77,"user_id":5758892,"display_name":"Siddu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678436685,"creation_date":1678436685,"answer_id":75693729,"question_id":12835677,"body_markdown":"Check below lines by changing index value:\r\n\r\n   \r\n\r\n     System.out.println(&quot;Name of Caller method:&quot; \r\n    + new Throwable().getStackTrace()[1].getMethodName());\r\n    \r\n        System.out.println(&quot;Name of Current method:&quot; \r\n    + new Throwable().getStackTrace()[0].getMethodName());\r\n    \t\t\t","title":"How to get the name of called method in java","body":"<p>Check below lines by changing index value:</p>\n<pre><code> System.out.println(&quot;Name of Caller method:&quot; \n+ new Throwable().getStackTrace()[1].getMethodName());\n\n    System.out.println(&quot;Name of Current method:&quot; \n+ new Throwable().getStackTrace()[0].getMethodName());\n            \n</code></pre>\n"}],"owner":{"account_id":327885,"reputation":583,"user_id":650521,"accept_rate":37,"display_name":"user650521"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2385,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1678436685,"creation_date":1349945345,"question_id":12835677,"body_markdown":"Suppose I have a method like this\r\n\r\n    Calculator calc;\r\n    public void testMethod(){\r\n    -----\r\n    ----\r\n    Calc.add(1,2);\r\n    -----\r\n    -------\r\n    }\r\n\r\nNow I want print Calculator.add at the end of the function, i.e i want to print the classname.printname at the end of the function. The printing should be generic enough that I can use the same for other methods as well. How to achieve this goal.\r\n\r\nThanks in advance","title":"How to get the name of called method in java","body":"<p>Suppose I have a method like this</p>\n\n<pre><code>Calculator calc;\npublic void testMethod(){\n-----\n----\nCalc.add(1,2);\n-----\n-------\n}\n</code></pre>\n\n<p>Now I want print Calculator.add at the end of the function, i.e i want to print the classname.printname at the end of the function. The printing should be generic enough that I can use the same for other methods as well. How to achieve this goal.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","hibernate","jpa","inheritance"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1678444227,"post_id":75693699,"comment_id":133537680,"body_markdown":"`@MappedSuperclass` is definitely a possible and pretty easy solution. Rename `ParentEntity` to something like `AbstractParent`, recreate a new `ParentEntity` that extends this `AbstractParent`. Also have `ChildEntity` extend the `AbstractParent`. No need to move any code around","body":"<code>@MappedSuperclass</code> is definitely a possible and pretty easy solution. Rename <code>ParentEntity</code> to something like <code>AbstractParent</code>, recreate a new <code>ParentEntity</code> that extends this <code>AbstractParent</code>. Also have <code>ChildEntity</code> extend the <code>AbstractParent</code>. No need to move any code around"}],"owner":{"account_id":17401635,"reputation":56,"user_id":12610411,"display_name":"sushiLover"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678436435,"creation_date":1678436435,"question_id":75693699,"body_markdown":"I have created a view for a table. This view is a copy of the table, except that it filters the elements. Nothing complicated.\r\nI am on a big project, the @Entity code of the table is already quite extensive and complex.\r\nKnowing that duplicating this code, will imply that the developers working on it, will have to take into account that the two codes must be identical, but with two different @Entity. \r\nI wanted to know if there was a way to use polymorphism to avoid having to copy the existing code for the view.\r\n\r\nI&#39;ve already looked at the @Inheritance documentation, but none of them match. The problem is that Hibernate interprets &#39;extends&#39; on some behaviors.\r\nFor example:\r\n- InheritanceType.SINGLE_TABLE, the default behavior, considers both @Entity as being for the same table, but I want to retrieve data from 2 different tables/views.\r\n- InheritanceType.TABLE_PER_CLASS, retrieves elements from the child table and adds them to the parent table. \r\n\r\n \r\nI just want to use the same behavior but for a different table.\r\n\r\nI also thought about using @MappedSuperclass, but the problem is that it involves moving a significant amount of code. The code of the concerned @Entity is several thousand lines long. \r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;PARENT&quot;)\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public class ParentEntity implements Serializable {\r\n        // ...\r\n    }\r\n    \r\n    @Entity\r\n    @Table(name = &quot;PARENT_VIEW&quot;)\r\n    public class ChildEntity extends ParentEntity implements Serializable {\r\n        // ...\r\n    }\r\n\r\nThis question has been asked before, but has never been resolved\r\n\r\nhttps://stackoverflow.com/questions/40255503/hibernate-inheritance-with-table-as-parent-and-view-as-child","title":"Using polymorphism for the @Entity of a view","body":"<p>I have created a view for a table. This view is a copy of the table, except that it filters the elements. Nothing complicated.\nI am on a big project, the @Entity code of the table is already quite extensive and complex.\nKnowing that duplicating this code, will imply that the developers working on it, will have to take into account that the two codes must be identical, but with two different @Entity.\nI wanted to know if there was a way to use polymorphism to avoid having to copy the existing code for the view.</p>\n<p>I've already looked at the @Inheritance documentation, but none of them match. The problem is that Hibernate interprets 'extends' on some behaviors.\nFor example:</p>\n<ul>\n<li>InheritanceType.SINGLE_TABLE, the default behavior, considers both @Entity as being for the same table, but I want to retrieve data from 2 different tables/views.</li>\n<li>InheritanceType.TABLE_PER_CLASS, retrieves elements from the child table and adds them to the parent table.</li>\n</ul>\n<p>I just want to use the same behavior but for a different table.</p>\n<p>I also thought about using @MappedSuperclass, but the problem is that it involves moving a significant amount of code. The code of the concerned @Entity is several thousand lines long.</p>\n<pre><code>@Entity\n@Table(name = &quot;PARENT&quot;)\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class ParentEntity implements Serializable {\n    // ...\n}\n\n@Entity\n@Table(name = &quot;PARENT_VIEW&quot;)\npublic class ChildEntity extends ParentEntity implements Serializable {\n    // ...\n}\n</code></pre>\n<p>This question has been asked before, but has never been resolved</p>\n<p><a href=\"https://stackoverflow.com/questions/40255503/hibernate-inheritance-with-table-as-parent-and-view-as-child\">Hibernate @Inheritance with table as parent and view as child</a></p>\n"},{"tags":["java","docker","selenium-webdriver","docker-compose"],"comments":[{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":1,"creation_date":1678272079,"post_id":75671722,"comment_id":133499214,"body_markdown":"You have url hardcoded in your java code. You should use container name as host if you want to connect from one container to another over common docker network. In your case url should be `http://chrome:4444/wd/hub`","body":"You have url hardcoded in your java code. You should use container name as host if you want to connect from one container to another over common docker network. In your case url should be <code>http:&#47;&#47;chrome:4444&#47;wd&#47;hub</code>"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1678275300,"post_id":75671722,"comment_id":133500016,"body_markdown":"127.0.0.1 is the IP address of the host name `localhost`, and in Docker that almost always refers to the current container only.","body":"127.0.0.1 is the IP address of the host name <code>localhost</code>, and in Docker that almost always refers to the current container only."}],"answers":[{"comments":[{"owner":{"account_id":20139426,"reputation":74,"user_id":14769635,"display_name":"samaritan"},"score":0,"creation_date":1684889712,"post_id":75693615,"comment_id":134582497,"body_markdown":"But the question owner says: Connecting via http://localhost:4444/wd/hub only worked when I ran the jar without docker, using a chromedriver file downloaded from the internet, pasting it into the root of the project.I relate it because now i have the same error.and using neither : chrome - localhost -selenium-hub seems working","body":"But the question owner says: Connecting via <a href=\"http://localhost:4444/wd/hub\" rel=\"nofollow noreferrer\">localhost:4444/wd/hub</a> only worked when I ran the jar without docker, using a chromedriver file downloaded from the internet, pasting it into the root of the project.I relate it because now i have the same error.and using neither : chrome - localhost -selenium-hub seems working"}],"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678435798,"creation_date":1678435798,"answer_id":75693615,"question_id":75671722,"body_markdown":"The problem is that you have the url to your chrome instance hardcoded in your code and it points to `localhost`.\r\n\r\nWhen container are connected over common network you should use service name as DNS name to connect to it. So in your case url should be `http://chrome:4444/wd/hub` when \r\nconnecting from `web` service to `chrome` service.","title":"Docker compose selenium and java: connection problem","body":"<p>The problem is that you have the url to your chrome instance hardcoded in your code and it points to <code>localhost</code>.</p>\n<p>When container are connected over common network you should use service name as DNS name to connect to it. So in your case url should be <code>http://chrome:4444/wd/hub</code> when\nconnecting from <code>web</code> service to <code>chrome</code> service.</p>\n"}],"owner":{"account_id":16228733,"reputation":26,"user_id":11718232,"display_name":"tabool"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":661,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1678435798,"creation_date":1678270403,"question_id":75671722,"body_markdown":"I have docker-compose with java project and selenium chrome \r\n```\r\nversion: &quot;3.9&quot;\r\n\r\nservices:\r\n  web:\r\n    container_name: web\r\n    image: web:latest\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    build:\r\n      dockerfile: Dockerfile\r\n      context: .\r\n      args:\r\n        - JAR_FILE=target/*.jar\r\n    depends_on:\r\n      - chrome\r\n    networks:\r\n      - network\r\n\r\n  chrome:\r\n    image: seleniarm/standalone-chromium:latest\r\n    shm_size: 2g\r\n    privileged: true\r\n    restart: &#39;always&#39;\r\n    ports:\r\n      - &quot;4444:4444&quot;\r\n      - &quot;5900:5900&quot;\r\n      - &quot;7900:7900&quot;\r\n    networks:\r\n      - network\r\n```\r\nI&#39;m trying to connect to chrome from java\r\n```\r\n        WebDriver webDriver;\r\n        DesiredCapabilities dc = new DesiredCapabilities();\r\n        dc.setBrowserName(&quot;chrome&quot;);\r\n        dc.setPlatform(Platform.LINUX);\r\n        try {\r\n            URI uri = URI.create(&quot;http://localhost:4444/wd/hub&quot;);\r\n            webDriver = new RemoteWebDriver(uri.toURL(), dc);\r\n        } catch (Exception e) {\r\n            log.error(&quot;Couldn&#39;t connect WEB_DRIVER&quot;);\r\n            e.printStackTrace();\r\n            throw new RuntimeException(e);\r\n        }\r\n```\r\nThis url http://localhost:4444/wd/hub gives me error and this is not because RemoteWebDriver, i have tried different java drivers and got same error\r\n```\r\nCaused by: org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n \r\n2023-03-08T09:01:20.132826587Z Host info: host: &#39;c679ce5cf46d&#39;, ip: &#39;172.20.0.6&#39;\r\n2023-03-08T09:01:20.132828628Z Build info: version: &#39;4.5.3&#39;, revision: &#39;4b786a1e430&#39;\r\n2023-03-08T09:01:20.132830462Z System info: os.name: &#39;Linux&#39;, os.arch: &#39;aarch64&#39;, os.version: &#39;5.10.124-linuxkit&#39;, java.version: &#39;17.0.2&#39;\r\n2023-03-08T09:01:20.132832545Z Driver info: org.openqa.selenium.remote.RemoteWebDriver\r\n2023-03-08T09:01:20.132834462Z Command: [null, newSession {capabilities=[Capabilities {browserName: chrome, platformName: LINUX}], desiredCapabilities=Capabilities {browserName: chrome, platformName: LINUX}}]\r\n2023-03-08T09:01:20.132836920Z Capabilities {}\r\n2023-03-08T09:01:20.132839295Z \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:559) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132841253Z \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:242) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132843295Z \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132845420Z \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:139) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132847462Z \tat com.careerseeker.siteparser.service.impl.SiteParserServiceImpl.getDriver(MyServiceImpl.java:222) ~[classes!/:1.0-SNAPSHOT]\r\n2023-03-08T09:01:20.132849587Z \t... 25 common frames omitted\r\n\r\n2023-03-08T09:01:20.132851962Z Caused by: java.io.UncheckedIOException: java.net.ConnectException: Connection refused: localhost/127.0.0.1:4444\r\n\r\n2023-03-08T09:01:20.132853920Z \tat org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:73) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132856087Z \tat org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42) ~[selenium-http-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132858087Z \tat org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56) ~[selenium-http-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132873837Z \tat org.openqa.selenium.remote.http.netty.NettyHttpHandler.execute(NettyHttpHandler.java:49) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132876128Z \tat org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42) ~[selenium-http-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132879337Z \tat org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56) ~[selenium-http-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132885587Z \tat org.openqa.selenium.remote.http.netty.NettyClient.execute(NettyClient.java:99) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132890628Z \tat org.openqa.selenium.remote.tracing.TracedHttpClient.execute(TracedHttpClient.java:55) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132892628Z \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:120) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132894587Z \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:102) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132896545Z \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132898587Z \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132900545Z \tat org.openqa.selenium.remote.TracedCommandExecutor.execute(TracedCommandExecutor.java:51) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132902503Z \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:541) ~[selenium-remote-driver-4.5.3.jar!/:na]\r\n2023-03-08T09:01:20.132904503Z \t... 29 common frames omitted\r\n\r\n2023-03-08T09:01:20.132906337Z Caused by: java.net.ConnectException: Connection refused: localhost/127.0.0.1:4444\r\n\r\n2023-03-08T09:01:20.132908670Z \tat org.asynchttpclient.netty.channel.NettyConnectListener.onFailure(NettyConnectListener.java:179) ~[async-http-client-2.12.3.jar!/:na]\r\n2023-03-08T09:01:20.132910628Z \tat org.asynchttpclient.netty.channel.NettyChannelConnector$1.onFailure(NettyChannelConnector.java:108) ~[async-http-client-2.12.3.jar!/:na]\r\n2023-03-08T09:01:20.132912628Z \tat org.asynchttpclient.netty.SimpleChannelFutureListener.operationComplete(SimpleChannelFutureListener.java:28) ~[async-http-client-2.12.3.jar!/:na]\r\n2023-03-08T09:01:20.132914712Z \tat org.asynchttpclient.netty.SimpleChannelFutureListener.operationComplete(SimpleChannelFutureListener.java:20) ~[async-http-client-2.12.3.jar!/:na]\r\n2023-03-08T09:01:20.132917170Z \tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:578) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132919128Z \tat io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:571) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132924087Z \tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:550) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132929170Z \tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:491) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132936920Z \tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:616) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132940170Z \tat io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:609) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132942337Z \tat io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:117) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132947003Z \tat io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:321) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132951045Z \tat io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:337) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132953587Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132956045Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132958545Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132960670Z \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132962795Z \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132965003Z \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132970420Z \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132977003Z \t... 1 common frames omitted\r\n\r\n2023-03-08T09:01:20.132979128Z Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:4444\r\n\r\n2023-03-08T09:01:20.132981045Z Caused by: java.net.ConnectException: Connection refused\r\n\r\n2023-03-08T09:01:20.132982878Z \tat java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\r\n2023-03-08T09:01:20.132984753Z \tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\r\n2023-03-08T09:01:20.132987878Z \tat java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946) ~[na:na]\r\n2023-03-08T09:01:20.132992837Z \tat io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132994878Z \tat io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.132996878Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.133002295Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.133007712Z \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.133011212Z \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.133014253Z \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.133020003Z \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.133022045Z \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\r\n2023-03-08T09:01:20.133024212Z \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\nI can see that my chrome starts at  http://172.20.0.4:4444\r\n\r\nhere is some logs from container\r\n```\r\nStarting Selenium Grid Standalone...\r\n2023-03-08T09:00:02.127960717Z Tracing is disabled\r\n2023-03-08T09:00:03.079255718Z 09:00:03.073 INFO [LoggingOptions.configureLogEncoding] - Using the system default encoding\r\n2023-03-08T09:00:03.082264760Z 09:00:03.081 INFO [OpenTelemetryTracer.createTracer] - Using OpenTelemetry for tracing\r\n2023-03-08T09:00:04.266523135Z 09:00:04.265 INFO [NodeOptions.getSessionFactories] - Detected 5 available processors\r\n2023-03-08T09:00:04.318001468Z 09:00:04.317 INFO [NodeOptions.report] - Adding chrome for {&quot;browserVersion&quot;: &quot;110.0&quot;,&quot;se:noVncPort&quot;: 7900,&quot;browserName&quot;: &quot;chrome&quot;,&quot;platformName&quot;: &quot;LINUX&quot;,&quot;se:vncEnabled&quot;: true} 1 times\r\n2023-03-08T09:00:04.346006135Z 09:00:04.345 INFO [Node.&lt;init&gt;] - Binding additional locator mechanisms: relative\r\n2023-03-08T09:00:04.381115343Z 09:00:04.380 INFO [GridModel.setAvailability] - Switching Node 57ecd074-632e-4989-ba29-a9b0e61df39e (uri: http://172.20.0.4:4444) from DOWN to UP\r\n2023-03-08T09:00:04.393940177Z 09:00:04.392 INFO [LocalDistributor.add] - Added node 57ecd074-632e-4989-ba29-a9b0e61df39e at http://172.20.0.4:4444. Health check every 120s\r\n2023-03-08T09:00:04.748166885Z 09:00:04.746 INFO [Standalone.execute] - Started Selenium Standalone 4.8.0 (revision 267030adea): http://172.20.0.4:4444\r\n```\r\n\r\nand if i use http://172.20.0.4:4444/wd/hub instead of http://localhost:4444/wd/hub for connection, everything is fine with connection.\r\n\r\nThis message confusing me -&gt; Connection refused: localhost/127.0.0.1:4444(I didn&#39;t specify it anywhere 127.0.0.1)\r\n\r\nI can specify url like http://172.20.0.4:4444/wd/hub, but i shouldn&#39;t, because sometimes chrome starts at different urls. Here is some IPs i saw before when chrome was starting\r\n```\r\n172.20.0.4\r\n172.17.0.3\r\n172.17.0.4\r\n172.18.0.3\r\n172.18.0.4\r\n172.19.0.3\r\n172.19.0.4\r\n```\r\nConnecting via http://localhost:4444/wd/hub only worked when I ran the jar without docker, using a chromedriver file downloaded from the internet, pasting it into the root of the project\r\n***\r\n\r\n  Please help to connect to chrome container correctly so that the java code does\r\n   not depend on different addresses on which chrome is started.\r\n\r\n***","title":"Docker compose selenium and java: connection problem","body":"<p>I have docker-compose with java project and selenium chrome</p>\n<pre><code>version: &quot;3.9&quot;\n\nservices:\n  web:\n    container_name: web\n    image: web:latest\n    ports:\n      - &quot;8080:8080&quot;\n    build:\n      dockerfile: Dockerfile\n      context: .\n      args:\n        - JAR_FILE=target/*.jar\n    depends_on:\n      - chrome\n    networks:\n      - network\n\n  chrome:\n    image: seleniarm/standalone-chromium:latest\n    shm_size: 2g\n    privileged: true\n    restart: 'always'\n    ports:\n      - &quot;4444:4444&quot;\n      - &quot;5900:5900&quot;\n      - &quot;7900:7900&quot;\n    networks:\n      - network\n</code></pre>\n<p>I'm trying to connect to chrome from java</p>\n<pre><code>        WebDriver webDriver;\n        DesiredCapabilities dc = new DesiredCapabilities();\n        dc.setBrowserName(&quot;chrome&quot;);\n        dc.setPlatform(Platform.LINUX);\n        try {\n            URI uri = URI.create(&quot;http://localhost:4444/wd/hub&quot;);\n            webDriver = new RemoteWebDriver(uri.toURL(), dc);\n        } catch (Exception e) {\n            log.error(&quot;Couldn't connect WEB_DRIVER&quot;);\n            e.printStackTrace();\n            throw new RuntimeException(e);\n        }\n</code></pre>\n<p>This url http://localhost:4444/wd/hub gives me error and this is not because RemoteWebDriver, i have tried different java drivers and got same error</p>\n<pre><code>Caused by: org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\n \n2023-03-08T09:01:20.132826587Z Host info: host: 'c679ce5cf46d', ip: '172.20.0.6'\n2023-03-08T09:01:20.132828628Z Build info: version: '4.5.3', revision: '4b786a1e430'\n2023-03-08T09:01:20.132830462Z System info: os.name: 'Linux', os.arch: 'aarch64', os.version: '5.10.124-linuxkit', java.version: '17.0.2'\n2023-03-08T09:01:20.132832545Z Driver info: org.openqa.selenium.remote.RemoteWebDriver\n2023-03-08T09:01:20.132834462Z Command: [null, newSession {capabilities=[Capabilities {browserName: chrome, platformName: LINUX}], desiredCapabilities=Capabilities {browserName: chrome, platformName: LINUX}}]\n2023-03-08T09:01:20.132836920Z Capabilities {}\n2023-03-08T09:01:20.132839295Z  at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:559) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132841253Z  at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:242) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132843295Z  at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132845420Z  at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:139) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132847462Z  at com.careerseeker.siteparser.service.impl.SiteParserServiceImpl.getDriver(MyServiceImpl.java:222) ~[classes!/:1.0-SNAPSHOT]\n2023-03-08T09:01:20.132849587Z  ... 25 common frames omitted\n\n2023-03-08T09:01:20.132851962Z Caused by: java.io.UncheckedIOException: java.net.ConnectException: Connection refused: localhost/127.0.0.1:4444\n\n2023-03-08T09:01:20.132853920Z  at org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:73) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132856087Z  at org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42) ~[selenium-http-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132858087Z  at org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56) ~[selenium-http-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132873837Z  at org.openqa.selenium.remote.http.netty.NettyHttpHandler.execute(NettyHttpHandler.java:49) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132876128Z  at org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42) ~[selenium-http-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132879337Z  at org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56) ~[selenium-http-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132885587Z  at org.openqa.selenium.remote.http.netty.NettyClient.execute(NettyClient.java:99) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132890628Z  at org.openqa.selenium.remote.tracing.TracedHttpClient.execute(TracedHttpClient.java:55) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132892628Z  at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:120) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132894587Z  at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:102) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132896545Z  at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132898587Z  at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132900545Z  at org.openqa.selenium.remote.TracedCommandExecutor.execute(TracedCommandExecutor.java:51) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132902503Z  at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:541) ~[selenium-remote-driver-4.5.3.jar!/:na]\n2023-03-08T09:01:20.132904503Z  ... 29 common frames omitted\n\n2023-03-08T09:01:20.132906337Z Caused by: java.net.ConnectException: Connection refused: localhost/127.0.0.1:4444\n\n2023-03-08T09:01:20.132908670Z  at org.asynchttpclient.netty.channel.NettyConnectListener.onFailure(NettyConnectListener.java:179) ~[async-http-client-2.12.3.jar!/:na]\n2023-03-08T09:01:20.132910628Z  at org.asynchttpclient.netty.channel.NettyChannelConnector$1.onFailure(NettyChannelConnector.java:108) ~[async-http-client-2.12.3.jar!/:na]\n2023-03-08T09:01:20.132912628Z  at org.asynchttpclient.netty.SimpleChannelFutureListener.operationComplete(SimpleChannelFutureListener.java:28) ~[async-http-client-2.12.3.jar!/:na]\n2023-03-08T09:01:20.132914712Z  at org.asynchttpclient.netty.SimpleChannelFutureListener.operationComplete(SimpleChannelFutureListener.java:20) ~[async-http-client-2.12.3.jar!/:na]\n2023-03-08T09:01:20.132917170Z  at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:578) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132919128Z  at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:571) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132924087Z  at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:550) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132929170Z  at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:491) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132936920Z  at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:616) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132940170Z  at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:609) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132942337Z  at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:117) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132947003Z  at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:321) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132951045Z  at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:337) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132953587Z  at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132956045Z  at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132958545Z  at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132960670Z  at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132962795Z  at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132965003Z  at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132970420Z  at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132977003Z  ... 1 common frames omitted\n\n2023-03-08T09:01:20.132979128Z Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:4444\n\n2023-03-08T09:01:20.132981045Z Caused by: java.net.ConnectException: Connection refused\n\n2023-03-08T09:01:20.132982878Z  at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\n2023-03-08T09:01:20.132984753Z  at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\n2023-03-08T09:01:20.132987878Z  at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946) ~[na:na]\n2023-03-08T09:01:20.132992837Z  at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132994878Z  at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.132996878Z  at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.133002295Z  at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.133007712Z  at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.133011212Z  at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.133014253Z  at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.133020003Z  at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.133022045Z  at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.85.Final.jar!/:4.1.85.Final]\n2023-03-08T09:01:20.133024212Z  at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>I can see that my chrome starts at  <a href=\"http://172.20.0.4:4444\" rel=\"nofollow noreferrer\">http://172.20.0.4:4444</a></p>\n<p>here is some logs from container</p>\n<pre><code>Starting Selenium Grid Standalone...\n2023-03-08T09:00:02.127960717Z Tracing is disabled\n2023-03-08T09:00:03.079255718Z 09:00:03.073 INFO [LoggingOptions.configureLogEncoding] - Using the system default encoding\n2023-03-08T09:00:03.082264760Z 09:00:03.081 INFO [OpenTelemetryTracer.createTracer] - Using OpenTelemetry for tracing\n2023-03-08T09:00:04.266523135Z 09:00:04.265 INFO [NodeOptions.getSessionFactories] - Detected 5 available processors\n2023-03-08T09:00:04.318001468Z 09:00:04.317 INFO [NodeOptions.report] - Adding chrome for {&quot;browserVersion&quot;: &quot;110.0&quot;,&quot;se:noVncPort&quot;: 7900,&quot;browserName&quot;: &quot;chrome&quot;,&quot;platformName&quot;: &quot;LINUX&quot;,&quot;se:vncEnabled&quot;: true} 1 times\n2023-03-08T09:00:04.346006135Z 09:00:04.345 INFO [Node.&lt;init&gt;] - Binding additional locator mechanisms: relative\n2023-03-08T09:00:04.381115343Z 09:00:04.380 INFO [GridModel.setAvailability] - Switching Node 57ecd074-632e-4989-ba29-a9b0e61df39e (uri: http://172.20.0.4:4444) from DOWN to UP\n2023-03-08T09:00:04.393940177Z 09:00:04.392 INFO [LocalDistributor.add] - Added node 57ecd074-632e-4989-ba29-a9b0e61df39e at http://172.20.0.4:4444. Health check every 120s\n2023-03-08T09:00:04.748166885Z 09:00:04.746 INFO [Standalone.execute] - Started Selenium Standalone 4.8.0 (revision 267030adea): http://172.20.0.4:4444\n</code></pre>\n<p>and if i use <a href=\"http://172.20.0.4:4444/wd/hub\" rel=\"nofollow noreferrer\">http://172.20.0.4:4444/wd/hub</a> instead of http://localhost:4444/wd/hub for connection, everything is fine with connection.</p>\n<p>This message confusing me -&gt; Connection refused: localhost/127.0.0.1:4444(I didn't specify it anywhere 127.0.0.1)</p>\n<p>I can specify url like <a href=\"http://172.20.0.4:4444/wd/hub\" rel=\"nofollow noreferrer\">http://172.20.0.4:4444/wd/hub</a>, but i shouldn't, because sometimes chrome starts at different urls. Here is some IPs i saw before when chrome was starting</p>\n<pre><code>172.20.0.4\n172.17.0.3\n172.17.0.4\n172.18.0.3\n172.18.0.4\n172.19.0.3\n172.19.0.4\n</code></pre>\n<p>Connecting via http://localhost:4444/wd/hub only worked when I ran the jar without docker, using a chromedriver file downloaded from the internet, pasting it into the root of the project</p>\n<hr />\n<p>Please help to connect to chrome container correctly so that the java code does\nnot depend on different addresses on which chrome is started.</p>\n<hr />\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1678435988,"post_id":75693610,"comment_id":133535366,"body_markdown":"so, you should &quot;consider defining a bean of type &#39;org.springframework.cache.CacheManager&#39; in your configuration&quot;","body":"so, you should &quot;consider defining a bean of type &#39;org.springframework.cache.CacheManager&#39; in your configuration&quot;"},{"owner":{"account_id":5268860,"reputation":116,"user_id":4207827,"accept_rate":0,"display_name":"Benny"},"score":3,"creation_date":1678436066,"post_id":75693610,"comment_id":133535385,"body_markdown":"Annotate your class with `@EnableCaching` annotation","body":"Annotate your class with <code>@EnableCaching</code> annotation"}],"owner":{"account_id":27981334,"reputation":11,"user_id":21369037,"display_name":"Arabinda Behera"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":783,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678435768,"creation_date":1678435768,"question_id":75693610,"body_markdown":"I am getting CacheManager error.\r\n&gt; Error Message: required a bean of type &#39;org.springframework.cache.CacheManager&#39; that could not be found.\r\n\r\n&gt; Action : Consider defining a bean of type &#39;org.springframework.cache.CacheManager&#39; in your configuration.","title":"I am getting Error in Spring Boot Application: Description: required a bean of type &#39;org.springframework.cache.CacheManager&#39; that could not be found","body":"<p>I am getting CacheManager error.</p>\n<blockquote>\n<p>Error Message: required a bean of type 'org.springframework.cache.CacheManager' that could not be found.</p>\n</blockquote>\n<blockquote>\n<p>Action : Consider defining a bean of type 'org.springframework.cache.CacheManager' in your configuration.</p>\n</blockquote>\n"},{"tags":["java","selenium-webdriver","selenium4","selenium-edgedriver"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":1,"creation_date":1677052913,"post_id":75529352,"comment_id":133259215,"body_markdown":"Carefully look at your dependencies `ClassNotFoundException` usually mean they&#39;re not correct.","body":"Carefully look at your dependencies <code>ClassNotFoundException</code> usually mean they&#39;re not correct."}],"owner":{"account_id":20620030,"reputation":31,"user_id":15137264,"display_name":"Sumit Soni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":660,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678435766,"creation_date":1677050536,"question_id":75529352,"body_markdown":"**Hi, \r\nI tried all possible solutions but I am keep getting exception.My requirement is to use EdgeOptions to add extension in browser before running scripts for that I am using Selenium 4.x.x**\r\n\r\n```\r\n Caused by: java.lang.ClassNotFoundException: org.openqa.selenium.remote.AbstractDriverOptions\r\n      \tat java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n      \tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n      \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)\r\n      \tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n      \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n      \tat java.lang.ClassLoader.defineClass(ClassLoader.java:756)\r\n      \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n      \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:473)\r\n      \tat java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n      \tat java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n      \tat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n      \tat java.security.AccessController.doPrivileged(Native Method)\r\n```\r\n\r\n**Please can review my pom.xml dependencies if I am using incorrect dependencies or any version mismatch**\r\n\r\n```\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-chrome-driver --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-chromium-driver --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-chromium-driver&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-edge-driver --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-edge-driver&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-remote-driver --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.4.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;info.cukes&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;info.cukes&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.14.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t \r\n   \r\n \r\n\t\t \r\n\t&lt;/dependencies&gt;\r\n\r\n```\r\n\r\n***Here it is my code , here driver is getting initialized I am getting exception in constructor of EdgeOptions .Code is all correct no where null is passing.***\r\n```\r\npublic static WebDriver initializeDriver() throws IOException {\r\n\t\tWebDriver driver = null;\r\n\t\tProperties prop = ConfigTestData.prop;\r\n\t\tString browser = prop.getProperty(&quot;proj.browser&quot;);\r\n\t\tif (browser.equalsIgnoreCase(&quot;Chrome&quot;)) {\r\n\t\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, prop.getProperty(&quot;proj.browser.driver.exe.path&quot;));\r\n\r\n\t\t\tChromeOptions opt = new ChromeOptions();\r\n\t\t\topt.addArguments(&quot;--log-level=2&quot;);\r\n\t\t\tdriver = new ChromeDriver(opt);  \r\n\t\t} else if (browser.equalsIgnoreCase(&quot;Edge&quot;)) {\r\n\t\t\tSystem.setProperty(&quot;webdriver.edge.driver&quot;, prop.getProperty(&quot;proj.browser.driver.exe.path&quot;));\r\n\t\t\tEdgeOptions options = new EdgeOptions();\r\n\r\n\t\t\tdriver = new EdgeDriver(options);//getting here\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;Mentioned driver does not exist.Please set either chrome or MS edge&quot;);\r\n\t\t}\r\n\t\treturn driver;\r\n\t}\r\n```","title":"java.lang.NoClassDefFoundError: org/openqa/selenium/remote/AbstractDriverOptions - Selenium 4","body":"<p><strong>Hi,\nI tried all possible solutions but I am keep getting exception.My requirement is to use EdgeOptions to add extension in browser before running scripts for that I am using Selenium 4.x.x</strong></p>\n<pre><code> Caused by: java.lang.ClassNotFoundException: org.openqa.selenium.remote.AbstractDriverOptions\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:473)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n        at java.security.AccessController.doPrivileged(Native Method)\n</code></pre>\n<p><strong>Please can review my pom.xml dependencies if I am using incorrect dependencies or any version mismatch</strong></p>\n<pre><code>\n    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\n            &lt;version&gt;4.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-chrome-driver --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\n            &lt;version&gt;4.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-chromium-driver --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-chromium-driver&lt;/artifactId&gt;\n            &lt;version&gt;4.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-edge-driver --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-edge-driver&lt;/artifactId&gt;\n            &lt;version&gt;4.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-remote-driver --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\n            &lt;version&gt;3.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;info.cukes&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n            &lt;version&gt;1.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;info.cukes&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n            &lt;version&gt;1.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.12&lt;/version&gt;\n        &lt;/dependency&gt;\n         \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\n            &lt;version&gt;3.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n         \n   \n \n         \n    &lt;/dependencies&gt;\n\n</code></pre>\n<p><em><strong>Here it is my code , here driver is getting initialized I am getting exception in constructor of EdgeOptions .Code is all correct no where null is passing.</strong></em></p>\n<pre><code>public static WebDriver initializeDriver() throws IOException {\n        WebDriver driver = null;\n        Properties prop = ConfigTestData.prop;\n        String browser = prop.getProperty(&quot;proj.browser&quot;);\n        if (browser.equalsIgnoreCase(&quot;Chrome&quot;)) {\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, prop.getProperty(&quot;proj.browser.driver.exe.path&quot;));\n\n            ChromeOptions opt = new ChromeOptions();\n            opt.addArguments(&quot;--log-level=2&quot;);\n            driver = new ChromeDriver(opt);  \n        } else if (browser.equalsIgnoreCase(&quot;Edge&quot;)) {\n            System.setProperty(&quot;webdriver.edge.driver&quot;, prop.getProperty(&quot;proj.browser.driver.exe.path&quot;));\n            EdgeOptions options = new EdgeOptions();\n\n            driver = new EdgeDriver(options);//getting here\n        } else {\n            System.out.println(&quot;Mentioned driver does not exist.Please set either chrome or MS edge&quot;);\n        }\n        return driver;\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":389881,"reputation":53027,"user_id":749588,"accept_rate":65,"display_name":"Jean Logeart"},"score":6,"creation_date":1410385740,"post_id":25775638,"comment_id":40311129,"body_markdown":"One cannot beat binary operations. Not even Jon Skeet.","body":"One cannot beat binary operations. Not even Jon Skeet."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":1,"creation_date":1410385886,"post_id":25775638,"comment_id":40311205,"body_markdown":"If this is the bottleneck in your program, congratulations, you write some really optimized code! But in all seriousness, these days, compilers do all kinds of funky things, so this may not even matter once the code&#39;s been transformed into bytecode","body":"If this is the bottleneck in your program, congratulations, you write some really optimized code! But in all seriousness, these days, compilers do all kinds of funky things, so this may not even matter once the code&#39;s been transformed into bytecode"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":2,"creation_date":1410385897,"post_id":25775638,"comment_id":40311209,"body_markdown":"I think if you&#39;re using a literal 2 the compiler will optimise it to a bitwise expression anyway. But then of course they give different results if `x==-1`","body":"I think if you&#39;re using a literal 2 the compiler will optimise it to a bitwise expression anyway. But then of course they give different results if <code>x==-1</code>"},{"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"score":1,"creation_date":1410385988,"post_id":25775638,"comment_id":40311244,"body_markdown":"This is the first problem in the book Java Puzzlers. The second method is generally faster. If x is negative the top method doesn&#39;t even work.","body":"This is the first problem in the book Java Puzzlers. The second method is generally faster. If x is negative the top method doesn&#39;t even work."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":4,"creation_date":1410386542,"post_id":25775638,"comment_id":40311449,"body_markdown":"Note: these don&#39;t do the same thing as `-1 % 2 == -1` and `-1 &amp; 1 == 1` It is better to check for 0 if using `%` e.g `x % 2 != 0`","body":"Note: these don&#39;t do the same thing as <code>-1 % 2 == -1</code> and <code>-1 &amp; 1 == 1</code> It is better to check for 0 if using <code>%</code> e.g <code>x % 2 != 0</code>"},{"owner":{"account_id":1511851,"reputation":999,"user_id":1413756,"accept_rate":37,"display_name":"Dan"},"score":1,"creation_date":1410389253,"post_id":25775638,"comment_id":40312404,"body_markdown":"Which is more readable?  Someone will eventually inherit your code.","body":"Which is more readable?  Someone will eventually inherit your code."}],"answers":[{"tags":[],"owner":{"account_id":3967156,"reputation":172,"user_id":3272764,"display_name":"Louis Newstrom"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1410385916,"creation_date":1410385916,"answer_id":25775680,"question_id":25775638,"body_markdown":"The binary operation is faster.\r\nThe mod operation has to calculate a division in order to get the remainder.\r\n","title":"Is binary operation more efficient than modulo?","body":"<p>The binary operation is faster.\nThe mod operation has to calculate a division in order to get the remainder.</p>\n"},{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1410386485,"post_id":25775687,"comment_id":40311431,"body_markdown":"+1 `% 2` cannot be optimised to `&amp; 1` as `x` could be signed and the result is different.","body":"+1 <code>% 2</code> cannot be optimised to <code>&amp; 1</code> as <code>x</code> could be signed and the result is different."},{"owner":{"account_id":4959811,"reputation":5014,"user_id":3991344,"accept_rate":92,"display_name":"Pokechu22"},"score":0,"creation_date":1410387776,"post_id":25775687,"comment_id":40311876,"body_markdown":"And in java, variables are always signed.  So that needs to be checked.","body":"And in java, variables are always signed.  So that needs to be checked."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1410446362,"post_id":25775687,"comment_id":40336857,"body_markdown":"@Peter Lawrey: `%2` *can* be optimized to `&amp; 1` if either: the optimizer can prove from the surrounding context that `x` is never negative, or the optimizer recognizes that the result is only used to compare against `0`, read, is an even-odd test. That’s why optimizers like to inline methods, optimizations work better when the surrounding context is known.","body":"@Peter Lawrey: <code>%2</code> <i>can</i> be optimized to <code>&amp; 1</code> if either: the optimizer can prove from the surrounding context that <code>x</code> is never negative, or the optimizer recognizes that the result is only used to compare against <code>0</code>, read, is an even-odd test. That’s why optimizers like to inline methods, optimizations work better when the surrounding context is known."}],"tags":[],"owner":{"account_id":36137,"reputation":178799,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1410388790,"creation_date":1410385951,"answer_id":25775687,"question_id":25775638,"body_markdown":"The bit operation is almost certainly faster.  \r\n\r\nDivision/modulus is a *generalized* operation which must work for any divisor you provide, not just 2.  It must also check for underflow, range errors and division by zero, and maintain a remainder, all of which takes time.\r\n\r\nThe bit operation just does a bit &quot;and&quot; operation, which in this case just so happens to correspond to division by two.  It might actually use just a single processor operation to execute.","title":"Is binary operation more efficient than modulo?","body":"<p>The bit operation is almost certainly faster.  </p>\n\n<p>Division/modulus is a <em>generalized</em> operation which must work for any divisor you provide, not just 2.  It must also check for underflow, range errors and division by zero, and maintain a remainder, all of which takes time.</p>\n\n<p>The bit operation just does a bit \"and\" operation, which in this case just so happens to correspond to division by two.  It might actually use just a single processor operation to execute.</p>\n"},{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1410386329,"creation_date":1410386329,"answer_id":25775756,"question_id":25775638,"body_markdown":"Either the `&amp;` expression will be faster or they will be the same speed. Last time I tried, they were the same speed when I used a literal 2 (because the compiler could optimise it) but `%` was slower if the `2` was in a variable.\r\nThe expression `x % 2 == 1` as a test for odd numbers does not work for negative `x`.\r\nSo there&#39;s at least one reason to prefer `&amp;`.","title":"Is binary operation more efficient than modulo?","body":"<p>Either the <code>&amp;</code> expression will be faster or they will be the same speed. Last time I tried, they were the same speed when I used a literal 2 (because the compiler could optimise it) but <code>%</code> was slower if the <code>2</code> was in a variable.\nThe expression <code>x % 2 == 1</code> as a test for odd numbers does not work for negative <code>x</code>.\nSo there's at least one reason to prefer <code>&amp;</code>.</p>\n"},{"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1410429861,"creation_date":1410388715,"answer_id":25776215,"question_id":25775638,"body_markdown":"Actually neither of those expressions test divisibility by two (other than in the negative). They actually both resolve to `true` if **x is odd**.\r\n\r\nThere are many other ways of testing even/oddness (e.g. `((x / 2) * 2) == x)`) but none of them have the optimal properties of `x &amp; 1` solely because *no compiler could possibly get it wrong and use a divide*.\r\n\r\nMost modern compilers would compile `x % 2` to the same code as `x &amp; 1` but a particularly stupid one *could* implement `x % 2` using a divide operation so it *could* be less efficient.\r\n\r\nThe argument as to which is **better** is a different story. A rookie/tired programmer may not recognize `x &amp; 1` as a test for odd numbers but `x % 2` would be clearer so there is an argument that `x % 2` would be the better option.\r\n\r\nMe - I&#39;d go for `if ( Maths.isEven(x) )` making it absolutely clear what I mean. IMHO *Efficiency* comes **way** down the list, well past *clarity* and *readability*.\r\n\r\n    public class Maths {\r\n\r\n        // Method is final to encourage compiler to inline if it is bright enough.\r\n        public static final boolean isEven(long n) {\r\n            /* All even numbers have their lowest-order bit set to 0.\r\n             * This `should` therefore be the most efficient way to recognise\r\n             * even numbers.\r\n             * Also works for negative numbers.\r\n             */\r\n            return (n &amp; 1) == 0;\r\n        }\r\n    }\r\n","title":"Is binary operation more efficient than modulo?","body":"<p>Actually neither of those expressions test divisibility by two (other than in the negative). They actually both resolve to <code>true</code> if <strong>x is odd</strong>.</p>\n\n<p>There are many other ways of testing even/oddness (e.g. <code>((x / 2) * 2) == x)</code>) but none of them have the optimal properties of <code>x &amp; 1</code> solely because <em>no compiler could possibly get it wrong and use a divide</em>.</p>\n\n<p>Most modern compilers would compile <code>x % 2</code> to the same code as <code>x &amp; 1</code> but a particularly stupid one <em>could</em> implement <code>x % 2</code> using a divide operation so it <em>could</em> be less efficient.</p>\n\n<p>The argument as to which is <strong>better</strong> is a different story. A rookie/tired programmer may not recognize <code>x &amp; 1</code> as a test for odd numbers but <code>x % 2</code> would be clearer so there is an argument that <code>x % 2</code> would be the better option.</p>\n\n<p>Me - I'd go for <code>if ( Maths.isEven(x) )</code> making it absolutely clear what I mean. IMHO <em>Efficiency</em> comes <strong>way</strong> down the list, well past <em>clarity</em> and <em>readability</em>.</p>\n\n<pre><code>public class Maths {\n\n    // Method is final to encourage compiler to inline if it is bright enough.\n    public static final boolean isEven(long n) {\n        /* All even numbers have their lowest-order bit set to 0.\n         * This `should` therefore be the most efficient way to recognise\n         * even numbers.\n         * Also works for negative numbers.\n         */\n        return (n &amp; 1) == 0;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1410425605,"creation_date":1410425605,"answer_id":25783121,"question_id":25775638,"body_markdown":"There will hardly be a noticable difference in practice. Particularly, it&#39;s hard to imagine a case where such an instruction will be the actual bottleneck.\r\n\r\n&lt;sub&gt;(Some nitpicking: The &quot;binary&quot; operation should rather be called **bitwise** operation, and the &quot;modulo&quot; operation actually is a **remainder** operation)&lt;/sub&gt;\r\n\r\nFrom a more theoretical point of view, one could assume that the binary operation is more efficient than the remainder operation, for reasons that already have been pointed out in other answers.\r\n\r\nHowever, back to the practical point of view again: The JIT will almost certainly come for the rescue. Considering the following (very simple) test:\r\n\r\n\r\n\r\n    class BitwiseVersusMod\r\n    {\r\n        public static void main(String args[])\r\n        {\r\n            for (int i=0; i&lt;10; i++)\r\n            {\r\n                for (int n=100000; n&lt;=100000000; n*=10)\r\n                {\r\n                    long s0 = runTestBitwise(n);\r\n                    System.out.println(&quot;Bitwise sum &quot;+s0);\r\n\r\n                    long s1 = runTestMod(n);\r\n                    System.out.println(&quot;Mod    sum &quot;+s1);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        private static long runTestMod(int n)\r\n        {\r\n            long sum = 0;\r\n            for (int i=0; i&lt;n; i++)\r\n            {\r\n                if (i % 2 == 1)\r\n                {\r\n                    sum += i;\r\n                }\r\n            }\r\n            return sum;\r\n        }\r\n\r\n        private static long runTestBitwise(int n)\r\n        {\r\n            long sum = 0;\r\n            for (int i=0; i&lt;n; i++)\r\n            {\r\n                if ((i &amp; 1) == 1)\r\n                {\r\n                    sum += i;\r\n                }\r\n            }\r\n            return sum;\r\n        }\r\n    }\r\n\r\n\r\nRunning it with a Hotspot Disassembler VM using\r\n\r\n    java -server -XX:+UnlockDiagnosticVMOptions -XX:+TraceClassLoading -XX:+LogCompilation -XX:+PrintAssembly BitwiseVersusMod\r\n\r\ncreates the JIT disassembly log. \r\n\r\nIndeed, for the first invocations of the modulo version, it creates the following disassembly:\r\n\r\n      ...\r\n      0x00000000027dcae6: cmp    $0xffffffff,%ecx\r\n      0x00000000027dcae9: je     0x00000000027dcaf2\r\n      0x00000000027dcaef: cltd   \r\n      0x00000000027dcaf0: idiv   %ecx               ;*irem\r\n                                                    ; - BitwiseVersusMod::runTestMod@11 (line 26)\r\n                                                    ; implicit exception: dispatches to 0x00000000027dcc18\r\n      0x00000000027dcaf2: cmp    $0x1,%edx\r\n      0x00000000027dcaf5: movabs $0x54fa0888,%rax   ;   {metadata(method data for {method} {0x0000000054fa04b0} &amp;apos;runTestMod&amp;apos; &amp;apos;(I)J&amp;apos; in &amp;apos;BitwiseVersusMod&amp;apos;)}\r\n      0x00000000027dcaff: movabs $0xb0,%rdx\r\n      ....\r\n\r\nwhere the `irem` instruction is translated into an `idiv`, which is considered to be rather expensive. \r\n\r\nIn contrast to that, the binary version uses an `and` instruction for the decision, as expected:\r\n\r\n      ....\r\n      0x00000000027dc58c: nopl   0x0(%rax)\r\n      0x00000000027dc590: mov    %rsi,%rax\r\n      0x00000000027dc593: and    $0x1,%eax\r\n      0x00000000027dc596: cmp    $0x1,%eax\r\n      0x00000000027dc599: movabs $0x54fa0768,%rax   ;   {metadata(method data for {method} {0x0000000054fa0578} &amp;apos;runTestBitwise&amp;apos; &amp;apos;(I)J&amp;apos; in &amp;apos;BitwiseVersusMod&amp;apos;)}\r\n      0x00000000027dc5a3: movabs $0xb0,%rbx\r\n      ....\r\n\r\n\r\n----------\r\n\r\n\r\nHowever, for the final, optimized version, the generated code is more similar for both versions. In both cases, the compiler does a lot of loop unrolling, but the core of the methods can still be identified: For the bitwise version, it generates an unrolled loop containing the following instructions:\r\n\r\n      ...\r\n      0x00000000027de2c7: mov    %r10,%rax\r\n      0x00000000027de2ca: mov    %r9d,%r11d\r\n      0x00000000027de2cd: add    $0x4,%r11d         ;*iinc\r\n                                                    ; - BitwiseVersusMod::runTestBitwise@21 (line 37)\r\n\r\n      0x00000000027de2d1: mov    %r11d,%r8d\r\n      0x00000000027de2d4: and    $0x1,%r8d\r\n      0x00000000027de2d8: cmp    $0x1,%r8d\r\n      0x00000000027de2dc: jne    0x00000000027de2e7  ;*if_icmpne\r\n                                                    ; - BitwiseVersusMod::runTestBitwise@13 (line 39)\r\n\r\n      0x00000000027de2de: movslq %r11d,%r10\r\n      0x00000000027de2e1: add    %rax,%r10          ;*ladd\r\n                                                    ; - BitwiseVersusMod::runTestBitwise@19 (line 41)\r\n      ...\r\n\r\nThere is still the `and` instruction for testing the lowest bit. But for the modulo version, the core of the unrolled loop is\r\n\r\n      ...\r\n      0x00000000027e3a0a: mov    %r11,%r10\r\n      0x00000000027e3a0d: mov    %ebx,%r8d\r\n      0x00000000027e3a10: add    $0x2,%r8d          ;*iinc\r\n                                                    ; - BitwiseVersusMod::runTestMod@21 (line 24)\r\n\r\n      0x00000000027e3a14: test   %r8d,%r8d\r\n      0x00000000027e3a17: jl     0x00000000027e3a2e  ;*irem\r\n                                                    ; - BitwiseVersusMod::runTestMod@11 (line 26)\r\n\r\n      0x00000000027e3a19: mov    %r8d,%r11d\r\n      0x00000000027e3a1c: and    $0x1,%r11d\r\n      0x00000000027e3a20: cmp    $0x1,%r11d\r\n      0x00000000027e3a24: jne    0x00000000027e3a2e  ;*if_icmpne\r\n                                                    ; - BitwiseVersusMod::runTestMod@13 (line 26)\r\n      ...\r\n\r\n\r\nI have to admit that I can not fully understand (at least, not in reasonable time) what *exactly* it is doing there. But in any case: The `irem` bytecode instruction is also implemented with an `and` assembly instruction, and there is no longer *any* `idiv` instruction in the resulting machine code.\r\n\r\nSo to repeat the first statement from this answer: There will hardly be a noticable difference in practice. Not only because the cost of a single instruction will hardly ever be the bottleneck, but also because you never know which instructions actually will be executed, and in this particular case, you have to assume that they will basically be equal.\r\n\r\n\r\n","title":"Is binary operation more efficient than modulo?","body":"<p>There will hardly be a noticable difference in practice. Particularly, it's hard to imagine a case where such an instruction will be the actual bottleneck.</p>\n\n<p><sub>(Some nitpicking: The \"binary\" operation should rather be called <strong>bitwise</strong> operation, and the \"modulo\" operation actually is a <strong>remainder</strong> operation)</sub></p>\n\n<p>From a more theoretical point of view, one could assume that the binary operation is more efficient than the remainder operation, for reasons that already have been pointed out in other answers.</p>\n\n<p>However, back to the practical point of view again: The JIT will almost certainly come for the rescue. Considering the following (very simple) test:</p>\n\n<pre><code>class BitwiseVersusMod\n{\n    public static void main(String args[])\n    {\n        for (int i=0; i&lt;10; i++)\n        {\n            for (int n=100000; n&lt;=100000000; n*=10)\n            {\n                long s0 = runTestBitwise(n);\n                System.out.println(\"Bitwise sum \"+s0);\n\n                long s1 = runTestMod(n);\n                System.out.println(\"Mod    sum \"+s1);\n            }\n        }\n    }\n\n\n    private static long runTestMod(int n)\n    {\n        long sum = 0;\n        for (int i=0; i&lt;n; i++)\n        {\n            if (i % 2 == 1)\n            {\n                sum += i;\n            }\n        }\n        return sum;\n    }\n\n    private static long runTestBitwise(int n)\n    {\n        long sum = 0;\n        for (int i=0; i&lt;n; i++)\n        {\n            if ((i &amp; 1) == 1)\n            {\n                sum += i;\n            }\n        }\n        return sum;\n    }\n}\n</code></pre>\n\n<p>Running it with a Hotspot Disassembler VM using</p>\n\n<pre><code>java -server -XX:+UnlockDiagnosticVMOptions -XX:+TraceClassLoading -XX:+LogCompilation -XX:+PrintAssembly BitwiseVersusMod\n</code></pre>\n\n<p>creates the JIT disassembly log. </p>\n\n<p>Indeed, for the first invocations of the modulo version, it creates the following disassembly:</p>\n\n<pre><code>  ...\n  0x00000000027dcae6: cmp    $0xffffffff,%ecx\n  0x00000000027dcae9: je     0x00000000027dcaf2\n  0x00000000027dcaef: cltd   \n  0x00000000027dcaf0: idiv   %ecx               ;*irem\n                                                ; - BitwiseVersusMod::runTestMod@11 (line 26)\n                                                ; implicit exception: dispatches to 0x00000000027dcc18\n  0x00000000027dcaf2: cmp    $0x1,%edx\n  0x00000000027dcaf5: movabs $0x54fa0888,%rax   ;   {metadata(method data for {method} {0x0000000054fa04b0} &amp;apos;runTestMod&amp;apos; &amp;apos;(I)J&amp;apos; in &amp;apos;BitwiseVersusMod&amp;apos;)}\n  0x00000000027dcaff: movabs $0xb0,%rdx\n  ....\n</code></pre>\n\n<p>where the <code>irem</code> instruction is translated into an <code>idiv</code>, which is considered to be rather expensive. </p>\n\n<p>In contrast to that, the binary version uses an <code>and</code> instruction for the decision, as expected:</p>\n\n<pre><code>  ....\n  0x00000000027dc58c: nopl   0x0(%rax)\n  0x00000000027dc590: mov    %rsi,%rax\n  0x00000000027dc593: and    $0x1,%eax\n  0x00000000027dc596: cmp    $0x1,%eax\n  0x00000000027dc599: movabs $0x54fa0768,%rax   ;   {metadata(method data for {method} {0x0000000054fa0578} &amp;apos;runTestBitwise&amp;apos; &amp;apos;(I)J&amp;apos; in &amp;apos;BitwiseVersusMod&amp;apos;)}\n  0x00000000027dc5a3: movabs $0xb0,%rbx\n  ....\n</code></pre>\n\n<hr>\n\n<p>However, for the final, optimized version, the generated code is more similar for both versions. In both cases, the compiler does a lot of loop unrolling, but the core of the methods can still be identified: For the bitwise version, it generates an unrolled loop containing the following instructions:</p>\n\n<pre><code>  ...\n  0x00000000027de2c7: mov    %r10,%rax\n  0x00000000027de2ca: mov    %r9d,%r11d\n  0x00000000027de2cd: add    $0x4,%r11d         ;*iinc\n                                                ; - BitwiseVersusMod::runTestBitwise@21 (line 37)\n\n  0x00000000027de2d1: mov    %r11d,%r8d\n  0x00000000027de2d4: and    $0x1,%r8d\n  0x00000000027de2d8: cmp    $0x1,%r8d\n  0x00000000027de2dc: jne    0x00000000027de2e7  ;*if_icmpne\n                                                ; - BitwiseVersusMod::runTestBitwise@13 (line 39)\n\n  0x00000000027de2de: movslq %r11d,%r10\n  0x00000000027de2e1: add    %rax,%r10          ;*ladd\n                                                ; - BitwiseVersusMod::runTestBitwise@19 (line 41)\n  ...\n</code></pre>\n\n<p>There is still the <code>and</code> instruction for testing the lowest bit. But for the modulo version, the core of the unrolled loop is</p>\n\n<pre><code>  ...\n  0x00000000027e3a0a: mov    %r11,%r10\n  0x00000000027e3a0d: mov    %ebx,%r8d\n  0x00000000027e3a10: add    $0x2,%r8d          ;*iinc\n                                                ; - BitwiseVersusMod::runTestMod@21 (line 24)\n\n  0x00000000027e3a14: test   %r8d,%r8d\n  0x00000000027e3a17: jl     0x00000000027e3a2e  ;*irem\n                                                ; - BitwiseVersusMod::runTestMod@11 (line 26)\n\n  0x00000000027e3a19: mov    %r8d,%r11d\n  0x00000000027e3a1c: and    $0x1,%r11d\n  0x00000000027e3a20: cmp    $0x1,%r11d\n  0x00000000027e3a24: jne    0x00000000027e3a2e  ;*if_icmpne\n                                                ; - BitwiseVersusMod::runTestMod@13 (line 26)\n  ...\n</code></pre>\n\n<p>I have to admit that I can not fully understand (at least, not in reasonable time) what <em>exactly</em> it is doing there. But in any case: The <code>irem</code> bytecode instruction is also implemented with an <code>and</code> assembly instruction, and there is no longer <em>any</em> <code>idiv</code> instruction in the resulting machine code.</p>\n\n<p>So to repeat the first statement from this answer: There will hardly be a noticable difference in practice. Not only because the cost of a single instruction will hardly ever be the bottleneck, but also because you never know which instructions actually will be executed, and in this particular case, you have to assume that they will basically be equal.</p>\n"},{"tags":[],"owner":{"account_id":2115983,"reputation":1140,"user_id":1880288,"display_name":"peawormsworth"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678435752,"creation_date":1678435752,"answer_id":75693607,"question_id":25775638,"body_markdown":"More binary operation choices:\r\n\r\nx&gt;&gt;1&lt;&lt;1!=x\r\n\r\nx&gt;&gt;1&lt;&lt;1^x\r\n\r\nTested in python:\r\n\r\n    for x in range(-5,6):\r\n        print(x, x%2, (x&amp;1)==1, x&gt;&gt;1&lt;&lt;1^x, x&gt;&gt;1&lt;&lt;1!=x)\r\n","title":"Is binary operation more efficient than modulo?","body":"<p>More binary operation choices:</p>\n<p>x&gt;&gt;1&lt;&lt;1!=x</p>\n<p>x&gt;&gt;1&lt;&lt;1^x</p>\n<p>Tested in python:</p>\n<pre><code>for x in range(-5,6):\n    print(x, x%2, (x&amp;1)==1, x&gt;&gt;1&lt;&lt;1^x, x&gt;&gt;1&lt;&lt;1!=x)\n</code></pre>\n"}],"owner":{"account_id":2863665,"reputation":5360,"user_id":2458372,"accept_rate":68,"display_name":"JavaDeveloper"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1073,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":6,"score":5,"last_activity_date":1678435752,"creation_date":1410385655,"question_id":25775638,"body_markdown":"There are two ways to check if the number is divisible by 2:\r\n\r\n- `x % 2 == 1`\r\n- `(x &amp; 1) == 1`\r\n\r\nWhich of the two is more efficient?\r\n","title":"Is binary operation more efficient than modulo?","body":"<p>There are two ways to check if the number is divisible by 2:</p>\n\n<ul>\n<li><code>x % 2 == 1</code></li>\n<li><code>(x &amp; 1) == 1</code></li>\n</ul>\n\n<p>Which of the two is more efficient?</p>\n"},{"tags":["java","amazon-s3","aws-sdk","inputstream","fileinputstream"],"comments":[{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1639427803,"post_id":70337629,"comment_id":124341467,"body_markdown":"Please paste the code as text directly into your question. If you select it and click the `{}` button or press Ctrl+K, the code block will be indented by four spaces, which will cause it to be rendered as code.","body":"Please paste the code as text directly into your question. If you select it and click the <code>{}</code> button or press Ctrl+K, the code block will be indented by four spaces, which will cause it to be rendered as code."},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1639427823,"post_id":70337629,"comment_id":124341479,"body_markdown":"Also - this question is huge, can you break it down and make it more focused please?","body":"Also - this question is huge, can you break it down and make it more focused please?"},{"owner":{"account_id":415777,"reputation":63,"user_id":790782,"display_name":"Maverick India"},"score":0,"creation_date":1639445676,"post_id":70337629,"comment_id":124345592,"body_markdown":"Yes did that now, have some context hence it looks lengthy but it is required.","body":"Yes did that now, have some context hence it looks lengthy but it is required."}],"owner":{"account_id":415777,"reputation":63,"user_id":790782,"display_name":"Maverick India"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1272,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1678435719,"creation_date":1639411870,"question_id":70337629,"body_markdown":"Recently we have decided to migrate the Java file upload/download use cases to be catered through AWS S3 from our old SFTP VM. My file sizes are usually between 0-10 MB&#39;s, and there can be multiple concurrent users (Java API) uploading the files.\r\n\r\nWhile doing that, I came across 4 options majorly to upload the file to S3 bucket.\r\n\r\n - **OPTION_1** : Inputstream to byteArray\r\n\r\n`RequestBody.fromBytes(IoUtils.toByteArray(s3FileObject.getInputStream()));` /// This Consumes lot of memory as it reads the entire stream in to byteArray and then write to S3 through putObject\r\n\r\n \r\n - **OPTION_2** : As InputStream\r\n\r\n`RequestBody.fromInputStream(s3FileObject.getInputStream(), s3FileObject.getInputStream().available());` /// Here i reaaly do not have the Size of the inputStream (as s3FileObject.getInputStream().available() does not always be right to get length of input stream)\r\n\r\n - **OPTION_3** : InputSream to File\r\n\r\n`RequestBody.fromFile(file)` /// I really do not want to create the temp file on my Java serevr or temp folder as it is overhead vs our initial approach of uploading to VM through SFTP.\r\n\r\n - **OPTION_4** : Multipart uplaod\r\n\r\n`s3.uploadPart(part,RequestBody.fromBytes(bytes)).eTag();` // Minimum part size is 5 MB, so multiple users say 100 uploading those files can consume lot of Memory.\r\n\r\n**How I was implementing earlier**\r\nWe had Apach VFS which used to open the outputstream to SFTP file, and we used to read small chunks from the inputStream and write to OutputStream (which is of the file in SFTP)\r\n\r\n**Sample Code** \r\n\r\n    public long transferStream(InputStream inputStream, OutputStream outputStream) throws IOException\r\n\t{\r\n\t\tint bytesRead = 0;\r\n\t\tlong streamSize = 0;\r\n\t\tbyte[] buf = new byte[4 * 1024];\r\n\t\twhile ((bytesRead = inputStream.read(buf)) != -1)\r\n\t\t{\r\n\t\t\tstreamSize += bytesRead;\r\n\t\t\toutputStream.write(buf, 0, bytesRead);\r\n\t\t\toutputStream.flush();\r\n\t\t}\r\n\t\toutputStream.flush();\r\n\t\treturn streamSize;\r\n\t}\r\n\r\n\r\n - **I have 2 Questions here**\r\n\r\n1) Is there way to get the outputstream of S3 file and write with small chunks as above way ?\r\n2) For the application with 4 GB machine and 2 GB XMX - how does the temp file option (OPTION_3 above) will work even after we delete the files after the uplaod.\r\n\r\nIs there any better way of handing the S3 upload without too much of Memory Overhead and Temporary file. \r\n\r\nThanks","title":"AWS S3 (with SDK 2.x) - File Upload to S3 Options (Less Memory consumption and without temp file) available?","body":"<p>Recently we have decided to migrate the Java file upload/download use cases to be catered through AWS S3 from our old SFTP VM. My file sizes are usually between 0-10 MB's, and there can be multiple concurrent users (Java API) uploading the files.</p>\n<p>While doing that, I came across 4 options majorly to upload the file to S3 bucket.</p>\n<ul>\n<li><strong>OPTION_1</strong> : Inputstream to byteArray</li>\n</ul>\n<p><code>RequestBody.fromBytes(IoUtils.toByteArray(s3FileObject.getInputStream()));</code> /// This Consumes lot of memory as it reads the entire stream in to byteArray and then write to S3 through putObject</p>\n<ul>\n<li><strong>OPTION_2</strong> : As InputStream</li>\n</ul>\n<p><code>RequestBody.fromInputStream(s3FileObject.getInputStream(), s3FileObject.getInputStream().available());</code> /// Here i reaaly do not have the Size of the inputStream (as s3FileObject.getInputStream().available() does not always be right to get length of input stream)</p>\n<ul>\n<li><strong>OPTION_3</strong> : InputSream to File</li>\n</ul>\n<p><code>RequestBody.fromFile(file)</code> /// I really do not want to create the temp file on my Java serevr or temp folder as it is overhead vs our initial approach of uploading to VM through SFTP.</p>\n<ul>\n<li><strong>OPTION_4</strong> : Multipart uplaod</li>\n</ul>\n<p><code>s3.uploadPart(part,RequestBody.fromBytes(bytes)).eTag();</code> // Minimum part size is 5 MB, so multiple users say 100 uploading those files can consume lot of Memory.</p>\n<p><strong>How I was implementing earlier</strong>\nWe had Apach VFS which used to open the outputstream to SFTP file, and we used to read small chunks from the inputStream and write to OutputStream (which is of the file in SFTP)</p>\n<p><strong>Sample Code</strong></p>\n<pre><code>public long transferStream(InputStream inputStream, OutputStream outputStream) throws IOException\n{\n    int bytesRead = 0;\n    long streamSize = 0;\n    byte[] buf = new byte[4 * 1024];\n    while ((bytesRead = inputStream.read(buf)) != -1)\n    {\n        streamSize += bytesRead;\n        outputStream.write(buf, 0, bytesRead);\n        outputStream.flush();\n    }\n    outputStream.flush();\n    return streamSize;\n}\n</code></pre>\n<ul>\n<li><strong>I have 2 Questions here</strong></li>\n</ul>\n<ol>\n<li>Is there way to get the outputstream of S3 file and write with small chunks as above way ?</li>\n<li>For the application with 4 GB machine and 2 GB XMX - how does the temp file option (OPTION_3 above) will work even after we delete the files after the uplaod.</li>\n</ol>\n<p>Is there any better way of handing the S3 upload without too much of Memory Overhead and Temporary file.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","datatable","spring-data-jpa"],"comments":[{"owner":{"account_id":14248845,"reputation":444,"user_id":11435260,"display_name":"AbrA"},"score":0,"creation_date":1678429493,"post_id":75692068,"comment_id":133534115,"body_markdown":"1. PostMapping about modification data, in this case usefull GetMapping\n 2. findAll returns all data usually. how will DataTablesInput affect the result? should there be some sort of filtering?","body":"1. PostMapping about modification data, in this case usefull GetMapping  2. findAll returns all data usually. how will DataTablesInput affect the result? should there be some sort of filtering?"},{"owner":{"account_id":5675759,"reputation":39,"user_id":9185877,"display_name":"Ekatama Ilham Prayoga"},"score":0,"creation_date":1678430040,"post_id":75692068,"comment_id":133534187,"body_markdown":"found this, but don&#39;t know how to call it in the insomnia\nhttps://github.com/darrachequesne/spring-data-jpa-datatables#range-of-dates","body":"found this, but don&#39;t know how to call it in the insomnia <a href=\"https://github.com/darrachequesne/spring-data-jpa-datatables#range-of-dates\" rel=\"nofollow noreferrer\">github.com/darrachequesne/&hellip;</a>"},{"owner":{"account_id":14248845,"reputation":444,"user_id":11435260,"display_name":"AbrA"},"score":0,"creation_date":1678431529,"post_id":75692068,"comment_id":133534503,"body_markdown":"this is the specification. this mechanism is needed to obtain data on dynamically changing conditions (as an example, a filter). if you need to get all the data strictly between two dates, you can add to Repository this method List&lt;Entity&gt; findByColumnDateBetween(LocalDateTime to, LocalDateTime from);","body":"this is the specification. this mechanism is needed to obtain data on dynamically changing conditions (as an example, a filter). if you need to get all the data strictly between two dates, you can add to Repository this method List&lt;Entity&gt; findByColumnDateBetween(LocalDateTime to, LocalDateTime from);"}],"answers":[{"comments":[{"owner":{"account_id":5675759,"reputation":39,"user_id":9185877,"display_name":"Ekatama Ilham Prayoga"},"score":0,"creation_date":1678437034,"post_id":75693595,"comment_id":133535617,"body_markdown":"i did try this, and it works, but doesn&#39;t give the same response as datatable output","body":"i did try this, and it works, but doesn&#39;t give the same response as datatable output"},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1678437731,"post_id":75693595,"comment_id":133535788,"body_markdown":"what do you mean by &quot;datatable output&quot;?","body":"what do you mean by &quot;datatable output&quot;?"}],"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678435678,"creation_date":1678435678,"answer_id":75693595,"question_id":75692068,"body_markdown":"In your repository add a method:\r\n\r\n```java\r\ninterface DatatableRepository extends CrudRepository {\r\n    List&lt;MyData&gt;findByDateColumnBetween(Instant from, Instant to);\r\n}\r\n```\r\nThis assumes that the property you want to filter by is called `dateColumn`.\r\n\r\nUse the method to obtain data filter by the date range. \r\nYou may use different date type depending on your requirements.","title":"how to get a result data from range date in DatatableRepository Spring JPA","body":"<p>In your repository add a method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface DatatableRepository extends CrudRepository {\n    List&lt;MyData&gt;findByDateColumnBetween(Instant from, Instant to);\n}\n</code></pre>\n<p>This assumes that the property you want to filter by is called <code>dateColumn</code>.</p>\n<p>Use the method to obtain data filter by the date range.\nYou may use different date type depending on your requirements.</p>\n"}],"owner":{"account_id":5675759,"reputation":39,"user_id":9185877,"display_name":"Ekatama Ilham Prayoga"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678435678,"creation_date":1678419373,"question_id":75692068,"body_markdown":"The table already had date column, and i wish to get result not just by one date, but range of 2 dates using DatatableRepository on SpringJPA\r\n\r\nthis is my current controller on using datatable:\r\n\r\n        @PostMapping(&quot;/datatable&quot;)\r\n        public DataTablesOutput&lt;MyData&gt; getMyDatatable(@Valid @RequestBody DataTablesInput input) {\r\n            return myDataRepository.findAll(input);\r\n        }\r\n\r\nthis is how i call the data on my insomnia:\r\n\r\n    {\r\n    \t&quot;draw&quot;:1,\r\n    \t&quot;columns&quot;:[\r\n    \t\t{\r\n    \t\t\t&quot;data&quot;:&quot;date&quot;,\r\n    \t\t\t&quot;name&quot;:&quot;date&quot;,\r\n    \t\t\t&quot;searchable&quot;:true,\r\n    \t\t\t&quot;orderable&quot;:true,\r\n    \t\t\t&quot;search&quot;:\r\n    \t\t\t\t{\r\n    \t\t\t\t\t&quot;value&quot;:&quot;2023-03-07&quot;,\r\n    \t\t\t\t\t&quot;regex&quot;:false\r\n    \t\t\t\t}\r\n    \t\t}\r\n    \t]\r\n    \t,&quot;order&quot;:[\r\n    \t\t{\r\n    \t\t\t&quot;column&quot;:0,\r\n    \t\t\t&quot;dir&quot;:&quot;asc&quot;\r\n    \t\t}\r\n    \t],\r\n    \t&quot;start&quot;:0,\r\n    \t&quot;length&quot;:100,\r\n    \t&quot;search&quot;:{\r\n    \t\t&quot;value&quot;:&quot;&quot;,&quot;regex&quot;:false\r\n    \t}\r\n    }","title":"how to get a result data from range date in DatatableRepository Spring JPA","body":"<p>The table already had date column, and i wish to get result not just by one date, but range of 2 dates using DatatableRepository on SpringJPA</p>\n<p>this is my current controller on using datatable:</p>\n<pre><code>    @PostMapping(&quot;/datatable&quot;)\n    public DataTablesOutput&lt;MyData&gt; getMyDatatable(@Valid @RequestBody DataTablesInput input) {\n        return myDataRepository.findAll(input);\n    }\n</code></pre>\n<p>this is how i call the data on my insomnia:</p>\n<pre><code>{\n    &quot;draw&quot;:1,\n    &quot;columns&quot;:[\n        {\n            &quot;data&quot;:&quot;date&quot;,\n            &quot;name&quot;:&quot;date&quot;,\n            &quot;searchable&quot;:true,\n            &quot;orderable&quot;:true,\n            &quot;search&quot;:\n                {\n                    &quot;value&quot;:&quot;2023-03-07&quot;,\n                    &quot;regex&quot;:false\n                }\n        }\n    ]\n    ,&quot;order&quot;:[\n        {\n            &quot;column&quot;:0,\n            &quot;dir&quot;:&quot;asc&quot;\n        }\n    ],\n    &quot;start&quot;:0,\n    &quot;length&quot;:100,\n    &quot;search&quot;:{\n        &quot;value&quot;:&quot;&quot;,&quot;regex&quot;:false\n    }\n}\n</code></pre>\n"},{"tags":["java","curl"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1678438113,"post_id":75693472,"comment_id":133535903,"body_markdown":"The best alternative is to not use cURL at all. Instead, use a native HTTP client. You can use `HttpURLConnection` but that&#39;s pretty low-level. Instead, use Java&#39;s own `java.net.http.HttpClient` or a third-party library like Apache&#39;s HttpClient.","body":"The best alternative is to not use cURL at all. Instead, use a native HTTP client. You can use <code>HttpURLConnection</code> but that&#39;s pretty low-level. Instead, use Java&#39;s own <code>java.net.http.HttpClient</code> or a third-party library like Apache&#39;s HttpClient."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1678448660,"post_id":75693472,"comment_id":133538900,"body_markdown":"I was planning to but it appears to me that Apache HttpClient is usually detected as a bit pretty easily. Are there some good examples of Apache HttpClient that can be made use of?","body":"I was planning to but it appears to me that Apache HttpClient is usually detected as a bit pretty easily. Are there some good examples of Apache HttpClient that can be made use of?"}],"answers":[{"comments":[{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1678435693,"post_id":75693541,"comment_id":133535299,"body_markdown":"For approach (1) what if I am streaming the urls to be scraped and have no control over what the urls are beforehand?\nWhen you say common HTTP libraries, are you referring to non cURL solutions such as Apache HTTPClient? What if I would still like to keep cURL as solution?","body":"For approach (1) what if I am streaming the urls to be scraped and have no control over what the urls are beforehand? When you say common HTTP libraries, are you referring to non cURL solutions such as Apache HTTPClient? What if I would still like to keep cURL as solution?"},{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":0,"creation_date":1678436049,"post_id":75693541,"comment_id":133535384,"body_markdown":"If you absolutely must use the OS cUrl then I am not sure you have many options other than `ProcessBuilder` or similar classes for invoking OS commands. However even if streaming the URLs into your class you could batch them up and run a script via `ProcessBuilder` every N commands, or perhaps you could construct a script that can read input, execute that script once and then feed it the URLs as you get them.","body":"If you absolutely must use the OS cUrl then I am not sure you have many options other than <code>ProcessBuilder</code> or similar classes for invoking OS commands. However even if streaming the URLs into your class you could batch them up and run a script via <code>ProcessBuilder</code> every N commands, or perhaps you could construct a script that can read input, execute that script once and then feed it the URLs as you get them."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1678448713,"post_id":75693541,"comment_id":133538909,"body_markdown":"Any good examples for the alternatives?","body":"Any good examples for the alternatives?"},{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":1,"creation_date":1678451935,"post_id":75693541,"comment_id":133539683,"body_markdown":"I don&#39;t, but a bit of searching should find some hints. You are looking to write a simple script that reads from input line by line (e.g. https://stackoverflow.com/questions/10929453/read-a-file-line-by-line-assigning-the-value-to-a-variable/10929511#10929511) where each line is a URL and the script executes a `curl` command on each. Then user `ProcessBuilder` in your java code to run that script, connecting to the input stream of the script and send the URLs to the stream with a newline between each. e.g. https://stackoverflow.com/questions/11573457/java-processbuilder-input-output-stream","body":"I don&#39;t, but a bit of searching should find some hints. You are looking to write a simple script that reads from input line by line (e.g. <a href=\"https://stackoverflow.com/questions/10929453/read-a-file-line-by-line-assigning-the-value-to-a-variable/10929511#10929511\" title=\"read a file line by line assigning the value to a variable\">stackoverflow.com/questions/10929453/&hellip;</a>) where each line is a URL and the script executes a <code>curl</code> command on each. Then user <code>ProcessBuilder</code> in your java code to run that script, connecting to the input stream of the script and send the URLs to the stream with a newline between each. e.g. <a href=\"https://stackoverflow.com/questions/11573457/java-processbuilder-input-output-stream\" title=\"java processbuilder input output stream\">stackoverflow.com/questions/11573457/&hellip;</a>"}],"tags":[],"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678435242,"creation_date":1678435242,"answer_id":75693541,"question_id":75693472,"body_markdown":"There&#39;s at least two other options that might perform better.\r\n\r\nFirstly, you are running each external `curl` command individually. You could create a single script to run all the commands in parallel (e.g. a shell script) and then execute a single shell command to run that. That would reduce the overhead of all the `ProcessBuilders`\r\n\r\nSecondly, you could use common java HTTP libraries to connect to the server and pull down the content. That would eliminate the overhead of external OS command.","title":"Run multiple cURL commands on Java in an efficient manner","body":"<p>There's at least two other options that might perform better.</p>\n<p>Firstly, you are running each external <code>curl</code> command individually. You could create a single script to run all the commands in parallel (e.g. a shell script) and then execute a single shell command to run that. That would reduce the overhead of all the <code>ProcessBuilders</code></p>\n<p>Secondly, you could use common java HTTP libraries to connect to the server and pull down the content. That would eliminate the overhead of external OS command.</p>\n"}],"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678435242,"creation_date":1678434809,"question_id":75693472,"body_markdown":"I have a requirement to run multiple cURL commands on Java. I have been looking around for various methodologies to accomplish this. One such mechanism is to make use of ProcessBuilder. The code I have written is given below:\r\n\r\n```\r\nprivate void performCurl() {\r\n   ProcessBuilder processBuilder = new ProcessBuilder();\r\n        List&lt;String&gt; curlArgs = getMyCurlArgs(); // curl -k -v https://www.amazon.com -H &lt;and so on&gt;\r\n        String listString = String.join(&quot; &quot;, curlArgs);\r\n        processBuilder.command(curlArgs);\r\n        processBuilder.redirectErrorStream(true);\r\n        Process proc = processBuilder.start();\r\n       \r\n        ExecutorService fixedThreadPool = Executors.newFixedThreadPool(poolSize);\r\n        Future&lt;String&gt; futureOpt;\r\n        try {\r\n            futureOpt = fixedThreadPool.submit(() -&gt; {\r\n                StringBuilder sb = new StringBuilder();\r\n                InputStream ins = proc.getInputStream();\r\n                BufferedReader br = new BufferedReader(new InputStreamReader(ins));\r\n                br.lines().forEach(sb::append);\r\n                try {\r\n                    ins.close();\r\n                    br.close();\r\n                } catch (IOException e) {\r\n                    // my exception\r\n                }\r\n                return sb.toString();\r\n            });\r\n            boolean terminatedNormally = proc.waitFor(15, TimeUnit.SECONDS);\r\n            if (!terminatedNormally)\r\n                throw new SocketTimeoutException(&quot;Timed Out&quot;);\r\n        } finally {\r\n            fixedThreadPool.shutdown();\r\n            proc.destroy();\r\n        }\r\n        String content = futureOpt.get(); // This content is what I use.\r\n}\r\n```\r\n\r\nNow the code above works as expected. cURL scrapes the website and provides the HTML content. \r\n*```The problem is that ProcessBuilder with cURL is extremely CPU intensive. Especially given the fact that ProcessBuilder makes use of Operating System resources.```*\r\n\r\nMy question now is:\r\n\r\na) Can I use ProcessBuilder in a more efficient manner?\r\n\r\nb) Or, are there other mechanisms to trigger parallel cURL requests on Java?\r\n\r\nAre there any other alternatives to run cURL requests in parallel?","title":"Run multiple cURL commands on Java in an efficient manner","body":"<p>I have a requirement to run multiple cURL commands on Java. I have been looking around for various methodologies to accomplish this. One such mechanism is to make use of ProcessBuilder. The code I have written is given below:</p>\n<pre><code>private void performCurl() {\n   ProcessBuilder processBuilder = new ProcessBuilder();\n        List&lt;String&gt; curlArgs = getMyCurlArgs(); // curl -k -v https://www.amazon.com -H &lt;and so on&gt;\n        String listString = String.join(&quot; &quot;, curlArgs);\n        processBuilder.command(curlArgs);\n        processBuilder.redirectErrorStream(true);\n        Process proc = processBuilder.start();\n       \n        ExecutorService fixedThreadPool = Executors.newFixedThreadPool(poolSize);\n        Future&lt;String&gt; futureOpt;\n        try {\n            futureOpt = fixedThreadPool.submit(() -&gt; {\n                StringBuilder sb = new StringBuilder();\n                InputStream ins = proc.getInputStream();\n                BufferedReader br = new BufferedReader(new InputStreamReader(ins));\n                br.lines().forEach(sb::append);\n                try {\n                    ins.close();\n                    br.close();\n                } catch (IOException e) {\n                    // my exception\n                }\n                return sb.toString();\n            });\n            boolean terminatedNormally = proc.waitFor(15, TimeUnit.SECONDS);\n            if (!terminatedNormally)\n                throw new SocketTimeoutException(&quot;Timed Out&quot;);\n        } finally {\n            fixedThreadPool.shutdown();\n            proc.destroy();\n        }\n        String content = futureOpt.get(); // This content is what I use.\n}\n</code></pre>\n<p>Now the code above works as expected. cURL scrapes the website and provides the HTML content.\n<em><code>The problem is that ProcessBuilder with cURL is extremely CPU intensive. Especially given the fact that ProcessBuilder makes use of Operating System resources.</code></em></p>\n<p>My question now is:</p>\n<p>a) Can I use ProcessBuilder in a more efficient manner?</p>\n<p>b) Or, are there other mechanisms to trigger parallel cURL requests on Java?</p>\n<p>Are there any other alternatives to run cURL requests in parallel?</p>\n"},{"tags":["java","xstream"],"comments":[{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":0,"creation_date":1434144148,"post_id":30812293,"comment_id":49672790,"body_markdown":"[Some actual code would be helpful.](http://stackoverflow/help/mcve)","body":"<a href=\"http://stackoverflow/help/mcve\" rel=\"nofollow noreferrer\">Some actual code would be helpful.</a>"}],"answers":[{"comments":[{"owner":{"account_id":285796,"reputation":13049,"user_id":584674,"accept_rate":86,"display_name":"james.garriss"},"score":1,"creation_date":1645032135,"post_id":34861491,"comment_id":125764620,"body_markdown":"While this works, it rather defeats the purpose of the new security features.","body":"While this works, it rather defeats the purpose of the new security features."}],"tags":[],"owner":{"account_id":553008,"reputation":129,"user_id":1515782,"display_name":"user1515782"},"comment_count":1,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1638535651,"creation_date":1453141302,"answer_id":34861491,"question_id":30812293,"body_markdown":"http://x-stream.github.io/security.html \r\n\r\nTry to limit to the minimum permissions required.\r\n\r\nThat would remove all limitations (read link above): \r\n`xstream.addPermission(AnyTypePermission.ANY);`","title":"com.thoughtworks.xstream.security.ForbiddenClassException","body":"<p><a href=\"http://x-stream.github.io/security.html\" rel=\"noreferrer\">http://x-stream.github.io/security.html</a></p>\n<p>Try to limit to the minimum permissions required.</p>\n<p>That would remove all limitations (read link above):\n<code>xstream.addPermission(AnyTypePermission.ANY);</code></p>\n"},{"tags":[],"owner":{"account_id":2279177,"reputation":306,"user_id":2004740,"display_name":"Alexandre Alves"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1508256892,"creation_date":1508256892,"answer_id":46794673,"question_id":30812293,"body_markdown":"I solved my problem using something like:\r\n\r\n    Class&lt;?&gt;[] classes = new Class[] { TestList.class, Item.class, ... };\r\n    XStream xstream = new XStream();\r\n    XStream.setupDefaultSecurity(xstream);\r\n    xstream.allowTypes(classes);","title":"com.thoughtworks.xstream.security.ForbiddenClassException","body":"<p>I solved my problem using something like:</p>\n\n<pre><code>Class&lt;?&gt;[] classes = new Class[] { TestList.class, Item.class, ... };\nXStream xstream = new XStream();\nXStream.setupDefaultSecurity(xstream);\nxstream.allowTypes(classes);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":89374,"reputation":7227,"user_id":246622,"accept_rate":92,"display_name":"tomsv"},"score":0,"creation_date":1631613980,"post_id":67288175,"comment_id":122264037,"body_markdown":"XStream.setupDefaultSecurity(xstream); is done by default as of 1.4.18","body":"XStream.setupDefaultSecurity(xstream); is done by default as of 1.4.18"},{"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"score":0,"creation_date":1631745347,"post_id":67288175,"comment_id":122308334,"body_markdown":"@tomsv Thanks for the theads up. I addedd a comment in the code snippet to indicate that.","body":"@tomsv Thanks for the theads up. I addedd a comment in the code snippet to indicate that."},{"owner":{"account_id":316018,"reputation":2519,"user_id":631965,"accept_rate":68,"display_name":"Olgun Kaya"},"score":0,"creation_date":1662125765,"post_id":67288175,"comment_id":129940299,"body_markdown":"@tomsv the method has been deprecated, it&#39;s there just for backward compatibility with an empty implementation. From javadoc, `This method was a pure helper method for XStream 1.4.10 to 1.4.17. It initialized an XStream instance with a whitelist of well-known and simply types of the Java runtime as it is done in XStream 1.4.18 by default. This method will do therefore nothing in XStream 1.4.18 or higher.`","body":"@tomsv the method has been deprecated, it&#39;s there just for backward compatibility with an empty implementation. From javadoc, <code>This method was a pure helper method for XStream 1.4.10 to 1.4.17. It initialized an XStream instance with a whitelist of well-known and simply types of the Java runtime as it is done in XStream 1.4.18 by default. This method will do therefore nothing in XStream 1.4.18 or higher.</code>"},{"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"score":0,"creation_date":1666982791,"post_id":67288175,"comment_id":131071493,"body_markdown":"@OlgunKaya If you refer to `setupDefaultSecurity` it is not in the suggested solution any more. If you refer to other method, please indicate which one.","body":"@OlgunKaya If you refer to <code>setupDefaultSecurity</code> it is not in the suggested solution any more. If you refer to other method, please indicate which one."},{"owner":{"account_id":316018,"reputation":2519,"user_id":631965,"accept_rate":68,"display_name":"Olgun Kaya"},"score":0,"creation_date":1667073347,"post_id":67288175,"comment_id":131086096,"body_markdown":"@manuelvigarcia now you need to setup security level based on types, package etc.. there are proper methods in the related classes. On mobile now, so not sure about the exact methods but one can easily check them in javadoc or source itself easily. Xstream.allowTypes ı suppose as per mentioned below comments and answers.","body":"@manuelvigarcia now you need to setup security level based on types, package etc.. there are proper methods in the related classes. On mobile now, so not sure about the exact methods but one can easily check them in javadoc or source itself easily. Xstream.allowTypes ı suppose as per mentioned below comments and answers."},{"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"score":0,"creation_date":1667465465,"post_id":67288175,"comment_id":131174381,"body_markdown":"@OlgunKaya As per current documentation (https://x-stream.github.io/security.html#framework) it is correct to use `addPermission(TypePermission)`, `allowTypes(Class[])`, and `allowTypesByWildcard(String[])` as I suggested in my answer. Although `allow(Class)` is indeed the basic and main interface method, the facade offers all those convenience methods (and more).","body":"@OlgunKaya As per current documentation (<a href=\"https://x-stream.github.io/security.html#framework\" rel=\"nofollow noreferrer\">x-stream.github.io/security.html#framework</a>) it is correct to use <code>addPermission(TypePermission)</code>, <code>allowTypes(Class[])</code>, and <code>allowTypesByWildcard(String[])</code> as I suggested in my answer. Although <code>allow(Class)</code> is indeed the basic and main interface method, the facade offers all those convenience methods (and more)."}],"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"comment_count":6,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1639761598,"creation_date":1619545627,"answer_id":67288175,"question_id":30812293,"body_markdown":"Using it as a security framework\r\n==\r\nYou need to configure the security framework in XStream.\r\n\r\nIt is designed to prevent attacks to your deserialization entry point. If you can state that no unfriendly third party will ever use it, you are safe with the solutions provided so far.\r\n\r\nI tend to be in the cautious side of the line. So I just allowed the basics, those that are mine, and some I use.\r\n\r\nThe basics\r\n--\r\nAs stated in other answers, start by using the default\r\n\r\n    XStream xstream = new XStream();\r\n    xstream .addPermission(NoTypePermission.NONE); //forbid everything\r\n    xstream .addPermission(NullPermission.NULL);   // allow &quot;null&quot;\r\n    xstream .addPermission(PrimitiveTypePermission.PRIMITIVES); // allow primitive types\r\n\r\n\r\nThose that are mine\r\n--\r\nThese I allowed by package:\r\n\r\n    xstream.allowTypesByWildcard(new String[] { \r\n            &quot;com.mydomain.mynewapp.**&quot;,\r\n            &quot;com.mydomain.utilitylibraries.**\r\n            });\r\n\r\nSome I use\r\n---\r\nFor specific classes that I use, they can be allowed to feed your parser on a &quot;by class&quot; fashion.\r\n\r\n    xstream.allowTypes(new Class[] {\r\n            com.google.common.base.Present.class,\r\n            org.apache.commons.math3.random.GaussianRandomGenerator.class\r\n            });\r\n\r\nTo get rid of the exception in the question, the OP may choose to add something like:\r\n\r\n    xstream.allowTypes(new Class[] {com.test.cp.test123.pojo.TestList.class});\r\n\r\n\r\nConclusion\r\n--\r\nXStream allows you to tune the security of the deserialization of your classes as tight as you want it to be. It probably is enough with the bare minimum. But it is not enough to not ask yourself the question: &quot;how tight need I this security to be?&quot; Once you&#39;ve reflected about the matter, act accordingly.\r\n\r\n\r\n  [1]: https://x-stream.github.io/javadoc/com/thoughtworks/xstream/XStream.html#setupDefaultSecurity-com.thoughtworks.xstream.XStream-","title":"com.thoughtworks.xstream.security.ForbiddenClassException","body":"<h1>Using it as a security framework</h1>\n<p>You need to configure the security framework in XStream.</p>\n<p>It is designed to prevent attacks to your deserialization entry point. If you can state that no unfriendly third party will ever use it, you are safe with the solutions provided so far.</p>\n<p>I tend to be in the cautious side of the line. So I just allowed the basics, those that are mine, and some I use.</p>\n<h2>The basics</h2>\n<p>As stated in other answers, start by using the default</p>\n<pre><code>XStream xstream = new XStream();\nxstream .addPermission(NoTypePermission.NONE); //forbid everything\nxstream .addPermission(NullPermission.NULL);   // allow &quot;null&quot;\nxstream .addPermission(PrimitiveTypePermission.PRIMITIVES); // allow primitive types\n</code></pre>\n<h2>Those that are mine</h2>\n<p>These I allowed by package:</p>\n<pre><code>xstream.allowTypesByWildcard(new String[] { \n        &quot;com.mydomain.mynewapp.**&quot;,\n        &quot;com.mydomain.utilitylibraries.**\n        });\n</code></pre>\n<h2>Some I use</h2>\n<p>For specific classes that I use, they can be allowed to feed your parser on a &quot;by class&quot; fashion.</p>\n<pre><code>xstream.allowTypes(new Class[] {\n        com.google.common.base.Present.class,\n        org.apache.commons.math3.random.GaussianRandomGenerator.class\n        });\n</code></pre>\n<p>To get rid of the exception in the question, the OP may choose to add something like:</p>\n<pre><code>xstream.allowTypes(new Class[] {com.test.cp.test123.pojo.TestList.class});\n</code></pre>\n<h2>Conclusion</h2>\n<p>XStream allows you to tune the security of the deserialization of your classes as tight as you want it to be. It probably is enough with the bare minimum. But it is not enough to not ask yourself the question: &quot;how tight need I this security to be?&quot; Once you've reflected about the matter, act accordingly.</p>\n"},{"tags":[],"owner":{"account_id":111351,"reputation":387,"user_id":3356699,"display_name":"Kokeb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666903727,"creation_date":1666903727,"answer_id":74228143,"question_id":30812293,"body_markdown":"I have a derived class of XStreamMarshaller, where the &quot;XStreamMarshaller.**supports**&quot; method is overridden. I added ***getXStream().allowTypes(classes)***, see snippet below.\r\n\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; clazz) {\r\n        Class&lt;?&gt;[] classes = new Class[] {clazz};\r\n        getXStream().processAnnotations(classes);\r\n        getXStream().allowTypes(classes);\r\n        return super. Supports(clazz);\r\n    }","title":"com.thoughtworks.xstream.security.ForbiddenClassException","body":"<p>I have a derived class of XStreamMarshaller, where the &quot;XStreamMarshaller.<strong>supports</strong>&quot; method is overridden. I added <em><strong>getXStream().allowTypes(classes)</strong></em>, see snippet below.</p>\n<pre><code>@Override\npublic boolean supports(Class&lt;?&gt; clazz) {\n    Class&lt;?&gt;[] classes = new Class[] {clazz};\n    getXStream().processAnnotations(classes);\n    getXStream().allowTypes(classes);\n    return super. Supports(clazz);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5160779,"reputation":154,"user_id":4132541,"display_name":"Lior Derei"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1670928181,"creation_date":1670928181,"answer_id":74783535,"question_id":30812293,"body_markdown":"Following @Kokeb answer, I had a spring bean with the following line of codes:\r\n\r\n```Java\r\n  XStreamMarshaller marshaller = new XStreamMarshaller();\r\n  Map&lt;String, Class&lt;MyMessage&gt;&gt; aliases = new HashMap&lt;&gt;();\r\n  aliases.put(&quot;myMessages&quot;, MyMessage.class);\r\n  marshaller.setAliases(aliases);\r\n```\r\n\r\nI added: \r\n```Java\r\n marshaller.getXStream().allowTypes(new Class[]{MyMessage.class});\r\n```\r\n\r\nand it solved the issue.\r\n\r\na bit of context, I was using XStream for a project with spring batch, spring integration and ActiveMQ, I set a bean that converts ActiveMQ messages into a message class.\r\nthe full bean:\r\n\r\n```\r\n    @Bean\r\n    public MessageConverter messageConverter() {\r\n        XStreamMarshaller marshaller = new XStreamMarshaller();\r\n        Map&lt;String, Class&lt; MyMessage &gt;&gt; aliases = new HashMap&lt;&gt;();\r\n        aliases.put(&quot;myMessages&quot;, MyMessage.class);\r\n        marshaller.setAliases(aliases);\r\n        marshaller.getXStream().allowTypes(new Class[]{MyMessage.class});\r\n\r\n        MarshallingMessageConverter messageConverter = new MarshallingMessageConverter(marshaller);\r\n        messageConverter.setTargetType(MessageType.TEXT);\r\n        return messageConverter;\r\n    }\r\n```","title":"com.thoughtworks.xstream.security.ForbiddenClassException","body":"<p>Following @Kokeb answer, I had a spring bean with the following line of codes:</p>\n<pre><code>  XStreamMarshaller marshaller = new XStreamMarshaller();\n  Map&lt;String, Class&lt;MyMessage&gt;&gt; aliases = new HashMap&lt;&gt;();\n  aliases.put(&quot;myMessages&quot;, MyMessage.class);\n  marshaller.setAliases(aliases);\n</code></pre>\n<p>I added:</p>\n<pre><code> marshaller.getXStream().allowTypes(new Class[]{MyMessage.class});\n</code></pre>\n<p>and it solved the issue.</p>\n<p>a bit of context, I was using XStream for a project with spring batch, spring integration and ActiveMQ, I set a bean that converts ActiveMQ messages into a message class.\nthe full bean:</p>\n<pre><code>    @Bean\n    public MessageConverter messageConverter() {\n        XStreamMarshaller marshaller = new XStreamMarshaller();\n        Map&lt;String, Class&lt; MyMessage &gt;&gt; aliases = new HashMap&lt;&gt;();\n        aliases.put(&quot;myMessages&quot;, MyMessage.class);\n        marshaller.setAliases(aliases);\n        marshaller.getXStream().allowTypes(new Class[]{MyMessage.class});\n\n        MarshallingMessageConverter messageConverter = new MarshallingMessageConverter(marshaller);\n        messageConverter.setTargetType(MessageType.TEXT);\n        return messageConverter;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6777771,"reputation":11,"user_id":5219075,"display_name":"Aakash singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678435206,"creation_date":1678434533,"answer_id":75693440,"question_id":30812293,"body_markdown":"I also faced this issue and I got the resolution with adding AnyTypePermission,\r\n\r\n    xstream.addPermission(AnyTypePermission.ANY);","title":"com.thoughtworks.xstream.security.ForbiddenClassException","body":"<p>I also faced this issue and I got the resolution with adding AnyTypePermission,</p>\n<pre><code>xstream.addPermission(AnyTypePermission.ANY);\n</code></pre>\n"}],"owner":{"account_id":1375519,"reputation":295,"user_id":1309585,"accept_rate":29,"display_name":"karthik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31309,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":6,"score":20,"last_activity_date":1678435206,"creation_date":1434143776,"question_id":30812293,"body_markdown":"I came across this exception while updating xstream (1.4.8) lib to the latest version in one of our web applications. The exception was being thrown in a pojo from a dependent jar that was compiled using an older version of xstream (1.3.1). I recompiled and built the new jar (dependent jar) using the xstream-1.4.8 and deployed the war file again, but still get the same exception. Initially I thought this was due to version mismatch, I&#39;m not sure now whats causing this exception and there&#39;s not much documentation online. Any thoughts? \r\n\r\nThanks,\r\nKarthik\r\n\r\nThe actual call that throwing the exception:\r\n    \r\n    TestList list = (TestList)xs.fromXML(new StringReader(testData));\r\n\r\nwhere testData is xml string\r\n\r\nTestList.java class\r\n\r\n    @XStreamAlias(&quot;Assets&quot;)\r\n    public class TestList extends ParentObject {\r\n\r\n    @XStreamImplicit(itemFieldName = &quot;item&quot;)\r\n    protected List&lt;Item&gt; item= new ArrayList&lt;Item&gt;();\r\n\r\n    public void add(Item item) {\r\n\titem.add(item);\r\n    }\r\n    \r\n    public List&lt;Item&gt; getItems() {\r\n    \tif(item== null)\r\n    \t\treturn new ArrayList&lt;Item&gt;();\r\n    \telse\r\n        \treturn item;\r\n    }\r\n\r\n    @Override\r\n    public String getStringData() {\r\n\tStringBuilder builder = new StringBuilder();\r\n\r\n\tfor (Item item : items) {\r\n\t    builder.append(item.getStringData());\r\n\t    builder.append(&quot;---------------\\n&quot;);\r\n\t}\r\n\r\n\treturn builder.toString();\r\n    }\r\n\r\n    @Override\r\n    public String getDataType() {\r\n\t// TODO Auto-generated method stub\r\n\treturn null;\r\n    }\r\n  \r\nItem.java class:\r\n\r\n     @XStreamAlias(&quot;Item&quot;)\r\n    public class Item extends ParentItem {\r\n    @XStreamAsAttribute\r\n    public String access_test;\r\n\r\n    @XStreamAsAttribute\r\n    public int test_num;\r\n\r\n    @XStreamAsAttribute\r\n    public int test_type;\r\n\r\n    @XStreamAsAttribute\r\n    public boolean tst_item;\r\n\r\n    @XStreamAsAttribute\r\n    public int test_test_est;\r\n\r\n    @XStreamAlias(&quot;eset_test&quot;)\r\n    public List&lt;Integer&gt; eset_test;\r\n\r\nAnd of course I have the getters and setters that I am not including here.\r\n\r\nException:\r\n\r\n    com.thoughtworks.xstream.security.ForbiddenClassException: com.test.cp.test123.pojo.TestList\r\n        at com.thoughtworks.xstream.security.NoTypePermission.allows(NoTypePermission.java:26)\r\n        at com.thoughtworks.xstream.mapper.SecurityMapper.realClass(SecurityMapper.java:74)\r\n        at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n        at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\r\n        at com.thoughtworks.xstream.mapper.CachingMapper.realClass(CachingMapper.java:47)\r\n        at com.thoughtworks.xstream.core.util.HierarchicalStreams.readClassType(HierarchicalStreams.java:29)\r\n        at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:133)\r\n        at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)\r\n        at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1206)\r\n        at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1190)\r\n        at com.thoughtworks.xstream.XStream.fromXML(XStream.java:1061)\r\n\r\n\r\n\r\n","title":"com.thoughtworks.xstream.security.ForbiddenClassException","body":"<p>I came across this exception while updating xstream (1.4.8) lib to the latest version in one of our web applications. The exception was being thrown in a pojo from a dependent jar that was compiled using an older version of xstream (1.3.1). I recompiled and built the new jar (dependent jar) using the xstream-1.4.8 and deployed the war file again, but still get the same exception. Initially I thought this was due to version mismatch, I'm not sure now whats causing this exception and there's not much documentation online. Any thoughts? </p>\n\n<p>Thanks,\nKarthik</p>\n\n<p>The actual call that throwing the exception:</p>\n\n<pre><code>TestList list = (TestList)xs.fromXML(new StringReader(testData));\n</code></pre>\n\n<p>where testData is xml string</p>\n\n<p>TestList.java class</p>\n\n<pre><code>@XStreamAlias(\"Assets\")\npublic class TestList extends ParentObject {\n\n@XStreamImplicit(itemFieldName = \"item\")\nprotected List&lt;Item&gt; item= new ArrayList&lt;Item&gt;();\n\npublic void add(Item item) {\nitem.add(item);\n}\n\npublic List&lt;Item&gt; getItems() {\n    if(item== null)\n        return new ArrayList&lt;Item&gt;();\n    else\n        return item;\n}\n\n@Override\npublic String getStringData() {\nStringBuilder builder = new StringBuilder();\n\nfor (Item item : items) {\n    builder.append(item.getStringData());\n    builder.append(\"---------------\\n\");\n}\n\nreturn builder.toString();\n}\n\n@Override\npublic String getDataType() {\n// TODO Auto-generated method stub\nreturn null;\n}\n</code></pre>\n\n<p>Item.java class:</p>\n\n<pre><code> @XStreamAlias(\"Item\")\npublic class Item extends ParentItem {\n@XStreamAsAttribute\npublic String access_test;\n\n@XStreamAsAttribute\npublic int test_num;\n\n@XStreamAsAttribute\npublic int test_type;\n\n@XStreamAsAttribute\npublic boolean tst_item;\n\n@XStreamAsAttribute\npublic int test_test_est;\n\n@XStreamAlias(\"eset_test\")\npublic List&lt;Integer&gt; eset_test;\n</code></pre>\n\n<p>And of course I have the getters and setters that I am not including here.</p>\n\n<p>Exception:</p>\n\n<pre><code>com.thoughtworks.xstream.security.ForbiddenClassException: com.test.cp.test123.pojo.TestList\n    at com.thoughtworks.xstream.security.NoTypePermission.allows(NoTypePermission.java:26)\n    at com.thoughtworks.xstream.mapper.SecurityMapper.realClass(SecurityMapper.java:74)\n    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\n    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)\n    at com.thoughtworks.xstream.mapper.CachingMapper.realClass(CachingMapper.java:47)\n    at com.thoughtworks.xstream.core.util.HierarchicalStreams.readClassType(HierarchicalStreams.java:29)\n    at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:133)\n    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)\n    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1206)\n    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1190)\n    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:1061)\n</code></pre>\n"},{"tags":["java","spring","mongodb"],"answers":[{"tags":[],"owner":{"account_id":26186505,"reputation":11,"user_id":19868973,"display_name":"Ray"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678434423,"creation_date":1678434423,"answer_id":75693427,"question_id":75689020,"body_markdown":"Maybe you can try to give a id to path.like `path.setId(sequence.nextId());`","title":"Cannot create a reference to an object with a NULL id. with mongo","body":"<p>Maybe you can try to give a id to path.like <code>path.setId(sequence.nextId());</code></p>\n"}],"owner":{"account_id":26783102,"reputation":1,"user_id":20377669,"display_name":"Pasqualone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678434423,"creation_date":1678388802,"question_id":75689020,"body_markdown":"im having the Cannot create a reference to an object with a NULL id error, i dont know whats the problem, i dont know if i did everything right or not.\r\n\r\n\r\n\r\n\r\n\r\n```\r\n@PostMapping(value = &quot;/insert&quot;, produces = &quot;application/json&quot;)\r\n\tpublic ResponseEntity&lt;?&gt; createPath(@RequestBody Path path) {\r\n\t\tlog.info(&quot;Insert of the path&quot;);\r\n\r\n\r\n\r\n\t\tpathService.insertPath(path);\r\n\r\n\t\treturn ResponseEntity.ok(path);\r\n\t}\r\n```\r\n\r\nthats the code of point path, and its just a normal controller just to try the insert, same is for pointPath controller, i dont have any controls at all \r\n\r\n\r\n```\r\nPoint path :\r\n\r\n@Data\r\n@Document(collection = &quot;pointPath&quot;)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic class PointPath {\r\n\r\n\t@Id\r\n\tprivate String id;\r\n\t\r\n\tprivate String streetName;\r\n\t\r\n\tprivate String numberStreet;\r\n\r\n\tprivate String municipality;\r\n\t\r\n\tprivate Integer zipCode;\r\n\t\r\n\tprivate Double latitude;\r\n\t\r\n\tprivate Double longitude;\r\n\t\r\n}\r\n```\r\n\r\n\r\nPath :\r\n\r\n\r\n```\r\n@Data\r\n@Document(collection = &quot;path&quot;)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic class Path {\r\n\r\n\t@Id\r\n\tprivate String id;\r\n\r\n\tprivate PointPath starterPoint;\r\n\r\n\tprivate PointPath endPoint;\r\n\r\n\t@DBRef\r\n\tprivate List&lt;PointPath&gt; intermediatePoints = new ArrayList&lt;&gt;();\r\n\r\n\tprivate boolean circuit;\r\n\r\n\t// counting minuts\r\n\tprivate Integer time;\r\n\r\n\t// counting meters\r\n\tprivate Integer totalDistance;\r\n\r\n}\r\n\r\n```\r\n\r\nI can easily create a pointPath document \r\n\r\nbut if i try to do a path insert\r\n\r\n```\r\n{   \r\n   \r\n    &quot;starterPoint&quot;: {\r\n        &quot;streetName&quot;: &quot;Via Roma&quot;,\r\n        &quot;numberStreet&quot;: &quot;12&quot;,\r\n        &quot;municipality&quot;: &quot;Roma&quot;,\r\n        &quot;zipCode&quot;: 22100,\r\n        &quot;latitude&quot;: 41.902782,\r\n        &quot;longitude&quot;: 12.496366\r\n    },\r\n    &quot;endPoint&quot;: {\r\n        &quot;streetName&quot;: &quot;Piazza del Popolo&quot;,\r\n        &quot;numberStreet&quot;: &quot;&quot;,\r\n        &quot;municipality&quot;: &quot;Roma&quot;,\r\n        &quot;zipCode&quot;: 22187,\r\n        &quot;latitude&quot;: 41.910732,\r\n        &quot;longitude&quot;: 12.476200\r\n    },\r\n    &quot;intermediatePoints&quot;: [\r\n        {\r\n            &quot;$ref&quot;: &quot;pointPath&quot;,\r\n            &quot;$id&quot;: &quot;640a263e585b0232fee17908&quot;\r\n        }\r\n    ],\r\n    &quot;circuit&quot;: false,\r\n    &quot;time&quot;: 30,\r\n    &quot;totalDistance&quot;: 6000\r\n}\r\n\r\n```\r\n\r\nlike this, it shows the 500 error \r\nwhat should i do?\r\n","title":"Cannot create a reference to an object with a NULL id. with mongo","body":"<p>im having the Cannot create a reference to an object with a NULL id error, i dont know whats the problem, i dont know if i did everything right or not.</p>\n<pre><code>@PostMapping(value = &quot;/insert&quot;, produces = &quot;application/json&quot;)\n    public ResponseEntity&lt;?&gt; createPath(@RequestBody Path path) {\n        log.info(&quot;Insert of the path&quot;);\n\n\n\n        pathService.insertPath(path);\n\n        return ResponseEntity.ok(path);\n    }\n</code></pre>\n<p>thats the code of point path, and its just a normal controller just to try the insert, same is for pointPath controller, i dont have any controls at all</p>\n<pre><code>Point path :\n\n@Data\n@Document(collection = &quot;pointPath&quot;)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class PointPath {\n\n    @Id\n    private String id;\n    \n    private String streetName;\n    \n    private String numberStreet;\n\n    private String municipality;\n    \n    private Integer zipCode;\n    \n    private Double latitude;\n    \n    private Double longitude;\n    \n}\n</code></pre>\n<p>Path :</p>\n<pre><code>@Data\n@Document(collection = &quot;path&quot;)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class Path {\n\n    @Id\n    private String id;\n\n    private PointPath starterPoint;\n\n    private PointPath endPoint;\n\n    @DBRef\n    private List&lt;PointPath&gt; intermediatePoints = new ArrayList&lt;&gt;();\n\n    private boolean circuit;\n\n    // counting minuts\n    private Integer time;\n\n    // counting meters\n    private Integer totalDistance;\n\n}\n\n</code></pre>\n<p>I can easily create a pointPath document</p>\n<p>but if i try to do a path insert</p>\n<pre><code>{   \n   \n    &quot;starterPoint&quot;: {\n        &quot;streetName&quot;: &quot;Via Roma&quot;,\n        &quot;numberStreet&quot;: &quot;12&quot;,\n        &quot;municipality&quot;: &quot;Roma&quot;,\n        &quot;zipCode&quot;: 22100,\n        &quot;latitude&quot;: 41.902782,\n        &quot;longitude&quot;: 12.496366\n    },\n    &quot;endPoint&quot;: {\n        &quot;streetName&quot;: &quot;Piazza del Popolo&quot;,\n        &quot;numberStreet&quot;: &quot;&quot;,\n        &quot;municipality&quot;: &quot;Roma&quot;,\n        &quot;zipCode&quot;: 22187,\n        &quot;latitude&quot;: 41.910732,\n        &quot;longitude&quot;: 12.476200\n    },\n    &quot;intermediatePoints&quot;: [\n        {\n            &quot;$ref&quot;: &quot;pointPath&quot;,\n            &quot;$id&quot;: &quot;640a263e585b0232fee17908&quot;\n        }\n    ],\n    &quot;circuit&quot;: false,\n    &quot;time&quot;: 30,\n    &quot;totalDistance&quot;: 6000\n}\n\n</code></pre>\n<p>like this, it shows the 500 error\nwhat should i do?</p>\n"},{"tags":["java","spring","spring-boot","maven","spring-mvc"],"comments":[{"owner":{"account_id":10617793,"reputation":81,"user_id":7819736,"display_name":"Lewis_McReu"},"score":0,"creation_date":1678280057,"post_id":75673215,"comment_id":133501308,"body_markdown":"First of all, I would check whether any emitters actually get cleared from the map when a new one is registered for a user.\nSecond, the error you&#39;re getting has to do with database connections, but I don&#39;t see anything relating to a database call in your provided code. Please provide a sample of this.","body":"First of all, I would check whether any emitters actually get cleared from the map when a new one is registered for a user. Second, the error you&#39;re getting has to do with database connections, but I don&#39;t see anything relating to a database call in your provided code. Please provide a sample of this."},{"owner":{"account_id":8841480,"reputation":75,"user_id":6603791,"accept_rate":50,"display_name":"Hristo.L"},"score":0,"creation_date":1678280895,"post_id":75673215,"comment_id":133501544,"body_markdown":"I have editted the post and added the information you requested. Emitters are removed from emmiters map in addToEmittersMap() method. DB call is made every time a new SseEmiter is created to provide notifications stored in DB for period of 60 minutes.","body":"I have editted the post and added the information you requested. Emitters are removed from emmiters map in addToEmittersMap() method. DB call is made every time a new SseEmiter is created to provide notifications stored in DB for period of 60 minutes."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1678284659,"post_id":75673215,"comment_id":133502741,"body_markdown":"Your `@Transactional` doesn&#39;t do anything as it is an internal method call. Hence you are leaking connections.","body":"Your <code>@Transactional</code> doesn&#39;t do anything as it is an internal method call. Hence you are leaking connections."},{"owner":{"account_id":8841480,"reputation":75,"user_id":6603791,"accept_rate":50,"display_name":"Hristo.L"},"score":0,"creation_date":1678286088,"post_id":75673215,"comment_id":133503227,"body_markdown":"That was not the case. I removed the annotations, they were needed before, because the logic was a bit different in that method. But even when I comment the part that make repository calls the problem appears again. \nТhe problem generation process is as follows:\n1. Launch the application\n2. Opening a connection through postman with Authorization Bearer Token\n3. Close and open the connection repeatedly (10x times).\nAfter which I get the above mentioned error.","body":"That was not the case. I removed the annotations, they were needed before, because the logic was a bit different in that method. But even when I comment the part that make repository calls the problem appears again.  Тhe problem generation process is as follows: 1. Launch the application 2. Opening a connection through postman with Authorization Bearer Token 3. Close and open the connection repeatedly (10x times). After which I get the above mentioned error."}],"answers":[{"tags":[],"owner":{"account_id":8841480,"reputation":75,"user_id":6603791,"accept_rate":50,"display_name":"Hristo.L"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678434346,"creation_date":1678353011,"answer_id":75682480,"question_id":75673215,"body_markdown":"Seams that the problem was generated because open-in-view option in spring configuration was set to true. It has to be set to false.\r\nI found the answer here:\r\nhttps://stackoverflow.com/questions/49071931/database-connection-leak-in-spring-boot-with-sseemitter","title":"Hikari pool connection not available when SseEmiter is refreshed multiple times by front-end","body":"<p>Seams that the problem was generated because open-in-view option in spring configuration was set to true. It has to be set to false.\nI found the answer here:\n<a href=\"https://stackoverflow.com/questions/49071931/database-connection-leak-in-spring-boot-with-sseemitter\">Database connection leak in Spring Boot with SseEmitter</a></p>\n"}],"owner":{"account_id":8841480,"reputation":75,"user_id":6603791,"accept_rate":50,"display_name":"Hristo.L"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":265,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75682480,"answer_count":1,"score":1,"last_activity_date":1678434346,"creation_date":1678279583,"question_id":75673215,"body_markdown":"Im using SseEmiter in Spring Boot application to send notifications to Frontend. Everything works fine, the client receives the initial notification and every other notification sent. Тhe problem occurs when page is refreshed 10 or more times. The hickari pool gets filled up and throw a timeout exception. How can I prevent this behavior and clear the old unused connections in the pool?\r\n\r\nController class\r\n\r\n    @RestController\r\n    @ResponseStatus(HttpStatus.OK)\r\n    @RequestMapping(&quot;/notifications&quot;)\r\n    public class NotificationsController {\r\n\r\n        private final NotificationsService notificationsService;\r\n        public NotificationsController(NotificationsService notificationsService) {\r\n            this.notificationsService = notificationsService;\r\n        }\r\n\r\n        @CrossOrigin\r\n        @RequestMapping(value = &quot;/subscribe&quot;, consumes = MediaType.ALL_VALUE)\r\n        public SseEmitter subscribe() {\r\n            SseEmitter sseEmitter = new SseEmitter(Long.MAX_VALUE);\r\n            notificationsService.registerEmitter(sseEmitter);\r\n            return sseEmitter;\r\n        }\r\n\r\nEmitter handal in Service\r\n\r\n    private final Map&lt;String, User&gt; emitters = new HashMap&lt;&gt;();\r\n\r\n    public void registerEmitter(SseEmitter sseEmitter) {\r\n         sendInitEvent(sseEmitter);\r\n         addToEmittersMap(sseEmitter);\r\n    }\r\n\r\n    private void sendInitEvent(SseEmitter sseEmitter) {\r\n        try {\r\n            sseEmitter.send(listNotifications());\r\n            logger.info(&quot;Initial event to emitter sent&quot;);\r\n        } catch (IOException e) {\r\n            e.getMessage();\r\n        }\r\n    }\r\n\r\n    private void addToEmittersMap(SseEmitter sseEmitter) {\r\n        User user = new User(authService.getUserId(),\r\n                authService.getGins().stream()\r\n                .map(Integer::parseInt)\r\n                .toList(),\r\n                sseEmitter);\r\n        emitters.remove(authService.getUserId());\r\n        emitters.put(authService.getUserId(), user);\r\n        logger.info(&quot;Emitter added&quot;);\r\n    }\r\n\r\n    @Modifying\r\n    @Transactional\r\n    public List&lt;NotificationsView&gt; listNotifications() {\r\n        List&lt;NotificationsHistory&gt; events = notificationsRepository.getByGinInAndTsBetween(\r\n                authService.getGins().stream()\r\n                        .map(Integer::parseInt)\r\n                        .toList(),\r\n                Instant.now().minus(60, ChronoUnit.MINUTES),\r\n                Instant.now());\r\n        return notificationsMapper.toDtos(events);\r\n    }\r\nRepository class\r\n\r\n     @Repository\r\n     public interface NotificationsRepository extends JpaRepository&lt;NotificationsHistory, Integer&gt; {\r\n     }\r\n\r\nUpdate on 09.03.2023\r\n\r\nPartialy the problem was solved by changing the upper class so the old SseEmitter is set to &quot;complete&quot; but in one point (30 mins) of work same exception appears.\r\n\r\nChange in code\r\n    Solution\r\n\r\n    private void addToEmittersMap(SseEmitter sseEmitter) {\r\n    User user = new User(authService.getUserId(),\r\n            authService.getGins().stream()\r\n            .map(Integer::parseInt)\r\n            .toList(),\r\n            sseEmitter);\r\n    if(emitters.containsKey(authService.getUserId())){\r\n         emitters.get(authService.getUserId()).emitter().complete();\r\n         logger.info(&quot;Old connection completed&quot;);\r\n    }\r\n    emitters.put(authService.getUserId(), user);\r\n    logger.info(&quot;Emitter added&quot;);\r\n}\r\n\r\n\r\nError message\r\n\r\n&gt; SQL Error: 0, SQLState: null 2023-03-08T14:11:13.270+02:00 ERROR\r\n&gt; 139580 --- [nio-8189-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper  \r\n&gt; : HikariPool-1 - Connection is not available, request timed out after\r\n&gt; 30000ms. 2023-03-08T14:11:13.274+02:00 ERROR 139580 ---\r\n&gt; [nio-8189-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    :\r\n&gt; Servlet.service() for servlet [dispatcherServlet] in context with path\r\n&gt; [] threw exception [Request processing failed:\r\n&gt; org.springframework.transaction.CannotCreateTransactionException:\r\n&gt; Could not open JPA EntityManager for transaction] with root cause\r\n&gt; \r\n&gt; java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is\r\n&gt; not available, request timed out after 30000ms. \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)\r\n&gt; ~[HikariCP-5.0.1.jar:na] \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)\r\n&gt; ~[HikariCP-5.0.1.jar:na] \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)\r\n&gt; ~[HikariCP-5.0.1.jar:na] \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\r\n&gt; ~[HikariCP-5.0.1.jar:na] \tat\r\n&gt; org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n&gt; ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final] \tat\r\n&gt; org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\r\n&gt; ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final] \tat\r\n&gt; org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:107)\r\n&gt; ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final] \tat\r\n&gt; org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:137)\r\n&gt; ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final] \tat\r\n&gt; org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:152)\r\n&gt; ~[spring-orm-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:421)\r\n&gt; ~[spring-orm-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\r\n&gt; ~[spring-tx-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)\r\n&gt; ~[spring-tx-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:595)\r\n&gt; ~[spring-tx-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:382)\r\n&gt; ~[spring-tx-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n&gt; ~[spring-tx-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n&gt; ~[spring-aop-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n&gt; ~[spring-aop-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n&gt; ~[spring-aop-6.0.3.jar:6.0.3] \tat\r\n&gt; com.lsbo.notifications.notificaations.service.NotificationsService$$SpringCGLIB$$0.registerEmitter(&lt;generated&gt;)\r\n&gt; ~[classes/:na] \tat\r\n&gt; com.lsbo.notifications.notificaations.api.NotificationsController.subscribe(NotificationsController.java:27)\r\n&gt; ~[classes/:na] \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n&gt; Method) ~[na:na] \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n&gt; ~[na:na] \tat\r\n&gt; java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; ~[na:na] \tat\r\n&gt; java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n&gt; \tat\r\n&gt; org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1010)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:902)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; jakarta.servlet.http.HttpServlet.service(HttpServlet.java:705)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:6.0] \tat\r\n&gt; org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:884)\r\n&gt; ~[spring-webmvc-6.0.3.jar:6.0.3] \tat\r\n&gt; jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:6.0] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n&gt; ~[tomcat-embed-websocket-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:399)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:297)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:79)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:125)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)\r\n&gt; ~[spring-security-oauth2-resource-server-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:280)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:170)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)\r\n&gt; ~[spring-security-web-6.0.1.jar:6.0.1] \tat\r\n&gt; org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n&gt; ~[spring-web-6.0.3.jar:6.0.3] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n&gt; ~[tomcat-embed-core-10.1.4.jar:10.1.4] \tat\r\n&gt; java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n\r\n\r\n\r\n ","title":"Hikari pool connection not available when SseEmiter is refreshed multiple times by front-end","body":"<p>Im using SseEmiter in Spring Boot application to send notifications to Frontend. Everything works fine, the client receives the initial notification and every other notification sent. Тhe problem occurs when page is refreshed 10 or more times. The hickari pool gets filled up and throw a timeout exception. How can I prevent this behavior and clear the old unused connections in the pool?</p>\n<p>Controller class</p>\n<pre><code>@RestController\n@ResponseStatus(HttpStatus.OK)\n@RequestMapping(&quot;/notifications&quot;)\npublic class NotificationsController {\n\n    private final NotificationsService notificationsService;\n    public NotificationsController(NotificationsService notificationsService) {\n        this.notificationsService = notificationsService;\n    }\n\n    @CrossOrigin\n    @RequestMapping(value = &quot;/subscribe&quot;, consumes = MediaType.ALL_VALUE)\n    public SseEmitter subscribe() {\n        SseEmitter sseEmitter = new SseEmitter(Long.MAX_VALUE);\n        notificationsService.registerEmitter(sseEmitter);\n        return sseEmitter;\n    }\n</code></pre>\n<p>Emitter handal in Service</p>\n<pre><code>private final Map&lt;String, User&gt; emitters = new HashMap&lt;&gt;();\n\npublic void registerEmitter(SseEmitter sseEmitter) {\n     sendInitEvent(sseEmitter);\n     addToEmittersMap(sseEmitter);\n}\n\nprivate void sendInitEvent(SseEmitter sseEmitter) {\n    try {\n        sseEmitter.send(listNotifications());\n        logger.info(&quot;Initial event to emitter sent&quot;);\n    } catch (IOException e) {\n        e.getMessage();\n    }\n}\n\nprivate void addToEmittersMap(SseEmitter sseEmitter) {\n    User user = new User(authService.getUserId(),\n            authService.getGins().stream()\n            .map(Integer::parseInt)\n            .toList(),\n            sseEmitter);\n    emitters.remove(authService.getUserId());\n    emitters.put(authService.getUserId(), user);\n    logger.info(&quot;Emitter added&quot;);\n}\n\n@Modifying\n@Transactional\npublic List&lt;NotificationsView&gt; listNotifications() {\n    List&lt;NotificationsHistory&gt; events = notificationsRepository.getByGinInAndTsBetween(\n            authService.getGins().stream()\n                    .map(Integer::parseInt)\n                    .toList(),\n            Instant.now().minus(60, ChronoUnit.MINUTES),\n            Instant.now());\n    return notificationsMapper.toDtos(events);\n}\n</code></pre>\n<p>Repository class</p>\n<pre><code> @Repository\n public interface NotificationsRepository extends JpaRepository&lt;NotificationsHistory, Integer&gt; {\n }\n</code></pre>\n<p>Update on 09.03.2023</p>\n<p>Partialy the problem was solved by changing the upper class so the old SseEmitter is set to &quot;complete&quot; but in one point (30 mins) of work same exception appears.</p>\n<p>Change in code\nSolution</p>\n<pre><code>private void addToEmittersMap(SseEmitter sseEmitter) {\nUser user = new User(authService.getUserId(),\n        authService.getGins().stream()\n        .map(Integer::parseInt)\n        .toList(),\n        sseEmitter);\nif(emitters.containsKey(authService.getUserId())){\n     emitters.get(authService.getUserId()).emitter().complete();\n     logger.info(&quot;Old connection completed&quot;);\n}\nemitters.put(authService.getUserId(), user);\nlogger.info(&quot;Emitter added&quot;);\n</code></pre>\n<p>}</p>\n<p>Error message</p>\n<blockquote>\n<p>SQL Error: 0, SQLState: null 2023-03-08T14:11:13.270+02:00 ERROR\n139580 --- [nio-8189-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper<br />\n: HikariPool-1 - Connection is not available, request timed out after\n30000ms. 2023-03-08T14:11:13.274+02:00 ERROR 139580 ---\n[nio-8189-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    :\nServlet.service() for servlet [dispatcherServlet] in context with path\n[] threw exception [Request processing failed:\norg.springframework.transaction.CannotCreateTransactionException:\nCould not open JPA EntityManager for transaction] with root cause</p>\n<p>java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is\nnot available, request timed out after 30000ms.   at\ncom.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)\n~[HikariCP-5.0.1.jar:na]  at\ncom.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181)\n~[HikariCP-5.0.1.jar:na]  at\ncom.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146)\n~[HikariCP-5.0.1.jar:na]  at\ncom.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\n~[HikariCP-5.0.1.jar:na]  at\norg.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\n~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]     at\norg.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\n~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]     at\norg.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:107)\n~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]     at\norg.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:137)\n~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]     at\norg.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:152)\n~[spring-orm-6.0.3.jar:6.0.3]     at\norg.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:421)\n~[spring-orm-6.0.3.jar:6.0.3]     at\norg.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\n~[spring-tx-6.0.3.jar:6.0.3]  at\norg.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)\n~[spring-tx-6.0.3.jar:6.0.3]  at\norg.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:595)\n~[spring-tx-6.0.3.jar:6.0.3]  at\norg.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:382)\n~[spring-tx-6.0.3.jar:6.0.3]  at\norg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n~[spring-tx-6.0.3.jar:6.0.3]  at\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n~[spring-aop-6.0.3.jar:6.0.3]     at\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\n~[spring-aop-6.0.3.jar:6.0.3]     at\norg.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\n~[spring-aop-6.0.3.jar:6.0.3]     at\ncom.lsbo.notifications.notificaations.service.NotificationsService$$SpringCGLIB$$0.registerEmitter()\n~[classes/:na]    at\ncom.lsbo.notifications.notificaations.api.NotificationsController.subscribe(NotificationsController.java:27)\n~[classes/:na]    at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\nMethod) ~[na:na]  at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n~[na:na]  at\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n~[na:na]  at\njava.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\nat\norg.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\norg.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1010)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\norg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:902)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\njakarta.servlet.http.HttpServlet.service(HttpServlet.java:705)\n~[tomcat-embed-core-10.1.4.jar:6.0]   at\norg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:884)\n~[spring-webmvc-6.0.3.jar:6.0.3]  at\njakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\n~[tomcat-embed-core-10.1.4.jar:6.0]   at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n~[tomcat-embed-websocket-10.1.4.jar:10.1.4]   at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:399)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:297)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:79)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:125)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)\n~[spring-security-oauth2-resource-server-6.0.1.jar:6.0.1]     at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:280)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:170)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)\n~[spring-security-web-6.0.1.jar:6.0.1]    at\norg.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n~[spring-web-6.0.3.jar:6.0.3]     at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\norg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n~[tomcat-embed-core-10.1.4.jar:10.1.4]    at\njava.base/java.lang.Thread.run(Thread.java:833) ~[na:na]</p>\n</blockquote>\n"},{"tags":["java","spring-boot","memory-leaks","heap-memory","drools"],"comments":[{"owner":{"account_id":120777,"reputation":14376,"user_id":313400,"display_name":"Guillaume"},"score":0,"creation_date":1678481371,"post_id":75675000,"comment_id":133547567,"body_markdown":"What does the `RuleEngine.getKieContainer()` method do? From the threaddump it looks like the leak might be there","body":"What does the <code>RuleEngine.getKieContainer()</code> method do? From the threaddump it looks like the leak might be there"}],"answers":[{"comments":[{"owner":{"account_id":27966456,"reputation":1,"user_id":21357195,"display_name":"TomoeGozen"},"score":0,"creation_date":1678433748,"post_id":75675979,"comment_id":133534891,"body_markdown":"Thank you! Check update on my initial post please!","body":"Thank you! Check update on my initial post please!"},{"owner":{"account_id":480643,"reputation":2233,"user_id":893991,"display_name":"tarilabs"},"score":0,"creation_date":1678464052,"post_id":75675979,"comment_id":133543258,"body_markdown":"sorry but you are ignoring &quot;Providing that with a reproducer,&quot; because again there is zero insights how the kiecontainer is created (getKieContainer()) so going back/forth like this is not efficient. Imho, provide reproducer, share it via mailing-list as I originally mentioned. my2c.","body":"sorry but you are ignoring &quot;Providing that with a reproducer,&quot; because again there is zero insights how the kiecontainer is created (getKieContainer()) so going back/forth like this is not efficient. Imho, provide reproducer, share it via mailing-list as I originally mentioned. my2c."}],"tags":[],"owner":{"account_id":480643,"reputation":2233,"user_id":893991,"display_name":"tarilabs"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678294501,"creation_date":1678294501,"answer_id":75675979,"question_id":75675000,"body_markdown":"Difficult to say without a reproducer... any chance you can share the spring-boot based application (not necessarily the KJAR) with a github repo link and share it on the [drools-usage][1] or [kogito-development][2] mailing list?\r\n\r\nJust based on the information provided, it *seems* to me you are actually *loading* the KJAR per request, which is already arguable, and further in your application code you might be inadvertently not releasing the _compilation_ side of the loaded KJAR.\r\n\r\n&gt; Do you think this is actually a memory leak?\r\n\r\nSo far, I would doubt is a memory leak in the Drools API, seems suspicious of a non-released resources in your &quot;loading&quot; code.\r\n\r\n&gt; How could we investigate it further?\r\n\r\nSharing a reproducer of your application (not necessarily the KJAR). Even better, you can check if the same undesired behaviour happens with a KJAR not containing your business logic, but just some example rules.\r\n\r\n&gt; Should we use a different approach of instantiating/firing rules?\r\n\r\nSo far, I would be led to believe the problem is indeed there, the way you instantiate the KieContainwer.\r\n\r\n&gt; Maybe a session pool could help?\r\n\r\nIf my suspect is proved correct, a session pool would not help.\r\n\r\n\r\nTo me, the best in a cloud-native environment, is just to migrate to Kogito.\r\n\r\nIf you really need your application in the way you have it designed, I would double check the part which is in charge of locating, loading and instantiating the KJAR into a KieContainer.\r\nProviding that with a reproducer, or sharing at least the minimal code which allow investigation on mailing-lists, is probably more pragmatic.\r\n\r\n  [1]: https://groups.google.com/g/drools-usage\r\n  [2]: https://groups.google.com/g/kogito-development","title":"Drools Memory Leak","body":"<p>Difficult to say without a reproducer... any chance you can share the spring-boot based application (not necessarily the KJAR) with a github repo link and share it on the <a href=\"https://groups.google.com/g/drools-usage\" rel=\"nofollow noreferrer\">drools-usage</a> or <a href=\"https://groups.google.com/g/kogito-development\" rel=\"nofollow noreferrer\">kogito-development</a> mailing list?</p>\n<p>Just based on the information provided, it <em>seems</em> to me you are actually <em>loading</em> the KJAR per request, which is already arguable, and further in your application code you might be inadvertently not releasing the <em>compilation</em> side of the loaded KJAR.</p>\n<blockquote>\n<p>Do you think this is actually a memory leak?</p>\n</blockquote>\n<p>So far, I would doubt is a memory leak in the Drools API, seems suspicious of a non-released resources in your &quot;loading&quot; code.</p>\n<blockquote>\n<p>How could we investigate it further?</p>\n</blockquote>\n<p>Sharing a reproducer of your application (not necessarily the KJAR). Even better, you can check if the same undesired behaviour happens with a KJAR not containing your business logic, but just some example rules.</p>\n<blockquote>\n<p>Should we use a different approach of instantiating/firing rules?</p>\n</blockquote>\n<p>So far, I would be led to believe the problem is indeed there, the way you instantiate the KieContainwer.</p>\n<blockquote>\n<p>Maybe a session pool could help?</p>\n</blockquote>\n<p>If my suspect is proved correct, a session pool would not help.</p>\n<p>To me, the best in a cloud-native environment, is just to migrate to Kogito.</p>\n<p>If you really need your application in the way you have it designed, I would double check the part which is in charge of locating, loading and instantiating the KJAR into a KieContainer.\nProviding that with a reproducer, or sharing at least the minimal code which allow investigation on mailing-lists, is probably more pragmatic.</p>\n"}],"owner":{"account_id":27966456,"reputation":1,"user_id":21357195,"display_name":"TomoeGozen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678434059,"creation_date":1678289257,"question_id":75675000,"body_markdown":"Recently our Microservice which &#39;lives&#39; on a pod on Kubernetes failed with heap out of memory related issues. No problem till then, we gave some more resources and everything works as expected. Given this incident we started taking some heap dumps to analyze them and check what the root cause could be.\r\n\r\n\r\nMAT Tool analysis spots 3 Leak Suspects as can be seen below:\r\n[MAT Heap Analysis](https://i.stack.imgur.com/EcUFq.png)\r\n\r\nWe also used JXRay tool to have an analysis and thats the results:\r\n[JXRay Heap Analysis](https://i.stack.imgur.com/mevjD.png)\r\n\r\nEverything was drools related thats why we used VisualVM to check the object memory usage:\r\n[VisualVM Objects Tree](https://i.stack.imgur.com/ptdcT.png)\r\n\r\nUnder MVELCompilationUnit there are almost 50.000 object references org.drools.core.base.mvel.MVELCompilationUnit#1 , org.drools.core.base.mvel.MVELCompilationUnit#2......50.000\r\n\r\nDoes this makes sense?\r\n\r\n\r\nAt this point its worth mentioning that our project atm uses almost 1000 rules which are loaded through an external kjar.\r\nAnalyzing with VisualVM by executing an operation that fires all rules and performing a manual GC afterwards does not show any issues since the heap memory is cleaned afterwards.\r\n\r\nAdditionally regarding our code atm:\r\n\r\nWe use statefull drool sessions, per user a KiesSession is created, it fires all the rules twice and it gets disposed at the end of its journey. \r\n\r\nSo.. Do you think this is actually a memory leak?\r\nHow could we investigate it further?\r\nShould we use a different approach of instantiating/firing rules? Maybe a session pool could help?\r\n\r\nThank in advance.\r\n\r\n[UPDATE 1#]\r\nMonitoring Heap Memory before running this TestController endpoint\r\nindicates like 118000.... bytes uses\r\n\r\nAfter testing it goes up to 250000... like 2x ..\r\nPerforming a GC afterwards does not free up the used heap memory.\r\nRerunning the test does not make the heap memory increase further though. Its like the KieContainer is being loaded with rules on its first call and then it stays on memory. Is this expected?\r\n\r\n\r\n\r\n\r\n    public void fireRules() {\r\n\r\n        for (int i = 0; i &lt; 4; i++) {\r\n            System.out.println(getUsedMemory());\r\n            KieSession testSession = ruleEngine.getNewSession(&quot;XXX&quot;);\r\n            testSession.fireAllRules();\r\n            testSession.dispose();\r\n        }\r\n    }\r\n    \r\n    private Long getUsedMemory() {\r\n        System.gc();\r\n        final Runtime runtime = Runtime.getRuntime();\r\n        return runtime.totalMemory() - runtime.freeMemory();\r\n    }\r\n\r\n\r\nThe injected RuleEngine looks like:\r\n\r\n\r\n    public RuleEngine(String groupId, String artifactId, String versionId, String sessionName) {\r\n        this.releaseId = new ReleaseIdImpl(groupId, artifactId, versionId);\r\n        this.sessionName = sessionName;\r\n        this.kieContainer = getKieContainer();\r\n        this.globalObjects.put(&quot;helper&quot;, new CatalogueGlobalHelper());\r\n    }\r\n","title":"Drools Memory Leak","body":"<p>Recently our Microservice which 'lives' on a pod on Kubernetes failed with heap out of memory related issues. No problem till then, we gave some more resources and everything works as expected. Given this incident we started taking some heap dumps to analyze them and check what the root cause could be.</p>\n<p>MAT Tool analysis spots 3 Leak Suspects as can be seen below:\n<a href=\"https://i.stack.imgur.com/EcUFq.png\" rel=\"nofollow noreferrer\">MAT Heap Analysis</a></p>\n<p>We also used JXRay tool to have an analysis and thats the results:\n<a href=\"https://i.stack.imgur.com/mevjD.png\" rel=\"nofollow noreferrer\">JXRay Heap Analysis</a></p>\n<p>Everything was drools related thats why we used VisualVM to check the object memory usage:\n<a href=\"https://i.stack.imgur.com/ptdcT.png\" rel=\"nofollow noreferrer\">VisualVM Objects Tree</a></p>\n<p>Under MVELCompilationUnit there are almost 50.000 object references org.drools.core.base.mvel.MVELCompilationUnit#1 , org.drools.core.base.mvel.MVELCompilationUnit#2......50.000</p>\n<p>Does this makes sense?</p>\n<p>At this point its worth mentioning that our project atm uses almost 1000 rules which are loaded through an external kjar.\nAnalyzing with VisualVM by executing an operation that fires all rules and performing a manual GC afterwards does not show any issues since the heap memory is cleaned afterwards.</p>\n<p>Additionally regarding our code atm:</p>\n<p>We use statefull drool sessions, per user a KiesSession is created, it fires all the rules twice and it gets disposed at the end of its journey.</p>\n<p>So.. Do you think this is actually a memory leak?\nHow could we investigate it further?\nShould we use a different approach of instantiating/firing rules? Maybe a session pool could help?</p>\n<p>Thank in advance.</p>\n<p>[UPDATE 1#]\nMonitoring Heap Memory before running this TestController endpoint\nindicates like 118000.... bytes uses</p>\n<p>After testing it goes up to 250000... like 2x ..\nPerforming a GC afterwards does not free up the used heap memory.\nRerunning the test does not make the heap memory increase further though. Its like the KieContainer is being loaded with rules on its first call and then it stays on memory. Is this expected?</p>\n<pre><code>public void fireRules() {\n\n    for (int i = 0; i &lt; 4; i++) {\n        System.out.println(getUsedMemory());\n        KieSession testSession = ruleEngine.getNewSession(&quot;XXX&quot;);\n        testSession.fireAllRules();\n        testSession.dispose();\n    }\n}\n\nprivate Long getUsedMemory() {\n    System.gc();\n    final Runtime runtime = Runtime.getRuntime();\n    return runtime.totalMemory() - runtime.freeMemory();\n}\n</code></pre>\n<p>The injected RuleEngine looks like:</p>\n<pre><code>public RuleEngine(String groupId, String artifactId, String versionId, String sessionName) {\n    this.releaseId = new ReleaseIdImpl(groupId, artifactId, versionId);\n    this.sessionName = sessionName;\n    this.kieContainer = getKieContainer();\n    this.globalObjects.put(&quot;helper&quot;, new CatalogueGlobalHelper());\n}\n</code></pre>\n"},{"tags":["java","xml","spring-boot","java-8","xmlmapper"],"comments":[{"owner":{"account_id":2918701,"reputation":2976,"user_id":2501410,"accept_rate":94,"display_name":"Moh-Aw"},"score":1,"creation_date":1678102396,"post_id":75648172,"comment_id":133462281,"body_markdown":"I think there is an error in your XML file. &lt;Header&gt; is missing.","body":"I think there is an error in your XML file. &lt;Header&gt; is missing."},{"owner":{"account_id":25087139,"reputation":7,"user_id":18939211,"display_name":"Karin"},"score":0,"creation_date":1678107104,"post_id":75648172,"comment_id":133463471,"body_markdown":"Header element is there but it is empty, does the model not accept empty elements?","body":"Header element is there but it is empty, does the model not accept empty elements?"},{"owner":{"account_id":2918701,"reputation":2976,"user_id":2501410,"accept_rate":94,"display_name":"Moh-Aw"},"score":0,"creation_date":1678109431,"post_id":75648172,"comment_id":133464153,"body_markdown":"Maybe it should be &lt;Header /&gt;? W3schools XML page: &quot;Empty XML Elements An element with no content is said to be empty. In XML, you can indicate an empty element like this: &lt;element&gt;&lt;/element&gt; or you can use an empty tag, like this (this sort of element syntax is called self-closing): &lt;element /&gt; The two forms above produce identical results in an XML parser.&quot;","body":"Maybe it should be &lt;Header /&gt;? W3schools XML page: &quot;Empty XML Elements An element with no content is said to be empty. In XML, you can indicate an empty element like this: &lt;element&gt;&lt;/element&gt; or you can use an empty tag, like this (this sort of element syntax is called self-closing): &lt;element /&gt; The two forms above produce identical results in an XML parser.&quot;"}],"answers":[{"comments":[{"owner":{"account_id":25087139,"reputation":7,"user_id":18939211,"display_name":"Karin"},"score":0,"creation_date":1678106566,"post_id":75650110,"comment_id":133463323,"body_markdown":"I have only used XmlMapper and a dependency in pom : jackson-dataformat-xml","body":"I have only used XmlMapper and a dependency in pom : jackson-dataformat-xml"}],"tags":[],"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678101028,"creation_date":1678101028,"answer_id":75650110,"question_id":75648172,"body_markdown":"which xml parse library you used ? Not sure that it could slove the first line   which is  ```&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;```  , as suggestion , you can try to rm the first line  of xml file , if it work , Obviously , you can change your xmp parse library.","title":"How to create java model class to read xml file","body":"<p>which xml parse library you used ? Not sure that it could slove the first line   which is  <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</code>  , as suggestion , you can try to rm the first line  of xml file , if it work , Obviously , you can change your xmp parse library.</p>\n"},{"tags":[],"owner":{"account_id":25654570,"reputation":111,"user_id":19421233,"display_name":"Vidz Here"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678119356,"creation_date":1678119356,"answer_id":75653228,"question_id":75648172,"body_markdown":"Your xml is invalid.\r\n1) This is invalid tag :  `&lt;/Header&gt;`\r\n2) Correct way to write empty tag is : `&lt;Header/&gt;`\r\n3) Its a good practice to validate xml on an online parser like https://jsonformatter.org/xml-parser\r\n","title":"How to create java model class to read xml file","body":"<p>Your xml is invalid.</p>\n<ol>\n<li>This is invalid tag :  <code>&lt;/Header&gt;</code></li>\n<li>Correct way to write empty tag is : <code>&lt;Header/&gt;</code></li>\n<li>Its a good practice to validate xml on an online parser like <a href=\"https://jsonformatter.org/xml-parser\" rel=\"nofollow noreferrer\">https://jsonformatter.org/xml-parser</a></li>\n</ol>\n"}],"owner":{"account_id":25087139,"reputation":7,"user_id":18939211,"display_name":"Karin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1678434022,"creation_date":1678088169,"question_id":75648172,"body_markdown":"I am new to xml parsing and currently I have an xml file that I am trying to read through XmlMapper in a junit test case. But when I run the test, there is no error obtained but a null value for the file.\r\nI have the following Xml file -\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;\r\n    &lt;Root version=&quot;1.0&quot;&gt;\r\n        &lt;/Header&gt;\r\n        &lt;Value line=&quot;1&quot;&gt;\r\n            &lt;Id&gt; 20868PW &lt;/Id&gt;\r\n            &lt;Price&gt; 7 &lt;/Price&gt;\r\n         &lt;/Item&gt;\r\n    &lt;/Root&gt;\r\n\r\nBelow is the code for reading the xml file-\r\n\r\n    private MyResponse getMockResponse() throws IOException {\r\n     XmlMapper xmlMapper = new XmlMapper();\r\n     File file = new File(&quot;src/test/MockedFile.xml&quot;);\r\n     return xmlMapper.readValue(file, MyResponse.class);\r\n    }\r\n\r\nMyResponse.java\r\n\r\n    public class MyResponse {\r\n      @XmlElement(name=&quot;Root&quot;)\r\n      private RootResponse root;\r\n    }\r\n\r\nRootResponse.java\r\n\r\n    @XmlRootElement(name=&quot;Root&quot;)\r\n\r\n    public class RootResponse {\r\n     @XmlElement(name=&quot;Value&quot;)\r\n     private List&lt;Value&gt; value;\r\n     @XmlElement(name=&quot;Header&quot;)\r\n     private List&lt;Header&gt; header;\r\n     @XmlAttribute\r\n     private String version;\r\n\r\nIs there something missing in my model class because of which the file is not read correctly and returns root = null?\r\n\r\n           ","title":"How to create java model class to read xml file","body":"<p>I am new to xml parsing and currently I have an xml file that I am trying to read through XmlMapper in a junit test case. But when I run the test, there is no error obtained but a null value for the file.\nI have the following Xml file -</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;\n&lt;Root version=&quot;1.0&quot;&gt;\n    &lt;/Header&gt;\n    &lt;Value line=&quot;1&quot;&gt;\n        &lt;Id&gt; 20868PW &lt;/Id&gt;\n        &lt;Price&gt; 7 &lt;/Price&gt;\n     &lt;/Item&gt;\n&lt;/Root&gt;\n</code></pre>\n<p>Below is the code for reading the xml file-</p>\n<pre><code>private MyResponse getMockResponse() throws IOException {\n XmlMapper xmlMapper = new XmlMapper();\n File file = new File(&quot;src/test/MockedFile.xml&quot;);\n return xmlMapper.readValue(file, MyResponse.class);\n}\n</code></pre>\n<p>MyResponse.java</p>\n<pre><code>public class MyResponse {\n  @XmlElement(name=&quot;Root&quot;)\n  private RootResponse root;\n}\n</code></pre>\n<p>RootResponse.java</p>\n<pre><code>@XmlRootElement(name=&quot;Root&quot;)\n\npublic class RootResponse {\n @XmlElement(name=&quot;Value&quot;)\n private List&lt;Value&gt; value;\n @XmlElement(name=&quot;Header&quot;)\n private List&lt;Header&gt; header;\n @XmlAttribute\n private String version;\n</code></pre>\n<p>Is there something missing in my model class because of which the file is not read correctly and returns root = null?</p>\n"},{"tags":["java","android","retrofit","retrofit2"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1678436075,"post_id":75693279,"comment_id":133535389,"body_markdown":"You&#39;d either need to write a custom  deserializer (which basically means you do all the work) or you&#39;d need to just deserialize into a map.  Of course how to do it depends on what JSON serializing library you&#39;re using, there&#39;s multiple.","body":"You&#39;d either need to write a custom  deserializer (which basically means you do all the work) or you&#39;d need to just deserialize into a map.  Of course how to do it depends on what JSON serializing library you&#39;re using, there&#39;s multiple."}],"owner":{"account_id":16656557,"reputation":1,"user_id":12037792,"display_name":"AMRESWAR V"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678433840,"creation_date":1678433284,"question_id":75693279,"body_markdown":"\r\n```json\r\n{\r\n  &quot;CategoryPanel&quot;: [\r\n    {\r\n      &quot;ParentCategory&quot;: &quot;Fashion&quot;,\r\n      &quot;Id&quot;: 1,\r\n      &quot;subCategory1&quot;: [{ \r\n          &quot;Name&quot;: &quot;Men&#39;s Top&quot;,\r\n          &quot;IsEnable&quot;: true,\r\n          &quot;ID&quot;: 2,\r\n          &quot;Subcategory1_1&quot;: [\r\n            {\r\n              &quot;Name&quot;: &quot;Men&#39;s T Shirts&quot;,\r\n              &quot;IsEnable&quot;: true,\r\n              &quot;ID&quot;: 3,\r\n              &quot;Subcategory1_3&quot;: [\r\n                {\r\n                  &quot;Name&quot;: &quot;Plain&quot;,\r\n                  &quot;IsEnable&quot;: true,\r\n                  &quot;ID&quot;: 4\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              &quot;Name&quot;: &quot;Men&#39;s Casual Shirts&quot;,\r\n              &quot;IsEnable&quot;: true,\r\n              &quot;ID&quot;: 5\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          &quot;Name&quot;: &quot;Men&#39;s Bottom&quot;,\r\n          &quot;IsEnable&quot;: true,\r\n          &quot;ID&quot;: 6,\r\n          &quot;Subcategory2_6&quot;: [\r\n            {\r\n              &quot;Name&quot;: &quot;Cotton Pant&quot;,\r\n              &quot;IsEnable&quot;: true,\r\n              &quot;ID&quot;: 7\r\n            },\r\n            {\r\n              &quot;Name&quot;: &quot;Jean Pant&quot;,\r\n              &quot;IsEnable&quot;: true,\r\n              &quot;ID&quot;: 8\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      &quot;ParentCategory&quot;: &quot;Home&quot;,\r\n      &quot;Id&quot;: 2,\r\n      &quot;subcategory2_1&quot;: [\r\n        {\r\n          &quot;Name&quot;: &quot;Home Furnishings&quot;,\r\n          &quot;IsEnable&quot;: true,\r\n          &quot;ID&quot;: 9\r\n        },\r\n        {\r\n          &quot;Name&quot;: &quot;Kitchen Furniture&quot;,\r\n          &quot;IsEnable&quot;: true,\r\n          &quot;ID&quot;: 10,\r\n          &quot;SubCategory2_3&quot;: [\r\n            {\r\n              &quot;Name&quot;: &quot;BedSheets&quot;,\r\n              &quot;IsEnable&quot;: true,\r\n              &quot;ID&quot;: 11\r\n            },\r\n            {\r\n              &quot;Name&quot;: &quot;Blankets&quot;,\r\n              &quot;IsEnable&quot;: true,\r\n              &quot;ID&quot;: 12\r\n            }\r\n          ]\r\n        }\r\n      ].\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n\r\nThe response I&#39;m returning from my API call via Retrofit has a dynamic SerializedName of subCategory and further dynamic subcategory for each other subcategory. This structure has nested further inside and unable to create classes since the JSON SerializedName is dynamic and nested accordingly.\r\n\r\nHow do I create Retrofit classes in Java for this JSON structure and display the data?","title":"Android parse JSON Key dynamically and Set Dynamic SerializedName annotation","body":"<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;CategoryPanel&quot;: [\n    {\n      &quot;ParentCategory&quot;: &quot;Fashion&quot;,\n      &quot;Id&quot;: 1,\n      &quot;subCategory1&quot;: [{ \n          &quot;Name&quot;: &quot;Men's Top&quot;,\n          &quot;IsEnable&quot;: true,\n          &quot;ID&quot;: 2,\n          &quot;Subcategory1_1&quot;: [\n            {\n              &quot;Name&quot;: &quot;Men's T Shirts&quot;,\n              &quot;IsEnable&quot;: true,\n              &quot;ID&quot;: 3,\n              &quot;Subcategory1_3&quot;: [\n                {\n                  &quot;Name&quot;: &quot;Plain&quot;,\n                  &quot;IsEnable&quot;: true,\n                  &quot;ID&quot;: 4\n                }\n              ]\n            },\n            {\n              &quot;Name&quot;: &quot;Men's Casual Shirts&quot;,\n              &quot;IsEnable&quot;: true,\n              &quot;ID&quot;: 5\n            }\n          ]\n        },\n        {\n          &quot;Name&quot;: &quot;Men's Bottom&quot;,\n          &quot;IsEnable&quot;: true,\n          &quot;ID&quot;: 6,\n          &quot;Subcategory2_6&quot;: [\n            {\n              &quot;Name&quot;: &quot;Cotton Pant&quot;,\n              &quot;IsEnable&quot;: true,\n              &quot;ID&quot;: 7\n            },\n            {\n              &quot;Name&quot;: &quot;Jean Pant&quot;,\n              &quot;IsEnable&quot;: true,\n              &quot;ID&quot;: 8\n            }\n          ]\n        }\n      ]\n    },\n    {\n      &quot;ParentCategory&quot;: &quot;Home&quot;,\n      &quot;Id&quot;: 2,\n      &quot;subcategory2_1&quot;: [\n        {\n          &quot;Name&quot;: &quot;Home Furnishings&quot;,\n          &quot;IsEnable&quot;: true,\n          &quot;ID&quot;: 9\n        },\n        {\n          &quot;Name&quot;: &quot;Kitchen Furniture&quot;,\n          &quot;IsEnable&quot;: true,\n          &quot;ID&quot;: 10,\n          &quot;SubCategory2_3&quot;: [\n            {\n              &quot;Name&quot;: &quot;BedSheets&quot;,\n              &quot;IsEnable&quot;: true,\n              &quot;ID&quot;: 11\n            },\n            {\n              &quot;Name&quot;: &quot;Blankets&quot;,\n              &quot;IsEnable&quot;: true,\n              &quot;ID&quot;: 12\n            }\n          ]\n        }\n      ].\n    }\n  ]\n}\n</code></pre>\n<p>The response I'm returning from my API call via Retrofit has a dynamic SerializedName of subCategory and further dynamic subcategory for each other subcategory. This structure has nested further inside and unable to create classes since the JSON SerializedName is dynamic and nested accordingly.</p>\n<p>How do I create Retrofit classes in Java for this JSON structure and display the data?</p>\n"},{"tags":["java","recursion","jvm","binary-tree"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1678409585,"post_id":75691324,"comment_id":133531716,"body_markdown":"&quot;Is a new int depth created every time the function is called?&quot; Yes, why do you think this makes `depth--;` necessary? It is precisely because each method (stack frame) having its own `depth` variable that makes `depth--;` *unnecessary*.","body":"&quot;Is a new int depth created every time the function is called?&quot; Yes, why do you think this makes <code>depth--;</code> necessary? It is precisely because each method (stack frame) having its own <code>depth</code> variable that makes <code>depth--;</code> <i>unnecessary</i>."},{"owner":{"account_id":27978176,"reputation":13,"user_id":21366470,"display_name":"B_flee"},"score":0,"creation_date":1678410800,"post_id":75691324,"comment_id":133531858,"body_markdown":"Oh, because I thought I need a `depth--` at the postorder position when it meets an empty node and returns to the previous node.  However, why `depth` could not be modified successfully here, I mean, if the code is :\n        max(root.left,depth);\n        max(root.right,depth);\n        depth ++;\n   then it will not work.","body":"Oh, because I thought I need a <code>depth--</code> at the postorder position when it meets an empty node and returns to the previous node.  However, why <code>depth</code> could not be modified successfully here, I mean, if the code is :         max(root.left,depth);         max(root.right,depth);         depth ++;    then it will not work."},{"owner":{"account_id":208217,"reputation":1488,"user_id":458561,"display_name":"boneill"},"score":0,"creation_date":1678413140,"post_id":75691324,"comment_id":133532153,"body_markdown":"See &quot;call by value&quot;: https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_value","body":"See &quot;call by value&quot;: <a href=\"https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_value\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Evaluation_strategy#Call_by_value</a>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1678413681,"post_id":75691324,"comment_id":133532218,"body_markdown":"Part of what might be confusing you is that this implementation is incorrect. For one thing, it should return the `depth`. It also needs to compare the values returned for the left and right sub-trees to see which is deeper.","body":"Part of what might be confusing you is that this implementation is incorrect. For one thing, it should return the <code>depth</code>. It also needs to compare the values returned for the left and right sub-trees to see which is deeper."}],"answers":[{"comments":[{"owner":{"account_id":27978176,"reputation":13,"user_id":21366470,"display_name":"B_flee"},"score":1,"creation_date":1678474697,"post_id":75693274,"comment_id":133546037,"body_markdown":"Very helpful! So sad I am still a new StackOverflow user who needs more reputation to upvote your answer. I will do so once I am qualified. Thank you!","body":"Very helpful! So sad I am still a new StackOverflow user who needs more reputation to upvote your answer. I will do so once I am qualified. Thank you!"}],"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678433584,"creation_date":1678433225,"answer_id":75693274,"question_id":75691324,"body_markdown":"First of all, the code does not do what is described. The initial caller will not get the depth of the tree. The function will have done all this work for nothing. \r\n\r\nAs to your remarks and questions:\r\n\r\n&gt; IntelliJ will prompt that &quot;the value changed at depth += 100 will never be used&quot;.\r\n\r\nThis is true, because right after that statement, the function&#39;s execution context is destroyed and the variable `depth` ceases to exist -- the memory used for it is disposed.\r\n\r\n&gt; How many times has the variable depth actually been created in the stack memory? Is a new int depth created every time the function is called?\r\n\r\nYes, a new `int depth` is created every time the function is called. It is a variable that is *local* to the function&#39;s execution context: it is created when the function starts executing, is initialised by assigning a value that is provided by the caller, and is destroyed when the function returns.\r\n\r\n&gt; ...then I think `depth--` should be necessary.\r\n\r\nNo. At the end of the function&#39;s execution, the `depth` variable will cease to exist, so making a &quot;last-minute&quot; assignment to it serves no purpose at all. No-one is looking at that variable except the current execution context, which is about to end.\r\n\r\nBe aware that the caller&#39;s `depth` variable has nothing to do with the callee&#39;s `depth` variable. An assignment to the latter (like with `=`, `+=` or `++`) has no influence on the first. The caller&#39;s `depth` variable will not (and cannot) be assigned a new value by passing it as argument to a function call.\r\n\r\nThe solution is to have the function **return** the depth:\r\n\r\n```\r\n   public static int max(TreeNode root) { // No depth parameter!\r\n        if(root == null) return 0;\r\n        // Get the depths returned by recursive calls and derive a\r\n        //    new depth-value from those, and return that to caller\r\n        return 1 + Math.max(max(root.left), max(root.right));\r\n   }\r\n```","title":"How java creates and passes parameters when dealing with the recursion？","body":"<p>First of all, the code does not do what is described. The initial caller will not get the depth of the tree. The function will have done all this work for nothing.</p>\n<p>As to your remarks and questions:</p>\n<blockquote>\n<p>IntelliJ will prompt that &quot;the value changed at depth += 100 will never be used&quot;.</p>\n</blockquote>\n<p>This is true, because right after that statement, the function's execution context is destroyed and the variable <code>depth</code> ceases to exist -- the memory used for it is disposed.</p>\n<blockquote>\n<p>How many times has the variable depth actually been created in the stack memory? Is a new int depth created every time the function is called?</p>\n</blockquote>\n<p>Yes, a new <code>int depth</code> is created every time the function is called. It is a variable that is <em>local</em> to the function's execution context: it is created when the function starts executing, is initialised by assigning a value that is provided by the caller, and is destroyed when the function returns.</p>\n<blockquote>\n<p>...then I think <code>depth--</code> should be necessary.</p>\n</blockquote>\n<p>No. At the end of the function's execution, the <code>depth</code> variable will cease to exist, so making a &quot;last-minute&quot; assignment to it serves no purpose at all. No-one is looking at that variable except the current execution context, which is about to end.</p>\n<p>Be aware that the caller's <code>depth</code> variable has nothing to do with the callee's <code>depth</code> variable. An assignment to the latter (like with <code>=</code>, <code>+=</code> or <code>++</code>) has no influence on the first. The caller's <code>depth</code> variable will not (and cannot) be assigned a new value by passing it as argument to a function call.</p>\n<p>The solution is to have the function <strong>return</strong> the depth:</p>\n<pre><code>   public static int max(TreeNode root) { // No depth parameter!\n        if(root == null) return 0;\n        // Get the depths returned by recursive calls and derive a\n        //    new depth-value from those, and return that to caller\n        return 1 + Math.max(max(root.left), max(root.right));\n   }\n</code></pre>\n"}],"owner":{"account_id":27978176,"reputation":13,"user_id":21366470,"display_name":"B_flee"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1678460720,"accepted_answer_id":75693274,"answer_count":1,"score":1,"last_activity_date":1678433584,"creation_date":1678409124,"question_id":75691324,"body_markdown":"Take the problem of finding the maximum depth of a binary tree as an example. (A binary tree&#39;s maximum depth&#160;is the number of nodes along the longest path from the root node down to the farthest leaf node.)\r\n\r\nThe following code is part of the codes. With each recursive call, the value of `depth` is modified by `depth++` of the function at the previous level, but when the function ends and returns to the function at the previous level, there is no need to perform a `depth--` and even a `depth+=100` could run perfectly.\r\n\r\nIntelliJ will prompt that &quot;the value changed at `depth += 100` will never be used&quot;. This line will be executed neverthless, yet the the changing is in vain.\r\n\r\nSo what happened in the JVM? How many times has the variable `depth` actually been created in the stack memory? Is a new `int depth` created every time the function is called? Or do all functions have variables that point to the same `int depth`? If the former, then I think `depth--` should be necessary, and if the latter, then I think each time you go to the next level of recursion, the `depth` passed in can only be 0. So now I am confused.\r\n\r\nThis is my first question in stackoverflow, and my English is not as good as a native speaker. I Hope my description is clear enough. Thanks to anyone who cares about this question, and I appreciate your help!\r\n\r\n```\r\n   public static void max(TreeNode root,int depth){\r\n        if(root == null) return;\r\n        depth ++\r\n        max(root.left,depth);\r\n        max(root.right,depth);\r\n        depth += 100;\r\n    }\r\n```","title":"How java creates and passes parameters when dealing with the recursion？","body":"<p>Take the problem of finding the maximum depth of a binary tree as an example. (A binary tree's maximum depth is the number of nodes along the longest path from the root node down to the farthest leaf node.)</p>\n<p>The following code is part of the codes. With each recursive call, the value of <code>depth</code> is modified by <code>depth++</code> of the function at the previous level, but when the function ends and returns to the function at the previous level, there is no need to perform a <code>depth--</code> and even a <code>depth+=100</code> could run perfectly.</p>\n<p>IntelliJ will prompt that &quot;the value changed at <code>depth += 100</code> will never be used&quot;. This line will be executed neverthless, yet the the changing is in vain.</p>\n<p>So what happened in the JVM? How many times has the variable <code>depth</code> actually been created in the stack memory? Is a new <code>int depth</code> created every time the function is called? Or do all functions have variables that point to the same <code>int depth</code>? If the former, then I think <code>depth--</code> should be necessary, and if the latter, then I think each time you go to the next level of recursion, the <code>depth</code> passed in can only be 0. So now I am confused.</p>\n<p>This is my first question in stackoverflow, and my English is not as good as a native speaker. I Hope my description is clear enough. Thanks to anyone who cares about this question, and I appreciate your help!</p>\n<pre><code>   public static void max(TreeNode root,int depth){\n        if(root == null) return;\n        depth ++\n        max(root.left,depth);\n        max(root.right,depth);\n        depth += 100;\n    }\n</code></pre>\n"},{"tags":["java","dom"],"answers":[{"tags":[],"owner":{"account_id":27981169,"reputation":1,"user_id":21368886,"display_name":"rustydev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678433513,"creation_date":1678433513,"answer_id":75693310,"question_id":65566177,"body_markdown":"This is a bug in the older versions of Java 8 and java 11 when OutputKeys.INDENT=&quot;yes&quot; is added to the transformer.\r\n\r\nThe Workaround solution is to trim all the lines before providing them to the transformer.","title":"How to disable newline and indenting in DOM Transformer?","body":"<p>This is a bug in the older versions of Java 8 and java 11 when OutputKeys.INDENT=&quot;yes&quot; is added to the transformer.</p>\n<p>The Workaround solution is to trim all the lines before providing them to the transformer.</p>\n"}],"owner":{"account_id":1026899,"reputation":6910,"user_id":1036017,"accept_rate":70,"display_name":"RajV"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1678433513,"creation_date":1609777658,"question_id":65566177,"body_markdown":"I am parsing an XML document and serializing it back. I want to preserve the original indentation and newlines as much as possible. I do not wish to pretty print the DOM. \r\n\r\nConsider the code below where the original document has a single new line before and after the ``&lt;div&gt;`` tag and no indentation.\r\n\r\n```java\r\nimport javax.xml.parsers.DocumentBuilder;\r\nimport javax.xml.parsers.DocumentBuilderFactory;\r\nimport javax.xml.transform.OutputKeys;\r\nimport javax.xml.transform.Transformer;\r\nimport javax.xml.transform.TransformerFactory;\r\nimport javax.xml.transform.dom.DOMSource;\r\nimport javax.xml.transform.stream.StreamResult;\r\nimport org.w3c.dom.Attr;\r\nimport org.w3c.dom.Document;\r\nimport org.w3c.dom.Element;\r\nimport org.w3c.dom.Node;\r\nimport org.w3c.dom.Text;\r\nimport org.xml.sax.InputSource;\r\nimport java.io.StringReader;\r\n\r\npublic class Test {\r\n    public static void main(String args[]) throws Exception {\r\n        String xmlIn = &quot;&lt;html&gt;\\n&lt;div&gt;Hello World!&lt;/div&gt;\\n&lt;/html&gt;&quot;;\r\n        DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\r\n        Document doc = documentBuilder.parse(new InputSource(new StringReader(xmlIn)));\r\n        TransformerFactory transfac = TransformerFactory.newInstance();\r\n        Transformer domTransformer = transfac.newTransformer();\r\n\r\n        domTransformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n        domTransformer.setOutputProperty(OutputKeys.INDENT, &quot;no&quot;);\r\n\r\n        StreamResult result = new StreamResult(System.out);\r\n        DOMSource source = new DOMSource(doc);\r\n\r\n        domTransformer.transform(source, result);\r\n    }\r\n}\r\n```\r\n\r\nThe expectation is to see this:\r\n\r\n```xml\r\n&lt;html&gt;\r\n&lt;div&gt;Hello World!&lt;/div&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nBut, Java 8 is printing:\r\n\r\n```xml\r\n&lt;html&gt;\r\n\r\n&lt;div&gt;Hello World!&lt;/div&gt;\r\n\r\n&lt;/html&gt;\r\n```\r\n\r\nJava 11 is printing:\r\n\r\n```xml\r\n&lt;html&gt;\r\n    \r\n    &lt;div&gt;Hello World!&lt;/div&gt;\r\n    \r\n&lt;/html&gt;\r\n```\r\n\r\nAs you can see, they are both adding an extra new line. Java 11 has also added indentation.\r\n\r\nHow can I prevent adding extra new lines and indentations?","title":"How to disable newline and indenting in DOM Transformer?","body":"<p>I am parsing an XML document and serializing it back. I want to preserve the original indentation and newlines as much as possible. I do not wish to pretty print the DOM.</p>\n<p>Consider the code below where the original document has a single new line before and after the <code>&lt;div&gt;</code> tag and no indentation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.transform.OutputKeys;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.dom.DOMSource;\nimport javax.xml.transform.stream.StreamResult;\nimport org.w3c.dom.Attr;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.Text;\nimport org.xml.sax.InputSource;\nimport java.io.StringReader;\n\npublic class Test {\n    public static void main(String args[]) throws Exception {\n        String xmlIn = &quot;&lt;html&gt;\\n&lt;div&gt;Hello World!&lt;/div&gt;\\n&lt;/html&gt;&quot;;\n        DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\n        Document doc = documentBuilder.parse(new InputSource(new StringReader(xmlIn)));\n        TransformerFactory transfac = TransformerFactory.newInstance();\n        Transformer domTransformer = transfac.newTransformer();\n\n        domTransformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\n        domTransformer.setOutputProperty(OutputKeys.INDENT, &quot;no&quot;);\n\n        StreamResult result = new StreamResult(System.out);\n        DOMSource source = new DOMSource(doc);\n\n        domTransformer.transform(source, result);\n    }\n}\n</code></pre>\n<p>The expectation is to see this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;html&gt;\n&lt;div&gt;Hello World!&lt;/div&gt;\n&lt;/html&gt;\n</code></pre>\n<p>But, Java 8 is printing:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;html&gt;\n\n&lt;div&gt;Hello World!&lt;/div&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>Java 11 is printing:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;html&gt;\n    \n    &lt;div&gt;Hello World!&lt;/div&gt;\n    \n&lt;/html&gt;\n</code></pre>\n<p>As you can see, they are both adding an extra new line. Java 11 has also added indentation.</p>\n<p>How can I prevent adding extra new lines and indentations?</p>\n"},{"tags":["java","spring-boot","testing","spring-security","spring-cloud-contract"],"answers":[{"tags":[],"owner":{"account_id":16296860,"reputation":579,"user_id":11768882,"display_name":"Arturo Mendes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678433491,"creation_date":1678363967,"answer_id":75684460,"question_id":75661071,"body_markdown":"Okay so after countless hours of going back and forth through the many (and confusing) Spring Docs pages and guides and reading many almost related SO questions and answers here is how I got the application and the tests running.\r\n\r\nThe `BaseTestClass` should look like this:\r\n\r\n```java\r\nimport io.restassured.module.mockmvc.RestAssuredMockMvc;\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport org.junit.jupiter.api.TestInstance;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.security.web.FilterChainProxy;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport org.springframework.web.servlet.MockMvc;\r\nimport org.springframework.web.servlet.setup.MockMvcBuilders;\r\nimport org.springframework.web.context.WebApplicationContext;\r\n\r\nimport static org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers.springSecurity\r\n\r\n@SpringBootTest\r\n@ActiveProfiles(&quot;test&quot;)\r\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\npublic abstract class BaseTestClass {\r\n    private MockMvc mvc;\r\n\r\n    @Autowired\r\n    private WebApplicationContext webApplicationContext;\r\n\r\n    @Autowired\r\n    FilterChainProxy springSecurityFilterChain;\r\n\r\n    @BeforeAll\r\n    public void setup() {\r\n        mvc = MockMvcBuilders.webAppContextSetup(webApplicationContext)\r\n                 .apply(springSecurity(springSecurityFilterChain))\r\n                 .build();\r\n        RestAssuredMockMvc.mockMvc(mvc);\r\n    }\r\n}\r\n```\r\n\r\nThe `ActiveProfiles` annotation is just necessary if you need any application configuration for the tests to run, in my case the connection to an h2 instance.\r\n\r\nThe `TestInstance` annotation is to allow the `BeforeAll` annotated method not to be static in the same fashion as the docs use JUnit4&#39;s `Before`.\r\n\r\nHope it helps somebody else.","title":"Spring Cloud contract tests fail due to NoClassDefFound","body":"<p>Okay so after countless hours of going back and forth through the many (and confusing) Spring Docs pages and guides and reading many almost related SO questions and answers here is how I got the application and the tests running.</p>\n<p>The <code>BaseTestClass</code> should look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.restassured.module.mockmvc.RestAssuredMockMvc;\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.TestInstance;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.security.web.FilterChainProxy;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.web.servlet.MockMvc;\nimport org.springframework.web.servlet.setup.MockMvcBuilders;\nimport org.springframework.web.context.WebApplicationContext;\n\nimport static org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers.springSecurity\n\n@SpringBootTest\n@ActiveProfiles(&quot;test&quot;)\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\npublic abstract class BaseTestClass {\n    private MockMvc mvc;\n\n    @Autowired\n    private WebApplicationContext webApplicationContext;\n\n    @Autowired\n    FilterChainProxy springSecurityFilterChain;\n\n    @BeforeAll\n    public void setup() {\n        mvc = MockMvcBuilders.webAppContextSetup(webApplicationContext)\n                 .apply(springSecurity(springSecurityFilterChain))\n                 .build();\n        RestAssuredMockMvc.mockMvc(mvc);\n    }\n}\n</code></pre>\n<p>The <code>ActiveProfiles</code> annotation is just necessary if you need any application configuration for the tests to run, in my case the connection to an h2 instance.</p>\n<p>The <code>TestInstance</code> annotation is to allow the <code>BeforeAll</code> annotated method not to be static in the same fashion as the docs use JUnit4's <code>Before</code>.</p>\n<p>Hope it helps somebody else.</p>\n"}],"owner":{"account_id":16296860,"reputation":579,"user_id":11768882,"display_name":"Arturo Mendes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75684460,"answer_count":1,"score":1,"last_activity_date":1678433491,"creation_date":1678186528,"question_id":75661071,"body_markdown":"First of all I would like to state that I&#39;m fairly new to Spring Boot and Spring Cloud.\r\n\r\nI have the following project setup:\r\n- **Consumer Driven Contracts are stored in a Git repository** following [this guide][contracts-howto]. Producer has to answer to two consumers accessing two different endpoints, so there is no conflict there.\r\n- **Producer is setup following the same guide to fetch contracts from the remote**.\r\n- Both projects are set up using **Maven**.\r\n\r\nDependencies on the producer side are:\r\n- Spring Boot 3.0.2\r\n- Spring Cloud Contract Verifier 4.0.1\r\n- Spring Cloud Contract Maven Plugin 4.0.1\r\n- Spring Security 6.0.1 and Spring Security Test (unrelated but probably important)\r\n\r\nWhen using the routines `spring-cloud-contract:generateTests` everything runs fine and tests are generated in the proper directory, then when running the lifecycle routine `test` and those generated contract tests are run they produce the following error:\r\n\r\n```java\r\nNoClassDefFoundError: javax/servlet/Filter\r\n\r\n                at com.projectId.artifactId.contracts.ConsumerTest.validate_shouldReturnApplicationRoles(ConsumerTest.java:113)\r\n```\r\n\r\n`projectId`, `artifactId`, `ConsumerTest` are placeholders for the real package, artifact name and consumer name respectively. Sample of the method where it fails (all generated tests fail and give the same error, line 113 in this case refers to the point of `get(&quot;/auth/v1/role&quot;)`):\r\n\r\n```java\r\npublic class ConsumerTest extends BaseTestClass {\r\n    @Test\r\n    public void validate_shouldReturnApplicationRoles() throws Exception {\r\n       // given:\r\n          MockMvcRequestSpecification request = given();\r\n    \r\n    \r\n       // when:\r\n          ResponseOptions response = given().spec(request)\r\n                .get(&quot;/auth/v1/role&quot;);\r\n    \r\n       // then:\r\n          assertThat(response.statusCode()).isEqualTo(200);\r\n          assertThat(response.header(&quot;Content-Type&quot;)).matches(&quot;application/json.*&quot;);\r\n          assertThat(response.header(&quot;Access-Control-Allow-Origin&quot;)).isEqualTo(&quot;*&quot;);\r\n    \r\n       // and:\r\n          DocumentContext parsedJson = JsonPath.parse(response.getBody().asString());\r\n          assertThatJson(parsedJson).array().contains(&quot;[&#39;id&#39;]&quot;).isEqualTo(1);\r\n          assertThatJson(parsedJson).array().contains(&quot;[&#39;name&#39;]&quot;).isEqualTo(&quot;Acotado&quot;);\r\n          assertThatJson(parsedJson).array().contains(&quot;[&#39;description&#39;]&quot;).isEqualTo(&quot;Acceso acotado en un espacio temporal desde que se crea la clave&quot;);\r\n          assertThatJson(parsedJson).array().contains(&quot;[&#39;id&#39;]&quot;).isEqualTo(2);\r\n          assertThatJson(parsedJson).array().contains(&quot;[&#39;name&#39;]&quot;).isEqualTo(&quot;Ilimitado&quot;);\r\n          assertThatJson(parsedJson).array().contains(&quot;[&#39;description&#39;]&quot;).isEqualTo(&quot;Acceso ilimitado&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.mock.mockito.MockBean;\r\nimport org.springframework.test.context.ActiveProfiles;\r\n\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic abstract class BaseTestClass {\r\n    @Autowired\r\n    AuthorizationController authorizationController;\r\n\r\n    @Autowired\r\n    IdentityController identityController;\r\n\r\n    @MockBean\r\n    AuthorizationService authorizationService;\r\n\r\n    @MockBean\r\n    IdentityService identityService;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        RestAssuredMockMvc.standaloneSetup(authorizationController, identityController);\r\n    }\r\n}\r\n```\r\n\r\nThe test profile just configures a context path and a h2 instance for the integration tests of the application.\r\n\r\n[contracts-howto]: https://cloud.spring.io/spring-cloud-contract/reference/html/howto.html#how-to-use-git-as-storage\r\n\r\nI have tried different BaseClasses for tests and expected the tests to pass or at least to fail in a meaningful way. What is failing here? I have a suspicion that Spring Security has something to do with that error...\r\n\r\nUpdate\r\n---\r\n\r\nOn an empty project with only Spring Boot and Spring Cloud Contract as dependencies the test do run and sure do fail **but as expected in a meaningful way** (comparing responses expected against obtained). `BaseClass` does differ a little bit since on this trial scenario there is only a mock controller.\r\n\r\nUpdate 2\r\n---\r\n\r\nI&#39;ve added Spring Security to the aforementioned mock project and that has been enough to make it fail to compile. I have tried with two `BaseTestClass` definitions, one following [Spring Cloud Contract&#39;s guidelines][cloud-guidelines] (which is the one that worked previously) and another following [Spring Security&#39;s guides][security-guidelines] on `MockMvc`, both below by mention order:\r\n\r\n```java\r\nclass BaseTestClass {\r\n    @BeforeAll\r\n    public static void setup() {\r\n        RestAssuredMockMvc.standaloneSetup(new TrialController);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\nclass BaseTestClass{\r\n    MockMvc mockMvc;\r\n\r\n    @BeforeEach\r\n    void setup() {\r\n        this.mockMvc = MockMvcBuilders.standaloneSetup(new TrialController()).build();\r\n    }\r\n}\r\n```\r\n\r\nNeither manages to run the application nor the test producing either `IllegalState` errors or `spring test delegate cannot be null`.\r\n\r\n[cloud-guidelines]: https://docs.spring.io/spring-cloud-contract/docs/current/reference/html/getting-started.html\r\n\r\n[security-guidelines]: https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#spring-mvc-test-framework","title":"Spring Cloud contract tests fail due to NoClassDefFound","body":"<p>First of all I would like to state that I'm fairly new to Spring Boot and Spring Cloud.</p>\n<p>I have the following project setup:</p>\n<ul>\n<li><strong>Consumer Driven Contracts are stored in a Git repository</strong> following <a href=\"https://cloud.spring.io/spring-cloud-contract/reference/html/howto.html#how-to-use-git-as-storage\" rel=\"nofollow noreferrer\">this guide</a>. Producer has to answer to two consumers accessing two different endpoints, so there is no conflict there.</li>\n<li><strong>Producer is setup following the same guide to fetch contracts from the remote</strong>.</li>\n<li>Both projects are set up using <strong>Maven</strong>.</li>\n</ul>\n<p>Dependencies on the producer side are:</p>\n<ul>\n<li>Spring Boot 3.0.2</li>\n<li>Spring Cloud Contract Verifier 4.0.1</li>\n<li>Spring Cloud Contract Maven Plugin 4.0.1</li>\n<li>Spring Security 6.0.1 and Spring Security Test (unrelated but probably important)</li>\n</ul>\n<p>When using the routines <code>spring-cloud-contract:generateTests</code> everything runs fine and tests are generated in the proper directory, then when running the lifecycle routine <code>test</code> and those generated contract tests are run they produce the following error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>NoClassDefFoundError: javax/servlet/Filter\n\n                at com.projectId.artifactId.contracts.ConsumerTest.validate_shouldReturnApplicationRoles(ConsumerTest.java:113)\n</code></pre>\n<p><code>projectId</code>, <code>artifactId</code>, <code>ConsumerTest</code> are placeholders for the real package, artifact name and consumer name respectively. Sample of the method where it fails (all generated tests fail and give the same error, line 113 in this case refers to the point of <code>get(&quot;/auth/v1/role&quot;)</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ConsumerTest extends BaseTestClass {\n    @Test\n    public void validate_shouldReturnApplicationRoles() throws Exception {\n       // given:\n          MockMvcRequestSpecification request = given();\n    \n    \n       // when:\n          ResponseOptions response = given().spec(request)\n                .get(&quot;/auth/v1/role&quot;);\n    \n       // then:\n          assertThat(response.statusCode()).isEqualTo(200);\n          assertThat(response.header(&quot;Content-Type&quot;)).matches(&quot;application/json.*&quot;);\n          assertThat(response.header(&quot;Access-Control-Allow-Origin&quot;)).isEqualTo(&quot;*&quot;);\n    \n       // and:\n          DocumentContext parsedJson = JsonPath.parse(response.getBody().asString());\n          assertThatJson(parsedJson).array().contains(&quot;['id']&quot;).isEqualTo(1);\n          assertThatJson(parsedJson).array().contains(&quot;['name']&quot;).isEqualTo(&quot;Acotado&quot;);\n          assertThatJson(parsedJson).array().contains(&quot;['description']&quot;).isEqualTo(&quot;Acceso acotado en un espacio temporal desde que se crea la clave&quot;);\n          assertThatJson(parsedJson).array().contains(&quot;['id']&quot;).isEqualTo(2);\n          assertThatJson(parsedJson).array().contains(&quot;['name']&quot;).isEqualTo(&quot;Ilimitado&quot;);\n          assertThatJson(parsedJson).array().contains(&quot;['description']&quot;).isEqualTo(&quot;Acceso ilimitado&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.BeforeEach;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.test.context.ActiveProfiles;\n\n@ActiveProfiles(&quot;test&quot;)\npublic abstract class BaseTestClass {\n    @Autowired\n    AuthorizationController authorizationController;\n\n    @Autowired\n    IdentityController identityController;\n\n    @MockBean\n    AuthorizationService authorizationService;\n\n    @MockBean\n    IdentityService identityService;\n\n    @BeforeEach\n    public void setup() {\n        RestAssuredMockMvc.standaloneSetup(authorizationController, identityController);\n    }\n}\n</code></pre>\n<p>The test profile just configures a context path and a h2 instance for the integration tests of the application.</p>\n<p>I have tried different BaseClasses for tests and expected the tests to pass or at least to fail in a meaningful way. What is failing here? I have a suspicion that Spring Security has something to do with that error...</p>\n<h2>Update</h2>\n<p>On an empty project with only Spring Boot and Spring Cloud Contract as dependencies the test do run and sure do fail <strong>but as expected in a meaningful way</strong> (comparing responses expected against obtained). <code>BaseClass</code> does differ a little bit since on this trial scenario there is only a mock controller.</p>\n<h2>Update 2</h2>\n<p>I've added Spring Security to the aforementioned mock project and that has been enough to make it fail to compile. I have tried with two <code>BaseTestClass</code> definitions, one following <a href=\"https://docs.spring.io/spring-cloud-contract/docs/current/reference/html/getting-started.html\" rel=\"nofollow noreferrer\">Spring Cloud Contract's guidelines</a> (which is the one that worked previously) and another following <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#spring-mvc-test-framework\" rel=\"nofollow noreferrer\">Spring Security's guides</a> on <code>MockMvc</code>, both below by mention order:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class BaseTestClass {\n    @BeforeAll\n    public static void setup() {\n        RestAssuredMockMvc.standaloneSetup(new TrialController);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class BaseTestClass{\n    MockMvc mockMvc;\n\n    @BeforeEach\n    void setup() {\n        this.mockMvc = MockMvcBuilders.standaloneSetup(new TrialController()).build();\n    }\n}\n</code></pre>\n<p>Neither manages to run the application nor the test producing either <code>IllegalState</code> errors or <code>spring test delegate cannot be null</code>.</p>\n"},{"tags":["java","spring-boot","gradle","jacoco","jacoco-maven-plugin"],"owner":{"account_id":14421746,"reputation":511,"user_id":10417592,"display_name":"Wei"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":717,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678433464,"creation_date":1678377535,"question_id":75687088,"body_markdown":"My project is divided into multiple modules according to functions. \r\n```\r\n- rain\r\n  - rain-common\r\n  - rain-service\r\n  - rain-application\r\n```\r\nrain-application Depends on rain-common and rain-service, is a spring-boot project, which is packaged into Fat Jar using bootJar.\r\n\r\nI configured `jacoco-report-aggregation` according to the gradle tutorial [Aggregating code coverage with JaCoCo](https://docs.gradle.org/current/samples/sample_jvm_multi_project_with_code_coverage_distribution.html), but only the coverage of rain-common and rain-service is reported, the coverage of rain-application was not reported.\r\n- rain-application/build.gradle\r\n```js\r\napply plugin: &#39;groovy&#39;\r\napply plugin: &#39;jacoco-report-aggregation&#39;\r\n\r\ndependencies {\r\n    implementation project(&#39;:rain-service&#39;)\r\n    implementation project(&#39;:rain-common&#39;)\r\n    testImplementation &#39;org.spockframework:spock-spring:2.4-M1-groovy-4.0&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n}\r\ntestCodeCoverageReport{\r\n    reports {\r\n        xml.enabled false\r\n        html.enabled true\r\n    }\r\n}\r\ncheck.dependsOn testCodeCoverageReport\r\ntest {\r\n    ignoreFailures = true\r\n    finalizedBy testCodeCoverageReport // report is always generated after tests run\r\n    useJUnitPlatform()\r\n    testLogging {\r\n        events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;\r\n    }\r\n}\r\n```\r\n\r\nIf I use the jacoco plugin, only rain-application&#39;s coverage is reported.\r\n\r\nHow to make jacoco-report-aggregation also report the coverage of the current module rain-application?\r\n\r\n(Not every module runs a single test separately. My test code is all in the rain-application, which requires Servlet-Context)\r\n\r\nOr for this kind of multi-module project to be packaged into Fat Jar, how should I configure gradle to get a global coverage report. Are there any best practices you can recommend?\r\n\r\nThanks!!!","title":"How does jacoco-report-aggregation generate the current project coverage report in gradle","body":"<p>My project is divided into multiple modules according to functions.</p>\n<pre><code>- rain\n  - rain-common\n  - rain-service\n  - rain-application\n</code></pre>\n<p>rain-application Depends on rain-common and rain-service, is a spring-boot project, which is packaged into Fat Jar using bootJar.</p>\n<p>I configured <code>jacoco-report-aggregation</code> according to the gradle tutorial <a href=\"https://docs.gradle.org/current/samples/sample_jvm_multi_project_with_code_coverage_distribution.html\" rel=\"nofollow noreferrer\">Aggregating code coverage with JaCoCo</a>, but only the coverage of rain-common and rain-service is reported, the coverage of rain-application was not reported.</p>\n<ul>\n<li>rain-application/build.gradle</li>\n</ul>\n<pre class=\"lang-js prettyprint-override\"><code>apply plugin: 'groovy'\napply plugin: 'jacoco-report-aggregation'\n\ndependencies {\n    implementation project(':rain-service')\n    implementation project(':rain-common')\n    testImplementation 'org.spockframework:spock-spring:2.4-M1-groovy-4.0'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\ntestCodeCoverageReport{\n    reports {\n        xml.enabled false\n        html.enabled true\n    }\n}\ncheck.dependsOn testCodeCoverageReport\ntest {\n    ignoreFailures = true\n    finalizedBy testCodeCoverageReport // report is always generated after tests run\n    useJUnitPlatform()\n    testLogging {\n        events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;\n    }\n}\n</code></pre>\n<p>If I use the jacoco plugin, only rain-application's coverage is reported.</p>\n<p>How to make jacoco-report-aggregation also report the coverage of the current module rain-application?</p>\n<p>(Not every module runs a single test separately. My test code is all in the rain-application, which requires Servlet-Context)</p>\n<p>Or for this kind of multi-module project to be packaged into Fat Jar, how should I configure gradle to get a global coverage report. Are there any best practices you can recommend?</p>\n<p>Thanks!!!</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","sharedpreferences"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1678303468,"post_id":75677291,"comment_id":133508340,"body_markdown":"That for loop over `getChildren()` in your first code block looks like it isn&#39;t doing anything. Which in itself is good, as you don&#39;t need to loop over `getChildren()` here as you&#39;re loading one specific snapshot already.","body":"That for loop over <code>getChildren()</code> in your first code block looks like it isn&#39;t doing anything. Which in itself is good, as you don&#39;t need to loop over <code>getChildren()</code> here as you&#39;re loading one specific snapshot already."},{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678345686,"post_id":75677291,"comment_id":133515063,"body_markdown":"@FrankvanPuffelen, i removed for loop, but nothing happened. What i need to do?","body":"@FrankvanPuffelen, i removed for loop, but nothing happened. What i need to do?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678345837,"post_id":75677291,"comment_id":133515093,"body_markdown":"Please edit your question and add your database structure as a JSON file to have a better view. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your [Firebase Console](https://console.firebase.google.com/u/0/project/_/database/data).","body":"Please edit your question and add your database structure as a JSON file to have a better view. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your <a href=\"https://console.firebase.google.com/u/0/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Console</a>."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678345888,"post_id":75677291,"comment_id":133515104,"body_markdown":"Besides that, show us the code that was changed according to Frank&#39;s suggestion.","body":"Besides that, show us the code that was changed according to Frank&#39;s suggestion."},{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678346084,"post_id":75677291,"comment_id":133515157,"body_markdown":"@AlexMamo, i added database structure and i just removed for-each loop","body":"@AlexMamo, i added database structure and i just removed for-each loop"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678346335,"post_id":75677291,"comment_id":133515225,"body_markdown":"The structure in my opinion is incomplete, that&#39;s why I asked you to add it again.","body":"The structure in my opinion is incomplete, that&#39;s why I asked you to add it again."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678346672,"post_id":75677291,"comment_id":133515324,"body_markdown":"So that&#39;s it. you only have a single child inside your entire database, right? And you want to read the value of `battles` and `email`, correct?","body":"So that&#39;s it. you only have a single child inside your entire database, right? And you want to read the value of <code>battles</code> and <code>email</code>, correct?"},{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678346827,"post_id":75677291,"comment_id":133515363,"body_markdown":"@AlexMamo, it is like an example. I have more then 500 variables which i need to read, by the way, i have string and int variables, so yes, i need to read it","body":"@AlexMamo, it is like an example. I have more then 500 variables which i need to read, by the way, i have string and int variables, so yes, i need to read it"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678347222,"post_id":75677291,"comment_id":133515444,"body_markdown":"I&#39;m having a hard time understanding what you need. If you say you have multiple children, please show us a complete structure. Do you need to query all children or only one, the one your answer?","body":"I&#39;m having a hard time understanding what you need. If you say you have multiple children, please show us a complete structure. Do you need to query all children or only one, the one your answer?"},{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678347349,"post_id":75677291,"comment_id":133515470,"body_markdown":"@AlexMamo, i have only one child, i added photo","body":"@AlexMamo, i have only one child, i added photo"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678347456,"post_id":75677291,"comment_id":133515499,"body_markdown":"Ok, I see now. I&#39;ll write you an answer right away.","body":"Ok, I see now. I&#39;ll write you an answer right away."}],"answers":[{"comments":[{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678367226,"post_id":75681693,"comment_id":133520950,"body_markdown":"i tryed, but nothing happaned. I added `db.child(email).get().` and nothing happened. also i tryed to make this: `db.child(&quot;mail@mailcom&quot;).get().` \nAlso i tryed to read without child group, nothing happened.\nBy the way LogCat is empty","body":"i tryed, but nothing happaned. I added <code>db.child(email).get().</code> and nothing happened. also i tryed to make this: <code>db.child(&quot;mail@mailcom&quot;).get().</code>  Also i tryed to read without child group, nothing happened. By the way LogCat is empty"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678375783,"post_id":75681693,"comment_id":133523819,"body_markdown":"None of those attempts will work. Please use the solution in my answer, not any other code. So give it a try and tel me if it works.","body":"None of those attempts will work. Please use the solution in my answer, not any other code. So give it a try and tel me if it works."},{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678386245,"post_id":75681693,"comment_id":133527028,"body_markdown":"It did&#39;t work I edted qustion and added more data and code, that we didn&#39;t go around to about","body":"It did&#39;t work I edted qustion and added more data and code, that we didn&#39;t go around to about"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678433015,"post_id":75681693,"comment_id":133534749,"body_markdown":"I have added a call to `.child(&quot;mail@gmailcom&quot;)`. See my updated answer. Does it work now?","body":"I have added a call to <code>.child(&quot;mail@gmailcom&quot;)</code>. See my updated answer. Does it work now?"},{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678436866,"post_id":75681693,"comment_id":133535579,"body_markdown":"In Profiler menu i checked that when i pressed button with load data from db it just ignored pressing because speed of network stay being on zero, but when i send data to db it have 12mb/sec.\nin database inspectot i saw this error `Database Inspector: Error reading Sqlite database: Database &#39;LiveSqliteDatabaseId(path=/data/data/com.ccs.example/databases/google_app_measurement_local.db, name=google_app_measurement_local.db, connectionId=1) not found`\nis this error which i need to fix?","body":"In Profiler menu i checked that when i pressed button with load data from db it just ignored pressing because speed of network stay being on zero, but when i send data to db it have 12mb/sec. in database inspectot i saw this error <code>Database Inspector: Error reading Sqlite database: Database &#39;LiveSqliteDatabaseId(path=&#47;data&#47;data&#47;com.ccs.example&#47;databa&zwnj;&#8203;ses&#47;google_app_measu&zwnj;&#8203;rement_local.db, name=google_app_measurement_local.db, connectionId=1) not found</code> is this error which i need to fix?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678437856,"post_id":75681693,"comment_id":133535828,"body_markdown":"Did you try the code in my updated answer?","body":"Did you try the code in my updated answer?"},{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678439170,"post_id":75681693,"comment_id":133536209,"body_markdown":"Yes, i tryed, but it ignored","body":"Yes, i tryed, but it ignored"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678439744,"post_id":75681693,"comment_id":133536371,"body_markdown":"&quot;it ignored&quot; doesn&#39;t provide enough information so I can further help. What exactly doesn&#39;t work? Do you have any errors?","body":"&quot;it ignored&quot; doesn&#39;t provide enough information so I can further help. What exactly doesn&#39;t work? Do you have any errors?"},{"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"score":0,"creation_date":1678440278,"post_id":75681693,"comment_id":133536527,"body_markdown":"well... When i press the button, profiler show me that i touched this button, but speed of network stayed zero so in my opinion that something trouble in button, because it did&#39;t connected to db?","body":"well... When i press the button, profiler show me that i touched this button, but speed of network stayed zero so in my opinion that something trouble in button, because it did&#39;t connected to db?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1678440525,"post_id":75681693,"comment_id":133536601,"body_markdown":"You should debug yourself and see why is that happening. If you solve the issue using my solution, please let me know.","body":"You should debug yourself and see why is that happening. If you solve the issue using my solution, please let me know."}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":10,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678432995,"creation_date":1678347889,"answer_id":75681693,"question_id":75677291,"body_markdown":"If you only want to read the values of `battles` and `email`, first of all, there is no need to attach a persistent listener. You can only call [get()][1] and read the values. Besides that, since there is a single child in your database, there is no need to iterate over the DataSnapshot object. So in code, it will be as simple as:\r\n\r\n\tDatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n    db.child(&quot;mail@gmailcom&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n\t\t\tif (task.isSuccessful()) {\r\n\t\t\t\tDataSnapshot snapshot = task.getResult();\r\n                long battles = snapshot.child(&quot;battles&quot;).getValue(Long.class);\r\n                String email = snapshot.child(&quot;email&quot;).getValue(String.class);\r\n\t\t\t\tLog.d(&quot;TAG&quot;, battles + &quot;/&quot; + email);\r\n\t\t\t} else {\r\n\t\t\t\tLog.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nThe result in the logcat will be:\r\n\r\n    5000/mail@gmailcom\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query#get()","title":"How to save data from firebase database?","body":"<p>If you only want to read the values of <code>battles</code> and <code>email</code>, first of all, there is no need to attach a persistent listener. You can only call <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query#get()\" rel=\"nofollow noreferrer\">get()</a> and read the values. Besides that, since there is a single child in your database, there is no need to iterate over the DataSnapshot object. So in code, it will be as simple as:</p>\n<pre><code>DatabaseReference db = FirebaseDatabase.getInstance().getReference();\ndb.child(&quot;mail@gmailcom&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            DataSnapshot snapshot = task.getResult();\n            long battles = snapshot.child(&quot;battles&quot;).getValue(Long.class);\n            String email = snapshot.child(&quot;email&quot;).getValue(String.class);\n            Log.d(&quot;TAG&quot;, battles + &quot;/&quot; + email);\n        } else {\n            Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\n        }\n    }\n});\n</code></pre>\n<p>The result in the logcat will be:</p>\n<pre><code>5000/mail@gmailcom\n</code></pre>\n"}],"owner":{"account_id":27166721,"reputation":27,"user_id":21260391,"display_name":"Person"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75681693,"answer_count":1,"score":0,"last_activity_date":1678432995,"creation_date":1678302900,"question_id":75677291,"body_markdown":"I&#39;m trying to get data to the app from Firebase Realtime Database.\r\nHow is a button which loads data from db looks like:\r\n\r\n```java\r\nload.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View view) {\r\n\r\n                            database.child(emailString).get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n                                @Override\r\n                                public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n                                    if(task.isSuccessful()) {\r\n                                        DataSnapshot snapshot = task.getResult();\r\n\r\n                                        Russian_Reno = snapshot.child(&quot;russian_reno&quot;).getValue(Integer.class);\r\n                                        T_18_1927 = snapshot.child(&quot;T_18_1927&quot;).getValue(Integer.class);\r\n\r\n                                        PreferenceConfig.RussianReno(getApplicationContext(), Russian_Reno);\r\n\r\n                                        PreferenceConfig.T_18_1927(getApplicationContext(), T_18_1927);\r\n\r\n                                        PreferenceConfig.T_18_1929(getApplicationContext(), T_18_1929);\r\n\r\n                                        PreferenceConfig.T_18_1930(getApplicationContext(), T_18_1930);\r\n\r\n                                        PreferenceConfig.T_18M(getApplicationContext(), T_18M);\r\n\r\n                                        PreferenceConfig.T_20(getApplicationContext(), T_20);\r\n\r\n                                        PreferenceConfig.T_26_1931(getApplicationContext(), T_26_1931);\r\n\r\n                                        PreferenceConfig.T_26_1932(getApplicationContext(), T_26_1932);\r\n\r\n                                        PreferenceConfig.T_26_1933(getApplicationContext(), T_26_1933);\r\n\r\n                                        PreferenceConfig.T_26_1936(getApplicationContext(), T_26_1936);\r\n\r\n                                        PreferenceConfig.T_26_1938(getApplicationContext(), T_26_1938);\r\n\r\n                                        PreferenceConfig.T_26_1939(getApplicationContext(), T_26_1939);\r\n\r\n                                        PreferenceConfig.T_26PT(getApplicationContext(), T_26PT);\r\n\r\n                                        PreferenceConfig.TY_26_TT_26(getApplicationContext(), TY_26_TT_26);\r\n\r\n                                        PreferenceConfig.TY_132_TT_131(getApplicationContext(), TY_132_TT_131);\r\n\r\n                                        PreferenceConfig.T_26A(getApplicationContext(), T_26A);\r\n\r\n                                        PreferenceConfig.XT_26(getApplicationContext(), xT_26);\r\n\r\n                                        PreferenceConfig.XT_130(getApplicationContext(), xT_130);\r\n\r\n                                        PreferenceConfig.XT_133(getApplicationContext(), xT_133);\r\n\r\n                                        PreferenceConfig.XT_134(getApplicationContext(), xT_134);\r\n\r\n                                        PreferenceConfig.CT_26(getApplicationContext(), ct_26);\r\n\r\n                                        PreferenceConfig.T_26_T(getApplicationContext(), T_26_T);\r\n\r\n                                        PreferenceConfig.BT_1(getApplicationContext(), bt_1);\r\n\r\n                                        PreferenceConfig.M1930(getApplicationContext(), m1930);\r\n\r\n                                        \r\n                                    }\r\n                                    else{\r\n                                        Log.d(&quot;Firebase&quot;, task.getException().getMessage()); //Never ignore potential errors!\r\n\r\n                                    }\r\n\r\n                                }\r\n                            });\r\n\r\n                                                                           }\r\n\r\n\r\n                        });}}});\r\n```\r\nHow we can see, i have child email and in this child i have data: email.\r\nHere is JSON file from db:\r\n```json\r\n{\r\n  &quot;mail@gmailcom&quot;: {\r\n    &quot;battles&quot;: 5000,\r\n    &quot;broneboynie&quot;: 7000,\r\n    &quot;bt_1&quot;: 500,\r\n    &quot;bt_2&quot;: 0,\r\n    &quot;bt_2_H&quot;: 0,\r\n    &quot;bt_2_IS&quot;: 0,\r\n    &quot;bt_2_P&quot;: 0,\r\n    &quot;bt_2_PP&quot;: 0,\r\n    &quot;bt_2_PY&quot;: 0,\r\n    &quot;bt_2_PY_B_SH_u&quot;: 0,\r\n    &quot;bt_2_S&quot;: 0,\r\n    &quot;bt_3&quot;: 0,\r\n    &quot;bt_4&quot;: 0,\r\n    &quot;bt_5&quot;: 0,\r\n    &quot;bt_5_A&quot;: 0,\r\n    &quot;bt_5_B_2&quot;: 0,\r\n    &quot;bt_5_IS&quot;: 0,\r\n    &quot;bt_5_PT&quot;: 0,\r\n    &quot;bt_5_Px&quot;: 0,\r\n    &quot;bt_6&quot;: 0,\r\n    &quot;bt_7&quot;: 0,\r\n    \r\n  },\r\n  &quot;mail1212@gmailcom&quot;: {\r\n    &quot;battles&quot;: 5000,\r\n    &quot;broneboynie&quot;: 7000,\r\n    &quot;bt_1&quot;: 500,\r\n    &quot;bt_2&quot;: 0,\r\n    &quot;bt_2_H&quot;: 0,\r\n    &quot;bt_2_IS&quot;: 900,\r\n    &quot;bt_2_P&quot;: 0,\r\n    &quot;bt_2_PP&quot;: 0,\r\n    &quot;bt_2_PY&quot;: 0,\r\n    &quot;bt_2_PY_B_SH_u&quot;: 0,\r\n    &quot;bt_2_S&quot;: 0,\r\n    &quot;bt_3&quot;: 0,\r\n    &quot;bt_4&quot;: 0,\r\n    &quot;bt_5&quot;: 0,\r\n    &quot;bt_5_A&quot;: 0,\r\n    &quot;bt_5_B_2&quot;: 0,\r\n    &quot;bt_5_IS&quot;: 0,\r\n    &quot;bt_5_PT&quot;: 0,\r\n    &quot;bt_5_Px&quot;: 0,\r\n    &quot;bt_6&quot;: 0,\r\n    &quot;bt_7&quot;: 0,\r\n\r\n}\r\n```\r\nI have same names of variables which in `user` class and in this class:\r\n```java\r\n//this class\r\nprivate int battles;\r\nprivate String email;\r\n```\r\nUser class, it in another package\r\n```java\r\n//User class\r\npackage anoterPagkage;\r\npublic class User {\r\nprivate int battles;\r\nprivate String email;\r\npublic String getemail() {\r\n        return email;\r\n    }\r\n\r\n    public void setemail(String email) {\r\n        this.email = email;\r\n    }\r\npublic int getBattles() {\r\n        return battles;\r\n    }\r\n\r\n    public void setBattles(int battles) {\r\n        this.battles = battles;\r\n    }\r\n```\r\nHere is PreferenceConfig class, which save data. (you can see this class in code, where i trying save data to this class)\r\n```java\r\npublic class PreferenceConfig {\r\n    private static final String MY_PREFERENCE_NAME = &quot;com.ccs.example&quot;;\r\n    public static final String BATTLES = &quot;battles&quot;;\r\n    public static final String EMAIL = &quot;email&quot;;\r\n\r\npublic static void registerPref(Context context, SharedPreferences.OnSharedPreferenceChangeListener listener) {\r\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\r\n        pref.registerOnSharedPreferenceChangeListener(listener);\r\n    }\r\n\r\n    public static void unregisterPref(Context context, SharedPreferences.OnSharedPreferenceChangeListener listener) {\r\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\r\n        pref.unregisterOnSharedPreferenceChangeListener(listener);\r\n    }\r\n\r\n public static void email(Context context, String count) {\r\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor = pref.edit();\r\n        editor.putString(EMAIL, count);\r\n        editor.apply();\r\n    }\r\n\r\n    public static String emailString(Context context) {\r\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\r\n        return pref.getString(EMAIL,&quot;&quot;);\r\n    }\r\n\r\npublic static void battles(Context context, int count) {\r\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor = pref.edit();\r\n        editor.putInt(BATTLES, count);\r\n        editor.apply();\r\n    }\r\n\r\n    public static int battlesInt(Context context) {\r\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\r\n        return pref.getInt(BATTLES, 0);\r\n    }\r\n}\r\n```\r\nhere photo of db:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oJTKQ.png\r\nHow looks button which save data to db:\r\n```\r\nUser user = new User();\r\n\r\n        save.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String a = emailString.replace(&quot;.&quot;, &quot;&quot;);\r\n                if(database.child(a)==null) {\r\n                    user.setrussian_reno(Russian_Reno);\r\n                    user.setT_18_1927(T_18_1927);\r\n                    user.setT_18_1929(T_18_1929);\r\n                    user.setT_18_1930(T_18_1930);\r\n                    user.setT_18m(T_18M);\r\n                    user.setT_20(T_20);\r\n                    user.setT_26_1931(T_26_1931);\r\n                    user.setT_26_1932(T_26_1932);\r\n                    user.setT_26_1933(T_26_1933);\r\n                    user.setT_26_1936(T_26_1936);\r\n                    user.setT_26_1938(T_26_1938);\r\n                    user.setT_26_1939(T_26_1939);\r\n                    user.setT_26PT(T_26PT);\r\n                    user.setty_26_tt_26(TY_26_TT_26);\r\n                    user.setT_26A(T_26A);\r\n                    user.setxT_26(xT_26);\r\n                    user.setxT_130(xT_130);\r\n                    user.setxT_133(xT_133);\r\n                    user.setxT_134(xT_134);\r\n                    user.setct_26(ct_26);\r\n                    user.setT_26_T(T_26_T);\r\n                    user.setbt_1(bt_1);\r\n                    user.setm1930(m1930);\r\n                    user.setbt_2(bt_2);\r\n                    user.setbt_2_PP(bt_2_PP);\r\n                    user.setbt_2_P(bt_2_P);\r\n                    user.setbt_2_PY(bt_2_PY);\r\n                    user.setbt_2_PY_B_SH_u(bt_2_PY);\r\n                    user.setbt_2_H(bt_2_H);\r\n                    user.setbt_2_S(bt_2_S);\r\n                    user.setbt_2_IS(bt_2_IS);\r\n                    user.setbt_3(bt_3);\r\n                    user.setbt_4(bt_4);\r\n                    user.setbt_5(bt_5);\r\n                    user.setbt_5_A(bt_5_A);\r\n                    user.setbt_5_PT(bt_5_PT);\r\n                    user.setbt_5_IS(bt_5_IS);\r\n                    user.setbt_5_B_2(bt_5_B_2);\r\n                    user.setxbt_5(xbt_5);\r\n                    user.setrbt_5(rbt_5);\r\n                    user.setbt_5_Px(bt_5_PX);\r\n                    database.child(emailString).setValue(user);\r\n                }\r\n```","title":"How to save data from firebase database?","body":"<p>I'm trying to get data to the app from Firebase Realtime Database.\nHow is a button which loads data from db looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>load.setOnClickListener(new View.OnClickListener() {\n                        @Override\n                        public void onClick(View view) {\n\n                            database.child(emailString).get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n                                @Override\n                                public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n                                    if(task.isSuccessful()) {\n                                        DataSnapshot snapshot = task.getResult();\n\n                                        Russian_Reno = snapshot.child(&quot;russian_reno&quot;).getValue(Integer.class);\n                                        T_18_1927 = snapshot.child(&quot;T_18_1927&quot;).getValue(Integer.class);\n\n                                        PreferenceConfig.RussianReno(getApplicationContext(), Russian_Reno);\n\n                                        PreferenceConfig.T_18_1927(getApplicationContext(), T_18_1927);\n\n                                        PreferenceConfig.T_18_1929(getApplicationContext(), T_18_1929);\n\n                                        PreferenceConfig.T_18_1930(getApplicationContext(), T_18_1930);\n\n                                        PreferenceConfig.T_18M(getApplicationContext(), T_18M);\n\n                                        PreferenceConfig.T_20(getApplicationContext(), T_20);\n\n                                        PreferenceConfig.T_26_1931(getApplicationContext(), T_26_1931);\n\n                                        PreferenceConfig.T_26_1932(getApplicationContext(), T_26_1932);\n\n                                        PreferenceConfig.T_26_1933(getApplicationContext(), T_26_1933);\n\n                                        PreferenceConfig.T_26_1936(getApplicationContext(), T_26_1936);\n\n                                        PreferenceConfig.T_26_1938(getApplicationContext(), T_26_1938);\n\n                                        PreferenceConfig.T_26_1939(getApplicationContext(), T_26_1939);\n\n                                        PreferenceConfig.T_26PT(getApplicationContext(), T_26PT);\n\n                                        PreferenceConfig.TY_26_TT_26(getApplicationContext(), TY_26_TT_26);\n\n                                        PreferenceConfig.TY_132_TT_131(getApplicationContext(), TY_132_TT_131);\n\n                                        PreferenceConfig.T_26A(getApplicationContext(), T_26A);\n\n                                        PreferenceConfig.XT_26(getApplicationContext(), xT_26);\n\n                                        PreferenceConfig.XT_130(getApplicationContext(), xT_130);\n\n                                        PreferenceConfig.XT_133(getApplicationContext(), xT_133);\n\n                                        PreferenceConfig.XT_134(getApplicationContext(), xT_134);\n\n                                        PreferenceConfig.CT_26(getApplicationContext(), ct_26);\n\n                                        PreferenceConfig.T_26_T(getApplicationContext(), T_26_T);\n\n                                        PreferenceConfig.BT_1(getApplicationContext(), bt_1);\n\n                                        PreferenceConfig.M1930(getApplicationContext(), m1930);\n\n                                        \n                                    }\n                                    else{\n                                        Log.d(&quot;Firebase&quot;, task.getException().getMessage()); //Never ignore potential errors!\n\n                                    }\n\n                                }\n                            });\n\n                                                                           }\n\n\n                        });}}});\n</code></pre>\n<p>How we can see, i have child email and in this child i have data: email.\nHere is JSON file from db:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;mail@gmailcom&quot;: {\n    &quot;battles&quot;: 5000,\n    &quot;broneboynie&quot;: 7000,\n    &quot;bt_1&quot;: 500,\n    &quot;bt_2&quot;: 0,\n    &quot;bt_2_H&quot;: 0,\n    &quot;bt_2_IS&quot;: 0,\n    &quot;bt_2_P&quot;: 0,\n    &quot;bt_2_PP&quot;: 0,\n    &quot;bt_2_PY&quot;: 0,\n    &quot;bt_2_PY_B_SH_u&quot;: 0,\n    &quot;bt_2_S&quot;: 0,\n    &quot;bt_3&quot;: 0,\n    &quot;bt_4&quot;: 0,\n    &quot;bt_5&quot;: 0,\n    &quot;bt_5_A&quot;: 0,\n    &quot;bt_5_B_2&quot;: 0,\n    &quot;bt_5_IS&quot;: 0,\n    &quot;bt_5_PT&quot;: 0,\n    &quot;bt_5_Px&quot;: 0,\n    &quot;bt_6&quot;: 0,\n    &quot;bt_7&quot;: 0,\n    \n  },\n  &quot;mail1212@gmailcom&quot;: {\n    &quot;battles&quot;: 5000,\n    &quot;broneboynie&quot;: 7000,\n    &quot;bt_1&quot;: 500,\n    &quot;bt_2&quot;: 0,\n    &quot;bt_2_H&quot;: 0,\n    &quot;bt_2_IS&quot;: 900,\n    &quot;bt_2_P&quot;: 0,\n    &quot;bt_2_PP&quot;: 0,\n    &quot;bt_2_PY&quot;: 0,\n    &quot;bt_2_PY_B_SH_u&quot;: 0,\n    &quot;bt_2_S&quot;: 0,\n    &quot;bt_3&quot;: 0,\n    &quot;bt_4&quot;: 0,\n    &quot;bt_5&quot;: 0,\n    &quot;bt_5_A&quot;: 0,\n    &quot;bt_5_B_2&quot;: 0,\n    &quot;bt_5_IS&quot;: 0,\n    &quot;bt_5_PT&quot;: 0,\n    &quot;bt_5_Px&quot;: 0,\n    &quot;bt_6&quot;: 0,\n    &quot;bt_7&quot;: 0,\n\n}\n</code></pre>\n<p>I have same names of variables which in <code>user</code> class and in this class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//this class\nprivate int battles;\nprivate String email;\n</code></pre>\n<p>User class, it in another package</p>\n<pre class=\"lang-java prettyprint-override\"><code>//User class\npackage anoterPagkage;\npublic class User {\nprivate int battles;\nprivate String email;\npublic String getemail() {\n        return email;\n    }\n\n    public void setemail(String email) {\n        this.email = email;\n    }\npublic int getBattles() {\n        return battles;\n    }\n\n    public void setBattles(int battles) {\n        this.battles = battles;\n    }\n</code></pre>\n<p>Here is PreferenceConfig class, which save data. (you can see this class in code, where i trying save data to this class)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PreferenceConfig {\n    private static final String MY_PREFERENCE_NAME = &quot;com.ccs.example&quot;;\n    public static final String BATTLES = &quot;battles&quot;;\n    public static final String EMAIL = &quot;email&quot;;\n\npublic static void registerPref(Context context, SharedPreferences.OnSharedPreferenceChangeListener listener) {\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\n        pref.registerOnSharedPreferenceChangeListener(listener);\n    }\n\n    public static void unregisterPref(Context context, SharedPreferences.OnSharedPreferenceChangeListener listener) {\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\n        pref.unregisterOnSharedPreferenceChangeListener(listener);\n    }\n\n public static void email(Context context, String count) {\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\n        SharedPreferences.Editor editor = pref.edit();\n        editor.putString(EMAIL, count);\n        editor.apply();\n    }\n\n    public static String emailString(Context context) {\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\n        return pref.getString(EMAIL,&quot;&quot;);\n    }\n\npublic static void battles(Context context, int count) {\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\n        SharedPreferences.Editor editor = pref.edit();\n        editor.putInt(BATTLES, count);\n        editor.apply();\n    }\n\n    public static int battlesInt(Context context) {\n        SharedPreferences pref = context.getSharedPreferences(MY_PREFERENCE_NAME, Context.MODE_PRIVATE);\n        return pref.getInt(BATTLES, 0);\n    }\n}\n</code></pre>\n<p>here photo of db:\n<a href=\"https://i.stack.imgur.com/oJTKQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oJTKQ.png\" alt=\"enter image description here\" /></a></p>\n<p>How looks button which save data to db:</p>\n<pre><code>User user = new User();\n\n        save.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String a = emailString.replace(&quot;.&quot;, &quot;&quot;);\n                if(database.child(a)==null) {\n                    user.setrussian_reno(Russian_Reno);\n                    user.setT_18_1927(T_18_1927);\n                    user.setT_18_1929(T_18_1929);\n                    user.setT_18_1930(T_18_1930);\n                    user.setT_18m(T_18M);\n                    user.setT_20(T_20);\n                    user.setT_26_1931(T_26_1931);\n                    user.setT_26_1932(T_26_1932);\n                    user.setT_26_1933(T_26_1933);\n                    user.setT_26_1936(T_26_1936);\n                    user.setT_26_1938(T_26_1938);\n                    user.setT_26_1939(T_26_1939);\n                    user.setT_26PT(T_26PT);\n                    user.setty_26_tt_26(TY_26_TT_26);\n                    user.setT_26A(T_26A);\n                    user.setxT_26(xT_26);\n                    user.setxT_130(xT_130);\n                    user.setxT_133(xT_133);\n                    user.setxT_134(xT_134);\n                    user.setct_26(ct_26);\n                    user.setT_26_T(T_26_T);\n                    user.setbt_1(bt_1);\n                    user.setm1930(m1930);\n                    user.setbt_2(bt_2);\n                    user.setbt_2_PP(bt_2_PP);\n                    user.setbt_2_P(bt_2_P);\n                    user.setbt_2_PY(bt_2_PY);\n                    user.setbt_2_PY_B_SH_u(bt_2_PY);\n                    user.setbt_2_H(bt_2_H);\n                    user.setbt_2_S(bt_2_S);\n                    user.setbt_2_IS(bt_2_IS);\n                    user.setbt_3(bt_3);\n                    user.setbt_4(bt_4);\n                    user.setbt_5(bt_5);\n                    user.setbt_5_A(bt_5_A);\n                    user.setbt_5_PT(bt_5_PT);\n                    user.setbt_5_IS(bt_5_IS);\n                    user.setbt_5_B_2(bt_5_B_2);\n                    user.setxbt_5(xbt_5);\n                    user.setrbt_5(rbt_5);\n                    user.setbt_5_Px(bt_5_PX);\n                    database.child(emailString).setValue(user);\n                }\n</code></pre>\n"},{"tags":["java","android","geofencing"],"owner":{"account_id":21094573,"reputation":11,"user_id":15505823,"display_name":"Annas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678432400,"creation_date":1617261106,"question_id":66899934,"body_markdown":"I want to enable the button when the geofence is entered and disable the button when exiting the geofence. I have tried to get the geofencing exit and entry information using the notification, but it doesn&#39;t disable and enable the button.\r\n\r\n```java\r\n    private void populateGeofenceList() {\r\n        for (Map.Entry&lt;String, LatLng&gt; entry : Constants.BAY_AREA_LANDMARKS.entrySet()) {\r\n\r\n            mGeofenceList.add(new Geofence.Builder()\r\n                    .setRequestId(entry.getKey())\r\n                    .setCircularRegion(\r\n                            entry.getValue().latitude,\r\n                            entry.getValue().longitude,\r\n                            Constants.GEOFENCE_RADIUS_IN_METERS\r\n                    )\r\n                    .setExpirationDuration(Geofence.NEVER_EXPIRE)\r\n                    .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER |\r\n                            Geofence.GEOFENCE_TRANSITION_EXIT)\r\n                    .build());\r\n        }\r\n    }\r\n\r\n    private GeofencingRequest getGeofencingRequest() {\r\n        GeofencingRequest.Builder builder = new GeofencingRequest.Builder();\r\n        builder.setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER);\r\n        builder.addGeofences(mGeofenceList);\r\n        return builder.build();\r\n    } \r\n\r\n    public void addGeofencesButtonHandler(View view) {\r\n        if (!checkPermissions()) {\r\n            requestPermissions();\r\n            return;\r\n        }\r\n        Toast.makeText(this, &quot;Anda sudah Mengabsen&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    @SuppressWarnings(&quot;MissingPermission&quot;)\r\n    private void addGeofences() {\r\n        if (!checkPermissions()) {\r\n            showSnackbar(getString(R.string.insufficient_permissions));\r\n            return;\r\n        }\r\n        mGeofencingClient.addGeofences(getGeofencingRequest(), getGeofencePendingIntent())\r\n                .addOnCompleteListener(this);\r\n    }\r\n\r\n    private void setButtonsEnabledState() {\r\n        GeofencingRequest geo = getGeofencingRequest();\r\n            if (geo.equals(Geofence.GEOFENCE_TRANSITION_ENTER)) {\r\n            mAbsen.setEnabled(true);\r\n            mAbsen.setText(&quot;Absen&quot;);\r\n            frameAbsen.setBackgroundResource(R.drawable.call_button);\r\n        }else {\r\n            mAbsen.setEnabled(false);\r\n            mAbsen.setText(&quot;Tidak&quot;);\r\n            //frameAbsen.setBackgroundResource(R.drawable.disable);\r\n        }\r\n    }\r\n```","title":"How to enable and disable a button when entering and exiting a geofence","body":"<p>I want to enable the button when the geofence is entered and disable the button when exiting the geofence. I have tried to get the geofencing exit and entry information using the notification, but it doesn't disable and enable the button.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void populateGeofenceList() {\n        for (Map.Entry&lt;String, LatLng&gt; entry : Constants.BAY_AREA_LANDMARKS.entrySet()) {\n\n            mGeofenceList.add(new Geofence.Builder()\n                    .setRequestId(entry.getKey())\n                    .setCircularRegion(\n                            entry.getValue().latitude,\n                            entry.getValue().longitude,\n                            Constants.GEOFENCE_RADIUS_IN_METERS\n                    )\n                    .setExpirationDuration(Geofence.NEVER_EXPIRE)\n                    .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER |\n                            Geofence.GEOFENCE_TRANSITION_EXIT)\n                    .build());\n        }\n    }\n\n    private GeofencingRequest getGeofencingRequest() {\n        GeofencingRequest.Builder builder = new GeofencingRequest.Builder();\n        builder.setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER);\n        builder.addGeofences(mGeofenceList);\n        return builder.build();\n    } \n\n    public void addGeofencesButtonHandler(View view) {\n        if (!checkPermissions()) {\n            requestPermissions();\n            return;\n        }\n        Toast.makeText(this, &quot;Anda sudah Mengabsen&quot;, Toast.LENGTH_SHORT).show();\n    }\n\n    @SuppressWarnings(&quot;MissingPermission&quot;)\n    private void addGeofences() {\n        if (!checkPermissions()) {\n            showSnackbar(getString(R.string.insufficient_permissions));\n            return;\n        }\n        mGeofencingClient.addGeofences(getGeofencingRequest(), getGeofencePendingIntent())\n                .addOnCompleteListener(this);\n    }\n\n    private void setButtonsEnabledState() {\n        GeofencingRequest geo = getGeofencingRequest();\n            if (geo.equals(Geofence.GEOFENCE_TRANSITION_ENTER)) {\n            mAbsen.setEnabled(true);\n            mAbsen.setText(&quot;Absen&quot;);\n            frameAbsen.setBackgroundResource(R.drawable.call_button);\n        }else {\n            mAbsen.setEnabled(false);\n            mAbsen.setText(&quot;Tidak&quot;);\n            //frameAbsen.setBackgroundResource(R.drawable.disable);\n        }\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1678449492,"post_id":75692977,"comment_id":133539071,"body_markdown":"Generally, if you&#39;re trying to test how often a static method is called, you shouldn&#39;t be.  It should either be an instance method, or you should be testing that any action taken based on the static method is done correctly.","body":"Generally, if you&#39;re trying to test how often a static method is called, you shouldn&#39;t be.  It should either be an instance method, or you should be testing that any action taken based on the static method is done correctly."}],"answers":[{"tags":[],"owner":{"account_id":3155089,"reputation":170,"user_id":2667662,"display_name":"Stijn Hooft"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678431857,"creation_date":1678431857,"answer_id":75693120,"question_id":75692977,"body_markdown":"Mockito has limited support for mocking static calls. You could use Powermockito in addition.\r\n\r\nWit Powermockito, you can do something like `PowerMockito.verifyStatic(times(1));`\r\n\r\nPlease have a look at https://stackoverflow.com/questions/18466198/how-to-verify-static-void-method-has-been-called-with-power-mockito","title":"How to test that a static method gets called once","body":"<p>Mockito has limited support for mocking static calls. You could use Powermockito in addition.</p>\n<p>Wit Powermockito, you can do something like <code>PowerMockito.verifyStatic(times(1));</code></p>\n<p>Please have a look at <a href=\"https://stackoverflow.com/questions/18466198/how-to-verify-static-void-method-has-been-called-with-power-mockito\">How to verify static void method has been called with power mockito</a></p>\n"}],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678431857,"creation_date":1678430678,"question_id":75692977,"body_markdown":"I want to add a check to my test to ensure that my AvailableOptions.calculateAmount() get&#39;s called once when my CancelOrderService.generateCancelOrder() method is executed.\r\n\r\n```Java\r\n  @Before\r\n  public void setUp() {\r\n    cancelOrderService = mock(cancelOrderService.class);\r\n    orderDetails = mock(OrderDetails.class);\r\n    cancelOrderInput = mock(CancelOrderInput.class);\r\n    messageChanges = mock(MessageChanges.class);\r\n    availableOptions = mock(AvailableOptions.class);\r\n    service =\r\n        new CancelOrderService(cancelOrderService, messageChanges, cancelOrderInput);\r\n    when(orderDetails.getPremiumSummary()).thenReturn(PremiumSummary.builder().build());\r\n    when(cancelOrderService.requestCancelOrder(any(IContext.class)))\r\n        .thenReturn(orderDetails);\r\n  }\r\n\r\n  @Test\r\n  public void service_called() {\r\n    CurrentOrderState currentState = currentOrderState(ORDER_REF);\r\n    TransactionData transactionData = transactionData();\r\n    ContractDetails contractDetails = contractDetails();\r\n    Source source = source();\r\n    service.generateCancelOrder(currentState, source, transactionData, contractDetails);\r\n    verify(cancelOrderService, times(one)).requestCancelOrder(any(IContext.class));\r\n    verifyNoMoreInteractions(cancelOrderService);\r\n\r\n    try (MockedStatic&lt;AvailableOptions&gt; availableOptionsMockedStatic = Mockito.mockStatic(AvailableOptions.class)) {\r\n      availableOptionsMockedStatic.when(() -&gt; AvailableOptions.calculateAmount(AvailableOptions.builder().build()))\r\n              .thenReturn(&quot;&quot;);\r\n      availableOptionsMockedStatic.verify(\r\n        () -&gt; availableOptions.calculateAmount(any(AvailableOptions.class)),\r\n          times(1)\r\n        );\r\n      }\r\n    }\r\n    verifyNoMoreInteractions(cancelOrderService);\r\n  }\r\n```\r\n\r\nAbove is my setup and test. When I run it I get this error:\r\n\r\n&gt;Wanted but not invoked:\r\nAvailableOptions.class.calculateAmount(\r\n    &lt;any ie.avis.orders.web.AvailableOptions&gt;\r\n);\r\n-&gt; at ie.avis.orders.web.AvailableOptions.calculateAmount(AvailableOptions.java:31)\r\nActually, there were zero interactions with this mock.\r\n\r\nI realise that what I&#39;m trying to do is different with a static method but I&#39;m not sure where I&#39;m going wrong. Can anyone please help resolve this issue?","title":"How to test that a static method gets called once","body":"<p>I want to add a check to my test to ensure that my AvailableOptions.calculateAmount() get's called once when my CancelOrderService.generateCancelOrder() method is executed.</p>\n<pre><code>  @Before\n  public void setUp() {\n    cancelOrderService = mock(cancelOrderService.class);\n    orderDetails = mock(OrderDetails.class);\n    cancelOrderInput = mock(CancelOrderInput.class);\n    messageChanges = mock(MessageChanges.class);\n    availableOptions = mock(AvailableOptions.class);\n    service =\n        new CancelOrderService(cancelOrderService, messageChanges, cancelOrderInput);\n    when(orderDetails.getPremiumSummary()).thenReturn(PremiumSummary.builder().build());\n    when(cancelOrderService.requestCancelOrder(any(IContext.class)))\n        .thenReturn(orderDetails);\n  }\n\n  @Test\n  public void service_called() {\n    CurrentOrderState currentState = currentOrderState(ORDER_REF);\n    TransactionData transactionData = transactionData();\n    ContractDetails contractDetails = contractDetails();\n    Source source = source();\n    service.generateCancelOrder(currentState, source, transactionData, contractDetails);\n    verify(cancelOrderService, times(one)).requestCancelOrder(any(IContext.class));\n    verifyNoMoreInteractions(cancelOrderService);\n\n    try (MockedStatic&lt;AvailableOptions&gt; availableOptionsMockedStatic = Mockito.mockStatic(AvailableOptions.class)) {\n      availableOptionsMockedStatic.when(() -&gt; AvailableOptions.calculateAmount(AvailableOptions.builder().build()))\n              .thenReturn(&quot;&quot;);\n      availableOptionsMockedStatic.verify(\n        () -&gt; availableOptions.calculateAmount(any(AvailableOptions.class)),\n          times(1)\n        );\n      }\n    }\n    verifyNoMoreInteractions(cancelOrderService);\n  }\n</code></pre>\n<p>Above is my setup and test. When I run it I get this error:</p>\n<blockquote>\n<p>Wanted but not invoked:\nAvailableOptions.class.calculateAmount(\n\n);\n-&gt; at ie.avis.orders.web.AvailableOptions.calculateAmount(AvailableOptions.java:31)\nActually, there were zero interactions with this mock.</p>\n</blockquote>\n<p>I realise that what I'm trying to do is different with a static method but I'm not sure where I'm going wrong. Can anyone please help resolve this issue?</p>\n"},{"tags":["java","spring","spring-boot","spring-webclient"],"comments":[{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1678449730,"post_id":75693055,"comment_id":133539135,"body_markdown":"a few questions: 1. do you want to throw an exception if any of the calls are failing? for example /user is 200 and /otheruser is 404, this should wait for both and then result in an exception. or publish a user on the flux and then an error for the 2nd one? \n2. do you want to throw an exception, or return Mono.error ?\n3.  if we have to wait for both calls before proceeding with the exception handling, do you want to return a Flux&lt;User&gt;? or a Mono&lt;List&lt;User&gt;&gt;?","body":"a few questions: 1. do you want to throw an exception if any of the calls are failing? for example /user is 200 and /otheruser is 404, this should wait for both and then result in an exception. or publish a user on the flux and then an error for the 2nd one?  2. do you want to throw an exception, or return Mono.error ? 3.  if we have to wait for both calls before proceeding with the exception handling, do you want to return a Flux&lt;User&gt;? or a Mono&lt;List&lt;User&gt;&gt;?"}],"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678431356,"creation_date":1678431356,"question_id":75693055,"body_markdown":"To call rest APIs parallel, I have used Mono and then Flux merge. Now, I want to see the response for each call and If the response in not 200 throw error. How can I achieve this?\r\n\r\n\r\n    public Mono&lt;User&gt; getUser(int id) {\r\n            return webClient.get()\r\n                .uri(&quot;/user/{id}&quot;, id)\r\n                .retrieve()\r\n                .bodyToMono(User.class);\r\n        }\r\n    \r\n    public Mono&lt;User&gt; getOtherUser(int id) {\r\n            return webClient.get()\r\n                .uri(&quot;/otheruser/{id}&quot;, id)\r\n                .retrieve()\r\n                .bodyToMono(User.class);\r\n        }\r\n    \r\n    public Flux&lt;User&gt; fetchUserAndOtherUser(int id) {\r\n            return Flux.merge(getUser(id), getOtherUser(id));\r\n        }","title":"How to retrieve response of each object in flux merge","body":"<p>To call rest APIs parallel, I have used Mono and then Flux merge. Now, I want to see the response for each call and If the response in not 200 throw error. How can I achieve this?</p>\n<pre><code>public Mono&lt;User&gt; getUser(int id) {\n        return webClient.get()\n            .uri(&quot;/user/{id}&quot;, id)\n            .retrieve()\n            .bodyToMono(User.class);\n    }\n\npublic Mono&lt;User&gt; getOtherUser(int id) {\n        return webClient.get()\n            .uri(&quot;/otheruser/{id}&quot;, id)\n            .retrieve()\n            .bodyToMono(User.class);\n    }\n\npublic Flux&lt;User&gt; fetchUserAndOtherUser(int id) {\n        return Flux.merge(getUser(id), getOtherUser(id));\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","properties"],"answers":[{"comments":[{"owner":{"account_id":382428,"reputation":2011,"user_id":737641,"accept_rate":97,"display_name":"Arj"},"score":0,"creation_date":1579054301,"post_id":59649939,"comment_id":105636679,"body_markdown":"That would be ideal.  How would I resolve that to a `List&lt;Person&gt;`?","body":"That would be ideal.  How would I resolve that to a <code>List&lt;Person&gt;</code>?"},{"owner":{"account_id":10010688,"reputation":182,"user_id":7403630,"display_name":"JavaBoy"},"score":0,"creation_date":1579100229,"post_id":59649939,"comment_id":105654135,"body_markdown":"by using @ConfigurationProperties. See: https://www.baeldung.com/configuration-properties-in-spring-boot","body":"by using @ConfigurationProperties. See: <a href=\"https://www.baeldung.com/configuration-properties-in-spring-boot\" rel=\"nofollow noreferrer\">baeldung.com/configuration-properties-in-spring-boot</a>"}],"tags":[],"owner":{"account_id":10010688,"reputation":182,"user_id":7403630,"display_name":"JavaBoy"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1578500345,"creation_date":1578500345,"answer_id":59649939,"question_id":59649673,"body_markdown":"Why don&#39;t you use **id** as an explicit property?\r\n\r\nfor example (yaml):\r\n```\r\ncom:\r\n  application:\r\n    persons:\r\n      - \r\n        id: john\r\n        name: John Smith\r\n        home-directory: /Users/john.smith\r\n      - \r\n        id: adam \r\n        name: Adam Bell\r\n        home-directory: /Users/adam.bell\r\n```\r\n\r\nThis would resolve in ```List&lt;Person&gt; persons;```","title":"Declare list of objects in Spring application.properties file","body":"<p>Why don't you use <strong>id</strong> as an explicit property?</p>\n\n<p>for example (yaml):</p>\n\n<pre><code>com:\n  application:\n    persons:\n      - \n        id: john\n        name: John Smith\n        home-directory: /Users/john.smith\n      - \n        id: adam \n        name: Adam Bell\n        home-directory: /Users/adam.bell\n</code></pre>\n\n<p>This would resolve in <code>List&lt;Person&gt; persons;</code></p>\n"},{"tags":[],"owner":{"account_id":1275026,"reputation":190,"user_id":1230475,"display_name":"Joyal Augustine"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578500525,"creation_date":1578500525,"answer_id":59649989,"question_id":59649673,"body_markdown":"Why don&#39;t you use `@ConfigurationProperties`\r\nIt will help you in this scenario, right?\r\n\r\nPlease refer for more details \r\n\r\nhttps://www.techiedelight.com/map-spring-boot-properties-to-pojo\r\n\r\nhttps://www.baeldung.com/configuration-properties-in-spring-boot\r\n","title":"Declare list of objects in Spring application.properties file","body":"<p>Why don't you use <code>@ConfigurationProperties</code>\nIt will help you in this scenario, right?</p>\n\n<p>Please refer for more details </p>\n\n<p><a href=\"https://www.techiedelight.com/map-spring-boot-properties-to-pojo\" rel=\"nofollow noreferrer\">https://www.techiedelight.com/map-spring-boot-properties-to-pojo</a></p>\n\n<p><a href=\"https://www.baeldung.com/configuration-properties-in-spring-boot\" rel=\"nofollow noreferrer\">https://www.baeldung.com/configuration-properties-in-spring-boot</a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1658077130,"post_id":72995013,"comment_id":128956247,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/72995013/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"score":0,"creation_date":1658267195,"post_id":72995013,"comment_id":129008427,"body_markdown":"If you have a new question, please ask it by clicking the [Ask Question](https://stackoverflow.com/questions/ask) button. Include a link to this question if it helps provide context. - [From Review](/review/late-answers/32255935)","body":"If you have a new question, please ask it by clicking the <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a> button. Include a link to this question if it helps provide context. - <a href=\"/review/late-answers/32255935\">From Review</a>"},{"owner":{"account_id":3303925,"reputation":2096,"user_id":2779330,"accept_rate":60,"display_name":"Bojan Vukasovic"},"score":0,"creation_date":1661946587,"post_id":72995013,"comment_id":129891630,"body_markdown":"`com.application.persions[0].id=john` etc... (but I think you need to specifically define name and home-directory also in the same way at the same time - e.g. `com.application.persions[0].name=John Smith`).","body":"<code>com.application.persions[0].id=john</code> etc... (but I think you need to specifically define name and home-directory also in the same way at the same time - e.g. <code>com.application.persions[0].name=John Smith</code>)."}],"tags":[],"owner":{"account_id":12272729,"reputation":51,"user_id":9021108,"display_name":"maik"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657892761,"creation_date":1657892761,"answer_id":72995013,"question_id":59649673,"body_markdown":"Is possible do this definition with application.properties format?\r\n\r\n````\r\ncom:\r\n  application:\r\n    persons:\r\n      - \r\n        id: john\r\n        name: John Smith\r\n        home-directory: /Users/john.smith\r\n      - \r\n        id: adam \r\n        name: Adam Bell\r\n        home-directory: /Users/adam.bell\r\n````","title":"Declare list of objects in Spring application.properties file","body":"<p>Is possible do this definition with application.properties format?</p>\n<pre><code>com:\n  application:\n    persons:\n      - \n        id: john\n        name: John Smith\n        home-directory: /Users/john.smith\n      - \n        id: adam \n        name: Adam Bell\n        home-directory: /Users/adam.bell\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26543502,"reputation":13,"user_id":20173889,"display_name":"Salem Elaiba"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678431356,"creation_date":1678179095,"answer_id":75659751,"question_id":59649673,"body_markdown":"definition with application.properties format\r\n\r\n    com.application.persons=[{id=john, name=John Smith, home-directory=/Users/john.smith}, {id=adam, name=Adam Bell, home-directory=/Users/adam.bell}]\r\n\r\n","title":"Declare list of objects in Spring application.properties file","body":"<p>definition with application.properties format</p>\n<pre><code>com.application.persons=[{id=john, name=John Smith, home-directory=/Users/john.smith}, {id=adam, name=Adam Bell, home-directory=/Users/adam.bell}]\n</code></pre>\n"}],"owner":{"account_id":382428,"reputation":2011,"user_id":737641,"accept_rate":97,"display_name":"Arj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18387,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":59649939,"answer_count":4,"score":6,"last_activity_date":1678431356,"creation_date":1578499490,"question_id":59649673,"body_markdown":"In a Spring Boot application, I would like to be able to declare a list of my domain objects in my `application.properties` file and read them as a `List&lt;TheDomainObject&gt;` as a `Bean`.  \r\n\r\nFor example, let&#39;s say I have the following in `application.properties`:\r\n\r\n```\r\ncom.application.person.john.name=John Smith\r\ncom.application.person.john.home-directory=/Users/john.smith\r\ncom.application.person.john.private-key-file=/Users/john.smith/.ssh/id_rsa\r\n\r\ncom.application.person.adam.name=Adam Bell\r\ncom.application.person.adam.home-directory=/Users/adam.bell\r\ncom.application.person.adam.private-key-file=/Users/adam.bell/.ssh/id_rsa\r\n\r\netc\r\n```\r\n\r\nI.e. I&#39;d like to have properties for each person grouped under a key. I&#39;d be able to add as many keys (people) as I like.\r\n\r\nI would not need to reference these properties directly, but I&#39;d like to declare a Domain object as follows (abbreviated):\r\n\r\n```\r\nclass Person {\r\n  String id;   (this would be the &#39;key&#39;, i.e. &#39;john&#39;, &#39;adam&#39;)\r\n  String name;\r\n  Path homeDirectory;\r\n  Path privateKeyFile;\r\n\r\n  // boilerplate\r\n}\r\n```\r\nand then receive a `List&lt;Person&gt;` through `Configuration`.  The more automatic the better, but I would be more than happy to implement builders or some additional converter logic if needed.\r\n\r\nI can&#39;t find any documentation for this kind of thing, but I have seen it in **log4j** for example, where you can dynamically add logging properties for any package name, so it must be possible to at least retrieve those keys.\r\n\r\nI know I can do this differently, for example by using a `data.sql` import script, however in my case it would be very ideal to have this in a single properties file (or yaml) format.","title":"Declare list of objects in Spring application.properties file","body":"<p>In a Spring Boot application, I would like to be able to declare a list of my domain objects in my <code>application.properties</code> file and read them as a <code>List&lt;TheDomainObject&gt;</code> as a <code>Bean</code>.  </p>\n\n<p>For example, let's say I have the following in <code>application.properties</code>:</p>\n\n<pre><code>com.application.person.john.name=John Smith\ncom.application.person.john.home-directory=/Users/john.smith\ncom.application.person.john.private-key-file=/Users/john.smith/.ssh/id_rsa\n\ncom.application.person.adam.name=Adam Bell\ncom.application.person.adam.home-directory=/Users/adam.bell\ncom.application.person.adam.private-key-file=/Users/adam.bell/.ssh/id_rsa\n\netc\n</code></pre>\n\n<p>I.e. I'd like to have properties for each person grouped under a key. I'd be able to add as many keys (people) as I like.</p>\n\n<p>I would not need to reference these properties directly, but I'd like to declare a Domain object as follows (abbreviated):</p>\n\n<pre><code>class Person {\n  String id;   (this would be the 'key', i.e. 'john', 'adam')\n  String name;\n  Path homeDirectory;\n  Path privateKeyFile;\n\n  // boilerplate\n}\n</code></pre>\n\n<p>and then receive a <code>List&lt;Person&gt;</code> through <code>Configuration</code>.  The more automatic the better, but I would be more than happy to implement builders or some additional converter logic if needed.</p>\n\n<p>I can't find any documentation for this kind of thing, but I have seen it in <strong>log4j</strong> for example, where you can dynamically add logging properties for any package name, so it must be possible to at least retrieve those keys.</p>\n\n<p>I know I can do this differently, for example by using a <code>data.sql</code> import script, however in my case it would be very ideal to have this in a single properties file (or yaml) format.</p>\n"},{"tags":["java","path","filepath","ini","ini4j"],"answers":[{"tags":[],"owner":{"account_id":11562757,"reputation":69,"user_id":8472001,"accept_rate":0,"display_name":"Krist&#243;f Horv&#225;th"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552392917,"creation_date":1552392917,"answer_id":55121235,"question_id":51315207,"body_markdown":"Well I couldn&#39;t find anything about this, except your post so here is my solution, but if this is the intended way it is really dumb.\r\n\r\n    ini.put(&quot;Default_Values&quot;, &quot;dWorkflowStart&quot;, &quot;C:\\\\&quot; + &quot;\\\\User\\\\&quot; + &quot;\\\\kh\\\\&quot; + &quot;\\\\Desktop\\\\&quot; \r\n\t\t\t\t+ &quot;\\\\workstuff\\\\&quot; + &quot;\\\\samples\\\\&quot; + &quot;\\\\test_in&quot;);\r\n\r\nThis puts out `[Default_Values]\r\ndWorkflowStart = C:\\\\Users\\\\kh\\\\Desktop\\\\workstuff\\\\samples\\\\test_in`","title":"Ini4j not reading file paths","body":"<p>Well I couldn't find anything about this, except your post so here is my solution, but if this is the intended way it is really dumb.</p>\n\n<pre><code>ini.put(\"Default_Values\", \"dWorkflowStart\", \"C:\\\\\" + \"\\\\User\\\\\" + \"\\\\kh\\\\\" + \"\\\\Desktop\\\\\" \n            + \"\\\\workstuff\\\\\" + \"\\\\samples\\\\\" + \"\\\\test_in\");\n</code></pre>\n\n<p>This puts out <code>[Default_Values]\ndWorkflowStart = C:\\\\Users\\\\kh\\\\Desktop\\\\workstuff\\\\samples\\\\test_in</code></p>\n"},{"tags":[],"owner":{"account_id":8993922,"reputation":13,"user_id":9662730,"display_name":"Gonzo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678431125,"creation_date":1678169350,"answer_id":75658531,"question_id":51315207,"body_markdown":"Yes,\r\nThe solution (only in Windows) is to put the path with double slashes.\r\nLike in java.util.Properties.\r\nWhen you load properties from file, like that:\r\n\r\n    Properties p = new Properties();\r\n    p.load(new FileInputStream(new File(&quot;C:\\\\path\\\\to\\\\file.txt&quot;)));\r\n\r\nIf p.txt contains Windows path, it should have double slashes.","title":"Ini4j not reading file paths","body":"<p>Yes,\nThe solution (only in Windows) is to put the path with double slashes.\nLike in java.util.Properties.\nWhen you load properties from file, like that:</p>\n<pre><code>Properties p = new Properties();\np.load(new FileInputStream(new File(&quot;C:\\\\path\\\\to\\\\file.txt&quot;)));\n</code></pre>\n<p>If p.txt contains Windows path, it should have double slashes.</p>\n"}],"owner":{"account_id":13847377,"reputation":69,"user_id":9996220,"display_name":"Warrior990"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1678431125,"creation_date":1531433737,"question_id":51315207,"body_markdown":"I have a .ini file that looks like this:\r\n\r\n    [Filepath]\r\n    Inbound=C:\\Users\\Bilbo\\Desktop\\Testing\r\n\r\nI want to return that exact string (C:\\Users\\Bilbo\\Desktop\\Testing) and I have the following code: \r\n    \r\n    public static String ParseIniInbound (File iniFile) throws \r\n    InvalidFileFormatException, IOException {\r\n\t\tString iniFileName = iniFile.toString();\r\n\t\tIni ini = new Ini(new File(iniFileName));\r\n\t\tString InboundPath= ini.get(&quot;Filepath&quot;, &quot;Inbound&quot;);\r\n\t\treturn InboundPath;\r\n\t}\r\n\r\nHowever, what is returned is C:UsersBilboDesktopTesting\r\n\r\nI tried putting quotes around the filepath in the .ini file to read it as a string but that didn&#39;t work. I used double slashes (C:\\\\\\Users\\\\\\Bilbo\\\\\\Desktop\\\\\\Testing) which returns  (C:\\Users\\Bilbo\\Desktop\\Testing) but I want to be able to just copy and paste a filepath and not have to manually put in double slashes. Is there a way to read in a string from an .ini file with ini4j or another way around this? Thanks","title":"Ini4j not reading file paths","body":"<p>I have a .ini file that looks like this:</p>\n\n<pre><code>[Filepath]\nInbound=C:\\Users\\Bilbo\\Desktop\\Testing\n</code></pre>\n\n<p>I want to return that exact string (C:\\Users\\Bilbo\\Desktop\\Testing) and I have the following code: </p>\n\n<pre><code>public static String ParseIniInbound (File iniFile) throws \nInvalidFileFormatException, IOException {\n    String iniFileName = iniFile.toString();\n    Ini ini = new Ini(new File(iniFileName));\n    String InboundPath= ini.get(\"Filepath\", \"Inbound\");\n    return InboundPath;\n}\n</code></pre>\n\n<p>However, what is returned is C:UsersBilboDesktopTesting</p>\n\n<p>I tried putting quotes around the filepath in the .ini file to read it as a string but that didn't work. I used double slashes (C:\\\\Users\\\\Bilbo\\\\Desktop\\\\Testing) which returns  (C:\\Users\\Bilbo\\Desktop\\Testing) but I want to be able to just copy and paste a filepath and not have to manually put in double slashes. Is there a way to read in a string from an .ini file with ini4j or another way around this? Thanks</p>\n"},{"tags":["java","maven","protocol-buffers","maven-plugin","grpc-java"],"comments":[{"owner":{"account_id":15937371,"reputation":540,"user_id":11500161,"display_name":"voidzcy"},"score":1,"creation_date":1623876354,"post_id":67625587,"comment_id":120206044,"body_markdown":"protoc 3.6.1 is pretty old, you may want to try with some newer version. Also, I&#39;d recommend using the same grpc version for `protoc-gen-grpc-java` (aka, 1.32.1).","body":"protoc 3.6.1 is pretty old, you may want to try with some newer version. Also, I&#39;d recommend using the same grpc version for <code>protoc-gen-grpc-java</code> (aka, 1.32.1)."}],"answers":[{"tags":[],"owner":{"account_id":17611600,"reputation":1303,"user_id":12779522,"display_name":"Sanushi Salgado"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660585919,"creation_date":1660585919,"answer_id":73364671,"question_id":67625587,"body_markdown":"I tried with the following code snippet in pom.xml, and I was able to successfully build my Maven project.\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tutorial1-server&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;grpc-netty&lt;/artifactId&gt;\r\n            &lt;version&gt;1.36.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;\r\n            &lt;version&gt;1.36.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;\r\n            &lt;version&gt;1.36.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;extensions&gt;\r\n            &lt;extension&gt;\r\n                &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6.2&lt;/version&gt;\r\n            &lt;/extension&gt;\r\n        &lt;/extensions&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.6.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;protocArtifact&gt;com.google.protobuf:protoc:3.12.0:exe:${os.detected.classifier}&lt;/protocArtifact&gt;\r\n                    &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\r\n                    &lt;pluginArtifact&gt;io.grpc:protoc-gen-grpc-java:1.36.0:exe:${os.detected.classifier}&lt;/pluginArtifact&gt;\r\n                    &lt;protoSourceRoot&gt;src/main/resources&lt;/protoSourceRoot&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                            &lt;goal&gt;compile-custom&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;","title":"protoc did not exit cleanly and Missing: ---------- 1) com.google.protobuf:protoc:exe:${os.detected.classifier}:3.6.1","body":"<p>I tried with the following code snippet in pom.xml, and I was able to successfully build my Maven project.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;groupId&gt;org.example&lt;/groupId&gt;\n&lt;artifactId&gt;tutorial1-server&lt;/artifactId&gt;\n&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n        &lt;artifactId&gt;grpc-netty&lt;/artifactId&gt;\n        &lt;version&gt;1.36.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n        &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;\n        &lt;version&gt;1.36.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n        &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;\n        &lt;version&gt;1.36.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;extensions&gt;\n        &lt;extension&gt;\n            &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.6.2&lt;/version&gt;\n        &lt;/extension&gt;\n    &lt;/extensions&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.6.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;protocArtifact&gt;com.google.protobuf:protoc:3.12.0:exe:${os.detected.classifier}&lt;/protocArtifact&gt;\n                &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\n                &lt;pluginArtifact&gt;io.grpc:protoc-gen-grpc-java:1.36.0:exe:${os.detected.classifier}&lt;/pluginArtifact&gt;\n                &lt;protoSourceRoot&gt;src/main/resources&lt;/protoSourceRoot&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;goal&gt;compile-custom&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n"},{"tags":[],"owner":{"account_id":27980896,"reputation":1,"user_id":21368660,"display_name":"user21368660"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678430776,"creation_date":1678430776,"answer_id":75692994,"question_id":67625587,"body_markdown":"eclipse May not get the properties of value: ${os.detected.classifier} so you can config it on maven settings.xml at profiles.profile.properties.\r\n\r\n&lt;os.detected.classifier&gt;windows-x86_64&lt;/os.detected.classifier&gt;","title":"protoc did not exit cleanly and Missing: ---------- 1) com.google.protobuf:protoc:exe:${os.detected.classifier}:3.6.1","body":"<p>eclipse May not get the properties of value: ${os.detected.classifier} so you can config it on maven settings.xml at profiles.profile.properties.</p>\n<p>&lt;os.detected.classifier&gt;windows-x86_64&lt;/os.detected.classifier&gt;</p>\n"}],"owner":{"account_id":14455833,"reputation":660,"user_id":10443925,"display_name":"Maana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3502,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1678430776,"creation_date":1621533045,"question_id":67625587,"body_markdown":"I am trying to build maven, every time when I build on `eclipse` using `maven update` getting \r\n\r\n    Missing: ---------- 1) \r\n    com.google.protobuf:protoc:exe:${os.detected.classifier}:3.6.1 error. \r\n\r\nFrom the `command line` I am getting below error. \r\n\r\n    [ERROR] Failed to execute goal org.xolstice.maven.plugins:protobuf-maven- \r\n    plugin:0.5.1:compile (default) on project ivf-sample: protoc did not exit \r\n    cleanly. Review output for more information. -&gt; [Help 1]\r\n    \r\nany suggestion experts on how to resolve this error ?\r\n\r\n```\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;grpc-netty-shaded&lt;/artifactId&gt;\r\n            &lt;version&gt;1.32.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;\r\n            &lt;version&gt;1.32.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;\r\n            &lt;version&gt;1.32.1&lt;/version&gt;\r\n        &lt;/dependency&gt;    \r\n    &lt;/dependencies&gt;\r\n\r\n\r\n    &lt;build&gt;\r\n        &lt;extensions&gt;\r\n            &lt;extension&gt;\r\n                &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6.2&lt;/version&gt;\r\n            &lt;/extension&gt;\r\n        &lt;/extensions&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.5.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;protocArtifact&gt;\r\n                        com.google.protobuf:protoc:3.6.1:exe:${os.detected.classifier}\r\n                    &lt;/protocArtifact&gt;\r\n                    &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\r\n                    &lt;pluginArtifact&gt;\r\n                        io.grpc:protoc-gen-grpc-java:1.22.1:exe:${os.detected.classifier}\r\n                    &lt;/pluginArtifact&gt;\r\n                    &lt;protoSourceRoot&gt;\r\n                        ${basedir}/src/main/proto/\r\n                    &lt;/protoSourceRoot&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                            &lt;goal&gt;compile-custom&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n```\r\n","title":"protoc did not exit cleanly and Missing: ---------- 1) com.google.protobuf:protoc:exe:${os.detected.classifier}:3.6.1","body":"<p>I am trying to build maven, every time when I build on <code>eclipse</code> using <code>maven update</code> getting</p>\n<pre><code>Missing: ---------- 1) \ncom.google.protobuf:protoc:exe:${os.detected.classifier}:3.6.1 error. \n</code></pre>\n<p>From the <code>command line</code> I am getting below error.</p>\n<pre><code>[ERROR] Failed to execute goal org.xolstice.maven.plugins:protobuf-maven- \nplugin:0.5.1:compile (default) on project ivf-sample: protoc did not exit \ncleanly. Review output for more information. -&gt; [Help 1]\n</code></pre>\n<p>any suggestion experts on how to resolve this error ?</p>\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n            &lt;artifactId&gt;grpc-netty-shaded&lt;/artifactId&gt;\n            &lt;version&gt;1.32.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n            &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;\n            &lt;version&gt;1.32.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n            &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;\n            &lt;version&gt;1.32.1&lt;/version&gt;\n        &lt;/dependency&gt;    \n    &lt;/dependencies&gt;\n\n\n    &lt;build&gt;\n        &lt;extensions&gt;\n            &lt;extension&gt;\n                &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.6.2&lt;/version&gt;\n            &lt;/extension&gt;\n        &lt;/extensions&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.5.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;protocArtifact&gt;\n                        com.google.protobuf:protoc:3.6.1:exe:${os.detected.classifier}\n                    &lt;/protocArtifact&gt;\n                    &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\n                    &lt;pluginArtifact&gt;\n                        io.grpc:protoc-gen-grpc-java:1.22.1:exe:${os.detected.classifier}\n                    &lt;/pluginArtifact&gt;\n                    &lt;protoSourceRoot&gt;\n                        ${basedir}/src/main/proto/\n                    &lt;/protoSourceRoot&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                            &lt;goal&gt;compile-custom&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n</code></pre>\n"},{"tags":["java","garbage-collection","visualvm","g1gc"],"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1633014667,"post_id":69388252,"comment_id":122654426,"body_markdown":"you might want to read [this](https://stackoverflow.com/questions/59362760/does-g1gc-release-back-memory-to-the-os-even-if-xms-xmx/59377080#59377080) or [this](https://stackoverflow.com/questions/61506136/kubernetes-pod-memory-java-gc-logs/61512521#61512521)","body":"you might want to read <a href=\"https://stackoverflow.com/questions/59362760/does-g1gc-release-back-memory-to-the-os-even-if-xms-xmx/59377080#59377080\">this</a> or <a href=\"https://stackoverflow.com/questions/61506136/kubernetes-pod-memory-java-gc-logs/61512521#61512521\">this</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1633112576,"post_id":69388252,"comment_id":122682719,"body_markdown":"There is no such thing as “releasing memory” here. Throughout the entire recorded time, there’s a heap of 82MB allocated . Only the fraction of used memory within that heap changes—in the order of magnitude of 5MB.","body":"There is no such thing as “releasing memory” here. Throughout the entire recorded time, there’s a heap of 82MB allocated . Only the fraction of used memory within that heap changes—in the order of magnitude of 5MB."}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1640260470,"post_id":69388344,"comment_id":124555138,"body_markdown":"It is not a flaw.  It is a deliberate Java SE design feature.  It was added in the very early days so that there was a way for the system administrator / user to protect themselves from the library code / applications that manually triggered the GC excessively.","body":"It is not a flaw.  It is a deliberate Java SE design feature.  It was added in the very early days so that there was a way for the system administrator / user to protect themselves from the library code / applications that manually triggered the GC excessively."}],"tags":[],"owner":{"account_id":16666324,"reputation":129,"user_id":12044865,"display_name":"ChristianM"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1632988520,"creation_date":1632988520,"answer_id":69388344,"question_id":69388252,"body_markdown":"It is totally common and its one of the flaws of Garbagecollection.\r\nYou can tell the Garbage collector that he should start cleaning your memory but it doesnt mean he will do it.\r\n\r\n    System.gc();\r\n\r\nThe official Oracle documentation states that:\r\n\r\n**Calling the gc method suggests that the Java Virtual Machine expend effort toward recycling unused objects in order to make the memory they currently occupy available for quick reuse**","title":"Garbage Collector does not release memory on his own","body":"<p>It is totally common and its one of the flaws of Garbagecollection.\nYou can tell the Garbage collector that he should start cleaning your memory but it doesnt mean he will do it.</p>\n<pre><code>System.gc();\n</code></pre>\n<p>The official Oracle documentation states that:</p>\n<p><strong>Calling the gc method suggests that the Java Virtual Machine expend effort toward recycling unused objects in order to make the memory they currently occupy available for quick reuse</strong></p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1633113044,"post_id":69389405,"comment_id":122682881,"body_markdown":"It’s rather 10MB that the OP “got back”. But actually, the memory was reclaimable even before the manual GC and hence, available in case the application really needed it. It just wasn’t accounted for in the statistics used for plotting this graph. So all the manually triggered GC achieved, besides raising the CPU utilization, is to change the plotted graph.","body":"It’s rather 10MB that the OP “got back”. But actually, the memory was reclaimable even before the manual GC and hence, available in case the application really needed it. It just wasn’t accounted for in the statistics used for plotting this graph. So all the manually triggered GC achieved, besides raising the CPU utilization, is to change the plotted graph."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1678430519,"creation_date":1632992793,"answer_id":69389405,"question_id":69388252,"body_markdown":"That graph looks like normal behavior.\r\n\r\nG1 GC is a generational collector.  That means that the heap is divided into (in this case) 2 generations: new and old.  The new generation is collected more frequently than the old one.  Objects that survive a number of new generation collections get &quot;promoted&quot; to the old generation.  The new generation is relatively small and is GC&#39;d frequently.  The old generation is larger, but it is only GC&#39;d when it is starting to get full.\r\n\r\nSo ... the graph shows a series of &quot;fine&quot; sawtooths that correspond to the new generation collections.  The line trends upwards as survivor objects get promoted to the old generation.  And the old generation collection is not running ... because the JVM hasn&#39;t figured that the old generation is full enough to warrant collection.\r\n\r\nThen, you called `jcmd &lt;pid&gt; GC.run`.  That triggered an old generation collection, and you got back about 10MB of memory.  (You didn&#39;t need to do that.  Freeing up the memory early does nothing except change the graph.)\r\n\r\nThen the new collection pattern resumed.\r\n\r\n----------------------------\r\n\r\nQ: Is this normal?\r\n\r\nA: Yes.\r\n\r\nQ: Is there a problem here?\r\n\r\nA: There is no evidence of a problem.  Certainly not with the GC itself.  It is possible that your application has a memory leak, but there is no clear evidence one way or the other.\r\n\r\nQ: What if you hadn&#39;t called `jcmd &lt;pid&gt; GC.run`?\r\n\r\nA: At some point, the JVM will decide that the old generation is full enough to warrant starting an old generation collection.  There is no need to force it.  In fact, it is generally a **bad idea** to force it; see https://stackoverflow.com/questions/2414105.\r\n\r\nQ: Is this a flaw with GC?  Why doesn&#39;t the GC release memory when &gt;I&lt; think it is free?\r\n\r\nA: No it isn&#39;t a flaw.  This is *by design*.\r\n\r\nThere is a trade-off between the (supposed) benefit of reclaiming memory early versus the cost of running the garbage collector.  As a general rule, GC algorithms are most efficient when the ratio of collectable garbage to non-collectable objects is high; i.e. when the heap is getting close (but not *too* close) to full.\r\n\r\nNote that the graphs don&#39;t show the *reclaimable* space.  The only way that the JVM can efficiently determine how much space is reclaimable is by actually running the GC to reclaim it.  It would be inefficient (and pointless) for the JVM to continually run the GC just so that memory is freed up when &gt;you&lt; think it should be.  \r\n\r\nFinally, even if you do force the GC to run, *the JVM will be reluctant to give memory back to the OS* for other processes to use.  It is more efficient to hang onto the memory than to be continually downsizing and then re-upsizing the heap.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Garbage Collector does not release memory on his own","body":"<p>That graph looks like normal behavior.</p>\n<p>G1 GC is a generational collector.  That means that the heap is divided into (in this case) 2 generations: new and old.  The new generation is collected more frequently than the old one.  Objects that survive a number of new generation collections get &quot;promoted&quot; to the old generation.  The new generation is relatively small and is GC'd frequently.  The old generation is larger, but it is only GC'd when it is starting to get full.</p>\n<p>So ... the graph shows a series of &quot;fine&quot; sawtooths that correspond to the new generation collections.  The line trends upwards as survivor objects get promoted to the old generation.  And the old generation collection is not running ... because the JVM hasn't figured that the old generation is full enough to warrant collection.</p>\n<p>Then, you called <code>jcmd &lt;pid&gt; GC.run</code>.  That triggered an old generation collection, and you got back about 10MB of memory.  (You didn't need to do that.  Freeing up the memory early does nothing except change the graph.)</p>\n<p>Then the new collection pattern resumed.</p>\n<hr />\n<p>Q: Is this normal?</p>\n<p>A: Yes.</p>\n<p>Q: Is there a problem here?</p>\n<p>A: There is no evidence of a problem.  Certainly not with the GC itself.  It is possible that your application has a memory leak, but there is no clear evidence one way or the other.</p>\n<p>Q: What if you hadn't called <code>jcmd &lt;pid&gt; GC.run</code>?</p>\n<p>A: At some point, the JVM will decide that the old generation is full enough to warrant starting an old generation collection.  There is no need to force it.  In fact, it is generally a <strong>bad idea</strong> to force it; see <a href=\"https://stackoverflow.com/questions/2414105\">Why is it bad practice to call System.gc()?</a>.</p>\n<p>Q: Is this a flaw with GC?  Why doesn't the GC release memory when &gt;I&lt; think it is free?</p>\n<p>A: No it isn't a flaw.  This is <em>by design</em>.</p>\n<p>There is a trade-off between the (supposed) benefit of reclaiming memory early versus the cost of running the garbage collector.  As a general rule, GC algorithms are most efficient when the ratio of collectable garbage to non-collectable objects is high; i.e. when the heap is getting close (but not <em>too</em> close) to full.</p>\n<p>Note that the graphs don't show the <em>reclaimable</em> space.  The only way that the JVM can efficiently determine how much space is reclaimable is by actually running the GC to reclaim it.  It would be inefficient (and pointless) for the JVM to continually run the GC just so that memory is freed up when &gt;you&lt; think it should be.</p>\n<p>Finally, even if you do force the GC to run, <em>the JVM will be reluctant to give memory back to the OS</em> for other processes to use.  It is more efficient to hang onto the memory than to be continually downsizing and then re-upsizing the heap.</p>\n"}],"owner":{"account_id":2366322,"reputation":2105,"user_id":2071938,"accept_rate":52,"display_name":"user2071938"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1639,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1678430519,"creation_date":1632988174,"question_id":69388252,"body_markdown":"Why does my garbage collector(G1 GC) do not release memory altough he could?\r\nThe Used Heap is going up over time, the step fall at the end is because I forced the GC to release memory through `jcmd &lt;pid&gt; GC.run`\r\n \r\nWhy is that? Is that normal behaviour?\r\n\r\nI started the GC with these parameter `-Xms64m -Xmx256m -XX:G1ReservePercent=50`\r\n\r\n[![heap space in VisualVM][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q5dTw.png","title":"Garbage Collector does not release memory on his own","body":"<p>Why does my garbage collector(G1 GC) do not release memory altough he could?\nThe Used Heap is going up over time, the step fall at the end is because I forced the GC to release memory through <code>jcmd &lt;pid&gt; GC.run</code></p>\n<p>Why is that? Is that normal behaviour?</p>\n<p>I started the GC with these parameter <code>-Xms64m -Xmx256m -XX:G1ReservePercent=50</code></p>\n<p><a href=\"https://i.stack.imgur.com/Q5dTw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q5dTw.png\" alt=\"heap space in VisualVM\" /></a></p>\n"},{"tags":["java","unit-testing","vaadin","apexcharts","vaadin14"],"comments":[{"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"score":0,"creation_date":1677443670,"post_id":75572159,"comment_id":133334365,"body_markdown":"How are you writing and executing the test?","body":"How are you writing and executing the test?"}],"answers":[{"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678430224,"creation_date":1678430224,"answer_id":75692929,"question_id":75572159,"body_markdown":"This is as expected as when view is instantiated in isolation, the Framework&#39;s internal classes such as UI, VaadinSession, VaadinService etc. are not automatically being instantiated. That will mean that VaadinService.getCurrent(), UI.getCurrent() will return null, as the thread locals has not been set.\r\n\r\nIf you wish to do unit testing on your views, you need to have Vaadin&#39;s internal classes mocked. For simple cases it is not super hard to do, but in more complex cases can be a deep rabit hole.\r\n\r\nYou can find a simple component UI unit test with basic Vaadin mocks here:\r\n\r\nhttps://github.com/TatuLund/bean-table/blob/nextlts/src/test/java/org/vaadin/tatu/BeanTableTest.java\r\n\r\n\r\nIn Vaadin 23, the commercial TestBench add-on comes with [UI Unit Test][1] library, which is essentially containing these mocks. With Vaadin 14 you could try to use [Karibu][2], which is essentially the same.\r\n\r\nYou can find example of UI Unit Test of a view here\r\n\r\nhttps://github.com/TatuLund/TwinColSelect/blob/nextlts/src/test/java/org/vaadin/tatu/ViewTest.java\r\n\r\n\r\n  [1]: https://vaadin.com/docs/latest/testing/ui-unit\r\n  [2]: https://github.com/mvysny/karibu-testing","title":"Testing a Vaadin view in a unit test yields VaadinService.getCurrent()&quot; is null","body":"<p>This is as expected as when view is instantiated in isolation, the Framework's internal classes such as UI, VaadinSession, VaadinService etc. are not automatically being instantiated. That will mean that VaadinService.getCurrent(), UI.getCurrent() will return null, as the thread locals has not been set.</p>\n<p>If you wish to do unit testing on your views, you need to have Vaadin's internal classes mocked. For simple cases it is not super hard to do, but in more complex cases can be a deep rabit hole.</p>\n<p>You can find a simple component UI unit test with basic Vaadin mocks here:</p>\n<p><a href=\"https://github.com/TatuLund/bean-table/blob/nextlts/src/test/java/org/vaadin/tatu/BeanTableTest.java\" rel=\"nofollow noreferrer\">https://github.com/TatuLund/bean-table/blob/nextlts/src/test/java/org/vaadin/tatu/BeanTableTest.java</a></p>\n<p>In Vaadin 23, the commercial TestBench add-on comes with <a href=\"https://vaadin.com/docs/latest/testing/ui-unit\" rel=\"nofollow noreferrer\">UI Unit Test</a> library, which is essentially containing these mocks. With Vaadin 14 you could try to use <a href=\"https://github.com/mvysny/karibu-testing\" rel=\"nofollow noreferrer\">Karibu</a>, which is essentially the same.</p>\n<p>You can find example of UI Unit Test of a view here</p>\n<p><a href=\"https://github.com/TatuLund/TwinColSelect/blob/nextlts/src/test/java/org/vaadin/tatu/ViewTest.java\" rel=\"nofollow noreferrer\">https://github.com/TatuLund/TwinColSelect/blob/nextlts/src/test/java/org/vaadin/tatu/ViewTest.java</a></p>\n"}],"owner":{"account_id":25435838,"reputation":316,"user_id":19239577,"display_name":"greenButMellow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1678430224,"creation_date":1677416456,"question_id":75572159,"body_markdown":"I&#39;m trying to test a Vaadin view. One of the `Component`s is a div containing an `ApexCharts`. \r\n\r\nWhile I&#39;m testing another component of the page (some Grid) I&#39;m getting the following error:\r\n\r\n&gt; java.lang.NullPointerException: Cannot invoke &quot;com.vaadin.flow.server.VaadinService.getDeploymentConfiguration()&quot; because the return value of &quot;com.vaadin.flow.server.VaadinService.getCurrent()&quot; is null\r\n\r\n\r\nFor the line `ApexChartsBuilder.get()...build()`\r\n\r\nWhy?","title":"Testing a Vaadin view in a unit test yields VaadinService.getCurrent()&quot; is null","body":"<p>I'm trying to test a Vaadin view. One of the <code>Component</code>s is a div containing an <code>ApexCharts</code>.</p>\n<p>While I'm testing another component of the page (some Grid) I'm getting the following error:</p>\n<blockquote>\n<p>java.lang.NullPointerException: Cannot invoke &quot;com.vaadin.flow.server.VaadinService.getDeploymentConfiguration()&quot; because the return value of &quot;com.vaadin.flow.server.VaadinService.getCurrent()&quot; is null</p>\n</blockquote>\n<p>For the line <code>ApexChartsBuilder.get()...build()</code></p>\n<p>Why?</p>\n"},{"tags":["java","html","parsing","jsoup"],"answers":[{"comments":[{"owner":{"account_id":1299032,"reputation":5308,"user_id":1249325,"accept_rate":50,"display_name":"KhAn SaAb"},"score":0,"creation_date":1603458952,"post_id":40396727,"comment_id":114051730,"body_markdown":"you&#39;ve save my time, Thanks :)","body":"you&#39;ve save my time, Thanks :)"}],"tags":[],"owner":{"account_id":4512575,"reputation":453,"user_id":3668279,"display_name":"Benjamin P."},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1478162595,"creation_date":1478161389,"answer_id":40396727,"question_id":40396524,"body_markdown":"You can disable the pretty printing of your document to get the output like you want it. But you also have to change the `.text()` to `.html()`.\r\n\r\n    Document doc = Jsoup.parse(sample);\r\n    doc.outputSettings(new Document.OutputSettings().prettyPrint(false));\r\n    String output = doc.body().html();","title":"Avoid removal of spaces and newline while parsing HTML using jsoup","body":"<p>You can disable the pretty printing of your document to get the output like you want it. But you also have to change the <code>.text()</code> to <code>.html()</code>.</p>\n\n<pre><code>Document doc = Jsoup.parse(sample);\ndoc.outputSettings(new Document.OutputSettings().prettyPrint(false));\nString output = doc.body().html();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8414754,"reputation":1326,"user_id":6315553,"display_name":"Markus Fischer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1478163185,"creation_date":1478163185,"answer_id":40397208,"question_id":40396524,"body_markdown":"The HTML specification requires that multiple whitespace characters are collapsed into a single whitespace. Therefore, when parsing the sample, the parser correctly eliminates the superfluous whitespace characters.\r\n\r\nI don&#39;t think you can change how the parser works. You could add a preprocessing step where you replace multiple whitespaces with non-breakable spaces (&amp;nbsp;), which will not collapse. The side effect, though, would of course be that those would be, well, non-breakable (which doesn&#39;t matter if you really just want to use the rendered text, as in doc.body().text()).","title":"Avoid removal of spaces and newline while parsing HTML using jsoup","body":"<p>The HTML specification requires that multiple whitespace characters are collapsed into a single whitespace. Therefore, when parsing the sample, the parser correctly eliminates the superfluous whitespace characters.</p>\n\n<p>I don't think you can change how the parser works. You could add a preprocessing step where you replace multiple whitespaces with non-breakable spaces (&nbsp;), which will not collapse. The side effect, though, would of course be that those would be, well, non-breakable (which doesn't matter if you really just want to use the rendered text, as in doc.body().text()).</p>\n"}],"owner":{"account_id":6284840,"reputation":73,"user_id":4884501,"display_name":"Aparna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2390,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":40396727,"answer_count":2,"score":6,"last_activity_date":1678429804,"creation_date":1478160441,"question_id":40396524,"body_markdown":"I have a sample code as below.\r\n\r\n    String sample = &quot;&lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    This is a sample on              parsing HTML body using jsoup\r\n    This is a sample on              parsing HTML body using jsoup\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;&quot;;\r\n\r\n    Document doc = Jsoup.parse(sample);\r\n    String output = doc.body().text();\r\n\r\nI get the output as\r\n\r\n    This is a sample on parsing HTML body using jsoup This is a sample on `parsing HTML body using jsoup`\r\n\r\nBut I want the output as\r\n\r\n    This is a sample on              parsing HTML body using jsoup\r\n    This is a sample on              parsing HTML body using jsoup\r\n\r\nHow do parse it so that I get this output? Or is there another way to do so in Java?\r\n\r\n\r\n\r\n","title":"Avoid removal of spaces and newline while parsing HTML using jsoup","body":"<p>I have a sample code as below.</p>\n<pre><code>String sample = &quot;&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\nThis is a sample on              parsing HTML body using jsoup\nThis is a sample on              parsing HTML body using jsoup\n&lt;/body&gt;\n&lt;/html&gt;&quot;;\n\nDocument doc = Jsoup.parse(sample);\nString output = doc.body().text();\n</code></pre>\n<p>I get the output as</p>\n<pre><code>This is a sample on parsing HTML body using jsoup This is a sample on `parsing HTML body using jsoup`\n</code></pre>\n<p>But I want the output as</p>\n<pre><code>This is a sample on              parsing HTML body using jsoup\nThis is a sample on              parsing HTML body using jsoup\n</code></pre>\n<p>How do parse it so that I get this output? Or is there another way to do so in Java?</p>\n"},{"tags":["java","json","spring","rest","jackson"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1678428746,"post_id":75692764,"comment_id":133534001,"body_markdown":"`@JsonProperty` should work. Or `@JsonNaming`. It would be helpful to see a [mcve].","body":"<code>@JsonProperty</code> should work. Or <code>@JsonNaming</code>. It would be helpful to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":22415215,"reputation":49,"user_id":16623376,"display_name":"ripunjoym1998"},"score":0,"creation_date":1678428876,"post_id":75692764,"comment_id":133534025,"body_markdown":"where do i add the @JsonProperty, should I add it in Destination C&#39;s POJO ?","body":"where do i add the @JsonProperty, should I add it in Destination C&#39;s POJO ?"}],"answers":[{"tags":[],"owner":{"account_id":14248845,"reputation":444,"user_id":11435260,"display_name":"AbrA"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678429046,"creation_date":1678429046,"answer_id":75692813,"question_id":75692764,"body_markdown":"    public class C { \r\n        Long id\r\n        @JsonProperty(&quot;created_on&quot;)\r\n        String createdOn \r\n    }\r\nIt&#39;s should works.","title":"JsonProperty when source and destination requires different variable names","body":"<pre><code>public class C { \n    Long id\n    @JsonProperty(&quot;created_on&quot;)\n    String createdOn \n}\n</code></pre>\n<p>It's should works.</p>\n"}],"owner":{"account_id":22415215,"reputation":49,"user_id":16623376,"display_name":"ripunjoym1998"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75692813,"answer_count":1,"score":0,"last_activity_date":1678429046,"creation_date":1678428552,"question_id":75692764,"body_markdown":"I have a source A, a wrapper API B and a destination C.\r\nI have to call wrapper API B from destination C. I have no access to source A.\r\n\r\nsource A produces following json output:\r\n\r\n    {\r\n    &quot;id&quot; : 1,\r\n    &quot;created_on&quot; : &quot;27July&quot;\r\n    }\r\n\r\nIn wrapper API B, I am consuming the above JSON output using following POJO:\r\n\r\n    class B\r\n    {\r\n    Long id;\r\n    String created_on;\r\n    }\r\n\r\nWrapper API is able to get the value of created_on from source A. When I call A from B, I get this ouptut:\r\n  \r\n\r\n    {\r\n    &quot;id&quot; : 1,\r\n    &quot;created_on&quot; : &quot;27July&quot;\r\n    }\r\n\r\nBut in destination C, i have the following POJO: \r\n\r\n    class C\r\n    { \r\n    Long id\r\n    String createdOn \r\n    }\r\n\r\nWhen I call Wrapper API B from C, i am not able to get the field &#39;createdOn&#39;.\r\nWhen I call B from C, i get only this:\r\n\r\n    {\r\n              &quot;id&quot; : 1\r\n    }\r\n\r\nThe mapping between created_on and createdOn is not happening.\r\nBasically, i want to return &#39;createdOn&#39; from Wrapper API B instead of &#39;created_on&#39;. \r\nCurrently, wrapper B is sending &#39;created_on&#39; , but i want it to return &#39;createdOn&#39;.\r\nHow do I do it? I have tried @JSONProperty but it is not working\r\n","title":"JsonProperty when source and destination requires different variable names","body":"<p>I have a source A, a wrapper API B and a destination C.\nI have to call wrapper API B from destination C. I have no access to source A.</p>\n<p>source A produces following json output:</p>\n<pre><code>{\n&quot;id&quot; : 1,\n&quot;created_on&quot; : &quot;27July&quot;\n}\n</code></pre>\n<p>In wrapper API B, I am consuming the above JSON output using following POJO:</p>\n<pre><code>class B\n{\nLong id;\nString created_on;\n}\n</code></pre>\n<p>Wrapper API is able to get the value of created_on from source A. When I call A from B, I get this ouptut:</p>\n<pre><code>{\n&quot;id&quot; : 1,\n&quot;created_on&quot; : &quot;27July&quot;\n}\n</code></pre>\n<p>But in destination C, i have the following POJO:</p>\n<pre><code>class C\n{ \nLong id\nString createdOn \n}\n</code></pre>\n<p>When I call Wrapper API B from C, i am not able to get the field 'createdOn'.\nWhen I call B from C, i get only this:</p>\n<pre><code>{\n          &quot;id&quot; : 1\n}\n</code></pre>\n<p>The mapping between created_on and createdOn is not happening.\nBasically, i want to return 'createdOn' from Wrapper API B instead of 'created_on'.\nCurrently, wrapper B is sending 'created_on' , but i want it to return 'createdOn'.\nHow do I do it? I have tried @JSONProperty but it is not working</p>\n"},{"tags":["java","spring","join","jdbctemplate"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1678438059,"post_id":75692783,"comment_id":133535881,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1679491201,"post_id":75692783,"comment_id":133731111,"body_markdown":"as long as you&#39;re using appropriate indices on the tables, a join should not be problematic, even with &quot;huge&quot; tables. The join operation would only acquire the rows which match for the `ON`- or `WHERE`-conditions.\nIf this still is problematic, you could expand your question to further improve our understanding of what you&#39;re trying to achieve.","body":"as long as you&#39;re using appropriate indices on the tables, a join should not be problematic, even with &quot;huge&quot; tables. The join operation would only acquire the rows which match for the <code>ON</code>- or <code>WHERE</code>-conditions. If this still is problematic, you could expand your question to further improve our understanding of what you&#39;re trying to achieve."}],"owner":{"account_id":19952255,"reputation":1,"user_id":14621655,"display_name":"Zee Shan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678429002,"creation_date":1678428736,"question_id":75692783,"body_markdown":"I am new to Java Spring.\r\n\r\nI have 2 tables from where i need to get customer information. I CANNOT JOIN the tables as size of tables is HUGE.\r\nOne table contains ID, Name and Phone while other contains ID and Address. \r\nPlease note that one customer can have multiple addresses.\r\n\r\nI am executing 2 queries via JDBCTemplate. One to get records from first table and other to get records from 2nd table.\r\n\r\nhow do i join the output to queries to one domain object Customer and send response. What options i have if i dont want to use JOIN in my SQL query and want to execute the 2 queries separately?\r\n\r\nThanks\r\n\r\nTried storing output of first query into a Map and then want to join in with output of 2nd query but not sure if it is the right approach?","title":"Spring JDBC Template Map result of multiple queries to One Domain Object","body":"<p>I am new to Java Spring.</p>\n<p>I have 2 tables from where i need to get customer information. I CANNOT JOIN the tables as size of tables is HUGE.\nOne table contains ID, Name and Phone while other contains ID and Address.\nPlease note that one customer can have multiple addresses.</p>\n<p>I am executing 2 queries via JDBCTemplate. One to get records from first table and other to get records from 2nd table.</p>\n<p>how do i join the output to queries to one domain object Customer and send response. What options i have if i dont want to use JOIN in my SQL query and want to execute the 2 queries separately?</p>\n<p>Thanks</p>\n<p>Tried storing output of first query into a Map and then want to join in with output of 2nd query but not sure if it is the right approach?</p>\n"},{"tags":["java","ffmpeg","video-streaming","h.264","javacv"],"comments":[{"owner":{"account_id":1178807,"reputation":87099,"user_id":5726027,"display_name":"Gyan"},"score":2,"creation_date":1677135371,"post_id":75540855,"comment_id":133278801,"body_markdown":"This appears to be fragmented MP4 rather than a raw H264 bitstream with some proprietary data at front. The fragment starts at `0x10d` (4th byte before `moof`). The video payload starts at `0x17d` but if you ignore the container, you will lose timing info.","body":"This appears to be fragmented MP4 rather than a raw H264 bitstream with some proprietary data at front. The fragment starts at <code>0x10d</code> (4th byte before <code>moof</code>). The video payload starts at <code>0x17d</code> but if you ignore the container, you will lose timing info."},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1677135479,"post_id":75540855,"comment_id":133278823,"body_markdown":"could you please explain more.. regarding the decode part (this is a live stream)","body":"could you please explain more.. regarding the decode part (this is a live stream)"},{"owner":{"account_id":1178807,"reputation":87099,"user_id":5726027,"display_name":"Gyan"},"score":0,"creation_date":1677135949,"post_id":75540855,"comment_id":133278927,"body_markdown":"It has syntax elements of an MP4 like moof, mdat..etc. To decode the container, you will need a MP4 demuxer. To decode just the H264, locate `mdat` in each packet and start decode from next byte.","body":"It has syntax elements of an MP4 like moof, mdat..etc. To decode the container, you will need a MP4 demuxer. To decode just the H264, locate <code>mdat</code> in each packet and start decode from next byte."},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1677136206,"post_id":75540855,"comment_id":133278983,"body_markdown":"hi @gyan can u suggest some java based libraries to demux/decode the bitstream. an example code would be great","body":"hi @gyan can u suggest some java based libraries to demux/decode the bitstream. an example code would be great"},{"owner":{"account_id":1178807,"reputation":87099,"user_id":5726027,"display_name":"Gyan"},"score":0,"creation_date":1677136459,"post_id":75540855,"comment_id":133279042,"body_markdown":"Not familiar with Java packages.","body":"Not familiar with Java packages."},{"owner":{"account_id":3072614,"reputation":12307,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":1,"creation_date":1677161777,"post_id":75540855,"comment_id":133286169,"body_markdown":"hexdump looks like it contains length-prefixed strings/blobs. initial 01h, no clue why, but then follow frames: [00 00 00 04h]&quot;H264&quot; and [00 00 00 24h]&quot;&lt;some guid&gt;&quot; and [D4h]&quot;&lt;some json&gt;&quot; and [3F 50h]&quot;&lt;mp4/mov file&gt;&quot; -- try dumping that. it&#39;s probably a MOV or MP4 file (mp4 is a subset of mov).","body":"hexdump looks like it contains length-prefixed strings/blobs. initial 01h, no clue why, but then follow frames: [00 00 00 04h]&quot;H264&quot; and [00 00 00 24h]&quot;&lt;some guid&gt;&quot; and [D4h]&quot;&lt;some json&gt;&quot; and [3F 50h]&quot;&lt;mp4/mov file&gt;&quot; -- try dumping that. it&#39;s probably a MOV or MP4 file (mp4 is a subset of mov)."},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1677169019,"post_id":75540855,"comment_id":133288811,"body_markdown":"I need to transmit these byte stream to any playable format and then transmit to my frontend, any possible solutions pls.","body":"I need to transmit these byte stream to any playable format and then transmit to my frontend, any possible solutions pls."},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1677169281,"post_id":75540855,"comment_id":133288910,"body_markdown":"the GUID, in the dump is signalR socked connection ID thru which the byte stream is received. please guide me through some possible ways to decode the mov/mp4 to any playable format","body":"the GUID, in the dump is signalR socked connection ID thru which the byte stream is received. please guide me through some possible ways to decode the mov/mp4 to any playable format"},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1677338243,"post_id":75540855,"comment_id":133320018,"body_markdown":"@al_mukthar **(1)** You need to show a full hex sequence of bytes for a packet like: `01 00 00 00 04 48 32 36 34 ...etc` otherwise your currently shown hex dump (with the offsets and the UTF texts included) is un-usable to us for testing. **(2)** Show a hex sequence for the first received packet, it should have the main metadata. **(3)** Show a hex sequence for the 2nd received packet, it should have a keyframe&#39;s data (needed to display other pictures). **(4)** You only need `start += 4;` at the code ending, the second While loop is not needed. **(5)** How do you play MP4 files in Java?","body":"@al_mukthar <b>(1)</b> You need to show a full hex sequence of bytes for a packet like: <code>01 00 00 00 04 48 32 36 34 ...etc</code> otherwise your currently shown hex dump (with the offsets and the UTF texts included) is un-usable to us for testing. <b>(2)</b> Show a hex sequence for the first received packet, it should have the main metadata. <b>(3)</b> Show a hex sequence for the 2nd received packet, it should have a keyframe&#39;s data (needed to display other pictures). <b>(4)</b> You only need <code>start += 4;</code> at the code ending, the second While loop is not needed. <b>(5)</b> How do you play MP4 files in Java?"},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1677350099,"post_id":75540855,"comment_id":133322031,"body_markdown":"@VC.One I have updated the question to include the 1 and 2 received packet hex. also I have modified the code to read only MDAT as per Gyans comment above to get only H264 stream. answering your 5th question, I don&#39;t want to play the video in Java. I need to transmit the stream(H264) or somehow to my frontend to play","body":"@VC.One I have updated the question to include the 1 and 2 received packet hex. also I have modified the code to read only MDAT as per Gyans comment above to get only H264 stream. answering your 5th question, I don&#39;t want to play the video in Java. I need to transmit the stream(H264) or somehow to my frontend to play"},{"owner":{"account_id":3072614,"reputation":12307,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":0,"creation_date":1677351063,"post_id":75540855,"comment_id":133322191,"body_markdown":"then DON&#39;T do any of that, and simply take that entire MP4 file and serve it","body":"then DON&#39;T do any of that, and simply take that entire MP4 file and serve it"},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1677356333,"post_id":75540855,"comment_id":133323097,"body_markdown":"@ChristophRackwitz that doesnt seems working, i served the bytes[] array received as is to the frontend through a websocket and tried playing the stream, it doesnt work.. any possible ways to decode just video frames. Im ok with losing the audio","body":"@ChristophRackwitz that doesnt seems working, i served the bytes[] array received as is to the frontend through a websocket and tried playing the stream, it doesnt work.. any possible ways to decode just video frames. Im ok with losing the audio"},{"owner":{"account_id":3072614,"reputation":12307,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":0,"creation_date":1677378542,"post_id":75540855,"comment_id":133325677,"body_markdown":"can&#39;t see what you did, can&#39;t debug it. this should not be construed as an offer to debug java code or anything running in a browser. just review [mre] and remember that &quot;it doesn&#39;t work&quot; is never debuggable.","body":"can&#39;t see what you did, can&#39;t debug it. this should not be construed as an offer to debug java code or anything running in a browser. just review <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and remember that &quot;it doesn&#39;t work&quot; is never debuggable."},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1677754490,"post_id":75540855,"comment_id":133401932,"body_markdown":"@al_mukthar **(1)** Although you have an accepted Answer, I suspect you do not need to actually extract the H.264 out of MP4 (but your wording makes it seem like that&#39;s what you need to do). You might be creating harder work than needed for displaying frames. **(2)** Try connecting to the camera before it transmits so that the first frame is maybe a keyframe, if you connect later than camera&#39;s first transmitted packet then you might miss the keyframe.","body":"@al_mukthar <b>(1)</b> Although you have an accepted Answer, I suspect you do not need to actually extract the H.264 out of MP4 (but your wording makes it seem like that&#39;s what you need to do). You might be creating harder work than needed for displaying frames. <b>(2)</b> Try connecting to the camera before it transmits so that the first frame is maybe a keyframe, if you connect later than camera&#39;s first transmitted packet then you might miss the keyframe."}],"answers":[{"tags":[],"owner":{"account_id":325168,"reputation":7844,"user_id":646173,"display_name":"Markus Schumann"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677610031,"creation_date":1677610031,"answer_id":75596149,"question_id":75540855,"body_markdown":"Your hex dump looks like a partial fragmented MP4 prefixed with some JSON.\r\nTypically H.264 uses inter frame compression.\r\nSo not every frame is a full frame but just the differences between two frames.\r\nTherefore you can&#39;t decode H.264 at arbitrary points.\r\nYou need to look for an IDR (instant decoder refresh) frame in your stream.\r\nIDR frames may only be transmitted every 10-100 frames.\r\nNow I am looking at your &#39;mdat&#39; hex dump\r\n\r\n00 00 3E E8 6D 64 61 74 00 00 3E DC 41\r\n\r\n00 00 3E E8 : size of &#39;mdat&#39;\r\n\r\n6D 64 61 74 : &#39;mdat&#39;\r\n\r\n00 00 3E DC : size of the NAL unit (part of the H.264) stream\r\n\r\n41 : indicates NAL unit type of &#39;1&#39; (lower 4 bits indicate NAL unit type)\r\n\r\nNAL unit of type &#39;1&#39; is a coded slice of a non-IDR picture.\r\n\r\nSo your &#39;mdat&#39; does not contain an IDR (or key) frame therefore it is not decodable.\r\n\r\nIf you look at your JSON - you&#39;ll get another datapoint indicating the lack of a keyframe (&quot;IsKeyFrame&quot;:false).\r\n\r\n\r\n    {\r\n\t&quot;IsInit&quot;:false,\r\n\t&quot;IsAudio&quot;:false,\r\n\t&quot;TotalSeconds&quot;:0.06,\r\n\t&quot;FrameTime&quot;:&quot;2023-02-23T04:21:53.531Z&quot;,\r\n\t&quot;SequenceId&quot;:1,\r\n\t&quot;BaseDecodeTime&quot;:26587,\r\n\t&quot;MediaTime&quot;:26587,\r\n\t&quot;IsFrameHidden&quot;:false,\r\n\t&quot;IsKeyFrame&quot;:false,\r\n\t&quot;Id&quot;:445,&quot;Generation&quot;:1\r\n    }\r\n\r\nSo you could modify your code and start decoding once you receive and IDR or key frame.\r\nBut there is potentially another issue.\r\nYou may need certain metadata to prime the H.264 decoder that you typically find in &#39;moov&#39; (and not &#39;moof&#39;) part of the fragmented mp4.\r\n\r\nThe stream metadata is called Sequence Parameter Set (SPS) and Picture Parameter Set (PPS).\r\nIt is legal to omit SPS and PPS in &#39;mdat&#39; since it is usually factored out into the &#39;moov&#39;.\r\n\r\nHanding just the &#39;mdat&#39; to a H.264 decoder may not work if SPS/PPS is missing.\r\n\r\n\r\nIn any case - if your IDR frames are prefixed with SPS/PPS - you still have to remove the size field(s) from the &#39;mdat&#39; and replace them with start codes (00 00 00 01)\r\n\r\nEssentially you have to convert the mp4-style H.264 stream from &#39;mdat&#39; into a &#39;AnnexB&#39;-style before feeding it into a decoder:\r\n\r\nYour &#39;mdat&#39;:\r\n\r\n    &#39;mdat&#39; = &lt;size&gt; data[0] | &lt;size&gt; data[1] | ... | &lt;size&gt; data[n] |\r\n\r\nReplace the size with a start code and break the multiple Access Units into individual Access Units.\r\n\r\nRequired decoder input:\r\n\r\n    00 00 00 01 data[0]\r\n    00 00 00 01 data[1]\r\n    ...\r\n    00 00 00 01 data[n]\r\n\r\nIf your &#39;mdat&#39; does not contain SPS/PPS then your best bet is to wait or request the &#39;moov&#39; or init part of the fragmented mp4 and hand the complete fragmented mp4 to ffmpeg.\r\n\r\nI am guessing that the &#39;moov&#39; or init part of the fragmented MP4 will be prefixed with the JSON member (&quot;IsInit&quot;:true).\r\n\r\nA previous answer https://stackoverflow.com/questions/73036143/decoding-h264-stream-always-returns-mf-e-transform-need-more-input/73085083#73085083\r\n\r\nlinks a self contained example parsing &#39;mdat&#39; and handing it to Media Foundation for decoding.\r\n","title":"Decode a proprietary H264 network video stream","body":"<p>Your hex dump looks like a partial fragmented MP4 prefixed with some JSON.\nTypically H.264 uses inter frame compression.\nSo not every frame is a full frame but just the differences between two frames.\nTherefore you can't decode H.264 at arbitrary points.\nYou need to look for an IDR (instant decoder refresh) frame in your stream.\nIDR frames may only be transmitted every 10-100 frames.\nNow I am looking at your 'mdat' hex dump</p>\n<p>00 00 3E E8 6D 64 61 74 00 00 3E DC 41</p>\n<p>00 00 3E E8 : size of 'mdat'</p>\n<p>6D 64 61 74 : 'mdat'</p>\n<p>00 00 3E DC : size of the NAL unit (part of the H.264) stream</p>\n<p>41 : indicates NAL unit type of '1' (lower 4 bits indicate NAL unit type)</p>\n<p>NAL unit of type '1' is a coded slice of a non-IDR picture.</p>\n<p>So your 'mdat' does not contain an IDR (or key) frame therefore it is not decodable.</p>\n<p>If you look at your JSON - you'll get another datapoint indicating the lack of a keyframe (&quot;IsKeyFrame&quot;:false).</p>\n<pre><code>{\n&quot;IsInit&quot;:false,\n&quot;IsAudio&quot;:false,\n&quot;TotalSeconds&quot;:0.06,\n&quot;FrameTime&quot;:&quot;2023-02-23T04:21:53.531Z&quot;,\n&quot;SequenceId&quot;:1,\n&quot;BaseDecodeTime&quot;:26587,\n&quot;MediaTime&quot;:26587,\n&quot;IsFrameHidden&quot;:false,\n&quot;IsKeyFrame&quot;:false,\n&quot;Id&quot;:445,&quot;Generation&quot;:1\n}\n</code></pre>\n<p>So you could modify your code and start decoding once you receive and IDR or key frame.\nBut there is potentially another issue.\nYou may need certain metadata to prime the H.264 decoder that you typically find in 'moov' (and not 'moof') part of the fragmented mp4.</p>\n<p>The stream metadata is called Sequence Parameter Set (SPS) and Picture Parameter Set (PPS).\nIt is legal to omit SPS and PPS in 'mdat' since it is usually factored out into the 'moov'.</p>\n<p>Handing just the 'mdat' to a H.264 decoder may not work if SPS/PPS is missing.</p>\n<p>In any case - if your IDR frames are prefixed with SPS/PPS - you still have to remove the size field(s) from the 'mdat' and replace them with start codes (00 00 00 01)</p>\n<p>Essentially you have to convert the mp4-style H.264 stream from 'mdat' into a 'AnnexB'-style before feeding it into a decoder:</p>\n<p>Your 'mdat':</p>\n<pre><code>'mdat' = &lt;size&gt; data[0] | &lt;size&gt; data[1] | ... | &lt;size&gt; data[n] |\n</code></pre>\n<p>Replace the size with a start code and break the multiple Access Units into individual Access Units.</p>\n<p>Required decoder input:</p>\n<pre><code>00 00 00 01 data[0]\n00 00 00 01 data[1]\n...\n00 00 00 01 data[n]\n</code></pre>\n<p>If your 'mdat' does not contain SPS/PPS then your best bet is to wait or request the 'moov' or init part of the fragmented mp4 and hand the complete fragmented mp4 to ffmpeg.</p>\n<p>I am guessing that the 'moov' or init part of the fragmented MP4 will be prefixed with the JSON member (&quot;IsInit&quot;:true).</p>\n<p>A previous answer <a href=\"https://stackoverflow.com/questions/73036143/decoding-h264-stream-always-returns-mf-e-transform-need-more-input/73085083#73085083\">Decoding H264 Stream Always Returns MF_E_TRANSFORM_NEED_MORE_INPUT</a></p>\n<p>links a self contained example parsing 'mdat' and handing it to Media Foundation for decoding.</p>\n"},{"comments":[{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1677783386,"post_id":75614199,"comment_id":133410541,"body_markdown":"Thanks for your answer, with code example.. i will accept this","body":"Thanks for your answer, with code example.. i will accept this"},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1677785235,"post_id":75614199,"comment_id":133410994,"body_markdown":"Thanks. **(1)** Please re-test the code. I noticed a small mistake (which you might have fixed anyway) about the **copyEndPos**. It should have been the last byte position of packet bytes but I had temporarily put the copy size (instead of a copy position). Fixed now. **(2)** What is your front-end (a web page)? Also are you able to get a keyframe? the goal is to get a video frame displaying...","body":"Thanks. <b>(1)</b> Please re-test the code. I noticed a small mistake (which you might have fixed anyway) about the <b>copyEndPos</b>. It should have been the last byte position of packet bytes but I had temporarily put the copy size (instead of a copy position). Fixed now. <b>(2)</b> What is your front-end (a web page)? Also are you able to get a keyframe? the goal is to get a video frame displaying..."},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1677812663,"post_id":75614199,"comment_id":133415708,"body_markdown":"Ok, thanks for clariifcation.my frontend is angular. My goal is to get the video playing at the frontend","body":"Ok, thanks for clariifcation.my frontend is angular. My goal is to get the video playing at the frontend"},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1677952261,"post_id":75614199,"comment_id":133440369,"body_markdown":"I don&#39;t use Angular. I ask because I need to know what will decode the video (what player API or component) to check if that thing can play MP4 data as you have from Genetec. Anyways from research I see it uses HTML5 elements like `&lt;img&gt;` etc, so... **(1)** Are you actually using a `&lt;video&gt;` tag to play videos in your Angular app? **(2)** Does Genetec have a config/settings to set how often a keyframe is transmitted (_eg:_ test by setting a keyframe every 1 second) **(3)** Your H.264 stream has a type setting of **avc3**. Can you change that to **avc1** anywhere in the settings?","body":"I don&#39;t use Angular. I ask because I need to know what will decode the video (what player API or component) to check if that thing can play MP4 data as you have from Genetec. Anyways from research I see it uses HTML5 elements like <code>&lt;img&gt;</code> etc, so... <b>(1)</b> Are you actually using a <code>&lt;video&gt;</code> tag to play videos in your Angular app? <b>(2)</b> Does Genetec have a config/settings to set how often a keyframe is transmitted (<i>eg:</i> test by setting a keyframe every 1 second) <b>(3)</b> Your H.264 stream has a type setting of <b>avc3</b>. Can you change that to <b>avc1</b> anywhere in the settings?"},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1677952678,"post_id":75614199,"comment_id":133440436,"body_markdown":"The issue with AVC3 is that it means the SPS and PPS are sent with a keyframe. The PPS (Picture Parameter Settings) and the SPS (Sequence Parameter Settings) are needed to know the width/height and other important displaying and decoding details. AVC1 puts these SPS/PPS in the MOOV (so it&#39;s in first packet), AVC3 means you will need a keyframe in one of your packets otherwise no picture can be displayed.","body":"The issue with AVC3 is that it means the SPS and PPS are sent with a keyframe. The PPS (Picture Parameter Settings) and the SPS (Sequence Parameter Settings) are needed to know the width/height and other important displaying and decoding details. AVC1 puts these SPS/PPS in the MOOV (so it&#39;s in first packet), AVC3 means you will need a keyframe in one of your packets otherwise no picture can be displayed."},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":1,"creation_date":1678206298,"post_id":75614199,"comment_id":133486547,"body_markdown":"I have made the required modification, to remove the extra header added by the genetic and the custom object metadata by their size, still the packets sent to frontend are not getting played. I tried dumping the packets to a file and ran in VLC, it shows corrupted NAL packets. I have seen that my keyframe comes in each second packet from the socket. please have a look at my modified packet dump","body":"I have made the required modification, to remove the extra header added by the genetic and the custom object metadata by their size, still the packets sent to frontend are not getting played. I tried dumping the packets to a file and ran in VLC, it shows corrupted NAL packets. I have seen that my keyframe comes in each second packet from the socket. please have a look at my modified packet dump"},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":1,"creation_date":1678206319,"post_id":75614199,"comment_id":133486557,"body_markdown":"1 packet =&gt; https://pastebin.com/embed_js/b9HnhxGP","body":"1 packet =&gt; <a href=\"https://pastebin.com/embed_js/b9HnhxGP\" rel=\"nofollow noreferrer\">pastebin.com/embed_js/b9HnhxGP</a>"},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":1,"creation_date":1678206476,"post_id":75614199,"comment_id":133486611,"body_markdown":"2nd packet (last part ommitted) =&gt; https://pastebin.com/embed_js/gdHMeLX0","body":"2nd packet (last part ommitted) =&gt; <a href=\"https://pastebin.com/embed_js/gdHMeLX0\" rel=\"nofollow noreferrer\">pastebin.com/embed_js/gdHMeLX0</a>"},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1678264774,"post_id":75614199,"comment_id":133497365,"body_markdown":"Excellent. Thanks for updating. Your newly edited packets are in a playable structure now. **(1)** From each packet: If you simply **remove the first four bytes** then the rest is a correct chunk. Test that edit in VLC. To fix in your own code for removing the custom Object metadata, it should simply **add a +4** to the final **Size** of total bytes to remove. PS: The example Java code was already doing this fix (_see:_ line  `//# skip next 4 bytes`). **(2)** I will update later today (after testing) with a final solution to display frames in Angular.","body":"Excellent. Thanks for updating. Your newly edited packets are in a playable structure now. <b>(1)</b> From each packet: If you simply <b>remove the first four bytes</b> then the rest is a correct chunk. Test that edit in VLC. To fix in your own code for removing the custom Object metadata, it should simply <b>add a +4</b> to the final <b>Size</b> of total bytes to remove. PS: The example Java code was already doing this fix (<i>see:</i> line  <code>&#47;&#47;# skip next 4 bytes</code>). <b>(2)</b> I will update later today (after testing) with a final solution to display frames in Angular."},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1678264980,"post_id":75614199,"comment_id":133497423,"body_markdown":"PS: (I will delete this comment soon, **do not reply this**, just sharing a personal thought): Basically your code is now doing what `ffmpeg -i genetec.mp4 -c copy normal.mp4` would have achieved. However that command won&#39;t work in FFmpeg, because it doesn&#39;t understand the Genetec header and will assume the input MP4 is corrupt. That means your code is doing what FFmpeg cannot do. My point is: It&#39;s not impossible to create your own solutions. Also this byte-slice process has given you same skills to (a) Extract images from MP3, (b) Repair corrupt MP4 (no battery during recording), (c) Trim MP4","body":"PS: (I will delete this comment soon, <b>do not reply this</b>, just sharing a personal thought): Basically your code is now doing what <code>ffmpeg -i genetec.mp4 -c copy normal.mp4</code> would have achieved. However that command won&#39;t work in FFmpeg, because it doesn&#39;t understand the Genetec header and will assume the input MP4 is corrupt. That means your code is doing what FFmpeg cannot do. My point is: It&#39;s not impossible to create your own solutions. Also this byte-slice process has given you same skills to (a) Extract images from MP3, (b) Repair corrupt MP4 (no battery during recording), (c) Trim MP4"},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1678273000,"post_id":75614199,"comment_id":133499467,"body_markdown":"I will update you after removing the first 4 bytes from each packet.","body":"I will update you after removing the first 4 bytes from each packet."},{"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"score":0,"creation_date":1678373780,"post_id":75614199,"comment_id":133523164,"body_markdown":"I&#39;ve tested things in Chrome browser and yes your file (after the first 4-byte removal editing) should play in a HTML5 `&lt;video&gt;` tag. I suspect VLC doesn&#39;t like the H.264 part to be in AVC3 format. Angular uses the `&lt;video&gt;` tag, so it should work there too.","body":"I&#39;ve tested things in Chrome browser and yes your file (after the first 4-byte removal editing) should play in a HTML5 <code>&lt;video&gt;</code> tag. I suspect VLC doesn&#39;t like the H.264 part to be in AVC3 format. Angular uses the <code>&lt;video&gt;</code> tag, so it should work there too."},{"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"score":0,"creation_date":1678428759,"post_id":75614199,"comment_id":133534004,"body_markdown":"Great &#128077;, Things started working after removing the first 4 bytes from my last shown packets in hex dump. Can you please tell me what those 4 bytes meant and why is their removal made everything work ?","body":"Great 👍, Things started working after removing the first 4 bytes from my last shown packets in hex dump. Can you please tell me what those 4 bytes meant and why is their removal made everything work ?"}],"tags":[],"owner":{"account_id":2348025,"reputation":15224,"user_id":2057709,"display_name":"VC.One"},"comment_count":13,"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1677784713,"creation_date":1677753111,"answer_id":75614199,"question_id":75540855,"body_markdown":"&gt; _&quot;I have incoming byte streams **probably encoded in H264** from a Genetec\r\n&gt; camera...&quot;_&lt;br&gt; _&quot;I need to decode the **incoming H264 streams** to transmit the video to my frontend...&quot;_\r\n\r\n**Note**: If your _&quot;frontend&quot;_ playback system can play MP4 then you already have a playable file as given. There is no need to extract H.264 bytes from within MP4 bytes, or convert bytes to AnnexB format, or adding Start-codes, or skipping audio frames, etc. Simply remove the starting Genetec header and the rest of data is a playable MP4.\r\n\r\nThis answer below is for when the playback system accepts chunked MP4 data (H.264 contained in MP4).\r\nIf the player expects actual raw H.264 frames then for extraction: see the Answer by [Markus Schumann](https://stackoverflow.com/a/75596149/2057709).\r\n\r\n&lt;h4&gt; ## Shortest version: &lt;/h4&gt;\r\n\r\nFrom each packet:\r\n\r\n- At offset `[49]` read a skippable _&quot;Size&quot;_ from the 32-bit integer (is in Big-Endian format).\r\n- MP4 data begins at `int mp4_data_pos = (49 + skipSize);`.\r\n- Extract MP4 data parts only, and use them for testing as video playback.\r\n- In MP4 data: `[moov]` is metadata and then chunks are `[moof+mdat]` ... `[moof+mdat]`.\r\n- Find **moov** as: `0x6D6F6F76`, find **moof** as: `0x6D6F6F66`, find **mdat** as: `0x6D646174`.\r\n- Get a size of each atom by reading a 32-bit integer from the previous four bytes.&lt;br&gt; (_eg:_ `int size_mdat = read_32_bits_from( pos_mdat - 4);` since one array slot holds 8 bits).\r\n- First `[moof + mdat]` chunk after the metadata part must contain a keyframe for display.\r\n- Find keyframe through checking for a frame type **5** with:&lt;br&gt;\r\n`int frame_type = ( byteArray[ mdat_pos + 8 ] &amp; 0x1F );`&lt;br&gt;\r\n(_NB 1:_ This will only find a keyframe if it&#39;s the first frame in a chunk (_eg:_ a `[moof + mdat]` package).&lt;br&gt;\r\n(_NB 2:_ It&#39;s possible your Genetec device outputs a keyframe later (_eg:_ every 25th frame) or else maybe it only emits a keyframe at device start-up? Check for such an issue if not getting a keyframe.\r\n- If testing with an HTML5 video tag, then your codec setup is: `avc1.640028`.\r\n- If testing as file then save N-amount of &quot;MP4 data&quot; parts as one file (_ie:_ file is the joined MP4 chunks).\r\n\r\n&lt;h4&gt; ## Short version: &lt;/h4&gt;\r\n\r\n[ to add later: Image of header sections to skip + with 32-bit integers highlighted ]\r\n\r\nIn each packet...\r\n\r\n- Skip ahead, past the first 49 bytes.\r\n- At offset 49, read a 32-bit integer (_ie:_ to update some &quot;skipSize&quot; variable).\r\n- Skip ahead (past some Object bytes) by the new amount from skipSize variable.\r\n- MP4 data begins here (_eg:_ `mp4_begins_pos = (49 + skipSize);`.\r\n\r\nSome notes about MP4 data in packets:\r\n\r\n- MP4 data is up to end of packet, and may have a larger size than the current packet size.\r\n- MP4 data which is larger than the packet&#39;s own size will continue in the next packet.\r\n- in bytes: `moov` atom has required MP4 metadata, and `moof` atom is a playable MP4 chunk.\r\n- in bytes: an MP4 atom begins with a SIZE (32-bits or 4 bytes), followed by atom NAME.\r\n- in bytes: Copy all atoms (in order of appearance) by their SIZEs into a new bytes array.&lt;br&gt; This array can be saved as a file or sent to a decoder for playback.\r\n\r\n**(Option A)** For **online playback** (_using HTML5 video tag_): &lt;br&gt;Send the array of &quot;**MP4 data**&quot; parts only to your front-end.&lt;br&gt; \r\n_(meaning all packet bytes **minus the first 49 bytes** and also **minus the Object bytes** (by its **size**))_.\r\n\r\nWeb playback means choosing either: &lt;br&gt;\r\n- Using [MediaSource Extensions](https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API) API to manually feed received chunks to the browser&#39;s MPEG decoder.\r\n- Using a server-side script as tag&#39;s `src`, where the script &quot;pipes&quot; the MP4 data back into the video tag.\r\n\r\n- Pre-saving the chunks on server as they arrive, then using HLS [Live Playlist](https://developer.apple.com/documentation/http_live_streaming/example_playlists_for_http_live_streaming/live_playlist_sliding_window_construction) format to serve frontend clients.\r\n\r\nFrom the STSD atom I can see you have: H.264 &quot;High&quot; profile @ level 4.0 (or **avc1.640028**).\t\r\n\r\n    type= video/mp4; codecs= &quot;avc1.640028&quot;;\r\n\r\n**(Option B)** To **save as a file** for quick testing: &lt;br&gt;**Concat** (join) your required N-amount of &quot;**MP4 data**&quot; parts into one long array, then save that array as a file. Test the new MP4 file from your storage folder in a player like [VLC Media Player](https://www.videolan.org/vlc/index.en_GB.html).\r\n\r\n&lt;h4&gt; ## Long version: &lt;/h4&gt;\r\n\r\nThe format of Genetec&#39;s MP4 header is easy enough to understand:\r\n\r\n**(1)** Each packet begins with some **49 bytes** of skippable values. \r\n\r\n- **(a)** Each packet&#39;s **first byte** value is **0x01**.\r\n  - Confirm with a `if (byteArray[0] == 1) { /* is OK packet */ }`.\r\n  - Else assume there is some packet corruption. Skip/ignore such packets.\r\n\r\n- **(b)** Followed by 32-int for size of data, and then data itself: is type **String** (_eg:_ `H264`).\r\n  - example packet-1 bytes: `00 00 00 04` (=4) then `48 32 36 34` (=H264)\r\n\r\n- **(c)** Followed by 32-int size for possible GUUID (seems to be enough hex values for 16 bytes).\r\n  - example packet-1 bytes: `00 00 00 24` (=36) then `XXXX-XX-XX-etc` style hex values.\r\n\r\nThis above data seems to be always 49 bytes. Confirm by checking other packets, (is there a pattern of 49 bytes that are: a string of &quot;H264&quot; followed by a sequence of &quot;XXXX-XX-XX-etc&quot; style values?). \r\n\r\n\r\n- **Skip** past these 49 bytes (of Genetec&#39;s custom header bytes). \r\n- Skip range is `[byte 0] ... [byte 48]`, since these bytes are not needed for playback.\r\n\r\n**(2)** After skipping, there is an [Object](https://www.w3schools.com/java/java_classes.asp) (added by Genetec) of side metadata (_eg_: `{&quot;IsAudio&quot;:false} `).\r\n\r\n- **(a)** From **offset 49** onwards, read a 32-bit integer for the **size** (bytes length) of the Object.\r\n  - example packet-1 bytes: `00 00 00 C8` == is **size** of 36 bytes\r\n- **(b)** Skip the Object bytes by using the found size (to land at example position: **offset N**).\r\n  - These custom Object&#39;s bytes are not needed for playback.\r\n\r\n**(3)** At **offset N**, the actual MP4 data begins.\r\n\r\nHere is a starting example code to check the packet for MP4 data size to extract for playback.\r\n\r\nUse the **read_int32** function that I&#39;ve provided to get a 32-bit integer from some Array position.\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class Main \r\n    {\r\n    \t//# Vars for MP4 data\r\n    \tpublic static int size_MP4_data = 0;\r\n    \tpublic static int size_expected_MP4_data = 0;\r\n    \tpublic static int size_received_MP4_data = 0;\r\n        public static int offset_MP4_data = 0;\r\n        \r\n        public static boolean need_more_MP4_data = false;\r\n         \r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\t//# Example Array to represent a received input Packet\r\n    \t\t//# Array contents are from the first 320 bytes of your first example packet\r\n    \t\t//# See full bytes at: https://pastebin.com/embed_js/3Ca8ZDFk \r\n    \t\tint[] bytes_Packet =\t{\r\n    \r\n    \t\t\t\t\t\t\t\t\t0x01, 0x00, 0x00, 0x00, 0x04, 0x48, 0x32, 0x36, 0x34, 0x00, 0x00, 0x00, 0x24, 0x39, 0x33, 0x65, \r\n    \t\t\t\t\t\t\t\t\t0x63, 0x35, 0x39, 0x31, 0x30, 0x2D, 0x65, 0x65, 0x35, 0x38, 0x2D, 0x34, 0x39, 0x37, 0x32, 0x2D, \r\n    \t\t\t\t\t\t\t\t\t0x61, 0x30, 0x66, 0x66, 0x2D, 0x32, 0x65, 0x62, 0x33, 0x61, 0x33, 0x61, 0x34, 0x32, 0x66, 0x35, \r\n    \t\t\t\t\t\t\t\t\t0x66, 0x00, 0x00, 0x00, 0xC8, 0x7B, 0x22, 0x49, 0x73, 0x49, 0x6E, 0x69, 0x74, 0x22, 0x3A, 0x74, \r\n    \t\t\t\t\t\t\t\t\t0x72, 0x75, 0x65, 0x2C, 0x22, 0x49, 0x73, 0x41, 0x75, 0x64, 0x69, 0x6F, 0x22, 0x3A, 0x66, 0x61, \r\n    \t\t\t\t\t\t\t\t\t0x6C, 0x73, 0x65, 0x2C, 0x22, 0x54, 0x6F, 0x74, 0x61, 0x6C, 0x53, 0x65, 0x63, 0x6F, 0x6E, 0x64, \r\n    \t\t\t\t\t\t\t\t\t0x73, 0x22, 0x3A, 0x30, 0x2E, 0x30, 0x2C, 0x22, 0x46, 0x72, 0x61, 0x6D, 0x65, 0x54, 0x69, 0x6D, \r\n    \t\t\t\t\t\t\t\t\t0x65, 0x22, 0x3A, 0x22, 0x32, 0x30, 0x32, 0x33, 0x2D, 0x30, 0x32, 0x2D, 0x32, 0x35, 0x54, 0x31, \r\n    \t\t\t\t\t\t\t\t\t0x36, 0x3A, 0x35, 0x30, 0x3A, 0x32, 0x37, 0x2E, 0x32, 0x36, 0x31, 0x5A, 0x22, 0x2C, 0x22, 0x53, \r\n    \t\t\t\t\t\t\t\t\t0x65, 0x71, 0x75, 0x65, 0x6E, 0x63, 0x65, 0x49, 0x64, 0x22, 0x3A, 0x31, 0x2C, 0x22, 0x42, 0x61, \r\n    \t\t\t\t\t\t\t\t\t0x73, 0x65, 0x44, 0x65, 0x63, 0x6F, 0x64, 0x65, 0x54, 0x69, 0x6D, 0x65, 0x22, 0x3A, 0x30, 0x2C, \r\n    \t\t\t\t\t\t\t\t\t0x22, 0x4D, 0x65, 0x64, 0x69, 0x61, 0x54, 0x69, 0x6D, 0x65, 0x22, 0x3A, 0x30, 0x2C, 0x22, 0x49, \r\n    \t\t\t\t\t\t\t\t\t0x73, 0x46, 0x72, 0x61, 0x6D, 0x65, 0x48, 0x69, 0x64, 0x64, 0x65, 0x6E, 0x22, 0x3A, 0x66, 0x61,\r\n    \t\t\t\t\t\t\t\t\t0x6C, 0x73, 0x65, 0x2C, 0x22, 0x49, 0x73, 0x4B, 0x65, 0x79, 0x46, 0x72, 0x61, 0x6D, 0x65, 0x22, \r\n    \t\t\t\t\t\t\t\t\t0x3A, 0x66, 0x61, 0x6C, 0x73, 0x65, 0x2C, 0x22, 0x49, 0x64, 0x22, 0x3A, 0x30, 0x2C, 0x22, 0x47,\r\n    \t\t\t\t\t\t\t\t\t0x65, 0x6E, 0x65, 0x72, 0x61, 0x74, 0x69, 0x6F, 0x6E, 0x22, 0x3A, 0x31, 0x7D, 0x00, 0x00, 0x02,\r\n    \t\t\t\t\t\t\t\t\t0xC4, 0x00, 0x00, 0x00, 0x1C, 0x66, 0x74, 0x79, 0x70, 0x64, 0x61, 0x73, 0x68, 0x00, 0x00, 0x00,\r\n    \t\t\t\t\t\t\t\t\t0x00, 0x69, 0x73, 0x6F, 0x6D, 0x64, 0x61, 0x73, 0x68, 0x6D, 0x70, 0x34, 0x31, 0x00, 0x00, 0x02, \r\n    \t\t\t\t\t\t\t\t\t0xA8, 0x6D, 0x6F, 0x6F, 0x76, 0x00, 0x00, 0x00, 0x78, 0x6D, 0x76, 0x68, 0x64, 0x01, 0x00, 0x00, \r\n    \t\t\t\t\t\t\t\t\t0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x1F, 0xEC, 0xD3, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x1F, 0xEC\r\n    \t\t\t\t\t\t\t\t  \r\n    \t\t\t\t\t\t\t\t};\r\n    \r\n    \t\t//# Process the packet to extract MP4 data\r\n    \t\tint[] data_MP4 = process_Packet( bytes_Packet ); //# returns a trimmed array\r\n    \t}\r\n        \r\n        static int[] process_Packet( int[] input ) \r\n    \t{\r\n    \t\t//# (optional) Confirm function code is running ....\r\n    \t\tSystem.out.println( &quot;## Checking received Packet byte values .... &quot; );\r\n    \t\t\r\n    \t\t//# NOTE: \r\n    \t\t//# &quot;size_header_Genetec&quot; is the mentioned &quot;skipSize&quot; variable equivalent.\r\n            //# it stores how much bytes length (size) to skip past to reach MP4 data.\r\n    \t\t\r\n            int temp_int = 0; //# temp number for counting\r\n            int size_total_packet = input.length; //# using size of &quot;input&quot; packet given to this function\r\n            int size_header_Genetec = 0;\r\n            \r\n            //# first check if this packet&#39;s MP4 data needs to be added to another previous packet&#39;s data to make a full (uncorrupt) chunk.\r\n            if( need_more_MP4_data == true)\r\n            {\r\n            \t//## to fix later (if needed)\r\n                //## solution: extract needed remainder and append to an existing array\r\n            }\r\n    \t\t\r\n    \t\t///////////////////////////////\r\n    \t\t//### Phase 1: Find MP4 attoms\r\n    \t\t///////////////////////////////\r\n    \t\t\r\n            //# Account for starting &quot;0x01&quot; byte\r\n            size_header_Genetec = 1;\r\n            \r\n            //# since the size is increased with a &quot;+=&quot; we can re-use\r\n            //# the newly increased &quot;size_header_Genetec&quot; value.\r\n            \r\n            //# get next size (usually String of 4 letters: &quot;H264&quot;)\r\n            temp_int = read_int32( input, size_header_Genetec );\r\n            size_header_Genetec += (temp_int + 4);\r\n            \r\n            //# get next size (usually a GUUID of hex values)\r\n            temp_int = read_int32( input, size_header_Genetec );\r\n            size_header_Genetec += (temp_int + 4);\r\n            \r\n            //# get next size (usually an Object of metadata values)\r\n            temp_int = read_int32( input, size_header_Genetec );\r\n            size_header_Genetec += (temp_int + 4);\r\n            \r\n            //# skip next 4 bytes\r\n            size_header_Genetec += 4;\r\n           \r\n    \t\t//# Update offset for later use ...\r\n    \t\toffset_MP4_data = size_header_Genetec;\r\n    \t\t\r\n    \t\t//# final check before next steps\r\n    \t\tSystem.out.println( &quot;- MP4 data begins at offset: [&quot; + offset_MP4_data + &quot;] until end of this packet&quot; );\r\n    \t\t\r\n    \t\t////////////////////////////////\r\n    \t\t//### Phase 2: Handle MP4 atoms\r\n    \t\t////////////////////////////////\r\n    \t\t\r\n    \t\t//# check atom NAME\r\n            temp_int = read_int32( input, offset_MP4_data + 4 );\r\n    \t\t\r\n    \t\tif( \r\n    \t\t\t//# IF atom &quot;name&quot; is one of these (as expected from your packet MP4 structure)...\r\n    \t\t\t( temp_int == 0x66747970 )    //# is &quot;ftyp&quot;\r\n    \t\t\t|| ( temp_int == 0x6D6F6F76 ) //# is &quot;moov&quot;\r\n    \t\t\t|| ( temp_int == 0x6D6F6F66 ) //# is &quot;moof&quot;\r\n    \t\t\t|| ( temp_int == 0x6D646174 ) //# is &quot;mdat&quot;\r\n    \t\t\t\r\n    \t\t)\r\n    \t\t{\r\n    \t\t\t//# THEN check all MP4 atoms in this packet for total size of MP4 data\r\n    \t\t\t//# do this by adding together all the atom sizes\r\n    \t\t\t//# note: if size is bigger than packet, then store data for completion with next packet\r\n    \t\t\t\r\n    \t\t\t//# add sizes of MP4 atoms...\r\n    \t\t\t\r\n    \t\t\ttemp_int = offset_MP4_data;\r\n    \t\t\t\t\r\n    \t\t\twhile(true)\r\n    \t\t\t{\r\n    \t\t\t\tsize_expected_MP4_data += read_int32( input, temp_int );\r\n    \t\t\t\ttemp_int = ( offset_MP4_data + size_expected_MP4_data );\r\n    \t\t\t\t\r\n    \t\t\t\t//# avoid reading past end of packet\r\n    \t\t\t\tif( size_expected_MP4_data &gt;= ( size_total_packet - offset_MP4_data ) )\r\n    \t\t\t\t{\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t/////////////////////////////////////////////////////////////////////////////\r\n    \t\t//# confirm MP4 data positions are correct (double-check by a hex view of same bytes)...\r\n    \t\tSystem.out.println( &quot;&gt;&gt; MP4 data offset: &quot; + offset_MP4_data );\r\n    \t\tSystem.out.println( &quot;&gt;&gt; MP4 data length is : &quot; + size_expected_MP4_data );\r\n            /////////////////////////////////////////////////////////////////////////////\r\n    \t\t\r\n    \t\t///////////////////////////////\r\n    \t\t//# Phase 3: Copy the MP4 data\r\n    \t\t///////////////////////////////\r\n    \t\t\r\n    \t\tint copyStartPos = offset_MP4_data;\r\n            int copyEndPos = (size_total_packet-1);\r\n    \t\t\r\n    \t\t//# prepare for when getting the next new packet\r\n    \t\t\r\n    \t\tif( size_expected_MP4_data &gt; ( size_total_packet - offset_MP4_data ) ) { need_more_MP4_data = true; }\r\n    \t\t\r\n    \t\tif( need_more_MP4_data == false )\r\n    \t\t{\r\n    \t\t\t//# reset the count for this new MP4 chunk\r\n    \t\t\t//size_received_MP4_data = 0;\r\n    \t\t\t//size_expected_MP4_data = 0;\r\n            }\r\n    \t\t\r\n    \t\t//# slice the Array to keep only the MP4 data parts\r\n    \t\treturn ( Arrays.copyOfRange( input , copyStartPos, copyEndPos) );\r\n    \t\t\r\n    \t}\r\n        \r\n        //# function expects:    \r\n        //# &quot;input&quot; = array to search, \r\n        //# &quot;pos&quot; = start position of reading a 4-byte sequence \r\n        static int read_int32( int[] input, int pos ) \r\n    \t{\r\n    \t\t\r\n    \t\t//# integer to hold combined 4-byte values as one result/number\r\n    \t\tint temp_int = 0;\r\n    \t\t\r\n    \t\t//# join the four byte values into &quot;temp_int&quot;\r\n    \t\ttemp_int = ( input[ pos+0 ] &lt;&lt; 24 );\r\n    \t\ttemp_int |= ( input[ pos+1 ] &lt;&lt; 16 );\r\n    \t\ttemp_int |= ( input[ pos+2 ] &lt;&lt; 8 );\r\n    \t\ttemp_int |= ( input[ pos+3 ] &lt;&lt; 0 );\r\n    \r\n    \t\treturn ( temp_int ); \r\n    \t\t\r\n    \t}\r\n    \t\t\r\n    }\r\n\r\nOptions for stream playback:\r\n\r\n**(a)** If your player expects MP4 data:\r\n - Your data is already playable in most video players\r\n - Send all data of each packet, after skipping past the first 49 bytes and also the `{ ... }` Object bytes.\r\n\r\n**(b)** If your player expects raw H.264 data (_ie:_ It does not play the MP4 data, only H.264 data):\r\n- Then you will have to extract each H.264 video frame from inside the MP4 data.\r\n- Your H.264 data is in **AVCC** format (_**.mp4**_), which means each frame comes with a &quot;size in bytes&quot; value.\r\n- Most players will expect raw H.264 to be in **AnnexB** format (_**.h264**_).&lt;br&gt; Replace all four bytes of frame&#39;s size with this four byte sequence `00 00 00 01`.&lt;br&gt;\r\n(correctly: Use `00 00 00 01` for SPS, PPS and Keyframes, then `00 00 01` for  other frames _eg:_ P-frames).\r\n\r\n\r\n\r\n","title":"Decode a proprietary H264 network video stream","body":"<blockquote>\n<p><em>&quot;I have incoming byte streams <strong>probably encoded in H264</strong> from a Genetec\ncamera...&quot;</em><br> <em>&quot;I need to decode the <strong>incoming H264 streams</strong> to transmit the video to my frontend...&quot;</em></p>\n</blockquote>\n<p><strong>Note</strong>: If your <em>&quot;frontend&quot;</em> playback system can play MP4 then you already have a playable file as given. There is no need to extract H.264 bytes from within MP4 bytes, or convert bytes to AnnexB format, or adding Start-codes, or skipping audio frames, etc. Simply remove the starting Genetec header and the rest of data is a playable MP4.</p>\n<p>This answer below is for when the playback system accepts chunked MP4 data (H.264 contained in MP4).\nIf the player expects actual raw H.264 frames then for extraction: see the Answer by <a href=\"https://stackoverflow.com/a/75596149/2057709\">Markus Schumann</a>.</p>\n<h4> ## Shortest version: </h4>\n<p>From each packet:</p>\n<ul>\n<li>At offset <code>[49]</code> read a skippable <em>&quot;Size&quot;</em> from the 32-bit integer (is in Big-Endian format).</li>\n<li>MP4 data begins at <code>int mp4_data_pos = (49 + skipSize);</code>.</li>\n<li>Extract MP4 data parts only, and use them for testing as video playback.</li>\n<li>In MP4 data: <code>[moov]</code> is metadata and then chunks are <code>[moof+mdat]</code> ... <code>[moof+mdat]</code>.</li>\n<li>Find <strong>moov</strong> as: <code>0x6D6F6F76</code>, find <strong>moof</strong> as: <code>0x6D6F6F66</code>, find <strong>mdat</strong> as: <code>0x6D646174</code>.</li>\n<li>Get a size of each atom by reading a 32-bit integer from the previous four bytes.<br> (<em>eg:</em> <code>int size_mdat = read_32_bits_from( pos_mdat - 4);</code> since one array slot holds 8 bits).</li>\n<li>First <code>[moof + mdat]</code> chunk after the metadata part must contain a keyframe for display.</li>\n<li>Find keyframe through checking for a frame type <strong>5</strong> with:<br>\n<code>int frame_type = ( byteArray[ mdat_pos + 8 ] &amp; 0x1F );</code><br>\n(<em>NB 1:</em> This will only find a keyframe if it's the first frame in a chunk (<em>eg:</em> a <code>[moof + mdat]</code> package).<br>\n(<em>NB 2:</em> It's possible your Genetec device outputs a keyframe later (<em>eg:</em> every 25th frame) or else maybe it only emits a keyframe at device start-up? Check for such an issue if not getting a keyframe.</li>\n<li>If testing with an HTML5 video tag, then your codec setup is: <code>avc1.640028</code>.</li>\n<li>If testing as file then save N-amount of &quot;MP4 data&quot; parts as one file (<em>ie:</em> file is the joined MP4 chunks).</li>\n</ul>\n<h4> ## Short version: </h4>\n<p>[ to add later: Image of header sections to skip + with 32-bit integers highlighted ]</p>\n<p>In each packet...</p>\n<ul>\n<li>Skip ahead, past the first 49 bytes.</li>\n<li>At offset 49, read a 32-bit integer (<em>ie:</em> to update some &quot;skipSize&quot; variable).</li>\n<li>Skip ahead (past some Object bytes) by the new amount from skipSize variable.</li>\n<li>MP4 data begins here (<em>eg:</em> <code>mp4_begins_pos = (49 + skipSize);</code>.</li>\n</ul>\n<p>Some notes about MP4 data in packets:</p>\n<ul>\n<li>MP4 data is up to end of packet, and may have a larger size than the current packet size.</li>\n<li>MP4 data which is larger than the packet's own size will continue in the next packet.</li>\n<li>in bytes: <code>moov</code> atom has required MP4 metadata, and <code>moof</code> atom is a playable MP4 chunk.</li>\n<li>in bytes: an MP4 atom begins with a SIZE (32-bits or 4 bytes), followed by atom NAME.</li>\n<li>in bytes: Copy all atoms (in order of appearance) by their SIZEs into a new bytes array.<br> This array can be saved as a file or sent to a decoder for playback.</li>\n</ul>\n<p><strong>(Option A)</strong> For <strong>online playback</strong> (<em>using HTML5 video tag</em>): <br>Send the array of &quot;<strong>MP4 data</strong>&quot; parts only to your front-end.<br>\n<em>(meaning all packet bytes <strong>minus the first 49 bytes</strong> and also <strong>minus the Object bytes</strong> (by its <strong>size</strong>))</em>.</p>\n<p>Web playback means choosing either: <br></p>\n<ul>\n<li><p>Using <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API\" rel=\"nofollow noreferrer\">MediaSource Extensions</a> API to manually feed received chunks to the browser's MPEG decoder.</p>\n</li>\n<li><p>Using a server-side script as tag's <code>src</code>, where the script &quot;pipes&quot; the MP4 data back into the video tag.</p>\n</li>\n<li><p>Pre-saving the chunks on server as they arrive, then using HLS <a href=\"https://developer.apple.com/documentation/http_live_streaming/example_playlists_for_http_live_streaming/live_playlist_sliding_window_construction\" rel=\"nofollow noreferrer\">Live Playlist</a> format to serve frontend clients.</p>\n</li>\n</ul>\n<p>From the STSD atom I can see you have: H.264 &quot;High&quot; profile @ level 4.0 (or <strong>avc1.640028</strong>).</p>\n<pre><code>type= video/mp4; codecs= &quot;avc1.640028&quot;;\n</code></pre>\n<p><strong>(Option B)</strong> To <strong>save as a file</strong> for quick testing: <br><strong>Concat</strong> (join) your required N-amount of &quot;<strong>MP4 data</strong>&quot; parts into one long array, then save that array as a file. Test the new MP4 file from your storage folder in a player like <a href=\"https://www.videolan.org/vlc/index.en_GB.html\" rel=\"nofollow noreferrer\">VLC Media Player</a>.</p>\n<h4> ## Long version: </h4>\n<p>The format of Genetec's MP4 header is easy enough to understand:</p>\n<p><strong>(1)</strong> Each packet begins with some <strong>49 bytes</strong> of skippable values.</p>\n<ul>\n<li><p><strong>(a)</strong> Each packet's <strong>first byte</strong> value is <strong>0x01</strong>.</p>\n<ul>\n<li>Confirm with a <code>if (byteArray[0] == 1) { /* is OK packet */ }</code>.</li>\n<li>Else assume there is some packet corruption. Skip/ignore such packets.</li>\n</ul>\n</li>\n<li><p><strong>(b)</strong> Followed by 32-int for size of data, and then data itself: is type <strong>String</strong> (<em>eg:</em> <code>H264</code>).</p>\n<ul>\n<li>example packet-1 bytes: <code>00 00 00 04</code> (=4) then <code>48 32 36 34</code> (=H264)</li>\n</ul>\n</li>\n<li><p><strong>(c)</strong> Followed by 32-int size for possible GUUID (seems to be enough hex values for 16 bytes).</p>\n<ul>\n<li>example packet-1 bytes: <code>00 00 00 24</code> (=36) then <code>XXXX-XX-XX-etc</code> style hex values.</li>\n</ul>\n</li>\n</ul>\n<p>This above data seems to be always 49 bytes. Confirm by checking other packets, (is there a pattern of 49 bytes that are: a string of &quot;H264&quot; followed by a sequence of &quot;XXXX-XX-XX-etc&quot; style values?).</p>\n<ul>\n<li><strong>Skip</strong> past these 49 bytes (of Genetec's custom header bytes).</li>\n<li>Skip range is <code>[byte 0] ... [byte 48]</code>, since these bytes are not needed for playback.</li>\n</ul>\n<p><strong>(2)</strong> After skipping, there is an <a href=\"https://www.w3schools.com/java/java_classes.asp\" rel=\"nofollow noreferrer\">Object</a> (added by Genetec) of side metadata (<em>eg</em>: <code>{&quot;IsAudio&quot;:false} </code>).</p>\n<ul>\n<li><strong>(a)</strong> From <strong>offset 49</strong> onwards, read a 32-bit integer for the <strong>size</strong> (bytes length) of the Object.\n<ul>\n<li>example packet-1 bytes: <code>00 00 00 C8</code> == is <strong>size</strong> of 36 bytes</li>\n</ul>\n</li>\n<li><strong>(b)</strong> Skip the Object bytes by using the found size (to land at example position: <strong>offset N</strong>).\n<ul>\n<li>These custom Object's bytes are not needed for playback.</li>\n</ul>\n</li>\n</ul>\n<p><strong>(3)</strong> At <strong>offset N</strong>, the actual MP4 data begins.</p>\n<p>Here is a starting example code to check the packet for MP4 data size to extract for playback.</p>\n<p>Use the <strong>read_int32</strong> function that I've provided to get a 32-bit integer from some Array position.</p>\n<pre><code>import java.util.Arrays;\n\npublic class Main \n{\n    //# Vars for MP4 data\n    public static int size_MP4_data = 0;\n    public static int size_expected_MP4_data = 0;\n    public static int size_received_MP4_data = 0;\n    public static int offset_MP4_data = 0;\n    \n    public static boolean need_more_MP4_data = false;\n     \n    public static void main(String[] args) \n    {\n        //# Example Array to represent a received input Packet\n        //# Array contents are from the first 320 bytes of your first example packet\n        //# See full bytes at: https://pastebin.com/embed_js/3Ca8ZDFk \n        int[] bytes_Packet =    {\n\n                                    0x01, 0x00, 0x00, 0x00, 0x04, 0x48, 0x32, 0x36, 0x34, 0x00, 0x00, 0x00, 0x24, 0x39, 0x33, 0x65, \n                                    0x63, 0x35, 0x39, 0x31, 0x30, 0x2D, 0x65, 0x65, 0x35, 0x38, 0x2D, 0x34, 0x39, 0x37, 0x32, 0x2D, \n                                    0x61, 0x30, 0x66, 0x66, 0x2D, 0x32, 0x65, 0x62, 0x33, 0x61, 0x33, 0x61, 0x34, 0x32, 0x66, 0x35, \n                                    0x66, 0x00, 0x00, 0x00, 0xC8, 0x7B, 0x22, 0x49, 0x73, 0x49, 0x6E, 0x69, 0x74, 0x22, 0x3A, 0x74, \n                                    0x72, 0x75, 0x65, 0x2C, 0x22, 0x49, 0x73, 0x41, 0x75, 0x64, 0x69, 0x6F, 0x22, 0x3A, 0x66, 0x61, \n                                    0x6C, 0x73, 0x65, 0x2C, 0x22, 0x54, 0x6F, 0x74, 0x61, 0x6C, 0x53, 0x65, 0x63, 0x6F, 0x6E, 0x64, \n                                    0x73, 0x22, 0x3A, 0x30, 0x2E, 0x30, 0x2C, 0x22, 0x46, 0x72, 0x61, 0x6D, 0x65, 0x54, 0x69, 0x6D, \n                                    0x65, 0x22, 0x3A, 0x22, 0x32, 0x30, 0x32, 0x33, 0x2D, 0x30, 0x32, 0x2D, 0x32, 0x35, 0x54, 0x31, \n                                    0x36, 0x3A, 0x35, 0x30, 0x3A, 0x32, 0x37, 0x2E, 0x32, 0x36, 0x31, 0x5A, 0x22, 0x2C, 0x22, 0x53, \n                                    0x65, 0x71, 0x75, 0x65, 0x6E, 0x63, 0x65, 0x49, 0x64, 0x22, 0x3A, 0x31, 0x2C, 0x22, 0x42, 0x61, \n                                    0x73, 0x65, 0x44, 0x65, 0x63, 0x6F, 0x64, 0x65, 0x54, 0x69, 0x6D, 0x65, 0x22, 0x3A, 0x30, 0x2C, \n                                    0x22, 0x4D, 0x65, 0x64, 0x69, 0x61, 0x54, 0x69, 0x6D, 0x65, 0x22, 0x3A, 0x30, 0x2C, 0x22, 0x49, \n                                    0x73, 0x46, 0x72, 0x61, 0x6D, 0x65, 0x48, 0x69, 0x64, 0x64, 0x65, 0x6E, 0x22, 0x3A, 0x66, 0x61,\n                                    0x6C, 0x73, 0x65, 0x2C, 0x22, 0x49, 0x73, 0x4B, 0x65, 0x79, 0x46, 0x72, 0x61, 0x6D, 0x65, 0x22, \n                                    0x3A, 0x66, 0x61, 0x6C, 0x73, 0x65, 0x2C, 0x22, 0x49, 0x64, 0x22, 0x3A, 0x30, 0x2C, 0x22, 0x47,\n                                    0x65, 0x6E, 0x65, 0x72, 0x61, 0x74, 0x69, 0x6F, 0x6E, 0x22, 0x3A, 0x31, 0x7D, 0x00, 0x00, 0x02,\n                                    0xC4, 0x00, 0x00, 0x00, 0x1C, 0x66, 0x74, 0x79, 0x70, 0x64, 0x61, 0x73, 0x68, 0x00, 0x00, 0x00,\n                                    0x00, 0x69, 0x73, 0x6F, 0x6D, 0x64, 0x61, 0x73, 0x68, 0x6D, 0x70, 0x34, 0x31, 0x00, 0x00, 0x02, \n                                    0xA8, 0x6D, 0x6F, 0x6F, 0x76, 0x00, 0x00, 0x00, 0x78, 0x6D, 0x76, 0x68, 0x64, 0x01, 0x00, 0x00, \n                                    0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x1F, 0xEC, 0xD3, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x1F, 0xEC\n                                  \n                                };\n\n        //# Process the packet to extract MP4 data\n        int[] data_MP4 = process_Packet( bytes_Packet ); //# returns a trimmed array\n    }\n    \n    static int[] process_Packet( int[] input ) \n    {\n        //# (optional) Confirm function code is running ....\n        System.out.println( &quot;## Checking received Packet byte values .... &quot; );\n        \n        //# NOTE: \n        //# &quot;size_header_Genetec&quot; is the mentioned &quot;skipSize&quot; variable equivalent.\n        //# it stores how much bytes length (size) to skip past to reach MP4 data.\n        \n        int temp_int = 0; //# temp number for counting\n        int size_total_packet = input.length; //# using size of &quot;input&quot; packet given to this function\n        int size_header_Genetec = 0;\n        \n        //# first check if this packet's MP4 data needs to be added to another previous packet's data to make a full (uncorrupt) chunk.\n        if( need_more_MP4_data == true)\n        {\n            //## to fix later (if needed)\n            //## solution: extract needed remainder and append to an existing array\n        }\n        \n        ///////////////////////////////\n        //### Phase 1: Find MP4 attoms\n        ///////////////////////////////\n        \n        //# Account for starting &quot;0x01&quot; byte\n        size_header_Genetec = 1;\n        \n        //# since the size is increased with a &quot;+=&quot; we can re-use\n        //# the newly increased &quot;size_header_Genetec&quot; value.\n        \n        //# get next size (usually String of 4 letters: &quot;H264&quot;)\n        temp_int = read_int32( input, size_header_Genetec );\n        size_header_Genetec += (temp_int + 4);\n        \n        //# get next size (usually a GUUID of hex values)\n        temp_int = read_int32( input, size_header_Genetec );\n        size_header_Genetec += (temp_int + 4);\n        \n        //# get next size (usually an Object of metadata values)\n        temp_int = read_int32( input, size_header_Genetec );\n        size_header_Genetec += (temp_int + 4);\n        \n        //# skip next 4 bytes\n        size_header_Genetec += 4;\n       \n        //# Update offset for later use ...\n        offset_MP4_data = size_header_Genetec;\n        \n        //# final check before next steps\n        System.out.println( &quot;- MP4 data begins at offset: [&quot; + offset_MP4_data + &quot;] until end of this packet&quot; );\n        \n        ////////////////////////////////\n        //### Phase 2: Handle MP4 atoms\n        ////////////////////////////////\n        \n        //# check atom NAME\n        temp_int = read_int32( input, offset_MP4_data + 4 );\n        \n        if( \n            //# IF atom &quot;name&quot; is one of these (as expected from your packet MP4 structure)...\n            ( temp_int == 0x66747970 )    //# is &quot;ftyp&quot;\n            || ( temp_int == 0x6D6F6F76 ) //# is &quot;moov&quot;\n            || ( temp_int == 0x6D6F6F66 ) //# is &quot;moof&quot;\n            || ( temp_int == 0x6D646174 ) //# is &quot;mdat&quot;\n            \n        )\n        {\n            //# THEN check all MP4 atoms in this packet for total size of MP4 data\n            //# do this by adding together all the atom sizes\n            //# note: if size is bigger than packet, then store data for completion with next packet\n            \n            //# add sizes of MP4 atoms...\n            \n            temp_int = offset_MP4_data;\n                \n            while(true)\n            {\n                size_expected_MP4_data += read_int32( input, temp_int );\n                temp_int = ( offset_MP4_data + size_expected_MP4_data );\n                \n                //# avoid reading past end of packet\n                if( size_expected_MP4_data &gt;= ( size_total_packet - offset_MP4_data ) )\n                {\n                    break;\n                }\n            }\n        \n        }\n        \n        /////////////////////////////////////////////////////////////////////////////\n        //# confirm MP4 data positions are correct (double-check by a hex view of same bytes)...\n        System.out.println( &quot;&gt;&gt; MP4 data offset: &quot; + offset_MP4_data );\n        System.out.println( &quot;&gt;&gt; MP4 data length is : &quot; + size_expected_MP4_data );\n        /////////////////////////////////////////////////////////////////////////////\n        \n        ///////////////////////////////\n        //# Phase 3: Copy the MP4 data\n        ///////////////////////////////\n        \n        int copyStartPos = offset_MP4_data;\n        int copyEndPos = (size_total_packet-1);\n        \n        //# prepare for when getting the next new packet\n        \n        if( size_expected_MP4_data &gt; ( size_total_packet - offset_MP4_data ) ) { need_more_MP4_data = true; }\n        \n        if( need_more_MP4_data == false )\n        {\n            //# reset the count for this new MP4 chunk\n            //size_received_MP4_data = 0;\n            //size_expected_MP4_data = 0;\n        }\n        \n        //# slice the Array to keep only the MP4 data parts\n        return ( Arrays.copyOfRange( input , copyStartPos, copyEndPos) );\n        \n    }\n    \n    //# function expects:    \n    //# &quot;input&quot; = array to search, \n    //# &quot;pos&quot; = start position of reading a 4-byte sequence \n    static int read_int32( int[] input, int pos ) \n    {\n        \n        //# integer to hold combined 4-byte values as one result/number\n        int temp_int = 0;\n        \n        //# join the four byte values into &quot;temp_int&quot;\n        temp_int = ( input[ pos+0 ] &lt;&lt; 24 );\n        temp_int |= ( input[ pos+1 ] &lt;&lt; 16 );\n        temp_int |= ( input[ pos+2 ] &lt;&lt; 8 );\n        temp_int |= ( input[ pos+3 ] &lt;&lt; 0 );\n\n        return ( temp_int ); \n        \n    }\n        \n}\n</code></pre>\n<p>Options for stream playback:</p>\n<p><strong>(a)</strong> If your player expects MP4 data:</p>\n<ul>\n<li>Your data is already playable in most video players</li>\n<li>Send all data of each packet, after skipping past the first 49 bytes and also the <code>{ ... }</code> Object bytes.</li>\n</ul>\n<p><strong>(b)</strong> If your player expects raw H.264 data (<em>ie:</em> It does not play the MP4 data, only H.264 data):</p>\n<ul>\n<li>Then you will have to extract each H.264 video frame from inside the MP4 data.</li>\n<li>Your H.264 data is in <strong>AVCC</strong> format (<em><strong>.mp4</strong></em>), which means each frame comes with a &quot;size in bytes&quot; value.</li>\n<li>Most players will expect raw H.264 to be in <strong>AnnexB</strong> format (<em><strong>.h264</strong></em>).<br> Replace all four bytes of frame's size with this four byte sequence <code>00 00 00 01</code>.<br>\n(correctly: Use <code>00 00 00 01</code> for SPS, PPS and Keyframes, then <code>00 00 01</code> for  other frames <em>eg:</em> P-frames).</li>\n</ul>\n"}],"owner":{"account_id":7579549,"reputation":1057,"user_id":5750634,"accept_rate":80,"display_name":"ashif-ismail"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1119,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":75614199,"answer_count":2,"score":3,"last_activity_date":1678428800,"creation_date":1677129792,"question_id":75540855,"body_markdown":"I have incoming byte streams probably encoded in H264 from a RTSP camera through a websocket in my spring boot application,\r\n\r\nI need to decode the incoming H264 streams to transmit the video to my frontend clients.\r\nI have tried using javaCV/FFMpeg but nothing works.\r\n\r\n**Any help would be appreciated**\r\n\r\nthis is the part of hex dump received through socket \r\n\r\n    00000000: 01 00 00 00 04 48 32 36 34 00 00 00 24 38 65 34    .....H264...$8e4\r\n    00000010: 32 39 65 37 61 2D 32 66 34 66 2D 34 37 31 61 2D    29e7a-2f4f-471a-\r\n    00000020: 39 61 63 30 2D 66 66 62 38 64 64 37 63 37 64 37    9ac0-ffb8dd7c7d7\r\n    00000030: 32 00 00 00 D4 7B 22 49 73 49 6E 69 74 22 3A 66    2...T{&quot;IsInit&quot;:f\r\n    00000040: 61 6C 73 65 2C 22 49 73 41 75 64 69 6F 22 3A 66    alse,&quot;IsAudio&quot;:f\r\n    00000050: 61 6C 73 65 2C 22 54 6F 74 61 6C 53 65 63 6F 6E    alse,&quot;TotalSecon\r\n    00000060: 64 73 22 3A 30 2E 30 36 2C 22 46 72 61 6D 65 54    ds&quot;:0.06,&quot;FrameT\r\n    00000070: 69 6D 65 22 3A 22 32 30 32 33 2D 30 32 2D 32 33    ime&quot;:&quot;2023-02-23\r\n    00000080: 54 30 34 3A 32 31 3A 35 33 2E 35 33 31 5A 22 2C    T04:21:53.531Z&quot;,\r\n    00000090: 22 53 65 71 75 65 6E 63 65 49 64 22 3A 31 2C 22    &quot;SequenceId&quot;:1,&quot;\r\n    000000a0: 42 61 73 65 44 65 63 6F 64 65 54 69 6D 65 22 3A    BaseDecodeTime&quot;:\r\n    000000b0: 32 36 35 38 37 2C 22 4D 65 64 69 61 54 69 6D 65    26587,&quot;MediaTime\r\n    000000c0: 22 3A 32 36 35 38 37 2C 22 49 73 46 72 61 6D 65    &quot;:26587,&quot;IsFrame\r\n    000000d0: 48 69 64 64 65 6E 22 3A 66 61 6C 73 65 2C 22 49    Hidden&quot;:false,&quot;I\r\n    000000e0: 73 4B 65 79 46 72 61 6D 65 22 3A 66 61 6C 73 65    sKeyFrame&quot;:false\r\n    000000f0: 2C 22 49 64 22 3A 34 34 35 2C 22 47 65 6E 65 72    ,&quot;Id&quot;:445,&quot;Gener\r\n    00000100: 61 74 69 6F 6E 22 3A 31 7D 00 00 3F 50 00 00 00    ation&quot;:1}..?P...\r\n    00000110: 68 6D 6F 6F 66 00 00 00 10 6D 66 68 64 00 00 00    hmoof....mfhd...\r\n    00000120: 00 00 00 01 BD 00 00 00 50 74 72 61 66 00 00 00    ....=...Ptraf...\r\n    00000130: 10 74 66 68 64 00 02 00 00 00 00 00 01 00 00 00    .tfhd...........\r\n    00000140: 14 74 66 64 74 01 00 00 00 00 00 00 00 00 00 67    .tfdt..........g\r\n    00000150: DB 00 00 00 24 74 72 75 6E 01 00 0F 01 00 00 00    [...$trun.......\r\n    00000160: 01 00 00 00 70 00 00 00 3C 00 00 3E E0 00 01 00    ....p...&lt;..&gt;`...\r\n    00000170: 00 00 00 00 00 00 00 3E E8 6D 64 61 74 00 00 3E    .......&gt;hmdat..&gt;\r\n    00000180: DC 41 E1 81 80 93 BE 16 2B 33 77 3D 4C B6 55 8B    \\Aa...&gt;.+3w=L6U.\r\n    00000190: D2 55 60 92 05 F7 F7 A4 97 54 4B 6C A6 68 48 84    RU`..ww$.TKl&amp;hH.\r\n    000001a0: 68 FF D2 B6 6C 02 31 FC 24 01 78 EA BD 20 AD 15    h.R6l.1|$.xj=.-.\r\n    000001b0: F1 73 31 4B EB EF 18 1B 50 B3 13 F2 DC C6 4C E1    qs1Kko..P3.r\\FLa\r\n    000001c0: 75 8B 94 52 6B C5 09 37 55 1E 45 66 6A 92 39 23    u..RkE.7U.Efj.9#\r\n    000001d0: C9 2D FD BB EC AD FD CF C4 30 75 FF 44 66 FA 85    I-};l-}OD0u.Dfz.\r\n    000001e0: D9 7C 18 72 AE 63 45 60 DD D7 65 44 84 49 95 8D    Y|.r.cE`]WeD.I..\r\n    000001f0: 2C 70 6C 57 8E E9 A9 EB B6 F6 78 BD D6 88 99 F6    ,plW.i)k6vx=V..v\r\n    00000200: FC 25 B1 0A FF DF CB 77 6A 67 37 24 A5 3D 8F A1    |%1.._Kwjg7$%=.!\r\n    00000210: 27 9B 4F 42 0E CD B8 87 6E C9 99 FC 6F 4C 53 4B    &#39;.OB.M8.nI.|oLSK\r\n    00000220: 01 EA B6 AF 99 F8 22 C1 8F 1E C1 66 D6 8A 09 D6    .j6/.x&quot;A..AfV..V\r\n    00000230: 99 79 91 F7 C1 2A 08 1F 81 CB 5E DD C3 CA 86 8F    .y.wA*...K^]CJ..\r\n    00000240: 57 BF 17 A2 64 6B 69 56 AE 19 1F 57 AD A6 D8 C2    W?.&quot;dkiV...W-&amp;XB\r\n    00000250: 06 28 EB 46 D3 E4 85 51 3E E2 A5 40 50 50 85 7D    .(kFSd.Q&gt;b%@PP.}\r\n    00000260: 72 6B 20 87 1A 6E 73 E1 B8 88 9E 20 23 48 6D FE    rk...nsa8...#Hm~\r\n    00000270: C2 0D 39 ED 24 B2 6D B5 9B 81 B6 BC F4 EE DE A2    B.9m$2m5..6&lt;tn^&quot;\r\n    00000280: CF A1 08 D0 D2 5B EE FA 0D DA FD 3B 79 C7 89 E5    O!.PR[nz.Z};yG.e\r\n    00000290: 4F 64 73 37 98 D6 2D 47 1D 8B A3 47 DD EA C9 8E    Ods7.V-G..#G]jI.\r\n    000002a0: 3E 8C 97 E2 42 15 FB 22 A6 83 A1 34 18 52 5E 35    &gt;..bB.{&quot;&amp;.!4.R^5\r\n    000002b0: 2A A6 E2 71 D7 4F 96 0A EC AE 8D 39 27 B8 CF 61    *&amp;bqWO..l..9&#39;8Oa\r\n    000002c0: CC ED E9 AF 74 C3 95 D3 E3 96 32 20 E6 31 0B E4    Lmi/tC.Sc.2.f1.d\r\n    000002d0: DC F4 FF 41 37 36 E7 DB 87 AE B3 7D BF CA F8 05    \\t.A76g[..3}?Jx.\r\n    000002e0: 72 2A 38 AB B8 8E 98 43 97 C8 5E 80 57 C6 E7 1E    r*8+8..C.H^.WFg.\r\n    000002f0: 86 75 CE CD CE BF CF 10 C9 8A C2 C9 6E 33 41 AC    .uNMN?O.I.BIn3A,\r\n    00000300: 91 AC A8 F3 1B E6 D5 0A 22 A1 2C 4C 68 19 51 4D    .,(s.fU.&quot;!,Lh.QM\r\n    00000310: 17 DA AE E1 D7 BC 0E 2D F8 14 61 E2 4F BA 26 A3    .Z.aW&lt;.-x.abO:&amp;#\r\n    00000320: 0A E4 A6 BE 08 EA 3C 28 E6 C5 6B CA 3A 86 D2 59    .d&amp;&gt;.j&lt;(fEkJ:.RY\r\n    00000330: 34 C2 ED 91 72 5A EF 2C BE D7 38 A4 60 D7 F3 97    4Bm.rZo,&gt;W8$`Ws.\r\n    00000340: BB E6 FD C2 D0 29 10 B5 A4 79 D8 3E 61 48 8A F9    ;f}BP).5$yX&gt;aH.y\r\n    00000350: C6 D8 13 D0 FD DB D6 FA 24 7F CD 5A BF 06 57 49    FX.P}[Vz$.MZ?.WI\r\n    00000360: 51 EC ED B2 74 AB 92 1D 37 68 70 A2 A5 31 B5 5F    Qlm2t+..7hp&quot;%15_\r\n    00000370: EA CF 9E 3E 6A B1 78 16 B7 94 D1 46 7B 63 C1 67    jO.&gt;j1x.7.QF{cAg\r\n    00000380: D2 B0 08 44 64 1E 68 15 39 80 E3 DD EB C0 E1 71    R0.Dd.h.9.c]k@aq\r\n    00000390: E8 EE D0 4D DF 4F 41 E0 96 C5 34 AD BC D3 9E 88    hnPM_OA`.E4-&lt;S..\r\n    000003a0: 0B 17 D8 7D 3A A8 3B 06 78 79 93 B7 30 92 C8 D8    ..X}:(;.xy.70.HX\r\n    000003b0: 5D 27 04 D7 00 9F E3 EA A3 C6 BD B9 05 21 5C 68    ]&#39;.W..cj#F=9.!\\h\r\n    000003c0: 45 DB 90 2A 05 38 79 D9 84 60 C7 F2 BB DE 1B 5A    E[.*.8yY.`Gr;^.Z\r\n    000003d0: 44 0B ED 67 34 DF 07 8B F5 04 27 9E 1A F0 04 CA    D.mg4_..u.&#39;..p.J\r\n    000003e0: 86 B1 2C 0B 78 D0 58 86 81 62 D8 70 3D BA 9D 51    .1,.xPX..bXp=:.Q\r\n    000003f0: D8 2C 6C 6A 10 88 B9 F8 89 3D 6F 39 C2 52 49 CF    X,lj..9x.=o9BRIO\r\n    00000400: 9F C1 50 6A D4 9E A5 96 B2 0A 99 1D 6B BC 63 03    .APjT.%.2...k&lt;c.\r\n    00000410: A4 8C 7E 1D BD DF 8B D8 97 EE 9A 59 78 63 FC 74    $.~.=_.X.n.Yxc|t\r\n    00000420: 3B 40 75 AF A7 1A B7 F0 56 A5 5F 3E 81 54 83 A0    ;@u/&#39;.7pV%_&gt;.T..\r\n    00000430: 7F FC AD 71 CE AF 54 8B 5D DC 27 34 20 A3 0A 73    .|-qN/T.]\\&#39;4.#.s\r\n    00000440: 76 A5 81 33 22 31 56 6B 1D 82 C4 32 FB 82 15 F6    v%.3&quot;1Vk..D2{..v\r\n    00000450: 97 C8 47 29 3C 9E 59 9A C0 83 48 A0 55 CB C8 D6    .HG)&lt;.Y.@.H.UKHV\r\n    00000460: 36 92 CC 54 A7 00 E3 28 9E 99 45 B2 E5 7E 88 A7    6.LT&#39;.c(..E2e~.&#39;\r\n    00000470: 28 4E CA 75 17 3C D3 B5 6C F5 FD AC 05 55 BF F7    (NJu.&lt;S5lu},.U?w\r\n    00000480: 98 61 92 30 D8 0F 0E A5 DD 61 4D 80 27 5B A7 68    .a.0X..%]aM.&#39;[&#39;h\r\n    00000490: E5 B9 C2 B8 EE 31 F6 63 29 37 C5 C9 11 39 90 8D    e9B8n1vc)7EI.9..\r\n    000004a0: D8 00 35 F4 7A 2D 79 D0 6A BB 9C 98 E4 41 CF 3F    X.5tz-yPj;..dAO?\r\n    000004b0: DE 9D 8B BF 04 69 1D BC 5C E7 E1 F2 49 01 8D F5    ^..?.i.&lt;\\garI..u\r\n    000004c0: 41 3E 3F FB AE 54 B2 D9 F2 A0 E8 0A F7 59 47 77    A&gt;?{.T2Yr.h.wYGw\r\n    000004d0: 3C 19 C8 7B 81 9B 17 19 E9 81 A0 36 AD C6 62 71    &lt;.H{....i..6-Fbq\r\n    000004e0: DB 68 72 8F 6A 37 45 D9 0E 6E DC 2C 5E 52 C2 75    [hr.j7EY.n\\,^RBu\r\n    000004f0: 51 2F F9 CE 8A 10 12 E9 C8 68 A9 D6 A6 D7 5B 14    Q/yN...iHh)V&amp;W[.\r\n    00000500: 11 51 42 FD BE B5 09 56 7F 19 C3 EB A7 A6 DF 6C    .QB}&gt;5.V..Ck&#39;&amp;_l\r\n    00000510: 55 A3 11 DC EF 81 C3 CD DD 63 BF 38 F8 5A 4A 45    U#.\\o.CM]c?8xZJE\r\n    00000520: 33 24 7B A4 55 B3 85 A6 87 75 3B 85 51 5C 03 B7    3${$U3.&amp;.u;.Q\\.7\r\n\r\n**UPDATE TO THE CODE**\r\n\r\n1st Packet [find here][1]\r\n2nd Packet [find here][2]\r\n\r\nI have updated the code as per one of the comment to read only MDAT box to retrieve H264 stream from the incoming bytes[] through the socket, now I send only MDAT box contents (next byte after MDAT box)\r\n\r\n    public Map.Entry&lt;Boolean, List&lt;Integer&gt;&gt; hasMdat(byte[] byteArray) {\r\n        for (int i = 0; i &lt; byteArray.length - 3; i++) {\r\n            if (byteArray[i] == (byte) 109 &amp;&amp;\r\n                    byteArray[i + 1] == (byte) 100 &amp;&amp;\r\n                    byteArray[i + 2] == (byte) 97 &amp;&amp;\r\n                    byteArray[i + 3] == (byte) 116) {\r\n\r\n                return Map.entry(true, Arrays.asList(i, i + 1, i + 2, i + 3));\r\n            }\r\n        }\r\n        return Map.entry(false, List.of(0));\r\n    }\r\n\r\nThis is my code which handles the byte stream\r\n\r\n    initSocketConnection(new VideoStreamCallback() {\r\n            @Override\r\n            public void onVideoStreamReceived(byte[] bytes) {\r\n               \r\n    Map.Entry&lt;Boolean, List&lt;Integer&gt;&gt; b = hasMdat(bytes);\r\n            if (b.getKey()) {\r\n                byte[] b1 = Arrays.copyOfRange(bytes, b.getValue().get(3) + 1, bytes.length);\r\n      //write b1 back to client using spring SSE\r\n                \r\n            }\r\n\r\n            }\r\n        });\r\n\r\n   \r\n\r\n\r\n  [1]: https://pastebin.com/embed_js/3Ca8ZDFk\r\n  [2]: https://pastebin.com/embed_js/FEuwQay6","title":"Decode a proprietary H264 network video stream","body":"<p>I have incoming byte streams probably encoded in H264 from a RTSP camera through a websocket in my spring boot application,</p>\n<p>I need to decode the incoming H264 streams to transmit the video to my frontend clients.\nI have tried using javaCV/FFMpeg but nothing works.</p>\n<p><strong>Any help would be appreciated</strong></p>\n<p>this is the part of hex dump received through socket</p>\n<pre><code>00000000: 01 00 00 00 04 48 32 36 34 00 00 00 24 38 65 34    .....H264...$8e4\n00000010: 32 39 65 37 61 2D 32 66 34 66 2D 34 37 31 61 2D    29e7a-2f4f-471a-\n00000020: 39 61 63 30 2D 66 66 62 38 64 64 37 63 37 64 37    9ac0-ffb8dd7c7d7\n00000030: 32 00 00 00 D4 7B 22 49 73 49 6E 69 74 22 3A 66    2...T{&quot;IsInit&quot;:f\n00000040: 61 6C 73 65 2C 22 49 73 41 75 64 69 6F 22 3A 66    alse,&quot;IsAudio&quot;:f\n00000050: 61 6C 73 65 2C 22 54 6F 74 61 6C 53 65 63 6F 6E    alse,&quot;TotalSecon\n00000060: 64 73 22 3A 30 2E 30 36 2C 22 46 72 61 6D 65 54    ds&quot;:0.06,&quot;FrameT\n00000070: 69 6D 65 22 3A 22 32 30 32 33 2D 30 32 2D 32 33    ime&quot;:&quot;2023-02-23\n00000080: 54 30 34 3A 32 31 3A 35 33 2E 35 33 31 5A 22 2C    T04:21:53.531Z&quot;,\n00000090: 22 53 65 71 75 65 6E 63 65 49 64 22 3A 31 2C 22    &quot;SequenceId&quot;:1,&quot;\n000000a0: 42 61 73 65 44 65 63 6F 64 65 54 69 6D 65 22 3A    BaseDecodeTime&quot;:\n000000b0: 32 36 35 38 37 2C 22 4D 65 64 69 61 54 69 6D 65    26587,&quot;MediaTime\n000000c0: 22 3A 32 36 35 38 37 2C 22 49 73 46 72 61 6D 65    &quot;:26587,&quot;IsFrame\n000000d0: 48 69 64 64 65 6E 22 3A 66 61 6C 73 65 2C 22 49    Hidden&quot;:false,&quot;I\n000000e0: 73 4B 65 79 46 72 61 6D 65 22 3A 66 61 6C 73 65    sKeyFrame&quot;:false\n000000f0: 2C 22 49 64 22 3A 34 34 35 2C 22 47 65 6E 65 72    ,&quot;Id&quot;:445,&quot;Gener\n00000100: 61 74 69 6F 6E 22 3A 31 7D 00 00 3F 50 00 00 00    ation&quot;:1}..?P...\n00000110: 68 6D 6F 6F 66 00 00 00 10 6D 66 68 64 00 00 00    hmoof....mfhd...\n00000120: 00 00 00 01 BD 00 00 00 50 74 72 61 66 00 00 00    ....=...Ptraf...\n00000130: 10 74 66 68 64 00 02 00 00 00 00 00 01 00 00 00    .tfhd...........\n00000140: 14 74 66 64 74 01 00 00 00 00 00 00 00 00 00 67    .tfdt..........g\n00000150: DB 00 00 00 24 74 72 75 6E 01 00 0F 01 00 00 00    [...$trun.......\n00000160: 01 00 00 00 70 00 00 00 3C 00 00 3E E0 00 01 00    ....p...&lt;..&gt;`...\n00000170: 00 00 00 00 00 00 00 3E E8 6D 64 61 74 00 00 3E    .......&gt;hmdat..&gt;\n00000180: DC 41 E1 81 80 93 BE 16 2B 33 77 3D 4C B6 55 8B    \\Aa...&gt;.+3w=L6U.\n00000190: D2 55 60 92 05 F7 F7 A4 97 54 4B 6C A6 68 48 84    RU`..ww$.TKl&amp;hH.\n000001a0: 68 FF D2 B6 6C 02 31 FC 24 01 78 EA BD 20 AD 15    h.R6l.1|$.xj=.-.\n000001b0: F1 73 31 4B EB EF 18 1B 50 B3 13 F2 DC C6 4C E1    qs1Kko..P3.r\\FLa\n000001c0: 75 8B 94 52 6B C5 09 37 55 1E 45 66 6A 92 39 23    u..RkE.7U.Efj.9#\n000001d0: C9 2D FD BB EC AD FD CF C4 30 75 FF 44 66 FA 85    I-};l-}OD0u.Dfz.\n000001e0: D9 7C 18 72 AE 63 45 60 DD D7 65 44 84 49 95 8D    Y|.r.cE`]WeD.I..\n000001f0: 2C 70 6C 57 8E E9 A9 EB B6 F6 78 BD D6 88 99 F6    ,plW.i)k6vx=V..v\n00000200: FC 25 B1 0A FF DF CB 77 6A 67 37 24 A5 3D 8F A1    |%1.._Kwjg7$%=.!\n00000210: 27 9B 4F 42 0E CD B8 87 6E C9 99 FC 6F 4C 53 4B    '.OB.M8.nI.|oLSK\n00000220: 01 EA B6 AF 99 F8 22 C1 8F 1E C1 66 D6 8A 09 D6    .j6/.x&quot;A..AfV..V\n00000230: 99 79 91 F7 C1 2A 08 1F 81 CB 5E DD C3 CA 86 8F    .y.wA*...K^]CJ..\n00000240: 57 BF 17 A2 64 6B 69 56 AE 19 1F 57 AD A6 D8 C2    W?.&quot;dkiV...W-&amp;XB\n00000250: 06 28 EB 46 D3 E4 85 51 3E E2 A5 40 50 50 85 7D    .(kFSd.Q&gt;b%@PP.}\n00000260: 72 6B 20 87 1A 6E 73 E1 B8 88 9E 20 23 48 6D FE    rk...nsa8...#Hm~\n00000270: C2 0D 39 ED 24 B2 6D B5 9B 81 B6 BC F4 EE DE A2    B.9m$2m5..6&lt;tn^&quot;\n00000280: CF A1 08 D0 D2 5B EE FA 0D DA FD 3B 79 C7 89 E5    O!.PR[nz.Z};yG.e\n00000290: 4F 64 73 37 98 D6 2D 47 1D 8B A3 47 DD EA C9 8E    Ods7.V-G..#G]jI.\n000002a0: 3E 8C 97 E2 42 15 FB 22 A6 83 A1 34 18 52 5E 35    &gt;..bB.{&quot;&amp;.!4.R^5\n000002b0: 2A A6 E2 71 D7 4F 96 0A EC AE 8D 39 27 B8 CF 61    *&amp;bqWO..l..9'8Oa\n000002c0: CC ED E9 AF 74 C3 95 D3 E3 96 32 20 E6 31 0B E4    Lmi/tC.Sc.2.f1.d\n000002d0: DC F4 FF 41 37 36 E7 DB 87 AE B3 7D BF CA F8 05    \\t.A76g[..3}?Jx.\n000002e0: 72 2A 38 AB B8 8E 98 43 97 C8 5E 80 57 C6 E7 1E    r*8+8..C.H^.WFg.\n000002f0: 86 75 CE CD CE BF CF 10 C9 8A C2 C9 6E 33 41 AC    .uNMN?O.I.BIn3A,\n00000300: 91 AC A8 F3 1B E6 D5 0A 22 A1 2C 4C 68 19 51 4D    .,(s.fU.&quot;!,Lh.QM\n00000310: 17 DA AE E1 D7 BC 0E 2D F8 14 61 E2 4F BA 26 A3    .Z.aW&lt;.-x.abO:&amp;#\n00000320: 0A E4 A6 BE 08 EA 3C 28 E6 C5 6B CA 3A 86 D2 59    .d&amp;&gt;.j&lt;(fEkJ:.RY\n00000330: 34 C2 ED 91 72 5A EF 2C BE D7 38 A4 60 D7 F3 97    4Bm.rZo,&gt;W8$`Ws.\n00000340: BB E6 FD C2 D0 29 10 B5 A4 79 D8 3E 61 48 8A F9    ;f}BP).5$yX&gt;aH.y\n00000350: C6 D8 13 D0 FD DB D6 FA 24 7F CD 5A BF 06 57 49    FX.P}[Vz$.MZ?.WI\n00000360: 51 EC ED B2 74 AB 92 1D 37 68 70 A2 A5 31 B5 5F    Qlm2t+..7hp&quot;%15_\n00000370: EA CF 9E 3E 6A B1 78 16 B7 94 D1 46 7B 63 C1 67    jO.&gt;j1x.7.QF{cAg\n00000380: D2 B0 08 44 64 1E 68 15 39 80 E3 DD EB C0 E1 71    R0.Dd.h.9.c]k@aq\n00000390: E8 EE D0 4D DF 4F 41 E0 96 C5 34 AD BC D3 9E 88    hnPM_OA`.E4-&lt;S..\n000003a0: 0B 17 D8 7D 3A A8 3B 06 78 79 93 B7 30 92 C8 D8    ..X}:(;.xy.70.HX\n000003b0: 5D 27 04 D7 00 9F E3 EA A3 C6 BD B9 05 21 5C 68    ]'.W..cj#F=9.!\\h\n000003c0: 45 DB 90 2A 05 38 79 D9 84 60 C7 F2 BB DE 1B 5A    E[.*.8yY.`Gr;^.Z\n000003d0: 44 0B ED 67 34 DF 07 8B F5 04 27 9E 1A F0 04 CA    D.mg4_..u.'..p.J\n000003e0: 86 B1 2C 0B 78 D0 58 86 81 62 D8 70 3D BA 9D 51    .1,.xPX..bXp=:.Q\n000003f0: D8 2C 6C 6A 10 88 B9 F8 89 3D 6F 39 C2 52 49 CF    X,lj..9x.=o9BRIO\n00000400: 9F C1 50 6A D4 9E A5 96 B2 0A 99 1D 6B BC 63 03    .APjT.%.2...k&lt;c.\n00000410: A4 8C 7E 1D BD DF 8B D8 97 EE 9A 59 78 63 FC 74    $.~.=_.X.n.Yxc|t\n00000420: 3B 40 75 AF A7 1A B7 F0 56 A5 5F 3E 81 54 83 A0    ;@u/'.7pV%_&gt;.T..\n00000430: 7F FC AD 71 CE AF 54 8B 5D DC 27 34 20 A3 0A 73    .|-qN/T.]\\'4.#.s\n00000440: 76 A5 81 33 22 31 56 6B 1D 82 C4 32 FB 82 15 F6    v%.3&quot;1Vk..D2{..v\n00000450: 97 C8 47 29 3C 9E 59 9A C0 83 48 A0 55 CB C8 D6    .HG)&lt;.Y.@.H.UKHV\n00000460: 36 92 CC 54 A7 00 E3 28 9E 99 45 B2 E5 7E 88 A7    6.LT'.c(..E2e~.'\n00000470: 28 4E CA 75 17 3C D3 B5 6C F5 FD AC 05 55 BF F7    (NJu.&lt;S5lu},.U?w\n00000480: 98 61 92 30 D8 0F 0E A5 DD 61 4D 80 27 5B A7 68    .a.0X..%]aM.'['h\n00000490: E5 B9 C2 B8 EE 31 F6 63 29 37 C5 C9 11 39 90 8D    e9B8n1vc)7EI.9..\n000004a0: D8 00 35 F4 7A 2D 79 D0 6A BB 9C 98 E4 41 CF 3F    X.5tz-yPj;..dAO?\n000004b0: DE 9D 8B BF 04 69 1D BC 5C E7 E1 F2 49 01 8D F5    ^..?.i.&lt;\\garI..u\n000004c0: 41 3E 3F FB AE 54 B2 D9 F2 A0 E8 0A F7 59 47 77    A&gt;?{.T2Yr.h.wYGw\n000004d0: 3C 19 C8 7B 81 9B 17 19 E9 81 A0 36 AD C6 62 71    &lt;.H{....i..6-Fbq\n000004e0: DB 68 72 8F 6A 37 45 D9 0E 6E DC 2C 5E 52 C2 75    [hr.j7EY.n\\,^RBu\n000004f0: 51 2F F9 CE 8A 10 12 E9 C8 68 A9 D6 A6 D7 5B 14    Q/yN...iHh)V&amp;W[.\n00000500: 11 51 42 FD BE B5 09 56 7F 19 C3 EB A7 A6 DF 6C    .QB}&gt;5.V..Ck'&amp;_l\n00000510: 55 A3 11 DC EF 81 C3 CD DD 63 BF 38 F8 5A 4A 45    U#.\\o.CM]c?8xZJE\n00000520: 33 24 7B A4 55 B3 85 A6 87 75 3B 85 51 5C 03 B7    3${$U3.&amp;.u;.Q\\.7\n</code></pre>\n<p><strong>UPDATE TO THE CODE</strong></p>\n<p>1st Packet <a href=\"https://pastebin.com/embed_js/3Ca8ZDFk\" rel=\"nofollow noreferrer\">find here</a>\n2nd Packet <a href=\"https://pastebin.com/embed_js/FEuwQay6\" rel=\"nofollow noreferrer\">find here</a></p>\n<p>I have updated the code as per one of the comment to read only MDAT box to retrieve H264 stream from the incoming bytes[] through the socket, now I send only MDAT box contents (next byte after MDAT box)</p>\n<pre><code>public Map.Entry&lt;Boolean, List&lt;Integer&gt;&gt; hasMdat(byte[] byteArray) {\n    for (int i = 0; i &lt; byteArray.length - 3; i++) {\n        if (byteArray[i] == (byte) 109 &amp;&amp;\n                byteArray[i + 1] == (byte) 100 &amp;&amp;\n                byteArray[i + 2] == (byte) 97 &amp;&amp;\n                byteArray[i + 3] == (byte) 116) {\n\n            return Map.entry(true, Arrays.asList(i, i + 1, i + 2, i + 3));\n        }\n    }\n    return Map.entry(false, List.of(0));\n}\n</code></pre>\n<p>This is my code which handles the byte stream</p>\n<pre><code>initSocketConnection(new VideoStreamCallback() {\n        @Override\n        public void onVideoStreamReceived(byte[] bytes) {\n           \nMap.Entry&lt;Boolean, List&lt;Integer&gt;&gt; b = hasMdat(bytes);\n        if (b.getKey()) {\n            byte[] b1 = Arrays.copyOfRange(bytes, b.getValue().get(3) + 1, bytes.length);\n  //write b1 back to client using spring SSE\n            \n        }\n\n        }\n    });\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9637,"page":588,"page_size":100}
