{"items":[{"tags":["java","multithreading","performance"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1691587103,"post_id":76868087,"comment_id":135511639,"body_markdown":"On JDK 20 this program fails with: `Exception in thread &quot;main&quot; java.lang.IllegalArgumentException at java.base/java.util.concurrent.ThreadPoolExecutor.setCorePoolSize(ThreadPoolExecutor.java:1561) at com.example.demo.PoolTest.main(PoolTest.java:20)` because the argument to setCorePoolSize` is more than the `maximumPoolSize`","body":"On JDK 20 this program fails with: <code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException at java.base&#47;java.util.concurrent.ThreadPoolExecutor.setCorePoo&zwnj;&#8203;lSize(ThreadPoolExec&zwnj;&#8203;utor.java:1561) at com.example.demo.PoolTest.main(PoolTest.java:20)</code> because the argument to setCorePoolSize` is more than the <code>maximumPoolSize</code>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1691588210,"post_id":76868087,"comment_id":135511918,"body_markdown":"If you use `Executors.newFixedThreadPool(4)` you get the expected behaviour. Which JDK are you running with?","body":"If you use <code>Executors.newFixedThreadPool(4)</code> you get the expected behaviour. Which JDK are you running with?"},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1691588420,"post_id":76868087,"comment_id":135511963,"body_markdown":"yes @tgdavies . Setting the initial size of ThreadPoolExecutor to 4 does eliminate the issue. I am using OpenJDK by Zulu build 1.8.0_362-b09","body":"yes @tgdavies . Setting the initial size of ThreadPoolExecutor to 4 does eliminate the issue. I am using OpenJDK by Zulu build 1.8.0_362-b09"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1692792966,"post_id":76868087,"comment_id":135672055,"body_markdown":"Side note: this use of `AtomicInteger` is entirely obsolete. You could achieve the same result by simply passing `i` as first argument to the `task(…)` call. Besides that, the documentation of `Executors.newFixedThreadPool` does not say anywhere that you can assume the return value to be an instance of `ThreadPoolExecutor` to begin with. If you want a configurable thread pool, do not use a factory method even having “fixed” in its name. Instantiate a `ThreadPoolExecutor` explicitly.","body":"Side note: this use of <code>AtomicInteger</code> is entirely obsolete. You could achieve the same result by simply passing <code>i</code> as first argument to the <code>task(…)</code> call. Besides that, the documentation of <code>Executors.newFixedThreadPool</code> does not say anywhere that you can assume the return value to be an instance of <code>ThreadPoolExecutor</code> to begin with. If you want a configurable thread pool, do not use a factory method even having “fixed” in its name. Instantiate a <code>ThreadPoolExecutor</code> explicitly."}],"answers":[{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1691588731,"creation_date":1691587454,"answer_id":76868223,"question_id":76868087,"body_markdown":"You are on a wrong track, completely.\r\n\r\n```Java\r\nString log = &quot;Thread: &quot; + count +\r\n             &quot;,  Start: &quot; + start +\r\n             &quot;,  Stop: &quot; + end +\r\n             &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\r\n             &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\r\nSystem.out.println(log);\r\n```\r\n\r\nThat snippet above is from inside your method `task()`. It displays something like\r\n\r\n```shell\r\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\r\n```\r\n\r\nBut the value of &quot;Thread&quot; is not the thread count or number, but the number of the Task (more precise, of the `Runnable` returned by `task()`). Meaning that your code does not tell you anything about the running threads.\r\n\r\nYour statement\r\n\r\n&gt; In the above program, you will see the 10 Threads being executed\r\n\r\nis wrong. Because the code is in `task()`, it shows just that this method is executed, but nothing about threads.\r\n\r\nYou forgot that during its lifetime a `Thread` from a pool can execute multiple `Runnable` instances, one after the other. That&#39;s why you have a pool. Refer to [the Javadoc for `Executor`][1] that describes the intention of the `ExecutorService`.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>You are on a wrong track, completely.</p>\n<pre><code>String log = &quot;Thread: &quot; + count +\n             &quot;,  Start: &quot; + start +\n             &quot;,  Stop: &quot; + end +\n             &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\n             &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\nSystem.out.println(log);\n</code></pre>\n<p>That snippet above is from inside your method <code>task()</code>. It displays something like</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Thread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\n</code></pre>\n<p>But the value of &quot;Thread&quot; is not the thread count or number, but the number of the Task (more precise, of the <code>Runnable</code> returned by <code>task()</code>). Meaning that your code does not tell you anything about the running threads.</p>\n<p>Your statement</p>\n<blockquote>\n<p>In the above program, you will see the 10 Threads being executed</p>\n</blockquote>\n<p>is wrong. Because the code is in <code>task()</code>, it shows just that this method is executed, but nothing about threads.</p>\n<p>You forgot that during its lifetime a <code>Thread</code> from a pool can execute multiple <code>Runnable</code> instances, one after the other. That's why you have a pool. Refer to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html\" rel=\"nofollow noreferrer\">the Javadoc for <code>Executor</code></a> that describes the intention of the <code>ExecutorService</code>.</p>\n"},{"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1691589510,"creation_date":1691589510,"answer_id":76868499,"question_id":76868087,"body_markdown":"I am answering my question. Thanks to @tgdavies for providing the exception thrown in JDK 20. The solution is to increase the maxPoolSize.\r\n\r\nAfter setting the maxPoolSize to something like\r\n```java\r\nthreadPoolExecutor.setMaximumPoolSize(Runtime.getRuntime().availableProcessors());\r\n```\r\nThings are executing parallely.","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>I am answering my question. Thanks to @tgdavies for providing the exception thrown in JDK 20. The solution is to increase the maxPoolSize.</p>\n<p>After setting the maxPoolSize to something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>threadPoolExecutor.setMaximumPoolSize(Runtime.getRuntime().availableProcessors());\n</code></pre>\n<p>Things are executing parallely.</p>\n"}],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76868499,"answer_count":2,"score":-1,"last_activity_date":1691589510,"creation_date":1691586310,"question_id":76868087,"body_markdown":"My problem is related to the executor returned by `Executors.newFixedThreadPool(1)` which is explained after the following program:\r\n\r\n```java\r\npublic static void main(String[] args) throws InterruptedException {\r\n    AtomicInteger atomicInteger = new AtomicInteger(0);\r\n    ThreadPoolExecutor threadPoolExecutor = (ThreadPoolExecutor) Executors.newFixedThreadPool(1);\r\n    List&lt;Runnable&gt; runnableList = new ArrayList&lt;&gt;();\r\n    for (int i = 0; i &lt; 10; i++) {\r\n        runnableList.add(task(atomicInteger.incrementAndGet(), threadPoolExecutor));\r\n    }\r\n    System.out.println(&quot;Starting Stage-1.&quot;);\r\n    threadPoolExecutor.setCorePoolSize(4);\r\n    runnableList.forEach(threadPoolExecutor::execute);\r\n\r\n    waitForCompletion(threadPoolExecutor);\r\n    System.out.println(&quot;Stage-1 complete.&quot;);\r\n\r\n    threadPoolExecutor.setCorePoolSize(0);\r\n    TimeUnit.SECONDS.sleep(10);\r\n\r\n    System.out.println(&quot;Starting Stage-2.&quot;);\r\n    threadPoolExecutor.setCorePoolSize(6);\r\n    runnableList.forEach(threadPoolExecutor::execute);\r\n\r\n    waitForCompletion(threadPoolExecutor);\r\n    System.out.println(&quot;Stage-2 complete.&quot;);\r\n    threadPoolExecutor.shutdown();\r\n}\r\n\r\nstatic Runnable task(int count, ThreadPoolExecutor threadPoolExecutor) {\r\n    return () -&gt; {\r\n        LocalTime start;\r\n        LocalTime end;\r\n        try {\r\n            start = LocalTime.now();\r\n            TimeUnit.SECONDS.sleep(5);\r\n            end = LocalTime.now();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        String log = &quot;Thread: &quot; + count +\r\n                &quot;,  Start: &quot; + start +\r\n                &quot;,  Stop: &quot; + end +\r\n                &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\r\n                &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\r\n        System.out.println(log);\r\n    };\r\n}\r\n\r\nstatic void waitForCompletion(ThreadPoolExecutor threadPoolExecutor) throws InterruptedException {\r\n    while (threadPoolExecutor.getActiveCount() != 0) {\r\n        TimeUnit.SECONDS.sleep(5);\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nStarting Stage-1.\r\nThread: 2,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 3,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 1,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 4,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 6,  Start: 18:27:17.492,  Stop: 18:27:22.497,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 7,  Start: 18:27:22.497,  Stop: 18:27:27.502,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 8,  Start: 18:27:27.502,  Stop: 18:27:32.506,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 9,  Start: 18:27:32.506,  Stop: 18:27:37.512,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 10,  Start: 18:27:37.512,  Stop: 18:27:42.515,  ActiveCount: 1,  CorePoolSize: 4\r\nStage-1 complete.\r\nStarting Stage-2.\r\nThread: 3,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\r\nThread: 5,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\r\nThread: 6,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 5,  CorePoolSize: 6\r\nThread: 4,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\r\nThread: 2,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\r\nThread: 1,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 7,  Start: 18:28:02.507,  Stop: 18:28:07.512,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 8,  Start: 18:28:07.512,  Stop: 18:28:12.517,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 9,  Start: 18:28:12.517,  Stop: 18:28:17.522,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 10,  Start: 18:28:17.522,  Stop: 18:28:22.524,  ActiveCount: 1,  CorePoolSize: 6\r\nStage-2 complete.\r\n```\r\n\r\nIn the above program, you will see the 10 Threads being executed, first with a corePoolSize of 4. After the execution of the first four threads, the execution continues executing sequentially even though the corePoolSize is set higher than 1. I have demonstrated the above findings twice with 2 stages with corePoolSize of 4 and 6, confirming the uniformity of the behaviour.\r\n\r\nMy expectation is when there is empty slot in the executor, it should utilise that.\r\n\r\n\r\n","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>My problem is related to the executor returned by <code>Executors.newFixedThreadPool(1)</code> which is explained after the following program:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws InterruptedException {\n    AtomicInteger atomicInteger = new AtomicInteger(0);\n    ThreadPoolExecutor threadPoolExecutor = (ThreadPoolExecutor) Executors.newFixedThreadPool(1);\n    List&lt;Runnable&gt; runnableList = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; 10; i++) {\n        runnableList.add(task(atomicInteger.incrementAndGet(), threadPoolExecutor));\n    }\n    System.out.println(&quot;Starting Stage-1.&quot;);\n    threadPoolExecutor.setCorePoolSize(4);\n    runnableList.forEach(threadPoolExecutor::execute);\n\n    waitForCompletion(threadPoolExecutor);\n    System.out.println(&quot;Stage-1 complete.&quot;);\n\n    threadPoolExecutor.setCorePoolSize(0);\n    TimeUnit.SECONDS.sleep(10);\n\n    System.out.println(&quot;Starting Stage-2.&quot;);\n    threadPoolExecutor.setCorePoolSize(6);\n    runnableList.forEach(threadPoolExecutor::execute);\n\n    waitForCompletion(threadPoolExecutor);\n    System.out.println(&quot;Stage-2 complete.&quot;);\n    threadPoolExecutor.shutdown();\n}\n\nstatic Runnable task(int count, ThreadPoolExecutor threadPoolExecutor) {\n    return () -&gt; {\n        LocalTime start;\n        LocalTime end;\n        try {\n            start = LocalTime.now();\n            TimeUnit.SECONDS.sleep(5);\n            end = LocalTime.now();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n        String log = &quot;Thread: &quot; + count +\n                &quot;,  Start: &quot; + start +\n                &quot;,  Stop: &quot; + end +\n                &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\n                &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\n        System.out.println(log);\n    };\n}\n\nstatic void waitForCompletion(ThreadPoolExecutor threadPoolExecutor) throws InterruptedException {\n    while (threadPoolExecutor.getActiveCount() != 0) {\n        TimeUnit.SECONDS.sleep(5);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Starting Stage-1.\nThread: 2,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 3,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 1,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 4,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\nThread: 6,  Start: 18:27:17.492,  Stop: 18:27:22.497,  ActiveCount: 1,  CorePoolSize: 4\nThread: 7,  Start: 18:27:22.497,  Stop: 18:27:27.502,  ActiveCount: 1,  CorePoolSize: 4\nThread: 8,  Start: 18:27:27.502,  Stop: 18:27:32.506,  ActiveCount: 1,  CorePoolSize: 4\nThread: 9,  Start: 18:27:32.506,  Stop: 18:27:37.512,  ActiveCount: 1,  CorePoolSize: 4\nThread: 10,  Start: 18:27:37.512,  Stop: 18:27:42.515,  ActiveCount: 1,  CorePoolSize: 4\nStage-1 complete.\nStarting Stage-2.\nThread: 3,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\nThread: 5,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\nThread: 6,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 5,  CorePoolSize: 6\nThread: 4,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\nThread: 2,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\nThread: 1,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 1,  CorePoolSize: 6\nThread: 7,  Start: 18:28:02.507,  Stop: 18:28:07.512,  ActiveCount: 1,  CorePoolSize: 6\nThread: 8,  Start: 18:28:07.512,  Stop: 18:28:12.517,  ActiveCount: 1,  CorePoolSize: 6\nThread: 9,  Start: 18:28:12.517,  Stop: 18:28:17.522,  ActiveCount: 1,  CorePoolSize: 6\nThread: 10,  Start: 18:28:17.522,  Stop: 18:28:22.524,  ActiveCount: 1,  CorePoolSize: 6\nStage-2 complete.\n</code></pre>\n<p>In the above program, you will see the 10 Threads being executed, first with a corePoolSize of 4. After the execution of the first four threads, the execution continues executing sequentially even though the corePoolSize is set higher than 1. I have demonstrated the above findings twice with 2 stages with corePoolSize of 4 and 6, confirming the uniformity of the behaviour.</p>\n<p>My expectation is when there is empty slot in the executor, it should utilise that.</p>\n"},{"tags":["java","sonarlint-intellij","cognitive-complexity"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":2,"creation_date":1691588689,"post_id":76868330,"comment_id":135512039,"body_markdown":"Extracting a part of the logic to another method will help decrease the complexity. Many IDEs can help you do that easily.","body":"Extracting a part of the logic to another method will help decrease the complexity. Many IDEs can help you do that easily."},{"owner":{"account_id":6148867,"reputation":4677,"user_id":4793951,"display_name":"Zircon"},"score":1,"creation_date":1691589004,"post_id":76868330,"comment_id":135512119,"body_markdown":"I&#39;m not sure exactly how SonarLint calculates Cognitive Complexity, but what version of Java are you using? Are Streams available to you? At the least, it would make your code much more readable.","body":"I&#39;m not sure exactly how SonarLint calculates Cognitive Complexity, but what version of Java are you using? Are Streams available to you? At the least, it would make your code much more readable."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1691589068,"post_id":76868330,"comment_id":135512135,"body_markdown":"You could start by extracting the `for (JsonElement index : indexes) {` loop. But your goal should not be to get rid of the warning but to make your code as clear as possible. As such, you should make sure the method makes sense and has a descriptive name. SonarLint&#39;s cognitive complexity is calculated using the number of control flow statements (e.g. conditions or loops) while increasing the weight of nested statements. For example, if you have an `if` in a `while` loop, you get 1 &quot;complexity&quot; for the `while` and 2 for the `if` because it&#39;s nested once.","body":"You could start by extracting the <code>for (JsonElement index : indexes) {</code> loop. But your goal should not be to get rid of the warning but to make your code as clear as possible. As such, you should make sure the method makes sense and has a descriptive name. SonarLint&#39;s cognitive complexity is calculated using the number of control flow statements (e.g. conditions or loops) while increasing the weight of nested statements. For example, if you have an <code>if</code> in a <code>while</code> loop, you get 1 &quot;complexity&quot; for the <code>while</code> and 2 for the <code>if</code> because it&#39;s nested once."},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1691671410,"post_id":76868330,"comment_id":135524754,"body_markdown":"@dan1st extracting the for loop you mentioned removed the error. \nThat was so easy. I understand though that the methods should be more descriptive","body":"@dan1st extracting the for loop you mentioned removed the error.  That was so easy. I understand though that the methods should be more descriptive"},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1692383306,"post_id":76868330,"comment_id":135620515,"body_markdown":"@dan1st you can post your solution, so I can mark it","body":"@dan1st you can post your solution, so I can mark it"}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691589443,"creation_date":1691589443,"answer_id":76868489,"question_id":76868330,"body_markdown":"Below I listed a couple of hints based on your code. Of course, there are many many more. You might find Clean Code by Robert Martin an interesting read.\r\n\r\n 1. Extract code that is in for loops to a separate method (in your case you can do this twice)\r\n 2. Extract code that is in if or else conditions to separate methods\r\n```\r\nif (condition){\r\n   doSomething();\r\n} else{\r\n   doSomethingElse();\r\n}\r\n```\r\n 3. Avoid `continue`\r\n\r\nBetter to change\r\n```\r\nif (indexes == null)\r\n                continue;\r\n```\r\nto\r\n```\r\nif (indexes != null){\r\n    for (JsonElement index : indexes) {...}\r\n}\r\n```","title":"Reduce cognitive Complexity of a method from 26 to 15","body":"<p>Below I listed a couple of hints based on your code. Of course, there are many many more. You might find Clean Code by Robert Martin an interesting read.</p>\n<ol>\n<li>Extract code that is in for loops to a separate method (in your case you can do this twice)</li>\n<li>Extract code that is in if or else conditions to separate methods</li>\n</ol>\n<pre><code>if (condition){\n   doSomething();\n} else{\n   doSomethingElse();\n}\n</code></pre>\n<ol start=\"3\">\n<li>Avoid <code>continue</code></li>\n</ol>\n<p>Better to change</p>\n<pre><code>if (indexes == null)\n                continue;\n</code></pre>\n<p>to</p>\n<pre><code>if (indexes != null){\n    for (JsonElement index : indexes) {...}\n}\n</code></pre>\n"}],"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691589443,"creation_date":1691588343,"question_id":76868330,"body_markdown":"I have the following code:  \r\n\r\n    private void generateKeyList(String pdm, List&lt;Key&gt; uKs,\r\n                                     List&lt;PhysicalKey&gt; pKs) {\r\n            if (pKs == null &amp;&amp; uKs == null)\r\n                return;\r\n            JsonObject concepts = getConcepts(pdm);\r\n            String indexTypeRequired = uKs == null ? &quot;PRIMARY-KEY&quot; : &quot;UNIQUE&quot;;\r\n            for (String concept : concepts.keySet()) {\r\n                var indexes = concepts.getAsJsonObject(concept).getAsJsonArray(&quot;indexes&quot;);\r\n                if (indexes == null)\r\n                    continue;\r\n                for (JsonElement index : indexes) {\r\n                    JsonObject indexO = (JsonObject) index;\r\n                    var indexType = indexO.getAsJsonPrimitive(&quot;indexType&quot;).getAsString();\r\n                    var name = indexO.getAsJsonPrimitive(&quot;name&quot;).getAsString();\r\n                    var keys = indexO.getAsJsonArray(&quot;key&quot;).getAsJsonArray();\r\n                    if (indexType.equals(indexTypeRequired)) {\r\n                        for (JsonElement indexKey : keys) {\r\n                            var keyString = indexKey.getAsString();\r\n                            var key = pKs == null ? new Key() : new PhysicalKey();\r\n                            key.setName(name).setType(indexType).setTable(concept).setColumn(keyString);\r\n                            if (uKs == null)\r\n                                pKs.add((PhysicalKey) key);\r\n                            else\r\n                                uKs.add(key);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\nI am getting an issue from sonarLint that the Cognitive Complexity of this code is 26 and it should be &lt;=15  \r\nNot sure how to reduce the complexity here.  \r\nAny ideas of hints?\r\n\r\n","title":"Reduce cognitive Complexity of a method from 26 to 15","body":"<p>I have the following code:</p>\n<pre><code>private void generateKeyList(String pdm, List&lt;Key&gt; uKs,\n                                 List&lt;PhysicalKey&gt; pKs) {\n        if (pKs == null &amp;&amp; uKs == null)\n            return;\n        JsonObject concepts = getConcepts(pdm);\n        String indexTypeRequired = uKs == null ? &quot;PRIMARY-KEY&quot; : &quot;UNIQUE&quot;;\n        for (String concept : concepts.keySet()) {\n            var indexes = concepts.getAsJsonObject(concept).getAsJsonArray(&quot;indexes&quot;);\n            if (indexes == null)\n                continue;\n            for (JsonElement index : indexes) {\n                JsonObject indexO = (JsonObject) index;\n                var indexType = indexO.getAsJsonPrimitive(&quot;indexType&quot;).getAsString();\n                var name = indexO.getAsJsonPrimitive(&quot;name&quot;).getAsString();\n                var keys = indexO.getAsJsonArray(&quot;key&quot;).getAsJsonArray();\n                if (indexType.equals(indexTypeRequired)) {\n                    for (JsonElement indexKey : keys) {\n                        var keyString = indexKey.getAsString();\n                        var key = pKs == null ? new Key() : new PhysicalKey();\n                        key.setName(name).setType(indexType).setTable(concept).setColumn(keyString);\n                        if (uKs == null)\n                            pKs.add((PhysicalKey) key);\n                        else\n                            uKs.add(key);\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>I am getting an issue from sonarLint that the Cognitive Complexity of this code is 26 and it should be &lt;=15<br />\nNot sure how to reduce the complexity here.<br />\nAny ideas of hints?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":120028,"reputation":35734,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1299630228,"creation_date":1299590946,"answer_id":5233133,"question_id":5233012,"body_markdown":"See `java.text.NumberFormat` and `DecimalFormat`:\r\n\r\n     NumberFormat nf = new DecimalFormat (&quot;990.0&quot;);\r\n     double d = nf.parse (text);\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>See <code>java.text.NumberFormat</code> and <code>DecimalFormat</code>:</p>\n\n<pre><code> NumberFormat nf = new DecimalFormat (\"990.0\");\n double d = nf.parse (text);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1455801454,"creation_date":1299591009,"answer_id":5233147,"question_id":5233012,"body_markdown":"The `Float.parseFloat()` method is not locale-dependent. It expects a dot as decimal separator. If the decimal separator in your input is always dot, you can use this safely.\r\n\r\nThe `NumberFormat` class provides locale-aware parse and format should you need to adapt for different locales.","title":"Convert String with Dot or Comma to Float Number","body":"<p>The <code>Float.parseFloat()</code> method is not locale-dependent. It expects a dot as decimal separator. If the decimal separator in your input is always dot, you can use this safely.</p>\n\n<p>The <code>NumberFormat</code> class provides locale-aware parse and format should you need to adapt for different locales.</p>\n"},{"tags":[],"owner":{"account_id":27505,"reputation":32693,"user_id":72673,"accept_rate":72,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1299593973,"creation_date":1299593667,"answer_id":5233638,"question_id":5233012,"body_markdown":"    DecimalFormatSymbols symbols = new DecimalFormatSymbols();\r\n    symbols.setDecimalSeparator(&#39;.&#39;);\r\n    DecimalFormat format = new DecimalFormat(&quot;0.#&quot;);\r\n    format.setDecimalFormatSymbols(symbols);\r\n    float f = format.parse(str).floatValue();\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<pre><code>DecimalFormatSymbols symbols = new DecimalFormatSymbols();\nsymbols.setDecimalSeparator('.');\nDecimalFormat format = new DecimalFormat(\"0.#\");\nformat.setDecimalFormatSymbols(symbols);\nfloat f = format.parse(str).floatValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1326635,"reputation":700,"user_id":1271317,"display_name":"flamming_python"},"down_vote_count":12,"up_vote_count":37,"is_accepted":false,"score":25,"last_activity_date":1360325492,"creation_date":1354863181,"answer_id":13758320,"question_id":5233012,"body_markdown":"    valueStr = valueStr.replace(&#39;,&#39;, &#39;.&#39;);\r\n    return new Float(valueStr);\r\n\r\nDone","title":"Convert String with Dot or Comma to Float Number","body":"<pre><code>valueStr = valueStr.replace(',', '.');\nreturn new Float(valueStr);\n</code></pre>\n\n<p>Done</p>\n"},{"tags":[],"owner":{"account_id":3845435,"reputation":63,"user_id":3187137,"display_name":"user3187137"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1470403945,"creation_date":1389526417,"answer_id":21074114,"question_id":5233012,"body_markdown":"What about this:\r\n \r\n    Float floatFromStringOrZero(String s){\r\n        Float val = Float.valueOf(0);\r\n        try{\r\n            val = Float.valueOf(s);\r\n        } catch(NumberFormatException ex){\r\n            DecimalFormat df = new DecimalFormat();\r\n            Number n = null;\r\n            try{\r\n                n = df.parse(s);\r\n            } catch(ParseException ex2){\r\n            }\r\n            if(n != null)\r\n                val = n.floatValue();\r\n        }\r\n        return val;\r\n    }\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>What about this:</p>\n\n<pre><code>Float floatFromStringOrZero(String s){\n    Float val = Float.valueOf(0);\n    try{\n        val = Float.valueOf(s);\n    } catch(NumberFormatException ex){\n        DecimalFormat df = new DecimalFormat();\n        Number n = null;\n        try{\n            n = df.parse(s);\n        } catch(ParseException ex2){\n        }\n        if(n != null)\n            val = n.floatValue();\n    }\n    return val;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5400671,"reputation":1252,"user_id":4300670,"display_name":"Aliton Oliveira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551832678,"creation_date":1551832678,"answer_id":55013765,"question_id":5233012,"body_markdown":"I hope this piece of code may help you.\r\n\r\n    public static Float getDigit(String quote){\r\n            char decimalSeparator = new DecimalFormatSymbols().getDecimalSeparator();\r\n            String regex = &quot;[^0-9&quot; + decimalSeparator + &quot;]&quot;;\r\n            String valueOnlyDigit = quote.replaceAll(regex, &quot;&quot;);\r\n    \r\n            if (String.valueOf(decimalSeparator).equals(&quot;,&quot;)) {\r\n                valueOnlyDigit = valueOnlyDigit.replace(&quot;,&quot;, &quot;.&quot;);\r\n                //Log.i(&quot;debinf purcadap&quot;, &quot;substituted comma by dot&quot;);\r\n            }\r\n    \r\n            try {\r\n                return Float.parseFloat(valueOnlyDigit);\r\n            } catch (ArithmeticException | NumberFormatException e) {\r\n                //Log.i(&quot;debinf purcadap&quot;, &quot;Error in getMoneyAsDecimal&quot;, e);\r\n                return null;\r\n            }\r\n        }\r\n\r\n\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>I hope this piece of code may help you.</p>\n\n<pre><code>public static Float getDigit(String quote){\n        char decimalSeparator = new DecimalFormatSymbols().getDecimalSeparator();\n        String regex = \"[^0-9\" + decimalSeparator + \"]\";\n        String valueOnlyDigit = quote.replaceAll(regex, \"\");\n\n        if (String.valueOf(decimalSeparator).equals(\",\")) {\n            valueOnlyDigit = valueOnlyDigit.replace(\",\", \".\");\n            //Log.i(\"debinf purcadap\", \"substituted comma by dot\");\n        }\n\n        try {\n            return Float.parseFloat(valueOnlyDigit);\n        } catch (ArithmeticException | NumberFormatException e) {\n            //Log.i(\"debinf purcadap\", \"Error in getMoneyAsDecimal\", e);\n            return null;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23808129,"reputation":924,"user_id":17817329,"display_name":"robni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641463046,"creation_date":1641154519,"answer_id":70559426,"question_id":5233012,"body_markdown":"You can use the placeholder %s-String for any primitive type.\r\n\r\n```java\r\nfloat x = 3.15f, y = 1.2345f;\r\n\r\nSystem.out.printf(&quot;%.4s and %.5s&quot;, x, y);\r\n```\r\n**Output: 3.15 and 1.234**\r\n\r\n**%s is always english formatting regardless of localization.**\r\n\r\nIf you want a **specif local formatting**, you could also do:\r\n```java\r\nimport java.util.Locale;\r\n\r\nfloat x = 3.15f, y = 1.2345f;\r\n\r\nSystem.out.printf(Locale.GERMAN, &quot;%.2f and %.4f&quot;, x, y);\r\n```\r\n**Output: 3,15 and 1,2345**","title":"Convert String with Dot or Comma to Float Number","body":"<p>You can use the placeholder %s-String for any primitive type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>float x = 3.15f, y = 1.2345f;\n\nSystem.out.printf(&quot;%.4s and %.5s&quot;, x, y);\n</code></pre>\n<p><strong>Output: 3.15 and 1.234</strong></p>\n<p><strong>%s is always english formatting regardless of localization.</strong></p>\n<p>If you want a <strong>specif local formatting</strong>, you could also do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Locale;\n\nfloat x = 3.15f, y = 1.2345f;\n\nSystem.out.printf(Locale.GERMAN, &quot;%.2f and %.4f&quot;, x, y);\n</code></pre>\n<p><strong>Output: 3,15 and 1,2345</strong></p>\n"},{"tags":[],"owner":{"account_id":21110101,"reputation":1,"user_id":15546121,"display_name":"Henry Lang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691588700,"creation_date":1691522667,"answer_id":76862653,"question_id":5233012,"body_markdown":"To convert the string to float regardless of localization you can always replace the comma &quot;,&quot; with the dot &quot;.&quot; using the `str.replace()` method, as following:\r\n\r\n    // Set value as string first\r\n    String s = &quot;9,9&quot;;\r\n    // Replacing , with .\r\n    s = s.replace(&quot;,&quot;, &quot;.&quot;);\r\n    // Parsing the value\r\n    float x = Float.parseFloat(s);\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>To convert the string to float regardless of localization you can always replace the comma &quot;,&quot; with the dot &quot;.&quot; using the <code>str.replace()</code> method, as following:</p>\n<pre><code>// Set value as string first\nString s = &quot;9,9&quot;;\n// Replacing , with .\ns = s.replace(&quot;,&quot;, &quot;.&quot;);\n// Parsing the value\nfloat x = Float.parseFloat(s);\n</code></pre>\n"}],"owner":{"account_id":716842,"reputation":1385,"user_id":644553,"accept_rate":0,"display_name":"Dayanne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103340,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":8,"score":34,"last_activity_date":1691588700,"creation_date":1299590384,"question_id":5233012,"body_markdown":"I always like input in my function to get numbers that range from 0.1 to 999.9 (the decimal part is always separated by &#39;.&#39;, if there is no decimal then there is no &#39;.&#39; for example 9 or 7 .\r\n\r\nHow do I convert this String to float value regardless of localization (some countries use &#39;,&#39; to separate decimal part of number. I always get it with the &#39;.&#39;)? Does this depend on local computer settings?","title":"Convert String with Dot or Comma to Float Number","body":"<p>I always like input in my function to get numbers that range from 0.1 to 999.9 (the decimal part is always separated by '.', if there is no decimal then there is no '.' for example 9 or 7 .</p>\n\n<p>How do I convert this String to float value regardless of localization (some countries use ',' to separate decimal part of number. I always get it with the '.')? Does this depend on local computer settings?</p>\n"},{"tags":["java","spring","spring-mvc","scheduled-tasks"],"comments":[{"owner":{"account_id":8434884,"reputation":613,"user_id":6329331,"display_name":"MiGo"},"score":0,"creation_date":1668083763,"post_id":43664259,"comment_id":131323748,"body_markdown":"Can you please answer this ?\nhttps://stackoverflow.com/questions/74376294/how-to-gracefully-shutdown-spring-boot-app-using-configuration-and-programatical","body":"Can you please answer this ? <a href=\"https://stackoverflow.com/questions/74376294/how-to-gracefully-shutdown-spring-boot-app-using-configuration-and-programatical\" title=\"how to gracefully shutdown spring boot app using configuration and programatical\">stackoverflow.com/questions/74376294/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":8081998,"reputation":1365,"user_id":6090847,"display_name":"Matej Marconak"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1493327949,"creation_date":1493327949,"answer_id":43668082,"question_id":43664259,"body_markdown":"You need update configuration of `ThreadPoolTaskScheduler`. Set true for `waitForJobsToCompleteOnShutdown` (method `setWaitForTasksToCompleteOnShutdown`).\r\n\r\nFrom documentation:\r\n\r\n&gt; Set whether to wait for scheduled tasks to complete on shutdown, not interrupting running tasks and executing all tasks in the queue.\r\nDefault is &quot;false&quot;, shutting down immediately through interrupting ongoing tasks and clearing the queue. Switch this flag to &quot;true&quot; if you prefer fully completed tasks at the expense of a longer shutdown phase.\r\n\r\n","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>You need update configuration of <code>ThreadPoolTaskScheduler</code>. Set true for <code>waitForJobsToCompleteOnShutdown</code> (method <code>setWaitForTasksToCompleteOnShutdown</code>).</p>\n\n<p>From documentation:</p>\n\n<blockquote>\n  <p>Set whether to wait for scheduled tasks to complete on shutdown, not interrupting running tasks and executing all tasks in the queue.\n  Default is \"false\", shutting down immediately through interrupting ongoing tasks and clearing the queue. Switch this flag to \"true\" if you prefer fully completed tasks at the expense of a longer shutdown phase.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493363361,"creation_date":1493363361,"answer_id":43674132,"question_id":43664259,"body_markdown":"@Matej is right. Some thing like this should do the trick   \r\n\r\n     @Bean\r\n      public ThreadPoolTaskScheduler setSchedulerToWait(ThreadPoolTaskScheduler threadPoolTaskScheduler){\r\n       threadPoolTaskScheduler.setWaitForTasksToCompleteOnShutdown(true);\r\n       return threadPoolTaskScheduler;\r\n     }","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>@Matej is right. Some thing like this should do the trick   </p>\n\n<pre><code> @Bean\n  public ThreadPoolTaskScheduler setSchedulerToWait(ThreadPoolTaskScheduler threadPoolTaskScheduler){\n   threadPoolTaskScheduler.setWaitForTasksToCompleteOnShutdown(true);\n   return threadPoolTaskScheduler;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1120462,"reputation":2781,"user_id":1108890,"accept_rate":48,"display_name":"GokcenG"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1563809290,"creation_date":1563809290,"answer_id":57149240,"question_id":43664259,"body_markdown":"Starting from Spring Boot 2.1.0, you can use this:\r\n\r\n    @Bean\r\n    TaskSchedulerCustomizer taskSchedulerCustomizer() {\r\n        return taskScheduler -&gt; {\r\n            taskScheduler.setAwaitTerminationSeconds(60);\r\n            taskScheduler.setWaitForTasksToCompleteOnShutdown(true);\r\n        };\r\n    }\r\n\r\n`TaskSchedulerCustomizer` will be used to modify configured `ThreadPoolTaskScheduler`\r\n\r\nDetails: \r\n\r\n 1. [ExecutorConfigurationSupport][1]\r\n 2. [TaskSchedulerCustomizer][2]\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ExecutorConfigurationSupport.html#setAwaitTerminationSeconds-int-\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/task/TaskSchedulerCustomizer.html","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>Starting from Spring Boot 2.1.0, you can use this:</p>\n\n<pre><code>@Bean\nTaskSchedulerCustomizer taskSchedulerCustomizer() {\n    return taskScheduler -&gt; {\n        taskScheduler.setAwaitTerminationSeconds(60);\n        taskScheduler.setWaitForTasksToCompleteOnShutdown(true);\n    };\n}\n</code></pre>\n\n<p><code>TaskSchedulerCustomizer</code> will be used to modify configured <code>ThreadPoolTaskScheduler</code></p>\n\n<p>Details: </p>\n\n<ol>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ExecutorConfigurationSupport.html#setAwaitTerminationSeconds-int-\" rel=\"noreferrer\">ExecutorConfigurationSupport</a></li>\n<li><a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/task/TaskSchedulerCustomizer.html\" rel=\"noreferrer\">TaskSchedulerCustomizer</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691588670,"creation_date":1691588670,"answer_id":76868371,"question_id":43664259,"body_markdown":"In later versions of spring boot you can also set these properties via `application.properties`. For example\r\n\r\n```\r\nserver.shutdown=graceful\r\nspring.lifecycle.timeout-per-shutdown-phase=60s\r\nspring.task.execution.shutdown.await-termination=true\r\nspring.task.execution.shutdown.await-termination-period=60s\r\nspring.task.scheduling.shutdown.await-termination=true\r\nspring.task.scheduling.shutdown.await-termination-period=60s\r\n```","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>In later versions of spring boot you can also set these properties via <code>application.properties</code>. For example</p>\n<pre><code>server.shutdown=graceful\nspring.lifecycle.timeout-per-shutdown-phase=60s\nspring.task.execution.shutdown.await-termination=true\nspring.task.execution.shutdown.await-termination-period=60s\nspring.task.scheduling.shutdown.await-termination=true\nspring.task.scheduling.shutdown.await-termination-period=60s\n</code></pre>\n"}],"owner":{"account_id":1613240,"reputation":2365,"user_id":1491636,"accept_rate":46,"display_name":"user1491636"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13956,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":43668082,"answer_count":4,"score":8,"last_activity_date":1691588670,"creation_date":1493313783,"question_id":43664259,"body_markdown":"I have a Spring-Boot application with a bean running a scheduled task at about 1 minute intervals, and this bean has a `@PreDestroy` method. \r\n\r\nIs there a solution for allowing a task which is currently being executed to complete - or at least given some time to complete - before the life cycle reaches the pre-destroy phase? ","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>I have a Spring-Boot application with a bean running a scheduled task at about 1 minute intervals, and this bean has a <code>@PreDestroy</code> method. </p>\n\n<p>Is there a solution for allowing a task which is currently being executed to complete - or at least given some time to complete - before the life cycle reaches the pre-destroy phase? </p>\n"},{"tags":["java","spring","spring-boot","lombok"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":1,"creation_date":1691583409,"post_id":76867601,"comment_id":135510810,"body_markdown":"This might be relevant - [Is there a Lombok way to initialise a final field that is calculated from other fields?](https://stackoverflow.com/questions/47187111/is-there-a-lombok-way-to-initialise-a-final-field-that-is-calculated-from-other). But that will require you to have `CollectorRegistry` as an instance variable.","body":"This might be relevant - <a href=\"https://stackoverflow.com/questions/47187111/is-there-a-lombok-way-to-initialise-a-final-field-that-is-calculated-from-other\">Is there a Lombok way to initialise a final field that is calculated from other fields?</a>. But that will require you to have <code>CollectorRegistry</code> as an instance variable."}],"answers":[{"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691588217,"creation_date":1691588217,"answer_id":76868314,"question_id":76867601,"body_markdown":"Based on your current design in that `UserController` is a singleton and it has a Counter, why don&#39;t you just make Counter a spring bean as well? That way, you don&#39;t need the special constructor? Something like this..\r\n\r\n```\r\n@Configuration\r\npublic class CounterConfigSample {\r\n\r\n  /* Spring will auto-inject CollectorRegistry here*/\r\n  @Bean\r\n  public Counter registerCount(CollectorRegistry collectorRegistry) {\r\n     return Counter.build()\r\n                .name(&quot;register_count&quot;)\r\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\r\n                .help(&quot;Number of registrations&quot;)\r\n                .register(collectorRegistry);\r\n\r\n   }\r\n\r\n}\r\n```\r\n\r\nThen in your `UserController`\r\n\r\n```\r\n public UpdateUserController(UserService userService, UserDetailsService userDetailsService, Counter registerCount) {\r\n        this.userService = userService;\r\n        this.userDetailsService = userDetailsService;\r\n        this.registerCount = registerCount;\r\n    }","title":"Lombok Constructor annotation with a single custom field initialization","body":"<p>Based on your current design in that <code>UserController</code> is a singleton and it has a Counter, why don't you just make Counter a spring bean as well? That way, you don't need the special constructor? Something like this..</p>\n<pre><code>@Configuration\npublic class CounterConfigSample {\n\n  /* Spring will auto-inject CollectorRegistry here*/\n  @Bean\n  public Counter registerCount(CollectorRegistry collectorRegistry) {\n     return Counter.build()\n                .name(&quot;register_count&quot;)\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\n                .help(&quot;Number of registrations&quot;)\n                .register(collectorRegistry);\n\n   }\n\n}\n</code></pre>\n<p>Then in your <code>UserController</code></p>\n<pre><code> public UpdateUserController(UserService userService, UserDetailsService userDetailsService, Counter registerCount) {\n        this.userService = userService;\n        this.userDetailsService = userDetailsService;\n        this.registerCount = registerCount;\n    }\n</code></pre>\n"}],"owner":{"account_id":1854386,"reputation":274,"user_id":2270948,"accept_rate":83,"display_name":"TomDoes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76868314,"answer_count":1,"score":0,"last_activity_date":1691588217,"creation_date":1691582599,"question_id":76867601,"body_markdown":"I would like to update this sample code by using a lombok annotation. But I struggle to extract the `registerCount` initialization from the constructor, because it depends on the injected `collectorRegistry` bean.\r\n\r\n```Java\r\n@RestController\r\n@RequestMapping(&quot;/api/user&quot;)\r\npublic class UserController {\r\n\r\n    private final UserService userService;\r\n    private final UserDetailsService userDetailsService;\r\n    private final Counter registerCount;\r\n\r\n    public UpdateUserController(UserService userService, UserDetailsService userDetailsService, CollectorRegistry collectorRegistry) {\r\n        this.userService = userService;\r\n        this.userDetailsService = userDetailsService;\r\n        registerCount = Counter.build()\r\n                .name(&quot;register_count&quot;)\r\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\r\n                .help(&quot;Number of registrations&quot;)\r\n                .register(collectorRegistry);\r\n    }\r\n...\r\n```\r\n\r\nIs this possible in Lombok?\r\n\r\n(I understand Lombok is not the holy grail, but I would like to know if this is also possible when using a lombok annotation like `@RequiredArgsConstructor`)","title":"Lombok Constructor annotation with a single custom field initialization","body":"<p>I would like to update this sample code by using a lombok annotation. But I struggle to extract the <code>registerCount</code> initialization from the constructor, because it depends on the injected <code>collectorRegistry</code> bean.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/user&quot;)\npublic class UserController {\n\n    private final UserService userService;\n    private final UserDetailsService userDetailsService;\n    private final Counter registerCount;\n\n    public UpdateUserController(UserService userService, UserDetailsService userDetailsService, CollectorRegistry collectorRegistry) {\n        this.userService = userService;\n        this.userDetailsService = userDetailsService;\n        registerCount = Counter.build()\n                .name(&quot;register_count&quot;)\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\n                .help(&quot;Number of registrations&quot;)\n                .register(collectorRegistry);\n    }\n...\n</code></pre>\n<p>Is this possible in Lombok?</p>\n<p>(I understand Lombok is not the holy grail, but I would like to know if this is also possible when using a lombok annotation like <code>@RequiredArgsConstructor</code>)</p>\n"},{"tags":["java","microservices","keycloak","licensing"],"answers":[{"tags":[],"owner":{"account_id":16541357,"reputation":53,"user_id":11952052,"display_name":"Jon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691588112,"creation_date":1691567576,"answer_id":76865672,"question_id":76865604,"body_markdown":"To override the `JpaUserProvider` with extension, you need to create a custom `SPI` (Service Provider Interface). Use the `UserProvide`r interface to create a custom user provider and override the methods you think you might need.\r\nHere&#39;s an example:\r\n\r\n```Java\r\n public class CustomUserProvider implements UserProvider {\r\n        \r\n        private final EntityManager em;\r\n        \r\n        public CustomUserProvider(EntityManager em) {\r\n            this.em = em;\r\n        }\r\n\r\n        @Override\r\n        public UserModel addUser(RealmModel realm, String username) {\r\n            UserModel user = ... // Add user to your database\r\n            \r\n            // Call your external microservice here\r\n            \r\n            return user;\r\n        }\r\n        \r\n        // Override other methods...\r\n    }\r\n\r\n    public class CustomUserProviderFactory implements UserProviderFactory {\r\n\r\n        @Override\r\n        public UserProvider create(KeycloakSession session) {\r\n            EntityManager em = session.getProvider(JpaConnectionProvider.class).getEntityManager();\r\n            return new CustomUserProvider(em);\r\n        }\r\n        \r\n        // Implement other methods...\r\n    }\r\n```\r\n\r\nNote: You might want to look at [this article](https://medium.com/@bcarunmail/securing-rest-api-using-keycloak-and-spring-oauth2-6ddf3a1efcc2) for more info.","title":"Override Keyclock JpaUserProvider","body":"<p>To override the <code>JpaUserProvider</code> with extension, you need to create a custom <code>SPI</code> (Service Provider Interface). Use the <code>UserProvide</code>r interface to create a custom user provider and override the methods you think you might need.\nHere's an example:</p>\n<pre><code> public class CustomUserProvider implements UserProvider {\n        \n        private final EntityManager em;\n        \n        public CustomUserProvider(EntityManager em) {\n            this.em = em;\n        }\n\n        @Override\n        public UserModel addUser(RealmModel realm, String username) {\n            UserModel user = ... // Add user to your database\n            \n            // Call your external microservice here\n            \n            return user;\n        }\n        \n        // Override other methods...\n    }\n\n    public class CustomUserProviderFactory implements UserProviderFactory {\n\n        @Override\n        public UserProvider create(KeycloakSession session) {\n            EntityManager em = session.getProvider(JpaConnectionProvider.class).getEntityManager();\n            return new CustomUserProvider(em);\n        }\n        \n        // Implement other methods...\n    }\n</code></pre>\n<p>Note: You might want to look at <a href=\"https://medium.com/@bcarunmail/securing-rest-api-using-keycloak-and-spring-oauth2-6ddf3a1efcc2\" rel=\"nofollow noreferrer\">this article</a> for more info.</p>\n"}],"owner":{"account_id":12875129,"reputation":1,"user_id":9312103,"display_name":"AlexandrGv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691588112,"creation_date":1691567077,"question_id":76865604,"body_markdown":"Dose anybody know how overide Keyclock JpaUserProvider using extension?\r\n\r\nHi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. Can anyone know how to do this?","title":"Override Keyclock JpaUserProvider","body":"<p>Dose anybody know how overide Keyclock JpaUserProvider using extension?</p>\n<p>Hi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. Can anyone know how to do this?</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":29191953,"reputation":1,"user_id":22363910,"display_name":"yi deng"},"score":0,"creation_date":1691587994,"post_id":76868257,"comment_id":135511874,"body_markdown":"Ok, there is no way to upload pictures, I want to export these picture data in the picture column in the same size of the cell sorted well, but I exported the pictures are overlapping, the size is not right","body":"Ok, there is no way to upload pictures, I want to export these picture data in the picture column in the same size of the cell sorted well, but I exported the pictures are overlapping, the size is not right"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1691600259,"post_id":76868257,"comment_id":135514696,"body_markdown":"https://stackoverflow.com/questions/33712621/how-put-a-image-in-a-cell-of-excel-java/33721090#33721090","body":"<a href=\"https://stackoverflow.com/questions/33712621/how-put-a-image-in-a-cell-of-excel-java/33721090#33721090\" title=\"how put a image in a cell of excel java\">stackoverflow.com/questions/33712621/&hellip;</a>"}],"owner":{"account_id":29191953,"reputation":1,"user_id":22363910,"display_name":"yi deng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691587708,"creation_date":1691587708,"question_id":76868257,"body_markdown":"I need to export pictures to excel in this way, what can I use to achieve this, is poi OK or is there a better solution.\r\n\r\n```\r\nprivate static void insertImagesToCell(Workbook workbook, Sheet sheet, Cell cell, String[] imageUrls) {\r\n\r\n        CreationHelper helper = workbook.getCreationHelper();\r\n        Drawing drawing = sheet.createDrawingPatriarch();\r\n\r\n        for (String imageUrl : imageUrls) {\r\n            if (imageUrl != null &amp;&amp; !imageUrl.isEmpty()) {\r\n                byte[] imageBytes = loadImage(imageUrl);\r\n                int pictureIdx = workbook.addPicture(imageBytes, Workbook.PICTURE_TYPE_JPEG);\r\n                imageBytes = null; // Clear the byte array\r\n\r\n                ClientAnchor anchor = helper.createClientAnchor();\r\n                anchor.setCol1(cell.getColumnIndex());\r\n                anchor.setRow1(cell.getRowIndex());\r\n//                anchor.setAnchorType(ClientAnchor.AnchorType.DONT_MOVE_AND_RESIZE);\r\n                Picture picture = drawing.createPicture(anchor, pictureIdx);\r\n                picture.resize(0.7874,0.7874); // Resize the picture as needed\r\n            }\r\n        }\r\n    }\r\n```\r\nI inserted the picture data into the cell this way, but the pictures kept overlapping and the picture size was strange\r\n","title":"How to export picture data fields to excel cells using java","body":"<p>I need to export pictures to excel in this way, what can I use to achieve this, is poi OK or is there a better solution.</p>\n<pre><code>private static void insertImagesToCell(Workbook workbook, Sheet sheet, Cell cell, String[] imageUrls) {\n\n        CreationHelper helper = workbook.getCreationHelper();\n        Drawing drawing = sheet.createDrawingPatriarch();\n\n        for (String imageUrl : imageUrls) {\n            if (imageUrl != null &amp;&amp; !imageUrl.isEmpty()) {\n                byte[] imageBytes = loadImage(imageUrl);\n                int pictureIdx = workbook.addPicture(imageBytes, Workbook.PICTURE_TYPE_JPEG);\n                imageBytes = null; // Clear the byte array\n\n                ClientAnchor anchor = helper.createClientAnchor();\n                anchor.setCol1(cell.getColumnIndex());\n                anchor.setRow1(cell.getRowIndex());\n//                anchor.setAnchorType(ClientAnchor.AnchorType.DONT_MOVE_AND_RESIZE);\n                Picture picture = drawing.createPicture(anchor, pictureIdx);\n                picture.resize(0.7874,0.7874); // Resize the picture as needed\n            }\n        }\n    }\n</code></pre>\n<p>I inserted the picture data into the cell this way, but the pictures kept overlapping and the picture size was strange</p>\n"},{"tags":["java","android","kotlin","audiorecord","android-audiorecord"],"comments":[{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1691579719,"post_id":76866990,"comment_id":135510006,"body_markdown":"So what is the actual value you&#39;re getting? I&#39;m asking because the documentation lists 4 different errors you could get from `read`, but you only check for 2 of them. The version of `read` that you&#39;re calling is supposed to be blocking (i.e shouldn&#39;t return until all requested data has been read or an error occurs).","body":"So what is the actual value you&#39;re getting? I&#39;m asking because the documentation lists 4 different errors you could get from <code>read</code>, but you only check for 2 of them. The version of <code>read</code> that you&#39;re calling is supposed to be blocking (i.e shouldn&#39;t return until all requested data has been read or an error occurs)."},{"owner":{"account_id":11782607,"reputation":519,"user_id":8621574,"display_name":"flamyoad"},"score":0,"creation_date":1691585155,"post_id":76866990,"comment_id":135511197,"body_markdown":"@Michael I&#39;m calling the method inside a thread. Yeah I&#39;m going to add the checks for other errors too.","body":"@Michael I&#39;m calling the method inside a thread. Yeah I&#39;m going to add the checks for other errors too."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691587158,"creation_date":1691579711,"answer_id":76867237,"question_id":76866990,"body_markdown":"Yes.  It is safe to continue.\r\n\r\nThe javadoc for that method says:\r\n\r\n&gt; Returns: zero or the positive number of bytes that were read, or one of the following error codes. The number of bytes will not exceed `sizeInBytes`. \r\n&gt; \r\n&gt; `ERROR_INVALID_OPERATION` if the object isn&#39;t properly initialized\r\n&gt;\r\n&gt; `ERROR_BAD_VALUE` if the parameters don&#39;t resolve to valid data and indexes\r\n&gt;\r\n&gt; `ERROR_DEAD_OBJECT` if the object is not valid anymore and needs to be recreated. The dead object error code is not returned if some data was successfully transferred. In this case, the error is returned at the next read()\r\n&gt;\r\n&gt; `ERROR` in case of other error\r\n\r\n\r\nIn your example, I can think of two scenarios where the result will be greater than zero and less than `audioRecordData.size`.\r\n\r\n  1.  You are close to the end of an audio file, and there aren&#39;t enough unread bytes left to fill the buffer you provided.\r\n\r\n  2.  You are reading an audio stream from a device or a remote source in &quot;real time&quot; ... and the `read` is delivering all of the audio bytes available right now.\r\n\r\nBasically, your application needs to act appropriately when `read` returns fewer bytes than you asked for.\r\n\r\nFor what it is worth, the `ERROR*` values are all less than zero, so the correct interpretation of the result is:\r\n\r\n - `result &lt; 0` - an error as indicated by the error code\r\n - `result == 0` - end of stream\r\n - `result &gt; 0` - a successful read ... and the result value is the number of bytes (or shorts) read into the supplied array or `ByteBuffer`.","title":"AudioRecord read() does not return same amount of bytes as requested in sizeInBytes","body":"<p>Yes.  It is safe to continue.</p>\n<p>The javadoc for that method says:</p>\n<blockquote>\n<p>Returns: zero or the positive number of bytes that were read, or one of the following error codes. The number of bytes will not exceed <code>sizeInBytes</code>.</p>\n<p><code>ERROR_INVALID_OPERATION</code> if the object isn't properly initialized</p>\n<p><code>ERROR_BAD_VALUE</code> if the parameters don't resolve to valid data and indexes</p>\n<p><code>ERROR_DEAD_OBJECT</code> if the object is not valid anymore and needs to be recreated. The dead object error code is not returned if some data was successfully transferred. In this case, the error is returned at the next read()</p>\n<p><code>ERROR</code> in case of other error</p>\n</blockquote>\n<p>In your example, I can think of two scenarios where the result will be greater than zero and less than <code>audioRecordData.size</code>.</p>\n<ol>\n<li><p>You are close to the end of an audio file, and there aren't enough unread bytes left to fill the buffer you provided.</p>\n</li>\n<li><p>You are reading an audio stream from a device or a remote source in &quot;real time&quot; ... and the <code>read</code> is delivering all of the audio bytes available right now.</p>\n</li>\n</ol>\n<p>Basically, your application needs to act appropriately when <code>read</code> returns fewer bytes than you asked for.</p>\n<p>For what it is worth, the <code>ERROR*</code> values are all less than zero, so the correct interpretation of the result is:</p>\n<ul>\n<li><code>result &lt; 0</code> - an error as indicated by the error code</li>\n<li><code>result == 0</code> - end of stream</li>\n<li><code>result &gt; 0</code> - a successful read ... and the result value is the number of bytes (or shorts) read into the supplied array or <code>ByteBuffer</code>.</li>\n</ul>\n"}],"owner":{"account_id":11782607,"reputation":519,"user_id":8621574,"display_name":"flamyoad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691587158,"creation_date":1691577800,"question_id":76866990,"body_markdown":"I have built voice recording feature in my app and have launched it in production for few months. From error logs, I have found that sometimes, the `read()` method in `AudioRecord` will return different number of bytes than indicated in `sizeInBytes` argument.\r\n```\r\npublic int read(byte[] audioData, int offsetInBytes, int sizeInBytes)\r\n```\r\n\r\nBelow is the code snippet to help understand better.\r\n```\r\nval audioRecordData = ByteArray(bufferSize)\r\nval length = audioRecord.read(audioRecordData, 0, audioRecordData.size)\r\nif (length == AudioRecord.ERROR_BAD_VALUE || length == AudioRecord.ERROR_INVALID_OPERATION || length != audioRecordData.size) {\r\n    // Quitting because Audio record encountered fatal exception\r\n    throw RuntimeException()\r\n}\r\n``` \r\n\r\nQuestion: Is it safe to continue calling `read()` even though the number of bytes returned by `audioRecord.read()` is not equal to the `sizeInBytes`? ","title":"AudioRecord read() does not return same amount of bytes as requested in sizeInBytes","body":"<p>I have built voice recording feature in my app and have launched it in production for few months. From error logs, I have found that sometimes, the <code>read()</code> method in <code>AudioRecord</code> will return different number of bytes than indicated in <code>sizeInBytes</code> argument.</p>\n<pre><code>public int read(byte[] audioData, int offsetInBytes, int sizeInBytes)\n</code></pre>\n<p>Below is the code snippet to help understand better.</p>\n<pre><code>val audioRecordData = ByteArray(bufferSize)\nval length = audioRecord.read(audioRecordData, 0, audioRecordData.size)\nif (length == AudioRecord.ERROR_BAD_VALUE || length == AudioRecord.ERROR_INVALID_OPERATION || length != audioRecordData.size) {\n    // Quitting because Audio record encountered fatal exception\n    throw RuntimeException()\n}\n</code></pre>\n<p>Question: Is it safe to continue calling <code>read()</code> even though the number of bytes returned by <code>audioRecord.read()</code> is not equal to the <code>sizeInBytes</code>?</p>\n"},{"tags":["java","mybatis","spring-mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":1,"creation_date":1691563186,"post_id":76862189,"comment_id":135506750,"body_markdown":"As the PK is specified, the query against `t1` would return only one `Pojo1`, but you seem to expect two `Pojo1`s. Do you repeat the query for each row of `t1`? Or, are you trying to join two separate result sets like [this test](https://github.com/mybatis/mybatis-3/blob/621de2602b7d6bc1ba65237b26409ebeb086c45a/src/test/java/org/apache/ibatis/submitted/sptests/SPTest.java#L692-L704)?","body":"As the PK is specified, the query against <code>t1</code> would return only one <code>Pojo1</code>, but you seem to expect two <code>Pojo1</code>s. Do you repeat the query for each row of <code>t1</code>? Or, are you trying to join two separate result sets like <a href=\"https://github.com/mybatis/mybatis-3/blob/621de2602b7d6bc1ba65237b26409ebeb086c45a/src/test/java/org/apache/ibatis/submitted/sptests/SPTest.java#L692-L704\" rel=\"nofollow noreferrer\">this test</a>?"},{"owner":{"account_id":3630600,"reputation":5980,"user_id":3026886,"accept_rate":93,"display_name":"rado"},"score":0,"creation_date":1691586914,"post_id":76862189,"comment_id":135511586,"body_markdown":"your observation is correct, i don&#39;t expect two `Pojo1`s. i&#39;ll update the question","body":"your observation is correct, i don&#39;t expect two <code>Pojo1</code>s. i&#39;ll update the question"},{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1691594441,"post_id":76862189,"comment_id":135513411,"body_markdown":"I see. Then you just need to 1) add `pk` to the column list of `select1` and 2) replace `column=&quot;dontKnowWhatToPutHere&quot;` with `column=&quot;pk&quot;`. The value of `pk` is passed to the nested `select2` query as the sole parameter. This is explained as &quot;nested select&quot; in the [doc](https://mybatis.org/mybatis-3/sqlmap-xml.html#nested-select-for-collection). BTW, you should use `#{key1}` instead of `${key1}` (see the [FAQ](https://github.com/mybatis/mybatis-3/wiki/FAQ#what-is-the-difference-between--and-)).","body":"I see. Then you just need to 1) add <code>pk</code> to the column list of <code>select1</code> and 2) replace <code>column=&quot;dontKnowWhatToPutHere&quot;</code> with <code>column=&quot;pk&quot;</code>. The value of <code>pk</code> is passed to the nested <code>select2</code> query as the sole parameter. This is explained as &quot;nested select&quot; in the <a href=\"https://mybatis.org/mybatis-3/sqlmap-xml.html#nested-select-for-collection\" rel=\"nofollow noreferrer\">doc</a>. BTW, you should use <code>#{key1}</code> instead of <code>${key1}</code> (see the <a href=\"https://github.com/mybatis/mybatis-3/wiki/FAQ#what-is-the-difference-between--and-\" rel=\"nofollow noreferrer\">FAQ</a>)."}],"owner":{"account_id":3630600,"reputation":5980,"user_id":3026886,"accept_rate":93,"display_name":"rado"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691586999,"creation_date":1691518286,"question_id":76862189,"body_markdown":"i have the following data (which were simplified for the purpose of this question):\r\n```\r\nt1\r\npk | a     | b   | c     | other1\r\n1  | text1 | 123 | text3 | otherValues1\r\n2  | text2 | 456 | text4 | otherValues2\r\n\r\nt2\r\npk | fk | d     | e  | other2\r\n1  | 1  | text5 | 10 | otherValues3\r\n2  | 1  | text6 | 20 | otherValues4 \r\n3  | 1  | text7 | 30 | otherValues5\r\n4  | 2  | text8 | 40 | otherValues6\r\n```\r\n\r\nwith these pojos:\r\n```\r\n@Data\r\npublic class Pojo1 {\r\n  private String p11;\r\n  private Integer p12;\r\n  private String p13;\r\n  private List&lt;Pojo2&gt; list;\r\n}\r\n\r\n@Data\r\npublic class Pojo2 {\r\n  private String p21;\r\n  private Integer p22;\r\n}\r\n```\r\ni want an output like this:\r\n```\r\n{\r\n  &quot;p11&quot;: &quot;text1&quot;,\r\n  &quot;p12&quot;: 123,\r\n  &quot;p13&quot;: &quot;text3&quot;,\r\n  &quot;list&quot;: [ \r\n            {&quot;p21&quot;:&quot;text5&quot;,&quot;p22&quot;:10},\r\n            {&quot;p21&quot;:&quot;text6&quot;,&quot;p22&quot;:20},\r\n            {&quot;p21&quot;:&quot;text7&quot;,&quot;p22&quot;:30}\r\n          ]\r\n}\r\n\r\n```\r\nunfortunately i&#39;m restriced to use this naming convention (response attributes are named differently than columns) and i have to use these 2 queries separately:\r\n```\r\nselect a, b, c, other1 from table t1 where t1.pk = ${key1}\r\n\r\nselect d, e, other2 from table t2 where t2.fk = ${key1}\r\n```\r\nthese queries are way bigger and more complex with a huge where clause not related to problem. the issue is: they cannot be joined directly and should be executed separately.\r\n\r\nthis is my mapper file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\r\n&lt;mapper namespace=&quot;something.MyMapper&quot;&gt;\r\n\r\n    &lt;resultMap id=&quot;map1&quot; type=&quot;Pojo1&quot;&gt;\r\n        &lt;result column=&quot;a&quot; property=&quot;p11&quot;/&gt;\r\n        &lt;result column=&quot;b&quot; property=&quot;p12&quot;/&gt;\r\n        &lt;result column=&quot;c&quot; property=&quot;p13&quot;/&gt;\r\n        &lt;collection property=&quot;list&quot; column=&quot;dontKnowWhatToPutHere&quot; ofType=&quot;Pojo2&quot; select=&quot;select2&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;select id=&quot;select1&quot; resultMap=&quot;map1&quot;&gt;\r\n        select a, b, c, other1 from table t1 where t1.pk = ${key1}\r\n    &lt;/select&gt;\r\n\r\n    &lt;resultMap id=&quot;map2&quot; type=&quot;Pojo2&quot;&gt;\r\n        &lt;result column=&quot;d&quot; property=&quot;p21&quot;/&gt;\r\n        &lt;result column=&quot;e&quot; property=&quot;p22&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;select id=&quot;select2&quot; resultMap=&quot;map2&quot;&gt;\r\n        select d, e, other2 from table t2 where t2.fk = ${key1}\r\n    &lt;/select&gt;\r\n\r\n&lt;/mapper&gt;\r\n```\r\n\r\nbut this is giving me an answer like this:\r\n```\r\n{\r\n  &quot;p11&quot;: &quot;text1&quot;,\r\n  &quot;p12&quot;: 123,\r\n  &quot;p13&quot;: &quot;text3&quot;,\r\n  &quot;list&quot;: null\r\n}\r\n```\r\n\r\nlooking [here](https://stackoverflow.com/a/53104888/3026886) made me realize i should create a fake hard coded column at `map1` to force the relationship (btw this worked). is this the only option considering my restrictions?","title":"how to use mybatis collection property when tables don&#39;t have direct relationship?","body":"<p>i have the following data (which were simplified for the purpose of this question):</p>\n<pre><code>t1\npk | a     | b   | c     | other1\n1  | text1 | 123 | text3 | otherValues1\n2  | text2 | 456 | text4 | otherValues2\n\nt2\npk | fk | d     | e  | other2\n1  | 1  | text5 | 10 | otherValues3\n2  | 1  | text6 | 20 | otherValues4 \n3  | 1  | text7 | 30 | otherValues5\n4  | 2  | text8 | 40 | otherValues6\n</code></pre>\n<p>with these pojos:</p>\n<pre><code>@Data\npublic class Pojo1 {\n  private String p11;\n  private Integer p12;\n  private String p13;\n  private List&lt;Pojo2&gt; list;\n}\n\n@Data\npublic class Pojo2 {\n  private String p21;\n  private Integer p22;\n}\n</code></pre>\n<p>i want an output like this:</p>\n<pre><code>{\n  &quot;p11&quot;: &quot;text1&quot;,\n  &quot;p12&quot;: 123,\n  &quot;p13&quot;: &quot;text3&quot;,\n  &quot;list&quot;: [ \n            {&quot;p21&quot;:&quot;text5&quot;,&quot;p22&quot;:10},\n            {&quot;p21&quot;:&quot;text6&quot;,&quot;p22&quot;:20},\n            {&quot;p21&quot;:&quot;text7&quot;,&quot;p22&quot;:30}\n          ]\n}\n\n</code></pre>\n<p>unfortunately i'm restriced to use this naming convention (response attributes are named differently than columns) and i have to use these 2 queries separately:</p>\n<pre><code>select a, b, c, other1 from table t1 where t1.pk = ${key1}\n\nselect d, e, other2 from table t2 where t2.fk = ${key1}\n</code></pre>\n<p>these queries are way bigger and more complex with a huge where clause not related to problem. the issue is: they cannot be joined directly and should be executed separately.</p>\n<p>this is my mapper file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\n&lt;mapper namespace=&quot;something.MyMapper&quot;&gt;\n\n    &lt;resultMap id=&quot;map1&quot; type=&quot;Pojo1&quot;&gt;\n        &lt;result column=&quot;a&quot; property=&quot;p11&quot;/&gt;\n        &lt;result column=&quot;b&quot; property=&quot;p12&quot;/&gt;\n        &lt;result column=&quot;c&quot; property=&quot;p13&quot;/&gt;\n        &lt;collection property=&quot;list&quot; column=&quot;dontKnowWhatToPutHere&quot; ofType=&quot;Pojo2&quot; select=&quot;select2&quot;/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=&quot;select1&quot; resultMap=&quot;map1&quot;&gt;\n        select a, b, c, other1 from table t1 where t1.pk = ${key1}\n    &lt;/select&gt;\n\n    &lt;resultMap id=&quot;map2&quot; type=&quot;Pojo2&quot;&gt;\n        &lt;result column=&quot;d&quot; property=&quot;p21&quot;/&gt;\n        &lt;result column=&quot;e&quot; property=&quot;p22&quot;/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=&quot;select2&quot; resultMap=&quot;map2&quot;&gt;\n        select d, e, other2 from table t2 where t2.fk = ${key1}\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>\n<p>but this is giving me an answer like this:</p>\n<pre><code>{\n  &quot;p11&quot;: &quot;text1&quot;,\n  &quot;p12&quot;: 123,\n  &quot;p13&quot;: &quot;text3&quot;,\n  &quot;list&quot;: null\n}\n</code></pre>\n<p>looking <a href=\"https://stackoverflow.com/a/53104888/3026886\">here</a> made me realize i should create a fake hard coded column at <code>map1</code> to force the relationship (btw this worked). is this the only option considering my restrictions?</p>\n"},{"tags":["java","callable"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691455059,"post_id":76855769,"comment_id":135491062,"body_markdown":"`createCSV` will be called immediately `invokeAll` returns. As long as you call `get` on the `Future`s, that will wait until the result is available. Please explain exactly what the problem is. Add ing the code of `createCSV` would help.","body":"<code>createCSV</code> will be called immediately <code>invokeAll</code> returns. As long as you call <code>get</code> on the <code>Future</code>s, that will wait until the result is available. Please explain exactly what the problem is. Add ing the code of <code>createCSV</code> would help."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1691456724,"post_id":76855769,"comment_id":135491175,"body_markdown":"[`invokeAll`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)) is defined to return only once every task has completed (normally or exceptionally). And you have to call [`get`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Future.html#get()) on each future anyway to get the result (or error), which is also defined to wait until the task is complete. I would guess you have improperly synchronized code in the tasks themselves. Please provide a [mre].","body":"<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>invokeAll</code></a> is defined to return only once every task has completed (normally or exceptionally). And you have to call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Future.html#get()\" rel=\"nofollow noreferrer\"><code>get</code></a> on each future anyway to get the result (or error), which is also defined to wait until the task is complete. I would guess you have improperly synchronized code in the tasks themselves. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1691463618,"post_id":76855769,"comment_id":135491665,"body_markdown":"What behaviour leads you to conclude that `calculateRows` *hasn&#39;t* finished running?","body":"What behaviour leads you to conclude that <code>calculateRows</code> <i>hasn&#39;t</i> finished running?"},{"owner":{"account_id":28973632,"reputation":1,"user_id":22193295,"display_name":"PondleDondle"},"score":0,"creation_date":1691464694,"post_id":76855769,"comment_id":135491752,"body_markdown":"I receive the following error java.util.concurrent.ExecutionException: java.util.NoSuchElementException a number of times equal to the number of times that my calculateRows did not run. I placed a println at the begining of calculateRows and counted the missing runs.","body":"I receive the following error java.util.concurrent.ExecutionException: java.util.NoSuchElementException a number of times equal to the number of times that my calculateRows did not run. I placed a println at the begining of calculateRows and counted the missing runs."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1691541874,"post_id":76855769,"comment_id":135504789,"body_markdown":"Then your problem isn&#39;t that the code continues without waiting for the tasks to complete. An `ExecutionException` means the task completed, but exceptionally. The underlying error is a `NoSuchElementException`; you should look at whatever line of code **in the task** that is throwing that error and figure out why. If you don&#39;t know how to determine which line is throwing that error, then I suggest reading [What is a stack trace, and how can I use it to debug my application errors?](https://stackoverflow.com/q/3988788/6395627). And if you need more help, please provide a [mre].","body":"Then your problem isn&#39;t that the code continues without waiting for the tasks to complete. An <code>ExecutionException</code> means the task completed, but exceptionally. The underlying error is a <code>NoSuchElementException</code>; you should look at whatever line of code <b>in the task</b> that is throwing that error and figure out why. If you don&#39;t know how to determine which line is throwing that error, then I suggest reading <a href=\"https://stackoverflow.com/q/3988788/6395627\">What is a stack trace, and how can I use it to debug my application errors?</a>. And if you need more help, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":28973632,"reputation":1,"user_id":22193295,"display_name":"PondleDondle"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691586283,"creation_date":1691452558,"question_id":76855769,"body_markdown":"I have a method that is called with multi threading and runs to around 99% completion. At this point it runs the next method which needs the first method to of finished running before attempting as it takes data created from that and places it into a file.\r\n\r\n\r\n```\r\npublic static void main(String[] args)\r\n    {\r\n        final int MAX_THREADS = 2;\r\n        ExecutorService executor = Executors.newFixedThreadPool(MAX_THREADS);\r\n        \r\n        List&lt;String&gt; row = new ArrayList&lt;&gt;();\r\n        \r\n        for (int a : listA)\r\n        {\r\n            for (double b : listB)\r\n            {\r\n                for (int c : listC)\r\n                {\r\n                    for (int d : listD)\r\n                    {\r\n                        for (int e : listE)\r\n                        {\r\n                            for (int f : listF)\r\n                            {\r\n                                for (double g : listG)\r\n                                {\r\n                                    for (double h : listH)\r\n                                    {\r\n                                        for (double i : listI)\r\n                                        {\r\n                                            if (i &lt; h) \r\n                                            {\r\n                                                try\r\n\t\t\t\t\t\t\t\t                {\r\n\t\t                                            Callable&lt;RowEarnings&gt; task = () -&gt; calculateRows(&quot;C://CSV&quot;, a, b, c, d, e, f, g, h, i);\r\n\t\t                                            tasks.add(task);\r\n\t\t                                        }\r\n\t\t\t\t\t\t\t\t                catch (Exception e)\r\n\t\t\t\t\t\t\t\t                {\r\n\t\t                                            System.out.println(&quot;Error Message&quot;);\r\n\t\t                                            e.printStackTrace();\r\n\t\t                                        }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\t\t\t\ttry {\r\n\t\t\t\t\tList&lt;Future&lt;RowEarnings&gt;&gt; results = executor.invokeAll(tasks);\r\n\t\t\t        createCSV(directory, results, a, b);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (InterruptedException e)\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Error while invoking tasks.&quot;);\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        executor.shutdown();\r\n\t\ttry\r\n\t\t{\r\n\t\t    while (!executor.isTerminated())\r\n\t\t    {\r\n\t\t    }\r\n\t\t    System.out.println(&quot;TEST COMPLETE&quot;);\r\n\t\t}\r\n\t\tcatch (Exception e)\r\n\t\t{\r\n\t\t    System.out.println(&quot;Thread execution interrupted.&quot;);\r\n\t\t    Thread.currentThread().interrupt();\r\n\t\t}\r\n    }\r\n```\r\n\r\n\r\nHow can I stop it running createCSV until all the calculateRows has finished running for that for loop? It seems to be that calculateRows is taking too long and it just tries to run createCSV as it thinks its finished.\r\n\r\nEdit:\r\n\r\nAdding createCSV code:\r\n```\r\npublic static void createCSV(String directory, List&lt;Future&lt;RowEarnings&gt;&gt; futures, int a, double b)\r\n\t{\r\n\t\tList&lt;RowEarnings&gt; rowComplete = new ArrayList&lt;&gt;();\r\n\t    for (Future&lt;RowEarnings&gt; future : futures)\r\n\t    {\r\n\t        try\r\n\t        {\r\n\t        \tRowEarnings rowEarnings = future.get();\r\n\t            if (rowEarnings != null)\r\n\t            {\r\n\t                rowComplete.add(rowEarnings);\r\n\t            }\r\n\t        }\r\n\t        catch (Exception e)\r\n\t        {\r\n\t        \tSystem.out.println(&quot;Error retrieving task result.&quot;);\r\n\t            e.printStackTrace();\r\n\t            Throwable cause = e.getCause();\r\n\t            if (cause != null)\r\n\t            {\r\n\t                System.out.println(&quot;Cause of the exception:&quot;);\r\n\t                cause.printStackTrace();\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t\tStringBuilder outputCSVFilePath = new StringBuilder(directory);\r\n\t\toutputCSVFilePath.append(Main.resultFolder).append(a).append(&quot;_&quot;).append(b).append(&quot;.csv&quot;);\r\n\t\tSystem.out.println(outputCSVFilePath);\r\n\t\ttry\r\n\t\t{\r\n\t\t\tCSVEditor.createCSVFile(outputCSVFilePath.toString(), rowComplete, RowEarnings::mapToStringArray);\r\n\t\t\tSystem.out.println(&quot;Complete&quot;);\r\n\t\t}\r\n\t\tcatch(IOException e)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;BROKE AINT IT&quot;);\r\n\t\t}\r\n\t}\r\n```\r\n\r\nEssentially calculateRows should run a few thousand times for each running of createCSV, each time calculateRows runs it sends out a row of the csv and so forth. Sometimes there can be a couple million rows being sent to each createCSV.","title":"Java Callable Attempts to Complete Prematurely","body":"<p>I have a method that is called with multi threading and runs to around 99% completion. At this point it runs the next method which needs the first method to of finished running before attempting as it takes data created from that and places it into a file.</p>\n<pre><code>public static void main(String[] args)\n    {\n        final int MAX_THREADS = 2;\n        ExecutorService executor = Executors.newFixedThreadPool(MAX_THREADS);\n        \n        List&lt;String&gt; row = new ArrayList&lt;&gt;();\n        \n        for (int a : listA)\n        {\n            for (double b : listB)\n            {\n                for (int c : listC)\n                {\n                    for (int d : listD)\n                    {\n                        for (int e : listE)\n                        {\n                            for (int f : listF)\n                            {\n                                for (double g : listG)\n                                {\n                                    for (double h : listH)\n                                    {\n                                        for (double i : listI)\n                                        {\n                                            if (i &lt; h) \n                                            {\n                                                try\n                                                {\n                                                    Callable&lt;RowEarnings&gt; task = () -&gt; calculateRows(&quot;C://CSV&quot;, a, b, c, d, e, f, g, h, i);\n                                                    tasks.add(task);\n                                                }\n                                                catch (Exception e)\n                                                {\n                                                    System.out.println(&quot;Error Message&quot;);\n                                                    e.printStackTrace();\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                try {\n                    List&lt;Future&lt;RowEarnings&gt;&gt; results = executor.invokeAll(tasks);\n                    createCSV(directory, results, a, b);\n                }\n                catch (InterruptedException e)\n                {\n                    System.out.println(&quot;Error while invoking tasks.&quot;);\n                    e.printStackTrace();\n                }\n            }\n        }\n        executor.shutdown();\n        try\n        {\n            while (!executor.isTerminated())\n            {\n            }\n            System.out.println(&quot;TEST COMPLETE&quot;);\n        }\n        catch (Exception e)\n        {\n            System.out.println(&quot;Thread execution interrupted.&quot;);\n            Thread.currentThread().interrupt();\n        }\n    }\n</code></pre>\n<p>How can I stop it running createCSV until all the calculateRows has finished running for that for loop? It seems to be that calculateRows is taking too long and it just tries to run createCSV as it thinks its finished.</p>\n<p>Edit:</p>\n<p>Adding createCSV code:</p>\n<pre><code>public static void createCSV(String directory, List&lt;Future&lt;RowEarnings&gt;&gt; futures, int a, double b)\n    {\n        List&lt;RowEarnings&gt; rowComplete = new ArrayList&lt;&gt;();\n        for (Future&lt;RowEarnings&gt; future : futures)\n        {\n            try\n            {\n                RowEarnings rowEarnings = future.get();\n                if (rowEarnings != null)\n                {\n                    rowComplete.add(rowEarnings);\n                }\n            }\n            catch (Exception e)\n            {\n                System.out.println(&quot;Error retrieving task result.&quot;);\n                e.printStackTrace();\n                Throwable cause = e.getCause();\n                if (cause != null)\n                {\n                    System.out.println(&quot;Cause of the exception:&quot;);\n                    cause.printStackTrace();\n                }\n            }\n        }\n        StringBuilder outputCSVFilePath = new StringBuilder(directory);\n        outputCSVFilePath.append(Main.resultFolder).append(a).append(&quot;_&quot;).append(b).append(&quot;.csv&quot;);\n        System.out.println(outputCSVFilePath);\n        try\n        {\n            CSVEditor.createCSVFile(outputCSVFilePath.toString(), rowComplete, RowEarnings::mapToStringArray);\n            System.out.println(&quot;Complete&quot;);\n        }\n        catch(IOException e)\n        {\n            System.out.println(&quot;BROKE AINT IT&quot;);\n        }\n    }\n</code></pre>\n<p>Essentially calculateRows should run a few thousand times for each running of createCSV, each time calculateRows runs it sends out a row of the csv and so forth. Sometimes there can be a couple million rows being sent to each createCSV.</p>\n"},{"tags":["java","spring-boot","mapping","modelmapper"],"answers":[{"tags":[],"owner":{"account_id":18669557,"reputation":640,"user_id":13608717,"display_name":"Daniel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678739362,"creation_date":1678739362,"answer_id":75726630,"question_id":75723047,"body_markdown":"Both ModelMapper objects can be defined as Spring beans - mark one of them with @Primary annotation and inject second one by its qualifier where needed.\r\n\r\nThis would help to use 1 mapper as-is - and second can also be used in other classes with use of @Qualifier","title":"Model mapper sharing or creating new modelMapper per mapper instance","body":"<p>Both ModelMapper objects can be defined as Spring beans - mark one of them with @Primary annotation and inject second one by its qualifier where needed.</p>\n<p>This would help to use 1 mapper as-is - and second can also be used in other classes with use of @Qualifier</p>\n"},{"tags":[],"owner":{"account_id":19090913,"reputation":491,"user_id":13941207,"display_name":"EACUAMBA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691586093,"creation_date":1691586093,"answer_id":76868053,"question_id":75723047,"body_markdown":"Yes modelMapper instance can be shared, but if you have differents typeMap mapping the same class to another the same class you need to create new modelMapper or remove the old typeMap and set the new typeMap.\r\n\r\nI usually share the same modelMapper instance, but in the mapper i use the  method annotated with @PostConstruct to build the typeMap with all the property mappings one time in the lifecycle of this mapper.\r\n\r\n```java\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class ObjectMapper{\r\n\r\n   private final ModelMapper modelMapper;\r\n\r\n   @PostConstruct \r\n   public void postConstructor() {\r\n      // here put your typeMap and propertyMappings\r\n\r\n      this.modelMapper.createTypeMap(ObjectDTORequest.class, ObjectEntity.class)\r\n        .implicitMappings()\r\n        .addMappings(mapping -&gt; mapping.map(dto::getProperty, entity::setProperty));\r\n   }\r\n\r\n   public Objectentity mapTo(ObjectDtoRequest objDtoRequest){\r\n      //your mp logic.\r\n   }\r\n}\r\n```\r\n\r\nSo I can use the same Mapper to map a lot of requests without worry about errors.","title":"Model mapper sharing or creating new modelMapper per mapper instance","body":"<p>Yes modelMapper instance can be shared, but if you have differents typeMap mapping the same class to another the same class you need to create new modelMapper or remove the old typeMap and set the new typeMap.</p>\n<p>I usually share the same modelMapper instance, but in the mapper i use the  method annotated with @PostConstruct to build the typeMap with all the property mappings one time in the lifecycle of this mapper.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@RequiredArgsConstructor\npublic class ObjectMapper{\n\n   private final ModelMapper modelMapper;\n\n   @PostConstruct \n   public void postConstructor() {\n      // here put your typeMap and propertyMappings\n\n      this.modelMapper.createTypeMap(ObjectDTORequest.class, ObjectEntity.class)\n        .implicitMappings()\n        .addMappings(mapping -&gt; mapping.map(dto::getProperty, entity::setProperty));\n   }\n\n   public Objectentity mapTo(ObjectDtoRequest objDtoRequest){\n      //your mp logic.\n   }\n}\n</code></pre>\n<p>So I can use the same Mapper to map a lot of requests without worry about errors.</p>\n"}],"owner":{"account_id":8796452,"reputation":440,"user_id":6574204,"accept_rate":33,"display_name":"fbm fatma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":423,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691586093,"creation_date":1678716808,"question_id":75723047,"body_markdown":"I am creating an application using spring boot as framework and using model mapper for mapping objects between diffrent app is layers.\r\nIn my application i have many mappers to which i am actually usnig the same modelMapper which is instantiate as @config bean but the problem with this is sometimes the configs between mappers is entring in conlict.\r\n\r\nExample for mapper1 i want to add a converter for dates which i don&#39;t want to use for mapper2.\r\nSo what shall i do?  i am thinking about a mapper like that (code bellow ) but the problem with that is memory as i will instantiate a new ModelMapper for each mapper\r\n\r\n    @Slf4j\r\n    @Setter\r\n    @Component\r\n    public class CarMapper{\r\n    \r\n      private ModelMapper mapper;\r\n    \r\n    \r\n      @PostConstruct\r\n      public void configure(){\r\n         mapper = new ModelMapper();\r\n        configureMapperToIgnoreNullValues();\r\n        mapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT);\r\n        mapper.getConfiguration().setFieldAccessLevel(Configuration.AccessLevel.PRIVATE);\r\n        addFromStringToDateConverterToMapper();\r\n        addFromDateToStringConverterToMapper();\r\n        addPropertyMapForCarDto();\r\n        log.debug(&quot;Mapper configured&quot;);\r\n      }\r\n    \r\n    protected toCarDto(Car car){\r\n    // mapping code here\r\n    }\r\n    \r\n     public void addPropertyMapForCarDto() {\r\n        // check if a type map exist for Car, CarDto\r\n        if (mapper.getTypeMap(Car.class, CarDto.class) == null) {\r\n    \r\n          TypeMap&lt;Car, CarDto&gt; propertyMapper = mapper.createTypeMap(\r\n              Car.class, CarDto.class);\r\n          propertyMapper.addMappings(\r\n              addedMapper -&gt; addedMapper.map(Car::getId,\r\n                 CarDto::setId));\r\n          log.debug(&quot;Property mapping for CarDto added to mapper&quot;);\r\n      }\r\n    }\r\n    }\r\n\r\n","title":"Model mapper sharing or creating new modelMapper per mapper instance","body":"<p>I am creating an application using spring boot as framework and using model mapper for mapping objects between diffrent app is layers.\nIn my application i have many mappers to which i am actually usnig the same modelMapper which is instantiate as @config bean but the problem with this is sometimes the configs between mappers is entring in conlict.</p>\n<p>Example for mapper1 i want to add a converter for dates which i don't want to use for mapper2.\nSo what shall i do?  i am thinking about a mapper like that (code bellow ) but the problem with that is memory as i will instantiate a new ModelMapper for each mapper</p>\n<pre><code>@Slf4j\n@Setter\n@Component\npublic class CarMapper{\n\n  private ModelMapper mapper;\n\n\n  @PostConstruct\n  public void configure(){\n     mapper = new ModelMapper();\n    configureMapperToIgnoreNullValues();\n    mapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT);\n    mapper.getConfiguration().setFieldAccessLevel(Configuration.AccessLevel.PRIVATE);\n    addFromStringToDateConverterToMapper();\n    addFromDateToStringConverterToMapper();\n    addPropertyMapForCarDto();\n    log.debug(&quot;Mapper configured&quot;);\n  }\n\nprotected toCarDto(Car car){\n// mapping code here\n}\n\n public void addPropertyMapForCarDto() {\n    // check if a type map exist for Car, CarDto\n    if (mapper.getTypeMap(Car.class, CarDto.class) == null) {\n\n      TypeMap&lt;Car, CarDto&gt; propertyMapper = mapper.createTypeMap(\n          Car.class, CarDto.class);\n      propertyMapper.addMappings(\n          addedMapper -&gt; addedMapper.map(Car::getId,\n             CarDto::setId));\n      log.debug(&quot;Property mapping for CarDto added to mapper&quot;);\n  }\n}\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","aggregate","axon"],"answers":[{"tags":[],"owner":{"account_id":2552081,"reputation":7045,"user_id":2215649,"display_name":"Steven"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691586075,"creation_date":1689606773,"answer_id":76705851,"question_id":76705739,"body_markdown":"It&#39;s a hunch, but I guess Axon Framework&#39;s `AggregateModel` isn&#39;t correctly constructed due to the `@Aggregate` annotation on your Aggregate Members too.\r\n\r\nAggregate Members should only be referenced within the aggregate through the `@AggregateMember` annotation. The `@Aggregate` annotation is there to:\r\n1. Mark a class as an Aggregate, and\r\n2. Let it be auto-wired through Axon&#39;s Spring auto-configuration.\r\n\r\nIf you have a &quot;simple&quot; aggregate, you only need to use the `@Aggregate` annotation once, on the so-called Aggregate Root.\r\nIf you have a [polymorphic aggregate][1], you only have to use the `@Aggregate` annotation on the root class and all concrete implementations (essentially the children of the graph).\r\n\r\nAny classes that are not a root aggregate or polymorphic aggregate do not need the `@Aggregate` annotation.\r\nMy hunch that this is the culprit stems from the fact the `@Aggregate` annotation performs the auto-wiring and is used for polymorphic aggregate logic, by the way.\r\n\r\nSo, please remove the annotation from your members and tell us whether that solves the problem!\r\n\r\n### Update\r\n\r\nAfter receiving the sample project through a different channel, I was able to debug the scenario @Jan was facing.\r\nThe Aggregate structure turned out to contain two inconsistencies we had to deal with.\r\n\r\n**One - Polymorphic Aggregate Members**\r\n\r\nFirst and foremost, the sample project contains an aggregate with polymorphic entities (read: `@AggregateMember` annotated fields inside the aggregate).\r\nCurrently, Axon Framework **does not** investigate the entire hierarchy of the `Type` of the field that&#39;s annotated to be an entity.\r\n\r\nDue to this, Axon Framework will **only** discover message-handling methods on the actual annotated field, not on any other layer in the hierarchy.\r\n\r\nTo clarify, regard the following sample:\r\n```java\r\npublic class AggregateRoot {\r\n    @AggregateMember\r\n    private RootEntity entity\r\n    // omitting message handlers for simplicity\r\n\r\n}\r\n\r\npublic RootEntity {\r\n    // omitting message handlers for simplicity\r\n}\r\n\r\npublic ChildEntity {\r\n    // Message handlers here are not found!\r\n}\r\n```\r\n\r\nThe `AggregateRoot` aggregate class has an entity field of type `RootEntity`. By annotating it with `@AggregateMember`, you tell Axon Framework, &quot;this class has message handlers you need to register with the message buses.&quot; However, this support *does not* extend to the implementation of the `RootEntity`.\r\n\r\n**Two - Aggregate Members on each level in the Aggregate Hierarchy**\r\n\r\nThe second predicament had to do with the fact Entities/Aggregate Members were present on several layers in the Aggregate hierarchy.\r\nAxon Framework would only move one layer down the (so-called) &quot;child entity set&quot; to uncover command handlers to register with the internal Aggregate Model. \r\n\r\nHowever, it is perfectly valid to have Aggregate Members on several layers of the Aggregate hierarchy. Due to this bug, the Framework would thus miss aggregate members during the construction of the internal model. \r\n\r\nAs this was a bug, a pull request was provided to fix this, which you can find [here][2]. This fix is part of Axon Framework release 4.8.1, by the way.\r\n\r\n  [1]: https://docs.axoniq.io/reference-guide/axon-framework/axon-framework-commands/modeling/aggregate-polymorphism\r\n  [2]: https://github.com/AxonFramework/AxonFramework/pull/2794","title":"Axon CommandHandlers in AggregateMember Not found","body":"<p>It's a hunch, but I guess Axon Framework's <code>AggregateModel</code> isn't correctly constructed due to the <code>@Aggregate</code> annotation on your Aggregate Members too.</p>\n<p>Aggregate Members should only be referenced within the aggregate through the <code>@AggregateMember</code> annotation. The <code>@Aggregate</code> annotation is there to:</p>\n<ol>\n<li>Mark a class as an Aggregate, and</li>\n<li>Let it be auto-wired through Axon's Spring auto-configuration.</li>\n</ol>\n<p>If you have a &quot;simple&quot; aggregate, you only need to use the <code>@Aggregate</code> annotation once, on the so-called Aggregate Root.\nIf you have a <a href=\"https://docs.axoniq.io/reference-guide/axon-framework/axon-framework-commands/modeling/aggregate-polymorphism\" rel=\"nofollow noreferrer\">polymorphic aggregate</a>, you only have to use the <code>@Aggregate</code> annotation on the root class and all concrete implementations (essentially the children of the graph).</p>\n<p>Any classes that are not a root aggregate or polymorphic aggregate do not need the <code>@Aggregate</code> annotation.\nMy hunch that this is the culprit stems from the fact the <code>@Aggregate</code> annotation performs the auto-wiring and is used for polymorphic aggregate logic, by the way.</p>\n<p>So, please remove the annotation from your members and tell us whether that solves the problem!</p>\n<h3>Update</h3>\n<p>After receiving the sample project through a different channel, I was able to debug the scenario @Jan was facing.\nThe Aggregate structure turned out to contain two inconsistencies we had to deal with.</p>\n<p><strong>One - Polymorphic Aggregate Members</strong></p>\n<p>First and foremost, the sample project contains an aggregate with polymorphic entities (read: <code>@AggregateMember</code> annotated fields inside the aggregate).\nCurrently, Axon Framework <strong>does not</strong> investigate the entire hierarchy of the <code>Type</code> of the field that's annotated to be an entity.</p>\n<p>Due to this, Axon Framework will <strong>only</strong> discover message-handling methods on the actual annotated field, not on any other layer in the hierarchy.</p>\n<p>To clarify, regard the following sample:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AggregateRoot {\n    @AggregateMember\n    private RootEntity entity\n    // omitting message handlers for simplicity\n\n}\n\npublic RootEntity {\n    // omitting message handlers for simplicity\n}\n\npublic ChildEntity {\n    // Message handlers here are not found!\n}\n</code></pre>\n<p>The <code>AggregateRoot</code> aggregate class has an entity field of type <code>RootEntity</code>. By annotating it with <code>@AggregateMember</code>, you tell Axon Framework, &quot;this class has message handlers you need to register with the message buses.&quot; However, this support <em>does not</em> extend to the implementation of the <code>RootEntity</code>.</p>\n<p><strong>Two - Aggregate Members on each level in the Aggregate Hierarchy</strong></p>\n<p>The second predicament had to do with the fact Entities/Aggregate Members were present on several layers in the Aggregate hierarchy.\nAxon Framework would only move one layer down the (so-called) &quot;child entity set&quot; to uncover command handlers to register with the internal Aggregate Model.</p>\n<p>However, it is perfectly valid to have Aggregate Members on several layers of the Aggregate hierarchy. Due to this bug, the Framework would thus miss aggregate members during the construction of the internal model.</p>\n<p>As this was a bug, a pull request was provided to fix this, which you can find <a href=\"https://github.com/AxonFramework/AxonFramework/pull/2794\" rel=\"nofollow noreferrer\">here</a>. This fix is part of Axon Framework release 4.8.1, by the way.</p>\n"}],"owner":{"account_id":19911713,"reputation":65,"user_id":14589598,"display_name":"Jan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76705851,"answer_count":1,"score":0,"last_activity_date":1691586075,"creation_date":1689605918,"question_id":76705739,"body_markdown":"I have an aggregate with multiple AggregateMembers.\r\nNo is the problem that the for 1 aggregateMember (Referentschap) the CommandHandlers in this aggregate member are not found.\r\nThis problem also occurs with junit testing using the AggregateTestFixture&lt;&gt;(Onderzoek.class).\r\n\r\nIn one AggregateMember `Waarschuwing` the CommandHandlers are reached as it should, but in the other aggregateMember `Referentschap` the Commandhandlers are not found.\r\nMy question is how can i work around this problem?\r\nIs there a way that i can make a configuration to fix this?\r\n\r\nCurious issue is that in a copy of the project for some debugging, the same issue arises but then the problem is swapped to `Waarschuwing` and is `Referentschap` ok.\r\nThis curious swap of problems gives me the impression that there is an issue in how the CommandHandlers are collected.\r\n\r\nupdate:\r\nOn a hint of Axoniq is placed only the `@Aggregae` annotation on the root aggregate. Cleared chaces and all from my Intellij IDE and rerun the junit test. \r\nNow the not found ComandHandler issue rises on both the AggregateMembers `Referentschap` and `Waarschuwing`. \r\n\r\nI have made some integration test with an Axon testcontainer and they al succeed.\r\nAs it seems is it a JUnit test problem, where the order of extending of aggregate classes is relevant for which CommandHandler is found.\r\n\r\n\r\nAxon 4.5.17  \r\nSpring boot 2.7.12  \r\nJava temurin 17.0.6   \r\n\r\n```java\r\n@NoArgsConstructor\r\npublic class Onderzoek extends OnderzoekReferentschap {\r\n\r\n    @CommandHandler\r\n    public Onderzoek(InitieerOnderzoek command) {\r\n        apply(OnderzoekGeinitieerd.builder().build());\r\n    }\r\n\r\n    @EventSourcingHandler\r\n    public void onderzoekGeinitieerd(OnderzoekGeinitieerd event) {\r\n        this.onderzoekId = event.getOnderzoekId();\r\n        this.onderzoekStatus = INITIEEL;\r\n    }\r\n```\r\n\r\n```java\r\n@NoArgsConstructor\r\npublic abstract class OnderzoekReferentschap extends OnderzoekMaatregel {\r\n\r\n    @AggregateMember\r\n    private final Map&lt;UUID, Referentschap&gt; referentschappen = new HashMap&lt;&gt;();\r\n\r\n    @CommandHandler\r\n    public void verwerkReferentschapOntstaan(VerwerkReferentschapOntstaan command) {\r\n            apply(ReferentschapOntstaanVerwerkt.builder()\r\n                    .onderzoekId(command.getOnderzoekId())\r\n                    .referentschapId(command.getReferentschapId())\r\n                    .build());\r\n        }\r\n    }\r\n\r\n    @EventSourcingHandler\r\n    public void referentschapOntstaanVerwerkt(ReferentschapOntstaanVerwerkt event) {\r\n        UUID referentschapId = event.getReferentschapId();\r\n        Referentschap referentschap = Referentschap.builder()\r\n                .referentschapId(referentschapId)\r\n                .persoonId(event.getPersoonId())\r\n                .build();\r\n\r\n        referentschappen.put(referentschapId, referentschap);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@NoArgsConstructor\r\nabstract class OnderzoekMaatregel extends OnderzoekBasis {\r\n    @AggregateMember\r\n    final Map&lt;UUID, Waarschuwing&gt; waarschuwingen = new HashMap&lt;&gt;();\r\n\r\n    @CommandHandler\r\n    public void verwerkWaarschuwingOpgelegd(VerwerkWaarschuwingOpgelegd command) {\r\n            apply(WaarschuwingOpgelegdVerwerkt.builder()\r\n                    .onderzoekId(command.getOnderzoekId())\r\n                    .referentschapId(command.getWaarschuwingId())\r\n                    .build());\r\n    }\r\n\r\n    @EventSourcingHandler\r\n    public void waarschuwingOpgelegdVerwerkt(WaarschuwingOpgelegdVerwerkt event) {\r\n        UUID waarschuwingId = event.getWaarschuwingId();\r\n        waarschuwingen.put(waarschuwingId, new Waarschuwing(waarschuwingId));\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@NoArgsConstructor\r\nabstract class OnderzoekBasis {\r\n\r\n    @AggregateIdentifier\r\n    UUID onderzoekId;\r\n    OnderzoekStatus onderzoekStatus;\r\n}\r\n```\r\n\r\nThe following class are the AggregateMembers with the troublesome Not Found CommandHandlers.\r\n```java\r\n@Aggregate\r\n@EqualsAndHashCode\r\n@NoArgsConstructor\r\npublic class Referentschap {\r\n\r\n    @EntityId\r\n    private UUID referentschapId;\r\n\r\n// This command handler is never reached.\r\n    @CommandHandler\r\n    public void verwerkReferentschapBijgewerkt(VerwerkReferentschapBijgewerkt command) {\r\n        apply(ReferentschapBijgewerktVerwerkt.builder()\r\n                .onderzoekId(command.getOnderzoekId())\r\n                .referentschapId(command.getReferentschapId())\r\n                .einddatum(command.getEinddatum())\r\n                .build());\r\n    }\r\n\r\n```\r\n\r\n```java\r\n@Aggregate\r\n@EqualsAndHashCode\r\n@NoArgsConstructor\r\npublic class Waarschuwing {\r\n\r\n    @EntityId\r\n    private UUID waarschuwingId;\r\n\r\n// this command handler is never reached.\r\n    @CommandHandler\r\n    public void verwerkWaarschuwingVerlopen(VerwerkWaarschuwingVerlopen command) {\r\n        apply(WaarschuwingVerlopenVerwerkt.builder()\r\n                .onderzoekId(command.getOnderzoekId())\r\n                .waarschuwingId(command.getWaarschuwingId())\r\n                .verloopdatum(command.getVerloopdatum())\r\n                .build());\r\n    }\r\n}\r\n```","title":"Axon CommandHandlers in AggregateMember Not found","body":"<p>I have an aggregate with multiple AggregateMembers.\nNo is the problem that the for 1 aggregateMember (Referentschap) the CommandHandlers in this aggregate member are not found.\nThis problem also occurs with junit testing using the AggregateTestFixture&lt;&gt;(Onderzoek.class).</p>\n<p>In one AggregateMember <code>Waarschuwing</code> the CommandHandlers are reached as it should, but in the other aggregateMember <code>Referentschap</code> the Commandhandlers are not found.\nMy question is how can i work around this problem?\nIs there a way that i can make a configuration to fix this?</p>\n<p>Curious issue is that in a copy of the project for some debugging, the same issue arises but then the problem is swapped to <code>Waarschuwing</code> and is <code>Referentschap</code> ok.\nThis curious swap of problems gives me the impression that there is an issue in how the CommandHandlers are collected.</p>\n<p>update:\nOn a hint of Axoniq is placed only the <code>@Aggregae</code> annotation on the root aggregate. Cleared chaces and all from my Intellij IDE and rerun the junit test.\nNow the not found ComandHandler issue rises on both the AggregateMembers <code>Referentschap</code> and <code>Waarschuwing</code>.</p>\n<p>I have made some integration test with an Axon testcontainer and they al succeed.\nAs it seems is it a JUnit test problem, where the order of extending of aggregate classes is relevant for which CommandHandler is found.</p>\n<p>Axon 4.5.17<br />\nSpring boot 2.7.12<br />\nJava temurin 17.0.6</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\npublic class Onderzoek extends OnderzoekReferentschap {\n\n    @CommandHandler\n    public Onderzoek(InitieerOnderzoek command) {\n        apply(OnderzoekGeinitieerd.builder().build());\n    }\n\n    @EventSourcingHandler\n    public void onderzoekGeinitieerd(OnderzoekGeinitieerd event) {\n        this.onderzoekId = event.getOnderzoekId();\n        this.onderzoekStatus = INITIEEL;\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\npublic abstract class OnderzoekReferentschap extends OnderzoekMaatregel {\n\n    @AggregateMember\n    private final Map&lt;UUID, Referentschap&gt; referentschappen = new HashMap&lt;&gt;();\n\n    @CommandHandler\n    public void verwerkReferentschapOntstaan(VerwerkReferentschapOntstaan command) {\n            apply(ReferentschapOntstaanVerwerkt.builder()\n                    .onderzoekId(command.getOnderzoekId())\n                    .referentschapId(command.getReferentschapId())\n                    .build());\n        }\n    }\n\n    @EventSourcingHandler\n    public void referentschapOntstaanVerwerkt(ReferentschapOntstaanVerwerkt event) {\n        UUID referentschapId = event.getReferentschapId();\n        Referentschap referentschap = Referentschap.builder()\n                .referentschapId(referentschapId)\n                .persoonId(event.getPersoonId())\n                .build();\n\n        referentschappen.put(referentschapId, referentschap);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\nabstract class OnderzoekMaatregel extends OnderzoekBasis {\n    @AggregateMember\n    final Map&lt;UUID, Waarschuwing&gt; waarschuwingen = new HashMap&lt;&gt;();\n\n    @CommandHandler\n    public void verwerkWaarschuwingOpgelegd(VerwerkWaarschuwingOpgelegd command) {\n            apply(WaarschuwingOpgelegdVerwerkt.builder()\n                    .onderzoekId(command.getOnderzoekId())\n                    .referentschapId(command.getWaarschuwingId())\n                    .build());\n    }\n\n    @EventSourcingHandler\n    public void waarschuwingOpgelegdVerwerkt(WaarschuwingOpgelegdVerwerkt event) {\n        UUID waarschuwingId = event.getWaarschuwingId();\n        waarschuwingen.put(waarschuwingId, new Waarschuwing(waarschuwingId));\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\nabstract class OnderzoekBasis {\n\n    @AggregateIdentifier\n    UUID onderzoekId;\n    OnderzoekStatus onderzoekStatus;\n}\n</code></pre>\n<p>The following class are the AggregateMembers with the troublesome Not Found CommandHandlers.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aggregate\n@EqualsAndHashCode\n@NoArgsConstructor\npublic class Referentschap {\n\n    @EntityId\n    private UUID referentschapId;\n\n// This command handler is never reached.\n    @CommandHandler\n    public void verwerkReferentschapBijgewerkt(VerwerkReferentschapBijgewerkt command) {\n        apply(ReferentschapBijgewerktVerwerkt.builder()\n                .onderzoekId(command.getOnderzoekId())\n                .referentschapId(command.getReferentschapId())\n                .einddatum(command.getEinddatum())\n                .build());\n    }\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Aggregate\n@EqualsAndHashCode\n@NoArgsConstructor\npublic class Waarschuwing {\n\n    @EntityId\n    private UUID waarschuwingId;\n\n// this command handler is never reached.\n    @CommandHandler\n    public void verwerkWaarschuwingVerlopen(VerwerkWaarschuwingVerlopen command) {\n        apply(WaarschuwingVerlopenVerwerkt.builder()\n                .onderzoekId(command.getOnderzoekId())\n                .waarschuwingId(command.getWaarschuwingId())\n                .verloopdatum(command.getVerloopdatum())\n                .build());\n    }\n}\n</code></pre>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691585724,"creation_date":1691585724,"answer_id":76868009,"question_id":76867922,"body_markdown":"You might change the order of the transformations while adding `&quot;parameters&quot;` case along with the else case( `&quot;*&quot;` ) to the shift transformation spec such as\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;default&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: {\r\n        &quot;name&quot;: &quot;P_RQID&quot;,\r\n        &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: &quot;&amp;&quot;,\r\n      &quot;*&quot;: { // non-parameters case\r\n        &quot;$&quot;: &quot;parameters[#2].name&quot;,\r\n        &quot;@&quot;: &quot;parameters[#2].value&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\nthe ***demo*** on the site http://jolt-demo.appspot.com/ is :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YiZ2P.jpg","title":"how to add an entry into final list by jolt map to list","body":"<p>You might change the order of the transformations while adding <code>&quot;parameters&quot;</code> case along with the else case( <code>&quot;*&quot;</code> ) to the shift transformation spec such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;default&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: {\n        &quot;name&quot;: &quot;P_RQID&quot;,\n        &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: &quot;&amp;&quot;,\n      &quot;*&quot;: { // non-parameters case\n        &quot;$&quot;: &quot;parameters[#2].name&quot;,\n        &quot;@&quot;: &quot;parameters[#2].value&quot;\n      }\n    }\n  }\n]\n</code></pre>\n<p>the <em><strong>demo</strong></em> on the site <a href=\"http://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">http://jolt-demo.appspot.com/</a> is :</p>\n<p><a href=\"https://i.stack.imgur.com/YiZ2P.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YiZ2P.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29190271,"reputation":25,"user_id":22362539,"display_name":"Mehdi Abniki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76868009,"answer_count":1,"score":1,"last_activity_date":1691585857,"creation_date":1691585048,"question_id":76867922,"body_markdown":"I&#39;m trying to transform a map to list by Jolt, which is done ok\r\nthe problem is that I need to add an entry as a default(not in input schema)\r\nbut it doesn&#39;t work\r\n\r\nI have a simple schema as is:\r\n\r\n```json\r\n{\r\n  &quot;iban&quot;: &quot;IR970130100000000000001399&quot;,\r\n  &quot;paymentCode&quot;: &quot;124&quot;\r\n}\r\n```\r\n\r\nand except the output like this:\r\n\r\n```json\r\n{\r\n  &quot;parameters&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;iban&quot;,\r\n      &quot;value&quot;: &quot;IR970130100000000000001399&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;paymentCode&quot;,\r\n      &quot;value&quot;: &quot;124&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;P_RQID&quot;,\r\n      &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nthis is my spec:\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;$&quot;: &quot;parameters.[#2].name&quot;,\r\n        &quot;@&quot;: &quot;parameters.[#2].value&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;default&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: {\r\n        &quot;name&quot;: &quot;P_RQID&quot;,\r\n        &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\n\r\n\r\nand this is the output I have:\r\n\r\n```json\r\n{\r\n  &quot;parameters&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;iban&quot;,\r\n      &quot;value&quot;: &quot;IR970130100000000000001399&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;paymentCode&quot;,\r\n      &quot;value&quot;: &quot;124&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nwithout the effect of default operation.\r\nanyone can help?\r\n","title":"how to add an entry into final list by jolt map to list","body":"<p>I'm trying to transform a map to list by Jolt, which is done ok\nthe problem is that I need to add an entry as a default(not in input schema)\nbut it doesn't work</p>\n<p>I have a simple schema as is:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;iban&quot;: &quot;IR970130100000000000001399&quot;,\n  &quot;paymentCode&quot;: &quot;124&quot;\n}\n</code></pre>\n<p>and except the output like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;parameters&quot;: [\n    {\n      &quot;name&quot;: &quot;iban&quot;,\n      &quot;value&quot;: &quot;IR970130100000000000001399&quot;\n    },\n    {\n      &quot;name&quot;: &quot;paymentCode&quot;,\n      &quot;value&quot;: &quot;124&quot;\n    },\n    {\n      &quot;name&quot;: &quot;P_RQID&quot;,\n      &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\n    }\n  ]\n}\n</code></pre>\n<p>this is my spec:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;$&quot;: &quot;parameters.[#2].name&quot;,\n        &quot;@&quot;: &quot;parameters.[#2].value&quot;\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;default&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: {\n        &quot;name&quot;: &quot;P_RQID&quot;,\n        &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\n      }\n    }\n  }\n]\n</code></pre>\n<p>and this is the output I have:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;parameters&quot;: [\n    {\n      &quot;name&quot;: &quot;iban&quot;,\n      &quot;value&quot;: &quot;IR970130100000000000001399&quot;\n    },\n    {\n      &quot;name&quot;: &quot;paymentCode&quot;,\n      &quot;value&quot;: &quot;124&quot;\n    }\n  ]\n}\n</code></pre>\n<p>without the effect of default operation.\nanyone can help?</p>\n"},{"tags":["java","android","kotlin","android-webview"],"comments":[{"owner":{"account_id":15709144,"reputation":101,"user_id":11335075,"display_name":"magon"},"score":0,"creation_date":1690892283,"post_id":76811467,"comment_id":135413786,"body_markdown":"Can you show me your &quot;MyWebViewClient&quot; - Code?","body":"Can you show me your &quot;MyWebViewClient&quot; - Code?"}],"answers":[{"tags":[],"owner":{"account_id":19628545,"reputation":1,"user_id":14367360,"display_name":"Erfan mahdavi athar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691585426,"creation_date":1691585426,"answer_id":76867965,"question_id":76811467,"body_markdown":"I think adding these two lines of code will solve your problem:\r\n\r\n``` Koltin\r\nwebView?.let { webView -&gt;\r\n    ...\r\n    // Add these two lines of code\r\n    webView.settings.setConnectTimeout(TIMEOUT_MILLIS)\r\n    webView.settings.setReadTimeout(TIMEOUT_MILLIS)\r\n}\r\n```\r\nReplace the value of `TIMEOUT_MILLIS` with the value you need","title":"How to increase the default timeout on Webview to load URL in Android?","body":"<p>I think adding these two lines of code will solve your problem:</p>\n<pre><code>webView?.let { webView -&gt;\n    ...\n    // Add these two lines of code\n    webView.settings.setConnectTimeout(TIMEOUT_MILLIS)\n    webView.settings.setReadTimeout(TIMEOUT_MILLIS)\n}\n</code></pre>\n<p>Replace the value of <code>TIMEOUT_MILLIS</code> with the value you need</p>\n"}],"owner":{"account_id":6900526,"reputation":35,"user_id":5300327,"display_name":"Narendar "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691585426,"creation_date":1690891684,"question_id":76811467,"body_markdown":"I&#39;m currently loading the URL in webview and everything works perfect. However, in poor network condition I&#39;m getting Err: Timedout on webview with in 10 seconds. I would like to increase this time out value to lets say 60 seconds. \r\nThank you in Advance. \r\nHere is my webview :\r\n\r\n&#39;&#39;&#39;\r\n\r\n    webView = findViewById(R.id.webview)\r\n            webView?.let { webView -&gt;\r\n                webView.clearCache(true)\r\n                webView.clearFormData()\r\n                webView.clearHistory()\r\n                Log.i(LOG_TAG,&quot;cleared cache &amp; history on webview&quot;)\r\n                webView.settings.javaScriptEnabled = true;\r\n                webView.settings.setAllowUniversalAccessFromFileURLs(true);\r\n                webView.settings.allowContentAccess = true;\r\n                webView.settings.domStorageEnabled = true;\r\n                webView.webViewClient = MyWebViewClient(this, progressbarView, progressbar)\r\n            }\r\n\r\n&#39;&#39;&#39;\r\n\r\nHere is my webview client code:\r\n\r\n&#39;&#39;&#39;\r\noverride fun shouldOverrideUrlLoading(view: WebView, request: WebResourceRequest?): Boolean {\r\n            val url: String = request?.url.toString();\r\n            if (Global.isNetworkConnected(this@Orderdetailswebview)){\r\n                return checkAndProcessHolsterManagerCall(view, url)\r\n            }else{\r\n                var networkDialog = NetworkErrorVideoFragment()\r\n                networkDialog.show(fragmentManager, &quot;NetworkErrorDialog&quot;)\r\n            }\r\n            return true\r\n        }\r\n override fun shouldOverrideUrlLoading(view: WebView, url: String): Boolean {\r\n            return checkAndProcessHolsterManagerCall(view, url)\r\n        }\r\n        override fun shouldInterceptRequest(view: WebView, request: WebResourceRequest): WebResourceResponse? {\r\n            if(fromActivityVal == &quot;ViewTogether&quot;) {\r\n                return super.shouldInterceptRequest(view, request)\r\n            }else {\r\n                return webResponse(request)\r\n            }\r\n        }\r\n&#39;&#39;&#39;\r\n","title":"How to increase the default timeout on Webview to load URL in Android?","body":"<p>I'm currently loading the URL in webview and everything works perfect. However, in poor network condition I'm getting Err: Timedout on webview with in 10 seconds. I would like to increase this time out value to lets say 60 seconds.\nThank you in Advance.\nHere is my webview :</p>\n<p>'''</p>\n<pre><code>webView = findViewById(R.id.webview)\n        webView?.let { webView -&gt;\n            webView.clearCache(true)\n            webView.clearFormData()\n            webView.clearHistory()\n            Log.i(LOG_TAG,&quot;cleared cache &amp; history on webview&quot;)\n            webView.settings.javaScriptEnabled = true;\n            webView.settings.setAllowUniversalAccessFromFileURLs(true);\n            webView.settings.allowContentAccess = true;\n            webView.settings.domStorageEnabled = true;\n            webView.webViewClient = MyWebViewClient(this, progressbarView, progressbar)\n        }\n</code></pre>\n<p>'''</p>\n<p>Here is my webview client code:</p>\n<p>'''\noverride fun shouldOverrideUrlLoading(view: WebView, request: WebResourceRequest?): Boolean {\nval url: String = request?.url.toString();\nif (Global.isNetworkConnected(this@Orderdetailswebview)){\nreturn checkAndProcessHolsterManagerCall(view, url)\n}else{\nvar networkDialog = NetworkErrorVideoFragment()\nnetworkDialog.show(fragmentManager, &quot;NetworkErrorDialog&quot;)\n}\nreturn true\n}\noverride fun shouldOverrideUrlLoading(view: WebView, url: String): Boolean {\nreturn checkAndProcessHolsterManagerCall(view, url)\n}\noverride fun shouldInterceptRequest(view: WebView, request: WebResourceRequest): WebResourceResponse? {\nif(fromActivityVal == &quot;ViewTogether&quot;) {\nreturn super.shouldInterceptRequest(view, request)\n}else {\nreturn webResponse(request)\n}\n}\n'''</p>\n"},{"tags":["c#","java"],"comments":[{"owner":{"account_id":437776,"reputation":20871,"user_id":825637,"accept_rate":85,"display_name":"MasterMastic"},"score":17,"creation_date":1380189861,"post_id":4504508,"comment_id":28111458,"body_markdown":"Actually, it&#39;s neither pedantic *nor* silly. [Coding conventions](http://en.wikipedia.org/wiki/Coding_conventions) exist for a reason. Although this one is perhaps flexible.. I capitalize only the first letter in C# and so does .NET.","body":"Actually, it&#39;s neither pedantic <i>nor</i> silly. <a href=\"http://en.wikipedia.org/wiki/Coding_conventions\" rel=\"nofollow noreferrer\">Coding conventions</a> exist for a reason. Although this one is perhaps flexible.. I capitalize only the first letter in C# and so does .NET."}],"answers":[{"tags":[],"owner":{"account_id":15935,"reputation":346512,"user_id":34211,"accept_rate":83,"display_name":"Andrew Hare"},"down_vote_count":1,"up_vote_count":58,"is_accepted":true,"score":57,"last_activity_date":1292970263,"creation_date":1292970263,"answer_id":4504521,"question_id":4504508,"body_markdown":"For C#, check out [Microsoft&#39;s guidelines][1]:\r\n\r\n&gt; **Do capitalize both characters of two-character acronyms, except the\r\n&gt; first word of a camel-cased\r\n&gt; identifier.**\r\n&gt; \r\n&gt; A property named DBRate is an example\r\n&gt; of a short acronym (DB) used as the\r\n&gt; first word of a Pascal-cased\r\n&gt; identifier. A parameter named\r\n&gt; ioChannel is an example of a short\r\n&gt; acronym (IO) used as the first word of\r\n&gt; a camel-cased identifier.\r\n&gt; \r\n&gt; **Do capitalize only the first character of acronyms with three or\r\n&gt; more characters, except the first word\r\n&gt; of a camel-cased identifier.**\r\n&gt; \r\n&gt; A class named XmlWriter is an example\r\n&gt; of a long acronym used as the first\r\n&gt; word of a Pascal-cased identifier. A\r\n&gt; parameter named htmlReader is an\r\n&gt; example of a long acronym used as the\r\n&gt; first word of a camel-cased\r\n&gt; identifier.\r\n&gt; \r\n&gt; **Do not capitalize any of the characters of any acronyms, whatever\r\n&gt; their length, at the beginning of a\r\n&gt; camel-cased identifier.**\r\n&gt; \r\n&gt; A parameter named xmlStream is an\r\n&gt; example of a long acronym (xml) used\r\n&gt; as the first word of a camel-cased\r\n&gt; identifier. A parameter named\r\n&gt; dbServerName is an example of a short\r\n&gt; acronym (db) used as the first word of\r\n&gt; a camel-cased identifier.\r\n\r\n  \r\n\r\n[1]: http://msdn.microsoft.com/en-us/library/ms229043.aspx\r\n\r\n\r\n\r\n","title":"Camel casing acronyms?","body":"<p>For C#, check out <a href=\"http://msdn.microsoft.com/en-us/library/ms229043.aspx\" rel=\"noreferrer\">Microsoft's guidelines</a>:</p>\n\n<blockquote>\n  <p><strong>Do capitalize both characters of two-character acronyms, except the\n  first word of a camel-cased\n  identifier.</strong></p>\n  \n  <p>A property named DBRate is an example\n  of a short acronym (DB) used as the\n  first word of a Pascal-cased\n  identifier. A parameter named\n  ioChannel is an example of a short\n  acronym (IO) used as the first word of\n  a camel-cased identifier.</p>\n  \n  <p><strong>Do capitalize only the first character of acronyms with three or\n  more characters, except the first word\n  of a camel-cased identifier.</strong></p>\n  \n  <p>A class named XmlWriter is an example\n  of a long acronym used as the first\n  word of a Pascal-cased identifier. A\n  parameter named htmlReader is an\n  example of a long acronym used as the\n  first word of a camel-cased\n  identifier.</p>\n  \n  <p><strong>Do not capitalize any of the characters of any acronyms, whatever\n  their length, at the beginning of a\n  camel-cased identifier.</strong></p>\n  \n  <p>A parameter named xmlStream is an\n  example of a long acronym (xml) used\n  as the first word of a camel-cased\n  identifier. A parameter named\n  dbServerName is an example of a short\n  acronym (db) used as the first word of\n  a camel-cased identifier.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8252,"reputation":41549,"user_id":14768,"accept_rate":82,"display_name":"Joshua"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1292970276,"creation_date":1292970276,"answer_id":4504523,"question_id":4504508,"body_markdown":"We have no hard &amp; fast rule, but we generally do not camel case acronyms. A few with more than three letters are but most aren&#39;t.","title":"Camel casing acronyms?","body":"<p>We have no hard &amp; fast rule, but we generally do not camel case acronyms. A few with more than three letters are but most aren't.</p>\n"},{"tags":[],"owner":{"account_id":51577,"reputation":54292,"user_id":154152,"display_name":"Noon Silk"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1292970287,"creation_date":1292970287,"answer_id":4504524,"question_id":4504508,"body_markdown":"Personal preference.\r\n\r\nI tend to do it just because it doesn&#39;t merge well with other words, like, `XMLHTTPParser`, compared to `XmlHttpParser`. Do whatever makes you feel good, but do it in a standard way.","title":"Camel casing acronyms?","body":"<p>Personal preference.</p>\n\n<p>I tend to do it just because it doesn't merge well with other words, like, <code>XMLHTTPParser</code>, compared to <code>XmlHttpParser</code>. Do whatever makes you feel good, but do it in a standard way.</p>\n"},{"tags":[],"owner":{"account_id":134964,"reputation":22313,"user_id":337455,"accept_rate":80,"display_name":"Jeffrey Blattman"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1458158306,"creation_date":1292971114,"answer_id":4504611,"question_id":4504508,"body_markdown":"Here&#39;s what i like, and this is for Java: classes start with upper-case, fields with lower case, and acronyms do not affect that. That leads to things that look like this,\r\n\r\n    UrlConnection urlConnection;\r\n\r\nThe problem is that if you try to apply a rule where you always upper case acronyms, or even the first letter of an acronym irrespective of it being a field or class name, you get strange things like,\r\n\r\n    URLConnection URLConnection; // huh?\r\n\r\n \r\nIn other words, the field starts with lower case rule contradicts with a hypothetical uppercase acronym rule. You can&#39;t apply them both.\r\n\r\nEven the Java SDK has examples of both, within a single class name: `HttpURLConnection`. You&#39;d think it would be either `HTTPURLConnection` or `HttpUrlConnection`.\r\n\r\n","title":"Camel casing acronyms?","body":"<p>Here's what i like, and this is for Java: classes start with upper-case, fields with lower case, and acronyms do not affect that. That leads to things that look like this,</p>\n\n<pre><code>UrlConnection urlConnection;\n</code></pre>\n\n<p>The problem is that if you try to apply a rule where you always upper case acronyms, or even the first letter of an acronym irrespective of it being a field or class name, you get strange things like,</p>\n\n<pre><code>URLConnection URLConnection; // huh?\n</code></pre>\n\n<p>In other words, the field starts with lower case rule contradicts with a hypothetical uppercase acronym rule. You can't apply them both.</p>\n\n<p>Even the Java SDK has examples of both, within a single class name: <code>HttpURLConnection</code>. You'd think it would be either <code>HTTPURLConnection</code> or <code>HttpUrlConnection</code>.</p>\n"},{"tags":[],"owner":{"account_id":194186,"reputation":70518,"user_id":436376,"accept_rate":94,"display_name":"KeithS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1292971674,"creation_date":1292971674,"answer_id":4504673,"question_id":4504508,"body_markdown":"Generally, our acronyms are PascalCased or camelCased as most have stated.\r\n\r\nSome exceptions:\r\n\r\n* If an acronym used in a member name is well known in the business for which the software is being written, and it is a true acronym (the capital letters form a dictionary word, as opposed to just an initialism like XML), we often capitalize it to avoid confusion with the dictionary word.\r\n\r\n* Sometimes in ORMs working against existing DBs, I&#39;ve just named the mapped variable the same as the DB column, capitalization and all, rather than having to map FdicId =&gt; FDICID explicitly in a case-sensitive DB. This does have its downside, as future developers can silently break functionality if they feel more strongly than I did that it should be properly cased, but didn&#39;t know why.\r\n\r\n* ID is a bit of a flip-flopper when used on the end of a member name; Whether it&#39;s ID or Id depends on the developer who writes the first such member in a class or namespace, and they&#39;re seldom revised.","title":"Camel casing acronyms?","body":"<p>Generally, our acronyms are PascalCased or camelCased as most have stated.</p>\n\n<p>Some exceptions:</p>\n\n<ul>\n<li><p>If an acronym used in a member name is well known in the business for which the software is being written, and it is a true acronym (the capital letters form a dictionary word, as opposed to just an initialism like XML), we often capitalize it to avoid confusion with the dictionary word.</p></li>\n<li><p>Sometimes in ORMs working against existing DBs, I've just named the mapped variable the same as the DB column, capitalization and all, rather than having to map FdicId => FDICID explicitly in a case-sensitive DB. This does have its downside, as future developers can silently break functionality if they feel more strongly than I did that it should be properly cased, but didn't know why.</p></li>\n<li><p>ID is a bit of a flip-flopper when used on the end of a member name; Whether it's ID or Id depends on the developer who writes the first such member in a class or namespace, and they're seldom revised.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4383791,"reputation":8744,"user_id":3672465,"display_name":"Beejor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1437111778,"creation_date":1437111778,"answer_id":31469065,"question_id":4504508,"body_markdown":"In general, **treating acronyms the same as the overall word case** is the most intuitive, for the following reasons.\r\n\r\n 1. It helps avoid memorization of a bunch of special rules (case in point, the MS guidelines above)\r\n 2. The lettercase of specific terms may change over time or between personal interpretations like with `posix`, `unix`, `regex`, `radar`, `scuba`, `laser`, and `email`\r\n 3. It can otherwise get visually clunky when you need to deal with (and/or combine) tech terms like `miniiOSLayout`, `SSHHTTPSSession`, `CPUURLLinkC`, and schemaeBay (granted these specific examples are unlikely, they help illustrate the problem)\r\n 4. It removes some confusion if the language uses different cases for different things, like capitalizing `AClassName` but not `anObjectName`\r\n\r\nYes, `httpUrl` looks dumb. But the more you code, the more you&#39;re likely to realize the above points on your own. And while not a huge deal in and of itself, a lot of little things can add up and create frustration with your work.","title":"Camel casing acronyms?","body":"<p>In general, <strong>treating acronyms the same as the overall word case</strong> is the most intuitive, for the following reasons.</p>\n\n<ol>\n<li>It helps avoid memorization of a bunch of special rules (case in point, the MS guidelines above)</li>\n<li>The lettercase of specific terms may change over time or between personal interpretations like with <code>posix</code>, <code>unix</code>, <code>regex</code>, <code>radar</code>, <code>scuba</code>, <code>laser</code>, and <code>email</code></li>\n<li>It can otherwise get visually clunky when you need to deal with (and/or combine) tech terms like <code>miniiOSLayout</code>, <code>SSHHTTPSSession</code>, <code>CPUURLLinkC</code>, and schemaeBay (granted these specific examples are unlikely, they help illustrate the problem)</li>\n<li>It removes some confusion if the language uses different cases for different things, like capitalizing <code>AClassName</code> but not <code>anObjectName</code></li>\n</ol>\n\n<p>Yes, <code>httpUrl</code> looks dumb. But the more you code, the more you're likely to realize the above points on your own. And while not a huge deal in and of itself, a lot of little things can add up and create frustration with your work.</p>\n"},{"tags":[],"owner":{"account_id":10030576,"reputation":483,"user_id":7417349,"accept_rate":67,"display_name":"javalearner_heaven"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1504771425,"creation_date":1504771425,"answer_id":46091079,"question_id":4504508,"body_markdown":"Depends on the length of acronyms also. \r\n\r\nDB---&gt;looks decent\r\n\r\n    openDBConnection\r\nHTTP---&gt;looks odd\r\n\r\n    openHTTPCConnection\r\n\r\nApart from rules:\r\n\r\n - Readability matters a lot to me.\r\n   \r\n  \r\n - Consistency shows your effort on programming. \r\n\r\nSo, do it consistent and legible.\r\n\r\n","title":"Camel casing acronyms?","body":"<p>Depends on the length of acronyms also. </p>\n\n<p>DB--->looks decent</p>\n\n<pre><code>openDBConnection\n</code></pre>\n\n<p>HTTP--->looks odd</p>\n\n<pre><code>openHTTPCConnection\n</code></pre>\n\n<p>Apart from rules:</p>\n\n<ul>\n<li><p>Readability matters a lot to me.</p></li>\n<li><p>Consistency shows your effort on programming. </p></li>\n</ul>\n\n<p>So, do it consistent and legible.</p>\n"},{"tags":[],"owner":{"account_id":8993869,"reputation":618,"user_id":6704959,"display_name":"luizv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691584797,"creation_date":1690571466,"answer_id":76790486,"question_id":4504508,"body_markdown":"### TL&#39;DR\r\nAs thumb rule, you should prefer `MyUrlClass`, not `MyURLClass`.\r\n\r\n### Conventions \r\nEach language has its own style guide.\r\n - C# allows for two letter acronyms to be all uppercased (pascal or camel case) or lowercased (when first word of camel case), but bigger acronyms should behave like normal words.\r\n - Java doesn&#39;t have a single convention, but in practice you could use .NET as reference, as [explained at another SO question][1]:\r\n\r\n&gt; For Java:\r\n&gt; \r\n&gt; For 4+ letter acronyms, use mixed case. The standard library does\r\n&gt; this, and it just makes good sense.\r\n&gt; \r\n&gt; For 3 letter acronyms, you can use all uppercase like the JCL, or you\r\n&gt; can use mixed case like the .NET Framework does. Either way, be\r\n&gt; consistent.\r\n&gt; \r\n&gt; For 2 letter acronyms, use all uppercase.\r\n&gt; \r\n&gt; For 2 letter abbreviations, Java does not really have a standard, but\r\n&gt; I suggest using mixed case, unless consistency with other names would\r\n&gt; make all uppercase look better.\r\n\r\n\r\n### If you&#39;re came here thinking of each letter of an acronym as a different word, think again\r\nIf that&#39;s your reasoning, analyse this:\r\n\r\nBy considering each letter a different word, a class of name `XMLDBParser` (in PascalCase) **for consistency,** would have identifiers looking like `xMLDBParser` (in camelCase). And that doesn&#39;t make any sense as naming convention. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/7366332/6704959","title":"Camel casing acronyms?","body":"<h3>TL'DR</h3>\n<p>As thumb rule, you should prefer <code>MyUrlClass</code>, not <code>MyURLClass</code>.</p>\n<h3>Conventions</h3>\n<p>Each language has its own style guide.</p>\n<ul>\n<li>C# allows for two letter acronyms to be all uppercased (pascal or camel case) or lowercased (when first word of camel case), but bigger acronyms should behave like normal words.</li>\n<li>Java doesn't have a single convention, but in practice you could use .NET as reference, as <a href=\"https://stackoverflow.com/a/7366332/6704959\">explained at another SO question</a>:</li>\n</ul>\n<blockquote>\n<p>For Java:</p>\n<p>For 4+ letter acronyms, use mixed case. The standard library does\nthis, and it just makes good sense.</p>\n<p>For 3 letter acronyms, you can use all uppercase like the JCL, or you\ncan use mixed case like the .NET Framework does. Either way, be\nconsistent.</p>\n<p>For 2 letter acronyms, use all uppercase.</p>\n<p>For 2 letter abbreviations, Java does not really have a standard, but\nI suggest using mixed case, unless consistency with other names would\nmake all uppercase look better.</p>\n</blockquote>\n<h3>If you're came here thinking of each letter of an acronym as a different word, think again</h3>\n<p>If that's your reasoning, analyse this:</p>\n<p>By considering each letter a different word, a class of name <code>XMLDBParser</code> (in PascalCase) <strong>for consistency,</strong> would have identifiers looking like <code>xMLDBParser</code> (in camelCase). And that doesn't make any sense as naming convention.</p>\n"}],"owner":{"account_id":114839,"reputation":23525,"user_id":301816,"accept_rate":84,"display_name":"stevebot"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13173,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":4504521,"answer_count":8,"score":42,"last_activity_date":1691584797,"creation_date":1292970138,"question_id":4504508,"body_markdown":"This question may seem pedantic or just silly, but what is your practice for camel casing when it comes to acronyms? Do you insist that everything, even acronyms must be camel cased, or do you make an exception for acronyms. Explanations would be great too. I&#39;m not sure how this practice effects IDE features (autocomplete) or what the industry standard are.","title":"Camel casing acronyms?","body":"<p>This question may seem pedantic or just silly, but what is your practice for camel casing when it comes to acronyms? Do you insist that everything, even acronyms must be camel cased, or do you make an exception for acronyms. Explanations would be great too. I'm not sure how this practice effects IDE features (autocomplete) or what the industry standard are.</p>\n"},{"tags":["java","maven","java-11","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1621521113,"post_id":67621344,"comment_id":119526031,"body_markdown":"Tried upgrading to the latest version of the plugin as well? Their [Github issues](https://github.com/mojohaus/aspectj-maven-plugin/issues) seems to be passive as well. At least the AspectJ [release notes, with 1.9.0](https://www.eclipse.org/aspectj/doc/released/README-190.html) states a way to perform what you desire.","body":"Tried upgrading to the latest version of the plugin as well? Their <a href=\"https://github.com/mojohaus/aspectj-maven-plugin/issues\" rel=\"nofollow noreferrer\">Github issues</a> seems to be passive as well. At least the AspectJ <a href=\"https://www.eclipse.org/aspectj/doc/released/README-190.html\" rel=\"nofollow noreferrer\">release notes, with 1.9.0</a> states a way to perform what you desire."}],"answers":[{"tags":[],"owner":{"account_id":1003622,"reputation":516,"user_id":1017901,"display_name":"bodrin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691584793,"creation_date":1691584793,"answer_id":76867886,"question_id":67621344,"body_markdown":"See\r\n\r\nhttps://github.com/eclipse-aspectj/aspectj/pull/146#issuecomment-1079883826\r\n\r\nhttps://github.com/mojohaus/aspectj-maven-plugin/issues/139\r\n\r\nhttps://github.com/eclipse-aspectj/aspectj/issues/145\r\n\r\nExamples using other two different packages that I needed for \r\n\r\n          import sun.security.tools.keytool.CertAndKeyGen;\r\n          import sun.security.x509.X500Name;\r\n\r\nbut you get the idea:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;!--fixes:\r\n                                   [ERROR] exporting a package from system module java.base is not allowed with &amp;#45;&amp;#45;releas--&gt;\r\n                    &lt;release combine.self=&quot;override&quot;/&gt;\r\n\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                        &lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\r\n                        \r\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                        &lt;arg&gt;java.base/sun.security.tools.keytool=ALL-UNNAMED&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                    &lt;!-- this fixes: [142,6] error: cannot find symbol [ERROR]   symbol:   class sun.security.tools.keytool.CertAndKeyGen --&gt;\r\n\r\n                    &lt;source&gt;${java.source.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.target.version}&lt;/target&gt;\r\n                    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\r\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\r\n\r\n            &lt;!-- AspectJ Compile Time Weaving --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${java.source.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.target.version}&lt;/target&gt;\r\n                    &lt;complianceLevel&gt;${java.target.version}&lt;/complianceLevel&gt;\r\n                    &lt;XnoInline&gt;true&lt;/XnoInline&gt;\r\n                    &lt;aspectLibraries&gt;\r\n                        &lt;aspectLibrary&gt;\r\n                            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n                        &lt;/aspectLibrary&gt;\r\n                    &lt;/aspectLibraries&gt;\r\n                    &lt;verbose&gt;true&lt;/verbose&gt;\r\n                    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n                    &lt;additionalCompilerArgs&gt;\r\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                        &lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\r\n                        \r\n                        &lt;!-- fix for:                       [ERROR]   (package sun.security.tools.keytool is declared in module java.base, which does not export it)--&gt;\r\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                        &lt;arg&gt;java.base/sun.security.tools.keytool=ALL-UNNAMED&lt;/arg&gt;\r\n                    &lt;/additionalCompilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\r\n                        &lt;version&gt;${org.aspectj.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n","title":"aspecj accessing sun packages in java 11","body":"<p>See</p>\n<p><a href=\"https://github.com/eclipse-aspectj/aspectj/pull/146#issuecomment-1079883826\" rel=\"nofollow noreferrer\">https://github.com/eclipse-aspectj/aspectj/pull/146#issuecomment-1079883826</a></p>\n<p><a href=\"https://github.com/mojohaus/aspectj-maven-plugin/issues/139\" rel=\"nofollow noreferrer\">https://github.com/mojohaus/aspectj-maven-plugin/issues/139</a></p>\n<p><a href=\"https://github.com/eclipse-aspectj/aspectj/issues/145\" rel=\"nofollow noreferrer\">https://github.com/eclipse-aspectj/aspectj/issues/145</a></p>\n<p>Examples using other two different packages that I needed for</p>\n<pre><code>      import sun.security.tools.keytool.CertAndKeyGen;\n      import sun.security.x509.X500Name;\n</code></pre>\n<p>but you get the idea:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;!--fixes:\n                               [ERROR] exporting a package from system module java.base is not allowed with &amp;#45;&amp;#45;releas--&gt;\n                &lt;release combine.self=&quot;override&quot;/&gt;\n\n                &lt;compilerArgs&gt;\n                    &lt;arg&gt;--add-exports&lt;/arg&gt;\n                    &lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\n                    \n                    &lt;arg&gt;--add-exports&lt;/arg&gt;\n                    &lt;arg&gt;java.base/sun.security.tools.keytool=ALL-UNNAMED&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n                &lt;!-- this fixes: [142,6] error: cannot find symbol [ERROR]   symbol:   class sun.security.tools.keytool.CertAndKeyGen --&gt;\n\n                &lt;source&gt;${java.source.version}&lt;/source&gt;\n                &lt;target&gt;${java.target.version}&lt;/target&gt;\n                &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n\n\n        &lt;!-- AspectJ Compile Time Weaving --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.source.version}&lt;/source&gt;\n                &lt;target&gt;${java.target.version}&lt;/target&gt;\n                &lt;complianceLevel&gt;${java.target.version}&lt;/complianceLevel&gt;\n                &lt;XnoInline&gt;true&lt;/XnoInline&gt;\n                &lt;aspectLibraries&gt;\n                    &lt;aspectLibrary&gt;\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n                    &lt;/aspectLibrary&gt;\n                &lt;/aspectLibraries&gt;\n                &lt;verbose&gt;true&lt;/verbose&gt;\n                &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n                &lt;additionalCompilerArgs&gt;\n                    &lt;arg&gt;--add-exports&lt;/arg&gt;\n                    &lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\n                    \n                    &lt;!-- fix for:                       [ERROR]   (package sun.security.tools.keytool is declared in module java.base, which does not export it)--&gt;\n                    &lt;arg&gt;--add-exports&lt;/arg&gt;\n                    &lt;arg&gt;java.base/sun.security.tools.keytool=ALL-UNNAMED&lt;/arg&gt;\n                &lt;/additionalCompilerArgs&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n                    &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\n                    &lt;version&gt;${org.aspectj.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;goal&gt;test-compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":20808929,"reputation":11,"user_id":15283306,"display_name":"Piyush Narula"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691584793,"creation_date":1621517468,"question_id":67621344,"body_markdown":"I am using ValidatorException class which is inside the package sun.security.validator.ValidatorException in java 11. But I am getting the following error :\r\n&gt;AJC compiler errors:\r\nThe type sun.security.validator.ValidatorException is not accessible\r\n\r\nIn maven compiler, i have fixed this problem using the compiler arguments --add-exports java.base/sun.security.validator=ALL-UNNAMED\r\n\r\nbut I don&#39;t know how to do with the AspectJ plugin.\r\n\r\nSnapshot of my pom.xml for maven compiler\r\n\r\n    &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;compilerArgs&gt;\r\n                &lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.validator=ALL-UNNAMED&lt;/arg&gt;\r\n              &lt;/compilerArgs&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-compile&lt;/id&gt;\r\n                &lt;phase&gt;none&lt;/phase&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nSnapshot my pom.xml for aspectj plugin\r\n\r\n      \r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n          &lt;verbose&gt;true&lt;/verbose&gt;\r\n          &lt;source&gt;11&lt;/source&gt;\r\n          &lt;target&gt;11&lt;/target&gt;\r\n          &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;compile-with-aspectj&lt;/id&gt;\r\n            &lt;phase&gt;compile&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;compile&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;weaveDirectories&gt;\r\n                &lt;weaveDirectory&gt;${project.build.outputDirectory}/aspectJ-classes&lt;/weaveDirectory&gt;\r\n              &lt;/weaveDirectories&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tools&lt;/artifactId&gt;\r\n            &lt;version&gt;11&lt;/version&gt;\r\n            &lt;scope&gt;system&lt;/scope&gt;\r\n            &lt;systemPath&gt;${project.basedir}/pom.xml&lt;/systemPath&gt;\r\n          &lt;/dependency&gt;\r\n    \r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.6&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.6&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n      &lt;/plugin&gt;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"aspecj accessing sun packages in java 11","body":"<p>I am using ValidatorException class which is inside the package sun.security.validator.ValidatorException in java 11. But I am getting the following error :</p>\n<blockquote>\n<p>AJC compiler errors:\nThe type sun.security.validator.ValidatorException is not accessible</p>\n</blockquote>\n<p>In maven compiler, i have fixed this problem using the compiler arguments --add-exports java.base/sun.security.validator=ALL-UNNAMED</p>\n<p>but I don't know how to do with the AspectJ plugin.</p>\n<p>Snapshot of my pom.xml for maven compiler</p>\n<pre><code>&lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.validator=ALL-UNNAMED&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-compile&lt;/id&gt;\n            &lt;phase&gt;none&lt;/phase&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Snapshot my pom.xml for aspectj plugin</p>\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.7&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n      &lt;verbose&gt;true&lt;/verbose&gt;\n      &lt;source&gt;11&lt;/source&gt;\n      &lt;target&gt;11&lt;/target&gt;\n      &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;compile-with-aspectj&lt;/id&gt;\n        &lt;phase&gt;compile&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;compile&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;weaveDirectories&gt;\n            &lt;weaveDirectory&gt;${project.build.outputDirectory}/aspectJ-classes&lt;/weaveDirectory&gt;\n          &lt;/weaveDirectories&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;com.sun&lt;/groupId&gt;\n        &lt;artifactId&gt;tools&lt;/artifactId&gt;\n        &lt;version&gt;11&lt;/version&gt;\n        &lt;scope&gt;system&lt;/scope&gt;\n        &lt;systemPath&gt;${project.basedir}/pom.xml&lt;/systemPath&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;version&gt;1.9.6&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\n        &lt;version&gt;1.9.6&lt;/version&gt;\n      &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n  &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","json","spring","mongodb","oauth-2.0"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677599,"post_id":76867479,"comment_id":135526285,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691584755,"creation_date":1691584755,"answer_id":76867880,"question_id":76867479,"body_markdown":"A general remark: it seems like you are trying to merge a command (change the state) and a query (retrieve the state) at the same time. This is generally not recommended, but of course I don&#39;t know your exact use-case.\r\n\r\nThis being said, if your query is located in a repository extending [`MongoRepository`](https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html), you can do operations like save, find, delete, count, exists, ... (and use customize those by using attributes of your entity, see [Defining Query Methods](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.details).\r\n\r\nHowever, if you want to leverage more specific MongoDB capabilities like updating or upserting, you would better use `MongoTemplate` or `MongoOperations`\r\n\r\n```\r\n@Component\r\npublic class RepositoryImpl {\r\n\r\n\tprivate final MongoTemplate mongoTemplate;\r\n\r\n\tpublic RepositoryImpl (MongoTemplate mongoTemplate) {\r\n\t\tthis.mongoTemplate = mongoTemplate;\r\n\t}\r\n\r\n\tpublic void updateMulti(...) {\r\n\t\tQuery query = new Query();\r\n\t\tquery.addCriteria(...);\r\n\t\tUpdate update = new Update();\r\n\t\tupdate.set(...);\r\n\t\tUpdateResult updateResult = mongoTemplate.updateMulti(query, update, Entity.class);\r\n\t}\r\n}\r\n```\r\n\r\nDo note that `update`, `updateMulti` or `upsert` will not return the updated data, but the can get the modifiedCount from the `UpdateResult`.","title":"@Query(&quot;{&#39;ao.status&#39;: ?0, &#39;ao.otp_type&#39;: ?1}&quot;) void updateOtpStatus(String otpStatus, String otpType); query is giving null result what can be ans","body":"<p>A general remark: it seems like you are trying to merge a command (change the state) and a query (retrieve the state) at the same time. This is generally not recommended, but of course I don't know your exact use-case.</p>\n<p>This being said, if your query is located in a repository extending <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html\" rel=\"nofollow noreferrer\"><code>MongoRepository</code></a>, you can do operations like save, find, delete, count, exists, ... (and use customize those by using attributes of your entity, see <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.details\" rel=\"nofollow noreferrer\">Defining Query Methods</a>.</p>\n<p>However, if you want to leverage more specific MongoDB capabilities like updating or upserting, you would better use <code>MongoTemplate</code> or <code>MongoOperations</code></p>\n<pre><code>@Component\npublic class RepositoryImpl {\n\n    private final MongoTemplate mongoTemplate;\n\n    public RepositoryImpl (MongoTemplate mongoTemplate) {\n        this.mongoTemplate = mongoTemplate;\n    }\n\n    public void updateMulti(...) {\n        Query query = new Query();\n        query.addCriteria(...);\n        Update update = new Update();\n        update.set(...);\n        UpdateResult updateResult = mongoTemplate.updateMulti(query, update, Entity.class);\n    }\n}\n</code></pre>\n<p>Do note that <code>update</code>, <code>updateMulti</code> or <code>upsert</code> will not return the updated data, but the can get the modifiedCount from the <code>UpdateResult</code>.</p>\n"}],"owner":{"account_id":29191580,"reputation":11,"user_id":22363603,"display_name":"Kajal Juwar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691584755,"creation_date":1691581662,"question_id":76867479,"body_markdown":"give a query for mongodb to update the status of certain rows in a database table named &quot;auth_otp&quot;. It will change the status to &#39;INACTIVE&#39; for rows that match the provided otpStatus and otpType\r\n\r\nTried this-\r\n@Query(&quot;{&#39;ao.status&#39;: ?0, &#39;ao.otp_type&#39;: ?1}&quot;)\r\n&#160; &#160; void updateOtpStatus(String otpStatus, String otpType);\r\n\r\n\r\n\r\nexpected - want updated rows or updated data\r\n","title":"@Query(&quot;{&#39;ao.status&#39;: ?0, &#39;ao.otp_type&#39;: ?1}&quot;) void updateOtpStatus(String otpStatus, String otpType); query is giving null result what can be ans","body":"<p>give a query for mongodb to update the status of certain rows in a database table named &quot;auth_otp&quot;. It will change the status to 'INACTIVE' for rows that match the provided otpStatus and otpType</p>\n<p>Tried this-\n@Query(&quot;{'ao.status': ?0, 'ao.otp_type': ?1}&quot;)\n    void updateOtpStatus(String otpStatus, String otpType);</p>\n<p>expected - want updated rows or updated data</p>\n"},{"tags":["java","android","pdf"],"owner":{"account_id":28625477,"reputation":81,"user_id":21917572,"display_name":"abhishek_6198"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691584265,"creation_date":1691584265,"question_id":76867818,"body_markdown":"I want to render a PDF file from the URL. The file is stored in my server. This is my code:\r\n\r\n```\r\nPDFView pdf = new PDFView(MainActivity.this,null); \r\npdf.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT,RelativeLayout.LayoutParams.MATCH_PARENT));\r\nString pdfUrl = &quot;https://....&quot;;\r\nnew Thread(() -&gt; {\r\n     try {\r\n         URL url = new URL(pdfUrl);\r\n         HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n         InputStream stream = new BufferedInputStream(connection.getInputStream());\r\n         pdf.fromStream(stream)\r\n             .onLoad(nbPages -&gt; { layout.addView(pdf);})\r\n             .onPageChange((page, pageCount) -&gt; { })\r\n             .load();\r\n         connection.disconnect();\r\n     } catch (IOException e) {  e.printStackTrace(); }\r\n}).start();\r\n```\r\nStrangely, the `PDFView` doesn&#39;t render the file, the parent `layout` is completely blank. When I run the `pdfUrl` in my browser, it shows the PDF file. So my url is correct.\r\n\r\nThen where does the problem lie? Why isn&#39;t the file rendering?","title":"How do I render a PDF file from the URL in android using barteksc PDFView library?","body":"<p>I want to render a PDF file from the URL. The file is stored in my server. This is my code:</p>\n<pre><code>PDFView pdf = new PDFView(MainActivity.this,null); \npdf.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT,RelativeLayout.LayoutParams.MATCH_PARENT));\nString pdfUrl = &quot;https://....&quot;;\nnew Thread(() -&gt; {\n     try {\n         URL url = new URL(pdfUrl);\n         HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n         InputStream stream = new BufferedInputStream(connection.getInputStream());\n         pdf.fromStream(stream)\n             .onLoad(nbPages -&gt; { layout.addView(pdf);})\n             .onPageChange((page, pageCount) -&gt; { })\n             .load();\n         connection.disconnect();\n     } catch (IOException e) {  e.printStackTrace(); }\n}).start();\n</code></pre>\n<p>Strangely, the <code>PDFView</code> doesn't render the file, the parent <code>layout</code> is completely blank. When I run the <code>pdfUrl</code> in my browser, it shows the PDF file. So my url is correct.</p>\n<p>Then where does the problem lie? Why isn't the file rendering?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":17875756,"reputation":106,"user_id":12985876,"display_name":"Taras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691583945,"creation_date":1691583945,"answer_id":76867770,"question_id":76857272,"body_markdown":"I rewrote my method in SampleShipmentDiscrepanciesUpdateUseCase to set it directly. I still don&#39;t understand what is the problem. And why MapStruct can&#39;t automatically map it properly. \r\n\r\n\r\n      public SampleShipmentDiscrepanciesUpdateResponse execute(long id, SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\r\n        SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity = sampleShipmentDiscrepanciesStore.load(id, IncludeFilter.EXCLUDE);\r\n        mapper.fromUpdateRequest(updateRequest, sampleShipmentDiscrepanciesEntity);\r\n        sampleShipmentDiscrepanciesEntity.setSampleShipment(sampleShipmentStore.load(updateRequest.getSampleShipmentId()));\r\n        sampleShipmentDiscrepanciesEntity.setSample(sampleRepository.findById(updateRequest.getSampleId())\r\n            .orElseThrow(SampleNotFoundException::new));\r\n        SampleShipmentDiscrepanciesEntity updatedSampleShipmentDiscrepanciesEntity =\r\n            sampleShipmentDiscrepanciesStore.save(sampleShipmentDiscrepanciesEntity);\r\n        return mapper.toUpdateResponse(updatedSampleShipmentDiscrepanciesEntity);\r\n      }\r\n\r\n","title":"Can&#39;t update table. Showing &quot;identifier of an instance altered from X to Y&quot;?","body":"<p>I rewrote my method in SampleShipmentDiscrepanciesUpdateUseCase to set it directly. I still don't understand what is the problem. And why MapStruct can't automatically map it properly.</p>\n<pre><code>  public SampleShipmentDiscrepanciesUpdateResponse execute(long id, SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\n    SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity = sampleShipmentDiscrepanciesStore.load(id, IncludeFilter.EXCLUDE);\n    mapper.fromUpdateRequest(updateRequest, sampleShipmentDiscrepanciesEntity);\n    sampleShipmentDiscrepanciesEntity.setSampleShipment(sampleShipmentStore.load(updateRequest.getSampleShipmentId()));\n    sampleShipmentDiscrepanciesEntity.setSample(sampleRepository.findById(updateRequest.getSampleId())\n        .orElseThrow(SampleNotFoundException::new));\n    SampleShipmentDiscrepanciesEntity updatedSampleShipmentDiscrepanciesEntity =\n        sampleShipmentDiscrepanciesStore.save(sampleShipmentDiscrepanciesEntity);\n    return mapper.toUpdateResponse(updatedSampleShipmentDiscrepanciesEntity);\n  }\n</code></pre>\n"}],"owner":{"account_id":17875756,"reputation":106,"user_id":12985876,"display_name":"Taras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691583945,"creation_date":1691479343,"question_id":76857272,"body_markdown":"I want to update: **sampleShipmentId**, **sampleId**, **description** in my **SampleShipmentDiscrepanciesEntity** \r\nI’m using Spring Boot, Java 17, Hibernate, JPA, MapStruct and Lombok. \r\nError message:\r\n&gt; org.springframework.orm.jpa.JpaSystemException: identifier of an\r\n&gt; instance of domain.sampleshipment.persistence.SampleShipmentEntity was\r\n&gt; altered from 3 to 1; nested exception is\r\n&gt; org.hibernate.HibernateException: identifier of an instance of\r\n&gt; domain.sampleshipment.persistence.SampleShipmentEntity was altered\r\n&gt; from 3 to 1]\r\n\r\n    @Service\r\n    @Transactional\r\n    @RequiredArgsConstructor\r\n    public class SampleShipmentDiscrepanciesUpdateUseCase {\r\n      private final SampleShipmentDiscrepanciesStore store;\r\n      private final DtoMapper mapper;\r\n    \r\n      public SampleShipmentDiscrepanciesUpdateResponse execute(long id, SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\r\n        SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity = store.load(id, IncludeFilter.EXCLUDE);\r\n        mapper.fromUpdateRequest(updateRequest, sampleShipmentDiscrepanciesEntity);\r\n        sampleShipmentDiscrepanciesEntity = store.save(sampleShipmentDiscrepanciesEntity);\r\n        return mapper.toUpdateResponse(sampleShipmentDiscrepanciesEntity);\r\n      }\r\n    \r\n      @Mapper(componentModel = &quot;spring&quot;)\r\n      interface DtoMapper {\r\n    \r\n        @Mapping(target = &quot;sampleShipment.id&quot;, source = &quot;sampleShipmentId&quot;)\r\n        @Mapping(target = &quot;sample.id&quot;, source = &quot;sampleId&quot;)\r\n        void fromUpdateRequest(SampleShipmentDiscrepanciesUpdateRequest updateRequest,\r\n                                                          @MappingTarget SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity);\r\n    \r\n        @Mapping(source = &quot;sampleShipmentDiscrepanciesEntity.sampleShipment.id&quot;, target = &quot;sampleShipmentId&quot;)\r\n        @Mapping(source = &quot;sampleShipmentDiscrepanciesEntity.sample.id&quot;, target = &quot;sampleId&quot;)\r\n        SampleShipmentDiscrepanciesUpdateResponse toUpdateResponse(SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity);\r\n      }\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class SampleShipmentDiscrepanciesUpdateRequest {\r\n      private long sampleShipmentId;\r\n      private long sampleId;\r\n      private String description;\r\n    }\r\n    \r\n    \r\n    @Entity\r\n    @Table(name = &quot;sample_shipment_discrepancies&quot;)\r\n    @Getter\r\n    @Setter\r\n    @ToString(onlyExplicitlyIncluded = true)\r\n    public class SampleShipmentDiscrepanciesEntity {\r\n    \r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Column(name = &quot;id&quot;)\r\n      @ToString.Include\r\n      private Long id;\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;sample_shipment_id&quot;, nullable = false)\r\n      private SampleShipmentEntity sampleShipment; // it has id that I want to map\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;sample_id&quot;)\r\n      private SampleEntity sample;// it has id that I want to map\r\n    \r\n      @Column(name = &quot;description&quot;, nullable = false)\r\n      @ToString.Include\r\n      private String description;\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class SampleShipmentDiscrepanciesUpdateResponse {\r\n      private long id;\r\n      private long sampleShipmentId;\r\n      private long sampleId;\r\n      private String description;\r\n    }\r\n    \r\n    \r\n    @PutMapping(&quot;/{id}&quot;)\r\n    public SampleShipmentDiscrepanciesUpdateResponse update(@PathVariable long id, @RequestBody SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\r\n      return sampleShipmentDiscrepanciesUpdateUseCase.execute(id, updateRequest);\r\n    }\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    @NoTransactional\r\n    class SampleShipmentDiscrepanciesStoreAdapter implements SampleShipmentDiscrepanciesStore {\r\n      private final SampleShipmentDiscrepanciesRepository repository;\r\n    \r\n       @Override\r\n      public SampleShipmentDiscrepanciesEntity load(final long id, IncludeFilter deleted) {\r\n        Specification&lt;SampleShipmentDiscrepanciesEntity&gt; spec = SpecificationHelper.create(FilterBuilder.equal(&quot;id&quot;, id));\r\n        spec = SpecificationHelper.addDeletedFilter(spec, deleted);\r\n        return repository.findOne(spec).orElseThrow(SampleShipmentDiscrepanciesNotFoundException::new);\r\n      }\r\n    \r\n      @Override\r\n      public SampleShipmentDiscrepanciesEntity save(final SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity) {\r\n        return repository.save(sampleShipmentDiscrepanciesEntity);\r\n      }\r\n    \r\n    \r\n      @Repository\r\n      interface SampleShipmentDiscrepanciesRepository extends JpaRepository&lt;SampleShipmentDiscrepanciesEntity, Long&gt;,\r\n          JpaSpecificationExecutor&lt;SampleShipmentDiscrepanciesEntity&gt; {\r\n      }\r\n    }\r\n\r\n","title":"Can&#39;t update table. Showing &quot;identifier of an instance altered from X to Y&quot;?","body":"<p>I want to update: <strong>sampleShipmentId</strong>, <strong>sampleId</strong>, <strong>description</strong> in my <strong>SampleShipmentDiscrepanciesEntity</strong>\nI’m using Spring Boot, Java 17, Hibernate, JPA, MapStruct and Lombok.\nError message:</p>\n<blockquote>\n<p>org.springframework.orm.jpa.JpaSystemException: identifier of an\ninstance of domain.sampleshipment.persistence.SampleShipmentEntity was\naltered from 3 to 1; nested exception is\norg.hibernate.HibernateException: identifier of an instance of\ndomain.sampleshipment.persistence.SampleShipmentEntity was altered\nfrom 3 to 1]</p>\n</blockquote>\n<pre><code>@Service\n@Transactional\n@RequiredArgsConstructor\npublic class SampleShipmentDiscrepanciesUpdateUseCase {\n  private final SampleShipmentDiscrepanciesStore store;\n  private final DtoMapper mapper;\n\n  public SampleShipmentDiscrepanciesUpdateResponse execute(long id, SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\n    SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity = store.load(id, IncludeFilter.EXCLUDE);\n    mapper.fromUpdateRequest(updateRequest, sampleShipmentDiscrepanciesEntity);\n    sampleShipmentDiscrepanciesEntity = store.save(sampleShipmentDiscrepanciesEntity);\n    return mapper.toUpdateResponse(sampleShipmentDiscrepanciesEntity);\n  }\n\n  @Mapper(componentModel = &quot;spring&quot;)\n  interface DtoMapper {\n\n    @Mapping(target = &quot;sampleShipment.id&quot;, source = &quot;sampleShipmentId&quot;)\n    @Mapping(target = &quot;sample.id&quot;, source = &quot;sampleId&quot;)\n    void fromUpdateRequest(SampleShipmentDiscrepanciesUpdateRequest updateRequest,\n                                                      @MappingTarget SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity);\n\n    @Mapping(source = &quot;sampleShipmentDiscrepanciesEntity.sampleShipment.id&quot;, target = &quot;sampleShipmentId&quot;)\n    @Mapping(source = &quot;sampleShipmentDiscrepanciesEntity.sample.id&quot;, target = &quot;sampleId&quot;)\n    SampleShipmentDiscrepanciesUpdateResponse toUpdateResponse(SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity);\n  }\n}\n\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SampleShipmentDiscrepanciesUpdateRequest {\n  private long sampleShipmentId;\n  private long sampleId;\n  private String description;\n}\n\n\n@Entity\n@Table(name = &quot;sample_shipment_discrepancies&quot;)\n@Getter\n@Setter\n@ToString(onlyExplicitlyIncluded = true)\npublic class SampleShipmentDiscrepanciesEntity {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;id&quot;)\n  @ToString.Include\n  private Long id;\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;sample_shipment_id&quot;, nullable = false)\n  private SampleShipmentEntity sampleShipment; // it has id that I want to map\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;sample_id&quot;)\n  private SampleEntity sample;// it has id that I want to map\n\n  @Column(name = &quot;description&quot;, nullable = false)\n  @ToString.Include\n  private String description;\n}\n\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SampleShipmentDiscrepanciesUpdateResponse {\n  private long id;\n  private long sampleShipmentId;\n  private long sampleId;\n  private String description;\n}\n\n\n@PutMapping(&quot;/{id}&quot;)\npublic SampleShipmentDiscrepanciesUpdateResponse update(@PathVariable long id, @RequestBody SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\n  return sampleShipmentDiscrepanciesUpdateUseCase.execute(id, updateRequest);\n}\n\n@Service\n@RequiredArgsConstructor\n@NoTransactional\nclass SampleShipmentDiscrepanciesStoreAdapter implements SampleShipmentDiscrepanciesStore {\n  private final SampleShipmentDiscrepanciesRepository repository;\n\n   @Override\n  public SampleShipmentDiscrepanciesEntity load(final long id, IncludeFilter deleted) {\n    Specification&lt;SampleShipmentDiscrepanciesEntity&gt; spec = SpecificationHelper.create(FilterBuilder.equal(&quot;id&quot;, id));\n    spec = SpecificationHelper.addDeletedFilter(spec, deleted);\n    return repository.findOne(spec).orElseThrow(SampleShipmentDiscrepanciesNotFoundException::new);\n  }\n\n  @Override\n  public SampleShipmentDiscrepanciesEntity save(final SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity) {\n    return repository.save(sampleShipmentDiscrepanciesEntity);\n  }\n\n\n  @Repository\n  interface SampleShipmentDiscrepanciesRepository extends JpaRepository&lt;SampleShipmentDiscrepanciesEntity, Long&gt;,\n      JpaSpecificationExecutor&lt;SampleShipmentDiscrepanciesEntity&gt; {\n  }\n}\n</code></pre>\n"},{"tags":["java","kotlin","gradle","jar","firebase-admin"],"answers":[{"tags":[],"owner":{"account_id":7174689,"reputation":822,"user_id":5481069,"display_name":"Psijic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691583745,"creation_date":1691583745,"answer_id":76867747,"question_id":76820531,"body_markdown":"Seems ok after updating Java from 17 to 19 and add\r\n\r\n        exclude(&quot;META-INF/*.SF&quot;)\r\n        exclude(&quot;META-INF/*.DSA&quot;)\r\n        exclude(&quot;META-INF/*.RSA&quot;)","title":"Can&#39;t build .jar file with firebase-admin-java","body":"<p>Seems ok after updating Java from 17 to 19 and add</p>\n<pre><code>    exclude(&quot;META-INF/*.SF&quot;)\n    exclude(&quot;META-INF/*.DSA&quot;)\n    exclude(&quot;META-INF/*.RSA&quot;)\n</code></pre>\n"}],"owner":{"account_id":7174689,"reputation":822,"user_id":5481069,"display_name":"Psijic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691583745,"creation_date":1690983939,"question_id":76820531,"body_markdown":"[This bug][1] prevents to use firebase-admin in pure Java/Kotlin projects. Is there a known fix/ad-hoc?\r\n\r\n&gt; The error happens after running the .jar:\r\n&gt; \r\n&gt;     Error: Could not find or load main class MainKt\r\n&gt; \r\n&gt; It looks like the problem appears because of firebase:\r\n&gt; \r\n&gt;     implementation(&quot;com.google.firebase:firebase-admin:9.2.0&quot;)\r\n&gt; \r\n&gt; Adding it in an empty project provides this error while all is ok\r\n&gt; without this dependency.\r\n\r\n\r\n  [1]: https://github.com/firebase/firebase-admin-java/issues/845","title":"Can&#39;t build .jar file with firebase-admin-java","body":"<p><a href=\"https://github.com/firebase/firebase-admin-java/issues/845\" rel=\"nofollow noreferrer\">This bug</a> prevents to use firebase-admin in pure Java/Kotlin projects. Is there a known fix/ad-hoc?</p>\n<blockquote>\n<p>The error happens after running the .jar:</p>\n<pre><code>Error: Could not find or load main class MainKt\n</code></pre>\n<p>It looks like the problem appears because of firebase:</p>\n<pre><code>implementation(&quot;com.google.firebase:firebase-admin:9.2.0&quot;)\n</code></pre>\n<p>Adding it in an empty project provides this error while all is ok\nwithout this dependency.</p>\n</blockquote>\n"},{"tags":["java","postgresql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691507355,"post_id":76860857,"comment_id":135499497,"body_markdown":"The code you posted doesn&#39;t even compile. `&quot;\\_&quot;` is an illegal escape. Either way, you probably need to have a double escape &quot;\\\\\\\\&quot;, so that it&#39;s going into the SQL still correctly escaped.","body":"The code you posted doesn&#39;t even compile. <code>&quot;\\_&quot;</code> is an illegal escape. Either way, you probably need to have a double escape &quot;\\\\\\\\&quot;, so that it&#39;s going into the SQL still correctly escaped."},{"owner":{"account_id":10728310,"reputation":53,"user_id":7895169,"display_name":"KonradK"},"score":0,"creation_date":1691520720,"post_id":76860857,"comment_id":135502093,"body_markdown":"I&#39;ve edited the question :). However, the problem is that the escape character is a char, not a string, so you can&#39;t really use double escape","body":"I&#39;ve edited the question :). However, the problem is that the escape character is a char, not a string, so you can&#39;t really use double escape"},{"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"score":1,"creation_date":1694154088,"post_id":76860857,"comment_id":135856487,"body_markdown":"I have the same problem using Spring Data JPA repoository. For example I do not have special characters in search term, but I receive this query. `select id, name from table where name like &#39;%test%&#39; escape !`, and this is not valid query in MySQL. I saw that HQL is correct with quotes around `!`, but when it is transformed to real query string, it is missing quotes. This was correct in previous version of Hibernate.","body":"I have the same problem using Spring Data JPA repoository. For example I do not have special characters in search term, but I receive this query. <code>select id, name from table where name like &#39;%test%&#39; escape !</code>, and this is not valid query in MySQL. I saw that HQL is correct with quotes around <code>!</code>, but when it is transformed to real query string, it is missing quotes. This was correct in previous version of Hibernate."},{"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"score":0,"creation_date":1694175651,"post_id":76860857,"comment_id":135860456,"body_markdown":"We upgraded Spring Boot to 3.1.3 and Hibernate to 6.2.7.Final. Also we were using hypersistence-utils version 3.5.0. When we upgraded hypersistence-utils to 3.5.2, everything worked correctly. I am no sure is it something in some of those dependencies, but it fixed our problem, so maybe it will give you some idea for your problem. I think that Spring Boo and Hibernate Version upgrade did not have much effect, but just in case. Cheers.","body":"We upgraded Spring Boot to 3.1.3 and Hibernate to 6.2.7.Final. Also we were using hypersistence-utils version 3.5.0. When we upgraded hypersistence-utils to 3.5.2, everything worked correctly. I am no sure is it something in some of those dependencies, but it fixed our problem, so maybe it will give you some idea for your problem. I think that Spring Boo and Hibernate Version upgrade did not have much effect, but just in case. Cheers."}],"owner":{"account_id":10728310,"reputation":53,"user_id":7895169,"display_name":"KonradK"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691583542,"creation_date":1691507215,"question_id":76860857,"body_markdown":"I am using *Spring Boot 3.1.2* with *Hibernate 6.2.6.Final* version with PostgreSQL and I&#39;ve encountered a problem in *Criteria Builder* `like(Expression&lt;String&gt; x, String pattern, char escapeChar)` method (and equivalents).\r\nThe generated SQL query is invalid, when the escape char is set. \r\n\r\nExample: \r\n\r\nThe criteria built with following code:\r\n\r\n    String searchTerm = &quot;\\\\_&quot;;\r\n    cb.like(root.get(&quot;name&quot;), &quot;%&quot; + searchTerm + &quot;%&quot;, &#39;\\\\&#39;)\r\n\r\nresult in:\r\n`org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;\\&quot;`\r\n\r\nand the generated query is: `select name from project where name like ? escape \\`\r\n\r\nIs that a bug on Hibernate&#39;s side or is it possible to format the query in criteria builder so its syntax is correct for PostgreSQL (which is I believe: `select name from project where name like ? escape &#39;\\&#39;`, note the escape char is quoted in &#39;&#39;)","title":"Error in Criteria Builder LIKE clause when escaping a character","body":"<p>I am using <em>Spring Boot 3.1.2</em> with <em>Hibernate 6.2.6.Final</em> version with PostgreSQL and I've encountered a problem in <em>Criteria Builder</em> <code>like(Expression&lt;String&gt; x, String pattern, char escapeChar)</code> method (and equivalents).\nThe generated SQL query is invalid, when the escape char is set.</p>\n<p>Example:</p>\n<p>The criteria built with following code:</p>\n<pre><code>String searchTerm = &quot;\\\\_&quot;;\ncb.like(root.get(&quot;name&quot;), &quot;%&quot; + searchTerm + &quot;%&quot;, '\\\\')\n</code></pre>\n<p>result in:\n<code>org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;\\&quot;</code></p>\n<p>and the generated query is: <code>select name from project where name like ? escape \\</code></p>\n<p>Is that a bug on Hibernate's side or is it possible to format the query in criteria builder so its syntax is correct for PostgreSQL (which is I believe: <code>select name from project where name like ? escape '\\'</code>, note the escape char is quoted in '')</p>\n"},{"tags":["java","azure","maven","azure-functions"],"answers":[{"tags":[],"owner":{"account_id":7442305,"reputation":1217,"user_id":5659695,"display_name":"Daredevil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691583429,"creation_date":1691524723,"answer_id":76862861,"question_id":76862805,"body_markdown":"In an Azure Function App, these application settings are set as environment variables. Therefore, in Java, you can access these settings using System.getenv() rather than System.getProperty().\r\n\r\nHere&#39;s how you would do it for the FUNCTIONS_EXTENSION_VERSION setting:\r\n\r\n\r\n    String functionsExtensionVersion = System.getenv(&quot;FUNCTIONS_EXTENSION_VERSION&quot;);\r\n    System.out.println(&quot;FUNCTIONS_EXTENSION_VERSION: &quot; + functionsExtensionVersion);\r\n\r\n\r\nWhen you define settings in the azure-functions-maven-plugin, those settings are applied during the deployment process to Azure. Therefore, when you&#39;re running the function locally, the settings you&#39;ve defined in the Maven configuration won&#39;t automatically apply to your local environment. You can either manually set the environment variables on your local machine or If you&#39;re using the Azure Functions Core Tools or the Visual Studio/VS Code Azure Functions extension, you can manually add the required application settings (environment variables) to the local.settings.json file\r\n\r\nYou can use azure cli to set the app configuration value after deploying azure function. \r\n\r\n```bash\r\naz functionapp config appsettings set --name acmefunction2 --resource-group acmeapp --settings FUNCTIONS_WORKER_RUNTIME=node WEBSITE_RUN_FROM_PACKAGE=1 SCM_DO_BUILD_DURING_DEPLOYMENT=true\r\n```","title":"How do you read appSettings variables from azure-maven-plugin in Java code?","body":"<p>In an Azure Function App, these application settings are set as environment variables. Therefore, in Java, you can access these settings using System.getenv() rather than System.getProperty().</p>\n<p>Here's how you would do it for the FUNCTIONS_EXTENSION_VERSION setting:</p>\n<pre><code>String functionsExtensionVersion = System.getenv(&quot;FUNCTIONS_EXTENSION_VERSION&quot;);\nSystem.out.println(&quot;FUNCTIONS_EXTENSION_VERSION: &quot; + functionsExtensionVersion);\n</code></pre>\n<p>When you define settings in the azure-functions-maven-plugin, those settings are applied during the deployment process to Azure. Therefore, when you're running the function locally, the settings you've defined in the Maven configuration won't automatically apply to your local environment. You can either manually set the environment variables on your local machine or If you're using the Azure Functions Core Tools or the Visual Studio/VS Code Azure Functions extension, you can manually add the required application settings (environment variables) to the local.settings.json file</p>\n<p>You can use azure cli to set the app configuration value after deploying azure function.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>az functionapp config appsettings set --name acmefunction2 --resource-group acmeapp --settings FUNCTIONS_WORKER_RUNTIME=node WEBSITE_RUN_FROM_PACKAGE=1 SCM_DO_BUILD_DURING_DEPLOYMENT=true\n</code></pre>\n"}],"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76862861,"answer_count":1,"score":0,"last_activity_date":1691583429,"creation_date":1691524174,"question_id":76862805,"body_markdown":"Is there a way to read the `&lt;appSettings&gt;` property values in java code ?\r\n\r\nhttps://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details\r\n\r\nI have tried to use `System.getProperty` but it is not set.\r\n\r\n**This is not a Spring Boot project.**\r\n\r\nIs there a way to set environment variables in the [azure-maven-plugin][1] ?\r\n\r\nMy azure-maven-plugin is the following:\r\n\r\n           &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;azure-functions-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${azure.functions.maven.plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;!-- function app name --&gt;\r\n                        &lt;appName&gt;${functionAppName}&lt;/appName&gt;\r\n                        &lt;!-- function app resource group --&gt;\r\n                        &lt;resourceGroup&gt;${resourceGroupName}&lt;/resourceGroup&gt;\r\n                        &lt;!-- function app service plan name --&gt;\r\n                        &lt;appServicePlanName&gt;${appServicePlanName}&lt;/appServicePlanName&gt;\r\n                        &lt;!-- function app region--&gt;\r\n                        &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-regions for all valid values --&gt;\r\n                        &lt;region&gt;${azure.region}&lt;/region&gt;\r\n                        &lt;!-- function pricingTier, default to be consumption if not specified --&gt;\r\n                        &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-pricing-tiers for all valid values --&gt;\r\n                        &lt;!-- &lt;pricingTier&gt;&lt;/pricingTier&gt; --&gt;\r\n    \r\n                        &lt;!-- Whether to disable application insights, default is false --&gt;\r\n                        &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details for all valid configurations for application insights--&gt;\r\n                        &lt;!-- &lt;disableAppInsights&gt;&lt;/disableAppInsights&gt; --&gt;\r\n                        &lt;runtime&gt;\r\n                            &lt;!-- runtime os, could be windows, linux or docker--&gt;\r\n                            &lt;os&gt;Linux&lt;/os&gt;\r\n                            &lt;javaVersion&gt;11&lt;/javaVersion&gt;\r\n                            &lt;!-- for docker function, please set the following parameters --&gt;\r\n                            &lt;!-- &lt;image&gt;[hub-user/]repo-name[:tag]&lt;/image&gt; --&gt;\r\n                            &lt;!-- &lt;serverId&gt;&lt;/serverId&gt; --&gt;\r\n                            &lt;!-- &lt;registryUrl&gt;&lt;/registryUrl&gt;  --&gt;\r\n                        &lt;/runtime&gt;\r\n                        &lt;appSettings&gt;\r\n                            &lt;property&gt;\r\n                                &lt;name&gt;FUNCTIONS_EXTENSION_VERSION&lt;/name&gt;\r\n                                &lt;value&gt;~4&lt;/value&gt;\r\n                            &lt;/property&gt;\r\n                        &lt;/appSettings&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;package-functions&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;package&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n\r\n  [1]: https://github.com/microsoft/azure-maven-plugins/tree/develop/azure-functions-maven-plugin\r\n","title":"How do you read appSettings variables from azure-maven-plugin in Java code?","body":"<p>Is there a way to read the <code>&lt;appSettings&gt;</code> property values in java code ?</p>\n<p><a href=\"https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details\" rel=\"nofollow noreferrer\">https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details</a></p>\n<p>I have tried to use <code>System.getProperty</code> but it is not set.</p>\n<p><strong>This is not a Spring Boot project.</strong></p>\n<p>Is there a way to set environment variables in the <a href=\"https://github.com/microsoft/azure-maven-plugins/tree/develop/azure-functions-maven-plugin\" rel=\"nofollow noreferrer\">azure-maven-plugin</a> ?</p>\n<p>My azure-maven-plugin is the following:</p>\n<pre><code>       &lt;plugin&gt;\n                &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n                &lt;artifactId&gt;azure-functions-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${azure.functions.maven.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!-- function app name --&gt;\n                    &lt;appName&gt;${functionAppName}&lt;/appName&gt;\n                    &lt;!-- function app resource group --&gt;\n                    &lt;resourceGroup&gt;${resourceGroupName}&lt;/resourceGroup&gt;\n                    &lt;!-- function app service plan name --&gt;\n                    &lt;appServicePlanName&gt;${appServicePlanName}&lt;/appServicePlanName&gt;\n                    &lt;!-- function app region--&gt;\n                    &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-regions for all valid values --&gt;\n                    &lt;region&gt;${azure.region}&lt;/region&gt;\n                    &lt;!-- function pricingTier, default to be consumption if not specified --&gt;\n                    &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-pricing-tiers for all valid values --&gt;\n                    &lt;!-- &lt;pricingTier&gt;&lt;/pricingTier&gt; --&gt;\n\n                    &lt;!-- Whether to disable application insights, default is false --&gt;\n                    &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details for all valid configurations for application insights--&gt;\n                    &lt;!-- &lt;disableAppInsights&gt;&lt;/disableAppInsights&gt; --&gt;\n                    &lt;runtime&gt;\n                        &lt;!-- runtime os, could be windows, linux or docker--&gt;\n                        &lt;os&gt;Linux&lt;/os&gt;\n                        &lt;javaVersion&gt;11&lt;/javaVersion&gt;\n                        &lt;!-- for docker function, please set the following parameters --&gt;\n                        &lt;!-- &lt;image&gt;[hub-user/]repo-name[:tag]&lt;/image&gt; --&gt;\n                        &lt;!-- &lt;serverId&gt;&lt;/serverId&gt; --&gt;\n                        &lt;!-- &lt;registryUrl&gt;&lt;/registryUrl&gt;  --&gt;\n                    &lt;/runtime&gt;\n                    &lt;appSettings&gt;\n                        &lt;property&gt;\n                            &lt;name&gt;FUNCTIONS_EXTENSION_VERSION&lt;/name&gt;\n                            &lt;value&gt;~4&lt;/value&gt;\n                        &lt;/property&gt;\n                    &lt;/appSettings&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;package-functions&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;package&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","android","wear-os-tiles"],"answers":[{"tags":[],"owner":{"account_id":373961,"reputation":21,"user_id":723903,"display_name":"George Brown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582638,"creation_date":1691582638,"answer_id":76867609,"question_id":76841897,"body_markdown":"Uninstalled and reinstalled my app and now I see it!","title":"Android WearOS tile does not show up","body":"<p>Uninstalled and reinstalled my app and now I see it!</p>\n"}],"owner":{"account_id":373961,"reputation":21,"user_id":723903,"display_name":"George Brown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691582638,"creation_date":1691242570,"question_id":76841897,"body_markdown":"I have a Java WearOS app that tries to implement a simple tile. The tile does not appear in the Add Tile list.\r\n\r\nAndroidManifest.xml\r\n\r\n    &lt;service\r\n        android:name=&#39;com.gncbrown.GetMeBackWatch.Utilities.GetMeBackTileService&#39;\r\n        android:exported=&#39;true&#39;\r\n        android:label=&#39;GetMeBack Tile&#39;\r\n        android:icon=&#39;@drawable/icon&#39;\r\n        android:permission=&#39;com.google.android.wearable.permission.BIND_TILE_PROVIDER&#39;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&#39;androidx.wear.tiles.action.BIND_TILE_PROVIDER&#39; /&gt;\r\n        &lt;/intent-filter&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&#39;androidx.wear.tiles.PREVIEW&#39;\r\n            android:resource=&#39;@drawable/icon&#39; /&gt;\r\n    &lt;/service&gt;\r\n\r\nGetMeBackTileService\r\n\r\n    public class GetMeBackTileService extends TileService {\r\n        private static final String RESOURCES_VERSION = &#39;5&#39;;\r\n    \r\n        @NonNull\r\n        @Override\r\n        protected ListenableFuture&lt;TileBuilders.Tile&gt; onTileRequest(@NonNull RequestBuilders.TileRequest requestParams) {\r\n    \r\n            return Futures.immediateFuture(new TileBuilders.Tile.Builder()\r\n                    .setResourcesVersion(RESOURCES_VERSION)\r\n                    //.setFreshnessIntervalMillis(60*1000*5) // 60 minutes\r\n                    .setTimeline(new TimelineBuilders.Timeline.Builder()\r\n                            .addTimelineEntry(new TimelineBuilders.TimelineEntry.Builder()\r\n                                    .setLayout(new LayoutElementBuilders.Layout.Builder()\r\n                                            .setRoot(new LayoutElementBuilders.Text.Builder().setText(&#39;Test&#39;).\r\n                                                    setModifiers(new ModifiersBuilders.Modifiers.Builder().setSemantics(\r\n                                                            new ModifiersBuilders.Semantics.Builder().setContentDescription(&#39;lol&#39;).build()).build()\r\n                                                    ).build()\r\n                                            ).build()\r\n                                    ).build()\r\n                            ).build()\r\n                    ).build()\r\n            );\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        protected ListenableFuture&lt;ResourceBuilders.Resources&gt; onResourcesRequest(@NonNull RequestBuilders.ResourcesRequest requestParams) {\r\n            return Futures.immediateFuture(new ResourceBuilders.Resources.Builder()\r\n                    .setVersion(&#39;5&#39;)\r\n                    .build());\r\n        }\r\n    }\r\n\r\nI don&#39;t see my tile appear in the tile list for apps.\r\n","title":"Android WearOS tile does not show up","body":"<p>I have a Java WearOS app that tries to implement a simple tile. The tile does not appear in the Add Tile list.</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;service\n    android:name='com.gncbrown.GetMeBackWatch.Utilities.GetMeBackTileService'\n    android:exported='true'\n    android:label='GetMeBack Tile'\n    android:icon='@drawable/icon'\n    android:permission='com.google.android.wearable.permission.BIND_TILE_PROVIDER'&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name='androidx.wear.tiles.action.BIND_TILE_PROVIDER' /&gt;\n    &lt;/intent-filter&gt;\n\n    &lt;meta-data\n        android:name='androidx.wear.tiles.PREVIEW'\n        android:resource='@drawable/icon' /&gt;\n&lt;/service&gt;\n</code></pre>\n<p>GetMeBackTileService</p>\n<pre><code>public class GetMeBackTileService extends TileService {\n    private static final String RESOURCES_VERSION = '5';\n\n    @NonNull\n    @Override\n    protected ListenableFuture&lt;TileBuilders.Tile&gt; onTileRequest(@NonNull RequestBuilders.TileRequest requestParams) {\n\n        return Futures.immediateFuture(new TileBuilders.Tile.Builder()\n                .setResourcesVersion(RESOURCES_VERSION)\n                //.setFreshnessIntervalMillis(60*1000*5) // 60 minutes\n                .setTimeline(new TimelineBuilders.Timeline.Builder()\n                        .addTimelineEntry(new TimelineBuilders.TimelineEntry.Builder()\n                                .setLayout(new LayoutElementBuilders.Layout.Builder()\n                                        .setRoot(new LayoutElementBuilders.Text.Builder().setText('Test').\n                                                setModifiers(new ModifiersBuilders.Modifiers.Builder().setSemantics(\n                                                        new ModifiersBuilders.Semantics.Builder().setContentDescription('lol').build()).build()\n                                                ).build()\n                                        ).build()\n                                ).build()\n                        ).build()\n                ).build()\n        );\n    }\n\n    @NonNull\n    @Override\n    protected ListenableFuture&lt;ResourceBuilders.Resources&gt; onResourcesRequest(@NonNull RequestBuilders.ResourcesRequest requestParams) {\n        return Futures.immediateFuture(new ResourceBuilders.Resources.Builder()\n                .setVersion('5')\n                .build());\n    }\n}\n</code></pre>\n<p>I don't see my tile appear in the tile list for apps.</p>\n"},{"tags":["java","spring","postgresql","hibernate"],"answers":[{"tags":[],"owner":{"account_id":9193259,"reputation":425,"user_id":6832959,"display_name":"Christopher"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1555523100,"creation_date":1555523100,"answer_id":55733302,"question_id":55732898,"body_markdown":"try to add\r\n\r\n    spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true","title":"How to resolve org.postgresql.jdbc.PgConnection.createClob() is not yet implemented","body":"<p>try to add</p>\n\n<pre><code>spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2807605,"reputation":587,"user_id":2414526,"display_name":"OneNoOne"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1555604395,"creation_date":1555604395,"answer_id":55750127,"question_id":55732898,"body_markdown":"After some tests I could resolve this. It seems Hibernate implementation was missing, so to resolve this I&#39;ve added It in gradle.build file. I thought Spring-boot already took care of It when getting JPA, but I was wrong. Here It is my updated dependencies from gradle.build:\r\n\r\n    dependencies {\r\n\r\n    //Spring\r\n    //implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    //runtimeOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\r\n    //Hibernate\r\n    implementation &#39;org.hibernate:hibernate-core:5.4.2.Final&#39;\r\n    implementation &#39;org.hibernate:hibernate-entitymanager:5.4.2.Final&#39;\r\n\r\n    //Postgres\r\n    implementation &#39;org.postgresql:postgresql:42.2.5.jre7&#39;\r\n\r\n    //Gson\r\n    implementation &#39;com.google.code.gson:gson:2.8.5&#39;\r\n\r\n    //Logger\r\n    implementation &#39;log4j:log4j:1.2.17&#39;\r\n\r\n\r\n}","title":"How to resolve org.postgresql.jdbc.PgConnection.createClob() is not yet implemented","body":"<p>After some tests I could resolve this. It seems Hibernate implementation was missing, so to resolve this I've added It in gradle.build file. I thought Spring-boot already took care of It when getting JPA, but I was wrong. Here It is my updated dependencies from gradle.build:</p>\n\n<pre><code>dependencies {\n\n//Spring\n//implementation 'org.springframework.boot:spring-boot-starter-actuator'\nimplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\nimplementation 'org.springframework.boot:spring-boot-starter-web'\n//runtimeOnly 'org.springframework.boot:spring-boot-devtools'\ntestImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n//Hibernate\nimplementation 'org.hibernate:hibernate-core:5.4.2.Final'\nimplementation 'org.hibernate:hibernate-entitymanager:5.4.2.Final'\n\n//Postgres\nimplementation 'org.postgresql:postgresql:42.2.5.jre7'\n\n//Gson\nimplementation 'com.google.code.gson:gson:2.8.5'\n\n//Logger\nimplementation 'log4j:log4j:1.2.17'\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":6281226,"reputation":35,"user_id":4882162,"accept_rate":100,"display_name":"Wim Veldhuis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582631,"creation_date":1691582631,"answer_id":76867607,"question_id":55732898,"body_markdown":"I had a similar issue, but in an older grails application. The issue started\r\nwhen we replaced c3p0 connection pool with Hikari.\r\n\r\nThe normal solution of setting the property in the hibernate.cfg file only works for the first datasource, but we have a second jpa datasource defined as beans in xml.\r\n\r\nFinally figured out that adding the following fragment to the related entityManagerFactory fixed the issue:\r\n\r\n      &lt;bean id=&quot;mediationEntitiyManagerFactory&quot; \r\n    class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;mediationDataSource&quot; /&gt;\r\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;...&quot;/&gt;\r\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n            &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\r\n        &lt;/property&gt;\r\n\r\n        &lt;!--  Using HikariCP, gave the warning:  Connection org.postgresql.jdbc.PgConnection@270d7864\r\n               marked as broken because of SQLSTATE(0A000), ErrorCode(0) java.sql.SQLFeatureNotSupportedException.\r\n               Setting this property is to avoid that warning\r\n               Hibernate before v5.4.0.CR1 has an issue with this, see\r\n               https://stackoverflow.com/questions/49110818/method-org-postgresql-jdbc-pgconnection-createclob-is-not-yet-implemented\r\n               This is what fixed it for jBillingMediationDataSource bean\r\n        --&gt;\r\n        &lt;property name=&quot;jpaProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.temp.use_jdbc_metadata_defaults&quot;&gt;false&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nHope this helps someone else who runs into this issue.\r\n","title":"How to resolve org.postgresql.jdbc.PgConnection.createClob() is not yet implemented","body":"<p>I had a similar issue, but in an older grails application. The issue started\nwhen we replaced c3p0 connection pool with Hikari.</p>\n<p>The normal solution of setting the property in the hibernate.cfg file only works for the first datasource, but we have a second jpa datasource defined as beans in xml.</p>\n<p>Finally figured out that adding the following fragment to the related entityManagerFactory fixed the issue:</p>\n<pre><code>  &lt;bean id=&quot;mediationEntitiyManagerFactory&quot; \nclass=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;mediationDataSource&quot; /&gt;\n    &lt;property name=&quot;packagesToScan&quot; value=&quot;...&quot;/&gt;\n    &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\n        &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\n    &lt;/property&gt;\n\n    &lt;!--  Using HikariCP, gave the warning:  Connection org.postgresql.jdbc.PgConnection@270d7864\n           marked as broken because of SQLSTATE(0A000), ErrorCode(0) java.sql.SQLFeatureNotSupportedException.\n           Setting this property is to avoid that warning\n           Hibernate before v5.4.0.CR1 has an issue with this, see\n           https://stackoverflow.com/questions/49110818/method-org-postgresql-jdbc-pgconnection-createclob-is-not-yet-implemented\n           This is what fixed it for jBillingMediationDataSource bean\n    --&gt;\n    &lt;property name=&quot;jpaProperties&quot;&gt;\n        &lt;props&gt;\n            &lt;prop key=&quot;hibernate.temp.use_jdbc_metadata_defaults&quot;&gt;false&lt;/prop&gt;\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Hope this helps someone else who runs into this issue.</p>\n"}],"owner":{"account_id":2807605,"reputation":587,"user_id":2414526,"display_name":"OneNoOne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4959,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":55750127,"answer_count":3,"score":2,"last_activity_date":1691582631,"creation_date":1555521276,"question_id":55732898,"body_markdown":"## The exception ##\r\n\r\nWhen starting spring-boot application I&#39;ve received:\r\n\r\nCaused by: java.sql.SQLFeatureNotSupportedException: Method org.postgresql.jdbc.PgConnection.createClob() is not yet implemented.\r\n\r\nI know this is related to some issue from Postgresql driver, which I am using now. \r\n\r\n## Unsucessful attempt ##\r\nMany people resolved the problem just putting this following line in application.properties file:\r\n\r\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=true\r\n\r\n\r\nI still have the same issue. Is there any other tip for It? In case thinking about see my project with current configuration:\r\nhttps://github.com/caliari77/hiRank\r\n","title":"How to resolve org.postgresql.jdbc.PgConnection.createClob() is not yet implemented","body":"<h2>The exception</h2>\n\n<p>When starting spring-boot application I've received:</p>\n\n<p>Caused by: java.sql.SQLFeatureNotSupportedException: Method org.postgresql.jdbc.PgConnection.createClob() is not yet implemented.</p>\n\n<p>I know this is related to some issue from Postgresql driver, which I am using now. </p>\n\n<h2>Unsucessful attempt</h2>\n\n<p>Many people resolved the problem just putting this following line in application.properties file:</p>\n\n<p>spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=true</p>\n\n<p>I still have the same issue. Is there any other tip for It? In case thinking about see my project with current configuration:\n<a href=\"https://github.com/caliari77/hiRank\" rel=\"nofollow noreferrer\">https://github.com/caliari77/hiRank</a></p>\n"},{"tags":["java","xml","xslt","xslt-2.0","bxslider"],"comments":[{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1691581697,"post_id":76867363,"comment_id":135510427,"body_markdown":"What exactly are you trying to accomplish by this?","body":"What exactly are you trying to accomplish by this?"}],"answers":[{"tags":[],"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691582159,"creation_date":1691581865,"answer_id":76867511,"question_id":76867363,"body_markdown":"You need to select a single Path2, not a sequence, so either make sure you use a positional predicate e.g. `Path2[1]` or make sure you use the substring in the context of a single `Path2` by e.g. matching on `Path2`.\r\n\r\nAs for your comment, that sounds as if you want e.g. `string-join(Path2) =&gt; substring(1, 500)` in XPath 3.1 or `substring(string-join(Path2, &#39;&#39;), 1, 500)` in XPath 2.","title":"A sequence of more than one item is not allowed as the first argument of fn:substring()","body":"<p>You need to select a single Path2, not a sequence, so either make sure you use a positional predicate e.g. <code>Path2[1]</code> or make sure you use the substring in the context of a single <code>Path2</code> by e.g. matching on <code>Path2</code>.</p>\n<p>As for your comment, that sounds as if you want e.g. <code>string-join(Path2) =&gt; substring(1, 500)</code> in XPath 3.1 or <code>substring(string-join(Path2, ''), 1, 500)</code> in XPath 2.</p>\n"},{"tags":[],"owner":{"account_id":9152577,"reputation":309,"user_id":6806608,"display_name":"SimmeD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582140,"creation_date":1691582140,"answer_id":76867551,"question_id":76867363,"body_markdown":"The error occurs because there are multiple Path2 elements and you are trying to apply substring function directly on them which returns multiple output sequences, as a result, the function fails as it expects a single string not multiple strings.\r\n\r\nAs a workaround, you can apply substring to each Path2 element individually by iterating over each Path2 element. Here is how you could do it:\r\n```XSLT\r\n    &lt;xsl:element name=&quot;EB&quot;&gt;\r\n      &lt;xsl:element name=&quot;ID&quot;&gt;  \r\n        &lt;xsl:for-each select=&quot;*:Path1/*:Path2&quot;&gt;\r\n           &lt;xsl:value-of select=&quot;substring(.,1,500)&quot;/&gt; \r\n        &lt;/xsl:for-each&gt;\r\n      &lt;/xsl:element&gt;\r\n    &lt;/xsl:element&gt;\r\n```\r\nIn this code, I have used a for-each loop to iterate over each Path2 element, and then applied substring to each of them individually.\r\n\r\nRemember to replace * with your appropriate namespace prefix. Also if you are looking to concat those strings instead of having separate values you can use concat or string-join function.\r\n```XSLT\r\n    &lt;xsl:element name=&quot;EB&quot;&gt;\r\n      &lt;xsl:element name=&quot;ID&quot;&gt;  \r\n        &lt;xsl:value-of select=&quot;string-join(*:Path1/*:Path2, &#39;, &#39;)&quot;/&gt;\r\n      &lt;/xsl:element&gt;\r\n    &lt;/xsl:element&gt;\r\n```\r\nThis would join all Path2 values with a comma. Then you can apply substring function on the joined string.","title":"A sequence of more than one item is not allowed as the first argument of fn:substring()","body":"<p>The error occurs because there are multiple Path2 elements and you are trying to apply substring function directly on them which returns multiple output sequences, as a result, the function fails as it expects a single string not multiple strings.</p>\n<p>As a workaround, you can apply substring to each Path2 element individually by iterating over each Path2 element. Here is how you could do it:</p>\n<pre><code>    &lt;xsl:element name=&quot;EB&quot;&gt;\n      &lt;xsl:element name=&quot;ID&quot;&gt;  \n        &lt;xsl:for-each select=&quot;*:Path1/*:Path2&quot;&gt;\n           &lt;xsl:value-of select=&quot;substring(.,1,500)&quot;/&gt; \n        &lt;/xsl:for-each&gt;\n      &lt;/xsl:element&gt;\n    &lt;/xsl:element&gt;\n</code></pre>\n<p>In this code, I have used a for-each loop to iterate over each Path2 element, and then applied substring to each of them individually.</p>\n<p>Remember to replace * with your appropriate namespace prefix. Also if you are looking to concat those strings instead of having separate values you can use concat or string-join function.</p>\n<pre><code>    &lt;xsl:element name=&quot;EB&quot;&gt;\n      &lt;xsl:element name=&quot;ID&quot;&gt;  \n        &lt;xsl:value-of select=&quot;string-join(*:Path1/*:Path2, ', ')&quot;/&gt;\n      &lt;/xsl:element&gt;\n    &lt;/xsl:element&gt;\n</code></pre>\n<p>This would join all Path2 values with a comma. Then you can apply substring function on the joined string.</p>\n"},{"tags":[],"owner":{"account_id":23033964,"reputation":1243,"user_id":17153010,"display_name":"y.arazim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582616,"creation_date":1691582252,"answer_id":76867566,"question_id":76867363,"body_markdown":"&gt; I want all the Path2 tags to be concatenated and the use substring to restrict to max value\r\n\r\nThat could be done simply by:\r\n\r\n    &lt;xsl:value-of select=&quot;substring(string-join(Path1/Path2, &#39;&#39;), 1 , 500)&quot;/&gt;","title":"A sequence of more than one item is not allowed as the first argument of fn:substring()","body":"<blockquote>\n<p>I want all the Path2 tags to be concatenated and the use substring to restrict to max value</p>\n</blockquote>\n<p>That could be done simply by:</p>\n<pre><code>&lt;xsl:value-of select=&quot;substring(string-join(Path1/Path2, ''), 1 , 500)&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":22396420,"reputation":57,"user_id":16607621,"display_name":"Ankit Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76867511,"answer_count":3,"score":0,"last_activity_date":1691582616,"creation_date":1691580797,"question_id":76867363,"body_markdown":"I am getting this error while using substring in xslt, the error message is clear, hence i tried putting the multiple sequence value in variable and using substring for the variable, it doesn&#39;t work either, same error. Can someone provide a workaround for this?\r\n\r\nInput:\r\n\r\n\t&lt;Path1&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt;SENDER 1&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; SENDER xyc&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; SENDER &lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; ORG ID:&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; ORG:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; ORG &lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF &lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF NAME:=A&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF ADDRESS&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF FI ID:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF FI:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; REC FI:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; REC ID:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; OBI:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/Path1&gt;\r\n\r\nxslt:\r\n\r\n&lt;xsl:element name=&quot;EB&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;xsl:element name=&quot;ID&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;xsl:value-of select=&quot;substring(*:Path1/*:Path2,1,500)&quot;/&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/xsl:element&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/xsl:element&gt;","title":"A sequence of more than one item is not allowed as the first argument of fn:substring()","body":"<p>I am getting this error while using substring in xslt, the error message is clear, hence i tried putting the multiple sequence value in variable and using substring for the variable, it doesn't work either, same error. Can someone provide a workaround for this?</p>\n<p>Input:</p>\n<pre><code>&lt;Path1&gt;\n                                    &lt;Path2&gt;SENDER 1&lt;/Path2&gt;\n                                    &lt;Path2&gt; SENDER xyc&lt;/Path2&gt;\n                                    &lt;Path2&gt; SENDER &lt;/Path2&gt;\n                                    &lt;Path2&gt; ORG ID:&lt;/Path2&gt;\n                                    &lt;Path2&gt; ORG:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; ORG &lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF &lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF NAME:=A&lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF ADDRESS&lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF FI ID:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF FI:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; REC FI:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; REC ID:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; OBI:=&lt;/Path2&gt;\n                                &lt;/Path1&gt;\n</code></pre>\n<p>xslt:</p>\n<p>&lt;xsl:element name=&quot;EB&quot;&gt;</p>\n<pre><code>                                            &lt;xsl:element name=&quot;ID&quot;&gt;\n                                                &lt;xsl:value-of select=&quot;substring(*:Path1/*:Path2,1,500)&quot;/&gt;\n                                            &lt;/xsl:element&gt;\n                                &lt;/xsl:element&gt;\n</code></pre>\n"},{"tags":["java","type-conversion","mapping","lombok","modelmapper"],"owner":{"account_id":29191634,"reputation":1,"user_id":22363643,"display_name":"Andrea Anglada Reina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691582560,"creation_date":1691582560,"question_id":76867598,"body_markdown":"I am trying to convert an Entity to a DTO using ModelMapper and when mapping the properties are always to null, when the Entity is returning the values correctly:\r\n\r\nEntity:\r\n```\r\npackage org.example.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.*;\r\n\r\n@Entity\r\n@Table(name= &quot;user&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column(name = &quot;name&quot;, nullable = false, length = 40)\r\n    private String name;\r\n    @Column(name = &quot;password&quot;, nullable = false, length = 40)\r\n    private String password;\r\n}\r\n\r\n```\r\n\r\nDto:\r\n```\r\npackage org.example.dto;\r\n\r\nimport lombok.*;\r\n\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class UserDto {\r\n    private Long id;\r\n    private String name;\r\n    private String password;\r\n}\r\n```\r\n\r\nService where mapping is done:\r\n```\r\npackage org.example.services;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.example.dto.UserDto;\r\nimport org.example.model.User;\r\nimport org.example.repository.UserRepository;\r\nimport org.modelmapper.ModelMapper;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.Objects;\r\n\r\n@Slf4j\r\n@Service\r\n@AllArgsConstructor\r\npublic class UserService {\r\n\r\n    private final UserRepository userRepository;\r\n    @Autowired\r\n    private ModelMapper mapper;\r\n\r\n    public UserDto getUser(Long id) throws Exception {\r\n        var res = userRepository.findById(id);\r\n        if(res.isEmpty()) {\r\n            throw new Exception(&quot;No existe el usuario con id=&quot; + id);\r\n        }\r\n        log.info(&quot;Se ha devuelto el usuario: &quot; + res.get());\r\n        return mapper.map(res.get(), UserDto.class);\r\n    }\r\n```\r\n\r\nI use lombok, but as far as I know this should not be a problem. The configuration is as follows:\r\n```\r\npackage org.example.config;\r\n\r\nimport org.modelmapper.ModelMapper;\r\nimport org.modelmapper.convention.MatchingStrategies;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class AcmeConfig {\r\n    @Bean\r\n    public ModelMapper modelMapper() {\r\n        ModelMapper mapper = new ModelMapper();\r\n        mapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT);\r\n        return mapper;\r\n    }\r\n}\r\n```\r\n\r\n\r\nThe truth is that I have always been able to map directly without problems since the process is very simple but for this project it does not work for me and it is quite frustrating.\r\n\r\nI have tried several times to change the configuration, change the lombok annotations to manual getters/setters, but I have not obtained any change.","title":"ModelMapper not working mapping Entity to DTO","body":"<p>I am trying to convert an Entity to a DTO using ModelMapper and when mapping the properties are always to null, when the Entity is returning the values correctly:</p>\n<p>Entity:</p>\n<pre><code>package org.example.model;\n\nimport jakarta.persistence.*;\nimport lombok.*;\n\n@Entity\n@Table(name= &quot;user&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = &quot;name&quot;, nullable = false, length = 40)\n    private String name;\n    @Column(name = &quot;password&quot;, nullable = false, length = 40)\n    private String password;\n}\n\n</code></pre>\n<p>Dto:</p>\n<pre><code>package org.example.dto;\n\nimport lombok.*;\n\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class UserDto {\n    private Long id;\n    private String name;\n    private String password;\n}\n</code></pre>\n<p>Service where mapping is done:</p>\n<pre><code>package org.example.services;\n\nimport lombok.AllArgsConstructor;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.example.dto.UserDto;\nimport org.example.model.User;\nimport org.example.repository.UserRepository;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Objects;\n\n@Slf4j\n@Service\n@AllArgsConstructor\npublic class UserService {\n\n    private final UserRepository userRepository;\n    @Autowired\n    private ModelMapper mapper;\n\n    public UserDto getUser(Long id) throws Exception {\n        var res = userRepository.findById(id);\n        if(res.isEmpty()) {\n            throw new Exception(&quot;No existe el usuario con id=&quot; + id);\n        }\n        log.info(&quot;Se ha devuelto el usuario: &quot; + res.get());\n        return mapper.map(res.get(), UserDto.class);\n    }\n</code></pre>\n<p>I use lombok, but as far as I know this should not be a problem. The configuration is as follows:</p>\n<pre><code>package org.example.config;\n\nimport org.modelmapper.ModelMapper;\nimport org.modelmapper.convention.MatchingStrategies;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class AcmeConfig {\n    @Bean\n    public ModelMapper modelMapper() {\n        ModelMapper mapper = new ModelMapper();\n        mapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT);\n        return mapper;\n    }\n}\n</code></pre>\n<p>The truth is that I have always been able to map directly without problems since the process is very simple but for this project it does not work for me and it is quite frustrating.</p>\n<p>I have tried several times to change the configuration, change the lombok annotations to manual getters/setters, but I have not obtained any change.</p>\n"},{"tags":["java","excel","groovy","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1691567980,"post_id":76864925,"comment_id":135507625,"body_markdown":"Is the last calculated value of use to you? You could always read that for formula cells instead of re-evaluating the formula","body":"Is the last calculated value of use to you? You could always read that for formula cells instead of re-evaluating the formula"},{"owner":{"account_id":2309337,"reputation":3766,"user_id":2027839,"accept_rate":71,"display_name":"Mike Warren"},"score":0,"creation_date":1691576763,"post_id":76864925,"comment_id":135509425,"body_markdown":"The value that was calculated when the Excel file was open is of use to me...","body":"The value that was calculated when the Excel file was open is of use to me..."},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1691581432,"post_id":76864925,"comment_id":135510371,"body_markdown":"Call https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Cell.html#getCachedFormulaResultType-- to see the cached type, then fetch the value based on that","body":"Call <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Cell.html#getCachedFormulaResultType--\" rel=\"nofollow noreferrer\">poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/&hellip;</a> to see the cached type, then fetch the value based on that"}],"answers":[{"tags":[],"owner":{"account_id":2309337,"reputation":3766,"user_id":2027839,"accept_rate":71,"display_name":"Mike Warren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691582529,"creation_date":1691582529,"answer_id":76867593,"question_id":76864925,"body_markdown":"I was able to fix this problem, with some tweaking of the code:\r\n\r\n\tpublic static double GetDollarAmount(Cell cell) { \r\n\t\tswitch (cell.getCellType()) { \r\n\t\t\tcase CellType.NUMERIC.code:\r\n\t\t\t\treturn cell.getNumericCellValue();\r\n\t\t\tcase CellType.STRING.code:\r\n\t\t\t\treturn SMDNumberUtils.parseDouble(cell.getStringCellValue());\r\n\t\t\tcase CellType.FORMULA.code:\r\n\t\t\t\tCellValue cellValue = this.EvaluateCellFormula(cell);\r\n\t\t\t\t\t\r\n\t\t\t\tif (!cellValue.getCellTypeEnum().equals(CellType.ERROR))\r\n\t\t\t\t\treturn cellValue.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\t\tcell.setCellFormula(cell.getCellFormula()\r\n\t\t\t\t\t.replaceAll(/[A-Z]+\\d+/, { match -&gt;\r\n\t\t\t\t\t    return &quot;VALUE($match)&quot;\r\n\t\t\t\t\t}))\r\n\t\t\t\t\r\n\t\t\t\treturn this.EvaluateCellFormula(cell)\r\n\t\t\t\t\t.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\tdefault: \r\n\t\t\t\tthrow new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static CellValue EvaluateCellFormula(Cell cell) { \r\n\t\treturn cell.getSheet().getWorkbook()\r\n\t\t\t\t.getCreationHelper()\r\n\t\t\t\t.createFormulaEvaluator()\r\n\t\t\t\t.evaluate(cell)\r\n\r\nIt looks like we need new `FormulaEvaluator` every time we `evaluate()`...","title":"Apache POI&#39;s FormulaEvaluator doesn&#39;t work after modifying a Cell&#39;s formula","body":"<p>I was able to fix this problem, with some tweaking of the code:</p>\n<pre><code>public static double GetDollarAmount(Cell cell) { \n    switch (cell.getCellType()) { \n        case CellType.NUMERIC.code:\n            return cell.getNumericCellValue();\n        case CellType.STRING.code:\n            return SMDNumberUtils.parseDouble(cell.getStringCellValue());\n        case CellType.FORMULA.code:\n            CellValue cellValue = this.EvaluateCellFormula(cell);\n                \n            if (!cellValue.getCellTypeEnum().equals(CellType.ERROR))\n                return cellValue.getNumberValue();\n                \n            cell.setCellFormula(cell.getCellFormula()\n                .replaceAll(/[A-Z]+\\d+/, { match -&gt;\n                    return &quot;VALUE($match)&quot;\n                }))\n            \n            return this.EvaluateCellFormula(cell)\n                .getNumberValue();\n                \n        default: \n            throw new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\n    }\n}\n\npublic static CellValue EvaluateCellFormula(Cell cell) { \n    return cell.getSheet().getWorkbook()\n            .getCreationHelper()\n            .createFormulaEvaluator()\n            .evaluate(cell)\n</code></pre>\n<p>It looks like we need new <code>FormulaEvaluator</code> every time we <code>evaluate()</code>...</p>\n"}],"owner":{"account_id":2309337,"reputation":3766,"user_id":2027839,"accept_rate":71,"display_name":"Mike Warren"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76867593,"answer_count":1,"score":0,"last_activity_date":1691582529,"creation_date":1691560538,"question_id":76864925,"body_markdown":"I am using Apache POI to write to a spreadsheet some test case expectations...\r\n\r\nThese expectations, as of right now, are all in the form of string cell values. They contain some expected dollar amounts...\r\n\r\nHere&#39;s example row:\r\n\r\n|Member ID|NPI Number|Member Prefix|Member First Name|Member Last Name|Member Suffix|Payment Frequency (A, M, S, Q)|Is Child Member?|Expected Fee|Expected Frequency Discount|Expected Family Discount|Expected Net Amount|Expected Gross Installment|Expected Net Installment|Test Case Step 2 Passed?|\r\n|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|\r\n|139|1209360364||Main07-28-2023 01:28:49|RandomMember||A|true|$ 2,362.00|$ 326.00|$ 116.91|$1,919.09|$ 2,362.00|$ 1,919.09|true|\r\n\r\nI make sure that the dollar amounts have the *Accounting Number Format*.\r\n\r\nI did notice a need to **have Excel calculate an Expected Net Amount** (one cell minus the sum of some others), instead of my code, by entering in a formula like:\r\n\r\n```\r\n=I34-(J34+K34)\r\n```\r\n\r\nThis works in the spreadsheet: after hitting enter, the value is calculated. However, when I try to read it programmatically, I face some issue: \r\n\r\nThe util method: \r\n\r\n```\r\n\tpublic static double GetDollarAmount(Cell cell) { \r\n\t\tswitch (cell.getCellType()) { \r\n\t\t\tcase CellType.NUMERIC.code:\r\n\t\t\t\treturn cell.getNumericCellValue();\r\n\t\t\tcase CellType.STRING.code:\r\n\t\t\t\treturn SMDNumberUtils.parseDouble(cell.getStringCellValue());\r\n\t\t\tcase CellType.FORMULA.code:\r\n\t\t\t\treturn cell.getSheet().getWorkbook()\r\n\t\t\t\t\t.getCreationHelper()\r\n\t\t\t\t\t.createFormulaEvaluator()\r\n\t\t\t\t\t.evaluate(cell)\r\n\t\t\t\t\t.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\tdefault: \r\n\t\t\t\tthrow new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\r\n\t\t}\r\n\t}\r\n```\r\n\r\nfails for the formula-type cell, because it returns 0 instead of, in the case of that example row, 1919.09 . When I check the `CellValue` that the `evaluate()` call returns, I see a `CellValue` with `#VALUE!` (which typically gets thrown when you&#39;re tryna use a numeric formula on string values)\r\n\r\nEven when I try to tweak my code to re-write the formula, by wrapping &quot;VALUE()&quot; around any cell references: \r\n\r\n```\r\n\tpublic static double GetDollarAmount(Cell cell) { \r\n\t\tswitch (cell.getCellType()) { \r\n\t\t\tcase CellType.NUMERIC.code:\r\n\t\t\t\treturn cell.getNumericCellValue();\r\n\t\t\tcase CellType.STRING.code:\r\n\t\t\t\treturn SMDNumberUtils.parseDouble(cell.getStringCellValue());\r\n\t\t\tcase CellType.FORMULA.code:\r\n\t\t\t\t\r\n\t\t\t\tFormulaEvaluator evaluator = cell.getSheet().getWorkbook()\r\n\t\t\t\t\t.getCreationHelper()\r\n\t\t\t\t\t.createFormulaEvaluator();\r\n\t\t\t\r\n\t\t\t\tCellValue cellValue = evaluator.evaluate(cell);\r\n\t\t\t\t\t\r\n\t\t\t\tif (!cellValue.getCellTypeEnum().equals(CellType.ERROR))\r\n\t\t\t\t\treturn cellValue.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\t\tcell.setCellFormula(cell.getCellFormula()\r\n\t\t\t\t\t.replaceAll(/[A-Z]+\\d+/, { match -&gt;\r\n\t\t\t\t\t    return &quot;VALUE($match)&quot;\r\n\t\t\t\t\t}))\r\n\t\t\t\t\r\n\t\t\t\treturn evaluator.evaluate(cell)\r\n\t\t\t\t\t.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\tdefault: \r\n\t\t\t\tthrow new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\r\n\t\t}\r\n\t}\r\n```\r\n\r\nIt still fails, with the same issue! Nothing changes, except we have a safe formula for next run!\r\n\r\n**How can I fix this**, given that my testing framework, Katalon Studio, has me stuck on Apache POI **v3.17** ? ","title":"Apache POI&#39;s FormulaEvaluator doesn&#39;t work after modifying a Cell&#39;s formula","body":"<p>I am using Apache POI to write to a spreadsheet some test case expectations...</p>\n<p>These expectations, as of right now, are all in the form of string cell values. They contain some expected dollar amounts...</p>\n<p>Here's example row:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Member ID</th>\n<th>NPI Number</th>\n<th>Member Prefix</th>\n<th>Member First Name</th>\n<th>Member Last Name</th>\n<th>Member Suffix</th>\n<th>Payment Frequency (A, M, S, Q)</th>\n<th>Is Child Member?</th>\n<th>Expected Fee</th>\n<th>Expected Frequency Discount</th>\n<th>Expected Family Discount</th>\n<th>Expected Net Amount</th>\n<th>Expected Gross Installment</th>\n<th>Expected Net Installment</th>\n<th>Test Case Step 2 Passed?</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>139</td>\n<td>1209360364</td>\n<td></td>\n<td>Main07-28-2023 01:28:49</td>\n<td>RandomMember</td>\n<td></td>\n<td>A</td>\n<td>true</td>\n<td>$ 2,362.00</td>\n<td>$ 326.00</td>\n<td>$ 116.91</td>\n<td>$1,919.09</td>\n<td>$ 2,362.00</td>\n<td>$ 1,919.09</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I make sure that the dollar amounts have the <em>Accounting Number Format</em>.</p>\n<p>I did notice a need to <strong>have Excel calculate an Expected Net Amount</strong> (one cell minus the sum of some others), instead of my code, by entering in a formula like:</p>\n<pre><code>=I34-(J34+K34)\n</code></pre>\n<p>This works in the spreadsheet: after hitting enter, the value is calculated. However, when I try to read it programmatically, I face some issue:</p>\n<p>The util method:</p>\n<pre><code>    public static double GetDollarAmount(Cell cell) { \n        switch (cell.getCellType()) { \n            case CellType.NUMERIC.code:\n                return cell.getNumericCellValue();\n            case CellType.STRING.code:\n                return SMDNumberUtils.parseDouble(cell.getStringCellValue());\n            case CellType.FORMULA.code:\n                return cell.getSheet().getWorkbook()\n                    .getCreationHelper()\n                    .createFormulaEvaluator()\n                    .evaluate(cell)\n                    .getNumberValue();\n                    \n            default: \n                throw new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\n        }\n    }\n</code></pre>\n<p>fails for the formula-type cell, because it returns 0 instead of, in the case of that example row, 1919.09 . When I check the <code>CellValue</code> that the <code>evaluate()</code> call returns, I see a <code>CellValue</code> with <code>#VALUE!</code> (which typically gets thrown when you're tryna use a numeric formula on string values)</p>\n<p>Even when I try to tweak my code to re-write the formula, by wrapping &quot;VALUE()&quot; around any cell references:</p>\n<pre><code>    public static double GetDollarAmount(Cell cell) { \n        switch (cell.getCellType()) { \n            case CellType.NUMERIC.code:\n                return cell.getNumericCellValue();\n            case CellType.STRING.code:\n                return SMDNumberUtils.parseDouble(cell.getStringCellValue());\n            case CellType.FORMULA.code:\n                \n                FormulaEvaluator evaluator = cell.getSheet().getWorkbook()\n                    .getCreationHelper()\n                    .createFormulaEvaluator();\n            \n                CellValue cellValue = evaluator.evaluate(cell);\n                    \n                if (!cellValue.getCellTypeEnum().equals(CellType.ERROR))\n                    return cellValue.getNumberValue();\n                    \n                cell.setCellFormula(cell.getCellFormula()\n                    .replaceAll(/[A-Z]+\\d+/, { match -&gt;\n                        return &quot;VALUE($match)&quot;\n                    }))\n                \n                return evaluator.evaluate(cell)\n                    .getNumberValue();\n                    \n            default: \n                throw new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\n        }\n    }\n</code></pre>\n<p>It still fails, with the same issue! Nothing changes, except we have a safe formula for next run!</p>\n<p><strong>How can I fix this</strong>, given that my testing framework, Katalon Studio, has me stuck on Apache POI <strong>v3.17</strong> ?</p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691133987,"post_id":76833588,"comment_id":135453264,"body_markdown":"Your best bet is to make special handling for `Map`s (and probably `List`s too). I don&#39;t recommend reflecting into the innards of those classes.","body":"Your best bet is to make special handling for <code>Map</code>s (and probably <code>List</code>s too). I don&#39;t recommend reflecting into the innards of those classes."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134471,"creation_date":1691134471,"answer_id":76833849,"question_id":76833588,"body_markdown":"You haven&#39;t provided much code, so I assume you&#39;re looping over the fields something like this:\r\n\r\n```\r\n        for (Field field : MainClass.class.getDeclaredFields()) {\r\n            String name = field.getName();\r\n            Class&lt;?&gt; type = field.getType();\r\n            Object value = field.get(mainClassInstance);\r\n        }\r\n```\r\n\r\nWhat you should do is have special handling for when you hit &quot;known&quot; types, such as `Map`:\r\n\r\n```\r\n        for (Field field : MainClass.class.getDeclaredFields()) {\r\n            if (Map.class.isAssignableFrom(field.getType())) {\r\n                Map&lt;?,?&gt; map = (Map&lt;?, ?&gt;) field.get(mainClass);\r\n                System.out.println(&quot;Found a map &quot; + map);\r\n                for (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\r\n                    System.out.printf(&quot;%s: %s%n&quot;, entry.getKey(), entry.getValue());\r\n                }\r\n            } else {\r\n                System.out.printf(&quot;%s %s: %s%n&quot;, field.getType(), field.getName(), field.get(mainClass));\r\n            }\r\n        }\r\n```\r\n\r\nYou can extend this for `List`s, and even for your own types like `SubClass`.","title":"How to access and process Fields of Type Map in a Class using Java Reflection","body":"<p>You haven't provided much code, so I assume you're looping over the fields something like this:</p>\n<pre><code>        for (Field field : MainClass.class.getDeclaredFields()) {\n            String name = field.getName();\n            Class&lt;?&gt; type = field.getType();\n            Object value = field.get(mainClassInstance);\n        }\n</code></pre>\n<p>What you should do is have special handling for when you hit &quot;known&quot; types, such as <code>Map</code>:</p>\n<pre><code>        for (Field field : MainClass.class.getDeclaredFields()) {\n            if (Map.class.isAssignableFrom(field.getType())) {\n                Map&lt;?,?&gt; map = (Map&lt;?, ?&gt;) field.get(mainClass);\n                System.out.println(&quot;Found a map &quot; + map);\n                for (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\n                    System.out.printf(&quot;%s: %s%n&quot;, entry.getKey(), entry.getValue());\n                }\n            } else {\n                System.out.printf(&quot;%s %s: %s%n&quot;, field.getType(), field.getName(), field.get(mainClass));\n            }\n        }\n</code></pre>\n<p>You can extend this for <code>List</code>s, and even for your own types like <code>SubClass</code>.</p>\n"},{"tags":[],"owner":{"account_id":23002072,"reputation":1,"user_id":17125905,"display_name":"Aakash K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691555405,"creation_date":1691147984,"answer_id":76835414,"question_id":76833588,"body_markdown":"```java\r\nsubClassMap=[{1=SubClass [aLong=1234567, aFloat=2.0, aDouble=2.234], 2=SubClass [aLong=31234567, aFloat=32.0, aDouble=32.234]}]\r\n```\r\nUse `toString()` method in both classes.\r\n\r\nMainClass:\r\n\r\n    @Override\r\n    public String toString() {\r\n\t    return &quot;subClassMap=[&quot; + subClassMap + &quot;]&quot;;\r\n\t}\r\n\r\nSubClass:\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;SubClass [aLong=&quot; + aLong + &quot;, aFloat=&quot; + aFloat + &quot;, aDouble=&quot; + aDouble + &quot;]&quot;;\r\n    }\r\n","title":"How to access and process Fields of Type Map in a Class using Java Reflection","body":"<pre class=\"lang-java prettyprint-override\"><code>subClassMap=[{1=SubClass [aLong=1234567, aFloat=2.0, aDouble=2.234], 2=SubClass [aLong=31234567, aFloat=32.0, aDouble=32.234]}]\n</code></pre>\n<p>Use <code>toString()</code> method in both classes.</p>\n<p>MainClass:</p>\n<pre><code>@Override\npublic String toString() {\n    return &quot;subClassMap=[&quot; + subClassMap + &quot;]&quot;;\n}\n</code></pre>\n<p>SubClass:</p>\n<pre><code>@Override\npublic String toString() {\n    return &quot;SubClass [aLong=&quot; + aLong + &quot;, aFloat=&quot; + aFloat + &quot;, aDouble=&quot; + aDouble + &quot;]&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691384199,"creation_date":1691384199,"answer_id":76848877,"question_id":76833588,"body_markdown":"&gt; _&quot;... But how I can access and print the details like *Key* and *Value* part of Field **subClassMap** of Type *Map* (Map&lt;Integer, SubClass&gt;). ..._\r\n\r\nYou&#39;re looking to use the _[Field#getGenericType](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Field.html#getGenericType())_ method, instead of the _[getType](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Field.html#getType())_ method.\r\n\r\nAnd, resourcefully the _getGenericType_ method will fall back to the _getType_ method, if the class does not have any _type variables_.\r\n\r\nHere is the source; _[GitHub &amp;ndash; OpenJDK &amp;ndash; jdk/src/java.base/share/classes/java/lang/reflect/Field.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/reflect/Field.java#L292),_\r\n\r\n```java\r\npublic Type getGenericType() {\r\n    if (getGenericSignature() != null)\r\n        return getGenericInfo().getGenericType();\r\n    else\r\n        return getType();\r\n}\r\n```\r\n\r\nHere is an example, with the classes you provided.\r\n\r\n```java\r\nSystem.out.println(MainClass.class.getSimpleName());\r\nfor (Field field : MainClass.class.getDeclaredFields())\r\n    System.out.printf(&quot;- %s of Type %s%n&quot;, field.getName(), field.getGenericType());\r\n        \r\nSystem.out.println(SubClass.class.getSimpleName());\r\nfor (Field field : SubClass.class.getDeclaredFields())\r\n    System.out.printf(&quot;- %s of Type %s%n&quot;, field.getName(), field.getGenericType());\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nMainClass\r\n- aInt of Type int\r\n- aChar of Type char\r\n- aBoolean of Type boolean\r\n- subClassMap of Type java.util.Map&lt;java.lang.Integer, SubClass&gt;\r\nSubClass\r\n- aLong of Type long\r\n- aFloat of Type float\r\n- aDouble of Type double\r\n```","title":"How to access and process Fields of Type Map in a Class using Java Reflection","body":"<blockquote>\n<p><em>&quot;... But how I can access and print the details like <em>Key</em> and <em>Value</em> part of Field <strong>subClassMap</strong> of Type <em>Map</em> (Map&lt;Integer, SubClass&gt;). ...</em></p>\n</blockquote>\n<p>You're looking to use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Field.html#getGenericType()\" rel=\"nofollow noreferrer\">Field#getGenericType</a></em> method, instead of the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Field.html#getType()\" rel=\"nofollow noreferrer\">getType</a></em> method.</p>\n<p>And, resourcefully the <em>getGenericType</em> method will fall back to the <em>getType</em> method, if the class does not have any <em>type variables</em>.</p>\n<p>Here is the source; <em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/reflect/Field.java#L292\" rel=\"nofollow noreferrer\">GitHub – OpenJDK – jdk/src/java.base/share/classes/java/lang/reflect/Field.java</a>,</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>public Type getGenericType() {\n    if (getGenericSignature() != null)\n        return getGenericInfo().getGenericType();\n    else\n        return getType();\n}\n</code></pre>\n<p>Here is an example, with the classes you provided.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(MainClass.class.getSimpleName());\nfor (Field field : MainClass.class.getDeclaredFields())\n    System.out.printf(&quot;- %s of Type %s%n&quot;, field.getName(), field.getGenericType());\n        \nSystem.out.println(SubClass.class.getSimpleName());\nfor (Field field : SubClass.class.getDeclaredFields())\n    System.out.printf(&quot;- %s of Type %s%n&quot;, field.getName(), field.getGenericType());\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>MainClass\n- aInt of Type int\n- aChar of Type char\n- aBoolean of Type boolean\n- subClassMap of Type java.util.Map&lt;java.lang.Integer, SubClass&gt;\nSubClass\n- aLong of Type long\n- aFloat of Type float\n- aDouble of Type double\n</code></pre>\n"}],"owner":{"account_id":1986288,"reputation":619,"user_id":1781423,"accept_rate":75,"display_name":"Krishna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691582486,"creation_date":1691132048,"question_id":76833588,"body_markdown":"I am trying to access and print all Fields of below mentioned Class (MainClass) using Java Reflection\r\n\r\n```\r\npublic class MainClass{\r\n  private int aInt;\r\n  private char aChar;\r\n  private boolean aBoolean;\r\n  private Map&lt;Integer, SubClass&gt; subClassMap;\r\n\r\n/*** Setters &amp; Getters ***/\r\n\r\n}\r\n\r\npublic class SubClass{\r\n  private long aLong;\r\n  private float aFloat;\r\n  private double aDouble;\r\n\r\n/*** Setters &amp; Getters ***/\r\n}\r\n```\r\n\r\nIt is able to access all Fields and print the details like Type, Name etc using \r\n\r\n```(new MainClass()).getClass().getDeclaredFields()```\r\n\r\nBut how I can access and print the details like *Key* and *Value* part of Field **subClassMap** of Type *Map* (Map&lt;Integer, SubClass&gt;).\r\n\r\nI am trying to print all fields &amp; sub-fields of MainClass **recursively** like,\r\n\r\n```\r\n** Class MainClass contains following Fields and Objects...\r\n- aInt of Type int\r\n- aChar of Type char\r\n- aBoolean of Type boolean\r\n- subClassMap of Type Map&lt;Integer, SubClass&gt;\r\n\r\n   ** SubClass of subClassMap Field contains following Fields and Objects...\r\n   - aLong of Type long\r\n   - aFloat of Type float\r\n   - aDouble of Type double\r\n```","title":"How to access and process Fields of Type Map in a Class using Java Reflection","body":"<p>I am trying to access and print all Fields of below mentioned Class (MainClass) using Java Reflection</p>\n<pre><code>public class MainClass{\n  private int aInt;\n  private char aChar;\n  private boolean aBoolean;\n  private Map&lt;Integer, SubClass&gt; subClassMap;\n\n/*** Setters &amp; Getters ***/\n\n}\n\npublic class SubClass{\n  private long aLong;\n  private float aFloat;\n  private double aDouble;\n\n/*** Setters &amp; Getters ***/\n}\n</code></pre>\n<p>It is able to access all Fields and print the details like Type, Name etc using</p>\n<p><code>(new MainClass()).getClass().getDeclaredFields()</code></p>\n<p>But how I can access and print the details like <em>Key</em> and <em>Value</em> part of Field <strong>subClassMap</strong> of Type <em>Map</em> (Map&lt;Integer, SubClass&gt;).</p>\n<p>I am trying to print all fields &amp; sub-fields of MainClass <strong>recursively</strong> like,</p>\n<pre><code>** Class MainClass contains following Fields and Objects...\n- aInt of Type int\n- aChar of Type char\n- aBoolean of Type boolean\n- subClassMap of Type Map&lt;Integer, SubClass&gt;\n\n   ** SubClass of subClassMap Field contains following Fields and Objects...\n   - aLong of Type long\n   - aFloat of Type float\n   - aDouble of Type double\n</code></pre>\n"},{"tags":["java","lambda","java-8"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1691584359,"post_id":26747982,"comment_id":135510990,"body_markdown":"Nobody should be running JDK 8 anymore.  You need to upgrade to LTS version JDK 17 immediately.","body":"Nobody should be running JDK 8 anymore.  You need to upgrade to LTS version JDK 17 immediately."}],"answers":[{"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1415150507,"creation_date":1415149062,"answer_id":26747983,"question_id":26747982,"body_markdown":"One solution:\r\n\r\n    public final class Foo\r\n    {\r\n        private static void printProperty(final Object key, final Object value)\r\n        {\r\n            System.out.println(key + &quot;: &quot; + value);\r\n        }\r\n    \r\n        public static void main(final String... args)\r\n        {\r\n            System.getProperties().forEach(Foo::printProperty);\r\n        }\r\n    }\r\n\r\nRundown:\r\n\r\n* `Properties` extends `Hashtable&lt;Object, Object&gt;` which itself implements `Map&lt;Object, Object&gt;`;\r\n* `Map` has a [`.forEach()`][1] method whose argument is a [`BiConsumer`][2];\r\n* `BiConsumer` is a [functional interface][3];\r\n* static method `printProperty()` of class `Foo` happens to have the same signature as a `BiConsumer&lt;Object, Object&gt;`: its &quot;return value&quot; is `void`, its first argument is `Object`, its second argument is `Object`;\r\n* we can therefore use `Foo::printProperty` as a method reference.\r\n\r\nA shorter version would be:\r\n\r\n    public final class ShorterFoo\r\n    {\r\n        public static void main(final String... args)\r\n        {\r\n            System.getProperties()\r\n                .forEach((key, value) -&gt; System.out.println(key + &quot;: &quot; + value));\r\n        }\r\n    }\r\n\r\nAt runtime, this would not make a difference. Note the type inference in the second example: the compiler can infer that `key` and `value` are of type `Object`. Another way to write this &quot;anonymous lambda&quot; would have been:\r\n\r\n    (Object key, Object value) -&gt; System.out.println(key + &quot;: &quot; + value)\r\n\r\n---\r\n\r\n(not so) Side note: even though it is a little outdated, you really want to watch [this video](http://www.youtube.com/watch?v=C_QbkGU_lqY) (yes, it&#39;s one hour long; yes, it is worth watching it all).\r\n\r\n---\r\n\r\n(not so) Side note 2: you may have noticed that [`Map`&#39;s `.forEach()` mentions a default implementation][4]; this means that your custom `Map` implementations, or other implementations from external libraries, will be able to use `.forEach()` (for instance, Guava&#39;s `ImmutableMap`s). Many such methods on Java collections exist; do not hesitate to use these &quot;new methods&quot; on &quot;old dogs&quot;.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/function/BiConsumer.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p>One solution:</p>\n\n<pre><code>public final class Foo\n{\n    private static void printProperty(final Object key, final Object value)\n    {\n        System.out.println(key + \": \" + value);\n    }\n\n    public static void main(final String... args)\n    {\n        System.getProperties().forEach(Foo::printProperty);\n    }\n}\n</code></pre>\n\n<p>Rundown:</p>\n\n<ul>\n<li><code>Properties</code> extends <code>Hashtable&lt;Object, Object&gt;</code> which itself implements <code>Map&lt;Object, Object&gt;</code>;</li>\n<li><code>Map</code> has a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\" rel=\"noreferrer\"><code>.forEach()</code></a> method whose argument is a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/function/BiConsumer.html\" rel=\"noreferrer\"><code>BiConsumer</code></a>;</li>\n<li><code>BiConsumer</code> is a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html\" rel=\"noreferrer\">functional interface</a>;</li>\n<li>static method <code>printProperty()</code> of class <code>Foo</code> happens to have the same signature as a <code>BiConsumer&lt;Object, Object&gt;</code>: its \"return value\" is <code>void</code>, its first argument is <code>Object</code>, its second argument is <code>Object</code>;</li>\n<li>we can therefore use <code>Foo::printProperty</code> as a method reference.</li>\n</ul>\n\n<p>A shorter version would be:</p>\n\n<pre><code>public final class ShorterFoo\n{\n    public static void main(final String... args)\n    {\n        System.getProperties()\n            .forEach((key, value) -&gt; System.out.println(key + \": \" + value));\n    }\n}\n</code></pre>\n\n<p>At runtime, this would not make a difference. Note the type inference in the second example: the compiler can infer that <code>key</code> and <code>value</code> are of type <code>Object</code>. Another way to write this \"anonymous lambda\" would have been:</p>\n\n<pre><code>(Object key, Object value) -&gt; System.out.println(key + \": \" + value)\n</code></pre>\n\n<hr>\n\n<p>(not so) Side note: even though it is a little outdated, you really want to watch <a href=\"http://www.youtube.com/watch?v=C_QbkGU_lqY\" rel=\"noreferrer\">this video</a> (yes, it's one hour long; yes, it is worth watching it all).</p>\n\n<hr>\n\n<p>(not so) Side note 2: you may have noticed that <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\" rel=\"noreferrer\"><code>Map</code>'s <code>.forEach()</code> mentions a default implementation</a>; this means that your custom <code>Map</code> implementations, or other implementations from external libraries, will be able to use <code>.forEach()</code> (for instance, Guava's <code>ImmutableMap</code>s). Many such methods on Java collections exist; do not hesitate to use these \"new methods\" on \"old dogs\".</p>\n"},{"tags":[],"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1416902414,"creation_date":1415151240,"answer_id":26748280,"question_id":26747982,"body_markdown":"@fge has missed one very short version that admittedly depends on the `toString` implementation of `Map.Entry`.\r\n\r\n    public class VeryShortFoo {\r\n        public static void main(String... args) {\r\n            System.getProperties().entrySet().forEach(System.out::println);\r\n        }\r\n    }\r\n\r\n - Here, the `entrySet` is streamed and each `Map.Entry` is printed with a reference to `out.println`.\r\n - `Map.Entry` implementations of `toString` generally return `getKey() + &quot;=&quot; + getValue()`.\r\n\r\nHere&#39;s another one I quite like.\r\n\r\n    public class ElegantFoo {\r\n        public static void main(String... args) {\r\n            System.getProperties().entrySet().stream()\r\n                .map(e -&gt; e.getKey() + &quot;: &quot; + e.getValue())\r\n                .forEach(System.out::println);\r\n        }\r\n    }\r\n\r\n - The `entrySet` is streamed again (this time explicitly with a call to `stream`).\r\n - [`Stream#map`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-) performs a 1:1 conversion from elements of one type to elements of another. Here, it turns a `Stream&lt;Map.Entry&gt;` in to a `Stream&lt;String&gt;`.\r\n - The `Stream&lt;String&gt;` is printed.","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p>@fge has missed one very short version that admittedly depends on the <code>toString</code> implementation of <code>Map.Entry</code>.</p>\n\n<pre><code>public class VeryShortFoo {\n    public static void main(String... args) {\n        System.getProperties().entrySet().forEach(System.out::println);\n    }\n}\n</code></pre>\n\n<ul>\n<li>Here, the <code>entrySet</code> is streamed and each <code>Map.Entry</code> is printed with a reference to <code>out.println</code>.</li>\n<li><code>Map.Entry</code> implementations of <code>toString</code> generally return <code>getKey() + \"=\" + getValue()</code>.</li>\n</ul>\n\n<p>Here's another one I quite like.</p>\n\n<pre><code>public class ElegantFoo {\n    public static void main(String... args) {\n        System.getProperties().entrySet().stream()\n            .map(e -&gt; e.getKey() + \": \" + e.getValue())\n            .forEach(System.out::println);\n    }\n}\n</code></pre>\n\n<ul>\n<li>The <code>entrySet</code> is streamed again (this time explicitly with a call to <code>stream</code>).</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\" rel=\"nofollow\"><code>Stream#map</code></a> performs a 1:1 conversion from elements of one type to elements of another. Here, it turns a <code>Stream&lt;Map.Entry&gt;</code> in to a <code>Stream&lt;String&gt;</code>.</li>\n<li>The <code>Stream&lt;String&gt;</code> is printed.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6954684,"reputation":680,"user_id":5336085,"accept_rate":80,"display_name":"programmar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463187424,"creation_date":1463187424,"answer_id":37221356,"question_id":26747982,"body_markdown":"In Java 8, the `Properties` class inherits a new method from `HashTable` called `forEach`. This new method accepts functions (*functional interfaces*) to be passed to it as arguments. To be more specific, it accepts the functional interface `BiConsumer&lt;T,U&gt;`. This functional interface&#39;s *functional method* is `accept(T t, U u)`. In Java 8, all functional interfaces can be written as Lambda expressions. Therefore, here is how we would display all properties in a `Property` instance:\r\n\r\n    Properties vmProps = System.getProperties();\r\n    vmProps.forEach((t,u) -&gt; System.out.println(&quot;Property: &quot; + t + &quot;\\nValue: &quot; + u + &quot;\\n&quot;));\r\n","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p>In Java 8, the <code>Properties</code> class inherits a new method from <code>HashTable</code> called <code>forEach</code>. This new method accepts functions (<em>functional interfaces</em>) to be passed to it as arguments. To be more specific, it accepts the functional interface <code>BiConsumer&lt;T,U&gt;</code>. This functional interface's <em>functional method</em> is <code>accept(T t, U u)</code>. In Java 8, all functional interfaces can be written as Lambda expressions. Therefore, here is how we would display all properties in a <code>Property</code> instance:</p>\n\n<pre><code>Properties vmProps = System.getProperties();\nvmProps.forEach((t,u) -&gt; System.out.println(\"Property: \" + t + \"\\nValue: \" + u + \"\\n\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582479,"creation_date":1550650119,"answer_id":54781548,"question_id":26747982,"body_markdown":"**Sorted** by key using a TreeSet. This makes the output easier to read. \r\n\r\n    printMap(System.getProperties());\r\n    printMap(System.getenv());\r\n\r\n    public static void printMap(Map properties) {\r\n\t\tnew TreeSet&lt;&gt;(properties.keySet()).forEach((k) -&gt; {\r\n\t\t\tSystem.out.println(k + &quot; : &quot; + properties.get(k));\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\r\n","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p><strong>Sorted</strong> by key using a TreeSet. This makes the output easier to read.</p>\n<pre><code>printMap(System.getProperties());\nprintMap(System.getenv());\n\npublic static void printMap(Map properties) {\n    new TreeSet&lt;&gt;(properties.keySet()).forEach((k) -&gt; {\n        System.out.println(k + &quot; : &quot; + properties.get(k));\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1366480,"reputation":212,"user_id":1302799,"display_name":"mlapeyre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557935014,"creation_date":1557935014,"answer_id":56153182,"question_id":26747982,"body_markdown":"\r\n    System.getProperties().list(System.out);","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<pre><code>System.getProperties().list(System.out);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15065643,"reputation":1,"user_id":10872888,"display_name":"Leonard Schiller"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649700404,"creation_date":1649700404,"answer_id":71832383,"question_id":26747982,"body_markdown":"```\r\npublic static void main(String[] args) {\r\n\r\n        System.getProperties().keySet().forEach((k)-&gt; System.out.println(k + &quot;   ::::   &quot;+ System.getProperty(k.toString())) );\r\n\r\n    }\r\n```\r\nShortest Version for me :D\r\nThe following for System Variables\r\n```\r\nSystem.getenv().forEach((String env, String val) -&gt; System.out.println(new StringBuilder(env).append(&quot;  =&gt;&gt;  &quot;).append(val).toString()));\r\n```\r\n","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<pre><code>public static void main(String[] args) {\n\n        System.getProperties().keySet().forEach((k)-&gt; System.out.println(k + &quot;   ::::   &quot;+ System.getProperty(k.toString())) );\n\n    }\n</code></pre>\n<p>Shortest Version for me :D\nThe following for System Variables</p>\n<pre><code>System.getenv().forEach((String env, String val) -&gt; System.out.println(new StringBuilder(env).append(&quot;  =&gt;&gt;  &quot;).append(val).toString()));\n</code></pre>\n"}],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6769,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1691582479,"creation_date":1415149062,"question_id":26747982,"body_markdown":"You can obtain a `Properties` instance of the JVM properties using [`System.getProperties()`][1]; how would you go about using Java 8 code to print all properties to the console?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getProperties--","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p>You can obtain a <code>Properties</code> instance of the JVM properties using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getProperties--\"><code>System.getProperties()</code></a>; how would you go about using Java 8 code to print all properties to the console?</p>\n"},{"tags":["java","validation","stream"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1691582221,"post_id":76867519,"comment_id":135510525,"body_markdown":"`fooList.stream().map(this::validate).filter(Objects::nonNull).findFirst().orElse(null)`. The `map` operation gives a `Stream&lt;FooError&gt;` with possible `null` values, so these need to be filtered out.","body":"<code>fooList.stream().map(this::validate).filter(Objects::nonNull&zwnj;&#8203;).findFirst().orElse&zwnj;&#8203;(null)</code>. The <code>map</code> operation gives a <code>Stream&lt;FooError&gt;</code> with possible <code>null</code> values, so these need to be filtered out."}],"answers":[{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691582336,"creation_date":1691582336,"answer_id":76867575,"question_id":76867519,"body_markdown":"```\r\npublic FooError validateFooList(final List&lt;Foo&gt; fooList) {\r\n    return fooList.stream()\r\n            .map(this::validate)\r\n            .filter(Objects::nonNull)\r\n            .findFirst()\r\n            .orElse(null);\r\n    }\r\n```\r\n\r\nThis calls the `validate` method for each `Foo` instance and filters  only the non-null `FooError` values, finds and returns the first `FooError` in the stream or *null* if there are none.","title":"Return enum object using validate method inside list validate function","body":"<pre><code>public FooError validateFooList(final List&lt;Foo&gt; fooList) {\n    return fooList.stream()\n            .map(this::validate)\n            .filter(Objects::nonNull)\n            .findFirst()\n            .orElse(null);\n    }\n</code></pre>\n<p>This calls the <code>validate</code> method for each <code>Foo</code> instance and filters  only the non-null <code>FooError</code> values, finds and returns the first <code>FooError</code> in the stream or <em>null</em> if there are none.</p>\n"}],"owner":{"account_id":5214373,"reputation":79,"user_id":4169810,"display_name":"JBallester"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76867575,"answer_count":1,"score":-1,"last_activity_date":1691582336,"creation_date":1691581925,"question_id":76867519,"body_markdown":"I have a problem that I want to resolve with Java streams if possible. This is my code.\r\n\r\n\tclass Foo {\r\n\t\tprivate String name;\r\n\t\tprivate String surname;\r\n\t\t// getters and setters\r\n\t}\r\n\r\n\tenum FooError {\r\n\t\tNO_NAME(&quot;Name cannot be null.&quot;), NO_SURNAME(&quot;Surname cannot be null&quot;);\r\n\r\n\t\tprivate final String message;\r\n\r\n\t\tFooError(final String message) {\r\n\t\t\tthis.message = message;\r\n\t\t}\r\n\r\n\t\tpublic String message() {\r\n\t\t\treturn message;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic FooError validate(final Foo foo) {\r\n\t\tif (StringUtils.isBlank(foo.getName())) {\r\n\t\t\treturn FooError.NO_NAME;\r\n\t\t}\r\n\r\n\t\tif (StringUtils.isBlank(foo.getSurname())) {\r\n\t\t\treturn FooError.NO_SURNAME;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic FooError validateFooList(final List&lt;Foo&gt; fooList) {\r\n\t\tFooError = fooList.stream()....\r\n\t}\r\n\r\nI want to return the first FooError ocurrence or null in the list using streams. Is it possible and if so, how can I do it?","title":"Return enum object using validate method inside list validate function","body":"<p>I have a problem that I want to resolve with Java streams if possible. This is my code.</p>\n<pre><code>class Foo {\n    private String name;\n    private String surname;\n    // getters and setters\n}\n\nenum FooError {\n    NO_NAME(&quot;Name cannot be null.&quot;), NO_SURNAME(&quot;Surname cannot be null&quot;);\n\n    private final String message;\n\n    FooError(final String message) {\n        this.message = message;\n    }\n\n    public String message() {\n        return message;\n    }\n\n}\n\npublic FooError validate(final Foo foo) {\n    if (StringUtils.isBlank(foo.getName())) {\n        return FooError.NO_NAME;\n    }\n\n    if (StringUtils.isBlank(foo.getSurname())) {\n        return FooError.NO_SURNAME;\n    }\n    return null;\n}\n\npublic FooError validateFooList(final List&lt;Foo&gt; fooList) {\n    FooError = fooList.stream()....\n}\n</code></pre>\n<p>I want to return the first FooError ocurrence or null in the list using streams. Is it possible and if so, how can I do it?</p>\n"},{"tags":["java","swagger","openapi","code-generation","swagger-codegen"],"comments":[{"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"score":0,"creation_date":1691572208,"post_id":76865635,"comment_id":135508445,"body_markdown":"For me the point of openapi-swagger is to provide the Description and constraints about JSON and REST.  There are no notion of inheritance in Json and in Json-schema and openAPI uses json-schema if i&#39;m not wrong, see https://stackoverflow.com/questions/71034983/json-schema-vs-open-api-java-support","body":"For me the point of openapi-swagger is to provide the Description and constraints about JSON and REST.  There are no notion of inheritance in Json and in Json-schema and openAPI uses json-schema if i&#39;m not wrong, see <a href=\"https://stackoverflow.com/questions/71034983/json-schema-vs-open-api-java-support\" title=\"json schema vs open api java support\">stackoverflow.com/questions/71034983/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582243,"creation_date":1691582243,"answer_id":76867564,"question_id":76865635,"body_markdown":"I have no idea why but it works:\r\n\r\n \r\n\r\n    Parent:\r\n       discriminator:\r\n         propertyName: stub_type\r\n       description: Parent\r\n       properties:\r\n         id: \r\n            $ref: &#39;#/components/schemas/id&#39;","title":"How to describe inheritance of DTO in open api 3.0 to have java inheritance in generated classes?","body":"<p>I have no idea why but it works:</p>\n<pre><code>Parent:\n   discriminator:\n     propertyName: stub_type\n   description: Parent\n   properties:\n     id: \n        $ref: '#/components/schemas/id'\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":252,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691582243,"creation_date":1691567308,"question_id":76865635,"body_markdown":"I have 3 entities\r\n\r\n    parent \r\n     - child_1\r\n     - child_2\r\n\r\nAnd my openApi definition:\r\n    \r\n     Parent:\r\n      description: Parent\r\n      properties:\r\n        id: \r\n          $ref: &#39;#/components/schemas/id&#39;\r\n      \r\n      Child1:\r\n        allOf:\r\n          - $ref: &#39;#/components/schemas/Parent&#39;\r\n          - type: object\r\n            description: Child_1\r\n            properties:\r\n              child1Fied:\r\n                $ref: &#39;#/components/schemas/child1Fied&#39;\r\n\r\n       Child2:\r\n        allOf:\r\n          - $ref: &#39;#/components/schemas/Parent&#39;\r\n          - type: object\r\n            description: Child_2\r\n            properties:\r\n              child1Fied:\r\n                $ref: &#39;#/components/schemas/child2Fied&#39;\r\n\r\n\r\nI expected to have generated classes like this:\r\n\r\n    Child1 extends Parent\r\n    ...\r\n    Child2 extends Parent\r\n    ...\r\n\r\n\r\nBut as a result all 3 classes are independent with their own fields (parent has id field, Child1 has his own id and child1Fied, Child2 has his own id and child2Fied). \r\n\r\nIs there way to make a hint for code generator to implement classes via inheritance ?\r\n\r\n**P.S.**\r\nI haven&#39;t found answer here: https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/\r\n","title":"How to describe inheritance of DTO in open api 3.0 to have java inheritance in generated classes?","body":"<p>I have 3 entities</p>\n<pre><code>parent \n - child_1\n - child_2\n</code></pre>\n<p>And my openApi definition:</p>\n<pre><code> Parent:\n  description: Parent\n  properties:\n    id: \n      $ref: '#/components/schemas/id'\n  \n  Child1:\n    allOf:\n      - $ref: '#/components/schemas/Parent'\n      - type: object\n        description: Child_1\n        properties:\n          child1Fied:\n            $ref: '#/components/schemas/child1Fied'\n\n   Child2:\n    allOf:\n      - $ref: '#/components/schemas/Parent'\n      - type: object\n        description: Child_2\n        properties:\n          child1Fied:\n            $ref: '#/components/schemas/child2Fied'\n</code></pre>\n<p>I expected to have generated classes like this:</p>\n<pre><code>Child1 extends Parent\n...\nChild2 extends Parent\n...\n</code></pre>\n<p>But as a result all 3 classes are independent with their own fields (parent has id field, Child1 has his own id and child1Fied, Child2 has his own id and child2Fied).</p>\n<p>Is there way to make a hint for code generator to implement classes via inheritance ?</p>\n<p><strong>P.S.</strong>\nI haven't found answer here: <a href=\"https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/\" rel=\"nofollow noreferrer\">https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/</a></p>\n"},{"tags":["java","eclipse","macos"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691574163,"post_id":76866453,"comment_id":135508840,"body_markdown":"Is the java process behind Eclipse running as the same user?","body":"Is the java process behind Eclipse running as the same user?"},{"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"score":0,"creation_date":1691574397,"post_id":76866453,"comment_id":135508891,"body_markdown":"@g00se yes, both are running under my user account (verified in `Activity Monitor` using PID).","body":"@g00se yes, both are running under my user account (verified in <code>Activity Monitor</code> using PID)."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1691581673,"post_id":76866453,"comment_id":135510421,"body_markdown":"Applications like Eclipse don&#39;t get the path set up for Terminal. See [here](https://stackoverflow.com/q/135688/2670892) for lots of discussion","body":"Applications like Eclipse don&#39;t get the path set up for Terminal. See <a href=\"https://stackoverflow.com/q/135688/2670892\">here</a> for lots of discussion"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691581735,"post_id":76866453,"comment_id":135510435,"body_markdown":"Does this answer your question? [Environment variables in Eclipse](https://stackoverflow.com/questions/7048216/environment-variables-in-eclipse)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7048216/environment-variables-in-eclipse\">Environment variables in Eclipse</a>"},{"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"score":0,"creation_date":1691581955,"post_id":76866453,"comment_id":135510469,"body_markdown":"@aled no - I don&#39;t want to manually copy my `$PATH` to my IDE, and that&#39;s not portable.","body":"@aled no - I don&#39;t want to manually copy my <code>$PATH</code> to my IDE, and that&#39;s not portable."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1691666336,"post_id":76866453,"comment_id":135523672,"body_markdown":"By default, applications are launched from within Eclipse without any environment variables set (for reasons of portability).  [If you want to pass or local environment variable `PATH` to your application, in your launch configuration in the tab _Environment_ set `PATH` to `${env_var:PATH}`](https://stackoverflow.com/a/55698254/6505250).","body":"By default, applications are launched from within Eclipse without any environment variables set (for reasons of portability).  <a href=\"https://stackoverflow.com/a/55698254/6505250\">If you want to pass or local environment variable <code>PATH</code> to your application, in your launch configuration in the tab <i>Environment</i> set <code>PATH</code> to <code>${env_var:PATH}</code></a>."}],"answers":[{"tags":[],"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582200,"creation_date":1691575260,"answer_id":76866627,"question_id":76866453,"body_markdown":"Coming from Linux. I would try:\r\n\r\n**Understanding environment variables**\r\n\r\nIf you run java from your console it executes in the context of the current console session.\r\n\r\n1. If you change `$PATH` in your current session it doesn&#180;t mean that the value is available system wide. e.g. when you start a different session (eclipse) the content of the variable can differ.\r\n\r\n2. Different shells behave differently depending on where you have defined your variables. e.g  ~/.profile is only loaded when running zsh in sh compatibility mode, otherwise it reads .zprofile, as well as .zshrc for interactive and .zlogin for login shells.\r\n\r\nEclipse might have problems with `env` vars on the user level.\r\nSee: [Eclipse and Bash](https://stackoverflow.com/a/7048245/1485527)\r\nSee: [Zsh invocation order](https://superuser.com/questions/457889/order-of-execution-and-purpose-of-profile-vs-zshrc)\r\n\r\n\r\n**Persist $PATH**\r\n\r\nThis is typically done by initializing the variable during logging via a config file on **user** or **system level**. For macos see https://stackoverflow.com/questions/22465332/setting-path-environment-variable-in-osx-permanently .\r\n\r\n**Logout and login again**\r\n\r\nAfter adding the variable to the system configuration you have to logout and login again to make its contents available through all sessions.\r\n\r\n**Verify user**\r\n\r\nIf the `$PATH` is persistent it should be the same in all console sessions. Print `System.getProperty(&quot;user.name&quot;);` to verify that the expected user is calling `java -jar`. [1]\r\n\r\n[1] [Howto print all environment vars and properties](https://stackoverflow.com/a/54781548/1485527)\r\n","title":"Eclipse not reading System.getenv() correctly - PATH missing elements","body":"<p>Coming from Linux. I would try:</p>\n<p><strong>Understanding environment variables</strong></p>\n<p>If you run java from your console it executes in the context of the current console session.</p>\n<ol>\n<li><p>If you change <code>$PATH</code> in your current session it doesn´t mean that the value is available system wide. e.g. when you start a different session (eclipse) the content of the variable can differ.</p>\n</li>\n<li><p>Different shells behave differently depending on where you have defined your variables. e.g  ~/.profile is only loaded when running zsh in sh compatibility mode, otherwise it reads .zprofile, as well as .zshrc for interactive and .zlogin for login shells.</p>\n</li>\n</ol>\n<p>Eclipse might have problems with <code>env</code> vars on the user level.\nSee: <a href=\"https://stackoverflow.com/a/7048245/1485527\">Eclipse and Bash</a>\nSee: <a href=\"https://superuser.com/questions/457889/order-of-execution-and-purpose-of-profile-vs-zshrc\">Zsh invocation order</a></p>\n<p><strong>Persist $PATH</strong></p>\n<p>This is typically done by initializing the variable during logging via a config file on <strong>user</strong> or <strong>system level</strong>. For macos see <a href=\"https://stackoverflow.com/questions/22465332/setting-path-environment-variable-in-osx-permanently\">Setting PATH environment variable in OSX permanently</a> .</p>\n<p><strong>Logout and login again</strong></p>\n<p>After adding the variable to the system configuration you have to logout and login again to make its contents available through all sessions.</p>\n<p><strong>Verify user</strong></p>\n<p>If the <code>$PATH</code> is persistent it should be the same in all console sessions. Print <code>System.getProperty(&quot;user.name&quot;);</code> to verify that the expected user is calling <code>java -jar</code>. [1]</p>\n<p>[1] <a href=\"https://stackoverflow.com/a/54781548/1485527\">Howto print all environment vars and properties</a></p>\n"}],"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691582200,"creation_date":1691574018,"question_id":76866453,"body_markdown":"If I run `echo $PATH`, I get:\r\n```\r\n/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin\r\n```\r\nAmongst others.\r\n\r\nIf I make a simple application that does the same:\r\n```\r\npublic class Test {\r\n    public static void main(final String[] args) {\r\n        System.out.println(System.getenv().get(&quot;PATH&quot;));\r\n    }\r\n}\r\n```\r\n\r\nWhen I run this from the console (`java -jar test.jar`):\r\n```\r\n/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin\r\n```\r\n\r\nAnd yet when I run that same application in Eclipse:\r\n```\r\n/usr/bin:/bin:/usr/sbin:/sbin\r\n```\r\n\r\nWhy isn&#39;t Eclipse picking up all the environment variables?","title":"Eclipse not reading System.getenv() correctly - PATH missing elements","body":"<p>If I run <code>echo $PATH</code>, I get:</p>\n<pre><code>/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin\n</code></pre>\n<p>Amongst others.</p>\n<p>If I make a simple application that does the same:</p>\n<pre><code>public class Test {\n    public static void main(final String[] args) {\n        System.out.println(System.getenv().get(&quot;PATH&quot;));\n    }\n}\n</code></pre>\n<p>When I run this from the console (<code>java -jar test.jar</code>):</p>\n<pre><code>/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin\n</code></pre>\n<p>And yet when I run that same application in Eclipse:</p>\n<pre><code>/usr/bin:/bin:/usr/sbin:/sbin\n</code></pre>\n<p>Why isn't Eclipse picking up all the environment variables?</p>\n"},{"tags":["java","asynchronous","trace","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":1976110,"reputation":10792,"user_id":1773866,"display_name":"Marcin Grzejszczak"},"score":0,"creation_date":1646815368,"post_id":71406380,"comment_id":126214706,"body_markdown":"Please provide any meaningful information like which version of sleuth, boot, cloud you&#39;re using? how are you making the call etc. Without this information there&#39;s no way to help you","body":"Please provide any meaningful information like which version of sleuth, boot, cloud you&#39;re using? how are you making the call etc. Without this information there&#39;s no way to help you"},{"owner":{"account_id":23161913,"reputation":67,"user_id":17262444,"display_name":"Fedor Nikolaev"},"score":0,"creation_date":1646815731,"post_id":71406380,"comment_id":126214838,"body_markdown":"boot version 2.5.6\nsleuth version is 3.0.5\nThe call provides by : CompletableFuture.runAsync(() -&gt; methodName())","body":"boot version 2.5.6 sleuth version is 3.0.5 The call provides by : CompletableFuture.runAsync(() -&gt; methodName())"},{"owner":{"account_id":23161913,"reputation":67,"user_id":17262444,"display_name":"Fedor Nikolaev"},"score":0,"creation_date":1646816772,"post_id":71406380,"comment_id":126215223,"body_markdown":"@MarcinGrzejszczak","body":"@MarcinGrzejszczak"}],"answers":[{"tags":[],"owner":{"account_id":12646638,"reputation":71,"user_id":9192148,"display_name":"snesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582102,"creation_date":1691582102,"answer_id":76867540,"question_id":71406380,"body_markdown":"You will have to enable this behavior by setting the value of `spring.sleuth.async.enabled` to `true`.","title":"Spring-cloud-sleuth async methods","body":"<p>You will have to enable this behavior by setting the value of <code>spring.sleuth.async.enabled</code> to <code>true</code>.</p>\n"}],"owner":{"account_id":23161913,"reputation":67,"user_id":17262444,"display_name":"Fedor Nikolaev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":810,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691582102,"creation_date":1646814702,"question_id":71406380,"body_markdown":"I have to add @Async annotation to method so Sleuth could generate span id and trace id. The problem is that it i need the same trace id as from the call side, but it is another.\r\n```\r\nmain log: INFO [label-service,**a3a1f1db46aecf7a**,**a3a1f1db46aecf7a**]\r\nasync log: INFO [label-service,**b819bd0e67ee86c4**,b819bd0e67ee86c4]\r\n```\r\nI need ids in ** to be the same.","title":"Spring-cloud-sleuth async methods","body":"<p>I have to add @Async annotation to method so Sleuth could generate span id and trace id. The problem is that it i need the same trace id as from the call side, but it is another.</p>\n<pre><code>main log: INFO [label-service,**a3a1f1db46aecf7a**,**a3a1f1db46aecf7a**]\nasync log: INFO [label-service,**b819bd0e67ee86c4**,b819bd0e67ee86c4]\n</code></pre>\n<p>I need ids in ** to be the same.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691586287,"post_id":76867491,"comment_id":135511437,"body_markdown":"You should tag your question with whatever mapping library you&#39;re using, and show the import statement for the annotation.","body":"You should tag your question with whatever mapping library you&#39;re using, and show the import statement for the annotation."}],"owner":{"account_id":1416016,"reputation":158,"user_id":7101236,"display_name":"kakemonsteret"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691581739,"creation_date":1691581739,"question_id":76867491,"body_markdown":"I&#39;m working with a piece of code that gives me a build failure (in IntelliJ). \r\nThere are no reds or other indications of errors, but it fails when I build the application.\r\n\r\nThe error:\r\n\r\n    java: Unmapped target property: &quot;removeLaneAreneItem&quot;. Mapping from property &quot;LaneBudsjett laneBudsjettAnnenBank&quot; to &quot;LaneBudsjettTO laneBudsjettAnnenBank&quot;.\r\n\r\nThe code:\r\n\r\n    @Mapping(target = &quot;removeLaneAreneItem&quot;, ignore = true)\r\n    LaneBudsjettTO laneBudsjett(no.husbanken.saksbehandling.simulering.domain.LaneBudsjett v1);\r\n\r\nAll I seem to be able to find about this is about warnings, not errors. Also, the mapping target and &quot;ignore=true I though would solve the problem.\r\n\r\nAny ideas?","title":"Java: Unmapped target property error (not warning)","body":"<p>I'm working with a piece of code that gives me a build failure (in IntelliJ).\nThere are no reds or other indications of errors, but it fails when I build the application.</p>\n<p>The error:</p>\n<pre><code>java: Unmapped target property: &quot;removeLaneAreneItem&quot;. Mapping from property &quot;LaneBudsjett laneBudsjettAnnenBank&quot; to &quot;LaneBudsjettTO laneBudsjettAnnenBank&quot;.\n</code></pre>\n<p>The code:</p>\n<pre><code>@Mapping(target = &quot;removeLaneAreneItem&quot;, ignore = true)\nLaneBudsjettTO laneBudsjett(no.husbanken.saksbehandling.simulering.domain.LaneBudsjett v1);\n</code></pre>\n<p>All I seem to be able to find about this is about warnings, not errors. Also, the mapping target and &quot;ignore=true I though would solve the problem.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","spring-boot","maven","graphql","graphiql"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677827,"post_id":76867464,"comment_id":135526359,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":25791289,"reputation":1,"user_id":19535325,"display_name":"Dmitry"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691581546,"creation_date":1691581546,"question_id":76867464,"body_markdown":"I&#39;m testing graphQL fucntional and have a problem: if I use libraries of com.graphql-java (graphql-spring-boot-starter, graphql-java-tools, graphiql-spring-boot-starter) Its work, but if I use GraphQL Java Kickstart (graphql-spring-boot-starter and so on) I catch 404 error.[GraphQL Java Kickstart](https://i.stack.imgur.com/ppEuG.png) [com.graphql-java](https://i.stack.imgur.com/CIQrK.png)\r\nIn both cases application is sucssesfully started\r\n\r\nMy pom:\r\n[pom](https://i.stack.imgur.com/2Dvyb.png) Use java 11, spring boot 2.5.0 and maven 3.8.0\r\nCommented dependency is my problem I think.Structure of .graphqls files and resolvers are working [file structure](https://i.stack.imgur.com/BhyR0.png) [resolver](https://i.stack.imgur.com/LlhR4.png) [service layer](https://i.stack.imgur.com/ge5z0.png)\r\nI have tried work with .properties file like [prop file](https://i.stack.imgur.com/dcBos.png)\r\nI need to connect GraphQL Java Kickstart because it has a lot of settings for graphql (work with exceprion handlers, dataLoader, pagination, depth of query and another problematic stuff, that has not at com.graphql-java)\r\nUsung not last versions because want to test move  to new versions\r\n","title":"App can&#39;t connect with graphql using graphql-java-kickstart","body":"<p>I'm testing graphQL fucntional and have a problem: if I use libraries of com.graphql-java (graphql-spring-boot-starter, graphql-java-tools, graphiql-spring-boot-starter) Its work, but if I use GraphQL Java Kickstart (graphql-spring-boot-starter and so on) I catch 404 error.<a href=\"https://i.stack.imgur.com/ppEuG.png\" rel=\"nofollow noreferrer\">GraphQL Java Kickstart</a> <a href=\"https://i.stack.imgur.com/CIQrK.png\" rel=\"nofollow noreferrer\">com.graphql-java</a>\nIn both cases application is sucssesfully started</p>\n<p>My pom:\n<a href=\"https://i.stack.imgur.com/2Dvyb.png\" rel=\"nofollow noreferrer\">pom</a> Use java 11, spring boot 2.5.0 and maven 3.8.0\nCommented dependency is my problem I think.Structure of .graphqls files and resolvers are working <a href=\"https://i.stack.imgur.com/BhyR0.png\" rel=\"nofollow noreferrer\">file structure</a> <a href=\"https://i.stack.imgur.com/LlhR4.png\" rel=\"nofollow noreferrer\">resolver</a> <a href=\"https://i.stack.imgur.com/ge5z0.png\" rel=\"nofollow noreferrer\">service layer</a>\nI have tried work with .properties file like <a href=\"https://i.stack.imgur.com/dcBos.png\" rel=\"nofollow noreferrer\">prop file</a>\nI need to connect GraphQL Java Kickstart because it has a lot of settings for graphql (work with exceprion handlers, dataLoader, pagination, depth of query and another problematic stuff, that has not at com.graphql-java)\nUsung not last versions because want to test move  to new versions</p>\n"},{"tags":["java","linux","websocket","permissions"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691538037,"post_id":76863680,"comment_id":135504464,"body_markdown":"*my problem is they all belong to root as it seems to be normal for lets encrypt.* Well they should belong to whomever is running the process to which the certs belong. And that should *not* be root for security reasons. If Apache, that would often be www-data on Debian systems","body":"<i>my problem is they all belong to root as it seems to be normal for lets encrypt.</i> Well they should belong to whomever is running the process to which the certs belong. And that should <i>not</i> be root for security reasons. If Apache, that would often be www-data on Debian systems"},{"owner":{"account_id":29187907,"reputation":1,"user_id":22360607,"display_name":"Treeda"},"score":0,"creation_date":1691539599,"post_id":76863680,"comment_id":135504588,"body_markdown":"they are used by multiple application, for example also by apache and it seems that apache is reading them as root during startup","body":"they are used by multiple application, for example also by apache and it seems that apache is reading them as root during startup"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691567086,"post_id":76863680,"comment_id":135507436,"body_markdown":"AFAIK Apache starts under root then continues as another user (www-data on Debian). In theory it&#39;s only the private key file you should have to worry about. I&#39;m not sure it needs to be owned by root but you could give it a group read permission","body":"AFAIK Apache starts under root then continues as another user (www-data on Debian). In theory it&#39;s only the private key file you should have to worry about. I&#39;m not sure it needs to be owned by root but you could give it a group read permission"}],"owner":{"account_id":29187907,"reputation":1,"user_id":22360607,"display_name":"Treeda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691581500,"creation_date":1691536599,"question_id":76863680,"body_markdown":"I am experimenting with a java service using vertx and websockets to create a chat server.\r\n\r\nEverything works fine except secure connections on the live machine.\r\n\r\nI have the certificate files from Let&#39;s Encrypt configured in a resource file, so far so good.\r\n\r\n```\r\n  &quot;certificate&quot;: {\r\n    &quot;chain&quot;: &quot;/home/letsencrypt/cert/live/x/chain.pem&quot;,\r\n    &quot;privkey&quot;: &quot;/home/letsencrypt/cert/live/x/privkey.pem&quot;,\r\n    &quot;cert&quot;: &quot;/home/letsencrypt/cert/live/x/cert.pem&quot;\r\n  }\r\n```\r\n\r\nMy problem is they all belong to root as it seems to be normal for Let&#39;s Encrypt. My java app is registered as a service and starts but I get an access denied error when I try to load the files.\r\n\r\nSo what would be the best practice or solution to solve that? Copying them to another location and lowering the access rights might not the best solution. \r\n\r\n\r\n\r\nI haven&#39;t tried anything else so far.","title":"Access root owned certificate files (Let&#39;s Encrypt) from java app running as service","body":"<p>I am experimenting with a java service using vertx and websockets to create a chat server.</p>\n<p>Everything works fine except secure connections on the live machine.</p>\n<p>I have the certificate files from Let's Encrypt configured in a resource file, so far so good.</p>\n<pre><code>  &quot;certificate&quot;: {\n    &quot;chain&quot;: &quot;/home/letsencrypt/cert/live/x/chain.pem&quot;,\n    &quot;privkey&quot;: &quot;/home/letsencrypt/cert/live/x/privkey.pem&quot;,\n    &quot;cert&quot;: &quot;/home/letsencrypt/cert/live/x/cert.pem&quot;\n  }\n</code></pre>\n<p>My problem is they all belong to root as it seems to be normal for Let's Encrypt. My java app is registered as a service and starts but I get an access denied error when I try to load the files.</p>\n<p>So what would be the best practice or solution to solve that? Copying them to another location and lowering the access rights might not the best solution.</p>\n<p>I haven't tried anything else so far.</p>\n"},{"tags":["java","swing","jtable","awt","defaulttablemodel"],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456235939,"creation_date":1456235939,"answer_id":35579547,"question_id":35579379,"body_markdown":"&gt; But I don&#39;t understand how the column classes are passed to the constructor after ...&quot;Fertig&quot;}) { as both needed arguments (data + column names) have already been passed over.\r\n\r\nThey aren&#39;t passed to the constructor but initialized in the anonymous class.\r\n\r\nThe code you posted at the end also looks somewhat odd and probably wouldn&#39;t quite work as intended.\r\n\r\nI&#39;d probably not extend `DefaultTableModel` since it might require a lot of methods to be overwritten anyways but instead extend `AbstractTableModel` and implement the missing methods along with those that need to be overwritten (shouldn&#39;t be many).\r\n\r\nThen I&#39;d probably pass an array (you could use vargs here) or collection of `ColumnDefinition` (or some other name) objects that contain the name and the class, e.g. something like this:\r\n\r\n    TableModel tm = new CustomTableModel( new ColumnDefinition(&quot;Lfd. Nr.&quot;, Integer.class), \r\n                                          new ColumnDefinition(&quot;FB Nr.&quot;, String.class), ...)\r\n\r\nThe constructor would look like this:\r\n\r\n    public CustomTableModel(ColumnDefinition... columns) { ... }","title":"Initialize &quot;empty&quot; DefaultTableModel with column names and column classes","body":"<blockquote>\n  <p>But I don't understand how the column classes are passed to the constructor after ...\"Fertig\"}) { as both needed arguments (data + column names) have already been passed over.</p>\n</blockquote>\n\n<p>They aren't passed to the constructor but initialized in the anonymous class.</p>\n\n<p>The code you posted at the end also looks somewhat odd and probably wouldn't quite work as intended.</p>\n\n<p>I'd probably not extend <code>DefaultTableModel</code> since it might require a lot of methods to be overwritten anyways but instead extend <code>AbstractTableModel</code> and implement the missing methods along with those that need to be overwritten (shouldn't be many).</p>\n\n<p>Then I'd probably pass an array (you could use vargs here) or collection of <code>ColumnDefinition</code> (or some other name) objects that contain the name and the class, e.g. something like this:</p>\n\n<pre><code>TableModel tm = new CustomTableModel( new ColumnDefinition(\"Lfd. Nr.\", Integer.class), \n                                      new ColumnDefinition(\"FB Nr.\", String.class), ...)\n</code></pre>\n\n<p>The constructor would look like this:</p>\n\n<pre><code>public CustomTableModel(ColumnDefinition... columns) { ... }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691581236,"creation_date":1456265642,"answer_id":35589319,"question_id":35579379,"body_markdown":"If you take a look at [`TableModel`](https://docs.oracle.com/javase/8/docs/api/javax/swing/table/TableModel.html), it has two methods, `getColumnName` and `getColumnClass`, now, you&#39;ve overrriden `getColumnClass`, which is fine, but internally to `DefaultTableModel`, it uses the column names you supplied to the constructor and returns them when `getColumnName` get&#39;s called.\r\n\r\nThis array also defines the return value for `getColumnCount`.\r\n\r\nSo, when `JTable#setModel` is called, one of things it will do (by default) is call it&#39;s `createDefaultColumnsFromModel` method, this then uses the `TableModel` to build it&#39;s `TableColumnModel`, using the `TableModel#getColumnName` method to provide the `TableColumn`&#39;s `headerValue` property.\r\n\r\nMagic!","title":"Initialize &quot;empty&quot; DefaultTableModel with column names and column classes","body":"<p>If you take a look at <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/table/TableModel.html\" rel=\"nofollow noreferrer\"><code>TableModel</code></a>, it has two methods, <code>getColumnName</code> and <code>getColumnClass</code>, now, you've overrriden <code>getColumnClass</code>, which is fine, but internally to <code>DefaultTableModel</code>, it uses the column names you supplied to the constructor and returns them when <code>getColumnName</code> get's called.</p>\n<p>This array also defines the return value for <code>getColumnCount</code>.</p>\n<p>So, when <code>JTable#setModel</code> is called, one of things it will do (by default) is call it's <code>createDefaultColumnsFromModel</code> method, this then uses the <code>TableModel</code> to build it's <code>TableColumnModel</code>, using the <code>TableModel#getColumnName</code> method to provide the <code>TableColumn</code>'s <code>headerValue</code> property.</p>\n<p>Magic!</p>\n"}],"owner":{"account_id":3595933,"reputation":1375,"user_id":3157033,"accept_rate":33,"display_name":"Flatron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1249,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691581236,"creation_date":1456235472,"question_id":35579379,"body_markdown":"I created my own class called `CustomTableModel` which extends from DefaultTableModel. \r\n\r\n    public class CustomTableModel extends DefaultTableModel {/*[...]*/}\r\n\r\nMy plan is that when you call my constructor with `new CustomTableModel();` you get a new `CustomTableModel` pre initialized with column names and column classes.\r\n\r\nI got something like this running but the current implementation was something that once came out of the Eclipse AWT (Window Builder) where you can also use a GUI to setup your TableModel. The current implementation looks like this:\r\n\r\n    public static DefaultTableModel createEmptyModel() {\r\n            model = new DefaultTableModel(new Object[][]{},\r\n                    new String[]{&quot;Lfd. Nr.&quot;, &quot;FB Nr.&quot;, &quot;Auftr. / Meld. Nr.&quot;, &quot;Betra Nr.&quot;, &quot;Datum&quot;, &quot;Bahnhof&quot;, &quot;Str. Km.&quot;,\r\n                            &quot;Sprz.&quot;, &quot;Arb. Zeit&quot;, &quot;Mitarbeiter&quot;, &quot;Auftrag / Objekt(e)&quot;, &quot;Anmerkungen&quot;, &quot;Fertig&quot;}) {\r\n    \r\n                @SuppressWarnings(&quot;rawtypes&quot;)\r\n                Class[] columnTypes = new Class[]{Integer.class, String.class, String.class, String.class, String.class,\r\n                        String.class, String.class, String.class, String.class, String.class, String.class, String.class, Boolean.class};\r\n    \r\n                @SuppressWarnings({&quot;unchecked&quot;, &quot;rawtypes&quot;})\r\n                public Class getColumnClass(int columnIndex) {\r\n                    return columnTypes[columnIndex];\r\n                }\r\n            };\r\n            return model;\r\n        }\r\n\r\nAs it might work it is not really a `CustomTableModel` at all, it&#39;s simply a `DefaultTableModel` created from within a method and returned + completely obfuscated (to me at least :) ).\r\n\r\nWhile it works I am not sure how it exactly works, to my understanding it passes an empty array of objects (2D) as well as a String array to the constructor of the DefaultTableModel, which so far is understandable (Empty data + Column names) as required from the constructor of the DefaultTableModel. **But** I don&#39;t understand how the column classes are passed to the constructor after `...&quot;Fertig&quot;}) {` as both needed arguments (data + column names) have already been passed over.\r\n\r\nMy best guess was this approach:\r\n\r\n       public CustomTableModel() {\r\n            super(new Object[][]{{},{Integer.class, String.class, String.class, String.class, String.class,\r\n                    String.class, String.class, String.class, String.class, String.class, String.class, String.class, Boolean.class}}, new String[]{&quot;Lfd. Nr.&quot;, &quot;FB Nr.&quot;, &quot;Auftr. / Meld. Nr.&quot;, &quot;Betra Nr.&quot;, &quot;Datum&quot;, &quot;Bahnhof&quot;, &quot;Str. Km.&quot;,\r\n                    &quot;Sprz.&quot;, &quot;Arb. Zeit&quot;, &quot;Mitarbeiter&quot;, &quot;Auftrag / Objekt(e)&quot;, &quot;Anmerkungen&quot;, &quot;Fertig&quot;});\r\n        }\r\n\r\nUnfortunately this ends in a mess like this:\r\n[![Wrong outcome, Classes are not passed over right][1]][1]\r\n\r\nFrom this I assume that my pass of the classes is completely wrong. \r\n\r\nWhat I expect to get is this (after adding rows):\r\n[![Result with &quot;old&quot; implementation from Eclipse AWT][2]][2]\r\n\r\nIf someone could enlighten me on how to do this I would be really happy, I want to understand this.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/tt5W6.png\r\n  [2]: http://i.stack.imgur.com/uxBmc.png","title":"Initialize &quot;empty&quot; DefaultTableModel with column names and column classes","body":"<p>I created my own class called <code>CustomTableModel</code> which extends from DefaultTableModel. </p>\n\n<pre><code>public class CustomTableModel extends DefaultTableModel {/*[...]*/}\n</code></pre>\n\n<p>My plan is that when you call my constructor with <code>new CustomTableModel();</code> you get a new <code>CustomTableModel</code> pre initialized with column names and column classes.</p>\n\n<p>I got something like this running but the current implementation was something that once came out of the Eclipse AWT (Window Builder) where you can also use a GUI to setup your TableModel. The current implementation looks like this:</p>\n\n<pre><code>public static DefaultTableModel createEmptyModel() {\n        model = new DefaultTableModel(new Object[][]{},\n                new String[]{\"Lfd. Nr.\", \"FB Nr.\", \"Auftr. / Meld. Nr.\", \"Betra Nr.\", \"Datum\", \"Bahnhof\", \"Str. Km.\",\n                        \"Sprz.\", \"Arb. Zeit\", \"Mitarbeiter\", \"Auftrag / Objekt(e)\", \"Anmerkungen\", \"Fertig\"}) {\n\n            @SuppressWarnings(\"rawtypes\")\n            Class[] columnTypes = new Class[]{Integer.class, String.class, String.class, String.class, String.class,\n                    String.class, String.class, String.class, String.class, String.class, String.class, String.class, Boolean.class};\n\n            @SuppressWarnings({\"unchecked\", \"rawtypes\"})\n            public Class getColumnClass(int columnIndex) {\n                return columnTypes[columnIndex];\n            }\n        };\n        return model;\n    }\n</code></pre>\n\n<p>As it might work it is not really a <code>CustomTableModel</code> at all, it's simply a <code>DefaultTableModel</code> created from within a method and returned + completely obfuscated (to me at least :) ).</p>\n\n<p>While it works I am not sure how it exactly works, to my understanding it passes an empty array of objects (2D) as well as a String array to the constructor of the DefaultTableModel, which so far is understandable (Empty data + Column names) as required from the constructor of the DefaultTableModel. <strong>But</strong> I don't understand how the column classes are passed to the constructor after <code>...\"Fertig\"}) {</code> as both needed arguments (data + column names) have already been passed over.</p>\n\n<p>My best guess was this approach:</p>\n\n<pre><code>   public CustomTableModel() {\n        super(new Object[][]{{},{Integer.class, String.class, String.class, String.class, String.class,\n                String.class, String.class, String.class, String.class, String.class, String.class, String.class, Boolean.class}}, new String[]{\"Lfd. Nr.\", \"FB Nr.\", \"Auftr. / Meld. Nr.\", \"Betra Nr.\", \"Datum\", \"Bahnhof\", \"Str. Km.\",\n                \"Sprz.\", \"Arb. Zeit\", \"Mitarbeiter\", \"Auftrag / Objekt(e)\", \"Anmerkungen\", \"Fertig\"});\n    }\n</code></pre>\n\n<p>Unfortunately this ends in a mess like this:\n<a href=\"https://i.stack.imgur.com/tt5W6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tt5W6.png\" alt=\"Wrong outcome, Classes are not passed over right\"></a></p>\n\n<p>From this I assume that my pass of the classes is completely wrong. </p>\n\n<p>What I expect to get is this (after adding rows):\n<a href=\"https://i.stack.imgur.com/uxBmc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uxBmc.png\" alt=\"Result with &quot;old&quot; implementation from Eclipse AWT\"></a></p>\n\n<p>If someone could enlighten me on how to do this I would be really happy, I want to understand this.</p>\n"},{"tags":["java","android","kotlin","android-debug"],"comments":[{"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"score":0,"creation_date":1691584640,"post_id":76867190,"comment_id":135511068,"body_markdown":"Can you provide errors from the logcat ? Going to answer asa I see the logcat","body":"Can you provide errors from the logcat ? Going to answer asa I see the logcat"}],"answers":[{"tags":[],"owner":{"account_id":459638,"reputation":6041,"user_id":860212,"display_name":"karllindmark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691580633,"creation_date":1691580633,"answer_id":76867347,"question_id":76867190,"body_markdown":"Without the stacktrace or additional code, we can only really do guesses as to what the root cause it.\r\n\r\nWith that said, my guess would be that `drawRouteOnMap()` is being called (via `onMapReady(...)`) before your call to `routeService.getRoutes(origin, destination, apiKey)` completes successfully.","title":"UninitializedPropertyAccessException:","body":"<p>Without the stacktrace or additional code, we can only really do guesses as to what the root cause it.</p>\n<p>With that said, my guess would be that <code>drawRouteOnMap()</code> is being called (via <code>onMapReady(...)</code>) before your call to <code>routeService.getRoutes(origin, destination, apiKey)</code> completes successfully.</p>\n"}],"owner":{"account_id":24748451,"reputation":9,"user_id":18634316,"display_name":"Kossy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691580633,"creation_date":1691579379,"question_id":76867190,"body_markdown":"I&#39;m working on Android development using Kotlin, and encountering an issue with a lateinit var named polyline. The error I&#39;m getting suggests that even though I assigned a value to polyline inside a function called from the onCreate, the app is still crashing with the message that polyline has not been initialized.\r\n\r\nPls how do I go about this?\r\nIs there something I&#39;m missing?\r\n\r\nSee the code below. I removed all unneccessary codes for this question\r\n\r\n\r\n\r\n\r\n    class CustomerMapActivity : AppCompatActivity(), OnMapReadyCallback {\r\n    \r\n        private lateinit var polyline: String\r\n    \r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            binding = ActivityCustomerMapBinding.inflate(layoutInflater)\r\n            setContentView(binding.root)\r\n    \r\n            val pickUpLocation = &quot;Hall 2 Car Park, Benin City, Nigeria&quot;\r\n            val dropOffLocation = &quot;Nadia Bakery, Benin City, Nigeria&quot;\r\n            val apiKey = R.string.google_api_key.toString()\r\n    \r\n            routesDetails(pickUpLocation, dropOffLocation, apiKey)\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n        override fun onMapReady(mMap: GoogleMap) {\r\n            \r\n            drawRouteOnMap()\r\n\r\n        }\r\n    \r\n    \r\n        private fun routesDetails(origin: String, destination: String, apiKey: String){\r\n    \r\n            val routeService = ServiceBuilder.buildService(RouteService::class.java)\r\n    \r\n            val requestCall = routeService.getRoutes(origin, destination, apiKey)\r\n            requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\r\n                override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\r\n    \r\n                    if (response.isSuccessful) {\r\n    \r\n                        if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\r\n    \r\n    \r\n                            polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\r\n    \r\n                        }else{\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                override fun onFailure(call: Call&lt;RoutesResponse&gt;, t: Throwable) {\r\n    \r\n                }\r\n    \r\n            })\r\n        }\r\n    \r\n    \r\n    \r\n        private fun drawRouteOnMap() {\r\n            val decodedPolyline = PolyUtil.decode(polyline)\r\n            \r\n        }\r\n\r\n\r\n\r\n","title":"UninitializedPropertyAccessException:","body":"<p>I'm working on Android development using Kotlin, and encountering an issue with a lateinit var named polyline. The error I'm getting suggests that even though I assigned a value to polyline inside a function called from the onCreate, the app is still crashing with the message that polyline has not been initialized.</p>\n<p>Pls how do I go about this?\nIs there something I'm missing?</p>\n<p>See the code below. I removed all unneccessary codes for this question</p>\n<pre><code>class CustomerMapActivity : AppCompatActivity(), OnMapReadyCallback {\n\n    private lateinit var polyline: String\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        binding = ActivityCustomerMapBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        val pickUpLocation = &quot;Hall 2 Car Park, Benin City, Nigeria&quot;\n        val dropOffLocation = &quot;Nadia Bakery, Benin City, Nigeria&quot;\n        val apiKey = R.string.google_api_key.toString()\n\n        routesDetails(pickUpLocation, dropOffLocation, apiKey)\n\n\n    }\n\n\n    override fun onMapReady(mMap: GoogleMap) {\n        \n        drawRouteOnMap()\n\n    }\n\n\n    private fun routesDetails(origin: String, destination: String, apiKey: String){\n\n        val routeService = ServiceBuilder.buildService(RouteService::class.java)\n\n        val requestCall = routeService.getRoutes(origin, destination, apiKey)\n        requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\n            override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\n\n                if (response.isSuccessful) {\n\n                    if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\n\n\n                        polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\n\n                    }else{\n                    }\n                }\n            }\n\n            override fun onFailure(call: Call&lt;RoutesResponse&gt;, t: Throwable) {\n\n            }\n\n        })\n    }\n\n\n\n    private fun drawRouteOnMap() {\n        val decodedPolyline = PolyUtil.decode(polyline)\n        \n    }\n</code></pre>\n"},{"tags":["java","swt","eclipse-rcp","rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691578421,"post_id":76866638,"comment_id":135509744,"body_markdown":"The BindingService should have been put in the context by `org.eclipse.ui.internal.BindingToModelProcessor` started from the `org.eclipse.ui.workbench` `plugin.xml`","body":"The BindingService should have been put in the context by <code>org.eclipse.ui.internal.BindingToModelProcessor</code> started from the <code>org.eclipse.ui.workbench</code> <code>plugin.xml</code>"},{"owner":{"account_id":101533,"reputation":349,"user_id":273096,"accept_rate":48,"display_name":"dasPing"},"score":0,"creation_date":1691580480,"post_id":76866638,"comment_id":135510166,"body_markdown":"In my case none of the public methods in BindingToModelProcessor are called before  PlatformUI.createAndRunWorkbench(display, advisor) is called, can I provoke BindingToModelProcessor to execute before thw workbench is created? Is there a way of making the BindingManager of the BindingService optional?","body":"In my case none of the public methods in BindingToModelProcessor are called before  PlatformUI.createAndRunWorkbench(display, advisor) is called, can I provoke BindingToModelProcessor to execute before thw workbench is created? Is there a way of making the BindingManager of the BindingService optional?"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691580760,"post_id":76866638,"comment_id":135510210,"body_markdown":"No, it has to be run. There is something wrong with your setup.","body":"No, it has to be run. There is something wrong with your setup."},{"owner":{"account_id":101533,"reputation":349,"user_id":273096,"accept_rate":48,"display_name":"dasPing"},"score":0,"creation_date":1691660653,"post_id":76866638,"comment_id":135522691,"body_markdown":"Interesting, I experimented with the launcher and switched from &quot;run a product&quot; to &quot;run an application&quot; and now BindingToModelProcessor is called early on and the application starts, very odd, any ideas why this helps?","body":"Interesting, I experimented with the launcher and switched from &quot;run a product&quot; to &quot;run an application&quot; and now BindingToModelProcessor is called early on and the application starts, very odd, any ideas why this helps?"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1691661028,"post_id":76866638,"comment_id":135522756,"body_markdown":"Your `org.eclipse.core.runtime.products` definition is probably wrong.","body":"Your <code>org.eclipse.core.runtime.products</code> definition is probably wrong."},{"owner":{"account_id":101533,"reputation":349,"user_id":273096,"accept_rate":48,"display_name":"dasPing"},"score":0,"creation_date":1691667609,"post_id":76866638,"comment_id":135523934,"body_markdown":"The only thing in there that could be funky is my bespoke modelResourceHandler, which is loading user profiles. I take it out and I can start up as a product. However, I need my ProfileResourceHandler and it isn&#39;t throwing exceptions. I wonder what eclipse doesn&#39;t like about it.","body":"The only thing in there that could be funky is my bespoke modelResourceHandler, which is loading user profiles. I take it out and I can start up as a product. However, I need my ProfileResourceHandler and it isn&#39;t throwing exceptions. I wonder what eclipse doesn&#39;t like about it."}],"owner":{"account_id":101533,"reputation":349,"user_id":273096,"accept_rate":48,"display_name":"dasPing"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691580608,"creation_date":1691575319,"question_id":76866638,"body_markdown":"After updating client target from 4.17 to 4.24 I am getting an exception in the Workbench on line 2247. This is happening after calling  PlatformUI.createAndRunWorkbench(display, advisor);\r\n\r\n```\r\n\t\tStartupThreading.runWithoutExceptions(new StartupRunnable() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void runWithException() {\r\n\t\t\t\tBindingManager.DEBUG = Policy.DEBUG_KEY_BINDINGS;\r\n\t\t\t\tbindingManager = e4Context.get(BindingManager.class);\r\n\t\t\t\tbindingService[0] = ContextInjectionFactory.make(BindingService.class, e4Context); // Throws an exception\r\n\t\t\t}\r\n\t\t});\r\n```\r\nThe error I get is &#39;org.eclipse.e4.core.di.InjectionException: Unable to process &quot;BindingService.manager&quot;: no actual value was found for the argument &quot;BindingManager&quot;&#39; and the application cannot start.\r\n\r\nThere was a similiar problem here: https://bugs.eclipse.org/bugs/show_bug.cgi?id=400265 and making the BindingManager optional was a solution, I wonder if I could make it optional in BindinService somehow.\r\n\r\nIs there any way to force the BindingManager to be loaded and/or set so the application starts?\r\n","title":"After updating RCP client target from 4.17 to 4.24 the BindingService manager can&#39;t be initialized","body":"<p>After updating client target from 4.17 to 4.24 I am getting an exception in the Workbench on line 2247. This is happening after calling  PlatformUI.createAndRunWorkbench(display, advisor);</p>\n<pre><code>        StartupThreading.runWithoutExceptions(new StartupRunnable() {\n\n            @Override\n            public void runWithException() {\n                BindingManager.DEBUG = Policy.DEBUG_KEY_BINDINGS;\n                bindingManager = e4Context.get(BindingManager.class);\n                bindingService[0] = ContextInjectionFactory.make(BindingService.class, e4Context); // Throws an exception\n            }\n        });\n</code></pre>\n<p>The error I get is 'org.eclipse.e4.core.di.InjectionException: Unable to process &quot;BindingService.manager&quot;: no actual value was found for the argument &quot;BindingManager&quot;' and the application cannot start.</p>\n<p>There was a similiar problem here: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=400265\" rel=\"nofollow noreferrer\">https://bugs.eclipse.org/bugs/show_bug.cgi?id=400265</a> and making the BindingManager optional was a solution, I wonder if I could make it optional in BindinService somehow.</p>\n<p>Is there any way to force the BindingManager to be loaded and/or set so the application starts?</p>\n"},{"tags":["java","android","kotlin","build.gradle","kapt"],"comments":[{"owner":{"account_id":3223013,"reputation":185,"user_id":4484997,"display_name":"Adjwilley"},"score":0,"creation_date":1684701531,"post_id":76294240,"comment_id":134551621,"body_markdown":"I can&#39;t help yet as I&#39;m in the same boat. I&#39;m running Android Studio Flamingo with gradle 8.0 and my understanding is that I&#39;m supposed to use JDK 17.","body":"I can&#39;t help yet as I&#39;m in the same boat. I&#39;m running Android Studio Flamingo with gradle 8.0 and my understanding is that I&#39;m supposed to use JDK 17."},{"owner":{"account_id":3223013,"reputation":185,"user_id":4484997,"display_name":"Adjwilley"},"score":0,"creation_date":1685299580,"post_id":76294240,"comment_id":134639052,"body_markdown":"Are you on Windows? Running Android Studio &quot;as an administrator&quot; fixed the problem for me.","body":"Are you on Windows? Running Android Studio &quot;as an administrator&quot; fixed the problem for me."}],"owner":{"account_id":22554625,"reputation":21,"user_id":16743226,"display_name":"Katoari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691580109,"creation_date":1684571726,"question_id":76294240,"body_markdown":"I&#39;m trying to run and build my project and I keep having this error. \r\n\r\n## Build Output\r\n``` &gt; Task :app:kaptMyAppQaKotlin FAILED Execution failed for task &#39;:app:kaptMyAppQaKotlin&#39;. &gt; A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction &gt; java.lang.reflect.InvocationTargetException (no error message) ```\r\n\r\n## Using (./gradlew assemble --stacktrace --warning-mode all)\r\n&gt; Task :app:kaptMyAppDebugKotlin\r\n&gt; /Users/MyUser/Documents/Projects/Kotlin/MyApp-android/MyApp/app/build/tmp/kapt3/stubs/MyAppDebug/com/MyApp/charts/ChartActivity.java:193: error: incompatible types: NonExistentClass cannot be converted to Annotation\r\n&gt; private final void showChartError(@error.NonExistentClass\r\n&gt; ^\r\n\r\n&gt; Task :app:kaptMyAppDebugKotlin FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\n  Execution failed for task &#39;:app:kaptMyAppDebugKotlin&#39;.\r\n\r\n&gt; A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction\r\n&gt; java.lang.reflect.InvocationTargetException (no error message)\r\n\r\nHere&#39;s my ff files.\r\n# build.gradle (MyApp)\r\n\r\n```\r\nTop-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.7.10&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.2.2&#39;\r\n        classpath &#39;me.tatarka:gradle-retrolambda:3.3.1&#39;\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven { url &#39;https://oss.sonatype.org/content/repositories/snapshots&#39; }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n\r\n# build.gradle (:app)\r\n\r\n```\r\nimport java.util.regex.Matcher\r\nimport java.util.regex.Pattern\r\n\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply plugin: &#39;com.google.gms.google-services&#39;\r\napply plugin: &#39;kotlin-parcelize&#39;\r\napply plugin: &#39;kotlin-kapt&#39;\r\n\r\ntask aaaprintVar {\r\n    doLast {\r\n        println System.getenv(&#39;HOME&#39;)\r\n        println System.getenv(&#39;ANDROID_KEY_ALIAS&#39;)\r\n        println project.property(&quot;BUILD_NUMBER_TAG&quot;)\r\n    }\r\n}\r\n\r\n/* AutoVersion Helpers */\r\ndef autoVersion_props = new Properties()\r\ndef folder = new File(&quot;$project.rootDir/scripts&quot;)\r\nif (!folder.exists()) {\r\n    // Create all folders up-to and including B\r\n    folder.mkdirs()\r\n}\r\nnew File(folder, &quot;autoVersion.properties&quot;).withWriterAppend { w -&gt;\r\n    w &lt;&lt; &quot;&quot;\r\n}\r\n\r\ndef autoPropsFile = new File(folder, &quot;autoVersion.properties&quot;)\r\nautoPropsFile.withInputStream { autoVersion_props.load(it) }\r\n\r\ndef readVersionCode = { -&gt;\r\n    def versionCodeString = autoVersion_props.getProperty(&quot;gitCommitCount&quot;) ?: &quot;0&quot;\r\n    return Integer.parseInt(versionCodeString)\r\n}\r\n/* End AutoVersion Helpers */\r\n\r\nandroid {\r\n    def readVersionName = { -&gt;\r\n        def versionName = autoVersion_props.getProperty(&quot;gitVersionTagNumber&quot;) ?: &quot;0.0.0&quot;\r\n        return versionName\r\n    }\r\n\r\n    def getApplicationIdSuffix = { -&gt;\r\n        return readVersionName() + &#39;-&#39; + readVersionCode() + &#39;+&#39; + gitShortHash()\r\n    }\r\n\r\n    def getMyApplicationIdSuffix = { -&gt;\r\n        println(&quot;getMyApplicationIddSuffix&quot;)\r\n        return readVersionName() + &#39;-&#39; + readVersionCode() + &#39;+&#39; + gitShortHash()\r\n    }\r\n\r\n    def gitPrefix = &#39;asdf&#39;\r\n    // ...\r\n    ndkVersion &quot;21.4.7075529&quot; // or &quot;22.1.7171670&quot;\r\n    // ...\r\n    compileSdkVersion 31\r\n    buildToolsVersion &#39;31.0.0&#39;\r\n    defaultConfig {\r\n        applicationId &quot;com&quot;\r\n        minSdkVersion 26\r\n        targetSdkVersion 31\r\n        buildConfigField &quot;String&quot;, &quot;GIT_COMMIT_HASH&quot;, &quot;\\&quot;&quot; + gitCommitHash() + &quot;\\&quot;&quot;\r\n        println &quot;VersionCode: &quot; + readVersionCode()\r\n        versionCode readVersionCode()\r\n        javaCompileOptions {\r\n            annotationProcessorOptions {\r\n                arguments = [&quot;room.schemaLocation&quot;:\r\n                                     &quot;$projectDir/schemas&quot;.toString()]\r\n            }\r\n        }\r\n        testInstrumentationRunner &#39;androidx.test.runner.AndroidJUnitRunner&#39;\r\n    }\r\n    buildFeatures {\r\n        viewBinding = true\r\n        dataBinding = true\r\n    }\r\n    packagingOptions {\r\n        exclude(&quot;**/libshinobicharts-android.so&quot;)\r\n    }\r\n    flavorDimensions &quot;base&quot;\r\n    productFlavors {\r\n        myapp {\r\n            dimension &quot;base&quot;\r\n            applicationId &#39;com.me.app&#39;\r\n            versionName readVersionName()\r\n            setProperty(&quot;archivesBaseName&quot;, getMyApplicationIdSuffix())\r\n            buildConfigField(&#39;String&#39;, &#39;HOCKEYAPP_SDK_APP_ID&#39;, &quot;\\&quot;750acaf49a6a418abdc3d8e36e1d1b83\\&quot;&quot;)\r\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;750acaf49a6a418abdc3d8e36e1d1b83&quot;]\r\n        }\r\n        myappinstant {\r\n            dimension &quot;base&quot;\r\n            applicationId &#39;com.myapp.instant&#39;\r\n            versionName = readVersionName()\r\n            setProperty(&quot;archivesBaseName&quot;, getMyInstantApplicationIdSuffix())\r\n            buildConfigField(&#39;String&#39;, &#39;HOCKEYAPP_SDK_APP_ID&#39;, &quot;\\&quot;8ee7b2f987d9402c86c0c96dfff52306\\&quot;&quot;)\r\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;8ee7b2f987d9402c86c0c96dfff52306&quot;]\r\n        }\r\n    }\r\n\r\n    def getCurrentFlavor = {\r\n        Gradle gradle = getGradle()\r\n        String tskReqStr = gradle.getStartParameter().getTaskRequests().toString()\r\n\r\n        Pattern pattern\r\n\r\n        if (tskReqStr.contains(&quot;assemble&quot;))\r\n            pattern = Pattern.compile(&quot;assemble(\\\\w+)(Release|Debug)&quot;)\r\n        else\r\n            pattern = Pattern.compile(&quot;generate(\\\\w+)(Release|Debug)&quot;)\r\n\r\n        Matcher matcher = pattern.matcher(tskReqStr)\r\n\r\n        if (matcher.find())\r\n            return matcher.group(1).toLowerCase() + &#39;-&#39;\r\n        else {\r\n            println &quot;NO MATCH FOUND&quot;\r\n            return &quot;&quot;\r\n        }\r\n    }\r\n\r\n    def runAutoVersion = { -&gt;\r\n        try {\r\n            def stdout = new ByteArrayOutputStream()\r\n            exec {\r\n                if (System.getProperty(&#39;os.name&#39;).toLowerCase().contains(&#39;windows&#39;)) {\r\n                    commandLine &#39;cmd&#39;, &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\r\n                } else {\r\n                    commandLine &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\r\n                }\r\n                args = [getCurrentFlavor()]\r\n                standardOutput = stdout\r\n            }\r\n            return stdout.toString().trim()\r\n        }\r\n        catch (error) {\r\n            println &#39;Error: &#39; + error\r\n            return null\r\n        }\r\n    }\r\n\r\n\r\n    preBuild.doFirst {\r\n        println &quot;PreBuild&quot;\r\n        println &quot;Running auto-version.sh&quot;\r\n        println runAutoVersion()\r\n        project.task(&quot;printProps&quot;)\r\n    }\r\n\r\n    task autoVersion {\r\n        doLast {\r\n            println &quot;PreBuild&quot;\r\n            println &quot;Running auto-version.sh&quot;\r\n            println runAutoVersion()\r\n            println &quot;Finished running auto-version.sh&quot;\r\n            project.task(&quot;printProps&quot;)\r\n        }\r\n    }\r\n\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n\r\n\r\n    def code_sign_props = new Properties()\r\n    def code_sign_file = new File(&quot;$rootProject.projectDir/secrets/code_sign.properties&quot;)\r\n    def codeSignFile = code_sign_file.exists() ? code_sign_file : file(&quot;$rootProject.projectDir/secrets/default_code_sign.properties&quot;)\r\n    println(&quot;CodeSignFile: &quot; + codeSignFile)\r\n    codeSignFile.withInputStream { code_sign_props.load(it) }\r\n    def keystoreFile = new File(&quot;$rootProject.projectDir/secrets/upload.jks&quot;)\r\n    def releaseKeyStoreFile = keystoreFile.exists() ? keystoreFile : file(&quot;$rootProject.projectDir/../ProjectSetup/qa.keystore&quot;)\r\n    println(&quot;releaseKeyStoreFile: &quot; + releaseKeyStoreFile)\r\n    signingConfigs {\r\n        debug {\r\n            storeFile releaseKeyStoreFile\r\n            storePassword &#39;android&#39;\r\n            keyAlias &#39;androiddebugkey&#39;\r\n            keyPassword &#39;android&#39;\r\n        }\r\n        qa {\r\n            storeFile releaseKeyStoreFile\r\n            storePassword &#39;android&#39;\r\n            keyAlias &#39;androiddebugkey&#39;\r\n            keyPassword &#39;android&#39;\r\n        }\r\n        release {\r\n            storeFile releaseKeyStoreFile\r\n            storePassword code_sign_props.getProperty(&quot;ANDROID_KEY_STORE_PASSWORD&quot;) ?: &#39;android&#39;\r\n            keyAlias code_sign_props.getProperty(&quot;ANDROID_KEY_ALIAS&quot;) ?: &#39;androiddebugkey&#39;\r\n            keyPassword code_sign_props.getProperty(&quot;ANDROID_KEY_PASSWORD&quot;) ?: &#39;android&#39;\r\n        }\r\n    }\r\n\r\n    buildTypes {\r\n        debug {\r\n            minifyEnabled false\r\n            signingConfig signingConfigs.debug\r\n            debuggable true\r\n\r\n        }\r\n        qa {\r\n            minifyEnabled false\r\n            signingConfig signingConfigs.qa\r\n            debuggable true\r\n\r\n        }\r\n        release {\r\n            buildConfigField &quot;Boolean&quot;, &quot;RELEASE_TYPE&quot;, &quot;true&quot;\r\n            buildConfigField &quot;Boolean&quot;, &quot;ENABLE_DEVICE_ID_CHANGE&quot;, &quot;false&quot;\r\n\r\n            debuggable false\r\n            minifyEnabled false\r\n            //proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n\r\n            signingConfig signingConfigs.release\r\n        }\r\n\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    testOptions {\r\n        unitTests.returnDefaultValues = true\r\n    }\r\n\r\n}\r\n\r\ndef gitBranch() {\r\n    def branch = &quot;&quot;\r\n    def proc = &quot;git rev-parse --abbrev-ref HEAD&quot;.execute()\r\n    proc.in.eachLine { line -&gt; branch = line }\r\n    proc.err.eachLine { line -&gt; println line }\r\n    proc.waitFor()\r\n    branch\r\n}\r\n\r\ndef gitShortHash() {\r\n    def hash = &quot;&quot;\r\n    def proc = &quot;git rev-parse --short HEAD&quot;.execute()\r\n    proc.in.eachLine { line -&gt; hash = line }\r\n    proc.err.eachLine { line -&gt; println line }\r\n    proc.waitFor()\r\n    hash\r\n}\r\n\r\ndef gitCommitHash() {\r\n    def hash = &quot;&quot;\r\n    def proc = &quot;git rev-parse HEAD&quot;.execute()\r\n    proc.in.eachLine { line -&gt; hash = line }\r\n    proc.err.eachLine { line -&gt; println line }\r\n    proc.waitFor()\r\n    hash\r\n}\r\n\r\ndependencies {\r\n    def butterknife_version = &quot;10.2.3&quot;\r\n    def retrofit_version = &quot;2.3.0&quot;\r\n    def okhttp_version = &quot;3.9.0&quot;\r\n    def dagger_version = &quot;2.38.1&quot;\r\n    def hockeyapp_android_sdk_version = &quot;4.1.4&quot;\r\n    def socket_library_version = &quot;2.3&quot;\r\n\r\n    implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.0&#39;\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.3.0-alpha02&#39;\r\n    implementation &#39;com.google.android.material:material:1.5.0&#39;\r\n    implementation &#39;androidx.browser:browser:1.0.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.2.0-alpha04&#39;\r\n    implementation &quot;com.jakewharton:butterknife:$butterknife_version&quot;\r\n    kapt &quot;com.jakewharton:butterknife-compiler:$butterknife_version&quot;\r\n    implementation &quot;net.danlew:android.joda:2.9.9&quot;\r\n    implementation &#39;androidx.room:room-runtime:2.4.0&#39;\r\n    kapt &#39;androidx.room:room-compiler:2.4.0&#39;\r\n    implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;\r\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.4.0&quot;\r\n    implementation &#39;androidx.lifecycle:lifecycle-common-java8:2.4.0&#39;\r\n    implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:2.4.0&quot;\r\n    implementation &quot;com.squareup.retrofit2:retrofit:$retrofit_version&quot;\r\n    implementation &quot;com.squareup.retrofit2:converter-gson:$retrofit_version&quot;\r\n    implementation &quot;com.squareup.okhttp3:okhttp:$okhttp_version&quot;\r\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:$okhttp_version&quot;\r\n    implementation &quot;com.google.dagger:dagger:$dagger_version&quot;\r\n    kapt &quot;com.google.dagger:dagger-compiler:$dagger_version&quot;\r\n    implementation project(&#39;:shinobicontrols-android-charts-premium-java-1.9.3-1&#39;)\r\n    implementation &quot;net.hockeyapp.android:HockeySDK:$hockeyapp_android_sdk_version&quot;\r\n    implementation &#39;com.google.android.gms:play-services-auth:16.0.1&#39;\r\n    implementation &quot;com.google.android.gms:play-services-drive:16.0.0&quot;\r\n    implementation &quot;com.neovisionaries:nv-websocket-client:$socket_library_version&quot;\r\n    implementation &quot;com.google.android.gms:play-services-analytics:16.0.6&quot;\r\n    implementation &#39;com.google.firebase:firebase-core:16.0.6&#39;\r\n\r\n    /* Tests */\r\n    implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n    androidTestImplementation(&#39;androidx.test.espresso:espresso-core:3.5.1&#39;, {\r\n        exclude group: &#39;androidx&#39;, module: &#39;support-annotations&#39;\r\n    })\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    testImplementation &quot;com.nhaarman.mockitokotlin2:mockito-kotlin:2.0.0-RC1&quot;\r\n    testImplementation &#39;androidx.arch.core:core-testing:2.0.0&#39;\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-reflect:$kotlin_version&quot;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n```\r\n# gradle-wrapper.properties \r\n\r\n```distributionBase=GRADLE_USER_HOME distributionPath=wrapper/dists distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip zipStoreBase=GRADLE_USER_HOME zipStorePath=wrapper/dists```\r\n\r\n\r\nI already tried using JDK 20 but error still persist.","title":"Build Error: A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction","body":"<p>I'm trying to run and build my project and I keep having this error.</p>\n<h2>Build Output</h2>\n<p><code>&gt; Task :app:kaptMyAppQaKotlin FAILED Execution failed for task ':app:kaptMyAppQaKotlin'. &gt; A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction &gt; java.lang.reflect.InvocationTargetException (no error message)</code></p>\n<h2>Using (./gradlew assemble --stacktrace --warning-mode all)</h2>\n<blockquote>\n<p>Task :app:kaptMyAppDebugKotlin\n/Users/MyUser/Documents/Projects/Kotlin/MyApp-android/MyApp/app/build/tmp/kapt3/stubs/MyAppDebug/com/MyApp/charts/ChartActivity.java:193: error: incompatible types: NonExistentClass cannot be converted to Annotation\nprivate final void showChartError(@error.NonExistentClass\n^</p>\n</blockquote>\n<blockquote>\n<p>Task :app:kaptMyAppDebugKotlin FAILED</p>\n</blockquote>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nExecution failed for task ':app:kaptMyAppDebugKotlin'.</li>\n</ul>\n<blockquote>\n<p>A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction\njava.lang.reflect.InvocationTargetException (no error message)</p>\n</blockquote>\n<p>Here's my ff files.</p>\n<h1>build.gradle (MyApp)</h1>\n<pre><code>Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.7.10'\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.2'\n        classpath 'me.tatarka:gradle-retrolambda:3.3.1'\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n        classpath 'com.google.gms:google-services:4.3.15'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<h1>build.gradle (:app)</h1>\n<pre><code>import java.util.regex.Matcher\nimport java.util.regex.Pattern\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'com.google.gms.google-services'\napply plugin: 'kotlin-parcelize'\napply plugin: 'kotlin-kapt'\n\ntask aaaprintVar {\n    doLast {\n        println System.getenv('HOME')\n        println System.getenv('ANDROID_KEY_ALIAS')\n        println project.property(&quot;BUILD_NUMBER_TAG&quot;)\n    }\n}\n\n/* AutoVersion Helpers */\ndef autoVersion_props = new Properties()\ndef folder = new File(&quot;$project.rootDir/scripts&quot;)\nif (!folder.exists()) {\n    // Create all folders up-to and including B\n    folder.mkdirs()\n}\nnew File(folder, &quot;autoVersion.properties&quot;).withWriterAppend { w -&gt;\n    w &lt;&lt; &quot;&quot;\n}\n\ndef autoPropsFile = new File(folder, &quot;autoVersion.properties&quot;)\nautoPropsFile.withInputStream { autoVersion_props.load(it) }\n\ndef readVersionCode = { -&gt;\n    def versionCodeString = autoVersion_props.getProperty(&quot;gitCommitCount&quot;) ?: &quot;0&quot;\n    return Integer.parseInt(versionCodeString)\n}\n/* End AutoVersion Helpers */\n\nandroid {\n    def readVersionName = { -&gt;\n        def versionName = autoVersion_props.getProperty(&quot;gitVersionTagNumber&quot;) ?: &quot;0.0.0&quot;\n        return versionName\n    }\n\n    def getApplicationIdSuffix = { -&gt;\n        return readVersionName() + '-' + readVersionCode() + '+' + gitShortHash()\n    }\n\n    def getMyApplicationIdSuffix = { -&gt;\n        println(&quot;getMyApplicationIddSuffix&quot;)\n        return readVersionName() + '-' + readVersionCode() + '+' + gitShortHash()\n    }\n\n    def gitPrefix = 'asdf'\n    // ...\n    ndkVersion &quot;21.4.7075529&quot; // or &quot;22.1.7171670&quot;\n    // ...\n    compileSdkVersion 31\n    buildToolsVersion '31.0.0'\n    defaultConfig {\n        applicationId &quot;com&quot;\n        minSdkVersion 26\n        targetSdkVersion 31\n        buildConfigField &quot;String&quot;, &quot;GIT_COMMIT_HASH&quot;, &quot;\\&quot;&quot; + gitCommitHash() + &quot;\\&quot;&quot;\n        println &quot;VersionCode: &quot; + readVersionCode()\n        versionCode readVersionCode()\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = [&quot;room.schemaLocation&quot;:\n                                     &quot;$projectDir/schemas&quot;.toString()]\n            }\n        }\n        testInstrumentationRunner 'androidx.test.runner.AndroidJUnitRunner'\n    }\n    buildFeatures {\n        viewBinding = true\n        dataBinding = true\n    }\n    packagingOptions {\n        exclude(&quot;**/libshinobicharts-android.so&quot;)\n    }\n    flavorDimensions &quot;base&quot;\n    productFlavors {\n        myapp {\n            dimension &quot;base&quot;\n            applicationId 'com.me.app'\n            versionName readVersionName()\n            setProperty(&quot;archivesBaseName&quot;, getMyApplicationIdSuffix())\n            buildConfigField('String', 'HOCKEYAPP_SDK_APP_ID', &quot;\\&quot;750acaf49a6a418abdc3d8e36e1d1b83\\&quot;&quot;)\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;750acaf49a6a418abdc3d8e36e1d1b83&quot;]\n        }\n        myappinstant {\n            dimension &quot;base&quot;\n            applicationId 'com.myapp.instant'\n            versionName = readVersionName()\n            setProperty(&quot;archivesBaseName&quot;, getMyInstantApplicationIdSuffix())\n            buildConfigField('String', 'HOCKEYAPP_SDK_APP_ID', &quot;\\&quot;8ee7b2f987d9402c86c0c96dfff52306\\&quot;&quot;)\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;8ee7b2f987d9402c86c0c96dfff52306&quot;]\n        }\n    }\n\n    def getCurrentFlavor = {\n        Gradle gradle = getGradle()\n        String tskReqStr = gradle.getStartParameter().getTaskRequests().toString()\n\n        Pattern pattern\n\n        if (tskReqStr.contains(&quot;assemble&quot;))\n            pattern = Pattern.compile(&quot;assemble(\\\\w+)(Release|Debug)&quot;)\n        else\n            pattern = Pattern.compile(&quot;generate(\\\\w+)(Release|Debug)&quot;)\n\n        Matcher matcher = pattern.matcher(tskReqStr)\n\n        if (matcher.find())\n            return matcher.group(1).toLowerCase() + '-'\n        else {\n            println &quot;NO MATCH FOUND&quot;\n            return &quot;&quot;\n        }\n    }\n\n    def runAutoVersion = { -&gt;\n        try {\n            def stdout = new ByteArrayOutputStream()\n            exec {\n                if (System.getProperty('os.name').toLowerCase().contains('windows')) {\n                    commandLine 'cmd', &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\n                } else {\n                    commandLine &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\n                }\n                args = [getCurrentFlavor()]\n                standardOutput = stdout\n            }\n            return stdout.toString().trim()\n        }\n        catch (error) {\n            println 'Error: ' + error\n            return null\n        }\n    }\n\n\n    preBuild.doFirst {\n        println &quot;PreBuild&quot;\n        println &quot;Running auto-version.sh&quot;\n        println runAutoVersion()\n        project.task(&quot;printProps&quot;)\n    }\n\n    task autoVersion {\n        doLast {\n            println &quot;PreBuild&quot;\n            println &quot;Running auto-version.sh&quot;\n            println runAutoVersion()\n            println &quot;Finished running auto-version.sh&quot;\n            project.task(&quot;printProps&quot;)\n        }\n    }\n\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n\n\n    def code_sign_props = new Properties()\n    def code_sign_file = new File(&quot;$rootProject.projectDir/secrets/code_sign.properties&quot;)\n    def codeSignFile = code_sign_file.exists() ? code_sign_file : file(&quot;$rootProject.projectDir/secrets/default_code_sign.properties&quot;)\n    println(&quot;CodeSignFile: &quot; + codeSignFile)\n    codeSignFile.withInputStream { code_sign_props.load(it) }\n    def keystoreFile = new File(&quot;$rootProject.projectDir/secrets/upload.jks&quot;)\n    def releaseKeyStoreFile = keystoreFile.exists() ? keystoreFile : file(&quot;$rootProject.projectDir/../ProjectSetup/qa.keystore&quot;)\n    println(&quot;releaseKeyStoreFile: &quot; + releaseKeyStoreFile)\n    signingConfigs {\n        debug {\n            storeFile releaseKeyStoreFile\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n        qa {\n            storeFile releaseKeyStoreFile\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n        release {\n            storeFile releaseKeyStoreFile\n            storePassword code_sign_props.getProperty(&quot;ANDROID_KEY_STORE_PASSWORD&quot;) ?: 'android'\n            keyAlias code_sign_props.getProperty(&quot;ANDROID_KEY_ALIAS&quot;) ?: 'androiddebugkey'\n            keyPassword code_sign_props.getProperty(&quot;ANDROID_KEY_PASSWORD&quot;) ?: 'android'\n        }\n    }\n\n    buildTypes {\n        debug {\n            minifyEnabled false\n            signingConfig signingConfigs.debug\n            debuggable true\n\n        }\n        qa {\n            minifyEnabled false\n            signingConfig signingConfigs.qa\n            debuggable true\n\n        }\n        release {\n            buildConfigField &quot;Boolean&quot;, &quot;RELEASE_TYPE&quot;, &quot;true&quot;\n            buildConfigField &quot;Boolean&quot;, &quot;ENABLE_DEVICE_ID_CHANGE&quot;, &quot;false&quot;\n\n            debuggable false\n            minifyEnabled false\n            //proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n\n            signingConfig signingConfigs.release\n        }\n\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    testOptions {\n        unitTests.returnDefaultValues = true\n    }\n\n}\n\ndef gitBranch() {\n    def branch = &quot;&quot;\n    def proc = &quot;git rev-parse --abbrev-ref HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; branch = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    branch\n}\n\ndef gitShortHash() {\n    def hash = &quot;&quot;\n    def proc = &quot;git rev-parse --short HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; hash = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    hash\n}\n\ndef gitCommitHash() {\n    def hash = &quot;&quot;\n    def proc = &quot;git rev-parse HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; hash = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    hash\n}\n\ndependencies {\n    def butterknife_version = &quot;10.2.3&quot;\n    def retrofit_version = &quot;2.3.0&quot;\n    def okhttp_version = &quot;3.9.0&quot;\n    def dagger_version = &quot;2.38.1&quot;\n    def hockeyapp_android_sdk_version = &quot;4.1.4&quot;\n    def socket_library_version = &quot;2.3&quot;\n\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation 'androidx.appcompat:appcompat:1.4.0'\n    implementation 'androidx.recyclerview:recyclerview:1.3.0-alpha02'\n    implementation 'com.google.android.material:material:1.5.0'\n    implementation 'androidx.browser:browser:1.0.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.2.0-alpha04'\n    implementation &quot;com.jakewharton:butterknife:$butterknife_version&quot;\n    kapt &quot;com.jakewharton:butterknife-compiler:$butterknife_version&quot;\n    implementation &quot;net.danlew:android.joda:2.9.9&quot;\n    implementation 'androidx.room:room-runtime:2.4.0'\n    kapt 'androidx.room:room-compiler:2.4.0'\n    implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.4.0&quot;\n    implementation 'androidx.lifecycle:lifecycle-common-java8:2.4.0'\n    implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:2.4.0&quot;\n    implementation &quot;com.squareup.retrofit2:retrofit:$retrofit_version&quot;\n    implementation &quot;com.squareup.retrofit2:converter-gson:$retrofit_version&quot;\n    implementation &quot;com.squareup.okhttp3:okhttp:$okhttp_version&quot;\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:$okhttp_version&quot;\n    implementation &quot;com.google.dagger:dagger:$dagger_version&quot;\n    kapt &quot;com.google.dagger:dagger-compiler:$dagger_version&quot;\n    implementation project(':shinobicontrols-android-charts-premium-java-1.9.3-1')\n    implementation &quot;net.hockeyapp.android:HockeySDK:$hockeyapp_android_sdk_version&quot;\n    implementation 'com.google.android.gms:play-services-auth:16.0.1'\n    implementation &quot;com.google.android.gms:play-services-drive:16.0.0&quot;\n    implementation &quot;com.neovisionaries:nv-websocket-client:$socket_library_version&quot;\n    implementation &quot;com.google.android.gms:play-services-analytics:16.0.6&quot;\n    implementation 'com.google.firebase:firebase-core:16.0.6'\n\n    /* Tests */\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    androidTestImplementation('androidx.test.espresso:espresso-core:3.5.1', {\n        exclude group: 'androidx', module: 'support-annotations'\n    })\n    testImplementation 'junit:junit:4.13.2'\n    testImplementation &quot;com.nhaarman.mockitokotlin2:mockito-kotlin:2.0.0-RC1&quot;\n    testImplementation 'androidx.arch.core:core-testing:2.0.0'\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n    implementation &quot;org.jetbrains.kotlin:kotlin-reflect:$kotlin_version&quot;\n}\n\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n<h1>gradle-wrapper.properties</h1>\n<p><code>distributionBase=GRADLE_USER_HOME distributionPath=wrapper/dists distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip zipStoreBase=GRADLE_USER_HOME zipStorePath=wrapper/dists</code></p>\n<p>I already tried using JDK 20 but error still persist.</p>\n"},{"tags":["java","spring","sonarqube","xss"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691808567,"post_id":76831689,"comment_id":135545481,"body_markdown":"There is a large quantity of information missing from your question e.g. your server version and whether it&#39;s configuration contains directives can be used against XSS ! Tomcat has security headers can be configured,   https://docs.bmc.com/docs/security/basic-tomcat-security-configuration-recommendations-924057229.html    Sonarqube also has protections too.    https://cwe.mitre.org/data/definitions/79.html   should be some help too...  https://semgrep.dev/docs/cheat-sheets/java-jsp-xss/      XSS is more about preventing X domain analytical scripts attaching or entering by destroying chars.","body":"There is a large quantity of information missing from your question e.g. your server version and whether it&#39;s configuration contains directives can be used against XSS ! Tomcat has security headers can be configured,   <a href=\"https://docs.bmc.com/docs/security/basic-tomcat-security-configuration-recommendations-924057229.html\" rel=\"nofollow noreferrer\">docs.bmc.com/docs/security/&hellip;</a>    Sonarqube also has protections too.    <a href=\"https://cwe.mitre.org/data/definitions/79.html\" rel=\"nofollow noreferrer\">cwe.mitre.org/data/definitions/79.html</a>   should be some help too...  <a href=\"https://semgrep.dev/docs/cheat-sheets/java-jsp-xss/\" rel=\"nofollow noreferrer\">semgrep.dev/docs/cheat-sheets/java-jsp-xss</a>      XSS is more about preventing X domain analytical scripts attaching or entering by destroying chars."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691809872,"post_id":76831689,"comment_id":135545530,"body_markdown":"Probably the best solution would be to urlencode your Jason and place it in a hidden field in the document, then urldecode it with a .js file from the same folder the jsp comes from (Another Point , is the page dynamically created or pre made?). https://stackoverflow.com/questions/54490611/how-to-embed-json-in-html","body":"Probably the best solution would be to urlencode your Jason and place it in a hidden field in the document, then urldecode it with a .js file from the same folder the jsp comes from (Another Point , is the page dynamically created or pre made?). <a href=\"https://stackoverflow.com/questions/54490611/how-to-embed-json-in-html\" title=\"how to embed json in html\">stackoverflow.com/questions/54490611/how-to-embed-json-in-ht&zwnj;&#8203;ml</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691810332,"post_id":76831689,"comment_id":135545549,"body_markdown":"Sonarqube and .js \n  (requires Node.js) \n https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/languages/javascript-typescript-css/    Example only Tomcat and .js control.  https://stackoverflow.com/questions/23342948/tomcat-access-control-allow-origin-and-javascript","body":"Sonarqube and .js    (requires Node.js)   <a href=\"https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/languages/javascript-typescript-css/\" rel=\"nofollow noreferrer\">docs.sonarsource.com/sonarqube/latest/analyzing-source-code/&zwnj;&#8203;&hellip;</a>    Example only Tomcat and .js control.  <a href=\"https://stackoverflow.com/questions/23342948/tomcat-access-control-allow-origin-and-javascript\" title=\"tomcat access control allow origin and javascript\">stackoverflow.com/questions/23342948/&hellip;</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691811463,"post_id":76831689,"comment_id":135545620,"body_markdown":"And one more point, the writer output Content-type must match the the output, therefore, if it is a jsp and effectively the client is sent html, it is more text/html , the trouble arises having to know if JSON is present.   Note Node.js and jQuery use JSON.   https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript#:~:text=The%20%24()%20is%20the%20shorthand,used%20in%20the%20jQuery%20Library.&amp;text=In%20addition%20to%20the%20above,object%20and%20jQuery()%20function.","body":"And one more point, the writer output Content-type must match the the output, therefore, if it is a jsp and effectively the client is sent html, it is more text/html , the trouble arises having to know if JSON is present.   Note Node.js and jQuery use JSON.   <a href=\"https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript#:~:text=The%20%24()%20is%20the%20shorthand,used%20in%20the%20jQuery%20Library.&amp;text=In%20addition%20to%20the%20above,object%20and%20jQuery()%20function\" title=\"what is the meaning of sign in javascript%23%3a%7e%3atext%3dThe%2520%2524()%2520is%2520the%2520shorthand%2cused%2520in%2520the%2520jQuery%2520Library.%26amp%3btext%3dIn%2520addition%2520to%2520the%2520above%2cobject%2520and%2520jQuery()%2520function\">stackoverflow.com/questions/1150381/&hellip;</a>."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691812665,"post_id":76831689,"comment_id":135545686,"body_markdown":"The main trouble about servers and XSS is the standard policy on scripting that only allows an associate client script to be in the same folder or deeper same folder as the page XML or html, higher or aside folders are automatically illegitimate security with the call to the script. It seems wherever &quot;printwriter&quot; is getting input may be from an input output stream resource outside accepted boundaries more than its string coding contents. Another place banned may be from url parameters of requests.    ( Extra inf only https://heynode.com/tutorial/readwrite-json-files-nodejs/  )","body":"The main trouble about servers and XSS is the standard policy on scripting that only allows an associate client script to be in the same folder or deeper same folder as the page XML or html, higher or aside folders are automatically illegitimate security with the call to the script. It seems wherever &quot;printwriter&quot; is getting input may be from an input output stream resource outside accepted boundaries more than its string coding contents. Another place banned may be from url parameters of requests.    ( Extra inf only <a href=\"https://heynode.com/tutorial/readwrite-json-files-nodejs/\" rel=\"nofollow noreferrer\">heynode.com/tutorial/readwrite-json-files-nodejs</a>  )"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691825549,"post_id":76831689,"comment_id":135546433,"body_markdown":"Of the printwriter, it&#39;s main problem is it is editable with append() so it poses risk with error outputs, request and response info in a context of XSS apart the fact wherever scripting could be sourced is unchecked e.g. request response or upload or vulnerable located file e.g. FTP folder   e.getResponseBodyAsString() could contain scripting characters.","body":"Of the printwriter, it&#39;s main problem is it is editable with append() so it poses risk with error outputs, request and response info in a context of XSS apart the fact wherever scripting could be sourced is unchecked e.g. request response or upload or vulnerable located file e.g. FTP folder   e.getResponseBodyAsString() could contain scripting characters."}],"answers":[{"tags":[],"owner":{"account_id":4895504,"reputation":702,"user_id":4253293,"accept_rate":50,"display_name":"Steve"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691099756,"creation_date":1691099756,"answer_id":76831814,"question_id":76831689,"body_markdown":"An XSS vulnerability usually means that there is an unbroken connection of data from the request back to the response.  The easiest solution for this is usually just to use a library like StringEscapeUtils.escapeHtml4 on the data coming from the request.  That would make it so that a &lt;script&gt; tag (the real root of all XSS attacks) would be converted to &amp;lt;script%gt; which would render on the screen as &lt;script&gt; but would not execute in the browser as script.  Hopefully that makes sense.","title":"Java SonarQube: Error This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be vulnerable to XSS","body":"<p>An XSS vulnerability usually means that there is an unbroken connection of data from the request back to the response.  The easiest solution for this is usually just to use a library like StringEscapeUtils.escapeHtml4 on the data coming from the request.  That would make it so that a  tag (the real root of all XSS attacks) would be converted to &lt;script%gt; which would render on the screen as  but would not execute in the browser as script.  Hopefully that makes sense.</p>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301824,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691353231,"creation_date":1691353231,"answer_id":76847655,"question_id":76831689,"body_markdown":"You have:\r\n\r\n``` java\r\nresponse.setContentType(MediaType.TEXT_PLAIN);\r\nwriter.print(e.getResponseBodyAsString());\r\n```\r\n\r\nThat looks dangerous, especially if the response is the string `&quot;message&quot;: &quot;&lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt;&quot;`!\r\n\r\nEssentially, whenever you output data directly to a browser (in this case via `PrintWriter`), if that data contains malicious scripts from user input or any non-trusted sources, it can be executed on the client side, leading to Cross-Site Scripting (XSS) attacks.\r\n\r\nIf you know you want a JSON content, specify it explicitly:\r\n\r\n```java\r\nresponse.setContentType(MediaType.APPLICATION_JSON);\r\n```\r\n\r\n\r\nAnd always escape the data before sending it as output. You mentioned that [`HTMLEscape`](https://docs.spring.io/spring-framework/docs/1.2.x/javadoc-api/org/springframework/web/util/HtmlUtils.html#htmlEscape(java.lang.String)) causes bad formatting. That makes sense because you are working with JSON. Instead of HTML escaping, you should try and use JSON escaping, with, for instance, [`FasterXML/jackson`](https://github.com/FasterXML/jackson). See [Reading and Writing Using ObjectMapper](https://www.baeldung.com/jackson-object-mapper-tutorial#Reading) from [Eugen Baeldung](https://www.baeldung.com/about).\r\n\r\n```java\r\nString jsonEscaped = new ObjectMapper().writeValueAsString(e.getResponseBodyAsString());\r\nwriter.print(jsonEscaped);\r\n```\r\n\r\n\r\nWith you `pom.xml` including in the `&lt;dependencies&gt;` section:\r\n\r\n``` xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    &lt;version&gt;2.15.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\nYour code would then would be:\r\n\r\n```java\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n...\r\ntry {\r\n    unifiedResponse = testController.updateData(testRequest);\r\n} catch (RestClientResponseException e) {\r\n    try {\r\n        PrintWriter writer = response.getWriter();\r\n        response.setContentType(MediaType.APPLICATION_JSON);\r\n\r\n        // Avoid directly printing exception. Instead, you can log it.\r\n        // log.error(&quot;Error occurred&quot;, e);\r\n        \r\n        // Send a generic error message or a sanitized version of the actual error message.\r\n        String sanitizedOutput = new ObjectMapper().writeValueAsString(Collections.singletonMap(&quot;error&quot;, &quot;An error occurred.&quot;));\r\n        writer.print(sanitizedOutput);\r\n\r\n    } catch (IOException ex) {\r\n        throw new ServiceException(&quot;Cannot get update Password error response body&quot;, ex);\r\n    }\r\n}\r\n```","title":"Java SonarQube: Error This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be vulnerable to XSS","body":"<p>You have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>response.setContentType(MediaType.TEXT_PLAIN);\nwriter.print(e.getResponseBodyAsString());\n</code></pre>\n<p>That looks dangerous, especially if the response is the string <code>&quot;message&quot;: &quot;&lt;script&gt;alert('Hacked!');&lt;/script&gt;&quot;</code>!</p>\n<p>Essentially, whenever you output data directly to a browser (in this case via <code>PrintWriter</code>), if that data contains malicious scripts from user input or any non-trusted sources, it can be executed on the client side, leading to Cross-Site Scripting (XSS) attacks.</p>\n<p>If you know you want a JSON content, specify it explicitly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>response.setContentType(MediaType.APPLICATION_JSON);\n</code></pre>\n<p>And always escape the data before sending it as output. You mentioned that <a href=\"https://docs.spring.io/spring-framework/docs/1.2.x/javadoc-api/org/springframework/web/util/HtmlUtils.html#htmlEscape(java.lang.String)\" rel=\"nofollow noreferrer\"><code>HTMLEscape</code></a> causes bad formatting. That makes sense because you are working with JSON. Instead of HTML escaping, you should try and use JSON escaping, with, for instance, <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\"><code>FasterXML/jackson</code></a>. See <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial#Reading\" rel=\"nofollow noreferrer\">Reading and Writing Using ObjectMapper</a> from <a href=\"https://www.baeldung.com/about\" rel=\"nofollow noreferrer\">Eugen Baeldung</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonEscaped = new ObjectMapper().writeValueAsString(e.getResponseBodyAsString());\nwriter.print(jsonEscaped);\n</code></pre>\n<p>With you <code>pom.xml</code> including in the <code>&lt;dependencies&gt;</code> section:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.15.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Your code would then would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.ObjectMapper;\n...\ntry {\n    unifiedResponse = testController.updateData(testRequest);\n} catch (RestClientResponseException e) {\n    try {\n        PrintWriter writer = response.getWriter();\n        response.setContentType(MediaType.APPLICATION_JSON);\n\n        // Avoid directly printing exception. Instead, you can log it.\n        // log.error(&quot;Error occurred&quot;, e);\n        \n        // Send a generic error message or a sanitized version of the actual error message.\n        String sanitizedOutput = new ObjectMapper().writeValueAsString(Collections.singletonMap(&quot;error&quot;, &quot;An error occurred.&quot;));\n        writer.print(sanitizedOutput);\n\n    } catch (IOException ex) {\n        throw new ServiceException(&quot;Cannot get update Password error response body&quot;, ex);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691579812,"creation_date":1691536946,"answer_id":76863691,"question_id":76831689,"body_markdown":"Some time ago I wrote [an answer](https://stackoverflow.com/questions/69475757/how-to-print-complete-error-message-when-logging-an-exception-generated-by-restt/69527775#69527775) that could be of help: it is not related to the SonarQube error, but on how to adapt the error messages returned by `RestTemplate`.\r\n\r\nThe idea is configuring `RestTemplate` to use a custom [`ResponseErrorHandler`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/ResponseErrorHandler.html). Adapted from the answer:\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.charset.Charset;\r\nimport java.nio.charset.StandardCharsets;\r\n\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.client.ClientHttpResponse;\r\nimport org.springframework.lang.Nullable;\r\nimport org.springframework.util.ObjectUtils;\r\nimport org.springframework.web.client.DefaultResponseErrorHandler;\r\nimport org.springframework.web.client.HttpClientErrorException;\r\nimport org.springframework.web.client.HttpServerErrorException;\r\nimport org.springframework.web.client.UnknownHttpStatusCodeException;\r\n\r\npublic class CustomRestTemplateResponseErrorHandler extends DefaultResponseErrorHandler {\r\n  \r\n  // This overloaded method version is only available since Spring 5.0\r\n  // For previous versions of the library you can override\r\n  // handleError(ClientHttpResponse response) instead\r\n  @Override\r\n  protected void handleError(ClientHttpResponse response, HttpStatus statusCode) throws IOException {\r\n    String statusText = response.getStatusText();\r\n    HttpHeaders headers = response.getHeaders();\r\n    byte[] body = getResponseBody(response);\r\n    Charset charset = getCharset(response);\r\n    String message = getErrorMessage(statusCode.value(), statusText, body, charset);\r\n\r\n    switch (statusCode.series()) {\r\n      case CLIENT_ERROR:\r\n        throw HttpClientErrorException.create(message, statusCode, statusText, headers, body, charset);\r\n      case SERVER_ERROR:\r\n        throw HttpServerErrorException.create(message, statusCode, statusText, headers, body, charset);\r\n      default:\r\n        throw new UnknownHttpStatusCodeException(message, statusCode.value(), statusText, headers, body, charset);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return error message with details from the response body:\r\n   * &lt;pre&gt;\r\n   * 404 Not Found: [{&#39;id&#39;: 123, &#39;message&#39;: &#39;actual mesage&#39;]\r\n   * &lt;/pre&gt;\r\n   *\r\n   * In contrast to &lt;code&gt;DefaultResponseErrorHandler&lt;/code&gt;, the message will not be truncated.\r\n   */\r\n  private String getErrorMessage(\r\n      int rawStatusCode, String statusText, @Nullable byte[] responseBody, @Nullable Charset charset) {\r\n\r\n    // Build and return your custom json error message here\r\n  }\r\n}\r\n```\r\n\r\nThen, configure `RestTemplate` to use this custom `ResponseErrorHandler`:\r\n\r\n```java\r\nRestTemplate restTemplate = new RestTemplate();\r\nResponseErrorHandler errorHandler = new CustomRestTemplateResponseErrorHandler();\r\nrestTemplate.setErrorHandler(errorHandler);\r\n// use your RestTemplate normally\r\n```\r\n\r\nPlease, as also stated in the mentioned answer, consider read [this related SO question](https://stackoverflow.com/questions/38093388/spring-resttemplate-exception-handling) and [this](https://hellokoding.com/spring-resttemplate-error-hanlding/) or [this](https://www.baeldung.com/spring-rest-template-error-handling) related blog posts.\r\n\r\nUsing this approach the returned error should be properly formatted without the need of using `PrintWriter` directly, Spring will take care of everything to return this message to the client in a proper way without any SonarQube issue.\r\n\r\nSometimes resolving a SonarQube rule validation error could be cornerstone: in this specific use case, if you are sure that the information returned is safe, you can probably ignoring it. In any case, to avoid any potential problem, be sure that your client sanitizes the returned information when you use it using the means provided by the actual framework you are using.\r\n","title":"Java SonarQube: Error This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be vulnerable to XSS","body":"<p>Some time ago I wrote <a href=\"https://stackoverflow.com/questions/69475757/how-to-print-complete-error-message-when-logging-an-exception-generated-by-restt/69527775#69527775\">an answer</a> that could be of help: it is not related to the SonarQube error, but on how to adapt the error messages returned by <code>RestTemplate</code>.</p>\n<p>The idea is configuring <code>RestTemplate</code> to use a custom <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/ResponseErrorHandler.html\" rel=\"nofollow noreferrer\"><code>ResponseErrorHandler</code></a>. Adapted from the answer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\n\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.client.ClientHttpResponse;\nimport org.springframework.lang.Nullable;\nimport org.springframework.util.ObjectUtils;\nimport org.springframework.web.client.DefaultResponseErrorHandler;\nimport org.springframework.web.client.HttpClientErrorException;\nimport org.springframework.web.client.HttpServerErrorException;\nimport org.springframework.web.client.UnknownHttpStatusCodeException;\n\npublic class CustomRestTemplateResponseErrorHandler extends DefaultResponseErrorHandler {\n  \n  // This overloaded method version is only available since Spring 5.0\n  // For previous versions of the library you can override\n  // handleError(ClientHttpResponse response) instead\n  @Override\n  protected void handleError(ClientHttpResponse response, HttpStatus statusCode) throws IOException {\n    String statusText = response.getStatusText();\n    HttpHeaders headers = response.getHeaders();\n    byte[] body = getResponseBody(response);\n    Charset charset = getCharset(response);\n    String message = getErrorMessage(statusCode.value(), statusText, body, charset);\n\n    switch (statusCode.series()) {\n      case CLIENT_ERROR:\n        throw HttpClientErrorException.create(message, statusCode, statusText, headers, body, charset);\n      case SERVER_ERROR:\n        throw HttpServerErrorException.create(message, statusCode, statusText, headers, body, charset);\n      default:\n        throw new UnknownHttpStatusCodeException(message, statusCode.value(), statusText, headers, body, charset);\n    }\n  }\n\n  /**\n   * Return error message with details from the response body:\n   * &lt;pre&gt;\n   * 404 Not Found: [{'id': 123, 'message': 'actual mesage']\n   * &lt;/pre&gt;\n   *\n   * In contrast to &lt;code&gt;DefaultResponseErrorHandler&lt;/code&gt;, the message will not be truncated.\n   */\n  private String getErrorMessage(\n      int rawStatusCode, String statusText, @Nullable byte[] responseBody, @Nullable Charset charset) {\n\n    // Build and return your custom json error message here\n  }\n}\n</code></pre>\n<p>Then, configure <code>RestTemplate</code> to use this custom <code>ResponseErrorHandler</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>RestTemplate restTemplate = new RestTemplate();\nResponseErrorHandler errorHandler = new CustomRestTemplateResponseErrorHandler();\nrestTemplate.setErrorHandler(errorHandler);\n// use your RestTemplate normally\n</code></pre>\n<p>Please, as also stated in the mentioned answer, consider read <a href=\"https://stackoverflow.com/questions/38093388/spring-resttemplate-exception-handling\">this related SO question</a> and <a href=\"https://hellokoding.com/spring-resttemplate-error-hanlding/\" rel=\"nofollow noreferrer\">this</a> or <a href=\"https://www.baeldung.com/spring-rest-template-error-handling\" rel=\"nofollow noreferrer\">this</a> related blog posts.</p>\n<p>Using this approach the returned error should be properly formatted without the need of using <code>PrintWriter</code> directly, Spring will take care of everything to return this message to the client in a proper way without any SonarQube issue.</p>\n<p>Sometimes resolving a SonarQube rule validation error could be cornerstone: in this specific use case, if you are sure that the information returned is safe, you can probably ignoring it. In any case, to avoid any potential problem, be sure that your client sanitizes the returned information when you use it using the means provided by the actual framework you are using.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76847655,"answer_count":3,"score":1,"last_activity_date":1691579812,"creation_date":1691097854,"question_id":76831689,"body_markdown":"I am getting this error below. When using ResponseWriter. How can I resolve it? Goal is to resolve the Sonarqube error, however my proposed solution below using Sonar documentation isn&#39;t working.\r\n\r\n    try {\r\n       unifiedResponse = testController.updateData(testRequest);\r\n    } catch (RestClientResponseException e) {\r\n    \ttry {\r\n            PrintWriter writer = response.getWriter();\r\n            response.setContentType(MediaType.TEXT_PLAIN);\r\n            response.setStatus(e.getRawStatusCode());\r\n            writer.print(e.getResponseBodyAsString());\r\n    \t} catch (IOException ex) {\r\n    \t\tthrow new ServiceException(&quot;Cannot get update Password error response body&quot;, ex);\r\n    \t}\r\n    }\r\n\r\n**Error:**\r\n\r\n&gt; This use of java/io/PrintWriter.write(Ljava/lang/String;)V\r\n&gt; could be vulnerable to XSS\r\n\r\n[![enter image description here][1]][1]\r\n\r\nMy output is JSON, HTMLEscape and OWASP creates bad formatting, which I need.\r\n\r\n    { \r\n        &quot;message&quot;: &quot;Here is a test message&quot;\r\n    }\r\n\r\nOWASP Output:\r\n\r\n    {&amp;#34;message&amp;#34;:&amp;#34;Here is a test message (e.g. !&amp;#64;#$).&amp;#34;}\r\n\r\n**SonarQube Rules:**\r\n\r\nI tried SonarQube official solution and still giving error. https://rules.sonarsource.com/java/RSPEC-5131/ \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0pY99.png","title":"Java SonarQube: Error This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be vulnerable to XSS","body":"<p>I am getting this error below. When using ResponseWriter. How can I resolve it? Goal is to resolve the Sonarqube error, however my proposed solution below using Sonar documentation isn't working.</p>\n<pre><code>try {\n   unifiedResponse = testController.updateData(testRequest);\n} catch (RestClientResponseException e) {\n    try {\n        PrintWriter writer = response.getWriter();\n        response.setContentType(MediaType.TEXT_PLAIN);\n        response.setStatus(e.getRawStatusCode());\n        writer.print(e.getResponseBodyAsString());\n    } catch (IOException ex) {\n        throw new ServiceException(&quot;Cannot get update Password error response body&quot;, ex);\n    }\n}\n</code></pre>\n<p><strong>Error:</strong></p>\n<blockquote>\n<p>This use of java/io/PrintWriter.write(Ljava/lang/String;)V\ncould be vulnerable to XSS</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/0pY99.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0pY99.png\" alt=\"enter image description here\" /></a></p>\n<p>My output is JSON, HTMLEscape and OWASP creates bad formatting, which I need.</p>\n<pre><code>{ \n    &quot;message&quot;: &quot;Here is a test message&quot;\n}\n</code></pre>\n<p>OWASP Output:</p>\n<pre><code>{&amp;#34;message&amp;#34;:&amp;#34;Here is a test message (e.g. !&amp;#64;#$).&amp;#34;}\n</code></pre>\n<p><strong>SonarQube Rules:</strong></p>\n<p>I tried SonarQube official solution and still giving error. <a href=\"https://rules.sonarsource.com/java/RSPEC-5131/\" rel=\"nofollow noreferrer\">https://rules.sonarsource.com/java/RSPEC-5131/</a></p>\n"},{"tags":["java","spring-boot","quartz-scheduler","scheduler","jobs"],"owner":{"account_id":10383212,"reputation":333,"user_id":7657219,"display_name":"Varox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691579762,"creation_date":1691579762,"question_id":76867243,"body_markdown":"I have a scheduler that calls a service that process different entities taking as an argument the ids from the database.\r\n\r\nThis scheduler launches a job when the user presses a button in the front, this sends a list of ids to the scheduler (the list that is being used to ).\r\n\r\nMy problem is that when I try to launch more than one job at the same time (ex. two users press the button at the same time) using the scheduleASAP function, the jobs start working but apparently they start using the same piece of code, so they start taking the entities which were supposed to be processed only by one of the jobs and in the end, several entities end up being wrong or not being processed correctly.\r\n\r\nWhy could this be happening?","title":"How can I launch multiple instances of a job concurrently (Quartz schedulers)?","body":"<p>I have a scheduler that calls a service that process different entities taking as an argument the ids from the database.</p>\n<p>This scheduler launches a job when the user presses a button in the front, this sends a list of ids to the scheduler (the list that is being used to ).</p>\n<p>My problem is that when I try to launch more than one job at the same time (ex. two users press the button at the same time) using the scheduleASAP function, the jobs start working but apparently they start using the same piece of code, so they start taking the entities which were supposed to be processed only by one of the jobs and in the end, several entities end up being wrong or not being processed correctly.</p>\n<p>Why could this be happening?</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691168072,"post_id":76834912,"comment_id":135460285,"body_markdown":"Please show `kafka-consumer-groups --describe` output for your group id","body":"Please show <code>kafka-consumer-groups --describe</code> output for your group id"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691241071,"post_id":76834912,"comment_id":135467103,"body_markdown":"@OneCricketeer Thanks for the reply, my problem was related to the embedding. I changed the kafka dependency from version 3.4.0 to 1.0.0 and now I can see my client in the kafka interface.\nIt looks very interesting, but it works.\nUnfortunately I can&#39;t check the actual version of kafka on the server, and I don&#39;t have access to the server to check kafka-consumer-groups --describe via CLI. But now my customer gets 100 notifications, but if the vendor sent 100,000 notifications, he doesn&#39;t get them. Why is this happening?","body":"@OneCricketeer Thanks for the reply, my problem was related to the embedding. I changed the kafka dependency from version 3.4.0 to 1.0.0 and now I can see my client in the kafka interface. It looks very interesting, but it works. Unfortunately I can&#39;t check the actual version of kafka on the server, and I don&#39;t have access to the server to check kafka-consumer-groups --describe via CLI. But now my customer gets 100 notifications, but if the vendor sent 100,000 notifications, he doesn&#39;t get them. Why is this happening?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691253549,"post_id":76834912,"comment_id":135468403,"body_markdown":"I would not recommend going to a 5+ year old version of Kafka client. You dont need access to the terminal of the server to run `kafka-consumer-groups` with `--bootstrap-server 50-kafka-a:9092`. Just download Kafka CLI tools locally. Regarding why the code stops - you&#39;re calling `break` when the records list is empty.. One empty poll doesn&#39;t mean you&#39;ve consumed to the end of the topic","body":"I would not recommend going to a 5+ year old version of Kafka client. You dont need access to the terminal of the server to run <code>kafka-consumer-groups</code> with <code>--bootstrap-server 50-kafka-a:9092</code>. Just download Kafka CLI tools locally. Regarding why the code stops - you&#39;re calling <code>break</code> when the records list is empty.. One empty poll doesn&#39;t mean you&#39;ve consumed to the end of the topic"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691302021,"post_id":76834912,"comment_id":135471692,"body_markdown":"@OneCricketeer, thank you for your reply. Yes, you are right. I can&#39;t understand why using unlimited loop in the consumer but now it seems correct I have to use wakeupException in the try/catch of run(), right? And process closing the cosumer in the catch or finally. About versions : i am back to the version 1.0.0 because ConsumerRebalanceListner does not calling in version 3.4.0 and i can not understand why. I thought that it is because version kafka in the server older than in my project and conflict happened. What are you think about?","body":"@OneCricketeer, thank you for your reply. Yes, you are right. I can&#39;t understand why using unlimited loop in the consumer but now it seems correct I have to use wakeupException in the try/catch of run(), right? And process closing the cosumer in the catch or finally. About versions : i am back to the version 1.0.0 because ConsumerRebalanceListner does not calling in version 3.4.0 and i can not understand why. I thought that it is because version kafka in the server older than in my project and conflict happened. What are you think about?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691332738,"post_id":76834912,"comment_id":135474470,"body_markdown":"I haven&#39;t had any such version issues, but I would upgrade to 3.5.1, rather than downgrade two major versions. And you don&#39;t need a while loop and manually thread interactions if you used spring-kafka library","body":"I haven&#39;t had any such version issues, but I would upgrade to 3.5.1, rather than downgrade two major versions. And you don&#39;t need a while loop and manually thread interactions if you used spring-kafka library"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691409264,"post_id":76834912,"comment_id":135483066,"body_markdown":"What do you mean, @OneCricketeer ? Can you explane , please?","body":"What do you mean, @OneCricketeer ? Can you explane , please?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691412622,"post_id":76834912,"comment_id":135483792,"body_markdown":"You&#39;re already using Spring. So use spring-kafka `@KafkaListener` functions rather than define a consumer with a manual loop yourself. Similarly, KafkaTemplate for a producer","body":"You&#39;re already using Spring. So use spring-kafka <code>@KafkaListener</code> functions rather than define a consumer with a manual loop yourself. Similarly, KafkaTemplate for a producer"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691419027,"post_id":76834912,"comment_id":135485337,"body_markdown":"docs here https://docs.spring.io/spring-kafka/reference/html/#reference","body":"docs here <a href=\"https://docs.spring.io/spring-kafka/reference/html/#reference\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/reference/html/#reference</a>"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691443887,"post_id":76834912,"comment_id":135489948,"body_markdown":"@OneCricketeer, thanks for answer, but i am not using Sprinf Boot, it is java project. I upgrated kafka version to 3.4.0 and now it works, but my consumer always poll latest offser of partitions and never reads messages from partiotions. For example : i have topic with 3 partitions - p 1 (low water mark : 987 and high water mark : 993) = 6 msg, p 2 (low water mark : 920 and high water mark : 926) = 6 msg and p 3 (low water mark : 950 and high water mark : 958) = 8 msg and my consumer is getting records from p 1 with offset 994, p 2 with offset 927 and p 3 with offset 959 and they are empty...","body":"@OneCricketeer, thanks for answer, but i am not using Sprinf Boot, it is java project. I upgrated kafka version to 3.4.0 and now it works, but my consumer always poll latest offser of partitions and never reads messages from partiotions. For example : i have topic with 3 partitions - p 1 (low water mark : 987 and high water mark : 993) = 6 msg, p 2 (low water mark : 920 and high water mark : 926) = 6 msg and p 3 (low water mark : 950 and high water mark : 958) = 8 msg and my consumer is getting records from p 1 with offset 994, p 2 with offset 927 and p 3 with offset 959 and they are empty..."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691445684,"post_id":76834912,"comment_id":135490145,"body_markdown":"So now you are back to 3.4.0? But you said that didn&#39;t work before? You have `@Component` and `@Autowired`, so you are using SpringBoot, or something similar... In any case, check your consumer lag with `kafka-consumer-groups`  CLI script. If there is low/no lag, then your consumer will always read from the end of the topic, yes... You may want to set `enable.auto.commit=false`, btw. Also, check your consumer `isolation.level` setting since Kafka defaults to send transaction markers nowadays, which are &quot;empty records&quot; from a consumer perspective (`read_committed` is not the default)","body":"So now you are back to 3.4.0? But you said that didn&#39;t work before? You have <code>@Component</code> and <code>@Autowired</code>, so you are using SpringBoot, or something similar... In any case, check your consumer lag with <code>kafka-consumer-groups</code>  CLI script. If there is low/no lag, then your consumer will always read from the end of the topic, yes... You may want to set <code>enable.auto.commit=false</code>, btw. Also, check your consumer <code>isolation.level</code> setting since Kafka defaults to send transaction markers nowadays, which are &quot;empty records&quot; from a consumer perspective (<code>read_committed</code> is not the default)"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691452454,"post_id":76834912,"comment_id":135490847,"body_markdown":"Thank you @OneCricketeer for your help. First of all i done one big mistake - i wrote broker.id=1 in properties for kafka. I think it is the main mistake of work my consumer.  But now i see unstabil working of my consumer- sometimes it works well and sometimes it gets the empty records. Can it happened because i use this consumer for 3 different topic ? May be it has to work only one topic and for others i have to write another class ? Just now my kafka sent twice records to DEV_TELEGRAM topic and get records by consumer and the same time sent records to DEV_VIBER topic and get nothing((","body":"Thank you @OneCricketeer for your help. First of all i done one big mistake - i wrote broker.id=1 in properties for kafka. I think it is the main mistake of work my consumer.  But now i see unstabil working of my consumer- sometimes it works well and sometimes it gets the empty records. Can it happened because i use this consumer for 3 different topic ? May be it has to work only one topic and for others i have to write another class ? Just now my kafka sent twice records to DEV_TELEGRAM topic and get records by consumer and the same time sent records to DEV_VIBER topic and get nothing(("},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691453572,"post_id":76834912,"comment_id":135490939,"body_markdown":"@OneCricketeer, now my app works next : every 30 min start work thread , that check db   - are there any news for sending or not? If there are - then to begin work producer and sending records to broker. When it was finish - he closes. After producer closing to begin work consumer - creat 3 threads and in this threads consumers run and have to get the records. When consumers done to get records he close too and for next time they start to run after 30 min. The logic is so.","body":"@OneCricketeer, now my app works next : every 30 min start work thread , that check db   - are there any news for sending or not? If there are - then to begin work producer and sending records to broker. When it was finish - he closes. After producer closing to begin work consumer - creat 3 threads and in this threads consumers run and have to get the records. When consumers done to get records he close too and for next time they start to run after 30 min. The logic is so."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691454351,"post_id":76834912,"comment_id":135491000,"body_markdown":"I suggest creating a new post for any new issues you are seeing. Also, I would recommend using Debezium rather than having your app poll from any database","body":"I suggest creating a new post for any new issues you are seeing. Also, I would recommend using Debezium rather than having your app poll from any database"}],"answers":[{"tags":[],"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691579661,"creation_date":1691579661,"answer_id":76867229,"question_id":76834912,"body_markdown":"I am very grateful to @OneCricketeer for his time and support.\r\nThe reason of problem was in my kafka properties file. Some property or a group of them were disrupting normal work of kafka consumers.\r\nSo now i am using these properties of kafka : \r\n\r\n```\r\n# The location of the Kafka server\r\nbootstrap.servers=50-kafka-a:9092\r\n\r\n##### PRODUCER SETTINGS ######\r\n\r\n#to show how many confirmations have to get producer - in our case it is all\r\nacks=all\r\n# classes for serializing ...\r\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\r\nvalue.serializer=org.apache.kafka.common.serialization.StringSerializer\r\n\r\n\r\n##### CONSUMER SETTINGS ######\r\n\r\n#max size of messages which will be return after calling one call poll()\r\nmax.poll.records=500\r\n#it is need when the start offset is absent or if current offset is not exist more\r\nauto.offset.reset=latest\r\n# ... and deserializing messages\r\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\nvalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n```","title":"Why consumer of Kafka does not receive the records from broker","body":"<p>I am very grateful to @OneCricketeer for his time and support.\nThe reason of problem was in my kafka properties file. Some property or a group of them were disrupting normal work of kafka consumers.\nSo now i am using these properties of kafka :</p>\n<pre><code># The location of the Kafka server\nbootstrap.servers=50-kafka-a:9092\n\n##### PRODUCER SETTINGS ######\n\n#to show how many confirmations have to get producer - in our case it is all\nacks=all\n# classes for serializing ...\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\nvalue.serializer=org.apache.kafka.common.serialization.StringSerializer\n\n\n##### CONSUMER SETTINGS ######\n\n#max size of messages which will be return after calling one call poll()\nmax.poll.records=500\n#it is need when the start offset is absent or if current offset is not exist more\nauto.offset.reset=latest\n# ... and deserializing messages\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nvalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer\n</code></pre>\n"}],"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691579661,"creation_date":1691143497,"question_id":76834912,"body_markdown":"My consumer is not getting any records from topic. \r\nTopic is the same for consumer and producer. I can see my topic on the UI of broker.  \r\n\r\nFor consumer I also set the group.id the same as topic name.\r\nI can see in broker UI the messages sent by the producer, but the consumer can not get any records.  \r\n\r\nAnd my ConsumerRebalanceListner does not seem to be working. I can&#39;t see that it was called.  \r\n\r\nThis is my producer:\r\n\r\n```\r\npublic class BotKafkaProducer implements Runnable {\r\n\r\n    private BotLogger log;\r\n    private Set&lt;NewsLetter&gt; newsLetters;\r\n    private String topicName;\r\n    private Bot bot;\r\n    private News news;\r\n\r\n    @Setter\r\n    private NewsDao newsDao;\r\n    @Setter\r\n    private AtomicInteger sentNews;\r\n\r\n    private KafkaProducer&lt;String, String&gt; kafkaProducer;\r\n\r\n    public BotKafkaProducer(BotLogger log, Set&lt;NewsLetter&gt; newsLetters, String topicName,\r\n                            String pathPropKafka, Bot bot, News news) {\r\n        this.log = log;\r\n        this.newsLetters = newsLetters;\r\n        this.topicName = topicName;\r\n        this.bot = bot;\r\n        this.news = news;\r\n        try {\r\n            Properties props = PropertiesHelper.getProperties(pathPropKafka);\r\n            log.info(&quot;Success creating Properties for kafka producer.&quot;);\r\n            this.kafkaProducer = new KafkaProducer&lt;String, String&gt;(props);\r\n        } catch (Exception e){\r\n            log.error(&quot;Error creating Properties for kafka producer.&quot;);\r\n            log.error(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        log.info(&quot;producer start, queue name : &quot; + topicName);\r\n        try {\r\n            log.info(&quot;Success creating KafkaProducer .&quot;);\r\n            for (NewsLetter newsLetter : newsLetters) {\r\n                String value = new Gson().toJson(newsLetter);\r\n                ProducerRecord&lt;String, String&gt; producerRecord =\r\n                        new ProducerRecord&lt;&gt;(topicName, value);\r\n\r\n                kafkaProducer.send(producerRecord, (recordMetadata, e) -&gt; {\r\n                    // executes every time a record is successfully sent or an exception is thrown\r\n                    if (e == null) {\r\n                        // the record was successfully sent\r\n                        log.info(&quot;Received new metadata. \\n&quot; +\r\n                                &quot;Topic:&quot; + recordMetadata.topic() + &quot;\\n&quot; +\r\n                                &quot;Partition: &quot; + recordMetadata.partition() + &quot;\\n&quot; +\r\n                                &quot;Offset: &quot; + recordMetadata.offset() + &quot;\\n&quot; +\r\n                                &quot;Timestamp: &quot; + recordMetadata.timestamp());\r\n                    } else {\r\n                        log.error(&quot;Error while producing&quot; + e.getMessage());\r\n                    }\r\n                });\r\n                if(sentNews.get()%2000 == 0) {\r\n                    this.kafkaProducer.flush();\r\n                }\r\n                sentNews.getAndIncrement();\r\n            }\r\n            this.kafkaProducer.flush();\r\n            log.info(sentNews.get() + &quot; news letters committed.&quot;);\r\n            //update news\r\n            log.info(&quot;updating news status...&quot;);\r\n            news.setBotStatus(bot.toString(), false);\r\n            log.info(bot.toString() + &quot; set bot status &quot; + news.isBotStatus(bot.toString()));\r\n            newsDao.updateStatus(bot.toString(), news);\r\n            log.info(&quot;News status updated for &quot; + bot);\r\n        }catch (Exception e){\r\n            if(kafkaProducer != null)\r\n                this.kafkaProducer.close();\r\n        } finally {\r\n            if(kafkaProducer != null)\r\n                this.kafkaProducer.close(Duration.ofMillis(500));\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nthis is my consumer:\r\n\r\n```\r\npublic final class BotKafkaConsumer implements Runnable, ExceptionListener {\r\n\r\n    private final BotLogger log;\r\n    private final String topicName;\r\n\r\n    private FacebookSender facebookSender;\r\n\r\n    private TelegramSender telegramSender;\r\n\r\n    private ViberSender viberSender;\r\n\r\n    private volatile LocalTime startSendTime;\r\n    private volatile LocalTime endSendTime;\r\n    private AtomicInteger send;\r\n    private AtomicInteger notSend;\r\n    private AtomicInteger producerSent;\r\n    private LocalDateTime startProcess;\r\n\r\n    private KafkaConsumer&lt;String, String&gt; kafkaConsumer;\r\n\r\n    private BotKafkaConsumer(Bot bot, BotLogger log, String topicName, String pathPropKafka) {\r\n        this.log = log;\r\n        this.topicName = topicName;\r\n        Properties props;\r\n        try {\r\n            props = PropertiesHelper.getProperties(pathPropKafka);\r\n            props.setProperty(ConsumerConfig.GROUP_ID_CONFIG, &quot;group-id-&quot; + topicName);\r\n            log.info(&quot;Success creating Properties for kafka consumer.&quot;);\r\n            this.kafkaConsumer = new KafkaConsumer&lt;String, String&gt;(props);\r\n            this.startSendTime = bot.getStartSendTime();\r\n            this.endSendTime = bot.getEndSendTime();\r\n        } catch (Exception e){\r\n            log.error(&quot;Error creating Properties for kafka consumer.&quot;);\r\n            log.error(e.getMessage());\r\n        }\r\n    }\r\n\r\n    public BotKafkaConsumer(Bot bot, BotLogger log, String topicName, String pathPropKafka, Object sender,\r\n                            AtomicInteger send, AtomicInteger notSend, AtomicInteger producerSent, LocalDateTime startProcess){\r\n        this(bot, log, topicName, pathPropKafka);\r\n        this.send = send;\r\n        this.notSend = notSend;\r\n        this.producerSent = producerSent;\r\n        this.startProcess = startProcess;\r\n\r\n        if(sender instanceof FacebookSender)\r\n            this.facebookSender = (FacebookSender)sender;\r\n        if(sender instanceof TelegramSender)\r\n            this.telegramSender = (TelegramSender)sender;\r\n        if(sender instanceof ViberSender)\r\n            this.viberSender = (ViberSender)sender;\r\n    }\r\n\r\n    public LocalTime getStartSendTime() {\r\n        return startSendTime;\r\n    }\r\n\r\n    public LocalTime getEndSendTime() {\r\n        return endSendTime;\r\n    }\r\n\r\n    private boolean isNotTimeToSend() {\r\n        return ((startSendTime != null &amp;&amp; startSendTime.isAfter(LocalTime.now())) ||\r\n                (endSendTime != null &amp;&amp; endSendTime.isBefore(LocalTime.now())));\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        final Thread mainThread = Thread.currentThread();\r\n        // Registering a shutdown hook so we can exit cleanly\r\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\r\n            System.out.println(&quot;Starting exit...&quot;);\r\n            // Note that shutdownhook runs in a separate thread, so the only thing we can safely do to a consumer is wake it up\r\n            this.kafkaConsumer.wakeup();\r\n            try {\r\n                mainThread.join();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }));\r\n        try{\r\n            subscribeConsumer();\r\n            if (facebookSender != null) {\r\n                send(this.kafkaConsumer, facebookSender, log);\r\n            } else if (telegramSender != null) {\r\n                send(this.kafkaConsumer, telegramSender, log);\r\n            } else if (viberSender != null) {\r\n                send(this.kafkaConsumer, viberSender, log);\r\n            }\r\n        } catch (Exception e){\r\n            log.error(&quot;BotKafkaConsumer error : &quot; + e.getMessage());\r\n        } finally {\r\n            log.warn(&quot;BotKafkaConsumer closed .&quot;);\r\n            if(this.kafkaConsumer != null) {\r\n                this.kafkaConsumer.close(Duration.ofMillis(500));\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onException(JMSException e) {\r\n        log.error(&quot;consumer : &quot; + this.toString() + &quot; error : &quot; + e.getMessage());\r\n    }\r\n\r\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, TelegramSender telegramSender, BotLogger log) throws JMSException {\r\n        ConsumerRecords&lt;String, String&gt; records;\r\n        Gson gson = new Gson();\r\n        TelegramDto telegramBody = new TelegramDto();\r\n        // Creating inline Keyboard with one button\r\n        InlineKeyboard inlineKeyboard = null;\r\n\r\n        synchronized(this) {\r\n            while (true) {\r\n                records = consumer.poll(Duration.ofMillis(500));\r\n                records.partitions().forEach(tp -&gt; {\r\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; TP : &quot; + tp.partition());\r\n                });\r\n                for (ConsumerRecord&lt;String, String&gt; record : records) {\r\n                    NewsLetter newsLetter = getNewsLetter(record, gson);\r\n                    String id;\r\n                    News news;\r\n                    try {\r\n                        id = newsLetter.getUserId();\r\n                        news = newsLetter.getNews();\r\n                        String text = replaceForTelegram(news.getText());\r\n                        String buttonText = news.getButtonText();\r\n                        if (StringUtils.isNotBlank(buttonText)) {\r\n                            String buttonUrl = news.getButtonUrl();\r\n                            if (StringUtils.isNotBlank(buttonUrl)) {\r\n                                inlineKeyboard = new InlineKeyboard().addRow()\r\n                                        .addButton(0, new InlineKeyboardButton(buttonText).setUrl(buttonUrl));\r\n                                telegramBody.setReplyMarkup(inlineKeyboard);\r\n                            }\r\n                        }\r\n                        if (news.getImageUrl() != null) {\r\n                            String imageUrl = &quot;(&quot; + news.getImageUrl() + &quot;)&quot;;\r\n                            text = &quot;[\\u200B]&quot; + imageUrl + text;\r\n                        }\r\n                        telegramBody.setChatId(id)\r\n                                .setText(text)\r\n                                .setMessageType(TelegramSendType.SEND_MESSAGE);\r\n\r\n                        boolean result = telegramSender.sendMessage(telegramBody);\r\n                        processResult(result);\r\n                        log.info(&quot;send.get() + notSend.get()&quot; + (send.get() + notSend.get()) +\r\n                                &quot;    producerSent.get()&quot; + producerSent.get());\r\n                        if((send.get() + notSend.get()) &gt;= producerSent.get()) {\r\n                            break;\r\n                        }\r\n                    }catch (Exception e){\r\n                        log.error(e.getMessage());\r\n                    }\r\n                }\r\n                if (isNotTimeToSend()) {\r\n                    log.info(&quot;is not time to send is : &quot; + isNotTimeToSend());\r\n                    producerSent.set(0);\r\n                    break;\r\n                }\r\n                if((send.get() + notSend.get()) &gt;= producerSent.get()) {\r\n                    LocalDateTime endProcess = LocalDateTime.now();\r\n                    log.info(&quot;TELEGRAM PRODUCER TOTAL NEWS are sent : &quot; + producerSent.get() +\r\n                            &quot; by Producer: &quot; + topicName);\r\n                    log.info(&quot;TELEGRAM CONSUMER TOTAL NEWS are sent : &quot; + send + &quot;, TOTAL NOT sent : &quot; + notSend +\r\n                            &quot; by Consumer: &quot; + topicName);\r\n                    log.info(&quot;START consumerNews process : &quot; + startProcess.toString());\r\n                    log.info(&quot;END consumeNews process : &quot; + endProcess.toString());\r\n                    log.info(&quot;TOTAL TIME FOR SENDING : &quot; + ChronoUnit.MINUTES.between(startProcess, endProcess) +\r\n                            &quot; min &quot; + ChronoUnit.SECONDS.between(startProcess, endProcess) + &quot; sec &quot; +\r\n                            ChronoUnit.MILLIS.between(startProcess, endProcess) + &quot; ms&quot;);\r\n                    producerSent.set(0);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, ViberSender viberSender, BotLogger log) throws JMSException {\r\n        // some code of process\r\n    }\r\n\r\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, FacebookSender facebookSender, BotLogger log) throws JMSException {\r\n    // some code of process\r\n    }\r\n\r\n\r\n    private void subscribeConsumer() {\r\n//        this.kafkaConsumer.subscribe(Collections.singletonList(topicName));\r\n        this.kafkaConsumer.subscribe(Collections.singletonList(topicName), new ConsumerRebalanceListener() {\r\n            @Override\r\n            public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; collection) {\r\n                log.info(&quot;Revoke partitions : &quot; + formatPartitions(collection));\r\n            }\r\n\r\n            @Override\r\n            public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; collection) {\r\n                collection.forEach(tp -&gt; {\r\n                    long offset = kafkaConsumer.position(tp);\r\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; Partition : &quot; + tp.partition() +\r\n                            &quot; Offset : &quot; + offset);\r\n                });\r\n                kafkaConsumer.resume(collection);\r\n            }\r\n\r\n            @Override\r\n            public void onPartitionsLost(Collection&lt;TopicPartition&gt; collection){\r\n                collection.forEach(tp -&gt; {\r\n                    long offset = kafkaConsumer.position(tp);\r\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; Partition : &quot; + tp.partition() +\r\n                            &quot; Offset : &quot; + offset);\r\n                });\r\n                kafkaConsumer.resume(collection);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void processResult(boolean result){\r\n        if (result) {\r\n            send.getAndIncrement();\r\n        } else {\r\n            notSend.getAndIncrement();\r\n        }\r\n    }\r\n\r\n    private NewsLetter getNewsLetter(ConsumerRecord&lt;String, String&gt; record, Gson gson) throws JMSException {\r\n        String text = record.value();\r\n        return gson.fromJson(text, NewsLetter.class);\r\n    }\r\n\r\n    private String replaceForTelegram(String text) {\r\n        return text.replace(&quot;_&quot;, &quot;\\\\_&quot;)\r\n                .replace(&quot;`&quot;, &quot;\\\\`&quot;)\r\n                .replace(&quot;*&quot;, &quot;\\\\*&quot;);\r\n    }\r\n\r\n    private static List&lt;String&gt; formatPartitions(Collection&lt;TopicPartition&gt; partitions) {\r\n        return partitions.stream().map(topicPartition -&gt;\r\n                String.format(&quot;topic: %s, partition: %s&quot;, topicPartition.topic(), topicPartition.partition()))\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\n\r\nThis is the properties that I use for set up of broker, producer and consumer:\r\n```\r\n# The location of the Kafka server\r\nbootstrap.servers=50-kafka-a:9092\r\n#count of replicas of brokers\r\nreplication.factor=3\r\n#max size of message on broker side\r\n#max.message.bytes=10485880\r\n#replica.fetch.max.bytes=10485880\r\n#max size of message on consumer side\r\n#max.partition.fetch.bytes=10485880\r\nbroker.id=1\r\nzookeeper.connect=50-kafka-a:2181\r\n\r\n##### PRODUCER SETTINGS ######\r\n\r\n#to show how many confirmations have to get producer - in our case it is all\r\nacks=all\r\n#it means that two brokers which are async replicas include leader have to answer that they have data\r\n#min.insync.replicas=2\r\n#type of compression message on side of producer\r\ncompression.type=snappy\r\n#the count of retry for trying to send message\r\nretries=3\r\n#timeout of producer after that message will be failed\r\ndelivery.timeout.ms=120000\r\n#max size of message on the producer side\r\n#max.request.size=10485880\r\n# classes for serializing ...\r\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\r\nvalue.serializer=org.apache.kafka.common.serialization.StringSerializer\r\n\r\n\r\n##### CONSUMER SETTINGS ######\r\n\r\n#max size of messages which will be return after calling one call poll()\r\nmax.poll.records=1000\r\n# Make Kafka keep track of record reads by the consumer\r\nenable.auto.commit=true\r\n# The time in milliseconds to Kafka write the offset of the last message read\r\nauto.commit.interval.ms=500\r\n#it is need when the start offset is absent or if current offset is not exist more\r\nauto.offset.reset=earliest\r\n#auto.offset.reset=latest\r\n#max size of message on the consumer side\r\n#fetch.max.bytes=10485880\r\n# ... and deserializing messages\r\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\nvalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n```\r\n\r\nand dependency is: \r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n            &lt;version&gt;3.4.0&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"Why consumer of Kafka does not receive the records from broker","body":"<p>My consumer is not getting any records from topic.\nTopic is the same for consumer and producer. I can see my topic on the UI of broker.</p>\n<p>For consumer I also set the group.id the same as topic name.\nI can see in broker UI the messages sent by the producer, but the consumer can not get any records.</p>\n<p>And my ConsumerRebalanceListner does not seem to be working. I can't see that it was called.</p>\n<p>This is my producer:</p>\n<pre><code>public class BotKafkaProducer implements Runnable {\n\n    private BotLogger log;\n    private Set&lt;NewsLetter&gt; newsLetters;\n    private String topicName;\n    private Bot bot;\n    private News news;\n\n    @Setter\n    private NewsDao newsDao;\n    @Setter\n    private AtomicInteger sentNews;\n\n    private KafkaProducer&lt;String, String&gt; kafkaProducer;\n\n    public BotKafkaProducer(BotLogger log, Set&lt;NewsLetter&gt; newsLetters, String topicName,\n                            String pathPropKafka, Bot bot, News news) {\n        this.log = log;\n        this.newsLetters = newsLetters;\n        this.topicName = topicName;\n        this.bot = bot;\n        this.news = news;\n        try {\n            Properties props = PropertiesHelper.getProperties(pathPropKafka);\n            log.info(&quot;Success creating Properties for kafka producer.&quot;);\n            this.kafkaProducer = new KafkaProducer&lt;String, String&gt;(props);\n        } catch (Exception e){\n            log.error(&quot;Error creating Properties for kafka producer.&quot;);\n            log.error(e.getMessage());\n        }\n    }\n\n    @Override\n    public void run() {\n        log.info(&quot;producer start, queue name : &quot; + topicName);\n        try {\n            log.info(&quot;Success creating KafkaProducer .&quot;);\n            for (NewsLetter newsLetter : newsLetters) {\n                String value = new Gson().toJson(newsLetter);\n                ProducerRecord&lt;String, String&gt; producerRecord =\n                        new ProducerRecord&lt;&gt;(topicName, value);\n\n                kafkaProducer.send(producerRecord, (recordMetadata, e) -&gt; {\n                    // executes every time a record is successfully sent or an exception is thrown\n                    if (e == null) {\n                        // the record was successfully sent\n                        log.info(&quot;Received new metadata. \\n&quot; +\n                                &quot;Topic:&quot; + recordMetadata.topic() + &quot;\\n&quot; +\n                                &quot;Partition: &quot; + recordMetadata.partition() + &quot;\\n&quot; +\n                                &quot;Offset: &quot; + recordMetadata.offset() + &quot;\\n&quot; +\n                                &quot;Timestamp: &quot; + recordMetadata.timestamp());\n                    } else {\n                        log.error(&quot;Error while producing&quot; + e.getMessage());\n                    }\n                });\n                if(sentNews.get()%2000 == 0) {\n                    this.kafkaProducer.flush();\n                }\n                sentNews.getAndIncrement();\n            }\n            this.kafkaProducer.flush();\n            log.info(sentNews.get() + &quot; news letters committed.&quot;);\n            //update news\n            log.info(&quot;updating news status...&quot;);\n            news.setBotStatus(bot.toString(), false);\n            log.info(bot.toString() + &quot; set bot status &quot; + news.isBotStatus(bot.toString()));\n            newsDao.updateStatus(bot.toString(), news);\n            log.info(&quot;News status updated for &quot; + bot);\n        }catch (Exception e){\n            if(kafkaProducer != null)\n                this.kafkaProducer.close();\n        } finally {\n            if(kafkaProducer != null)\n                this.kafkaProducer.close(Duration.ofMillis(500));\n        }\n    }\n\n}\n</code></pre>\n<p>this is my consumer:</p>\n<pre><code>public final class BotKafkaConsumer implements Runnable, ExceptionListener {\n\n    private final BotLogger log;\n    private final String topicName;\n\n    private FacebookSender facebookSender;\n\n    private TelegramSender telegramSender;\n\n    private ViberSender viberSender;\n\n    private volatile LocalTime startSendTime;\n    private volatile LocalTime endSendTime;\n    private AtomicInteger send;\n    private AtomicInteger notSend;\n    private AtomicInteger producerSent;\n    private LocalDateTime startProcess;\n\n    private KafkaConsumer&lt;String, String&gt; kafkaConsumer;\n\n    private BotKafkaConsumer(Bot bot, BotLogger log, String topicName, String pathPropKafka) {\n        this.log = log;\n        this.topicName = topicName;\n        Properties props;\n        try {\n            props = PropertiesHelper.getProperties(pathPropKafka);\n            props.setProperty(ConsumerConfig.GROUP_ID_CONFIG, &quot;group-id-&quot; + topicName);\n            log.info(&quot;Success creating Properties for kafka consumer.&quot;);\n            this.kafkaConsumer = new KafkaConsumer&lt;String, String&gt;(props);\n            this.startSendTime = bot.getStartSendTime();\n            this.endSendTime = bot.getEndSendTime();\n        } catch (Exception e){\n            log.error(&quot;Error creating Properties for kafka consumer.&quot;);\n            log.error(e.getMessage());\n        }\n    }\n\n    public BotKafkaConsumer(Bot bot, BotLogger log, String topicName, String pathPropKafka, Object sender,\n                            AtomicInteger send, AtomicInteger notSend, AtomicInteger producerSent, LocalDateTime startProcess){\n        this(bot, log, topicName, pathPropKafka);\n        this.send = send;\n        this.notSend = notSend;\n        this.producerSent = producerSent;\n        this.startProcess = startProcess;\n\n        if(sender instanceof FacebookSender)\n            this.facebookSender = (FacebookSender)sender;\n        if(sender instanceof TelegramSender)\n            this.telegramSender = (TelegramSender)sender;\n        if(sender instanceof ViberSender)\n            this.viberSender = (ViberSender)sender;\n    }\n\n    public LocalTime getStartSendTime() {\n        return startSendTime;\n    }\n\n    public LocalTime getEndSendTime() {\n        return endSendTime;\n    }\n\n    private boolean isNotTimeToSend() {\n        return ((startSendTime != null &amp;&amp; startSendTime.isAfter(LocalTime.now())) ||\n                (endSendTime != null &amp;&amp; endSendTime.isBefore(LocalTime.now())));\n    }\n\n    @Override\n    public void run() {\n        final Thread mainThread = Thread.currentThread();\n        // Registering a shutdown hook so we can exit cleanly\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\n            System.out.println(&quot;Starting exit...&quot;);\n            // Note that shutdownhook runs in a separate thread, so the only thing we can safely do to a consumer is wake it up\n            this.kafkaConsumer.wakeup();\n            try {\n                mainThread.join();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }));\n        try{\n            subscribeConsumer();\n            if (facebookSender != null) {\n                send(this.kafkaConsumer, facebookSender, log);\n            } else if (telegramSender != null) {\n                send(this.kafkaConsumer, telegramSender, log);\n            } else if (viberSender != null) {\n                send(this.kafkaConsumer, viberSender, log);\n            }\n        } catch (Exception e){\n            log.error(&quot;BotKafkaConsumer error : &quot; + e.getMessage());\n        } finally {\n            log.warn(&quot;BotKafkaConsumer closed .&quot;);\n            if(this.kafkaConsumer != null) {\n                this.kafkaConsumer.close(Duration.ofMillis(500));\n            }\n        }\n    }\n\n    @Override\n    public void onException(JMSException e) {\n        log.error(&quot;consumer : &quot; + this.toString() + &quot; error : &quot; + e.getMessage());\n    }\n\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, TelegramSender telegramSender, BotLogger log) throws JMSException {\n        ConsumerRecords&lt;String, String&gt; records;\n        Gson gson = new Gson();\n        TelegramDto telegramBody = new TelegramDto();\n        // Creating inline Keyboard with one button\n        InlineKeyboard inlineKeyboard = null;\n\n        synchronized(this) {\n            while (true) {\n                records = consumer.poll(Duration.ofMillis(500));\n                records.partitions().forEach(tp -&gt; {\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; TP : &quot; + tp.partition());\n                });\n                for (ConsumerRecord&lt;String, String&gt; record : records) {\n                    NewsLetter newsLetter = getNewsLetter(record, gson);\n                    String id;\n                    News news;\n                    try {\n                        id = newsLetter.getUserId();\n                        news = newsLetter.getNews();\n                        String text = replaceForTelegram(news.getText());\n                        String buttonText = news.getButtonText();\n                        if (StringUtils.isNotBlank(buttonText)) {\n                            String buttonUrl = news.getButtonUrl();\n                            if (StringUtils.isNotBlank(buttonUrl)) {\n                                inlineKeyboard = new InlineKeyboard().addRow()\n                                        .addButton(0, new InlineKeyboardButton(buttonText).setUrl(buttonUrl));\n                                telegramBody.setReplyMarkup(inlineKeyboard);\n                            }\n                        }\n                        if (news.getImageUrl() != null) {\n                            String imageUrl = &quot;(&quot; + news.getImageUrl() + &quot;)&quot;;\n                            text = &quot;[\\u200B]&quot; + imageUrl + text;\n                        }\n                        telegramBody.setChatId(id)\n                                .setText(text)\n                                .setMessageType(TelegramSendType.SEND_MESSAGE);\n\n                        boolean result = telegramSender.sendMessage(telegramBody);\n                        processResult(result);\n                        log.info(&quot;send.get() + notSend.get()&quot; + (send.get() + notSend.get()) +\n                                &quot;    producerSent.get()&quot; + producerSent.get());\n                        if((send.get() + notSend.get()) &gt;= producerSent.get()) {\n                            break;\n                        }\n                    }catch (Exception e){\n                        log.error(e.getMessage());\n                    }\n                }\n                if (isNotTimeToSend()) {\n                    log.info(&quot;is not time to send is : &quot; + isNotTimeToSend());\n                    producerSent.set(0);\n                    break;\n                }\n                if((send.get() + notSend.get()) &gt;= producerSent.get()) {\n                    LocalDateTime endProcess = LocalDateTime.now();\n                    log.info(&quot;TELEGRAM PRODUCER TOTAL NEWS are sent : &quot; + producerSent.get() +\n                            &quot; by Producer: &quot; + topicName);\n                    log.info(&quot;TELEGRAM CONSUMER TOTAL NEWS are sent : &quot; + send + &quot;, TOTAL NOT sent : &quot; + notSend +\n                            &quot; by Consumer: &quot; + topicName);\n                    log.info(&quot;START consumerNews process : &quot; + startProcess.toString());\n                    log.info(&quot;END consumeNews process : &quot; + endProcess.toString());\n                    log.info(&quot;TOTAL TIME FOR SENDING : &quot; + ChronoUnit.MINUTES.between(startProcess, endProcess) +\n                            &quot; min &quot; + ChronoUnit.SECONDS.between(startProcess, endProcess) + &quot; sec &quot; +\n                            ChronoUnit.MILLIS.between(startProcess, endProcess) + &quot; ms&quot;);\n                    producerSent.set(0);\n                    break;\n                }\n            }\n        }\n    }\n\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, ViberSender viberSender, BotLogger log) throws JMSException {\n        // some code of process\n    }\n\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, FacebookSender facebookSender, BotLogger log) throws JMSException {\n    // some code of process\n    }\n\n\n    private void subscribeConsumer() {\n//        this.kafkaConsumer.subscribe(Collections.singletonList(topicName));\n        this.kafkaConsumer.subscribe(Collections.singletonList(topicName), new ConsumerRebalanceListener() {\n            @Override\n            public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; collection) {\n                log.info(&quot;Revoke partitions : &quot; + formatPartitions(collection));\n            }\n\n            @Override\n            public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; collection) {\n                collection.forEach(tp -&gt; {\n                    long offset = kafkaConsumer.position(tp);\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; Partition : &quot; + tp.partition() +\n                            &quot; Offset : &quot; + offset);\n                });\n                kafkaConsumer.resume(collection);\n            }\n\n            @Override\n            public void onPartitionsLost(Collection&lt;TopicPartition&gt; collection){\n                collection.forEach(tp -&gt; {\n                    long offset = kafkaConsumer.position(tp);\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; Partition : &quot; + tp.partition() +\n                            &quot; Offset : &quot; + offset);\n                });\n                kafkaConsumer.resume(collection);\n            }\n        });\n    }\n\n    private void processResult(boolean result){\n        if (result) {\n            send.getAndIncrement();\n        } else {\n            notSend.getAndIncrement();\n        }\n    }\n\n    private NewsLetter getNewsLetter(ConsumerRecord&lt;String, String&gt; record, Gson gson) throws JMSException {\n        String text = record.value();\n        return gson.fromJson(text, NewsLetter.class);\n    }\n\n    private String replaceForTelegram(String text) {\n        return text.replace(&quot;_&quot;, &quot;\\\\_&quot;)\n                .replace(&quot;`&quot;, &quot;\\\\`&quot;)\n                .replace(&quot;*&quot;, &quot;\\\\*&quot;);\n    }\n\n    private static List&lt;String&gt; formatPartitions(Collection&lt;TopicPartition&gt; partitions) {\n        return partitions.stream().map(topicPartition -&gt;\n                String.format(&quot;topic: %s, partition: %s&quot;, topicPartition.topic(), topicPartition.partition()))\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>This is the properties that I use for set up of broker, producer and consumer:</p>\n<pre><code># The location of the Kafka server\nbootstrap.servers=50-kafka-a:9092\n#count of replicas of brokers\nreplication.factor=3\n#max size of message on broker side\n#max.message.bytes=10485880\n#replica.fetch.max.bytes=10485880\n#max size of message on consumer side\n#max.partition.fetch.bytes=10485880\nbroker.id=1\nzookeeper.connect=50-kafka-a:2181\n\n##### PRODUCER SETTINGS ######\n\n#to show how many confirmations have to get producer - in our case it is all\nacks=all\n#it means that two brokers which are async replicas include leader have to answer that they have data\n#min.insync.replicas=2\n#type of compression message on side of producer\ncompression.type=snappy\n#the count of retry for trying to send message\nretries=3\n#timeout of producer after that message will be failed\ndelivery.timeout.ms=120000\n#max size of message on the producer side\n#max.request.size=10485880\n# classes for serializing ...\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\nvalue.serializer=org.apache.kafka.common.serialization.StringSerializer\n\n\n##### CONSUMER SETTINGS ######\n\n#max size of messages which will be return after calling one call poll()\nmax.poll.records=1000\n# Make Kafka keep track of record reads by the consumer\nenable.auto.commit=true\n# The time in milliseconds to Kafka write the offset of the last message read\nauto.commit.interval.ms=500\n#it is need when the start offset is absent or if current offset is not exist more\nauto.offset.reset=earliest\n#auto.offset.reset=latest\n#max size of message on the consumer side\n#fetch.max.bytes=10485880\n# ... and deserializing messages\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nvalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer\n</code></pre>\n<p>and dependency is:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n            &lt;version&gt;3.4.0&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","filewriter"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691431727,"post_id":76854056,"comment_id":135487936,"body_markdown":"What exactaly you want to know?","body":"What exactaly you want to know?"},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691431982,"post_id":76854056,"comment_id":135487977,"body_markdown":"the code does not work since i still get the error file not found so i am assuming my code is wrong","body":"the code does not work since i still get the error file not found so i am assuming my code is wrong"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691432472,"post_id":76854056,"comment_id":135488075,"body_markdown":"I tested with Java 8 and it works. What Java version are you using?","body":"I tested with Java 8 and it works. What Java version are you using?"},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691433709,"post_id":76854056,"comment_id":135488294,"body_markdown":"I typed java -version on cmd and i got openjdk version &quot;17.0.8&quot; 2023-07-18\nOpenJDK Runtime Environment Temurin-17.0.8+7 (build 17.0.8+7)\nOpenJDK 64-Bit Server VM Temurin-17.0.8+7 (build 17.0.8+7, mixed mode, sharing).","body":"I typed java -version on cmd and i got openjdk version &quot;17.0.8&quot; 2023-07-18 OpenJDK Runtime Environment Temurin-17.0.8+7 (build 17.0.8+7) OpenJDK 64-Bit Server VM Temurin-17.0.8+7 (build 17.0.8+7, mixed mode, sharing)."},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691433735,"post_id":76854056,"comment_id":135488300,"body_markdown":"I used intellij maven","body":"I used intellij maven"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":2,"creation_date":1691435130,"post_id":76854056,"comment_id":135488537,"body_markdown":"You are missing a closing curly brace `}` after `myWriter.close();`","body":"You are missing a closing curly brace <code>}</code> after <code>myWriter.close();</code>"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691435707,"post_id":76854056,"comment_id":135488653,"body_markdown":"Do you checked the `filePath`?","body":"Do you checked the <code>filePath</code>?"},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691435780,"post_id":76854056,"comment_id":135488665,"body_markdown":"yep i printed filePath and seems right but when it is in new file(filePath) it still does not work","body":"yep i printed filePath and seems right but when it is in new file(filePath) it still does not work"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1691580868,"post_id":76854056,"comment_id":135510229,"body_markdown":"Btw there&#39;s no need to use StringBuilder unless you&#39;re in a loop. Just use `+` on Strings or better still see g00se&#39;s answer.","body":"Btw there&#39;s no need to use StringBuilder unless you&#39;re in a loop. Just use <code>+</code> on Strings or better still see g00se&#39;s answer."}],"answers":[{"tags":[],"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691437505,"creation_date":1691433997,"answer_id":76854426,"question_id":76854056,"body_markdown":"You are missing one bracket in your code example, but this code does work. \r\n\r\n```java\r\ntry {\r\n\tString desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;\r\n\tString filePath = desktopPath + File.separator + &quot;unSorted.txt&quot;;\r\n\r\n\tFile myFile = new File(filePath);\r\n\tif (myFile.createNewFile()) {\r\n\t\tFileWriter myWriter = new FileWriter(filePath);\r\n\t\tRandom rand = new Random();\r\n\t\tfor (int i = 0; i &lt; 500; i++) {\r\n\t\t\tint random = rand.nextInt(1000) + 1;\r\n\t\t\tmyWriter.write(random + System.lineSeparator());\r\n\t\t}\r\n\t\tmyWriter.close();\r\n\t} // missing bracket\r\n\r\n} catch (IOException e) {\r\n\tSystem.err.println(&quot;An error occurred. Please try again.&quot;);\r\n\te.printStackTrace();\r\n}\r\n```\r\n\r\nThe first time you run it you will create a new file at the filepath specified.  The second time you run the code it will detect the file is present and exit out of the if block.  If you are having issues executing please include the error and stacktrace.  If you are not happy with how the code functions, please ask more questions.","title":"How to get file path of desktop and implement on filewriter?","body":"<p>You are missing one bracket in your code example, but this code does work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    String desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;\n    String filePath = desktopPath + File.separator + &quot;unSorted.txt&quot;;\n\n    File myFile = new File(filePath);\n    if (myFile.createNewFile()) {\n        FileWriter myWriter = new FileWriter(filePath);\n        Random rand = new Random();\n        for (int i = 0; i &lt; 500; i++) {\n            int random = rand.nextInt(1000) + 1;\n            myWriter.write(random + System.lineSeparator());\n        }\n        myWriter.close();\n    } // missing bracket\n\n} catch (IOException e) {\n    System.err.println(&quot;An error occurred. Please try again.&quot;);\n    e.printStackTrace();\n}\n</code></pre>\n<p>The first time you run it you will create a new file at the filepath specified.  The second time you run the code it will detect the file is present and exit out of the if block.  If you are having issues executing please include the error and stacktrace.  If you are not happy with how the code functions, please ask more questions.</p>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691443464,"creation_date":1691443464,"answer_id":76855252,"question_id":76854056,"body_markdown":"You can tighten that up somewhat and also make it simpler. This will produce a new file if it exists or create one from scratch if the numbers file is absent:\r\n\r\n```\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Files;\r\nimport java.util.Random;\r\nimport java.io.PrintWriter;\r\n\r\npublic class RandomWriter {\r\n    public static void main(String[] args) throws Exception {\r\n        Path p = Path.of(\r\n                System.getProperty(&quot;user.home&quot;),\r\n                &quot;Desktop&quot;,\r\n                &quot;unSorted.txt&quot;);\r\n        Random rand = new Random();\r\n        try (PrintWriter out = new PrintWriter(Files.newBufferedWriter(p))) {\r\n            for (int i = 0; i &lt; 500; i++) {\r\n                out.println(rand.nextInt(1000) + 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"How to get file path of desktop and implement on filewriter?","body":"<p>You can tighten that up somewhat and also make it simpler. This will produce a new file if it exists or create one from scratch if the numbers file is absent:</p>\n<pre><code>import java.nio.file.Path;\nimport java.nio.file.Files;\nimport java.util.Random;\nimport java.io.PrintWriter;\n\npublic class RandomWriter {\n    public static void main(String[] args) throws Exception {\n        Path p = Path.of(\n                System.getProperty(&quot;user.home&quot;),\n                &quot;Desktop&quot;,\n                &quot;unSorted.txt&quot;);\n        Random rand = new Random();\n        try (PrintWriter out = new PrintWriter(Files.newBufferedWriter(p))) {\n            for (int i = 0; i &lt; 500; i++) {\n                out.println(rand.nextInt(1000) + 1);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691579406,"creation_date":1691579406,"answer_id":76867196,"question_id":76854056,"body_markdown":"Print the location of the file being generated and copy and paste that file path location on your file explorer and the rest is common sense.\r\n","title":"How to get file path of desktop and implement on filewriter?","body":"<p>Print the location of the file being generated and copy and paste that file path location on your file explorer and the rest is common sense.</p>\n"}],"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1691579406,"creation_date":1691430501,"question_id":76854056,"body_markdown":"In short what I am trying to do is create a file which is called unSorted.txt and then put random number in it but I want the file to be saved in the desktop. I get an error that says file not found everytime i try to implement filepath(please see code for more reference) in the filewriter.\r\n\r\n```java\r\ntry {\r\n\tString desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;\r\n\tString filePath = desktopPath + File.separator + &quot;unSorted.txt&quot;;\r\n\r\n\tFile myFile = new File(filePath);\r\n\tif (myFile.createNewFile()) {\r\n\t\tFileWriter myWriter = new FileWriter(filePath);\r\n\t\tRandom rand = new Random();\r\n\t\tfor (int i = 0; i &lt; 500; i++) {\r\n\t\t\tint random = rand.nextInt(1000) + 1;\r\n\t\t\tmyWriter.write(random + System.lineSeparator());\r\n\t\t}\r\n\t\tmyWriter.close();\r\n\t}\r\n\r\n} catch (IOException e) {\r\n\tSystem.err.println(&quot;An error occurred. Please try again.&quot;);\r\n\te.printStackTrace();\r\n}\r\n```\r\n\r\n\r\nAs you can see from the code, I have implemented File myFile = myFile since the error i get from filewriter is file not found so i decided to create the file first \r\n\r\nHere is the error that i am getting:\r\n````\r\n    An error occurred. Please try again.\r\njava.io.IOException: The system cannot find the path specified\r\n\tat java.base/java.io.WinNTFileSystem.createFileExclusively0(Native Method)\r\n\tat java.base/java.io.WinNTFileSystem.createFileExclusively(WinNTFileSystem.java:645)\r\n\tat java.base/java.io.File.createNewFile(File.java:1045)\r\n\tat AlgorithmUI.generateUnsortedClicked(AlgorithmUI.java:125)\r\n\tat AlgorithmUI$3.actionPerformed(AlgorithmUI.java:91)\r\n\tat java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\r\n\tat java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)\r\n\tat java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)\r\n\tat java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n\tat java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n\tat java.desktop/java.awt.Component.processMouseEvent(Component.java:6620)\r\n\tat java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3398)\r\n\tat java.desktop/java.awt.Component.processEvent(Component.java:6385)\r\n\tat java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n\tat java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4995)\r\n\tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n\tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\r\n\tat java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\r\n\tat java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\r\n\tat java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\r\n\tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\r\n\tat java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n\tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)\r\n\tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\r\n\tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n\r\n`````\r\n\r\nI have added the full code which may help us better understand the problem.\r\n\r\n`````\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.*;\r\nimport java.util.Random;\r\n\r\npublic class AlgorithmUI {\r\n    private JButton bSort;\r\n    private JPanel panel;\r\n    private JFrame frame;\r\n\r\n    public AlgorithmUI() {\r\n        frame = new JFrame(&quot;Algorithm&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(500, 500);\r\n\r\n        bSort = new JButton(&quot;Sort&quot;);\r\n        JButton bSearch = new JButton(&quot;Search&quot;);\r\n\r\n        Dimension buttonSize = new Dimension(120, 50);\r\n        bSort.setPreferredSize(buttonSize);\r\n        bSearch.setPreferredSize(buttonSize);\r\n\r\n        GridBagConstraints gbc = new GridBagConstraints();\r\n        gbc.gridx = 0;\r\n        gbc.gridy = 0;\r\n        gbc.insets = new Insets(10, 10, 10, 10);\r\n        gbc.anchor = GridBagConstraints.CENTER;\r\n\r\n        panel = new JPanel(new GridBagLayout());\r\n        panel.add(bSort, gbc);\r\n        gbc.gridy = 1;\r\n        panel.add(bSearch, gbc);\r\n\r\n        frame.getContentPane().add(panel);\r\n\r\n        frame.setVisible(true);\r\n\r\n        // Event listeners\r\n        bSort.addActionListener(e -&gt; clickedSort());\r\n    }\r\n\r\n    private void removeContent() {\r\n        panel.removeAll();\r\n        panel.revalidate();\r\n        panel.repaint();\r\n    }\r\n\r\n    private void clickedSort() {\r\n        removeContent();\r\n\r\n        JButton openFile = new JButton(&quot;Open unSorted File&quot;);\r\n        JButton generateUnsorted = new JButton(&quot;Generate Unsorted Numbers&quot;);\r\n\r\n        GridBagConstraints newgbc = new GridBagConstraints();\r\n        newgbc.gridx = 0;\r\n        newgbc.gridy = 0;\r\n        newgbc.insets = new Insets(10, 10, 10, 10);\r\n        newgbc.anchor = GridBagConstraints.CENTER;\r\n\r\n        panel.setLayout(new GridBagLayout());\r\n        panel.add(openFile, newgbc);\r\n        newgbc.gridy = 1;\r\n        panel.add(generateUnsorted, newgbc);\r\n\r\n        panel.revalidate();\r\n        panel.repaint();\r\n\r\n        openFile.addActionListener(e -&gt; openFileClicked());\r\n        generateUnsorted.addActionListener(e -&gt; generateUnsortedClicked());\r\n    }\r\n\r\n    private void openFileClicked() {\r\n        JFileChooser fileChooser = new JFileChooser();\r\n        int choice = fileChooser.showOpenDialog(panel);\r\n        try {\r\n            if (choice == JFileChooser.APPROVE_OPTION) {\r\n                File selectedFile = fileChooser.getSelectedFile();\r\n\r\n                try (BufferedReader reader = new BufferedReader(new FileReader(selectedFile))) {\r\n                    String line;\r\n                    while ((line = reader.readLine()) != null) {\r\n                        System.out.println(line);\r\n                    }\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void generateUnsortedClicked() {\r\n        try {\r\n            StringBuilder sb = new StringBuilder();\r\n            sb.append(System.getProperty(&quot;user.home&quot;))\r\n                    .append(File.separator)\r\n                    .append(&quot;Desktop&quot;)\r\n                    .append(File.separator)\r\n                    .append(&quot;unSorted.txt&quot;);\r\n\r\n            String filePath = sb.toString();\r\n            System.out.println(&quot;Generated file path: &quot; + filePath);\r\n\r\n            File myFile = new File(filePath);\r\n            System.out.println(myFile.getPath());\r\n            if (myFile.createNewFile()) {\r\n                FileWriter myWriter = new FileWriter(filePath);\r\n                Random rand = new Random();\r\n                for (int i = 0; i &lt; 500; i++) {\r\n                    int random = rand.nextInt(1000) + 1;\r\n                    myWriter.write(random + System.lineSeparator());\r\n                }\r\n\r\n\r\n                JOptionPane.showMessageDialog(null, &quot;Generated 500 unsorted integers. Please check your desktop for the file.&quot;);\r\n            } else {\r\n                JOptionPane.showMessageDialog(null, &quot;File already exists. Please delete or rename the existing file before generating a new one.&quot;);\r\n            }\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;An error occurred. Please try again.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n        public static void main (String[]args){\r\n            SwingUtilities.invokeLater(AlgorithmUI::new);\r\n        }\r\n    }\r\n`````\r\n","title":"How to get file path of desktop and implement on filewriter?","body":"<p>In short what I am trying to do is create a file which is called unSorted.txt and then put random number in it but I want the file to be saved in the desktop. I get an error that says file not found everytime i try to implement filepath(please see code for more reference) in the filewriter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    String desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;\n    String filePath = desktopPath + File.separator + &quot;unSorted.txt&quot;;\n\n    File myFile = new File(filePath);\n    if (myFile.createNewFile()) {\n        FileWriter myWriter = new FileWriter(filePath);\n        Random rand = new Random();\n        for (int i = 0; i &lt; 500; i++) {\n            int random = rand.nextInt(1000) + 1;\n            myWriter.write(random + System.lineSeparator());\n        }\n        myWriter.close();\n    }\n\n} catch (IOException e) {\n    System.err.println(&quot;An error occurred. Please try again.&quot;);\n    e.printStackTrace();\n}\n</code></pre>\n<p>As you can see from the code, I have implemented File myFile = myFile since the error i get from filewriter is file not found so i decided to create the file first</p>\n<p>Here is the error that i am getting:</p>\n<pre><code>    An error occurred. Please try again.\njava.io.IOException: The system cannot find the path specified\n    at java.base/java.io.WinNTFileSystem.createFileExclusively0(Native Method)\n    at java.base/java.io.WinNTFileSystem.createFileExclusively(WinNTFileSystem.java:645)\n    at java.base/java.io.File.createNewFile(File.java:1045)\n    at AlgorithmUI.generateUnsortedClicked(AlgorithmUI.java:125)\n    at AlgorithmUI$3.actionPerformed(AlgorithmUI.java:91)\n    at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\n    at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)\n    at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)\n    at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\n    at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\n    at java.desktop/java.awt.Component.processMouseEvent(Component.java:6620)\n    at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3398)\n    at java.desktop/java.awt.Component.processEvent(Component.java:6385)\n    at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n    at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4995)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\n    at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\n    at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\n    at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\n    at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n\n</code></pre>\n<p>I have added the full code which may help us better understand the problem.</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.*;\nimport java.util.Random;\n\npublic class AlgorithmUI {\n    private JButton bSort;\n    private JPanel panel;\n    private JFrame frame;\n\n    public AlgorithmUI() {\n        frame = new JFrame(&quot;Algorithm&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(500, 500);\n\n        bSort = new JButton(&quot;Sort&quot;);\n        JButton bSearch = new JButton(&quot;Search&quot;);\n\n        Dimension buttonSize = new Dimension(120, 50);\n        bSort.setPreferredSize(buttonSize);\n        bSearch.setPreferredSize(buttonSize);\n\n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        gbc.insets = new Insets(10, 10, 10, 10);\n        gbc.anchor = GridBagConstraints.CENTER;\n\n        panel = new JPanel(new GridBagLayout());\n        panel.add(bSort, gbc);\n        gbc.gridy = 1;\n        panel.add(bSearch, gbc);\n\n        frame.getContentPane().add(panel);\n\n        frame.setVisible(true);\n\n        // Event listeners\n        bSort.addActionListener(e -&gt; clickedSort());\n    }\n\n    private void removeContent() {\n        panel.removeAll();\n        panel.revalidate();\n        panel.repaint();\n    }\n\n    private void clickedSort() {\n        removeContent();\n\n        JButton openFile = new JButton(&quot;Open unSorted File&quot;);\n        JButton generateUnsorted = new JButton(&quot;Generate Unsorted Numbers&quot;);\n\n        GridBagConstraints newgbc = new GridBagConstraints();\n        newgbc.gridx = 0;\n        newgbc.gridy = 0;\n        newgbc.insets = new Insets(10, 10, 10, 10);\n        newgbc.anchor = GridBagConstraints.CENTER;\n\n        panel.setLayout(new GridBagLayout());\n        panel.add(openFile, newgbc);\n        newgbc.gridy = 1;\n        panel.add(generateUnsorted, newgbc);\n\n        panel.revalidate();\n        panel.repaint();\n\n        openFile.addActionListener(e -&gt; openFileClicked());\n        generateUnsorted.addActionListener(e -&gt; generateUnsortedClicked());\n    }\n\n    private void openFileClicked() {\n        JFileChooser fileChooser = new JFileChooser();\n        int choice = fileChooser.showOpenDialog(panel);\n        try {\n            if (choice == JFileChooser.APPROVE_OPTION) {\n                File selectedFile = fileChooser.getSelectedFile();\n\n                try (BufferedReader reader = new BufferedReader(new FileReader(selectedFile))) {\n                    String line;\n                    while ((line = reader.readLine()) != null) {\n                        System.out.println(line);\n                    }\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void generateUnsortedClicked() {\n        try {\n            StringBuilder sb = new StringBuilder();\n            sb.append(System.getProperty(&quot;user.home&quot;))\n                    .append(File.separator)\n                    .append(&quot;Desktop&quot;)\n                    .append(File.separator)\n                    .append(&quot;unSorted.txt&quot;);\n\n            String filePath = sb.toString();\n            System.out.println(&quot;Generated file path: &quot; + filePath);\n\n            File myFile = new File(filePath);\n            System.out.println(myFile.getPath());\n            if (myFile.createNewFile()) {\n                FileWriter myWriter = new FileWriter(filePath);\n                Random rand = new Random();\n                for (int i = 0; i &lt; 500; i++) {\n                    int random = rand.nextInt(1000) + 1;\n                    myWriter.write(random + System.lineSeparator());\n                }\n\n\n                JOptionPane.showMessageDialog(null, &quot;Generated 500 unsorted integers. Please check your desktop for the file.&quot;);\n            } else {\n                JOptionPane.showMessageDialog(null, &quot;File already exists. Please delete or rename the existing file before generating a new one.&quot;);\n            }\n        } catch (IOException e) {\n            System.err.println(&quot;An error occurred. Please try again.&quot;);\n            e.printStackTrace();\n        }\n\n    }\n        public static void main (String[]args){\n            SwingUtilities.invokeLater(AlgorithmUI::new);\n        }\n    }\n</code></pre>\n"},{"tags":["java","jdbc","derby"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1691575123,"post_id":76866286,"comment_id":135509075,"body_markdown":"Are you sure your database is called `AnimeFigurineCollection [wimmy on WIMMY]`, and not for example `AnimeFigurineCollection`?","body":"Are you sure your database is called <code>AnimeFigurineCollection [wimmy on WIMMY]</code>, and not for example <code>AnimeFigurineCollection</code>?"},{"owner":{"account_id":29182650,"reputation":1,"user_id":22356459,"display_name":"nick lester"},"score":0,"creation_date":1691577059,"post_id":76866286,"comment_id":135509481,"body_markdown":"is there a difference if the [wimmy on WIMMY] is there or not, im sorry im new in database i still dont know my way around database","body":"is there a difference if the [wimmy on WIMMY] is there or not, im sorry im new in database i still dont know my way around database"}],"answers":[{"tags":[],"owner":{"account_id":17799132,"reputation":1,"user_id":13203237,"display_name":"Magno Dev"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1691579376,"creation_date":1691579376,"answer_id":76867188,"question_id":76866286,"body_markdown":"Check if you have created a database named `AnimeFigurineCollection`","title":"How to fix &quot;java.sql.SQLNonTransientConnectionException: The connection was refused because the database AnimeFigurineCollection was not found. &quot;","body":"<p>Check if you have created a database named <code>AnimeFigurineCollection</code></p>\n"}],"owner":{"account_id":29182650,"reputation":1,"user_id":22356459,"display_name":"nick lester"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691579376,"creation_date":1691572789,"question_id":76866286,"body_markdown":"How can I fix this? This is my code so far\r\n\r\n\r\n```\r\npackage case_study_3;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport javax.swing.JOptionPane;\r\n\r\npublic class CollectionRepository {\r\n    PreparedStatement ps;\r\n    ResultSet rs;\r\n    Connection conn;\r\n\r\n    public CollectionRepository() {\r\n    \r\n    try {\r\n        dbconn();\r\n    } catch (SQLException ex) {\r\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    } catch (ClassNotFoundException ex) {\r\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    }\r\n    try {\r\n        conn.createStatement();\r\n    } catch (SQLException ex) {\r\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    }\r\n    \r\n    }\r\n\r\n   public void dbconn() throws SQLException, ClassNotFoundException {\r\n    String url = &quot;jdbc:derby://localhost:1527/AnimeFigurineCollection [wimmy on WIMMY]&quot;;\r\n    String driver = &quot;org.apache.derby.jdbc.ClientDriver&quot;;\r\n    Class.forName(driver);\r\n    conn = DriverManager.getConnection(url,&quot;wimmy&quot;,&quot;1231&quot;);\r\n\r\n    }//end db conn\r\n    \r\n    public List&lt;Collection&gt; getAllProduct(){\r\n        List&lt;Collection&gt; col = new ArrayList&lt;&gt;();\r\n        \r\n        String queryStr = &quot;Select * From ALBUM&quot;;\r\n    try {\r\n        ps = conn.prepareStatement(queryStr);\r\n        rs = ps.executeQuery();\r\n        while(rs.next()){\r\n            Collection collect = new Collection(rs.getString(&quot;code&quot;),\r\n                    rs.getInt(&quot;registrationNumber&quot;),\r\n                    rs.getInt(&quot;barcode&quot;),\r\n                    rs.getString(&quot;maincharName&quot;),\r\n                    rs.getString(&quot;title&quot;),\r\n                    rs.getString(&quot;version&quot;),\r\n                    rs.getString(&quot;type&quot;));\r\n            col.add(collect);\r\n        }\r\n    } catch (SQLException ex) {\r\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    \r\n    \r\n    }    \r\n    return col;\r\n    \r\n}//end getall\r\n\r\n```\r\nAlso when I add my derbyclient.jar this appears:\r\n\r\n&gt; java.sql.SQLNonTransientConnectionException: The connection was refused because the database AnimeFigurineCollection [wimmy on WIMMY] was not found. &quot;&quot;ERROR 08004: The connection was refused because the database AnimeFigurineCollection [wimmy on WIMMY] was not found.&quot; \r\n\r\nIf I remove it, those two disappears also.","title":"How to fix &quot;java.sql.SQLNonTransientConnectionException: The connection was refused because the database AnimeFigurineCollection was not found. &quot;","body":"<p>How can I fix this? This is my code so far</p>\n<pre><code>package case_study_3;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JOptionPane;\n\npublic class CollectionRepository {\n    PreparedStatement ps;\n    ResultSet rs;\n    Connection conn;\n\n    public CollectionRepository() {\n    \n    try {\n        dbconn();\n    } catch (SQLException ex) {\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    } catch (ClassNotFoundException ex) {\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    }\n    try {\n        conn.createStatement();\n    } catch (SQLException ex) {\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    }\n    \n    }\n\n   public void dbconn() throws SQLException, ClassNotFoundException {\n    String url = &quot;jdbc:derby://localhost:1527/AnimeFigurineCollection [wimmy on WIMMY]&quot;;\n    String driver = &quot;org.apache.derby.jdbc.ClientDriver&quot;;\n    Class.forName(driver);\n    conn = DriverManager.getConnection(url,&quot;wimmy&quot;,&quot;1231&quot;);\n\n    }//end db conn\n    \n    public List&lt;Collection&gt; getAllProduct(){\n        List&lt;Collection&gt; col = new ArrayList&lt;&gt;();\n        \n        String queryStr = &quot;Select * From ALBUM&quot;;\n    try {\n        ps = conn.prepareStatement(queryStr);\n        rs = ps.executeQuery();\n        while(rs.next()){\n            Collection collect = new Collection(rs.getString(&quot;code&quot;),\n                    rs.getInt(&quot;registrationNumber&quot;),\n                    rs.getInt(&quot;barcode&quot;),\n                    rs.getString(&quot;maincharName&quot;),\n                    rs.getString(&quot;title&quot;),\n                    rs.getString(&quot;version&quot;),\n                    rs.getString(&quot;type&quot;));\n            col.add(collect);\n        }\n    } catch (SQLException ex) {\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    \n    \n    }    \n    return col;\n    \n}//end getall\n\n</code></pre>\n<p>Also when I add my derbyclient.jar this appears:</p>\n<blockquote>\n<p>java.sql.SQLNonTransientConnectionException: The connection was refused because the database AnimeFigurineCollection [wimmy on WIMMY] was not found. &quot;&quot;ERROR 08004: The connection was refused because the database AnimeFigurineCollection [wimmy on WIMMY] was not found.&quot;</p>\n</blockquote>\n<p>If I remove it, those two disappears also.</p>\n"},{"tags":["java","xml","validation","xsd"],"answers":[{"tags":[],"owner":{"account_id":78666,"reputation":2354,"user_id":223717,"display_name":"Stefan De Boey"},"down_vote_count":1,"up_vote_count":66,"is_accepted":true,"score":65,"last_activity_date":1267200738,"creation_date":1267199821,"answer_id":2342859,"question_id":2342808,"body_markdown":"you need to use an [LSResourceResolver][1] for this to work. please take a look at the sample code below.\r\n\r\na validate method:\r\n\r\n    // note that if your XML already declares the XSD to which it has to conform, then there&#39;s no need to declare the schemaName here\r\n    void validate(String xml, String schemaName) throws Exception {\r\n\r\n\t\tDocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\r\n\t\tbuilderFactory.setNamespaceAware(true);\r\n\t\t\r\n\t\tDocumentBuilder parser = builderFactory\r\n\t\t\t\t.newDocumentBuilder();\r\n\t\t\r\n        // parse the XML into a document object\r\n\t\tDocument document = parser.parse(new StringInputStream(xml));\r\n\r\n\t\tSchemaFactory factory = SchemaFactory\r\n\t\t\t\t.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n\r\n        // associate the schema factory with the resource resolver, which is responsible for resolving the imported XSD&#39;s\r\n\t\tfactory.setResourceResolver(new ResourceResolver());\r\n\r\n                // note that if your XML already declares the XSD to which it has to conform, then there&#39;s no need to create a validator from a Schema object\r\n\t\tSource schemaFile = new StreamSource(getClass().getClassLoader()\r\n\t\t\t\t.getResourceAsStream(schemaName));\r\n\t\tSchema schema = factory.newSchema(schemaFile);\r\n\r\n\t\tValidator validator = schema.newValidator();\r\n\t\tvalidator.validate(new DOMSource(document));\r\n\t}\r\n\r\n\r\n\r\nthe resource resolver implementation:\r\n\r\n    public class ResourceResolver  implements LSResourceResolver {\r\n\r\n\tpublic LSInput resolveResource(String type, String namespaceURI,\r\n\t\t\tString publicId, String systemId, String baseURI) {\r\n                \r\n         // note: in this sample, the XSD&#39;s are expected to be in the root of the classpath\r\n\t\tInputStream resourceAsStream = this.getClass().getClassLoader()\r\n\t\t\t\t.getResourceAsStream(systemId);\r\n\t\treturn new Input(publicId, systemId, resourceAsStream);\r\n\t}\r\n\r\n     }\r\n\r\n\r\nThe Input implemetation returned by the resource resolver:\r\n\r\n\r\n    public class Input implements LSInput {\r\n\r\n\tprivate String publicId;\r\n\r\n\tprivate String systemId;\r\n\r\n\tpublic String getPublicId() {\r\n\t\treturn publicId;\r\n\t}\r\n\r\n\tpublic void setPublicId(String publicId) {\r\n\t\tthis.publicId = publicId;\r\n\t}\r\n\r\n\tpublic String getBaseURI() {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic InputStream getByteStream() {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic boolean getCertifiedText() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic Reader getCharacterStream() {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic String getEncoding() {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic String getStringData() {\r\n\t\tsynchronized (inputStream) {\r\n\t\t\ttry {\r\n\t\t\t\tbyte[] input = new byte[inputStream.available()];\r\n\t\t\t\tinputStream.read(input);\r\n\t\t\t\tString contents = new String(input);\r\n\t\t\t\treturn contents;\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\tSystem.out.println(&quot;Exception &quot; + e);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void setBaseURI(String baseURI) {\r\n\t}\r\n\r\n\tpublic void setByteStream(InputStream byteStream) {\r\n\t}\r\n\r\n\tpublic void setCertifiedText(boolean certifiedText) {\r\n\t}\r\n\r\n\tpublic void setCharacterStream(Reader characterStream) {\r\n\t}\r\n\r\n\tpublic void setEncoding(String encoding) {\r\n\t}\r\n\r\n\tpublic void setStringData(String stringData) {\r\n\t}\r\n\r\n\tpublic String getSystemId() {\r\n\t\treturn systemId;\r\n\t}\r\n\r\n\tpublic void setSystemId(String systemId) {\r\n\t\tthis.systemId = systemId;\r\n\t}\r\n\r\n\tpublic BufferedInputStream getInputStream() {\r\n\t\treturn inputStream;\r\n\t}\r\n\r\n\tpublic void setInputStream(BufferedInputStream inputStream) {\r\n\t\tthis.inputStream = inputStream;\r\n\t}\r\n\r\n\tprivate BufferedInputStream inputStream;\r\n\r\n\tpublic Input(String publicId, String sysId, InputStream input) {\r\n\t\tthis.publicId = publicId;\r\n\t\tthis.systemId = sysId;\r\n\t\tthis.inputStream = new BufferedInputStream(input);\r\n\t}\r\n    }\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/jre/api/plugin/dom/org/w3c/dom/ls/LSResourceResolver.html","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>you need to use an <a href=\"http://java.sun.com/javase/6/docs/jre/api/plugin/dom/org/w3c/dom/ls/LSResourceResolver.html\" rel=\"noreferrer\">LSResourceResolver</a> for this to work. please take a look at the sample code below.</p>\n\n<p>a validate method:</p>\n\n<pre><code>// note that if your XML already declares the XSD to which it has to conform, then there's no need to declare the schemaName here\nvoid validate(String xml, String schemaName) throws Exception {\n\n    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\n    builderFactory.setNamespaceAware(true);\n\n    DocumentBuilder parser = builderFactory\n            .newDocumentBuilder();\n\n    // parse the XML into a document object\n    Document document = parser.parse(new StringInputStream(xml));\n\n    SchemaFactory factory = SchemaFactory\n            .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n\n    // associate the schema factory with the resource resolver, which is responsible for resolving the imported XSD's\n    factory.setResourceResolver(new ResourceResolver());\n\n            // note that if your XML already declares the XSD to which it has to conform, then there's no need to create a validator from a Schema object\n    Source schemaFile = new StreamSource(getClass().getClassLoader()\n            .getResourceAsStream(schemaName));\n    Schema schema = factory.newSchema(schemaFile);\n\n    Validator validator = schema.newValidator();\n    validator.validate(new DOMSource(document));\n}\n</code></pre>\n\n<p>the resource resolver implementation:</p>\n\n<pre><code>public class ResourceResolver  implements LSResourceResolver {\n\npublic LSInput resolveResource(String type, String namespaceURI,\n        String publicId, String systemId, String baseURI) {\n\n     // note: in this sample, the XSD's are expected to be in the root of the classpath\n    InputStream resourceAsStream = this.getClass().getClassLoader()\n            .getResourceAsStream(systemId);\n    return new Input(publicId, systemId, resourceAsStream);\n}\n\n }\n</code></pre>\n\n<p>The Input implemetation returned by the resource resolver:</p>\n\n<pre><code>public class Input implements LSInput {\n\nprivate String publicId;\n\nprivate String systemId;\n\npublic String getPublicId() {\n    return publicId;\n}\n\npublic void setPublicId(String publicId) {\n    this.publicId = publicId;\n}\n\npublic String getBaseURI() {\n    return null;\n}\n\npublic InputStream getByteStream() {\n    return null;\n}\n\npublic boolean getCertifiedText() {\n    return false;\n}\n\npublic Reader getCharacterStream() {\n    return null;\n}\n\npublic String getEncoding() {\n    return null;\n}\n\npublic String getStringData() {\n    synchronized (inputStream) {\n        try {\n            byte[] input = new byte[inputStream.available()];\n            inputStream.read(input);\n            String contents = new String(input);\n            return contents;\n        } catch (IOException e) {\n            e.printStackTrace();\n            System.out.println(\"Exception \" + e);\n            return null;\n        }\n    }\n}\n\npublic void setBaseURI(String baseURI) {\n}\n\npublic void setByteStream(InputStream byteStream) {\n}\n\npublic void setCertifiedText(boolean certifiedText) {\n}\n\npublic void setCharacterStream(Reader characterStream) {\n}\n\npublic void setEncoding(String encoding) {\n}\n\npublic void setStringData(String stringData) {\n}\n\npublic String getSystemId() {\n    return systemId;\n}\n\npublic void setSystemId(String systemId) {\n    this.systemId = systemId;\n}\n\npublic BufferedInputStream getInputStream() {\n    return inputStream;\n}\n\npublic void setInputStream(BufferedInputStream inputStream) {\n    this.inputStream = inputStream;\n}\n\nprivate BufferedInputStream inputStream;\n\npublic Input(String publicId, String sysId, InputStream input) {\n    this.publicId = publicId;\n    this.systemId = sysId;\n    this.inputStream = new BufferedInputStream(input);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":197433,"reputation":79,"user_id":441510,"display_name":"valerian"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1366295729,"creation_date":1283868291,"answer_id":3659353,"question_id":2342808,"body_markdown":"\tSchemaFactory schemaFactory = SchemaFactory\r\n\t\t\t\t\t\t\t\t\t.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n\tSource schemaFile = new StreamSource(getClass().getClassLoader()\r\n\t\t\t\t\t\t\t\t\t.getResourceAsStream(&quot;cars-fleet.xsd&quot;));\r\n\tSchema schema = schemaFactory.newSchema(schemaFile);\r\n\tValidator validator = schema.newValidator();\r\n\tStreamSource source = new StreamSource(xml);\r\n\tvalidator.validate(source);\r\n\t","title":"How to validate an XML file using Java with an XSD having an include?","body":"<pre><code>SchemaFactory schemaFactory = SchemaFactory\n                                .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\nSource schemaFile = new StreamSource(getClass().getClassLoader()\n                                .getResourceAsStream(\"cars-fleet.xsd\"));\nSchema schema = schemaFactory.newSchema(schemaFile);\nValidator validator = schema.newValidator();\nStreamSource source = new StreamSource(xml);\nvalidator.validate(source);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3831719,"reputation":1,"user_id":3177126,"display_name":"AMegmondoEmber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389847986,"creation_date":1389847986,"answer_id":21153587,"question_id":2342808,"body_markdown":"For us the resolveResource looked like this. After some prolog exception and weird \r\nElement type &quot;xs:schema&quot; must be followed by either attribute specifications, &quot;&gt;&quot; or &quot;/&gt;&quot;.\r\nElement type &quot;xs:element&quot; must be followed by either attribute specifications, &quot;&gt;&quot; or &quot;/&gt;&quot;.\r\n(because of the breakdown of multiple lines)\r\n\r\nThe path history was needed because of the structure of includes\r\n\r\n    main.xsd (this has include &quot;includes/subPart.xsd&quot;)\r\n    /includes/subPart.xsd (this has include &quot;./subSubPart.xsd&quot;)\r\n    /includes/subSubPart.xsd\r\n\r\n\r\nSo the code looks like:\r\n   \r\n\t\r\n    String pathHistory = &quot;&quot;;\r\n\r\n    @Override\r\n    public LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId, String baseURI) {\r\n    \tsystemId = systemId.replace(&quot;./&quot;, &quot;&quot;);// we dont need this since getResourceAsStream cannot understand it\r\n    \tInputStream resourceAsStream = Message.class.getClassLoader().getResourceAsStream(systemId);\r\n    \tif (resourceAsStream == null) {\r\n    \t\tresourceAsStream = Message.class.getClassLoader().getResourceAsStream(pathHistory + systemId);\r\n    \t} else {\r\n    \t\tpathHistory = getNormalizedPath(systemId);\r\n    \t}\r\n        Scanner s = new Scanner(resourceAsStream).useDelimiter(&quot;\\\\A&quot;);\r\n        String s1 = s.next()\r\n        \t\t.replaceAll(&quot;\\\\n&quot;,&quot; &quot;) //the parser cannot understand elements broken down multiple lines e.g. (&lt;xs:element \\n name=&quot;buxing&quot;&gt;) \r\n        \t\t.replace(&quot;\\\\t&quot;, &quot; &quot;) //these two about whitespaces is only for decoration\r\n        \t\t.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;) \r\n        \t\t.replaceAll(&quot;[^\\\\x20-\\\\x7e]&quot;, &quot;&quot;); //some files has a special character as a first character indicating utf-8 file\r\n        InputStream is = new ByteArrayInputStream(s1.getBytes());\r\n        \r\n        return new LSInputImpl(publicId, systemId, is);\r\n    }\r\n    \r\n    private String getNormalizedPath(String baseURI) {\r\n\t\treturn baseURI.substring(0, baseURI.lastIndexOf(System.getProperty(&quot;file.separator&quot;))+ 1) ;\r\n\t}\r\n","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>For us the resolveResource looked like this. After some prolog exception and weird \nElement type \"xs:schema\" must be followed by either attribute specifications, \">\" or \"/>\".\nElement type \"xs:element\" must be followed by either attribute specifications, \">\" or \"/>\".\n(because of the breakdown of multiple lines)</p>\n\n<p>The path history was needed because of the structure of includes</p>\n\n<pre><code>main.xsd (this has include \"includes/subPart.xsd\")\n/includes/subPart.xsd (this has include \"./subSubPart.xsd\")\n/includes/subSubPart.xsd\n</code></pre>\n\n<p>So the code looks like:</p>\n\n<pre><code>String pathHistory = \"\";\n\n@Override\npublic LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId, String baseURI) {\n    systemId = systemId.replace(\"./\", \"\");// we dont need this since getResourceAsStream cannot understand it\n    InputStream resourceAsStream = Message.class.getClassLoader().getResourceAsStream(systemId);\n    if (resourceAsStream == null) {\n        resourceAsStream = Message.class.getClassLoader().getResourceAsStream(pathHistory + systemId);\n    } else {\n        pathHistory = getNormalizedPath(systemId);\n    }\n    Scanner s = new Scanner(resourceAsStream).useDelimiter(\"\\\\A\");\n    String s1 = s.next()\n            .replaceAll(\"\\\\n\",\" \") //the parser cannot understand elements broken down multiple lines e.g. (&lt;xs:element \\n name=\"buxing\"&gt;) \n            .replace(\"\\\\t\", \" \") //these two about whitespaces is only for decoration\n            .replaceAll(\"\\\\s+\", \" \") \n            .replaceAll(\"[^\\\\x20-\\\\x7e]\", \"\"); //some files has a special character as a first character indicating utf-8 file\n    InputStream is = new ByteArrayInputStream(s1.getBytes());\n\n    return new LSInputImpl(publicId, systemId, is);\n}\n\nprivate String getNormalizedPath(String baseURI) {\n    return baseURI.substring(0, baseURI.lastIndexOf(System.getProperty(\"file.separator\"))+ 1) ;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1279401,"reputation":1190,"user_id":1233877,"accept_rate":60,"display_name":"Ramakrishna"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1393236360,"creation_date":1393236360,"answer_id":21984486,"question_id":2342808,"body_markdown":"If you wont find an element in xml you will get xml:lang exception. \r\nElements are case sensitive","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>If you wont find an element in xml you will get xml:lang exception. \nElements are case sensitive</p>\n"},{"tags":[],"owner":{"account_id":3240240,"reputation":617,"user_id":2733462,"display_name":"burcakulug"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1666879799,"creation_date":1395336965,"answer_id":22540905,"question_id":2342808,"body_markdown":"I had to make some modifications to [this post][1] by AMegmondoEmber\r\n\r\nMy main schema file had some includes from sibling folders, and the included files also had some includes from their local folders. I also had to track down the base resource path and relative path of the current resource. This code works for me now, but please keep in mind that it assumes all xsd files have a unique name. If you have some xsd files with same name, but different content at different paths, it will probably give you problems.\r\n\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.InputStream;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Scanner;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.w3c.dom.ls.LSInput;\r\n    import org.w3c.dom.ls.LSResourceResolver;\r\n    \r\n    /**\r\n     * The Class ResourceResolver.\r\n     */\r\n    public class ResourceResolver implements LSResourceResolver {\r\n    \t\r\n    \t/** The logger. */\r\n    \tprivate final Logger logger = LoggerFactory.getLogger(this.getClass());\r\n    \t\r\n    \t/** The schema base path. */\r\n    \tprivate final String schemaBasePath;\r\n    \t\r\n    \t/** The path map. */\r\n    \tprivate Map&lt;String, String&gt; pathMap = new HashMap&lt;String, String&gt;();\r\n    \r\n    \t/**\r\n    \t * Instantiates a new resource resolver.\r\n    \t *\r\n    \t * @param schemaBasePath the schema base path\r\n    \t */\r\n    \tpublic ResourceResolver(String schemaBasePath) {\r\n    \t\tthis.schemaBasePath = schemaBasePath;\r\n    \t\tlogger.warn(&quot;This LSResourceResolver implementation assumes that all XSD files have a unique name. &quot;\r\n    \t\t\t\t+ &quot;If you have some XSD files with same name but different content (at different paths) in your schema structure, &quot;\r\n    \t\t\t\t+ &quot;this resolver will fail to include the other XSD files except the first one found.&quot;);\r\n    \t}\r\n    \r\n    \t/* (non-Javadoc)\r\n    \t * @see org.w3c.dom.ls.LSResourceResolver#resolveResource(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)\r\n    \t */\r\n    \t@Override\r\n    \tpublic LSInput resolveResource(String type, String namespaceURI,\r\n    \t\t\tString publicId, String systemId, String baseURI) {\r\n    \t\t// The base resource that includes this current resource\r\n    \t\tString baseResourceName = null;\r\n    \t\tString baseResourcePath = null;\r\n    \t\t// Extract the current resource name\r\n    \t\tString currentResourceName = systemId.substring(systemId\r\n    \t\t\t\t.lastIndexOf(&quot;/&quot;) + 1);\r\n    \r\n    \t\t// If this resource hasn&#39;t been added yet\r\n    \t\tif (!pathMap.containsKey(currentResourceName)) {\r\n    \t\t\tif (baseURI != null) {\r\n    \t\t\t\tbaseResourceName = baseURI\r\n    \t\t\t\t\t\t.substring(baseURI.lastIndexOf(&quot;/&quot;) + 1);\r\n    \t\t\t}\r\n    \r\n    \t\t\t// we dont need &quot;./&quot; since getResourceAsStream cannot understand it\r\n    \t\t\tif (systemId.startsWith(&quot;./&quot;)) {\r\n    \t\t\t\tsystemId = systemId.substring(2, systemId.length());\r\n    \t\t\t}\r\n    \r\n    \t\t\t// If the baseResourcePath has already been discovered, get that\r\n    \t\t\t// from pathMap\r\n    \t\t\tif (pathMap.containsKey(baseResourceName)) {\r\n    \t\t\t\tbaseResourcePath = pathMap.get(baseResourceName);\r\n    \t\t\t} else {\r\n    \t\t\t\t// The baseResourcePath should be the schemaBasePath\r\n    \t\t\t\tbaseResourcePath = schemaBasePath;\r\n    \t\t\t}\r\n    \r\n    \t\t\t// Read the resource as input stream\r\n    \t\t\tString normalizedPath = getNormalizedPath(baseResourcePath, systemId);\r\n    \t\t\tInputStream resourceAsStream = this.getClass().getClassLoader()\r\n    \t\t\t\t\t.getResourceAsStream(normalizedPath);\r\n    \r\n    \t\t\t// if the current resource is not in the same path with base\r\n    \t\t\t// resource, add current resource&#39;s path to pathMap\r\n    \t\t\tif (systemId.contains(&quot;/&quot;)) {\r\n    \t\t\t\tpathMap.put(currentResourceName, normalizedPath.substring(0,normalizedPath.lastIndexOf(&quot;/&quot;)+1));\r\n    \t\t\t} else {\r\n    \t\t\t\t// The current resource should be at the same path as the base\r\n    \t\t\t\t// resource\r\n    \t\t\t\tpathMap.put(systemId, baseResourcePath);\r\n    \t\t\t}\r\n    \t\t\tScanner s = new Scanner(resourceAsStream).useDelimiter(&quot;\\\\A&quot;);\r\n    \t\t\tString s1 = s.next().replaceAll(&quot;\\\\n&quot;, &quot; &quot;) // the parser cannot understand elements broken down multiple lines e.g. (&lt;xs:element \\n name=&quot;buxing&quot;&gt;)\r\n    \t\t\t\t\t.replace(&quot;\\\\t&quot;, &quot; &quot;) // these two about whitespaces is only for decoration\r\n    \t\t\t\t\t.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;).replaceAll(&quot;[^\\\\x20-\\\\x7e]&quot;, &quot;&quot;); // some files has a special character as a first character indicating utf-8 file\r\n    \t\t\tInputStream is = new ByteArrayInputStream(s1.getBytes());\r\n    \r\n    \t\t\treturn new LSInputImpl(publicId, systemId, is); // same as Input class\r\n    \t\t}\r\n    \r\n    \t\t// If this resource has already been added, do not add the same resource again. It throws\r\n    \t\t// &quot;org.xml.sax.SAXParseException: sch-props-correct.2: A schema cannot contain two global components with the same name; this schema contains two occurrences of ...&quot;\r\n    \t\t// return null instead.\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * Gets the normalized path.\r\n    \t *\r\n    \t * @param basePath the base path\r\n    \t * @param relativePath the relative path\r\n    \t * @return the normalized path\r\n    \t */\r\n    \tprivate String getNormalizedPath(String basePath, String relativePath){\r\n    \t\tif(!relativePath.startsWith(&quot;../&quot;)){\r\n    \t\t\treturn basePath + relativePath;\r\n    \t\t}\r\n    \t\telse{\r\n    \t\t\twhile(relativePath.startsWith(&quot;../&quot;)){\r\n    \t\t\t\tbasePath = basePath.substring(0,basePath.substring(0, basePath.length()-1).lastIndexOf(&quot;/&quot;)+1);\r\n    \t\t\t\trelativePath = relativePath.substring(3);\r\n    \t\t\t}\r\n    \t\t\treturn basePath+relativePath;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/21153587/2733462","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>I had to make some modifications to <a href=\"https://stackoverflow.com/a/21153587/2733462\">this post</a> by AMegmondoEmber</p>\n<p>My main schema file had some includes from sibling folders, and the included files also had some includes from their local folders. I also had to track down the base resource path and relative path of the current resource. This code works for me now, but please keep in mind that it assumes all xsd files have a unique name. If you have some xsd files with same name, but different content at different paths, it will probably give you problems.</p>\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Scanner;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.w3c.dom.ls.LSInput;\nimport org.w3c.dom.ls.LSResourceResolver;\n\n/**\n * The Class ResourceResolver.\n */\npublic class ResourceResolver implements LSResourceResolver {\n    \n    /** The logger. */\n    private final Logger logger = LoggerFactory.getLogger(this.getClass());\n    \n    /** The schema base path. */\n    private final String schemaBasePath;\n    \n    /** The path map. */\n    private Map&lt;String, String&gt; pathMap = new HashMap&lt;String, String&gt;();\n\n    /**\n     * Instantiates a new resource resolver.\n     *\n     * @param schemaBasePath the schema base path\n     */\n    public ResourceResolver(String schemaBasePath) {\n        this.schemaBasePath = schemaBasePath;\n        logger.warn(&quot;This LSResourceResolver implementation assumes that all XSD files have a unique name. &quot;\n                + &quot;If you have some XSD files with same name but different content (at different paths) in your schema structure, &quot;\n                + &quot;this resolver will fail to include the other XSD files except the first one found.&quot;);\n    }\n\n    /* (non-Javadoc)\n     * @see org.w3c.dom.ls.LSResourceResolver#resolveResource(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)\n     */\n    @Override\n    public LSInput resolveResource(String type, String namespaceURI,\n            String publicId, String systemId, String baseURI) {\n        // The base resource that includes this current resource\n        String baseResourceName = null;\n        String baseResourcePath = null;\n        // Extract the current resource name\n        String currentResourceName = systemId.substring(systemId\n                .lastIndexOf(&quot;/&quot;) + 1);\n\n        // If this resource hasn't been added yet\n        if (!pathMap.containsKey(currentResourceName)) {\n            if (baseURI != null) {\n                baseResourceName = baseURI\n                        .substring(baseURI.lastIndexOf(&quot;/&quot;) + 1);\n            }\n\n            // we dont need &quot;./&quot; since getResourceAsStream cannot understand it\n            if (systemId.startsWith(&quot;./&quot;)) {\n                systemId = systemId.substring(2, systemId.length());\n            }\n\n            // If the baseResourcePath has already been discovered, get that\n            // from pathMap\n            if (pathMap.containsKey(baseResourceName)) {\n                baseResourcePath = pathMap.get(baseResourceName);\n            } else {\n                // The baseResourcePath should be the schemaBasePath\n                baseResourcePath = schemaBasePath;\n            }\n\n            // Read the resource as input stream\n            String normalizedPath = getNormalizedPath(baseResourcePath, systemId);\n            InputStream resourceAsStream = this.getClass().getClassLoader()\n                    .getResourceAsStream(normalizedPath);\n\n            // if the current resource is not in the same path with base\n            // resource, add current resource's path to pathMap\n            if (systemId.contains(&quot;/&quot;)) {\n                pathMap.put(currentResourceName, normalizedPath.substring(0,normalizedPath.lastIndexOf(&quot;/&quot;)+1));\n            } else {\n                // The current resource should be at the same path as the base\n                // resource\n                pathMap.put(systemId, baseResourcePath);\n            }\n            Scanner s = new Scanner(resourceAsStream).useDelimiter(&quot;\\\\A&quot;);\n            String s1 = s.next().replaceAll(&quot;\\\\n&quot;, &quot; &quot;) // the parser cannot understand elements broken down multiple lines e.g. (&lt;xs:element \\n name=&quot;buxing&quot;&gt;)\n                    .replace(&quot;\\\\t&quot;, &quot; &quot;) // these two about whitespaces is only for decoration\n                    .replaceAll(&quot;\\\\s+&quot;, &quot; &quot;).replaceAll(&quot;[^\\\\x20-\\\\x7e]&quot;, &quot;&quot;); // some files has a special character as a first character indicating utf-8 file\n            InputStream is = new ByteArrayInputStream(s1.getBytes());\n\n            return new LSInputImpl(publicId, systemId, is); // same as Input class\n        }\n\n        // If this resource has already been added, do not add the same resource again. It throws\n        // &quot;org.xml.sax.SAXParseException: sch-props-correct.2: A schema cannot contain two global components with the same name; this schema contains two occurrences of ...&quot;\n        // return null instead.\n        return null;\n    }\n    \n    /**\n     * Gets the normalized path.\n     *\n     * @param basePath the base path\n     * @param relativePath the relative path\n     * @return the normalized path\n     */\n    private String getNormalizedPath(String basePath, String relativePath){\n        if(!relativePath.startsWith(&quot;../&quot;)){\n            return basePath + relativePath;\n        }\n        else{\n            while(relativePath.startsWith(&quot;../&quot;)){\n                basePath = basePath.substring(0,basePath.substring(0, basePath.length()-1).lastIndexOf(&quot;/&quot;)+1);\n                relativePath = relativePath.substring(3);\n            }\n            return basePath+relativePath;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465839,"reputation":6552,"user_id":870207,"accept_rate":0,"display_name":"teknopaul"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1466686360,"creation_date":1466686360,"answer_id":37992214,"question_id":2342808,"body_markdown":"The accepted answer is very verbose, and builds a DOM in memory first, includes seems to work out of the box for me, including relative references.\r\n\r\n\t\tSchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n\t\tSchema schema = schemaFactory.newSchema(new File(&quot;../foo.xsd&quot;));\r\n\t\tValidator validator = schema.newValidator();\r\n\t\tvalidator.validate(new StreamSource(new File(&quot;./foo.xml&quot;)));","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>The accepted answer is very verbose, and builds a DOM in memory first, includes seems to work out of the box for me, including relative references.</p>\n\n<pre><code>    SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n    Schema schema = schemaFactory.newSchema(new File(\"../foo.xsd\"));\n    Validator validator = schema.newValidator();\n    validator.validate(new StreamSource(new File(\"./foo.xml\")));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3242704,"reputation":13438,"user_id":2735286,"accept_rate":89,"display_name":"gil.fernandes"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1505722963,"creation_date":1505721678,"answer_id":46274349,"question_id":2342808,"body_markdown":"The accepted answer is perfectly ok, but does not work with Java 8 without some modifications. It would also be nice to be able to specify a base path from which the imported schemas are read. \r\n\r\nI have used in my Java 8 the following code which allows to specify an embedded schema path other than the root path:\r\n\r\n    import com.sun.org.apache.xerces.internal.dom.DOMInputImpl;\r\n    import org.w3c.dom.ls.LSInput;\r\n    import org.w3c.dom.ls.LSResourceResolver;\r\n    \r\n    import java.io.InputStream;\r\n    import java.util.Objects;\r\n    \r\n    public class ResourceResolver implements LSResourceResolver {\r\n    \r\n        private String basePath;\r\n    \r\n        public ResourceResolver(String basePath) {\r\n            this.basePath = basePath;\r\n        }\r\n    \r\n        @Override\r\n        public LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId, String baseURI) {\r\n            // note: in this sample, the XSD&#39;s are expected to be in the root of the classpath\r\n            InputStream resourceAsStream = this.getClass().getClassLoader()\r\n                    .getResourceAsStream(buildPath(systemId));\r\n            Objects.requireNonNull(resourceAsStream, String.format(&quot;Could not find the specified xsd file: %s&quot;, systemId));\r\n            return new DOMInputImpl(publicId, systemId, baseURI, resourceAsStream, &quot;UTF-8&quot;);\r\n        }\r\n    \r\n        private String buildPath(String systemId) {\r\n            return basePath == null ? systemId : String.format(&quot;%s/%s&quot;, basePath, systemId);\r\n        }\r\n    }\r\n\r\nThis implementation also gives to the user a meaningful message in case the schema cannot be read.","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>The accepted answer is perfectly ok, but does not work with Java 8 without some modifications. It would also be nice to be able to specify a base path from which the imported schemas are read. </p>\n\n<p>I have used in my Java 8 the following code which allows to specify an embedded schema path other than the root path:</p>\n\n<pre><code>import com.sun.org.apache.xerces.internal.dom.DOMInputImpl;\nimport org.w3c.dom.ls.LSInput;\nimport org.w3c.dom.ls.LSResourceResolver;\n\nimport java.io.InputStream;\nimport java.util.Objects;\n\npublic class ResourceResolver implements LSResourceResolver {\n\n    private String basePath;\n\n    public ResourceResolver(String basePath) {\n        this.basePath = basePath;\n    }\n\n    @Override\n    public LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId, String baseURI) {\n        // note: in this sample, the XSD's are expected to be in the root of the classpath\n        InputStream resourceAsStream = this.getClass().getClassLoader()\n                .getResourceAsStream(buildPath(systemId));\n        Objects.requireNonNull(resourceAsStream, String.format(\"Could not find the specified xsd file: %s\", systemId));\n        return new DOMInputImpl(publicId, systemId, baseURI, resourceAsStream, \"UTF-8\");\n    }\n\n    private String buildPath(String systemId) {\n        return basePath == null ? systemId : String.format(\"%s/%s\", basePath, systemId);\n    }\n}\n</code></pre>\n\n<p>This implementation also gives to the user a meaningful message in case the schema cannot be read.</p>\n"},{"tags":[],"owner":{"account_id":11973547,"reputation":141,"user_id":8761390,"display_name":"Gordon Daugherty"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1550791314,"creation_date":1550791314,"answer_id":54817784,"question_id":2342808,"body_markdown":"As user &quot;ulab&quot; points out in a comment on another answer the solution described in [this answer][1] (to a separate stackoverflow question) will work for many. Here&#39;s the rough outline of that approach:\r\n\r\n```\r\nSchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\nURL xsdURL = this.getResource(&quot;/xsd/my-schema.xsd&quot;);\r\nSchema schema = schemaFactory.newSchema(xsdURL);\r\n```\r\n\r\nThe key to this approach is avoiding handing the schema factory a stream and instead giving it a URL. This way it gets information about the location of the XSD file.\r\n\r\nOne thing to keep in mind here is that the &quot;schemaLocation&quot; attribute on include and/or import elements will be treated as relative to the classpath location of the XSD file whose URL you&#39;ve handed to the validator when you use simple file paths in the form &quot;my-common.xsd&quot; or &quot;common/some-concept.xsd&quot;.\r\n\r\nNotes:\r\n - In the example above I&#39;ve placed the schema file into a jar file under an &quot;xsd&quot; folder.\r\n - The leading slash in the &quot;getResource&quot; argument tells Java to start at the root of the    classloader instead of at the &quot;this&quot; object&#39;s package name.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1732161/parsing-schema-in-java-with-imports-and-includes/19853877#19853877","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>As user \"ulab\" points out in a comment on another answer the solution described in <a href=\"https://stackoverflow.com/questions/1732161/parsing-schema-in-java-with-imports-and-includes/19853877#19853877\">this answer</a> (to a separate stackoverflow question) will work for many. Here's the rough outline of that approach:</p>\n\n<pre><code>SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\nURL xsdURL = this.getResource(\"/xsd/my-schema.xsd\");\nSchema schema = schemaFactory.newSchema(xsdURL);\n</code></pre>\n\n<p>The key to this approach is avoiding handing the schema factory a stream and instead giving it a URL. This way it gets information about the location of the XSD file.</p>\n\n<p>One thing to keep in mind here is that the \"schemaLocation\" attribute on include and/or import elements will be treated as relative to the classpath location of the XSD file whose URL you've handed to the validator when you use simple file paths in the form \"my-common.xsd\" or \"common/some-concept.xsd\".</p>\n\n<p>Notes:\n - In the example above I've placed the schema file into a jar file under an \"xsd\" folder.\n - The leading slash in the \"getResource\" argument tells Java to start at the root of the    classloader instead of at the \"this\" object's package name.</p>\n"},{"tags":[],"owner":{"account_id":24364426,"reputation":11,"user_id":18298351,"display_name":"M123"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645700653,"creation_date":1645700653,"answer_id":71250950,"question_id":2342808,"body_markdown":"This thread was very useful for parsing complex xml schemas in multiple files .\r\n\r\nI also had to add:\r\n\r\n            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n            factory.setFeature(&quot;http://apache.org/xml/features/honour-all-schemaLocations&quot;, true);\r\n\r\nto handle multiple files with same targetnamespace.","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>This thread was very useful for parsing complex xml schemas in multiple files .</p>\n<p>I also had to add:</p>\n<pre><code>        SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n        factory.setFeature(&quot;http://apache.org/xml/features/honour-all-schemaLocations&quot;, true);\n</code></pre>\n<p>to handle multiple files with same targetnamespace.</p>\n"},{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674647293,"creation_date":1674647293,"answer_id":75233522,"question_id":2342808,"body_markdown":"All you need is to use `StreamSource` with 2-arg signature like this:\r\n\r\n    val schemaResource = Thread.currentThread().contextClassLoader.getResource(&quot;path/to/main.xsd&quot;) ?: throw RuntimeException(&quot;todo&quot;)\r\n    val schema = schemaFactory.newSchema(StreamSource(schemaResource.openStream(), schemaResource.toExternalForm()))\r\n    schema.newValidator().validate(source)","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>All you need is to use <code>StreamSource</code> with 2-arg signature like this:</p>\n<pre><code>val schemaResource = Thread.currentThread().contextClassLoader.getResource(&quot;path/to/main.xsd&quot;) ?: throw RuntimeException(&quot;todo&quot;)\nval schema = schemaFactory.newSchema(StreamSource(schemaResource.openStream(), schemaResource.toExternalForm()))\nschema.newValidator().validate(source)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1976038,"reputation":364,"user_id":1773805,"accept_rate":17,"display_name":"tjeerdnet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691578869,"creation_date":1691575049,"answer_id":76866595,"question_id":2342808,"body_markdown":"Me and a colleague were fighting this for quite some hours and nothing seemed to be working. We would be getting errors like\r\n\r\n    cvc-elt.1: Cannot find the declaration of element &#39;Login&#39;.\r\n\r\nThe most important thing in our case was to **use an *URL* as resource** instead of an *InputStream* when setting the schema with the *SchemaFactory*s method *newSchema(...)*. Our XSDs reside in the classpath so we use *ClassPathResource* to get the XSD files. See below XSDs + XML + Java example code. The XSDs were delivered to us as is.\r\n\r\nThe main XSD (*Login.xsd*):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xs:schema xmlns:ns0=&quot;xmnls&quot;\r\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               ns0:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               elementFormDefault=&quot;qualified&quot;\r\n               attributeFormDefault=&quot;unqualified&quot;&gt;\r\n       &lt;xs:include schemaLocation=&quot;CustomTypes.xsd&quot;/&gt;\r\n       &lt;xs:element name=&quot;Login&quot;&gt;      \r\n          &lt;xs:complexType&gt;\r\n             &lt;xs:sequence&gt;\r\n                &lt;xs:element name=&quot;Username&quot; type=&quot;Char20&quot;&gt;               \r\n                &lt;/xs:element&gt;            \r\n             &lt;/xs:sequence&gt;\r\n          &lt;/xs:complexType&gt;\r\n       &lt;/xs:element&gt;\r\n    &lt;/xs:schema&gt;\r\n\r\nThe XSD (*CustomTypes.xsd*) being included from the main XSD (*Login.xsd*):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xs:schema xmlns:ns0=&quot;xmnls&quot;\r\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\r\n               xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n               jaxb:extensionBindingPrefixes=&quot;xjc&quot;\r\n               jaxb:version=&quot;2.0&quot;\r\n               ns0:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               elementFormDefault=&quot;qualified&quot;\r\n               attributeFormDefault=&quot;unqualified&quot;&gt;   \r\n       &lt;xs:simpleType name=&quot;Char20&quot;&gt;      \r\n          &lt;xs:restriction base=&quot;xs:string&quot;&gt;\r\n             &lt;xs:pattern value=&quot;.{1,20}&quot;&gt;            \r\n             &lt;/xs:pattern&gt;\r\n          &lt;/xs:restriction&gt;\r\n       &lt;/xs:simpleType&gt;   \r\n    &lt;/xs:schema&gt;\r\n\r\nThe XML to validate:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Login&gt;\r\n     &lt;Username&gt;This username exceeds 20 character&lt;/Username&gt;\r\n    &lt;/Login&gt;\r\n\r\nThe Java-code to validate the XML-string against the XSD:\r\n\r\n    class XsdXmlJaxbValidationExample {\r\n         validateXml() {\r\n\r\n              String loginXml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;\r\n                  + &quot;&lt;Login&gt;&quot;\r\n                  + &quot;&lt;Username&gt;This username exceeds 20 character&lt;/Username&gt;&quot;\r\n                  + &quot;&lt;/Login&gt;&quot;;\r\n     \r\n              SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n              URL mainXsd = new ClassPathResource(&quot;Login.xsd&quot;).getURL();\r\n              Schema mainSchema = schemaFactory.newSchema(mainXsd);\r\n              Validator validator = mainSchema.newValidator();\r\n              validator.validate(new StreamSource(new StringReader(loginXml)));\r\n\r\n         }\r\n     }","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>Me and a colleague were fighting this for quite some hours and nothing seemed to be working. We would be getting errors like</p>\n<pre><code>cvc-elt.1: Cannot find the declaration of element 'Login'.\n</code></pre>\n<p>The most important thing in our case was to <strong>use an <em>URL</em> as resource</strong> instead of an <em>InputStream</em> when setting the schema with the <em>SchemaFactory</em>s method <em>newSchema(...)</em>. Our XSDs reside in the classpath so we use <em>ClassPathResource</em> to get the XSD files. See below XSDs + XML + Java example code. The XSDs were delivered to us as is.</p>\n<p>The main XSD (<em>Login.xsd</em>):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xs:schema xmlns:ns0=&quot;xmnls&quot;\n           xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           ns0:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           elementFormDefault=&quot;qualified&quot;\n           attributeFormDefault=&quot;unqualified&quot;&gt;\n   &lt;xs:include schemaLocation=&quot;CustomTypes.xsd&quot;/&gt;\n   &lt;xs:element name=&quot;Login&quot;&gt;      \n      &lt;xs:complexType&gt;\n         &lt;xs:sequence&gt;\n            &lt;xs:element name=&quot;Username&quot; type=&quot;Char20&quot;&gt;               \n            &lt;/xs:element&gt;            \n         &lt;/xs:sequence&gt;\n      &lt;/xs:complexType&gt;\n   &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p>The XSD (<em>CustomTypes.xsd</em>) being included from the main XSD (<em>Login.xsd</em>):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xs:schema xmlns:ns0=&quot;xmnls&quot;\n           xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\n           xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n           jaxb:extensionBindingPrefixes=&quot;xjc&quot;\n           jaxb:version=&quot;2.0&quot;\n           ns0:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           elementFormDefault=&quot;qualified&quot;\n           attributeFormDefault=&quot;unqualified&quot;&gt;   \n   &lt;xs:simpleType name=&quot;Char20&quot;&gt;      \n      &lt;xs:restriction base=&quot;xs:string&quot;&gt;\n         &lt;xs:pattern value=&quot;.{1,20}&quot;&gt;            \n         &lt;/xs:pattern&gt;\n      &lt;/xs:restriction&gt;\n   &lt;/xs:simpleType&gt;   \n&lt;/xs:schema&gt;\n</code></pre>\n<p>The XML to validate:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Login&gt;\n &lt;Username&gt;This username exceeds 20 character&lt;/Username&gt;\n&lt;/Login&gt;\n</code></pre>\n<p>The Java-code to validate the XML-string against the XSD:</p>\n<pre><code>class XsdXmlJaxbValidationExample {\n     validateXml() {\n\n          String loginXml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;\n              + &quot;&lt;Login&gt;&quot;\n              + &quot;&lt;Username&gt;This username exceeds 20 character&lt;/Username&gt;&quot;\n              + &quot;&lt;/Login&gt;&quot;;\n \n          SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n          URL mainXsd = new ClassPathResource(&quot;Login.xsd&quot;).getURL();\n          Schema mainSchema = schemaFactory.newSchema(mainXsd);\n          Validator validator = mainSchema.newValidator();\n          validator.validate(new StreamSource(new StringReader(loginXml)));\n\n     }\n }\n</code></pre>\n"}],"owner":{"account_id":105815,"reputation":1198,"user_id":282152,"accept_rate":87,"display_name":"Melanie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73513,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":2342859,"answer_count":11,"score":34,"last_activity_date":1691578869,"creation_date":1267199390,"question_id":2342808,"body_markdown":"I&#39;m using Java 5 javax.xml.validation.Validator to validate XML file. I&#39;ve done it for one schema that uses only imports and everything works fine. Now I&#39;m trying to validate with another schema that uses import and one include. The problem I have is that element in the main schema are ignored, the validation says it cannot find their declaration. \r\n\r\nHere is how I build the Schema:\r\n\r\n    InputStream includeInputStream = getClass().getClassLoader().getResource(&quot;include.xsd&quot;).openStream();\r\n    InputStream importInputStream = getClass().getClassLoader().getResource(&quot;import.xsd&quot;).openStream();\r\n    InputStream mainInputStream = getClass().getClassLoader().getResource(&quot;main.xsd&quot;).openStream();\r\n    Source[] sourceSchema = new SAXSource[]{includeInputStream , importInputStream, \r\n    mainInputStream };\r\n    Schema schema = factory.newSchema(sourceSchema);\r\n\r\nNow here is the extract of the declaration in main.xsd\r\n\r\n    &lt;xsd:schema xmlns=&quot;http://schema.omg.org/spec/BPMN/2.0&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:import=&quot;http://www.foo.com/import&quot; targetNamespace=&quot;http://main/namespace&quot; elementFormDefault=&quot;qualified&quot; attributeFormDefault=&quot;unqualified&quot;&gt;\r\n    \t&lt;xsd:import namespace=&quot;http://www.foo.com/import&quot; schemaLocation=&quot;import.xsd&quot;/&gt;\r\n    \t&lt;xsd:include schemaLocation=&quot;include.xsd&quot;/&gt;\r\n    \t&lt;xsd:element name=&quot;element&quot; type=&quot;tElement&quot;/&gt;\r\n    \t&lt;...&gt;\r\n    &lt;/xsd:schema&gt;\r\n\r\nIf I copy the code of my included XSD in the main.xsd, it works fine. If I don&#39;t, validation doesn&#39;t find the declaration of &quot;Element&quot;.","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>I'm using Java 5 javax.xml.validation.Validator to validate XML file. I've done it for one schema that uses only imports and everything works fine. Now I'm trying to validate with another schema that uses import and one include. The problem I have is that element in the main schema are ignored, the validation says it cannot find their declaration. </p>\n\n<p>Here is how I build the Schema:</p>\n\n<pre><code>InputStream includeInputStream = getClass().getClassLoader().getResource(\"include.xsd\").openStream();\nInputStream importInputStream = getClass().getClassLoader().getResource(\"import.xsd\").openStream();\nInputStream mainInputStream = getClass().getClassLoader().getResource(\"main.xsd\").openStream();\nSource[] sourceSchema = new SAXSource[]{includeInputStream , importInputStream, \nmainInputStream };\nSchema schema = factory.newSchema(sourceSchema);\n</code></pre>\n\n<p>Now here is the extract of the declaration in main.xsd</p>\n\n<pre><code>&lt;xsd:schema xmlns=\"http://schema.omg.org/spec/BPMN/2.0\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:import=\"http://www.foo.com/import\" targetNamespace=\"http://main/namespace\" elementFormDefault=\"qualified\" attributeFormDefault=\"unqualified\"&gt;\n    &lt;xsd:import namespace=\"http://www.foo.com/import\" schemaLocation=\"import.xsd\"/&gt;\n    &lt;xsd:include schemaLocation=\"include.xsd\"/&gt;\n    &lt;xsd:element name=\"element\" type=\"tElement\"/&gt;\n    &lt;...&gt;\n&lt;/xsd:schema&gt;\n</code></pre>\n\n<p>If I copy the code of my included XSD in the main.xsd, it works fine. If I don't, validation doesn't find the declaration of \"Element\".</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691587927,"post_id":76867067,"comment_id":135511857,"body_markdown":"The client version isn&#39;t required to match the server. Try upgrading","body":"The client version isn&#39;t required to match the server. Try upgrading"},{"owner":{"account_id":8266541,"reputation":69,"user_id":6215889,"display_name":"Stefan Sebastian"},"score":1,"creation_date":1691742162,"post_id":76867067,"comment_id":135535554,"body_markdown":"I tried various versions of kafka client : 2.3, 2.8, 3.5 but the issue persists.","body":"I tried various versions of kafka client : 2.3, 2.8, 3.5 but the issue persists."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691760167,"post_id":76867067,"comment_id":135539187,"body_markdown":"Is the error always mentioning &quot;node 0&quot;? Maybe there&#39;s a network problem related to that specific server. Or the thread running &quot;consumer-4&quot;... I&#39;d recommend setting debug/trace logging in your app and try to get more info. Or maybe server logs for &quot;node 0&quot;. Also, did you remove the groupId from the log message?","body":"Is the error always mentioning &quot;node 0&quot;? Maybe there&#39;s a network problem related to that specific server. Or the thread running &quot;consumer-4&quot;... I&#39;d recommend setting debug/trace logging in your app and try to get more info. Or maybe server logs for &quot;node 0&quot;. Also, did you remove the groupId from the log message?"},{"owner":{"account_id":8266541,"reputation":69,"user_id":6215889,"display_name":"Stefan Sebastian"},"score":1,"creation_date":1692005678,"post_id":76867067,"comment_id":135562465,"body_markdown":"Yes it is only node 0 because I have a single Kafka server (it&#39;s a test environment). I have set the finest log level for client app on org.apache.kafka.clients.*. I have found a workaround for the issue, rebooting the machine running the client app.","body":"Yes it is only node 0 because I have a single Kafka server (it&#39;s a test environment). I have set the finest log level for client app on org.apache.kafka.clients.*. I have found a workaround for the issue, rebooting the machine running the client app."}],"owner":{"account_id":8266541,"reputation":69,"user_id":6215889,"display_name":"Stefan Sebastian"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691578357,"creation_date":1691578357,"question_id":76867067,"body_markdown":"I have a Java application that consumes data from a Kafka topic (populated by a different application), using the kafka-clients lib. Usually it works fine but (without changing anything in configuration / deployment) it sometimes gets stuck with the following error: \r\n&gt; org.apache.kafka.clients.FetchSessionHandler handleError [Consumer clientId=consumer-4, groupId=] Error sending fetch request (sessionId=1914414120, epoch=INITIAL) to node 0: org.apache.kafka.common.errors.DisconnectException.\r\n\r\nThis error usually occurs after loading high volumes of data in the cluster (~500 messages per sec) but it persists for hours even if there is no activity.\r\n\r\nThe network between the client machine and VM running Kafka seems to be working fine (I can ping, access port with telnet). The Kafka VM has enough CPU, memory and space on disk and other apps running there work fine. Kafka broker log shows no warnings or errors.\r\nI have checked client and server versions to match, for Kafka 2_12 2.1.1\r\n\r\n\r\n","title":"Kafka 2.1.1 persistent client DisconnectException","body":"<p>I have a Java application that consumes data from a Kafka topic (populated by a different application), using the kafka-clients lib. Usually it works fine but (without changing anything in configuration / deployment) it sometimes gets stuck with the following error:</p>\n<blockquote>\n<p>org.apache.kafka.clients.FetchSessionHandler handleError [Consumer clientId=consumer-4, groupId=] Error sending fetch request (sessionId=1914414120, epoch=INITIAL) to node 0: org.apache.kafka.common.errors.DisconnectException.</p>\n</blockquote>\n<p>This error usually occurs after loading high volumes of data in the cluster (~500 messages per sec) but it persists for hours even if there is no activity.</p>\n<p>The network between the client machine and VM running Kafka seems to be working fine (I can ping, access port with telnet). The Kafka VM has enough CPU, memory and space on disk and other apps running there work fine. Kafka broker log shows no warnings or errors.\nI have checked client and server versions to match, for Kafka 2_12 2.1.1</p>\n"},{"tags":["java","maven","visual-studio-code","version","java-home"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1691567261,"post_id":76865363,"comment_id":135507468,"body_markdown":"[`java.configuration.runtimes`](https://code.visualstudio.com/docs/java/java-project#_configure-runtime-for-projects) maybe a little help.","body":"<a href=\"https://code.visualstudio.com/docs/java/java-project#_configure-runtime-for-projects\" rel=\"nofollow noreferrer\"><code>java.configuration.runtimes</code></a> maybe a little help."},{"owner":{"account_id":2680252,"reputation":57,"user_id":2315764,"display_name":"FER_Viborg"},"score":0,"creation_date":1691577345,"post_id":76865363,"comment_id":135509539,"body_markdown":"@JialeDu, thx for a reply but java.configuration.runtimes is for running java after the code has been compiled. I&#39;m searching for a way to use maven with specific java to build the code itself.","body":"@JialeDu, thx for a reply but java.configuration.runtimes is for running java after the code has been compiled. I&#39;m searching for a way to use maven with specific java to build the code itself."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":1,"creation_date":1691738426,"post_id":76865363,"comment_id":135534958,"body_markdown":"If you want, you can report it on [GitHub](https://github.com/redhat-developer/vscode-java/issues/new) to get a response from the developers.","body":"If you want, you can report it on <a href=\"https://github.com/redhat-developer/vscode-java/issues/new\" rel=\"nofollow noreferrer\">GitHub</a> to get a response from the developers."}],"owner":{"account_id":2680252,"reputation":57,"user_id":2315764,"display_name":"FER_Viborg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691578195,"creation_date":1691564732,"question_id":76865363,"body_markdown":"How do I set dynamic JAVA_HOME paths for maven?\r\n\r\nThere is a maven.terminal.customEnv variable I can set with this object:\r\n\r\n    {\r\n      &quot;environmentVariable&quot;: &quot;JAVA_HOME&quot;,\r\n      &quot;value&quot; : &quot;C:\\\\Java\\\\jdk-20.0.1&quot;\r\n    }\r\n\r\nbut that is static. Maven will always use defined value.\r\n\r\nI want to set multiple &quot;JAVA_HOME&quot; paths for maven so that the Visual Studio Code can run maven with the proper one based on the values in pom.xml.\r\n\r\n\r\nEDIT: For an example, in Eclipse I can choose Run As --&gt; Maven build ... and then choose Java that will be used to build the code in JRE section. It is still not an automatic process based on pom.xml but at least the build configuration is being saved in specific workspace. In another words, I can build 2 projects in parallel, one with e.g. Java 8 and one with Java 20. In VSCode I need to change JAVA_HOME for each different build because maven.terminal.customEnv is a global setting.\r\n\r\n`--show-version package` flag can show which Java is being used to build a code.","title":"Visual Studio Code - dynamic java for maven build","body":"<p>How do I set dynamic JAVA_HOME paths for maven?</p>\n<p>There is a maven.terminal.customEnv variable I can set with this object:</p>\n<pre><code>{\n  &quot;environmentVariable&quot;: &quot;JAVA_HOME&quot;,\n  &quot;value&quot; : &quot;C:\\\\Java\\\\jdk-20.0.1&quot;\n}\n</code></pre>\n<p>but that is static. Maven will always use defined value.</p>\n<p>I want to set multiple &quot;JAVA_HOME&quot; paths for maven so that the Visual Studio Code can run maven with the proper one based on the values in pom.xml.</p>\n<p>EDIT: For an example, in Eclipse I can choose Run As --&gt; Maven build ... and then choose Java that will be used to build the code in JRE section. It is still not an automatic process based on pom.xml but at least the build configuration is being saved in specific workspace. In another words, I can build 2 projects in parallel, one with e.g. Java 8 and one with Java 20. In VSCode I need to change JAVA_HOME for each different build because maven.terminal.customEnv is a global setting.</p>\n<p><code>--show-version package</code> flag can show which Java is being used to build a code.</p>\n"},{"tags":["java","mysql","spring","spring-boot","mybatis"],"answers":[{"tags":[],"owner":{"account_id":4844922,"reputation":1188,"user_id":3908814,"display_name":"Bejond"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539937145,"creation_date":1539937145,"answer_id":52888426,"question_id":52888189,"body_markdown":"You should put database properties in spring-boot configuration file like application.properties. After that, you can get datasource:\r\n\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    DataSourceBuilder.create()\r\n        .url(env.getProperty(&quot;spring.datasource.url&quot;))\r\n        .driverClassName(env.getProperty(&quot;spring.datasource.driver-class-name&quot;))\r\n        .username(env.getProperty(&quot;spring.datasource.username&quot;))\r\n        .password(env.getProperty(&quot;spring.datasource.password&quot;))\r\n        .build());\r\n\r\nThen use the datasource to get SqlSession:\r\n\r\n\t\tTransactionFactory transactionFactory = new JdbcTransactionFactory();\r\n\t\tEnvironment environment = new Environment(&quot;id&quot;, transactionFactory, &quot;id&quot;);\r\n\t\tConfiguration configuration = new Configuration(environment);\r\n\t\tconfiguration.addMapper(YourMapper.class);\r\n\r\n\t\treturn new SqlSessionTemplate(sqlSessionFactoryBuilder.build(configuration));\r\n\r\nThen use SqlSession get mapper:\r\n\r\n    sqlSession.getMapper(YourMapper.class);\r\n\r\nMybatis just needs a SqlSession to getMapper and run mapping, exposing mapping with a Java interface. So mybatis doesn&#39;t need to pay attention on datasource.","title":"How can I set the datasource in mybatis-config.xml when using springboot?","body":"<p>You should put database properties in spring-boot configuration file like application.properties. After that, you can get datasource:</p>\n\n<pre><code>@Autowired\nprivate Environment env;\n\nDataSourceBuilder.create()\n    .url(env.getProperty(\"spring.datasource.url\"))\n    .driverClassName(env.getProperty(\"spring.datasource.driver-class-name\"))\n    .username(env.getProperty(\"spring.datasource.username\"))\n    .password(env.getProperty(\"spring.datasource.password\"))\n    .build());\n</code></pre>\n\n<p>Then use the datasource to get SqlSession:</p>\n\n<pre><code>    TransactionFactory transactionFactory = new JdbcTransactionFactory();\n    Environment environment = new Environment(\"id\", transactionFactory, \"id\");\n    Configuration configuration = new Configuration(environment);\n    configuration.addMapper(YourMapper.class);\n\n    return new SqlSessionTemplate(sqlSessionFactoryBuilder.build(configuration));\n</code></pre>\n\n<p>Then use SqlSession get mapper:</p>\n\n<pre><code>sqlSession.getMapper(YourMapper.class);\n</code></pre>\n\n<p>Mybatis just needs a SqlSession to getMapper and run mapping, exposing mapping with a Java interface. So mybatis doesn't need to pay attention on datasource.</p>\n"},{"tags":[],"owner":{"account_id":2573819,"reputation":15175,"user_id":2231972,"display_name":"Roman-Stop RU aggression in UA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691578137,"creation_date":1539972144,"answer_id":52897764,"question_id":52888189,"body_markdown":"Mybatis machinery requires `DataSource` to create jdbc `Connection` that it can use to execute queries. In a regular setup that uses mybatis-spring this `DataSource` is configured as a bean in the spring context. Mappers are also beans in the spring context that use that datasource (indirectly via `SqlSession`).\r\n\r\nYou can configure the `DataSource` in `mybatis-config.xml` as described in the [documentation](http://www.mybatis.org/mybatis-3/configuration.html). The only problem is that in that case spring will not be aware of this `DataSource`, it will not be a bean in the spring context. And that&#39;s the problem that you face.\r\n \r\nSpring will not manage transactions for you in this case, you will not be able to inject mappers or `SqlSession` in your beans. Basically you will lose everything what mybatis-spring integration gives you so it makes very little (if any at all) sense to configure mybatis `DataSource` in mybatis config. \r\n\r\nIf you nevertheless do that you would need to [manually](http://www.mybatis.org/mybatis-3/getting-started.html#Building_SqlSessionFactory_from_XML) create `SqlSession` from the xml configuration and then manually commit/rollback transaction via `SqlSession.commit`/`SqlSession.rollback`.\r\n\r\n","title":"How can I set the datasource in mybatis-config.xml when using springboot?","body":"<p>Mybatis machinery requires <code>DataSource</code> to create jdbc <code>Connection</code> that it can use to execute queries. In a regular setup that uses mybatis-spring this <code>DataSource</code> is configured as a bean in the spring context. Mappers are also beans in the spring context that use that datasource (indirectly via <code>SqlSession</code>).</p>\n<p>You can configure the <code>DataSource</code> in <code>mybatis-config.xml</code> as described in the <a href=\"http://www.mybatis.org/mybatis-3/configuration.html\" rel=\"nofollow noreferrer\">documentation</a>. The only problem is that in that case spring will not be aware of this <code>DataSource</code>, it will not be a bean in the spring context. And that's the problem that you face.</p>\n<p>Spring will not manage transactions for you in this case, you will not be able to inject mappers or <code>SqlSession</code> in your beans. Basically you will lose everything what mybatis-spring integration gives you so it makes very little (if any at all) sense to configure mybatis <code>DataSource</code> in mybatis config.</p>\n<p>If you nevertheless do that you would need to <a href=\"http://www.mybatis.org/mybatis-3/getting-started.html#Building_SqlSessionFactory_from_XML\" rel=\"nofollow noreferrer\">manually</a> create <code>SqlSession</code> from the xml configuration and then manually commit/rollback transaction via <code>SqlSession.commit</code>/<code>SqlSession.rollback</code>.</p>\n"}],"owner":{"account_id":1478601,"reputation":3574,"user_id":1388421,"accept_rate":55,"display_name":"roast_soul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2451,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691578137,"creation_date":1539936230,"question_id":52888189,"body_markdown":"\r\nSpring Boot can create the datasource when I config the datasource in application.properties. As follows:\r\n\r\n    spring.datasource.url=jdbc:mysql://127.0.0.1:3306/demo?useUnicode=true&amp;characterEncoding=UTF-8\r\n    spring.datasource.username=root\r\n    spring.datasource.password=123\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n\r\nI also can set a mybatis-config file in `application.properties`. like:\r\n\r\n    mybatis.config-location=classpath:mybatis-config.xml\r\n\r\nAs we all know, the `mybatis-config.xml` can config the datasource,too.\r\nSo what if I don&#39;t set the datasource in `application.properties`,but only set the datasource in `mybatis-config.xml`?\r\n\r\nI tried, I removed the datasource configuration in `application.properties`, and set the datasource in mybatis-config.xml. But it didn&#39;t work.\r\n\r\n\r\nHow can I set the datasource in mybatis-config.xml when using springboot?\r\n\r\n\r\n\r\n","title":"How can I set the datasource in mybatis-config.xml when using springboot?","body":"<p>Spring Boot can create the datasource when I config the datasource in application.properties. As follows:</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://127.0.0.1:3306/demo?useUnicode=true&amp;characterEncoding=UTF-8\nspring.datasource.username=root\nspring.datasource.password=123\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n</code></pre>\n\n<p>I also can set a mybatis-config file in <code>application.properties</code>. like:</p>\n\n<pre><code>mybatis.config-location=classpath:mybatis-config.xml\n</code></pre>\n\n<p>As we all know, the <code>mybatis-config.xml</code> can config the datasource,too.\nSo what if I don't set the datasource in <code>application.properties</code>,but only set the datasource in <code>mybatis-config.xml</code>?</p>\n\n<p>I tried, I removed the datasource configuration in <code>application.properties</code>, and set the datasource in mybatis-config.xml. But it didn't work.</p>\n\n<p>How can I set the datasource in mybatis-config.xml when using springboot?</p>\n"},{"tags":["java","ssl-certificate"],"comments":[{"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"score":1,"creation_date":1489573003,"post_id":42806709,"comment_id":72726155,"body_markdown":"Try it with a higher java version. You might be using an outdated java version that doesn&#39;t support the encryption types used.","body":"Try it with a higher java version. You might be using an outdated java version that doesn&#39;t support the encryption types used."},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489573070,"post_id":42806709,"comment_id":72726203,"body_markdown":"I am using JAVA 8","body":"I am using JAVA 8"},{"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"score":0,"creation_date":1489573167,"post_id":42806709,"comment_id":72726267,"body_markdown":"You are doing the SOAP request on your own private server? On your test VM add the key to the trusted keys. For the public soap you don&#39;t need that since there are CA&#39;s that can vouch for the autenticty.","body":"You are doing the SOAP request on your own private server? On your test VM add the key to the trusted keys. For the public soap you don&#39;t need that since there are CA&#39;s that can vouch for the autenticty."},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489573413,"post_id":42806709,"comment_id":72726428,"body_markdown":"SOAP service is hosted on server that is using a self signed certificate. I am running my test from my local as well as any vm. I don&#39;t want to add the key to truststore in each vm. Is there any other way arround?","body":"SOAP service is hosted on server that is using a self signed certificate. I am running my test from my local as well as any vm. I don&#39;t want to add the key to truststore in each vm. Is there any other way arround?"},{"owner":{"account_id":2785683,"reputation":2653,"user_id":2397162,"accept_rate":61,"display_name":"niceman"},"score":0,"creation_date":1489573566,"post_id":42806709,"comment_id":72726553,"body_markdown":"@PrasantaBiswas self-signed certificates aren&#39;t accepted without manual addition to the trust store, browsers(chrome,firefox,etc) don&#39;t accept these as well","body":"@PrasantaBiswas self-signed certificates aren&#39;t accepted without manual addition to the trust store, browsers(chrome,firefox,etc) don&#39;t accept these as well"},{"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"score":0,"creation_date":1489573641,"post_id":42806709,"comment_id":72726608,"body_markdown":"Try the option number two from http://stackoverflow.com/questions/2893819/telling-java-to-accept-self-signed-ssl-certificate","body":"Try the option number two from <a href=\"http://stackoverflow.com/questions/2893819/telling-java-to-accept-self-signed-ssl-certificate\" title=\"telling java to accept self signed ssl certificate\">stackoverflow.com/questions/2893819/&hellip;</a>"},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489573733,"post_id":42806709,"comment_id":72726681,"body_markdown":"Tried this, didn&#39;t work for me.","body":"Tried this, didn&#39;t work for me."},{"owner":{"account_id":2785683,"reputation":2653,"user_id":2397162,"accept_rate":61,"display_name":"niceman"},"score":0,"creation_date":1489573758,"post_id":42806709,"comment_id":72726705,"body_markdown":"@PrasantaBiswas can you edit the question saying why didn&#39;t it work for you ?","body":"@PrasantaBiswas can you edit the question saying why didn&#39;t it work for you ?"}],"answers":[{"tags":[],"owner":{"account_id":414821,"reputation":509,"user_id":789255,"accept_rate":58,"display_name":"dereck"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1489573940,"creation_date":1489573940,"answer_id":42807149,"question_id":42806709,"body_markdown":"Try with Apache HTTP client, this works for me.\r\n\r\n    SSLContextBuilder builder = new SSLContextBuilder();\r\n    builder.loadTrustMaterial(null, new TrustStrategy() {\r\n         public boolean isTrusted(final X509Certificate[] chain, String authType) throws CertificateException {\r\n              return true;\r\n         }\r\n    });\r\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(builder.build());\r\n\r\n    CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\r\n\r\n    // GET or POST request with the client\r\n    ...\r\n","title":"How to bypass ssl certificate checking in java","body":"<p>Try with Apache HTTP client, this works for me.</p>\n\n<pre><code>SSLContextBuilder builder = new SSLContextBuilder();\nbuilder.loadTrustMaterial(null, new TrustStrategy() {\n     public boolean isTrusted(final X509Certificate[] chain, String authType) throws CertificateException {\n          return true;\n     }\n});\nSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(builder.build());\n\nCloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\n\n// GET or POST request with the client\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2987615,"reputation":1799,"user_id":2535987,"accept_rate":67,"display_name":"Monish Sen"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1489645921,"creation_date":1489574018,"answer_id":42807185,"question_id":42806709,"body_markdown":"**Edit :** Understand the vulnerability this would cause before using it. This is by no means recommended for production use. \r\n\r\nThe best way is to create a dummy trustmanager that trusts everything.\r\n\r\n     TrustManager[] dummyTrustManager = new TrustManager[] { new X509TrustManager() {\r\n          public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n            return null;\r\n          }\r\n    \r\n          public void checkClientTrusted(X509Certificate[] certs, String authType) {\r\n          }\r\n    \r\n          public void checkServerTrusted(X509Certificate[] certs, String authType) {\r\n          }\r\n        } };\r\n\r\nThen use the dummy trustmanager to initialize the SSL Context\r\n\r\n    SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n        sc.init(null, dummyTrustManager, new java.security.SecureRandom());\r\n\r\nFinally use the SSLContext to open connection\r\n\r\n    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    \r\n        URL url = new URL(&quot;https://myhost:8913/myservice/service?wsdl&quot;);\r\n\r\n\r\nThis question has already been answered here in more detail\r\n[https://stackoverflow.com/questions/19723415/java-overriding-function-to-disable-ssl-certificate-check][1]\r\n\r\n\r\n**Update:** \r\n\r\nAbove issue is due to certificate signature algorithm not being supported by Java. As per [this post][2], later releases of Java 8 have disabled md5 algorithm.\r\n\r\nTo enable md5 support, locate java.security file under &amp;lt;jre_home&amp;gt;/lib/security\r\nand locate the line (535)\r\n\r\n    jdk.certpath.disabledAlgorithms=MD2, MD5, RSA keySize &lt; 1024, \r\n\r\nand remove MD5\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/19723415/java-overriding-function-to-disable-ssl-certificate-check\r\n  [2]: https://blogs.oracle.com/java-platform-group/entry/strengthening_signatures","title":"How to bypass ssl certificate checking in java","body":"<p><strong>Edit :</strong> Understand the vulnerability this would cause before using it. This is by no means recommended for production use. </p>\n\n<p>The best way is to create a dummy trustmanager that trusts everything.</p>\n\n<pre><code> TrustManager[] dummyTrustManager = new TrustManager[] { new X509TrustManager() {\n      public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n        return null;\n      }\n\n      public void checkClientTrusted(X509Certificate[] certs, String authType) {\n      }\n\n      public void checkServerTrusted(X509Certificate[] certs, String authType) {\n      }\n    } };\n</code></pre>\n\n<p>Then use the dummy trustmanager to initialize the SSL Context</p>\n\n<pre><code>SSLContext sc = SSLContext.getInstance(\"SSL\");\n    sc.init(null, dummyTrustManager, new java.security.SecureRandom());\n</code></pre>\n\n<p>Finally use the SSLContext to open connection</p>\n\n<pre><code>HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n\n    URL url = new URL(\"https://myhost:8913/myservice/service?wsdl\");\n</code></pre>\n\n<p>This question has already been answered here in more detail\n<a href=\"https://stackoverflow.com/questions/19723415/java-overriding-function-to-disable-ssl-certificate-check\">Java: Overriding function to disable SSL certificate check</a></p>\n\n<p><strong>Update:</strong> </p>\n\n<p>Above issue is due to certificate signature algorithm not being supported by Java. As per <a href=\"https://blogs.oracle.com/java-platform-group/entry/strengthening_signatures\" rel=\"noreferrer\">this post</a>, later releases of Java 8 have disabled md5 algorithm.</p>\n\n<p>To enable md5 support, locate java.security file under &lt;jre_home&gt;/lib/security\nand locate the line (535)</p>\n\n<pre><code>jdk.certpath.disabledAlgorithms=MD2, MD5, RSA keySize &lt; 1024, \n</code></pre>\n\n<p>and remove MD5</p>\n"},{"tags":[],"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"down_vote_count":1,"up_vote_count":28,"is_accepted":true,"score":27,"last_activity_date":1509525045,"creation_date":1509525045,"answer_id":47050878,"question_id":42806709,"body_markdown":"Using X509ExtendedTrustManager instead of X509TrustManager() solved the problem. Here&#39;s the example:\r\n\r\n    public void trustAllHosts()\r\n        {\r\n            try\r\n            {\r\n                TrustManager[] trustAllCerts = new TrustManager[]{\r\n                        new X509ExtendedTrustManager()\r\n                        {\r\n                            @Override\r\n                            public java.security.cert.X509Certificate[] getAcceptedIssuers()\r\n                            {\r\n                                return null;\r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType)\r\n                            {\r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType)\r\n                            {\r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException\r\n                            {\r\n    \r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException\r\n                            {\r\n    \r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException\r\n                            {\r\n    \r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException\r\n                            {\r\n    \r\n                            }\r\n    \r\n                        }\r\n                };\r\n    \r\n                SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n                sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    \r\n                // Create all-trusting host name verifier\r\n                HostnameVerifier allHostsValid = new  HostnameVerifier()\r\n                {\r\n                    @Override\r\n                    public boolean verify(String hostname, SSLSession session)\r\n                    {\r\n                        return true;\r\n                    }\r\n                };\r\n                // Install the all-trusting host verifier\r\n                HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                log.error(&quot;Error occurred&quot;,e);\r\n            }\r\n        }","title":"How to bypass ssl certificate checking in java","body":"<p>Using X509ExtendedTrustManager instead of X509TrustManager() solved the problem. Here's the example:</p>\n\n<pre><code>public void trustAllHosts()\n    {\n        try\n        {\n            TrustManager[] trustAllCerts = new TrustManager[]{\n                    new X509ExtendedTrustManager()\n                    {\n                        @Override\n                        public java.security.cert.X509Certificate[] getAcceptedIssuers()\n                        {\n                            return null;\n                        }\n\n                        @Override\n                        public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType)\n                        {\n                        }\n\n                        @Override\n                        public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType)\n                        {\n                        }\n\n                        @Override\n                        public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException\n                        {\n\n                        }\n\n                        @Override\n                        public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException\n                        {\n\n                        }\n\n                        @Override\n                        public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException\n                        {\n\n                        }\n\n                        @Override\n                        public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException\n                        {\n\n                        }\n\n                    }\n            };\n\n            SSLContext sc = SSLContext.getInstance(\"SSL\");\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\n            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n\n            // Create all-trusting host name verifier\n            HostnameVerifier allHostsValid = new  HostnameVerifier()\n            {\n                @Override\n                public boolean verify(String hostname, SSLSession session)\n                {\n                    return true;\n                }\n            };\n            // Install the all-trusting host verifier\n            HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\n        }\n        catch (Exception e)\n        {\n            log.error(\"Error occurred\",e);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13697,"reputation":7703,"user_id":27658,"display_name":"Johannes Brodwall"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563569757,"creation_date":1563569757,"answer_id":57119505,"question_id":42806709,"body_markdown":"Instead of using `HttpsURLConnection.setDefaultSSLSocketFactory` and your own implementation of `TrustManager` or `X509ExtendedTrustManager`, you can use `TrustManagerFactory` with a `KeyStore` with the certificate that issued the certificate you need to trust (for a self-signed certificate, this is the same as the host certificate) and call `HttpsURLConnection.setSSLSocketFactory` on the specific instance. This is both less code and avoids the security problems with trusting all HTTPS certicates.\r\n\r\nIn `main`:\r\n\r\n```java\r\n            if (url.getProtocol().toLowerCase().equals(&quot;https&quot;)) {\r\n                HttpsURLConnection https = (HttpsURLConnection) url.openConnection();\r\n                https.setSSLSocketFactory(createSSLSocketFactory());\r\n                http = https;\r\n            }\r\n``` \r\n\r\nThe method `createSSLSocketFactory` looks like this:\r\n\r\n```java\r\n    private static SSLSocketFactory createSSLSocketFactory() {\r\n         File crtFile = new File(&quot;server.crt&quot;);\r\n         Certificate certificate =          CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(new FileInputStream(crtFile));\r\n\r\n         KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n         keyStore.load(null, null);\r\n         keyStore.setCertificateEntry(&quot;server&quot;, certificate);\r\n\r\n         TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n         trustManagerFactory.init(keyStore);\r\n\r\n         SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n         sslContext.init(null, trustManagerFactory.getTrustManagers(), null);\r\n\r\n         return sslContext.getSocketFactory();\r\n    }\r\n```","title":"How to bypass ssl certificate checking in java","body":"<p>Instead of using <code>HttpsURLConnection.setDefaultSSLSocketFactory</code> and your own implementation of <code>TrustManager</code> or <code>X509ExtendedTrustManager</code>, you can use <code>TrustManagerFactory</code> with a <code>KeyStore</code> with the certificate that issued the certificate you need to trust (for a self-signed certificate, this is the same as the host certificate) and call <code>HttpsURLConnection.setSSLSocketFactory</code> on the specific instance. This is both less code and avoids the security problems with trusting all HTTPS certicates.</p>\n\n<p>In <code>main</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>            if (url.getProtocol().toLowerCase().equals(\"https\")) {\n                HttpsURLConnection https = (HttpsURLConnection) url.openConnection();\n                https.setSSLSocketFactory(createSSLSocketFactory());\n                http = https;\n            }\n</code></pre>\n\n<p>The method <code>createSSLSocketFactory</code> looks like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    private static SSLSocketFactory createSSLSocketFactory() {\n         File crtFile = new File(\"server.crt\");\n         Certificate certificate =          CertificateFactory.getInstance(\"X.509\").generateCertificate(new FileInputStream(crtFile));\n\n         KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n         keyStore.load(null, null);\n         keyStore.setCertificateEntry(\"server\", certificate);\n\n         TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n         trustManagerFactory.init(keyStore);\n\n         SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n         sslContext.init(null, trustManagerFactory.getTrustManagers(), null);\n\n         return sslContext.getSocketFactory();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10755660,"reputation":80,"user_id":7913696,"display_name":"Adriel Iclodean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691577698,"creation_date":1691577698,"answer_id":76866969,"question_id":42806709,"body_markdown":"Another way if using httpClient from Apache:\r\n```\r\npublic static CloseableHttpClient getCloseableHttpClient()\r\n{\r\n\tCloseableHttpClient httpClient = null;\r\n\ttry {\r\n\t\thttpClient = HttpClients.custom().setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n\t\t        .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy()\r\n\t\t        {\r\n\t\t            public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException\r\n\t\t            {\r\n\t\t                return true;\r\n\t\t            }\r\n\t\t        }).build()).build();\r\n\r\n\t} catch (KeyManagementException e) {\r\n\t\tLOGGER.error(&quot;KeyManagementException in creating http client instance&quot;, e);\r\n\t} catch (NoSuchAlgorithmException e) {\r\n\t\tLOGGER.error(&quot;NoSuchAlgorithmException in creating http client instance&quot;, e);\r\n\t} catch (KeyStoreException e) {\r\n\t\tLOGGER.error(&quot;KeyStoreException in creating http client instance&quot;, e);\r\n\t}\r\n\treturn httpClient;\r\n}\r\n```\r\n\r\nAnd then:\r\nHttpPost post = new HttpPost(&quot;your uri&quot;);\r\n\r\nCloseableHttpResponse response = getCloseableHttpClient.execute(post);\r\n\r\nAnd of course all the try-catches blocks (or use try with resources)","title":"How to bypass ssl certificate checking in java","body":"<p>Another way if using httpClient from Apache:</p>\n<pre><code>public static CloseableHttpClient getCloseableHttpClient()\n{\n    CloseableHttpClient httpClient = null;\n    try {\n        httpClient = HttpClients.custom().setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy()\n                {\n                    public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException\n                    {\n                        return true;\n                    }\n                }).build()).build();\n\n    } catch (KeyManagementException e) {\n        LOGGER.error(&quot;KeyManagementException in creating http client instance&quot;, e);\n    } catch (NoSuchAlgorithmException e) {\n        LOGGER.error(&quot;NoSuchAlgorithmException in creating http client instance&quot;, e);\n    } catch (KeyStoreException e) {\n        LOGGER.error(&quot;KeyStoreException in creating http client instance&quot;, e);\n    }\n    return httpClient;\n}\n</code></pre>\n<p>And then:\nHttpPost post = new HttpPost(&quot;your uri&quot;);</p>\n<p>CloseableHttpResponse response = getCloseableHttpClient.execute(post);</p>\n<p>And of course all the try-catches blocks (or use try with resources)</p>\n"}],"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117099,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":47050878,"answer_count":5,"score":19,"last_activity_date":1691577698,"creation_date":1489572848,"question_id":42806709,"body_markdown":"I want access a SOAP webservice url having https hosted in a remote vm. I am getting an exception while accessing it using HttpURLConnection.\r\n\r\nHere&#39;s my code:\r\n\r\n    import javax.net.ssl.*;\r\n    import java.io.OutputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    /**\r\n     * Created by prasantabiswas on 07/03/17.\r\n     */\r\n    public class Main\r\n    {\r\n        public static void main(String [] args)\r\n        {\r\n            try\r\n            {\r\n                URL url = new URL(&quot;https://myhost:8913/myservice/service?wsdl&quot;);\r\n                HttpURLConnection http = null;\r\n    \r\n                if (url.getProtocol().toLowerCase().equals(&quot;https&quot;)) {\r\n                    trustAllHosts();\r\n                    HttpsURLConnection https = (HttpsURLConnection) url.openConnection();\r\n                    https.setHostnameVerifier(DO_NOT_VERIFY);\r\n                    http = https;\r\n                } else {\r\n                    http = (HttpURLConnection) url.openConnection();\r\n                }\r\n                String SOAPAction=&quot;&quot;;\r\n    //            http.setRequestProperty(&quot;Content-Length&quot;, String.valueOf(b.length));\r\n                http.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml; charset=utf-8&quot;);\r\n                http.setRequestProperty(&quot;SOAPAction&quot;, SOAPAction);\r\n                http.setRequestMethod(&quot;GET&quot;);\r\n                http.setDoOutput(true);\r\n                http.setDoInput(true);\r\n                OutputStream out = http.getOutputStream();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        final static HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() {\r\n            public boolean verify(String hostname, SSLSession session) {\r\n                return true;\r\n            }\r\n        };\r\n    \r\n        private static void trustAllHosts() {\r\n            // Create a trust manager that does not validate certificate chains\r\n            TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\r\n                public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n                    return new java.security.cert.X509Certificate[] {};\r\n                }\r\n    \r\n                public void checkClientTrusted(X509Certificate[] chain,\r\n                                               String authType) throws CertificateException\r\n                {\r\n                }\r\n    \r\n                public void checkServerTrusted(X509Certificate[] chain,\r\n                                               String authType) throws CertificateException {\r\n                }\r\n            } };\r\n    \r\n            // Install the all-trusting trust manager\r\n            try {\r\n                SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n                sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n                HttpsURLConnection\r\n                        .setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nI&#39;m getting the following exception:\r\n\r\n    javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints\r\n    \tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\r\n    \tat sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1949)\r\n    \tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:302)\r\n    \tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)\r\n    \tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1509)\r\n    \tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)\r\n    \tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)\r\n    \tat sun.security.ssl.Handshaker.process_record(Handshaker.java:914)\r\n    \tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1062)\r\n    \tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)\r\n    \tat sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)\r\n    \tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1283)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1258)\r\n    \tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)\r\n    \tat Main.main(Main.java:35)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\r\n    Caused by: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints\r\n    \tat sun.security.ssl.AbstractTrustManagerWrapper.checkAlgorithmConstraints(SSLContextImpl.java:1055)\r\n    \tat sun.security.ssl.AbstractTrustManagerWrapper.checkAdditionalTrust(SSLContextImpl.java:981)\r\n    \tat sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:923)\r\n    \tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1491)\r\n    \t... 18 more\r\n\r\nTried different solution from the google search, Non of them worked. I want to avoid using keytool because I will be running my tests on different vm.\r\n\r\nDoes anyone have any solution for this?","title":"How to bypass ssl certificate checking in java","body":"<p>I want access a SOAP webservice url having https hosted in a remote vm. I am getting an exception while accessing it using HttpURLConnection.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>import javax.net.ssl.*;\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\n/**\n * Created by prasantabiswas on 07/03/17.\n */\npublic class Main\n{\n    public static void main(String [] args)\n    {\n        try\n        {\n            URL url = new URL(\"https://myhost:8913/myservice/service?wsdl\");\n            HttpURLConnection http = null;\n\n            if (url.getProtocol().toLowerCase().equals(\"https\")) {\n                trustAllHosts();\n                HttpsURLConnection https = (HttpsURLConnection) url.openConnection();\n                https.setHostnameVerifier(DO_NOT_VERIFY);\n                http = https;\n            } else {\n                http = (HttpURLConnection) url.openConnection();\n            }\n            String SOAPAction=\"\";\n//            http.setRequestProperty(\"Content-Length\", String.valueOf(b.length));\n            http.setRequestProperty(\"Content-Type\", \"text/xml; charset=utf-8\");\n            http.setRequestProperty(\"SOAPAction\", SOAPAction);\n            http.setRequestMethod(\"GET\");\n            http.setDoOutput(true);\n            http.setDoInput(true);\n            OutputStream out = http.getOutputStream();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    final static HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() {\n        public boolean verify(String hostname, SSLSession session) {\n            return true;\n        }\n    };\n\n    private static void trustAllHosts() {\n        // Create a trust manager that does not validate certificate chains\n        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\n            public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                return new java.security.cert.X509Certificate[] {};\n            }\n\n            public void checkClientTrusted(X509Certificate[] chain,\n                                           String authType) throws CertificateException\n            {\n            }\n\n            public void checkServerTrusted(X509Certificate[] chain,\n                                           String authType) throws CertificateException {\n            }\n        } };\n\n        // Install the all-trusting trust manager\n        try {\n            SSLContext sc = SSLContext.getInstance(\"SSL\");\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\n            HttpsURLConnection\n                    .setDefaultSSLSocketFactory(sc.getSocketFactory());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>I'm getting the following exception:</p>\n\n<pre><code>javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1949)\n    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:302)\n    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)\n    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1509)\n    at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)\n    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)\n    at sun.security.ssl.Handshaker.process_record(Handshaker.java:914)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1062)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)\n    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)\n    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1283)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1258)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)\n    at Main.main(Main.java:35)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\nCaused by: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints\n    at sun.security.ssl.AbstractTrustManagerWrapper.checkAlgorithmConstraints(SSLContextImpl.java:1055)\n    at sun.security.ssl.AbstractTrustManagerWrapper.checkAdditionalTrust(SSLContextImpl.java:981)\n    at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:923)\n    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1491)\n    ... 18 more\n</code></pre>\n\n<p>Tried different solution from the google search, Non of them worked. I want to avoid using keytool because I will be running my tests on different vm.</p>\n\n<p>Does anyone have any solution for this?</p>\n"},{"tags":["java","jakarta-mail","http-proxy"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1459242500,"post_id":36278073,"comment_id":60186074,"body_markdown":"Your question doesn&#39;t make sense. HTTP proxies are for HTTP. JavaMail uses SMTP and POP3 and IMAP. Not HTTP.","body":"Your question doesn&#39;t make sense. HTTP proxies are for HTTP. JavaMail uses SMTP and POP3 and IMAP. Not HTTP."},{"owner":{"account_id":7612036,"reputation":595,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"score":0,"creation_date":1459243527,"post_id":36278073,"comment_id":60186764,"body_markdown":"That&#39;s my point. Do you mean that it is no way to use http proxy for javamail. So, does javamial can use socks proxy? then how to use?","body":"That&#39;s my point. Do you mean that it is no way to use http proxy for javamail. So, does javamial can use socks proxy? then how to use?"},{"owner":{"account_id":5237756,"reputation":2929,"user_id":4185813,"accept_rate":58,"display_name":"Ajay Kulkarni"},"score":0,"creation_date":1459244682,"post_id":36278073,"comment_id":60187568,"body_markdown":"why do you want that? SMTP should be good, right?","body":"why do you want that? SMTP should be good, right?"},{"owner":{"account_id":7612036,"reputation":595,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"score":0,"creation_date":1459299429,"post_id":36278073,"comment_id":60220122,"body_markdown":"I can not get you. SMTP is a protocol to send email. But my point is using POP3 or IMAP to receive mail.","body":"I can not get you. SMTP is a protocol to send email. But my point is using POP3 or IMAP to receive mail."}],"answers":[{"tags":[],"owner":{"account_id":1032936,"reputation":29659,"user_id":1040885,"display_name":"Bill Shannon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1459277886,"creation_date":1459277886,"answer_id":36292883,"question_id":36278073,"body_markdown":"See the JavaMail FAQ:\r\n\r\n  - [How do I configure JavaMail to work through my proxy server?][1]\r\n\r\n&gt; ...  Without such a SOCKS server, if you want to use JavaMail to access mail servers outside the firewall indirectly, you might be able to use a program such as [Corkscrew][2] or [connect][3] to tunnel TCP connections through an HTTP proxy server. JavaMail does not support direct access through an HTTP proxy web server. \r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javamail/faq/index.html#proxy\r\n  [2]: http://en.wikipedia.org/wiki/Corkscrew_%28program%29\r\n  [3]: https://bitbucket.org/gotoh/connect/wiki/Home","title":"How to let javamail support http proxy","body":"<p>See the JavaMail FAQ:</p>\n\n<ul>\n<li><a href=\"http://www.oracle.com/technetwork/java/javamail/faq/index.html#proxy\" rel=\"nofollow\">How do I configure JavaMail to work through my proxy server?</a></li>\n</ul>\n\n<blockquote>\n  <p>...  Without such a SOCKS server, if you want to use JavaMail to access mail servers outside the firewall indirectly, you might be able to use a program such as <a href=\"http://en.wikipedia.org/wiki/Corkscrew_%28program%29\" rel=\"nofollow\">Corkscrew</a> or <a href=\"https://bitbucket.org/gotoh/connect/wiki/Home\" rel=\"nofollow\">connect</a> to tunnel TCP connections through an HTTP proxy server. JavaMail does not support direct access through an HTTP proxy web server. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7012570,"reputation":179,"user_id":13193049,"display_name":"Tamilvanan T"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691577381,"creation_date":1533392833,"answer_id":51686538,"question_id":36278073,"body_markdown":"javamail api 1.6 supports web server proxy\r\n\r\nset these properties \r\n\r\n`mail.protocol.proxy.host`\r\n\r\n`mail.protocol.proxy.port`\r\n\r\nfor example to use smtp you can set as below\r\nfor **smtp** set as\r\n\r\n`mail.smtp.proxy.host`\r\n\r\n`mail.smtp.proxy.port`","title":"How to let javamail support http proxy","body":"<p>javamail api 1.6 supports web server proxy</p>\n<p>set these properties</p>\n<p><code>mail.protocol.proxy.host</code></p>\n<p><code>mail.protocol.proxy.port</code></p>\n<p>for example to use smtp you can set as below\nfor <strong>smtp</strong> set as</p>\n<p><code>mail.smtp.proxy.host</code></p>\n<p><code>mail.smtp.proxy.port</code></p>\n"},{"tags":[],"owner":{"account_id":12696755,"reputation":67,"user_id":9224955,"display_name":"Katighar Umesh"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1539780011,"creation_date":1539780011,"answer_id":52855090,"question_id":36278073,"body_markdown":"As per the latest release of Javamail API 1.6.2 , JavaMail supports accessing mail servers through a web proxy server and also authenticating to the proxy server. Please see my code below.\r\n\r\n    import java.io.IOException;\r\n    import java.net.Authenticator;\r\n    import java.net.MalformedURLException;\r\n    import java.net.PasswordAuthentication;\r\n    import java.util.Properties;\r\n    import javax.activation.DataHandler;\r\n    import javax.mail.BodyPart;\r\n    import javax.mail.Flags;\r\n    import javax.mail.Flags.Flag;\r\n    import javax.mail.Folder;\r\n    import javax.mail.Message;\r\n    import javax.mail.MessagingException;\r\n    import javax.mail.Multipart;\r\n    import javax.mail.NoSuchProviderException;\r\n    import javax.mail.Session;\r\n    import javax.mail.Store;\r\n    import javax.mail.search.FlagTerm;\r\n    \r\n    public class ReadMailProxy {\r\n    \r\n    \tpublic static void receiveMail(String userName, String password) {\r\n    \t\ttry {\r\n    \t\t\tString proxyIP = &quot;124.124.124.14&quot;;\r\n    \t\t\tString proxyPort = &quot;4154&quot;;\r\n    \t\t\tString proxyUser = &quot;test&quot;;\r\n    \t\t\tString proxyPassword = &quot;test123&quot;;\r\n    \t\t\tProperties prop = new Properties();\r\n    \t\t\tprop.setProperty(&quot;mail.imaps.proxy.host&quot;, proxyIP);\r\n    \t\t\tprop.setProperty(&quot;mail.imaps.proxy.port&quot;, proxyPort);\r\n    \t\t\tprop.setProperty(&quot;mail.imaps.proxy.user&quot;, proxyUser);\r\n    \t\t\tprop.setProperty(&quot;mail.imaps.proxy.password&quot;, proxyPassword);\r\n    \r\n    \t\t\tSession eSession = Session.getInstance(prop);\r\n    \r\n    \t\t\tStore eStore = eSession.getStore(&quot;imaps&quot;);\r\n    \t\t\teStore.connect(&quot;imap.mail.yahoo.com&quot;, userName, password);\r\n    \r\n    \t\t\tFolder eFolder = eStore.getFolder(&quot;Inbox&quot;);\r\n    \t\t\teFolder.open(Folder.READ_WRITE);\r\n    \t\t\tMessage messages[] = eFolder.search(new FlagTerm(new Flags(Flags.Flag.SEEN), false));\r\n    \t\t\tSystem.out.println(messages.length);\r\n    \t\t\tfor (int i = messages.length - 3; i &lt; messages.length - 2; i++) {\r\n    \t\t\t\tMessage message = messages[i];\r\n    \t\t\t\tSystem.out.println(&quot;Email Number::&quot; + (i + 1));\r\n    \t\t\t\tSystem.out.println(&quot;Subject::&quot; + message.getSubject());\r\n    \t\t\t\tSystem.out.println(&quot;From::&quot; + message.getFrom()[0]);\r\n    \t\t\t\tSystem.out.println(&quot;Date::&quot; + message.getSentDate());\r\n    \r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tMultipart multipart = (Multipart) message.getContent();\r\n    \r\n    \t\t\t\t\tfor (int x = 0; x &lt; multipart.getCount(); x++) {\r\n    \t\t\t\t\t\tBodyPart bodyPart = multipart.getBodyPart(x);\r\n    \r\n    \t\t\t\t\t\tString disposition = bodyPart.getDisposition();\r\n    \r\n    \t\t\t\t\t\tif (disposition != null &amp;&amp; (disposition.equals(BodyPart.ATTACHMENT))) {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;Mail have some attachment : &quot;);\r\n    \r\n    \t\t\t\t\t\t\tDataHandler handler = bodyPart.getDataHandler();\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;file name : &quot; + handler.getName());\r\n    \t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\tSystem.out.println(bodyPart.getContent());\r\n    \t\t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t}\r\n    \t\t\t\t} catch (Exception e) {\r\n    \t\t\t\t\tSystem.out.println(&quot;Content: &quot; + message.getContent().toString());\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tmessage.setFlag(Flag.SEEN, true);\r\n    \t\t\t}\r\n    \t\t\teFolder.close(true);\r\n    \t\t\teStore.close();\r\n    \r\n    \t\t} catch (NoSuchProviderException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (MessagingException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (MalformedURLException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\treceiveMail(&quot;umesh@yahoo.com&quot;, &quot;test123&quot;);\r\n    \t}\r\n    \r\n    }\r\n","title":"How to let javamail support http proxy","body":"<p>As per the latest release of Javamail API 1.6.2 , JavaMail supports accessing mail servers through a web proxy server and also authenticating to the proxy server. Please see my code below.</p>\n\n<pre><code>import java.io.IOException;\nimport java.net.Authenticator;\nimport java.net.MalformedURLException;\nimport java.net.PasswordAuthentication;\nimport java.util.Properties;\nimport javax.activation.DataHandler;\nimport javax.mail.BodyPart;\nimport javax.mail.Flags;\nimport javax.mail.Flags.Flag;\nimport javax.mail.Folder;\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.Multipart;\nimport javax.mail.NoSuchProviderException;\nimport javax.mail.Session;\nimport javax.mail.Store;\nimport javax.mail.search.FlagTerm;\n\npublic class ReadMailProxy {\n\n    public static void receiveMail(String userName, String password) {\n        try {\n            String proxyIP = \"124.124.124.14\";\n            String proxyPort = \"4154\";\n            String proxyUser = \"test\";\n            String proxyPassword = \"test123\";\n            Properties prop = new Properties();\n            prop.setProperty(\"mail.imaps.proxy.host\", proxyIP);\n            prop.setProperty(\"mail.imaps.proxy.port\", proxyPort);\n            prop.setProperty(\"mail.imaps.proxy.user\", proxyUser);\n            prop.setProperty(\"mail.imaps.proxy.password\", proxyPassword);\n\n            Session eSession = Session.getInstance(prop);\n\n            Store eStore = eSession.getStore(\"imaps\");\n            eStore.connect(\"imap.mail.yahoo.com\", userName, password);\n\n            Folder eFolder = eStore.getFolder(\"Inbox\");\n            eFolder.open(Folder.READ_WRITE);\n            Message messages[] = eFolder.search(new FlagTerm(new Flags(Flags.Flag.SEEN), false));\n            System.out.println(messages.length);\n            for (int i = messages.length - 3; i &lt; messages.length - 2; i++) {\n                Message message = messages[i];\n                System.out.println(\"Email Number::\" + (i + 1));\n                System.out.println(\"Subject::\" + message.getSubject());\n                System.out.println(\"From::\" + message.getFrom()[0]);\n                System.out.println(\"Date::\" + message.getSentDate());\n\n                try {\n                    Multipart multipart = (Multipart) message.getContent();\n\n                    for (int x = 0; x &lt; multipart.getCount(); x++) {\n                        BodyPart bodyPart = multipart.getBodyPart(x);\n\n                        String disposition = bodyPart.getDisposition();\n\n                        if (disposition != null &amp;&amp; (disposition.equals(BodyPart.ATTACHMENT))) {\n                            System.out.println(\"Mail have some attachment : \");\n\n                            DataHandler handler = bodyPart.getDataHandler();\n                            System.out.println(\"file name : \" + handler.getName());\n                        } else {\n                            System.out.println(bodyPart.getContent());\n                        }\n\n                    }\n                } catch (Exception e) {\n                    System.out.println(\"Content: \" + message.getContent().toString());\n                }\n\n                message.setFlag(Flag.SEEN, true);\n            }\n            eFolder.close(true);\n            eStore.close();\n\n        } catch (NoSuchProviderException e) {\n            e.printStackTrace();\n        } catch (MessagingException e) {\n            e.printStackTrace();\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n    public static void main(String[] args) {\n        receiveMail(\"umesh@yahoo.com\", \"test123\");\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11678827,"reputation":21,"user_id":8551327,"display_name":"Tim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607635718,"creation_date":1607635718,"answer_id":65242583,"question_id":36278073,"body_markdown":"The implementation only support basic authentication for web proxy. You can find the source code in  com.sun.mail.util.SocketFetcher.\r\n\r\nSince javamail support NTLM authentication already, it is not hard to support NTLM authentication for web proxy. ","title":"How to let javamail support http proxy","body":"<p>The implementation only support basic authentication for web proxy. You can find the source code in  com.sun.mail.util.SocketFetcher.</p>\n<p>Since javamail support NTLM authentication already, it is not hard to support NTLM authentication for web proxy.</p>\n"}],"owner":{"account_id":7612036,"reputation":595,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8488,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36292883,"answer_count":4,"score":2,"last_activity_date":1691577381,"creation_date":1459236645,"question_id":36278073,"body_markdown":"I found that javamail only support socks. Is there any solution I can use to support http proxy?\r\n\r\n    public class MailConnectionTest {\r\n     public static void main(String args[]) throws MessagingException {\r\n       Properties props = MailConnectionTest.getProperties();\r\n       Session session = Session.getDefaultInstance(props, null);\r\n       String protocol = &quot;pop3&quot;;\r\n       String host = &quot;pop.163.com&quot;;\r\n       String username = &quot;email username&quot;;\r\n       String password = &quot;1Qaz2wsx3edc&amp;&quot;;\r\n       Store store = session.getStore(protocol);\r\n       store.connect(host, username, password);\r\n       System.out.println(&quot;Success&quot;);\r\n    }\r\n    private static Properties getProperties() {\r\n     Properties props = System.getProperties();\r\n     props.put(&quot;mail.debug&quot;, &quot;false&quot;);\r\n     // Proxy\r\n     props.put(&quot;proxySet&quot;, &quot;true&quot;);\r\n     props.put(&quot;http.proxyHost&quot;, &quot;proxyAdderss&quot;);\r\n     props.put(&quot;http.proxyPort&quot;, &quot;8080&quot;);\r\n     return props;\r\n    }\r\n    }","title":"How to let javamail support http proxy","body":"<p>I found that javamail only support socks. Is there any solution I can use to support http proxy?</p>\n\n<pre><code>public class MailConnectionTest {\n public static void main(String args[]) throws MessagingException {\n   Properties props = MailConnectionTest.getProperties();\n   Session session = Session.getDefaultInstance(props, null);\n   String protocol = \"pop3\";\n   String host = \"pop.163.com\";\n   String username = \"email username\";\n   String password = \"1Qaz2wsx3edc&amp;\";\n   Store store = session.getStore(protocol);\n   store.connect(host, username, password);\n   System.out.println(\"Success\");\n}\nprivate static Properties getProperties() {\n Properties props = System.getProperties();\n props.put(\"mail.debug\", \"false\");\n // Proxy\n props.put(\"proxySet\", \"true\");\n props.put(\"http.proxyHost\", \"proxyAdderss\");\n props.put(\"http.proxyPort\", \"8080\");\n return props;\n}\n}\n</code></pre>\n"},{"tags":["java","tomcat","jersey-2.0"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1586419429,"post_id":61069514,"comment_id":108122143,"body_markdown":"Your jars need to be in WEB-INF/lib","body":"Your jars need to be in WEB-INF/lib"},{"owner":{"account_id":12298879,"reputation":33,"user_id":8973603,"display_name":"Mohamed Moustafa"},"score":0,"creation_date":1586430628,"post_id":61069514,"comment_id":108127739,"body_markdown":"@PaulSamsotha I already tried to run it with the jar files in WEB-INF/lib. It didn&#39;t work","body":"@PaulSamsotha I already tried to run it with the jar files in WEB-INF/lib. It didn&#39;t work"}],"answers":[{"tags":[],"owner":{"account_id":12298879,"reputation":33,"user_id":8973603,"display_name":"Mohamed Moustafa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691577198,"creation_date":1586430794,"answer_id":61119851,"question_id":61069514,"body_markdown":"There were a mistake in the dependencies, they were incorrect.\r\nThe working set of dependencies are as follow:\r\n[List of Dependencies][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oMWNM.png\r\n\r\nThe List of all jersey bundles with complete dependencies \r\n&lt;a href=&quot;https://repo1.maven.org/maven2/org/glassfish/jersey/bundles/jaxrs-ri/&quot;&gt;Link&lt;/a&gt;\r\n\r\nOr you can download jersey download the full dependencies bundle from this &lt;a href=&quot;https://repo1.maven.org/maven2/org/glassfish/jersey/bundles/jaxrs-ri/2.26/jaxrs-ri-2.26.zip&quot;&gt;Link&lt;/a&gt;","title":"Jersey 2.25 and Tomcat 9.0.33 always responding 404 Not found","body":"<p>There were a mistake in the dependencies, they were incorrect.\nThe working set of dependencies are as follow:\n<a href=\"https://i.stack.imgur.com/oMWNM.png\" rel=\"nofollow noreferrer\">List of Dependencies</a></p>\n<p>The List of all jersey bundles with complete dependencies\n<a href=\"https://repo1.maven.org/maven2/org/glassfish/jersey/bundles/jaxrs-ri/\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Or you can download jersey download the full dependencies bundle from this <a href=\"https://repo1.maven.org/maven2/org/glassfish/jersey/bundles/jaxrs-ri/2.26/jaxrs-ri-2.26.zip\" rel=\"nofollow noreferrer\">Link</a></p>\n"}],"owner":{"account_id":12298879,"reputation":33,"user_id":8973603,"display_name":"Mohamed Moustafa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61119851,"answer_count":1,"score":1,"last_activity_date":1691577198,"creation_date":1586209841,"question_id":61069514,"body_markdown":"I have been searching for so many days and I can&#39;t find any solution or where is the problem so please don&#39;t mark the question as repeated because it&#39;s really not. I read all the questions and the answers, I tried all the solutions and still not working.\r\n\r\nI am using Intellij, Jersey 2.25 and Tomcat 9.0.33. I am not allowed to use maven so I download all the jar dependencies manually and then reference them from the project structure window by adding them to the libraries and artifacts.\r\nThe server is deployed successfully and when I open http://localhost:8080/ofar_war_exploded/ it shows the content of the index.jsp file. However, when I try to access a resource for example a simple method that returns a string in my OptimizerResource class I get the following response \r\n\r\n*HTTP Status 404 – Not Found\r\nType Status Report\r\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\r\nApache Tomcat/9.0.33*\r\n\r\nThe lib folder contains all the dependencies needed. I tried to add also the lib folder inside WEB-INF I got the same behavior.\r\n[This is the list of all the jars I am using][2]\r\n\r\nThis is the content of the web.xml file.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;\r\n         version=&quot;4.0&quot;&gt;\r\n    &lt;display-name&gt;Optimizer Service&lt;/display-name&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;optimizer&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n            &lt;param-value&gt;rest.resources&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;optimizer&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\n&lt;/web-app&gt;\r\n```\r\nJust for a testing wise I added only one get method in the OptimizerResource class that returns hello. When I try to request this url http://localhost:8080/ofar_war_exploded/rest/optimizer/hello\r\nI receive 404 not found.\r\n```\r\n\r\n@Path(&quot;optimizer&quot;)\r\npublic class OptimizerResource {\r\n  @GET\r\n    @Path(&quot;hello&quot;)\r\n    @Produces(&quot;text/plain&quot;)\r\n    public String getHello() {\r\n        return &quot;Hello&quot;;\r\n    }\r\n}\r\n```\r\n\r\n  [2]: https://i.stack.imgur.com/pwoE3.png\r\n  [3]: https://i.stack.imgur.com/E1sjM.png","title":"Jersey 2.25 and Tomcat 9.0.33 always responding 404 Not found","body":"<p>I have been searching for so many days and I can't find any solution or where is the problem so please don't mark the question as repeated because it's really not. I read all the questions and the answers, I tried all the solutions and still not working.</p>\n\n<p>I am using Intellij, Jersey 2.25 and Tomcat 9.0.33. I am not allowed to use maven so I download all the jar dependencies manually and then reference them from the project structure window by adding them to the libraries and artifacts.\nThe server is deployed successfully and when I open <a href=\"http://localhost:8080/ofar_war_exploded/\" rel=\"nofollow noreferrer\">http://localhost:8080/ofar_war_exploded/</a> it shows the content of the index.jsp file. However, when I try to access a resource for example a simple method that returns a string in my OptimizerResource class I get the following response </p>\n\n<p><em>HTTP Status 404 – Not Found\nType Status Report\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\nApache Tomcat/9.0.33</em></p>\n\n<p>The lib folder contains all the dependencies needed. I tried to add also the lib folder inside WEB-INF I got the same behavior.\n<a href=\"https://i.stack.imgur.com/pwoE3.png\" rel=\"nofollow noreferrer\">This is the list of all the jars I am using</a></p>\n\n<p>This is the content of the web.xml file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd\"\n         version=\"4.0\"&gt;\n    &lt;display-name&gt;Optimizer Service&lt;/display-name&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;optimizer&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n            &lt;param-value&gt;rest.resources&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;optimizer&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Just for a testing wise I added only one get method in the OptimizerResource class that returns hello. When I try to request this url <a href=\"http://localhost:8080/ofar_war_exploded/rest/optimizer/hello\" rel=\"nofollow noreferrer\">http://localhost:8080/ofar_war_exploded/rest/optimizer/hello</a>\nI receive 404 not found.</p>\n\n<pre><code>\n@Path(\"optimizer\")\npublic class OptimizerResource {\n  @GET\n    @Path(\"hello\")\n    @Produces(\"text/plain\")\n    public String getHello() {\n        return \"Hello\";\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","lambda","static","maven-invoker-plugin"],"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691576998,"creation_date":1691576998,"question_id":76866880,"body_markdown":"I&#39;m trying to get the output of a Maven command in a static block - specifically - resolve the location of the local repository location to a static variable.\r\n\r\nThe application hangs **only** when the `OutputHandler` is a lambda (not a method reference) and **only** when it&#39;s in a static initialiser (not just a static method).\r\n\r\nTake the following minimised example:\r\n\r\n`pom.xml`:\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.me&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-invoker-test&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-invoker&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n`InvokerTest.java`:\r\n```\r\npackage maveninvokertest;\r\n\r\nimport java.io.File;\r\nimport java.util.Collections;\r\nimport org.apache.maven.shared.invoker.*;\r\n\r\npublic class InvokerTest {\r\n    static {\r\n        // doTest();\r\n    }\r\n\r\n    public static void main(final String[] args) {\r\n        doTest();\r\n    }\r\n\r\n    /**\r\n     * Run {@link #runMaven(InvocationOutputHandler)} against a method reference and lambda, both outputting to\r\n     * {@link System#out}\r\n     */\r\n    private static void doTest() {\r\n        System.out.println(&quot;Method Reference:&quot;);\r\n        runMaven(System.out::println);\r\n\r\n        System.out.println(&quot;Lambda:&quot;);\r\n        runMaven(line -&gt; System.out.println(line));\r\n    }\r\n\r\n    /** Run the {@code validate} command against Maven, outputting to {@code outputHandler} */\r\n    private static void runMaven(final InvocationOutputHandler outputHandler) {\r\n\r\n        try {\r\n            final InvocationRequest request = new DefaultInvocationRequest();\r\n\r\n            request.setMavenExecutable(new File(&quot;/opt/homebrew/bin/mvn&quot;));\r\n            request.setGoals(Collections.singletonList(&quot;validate&quot;));\r\n\r\n            request.setOutputHandler(outputHandler);\r\n\r\n            System.out.println(new DefaultInvoker().execute(request).getExitCode());\r\n        } catch (final Throwable t) {\r\n            t.printStackTrace();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis application runs some dummy goal, printing the output to the console and completing normally:\r\n```\r\nMethod Reference:\r\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\r\n[INFO] Building maven-invoker-test 0.0.1-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.038 s\r\n[INFO] Finished at: 2023-08-09T11:23:57+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n0\r\nLambda:\r\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\r\n[INFO] Building maven-invoker-test 0.0.1-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.040 s\r\n[INFO] Finished at: 2023-08-09T11:23:58+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n0\r\n```\r\n\r\nNow lets move the ``doTest`` call from the `main` method into the `static` initialiser block:\r\n\r\n`InvokerTest.java`:\r\n```\r\npackage maveninvokertest;\r\n\r\nimport java.io.File;\r\nimport java.util.Collections;\r\nimport org.apache.maven.shared.invoker.*;\r\n\r\npublic class InvokerTest {\r\n    static {\r\n        doTest();\r\n    }\r\n\r\n    public static void main(final String[] args) {\r\n        // doTest();\r\n    }\r\n\r\n    /**\r\n     * Run {@link #runMaven(InvocationOutputHandler)} against a method reference and lambda, both outputting to\r\n     * {@link System#out}\r\n     */\r\n    private static void doTest() {\r\n        System.out.println(&quot;Method Reference:&quot;);\r\n        runMaven(System.out::println);\r\n\r\n        System.out.println(&quot;Lambda:&quot;);\r\n        runMaven(line -&gt; System.out.println(line));\r\n    }\r\n\r\n    /** Run the {@code validate} command against Maven, outputting to {@code outputHandler} */\r\n    private static void runMaven(final InvocationOutputHandler outputHandler) {\r\n\r\n        try {\r\n            final InvocationRequest request = new DefaultInvocationRequest();\r\n\r\n            request.setMavenExecutable(new File(&quot;/opt/homebrew/bin/mvn&quot;));\r\n            request.setGoals(Collections.singletonList(&quot;validate&quot;));\r\n\r\n            request.setOutputHandler(outputHandler);\r\n\r\n            System.out.println(new DefaultInvoker().execute(request).getExitCode());\r\n        } catch (final Throwable t) {\r\n            t.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis should produce the same output, and yet instead...\r\n\r\n```\r\nMethod Reference:\r\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\r\n[INFO] Building maventest 0.0.1-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.038 s\r\n[INFO] Finished at: 2023-08-09T11:25:37+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n0\r\nLambda:\r\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\r\n```\r\n\r\nIt gets this far and hangs.\r\n\r\nAny ideas?","title":"MavenInvoker hanging when using a lambda OutputHandler in a static initialiser","body":"<p>I'm trying to get the output of a Maven command in a static block - specifically - resolve the location of the local repository location to a static variable.</p>\n<p>The application hangs <strong>only</strong> when the <code>OutputHandler</code> is a lambda (not a method reference) and <strong>only</strong> when it's in a static initialiser (not just a static method).</p>\n<p>Take the following minimised example:</p>\n<p><code>pom.xml</code>:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.me&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-invoker-test&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-invoker&lt;/artifactId&gt;\n            &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p><code>InvokerTest.java</code>:</p>\n<pre><code>package maveninvokertest;\n\nimport java.io.File;\nimport java.util.Collections;\nimport org.apache.maven.shared.invoker.*;\n\npublic class InvokerTest {\n    static {\n        // doTest();\n    }\n\n    public static void main(final String[] args) {\n        doTest();\n    }\n\n    /**\n     * Run {@link #runMaven(InvocationOutputHandler)} against a method reference and lambda, both outputting to\n     * {@link System#out}\n     */\n    private static void doTest() {\n        System.out.println(&quot;Method Reference:&quot;);\n        runMaven(System.out::println);\n\n        System.out.println(&quot;Lambda:&quot;);\n        runMaven(line -&gt; System.out.println(line));\n    }\n\n    /** Run the {@code validate} command against Maven, outputting to {@code outputHandler} */\n    private static void runMaven(final InvocationOutputHandler outputHandler) {\n\n        try {\n            final InvocationRequest request = new DefaultInvocationRequest();\n\n            request.setMavenExecutable(new File(&quot;/opt/homebrew/bin/mvn&quot;));\n            request.setGoals(Collections.singletonList(&quot;validate&quot;));\n\n            request.setOutputHandler(outputHandler);\n\n            System.out.println(new DefaultInvoker().execute(request).getExitCode());\n        } catch (final Throwable t) {\n            t.printStackTrace();\n        }\n    }\n}\n\n</code></pre>\n<p>This application runs some dummy goal, printing the output to the console and completing normally:</p>\n<pre><code>Method Reference:\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\n[INFO] Building maven-invoker-test 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.038 s\n[INFO] Finished at: 2023-08-09T11:23:57+01:00\n[INFO] ------------------------------------------------------------------------\n0\nLambda:\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\n[INFO] Building maven-invoker-test 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.040 s\n[INFO] Finished at: 2023-08-09T11:23:58+01:00\n[INFO] ------------------------------------------------------------------------\n0\n</code></pre>\n<p>Now lets move the <code>doTest</code> call from the <code>main</code> method into the <code>static</code> initialiser block:</p>\n<p><code>InvokerTest.java</code>:</p>\n<pre><code>package maveninvokertest;\n\nimport java.io.File;\nimport java.util.Collections;\nimport org.apache.maven.shared.invoker.*;\n\npublic class InvokerTest {\n    static {\n        doTest();\n    }\n\n    public static void main(final String[] args) {\n        // doTest();\n    }\n\n    /**\n     * Run {@link #runMaven(InvocationOutputHandler)} against a method reference and lambda, both outputting to\n     * {@link System#out}\n     */\n    private static void doTest() {\n        System.out.println(&quot;Method Reference:&quot;);\n        runMaven(System.out::println);\n\n        System.out.println(&quot;Lambda:&quot;);\n        runMaven(line -&gt; System.out.println(line));\n    }\n\n    /** Run the {@code validate} command against Maven, outputting to {@code outputHandler} */\n    private static void runMaven(final InvocationOutputHandler outputHandler) {\n\n        try {\n            final InvocationRequest request = new DefaultInvocationRequest();\n\n            request.setMavenExecutable(new File(&quot;/opt/homebrew/bin/mvn&quot;));\n            request.setGoals(Collections.singletonList(&quot;validate&quot;));\n\n            request.setOutputHandler(outputHandler);\n\n            System.out.println(new DefaultInvoker().execute(request).getExitCode());\n        } catch (final Throwable t) {\n            t.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>This should produce the same output, and yet instead...</p>\n<pre><code>Method Reference:\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\n[INFO] Building maventest 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.038 s\n[INFO] Finished at: 2023-08-09T11:25:37+01:00\n[INFO] ------------------------------------------------------------------------\n0\nLambda:\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\n</code></pre>\n<p>It gets this far and hangs.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","apache-camel","apache-camel-3"],"answers":[{"tags":[],"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691576954,"creation_date":1691576954,"answer_id":76866874,"question_id":76851538,"body_markdown":"You are likely creating an uber/fat-jar, and then make sure to do this accordingly to: https://camel.apache.org/manual/camel-maven-plugin.html#_camelprepare_fatjar","title":"Apache Camel fails to create Route and produces bizarre Error message","body":"<p>You are likely creating an uber/fat-jar, and then make sure to do this accordingly to: <a href=\"https://camel.apache.org/manual/camel-maven-plugin.html#_camelprepare_fatjar\" rel=\"nofollow noreferrer\">https://camel.apache.org/manual/camel-maven-plugin.html#_camelprepare_fatjar</a></p>\n"}],"owner":{"account_id":29176702,"reputation":3,"user_id":22351810,"display_name":"Krubsacius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76866874,"answer_count":1,"score":0,"last_activity_date":1691576954,"creation_date":1691410001,"question_id":76851538,"body_markdown":"I have developed a Java-Application using Apache Camel to archive a bunch of previously sorted files based upon the name of the subfolder they have been placed in. It works as expected running in Eclipse but fails to create the Route when I attempt to run the app outside of Eclipse, producing the following Error Message every time:\r\n\r\n```\r\n2023-08-07 13:20:03,527 [main] ERROR MyClass  - Exception occured: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: &gt;&gt;&gt; Aggregate[LotName -&gt; [SetHeader[CamelFileName, simple{${in.header.LotName}.zip}], Log[Finished Zipping: ${file:name}], DynamicTo[file:${in.header.CreatedPath}?fileName=${file:name.noext}-2023-08-07T13-20-03-328.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}]]] &lt;&lt;&lt; in route: Route(route1)[From[EndpointA... because of Error parsing [1000] as a java.time.Duration.\r\norg.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: &gt;&gt;&gt; Aggregate[LotName -&gt; [SetHeader[CamelFileName, simple{${in.header.LotName}.zip}], Log[Finished Zipping: ${file:name}], DynamicTo[file:${in.header.CreatedPath}?fileName=${file:name.noext}-2023-08-07T13-20-03-328.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}]]] &lt;&lt;&lt; in route: Route(route1)[From[EndpointA because of Error parsing [1000] as a java.time.Duration.\r\n        at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:241)\r\n        at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:75)\r\n        at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)\r\n        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:874)\r\n        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:764)\r\n        at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2862)\r\n        at org.apache.camel.support.service.BaseService.init(BaseService.java:83)\r\n        at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2568)\r\n        at org.apache.camel.support.service.BaseService.start(BaseService.java:111)\r\n        at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2587)\r\n        at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:253)\r\n        at org.apache.camel.main.Main.doStart(Main.java:116)\r\n        at org.apache.camel.support.service.BaseService.start(BaseService.java:119)\r\n        at org.apache.camel.main.MainSupport.run(MainSupport.java:69)\r\n        at MyClass.main(MyClass.java:80)\r\nCaused by: java.lang.IllegalArgumentException: Error parsing [1000] as a java.time.Duration.\r\n        at org.apache.camel.support.CamelContextHelper.parse(CamelContextHelper.java:556)\r\n        at org.apache.camel.support.CamelContextHelper.parseDuration(CamelContextHelper.java:500)\r\n        at org.apache.camel.reifier.AbstractReifier.parseDuration(AbstractReifier.java:78)\r\n        at org.apache.camel.reifier.AggregateReifier.createAggregator(AggregateReifier.java:203)\r\n        at org.apache.camel.reifier.AggregateReifier.createProcessor(AggregateReifier.java:54)\r\n        at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:838)\r\n        at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:579)\r\n        at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:237)\r\n        ... 14 more\r\nCaused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: java.lang.String to the required type: java.time.Duration with value 1000\r\n        at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:275)\r\n        at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:207)\r\n        at org.apache.camel.support.CamelContextHelper.parse(CamelContextHelper.java:553)\r\n        ... 21 more\r\n```\r\n\r\nI have no idea where the Duration-Object comes from, what its purpose is or why its value is 1000. \r\n\r\nMy Route: \r\n```\r\npublic void configure() throws Exception {\r\n\t\t/* Takes files from origin folder, checks for valid file names and deletes files in their source folders */\r\n\t\tfrom(FILECOMPONENT + sourceFolder + &quot;?recursive=true&amp;include=RAW(&quot;+ lotFileRegex +&quot;)&amp;delete=true&quot;)\r\n\t\t.log(LoggingLevel.INFO, &quot;Starting to process file: ${file:name}&quot;)\r\n\t\t// Extract our criteria to aggregate\r\n\t\t.process(new SubfolderExtractor())\r\n\t\t// Aggregate Files based on Header &quot;LotName&quot;\r\n\t\t.log(LoggingLevel.INFO, &quot;Currently aggregating: ${in.header.LotName}&quot;)\r\n\t\t.aggregate(header(&quot;LotName&quot;), new ZipAggregationStrategy())\r\n        .completionFromBatchConsumer().eagerCheckCompletion()\r\n        .completionOnNewCorrelationGroup() // finish our archive when the subfolder is empty\r\n        // Set Header FILE_NAME to LotName.zip\r\n        .setHeader(Exchange.FILE_NAME, simple(&quot;${in.header.LotName}.zip&quot;))\r\n        .log(LoggingLevel.INFO, &quot;Finished Zipping: ${file:name}&quot;)\r\n        /* Drop Zip-Archives in same location as their origin, add the current date to make it unique */\r\n        .toD(FILECOMPONENT + &quot;${in.header.CreatedPath}?fileName=${file:name.noext}-&quot;+LocalDateTime.now().toString().replace(&#39;:&#39;, &#39;-&#39;).replace(&#39;.&#39;, &#39;-&#39;)+&quot;.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}&quot;);\r\n```\r\nThe use of raw java code in the .toD() at the end replaced an expression in Camel&#39;s built-in &quot;Simple&quot; language, as i assumed it was causing the problem. However, it did not change the fact that this route works in Eclipse but not outside of it, in fact it produces the same Error message. \r\n\r\nI am using Java 8 and Camel 3.14.7. The routes are run using Camel&#39;s Main Class. ","title":"Apache Camel fails to create Route and produces bizarre Error message","body":"<p>I have developed a Java-Application using Apache Camel to archive a bunch of previously sorted files based upon the name of the subfolder they have been placed in. It works as expected running in Eclipse but fails to create the Route when I attempt to run the app outside of Eclipse, producing the following Error Message every time:</p>\n<pre><code>2023-08-07 13:20:03,527 [main] ERROR MyClass  - Exception occured: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: &gt;&gt;&gt; Aggregate[LotName -&gt; [SetHeader[CamelFileName, simple{${in.header.LotName}.zip}], Log[Finished Zipping: ${file:name}], DynamicTo[file:${in.header.CreatedPath}?fileName=${file:name.noext}-2023-08-07T13-20-03-328.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}]]] &lt;&lt;&lt; in route: Route(route1)[From[EndpointA... because of Error parsing [1000] as a java.time.Duration.\norg.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: &gt;&gt;&gt; Aggregate[LotName -&gt; [SetHeader[CamelFileName, simple{${in.header.LotName}.zip}], Log[Finished Zipping: ${file:name}], DynamicTo[file:${in.header.CreatedPath}?fileName=${file:name.noext}-2023-08-07T13-20-03-328.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}]]] &lt;&lt;&lt; in route: Route(route1)[From[EndpointA because of Error parsing [1000] as a java.time.Duration.\n        at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:241)\n        at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:75)\n        at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)\n        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:874)\n        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:764)\n        at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2862)\n        at org.apache.camel.support.service.BaseService.init(BaseService.java:83)\n        at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2568)\n        at org.apache.camel.support.service.BaseService.start(BaseService.java:111)\n        at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2587)\n        at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:253)\n        at org.apache.camel.main.Main.doStart(Main.java:116)\n        at org.apache.camel.support.service.BaseService.start(BaseService.java:119)\n        at org.apache.camel.main.MainSupport.run(MainSupport.java:69)\n        at MyClass.main(MyClass.java:80)\nCaused by: java.lang.IllegalArgumentException: Error parsing [1000] as a java.time.Duration.\n        at org.apache.camel.support.CamelContextHelper.parse(CamelContextHelper.java:556)\n        at org.apache.camel.support.CamelContextHelper.parseDuration(CamelContextHelper.java:500)\n        at org.apache.camel.reifier.AbstractReifier.parseDuration(AbstractReifier.java:78)\n        at org.apache.camel.reifier.AggregateReifier.createAggregator(AggregateReifier.java:203)\n        at org.apache.camel.reifier.AggregateReifier.createProcessor(AggregateReifier.java:54)\n        at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:838)\n        at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:579)\n        at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:237)\n        ... 14 more\nCaused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: java.lang.String to the required type: java.time.Duration with value 1000\n        at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:275)\n        at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:207)\n        at org.apache.camel.support.CamelContextHelper.parse(CamelContextHelper.java:553)\n        ... 21 more\n</code></pre>\n<p>I have no idea where the Duration-Object comes from, what its purpose is or why its value is 1000.</p>\n<p>My Route:</p>\n<pre><code>public void configure() throws Exception {\n        /* Takes files from origin folder, checks for valid file names and deletes files in their source folders */\n        from(FILECOMPONENT + sourceFolder + &quot;?recursive=true&amp;include=RAW(&quot;+ lotFileRegex +&quot;)&amp;delete=true&quot;)\n        .log(LoggingLevel.INFO, &quot;Starting to process file: ${file:name}&quot;)\n        // Extract our criteria to aggregate\n        .process(new SubfolderExtractor())\n        // Aggregate Files based on Header &quot;LotName&quot;\n        .log(LoggingLevel.INFO, &quot;Currently aggregating: ${in.header.LotName}&quot;)\n        .aggregate(header(&quot;LotName&quot;), new ZipAggregationStrategy())\n        .completionFromBatchConsumer().eagerCheckCompletion()\n        .completionOnNewCorrelationGroup() // finish our archive when the subfolder is empty\n        // Set Header FILE_NAME to LotName.zip\n        .setHeader(Exchange.FILE_NAME, simple(&quot;${in.header.LotName}.zip&quot;))\n        .log(LoggingLevel.INFO, &quot;Finished Zipping: ${file:name}&quot;)\n        /* Drop Zip-Archives in same location as their origin, add the current date to make it unique */\n        .toD(FILECOMPONENT + &quot;${in.header.CreatedPath}?fileName=${file:name.noext}-&quot;+LocalDateTime.now().toString().replace(':', '-').replace('.', '-')+&quot;.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}&quot;);\n</code></pre>\n<p>The use of raw java code in the .toD() at the end replaced an expression in Camel's built-in &quot;Simple&quot; language, as i assumed it was causing the problem. However, it did not change the fact that this route works in Eclipse but not outside of it, in fact it produces the same Error message.</p>\n<p>I am using Java 8 and Camel 3.14.7. The routes are run using Camel's Main Class.</p>\n"},{"tags":["java","xml","validation","xpath","xsd"],"comments":[{"owner":{"account_id":204410,"reputation":4876,"user_id":452614,"accept_rate":100,"display_name":"Ludovic Kuty"},"score":0,"creation_date":1391790073,"post_id":11521132,"comment_id":32690137,"body_markdown":"Why don&#39;t you just run an XPath expression against the XSD ? Why XSOM ?","body":"Why don&#39;t you just run an XPath expression against the XSD ? Why XSOM ?"}],"owner":{"account_id":1329532,"reputation":311,"user_id":1273707,"display_name":"Dmitry Sh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691576750,"creation_date":1342522833,"question_id":11521132,"body_markdown":"I have XML document builded by XSD. Each element in XSD with annotation.\r\nWhen i validate XML by XSD i can generate an XPath of error (using Stack), how can i read annotation from XSD with XPath of element?\r\n\r\ni am using XSOM for read XSD schema.","title":"Read annotation from XSD by element XPath","body":"<p>I have XML document builded by XSD. Each element in XSD with annotation.\nWhen i validate XML by XSD i can generate an XPath of error (using Stack), how can i read annotation from XSD with XPath of element?</p>\n\n<p>i am using XSOM for read XSD schema.</p>\n"},{"tags":["java","csv","apache-spark"],"comments":[{"owner":{"account_id":29190269,"reputation":1,"user_id":22362537,"display_name":"help pleh"},"score":0,"creation_date":1692020978,"post_id":76866662,"comment_id":135565508,"body_markdown":"Overall, Is it possible to read file  which mounted path in docker from outside of the docker , from java app","body":"Overall, Is it possible to read file  which mounted path in docker from outside of the docker , from java app"}],"owner":{"account_id":29190269,"reputation":1,"user_id":22362537,"display_name":"help pleh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691576707,"creation_date":1691575456,"question_id":76866662,"body_markdown":"When I tried to read csv files with Spring boot app on my local machine and apache/spark on docker container exception occurred.\r\n    \r\n```\r\n org.apache.spark.sql.AnalysisException: [PATH_NOT_FOUND] Path does not exist: file:/home/sparkdata/data.csv.\r\n```\r\nI connected to the spark master remotely(I am mentioning on docker) successfully. here is my java spring SparkConfig and and SparkSession code:\r\n   \r\n```\r\nSparkConf sparkConf = new SparkConf()\r\n                .setAppName(&quot;appName&quot;)\r\n                .setSparkHome(&quot;home&quot;)\r\n                .setMaster(&quot;spark://localhost:7077&quot;)\r\nDataset&lt;Row&gt; dataset=sparkSession\r\n                .read()\r\n                .format(&quot;csv&quot;)\r\n                .option(&quot;header&quot;, true)\r\n                .load(&quot;/home/sparkdata/data.csv&quot;);\r\n        dataset.printSchema();\r\n```\r\nand docker compose yml here which I mounted to the docker container my localstorage and some other configs: \r\n    version: &#39;3.4&#39;\r\n\r\n```\r\n`services:\r\n  spark:\r\n    container_name: master\r\n    image: docker.io/bitnami/spark:latest\r\n    environment:\r\n      - SPARK_MODE=master\r\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\r\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\r\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\r\n      - SPARK_SSL_ENABLED=no\r\n    ports:\r\n      - &#39;8080:8080&#39;\r\n      - &#39;7077:7077&#39;\r\n    networks:\r\n      - spark-network\r\n    volumes:\r\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\r\n\r\n  spark-worker-1:\r\n    container_name: worker_1\r\n    image: docker.io/bitnami/spark:latest\r\n    depends_on:\r\n      - spark\r\n    environment:\r\n      - SPARK_MODE=worker\r\n      - SPARK_MASTER_URL=spark://spark:7077\r\n      - SPARK_WORKER_MEMORY=2G\r\n      - SPARK_WORKER_CORES=2\r\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\r\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\r\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\r\n      - SPARK_SSL_ENABLED=no\r\n      - SPARK_WORKER_PORT=9091\r\n    ports:\r\n      - &quot;9091:8080&quot;\r\n      - &quot;7001:7000&quot;\r\n    networks:\r\n      - spark-network\r\n    volumes:\r\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\r\n  spark-worker-2:\r\n    container_name: worker_2\r\n    image: docker.io/bitnami/spark:latest\r\n    depends_on:\r\n      - spark\r\n    environment:\r\n      - SPARK_MODE=worker\r\n      - SPARK_MASTER_URL=spark://spark:7077\r\n      - SPARK_WORKER_MEMORY=2G\r\n      - SPARK_WORKER_CORES=2\r\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\r\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\r\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\r\n      - SPARK_SSL_ENABLED=no\r\n      - SPARK_WORKER_PORT=9092\r\n    ports:\r\n      - &quot;9092:8080&quot;\r\n      - &quot;7002:7000&quot;\r\n    networks:\r\n      - spark-network\r\n    volumes:\r\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\r\nnetworks:\r\n  spark-network:\r\n    driver: bridge`\r\n```\r\nWhen I run compose file, it works fine well, I can see mounted path to docker, and file can be seen in docker spark container. How can I read file with spring boot remotely connected apache spark master on the docker container. Please help me to solve this problem. \r\n      \r\n  ","title":"Spring Boot Application read csv file on docker container apache spark","body":"<p>When I tried to read csv files with Spring boot app on my local machine and apache/spark on docker container exception occurred.</p>\n<pre><code> org.apache.spark.sql.AnalysisException: [PATH_NOT_FOUND] Path does not exist: file:/home/sparkdata/data.csv.\n</code></pre>\n<p>I connected to the spark master remotely(I am mentioning on docker) successfully. here is my java spring SparkConfig and and SparkSession code:</p>\n<pre><code>SparkConf sparkConf = new SparkConf()\n                .setAppName(&quot;appName&quot;)\n                .setSparkHome(&quot;home&quot;)\n                .setMaster(&quot;spark://localhost:7077&quot;)\nDataset&lt;Row&gt; dataset=sparkSession\n                .read()\n                .format(&quot;csv&quot;)\n                .option(&quot;header&quot;, true)\n                .load(&quot;/home/sparkdata/data.csv&quot;);\n        dataset.printSchema();\n</code></pre>\n<p>and docker compose yml here which I mounted to the docker container my localstorage and some other configs:\nversion: '3.4'</p>\n<pre><code>`services:\n  spark:\n    container_name: master\n    image: docker.io/bitnami/spark:latest\n    environment:\n      - SPARK_MODE=master\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\n      - SPARK_SSL_ENABLED=no\n    ports:\n      - '8080:8080'\n      - '7077:7077'\n    networks:\n      - spark-network\n    volumes:\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\n\n  spark-worker-1:\n    container_name: worker_1\n    image: docker.io/bitnami/spark:latest\n    depends_on:\n      - spark\n    environment:\n      - SPARK_MODE=worker\n      - SPARK_MASTER_URL=spark://spark:7077\n      - SPARK_WORKER_MEMORY=2G\n      - SPARK_WORKER_CORES=2\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\n      - SPARK_SSL_ENABLED=no\n      - SPARK_WORKER_PORT=9091\n    ports:\n      - &quot;9091:8080&quot;\n      - &quot;7001:7000&quot;\n    networks:\n      - spark-network\n    volumes:\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\n  spark-worker-2:\n    container_name: worker_2\n    image: docker.io/bitnami/spark:latest\n    depends_on:\n      - spark\n    environment:\n      - SPARK_MODE=worker\n      - SPARK_MASTER_URL=spark://spark:7077\n      - SPARK_WORKER_MEMORY=2G\n      - SPARK_WORKER_CORES=2\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\n      - SPARK_SSL_ENABLED=no\n      - SPARK_WORKER_PORT=9092\n    ports:\n      - &quot;9092:8080&quot;\n      - &quot;7002:7000&quot;\n    networks:\n      - spark-network\n    volumes:\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\nnetworks:\n  spark-network:\n    driver: bridge`\n</code></pre>\n<p>When I run compose file, it works fine well, I can see mounted path to docker, and file can be seen in docker spark container. How can I read file with spring boot remotely connected apache spark master on the docker container. Please help me to solve this problem.</p>\n"},{"tags":["java","android","kotlin","material-design","datetimepicker"],"comments":[{"owner":{"account_id":1158009,"reputation":732,"user_id":1138106,"accept_rate":40,"display_name":"Krutik"},"score":0,"creation_date":1469598387,"post_id":38604157,"comment_id":64596265,"body_markdown":"you can check this https://github.com/jjobes/SlideDateTimePicker","body":"you can check this <a href=\"https://github.com/jjobes/SlideDateTimePicker\" rel=\"nofollow noreferrer\">github.com/jjobes/SlideDateTimePicker</a>"}],"answers":[{"tags":[],"owner":{"account_id":8299955,"reputation":2300,"user_id":6238866,"display_name":"Mayur Patel"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1557271012,"creation_date":1469598246,"answer_id":38604615,"question_id":38604157,"body_markdown":"Try this code : \r\n\r\nCustomDateTimePicker.java\r\n\r\n    import android.app.Activity;\r\n    import android.app.Dialog;\r\n    import android.content.DialogInterface;\r\n    import android.view.Gravity;\r\n    import android.view.View;\r\n    import android.view.Window;\r\n    import android.widget.Button;\r\n    import android.widget.DatePicker;\r\n    import android.widget.FrameLayout;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.TimePicker;\r\n    import android.widget.ViewSwitcher;\r\n    \r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    \r\n    /**\r\n     * Created by admin on 6/29/2016.\r\n     */\r\n    public class CustomDateTimePicker implements View.OnClickListener {\r\n        private DatePicker datePicker;\r\n        private TimePicker timePicker;\r\n        private ViewSwitcher viewSwitcher;\r\n    \r\n        private final int SET_DATE = 100, SET_TIME = 101, SET = 102, CANCEL = 103;\r\n    \r\n        private Button btn_setDate, btn_setTime, btn_set, btn_cancel;\r\n    \r\n        private Calendar calendar_date = null;\r\n    \r\n        private Activity activity;\r\n    \r\n        private ICustomDateTimeListener iCustomDateTimeListener = null;\r\n    \r\n        private Dialog dialog;\r\n    \r\n        private boolean is24HourView = true, isAutoDismiss = true;\r\n    \r\n        private int selectedHour, selectedMinute;\r\n    \r\n        public CustomDateTimePicker(Activity a,\r\n                                    ICustomDateTimeListener customDateTimeListener) {\r\n            activity = a;\r\n            iCustomDateTimeListener = customDateTimeListener;\r\n    \r\n            dialog = new Dialog(activity);\r\n            dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {\r\n                @Override\r\n                public void onDismiss(DialogInterface dialog) {\r\n                    resetData();\r\n                }\r\n            });\r\n    \r\n            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n            View dialogView = getDateTimePickerLayout();\r\n            dialog.setContentView(dialogView);\r\n        }\r\n    \r\n        public View getDateTimePickerLayout() {\r\n            LinearLayout.LayoutParams linear_match_wrap = new LinearLayout.LayoutParams(\r\n                    LinearLayout.LayoutParams.MATCH_PARENT,\r\n                    LinearLayout.LayoutParams.MATCH_PARENT);\r\n            LinearLayout.LayoutParams linear_wrap_wrap = new LinearLayout.LayoutParams(\r\n                    LinearLayout.LayoutParams.WRAP_CONTENT,\r\n                    LinearLayout.LayoutParams.WRAP_CONTENT);\r\n            FrameLayout.LayoutParams frame_match_wrap = new FrameLayout.LayoutParams(\r\n                    FrameLayout.LayoutParams.MATCH_PARENT,\r\n                    FrameLayout.LayoutParams.WRAP_CONTENT);\r\n    \r\n            LinearLayout.LayoutParams button_params = new LinearLayout.LayoutParams(\r\n                    0, LinearLayout.LayoutParams.WRAP_CONTENT, 1.0f);\r\n    \r\n            LinearLayout linear_main = new LinearLayout(activity);\r\n            linear_main.setLayoutParams(linear_match_wrap);\r\n            linear_main.setOrientation(LinearLayout.VERTICAL);\r\n            linear_main.setGravity(Gravity.CENTER);\r\n    \r\n            LinearLayout linear_child = new LinearLayout(activity);\r\n            linear_child.setLayoutParams(linear_wrap_wrap);\r\n            linear_child.setOrientation(LinearLayout.VERTICAL);\r\n    \r\n            LinearLayout linear_top = new LinearLayout(activity);\r\n            linear_top.setLayoutParams(linear_match_wrap);\r\n    \r\n            btn_setDate = new Button(activity);\r\n            btn_setDate.setLayoutParams(button_params);\r\n            btn_setDate.setText(&quot;Set Date&quot;);\r\n            btn_setDate.setId(SET_DATE);\r\n            btn_setDate.setOnClickListener(this);\r\n    \r\n            btn_setTime = new Button(activity);\r\n            btn_setTime.setLayoutParams(button_params);\r\n            btn_setTime.setText(&quot;Set Time&quot;);\r\n            btn_setTime.setId(SET_TIME);\r\n            btn_setTime.setOnClickListener(this);\r\n    \r\n            linear_top.addView(btn_setDate);\r\n            linear_top.addView(btn_setTime);\r\n    \r\n            viewSwitcher = new ViewSwitcher(activity);\r\n            viewSwitcher.setLayoutParams(frame_match_wrap);\r\n    \r\n            datePicker = new DatePicker(activity);\r\n            timePicker = new TimePicker(activity);\r\n            timePicker.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {\r\n                @Override\r\n                public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {\r\n                    selectedHour = hourOfDay;\r\n                    selectedMinute = minute;\r\n                }\r\n            });\r\n    \r\n            viewSwitcher.addView(timePicker);\r\n            viewSwitcher.addView(datePicker);\r\n    \r\n            LinearLayout linear_bottom = new LinearLayout(activity);\r\n            linear_match_wrap.topMargin = 8;\r\n            linear_bottom.setLayoutParams(linear_match_wrap);\r\n    \r\n            btn_set = new Button(activity);\r\n            btn_set.setLayoutParams(button_params);\r\n            btn_set.setText(&quot;Set&quot;);\r\n            btn_set.setId(SET);\r\n            btn_set.setOnClickListener(this);\r\n    \r\n            btn_cancel = new Button(activity);\r\n            btn_cancel.setLayoutParams(button_params);\r\n            btn_cancel.setText(&quot;Cancel&quot;);\r\n            btn_cancel.setId(CANCEL);\r\n            btn_cancel.setOnClickListener(this);\r\n    \r\n            linear_bottom.addView(btn_set);\r\n            linear_bottom.addView(btn_cancel);\r\n    \r\n            linear_child.addView(linear_top);\r\n            linear_child.addView(viewSwitcher);\r\n            linear_child.addView(linear_bottom);\r\n    \r\n            linear_main.addView(linear_child);\r\n    \r\n            return linear_main;\r\n        }\r\n    \r\n        public void showDialog() {\r\n            if (!dialog.isShowing()) {\r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                selectedHour = calendar_date.get(Calendar.HOUR_OF_DAY);\r\n                selectedMinute = calendar_date.get(Calendar.MINUTE);\r\n    \r\n                timePicker.setIs24HourView(is24HourView);\r\n                timePicker.setCurrentHour(selectedHour);\r\n                timePicker.setCurrentMinute(selectedMinute);\r\n    \r\n                datePicker.updateDate(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DATE));\r\n    \r\n                dialog.show();\r\n    \r\n                btn_setDate.performClick();\r\n            }\r\n        }\r\n    \r\n        public void setAutoDismiss(boolean isAutoDismiss) {\r\n            this.isAutoDismiss = isAutoDismiss;\r\n        }\r\n    \r\n        public void dismissDialog() {\r\n            if (!dialog.isShowing())\r\n                dialog.dismiss();\r\n        }\r\n    \r\n        public void setDate(Calendar calendar) {\r\n            if (calendar != null)\r\n                calendar_date = calendar;\r\n        }\r\n    \r\n        public void setDate(Date date) {\r\n            if (date != null) {\r\n                calendar_date = Calendar.getInstance();\r\n                calendar_date.setTime(date);\r\n            }\r\n        }\r\n    \r\n        public void setDate(int year, int month, int day) {\r\n            if (month &lt; 12 &amp;&amp; month &gt;= 0 &amp;&amp; day &lt; 32 &amp;&amp; day &gt;= 0 &amp;&amp; year &gt; 100\r\n                    &amp;&amp; year &lt; 3000) {\r\n                calendar_date = Calendar.getInstance();\r\n                calendar_date.set(year, month, day);\r\n            }\r\n    \r\n        }\r\n    \r\n        public void setTimeIn24HourFormat(int hourIn24Format, int minute) {\r\n            if (hourIn24Format &lt; 24 &amp;&amp; hourIn24Format &gt;= 0 &amp;&amp; minute &gt;= 0\r\n                    &amp;&amp; minute &lt; 60) {\r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                calendar_date.set(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\r\n                        minute);\r\n    \r\n                is24HourView = true;\r\n            }\r\n        }\r\n    \r\n        public void setTimeIn12HourFormat(int hourIn12Format, int minute,\r\n                                          boolean isAM) {\r\n            if (hourIn12Format &lt; 13 &amp;&amp; hourIn12Format &gt; 0 &amp;&amp; minute &gt;= 0\r\n                    &amp;&amp; minute &lt; 60) {\r\n                if (hourIn12Format == 12)\r\n                    hourIn12Format = 0;\r\n    \r\n                int hourIn24Format = hourIn12Format;\r\n    \r\n                if (!isAM)\r\n                    hourIn24Format += 12;\r\n    \r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                calendar_date.set(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\r\n                        minute);\r\n    \r\n                is24HourView = false;\r\n            }\r\n        }\r\n    \r\n        public void set24HourFormat(boolean is24HourFormat) {\r\n            is24HourView = is24HourFormat;\r\n        }\r\n    \r\n        public interface ICustomDateTimeListener {\r\n            public void onSet(Dialog dialog, Calendar calendarSelected,\r\n                              Date dateSelected, int year, String monthFullName,\r\n                              String monthShortName, int monthNumber, int day,\r\n                              String weekDayFullName, String weekDayShortName, int hour24,\r\n                              int hour12, int min, int sec, String AM_PM);\r\n    \r\n            public void onCancel();\r\n        }\r\n    \r\n        @Override\r\n        public void onClick(View v) {\r\n            switch (v.getId()) {\r\n                case SET_DATE:\r\n                btn_setTime.setEnabled(true);\r\n                btn_setDate.setEnabled(false);\r\n\r\n                if (viewSwitcher.getCurrentView() != datePicker) {\r\n                    viewSwitcher.showPrevious();\r\n                }\r\n                break;\r\n\r\n            case SET_TIME:\r\n                btn_setTime.setEnabled(false);\r\n                btn_setDate.setEnabled(true);\r\n                if (viewSwitcher.getCurrentView() == datePicker) {\r\n                    viewSwitcher.showNext();\r\n                }\r\n                break;\r\n\r\n    \r\n                case SET:\r\n                    if (iCustomDateTimeListener != null) {\r\n                        int month = datePicker.getMonth();\r\n                        int year = datePicker.getYear();\r\n                        int day = datePicker.getDayOfMonth();\r\n    \r\n    \r\n                        calendar_date.set(year, month, day, selectedHour,\r\n                                selectedMinute);\r\n    \r\n                        iCustomDateTimeListener.onSet(dialog, calendar_date,\r\n                                calendar_date.getTime(), calendar_date\r\n                                        .get(Calendar.YEAR),\r\n                                getMonthFullName(calendar_date.get(Calendar.MONTH)),\r\n                                getMonthShortName(calendar_date.get(Calendar.MONTH)),\r\n                                calendar_date.get(Calendar.MONTH), calendar_date\r\n                                        .get(Calendar.DAY_OF_MONTH),\r\n                                getWeekDayFullName(calendar_date\r\n                                        .get(Calendar.DAY_OF_WEEK)),\r\n                                getWeekDayShortName(calendar_date\r\n                                        .get(Calendar.DAY_OF_WEEK)), calendar_date\r\n                                        .get(Calendar.HOUR_OF_DAY),\r\n                                getHourIn12Format(calendar_date\r\n                                        .get(Calendar.HOUR_OF_DAY)), calendar_date\r\n                                        .get(Calendar.MINUTE), calendar_date\r\n                                        .get(Calendar.SECOND), getAMPM(calendar_date));\r\n                    }\r\n                    if (dialog.isShowing() &amp;&amp; isAutoDismiss)\r\n                        dialog.dismiss();\r\n                    break;\r\n    \r\n                case CANCEL:\r\n                    if (iCustomDateTimeListener != null)\r\n                        iCustomDateTimeListener.onCancel();\r\n                    if (dialog.isShowing())\r\n                        dialog.dismiss();\r\n                    break;\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @param date\r\n         *            date in String\r\n         * @param fromFormat\r\n         *            format of your &lt;b&gt;date&lt;/b&gt; eg: if your date is 2011-07-07\r\n         *            09:09:09 then your format will be &lt;b&gt;yyyy-MM-dd hh:mm:ss&lt;/b&gt;\r\n         * @param toFormat\r\n         *            format to which you want to convert your &lt;b&gt;date&lt;/b&gt; eg: if\r\n         *            required format is 31 July 2011 then the toFormat should be\r\n         *            &lt;b&gt;d MMMM yyyy&lt;/b&gt;\r\n         * @return formatted date\r\n         */\r\n        public static String convertDate(String date, String fromFormat,\r\n                                         String toFormat) {\r\n            try {\r\n                SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat);\r\n                Date d = simpleDateFormat.parse(date);\r\n                Calendar calendar = Calendar.getInstance();\r\n                calendar.setTime(d);\r\n    \r\n                simpleDateFormat = new SimpleDateFormat(toFormat);\r\n                simpleDateFormat.setCalendar(calendar);\r\n                date = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return date;\r\n        }\r\n    \r\n        private String getMonthFullName(int monthNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.MONTH, monthNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;MMMM&quot;);\r\n            simpleDateFormat.setCalendar(calendar);\r\n            String monthName = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            return monthName;\r\n        }\r\n    \r\n        private String getMonthShortName(int monthNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.MONTH, monthNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;MMM&quot;);\r\n            simpleDateFormat.setCalendar(calendar);\r\n            String monthName = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            return monthName;\r\n        }\r\n    \r\n        private String getWeekDayFullName(int weekDayNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEEE&quot;);\r\n            simpleDateFormat.setCalendar(calendar);\r\n            String weekName = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            return weekName;\r\n        }\r\n    \r\n        private String getWeekDayShortName(int weekDayNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EE&quot;);\r\n            simpleDateFormat.setCalendar(calendar);\r\n            String weekName = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            return weekName;\r\n        }\r\n    \r\n        private int getHourIn12Format(int hour24) {\r\n            int hourIn12Format = 0;\r\n    \r\n            if (hour24 == 0)\r\n                hourIn12Format = 12;\r\n            else if (hour24 &lt;= 12)\r\n                hourIn12Format = hour24;\r\n            else\r\n                hourIn12Format = hour24 - 12;\r\n    \r\n            return hourIn12Format;\r\n        }\r\n    \r\n        private String getAMPM(Calendar calendar) {\r\n            String ampm = (calendar.get(Calendar.AM_PM) == (Calendar.AM)) ? &quot;AM&quot;\r\n                    : &quot;PM&quot;;\r\n            return ampm;\r\n        }\r\n    \r\n        private void resetData() {\r\n            calendar_date = null;\r\n            is24HourView = true;\r\n        }\r\n    \r\n        public static String pad(int integerToPad) {\r\n            if (integerToPad &gt;= 10 || integerToPad &lt; 0)\r\n                return String.valueOf(integerToPad);\r\n            else\r\n                return &quot;0&quot; + String.valueOf(integerToPad);\r\n        }\r\n    }\r\n\r\n\r\nIn your Activity : \r\n\r\nMainActivity.java: \r\n\r\n\r\n        public class MainActivity extends Activity{\r\n        \r\n         CustomDateTimePicker custom;\r\n    Button btnEventDateTime;\r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n        btnEventDateTime = ((Button) findViewById(R.id.btnEventDateTime));\r\n        custom = new CustomDateTimePicker(this,\r\n                        new CustomDateTimePicker.ICustomDateTimeListener() {\r\n        \r\n                            @Override\r\n                            public void onSet(Dialog dialog, Calendar calendarSelected,\r\n                                              Date dateSelected, int year, String monthFullName,\r\n                                              String monthShortName, int monthNumber, int day,\r\n                                              String weekDayFullName, String weekDayShortName,\r\n                                              int hour24, int hour12, int min, int sec,\r\n                                              String AM_PM) {\r\n        //                        ((TextInputEditText) findViewById(R.id.edtEventDateTime))\r\n                                edtEventDateTime.setText(&quot;&quot;);\r\n                                edtEventDateTime.setText(year\r\n                                        + &quot;-&quot; + (monthNumber + 1) + &quot;-&quot; + calendarSelected.get(Calendar.DAY_OF_MONTH)\r\n                                        + &quot; &quot; + hour24 + &quot;:&quot; + min\r\n                                        + &quot;:&quot; + sec);\r\n                            }\r\n        \r\n                            @Override\r\n                            public void onCancel() {\r\n        \r\n                            }\r\n                        });\r\n                /**\r\n                 * Pass Directly current time format it will return AM and PM if you set\r\n                 * false\r\n                 */\r\n                custom.set24HourFormat(true);\r\n                /**\r\n                 * Pass Directly current data and time to show when it pop up\r\n                 */\r\n                custom.setDate(Calendar.getInstance());\r\n                btnEventDateTime.setOnClickListener(\r\n                        new View.OnClickListener() {\r\n        \r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                custom.showDialog();\r\n                            }\r\n                        });\r\n        }\r\n        }\r\n\r\n","title":"Android Date Time picker in one dialog","body":"<p>Try this code : </p>\n\n<p>CustomDateTimePicker.java</p>\n\n<pre><code>import android.app.Activity;\nimport android.app.Dialog;\nimport android.content.DialogInterface;\nimport android.view.Gravity;\nimport android.view.View;\nimport android.view.Window;\nimport android.widget.Button;\nimport android.widget.DatePicker;\nimport android.widget.FrameLayout;\nimport android.widget.LinearLayout;\nimport android.widget.TimePicker;\nimport android.widget.ViewSwitcher;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\n\n/**\n * Created by admin on 6/29/2016.\n */\npublic class CustomDateTimePicker implements View.OnClickListener {\n    private DatePicker datePicker;\n    private TimePicker timePicker;\n    private ViewSwitcher viewSwitcher;\n\n    private final int SET_DATE = 100, SET_TIME = 101, SET = 102, CANCEL = 103;\n\n    private Button btn_setDate, btn_setTime, btn_set, btn_cancel;\n\n    private Calendar calendar_date = null;\n\n    private Activity activity;\n\n    private ICustomDateTimeListener iCustomDateTimeListener = null;\n\n    private Dialog dialog;\n\n    private boolean is24HourView = true, isAutoDismiss = true;\n\n    private int selectedHour, selectedMinute;\n\n    public CustomDateTimePicker(Activity a,\n                                ICustomDateTimeListener customDateTimeListener) {\n        activity = a;\n        iCustomDateTimeListener = customDateTimeListener;\n\n        dialog = new Dialog(activity);\n        dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {\n            @Override\n            public void onDismiss(DialogInterface dialog) {\n                resetData();\n            }\n        });\n\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n        View dialogView = getDateTimePickerLayout();\n        dialog.setContentView(dialogView);\n    }\n\n    public View getDateTimePickerLayout() {\n        LinearLayout.LayoutParams linear_match_wrap = new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                LinearLayout.LayoutParams.MATCH_PARENT);\n        LinearLayout.LayoutParams linear_wrap_wrap = new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.WRAP_CONTENT,\n                LinearLayout.LayoutParams.WRAP_CONTENT);\n        FrameLayout.LayoutParams frame_match_wrap = new FrameLayout.LayoutParams(\n                FrameLayout.LayoutParams.MATCH_PARENT,\n                FrameLayout.LayoutParams.WRAP_CONTENT);\n\n        LinearLayout.LayoutParams button_params = new LinearLayout.LayoutParams(\n                0, LinearLayout.LayoutParams.WRAP_CONTENT, 1.0f);\n\n        LinearLayout linear_main = new LinearLayout(activity);\n        linear_main.setLayoutParams(linear_match_wrap);\n        linear_main.setOrientation(LinearLayout.VERTICAL);\n        linear_main.setGravity(Gravity.CENTER);\n\n        LinearLayout linear_child = new LinearLayout(activity);\n        linear_child.setLayoutParams(linear_wrap_wrap);\n        linear_child.setOrientation(LinearLayout.VERTICAL);\n\n        LinearLayout linear_top = new LinearLayout(activity);\n        linear_top.setLayoutParams(linear_match_wrap);\n\n        btn_setDate = new Button(activity);\n        btn_setDate.setLayoutParams(button_params);\n        btn_setDate.setText(\"Set Date\");\n        btn_setDate.setId(SET_DATE);\n        btn_setDate.setOnClickListener(this);\n\n        btn_setTime = new Button(activity);\n        btn_setTime.setLayoutParams(button_params);\n        btn_setTime.setText(\"Set Time\");\n        btn_setTime.setId(SET_TIME);\n        btn_setTime.setOnClickListener(this);\n\n        linear_top.addView(btn_setDate);\n        linear_top.addView(btn_setTime);\n\n        viewSwitcher = new ViewSwitcher(activity);\n        viewSwitcher.setLayoutParams(frame_match_wrap);\n\n        datePicker = new DatePicker(activity);\n        timePicker = new TimePicker(activity);\n        timePicker.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {\n            @Override\n            public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {\n                selectedHour = hourOfDay;\n                selectedMinute = minute;\n            }\n        });\n\n        viewSwitcher.addView(timePicker);\n        viewSwitcher.addView(datePicker);\n\n        LinearLayout linear_bottom = new LinearLayout(activity);\n        linear_match_wrap.topMargin = 8;\n        linear_bottom.setLayoutParams(linear_match_wrap);\n\n        btn_set = new Button(activity);\n        btn_set.setLayoutParams(button_params);\n        btn_set.setText(\"Set\");\n        btn_set.setId(SET);\n        btn_set.setOnClickListener(this);\n\n        btn_cancel = new Button(activity);\n        btn_cancel.setLayoutParams(button_params);\n        btn_cancel.setText(\"Cancel\");\n        btn_cancel.setId(CANCEL);\n        btn_cancel.setOnClickListener(this);\n\n        linear_bottom.addView(btn_set);\n        linear_bottom.addView(btn_cancel);\n\n        linear_child.addView(linear_top);\n        linear_child.addView(viewSwitcher);\n        linear_child.addView(linear_bottom);\n\n        linear_main.addView(linear_child);\n\n        return linear_main;\n    }\n\n    public void showDialog() {\n        if (!dialog.isShowing()) {\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            selectedHour = calendar_date.get(Calendar.HOUR_OF_DAY);\n            selectedMinute = calendar_date.get(Calendar.MINUTE);\n\n            timePicker.setIs24HourView(is24HourView);\n            timePicker.setCurrentHour(selectedHour);\n            timePicker.setCurrentMinute(selectedMinute);\n\n            datePicker.updateDate(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DATE));\n\n            dialog.show();\n\n            btn_setDate.performClick();\n        }\n    }\n\n    public void setAutoDismiss(boolean isAutoDismiss) {\n        this.isAutoDismiss = isAutoDismiss;\n    }\n\n    public void dismissDialog() {\n        if (!dialog.isShowing())\n            dialog.dismiss();\n    }\n\n    public void setDate(Calendar calendar) {\n        if (calendar != null)\n            calendar_date = calendar;\n    }\n\n    public void setDate(Date date) {\n        if (date != null) {\n            calendar_date = Calendar.getInstance();\n            calendar_date.setTime(date);\n        }\n    }\n\n    public void setDate(int year, int month, int day) {\n        if (month &lt; 12 &amp;&amp; month &gt;= 0 &amp;&amp; day &lt; 32 &amp;&amp; day &gt;= 0 &amp;&amp; year &gt; 100\n                &amp;&amp; year &lt; 3000) {\n            calendar_date = Calendar.getInstance();\n            calendar_date.set(year, month, day);\n        }\n\n    }\n\n    public void setTimeIn24HourFormat(int hourIn24Format, int minute) {\n        if (hourIn24Format &lt; 24 &amp;&amp; hourIn24Format &gt;= 0 &amp;&amp; minute &gt;= 0\n                &amp;&amp; minute &lt; 60) {\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            calendar_date.set(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\n                    minute);\n\n            is24HourView = true;\n        }\n    }\n\n    public void setTimeIn12HourFormat(int hourIn12Format, int minute,\n                                      boolean isAM) {\n        if (hourIn12Format &lt; 13 &amp;&amp; hourIn12Format &gt; 0 &amp;&amp; minute &gt;= 0\n                &amp;&amp; minute &lt; 60) {\n            if (hourIn12Format == 12)\n                hourIn12Format = 0;\n\n            int hourIn24Format = hourIn12Format;\n\n            if (!isAM)\n                hourIn24Format += 12;\n\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            calendar_date.set(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\n                    minute);\n\n            is24HourView = false;\n        }\n    }\n\n    public void set24HourFormat(boolean is24HourFormat) {\n        is24HourView = is24HourFormat;\n    }\n\n    public interface ICustomDateTimeListener {\n        public void onSet(Dialog dialog, Calendar calendarSelected,\n                          Date dateSelected, int year, String monthFullName,\n                          String monthShortName, int monthNumber, int day,\n                          String weekDayFullName, String weekDayShortName, int hour24,\n                          int hour12, int min, int sec, String AM_PM);\n\n        public void onCancel();\n    }\n\n    @Override\n    public void onClick(View v) {\n        switch (v.getId()) {\n            case SET_DATE:\n            btn_setTime.setEnabled(true);\n            btn_setDate.setEnabled(false);\n\n            if (viewSwitcher.getCurrentView() != datePicker) {\n                viewSwitcher.showPrevious();\n            }\n            break;\n\n        case SET_TIME:\n            btn_setTime.setEnabled(false);\n            btn_setDate.setEnabled(true);\n            if (viewSwitcher.getCurrentView() == datePicker) {\n                viewSwitcher.showNext();\n            }\n            break;\n\n\n            case SET:\n                if (iCustomDateTimeListener != null) {\n                    int month = datePicker.getMonth();\n                    int year = datePicker.getYear();\n                    int day = datePicker.getDayOfMonth();\n\n\n                    calendar_date.set(year, month, day, selectedHour,\n                            selectedMinute);\n\n                    iCustomDateTimeListener.onSet(dialog, calendar_date,\n                            calendar_date.getTime(), calendar_date\n                                    .get(Calendar.YEAR),\n                            getMonthFullName(calendar_date.get(Calendar.MONTH)),\n                            getMonthShortName(calendar_date.get(Calendar.MONTH)),\n                            calendar_date.get(Calendar.MONTH), calendar_date\n                                    .get(Calendar.DAY_OF_MONTH),\n                            getWeekDayFullName(calendar_date\n                                    .get(Calendar.DAY_OF_WEEK)),\n                            getWeekDayShortName(calendar_date\n                                    .get(Calendar.DAY_OF_WEEK)), calendar_date\n                                    .get(Calendar.HOUR_OF_DAY),\n                            getHourIn12Format(calendar_date\n                                    .get(Calendar.HOUR_OF_DAY)), calendar_date\n                                    .get(Calendar.MINUTE), calendar_date\n                                    .get(Calendar.SECOND), getAMPM(calendar_date));\n                }\n                if (dialog.isShowing() &amp;&amp; isAutoDismiss)\n                    dialog.dismiss();\n                break;\n\n            case CANCEL:\n                if (iCustomDateTimeListener != null)\n                    iCustomDateTimeListener.onCancel();\n                if (dialog.isShowing())\n                    dialog.dismiss();\n                break;\n        }\n    }\n\n    /**\n     * @param date\n     *            date in String\n     * @param fromFormat\n     *            format of your &lt;b&gt;date&lt;/b&gt; eg: if your date is 2011-07-07\n     *            09:09:09 then your format will be &lt;b&gt;yyyy-MM-dd hh:mm:ss&lt;/b&gt;\n     * @param toFormat\n     *            format to which you want to convert your &lt;b&gt;date&lt;/b&gt; eg: if\n     *            required format is 31 July 2011 then the toFormat should be\n     *            &lt;b&gt;d MMMM yyyy&lt;/b&gt;\n     * @return formatted date\n     */\n    public static String convertDate(String date, String fromFormat,\n                                     String toFormat) {\n        try {\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat);\n            Date d = simpleDateFormat.parse(date);\n            Calendar calendar = Calendar.getInstance();\n            calendar.setTime(d);\n\n            simpleDateFormat = new SimpleDateFormat(toFormat);\n            simpleDateFormat.setCalendar(calendar);\n            date = simpleDateFormat.format(calendar.getTime());\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return date;\n    }\n\n    private String getMonthFullName(int monthNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.MONTH, monthNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"MMMM\");\n        simpleDateFormat.setCalendar(calendar);\n        String monthName = simpleDateFormat.format(calendar.getTime());\n\n        return monthName;\n    }\n\n    private String getMonthShortName(int monthNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.MONTH, monthNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"MMM\");\n        simpleDateFormat.setCalendar(calendar);\n        String monthName = simpleDateFormat.format(calendar.getTime());\n\n        return monthName;\n    }\n\n    private String getWeekDayFullName(int weekDayNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EEEE\");\n        simpleDateFormat.setCalendar(calendar);\n        String weekName = simpleDateFormat.format(calendar.getTime());\n\n        return weekName;\n    }\n\n    private String getWeekDayShortName(int weekDayNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EE\");\n        simpleDateFormat.setCalendar(calendar);\n        String weekName = simpleDateFormat.format(calendar.getTime());\n\n        return weekName;\n    }\n\n    private int getHourIn12Format(int hour24) {\n        int hourIn12Format = 0;\n\n        if (hour24 == 0)\n            hourIn12Format = 12;\n        else if (hour24 &lt;= 12)\n            hourIn12Format = hour24;\n        else\n            hourIn12Format = hour24 - 12;\n\n        return hourIn12Format;\n    }\n\n    private String getAMPM(Calendar calendar) {\n        String ampm = (calendar.get(Calendar.AM_PM) == (Calendar.AM)) ? \"AM\"\n                : \"PM\";\n        return ampm;\n    }\n\n    private void resetData() {\n        calendar_date = null;\n        is24HourView = true;\n    }\n\n    public static String pad(int integerToPad) {\n        if (integerToPad &gt;= 10 || integerToPad &lt; 0)\n            return String.valueOf(integerToPad);\n        else\n            return \"0\" + String.valueOf(integerToPad);\n    }\n}\n</code></pre>\n\n<p>In your Activity : </p>\n\n<p>MainActivity.java: </p>\n\n<pre><code>    public class MainActivity extends Activity{\n\n     CustomDateTimePicker custom;\nButton btnEventDateTime;\n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n    btnEventDateTime = ((Button) findViewById(R.id.btnEventDateTime));\n    custom = new CustomDateTimePicker(this,\n                    new CustomDateTimePicker.ICustomDateTimeListener() {\n\n                        @Override\n                        public void onSet(Dialog dialog, Calendar calendarSelected,\n                                          Date dateSelected, int year, String monthFullName,\n                                          String monthShortName, int monthNumber, int day,\n                                          String weekDayFullName, String weekDayShortName,\n                                          int hour24, int hour12, int min, int sec,\n                                          String AM_PM) {\n    //                        ((TextInputEditText) findViewById(R.id.edtEventDateTime))\n                            edtEventDateTime.setText(\"\");\n                            edtEventDateTime.setText(year\n                                    + \"-\" + (monthNumber + 1) + \"-\" + calendarSelected.get(Calendar.DAY_OF_MONTH)\n                                    + \" \" + hour24 + \":\" + min\n                                    + \":\" + sec);\n                        }\n\n                        @Override\n                        public void onCancel() {\n\n                        }\n                    });\n            /**\n             * Pass Directly current time format it will return AM and PM if you set\n             * false\n             */\n            custom.set24HourFormat(true);\n            /**\n             * Pass Directly current data and time to show when it pop up\n             */\n            custom.setDate(Calendar.getInstance());\n            btnEventDateTime.setOnClickListener(\n                    new View.OnClickListener() {\n\n                        @Override\n                        public void onClick(View v) {\n                            custom.showDialog();\n                        }\n                    });\n    }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3304588,"reputation":3664,"user_id":2779803,"accept_rate":54,"display_name":"Misagh Emamverdi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1469598324,"creation_date":1469598324,"answer_id":38604634,"question_id":38604157,"body_markdown":"If you need to select the time right after the date selection you can simply show `TimePickerDialog` automatically after date is selected. This is the easiest way.\r\n\r\nWhile you have listener that is fired when date is selected with selected date, you can simply pass that selected date to `TimePickerDialog` and with a few customization in `mdtp_time_picker_dialog.xml` you can add a `TextView` to show the selected text.\r\n\r\nAnother option is merging `mdtp_time_picker_dialog.xml` and `mdtp_date_picker_dialog.xml` that are root layouts for date picker dialog and time picker dialog. You can set time picker part visibility as `GONE` and switch the visibility when you want to switch pickers.\r\n\r\nThe second solution is more difficult to implement because in addition to layouts, you have to merge all controls and listeners.\r\n\r\nIf you want the user to see both of the pickers, I think you actually need to design a new view yourself. That library layouts is not suitable for this.","title":"Android Date Time picker in one dialog","body":"<p>If you need to select the time right after the date selection you can simply show <code>TimePickerDialog</code> automatically after date is selected. This is the easiest way.</p>\n\n<p>While you have listener that is fired when date is selected with selected date, you can simply pass that selected date to <code>TimePickerDialog</code> and with a few customization in <code>mdtp_time_picker_dialog.xml</code> you can add a <code>TextView</code> to show the selected text.</p>\n\n<p>Another option is merging <code>mdtp_time_picker_dialog.xml</code> and <code>mdtp_date_picker_dialog.xml</code> that are root layouts for date picker dialog and time picker dialog. You can set time picker part visibility as <code>GONE</code> and switch the visibility when you want to switch pickers.</p>\n\n<p>The second solution is more difficult to implement because in addition to layouts, you have to merge all controls and listeners.</p>\n\n<p>If you want the user to see both of the pickers, I think you actually need to design a new view yourself. That library layouts is not suitable for this.</p>\n"},{"tags":[],"owner":{"display_name":"user4696837"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1547696888,"creation_date":1469601084,"answer_id":38605328,"question_id":38604157,"body_markdown":"You can call `TimePicker` after `DatePicker` set Date. Like this..\r\n        \r\n        String date_time = &quot;&quot;;\r\n        int mYear;\r\n\t    int mMonth;\r\n\t    int mDay;\r\n\t\r\n\t    int mHour;\r\n\t    int mMinute;\r\n\r\n    \tet_show_date_time = (EditText) findViewById(R.id.et_show_date_time);\r\n        btn_set_date_time = (Button) findViewById(R.id.btn_set_date_time);\r\n\r\n        btn_set_date_time.setOnClickListener(new OnClickListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onClick(View v) {\r\n\t\t\t\tdatePicker();\r\n\r\n\t\t\t}\r\n\t\t});\r\nDate Picker:\r\n\r\n        private void datePicker(){\r\n    \t\r\n    \t// Get Current Date\r\n        final Calendar c = Calendar.getInstance();\r\n        mYear = c.get(Calendar.YEAR);\r\n        mMonth = c.get(Calendar.MONTH);\r\n        mDay = c.get(Calendar.DAY_OF_MONTH);\r\n\r\n        DatePickerDialog datePickerDialog = new DatePickerDialog(this,\r\n                new DatePickerDialog.OnDateSetListener() {\r\n\r\n                    @Override\r\n                    public void onDateSet(DatePicker view, int year,int monthOfYear, int dayOfMonth) {\r\n\r\n                    \tdate_time = dayOfMonth + &quot;-&quot; + (monthOfYear + 1) + &quot;-&quot; + year;\r\n                       //*************Call Time Picker Here ********************\r\n                       tiemPicker();\r\n                    }\r\n                }, mYear, mMonth, mDay);\r\n           datePickerDialog.show();\r\n        }\r\nTime Picker\r\n\r\n     private void tiemPicker(){\r\n    \t// Get Current Time\r\n        final Calendar c = Calendar.getInstance();\r\n        mHour = c.get(Calendar.HOUR_OF_DAY);\r\n        mMinute = c.get(Calendar.MINUTE);\r\n\r\n        // Launch Time Picker Dialog\r\n        TimePickerDialog timePickerDialog = new TimePickerDialog(this,\r\n                new TimePickerDialog.OnTimeSetListener() {\r\n\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay,int minute) {\r\n                    \t\r\n                    \tmHour = hourOfDay;\r\n                    \tmMinute = minute;\r\n\r\n                    \tet_show_date_time.setText(date_time+&quot; &quot;+hourOfDay + &quot;:&quot; + minute);\r\n                    }\r\n                }, mHour, mMinute, false);\r\n        timePickerDialog.show();\r\n    }\r\n\r\n--\r\n\r\n","title":"Android Date Time picker in one dialog","body":"<p>You can call <code>TimePicker</code> after <code>DatePicker</code> set Date. Like this..</p>\n\n<pre><code>    String date_time = \"\";\n    int mYear;\n    int mMonth;\n    int mDay;\n\n    int mHour;\n    int mMinute;\n\n    et_show_date_time = (EditText) findViewById(R.id.et_show_date_time);\n    btn_set_date_time = (Button) findViewById(R.id.btn_set_date_time);\n\n    btn_set_date_time.setOnClickListener(new OnClickListener() {\n\n        @Override\n        public void onClick(View v) {\n            datePicker();\n\n        }\n    });\n</code></pre>\n\n<p>Date Picker:</p>\n\n<pre><code>    private void datePicker(){\n\n    // Get Current Date\n    final Calendar c = Calendar.getInstance();\n    mYear = c.get(Calendar.YEAR);\n    mMonth = c.get(Calendar.MONTH);\n    mDay = c.get(Calendar.DAY_OF_MONTH);\n\n    DatePickerDialog datePickerDialog = new DatePickerDialog(this,\n            new DatePickerDialog.OnDateSetListener() {\n\n                @Override\n                public void onDateSet(DatePicker view, int year,int monthOfYear, int dayOfMonth) {\n\n                    date_time = dayOfMonth + \"-\" + (monthOfYear + 1) + \"-\" + year;\n                   //*************Call Time Picker Here ********************\n                   tiemPicker();\n                }\n            }, mYear, mMonth, mDay);\n       datePickerDialog.show();\n    }\n</code></pre>\n\n<p>Time Picker</p>\n\n<pre><code> private void tiemPicker(){\n    // Get Current Time\n    final Calendar c = Calendar.getInstance();\n    mHour = c.get(Calendar.HOUR_OF_DAY);\n    mMinute = c.get(Calendar.MINUTE);\n\n    // Launch Time Picker Dialog\n    TimePickerDialog timePickerDialog = new TimePickerDialog(this,\n            new TimePickerDialog.OnTimeSetListener() {\n\n                @Override\n                public void onTimeSet(TimePicker view, int hourOfDay,int minute) {\n\n                    mHour = hourOfDay;\n                    mMinute = minute;\n\n                    et_show_date_time.setText(date_time+\" \"+hourOfDay + \":\" + minute);\n                }\n            }, mHour, mMinute, false);\n    timePickerDialog.show();\n}\n</code></pre>\n\n<p>--</p>\n"},{"tags":[],"owner":{"account_id":7493136,"reputation":151,"user_id":5694162,"accept_rate":100,"display_name":"Ruslan Podurets"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1518643802,"creation_date":1518643802,"answer_id":48796559,"question_id":38604157,"body_markdown":"Googled this problem and found usefull Enamul Haque&#39;s answer. Modified his code little bit and got this result. Its quick solution and will be improved, but works nice)\r\n\r\n    public class DateTimePicker {\r\n    \r\n        @NonNull\r\n        private final Calendar calendar = Calendar.getInstance();\r\n        @Nullable\r\n        private DatePickerDialog datePickerDialog;\r\n        @Nullable\r\n        private TimePickerDialog timePickerDialog;\r\n        @Nullable\r\n        private ResultCallback&lt;Date&gt; dateResultCallback;\r\n    \r\n        public void showDialog(@NonNull Context context, long time) {\r\n            calendar.setTimeInMillis(time);\r\n            closeDialogs();\r\n            showDatePicker(context);\r\n        }\r\n    \r\n        @Nullable\r\n        public ResultCallback&lt;Date&gt; getDateResultCallback() {\r\n            return dateResultCallback;\r\n        }\r\n    \r\n        public void setDateResultCallback(@Nullable ResultCallback&lt;Date&gt; dateResultCallback) {\r\n            this.dateResultCallback = dateResultCallback;\r\n        }\r\n    \r\n        public long getTime() {\r\n            return calendar.getTimeInMillis();\r\n        }\r\n    \r\n        private void closeDialogs() {\r\n            if (datePickerDialog != null) {\r\n                datePickerDialog.dismiss();\r\n                datePickerDialog = null;\r\n            }\r\n            if (timePickerDialog != null) {\r\n                timePickerDialog.dismiss();\r\n                timePickerDialog = null;\r\n            }\r\n        }\r\n    \r\n        private DatePickerDialog.OnDateSetListener dateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n                calendar.set(Calendar.YEAR, year);\r\n                calendar.set(Calendar.MONTH, month);\r\n                calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);\r\n                timePicker(view.getContext());\r\n            }\r\n        };\r\n    \r\n        private TimePickerDialog.OnTimeSetListener timeSetListener = new TimePickerDialog.OnTimeSetListener() {\r\n    \r\n            @Override\r\n            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                calendar.set(Calendar.HOUR_OF_DAY, hourOfDay);\r\n                calendar.set(Calendar.MINUTE, minute);\r\n                if (dateResultCallback != null) {\r\n                    dateResultCallback.onResult(calendar.getTime());\r\n                }\r\n            }\r\n        };\r\n    \r\n        private void showDatePicker(@NonNull Context context) {\r\n            datePickerDialog = new DatePickerDialog(context,\r\n                    dateSetListener,\r\n                    calendar.get(Calendar.YEAR),\r\n                    calendar.get(Calendar.MONTH),\r\n                    calendar.get(Calendar.DAY_OF_MONTH));\r\n            datePickerDialog.show();\r\n        }\r\n    \r\n        private void timePicker(@NonNull Context context) {\r\n            timePickerDialog = new TimePickerDialog(context,\r\n                    timeSetListener,\r\n                    calendar.get(Calendar.HOUR_OF_DAY),\r\n                    calendar.get(Calendar.MINUTE),\r\n                    true);\r\n            timePickerDialog.show();\r\n        }\r\n    \r\n        public void release() {\r\n            closeDialogs();\r\n            dateResultCallback = null;\r\n        }\r\n    \r\n    }\r\n\r\nDialogs calls via method showDialog(...), possible to release object when it not need anymore (in onDestroy() in activity f.e). \r\nAnd again - thanks Enamul Haque for idea.","title":"Android Date Time picker in one dialog","body":"<p>Googled this problem and found usefull Enamul Haque's answer. Modified his code little bit and got this result. Its quick solution and will be improved, but works nice)</p>\n\n<pre><code>public class DateTimePicker {\n\n    @NonNull\n    private final Calendar calendar = Calendar.getInstance();\n    @Nullable\n    private DatePickerDialog datePickerDialog;\n    @Nullable\n    private TimePickerDialog timePickerDialog;\n    @Nullable\n    private ResultCallback&lt;Date&gt; dateResultCallback;\n\n    public void showDialog(@NonNull Context context, long time) {\n        calendar.setTimeInMillis(time);\n        closeDialogs();\n        showDatePicker(context);\n    }\n\n    @Nullable\n    public ResultCallback&lt;Date&gt; getDateResultCallback() {\n        return dateResultCallback;\n    }\n\n    public void setDateResultCallback(@Nullable ResultCallback&lt;Date&gt; dateResultCallback) {\n        this.dateResultCallback = dateResultCallback;\n    }\n\n    public long getTime() {\n        return calendar.getTimeInMillis();\n    }\n\n    private void closeDialogs() {\n        if (datePickerDialog != null) {\n            datePickerDialog.dismiss();\n            datePickerDialog = null;\n        }\n        if (timePickerDialog != null) {\n            timePickerDialog.dismiss();\n            timePickerDialog = null;\n        }\n    }\n\n    private DatePickerDialog.OnDateSetListener dateSetListener = new DatePickerDialog.OnDateSetListener() {\n        @Override\n        public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\n            calendar.set(Calendar.YEAR, year);\n            calendar.set(Calendar.MONTH, month);\n            calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);\n            timePicker(view.getContext());\n        }\n    };\n\n    private TimePickerDialog.OnTimeSetListener timeSetListener = new TimePickerDialog.OnTimeSetListener() {\n\n        @Override\n        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\n            calendar.set(Calendar.HOUR_OF_DAY, hourOfDay);\n            calendar.set(Calendar.MINUTE, minute);\n            if (dateResultCallback != null) {\n                dateResultCallback.onResult(calendar.getTime());\n            }\n        }\n    };\n\n    private void showDatePicker(@NonNull Context context) {\n        datePickerDialog = new DatePickerDialog(context,\n                dateSetListener,\n                calendar.get(Calendar.YEAR),\n                calendar.get(Calendar.MONTH),\n                calendar.get(Calendar.DAY_OF_MONTH));\n        datePickerDialog.show();\n    }\n\n    private void timePicker(@NonNull Context context) {\n        timePickerDialog = new TimePickerDialog(context,\n                timeSetListener,\n                calendar.get(Calendar.HOUR_OF_DAY),\n                calendar.get(Calendar.MINUTE),\n                true);\n        timePickerDialog.show();\n    }\n\n    public void release() {\n        closeDialogs();\n        dateResultCallback = null;\n    }\n\n}\n</code></pre>\n\n<p>Dialogs calls via method showDialog(...), possible to release object when it not need anymore (in onDestroy() in activity f.e). \nAnd again - thanks Enamul Haque for idea.</p>\n"},{"tags":[],"owner":{"account_id":10726753,"reputation":1120,"user_id":7894033,"display_name":"Rajesh Naddy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527333193,"creation_date":1521718256,"answer_id":49427560,"question_id":38604157,"body_markdown":"Use this simple code.. I&#39;m using this code in my Project..\r\n\r\n    final Calendar currentDate = Calendar.getInstance();\r\n    date = Calendar.getInstance();\r\n                DatePickerDialog datePickerDialog = new DatePickerDialog(getContext(), new DatePickerDialog.OnDateSetListener() {\r\n\r\n                    @Override\r\n                    public void onDateSet(DatePicker datePicker, int year, int monthOfYear, int dayOfMonth) {\r\n\r\n                        date.set(year, monthOfYear, dayOfMonth);\r\n                        new TimePickerDialog(getContext(), new TimePickerDialog.OnTimeSetListener() {\r\n                            @Override\r\n                            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                                date.set(Calendar.HOUR_OF_DAY, hourOfDay);\r\n                                date.set(Calendar.MINUTE, minute);\r\n                                // Log.v(TAG, &quot;The choosen one &quot; + date.getTime());\r\n                                // Toast.makeText(getContext(),&quot;The choosen one &quot; + date.getTime(),Toast.LENGTH_SHORT).show();\r\n                                datetime.setText(new SimpleDateFormat(&quot;dd-MMM-yyyy h:mm a&quot;).format(date.getTime()));\r\n                            }\r\n                        },currentDate.get(Calendar.HOUR_OF_DAY), currentDate.get(Calendar.MINUTE), false).show();\r\n\r\n                    }\r\n                }, currentDate.get(Calendar.YEAR), currentDate.get(Calendar.MONTH), currentDate.get(Calendar.DATE));\r\n                datePickerDialog.getDatePicker().setMinDate(currentDate.getTimeInMillis());\r\n                datePickerDialog.show();","title":"Android Date Time picker in one dialog","body":"<p>Use this simple code.. I'm using this code in my Project..</p>\n\n<pre><code>final Calendar currentDate = Calendar.getInstance();\ndate = Calendar.getInstance();\n            DatePickerDialog datePickerDialog = new DatePickerDialog(getContext(), new DatePickerDialog.OnDateSetListener() {\n\n                @Override\n                public void onDateSet(DatePicker datePicker, int year, int monthOfYear, int dayOfMonth) {\n\n                    date.set(year, monthOfYear, dayOfMonth);\n                    new TimePickerDialog(getContext(), new TimePickerDialog.OnTimeSetListener() {\n                        @Override\n                        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\n                            date.set(Calendar.HOUR_OF_DAY, hourOfDay);\n                            date.set(Calendar.MINUTE, minute);\n                            // Log.v(TAG, \"The choosen one \" + date.getTime());\n                            // Toast.makeText(getContext(),\"The choosen one \" + date.getTime(),Toast.LENGTH_SHORT).show();\n                            datetime.setText(new SimpleDateFormat(\"dd-MMM-yyyy h:mm a\").format(date.getTime()));\n                        }\n                    },currentDate.get(Calendar.HOUR_OF_DAY), currentDate.get(Calendar.MINUTE), false).show();\n\n                }\n            }, currentDate.get(Calendar.YEAR), currentDate.get(Calendar.MONTH), currentDate.get(Calendar.DATE));\n            datePickerDialog.getDatePicker().setMinDate(currentDate.getTimeInMillis());\n            datePickerDialog.show();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4964174,"reputation":728,"user_id":3994127,"accept_rate":50,"display_name":"Raghav Satyadev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557270841,"creation_date":1524745651,"answer_id":50042997,"question_id":38604157,"body_markdown":"This answer is basically an improvement in answer given by @Mayur Patel: https://stackoverflow.com/a/38604615/3994127\r\n\r\n**CustomDateTimePicker.java**\r\n\r\n\r\n    import android.app.Dialog;\r\n    import android.content.Context;\r\n    import android.content.DialogInterface;\r\n    import android.support.v7.widget.AppCompatButton;\r\n    import android.view.View;\r\n    import android.view.Window;\r\n    import android.widget.DatePicker;\r\n    import android.widget.TimePicker;\r\n    import android.widget.ViewSwitcher;\r\n    \r\n    import com.gotrack.gotrack.R;\r\n    \r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.Locale;\r\n    \r\n    public class CustomDateTimePicker implements View.OnClickListener {\r\n        private Calendar calendar_date = null;\r\n        private ViewSwitcher viewSwitcher;\r\n        private DatePicker datePicker;\r\n        private TimePicker timePicker;\r\n        private AppCompatButton btnDate, btnTime;\r\n    \r\n        private ICustomDateTimeListener iCustomDateTimeListener = null;\r\n    \r\n        private Dialog dialog;\r\n    \r\n        private boolean is24HourView = true, isAutoDismiss = true;\r\n    \r\n        private int selectedHour, selectedMinute;\r\n    \r\n        public CustomDateTimePicker(Context context,\r\n                                    ICustomDateTimeListener customDateTimeListener) {\r\n            iCustomDateTimeListener = customDateTimeListener;\r\n    \r\n            dialog = new Dialog(context);\r\n            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n            dialog.setContentView(R.layout.date_time_picker);\r\n            dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {\r\n                @Override\r\n                public void onDismiss(DialogInterface dialog) {\r\n                    resetData();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void setView() {\r\n            btnDate = dialog.findViewById(R.id.btn_date);\r\n            btnTime = dialog.findViewById(R.id.btn_time);\r\n            dialog.findViewById(R.id.btn_set).setOnClickListener(this);\r\n            dialog.findViewById(R.id.btn_cancel).setOnClickListener(this);\r\n            viewSwitcher = dialog.findViewById(R.id.view_switcher);\r\n            datePicker = dialog.findViewById(R.id.date_picker);\r\n            timePicker = dialog.findViewById(R.id.time_picker);\r\n    \r\n            btnDate.setOnClickListener(this);\r\n            btnTime.setOnClickListener(this);\r\n    \r\n            timePicker.setIs24HourView(is24HourView);\r\n            timePicker.setCurrentHour(selectedHour);\r\n            timePicker.setCurrentMinute(selectedMinute);\r\n    \r\n            datePicker.updateDate(calendar_date.get(Calendar.YEAR),\r\n                    calendar_date.get(Calendar.MONTH),\r\n                    calendar_date.get(Calendar.DATE));\r\n    \r\n            btnDate.performClick();\r\n        }\r\n    \r\n        public void showDialog() {\r\n            if (!dialog.isShowing()) {\r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                selectedHour = calendar_date.get(Calendar.HOUR_OF_DAY);\r\n                selectedMinute = calendar_date.get(Calendar.MINUTE);\r\n    \r\n                dialog.show();\r\n    \r\n                setView();\r\n            }\r\n        }\r\n    \r\n        public CustomDateTimePicker setAutoDismiss(boolean isAutoDismiss) {\r\n            this.isAutoDismiss = isAutoDismiss;\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker dismissDialog() {\r\n            if (!dialog.isShowing())\r\n                dialog.dismiss();\r\n    \r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setDate(Calendar calendar) {\r\n            if (calendar != null)\r\n                calendar_date = calendar;\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setDate(Date date) {\r\n            if (date != null) {\r\n                calendar_date = Calendar.getInstance();\r\n                calendar_date.setTime(date);\r\n            }\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setDate(int year, int month, int day) {\r\n            if (month &lt; 12 &amp;&amp; month &gt;= 0 &amp;&amp; day &lt; 32 &amp;&amp; day &gt;= 0 &amp;&amp; year &gt; 100\r\n                    &amp;&amp; year &lt; 3000) {\r\n                calendar_date = Calendar.getInstance();\r\n                calendar_date.set(year, month, day);\r\n            }\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setTimeIn24HourFormat(int hourIn24Format, int minute) {\r\n            if (hourIn24Format &lt; 24 &amp;&amp; hourIn24Format &gt;= 0 &amp;&amp; minute &gt;= 0\r\n                    &amp;&amp; minute &lt; 60) {\r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                calendar_date.set(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\r\n                        minute);\r\n    \r\n                is24HourView = true;\r\n            }\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setTimeIn12HourFormat(int hourIn12Format, int minute,\r\n                                                          boolean isAM) {\r\n            if (hourIn12Format &lt; 13 &amp;&amp; hourIn12Format &gt; 0 &amp;&amp; minute &gt;= 0\r\n                    &amp;&amp; minute &lt; 60) {\r\n                if (hourIn12Format == 12)\r\n                    hourIn12Format = 0;\r\n    \r\n                int hourIn24Format = hourIn12Format;\r\n    \r\n                if (!isAM)\r\n                    hourIn24Format += 12;\r\n    \r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                calendar_date.set(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\r\n                        minute);\r\n    \r\n                is24HourView = false;\r\n            }\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker set24HourFormat(boolean is24HourFormat) {\r\n            is24HourView = is24HourFormat;\r\n            return this;\r\n        }\r\n    \r\n        public interface ICustomDateTimeListener {\r\n            void onSet(Dialog dialog, Calendar calendarSelected,\r\n                       Date dateSelected, int year, String monthFullName,\r\n                       String monthShortName, int monthNumber, int day,\r\n                       String weekDayFullName, String weekDayShortName, int hour24,\r\n                       int hour12, int min, int sec, String AM_PM);\r\n    \r\n            void onCancel();\r\n        }\r\n    \r\n        @Override\r\n        public void onClick(View v) {\r\n            switch (v.getId()) {\r\n                case R.id.btn_date:\r\n                    btnTime.setEnabled(true);\r\n                    btnDate.setEnabled(false);\r\n    \r\n                    if (viewSwitcher.getCurrentView() != datePicker) {\r\n                        viewSwitcher.showPrevious();\r\n                    }\r\n                    break;\r\n    \r\n                case R.id.btn_time:\r\n                    btnTime.setEnabled(false);\r\n                    btnDate.setEnabled(true);\r\n                    if (viewSwitcher.getCurrentView() == datePicker) {\r\n                        viewSwitcher.showNext();\r\n                    }\r\n                    break;\r\n    \r\n    \r\n                case R.id.btn_set:\r\n                    if (iCustomDateTimeListener != null) {\r\n                        int month = datePicker.getMonth();\r\n                        int year = datePicker.getYear();\r\n                        int day = datePicker.getDayOfMonth();\r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                        selectedHour = timePicker.getHour();\r\n                        selectedMinute = timePicker.getMinute();\r\n                    } else {\r\n                        selectedHour = timePicker.getCurrentHour();\r\n                        selectedMinute = timePicker.getCurrentMinute();\r\n                    }\r\n    \r\n                        calendar_date.set(year, month, day, selectedHour,\r\n                                selectedMinute);\r\n    \r\n                        iCustomDateTimeListener.onSet(dialog, calendar_date,\r\n                                calendar_date.getTime(), calendar_date\r\n                                        .get(Calendar.YEAR),\r\n                                getMonthFullName(calendar_date.get(Calendar.MONTH)),\r\n                                getMonthShortName(calendar_date.get(Calendar.MONTH)),\r\n                                calendar_date.get(Calendar.MONTH), calendar_date\r\n                                        .get(Calendar.DAY_OF_MONTH),\r\n                                getWeekDayFullName(calendar_date\r\n                                        .get(Calendar.DAY_OF_WEEK)),\r\n                                getWeekDayShortName(calendar_date\r\n                                        .get(Calendar.DAY_OF_WEEK)), calendar_date\r\n                                        .get(Calendar.HOUR_OF_DAY),\r\n                                getHourIn12Format(calendar_date\r\n                                        .get(Calendar.HOUR_OF_DAY)), calendar_date\r\n                                        .get(Calendar.MINUTE), calendar_date\r\n                                        .get(Calendar.SECOND), getAMPM(calendar_date));\r\n                    }\r\n                    if (dialog.isShowing() &amp;&amp; isAutoDismiss)\r\n                        dialog.dismiss();\r\n                    break;\r\n    \r\n                case R.id.btn_cancel:\r\n                    if (iCustomDateTimeListener != null)\r\n                        iCustomDateTimeListener.onCancel();\r\n                    if (dialog.isShowing())\r\n                        dialog.dismiss();\r\n                    break;\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @param date       date in String\r\n         * @param fromFormat format of your &lt;b&gt;date&lt;/b&gt; eg: if your date is 2011-07-07\r\n         *                   09:09:09 then your format will be &lt;b&gt;yyyy-MM-dd hh:mm:ss&lt;/b&gt;\r\n         * @param toFormat   format to which you want to convert your &lt;b&gt;date&lt;/b&gt; eg: if\r\n         *                   required format is 31 July 2011 then the toFormat should be\r\n         *                   &lt;b&gt;d MMMM yyyy&lt;/b&gt;\r\n         * @return formatted date\r\n         */\r\n        public static String convertDate(String date, String fromFormat,\r\n                                         String toFormat) {\r\n            try {\r\n                SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat, Locale.getDefault());\r\n                Date d = simpleDateFormat.parse(date);\r\n                Calendar calendar = Calendar.getInstance();\r\n                calendar.setTime(d);\r\n    \r\n                simpleDateFormat = new SimpleDateFormat(toFormat, Locale.getDefault());\r\n                simpleDateFormat.setCalendar(calendar);\r\n                date = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return date;\r\n        }\r\n    \r\n        private String getMonthFullName(int monthNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.MONTH, monthNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;MMMM&quot;, Locale.getDefault());\r\n            simpleDateFormat.setCalendar(calendar);\r\n    \r\n            return simpleDateFormat.format(calendar.getTime());\r\n        }\r\n    \r\n        private String getMonthShortName(int monthNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.MONTH, monthNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;MMM&quot;, Locale.getDefault());\r\n            simpleDateFormat.setCalendar(calendar);\r\n    \r\n            return simpleDateFormat.format(calendar.getTime());\r\n        }\r\n    \r\n        private String getWeekDayFullName(int weekDayNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEEE&quot;, Locale.getDefault());\r\n            simpleDateFormat.setCalendar(calendar);\r\n    \r\n            return simpleDateFormat.format(calendar.getTime());\r\n        }\r\n    \r\n        private String getWeekDayShortName(int weekDayNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EE&quot;, Locale.getDefault());\r\n            simpleDateFormat.setCalendar(calendar);\r\n    \r\n            return simpleDateFormat.format(calendar.getTime());\r\n        }\r\n    \r\n        private int getHourIn12Format(int hour24) {\r\n            int hourIn12Format = 0;\r\n    \r\n            if (hour24 == 0)\r\n                hourIn12Format = 12;\r\n            else if (hour24 &lt;= 12)\r\n                hourIn12Format = hour24;\r\n            else\r\n                hourIn12Format = hour24 - 12;\r\n    \r\n            return hourIn12Format;\r\n        }\r\n    \r\n        private String getAMPM(Calendar calendar) {\r\n            return (calendar.get(Calendar.AM_PM) == (Calendar.AM)) ? &quot;AM&quot;\r\n                    : &quot;PM&quot;;\r\n        }\r\n    \r\n        private CustomDateTimePicker resetData() {\r\n            calendar_date = null;\r\n            is24HourView = true;\r\n            return this;\r\n        }\r\n    \r\n        public static String pad(int integerToPad) {\r\n            if (integerToPad &gt;= 10 || integerToPad &lt; 0)\r\n                return String.valueOf(integerToPad);\r\n            else\r\n                return &quot;0&quot; + String.valueOf(integerToPad);\r\n        }\r\n    }\r\n\r\n**date_time_picker.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n        &lt;android.support.constraint.ConstraintLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:padding=&quot;15dp&quot;&gt;\r\n    \r\n            &lt;android.support.v7.widget.AppCompatButton\r\n                android:id=&quot;@+id/btn_date&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginEnd=&quot;5dp&quot;\r\n                android:text=&quot;@string/set_date&quot;\r\n                app:backgroundTint=&quot;@color/colorPrimary&quot;\r\n                app:layout_constraintEnd_toStartOf=&quot;@+id/btn_time&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n            &lt;android.support.v7.widget.AppCompatButton\r\n                android:id=&quot;@+id/btn_time&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;5dp&quot;\r\n                android:text=&quot;@string/set_time&quot;\r\n                app:backgroundTint=&quot;@color/colorPrimary&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toEndOf=&quot;@+id/btn_date&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n            &lt;android.support.v7.widget.AppCompatButton\r\n                android:id=&quot;@+id/btn_set&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginEnd=&quot;5dp&quot;\r\n                android:text=&quot;@string/set&quot;\r\n                app:backgroundTint=&quot;@color/colorPrimary&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toStartOf=&quot;@+id/btn_cancel&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n    \r\n            &lt;android.support.v7.widget.AppCompatButton\r\n                android:id=&quot;@+id/btn_cancel&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;5dp&quot;\r\n                android:text=&quot;@string/cancel&quot;\r\n                app:backgroundTint=&quot;@color/colorPrimary&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toEndOf=&quot;@+id/btn_set&quot; /&gt;\r\n    \r\n            &lt;ViewSwitcher\r\n                android:id=&quot;@+id/view_switcher&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                app:layout_constraintBottom_toTopOf=&quot;@+id/btn_set&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toBottomOf=&quot;@+id/btn_date&quot;&gt;\r\n    \r\n                &lt;DatePicker\r\n                    android:id=&quot;@+id/date_picker&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:theme=&quot;@style/DialogTheme&quot; /&gt;\r\n    \r\n                &lt;TimePicker\r\n                    android:id=&quot;@+id/time_picker&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:theme=&quot;@style/DialogTheme&quot; /&gt;\r\n            &lt;/ViewSwitcher&gt;\r\n        &lt;/android.support.constraint.ConstraintLayout&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\n\r\n**DialogTheme style**\r\n \r\n\r\n    &lt;style name=&quot;DialogTheme&quot;&gt;\r\n            &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n            &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n**Calling code**\r\n\r\n    new CustomDateTimePicker(context,\r\n            new CustomDateTimePicker.ICustomDateTimeListener() {\r\n                @Override\r\n                public void onSet(Dialog dialog, Calendar calendarSelected,\r\n                                  Date dateSelected, int year,\r\n                                  String monthFullName,\r\n                                  String monthShortName,\r\n                                  int monthNumber, int date,\r\n                                  String weekDayFullName,\r\n                                  String weekDayShortName, int hour24,\r\n                                  int hour12,\r\n                                  int min, int sec, String AM_PM) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onCancel() {\r\n    \r\n                }\r\n            }).set24HourFormat(true).setDate(Calendar.getInstance())\r\n            .showDialog();","title":"Android Date Time picker in one dialog","body":"<p>This answer is basically an improvement in answer given by @Mayur Patel: <a href=\"https://stackoverflow.com/a/38604615/3994127\">https://stackoverflow.com/a/38604615/3994127</a></p>\n\n<p><strong>CustomDateTimePicker.java</strong></p>\n\n<pre><code>import android.app.Dialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\nimport android.support.v7.widget.AppCompatButton;\nimport android.view.View;\nimport android.view.Window;\nimport android.widget.DatePicker;\nimport android.widget.TimePicker;\nimport android.widget.ViewSwitcher;\n\nimport com.gotrack.gotrack.R;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.Locale;\n\npublic class CustomDateTimePicker implements View.OnClickListener {\n    private Calendar calendar_date = null;\n    private ViewSwitcher viewSwitcher;\n    private DatePicker datePicker;\n    private TimePicker timePicker;\n    private AppCompatButton btnDate, btnTime;\n\n    private ICustomDateTimeListener iCustomDateTimeListener = null;\n\n    private Dialog dialog;\n\n    private boolean is24HourView = true, isAutoDismiss = true;\n\n    private int selectedHour, selectedMinute;\n\n    public CustomDateTimePicker(Context context,\n                                ICustomDateTimeListener customDateTimeListener) {\n        iCustomDateTimeListener = customDateTimeListener;\n\n        dialog = new Dialog(context);\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n        dialog.setContentView(R.layout.date_time_picker);\n        dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {\n            @Override\n            public void onDismiss(DialogInterface dialog) {\n                resetData();\n            }\n        });\n    }\n\n    private void setView() {\n        btnDate = dialog.findViewById(R.id.btn_date);\n        btnTime = dialog.findViewById(R.id.btn_time);\n        dialog.findViewById(R.id.btn_set).setOnClickListener(this);\n        dialog.findViewById(R.id.btn_cancel).setOnClickListener(this);\n        viewSwitcher = dialog.findViewById(R.id.view_switcher);\n        datePicker = dialog.findViewById(R.id.date_picker);\n        timePicker = dialog.findViewById(R.id.time_picker);\n\n        btnDate.setOnClickListener(this);\n        btnTime.setOnClickListener(this);\n\n        timePicker.setIs24HourView(is24HourView);\n        timePicker.setCurrentHour(selectedHour);\n        timePicker.setCurrentMinute(selectedMinute);\n\n        datePicker.updateDate(calendar_date.get(Calendar.YEAR),\n                calendar_date.get(Calendar.MONTH),\n                calendar_date.get(Calendar.DATE));\n\n        btnDate.performClick();\n    }\n\n    public void showDialog() {\n        if (!dialog.isShowing()) {\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            selectedHour = calendar_date.get(Calendar.HOUR_OF_DAY);\n            selectedMinute = calendar_date.get(Calendar.MINUTE);\n\n            dialog.show();\n\n            setView();\n        }\n    }\n\n    public CustomDateTimePicker setAutoDismiss(boolean isAutoDismiss) {\n        this.isAutoDismiss = isAutoDismiss;\n        return this;\n    }\n\n    public CustomDateTimePicker dismissDialog() {\n        if (!dialog.isShowing())\n            dialog.dismiss();\n\n        return this;\n    }\n\n    public CustomDateTimePicker setDate(Calendar calendar) {\n        if (calendar != null)\n            calendar_date = calendar;\n        return this;\n    }\n\n    public CustomDateTimePicker setDate(Date date) {\n        if (date != null) {\n            calendar_date = Calendar.getInstance();\n            calendar_date.setTime(date);\n        }\n        return this;\n    }\n\n    public CustomDateTimePicker setDate(int year, int month, int day) {\n        if (month &lt; 12 &amp;&amp; month &gt;= 0 &amp;&amp; day &lt; 32 &amp;&amp; day &gt;= 0 &amp;&amp; year &gt; 100\n                &amp;&amp; year &lt; 3000) {\n            calendar_date = Calendar.getInstance();\n            calendar_date.set(year, month, day);\n        }\n        return this;\n    }\n\n    public CustomDateTimePicker setTimeIn24HourFormat(int hourIn24Format, int minute) {\n        if (hourIn24Format &lt; 24 &amp;&amp; hourIn24Format &gt;= 0 &amp;&amp; minute &gt;= 0\n                &amp;&amp; minute &lt; 60) {\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            calendar_date.set(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\n                    minute);\n\n            is24HourView = true;\n        }\n        return this;\n    }\n\n    public CustomDateTimePicker setTimeIn12HourFormat(int hourIn12Format, int minute,\n                                                      boolean isAM) {\n        if (hourIn12Format &lt; 13 &amp;&amp; hourIn12Format &gt; 0 &amp;&amp; minute &gt;= 0\n                &amp;&amp; minute &lt; 60) {\n            if (hourIn12Format == 12)\n                hourIn12Format = 0;\n\n            int hourIn24Format = hourIn12Format;\n\n            if (!isAM)\n                hourIn24Format += 12;\n\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            calendar_date.set(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\n                    minute);\n\n            is24HourView = false;\n        }\n        return this;\n    }\n\n    public CustomDateTimePicker set24HourFormat(boolean is24HourFormat) {\n        is24HourView = is24HourFormat;\n        return this;\n    }\n\n    public interface ICustomDateTimeListener {\n        void onSet(Dialog dialog, Calendar calendarSelected,\n                   Date dateSelected, int year, String monthFullName,\n                   String monthShortName, int monthNumber, int day,\n                   String weekDayFullName, String weekDayShortName, int hour24,\n                   int hour12, int min, int sec, String AM_PM);\n\n        void onCancel();\n    }\n\n    @Override\n    public void onClick(View v) {\n        switch (v.getId()) {\n            case R.id.btn_date:\n                btnTime.setEnabled(true);\n                btnDate.setEnabled(false);\n\n                if (viewSwitcher.getCurrentView() != datePicker) {\n                    viewSwitcher.showPrevious();\n                }\n                break;\n\n            case R.id.btn_time:\n                btnTime.setEnabled(false);\n                btnDate.setEnabled(true);\n                if (viewSwitcher.getCurrentView() == datePicker) {\n                    viewSwitcher.showNext();\n                }\n                break;\n\n\n            case R.id.btn_set:\n                if (iCustomDateTimeListener != null) {\n                    int month = datePicker.getMonth();\n                    int year = datePicker.getYear();\n                    int day = datePicker.getDayOfMonth();\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                    selectedHour = timePicker.getHour();\n                    selectedMinute = timePicker.getMinute();\n                } else {\n                    selectedHour = timePicker.getCurrentHour();\n                    selectedMinute = timePicker.getCurrentMinute();\n                }\n\n                    calendar_date.set(year, month, day, selectedHour,\n                            selectedMinute);\n\n                    iCustomDateTimeListener.onSet(dialog, calendar_date,\n                            calendar_date.getTime(), calendar_date\n                                    .get(Calendar.YEAR),\n                            getMonthFullName(calendar_date.get(Calendar.MONTH)),\n                            getMonthShortName(calendar_date.get(Calendar.MONTH)),\n                            calendar_date.get(Calendar.MONTH), calendar_date\n                                    .get(Calendar.DAY_OF_MONTH),\n                            getWeekDayFullName(calendar_date\n                                    .get(Calendar.DAY_OF_WEEK)),\n                            getWeekDayShortName(calendar_date\n                                    .get(Calendar.DAY_OF_WEEK)), calendar_date\n                                    .get(Calendar.HOUR_OF_DAY),\n                            getHourIn12Format(calendar_date\n                                    .get(Calendar.HOUR_OF_DAY)), calendar_date\n                                    .get(Calendar.MINUTE), calendar_date\n                                    .get(Calendar.SECOND), getAMPM(calendar_date));\n                }\n                if (dialog.isShowing() &amp;&amp; isAutoDismiss)\n                    dialog.dismiss();\n                break;\n\n            case R.id.btn_cancel:\n                if (iCustomDateTimeListener != null)\n                    iCustomDateTimeListener.onCancel();\n                if (dialog.isShowing())\n                    dialog.dismiss();\n                break;\n        }\n    }\n\n    /**\n     * @param date       date in String\n     * @param fromFormat format of your &lt;b&gt;date&lt;/b&gt; eg: if your date is 2011-07-07\n     *                   09:09:09 then your format will be &lt;b&gt;yyyy-MM-dd hh:mm:ss&lt;/b&gt;\n     * @param toFormat   format to which you want to convert your &lt;b&gt;date&lt;/b&gt; eg: if\n     *                   required format is 31 July 2011 then the toFormat should be\n     *                   &lt;b&gt;d MMMM yyyy&lt;/b&gt;\n     * @return formatted date\n     */\n    public static String convertDate(String date, String fromFormat,\n                                     String toFormat) {\n        try {\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat, Locale.getDefault());\n            Date d = simpleDateFormat.parse(date);\n            Calendar calendar = Calendar.getInstance();\n            calendar.setTime(d);\n\n            simpleDateFormat = new SimpleDateFormat(toFormat, Locale.getDefault());\n            simpleDateFormat.setCalendar(calendar);\n            date = simpleDateFormat.format(calendar.getTime());\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return date;\n    }\n\n    private String getMonthFullName(int monthNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.MONTH, monthNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"MMMM\", Locale.getDefault());\n        simpleDateFormat.setCalendar(calendar);\n\n        return simpleDateFormat.format(calendar.getTime());\n    }\n\n    private String getMonthShortName(int monthNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.MONTH, monthNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"MMM\", Locale.getDefault());\n        simpleDateFormat.setCalendar(calendar);\n\n        return simpleDateFormat.format(calendar.getTime());\n    }\n\n    private String getWeekDayFullName(int weekDayNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EEEE\", Locale.getDefault());\n        simpleDateFormat.setCalendar(calendar);\n\n        return simpleDateFormat.format(calendar.getTime());\n    }\n\n    private String getWeekDayShortName(int weekDayNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EE\", Locale.getDefault());\n        simpleDateFormat.setCalendar(calendar);\n\n        return simpleDateFormat.format(calendar.getTime());\n    }\n\n    private int getHourIn12Format(int hour24) {\n        int hourIn12Format = 0;\n\n        if (hour24 == 0)\n            hourIn12Format = 12;\n        else if (hour24 &lt;= 12)\n            hourIn12Format = hour24;\n        else\n            hourIn12Format = hour24 - 12;\n\n        return hourIn12Format;\n    }\n\n    private String getAMPM(Calendar calendar) {\n        return (calendar.get(Calendar.AM_PM) == (Calendar.AM)) ? \"AM\"\n                : \"PM\";\n    }\n\n    private CustomDateTimePicker resetData() {\n        calendar_date = null;\n        is24HourView = true;\n        return this;\n    }\n\n    public static String pad(int integerToPad) {\n        if (integerToPad &gt;= 10 || integerToPad &lt; 0)\n            return String.valueOf(integerToPad);\n        else\n            return \"0\" + String.valueOf(integerToPad);\n    }\n}\n</code></pre>\n\n<p><strong>date_time_picker.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"15dp\"&gt;\n\n        &lt;android.support.v7.widget.AppCompatButton\n            android:id=\"@+id/btn_date\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"5dp\"\n            android:text=\"@string/set_date\"\n            app:backgroundTint=\"@color/colorPrimary\"\n            app:layout_constraintEnd_toStartOf=\"@+id/btn_time\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n        &lt;android.support.v7.widget.AppCompatButton\n            android:id=\"@+id/btn_time\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"5dp\"\n            android:text=\"@string/set_time\"\n            app:backgroundTint=\"@color/colorPrimary\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toEndOf=\"@+id/btn_date\"\n            app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n        &lt;android.support.v7.widget.AppCompatButton\n            android:id=\"@+id/btn_set\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"5dp\"\n            android:text=\"@string/set\"\n            app:backgroundTint=\"@color/colorPrimary\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toStartOf=\"@+id/btn_cancel\"\n            app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n        &lt;android.support.v7.widget.AppCompatButton\n            android:id=\"@+id/btn_cancel\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"5dp\"\n            android:text=\"@string/cancel\"\n            app:backgroundTint=\"@color/colorPrimary\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toEndOf=\"@+id/btn_set\" /&gt;\n\n        &lt;ViewSwitcher\n            android:id=\"@+id/view_switcher\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            app:layout_constraintBottom_toTopOf=\"@+id/btn_set\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toBottomOf=\"@+id/btn_date\"&gt;\n\n            &lt;DatePicker\n                android:id=\"@+id/date_picker\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center\"\n                android:theme=\"@style/DialogTheme\" /&gt;\n\n            &lt;TimePicker\n                android:id=\"@+id/time_picker\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center\"\n                android:theme=\"@style/DialogTheme\" /&gt;\n        &lt;/ViewSwitcher&gt;\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p><strong>DialogTheme style</strong></p>\n\n<pre><code>&lt;style name=\"DialogTheme\"&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p><strong>Calling code</strong></p>\n\n<pre><code>new CustomDateTimePicker(context,\n        new CustomDateTimePicker.ICustomDateTimeListener() {\n            @Override\n            public void onSet(Dialog dialog, Calendar calendarSelected,\n                              Date dateSelected, int year,\n                              String monthFullName,\n                              String monthShortName,\n                              int monthNumber, int date,\n                              String weekDayFullName,\n                              String weekDayShortName, int hour24,\n                              int hour12,\n                              int min, int sec, String AM_PM) {\n\n            }\n\n            @Override\n            public void onCancel() {\n\n            }\n        }).set24HourFormat(true).setDate(Calendar.getInstance())\n        .showDialog();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15855435,"reputation":21,"user_id":11439949,"display_name":"Chittu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556800678,"creation_date":1556796087,"answer_id":55951352,"question_id":38604157,"body_markdown":"You Can Get `Date` And `Time` One By One Using `Pickers` In Android.\r\n\r\n    Calendar getDate = Calendar.getInstance();\r\n    \r\n             cDay = getDate.get(Calendar.DAY_OF_MONTH);\r\n             cMonth = getDate.get(Calendar.MONTH);\r\n             cYear = getDate.get(Calendar.YEAR);\r\n    \r\n             timePickerDialog = new TimePickerDialog(DesignActivity.this, new TimePickerDialog.OnTimeSetListener() {\r\n                @Override\r\n                public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n    \r\n                    final String AM_PM ;\r\n    \r\n                    if (hourOfDay &gt; 12) {\r\n                        hourOfDay -= 12;\r\n                        AM_PM = &quot;pm&quot;;\r\n                    } else if (hourOfDay == 0) {\r\n                        hourOfDay += 12;\r\n                        AM_PM = &quot;am&quot;;\r\n                    } else if (hourOfDay == 12)\r\n                        AM_PM = &quot;pm&quot;;\r\n                    else\r\n                        AM_PM = &quot;am&quot;;\r\n    \r\n                    hour1 = hourOfDay;\r\n                    minutes1 = minute;\r\n    \r\n                    DatePickerDialog datePicker = new DatePickerDialog(DesignActivity.this, new DatePickerDialog.OnDateSetListener() {\r\n                        @Override\r\n                        public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n    \r\n                            cYear = year;\r\n                            cMonth = month;\r\n                            cDay = dayOfMonth;\r\n    \r\n                            editText.setText(hour1 + &quot;:&quot; +minutes1 + AM_PM  + &quot;     &quot; + cDay + &quot;/&quot; + cMonth + &quot;/&quot; + cYear);\r\n    \r\n                        }\r\n                    },cYear,cMonth,cDay);\r\n    \r\n                    datePicker.show();\r\n    \r\n                }\r\n            },hour1,minutes1,false);\r\n    \r\n            timePickerDialog.show();\r\n    \r\n        }\r\n    });\r\n\r\nIf You Will Need More Explanation About \r\n&lt;a href=&quot;https://theandroidcodings.blogspot.com/2019/04/time-and-date-pickers-in-android.html&quot;&gt;Click This&lt;/a&gt;.\r\n\r\n","title":"Android Date Time picker in one dialog","body":"<p>You Can Get <code>Date</code> And <code>Time</code> One By One Using <code>Pickers</code> In Android.</p>\n\n<pre><code>Calendar getDate = Calendar.getInstance();\n\n         cDay = getDate.get(Calendar.DAY_OF_MONTH);\n         cMonth = getDate.get(Calendar.MONTH);\n         cYear = getDate.get(Calendar.YEAR);\n\n         timePickerDialog = new TimePickerDialog(DesignActivity.this, new TimePickerDialog.OnTimeSetListener() {\n            @Override\n            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\n\n                final String AM_PM ;\n\n                if (hourOfDay &gt; 12) {\n                    hourOfDay -= 12;\n                    AM_PM = \"pm\";\n                } else if (hourOfDay == 0) {\n                    hourOfDay += 12;\n                    AM_PM = \"am\";\n                } else if (hourOfDay == 12)\n                    AM_PM = \"pm\";\n                else\n                    AM_PM = \"am\";\n\n                hour1 = hourOfDay;\n                minutes1 = minute;\n\n                DatePickerDialog datePicker = new DatePickerDialog(DesignActivity.this, new DatePickerDialog.OnDateSetListener() {\n                    @Override\n                    public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\n\n                        cYear = year;\n                        cMonth = month;\n                        cDay = dayOfMonth;\n\n                        editText.setText(hour1 + \":\" +minutes1 + AM_PM  + \"     \" + cDay + \"/\" + cMonth + \"/\" + cYear);\n\n                    }\n                },cYear,cMonth,cDay);\n\n                datePicker.show();\n\n            }\n        },hour1,minutes1,false);\n\n        timePickerDialog.show();\n\n    }\n});\n</code></pre>\n\n<p>If You Will Need More Explanation About \n<a href=\"https://theandroidcodings.blogspot.com/2019/04/time-and-date-pickers-in-android.html\" rel=\"nofollow noreferrer\">Click This</a>.</p>\n"},{"tags":[],"owner":{"account_id":7837986,"reputation":42767,"user_id":5925259,"accept_rate":100,"display_name":"Yogesh Umesh Vaity"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1589372499,"creation_date":1565525081,"answer_id":57449808,"question_id":38604157,"body_markdown":"## Kotlin ##\r\n\r\nHere&#39;s the tested Kotlin code for combining the `DatePickerDialog` and `TimePickerDialog` together. It becomes simpler because of the support of the closures in Kotlin. The following function should be placed in your `Fragment` or `Activity`. The `requireContext()` method is a member of `Fragment`. If you are using `Activity`, use `applicationContext` instead.\r\n\r\n    private fun pickDateTime() {\r\n        val currentDateTime = Calendar.getInstance()\r\n        val startYear = currentDateTime.get(Calendar.YEAR)\r\n        val startMonth = currentDateTime.get(Calendar.MONTH)\r\n        val startDay = currentDateTime.get(Calendar.DAY_OF_MONTH)\r\n        val startHour = currentDateTime.get(Calendar.HOUR_OF_DAY)\r\n        val startMinute = currentDateTime.get(Calendar.MINUTE)\r\n    \r\n        DatePickerDialog(requireContext(), DatePickerDialog.OnDateSetListener { _, year, month, day -&gt;\r\n            TimePickerDialog(requireContext(), TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\r\n                val pickedDateTime = Calendar.getInstance()\r\n                pickedDateTime.set(year, month, day, hour, minute)\r\n                doSomethingWith(pickedDateTime)\r\n            }, startHour, startMinute, false).show()\r\n        }, startYear, startMonth, startDay).show()\r\n    }\r\n\r\nCall the above function in `onClickListener` of your button as following:\r\n\r\n    button.setOnClickListener { pickDateTime() }\r\n\r\nThat&#39;s it!\r\n\r\nIf you want to show clock in 12 hour or 24 hour format depending on user&#39;s settings, replace `false` with `DateFormat.is24HourFormat(requireContext())`","title":"Android Date Time picker in one dialog","body":"<h2>Kotlin</h2>\n\n<p>Here's the tested Kotlin code for combining the <code>DatePickerDialog</code> and <code>TimePickerDialog</code> together. It becomes simpler because of the support of the closures in Kotlin. The following function should be placed in your <code>Fragment</code> or <code>Activity</code>. The <code>requireContext()</code> method is a member of <code>Fragment</code>. If you are using <code>Activity</code>, use <code>applicationContext</code> instead.</p>\n\n<pre><code>private fun pickDateTime() {\n    val currentDateTime = Calendar.getInstance()\n    val startYear = currentDateTime.get(Calendar.YEAR)\n    val startMonth = currentDateTime.get(Calendar.MONTH)\n    val startDay = currentDateTime.get(Calendar.DAY_OF_MONTH)\n    val startHour = currentDateTime.get(Calendar.HOUR_OF_DAY)\n    val startMinute = currentDateTime.get(Calendar.MINUTE)\n\n    DatePickerDialog(requireContext(), DatePickerDialog.OnDateSetListener { _, year, month, day -&gt;\n        TimePickerDialog(requireContext(), TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\n            val pickedDateTime = Calendar.getInstance()\n            pickedDateTime.set(year, month, day, hour, minute)\n            doSomethingWith(pickedDateTime)\n        }, startHour, startMinute, false).show()\n    }, startYear, startMonth, startDay).show()\n}\n</code></pre>\n\n<p>Call the above function in <code>onClickListener</code> of your button as following:</p>\n\n<pre><code>button.setOnClickListener { pickDateTime() }\n</code></pre>\n\n<p>That's it!</p>\n\n<p>If you want to show clock in 12 hour or 24 hour format depending on user's settings, replace <code>false</code> with <code>DateFormat.is24HourFormat(requireContext())</code></p>\n"},{"tags":[],"owner":{"account_id":7278409,"reputation":113,"user_id":5563931,"display_name":"swdmnd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574804884,"creation_date":1574804555,"answer_id":59059771,"question_id":38604157,"body_markdown":"Based on @[Yogesh Umesh Vaity&#39;s answer][1], I made an object for showing a DateTimePicker in Kotlin.\r\n\r\n    class DateTimePicker(val context: Context, var pickTime:Boolean = false, var calendar: Calendar = Calendar.getInstance(),\r\n                         var callback: (it : DateTimePicker) -&gt; Unit) {\r\n\r\n        companion object{\r\n            @JvmStatic\r\n            fun getFormat(format : String) : String{\r\n                when(format){\r\n                    &quot;d&quot; -&gt; return &quot;dd/MM/yyyy&quot;\r\n                    &quot;t&quot; -&gt; return &quot;HH:mm&quot;\r\n                    &quot;dt&quot; -&gt; return &quot;dd/MM/yyyy HH:mm&quot;\r\n                }\r\n                return &quot;dd/MM/yyyy&quot;\r\n            }\r\n        }\r\n\r\n        fun show(){\r\n            val startYear = calendar.get(Calendar.YEAR)\r\n            val startMonth = calendar.get(Calendar.MONTH)\r\n            val startDay = calendar.get(Calendar.DAY_OF_MONTH)\r\n            val startHour = calendar.get(Calendar.HOUR_OF_DAY)\r\n            val startMinute = calendar.get(Calendar.MINUTE)\r\n\r\n            DatePickerDialog(context, DatePickerDialog.OnDateSetListener { _, year, month, day -&gt;\r\n                if(pickTime) {\r\n                    TimePickerDialog(context, TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\r\n                        calendar.set(year, month, day, hour, minute)\r\n                        callback(this)\r\n                    }, startHour, startMinute, true).show()\r\n                } else {\r\n                    calendar.set(year,month,day)\r\n                    callback(this)\r\n                }\r\n            }, startYear, startMonth, startDay).show()\r\n        }\r\n\r\n        fun showTime(){\r\n            val startYear = calendar.get(Calendar.YEAR)\r\n            val startMonth = calendar.get(Calendar.MONTH)\r\n            val startDay = calendar.get(Calendar.DAY_OF_MONTH)\r\n            val startHour = calendar.get(Calendar.HOUR_OF_DAY)\r\n            val startMinute = calendar.get(Calendar.MINUTE)\r\n\r\n            TimePickerDialog(context, TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\r\n                calendar.set(startYear, startMonth, startDay, hour, minute)\r\n                callback(this)\r\n            }, startHour, startMinute, true).show()\r\n        }\r\n    }\r\n\r\nYou could use the object from your Activity like this:\r\n\r\n    // Open Date Picker only and set an EditText\r\n    DateTimePicker(this){\r\n        val sdf = SimpleDateFormat(DateTimePicker.getFormat(&quot;d&quot;), Locale.getDefault())\r\n        editText.setText(sdf.format(it.calendar.time))\r\n    }.show()\r\n    \r\n    // Open Date Picker then Time picker and set an EditText\r\n    DateTimePicker(this, true){\r\n        val sdf = SimpleDateFormat(DateTimePicker.getFormat(&quot;dt&quot;), Locale.getDefault())\r\n        editText.setText(sdf.format(it.calendar.time))\r\n    }.show()\r\n    \r\n    // Open Time Picker only and set an EditText\r\n    DateTimePicker(this){\r\n        val sdf = SimpleDateFormat(DateTimePicker.getFormat(&quot;t&quot;), Locale.getDefault())\r\n        editText.setText(sdf.format(it.calendar.time))\r\n    }.showTime()\r\n    \r\n    // Use your own calendar object if you prefer to use your pre-configured calendar\r\n    val myCalendar = Calendar.getInstance()\r\n    myCalendar.set(Calendar.YEAR, 1995)\r\n    DateTimePicker(this, false, myCalendar){\r\n        val sdf = SimpleDateFormat(DateTimePicker.getFormat(&quot;d&quot;), Locale.getDefault())\r\n        editText.setText(sdf.format(it.calendar.time))\r\n    }.show()\r\n\r\n  [1]: https://stackoverflow.com/a/57449808/5563931","title":"Android Date Time picker in one dialog","body":"<p>Based on @<a href=\"https://stackoverflow.com/a/57449808/5563931\">Yogesh Umesh Vaity's answer</a>, I made an object for showing a DateTimePicker in Kotlin.</p>\n\n<pre><code>class DateTimePicker(val context: Context, var pickTime:Boolean = false, var calendar: Calendar = Calendar.getInstance(),\n                     var callback: (it : DateTimePicker) -&gt; Unit) {\n\n    companion object{\n        @JvmStatic\n        fun getFormat(format : String) : String{\n            when(format){\n                \"d\" -&gt; return \"dd/MM/yyyy\"\n                \"t\" -&gt; return \"HH:mm\"\n                \"dt\" -&gt; return \"dd/MM/yyyy HH:mm\"\n            }\n            return \"dd/MM/yyyy\"\n        }\n    }\n\n    fun show(){\n        val startYear = calendar.get(Calendar.YEAR)\n        val startMonth = calendar.get(Calendar.MONTH)\n        val startDay = calendar.get(Calendar.DAY_OF_MONTH)\n        val startHour = calendar.get(Calendar.HOUR_OF_DAY)\n        val startMinute = calendar.get(Calendar.MINUTE)\n\n        DatePickerDialog(context, DatePickerDialog.OnDateSetListener { _, year, month, day -&gt;\n            if(pickTime) {\n                TimePickerDialog(context, TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\n                    calendar.set(year, month, day, hour, minute)\n                    callback(this)\n                }, startHour, startMinute, true).show()\n            } else {\n                calendar.set(year,month,day)\n                callback(this)\n            }\n        }, startYear, startMonth, startDay).show()\n    }\n\n    fun showTime(){\n        val startYear = calendar.get(Calendar.YEAR)\n        val startMonth = calendar.get(Calendar.MONTH)\n        val startDay = calendar.get(Calendar.DAY_OF_MONTH)\n        val startHour = calendar.get(Calendar.HOUR_OF_DAY)\n        val startMinute = calendar.get(Calendar.MINUTE)\n\n        TimePickerDialog(context, TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\n            calendar.set(startYear, startMonth, startDay, hour, minute)\n            callback(this)\n        }, startHour, startMinute, true).show()\n    }\n}\n</code></pre>\n\n<p>You could use the object from your Activity like this:</p>\n\n<pre><code>// Open Date Picker only and set an EditText\nDateTimePicker(this){\n    val sdf = SimpleDateFormat(DateTimePicker.getFormat(\"d\"), Locale.getDefault())\n    editText.setText(sdf.format(it.calendar.time))\n}.show()\n\n// Open Date Picker then Time picker and set an EditText\nDateTimePicker(this, true){\n    val sdf = SimpleDateFormat(DateTimePicker.getFormat(\"dt\"), Locale.getDefault())\n    editText.setText(sdf.format(it.calendar.time))\n}.show()\n\n// Open Time Picker only and set an EditText\nDateTimePicker(this){\n    val sdf = SimpleDateFormat(DateTimePicker.getFormat(\"t\"), Locale.getDefault())\n    editText.setText(sdf.format(it.calendar.time))\n}.showTime()\n\n// Use your own calendar object if you prefer to use your pre-configured calendar\nval myCalendar = Calendar.getInstance()\nmyCalendar.set(Calendar.YEAR, 1995)\nDateTimePicker(this, false, myCalendar){\n    val sdf = SimpleDateFormat(DateTimePicker.getFormat(\"d\"), Locale.getDefault())\n    editText.setText(sdf.format(it.calendar.time))\n}.show()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16060483,"reputation":250,"user_id":11591491,"display_name":"Sadique Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691576549,"creation_date":1691576549,"answer_id":76866815,"question_id":38604157,"body_markdown":"Here is java version of @yogesh answer\r\n\r\n    \r\n    private void createDateTimePickerDialog() {\r\n        Calendar currentDateTime = Calendar.getInstance();\r\n        int startYear = currentDateTime.get(Calendar.YEAR);\r\n        int startMonth = currentDateTime.get(Calendar.MONTH) + 1;\r\n        int startDay = currentDateTime.get(Calendar.DAY_OF_MONTH);\r\n        int startHour = currentDateTime.get(Calendar.HOUR_OF_DAY);\r\n        int startMinute = currentDateTime.get(Calendar.MINUTE);\r\n\r\n        new DatePickerDialog(this, (datePicker, year, month, day) -&gt; new TimePickerDialog(ProjectDatesActivity.this, (timePicker, hour, minute) -&gt; {\r\n            Calendar pickedDateTime = Calendar.getInstance();\r\n            pickedDateTime.set(year, month, day, hour, minute);\r\n            String date = day + &quot;-&quot; + (month + 1) + &quot;-&quot; + year;//since month starts from 0 we need to +1\r\n            SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault());\r\n            try {\r\n                Date date_form = sdf.parse(date);\r\n                finish_date = sdf.format(Objects.requireNonNull(date_form));\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n            }\r\n            String time = hour + &quot;:&quot; + minute;\r\n            DateTimeTv.setText(date + &quot; &quot; + time);\r\n        }, startHour, startMinute, false).show(), startYear, startMonth, startDay).show();\r\n    }","title":"Android Date Time picker in one dialog","body":"<p>Here is java version of @yogesh answer</p>\n<pre><code>private void createDateTimePickerDialog() {\n    Calendar currentDateTime = Calendar.getInstance();\n    int startYear = currentDateTime.get(Calendar.YEAR);\n    int startMonth = currentDateTime.get(Calendar.MONTH) + 1;\n    int startDay = currentDateTime.get(Calendar.DAY_OF_MONTH);\n    int startHour = currentDateTime.get(Calendar.HOUR_OF_DAY);\n    int startMinute = currentDateTime.get(Calendar.MINUTE);\n\n    new DatePickerDialog(this, (datePicker, year, month, day) -&gt; new TimePickerDialog(ProjectDatesActivity.this, (timePicker, hour, minute) -&gt; {\n        Calendar pickedDateTime = Calendar.getInstance();\n        pickedDateTime.set(year, month, day, hour, minute);\n        String date = day + &quot;-&quot; + (month + 1) + &quot;-&quot; + year;//since month starts from 0 we need to +1\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault());\n        try {\n            Date date_form = sdf.parse(date);\n            finish_date = sdf.format(Objects.requireNonNull(date_form));\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        String time = hour + &quot;:&quot; + minute;\n        DateTimeTv.setText(date + &quot; &quot; + time);\n    }, startHour, startMinute, false).show(), startYear, startMonth, startDay).show();\n}\n</code></pre>\n"}],"owner":{"account_id":7989118,"reputation":692,"user_id":6027516,"accept_rate":28,"display_name":"anuradha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52812,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"answer_count":10,"score":31,"last_activity_date":1691576549,"creation_date":1469596122,"question_id":38604157,"body_markdown":"I am using material `Date` `Time` picker for my Android app. But I want to combine the `Date` and `Time` picker in one dialog.\r\n\r\nI am following [this one][1]. But I need to select the time right after the date selection.\r\n\r\nPlease suggest possible way to do this one.\r\n\r\n\r\n  [1]: https://github.com/wdullaer/MaterialDateTimePicker#implement-an-ontimesetlistenerondatesetlistener","title":"Android Date Time picker in one dialog","body":"<p>I am using material <code>Date</code> <code>Time</code> picker for my Android app. But I want to combine the <code>Date</code> and <code>Time</code> picker in one dialog.</p>\n\n<p>I am following <a href=\"https://github.com/wdullaer/MaterialDateTimePicker#implement-an-ontimesetlistenerondatesetlistener\" rel=\"noreferrer\">this one</a>. But I need to select the time right after the date selection.</p>\n\n<p>Please suggest possible way to do this one.</p>\n"},{"tags":["java","android","xml","android-layout","android-chips"],"answers":[{"tags":[],"owner":{"account_id":12953709,"reputation":6501,"user_id":9365212,"display_name":"AgentP"},"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1589694998,"creation_date":1589694998,"answer_id":61847604,"question_id":61847481,"body_markdown":"  In your main activity you are doing like this.\r\n\r\n    @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n            Chip chip = new Chip(this);\r\n            chip.setText(&quot;ABC&quot;);\r\n            chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n            chip.setCloseIconVisible(true);\r\n            chip.setTextColor(getResources().getColor(R.color.white));\r\n            chip.setTextAppearance(R.style.ChipTextAppearance);\r\n    \r\n            Chip chip2 = new Chip(this);\r\n            chip.setText(&quot;XYZ&quot;);\r\n            chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n            chip.setCloseIconVisible(true);\r\n            chip.setTextColor(getResources().getColor(R.color.white));\r\n            chip.setTextAppearance(R.style.ChipTextAppearance);\r\n    \r\n    \r\n            ChipGroup chipGroup = findViewById(R.id.chip_group_main);\r\n    \r\n            chipGroup.addView(chip);\r\n            chipGroup.addView(chip2);\r\n\r\nNotice you are creating a new instance of chip i.e chip2 but you are making changes to chip not chip2 instance in the next lines so the chip2 is not affected with any changes you made before. So in order to fix this change your code like this\r\n\r\n    @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_main);\r\n        \r\n        \r\n                Chip chip = new Chip(this);\r\n                chip.setText(&quot;ABC&quot;);\r\n                chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n                chip.setCloseIconVisible(true);\r\n                chip.setTextColor(getResources().getColor(R.color.white));\r\n                chip.setTextAppearance(R.style.ChipTextAppearance);\r\n        \r\n                Chip chip2 = new Chip(this);\r\n                chip2.setText(&quot;XYZ&quot;);  //chip2\r\n                chip2.setChipBackgroundColorResource(R.color.colorAccent);\r\n                chip2.setCloseIconVisible(true);\r\n                chip2.setTextColor(getResources().getColor(R.color.white));\r\n                chip2.setTextAppearance(R.style.ChipTextAppearance);\r\n        \r\n        \r\n                ChipGroup chipGroup = findViewById(R.id.chip_group_main);\r\n        \r\n                chipGroup.addView(chip);\r\n                chipGroup.addView(chip2);\r\n\r\n","title":"Dynamically add chips to chipgroup","body":"<p>In your main activity you are doing like this.</p>\n\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        Chip chip = new Chip(this);\n        chip.setText(\"ABC\");\n        chip.setChipBackgroundColorResource(R.color.colorAccent);\n        chip.setCloseIconVisible(true);\n        chip.setTextColor(getResources().getColor(R.color.white));\n        chip.setTextAppearance(R.style.ChipTextAppearance);\n\n        Chip chip2 = new Chip(this);\n        chip.setText(\"XYZ\");\n        chip.setChipBackgroundColorResource(R.color.colorAccent);\n        chip.setCloseIconVisible(true);\n        chip.setTextColor(getResources().getColor(R.color.white));\n        chip.setTextAppearance(R.style.ChipTextAppearance);\n\n\n        ChipGroup chipGroup = findViewById(R.id.chip_group_main);\n\n        chipGroup.addView(chip);\n        chipGroup.addView(chip2);\n</code></pre>\n\n<p>Notice you are creating a new instance of chip i.e chip2 but you are making changes to chip not chip2 instance in the next lines so the chip2 is not affected with any changes you made before. So in order to fix this change your code like this</p>\n\n<pre><code>@Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n\n\n            Chip chip = new Chip(this);\n            chip.setText(\"ABC\");\n            chip.setChipBackgroundColorResource(R.color.colorAccent);\n            chip.setCloseIconVisible(true);\n            chip.setTextColor(getResources().getColor(R.color.white));\n            chip.setTextAppearance(R.style.ChipTextAppearance);\n\n            Chip chip2 = new Chip(this);\n            chip2.setText(\"XYZ\");  //chip2\n            chip2.setChipBackgroundColorResource(R.color.colorAccent);\n            chip2.setCloseIconVisible(true);\n            chip2.setTextColor(getResources().getColor(R.color.white));\n            chip2.setTextAppearance(R.style.ChipTextAppearance);\n\n\n            ChipGroup chipGroup = findViewById(R.id.chip_group_main);\n\n            chipGroup.addView(chip);\n            chipGroup.addView(chip2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2745438,"reputation":1116,"user_id":2365964,"accept_rate":71,"display_name":"FxRi4"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1607864765,"creation_date":1607864765,"answer_id":65275934,"question_id":61847481,"body_markdown":"yeah, can add chips to group with ` chipGroup.addView(chip);` \r\nplease note that you should add id to each chip in order to some functionality of group work perfectly (e.g `singleSelection=&quot;true&quot;` )\r\n\r\n     chip.setId(ViewCompat.generateViewId());","title":"Dynamically add chips to chipgroup","body":"<p>yeah, can add chips to group with <code> chipGroup.addView(chip);</code>\nplease note that you should add id to each chip in order to some functionality of group work perfectly (e.g <code>singleSelection=&quot;true&quot;</code> )</p>\n<pre><code> chip.setId(ViewCompat.generateViewId());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1802659,"reputation":4947,"user_id":1640578,"display_name":"Yogendra"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1648368464,"creation_date":1648368464,"answer_id":71634651,"question_id":61847481,"body_markdown":"In Kotlin :\r\n\r\n\r\n    // add chip group dynamically\r\n            item.itemData.projectTags.forEach { tagName -&gt;\r\n                binding.tagChipGroup.addView(createTagChip(context, tagName))\r\n            }\r\n\r\n\r\n// created seaprate method to create chips with attributes.\r\n \r\n    private fun createTagChip(context: Context, chipName: String): Chip {\r\n        return Chip(context).apply {\r\n            text = chipName\r\n            setChipBackgroundColorResource(R.color.purple_500)\r\n            isCloseIconVisible = true\r\n            setTextColor(ContextCompat.getColor(context, R.color.white))\r\n            setTextAppearance(R.style.ChipTextAppearance)\r\n        }\r\n\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5IIhK.jpg","title":"Dynamically add chips to chipgroup","body":"<p>In Kotlin :</p>\n<pre><code>// add chip group dynamically\n        item.itemData.projectTags.forEach { tagName -&gt;\n            binding.tagChipGroup.addView(createTagChip(context, tagName))\n        }\n</code></pre>\n<p>// created seaprate method to create chips with attributes.</p>\n<pre><code>private fun createTagChip(context: Context, chipName: String): Chip {\n    return Chip(context).apply {\n        text = chipName\n        setChipBackgroundColorResource(R.color.purple_500)\n        isCloseIconVisible = true\n        setTextColor(ContextCompat.getColor(context, R.color.white))\n        setTextAppearance(R.style.ChipTextAppearance)\n    }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/5IIhK.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5IIhK.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":4964163,"reputation":1490,"user_id":3994118,"display_name":"Syed Umair"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22784,"favorite_count":0,"down_vote_count":1,"up_vote_count":21,"accepted_answer_id":61847604,"answer_count":3,"score":20,"last_activity_date":1691576244,"creation_date":1589694129,"question_id":61847481,"body_markdown":"I&#39;m trying to add several chips to the chip group dynamically. The first one appears fine but others do not appear properly. But when I do it using XML it works fine.\r\n\r\n[![The last chip added is small, grey, and has no text. It should be orange and contain text like the first three.][1]][1]\r\n\r\n\r\nactivity_main.xml\r\n\r\n```xml\r\n&lt;HorizontalScrollView\r\n            android:layout_width=&quot;350dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:scrollbars=&quot;none&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@+id/chips_select&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.0&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/textView&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.51&quot;&gt;\r\n\t&lt;com.google.android.material.chip.ChipGroup\r\n                android:id=&quot;@+id/chip_group_main&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;8dp&quot;\r\n                android:layout_marginTop=&quot;2dp&quot;\r\n                app:chipSpacingHorizontal=&quot;4dp&quot;&gt;\r\n\t\t&lt;com.google.android.material.chip.Chip\r\n                    style=&quot;@style/ChipTextAppearance&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Hello&quot;\r\n                    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\r\n                    app:closeIconEnabled=&quot;true&quot; /&gt;\r\n\t\t&lt;com.google.android.material.chip.Chip\r\n                    style=&quot;@style/ChipTextAppearance&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;World&quot;\r\n                    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\r\n                    app:closeIconEnabled=&quot;true&quot; /&gt;\r\n\t&lt;/com.google.android.material.chip.ChipGroup&gt;\r\n&lt;/HorizontalScrollView&gt;\r\n```\r\n\r\nIn MainActivity.java\r\n\r\n```java\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n  super.onCreate(savedInstanceState);\r\n  setContentView(R.layout.activity_main);\r\n\r\n  Chip chip = new Chip(this);\r\n  chip.setText(&quot;ABC&quot;);\r\n  chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n  chip.setCloseIconVisible(true);\r\n  chip.setTextColor(getResources().getColor(R.color.white));\r\n  chip.setTextAppearance(R.style.ChipTextAppearance);\r\n\r\n  Chip chip2 = new Chip(this);\r\n  chip.setText(&quot;XYZ&quot;);\r\n  chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n  chip.setCloseIconVisible(true);\r\n  chip.setTextColor(getResources().getColor(R.color.white));\r\n  chip.setTextAppearance(R.style.ChipTextAppearance);\r\n\r\n  ChipGroup chipGroup = findViewById(R.id.chip_group_main);\r\n\r\n  chipGroup.addView(chip);\r\n  chipGroup.addView(chip2);\r\n}\r\n```\r\n\r\nstyle.xml\r\n```\r\n&lt;resources&gt;\r\n\t&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\r\n\t\t&lt;!-- Customize your theme here. --&gt;\r\n\t\t&lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n\t\t&lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n\t\t&lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n\t&lt;/style&gt;\r\n\t&lt;style name=&quot;ChipTextAppearance&quot; parent=&quot;TextAppearance.MaterialComponents.Chip&quot;&gt;\r\n\t\t&lt;item name=&quot;android:textColor&quot;&gt;@android:color/white&lt;/item&gt;\r\n\t\t&lt;item name=&quot;android:textSize&quot;&gt;12sp&lt;/item&gt;\r\n\t&lt;/style&gt;\r\n&lt;/resources&gt;\r\n```\r\n\r\nstandalone_chip.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;chip\r\n\txmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\txmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\r\n    app:closeIconEnabled=&quot;true&quot;\r\n    style=&quot;@style/ChipTextAppearance&quot;\r\n    app:closeIconTint=&quot;@android:color/white&quot; /&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W0NHe.jpg","title":"Dynamically add chips to chipgroup","body":"<p>I'm trying to add several chips to the chip group dynamically. The first one appears fine but others do not appear properly. But when I do it using XML it works fine.</p>\n<p><a href=\"https://i.stack.imgur.com/W0NHe.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/W0NHe.jpg\" alt=\"The last chip added is small, grey, and has no text. It should be orange and contain text like the first three.\" /></a></p>\n<p>activity_main.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;HorizontalScrollView\n            android:layout_width=&quot;350dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:scrollbars=&quot;none&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toStartOf=&quot;@+id/chips_select&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.0&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toBottomOf=&quot;@+id/textView&quot;\n            app:layout_constraintVertical_bias=&quot;0.51&quot;&gt;\n    &lt;com.google.android.material.chip.ChipGroup\n                android:id=&quot;@+id/chip_group_main&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginStart=&quot;8dp&quot;\n                android:layout_marginTop=&quot;2dp&quot;\n                app:chipSpacingHorizontal=&quot;4dp&quot;&gt;\n        &lt;com.google.android.material.chip.Chip\n                    style=&quot;@style/ChipTextAppearance&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;Hello&quot;\n                    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\n                    app:closeIconEnabled=&quot;true&quot; /&gt;\n        &lt;com.google.android.material.chip.Chip\n                    style=&quot;@style/ChipTextAppearance&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;World&quot;\n                    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\n                    app:closeIconEnabled=&quot;true&quot; /&gt;\n    &lt;/com.google.android.material.chip.ChipGroup&gt;\n&lt;/HorizontalScrollView&gt;\n</code></pre>\n<p>In MainActivity.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n  super.onCreate(savedInstanceState);\n  setContentView(R.layout.activity_main);\n\n  Chip chip = new Chip(this);\n  chip.setText(&quot;ABC&quot;);\n  chip.setChipBackgroundColorResource(R.color.colorAccent);\n  chip.setCloseIconVisible(true);\n  chip.setTextColor(getResources().getColor(R.color.white));\n  chip.setTextAppearance(R.style.ChipTextAppearance);\n\n  Chip chip2 = new Chip(this);\n  chip.setText(&quot;XYZ&quot;);\n  chip.setChipBackgroundColorResource(R.color.colorAccent);\n  chip.setCloseIconVisible(true);\n  chip.setTextColor(getResources().getColor(R.color.white));\n  chip.setTextAppearance(R.style.ChipTextAppearance);\n\n  ChipGroup chipGroup = findViewById(R.id.chip_group_main);\n\n  chipGroup.addView(chip);\n  chipGroup.addView(chip2);\n}\n</code></pre>\n<p>style.xml</p>\n<pre><code>&lt;resources&gt;\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;ChipTextAppearance&quot; parent=&quot;TextAppearance.MaterialComponents.Chip&quot;&gt;\n        &lt;item name=&quot;android:textColor&quot;&gt;@android:color/white&lt;/item&gt;\n        &lt;item name=&quot;android:textSize&quot;&gt;12sp&lt;/item&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>standalone_chip.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;chip\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\n    app:closeIconEnabled=&quot;true&quot;\n    style=&quot;@style/ChipTextAppearance&quot;\n    app:closeIconTint=&quot;@android:color/white&quot; /&gt;\n</code></pre>\n"},{"tags":["java","microsoft-graph-api","microsoft-graph-contacts"],"owner":{"account_id":22813706,"reputation":23,"user_id":16964620,"display_name":"Fr&#233;d&#233;ric Van Overmeire"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691575692,"creation_date":1691574774,"question_id":76866561,"body_markdown":"I&#39;m trying to update a new contact with a schema extension by calling the Microsoft Graph API using the MS Graph sdk in Java.\r\nSo far, every call for this specific action returns an `UnableToDeserializePostBody` error.\r\n\r\n\r\nMy code to checks for a shema extension:\r\n\r\n```\r\nSchemaExtensionCollectionPage response = graphClient.schemaExtensions().buildRequest().get();\r\nList&lt;SchemaExtension&gt; extensions = fetchAll(response);\r\ncontactExtension = extensions.stream()\r\n    .filter(e-&gt; (contactExtensionId).equals(e.id)) //contactExtensionId fetched from internal DB\r\n    .findAny().orElse(null);\r\n\r\nif(contactExtension == null)\r\n{\r\n\tcontactExtension = new SchemaExtension();\r\n\tcontactExtension.id = contactExtensionId;\r\n\tcontactExtension.description = &quot;Contact extension&quot;;\r\n\tLinkedList&lt;String&gt; targetTypesList = new LinkedList&lt;&gt;();\r\n\ttargetTypesList.add(&quot;contact&quot;);\r\n\tcontactExtension.targetTypes = targetTypesList;\r\n\t\r\n\tLinkedList&lt;ExtensionSchemaProperty&gt; propertiesList = new LinkedList&lt;&gt;();\r\n\tExtensionSchemaProperty tenantProperty = new ExtensionSchemaProperty();\r\n\ttenantProperty.name = EXTENSION_PROPERTY_TENANT;\r\n\ttenantProperty.type = &quot;String&quot;;\r\n\tpropertiesList.add(tenantProperty);\r\n\tExtensionSchemaProperty idProperty = new ExtensionSchemaProperty();\r\n\tidProperty.name = EXTENSION_PROPERTY_ID;\r\n\tidProperty.type = &quot;String&quot;;\r\n\tpropertiesList.add(idProperty);\r\n\tcontactExtension.properties = propertiesList;\r\n\t\r\n\tcontactExtension = graphClient.schemaExtensions()\r\n\t\t\t.buildRequest()\r\n\t\t\t.post(contactExtension);\r\n\t\t\t\r\n\tlogger.info(&quot;Contact Extension created : &quot; + contactExtension.id);\r\n}\r\n```\r\n\r\nHere&#39;s the extension for the contact:\r\n\r\n```\r\npublic static class ContactExtension extends Extension\r\n{\r\n\t@SerializedName(value = &quot;tenant&quot;, alternate = {&quot;Tenant&quot;})\r\n\t@Expose\r\n\t@Nullable\r\n\tpublic String tenant;\r\n\t\r\n\t@SerializedName(value = &quot;entityId&quot;, alternate = {&quot;EntityId&quot;})\r\n\t@Expose\r\n\t@Nullable\r\n\tpublic String entityId;\r\n}\r\n```\r\n\r\nAnd here is how I try to update the contact following the [official documentation](https://learn.microsoft.com/en-us/graph/extensibility-schema-groups?tabs=java) as much as I can :\r\n\r\n```\r\nExtension ext = graphClient.users(targetUser.id)\r\n\t.contacts(contact.id)\r\n\t.extensions(this.contactExtension.id)\r\n\t.buildRequest()\r\n\t.post(contactExt);\r\n```\r\n\r\nThe stack trace i get:\r\n\r\n```\r\nJul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\r\n\tSEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\r\n\tJul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\r\n\tSEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\r\n\tError message: were unable to deserialize\r\n\r\n\tPOST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\r\n\tSdkVersion : graph-java/v5.49.0\r\n\t\t[...]\r\n\r\n\t\t400 : Bad Request\r\n[...]\r\n\r\n\t\t[Some information was truncated for brevity, enable debug logging for more details]\r\n\tJul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\r\n\tSEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\r\n\tJul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\r\n\tSEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\r\n\tError message: were unable to deserialize\r\n\r\n\tPOST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\r\n\tSdkVersion : graph-java/v5.49.0\r\n\t\t[...]\r\n\r\n\t\t400 : Bad Request\r\n[...]\r\n\r\n\t\t[Some information was truncated for brevity, enable debug logging for more details]\r\n\t\t13:53:03,442  ERROR [cerebro.manager.MsGraphHelper] Mails TES error\r\n\tcom.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\r\n\tError message: were unable to deserialize\r\n\r\n\tPOST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\r\n\tSdkVersion : graph-java/v5.49.0\r\n\t\t[...]\r\n\r\n\t\t400 : Bad Request\r\n[...]\r\n\r\n\t\t[Some information was truncated for brevity, enable debug logging for more details]\r\n\tat com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:419)\r\n\tat com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:378)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.handleErrorResponse(CoreHttpProvider.java:512)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.processResponse(CoreHttpProvider.java:442)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.sendRequestInternal(CoreHttpProvider.java:408)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:225)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:202)\r\n\tat com.microsoft.graph.http.BaseRequest.send(BaseRequest.java:335)\r\n```\r\n\r\nIs there anyone who might have a clue about what steps I should take or the source of the issue?\r\nThe official documentation regarding Java in this matter is quite limited.","title":"Miscrosoft Graph API &#39;UnableToDeserializePostBody&#39; error after sending a post request to update a contact","body":"<p>I'm trying to update a new contact with a schema extension by calling the Microsoft Graph API using the MS Graph sdk in Java.\nSo far, every call for this specific action returns an <code>UnableToDeserializePostBody</code> error.</p>\n<p>My code to checks for a shema extension:</p>\n<pre><code>SchemaExtensionCollectionPage response = graphClient.schemaExtensions().buildRequest().get();\nList&lt;SchemaExtension&gt; extensions = fetchAll(response);\ncontactExtension = extensions.stream()\n    .filter(e-&gt; (contactExtensionId).equals(e.id)) //contactExtensionId fetched from internal DB\n    .findAny().orElse(null);\n\nif(contactExtension == null)\n{\n    contactExtension = new SchemaExtension();\n    contactExtension.id = contactExtensionId;\n    contactExtension.description = &quot;Contact extension&quot;;\n    LinkedList&lt;String&gt; targetTypesList = new LinkedList&lt;&gt;();\n    targetTypesList.add(&quot;contact&quot;);\n    contactExtension.targetTypes = targetTypesList;\n    \n    LinkedList&lt;ExtensionSchemaProperty&gt; propertiesList = new LinkedList&lt;&gt;();\n    ExtensionSchemaProperty tenantProperty = new ExtensionSchemaProperty();\n    tenantProperty.name = EXTENSION_PROPERTY_TENANT;\n    tenantProperty.type = &quot;String&quot;;\n    propertiesList.add(tenantProperty);\n    ExtensionSchemaProperty idProperty = new ExtensionSchemaProperty();\n    idProperty.name = EXTENSION_PROPERTY_ID;\n    idProperty.type = &quot;String&quot;;\n    propertiesList.add(idProperty);\n    contactExtension.properties = propertiesList;\n    \n    contactExtension = graphClient.schemaExtensions()\n            .buildRequest()\n            .post(contactExtension);\n            \n    logger.info(&quot;Contact Extension created : &quot; + contactExtension.id);\n}\n</code></pre>\n<p>Here's the extension for the contact:</p>\n<pre><code>public static class ContactExtension extends Extension\n{\n    @SerializedName(value = &quot;tenant&quot;, alternate = {&quot;Tenant&quot;})\n    @Expose\n    @Nullable\n    public String tenant;\n    \n    @SerializedName(value = &quot;entityId&quot;, alternate = {&quot;EntityId&quot;})\n    @Expose\n    @Nullable\n    public String entityId;\n}\n</code></pre>\n<p>And here is how I try to update the contact following the <a href=\"https://learn.microsoft.com/en-us/graph/extensibility-schema-groups?tabs=java\" rel=\"nofollow noreferrer\">official documentation</a> as much as I can :</p>\n<pre><code>Extension ext = graphClient.users(targetUser.id)\n    .contacts(contact.id)\n    .extensions(this.contactExtension.id)\n    .buildRequest()\n    .post(contactExt);\n</code></pre>\n<p>The stack trace i get:</p>\n<pre><code>Jul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\n    SEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\n    Jul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\n    SEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\n    Error message: were unable to deserialize\n\n    POST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\n    SdkVersion : graph-java/v5.49.0\n        [...]\n\n        400 : Bad Request\n[...]\n\n        [Some information was truncated for brevity, enable debug logging for more details]\n    Jul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\n    SEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\n    Jul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\n    SEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\n    Error message: were unable to deserialize\n\n    POST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\n    SdkVersion : graph-java/v5.49.0\n        [...]\n\n        400 : Bad Request\n[...]\n\n        [Some information was truncated for brevity, enable debug logging for more details]\n        13:53:03,442  ERROR [cerebro.manager.MsGraphHelper] Mails TES error\n    com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\n    Error message: were unable to deserialize\n\n    POST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\n    SdkVersion : graph-java/v5.49.0\n        [...]\n\n        400 : Bad Request\n[...]\n\n        [Some information was truncated for brevity, enable debug logging for more details]\n    at com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:419)\n    at com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:378)\n    at com.microsoft.graph.http.CoreHttpProvider.handleErrorResponse(CoreHttpProvider.java:512)\n    at com.microsoft.graph.http.CoreHttpProvider.processResponse(CoreHttpProvider.java:442)\n    at com.microsoft.graph.http.CoreHttpProvider.sendRequestInternal(CoreHttpProvider.java:408)\n    at com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:225)\n    at com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:202)\n    at com.microsoft.graph.http.BaseRequest.send(BaseRequest.java:335)\n</code></pre>\n<p>Is there anyone who might have a clue about what steps I should take or the source of the issue?\nThe official documentation regarding Java in this matter is quite limited.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1691146647,"post_id":76835273,"comment_id":135455640,"body_markdown":"The last will result in a `List&lt;Object&gt;` being returned by `createList`, not a `List&lt;Integer&gt;`, because `? super String` accepts a `List&lt;String&gt;` or a `List&lt;Object&gt;`, so the compiler will infer `T` of `createList` as `Object`, not `Integer`.","body":"The last will result in a <code>List&lt;Object&gt;</code> being returned by <code>createList</code>, not a <code>List&lt;Integer&gt;</code>, because <code>? super String</code> accepts a <code>List&lt;String&gt;</code> or a <code>List&lt;Object&gt;</code>, so the compiler will infer <code>T</code> of <code>createList</code> as <code>Object</code>, not <code>Integer</code>."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691148407,"post_id":76835273,"comment_id":135455953,"body_markdown":"I think you’ll find that if `consumeList` were changed to actually consume the list, _that_ would fail to compile, preventing any runtime error.","body":"I think you’ll find that if <code>consumeList</code> were changed to actually consume the list, <i>that</i> would fail to compile, preventing any runtime error."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691148589,"post_id":76835273,"comment_id":135455986,"body_markdown":"To consume the list and treat the elements as strings, it would need to take a parameter of type `List&lt;? extends String&gt;`. See https://stackoverflow.com/a/2723538/29470","body":"To consume the list and treat the elements as strings, it would need to take a parameter of type <code>List&lt;? extends String&gt;</code>. See <a href=\"https://stackoverflow.com/a/2723538/29470\">stackoverflow.com/a/2723538/29470</a>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1691151237,"post_id":76835273,"comment_id":135456498,"body_markdown":"@TimMoore what&#39;s stopping you consuming the list elements as `Object`s?","body":"@TimMoore what&#39;s stopping you consuming the list elements as <code>Object</code>s?"},{"owner":{"account_id":29159153,"reputation":21,"user_id":22338268,"display_name":"Bernd Watermann"},"score":0,"creation_date":1691151338,"post_id":76835273,"comment_id":135456517,"body_markdown":"This was a minimalistic example. I stumbled across the issue when irregularly doing something like `assertThat().contentType(is(JSON))` in the context of RestAssured-based tests. Thus changing the implementation is not an option. Sure, I _can_ change the calling code so it works as intended (`assertThat().contentType(JSON)`), but only _after_ having studied subtle runtime errors. If the language really permits inferring `T` in `createList` from anything else than the call argument `T value`, that would be scary, to say the least. And the given example exactly shows why.","body":"This was a minimalistic example. I stumbled across the issue when irregularly doing something like <code>assertThat().contentType(is(JSON))</code> in the context of RestAssured-based tests. Thus changing the implementation is not an option. Sure, I <i>can</i> change the calling code so it works as intended (<code>assertThat().contentType(JSON)</code>), but only <i>after</i> having studied subtle runtime errors. If the language really permits inferring <code>T</code> in <code>createList</code> from anything else than the call argument <code>T value</code>, that would be scary, to say the least. And the given example exactly shows why."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691151525,"post_id":76835273,"comment_id":135456550,"body_markdown":"@AndyTurner nothing, but there’s no reason to declare the parameter that way instead of `List&lt;?&gt;` then. In any case, there’s still no runtime error.","body":"@AndyTurner nothing, but there’s no reason to declare the parameter that way instead of <code>List&lt;?&gt;</code> then. In any case, there’s still no runtime error."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1691153315,"post_id":76835273,"comment_id":135456924,"body_markdown":"@BerndWatermann I&#39;m afraid I&#39;m not very familiar with RestAssured, so I don&#39;t understand what the problem is with the code in your latest comment. I&#39;m guessing that the error wasn&#39;t a `ClastCastException` but something else (maybe equality comparison of two different types?). The Java compiler is still inferring `T` from the argument, it&#39;s just choosing a less specific type than what you intended. The argument is both an `Integer` and an `Object`. The compiler will always try to infer a type that works before failing.","body":"@BerndWatermann I&#39;m afraid I&#39;m not very familiar with RestAssured, so I don&#39;t understand what the problem is with the code in your latest comment. I&#39;m guessing that the error wasn&#39;t a <code>ClastCastException</code> but something else (maybe equality comparison of two different types?). The Java compiler is still inferring <code>T</code> from the argument, it&#39;s just choosing a less specific type than what you intended. The argument is both an <code>Integer</code> and an <code>Object</code>. The compiler will always try to infer a type that works before failing."}],"answers":[{"tags":[],"owner":{"account_id":29159153,"reputation":21,"user_id":22338268,"display_name":"Bernd Watermann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691575592,"creation_date":1691575592,"answer_id":76866685,"question_id":76835273,"body_markdown":"Answer\r\n------\r\nThe Java compiler infers the actual type for `createList`&#39;s type parameter `T` not only by inspecting the actual call argument for `T value` but also considers the context in which the return value `List&lt;T&gt;` is used (that is, within the same `;`-terminated statement). This permits inferring `Object` instead of `Integer` in the given example&#39;s last line and makes the code compile (Credits go to Tim Moore for his comment.) The effect is not specific to the `createList` example and can be shown by directly using e.g. `Collections.singletonList()` as well.\r\n\r\nConclusions\r\n-----------\r\nThe given minimalistic example as well as similar but more realistic cases reveal a weakness in the type inference rules. Although something different happens _technically_, it _virtually_ appears as if a `SomeGenericClass&lt;Integer&gt;` can sometimes implicitly be converted into a `SomeGenericClass&lt;Object&gt;` which should not and does not happen when the same code is written in a slightly different way. Those differences would retain the exact code semantics in &quot;usual&quot; code and can be established e.g. by common refactorings such as &quot;Introduce variable&quot; or &quot;Inline variable&quot;. OTOH, the same rules for type inference have benefits, too. Common expressions like `java.util.stream.Collectors.toList()` wouldn&#39;t work the way they do at present if inferring type arguments from the surrounding context were not permitted.\r\n\r\nAnd my personal two cents: Maybe I&#39;ve done too much C++ in my life, but to me it still seems that the benefits of Java&#39;s type inference rules come at a rather high price. Some sorts of type safety that Java generics try to provide in order to reveal issues at compile time seem to just vanish when you rewrite code that (virtually) has the same semantics as before.\r\n","title":"Why does a function call compile when an invalid generic-typed parameter is inlined?","body":"<h2>Answer</h2>\n<p>The Java compiler infers the actual type for <code>createList</code>'s type parameter <code>T</code> not only by inspecting the actual call argument for <code>T value</code> but also considers the context in which the return value <code>List&lt;T&gt;</code> is used (that is, within the same <code>;</code>-terminated statement). This permits inferring <code>Object</code> instead of <code>Integer</code> in the given example's last line and makes the code compile (Credits go to Tim Moore for his comment.) The effect is not specific to the <code>createList</code> example and can be shown by directly using e.g. <code>Collections.singletonList()</code> as well.</p>\n<h2>Conclusions</h2>\n<p>The given minimalistic example as well as similar but more realistic cases reveal a weakness in the type inference rules. Although something different happens <em>technically</em>, it <em>virtually</em> appears as if a <code>SomeGenericClass&lt;Integer&gt;</code> can sometimes implicitly be converted into a <code>SomeGenericClass&lt;Object&gt;</code> which should not and does not happen when the same code is written in a slightly different way. Those differences would retain the exact code semantics in &quot;usual&quot; code and can be established e.g. by common refactorings such as &quot;Introduce variable&quot; or &quot;Inline variable&quot;. OTOH, the same rules for type inference have benefits, too. Common expressions like <code>java.util.stream.Collectors.toList()</code> wouldn't work the way they do at present if inferring type arguments from the surrounding context were not permitted.</p>\n<p>And my personal two cents: Maybe I've done too much C++ in my life, but to me it still seems that the benefits of Java's type inference rules come at a rather high price. Some sorts of type safety that Java generics try to provide in order to reveal issues at compile time seem to just vanish when you rewrite code that (virtually) has the same semantics as before.</p>\n"}],"owner":{"account_id":29159153,"reputation":21,"user_id":22338268,"display_name":"Bernd Watermann"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691575592,"creation_date":1691146550,"question_id":76835273,"body_markdown":"When one function creates a generic result such as `List&lt;Integer&gt;`, code with a call to another function which accepts a similar but non-matching generic type such as `List&lt;? super String&gt;` will unexpectedly compile successfully when the result from the first function is passed inline.\r\n\r\nConsider the following code:\r\n\r\n\r\n```\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\nclass ListTest\r\n{\r\n    static void consumeList(List&lt;? super String&gt; lst) {};\r\n\r\n    static &lt;T&gt; List&lt;T&gt; createList(T value) {\r\n        return Collections.singletonList(value);\r\n    }\r\n\r\n    void doIt() {\r\n        List&lt;Integer&gt; ilst = createList(1);\r\n        consumeList(ilst); // Does not compile. As expected. (&quot;incompatible types: List&lt;Integer&gt; cannot be converted to List&lt;? super String&gt;&quot;)\r\n\r\n        var ilst2 = createList(1);\r\n        consumeList(ilst2); // Does not compile. As expected. (&quot;incompatible types: List&lt;Integer&gt; cannot be converted to List&lt;? super String&gt;&quot;)\r\n\r\n        consumeList(createList(1)); // Compiles. Why???\r\n    }\r\n}\r\n```\r\n\r\nThe question is: Why does the last line compile? The compile error that is yielded by the other calls to &quot;consumeList()&quot; appears absolutely precise and successfully prevents me from a runtime disaster. Why does the compiler fail to provide the same level of protection with the last call?\r\n\r\nCompiler was javac 17.0.7.","title":"Why does a function call compile when an invalid generic-typed parameter is inlined?","body":"<p>When one function creates a generic result such as <code>List&lt;Integer&gt;</code>, code with a call to another function which accepts a similar but non-matching generic type such as <code>List&lt;? super String&gt;</code> will unexpectedly compile successfully when the result from the first function is passed inline.</p>\n<p>Consider the following code:</p>\n<pre><code>import java.util.Collections;\nimport java.util.List;\n\nclass ListTest\n{\n    static void consumeList(List&lt;? super String&gt; lst) {};\n\n    static &lt;T&gt; List&lt;T&gt; createList(T value) {\n        return Collections.singletonList(value);\n    }\n\n    void doIt() {\n        List&lt;Integer&gt; ilst = createList(1);\n        consumeList(ilst); // Does not compile. As expected. (&quot;incompatible types: List&lt;Integer&gt; cannot be converted to List&lt;? super String&gt;&quot;)\n\n        var ilst2 = createList(1);\n        consumeList(ilst2); // Does not compile. As expected. (&quot;incompatible types: List&lt;Integer&gt; cannot be converted to List&lt;? super String&gt;&quot;)\n\n        consumeList(createList(1)); // Compiles. Why???\n    }\n}\n</code></pre>\n<p>The question is: Why does the last line compile? The compile error that is yielded by the other calls to &quot;consumeList()&quot; appears absolutely precise and successfully prevents me from a runtime disaster. Why does the compiler fail to provide the same level of protection with the last call?</p>\n<p>Compiler was javac 17.0.7.</p>\n"},{"tags":["java","eclipse","osgi","p2"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1691593262,"post_id":76866680,"comment_id":135513155,"body_markdown":"Have you tried it on the current release? Yours is 3 years old.","body":"Have you tried it on the current release? Yours is 3 years old."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1691593266,"post_id":76866680,"comment_id":135513156,"body_markdown":"As workaround for the problem that there are different plugins/bundles with the same symbolic name and same version, you can specify in your target platform from which p2 repository the plugin/bundle should be downloaded. Please show the content of your target platform definition file.","body":"As workaround for the problem that there are different plugins/bundles with the same symbolic name and same version, you can specify in your target platform from which p2 repository the plugin/bundle should be downloaded. Please show the content of your target platform definition file."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692019272,"post_id":76866680,"comment_id":135565087,"body_markdown":"@howlger unfortunately because of the proprietary license I can not share the complete target platform definition. Can you please tell me which part of which file you want to know the content of? Then I can hopefully give that information here.","body":"@howlger unfortunately because of the proprietary license I can not share the complete target platform definition. Can you please tell me which part of which file you want to know the content of? Then I can hopefully give that information here."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692020694,"post_id":76866680,"comment_id":135565442,"body_markdown":"You have to find out which p2 repositories provide this plugin. Be aware that there also [composite repositories](https://wiki.eclipse.org/Equinox/p2/Composite_Repositories_%28new%29). The [_Repository Explorer_ view](https://wiki.eclipse.org/Oomph_Repository_Explorer) which is included in the [Oomph Targlets](https://wiki.eclipse.org/Oomph_Targlets) might be helpful for that.","body":"You have to find out which p2 repositories provide this plugin. Be aware that there also <a href=\"https://wiki.eclipse.org/Equinox/p2/Composite_Repositories_%28new%29\" rel=\"nofollow noreferrer\">composite repositories</a>. The <a href=\"https://wiki.eclipse.org/Oomph_Repository_Explorer\" rel=\"nofollow noreferrer\"><i>Repository Explorer</i> view</a> which is included in the <a href=\"https://wiki.eclipse.org/Oomph_Targlets\" rel=\"nofollow noreferrer\">Oomph Targlets</a> might be helpful for that."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692086482,"post_id":76866680,"comment_id":135573783,"body_markdown":"@howlger I have found no duplicates using the Repository Explorer. I use only one repository and it is not composite afaik. For e.g. org.quartz I can find only one unit and it looks like the correct version (declaring dependency on org.apache.logging.log4j and not org.apache.log4j. Full unit of org.quartz; https://pastebin.com/mPzzjgb5\nI wonder if it is just a bug in my old eclipse version or maybe it really is just an issue with local caching","body":"@howlger I have found no duplicates using the Repository Explorer. I use only one repository and it is not composite afaik. For e.g. org.quartz I can find only one unit and it looks like the correct version (declaring dependency on org.apache.logging.log4j and not org.apache.log4j. Full unit of org.quartz; <a href=\"https://pastebin.com/mPzzjgb5\" rel=\"nofollow noreferrer\">pastebin.com/mPzzjgb5</a> I wonder if it is just a bug in my old eclipse version or maybe it really is just an issue with local caching"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692088729,"post_id":76866680,"comment_id":135574150,"body_markdown":"To avoid caching in Maven/Tycho build do the following. Also delete `/.m2/repository/.cache/tycho`. And if this does not help, use a fresh local Maven repository via `-Dmaven.repo.local=...`.","body":"To avoid caching in Maven/Tycho build do the following. Also delete <code>&#47;.m2&#47;repository&#47;.cache&#47;tycho</code>. And if this does not help, use a fresh local Maven repository via <code>-Dmaven.repo.local=...</code>."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692094056,"post_id":76866680,"comment_id":135575059,"body_markdown":"weirdly I never had the problem with maven/tycho. Only when developing in eclipse and adding the target platform there. If I add a target platform and the issue happens, I can see that the wrong jar file lands in .metadata\\.plugins\\org.eclipse.pde.core\\.bundle_pool\\plugins:\nI will try deleting the tycho cache next time. Are there any other folders I should pay attention to or are they all basically in ~/.m2 and ~/.p2 &#223;","body":"weirdly I never had the problem with maven/tycho. Only when developing in eclipse and adding the target platform there. If I add a target platform and the issue happens, I can see that the wrong jar file lands in .metadata\\.plugins\\org.eclipse.pde.core\\.bundle_pool\\plugins&zwnj;&#8203;: I will try deleting the tycho cache next time. Are there any other folders I should pay attention to or are they all basically in ~/.m2 and ~/.p2 &#223;"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692099330,"post_id":76866680,"comment_id":135575994,"body_markdown":"As Maven plugin Tycho uses only `~/.m2`, not `~/.p2`. Where you have this problem, when building with Maven/Tycho or in your Eclipse IDE or in both?","body":"As Maven plugin Tycho uses only <code>~&#47;.m2</code>, not <code>~&#47;.p2</code>. Where you have this problem, when building with Maven/Tycho or in your Eclipse IDE or in both?"},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692695200,"post_id":76866680,"comment_id":135655600,"body_markdown":"I only have the problem in eclipse.","body":"I only have the problem in eclipse."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692702148,"post_id":76866680,"comment_id":135657076,"body_markdown":"I see. Does this problem persist when using a fresh workspace? Can the faulty plugin also be found somewhere in your Eclipse installation directory (or, if you used the Eclipse Installer, in your user home directory `.p2\\pool\\plugins`)?","body":"I see. Does this problem persist when using a fresh workspace? Can the faulty plugin also be found somewhere in your Eclipse installation directory (or, if you used the Eclipse Installer, in your user home directory <code>.p2\\pool\\plugins</code>)?"},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692769957,"post_id":76866680,"comment_id":135667758,"body_markdown":"A fresh workspace using the same target platform yields the same issue.  I couldn&#39;t find anything in my eclipse installation directory.\nIt is worth noting that the target platform is not some form of eclipse IDE, but an eclipse rcp/rap target platform. I don&#39;t know if that matters though","body":"A fresh workspace using the same target platform yields the same issue.  I couldn&#39;t find anything in my eclipse installation directory. It is worth noting that the target platform is not some form of eclipse IDE, but an eclipse rcp/rap target platform. I don&#39;t know if that matters though"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692772279,"post_id":76866680,"comment_id":135668115,"body_markdown":"Please check whether the plugin is part of your Eclipse IDE or not: _Help &gt; About Eclipse IDE: Installation Details_, tab _Plug-ins_ and filter for `quartz`.","body":"Please check whether the plugin is part of your Eclipse IDE or not: <i>Help &gt; About Eclipse IDE: Installation Details</i>, tab <i>Plug-ins</i> and filter for <code>quartz</code>."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692772428,"post_id":76866680,"comment_id":135668147,"body_markdown":"It is not part of my Eclipse IDE","body":"It is not part of my Eclipse IDE"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692773397,"post_id":76866680,"comment_id":135668319,"body_markdown":"Okay, but it has to come from somewhere. And from what you say, it doesn&#39;t occur with Maven/Tycho, which also uses the same target platform, right? It also happens with a fresh workspace and is not part of your Eclipse installation. I have no idea where else it could come from.","body":"Okay, but it has to come from somewhere. And from what you say, it doesn&#39;t occur with Maven/Tycho, which also uses the same target platform, right? It also happens with a fresh workspace and is not part of your Eclipse installation. I have no idea where else it could come from."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692890265,"post_id":76866680,"comment_id":135688289,"body_markdown":"I have no clue where the issue comes from sadly. Thank you anyway for your help","body":"I have no clue where the issue comes from sadly. Thank you anyway for your help"}],"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691575577,"creation_date":1691575577,"question_id":76866680,"body_markdown":"I am on Windows using eclipse rcp 2020-06 and I have different versions of Target Platforms that I get from a Software Vendor. Sometimes I get an error in eclipse because it seems that the Vendor sometimes has jars with the same name but different contents.\r\n\r\nE.g. they have org.quartz_2.1.7.jar but one is 200 KiB and one is 400 KiB.\r\nThe target platform I loaded has the 400 KiB one but for some reason the 200 KiB is the one that lands in my .bundle_pool when I add the target platform to eclipse.\r\nThis leads to an error when starting because one of the plugins has RequireBundle: org.apache.log4j and the other has org.apache.logging.log4j\r\n\r\nThis is just an example though. I know that if the Vendor would rename the files if they changed it would probably work but they don&#39;t seem to do this.\r\n\r\n\r\nCould the behavior maybe have something to do with me usually using the Copy Settings (Preferences + Workbench Layout) from File &gt; Switch Workspace &gt; Other... when I create a new Workspace?\r\n\r\nIs there any way I can force eclipse to take the plugin that is actually in the target platform I select? I tried deleting ~/.m2/repository/p2 and ~/.p2 but the problem persists. \r\n","title":"Eclipse Target Platform loading different Jar","body":"<p>I am on Windows using eclipse rcp 2020-06 and I have different versions of Target Platforms that I get from a Software Vendor. Sometimes I get an error in eclipse because it seems that the Vendor sometimes has jars with the same name but different contents.</p>\n<p>E.g. they have org.quartz_2.1.7.jar but one is 200 KiB and one is 400 KiB.\nThe target platform I loaded has the 400 KiB one but for some reason the 200 KiB is the one that lands in my .bundle_pool when I add the target platform to eclipse.\nThis leads to an error when starting because one of the plugins has RequireBundle: org.apache.log4j and the other has org.apache.logging.log4j</p>\n<p>This is just an example though. I know that if the Vendor would rename the files if they changed it would probably work but they don't seem to do this.</p>\n<p>Could the behavior maybe have something to do with me usually using the Copy Settings (Preferences + Workbench Layout) from File &gt; Switch Workspace &gt; Other... when I create a new Workspace?</p>\n<p>Is there any way I can force eclipse to take the plugin that is actually in the target platform I select? I tried deleting ~/.m2/repository/p2 and ~/.p2 but the problem persists.</p>\n"},{"tags":["java","kotlin","primitive-types"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1524058022,"post_id":49900920,"comment_id":86817287,"body_markdown":"What&#39;s the point of validating that a non-nullable property is not null? OTOH if your `Comment` is going to be instantiated with data where `postId` _may_ be null, then you have no choice but using a nullable type to represent this.","body":"What&#39;s the point of validating that a non-nullable property is not null? OTOH if your <code>Comment</code> is going to be instantiated with data where <code>postId</code> <i>may</i> be null, then you have no choice but using a nullable type to represent this."},{"owner":{"account_id":3942923,"reputation":8945,"user_id":3256597,"accept_rate":16,"display_name":"Teimuraz"},"score":0,"creation_date":1524058165,"post_id":49900920,"comment_id":86817390,"body_markdown":"When you send json request without postId, the class is constructed successfully and 0 is used as a value of postId automatically. But the construction of this class should fail, because postId is not provided actually.","body":"When you send json request without postId, the class is constructed successfully and 0 is used as a value of postId automatically. But the construction of this class should fail, because postId is not provided actually."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1524058261,"post_id":49900920,"comment_id":86817461,"body_markdown":"Yes, so in reality `postId` is a property that _may_ be null. You have to represent this in the static type. Maybe you can have a raw data class that represents the JSON input and another one that represents it after it has passed validation.","body":"Yes, so in reality <code>postId</code> is a property that <i>may</i> be null. You have to represent this in the static type. Maybe you can have a raw data class that represents the JSON input and another one that represents it after it has passed validation."},{"owner":{"account_id":1187233,"reputation":2871,"user_id":1160959,"display_name":"asm0dey"},"score":1,"creation_date":1524061488,"post_id":49900920,"comment_id":86819842,"body_markdown":"what about using `java.lang.Long`?","body":"what about using <code>java.lang.Long</code>?"},{"owner":{"account_id":2030,"reputation":50607,"user_id":2788,"accept_rate":69,"display_name":"Strelok"},"score":0,"creation_date":1524063656,"post_id":49900920,"comment_id":86821542,"body_markdown":"@Teimuraz I’d say this maybe a bug with the Kotlin Jackson module. The module should be able to fail constructing this object (but your validation will never even be triggered mind you, because you’re using a non nullable type).","body":"@Teimuraz I’d say this maybe a bug with the Kotlin Jackson module. The module should be able to fail constructing this object (but your validation will never even be triggered mind you, because you’re using a non nullable type)."},{"owner":{"account_id":3942923,"reputation":8945,"user_id":3256597,"accept_rate":16,"display_name":"Teimuraz"},"score":0,"creation_date":1524067324,"post_id":49900920,"comment_id":86824143,"body_markdown":"@asm0dey I thought about it, but feels hacky, don&#39;t want to mix it in my kotlin code","body":"@asm0dey I thought about it, but feels hacky, don&#39;t want to mix it in my kotlin code"},{"owner":{"account_id":1187233,"reputation":2871,"user_id":1160959,"display_name":"asm0dey"},"score":0,"creation_date":1524068053,"post_id":49900920,"comment_id":86824617,"body_markdown":"@Teimuraz well you can&#39;t pretend that nullable type is not nullable and vise versa. But inability to create primitive long looks as unexpected behaviour for me. Meanwhile sometimes you need java.lang things, ie for syncronization","body":"@Teimuraz well you can&#39;t pretend that nullable type is not nullable and vise versa. But inability to create primitive long looks as unexpected behaviour for me. Meanwhile sometimes you need java.lang things, ie for syncronization"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1524141931,"post_id":49900920,"comment_id":86858441,"body_markdown":"Synchronizing on a `java.lang.Long` would be very bad practice, though, even if in a `final` field. It&#39;s a dark corner of early Java design that you can synchronize on any object.","body":"Synchronizing on a <code>java.lang.Long</code> would be very bad practice, though, even if in a <code>final</code> field. It&#39;s a dark corner of early Java design that you can synchronize on any object."}],"answers":[{"tags":[],"owner":{"account_id":18692173,"reputation":1,"user_id":13626270,"display_name":"Gabriel Oliveira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672929314,"creation_date":1672929314,"answer_id":75020064,"question_id":49900920,"body_markdown":"There is a way to avoid that. You need to configure the parser, in this case Jackson, to not have default values to primitives types. As in this post here https://stackoverflow.com/questions/73123790/jackson-deserialization-of-missing-json-number-value-to-0-0-in-spring\r\n\r\n    @Configuration\r\n    class JacksonConfig {\r\n        @Bean\r\n        fun objectMapper(): ObjectMapper {\r\n            return jacksonObjectMapper()\r\n                .configure(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES, true)\r\n        }\r\n    }  \r\n\r\nor\r\n\r\n     spring:\r\n      jackson:\r\n        deserialization:\r\n          FAIL_ON_NULL_FOR_PRIMITIVES: true\r\n\r\n","title":"Kotlin: Can I force Not Nullable Long to be represented as non primitive type in JVM?","body":"<p>There is a way to avoid that. You need to configure the parser, in this case Jackson, to not have default values to primitives types. As in this post here <a href=\"https://stackoverflow.com/questions/73123790/jackson-deserialization-of-missing-json-number-value-to-0-0-in-spring\">Jackson deserialization of missing JSON number value to 0.0 in Spring</a></p>\n<pre><code>@Configuration\nclass JacksonConfig {\n    @Bean\n    fun objectMapper(): ObjectMapper {\n        return jacksonObjectMapper()\n            .configure(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES, true)\n    }\n}  \n</code></pre>\n<p>or</p>\n<pre><code> spring:\n  jackson:\n    deserialization:\n      FAIL_ON_NULL_FOR_PRIMITIVES: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26117858,"reputation":33,"user_id":19810670,"display_name":"Antony"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691575324,"creation_date":1691575324,"answer_id":76866639,"question_id":49900920,"body_markdown":"Have the same issue, and IDEA offer that solution, to create Long as type object\r\nUse declaration like:\r\n\r\n`var postId by Delegates.notNull&lt;Long&gt;()`","title":"Kotlin: Can I force Not Nullable Long to be represented as non primitive type in JVM?","body":"<p>Have the same issue, and IDEA offer that solution, to create Long as type object\nUse declaration like:</p>\n<p><code>var postId by Delegates.notNull&lt;Long&gt;()</code></p>\n"}],"owner":{"account_id":3942923,"reputation":8945,"user_id":3256597,"accept_rate":16,"display_name":"Teimuraz"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1178,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691575324,"creation_date":1524057890,"question_id":49900920,"body_markdown":"From kotlin docs:\r\n\r\n\r\n&gt; Long ... Represents a 64-bit signed integer. On the JVM, non-nullable values of\r\n&gt; this type are represented as values of the primitive type long.\r\n\r\nBut it causes issue in my spring boot application when send json request without `postId` in the body and when I need to apply jsr 303 validation to my kotlin class, like this:\r\n\r\n    data class Comment(\r\n       @field:NotNull\r\n       val postId: Long,\r\n       ...\r\n    )\r\n\r\nSo issue is that Comment class is constructed with postId = 0 automatically and validation is not failing.\r\n\r\nIs there a way to force kotlin&#39;s Long type to be represented as non primitive type in JVM? (may be with help of annotations or compiler arguments, etc)?\r\n\r\nP.S.: I can force it by making postId of type Long?, but I don&#39;t like it (First of all, it should not be nullable, second, then I need to use `comment.postId!!`, which is ugly and it brakes advantage of kotlin&#39;s null safety).","title":"Kotlin: Can I force Not Nullable Long to be represented as non primitive type in JVM?","body":"<p>From kotlin docs:</p>\n\n<blockquote>\n  <p>Long ... Represents a 64-bit signed integer. On the JVM, non-nullable values of\n  this type are represented as values of the primitive type long.</p>\n</blockquote>\n\n<p>But it causes issue in my spring boot application when send json request without <code>postId</code> in the body and when I need to apply jsr 303 validation to my kotlin class, like this:</p>\n\n<pre><code>data class Comment(\n   @field:NotNull\n   val postId: Long,\n   ...\n)\n</code></pre>\n\n<p>So issue is that Comment class is constructed with postId = 0 automatically and validation is not failing.</p>\n\n<p>Is there a way to force kotlin's Long type to be represented as non primitive type in JVM? (may be with help of annotations or compiler arguments, etc)?</p>\n\n<p>P.S.: I can force it by making postId of type Long?, but I don't like it (First of all, it should not be nullable, second, then I need to use <code>comment.postId!!</code>, which is ugly and it brakes advantage of kotlin's null safety).</p>\n"},{"tags":["java","spring","cookies","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":24546611,"reputation":174,"user_id":18456370,"display_name":"Yanni2"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690972569,"creation_date":1690972569,"answer_id":76819010,"question_id":76775831,"body_markdown":"I think you&#39;re talking about [this](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#restrict_access_to_cookies). These values are thought to protect the cookie when it gets stored in the browser. For example, does the `httpOnly` property define that the cookie cannot be accessed by JavaScript in the frontend?.\r\n\r\nYou can set these values easily in an HTTP response with the `Set-Cookie` header.\r\n\r\n**For Example:**\r\n\r\n```\r\nSet-Cookie: id=a3fWa; Expires=Thu, 21 Oct 2021 07:28:00 GMT; Secure; HttpOnly\r\n```\r\n\r\nBut you are sending a request. In that case can&#39;t you set one of these headers. It also won&#39;t make any sense. Why?\r\n&lt;br/&gt;\r\nAll these properties are thought to protect the cookie **while it&#39;s stored in the browser**. For example, does the `httpOnly` property protect the cookie from `XSS` attacks. The `secure` property should protect the cookie from getting sent through unsecure channels. Your browser will automatically send all available cookies during any request → it will also send them in an HTTP request (It won&#39;t send it over the http channel if you have set the `secure` property). \r\n\r\n","title":"Java Set Security cookie using RestTemplate with Domain and as Secure","body":"<p>I think you're talking about <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#restrict_access_to_cookies\" rel=\"nofollow noreferrer\">this</a>. These values are thought to protect the cookie when it gets stored in the browser. For example, does the <code>httpOnly</code> property define that the cookie cannot be accessed by JavaScript in the frontend?.</p>\n<p>You can set these values easily in an HTTP response with the <code>Set-Cookie</code> header.</p>\n<p><strong>For Example:</strong></p>\n<pre><code>Set-Cookie: id=a3fWa; Expires=Thu, 21 Oct 2021 07:28:00 GMT; Secure; HttpOnly\n</code></pre>\n<p>But you are sending a request. In that case can't you set one of these headers. It also won't make any sense. Why?\n<br/>\nAll these properties are thought to protect the cookie <strong>while it's stored in the browser</strong>. For example, does the <code>httpOnly</code> property protect the cookie from <code>XSS</code> attacks. The <code>secure</code> property should protect the cookie from getting sent through unsecure channels. Your browser will automatically send all available cookies during any request → it will also send them in an HTTP request (It won't send it over the http channel if you have set the <code>secure</code> property).</p>\n"},{"tags":[],"owner":{"account_id":29141905,"reputation":1,"user_id":22324681,"display_name":"ziming zeng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691028471,"creation_date":1691028471,"answer_id":76824519,"question_id":76775831,"body_markdown":"You can set whether the cookie should be httponly on response, as in the following code\r\n\r\n    Cookie cookie = new Cookie(&quot;SESSION&quot;, &quot;&quot;);\r\n    cookie.setHttpOnly(true);\r\n    response.addCookie(cookie);","title":"Java Set Security cookie using RestTemplate with Domain and as Secure","body":"<p>You can set whether the cookie should be httponly on response, as in the following code</p>\n<pre><code>Cookie cookie = new Cookie(&quot;SESSION&quot;, &quot;&quot;);\ncookie.setHttpOnly(true);\nresponse.addCookie(cookie);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27872675,"reputation":40,"user_id":21282816,"display_name":"bblumenwiese"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691575253,"creation_date":1691575253,"answer_id":76866626,"question_id":76775831,"body_markdown":"## Assumptions\r\n\r\nI assume that you are looking for a way to use cookie-based authentication to authenticate against a REST server, basically instead of accessing a web page.\r\n\r\nI furthermore assume that you want to avoid exposing your cookie to sites that the cookies should not be sent to.\r\n\r\nIt would be pretty unusual to use cookies for server-to-server communication, but not impossible (I&#39;ve hacked together a similar thing before). What you want to do sounds like exactly that, though: Setting/getting cookies from one server that then get stored and used on another server (the RESTful JSON server you want to call). I am not quite clear on whether you own the server that sets the cookie or not, and where those cookies would get used but I will try to give a good answer based on what you told us so far.\r\n\r\n## Cookie-based auth flow\r\n\r\nSince you are talking about cookie attributes like `Secure`, `HttpOnly`, `SameSite`, etc., you seem to want to use the `Set-Cookie` header somewhere. This header is usually sent from the server to the client (usually browser but in your case the Spring application) when the client makes an initial HTTPS request to the server (simplifying a bit here).\r\n\r\nThe `Cookie` header carries only the key-value pairs (e.g. `Cookie: JSESSIONID=...; YOURCOOKIE=...`) and is used by the client to send the stored values of the cookies back to the server for their subsequent requests. Which of the cookies is determined by the browser based on what has been set in the `SET-COOKIE` header they received from the server. \r\n\r\nExample flow:\r\n1. The Client sends an HTTPS request to the server, e.g. `GET https://subdomain.yourdomain.com/do/`\r\n2. The Server sends a reponse with the HTML of the page in the body (or in your case a JSON) and a bunch of headers, in our example `Set-Cookie: JSESSIONID=&lt;cookie-value&gt;; Domain=yourdomain.com; SameSite: Lax; Secure; HttpOnly` (or alternatively headers like Content-Security-Policy for more fine-grained control than SameSite).\r\n3. The Client (typically browser but might as well be your Spring application) receives all the information in the `Set-Cookie` header and stores them (temporarily / in the request context), along with all the cookie attributes.\r\n4. Upon making another request to the server, the client only sends the cookies as key-value pairs in the `Cookies` header. Browsers have rules that determine whether or not a cookie gets sent with a request (see https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent). If you want to send only the correct cookies in your Spring application, these additional attributes likely would have no effect, and you would need to simulate all the browser rules yourself, or just write custom logic for which cookies you want to actually send.\r\n\r\n## How you could try to make it work\r\n\r\nCookies usually get generated in a browser. A browser (client) makes a request to an HTTP(S) server and gets a response with the Set-Cookie attributes returned in the headers of the response. You could do the same with your application and just filter out the cookies you need.\r\n\r\nThe browser usually stores these cookies and you can see them in your DevTools in your browser for that page. (See for example this page for how to do this in Chrome: https://developer.chrome.com/docs/devtools/application/cookies/). Your Spring application would need to store these cookies somewhere in the Spring context. For more details if you want to reuse cookies from a request to your server, maybe this could help: https://stackoverflow.com/questions/22853321/resttemplate-client-with-cookies)\r\n\r\nTo specify a cookie that specifies for which domains, paths, etc. it is valid, you can use a combination of the following as part of the `Set-Cookie` fields in the HttpHeader, like `Domain`, `Path`, `SameSite` (for details for each attribute see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie). You can read up on how the browser validation rules work here: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent\r\n\r\n\r\n## RestTemplate example code\r\nIn order to use these cookies in your restTemplate request, you can use the following code (based on your code example):\r\n\r\n```java\r\nHttpHeaders requestHeaders = new HttpHeaders();\r\n\r\nResponseCookie cookie = new ResponseCookie(&quot;JSESSIONID&quot;, session.getValue() + &quot;; HttpOnly; Secure; SameSite=Strict/Lax; Domain: yourdomain.com&quot;);\r\nrequestHeaders.add(cookie);\r\n\r\nHttpEntity requestEntity = new HttpEntity(null, requestHeaders);\r\nResponseEntity rssResponse = restTemplate.exchange(\r\n    &quot;https://jira.example.com/sr/jira.issueviews:searchrequest-xml/18107/SearchRequest-18107.xml?tempMax=1000&quot;,\r\n    HttpMethod.GET,\r\n    requestEntity,\r\n    Rss.class);\r\nRss rss = rssResponse.getBody();\r\n```\r\n\r\nDepending on which Spring version you are using, this code may or may not work for you. I might update my response given more details\r\n\r\nFurther reading:\r\n* https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpEntity.html\r\n\r\n* How to build `Set-Cookie` header: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseCookie.ResponseCookieBuilder.html \r\n\r\n* How to build `Cookie` header: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpCookie.html\r\n\r\n## Closing remarks\r\n\r\nThis is my first answer on StackOverflow and I know it&#39;s gotten a bit long. Let me know what was helpful and maybe with a bit more context, I can maybe tweak/streamline it a bit more to your needs. I recently learned a lot about cookies when I had to do a similar thing as you, so I hope it helps.","title":"Java Set Security cookie using RestTemplate with Domain and as Secure","body":"<h2>Assumptions</h2>\n<p>I assume that you are looking for a way to use cookie-based authentication to authenticate against a REST server, basically instead of accessing a web page.</p>\n<p>I furthermore assume that you want to avoid exposing your cookie to sites that the cookies should not be sent to.</p>\n<p>It would be pretty unusual to use cookies for server-to-server communication, but not impossible (I've hacked together a similar thing before). What you want to do sounds like exactly that, though: Setting/getting cookies from one server that then get stored and used on another server (the RESTful JSON server you want to call). I am not quite clear on whether you own the server that sets the cookie or not, and where those cookies would get used but I will try to give a good answer based on what you told us so far.</p>\n<h2>Cookie-based auth flow</h2>\n<p>Since you are talking about cookie attributes like <code>Secure</code>, <code>HttpOnly</code>, <code>SameSite</code>, etc., you seem to want to use the <code>Set-Cookie</code> header somewhere. This header is usually sent from the server to the client (usually browser but in your case the Spring application) when the client makes an initial HTTPS request to the server (simplifying a bit here).</p>\n<p>The <code>Cookie</code> header carries only the key-value pairs (e.g. <code>Cookie: JSESSIONID=...; YOURCOOKIE=...</code>) and is used by the client to send the stored values of the cookies back to the server for their subsequent requests. Which of the cookies is determined by the browser based on what has been set in the <code>SET-COOKIE</code> header they received from the server.</p>\n<p>Example flow:</p>\n<ol>\n<li>The Client sends an HTTPS request to the server, e.g. <code>GET https://subdomain.yourdomain.com/do/</code></li>\n<li>The Server sends a reponse with the HTML of the page in the body (or in your case a JSON) and a bunch of headers, in our example <code>Set-Cookie: JSESSIONID=&lt;cookie-value&gt;; Domain=yourdomain.com; SameSite: Lax; Secure; HttpOnly</code> (or alternatively headers like Content-Security-Policy for more fine-grained control than SameSite).</li>\n<li>The Client (typically browser but might as well be your Spring application) receives all the information in the <code>Set-Cookie</code> header and stores them (temporarily / in the request context), along with all the cookie attributes.</li>\n<li>Upon making another request to the server, the client only sends the cookies as key-value pairs in the <code>Cookies</code> header. Browsers have rules that determine whether or not a cookie gets sent with a request (see <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent</a>). If you want to send only the correct cookies in your Spring application, these additional attributes likely would have no effect, and you would need to simulate all the browser rules yourself, or just write custom logic for which cookies you want to actually send.</li>\n</ol>\n<h2>How you could try to make it work</h2>\n<p>Cookies usually get generated in a browser. A browser (client) makes a request to an HTTP(S) server and gets a response with the Set-Cookie attributes returned in the headers of the response. You could do the same with your application and just filter out the cookies you need.</p>\n<p>The browser usually stores these cookies and you can see them in your DevTools in your browser for that page. (See for example this page for how to do this in Chrome: <a href=\"https://developer.chrome.com/docs/devtools/application/cookies/\" rel=\"nofollow noreferrer\">https://developer.chrome.com/docs/devtools/application/cookies/</a>). Your Spring application would need to store these cookies somewhere in the Spring context. For more details if you want to reuse cookies from a request to your server, maybe this could help: <a href=\"https://stackoverflow.com/questions/22853321/resttemplate-client-with-cookies\">RestTemplate client with cookies</a>)</p>\n<p>To specify a cookie that specifies for which domains, paths, etc. it is valid, you can use a combination of the following as part of the <code>Set-Cookie</code> fields in the HttpHeader, like <code>Domain</code>, <code>Path</code>, <code>SameSite</code> (for details for each attribute see <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie</a>). You can read up on how the browser validation rules work here: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent</a></p>\n<h2>RestTemplate example code</h2>\n<p>In order to use these cookies in your restTemplate request, you can use the following code (based on your code example):</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpHeaders requestHeaders = new HttpHeaders();\n\nResponseCookie cookie = new ResponseCookie(&quot;JSESSIONID&quot;, session.getValue() + &quot;; HttpOnly; Secure; SameSite=Strict/Lax; Domain: yourdomain.com&quot;);\nrequestHeaders.add(cookie);\n\nHttpEntity requestEntity = new HttpEntity(null, requestHeaders);\nResponseEntity rssResponse = restTemplate.exchange(\n    &quot;https://jira.example.com/sr/jira.issueviews:searchrequest-xml/18107/SearchRequest-18107.xml?tempMax=1000&quot;,\n    HttpMethod.GET,\n    requestEntity,\n    Rss.class);\nRss rss = rssResponse.getBody();\n</code></pre>\n<p>Depending on which Spring version you are using, this code may or may not work for you. I might update my response given more details</p>\n<p>Further reading:</p>\n<ul>\n<li><p><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpEntity.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpEntity.html</a></p>\n</li>\n<li><p>How to build <code>Set-Cookie</code> header: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseCookie.ResponseCookieBuilder.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseCookie.ResponseCookieBuilder.html</a></p>\n</li>\n<li><p>How to build <code>Cookie</code> header: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpCookie.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpCookie.html</a></p>\n</li>\n</ul>\n<h2>Closing remarks</h2>\n<p>This is my first answer on StackOverflow and I know it's gotten a bit long. Let me know what was helpful and maybe with a bit more context, I can maybe tweak/streamline it a bit more to your needs. I recently learned a lot about cookies when I had to do a similar thing as you, so I hope it helps.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76866626,"answer_count":3,"score":0,"last_activity_date":1691575253,"creation_date":1690417707,"question_id":76775831,"body_markdown":"In addition to question below, how can I set the Cookie Domain and mark as &quot;Secure&quot;?  Trying to set additional properties on Cookie.\r\n\r\nhttps://stackoverflow.com/questions/5796078/setting-security-cookie-using-resttemplate\r\n\r\n\r\n&gt; I am trying to call a Restful JSON service using RestTemplate and\r\n&gt; Jackson json convertor. Now in order to call the service I need to\r\n&gt; pass in a Security cookie. I can achieve this by using URLConnection\r\n&gt; (See the code below)\r\n&gt; \r\n&gt; URL url= new URL(&quot;https://XXXXXXXX&quot;);\r\n&gt; \r\n&gt; URLConnection yc = url.openConnection();\r\n&gt; yc.setRequestProperty(&quot;SecurityCookie&quot;, ssocookie.getValue());&lt;/code&gt;\r\n&gt; Whats the parallel for this in RestTemplate? Here is a code snippet\r\n&gt; which I have been using to call a Restful Service using RestTemplate:\r\n&gt; \r\n&gt; RestTemplate rest = new RestTemplate();   InputBean input = new\r\n&gt; InputBean();   input.setResource(&quot;SampleResource&quot;);  \r\n&gt; HttpEntity&lt;InputBean &gt; entity = new HttpEntity&lt;InputBean&gt;(input);  \r\n&gt; ResponseEntity&lt;OutputBean&gt; response1 = rest.postForEntity(\r\n&gt;     &quot;https://XXXXXXXXX&quot;, \r\n&gt;     entity, OutputBean.class);&lt;/code&gt; I can not figure out how to pass the security cookie while using RestTemplate to call the service. Any\r\n&gt; help on this would be great.\r\n\r\n\r\n**Answer Example:**\r\n\r\nhttps://stackoverflow.com/a/10080397/15435022\r\n\r\n    HttpHeaders requestHeaders = new HttpHeaders();\r\n    requestHeaders.add(&quot;Cookie&quot;, &quot;JSESSIONID=&quot; + session.getValue());\r\n    HttpEntity requestEntity = new HttpEntity(null, requestHeaders);\r\n    ResponseEntity rssResponse = restTemplate.exchange(\r\n        &quot;https://jira.example.com/sr/jira.issueviews:searchrequest-xml/18107/SearchRequest-18107.xml?tempMax=1000&quot;,\r\n        HttpMethod.GET,\r\n        requestEntity,\r\n        Rss.class);\r\n    Rss rss = rssResponse.getBody();","title":"Java Set Security cookie using RestTemplate with Domain and as Secure","body":"<p>In addition to question below, how can I set the Cookie Domain and mark as &quot;Secure&quot;?  Trying to set additional properties on Cookie.</p>\n<p><a href=\"https://stackoverflow.com/questions/5796078/setting-security-cookie-using-resttemplate\">Setting Security cookie using RestTemplate</a></p>\n<blockquote>\n<p>I am trying to call a Restful JSON service using RestTemplate and\nJackson json convertor. Now in order to call the service I need to\npass in a Security cookie. I can achieve this by using URLConnection\n(See the code below)</p>\n<p>URL url= new URL(&quot;https://XXXXXXXX&quot;);</p>\n<p>URLConnection yc = url.openConnection();\nyc.setRequestProperty(&quot;SecurityCookie&quot;, ssocookie.getValue());\nWhats the parallel for this in RestTemplate? Here is a code snippet\nwhich I have been using to call a Restful Service using RestTemplate:</p>\n<p>RestTemplate rest = new RestTemplate();   InputBean input = new\nInputBean();   input.setResource(&quot;SampleResource&quot;);<br />\nHttpEntity entity = new HttpEntity(input);<br />\nResponseEntity response1 = rest.postForEntity(\n&quot;https://XXXXXXXXX&quot;,\nentity, OutputBean.class); I can not figure out how to pass the security cookie while using RestTemplate to call the service. Any\nhelp on this would be great.</p>\n</blockquote>\n<p><strong>Answer Example:</strong></p>\n<p><a href=\"https://stackoverflow.com/a/10080397/15435022\">https://stackoverflow.com/a/10080397/15435022</a></p>\n<pre><code>HttpHeaders requestHeaders = new HttpHeaders();\nrequestHeaders.add(&quot;Cookie&quot;, &quot;JSESSIONID=&quot; + session.getValue());\nHttpEntity requestEntity = new HttpEntity(null, requestHeaders);\nResponseEntity rssResponse = restTemplate.exchange(\n    &quot;https://jira.example.com/sr/jira.issueviews:searchrequest-xml/18107/SearchRequest-18107.xml?tempMax=1000&quot;,\n    HttpMethod.GET,\n    requestEntity,\n    Rss.class);\nRss rss = rssResponse.getBody();\n</code></pre>\n"},{"tags":["java","tclientsocket"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691581220,"post_id":76866188,"comment_id":135510324,"body_markdown":"When you want to unblock a thread that is blocked in a socket read, shutdown that socket for input. The read will then get an end of stream and proceed to close the socket and exit as normally.","body":"When you want to unblock a thread that is blocked in a socket read, shutdown that socket for input. The read will then get an end of stream and proceed to close the socket and exit as normally."}],"answers":[{"tags":[],"owner":{"account_id":29190653,"reputation":1,"user_id":22362847,"display_name":"jacobk1337"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691575213,"creation_date":1691575213,"answer_id":76866620,"question_id":76866188,"body_markdown":"The problem is that you are closing `serverReader` here:\r\n\r\n    if (message.equals(&quot;exit&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;REACHED EXIT&quot;);\r\n\t\t\t\t\tserverReader.close();\r\n\t\t\t\t\tclientSocket.close();\r\n\t\t\t\t\tin.close();\r\n\t\t\t\t\tout.close();\r\n\t\t\t\t\tSystem.out.println(&quot;EXITED&quot;);\r\n\r\n\t\t\t\t\tSystem.exit(0);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\nThe application doesn&#39;t exit, because there is a lock set on `serverReader` object in `receiveThread` by the method `readLine()`. When you call `serverReader.close()` it waits until lock gets released, and it gets released when the message is received in that case. If you remove that line it will work: \r\n\r\n    if (message.equals(&quot;exit&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;REACHED EXIT&quot;);\r\n\t\t\t\t\tclientSocket.close();\r\n\t\t\t\t\tin.close();\r\n\t\t\t\t\tout.close();\r\n\t\t\t\t\tSystem.out.println(&quot;EXITED&quot;);\r\n\r\n\t\t\t\t\tSystem.exit(0);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}","title":"Java - ClientSocket not closing program","body":"<p>The problem is that you are closing <code>serverReader</code> here:</p>\n<pre><code>if (message.equals(&quot;exit&quot;)) {\n                System.out.println(&quot;REACHED EXIT&quot;);\n                serverReader.close();\n                clientSocket.close();\n                in.close();\n                out.close();\n                System.out.println(&quot;EXITED&quot;);\n\n                System.exit(0);\n                break;\n\n            }\n</code></pre>\n<p>The application doesn't exit, because there is a lock set on <code>serverReader</code> object in <code>receiveThread</code> by the method <code>readLine()</code>. When you call <code>serverReader.close()</code> it waits until lock gets released, and it gets released when the message is received in that case. If you remove that line it will work:</p>\n<pre><code>if (message.equals(&quot;exit&quot;)) {\n                System.out.println(&quot;REACHED EXIT&quot;);\n                clientSocket.close();\n                in.close();\n                out.close();\n                System.out.println(&quot;EXITED&quot;);\n\n                System.exit(0);\n                break;\n\n            }\n</code></pre>\n"}],"owner":{"account_id":23451050,"reputation":305,"user_id":17507202,"display_name":"mitas1c"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691575213,"creation_date":1691571994,"question_id":76866188,"body_markdown":"I am creating simple chat app in Java using ClientSocket and ServerSocket.\r\nHowever I have come to a problem.\r\n\r\nThe Client has two threads, one for reading received messages and the other for sending messages. When the client writes &#39;exit&#39; the application should close together with the connection. However the application doesn&#39;t close but only after the client has received some messages from other clients which should not happen.\r\n\r\nCan anybody help me fix this ?\r\n\r\n\r\nClient.java\r\n\r\n        import java.io.*;\r\n    import java.net.Socket;\r\n    import java.net.ConnectException;\r\n    import java.util.Scanner;\r\n    \r\n    public class Client {\r\n    \r\n        private Socket clientSocket;\r\n        private BufferedReader serverReader;\r\n        private boolean stopReceiving;\r\n        private boolean stopSending;\r\n    \r\n        public static void main(String[] args) {\r\n            Client client = new Client();\r\n        }\r\n    \r\n        public Client() {\r\n            try {\r\n                this.clientSocket = new Socket(&quot;localhost&quot;, 8080);\r\n                System.out.println(&quot;Spuštěn&#237; klienta proběhlo &#250;spěšně.&quot;);\r\n    \r\n                this.serverReader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n                this.stopReceiving = false;\r\n                this.stopSending = false;\r\n    \r\n    \r\n                Thread receiveThread = new Thread(new Runnable() {\r\n                    public void run() {\r\n                        try {\r\n                            while (!stopReceiving) {\r\n                                String message = serverReader.readLine();\r\n                                if (message == null) {\r\n                                    // Vypnut&#237; připojen&#237; k serveru\r\n                                    stopReceiving = true;\r\n                                    closeClient();\r\n                                    System.exit(0); // Vypnut&#237; aplikace\r\n                                }\r\n                                if (message.equals(&quot;Připojen&#237; odm&#237;tnuto - dosaženo maxim&#225;ln&#237;ho počtu klientů. Zkuste se připojit později.&quot;)) {\r\n                                    closeClient();\r\n                                    System.exit(0); // Vypnut&#237; aplikace\r\n                                }\r\n                                System.out.println(&quot;Zpr&#225;va od serveru: &quot; + message);\r\n                            }\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                });\r\n                receiveThread.start();\r\n    \r\n                BufferedWriter out = new BufferedWriter(new OutputStreamWriter(this.clientSocket.getOutputStream())); // vytvořen&#237; BufferedWriter\r\n                Scanner in = new Scanner(System.in);\r\n                while (!stopSending) {\r\n                    String message = in.nextLine();\r\n                    if (message.equals(&quot;exit&quot;)) {\r\n                        System.out.println(&quot;REACHED EXIT&quot;);\r\n                            serverReader.close();\r\n                            clientSocket.close();\r\n                            in.close();\r\n                            out.close();\r\n                            System.out.println(&quot;EXITED&quot;);\r\n    \r\n                            System.exit(0);\r\n                            break;\r\n    \r\n                    }else{\r\n                        out.write(message + &quot;\\r\\n&quot;);\r\n                        out.flush();\r\n                        System.out.println(&quot;Zpr&#225;va \\&quot;&quot; + message + &quot;\\&quot; byla odesl&#225;na.&quot;);\r\n                    }\r\n                }\r\n    \r\n            } catch (ConnectException e) {\r\n                System.out.println(&quot;Nepodařilo se připojit k serveru. Klient se ukončuje.&quot;);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                closeClient();\r\n            }\r\n        }\r\n    \r\n        private void closeClient() {\r\n            try {\r\n                if (serverReader != null)\r\n                    serverReader.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            try {\r\n                if (clientSocket != null)\r\n                    clientSocket.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nServer.java\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStreamWriter;\r\n    import java.io.PrintWriter;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n   \r\n    public class Server {\r\n    \r\n        private ServerSocket serverSocket;\r\n        private ArrayList&lt;ClientHandler&gt; clients;\r\n        private static final int MAX_CLIENTS = 2; // Maxim&#225;ln&#237; počet klientů\r\n    \r\n        public static void main(String[] args) {\r\n            Server server = new Server();\r\n        }\r\n    \r\n        public Server() {\r\n            try {\r\n                this.serverSocket = new ServerSocket(8080);\r\n                System.out.println(&quot;Spuštěn&#237; serveru proběhlo &#250;spěšně.\\nČek&#225;m na připojen&#237; klienta...\\n&quot;);\r\n                this.clients = new ArrayList&lt;&gt;();\r\n    \r\n                clients();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private void clients() {\r\n            Thread acceptThread = new Thread(new Runnable() {\r\n                public void run() {\r\n                    while (true) {\r\n                        try {\r\n                            Socket clientSocket = serverSocket.accept();\r\n                            PrintWriter writer = new PrintWriter(new OutputStreamWriter(clientSocket.getOutputStream()), true);\r\n                            if (clients.size() &lt; MAX_CLIENTS) { // Check if the maximum number of clients is reached\r\n                                ClientHandler clientHandler = new ClientHandler(clientSocket, writer);\r\n                                synchronized (clients) {\r\n                                    clients.add(clientHandler);\r\n                                }\r\n                                System.out.println(&quot;Klient &quot; + clientHandler.getAddress() + &quot; se připojil.&quot;);\r\n                            } else {\r\n                                writer.println(&quot;\\&quot;Připojen&#237; odm&#237;tnuto - dosaženo maxim&#225;ln&#237;ho počtu klientů. Zkuste se připojit později.&quot;);\r\n                                writer.flush();\r\n                                clientSocket.close();\r\n                                System.out.println(&quot;Připojen&#237; odm&#237;tnuto - dosaženo maxim&#225;ln&#237;ho počtu klientů.&quot;);\r\n                            }\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            acceptThread.start();\r\n    \r\n            while (true) {\r\n                synchronized (clients) {\r\n                    Iterator&lt;ClientHandler&gt; iterator = clients.iterator();\r\n                    while (iterator.hasNext()) {\r\n                        ClientHandler clientHandler = iterator.next();\r\n                        try {\r\n                            BufferedReader reader = new BufferedReader(new InputStreamReader(clientHandler.getSocket().getInputStream()));\r\n                            if (reader.ready()) {\r\n                                String message = reader.readLine();\r\n                                System.out.println(&quot;Přijata zpr&#225;va od klienta &quot; + clientHandler.getAddress() + &quot; : &quot; + message);\r\n                                broadcastMessage(message);\r\n                            }\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                            iterator.remove(); // Bezpečně odstran&#237; klienta z iter&#225;toru\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        private void broadcastMessage(String message) {\r\n            synchronized (clients) {\r\n                for (ClientHandler clientHandler : clients) {\r\n                    clientHandler.getWriter().println(message);\r\n                    clientHandler.getWriter().flush();\r\n                }\r\n            }\r\n        }\r\n    \r\n        private static class ClientHandler {\r\n            private final Socket socket;\r\n            private final PrintWriter writer;\r\n    \r\n            public ClientHandler(Socket socket, PrintWriter writer) {\r\n                this.socket = socket;\r\n                this.writer = writer;\r\n            }\r\n    \r\n            public Socket getSocket() {\r\n                return this.socket;\r\n            }\r\n    \r\n            public PrintWriter getWriter() {\r\n                return this.writer;\r\n            }\r\n    \r\n            public String getAddress() {\r\n                return this.socket.getInetAddress().toString();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Java - ClientSocket not closing program","body":"<p>I am creating simple chat app in Java using ClientSocket and ServerSocket.\nHowever I have come to a problem.</p>\n<p>The Client has two threads, one for reading received messages and the other for sending messages. When the client writes 'exit' the application should close together with the connection. However the application doesn't close but only after the client has received some messages from other clients which should not happen.</p>\n<p>Can anybody help me fix this ?</p>\n<p>Client.java</p>\n<pre><code>    import java.io.*;\nimport java.net.Socket;\nimport java.net.ConnectException;\nimport java.util.Scanner;\n\npublic class Client {\n\n    private Socket clientSocket;\n    private BufferedReader serverReader;\n    private boolean stopReceiving;\n    private boolean stopSending;\n\n    public static void main(String[] args) {\n        Client client = new Client();\n    }\n\n    public Client() {\n        try {\n            this.clientSocket = new Socket(&quot;localhost&quot;, 8080);\n            System.out.println(&quot;Spuštění klienta proběhlo úspěšně.&quot;);\n\n            this.serverReader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n            this.stopReceiving = false;\n            this.stopSending = false;\n\n\n            Thread receiveThread = new Thread(new Runnable() {\n                public void run() {\n                    try {\n                        while (!stopReceiving) {\n                            String message = serverReader.readLine();\n                            if (message == null) {\n                                // Vypnutí připojení k serveru\n                                stopReceiving = true;\n                                closeClient();\n                                System.exit(0); // Vypnutí aplikace\n                            }\n                            if (message.equals(&quot;Připojení odmítnuto - dosaženo maximálního počtu klientů. Zkuste se připojit později.&quot;)) {\n                                closeClient();\n                                System.exit(0); // Vypnutí aplikace\n                            }\n                            System.out.println(&quot;Zpráva od serveru: &quot; + message);\n                        }\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n            receiveThread.start();\n\n            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(this.clientSocket.getOutputStream())); // vytvoření BufferedWriter\n            Scanner in = new Scanner(System.in);\n            while (!stopSending) {\n                String message = in.nextLine();\n                if (message.equals(&quot;exit&quot;)) {\n                    System.out.println(&quot;REACHED EXIT&quot;);\n                        serverReader.close();\n                        clientSocket.close();\n                        in.close();\n                        out.close();\n                        System.out.println(&quot;EXITED&quot;);\n\n                        System.exit(0);\n                        break;\n\n                }else{\n                    out.write(message + &quot;\\r\\n&quot;);\n                    out.flush();\n                    System.out.println(&quot;Zpráva \\&quot;&quot; + message + &quot;\\&quot; byla odeslána.&quot;);\n                }\n            }\n\n        } catch (ConnectException e) {\n            System.out.println(&quot;Nepodařilo se připojit k serveru. Klient se ukončuje.&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            closeClient();\n        }\n    }\n\n    private void closeClient() {\n        try {\n            if (serverReader != null)\n                serverReader.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        try {\n            if (clientSocket != null)\n                clientSocket.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Server.java</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.io.PrintWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.Iterator;\n\npublic class Server {\n\n    private ServerSocket serverSocket;\n    private ArrayList&lt;ClientHandler&gt; clients;\n    private static final int MAX_CLIENTS = 2; // Maximální počet klientů\n\n    public static void main(String[] args) {\n        Server server = new Server();\n    }\n\n    public Server() {\n        try {\n            this.serverSocket = new ServerSocket(8080);\n            System.out.println(&quot;Spuštění serveru proběhlo úspěšně.\\nČekám na připojení klienta...\\n&quot;);\n            this.clients = new ArrayList&lt;&gt;();\n\n            clients();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void clients() {\n        Thread acceptThread = new Thread(new Runnable() {\n            public void run() {\n                while (true) {\n                    try {\n                        Socket clientSocket = serverSocket.accept();\n                        PrintWriter writer = new PrintWriter(new OutputStreamWriter(clientSocket.getOutputStream()), true);\n                        if (clients.size() &lt; MAX_CLIENTS) { // Check if the maximum number of clients is reached\n                            ClientHandler clientHandler = new ClientHandler(clientSocket, writer);\n                            synchronized (clients) {\n                                clients.add(clientHandler);\n                            }\n                            System.out.println(&quot;Klient &quot; + clientHandler.getAddress() + &quot; se připojil.&quot;);\n                        } else {\n                            writer.println(&quot;\\&quot;Připojení odmítnuto - dosaženo maximálního počtu klientů. Zkuste se připojit později.&quot;);\n                            writer.flush();\n                            clientSocket.close();\n                            System.out.println(&quot;Připojení odmítnuto - dosaženo maximálního počtu klientů.&quot;);\n                        }\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n        });\n        acceptThread.start();\n\n        while (true) {\n            synchronized (clients) {\n                Iterator&lt;ClientHandler&gt; iterator = clients.iterator();\n                while (iterator.hasNext()) {\n                    ClientHandler clientHandler = iterator.next();\n                    try {\n                        BufferedReader reader = new BufferedReader(new InputStreamReader(clientHandler.getSocket().getInputStream()));\n                        if (reader.ready()) {\n                            String message = reader.readLine();\n                            System.out.println(&quot;Přijata zpráva od klienta &quot; + clientHandler.getAddress() + &quot; : &quot; + message);\n                            broadcastMessage(message);\n                        }\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                        iterator.remove(); // Bezpečně odstraní klienta z iterátoru\n                    }\n                }\n            }\n        }\n    }\n\n    private void broadcastMessage(String message) {\n        synchronized (clients) {\n            for (ClientHandler clientHandler : clients) {\n                clientHandler.getWriter().println(message);\n                clientHandler.getWriter().flush();\n            }\n        }\n    }\n\n    private static class ClientHandler {\n        private final Socket socket;\n        private final PrintWriter writer;\n\n        public ClientHandler(Socket socket, PrintWriter writer) {\n            this.socket = socket;\n            this.writer = writer;\n        }\n\n        public Socket getSocket() {\n            return this.socket;\n        }\n\n        public PrintWriter getWriter() {\n            return this.writer;\n        }\n\n        public String getAddress() {\n            return this.socket.getInetAddress().toString();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","google-bigquery","spring-cloud-gcp-bigquery"],"answers":[{"tags":[],"owner":{"account_id":29175961,"reputation":1,"user_id":22351212,"display_name":"Thomas Dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691575177,"creation_date":1691575177,"answer_id":76866614,"question_id":76850833,"body_markdown":"Solution to the Issue with Google BigQuery and Spring Boot Integration\r\n\r\nFor anyone encountering challenges when integrating Google&#39;s BigQuery with a Spring Boot application, here&#39;s the solution that worked for me:\r\n\r\nSpring Cloud GCP Auto Configuration: I realized that manual BigQuery configuration might not always be necessary. The Spring Cloud GCP library provides an auto-configuration for BigQuery, which can simplify the setup process. Detailed information about this feature can be found here https://cloud.spring.io/spring-cloud-static/spring-cloud-gcp/1.2.0.RELEASE/reference/html/#google-cloud-bigquery.\r\n\r\nProject ID vs. Project Name: A notable point of confusion was distinguishing between the Google Cloud Project ID and Project Name. These terms might seem interchangeable, but they serve different purposes. When you attempt to query a non-existent project, the returned error might be misleading. In my experience, the error hinted at a regional problem, which was not the actual issue.\r\n\r\nProper Permissions: After setting up with the correct project ID, it&#39;s essential to ensure your service account has the appropriate permissions. Inadequate permissions will prevent requests to BigQuery, and the error messages might not directly indicate this. It&#39;s recommended to verify permissions in the Google Cloud Console.\r\n\r\nIn summary:\r\n\r\nUtilize Spring Cloud GCP&#39;s auto-configuration when integrating BigQuery with Spring Boot.\r\nEnsure you are using the correct Project ID and avoid confusing it with the Project Name.\r\nConfirm that your service account possesses the needed permissions for BigQuery operations.\r\nI hope this summary assists other developers who encounter similar challenges.","title":"Trouble connecting to BigQuery using Google Cloud Client Library in a Spring Boot Application","body":"<p>Solution to the Issue with Google BigQuery and Spring Boot Integration</p>\n<p>For anyone encountering challenges when integrating Google's BigQuery with a Spring Boot application, here's the solution that worked for me:</p>\n<p>Spring Cloud GCP Auto Configuration: I realized that manual BigQuery configuration might not always be necessary. The Spring Cloud GCP library provides an auto-configuration for BigQuery, which can simplify the setup process. Detailed information about this feature can be found here <a href=\"https://cloud.spring.io/spring-cloud-static/spring-cloud-gcp/1.2.0.RELEASE/reference/html/#google-cloud-bigquery\" rel=\"nofollow noreferrer\">https://cloud.spring.io/spring-cloud-static/spring-cloud-gcp/1.2.0.RELEASE/reference/html/#google-cloud-bigquery</a>.</p>\n<p>Project ID vs. Project Name: A notable point of confusion was distinguishing between the Google Cloud Project ID and Project Name. These terms might seem interchangeable, but they serve different purposes. When you attempt to query a non-existent project, the returned error might be misleading. In my experience, the error hinted at a regional problem, which was not the actual issue.</p>\n<p>Proper Permissions: After setting up with the correct project ID, it's essential to ensure your service account has the appropriate permissions. Inadequate permissions will prevent requests to BigQuery, and the error messages might not directly indicate this. It's recommended to verify permissions in the Google Cloud Console.</p>\n<p>In summary:</p>\n<p>Utilize Spring Cloud GCP's auto-configuration when integrating BigQuery with Spring Boot.\nEnsure you are using the correct Project ID and avoid confusing it with the Project Name.\nConfirm that your service account possesses the needed permissions for BigQuery operations.\nI hope this summary assists other developers who encounter similar challenges.</p>\n"}],"owner":{"account_id":29175961,"reputation":1,"user_id":22351212,"display_name":"Thomas Dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76866614,"answer_count":1,"score":0,"last_activity_date":1691575177,"creation_date":1691404184,"question_id":76850833,"body_markdown":"I&#39;m working on a Spring Boot application and I&#39;m trying to connect to Google BigQuery using the Google Cloud Client Library. I have a service account JSON credentials file located at src/main/resources/my-todo/vm-dev-393108-80d765f9af09.json in my project.\r\n\r\nI&#39;ve defined the path to my credentials in application.properties like so:\r\n\r\nmyapp.google.credentials.path=classpath:vm-dev-393108-80d765f9af09.json\r\n\r\nAnd I use this path to load the credentials in my Spring configuration:\r\n\r\n\r\n```\r\n@Configuration\r\npublic class BigQueryConfig {\r\n@Value(&quot;${myapp.google.credentials.path}&quot;)\r\nprivate String googleCredentialsPath;\r\n\r\n    @Bean\r\n    public GoogleCredentials googleCredentials() {\r\n        try (FileInputStream serviceAccountStream = new FileInputStream(googleCredentialsPath)) {\r\n            return GoogleCredentials.fromStream(serviceAccountStream);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Failed to load BigQuery credentials&quot;, e);\r\n        }\r\n    }\r\n    \r\n    @Bean\r\n    public BigQuery bigQuery(GoogleCredentials credentials) {\r\n        return BigQueryOptions.newBuilder().setCredentials(credentials).build().getService();\r\n    }}\r\n```\r\n\r\n\r\nHowever, when I run my application, I&#39;m encountering the following error:  \r\n  \r\njava.io.FileNotFoundException: class path resource \\[vm-dev-393108-80d765f9af09.json\\] cannot be opened because it does not exist\r\n\r\nI&#39;ve checked the file path multiple times and it appears to be correct. I&#39;m not sure why Spring is unable to locate my JSON file.\r\n\r\nAny help would be greatly appreciated. Thank you!\r\n\r\nI am a new Spring Boot developer and this is my first time trying to establish a connection to Google&#39;s BigQuery from a Spring Boot application. I am developing my application in Gitpod, an online development environment.\r\n\r\nSo far, I have tried different ways to define the path to my JSON credentials file:\r\n\r\nI initially used the full path, like my-todo/src/main/resources/vm-dev-393108-80d765f9af09.json, but it didn&#39;t work.\r\n\r\nI then tried copying the relative path from the context menu in my IDE and used that path in my application.properties file, but the application still could not locate the JSON file.\r\n\r\nMy expectation is that when I run my Spring Boot application, it should be able to use the provided path to locate the JSON file, load the credentials, and connect to BigQuery successfully.\r\n\r\nHowever, regardless of how I define the path to my JSON file, I keep encountering a FileNotFoundException stating that the JSON file does not exist, even though the file does indeed exist in my project.\r\n\r\nI&#39;m not sure if there&#39;s something specific about Spring, Gitpod, or my relative inexperience that is causing this issue. I suspect there might be some limitations or specificities in Gitpod&#39;s workspace that prevent it from accessing a JSON file located within the workspace itself. I am eager to understand the mistake I&#39;m making and learn how to correct it.\r\n\r\nRemember, the more context and details you provide, the easier it will be for others to help you!","title":"Trouble connecting to BigQuery using Google Cloud Client Library in a Spring Boot Application","body":"<p>I'm working on a Spring Boot application and I'm trying to connect to Google BigQuery using the Google Cloud Client Library. I have a service account JSON credentials file located at src/main/resources/my-todo/vm-dev-393108-80d765f9af09.json in my project.</p>\n<p>I've defined the path to my credentials in application.properties like so:</p>\n<p>myapp.google.credentials.path=classpath:vm-dev-393108-80d765f9af09.json</p>\n<p>And I use this path to load the credentials in my Spring configuration:</p>\n<pre><code>@Configuration\npublic class BigQueryConfig {\n@Value(&quot;${myapp.google.credentials.path}&quot;)\nprivate String googleCredentialsPath;\n\n    @Bean\n    public GoogleCredentials googleCredentials() {\n        try (FileInputStream serviceAccountStream = new FileInputStream(googleCredentialsPath)) {\n            return GoogleCredentials.fromStream(serviceAccountStream);\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Failed to load BigQuery credentials&quot;, e);\n        }\n    }\n    \n    @Bean\n    public BigQuery bigQuery(GoogleCredentials credentials) {\n        return BigQueryOptions.newBuilder().setCredentials(credentials).build().getService();\n    }}\n</code></pre>\n<p>However, when I run my application, I'm encountering the following error:</p>\n<p>java.io.FileNotFoundException: class path resource [vm-dev-393108-80d765f9af09.json] cannot be opened because it does not exist</p>\n<p>I've checked the file path multiple times and it appears to be correct. I'm not sure why Spring is unable to locate my JSON file.</p>\n<p>Any help would be greatly appreciated. Thank you!</p>\n<p>I am a new Spring Boot developer and this is my first time trying to establish a connection to Google's BigQuery from a Spring Boot application. I am developing my application in Gitpod, an online development environment.</p>\n<p>So far, I have tried different ways to define the path to my JSON credentials file:</p>\n<p>I initially used the full path, like my-todo/src/main/resources/vm-dev-393108-80d765f9af09.json, but it didn't work.</p>\n<p>I then tried copying the relative path from the context menu in my IDE and used that path in my application.properties file, but the application still could not locate the JSON file.</p>\n<p>My expectation is that when I run my Spring Boot application, it should be able to use the provided path to locate the JSON file, load the credentials, and connect to BigQuery successfully.</p>\n<p>However, regardless of how I define the path to my JSON file, I keep encountering a FileNotFoundException stating that the JSON file does not exist, even though the file does indeed exist in my project.</p>\n<p>I'm not sure if there's something specific about Spring, Gitpod, or my relative inexperience that is causing this issue. I suspect there might be some limitations or specificities in Gitpod's workspace that prevent it from accessing a JSON file located within the workspace itself. I am eager to understand the mistake I'm making and learn how to correct it.</p>\n<p>Remember, the more context and details you provide, the easier it will be for others to help you!</p>\n"},{"tags":["java","microservices","keycloak","licensing"],"owner":{"account_id":12875129,"reputation":1,"user_id":9312103,"display_name":"AlexandrGv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691574582,"creation_date":1691574582,"question_id":76866534,"body_markdown":"How to replace keyclock JpaUserProvider  with your own?\r\n\r\n\r\nHi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. I need to use my custom provider insteed JpaUserProvider. How to replace it? In what config or smthing else i need to do this?","title":"How to replace keyclock JpaUserProviderprovider with your own","body":"<p>How to replace keyclock JpaUserProvider  with your own?</p>\n<p>Hi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. I need to use my custom provider insteed JpaUserProvider. How to replace it? In what config or smthing else i need to do this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":120028,"reputation":35734,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"score":0,"creation_date":1611432653,"post_id":59923670,"comment_id":116451494,"body_markdown":"Maybe if you remove the &quot;.toString ()&quot;-part of the question, you earn less downvotes. It&#39;s not really related to the otherwise legitimate question, even if it happens, that it only occurs in your code in such context.","body":"Maybe if you remove the &quot;.toString ()&quot;-part of the question, you earn less downvotes. It&#39;s not really related to the otherwise legitimate question, even if it happens, that it only occurs in your code in such context."}],"answers":[{"tags":[],"owner":{"account_id":8860436,"reputation":45945,"user_id":7509065,"display_name":"Joseph Sible-Reinstate Monica"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1580081344,"creation_date":1580081344,"answer_id":59923707,"question_id":59923670,"body_markdown":"From [the documentation][1]:\r\n\r\n&gt; It is rarely appropriate to use this constructor. The static factory [`valueOf(int)`][2] is generally a better choice, as it is likely to yield significantly better space and time performance.\r\n\r\nSo do this:\r\n\r\n    public String toString() {\r\n        return m.get(row) + Integer.valueOf(diagonal).toString();\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#%3Cinit%3E(int)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#valueOf(int)","title":"The constructor Integer(int) is deprecated since version 9","body":"<p>From <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#%3Cinit%3E(int)\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>It is rarely appropriate to use this constructor. The static factory <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#valueOf(int)\" rel=\"nofollow noreferrer\"><code>valueOf(int)</code></a> is generally a better choice, as it is likely to yield significantly better space and time performance.</p>\n</blockquote>\n\n<p>So do this:</p>\n\n<pre><code>public String toString() {\n    return m.get(row) + Integer.valueOf(diagonal).toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580081595,"creation_date":1580081595,"answer_id":59923728,"question_id":59923670,"body_markdown":"There is no need to create an `Integer` object when what you want to do is convert an `int` to a `String`. The `Integer` class has a `static` method [`toString(int)`][1] for this purpose.\r\n\r\n```java\r\nreturn m.get(row) + Integer.toString(diagonal);\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#toString-int-","title":"The constructor Integer(int) is deprecated since version 9","body":"<p>There is no need to create an <code>Integer</code> object when what you want to do is convert an <code>int</code> to a <code>String</code>. The <code>Integer</code> class has a <code>static</code> method <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#toString-int-\" rel=\"nofollow noreferrer\"><code>toString(int)</code></a> for this purpose.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>return m.get(row) + Integer.toString(diagonal);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10158908,"reputation":8699,"user_id":7583953,"accept_rate":80,"display_name":"Alec"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1580081643,"creation_date":1580081643,"answer_id":59923732,"question_id":59923670,"body_markdown":"You can simply convert the `Integer` to a string using the built-in method `toString()`:\r\n```\r\nreturn m.get(row) + Integer.toString(diagonal);\r\n```","title":"The constructor Integer(int) is deprecated since version 9","body":"<p>You can simply convert the <code>Integer</code> to a string using the built-in method <code>toString()</code>:</p>\n\n<pre><code>return m.get(row) + Integer.toString(diagonal);\n</code></pre>\n"}],"owner":{"account_id":17622242,"reputation":41,"user_id":12787934,"display_name":"Silvija "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6428,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"answer_count":3,"score":-2,"last_activity_date":1691574458,"creation_date":1580081030,"question_id":59923670,"body_markdown":"I really want to change this old format in my code into a newer one as this one is deprecated,\r\nif you could offer me something \r\n```\r\nnew Integer(diagonal).toString();\r\n```\r\n    ","title":"The constructor Integer(int) is deprecated since version 9","body":"<p>I really want to change this old format in my code into a newer one as this one is deprecated,\nif you could offer me something </p>\n\n<pre><code>new Integer(diagonal).toString();\n</code></pre>\n"},{"tags":["java","checkstyle"],"answers":[{"tags":[],"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1245328965,"creation_date":1245328965,"answer_id":1012440,"question_id":1012407,"body_markdown":"There is an option to ignore write protected files. Or files in a package.","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>There is an option to ignore write protected files. Or files in a package.</p>\n"},{"tags":[],"owner":{"account_id":34019,"reputation":14592,"user_id":95699,"accept_rate":73,"display_name":"Rob H"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1245332388,"creation_date":1245332388,"answer_id":1012677,"question_id":1012407,"body_markdown":"If you&#39;re using the Checkclipse Eclipse plugin for Checkstyle, you can include or exclude file patterns (including directories) by going to the Checkclipse &gt; File Filter tab under project properties. For example, my project contains **src** and **test** directories at the top level. I want Checkstyle applied to only files in the **src** directory (omitting **test**), so I added an include pattern that looks like this:\r\n\r\n    src/.+java$\r\n\r\nAs you can see, it uses a regex-style syntax for pattern specification.","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>If you're using the Checkclipse Eclipse plugin for Checkstyle, you can include or exclude file patterns (including directories) by going to the Checkclipse > File Filter tab under project properties. For example, my project contains <strong>src</strong> and <strong>test</strong> directories at the top level. I want Checkstyle applied to only files in the <strong>src</strong> directory (omitting <strong>test</strong>), so I added an include pattern that looks like this:</p>\n\n<pre><code>src/.+java$\n</code></pre>\n\n<p>As you can see, it uses a regex-style syntax for pattern specification.</p>\n"},{"tags":[],"owner":{"account_id":36213,"reputation":3169,"user_id":103165,"accept_rate":86,"display_name":"ist_lion"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1245390419,"creation_date":1245390419,"answer_id":1016501,"question_id":1012407,"body_markdown":"If you wish to not have a group of files within a project inspected, you can filter these files out so they are not inspected by creating a **file filter**\r\n\r\n\r\nThe file filter uses regex to determine what files to exclude.  The regex operates on the complete file name - because of this, you could also exclude whole folders.  In this case you could exclude the whole package if you wished.\r\n\r\nIf you google around a bit - you could probably find some Checkstyle Configuration Propertie files that have examples of what you&#39;re looking for.  I would suggest after you do so - save it as a bit of a template so you can refer to it in future situations","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>If you wish to not have a group of files within a project inspected, you can filter these files out so they are not inspected by creating a <strong>file filter</strong></p>\n\n<p>The file filter uses regex to determine what files to exclude.  The regex operates on the complete file name - because of this, you could also exclude whole folders.  In this case you could exclude the whole package if you wished.</p>\n\n<p>If you google around a bit - you could probably find some Checkstyle Configuration Propertie files that have examples of what you're looking for.  I would suggest after you do so - save it as a bit of a template so you can refer to it in future situations</p>\n"},{"tags":[],"owner":{"account_id":42594,"reputation":12865,"user_id":124111,"accept_rate":98,"display_name":"aberrant80"},"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1245391899,"creation_date":1245391899,"answer_id":1016550,"question_id":1012407,"body_markdown":"Don&#39;t know whether you&#39;re using command line or in an IDE, but you&#39;ll basically need a suppresions file. If you&#39;re manually editing the Checkstyle config file, add a new module to it:\r\n\r\n    &lt;module name=&quot;SuppressionFilter&quot;&gt;\r\n        &lt;property name=&quot;file&quot; value=&quot;mysuppressions.xml&quot; /&gt;\r\n    &lt;/module&gt;\r\n\r\nYour `mysuppression.xml` can be something like:\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    \r\n    &lt;!DOCTYPE suppressions PUBLIC\r\n        &quot;-//Puppy Crawl//DTD Suppressions 1.1//EN&quot;\r\n        &quot;http://www.puppycrawl.com/dtds/suppressions_1_1.dtd&quot;&gt;\r\n    \r\n    &lt;suppressions&gt;\r\n        &lt;suppress files=&quot;TheClassToIgnore\\.java&quot; checks=&quot;[a-zA-Z0-9]*&quot;/&gt;\r\n    &lt;/suppressions&gt;\r\n\r\nThe value for &quot;`files`&quot; attribute is basically a regex for your source files, and the value for the &quot;`checks`&quot; attribute is regex for what checks to skip (&quot;`[a-zA-Z0-9]*`&quot; basically means skip everything). This is the pattern you&#39;re looking for I guess?","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>Don't know whether you're using command line or in an IDE, but you'll basically need a suppresions file. If you're manually editing the Checkstyle config file, add a new module to it:</p>\n\n<pre><code>&lt;module name=\"SuppressionFilter\"&gt;\n    &lt;property name=\"file\" value=\"mysuppressions.xml\" /&gt;\n&lt;/module&gt;\n</code></pre>\n\n<p>Your <code>mysuppression.xml</code> can be something like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;!DOCTYPE suppressions PUBLIC\n    \"-//Puppy Crawl//DTD Suppressions 1.1//EN\"\n    \"http://www.puppycrawl.com/dtds/suppressions_1_1.dtd\"&gt;\n\n&lt;suppressions&gt;\n    &lt;suppress files=\"TheClassToIgnore\\.java\" checks=\"[a-zA-Z0-9]*\"/&gt;\n&lt;/suppressions&gt;\n</code></pre>\n\n<p>The value for \"<code>files</code>\" attribute is basically a regex for your source files, and the value for the \"<code>checks</code>\" attribute is regex for what checks to skip (\"<code>[a-zA-Z0-9]*</code>\" basically means skip everything). This is the pattern you're looking for I guess?</p>\n"},{"tags":[],"owner":{"account_id":25060,"reputation":9771,"user_id":64138,"accept_rate":92,"display_name":"Alceu Costa"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1514998119,"creation_date":1245431610,"answer_id":1019054,"question_id":1012407,"body_markdown":"I was able to suppress the checks in a file by adding the SuppressionCommentFilter tag in my checks.xml:\r\n\r\nFirst, I added the FileContentHolder tag as a child of TreeWalker tag (this step is *not* needed since version 8.1 of com.puppycrawl.tools:checkstyle):\r\n\r\n    &lt;module name=&quot;TreeWalker&quot;&gt;\r\n        ...\r\n        &lt;module name=&quot;FileContentsHolder&quot;/&gt;\r\n        ...\r\n    &lt;/module&gt;\r\n\r\nThen I added the SuppressionCommentFilter in the checks.xml (since version 8.1 of com.puppycrawl.tools:checkstyle - under &quot;TreeWalker&quot; node):\r\n\r\n    &lt;module name=&quot;SuppressionCommentFilter&quot;/&gt;\r\n\r\nIn each file that I wanted to suppress the checks I inserted the following comment in the first line of the file:\r\n\r\n    // CHECKSTYLE:OFF","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>I was able to suppress the checks in a file by adding the SuppressionCommentFilter tag in my checks.xml:</p>\n\n<p>First, I added the FileContentHolder tag as a child of TreeWalker tag (this step is <em>not</em> needed since version 8.1 of com.puppycrawl.tools:checkstyle):</p>\n\n<pre><code>&lt;module name=\"TreeWalker\"&gt;\n    ...\n    &lt;module name=\"FileContentsHolder\"/&gt;\n    ...\n&lt;/module&gt;\n</code></pre>\n\n<p>Then I added the SuppressionCommentFilter in the checks.xml (since version 8.1 of com.puppycrawl.tools:checkstyle - under \"TreeWalker\" node):</p>\n\n<pre><code>&lt;module name=\"SuppressionCommentFilter\"/&gt;\n</code></pre>\n\n<p>In each file that I wanted to suppress the checks I inserted the following comment in the first line of the file:</p>\n\n<pre><code>// CHECKSTYLE:OFF\n</code></pre>\n"},{"tags":[],"owner":{"account_id":974375,"reputation":720,"user_id":996128,"accept_rate":57,"display_name":"Inxsible"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1330033900,"creation_date":1330033900,"answer_id":9421946,"question_id":1012407,"body_markdown":"aberrant80&#39;s answer helped a lot. With the help of his hint - using regex pattern matching, I was also able to suppress checkstyle for an entire package by adding this to the checkstyle-suppressions.xml file.\r\nFor eg. to skip checkstyle checks on all auto generated java files under the jaxb package,\r\n\r\n        &lt;suppressions&gt;\r\n            &lt;suppress checks=&quot;[a-zA-Z0-9]*&quot; files=&quot;[\\\\/]jaxb[\\\\/]&quot; /&gt;\r\n        &lt;/suppressions&gt;\r\n\r\n","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>aberrant80's answer helped a lot. With the help of his hint - using regex pattern matching, I was also able to suppress checkstyle for an entire package by adding this to the checkstyle-suppressions.xml file.\nFor eg. to skip checkstyle checks on all auto generated java files under the jaxb package,</p>\n\n<pre><code>    &lt;suppressions&gt;\n        &lt;suppress checks=\"[a-zA-Z0-9]*\" files=\"[\\\\/]jaxb[\\\\/]\" /&gt;\n    &lt;/suppressions&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1516174561,"creation_date":1516174561,"answer_id":48295843,"question_id":1012407,"body_markdown":"@aberrant80&#39;s answer is very inspiring although it didn&#39;t work in my project. In order to suppress any warnings that checkstyle looks for in Foo.java, according to [link][1], if maven is used:\r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n        ...\r\n    \t\t&lt;configuration&gt;\r\n    \t\t\t...\r\n    \t\t\t&lt;configLocation&gt;checkstyle.xml&lt;/configLocation&gt;\r\n    \t\t\t&lt;suppressionsLocation&gt;checkstyle-suppressions.xml&lt;/suppressionsLocation&gt;\r\n    \t\t\t...\r\n    \t\t&lt;/configuration&gt;\t\t\t\t\r\n    \t...\r\n    &lt;/plugin&gt;\r\n\r\nAnd in *checkstyle-suppressions.xml*\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n    &lt;!DOCTYPE suppressions PUBLIC &quot;-//Puppy Crawl//DTD Suppressions 1.1//EN&quot; &quot;http://www.puppycrawl.com/dtds/suppressions_1_1.dtd&quot;&gt;\r\n    &lt;suppressions&gt;\r\n        &lt;suppress files=&quot;Foo.java&quot; checks=&quot;[a-zA-Z0-9]*&quot; /&gt;\r\n    &lt;/suppressions&gt;\r\n\r\nSo far the highest version is 1.1 (1.2 does not exist).\r\n  [1]: http://maven.apache.org/plugins/maven-checkstyle-plugin/examples/suppressions-filter.html\r\n","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>@aberrant80's answer is very inspiring although it didn't work in my project. In order to suppress any warnings that checkstyle looks for in Foo.java, according to <a href=\"http://maven.apache.org/plugins/maven-checkstyle-plugin/examples/suppressions-filter.html\" rel=\"nofollow noreferrer\">link</a>, if maven is used:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n    ...\n        &lt;configuration&gt;\n            ...\n            &lt;configLocation&gt;checkstyle.xml&lt;/configLocation&gt;\n            &lt;suppressionsLocation&gt;checkstyle-suppressions.xml&lt;/suppressionsLocation&gt;\n            ...\n        &lt;/configuration&gt;                \n    ...\n&lt;/plugin&gt;\n</code></pre>\n\n<p>And in <em>checkstyle-suppressions.xml</em></p>\n\n\n\n<pre><code>&lt;!DOCTYPE suppressions PUBLIC \"-//Puppy Crawl//DTD Suppressions 1.1//EN\" \"http://www.puppycrawl.com/dtds/suppressions_1_1.dtd\"&gt;\n&lt;suppressions&gt;\n    &lt;suppress files=\"Foo.java\" checks=\"[a-zA-Z0-9]*\" /&gt;\n&lt;/suppressions&gt;\n</code></pre>\n\n<p>So far the highest version is 1.1 (1.2 does not exist).</p>\n"}],"owner":{"account_id":25060,"reputation":9771,"user_id":64138,"accept_rate":92,"display_name":"Alceu Costa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78400,"favorite_count":0,"down_vote_count":0,"up_vote_count":64,"accepted_answer_id":1016550,"answer_count":7,"score":64,"last_activity_date":1691573761,"creation_date":1245328594,"question_id":1012407,"body_markdown":"I&#39;m doing an override for a third party class and I want to suppress all checks for it (since I&#39;m only keeping it around until the patch is accepted).\r\n\r\nIs there a way to suppress all checks for a file?\r\n\r\nI tried using &quot;*&quot; but that fails.\r\n\r\n&lt;suppress checks=&quot;[What do I put in here to suppress all checks?]&quot; files=&quot;MyClass.java&quot;/&gt;","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>I'm doing an override for a third party class and I want to suppress all checks for it (since I'm only keeping it around until the patch is accepted).</p>\n\n<p>Is there a way to suppress all checks for a file?</p>\n\n<p>I tried using \"*\" but that fails.</p>\n\n<p></p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":6886591,"reputation":12914,"user_id":5291448,"display_name":"Glennie Helles Sindholt"},"score":0,"creation_date":1448952436,"post_id":34012106,"comment_id":55783919,"body_markdown":"Please provide a [Minimal, Complete, and Verifiable example](http://stackoverflow.com/help/mcve). Is your dataframe sorted?","body":"Please provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Is your dataframe sorted?"}],"answers":[{"tags":[],"owner":{"account_id":486774,"reputation":1655,"user_id":1095742,"display_name":"Ewan Leith"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1448963434,"creation_date":1448963434,"answer_id":34017333,"question_id":34012106,"body_markdown":"I&#39;m not sure what you&#39;re really hoping to achieve this way, but if you&#39;re in Spark 1.5 you could do something like this using [monotonicallyIncreasingId](https://issues.apache.org/jira/browse/SPARK-7135):\r\n\r\n    val df4000 = df.sort(monotonicallyIncreasingId().desc).limit(4000)\r\n\r\nwhich will sort in a descending order by the ID for each row in the dataframe, then limit the results to the first 4000.\r\n\r\nOtherwise you could do the same using any column that you know increases consistently.\r\n\r\n","title":"spark dataframe how to get the latest n rows using java","body":"<p>I'm not sure what you're really hoping to achieve this way, but if you're in Spark 1.5 you could do something like this using <a href=\"https://issues.apache.org/jira/browse/SPARK-7135\" rel=\"nofollow\">monotonicallyIncreasingId</a>:</p>\n\n<pre><code>val df4000 = df.sort(monotonicallyIncreasingId().desc).limit(4000)\n</code></pre>\n\n<p>which will sort in a descending order by the ID for each row in the dataframe, then limit the results to the first 4000.</p>\n\n<p>Otherwise you could do the same using any column that you know increases consistently.</p>\n"},{"tags":[],"owner":{"account_id":436137,"reputation":3180,"user_id":823112,"accept_rate":95,"display_name":"Quentin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691573228,"creation_date":1691573228,"answer_id":76866342,"question_id":34012106,"body_markdown":"Starting with spark 3.4 you can use `OFFSET` to skip the first N rows.\r\nIn your case, you could count the total number of rows and then skip the beginning, something like this:\r\n\r\n\r\n```\r\nval count = df.count()\r\ndf = spark.sql(s&#39;select * from your_df OFFSET ${count-4000}&#39;)\r\n```\r\n\r\nNote that this is not deterministic if you don&#39;t have an `ORDER BY`  clause","title":"spark dataframe how to get the latest n rows using java","body":"<p>Starting with spark 3.4 you can use <code>OFFSET</code> to skip the first N rows.\nIn your case, you could count the total number of rows and then skip the beginning, something like this:</p>\n<pre><code>val count = df.count()\ndf = spark.sql(s'select * from your_df OFFSET ${count-4000}')\n</code></pre>\n<p>Note that this is not deterministic if you don't have an <code>ORDER BY</code>  clause</p>\n"}],"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3049,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":34017333,"answer_count":2,"score":0,"last_activity_date":1691573228,"creation_date":1448940692,"question_id":34012106,"body_markdown":"I am new in Spark. Right now I am trying to join two DataFrames together. I want to keep my dataframes in 5000 rows. Since my first dataframe has already get 5000 rows, I need to get latest 4000 rows as my second dataframe has 1000 rows. Can someone help me on how to get a dataframe with the latest 4000 rows in the first dataframe? Thanks in advance.","title":"spark dataframe how to get the latest n rows using java","body":"<p>I am new in Spark. Right now I am trying to join two DataFrames together. I want to keep my dataframes in 5000 rows. Since my first dataframe has already get 5000 rows, I need to get latest 4000 rows as my second dataframe has 1000 rows. Can someone help me on how to get a dataframe with the latest 4000 rows in the first dataframe? Thanks in advance.</p>\n"},{"tags":["java","spring-integration","redisson","distributed-lock","spring-integration-distributed-lock"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691519931,"creation_date":1691504889,"answer_id":76860519,"question_id":76856466,"body_markdown":"I believe there are might be other, different approaches to implement distributed locks. \r\n\r\nIf you look into the `RedisLockRegistry` of Spring Integration, you&#39;ll see that it is similar to the `JdbcLockRegistry` and there is a local guard with a `ReentrantLock`. So, all the interactions within the same process follow the standard Java Lock algorithm. As I explained to you in that issue: the TTL is really for losing dead locks in a distributed environment. On the other hand, you cannot predict how long your process is going to hold the lock, so releasing it prematurely because of some `leaseTime` may lead to inconsistency in your system where you&#39;d expect to be guarded by the lock.\r\n\r\nI&#39;m not sure what your goal is with this locks exercise.","title":"Spring Integration Distributed Locks: conceptual consistency of TTL as compared to Redisson&#39;s lease time","body":"<p>I believe there are might be other, different approaches to implement distributed locks.</p>\n<p>If you look into the <code>RedisLockRegistry</code> of Spring Integration, you'll see that it is similar to the <code>JdbcLockRegistry</code> and there is a local guard with a <code>ReentrantLock</code>. So, all the interactions within the same process follow the standard Java Lock algorithm. As I explained to you in that issue: the TTL is really for losing dead locks in a distributed environment. On the other hand, you cannot predict how long your process is going to hold the lock, so releasing it prematurely because of some <code>leaseTime</code> may lead to inconsistency in your system where you'd expect to be guarded by the lock.</p>\n<p>I'm not sure what your goal is with this locks exercise.</p>\n"},{"tags":[],"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691572555,"creation_date":1691572555,"answer_id":76866253,"question_id":76856466,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3OmUs.png\r\n\r\n\r\n↑ This is my interpretation.\r\n\r\nIn the case of Spring Integration, Bob is denied the lock because it values the fact that Alice might still be using it more than the fact that more than 20 seconds have passed. This reduces the chance of interrupting Alice&#39;s work.\r\n\r\nIn contrast, Redisson grants the lock to Bob, prioritizing the expiration of the lock duration over the possibility that Alice is still using it. This provides more consistent behavior for lease time.","title":"Spring Integration Distributed Locks: conceptual consistency of TTL as compared to Redisson&#39;s lease time","body":"<p><a href=\"https://i.stack.imgur.com/3OmUs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3OmUs.png\" alt=\"enter image description here\" /></a></p>\n<p>↑ This is my interpretation.</p>\n<p>In the case of Spring Integration, Bob is denied the lock because it values the fact that Alice might still be using it more than the fact that more than 20 seconds have passed. This reduces the chance of interrupting Alice's work.</p>\n<p>In contrast, Redisson grants the lock to Bob, prioritizing the expiration of the lock duration over the possibility that Alice is still using it. This provides more consistent behavior for lease time.</p>\n"}],"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":320,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691572555,"creation_date":1691468208,"question_id":76856466,"body_markdown":"This is a follow up question of: https://github.com/spring-projects/spring-integration/issues/8687\r\n\r\nAs discussed in the above link, Spring Integration Distributed Lock&#39;s concept of TTL is meant for cross-process only, not for threads in the same process.\r\n\r\nLater I have tried Redisson, it has a concept of lease time in its RLock:\r\n\r\n```java\r\n\r\n    /**\r\n     * Tries to acquire the lock with defined &lt;code&gt;leaseTime&lt;/code&gt;.\r\n     * Waits up to defined &lt;code&gt;waitTime&lt;/code&gt; if necessary until the lock became available.\r\n     *\r\n     * Lock will be released automatically after defined &lt;code&gt;leaseTime&lt;/code&gt; interval.\r\n     *\r\n     * @param waitTime the maximum time to acquire the lock\r\n     * @param leaseTime lease time\r\n     * @param unit time unit\r\n     * @return &lt;code&gt;true&lt;/code&gt; if lock is successfully acquired,\r\n     *          otherwise &lt;code&gt;false&lt;/code&gt; if lock is already set.\r\n     * @throws InterruptedException - if the thread is interrupted\r\n     */\r\n    boolean tryLock(long waitTime, long leaseTime, TimeUnit unit) throws InterruptedException;\r\n```\r\n\r\nhttps://github.com/redisson/redisson/blob/c2c00a07c279d55d627717fbb290426e19744a65/redisson/src/main/java/org/redisson/api/RLock.java#L55\r\n\r\n**I think these 2 concepts TTL and lease time are similar (correct me if I am wrong).**\r\n\r\nBut **lease time of Redisson works in a consistent way** for both **cross-process** and **threads in same process**, while **TTL** of spring integration does **not**.\r\n\r\n\r\nThe following junit test can reproduce what I mean:\r\nhttps://github.com/cuipengfei/Spikes/blob/22a9896137dd62bda5f030f5a3d33c67fba67310/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java#L38C9-L49\r\n\r\n```shell\r\ndocker run -p 6379:6379 -d redis:7.0.12 --requirepass &quot;mypass&quot;\r\n\r\ndocker run -e POSTGRES_USER=localtest -e POSTGRES_PASSWORD=localtest -e POSTGRES_DB=orders -p 5432:5432 -d postgres:15.3\r\n\r\n# start this docker container before running the above junit test\r\n```\r\n\r\nand change mode to compare: https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/resources/application.properties#L16-L17\r\n```\r\nlock.registry.name=redisson\r\n# change this line to redis / jdbc / redisson then run test\r\n```\r\n\r\nWhen running the test in Redis/jdbc mode of spring integration, **thread 2 can not get the lock even after TTL**.\r\n\r\nWhile running the test in Redisson mode, **thread 2 can get the lock after lease time has past**, which I think makes more sense conceptually.\r\n\r\nWhat are the **design considerations** behind TTL/lease time that **led to different choices**?","title":"Spring Integration Distributed Locks: conceptual consistency of TTL as compared to Redisson&#39;s lease time","body":"<p>This is a follow up question of: <a href=\"https://github.com/spring-projects/spring-integration/issues/8687\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-integration/issues/8687</a></p>\n<p>As discussed in the above link, Spring Integration Distributed Lock's concept of TTL is meant for cross-process only, not for threads in the same process.</p>\n<p>Later I have tried Redisson, it has a concept of lease time in its RLock:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    /**\n     * Tries to acquire the lock with defined &lt;code&gt;leaseTime&lt;/code&gt;.\n     * Waits up to defined &lt;code&gt;waitTime&lt;/code&gt; if necessary until the lock became available.\n     *\n     * Lock will be released automatically after defined &lt;code&gt;leaseTime&lt;/code&gt; interval.\n     *\n     * @param waitTime the maximum time to acquire the lock\n     * @param leaseTime lease time\n     * @param unit time unit\n     * @return &lt;code&gt;true&lt;/code&gt; if lock is successfully acquired,\n     *          otherwise &lt;code&gt;false&lt;/code&gt; if lock is already set.\n     * @throws InterruptedException - if the thread is interrupted\n     */\n    boolean tryLock(long waitTime, long leaseTime, TimeUnit unit) throws InterruptedException;\n</code></pre>\n<p><a href=\"https://github.com/redisson/redisson/blob/c2c00a07c279d55d627717fbb290426e19744a65/redisson/src/main/java/org/redisson/api/RLock.java#L55\" rel=\"nofollow noreferrer\">https://github.com/redisson/redisson/blob/c2c00a07c279d55d627717fbb290426e19744a65/redisson/src/main/java/org/redisson/api/RLock.java#L55</a></p>\n<p><strong>I think these 2 concepts TTL and lease time are similar (correct me if I am wrong).</strong></p>\n<p>But <strong>lease time of Redisson works in a consistent way</strong> for both <strong>cross-process</strong> and <strong>threads in same process</strong>, while <strong>TTL</strong> of spring integration does <strong>not</strong>.</p>\n<p>The following junit test can reproduce what I mean:\n<a href=\"https://github.com/cuipengfei/Spikes/blob/22a9896137dd62bda5f030f5a3d33c67fba67310/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java#L38C9-L49\" rel=\"nofollow noreferrer\">https://github.com/cuipengfei/Spikes/blob/22a9896137dd62bda5f030f5a3d33c67fba67310/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java#L38C9-L49</a></p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker run -p 6379:6379 -d redis:7.0.12 --requirepass &quot;mypass&quot;\n\ndocker run -e POSTGRES_USER=localtest -e POSTGRES_PASSWORD=localtest -e POSTGRES_DB=orders -p 5432:5432 -d postgres:15.3\n\n# start this docker container before running the above junit test\n</code></pre>\n<p>and change mode to compare: <a href=\"https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/resources/application.properties#L16-L17\" rel=\"nofollow noreferrer\">https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/resources/application.properties#L16-L17</a></p>\n<pre><code>lock.registry.name=redisson\n# change this line to redis / jdbc / redisson then run test\n</code></pre>\n<p>When running the test in Redis/jdbc mode of spring integration, <strong>thread 2 can not get the lock even after TTL</strong>.</p>\n<p>While running the test in Redisson mode, <strong>thread 2 can get the lock after lease time has past</strong>, which I think makes more sense conceptually.</p>\n<p>What are the <strong>design considerations</strong> behind TTL/lease time that <strong>led to different choices</strong>?</p>\n"},{"tags":["java","rest-assured","api-authorization"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1691568486,"post_id":76865753,"comment_id":135507733,"body_markdown":"Welcome to Stack Overflow. Why have you got tag references randomly in your post? Please don&#39;t do that. Also, please remove fluff like &quot;Hi Team&quot; and &quot;Greetings&quot; - it&#39;s unnecessary, and reduces the useful information shown in the questions list.","body":"Welcome to Stack Overflow. Why have you got tag references randomly in your post? Please don&#39;t do that. Also, please remove fluff like &quot;Hi Team&quot; and &quot;Greetings&quot; - it&#39;s unnecessary, and reduces the useful information shown in the questions list."},{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1691632887,"post_id":76865753,"comment_id":135518951,"body_markdown":"Cannot reproduce this issue. Basically, 401 means you&#39;re not authenticated, your token is invalid. 403 means you&#39;re authenticated but don&#39;t have permissions needed to do the action.","body":"Cannot reproduce this issue. Basically, 401 means you&#39;re not authenticated, your token is invalid. 403 means you&#39;re authenticated but don&#39;t have permissions needed to do the action."}],"owner":{"account_id":29189289,"reputation":1,"user_id":22361710,"display_name":"Meghana Ingale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691572343,"creation_date":1691568366,"question_id":76865753,"body_markdown":"Greetings!\r\n\r\nI am working on automating dummy POST API request with Authorization.\r\n\r\nPlease check below details for the same,\r\n\r\n**Code:-\r\n```java\r\nRestAssured.baseURI=&quot;http://restapi.adequateshop.com/api/users&quot;;\r\nString jsonBody = &quot;{\\&quot;tourist_name\\&quot;:\\&quot;Mike\\&quot;,\\&quot;tourist_email\\&quot;:\\&quot;mxyz5676@gmail.com\\&quot;,\\&quot;tourist_location\\&quot;:\\&quot;Paris\\&quot;}&quot;;\t\r\nString token=&quot;433tc02b-b5c1-4bd8-836a-618cdc31c492&quot;;\r\n\t\r\n\t\r\nResponse response = RestAssured.given()\r\n             .header(&quot;Authorization&quot;, &quot;Bearer &quot; + token)\r\n             .header(&quot;User-Agent&quot;, &quot;PostmanRuntime/7.32.3&quot;)\r\n             .header(&quot;Accept&quot;, &quot;*/*&quot;)\r\n             .header(&quot;Connection&quot;, &quot;keep-alive&quot;)\r\n             .body(jsonBody)\r\n            .post(&quot;http://restapi.adequateshop.com/api/users&quot;);\r\n\r\nint statusCode = response.getStatusCode();\r\nString responseBody = response.getBody().asString();\r\nSystem.out.println(&quot;Response Code: &quot; + statusCode);\r\n\r\nSystem.out.println(&quot;Response Body: &quot; + responseBody);\r\n```\r\nAfter execution, received 401 Response and expected response is 201.\r\n\r\nThis same API is working with POSTMAN and received 201 response.\r\n\r\nPlease check below POSTMAN screenshots for API collection details,\r\n\r\n[enter image description here](https://i.stack.imgur.com/jMmtC.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/nsahF.png)\r\n\r\nPlease guide me how to resolve this?\r\n\r\n\r\nI tried above code but getting 403 response code.\r\nHow to resolve this issue?","title":"Regrading automating RESTASSURED POST API request with Authorization","body":"<p>Greetings!</p>\n<p>I am working on automating dummy POST API request with Authorization.</p>\n<p>Please check below details for the same,</p>\n<p>**Code:-</p>\n<pre class=\"lang-java prettyprint-override\"><code>RestAssured.baseURI=&quot;http://restapi.adequateshop.com/api/users&quot;;\nString jsonBody = &quot;{\\&quot;tourist_name\\&quot;:\\&quot;Mike\\&quot;,\\&quot;tourist_email\\&quot;:\\&quot;mxyz5676@gmail.com\\&quot;,\\&quot;tourist_location\\&quot;:\\&quot;Paris\\&quot;}&quot;;    \nString token=&quot;433tc02b-b5c1-4bd8-836a-618cdc31c492&quot;;\n    \n    \nResponse response = RestAssured.given()\n             .header(&quot;Authorization&quot;, &quot;Bearer &quot; + token)\n             .header(&quot;User-Agent&quot;, &quot;PostmanRuntime/7.32.3&quot;)\n             .header(&quot;Accept&quot;, &quot;*/*&quot;)\n             .header(&quot;Connection&quot;, &quot;keep-alive&quot;)\n             .body(jsonBody)\n            .post(&quot;http://restapi.adequateshop.com/api/users&quot;);\n\nint statusCode = response.getStatusCode();\nString responseBody = response.getBody().asString();\nSystem.out.println(&quot;Response Code: &quot; + statusCode);\n\nSystem.out.println(&quot;Response Body: &quot; + responseBody);\n</code></pre>\n<p>After execution, received 401 Response and expected response is 201.</p>\n<p>This same API is working with POSTMAN and received 201 response.</p>\n<p>Please check below POSTMAN screenshots for API collection details,</p>\n<p><a href=\"https://i.stack.imgur.com/jMmtC.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/nsahF.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Please guide me how to resolve this?</p>\n<p>I tried above code but getting 403 response code.\nHow to resolve this issue?</p>\n"},{"tags":["java","android","loops","animation","vector"],"answers":[{"tags":[],"owner":{"account_id":1478985,"reputation":9005,"user_id":1388737,"display_name":"Abdullah"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1500283945,"creation_date":1500283945,"answer_id":45140590,"question_id":44711131,"body_markdown":"You can use [Animatable2.AnimationCallback][1] and start the AnimatedVectorDrawable animation again in onAnimationEnd\r\n\r\n    \r\n    drawable.registerAnimationCallback(new Animatable2.AnimationCallback() {\r\n        @Override\r\n        public void onAnimationEnd(Drawable drawable) {\r\n            avd.start();\r\n        }\r\n    });\r\n    \r\n    drawable.start();\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/graphics/drawable/Animatable2.AnimationCallback.html","title":"Android: AnimatedVectorDrawable Loop","body":"<p>You can use <a href=\"https://developer.android.com/reference/android/graphics/drawable/Animatable2.AnimationCallback.html\" rel=\"noreferrer\">Animatable2.AnimationCallback</a> and start the AnimatedVectorDrawable animation again in onAnimationEnd</p>\n\n<pre><code>drawable.registerAnimationCallback(new Animatable2.AnimationCallback() {\n    @Override\n    public void onAnimationEnd(Drawable drawable) {\n        avd.start();\n    }\n});\n\ndrawable.start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7865758,"reputation":327,"user_id":5944623,"display_name":"Vempati Satya Suryanarayana"},"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1507623539,"creation_date":1507623539,"answer_id":46661804,"question_id":44711131,"body_markdown":"There are two ways in which you can use AnimatedVectorDrawable. One is by using a single file for all XML part. Second is using three separate files - one for the Vector part, second for the Animator part and the third for the AnimatedVectorDrawable part which joins the first two.\r\n\r\nIn my case I tried to use the single XML file alternative. But I had problems and lot of time was going in it. So I shifted to the second alternative i.e., three XML files alternative. It is working fine. Below I am explaining how you do it.\r\n\r\nI dearly wished to give the code. But, I am not able to post the code due to some problem with indentation which the system at (stackoverflow) has not accepted.\r\n\r\nUnder AnimatedVectorDrawable class examples of all the three files are given in the android developer site.\r\n\r\nI assume you want to do path morphing on two objects on the screen.\r\n\r\nFor path morphing on each path element in the VectorDrawable file there will be two pathData - from which to morph and to which to morph. So for two path elements in VectorDrawable file there will be 4 pathData which you can put under strings file with names like my_path_from1 my_path_to1, my_path_from2 and my_path_to2.\r\n\r\nIn vector drawable file the root element is vector under that you can place your two path elements - one for each object on the screen . Under these path elements you give attributes like strokeWidth, strokeColor pathData and a name. . This vector drawable file should be placed under res/drawable folder.\r\n\r\nThe second one is the animator file. this file should be placed under res/animator folder. You can have set as root element under which you can have one objectAnimator element in your present case. In this you give duration and pathData from which and pathData to which to do the morphing. These you give under attributes &quot;android:valueFrom&quot; and &quot; android:valueTo&quot; . You may create two animator files because &quot;from&quot; &quot;to&quot; pathData are different for the two path elements in the VectorDrawable file.\r\n\r\nIn the animated vector drawable file give two targets. Under each target the android:name is name of one of the path elements inthe VectorDrawable file. And under android:animation you give name of one of the animator files , i.e., say for first target you give android:animation =&quot;@animator/first_animator&quot;. Similarlly for the second. Now because the two targets are in the same file both targets animate simultaneously. Both animations work on two different sets of path data because the two animation files are also different.\r\n\r\nIn the java code findViewById your ImageView. If you inflated it as View then you will have to type cast it as imageview. Then getDrawable from the image view. Now if drawable instanceOf Animatable then drawable.start().\r\n\r\nHope this helps you.\r\n\r\nFor a very good understanding of these animations you may please refer to &quot;introduction to icon animation techniques&quot; This is at\r\n\r\nhttp://www.androiddesignpatterns.com/2016/11/introduction-to-icon-animation-techniques.html\r\n\r\nHope this helps you.","title":"Android: AnimatedVectorDrawable Loop","body":"<p>There are two ways in which you can use AnimatedVectorDrawable. One is by using a single file for all XML part. Second is using three separate files - one for the Vector part, second for the Animator part and the third for the AnimatedVectorDrawable part which joins the first two.</p>\n\n<p>In my case I tried to use the single XML file alternative. But I had problems and lot of time was going in it. So I shifted to the second alternative i.e., three XML files alternative. It is working fine. Below I am explaining how you do it.</p>\n\n<p>I dearly wished to give the code. But, I am not able to post the code due to some problem with indentation which the system at (stackoverflow) has not accepted.</p>\n\n<p>Under AnimatedVectorDrawable class examples of all the three files are given in the android developer site.</p>\n\n<p>I assume you want to do path morphing on two objects on the screen.</p>\n\n<p>For path morphing on each path element in the VectorDrawable file there will be two pathData - from which to morph and to which to morph. So for two path elements in VectorDrawable file there will be 4 pathData which you can put under strings file with names like my_path_from1 my_path_to1, my_path_from2 and my_path_to2.</p>\n\n<p>In vector drawable file the root element is vector under that you can place your two path elements - one for each object on the screen . Under these path elements you give attributes like strokeWidth, strokeColor pathData and a name. . This vector drawable file should be placed under res/drawable folder.</p>\n\n<p>The second one is the animator file. this file should be placed under res/animator folder. You can have set as root element under which you can have one objectAnimator element in your present case. In this you give duration and pathData from which and pathData to which to do the morphing. These you give under attributes \"android:valueFrom\" and \" android:valueTo\" . You may create two animator files because \"from\" \"to\" pathData are different for the two path elements in the VectorDrawable file.</p>\n\n<p>In the animated vector drawable file give two targets. Under each target the android:name is name of one of the path elements inthe VectorDrawable file. And under android:animation you give name of one of the animator files , i.e., say for first target you give android:animation =\"@animator/first_animator\". Similarlly for the second. Now because the two targets are in the same file both targets animate simultaneously. Both animations work on two different sets of path data because the two animation files are also different.</p>\n\n<p>In the java code findViewById your ImageView. If you inflated it as View then you will have to type cast it as imageview. Then getDrawable from the image view. Now if drawable instanceOf Animatable then drawable.start().</p>\n\n<p>Hope this helps you.</p>\n\n<p>For a very good understanding of these animations you may please refer to \"introduction to icon animation techniques\" This is at</p>\n\n<p><a href=\"http://www.androiddesignpatterns.com/2016/11/introduction-to-icon-animation-techniques.html\" rel=\"nofollow noreferrer\">http://www.androiddesignpatterns.com/2016/11/introduction-to-icon-animation-techniques.html</a></p>\n\n<p>Hope this helps you.</p>\n"},{"tags":[],"owner":{"account_id":8697487,"reputation":225,"user_id":6508436,"display_name":"Ustaad UST"},"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1525853582,"creation_date":1525853582,"answer_id":50248536,"question_id":44711131,"body_markdown":"use property in your objectAnimator\r\n\r\n    android:repeatMode=&quot;restart&quot;\r\n        android:repeatCount=&quot;infinite&quot;\r\n        \r\nyour object is like that\r\n\r\n     &lt;objectAnimator\r\n        android:propertyName=&quot;pathData&quot;\r\n        android:duration=&quot;1000&quot;\r\n        android:valueFrom=&quot;path value&quot;\r\n        android:valueTo=&quot;some value&quot;\r\n        android:valueType=&quot;pathType&quot;\r\n        android:repeatMode=&quot;restart&quot;\r\n        android:repeatCount=&quot;infinite&quot;\r\n        android:interpolator=&quot;@android:anim/overshoot_interpolator&quot;/&gt;","title":"Android: AnimatedVectorDrawable Loop","body":"<p>use property in your objectAnimator</p>\n\n<pre><code>android:repeatMode=\"restart\"\n    android:repeatCount=\"infinite\"\n</code></pre>\n\n<p>your object is like that</p>\n\n<pre><code> &lt;objectAnimator\n    android:propertyName=\"pathData\"\n    android:duration=\"1000\"\n    android:valueFrom=\"path value\"\n    android:valueTo=\"some value\"\n    android:valueType=\"pathType\"\n    android:repeatMode=\"restart\"\n    android:repeatCount=\"infinite\"\n    android:interpolator=\"@android:anim/overshoot_interpolator\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5768402,"reputation":334,"user_id":4552585,"display_name":"Feryal Sharifzadeh"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1691571867,"creation_date":1526475016,"answer_id":50371439,"question_id":44711131,"body_markdown":"You should use `AnimatedVectorDrawableCompat` instead of `AnimatedVectorDrawable` to support lower APIs, then you can also write that callback and start the animation when it ends.\r\nFinally, your code should be like this:\r\n\r\n```\r\n    val animated = AnimatedVectorDrawableCompat.create(this, R.drawable.avd_dice)\r\n        animated?.registerAnimationCallback(object : Animatable2Compat.AnimationCallback() {\r\n            override fun onAnimationEnd(drawable: Drawable?) {\r\n                animated.start()\r\n            }\r\n\r\n        })\r\n        animationView.setImageDrawable(animated)\r\n        animated?.start()\r\n```","title":"Android: AnimatedVectorDrawable Loop","body":"<p>You should use <code>AnimatedVectorDrawableCompat</code> instead of <code>AnimatedVectorDrawable</code> to support lower APIs, then you can also write that callback and start the animation when it ends.\nFinally, your code should be like this:</p>\n<pre><code>    val animated = AnimatedVectorDrawableCompat.create(this, R.drawable.avd_dice)\n        animated?.registerAnimationCallback(object : Animatable2Compat.AnimationCallback() {\n            override fun onAnimationEnd(drawable: Drawable?) {\n                animated.start()\n            }\n\n        })\n        animationView.setImageDrawable(animated)\n        animated?.start()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15164,"reputation":23711,"user_id":31751,"accept_rate":80,"display_name":"scottyab"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1559316324,"creation_date":1559316324,"answer_id":56397846,"question_id":44711131,"body_markdown":"Using @Feryal Sharifzadeh great answer as a base, here&#39;s a Kotlin ext function for setting and looping a AVD. \r\n\r\n    internal fun ImageView.applyLoopingAnimatedVectorDrawable(@DrawableRes avdResId: Int) {\r\n        val animated = AnimatedVectorDrawableCompat.create(context, avdResId)\r\n        animated?.registerAnimationCallback(object : Animatable2Compat.AnimationCallback() {\r\n            override fun onAnimationEnd(drawable: Drawable?) {\r\n                this@applyLoopingAnimatedVectorDrawable.post { animated.start() }\r\n            }\r\n        })\r\n        this.setImageDrawable(animated)\r\n        animated?.start()\r\n    }","title":"Android: AnimatedVectorDrawable Loop","body":"<p>Using @Feryal Sharifzadeh great answer as a base, here's a Kotlin ext function for setting and looping a AVD. </p>\n\n<pre><code>internal fun ImageView.applyLoopingAnimatedVectorDrawable(@DrawableRes avdResId: Int) {\n    val animated = AnimatedVectorDrawableCompat.create(context, avdResId)\n    animated?.registerAnimationCallback(object : Animatable2Compat.AnimationCallback() {\n        override fun onAnimationEnd(drawable: Drawable?) {\n            this@applyLoopingAnimatedVectorDrawable.post { animated.start() }\n        }\n    })\n    this.setImageDrawable(animated)\n    animated?.start()\n}\n</code></pre>\n"}],"owner":{"account_id":3702114,"reputation":241,"user_id":3081504,"display_name":"Calomancer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15183,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"answer_count":5,"score":24,"last_activity_date":1691571867,"creation_date":1498176490,"question_id":44711131,"body_markdown":"I&#39;m playing around with AnimatedVectorDrawables using https://shapeshifter.design/ The exported file I got is below. My research Tells me that in order to loop an animations i should add *android:repeatCount=&quot;infinite&quot;* and *android:repeatMode=&quot;restart&quot;* to the objectAnimator. \r\n\r\nAdding this to the objectAnimator only repeats one of these items out of series. **How would I loop the entire series of animations?** I want the animation to start on load and repeat.\r\n\r\nAnimation XML\r\n--------------\r\n\r\n    &lt;animated-vector\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;&gt;\r\n        &lt;aapt:attr name=&quot;android:drawable&quot;&gt;\r\n            &lt;vector\r\n                xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;50dp&quot;\r\n                android:height=&quot;50dp&quot;\r\n                android:viewportWidth=&quot;50&quot;\r\n                android:viewportHeight=&quot;50&quot;&gt;\r\n                &lt;path\r\n                    android:name=&quot;_x34_&quot;\r\n                    android:pathData=&quot;M 25 12.3 L 39.7 37.7 L 10.3 37.7 Z&quot;\r\n                    android:fillColor=&quot;#ffffff&quot;\r\n                    android:strokeColor=&quot;#000000&quot;\r\n                    android:strokeWidth=&quot;1&quot;\r\n                    android:strokeLineCap=&quot;round&quot;\r\n                    android:strokeLineJoin=&quot;round&quot;\r\n                    android:strokeMiterLimit=&quot;10&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/aapt:attr&gt;\r\n        &lt;target android:name=&quot;_x34_&quot;&gt;\r\n            &lt;aapt:attr name=&quot;android:animation&quot;&gt;\r\n                &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 25 12.3 L 39.7 37.7 L 10.3 37.7 L 17.397 25.437 Z&quot;\r\n                        android:valueTo=&quot;M 10 10 L 40 10 L 40 40 L 10 40 Z&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:anim/overshoot_interpolator&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;1000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 40 10 L 25.581 10 L 10 10 L 10 40 L 25.349 40 L 40 40 L 40 10&quot;\r\n                        android:valueTo=&quot;M 36.3 18.7 L 25 10.4 L 13.7 18.7 L 12.8 31.5 L 25 39.6 L 37.2 31.5 L 36.3 18.7&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:interpolator/fast_out_slow_in&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;2000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 36.3 18.7 L 25 10.4 L 13.7 18.7 L 12.8 31.5 L 25 39.6 L 37.2 31.5 Z&quot;\r\n                        android:valueTo=&quot;M 25 10.2 L 12.2 17.6 L 12.2 32.4 L 25 39.8 L 37.8 32.4 L 37.8 17.6 Z&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:anim/overshoot_interpolator&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;3000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 31.365 13.88 L 25 10.2 L 18.268 14.092 L 12.2 17.6 L 12.2 25.465 L 12.2 32.4 L 25 39.8 L 37.8 32.4 L 37.8 25.581 L 37.8 17.6 L 31.365 13.88&quot;\r\n                        android:valueTo=&quot;M 33.7 13 L 25 10.2 L 16.3 13 L 10.9 20.4 L 10.9 29.6 L 16.3 37 L 25 39.8 L 33.7 37 L 39.1 29.6 L 39.1 20.4 L 33.7 13&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:anim/decelerate_interpolator&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;4000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 39.1 20.4 L 33.7 13 L 25 10.2 L 16.3 13 L 10.9 20.4 L 10.9 29.6 L 16.3 37 L 25 39.8 L 33.7 37 L 39.1 29.6 L 39.1 20.4&quot;\r\n                        android:valueTo=&quot;M 39.7 20 L 32.199 16.173 L 25 12.5 L 17.885 16.13 L 10.3 20 L 10 31 L 16.994 34.031 L 25 37.5 L 32.948 34.056 L 40 31 L 39.7 20&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:interpolator/fast_out_slow_in&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;5000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 10.3 20 L 25 12.5 L 39.7 20 L 40 31 L 25 37.5 L 10 31 L 10.3 20&quot;\r\n                        android:valueTo=&quot;M 17.995 24.403 L 25 12.3 L 32.23 24.792 L 39.7 37.7 L 25.581 37.7 L 10.3 37.7 L 17.995 24.403&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:interpolator/fast_out_slow_in&quot;/&gt;\r\n                &lt;/set&gt;\r\n            &lt;/aapt:attr&gt;\r\n        &lt;/target&gt;\r\n    &lt;/animated-vector&gt;\r\n\r\nMy java code for implementing the Animation is as follows:\r\n----------------------------------------------------------\r\n\r\n    final ImageView animationView = (ImageView) findViewById(R.id.animationView);\r\n    final AnimatedVectorDrawable drawable = (AnimatedVectorDrawable) getDrawable(R.drawable.avd_dice);\r\n    animationView.setImageDrawable(drawable);\r\n    drawable.start();","title":"Android: AnimatedVectorDrawable Loop","body":"<p>I'm playing around with AnimatedVectorDrawables using <a href=\"https://shapeshifter.design/\" rel=\"noreferrer\">https://shapeshifter.design/</a> The exported file I got is below. My research Tells me that in order to loop an animations i should add <em>android:repeatCount=\"infinite\"</em> and <em>android:repeatMode=\"restart\"</em> to the objectAnimator. </p>\n\n<p>Adding this to the objectAnimator only repeats one of these items out of series. <strong>How would I loop the entire series of animations?</strong> I want the animation to start on load and repeat.</p>\n\n<h2>Animation XML</h2>\n\n<pre><code>&lt;animated-vector\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:aapt=\"http://schemas.android.com/aapt\"&gt;\n    &lt;aapt:attr name=\"android:drawable\"&gt;\n        &lt;vector\n            xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"50dp\"\n            android:height=\"50dp\"\n            android:viewportWidth=\"50\"\n            android:viewportHeight=\"50\"&gt;\n            &lt;path\n                android:name=\"_x34_\"\n                android:pathData=\"M 25 12.3 L 39.7 37.7 L 10.3 37.7 Z\"\n                android:fillColor=\"#ffffff\"\n                android:strokeColor=\"#000000\"\n                android:strokeWidth=\"1\"\n                android:strokeLineCap=\"round\"\n                android:strokeLineJoin=\"round\"\n                android:strokeMiterLimit=\"10\"/&gt;\n        &lt;/vector&gt;\n    &lt;/aapt:attr&gt;\n    &lt;target android:name=\"_x34_\"&gt;\n        &lt;aapt:attr name=\"android:animation\"&gt;\n            &lt;set xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 25 12.3 L 39.7 37.7 L 10.3 37.7 L 17.397 25.437 Z\"\n                    android:valueTo=\"M 10 10 L 40 10 L 40 40 L 10 40 Z\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:anim/overshoot_interpolator\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"1000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 40 10 L 25.581 10 L 10 10 L 10 40 L 25.349 40 L 40 40 L 40 10\"\n                    android:valueTo=\"M 36.3 18.7 L 25 10.4 L 13.7 18.7 L 12.8 31.5 L 25 39.6 L 37.2 31.5 L 36.3 18.7\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:interpolator/fast_out_slow_in\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"2000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 36.3 18.7 L 25 10.4 L 13.7 18.7 L 12.8 31.5 L 25 39.6 L 37.2 31.5 Z\"\n                    android:valueTo=\"M 25 10.2 L 12.2 17.6 L 12.2 32.4 L 25 39.8 L 37.8 32.4 L 37.8 17.6 Z\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:anim/overshoot_interpolator\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"3000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 31.365 13.88 L 25 10.2 L 18.268 14.092 L 12.2 17.6 L 12.2 25.465 L 12.2 32.4 L 25 39.8 L 37.8 32.4 L 37.8 25.581 L 37.8 17.6 L 31.365 13.88\"\n                    android:valueTo=\"M 33.7 13 L 25 10.2 L 16.3 13 L 10.9 20.4 L 10.9 29.6 L 16.3 37 L 25 39.8 L 33.7 37 L 39.1 29.6 L 39.1 20.4 L 33.7 13\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:anim/decelerate_interpolator\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"4000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 39.1 20.4 L 33.7 13 L 25 10.2 L 16.3 13 L 10.9 20.4 L 10.9 29.6 L 16.3 37 L 25 39.8 L 33.7 37 L 39.1 29.6 L 39.1 20.4\"\n                    android:valueTo=\"M 39.7 20 L 32.199 16.173 L 25 12.5 L 17.885 16.13 L 10.3 20 L 10 31 L 16.994 34.031 L 25 37.5 L 32.948 34.056 L 40 31 L 39.7 20\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:interpolator/fast_out_slow_in\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"5000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 10.3 20 L 25 12.5 L 39.7 20 L 40 31 L 25 37.5 L 10 31 L 10.3 20\"\n                    android:valueTo=\"M 17.995 24.403 L 25 12.3 L 32.23 24.792 L 39.7 37.7 L 25.581 37.7 L 10.3 37.7 L 17.995 24.403\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:interpolator/fast_out_slow_in\"/&gt;\n            &lt;/set&gt;\n        &lt;/aapt:attr&gt;\n    &lt;/target&gt;\n&lt;/animated-vector&gt;\n</code></pre>\n\n<h2>My java code for implementing the Animation is as follows:</h2>\n\n<pre><code>final ImageView animationView = (ImageView) findViewById(R.id.animationView);\nfinal AnimatedVectorDrawable drawable = (AnimatedVectorDrawable) getDrawable(R.drawable.avd_dice);\nanimationView.setImageDrawable(drawable);\ndrawable.start();\n</code></pre>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":5624068,"reputation":1977,"user_id":4453027,"accept_rate":45,"display_name":"KJEjava48"},"score":0,"creation_date":1659683222,"post_id":28862986,"comment_id":129356855,"body_markdown":"https://stackoverflow.com/questions/73234549/javax-persistence-entitynotfoundexception-unable-to-find-entity-with-id","body":"<a href=\"https://stackoverflow.com/questions/73234549/javax-persistence-entitynotfoundexception-unable-to-find-entity-with-id\" title=\"javax persistence entitynotfoundexception unable to find entity with id\">stackoverflow.com/questions/73234549/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4751994,"reputation":7921,"user_id":3841803,"accept_rate":69,"display_name":"singhakash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1425497107,"creation_date":1425497107,"answer_id":28863096,"question_id":28862986,"body_markdown":"Because you are adding same lists again and again.Since you have OneToMany the second transaction says you already persisted that list.\r\n\r\nAn workaround would to change relation to ManyToMany ","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>Because you are adding same lists again and again.Since you have OneToMany the second transaction says you already persisted that list.</p>\n\n<p>An workaround would to change relation to ManyToMany </p>\n"},{"tags":[],"owner":{"account_id":2102773,"reputation":19013,"user_id":1869933,"accept_rate":88,"display_name":"Koitoer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425502531,"creation_date":1425497289,"answer_id":28863156,"question_id":28862986,"body_markdown":"I believe problem is with the transactions obtain the transaction and commit within the save method in your dAO.\r\n\r\n    this.manager.getTransaction().commit();\r\n\r\nIf an error comes it is because there is no active transaction it is why the flush fails. Be sure you are within a transaction, consider use `EntityTransaction` to begin , commit and end the transaction around your DAO methods.\r\n\r\nIf you don&#39;t have an active TX you won&#39;t be able to write entities to the database, and when you try to merge something the entity won&#39;t be found then this is the reason for what you are getting `EntityNotFoundException` \r\n\r\n\r\n--- UPDATE\r\n\r\nWhen you do the merge, what is the ID that the Foo object have ? I believe is not the correct one , or at least the last id inserted in the database, so what I suggest is find first and then merge.\r\n\r\nUse \r\n\r\n    &lt;T&gt; T find(java.lang.Class&lt;T&gt; entityClass,\r\n               java.lang.Object primaryKey)\r\n\r\nUsing the id, and verify the instance have the correct key","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>I believe problem is with the transactions obtain the transaction and commit within the save method in your dAO.</p>\n\n<pre><code>this.manager.getTransaction().commit();\n</code></pre>\n\n<p>If an error comes it is because there is no active transaction it is why the flush fails. Be sure you are within a transaction, consider use <code>EntityTransaction</code> to begin , commit and end the transaction around your DAO methods.</p>\n\n<p>If you don't have an active TX you won't be able to write entities to the database, and when you try to merge something the entity won't be found then this is the reason for what you are getting <code>EntityNotFoundException</code> </p>\n\n<p>--- UPDATE</p>\n\n<p>When you do the merge, what is the ID that the Foo object have ? I believe is not the correct one , or at least the last id inserted in the database, so what I suggest is find first and then merge.</p>\n\n<p>Use </p>\n\n<pre><code>&lt;T&gt; T find(java.lang.Class&lt;T&gt; entityClass,\n           java.lang.Object primaryKey)\n</code></pre>\n\n<p>Using the id, and verify the instance have the correct key</p>\n"},{"tags":[],"owner":{"account_id":12898503,"reputation":2596,"user_id":9328117,"display_name":"Shahid Hussain Abbasi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691571733,"creation_date":1550417906,"answer_id":54734795,"question_id":28862986,"body_markdown":"Adding this:\r\n\r\n```\r\n@NotFound(action = NotFoundAction.IGNORE)\r\n```\r\n\r\nwith `@ManyToOne` or `@OneToOne` is helpful because `...ToOne` is `FetchType.EAGER` by default.","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>Adding this:</p>\n<pre><code>@NotFound(action = NotFoundAction.IGNORE)\n</code></pre>\n<p>with <code>@ManyToOne</code> or <code>@OneToOne</code> is helpful because <code>...ToOne</code> is <code>FetchType.EAGER</code> by default.</p>\n"},{"tags":[],"owner":{"account_id":12271777,"reputation":632,"user_id":8956733,"display_name":"Taraskin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621072119,"creation_date":1621072119,"answer_id":67545396,"question_id":28862986,"body_markdown":"I got similar issue. Fixed by updating `@ManyToOne` annotation to:\r\n\r\n```\r\n    @NotNull\r\n    @JoinColumn(nullable = false)\r\n    @ManyToOne(optional = false, fetch = FetchType.LAZY)\r\n    private ParentEntityClass parent;\r\n\r\n```\r\nadded: `nullable = false`, `optional = false, fetch = FetchType.LAZY` and, in addition to these - `@NotNull` (_javax.validation.constraints.NotNull_ - probably not necessary, just to prevent null-ables :) )","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>I got similar issue. Fixed by updating <code>@ManyToOne</code> annotation to:</p>\n<pre><code>    @NotNull\n    @JoinColumn(nullable = false)\n    @ManyToOne(optional = false, fetch = FetchType.LAZY)\n    private ParentEntityClass parent;\n\n</code></pre>\n<p>added: <code>nullable = false</code>, <code>optional = false, fetch = FetchType.LAZY</code> and, in addition to these - <code>@NotNull</code> (<em>javax.validation.constraints.NotNull</em> - probably not necessary, just to prevent null-ables :) )</p>\n"}],"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27949,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":28863096,"answer_count":4,"score":3,"last_activity_date":1691571733,"creation_date":1425496720,"question_id":28862986,"body_markdown":"I&#39;m trying to persist an object, after that i want to add 2 lists to that object and then update it (Since i can&#39;t persist the object with the lists).\r\n\r\nAll beign done inside a loop, the first iteration works just fine, from the second i get a `EntityNotFoundException` saying that the ID wasn&#39;t found to do the update.\r\n\r\n\r\n    private Foo foo;\r\n    private FooDao dao;\r\n  \r\n    for(int i = 0 ; i&lt;10 ; i++){\r\n      foo = new Foo();\r\n      foo.setVar(i);\r\n      \r\n      dao.save(foo);\r\n      \r\n      generateLists(); //creates a new list every interaction \r\n      foo.setCatList(catList);\r\n      foo.setBarList(barList);\r\n      \r\n      dao.update(foo);\r\n    }\r\n\r\nIf i remove the Lists and the update it works fine.\r\n\r\nThe object:\r\n\r\n    @Entity\r\n    public class Foo {\r\n      \r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Basic(optional = false)\r\n      private Integer id;\r\n      \r\n      @Basic(optional = false)\r\n      @NotNull\r\n      private String var;\r\n      \r\n      @OneToMany(cascade = CascadeType.ALL)\r\n      private List&lt;Bar&gt; barList;\r\n      \r\n      @OneToMany(cascade = CascadeType.ALL)\r\n      private List&lt;Cat&gt; catList;\r\n      \r\n      //Getters and Setters\r\n    }\r\n\r\n\r\nThe DAO methods:\r\n\r\n    public void save(Foo foo) {\r\n      this.manager.joinTransaction();\r\n      this.manager.persist(foo);\r\n      //this.manager.flush(); Tried this, but didn&#39;t work\r\n    }\r\n  \r\n    public void update(Foo foo) {\r\n      this.manager.joinTransaction();\r\n      this.manager.merge(foo);\r\n    }\r\n\r\nThe error:\r\n\r\n    ERROR [org.jboss.as.ejb3] (EJB default - 1) javax.ejb.EJBTransactionRolledbackException: Unable to find foo with id 4\r\n    ERROR [org.jboss.as.ejb3.invocation] (EJB default - 1) JBAS014134: EJB Invocation failed on component FooDao for method public void FooDao.atualiza(Foo): javax.ejb.EJBTransactionRolledbackException: Unable to find Foo with id 4\r\n\r\nps: Using this generic approach to simplify, if needed i&#39;ll post my solution(or the mess that i call solution)","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>I'm trying to persist an object, after that i want to add 2 lists to that object and then update it (Since i can't persist the object with the lists).</p>\n\n<p>All beign done inside a loop, the first iteration works just fine, from the second i get a <code>EntityNotFoundException</code> saying that the ID wasn't found to do the update.</p>\n\n<pre><code>private Foo foo;\nprivate FooDao dao;\n\nfor(int i = 0 ; i&lt;10 ; i++){\n  foo = new Foo();\n  foo.setVar(i);\n\n  dao.save(foo);\n\n  generateLists(); //creates a new list every interaction \n  foo.setCatList(catList);\n  foo.setBarList(barList);\n\n  dao.update(foo);\n}\n</code></pre>\n\n<p>If i remove the Lists and the update it works fine.</p>\n\n<p>The object:</p>\n\n<pre><code>@Entity\npublic class Foo {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Basic(optional = false)\n  private Integer id;\n\n  @Basic(optional = false)\n  @NotNull\n  private String var;\n\n  @OneToMany(cascade = CascadeType.ALL)\n  private List&lt;Bar&gt; barList;\n\n  @OneToMany(cascade = CascadeType.ALL)\n  private List&lt;Cat&gt; catList;\n\n  //Getters and Setters\n}\n</code></pre>\n\n<p>The DAO methods:</p>\n\n<pre><code>public void save(Foo foo) {\n  this.manager.joinTransaction();\n  this.manager.persist(foo);\n  //this.manager.flush(); Tried this, but didn't work\n}\n\npublic void update(Foo foo) {\n  this.manager.joinTransaction();\n  this.manager.merge(foo);\n}\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>ERROR [org.jboss.as.ejb3] (EJB default - 1) javax.ejb.EJBTransactionRolledbackException: Unable to find foo with id 4\nERROR [org.jboss.as.ejb3.invocation] (EJB default - 1) JBAS014134: EJB Invocation failed on component FooDao for method public void FooDao.atualiza(Foo): javax.ejb.EJBTransactionRolledbackException: Unable to find Foo with id 4\n</code></pre>\n\n<p>ps: Using this generic approach to simplify, if needed i'll post my solution(or the mess that i call solution)</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1691515176,"post_id":76861697,"comment_id":135501099,"body_markdown":"You can&#39;t work with files that way in Android. You need to make it an asset or raw resource and get an input stream through the AssetManager or Resources. It&#39;s explained in the documentation on Android file management.","body":"You can&#39;t work with files that way in Android. You need to make it an asset or raw resource and get an input stream through the AssetManager or Resources. It&#39;s explained in the documentation on Android file management."},{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":1,"creation_date":1691519525,"post_id":76861697,"comment_id":135501846,"body_markdown":"A better way to do this is to use a database, and with ROOM library its very easy to setup. You can store your data in tables and it will automatically be mapped to your classes. And since use only want to read the data, you can do it easily without much knowledge of SQL. Here is the resource https://developer.android.com/training/data-storage/room","body":"A better way to do this is to use a database, and with ROOM library its very easy to setup. You can store your data in tables and it will automatically be mapped to your classes. And since use only want to read the data, you can do it easily without much knowledge of SQL. Here is the resource <a href=\"https://developer.android.com/training/data-storage/room\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/room</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1691519822,"post_id":76861697,"comment_id":135501908,"body_markdown":"If Android cannot find its location then tell us at which location the file is .&quot;folder/filename.txt&quot; is no valid location.","body":"If Android cannot find its location then tell us at which location the file is .&quot;folder/filename.txt&quot; is no valid location."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1691527662,"post_id":76861697,"comment_id":135503218,"body_markdown":"The folders you can see when you connect a phone to your PC via USB are no real file-system. The used MTP protocol translates the paths so don&#39;t use them. First learn about internal storage and SD-card/shared storage. And if you want to look at the app private storage use Android Studio device explorer.","body":"The folders you can see when you connect a phone to your PC via USB are no real file-system. The used MTP protocol translates the paths so don&#39;t use them. First learn about internal storage and SD-card/shared storage. And if you want to look at the app private storage use Android Studio device explorer."}],"owner":{"account_id":29186313,"reputation":1,"user_id":22359408,"display_name":"Enzo Tur"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691571587,"creation_date":1691513745,"question_id":76861697,"body_markdown":"I am currently working on a questionnaire project, but I need a question bank for it. I came up with the idea of writing them in a .txt file so that I can retrieve them later. \r\n\r\nHowever, my current issue is that I am unable to retrieve the data from the file because Android cannot find its location. To retrieve the data, I am using the `FileReader` and `BufferedReader` methods.\r\n\r\nHere&#39;s my code:\r\n\r\n```java\r\ntry {\r\n\tFileReader fileReader = new FileReader(&quot;folder/filename.txt&quot;);\r\n\tBufferedReader lect = new BufferedReader(fileReader);\r\n\tString ligne = lect.readLine();\r\n\r\n\twhile (ligne != null) {\r\n\t\tSystem.out.println(ligne);\r\n\t\tligne = lect.readLine();\r\n\t}\r\n\r\n\tlect.close();\r\n} catch (IOException e) {\r\n\te.printStackTrace();\r\n}\r\n```\r\n\r\nThank you in advance.\r\nBest regards.\r\n\r\nI am unable to retrieve the data from the file because Android cannot find its location.","title":"Retrieve data from a Files Android","body":"<p>I am currently working on a questionnaire project, but I need a question bank for it. I came up with the idea of writing them in a .txt file so that I can retrieve them later.</p>\n<p>However, my current issue is that I am unable to retrieve the data from the file because Android cannot find its location. To retrieve the data, I am using the <code>FileReader</code> and <code>BufferedReader</code> methods.</p>\n<p>Here's my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    FileReader fileReader = new FileReader(&quot;folder/filename.txt&quot;);\n    BufferedReader lect = new BufferedReader(fileReader);\n    String ligne = lect.readLine();\n\n    while (ligne != null) {\n        System.out.println(ligne);\n        ligne = lect.readLine();\n    }\n\n    lect.close();\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>Thank you in advance.\nBest regards.</p>\n<p>I am unable to retrieve the data from the file because Android cannot find its location.</p>\n"},{"tags":["java","coalesce"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1273181201,"post_id":2768054,"comment_id":2819903,"body_markdown":"You shouldn&#39;t need a function like this as you geneally wouldn&#39;t calculate &#39;c&#39; if &#39;b&#39; has the answer you want. i.e. you wouldn&#39;t build a list of possible answers only to keep one.","body":"You shouldn&#39;t need a function like this as you geneally wouldn&#39;t calculate &#39;c&#39; if &#39;b&#39; has the answer you want. i.e. you wouldn&#39;t build a list of possible answers only to keep one."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":0,"creation_date":1335814904,"post_id":2768054,"comment_id":13396530,"body_markdown":"Caveat: Not all RDBMS short circuit on COALESCE. Oracle only recently started doing it.","body":"Caveat: Not all RDBMS short circuit on COALESCE. Oracle only recently started doing it."}],"answers":[{"tags":[],"owner":{"account_id":17585,"reputation":14171,"user_id":39489,"accept_rate":85,"display_name":"les2"},"down_vote_count":5,"up_vote_count":137,"is_accepted":true,"score":132,"last_activity_date":1691571365,"creation_date":1272998851,"answer_id":2768076,"question_id":2768054,"body_markdown":"No, there isn&#39;t.\r\n\r\nThe closest you can get is:\r\n\r\n    public static &lt;T&gt; T coalesce(T ...items) {\r\n        for (T i : items) if (i != null) return i;\r\n        return null;\r\n    }\r\n\r\nFor efficient reasons, you can handle the common cases as follows:\r\n\r\n    public static &lt;T&gt; T coalesce(T a, T b) {\r\n        return a == null ? b : a;\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c) {\r\n        return a != null ? a : (b != null ? b : c);\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c, T d) {\r\n        return ...\r\n    }\r\n\r\nThe efficiency reason is that an array allocation will happen each time you invoke the `...` version of the method. This could be wasteful for hand-fulls of items, which I suspect will be common usage.","title":"How to get the first non-null value in Java?","body":"<p>No, there isn't.</p>\n<p>The closest you can get is:</p>\n<pre><code>public static &lt;T&gt; T coalesce(T ...items) {\n    for (T i : items) if (i != null) return i;\n    return null;\n}\n</code></pre>\n<p>For efficient reasons, you can handle the common cases as follows:</p>\n<pre><code>public static &lt;T&gt; T coalesce(T a, T b) {\n    return a == null ? b : a;\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c) {\n    return a != null ? a : (b != null ? b : c);\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c, T d) {\n    return ...\n}\n</code></pre>\n<p>The efficiency reason is that an array allocation will happen each time you invoke the <code>...</code> version of the method. This could be wasteful for hand-fulls of items, which I suspect will be common usage.</p>\n"},{"tags":[],"owner":{"account_id":36018,"reputation":95910,"user_id":102441,"accept_rate":76,"display_name":"Eric"},"down_vote_count":10,"up_vote_count":8,"is_accepted":false,"score":-2,"last_activity_date":1297196336,"creation_date":1272998878,"answer_id":2768080,"question_id":2768054,"body_markdown":"    Object coalesce(Object... objects)\r\n    {\r\n    \tfor(Object o : object)\r\n    \t\tif(o != null)\r\n    \t\t\treturn o;\r\n    \treturn null;\r\n    }","title":"How to get the first non-null value in Java?","body":"<pre><code>Object coalesce(Object... objects)\n{\n    for(Object o : object)\n        if(o != null)\n            return o;\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36018,"reputation":95910,"user_id":102441,"accept_rate":76,"display_name":"Eric"},"down_vote_count":2,"up_vote_count":28,"is_accepted":false,"score":26,"last_activity_date":1272999887,"creation_date":1272999887,"answer_id":2768198,"question_id":2768054,"body_markdown":"Following on from LES2&#39;s answer, you can eliminate some repetition in the efficient version, by calling the overloaded function:\r\n\r\n    public static &lt;T&gt; T coalesce(T a, T b) {\r\n        return a != null ? a : b;\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c) {\r\n        return a != null ? a : coalesce(b,c);\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c, T d) {\r\n        return a != null ? a : coalesce(b,c,d);\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c, T d, T e) {\r\n        return a != null ? a : coalesce(b,c,d,e);\r\n    }","title":"How to get the first non-null value in Java?","body":"<p>Following on from LES2's answer, you can eliminate some repetition in the efficient version, by calling the overloaded function:</p>\n\n<pre><code>public static &lt;T&gt; T coalesce(T a, T b) {\n    return a != null ? a : b;\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c) {\n    return a != null ? a : coalesce(b,c);\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c, T d) {\n    return a != null ? a : coalesce(b,c,d);\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c, T d, T e) {\n    return a != null ? a : coalesce(b,c,d,e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":59255,"reputation":5143,"user_id":177324,"accept_rate":100,"display_name":"Dave"},"down_vote_count":8,"up_vote_count":75,"is_accepted":false,"score":67,"last_activity_date":1520953269,"creation_date":1311018515,"answer_id":6738545,"question_id":2768054,"body_markdown":"If there are only two variables to check and you&#39;re using Guava, you can use [MoreObjects.firstNonNull(T first, T second)][1].\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/MoreObjects.html#firstNonNull-T-T-","title":"How to get the first non-null value in Java?","body":"<p>If there are only two variables to check and you're using Guava, you can use <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/MoreObjects.html#firstNonNull-T-T-\" rel=\"noreferrer\">MoreObjects.firstNonNull(T first, T second)</a>.</p>\n"},{"tags":[],"owner":{"account_id":694222,"reputation":7707,"user_id":2512257,"display_name":"Franta"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1409664280,"creation_date":1329677124,"answer_id":9352051,"question_id":2768054,"body_markdown":"This situation calls for some preprocessor. Because if you write a function (static method) which picks the first not null value, it evaluates all items. It is problem if some items are method calls (may be time expensive method calls). And this methods are called even if any item before them is not null.\r\n\r\nSome function like this\r\n\r\n    public static &lt;T&gt; T coalesce(T ...items) …\r\n\r\nshould be used but before compiling into byte code there should be a preprocessor which find usages of this „coalesce function“ and replaces it with construction like\r\n\r\n    a != null ? a : (b != null ? b : c)\r\n\r\n\r\n**Update 2014-09-02:**\r\n\r\nThanks to Java 8 and Lambdas there is possibility to have true coalesce in Java! Including the crucial feature: particular expressions are evaluated only when needed – if earlier one is not null, then following ones are not evaluated (methods are not called, computation or disk/network operations are not done).\r\n\r\nI wrote an article about it [Java 8: coalesce – hled&#225;me neNULLov&#233; hodnoty][1] – (written in Czech, but I hope that code examples are understandable for everyone).\r\n\r\n\r\n  [1]: https://blog.frantovo.cz/c/311/Java%208%3A%20coalesce%20%E2%80%93%20hled%C3%A1me%20neNULLov%C3%A9%20hodnoty","title":"How to get the first non-null value in Java?","body":"<p>This situation calls for some preprocessor. Because if you write a function (static method) which picks the first not null value, it evaluates all items. It is problem if some items are method calls (may be time expensive method calls). And this methods are called even if any item before them is not null.</p>\n\n<p>Some function like this</p>\n\n<pre><code>public static &lt;T&gt; T coalesce(T ...items) …\n</code></pre>\n\n<p>should be used but before compiling into byte code there should be a preprocessor which find usages of this „coalesce function“ and replaces it with construction like</p>\n\n<pre><code>a != null ? a : (b != null ? b : c)\n</code></pre>\n\n<p><strong>Update 2014-09-02:</strong></p>\n\n<p>Thanks to Java 8 and Lambdas there is possibility to have true coalesce in Java! Including the crucial feature: particular expressions are evaluated only when needed – if earlier one is not null, then following ones are not evaluated (methods are not called, computation or disk/network operations are not done).</p>\n\n<p>I wrote an article about it <a href=\"https://blog.frantovo.cz/c/311/Java%208%3A%20coalesce%20%E2%80%93%20hled%C3%A1me%20neNULLov%C3%A9%20hodnoty\" rel=\"noreferrer\">Java 8: coalesce – hledáme neNULLové hodnoty</a> – (written in Czech, but I hope that code examples are understandable for everyone).</p>\n"},{"tags":[],"owner":{"account_id":25799,"reputation":2291,"user_id":66611,"accept_rate":83,"display_name":"Jamol"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1386683377,"creation_date":1374737461,"answer_id":17851702,"question_id":2768054,"body_markdown":"With Guava you can do:\r\n\r\n    Optional.fromNullable(a).or(b);\r\n\r\nwhich doesn&#39;t throw NPE if both `a` and `b` are `null`.\r\n\r\nEDIT: I was wrong, it does throw NPE. The correct way as commented by **Michal Čizmazia** is:\r\n\r\n    Optional.fromNullable(a).or(Optional.fromNullable(b)).orNull();\r\n","title":"How to get the first non-null value in Java?","body":"<p>With Guava you can do:</p>\n\n<pre><code>Optional.fromNullable(a).or(b);\n</code></pre>\n\n<p>which doesn't throw NPE if both <code>a</code> and <code>b</code> are <code>null</code>.</p>\n\n<p>EDIT: I was wrong, it does throw NPE. The correct way as commented by <strong>Michal Čizmazia</strong> is:</p>\n\n<pre><code>Optional.fromNullable(a).or(Optional.fromNullable(b)).orNull();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1981205,"reputation":3263,"user_id":1777790,"display_name":"Andrzej Polis"},"down_vote_count":2,"up_vote_count":296,"is_accepted":false,"score":294,"last_activity_date":1515757489,"creation_date":1378903907,"answer_id":18741740,"question_id":2768054,"body_markdown":"Apache Commons Lang 3\r\n\r\n[`ObjectUtils.firstNonNull(T...)`][1]\r\n\r\nJava 8 Stream\r\n\r\n[`Stream.of(T...).filter(Objects::nonNull).findFirst().orElse(null)`][2]\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ObjectUtils.html#firstNonNull%28T...%29\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html","title":"How to get the first non-null value in Java?","body":"<p>Apache Commons Lang 3</p>\n\n<p><a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ObjectUtils.html#firstNonNull%28T...%29\" rel=\"noreferrer\"><code>ObjectUtils.firstNonNull(T...)</code></a></p>\n\n<p>Java 8 Stream</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"noreferrer\"><code>Stream.of(T...).filter(Objects::nonNull).findFirst().orElse(null)</code></a></p>\n"},{"tags":[],"owner":{"account_id":165129,"reputation":1388,"user_id":388317,"accept_rate":0,"display_name":"Christian Ullenboom"},"down_vote_count":0,"up_vote_count":69,"is_accepted":false,"score":69,"last_activity_date":1458148572,"creation_date":1422988599,"answer_id":28306286,"question_id":2768054,"body_markdown":"If there are only two references to test and you are using Java 8, you could use\r\n\r\n    Object o = null;\r\n    Object p = &quot;p&quot;;\r\n    Object r = Optional.ofNullable( o ).orElse( p );\r\n    System.out.println( r );   // p\r\n\r\nIf you import static Optional the expression is not too bad.\r\n\r\nUnfortunately your case with &quot;several variables&quot; is not possible with an Optional-method. Instead you could use:\r\n\r\n    Object o = null;\r\n    Object p = null;\r\n    Object q = &quot;p&quot;;\r\n\r\n    Optional&lt;Object&gt; r = Stream.of( o, p, q ).filter( Objects::nonNull ).findFirst();\r\n    System.out.println( r.orElse(null) );   // p\r\n","title":"How to get the first non-null value in Java?","body":"<p>If there are only two references to test and you are using Java 8, you could use</p>\n\n<pre><code>Object o = null;\nObject p = \"p\";\nObject r = Optional.ofNullable( o ).orElse( p );\nSystem.out.println( r );   // p\n</code></pre>\n\n<p>If you import static Optional the expression is not too bad.</p>\n\n<p>Unfortunately your case with \"several variables\" is not possible with an Optional-method. Instead you could use:</p>\n\n<pre><code>Object o = null;\nObject p = null;\nObject q = \"p\";\n\nOptional&lt;Object&gt; r = Stream.of( o, p, q ).filter( Objects::nonNull ).findFirst();\nSystem.out.println( r.orElse(null) );   // p\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2997947,"reputation":7676,"user_id":2544089,"display_name":"Mario Rossi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1426697564,"creation_date":1426697137,"answer_id":29127853,"question_id":2768054,"body_markdown":"Just for completness, the &quot;several variables&quot; case is indeed possible, though not elegant at all.  For example, for variables `o`, `p`, and `q`:\r\n\r\n    Optional.ofNullable( o ).orElseGet(()-&gt; Optional.ofNullable( p ).orElseGet(()-&gt; q ) )\r\n\r\nPlease note the use of `orElseGet()` attending to the case that `o`, `p`, and `q` are not variables but expressions either expensive or with undesired side-effects.\r\n\r\nIn the most general case `coalesce(e[1],e[2],e[3],...,e[N])`\r\n\r\n    coalesce-expression(i) ==  e[i]  when i = N\r\n    coalesce-expression(i) ==  Optional.ofNullable( e[i] ).orElseGet(()-&gt; coalesce-expression(i+1) )  when i &lt; N\r\n\r\nThis can generate expressions excessively long.  However, if we are trying to move to a world without `null`, then `v[i]` are most probably already of type `Optional&lt;String&gt;`, as opposed to simply `String`.  In this case, \r\n\r\n    result= o.orElse(p.orElse(q.get())) ;\r\n\r\nor in the case of expressions:\r\n\r\n    result= o.orElseGet(()-&gt; p.orElseGet(()-&gt; q.get() ) ) ;\r\n\r\nFurthermore, if you are also moving to a functional-declarative style, `o`, `p`, and `q` should be of type `Supplier&lt;String&gt;` like in:\r\n\r\n    Supplier&lt;String&gt; q= ()-&gt; q-expr ;\r\n    Supplier&lt;String&gt; p= ()-&gt; Optional.ofNullable(p-expr).orElseGet( q ) ;\r\n    Supplier&lt;String&gt; o= ()-&gt; Optional.ofNullable(o-expr).orElseGet( p ) ;\r\n\r\nAnd then the whole `coalesce` reduces simply to `o.get()`.\r\n\r\nFor a more concrete example:\r\n\r\n    Supplier&lt;Integer&gt; hardcodedDefaultAge= ()-&gt; 99 ;\r\n    Supplier&lt;Integer&gt; defaultAge= ()-&gt; defaultAgeFromDatabase().orElseGet( hardcodedDefaultAge ) ;\r\n    Supplier&lt;Integer&gt; ageInStore= ()-&gt; ageFromDatabase(memberId).orElseGet( defaultAge ) ;\r\n    Supplier&lt;Integer&gt; effectiveAge= ()-&gt; ageFromInput().orElseGet( ageInStore ) ;\r\n\r\n`defaultAgeFromDatabase()`, `ageFromDatabase()`, and `ageFromInput()` would already return `Optional&lt;Integer&gt;`, naturally.\r\n\r\nAnd then the `coalesce` becomes `effectiveAge.get()` or simply `effectiveAge` if we are happy with a `Supplier&lt;Integer&gt;`.\r\n\r\nIMHO, with Java 8 we will see more and more code structured like this, as it&#39;s extremely self-explainatory and efficient at the same time, especially in more complex cases.\r\n\r\nI do miss a class `Lazy&lt;T&gt;` that invokes a `Supplier&lt;T&gt;` only one time, but lazily, as well as consistency in the definition of `Optional&lt;T&gt;` (i.e. `Optional&lt;T&gt;`-`Optional&lt;T&gt;` operators, or even `Supplier&lt;Optional&lt;T&gt;&gt;`).\r\n","title":"How to get the first non-null value in Java?","body":"<p>Just for completness, the \"several variables\" case is indeed possible, though not elegant at all.  For example, for variables <code>o</code>, <code>p</code>, and <code>q</code>:</p>\n\n<pre><code>Optional.ofNullable( o ).orElseGet(()-&gt; Optional.ofNullable( p ).orElseGet(()-&gt; q ) )\n</code></pre>\n\n<p>Please note the use of <code>orElseGet()</code> attending to the case that <code>o</code>, <code>p</code>, and <code>q</code> are not variables but expressions either expensive or with undesired side-effects.</p>\n\n<p>In the most general case <code>coalesce(e[1],e[2],e[3],...,e[N])</code></p>\n\n<pre><code>coalesce-expression(i) ==  e[i]  when i = N\ncoalesce-expression(i) ==  Optional.ofNullable( e[i] ).orElseGet(()-&gt; coalesce-expression(i+1) )  when i &lt; N\n</code></pre>\n\n<p>This can generate expressions excessively long.  However, if we are trying to move to a world without <code>null</code>, then <code>v[i]</code> are most probably already of type <code>Optional&lt;String&gt;</code>, as opposed to simply <code>String</code>.  In this case, </p>\n\n<pre><code>result= o.orElse(p.orElse(q.get())) ;\n</code></pre>\n\n<p>or in the case of expressions:</p>\n\n<pre><code>result= o.orElseGet(()-&gt; p.orElseGet(()-&gt; q.get() ) ) ;\n</code></pre>\n\n<p>Furthermore, if you are also moving to a functional-declarative style, <code>o</code>, <code>p</code>, and <code>q</code> should be of type <code>Supplier&lt;String&gt;</code> like in:</p>\n\n<pre><code>Supplier&lt;String&gt; q= ()-&gt; q-expr ;\nSupplier&lt;String&gt; p= ()-&gt; Optional.ofNullable(p-expr).orElseGet( q ) ;\nSupplier&lt;String&gt; o= ()-&gt; Optional.ofNullable(o-expr).orElseGet( p ) ;\n</code></pre>\n\n<p>And then the whole <code>coalesce</code> reduces simply to <code>o.get()</code>.</p>\n\n<p>For a more concrete example:</p>\n\n<pre><code>Supplier&lt;Integer&gt; hardcodedDefaultAge= ()-&gt; 99 ;\nSupplier&lt;Integer&gt; defaultAge= ()-&gt; defaultAgeFromDatabase().orElseGet( hardcodedDefaultAge ) ;\nSupplier&lt;Integer&gt; ageInStore= ()-&gt; ageFromDatabase(memberId).orElseGet( defaultAge ) ;\nSupplier&lt;Integer&gt; effectiveAge= ()-&gt; ageFromInput().orElseGet( ageInStore ) ;\n</code></pre>\n\n<p><code>defaultAgeFromDatabase()</code>, <code>ageFromDatabase()</code>, and <code>ageFromInput()</code> would already return <code>Optional&lt;Integer&gt;</code>, naturally.</p>\n\n<p>And then the <code>coalesce</code> becomes <code>effectiveAge.get()</code> or simply <code>effectiveAge</code> if we are happy with a <code>Supplier&lt;Integer&gt;</code>.</p>\n\n<p>IMHO, with Java 8 we will see more and more code structured like this, as it's extremely self-explainatory and efficient at the same time, especially in more complex cases.</p>\n\n<p>I do miss a class <code>Lazy&lt;T&gt;</code> that invokes a <code>Supplier&lt;T&gt;</code> only one time, but lazily, as well as consistency in the definition of <code>Optional&lt;T&gt;</code> (i.e. <code>Optional&lt;T&gt;</code>-<code>Optional&lt;T&gt;</code> operators, or even <code>Supplier&lt;Optional&lt;T&gt;&gt;</code>).</p>\n"},{"tags":[],"owner":{"account_id":2116449,"reputation":86,"user_id":3419474,"display_name":"Lonnie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481863723,"creation_date":1481862535,"answer_id":41177303,"question_id":2768054,"body_markdown":"How about:\r\n\r\n    firstNonNull = FluentIterable.from(\r\n        Lists.newArrayList( a, b, c, ... ) )\r\n            .firstMatch( Predicates.notNull() )\r\n                .or( someKnownNonNullDefault );\r\n\r\nJava ArrayList conveniently allows null entries and this expression is consistent regardless of the number of objects to be considered. (In this form, all the objects considered need to be of the same type.)","title":"How to get the first non-null value in Java?","body":"<p>How about:</p>\n\n<pre><code>firstNonNull = FluentIterable.from(\n    Lists.newArrayList( a, b, c, ... ) )\n        .firstMatch( Predicates.notNull() )\n            .or( someKnownNonNullDefault );\n</code></pre>\n\n<p>Java ArrayList conveniently allows null entries and this expression is consistent regardless of the number of objects to be considered. (In this form, all the objects considered need to be of the same type.)</p>\n"},{"tags":[],"owner":{"account_id":7095188,"reputation":612,"user_id":5429049,"accept_rate":80,"display_name":"Lucas Le&#243;n"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1521650955,"creation_date":1515605320,"answer_id":48192967,"question_id":2768054,"body_markdown":"You can try this:\r\n\r\n    public static &lt;T&gt; T coalesce(T... t) {\r\n        return Stream.of(t).filter(Objects::nonNull).findFirst().orElse(null);\r\n    }\r\n\r\nBased on [this][1] response\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/28306286/5429049","title":"How to get the first non-null value in Java?","body":"<p>You can try this:</p>\n\n<pre><code>public static &lt;T&gt; T coalesce(T... t) {\n    return Stream.of(t).filter(Objects::nonNull).findFirst().orElse(null);\n}\n</code></pre>\n\n<p>Based on <a href=\"https://stackoverflow.com/a/28306286/5429049\">this</a> response</p>\n"},{"tags":[],"owner":{"account_id":13405710,"reputation":51,"user_id":9673805,"display_name":"Triqui"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1524222530,"creation_date":1524212486,"answer_id":49937215,"question_id":2768054,"body_markdown":"How about using suppliers when you want to avoid evaluating some expensive method? \r\n\r\nLike this:\r\n\r\n    public static &lt;T&gt; T coalesce(Supplier&lt;T&gt;... items) {\r\n\tfor (Supplier&lt;T&gt; item : items) {\r\n\t\tT value = item.get();\r\n\t\tif (value != null) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\nAnd then using it like this:\r\n\r\n    Double amount = coalesce(order::firstAmount, order::secondAmount, order::thirdAmount)\r\n\r\nYou can also use overloaded methods for the calls with two, three or four arguments.\r\n\r\nIn addition, you could also use streams with something like this:\r\n\r\n\tpublic static &lt;T&gt; T coalesce2(Supplier&lt;T&gt;... s) {\r\n\t\treturn Arrays.stream(s).map(Supplier::get).filter(Objects::nonNull).findFirst().orElse(null);\r\n\t}\r\n\r\n\r\n","title":"How to get the first non-null value in Java?","body":"<p>How about using suppliers when you want to avoid evaluating some expensive method? </p>\n\n<p>Like this:</p>\n\n<pre><code>public static &lt;T&gt; T coalesce(Supplier&lt;T&gt;... items) {\nfor (Supplier&lt;T&gt; item : items) {\n    T value = item.get();\n    if (value != null) {\n        return value;\n    }\n    return null;\n}\n</code></pre>\n\n<p>And then using it like this:</p>\n\n<pre><code>Double amount = coalesce(order::firstAmount, order::secondAmount, order::thirdAmount)\n</code></pre>\n\n<p>You can also use overloaded methods for the calls with two, three or four arguments.</p>\n\n<p>In addition, you could also use streams with something like this:</p>\n\n<pre><code>public static &lt;T&gt; T coalesce2(Supplier&lt;T&gt;... s) {\n    return Arrays.stream(s).map(Supplier::get).filter(Objects::nonNull).findFirst().orElse(null);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23672702,"reputation":154,"user_id":17699256,"display_name":"Mert &#220;lkg&#252;n"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1639726558,"creation_date":1639726558,"answer_id":70389797,"question_id":2768054,"body_markdown":"Since Java 9 there is builtin `Objects.requireNonNullElse` method for two parameter coalesce. That was the most useful for me.","title":"How to get the first non-null value in Java?","body":"<p>Since Java 9 there is builtin <code>Objects.requireNonNullElse</code> method for two parameter coalesce. That was the most useful for me.</p>\n"}],"owner":{"account_id":95258,"reputation":80673,"user_id":259541,"accept_rate":81,"display_name":"froadie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158290,"favorite_count":0,"down_vote_count":0,"up_vote_count":201,"accepted_answer_id":2768076,"answer_count":13,"score":201,"last_activity_date":1691571365,"creation_date":1272998653,"question_id":2768054,"body_markdown":"Is there a Java equivalent of SQL&#39;s `COALESCE` function? That is, is there any way to return the first non-null value of several variables?\r\n\r\ne.g.\r\n\r\n    Double a = null;\r\n    Double b = 4.4;\r\n    Double c = null;\r\n\r\nI want to somehow have a statement that will return the first non-null value of `a`, `b`, and `c` - in this case, it would return `b`, or 4.4. (Something like the sql method - return `COALESCE(a,b,c)`). I know that I can do it explicitly with something like:\r\n\r\n    return a != null ? a : (b != null ? b : c)\r\n\r\nBut I wondered if there was any built-in, accepted function to accomplish this.","title":"How to get the first non-null value in Java?","body":"<p>Is there a Java equivalent of SQL's <code>COALESCE</code> function? That is, is there any way to return the first non-null value of several variables?</p>\n\n<p>e.g.</p>\n\n<pre><code>Double a = null;\nDouble b = 4.4;\nDouble c = null;\n</code></pre>\n\n<p>I want to somehow have a statement that will return the first non-null value of <code>a</code>, <code>b</code>, and <code>c</code> - in this case, it would return <code>b</code>, or 4.4. (Something like the sql method - return <code>COALESCE(a,b,c)</code>). I know that I can do it explicitly with something like:</p>\n\n<pre><code>return a != null ? a : (b != null ? b : c)\n</code></pre>\n\n<p>But I wondered if there was any built-in, accepted function to accomplish this.</p>\n"},{"tags":["java","apache-spark","parquet"],"owner":{"account_id":4511977,"reputation":3,"user_id":3667812,"display_name":"truong quoc tuan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691571057,"creation_date":1691568034,"question_id":76865719,"body_markdown":"I try write parquet file use Parquet Modular Encryption\r\nhttps://github.com/apache/parquet-format/blob/master/Encryption.md\r\nI use spark java to write file with code:\r\n\r\n```\r\nsc.sparkContext().hadoopConfiguration().set(&quot;parquet.crypto.factory.class&quot;,\r\n                &quot;org.apache.parquet.crypto.keytools.PropertiesDrivenCryptoFactory&quot;);\r\n\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.material.store.internally&quot;, &quot;false&quot;);\r\n\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.kms.client.class&quot;,\r\n                &quot;org.apache.parquet.crypto.keytools.mocks.InMemoryKMS&quot;);\r\n        // Explicit master keys (base64 encoded) - required only for mock InMemoryKMS\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.list&quot;,\r\n                &quot;keyA:AAECAwQFBgcICQoLDA0ODw==,keyB:AAECAAECAAECAAECAAECAA==,keyC:AAECAwPFBgcICQoLDA0ODw==,keyD:AAECAwPFdgcICQoLDA0ODw==&quot;);\r\n\r\n        String csvPath = &quot;/home/tuantq2/Downloads/stat/perstat/stats_data_read_csv9.csv&quot;;\r\n\r\n        Dataset&lt;Row&gt; csvData = sc.read()\r\n                .format(&quot;csv&quot;)\r\n                .option(&quot;header&quot;, &quot;true&quot;) // Nếu c&#243; header trong file CSV\r\n                .option(&quot;inferSchema&quot;, &quot;true&quot;) // Tự động suy đo&#225;n kiểu dữ liệu của cột\r\n                .load(csvPath);\r\n        csvData.show();\r\n        csvData.write().\r\n                option(&quot;parquet.encryption.column.keys&quot;, &quot;keyA:team&quot;).\r\n                option(&quot;parquet.encryption.footer.key&quot;, &quot;keyB&quot;).\r\n                //                option(&quot;parquet.encryption.column.keys&quot;, &quot;keyC:path&quot;).\r\n                mode(SaveMode.Overwrite).\r\n                parquet(&quot;hdfs://127.0.0.1:9000/data/tuantq2/parquet_sec/teampath.parquet.encrypted&quot;);\r\n```\r\nthen when I try read:\r\n\r\n```\r\nsc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.material.store.internally&quot;,\r\n                &quot;false&quot;);\r\n\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.crypto.factory.class&quot;,\r\n                &quot;org.apache.parquet.crypto.keytools.PropertiesDrivenCryptoFactory&quot;);\r\n\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.kms.client.class&quot;,\r\n                &quot;org.apache.parquet.crypto.keytools.mocks.InMemoryKMS&quot;);\r\n        // Explicit master keys (base64 encoded) - required only for mock InMemoryKMS\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.list&quot;,\r\n                &quot;keyA:AAECAwQFBgcICQoLDA0ODw==,keyB:AAECAAECAAECAAECAAECAA==,keyC:AAECAwPFBgcICQoLDA0ODw==,keyD:AAECAwPFdgcICQoLDA0ODw==&quot;);\r\n\r\n        Dataset&lt;Row&gt; df = sc.read()\r\n                .parquet(&quot;hdfs://127.0.0.1:9000//data/tuantq2/parquet_sec/teampath.parquet.encrypted/&quot;).select(&quot;team&quot;);\r\n        df.show();\r\n```\r\nI receved error:\r\n\r\n```\r\norg.apache.spark.SparkException: Exception thrown in awaitResult: \r\n\tat org.apache.spark.util.ThreadUtils$.awaitResult(ThreadUtils.scala:301)\r\n\tat org.apache.spark.util.ThreadUtils$.parmap(ThreadUtils.scala:375)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.readParquetFootersInParallel(ParquetFileFormat.scala:460)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$mergeSchemasInParallel$1(ParquetFileFormat.scala:506)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$mergeSchemasInParallel$1$adapted(ParquetFileFormat.scala:500)\r\n\tat org.apache.spark.sql.execution.datasources.SchemaMergeUtils$.$anonfun$mergeSchemasInParallel$2(SchemaMergeUtils.scala:76)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitions$2(RDD.scala:863)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitions$2$adapted(RDD.scala:863)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: java.io.IOException: Could not read footer for file: FileStatus{path=hdfs://127.0.0.1:9000/data/tuantq2/parquet_sec_vault/teampath.parquet.encrypted/part-00000-30a08af7-5f92-4ae8-88c0-e1c327b0060d-c000.snappy.parquet; isDirectory=false; length=16240; replication=0; blocksize=0; modification_time=0; access_time=0; owner=; group=; permission=rw-rw-rw-; isSymlink=false; hasAcl=false; isEncrypted=false; isErasureCoded=false}\r\n\tat org.apache.spark.sql.errors.QueryExecutionErrors$.cannotReadFooterForFileError(QueryExecutionErrors.scala:726)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$readParquetFootersInParallel$1(ParquetFileFormat.scala:473)\r\n\tat org.apache.spark.util.ThreadUtils$.$anonfun$parmap$2(ThreadUtils.scala:372)\r\n\tat scala.concurrent.Future$.$anonfun$apply$1(Future.scala:659)\r\n\tat scala.util.Success.$anonfun$map$1(Try.scala:255)\r\n\tat scala.util.Success.map(Try.scala:213)\r\n\tat scala.concurrent.Future.$anonfun$map$1(Future.scala:292)\r\n\tat scala.concurrent.impl.Promise.liftedTree1$1(Promise.scala:33)\r\n\tat scala.concurrent.impl.Promise.$anonfun$transform$1(Promise.scala:33)\r\n\tat scala.concurrent.impl.CallbackRunnable.run(Promise.scala:64)\r\n\tat java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1402)\r\n\tat java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)\r\n\tat java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)\r\n\tat java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)\r\n\tat java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)\r\nCaused by: java.lang.NullPointerException\r\n\tat org.apache.parquet.crypto.keytools.FileKeyUnwrapper.getKey(FileKeyUnwrapper.java:87)\r\n\tat org.apache.parquet.crypto.InternalFileDecryptor.setFileCryptoMetaData(InternalFileDecryptor.java:187)\r\n\tat org.apache.parquet.hadoop.ParquetFileReader.readFooter(ParquetFileReader.java:592)\r\n\tat org.apache.parquet.hadoop.ParquetFileReader.&lt;init&gt;(ParquetFileReader.java:777)\r\n\tat org.apache.parquet.hadoop.ParquetFileReader.open(ParquetFileReader.java:658)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFooterReader.readFooter(ParquetFooterReader.java:52)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFooterReader.readFooter(ParquetFooterReader.java:44)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$readParquetFootersInParallel$1(ParquetFileFormat.scala:467)\r\n\t... 13 more\r\n```\r\nBut  when write parquet with parquet.encryption.key.material.store.internally=true then everything&#39;s fine\r\nPlease help me solve this. Thank all for helps.\r\n\r\nwhen I try write file parquet with option parquet.encryption.key.material.store.internally=true then everything&#39;s fine","title":"Error when read parquet file use Parquet Modular Encryption","body":"<p>I try write parquet file use Parquet Modular Encryption\n<a href=\"https://github.com/apache/parquet-format/blob/master/Encryption.md\" rel=\"nofollow noreferrer\">https://github.com/apache/parquet-format/blob/master/Encryption.md</a>\nI use spark java to write file with code:</p>\n<pre><code>sc.sparkContext().hadoopConfiguration().set(&quot;parquet.crypto.factory.class&quot;,\n                &quot;org.apache.parquet.crypto.keytools.PropertiesDrivenCryptoFactory&quot;);\n\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.material.store.internally&quot;, &quot;false&quot;);\n\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.kms.client.class&quot;,\n                &quot;org.apache.parquet.crypto.keytools.mocks.InMemoryKMS&quot;);\n        // Explicit master keys (base64 encoded) - required only for mock InMemoryKMS\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.list&quot;,\n                &quot;keyA:AAECAwQFBgcICQoLDA0ODw==,keyB:AAECAAECAAECAAECAAECAA==,keyC:AAECAwPFBgcICQoLDA0ODw==,keyD:AAECAwPFdgcICQoLDA0ODw==&quot;);\n\n        String csvPath = &quot;/home/tuantq2/Downloads/stat/perstat/stats_data_read_csv9.csv&quot;;\n\n        Dataset&lt;Row&gt; csvData = sc.read()\n                .format(&quot;csv&quot;)\n                .option(&quot;header&quot;, &quot;true&quot;) // Nếu có header trong file CSV\n                .option(&quot;inferSchema&quot;, &quot;true&quot;) // Tự động suy đoán kiểu dữ liệu của cột\n                .load(csvPath);\n        csvData.show();\n        csvData.write().\n                option(&quot;parquet.encryption.column.keys&quot;, &quot;keyA:team&quot;).\n                option(&quot;parquet.encryption.footer.key&quot;, &quot;keyB&quot;).\n                //                option(&quot;parquet.encryption.column.keys&quot;, &quot;keyC:path&quot;).\n                mode(SaveMode.Overwrite).\n                parquet(&quot;hdfs://127.0.0.1:9000/data/tuantq2/parquet_sec/teampath.parquet.encrypted&quot;);\n</code></pre>\n<p>then when I try read:</p>\n<pre><code>sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.material.store.internally&quot;,\n                &quot;false&quot;);\n\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.crypto.factory.class&quot;,\n                &quot;org.apache.parquet.crypto.keytools.PropertiesDrivenCryptoFactory&quot;);\n\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.kms.client.class&quot;,\n                &quot;org.apache.parquet.crypto.keytools.mocks.InMemoryKMS&quot;);\n        // Explicit master keys (base64 encoded) - required only for mock InMemoryKMS\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.list&quot;,\n                &quot;keyA:AAECAwQFBgcICQoLDA0ODw==,keyB:AAECAAECAAECAAECAAECAA==,keyC:AAECAwPFBgcICQoLDA0ODw==,keyD:AAECAwPFdgcICQoLDA0ODw==&quot;);\n\n        Dataset&lt;Row&gt; df = sc.read()\n                .parquet(&quot;hdfs://127.0.0.1:9000//data/tuantq2/parquet_sec/teampath.parquet.encrypted/&quot;).select(&quot;team&quot;);\n        df.show();\n</code></pre>\n<p>I receved error:</p>\n<pre><code>org.apache.spark.SparkException: Exception thrown in awaitResult: \n    at org.apache.spark.util.ThreadUtils$.awaitResult(ThreadUtils.scala:301)\n    at org.apache.spark.util.ThreadUtils$.parmap(ThreadUtils.scala:375)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.readParquetFootersInParallel(ParquetFileFormat.scala:460)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$mergeSchemasInParallel$1(ParquetFileFormat.scala:506)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$mergeSchemasInParallel$1$adapted(ParquetFileFormat.scala:500)\n    at org.apache.spark.sql.execution.datasources.SchemaMergeUtils$.$anonfun$mergeSchemasInParallel$2(SchemaMergeUtils.scala:76)\n    at org.apache.spark.rdd.RDD.$anonfun$mapPartitions$2(RDD.scala:863)\n    at org.apache.spark.rdd.RDD.$anonfun$mapPartitions$2$adapted(RDD.scala:863)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.io.IOException: Could not read footer for file: FileStatus{path=hdfs://127.0.0.1:9000/data/tuantq2/parquet_sec_vault/teampath.parquet.encrypted/part-00000-30a08af7-5f92-4ae8-88c0-e1c327b0060d-c000.snappy.parquet; isDirectory=false; length=16240; replication=0; blocksize=0; modification_time=0; access_time=0; owner=; group=; permission=rw-rw-rw-; isSymlink=false; hasAcl=false; isEncrypted=false; isErasureCoded=false}\n    at org.apache.spark.sql.errors.QueryExecutionErrors$.cannotReadFooterForFileError(QueryExecutionErrors.scala:726)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$readParquetFootersInParallel$1(ParquetFileFormat.scala:473)\n    at org.apache.spark.util.ThreadUtils$.$anonfun$parmap$2(ThreadUtils.scala:372)\n    at scala.concurrent.Future$.$anonfun$apply$1(Future.scala:659)\n    at scala.util.Success.$anonfun$map$1(Try.scala:255)\n    at scala.util.Success.map(Try.scala:213)\n    at scala.concurrent.Future.$anonfun$map$1(Future.scala:292)\n    at scala.concurrent.impl.Promise.liftedTree1$1(Promise.scala:33)\n    at scala.concurrent.impl.Promise.$anonfun$transform$1(Promise.scala:33)\n    at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:64)\n    at java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1402)\n    at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)\n    at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)\n    at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)\n    at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)\nCaused by: java.lang.NullPointerException\n    at org.apache.parquet.crypto.keytools.FileKeyUnwrapper.getKey(FileKeyUnwrapper.java:87)\n    at org.apache.parquet.crypto.InternalFileDecryptor.setFileCryptoMetaData(InternalFileDecryptor.java:187)\n    at org.apache.parquet.hadoop.ParquetFileReader.readFooter(ParquetFileReader.java:592)\n    at org.apache.parquet.hadoop.ParquetFileReader.&lt;init&gt;(ParquetFileReader.java:777)\n    at org.apache.parquet.hadoop.ParquetFileReader.open(ParquetFileReader.java:658)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFooterReader.readFooter(ParquetFooterReader.java:52)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFooterReader.readFooter(ParquetFooterReader.java:44)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$readParquetFootersInParallel$1(ParquetFileFormat.scala:467)\n    ... 13 more\n</code></pre>\n<p>But  when write parquet with parquet.encryption.key.material.store.internally=true then everything's fine\nPlease help me solve this. Thank all for helps.</p>\n<p>when I try write file parquet with option parquet.encryption.key.material.store.internally=true then everything's fine</p>\n"},{"tags":["java","persistence","jooq","dsl","querydsl"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691544218,"post_id":76863993,"comment_id":135504951,"body_markdown":"what is wrong with the way that you are doing this?","body":"what is wrong with the way that you are doing this?"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1691545691,"post_id":76863993,"comment_id":135505078,"body_markdown":"You need to keep that cursor around. Your error here is returning a `List&lt;Record&gt;` - that&#39;s not what you want. You want some other object that you can repeatedly ask for a list. You could write that, but, really, `Cursor` already does that. Your `fetchRecords` method should return `Cursor&lt;Record&gt;` directly.","body":"You need to keep that cursor around. Your error here is returning a <code>List&lt;Record&gt;</code> - that&#39;s not what you want. You want some other object that you can repeatedly ask for a list. You could write that, but, really, <code>Cursor</code> already does that. Your <code>fetchRecords</code> method should return <code>Cursor&lt;Record&gt;</code> directly."},{"owner":{"account_id":8277763,"reputation":573,"user_id":6223346,"accept_rate":67,"display_name":"Harish"},"score":0,"creation_date":1691548741,"post_id":76863993,"comment_id":135505309,"body_markdown":"@rzwitserloot - Does the fetchrecords() keeps get calling with the new cursorfetch from next Time?","body":"@rzwitserloot - Does the fetchrecords() keeps get calling with the new cursorfetch from next Time?"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691549570,"post_id":76863993,"comment_id":135505374,"body_markdown":"No. `fetchLazy()` gets you a cursor. That&#39;s what you return, that&#39;s what you keep calling `.fetchNext` on.","body":"No. <code>fetchLazy()</code> gets you a cursor. That&#39;s what you return, that&#39;s what you keep calling <code>.fetchNext</code> on."}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691570446,"creation_date":1691570446,"answer_id":76865988,"question_id":76863993,"body_markdown":"As mentioned in the comments, the problem is that you&#39;re keeping the processing logic outside of the fetch logic. Just move it inside, e.g. as follows:\r\n\r\n```java\r\nclass RecordService {\r\n    RecordPersistence recordPersistence = new RecordPersistence();\r\n\r\n    public void processRecords() {\r\n\r\n        recordPersistence.fetchRecords(\r\n            (List&lt;Record&gt; records) -&gt; {\r\n                // Code to process them\r\n            }\r\n        );\r\n     }\r\n} \r\n\r\nclass RecordPersistence {\r\n    public List&lt;Record&gt; fetchRecords(Consumer&lt;? super List&lt;Record&gt;&gt; consumer) {\r\n        try (Cursor&lt;Record&gt; cursor = dsl.select...fetchLazy()) {\r\n            while (cursor.hasNext()) {\r\n                consumer.accept(cursor.fetchNext(1000));\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou don&#39;t need any paradigm shift (e.g. async, reactive, etc.) for this type of streaming to work. Just switch from [external to internal iteration][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/224648/521799","title":"Jooq Java Code to handle more than 200k records from a table","body":"<p>As mentioned in the comments, the problem is that you're keeping the processing logic outside of the fetch logic. Just move it inside, e.g. as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class RecordService {\n    RecordPersistence recordPersistence = new RecordPersistence();\n\n    public void processRecords() {\n\n        recordPersistence.fetchRecords(\n            (List&lt;Record&gt; records) -&gt; {\n                // Code to process them\n            }\n        );\n     }\n} \n\nclass RecordPersistence {\n    public List&lt;Record&gt; fetchRecords(Consumer&lt;? super List&lt;Record&gt;&gt; consumer) {\n        try (Cursor&lt;Record&gt; cursor = dsl.select...fetchLazy()) {\n            while (cursor.hasNext()) {\n                consumer.accept(cursor.fetchNext(1000));\n            }\n        }\n    }\n}\n</code></pre>\n<p>You don't need any paradigm shift (e.g. async, reactive, etc.) for this type of streaming to work. Just switch from <a href=\"https://stackoverflow.com/q/224648/521799\">external to internal iteration</a></p>\n"}],"owner":{"account_id":8277763,"reputation":573,"user_id":6223346,"accept_rate":67,"display_name":"Harish"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76865988,"answer_count":1,"score":0,"last_activity_date":1691570446,"creation_date":1691543957,"question_id":76863993,"body_markdown":"The table in my database has more than 200k records and I don&#39;t want to fetch all of them at once in the resultSet to process. I am trying to write a function in a service that calls another persistence class function to bring only 1000 records to process.\r\nOnce it processes the 1000 records, it should fetch the following thousand records. I am using the JOOQ database library in my Java code. I am just sharing a sample skeleton code that I had in my mind. \r\n\r\n    class RecordService {\r\n        RecordPersistence recordPersistence = new RecordPersistence();\r\n\r\n    \tpublic void processRecords() {\r\n    \r\n    \t\tList&lt;Record&gt; records = recordPersistence.fetchRecords();\r\n    \t\t// Code to process them\r\n    \t }\r\n    } \r\n\r\n\r\n    class RecordPersistence {\r\n    \tpublic List&lt;Record&gt;  fetchRecords(){\r\n    \t\t\r\n    \t\tCursor&lt;Record&gt; records = dsl.select...fetchLazy();\r\n    \r\n    \t\twhile (records.hasNext()) {\r\n    \t\t   records.fetchNext(1000);\r\n    \t\t}\r\n    \t\treturn records\r\n    \t}\r\n    }\r\n\r\nHow to return only a few records from the fetchRecords() function? Should I write this is an async function? Is this the correct way to process result? or is there a better way to handle my case?\r\n","title":"Jooq Java Code to handle more than 200k records from a table","body":"<p>The table in my database has more than 200k records and I don't want to fetch all of them at once in the resultSet to process. I am trying to write a function in a service that calls another persistence class function to bring only 1000 records to process.\nOnce it processes the 1000 records, it should fetch the following thousand records. I am using the JOOQ database library in my Java code. I am just sharing a sample skeleton code that I had in my mind.</p>\n<pre><code>class RecordService {\n    RecordPersistence recordPersistence = new RecordPersistence();\n\n    public void processRecords() {\n\n        List&lt;Record&gt; records = recordPersistence.fetchRecords();\n        // Code to process them\n     }\n} \n\n\nclass RecordPersistence {\n    public List&lt;Record&gt;  fetchRecords(){\n        \n        Cursor&lt;Record&gt; records = dsl.select...fetchLazy();\n\n        while (records.hasNext()) {\n           records.fetchNext(1000);\n        }\n        return records\n    }\n}\n</code></pre>\n<p>How to return only a few records from the fetchRecords() function? Should I write this is an async function? Is this the correct way to process result? or is there a better way to handle my case?</p>\n"},{"tags":["java","shell"],"comments":[{"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"score":0,"creation_date":1618524462,"post_id":67090500,"comment_id":118634655,"body_markdown":"This question answers yours: https://stackoverflow.com/questions/38821224/java-use-exec-and-read-output-while-program-is-still-running","body":"This question answers yours: <a href=\"https://stackoverflow.com/questions/38821224/java-use-exec-and-read-output-while-program-is-still-running\" title=\"java use exec and read output while program is still running\">stackoverflow.com/questions/38821224/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6243711,"reputation":1571,"user_id":4856413,"display_name":"sanjeevRm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618401592,"creation_date":1618398603,"answer_id":67090570,"question_id":67090500,"body_markdown":"you can use process builder to read response of command executed\r\n```\r\n         ProcessBuilder pb = new ProcessBuilder();\r\n\t    \tpb.command(cmd);\r\n\t    \tProcess proc = pb.start();\r\n\t    \tproc.waitFor();\r\n\r\n\t    \tInputStream inputStream = proc.getInputStream();\r\n\t    \tBufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\r\n\t    \tString responseLine = &quot;&quot;;\r\n\t    \tStringBuilder output = new StringBuilder();\r\n\t    \twhile (( responseLine = reader.readLine())!= null) {\r\n\t    \t\toutput.append(responseLine + &quot;\\n&quot;);\r\n\t    \t}\r\n```","title":"Java execute shell commands, how to read output in real time?","body":"<p>you can use process builder to read response of command executed</p>\n<pre><code>         ProcessBuilder pb = new ProcessBuilder();\n            pb.command(cmd);\n            Process proc = pb.start();\n            proc.waitFor();\n\n            InputStream inputStream = proc.getInputStream();\n            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n            String responseLine = &quot;&quot;;\n            StringBuilder output = new StringBuilder();\n            while (( responseLine = reader.readLine())!= null) {\n                output.append(responseLine + &quot;\\n&quot;);\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13846532,"reputation":319,"user_id":9995556,"display_name":"pbthorste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691570418,"creation_date":1691570418,"answer_id":76865986,"question_id":67090500,"body_markdown":"Here is one way to display the output from the command in real time by redirecting the output to the same as those of the java process.\r\n\r\n```java\r\nProcessBuilder pb = new ProcessBuilder();\r\npb.command(&quot;./a-script.sh&quot;)\r\npb.inheritIO() // \r\ndef proc = pb.start()\r\nproc.waitFor()\r\n```","title":"Java execute shell commands, how to read output in real time?","body":"<p>Here is one way to display the output from the command in real time by redirecting the output to the same as those of the java process.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ProcessBuilder pb = new ProcessBuilder();\npb.command(&quot;./a-script.sh&quot;)\npb.inheritIO() // \ndef proc = pb.start()\nproc.waitFor()\n</code></pre>\n"}],"owner":{"account_id":21252071,"reputation":1,"user_id":15634181,"display_name":"Question"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1333,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691570418,"creation_date":1618398292,"question_id":67090500,"body_markdown":"Through the following code, I can execute and get the shell command, and get the output, but only after the end of the process, can I get the standard output. How can I get the real-time output when the process is executing       \r\n\r\n\r\n\r\n             Process process = Runtime.getRuntime().exec(command);\r\n             // close process&#39;s output stream.\r\n             process.getOutputStream().close();\r\n\r\n             pIn = process.getInputStream();\r\n             InputStreamReader inputStreamReader = new InputStreamReader(pin, &quot;UTF-8&quot;);\r\n             bufferedReader = new BufferedReader(inputStreamReader);\r\n             String line = null;\r\n             while ((line = bufferedReader.readLine()) != null) {\r\n                 this.buf.append(line + &quot;\\n&quot;);\r\n             }\r\n            \r\n            process.waitfor();\r\n\r\n\r\n","title":"Java execute shell commands, how to read output in real time?","body":"<p>Through the following code, I can execute and get the shell command, and get the output, but only after the end of the process, can I get the standard output. How can I get the real-time output when the process is executing</p>\n<pre><code>         Process process = Runtime.getRuntime().exec(command);\n         // close process's output stream.\n         process.getOutputStream().close();\n\n         pIn = process.getInputStream();\n         InputStreamReader inputStreamReader = new InputStreamReader(pin, &quot;UTF-8&quot;);\n         bufferedReader = new BufferedReader(inputStreamReader);\n         String line = null;\n         while ((line = bufferedReader.readLine()) != null) {\n             this.buf.append(line + &quot;\\n&quot;);\n         }\n        \n        process.waitfor();\n</code></pre>\n"},{"tags":["java","sorting","comparable"],"comments":[{"owner":{"account_id":329656,"reputation":42009,"user_id":653298,"display_name":"Jacob"},"score":0,"creation_date":1306757102,"post_id":6176019,"comment_id":7180792,"body_markdown":"Why don&#39;t you just compare the long-values of `dist` in your compareTo(Tree o) method?","body":"Why don&#39;t you just compare the long-values of <code>dist</code> in your compareTo(Tree o) method?"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":1,"creation_date":1306757122,"post_id":6176019,"comment_id":7180797,"body_markdown":"Strings are compared alphabetically (not really but it&#39;s a good way to think of). Hence, 12 &gt; 111. If you need to compare numbers use numbers, i.e. add one more field long. Or in the worst case compare the result of Long.parseLong(dist)","body":"Strings are compared alphabetically (not really but it&#39;s a good way to think of). Hence, 12 &gt; 111. If you need to compare numbers use numbers, i.e. add one more field long. Or in the worst case compare the result of Long.parseLong(dist)"},{"owner":{"account_id":1963,"reputation":27201,"user_id":2701,"accept_rate":83,"display_name":"Toran Billups"},"score":0,"creation_date":1306759394,"post_id":6176019,"comment_id":7181351,"body_markdown":"Turns out I was actually comparing a double the entire time - sorry guys (went with Double.compare as my actual solution) awarded what I felt was a great answer to the Long problem though - flag it for removal if nothing else","body":"Turns out I was actually comparing a double the entire time - sorry guys (went with Double.compare as my actual solution) awarded what I felt was a great answer to the Long problem though - flag it for removal if nothing else"},{"owner":{"account_id":73570,"reputation":1739,"user_id":211764,"accept_rate":81,"display_name":"Robb Hoff"},"score":0,"creation_date":1413791311,"post_id":6176019,"comment_id":41560717,"body_markdown":"Use &#39;Long.compare(long x, long y)&#39;, see answer below","body":"Use &#39;Long.compare(long x, long y)&#39;, see answer below"}],"answers":[{"tags":[],"owner":{"account_id":66010,"reputation":22927,"user_id":193906,"display_name":"Sanjay T. Sharma"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1306757064,"creation_date":1306757064,"answer_id":6176048,"question_id":6176019,"body_markdown":"It depends on how you want to do things? Do you want to keep the current implementation of Comparable? If yes, use the sort method which takes a Comparator and implement a custom comparator which uses the actual &quot;long&quot; values of the string (`Long.parseLong(dist)`). If no, then just modify the current `compareTo` and use the Long values of the &quot;dist&quot;.\r\n\r\nBTW, I&#39;d revisit the logic and ask myself why &quot;dist&quot; is of type String when it is actually a Long?","title":"Comparing Long values using Collections.sort(object)","body":"<p>It depends on how you want to do things? Do you want to keep the current implementation of Comparable? If yes, use the sort method which takes a Comparator and implement a custom comparator which uses the actual \"long\" values of the string (<code>Long.parseLong(dist)</code>). If no, then just modify the current <code>compareTo</code> and use the Long values of the \"dist\".</p>\n\n<p>BTW, I'd revisit the logic and ask myself why \"dist\" is of type String when it is actually a Long?</p>\n"},{"tags":[],"owner":{"account_id":397191,"reputation":6887,"user_id":761180,"accept_rate":97,"display_name":"astay13"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1306757368,"creation_date":1306757368,"answer_id":6176108,"question_id":6176019,"body_markdown":"Why not\r\n\r\n    public class Tree implements Comparable&lt;Tree&gt; {\r\n        public Long dist;\r\n    \r\n        public int compareTo(Tree o) {\r\n            return this.dist.compareTo(o.dist);\r\n        }\r\n    }","title":"Comparing Long values using Collections.sort(object)","body":"<p>Why not</p>\n\n<pre><code>public class Tree implements Comparable&lt;Tree&gt; {\n    public Long dist;\n\n    public int compareTo(Tree o) {\n        return this.dist.compareTo(o.dist);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":376266,"reputation":169,"user_id":727614,"accept_rate":0,"display_name":"cipher"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1306782440,"creation_date":1306757371,"answer_id":6176109,"question_id":6176019,"body_markdown":"well if the dist variable is actually long then you might try using \r\n\r\n    public int compareTo(Tree o) {\r\n        return Long.valueOf(this.dist).compareTo(Long.valueOf(o.dist));\r\n    }\r\n","title":"Comparing Long values using Collections.sort(object)","body":"<p>well if the dist variable is actually long then you might try using </p>\n\n<pre><code>public int compareTo(Tree o) {\n    return Long.valueOf(this.dist).compareTo(Long.valueOf(o.dist));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"down_vote_count":1,"up_vote_count":22,"is_accepted":true,"score":21,"last_activity_date":1691570199,"creation_date":1306757907,"answer_id":6176199,"question_id":6176019,"body_markdown":"why not actually store a long in there:\r\n\r\n    public class Tree implements Comparable&lt;Tree&gt; {\r\n        public long dist; //value is actually Long\r\n    \r\n        public int compareTo(Tree o) {\r\n            return this.dist &lt; o.dist ? -1 :\r\n                this.dist &gt; o.dist ? 1 : 0;\r\n        }\r\n    }\r\n\r\nthat or first compare the length of the strings and then compare them\r\n\r\n    public String dist; //value is actually Long\r\n  \r\n    public int compareTo(Tree o) {\r\n        if (this.dist.length() != o.dist.length())\r\n          return this.dist.length() &lt; o.dist.length() ? -1 : 1;//assume the shorter string is a smaller value\r\n        else return this.dist.compareTo(o.dist);\r\n    }","title":"Comparing Long values using Collections.sort(object)","body":"<p>why not actually store a long in there:</p>\n<pre><code>public class Tree implements Comparable&lt;Tree&gt; {\n    public long dist; //value is actually Long\n\n    public int compareTo(Tree o) {\n        return this.dist &lt; o.dist ? -1 :\n            this.dist &gt; o.dist ? 1 : 0;\n    }\n}\n</code></pre>\n<p>that or first compare the length of the strings and then compare them</p>\n<pre><code>public String dist; //value is actually Long\n\npublic int compareTo(Tree o) {\n    if (this.dist.length() != o.dist.length())\n      return this.dist.length() &lt; o.dist.length() ? -1 : 1;//assume the shorter string is a smaller value\n    else return this.dist.compareTo(o.dist);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":73570,"reputation":1739,"user_id":211764,"accept_rate":81,"display_name":"Robb Hoff"},"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1591993568,"creation_date":1413791184,"answer_id":26460724,"question_id":6176019,"body_markdown":"# `Long.compare( x , y )`\r\n\r\nIf you have an object that you want to sort on a `long` value, and it implements [`Comparable`][1], in Java 7+ you can use [`Long.compare(long x, long y)`][2] (which returns an **`int`**)\r\n\r\nE.g.\r\n\r\n\r\n    public class MyObject implements Comparable&lt;MyObject&gt;\r\n    {\r\n      public long id;\r\n    \r\n      @Override\r\n      public int compareTo(MyObject obj) {\r\n        return Long.compare(this.id, obj.id);\r\n      }\r\n    }\r\n\r\nCall `Collections.sort(my_objects)` where my_objects is something like\r\n\r\n      List&lt;MyObject&gt; my_objects = new ArrayList&lt;MyObject&gt;();\r\n      // + some code to populate your list\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html#compare(long,long)","title":"Comparing Long values using Collections.sort(object)","body":"<h1><code>Long.compare( x , y )</code></h1>\n\n<p>If you have an object that you want to sort on a <code>long</code> value, and it implements <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\" rel=\"noreferrer\"><code>Comparable</code></a>, in Java 7+ you can use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html#compare(long,long)\" rel=\"noreferrer\"><code>Long.compare(long x, long y)</code></a> (which returns an <strong><code>int</code></strong>)</p>\n\n<p>E.g.</p>\n\n<pre><code>public class MyObject implements Comparable&lt;MyObject&gt;\n{\n  public long id;\n\n  @Override\n  public int compareTo(MyObject obj) {\n    return Long.compare(this.id, obj.id);\n  }\n}\n</code></pre>\n\n<p>Call <code>Collections.sort(my_objects)</code> where my_objects is something like</p>\n\n<pre><code>  List&lt;MyObject&gt; my_objects = new ArrayList&lt;MyObject&gt;();\n  // + some code to populate your list\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1449190807,"creation_date":1449190807,"answer_id":34079155,"question_id":6176019,"body_markdown":"Just an example I made for sorting Files by date using a Long comparator:\r\n\r\n    public File[] getAllFoldersByDescendingDate(File folder) {\r\n        if (!folder.isDirectory()) {\r\n            return null;\r\n        }\r\n        allFiles = folder.listFiles();\r\n        Arrays.sort(allFiles, new Comparator&lt;File&gt;()\r\n        {\r\n            public int compare(final File o1, final File o2)\r\n            {\r\n                return Long.compare(o2.lastModified(), o1.lastModified());\r\n            }\r\n        });\r\n        return allFiles;\r\n    }","title":"Comparing Long values using Collections.sort(object)","body":"<p>Just an example I made for sorting Files by date using a Long comparator:</p>\n\n<pre><code>public File[] getAllFoldersByDescendingDate(File folder) {\n    if (!folder.isDirectory()) {\n        return null;\n    }\n    allFiles = folder.listFiles();\n    Arrays.sort(allFiles, new Comparator&lt;File&gt;()\n    {\n        public int compare(final File o1, final File o2)\n        {\n            return Long.compare(o2.lastModified(), o1.lastModified());\n        }\n    });\n    return allFiles;\n}\n</code></pre>\n"}],"owner":{"account_id":1963,"reputation":27201,"user_id":2701,"accept_rate":83,"display_name":"Toran Billups"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59749,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":6176199,"answer_count":6,"score":26,"last_activity_date":1691570199,"creation_date":1306756888,"question_id":6176019,"body_markdown":"I&#39;m trying to sort a simple list of objects by a long - the below isn&#39;t working because one of the long strings is pushed to the top simply because it starts with a lower number. So I&#39;m looking for a way to sort these by the actual long values directly\r\n\r\nThe current obj implementation looks something like the below. In the class I&#39;m using this I call Collections.sort(trees);\r\n\r\n    public class Tree implements Comparable&lt;Tree&gt; {\r\n        public String dist; //value is actually Long\r\n    \r\n        public int compareTo(Tree o) {\r\n            return this.dist.compareTo(o.dist);\r\n        }\r\n    }","title":"Comparing Long values using Collections.sort(object)","body":"<p>I'm trying to sort a simple list of objects by a long - the below isn't working because one of the long strings is pushed to the top simply because it starts with a lower number. So I'm looking for a way to sort these by the actual long values directly</p>\n\n<p>The current obj implementation looks something like the below. In the class I'm using this I call Collections.sort(trees);</p>\n\n<pre><code>public class Tree implements Comparable&lt;Tree&gt; {\n    public String dist; //value is actually Long\n\n    public int compareTo(Tree o) {\n        return this.dist.compareTo(o.dist);\n    }\n}\n</code></pre>\n"},{"tags":["java","excel","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":17482530,"reputation":48,"user_id":12676243,"display_name":"Chetan pothkar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578588018,"creation_date":1578588018,"answer_id":59668534,"question_id":49689317,"body_markdown":"Use below code for Boolean value\r\n\r\n     private void writeToDocument(XSSFWorkbook workbook) {\r\n            Sheet sheet = workbook.createSheet(&quot;testSheet&quot;);\r\n            Row row = sheet.createRow(0);\r\n            Cell cell = row.createCell(0);\r\n            cell.setCellType(HSSFCell.CELL_TYPE_BOOLEAN);\r\n            cell.setCellValue((Boolean) true);\r\n        }\r\n\r\n ","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>Use below code for Boolean value</p>\n\n<pre><code> private void writeToDocument(XSSFWorkbook workbook) {\n        Sheet sheet = workbook.createSheet(\"testSheet\");\n        Row row = sheet.createRow(0);\n        Cell cell = row.createCell(0);\n        cell.setCellType(HSSFCell.CELL_TYPE_BOOLEAN);\n        cell.setCellValue((Boolean) true);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3009750,"reputation":757,"user_id":2553521,"display_name":"edwgiz"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1578831800,"creation_date":1578749541,"answer_id":59694876,"question_id":49689317,"body_markdown":"When appropriate overloaded version of `setCellValue` is used the cell types will be assigned automatically, for example\r\n``` lang-java\r\ncell.setCellValue(true);\r\nSystem.out.println(cell.getCellType());\r\n```\r\nprints `BOOLEAN`\r\n\r\n\r\nChecked on `org.apache.poi:poi:4.1.1`","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>When appropriate overloaded version of <code>setCellValue</code> is used the cell types will be assigned automatically, for example</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>cell.setCellValue(true);\nSystem.out.println(cell.getCellType());\n</code></pre>\n\n<p>prints <code>BOOLEAN</code></p>\n\n<p>Checked on <code>org.apache.poi:poi:4.1.1</code></p>\n"},{"tags":[],"owner":{"account_id":10310871,"reputation":25632,"user_id":7606764,"display_name":"Andronicus"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1578908975,"creation_date":1578908975,"answer_id":59714095,"question_id":49689317,"body_markdown":"You can use the following:\r\n\r\n    Row row = sheet.createRow(lineNumber);\r\n    Cell cell = row.createCell(1, CellType.BOOLEAN);\r\n\r\nThis will create a cell styled to persist boolean.","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>You can use the following:</p>\n\n<pre><code>Row row = sheet.createRow(lineNumber);\nCell cell = row.createCell(1, CellType.BOOLEAN);\n</code></pre>\n\n<p>This will create a cell styled to persist boolean.</p>\n"},{"tags":[],"owner":{"account_id":9316795,"reputation":1583,"user_id":6916890,"display_name":"lazylead"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1579076913,"creation_date":1579076913,"answer_id":59747496,"question_id":49689317,"body_markdown":"This is how to customize a date, potentially you may try it with boolean\r\n\r\n    final XSSFCellStyle date = sheet.getWorkbook().createCellStyle();\r\n    date.setDataFormat(\r\n        sheet.getWorkbook()\r\n             .getCreationHelper()\r\n             .createDataFormat()\r\n             .getFormat(pattern)\r\n    );\r\n    cell = row.createCell(index);\r\n    cell.setCellStyle(date);\r\n\r\n","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>This is how to customize a date, potentially you may try it with boolean</p>\n\n<pre><code>final XSSFCellStyle date = sheet.getWorkbook().createCellStyle();\ndate.setDataFormat(\n    sheet.getWorkbook()\n         .getCreationHelper()\n         .createDataFormat()\n         .getFormat(pattern)\n);\ncell = row.createCell(index);\ncell.setCellStyle(date);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3720487,"reputation":3769,"user_id":3095671,"accept_rate":100,"display_name":"mpr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691568630,"creation_date":1691568630,"answer_id":76865785,"question_id":49689317,"body_markdown":"This is not a problem caused by the type of cell, because `Cell.setCellValue(boolean value)` sets correct cell type. You need an appropiate `CellStyle`.\r\n\r\nFirst create a style with boolean formatting:\r\n\r\n    public CellStyle createBooleanCellStyle(Workbook workbook){\r\n       var style = workbook.createCellStyle();\r\n       var format = workbook.getCreationHelper().createDataFormat().getFormat(&quot;BOOLEAN&quot;);\r\n       style.setDataFormat(format);\r\n       return style;\r\n    }\r\n\r\nThen use this style in your cell:\r\n    \r\n    public void set(Cell cell, boolean value, CellStyle  cellStyle){\r\n        cell.setCellValue(value);\r\n        cell.setCellStyle(cellStyle);\r\n    }\r\n\r\nNote: do not create new style for each cell, but create one style and reuse it.","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>This is not a problem caused by the type of cell, because <code>Cell.setCellValue(boolean value)</code> sets correct cell type. You need an appropiate <code>CellStyle</code>.</p>\n<p>First create a style with boolean formatting:</p>\n<pre><code>public CellStyle createBooleanCellStyle(Workbook workbook){\n   var style = workbook.createCellStyle();\n   var format = workbook.getCreationHelper().createDataFormat().getFormat(&quot;BOOLEAN&quot;);\n   style.setDataFormat(format);\n   return style;\n}\n</code></pre>\n<p>Then use this style in your cell:</p>\n<pre><code>public void set(Cell cell, boolean value, CellStyle  cellStyle){\n    cell.setCellValue(value);\n    cell.setCellStyle(cellStyle);\n}\n</code></pre>\n<p>Note: do not create new style for each cell, but create one style and reuse it.</p>\n"}],"owner":{"account_id":13307082,"reputation":61,"user_id":9606518,"display_name":"Korbinian Reffler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1909,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1691568630,"creation_date":1523005947,"question_id":49689317,"body_markdown":"I would like to write a boolean-value into an excel-cell, but instead of setting the cellStyle to &quot;logic&quot; the cellStyle will become &quot;number&quot; instead.\r\n\r\n    private void writeToDocument(XSSFWorkbook workbook) {\r\n        Sheet sheet = workbook.createSheet(&quot;testSheet&quot;);\r\n        Row row = sheet.createRow(0);\r\n        Cell cell = row.createCell(0);\r\n        cell.setCellValue(true);\r\n    }\r\n\r\nI already tryied\r\n\r\n    CellStyle cellStyle = workbook.createCellStyle();\r\n    cellStyle.setDataFormat([short s]);\r\n    cell.setCellStyle(cellStyle);\r\n\r\nbut no short s between 0 and 49 did the job.","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>I would like to write a boolean-value into an excel-cell, but instead of setting the cellStyle to \"logic\" the cellStyle will become \"number\" instead.</p>\n\n<pre><code>private void writeToDocument(XSSFWorkbook workbook) {\n    Sheet sheet = workbook.createSheet(\"testSheet\");\n    Row row = sheet.createRow(0);\n    Cell cell = row.createCell(0);\n    cell.setCellValue(true);\n}\n</code></pre>\n\n<p>I already tryied</p>\n\n<pre><code>CellStyle cellStyle = workbook.createCellStyle();\ncellStyle.setDataFormat([short s]);\ncell.setCellStyle(cellStyle);\n</code></pre>\n\n<p>but no short s between 0 and 49 did the job.</p>\n"},{"tags":["java","swing","jframe","resize","window"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1557012982,"post_id":55987389,"comment_id":98624078,"body_markdown":"You need to show more of your code. Like where to you override paintComponent().  And do not do the following:  1) extend JFrame, 2) Override Paint in JFrame().  You should create a JPanel and paint in that.","body":"You need to show more of your code. Like where to you override paintComponent().  And do not do the following:  1) extend JFrame, 2) Override Paint in JFrame().  You should create a JPanel and paint in that."},{"owner":{"account_id":8674619,"reputation":655,"user_id":6492354,"accept_rate":45,"display_name":"Daniel Williams"},"score":0,"creation_date":1557018284,"post_id":55987389,"comment_id":98624704,"body_markdown":"As far as I know, there is no good way to fix that problem.  Windows OS is responsible for managing many aspects of window resizing that can&#39;t be controlled from within Java.  My suggestion is to try calling &quot;paintImmediately(...)&quot; instead of &quot;repaint()&quot;.  You could also set the background of the JFrame to white so it&#39;s not as noticeable.","body":"As far as I know, there is no good way to fix that problem.  Windows OS is responsible for managing many aspects of window resizing that can&#39;t be controlled from within Java.  My suggestion is to try calling &quot;paintImmediately(...)&quot; instead of &quot;repaint()&quot;.  You could also set the background of the JFrame to white so it&#39;s not as noticeable."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1557026650,"post_id":55987389,"comment_id":98625687,"body_markdown":"Not sure why you are constantly updating the constraints. I would suggestion you can probably use a different layout manager, maybe the BorderLayout.","body":"Not sure why you are constantly updating the constraints. I would suggestion you can probably use a different layout manager, maybe the BorderLayout."},{"owner":{"account_id":15828804,"reputation":83,"user_id":11420832,"display_name":"P tray"},"score":0,"creation_date":1557049752,"post_id":55987389,"comment_id":98629359,"body_markdown":"@WJS That is exactly what I do.","body":"@WJS That is exactly what I do."},{"owner":{"account_id":15828804,"reputation":83,"user_id":11420832,"display_name":"P tray"},"score":0,"creation_date":1557049829,"post_id":55987389,"comment_id":98629378,"body_markdown":"@camickr I update my constraints to make sure that the panel that has the circle is always as large as the window so that it never goes off-screen.","body":"@camickr I update my constraints to make sure that the panel that has the circle is always as large as the window so that it never goes off-screen."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1557060106,"post_id":55987389,"comment_id":98631881,"body_markdown":"You need to show your code so we can help determine the problem.","body":"You need to show your code so we can help determine the problem."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1557080952,"post_id":55987389,"comment_id":98637487,"body_markdown":"*the circle is always as large as the window so that it never goes off-screen.* - which is exactly what the `BorderLayout` does and not constraints are necessary. Post your [mcve] if you need more help.","body":"<i>the circle is always as large as the window so that it never goes off-screen.</i> - which is exactly what the <code>BorderLayout</code> does and not constraints are necessary. Post your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> if you need more help."}],"answers":[{"tags":[],"owner":{"account_id":17674331,"reputation":91,"user_id":12829667,"display_name":"MontyHimself"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1618132924,"creation_date":1618132924,"answer_id":67043322,"question_id":55987389,"body_markdown":"*I have only tested this on Windows 10.*\r\n\r\nThis apparently has to do with the native window decorations of the window that hosts the JFrame. When disabling the native window decorations, you can remove the stuttering resizes and the black background bleeding through. See the documentation for `JFrame.setDefaultLookAndFeelDecorated(boolean)`:\r\n\r\n&gt; Provides a hint as to whether or not newly created JFrames should have their Window decorations (such as borders, widgets to close the window, title...) provided by the current look and feel. If defaultLookAndFeelDecorated is true, the current LookAndFeel supports providing window decorations, and the current window manager supports undecorated windows, then newly created JFrames will have their Window decorations provided by the current LookAndFeel. Otherwise, newly created JFrames will have their Window decorations provided by the current window manager.\r\n\r\nThus, you have two options. Either set the property once before you create your JFrame:\r\n\r\n    JFrame.setDefaultLookAndFeelDecorated(true);\r\n    JFrame frame = new JFrame();\r\n\r\nOr do it after the creation of the JFrame:\r\n\r\n    JFrame frame = new JFrame();\r\n    frame.setUndecorated(true);\r\n    frame.setWindowDecorationStyle(JRootPane.FRAME);\r\n\r\nNote that in either case, you are bound to use Swing&#39;s Look and Feel for the window decorations. The title bar and handles of the window are therefore going to look different than before.","title":"How to Remove Black Rectangle on Window Resize?","body":"<p><em>I have only tested this on Windows 10.</em></p>\n<p>This apparently has to do with the native window decorations of the window that hosts the JFrame. When disabling the native window decorations, you can remove the stuttering resizes and the black background bleeding through. See the documentation for <code>JFrame.setDefaultLookAndFeelDecorated(boolean)</code>:</p>\n<blockquote>\n<p>Provides a hint as to whether or not newly created JFrames should have their Window decorations (such as borders, widgets to close the window, title...) provided by the current look and feel. If defaultLookAndFeelDecorated is true, the current LookAndFeel supports providing window decorations, and the current window manager supports undecorated windows, then newly created JFrames will have their Window decorations provided by the current LookAndFeel. Otherwise, newly created JFrames will have their Window decorations provided by the current window manager.</p>\n</blockquote>\n<p>Thus, you have two options. Either set the property once before you create your JFrame:</p>\n<pre><code>JFrame.setDefaultLookAndFeelDecorated(true);\nJFrame frame = new JFrame();\n</code></pre>\n<p>Or do it after the creation of the JFrame:</p>\n<pre><code>JFrame frame = new JFrame();\nframe.setUndecorated(true);\nframe.setWindowDecorationStyle(JRootPane.FRAME);\n</code></pre>\n<p>Note that in either case, you are bound to use Swing's Look and Feel for the window decorations. The title bar and handles of the window are therefore going to look different than before.</p>\n"}],"owner":{"account_id":15828804,"reputation":83,"user_id":11420832,"display_name":"P tray"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691568556,"creation_date":1557009510,"question_id":55987389,"body_markdown":"I am developing a JFrame window with Swing and AWT, and when I resize the window, it looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see, a lot of times when I resize the window, it shows a black rectangle where it is being resized and it doesn&#39;t go away until you pause for a moment. Additionally, the circle doesn&#39;t always update accurately with my resize event:\r\n\r\n    frame.addComponentListener(new ComponentAdapter() {\r\n        public void componentResized(ComponentEvent componentEvent) {\r\n            width = frame.getWidth();\r\n            height = frame.getHeight();\r\n            springLayout.putConstraint(SpringLayout.SOUTH, panel, height, SpringLayout.NORTH, frame.getContentPane());\r\n            springLayout.putConstraint(SpringLayout.EAST, panel, width, SpringLayout.WEST, frame.getContentPane());\r\n            panel.repaint();\r\n        }\r\n    });\r\n\r\nThat&#39;s beside the point (though it is possible the two problems are linked). I have only ever encountered this problem when using Swing. JavaFX has never given me this problem. **Is there any way I can remove the black rectangle when the window is resized?**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zbDts.gif","title":"How to Remove Black Rectangle on Window Resize?","body":"<p>I am developing a JFrame window with Swing and AWT, and when I resize the window, it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/zbDts.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zbDts.gif\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, a lot of times when I resize the window, it shows a black rectangle where it is being resized and it doesn't go away until you pause for a moment. Additionally, the circle doesn't always update accurately with my resize event:</p>\n<pre><code>frame.addComponentListener(new ComponentAdapter() {\n    public void componentResized(ComponentEvent componentEvent) {\n        width = frame.getWidth();\n        height = frame.getHeight();\n        springLayout.putConstraint(SpringLayout.SOUTH, panel, height, SpringLayout.NORTH, frame.getContentPane());\n        springLayout.putConstraint(SpringLayout.EAST, panel, width, SpringLayout.WEST, frame.getContentPane());\n        panel.repaint();\n    }\n});\n</code></pre>\n<p>That's beside the point (though it is possible the two problems are linked). I have only ever encountered this problem when using Swing. JavaFX has never given me this problem. <strong>Is there any way I can remove the black rectangle when the window is resized?</strong></p>\n"},{"tags":["java","oracle-cloud-infrastructure"],"answers":[{"tags":[],"owner":{"account_id":19580785,"reputation":41,"user_id":14329906,"display_name":"andrei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691568472,"creation_date":1691568472,"answer_id":76865765,"question_id":76841748,"body_markdown":"If you intend to interact with OCI resources from the function execution environment, you should consider using Resource Principal authorization as you are not including `~/.oci/config` in the container.\r\n\r\nhttps://blogs.oracle.com/developers/post/instance-and-resource-principal-authentication-with-the-oci-typescriptjavascript-sdk\r\n\r\nNote that you need to create a dynamic policy and a policy to allow the function to manage the LoadBalancers in tenancy/compartment: https://redthunder.blog/2020/09/21/secure-inter-service-communication-in-oci/\r\n\r\nHere is an example using Resource Principal in Java:\r\nhttps://github.com/oracle/oci-java-sdk/blob/master/bmc-examples/src/main/java/FunctionsEphemeralResourcePrincipalAuthenticationDetailsProviderExample.java\r\n","title":"Oracle OCI Function - Config file not accessible","body":"<p>If you intend to interact with OCI resources from the function execution environment, you should consider using Resource Principal authorization as you are not including <code>~/.oci/config</code> in the container.</p>\n<p><a href=\"https://blogs.oracle.com/developers/post/instance-and-resource-principal-authentication-with-the-oci-typescriptjavascript-sdk\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/developers/post/instance-and-resource-principal-authentication-with-the-oci-typescriptjavascript-sdk</a></p>\n<p>Note that you need to create a dynamic policy and a policy to allow the function to manage the LoadBalancers in tenancy/compartment: <a href=\"https://redthunder.blog/2020/09/21/secure-inter-service-communication-in-oci/\" rel=\"nofollow noreferrer\">https://redthunder.blog/2020/09/21/secure-inter-service-communication-in-oci/</a></p>\n<p>Here is an example using Resource Principal in Java:\n<a href=\"https://github.com/oracle/oci-java-sdk/blob/master/bmc-examples/src/main/java/FunctionsEphemeralResourcePrincipalAuthenticationDetailsProviderExample.java\" rel=\"nofollow noreferrer\">https://github.com/oracle/oci-java-sdk/blob/master/bmc-examples/src/main/java/FunctionsEphemeralResourcePrincipalAuthenticationDetailsProviderExample.java</a></p>\n"}],"owner":{"account_id":21540228,"reputation":23,"user_id":15878101,"display_name":"KevLen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76865765,"answer_count":1,"score":2,"last_activity_date":1691568472,"creation_date":1691240232,"question_id":76841748,"body_markdown":"Hello stackoverflow people!\r\n\r\nI’m deploying a java function with Oracle cloud Shell.\r\n\r\nI made all necessary configurations :\r\n- user creation\r\n- api token creation\r\n- check if ~/.oci/config file is properly created (with DEFAULT settings)\r\n\r\nAfter that I deployed my Java function on a docker container with the command. \r\n```\r\nfn deploy —-app &lt;app name&gt;\r\n```\r\n\r\nThen I called my function:\r\n\r\n```\r\nfn invoke &lt;app name&gt; &lt;function name&gt;\r\n```\r\n\r\nThe goal of my function is to update my Load Balancer RuleSet. \r\n\r\nFinally I had an error message : \r\n\r\n```\r\nError 502 : FunctionInvokeExecutionError \r\n```\r\n\r\nNot a lot of traces available, but I identified that the following code was on error.\r\n\r\n```\r\n  final ConfigFileReader.ConfigFile configFile = \r\n                    ConfigFileReader.parse(“~/.oci/config“, “DEFAULT“);\r\n```\r\n\r\nThe folder and the config file are not accessible by the function.\r\n\r\n\r\nI tried to replace the config file by a new one generated with the command line \r\n```\r\noci setup config \r\n```\r\n\r\nI tried to test the function in local (with the config file in local as well) =&gt; it works.\r\n\r\nThank you very much for your help!\r\n","title":"Oracle OCI Function - Config file not accessible","body":"<p>Hello stackoverflow people!</p>\n<p>I’m deploying a java function with Oracle cloud Shell.</p>\n<p>I made all necessary configurations :</p>\n<ul>\n<li>user creation</li>\n<li>api token creation</li>\n<li>check if ~/.oci/config file is properly created (with DEFAULT settings)</li>\n</ul>\n<p>After that I deployed my Java function on a docker container with the command.</p>\n<pre><code>fn deploy —-app &lt;app name&gt;\n</code></pre>\n<p>Then I called my function:</p>\n<pre><code>fn invoke &lt;app name&gt; &lt;function name&gt;\n</code></pre>\n<p>The goal of my function is to update my Load Balancer RuleSet.</p>\n<p>Finally I had an error message :</p>\n<pre><code>Error 502 : FunctionInvokeExecutionError \n</code></pre>\n<p>Not a lot of traces available, but I identified that the following code was on error.</p>\n<pre><code>  final ConfigFileReader.ConfigFile configFile = \n                    ConfigFileReader.parse(“~/.oci/config“, “DEFAULT“);\n</code></pre>\n<p>The folder and the config file are not accessible by the function.</p>\n<p>I tried to replace the config file by a new one generated with the command line</p>\n<pre><code>oci setup config \n</code></pre>\n<p>I tried to test the function in local (with the config file in local as well) =&gt; it works.</p>\n<p>Thank you very much for your help!</p>\n"},{"tags":["java","kotlin","android-pendingintent","paho","android-12"],"comments":[{"owner":{"account_id":7949816,"reputation":168,"user_id":6000956,"display_name":"Myself"},"score":0,"creation_date":1645206907,"post_id":71155187,"comment_id":125818376,"body_markdown":"Did you find any solution for this even I got the same error? Please post the answer.","body":"Did you find any solution for this even I got the same error? Please post the answer."},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1645364080,"post_id":71155187,"comment_id":125846529,"body_markdown":"I have not found a solution yet.","body":"I have not found a solution yet."},{"owner":{"account_id":7949816,"reputation":168,"user_id":6000956,"display_name":"Myself"},"score":0,"creation_date":1645436228,"post_id":71155187,"comment_id":125862185,"body_markdown":"Use this jar file for a temporary solution for &#39;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;&#39;  until they fix the solution. This works for me\nhttps://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0","body":"Use this jar file for a temporary solution for &#39;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;&#39;  until they fix the solution. This works for me <a href=\"https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0\" rel=\"nofollow noreferrer\">github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0</a>"},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1646147032,"post_id":71155187,"comment_id":126048340,"body_markdown":"can you please work me through the procedure","body":"can you please work me through the procedure"},{"owner":{"account_id":7949816,"reputation":168,"user_id":6000956,"display_name":"Myself"},"score":0,"creation_date":1646581277,"post_id":71155187,"comment_id":126153877,"body_markdown":"Download the &quot;serviceLibrary-release.aar&quot; file from the https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0   \n add it to the project then remove the &quot;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&quot; dependency from Gradle. \nimport the Service class from the jar library. &quot;import info.mqtt.android.service.MqttAndroidClient&quot;.\nHow to add the jar file to the project is in the below link\n&quot;https://www.geeksforgeeks.org/how-to-import-external-jar-files-in-android-studio/&quot;","body":"Download the &quot;serviceLibrary-release.aar&quot; file from the <a href=\"https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0\" rel=\"nofollow noreferrer\">github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0</a>     add it to the project then remove the &quot;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&quot; dependency from Gradle.  import the Service class from the jar library. &quot;import info.mqtt.android.service.MqttAndroidClient&quot;. How to add the jar file to the project is in the below link &quot;<a href=\"https://www.geeksforgeeks.org/how-to-import-external-jar-files-in-android-studio/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a>&quot;"},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1646734991,"post_id":71155187,"comment_id":126191868,"body_markdown":"Wow! you saved an entire project. Thanks a lot. @Myself","body":"Wow! you saved an entire project. Thanks a lot. @Myself"},{"owner":{"account_id":18919046,"reputation":159,"user_id":13803453,"display_name":"garrettb"},"score":0,"creation_date":1684518345,"post_id":71155187,"comment_id":134534126,"body_markdown":"Hi. I have the same issue. I am working with this project: https://github.com/leonardocavagnis/MQTTClientSample_Android. And I get the same error. When I perform the changes above, that you recommend, I get a new error for the &quot;import info.mqtt.android.service.MqttAndroidClient&quot;, it cannot resolve &#39;info&#39;","body":"Hi. I have the same issue. I am working with this project: <a href=\"https://github.com/leonardocavagnis/MQTTClientSample_Android\" rel=\"nofollow noreferrer\">github.com/leonardocavagnis/MQTTClientSample_Android</a>. And I get the same error. When I perform the changes above, that you recommend, I get a new error for the &quot;import info.mqtt.android.service.MqttAndroidClient&quot;, it cannot resolve &#39;info&#39;"}],"answers":[{"tags":[],"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1645446995,"creation_date":1645446995,"answer_id":71206428,"question_id":71155187,"body_markdown":"Update the library of firebase:\r\n\r\nimplementation platform(&#39;com.google.firebase:firebase-bom:29.1.0&#39;)\r\nimplementation &#39;com.google.firebase:firebase-messaging&#39;\r\n\r\nand remove implementation &#39;com.google.firebase:firebase-messaging:23.0.0&#39;\r\n","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>Update the library of firebase:</p>\n<p>implementation platform('com.google.firebase:firebase-bom:29.1.0')\nimplementation 'com.google.firebase:firebase-messaging'</p>\n<p>and remove implementation 'com.google.firebase:firebase-messaging:23.0.0'</p>\n"},{"tags":[],"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645618078,"creation_date":1645618078,"answer_id":71236658,"question_id":71155187,"body_markdown":"You need to replace &quot;PendingIntent.FLAG_ONE_SHOT&quot; or &quot;PendingIntent.FLAG_UPDATE_CURRENT&quot; with &quot;PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE&quot;\r\n\r\nexample:\r\n\r\nalarmIntent = PendingIntent.getBroadcast(context, 0, new Intent(context, AutostartReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>You need to replace &quot;PendingIntent.FLAG_ONE_SHOT&quot; or &quot;PendingIntent.FLAG_UPDATE_CURRENT&quot; with &quot;PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE&quot;</p>\n<p>example:</p>\n<p>alarmIntent = PendingIntent.getBroadcast(context, 0, new Intent(context, AutostartReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);</p>\n"},{"tags":[],"owner":{"account_id":7949816,"reputation":168,"user_id":6000956,"display_name":"Myself"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1646802364,"creation_date":1646802364,"answer_id":71404563,"question_id":71155187,"body_markdown":"If you are using the MQTT library they have not updated for the Android 12. So when you use Android 12 as the target version it throws an error in PendingIntent. \r\nFor a temporary solution, I had found a library they had upgraded for compatibility with Android 12. \r\n[MQTT service library][1]\r\n\r\n\r\nDownload the &quot;serviceLibrary-release.aar&quot; and add it to your project. Then remove the &quot;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&quot; dependency from Gradle. Use &quot;import info.mqtt.android.service.MqttAndroidClient&quot; wherever you are using.\r\n \r\n[How to import aar file][2]\r\n\r\n\r\n  [1]: https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0\r\n  [2]: https://www.geeksforgeeks.org/how-to-import-external-jar-files-in-android-studio/\r\n\r\nThis solved my MQTT library issues. ","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>If you are using the MQTT library they have not updated for the Android 12. So when you use Android 12 as the target version it throws an error in PendingIntent.\nFor a temporary solution, I had found a library they had upgraded for compatibility with Android 12.\n<a href=\"https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0\" rel=\"nofollow noreferrer\">MQTT service library</a></p>\n<p>Download the &quot;serviceLibrary-release.aar&quot; and add it to your project. Then remove the &quot;'org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&quot; dependency from Gradle. Use &quot;import info.mqtt.android.service.MqttAndroidClient&quot; wherever you are using.</p>\n<p><a href=\"https://www.geeksforgeeks.org/how-to-import-external-jar-files-in-android-studio/\" rel=\"nofollow noreferrer\">How to import aar file</a></p>\n<p>This solved my MQTT library issues.</p>\n"},{"tags":[],"owner":{"account_id":9585965,"reputation":423,"user_id":7118726,"display_name":"Gmacv"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1679681106,"creation_date":1649751724,"answer_id":71839305,"question_id":71155187,"body_markdown":"The [Eclipse Paho MQTT library][1] is not updated for Android 12 pending Intents. Until then, we can use [this MQTT client][2] instead.\r\nInstead of using a jar file which was advised in [myself&#39;s answer][3], I would recommend to use gradle dependancies.\r\n\r\nIn App Gradle, comment this eclipse service dependancy:\r\n\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;\r\n\r\n&amp; Add these instead where 3.3.5 is the current version:\r\n\r\n    //new mqtt library that supports android 12\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    implementation &#39;com.github.hannesa2:paho.mqtt.android:3.3.5&#39;\r\n\r\nDo not remove the eclipse client dependancy,\r\n\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5&#39;\r\n\r\nFor imports, remove this eclipse import\r\n\r\n    import org.eclipse.paho.android.service.MqttAndroidClient;\r\n\r\n&amp; replace it with the new:\r\n\r\n    import info.mqtt.android.service.MqttAndroidClient;\r\n\r\nFor MQTT android client, add the last Ack param like this\r\n\r\n    client = new MqttAndroidClient(context, serverURI, clientId, Ack.AUTO_ACK);\r\n\r\nAdditionally, if you were using try catch with `MqttException` then you can comment it up as the new library doesn&#39;t require the same.\r\n\r\n\r\n  [1]: https://github.com/eclipse/paho.mqtt.android\r\n  [2]: https://github.com/hannesa2/paho.mqtt.android\r\n  [3]: https://stackoverflow.com/a/71404563/7118726","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>The <a href=\"https://github.com/eclipse/paho.mqtt.android\" rel=\"noreferrer\">Eclipse Paho MQTT library</a> is not updated for Android 12 pending Intents. Until then, we can use <a href=\"https://github.com/hannesa2/paho.mqtt.android\" rel=\"noreferrer\">this MQTT client</a> instead.\nInstead of using a jar file which was advised in <a href=\"https://stackoverflow.com/a/71404563/7118726\">myself's answer</a>, I would recommend to use gradle dependancies.</p>\n<p>In App Gradle, comment this eclipse service dependancy:</p>\n<pre><code>implementation 'org.eclipse.paho:org.eclipse.paho.android.service:1.1.1'\n</code></pre>\n<p>&amp; Add these instead where 3.3.5 is the current version:</p>\n<pre><code>//new mqtt library that supports android 12\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.github.hannesa2:paho.mqtt.android:3.3.5'\n</code></pre>\n<p>Do not remove the eclipse client dependancy,</p>\n<pre><code>implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5'\n</code></pre>\n<p>For imports, remove this eclipse import</p>\n<pre><code>import org.eclipse.paho.android.service.MqttAndroidClient;\n</code></pre>\n<p>&amp; replace it with the new:</p>\n<pre><code>import info.mqtt.android.service.MqttAndroidClient;\n</code></pre>\n<p>For MQTT android client, add the last Ack param like this</p>\n<pre><code>client = new MqttAndroidClient(context, serverURI, clientId, Ack.AUTO_ACK);\n</code></pre>\n<p>Additionally, if you were using try catch with <code>MqttException</code> then you can comment it up as the new library doesn't require the same.</p>\n"},{"tags":[],"owner":{"account_id":3846181,"reputation":31,"user_id":9681342,"display_name":"Somsak Elect"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657378050,"creation_date":1657378050,"answer_id":72922323,"question_id":71155187,"body_markdown":"This is [Java library][1] that modified from [paho.mqtt.android][2] library. It is fixed for Android 12\r\n\r\n\r\n  [1]: https://github.com/ElectApp/MyMQTT\r\n  [2]: https://github.com/eclipse/paho.mqtt.android","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>This is <a href=\"https://github.com/ElectApp/MyMQTT\" rel=\"nofollow noreferrer\">Java library</a> that modified from <a href=\"https://github.com/eclipse/paho.mqtt.android\" rel=\"nofollow noreferrer\">paho.mqtt.android</a> library. It is fixed for Android 12</p>\n"},{"tags":[],"owner":{"account_id":12057644,"reputation":1537,"user_id":8817821,"display_name":"Mehrdad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677056844,"creation_date":1677056844,"answer_id":75530364,"question_id":71155187,"body_markdown":"The best way to solve this problem is by editing the source code. To do this, copy all library files to your project, then open the AlarmPingSender.java file and find the code below near line 75:\r\n\r\n    pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\r\n                    action), PendingIntent.FLAG_UPDATE_CURRENT)\r\n\r\nReplace the code with the following:\r\n\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n            pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\r\n                    action), PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\r\n        } else {\r\n            pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\r\n                    action), PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n        }\r\n\r\nNow replace your &#39;import&#39; with the new file. This should solve the problem.\r\n","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>The best way to solve this problem is by editing the source code. To do this, copy all library files to your project, then open the AlarmPingSender.java file and find the code below near line 75:</p>\n<pre><code>pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\n                action), PendingIntent.FLAG_UPDATE_CURRENT)\n</code></pre>\n<p>Replace the code with the following:</p>\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n        pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\n                action), PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\n    } else {\n        pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\n                action), PendingIntent.FLAG_UPDATE_CURRENT);\n\n    }\n</code></pre>\n<p>Now replace your 'import' with the new file. This should solve the problem.</p>\n"},{"tags":[],"owner":{"account_id":12719104,"reputation":21,"user_id":9240153,"display_name":"Victor Han"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691568353,"creation_date":1689916160,"answer_id":76735262,"question_id":71155187,"body_markdown":"In case Android Studio is unable to resolve `com.github.hannesa2`:\r\n```\r\n//new mqtt library that supports android 12\r\nimplementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\nimplementation &#39;com.github.hannesa2:paho.mqtt.android:3.3.5@aar&#39;\r\nimplementation &#39;androidx.room:room-runtime:2.3.0&#39;\r\nimplementation &#39;com.jakewharton.timber:timber:5.0.1&#39;\r\n\r\n// Add below to fix Runtime error(ClassNotFoundException)\r\nimplementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.5.2&#39;\r\n```\r\n\r\nIf you use Gradle 7 or later, add this below to `settings.gradle`:\r\n```\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven { url &#39;https://jitpack.io&#39; }\r\n    }\r\n}\r\n```","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>In case Android Studio is unable to resolve <code>com.github.hannesa2</code>:</p>\n<pre><code>//new mqtt library that supports android 12\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.github.hannesa2:paho.mqtt.android:3.3.5@aar'\nimplementation 'androidx.room:room-runtime:2.3.0'\nimplementation 'com.jakewharton.timber:timber:5.0.1'\n\n// Add below to fix Runtime error(ClassNotFoundException)\nimplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.5.2'\n</code></pre>\n<p>If you use Gradle 7 or later, add this below to <code>settings.gradle</code>:</p>\n<pre><code>dependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n        maven { url 'https://jitpack.io' }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9707,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":7,"score":9,"last_activity_date":1691568353,"creation_date":1645088924,"question_id":71155187,"body_markdown":"I am using &#39;org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5&#39; for mqtt service and the app keeps crashing on android 12 devices with the following crash logs\r\n\r\n    \r\n\r\n    java.lang.IllegalArgumentException: app id: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\r\n        Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\r\n            at android.app.PendingIntent.checkFlags(PendingIntent.java:382)\r\n            at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:673)\r\n            at android.app.PendingIntent.getBroadcast(PendingIntent.java:660)\r\n            at org.eclipse.paho.android.service.AlarmPingSender.start(AlarmPingSender.java:76)\r\n            at org.eclipse.paho.client.mqttv3.internal.ClientState.connected(ClientState.java:1214)\r\n            at org.eclipse.paho.client.mqttv3.internal.ClientState.notifyReceivedAck(ClientState.java:1050)\r\n            at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:151)\r\n\r\n\r\nThis is the library I am using:\r\n\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5&#39;\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>I am using 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5' for mqtt service and the app keeps crashing on android 12 devices with the following crash logs</p>\n<pre><code>java.lang.IllegalArgumentException: app id: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\n    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\n        at android.app.PendingIntent.checkFlags(PendingIntent.java:382)\n        at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:673)\n        at android.app.PendingIntent.getBroadcast(PendingIntent.java:660)\n        at org.eclipse.paho.android.service.AlarmPingSender.start(AlarmPingSender.java:76)\n        at org.eclipse.paho.client.mqttv3.internal.ClientState.connected(ClientState.java:1214)\n        at org.eclipse.paho.client.mqttv3.internal.ClientState.notifyReceivedAck(ClientState.java:1050)\n        at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:151)\n</code></pre>\n<p>This is the library I am using:</p>\n<pre><code>implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5'\nimplementation 'org.eclipse.paho:org.eclipse.paho.android.service:1.1.1'\n</code></pre>\n"},{"tags":["java","unit-testing","mockito","junit5"],"comments":[{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":6,"creation_date":1691564495,"post_id":76865315,"comment_id":135506994,"body_markdown":"Why in the world would you want to mock a collection?","body":"Why in the world would you want to mock a collection?"},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1691564670,"post_id":76865315,"comment_id":135507020,"body_markdown":"And if you did want to mock a collection, it would generally make more sense to mock the interface, not a specific implementation, since most code shouldn&#39;t care about the specific implementation class of a collection. e.g. `mock(Map.class)`, `mock(Set.class)`, or `mock(List.class)`; not `mock(ConcurrentHashMap.class)`, `mock(HashSet.class)` or `mock(ArrayList.class)`.","body":"And if you did want to mock a collection, it would generally make more sense to mock the interface, not a specific implementation, since most code shouldn&#39;t care about the specific implementation class of a collection. e.g. <code>mock(Map.class)</code>, <code>mock(Set.class)</code>, or <code>mock(List.class)</code>; not <code>mock(ConcurrentHashMap.class)</code>, <code>mock(HashSet.class)</code> or <code>mock(ArrayList.class)</code>."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1691565103,"post_id":76865315,"comment_id":135507097,"body_markdown":"Have you tried mocking an interface, or mocking a class that isn&#39;t final?  For instance, `public class MyClass { public String pleaseMockMe() { return &quot;Not yet mocked&quot;; } }` `mock(MyClass.class)`.","body":"Have you tried mocking an interface, or mocking a class that isn&#39;t final?  For instance, <code>public class MyClass { public String pleaseMockMe() { return &quot;Not yet mocked&quot;; } }</code> <code>mock(MyClass.class)</code>."}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691567635,"creation_date":1691567635,"answer_id":76865678,"question_id":76865315,"body_markdown":"Which version of Mockito do you use?\r\n\r\nI create an example in this [GitHub repository](https://github.com/Lefeverw/stackoverflow-mockito-concurrent-hashmap) and mocking `ConcurrentHashMap` seems to work fine.\r\n\r\n```\r\nclass UtilTest {\r\n\r\n    private ConcurrentHashMap map;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        map = mock(ConcurrentHashMap.class);\r\n    }\r\n\r\n    @Test\r\n    void test(){\r\n        when(map.get(&quot;key&quot;)).thenReturn(&quot;value&quot;);\r\n\r\n        assertEquals(&quot;value&quot;, map.get(&quot;key&quot;));\r\n    }\r\n}\r\n```","title":"Can&#39;t Mock Anything in Mockito","body":"<p>Which version of Mockito do you use?</p>\n<p>I create an example in this <a href=\"https://github.com/Lefeverw/stackoverflow-mockito-concurrent-hashmap\" rel=\"nofollow noreferrer\">GitHub repository</a> and mocking <code>ConcurrentHashMap</code> seems to work fine.</p>\n<pre><code>class UtilTest {\n\n    private ConcurrentHashMap map;\n\n    @BeforeEach\n    void setUp() {\n        map = mock(ConcurrentHashMap.class);\n    }\n\n    @Test\n    void test(){\n        when(map.get(&quot;key&quot;)).thenReturn(&quot;value&quot;);\n\n        assertEquals(&quot;value&quot;, map.get(&quot;key&quot;));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23987397,"reputation":7,"user_id":17974031,"display_name":"MohanaSundaram J"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76865678,"answer_count":1,"score":0,"last_activity_date":1691567635,"creation_date":1691564293,"question_id":76865315,"body_markdown":"I&#39;m new to Unit testing and Tried to Mock a map using Mockito. \r\n\r\nWhen I tried to mock ConcurrentHashMap it  throws error like this . Not only Hash map it throws error for all Object . \r\n\r\n```lang-java\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.concurrent.ConcurrentHashMap;\r\n\r\nimport static org.mockito.Mockito.mock;\r\n\r\nclass UtilsTest {\r\n\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        ConcurrentHashMap mockedMap = mock(ConcurrentHashMap.class);\r\n    }\r\n\r\n    @Test\r\n    void lessLoadedServersCount(){\r\n\r\n    }\r\n}\r\n```\r\n\r\n```lang-none\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: class java.util.concurrent.ConcurrentHashMap.\r\n\r\nMockito can only non-private &amp; non-final classes.\r\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n\r\n\r\nJava               : 11\r\nJVM vendor name    : OpenLogic\r\nJVM vendor version : 11.0.19+7-adhoc.admin.jdk11u\r\nJVM name           : OpenJDK 64-Bit Server VM\r\nJVM version        : 11.0.19+7-adhoc.admin.jdk11u\r\nJVM info           : mixed mode\r\nOS name            : Mac OS X\r\nOS version         : 13.2.1\r\n\r\n\r\n\r\nUnderlying exception : java.lang.UnsupportedOperationException: Cannot define class using reflection: Could not find sun.misc.Unsafe\r\n```\r\n\r\nTried With List and Sets as well getting same error . I tried with JDK 19 getting same error. \r\n\r\n```lang-none\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: class java.util.ArrayList.\r\n\r\nMockito can only non-private &amp; non-final classes.\r\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n```\r\n\r\n```lang-none\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: class java.util.HashSet.\r\n\r\nMockito can only non-private &amp; non-final classes.\r\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n```","title":"Can&#39;t Mock Anything in Mockito","body":"<p>I'm new to Unit testing and Tried to Mock a map using Mockito.</p>\n<p>When I tried to mock ConcurrentHashMap it  throws error like this . Not only Hash map it throws error for all Object .</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.concurrent.ConcurrentHashMap;\n\nimport static org.mockito.Mockito.mock;\n\nclass UtilsTest {\n\n\n    @BeforeEach\n    void setUp() {\n        ConcurrentHashMap mockedMap = mock(ConcurrentHashMap.class);\n    }\n\n    @Test\n    void lessLoadedServersCount(){\n\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: class java.util.concurrent.ConcurrentHashMap.\n\nMockito can only non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n\n\nJava               : 11\nJVM vendor name    : OpenLogic\nJVM vendor version : 11.0.19+7-adhoc.admin.jdk11u\nJVM name           : OpenJDK 64-Bit Server VM\nJVM version        : 11.0.19+7-adhoc.admin.jdk11u\nJVM info           : mixed mode\nOS name            : Mac OS X\nOS version         : 13.2.1\n\n\n\nUnderlying exception : java.lang.UnsupportedOperationException: Cannot define class using reflection: Could not find sun.misc.Unsafe\n</code></pre>\n<p>Tried With List and Sets as well getting same error . I tried with JDK 19 getting same error.</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: class java.util.ArrayList.\n\nMockito can only non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: class java.util.HashSet.\n\nMockito can only non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1560751817,"post_id":56625520,"comment_id":99823534,"body_markdown":"In my understanding “consuming” the event means indicating that no other handler should handle the event. “Handle” does not necessarily imply that. I don’t know Android well enough to tell whether this is also the intended meaning there, though.","body":"In my understanding “consuming” the event means indicating that no other handler should handle the event. “Handle” does not necessarily imply that. I don’t know Android well enough to tell whether this is also the intended meaning there, though."},{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1560752432,"post_id":56625520,"comment_id":99823781,"body_markdown":"Possible duplicate of [What is meaning of boolean value returned from an event-handling method in Android](https://stackoverflow.com/questions/3756383/what-is-meaning-of-boolean-value-returned-from-an-event-handling-method-in-andro)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/3756383/what-is-meaning-of-boolean-value-returned-from-an-event-handling-method-in-andro\">What is meaning of boolean value returned from an event-handling method in Android</a>"},{"owner":{"account_id":14571721,"reputation":53,"user_id":10535182,"display_name":"Zac"},"score":0,"creation_date":1560753024,"post_id":56625520,"comment_id":99823983,"body_markdown":"@ADM, i have looked through that. I don&#39;t believe that question/answer is quite aligned to what I am asking. It doesn&#39;t seem to explain the differences between the 2 actions; &quot;handle&quot; and &quot;consume&quot;.","body":"@ADM, i have looked through that. I don&#39;t believe that question/answer is quite aligned to what I am asking. It doesn&#39;t seem to explain the differences between the 2 actions; &quot;handle&quot; and &quot;consume&quot;."}],"answers":[{"tags":[],"owner":{"account_id":14571721,"reputation":53,"user_id":10535182,"display_name":"Zac"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1569909447,"creation_date":1569909447,"answer_id":58178821,"question_id":56625520,"body_markdown":"Event handling: When an event happens and we have registered an event listener for the event, the event listener calls the Event Handlers, which is the method that actually handles the event.","title":"Difference between &quot;consuming&quot; and &quot;handling&quot; an event","body":"<p>Event handling: When an event happens and we have registered an event listener for the event, the event listener calls the Event Handlers, which is the method that actually handles the event.</p>\n"},{"tags":[],"owner":{"account_id":17413044,"reputation":11,"user_id":15377471,"display_name":"jamie heiney"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691567225,"creation_date":1674660876,"answer_id":75236246,"question_id":56625520,"body_markdown":"_Consuming_ an event means subscribing to it so that a user&#39;s application is informed when the event occurs. This could include subscribing to an event via an API or to receive notifications from an event producer. \r\n\r\n_Handling_ an event means taking action when it occurs. This could include creating an event handling function that will execute code once the event is triggered. Examples include responding to a user input, such as clicking a button, or running a code snippet in response to an asynchronous event, such as a message being delivered.","title":"Difference between &quot;consuming&quot; and &quot;handling&quot; an event","body":"<p><em>Consuming</em> an event means subscribing to it so that a user's application is informed when the event occurs. This could include subscribing to an event via an API or to receive notifications from an event producer.</p>\n<p><em>Handling</em> an event means taking action when it occurs. This could include creating an event handling function that will execute code once the event is triggered. Examples include responding to a user input, such as clicking a button, or running a code snippet in response to an asynchronous event, such as a message being delivered.</p>\n"}],"owner":{"account_id":14571721,"reputation":53,"user_id":10535182,"display_name":"Zac"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":487,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58178821,"answer_count":2,"score":0,"last_activity_date":1691567225,"creation_date":1560751596,"question_id":56625520,"body_markdown":"What is the difference between an event that has been &quot;consumed&quot; vs an event that has been &quot;handled&quot;?\r\n\r\nAppreciate the help :)\r\n\r\n[Edit]\r\nFor example:\r\n\r\n`onTouchEvent(MotionEvent event) returns true` if the event was **handled** - `false` otherwise\r\n\r\n`onTouch()` returns true if the listener has consumed the event - `false` otherwise","title":"Difference between &quot;consuming&quot; and &quot;handling&quot; an event","body":"<p>What is the difference between an event that has been \"consumed\" vs an event that has been \"handled\"?</p>\n\n<p>Appreciate the help :)</p>\n\n<p>[Edit]\nFor example:</p>\n\n<p><code>onTouchEvent(MotionEvent event) returns true</code> if the event was <strong>handled</strong> - <code>false</code> otherwise</p>\n\n<p><code>onTouch()</code> returns true if the listener has consumed the event - <code>false</code> otherwise</p>\n"},{"tags":["java","spring-restcontroller","hibernate-validator","javax-validation","jakarta-validation"],"answers":[{"tags":[],"owner":{"account_id":6366204,"reputation":2197,"user_id":4940126,"display_name":"mark_o"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691564135,"creation_date":1691564135,"answer_id":76865293,"question_id":76864869,"body_markdown":"Since you are using the Hibernate Validator you can cast the context in the validator to `HibernateConstraintValidatorContext`, and that would allow you to add additional message parameters:\r\n\r\n```java\r\npublic class EnumValidatorImpl implements ConstraintValidator&lt;EnumValidator, Enum&lt;?&gt;&gt; {\r\n\r\n\tprivate List&lt;String&gt; allowableValues;\r\n\r\n\t@Override\r\n\tpublic void initialize(EnumValidator constraintAnnotation) {\r\n\t\tallowableValues = Stream.of(constraintAnnotation.enumClass()\r\n\t\t\t\t\t\t.getEnumConstants())\r\n\t\t\t\t.map(Enum::name)\r\n\t\t\t\t.toList();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean isValid(Enum&lt;?&gt; anEnum, ConstraintValidatorContext constraintValidatorContext) {\r\n\t\tif ( constraintValidatorContext instanceof HibernateConstraintValidatorContext ) {\r\n\t\t\t( (HibernateConstraintValidatorContext) constraintValidatorContext ).addMessageParameter(\r\n\t\t\t\t\t&quot;enumConstants&quot;, allowableValues );\r\n\t\t}\r\n\t\treturn anEnum != null &amp;&amp; allowableValues.contains(anEnum.name());\r\n\t}\r\n}\r\n```\r\nand then use these message parameters in the message template:\r\n\r\n```java\r\n@Target({ElementType.FIELD, ElementType.PARAMETER})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Constraint(validatedBy = EnumValidatorImpl.class)\r\npublic @interface EnumValidator {\r\n\r\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\r\n\r\n    String message() default &quot;value not valid {enumClass}. Available options: {enumConstants}&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n}\r\n```","title":"Dynamic Validation message in Constraint Validation of Enums","body":"<p>Since you are using the Hibernate Validator you can cast the context in the validator to <code>HibernateConstraintValidatorContext</code>, and that would allow you to add additional message parameters:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EnumValidatorImpl implements ConstraintValidator&lt;EnumValidator, Enum&lt;?&gt;&gt; {\n\n    private List&lt;String&gt; allowableValues;\n\n    @Override\n    public void initialize(EnumValidator constraintAnnotation) {\n        allowableValues = Stream.of(constraintAnnotation.enumClass()\n                        .getEnumConstants())\n                .map(Enum::name)\n                .toList();\n    }\n\n    @Override\n    public boolean isValid(Enum&lt;?&gt; anEnum, ConstraintValidatorContext constraintValidatorContext) {\n        if ( constraintValidatorContext instanceof HibernateConstraintValidatorContext ) {\n            ( (HibernateConstraintValidatorContext) constraintValidatorContext ).addMessageParameter(\n                    &quot;enumConstants&quot;, allowableValues );\n        }\n        return anEnum != null &amp;&amp; allowableValues.contains(anEnum.name());\n    }\n}\n</code></pre>\n<p>and then use these message parameters in the message template:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target({ElementType.FIELD, ElementType.PARAMETER})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = EnumValidatorImpl.class)\npublic @interface EnumValidator {\n\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\n\n    String message() default &quot;value not valid {enumClass}. Available options: {enumConstants}&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n</code></pre>\n"}],"owner":{"account_id":4017891,"reputation":181,"user_id":3309305,"display_name":"user3309305"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76865293,"answer_count":1,"score":0,"last_activity_date":1691567203,"creation_date":1691559604,"question_id":76864869,"body_markdown":"I was trying to Validate the Enum before Request Processing,\r\n\r\n**EnumValidator.java**\r\n```\r\n@Target({ElementType.FIELD, ElementType.PARAMETER})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Constraint(validatedBy = EnumValidatorImpl.class)\r\npublic @interface EnumValidator {\r\n\r\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\r\n\r\n    String message() default &quot;value not valid {enumClass}&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n}\r\n```\r\n\r\n**EnumValidatorImpl.java**\r\n```\r\nimport javax.validation.ConstraintValidator;\r\nimport javax.validation.ConstraintValidatorContext;\r\nimport java.util.List;\r\nimport java.util.stream.Stream;\r\n\r\npublic class EnumValidatorImpl implements ConstraintValidator&lt;EnumValidator, Enum&lt;?&gt;&gt; {\r\n\r\n    private List&lt;String&gt; allowableValues;\r\n\r\n    @Override\r\n    public void initialize(EnumValidator constraintAnnotation) {\r\n        allowableValues = Stream.of(constraintAnnotation.enumClass()\r\n                .getEnumConstants())\r\n                .map(Enum::name)\r\n                .toList();\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(Enum&lt;?&gt; anEnum, ConstraintValidatorContext constraintValidatorContext) {\r\n        return anEnum != null &amp;&amp; allowableValues.contains(anEnum.name());\r\n    }\r\n}\r\n```\r\n**Person.java**\r\n```\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class Person {\r\n\r\n    @EnumValidator(enumClass = Status.class)\r\n    private String status;\r\n}\r\n```\r\n\r\n**Status.java**\r\n```\r\npublic enum Status {\r\n\r\n    ACTIVE,\r\n    IN_ACTIVE\r\n}\r\n```\r\n\r\nIt was working fine in-terms of validation, Right now the message comes as **value not valid emumclass** package name. Is there any to display all the members of enum in error message in this case ACTIVE, IN_ACTIVE","title":"Dynamic Validation message in Constraint Validation of Enums","body":"<p>I was trying to Validate the Enum before Request Processing,</p>\n<p><strong>EnumValidator.java</strong></p>\n<pre><code>@Target({ElementType.FIELD, ElementType.PARAMETER})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = EnumValidatorImpl.class)\npublic @interface EnumValidator {\n\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\n\n    String message() default &quot;value not valid {enumClass}&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n</code></pre>\n<p><strong>EnumValidatorImpl.java</strong></p>\n<pre><code>import javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\nimport java.util.List;\nimport java.util.stream.Stream;\n\npublic class EnumValidatorImpl implements ConstraintValidator&lt;EnumValidator, Enum&lt;?&gt;&gt; {\n\n    private List&lt;String&gt; allowableValues;\n\n    @Override\n    public void initialize(EnumValidator constraintAnnotation) {\n        allowableValues = Stream.of(constraintAnnotation.enumClass()\n                .getEnumConstants())\n                .map(Enum::name)\n                .toList();\n    }\n\n    @Override\n    public boolean isValid(Enum&lt;?&gt; anEnum, ConstraintValidatorContext constraintValidatorContext) {\n        return anEnum != null &amp;&amp; allowableValues.contains(anEnum.name());\n    }\n}\n</code></pre>\n<p><strong>Person.java</strong></p>\n<pre><code>import lombok.Data;\n\n@Data\npublic class Person {\n\n    @EnumValidator(enumClass = Status.class)\n    private String status;\n}\n</code></pre>\n<p><strong>Status.java</strong></p>\n<pre><code>public enum Status {\n\n    ACTIVE,\n    IN_ACTIVE\n}\n</code></pre>\n<p>It was working fine in-terms of validation, Right now the message comes as <strong>value not valid emumclass</strong> package name. Is there any to display all the members of enum in error message in this case ACTIVE, IN_ACTIVE</p>\n"},{"tags":["java","hibernate","transactions"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691506715,"post_id":76860731,"comment_id":135499350,"body_markdown":"Calling methods on the same class will [skip the proxy](https://stackoverflow.com/q/34197964/2541560) that handles annotations like `@Transactional`, so neither `create` or `getById` will start a transaction. That and suitable timing with the default behaviour is likely the problem.","body":"Calling methods on the same class will <a href=\"https://stackoverflow.com/q/34197964/2541560\">skip the proxy</a> that handles annotations like <code>@Transactional</code>, so neither <code>create</code> or <code>getById</code> will start a transaction. That and suitable timing with the default behaviour is likely the problem."},{"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"score":0,"creation_date":1691566350,"post_id":76860731,"comment_id":135507312,"body_markdown":"@Kayaman I had no idea that calling methods in same class would affect anything. Then my example isn&#39;t really realistic. I have updated my code example. Would having the ```create()``` and ```getById()``` methods in a service class change anything?","body":"@Kayaman I had no idea that calling methods in same class would affect anything. Then my example isn&#39;t really realistic. I have updated my code example. Would having the <code>create()</code> and <code>getById()</code> methods in a service class change anything?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691573679,"post_id":76860731,"comment_id":135508736,"body_markdown":"Yes it would change something. Just like the linked question explains. I don&#39;t know what your real code looks like, but I&#39;d probably use `merge()` since your code looks weird. Why would you do a save/load in a convoluted way like that?","body":"Yes it would change something. Just like the linked question explains. I don&#39;t know what your real code looks like, but I&#39;d probably use <code>merge()</code> since your code looks weird. Why would you do a save/load in a convoluted way like that?"},{"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"score":0,"creation_date":1691580850,"post_id":76860731,"comment_id":135510225,"body_markdown":"@Kayaman Why we first ```persist()``` then do a ```find()``` on the same entity to return the Id, I do not know, it is before my time. My guess, trying to verify that it is *inserted*. The application receive messages from queue, we insert a row in the database and continue working on the message. Later on in the progress we want to update the status. We do not keep the entity class after it is inserted, we do a ```find()``` when we want to do changes to it.  But you think changing ```persist()``` to ```merge()``` could solve the issue? What about doing ```flush()``` after ```persist()```?","body":"@Kayaman Why we first <code>persist()</code> then do a <code>find()</code> on the same entity to return the Id, I do not know, it is before my time. My guess, trying to verify that it is <i>inserted</i>. The application receive messages from queue, we insert a row in the database and continue working on the message. Later on in the progress we want to update the status. We do not keep the entity class after it is inserted, we do a <code>find()</code> when we want to do changes to it.  But you think changing <code>persist()</code> to <code>merge()</code> could solve the issue? What about doing <code>flush()</code> after <code>persist()</code>?"}],"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691566595,"creation_date":1691506374,"question_id":76860731,"body_markdown":"I&#39;m having some flaky issues with transactional hibernate. As shown in the example below the entity is persisted with ```persist()```, I retrieve the entity with ```find()``` and return the Id from the method. But when the Id is used later to retrieve the entity again, it *sometimes* (1/2000) cannot find the entity again.\r\n\r\n- I thought when leaving the first ```@Transactional``` create method that hibernate would commit?\r\n- Could it be that hibernate has yet to be able to commit before the ```getById()``` is ran?\r\n- Could it be that ```@TransactionManagement(TransactionManagementType.CONTAINER)``` is affecting how and when hibernate commits?\r\n\r\n```\r\n@TransactionManagement(TransactionManagementType.CONTAINER)\r\npublic class MDB implements MessageListener {\r\n\r\n    @Inject\r\n    private MyService service;\r\n\r\n    @Override\r\n    public void onMessage(final Message message) {\r\n        Id id = service.create(message);\r\n        ...\r\n        // Will not find entity on next method call.\r\n        MyEntity  myEntity = service.getById(id);\r\n    }\r\n\r\n}\r\n\r\npublic class MyServiceImpl implements MyService {\r\n   \r\n   @Override\r\n   @Transactional(Transactional.TxType.REQUIRED)\r\n   public Id create(Message message) {\r\n       MyEntity myEntity = new MyEntity();\r\n       Id id = new Id(message);\r\n       myEntity.setId(id);\r\n\r\n       entityManager().perisist(myEntity);\r\n\r\n       MyEntity myEntityFromEm = entityManager().find(MyEntity.class, id);\r\n       return myEntityFromEm.getId();\r\n   }\r\n   \r\n   @Override\r\n   @Transactional(Transactional.TxType.REQUIRED)\r\n   public MyEntity getById(Id id) {\r\n       return entityManager().find(MyEntity.class, id); \r\n       // Exception here - Cannot find entity with this id.\r\n   }\r\n\r\n}\r\n```\r\n*Have omitted to recreate how the class gets its injected EntityManager, and how the MessageListener is configered. In the real program there is multiple lines in-between ```create()``` and ```getById()```.*\r\n\r\nI expected that hibernate did a commit on the persisted entity when leaving the method. I have tried to log the EntityManager HashCode, suspecting that different *&quot;sessions&quot;* caused the issues. I have tried to manually ```flush()```, but since I cannot reproduce the issue in pilot/test, it is very hard to test.","title":"Transactional method persist entity, but why is the entity object sometimes not found in next method?","body":"<p>I'm having some flaky issues with transactional hibernate. As shown in the example below the entity is persisted with <code>persist()</code>, I retrieve the entity with <code>find()</code> and return the Id from the method. But when the Id is used later to retrieve the entity again, it <em>sometimes</em> (1/2000) cannot find the entity again.</p>\n<ul>\n<li>I thought when leaving the first <code>@Transactional</code> create method that hibernate would commit?</li>\n<li>Could it be that hibernate has yet to be able to commit before the <code>getById()</code> is ran?</li>\n<li>Could it be that <code>@TransactionManagement(TransactionManagementType.CONTAINER)</code> is affecting how and when hibernate commits?</li>\n</ul>\n<pre><code>@TransactionManagement(TransactionManagementType.CONTAINER)\npublic class MDB implements MessageListener {\n\n    @Inject\n    private MyService service;\n\n    @Override\n    public void onMessage(final Message message) {\n        Id id = service.create(message);\n        ...\n        // Will not find entity on next method call.\n        MyEntity  myEntity = service.getById(id);\n    }\n\n}\n\npublic class MyServiceImpl implements MyService {\n   \n   @Override\n   @Transactional(Transactional.TxType.REQUIRED)\n   public Id create(Message message) {\n       MyEntity myEntity = new MyEntity();\n       Id id = new Id(message);\n       myEntity.setId(id);\n\n       entityManager().perisist(myEntity);\n\n       MyEntity myEntityFromEm = entityManager().find(MyEntity.class, id);\n       return myEntityFromEm.getId();\n   }\n   \n   @Override\n   @Transactional(Transactional.TxType.REQUIRED)\n   public MyEntity getById(Id id) {\n       return entityManager().find(MyEntity.class, id); \n       // Exception here - Cannot find entity with this id.\n   }\n\n}\n</code></pre>\n<p><em>Have omitted to recreate how the class gets its injected EntityManager, and how the MessageListener is configered. In the real program there is multiple lines in-between <code>create()</code> and <code>getById()</code>.</em></p>\n<p>I expected that hibernate did a commit on the persisted entity when leaving the method. I have tried to log the EntityManager HashCode, suspecting that different <em>&quot;sessions&quot;</em> caused the issues. I have tried to manually <code>flush()</code>, but since I cannot reproduce the issue in pilot/test, it is very hard to test.</p>\n"},{"tags":["java","c++","gradle"],"comments":[{"owner":{"account_id":4106157,"reputation":2138,"user_id":3370124,"display_name":"Richard Critten"},"score":0,"creation_date":1691534136,"post_id":76863495,"comment_id":135504088,"body_markdown":"It looks like `utilities_whitebox` is using a library called `utilities_crypto` which has not been included.","body":"It looks like <code>utilities_whitebox</code> is using a library called <code>utilities_crypto</code> which has not been included."},{"owner":{"account_id":3403687,"reputation":572,"user_id":2855292,"accept_rate":54,"display_name":"Oyebisi"},"score":0,"creation_date":1691547111,"post_id":76863495,"comment_id":135505193,"body_markdown":"@RichardCritten apologies, I modified the stacktrace. I have updated to show the right thing. It is looking for the `utilities_whitebox`.","body":"@RichardCritten apologies, I modified the stacktrace. I have updated to show the right thing. It is looking for the <code>utilities_whitebox</code>."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1691566432,"post_id":76863495,"comment_id":135507332,"body_markdown":"When you manually invoke cmake, do you end up with a working library? If that works you can indeed instruct gradle to run cmake for you.","body":"When you manually invoke cmake, do you end up with a working library? If that works you can indeed instruct gradle to run cmake for you."}],"owner":{"account_id":3403687,"reputation":572,"user_id":2855292,"accept_rate":54,"display_name":"Oyebisi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691566391,"creation_date":1691532785,"question_id":76863495,"body_markdown":"I built an android library that is mostly just a wrapper for a native(C++) library that does some crypto functions. The library uses CMake for the native code build and calls the native methods via the JNI bridge. I want to make this same library work for Java SE(non android Java), but I am stuck and cannot make the CMake build the native code. \r\nThis is what the CMakeLists looks like\r\n```\r\ncmake_minimum_required(VERSION 3.4.1)\r\n\r\n\r\nproject(utilities-whitebox)\r\n\r\nset(WHITEBOXDIR utilities-whitebox/whitebox)\r\n\r\nadd_library( # Specifies the name of the library.\r\n        utilities_whitebox\r\n\r\n        # Sets the library as a shared library.\r\n        SHARED\r\n\r\n#        SwigWbc_wrap.cpp\r\n        src/main/cpp/SwigWbc_wrap.cpp\r\n        ${WHITEBOXDIR}/src/utilities_whitebox.cpp\r\n        ${WHITEBOXDIR}/src/WhiteBoxInterpreter.cpp\r\n        ${WHITEBOXDIR}/src/WhiteBoxUtils.cpp\r\n)\r\n\r\ninclude_directories(\r\n        ${WHITEBOXDIR}/include\r\n        ${WHITEBOXDIR}/src\r\n)\r\n```\r\nThe directories and files listed in the CMakelists all exist and are in the appropriate path. This is the error I get when I go to load the the native code using the `System.loadLibrary(&quot;utilities_whitebox&quot;)` call.\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no utilities_whitebox in java.library.path: [/Users/soere/Library/Java/Extensions, /Library/Java/Extensions, /Network/Library/Java/Extensions, /System/Library/Java/Extensions, /usr/lib/java, .]\r\n\tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2670)\r\n\tat java.base/java.lang.Runtime.loadLibrary0(Runtime.java:830)\r\n\tat java.base/java.lang.System.loadLibrary(System.java:1873)\r\n```\r\nI believe the my app is simply not running the cmake command which needs to be executed successfully before the native code can be used in the Java SE classes. I believe I may have to add a gradle task that does the native build first using cmake before building the java app. Is this correct? How do I go about this?\r\n","title":"UnsatisfiedLinkError building native library for Java SE","body":"<p>I built an android library that is mostly just a wrapper for a native(C++) library that does some crypto functions. The library uses CMake for the native code build and calls the native methods via the JNI bridge. I want to make this same library work for Java SE(non android Java), but I am stuck and cannot make the CMake build the native code.\nThis is what the CMakeLists looks like</p>\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\n\nproject(utilities-whitebox)\n\nset(WHITEBOXDIR utilities-whitebox/whitebox)\n\nadd_library( # Specifies the name of the library.\n        utilities_whitebox\n\n        # Sets the library as a shared library.\n        SHARED\n\n#        SwigWbc_wrap.cpp\n        src/main/cpp/SwigWbc_wrap.cpp\n        ${WHITEBOXDIR}/src/utilities_whitebox.cpp\n        ${WHITEBOXDIR}/src/WhiteBoxInterpreter.cpp\n        ${WHITEBOXDIR}/src/WhiteBoxUtils.cpp\n)\n\ninclude_directories(\n        ${WHITEBOXDIR}/include\n        ${WHITEBOXDIR}/src\n)\n</code></pre>\n<p>The directories and files listed in the CMakelists all exist and are in the appropriate path. This is the error I get when I go to load the the native code using the <code>System.loadLibrary(&quot;utilities_whitebox&quot;)</code> call.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no utilities_whitebox in java.library.path: [/Users/soere/Library/Java/Extensions, /Library/Java/Extensions, /Network/Library/Java/Extensions, /System/Library/Java/Extensions, /usr/lib/java, .]\n    at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2670)\n    at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:830)\n    at java.base/java.lang.System.loadLibrary(System.java:1873)\n</code></pre>\n<p>I believe the my app is simply not running the cmake command which needs to be executed successfully before the native code can be used in the Java SE classes. I believe I may have to add a gradle task that does the native build first using cmake before building the java app. Is this correct? How do I go about this?</p>\n"},{"tags":["java","amazon-web-services","yum"],"comments":[{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":1,"creation_date":1691521991,"post_id":76862527,"comment_id":135502299,"body_markdown":"[How to find out yum package names](https://serverfault.com/q/811444/278025)","body":"<a href=\"https://serverfault.com/q/811444/278025\">How to find out yum package names</a>"},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1691523047,"post_id":76862527,"comment_id":135502476,"body_markdown":"@SiKing thanks. I was able to do: [ec2-user@ip-172-31-9-107 nifi]$ yum search java | grep &quot;1.8&quot;\nLast metadata expiration check: 1:00:33 ago on Tue Aug  8 18:28:56 2023.\njava-1.8.0-amazon-corretto.x86_64 : Amazon Corretto runtime environment\njava-1.8.0-amazon-corretto-devel.x86_64 : Amazon Corretto development environment. and then installed my version thanks!","body":"@SiKing thanks. I was able to do: [ec2-user@ip-172-31-9-107 nifi]$ yum search java | grep &quot;1.8&quot; Last metadata expiration check: 1:00:33 ago on Tue Aug  8 18:28:56 2023. java-1.8.0-amazon-corretto.x86_64 : Amazon Corretto runtime environment java-1.8.0-amazon-corretto-devel.x86_64 : Amazon Corretto development environment. and then installed my version thanks!"}],"answers":[{"tags":[],"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691566208,"creation_date":1691523299,"answer_id":76862720,"question_id":76862527,"body_markdown":"I got an assist and was able to install what I wanted. I did:\r\n\r\n    [ec2-user@ip-172-31-9-107 nifi]$ yum search java | grep &quot;1.8&quot;\r\n    Last metadata expiration check: 1:00:33 ago on Tue Aug  8 18:28:56 2023.\r\n    java-1.8.0-amazon-corretto.x86_64 : Amazon Corretto runtime environment\r\n    java-1.8.0-amazon-corretto-devel.x86_64 : Amazon Corretto development environment\r\n\r\n,and then:\r\n\r\n    sudo yum install java-1.8.0-amazon-corretto.x86_64 \r\n\r\nwhich installed:\r\n\r\n    [ec2-user@ip-172-31-9-107 nifi]$ java -version\r\n    openjdk version &quot;1.8.0_382&quot;\r\n","title":"Yum - what java 8 versions are available to install?","body":"<p>I got an assist and was able to install what I wanted. I did:</p>\n<pre><code>[ec2-user@ip-172-31-9-107 nifi]$ yum search java | grep &quot;1.8&quot;\nLast metadata expiration check: 1:00:33 ago on Tue Aug  8 18:28:56 2023.\njava-1.8.0-amazon-corretto.x86_64 : Amazon Corretto runtime environment\njava-1.8.0-amazon-corretto-devel.x86_64 : Amazon Corretto development environment\n</code></pre>\n<p>,and then:</p>\n<pre><code>sudo yum install java-1.8.0-amazon-corretto.x86_64 \n</code></pre>\n<p>which installed:</p>\n<pre><code>[ec2-user@ip-172-31-9-107 nifi]$ java -version\nopenjdk version &quot;1.8.0_382&quot;\n</code></pre>\n"}],"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1014,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76862720,"answer_count":1,"score":-3,"last_activity_date":1691566227,"creation_date":1691521476,"question_id":76862527,"body_markdown":"I am attempting to install java version 8 on my AWS EC2 (uses AWS linux image) using yum. Each attempt is telling me the version is not recognized. For instance:\r\n\r\n    ec2-user@ip-172-31-9-107 nifi]$ sudo yum install java-1.8.0-openjdk-devel\r\n    Last metadata expiration check: 1:46:16 ago on Tue Aug  8 17:09:37 2023.\r\n    No match for argument: java-1.8.0-openjdk-devel\r\n    Error: Unable to find a match: java-1.8.0-openjdk-devel\r\n\r\n,and\r\n\r\n    [ec2-user@ip-172-31-9-107 nifi]$ sudo yum install java-1.8.0-openjdk.x86_64\r\n    Last metadata expiration check: 1:47:09 ago on Tue Aug  8 17:09:37 2023.\r\n    No match for argument: java-1.8.0-openjdk.x86_64\r\n    Error: Unable to find a match: java-1.8.0-openjdk.x86_64\r\n\r\n,and\r\n\r\n    [ec2-user@ip-172-31-9-107 nifi]$ sudo sudo yum install java-1.8.0-openjdk\r\n    Last metadata expiration check: 1:48:39 ago on Tue Aug  8 17:09:37 2023.\r\n    No match for argument: java-1.8.0-openjdk\r\n    Error: Unable to find a match: java-1.8.0-openjdk\r\n\r\nI was able to simply use:\r\n\r\n    sudo yum install java\r\n\r\n,but that installed openjdk version 17. How can I figure out what java 8 versions are available via yum and then install one of them?\r\n","title":"Yum - what java 8 versions are available to install?","body":"<p>I am attempting to install java version 8 on my AWS EC2 (uses AWS linux image) using yum. Each attempt is telling me the version is not recognized. For instance:</p>\n<pre><code>ec2-user@ip-172-31-9-107 nifi]$ sudo yum install java-1.8.0-openjdk-devel\nLast metadata expiration check: 1:46:16 ago on Tue Aug  8 17:09:37 2023.\nNo match for argument: java-1.8.0-openjdk-devel\nError: Unable to find a match: java-1.8.0-openjdk-devel\n</code></pre>\n<p>,and</p>\n<pre><code>[ec2-user@ip-172-31-9-107 nifi]$ sudo yum install java-1.8.0-openjdk.x86_64\nLast metadata expiration check: 1:47:09 ago on Tue Aug  8 17:09:37 2023.\nNo match for argument: java-1.8.0-openjdk.x86_64\nError: Unable to find a match: java-1.8.0-openjdk.x86_64\n</code></pre>\n<p>,and</p>\n<pre><code>[ec2-user@ip-172-31-9-107 nifi]$ sudo sudo yum install java-1.8.0-openjdk\nLast metadata expiration check: 1:48:39 ago on Tue Aug  8 17:09:37 2023.\nNo match for argument: java-1.8.0-openjdk\nError: Unable to find a match: java-1.8.0-openjdk\n</code></pre>\n<p>I was able to simply use:</p>\n<pre><code>sudo yum install java\n</code></pre>\n<p>,but that installed openjdk version 17. How can I figure out what java 8 versions are available via yum and then install one of them?</p>\n"},{"tags":["java","spring","stripe-payments"],"answers":[{"tags":[],"owner":{"account_id":11629093,"reputation":2552,"user_id":8517948,"accept_rate":100,"display_name":"LW001"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691566093,"creation_date":1691565579,"answer_id":76865458,"question_id":76865346,"body_markdown":"You can get `Event.request.id` (which I assume to be exposed via some getters in the library you&#39;re using) and see whether it is null. If it is, the event was triggered automatically, else it was via the API (or Dashboard I&#39;d assume) and you can get more details about the request via its ID.\r\n\r\nThe Stripe Documentation says this [here][1].\r\n\r\n  [1]: https://stripe.com/docs/api/events/object#event_object-request-id","title":"Stripe webhook events: find out origin of event","body":"<p>You can get <code>Event.request.id</code> (which I assume to be exposed via some getters in the library you're using) and see whether it is null. If it is, the event was triggered automatically, else it was via the API (or Dashboard I'd assume) and you can get more details about the request via its ID.</p>\n<p>The Stripe Documentation says this <a href=\"https://stripe.com/docs/api/events/object#event_object-request-id\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":3174200,"reputation":2396,"user_id":2682472,"accept_rate":90,"display_name":"Florian Baierl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691566093,"creation_date":1691564631,"question_id":76865346,"body_markdown":"When using the stripe dashboard, one can clearly see where an event is originating from (e.g. automatic, dashboard, API). We would like to be able to do this in our spring (java) backend implementation as well.\r\n\r\nHere is how we receive the events in our server:\r\n\r\n```\r\n@EventListener\r\n@Async\r\npublic void handleStripeWebhook(StripeWebhookEvent stripeWebhookEvent) throws EntityNotFoundException, StripeException {\r\n   final var event = stripeWebhookEvent.event();\r\n   final var stripeObject = stripeWebhookEvent.stripeObject();\r\n\r\n   Invoice invoice;\r\n   Subscription subscription;\r\n   switch (event.getType()) {\r\n      case &quot;invoice.created&quot;:\r\n      // ...\r\n   }\r\n}\r\n```\r\n\r\nIs this somehow possible?","title":"Stripe webhook events: find out origin of event","body":"<p>When using the stripe dashboard, one can clearly see where an event is originating from (e.g. automatic, dashboard, API). We would like to be able to do this in our spring (java) backend implementation as well.</p>\n<p>Here is how we receive the events in our server:</p>\n<pre><code>@EventListener\n@Async\npublic void handleStripeWebhook(StripeWebhookEvent stripeWebhookEvent) throws EntityNotFoundException, StripeException {\n   final var event = stripeWebhookEvent.event();\n   final var stripeObject = stripeWebhookEvent.stripeObject();\n\n   Invoice invoice;\n   Subscription subscription;\n   switch (event.getType()) {\n      case &quot;invoice.created&quot;:\n      // ...\n   }\n}\n</code></pre>\n<p>Is this somehow possible?</p>\n"},{"tags":["java","c++","jvm","jvmti"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1691486235,"post_id":76857949,"comment_id":135494788,"body_markdown":"[jattach](https://github.com/jattach/jattach/) project (written in C) does exactly that.","body":"<a href=\"https://github.com/jattach/jattach/\" rel=\"nofollow noreferrer\">jattach</a> project (written in C) does exactly that."},{"owner":{"account_id":20213823,"reputation":487,"user_id":14825276,"display_name":"NightmareXD"},"score":0,"creation_date":1691513757,"post_id":76857949,"comment_id":135500840,"body_markdown":"@apangin I tried that but it doesn&#39;t seems to be working it returns:\n\nConnected to remote process\nResponse code = 0\nreturn code: 100\n\nand the agent is also not loaded","body":"@apangin I tried that but it doesn&#39;t seems to be working it returns:  Connected to remote process Response code = 0 return code: 100  and the agent is also not loaded"},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1691521231,"post_id":76857949,"comment_id":135502175,"body_markdown":"This is an issue with the agent: perhaps, it does not export `Agent_OnAttach`, or the required dependency is missing.","body":"This is an issue with the agent: perhaps, it does not export <code>Agent_OnAttach</code>, or the required dependency is missing."}],"owner":{"account_id":20213823,"reputation":487,"user_id":14825276,"display_name":"NightmareXD"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691566087,"creation_date":1691484942,"question_id":76857949,"body_markdown":"I want to load a Java agent at runtime without Restarting the JVM I know that I can load the agent with the -javaagent argument when starting the JVM but I want to do it at runtime. \r\n\r\nI found out that is possible using Sun tools but when I tried to do that in C++ and JNI it doesn&#39;t work and it can&#39;t find the required Java functions. ","title":"How to load a Java agent at runtime using C++","body":"<p>I want to load a Java agent at runtime without Restarting the JVM I know that I can load the agent with the -javaagent argument when starting the JVM but I want to do it at runtime.</p>\n<p>I found out that is possible using Sun tools but when I tried to do that in C++ and JNI it doesn't work and it can't find the required Java functions.</p>\n"},{"tags":["java","string","random","uppercase"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1649501887,"post_id":71806961,"comment_id":126894960,"body_markdown":"Your code is most likely from this page[www.baeldung.com/java-random-string](https://www.baeldung.com/java-random-string#plainjava-bounded). Look further down the page to see how to create uppercase letters as well.","body":"Your code is most likely from this page<a href=\"https://www.baeldung.com/java-random-string#plainjava-bounded\" rel=\"nofollow noreferrer\">www.baeldung.com/java-random-string</a>. Look further down the page to see how to create uppercase letters as well."},{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":0,"creation_date":1649503343,"post_id":71806961,"comment_id":126895281,"body_markdown":"Does this answer your question? [How to generate a random alpha-numeric string](https://stackoverflow.com/questions/41107/how-to-generate-a-random-alpha-numeric-string)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41107/how-to-generate-a-random-alpha-numeric-string\">How to generate a random alpha-numeric string</a>"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649498688,"creation_date":1649498688,"answer_id":71807045,"question_id":71806961,"body_markdown":"The issue with using ascii indexes, is that it&#39;s hard to use separate ranges, lower is `[97;122]` while upper is `[65;90]`, better use indexing in a given list of chars\r\n\r\n    static final String upper = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\r\n    static final String lower = upper.toLowerCase();\r\n    static final String symbols = upper + lower;\r\n\r\n    public static void rand() {\r\n        int rightLimit = symbols.length();\r\n        int targetStringLength = 50;\r\n        Random random = new Random();\r\n        StringBuilder buffer = new StringBuilder(targetStringLength);\r\n\r\n        for (int i = 0; i &lt; targetStringLength; i++) {\r\n            int randomLimitedInt = random.nextInt(rightLimit);\r\n            buffer.append(symbols.charAt(randomLimitedInt));\r\n        }\r\n\r\n        String generatedString = buffer.toString();\r\n        System.out.println(generatedString);\r\n    }\r\n","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<p>The issue with using ascii indexes, is that it's hard to use separate ranges, lower is <code>[97;122]</code> while upper is <code>[65;90]</code>, better use indexing in a given list of chars</p>\n<pre><code>static final String upper = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\nstatic final String lower = upper.toLowerCase();\nstatic final String symbols = upper + lower;\n\npublic static void rand() {\n    int rightLimit = symbols.length();\n    int targetStringLength = 50;\n    Random random = new Random();\n    StringBuilder buffer = new StringBuilder(targetStringLength);\n\n    for (int i = 0; i &lt; targetStringLength; i++) {\n        int randomLimitedInt = random.nextInt(rightLimit);\n        buffer.append(symbols.charAt(randomLimitedInt));\n    }\n\n    String generatedString = buffer.toString();\n    System.out.println(generatedString);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6543678,"reputation":3232,"user_id":5060325,"display_name":"naimdjon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649499374,"creation_date":1649499374,"answer_id":71807132,"question_id":71806961,"body_markdown":"Slightly different approach, use random `nextBoolean()` to check whether the generated `char` should be uppercase.\r\n\r\n```\r\nimport java.util.Random;\r\n\r\npublic class randomstring {\r\n    public void rand() {\r\n        int leftLimit = 97; // letter &#39;a&#39;\r\n        int targetStringLength = 5;\r\n        Random random = new Random();\r\n        StringBuilder buffer = new StringBuilder(targetStringLength);\r\n        for (int i = 0; i &lt; targetStringLength; i++) {\r\n            char c =(char) (leftLimit + random.nextInt(26));\r\n            boolean shouldUseUppercase = random.nextBoolean();\r\n            char character = shouldUseUppercase ? Character.toUpperCase(c) : c;\r\n            buffer.append(character);\r\n        }\r\n        String generatedString = buffer.toString();\r\n        System.out.println(generatedString);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        randomstring random = new randomstring();\r\n        random.rand();\r\n    }\r\n}\r\n```","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<p>Slightly different approach, use random <code>nextBoolean()</code> to check whether the generated <code>char</code> should be uppercase.</p>\n<pre><code>import java.util.Random;\n\npublic class randomstring {\n    public void rand() {\n        int leftLimit = 97; // letter 'a'\n        int targetStringLength = 5;\n        Random random = new Random();\n        StringBuilder buffer = new StringBuilder(targetStringLength);\n        for (int i = 0; i &lt; targetStringLength; i++) {\n            char c =(char) (leftLimit + random.nextInt(26));\n            boolean shouldUseUppercase = random.nextBoolean();\n            char character = shouldUseUppercase ? Character.toUpperCase(c) : c;\n            buffer.append(character);\n        }\n        String generatedString = buffer.toString();\n        System.out.println(generatedString);\n    }\n\n    public static void main(String[] args) {\n        randomstring random = new randomstring();\n        random.rand();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3087555,"reputation":37,"user_id":2614411,"display_name":"Manju DS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649502921,"creation_date":1649502921,"answer_id":71807565,"question_id":71806961,"body_markdown":"    import java.util.Random;\r\n    \r\n    public class RandomString {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tStringBuilder randomString = new StringBuilder();\r\n    \t\t\t\t\r\n    \t\tnew Random().ints(65, 122)\r\n    \t\t\t\t\t.filter(i-&gt;!(i&gt;90&amp;&amp;i&lt;97))\r\n    \t\t\t\t\t.boxed()\r\n    \t\t\t\t\t.limit(12)\r\n    \t\t\t\t\t.map(c-&gt;Character.toChars(c))\r\n    \t\t\t\t\t.forEach(c-&gt;randomString.append(c));\r\n    \t\t\t\t\r\n    \t\tSystem.out.println(randomString);\r\n    \t\t\r\n    \t}\r\n    \t\r\n    }\r\n\r\nchange the value in limit to adjust the size of random String","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<pre><code>import java.util.Random;\n\npublic class RandomString {\n\n    public static void main(String[] args) {\n        \n        StringBuilder randomString = new StringBuilder();\n                \n        new Random().ints(65, 122)\n                    .filter(i-&gt;!(i&gt;90&amp;&amp;i&lt;97))\n                    .boxed()\n                    .limit(12)\n                    .map(c-&gt;Character.toChars(c))\n                    .forEach(c-&gt;randomString.append(c));\n                \n        System.out.println(randomString);\n        \n    }\n    \n}\n</code></pre>\n<p>change the value in limit to adjust the size of random String</p>\n"},{"tags":[],"owner":{"account_id":3106827,"reputation":762,"user_id":2629440,"display_name":"Vivek Goel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691566025,"creation_date":1691566025,"answer_id":76865493,"question_id":71806961,"body_markdown":"Easiest way is by using apache commons library:\r\n\r\n    RandomStringUtils.randomAlphabetic(10);","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<p>Easiest way is by using apache commons library:</p>\n<pre><code>RandomStringUtils.randomAlphabetic(10);\n</code></pre>\n"}],"owner":{"account_id":21016816,"reputation":25,"user_id":15444097,"display_name":"Vlad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2050,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1691566025,"creation_date":1649498014,"question_id":71806961,"body_markdown":"So, I found this function on the Internet and I would like to get some guidance on making strings use uppercase letters alongside lowercase ones, the code:\r\n```\r\nimport java.util.Random;\r\n\r\npublic class randomstring {\r\n\tpublic void rand()\r\n\t{\r\n\t\tint leftLimit = 97; // letter &#39;a&#39;\r\n\t    int rightLimit = 122; // letter &#39;z&#39;\r\n\t    int targetStringLength = 5;\r\n\t    Random random = new Random();\r\n\t    StringBuilder buffer = new StringBuilder(targetStringLength);\r\n\t    for (int i = 0; i &lt; targetStringLength; i++) {\r\n\t        int randomLimitedInt = leftLimit + (int) \r\n\t          (random.nextFloat() * (rightLimit - leftLimit + 1));\r\n\t        buffer.append((char) randomLimitedInt);\r\n\t    }\r\n\t    String generatedString = buffer.toString();\r\n\r\n\t    System.out.println(generatedString);\r\n\t\t\r\n\t\t\r\n\t}\r\n\tpublic static void main(String[] args) {\r\n\t\trandomstring random = new randomstring();\r\n\t\trandom.rand();\r\n\t}\r\n}\r\n```","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<p>So, I found this function on the Internet and I would like to get some guidance on making strings use uppercase letters alongside lowercase ones, the code:</p>\n<pre><code>import java.util.Random;\n\npublic class randomstring {\n    public void rand()\n    {\n        int leftLimit = 97; // letter 'a'\n        int rightLimit = 122; // letter 'z'\n        int targetStringLength = 5;\n        Random random = new Random();\n        StringBuilder buffer = new StringBuilder(targetStringLength);\n        for (int i = 0; i &lt; targetStringLength; i++) {\n            int randomLimitedInt = leftLimit + (int) \n              (random.nextFloat() * (rightLimit - leftLimit + 1));\n            buffer.append((char) randomLimitedInt);\n        }\n        String generatedString = buffer.toString();\n\n        System.out.println(generatedString);\n        \n        \n    }\n    public static void main(String[] args) {\n        randomstring random = new randomstring();\n        random.rand();\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691562141,"post_id":76865059,"comment_id":135506602,"body_markdown":"As a is negative, I think that the javadocs answers your question.  *The unsigned integer value is the argument plus 2pow(32) if the argument is negative;**","body":"As a is negative, I think that the javadocs answers your question.  <i>The unsigned integer value is the argument plus 2pow(32) if the argument is negative;*</i>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691562466,"post_id":76865059,"comment_id":135506652,"body_markdown":"why do you expect `001111111111111111111111111101` with 30 digits and not `00111111111111111111111111111101` with 32 digits (or `111111111111111111111111111101` with 30 digits) ?? An `int` has 32 bits but `toBinaryString()` does not *show* leading zeros","body":"why do you expect <code>001111111111111111111111111101</code> with 30 digits and not <code>00111111111111111111111111111101</code> with 32 digits (or <code>111111111111111111111111111101</code> with 30 digits) ?? An <code>int</code> has 32 bits but <code>toBinaryString()</code> does not <i>show</i> leading zeros"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691563104,"post_id":76865059,"comment_id":135506731,"body_markdown":"maybe the output from that [code](https://ideone.com/gVC20K) is better to see the problem","body":"maybe the output from that <a href=\"https://ideone.com/gVC20K\" rel=\"nofollow noreferrer\">code</a> is better to see the problem"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691563366,"creation_date":1691563366,"answer_id":76865206,"question_id":76865059,"body_markdown":"Why do you think that `Integer.toBinaryString()` outputs leading zeros? The [documentation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#toBinaryString(int)) clearly states otherwise:\r\n\r\n&gt; If the unsigned magnitude is zero, it is represented by a single zero character &#39;0&#39; (&#39;\\u0030&#39;); otherwise, the first character of the representation of the unsigned magnitude will not be the zero character.\r\n\r\nJava doesn&#39;t offer a built-in method to convert an integer into a binary representation with leading zeros. Several possible solutions are offered at https://stackoverflow.com/questions/4421400/how-to-get-0-padded-binary-representation-of-an-integer-in-java\r\n\r\nFor example you could use:\r\n\r\n    System.out.println(&quot; a&gt;&gt;&gt;2= &quot;+(a&gt;&gt;&gt;2)+&quot;(&quot;+String.format(&quot;%32s&quot;, Integer.toBinaryString(a&gt;&gt;&gt;2)).replace(&#39; &#39;, &#39;0&#39;)+&quot;)&quot;);\r\n","title":"Why doesn&#39;t this code output the way I think? (about shift)","body":"<p>Why do you think that <code>Integer.toBinaryString()</code> outputs leading zeros? The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#toBinaryString(int)\" rel=\"nofollow noreferrer\">documentation</a> clearly states otherwise:</p>\n<blockquote>\n<p>If the unsigned magnitude is zero, it is represented by a single zero character '0' ('\\u0030'); otherwise, the first character of the representation of the unsigned magnitude will not be the zero character.</p>\n</blockquote>\n<p>Java doesn't offer a built-in method to convert an integer into a binary representation with leading zeros. Several possible solutions are offered at <a href=\"https://stackoverflow.com/questions/4421400/how-to-get-0-padded-binary-representation-of-an-integer-in-java\">How to get 0-padded binary representation of an integer in java?</a></p>\n<p>For example you could use:</p>\n<pre><code>System.out.println(&quot; a&gt;&gt;&gt;2= &quot;+(a&gt;&gt;&gt;2)+&quot;(&quot;+String.format(&quot;%32s&quot;, Integer.toBinaryString(a&gt;&gt;&gt;2)).replace(' ', '0')+&quot;)&quot;);\n</code></pre>\n"}],"owner":{"account_id":29189470,"reputation":13,"user_id":22361845,"display_name":"changhoon seong"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76865206,"answer_count":1,"score":0,"last_activity_date":1691565319,"creation_date":1691561960,"question_id":76865059,"body_markdown":"\r\n```\r\npublic static void maain(String[] args){\r\n    int a = -11;\r\n    System.out.println(&quot; a= &quot;+a+&quot;(&quot;+Integer.toBinaryString(a)+&quot;)&quot;);\r\n    System.out.println(&quot; a&gt;&gt;2= &quot;+(a&gt;&gt;2)+&quot;(&quot;+Integer.toBinaryString(a&gt;&gt;2)+&quot;)&quot;);\r\n    System.out.println(&quot; a&gt;&gt;&gt;2= &quot;+(a&gt;&gt;&gt;2)+&quot;(&quot;+Integer.toBinaryString(a&gt;&gt;&gt;2)+&quot;)&quot;);\r\n}\r\n```\r\n\r\nI think a&gt;&gt;&gt;2 output is 001111111111111111111111111101, because &gt;&gt;&gt; means shift right and fill blanks with 0. Am I thinking wrong?","title":"Why doesn&#39;t this code output the way I think? (about shift)","body":"<pre><code>public static void maain(String[] args){\n    int a = -11;\n    System.out.println(&quot; a= &quot;+a+&quot;(&quot;+Integer.toBinaryString(a)+&quot;)&quot;);\n    System.out.println(&quot; a&gt;&gt;2= &quot;+(a&gt;&gt;2)+&quot;(&quot;+Integer.toBinaryString(a&gt;&gt;2)+&quot;)&quot;);\n    System.out.println(&quot; a&gt;&gt;&gt;2= &quot;+(a&gt;&gt;&gt;2)+&quot;(&quot;+Integer.toBinaryString(a&gt;&gt;&gt;2)+&quot;)&quot;);\n}\n</code></pre>\n<p>I think a&gt;&gt;&gt;2 output is 001111111111111111111111111101, because &gt;&gt;&gt; means shift right and fill blanks with 0. Am I thinking wrong?</p>\n"},{"tags":["java","jpa","weblogic12c","entitymanager","classcastexception"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1691513381,"post_id":76861174,"comment_id":135500774,"body_markdown":"How have you deployed the application and what is in its packaging? Ie do you have  the JPA provider jars in the application and on the server multiple times? Do you use hot redeployment, and if so, does restarting the server help?","body":"How have you deployed the application and what is in its packaging? Ie do you have  the JPA provider jars in the application and on the server multiple times? Do you use hot redeployment, and if so, does restarting the server help?"},{"owner":{"account_id":16592282,"reputation":53,"user_id":11990156,"display_name":"DilliBabu S"},"score":0,"creation_date":1691515533,"post_id":76861174,"comment_id":135501146,"body_markdown":"We are using EAR for deployment. Yes we do have JPA jars. No We not do hot redeployement.","body":"We are using EAR for deployment. Yes we do have JPA jars. No We not do hot redeployement."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1691524089,"post_id":76861174,"comment_id":135502667,"body_markdown":"More meant where the jars are and if any are included in the ear that might also be on the server&#39;s class path.","body":"More meant where the jars are and if any are included in the ear that might also be on the server&#39;s class path."}],"owner":{"account_id":16592282,"reputation":53,"user_id":11990156,"display_name":"DilliBabu S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691565219,"creation_date":1691509436,"question_id":76861174,"body_markdown":"We are currently migrating our Java EE application from Weblogic 11g to Weblogic 12c.\r\n\r\nHere were are facing ClassCastException when using JPA EntityManager&#39;s query.getSingleResult() method.\r\n\r\nIt seems to be the Object returned by entityManager is loaded by different classloader and the Object in Application is loaded by different classloader were the classes are same.\r\n\r\n\r\nWhile checking with **wls-cat** in weblogic it shows Same classloader with multiple instance for single application.\r\n\r\nError: Caused By: java.lang.ClassCastException: Cannot cast com.dev.user.dataaccess.jpa.entity.User to com.dev.user.dataaccess.jpa.entity.User\r\n\r\nCan someone help me to resolve it? Thanks in Advance.\r\n\r\n[![added wls-cat classloader image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LnwLB.png\r\n\r\n**UPDATED:** After some workaround found that Persistence.XML is loaded on Application deployement so entitymanager loads the classes declared in persistnce.xml &lt;class&gt;&lt;/class&gt;. When we redeploy our application uses new classloader but entitymanager still uses the old classloader.\r\n","title":"WebLogic 12c ClassCastException when Using JPA","body":"<p>We are currently migrating our Java EE application from Weblogic 11g to Weblogic 12c.</p>\n<p>Here were are facing ClassCastException when using JPA EntityManager's query.getSingleResult() method.</p>\n<p>It seems to be the Object returned by entityManager is loaded by different classloader and the Object in Application is loaded by different classloader were the classes are same.</p>\n<p>While checking with <strong>wls-cat</strong> in weblogic it shows Same classloader with multiple instance for single application.</p>\n<p>Error: Caused By: java.lang.ClassCastException: Cannot cast com.dev.user.dataaccess.jpa.entity.User to com.dev.user.dataaccess.jpa.entity.User</p>\n<p>Can someone help me to resolve it? Thanks in Advance.</p>\n<p><a href=\"https://i.stack.imgur.com/LnwLB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LnwLB.png\" alt=\"added wls-cat classloader image\" /></a></p>\n<p><strong>UPDATED:</strong> After some workaround found that Persistence.XML is loaded on Application deployement so entitymanager loads the classes declared in persistnce.xml . When we redeploy our application uses new classloader but entitymanager still uses the old classloader.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":14681183,"reputation":146,"user_id":10602598,"display_name":"I.Yuldoshev"},"score":0,"creation_date":1691434237,"post_id":76849681,"comment_id":135488400,"body_markdown":"Since your session policy is STATELESS, you cannot get active sessions(online users).\nYou are not maintaining any session information in your back-end, state information comes together with request(token in your case).\nProbably you should use WebSocket or some other technologies to maintain user activity status","body":"Since your session policy is STATELESS, you cannot get active sessions(online users). You are not maintaining any session information in your back-end, state information comes together with request(token in your case). Probably you should use WebSocket or some other technologies to maintain user activity status"},{"owner":{"account_id":26186898,"reputation":99,"user_id":19869319,"display_name":"Alex"},"score":0,"creation_date":1691505267,"post_id":76849681,"comment_id":135499022,"body_markdown":"@I.Yuldoshev thanks for the answer the main problem is i refresh the token for each request the user does, so do you have any solution how to keep track? If so i can remove the stateless but i don&#39;t know how to procede","body":"@I.Yuldoshev thanks for the answer the main problem is i refresh the token for each request the user does, so do you have any solution how to keep track? If so i can remove the stateless but i don&#39;t know how to procede"}],"owner":{"account_id":26186898,"reputation":99,"user_id":19869319,"display_name":"Alex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1691565054,"creation_date":1691394129,"question_id":76849681,"body_markdown":"I need to get how manyusers are currently using my application, one problem is everytime a user make a request my application create a new token for that user (react get that token and replace the old one)\r\n\r\nI already tried SessionRegistry but because it create a new token for each request the number it returns increase everytime:\r\n\r\n       @Autowired\r\n       private SessionRegistry sessionRegistry;\r\n\r\n       @GetMapping\r\n       public ResponseEntity&lt;Response&lt;Integer&gt;&gt; getSessions(){\r\n    \r\n           List&lt;String&gt; userDetailsList = sessionRegistry.getAllPrincipals().stream()\r\n                   .filter(u -&gt; !sessionRegistry.getAllSessions(u, false).isEmpty())\r\n                   .map(Object::toString)\r\n                   .collect(Collectors.toList());\r\n           int sessions = userDetailsList.size();\r\n                   //MySessionListener.getActiveSessions();\r\n           Response&lt;Integer&gt; response = new Response&lt;&gt;();\r\n           response.setData(sessions);\r\n           return ResponseEntity.ok(response);\r\n       }\r\n\r\nin my WebSecurityConfigurerAdapterImpl:\r\n\r\n    @Bean\r\n    public SessionRegistry sessionRegistry() {\r\n        return new SessionRegistryImpl();\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n       \r\n        http.httpBasic().and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .cors()\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(\r\n                        &quot;/v3/api-docs/**&quot;,\r\n                        &quot;/swagger-ui/**&quot;\r\n                ).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and().csrf().disable();\r\n\r\n        http.headers().frameOptions().disable();\r\n\r\n        http.addFilterBefore(\r\n            authenticationTokenFilterBean(), \r\n            UsernamePasswordAuthenticationFilter.class\r\n        );\r\n\r\n        http\r\n           .headers().cacheControl();\r\n\r\n        http\r\n           .sessionManagement()\r\n           .maximumSessions(1).sessionRegistry(sessionRegistry());\r\n    }\r\n\r\n\r\nin my class who implements OncePerRequestFilter has this method to update the crrent token for each request so i don&#39;t know if this will be a problem:\r\n\r\n   \r\n\r\n         if (jwtTokenUtil.canTokenBeRefreshed(authToken)) {\r\n                                    authToken = jwtTokenUtil.refreshToken(authToken);\r\n                                }\r\n     request.setAttribute(&quot;x-auth&quot;, authToken);\r\n\r\nps:\r\nMy current application is deployed in a wildfly 18 server and the requestes are handled by apache","title":"Get the online users in my spring security","body":"<p>I need to get how manyusers are currently using my application, one problem is everytime a user make a request my application create a new token for that user (react get that token and replace the old one)</p>\n<p>I already tried SessionRegistry but because it create a new token for each request the number it returns increase everytime:</p>\n<pre><code>   @Autowired\n   private SessionRegistry sessionRegistry;\n\n   @GetMapping\n   public ResponseEntity&lt;Response&lt;Integer&gt;&gt; getSessions(){\n\n       List&lt;String&gt; userDetailsList = sessionRegistry.getAllPrincipals().stream()\n               .filter(u -&gt; !sessionRegistry.getAllSessions(u, false).isEmpty())\n               .map(Object::toString)\n               .collect(Collectors.toList());\n       int sessions = userDetailsList.size();\n               //MySessionListener.getActiveSessions();\n       Response&lt;Integer&gt; response = new Response&lt;&gt;();\n       response.setData(sessions);\n       return ResponseEntity.ok(response);\n   }\n</code></pre>\n<p>in my WebSecurityConfigurerAdapterImpl:</p>\n<pre><code>@Bean\npublic SessionRegistry sessionRegistry() {\n    return new SessionRegistryImpl();\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n   \n    http.httpBasic().and()\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and()\n            .cors()\n            .and()\n            .authorizeRequests()\n            .antMatchers(\n                    &quot;/v3/api-docs/**&quot;,\n                    &quot;/swagger-ui/**&quot;\n            ).permitAll()\n            .anyRequest().authenticated()\n            .and().csrf().disable();\n\n    http.headers().frameOptions().disable();\n\n    http.addFilterBefore(\n        authenticationTokenFilterBean(), \n        UsernamePasswordAuthenticationFilter.class\n    );\n\n    http\n       .headers().cacheControl();\n\n    http\n       .sessionManagement()\n       .maximumSessions(1).sessionRegistry(sessionRegistry());\n}\n</code></pre>\n<p>in my class who implements OncePerRequestFilter has this method to update the crrent token for each request so i don't know if this will be a problem:</p>\n<pre><code>     if (jwtTokenUtil.canTokenBeRefreshed(authToken)) {\n                                authToken = jwtTokenUtil.refreshToken(authToken);\n                            }\n request.setAttribute(&quot;x-auth&quot;, authToken);\n</code></pre>\n<p>ps:\nMy current application is deployed in a wildfly 18 server and the requestes are handled by apache</p>\n"},{"tags":["java","jsf","el"],"comments":[{"owner":{"account_id":472248,"reputation":19503,"user_id":880619,"accept_rate":100,"display_name":"Jasper de Vries"},"score":1,"creation_date":1691564893,"post_id":76865307,"comment_id":135507061,"body_markdown":"That are two different things. Overriding is not overloading. What you experience is expected and correct.","body":"That are two different things. Overriding is not overloading. What you experience is expected and correct."}],"owner":{"account_id":7849781,"reputation":141,"user_id":5933589,"accept_rate":70,"display_name":"raho"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691642627,"answer_count":0,"score":0,"last_activity_date":1691564931,"creation_date":1691564213,"question_id":76865307,"body_markdown":"Consider following scenario:\r\n\r\nMy Java classes:\r\n\r\n    public abstract class AbstractListBaseModel {\r\n        public void onColumnToggle(ToggleEvent event) {\r\n            // toggle column\r\n        }\r\n    }\r\n    \r\n    @Named\r\n    public class MyListModel extends AbstractListBaseModel {\r\n        @Override\r\n        public void onColumnToggle(ToggleEvent event) {\r\n            // toggle column...\r\n            super.onColumnToggle(event);\r\n            // ...and do some more\r\n        }\r\n    }\r\n\r\nmyList.xhtml:\r\n\r\n    &lt;p:commandButton id=&quot;myToggler&quot; .../&gt;\r\n    &lt;p:columnToggler trigger=&quot;myToggler&quot; datasource=&quot;myListData&quot;&gt;\r\n        &lt;p:ajax event=&quot;toggle&quot; listener=&quot;#{myListModel.onColumnToggle}&quot;/&gt;\r\n    &lt;/p:columnToggler&gt;\r\n\r\nMy application always calls the MyListModel.onColumnToggle() method and that is wha I want - but is this the guaranteed behavior?\r\n[What You Can Not Do in EL][1] mentions that EL doesn&#39;t support overloading.\r\n\r\nAnd IntelliJ IDE shows both method declarations when moving the cursor over the listener!\r\n\r\n\r\n\r\n  [1]: https://www.baeldung.com/intro-to-jsf-expression-language#CanNotDo","title":"JSF EL overload method inheritance","body":"<p>Consider following scenario:</p>\n<p>My Java classes:</p>\n<pre><code>public abstract class AbstractListBaseModel {\n    public void onColumnToggle(ToggleEvent event) {\n        // toggle column\n    }\n}\n\n@Named\npublic class MyListModel extends AbstractListBaseModel {\n    @Override\n    public void onColumnToggle(ToggleEvent event) {\n        // toggle column...\n        super.onColumnToggle(event);\n        // ...and do some more\n    }\n}\n</code></pre>\n<p>myList.xhtml:</p>\n<pre><code>&lt;p:commandButton id=&quot;myToggler&quot; .../&gt;\n&lt;p:columnToggler trigger=&quot;myToggler&quot; datasource=&quot;myListData&quot;&gt;\n    &lt;p:ajax event=&quot;toggle&quot; listener=&quot;#{myListModel.onColumnToggle}&quot;/&gt;\n&lt;/p:columnToggler&gt;\n</code></pre>\n<p>My application always calls the MyListModel.onColumnToggle() method and that is wha I want - but is this the guaranteed behavior?\n<a href=\"https://www.baeldung.com/intro-to-jsf-expression-language#CanNotDo\" rel=\"nofollow noreferrer\">What You Can Not Do in EL</a> mentions that EL doesn't support overloading.</p>\n<p>And IntelliJ IDE shows both method declarations when moving the cursor over the listener!</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1691473651,"post_id":76853860,"comment_id":135492558,"body_markdown":"Please edit your question and add your database structure as a screenshot. Please add the content of your `expenses` class.","body":"Please edit your question and add your database structure as a screenshot. Please add the content of your <code>expenses</code> class."},{"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"score":0,"creation_date":1691479988,"post_id":76853860,"comment_id":135493485,"body_markdown":"updated the the question. please help if you know the solution. Thank You!","body":"updated the the question. please help if you know the solution. Thank You!"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1691486172,"post_id":76853860,"comment_id":135494774,"body_markdown":"Please provide the database schema, not the query results.","body":"Please provide the database schema, not the query results."},{"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"score":0,"creation_date":1691490895,"post_id":76853860,"comment_id":135495712,"body_markdown":"Ok. re uploaded. please check!","body":"Ok. re uploaded. please check!"}],"answers":[{"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691564240,"creation_date":1691429574,"answer_id":76853941,"question_id":76853860,"body_markdown":"This is because for every document in the database collection, you are adding it to your expenses list. You can store all the expenses category wise and then add it to your adapter list. \r\n```\r\n...//other code\r\n\r\nexpensesArrayList.clear();\r\nList&lt;DocumentSnapshot&gt; list = queryDocumentSnapshots.getDocuments();\r\n\r\n// create a map for category wise total expense\r\nMap&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\r\n\r\nfor (DocumentSnapshot ds : list){\r\n    expenses expenses = ds.toObject(expenses.class);\r\n    String category = expenses.getCategory();\r\n    int amount = Integer.parseInt(expenses.getAmount());\r\n    if(map.containsKey(category))\r\n        amount += map.get(category);\r\n    map.put(category, amount);\r\n}\r\n\r\n// Iterate over map and add expense for each category\r\nfor (Map.Entry&lt;String,Integer&gt; entry : map.entrySet()){\r\n    \r\n    // add a constructor in your expenses class for this\r\n    expenses categoryExpense = new expenses(entry.getKey(), String.valueOf(entry.getValue()));\r\n    expensesArrayList.add(categoryExpense);\r\n}\r\nadapter.notifyDataSetChanged();\r\n\r\n...// other code\r\n\r\n// In you expenses.java class add this constructor as well\r\npublic expenses(String category, String amount) {\r\n        Category = category;\r\n        Amount = amount;\r\n}\r\n```\r\n\r\nHowever, there can be problems with this implementation in case you have similar categories with different names like, phone and Phone, they will be considered different categories. I would suggest you to redesign your implementation with enum classes for categories.\r\n\r\nQuick Tips:\r\n1. Class names should always be capitalized. So it should be Expense and not expenses.\r\n2. Member fields name shouldn&#39;t be capitalized, so they should be category, amount, email, etc.\r\n3. Make data type of your amount field as int or double, to avoid parsing and easier calculations.","title":"How to do this on recyclerview in android using firestore","body":"<p>This is because for every document in the database collection, you are adding it to your expenses list. You can store all the expenses category wise and then add it to your adapter list.</p>\n<pre><code>...//other code\n\nexpensesArrayList.clear();\nList&lt;DocumentSnapshot&gt; list = queryDocumentSnapshots.getDocuments();\n\n// create a map for category wise total expense\nMap&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\n\nfor (DocumentSnapshot ds : list){\n    expenses expenses = ds.toObject(expenses.class);\n    String category = expenses.getCategory();\n    int amount = Integer.parseInt(expenses.getAmount());\n    if(map.containsKey(category))\n        amount += map.get(category);\n    map.put(category, amount);\n}\n\n// Iterate over map and add expense for each category\nfor (Map.Entry&lt;String,Integer&gt; entry : map.entrySet()){\n    \n    // add a constructor in your expenses class for this\n    expenses categoryExpense = new expenses(entry.getKey(), String.valueOf(entry.getValue()));\n    expensesArrayList.add(categoryExpense);\n}\nadapter.notifyDataSetChanged();\n\n...// other code\n\n// In you expenses.java class add this constructor as well\npublic expenses(String category, String amount) {\n        Category = category;\n        Amount = amount;\n}\n</code></pre>\n<p>However, there can be problems with this implementation in case you have similar categories with different names like, phone and Phone, they will be considered different categories. I would suggest you to redesign your implementation with enum classes for categories.</p>\n<p>Quick Tips:</p>\n<ol>\n<li>Class names should always be capitalized. So it should be Expense and not expenses.</li>\n<li>Member fields name shouldn't be capitalized, so they should be category, amount, email, etc.</li>\n<li>Make data type of your amount field as int or double, to avoid parsing and easier calculations.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691491937,"creation_date":1691491937,"answer_id":76858833,"question_id":76853860,"body_markdown":"The problem in your code lies in the fact that you have in your `expenses` class a field called `Category` and a getter called `getCategory(),` which is not correct since Firebase is looking in the database for a field named `category` and not `Category`. See the lowercase `c` letter vs. capital letter `C`?\r\n\r\nThe Firebase SDK maps between your Java object and the JSON properties in the Cloud Firestore based on [JavaBean property naming conventions][1]. That being said, there are multiple solutions to solve this problem, but here are the simplest ones:\r\n\r\n* Make the fields follow the naming convention of the properties:\r\n\r\n```\r\npublic class Expenses {\r\n    String category;\r\n    String date;\r\n    String email;\r\n    String amount;\r\n    String description;\r\n    String expId;\r\n\r\n    public expenses(String category, String date, String email, String amount, String description, String expId) {\r\n        this.category = category;\r\n        this.date = date;\r\n        this.email = email;\r\n        this.amount = amount;\r\n        this.description = description;\r\n        this.expId = expId;\r\n    }\r\n\r\n    public Expenses(){}\r\n\r\n    public String getCategory() {\r\n        return category;\r\n    }\r\n\r\n    public void setCategory(String category) {\r\n        this.category = category;\r\n    }\r\n\r\n    public String getDate() {\r\n        return date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        this.date = date;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getAmount() {\r\n        return Amount;\r\n    }\r\n\r\n    public void setAmount(String amount) {\r\n        this.amount = amount;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public String getExpId() {\r\n        return expId;\r\n    }\r\n\r\n    public void setExpId(String expId) {\r\n        this.expId = expId;\r\n    }\r\n}\r\n```\r\n\r\n* Use `@PropertyName` annotation in front of the getters, to map the the fields in your class into the name that exists inside the database:\r\n\r\n```\r\npublic class expenses {\r\n    String Category;\r\n    String Date;\r\n    String Email;\r\n    String Amount;\r\n    String Description;\r\n    String expID;\r\n\r\n    public expenses(String category, String date, String email, String amount, String description, String expId) {\r\n        Category = category;\r\n        Date = date;\r\n        Email = email;\r\n        Amount = amount;\r\n        Description = description;\r\n        this.expID = expID;\r\n    }\r\n\r\n    public expenses(){}\r\n\r\n    @PropertyName(&quot;Category&quot;)\r\n    public String getCategory() {\r\n        return Category;\r\n    }\r\n\r\n    public void setCategory(String category) {\r\n        Category = category;\r\n    }\r\n\r\n    @PropertyName(&quot;Date&quot;)\r\n    public String getDate() {\r\n        return Date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        Date = date;\r\n    }\r\n\r\n    @PropertyName(&quot;Email&quot;)\r\n    public String getEmail() {\r\n        return Email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        Email = email;\r\n    }\r\n\r\n    @PropertyName(&quot;Amount&quot;)\r\n    public String getAmount() {\r\n        return Amount;\r\n    }\r\n\r\n    public void setAmount(String amount) {\r\n        Amount = amount;\r\n    }\r\n\r\n    @PropertyName(&quot;Description&quot;)\r\n    public String getDescription() {\r\n        return Description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        Description = description;\r\n    }\r\n\r\n    public String getExpID() {\r\n        return expID;\r\n    }\r\n\r\n    public void setExpID(String expID) {\r\n        this.expID = expID;\r\n    }\r\n}\r\n```\r\n\r\nP.S. Please also see that I have renamed the class from `expenses` to `Expenses`, to the [Java Naming Conventions][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1991316/where-is-the-javabean-property-naming-convention-defined\r\n  [2]: https://www.javatpoint.com/java-naming-conventions","title":"How to do this on recyclerview in android using firestore","body":"<p>The problem in your code lies in the fact that you have in your <code>expenses</code> class a field called <code>Category</code> and a getter called <code>getCategory(),</code> which is not correct since Firebase is looking in the database for a field named <code>category</code> and not <code>Category</code>. See the lowercase <code>c</code> letter vs. capital letter <code>C</code>?</p>\n<p>The Firebase SDK maps between your Java object and the JSON properties in the Cloud Firestore based on <a href=\"https://stackoverflow.com/questions/1991316/where-is-the-javabean-property-naming-convention-defined\">JavaBean property naming conventions</a>. That being said, there are multiple solutions to solve this problem, but here are the simplest ones:</p>\n<ul>\n<li>Make the fields follow the naming convention of the properties:</li>\n</ul>\n<pre><code>public class Expenses {\n    String category;\n    String date;\n    String email;\n    String amount;\n    String description;\n    String expId;\n\n    public expenses(String category, String date, String email, String amount, String description, String expId) {\n        this.category = category;\n        this.date = date;\n        this.email = email;\n        this.amount = amount;\n        this.description = description;\n        this.expId = expId;\n    }\n\n    public Expenses(){}\n\n    public String getCategory() {\n        return category;\n    }\n\n    public void setCategory(String category) {\n        this.category = category;\n    }\n\n    public String getDate() {\n        return date;\n    }\n\n    public void setDate(String date) {\n        this.date = date;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getAmount() {\n        return Amount;\n    }\n\n    public void setAmount(String amount) {\n        this.amount = amount;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getExpId() {\n        return expId;\n    }\n\n    public void setExpId(String expId) {\n        this.expId = expId;\n    }\n}\n</code></pre>\n<ul>\n<li>Use <code>@PropertyName</code> annotation in front of the getters, to map the the fields in your class into the name that exists inside the database:</li>\n</ul>\n<pre><code>public class expenses {\n    String Category;\n    String Date;\n    String Email;\n    String Amount;\n    String Description;\n    String expID;\n\n    public expenses(String category, String date, String email, String amount, String description, String expId) {\n        Category = category;\n        Date = date;\n        Email = email;\n        Amount = amount;\n        Description = description;\n        this.expID = expID;\n    }\n\n    public expenses(){}\n\n    @PropertyName(&quot;Category&quot;)\n    public String getCategory() {\n        return Category;\n    }\n\n    public void setCategory(String category) {\n        Category = category;\n    }\n\n    @PropertyName(&quot;Date&quot;)\n    public String getDate() {\n        return Date;\n    }\n\n    public void setDate(String date) {\n        Date = date;\n    }\n\n    @PropertyName(&quot;Email&quot;)\n    public String getEmail() {\n        return Email;\n    }\n\n    public void setEmail(String email) {\n        Email = email;\n    }\n\n    @PropertyName(&quot;Amount&quot;)\n    public String getAmount() {\n        return Amount;\n    }\n\n    public void setAmount(String amount) {\n        Amount = amount;\n    }\n\n    @PropertyName(&quot;Description&quot;)\n    public String getDescription() {\n        return Description;\n    }\n\n    public void setDescription(String description) {\n        Description = description;\n    }\n\n    public String getExpID() {\n        return expID;\n    }\n\n    public void setExpID(String expID) {\n        this.expID = expID;\n    }\n}\n</code></pre>\n<p>P.S. Please also see that I have renamed the class from <code>expenses</code> to <code>Expenses</code>, to the <a href=\"https://www.javatpoint.com/java-naming-conventions\" rel=\"nofollow noreferrer\">Java Naming Conventions</a>.</p>\n"}],"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76853941,"answer_count":2,"score":0,"last_activity_date":1691564240,"creation_date":1691428713,"question_id":76853860,"body_markdown":"This is the result of RecyclerView:\r\n\r\n![enter image description here](https://i.stack.imgur.com/Y7WZ2.jpg)\r\n\r\nFirestore database schema:\r\n\r\n![Frestore Data][1]\r\n\r\n\r\nthis is the code I am using. This only retrieve data like in a image \r\n\r\n```\r\ndb.collection(&quot;Expenses&quot;)\r\n    .whereEqualTo(&quot;Email&quot;,email)\r\n    .whereGreaterThanOrEqualTo(&quot;Date&quot;,MonthFirstDate)\r\n    .whereLessThanOrEqualTo(&quot;Date&quot;,TodayDate)\r\n    .orderBy(&quot;Date&quot;)\r\n    .get()\r\n    .addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;() \t\t\t\t\t\t\t\t\t\t\t{\r\n        @Override\r\n        public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n            if (!queryDocumentSnapshots.isEmpty()){\r\n                expensesArrayList.clear();\r\n                List&lt;DocumentSnapshot&gt; list = queryDocumentSnapshots.getDocuments();\r\n                for (DocumentSnapshot ds : list){\r\n                    expenses expenses = ds.toObject(expenses.class);\r\n                    expensesArrayList.add(expenses);\r\n                }\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n        }\r\n    })\r\n```\r\n\r\nrecyclerview Adapter code\r\n\r\n\r\n```\r\nimport java.util.ArrayList;\r\n\r\npublic class expensesAdapter extends RecyclerView.Adapter&lt;expensesAdapter.expHolder&gt; {\r\n\r\n    private ArrayList&lt;expenses&gt; expensesArrayList;\r\n    private Context context;\r\n\r\n\r\n    public expensesAdapter(ArrayList&lt;expenses&gt; expensesArrayList, Context context) {\r\n        this.expensesArrayList = expensesArrayList;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public expensesAdapter.expHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(context).inflate(R.layout.expensesitems,parent,false);\r\n        return new expHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull expensesAdapter.expHolder holder, int position) {\r\n        expenses expenses = expensesArrayList.get(position);\r\n        holder.catName.setText(expenses.getCategory());\r\n        holder.catAmont.setText(expenses.getAmount());\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return expensesArrayList.size();\r\n    }\r\n\r\n    class expHolder extends RecyclerView.ViewHolder {\r\n\r\n        private final TextView catName,catAmont;\r\n\r\n        public expHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            catName = itemView.findViewById(R.id.expCategory);\r\n            catAmont =itemView.findViewById(R.id.expAmount);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is the expenses class\r\n\r\n    \r\n    public class expenses {\r\n        String Category;\r\n        String Date;\r\n        String Email;\r\n        String Amount;\r\n        String Description;\r\n        String expID;\r\n    \r\n        public expenses(String category, String date, String email, String amount, String description, String expID) {\r\n            Category = category;\r\n            Date = date;\r\n            Email = email;\r\n            Amount = amount;\r\n            Description = description;\r\n            this.expID = expID;\r\n        }\r\n    \r\n        public expenses(){}\r\n    \r\n        public String getCategory() {\r\n            return Category;\r\n        }\r\n    \r\n        public void setCategory(String category) {\r\n            Category = category;\r\n        }\r\n    \r\n        public String getDate() {\r\n            return Date;\r\n        }\r\n    \r\n        public void setDate(String date) {\r\n            Date = date;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return Email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            Email = email;\r\n        }\r\n    \r\n        public String getAmount() {\r\n            return Amount;\r\n        }\r\n    \r\n        public void setAmount(String amount) {\r\n            Amount = amount;\r\n        }\r\n    \r\n        public String getDescription() {\r\n            return Description;\r\n        }\r\n    \r\n        public void setDescription(String description) {\r\n            Description = description;\r\n        }\r\n    \r\n        public String getExpID() {\r\n            return expID;\r\n        }\r\n    \r\n        public void setExpID(String expID) {\r\n            this.expID = expID;\r\n        }\r\n    }\r\n\r\nBut i need this kind of result:\r\n![](https://i.stack.imgur.com/kJ4hC.jpg)\r\n\r\n\r\nI want a **category wise Sum amount** on recyclerview. In my code its only showing separately.   \r\nPlease gys help me for figure this out! \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XOzfa.png","title":"How to do this on recyclerview in android using firestore","body":"<p>This is the result of RecyclerView:</p>\n<p><img src=\"https://i.stack.imgur.com/Y7WZ2.jpg\" alt=\"enter image description here\" /></p>\n<p>Firestore database schema:</p>\n<p><img src=\"https://i.stack.imgur.com/XOzfa.png\" alt=\"Frestore Data\" /></p>\n<p>this is the code I am using. This only retrieve data like in a image</p>\n<pre><code>db.collection(&quot;Expenses&quot;)\n    .whereEqualTo(&quot;Email&quot;,email)\n    .whereGreaterThanOrEqualTo(&quot;Date&quot;,MonthFirstDate)\n    .whereLessThanOrEqualTo(&quot;Date&quot;,TodayDate)\n    .orderBy(&quot;Date&quot;)\n    .get()\n    .addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;()                                            {\n        @Override\n        public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\n            if (!queryDocumentSnapshots.isEmpty()){\n                expensesArrayList.clear();\n                List&lt;DocumentSnapshot&gt; list = queryDocumentSnapshots.getDocuments();\n                for (DocumentSnapshot ds : list){\n                    expenses expenses = ds.toObject(expenses.class);\n                    expensesArrayList.add(expenses);\n                }\n                adapter.notifyDataSetChanged();\n            }\n        }\n    })\n</code></pre>\n<p>recyclerview Adapter code</p>\n<pre><code>import java.util.ArrayList;\n\npublic class expensesAdapter extends RecyclerView.Adapter&lt;expensesAdapter.expHolder&gt; {\n\n    private ArrayList&lt;expenses&gt; expensesArrayList;\n    private Context context;\n\n\n    public expensesAdapter(ArrayList&lt;expenses&gt; expensesArrayList, Context context) {\n        this.expensesArrayList = expensesArrayList;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public expensesAdapter.expHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(context).inflate(R.layout.expensesitems,parent,false);\n        return new expHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull expensesAdapter.expHolder holder, int position) {\n        expenses expenses = expensesArrayList.get(position);\n        holder.catName.setText(expenses.getCategory());\n        holder.catAmont.setText(expenses.getAmount());\n    }\n\n    @Override\n    public int getItemCount() {\n        return expensesArrayList.size();\n    }\n\n    class expHolder extends RecyclerView.ViewHolder {\n\n        private final TextView catName,catAmont;\n\n        public expHolder(@NonNull View itemView) {\n            super(itemView);\n\n            catName = itemView.findViewById(R.id.expCategory);\n            catAmont =itemView.findViewById(R.id.expAmount);\n        }\n    }\n}\n</code></pre>\n<p>This is the expenses class</p>\n<pre><code>public class expenses {\n    String Category;\n    String Date;\n    String Email;\n    String Amount;\n    String Description;\n    String expID;\n\n    public expenses(String category, String date, String email, String amount, String description, String expID) {\n        Category = category;\n        Date = date;\n        Email = email;\n        Amount = amount;\n        Description = description;\n        this.expID = expID;\n    }\n\n    public expenses(){}\n\n    public String getCategory() {\n        return Category;\n    }\n\n    public void setCategory(String category) {\n        Category = category;\n    }\n\n    public String getDate() {\n        return Date;\n    }\n\n    public void setDate(String date) {\n        Date = date;\n    }\n\n    public String getEmail() {\n        return Email;\n    }\n\n    public void setEmail(String email) {\n        Email = email;\n    }\n\n    public String getAmount() {\n        return Amount;\n    }\n\n    public void setAmount(String amount) {\n        Amount = amount;\n    }\n\n    public String getDescription() {\n        return Description;\n    }\n\n    public void setDescription(String description) {\n        Description = description;\n    }\n\n    public String getExpID() {\n        return expID;\n    }\n\n    public void setExpID(String expID) {\n        this.expID = expID;\n    }\n}\n</code></pre>\n<p>But i need this kind of result:\n<img src=\"https://i.stack.imgur.com/kJ4hC.jpg\" alt=\"\" /></p>\n<p>I want a <strong>category wise Sum amount</strong> on recyclerview. In my code its only showing separately.<br />\nPlease gys help me for figure this out!</p>\n"},{"tags":["java","rest","http","elasticsearch","request"],"comments":[{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1614755697,"post_id":66448597,"comment_id":117478465,"body_markdown":"I&#39;m not sure the error is related to the query. Can you post the full stack trace please?","body":"I&#39;m not sure the error is related to the query. Can you post the full stack trace please?"},{"owner":{"account_id":20854662,"reputation":1,"user_id":15318317,"display_name":"amalviya_13"},"score":0,"creation_date":1614812932,"post_id":66448597,"comment_id":117502945,"body_markdown":"I actually figured out the problem. Somehow updating my pom.xml to hold older versions of elasticsearch solved the problem.","body":"I actually figured out the problem. Somehow updating my pom.xml to hold older versions of elasticsearch solved the problem."}],"owner":{"account_id":20854662,"reputation":1,"user_id":15318317,"display_name":"amalviya_13"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691564173,"creation_date":1614727818,"question_id":66448597,"body_markdown":"I have an elasticsearch cluster running on my port 9201. I want to send a POST request to it to retrieve some data using a query I have built. I have this code so far following elastic search&#39;s own api documentation. I am getting a ```Exception in thread &quot;main&quot; java.lang.BootstrapMethodError: call site initialization exception```\r\nThis is being thrown at the line which is performing the request ```Response response = restClient.performRequest(request);```\r\n\r\nThis is the code I have so far\r\n```\r\ntry{\r\n    RestClient restClient = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9201, &quot;http&quot;)).build();\r\n    Request request = new Request(&quot;POST&quot;, &quot;/event/_search&quot;);\r\n    request.setEntity(new NStringEntity(\r\n                    &quot;{\\&quot;query\\&quot;:{\\&quot;bool\\&quot;:{\\&quot;must\\&quot;:[{\\&quot;match\\&quot;:{\\&quot;action\\&quot;:\\&quot;CREATE\\&quot;}}],\\&quot;must_not\\&quot;:[],\\&quot;should\\&quot;:[]}},\\&quot;from\\&quot;:0,\\&quot;size\\&quot;:10,\\&quot;sort\\&quot;:[],\\&quot;aggs\\&quot;:{}}&quot;,\r\n                    ContentType.APPLICATION_JSON));\r\n    Response response = restClient.performRequest(request);\r\n    System.out.println(response.toString());\r\n}\r\ncatch (Exception e){\r\n    System.out.println(e);\r\n}\r\n```\r\nEven if I remove my ```request.setEntity``` line, I am getting the error.","title":"Attempting to use RestClient to sent POST request to elasticsearch","body":"<p>I have an elasticsearch cluster running on my port 9201. I want to send a POST request to it to retrieve some data using a query I have built. I have this code so far following elastic search's own api documentation. I am getting a <code>Exception in thread &quot;main&quot; java.lang.BootstrapMethodError: call site initialization exception</code>\nThis is being thrown at the line which is performing the request <code>Response response = restClient.performRequest(request);</code></p>\n<p>This is the code I have so far</p>\n<pre><code>try{\n    RestClient restClient = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9201, &quot;http&quot;)).build();\n    Request request = new Request(&quot;POST&quot;, &quot;/event/_search&quot;);\n    request.setEntity(new NStringEntity(\n                    &quot;{\\&quot;query\\&quot;:{\\&quot;bool\\&quot;:{\\&quot;must\\&quot;:[{\\&quot;match\\&quot;:{\\&quot;action\\&quot;:\\&quot;CREATE\\&quot;}}],\\&quot;must_not\\&quot;:[],\\&quot;should\\&quot;:[]}},\\&quot;from\\&quot;:0,\\&quot;size\\&quot;:10,\\&quot;sort\\&quot;:[],\\&quot;aggs\\&quot;:{}}&quot;,\n                    ContentType.APPLICATION_JSON));\n    Response response = restClient.performRequest(request);\n    System.out.println(response.toString());\n}\ncatch (Exception e){\n    System.out.println(e);\n}\n</code></pre>\n<p>Even if I remove my <code>request.setEntity</code> line, I am getting the error.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-mongodb"],"comments":[{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":1,"creation_date":1691563309,"post_id":76865072,"comment_id":135506771,"body_markdown":"Is there a reason you are using Joda Time ?  If not, you should switch to Java’s own java.time package (that was actually developed by the same guy who developed joda Time - and he recommends moving to java.time) - who knows, that may (I guess probably will) make that Stack Overflow error go away. https://stackoverflow.com/a/29768532/681444","body":"Is there a reason you are using Joda Time ?  If not, you should switch to Java’s own java.time package (that was actually developed by the same guy who developed joda Time - and he recommends moving to java.time) - who knows, that may (I guess probably will) make that Stack Overflow error go away. <a href=\"https://stackoverflow.com/a/29768532/681444\">stackoverflow.com/a/29768532/681444</a>"}],"answers":[{"tags":[],"owner":{"account_id":19173576,"reputation":26,"user_id":14006751,"display_name":"frxdude"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691564137,"creation_date":1691564137,"answer_id":76865294,"question_id":76865072,"body_markdown":"Lombok @Data annotation includes @ToString and this makes circular reference on relation. If you don&#39;t need @ToString extract the @Data to @Getter @Setter etc. Or you just write on the field @ToString.exclude to prevent.\r\n","title":"Getting Stackoverflow error while upgrading from spring boot 2.7 to 3.0.8","body":"<p>Lombok @Data annotation includes @ToString and this makes circular reference on relation. If you don't need @ToString extract the @Data to @Getter @Setter etc. Or you just write on the field @ToString.exclude to prevent.</p>\n"}],"owner":{"account_id":25514807,"reputation":53,"user_id":19305834,"display_name":"R0512S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691564137,"creation_date":1691562101,"question_id":76865072,"body_markdown":"I am upgrading SB version from 2.7.12 to 3.0.8 and while upgrading i am getting the following error -\r\n ``` [https-jsse-nio-9001-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] -Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.StackOverflowError] with root cause\r\njava.lang.StackOverflowError: null\r\n        at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactory.getPropertyAccessor(ClassGeneratingPropertyAccessorFactory.java:82)\r\n        at org.springframework.data.mapping.model.InstantiationAwarePropertyAccessorFactory.lambda$getPropertyAccessor$0(InstantiationAwarePropertyAccessorFactory.java:42)\r\n        at org.springframework.data.mapping.model.InstantiationAwarePropertyAccessor.getProperty(InstantiationAwarePropertyAccessor.java:124)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:887)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n```\r\nI am using the joda.time to access the objects from mongo.\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\nimport com.xxx.util.JodaDateTimeCustomDeserializer;\r\nimport com.xxx.util.JodaDateTimeCustomSerializer;\r\n\r\nimport org.joda.time.DateTime;\r\nimport org.springframework.data.annotation.Id;\r\nimport org.springframework.data.mongodb.core.mapping.Document;\r\n\r\nimport lombok.Data;\r\n\r\n@Document(collection = &quot;data&quot;)\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@Data\r\npublic class IMData\r\n{\r\n  @Id\r\n  private String id;\r\n  private String uid;\r\n  @JsonSerialize(using = JodaDateTimeCustomSerializer.class)\r\n  @JsonDeserialize(using = JodaDateTimeCustomDeserializer.class)\r\n  private DateTime timestamp;\r\n  @JsonSerialize(using = JodaDateTimeCustomSerializer.class)\r\n  @JsonDeserialize(using = JodaDateTimeCustomDeserializer.class)\r\n  private DateTime metaDataTimestamp;\r\n  private String ioConfig;\r\n  private int changeCount;\r\n  private String inventoryDbId;\r\n  private String hostname;\r\n  private boolean isManual;\r\n}\r\n\r\n```\r\n\r\nIMO, Stack overflow error should mean some circular dependency but the correct is not thrown by Springboot here.\r\n","title":"Getting Stackoverflow error while upgrading from spring boot 2.7 to 3.0.8","body":"<p>I am upgrading SB version from 2.7.12 to 3.0.8 and while upgrading i am getting the following error -</p>\n<pre><code>java.lang.StackOverflowError: null\n       at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactory.getPropertyAccessor(ClassGeneratingPropertyAccessorFactory.java:82)\n       at org.springframework.data.mapping.model.InstantiationAwarePropertyAccessorFactory.lambda$getPropertyAccessor$0(InstantiationAwarePropertyAccessorFactory.java:42)\n       at org.springframework.data.mapping.model.InstantiationAwarePropertyAccessor.getProperty(InstantiationAwarePropertyAccessor.java:124)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:887)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n</code></pre>\n<p>I am using the joda.time to access the objects from mongo.</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport com.xxx.util.JodaDateTimeCustomDeserializer;\nimport com.xxx.util.JodaDateTimeCustomSerializer;\n\nimport org.joda.time.DateTime;\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\nimport lombok.Data;\n\n@Document(collection = &quot;data&quot;)\n@JsonIgnoreProperties(ignoreUnknown = true)\n@Data\npublic class IMData\n{\n  @Id\n  private String id;\n  private String uid;\n  @JsonSerialize(using = JodaDateTimeCustomSerializer.class)\n  @JsonDeserialize(using = JodaDateTimeCustomDeserializer.class)\n  private DateTime timestamp;\n  @JsonSerialize(using = JodaDateTimeCustomSerializer.class)\n  @JsonDeserialize(using = JodaDateTimeCustomDeserializer.class)\n  private DateTime metaDataTimestamp;\n  private String ioConfig;\n  private int changeCount;\n  private String inventoryDbId;\n  private String hostname;\n  private boolean isManual;\n}\n\n</code></pre>\n<p>IMO, Stack overflow error should mean some circular dependency but the correct is not thrown by Springboot here.</p>\n"},{"tags":["java","swing","jtable","jscrollpane","jviewport"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":1,"creation_date":1691564362,"post_id":76865250,"comment_id":135506973,"body_markdown":"Check if your model contains data and if so don&#39;t draw the image?","body":"Check if your model contains data and if so don&#39;t draw the image?"},{"owner":{"account_id":2339705,"reputation":1133,"user_id":2052584,"accept_rate":75,"display_name":"MrSnrub"},"score":0,"creation_date":1691565662,"post_id":76865250,"comment_id":135507189,"body_markdown":"@JustanotherJavaprogrammer Unfortunately, `paintComponent` of the `JViewPort` isn&#39;t invoked, when data is added. (And the JViewport has no direct access to the TableModel.) `paintComponent` is only invoked, for example, if I resize the JFrame but not for changes to the JTable. So I&#39;m looking for an elegant way to update and redraw the viewport if data is added. I thought there might be some generic approach for JScrollPane as it can be used for components other than JTable as well.","body":"@JustanotherJavaprogrammer Unfortunately, <code>paintComponent</code> of the <code>JViewPort</code> isn&#39;t invoked, when data is added. (And the JViewport has no direct access to the TableModel.) <code>paintComponent</code> is only invoked, for example, if I resize the JFrame but not for changes to the JTable. So I&#39;m looking for an elegant way to update and redraw the viewport if data is added. I thought there might be some generic approach for JScrollPane as it can be used for components other than JTable as well."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1691569168,"post_id":76865250,"comment_id":135507867,"body_markdown":"I would solve it in a slightly different way - while there is no data in the table, display a different component, this could act as your “drop target” initially, once data is added, switch the views to your table","body":"I would solve it in a slightly different way - while there is no data in the table, display a different component, this could act as your “drop target” initially, once data is added, switch the views to your table"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691569953,"post_id":76865250,"comment_id":135508028,"body_markdown":"Better. Solves the coupling problem","body":"Better. Solves the coupling problem"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1691710803,"post_id":76865250,"comment_id":135532179,"body_markdown":"If the paint method is not invoked when adding data, then simply invoke it yourself. An easy way to do this might be to simply extend the JViewPort and add the necessary code, for example, creating an `Boolean empty` variable within the JViewPort, then in your drag/drop event if data is added to the table for the first time just change that variable and make a call to repaint(). Then in the paint method just check the same variable and only print the background image if the variable is false.","body":"If the paint method is not invoked when adding data, then simply invoke it yourself. An easy way to do this might be to simply extend the JViewPort and add the necessary code, for example, creating an <code>Boolean empty</code> variable within the JViewPort, then in your drag/drop event if data is added to the table for the first time just change that variable and make a call to repaint(). Then in the paint method just check the same variable and only print the background image if the variable is false."}],"owner":{"account_id":2339705,"reputation":1133,"user_id":2052584,"accept_rate":75,"display_name":"MrSnrub"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691563808,"creation_date":1691563808,"question_id":76865250,"body_markdown":"I have a `JTable` and want my user to drag&amp;drop entries into that JTable.\r\n\r\nTo make that as obvious as possible, I want to display a placeholder image like *&quot;Please drag stuff HERE using your mouse!&quot;* in the background of the table, as long as the table is still empty.\r\n\r\nTherefore, I&#39;ve set up a custom `JViewport` using `createViewport()` of `JScrollPane`. See the following snippet from my `JScrollPane`:\r\n\r\n\t@Override\r\n\tprotected JViewport createViewport() {\r\n\t\treturn new JViewport() {\r\n\t\t\t@Override\r\n\t\t\tprotected void paintComponent( Graphics g ) {\r\n\t\t\t\tsuper.paintComponent( g );\r\n\t\t\t\t// XXX Draw background image here XXX\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\nTo simplify the snippet, I&#39;ve replaced the *&quot;draw a BufferedImage centered&quot;* stuff with a comment as it&#39;s not relevant to the question.\r\n\r\nSo far, the approach seems to work fine.\r\n\r\nBut of course, the background image is permanent, even if I add entries to the JTable. \r\n\r\nHow would you make it disappear as soon as the first entry is added to the JTable?\r\n\r\n- Add a `TableModelListener` that somehow triggers the viewport to `paintComponent` again?\r\n- Or is there a way for the `JViewport` to detect changes in &quot;its&quot; displayed component (its JTable) and redraw the Viewport then? (Would avoid coupling the data model and the Viewport.)\r\n","title":"Placeholder image in JViewport of JScrollPane for empty JTable","body":"<p>I have a <code>JTable</code> and want my user to drag&amp;drop entries into that JTable.</p>\n<p>To make that as obvious as possible, I want to display a placeholder image like <em>&quot;Please drag stuff HERE using your mouse!&quot;</em> in the background of the table, as long as the table is still empty.</p>\n<p>Therefore, I've set up a custom <code>JViewport</code> using <code>createViewport()</code> of <code>JScrollPane</code>. See the following snippet from my <code>JScrollPane</code>:</p>\n<pre><code>@Override\nprotected JViewport createViewport() {\n    return new JViewport() {\n        @Override\n        protected void paintComponent( Graphics g ) {\n            super.paintComponent( g );\n            // XXX Draw background image here XXX\n        }\n    };\n}\n</code></pre>\n<p>To simplify the snippet, I've replaced the <em>&quot;draw a BufferedImage centered&quot;</em> stuff with a comment as it's not relevant to the question.</p>\n<p>So far, the approach seems to work fine.</p>\n<p>But of course, the background image is permanent, even if I add entries to the JTable.</p>\n<p>How would you make it disappear as soon as the first entry is added to the JTable?</p>\n<ul>\n<li>Add a <code>TableModelListener</code> that somehow triggers the viewport to <code>paintComponent</code> again?</li>\n<li>Or is there a way for the <code>JViewport</code> to detect changes in &quot;its&quot; displayed component (its JTable) and redraw the Viewport then? (Would avoid coupling the data model and the Viewport.)</li>\n</ul>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9734,"page":258,"page_size":100}
