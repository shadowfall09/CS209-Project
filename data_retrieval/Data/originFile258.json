{"items":[{"tags":["java","ajax","spring","xmlhttprequest","blob"],"owner":{"account_id":22215254,"reputation":146,"user_id":16453806,"display_name":"wnotunas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691643359,"creation_date":1691641275,"question_id":76872633,"body_markdown":"I&#39;ve developed an API for validating Excel files and displaying the code content within it. My goal is to call this API using Ajax on the client-side. However, I&#39;ve encountered an issue with the **`blob`** type **`xhrcontent`**, which seems to be causing confusion. To help clarify, I&#39;m providing an overview of the relevant code snippets:\r\n\r\n- Here is the API\r\n\r\n```\r\n@PostMapping(&quot;/valid-excel&quot;)\r\npublic ResponseEntity&lt;Object&gt; validateExcel(@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n    try (InputStream is = file.getInputStream()) {\r\n            \r\n     /* code handle read and write excel file etc..\r\n      * inside a count variable for counting error\r\n      * if count &gt; 0 mean error exist and give out file for client can download \r\n      * else if count == 0 mean notifying client that their file good has no err\r\n      * if the system has interval error, fire swal popup for them \r\n      */\r\n\r\n      if (count != 0) {\r\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n          workbook.write(outputStream);\r\n\r\n          HttpHeaders headers = new HttpHeaders();\r\n                headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);\r\n          String fileName = &quot;IMPORT_FILE_&quot; + file.getName() + &quot;_validate.xlsx&quot;;\r\n          headers.setContentDispositionFormData(fileName, fileName);\r\n          return ResponseEntity.ok().headers(headers).body(outputStream.toByteArray());\r\n      } else {\r\n          return ResponseEntity.ok().body(new ResponseDto(true, Message.SUCCESS_VALID_EXCEL.value()));\r\n      }\r\n\r\n    } catch (Exception e) {\r\n        return ResponseEntity.internalServerError().body(new ResponseDto(false, Message.ERROR_INTERVAL_SERVER.value()));\r\n    }\r\n}\r\n```\r\n\r\n- Here is the ajax at client-side\r\n\r\n```\r\n$.ajax({\r\n    url: &#39;/valid-excel&#39;,\r\n    type: &#39;POST&#39;,\r\n    data: file,\r\n    processData: false,\r\n    contentType: false,\r\n    success: function (response) {\r\n        if (response.status != true || response.status == undefined ){\r\n            var url = window.URL.createObjectURL(data);\r\n            var blob = new Blob([response.body], { type: &#39;application/octet-stream&#39; });\r\n            var downloadLink = document.createElement(&#39;a&#39;);\r\n            downloadLink.href = url;\r\n            downloadLink.download = &#39;VALIDATED_EXCEL_FILE.xlsx&#39;;\r\n            downloadLink.textContent = &#39;Download Validated Excel File&#39;;\r\n            $(&#39;#fileInput&#39;).after(downloadLink);\r\n         } else {\r\n             Swal.fire({\r\n                 icon: &#39;success&#39;,\r\n                 title: &#39;Success&#39;,\r\n                 text: response.data,\r\n             });\r\n         }       \r\n     },\r\n     error: function (error) {\r\n         console.log({error})\r\n         Swal.fire({\r\n             icon: &#39;error&#39;,\r\n             title: &#39;Error&#39;,\r\n             text: &#39;An error occurred while processing the file.&#39;,\r\n         });\r\n     }\r\n});\r\n```\r\n\r\nAlthough this approach works, the file isn&#39;t functioning correctly. When attempting to open the file, an error message is displayed:\r\n\r\n`&quot;Excel cannot open the file because the format is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file.&quot;`\r\n\r\nI suspect that the error might be occurring during the conversion of the byte stream to a file using the **`blob`** approach.  \r\n  \r\nCan anyone help me fix this for the type Blob in Ajax side, I tested my API on Postman and I&#39;m sure myself that the file has err (count \\&gt;0) of response (open success and show what i want) and the file has no err mean response (count==0) already be the result as expected. Any support will be valueable to me, **Appreciate** your time and help!\r\n\r\n- I try to add this option on the Ajax request setup, then the file works well, but when variable `count` has no error ( mean count == 0 ), the response `ResponseDto` to transfer data to the popup does not work and Ajax throws the error case for `responseText` inside after `console.log(error)` is `[object Blob]`\r\n\r\n  ```\r\n  xhrFields: {\r\n     responseType: &#39;blob&#39;\r\n  }, \r\n  ```\r\n\r\n- Then with the same option above, I tried add this `xhr.responseType = &#39;&#39;;` if `response.isOk == true` inside success area, but it seem meaningless","title":"Binding Blob type from ajax","body":"<p>I've developed an API for validating Excel files and displaying the code content within it. My goal is to call this API using Ajax on the client-side. However, I've encountered an issue with the <strong><code>blob</code></strong> type <strong><code>xhrcontent</code></strong>, which seems to be causing confusion. To help clarify, I'm providing an overview of the relevant code snippets:</p>\n<ul>\n<li>Here is the API</li>\n</ul>\n<pre><code>@PostMapping(&quot;/valid-excel&quot;)\npublic ResponseEntity&lt;Object&gt; validateExcel(@RequestParam(&quot;file&quot;) MultipartFile file) {\n    try (InputStream is = file.getInputStream()) {\n            \n     /* code handle read and write excel file etc..\n      * inside a count variable for counting error\n      * if count &gt; 0 mean error exist and give out file for client can download \n      * else if count == 0 mean notifying client that their file good has no err\n      * if the system has interval error, fire swal popup for them \n      */\n\n      if (count != 0) {\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n          workbook.write(outputStream);\n\n          HttpHeaders headers = new HttpHeaders();\n                headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n          String fileName = &quot;IMPORT_FILE_&quot; + file.getName() + &quot;_validate.xlsx&quot;;\n          headers.setContentDispositionFormData(fileName, fileName);\n          return ResponseEntity.ok().headers(headers).body(outputStream.toByteArray());\n      } else {\n          return ResponseEntity.ok().body(new ResponseDto(true, Message.SUCCESS_VALID_EXCEL.value()));\n      }\n\n    } catch (Exception e) {\n        return ResponseEntity.internalServerError().body(new ResponseDto(false, Message.ERROR_INTERVAL_SERVER.value()));\n    }\n}\n</code></pre>\n<ul>\n<li>Here is the ajax at client-side</li>\n</ul>\n<pre><code>$.ajax({\n    url: '/valid-excel',\n    type: 'POST',\n    data: file,\n    processData: false,\n    contentType: false,\n    success: function (response) {\n        if (response.status != true || response.status == undefined ){\n            var url = window.URL.createObjectURL(data);\n            var blob = new Blob([response.body], { type: 'application/octet-stream' });\n            var downloadLink = document.createElement('a');\n            downloadLink.href = url;\n            downloadLink.download = 'VALIDATED_EXCEL_FILE.xlsx';\n            downloadLink.textContent = 'Download Validated Excel File';\n            $('#fileInput').after(downloadLink);\n         } else {\n             Swal.fire({\n                 icon: 'success',\n                 title: 'Success',\n                 text: response.data,\n             });\n         }       \n     },\n     error: function (error) {\n         console.log({error})\n         Swal.fire({\n             icon: 'error',\n             title: 'Error',\n             text: 'An error occurred while processing the file.',\n         });\n     }\n});\n</code></pre>\n<p>Although this approach works, the file isn't functioning correctly. When attempting to open the file, an error message is displayed:</p>\n<p><code>&quot;Excel cannot open the file because the format is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file.&quot;</code></p>\n<p>I suspect that the error might be occurring during the conversion of the byte stream to a file using the <strong><code>blob</code></strong> approach.</p>\n<p>Can anyone help me fix this for the type Blob in Ajax side, I tested my API on Postman and I'm sure myself that the file has err (count &gt;0) of response (open success and show what i want) and the file has no err mean response (count==0) already be the result as expected. Any support will be valueable to me, <strong>Appreciate</strong> your time and help!</p>\n<ul>\n<li><p>I try to add this option on the Ajax request setup, then the file works well, but when variable <code>count</code> has no error ( mean count == 0 ), the response <code>ResponseDto</code> to transfer data to the popup does not work and Ajax throws the error case for <code>responseText</code> inside after <code>console.log(error)</code> is <code>[object Blob]</code></p>\n<pre><code>xhrFields: {\n   responseType: 'blob'\n}, \n</code></pre>\n</li>\n<li><p>Then with the same option above, I tried add this <code>xhr.responseType = '';</code> if <code>response.isOk == true</code> inside success area, but it seem meaningless</p>\n</li>\n</ul>\n"},{"tags":["java","jconsole","jlink"],"answers":[{"comments":[{"owner":{"account_id":27034895,"reputation":1,"user_id":20590672,"display_name":"Martin Herbst"},"score":0,"creation_date":1669300535,"post_id":74562111,"comment_id":131617222,"body_markdown":"According to jdeps only `java.base`  and `java.management` are necessary. The application can be executed with only these modules, but jconsole can&#39;t connect.  \n\nI am also quite sure that the DLL `mangement_ext.dll` is needed, but it is not part of the runtime image created by jlink.","body":"According to jdeps only <code>java.base</code>  and <code>java.management</code> are necessary. The application can be executed with only these modules, but jconsole can&#39;t connect.    I am also quite sure that the DLL <code>mangement_ext.dll</code> is needed, but it is not part of the runtime image created by jlink."}],"tags":[],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669299228,"creation_date":1669299228,"answer_id":74562111,"question_id":74560777,"body_markdown":"Try use `jdeps` to check all modules are required in your build.\r\n\r\n\r\nExample of listing all modules from `.jar`\r\n```.bash\r\njdeps --ignore-missing-deps --print-module-deps --multi-release 17 your-jar.jar \r\n```\r\n\r\nExample to `jlink`\r\n\r\n```.bash\r\njlink \\\r\n    --module-path /path-with-all-jdk-modules \\\r\n    --add-modules $(jdeps --ignore-missing-deps --print-module-deps --multi-release 17 your-jar.jar ) \\\r\n    --output /path-output-jre-custom \\\r\n    --strip-debug \\\r\n    --no-header-files \\\r\n    --no-man-pages \\\r\n    --compress 2\r\n\r\n```","title":"Unable to connect from jconsole to an application built with jlink","body":"<p>Try use <code>jdeps</code> to check all modules are required in your build.</p>\n<p>Example of listing all modules from <code>.jar</code></p>\n<pre><code>jdeps --ignore-missing-deps --print-module-deps --multi-release 17 your-jar.jar \n</code></pre>\n<p>Example to <code>jlink</code></p>\n<pre><code>jlink \\\n    --module-path /path-with-all-jdk-modules \\\n    --add-modules $(jdeps --ignore-missing-deps --print-module-deps --multi-release 17 your-jar.jar ) \\\n    --output /path-output-jre-custom \\\n    --strip-debug \\\n    --no-header-files \\\n    --no-man-pages \\\n    --compress 2\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29196557,"reputation":1,"user_id":22367538,"display_name":"Jupp Zupp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691643329,"creation_date":1691643329,"answer_id":76872739,"question_id":74560777,"body_markdown":"I had to add `jdk.management.agent`. That added `management.dll` and `management_agent.dll`. The `management_ext.dll` doesn&#39;t seem to be necessary.","title":"Unable to connect from jconsole to an application built with jlink","body":"<p>I had to add <code>jdk.management.agent</code>. That added <code>management.dll</code> and <code>management_agent.dll</code>. The <code>management_ext.dll</code> doesn't seem to be necessary.</p>\n"}],"owner":{"account_id":27034895,"reputation":1,"user_id":20590672,"display_name":"Martin Herbst"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691643329,"creation_date":1669292800,"question_id":74560777,"body_markdown":"I have written a Java 17 application that provides several MBeans. If I start the jar with a standard Java 17 SDK via `java -jar myjar.jar` the applications starts and I can connect to it from JConsole.\r\n\r\nThen I have created a custom runtime image with jlink.\r\n\r\nThe application itself runs fine with this image. It gets the MBeanServer and registers successfully my MBean. \r\n\r\nWhen I start Jconsole I can select the running application (as &quot;Local Process&quot;) but then the connection to this process can&#39;t be created.\r\n\r\nI have tried to add a number of additional modules (like jdk.management, java.management, ...) but without success. It seems that at least one module is missing because in my customer runtime image e.g. the DLL management_ext.dll is missng.\r\n\r\nAny idea which modules are necessary?","title":"Unable to connect from jconsole to an application built with jlink","body":"<p>I have written a Java 17 application that provides several MBeans. If I start the jar with a standard Java 17 SDK via <code>java -jar myjar.jar</code> the applications starts and I can connect to it from JConsole.</p>\n<p>Then I have created a custom runtime image with jlink.</p>\n<p>The application itself runs fine with this image. It gets the MBeanServer and registers successfully my MBean.</p>\n<p>When I start Jconsole I can select the running application (as &quot;Local Process&quot;) but then the connection to this process can't be created.</p>\n<p>I have tried to add a number of additional modules (like jdk.management, java.management, ...) but without success. It seems that at least one module is missing because in my customer runtime image e.g. the DLL management_ext.dll is missng.</p>\n<p>Any idea which modules are necessary?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691062164,"post_id":76827415,"comment_id":135442250,"body_markdown":"`ProcessBuilder` much better. Check [this](https://stackoverflow.com/questions/18026393/read-stdout-of-runas-child-process-started-by-processbuilder-or-defaultexecuto) out","body":"<code>ProcessBuilder</code> much better. Check <a href=\"https://stackoverflow.com/questions/18026393/read-stdout-of-runas-child-process-started-by-processbuilder-or-defaultexecuto\">this</a> out"},{"owner":{"account_id":26976369,"reputation":33,"user_id":20541520,"display_name":"tt_time"},"score":0,"creation_date":1691416370,"post_id":76827415,"comment_id":135484652,"body_markdown":"I tried ProcessBuilder but the exe wouldn&#39;t run.\nI ended up using,\nRuntime.getRuntime().exec(&quot;cmd runas /user:administrator /savecred /c start \\&quot;\\&quot; \\&quot;C:\\\\Scripts\\\\selectFile-open1jpg.exe\\&quot;&quot;);","body":"I tried ProcessBuilder but the exe wouldn&#39;t run. I ended up using, Runtime.getRuntime().exec(&quot;cmd runas /user:administrator /savecred /c start \\&quot;\\&quot; \\&quot;C:\\\\Scripts\\\\selectFile-open1jpg.exe\\&quot;&quot;);"}],"answers":[{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1691418599,"post_id":76852415,"comment_id":135485218,"body_markdown":"check the [documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Runtime.html#exec(java.lang.String)) of that method: &quot;**Deprecated.**\nThis method is error-prone and should not be used, the corresponding method [`exec(String[])`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Runtime.html#exec(java.lang.String%5B%5D)) or [`ProcessBuilder`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html) should be used instead. ...&quot;","body":"check the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Runtime.html#exec(java.lang.String)\" rel=\"nofollow noreferrer\">documentation</a> of that method: &quot;<b>Deprecated.</b> This method is error-prone and should not be used, the corresponding method <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Runtime.html#exec(java.lang.String%5B%5D)\" rel=\"nofollow noreferrer\"><code>exec(String[])</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\"><code>ProcessBuilder</code></a> should be used instead. ...&quot;"}],"tags":[],"owner":{"account_id":26976369,"reputation":33,"user_id":20541520,"display_name":"tt_time"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691642652,"creation_date":1691416481,"answer_id":76852415,"question_id":76827415,"body_markdown":"```java\r\nRuntime.getRuntime().exec(&quot;cmd runas /user:administrator /savecred /c start \\&quot;\\&quot; \\&quot;C:\\\\Scripts\\\\selectFile-open1jpg.exe\\&quot;&quot;);\r\n```","title":"Execute Runtime.getRuntime().exec to run an exe as admin","body":"<pre class=\"lang-java prettyprint-override\"><code>Runtime.getRuntime().exec(&quot;cmd runas /user:administrator /savecred /c start \\&quot;\\&quot; \\&quot;C:\\\\Scripts\\\\selectFile-open1jpg.exe\\&quot;&quot;);\n</code></pre>\n"}],"owner":{"account_id":26976369,"reputation":33,"user_id":20541520,"display_name":"tt_time"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76852415,"answer_count":1,"score":0,"last_activity_date":1691642652,"creation_date":1691060140,"question_id":76827415,"body_markdown":"In my Windows Selenium Java project I am trying to run a AutoHotKey exe, but the execution of the exe needs to be done as admin.\r\nHow would I run the following as admin?\r\n\r\n    Runtime.getRuntime().exec(&quot;C:\\\\Scripts\\\\selectFile-emailmsg.exe&quot;);\r\n\r\nThanks.\r\n","title":"Execute Runtime.getRuntime().exec to run an exe as admin","body":"<p>In my Windows Selenium Java project I am trying to run a AutoHotKey exe, but the execution of the exe needs to be done as admin.\nHow would I run the following as admin?</p>\n<pre><code>Runtime.getRuntime().exec(&quot;C:\\\\Scripts\\\\selectFile-emailmsg.exe&quot;);\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","keycloak","keycloak-rest-api"],"owner":{"account_id":5704335,"reputation":257,"user_id":4508409,"accept_rate":65,"display_name":"Kavi Chinna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691642638,"creation_date":1691595145,"question_id":76869266,"body_markdown":"I have created my Own custom API to generate the action-token from Keycloak. When I hit the my custom API from Postman it&#39;s giving HTTP 404 Not Found.\r\n\r\nI&#39;m using **Keycloak version 20.0.2**\r\n\r\nBelow is my Implementation approach,\r\n\r\nProviderFactory class\r\n\r\n    public class ActionTokenProviderFactory implements RealmResourceProviderFactory {\r\n    \r\n        public static final String PROVIDER_ID = &quot;custom-action-token&quot;;\r\n        // Logger\r\n        private static final Logger log = LoggerFactory.getLogger(ActionTokenProviderFactory.class);\r\n    \r\n        @Override\r\n        public ActionTokenProvider create(KeycloakSession keycloakSession) {\r\n            log.info(&quot;ActionTokenProviderFactory create()&quot;);\r\n            return new ActionTokenProvider(keycloakSession);\r\n        }\r\n    \r\n        @Override\r\n        public void init(Config.Scope scope) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void postInit(KeycloakSessionFactory keycloakSessionFactory) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void close() {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public String getId() {\r\n            return PROVIDER_ID;\r\n        }\r\n    }\r\n\r\nProvider class\r\n\r\n    public class ActionTokenProvider implements RealmResourceProvider {\r\n    \r\n        // Logger\r\n        private static final Logger log = LoggerFactory.getLogger(ActionTokenProvider.class);\r\n        private final KeycloakSession keycloakSession;\r\n        public ActionTokenProvider(KeycloakSession keycloakSession){\r\n            this.keycloakSession=keycloakSession;\r\n        }\r\n    \r\n        @POST\r\n        @Path(&quot;generate-action-tokens&quot;)\r\n        @Produces({MediaType.APPLICATION_JSON})\r\n        public Response getActionToken(@QueryParam(&quot;userId&quot;) String userId,\r\n                                       @QueryParam(&quot;email&quot;) String email,\r\n                                       @QueryParam(&quot;redirectUri&quot;) String redirectUri,\r\n                                       @QueryParam(&quot;clientId&quot;) String clientId,\r\n                                       @Context UriInfo uriInfo){\r\n            log.info(&quot;ActionTokenProvider getActionToken() ::: &quot;+userId+&quot;, &quot;+email+&quot;, &quot;+&quot;, &quot;+clientId);\r\n            KeycloakContext keycloakContext = keycloakSession.getContext();\r\n            RealmModel realm = keycloakContext.getRealm();\r\n            int accessTokenLifespan = realm.getAccessTokenLifespan();\r\n            int absoluteExpirationInSecs = Time.currentTime() + accessTokenLifespan;\r\n            log.info(&quot;ActionTokenProvider getActionToken() absoluteExpirationInSecs ::: &quot;+absoluteExpirationInSecs);\r\n    \r\n            List&lt;String&gt; requiredActions=new LinkedList&lt;&gt;();\r\n            requiredActions.add(UserModel.RequiredAction.UPDATE_PASSWORD.name());\r\n    \r\n            String token = new ExecuteActionsActionToken(\r\n                    userId, absoluteExpirationInSecs, requiredActions, redirectUri, clientId)\r\n                    .serialize(keycloakSession, keycloakContext.getRealm(), uriInfo);\r\n            log.info(&quot;ActionTokenProvider getActionToken() token ::: &quot;+token);\r\n    \r\n            return Response.status(200).entity(token).build();\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public Object getResource() {\r\n            return this;\r\n        }\r\n    \r\n        @Override\r\n        public void close() {\r\n    \r\n        }\r\n\r\n**src\\main\\resources\\META-INF\\services\\**\r\n\r\nFile name : `org.keycloak.services.resource.RealmResourceProviderFactory`\r\nFile contetn : `com.event.actiontoken.provider.ActionTokenProviderFactory`\r\n\r\nUsing the above stuff I have build my Project and copy the JAR file under **\\target** folder and paste it into **Keycloak standalone deployments** folder.\r\n\r\nThis **\\standalone\\deployments** was not exists in my Keyclaok directory, So I created this manually and paste the JAR file here.\r\n\r\nThis is my directory structure **keycloak-20.0.2\\standalone\\deployments**\r\n\r\nAnd then I tried to access my API from Postman but getting 404 error. below is the API details\r\n\r\n    http://localhost:8080/realms/my_realm/custom-action-token/generate-action-tokens\r\n    \r\n    Query Parameters\r\n        userId:055b07a3-9fd9-4285-88b2-34165d8f3022\r\n        email:rck1234@gmail.com\r\n        clientId:my_own_client\r\n        redirectUri:http://localhost:1030/\r\n\r\nFor security reason I gave dummy values here, when I hit this I was getting 401 Unauthorized error, So I passed Bearer Token then its giving 404 Not Found error.\r\n\r\nI tried with **/admin/realms/my_realm/** and **/auth/admin/realms/my_realm/** also, but its returning same response.\r\n\r\nDid I miss anything here or Do I need to configure anything Keycloak to make it work?\r\n\r\nHelp me on this.","title":"Custom API in Keycloak is returning HTTP 404 Not Found","body":"<p>I have created my Own custom API to generate the action-token from Keycloak. When I hit the my custom API from Postman it's giving HTTP 404 Not Found.</p>\n<p>I'm using <strong>Keycloak version 20.0.2</strong></p>\n<p>Below is my Implementation approach,</p>\n<p>ProviderFactory class</p>\n<pre><code>public class ActionTokenProviderFactory implements RealmResourceProviderFactory {\n\n    public static final String PROVIDER_ID = &quot;custom-action-token&quot;;\n    // Logger\n    private static final Logger log = LoggerFactory.getLogger(ActionTokenProviderFactory.class);\n\n    @Override\n    public ActionTokenProvider create(KeycloakSession keycloakSession) {\n        log.info(&quot;ActionTokenProviderFactory create()&quot;);\n        return new ActionTokenProvider(keycloakSession);\n    }\n\n    @Override\n    public void init(Config.Scope scope) {\n\n    }\n\n    @Override\n    public void postInit(KeycloakSessionFactory keycloakSessionFactory) {\n\n    }\n\n    @Override\n    public void close() {\n\n    }\n\n    @Override\n    public String getId() {\n        return PROVIDER_ID;\n    }\n}\n</code></pre>\n<p>Provider class</p>\n<pre><code>public class ActionTokenProvider implements RealmResourceProvider {\n\n    // Logger\n    private static final Logger log = LoggerFactory.getLogger(ActionTokenProvider.class);\n    private final KeycloakSession keycloakSession;\n    public ActionTokenProvider(KeycloakSession keycloakSession){\n        this.keycloakSession=keycloakSession;\n    }\n\n    @POST\n    @Path(&quot;generate-action-tokens&quot;)\n    @Produces({MediaType.APPLICATION_JSON})\n    public Response getActionToken(@QueryParam(&quot;userId&quot;) String userId,\n                                   @QueryParam(&quot;email&quot;) String email,\n                                   @QueryParam(&quot;redirectUri&quot;) String redirectUri,\n                                   @QueryParam(&quot;clientId&quot;) String clientId,\n                                   @Context UriInfo uriInfo){\n        log.info(&quot;ActionTokenProvider getActionToken() ::: &quot;+userId+&quot;, &quot;+email+&quot;, &quot;+&quot;, &quot;+clientId);\n        KeycloakContext keycloakContext = keycloakSession.getContext();\n        RealmModel realm = keycloakContext.getRealm();\n        int accessTokenLifespan = realm.getAccessTokenLifespan();\n        int absoluteExpirationInSecs = Time.currentTime() + accessTokenLifespan;\n        log.info(&quot;ActionTokenProvider getActionToken() absoluteExpirationInSecs ::: &quot;+absoluteExpirationInSecs);\n\n        List&lt;String&gt; requiredActions=new LinkedList&lt;&gt;();\n        requiredActions.add(UserModel.RequiredAction.UPDATE_PASSWORD.name());\n\n        String token = new ExecuteActionsActionToken(\n                userId, absoluteExpirationInSecs, requiredActions, redirectUri, clientId)\n                .serialize(keycloakSession, keycloakContext.getRealm(), uriInfo);\n        log.info(&quot;ActionTokenProvider getActionToken() token ::: &quot;+token);\n\n        return Response.status(200).entity(token).build();\n    }\n\n\n    @Override\n    public Object getResource() {\n        return this;\n    }\n\n    @Override\n    public void close() {\n\n    }\n</code></pre>\n<p>*<em>src\\main\\resources\\META-INF\\services*</em></p>\n<p>File name : <code>org.keycloak.services.resource.RealmResourceProviderFactory</code>\nFile contetn : <code>com.event.actiontoken.provider.ActionTokenProviderFactory</code></p>\n<p>Using the above stuff I have build my Project and copy the JAR file under <strong>\\target</strong> folder and paste it into <strong>Keycloak standalone deployments</strong> folder.</p>\n<p>This <strong>\\standalone\\deployments</strong> was not exists in my Keyclaok directory, So I created this manually and paste the JAR file here.</p>\n<p>This is my directory structure <strong>keycloak-20.0.2\\standalone\\deployments</strong></p>\n<p>And then I tried to access my API from Postman but getting 404 error. below is the API details</p>\n<pre><code>http://localhost:8080/realms/my_realm/custom-action-token/generate-action-tokens\n\nQuery Parameters\n    userId:055b07a3-9fd9-4285-88b2-34165d8f3022\n    email:rck1234@gmail.com\n    clientId:my_own_client\n    redirectUri:http://localhost:1030/\n</code></pre>\n<p>For security reason I gave dummy values here, when I hit this I was getting 401 Unauthorized error, So I passed Bearer Token then its giving 404 Not Found error.</p>\n<p>I tried with <strong>/admin/realms/my_realm/</strong> and <strong>/auth/admin/realms/my_realm/</strong> also, but its returning same response.</p>\n<p>Did I miss anything here or Do I need to configure anything Keycloak to make it work?</p>\n<p>Help me on this.</p>\n"},{"tags":["java","spring","session","spring-security","vaadin"],"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1691656969,"post_id":76872677,"comment_id":135521897,"body_markdown":"The UIDetachedException is natural. You have ever running background thread, eventually user will close the Browser / navigate to other page, but your thread is still running. Thus you need to catch that exception and stop the thread when UI has been detached.","body":"The UIDetachedException is natural. You have ever running background thread, eventually user will close the Browser / navigate to other page, but your thread is still running. Thus you need to catch that exception and stop the thread when UI has been detached."}],"owner":{"account_id":25174873,"reputation":57,"user_id":19017210,"display_name":"YaziD"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691642588,"creation_date":1691642168,"question_id":76872677,"body_markdown":"I am developing a vaadin application with spring security. I have set a defined time to Http session maximum inactive interval. \r\n\r\nAfter the session is expired, the user should redirect to the login page.\r\n\r\nBut after the session is expired, UI promotes a large error box. If I click that error box or refresh the page, it successfully redirects to the login page. That&#39;s fine, but my concern is the large error message.\r\n\r\n\r\n**SecurityConfig class**\r\n\r\n```\r\npublic class SecurityConfig {\r\n\r\n    private static final String LOGIN_PAGE = &quot;/login&quot;;\r\n\r\n    @Autowired\r\n    private CustomAuthenticationProvider authProvider;\r\n\r\n    @Bean\r\n    public AuthenticationManager authManager(HttpSecurity http) throws Exception {\r\n        AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class);\r\n        authenticationManagerBuilder.authenticationProvider(authProvider);\r\n        return authenticationManagerBuilder.build();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf().disable()\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                        .anyRequest().authenticated())\r\n                .sessionManagement(session -&gt; session\r\n                        .sessionFixation()\r\n                        .migrateSession()\r\n                        .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\r\n                        .invalidSessionUrl(LOGIN_PAGE)\r\n                        .maximumSessions(1)\r\n                        .expiredUrl(LOGIN_PAGE))\r\n                .formLogin(withDefaults());\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\n**CustomAuthenticationProvider class**\r\n\r\n```\r\nif(isAuthSuccess){\r\n            Authentication authenticatedToken = new UsernamePasswordAuthenticationToken(username, password, new ArrayList&lt;&gt;());\r\n\r\n            // Store the access and refresh token in the session\r\n            SecurityContextHolder.getContext().setAuthentication(authenticatedToken);\r\n            ServletRequestAttributes request = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();\r\n            HttpSession session = request.getRequest().getSession(false);\r\n\r\n            // Set session expiration based on access token expiration time\r\n            session.setMaxInactiveInterval(expiry_time);\r\n\r\n            return authenticatedToken;\r\n\r\n        }else {\r\n            throw new BadCredentialsException(&quot;Authentication failed&quot;);\r\n        }\r\n```\r\n\r\n\r\n\r\n```\r\n  @Override\r\n    protected void onAttach(AttachEvent attachEvent) {\r\n        UI ui = attachEvent.getUI();\r\n\r\n\r\n        feederThread = new Thread(() -&gt; {\r\n            while (true) {\r\n                try {\r\n                    ui.access(() -&gt; {\r\n                        updateResults();\r\n                    });\r\n                    Thread.sleep(5000);\r\n                } catch (InterruptedException e) {\r\n                    logger.error(e.getMessage() + &quot; UI Error&quot;);\r\n                }\r\n            }\r\n        });\r\n        feederThread.start();\r\n    }\r\n```\r\n\r\nUI Error erro log is returning when that large error box is showing.\r\n\r\n**Error box**\r\n\r\n[![enter image description here](https://i.stack.imgur.com/wjUpx.png)](https://i.stack.imgur.com/wjUpx.png)\r\n\r\n**Log error**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nI need to remove this erro box showing in the UI. Iam in beginer level in the vaadin development.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3d3ZL.png","title":"Vaadin shows large error box in the UI and gets Detached Exception in the log","body":"<p>I am developing a vaadin application with spring security. I have set a defined time to Http session maximum inactive interval.</p>\n<p>After the session is expired, the user should redirect to the login page.</p>\n<p>But after the session is expired, UI promotes a large error box. If I click that error box or refresh the page, it successfully redirects to the login page. That's fine, but my concern is the large error message.</p>\n<p><strong>SecurityConfig class</strong></p>\n<pre><code>public class SecurityConfig {\n\n    private static final String LOGIN_PAGE = &quot;/login&quot;;\n\n    @Autowired\n    private CustomAuthenticationProvider authProvider;\n\n    @Bean\n    public AuthenticationManager authManager(HttpSecurity http) throws Exception {\n        AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class);\n        authenticationManagerBuilder.authenticationProvider(authProvider);\n        return authenticationManagerBuilder.build();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .authorizeHttpRequests(auth -&gt; auth\n                        .anyRequest().authenticated())\n                .sessionManagement(session -&gt; session\n                        .sessionFixation()\n                        .migrateSession()\n                        .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\n                        .invalidSessionUrl(LOGIN_PAGE)\n                        .maximumSessions(1)\n                        .expiredUrl(LOGIN_PAGE))\n                .formLogin(withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p><strong>CustomAuthenticationProvider class</strong></p>\n<pre><code>if(isAuthSuccess){\n            Authentication authenticatedToken = new UsernamePasswordAuthenticationToken(username, password, new ArrayList&lt;&gt;());\n\n            // Store the access and refresh token in the session\n            SecurityContextHolder.getContext().setAuthentication(authenticatedToken);\n            ServletRequestAttributes request = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();\n            HttpSession session = request.getRequest().getSession(false);\n\n            // Set session expiration based on access token expiration time\n            session.setMaxInactiveInterval(expiry_time);\n\n            return authenticatedToken;\n\n        }else {\n            throw new BadCredentialsException(&quot;Authentication failed&quot;);\n        }\n</code></pre>\n<pre><code>  @Override\n    protected void onAttach(AttachEvent attachEvent) {\n        UI ui = attachEvent.getUI();\n\n\n        feederThread = new Thread(() -&gt; {\n            while (true) {\n                try {\n                    ui.access(() -&gt; {\n                        updateResults();\n                    });\n                    Thread.sleep(5000);\n                } catch (InterruptedException e) {\n                    logger.error(e.getMessage() + &quot; UI Error&quot;);\n                }\n            }\n        });\n        feederThread.start();\n    }\n</code></pre>\n<p>UI Error erro log is returning when that large error box is showing.</p>\n<p><strong>Error box</strong></p>\n<p><a href=\"https://i.stack.imgur.com/wjUpx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wjUpx.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Log error</strong></p>\n<p><a href=\"https://i.stack.imgur.com/3d3ZL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3d3ZL.png\" alt=\"enter image description here\" /></a></p>\n<p>I need to remove this erro box showing in the UI. Iam in beginer level in the vaadin development.</p>\n"},{"tags":["java","file-upload","veracode"],"owner":{"account_id":25616906,"reputation":11,"user_id":19389372,"display_name":"Janu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1691518354,"answer_count":0,"score":-3,"last_activity_date":1691640309,"creation_date":1691127435,"question_id":76833179,"body_markdown":"Getting CWE-80 error while reading the file and processing the contents in the rest api call.Is there any fix for this? Please comment.\r\n\r\nWe have a rest api which accepts file as input and we in the service we are reading the data from file and doing some validations and then we are updating the data in DB .\r\n\r\nIn this api iam getting veracode issue CEW-80.PFB error in the veracode scan &#39;&#39;\r\n&quot;cwe_id&quot;: &quot;80&quot;,\r\n      &quot;display_text&quot;: &quot;\\u003cspan\\u003eThis call to uploadFile() contains a cross-site scripting (XSS) flaw.  The application populates the HTTP response with untrusted input, allowing an attacker to embed malicious content, such as Javascript code, which will be executed in the context of the victim\\u0027s browser.  XSS vulnerabilities are commonly exploited to steal or manipulate cookies, modify presentation of content, and compromise confidential information, with new attack vectors being discovered on a regular basis. The tainted data originated from an earlier call to org.springframework.data.repository.CrudRepository.save.\\u003c/span\\u003e \\u003cspan\\u003eUse contextual escaping on all untrusted data before using it to construct any portion of an HTTP response.  The escaping method should be chosen based on the specific use case of the untrusted data, otherwise it may not protect fully against the attack. For example, if the data is being written to the body of an HTML page, use HTML entity escaping; if the data is being written to an attribute, use attribute escaping; etc.  Both the OWASP Java Encoder library and the Microsoft AntiXSS library provide contextual escaping methods. For more details on contextual escaping, see https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md. In addition, as a best practice, always validate untrusted input to ensure that it conforms to the expected format, using centralized data validation routines when possible.\\u003c/span\\u003e \\u003cspan\\u003eReferences: \\u003ca href\\u003d\\&quot;https://cwe.mitre.org/data/definitions/79.html\\&quot;\\u003eCWE\\u003c/a\\u003e \\u003ca href\\u003d\\&quot;https://owasp.org/www-community/attacks/xss/\\&quot;\\u003eOWASP\\u003c/a\\u003e \\u003ca href\\u003d\\&quot;https://docs.veracode.com/r/review_cleansers\\&quot;\\u003eSupported Cleansers\\u003c/a\\u003e\\u003c/span\\u003e&quot;,","title":"CWE-80 error in java file upload veracode scan","body":"<p>Getting CWE-80 error while reading the file and processing the contents in the rest api call.Is there any fix for this? Please comment.</p>\n<p>We have a rest api which accepts file as input and we in the service we are reading the data from file and doing some validations and then we are updating the data in DB .</p>\n<p>In this api iam getting veracode issue CEW-80.PFB error in the veracode scan ''\n&quot;cwe_id&quot;: &quot;80&quot;,\n&quot;display_text&quot;: &quot;\\u003cspan\\u003eThis call to uploadFile() contains a cross-site scripting (XSS) flaw.  The application populates the HTTP response with untrusted input, allowing an attacker to embed malicious content, such as Javascript code, which will be executed in the context of the victim\\u0027s browser.  XSS vulnerabilities are commonly exploited to steal or manipulate cookies, modify presentation of content, and compromise confidential information, with new attack vectors being discovered on a regular basis. The tainted data originated from an earlier call to org.springframework.data.repository.CrudRepository.save.\\u003c/span\\u003e \\u003cspan\\u003eUse contextual escaping on all untrusted data before using it to construct any portion of an HTTP response.  The escaping method should be chosen based on the specific use case of the untrusted data, otherwise it may not protect fully against the attack. For example, if the data is being written to the body of an HTML page, use HTML entity escaping; if the data is being written to an attribute, use attribute escaping; etc.  Both the OWASP Java Encoder library and the Microsoft AntiXSS library provide contextual escaping methods. For more details on contextual escaping, see <a href=\"https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md\" rel=\"nofollow noreferrer\">https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md</a>. In addition, as a best practice, always validate untrusted input to ensure that it conforms to the expected format, using centralized data validation routines when possible.\\u003c/span\\u003e \\u003cspan\\u003eReferences: \\u003ca href\\u003d&quot;https://cwe.mitre.org/data/definitions/79.html&quot;\\u003eCWE\\u003c/a\\u003e \\u003ca href\\u003d&quot;https://owasp.org/www-community/attacks/xss/&quot;\\u003eOWASP\\u003c/a\\u003e \\u003ca href\\u003d&quot;https://docs.veracode.com/r/review_cleansers&quot;\\u003eSupported Cleansers\\u003c/a\\u003e\\u003c/span\\u003e&quot;,</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":7,"creation_date":1449757219,"post_id":1038007,"comment_id":56152853,"body_markdown":"Note:   Oracle documentation calls this idiom a &quot;guarded block&quot;  https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html","body":"Note:   Oracle documentation calls this idiom a &quot;guarded block&quot;  <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>"},{"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"score":3,"creation_date":1533567568,"post_id":1038007,"comment_id":90382185,"body_markdown":"It only works &quot;fine&quot; in a loop in trivial cases.  The rest of the time, your program is subtly broken.  See chapter 14 of _Java Concurrency in Practice_ for examples of what can go wrong.","body":"It only works &quot;fine&quot; in a loop in trivial cases.  The rest of the time, your program is subtly broken.  See chapter 14 of <i>Java Concurrency in Practice</i> for examples of what can go wrong."}],"answers":[{"tags":[],"owner":{"account_id":35972,"reputation":7299,"user_id":102281,"display_name":"Philipp"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1245846069,"creation_date":1245846069,"answer_id":1038024,"question_id":1038007,"body_markdown":"There might be more then just one worker waiting for a condition to become true.\r\n\r\nIf two or more worker get awake (notifyAll) they have to check the condition again.\r\notherwise all workers would continue even though there might only be data for one of them.","title":"Why should wait() always be called inside a loop","body":"<p>There might be more then just one worker waiting for a condition to become true.</p>\n\n<p>If two or more worker get awake (notifyAll) they have to check the condition again.\notherwise all workers would continue even though there might only be data for one of them.</p>\n"},{"comments":[{"owner":{"account_id":9178,"reputation":133593,"user_id":16853,"accept_rate":90,"display_name":"oxbow_lakes"},"score":0,"creation_date":1245847917,"post_id":1038033,"comment_id":848818,"body_markdown":"kd304 is correct - it is not just that a condition may not have been met - it is the fact that a thread can spuriously wake up from a wait","body":"kd304 is correct - it is not just that a condition may not have been met - it is the fact that a thread can spuriously wake up from a wait"},{"owner":{"account_id":1889,"reputation":120472,"user_id":2603,"accept_rate":75,"display_name":"Aaron Maenpaa"},"score":0,"creation_date":1245853171,"post_id":1038033,"comment_id":849305,"body_markdown":"@oxbow_lakes As far a the thread waiting on a condition is concerned, there is no real difference between a spurious wake-up and a notify meant to signal a different condition. Either way, you have to check your predicate.","body":"@oxbow_lakes As far a the thread waiting on a condition is concerned, there is no real difference between a spurious wake-up and a notify meant to signal a different condition. Either way, you have to check your predicate."}],"tags":[],"owner":{"account_id":1889,"reputation":120472,"user_id":2603,"accept_rate":75,"display_name":"Aaron Maenpaa"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1245846181,"creation_date":1245846181,"answer_id":1038033,"question_id":1038007,"body_markdown":"Because wait and notify are used to implement [condition variables](http://en.wikipedia.org/wiki/Monitor_(synchronization\\)#Blocking_condition_variables) and so you need to check whether the specific predicate you&#39;re waiting on is true before continuing.","title":"Why should wait() always be called inside a loop","body":"<p>Because wait and notify are used to implement [condition variables](<a href=\"http://en.wikipedia.org/wiki/Monitor_(synchronization)#Blocking_condition_variables)\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/Monitor_(synchronization)#Blocking_condition_variables)</a> and so you need to check whether the specific predicate you're waiting on is true before continuing.</p>\n"},{"comments":[{"owner":{"account_id":18638,"reputation":6820,"user_id":42902,"display_name":"Andrew Duffy"},"score":6,"creation_date":1245847187,"post_id":1038039,"comment_id":848759,"body_markdown":"This is the correct answer. The documentation for wait:\nhttp://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)\n... actually describes why you need to put it in a loop - spurious wakeups. Did the OP read it?","body":"This is the correct answer. The documentation for wait: <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(lo&zwnj;&#8203;ng)</a> ... actually describes why you need to put it in a loop - spurious wakeups. Did the OP read it?"},{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1245847679,"post_id":1038039,"comment_id":848790,"body_markdown":"Ah, &#39;spurious wakeups&#39;. Could not remember the name.","body":"Ah, &#39;spurious wakeups&#39;. Could not remember the name."},{"owner":{"account_id":11385,"reputation":24062,"user_id":21925,"accept_rate":62,"display_name":"Robin"},"score":1,"creation_date":1245848170,"post_id":1038039,"comment_id":848835,"body_markdown":"You should update your code example to handle the ThreadInterruptedException on your wait.  It would then be consistent with your answer.","body":"You should update your code example to handle the ThreadInterruptedException on your wait.  It would then be consistent with your answer."},{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1245849215,"post_id":1038039,"comment_id":848910,"body_markdown":"Don&#39;t know. Adding the try-catch for InterruptedException seemed pointless as it depends on the business logic what you want to do in case of the thread interruptions. Probably you would just exit, or suppress it immediately inside the loop.","body":"Don&#39;t know. Adding the try-catch for InterruptedException seemed pointless as it depends on the business logic what you want to do in case of the thread interruptions. Probably you would just exit, or suppress it immediately inside the loop."},{"owner":{"account_id":7331072,"reputation":827,"user_id":5594698,"accept_rate":38,"display_name":"Adil"},"score":0,"creation_date":1523188700,"post_id":1038039,"comment_id":86448118,"body_markdown":"@AndrewDuffy I tried to include that point in my answer...but no one seem to have read it :(","body":"@AndrewDuffy I tried to include that point in my answer...but no one seem to have read it :("}],"tags":[],"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"comment_count":5,"down_vote_count":0,"up_vote_count":80,"is_accepted":false,"score":80,"last_activity_date":1245849726,"creation_date":1245846292,"answer_id":1038039,"question_id":1038007,"body_markdown":"You need not only to loop it but check your condition in the loop. Java does not guarantee that your thread will be woken up only by a notify()/notifyAll() call or the right notify()/notifyAll() call at all. Because of this property the loop-less version might work on your development environment and fail on the production environment unexpectedly.\r\n\r\nFor example, you are waiting for something:\r\n\r\n    synchronized (theObjectYouAreWaitingOn) {\r\n       while (!carryOn) {\r\n          theObjectYouAreWaitingOn.wait();\r\n       }\r\n    }\r\n\r\nAn evil thread comes along and:\r\n\r\n    theObjectYouAreWaitingOn.notifyAll();\r\n\r\nIf the evil thread does not/can not mess with the `carryOn` you just continue to wait for the proper client.\r\n\r\n**Edit:** Added some more samples. \r\nThe wait can be interrupted. It throws InterruptedException and you might need to wrap the wait in a try-catch. Depending on your business needs, you can exit or suppress the exception and continue waiting.","title":"Why should wait() always be called inside a loop","body":"<p>You need not only to loop it but check your condition in the loop. Java does not guarantee that your thread will be woken up only by a notify()/notifyAll() call or the right notify()/notifyAll() call at all. Because of this property the loop-less version might work on your development environment and fail on the production environment unexpectedly.</p>\n\n<p>For example, you are waiting for something:</p>\n\n<pre><code>synchronized (theObjectYouAreWaitingOn) {\n   while (!carryOn) {\n      theObjectYouAreWaitingOn.wait();\n   }\n}\n</code></pre>\n\n<p>An evil thread comes along and:</p>\n\n<pre><code>theObjectYouAreWaitingOn.notifyAll();\n</code></pre>\n\n<p>If the evil thread does not/can not mess with the <code>carryOn</code> you just continue to wait for the proper client.</p>\n\n<p><strong>Edit:</strong> Added some more samples. \nThe wait can be interrupted. It throws InterruptedException and you might need to wrap the wait in a try-catch. Depending on your business needs, you can exit or suppress the exception and continue waiting.</p>\n"},{"tags":[],"owner":{"account_id":39415,"reputation":12303,"user_id":113662,"accept_rate":93,"display_name":"Tadeusz Kopec for Ukraine"},"comment_count":0,"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1245847051,"creation_date":1245847051,"answer_id":1038098,"question_id":1038007,"body_markdown":"It&#39;s answered in [documentation for Object.wait(long milis)][1]\r\n\r\n&gt;  A thread can also wake up without being notified, interrupted, or timing out, a so-called spurious wakeup. While this will rarely occur in practice, applications must guard against it by testing for the condition that should have caused the thread to be awakened, and continuing to wait if the condition is not satisfied. In other words, waits should always occur in loops, like this one:\r\n\r\n     synchronized (obj) {\r\n         while (&lt;condition does not hold&gt;)\r\n             obj.wait(timeout);\r\n         ... // Perform action appropriate to condition\r\n     }\r\n \r\n\r\n&gt; (For more information on this topic,\r\n&gt; see Section 3.2.3 in Doug Lea&#39;s\r\n&gt; &quot;Concurrent Programming in Java\r\n&gt; (Second Edition)&quot; (Addison-Wesley,\r\n&gt; 2000), or Item 50 in Joshua Bloch&#39;s\r\n&gt; &quot;Effective Java Programming Language\r\n&gt; Guide&quot; (Addison-Wesley, 2001).\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#wait(long)","title":"Why should wait() always be called inside a loop","body":"<p>It's answered in <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#wait(long)\" rel=\"noreferrer\">documentation for Object.wait(long milis)</a></p>\n\n<blockquote>\n  <p>A thread can also wake up without being notified, interrupted, or timing out, a so-called spurious wakeup. While this will rarely occur in practice, applications must guard against it by testing for the condition that should have caused the thread to be awakened, and continuing to wait if the condition is not satisfied. In other words, waits should always occur in loops, like this one:</p>\n</blockquote>\n\n<pre><code> synchronized (obj) {\n     while (&lt;condition does not hold&gt;)\n         obj.wait(timeout);\n     ... // Perform action appropriate to condition\n }\n</code></pre>\n\n<blockquote>\n  <p>(For more information on this topic,\n  see Section 3.2.3 in Doug Lea's\n  \"Concurrent Programming in Java\n  (Second Edition)\" (Addison-Wesley,\n  2000), or Item 50 in Joshua Bloch's\n  \"Effective Java Programming Language\n  Guide\" (Addison-Wesley, 2001).</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":3408167,"reputation":690,"user_id":2859238,"accept_rate":32,"display_name":"user104309"},"score":1,"creation_date":1477750630,"post_id":10091092,"comment_id":67895803,"body_markdown":"Shouldn&#39;t that be `while (queue.isEmpty())` without `!` ?","body":"Shouldn&#39;t that be <code>while (queue.isEmpty())</code> without <code>!</code> ?"},{"owner":{"account_id":4890996,"reputation":1347,"user_id":3942142,"accept_rate":36,"display_name":"jayendra bhatt"},"score":0,"creation_date":1496596405,"post_id":10091092,"comment_id":75715436,"body_markdown":"how come consumer 1  can be considered to  remove from the queue unless the consumer 2 has exited the synchronized block. notify is anyway going to notify the consumer 2 and consumer 1 will remain  idle.","body":"how come consumer 1  can be considered to  remove from the queue unless the consumer 2 has exited the synchronized block. notify is anyway going to notify the consumer 2 and consumer 1 will remain  idle."},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":1,"creation_date":1496612660,"post_id":10091092,"comment_id":75720007,"body_markdown":"Consumer #1 remains idle but is still waiting for the lock.  When consume #2 gets notified, it doesn&#39;t run immediately because it needs the lock so it goes into the same wait queue but _behind_ #1 @jayendrabhatt.","body":"Consumer #1 remains idle but is still waiting for the lock.  When consume #2 gets notified, it doesn&#39;t run immediately because it needs the lock so it goes into the same wait queue but <i>behind</i> #1 @jayendrabhatt."},{"owner":{"account_id":6797655,"reputation":975,"user_id":5232255,"display_name":"Jason Law"},"score":1,"creation_date":1576984319,"post_id":10091092,"comment_id":105066442,"body_markdown":"You say &quot;Just because it was notified, it needs to be make sure the queue is still empty because of this race condition&quot;. I think &quot;is still empty&quot; should be &quot;is still not empty&quot;.","body":"You say &quot;Just because it was notified, it needs to be make sure the queue is still empty because of this race condition&quot;. I think &quot;is still empty&quot; should be &quot;is still not empty&quot;."}],"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"comment_count":4,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1577111854,"creation_date":1334069690,"answer_id":10091092,"question_id":1038007,"body_markdown":"&gt; Why should wait() always be called inside a loop\r\n\r\nThe primary reason why `while` loops are so important is race conditions between threads.  Certainly spurious wakeups are real and for certain architectures they are common, but race conditions are a much more likely reason for the `while` loop.\r\n\r\nFor example:\r\n\r\n    synchronized (queue) {\r\n        // this needs to be while\r\n        while (queue.isEmpty()) {\r\n           queue.wait();\r\n        }\r\n        queue.remove();\r\n    }\r\n\r\nWith the above code, there may be 2 consumer threads.  When the producer locks the `queue` to add to it, consumer #1 may be blocked at the `synchronized` lock while consumer #2 is waiting on the `queue`.  When the item is added to the queue and `notify` called by the producer, #2 is moved from the wait queue to be blocked on the `queue` lock, but it will be _behind_ the #1 consumer which was already blocked on the lock.  This means that the #1 consumer gets to go forward first to call `remove()` from the `queue`.  If the `while` loop is just an `if`, then when consumer #2 gets the lock after #1 and calls `remove()`, an exception would occur because the `queue` is now empty -- the other consumer thread already removed the item.  Even though it was notified, it needs to be make sure the `queue` is for sure not empty because of this race condition.\r\n\r\nThis well documented.  Here&#39;s a web page I created a while back which explains the [race condition in detail][1] and has some sample code.\r\n\r\n  [1]: http://256stuff.com/gray/docs/misc/producer_consumer_race_conditions/","title":"Why should wait() always be called inside a loop","body":"<blockquote>\n  <p>Why should wait() always be called inside a loop</p>\n</blockquote>\n\n<p>The primary reason why <code>while</code> loops are so important is race conditions between threads.  Certainly spurious wakeups are real and for certain architectures they are common, but race conditions are a much more likely reason for the <code>while</code> loop.</p>\n\n<p>For example:</p>\n\n<pre><code>synchronized (queue) {\n    // this needs to be while\n    while (queue.isEmpty()) {\n       queue.wait();\n    }\n    queue.remove();\n}\n</code></pre>\n\n<p>With the above code, there may be 2 consumer threads.  When the producer locks the <code>queue</code> to add to it, consumer #1 may be blocked at the <code>synchronized</code> lock while consumer #2 is waiting on the <code>queue</code>.  When the item is added to the queue and <code>notify</code> called by the producer, #2 is moved from the wait queue to be blocked on the <code>queue</code> lock, but it will be <em>behind</em> the #1 consumer which was already blocked on the lock.  This means that the #1 consumer gets to go forward first to call <code>remove()</code> from the <code>queue</code>.  If the <code>while</code> loop is just an <code>if</code>, then when consumer #2 gets the lock after #1 and calls <code>remove()</code>, an exception would occur because the <code>queue</code> is now empty -- the other consumer thread already removed the item.  Even though it was notified, it needs to be make sure the <code>queue</code> is for sure not empty because of this race condition.</p>\n\n<p>This well documented.  Here's a web page I created a while back which explains the <a href=\"http://256stuff.com/gray/docs/misc/producer_consumer_race_conditions/\" rel=\"nofollow noreferrer\">race condition in detail</a> and has some sample code.</p>\n"},{"comments":[{"owner":{"account_id":372293,"reputation":180467,"user_id":721269,"accept_rate":100,"display_name":"David Schwartz"},"score":1,"creation_date":1454955571,"post_id":34201632,"comment_id":58264546,"body_markdown":"This answer is wrong. It is not the risk of spurious wakeups that&#39;s the reason `wait` should be called in a loop. It&#39;s because some other thread may have handled the condition.","body":"This answer is wrong. It is not the risk of spurious wakeups that&#39;s the reason <code>wait</code> should be called in a loop. It&#39;s because some other thread may have handled the condition."}],"tags":[],"owner":{"account_id":7331072,"reputation":827,"user_id":5594698,"accept_rate":38,"display_name":"Adil"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449749624,"creation_date":1449749624,"answer_id":34201632,"question_id":1038007,"body_markdown":"From your Question:\r\n\r\n&gt;I have read that we should always called a wait() from within a loop:\r\n\r\nAlthough wait( ) normally waits until notify( ) or notifyAll( ) is called, there is a possibility that in very rare cases the waiting thread could be awakened due to a spurious wakeup. In this case, a waiting thread resumes without notify( ) or notifyAll( ) having been called.\r\n\r\nIn essence, the thread resumes for no apparent reason.\r\n\r\nBecause of this remote possibility, Oracle recommends that calls to wait( ) should take place within a loop that checks the condition on which the thread is waiting.","title":"Why should wait() always be called inside a loop","body":"<p>From your Question:</p>\n\n<blockquote>\n  <p>I have read that we should always called a wait() from within a loop:</p>\n</blockquote>\n\n<p>Although wait( ) normally waits until notify( ) or notifyAll( ) is called, there is a possibility that in very rare cases the waiting thread could be awakened due to a spurious wakeup. In this case, a waiting thread resumes without notify( ) or notifyAll( ) having been called.</p>\n\n<p>In essence, the thread resumes for no apparent reason.</p>\n\n<p>Because of this remote possibility, Oracle recommends that calls to wait( ) should take place within a loop that checks the condition on which the thread is waiting.</p>\n"},{"tags":[],"owner":{"account_id":6855836,"reputation":51,"user_id":5271408,"display_name":"Sameer Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466618071,"creation_date":1466618071,"answer_id":37975114,"question_id":1038007,"body_markdown":"Both safety and liveness  are concerns when using the wait/notify mechanism. The safety property requires that all objects maintain consistent states in a multithreaded environment. The liveness property requires that every operation or method invocation execute to completion without interruption.\r\n\r\nTo guarantee liveness, programs must test the while loop condition before invoking the wait() method. This early test checks whether another thread has already satisfied the condition predicate and sent a notification. Invoking the wait() method after the notification has been sent results in indefinite blocking.\r\n\r\nTo guarantee safety, programs must test the while loop condition after returning from the wait() method. Although wait() is intended to block indefinitely until a notification is received, it still must be encased within a loop to prevent the following vulnerabilities:\r\n\r\n**Thread in the middle:** A third thread can acquire the lock on the shared object during the interval between a notification being sent and the receiving thread resuming execution. This third thread can change the state of the object, leaving it inconsistent. This is a time-of-check, time-of-use (TOCTOU) race condition.\r\n\r\n**Malicious notification:** A random or malicious notification can be received when the condition predicate is false. Such a notification would cancel the wait() method.\r\n\r\n**Misdelivered notification:** The order in which threads execute after receipt of a notifyAll() signal is unspecified. Consequently, an unrelated thread could start executing and discover that its condition predicate is satisfied. Consequently, it could resume execution despite being required to remain dormant.\r\n\r\n**Spurious wakeups:** Certain Java Virtual Machine (JVM) implementations are vulnerable to spurious wakeups that result in waiting threads waking up even without a notification.\r\n\r\nFor these reasons, programs must check the condition predicate after the wait() method returns. A while loop is the best choice for checking the condition predicate both before and after invoking wait().\r\n\r\nSimilarly, the await() method of the Condition interface also must be invoked inside a loop. According to the Java API, Interface Condition\r\n\r\n&gt; When waiting upon a Condition, a &quot;spurious wakeup&quot; is permitted to\r\n&gt; occur, in general, as a concession to the underlying platform\r\n&gt; semantics. This has little practical impact on most application\r\n&gt; programs as a Condition should always be waited upon in a loop,\r\n&gt; testing the state predicate that is being waited for. An\r\n&gt; implementation is free to remove the possibility of spurious wakeups\r\n&gt; but it is recommended that applications programmers always assume that\r\n&gt; they can occur and so always wait in a loop.\r\n\r\nNew code should use the java.util.concurrent.locks concurrency utilities in place of the wait/notify mechanism. However, legacy code that complies with the other requirements of this rule is permitted to depend on the wait/notify mechanism.\r\n\r\n**Noncompliant Code Example**\r\nThis noncompliant code example invokes the wait() method inside a traditional if block and fails to check the postcondition after the notification is received. If the notification were accidental or malicious, the thread could wake up prematurely.\r\n\r\n    synchronized (object) {\r\n      if (&lt;condition does not hold&gt;) {\r\n        object.wait();\r\n      }\r\n      // Proceed when condition holds\r\n    }\r\n\r\n**Compliant Solution**\r\nThis compliant solution calls the wait() method from within a while loop to check the condition both before and after the call to wait():\r\n\r\n    synchronized (object) {\r\n      while (&lt;condition does not hold&gt;) {\r\n        object.wait();\r\n      }\r\n      // Proceed when condition holds\r\n    }\r\n\r\nInvocations of the java.util.concurrent.locks.Condition.await() method also must be enclosed in a similar loop.","title":"Why should wait() always be called inside a loop","body":"<p>Both safety and liveness  are concerns when using the wait/notify mechanism. The safety property requires that all objects maintain consistent states in a multithreaded environment. The liveness property requires that every operation or method invocation execute to completion without interruption.</p>\n\n<p>To guarantee liveness, programs must test the while loop condition before invoking the wait() method. This early test checks whether another thread has already satisfied the condition predicate and sent a notification. Invoking the wait() method after the notification has been sent results in indefinite blocking.</p>\n\n<p>To guarantee safety, programs must test the while loop condition after returning from the wait() method. Although wait() is intended to block indefinitely until a notification is received, it still must be encased within a loop to prevent the following vulnerabilities:</p>\n\n<p><strong>Thread in the middle:</strong> A third thread can acquire the lock on the shared object during the interval between a notification being sent and the receiving thread resuming execution. This third thread can change the state of the object, leaving it inconsistent. This is a time-of-check, time-of-use (TOCTOU) race condition.</p>\n\n<p><strong>Malicious notification:</strong> A random or malicious notification can be received when the condition predicate is false. Such a notification would cancel the wait() method.</p>\n\n<p><strong>Misdelivered notification:</strong> The order in which threads execute after receipt of a notifyAll() signal is unspecified. Consequently, an unrelated thread could start executing and discover that its condition predicate is satisfied. Consequently, it could resume execution despite being required to remain dormant.</p>\n\n<p><strong>Spurious wakeups:</strong> Certain Java Virtual Machine (JVM) implementations are vulnerable to spurious wakeups that result in waiting threads waking up even without a notification.</p>\n\n<p>For these reasons, programs must check the condition predicate after the wait() method returns. A while loop is the best choice for checking the condition predicate both before and after invoking wait().</p>\n\n<p>Similarly, the await() method of the Condition interface also must be invoked inside a loop. According to the Java API, Interface Condition</p>\n\n<blockquote>\n  <p>When waiting upon a Condition, a \"spurious wakeup\" is permitted to\n  occur, in general, as a concession to the underlying platform\n  semantics. This has little practical impact on most application\n  programs as a Condition should always be waited upon in a loop,\n  testing the state predicate that is being waited for. An\n  implementation is free to remove the possibility of spurious wakeups\n  but it is recommended that applications programmers always assume that\n  they can occur and so always wait in a loop.</p>\n</blockquote>\n\n<p>New code should use the java.util.concurrent.locks concurrency utilities in place of the wait/notify mechanism. However, legacy code that complies with the other requirements of this rule is permitted to depend on the wait/notify mechanism.</p>\n\n<p><strong>Noncompliant Code Example</strong>\nThis noncompliant code example invokes the wait() method inside a traditional if block and fails to check the postcondition after the notification is received. If the notification were accidental or malicious, the thread could wake up prematurely.</p>\n\n<pre><code>synchronized (object) {\n  if (&lt;condition does not hold&gt;) {\n    object.wait();\n  }\n  // Proceed when condition holds\n}\n</code></pre>\n\n<p><strong>Compliant Solution</strong>\nThis compliant solution calls the wait() method from within a while loop to check the condition both before and after the call to wait():</p>\n\n<pre><code>synchronized (object) {\n  while (&lt;condition does not hold&gt;) {\n    object.wait();\n  }\n  // Proceed when condition holds\n}\n</code></pre>\n\n<p>Invocations of the java.util.concurrent.locks.Condition.await() method also must be enclosed in a similar loop.</p>\n"},{"comments":[{"owner":{"account_id":15980276,"reputation":129,"user_id":11532095,"display_name":"Sudhansu Kumar"},"score":0,"creation_date":1618314274,"post_id":40320268,"comment_id":118559107,"body_markdown":"How can two threads be inside a synchronized block at the same time?","body":"How can two threads be inside a synchronized block at the same time?"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1654702381,"post_id":40320268,"comment_id":128155804,"body_markdown":"@SudhansuKumar When the thread calls `wait()` it relinquishes its lock on the monitor. See the documentation for Object.wait().","body":"@SudhansuKumar When the thread calls <code>wait()</code> it relinquishes its lock on the monitor. See the documentation for Object.wait()."}],"tags":[],"owner":{"account_id":3408167,"reputation":690,"user_id":2859238,"accept_rate":32,"display_name":"user104309"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1477752504,"creation_date":1477752504,"answer_id":40320268,"question_id":1038007,"body_markdown":"I think I got @Gray &#39;s answer.\r\n\r\nLet me try to rephrase that for newbies like me and request the experts to correct me if I am wrong.\r\n\r\n**Consumer synchronized block:**:\r\n\r\n    synchronized (queue) {\r\n        // this needs to be while\r\n        while (queue.isEmpty()) {\r\n           queue.wait();\r\n        }\r\n        queue.remove();\r\n    }\r\n\r\n**Producer synchronized block:**:\r\n\r\n    synchronized(queue) {\r\n     // producer produces inside the queue\r\n        queue.notify();\r\n    }\r\n\r\nAssume the following happens in the given order:\r\n\r\n1) consumer#2 gets inside the consumer `synchronized` block and is waiting since queue is empty.\r\n\r\n2) Now, producer obtains the lock on `queue`and inserts inside the queue and calls notify().\r\n\r\nNow,either consumer#1 can be chosen to run which is waiting for `queue` lock to enter the `synchronized` block for the first time \r\n\r\nor\r\n\r\nconsumer#2 can be chosen to run.\r\n\r\n3) say, consumer#1 is chosen to continue with the execution. When it checks the condition,it will be true and it will `remove()` from the queue.\r\n\r\n4) say,consumer#2 is proceeding from where it halted its execution (the line after the `wait()` method). If &#39;while&#39; condition is not there (instead an `if` condition), it will just proceed to call `remove()` which might result in an exception/unexpected behaviour.","title":"Why should wait() always be called inside a loop","body":"<p>I think I got @Gray 's answer.</p>\n\n<p>Let me try to rephrase that for newbies like me and request the experts to correct me if I am wrong.</p>\n\n<p><strong>Consumer synchronized block:</strong>:</p>\n\n<pre><code>synchronized (queue) {\n    // this needs to be while\n    while (queue.isEmpty()) {\n       queue.wait();\n    }\n    queue.remove();\n}\n</code></pre>\n\n<p><strong>Producer synchronized block:</strong>:</p>\n\n<pre><code>synchronized(queue) {\n // producer produces inside the queue\n    queue.notify();\n}\n</code></pre>\n\n<p>Assume the following happens in the given order:</p>\n\n<p>1) consumer#2 gets inside the consumer <code>synchronized</code> block and is waiting since queue is empty.</p>\n\n<p>2) Now, producer obtains the lock on <code>queue</code>and inserts inside the queue and calls notify().</p>\n\n<p>Now,either consumer#1 can be chosen to run which is waiting for <code>queue</code> lock to enter the <code>synchronized</code> block for the first time </p>\n\n<p>or</p>\n\n<p>consumer#2 can be chosen to run.</p>\n\n<p>3) say, consumer#1 is chosen to continue with the execution. When it checks the condition,it will be true and it will <code>remove()</code> from the queue.</p>\n\n<p>4) say,consumer#2 is proceeding from where it halted its execution (the line after the <code>wait()</code> method). If 'while' condition is not there (instead an <code>if</code> condition), it will just proceed to call <code>remove()</code> which might result in an exception/unexpected behaviour.</p>\n"},{"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654701873,"creation_date":1569596734,"answer_id":58137117,"question_id":1038007,"body_markdown":"Three things you will see people do:\r\n\r\n* Using wait without checking anything (BROKEN)\r\n\r\n* Using wait with a condition, using an if check first (BROKEN).\r\n\r\n* Using wait in a loop, where the loop test checks the condition (NOT BROKEN).\r\n\r\nNot appreciating these details about how wait and notify work leads people to choose the wrong approach:\r\n\r\n* One is that a thread doesn&#39;t remember notifications that happened before it got around to waiting. The notify and notifyAll methods only effect threads that are already waiting, if a thread isn&#39;t waiting at the time it is out of luck. \r\n\r\n* Another is that a thread releases the lock once it starts waiting. Once it gets a notification it re-acquires the lock and continues on where it left off. Releasing the lock means that thread does not know *anything* about the current state once it wakes back up, any number of other threads could have made changes since then. The check made before the thread started waiting doesn&#39;t tell you anything about what the state is currently.\r\n\r\nSo the first case, with no checking, makes your code vulnerable to race conditions. It might happen to work by accident if one thread has enough of a head start over another. Or you may have threads waiting forever. If you sprinkle in timeouts then you end up with slow code that sometimes doesn&#39;t do what you want.\r\n\r\nAdding a condition to check apart from the notification itself protects your code from these race conditions and gives your code a way to know what the state is even if the thread wasn&#39;t waiting at the right time. \r\n\r\nThe second case, with if-checks, is likely to work if you have only 2 threads. That puts a limit on the number of states things can get into and when you made faulty assumptions you don&#39;t get burned so badly. This is the situation for lots of toy example code exercises. The result is people come away thinking they understand, when they really don&#39;t. \r\n\r\nProtip: Real world code has more than two threads.\r\n\r\nUsing the loop lets you re-check the condition once you re-acquire the lock so that you&#39;re moving forward based on current state, not on stale state. \r\n\r\n\r\n\r\n","title":"Why should wait() always be called inside a loop","body":"<p>Three things you will see people do:</p>\n<ul>\n<li><p>Using wait without checking anything (BROKEN)</p>\n</li>\n<li><p>Using wait with a condition, using an if check first (BROKEN).</p>\n</li>\n<li><p>Using wait in a loop, where the loop test checks the condition (NOT BROKEN).</p>\n</li>\n</ul>\n<p>Not appreciating these details about how wait and notify work leads people to choose the wrong approach:</p>\n<ul>\n<li><p>One is that a thread doesn't remember notifications that happened before it got around to waiting. The notify and notifyAll methods only effect threads that are already waiting, if a thread isn't waiting at the time it is out of luck.</p>\n</li>\n<li><p>Another is that a thread releases the lock once it starts waiting. Once it gets a notification it re-acquires the lock and continues on where it left off. Releasing the lock means that thread does not know <em>anything</em> about the current state once it wakes back up, any number of other threads could have made changes since then. The check made before the thread started waiting doesn't tell you anything about what the state is currently.</p>\n</li>\n</ul>\n<p>So the first case, with no checking, makes your code vulnerable to race conditions. It might happen to work by accident if one thread has enough of a head start over another. Or you may have threads waiting forever. If you sprinkle in timeouts then you end up with slow code that sometimes doesn't do what you want.</p>\n<p>Adding a condition to check apart from the notification itself protects your code from these race conditions and gives your code a way to know what the state is even if the thread wasn't waiting at the right time.</p>\n<p>The second case, with if-checks, is likely to work if you have only 2 threads. That puts a limit on the number of states things can get into and when you made faulty assumptions you don't get burned so badly. This is the situation for lots of toy example code exercises. The result is people come away thinking they understand, when they really don't.</p>\n<p>Protip: Real world code has more than two threads.</p>\n<p>Using the loop lets you re-check the condition once you re-acquire the lock so that you're moving forward based on current state, not on stale state.</p>\n"},{"comments":[{"owner":{"account_id":16733018,"reputation":2142,"user_id":12094894,"display_name":"Simon Crane"},"score":0,"creation_date":1578272805,"post_id":59605500,"comment_id":105375200,"body_markdown":"This is not related to the `wait` function","body":"This is not related to the <code>wait</code> function"},{"owner":{"account_id":14401011,"reputation":43,"user_id":10402659,"display_name":"Aravind Sundarraj"},"score":0,"creation_date":1589372538,"post_id":59605500,"comment_id":109266390,"body_markdown":"could you please explain ?, I have answered to why wait() should be called inside the loop","body":"could you please explain ?, I have answered to why wait() should be called inside the loop"}],"tags":[],"owner":{"account_id":14401011,"reputation":43,"user_id":10402659,"display_name":"Aravind Sundarraj"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578271537,"creation_date":1578271537,"answer_id":59605500,"question_id":1038007,"body_markdown":"In simple words,\r\n\r\n&#39;if&#39; is a conditional statement , once condition is satisfied remaining block of code will get executed.\r\n\r\n&#39;while&#39; is a loop which going check the condition unless condition  is not satisfied.\r\n","title":"Why should wait() always be called inside a loop","body":"<p>In simple words,</p>\n\n<p>'if' is a conditional statement , once condition is satisfied remaining block of code will get executed.</p>\n\n<p>'while' is a loop which going check the condition unless condition  is not satisfied.</p>\n"},{"tags":[],"owner":{"account_id":2126071,"reputation":812,"user_id":1888207,"accept_rate":50,"display_name":"gaurav414u"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1586602400,"creation_date":1586602400,"answer_id":61155599,"question_id":1038007,"body_markdown":"Before getting to the answer, lets see how wait is probably implemented.\n\n    wait(mutex) {\n       // automatically release mutex\n       // and go on wait queue\n    \n       // ... wait ... wait ... wait ...\n    \n       // remove from queue\n       // re-acquire mutex\n       // exit the wait operation\n    }\n\nIn your example `mutex` is the `obj` with the assumption that your code is running inside `synchronized(obj) { }` block.\n\n&gt; A mutex is called as monitor in Java [some subtle differences though]\n\n## A concurrency example using condition variable with `if`\n\n    synchronized(obj) {\n      if (!condition) { \n        obj.wait(); \n      }\n      // Do some stuff related to condition\n      condition = false;\n    }\n\n\nLets say we have 2 threads. **Thread 1** and **Thread 2**.\nLets see some states along the timeline.\n## at t = x\n**Thread 1 state**:\n\nwaiting on `... wait ... wait ... wait ..`\n\n**Thread 2 state**:\n\nJust entered the synchronised section, since as per the thread 1&#39;s state, the mutex/monitor is released. \n\n&gt; You can read more about wait() here [java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)][1].\n\nThis is the only thing that is tricky to understand. When 1 thread is inside the synchronized block. Another thread can still enter the synchronized block because wait() causes the monitor/mutex to be released.\n\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)\n\nThread 2 is about to read `if (!condition)` statement.\n\n## at t = x + 1\nnotify() is triggered by some thread on this mutex/monitor.\n\n`condition` becomes `true`\n\n### Thread 1 state:\n\nWaiting at `re-acquire mutex`, [Since thread-2 has the lock now]\n\n### Thread 2 state: \nDoesn&#39;t go inside if condition and marks the `condition = false`.\n\n## at t = x + 2\n\n### Thread 1 state:\nExits the wait operation and about to mark `condition = false`.\n\n\n**This state is inconsistent** as `condition` is supposed to be `true` but is `false` already, because **thread 2** marked it `false` previously.\n\nAnd thats the reason, `while` is required instead of `if`. As `while` would trigger the condition to be checked again for `thread 1` and thread 1 will begin waiting again.\n\n## Result\nIn order to avoid this inconsistency the correct code seems to be like this:\n\n    synchronized(obj) {\n      while (!condition) { \n        obj.wait(); \n      }\n      // Do some stuff related to condition\n      condition = false;\n    }","title":"Why should wait() always be called inside a loop","body":"<p>Before getting to the answer, lets see how wait is probably implemented.</p>\n<pre><code>wait(mutex) {\n   // automatically release mutex\n   // and go on wait queue\n\n   // ... wait ... wait ... wait ...\n\n   // remove from queue\n   // re-acquire mutex\n   // exit the wait operation\n}\n</code></pre>\n<p>In your example <code>mutex</code> is the <code>obj</code> with the assumption that your code is running inside <code>synchronized(obj) { }</code> block.</p>\n<blockquote>\n<p>A mutex is called as monitor in Java [some subtle differences though]</p>\n</blockquote>\n<h2>A concurrency example using condition variable with <code>if</code></h2>\n<pre><code>synchronized(obj) {\n  if (!condition) { \n    obj.wait(); \n  }\n  // Do some stuff related to condition\n  condition = false;\n}\n</code></pre>\n<p>Lets say we have 2 threads. <strong>Thread 1</strong> and <strong>Thread 2</strong>.\nLets see some states along the timeline.</p>\n<h2>at t = x</h2>\n<p><strong>Thread 1 state</strong>:</p>\n<p>waiting on <code>... wait ... wait ... wait ..</code></p>\n<p><strong>Thread 2 state</strong>:</p>\n<p>Just entered the synchronised section, since as per the thread 1's state, the mutex/monitor is released.</p>\n<blockquote>\n<p>You can read more about wait() here <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)</a>.</p>\n</blockquote>\n<p>This is the only thing that is tricky to understand. When 1 thread is inside the synchronized block. Another thread can still enter the synchronized block because wait() causes the monitor/mutex to be released.</p>\n<p>Thread 2 is about to read <code>if (!condition)</code> statement.</p>\n<h2>at t = x + 1</h2>\n<p>notify() is triggered by some thread on this mutex/monitor.</p>\n<p><code>condition</code> becomes <code>true</code></p>\n<h3>Thread 1 state:</h3>\n<p>Waiting at <code>re-acquire mutex</code>, [Since thread-2 has the lock now]</p>\n<h3>Thread 2 state:</h3>\n<p>Doesn't go inside if condition and marks the <code>condition = false</code>.</p>\n<h2>at t = x + 2</h2>\n<h3>Thread 1 state:</h3>\n<p>Exits the wait operation and about to mark <code>condition = false</code>.</p>\n<p><strong>This state is inconsistent</strong> as <code>condition</code> is supposed to be <code>true</code> but is <code>false</code> already, because <strong>thread 2</strong> marked it <code>false</code> previously.</p>\n<p>And thats the reason, <code>while</code> is required instead of <code>if</code>. As <code>while</code> would trigger the condition to be checked again for <code>thread 1</code> and thread 1 will begin waiting again.</p>\n<h2>Result</h2>\n<p>In order to avoid this inconsistency the correct code seems to be like this:</p>\n<pre><code>synchronized(obj) {\n  while (!condition) { \n    obj.wait(); \n  }\n  // Do some stuff related to condition\n  condition = false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4555074,"reputation":138,"user_id":3699039,"accept_rate":0,"display_name":"Muhammad_08"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691640288,"creation_date":1691640288,"answer_id":76872592,"question_id":1038007,"body_markdown":"If i was able to understand all above you mentioned this part i could not able to understand. In both case if its if block it will goes to wait if there’s while it also gonna waiting state\r\n**And thats the reason, while is required instead of if. As while would trigger the condition to be checked again for thread 1 and thread 1 will begin waiting again.**","title":"Why should wait() always be called inside a loop","body":"<p>If i was able to understand all above you mentioned this part i could not able to understand. In both case if its if block it will goes to wait if there’s while it also gonna waiting state\n<strong>And thats the reason, while is required instead of if. As while would trigger the condition to be checked again for thread 1 and thread 1 will begin waiting again.</strong></p>\n"}],"owner":{"account_id":35904,"reputation":23179,"user_id":102040,"accept_rate":66,"display_name":"Geek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65395,"favorite_count":0,"down_vote_count":1,"up_vote_count":84,"answer_count":12,"score":83,"last_activity_date":1691640288,"creation_date":1245845837,"question_id":1038007,"body_markdown":"I have read that we should always call a `wait()` from within a loop:\r\n\r\n    while (!condition) { obj.wait(); }\r\n\r\n\r\nIt works fine without a loop so why is that?","title":"Why should wait() always be called inside a loop","body":"<p>I have read that we should always call a <code>wait()</code> from within a loop:</p>\n\n<pre><code>while (!condition) { obj.wait(); }\n</code></pre>\n\n<p>It works fine without a loop so why is that?</p>\n"},{"tags":["java","switch-statement","instanceof"],"comments":[{"owner":{"account_id":63531,"reputation":3979,"user_id":188014,"accept_rate":89,"display_name":"vickirk"},"score":7,"creation_date":1302171182,"post_id":5579309,"comment_id":6348141,"body_markdown":"If you really feel you need a switch you could hash the class name to an int and use that, watch out for possible clashes though. Adding as comment rather than an answer as I don&#39;t like the idea of this actually been used.  Maybe what you really need is the visitor pattern.","body":"If you really feel you need a switch you could hash the class name to an int and use that, watch out for possible clashes though. Adding as comment rather than an answer as I don&#39;t like the idea of this actually been used.  Maybe what you really need is the visitor pattern."},{"owner":{"account_id":1816520,"reputation":1969,"user_id":1651498,"display_name":"Mitja"},"score":1,"creation_date":1401725679,"post_id":5579309,"comment_id":36985000,"body_markdown":"As of java 7 you could even switch on the fully qualified class name to avoid such hash clashes as @vickirk pointed out, but it&#39;s still ugly.","body":"As of java 7 you could even switch on the fully qualified class name to avoid such hash clashes as @vickirk pointed out, but it&#39;s still ugly."},{"owner":{"account_id":5644665,"reputation":35951,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"score":0,"creation_date":1553700387,"post_id":5579309,"comment_id":97483947,"body_markdown":"It is possible with [the classname as an Enum value](https://stackoverflow.com/a/55380782/4467208)","body":"It is possible with <a href=\"https://stackoverflow.com/a/55380782/4467208\">the classname as an Enum value</a>"}],"answers":[{"comments":[{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1302171218,"post_id":5579346,"comment_id":6348151,"body_markdown":"You can&#39;t switch on Strings in Java 6. And you can&#39;t switch on &quot;object versions of the primitives&quot;.","body":"You can&#39;t switch on Strings in Java 6. And you can&#39;t switch on &quot;object versions of the primitives&quot;."},{"owner":{"account_id":276297,"reputation":4677,"user_id":569659,"accept_rate":80,"display_name":"mark-cs"},"score":0,"creation_date":1302171477,"post_id":5579346,"comment_id":6348206,"body_markdown":"@Bozho I did say it depends on your java version, in Java 7 you can switch on Strings.","body":"@Bozho I did say it depends on your java version, in Java 7 you can switch on Strings."},{"owner":{"account_id":276297,"reputation":4677,"user_id":569659,"accept_rate":80,"display_name":"mark-cs"},"score":0,"creation_date":1302171813,"post_id":5579346,"comment_id":6348271,"body_markdown":"@Lukas Eder check your java spec you can","body":"@Lukas Eder check your java spec you can"}],"tags":[],"owner":{"account_id":276297,"reputation":4677,"user_id":569659,"accept_rate":80,"display_name":"mark-cs"},"comment_count":3,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1302171894,"creation_date":1302170761,"answer_id":5579346,"question_id":5579309,"body_markdown":"You can&#39;t a switch only works with the byte, short, char, int, String and enumerated types (and the object versions of the primitives, it also depends on your java version, Strings can be `switch`ed on in java 7)","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>You can't a switch only works with the byte, short, char, int, String and enumerated types (and the object versions of the primitives, it also depends on your java version, Strings can be <code>switch</code>ed on in java 7)</p>\n"},{"comments":[{"owner":{"account_id":263812,"reputation":7348,"user_id":549641,"display_name":"jmg"},"score":1,"creation_date":1302171048,"post_id":5579355,"comment_id":6348105,"body_markdown":"No, in most functional languages you can&#39;t pattern match on types, only on constructors. That is at least true in ML and Haskell. In Scala and OCaml it is possible but not the typical application of pattern matching.","body":"No, in most functional languages you can&#39;t pattern match on types, only on constructors. That is at least true in ML and Haskell. In Scala and OCaml it is possible but not the typical application of pattern matching."},{"owner":{"account_id":205326,"reputation":13432,"user_id":454017,"accept_rate":90,"display_name":"Carlo V. Dango"},"score":0,"creation_date":1302171158,"post_id":5579355,"comment_id":6348131,"body_markdown":"Sure, but checking against constructors would be &quot;equivalent&quot; to the scenario described above.","body":"Sure, but checking against constructors would be &quot;equivalent&quot; to the scenario described above."},{"owner":{"account_id":263812,"reputation":7348,"user_id":549641,"display_name":"jmg"},"score":1,"creation_date":1302171271,"post_id":5579355,"comment_id":6348161,"body_markdown":"In some cases, but not in general.","body":"In some cases, but not in general."},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1467503439,"post_id":5579355,"comment_id":63758700,"body_markdown":"Switches can also support enums.","body":"Switches can also support enums."}],"tags":[],"owner":{"account_id":205326,"reputation":13432,"user_id":454017,"accept_rate":90,"display_name":"Carlo V. Dango"},"comment_count":4,"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1363076444,"creation_date":1302170801,"answer_id":5579355,"question_id":5579309,"body_markdown":"You can&#39;t. The `switch` statement can only contain `case` statements which are compile time constants and which evaluate to an integer (Up to Java 6 and a string in Java 7). \r\n\r\nWhat you are looking for is called &quot;pattern matching&quot; in functional programming.\r\n\r\nSee also https://stackoverflow.com/questions/2790144/avoiding-instanceof-in-java","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>You can't. The <code>switch</code> statement can only contain <code>case</code> statements which are compile time constants and which evaluate to an integer (Up to Java 6 and a string in Java 7). </p>\n\n<p>What you are looking for is called \"pattern matching\" in functional programming.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/2790144/avoiding-instanceof-in-java\">Avoiding instanceof in Java</a></p>\n"},{"comments":[{"owner":{"account_id":923448,"reputation":2396,"user_id":954680,"accept_rate":71,"display_name":"thermz"},"score":46,"creation_date":1407406290,"post_id":5579385,"comment_id":39206035,"body_markdown":"Visitor pattern means that A,B and C have to implement an interface with an abstract method that takes a Visitor as an input parameter, what if you cannot change A,B,C and none of them implements that interface?","body":"Visitor pattern means that A,B and C have to implement an interface with an abstract method that takes a Visitor as an input parameter, what if you cannot change A,B,C and none of them implements that interface?"},{"owner":{"account_id":1230408,"reputation":6991,"user_id":1195139,"accept_rate":76,"display_name":"Ben Thurley"},"score":27,"creation_date":1422379072,"post_id":5579385,"comment_id":44721497,"body_markdown":"The last comment about the visitor pattern is wrong. You would still need to make A,B and C implement an interface.","body":"The last comment about the visitor pattern is wrong. You would still need to make A,B and C implement an interface."},{"owner":{"account_id":263812,"reputation":7348,"user_id":549641,"display_name":"jmg"},"score":1,"creation_date":1422623576,"post_id":5579385,"comment_id":44834580,"body_markdown":"@BenThurley You&#39;re technically correct. Yet, there is a common (at least for me) modification of the visitor pattern, where you encapsulate the dynamic dispatch into a dispatcher class which contains OP&#39;s instanceof cascade. But then, this cascade is at least reusable and separately testable for correctness and completeness (via reflection based unit tests). And you don&#39;t have to change the original classes.","body":"@BenThurley You&#39;re technically correct. Yet, there is a common (at least for me) modification of the visitor pattern, where you encapsulate the dynamic dispatch into a dispatcher class which contains OP&#39;s instanceof cascade. But then, this cascade is at least reusable and separately testable for correctness and completeness (via reflection based unit tests). And you don&#39;t have to change the original classes."},{"owner":{"account_id":17611,"reputation":32048,"user_id":39590,"accept_rate":80,"display_name":"mafu"},"score":12,"creation_date":1432399679,"post_id":5579385,"comment_id":48916362,"body_markdown":"Sadly this does not work if the do()-Code requires the environment of the host (i.e. access to variables not present in the do() itself).","body":"Sadly this does not work if the do()-Code requires the environment of the host (i.e. access to variables not present in the do() itself)."},{"owner":{"account_id":263812,"reputation":7348,"user_id":549641,"display_name":"jmg"},"score":3,"creation_date":1432916189,"post_id":5579385,"comment_id":49142350,"body_markdown":"@mafu OP&#39;s question was about type based dispatching. If your do() method needs more input in order to dispatch than your problem is IMHO outside the scope of the question discussed here.","body":"@mafu OP&#39;s question was about type based dispatching. If your do() method needs more input in order to dispatch than your problem is IMHO outside the scope of the question discussed here."},{"owner":{"account_id":2310590,"reputation":2887,"user_id":2028803,"accept_rate":89,"display_name":"cloudy_weather"},"score":9,"creation_date":1480416798,"post_id":5579385,"comment_id":68943397,"body_markdown":"this answer assumes that you can modify the classes A,B,C, while I think the point is how to do that without modify A,B,C because they might be in a third part library","body":"this answer assumes that you can modify the classes A,B,C, while I think the point is how to do that without modify A,B,C because they might be in a third part library"},{"owner":{"account_id":3649634,"reputation":766,"user_id":3042124,"accept_rate":100,"display_name":"Megakoresh"},"score":2,"creation_date":1489581641,"post_id":5579385,"comment_id":72732187,"body_markdown":"Quite late, but like daniele said: yes, this method is useless for checking types in a generic collection for example, where you have a set of objects which you know, can be of some set of types, but you must check which of them it is.","body":"Quite late, but like daniele said: yes, this method is useless for checking types in a generic collection for example, where you have a set of objects which you know, can be of some set of types, but you must check which of them it is."},{"owner":{"account_id":124497,"reputation":439,"user_id":319621,"accept_rate":40,"display_name":"gatinueta"},"score":0,"creation_date":1555245502,"post_id":5579385,"comment_id":98035813,"body_markdown":"Downvoted because you cannot use the visitor pattern without modifying the classes A, B, and C.","body":"Downvoted because you cannot use the visitor pattern without modifying the classes A, B, and C."},{"owner":{"account_id":2837945,"reputation":959,"user_id":2438177,"accept_rate":72,"display_name":"FraK"},"score":0,"creation_date":1595957952,"post_id":5579385,"comment_id":111652245,"body_markdown":"If you cannot or don&#39;t want to modify A,B,C, you can try using the Decorator pattern to add the required method to those classes and provide the &quot;Element&quot; interface for the Visitor pattern.","body":"If you cannot or don&#39;t want to modify A,B,C, you can try using the Decorator pattern to add the required method to those classes and provide the &quot;Element&quot; interface for the Visitor pattern."},{"owner":{"account_id":7980951,"reputation":2013,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":0,"creation_date":1635324584,"post_id":5579385,"comment_id":123264276,"body_markdown":"What in case of DTOs? DTO should not have methods...","body":"What in case of DTOs? DTO should not have methods..."},{"owner":{"account_id":378670,"reputation":3959,"user_id":731548,"accept_rate":33,"display_name":"cquezel"},"score":2,"creation_date":1646833665,"post_id":5579385,"comment_id":126221351,"body_markdown":"11 years after this anaswer, Java 17 finally allows exactly what the op wants. See answer below on pattern matching  https://stackoverflow.com/a/57432241/731548","body":"11 years after this anaswer, Java 17 finally allows exactly what the op wants. See answer below on pattern matching  <a href=\"https://stackoverflow.com/a/57432241/731548\">stackoverflow.com/a/57432241/731548</a>"},{"owner":{"account_id":1807526,"reputation":3107,"user_id":1644320,"accept_rate":47,"display_name":"Pablo Pazos"},"score":0,"creation_date":1669832166,"post_id":5579385,"comment_id":131734857,"body_markdown":"this only works if the behavior is in the class itself, it doesn&#39;t work with the behavior in an external class, for that other pattern like template method or facade would be useful","body":"this only works if the behavior is in the class itself, it doesn&#39;t work with the behavior in an external class, for that other pattern like template method or facade would be useful"}],"tags":[],"owner":{"account_id":263812,"reputation":7348,"user_id":549641,"display_name":"jmg"},"comment_count":12,"down_vote_count":10,"up_vote_count":280,"is_accepted":true,"score":270,"last_activity_date":1302171196,"creation_date":1302170964,"answer_id":5579385,"question_id":5579309,"body_markdown":"This is a typical scenario where subtype polymorphism helps. Do the following\r\n\r\n    interface I {\r\n      void do();\r\n    }\r\n\r\n    class A implements I { void do() { doA() } ... }\r\n    class B implements I { void do() { doB() } ... }\r\n    class C implements I { void do() { doC() } ... }\r\n    \r\nThen you can simply call `do()` on `this`. \r\n\r\nIf you are not free to change `A`, `B`, and `C`, you could apply the visitor pattern to achieve the same.\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>This is a typical scenario where subtype polymorphism helps. Do the following</p>\n\n<pre><code>interface I {\n  void do();\n}\n\nclass A implements I { void do() { doA() } ... }\nclass B implements I { void do() { doB() } ... }\nclass C implements I { void do() { doC() } ... }\n</code></pre>\n\n<p>Then you can simply call <code>do()</code> on <code>this</code>. </p>\n\n<p>If you are not free to change <code>A</code>, <code>B</code>, and <code>C</code>, you could apply the visitor pattern to achieve the same.</p>\n"},{"tags":[],"owner":{"account_id":331053,"reputation":1135,"user_id":655504,"accept_rate":100,"display_name":"Andreas Johansson"},"comment_count":0,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1302170968,"creation_date":1302170968,"answer_id":5579389,"question_id":5579309,"body_markdown":"Nope, there is no way to do this. What you might want to do is however to consider **[Polymorphism][1]** as a way to handle these kind of problems.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming &quot;Polymorphism&quot;","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Nope, there is no way to do this. What you might want to do is however to consider <strong><a href=\"http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming\" rel=\"noreferrer\" title=\"Polymorphism\">Polymorphism</a></strong> as a way to handle these kind of problems.</p>\n"},{"comments":[{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1302171335,"post_id":5579405,"comment_id":6348180,"body_markdown":"@jmg suggeests (http://stackoverflow.com/questions/5579309/switch-instanceof/5579385#5579385) using an interface instead of an abstract base class. That can be superior in some circusmtances.","body":"@jmg suggeests (<a href=\"http://stackoverflow.com/questions/5579309/switch-instanceof/5579385#5579385\" title=\"switch instanceof\">stackoverflow.com/questions/5579309/switch-instanceof/&hellip;</a>) using an interface instead of an abstract base class. That can be superior in some circusmtances."}],"tags":[],"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1302171054,"creation_date":1302171054,"answer_id":5579405,"question_id":5579309,"body_markdown":"Using switch statements like this is not the object oriented way. You should instead use the power of _polymorphism_. Simply write\r\n\r\n    this.do()\r\n\r\nHaving previously set up a base class:\r\n\r\n    abstract class Base {\r\n       abstract void do();\r\n       ...\r\n    }\r\n\r\nwhich is the base class for `A`, `B` and `C`:\r\n\r\n    class A extends Base {\r\n        void do() { this.doA() }\r\n    }\r\n\r\n    class B extends Base {\r\n        void do() { this.doB() }\r\n    }\r\n\r\n    class C extends Base {\r\n        void do() { this.doC() }\r\n    }\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Using switch statements like this is not the object oriented way. You should instead use the power of <em>polymorphism</em>. Simply write</p>\n\n<pre><code>this.do()\n</code></pre>\n\n<p>Having previously set up a base class:</p>\n\n<pre><code>abstract class Base {\n   abstract void do();\n   ...\n}\n</code></pre>\n\n<p>which is the base class for <code>A</code>, <code>B</code> and <code>C</code>:</p>\n\n<pre><code>class A extends Base {\n    void do() { this.doA() }\n}\n\nclass B extends Base {\n    void do() { this.doB() }\n}\n\nclass C extends Base {\n    void do() { this.doC() }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1249289,"reputation":3789,"user_id":1422630,"accept_rate":55,"display_name":"Aquarius Power"},"score":2,"creation_date":1422903924,"post_id":5580433,"comment_id":44923698,"body_markdown":"thx, I also had to make some changes: 1) initialize each enum id with the Class reference; 2) assert the class simple name with the enum id .toString(); 3)find the enum thru the stored Class reference per enum id. I think this is also obfuscation safe then.","body":"thx, I also had to make some changes: 1) initialize each enum id with the Class reference; 2) assert the class simple name with the enum id .toString(); 3)find the enum thru the stored Class reference per enum id. I think this is also obfuscation safe then."},{"owner":{"account_id":1786609,"reputation":3764,"user_id":1627961,"accept_rate":83,"display_name":"tetri"},"score":1,"creation_date":1423132313,"post_id":5580433,"comment_id":45027997,"body_markdown":"if this.getClass().getSimpleName() does not match a value of CLAZZ it throwns an Exception... it&#39;s better to surround with a try catch block and the Exception would be treated as the &quot;default&quot; or &quot;else&quot; option of the switch","body":"if this.getClass().getSimpleName() does not match a value of CLAZZ it throwns an Exception... it&#39;s better to surround with a try catch block and the Exception would be treated as the &quot;default&quot; or &quot;else&quot; option of the switch"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1612994079,"post_id":5580433,"comment_id":116943167,"body_markdown":"usually people look toward switch due to performance considerations, and Enum.instanceOf [should not be mentioned here](https://medium.com/javarevisited/micro-optimizations-in-java-good-nice-and-slow-enum-261e6f77bd2e).","body":"usually people look toward switch due to performance considerations, and Enum.instanceOf <a href=\"https://medium.com/javarevisited/micro-optimizations-in-java-good-nice-and-slow-enum-261e6f77bd2e\" rel=\"nofollow noreferrer\">should not be mentioned here</a>."},{"owner":{"account_id":5848223,"reputation":7526,"user_id":4607733,"accept_rate":80,"display_name":"logi-kal"},"score":1,"creation_date":1667639096,"post_id":5580433,"comment_id":131217697,"body_markdown":"This breaks automatic rename for class names in `case A`, `case B` and `case C` when refactoring with the most used IDEs.","body":"This breaks automatic rename for class names in <code>case A</code>, <code>case B</code> and <code>case C</code> when refactoring with the most used IDEs."}],"tags":[],"owner":{"account_id":45949,"reputation":1964,"user_id":135644,"accept_rate":100,"display_name":"Nico"},"comment_count":4,"down_vote_count":3,"up_vote_count":126,"is_accepted":false,"score":123,"last_activity_date":1302176748,"creation_date":1302176338,"answer_id":5580433,"question_id":5579309,"body_markdown":"if you absolutely cannot code to an interface, then you could use an enum as an intermediary:\r\n\r\n   \r\n\tpublic A() {\r\n\t\t\r\n\t\tCLAZZ z = CLAZZ.valueOf(this.getClass().getSimpleName());\r\n\t\tswitch (z) {\r\n\t\tcase A:\r\n\t\t\tdoA();\r\n\t\t\tbreak;\r\n\t\tcase B:\r\n\t\t\tdoB();\r\n\t\t\tbreak;\r\n\t\tcase C:\r\n\t\t\tdoC();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\tenum CLAZZ {\r\n\t\tA,B,C;\r\n\t\t\r\n\t}","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>if you absolutely cannot code to an interface, then you could use an enum as an intermediary:</p>\n\n<pre><code>public A() {\n\n    CLAZZ z = CLAZZ.valueOf(this.getClass().getSimpleName());\n    switch (z) {\n    case A:\n        doA();\n        break;\n    case B:\n        doB();\n        break;\n    case C:\n        doC();\n        break;\n    }\n}\n\n\nenum CLAZZ {\n    A,B,C;\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":210377,"reputation":10220,"user_id":461958,"accept_rate":96,"display_name":"mateuscb"},"score":1,"creation_date":1398288887,"post_id":7711220,"comment_id":35586667,"body_markdown":"nice! Is the `@Override` required above each implementation of `doAction()`?","body":"nice! Is the <code>@Override</code> required above each implementation of <code>doAction()</code>?"},{"owner":{"account_id":921365,"reputation":407,"user_id":953010,"accept_rate":100,"display_name":"PureSpider"},"score":17,"creation_date":1452778231,"post_id":7711220,"comment_id":57324862,"body_markdown":"How is this the &quot;BEST&quot; solution? How would you decide which `action` to use? By an outer instanceof-cascade that calls `someFunction()` with the correct `action`? This just adds another level of indirection.","body":"How is this the &quot;BEST&quot; solution? How would you decide which <code>action</code> to use? By an outer instanceof-cascade that calls <code>someFunction()</code> with the correct <code>action</code>? This just adds another level of indirection."},{"owner":{"account_id":371771,"reputation":1901,"user_id":720489,"accept_rate":83,"display_name":"se.solovyev"},"score":1,"creation_date":1452867349,"post_id":7711220,"comment_id":57367893,"body_markdown":"No, it will be done automatically at runtime. If you call someFunction(Action.a) then a.doAction will be called.","body":"No, it will be done automatically at runtime. If you call someFunction(Action.a) then a.doAction will be called."},{"owner":{"account_id":1314379,"reputation":526,"user_id":1261628,"accept_rate":82,"display_name":"James Manes"},"score":15,"creation_date":1453906797,"post_id":7711220,"comment_id":57805844,"body_markdown":"I don&#39;t understand this. How would you know which enum to use? As @PureSpider said, this seems like just another level of work to do.","body":"I don&#39;t understand this. How would you know which enum to use? As @PureSpider said, this seems like just another level of work to do."},{"owner":{"account_id":6558074,"reputation":3092,"user_id":5070158,"accept_rate":94,"display_name":"Andrii Plotnikov"},"score":1,"creation_date":1474964076,"post_id":7711220,"comment_id":66736457,"body_markdown":"It is probably case, when you have enum inside appropriate entity already, then you can take it from there...","body":"It is probably case, when you have enum inside appropriate entity already, then you can take it from there..."},{"owner":{"account_id":2932312,"reputation":1029,"user_id":2766687,"display_name":"Bruno Morais"},"score":0,"creation_date":1486736946,"post_id":7711220,"comment_id":71488422,"body_markdown":"Thank you! following yout sugestion, here what I made:\n1- Add the enom at the Super Class:\n2- Add a abstract getter in Super Class to get the enom;\n3- Implemented the abstract enom getter um concrete Class;\n4- finished runing the concrete class method.","body":"Thank you! following yout sugestion, here what I made: 1- Add the enom at the Super Class: 2- Add a abstract getter in Super Class to get the enom; 3- Implemented the abstract enom getter um concrete Class; 4- finished runing the concrete class method."},{"owner":{"account_id":53390,"reputation":4508,"user_id":159570,"display_name":"Joe Coder"},"score":0,"creation_date":1523025834,"post_id":7711220,"comment_id":86403339,"body_markdown":"This is a very handy, concise way to implement the Abstract Factory Pattern.  Thank you!","body":"This is a very handy, concise way to implement the Abstract Factory Pattern.  Thank you!"},{"owner":{"account_id":6151420,"reputation":366,"user_id":4795779,"accept_rate":80,"display_name":"Tom"},"score":3,"creation_date":1564341418,"post_id":7711220,"comment_id":100989067,"body_markdown":"It&#39;s very sad that you **did not have offered a complete example**, e.g. how map any Class-Instance of a,b or C to this enum. I&#39;ll try to cast the Instance to this Enum.","body":"It&#39;s very sad that you <b>did not have offered a complete example</b>, e.g. how map any Class-Instance of a,b or C to this enum. I&#39;ll try to cast the Instance to this Enum."}],"tags":[],"owner":{"account_id":371771,"reputation":1901,"user_id":720489,"accept_rate":83,"display_name":"se.solovyev"},"comment_count":8,"down_vote_count":10,"up_vote_count":51,"is_accepted":false,"score":41,"last_activity_date":1318241244,"creation_date":1318241244,"answer_id":7711220,"question_id":5579309,"body_markdown":"Just in case if someone will read it:\r\n\r\nThe BEST solution in java is : \r\n\r\n    public enum Action { \r\n    \ta{\r\n    \t\tvoid doAction(...){\r\n    \t\t\t// some code\r\n    \t\t}\r\n    \t\t\r\n    \t}, \r\n    \tb{\r\n    \t\tvoid doAction(...){\r\n    \t\t\t// some code\r\n    \t\t}\r\n    \t\t\r\n    \t}, \r\n    \tc{\r\n    \t\tvoid doAction(...){\r\n    \t\t\t// some code\r\n    \t\t}\r\n    \t\t\r\n    \t};\r\n    \r\n    \tabstract void doAction (...);\r\n    }\r\n\r\nThe GREAT benefits of such pattern are:\r\n\r\n 1. You just do it like (NO switches at all):\r\n\r\n        void someFunction ( Action action ) {\r\n            action.doAction(...);\t\r\n        }\r\n\r\n 2. In case if you add new Action called &quot;d&quot; you MUST imlement doAction(...) method\r\n\r\nNOTE: This pattern is described in Joshua&#39;s Bloch &quot;Effective Java (2nd Edition)&quot;\r\n\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Just in case if someone will read it:</p>\n\n<p>The BEST solution in java is : </p>\n\n<pre><code>public enum Action { \n    a{\n        void doAction(...){\n            // some code\n        }\n\n    }, \n    b{\n        void doAction(...){\n            // some code\n        }\n\n    }, \n    c{\n        void doAction(...){\n            // some code\n        }\n\n    };\n\n    abstract void doAction (...);\n}\n</code></pre>\n\n<p>The GREAT benefits of such pattern are:</p>\n\n<ol>\n<li><p>You just do it like (NO switches at all):</p>\n\n<pre><code>void someFunction ( Action action ) {\n    action.doAction(...);   \n}\n</code></pre></li>\n<li><p>In case if you add new Action called \"d\" you MUST imlement doAction(...) method</p></li>\n</ol>\n\n<p>NOTE: This pattern is described in Joshua's Bloch \"Effective Java (2nd Edition)\"</p>\n"},{"comments":[{"owner":{"account_id":208093,"reputation":14117,"user_id":458365,"accept_rate":75,"display_name":"pablisco"},"score":4,"creation_date":1392504286,"post_id":13491175,"comment_id":32995378,"body_markdown":"Should point out that this works only on Java 7. And that you have to call `this.getSimpleName()`\nNot sure if the poster is confused with JS (yeah, he&#39;s using console, hehe).","body":"Should point out that this works only on Java 7. And that you have to call <code>this.getSimpleName()</code> Not sure if the poster is confused with JS (yeah, he&#39;s using console, hehe)."},{"owner":{"account_id":1088545,"reputation":1,"user_id":1083704,"accept_rate":71,"display_name":"Val"},"score":5,"creation_date":1393769141,"post_id":13491175,"comment_id":33574164,"body_markdown":"This has a problem of falling out of source code referential transparency. That is, your IDE won&#39;t be able to mantain the reference integrity. Suppose you want to rename your name. The reflection is evil.","body":"This has a problem of falling out of source code referential transparency. That is, your IDE won&#39;t be able to mantain the reference integrity. Suppose you want to rename your name. The reflection is evil."},{"owner":{"account_id":294084,"reputation":977,"user_id":597767,"accept_rate":75,"display_name":"Doradus"},"score":1,"creation_date":1446510600,"post_id":13491175,"comment_id":54763702,"body_markdown":"Not a great idea.  Class names are not unique if you have multiple class loaders.","body":"Not a great idea.  Class names are not unique if you have multiple class loaders."},{"owner":{"account_id":1628184,"reputation":9512,"user_id":1503237,"accept_rate":67,"display_name":"Matthias Ronge"},"score":0,"creation_date":1479901129,"post_id":13491175,"comment_id":68751349,"body_markdown":"Breaks when it comes to code compression (→ ProGuard)","body":"Breaks when it comes to code compression (→ ProGuard)"}],"tags":[],"owner":{"account_id":2066132,"reputation":45,"user_id":1841609,"display_name":"Joeri"},"comment_count":4,"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1360332859,"creation_date":1353493548,"answer_id":13491175,"question_id":5579309,"body_markdown":"How about this ?\r\n \r\n\r\n\r\n    switch (this.name) \r\n    {\r\n      case &quot;A&quot;:\r\n        doA();\r\n        break;\r\n      case &quot;B&quot;:\r\n        doB();\r\n        break;\r\n      case &quot;C&quot;:\r\n        doC();\r\n        break;\r\n      default:\r\n        console.log(&#39;Undefined instance&#39;);\r\n    }\r\n\r\n\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>How about this ?</p>\n\n<pre><code>switch (this.name) \n{\n  case \"A\":\n    doA();\n    break;\n  case \"B\":\n    doB();\n    break;\n  case \"C\":\n    doC();\n    break;\n  default:\n    console.log('Undefined instance');\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8700796,"reputation":2564,"user_id":6510908,"display_name":"B-GangsteR"},"score":0,"creation_date":1507012958,"post_id":15759039,"comment_id":80031416,"body_markdown":"You can&#39;t use it in `switch` as `case` condition because it is not constant value","body":"You can&#39;t use it in <code>switch</code> as <code>case</code> condition because it is not constant value"}],"tags":[],"owner":{"account_id":2577835,"reputation":11,"user_id":2235131,"display_name":"BeToken"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364889791,"creation_date":1364889791,"answer_id":15759039,"question_id":5579309,"body_markdown":"I think there are reasons to use a switch statement. If you are using xText generated Code perhaps. Or another kind of EMF generated classes.\r\n\r\n\r\n    instance.getClass().getName();\r\nreturns a String of the Class Implementation Name. i.e:\r\n    org.eclipse.emf.ecore.util.EcoreUtil\r\n\r\n\r\n    instance.getClass().getSimpleName();\r\nreturns the simple represenation i.e:\r\n    EcoreUtil","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I think there are reasons to use a switch statement. If you are using xText generated Code perhaps. Or another kind of EMF generated classes.</p>\n\n<pre><code>instance.getClass().getName();\n</code></pre>\n\n<p>returns a String of the Class Implementation Name. i.e:\n    org.eclipse.emf.ecore.util.EcoreUtil</p>\n\n<pre><code>instance.getClass().getSimpleName();\n</code></pre>\n\n<p>returns the simple represenation i.e:\n    EcoreUtil</p>\n"},{"comments":[{"owner":{"account_id":536937,"reputation":4501,"user_id":905686,"accept_rate":59,"display_name":"user905686"},"score":1,"creation_date":1530449261,"post_id":19252352,"comment_id":89231900,"body_markdown":"The `value` field is redundant if you only want to distinguish the enum constants - you can use the constants directly (as you do).","body":"The <code>value</code> field is redundant if you only want to distinguish the enum constants - you can use the constants directly (as you do)."}],"tags":[],"owner":{"account_id":982989,"reputation":4440,"user_id":1002222,"accept_rate":96,"display_name":"Gaʀʀʏ"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1490367485,"creation_date":1381247150,"answer_id":19252352,"question_id":5579309,"body_markdown":"If you can manipulate the common interface, you could do add in an enum and have each class return a unique value. You won&#39;t need instanceof or a visitor pattern.\r\n\r\nFor me, the logic needed to be in the written in the switch statement, not the object itself. This was my solution:\r\n\r\n`ClassA, ClassB, and ClassC implement CommonClass`\r\n\r\nInterface:\r\n\r\n    public interface CommonClass {\r\n       MyEnum getEnumType();\r\n    }\r\n\r\nEnum:\r\n\r\n    public enum MyEnum {\r\n      ClassA(0), ClassB(1), ClassC(2);\r\n    \r\n      private int value;\r\n    \r\n      private MyEnum(final int value) {\r\n        this.value = value;\r\n      }\r\n    \r\n      public int getValue() {\r\n        return value;\r\n      }\r\n\r\nImpl:\r\n\r\n    ...\r\n      switch(obj.getEnumType())\r\n      {\r\n    \tcase MyEnum.ClassA:\r\n    \t  ClassA classA = (ClassA) obj;\r\n    \tbreak;\r\n\r\n    \tcase MyEnum.ClassB:\r\n    \t  ClassB classB = (ClassB) obj;\r\n    \tbreak;\r\n\r\n    \tcase MyEnum.ClassC:\r\n    \t  ClassC classC = (ClassC) obj;\r\n    \tbreak;\r\n      }\r\n    ...\r\n\r\nIf you are on java 7, you can put string values for the enum and the switch case block will still work.","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>If you can manipulate the common interface, you could do add in an enum and have each class return a unique value. You won't need instanceof or a visitor pattern.</p>\n\n<p>For me, the logic needed to be in the written in the switch statement, not the object itself. This was my solution:</p>\n\n<p><code>ClassA, ClassB, and ClassC implement CommonClass</code></p>\n\n<p>Interface:</p>\n\n<pre><code>public interface CommonClass {\n   MyEnum getEnumType();\n}\n</code></pre>\n\n<p>Enum:</p>\n\n<pre><code>public enum MyEnum {\n  ClassA(0), ClassB(1), ClassC(2);\n\n  private int value;\n\n  private MyEnum(final int value) {\n    this.value = value;\n  }\n\n  public int getValue() {\n    return value;\n  }\n</code></pre>\n\n<p>Impl:</p>\n\n<pre><code>...\n  switch(obj.getEnumType())\n  {\n    case MyEnum.ClassA:\n      ClassA classA = (ClassA) obj;\n    break;\n\n    case MyEnum.ClassB:\n      ClassB classB = (ClassB) obj;\n    break;\n\n    case MyEnum.ClassC:\n      ClassC classC = (ClassC) obj;\n    break;\n  }\n...\n</code></pre>\n\n<p>If you are on java 7, you can put string values for the enum and the switch case block will still work.</p>\n"},{"comments":[{"owner":{"account_id":1088545,"reputation":1,"user_id":1083704,"accept_rate":71,"display_name":"Val"},"score":0,"creation_date":1393766163,"post_id":22066250,"comment_id":33573239,"body_markdown":"Indeed, you [should never use the polymorphimsm](http://valjok.blogspot.com/2013/01/java-oop-is-sux-from-very-beginning.html) (aka OOP)","body":"Indeed, you <a href=\"http://valjok.blogspot.com/2013/01/java-oop-is-sux-from-very-beginning.html\" rel=\"nofollow noreferrer\">should never use the polymorphimsm</a> (aka OOP)"}],"tags":[],"owner":{"account_id":3550689,"reputation":318,"user_id":2965659,"display_name":"JohnK"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1393498223,"creation_date":1393498223,"answer_id":22066250,"question_id":5579309,"body_markdown":"I know this is very late but for future readers ... \r\n\r\nBeware of the approaches above that are based only on the *name* of the class of **A**, **B**, **C** ... : \r\n\r\nUnless you can guarantee that **A**, **B**, **C** ... (all subclasses or implementers of **Base**) are **final** then subclasses of **A**, **B**, **C** ... will not be dealt with.\r\n\r\nEven though the **if, elseif, elseif ..**  approach is slower for large number of subclasses/implementers, it is more accurate.\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I know this is very late but for future readers ... </p>\n\n<p>Beware of the approaches above that are based only on the <em>name</em> of the class of <strong>A</strong>, <strong>B</strong>, <strong>C</strong> ... : </p>\n\n<p>Unless you can guarantee that <strong>A</strong>, <strong>B</strong>, <strong>C</strong> ... (all subclasses or implementers of <strong>Base</strong>) are <strong>final</strong> then subclasses of <strong>A</strong>, <strong>B</strong>, <strong>C</strong> ... will not be dealt with.</p>\n\n<p>Even though the <strong>if, elseif, elseif ..</strong>  approach is slower for large number of subclasses/implementers, it is more accurate.</p>\n"},{"tags":[],"owner":{"account_id":20288,"reputation":3490,"user_id":48340,"display_name":"Pavel"},"comment_count":0,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1599878671,"creation_date":1441780654,"answer_id":32472488,"question_id":5579309,"body_markdown":"As discussed in the top answers, the traditional OOP approach is to use polymorphism instead of switch. There is even a well documented refactoring pattern for this trick: [Replace Conditional with Polymorphism](http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html). Whenever I reach for this approach, I like to also implement a [Null object](http://refactoring.com/catalog/introduceNullObject.html) to provide the default behaviour.\r\n\r\nStarting with Java 8, we can use lambdas and generics to give us something functional programmers are very familiar with: pattern matching. It&#39;s not a core language feature but the [VAVR Library](https://www.vavr.io/) - formerly Javaslang library provides one implementation. Example from the docs:\r\n\r\n    Match.ofType(Number.class)\r\n        .caze((Integer i) -&gt; i)\r\n        .caze((String s) -&gt; new BigDecimal(s))\r\n        .orElse(() -&gt; -1)\r\n        .apply(1.0d); // result: -1\r\n\r\nIt&#39;s not the most natural paradigm in the Java world so use it with caution. While the generic methods will save you from having to typecast the matched value, we&#39;re missing a standard way to decompose the matched object as with [Scala&#39;s case classes](http://docs.scala-lang.org/tutorials/tour/case-classes.html) for example.","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>As discussed in the top answers, the traditional OOP approach is to use polymorphism instead of switch. There is even a well documented refactoring pattern for this trick: <a href=\"http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html\" rel=\"nofollow noreferrer\">Replace Conditional with Polymorphism</a>. Whenever I reach for this approach, I like to also implement a <a href=\"http://refactoring.com/catalog/introduceNullObject.html\" rel=\"nofollow noreferrer\">Null object</a> to provide the default behaviour.</p>\n<p>Starting with Java 8, we can use lambdas and generics to give us something functional programmers are very familiar with: pattern matching. It's not a core language feature but the <a href=\"https://www.vavr.io/\" rel=\"nofollow noreferrer\">VAVR Library</a> - formerly Javaslang library provides one implementation. Example from the docs:</p>\n<pre><code>Match.ofType(Number.class)\n    .caze((Integer i) -&gt; i)\n    .caze((String s) -&gt; new BigDecimal(s))\n    .orElse(() -&gt; -1)\n    .apply(1.0d); // result: -1\n</code></pre>\n<p>It's not the most natural paradigm in the Java world so use it with caution. While the generic methods will save you from having to typecast the matched value, we're missing a standard way to decompose the matched object as with <a href=\"http://docs.scala-lang.org/tutorials/tour/case-classes.html\" rel=\"nofollow noreferrer\">Scala's case classes</a> for example.</p>\n"},{"comments":[{"owner":{"account_id":80581,"reputation":3955,"user_id":227779,"accept_rate":38,"display_name":"Per Lundberg"},"score":5,"creation_date":1562835606,"post_id":42513186,"comment_id":100505550,"body_markdown":"Upvoted; this is one of the few answers that actually helps the OP do what he is asking for (and yes, it&#39;s often possible to refactor the code to not have to do `instanceof`, and no, my scenario is unfortunately not one of those that easily fits into that box...)","body":"Upvoted; this is one of the few answers that actually helps the OP do what he is asking for (and yes, it&#39;s often possible to refactor the code to not have to do <code>instanceof</code>, and no, my scenario is unfortunately not one of those that easily fits into that box...)"},{"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"score":0,"creation_date":1573482068,"post_id":42513186,"comment_id":103886174,"body_markdown":"@SergioGuti&#233;rrez Thanks. Well, this pattern should only be needed with an external library. And even then you can just create an interface with an adapter implementation instead, but it&#39;s useful where you want the behavioral DIFF, so to speak, to be more obvious. Similar to fluent vs annotation API routing I suppose.","body":"@SergioGuti&#233;rrez Thanks. Well, this pattern should only be needed with an external library. And even then you can just create an interface with an adapter implementation instead, but it&#39;s useful where you want the behavioral DIFF, so to speak, to be more obvious. Similar to fluent vs annotation API routing I suppose."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1648152085,"post_id":42513186,"comment_id":126558948,"body_markdown":"This only works for exact matches. `Class&lt;ArrayList&gt;` will not match `Class&lt;List&gt;`.","body":"This only works for exact matches. <code>Class&lt;ArrayList&gt;</code> will not match <code>Class&lt;List&gt;</code>."},{"owner":{"account_id":552361,"reputation":18316,"user_id":917467,"accept_rate":76,"display_name":"html_programmer"},"score":0,"creation_date":1655893910,"post_id":42513186,"comment_id":128438352,"body_markdown":"It&#39;s a good answer to the question, but I don&#39;t like the code. It&#39;s obscure, and I&#39;d much rather prefer the initial code, albeit it can be put in a separate service you will rarely need to view / touch.","body":"It&#39;s a good answer to the question, but I don&#39;t like the code. It&#39;s obscure, and I&#39;d much rather prefer the initial code, albeit it can be put in a separate service you will rarely need to view / touch."},{"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"score":0,"creation_date":1655904884,"post_id":42513186,"comment_id":128442730,"body_markdown":"@html_programmer fair enough, but there is a fine line between &quot;obscure&quot; and &quot;ignorant&quot;  especially regarding functional programming","body":"@html_programmer fair enough, but there is a fine line between &quot;obscure&quot; and &quot;ignorant&quot;  especially regarding functional programming"},{"owner":{"account_id":552361,"reputation":18316,"user_id":917467,"accept_rate":76,"display_name":"html_programmer"},"score":0,"creation_date":1655927066,"post_id":42513186,"comment_id":128450697,"body_markdown":"@Novaterata I would call the initial code a readable refactor of the second. But to each their own.","body":"@Novaterata I would call the initial code a readable refactor of the second. But to each their own."}],"tags":[],"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"comment_count":6,"down_vote_count":0,"up_vote_count":77,"is_accepted":false,"score":77,"last_activity_date":1608504945,"creation_date":1488297014,"answer_id":42513186,"question_id":5579309,"body_markdown":"Create a `Map` where the key is `Class&lt;?&gt;` and the value is an expression (lambda or similar). Consider:\r\n\r\n&lt;!--  language: java --&gt;\r\n\r\n    Map&lt;Class,Runnable&gt; doByClass = new HashMap&lt;&gt;();\r\n    doByClass.put(Foo.class, () -&gt; doAClosure(this));\r\n    doByClass.put(Bar.class, this::doBMethod);\r\n    doByClass.put(Baz.class, new MyCRunnable());\r\n\r\n    // of course, refactor this to only initialize once\r\n    \r\n    doByClass.get(getClass()).run();\r\n\r\nIf you need checked exceptions than implement a `FunctionalInterface` that throws the `Exception` and use that instead of `Runnable`.\r\n\r\n---\r\n\r\nHere&#39;s a real-word before-and-after showing how this approach can simplify code.\r\n\r\nThe code before refactoring to a map:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    private Object unmarshall(\r\n      final Property&lt;?&gt; property, final Object configValue ) {\r\n      final Object result;\r\n      final String value = configValue.toString();\r\n    \r\n      if( property instanceof SimpleDoubleProperty ) {\r\n        result = Double.parseDouble( value );\r\n      }\r\n      else if( property instanceof SimpleFloatProperty ) {\r\n        result = Float.parseFloat( value );\r\n      }\r\n      else if( property instanceof SimpleBooleanProperty ) {\r\n        result = Boolean.parseBoolean( value );\r\n      }\r\n      else if( property instanceof SimpleFileProperty ) {\r\n        result = new File( value );\r\n      }\r\n      else {\r\n        result = value;\r\n      }\r\n    \r\n      return result;\r\n    }\r\n\r\nThe code after refactoring to a map:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    private final Map&lt;Class&lt;?&gt;, Function&lt;String, Object&gt;&gt; UNMARSHALL = \r\n    Map.of(\r\n      SimpleBooleanProperty.class, Boolean::parseBoolean,\r\n      SimpleDoubleProperty.class, Double::parseDouble,\r\n      SimpleFloatProperty.class, Float::parseFloat,\r\n      SimpleFileProperty.class, File::new\r\n    );\r\n    \r\n    private Object unmarshall(\r\n      final Property&lt;?&gt; property, final Object configValue ) {\r\n      return UNMARSHALL\r\n        .getOrDefault( property.getClass(), ( v ) -&gt; v )\r\n        .apply( configValue.toString() );\r\n    }\r\n\r\nThis avoids repetition, eliminates nearly all branching statements, and simplifies maintenance.\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Create a <code>Map</code> where the key is <code>Class&lt;?&gt;</code> and the value is an expression (lambda or similar). Consider:</p>\n\n<pre><code>Map&lt;Class,Runnable&gt; doByClass = new HashMap&lt;&gt;();\ndoByClass.put(Foo.class, () -&gt; doAClosure(this));\ndoByClass.put(Bar.class, this::doBMethod);\ndoByClass.put(Baz.class, new MyCRunnable());\n\n// of course, refactor this to only initialize once\n\ndoByClass.get(getClass()).run();\n</code></pre>\n<p>If you need checked exceptions than implement a <code>FunctionalInterface</code> that throws the <code>Exception</code> and use that instead of <code>Runnable</code>.</p>\n<hr />\n<p>Here's a real-word before-and-after showing how this approach can simplify code.</p>\n<p>The code before refactoring to a map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Object unmarshall(\n  final Property&lt;?&gt; property, final Object configValue ) {\n  final Object result;\n  final String value = configValue.toString();\n\n  if( property instanceof SimpleDoubleProperty ) {\n    result = Double.parseDouble( value );\n  }\n  else if( property instanceof SimpleFloatProperty ) {\n    result = Float.parseFloat( value );\n  }\n  else if( property instanceof SimpleBooleanProperty ) {\n    result = Boolean.parseBoolean( value );\n  }\n  else if( property instanceof SimpleFileProperty ) {\n    result = new File( value );\n  }\n  else {\n    result = value;\n  }\n\n  return result;\n}\n</code></pre>\n<p>The code after refactoring to a map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final Map&lt;Class&lt;?&gt;, Function&lt;String, Object&gt;&gt; UNMARSHALL = \nMap.of(\n  SimpleBooleanProperty.class, Boolean::parseBoolean,\n  SimpleDoubleProperty.class, Double::parseDouble,\n  SimpleFloatProperty.class, Float::parseFloat,\n  SimpleFileProperty.class, File::new\n);\n\nprivate Object unmarshall(\n  final Property&lt;?&gt; property, final Object configValue ) {\n  return UNMARSHALL\n    .getOrDefault( property.getClass(), ( v ) -&gt; v )\n    .apply( configValue.toString() );\n}\n</code></pre>\n<p>This avoids repetition, eliminates nearly all branching statements, and simplifies maintenance.</p>\n"},{"comments":[{"owner":{"account_id":536937,"reputation":4501,"user_id":905686,"accept_rate":59,"display_name":"user905686"},"score":0,"creation_date":1530449500,"post_id":43135351,"comment_id":89231954,"body_markdown":"Instead of using String for the `TYPE`, you can use an enum and uniqueness is guaranteed (as done in [this answer](https://stackoverflow.com/a/19252352/905686)). However, with any of the approaches you will have to refactor in two places when you do a rename.","body":"Instead of using String for the <code>TYPE</code>, you can use an enum and uniqueness is guaranteed (as done in <a href=\"https://stackoverflow.com/a/19252352/905686\">this answer</a>). However, with any of the approaches you will have to refactor in two places when you do a rename."},{"owner":{"account_id":2374648,"reputation":619,"user_id":2078368,"display_name":"Sergey Krivenkov"},"score":0,"creation_date":1530545007,"post_id":43135351,"comment_id":89262725,"body_markdown":"@user905686 rename of what? In current example the type &quot;A&quot; is defined inside the Something class to minimize quantity of code. But in real life you obviously should define it outside (in some common place) and there are no any problem with further refactoring.","body":"@user905686 rename of what? In current example the type &quot;A&quot; is defined inside the Something class to minimize quantity of code. But in real life you obviously should define it outside (in some common place) and there are no any problem with further refactoring."},{"owner":{"account_id":536937,"reputation":4501,"user_id":905686,"accept_rate":59,"display_name":"user905686"},"score":0,"creation_date":1530719528,"post_id":43135351,"comment_id":89337342,"body_markdown":"I mean renaming the class A. Automatic refactoring might not include the variable `TYPE = &quot;A&quot;` when renaming. Especially if it is outside the corresponding class, one might also forget it when doing it manually. IntelliJ actually also finds the occurrences of the class name in strings or comments but that&#39;s just a text search (instead of looking at the syntax tree) and thus includes false positives.","body":"I mean renaming the class A. Automatic refactoring might not include the variable <code>TYPE = &quot;A&quot;</code> when renaming. Especially if it is outside the corresponding class, one might also forget it when doing it manually. IntelliJ actually also finds the occurrences of the class name in strings or comments but that&#39;s just a text search (instead of looking at the syntax tree) and thus includes false positives."},{"owner":{"account_id":2374648,"reputation":619,"user_id":2078368,"display_name":"Sergey Krivenkov"},"score":0,"creation_date":1531064932,"post_id":43135351,"comment_id":89446341,"body_markdown":"@user905686 it&#39;s just an example, to visualize the idea. Do not use String for type definitions in real project, declare some MyTypes class holder with integer constants (or enum) and use them in the classes implementing ClassTypeInterface.","body":"@user905686 it&#39;s just an example, to visualize the idea. Do not use String for type definitions in real project, declare some MyTypes class holder with integer constants (or enum) and use them in the classes implementing ClassTypeInterface."}],"tags":[],"owner":{"account_id":2374648,"reputation":619,"user_id":2078368,"display_name":"Sergey Krivenkov"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1490946588,"creation_date":1490946588,"answer_id":43135351,"question_id":5579309,"body_markdown":"If you need to &quot;switch&quot; thru the class type of &quot;this&quot; object, this answer is the best https://stackoverflow.com/a/5579385/2078368\r\n\r\nBut if you need to apply &quot;switch&quot; to any other variable. I would suggest another solution. Define following interface:\r\n\r\n    public interface ClassTypeInterface {\r\n        public String getType();\r\n    }\r\n\r\nImplement this interface in every class you want to &quot;switch&quot;. Example:\r\n\r\n    public class A extends Something implements ClassTypeInterface {\r\n    \r\n        public final static String TYPE = &quot;A&quot;;\r\n    \r\n        @Override\r\n        public String getType() {\r\n            return TYPE;\r\n        }\r\n    }\r\n\r\nAfter that you can use it in following way:\r\n\r\n    switch (var.getType()) {\r\n        case A.TYPE: {\r\n            break;\r\n        }\r\n        case B.TYPE: {\r\n            break;\r\n        }\r\n        ...\r\n    }\r\n\r\nThe only thing you should care about - keep the &quot;types&quot; unique across all the classes implementing the ClassTypeInterface. It&#39;s not a big problem, because in case of any intersection you receive a compile-time error for the &quot;switch-case&quot; statement.\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>If you need to \"switch\" thru the class type of \"this\" object, this answer is the best <a href=\"https://stackoverflow.com/a/5579385/2078368\">https://stackoverflow.com/a/5579385/2078368</a></p>\n\n<p>But if you need to apply \"switch\" to any other variable. I would suggest another solution. Define following interface:</p>\n\n<pre><code>public interface ClassTypeInterface {\n    public String getType();\n}\n</code></pre>\n\n<p>Implement this interface in every class you want to \"switch\". Example:</p>\n\n<pre><code>public class A extends Something implements ClassTypeInterface {\n\n    public final static String TYPE = \"A\";\n\n    @Override\n    public String getType() {\n        return TYPE;\n    }\n}\n</code></pre>\n\n<p>After that you can use it in following way:</p>\n\n<pre><code>switch (var.getType()) {\n    case A.TYPE: {\n        break;\n    }\n    case B.TYPE: {\n        break;\n    }\n    ...\n}\n</code></pre>\n\n<p>The only thing you should care about - keep the \"types\" unique across all the classes implementing the ClassTypeInterface. It's not a big problem, because in case of any intersection you receive a compile-time error for the \"switch-case\" statement.</p>\n"},{"comments":[{"owner":{"account_id":2226874,"reputation":759,"user_id":1965404,"display_name":"typeracer"},"score":0,"creation_date":1571898782,"post_id":44759944,"comment_id":103393639,"body_markdown":"How is this any better than the `if`... `else if` code given by the OP?","body":"How is this any better than the <code>if</code>... <code>else if</code> code given by the OP?"},{"owner":{"account_id":2226874,"reputation":759,"user_id":1965404,"display_name":"typeracer"},"score":0,"creation_date":1571899527,"post_id":44759944,"comment_id":103393961,"body_markdown":"Just to elaborate on my previous comment: what you&#39;re proposing is essentially to replace `if`... `else if` with &quot;goto&quot; statements, which is the *wrong* way to implement control flow in languages like Java.","body":"Just to elaborate on my previous comment: what you&#39;re proposing is essentially to replace <code>if</code>... <code>else if</code> with &quot;goto&quot; statements, which is the <i>wrong</i> way to implement control flow in languages like Java."}],"tags":[],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1498480719,"creation_date":1498480719,"answer_id":44759944,"question_id":5579309,"body_markdown":"there is an even simpler way of emulating a switch structure that uses instanceof, you do this by creating a code block in your method and naming it with a label. Then you use if structures to emulate the case statements. If a case is true then you use the break LABEL_NAME to get out of your makeshift switch structure.\r\n\r\n            DEFINE_TYPE:\r\n            {\r\n                if (a instanceof x){\r\n                    //do something\r\n                    break DEFINE_TYPE;\r\n                }\r\n                if (a instanceof y){\r\n                   //do something\r\n                    break DEFINE_TYPE;\r\n                }\r\n                if (a instanceof z){\r\n                    // do something\r\n                    break DEFINE_TYPE;\r\n                }\r\n            }","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>there is an even simpler way of emulating a switch structure that uses instanceof, you do this by creating a code block in your method and naming it with a label. Then you use if structures to emulate the case statements. If a case is true then you use the break LABEL_NAME to get out of your makeshift switch structure.</p>\n\n<pre><code>        DEFINE_TYPE:\n        {\n            if (a instanceof x){\n                //do something\n                break DEFINE_TYPE;\n            }\n            if (a instanceof y){\n               //do something\n                break DEFINE_TYPE;\n            }\n            if (a instanceof z){\n                // do something\n                break DEFINE_TYPE;\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1920832,"reputation":811,"user_id":1732392,"display_name":"Feiteira"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1619685557,"creation_date":1510589244,"answer_id":47268628,"question_id":5579309,"body_markdown":"I personally like the following Java 1.8 code:\r\n\r\n        mySwitch(&quot;YY&quot;)\r\n                .myCase(&quot;AA&quot;, (o) -&gt; {\r\n                    System.out.println(o+&quot;aa&quot;);\r\n                })\r\n                .myCase(&quot;BB&quot;, (o) -&gt; {\r\n                    System.out.println(o+&quot;bb&quot;);\r\n                })\r\n                .myCase(&quot;YY&quot;, (o) -&gt; {\r\n                    System.out.println(o+&quot;yy&quot;);\r\n                })\r\n                .myCase(&quot;ZZ&quot;, (o) -&gt; {\r\n                    System.out.println(o+&quot;zz&quot;);\r\n                });\r\n\r\nWill output:\r\n\r\n    YYyy\r\n\r\nThe sample code uses Strings but you can use any object type, including Class. e.g. `.myCase(this.getClass(), (o) -&gt; ...`\r\n\r\nNeeds the following snippet:\r\n\r\n    public Case mySwitch(Object reference) {\r\n        return new Case(reference);\r\n    }\r\n\r\n    public class Case {\r\n\r\n        private Object reference;\r\n\r\n        public Case(Object reference) {\r\n            this.reference = reference;\r\n        }\r\n\r\n        public Case myCase(Object b, OnMatchDo task) {\r\n            if (reference.equals(b)) {\r\n                task.task(reference);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n\r\n    public interface OnMatchDo {\r\n        public void task(Object o);\r\n    }\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I personally like the following Java 1.8 code:</p>\n<pre><code>    mySwitch(&quot;YY&quot;)\n            .myCase(&quot;AA&quot;, (o) -&gt; {\n                System.out.println(o+&quot;aa&quot;);\n            })\n            .myCase(&quot;BB&quot;, (o) -&gt; {\n                System.out.println(o+&quot;bb&quot;);\n            })\n            .myCase(&quot;YY&quot;, (o) -&gt; {\n                System.out.println(o+&quot;yy&quot;);\n            })\n            .myCase(&quot;ZZ&quot;, (o) -&gt; {\n                System.out.println(o+&quot;zz&quot;);\n            });\n</code></pre>\n<p>Will output:</p>\n<pre><code>YYyy\n</code></pre>\n<p>The sample code uses Strings but you can use any object type, including Class. e.g. <code>.myCase(this.getClass(), (o) -&gt; ...</code></p>\n<p>Needs the following snippet:</p>\n<pre><code>public Case mySwitch(Object reference) {\n    return new Case(reference);\n}\n\npublic class Case {\n\n    private Object reference;\n\n    public Case(Object reference) {\n        this.reference = reference;\n    }\n\n    public Case myCase(Object b, OnMatchDo task) {\n        if (reference.equals(b)) {\n            task.task(reference);\n        }\n        return this;\n    }\n}\n\npublic interface OnMatchDo {\n    public void task(Object o);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1460117,"reputation":133,"user_id":1374669,"display_name":"lifesoordinary"},"score":4,"creation_date":1556202319,"post_id":50836481,"comment_id":98364995,"body_markdown":"This is not the same as doing an instanceof, as this only works if the implementation class is used to switch, but it will not work for interfaces/abstractclass/superclasses","body":"This is not the same as doing an instanceof, as this only works if the implementation class is used to switch, but it will not work for interfaces/abstractclass/superclasses"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1556266641,"post_id":50836481,"comment_id":98387257,"body_markdown":"yeah, this is not","body":"yeah, this is not"},{"owner":{"account_id":3433779,"reputation":1113,"user_id":2877358,"accept_rate":82,"display_name":"Rik Schaaf"},"score":1,"creation_date":1589727549,"post_id":50836481,"comment_id":109402089,"body_markdown":"A for effort, but aside from @lifesoordinary&#39;s comment, you also miss the typesafety that you normally have, because this answer uses hardcoded strings, instead of class references. It is quite easy to make a typo, especially if you&#39;d need to extend this functionality with full canonical names if here was any overlap in class names with different package names.Edit: fixed typo (which kinda proves my point)","body":"A for effort, but aside from @lifesoordinary&#39;s comment, you also miss the typesafety that you normally have, because this answer uses hardcoded strings, instead of class references. It is quite easy to make a typo, especially if you&#39;d need to extend this functionality with full canonical names if here was any overlap in class names with different package names.Edit: fixed typo (which kinda proves my point)"},{"owner":{"account_id":17365023,"reputation":769,"user_id":12580403,"display_name":"joshpetit"},"score":0,"creation_date":1607018620,"post_id":50836481,"comment_id":115147552,"body_markdown":"@RikSchaaf in addition to losing type safety you also lose the possibility of using subclass implementations in the switch. I&#39;d say that this should be avoided.","body":"@RikSchaaf in addition to losing type safety you also lose the possibility of using subclass implementations in the switch. I&#39;d say that this should be avoided."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1607603456,"post_id":50836481,"comment_id":115327878,"body_markdown":"I&#39;d say instanceof should be avoided in many [cases](https://stackoverflow.com/questions/596462/any-reason-to-prefer-getclass-over-instanceof-when-generating-equals)","body":"I&#39;d say instanceof should be avoided in many <a href=\"https://stackoverflow.com/questions/596462/any-reason-to-prefer-getclass-over-instanceof-when-generating-equals\">cases</a>"},{"owner":{"account_id":3433779,"reputation":1113,"user_id":2877358,"accept_rate":82,"display_name":"Rik Schaaf"},"score":0,"creation_date":1612957973,"post_id":50836481,"comment_id":116926973,"body_markdown":"@Mike agreed for the case of `equals()` implementations, to keep it symmetric. Also in a lot of cases you can rewrite your code to use polymorphism, instead of `instanceof`. There are still some valid use cases though.","body":"@Mike agreed for the case of <code>equals()</code> implementations, to keep it symmetric. Also in a lot of cases you can rewrite your code to use polymorphism, instead of <code>instanceof</code>. There are still some valid use cases though."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1612993533,"post_id":50836481,"comment_id":116942970,"body_markdown":"@RikSchaaf, your typo will be revealed by a test, you write unit tests, don&#39;t you? Also if you can rewrite you case with polymorphism, then it was &#39;polymorphism case&#39;, which has nothing to do with the question asked. Open `java.awt.Component#process...` methods and show me where you can put your polymorphism there. I personally used hash maps for similar cases, but the question was asked about switch, and I believe there could be performance reasons for that, because even hash map is fast, switch is [faster](https://stackoverflow.com/questions/27993819/hashmap-vs-switch-statement-performance)","body":"@RikSchaaf, your typo will be revealed by a test, you write unit tests, don&#39;t you? Also if you can rewrite you case with polymorphism, then it was &#39;polymorphism case&#39;, which has nothing to do with the question asked. Open <code>java.awt.Component#process...</code> methods and show me where you can put your polymorphism there. I personally used hash maps for similar cases, but the question was asked about switch, and I believe there could be performance reasons for that, because even hash map is fast, switch is <a href=\"https://stackoverflow.com/questions/27993819/hashmap-vs-switch-statement-performance\">faster</a>"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1612994566,"post_id":50836481,"comment_id":116943319,"body_markdown":"Enum.valueOf seems to be much [worse](https://medium.com/javarevisited/micro-optimizations-in-java-good-nice-and-slow-enum-261e6f77bd2e) from performance point of view and should not be mentioned inline with `switch` and `HashMap`","body":"Enum.valueOf seems to be much <a href=\"https://medium.com/javarevisited/micro-optimizations-in-java-good-nice-and-slow-enum-261e6f77bd2e\" rel=\"nofollow noreferrer\">worse</a> from performance point of view and should not be mentioned inline with <code>switch</code> and <code>HashMap</code>"}],"tags":[],"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":8,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1613643992,"creation_date":1528890465,"answer_id":50836481,"question_id":5579309,"body_markdown":"java 7+\r\n\r\n    public &lt;T&gt; T process(Object model) {\r\n        switch (model.getClass().getSimpleName()) {\r\n        case &quot;Trade&quot;:\r\n            return processTrade((Trade) model);\r\n        case &quot;InsuranceTransaction&quot;:\r\n            return processInsuranceTransaction((InsuranceTransaction) model);\r\n        case &quot;CashTransaction&quot;:\r\n            return processCashTransaction((CashTransaction) model);\r\n        case &quot;CardTransaction&quot;:\r\n            return processCardTransaction((CardTransaction) model);\r\n        case &quot;TransferTransaction&quot;:\r\n            return processTransferTransaction((TransferTransaction) model);\r\n        case &quot;ClientAccount&quot;:\r\n            return processAccount((ClientAccount) model);\r\n        ...\r\n        default:\r\n            throw new IllegalArgumentException(model.getClass().getSimpleName());\r\n        }\r\n    }\r\n\r\n---\r\nYou can be even faster by for omitting string manipulation inside `getSimpleName` by for introducing constants and using full class name:\r\n\r\n    public static final TRADE = Trade.class.getName();\r\n    ...\r\n    switch (model.getClass().getName()) {\r\n    case TRADE:","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>java 7+</p>\n<pre><code>public &lt;T&gt; T process(Object model) {\n    switch (model.getClass().getSimpleName()) {\n    case &quot;Trade&quot;:\n        return processTrade((Trade) model);\n    case &quot;InsuranceTransaction&quot;:\n        return processInsuranceTransaction((InsuranceTransaction) model);\n    case &quot;CashTransaction&quot;:\n        return processCashTransaction((CashTransaction) model);\n    case &quot;CardTransaction&quot;:\n        return processCardTransaction((CardTransaction) model);\n    case &quot;TransferTransaction&quot;:\n        return processTransferTransaction((TransferTransaction) model);\n    case &quot;ClientAccount&quot;:\n        return processAccount((ClientAccount) model);\n    ...\n    default:\n        throw new IllegalArgumentException(model.getClass().getSimpleName());\n    }\n}\n</code></pre>\n<hr />\n<p>You can be even faster by for omitting string manipulation inside <code>getSimpleName</code> by for introducing constants and using full class name:</p>\n<pre><code>public static final TRADE = Trade.class.getName();\n...\nswitch (model.getClass().getName()) {\ncase TRADE:\n</code></pre>\n"},{"comments":[{"owner":{"account_id":536937,"reputation":4501,"user_id":905686,"accept_rate":59,"display_name":"user905686"},"score":3,"creation_date":1530449836,"post_id":51055018,"comment_id":89232044,"body_markdown":"In contrast to [this approach](https://stackoverflow.com/a/19252352/905686) where the coupling between enum constants and classes is done explicitly, you do the coupling implicitly by class name. This will break your code when you rename only one of the enum constant or the class whereas the other approach would still work.","body":"In contrast to <a href=\"https://stackoverflow.com/a/19252352/905686\">this approach</a> where the coupling between enum constants and classes is done explicitly, you do the coupling implicitly by class name. This will break your code when you rename only one of the enum constant or the class whereas the other approach would still work."}],"tags":[],"owner":{"account_id":3233258,"reputation":560,"user_id":2728007,"display_name":"Siva Kumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530076890,"creation_date":1530076890,"answer_id":51055018,"question_id":5579309,"body_markdown":"Create an **Enum** with Class names.\r\n\r\n    public enum ClassNameEnum {\r\n        A, B, C\r\n    }\r\n\r\nFind the *Class name* of the object.\r\nWrite a **switch** case over the enum.\r\n\r\n    private void switchByClassType(Object obj) {\r\n    \r\n            ClassNameEnum className = ClassNameEnum.valueOf(obj.getClass().getSimpleName());\r\n    \r\n            switch (className) {\r\n                case A:\r\n                    doA();\r\n                    break;\r\n                case B:\r\n                    doB();\r\n                    break;\r\n                case C:\r\n                    doC();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\nHope this helps.","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Create an <strong>Enum</strong> with Class names.</p>\n\n<pre><code>public enum ClassNameEnum {\n    A, B, C\n}\n</code></pre>\n\n<p>Find the <em>Class name</em> of the object.\nWrite a <strong>switch</strong> case over the enum.</p>\n\n<pre><code>private void switchByClassType(Object obj) {\n\n        ClassNameEnum className = ClassNameEnum.valueOf(obj.getClass().getSimpleName());\n\n        switch (className) {\n            case A:\n                doA();\n                break;\n            case B:\n                doB();\n                break;\n            case C:\n                doC();\n                break;\n        }\n    }\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":2234801,"reputation":1443,"user_id":1971503,"accept_rate":57,"display_name":"Viswanath"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531989019,"creation_date":1531989019,"answer_id":51417880,"question_id":5579309,"body_markdown":"Here&#39;s a functional way of accomplishing it in Java 8 using http://www.vavr.io/\r\n\r\n\r\n    import static io.vavr.API.*;\r\n    import static io.vavr.Predicates.instanceOf;\r\n    public Throwable liftRootCause(final Throwable throwable) {\r\n            return Match(throwable).of(\r\n                    Case($(instanceOf(CompletionException.class)), Throwable::getCause),\r\n                    Case($(instanceOf(ExecutionException.class)), Throwable::getCause),\r\n                    Case($(), th -&gt; th)\r\n            );\r\n        }","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Here's a functional way of accomplishing it in Java 8 using <a href=\"http://www.vavr.io/\" rel=\"nofollow noreferrer\">http://www.vavr.io/</a></p>\n\n<pre><code>import static io.vavr.API.*;\nimport static io.vavr.Predicates.instanceOf;\npublic Throwable liftRootCause(final Throwable throwable) {\n        return Match(throwable).of(\n                Case($(instanceOf(CompletionException.class)), Throwable::getCause),\n                Case($(instanceOf(ExecutionException.class)), Throwable::getCause),\n                Case($(), th -&gt; th)\n        );\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4746727,"reputation":707,"user_id":3837873,"accept_rate":100,"display_name":"Arcanefoam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551976983,"creation_date":1551976983,"answer_id":55048871,"question_id":5579309,"body_markdown":"The Eclipse Modelling Framework has an interesting idea that also considers inheritance. The basic concept is defined in the Switch [interface][1]: switching is done by invoking the *doSwitch* method.\r\n\r\nWhat is really interesting is the implementation. For each type of interest, a\r\n\r\n    public T caseXXXX(XXXX object);\r\n\r\nmethod must be implemented (with a default implementation returning null). The *doSwitch* implementation will attempt to call al the *caseXXX* methods on the object for all its type hierarchy. Something in the lines of:\r\n\r\n    BaseType baseType = (BaseType)object;\r\n    T result = caseBaseType(eAttribute);\r\n    if (result == null) result = caseSuperType1(baseType);\r\n    if (result == null) result = caseSuperType2(baseType);\r\n    if (result == null) result = caseSuperType3(baseType);\r\n    if (result == null) result = caseSuperType4(baseType);\r\n    if (result == null) result = defaultCase(object);\r\n    return result;\r\n\r\nThe actual framework uses an integer id for each class, so the logic is actually a pure switch:\r\n\r\n    public T doSwitch(Object object) {\r\n        return doSwitch(object.class(), eObject);\r\n    }\r\n    \r\n    protected T doSwitch(Class clazz, Object object) {\r\n        return doSwitch(getClassifierID(clazz), object);\r\n    }\r\n    \r\n    protected T doSwitch(int classifierID, Object theObject) {\r\n        switch (classifierID) {\r\n        case MyClasses.BASETYPE:\r\n        {\r\n          BaseType baseType = (BaseType)object;\r\n          ...\r\n          return result;\r\n        }\r\n        case MyClasses.TYPE1:\r\n        {\r\n          ...\r\n        }\r\n      ...\r\n\r\nYou can look at a complete implementation of the [ECoreSwitch][2] to get a better idea.\r\n\r\n\r\n  [1]: https://download.eclipse.org/modeling/emf/emf/javadoc/2.9.0/org/eclipse/emf/ecore/util/Switch.html\r\n  [2]: https://github.com/eclipse/emf/blob/master/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/util/EcoreSwitch.java","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>The Eclipse Modelling Framework has an interesting idea that also considers inheritance. The basic concept is defined in the Switch <a href=\"https://download.eclipse.org/modeling/emf/emf/javadoc/2.9.0/org/eclipse/emf/ecore/util/Switch.html\" rel=\"nofollow noreferrer\">interface</a>: switching is done by invoking the <em>doSwitch</em> method.</p>\n\n<p>What is really interesting is the implementation. For each type of interest, a</p>\n\n<pre><code>public T caseXXXX(XXXX object);\n</code></pre>\n\n<p>method must be implemented (with a default implementation returning null). The <em>doSwitch</em> implementation will attempt to call al the <em>caseXXX</em> methods on the object for all its type hierarchy. Something in the lines of:</p>\n\n<pre><code>BaseType baseType = (BaseType)object;\nT result = caseBaseType(eAttribute);\nif (result == null) result = caseSuperType1(baseType);\nif (result == null) result = caseSuperType2(baseType);\nif (result == null) result = caseSuperType3(baseType);\nif (result == null) result = caseSuperType4(baseType);\nif (result == null) result = defaultCase(object);\nreturn result;\n</code></pre>\n\n<p>The actual framework uses an integer id for each class, so the logic is actually a pure switch:</p>\n\n<pre><code>public T doSwitch(Object object) {\n    return doSwitch(object.class(), eObject);\n}\n\nprotected T doSwitch(Class clazz, Object object) {\n    return doSwitch(getClassifierID(clazz), object);\n}\n\nprotected T doSwitch(int classifierID, Object theObject) {\n    switch (classifierID) {\n    case MyClasses.BASETYPE:\n    {\n      BaseType baseType = (BaseType)object;\n      ...\n      return result;\n    }\n    case MyClasses.TYPE1:\n    {\n      ...\n    }\n  ...\n</code></pre>\n\n<p>You can look at a complete implementation of the <a href=\"https://github.com/eclipse/emf/blob/master/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/util/EcoreSwitch.java\" rel=\"nofollow noreferrer\">ECoreSwitch</a> to get a better idea.</p>\n"},{"comments":[{"owner":{"account_id":3433779,"reputation":1113,"user_id":2877358,"accept_rate":82,"display_name":"Rik Schaaf"},"score":1,"creation_date":1589727258,"post_id":55380782,"comment_id":109401958,"body_markdown":"I believe that until JEP issue 8213076 is fully implemented, this is the cleanest way get a switch statement based on the type, without modifying the target class.","body":"I believe that until JEP issue 8213076 is fully implemented, this is the cleanest way get a switch statement based on the type, without modifying the target class."},{"owner":{"account_id":7970439,"reputation":2783,"user_id":6015339,"display_name":"Glains"},"score":0,"creation_date":1639132915,"post_id":55380782,"comment_id":124276145,"body_markdown":"Since the lookup `Map` is read-only and initialized by one thread only, a simple `HashMap` should be preferred from my point of view.","body":"Since the lookup <code>Map</code> is read-only and initialized by one thread only, a simple <code>HashMap</code> should be preferred from my point of view."}],"tags":[],"owner":{"account_id":5644665,"reputation":35951,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1574354611,"creation_date":1553700083,"answer_id":55380782,"question_id":5579309,"body_markdown":"Unfortunately, it is not possible out of the box since the switch-case statement expects a constant expression. To overcome this, one way would be to use enum values with the class names e.g.\r\n\r\n\r\n    public enum MyEnum {\r\n       A(A.class.getName()), \r\n       B(B.class.getName()),\r\n       C(C.class.getName());\r\n\r\n\tprivate String refClassname;\r\n\tprivate static final Map&lt;String, MyEnum&gt; ENUM_MAP;\r\n\r\n\tMyEnum (String refClassname) {\r\n\t\tthis.refClassname = refClassname;\r\n\t}\r\n\r\n\tstatic {\r\n\t\tMap&lt;String, MyEnum&gt; map = new ConcurrentHashMap&lt;String, MyEnum&gt;();\r\n\t\tfor (MyEnum instance : MyEnum.values()) {\r\n\t\t\tmap.put(instance.refClassname, instance);\r\n\t\t}\r\n\t\tENUM_MAP = Collections.unmodifiableMap(map);\r\n\t}\r\n\r\n\tpublic static MyEnum get(String name) {\r\n\t\treturn ENUM_MAP.get(name);\r\n\t }\r\n    }\r\n\r\nWith that is is possible to use the switch statement like this\r\n\r\n    MyEnum type = MyEnum.get(clazz.getName());\r\n    switch (type) {\r\n    case A:\r\n        ... // it&#39;s A class\r\n    case B:\r\n        ... // it&#39;s B class\r\n    case C:\r\n        ... // it&#39;s C class\r\n    }\r\n\r\n\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Unfortunately, it is not possible out of the box since the switch-case statement expects a constant expression. To overcome this, one way would be to use enum values with the class names e.g.</p>\n\n<pre><code>public enum MyEnum {\n   A(A.class.getName()), \n   B(B.class.getName()),\n   C(C.class.getName());\n\nprivate String refClassname;\nprivate static final Map&lt;String, MyEnum&gt; ENUM_MAP;\n\nMyEnum (String refClassname) {\n    this.refClassname = refClassname;\n}\n\nstatic {\n    Map&lt;String, MyEnum&gt; map = new ConcurrentHashMap&lt;String, MyEnum&gt;();\n    for (MyEnum instance : MyEnum.values()) {\n        map.put(instance.refClassname, instance);\n    }\n    ENUM_MAP = Collections.unmodifiableMap(map);\n}\n\npublic static MyEnum get(String name) {\n    return ENUM_MAP.get(name);\n }\n}\n</code></pre>\n\n<p>With that is is possible to use the switch statement like this</p>\n\n<pre><code>MyEnum type = MyEnum.get(clazz.getName());\nswitch (type) {\ncase A:\n    ... // it's A class\ncase B:\n    ... // it's B class\ncase C:\n    ... // it's C class\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2226874,"reputation":759,"user_id":1965404,"display_name":"typeracer"},"score":0,"creation_date":1571898500,"post_id":55695243,"comment_id":103393503,"body_markdown":"This looks a lot like the Visitor pattern, which was already discussed in this answer: https://stackoverflow.com/a/5579385","body":"This looks a lot like the Visitor pattern, which was already discussed in this answer: <a href=\"https://stackoverflow.com/a/5579385\">stackoverflow.com/a/5579385</a>"}],"tags":[],"owner":{"account_id":1231014,"reputation":594,"user_id":1195605,"display_name":"Ravi Sanwal"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555352901,"creation_date":1555352901,"answer_id":55695243,"question_id":5579309,"body_markdown":"While it is not possible to write a switch statement, it is possible to branch out to specific processing for each given type. One way of doing this is to use standard double dispatch mechanism. An example where we want to &quot;switch&quot; based on type is Jersey Exception mapper where we need to map multitude of exceptions to error responses. While for this specific case there is probably a better way (i.e. using a polymorphic method that translates each exception to an error response), using double dispatch mechanism is still useful and practical.\r\n\r\n    interface Processable {\r\n        &lt;R&gt; R process(final Processor&lt;R&gt; processor);\r\n    }\r\n    \r\n    interface Processor&lt;R&gt; {\r\n        R process(final A a);\r\n        R process(final B b);\r\n        R process(final C c);\r\n        // for each type of Processable\r\n        ...\r\n    }\r\n    \r\n    class A implements Processable {\r\n        // other class logic here\r\n    \r\n        &lt;R&gt; R process(final Processor&lt;R&gt; processor){\r\n            return processor.process(this);\r\n        }\r\n    }\r\n    \r\n    class B implements Processable {\r\n        // other class logic here\r\n    \r\n        &lt;R&gt; R process(final Processor&lt;R&gt; processor){\r\n            return processor.process(this);\r\n        }\r\n    }\r\n    \r\n    class C implements Processable {\r\n        // other class logic here\r\n    \r\n        &lt;R&gt; R process(final Processor&lt;R&gt; processor){\r\n            return processor.process(this);\r\n        }\r\n    }\r\n\r\nThen where ever the &quot;switch&quot; is needed, you can do it as follows:\r\n\r\n    public class LogProcessor implements Processor&lt;String&gt; {\r\n        private static final Logger log = Logger.for(LogProcessor.class);\r\n    \r\n        public void logIt(final Processable base) {\r\n            log.info(&quot;Logging for type {}&quot;, process(base));\r\n        }\r\n    \r\n        // Processor methods, these are basically the effective &quot;case&quot; statements\r\n        String process(final A a) {\r\n            return &quot;Stringifying A&quot;;\r\n        }\r\n    \r\n        String process(final B b) {\r\n            return &quot;Stringifying B&quot;;\r\n        }\r\n    \r\n        String process(final C c) {\r\n            return &quot;Stringifying C&quot;;\r\n        }\r\n    }\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>While it is not possible to write a switch statement, it is possible to branch out to specific processing for each given type. One way of doing this is to use standard double dispatch mechanism. An example where we want to \"switch\" based on type is Jersey Exception mapper where we need to map multitude of exceptions to error responses. While for this specific case there is probably a better way (i.e. using a polymorphic method that translates each exception to an error response), using double dispatch mechanism is still useful and practical.</p>\n\n<pre><code>interface Processable {\n    &lt;R&gt; R process(final Processor&lt;R&gt; processor);\n}\n\ninterface Processor&lt;R&gt; {\n    R process(final A a);\n    R process(final B b);\n    R process(final C c);\n    // for each type of Processable\n    ...\n}\n\nclass A implements Processable {\n    // other class logic here\n\n    &lt;R&gt; R process(final Processor&lt;R&gt; processor){\n        return processor.process(this);\n    }\n}\n\nclass B implements Processable {\n    // other class logic here\n\n    &lt;R&gt; R process(final Processor&lt;R&gt; processor){\n        return processor.process(this);\n    }\n}\n\nclass C implements Processable {\n    // other class logic here\n\n    &lt;R&gt; R process(final Processor&lt;R&gt; processor){\n        return processor.process(this);\n    }\n}\n</code></pre>\n\n<p>Then where ever the \"switch\" is needed, you can do it as follows:</p>\n\n<pre><code>public class LogProcessor implements Processor&lt;String&gt; {\n    private static final Logger log = Logger.for(LogProcessor.class);\n\n    public void logIt(final Processable base) {\n        log.info(\"Logging for type {}\", process(base));\n    }\n\n    // Processor methods, these are basically the effective \"case\" statements\n    String process(final A a) {\n        return \"Stringifying A\";\n    }\n\n    String process(final B b) {\n        return \"Stringifying B\";\n    }\n\n    String process(final C c) {\n        return \"Stringifying C\";\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":141852,"reputation":4322,"user_id":349169,"accept_rate":78,"display_name":"Chris"},"score":2,"creation_date":1659165408,"post_id":57432241,"comment_id":129232525,"body_markdown":"@olidev consider making this the (new) accepted answer.","body":"@olidev consider making this the (new) accepted answer."},{"owner":{"account_id":378670,"reputation":3959,"user_id":731548,"accept_rate":33,"display_name":"cquezel"},"score":12,"creation_date":1660585366,"post_id":57432241,"comment_id":129562162,"body_markdown":"This is only in preview mode for Java 17.","body":"This is only in preview mode for Java 17."},{"owner":{"account_id":378670,"reputation":3959,"user_id":731548,"accept_rate":33,"display_name":"cquezel"},"score":4,"creation_date":1660681155,"post_id":57432241,"comment_id":129588737,"body_markdown":"@A_Arnold &quot;This is a preview feature, which is a feature whose design, specification, and implementation are complete, but is not permanent, which means that the feature may exist in a different form or not at all in future Java SE releases.&quot; ref: https://docs.oracle.com/en/java/javase/17/language/pattern-matching-switch-expressions-and-statements.html","body":"@A_Arnold &quot;This is a preview feature, which is a feature whose design, specification, and implementation are complete, but is not permanent, which means that the feature may exist in a different form or not at all in future Java SE releases.&quot; ref: <a href=\"https://docs.oracle.com/en/java/javase/17/language/pattern-matching-switch-expressions-and-statements.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/language/&hellip;</a>"},{"owner":{"account_id":63785,"reputation":2712,"user_id":188626,"accept_rate":89,"display_name":"Michael"},"score":3,"creation_date":1669749607,"post_id":57432241,"comment_id":131712428,"body_markdown":"This is a preview only feature in Java 17 whose syntax may change and has to be turned on with a VM parameter.","body":"This is a preview only feature in Java 17 whose syntax may change and has to be turned on with a VM parameter."}],"tags":[],"owner":{"account_id":6528461,"reputation":3279,"user_id":5050431,"accept_rate":60,"display_name":"A_Arnold"},"comment_count":4,"down_vote_count":1,"up_vote_count":77,"is_accepted":false,"score":76,"last_activity_date":1677008053,"creation_date":1565361151,"answer_id":57432241,"question_id":5579309,"body_markdown":"Java now allows you to switch in the manner of the OP. They call it [Pattern Matching][1] for switch. It was released as a preview feature of Java 17. The example given in the JEP is \r\n\r\n```java\r\n    String formatted;\r\nswitch (obj) {\r\n    case Integer i : formatted = String.format ( &quot;int %d&quot;, i); break;\r\n    case Byte b : formatted = String.format ( &quot;byte %d&quot;, b); break;\r\n    case Long l : formatted = String.format ( &quot;long %d&quot;, l); break;\r\n    case Double d : formatted = String.format ( &quot;double %f&quot;, d); break;\r\n    case String s : formatted = String.format ( &quot;String %s&quot;, s); break\r\n    default: formatted = obj.toString();\r\n}  \r\n```\r\n\r\nor using their lambda syntax and returning a value \r\n\r\n```java\r\nString formatted = switch (obj) {\r\n                      case Integer i -&gt; String.format ( &quot;int %d&quot;, i )\r\n                      case Byte b -&gt; String.format ( &quot;byte %d&quot;, b );\r\n                      case Long l -&gt; String.format ( &quot;long %d&quot;, l );\r\n                      case Double d -&gt; String.format ( &quot;double %f&quot;, d );\r\n                      case String s -&gt; String.format ( &quot;String %s&quot;, s );\r\n                      default -&gt; obj.toString();\r\n                   };\r\n```\r\neither way they&#39;ve been doing cool stuff with switches. \r\n  \r\n\r\n\r\n  [1]: https://openjdk.org/jeps/406","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Java now allows you to switch in the manner of the OP. They call it <a href=\"https://openjdk.org/jeps/406\" rel=\"noreferrer\">Pattern Matching</a> for switch. It was released as a preview feature of Java 17. The example given in the JEP is</p>\n<pre class=\"lang-java prettyprint-override\"><code>    String formatted;\nswitch (obj) {\n    case Integer i : formatted = String.format ( &quot;int %d&quot;, i); break;\n    case Byte b : formatted = String.format ( &quot;byte %d&quot;, b); break;\n    case Long l : formatted = String.format ( &quot;long %d&quot;, l); break;\n    case Double d : formatted = String.format ( &quot;double %f&quot;, d); break;\n    case String s : formatted = String.format ( &quot;String %s&quot;, s); break\n    default: formatted = obj.toString();\n}  \n</code></pre>\n<p>or using their lambda syntax and returning a value</p>\n<pre class=\"lang-java prettyprint-override\"><code>String formatted = switch (obj) {\n                      case Integer i -&gt; String.format ( &quot;int %d&quot;, i )\n                      case Byte b -&gt; String.format ( &quot;byte %d&quot;, b );\n                      case Long l -&gt; String.format ( &quot;long %d&quot;, l );\n                      case Double d -&gt; String.format ( &quot;double %f&quot;, d );\n                      case String s -&gt; String.format ( &quot;String %s&quot;, s );\n                      default -&gt; obj.toString();\n                   };\n</code></pre>\n<p>either way they've been doing cool stuff with switches.</p>\n"},{"tags":[],"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"comment_count":0,"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1635758168,"creation_date":1594057884,"answer_id":62761706,"question_id":5579309,"body_markdown":"If you want to avoid the verbosity of `if(){} else if{}`, you may consider switching this single file to [kotlin](https://en.wikipedia.org/wiki/Kotlin_(programming_language)) and use the switch-like [when expression](https://kotlinlang.org/docs/reference/control-flow.html#when-expression) in combination with `is` operator. \r\n\r\nIn any case [Kotlin and java files can co-exist in a project](https://kotlinlang.org/docs/reference/using-maven.html#compiling-kotlin-and-java-sources) and result in a jar that can run in JVM.\r\n\r\n```kotlin\r\nwhen (this) { //switch-like statement in kotlin supporting class-pattern-matching and smart casts via `is` operator.\r\n    is A -&gt; doA()\r\n    is B -&gt; doB()\r\n    is C -&gt; doC()\r\n}\r\n```","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>If you want to avoid the verbosity of <code>if(){} else if{}</code>, you may consider switching this single file to <a href=\"https://en.wikipedia.org/wiki/Kotlin_(programming_language)\" rel=\"nofollow noreferrer\">kotlin</a> and use the switch-like <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\">when expression</a> in combination with <code>is</code> operator.</p>\n<p>In any case <a href=\"https://kotlinlang.org/docs/reference/using-maven.html#compiling-kotlin-and-java-sources\" rel=\"nofollow noreferrer\">Kotlin and java files can co-exist in a project</a> and result in a jar that can run in JVM.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>when (this) { //switch-like statement in kotlin supporting class-pattern-matching and smart casts via `is` operator.\n    is A -&gt; doA()\n    is B -&gt; doB()\n    is C -&gt; doC()\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":472248,"reputation":19503,"user_id":880619,"accept_rate":100,"display_name":"Jasper de Vries"},"score":0,"creation_date":1674125442,"post_id":73239825,"comment_id":132649910,"body_markdown":"This was already answered.","body":"This was already answered."}],"tags":[],"owner":{"account_id":7798354,"reputation":6929,"user_id":5898696,"accept_rate":89,"display_name":"J-Alex"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659632796,"creation_date":1659632796,"answer_id":73239825,"question_id":5579309,"body_markdown":"Starting from Java 17 you can use pattern matching for switch expressions (preview feature) [JEP-406][1].\r\n\r\n    public void doAction(Object o) {\r\n        return switch (o) {\r\n            case A a -&gt; doA(a);\r\n            case B b -&gt; doB(b);\r\n            case C c -&gt; doC(c);\r\n            default -&gt; log.warn(&quot;Unrecognized type of {}&quot;, o);\r\n        };\r\n    }\r\n\r\nGuard pattern is also available:\r\n\r\n    public void doAction(Object o) {\r\n        return switch (o) {\r\n            case String s &amp;&amp; !s.isBlank() -&gt; handle(s);\r\n        };\r\n    }\r\n\r\nYou need to enable preview features to use it: `java --enable-preview`\r\n\r\n  [1]: https://openjdk.org/jeps/406","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Starting from Java 17 you can use pattern matching for switch expressions (preview feature) <a href=\"https://openjdk.org/jeps/406\" rel=\"nofollow noreferrer\">JEP-406</a>.</p>\n<pre><code>public void doAction(Object o) {\n    return switch (o) {\n        case A a -&gt; doA(a);\n        case B b -&gt; doB(b);\n        case C c -&gt; doC(c);\n        default -&gt; log.warn(&quot;Unrecognized type of {}&quot;, o);\n    };\n}\n</code></pre>\n<p>Guard pattern is also available:</p>\n<pre><code>public void doAction(Object o) {\n    return switch (o) {\n        case String s &amp;&amp; !s.isBlank() -&gt; handle(s);\n    };\n}\n</code></pre>\n<p>You need to enable preview features to use it: <code>java --enable-preview</code></p>\n"},{"comments":[{"owner":{"account_id":472248,"reputation":19503,"user_id":880619,"accept_rate":100,"display_name":"Jasper de Vries"},"score":1,"creation_date":1674125465,"post_id":73850924,"comment_id":132649916,"body_markdown":"This was already answered.","body":"This was already answered."}],"tags":[],"owner":{"account_id":12331407,"reputation":284,"user_id":8997268,"display_name":"Umesh Sulakude"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664178027,"creation_date":1664178027,"answer_id":73850924,"question_id":5579309,"body_markdown":"In Java 19 recent release this has been very easy and useful :\r\nCreate interface and have method called makesomenoise() which accepts animal parameter.\r\n\r\n    void makeSomeNoise (Animal animal) {\r\n    switch (animal) {\r\n    case Dog dog → dog.bark();\r\n    case Cat catcat.meow();\r\n    default throw new RuntimeException (&quot;WTH is it???&quot;);\r\n    }\r\n    }","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>In Java 19 recent release this has been very easy and useful :\nCreate interface and have method called makesomenoise() which accepts animal parameter.</p>\n<pre><code>void makeSomeNoise (Animal animal) {\nswitch (animal) {\ncase Dog dog → dog.bark();\ncase Cat catcat.meow();\ndefault throw new RuntimeException (&quot;WTH is it???&quot;);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9239692,"reputation":31,"user_id":6863299,"display_name":"Lump"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687159755,"creation_date":1687159755,"answer_id":76504480,"question_id":5579309,"body_markdown":"In Java 21 you can use &quot;Pattern Matching for Switch&quot;. See https://openjdk.org/jeps/441. This is no preview feature anymore.","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>In Java 21 you can use &quot;Pattern Matching for Switch&quot;. See <a href=\"https://openjdk.org/jeps/441\" rel=\"nofollow noreferrer\">https://openjdk.org/jeps/441</a>. This is no preview feature anymore.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689144428,"creation_date":1689144428,"answer_id":76667796,"question_id":5579309,"body_markdown":"Before we get stable pattern matching for `switch` statement, Java 16/17 could provide limited support with &quot;Pattern Matching for instanceof&quot;:\r\n\r\n```java\r\nif (req instanceof UserRequest userReq) {\r\n    userReq.doUserStuff();\r\n} else if (req instanceof AdminRequest adminReq) {\r\n    adminReq.doAdminStuff();\r\n}\r\n```\r\n\r\nIt frees you from extra casting statement.\r\n\r\nSee https://openjdk.org/jeps/394","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Before we get stable pattern matching for <code>switch</code> statement, Java 16/17 could provide limited support with &quot;Pattern Matching for instanceof&quot;:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (req instanceof UserRequest userReq) {\n    userReq.doUserStuff();\n} else if (req instanceof AdminRequest adminReq) {\n    adminReq.doAdminStuff();\n}\n</code></pre>\n<p>It frees you from extra casting statement.</p>\n<p>See <a href=\"https://openjdk.org/jeps/394\" rel=\"nofollow noreferrer\">https://openjdk.org/jeps/394</a></p>\n"},{"comments":[{"owner":{"account_id":171196,"reputation":1638,"user_id":398453,"accept_rate":69,"display_name":"FkJ"},"score":0,"creation_date":1694527698,"post_id":76872512,"comment_id":135900824,"body_markdown":"Doesn&#39;t work with Java 17. If it works on a newer version please mention it on the answer.","body":"Doesn&#39;t work with Java 17. If it works on a newer version please mention it on the answer."}],"tags":[],"owner":{"account_id":17266527,"reputation":29,"user_id":12503105,"display_name":"Nanuno"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691638766,"creation_date":1691638766,"answer_id":76872512,"question_id":5579309,"body_markdown":"I think we can do it more naturally without any modifications like this:\r\n\r\n    switch (true) {\r\n      case X instanceof A:\r\n        // do something;\r\n        break;\r\n      case X instanceof B:\r\n        // do something;\r\n        break;\r\n      default:\r\n        // do something;\r\n        break;\r\n    }\r\n\r\nHope it helps! :)","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I think we can do it more naturally without any modifications like this:</p>\n<pre><code>switch (true) {\n  case X instanceof A:\n    // do something;\n    break;\n  case X instanceof B:\n    // do something;\n    break;\n  default:\n    // do something;\n    break;\n}\n</code></pre>\n<p>Hope it helps! :)</p>\n"}],"owner":{"account_id":180086,"reputation":20228,"user_id":413174,"accept_rate":87,"display_name":"olidev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":403557,"favorite_count":0,"down_vote_count":0,"up_vote_count":358,"accepted_answer_id":5579385,"answer_count":29,"score":358,"last_activity_date":1691638766,"creation_date":1302170608,"question_id":5579309,"body_markdown":"I have a question of using switch case for `instanceof` object:\r\n\r\nFor example: my problem can be reproduced in Java:\r\n\r\n    if(this instanceof A)\r\n        doA();\r\n    else if(this instanceof B)\r\n        doB();\r\n    else if(this instanceof C)\r\n        doC():\r\n\r\nHow would it be implemented using `switch...case`?","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I have a question of using switch case for <code>instanceof</code> object:</p>\n\n<p>For example: my problem can be reproduced in Java:</p>\n\n<pre><code>if(this instanceof A)\n    doA();\nelse if(this instanceof B)\n    doB();\nelse if(this instanceof C)\n    doC():\n</code></pre>\n\n<p>How would it be implemented using <code>switch...case</code>?</p>\n"},{"tags":["java","spring-boot","jpa","filtering","specifications"],"owner":{"account_id":9999928,"reputation":143,"user_id":7396271,"display_name":"Abdou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691638558,"creation_date":1691625120,"question_id":76871883,"body_markdown":"I have table `paysheet` that contains monthYear values in this format :\r\n\r\n08/2023\r\n06/2023\r\n05/2023\r\n\r\nthey&#39;re stored as strings in the database, i&#39;m tasked to implement filtering using JPA specifications, i decided to create seperate columns for month+year, and transfer the old data there, keeping the month_year column like this :\r\n\r\n    ALTER TABLE paysheet\r\n        ADD COLUMN IF NOT EXISTS month INT,\r\n        ADD COLUMN IF NOT EXISTS year INT;\r\n    \r\n    UPDATE paysheet\r\n    SET\r\n        month = CAST(SPLIT_PART(month_year, &#39;/&#39;, 1) AS INT),\r\n        year = CAST(SPLIT_PART(month_year, &#39;/&#39;, 2) AS INT);\r\n\r\nhere&#39;s my filtering logic : \r\n\r\nI parse the monthYear strings &quot;05/2023&quot; to a YearMonth : \r\n\r\n    public static YearMonth parseMonthYear(String input) {\r\n        return YearMonth.parse(input, DateTimeFormatter.ofPattern(&quot;MM/yyyy&quot;));\r\n    }\r\n\r\nand then create my spec : \r\n\r\n        YearMonth startDate = DateUtils.parseMonthYear(searchPaySheetDTO.getStartDate());\r\n        YearMonth endDate = DateUtils.parseMonthYear(searchPaySheetDTO.getEndDate());\r\n        Specification&lt;Paysheet&gt; specification = Specification\r\n                .where(this.filterByStartInterval(startDate))\r\n                .and(this.filterByEndInterval(endDate))\r\n                .and(this.filterByCollaborator(collaborator));\r\n\r\nthere are my predicate builders ( for the dates ) : \r\n\r\n    private Specification&lt;Paysheet&gt; filterByStartInterval(YearMonth startDate) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\r\n            predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;month&quot;), startDate.getMonthValue()));\r\n            predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;year&quot;), startDate.getYear()));\r\n\r\n            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\r\n        };\r\n    }\r\n\r\n    private Specification&lt;Paysheet&gt; filterByEndInterval(YearMonth endDate) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\r\n            predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;month&quot;), endDate.getMonthValue()));\r\n            predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;year&quot;), endDate.getYear()));\r\n\r\n            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\r\n        };\r\n    }\r\n\r\n\r\nclearly my logic is wrong, because this test case doesn&#39;t pass : \r\n\r\n    {\r\n      &quot;startDate&quot;: &quot;09/2021&quot;,\r\n      &quot;endDate&quot;: &quot;02/2026&quot;\r\n    }\r\n\r\nit does a `where month &gt; 9 and month &lt; 2` in sql which doesn&#39;t work.\r\n\r\nI&#39;m a bit stuck and will appreciate ur help.\r\n\r\n","title":"JPA Specification filter within an interval while ignoring days of month","body":"<p>I have table <code>paysheet</code> that contains monthYear values in this format :</p>\n<p>08/2023\n06/2023\n05/2023</p>\n<p>they're stored as strings in the database, i'm tasked to implement filtering using JPA specifications, i decided to create seperate columns for month+year, and transfer the old data there, keeping the month_year column like this :</p>\n<pre><code>ALTER TABLE paysheet\n    ADD COLUMN IF NOT EXISTS month INT,\n    ADD COLUMN IF NOT EXISTS year INT;\n\nUPDATE paysheet\nSET\n    month = CAST(SPLIT_PART(month_year, '/', 1) AS INT),\n    year = CAST(SPLIT_PART(month_year, '/', 2) AS INT);\n</code></pre>\n<p>here's my filtering logic :</p>\n<p>I parse the monthYear strings &quot;05/2023&quot; to a YearMonth :</p>\n<pre><code>public static YearMonth parseMonthYear(String input) {\n    return YearMonth.parse(input, DateTimeFormatter.ofPattern(&quot;MM/yyyy&quot;));\n}\n</code></pre>\n<p>and then create my spec :</p>\n<pre><code>    YearMonth startDate = DateUtils.parseMonthYear(searchPaySheetDTO.getStartDate());\n    YearMonth endDate = DateUtils.parseMonthYear(searchPaySheetDTO.getEndDate());\n    Specification&lt;Paysheet&gt; specification = Specification\n            .where(this.filterByStartInterval(startDate))\n            .and(this.filterByEndInterval(endDate))\n            .and(this.filterByCollaborator(collaborator));\n</code></pre>\n<p>there are my predicate builders ( for the dates ) :</p>\n<pre><code>private Specification&lt;Paysheet&gt; filterByStartInterval(YearMonth startDate) {\n    return (root, query, criteriaBuilder) -&gt; {\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n        predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;month&quot;), startDate.getMonthValue()));\n        predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;year&quot;), startDate.getYear()));\n\n        return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\n    };\n}\n\nprivate Specification&lt;Paysheet&gt; filterByEndInterval(YearMonth endDate) {\n    return (root, query, criteriaBuilder) -&gt; {\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n        predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;month&quot;), endDate.getMonthValue()));\n        predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;year&quot;), endDate.getYear()));\n\n        return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\n    };\n}\n</code></pre>\n<p>clearly my logic is wrong, because this test case doesn't pass :</p>\n<pre><code>{\n  &quot;startDate&quot;: &quot;09/2021&quot;,\n  &quot;endDate&quot;: &quot;02/2026&quot;\n}\n</code></pre>\n<p>it does a <code>where month &gt; 9 and month &lt; 2</code> in sql which doesn't work.</p>\n<p>I'm a bit stuck and will appreciate ur help.</p>\n"},{"tags":["java","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":3275313,"reputation":5882,"user_id":2757561,"accept_rate":71,"display_name":"cralfaro"},"score":0,"creation_date":1493120863,"post_id":43598674,"comment_id":74268361,"body_markdown":"just to try to understand better your problem, why you didnt have the html thymeleaf files inside your webapp as a normal resource?","body":"just to try to understand better your problem, why you didnt have the html thymeleaf files inside your webapp as a normal resource?"},{"owner":{"account_id":434034,"reputation":18496,"user_id":819732,"accept_rate":80,"display_name":"kasdega"},"score":0,"creation_date":1493129758,"post_id":43598674,"comment_id":74275240,"body_markdown":"That is a long story.  Let&#39;s just get crazy and assume that we need to have at least some of our templates available through the database.","body":"That is a long story.  Let&#39;s just get crazy and assume that we need to have at least some of our templates available through the database."},{"owner":{"account_id":1555433,"reputation":2537,"user_id":1446707,"accept_rate":100,"display_name":"Ali.Mojtahed"},"score":0,"creation_date":1493207297,"post_id":43598674,"comment_id":74314460,"body_markdown":"Are u disabled Thymleafe cache?","body":"Are u disabled Thymleafe cache?"}],"answers":[{"comments":[{"owner":{"account_id":434034,"reputation":18496,"user_id":819732,"accept_rate":80,"display_name":"kasdega"},"score":1,"creation_date":1523931336,"post_id":43637491,"comment_id":86753160,"body_markdown":"@RajaAnbazhagan I hope it helped you!","body":"@RajaAnbazhagan I hope it helped you!"}],"tags":[],"owner":{"account_id":434034,"reputation":18496,"user_id":819732,"accept_rate":80,"display_name":"kasdega"},"comment_count":1,"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1493220640,"creation_date":1493217984,"answer_id":43637491,"question_id":43598674,"body_markdown":"Through mostly trial and error I was able to piece this together.  Posting it here to help the next person looking for something similar.\r\n\r\nThis is made easier in the newer version of Thymeleaf.  All one needs to do now is to extend StringTemplateResolver.\r\n\r\n    import java.util.Map;\r\n    import org.thymeleaf.IEngineConfiguration;\r\n    import org.thymeleaf.templateresolver.StringTemplateResolver;\r\n    import org.thymeleaf.templateresource.ITemplateResource;\r\n    \r\n    import com.google.common.collect.Sets;\r\n    \r\n    public class ThymeleafDatabaseResourceResolver extends StringTemplateResolver {\r\n    \tprivate final static String PREFIX = &quot;&quot;;\r\n    \r\n    \t@Autowired ThymeleafTemplateDao thymeleaftemplateDao;\r\n    \r\n    \tpublic ThymeleafDatabaseResourceResolver() {\r\n    \t\tsetResolvablePatterns(Sets.newHashSet(PREFIX + &quot;*&quot;));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected ITemplateResource computeTemplateResource(IEngineConfiguration configuration, String ownerTemplate, String template, Map&lt;String, Object&gt; templateResolutionAttributes) {\r\n    \r\n            // ThymeleafTemplate is our internal object that contains the content.  \r\n            // You should change this to match you&#39;re set up.\r\n    \r\n            ThymeleafTemplateDao thymeleaftemplateDao = ApplicationContextProvider.getApplicationContext().getBean(ThymeleafTemplateDao.class);\r\n    \t\tThymeleafTemplate thymeleafTemplate = thymeleaftemplateDao.findByTemplateName(template);  \r\n    \t\tif (thymeleafTemplate != null) {\r\n    \t\t\treturn super.computeTemplateResource(configuration, ownerTemplate, thymeleafTemplate.getContent(), templateResolutionAttributes);\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to read a Thymeleaf template from DB in Thymeleaf 3.0.5?","body":"<p>Through mostly trial and error I was able to piece this together.  Posting it here to help the next person looking for something similar.</p>\n\n<p>This is made easier in the newer version of Thymeleaf.  All one needs to do now is to extend StringTemplateResolver.</p>\n\n<pre><code>import java.util.Map;\nimport org.thymeleaf.IEngineConfiguration;\nimport org.thymeleaf.templateresolver.StringTemplateResolver;\nimport org.thymeleaf.templateresource.ITemplateResource;\n\nimport com.google.common.collect.Sets;\n\npublic class ThymeleafDatabaseResourceResolver extends StringTemplateResolver {\n    private final static String PREFIX = \"\";\n\n    @Autowired ThymeleafTemplateDao thymeleaftemplateDao;\n\n    public ThymeleafDatabaseResourceResolver() {\n        setResolvablePatterns(Sets.newHashSet(PREFIX + \"*\"));\n    }\n\n    @Override\n    protected ITemplateResource computeTemplateResource(IEngineConfiguration configuration, String ownerTemplate, String template, Map&lt;String, Object&gt; templateResolutionAttributes) {\n\n        // ThymeleafTemplate is our internal object that contains the content.  \n        // You should change this to match you're set up.\n\n        ThymeleafTemplateDao thymeleaftemplateDao = ApplicationContextProvider.getApplicationContext().getBean(ThymeleafTemplateDao.class);\n        ThymeleafTemplate thymeleafTemplate = thymeleaftemplateDao.findByTemplateName(template);  \n        if (thymeleafTemplate != null) {\n            return super.computeTemplateResource(configuration, ownerTemplate, thymeleafTemplate.getContent(), templateResolutionAttributes);\n        }\n        return null;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":434034,"reputation":18496,"user_id":819732,"accept_rate":80,"display_name":"kasdega"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7476,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":43637491,"answer_count":1,"score":11,"last_activity_date":1691638461,"creation_date":1493072811,"question_id":43598674,"body_markdown":"We&#39;re upgrading from Thymeleaf 2.1 to 3.0.5.  Our current set up (before upgrading) has many thymeleaf templates defined and stored in a database table.  \r\nWhen we attempt to upgrade to 3.x our 2.1 code no longer works...ok fine but we can&#39;t find any good examples on how to do basically the same thing with Thymeleaf 3.0.5.  Has anyone implemented this?\r\n\r\nEven a decent example of how to implement org.thymeleaf.templateresolver.StringTemplateResolver would probably push us in the right direction...but we can&#39;t find anything on that either.\r\n\r\nThis is what we used in 2.1:\r\n\r\n    public class ThymeleafTemplateResolver extends TemplateResolver {\r\n    \r\n        private final static String PREFIX = &quot;&quot;; \r\n    \r\n        public ThymeleafTemplateResolver() {\r\n            setResourceResolver(new DbResourceResolver());\r\n            setResolvablePatterns(Sets.newHashSet(PREFIX + &quot;*&quot;));\r\n        }\r\n    \r\n        @Override\r\n        protected String computeResourceName(TemplateProcessingParameters params) {\r\n            String templateName = params.getTemplateName();\r\n            return templateName.substring(PREFIX.length());\r\n        }\r\n    \r\n        private class DbResourceResolver implements IResourceResolver {\r\n    \r\n            @Override\r\n            public InputStream getResourceAsStream(TemplateProcessingParameters params, String template) {\r\n            \tThymeleafTemplateDao thymeleaftemplateDao = ApplicationContextProvider.getApplicationContext().getBean(ThymeleafTemplateDao.class);\r\n            \tThymeleafTemplate thymeleafTemplate = thymeleaftemplateDao.findByTemplate(template);\r\n                if (thymeleafTemplate != null) {\r\n                    return new ByteArrayInputStream(thymeleafTemplate.getContent().getBytes());\r\n                }\r\n                return null;\r\n            }\r\n    \r\n            @Override\r\n            public String getName() {\r\n                return &quot;dbResourceResolver&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\nAny help is appreciated...\r\n\r\n","title":"How to read a Thymeleaf template from DB in Thymeleaf 3.0.5?","body":"<p>We're upgrading from Thymeleaf 2.1 to 3.0.5.  Our current set up (before upgrading) has many thymeleaf templates defined and stored in a database table.<br>\nWhen we attempt to upgrade to 3.x our 2.1 code no longer works...ok fine but we can't find any good examples on how to do basically the same thing with Thymeleaf 3.0.5.  Has anyone implemented this?</p>\n\n<p>Even a decent example of how to implement org.thymeleaf.templateresolver.StringTemplateResolver would probably push us in the right direction...but we can't find anything on that either.</p>\n\n<p>This is what we used in 2.1:</p>\n\n<pre><code>public class ThymeleafTemplateResolver extends TemplateResolver {\n\n    private final static String PREFIX = \"\"; \n\n    public ThymeleafTemplateResolver() {\n        setResourceResolver(new DbResourceResolver());\n        setResolvablePatterns(Sets.newHashSet(PREFIX + \"*\"));\n    }\n\n    @Override\n    protected String computeResourceName(TemplateProcessingParameters params) {\n        String templateName = params.getTemplateName();\n        return templateName.substring(PREFIX.length());\n    }\n\n    private class DbResourceResolver implements IResourceResolver {\n\n        @Override\n        public InputStream getResourceAsStream(TemplateProcessingParameters params, String template) {\n            ThymeleafTemplateDao thymeleaftemplateDao = ApplicationContextProvider.getApplicationContext().getBean(ThymeleafTemplateDao.class);\n            ThymeleafTemplate thymeleafTemplate = thymeleaftemplateDao.findByTemplate(template);\n            if (thymeleafTemplate != null) {\n                return new ByteArrayInputStream(thymeleafTemplate.getContent().getBytes());\n            }\n            return null;\n        }\n\n        @Override\n        public String getName() {\n            return \"dbResourceResolver\";\n        }\n    }\n}\n</code></pre>\n\n<p>Any help is appreciated...</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"comments":[{"owner":{"account_id":29159969,"reputation":51,"user_id":22338949,"display_name":"Chichi"},"score":0,"creation_date":1691769915,"post_id":76872478,"comment_id":135541306,"body_markdown":"Thankyouu! Didn&#39;t know that was possible. Greatly appreciated!!","body":"Thankyouu! Didn&#39;t know that was possible. Greatly appreciated!!"}],"tags":[],"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691638064,"creation_date":1691638064,"answer_id":76872478,"question_id":76872145,"body_markdown":"You&#39;re storing your user profiles under path `/Users/Customers` in your database, so you can set up a reference to that parent node as:\r\n```\r\nDatabaseReference referenceProfile =\r\n                         FirebaseDatabase.getInstance().getReference(&quot;Users/Customers&quot;); \r\n```\r\n\r\n","title":"How can I get the correct DatabaseReference","body":"<p>You're storing your user profiles under path <code>/Users/Customers</code> in your database, so you can set up a reference to that parent node as:</p>\n<pre><code>DatabaseReference referenceProfile =\n                         FirebaseDatabase.getInstance().getReference(&quot;Users/Customers&quot;); \n</code></pre>\n"}],"owner":{"account_id":29159969,"reputation":51,"user_id":22338949,"display_name":"Chichi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76872478,"answer_count":1,"score":0,"last_activity_date":1691638064,"creation_date":1691631628,"question_id":76872145,"body_markdown":"I am creating a user profile but I do not know how can I get the child node and display it in the user profile, How can I reference this correctly? I would greatly appreciate any comments or suggestion, thank you in advance!!\r\n\r\n\r\nUSER PROFILE\r\n\r\n```\r\nprivate void showUserProfile( FirebaseUser firebaseUser) {\r\n\r\nString userID = firebaseUser.getUid();\r\n\r\nDatabaseReference referenceProfile = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;); \r\n// &#128070;\r\nreferenceProfile.child(userID).addListenerForSingleValueEvent(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        ReadWriteUserDetails readUserDetail = snapshot.getValue(ReadWriteUserDetails.class);\r\n        if(readUserDetail != null){\r\n            fullname = firebaseUser.getDisplayName();\r\n            email = firebaseUser.getEmail();\r\n            doB = readUserDetail.birthday;\r\n            discount = readUserDetail.discount;\r\n\r\n            textViewFullName.setText(fullname);\r\n            textViewEmail.setText(email);\r\n            textViewDoB.setText(doB);\r\n            textViewDiscount.setText(discount);\r\n        }\r\n    }\r\n```\r\n\r\nFirebase\r\n\r\n[![FIREBASE][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dkOu3.png\r\n\r\n\r\nReadWriteUserDetail class\r\n```\r\npublic class ReadWriteUserDetails {\r\n    public String birthday, discount;\r\n\r\n    public ReadWriteUserDetails(){};\r\n\r\n    public ReadWriteUserDetails(String textBirthday, String textDiscount){\r\n        this.birthday = textBirthday;\r\n        this.discount = textDiscount;\r\n    }\r\n}\r\n```","title":"How can I get the correct DatabaseReference","body":"<p>I am creating a user profile but I do not know how can I get the child node and display it in the user profile, How can I reference this correctly? I would greatly appreciate any comments or suggestion, thank you in advance!!</p>\n<p>USER PROFILE</p>\n<pre><code>private void showUserProfile( FirebaseUser firebaseUser) {\n\nString userID = firebaseUser.getUid();\n\nDatabaseReference referenceProfile = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;); \n// 👆\nreferenceProfile.child(userID).addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        ReadWriteUserDetails readUserDetail = snapshot.getValue(ReadWriteUserDetails.class);\n        if(readUserDetail != null){\n            fullname = firebaseUser.getDisplayName();\n            email = firebaseUser.getEmail();\n            doB = readUserDetail.birthday;\n            discount = readUserDetail.discount;\n\n            textViewFullName.setText(fullname);\n            textViewEmail.setText(email);\n            textViewDoB.setText(doB);\n            textViewDiscount.setText(discount);\n        }\n    }\n</code></pre>\n<p>Firebase</p>\n<p><a href=\"https://i.stack.imgur.com/dkOu3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dkOu3.png\" alt=\"FIREBASE\" /></a></p>\n<p>ReadWriteUserDetail class</p>\n<pre><code>public class ReadWriteUserDetails {\n    public String birthday, discount;\n\n    public ReadWriteUserDetails(){};\n\n    public ReadWriteUserDetails(String textBirthday, String textDiscount){\n        this.birthday = textBirthday;\n        this.discount = textDiscount;\n    }\n}\n</code></pre>\n"},{"tags":["java","data-structures"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686953351,"post_id":76493704,"comment_id":134874570,"body_markdown":"Did I understood correctly, that foodPreference+gender are attributes of a couple, not attributes of a single person?","body":"Did I understood correctly, that foodPreference+gender are attributes of a couple, not attributes of a single person?"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686954217,"post_id":76493704,"comment_id":134874669,"body_markdown":"If so, does Person-&gt;gender attribute also exists and does it correlate with Pair&#39;s gender?","body":"If so, does Person-&gt;gender attribute also exists and does it correlate with Pair&#39;s gender?"},{"owner":{"account_id":247381,"reputation":76,"user_id":1147136,"display_name":"sankalpn"},"score":0,"creation_date":1686954370,"post_id":76493704,"comment_id":134874689,"body_markdown":"Would be easier to define right abstractions with some fundamental questions:\n1) What do the dimensions signify?\n2) Why do you need to store Pair instances in dimensions? In other words, why can these dimensional filters not apply on demand?\n3) What are read/write use cases?","body":"Would be easier to define right abstractions with some fundamental questions: 1) What do the dimensions signify? 2) Why do you need to store Pair instances in dimensions? In other words, why can these dimensional filters not apply on demand? 3) What are read/write use cases?"},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686954710,"post_id":76493704,"comment_id":134874735,"body_markdown":"@gdomo Yes the foodPreference and gender attributes are attributes of a Pair. A person also has a gender and a foodPreference. If both persons in the Pair are male then the gender is male, if both are female then the gender is female and if both are mixed then the gender is mixed. For the foodPreference: if the foodPreference from both persons is equal than the foodPreference of the Pair is the foodPreference from one of the Persons. If its (vegan, veggie) than its vegan. Pairs with one meat and one veggie/vegan person are not existing.","body":"@gdomo Yes the foodPreference and gender attributes are attributes of a Pair. A person also has a gender and a foodPreference. If both persons in the Pair are male then the gender is male, if both are female then the gender is female and if both are mixed then the gender is mixed. For the foodPreference: if the foodPreference from both persons is equal than the foodPreference of the Pair is the foodPreference from one of the Persons. If its (vegan, veggie) than its vegan. Pairs with one meat and one veggie/vegan person are not existing."},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686995150,"post_id":76493704,"comment_id":134877308,"body_markdown":"@sankalpn I am not sure if I understand the questions correctly. 1) The dimensions are not really signifying anything. I just have a list of Pairs and have to split it such that I can access for example Pairs that are meat eaters and are male. 2) I thought that it might not be good to apply the filters each time I have to access the lists, because I have to access it in numerous methods. 3) Let&#39;s say that I have the 3D List like presented, then I never add a Pair to these lists. But I remove Pairs in one method, but the other methods still need the list from the beginning.","body":"@sankalpn I am not sure if I understand the questions correctly. 1) The dimensions are not really signifying anything. I just have a list of Pairs and have to split it such that I can access for example Pairs that are meat eaters and are male. 2) I thought that it might not be good to apply the filters each time I have to access the lists, because I have to access it in numerous methods. 3) Let&#39;s say that I have the 3D List like presented, then I never add a Pair to these lists. But I remove Pairs in one method, but the other methods still need the list from the beginning."},{"owner":{"account_id":247381,"reputation":76,"user_id":1147136,"display_name":"sankalpn"},"score":0,"creation_date":1687216739,"post_id":76493704,"comment_id":134902865,"body_markdown":"@DavidKrell then it might be simpler to have a wrapper class, say PairManager which has a List&lt;Pair&gt; allPairs and a cache List&lt;Pair&gt; maleMeatEaters. First use, you filter, next use you only return from cache. That way, cache can also be transparent to callers. You add or remove pairs with a call to PairManager class and that can internally invalidate cache.","body":"@DavidKrell then it might be simpler to have a wrapper class, say PairManager which has a List&lt;Pair&gt; allPairs and a cache List&lt;Pair&gt; maleMeatEaters. First use, you filter, next use you only return from cache. That way, cache can also be transparent to callers. You add or remove pairs with a call to PairManager class and that can internally invalidate cache."}],"answers":[{"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686953453,"post_id":76493789,"comment_id":134874583,"body_markdown":"According to the code snippet, foodPreference and gender are a pair attributes, not a person&#39;s. If so, answer should be corrected a bit, however it doesn&#39;t affect the entire approach","body":"According to the code snippet, foodPreference and gender are a pair attributes, not a person&#39;s. If so, answer should be corrected a bit, however it doesn&#39;t affect the entire approach"},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686995329,"post_id":76493789,"comment_id":134877327,"body_markdown":"I thought of this as well, but I have to access the sublists in different methods. For that I could maybe introduce 12 fields, because I don&#39;t want to pass 12 lists to each method. But the problem is that I am removing elements from the lists, but another method still needs the full list? I could just make a copy of every list on the beginning of the method where I am removing but is this a good approach? Because then I am using 12 lines just for copying and somehow this doesn&#39;t look like the best approach.","body":"I thought of this as well, but I have to access the sublists in different methods. For that I could maybe introduce 12 fields, because I don&#39;t want to pass 12 lists to each method. But the problem is that I am removing elements from the lists, but another method still needs the full list? I could just make a copy of every list on the beginning of the method where I am removing but is this a good approach? Because then I am using 12 lines just for copying and somehow this doesn&#39;t look like the best approach."},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686996991,"post_id":76493789,"comment_id":134877534,"body_markdown":"Or I could just readd the removed Pairs at the end of the method, where they are removed, but I don&#39;t know if this is an elegant way. But I will just try different forms of your approach and will look how it works. Nonetheless I thank you very much for your answer.","body":"Or I could just readd the removed Pairs at the end of the method, where they are removed, but I don&#39;t know if this is an elegant way. But I will just try different forms of your approach and will look how it works. Nonetheless I thank you very much for your answer."}],"tags":[],"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686952675,"creation_date":1686952675,"answer_id":76493789,"question_id":76493704,"body_markdown":"Should be able to use a single `List&lt;Pair&gt;`, and apply various filters to get a subset of relevant pairs.\r\n\r\nFor example:\r\n\r\n    List&lt;Pair&gt; allPairs = List.of(new Pair(...), \r\n                                  new Pair(...), \r\n                                  new Pair(...),\r\n                                  ....);\r\n\r\n    List&lt;Pair&gt; allMaleCarnivores = allPairs.stream()\r\n                                      .filter(p -&gt; p.getPerson1().isCarnivore() \r\n                                                     &amp;&amp; p.getPerson2().isCarnivore()\r\n                                                     &amp;&amp; p.getPerson1().isMale()\r\n                                                     &amp;&amp; p.getPerson2().isMale()\r\n                                              )\r\n                                      .toList();\r\n   \r\n    \r\n     // then do something with the subset\r\n     allMaleCarnivores.forEach(p -&gt; eatSalad(p);\r\n","title":"How to refactor a three dimensional list?","body":"<p>Should be able to use a single <code>List&lt;Pair&gt;</code>, and apply various filters to get a subset of relevant pairs.</p>\n<p>For example:</p>\n<pre><code>List&lt;Pair&gt; allPairs = List.of(new Pair(...), \n                              new Pair(...), \n                              new Pair(...),\n                              ....);\n\nList&lt;Pair&gt; allMaleCarnivores = allPairs.stream()\n                                  .filter(p -&gt; p.getPerson1().isCarnivore() \n                                                 &amp;&amp; p.getPerson2().isCarnivore()\n                                                 &amp;&amp; p.getPerson1().isMale()\n                                                 &amp;&amp; p.getPerson2().isMale()\n                                          )\n                                  .toList();\n\n\n // then do something with the subset\n allMaleCarnivores.forEach(p -&gt; eatSalad(p);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686995829,"post_id":76494006,"comment_id":134877378,"body_markdown":"This looks like a good approach! Can you maybe explain the usage of the hashCode() method? I know that the equals method just checks if two instances of the class are equal but what is the hashCode() method used for? And just to check if I understood correctly: From my point of view, this will still work even if a Pair has more attributes like the ones I showed in my question, because the only important attributes for the PairAttributes class are foodPreference and gender.","body":"This looks like a good approach! Can you maybe explain the usage of the hashCode() method? I know that the equals method just checks if two instances of the class are equal but what is the hashCode() method used for? And just to check if I understood correctly: From my point of view, this will still work even if a Pair has more attributes like the ones I showed in my question, because the only important attributes for the PairAttributes class are foodPreference and gender."},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686995954,"post_id":76494006,"comment_id":134877401,"body_markdown":"And just to be sure: With *&quot;Don&#39;t forget to update them in case of new attributes.&quot;* You mean only new attributes that will decide how the list is split up? So only new attributes for the PairAttribute class or? If for example my Pair has the following field ```Double[] location``` but this is not relevant for accessing all Pairs that are meat eaters and male then I don&#39;t have to change something in the PairAttribute class?","body":"And just to be sure: With <i>&quot;Don&#39;t forget to update them in case of new attributes.&quot;</i> You mean only new attributes that will decide how the list is split up? So only new attributes for the PairAttribute class or? If for example my Pair has the following field <code>Double[] location</code> but this is not relevant for accessing all Pairs that are meat eaters and male then I don&#39;t have to change something in the PairAttribute class?"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1687005445,"post_id":76494006,"comment_id":134878419,"body_markdown":"@DavidKrell [Here](https://www.baeldung.com/java-equals-hashcode-contracts#hashcode) is an article on hashCode. In a nutshell, you need hashCode+equals (must be always overridden consistently) to make `Map` works. When you put/get into/from HashMap it uses calculated hashCode end equals to instantly navigate to the desired map entry. Search for HashMap implementation explanation for more details if you are interested","body":"@DavidKrell <a href=\"https://www.baeldung.com/java-equals-hashcode-contracts#hashcode\" rel=\"nofollow noreferrer\">Here</a> is an article on hashCode. In a nutshell, you need hashCode+equals (must be always overridden consistently) to make <code>Map</code> works. When you put/get into/from HashMap it uses calculated hashCode end equals to instantly navigate to the desired map entry. Search for HashMap implementation explanation for more details if you are interested"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1687005763,"post_id":76494006,"comment_id":134878458,"body_markdown":"@DavidKrell yep. Include in PairAttributes and it&#39;s equals/hashcode only attributes according to which you split pairs, and according to which you are looking up for list of pairs. You are free to add any additional fields to a Person and a Pair if they don&#39;t affect search for pairs logic.","body":"@DavidKrell yep. Include in PairAttributes and it&#39;s equals/hashcode only attributes according to which you split pairs, and according to which you are looking up for list of pairs. You are free to add any additional fields to a Person and a Pair if they don&#39;t affect search for pairs logic."},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1687116837,"post_id":76494006,"comment_id":134888550,"body_markdown":"I used your method and it works very good. I made the HashMap with a list of Pairs. I now want to remove pairs from the Map, the Pairs could be from every combination of attributes. What would be more efficient? To remove the pairs from the pair list from which I made the map in the first place or to iterate over the pairs which I want to remove, then get the corresponding list from the Map and remove the Pair from that list?","body":"I used your method and it works very good. I made the HashMap with a list of Pairs. I now want to remove pairs from the Map, the Pairs could be from every combination of attributes. What would be more efficient? To remove the pairs from the pair list from which I made the map in the first place or to iterate over the pairs which I want to remove, then get the corresponding list from the Map and remove the Pair from that list?"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1687118314,"post_id":76494006,"comment_id":134888726,"body_markdown":"If I understood correctly, first approach would work as is: manipulating with initial list of all Pairs from which the map was build wouldn&#39;t affect the map. You have to rebuild the map from updated list then. So I suggest get list from map for each Pair you want to remove by their attributes and remove a Pair from that list.","body":"If I understood correctly, first approach would work as is: manipulating with initial list of all Pairs from which the map was build wouldn&#39;t affect the map. You have to rebuild the map from updated list then. So I suggest get list from map for each Pair you want to remove by their attributes and remove a Pair from that list."},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1687118983,"post_id":76494006,"comment_id":134888794,"body_markdown":"Thank you, and rebuilding the map with the manipulated list of all Pairs would not be as efficient as just removing the Pairs from the lists in the map, or?","body":"Thank you, and rebuilding the map with the manipulated list of all Pairs would not be as efficient as just removing the Pairs from the lists in the map, or?"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1687120211,"post_id":76494006,"comment_id":134888912,"body_markdown":"Yes, rebuilding the map is less efficient in general. Also consider using LinkedList instead of ArrayList as it performs removal from the list more efficient. Also be careful, since your Pair class has no equals/hashCode you have to remove exactly that objects from which you built the map. Not `new Pair(..)` even with exactly same fields values.","body":"Yes, rebuilding the map is less efficient in general. Also consider using LinkedList instead of ArrayList as it performs removal from the list more efficient. Also be careful, since your Pair class has no equals/hashCode you have to remove exactly that objects from which you built the map. Not <code>new Pair(..)</code> even with exactly same fields values."}],"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687004903,"creation_date":1686956468,"answer_id":76494006,"question_id":76493704,"body_markdown":"While @Andrew S answer works, I could also suggest to use a `Map` for quick retrieve of a desired Pairs. It would take constant (O(1)) time to look up instead of filtering the whole list (O(n)). The flip side is extra memory consumption.\r\n\r\nTo do that you have to extract a kind of `PairAttributes` class which holds foodPreference and gender with properly defined `equals` and `hashCode` methods. Use lombok or auto-generation by IDE. Don&#39;t forget to update them in case of new attributes.\r\n\r\n    public static class PairAttributes {\r\n        private final String foodPreference;\r\n        private final String gender;\r\n\r\n        public PairAttributes(Pair pair) {\r\n            this.foodPreference = pair.foodPreference;\r\n            this.gender = pair.gender;\r\n        }\r\n\r\n        public PairAttributes(String foodPreference, String gender) {\r\n            this.foodPreference = foodPreference;\r\n            this.gender = gender;\r\n        }\r\n\r\n        // getters\r\n\r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n            PairAttributes that = (PairAttributes) o;\r\n            return foodPreference.equals(that.foodPreference) &amp;&amp; gender.equals(that.gender);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(foodPreference, gender);\r\n        }\r\n    }\r\n\r\nNow, just put given Pairs to a `HashMap` with `PairAttributes` as a key:\r\n\r\none by one\r\n\r\n        private final Map&lt;PairAttributes, List&lt;Pair&gt;&gt; pairsByAttributes = new HashMap&lt;&gt;();\r\n        ...\r\n        pairsByAttributes.computeIfAbsent(new PairAttributes(somePair), p -&gt; new ArrayList&lt;&gt;()).add(somePair);\r\nor if given a whole list:\r\n\r\n    List&lt;Pair&gt; allPairs = List.of(new Pair(...),\r\n            new Pair(...),\r\n            new Pair(...),\r\n            ...\r\n    );\r\n\r\n    Map&lt;PairAttributes, List&lt;Pair&gt;&gt; pairsByAttributes = allPairs\r\n            .stream().\r\n            collect(Collectors.groupingBy(PairAttributes::new));\r\n\r\nthen to get desired pairs just `get` them:\r\n\r\n    List&lt;Pair&gt; veggieMales = pairsByAttributes.get(\r\n            new PairAttributes(&quot;veggie&quot;, &quot;male&quot;)\r\n    );\r\n\r\n","title":"How to refactor a three dimensional list?","body":"<p>While @Andrew S answer works, I could also suggest to use a <code>Map</code> for quick retrieve of a desired Pairs. It would take constant (O(1)) time to look up instead of filtering the whole list (O(n)). The flip side is extra memory consumption.</p>\n<p>To do that you have to extract a kind of <code>PairAttributes</code> class which holds foodPreference and gender with properly defined <code>equals</code> and <code>hashCode</code> methods. Use lombok or auto-generation by IDE. Don't forget to update them in case of new attributes.</p>\n<pre><code>public static class PairAttributes {\n    private final String foodPreference;\n    private final String gender;\n\n    public PairAttributes(Pair pair) {\n        this.foodPreference = pair.foodPreference;\n        this.gender = pair.gender;\n    }\n\n    public PairAttributes(String foodPreference, String gender) {\n        this.foodPreference = foodPreference;\n        this.gender = gender;\n    }\n\n    // getters\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        PairAttributes that = (PairAttributes) o;\n        return foodPreference.equals(that.foodPreference) &amp;&amp; gender.equals(that.gender);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(foodPreference, gender);\n    }\n}\n</code></pre>\n<p>Now, just put given Pairs to a <code>HashMap</code> with <code>PairAttributes</code> as a key:</p>\n<p>one by one</p>\n<pre><code>    private final Map&lt;PairAttributes, List&lt;Pair&gt;&gt; pairsByAttributes = new HashMap&lt;&gt;();\n    ...\n    pairsByAttributes.computeIfAbsent(new PairAttributes(somePair), p -&gt; new ArrayList&lt;&gt;()).add(somePair);\n</code></pre>\n<p>or if given a whole list:</p>\n<pre><code>List&lt;Pair&gt; allPairs = List.of(new Pair(...),\n        new Pair(...),\n        new Pair(...),\n        ...\n);\n\nMap&lt;PairAttributes, List&lt;Pair&gt;&gt; pairsByAttributes = allPairs\n        .stream().\n        collect(Collectors.groupingBy(PairAttributes::new));\n</code></pre>\n<p>then to get desired pairs just <code>get</code> them:</p>\n<pre><code>List&lt;Pair&gt; veggieMales = pairsByAttributes.get(\n        new PairAttributes(&quot;veggie&quot;, &quot;male&quot;)\n);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686996596,"post_id":76494147,"comment_id":134877480,"body_markdown":"Thank you for your answer, this also looks like a good approach, but I think you somehow swapped a few things. In my project a **Pair** has a foodPreference and a Gender. I explained this more in detail in this [comment](https://stackoverflow.com/questions/76493704/how-to-refactor-a-three-dimensional-list/76494147#comment134874735_76493704). So I want the Pairs with a specific food Preference and gender, but I still understand the general idea. In my opinion it&#39;s quite similar to the approach of @AndrewS. So we are just generating a list for each combination of foodPreference and gender.","body":"Thank you for your answer, this also looks like a good approach, but I think you somehow swapped a few things. In my project a <b>Pair</b> has a foodPreference and a Gender. I explained this more in detail in this <a href=\"https://stackoverflow.com/questions/76493704/how-to-refactor-a-three-dimensional-list/76494147#comment134874735_76493704\">comment</a>. So I want the Pairs with a specific food Preference and gender, but I still understand the general idea. In my opinion it&#39;s quite similar to the approach of @AndrewS. So we are just generating a list for each combination of foodPreference and gender."},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686997058,"post_id":76494147,"comment_id":134877537,"body_markdown":"You can also take a look at my comment [here](https://stackoverflow.com/questions/76493704/how-to-refactor-a-three-dimensional-list/76494147#comment134877327_76493789). And then I have the problem that I always have to carry 12 lists around. I think I will combine your approach with Enums and the approach from @gdomo with the map, because then I just have a single Map where everything is stored.","body":"You can also take a look at my comment <a href=\"https://stackoverflow.com/questions/76493704/how-to-refactor-a-three-dimensional-list/76494147#comment134877327_76493789\">here</a>. And then I have the problem that I always have to carry 12 lists around. I think I will combine your approach with Enums and the approach from @gdomo with the map, because then I just have a single Map where everything is stored."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686959664,"creation_date":1686959664,"answer_id":76494147,"question_id":76493704,"body_markdown":"&gt; _&quot;... I read this question, where it is stated that if you are implementing a 3D list you are probably not handling your data right. ...&quot;_\r\n\r\nMore or less; typically, 3-dimensional arrays are used to represent mathematical matrices.\r\n\r\n&gt; _&quot;... In the mentioned question there is also an answer where a Map is used to store the data, but I am not really understanding this abstraction and I don&#39;t know how it could be used for my case. ...&quot;_\r\n\r\nIn computer science, a _map_ structure&amp;mdash;sometimes referred to as a _dictionary_, or an _[associative array](https://en.wikipedia.org/wiki/Associative_array)_&amp;mdash;it&#39;s simply a list of values, each of which are mapped to separate keys.&amp;nbsp; Similar to a literal _dictionary_, which has a word and a definition.\r\n\r\nHere is the _Java Tutorial_ on using the _Map_ collection.  \r\n_[The Map Interface (The Java&amp;trade; Tutorials &amp;gt; Collections &amp;gt; Interfaces)](https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)_.\r\n\r\nHere is a basic example.\r\n\r\n```java\r\nMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\nmap.put(&quot;abc&quot;, 123);\r\nmap.put(&quot;def&quot;, 456);\r\n```\r\n\r\nAnd, you can retrieve values using the _&quot;key&quot;_.\r\n\r\n```java\r\nmap.get(&quot;abc&quot;);\r\n```\r\n\r\n&gt; _... Is there a better, cleaner way to do the storing of the Pairs, where I can still get only the Pairs which have foodPreference x and gender y or is my way with the three dimensional list the best way for my specific data?&quot;_\r\n\r\nYes, I&#39;ll demonstrate; you can use a single _ArrayList_.\r\n\r\nConsider the following objects, to hold your data.\r\n\r\n```java\r\nclass Pair {\r\n    Person personA, personB;\r\n}\r\n\r\nclass Person {\r\n    String name, location;\r\n    int age;\r\n    Gender gender;\r\n    FoodPreference foodPreference;\r\n}\r\n\r\nenum Gender {\r\n    MALE, FEMALE, MIXED\r\n}\r\n\r\nenum FoodPreference {\r\n    MEAT, VEGGIE, VEGAN\r\n}\r\n```\r\n\r\nFrom here, you can create new constructors for both _Person_, and _Pair_.  \r\nAdditionally, here I added a _toString_ method, as a way to debug the data.\r\n\r\n```java\r\nclass Pair {\r\n    Person personA, personB;\r\n\r\n    public Pair(Person personA, Person personB) {\r\n        this.personA = personA;\r\n        this.personB = personB;\r\n    }\r\n}\r\n\r\nclass Person {\r\n    String name, location;\r\n    int age;\r\n    Gender gender;\r\n    FoodPreference foodPreference;\r\n\r\n    public Person(Gender gender, FoodPreference foodPreference) {\r\n        this.gender = gender;\r\n        this.foodPreference = foodPreference;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\nHere is an example of adding new items to the list.\r\n\r\n```java\r\nList&lt;Pair&gt; list = new ArrayList&lt;&gt;();\r\n\r\nPerson personA = new Person(&quot;personA&quot;, 1, Gender.MALE);\r\npersonA.foodPreference = FoodPreference.MEAT;\r\nPerson personB = new Person(&quot;personB&quot;, 2, Gender.FEMALE);\r\npersonB.foodPreference = FoodPreference.VEGGIE;\r\nlist.add(new Pair(personA, personB));\r\n\r\nPerson personC = new Person(&quot;personC&quot;, 3, Gender.MALE);\r\npersonC.foodPreference = FoodPreference.MEAT;\r\nPerson personD = new Person(&quot;personD&quot;, 4, Gender.FEMALE);\r\npersonD.foodPreference = FoodPreference.VEGAN;\r\nlist.add(new Pair(personC, personD));\r\n```\r\n\r\nAnd, here is an example of acquiring _Person_ objects, with a specific value.\r\n\r\n```java\r\nList&lt;Person&gt; find(List&lt;Pair&gt; list, FoodPreference foodPreference, Gender gender) {\r\n    List&lt;Person&gt; matches = new ArrayList&lt;&gt;();\r\n    Person person;\r\n    for (Pair pair : list) {\r\n        person = pair.personA;\r\n        if (person.foodPreference == foodPreference &amp;&amp; person.gender == gender)\r\n            matches.add(person);\r\n        person = pair.personB;\r\n        if (person.foodPreference == foodPreference &amp;&amp; person.gender == gender)\r\n            matches.add(person);\r\n    }\r\n    return matches;\r\n}\r\n```\r\n\r\nAnd, usage.\r\n\r\n```java\r\nList&lt;Person&gt; matches = find(list, FoodPreference.MEAT, Gender.MALE);\r\n```\r\n\r\nOutput\r\n\r\n```java\r\npersonA\r\npersonC\r\n```","title":"How to refactor a three dimensional list?","body":"<blockquote>\n<p><em>&quot;... I read this question, where it is stated that if you are implementing a 3D list you are probably not handling your data right. ...&quot;</em></p>\n</blockquote>\n<p>More or less; typically, 3-dimensional arrays are used to represent mathematical matrices.</p>\n<blockquote>\n<p><em>&quot;... In the mentioned question there is also an answer where a Map is used to store the data, but I am not really understanding this abstraction and I don't know how it could be used for my case. ...&quot;</em></p>\n</blockquote>\n<p>In computer science, a <em>map</em> structure—sometimes referred to as a <em>dictionary</em>, or an <em><a href=\"https://en.wikipedia.org/wiki/Associative_array\" rel=\"nofollow noreferrer\">associative array</a></em>—it's simply a list of values, each of which are mapped to separate keys.  Similar to a literal <em>dictionary</em>, which has a word and a definition.</p>\n<p>Here is the <em>Java Tutorial</em> on using the <em>Map</em> collection.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\" rel=\"nofollow noreferrer\">The Map Interface (The Java™ Tutorials &gt; Collections &gt; Interfaces)</a></em>.</p>\n<p>Here is a basic example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\nmap.put(&quot;abc&quot;, 123);\nmap.put(&quot;def&quot;, 456);\n</code></pre>\n<p>And, you can retrieve values using the <em>&quot;key&quot;</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>map.get(&quot;abc&quot;);\n</code></pre>\n<blockquote>\n<p><em>... Is there a better, cleaner way to do the storing of the Pairs, where I can still get only the Pairs which have foodPreference x and gender y or is my way with the three dimensional list the best way for my specific data?&quot;</em></p>\n</blockquote>\n<p>Yes, I'll demonstrate; you can use a single <em>ArrayList</em>.</p>\n<p>Consider the following objects, to hold your data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Pair {\n    Person personA, personB;\n}\n\nclass Person {\n    String name, location;\n    int age;\n    Gender gender;\n    FoodPreference foodPreference;\n}\n\nenum Gender {\n    MALE, FEMALE, MIXED\n}\n\nenum FoodPreference {\n    MEAT, VEGGIE, VEGAN\n}\n</code></pre>\n<p>From here, you can create new constructors for both <em>Person</em>, and <em>Pair</em>.<br />\nAdditionally, here I added a <em>toString</em> method, as a way to debug the data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Pair {\n    Person personA, personB;\n\n    public Pair(Person personA, Person personB) {\n        this.personA = personA;\n        this.personB = personB;\n    }\n}\n\nclass Person {\n    String name, location;\n    int age;\n    Gender gender;\n    FoodPreference foodPreference;\n\n    public Person(Gender gender, FoodPreference foodPreference) {\n        this.gender = gender;\n        this.foodPreference = foodPreference;\n    }\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n</code></pre>\n<p>Here is an example of adding new items to the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Pair&gt; list = new ArrayList&lt;&gt;();\n\nPerson personA = new Person(&quot;personA&quot;, 1, Gender.MALE);\npersonA.foodPreference = FoodPreference.MEAT;\nPerson personB = new Person(&quot;personB&quot;, 2, Gender.FEMALE);\npersonB.foodPreference = FoodPreference.VEGGIE;\nlist.add(new Pair(personA, personB));\n\nPerson personC = new Person(&quot;personC&quot;, 3, Gender.MALE);\npersonC.foodPreference = FoodPreference.MEAT;\nPerson personD = new Person(&quot;personD&quot;, 4, Gender.FEMALE);\npersonD.foodPreference = FoodPreference.VEGAN;\nlist.add(new Pair(personC, personD));\n</code></pre>\n<p>And, here is an example of acquiring <em>Person</em> objects, with a specific value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; find(List&lt;Pair&gt; list, FoodPreference foodPreference, Gender gender) {\n    List&lt;Person&gt; matches = new ArrayList&lt;&gt;();\n    Person person;\n    for (Pair pair : list) {\n        person = pair.personA;\n        if (person.foodPreference == foodPreference &amp;&amp; person.gender == gender)\n            matches.add(person);\n        person = pair.personB;\n        if (person.foodPreference == foodPreference &amp;&amp; person.gender == gender)\n            matches.add(person);\n    }\n    return matches;\n}\n</code></pre>\n<p>And, usage.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; matches = find(list, FoodPreference.MEAT, Gender.MALE);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-java prettyprint-override\"><code>personA\npersonC\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247381,"reputation":76,"user_id":1147136,"display_name":"sankalpn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691637759,"creation_date":1687217352,"answer_id":76510573,"question_id":76493704,"body_markdown":"After some discussion with OP, I think we have a layer of abstraction missing. Not including any necessary synchronized keywords, as I don&#39;t yet know all details.\r\n\r\n    public class PairManager {\r\n        List&lt;Pair&gt; allPairs;\r\n\r\n        // Add any cache worthy queries\r\n        List&lt;Pair&gt; maleMeatEaters;\r\n\r\n        public addPair(Pair newPair) {\r\n            allPairs.add(newPair);\r\n            // invalidate caches\r\n            maleMeatEaters = null;\r\n        }\r\n\r\n        public removePair(Pair pair) {\r\n            allPairs.remove(pair)\r\n            // invalidate caches\r\n            maleMeatEaters = null;\r\n        }\r\n\r\n        public List&lt;Pair&gt; listMaleMeatEaters() {\r\n            return maleMeatEaters == null ? filterMaleMeatEaters() : maleMeatEaters;\r\n        }\r\n\r\n        private List&lt;Pair&gt; filterMaleMeatEaters() {\r\n            maleMeatEaters = allPairs.stream()\r\n                .filter(pair -&gt; pair.getGender() == Gender.MALE)\r\n                .filter(pair -&gt; pair.getFoodPreference() == FoodPreference.MEAT)\r\n                .toList(); // pre-Java17 .collect(Collectors.toList());\r\n            return maleMeatEaters;\r\n        }\r\n    }","title":"How to refactor a three dimensional list?","body":"<p>After some discussion with OP, I think we have a layer of abstraction missing. Not including any necessary synchronized keywords, as I don't yet know all details.</p>\n<pre><code>public class PairManager {\n    List&lt;Pair&gt; allPairs;\n\n    // Add any cache worthy queries\n    List&lt;Pair&gt; maleMeatEaters;\n\n    public addPair(Pair newPair) {\n        allPairs.add(newPair);\n        // invalidate caches\n        maleMeatEaters = null;\n    }\n\n    public removePair(Pair pair) {\n        allPairs.remove(pair)\n        // invalidate caches\n        maleMeatEaters = null;\n    }\n\n    public List&lt;Pair&gt; listMaleMeatEaters() {\n        return maleMeatEaters == null ? filterMaleMeatEaters() : maleMeatEaters;\n    }\n\n    private List&lt;Pair&gt; filterMaleMeatEaters() {\n        maleMeatEaters = allPairs.stream()\n            .filter(pair -&gt; pair.getGender() == Gender.MALE)\n            .filter(pair -&gt; pair.getFoodPreference() == FoodPreference.MEAT)\n            .toList(); // pre-Java17 .collect(Collectors.toList());\n        return maleMeatEaters;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76494006,"answer_count":4,"score":1,"last_activity_date":1691637759,"creation_date":1686951352,"question_id":76493704,"body_markdown":"I currently have a three dimensional list in my Java project. I am using it to store the following. I have a list of Pairs. A Pair has a gender (male, female or mixed) and a food preference (meat, veggie or vegan). \r\n\r\nIn my code I have to access sometimes only the pairs which have veggie as food preference and are male or other combinations. I first thought that a three dimensional list would be the best to do this. My 3D list looks like the following:\r\n\r\n    ArrayList&lt;ArrayList&lt;ArrayList&lt;Pair&gt;&gt;&gt; pairsSplitUp;\r\n\r\nThe list is filled with values such that if we access it we get the following:\r\n\r\n - Index 0: Index 0: all Pairs that are male and have meat as food Preference\r\n - Index 0: Index 1: all Pairs that are female and have meat as food Preference\r\n - Index 0: Index 2: all Pairs that are mixed and have meat as food Preference\r\n - Index 1: Index 0: all Pairs that are male and have veggie as food Preference\r\n - ...\r\n - Index 2: Index 0: all Pairs that are male and have vegan as food Preference\r\n - ...\r\n\r\nI first thought that this might be the best way to store this data, but then I read this [question](https://stackoverflow.com/questions/3102761/list-of-lists-of-lists/3102901#3102901), where it is stated that if you are implementing a 3D list you are probably not handling your data right. In the mentioned question there is also an [answer](https://stackoverflow.com/a/3102858/12118403) where a Map is used to store the data, but I am not really understanding this abstraction and I don&#39;t know how it could be used for my case. Because of this I wanted to ask, if there is a better, cleaner way for storing my data such that I can still access only the Pairs which are male and vegan etc. \r\n\r\nIn the code there exists a ```ArrayList&lt;Pair&gt; pairList``` which holds all the Pairs. The Pair class looks like the following:\r\n\r\n    public class Pair {\r\n        private Person person1;\r\n        private Person person2; \r\n        private String foodPreference;\r\n        private String gender;\r\n        \r\n        public Pair(Person person1, Person person2) {\r\n            this.person1 = person1;\r\n            this.person2 = person2;\r\n            this.foodPreference = decideFoodPreference();\r\n            this.gender = decideGender();\r\n        }\r\n     \r\n        /*\r\n          contains Getter for the fields and methods to decide and set the foodPreference\r\n          and the gender.\r\n        */\r\n\r\n    }\r\nThe Person class contains information about a specific Person like the name, age, gender, location and so on.\r\n\r\nIs there a better, cleaner way to do the storing of the Pairs, where I can still get only the Pairs which have foodPreference *x* and gender *y* or is my way with the three dimensional list the best way for my specific data?\r\n","title":"How to refactor a three dimensional list?","body":"<p>I currently have a three dimensional list in my Java project. I am using it to store the following. I have a list of Pairs. A Pair has a gender (male, female or mixed) and a food preference (meat, veggie or vegan).</p>\n<p>In my code I have to access sometimes only the pairs which have veggie as food preference and are male or other combinations. I first thought that a three dimensional list would be the best to do this. My 3D list looks like the following:</p>\n<pre><code>ArrayList&lt;ArrayList&lt;ArrayList&lt;Pair&gt;&gt;&gt; pairsSplitUp;\n</code></pre>\n<p>The list is filled with values such that if we access it we get the following:</p>\n<ul>\n<li>Index 0: Index 0: all Pairs that are male and have meat as food Preference</li>\n<li>Index 0: Index 1: all Pairs that are female and have meat as food Preference</li>\n<li>Index 0: Index 2: all Pairs that are mixed and have meat as food Preference</li>\n<li>Index 1: Index 0: all Pairs that are male and have veggie as food Preference</li>\n<li>...</li>\n<li>Index 2: Index 0: all Pairs that are male and have vegan as food Preference</li>\n<li>...</li>\n</ul>\n<p>I first thought that this might be the best way to store this data, but then I read this <a href=\"https://stackoverflow.com/questions/3102761/list-of-lists-of-lists/3102901#3102901\">question</a>, where it is stated that if you are implementing a 3D list you are probably not handling your data right. In the mentioned question there is also an <a href=\"https://stackoverflow.com/a/3102858/12118403\">answer</a> where a Map is used to store the data, but I am not really understanding this abstraction and I don't know how it could be used for my case. Because of this I wanted to ask, if there is a better, cleaner way for storing my data such that I can still access only the Pairs which are male and vegan etc.</p>\n<p>In the code there exists a <code>ArrayList&lt;Pair&gt; pairList</code> which holds all the Pairs. The Pair class looks like the following:</p>\n<pre><code>public class Pair {\n    private Person person1;\n    private Person person2; \n    private String foodPreference;\n    private String gender;\n    \n    public Pair(Person person1, Person person2) {\n        this.person1 = person1;\n        this.person2 = person2;\n        this.foodPreference = decideFoodPreference();\n        this.gender = decideGender();\n    }\n \n    /*\n      contains Getter for the fields and methods to decide and set the foodPreference\n      and the gender.\n    */\n\n}\n</code></pre>\n<p>The Person class contains information about a specific Person like the name, age, gender, location and so on.</p>\n<p>Is there a better, cleaner way to do the storing of the Pairs, where I can still get only the Pairs which have foodPreference <em>x</em> and gender <em>y</em> or is my way with the three dimensional list the best way for my specific data?</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1691616078,"post_id":76871198,"comment_id":135517302,"body_markdown":"You entered six as the salary. `sum = 6`. `else if(sum &gt; 5)` is true. You need to enter salary as `2` to get `R1:1`. Your code will have `R1:2` though.","body":"You entered six as the salary. <code>sum = 6</code>. <code>else if(sum &gt; 5)</code> is true. You need to enter salary as <code>2</code> to get <code>R1:1</code>. Your code will have <code>R1:2</code> though."},{"owner":{"display_name":"user9035826"},"score":0,"creation_date":1691616587,"post_id":76871198,"comment_id":135517375,"body_markdown":"Your program is in an infinite loop with &quot;else if&quot; because sum=1.","body":"Your program is in an infinite loop with &quot;else if&quot; because sum=1."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":3,"creation_date":1691617707,"post_id":76871198,"comment_id":135517550,"body_markdown":"If you want to regularly create software, you will need some ability to debug program. If you want to become a professional developer, you will *need* some debugging skill. This is a good program to debug. One way is to run the program in a debugger. It allows you to set a breakpoint, at which program execution will pause. From that point, you can run the program one-step-at-a-time. That allows you to follow how the program branches, while monitoring the values of variables. This allows you to see how those values affect the control of the program.","body":"If you want to regularly create software, you will need some ability to debug program. If you want to become a professional developer, you will <i>need</i> some debugging skill. This is a good program to debug. One way is to run the program in a debugger. It allows you to set a breakpoint, at which program execution will pause. From that point, you can run the program one-step-at-a-time. That allows you to follow how the program branches, while monitoring the values of variables. This allows you to see how those values affect the control of the program."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1691617760,"post_id":76871198,"comment_id":135517561,"body_markdown":"You might find more advice with Google:  https://www.google.com/search?q=how+to+debug+small+programs&amp;oq=how","body":"You might find more advice with Google:  <a href=\"https://www.google.com/search?q=how+to+debug+small+programs&amp;oq=how\" rel=\"nofollow noreferrer\">google.com/search?q=how+to+debug+small+programs&amp;oq=how</a>"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":1,"creation_date":1691624903,"post_id":76871198,"comment_id":135518317,"body_markdown":"I see you are retrieving the modulus of `sum` within each `if` statement. *What exactly is this code suppose to achieve?*","body":"I see you are retrieving the modulus of <code>sum</code> within each <code>if</code> statement. <i>What exactly is this code suppose to achieve?</i>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1691629793,"post_id":76871198,"comment_id":135518688,"body_markdown":"To add to the comment by @DevilsHnd, including, in the question, a clear statement of what the code is supposed to do is part of writing a good question.","body":"To add to the comment by @DevilsHnd, including, in the question, a clear statement of what the code is supposed to do is part of writing a good question."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691636798,"creation_date":1691634020,"answer_id":76872267,"question_id":76871198,"body_markdown":"&gt; _&quot;... I got different out put when use else and if else for the lase else if condition ...&quot;_\r\n\r\nWhen _sum_ is 1, the _while-loop_ will loop indefinitely.\r\n\r\nIf you use _else_, instead of _else if_, a value of _1_ will be matched, and the loop exits correctly.\r\n\r\nSince you are repeating the same procedure, just use a _loop_.  \r\nThis will match each of those conditions, and additionally checks to see when _sum_ equals _1_.\r\n\r\n```java\r\nint[] sums = { 5000, 2000, 1000, 500, 200, 100, 50, 10, 5, 2, 1 };\r\nfor (int value : sums) {\r\n    if (sum &gt; value || (sum == 1 &amp;&amp; value == 1)) {\r\n        System.out.printf(&quot;R%d : %d%n&quot;, value, sum / value);\r\n        sum %= value * (sum / value);\r\n    }\r\n}\r\n```\r\n\r\nHere are some example outputs,\r\n\r\n```none\r\nInput number of employees : 1\r\nInput Salary : 1 : 6\r\nTotal Salary ; 6\r\n====================\r\nR5 : 1\r\nR1 : 1\r\n```\r\n\r\n```none\r\nInput number of employees : 3\r\nInput Salary : 1 : 123\r\nInput Salary : 2 : 456\r\nInput Salary : 3 : 789\r\nTotal Salary ; 1368\r\n====================\r\nR1000 : 1\r\nR200 : 1\r\nR100 : 1\r\nR50 : 1\r\nR10 : 1\r\nR5 : 1\r\nR2 : 1\r\nR1 : 1\r\n```","title":"Using else and else if i got the errors","body":"<blockquote>\n<p><em>&quot;... I got different out put when use else and if else for the lase else if condition ...&quot;</em></p>\n</blockquote>\n<p>When <em>sum</em> is 1, the <em>while-loop</em> will loop indefinitely.</p>\n<p>If you use <em>else</em>, instead of <em>else if</em>, a value of <em>1</em> will be matched, and the loop exits correctly.</p>\n<p>Since you are repeating the same procedure, just use a <em>loop</em>.<br />\nThis will match each of those conditions, and additionally checks to see when <em>sum</em> equals <em>1</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] sums = { 5000, 2000, 1000, 500, 200, 100, 50, 10, 5, 2, 1 };\nfor (int value : sums) {\n    if (sum &gt; value || (sum == 1 &amp;&amp; value == 1)) {\n        System.out.printf(&quot;R%d : %d%n&quot;, value, sum / value);\n        sum %= value * (sum / value);\n    }\n}\n</code></pre>\n<p>Here are some example outputs,</p>\n<pre class=\"lang-none prettyprint-override\"><code>Input number of employees : 1\nInput Salary : 1 : 6\nTotal Salary ; 6\n====================\nR5 : 1\nR1 : 1\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>Input number of employees : 3\nInput Salary : 1 : 123\nInput Salary : 2 : 456\nInput Salary : 3 : 789\nTotal Salary ; 1368\n====================\nR1000 : 1\nR200 : 1\nR100 : 1\nR50 : 1\nR10 : 1\nR5 : 1\nR2 : 1\nR1 : 1\n</code></pre>\n"}],"owner":{"account_id":23868173,"reputation":1,"user_id":17870236,"display_name":"Akila Umayanga"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691636798,"creation_date":1691614374,"question_id":76871198,"body_markdown":"```\r\nimport java.util.*;\r\nclass Example{\r\n\tpublic static void main(String args[]){\r\n\t\tScanner input =new Scanner(System.in);\r\n\t\tSystem.out.print(&quot;Input number of employees : &quot;);\r\n\t\tint num = input.nextInt();\r\n\t\tint sum = 0;\r\n\t\tfor (int i = 1;i&lt;=num;i++){\r\n\t\t\t\tSystem.out.print(&quot;Input Salary : &quot;+i+&quot; : &quot;);\r\n\t\t\t\tint sal = input.nextInt();\r\n\t\t\t\tsum += sal;\t\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Total Salary ; &quot;+sum);\r\n\t\tSystem.out.println(&quot;====================&quot;);\r\n\t\twhile(sum!=0){\r\n\t\t\tif(sum &gt; 5000){\r\n\t\t\t\t\tint r5000 = sum/5000;\r\n\t\t\t\t\tSystem.out.println(&quot;R5000 : &quot;+r5000);\r\n\t\t\t\t\tsum %= 5000; \r\n\t\t\t\t}else if(sum &gt; 2000){\r\n\t\t\t\t\tint r2000 = sum/2000;\r\n\t\t\t\t\tSystem.out.println(&quot;R2000 : &quot;+r2000);\r\n\t\t\t\t\tsum %= 2000; \r\n\t\t\t\t}else if(sum &gt; 1000){\t\r\n\t\t\t\t\tint r1000 = sum/1000;\r\n\t\t\t\t\tSystem.out.println(&quot;R1000 : &quot;+r1000);\r\n\t\t\t\t\tsum %= 1000; \r\n\t\t\t\t\t}\r\n\t\t\t\telse if(sum &gt; 500){\t\r\n\t\t\t\t\tint r500 = sum/500;\r\n\t\t\t\t\tSystem.out.println(&quot;R500 : &quot;+r500);\r\n\t\t\t\t\tsum %= 500; \r\n\t\t\t\t}else if(sum &gt; 200){\t\r\n\t\t\t\t\tint r200 = sum/200;\r\n\t\t\t\t\tSystem.out.println(&quot;R200 : &quot;+r200);\r\n\t\t\t\t\tsum %= 200; \r\n\t\t\t\t}else if(sum &gt; 100){\t\r\n\t\t\t\t\tint r100 = sum/100;\r\n\t\t\t\t\tSystem.out.println(&quot;R100 : &quot;+r100);\r\n\t\t\t\t\tsum %= 100; \r\n\t\t\t\t}else if(sum &gt; 50){\t\r\n\t\t\t\t\tint r50 = sum/50;\r\n\t\t\t\t\tSystem.out.println(&quot;R50 : &quot;+50);\r\n\t\t\t\t\tsum %= 50; \r\n\t\t\t\t}else if(sum &gt; 10){\t\r\n\t\t\t\t\tint r10 = sum/10;\r\n\t\t\t\t\tSystem.out.println(&quot;R10 : &quot;+r10);\r\n\t\t\t\t\tsum %= 10; \r\n\t\t\t\t}else if(sum &gt; 5){\t\r\n\t\t\t\t\tint r5 = sum/5;\r\n\t\t\t\t\tSystem.out.println(&quot;R5 : &quot;+r5);\r\n\t\t\t\t\tsum %= 5; \r\n\t\t\t\t}else if(sum &gt; 2){\t\r\n\t\t\t\t\tint r2 = sum/2;\r\n\t\t\t\t\tSystem.out.println(&quot;R2 : &quot;+r2);\r\n\t\t\t\t\tsum %= 2; \r\n\t\t\t\t} else if(sum &gt; 1){\t//2nd time I used else instead of else if\r\n\t\t\t\t\tint r1 = sum/1;\r\n\t\t\t\t\tSystem.out.println(&quot;R1 : &quot;+r1);\r\n\t\t\t\t\tsum %= 1; \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThis is my code I got different out put when use else and if else for the lase else if condition:\r\n\r\nusing else if I got below output but its wrong need to show R1 : 1 as same but when use else i got write answer explain me?\r\n\r\n&gt; Input number of employees : 1\r\n&gt;\r\n&gt; Input Salary : 1 : 6\r\n&gt;\r\n&gt; Total Salary ; 6\r\n&gt;\r\n&gt; ====================\r\n&gt;\r\n&gt; R5 : 1\r\n\r\nusing else/ else if, I got above output but its wrong need to show R1 : 1 as same but when use else i got write answer explain me?","title":"Using else and else if i got the errors","body":"<pre><code>import java.util.*;\nclass Example{\n    public static void main(String args[]){\n        Scanner input =new Scanner(System.in);\n        System.out.print(&quot;Input number of employees : &quot;);\n        int num = input.nextInt();\n        int sum = 0;\n        for (int i = 1;i&lt;=num;i++){\n                System.out.print(&quot;Input Salary : &quot;+i+&quot; : &quot;);\n                int sal = input.nextInt();\n                sum += sal; \n        }\n        System.out.println(&quot;Total Salary ; &quot;+sum);\n        System.out.println(&quot;====================&quot;);\n        while(sum!=0){\n            if(sum &gt; 5000){\n                    int r5000 = sum/5000;\n                    System.out.println(&quot;R5000 : &quot;+r5000);\n                    sum %= 5000; \n                }else if(sum &gt; 2000){\n                    int r2000 = sum/2000;\n                    System.out.println(&quot;R2000 : &quot;+r2000);\n                    sum %= 2000; \n                }else if(sum &gt; 1000){   \n                    int r1000 = sum/1000;\n                    System.out.println(&quot;R1000 : &quot;+r1000);\n                    sum %= 1000; \n                    }\n                else if(sum &gt; 500){ \n                    int r500 = sum/500;\n                    System.out.println(&quot;R500 : &quot;+r500);\n                    sum %= 500; \n                }else if(sum &gt; 200){    \n                    int r200 = sum/200;\n                    System.out.println(&quot;R200 : &quot;+r200);\n                    sum %= 200; \n                }else if(sum &gt; 100){    \n                    int r100 = sum/100;\n                    System.out.println(&quot;R100 : &quot;+r100);\n                    sum %= 100; \n                }else if(sum &gt; 50){ \n                    int r50 = sum/50;\n                    System.out.println(&quot;R50 : &quot;+50);\n                    sum %= 50; \n                }else if(sum &gt; 10){ \n                    int r10 = sum/10;\n                    System.out.println(&quot;R10 : &quot;+r10);\n                    sum %= 10; \n                }else if(sum &gt; 5){  \n                    int r5 = sum/5;\n                    System.out.println(&quot;R5 : &quot;+r5);\n                    sum %= 5; \n                }else if(sum &gt; 2){  \n                    int r2 = sum/2;\n                    System.out.println(&quot;R2 : &quot;+r2);\n                    sum %= 2; \n                } else if(sum &gt; 1){ //2nd time I used else instead of else if\n                    int r1 = sum/1;\n                    System.out.println(&quot;R1 : &quot;+r1);\n                    sum %= 1; \n                    }\n                }\n    }\n}\n</code></pre>\n<p>This is my code I got different out put when use else and if else for the lase else if condition:</p>\n<p>using else if I got below output but its wrong need to show R1 : 1 as same but when use else i got write answer explain me?</p>\n<blockquote>\n<p>Input number of employees : 1</p>\n<p>Input Salary : 1 : 6</p>\n<p>Total Salary ; 6</p>\n<p>====================</p>\n<p>R5 : 1</p>\n</blockquote>\n<p>using else/ else if, I got above output but its wrong need to show R1 : 1 as same but when use else i got write answer explain me?</p>\n"},{"tags":["java","audio","encryption","download","mp3"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1571926650,"post_id":58539266,"comment_id":103408121,"body_markdown":"Please try to ask a real question related to the problem you are having. As it is, we have to guess your problem based on your statements of fact.","body":"Please try to ask a real question related to the problem you are having. As it is, we have to guess your problem based on your statements of fact."},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1571935544,"post_id":58539266,"comment_id":103412684,"body_markdown":"Sorry, I have missed a point while asking the question which I have edited now. Actually I want help in how to encrypt audio files while downloading and decrypt it during playing. I have tried a lot to achieve it but did not succeeded.","body":"Sorry, I have missed a point while asking the question which I have edited now. Actually I want help in how to encrypt audio files while downloading and decrypt it during playing. I have tried a lot to achieve it but did not succeeded."},{"owner":{"account_id":149787,"reputation":160287,"user_id":362536,"accept_rate":88,"display_name":"Brad"},"score":0,"creation_date":1571962046,"post_id":58539266,"comment_id":103421930,"body_markdown":"What&#39;s the reason for this?  If you&#39;re trying to protect media files, know that the client that has the decryption key can always decrypt it so there&#39;s little point.","body":"What&#39;s the reason for this?  If you&#39;re trying to protect media files, know that the client that has the decryption key can always decrypt it so there&#39;s little point."},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1572008404,"post_id":58539266,"comment_id":103437056,"body_markdown":"Yes, I know if anyone has decryption key they can decrypt it but I want to decrypt for the rest who are unauthorised. Could you please help with a code","body":"Yes, I know if anyone has decryption key they can decrypt it but I want to decrypt for the rest who are unauthorised. Could you please help with a code"},{"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"score":0,"creation_date":1572110308,"post_id":58539266,"comment_id":103462485,"body_markdown":"We still don&#39;t understand where is the problem. Just keeping it simple - you can use https for encryption in transit and give access to media only to authorized users. Or do you want to download the content encrypted? Then you cannot use the default player","body":"We still don&#39;t understand where is the problem. Just keeping it simple - you can use https for encryption in transit and give access to media only to authorized users. Or do you want to download the content encrypted? Then you cannot use the default player"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1572199363,"post_id":58539266,"comment_id":103478289,"body_markdown":"I am using exoplayer for playing songs. My problem is that without encryption the songs can be easily downloaded and anyone can re-upload it anywhere. So it leads to illegal uploading , so to prevent piracy we need to encrypt the songs while download. But I am unable to perform the encryption despite lot of try. Could you please help me with this.","body":"I am using exoplayer for playing songs. My problem is that without encryption the songs can be easily downloaded and anyone can re-upload it anywhere. So it leads to illegal uploading , so to prevent piracy we need to encrypt the songs while download. But I am unable to perform the encryption despite lot of try. Could you please help me with this."},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1572200505,"post_id":58539266,"comment_id":103478539,"body_markdown":"yes I want to download the encrypted and then again decrypt it when required to play","body":"yes I want to download the encrypted and then again decrypt it when required to play"},{"owner":{"account_id":4351181,"reputation":342,"user_id":3551460,"display_name":"dp2050"},"score":1,"creation_date":1581944642,"post_id":58539266,"comment_id":106595073,"body_markdown":"Have you found a solution? I totally get your point. It seems, we need to use jetpack. But as of now, I have no idea how or what exactly","body":"Have you found a solution? I totally get your point. It seems, we need to use jetpack. But as of now, I have no idea how or what exactly"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1581950943,"post_id":58539266,"comment_id":106598652,"body_markdown":"Thanks for your comment but I have not found any solution. For the timing I am looking at different aspects of my project leaving it for other time. If you find anything tell me we could discuss about it.","body":"Thanks for your comment but I have not found any solution. For the timing I am looking at different aspects of my project leaving it for other time. If you find anything tell me we could discuss about it."},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1587941584,"post_id":58539266,"comment_id":108701434,"body_markdown":"@dp2050 I just got a solution which I seem is working fine","body":"@dp2050 I just got a solution which I seem is working fine"},{"owner":{"account_id":11064233,"reputation":957,"user_id":8124496,"display_name":"coolbeatz71"},"score":0,"creation_date":1605022683,"post_id":58539266,"comment_id":114522506,"body_markdown":"Hey @MrinmoyMk can you share your solution, please? I also have the same problem","body":"Hey @MrinmoyMk can you share your solution, please? I also have the same problem"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1605980413,"post_id":58539266,"comment_id":114822100,"body_markdown":"@coolbeatz71 are you using exoplayer to play the audio files?","body":"@coolbeatz71 are you using exoplayer to play the audio files?"},{"owner":{"account_id":11064233,"reputation":957,"user_id":8124496,"display_name":"coolbeatz71"},"score":0,"creation_date":1606068546,"post_id":58539266,"comment_id":114841367,"body_markdown":"Yes, @MrinmoyMk  I am using exoplayer. But I want to decrypt the file as it&#39;s playing. Means, to decrypt byte by byte and play the decrypted stream without storing the decrypted file. This will avoid illegal copy","body":"Yes, @MrinmoyMk  I am using exoplayer. But I want to decrypt the file as it&#39;s playing. Means, to decrypt byte by byte and play the decrypted stream without storing the decrypted file. This will avoid illegal copy"},{"owner":{"account_id":1679016,"reputation":271,"user_id":1543784,"accept_rate":75,"display_name":"user1543784"},"score":0,"creation_date":1610287933,"post_id":58539266,"comment_id":116079367,"body_markdown":"@MrinmoyMk, you mentioned that you have found the solution. Can you share it here? Or the link(s) to helpful content?","body":"@MrinmoyMk, you mentioned that you have found the solution. Can you share it here? Or the link(s) to helpful content?"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1610299310,"post_id":58539266,"comment_id":116082996,"body_markdown":"Okay I have added the solution. Hope it helps you","body":"Okay I have added the solution. Hope it helps you"}],"answers":[{"comments":[{"owner":{"account_id":10565292,"reputation":2108,"user_id":7783718,"display_name":"Abhay Koradiya"},"score":0,"creation_date":1637824451,"post_id":65656209,"comment_id":123929878,"body_markdown":"Can it support seek and buffering?","body":"Can it support seek and buffering?"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1638526876,"post_id":65656209,"comment_id":124117556,"body_markdown":"Yes it support seeking","body":"Yes it support seeking"}],"tags":[],"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1610299280,"creation_date":1610299280,"answer_id":65656209,"question_id":58539266,"body_markdown":"I have found a solution to my question and have been using it in my app since many days without any problem so I think it is good to answer my own question also as many users had asked for solution in comments. So just follow the below codes-\r\n\r\n\r\n      //Downloading and encrypting the audio\r\n\r\n      AesCipherDataSink encryptingDataSink = new AesCipherDataSink(\r\n          Util.getUtf8Bytes(&quot;4J95qN8RxBP8hTpk&quot;),\r\n          new DataSink() {\r\n           private FileOutputStream fileOutputStream;\r\n\r\n           @Override\r\n           public void open(DataSpec dataSpec) throws IOException {\r\n                   fileOutputStream = new FileOutputStream(file);\r\n            }\r\n\r\n           @Override\r\n           public void write(byte[] buffer, int offset, int length) throws IOException {\r\n              fileOutputStream.write(buffer, offset, length);\r\n            }\r\n\r\n           @Override\r\n           public void close() throws IOException {\r\n                 fileOutputStream.close();\r\n             }\r\n            });\r\n\r\n       // Push the data through the sink, and close everything.\r\n       encryptingDataSink.open(new DataSpec(Uri.fromFile(file)));\r\n       URL downloadURL = new URL(strings[0]);\r\n       HttpURLConnection connection = (HttpURLConnection) downloadURL.openConnection();\r\n       connection.setChunkedStreamingMode(0);\r\n       connection.setDoInput(true);\r\n       connection.connect();\r\n       if (connection.getResponseCode() != HttpURLConnection.HTTP_OK) {\r\n          return &quot;Server error&quot;;\r\n       }\r\n\r\n       InputStream inputStream = connection.getInputStream();\r\n       byte[] buffer = new byte[1024];\r\n       int newLength;\r\n       while ((newLength = inputStream.read(buffer)) &gt; 0) {\r\n            encryptingDataSink.write(buffer, 0, newLength);\r\n        }\r\n       encryptingDataSink.close();\r\n       inputStream.close();\r\n\r\n\r\n\r\n       //decrypting and playing the audio\r\n       DataSource.Factory factory =\r\n                    new CustomDataSourceFactory(\r\n                            context,\r\n                            new OkHttpDataSourceFactory(new OkHttpClient(), Util.getUserAgent(context,\r\n                                  context.getResources().getString(R.string.app_name)))\r\n                    );\r\n\r\n        MediaSource videoSource =\r\n                    new ProgressiveMediaSource.Factory(factory)\r\n                            .createMediaSource(Uri.parse(tempFile.getAbsolutePath()));\r\n        exoPlayer.addMediaSource(videoSource);\r\n\r\n        \r\n       //CustomDataSourceFactoryClass\r\n\r\n        public class CustomDataSourceFactory implements DataSource.Factory {\r\n\r\n          private final Context context;\r\n          private final DataSource.Factory baseDataSourceFactory;\r\n\r\n\r\n          public CustomDataSourceFactory(Context context, DataSource.Factory baseDataSourceFactory) {\r\n            this.context = context.getApplicationContext();\r\n            this.baseDataSourceFactory = baseDataSourceFactory;\r\n           }\r\n\r\n           @Override\r\n            public DataSource createDataSource() {\r\n             return new CryptedDefaultDataSource(context, baseDataSourceFactory.createDataSource());\r\n             }\r\n          }\r\n\r\n       //CryptedDafaultDataSource\r\n        public class CryptedDefaultDataSource implements DataSource {\r\n\r\n          private final List&lt;TransferListener&gt; transferListeners;\r\n          private final DataSource baseDataSource;\r\n          private @Nullable\r\n          DataSource fileDataSource,aesCipherDataSource,dataSource;\r\n          private Context context;\r\n\r\n          CryptedDefaultDataSource(Context context, DataSource baseDataSource) {\r\n             this.context=context;\r\n             this.baseDataSource = Assertions.checkNotNull(baseDataSource);\r\n             transferListeners = new ArrayList&lt;&gt;();\r\n          }\r\n\r\n          @Override\r\n          public void addTransferListener(TransferListener transferListener) {\r\n           baseDataSource.addTransferListener(transferListener);\r\n           transferListeners.add(transferListener);\r\n           maybeAddListenerToDataSource(fileDataSource, transferListener);\r\n           maybeAddListenerToDataSource(aesCipherDataSource, transferListener);\r\n          }\r\n\r\n         @Override\r\n         public long open(DataSpec dataSpec) throws IOException {\r\n            Assertions.checkState(dataSource == null);\r\n            if (Util.isLocalFileUri(dataSpec.uri)) {\r\n              dataSource = getCryptedDataSource(getFileDataSource());\r\n            } else {\r\n              dataSource = getCryptedDataSource(baseDataSource);\r\n            }\r\n           return dataSource.open(dataSpec);\r\n          }\r\n\r\n         @Override\r\n          public int read(byte[] buffer, int offset, int readLength) throws IOException {\r\n             return Assertions.checkNotNull(dataSource).read(buffer, offset, readLength);\r\n           }\r\n\r\n          @Nullable\r\n          @Override\r\n           public Uri getUri() {\r\n            return dataSource == null ? null : dataSource.getUri();\r\n          }\r\n\r\n          @Override\r\n          public Map&lt;String, List&lt;String&gt;&gt; getResponseHeaders() {\r\n              return dataSource == null\r\n                ? DataSource.super.getResponseHeaders()\r\n                : dataSource.getResponseHeaders();\r\n           }\r\n\r\n         @Override\r\n         public void close() throws IOException {\r\n           if (dataSource != null) {\r\n            try {\r\n                dataSource.close();\r\n            } finally {\r\n                dataSource = null;\r\n            }\r\n          }\r\n         }\r\n\r\n        private DataSource getFileDataSource() {\r\n          if (fileDataSource == null) {\r\n             fileDataSource = new FileDataSource();\r\n             addListenersToDataSource(fileDataSource);\r\n           }\r\n           return fileDataSource;\r\n         }\r\n\r\n        private DataSource getCryptedDataSource(DataSource upstreamDataSource) {\r\n          if (aesCipherDataSource == null) {\r\n            aesCipherDataSource = new AesCipherDataSource(&quot;4J95qN8RxBP8hTpk&quot;.getBytes(),upstreamDataSource);\r\n            addListenersToDataSource(aesCipherDataSource);\r\n          }\r\n          return aesCipherDataSource;\r\n         }\r\n\r\n       private void addListenersToDataSource(DataSource dataSource) {\r\n         for (int i = 0; i &lt; transferListeners.size(); i++) {\r\n            dataSource.addTransferListener(transferListeners.get(i));\r\n         }\r\n       }\r\n\r\n         private void maybeAddListenerToDataSource(\r\n            @Nullable DataSource dataSource, TransferListener listener) {\r\n          if (dataSource != null) {\r\n            dataSource.addTransferListener(listener);\r\n          }\r\n         }\r\n       }\r\n\r\n\r\n        ","title":"Encrypt audio mp3 file while downloading and decrypt it while playing in android","body":"<p>I have found a solution to my question and have been using it in my app since many days without any problem so I think it is good to answer my own question also as many users had asked for solution in comments. So just follow the below codes-</p>\n<pre><code>  //Downloading and encrypting the audio\n\n  AesCipherDataSink encryptingDataSink = new AesCipherDataSink(\n      Util.getUtf8Bytes(&quot;4J95qN8RxBP8hTpk&quot;),\n      new DataSink() {\n       private FileOutputStream fileOutputStream;\n\n       @Override\n       public void open(DataSpec dataSpec) throws IOException {\n               fileOutputStream = new FileOutputStream(file);\n        }\n\n       @Override\n       public void write(byte[] buffer, int offset, int length) throws IOException {\n          fileOutputStream.write(buffer, offset, length);\n        }\n\n       @Override\n       public void close() throws IOException {\n             fileOutputStream.close();\n         }\n        });\n\n   // Push the data through the sink, and close everything.\n   encryptingDataSink.open(new DataSpec(Uri.fromFile(file)));\n   URL downloadURL = new URL(strings[0]);\n   HttpURLConnection connection = (HttpURLConnection) downloadURL.openConnection();\n   connection.setChunkedStreamingMode(0);\n   connection.setDoInput(true);\n   connection.connect();\n   if (connection.getResponseCode() != HttpURLConnection.HTTP_OK) {\n      return &quot;Server error&quot;;\n   }\n\n   InputStream inputStream = connection.getInputStream();\n   byte[] buffer = new byte[1024];\n   int newLength;\n   while ((newLength = inputStream.read(buffer)) &gt; 0) {\n        encryptingDataSink.write(buffer, 0, newLength);\n    }\n   encryptingDataSink.close();\n   inputStream.close();\n\n\n\n   //decrypting and playing the audio\n   DataSource.Factory factory =\n                new CustomDataSourceFactory(\n                        context,\n                        new OkHttpDataSourceFactory(new OkHttpClient(), Util.getUserAgent(context,\n                              context.getResources().getString(R.string.app_name)))\n                );\n\n    MediaSource videoSource =\n                new ProgressiveMediaSource.Factory(factory)\n                        .createMediaSource(Uri.parse(tempFile.getAbsolutePath()));\n    exoPlayer.addMediaSource(videoSource);\n\n    \n   //CustomDataSourceFactoryClass\n\n    public class CustomDataSourceFactory implements DataSource.Factory {\n\n      private final Context context;\n      private final DataSource.Factory baseDataSourceFactory;\n\n\n      public CustomDataSourceFactory(Context context, DataSource.Factory baseDataSourceFactory) {\n        this.context = context.getApplicationContext();\n        this.baseDataSourceFactory = baseDataSourceFactory;\n       }\n\n       @Override\n        public DataSource createDataSource() {\n         return new CryptedDefaultDataSource(context, baseDataSourceFactory.createDataSource());\n         }\n      }\n\n   //CryptedDafaultDataSource\n    public class CryptedDefaultDataSource implements DataSource {\n\n      private final List&lt;TransferListener&gt; transferListeners;\n      private final DataSource baseDataSource;\n      private @Nullable\n      DataSource fileDataSource,aesCipherDataSource,dataSource;\n      private Context context;\n\n      CryptedDefaultDataSource(Context context, DataSource baseDataSource) {\n         this.context=context;\n         this.baseDataSource = Assertions.checkNotNull(baseDataSource);\n         transferListeners = new ArrayList&lt;&gt;();\n      }\n\n      @Override\n      public void addTransferListener(TransferListener transferListener) {\n       baseDataSource.addTransferListener(transferListener);\n       transferListeners.add(transferListener);\n       maybeAddListenerToDataSource(fileDataSource, transferListener);\n       maybeAddListenerToDataSource(aesCipherDataSource, transferListener);\n      }\n\n     @Override\n     public long open(DataSpec dataSpec) throws IOException {\n        Assertions.checkState(dataSource == null);\n        if (Util.isLocalFileUri(dataSpec.uri)) {\n          dataSource = getCryptedDataSource(getFileDataSource());\n        } else {\n          dataSource = getCryptedDataSource(baseDataSource);\n        }\n       return dataSource.open(dataSpec);\n      }\n\n     @Override\n      public int read(byte[] buffer, int offset, int readLength) throws IOException {\n         return Assertions.checkNotNull(dataSource).read(buffer, offset, readLength);\n       }\n\n      @Nullable\n      @Override\n       public Uri getUri() {\n        return dataSource == null ? null : dataSource.getUri();\n      }\n\n      @Override\n      public Map&lt;String, List&lt;String&gt;&gt; getResponseHeaders() {\n          return dataSource == null\n            ? DataSource.super.getResponseHeaders()\n            : dataSource.getResponseHeaders();\n       }\n\n     @Override\n     public void close() throws IOException {\n       if (dataSource != null) {\n        try {\n            dataSource.close();\n        } finally {\n            dataSource = null;\n        }\n      }\n     }\n\n    private DataSource getFileDataSource() {\n      if (fileDataSource == null) {\n         fileDataSource = new FileDataSource();\n         addListenersToDataSource(fileDataSource);\n       }\n       return fileDataSource;\n     }\n\n    private DataSource getCryptedDataSource(DataSource upstreamDataSource) {\n      if (aesCipherDataSource == null) {\n        aesCipherDataSource = new AesCipherDataSource(&quot;4J95qN8RxBP8hTpk&quot;.getBytes(),upstreamDataSource);\n        addListenersToDataSource(aesCipherDataSource);\n      }\n      return aesCipherDataSource;\n     }\n\n   private void addListenersToDataSource(DataSource dataSource) {\n     for (int i = 0; i &lt; transferListeners.size(); i++) {\n        dataSource.addTransferListener(transferListeners.get(i));\n     }\n   }\n\n     private void maybeAddListenerToDataSource(\n        @Nullable DataSource dataSource, TransferListener listener) {\n      if (dataSource != null) {\n        dataSource.addTransferListener(listener);\n      }\n     }\n   }\n\n\n    \n</code></pre>\n"}],"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65656209,"answer_count":1,"score":1,"last_activity_date":1691636662,"creation_date":1571912557,"question_id":58539266,"body_markdown":"I have an android application which downloads and play mp3 files. But I want to encrypt audio files while downloading and then decrypt to play it. I have already checked everywhere in the internet but did not find any solution. Could anyone please help me how to encrypt audio files while downloading and then decrypt during playing\r\nHere is my code to download the files\r\n \r\n         private void download() {\r\n        if (Constant.arrayList_play.size() &gt; 0) {\r\n\r\n            File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/Myapp/cache&quot;);\r\n            if (!root.exists()) {\r\n                root.mkdirs();\r\n            }\r\n\r\n            File file = new File(root, Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name() + &quot;.mp3&quot;);\r\n\r\n            if (!file.exists()) {\r\n\r\n                String url = Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Url();\r\n                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\r\n                request.setDescription(getResources().getString(R.string.downloading) + &quot; - &quot; + Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name());\r\n                request.setTitle(Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name());\r\n                request.allowScanningByMediaScanner();\r\n                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n                request.setDestinationUri(Uri.parse(&quot;file://&quot; + Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/Myapp/cache/&quot; + Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name() + &quot;.mp3&quot;));\r\n                DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);\r\n                manager.enqueue(request);\r\n\r\n                new AsyncTask&lt;String, String, String&gt;() {\r\n                    @Override\r\n                    protected String doInBackground(String... strings) {\r\n                        String json = JsonUtils.getJSONString(Constant.URL_DOWNLOAD_COUNT + Constant.arrayList_play.get(viewpager.getCurrentItem()).getId());\r\n                        Log.e(&quot;aaa - &quot;, json);\r\n                        return null;\r\n                    }\r\n                }.execute();\r\n                Toast.makeText(MainActivity.this, getResources().getString(R.string.downloading), Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                Toast.makeText(MainActivity.this, getResources().getString(R.string.already_download), Toast.LENGTH_SHORT).show();\r\n            }\r\n        } else {\r\n            Toast.makeText(MainActivity.this, getResources().getString(R.string.no_song_selected), Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\nSo could you please help me with a code.","title":"Encrypt audio mp3 file while downloading and decrypt it while playing in android","body":"<p>I have an android application which downloads and play mp3 files. But I want to encrypt audio files while downloading and then decrypt to play it. I have already checked everywhere in the internet but did not find any solution. Could anyone please help me how to encrypt audio files while downloading and then decrypt during playing\nHere is my code to download the files</p>\n\n<pre><code>     private void download() {\n    if (Constant.arrayList_play.size() &gt; 0) {\n\n        File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + \"/Myapp/cache\");\n        if (!root.exists()) {\n            root.mkdirs();\n        }\n\n        File file = new File(root, Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name() + \".mp3\");\n\n        if (!file.exists()) {\n\n            String url = Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Url();\n            DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\n            request.setDescription(getResources().getString(R.string.downloading) + \" - \" + Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name());\n            request.setTitle(Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name());\n            request.allowScanningByMediaScanner();\n            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\n            request.setDestinationUri(Uri.parse(\"file://\" + Environment.getExternalStorageDirectory().getAbsolutePath() + \"/Myapp/cache/\" + Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name() + \".mp3\"));\n            DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);\n            manager.enqueue(request);\n\n            new AsyncTask&lt;String, String, String&gt;() {\n                @Override\n                protected String doInBackground(String... strings) {\n                    String json = JsonUtils.getJSONString(Constant.URL_DOWNLOAD_COUNT + Constant.arrayList_play.get(viewpager.getCurrentItem()).getId());\n                    Log.e(\"aaa - \", json);\n                    return null;\n                }\n            }.execute();\n            Toast.makeText(MainActivity.this, getResources().getString(R.string.downloading), Toast.LENGTH_SHORT).show();\n        } else {\n            Toast.makeText(MainActivity.this, getResources().getString(R.string.already_download), Toast.LENGTH_SHORT).show();\n        }\n    } else {\n        Toast.makeText(MainActivity.this, getResources().getString(R.string.no_song_selected), Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n\n<p>So could you please help me with a code.</p>\n"},{"tags":["java","maven","selenium-webdriver","testng","software-quality"],"comments":[{"owner":{"account_id":19680594,"reputation":149,"user_id":14407807,"display_name":"Farha Mansuri"},"score":0,"creation_date":1691555337,"post_id":76864534,"comment_id":135505828,"body_markdown":"Have you written javascript or jquery for your calendar?","body":"Have you written javascript or jquery for your calendar?"},{"owner":{"account_id":14433320,"reputation":16,"user_id":10426045,"display_name":"Fahim"},"score":0,"creation_date":1691557599,"post_id":76864534,"comment_id":135506056,"body_markdown":"No, I have not written any.","body":"No, I have not written any."}],"answers":[{"comments":[{"owner":{"account_id":14433320,"reputation":16,"user_id":10426045,"display_name":"Fahim"},"score":0,"creation_date":1691577640,"post_id":76866051,"comment_id":135509602,"body_markdown":"Thanks for your response. I am sorry to say that still this doesn&#39;t solve the issue.  i am getting this error instead\n```\norg.openqa.selenium.TimeoutException: Expected condition failed: waiting for element to be clickable: By.id: onetrust-accept-btn-handler (tried for 5 second(s) with 500 milliseconds interval)\n```","body":"Thanks for your response. I am sorry to say that still this doesn&#39;t solve the issue.  i am getting this error instead ``` org.openqa.selenium.TimeoutException: Expected condition failed: waiting for element to be clickable: By.id: onetrust-accept-btn-handler (tried for 5 second(s) with 500 milliseconds interval) ```"},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":1,"creation_date":1691578461,"post_id":76866051,"comment_id":135509755,"body_markdown":"Are you not getting `Accept All` cookies pop-up when the browser is launched? If not, then comment out that line and try. `wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;onetrust-accept-btn-handler&quot;))).click();`","body":"Are you not getting <code>Accept All</code> cookies pop-up when the browser is launched? If not, then comment out that line and try. <code>wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;on&zwnj;&#8203;etrust-accept-btn-ha&zwnj;&#8203;ndler&quot;))).click();</code>"},{"owner":{"account_id":14433320,"reputation":16,"user_id":10426045,"display_name":"Fahim"},"score":0,"creation_date":1691578785,"post_id":76866051,"comment_id":135509828,"body_markdown":"oh my bad. now its working &lt;3.","body":"oh my bad. now its working &lt;3."},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1691578902,"post_id":76866051,"comment_id":135509849,"body_markdown":"Glad is worked. [What should I do when someone answers my question?](https://stackoverflow.com/help/someone-answers)","body":"Glad is worked. <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"},{"owner":{"account_id":14433320,"reputation":16,"user_id":10426045,"display_name":"Fahim"},"score":0,"creation_date":1691580589,"post_id":76866051,"comment_id":135510182,"body_markdown":"Still I think it doesn&#39;t use the today button in the calender of the date picker. Instead it sends the date into the date picker. Please correct me if i am wrong.","body":"Still I think it doesn&#39;t use the today button in the calender of the date picker. Instead it sends the date into the date picker. Please correct me if i am wrong."},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1691582224,"post_id":76866051,"comment_id":135510528,"body_markdown":"Yes that&#39;s correct. The solution I provided in the answer is to send upcoming Monday as `send_keys` into text box.","body":"Yes that&#39;s correct. The solution I provided in the answer is to send upcoming Monday as <code>send_keys</code> into text box."}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691571025,"creation_date":1691571025,"answer_id":76866051,"question_id":76864534,"body_markdown":"**Refer the below working code with explanation:**\r\n````\r\npublic static void main(String[] args) {\r\n    // TODO Auto-generated method stub\r\n    WebDriver driver = new ChromeDriver();\r\n\tdriver.manage().window().maximize();\r\n\tdriver.get(&quot;https://www.wufoo.com/html5/date-type/&quot;);\r\n\tWebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(30));\r\n\t// below line will accept cookies\r\n\twait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;onetrust-accept-btn-handler&quot;))).click();\r\n\t\t\r\n\t// below 2 lines will get the next Monday in dd/MM/yyyy format\r\n\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;);  \r\n\tLocalDateTime now = LocalDateTime.now();\r\n\tString nextMonday = Objects.toString(dtf.format(now.with(TemporalAdjusters.nextOrSame(DayOfWeek.MONDAY))));\r\n\t\t\r\n\t// below line will send next Monday&#39;s date to date picker input text box\r\n\twait.until(ExpectedConditions.elementToBeClickable(By.name(&quot;date&quot;))).sendKeys(nextMonday);\r\n}\r\n````\r\n\r\n**Required imports:**\r\n````\r\nimport java.time.DayOfWeek;\r\nimport java.time.Duration;\r\nimport java.time.LocalDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.temporal.TemporalAdjusters;\r\nimport java.util.Objects;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\n````\r\n\r\n**Result:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mGqqZ.png","title":"How to select today from html date picker instead of just putting the date there using selenuim and testng for a maven project","body":"<p><strong>Refer the below working code with explanation:</strong></p>\n<pre><code>public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    WebDriver driver = new ChromeDriver();\n    driver.manage().window().maximize();\n    driver.get(&quot;https://www.wufoo.com/html5/date-type/&quot;);\n    WebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(30));\n    // below line will accept cookies\n    wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;onetrust-accept-btn-handler&quot;))).click();\n        \n    // below 2 lines will get the next Monday in dd/MM/yyyy format\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;);  \n    LocalDateTime now = LocalDateTime.now();\n    String nextMonday = Objects.toString(dtf.format(now.with(TemporalAdjusters.nextOrSame(DayOfWeek.MONDAY))));\n        \n    // below line will send next Monday's date to date picker input text box\n    wait.until(ExpectedConditions.elementToBeClickable(By.name(&quot;date&quot;))).sendKeys(nextMonday);\n}\n</code></pre>\n<p><strong>Required imports:</strong></p>\n<pre><code>import java.time.DayOfWeek;\nimport java.time.Duration;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.TemporalAdjusters;\nimport java.util.Objects;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n</code></pre>\n<p><strong>Result:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/mGqqZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mGqqZ.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":14433320,"reputation":16,"user_id":10426045,"display_name":"Fahim"},"score":0,"creation_date":1691577226,"post_id":76866086,"comment_id":135509514,"body_markdown":"Thank you for your answer. I can sendkeys. But I can&#39;t really use today button for this case. So looking forward to learn this new thing...","body":"Thank you for your answer. I can sendkeys. But I can&#39;t really use today button for this case. So looking forward to learn this new thing..."},{"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"score":1,"creation_date":1691577843,"post_id":76866086,"comment_id":135509644,"body_markdown":"@Fahim that button is inside calendar that is not `WebElement`. Probably it can be accessed by some js script, but I&#39;m not sure you need this in current case. Also it can be clicked by guessing it&#39;s location and perform click via Actions, but this is also bad, as far as it&#39;s location on different screen resolutions would be different. So just use sendKeys in this case.","body":"@Fahim that button is inside calendar that is not <code>WebElement</code>. Probably it can be accessed by some js script, but I&#39;m not sure you need this in current case. Also it can be clicked by guessing it&#39;s location and perform click via Actions, but this is also bad, as far as it&#39;s location on different screen resolutions would be different. So just use sendKeys in this case."}],"tags":[],"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691571248,"creation_date":1691571248,"answer_id":76866086,"question_id":76864534,"body_markdown":"It&#39;s not easy to do, as far as opened calendar is actually not DOM element.\r\nSo &#39;user behaviour&#39; as native click you can only simulate as clicking by coordinates (which I suggest you not to do).\r\n\r\nHowever. you can pass date in input itself via `sendKeys`, that would be easiest solution in your case.\r\n\r\n```java\r\nWebElement dateElement = wdwait.until(ExpectedConditions.visibilityOfElementLocated(new By.ByCssSelector(&quot;[type=date]&quot;)));\r\nLocalDate currentDate = LocalDate.now();\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;ddMMyyyy&quot;);\r\ndateElement.sendKeys(currentDate.format(formatter));\r\n```","title":"How to select today from html date picker instead of just putting the date there using selenuim and testng for a maven project","body":"<p>It's not easy to do, as far as opened calendar is actually not DOM element.\nSo 'user behaviour' as native click you can only simulate as clicking by coordinates (which I suggest you not to do).</p>\n<p>However. you can pass date in input itself via <code>sendKeys</code>, that would be easiest solution in your case.</p>\n<pre class=\"lang-java prettyprint-override\"><code>WebElement dateElement = wdwait.until(ExpectedConditions.visibilityOfElementLocated(new By.ByCssSelector(&quot;[type=date]&quot;)));\nLocalDate currentDate = LocalDate.now();\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;ddMMyyyy&quot;);\ndateElement.sendKeys(currentDate.format(formatter));\n</code></pre>\n"}],"owner":{"account_id":14433320,"reputation":16,"user_id":10426045,"display_name":"Fahim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691635588,"creation_date":1691554545,"question_id":76864534,"body_markdown":"I can not click the today button in calender. here is an example in this website **&lt;https://www.wufoo.com/html5/date-type/&gt;**. `&lt;input type=&quot;date&quot;&gt;` this is the html for date i am talking about. how to select and click today button in this.\r\n\r\n[![here i want to click this Today button](https://i.stack.imgur.com/SIuoK.png)](https://i.stack.imgur.com/SIuoK.png).\r\n\r\nI could send the date value in the date input field. But I am expecting to click the today button instead of sending the date as input\r\n\r\nHere is the pom.xml file\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;delete_it&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;delete_it&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n      &lt;version&gt;3.141.59&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n      &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n      &lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n      &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n      &lt;version&gt;6.9.8&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n      &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n      &lt;version&gt;5.3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n      &lt;version&gt;1.7.36&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n      &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n      &lt;version&gt;1.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-firefox-driver&lt;/artifactId&gt;\r\n      &lt;version&gt;4.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\n\r\n  &lt;/dependencies&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;1.8&lt;/source&gt;\r\n          &lt;target&gt;1.8&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThis is the test file\r\n\r\n```\r\npackage org.example;\r\n\r\nimport io.github.bonigarcia.wdm.WebDriverManager;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.testng.annotations.Test;\r\n\r\nimport java.time.LocalDate;\r\n\r\npublic class AppTest\r\n{\r\n    public static WebDriver driver;\r\n    public LocalDate today = LocalDate.now();\r\n\r\n    @Test\r\n    public void wow() throws InterruptedException {\r\n        WebDriverManager.chromedriver().setup();\r\n        driver = new ChromeDriver();\r\n        driver.manage().window().maximize();\r\n        driver.get(&quot;https://www.wufoo.com/html5/date-type/&quot;);\r\n        Thread.sleep(0500);\r\n        driver.findElement(By.xpath(&quot;//*[@id=\\&quot;main\\&quot;]/section[1]/div/p[3]/input&quot;)).click(); // want to click the calender button. but it is clicking the text input field\r\n    }\r\n\r\n\r\n}\r\n```","title":"How to select today from html date picker instead of just putting the date there using selenuim and testng for a maven project","body":"<p>I can not click the today button in calender. here is an example in this website <strong><a href=\"https://www.wufoo.com/html5/date-type/\" rel=\"nofollow noreferrer\">https://www.wufoo.com/html5/date-type/</a></strong>. <code>&lt;input type=&quot;date&quot;&gt;</code> this is the html for date i am talking about. how to select and click today button in this.</p>\n<p><a href=\"https://i.stack.imgur.com/SIuoK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SIuoK.png\" alt=\"here i want to click this Today button\" /></a>.</p>\n<p>I could send the date value in the date input field. But I am expecting to click the today button instead of sending the date as input</p>\n<p>Here is the pom.xml file</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;delete_it&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;delete_it&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n      &lt;version&gt;3.141.59&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n      &lt;artifactId&gt;guava&lt;/artifactId&gt;\n      &lt;version&gt;31.0.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testng&lt;/groupId&gt;\n      &lt;artifactId&gt;testng&lt;/artifactId&gt;\n      &lt;version&gt;6.9.8&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n      &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n      &lt;version&gt;5.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n      &lt;version&gt;1.7.36&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n      &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n      &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-firefox-driver&lt;/artifactId&gt;\n      &lt;version&gt;4.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>This is the test file</p>\n<pre><code>package org.example;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.Test;\n\nimport java.time.LocalDate;\n\npublic class AppTest\n{\n    public static WebDriver driver;\n    public LocalDate today = LocalDate.now();\n\n    @Test\n    public void wow() throws InterruptedException {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        driver.get(&quot;https://www.wufoo.com/html5/date-type/&quot;);\n        Thread.sleep(0500);\n        driver.findElement(By.xpath(&quot;//*[@id=\\&quot;main\\&quot;]/section[1]/div/p[3]/input&quot;)).click(); // want to click the calender button. but it is clicking the text input field\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","sublimetext4"],"owner":{"account_id":1153695,"reputation":1,"user_id":1134875,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691634923,"creation_date":1691634923,"question_id":76872321,"body_markdown":"imports like the following:\r\n```\r\n    import org.lwjgl.Version;\r\n    import org.jsoup.select.Elements;\r\n    import org.slf4j.Logger;\r\n```\r\nhave red squiggly lines under them and the error reads cannot resolve import.\r\nIt all complies and runs but, there is no autocomplete.\r\nThe CLASSPATH is set to &#39;/usr/share/java&#39; and the jars are definitely there.\r\nThe latest of LSP and jdtls are installed and Submlie Text is version 4.\r\n\r\n\r\n\r\nI&#39;ve read all the documentation i can find from sublime text and lsp.\r\n\r\nI&#39;ve tried different build systems, gradle, maven and ant but I don&#39;t see how that would make a difference.\r\n\r\nWhat are some likely reasons autocomplete isn&#39;t working? \r\nIs lsp actually suppose to do autocomplete if it has access to the jars files?\r\n\r\n","title":"sublime text lsp-jdtls cannot resolve imports","body":"<p>imports like the following:</p>\n<pre><code>    import org.lwjgl.Version;\n    import org.jsoup.select.Elements;\n    import org.slf4j.Logger;\n</code></pre>\n<p>have red squiggly lines under them and the error reads cannot resolve import.\nIt all complies and runs but, there is no autocomplete.\nThe CLASSPATH is set to '/usr/share/java' and the jars are definitely there.\nThe latest of LSP and jdtls are installed and Submlie Text is version 4.</p>\n<p>I've read all the documentation i can find from sublime text and lsp.</p>\n<p>I've tried different build systems, gradle, maven and ant but I don't see how that would make a difference.</p>\n<p>What are some likely reasons autocomplete isn't working?\nIs lsp actually suppose to do autocomplete if it has access to the jars files?</p>\n"},{"tags":["java","spring-boot","docker"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1691633385,"post_id":76872233,"comment_id":135518986,"body_markdown":"is the jar a uber jar? Why not just build in the dependency into the image or include it in the jar?","body":"is the jar a uber jar? Why not just build in the dependency into the image or include it in the jar?"},{"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"score":0,"creation_date":1691635860,"post_id":76872233,"comment_id":135519183,"body_markdown":"In your pom change junit dependency to be included in jar, also junit test cases be included in jar","body":"In your pom change junit dependency to be included in jar, also junit test cases be included in jar"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1691661299,"post_id":76872233,"comment_id":135522813,"body_markdown":"A typical Java image _only_ contains a JRE and the jar file built out of the main application code; the image wouldn&#39;t contain the source code or compiled unit tests at all, which means you can&#39;t run tests _after_ you&#39;ve built the image.  Can you run the tests on your host system _before_ building the image?","body":"A typical Java image <i>only</i> contains a JRE and the jar file built out of the main application code; the image wouldn&#39;t contain the source code or compiled unit tests at all, which means you can&#39;t run tests <i>after</i> you&#39;ve built the image.  Can you run the tests on your host system <i>before</i> building the image?"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1691661355,"post_id":76872233,"comment_id":135522826,"body_markdown":"(If your image doesn&#39;t look like that, please [edit] the question to include a [mcve].)","body":"(If your image doesn&#39;t look like that, please <a href=\"https://stackoverflow.com/posts/76872233/edit\">edit</a> the question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.)"},{"owner":{"account_id":11044876,"reputation":142,"user_id":11922928,"display_name":"Anıl Şenocak"},"score":0,"creation_date":1692254016,"post_id":76872233,"comment_id":135598865,"body_markdown":"This is not good enough to understand the problem here, please share the code block along with what you&#39;ve done.","body":"This is not good enough to understand the problem here, please share the code block along with what you&#39;ve done."}],"owner":{"account_id":29195854,"reputation":11,"user_id":22366972,"display_name":"Cristian Salazar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1691633211,"creation_date":1691633211,"question_id":76872233,"body_markdown":"I have a springboot application which is deployed using docker. Its Dockerfile has ENTRYPOINT[&quot;java&quot;], so I can execute the application with a java command, but I need to execute on demand the unit tests within the springboot application using docker. How I can do that?\r\n\r\nI tried something like this \r\n\r\n`docker run -it --rm --entrypoint mvn test-java-service test -Dtest=com.service.integration.ControllerTest`, but I get Junit dependecy is required.","title":"I have a docker image of a springboot application with ENTRYPOINT[&quot;java&quot;]. How I can execute a unit test within the application?","body":"<p>I have a springboot application which is deployed using docker. Its Dockerfile has ENTRYPOINT[&quot;java&quot;], so I can execute the application with a java command, but I need to execute on demand the unit tests within the springboot application using docker. How I can do that?</p>\n<p>I tried something like this</p>\n<p><code>docker run -it --rm --entrypoint mvn test-java-service test -Dtest=com.service.integration.ControllerTest</code>, but I get Junit dependecy is required.</p>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1454615603,"post_id":35210120,"comment_id":58135885,"body_markdown":"Try `System.out.println(&quot;java version: &quot;+System.getProperty(&quot;java.version&quot;));` and `System.out.println(&quot;javafx.version: &quot; + System.getProperty(&quot;javafx.version&quot;));`. They will almost certainly be the same, so maybe you are not running with the OS Java version you think you are.","body":"Try <code>System.out.println(&quot;java version: &quot;+System.getProperty(&quot;java.version&quot;));</code> and <code>System.out.println(&quot;javafx.version: &quot; + System.getProperty(&quot;javafx.version&quot;));</code>. They will almost certainly be the same, so maybe you are not running with the OS Java version you think you are."},{"owner":{"account_id":5237964,"reputation":6741,"user_id":4185959,"accept_rate":64,"display_name":"Itai"},"score":0,"creation_date":1454616018,"post_id":35210120,"comment_id":58136117,"body_markdown":"They are in fact not the same. I have edited my question. I suspect since javafx still comes on a separate package on Debian it somehow was not updated.","body":"They are in fact not the same. I have edited my question. I suspect since javafx still comes on a separate package on Debian it somehow was not updated."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1454616574,"post_id":35210120,"comment_id":58136454,"body_markdown":"Ah, yes, you&#39;re using open JDK (I guess), so JavaFX is a separate package. It looks like you have an old version of JavaFX. So I don&#39;t know of any FXML that is specific to u65 over u60, but in general I guess you should probably execute with a version at least as new as the version with which you built it. I&#39;d just go ahead and bring your JavaFX version up to date with your Java version, if possible.","body":"Ah, yes, you&#39;re using open JDK (I guess), so JavaFX is a separate package. It looks like you have an old version of JavaFX. So I don&#39;t know of any FXML that is specific to u65 over u60, but in general I guess you should probably execute with a version at least as new as the version with which you built it. I&#39;d just go ahead and bring your JavaFX version up to date with your Java version, if possible."},{"owner":{"account_id":5237964,"reputation":6741,"user_id":4185959,"accept_rate":64,"display_name":"Itai"},"score":1,"creation_date":1454616769,"post_id":35210120,"comment_id":58136568,"body_markdown":"Currently the openjfx package is on version 8u60, so upgrading would mean building from source, which I am reluctant to do. There is some discussion [here](http://stackoverflow.com/a/19529820/4185959), but I am really confused as to why they are still two separate packages (and why the OpenJFX one has not been updated).","body":"Currently the openjfx package is on version 8u60, so upgrading would mean building from source, which I am reluctant to do. There is some discussion <a href=\"http://stackoverflow.com/a/19529820/4185959\">here</a>, but I am really confused as to why they are still two separate packages (and why the OpenJFX one has not been updated)."}],"answers":[{"tags":[],"owner":{"account_id":7634558,"reputation":2008,"user_id":5788486,"display_name":"Shekhar Rai"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1567499185,"creation_date":1469274644,"answer_id":38541473,"question_id":35210120,"body_markdown":"I think your `JDK` version is `1.8.0_60` and `JRE` version is `1.8.0_65`.\r\n\r\nSo you should use the same version for both of them.\r\n\r\nYou can check your current `JDK` and `JRE` versions on your *command prompt* respectively,\r\n\r\n    java -version\r\n    javac -version\r\n\r\nor you can go through the System properties using following *java code*,\r\n\r\n    System.out.println(System.getProperties());","title":"JavaFX FXML API version warning","body":"<p>I think your <code>JDK</code> version is <code>1.8.0_60</code> and <code>JRE</code> version is <code>1.8.0_65</code>.</p>\n\n<p>So you should use the same version for both of them.</p>\n\n<p>You can check your current <code>JDK</code> and <code>JRE</code> versions on your <em>command prompt</em> respectively,</p>\n\n<pre><code>java -version\njavac -version\n</code></pre>\n\n<p>or you can go through the System properties using following <em>java code</em>,</p>\n\n<pre><code>System.out.println(System.getProperties());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":397698,"reputation":324,"user_id":761977,"accept_rate":100,"display_name":"Sergey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491411080,"creation_date":1491411080,"answer_id":43237188,"question_id":35210120,"body_markdown":"I had the same issue on Linux with Intellij IDEA.  I have solved it by installing the **latest Oracle JDK**, and providing its path in IDEA&#39;s &quot;Project Sturucture&quot; settings menu:\r\n\r\n**File/Project Sturucture/Platform Settings/SDKs**","title":"JavaFX FXML API version warning","body":"<p>I had the same issue on Linux with Intellij IDEA.  I have solved it by installing the <strong>latest Oracle JDK</strong>, and providing its path in IDEA's \"Project Sturucture\" settings menu:</p>\n\n<p><strong>File/Project Sturucture/Platform Settings/SDKs</strong></p>\n"},{"comments":[{"owner":{"account_id":5344881,"reputation":183,"user_id":4260701,"display_name":"geistLich"},"score":1,"creation_date":1521537398,"post_id":47887170,"comment_id":85761146,"body_markdown":"I don&#39;t get the negetive voting for this answer - exactly this worked for me! The entry &quot;xmlns:fx=&quot;http://javafx.com/fxml/1&quot; I do not have touched.","body":"I don&#39;t get the negetive voting for this answer - exactly this worked for me! The entry &quot;xmlns:fx=&quot;<a href=\"http://javafx.com/fxml/1\" rel=\"nofollow noreferrer\">javafx.com/fxml/1</a>&quot; I do not have touched."},{"owner":{"account_id":2771516,"reputation":2174,"user_id":2386040,"display_name":"Jan"},"score":7,"creation_date":1610104399,"post_id":47887170,"comment_id":116032608,"body_markdown":"Mind you: SceneBuilder overwrites this!","body":"Mind you: SceneBuilder overwrites this!"}],"tags":[],"owner":{"account_id":21731,"reputation":9045,"user_id":53069,"accept_rate":77,"display_name":"sproketboy"},"comment_count":2,"down_vote_count":2,"up_vote_count":75,"is_accepted":false,"score":73,"last_activity_date":1513686866,"creation_date":1513686866,"answer_id":47887170,"question_id":35210120,"body_markdown":"If you use the form:\r\n\r\n    xmlns=&quot;http://javafx.com/javafx&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n\r\nThe versioning is ignored. You&#39;d only need it if you had some compatibility issue with another version.","title":"JavaFX FXML API version warning","body":"<p>If you use the form:</p>\n\n<pre><code>xmlns=\"http://javafx.com/javafx\" xmlns:fx=\"http://javafx.com/fxml\"\n</code></pre>\n\n<p>The versioning is ignored. You'd only need it if you had some compatibility issue with another version.</p>\n"},{"tags":[],"owner":{"account_id":13227351,"reputation":137,"user_id":9552086,"display_name":"Sara"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1532204737,"creation_date":1532204737,"answer_id":51459844,"question_id":35210120,"body_markdown":"I have that problem also. I managed it just to change lines in *.fxml files:\r\n\r\njavafx/8.0.171 -&gt; javafx/8.0.141\r\n\r\nPreviously it was like this, it is a line in the begining of fxml file:\r\n\r\n    &lt;AnchorPane prefHeight=&quot;300.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/8.0.171&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.application.word.view.LoginController&quot;&gt;\r\n\r\nThen I changed it for:\r\n\r\n    &lt;AnchorPane prefHeight=&quot;300.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/8.0.141&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.application.word.view.LoginController&quot;&gt;\r\n\r\n\r\nAnd it works without any problem. But be carefull that it can be different if you use different jdk generations.\r\n\r\n\r\n \r\n","title":"JavaFX FXML API version warning","body":"<p>I have that problem also. I managed it just to change lines in *.fxml files:</p>\n\n<p>javafx/8.0.171 -> javafx/8.0.141</p>\n\n<p>Previously it was like this, it is a line in the begining of fxml file:</p>\n\n<pre><code>&lt;AnchorPane prefHeight=\"300.0\" prefWidth=\"600.0\" xmlns=\"http://javafx.com/javafx/8.0.171\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"com.application.word.view.LoginController\"&gt;\n</code></pre>\n\n<p>Then I changed it for:</p>\n\n<pre><code>&lt;AnchorPane prefHeight=\"300.0\" prefWidth=\"600.0\" xmlns=\"http://javafx.com/javafx/8.0.141\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"com.application.word.view.LoginController\"&gt;\n</code></pre>\n\n<p>And it works without any problem. But be carefull that it can be different if you use different jdk generations.</p>\n"},{"tags":[],"owner":{"account_id":4365891,"reputation":91,"user_id":3561705,"display_name":"Adam Sokołowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544089883,"creation_date":1544089471,"answer_id":53648487,"question_id":35210120,"body_markdown":"I had same issue.\r\nDunno what IDE you guys are running, but I fixed it on Eclipse.\r\n\r\nInside **project explorer** on right side of **JRE System Library** it was showing **[J2SE-1.5]**.\r\nI right clicked **JRE System Library**, went in **Properties**.\r\nSwitched from **Execution Environement** to **Workspace default environement**.\r\n\r\nIf inside **workspace default environement** brackets it does not show your newest jdk version eg. **(jdk1.8.0_192)** your can change it by picking **Installed JREs** button and switching checked JRE.\r\n\r\nIf your jdk is not listed add it with **ADD** button and pick your JDK directory eg. C:\\Program Files\\Java\\jdk1.8.0_192, as home directory.\r\n\r\nIn case, for some reason, you don&#39;t want to change your default environement just pick **Alternate JRE** instead of **Workspace default JRE**. Then pick right SDK from dropdown menu.\r\n\r\n\r\nPS. Yes you can change version under xmlns option inside your fxml file, but you will have to update entry every time you modify your fxml inside Scene Builder.","title":"JavaFX FXML API version warning","body":"<p>I had same issue.\nDunno what IDE you guys are running, but I fixed it on Eclipse.</p>\n\n<p>Inside <strong>project explorer</strong> on right side of <strong>JRE System Library</strong> it was showing <strong>[J2SE-1.5]</strong>.\nI right clicked <strong>JRE System Library</strong>, went in <strong>Properties</strong>.\nSwitched from <strong>Execution Environement</strong> to <strong>Workspace default environement</strong>.</p>\n\n<p>If inside <strong>workspace default environement</strong> brackets it does not show your newest jdk version eg. <strong>(jdk1.8.0_192)</strong> your can change it by picking <strong>Installed JREs</strong> button and switching checked JRE.</p>\n\n<p>If your jdk is not listed add it with <strong>ADD</strong> button and pick your JDK directory eg. C:\\Program Files\\Java\\jdk1.8.0_192, as home directory.</p>\n\n<p>In case, for some reason, you don't want to change your default environement just pick <strong>Alternate JRE</strong> instead of <strong>Workspace default JRE</strong>. Then pick right SDK from dropdown menu.</p>\n\n<p>PS. Yes you can change version under xmlns option inside your fxml file, but you will have to update entry every time you modify your fxml inside Scene Builder.</p>\n"},{"tags":[],"owner":{"account_id":11380479,"reputation":51,"user_id":8343496,"display_name":"Nosakhare George Ohonba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549971675,"creation_date":1549971675,"answer_id":54649361,"question_id":35210120,"body_markdown":"I had same issues but I solved it by going through this steps\r\n \r\nIf you are using Intellij IDEA goto **File -&gt; Project Structure -&gt; SDKs** and click on the **(-) sign** to remove all other JDK you have before then click on the **(+) sign** to add the new JDK to the project from you **C:\\Program Files (x86)\\Java\\jdk1.8.0_172**.\r\n\r\n","title":"JavaFX FXML API version warning","body":"<p>I had same issues but I solved it by going through this steps</p>\n\n<p>If you are using Intellij IDEA goto <strong>File -> Project Structure -> SDKs</strong> and click on the <strong>(-) sign</strong> to remove all other JDK you have before then click on the <strong>(+) sign</strong> to add the new JDK to the project from you <strong>C:\\Program Files (x86)\\Java\\jdk1.8.0_172</strong>.</p>\n"},{"tags":[],"owner":{"account_id":11081940,"reputation":855,"user_id":8136868,"display_name":"Reza"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1566731334,"creation_date":1566731334,"answer_id":57645461,"question_id":35210120,"body_markdown":"Same was for me. as you mentioned your scene builder version is 8.1.0 while your Javafx version is 8.0.60. well they&#39;re different:)\r\ntwo way to fix this\r\n\r\n - uninstall current scene builder and install the one with same version of your Javafx\r\n - every time you edit a FXML file using scene builder, change xmlns property in your header to your Javafx version\r\n\r\nfor example my javafx version is 9.0.1 while I use scene builder 10.0.1 but after editing in scene builder I change\r\n\r\n    xmlns=&quot;http://javafx.com/javafx/9.0.1&quot;\r\n\r\nto \r\n\r\n    xmlns=&quot;http://javafx.com/javafx/9.0.1&quot;\r\n\r\nfor may own sake :)\r\n","title":"JavaFX FXML API version warning","body":"<p>Same was for me. as you mentioned your scene builder version is 8.1.0 while your Javafx version is 8.0.60. well they're different:)\ntwo way to fix this</p>\n\n<ul>\n<li>uninstall current scene builder and install the one with same version of your Javafx</li>\n<li>every time you edit a FXML file using scene builder, change xmlns property in your header to your Javafx version</li>\n</ul>\n\n<p>for example my javafx version is 9.0.1 while I use scene builder 10.0.1 but after editing in scene builder I change</p>\n\n<pre><code>xmlns=\"http://javafx.com/javafx/9.0.1\"\n</code></pre>\n\n<p>to </p>\n\n<pre><code>xmlns=\"http://javafx.com/javafx/9.0.1\"\n</code></pre>\n\n<p>for may own sake :)</p>\n"},{"tags":[],"owner":{"account_id":16618502,"reputation":11,"user_id":12009503,"display_name":"ARY "},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568441210,"creation_date":1568438837,"answer_id":57932707,"question_id":35210120,"body_markdown":"I was also having samme problem will i was loading my fxml file \r\nWARNING: Loading FXML document with JavaFX API of version 8.0.171 by JavaFX runtime of version 8.0.111\r\nthen i went to oracle website and update the jre till 171 update of java 8.0\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Oe38C.png","title":"JavaFX FXML API version warning","body":"<p>I was also having samme problem will i was loading my fxml file \nWARNING: Loading FXML document with JavaFX API of version 8.0.171 by JavaFX runtime of version 8.0.111\nthen i went to oracle website and update the jre till 171 update of java 8.0\n<a href=\"https://i.stack.imgur.com/Oe38C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Oe38C.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":15693926,"reputation":31,"user_id":11324070,"display_name":"K.H. Shihan Nuwanjith Udayanga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691633135,"creation_date":1691633135,"answer_id":76872224,"question_id":35210120,"body_markdown":"This warning occurs because your JavaFX API version and JavaFX runtime version are not the same.\r\n\r\n - But if you try to manually change the version for the xml file, some of the buttons in the UI you created will not work.\r\n - Therefore, you ignore the JavaFX API version of the FXML document.\r\n\r\n**you change the xml file code line like below**\r\n\r\n    xmlns=&quot;http://javafx.com/javafx&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n\r\n","title":"JavaFX FXML API version warning","body":"<p>This warning occurs because your JavaFX API version and JavaFX runtime version are not the same.</p>\n<ul>\n<li>But if you try to manually change the version for the xml file, some of the buttons in the UI you created will not work.</li>\n<li>Therefore, you ignore the JavaFX API version of the FXML document.</li>\n</ul>\n<p><strong>you change the xml file code line like below</strong></p>\n<pre><code>xmlns=&quot;http://javafx.com/javafx&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\n</code></pre>\n"}],"owner":{"account_id":5237964,"reputation":6741,"user_id":4185959,"accept_rate":64,"display_name":"Itai"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115019,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"answer_count":9,"score":45,"last_activity_date":1691633135,"creation_date":1454614861,"question_id":35210120,"body_markdown":"I have recently started noticing the following warning when starting my JavaFX application: \r\n\r\n &gt; WARNING: Loading FXML document with JavaFX API of version 8.0.65 by JavaFX runtime of version 8.0.60\r\n\r\nThe FXML in question was created by Gluon Scene Builder 8.1.0, running with it&#39;s bundled Java, version 1.8.0_65. The application is launched with my OS Java, version 1.8.0_72. \r\n\r\nThe root node of the FXML does have the attribute\r\n\r\n    xmlns=&quot;http://javafx.com/javafx/8.0.65&quot;\r\n\r\nbut I figured 1.8.0_72 &gt; 1.8.0_65, so why am I getting this message? \r\nIs it something I should be worried about? And is there a way to ask the jre what is the JavaFX API version (which, apparently, is not the same as the Java version)?\r\n\r\nEdit:  \r\nRunning the code James_D suggested gives the following results: \r\n &gt; java version: 1.8.0_72-internal  \r\n &gt; javafx.version: 8.0.60\r\n\r\nSo, looks like the JavaFX version in the JDK is wrong? Or maybe I have an old jfxrt.jar? I&#39;ll look into that. \r\n","title":"JavaFX FXML API version warning","body":"<p>I have recently started noticing the following warning when starting my JavaFX application: </p>\n\n<blockquote>\n  <p>WARNING: Loading FXML document with JavaFX API of version 8.0.65 by JavaFX runtime of version 8.0.60</p>\n</blockquote>\n\n<p>The FXML in question was created by Gluon Scene Builder 8.1.0, running with it's bundled Java, version 1.8.0_65. The application is launched with my OS Java, version 1.8.0_72. </p>\n\n<p>The root node of the FXML does have the attribute</p>\n\n<pre><code>xmlns=\"http://javafx.com/javafx/8.0.65\"\n</code></pre>\n\n<p>but I figured 1.8.0_72 > 1.8.0_65, so why am I getting this message? \nIs it something I should be worried about? And is there a way to ask the jre what is the JavaFX API version (which, apparently, is not the same as the Java version)?</p>\n\n<p>Edit:<br>\nRunning the code James_D suggested gives the following results: </p>\n\n<blockquote>\n  <p>java version: 1.8.0_72-internal<br>\n  javafx.version: 8.0.60</p>\n</blockquote>\n\n<p>So, looks like the JavaFX version in the JDK is wrong? Or maybe I have an old jfxrt.jar? I'll look into that. </p>\n"},{"tags":["java","intellij-idea","playframework","sbt"],"comments":[{"owner":{"display_name":"user180100"},"score":3,"creation_date":1478427934,"post_id":40448203,"comment_id":68142260,"body_markdown":"http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html","body":"<a href=\"http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/faq-sun-packages-142232.html</a>"},{"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"score":0,"creation_date":1478428136,"post_id":40448203,"comment_id":68142315,"body_markdown":"@rc thanks, great link, i kind of knew that, compiler issues warnings, if i use these imports, But why do I get the does not exist error?","body":"@rc thanks, great link, i kind of knew that, compiler issues warnings, if i use these imports, But why do I get the does not exist error?"},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1478428363,"post_id":40448203,"comment_id":68142374,"body_markdown":"this might help http://stackoverflow.com/questions/28603005/replace-classes-from-sun-security-packages","body":"this might help <a href=\"http://stackoverflow.com/questions/28603005/replace-classes-from-sun-security-packages\" title=\"replace classes from sun security packages\">stackoverflow.com/questions/28603005/&hellip;</a>"},{"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"score":0,"creation_date":1478434040,"post_id":40448203,"comment_id":68143834,"body_markdown":"@nullpointer there is the requirement not to use BC. But the main thing here is Intellij and why it does not find a package that&#39;s in the rt.jar","body":"@nullpointer there is the requirement not to use BC. But the main thing here is Intellij and why it does not find a package that&#39;s in the rt.jar"},{"owner":{"account_id":2077773,"reputation":133288,"user_id":1850609,"display_name":"acdcjunior"},"score":0,"creation_date":1520966159,"post_id":40448203,"comment_id":85530475,"body_markdown":"@Spiff yes, if possible, I think you should","body":"@Spiff yes, if possible, I think you should"}],"answers":[{"tags":[],"owner":{"account_id":6983262,"reputation":2982,"user_id":5355272,"accept_rate":25,"display_name":"avp"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1507759689,"creation_date":1507759689,"answer_id":46698305,"question_id":40448203,"body_markdown":"I had a similar error for a different package.\r\n\r\nThe packages we use were mapped to a network drive and my credentials to access that mapped drive were expired, so I had re-authenticate and tried with\r\n\r\nIntelliJ: File -&gt; Invalidate caches / Restart\r\n\r\nOR\r\n\r\n    $gradle clean build\r\n\r\n\r\nHope this helps!","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>I had a similar error for a different package.</p>\n\n<p>The packages we use were mapped to a network drive and my credentials to access that mapped drive were expired, so I had re-authenticate and tried with</p>\n\n<p>IntelliJ: File -> Invalidate caches / Restart</p>\n\n<p>OR</p>\n\n<pre><code>$gradle clean build\n</code></pre>\n\n<p>Hope this helps!</p>\n"},{"comments":[{"owner":{"account_id":101340,"reputation":2439,"user_id":272742,"accept_rate":64,"display_name":"turbanoff"},"score":0,"creation_date":1590150218,"post_id":51095617,"comment_id":109578131,"body_markdown":"_You need to compile with the -XDignore.symbol.file option_. Where in IntelliJ IDEA I can specify this option?","body":"<i>You need to compile with the -XDignore.symbol.file option</i>. Where in IntelliJ IDEA I can specify this option?"},{"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"score":0,"creation_date":1590151507,"post_id":51095617,"comment_id":109578837,"body_markdown":"It should be File-&gt;Settings-&gt;Build Execution Deployment-&gt;Java Compiler-&gt; Additional command line parameters","body":"It should be File-&gt;Settings-&gt;Build Execution Deployment-&gt;Java Compiler-&gt; Additional command line parameters"},{"owner":{"account_id":101340,"reputation":2439,"user_id":272742,"accept_rate":64,"display_name":"turbanoff"},"score":1,"creation_date":1590152290,"post_id":51095617,"comment_id":109579279,"body_markdown":"Nope. It doesn&#39;t help. I created bug report https://youtrack.jetbrains.com/issue/IDEA-241594","body":"Nope. It doesn&#39;t help. I created bug report <a href=\"https://youtrack.jetbrains.com/issue/IDEA-241594\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-241594</a>"},{"owner":{"account_id":178977,"reputation":1161,"user_id":411290,"accept_rate":67,"display_name":"alexfr"},"score":0,"creation_date":1594414573,"post_id":51095617,"comment_id":111129182,"body_markdown":"@turbanoff: Eugene Zhuravlev&#39;s comment in the linked issue finally explains the exact reasons why those error messages occur.","body":"@turbanoff: Eugene Zhuravlev&#39;s comment in the linked issue finally explains the exact reasons why those error messages occur."}],"tags":[],"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1530556059,"creation_date":1530253974,"answer_id":51095617,"question_id":40448203,"body_markdown":"This is not an intellij issue.\r\n\r\n\r\nYou need to compile with the `-XDignore.symbol.file` option. Some internal packages\r\nare hidden by default unless you add this option to javac.\r\n\r\nhttps://bugs.openjdk.java.net/browse/JDK-7141442\r\n\r\nhttps://stackoverflow.com/questions/29060064/sun-security-x509-certandkeygen-and-sun-security-pkcs-pkcs10-missing-in-jdk8\r\n\r\n\r\nAlso the comment of user @user180100 is relevant and important.\r\n\r\n&gt; The sun.* packages are not part of the supported, public interface.  \r\nA\r\n&gt; Java program that directly calls into sun.* packages is not guaranteed\r\n&gt; to work on all Java-compatible platforms. In fact, such a program is\r\n&gt; not guaranteed to work even in future versions on the same platform.\r\n\r\n","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>This is not an intellij issue.</p>\n\n<p>You need to compile with the <code>-XDignore.symbol.file</code> option. Some internal packages\nare hidden by default unless you add this option to javac.</p>\n\n<p><a href=\"https://bugs.openjdk.java.net/browse/JDK-7141442\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-7141442</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/29060064/sun-security-x509-certandkeygen-and-sun-security-pkcs-pkcs10-missing-in-jdk8\">sun.security.x509.CertAndKeyGen and sun.security.pkcs.PKCS10 - missing in JDK8. Implementation suggestions</a></p>\n\n<p>Also the comment of user @user180100 is relevant and important.</p>\n\n<blockquote>\n  <p>The sun.* packages are not part of the supported, public interface.<br>\n  A\n  Java program that directly calls into sun.* packages is not guaranteed\n  to work on all Java-compatible platforms. In fact, such a program is\n  not guaranteed to work even in future versions on the same platform.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":9457790,"reputation":478,"user_id":7032513,"display_name":"Kevin Oswaldo"},"score":1,"creation_date":1611079955,"post_id":65486144,"comment_id":116333515,"body_markdown":"This did work for me, I haven&#39;t have any secondary effects yet. With this option, IntelliJ deduces from project settings when the cross-compilation is needed and automatically applies the --release compiler option for Java 9. according to this answer https://stackoverflow.com/a/49618223/7032513","body":"This did work for me, I haven&#39;t have any secondary effects yet. With this option, IntelliJ deduces from project settings when the cross-compilation is needed and automatically applies the --release compiler option for Java 9. according to this answer <a href=\"https://stackoverflow.com/a/49618223/7032513\">stackoverflow.com/a/49618223/7032513</a>"},{"owner":{"account_id":9782615,"reputation":560,"user_id":7250020,"display_name":"Kacper Cichecki"},"score":0,"creation_date":1611228072,"post_id":65486144,"comment_id":116385544,"body_markdown":"I didn&#39;t analyse this option too much. It worked for me so I was happy. What do you mean &quot;cross-compilation&quot;?","body":"I didn&#39;t analyse this option too much. It worked for me so I was happy. What do you mean &quot;cross-compilation&quot;?"},{"owner":{"account_id":9457790,"reputation":478,"user_id":7032513,"display_name":"Kevin Oswaldo"},"score":0,"creation_date":1611353371,"post_id":65486144,"comment_id":116434052,"body_markdown":"By default, classes are compiled against the bootstrap of the platform that javac shipped with (The low code that the JVM needs to run). But javac also supports cross-compiling, where classes are compiled against a bootstraps of a different Java platform implementation. I think my project wouldn&#39;t even be able to compile if this would be an issue so I think this solution is fine.","body":"By default, classes are compiled against the bootstrap of the platform that javac shipped with (The low code that the JVM needs to run). But javac also supports cross-compiling, where classes are compiled against a bootstraps of a different Java platform implementation. I think my project wouldn&#39;t even be able to compile if this would be an issue so I think this solution is fine."}],"tags":[],"owner":{"account_id":9782615,"reputation":560,"user_id":7250020,"display_name":"Kacper Cichecki"},"comment_count":3,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1609205171,"creation_date":1609205171,"answer_id":65486144,"question_id":40448203,"body_markdown":"I had similar issue with different package:\r\n`package sun.security.x509 does not exist` \r\n\r\nI used java 11 to compile the project.\r\n\r\nIn my case I had to disable `Use &#39;--release&#39; option for cross-compilation` in Java Compiler settings.[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SpNbW.png","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>I had similar issue with different package:\n<code>package sun.security.x509 does not exist</code></p>\n<p>I used java 11 to compile the project.</p>\n<p>In my case I had to disable <code>Use '--release' option for cross-compilation</code> in Java Compiler settings.<a href=\"https://i.stack.imgur.com/SpNbW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SpNbW.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5758568,"reputation":365,"user_id":4545661,"display_name":"Tinyiko Chauke"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1628549931,"creation_date":1628549931,"answer_id":68719398,"question_id":40448203,"body_markdown":"Your project SDK version under file&gt;project structure&gt;Project&gt;Project SDK must be the same with your java compiler project bytecode version under file&gt;Build, Execution, Deployment&gt;Compiler&gt;Java Compiler&gt; look for &quot;project bytecode version&quot; right under your checkbox for &quot;use &#39;--release....&#39;&quot;\r\n\r\n1.Project SDK version:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n2.Project Bytecode version\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZmdCu.png\r\n  [2]: https://i.stack.imgur.com/jjoIO.png","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>Your project SDK version under file&gt;project structure&gt;Project&gt;Project SDK must be the same with your java compiler project bytecode version under file&gt;Build, Execution, Deployment&gt;Compiler&gt;Java Compiler&gt; look for &quot;project bytecode version&quot; right under your checkbox for &quot;use '--release....'&quot;</p>\n<p>1.Project SDK version:\n<a href=\"https://i.stack.imgur.com/ZmdCu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZmdCu.png\" alt=\"enter image description here\" /></a></p>\n<p>2.Project Bytecode version\n<a href=\"https://i.stack.imgur.com/jjoIO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jjoIO.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":484819,"reputation":5634,"user_id":900743,"accept_rate":64,"display_name":"Peter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666332468,"creation_date":1666332468,"answer_id":74149387,"question_id":40448203,"body_markdown":"Click on the project and chose Maven-&gt;Reload This can solve it as well if deps our out sync","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>Click on the project and chose Maven-&gt;Reload This can solve it as well if deps our out sync</p>\n"},{"tags":[],"owner":{"account_id":7246552,"reputation":466,"user_id":5528262,"display_name":"Umar Kayondo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691632484,"creation_date":1691632484,"answer_id":76872187,"question_id":40448203,"body_markdown":"My computer abruptly gave a blue screen while I was writing code. On going back to the IDE, I got this exception https://stackoverflow.com/questions/61865938/java-minidumps-are-not-enabled-by-default-on-client-versions-of-windows which I resolved by updating/re-installing JDK.\r\n\r\nAfter resolving the above error, this dependency was no longer visible. I noticed that my IDE was now pointing to the newly updated JDK.\r\n\r\nI updated the project&#39;s JDK version by going to &gt; File &gt; Project Structure &gt; Project: From here, I selected JDK 1.8.0_65.\r\n\r\nPlease refer to the screenshot for more clarity.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4LEy5.png","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>My computer abruptly gave a blue screen while I was writing code. On going back to the IDE, I got this exception <a href=\"https://stackoverflow.com/questions/61865938/java-minidumps-are-not-enabled-by-default-on-client-versions-of-windows\">Java Minidumps are not enabled by default on client versions of Windows</a> which I resolved by updating/re-installing JDK.</p>\n<p>After resolving the above error, this dependency was no longer visible. I noticed that my IDE was now pointing to the newly updated JDK.</p>\n<p>I updated the project's JDK version by going to &gt; File &gt; Project Structure &gt; Project: From here, I selected JDK 1.8.0_65.</p>\n<p>Please refer to the screenshot for more clarity.\n<a href=\"https://i.stack.imgur.com/4LEy5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4LEy5.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46931,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":51095617,"answer_count":6,"score":20,"last_activity_date":1691632484,"creation_date":1478427514,"question_id":40448203,"body_markdown":"I get the error below, but I can find the package in rt.jar.\r\nI can see the JDK being used from Project Structure.\r\nI&#39;m not sure what&#39;s missing.\r\n\r\n\r\n    Error:(6, -1) Play 2 Compiler: \r\n     C:\\user\\projects\\portal\\app\\com\\example\\security\\cert\\X509Cert.java:6: package sun.security.pkcs10 does not exist\r\n     import sun.security.pkcs10.*;\r\n     C:\\user\\projects\\portal\\app\\com\\v\\security\\cert\\GenerateCSR.java:75: cannot find symbol\r\n\r\n\r\n\r\n","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>I get the error below, but I can find the package in rt.jar.\nI can see the JDK being used from Project Structure.\nI'm not sure what's missing.</p>\n\n<pre><code>Error:(6, -1) Play 2 Compiler: \n C:\\user\\projects\\portal\\app\\com\\example\\security\\cert\\X509Cert.java:6: package sun.security.pkcs10 does not exist\n import sun.security.pkcs10.*;\n C:\\user\\projects\\portal\\app\\com\\v\\security\\cert\\GenerateCSR.java:75: cannot find symbol\n</code></pre>\n"},{"tags":["java","serenity-bdd","cucumber-serenity"],"answers":[{"comments":[{"owner":{"account_id":16074014,"reputation":11,"user_id":11601666,"display_name":"Paul Henry LEUFANG"},"score":0,"creation_date":1690399243,"post_id":76774405,"comment_id":135349837,"body_markdown":"You will need to set this in the properties section &lt;serenity.plugin.version&gt;3.9.0&lt;/serenity.plugin.version&gt;","body":"You will need to set this in the properties section &lt;serenity.plugin.version&gt;3.9.0&lt;/serenity.plugin.version&gt;"}],"tags":[],"owner":{"account_id":16074014,"reputation":11,"user_id":11601666,"display_name":"Paul Henry LEUFANG"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690399162,"creation_date":1690399162,"answer_id":76774405,"question_id":76601703,"body_markdown":"Hello are you asking about how to generate serenity report ?\r\n\r\nIf yes, install add this serenity maven plugin in your pom.xml file\r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;net.serenity-bdd.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;serenity-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;net.serenity-bdd&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;serenity-core&lt;/artifactId&gt;\r\n                        &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;net.serenity-bdd&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;serenity-single-page-report&lt;/artifactId&gt;\r\n                        &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;reports&gt;single-page-html&lt;/reports&gt;\r\n                &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\nIf you are using IntellijIdea in the plugins section you will have the plugin serenity:aggregate, run it.\r\n\r\nYou can also run the command `mvn serenity:aggregate` in the command line to get the full report and the summay report","title":"how to get total duration, total passed and failed test case in serenity cucumber java","body":"<p>Hello are you asking about how to generate serenity report ?</p>\n<p>If yes, install add this serenity maven plugin in your pom.xml file</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;net.serenity-bdd.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;serenity-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;net.serenity-bdd&lt;/groupId&gt;\n                    &lt;artifactId&gt;serenity-core&lt;/artifactId&gt;\n                    &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;net.serenity-bdd&lt;/groupId&gt;\n                    &lt;artifactId&gt;serenity-single-page-report&lt;/artifactId&gt;\n                    &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;configuration&gt;\n                &lt;reports&gt;single-page-html&lt;/reports&gt;\n            &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>If you are using IntellijIdea in the plugins section you will have the plugin serenity:aggregate, run it.</p>\n<p>You can also run the command <code>mvn serenity:aggregate</code> in the command line to get the full report and the summay report</p>\n"},{"tags":[],"owner":{"account_id":29172625,"reputation":1,"user_id":22348618,"display_name":"Ehthesham"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691632379,"creation_date":1691350602,"answer_id":76847517,"question_id":76601703,"body_markdown":"You can get details of the total duration, count of passed and failed test cases, and many other details from the Serenity report.\r\n\r\nSerenity report is available in target/site/index.html\r\n\r\nWhen you open the report on the homepage you can find these details.\r\n\r\nAs already pointed out by others remember to add dependencies in pom.xml file.\r\n\r\n\r\nPFB sample report screenshots\r\n&lt;br/&gt;\r\n[Screen 1][1]\r\n\r\n\r\n[Screen 2][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rSdbb.png\r\n  [2]: https://i.stack.imgur.com/SoXiC.png","title":"how to get total duration, total passed and failed test case in serenity cucumber java","body":"<p>You can get details of the total duration, count of passed and failed test cases, and many other details from the Serenity report.</p>\n<p>Serenity report is available in target/site/index.html</p>\n<p>When you open the report on the homepage you can find these details.</p>\n<p>As already pointed out by others remember to add dependencies in pom.xml file.</p>\n<p>PFB sample report screenshots\n<br/>\n<a href=\"https://i.stack.imgur.com/rSdbb.png\" rel=\"nofollow noreferrer\">Screen 1</a></p>\n<p><a href=\"https://i.stack.imgur.com/SoXiC.png\" rel=\"nofollow noreferrer\">Screen 2</a></p>\n"}],"owner":{"account_id":7427727,"reputation":187,"user_id":5649717,"display_name":"Yudistira Sugandi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691632379,"creation_date":1688355216,"question_id":76601703,"body_markdown":"i have an automation API and web written in java, serenity and cucumber. how can i get the value of total duration, passed and failed test case ? thank you","title":"how to get total duration, total passed and failed test case in serenity cucumber java","body":"<p>i have an automation API and web written in java, serenity and cucumber. how can i get the value of total duration, passed and failed test case ? thank you</p>\n"},{"tags":["java","aop","aspectj"],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691631991,"creation_date":1691631991,"answer_id":76872162,"question_id":76870080,"body_markdown":"Your question has nothing to do with Maven modules or AspectJ Maven plugin. If I understand correctly, you simply want to know how to log argument details for an intercepted method. How about using parameter binding via `args()`?\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\npublic class Item {\r\n  private int id;\r\n  private String name;\r\n\r\n  public Item(int id, String name) {\r\n    this.id = id;\r\n    this.name = name;\r\n  }\r\n\r\n  public int getId() {\r\n    return id;\r\n  }\r\n\r\n  public String getName() {\r\n    return name;\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\npublic class Business {\r\n  public void logic(Item item) {}\r\n\r\n  public static void main(String[] args) {\r\n    new Business().logic(new Item(11, &quot;Jane&quot;));\r\n    new Business().logic(new Item(22, &quot;John&quot;));\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.aspect;\r\n\r\nimport org.aspectj.lang.JoinPoint;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\n\r\nimport de.scrum_master.app.Item;\r\n\r\n@Aspect\r\npublic class LoggingAspect {\r\n  @Before(&quot;execution(* de.scrum_master.app.Business.logic(..)) &amp;&amp; args(item)&quot;)\r\n  public void logBeforeAllMethods(JoinPoint joinPoint, Item item) {\r\n    System.out.println(joinPoint);\r\n    System.out.println(&quot;  Item[id=&quot; + item.getId() + &quot;, name=&quot; + item.getName() + &quot;]&quot;);\r\n  }\r\n}\r\n```\r\n\r\nConsole log:\r\n\r\n```none\r\nexecution(void de.scrum_master.app.Business.logic(Item))\r\n  Item[id=11, name=Jane]\r\nexecution(void de.scrum_master.app.Business.logic(Item))\r\n  Item[id=22, name=John]\r\n```\r\n\r\nIf you had something more generic in mind, your sample code did not express it clearly, and neither did your problem description.\r\n\r\nMaybe you noticed that my aspetc has taken care of gathering a string representation of `Item`. The better ways would be to create a meaningful `toString()` method (or another suitable string representation method) for `Item` and simply use that in the aspect. Of course, you could use relfection in the aspect to determine fields and their values, but is that really the job of an aspect?\r\n\r\nBesides, why did you write this?\r\n\r\n```java\r\n// Will be moving this to annotation based PointCut\r\n```\r\n\r\nWhy would you? It is much better to intercept methods using a pointcut describing the kinds of classes, methods, arguments etc. you want to log. Only use marker annotations as a very last resort, if there is no other way to write a pointcut. Marker annotations for AOP are vastly overused by developers not thinking about other ways to define the set of joinpoints they wish to intercept. Marker annotations seem to be easy, because you do not need to think much when using them. But the consequence of using them is that you pollute your whole code base with aspect-related information, which is the very thing AOP strives to avoid.","title":"Building a library for using AspectJ","body":"<p>Your question has nothing to do with Maven modules or AspectJ Maven plugin. If I understand correctly, you simply want to know how to log argument details for an intercepted method. How about using parameter binding via <code>args()</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Item {\n  private int id;\n  private String name;\n\n  public Item(int id, String name) {\n    this.id = id;\n    this.name = name;\n  }\n\n  public int getId() {\n    return id;\n  }\n\n  public String getName() {\n    return name;\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Business {\n  public void logic(Item item) {}\n\n  public static void main(String[] args) {\n    new Business().logic(new Item(11, &quot;Jane&quot;));\n    new Business().logic(new Item(22, &quot;John&quot;));\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\n\nimport de.scrum_master.app.Item;\n\n@Aspect\npublic class LoggingAspect {\n  @Before(&quot;execution(* de.scrum_master.app.Business.logic(..)) &amp;&amp; args(item)&quot;)\n  public void logBeforeAllMethods(JoinPoint joinPoint, Item item) {\n    System.out.println(joinPoint);\n    System.out.println(&quot;  Item[id=&quot; + item.getId() + &quot;, name=&quot; + item.getName() + &quot;]&quot;);\n  }\n}\n</code></pre>\n<p>Console log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.app.Business.logic(Item))\n  Item[id=11, name=Jane]\nexecution(void de.scrum_master.app.Business.logic(Item))\n  Item[id=22, name=John]\n</code></pre>\n<p>If you had something more generic in mind, your sample code did not express it clearly, and neither did your problem description.</p>\n<p>Maybe you noticed that my aspetc has taken care of gathering a string representation of <code>Item</code>. The better ways would be to create a meaningful <code>toString()</code> method (or another suitable string representation method) for <code>Item</code> and simply use that in the aspect. Of course, you could use relfection in the aspect to determine fields and their values, but is that really the job of an aspect?</p>\n<p>Besides, why did you write this?</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Will be moving this to annotation based PointCut\n</code></pre>\n<p>Why would you? It is much better to intercept methods using a pointcut describing the kinds of classes, methods, arguments etc. you want to log. Only use marker annotations as a very last resort, if there is no other way to write a pointcut. Marker annotations for AOP are vastly overused by developers not thinking about other ways to define the set of joinpoints they wish to intercept. Marker annotations seem to be easy, because you do not need to think much when using them. But the consequence of using them is that you pollute your whole code base with aspect-related information, which is the very thing AOP strives to avoid.</p>\n"}],"owner":{"account_id":397984,"reputation":537,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76872162,"answer_count":1,"score":-1,"last_activity_date":1691631991,"creation_date":1691602401,"question_id":76870080,"body_markdown":"**Background**\r\nWe have a Java project which uses Maven as the build tool. The project structure has a Parent POM and then various Child POMs.\r\n\r\nI am working on creating a child POM project where I want to define a set of Aspects which can be used in existing child projects.\r\n\r\nI got it working with the help of - http://www.mojohaus.org/aspectj-maven-plugin/examples/libraryJars.html#\r\n\r\n**Question** - If I want to log runtime argument values of a method execution then how can I do it in the Library without it depending on any other Child POM projects?\r\n\r\n\r\nFor instance:\r\n\r\nParent Project:\r\n - Child-1\r\n - Child-2\r\n - AspectJ-Library\r\n\r\n\r\n\r\nClasses in Child-1:\r\n```\r\npackage org.example;\r\n\r\nclass Item {\r\n  // fileds, getters, setters\r\n}\r\n\r\npackage org.example;\r\n\r\nclass Business {\r\n  public void logic(Item b) {\r\n   // logic\r\n  }\r\n}\r\n\r\n```\r\n\r\nClass in AspectJ-Library\r\n\r\n```\r\npackage org.example;\r\n\r\nimport org.aspectj.lang.JoinPoint;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\n\r\n@Aspect\r\npublic class LoggingAspect {\r\n    @Before(&quot;execution(* org.example.Business.logic(..))&quot;) // Will be moving this to annotation based PointCut\r\n    public void logBeforeAllMethods(JoinPoint joinPoint)\r\n    {\r\n        // How to log values of various fields of object of class Item?\r\n    }\r\n}\r\n```\r\nHow to log values of various fields of object of class Item in the `logBeforeAllMethods` method above?\r\n\r\n","title":"Building a library for using AspectJ","body":"<p><strong>Background</strong>\nWe have a Java project which uses Maven as the build tool. The project structure has a Parent POM and then various Child POMs.</p>\n<p>I am working on creating a child POM project where I want to define a set of Aspects which can be used in existing child projects.</p>\n<p>I got it working with the help of - <a href=\"http://www.mojohaus.org/aspectj-maven-plugin/examples/libraryJars.html#\" rel=\"nofollow noreferrer\">http://www.mojohaus.org/aspectj-maven-plugin/examples/libraryJars.html#</a></p>\n<p><strong>Question</strong> - If I want to log runtime argument values of a method execution then how can I do it in the Library without it depending on any other Child POM projects?</p>\n<p>For instance:</p>\n<p>Parent Project:</p>\n<ul>\n<li>Child-1</li>\n<li>Child-2</li>\n<li>AspectJ-Library</li>\n</ul>\n<p>Classes in Child-1:</p>\n<pre><code>package org.example;\n\nclass Item {\n  // fileds, getters, setters\n}\n\npackage org.example;\n\nclass Business {\n  public void logic(Item b) {\n   // logic\n  }\n}\n\n</code></pre>\n<p>Class in AspectJ-Library</p>\n<pre><code>package org.example;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\n\n@Aspect\npublic class LoggingAspect {\n    @Before(&quot;execution(* org.example.Business.logic(..))&quot;) // Will be moving this to annotation based PointCut\n    public void logBeforeAllMethods(JoinPoint joinPoint)\n    {\n        // How to log values of various fields of object of class Item?\n    }\n}\n</code></pre>\n<p>How to log values of various fields of object of class Item in the <code>logBeforeAllMethods</code> method above?</p>\n"},{"tags":["java","reactive-programming","azureservicebus","project-reactor","azure-sdk-for-java"],"owner":{"account_id":2612183,"reputation":3,"user_id":2262100,"display_name":"gaurav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691631448,"creation_date":1691426141,"question_id":76853577,"body_markdown":"**TL;DR:**\r\nNeed to slow (dynamically) cosmos Db querying Flux so downstream can publish messages (asynchronously) to service bus.\r\n\r\n**Full description:**\r\nI have a Flux that queries Cosmos DB and returns lots of document results that I need to transform and push to Azure Service Bus.\r\n\r\nPublishing un-throttled seems to overwhelm the service bus client library (even when publishing ~1000 messages, each less than 1 KB) and I start getting &quot;java.lang.OutOfMemoryError: Java heap space&quot; exceptions so cannot publish all messages:\r\n\r\n\r\n```\r\nfluxToRunCosmosQueriesAndReturnLotsOfResults\r\n    .filter(...)\r\n    .map(toServiceBusMessage)\r\n    //.delayElements(Duration.ofMillis(10))\r\n    .map(msg -&gt; \r\n    {\r\n      return messageSender.sendMessage(msg); //returns Mono, actual msg is sent to bus asynchronously\r\n    })\r\n    .flatMap(Flux::from)\r\n    .blockLast();\r\n\r\n\r\nServiceBusSenderAsyncClient messageSender = new ServiceBusClientBuilder()\r\n        .connectionString(CONNECTION_STRING)\r\n        .sender()\r\n        .topicName(TOPIC_NAME)\r\n        .buildAsyncClient();\r\n```\r\n\r\n\r\nUn-commenting the delay above adjusts the rate for me and can publish all messages without any exceptions.\r\nBut such arbitrary delay seems hacky and I want to dynamically slow/pause the upstream emitter based on how much downstream service bus client can safely publish.\r\n\r\nUsing Semaphore also works for me: I can delay upstream until certain number of messages are published to service bus (and completed asynchronously by messageSender):\r\n\r\n\r\n```\r\npublic class FluxCondition\r\n  {\r\n    Semaphore sem;\r\n\r\n    public FluxCondition(int permits)\r\n    {\r\n      sem = new Semaphore(permits);\r\n    }\r\n    \r\n    public Mono&lt;Object&gt; fetchPermit() \r\n    { \r\n      return Mono.fromRunnable(() -&gt; \r\n      {\r\n        try\r\n        {\r\n          sem.acquire();\r\n        }\r\n        catch (InterruptedException e) {}\r\n      }); \r\n    }\r\n\r\n    public void releasePermit()\r\n    {\r\n      sem.release();\r\n    }\r\n  }\r\n\r\n\r\n\r\nFluxCondition semPermits = new FluxCondition(10);\r\n\r\nfluxToRunCosmosQueriesAndReturnLotsOfResults\r\n    .filter(...)\r\n    .map(this::toServiceBusMessage)\r\n    .delayUntil(o -&gt; semPermits.fetchPermit())\r\n    .map(msg -&gt; \r\n    {\r\n      return messageSender.sendMessage(msg)\r\n      \t\t\t  .doFinally(o -&gt; semPermits.releasePermit());\r\n    })\r\n    .flatMap(Flux::from)\r\n    .blockLast();\r\n```\r\n\r\n(Note: For efficiency, I cannot batch messages to service bus as suggested in official docs: https://github.com/Azure/azure-sdk-for-java/blob/cc51514c7d14ff9805fe265cfc72e424c9c80576/sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java#L121 since my topic is partitioned with de-dup enabled)\r\n\r\n**My question is:**\r\nIs there a better/recommended (best practices) reactor friendly way to adjust the rate of publisher flux here (that returns cosmos Db query results) so that downstream can safely publish messages to service bus and is not overwhelmed. It would be great if upstream emitter can dynamically adjust/adapt to ServiceBusSenderAsyncClient&#39;s rate.\r\n\r\n(azure-messaging-servicebus: 7.14.1, reactor-core: 3.4.27)\r\n\r\n---------------------------------------------------------------\r\n\r\nExceptions when publishing to service bus client in an un-throttled manner:\r\n\r\n*12:01:05.850 [reactor-executor-1] **ERROR reactor.core.publisher.Operators - Operator called default onErrorDropped\r\njava.lang.OutOfMemoryError: Java heap space\r\n    at com.azure.messaging.servicebus.ServiceBusMessageBatch.&lt;init&gt;(ServiceBusMessageBatch.java:42)**\r\n    at com.azure.messaging.servicebus.ServiceBusSenderAsyncClient$AmqpMessageCollector.&lt;init&gt;(ServiceBusSenderAsyncClient.java:848)\r\n    at com.azure.messaging.servicebus.ServiceBusSenderAsyncClient.lambda$sendInternal$25(ServiceBusSenderAsyncClient.java:794)\r\n    at com.azure.messaging.servicebus.ServiceBusSenderAsyncClient$$Lambda$1648/954915536.apply(Unknown Source)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125)\r\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2400)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:110)\r\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\r\n    at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\r\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\r\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    at reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onNext(FluxRetryWhen.java:174)\r\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:180)\r\n    at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210)\r\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\r\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\r\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\r\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\r\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\r\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\r\n    at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:172)\r\n    at com.azure.core.amqp.implementation.ReactorSession.lambda$createProducer$16(ReactorSession.java:515)\r\n    at com.azure.core.amqp.implementation.ReactorSession$$Lambda$1631/598519268.run(Unknown Source)\r\n    at com.azure.core.amqp.implementation.handler.DispatchHandler.onTimerTask(DispatchHandler.java:32)\r\n    at com.azure.core.amqp.implementation.ReactorDispatcher$WorkScheduler.run(ReactorDispatcher.java:207)\r\n    at org.apache.qpid.proton.reactor.impl.SelectableImpl.readable(SelectableImpl.java:118)\r\njava.lang.OutOfMemoryError: Java heap space\r\n12:01:06.696 [reactor-executor-1] **ERROR reactor.core.publisher.Operators - Operator called default onErrorDropped\r\njava.lang.OutOfMemoryError: Java heap space***","title":"Control Flux emission rate based on downstream async task completion","body":"<p><strong>TL;DR:</strong>\nNeed to slow (dynamically) cosmos Db querying Flux so downstream can publish messages (asynchronously) to service bus.</p>\n<p><strong>Full description:</strong>\nI have a Flux that queries Cosmos DB and returns lots of document results that I need to transform and push to Azure Service Bus.</p>\n<p>Publishing un-throttled seems to overwhelm the service bus client library (even when publishing ~1000 messages, each less than 1 KB) and I start getting &quot;java.lang.OutOfMemoryError: Java heap space&quot; exceptions so cannot publish all messages:</p>\n<pre><code>fluxToRunCosmosQueriesAndReturnLotsOfResults\n    .filter(...)\n    .map(toServiceBusMessage)\n    //.delayElements(Duration.ofMillis(10))\n    .map(msg -&gt; \n    {\n      return messageSender.sendMessage(msg); //returns Mono, actual msg is sent to bus asynchronously\n    })\n    .flatMap(Flux::from)\n    .blockLast();\n\n\nServiceBusSenderAsyncClient messageSender = new ServiceBusClientBuilder()\n        .connectionString(CONNECTION_STRING)\n        .sender()\n        .topicName(TOPIC_NAME)\n        .buildAsyncClient();\n</code></pre>\n<p>Un-commenting the delay above adjusts the rate for me and can publish all messages without any exceptions.\nBut such arbitrary delay seems hacky and I want to dynamically slow/pause the upstream emitter based on how much downstream service bus client can safely publish.</p>\n<p>Using Semaphore also works for me: I can delay upstream until certain number of messages are published to service bus (and completed asynchronously by messageSender):</p>\n<pre><code>public class FluxCondition\n  {\n    Semaphore sem;\n\n    public FluxCondition(int permits)\n    {\n      sem = new Semaphore(permits);\n    }\n    \n    public Mono&lt;Object&gt; fetchPermit() \n    { \n      return Mono.fromRunnable(() -&gt; \n      {\n        try\n        {\n          sem.acquire();\n        }\n        catch (InterruptedException e) {}\n      }); \n    }\n\n    public void releasePermit()\n    {\n      sem.release();\n    }\n  }\n\n\n\nFluxCondition semPermits = new FluxCondition(10);\n\nfluxToRunCosmosQueriesAndReturnLotsOfResults\n    .filter(...)\n    .map(this::toServiceBusMessage)\n    .delayUntil(o -&gt; semPermits.fetchPermit())\n    .map(msg -&gt; \n    {\n      return messageSender.sendMessage(msg)\n                  .doFinally(o -&gt; semPermits.releasePermit());\n    })\n    .flatMap(Flux::from)\n    .blockLast();\n</code></pre>\n<p>(Note: For efficiency, I cannot batch messages to service bus as suggested in official docs: <a href=\"https://github.com/Azure/azure-sdk-for-java/blob/cc51514c7d14ff9805fe265cfc72e424c9c80576/sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java#L121\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-java/blob/cc51514c7d14ff9805fe265cfc72e424c9c80576/sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java#L121</a> since my topic is partitioned with de-dup enabled)</p>\n<p><strong>My question is:</strong>\nIs there a better/recommended (best practices) reactor friendly way to adjust the rate of publisher flux here (that returns cosmos Db query results) so that downstream can safely publish messages to service bus and is not overwhelmed. It would be great if upstream emitter can dynamically adjust/adapt to ServiceBusSenderAsyncClient's rate.</p>\n<p>(azure-messaging-servicebus: 7.14.1, reactor-core: 3.4.27)</p>\n<hr />\n<p>Exceptions when publishing to service bus client in an un-throttled manner:</p>\n<p><em>12:01:05.850 [reactor-executor-1] <strong>ERROR reactor.core.publisher.Operators - Operator called default onErrorDropped\njava.lang.OutOfMemoryError: Java heap space\nat com.azure.messaging.servicebus.ServiceBusMessageBatch.(ServiceBusMessageBatch.java:42)</strong>\nat com.azure.messaging.servicebus.ServiceBusSenderAsyncClient$AmqpMessageCollector.(ServiceBusSenderAsyncClient.java:848)\nat com.azure.messaging.servicebus.ServiceBusSenderAsyncClient.lambda$sendInternal$25(ServiceBusSenderAsyncClient.java:794)\nat com.azure.messaging.servicebus.ServiceBusSenderAsyncClient$$Lambda$1648/954915536.apply(Unknown Source)\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125)\nat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2400)\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:110)\nat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\nat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\nat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\nat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\nat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\nat reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onNext(FluxRetryWhen.java:174)\nat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\nat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\nat reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:180)\nat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210)\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839)\nat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839)\nat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\nat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\nat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\nat reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:172)\nat com.azure.core.amqp.implementation.ReactorSession.lambda$createProducer$16(ReactorSession.java:515)\nat com.azure.core.amqp.implementation.ReactorSession$$Lambda$1631/598519268.run(Unknown Source)\nat com.azure.core.amqp.implementation.handler.DispatchHandler.onTimerTask(DispatchHandler.java:32)\nat com.azure.core.amqp.implementation.ReactorDispatcher$WorkScheduler.run(ReactorDispatcher.java:207)\nat org.apache.qpid.proton.reactor.impl.SelectableImpl.readable(SelectableImpl.java:118)\njava.lang.OutOfMemoryError: Java heap space\n12:01:06.696 [reactor-executor-1] <strong>ERROR reactor.core.publisher.Operators - Operator called default onErrorDropped\njava.lang.OutOfMemoryError: Java heap space</strong></em></p>\n"},{"tags":["java","stream","apache-flink","flink-streaming"],"answers":[{"comments":[{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691605887,"post_id":76863800,"comment_id":135515680,"body_markdown":"Does `alerts.addSink(new AlertSink()).name(&quot;send-alerts&quot;);` create sink operator per partition?","body":"Does <code>alerts.addSink(new AlertSink()).name(&quot;send-alerts&quot;);</code> create sink operator per partition?"},{"owner":{"account_id":5433881,"reputation":1294,"user_id":4323911,"display_name":"BrightFlow"},"score":0,"creation_date":1691626420,"post_id":76863800,"comment_id":135518446,"body_markdown":"@overexchange if you set parallelism of sink operator equals to count of partitions, then yes. If less parallelism than partitions, then some operator will handle multiple partitions.","body":"@overexchange if you set parallelism of sink operator equals to count of partitions, then yes. If less parallelism than partitions, then some operator will handle multiple partitions."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691629460,"post_id":76863800,"comment_id":135518661,"body_markdown":"Ah... I wouldn&#39;t know the number of partitions in hand. Can I `addSink()` with `keyBy(accountID)`?","body":"Ah... I wouldn&#39;t know the number of partitions in hand. Can I <code>addSink()</code> with <code>keyBy(accountID)</code>?"},{"owner":{"account_id":5433881,"reputation":1294,"user_id":4323911,"display_name":"BrightFlow"},"score":0,"creation_date":1691719421,"post_id":76863800,"comment_id":135532939,"body_markdown":"@overexchange That&#39;s fine to add `addSink` for keyed stream, and you do not have to worries about partitions. You can configure parallelism of data stream to achieve higher parallel processing as long there are enough slots to run tasks.","body":"@overexchange That&#39;s fine to add <code>addSink</code> for keyed stream, and you do not have to worries about partitions. You can configure parallelism of data stream to achieve higher parallel processing as long there are enough slots to run tasks."}],"tags":[],"owner":{"account_id":5433881,"reputation":1294,"user_id":4323911,"display_name":"BrightFlow"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691539402,"creation_date":1691539402,"answer_id":76863800,"question_id":76843466,"body_markdown":"`keyBy` is applied to datastream `transactions`. \r\n\r\nAfter applying `keyBy`, records from `transactions` with same `account ID` will be in the same partition, and you can apply functions from `KeyedStream`, like `process`(not recommend as it is marked as deprecated), `window`, `reduce`, `min/max/sum`, etc.\r\n\r\nThere are lots of example of using keyBy, e.g. [this link][1]\r\n\r\n\r\n  [1]: https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/operators/overview/#keyby","title":"Flink - Does keyBy() functon partition the flink operator internally?","body":"<p><code>keyBy</code> is applied to datastream <code>transactions</code>.</p>\n<p>After applying <code>keyBy</code>, records from <code>transactions</code> with same <code>account ID</code> will be in the same partition, and you can apply functions from <code>KeyedStream</code>, like <code>process</code>(not recommend as it is marked as deprecated), <code>window</code>, <code>reduce</code>, <code>min/max/sum</code>, etc.</p>\n<p>There are lots of example of using keyBy, e.g. <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/operators/overview/#keyby\" rel=\"nofollow noreferrer\">this link</a></p>\n"}],"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76863800,"answer_count":1,"score":0,"last_activity_date":1691630747,"creation_date":1691268121,"question_id":76843466,"body_markdown":"In the below code, taken from [documentation](https://nightlies.apache.org/flink/flink-docs-release-1.12/try-flink/datastream_api.html#frauddetectionjobjava):\r\n\r\n    package spendreport;\r\n    \r\n    import org.apache.flink.streaming.api.datastream.DataStream;\r\n    import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\n    import org.apache.flink.walkthrough.common.sink.AlertSink;\r\n    import org.apache.flink.walkthrough.common.entity.Alert;\r\n    import org.apache.flink.walkthrough.common.entity.Transaction;\r\n    import org.apache.flink.walkthrough.common.source.TransactionSource;\r\n    \r\n    public class FraudDetectionJob {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n    \r\n            DataStream&lt;Transaction&gt; transactions = env\r\n                .addSource(new TransactionSource())\r\n                .name(&quot;transactions&quot;);\r\n            \r\n            DataStream&lt;Alert&gt; alerts = transactions\r\n                .keyBy(Transaction::getAccountId)\r\n                .process(new FraudDetector())\r\n                .name(&quot;fraud-detector&quot;);\r\n    \r\n            alerts\r\n                .addSink(new AlertSink())\r\n                .name(&quot;send-alerts&quot;);\r\n    \r\n            env.execute(&quot;Fraud Detection&quot;);\r\n        }\r\n    }\r\n\r\n-------\r\n\r\n1)\r\nDoes `.keyBy(Transaction::getAccountId)` function applied on data stream `transactions` perform  partitioning(based on account ID) on incoming data  and perform `process(new FraudDetector())` on each partition, as shown in below diagram?\r\n\r\n2) \r\nIf yes, How to write a mapper to process data streamed from each partition? Using `.keyBy(Transaction::getAccountId)`?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AfAUw.png\r\n\r\n-------------------------------\r\n\r\n","title":"Flink - Does keyBy() functon partition the flink operator internally?","body":"<p>In the below code, taken from <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.12/try-flink/datastream_api.html#frauddetectionjobjava\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<pre><code>package spendreport;\n\nimport org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.walkthrough.common.sink.AlertSink;\nimport org.apache.flink.walkthrough.common.entity.Alert;\nimport org.apache.flink.walkthrough.common.entity.Transaction;\nimport org.apache.flink.walkthrough.common.source.TransactionSource;\n\npublic class FraudDetectionJob {\n\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n        DataStream&lt;Transaction&gt; transactions = env\n            .addSource(new TransactionSource())\n            .name(&quot;transactions&quot;);\n        \n        DataStream&lt;Alert&gt; alerts = transactions\n            .keyBy(Transaction::getAccountId)\n            .process(new FraudDetector())\n            .name(&quot;fraud-detector&quot;);\n\n        alerts\n            .addSink(new AlertSink())\n            .name(&quot;send-alerts&quot;);\n\n        env.execute(&quot;Fraud Detection&quot;);\n    }\n}\n</code></pre>\n<hr />\n<ol>\n<li></li>\n</ol>\n<p>Does <code>.keyBy(Transaction::getAccountId)</code> function applied on data stream <code>transactions</code> perform  partitioning(based on account ID) on incoming data  and perform <code>process(new FraudDetector())</code> on each partition, as shown in below diagram?</p>\n<p>2)\nIf yes, How to write a mapper to process data streamed from each partition? Using <code>.keyBy(Transaction::getAccountId)</code>?</p>\n<p><a href=\"https://i.stack.imgur.com/AfAUw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AfAUw.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n"},{"tags":["java","sharepoint","microsoft-graph-api"],"answers":[{"tags":[],"owner":{"account_id":5180779,"reputation":581,"user_id":4146565,"display_name":"Vitor Santos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691629124,"creation_date":1691629124,"answer_id":76872047,"question_id":76838107,"body_markdown":"After a lot of search and tries, my conclusion is that there is no &quot;easy&quot; way to add the odata directive using the API.\r\n\r\nThe attribute containing the odata directive must be added by your own code.\r\n\r\nUsing the question&#39;s example:\r\n\r\n    {\r\n        &quot;myCollectionField@odata.type&quot;: &quot;Collection(Edm.String)&quot;,\r\n        &quot;myCollectionField&quot;: [\r\n            &quot;VALUE 1&quot;,\r\n            &quot;VALUE 2&quot;\r\n        ]\r\n    }\r\n\r\nYour code must create an object like this:\r\n\r\n    ListItem listItem = new ListItem();\r\n    FieldValueSet fieldValueSet = new FieldValueSet();\r\n    //assume value is a collection converted to a JsonElement object\r\n    fieldValueSet.additionalDataManager().put(&quot;myCollectionField&quot;,value);\r\n    fieldValueSet.put(&quot;myCollectionField@odata.type&quot;, &quot;Collection(Edm.String)&quot;);\r\n\r\nWell, that&#39;s it. There is no helper method, and unfortunately no hints at all in the library&#39;s docs.\r\n\r\n","title":"How to udpate a choice value on a list item in Sharepoint using java SDK","body":"<p>After a lot of search and tries, my conclusion is that there is no &quot;easy&quot; way to add the odata directive using the API.</p>\n<p>The attribute containing the odata directive must be added by your own code.</p>\n<p>Using the question's example:</p>\n<pre><code>{\n    &quot;myCollectionField@odata.type&quot;: &quot;Collection(Edm.String)&quot;,\n    &quot;myCollectionField&quot;: [\n        &quot;VALUE 1&quot;,\n        &quot;VALUE 2&quot;\n    ]\n}\n</code></pre>\n<p>Your code must create an object like this:</p>\n<pre><code>ListItem listItem = new ListItem();\nFieldValueSet fieldValueSet = new FieldValueSet();\n//assume value is a collection converted to a JsonElement object\nfieldValueSet.additionalDataManager().put(&quot;myCollectionField&quot;,value);\nfieldValueSet.put(&quot;myCollectionField@odata.type&quot;, &quot;Collection(Edm.String)&quot;);\n</code></pre>\n<p>Well, that's it. There is no helper method, and unfortunately no hints at all in the library's docs.</p>\n"}],"owner":{"account_id":5180779,"reputation":581,"user_id":4146565,"display_name":"Vitor Santos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691629124,"creation_date":1691170792,"question_id":76838107,"body_markdown":"I am developing a tool in java to transfer data from legacy applications to MS Sharepoint. I currently use the msgraph java SDK. Most things work fine, but I am having trouble updating a collection (option) property.\r\n\r\nUsing the REST API, I can update that column with the following payload:\r\n\r\nURI: https://graph.microsoft.com/v1.0/sites/&lt;site id&gt;/lists/&lt;list id&gt;/items/&lt;item id&gt;/fields\r\n\r\n    {\r\n\t    &quot;myCollectionField@odata.type&quot;: &quot;Collection(Edm.String)&quot;,\r\n\t    &quot;myCollectionField&quot;: [\r\n\t\t    &quot;VALUE 1&quot;,\r\n\t\t    &quot;VALUE 2&quot;\r\n\t    ]\r\n    }\r\n\r\nThe problem is how to do it using the Java API. All properties are defined as a JsonElement property with a string key. Ex:\r\n\r\n        \r\n        ListItem listItem = new ListItem();\r\n\r\n        FieldValueSet fieldValueSet = new FieldValueSet();\r\n        fieldValueSet.additionalDataManager().put(&quot;atribute&quot;,value);\r\n \r\nSimply adding the attributes will create a body with all values, but without the odata.type portion.\r\n\r\nIs there any call in the API to add that &quot;odata.type&quot; portion to the body? \r\n\r\n\r\n\r\n\r\n","title":"How to udpate a choice value on a list item in Sharepoint using java SDK","body":"<p>I am developing a tool in java to transfer data from legacy applications to MS Sharepoint. I currently use the msgraph java SDK. Most things work fine, but I am having trouble updating a collection (option) property.</p>\n<p>Using the REST API, I can update that column with the following payload:</p>\n<p>URI: <a href=\"https://graph.microsoft.com/v1.0/sites/\" rel=\"nofollow noreferrer\">https://graph.microsoft.com/v1.0/sites/</a>/lists//items//fields</p>\n<pre><code>{\n    &quot;myCollectionField@odata.type&quot;: &quot;Collection(Edm.String)&quot;,\n    &quot;myCollectionField&quot;: [\n        &quot;VALUE 1&quot;,\n        &quot;VALUE 2&quot;\n    ]\n}\n</code></pre>\n<p>The problem is how to do it using the Java API. All properties are defined as a JsonElement property with a string key. Ex:</p>\n<pre><code>    ListItem listItem = new ListItem();\n\n    FieldValueSet fieldValueSet = new FieldValueSet();\n    fieldValueSet.additionalDataManager().put(&quot;atribute&quot;,value);\n</code></pre>\n<p>Simply adding the attributes will create a body with all values, but without the odata.type portion.</p>\n<p>Is there any call in the API to add that &quot;odata.type&quot; portion to the body?</p>\n"},{"tags":["java","protocol-buffers","protoc"],"comments":[{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565090205,"post_id":57374747,"comment_id":101234126,"body_markdown":"Possible duplicate: https://stackoverflow.com/a/31031346/7736617","body":"Possible duplicate: <a href=\"https://stackoverflow.com/a/31031346/7736617\">stackoverflow.com/a/31031346/7736617</a>"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565090324,"post_id":57374747,"comment_id":101234176,"body_markdown":"I tried the example from the linked question, and got this error, `--grpc-java_out: protoc-gen-grpc-java: Plugin failed with status code 1.` what&#39;s next for me? Where do I find and install this plugin?","body":"I tried the example from the linked question, and got this error, <code>--grpc-java_out: protoc-gen-grpc-java: Plugin failed with status code 1.</code> what&#39;s next for me? Where do I find and install this plugin?"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565090525,"post_id":57374747,"comment_id":101234271,"body_markdown":"The answer also provides a link to the documentation, which provides an example. https://github.com/grpc/grpc-java/tree/master/compiler","body":"The answer also provides a link to the documentation, which provides an example. <a href=\"https://github.com/grpc/grpc-java/tree/master/compiler\" rel=\"nofollow noreferrer\">github.com/grpc/grpc-java/tree/master/compiler</a>"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565091087,"post_id":57374747,"comment_id":101234544,"body_markdown":"ok, followed the steps. I&#39;ve compiled for my system (mac), and installed the codegen to maven repository using `../gradlew publishToMavenLocal`, the plugin fail error persists, what&#39;s next please?","body":"ok, followed the steps. I&#39;ve compiled for my system (mac), and installed the codegen to maven repository using <code>..&#47;gradlew publishToMavenLocal</code>, the plugin fail error persists, what&#39;s next please?"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565091188,"post_id":57374747,"comment_id":101234604,"body_markdown":"i&#39;ve added this to the command with path to .m2  `--plugin=protoc-gen-grpc-java=~/.m2/repository/protoc-gen-grpc-java --grpc-java_out=path/to/output/dir` I don&#39;t see however, the file under .m2, so where do I find `protoc-gen-grpc-java` file?","body":"i&#39;ve added this to the command with path to .m2  <code>--plugin=protoc-gen-grpc-java=~&#47;.m2&#47;repository&#47;protoc-gen-gr&zwnj;&#8203;pc-java --grpc-java_out=path&#47;to&#47;output&#47;dir</code> I don&#39;t see however, the file under .m2, so where do I find <code>protoc-gen-grpc-java</code> file?"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565092444,"post_id":57374747,"comment_id":101235352,"body_markdown":"It should be in `io/grpc/protoc-gen-grpc-java/` but you should be able to download a compiled one, https://repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/1.22.1/","body":"It should be in <code>io&#47;grpc&#47;protoc-gen-grpc-java&#47;</code> but you should be able to download a compiled one, <a href=\"https://repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/1.22.1/\" rel=\"nofollow noreferrer\">repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/1.22.1</a>"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565096776,"post_id":57374747,"comment_id":101237919,"body_markdown":"made progress but stuck at this `Building codegen requires Protobuf version 3.9.0`, however, `protoc --version` returns `libprotoc 3.9.0`","body":"made progress but stuck at this <code>Building codegen requires Protobuf version 3.9.0</code>, however, <code>protoc --version</code> returns <code>libprotoc 3.9.0</code>"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565098645,"post_id":57374747,"comment_id":101239164,"body_markdown":"What&#39;s exactly you problem ? Update your question with the new elements","body":"What&#39;s exactly you problem ? Update your question with the new elements"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565101212,"post_id":57374747,"comment_id":101240895,"body_markdown":"question updated, please have a look","body":"question updated, please have a look"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565103568,"post_id":57374747,"comment_id":101242347,"body_markdown":"Have you try with a compiled one ? I can&#39;t reproduce, it&#39;s working for me","body":"Have you try with a compiled one ? I can&#39;t reproduce, it&#39;s working for me"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565104221,"post_id":57374747,"comment_id":101242690,"body_markdown":"took another route, from inside `protobuf-3.9.0/java` i ran `mvn install`, error screenshot. https://i.stack.imgur.com/APw6o.png","body":"took another route, from inside <code>protobuf-3.9.0&#47;java</code> i ran <code>mvn install</code>, error screenshot. <a href=\"https://i.stack.imgur.com/APw6o.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/APw6o.png</a>"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565109240,"post_id":57374747,"comment_id":101245417,"body_markdown":"@ArnaudClaudel I&#39;m still stuck at getting this java gen grpc to compile, instead can you plese provide me the jar file?","body":"@ArnaudClaudel I&#39;m still stuck at getting this java gen grpc to compile, instead can you plese provide me the jar file?"}],"answers":[{"comments":[{"owner":{"account_id":16468713,"reputation":1,"user_id":11898288,"display_name":"Ran"},"score":0,"creation_date":1565285550,"post_id":57401556,"comment_id":101315523,"body_markdown":"Is there any reason to not use pre-compiled binary? Could you please tell us what you are trying to do and what have you done?","body":"Is there any reason to not use pre-compiled binary? Could you please tell us what you are trying to do and what have you done?"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565292041,"post_id":57401556,"comment_id":101318161,"body_markdown":"where can i get the pre-compiled library and how to use it?","body":"where can i get the pre-compiled library and how to use it?"}],"tags":[],"owner":{"account_id":16468713,"reputation":1,"user_id":11898288,"display_name":"Ran"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565208008,"creation_date":1565208008,"answer_id":57401556,"question_id":57374747,"body_markdown":"I don&#39;t know what is your use case, maybe you do not have build the codegen by yourself.\r\nAs in the link https://github.com/grpc/grpc-java/blob/master/COMPILING.md\r\n&gt; Since many Java developers don&#39;t have C compilers installed and don&#39;t need to run or modify the codegen, the build can skip it. To skip, create the file &lt;project-root&gt;/gradle.properties and add skipCodegen=true.\r\n\r\nIf you really need to, there are steps you can follow in that link too.\r\n","title":"gRPC Java Codegen Plugin for Protobuf Compiler","body":"<p>I don't know what is your use case, maybe you do not have build the codegen by yourself.\nAs in the link <a href=\"https://github.com/grpc/grpc-java/blob/master/COMPILING.md\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc-java/blob/master/COMPILING.md</a></p>\n\n<blockquote>\n  <p>Since many Java developers don't have C compilers installed and don't need to run or modify the codegen, the build can skip it. To skip, create the file /gradle.properties and add skipCodegen=true.</p>\n</blockquote>\n\n<p>If you really need to, there are steps you can follow in that link too.</p>\n"},{"tags":[],"owner":{"account_id":1296542,"reputation":41,"user_id":6112686,"display_name":"lotuc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691627379,"creation_date":1691627379,"answer_id":76871983,"question_id":57374747,"body_markdown":"https://github.com/grpc/grpc-java/tree/master/compiler\r\n\r\nThis link now contains detailed generation command and where the prebuilt protoc-gen-grpc plugin can be downloaded.\r\n\r\nWhere and how to download the pre-built protoc-gen-rpc plugin:\r\n&gt; 1. Navigate to https://mvnrepository.com/artifact/io.grpc/protoc-gen-grpc-&gt; 2. java\r\n&gt; 3. Click into a version\r\n&gt; 4. Click &quot;Files&quot;\r\n&gt; 5. Select and download the one that is compatible with your system\r\n\r\nGenerate code with command line tool `protoc`\r\n&gt; ```\r\n&gt; $ protoc --plugin=protoc-gen-grpc-java=/path/to/your/downloaded/protoc-gen-grpc-java \\\r\n&gt;   --grpc-java_out=&quot;$OUTPUT_FILE&quot; --proto_path=&quot;$DIR_OF_PROTO_FILE&quot; &quot;$PROTO_FILE&quot;\r\n&gt; ```\r\n","title":"gRPC Java Codegen Plugin for Protobuf Compiler","body":"<p><a href=\"https://github.com/grpc/grpc-java/tree/master/compiler\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc-java/tree/master/compiler</a></p>\n<p>This link now contains detailed generation command and where the prebuilt protoc-gen-grpc plugin can be downloaded.</p>\n<p>Where and how to download the pre-built protoc-gen-rpc plugin:</p>\n<blockquote>\n<ol>\n<li>Navigate to <a href=\"https://mvnrepository.com/artifact/io.grpc/protoc-gen-grpc-%3E\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.grpc/protoc-gen-grpc-&gt;</a> 2. java</li>\n<li>Click into a version</li>\n<li>Click &quot;Files&quot;</li>\n<li>Select and download the one that is compatible with your system</li>\n</ol>\n</blockquote>\n<p>Generate code with command line tool <code>protoc</code></p>\n<blockquote>\n<pre><code>$ protoc --plugin=protoc-gen-grpc-java=/path/to/your/downloaded/protoc-gen-grpc-java \\\n  --grpc-java_out=&quot;$OUTPUT_FILE&quot; --proto_path=&quot;$DIR_OF_PROTO_FILE&quot; &quot;$PROTO_FILE&quot;\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2955,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691627379,"creation_date":1565090009,"question_id":57374747,"body_markdown":"Updating question as I&#39;ve progressed from the original problem.\r\n\r\n**Step 1**. I&#39;ve compiled and Installed Protobuf Compiler for mac using this [link][1]. \r\n\r\n**Step 2**. Currently stuck at gRPC Java Codegen Plugin for Protobuf Compiler [link][2]: \r\n\r\nSuccessful    `../gradlew java_pluginExecutable`\r\n\r\nError `../gradlew test` (screenshot 1)\r\n\r\n&gt; *** Building codegen requires Protobuf version 3.9.0\r\n\r\n\r\n----------\r\n\r\n\r\n`which protoc` outputs `/usr/local/bin/protoc`\r\n\r\n`protoc --version` outputs `libprotoc 3.9.0`\r\n\r\n**P.S.** Please also mention in your solution what to do next once I&#39;m able to compile java generator, I plan to use the plugin from command line initially. \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n\r\n  [1]: https://medium.com/@erika_dike/installing-the-protobuf-compiler-on-a-mac-a0d397af46b8\r\n  [2]: https://github.com/grpc/grpc-java/tree/master/compiler\r\n  [3]: https://i.stack.imgur.com/APw6o.png","title":"gRPC Java Codegen Plugin for Protobuf Compiler","body":"<p>Updating question as I've progressed from the original problem.</p>\n\n<p><strong>Step 1</strong>. I've compiled and Installed Protobuf Compiler for mac using this <a href=\"https://medium.com/@erika_dike/installing-the-protobuf-compiler-on-a-mac-a0d397af46b8\" rel=\"nofollow noreferrer\">link</a>. </p>\n\n<p><strong>Step 2</strong>. Currently stuck at gRPC Java Codegen Plugin for Protobuf Compiler <a href=\"https://github.com/grpc/grpc-java/tree/master/compiler\" rel=\"nofollow noreferrer\">link</a>: </p>\n\n<p>Successful    <code>../gradlew java_pluginExecutable</code></p>\n\n<p>Error <code>../gradlew test</code> (screenshot 1)</p>\n\n<blockquote>\n  <p>*** Building codegen requires Protobuf version 3.9.0</p>\n</blockquote>\n\n<hr>\n\n<p><code>which protoc</code> outputs <code>/usr/local/bin/protoc</code></p>\n\n<p><code>protoc --version</code> outputs <code>libprotoc 3.9.0</code></p>\n\n<p><strong>P.S.</strong> Please also mention in your solution what to do next once I'm able to compile java generator, I plan to use the plugin from command line initially. </p>\n\n<p><a href=\"https://i.stack.imgur.com/APw6o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/APw6o.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","codenameone","media-player"],"comments":[{"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":1,"creation_date":1691635025,"post_id":76871980,"comment_id":135519124,"body_markdown":"Are you running on an ARM mac? If so we&#39;re working on a fix for this but there&#39;s a problem related to that. Try using an x86 JVM as a workaround.","body":"Are you running on an ARM mac? If so we&#39;re working on a fix for this but there&#39;s a problem related to that. Try using an x86 JVM as a workaround."}],"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691627261,"creation_date":1691627261,"question_id":76871980,"body_markdown":"I am trying to get audio into my program using URI&#39;s and MediaManager, specifically with this method\r\n`Media media = MediaManager.createMedia(uri, false)`. It does not work as I keep getting this error (i&#39;ve tried setting the boolean in the constructor to both true and false) \r\n\r\n    java.lang.UnsatisfiedLinkError: Can&#39;t load /Users/mrducky/.m2/repository/com/codenameone/codenameone-cef/84.4.1-M3/codenameone-cef-84.4.1-M3-mac.zip-extracted/cef/macos64/libjcef.dylib\r\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2635)\r\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:827)\r\n        at java.base/java.lang.System.loadLibrary(System.java:1871)\r\n        at org.cef.SystemBootstrap$1.loadLibrary(SystemBootstrap.java:24)\r\n        at org.cef.SystemBootstrap.loadLibrary(SystemBootstrap.java:36)\r\n        at org.cef.CefApp.startup(CefApp.java:536)\r\n        at com.codename1.impl.javase.cef.CEFBrowserComponent.create(CEFBrowserComponent.java:212)\r\n        at com.codename1.impl.javase.cef.JavaCEFSEPort$CodenameOneMediaPlayer.init(JavaCEFSEPort.java:256)\r\n        at com.codename1.impl.javase.cef.JavaCEFSEPort$CodenameOneMediaPlayer.&lt;init&gt;(JavaCEFSEPort.java:235)\r\n        at com.codename1.impl.javase.cef.JavaCEFSEPort.createMediaAsync(JavaCEFSEPort.java:683)\r\n        at com.codename1.impl.javase.JavaSEPort.createMedia(JavaSEPort.java:9483)\r\n        at com.codename1.ui.Display.createMedia(Display.java:3656)\r\n        at com.codename1.media.MediaManager.createMedia(MediaManager.java:255)\r\n        at com.codename1.media.MediaManager.createMedia(MediaManager.java:212)\r\n        at com.example.audio.AudioPlayer.playAudio(AudioPlayer.java:11)\r\n        at com.example.myapp.Game.&lt;init&gt;(Game.java:35)\r\n        at com.example.myapp.Game.getGame(Game.java:40)\r\n        at com.example.myapp.MyApp.init(MyApp.java:49)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at com.codename1.impl.javase.Executor$3$2.run(Executor.java:334)\r\n        at com.codename1.ui.Display.executeSerialCall(Display.java:1395)\r\n        at com.codename1.ui.Display.processSerialCalls(Display.java:1379)\r\n        at com.codename1.ui.Display.mainEDTLoop(Display.java:1166)\r\n        at com.codename1.ui.RunnableWrapper.run(RunnableWrapper.java:120)\r\n        at com.codename1.impl.CodenameOneThread.run(CodenameOneThread.java:176)\r\n\r\nI tried deleting the /cef/macos64/... folder and reloading but it did not work. \r\nAny help would be greatly appreciated. \r\n","title":"Codename One: error with MediaManager and URI; can&#39;t load libjcef.dylib","body":"<p>I am trying to get audio into my program using URI's and MediaManager, specifically with this method\n<code>Media media = MediaManager.createMedia(uri, false)</code>. It does not work as I keep getting this error (i've tried setting the boolean in the constructor to both true and false)</p>\n<pre><code>java.lang.UnsatisfiedLinkError: Can't load /Users/mrducky/.m2/repository/com/codenameone/codenameone-cef/84.4.1-M3/codenameone-cef-84.4.1-M3-mac.zip-extracted/cef/macos64/libjcef.dylib\n    at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2635)\n    at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:827)\n    at java.base/java.lang.System.loadLibrary(System.java:1871)\n    at org.cef.SystemBootstrap$1.loadLibrary(SystemBootstrap.java:24)\n    at org.cef.SystemBootstrap.loadLibrary(SystemBootstrap.java:36)\n    at org.cef.CefApp.startup(CefApp.java:536)\n    at com.codename1.impl.javase.cef.CEFBrowserComponent.create(CEFBrowserComponent.java:212)\n    at com.codename1.impl.javase.cef.JavaCEFSEPort$CodenameOneMediaPlayer.init(JavaCEFSEPort.java:256)\n    at com.codename1.impl.javase.cef.JavaCEFSEPort$CodenameOneMediaPlayer.&lt;init&gt;(JavaCEFSEPort.java:235)\n    at com.codename1.impl.javase.cef.JavaCEFSEPort.createMediaAsync(JavaCEFSEPort.java:683)\n    at com.codename1.impl.javase.JavaSEPort.createMedia(JavaSEPort.java:9483)\n    at com.codename1.ui.Display.createMedia(Display.java:3656)\n    at com.codename1.media.MediaManager.createMedia(MediaManager.java:255)\n    at com.codename1.media.MediaManager.createMedia(MediaManager.java:212)\n    at com.example.audio.AudioPlayer.playAudio(AudioPlayer.java:11)\n    at com.example.myapp.Game.&lt;init&gt;(Game.java:35)\n    at com.example.myapp.Game.getGame(Game.java:40)\n    at com.example.myapp.MyApp.init(MyApp.java:49)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at com.codename1.impl.javase.Executor$3$2.run(Executor.java:334)\n    at com.codename1.ui.Display.executeSerialCall(Display.java:1395)\n    at com.codename1.ui.Display.processSerialCalls(Display.java:1379)\n    at com.codename1.ui.Display.mainEDTLoop(Display.java:1166)\n    at com.codename1.ui.RunnableWrapper.run(RunnableWrapper.java:120)\n    at com.codename1.impl.CodenameOneThread.run(CodenameOneThread.java:176)\n</code></pre>\n<p>I tried deleting the /cef/macos64/... folder and reloading but it did not work.\nAny help would be greatly appreciated.</p>\n"},{"tags":["java","java.util.scanner","final"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":3,"creation_date":1691614541,"post_id":76871184,"comment_id":135517042,"body_markdown":"`&quot;1&quot;.equals(galOrLit)`, you are comparing the `Scanner` object itself against the string `&quot;1&quot;`. That will never be `true`. Instead you have to read something from the scanner like `nextLine()` or `nextInt()` and compare **that** against the string `&quot;1&quot;` or `&quot;2&quot;` (or against actual `int` numbers).","body":"<code>&quot;1&quot;.equals(galOrLit)</code>, you are comparing the <code>Scanner</code> object itself against the string <code>&quot;1&quot;</code>. That will never be <code>true</code>. Instead you have to read something from the scanner like <code>nextLine()</code> or <code>nextInt()</code> and compare <b>that</b> against the string <code>&quot;1&quot;</code> or <code>&quot;2&quot;</code> (or against actual <code>int</code> numbers)."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1691614661,"post_id":76871184,"comment_id":135517070,"body_markdown":"The post you linked uses `hasNext()` and `nextInt()`. Perhaps you want to do the same for the choice?","body":"The post you linked uses <code>hasNext()</code> and <code>nextInt()</code>. Perhaps you want to do the same for the choice?"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1691614662,"post_id":76871184,"comment_id":135517071,"body_markdown":"Also note that British gallons are 4.55 litres. Maybe choose inches and cm instead, which don&#39;t have regional variations.","body":"Also note that British gallons are 4.55 litres. Maybe choose inches and cm instead, which don&#39;t have regional variations."}],"answers":[{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1691614763,"post_id":76871219,"comment_id":135517090,"body_markdown":"The choices are 1 and 2... Why use double?","body":"The choices are 1 and 2... Why use double?"},{"owner":{"account_id":16909157,"reputation":163,"user_id":12228688,"display_name":"Skerdi Velo"},"score":0,"creation_date":1691615008,"post_id":76871219,"comment_id":135517142,"body_markdown":"You didn&#39;t understand. I didn0t use double, it was a suggestion for future coding to not use nexLine()","body":"You didn&#39;t understand. I didn0t use double, it was a suggestion for future coding to not use nexLine()"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1691615046,"post_id":76871219,"comment_id":135517150,"body_markdown":"@SkerdiVelo ok, but why? `int` is the correct type for integers.","body":"@SkerdiVelo ok, but why? <code>int</code> is the correct type for integers."},{"owner":{"account_id":16909157,"reputation":163,"user_id":12228688,"display_name":"Skerdi Velo"},"score":0,"creation_date":1691615121,"post_id":76871219,"comment_id":135517162,"body_markdown":"Because when you have let&#39;s say for example name and age. And you do input.nextLine() for the name, it will store the name but will skip the age. So to fix this use what I suggested","body":"Because when you have let&#39;s say for example name and age. And you do input.nextLine() for the name, it will store the name but will skip the age. So to fix this use what I suggested"},{"owner":{"account_id":16909157,"reputation":163,"user_id":12228688,"display_name":"Skerdi Velo"},"score":0,"creation_date":1691615268,"post_id":76871219,"comment_id":135517189,"body_markdown":"I didn&#39;t say use double for choices. He said that he&#39;s new to java, so I was trying to help him for future coding.","body":"I didn&#39;t say use double for choices. He said that he&#39;s new to java, so I was trying to help him for future coding."},{"owner":{"account_id":18941081,"reputation":28,"user_id":19518483,"display_name":"arivvid27"},"score":0,"creation_date":1691627097,"post_id":76871219,"comment_id":135518494,"body_markdown":"I will keep that in mind, thank you for the tip!","body":"I will keep that in mind, thank you for the tip!"}],"tags":[],"owner":{"account_id":16909157,"reputation":163,"user_id":12228688,"display_name":"Skerdi Velo"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691615360,"creation_date":1691614538,"answer_id":76871219,"question_id":76871184,"body_markdown":"It looks like you are not actually reading any input from the user. You are only printing out the options to choose from, but you are not reading the user&#39;s input. You only to add one line: \r\n\r\n    String choice = scanner.nextLine();\r\nHere is how it would look like:\r\n\r\n    private static void intro(String[] args) {\r\n        final Scanner scanner = new Scanner(System.in);\r\n    \r\n        System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\r\n        System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\r\n    \r\n        String choice = scanner.nextLine();\r\n    \r\n        if (&quot;1&quot;.equals(choice)) {\r\n            galToLit(args);\r\n        } else if (&quot;2&quot;.equals(choice)) {\r\n            litToGal(args);\r\n        }\r\n    }\r\nAnother thing, I suggest to not use nextLine(), but use: **Integer.parseInt(scanner.nextLine()); for integer**\r\n\r\nSo that line would look like this:\r\n\r\n    String choice = Integer.parseInt(scanner.nextLine());\r\n\r\n**Double.parseDouble(scanner.nextLine()); if you have any double**\r\nBecause if you input from string to int sometimes it doesn&#39;t work.\r\n\r\nHope this helps!","title":"My Scanner input gets skipped and code gets terminated","body":"<p>It looks like you are not actually reading any input from the user. You are only printing out the options to choose from, but you are not reading the user's input. You only to add one line:</p>\n<pre><code>String choice = scanner.nextLine();\n</code></pre>\n<p>Here is how it would look like:</p>\n<pre><code>private static void intro(String[] args) {\n    final Scanner scanner = new Scanner(System.in);\n\n    System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\n    System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\n\n    String choice = scanner.nextLine();\n\n    if (&quot;1&quot;.equals(choice)) {\n        galToLit(args);\n    } else if (&quot;2&quot;.equals(choice)) {\n        litToGal(args);\n    }\n}\n</code></pre>\n<p>Another thing, I suggest to not use nextLine(), but use: <strong>Integer.parseInt(scanner.nextLine()); for integer</strong></p>\n<p>So that line would look like this:</p>\n<pre><code>String choice = Integer.parseInt(scanner.nextLine());\n</code></pre>\n<p><strong>Double.parseDouble(scanner.nextLine()); if you have any double</strong>\nBecause if you input from string to int sometimes it doesn't work.</p>\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691614831,"creation_date":1691614831,"answer_id":76871242,"question_id":76871184,"body_markdown":"The problem lies in your usage of the `Scanner` class to read user input. Here&#39;s the corrected version of your program:\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    private static void intro(String[] args) {\r\n        final Scanner galOrLit = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\r\n        System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\r\n\r\n        int choice = galOrLit.nextInt();  // Read user&#39;s choice\r\n\r\n        if (choice == 1) {\r\n            galToLit(args);\r\n        } else if (choice == 2) {\r\n            litToGal(args);\r\n        }\r\n    }\r\n\r\n    private static void galToLit(String[] args) {\r\n        double liters;\r\n\r\n        System.out.println(&quot;Enter Gallons: &quot;);\r\n        final Scanner gallons = new Scanner(System.in);\r\n\r\n        double input = gallons.nextDouble();  // Read a double value\r\n        liters = input * 3.7854;\r\n\r\n        System.out.println(&quot;\\n&quot; + input + &quot; gallons is &quot; + liters + &quot; liters.&quot;);\r\n    }\r\n\r\n    private static void litToGal(String[] args) {\r\n        double gallons;\r\n\r\n        System.out.println(&quot;Enter Liters: &quot;);\r\n        final Scanner liters = new Scanner(System.in);\r\n\r\n        double input = liters.nextDouble();  // Read a double value\r\n        gallons = input / 3.7854;\r\n\r\n        System.out.println(&quot;\\n&quot; + input + &quot; liters is &quot; + gallons + &quot; gallons.&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        intro(args);\r\n    }\r\n}\r\n```\r\n\r\nIn this corrected version, I&#39;ve made the following changes:\r\n\r\n1. Use `nextInt()` to read the user&#39;s choice of conversion.\r\n2. Use `nextDouble()` to read the user&#39;s input for gallons or liters.\r\n3. Updated the conditions in the `intro` method to compare the user&#39;s choice correctly.\r\n4. Changed the input variable type to `double` in the `galToLit` and `litToGal` methods to accommodate double values.\r\n\r\nThis way it now correctly read user input and perform the desired conversions.","title":"My Scanner input gets skipped and code gets terminated","body":"<p>The problem lies in your usage of the <code>Scanner</code> class to read user input. Here's the corrected version of your program:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Main {\n    private static void intro(String[] args) {\n        final Scanner galOrLit = new Scanner(System.in);\n\n        System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\n        System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\n\n        int choice = galOrLit.nextInt();  // Read user's choice\n\n        if (choice == 1) {\n            galToLit(args);\n        } else if (choice == 2) {\n            litToGal(args);\n        }\n    }\n\n    private static void galToLit(String[] args) {\n        double liters;\n\n        System.out.println(&quot;Enter Gallons: &quot;);\n        final Scanner gallons = new Scanner(System.in);\n\n        double input = gallons.nextDouble();  // Read a double value\n        liters = input * 3.7854;\n\n        System.out.println(&quot;\\n&quot; + input + &quot; gallons is &quot; + liters + &quot; liters.&quot;);\n    }\n\n    private static void litToGal(String[] args) {\n        double gallons;\n\n        System.out.println(&quot;Enter Liters: &quot;);\n        final Scanner liters = new Scanner(System.in);\n\n        double input = liters.nextDouble();  // Read a double value\n        gallons = input / 3.7854;\n\n        System.out.println(&quot;\\n&quot; + input + &quot; liters is &quot; + gallons + &quot; gallons.&quot;);\n    }\n\n    public static void main(String[] args) {\n        intro(args);\n    }\n}\n</code></pre>\n<p>In this corrected version, I've made the following changes:</p>\n<ol>\n<li>Use <code>nextInt()</code> to read the user's choice of conversion.</li>\n<li>Use <code>nextDouble()</code> to read the user's input for gallons or liters.</li>\n<li>Updated the conditions in the <code>intro</code> method to compare the user's choice correctly.</li>\n<li>Changed the input variable type to <code>double</code> in the <code>galToLit</code> and <code>litToGal</code> methods to accommodate double values.</li>\n</ol>\n<p>This way it now correctly read user input and perform the desired conversions.</p>\n"}],"owner":{"account_id":18941081,"reputation":28,"user_id":19518483,"display_name":"arivvid27"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76871242,"answer_count":2,"score":0,"last_activity_date":1691627040,"creation_date":1691614301,"question_id":76871184,"body_markdown":"I am writing a &quot;Gallons to Liters and vice versa&quot; program in Java, but once I finished my program, i gave it the first run. I displayed the system outputs, like expected, but then it skipped the user input stage of my program.\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n\tprivate static void intro(String[] args) {\r\n\t\tfinal Scanner galOrLit = new Scanner(System.in);\r\n\r\n\t\tSystem.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\r\n\t\tSystem.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\r\n\r\n\t\tif (&quot;1&quot;.equals(galOrLit)) {\r\n\t\t\tgalToLit(args);\r\n\t\t} else if (&quot;2&quot;.equals(galOrLit)) {\r\n\t\t\tlitToGal(args);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static void galToLit(String[] args) {\r\n\t\tdouble liters;\r\n\r\n\t\tSystem.out.println(&quot;Enter Gallons: &quot;);\r\n\t\tfinal Scanner gallons = new Scanner(System.in);\r\n\r\n\t\tint input = gallons.nextInt();\r\n\t\tliters = input * 3.7854;\r\n\r\n\t\tSystem.out.println(&quot;\\n&quot; + input + &quot; gallons is &quot; + liters + &quot; liters.&quot;);\r\n\t}\r\n\r\n\tprivate static void litToGal(String[] args) {\r\n\t\tdouble gallons;\r\n\r\n\t\tSystem.out.println(&quot;Enter Liters: &quot;);\r\n\t\tfinal Scanner liters = new Scanner(System.in);\r\n\r\n\t\tint input = liters.nextInt();\r\n\t\tgallons = input / 3.7854;\r\n\r\n\t\tSystem.out.println(&quot;\\n&quot; + input + &quot; liters is&quot; + gallons + &quot; gallons.&quot;);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tintro(args);\r\n\r\n\t}\r\n}\r\n```\r\nI tried to final my Scanners, since I had multiple in one class, following [this](https://stackoverflow.com/questions/50845958/scanner-gets-skipped) post. I was expecting my code to work smoothly, but it did no difference to the output. this is as far as I get with both versions of [code](https://i.stack.imgur.com/7BHOE.png).","title":"My Scanner input gets skipped and code gets terminated","body":"<p>I am writing a &quot;Gallons to Liters and vice versa&quot; program in Java, but once I finished my program, i gave it the first run. I displayed the system outputs, like expected, but then it skipped the user input stage of my program.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Main {\n    private static void intro(String[] args) {\n        final Scanner galOrLit = new Scanner(System.in);\n\n        System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\n        System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\n\n        if (&quot;1&quot;.equals(galOrLit)) {\n            galToLit(args);\n        } else if (&quot;2&quot;.equals(galOrLit)) {\n            litToGal(args);\n        }\n    }\n\n    private static void galToLit(String[] args) {\n        double liters;\n\n        System.out.println(&quot;Enter Gallons: &quot;);\n        final Scanner gallons = new Scanner(System.in);\n\n        int input = gallons.nextInt();\n        liters = input * 3.7854;\n\n        System.out.println(&quot;\\n&quot; + input + &quot; gallons is &quot; + liters + &quot; liters.&quot;);\n    }\n\n    private static void litToGal(String[] args) {\n        double gallons;\n\n        System.out.println(&quot;Enter Liters: &quot;);\n        final Scanner liters = new Scanner(System.in);\n\n        int input = liters.nextInt();\n        gallons = input / 3.7854;\n\n        System.out.println(&quot;\\n&quot; + input + &quot; liters is&quot; + gallons + &quot; gallons.&quot;);\n    }\n\n    public static void main(String[] args) {\n        intro(args);\n\n    }\n}\n</code></pre>\n<p>I tried to final my Scanners, since I had multiple in one class, following <a href=\"https://stackoverflow.com/questions/50845958/scanner-gets-skipped\">this</a> post. I was expecting my code to work smoothly, but it did no difference to the output. this is as far as I get with both versions of <a href=\"https://i.stack.imgur.com/7BHOE.png\" rel=\"nofollow noreferrer\">code</a>.</p>\n"},{"tags":["java","spyder"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1688849156,"post_id":76643798,"comment_id":135130079,"body_markdown":"&quot;I heard that Spyder can support Java&quot; - citation needed.","body":"&quot;I heard that Spyder can support Java&quot; - citation needed."}],"answers":[{"tags":[],"owner":{"account_id":8173076,"reputation":1,"user_id":6152828,"display_name":"ronald"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691626497,"creation_date":1691609727,"answer_id":76870763,"question_id":76643798,"body_markdown":"    pip install install-jdk\r\n\r\nor\r\n\r\n    pip install jdk4py\r\n\r\nYou will need to restart kernel to use updated packages.\r\n\r\nAfter restart then import in `spyder` like one does when using `numpy` or `pandas`.\r\n","title":"How do I use Java on Spyder IDE?","body":"<pre><code>pip install install-jdk\n</code></pre>\n<p>or</p>\n<pre><code>pip install jdk4py\n</code></pre>\n<p>You will need to restart kernel to use updated packages.</p>\n<p>After restart then import in <code>spyder</code> like one does when using <code>numpy</code> or <code>pandas</code>.</p>\n"}],"owner":{"account_id":16821546,"reputation":5,"user_id":20584804,"display_name":"LianNuo "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1691626497,"creation_date":1688831914,"question_id":76643798,"body_markdown":"I have downloaded both Java and Spyder IDE on my laptop. I heard that Spyder can support Java but I have no idea how to change its default language from Python to Java. Any help please?\r\n\r\nI want to see some clear instructions on how to change Spyder&#39;s programming language.","title":"How do I use Java on Spyder IDE?","body":"<p>I have downloaded both Java and Spyder IDE on my laptop. I heard that Spyder can support Java but I have no idea how to change its default language from Python to Java. Any help please?</p>\n<p>I want to see some clear instructions on how to change Spyder's programming language.</p>\n"},{"tags":["java","php","loops","benchmarking"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":5,"creation_date":1691628014,"post_id":76871900,"comment_id":135518563,"body_markdown":"Java can almost certainly figure out how to eliminate the loop entirely by just setting `index = max`.","body":"Java can almost certainly figure out how to eliminate the loop entirely by just setting <code>index = max</code>."}],"answers":[{"tags":[],"owner":{"account_id":284783,"reputation":2370,"user_id":583101,"accept_rate":74,"display_name":"mlewis54"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691626086,"creation_date":1691626086,"answer_id":76871921,"question_id":76871900,"body_markdown":"While I suspect our systems are similar in power and I&#39;m on an older (7.1) version of PHP in which I get:\r\n\r\n    Total Execution Time: 9.6295697689056 Seconds\r\n\r\nWhich seems totally reasonable for a scripting language for 1 billion operations. I suspect newer versions of PHP are faster.\r\n\r\nSo my answer is more of an explanation and without knowing more of your environment I&#39;m not sure there is an answer to your question.","title":"PHP Script Takes So Much Time More Than Expected","body":"<p>While I suspect our systems are similar in power and I'm on an older (7.1) version of PHP in which I get:</p>\n<pre><code>Total Execution Time: 9.6295697689056 Seconds\n</code></pre>\n<p>Which seems totally reasonable for a scripting language for 1 billion operations. I suspect newer versions of PHP are faster.</p>\n<p>So my answer is more of an explanation and without knowing more of your environment I'm not sure there is an answer to your question.</p>\n"}],"owner":{"account_id":1975618,"reputation":591,"user_id":1773471,"accept_rate":58,"display_name":"Wallace"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":1,"score":-3,"last_activity_date":1691626086,"creation_date":1691625636,"question_id":76871900,"body_markdown":"My PHP script takes 32 seconds, while doing the same thing using Java takes ~2 milliseconds and 200 milliseconds using golang. \r\n\r\nWhy the PHP script takes so much time? I know PHP is an interpreted language and it executes much more instructions inside the interpreter than we saw, but this code is so simple, are there any other reasons there? \r\n\r\nenv info:   \r\n\r\n    php version: PHP 7.4.3-4ubuntu2.19 (cli), Zend Engine v3.4.0\r\n    hardware: 15G RAM, 11th Gen Intel(R) Core(TM) i7-11800H @ 2.30GHz\r\n    software: ubuntu 20.04 LTS on Windows WSL2. \r\n\r\nphp Code:\r\n  \r\n    &lt;?php\r\n     \r\n         function test(int $max, int $start) {\r\n     \r\n             $time_start = microtime(true);\r\n             while ($start &lt; $max) {\r\n                 $start = $start+1;\r\n             }\r\n     \r\n             $time_end = microtime(true);\r\n     \r\n             //dividing with 60 will give the execution time in minutes otherwise seconds\r\n             $execution_time = ($time_end - $time_start);\r\n     \r\n             //execution time of the script\r\n             print(&#39;Total Execution Time: &#39;.$execution_time.&#39; Seconds \\n&#39;);\r\n         }\r\n     \r\n         test(1000000000, 0);\r\n\r\nJava code: \r\n\r\n    import java.time.Duration;\r\n    import java.time.Instant;\r\n      \r\n    import java.util.ArrayList;\r\n    import java.io.*;\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    import javax.swing.*;\r\n      \r\n      \r\n      class Benchmark {\r\n     \r\n          public static void main(String args[]) {\r\n     \r\n              int max = 1000000000;\r\n              int index = 0;\r\n     \r\n              long start = System.currentTimeMillis();\r\n     \r\n              while(index &lt; max) {\r\n                  index++;\r\n              }\r\n     \r\n              long end = System.currentTimeMillis();\r\n              System.out.println(&quot;Elapsed Time in millseconds: &quot;+ (end-start));\r\n              System.out.println(&quot;index: &quot;+ index);\r\n     \r\n          }\r\n      }","title":"PHP Script Takes So Much Time More Than Expected","body":"<p>My PHP script takes 32 seconds, while doing the same thing using Java takes ~2 milliseconds and 200 milliseconds using golang.</p>\n<p>Why the PHP script takes so much time? I know PHP is an interpreted language and it executes much more instructions inside the interpreter than we saw, but this code is so simple, are there any other reasons there?</p>\n<p>env info:</p>\n<pre><code>php version: PHP 7.4.3-4ubuntu2.19 (cli), Zend Engine v3.4.0\nhardware: 15G RAM, 11th Gen Intel(R) Core(TM) i7-11800H @ 2.30GHz\nsoftware: ubuntu 20.04 LTS on Windows WSL2. \n</code></pre>\n<p>php Code:</p>\n<pre><code>&lt;?php\n \n     function test(int $max, int $start) {\n \n         $time_start = microtime(true);\n         while ($start &lt; $max) {\n             $start = $start+1;\n         }\n \n         $time_end = microtime(true);\n \n         //dividing with 60 will give the execution time in minutes otherwise seconds\n         $execution_time = ($time_end - $time_start);\n \n         //execution time of the script\n         print('Total Execution Time: '.$execution_time.' Seconds \\n');\n     }\n \n     test(1000000000, 0);\n</code></pre>\n<p>Java code:</p>\n<pre><code>import java.time.Duration;\nimport java.time.Instant;\n  \nimport java.util.ArrayList;\nimport java.io.*;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.ThreadLocalRandom;\nimport javax.swing.*;\n  \n  \n  class Benchmark {\n \n      public static void main(String args[]) {\n \n          int max = 1000000000;\n          int index = 0;\n \n          long start = System.currentTimeMillis();\n \n          while(index &lt; max) {\n              index++;\n          }\n \n          long end = System.currentTimeMillis();\n          System.out.println(&quot;Elapsed Time in millseconds: &quot;+ (end-start));\n          System.out.println(&quot;index: &quot;+ index);\n \n      }\n  }\n</code></pre>\n"},{"tags":["java","arrays","json","size","jsonpath"],"answers":[{"comments":[{"owner":{"account_id":5613037,"reputation":319,"user_id":4445238,"display_name":"Alex Rewa"},"score":0,"creation_date":1641916659,"post_id":36967669,"comment_id":124930128,"body_markdown":"A small correction, seems that it should be $.orders.length (without ()), just tested and works fine for me","body":"A small correction, seems that it should be $.orders.length (without ()), just tested and works fine for me"},{"owner":{"account_id":235414,"reputation":2748,"user_id":502214,"accept_rate":80,"display_name":"V&#245; Quang H&#242;a"},"score":0,"creation_date":1645077898,"post_id":36967669,"comment_id":125776144,"body_markdown":"@AlexRewa I tried and it doesn&#39;t work on my side with the error message ```java.lang.AssertionError: No value at JSON path &quot;$.length&quot;```. But ```&quot;$.length()&quot;``` works fine","body":"@AlexRewa I tried and it doesn&#39;t work on my side with the error message <code>java.lang.AssertionError: No value at JSON path &quot;$.length&quot;</code>. But <code>&quot;$.length()&quot;</code> works fine"},{"owner":{"account_id":5613037,"reputation":319,"user_id":4445238,"display_name":"Alex Rewa"},"score":0,"creation_date":1645097681,"post_id":36967669,"comment_id":125782968,"body_markdown":"@V&#245;QuangH&#242;a, weird... seems it depends on JsonPath implementation.","body":"@V&#245;QuangH&#242;a, weird... seems it depends on JsonPath implementation."},{"owner":{"account_id":18282,"reputation":17675,"user_id":41754,"accept_rate":75,"display_name":"cliff.meyers"},"score":0,"creation_date":1698853334,"post_id":36967669,"comment_id":136458138,"body_markdown":"`$.length()` works on json-path 2.7","body":"<code>$.length()</code> works on json-path 2.7"}],"tags":[],"owner":{"account_id":1770094,"reputation":13649,"user_id":1615086,"display_name":"andersschuller"},"comment_count":4,"down_vote_count":0,"up_vote_count":89,"is_accepted":true,"score":89,"last_activity_date":1462112463,"creation_date":1462112463,"answer_id":36967669,"question_id":36964936,"body_markdown":"It seems that support for returning the `length()` of an array was only [added in version 2.1.0](https://github.com/jayway/JsonPath/issues/88) of the jayway json-path library.\r\n\r\nBased on some quick tests, the `$.orders.length()` expression seems to work with both version 2.1.0 and version 2.2.0, so I think you just need to upgrade your dependency version in order to fix the error you are seeing.","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>It seems that support for returning the <code>length()</code> of an array was only <a href=\"https://github.com/jayway/JsonPath/issues/88\" rel=\"noreferrer\">added in version 2.1.0</a> of the jayway json-path library.</p>\n\n<p>Based on some quick tests, the <code>$.orders.length()</code> expression seems to work with both version 2.1.0 and version 2.2.0, so I think you just need to upgrade your dependency version in order to fix the error you are seeing.</p>\n"},{"comments":[{"owner":{"account_id":3277565,"reputation":2207,"user_id":2759097,"accept_rate":73,"display_name":"DaFois"},"score":5,"creation_date":1563015541,"post_id":57018227,"comment_id":100567770,"body_markdown":"Please always add an explanation to the code. it will improve the quality of the answer","body":"Please always add an explanation to the code. it will improve the quality of the answer"},{"owner":{"account_id":978074,"reputation":8817,"user_id":998495,"accept_rate":27,"display_name":"emery"},"score":0,"creation_date":1691625046,"post_id":57018227,"comment_id":135518324,"body_markdown":"This is the most downvoted useful and correct answer I&#39;ve ever seen on StackOverflow.  the getList() method of JsonPath was extremely useful to me and this is actually the answer I used to solve the problem.  I&#39;m cleaning up this answer so that hopefully it can climb back up from -6 LOL","body":"This is the most downvoted useful and correct answer I&#39;ve ever seen on StackOverflow.  the getList() method of JsonPath was extremely useful to me and this is actually the answer I used to solve the problem.  I&#39;m cleaning up this answer so that hopefully it can climb back up from -6 LOL"}],"tags":[],"owner":{"account_id":10121869,"reputation":97,"user_id":7478527,"display_name":"Shibu"},"comment_count":2,"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1691625332,"creation_date":1563013217,"answer_id":57018227,"question_id":36964936,"body_markdown":"The getList() method of JsonPath can be used effectively to convert the array into a list of objects that can then be used with .size()\r\n\r\n```\r\n // convert each item in the Json array to be an item of the orderItems list\r\nList orderItems = someResponse.jsonPath().getList(&quot;orders&quot;);\r\n\r\n// So now because we have the size of the list, we also have the size of the original array\r\nint orderCount = orderItems.size());\r\n```","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>The getList() method of JsonPath can be used effectively to convert the array into a list of objects that can then be used with .size()</p>\n<pre><code> // convert each item in the Json array to be an item of the orderItems list\nList orderItems = someResponse.jsonPath().getList(&quot;orders&quot;);\n\n// So now because we have the size of the list, we also have the size of the original array\nint orderCount = orderItems.size());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23680739,"reputation":1,"user_id":17706317,"display_name":"Shekhar Sinha"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1639800427,"creation_date":1639800427,"answer_id":70400907,"question_id":36964936,"body_markdown":"                JsonPath js = new JsonPath(response);\r\n               List values = js.getList(&quot;Mention the path of the json here&quot;);\r\n               int size= values.size();\r\n               System.out.println(size);","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<pre><code>            JsonPath js = new JsonPath(response);\n           List values = js.getList(&quot;Mention the path of the json here&quot;);\n           int size= values.size();\n           System.out.println(size);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2720893,"reputation":1730,"user_id":2347210,"accept_rate":67,"display_name":"Vladi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661158000,"creation_date":1661158000,"answer_id":73442389,"question_id":36964936,"body_markdown":"The way to count number of elements in json array \r\nthis is how i solve it \r\n\r\n`myJson` -&gt;My Json that inside it exist an array\r\n\r\n`fieldPath` -&gt; the path to the array \r\n\r\n\r\n\r\n    import com.jayway.jsonpath.JsonPath;\r\n    import org.json.JSONArray;\r\n    import org.json.simple.JSONObject;\r\n\r\n\tJSONObject myJson;\r\n\r\n    \tpublic long CountFields(String fieldPath) {\r\n          String onlyMyArray=JsonPath.parse(myJson).read(fieldPath).toString();\r\n\t\t  JSONArray jsonArray = new JSONArray(onlyMyArray);\r\n\t      return jsonArray.length();\r\n\t                       }\r\n\r\n","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>The way to count number of elements in json array\nthis is how i solve it</p>\n<p><code>myJson</code> -&gt;My Json that inside it exist an array</p>\n<p><code>fieldPath</code> -&gt; the path to the array</p>\n<pre><code>import com.jayway.jsonpath.JsonPath;\nimport org.json.JSONArray;\nimport org.json.simple.JSONObject;\n\nJSONObject myJson;\n\n    public long CountFields(String fieldPath) {\n      String onlyMyArray=JsonPath.parse(myJson).read(fieldPath).toString();\n      JSONArray jsonArray = new JSONArray(onlyMyArray);\n      return jsonArray.length();\n                       }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3316240,"reputation":303,"user_id":2788547,"display_name":"Aniket"},"score":0,"creation_date":1678118955,"post_id":74345095,"comment_id":133467203,"body_markdown":"I used your solution in the following way &amp; it worked like a charm!\nThis was to specifically check if an array was empty &amp; has zero objects but is not null.\n\nresultActions.andExpect(jsonPath(&#39;$.benefitsSummaryResponse.financialData.limitList.length()&#39;, is(0)) )","body":"I used your solution in the following way &amp; it worked like a charm! This was to specifically check if an array was empty &amp; has zero objects but is not null.  resultActions.andExpect(jsonPath(&#39;$.benefitsSummaryResponse.&zwnj;&#8203;financialData.limitL&zwnj;&#8203;ist.length()&#39;, is(0)) )"}],"tags":[],"owner":{"account_id":2428271,"reputation":211,"user_id":2119761,"display_name":"bmck"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667816745,"creation_date":1667816745,"answer_id":74345095,"question_id":36964936,"body_markdown":"with **webclient** in **spring webflux** \r\n\r\n    ....\r\n     .jsonPath(&quot;$.length()&quot;).isEqualTo(2);\r\n    ...","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>with <strong>webclient</strong> in <strong>spring webflux</strong></p>\n<pre><code>....\n .jsonPath(&quot;$.length()&quot;).isEqualTo(2);\n...\n</code></pre>\n"}],"owner":{"account_id":2164481,"reputation":2245,"user_id":1917867,"accept_rate":62,"display_name":"Nagendra Varma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77515,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":36967669,"answer_count":5,"score":39,"last_activity_date":1691625332,"creation_date":1462093588,"question_id":36964936,"body_markdown":"I&#39;m having a problem with finding an array or list size using Stefan Goessner&#39;s JsonPath. I&#39;m using the version json-path-2.0.0.\r\n\r\nMy jsonpath expression is `$.orders.length` and JSON looks something like this:\r\n\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    {\r\n      &quot;orders&quot; : [\r\n        ...\r\n      ]\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIts failing with the following error:\r\n\r\n    com.jayway.jsonpath.PathNotFoundException: Property [&#39;length&#39;] not found in path $[&#39;orders&#39;]\r\n\r\nAnd I tried with `$.orders.length()` too which is again failing with the below error:\r\n\r\n`com.jayway.jsonpath.PathNotFoundException: Property [&#39;length()&#39;] not found in path $[&#39;orders&#39;]`\r\n\r\nPlease suggest me how to get the length of the array using Goessner&#39;s JsonPath expression.\r\n\r\n**[EDIT]** Following is how I&#39;m obtaining the configuration:\r\n\r\n        com.jayway.jsonpath.Configuration conf = com.jayway.jsonpath.Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL);\r\n        DocumentContext documentContext = JsonPath.using(conf).parse(orderJson);\r\n        Object val = documentContext.read(jsonPathExpression);","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>I'm having a problem with finding an array or list size using Stefan Goessner's JsonPath. I'm using the version json-path-2.0.0.</p>\n\n<p>My jsonpath expression is <code>$.orders.length</code> and JSON looks something like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\r\n  \"orders\" : [\r\n    ...\r\n  ]\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Its failing with the following error:</p>\n\n<pre><code>com.jayway.jsonpath.PathNotFoundException: Property ['length'] not found in path $['orders']\n</code></pre>\n\n<p>And I tried with <code>$.orders.length()</code> too which is again failing with the below error:</p>\n\n<p><code>com.jayway.jsonpath.PathNotFoundException: Property ['length()'] not found in path $['orders']</code></p>\n\n<p>Please suggest me how to get the length of the array using Goessner's JsonPath expression.</p>\n\n<p><strong>[EDIT]</strong> Following is how I'm obtaining the configuration:</p>\n\n<pre><code>    com.jayway.jsonpath.Configuration conf = com.jayway.jsonpath.Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL);\n    DocumentContext documentContext = JsonPath.using(conf).parse(orderJson);\n    Object val = documentContext.read(jsonPathExpression);\n</code></pre>\n"},{"tags":["java","xml","groovy","soap","jaxb"],"owner":{"account_id":15908350,"reputation":35,"user_id":11478896,"display_name":"Henry Gunawan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691623440,"creation_date":1691623440,"question_id":76871818,"body_markdown":"i new in JAXB, i just want to know how to call @webResult inside @responseWrapper\r\n\r\nfor example i want get result response like this\r\n\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n          &lt;soap:Body&gt;\r\n            &lt;doReceivePushDataResponse&gt;\r\n              &lt;responsewrapper&gt;\r\n              &lt;webresult&gt;string&lt;/webresult&gt;\r\n             &lt;/responsewrapper&gt;\r\n            &lt;/doReceivePushDataResponse&gt;\r\n          &lt;/soap:Body&gt;\r\n        &lt;/soap:Envelope&gt;\r\n\r\nbut when i tried i got response like this\r\n\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n      &lt;soap:Body&gt;\r\n        &lt;doReceivePushDataResponse&gt;\r\n          &lt;iniresponsewrapper/&gt;\r\n          &lt;iniwebresult&gt;string&lt;/iniwebresult&gt;\r\n        &lt;/doReceivePushDataResponse&gt;\r\n      &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;\r\n\r\nas seen, the responsewrapper does not wrap the webresult, how do I get the response as needed?\r\n\r\ni use groovy to create that service, here&#39;s the code\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlRootElement()\r\n    class Input {\r\n        @XmlElement(name = &quot;memberCode&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\r\n        String memberCode\r\n        @XmlElement(name = &quot;fileContents&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\r\n        String fileContents\r\n        @XmlElement(name = &quot;crc32&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\r\n        String crc32\r\n        @XmlElement(name = &quot;urlWS&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\r\n        String urlWS\r\n    \r\n    }\r\n    \r\n    @Transactional\r\n    @GrailsCxfEndpoint(address = &quot;/doReceivePushData&quot;)\r\n    class ReportInvestorAccountCIMBService {\r\n        @Resource WebServiceContext context\r\n       /* @WebResult(header = true, name = &quot;iniwebresult&quot;)*/\r\n       @WebMethod\r\n       @RequestWrapper(localName=&quot;doReceivePushDataWrap&quot;)\r\n    \t@ResponseWrapper(localName=&quot;iniresponsewrapper&quot; , targetNamespace=&quot;&quot;)\r\n         @WebResult(header = true, name = &quot;iniwebresult&quot;)\r\n        public String doReceivePushData(@WebParam(name = &#39;input&#39;) \r\n    \t@XmlElement(name = &quot;input&quot;, required = true, namespace = &quot;http://financial.sekuritas.pt.com/&quot;) Input Input)\r\n    \r\n        {\r\n           return 1\r\n        }   \t\r\n    }\r\n\r\n\r\n","title":"@ResponseWrapper and @WebResult","body":"<p>i new in JAXB, i just want to know how to call @webResult inside @responseWrapper</p>\n<p>for example i want get result response like this</p>\n<pre><code>&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n      &lt;soap:Body&gt;\n        &lt;doReceivePushDataResponse&gt;\n          &lt;responsewrapper&gt;\n          &lt;webresult&gt;string&lt;/webresult&gt;\n         &lt;/responsewrapper&gt;\n        &lt;/doReceivePushDataResponse&gt;\n      &lt;/soap:Body&gt;\n    &lt;/soap:Envelope&gt;\n</code></pre>\n<p>but when i tried i got response like this</p>\n<pre><code>&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n  &lt;soap:Body&gt;\n    &lt;doReceivePushDataResponse&gt;\n      &lt;iniresponsewrapper/&gt;\n      &lt;iniwebresult&gt;string&lt;/iniwebresult&gt;\n    &lt;/doReceivePushDataResponse&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>as seen, the responsewrapper does not wrap the webresult, how do I get the response as needed?</p>\n<p>i use groovy to create that service, here's the code</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlRootElement()\nclass Input {\n    @XmlElement(name = &quot;memberCode&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\n    String memberCode\n    @XmlElement(name = &quot;fileContents&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\n    String fileContents\n    @XmlElement(name = &quot;crc32&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\n    String crc32\n    @XmlElement(name = &quot;urlWS&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\n    String urlWS\n\n}\n\n@Transactional\n@GrailsCxfEndpoint(address = &quot;/doReceivePushData&quot;)\nclass ReportInvestorAccountCIMBService {\n    @Resource WebServiceContext context\n   /* @WebResult(header = true, name = &quot;iniwebresult&quot;)*/\n   @WebMethod\n   @RequestWrapper(localName=&quot;doReceivePushDataWrap&quot;)\n    @ResponseWrapper(localName=&quot;iniresponsewrapper&quot; , targetNamespace=&quot;&quot;)\n     @WebResult(header = true, name = &quot;iniwebresult&quot;)\n    public String doReceivePushData(@WebParam(name = 'input') \n    @XmlElement(name = &quot;input&quot;, required = true, namespace = &quot;http://financial.sekuritas.pt.com/&quot;) Input Input)\n\n    {\n       return 1\n    }       \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","ahead-of-time-compile"],"answers":[{"comments":[{"owner":{"account_id":150780,"reputation":1979,"user_id":364206,"accept_rate":40,"display_name":"Danny Thomas"},"score":0,"creation_date":1682882068,"post_id":75150229,"comment_id":134281200,"body_markdown":"You can use AOT on the JVM, they imply this in the docs but it&#39;s not entirely clear. The AOT support and plugin is separate from Native Image.","body":"You can use AOT on the JVM, they imply this in the docs but it&#39;s not entirely clear. The AOT support and plugin is separate from Native Image."}],"tags":[],"owner":{"account_id":19602191,"reputation":112,"user_id":14346734,"display_name":"Pablo Gutierrez"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1673977271,"creation_date":1673977271,"answer_id":75150229,"question_id":74442575,"body_markdown":"I think they have gone in a different direction because of [this video from Spring advocate][1]. Looks like AOT is only being used with GraalVM only. \r\n\r\nTo answer your question, you can only use AOT benefits with GraalVM. \r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=aUm5WZjh8RA&amp;t=1210s","title":"In Spring Boot 3 how to benefit from Spring AOT with a regular JVM application?","body":"<p>I think they have gone in a different direction because of <a href=\"https://www.youtube.com/watch?v=aUm5WZjh8RA&amp;t=1210s\" rel=\"nofollow noreferrer\">this video from Spring advocate</a>. Looks like AOT is only being used with GraalVM only.</p>\n<p>To answer your question, you can only use AOT benefits with GraalVM.</p>\n"},{"comments":[{"owner":{"account_id":150780,"reputation":1979,"user_id":364206,"accept_rate":40,"display_name":"Danny Thomas"},"score":2,"creation_date":1682882280,"post_id":75435868,"comment_id":134281229,"body_markdown":"That&#39;s a little out of date. The property is now `-Dspring.aot.enabled=true`. For Gradle you need to apply the `org.springframework.boot.aot` plugin and configure your bundling task(s) to get the generated classes and properties into the jar by using `from sourceSets.aot.runtimeClasspath`","body":"That&#39;s a little out of date. The property is now <code>-Dspring.aot.enabled=true</code>. For Gradle you need to apply the <code>org.springframework.boot.aot</code> plugin and configure your bundling task(s) to get the generated classes and properties into the jar by using <code>from sourceSets.aot.runtimeClasspath</code>"}],"tags":[],"owner":{"account_id":2555978,"reputation":1482,"user_id":2217962,"display_name":"schrom"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676291190,"creation_date":1676291190,"answer_id":75435868,"question_id":74442575,"body_markdown":"This document descibes [how to run AOT code on the JRE][1].\r\n\r\nEssentially, you have to build your jar like this\r\n\r\n`mvn clean compile spring-boot:process-aot package`\r\n\r\nand run it like this\r\n\r\n`java -DspringAot=true -jar your-application.jar`\r\n\r\n\r\n\r\n  [1]: https://github.com/spring-tips/spring-boot-3-aot#run-the-aot-code-on-the-jre","title":"In Spring Boot 3 how to benefit from Spring AOT with a regular JVM application?","body":"<p>This document descibes <a href=\"https://github.com/spring-tips/spring-boot-3-aot#run-the-aot-code-on-the-jre\" rel=\"nofollow noreferrer\">how to run AOT code on the JRE</a>.</p>\n<p>Essentially, you have to build your jar like this</p>\n<p><code>mvn clean compile spring-boot:process-aot package</code></p>\n<p>and run it like this</p>\n<p><code>java -DspringAot=true -jar your-application.jar</code></p>\n"},{"tags":[],"owner":{"account_id":3046141,"reputation":183,"user_id":2581736,"accept_rate":0,"display_name":"Lucas Borsatto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691623170,"creation_date":1691622504,"answer_id":76871774,"question_id":74442575,"body_markdown":"Two useful ways you can use AOT with Spring Boot:\r\n\r\n**Using a docker image**\r\n------------------------\r\n\r\nBesides of having Java &gt;= 17 and Gradle &gt;= 7.3 installed, in your build.gradle you will add the following plugin:\r\n\r\n    id &#39;org.graalvm.buildtools.native&#39; version &#39;0.9.23&#39;\r\n\r\nAn initial build.gradle would look like this:\r\n\r\n    plugins {\r\n    id &#39;java&#39;\r\n        id &#39;org.springframework.boot&#39; version &#39;3.1.2&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.1.2&#39;\r\n        id &#39;org.graalvm.buildtools.native&#39; version &#39;0.9.23&#39;\r\n    }\r\n    \r\n    group = &#39;com.test&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    \r\n    java {\r\n        sourceCompatibility = &#39;17&#39;\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n        testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }\r\n    \r\nThat&#39;s it. Now you can build your docker image running the follwing command:\r\n\r\n    gradle bootBuildImage\r\n\r\nNow you can run ```docker images``` to see the image you just created and running it:\r\n\r\n    docker run --rm &lt;image_id&gt;\r\n\r\n**Compiling it to run as a native app**\r\n---------------------------------------\r\n\r\nIn this case, you should apply the same plugin shown in the example above. Besides, you will have to have GraalVM &gt;= 17 and Gradle &gt;= 7.3 installed. Then, you can run the follwoing command to build it:\r\n\r\n    gradle nativeCompile\r\n\r\nand to run your application, you can just run:\r\n\r\n    /&lt;app_name&gt;/build/native/nativeCompile/&lt;app_name&gt;\r\n\r\nAnd that&#39;all. It&#39;s important to mention that some Spring features may not work properly due to Closed World assumption, which can make reflection harder to implement.\r\n\r\n \r\n\r\n\r\n","title":"In Spring Boot 3 how to benefit from Spring AOT with a regular JVM application?","body":"<p>Two useful ways you can use AOT with Spring Boot:</p>\n<h2><strong>Using a docker image</strong></h2>\n<p>Besides of having Java &gt;= 17 and Gradle &gt;= 7.3 installed, in your build.gradle you will add the following plugin:</p>\n<pre><code>id 'org.graalvm.buildtools.native' version '0.9.23'\n</code></pre>\n<p>An initial build.gradle would look like this:</p>\n<pre><code>plugins {\nid 'java'\n    id 'org.springframework.boot' version '3.1.2'\n    id 'io.spring.dependency-management' version '1.1.2'\n    id 'org.graalvm.buildtools.native' version '0.9.23'\n}\n\ngroup = 'com.test'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '17'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n<p>That's it. Now you can build your docker image running the follwing command:</p>\n<pre><code>gradle bootBuildImage\n</code></pre>\n<p>Now you can run <code>docker images</code> to see the image you just created and running it:</p>\n<pre><code>docker run --rm &lt;image_id&gt;\n</code></pre>\n<h2><strong>Compiling it to run as a native app</strong></h2>\n<p>In this case, you should apply the same plugin shown in the example above. Besides, you will have to have GraalVM &gt;= 17 and Gradle &gt;= 7.3 installed. Then, you can run the follwoing command to build it:</p>\n<pre><code>gradle nativeCompile\n</code></pre>\n<p>and to run your application, you can just run:</p>\n<pre><code>/&lt;app_name&gt;/build/native/nativeCompile/&lt;app_name&gt;\n</code></pre>\n<p>And that'all. It's important to mention that some Spring features may not work properly due to Closed World assumption, which can make reflection harder to implement.</p>\n"}],"owner":{"account_id":3682527,"reputation":8791,"user_id":3067148,"accept_rate":74,"display_name":"Harold L. Brown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1992,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1691623170,"creation_date":1668500955,"question_id":74442575,"body_markdown":"Spring Boot 3 will release in November 2022. [The release candidate 2 has already been released.][1]\r\n\r\n[Spring Boot 3 will ship with Spring AOT.][2] Spring AOT generates additional source code so that reflection calls will be avoided.\r\n\r\nSpring AOT was introduced to generate [GraalVM Native Images][3]. However, in theory Spring AOT could also be used for regular JVM applications to speed up the start-up process (since regular calls should be faster than reflection calls).\r\n\r\nUnfortunately, I didn&#39;t find anything about how to use Spring AOT for regular JVM applications in the [Spring Boot 3 reference documentation][4]. Do you know how I can profit from Spring AOT in a regular JVM application?\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/11/10/spring-boot-3-0-0-rc2-available-now\r\n  [2]: https://spring.io/blog/2022/03/22/initial-aot-support-in-spring-framework-6-0-0-m3\r\n  [3]: https://www.graalvm.org/22.3/reference-manual/native-image/\r\n  [4]: https://docs.spring.io/spring-boot/docs/3.0.0-RC2/reference/html/native-image.html#native-image.introducing-graalvm-native-images.understanding-aot-processing","title":"In Spring Boot 3 how to benefit from Spring AOT with a regular JVM application?","body":"<p>Spring Boot 3 will release in November 2022. <a href=\"https://spring.io/blog/2022/11/10/spring-boot-3-0-0-rc2-available-now\" rel=\"noreferrer\">The release candidate 2 has already been released.</a></p>\n<p><a href=\"https://spring.io/blog/2022/03/22/initial-aot-support-in-spring-framework-6-0-0-m3\" rel=\"noreferrer\">Spring Boot 3 will ship with Spring AOT.</a> Spring AOT generates additional source code so that reflection calls will be avoided.</p>\n<p>Spring AOT was introduced to generate <a href=\"https://www.graalvm.org/22.3/reference-manual/native-image/\" rel=\"noreferrer\">GraalVM Native Images</a>. However, in theory Spring AOT could also be used for regular JVM applications to speed up the start-up process (since regular calls should be faster than reflection calls).</p>\n<p>Unfortunately, I didn't find anything about how to use Spring AOT for regular JVM applications in the <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-RC2/reference/html/native-image.html#native-image.introducing-graalvm-native-images.understanding-aot-processing\" rel=\"noreferrer\">Spring Boot 3 reference documentation</a>. Do you know how I can profit from Spring AOT in a regular JVM application?</p>\n"},{"tags":["java","spring","spring-webflux","reactive-programming","project-reactor"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1691612034,"post_id":76869993,"comment_id":135516619,"body_markdown":"What you&#39;re trying to accomplish is not a very good idea.  It is possible, though you&#39;re going to have to make several adjustments to your logic.  But think about this, what happens when the first request comes in with a single order, but the subsequent 9 orders don&#39;t come in for another 10 minutes?  Is the first caller expected to wait for 10 minutes to get a response?","body":"What you&#39;re trying to accomplish is not a very good idea.  It is possible, though you&#39;re going to have to make several adjustments to your logic.  But think about this, what happens when the first request comes in with a single order, but the subsequent 9 orders don&#39;t come in for another 10 minutes?  Is the first caller expected to wait for 10 minutes to get a response?"},{"owner":{"account_id":18026911,"reputation":531,"user_id":13102609,"display_name":"orderlyfashion"},"score":0,"creation_date":1691654274,"post_id":76869993,"comment_id":135521404,"body_markdown":"@lane.maxwell Thanks for your concern! Like I said, my API receives plenty of requests, so it&#39;s not really an issue. Nonetheless, `Igor Artamonov` managed to provide a solution that solves my original problem and your concern in one. :)","body":"@lane.maxwell Thanks for your concern! Like I said, my API receives plenty of requests, so it&#39;s not really an issue. Nonetheless, <code>Igor Artamonov</code> managed to provide a solution that solves my original problem and your concern in one. :)"},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":1,"creation_date":1691826733,"post_id":76869993,"comment_id":135546515,"body_markdown":"This pattern is called request collapsing. I&#39;m aware of an open source library which implemented this with Reactor, you might take some inspiration from there: https://github.com/ExpediaGroup/molten/blob/master/molten-core/readme.md#request-collapsing","body":"This pattern is called request collapsing. I&#39;m aware of an open source library which implemented this with Reactor, you might take some inspiration from there: <a href=\"https://github.com/ExpediaGroup/molten/blob/master/molten-core/readme.md#request-collapsing\" rel=\"nofollow noreferrer\">github.com/ExpediaGroup/molten/blob/master/molten-core/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":3,"creation_date":1691621179,"post_id":76871241,"comment_id":135517997,"body_markdown":"btw, it latch is a blocking code and should be avoided in a reactive context","body":"btw, it latch is a blocking code and should be avoided in a reactive context"}],"tags":[],"owner":{"account_id":2510058,"reputation":455,"user_id":2182753,"accept_rate":70,"display_name":"Josema"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691614824,"creation_date":1691614824,"answer_id":76871241,"question_id":76869993,"body_markdown":"I would try to use [countDownLatch][1], this allow you to trigger an action once you get to the count for all the threads that are using your service.\r\n\r\n```\r\n@Component\r\npublic class OrderService {\r\n\r\n    private static final String QUEUE_UP_COUNT = 10;\r\n    private final WebClient webClient;\r\n    private CountDownLatch countDownLatch = new CountDownLatch(QUEUE_UP_COUNT );\r\n\r\n    public OrderService(WebClient webClient) {\r\n        this.webClient = webClient;\r\n    }\r\n\r\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\r\n        countDownLatch.countDown();\r\n        countDownLatch.wait();\r\n        List&lt;Order&gt; orders = webClient\r\n            .get()\r\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\r\n            .retrieve()\r\n            .bodyToFlux(Order.class)\r\n            .collectList();\r\n       // Here you need to create a new the countDownLatch since it doesn&#39;t allow to restart\r\n       countDownLatch = new CountDownLatch(QUEUE_UP_COUNT );\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html","title":"Queuing up requests in Spring WebFlux","body":"<p>I would try to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\">countDownLatch</a>, this allow you to trigger an action once you get to the count for all the threads that are using your service.</p>\n<pre><code>@Component\npublic class OrderService {\n\n    private static final String QUEUE_UP_COUNT = 10;\n    private final WebClient webClient;\n    private CountDownLatch countDownLatch = new CountDownLatch(QUEUE_UP_COUNT );\n\n    public OrderService(WebClient webClient) {\n        this.webClient = webClient;\n    }\n\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\n        countDownLatch.countDown();\n        countDownLatch.wait();\n        List&lt;Order&gt; orders = webClient\n            .get()\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\n            .retrieve()\n            .bodyToFlux(Order.class)\n            .collectList();\n       // Here you need to create a new the countDownLatch since it doesn't allow to restart\n       countDownLatch = new CountDownLatch(QUEUE_UP_COUNT );\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18026911,"reputation":531,"user_id":13102609,"display_name":"orderlyfashion"},"score":0,"creation_date":1691652467,"post_id":76871799,"comment_id":135521049,"body_markdown":"The basics work great, thanks! There&#39;s a corner case where two requests might contain the same order number though. If we send in 6 order numbers, and then the same 6 order numbers in another request, it will put 12 items in the queue and perform the API call. The first requester gets the expected result back, but the second requester gets stuck forever and is never returned anything. Is it possible to return an existing `Mono&lt;Order&gt;` in case the order number is already queued? I tried unsuccessfully to adjust the logic by checking if queue contains the order number already.","body":"The basics work great, thanks! There&#39;s a corner case where two requests might contain the same order number though. If we send in 6 order numbers, and then the same 6 order numbers in another request, it will put 12 items in the queue and perform the API call. The first requester gets the expected result back, but the second requester gets stuck forever and is never returned anything. Is it possible to return an existing <code>Mono&lt;Order&gt;</code> in case the order number is already queued? I tried unsuccessfully to adjust the logic by checking if queue contains the order number already."},{"owner":{"account_id":18026911,"reputation":531,"user_id":13102609,"display_name":"orderlyfashion"},"score":0,"creation_date":1691665794,"post_id":76871799,"comment_id":135523568,"body_markdown":"I tried adding a new method between `getOrders` and `getOrder` that tries to find queued items or creating a new one:\n`return Mono.from(queue.asFlux().filter(tuple -&gt; tuple.getT1().equals(orderNumber)).flatMap(tuple -&gt; tuple.getT2().asMono())).switchIfEmpty(getOrder(orderNumber));`\nI can see in the logs that the external API is called and values returned, but my service never returns a value to the requester. I also tried adding a `ConcurrentMap` where I store the `Mono&lt;Order&gt;` and check there. That works, but I guess it should be possible and better with purely reactor.","body":"I tried adding a new method between <code>getOrders</code> and <code>getOrder</code> that tries to find queued items or creating a new one: <code>return Mono.from(queue.asFlux().filter(tuple -&gt; tuple.getT1().equals(orderNumber)).flatMap(tuple -&gt; tuple.getT2().asMono())).switchIfEmpty(getOrder(orderNumber)&zwnj;&#8203;);</code> I can see in the logs that the external API is called and values returned, but my service never returns a value to the requester. I also tried adding a <code>ConcurrentMap</code> where I store the <code>Mono&lt;Order&gt;</code> and check there. That works, but I guess it should be possible and better with purely reactor."},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1691697155,"post_id":76871799,"comment_id":135530355,"body_markdown":"You could do that with a `ConcurrentMap` for current in-flight requests. That may be tricky but is possible. For the example you shown, it&#39;s because the `queue` never completes and never empty, so `switchIfEmpty` is never called and I guess that&#39;s why it also never enqueued.","body":"You could do that with a <code>ConcurrentMap</code> for current in-flight requests. That may be tricky but is possible. For the example you shown, it&#39;s because the <code>queue</code> never completes and never empty, so <code>switchIfEmpty</code> is never called and I guess that&#39;s why it also never enqueued."}],"tags":[],"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691622949,"creation_date":1691622949,"answer_id":76871799,"question_id":76869993,"body_markdown":"It can be something like the following:\r\n\r\nFirst, create a queue for the incoming requests:\r\n\r\n    private Sinks.Many&lt;Tuples2(String, Sinks.One&lt;Order&gt;)&gt; queue = Sinks.many().unicast().onBackpressureBuffer()\r\n\r\nAnd have the following method to accept requests:\r\n\r\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\r\n        return Flux.fromIterable(orderNumbers)\r\n            .flatMapSequential(::getOrder)\r\n            .collectList();\r\n    }\r\n\r\n    public Mono&lt;Order&gt; getOrder(String number) {\r\n        Sinks.One&lt;Order&gt; callback = Sinks.one(); \r\n        // TODO handle FAIL_NON_SERIALIZED here by doing a park-retry\r\n        queue.tryEmitValue(Tuples.of(number, callback));\r\n        return callback.asMono();\r\n    }\r\n\r\nRun this for processing\r\n\r\n    public void run() {\r\n       queue\r\n          .bufferTimeout(10, Duration.ofMilliseconds(100))   \r\n          .flatMap( list -&gt; {\r\n              List numbers = list.stream().map(Tuples::getT1).collect(Collectors.toList());\r\n              request(numbers)\r\n                .doOnNext(orders -&gt; {\r\n                    for(int i = 0; i &lt; orders.size(); i++) {\r\n                       list.get(i).getT2().tryEmitValue(orders[i]);\r\n                    }\r\n                })\r\n                .then()\r\n          })\r\n          .subscribe()\r\n    }\r\n\r\n    public Mono&lt;List&lt;Order&gt;&gt; request(List&lt;String&gt; orderNumbers)  {\r\n        return webClient\r\n            .get()\r\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\r\n            .retrieve()\r\n            .bodyToFlux(Order.class)\r\n            .collectList();\r\n    }","title":"Queuing up requests in Spring WebFlux","body":"<p>It can be something like the following:</p>\n<p>First, create a queue for the incoming requests:</p>\n<pre><code>private Sinks.Many&lt;Tuples2(String, Sinks.One&lt;Order&gt;)&gt; queue = Sinks.many().unicast().onBackpressureBuffer()\n</code></pre>\n<p>And have the following method to accept requests:</p>\n<pre><code>public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\n    return Flux.fromIterable(orderNumbers)\n        .flatMapSequential(::getOrder)\n        .collectList();\n}\n\npublic Mono&lt;Order&gt; getOrder(String number) {\n    Sinks.One&lt;Order&gt; callback = Sinks.one(); \n    // TODO handle FAIL_NON_SERIALIZED here by doing a park-retry\n    queue.tryEmitValue(Tuples.of(number, callback));\n    return callback.asMono();\n}\n</code></pre>\n<p>Run this for processing</p>\n<pre><code>public void run() {\n   queue\n      .bufferTimeout(10, Duration.ofMilliseconds(100))   \n      .flatMap( list -&gt; {\n          List numbers = list.stream().map(Tuples::getT1).collect(Collectors.toList());\n          request(numbers)\n            .doOnNext(orders -&gt; {\n                for(int i = 0; i &lt; orders.size(); i++) {\n                   list.get(i).getT2().tryEmitValue(orders[i]);\n                }\n            })\n            .then()\n      })\n      .subscribe()\n}\n\npublic Mono&lt;List&lt;Order&gt;&gt; request(List&lt;String&gt; orderNumbers)  {\n    return webClient\n        .get()\n        .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\n        .retrieve()\n        .bodyToFlux(Order.class)\n        .collectList();\n}\n</code></pre>\n"}],"owner":{"account_id":18026911,"reputation":531,"user_id":13102609,"display_name":"orderlyfashion"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76871799,"answer_count":2,"score":2,"last_activity_date":1691622949,"creation_date":1691601509,"question_id":76869993,"body_markdown":"In my API I have a service that calls an external API. This external API has a cost per request. Hence I would like to queue up the requests to the external API.\r\n\r\nThis is how it looks today:\r\n\r\n```java\r\n@Component\r\npublic class OrderService {\r\n\r\n    private final WebClient webClient;\r\n\r\n    public OrderService(WebClient webClient) {\r\n        this.webClient = webClient;\r\n    }\r\n\r\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\r\n        return webClient\r\n            .get()\r\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\r\n            .retrieve()\r\n            .bodyToFlux(Order.class)\r\n            .collectList();\r\n    }\r\n}\r\n```\r\n\r\nWhat I would like is to somehow queue up 10 order numbers, and after reaching 10 order numbers in the queue, send the bulk request, and then return the response to all the original requesters.\r\n\r\nLet&#39;s say `OrderService::getOrders` is called three times, first with 4 order numbers, then with 4 additional order numbers, and lastly 4 order numbers again. The first two requests would queue up the total 8 order numbers without calling the external API. Once the third request arrives, we have 12 order numbers in the queue. At this point we will send a request with the first 10 order numbers. The last two remains queued since the maximum order numbers the external API allows is 10.\r\n\r\nMy API sees a lot of traffic, so it&#39;s not an issue to queue and wait, they will not have to wait a long time until the queue has 10 items.\r\n\r\nI have tried to read up on how to achieve this with Spring WebFlux, and my research has pointed me to [Sinks][1] and [Processor][2]. However, I have a hard time wrapping my head around how it all ties together. For instance how I can keep track of which requests requested the specific order numbers.\r\n\r\nCould someone more knowledgeable please help me out with how to achieve this?\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Sinks.html\r\n  [2]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/FluxProcessor.html","title":"Queuing up requests in Spring WebFlux","body":"<p>In my API I have a service that calls an external API. This external API has a cost per request. Hence I would like to queue up the requests to the external API.</p>\n<p>This is how it looks today:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class OrderService {\n\n    private final WebClient webClient;\n\n    public OrderService(WebClient webClient) {\n        this.webClient = webClient;\n    }\n\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\n        return webClient\n            .get()\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\n            .retrieve()\n            .bodyToFlux(Order.class)\n            .collectList();\n    }\n}\n</code></pre>\n<p>What I would like is to somehow queue up 10 order numbers, and after reaching 10 order numbers in the queue, send the bulk request, and then return the response to all the original requesters.</p>\n<p>Let's say <code>OrderService::getOrders</code> is called three times, first with 4 order numbers, then with 4 additional order numbers, and lastly 4 order numbers again. The first two requests would queue up the total 8 order numbers without calling the external API. Once the third request arrives, we have 12 order numbers in the queue. At this point we will send a request with the first 10 order numbers. The last two remains queued since the maximum order numbers the external API allows is 10.</p>\n<p>My API sees a lot of traffic, so it's not an issue to queue and wait, they will not have to wait a long time until the queue has 10 items.</p>\n<p>I have tried to read up on how to achieve this with Spring WebFlux, and my research has pointed me to <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Sinks.html\" rel=\"nofollow noreferrer\">Sinks</a> and <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/FluxProcessor.html\" rel=\"nofollow noreferrer\">Processor</a>. However, I have a hard time wrapping my head around how it all ties together. For instance how I can keep track of which requests requested the specific order numbers.</p>\n<p>Could someone more knowledgeable please help me out with how to achieve this?</p>\n"},{"tags":["java","spring-boot","sqlite","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691157968,"post_id":76836550,"comment_id":135458069,"body_markdown":"just have a look [spring-data-jpa](https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa), in my opinion you dont need to do so kind of manipulation, spring boot  provide auto-configurable dataSource connect","body":"just have a look <a href=\"https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa\" rel=\"nofollow noreferrer\">spring-data-jpa</a>, in my opinion you dont need to do so kind of manipulation, spring boot  provide auto-configurable dataSource connect"},{"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"score":0,"creation_date":1691159424,"post_id":76836550,"comment_id":135458427,"body_markdown":"I am dealing with SQLite database, which is a bit special to my understanding, that is why I do this manipulation. Or, do you think even with SQLite database, I don&#39;t need to do this?","body":"I am dealing with SQLite database, which is a bit special to my understanding, that is why I do this manipulation. Or, do you think even with SQLite database, I don&#39;t need to do this?"},{"owner":{"account_id":102924,"reputation":130,"user_id":275979,"display_name":"ovgu12"},"score":0,"creation_date":1691159922,"post_id":76836550,"comment_id":135458567,"body_markdown":"https://www.baeldung.com/spring-boot-sqlite may be it could help you","body":"<a href=\"https://www.baeldung.com/spring-boot-sqlite\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-sqlite</a> may be it could help you"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691160062,"post_id":76836550,"comment_id":135458603,"body_markdown":"yes, just do it in a normal flow","body":"yes, just do it in a normal flow"},{"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"score":0,"creation_date":1691160443,"post_id":76836550,"comment_id":135458698,"body_markdown":"The link @ovgu12 sent in his/her comment is also using the same way as I am using to manually create the datasource bean, so, I don&#39;t see how that helps my problem of binding properties.","body":"The link @ovgu12 sent in his/her comment is also using the same way as I am using to manually create the datasource bean, so, I don&#39;t see how that helps my problem of binding properties."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691161311,"post_id":76836550,"comment_id":135458903,"body_markdown":"[check it](https://fullstackdeveloper.guru/2020/05/01/how-to-integrate-sqlite-database-with-spring-boot/comment-page-1/#comments)","body":"<a href=\"https://fullstackdeveloper.guru/2020/05/01/how-to-integrate-sqlite-database-with-spring-boot/comment-page-1/#comments\" rel=\"nofollow noreferrer\">check it</a>"}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691333917,"creation_date":1691332846,"answer_id":76846389,"question_id":76836550,"body_markdown":"The usual way for configuration properties is to keep them in the separate class and activate them using `@EnableConfigurationProperties`. You can read this [article][1]. And you can try something as follows:\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(MyConfigurationProperties.class)\r\n    public class DBConfig {\r\n\r\n        @Autowired\r\n        private MyConfigurationProperties props;\r\n    \r\n        @Bean\r\n        public DataSource dataSource() {\r\n            final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n            dataSource.setDriverClassName(props.getDriverClassName());\r\n            // ...\r\n            return dataSource;\r\n        }\r\n    }\r\n\r\nAnd your properties class will look like this:\r\n\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n    public class MyConfigurationProperties {\r\n        \r\n        private String driverClassName;\r\n\r\n        // getters ans setters are here\r\n    }\r\n\r\nBut I&#39;m not sure if this is the best solution, because Spring already has its own configuration properties class that binds to the prefix `spring.datasource`. \r\n\r\nAnd the second option for you is to use the Spring configuration properties:\r\n\r\n    import org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\r\n    // ...\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(DataSourceProperties.class)\r\n    public class DBConfig {\r\n\r\n        @Autowired\r\n        private DataSourceProperties props;\r\n    \r\n        @Bean\r\n        public DataSource dataSource() {\r\n            final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n            dataSource.setDriverClassName(props.getDriverClassName());\r\n            // ...\r\n            return dataSource;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.baeldung.com/configuration-properties-in-spring-boot","title":"Bind properties in application.yml not working","body":"<p>The usual way for configuration properties is to keep them in the separate class and activate them using <code>@EnableConfigurationProperties</code>. You can read this <a href=\"https://www.baeldung.com/configuration-properties-in-spring-boot\" rel=\"nofollow noreferrer\">article</a>. And you can try something as follows:</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties(MyConfigurationProperties.class)\npublic class DBConfig {\n\n    @Autowired\n    private MyConfigurationProperties props;\n\n    @Bean\n    public DataSource dataSource() {\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(props.getDriverClassName());\n        // ...\n        return dataSource;\n    }\n}\n</code></pre>\n<p>And your properties class will look like this:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\npublic class MyConfigurationProperties {\n    \n    private String driverClassName;\n\n    // getters ans setters are here\n}\n</code></pre>\n<p>But I'm not sure if this is the best solution, because Spring already has its own configuration properties class that binds to the prefix <code>spring.datasource</code>.</p>\n<p>And the second option for you is to use the Spring configuration properties:</p>\n<pre><code>import org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\n// ...\n\n@Configuration\n@EnableConfigurationProperties(DataSourceProperties.class)\npublic class DBConfig {\n\n    @Autowired\n    private DataSourceProperties props;\n\n    @Bean\n    public DataSource dataSource() {\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(props.getDriverClassName());\n        // ...\n        return dataSource;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5300710,"reputation":269,"user_id":4230445,"display_name":"rahulP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691513653,"creation_date":1691513653,"answer_id":76861682,"question_id":76836550,"body_markdown":"You only need to add setters for feilds in your `DBConfig` class and it will work.","title":"Bind properties in application.yml not working","body":"<p>You only need to add setters for feilds in your <code>DBConfig</code> class and it will work.</p>\n"}],"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76846389,"answer_count":2,"score":-1,"last_activity_date":1691621374,"creation_date":1691156877,"question_id":76836550,"body_markdown":"In my SpringBoot project I have application.yml file in src/main/resources/:\r\n\r\n```\r\nserver:\r\n  port: 8080\r\n\r\nspring:\r\n  datasource:\r\n    driver-class-name: org.sqlite.JDBC\r\n    ...\r\n```\r\n\r\nI want to bind the properties defined above to a Java class:\r\n\r\n```\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\npublic class DBConfig {\r\n\r\n    // I wished spring-boot could automatically bind it with &#39;driver-class-name&#39; in application.yml\r\n    private String driverClassName;\r\n    ...\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(driverClassName);\r\n        ...\r\n        return dataSource;\r\n    }\r\n}\r\n```\r\n\r\nI have the annotation `@Configuration` and `@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)`. I also have specified the correct prefix. But when I run my application I get an error:\r\n\r\n&gt; Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [com/my/webapp/config/DBConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method &#39;dataSource&#39; threw exception with message: Property &#39;driverClassName&#39; must not be empty\r\n\r\nThe error tells `driverClassName` is an empty string, so the binding doesn&#39;t work. What am I missing? I am using an SQLite database which is not as well supported as MySQL, MariaDB, etc. in SpringBoot. So I provide a datasource bean class to bind database configurations in application.yml to the manually created bean class. Is it unnecessary?","title":"Bind properties in application.yml not working","body":"<p>In my SpringBoot project I have application.yml file in src/main/resources/:</p>\n<pre><code>server:\n  port: 8080\n\nspring:\n  datasource:\n    driver-class-name: org.sqlite.JDBC\n    ...\n</code></pre>\n<p>I want to bind the properties defined above to a Java class:</p>\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\npublic class DBConfig {\n\n    // I wished spring-boot could automatically bind it with 'driver-class-name' in application.yml\n    private String driverClassName;\n    ...\n\n    @Bean\n    public DataSource dataSource() {\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(driverClassName);\n        ...\n        return dataSource;\n    }\n}\n</code></pre>\n<p>I have the annotation <code>@Configuration</code> and <code>@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</code>. I also have specified the correct prefix. But when I run my application I get an error:</p>\n<blockquote>\n<p>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [com/my/webapp/config/DBConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Property 'driverClassName' must not be empty</p>\n</blockquote>\n<p>The error tells <code>driverClassName</code> is an empty string, so the binding doesn't work. What am I missing? I am using an SQLite database which is not as well supported as MySQL, MariaDB, etc. in SpringBoot. So I provide a datasource bean class to bind database configurations in application.yml to the manually created bean class. Is it unnecessary?</p>\n"},{"tags":["java","spring-boot","authentication","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1689440453,"post_id":76694592,"comment_id":135215272,"body_markdown":"read how spring boot handles errors https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.servlet.spring-mvc.error-handling then read your logs  `Securing GET /error?role=PLUS` your request is failing, so spring redirects you to `/error` and you havn&#39;t cleared the error endpoint s&#229; you get an access denied. Also, using JWTs as sessions is very insecure, there is a reason as to why spring does not supply a JWT-as-session filter. Your application is vulnerable to Cross-site-scripting attacks, DDoS attacks and you cant logout the user. Using JWTs as sessions is very insecue","body":"read how spring boot handles errors <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.servlet.spring-mvc.error-handling\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a> then read your logs  <code>Securing GET &#47;error?role=PLUS</code> your request is failing, so spring redirects you to <code>&#47;error</code> and you havn&#39;t cleared the error endpoint s&#229; you get an access denied. Also, using JWTs as sessions is very insecure, there is a reason as to why spring does not supply a JWT-as-session filter. Your application is vulnerable to Cross-site-scripting attacks, DDoS attacks and you cant logout the user. Using JWTs as sessions is very insecue"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689440494,"post_id":76694592,"comment_id":135215275,"body_markdown":"whatever tutorial you are following is giving you bad advice, and this is why you should not build custom security solutions.","body":"whatever tutorial you are following is giving you bad advice, and this is why you should not build custom security solutions."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689487835,"post_id":76694592,"comment_id":135218702,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"comments":[{"owner":{"account_id":29023752,"reputation":41,"user_id":22232487,"display_name":"Kok0ro"},"score":0,"creation_date":1691621279,"post_id":76871711,"comment_id":135518003,"body_markdown":"Yes I did change to oauth2 too.","body":"Yes I did change to oauth2 too."}],"tags":[],"owner":{"account_id":29023752,"reputation":41,"user_id":22232487,"display_name":"Kok0ro"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691621233,"creation_date":1691621233,"answer_id":76871711,"question_id":76694592,"body_markdown":"    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity\r\n    public class SecurityConfiguration {\r\n    \r\n        @Bean\r\n        SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n            return http\r\n                    .authorizeHttpRequests(auth -&gt; {\r\n                        auth.requestMatchers(&quot;/api/client/createUser&quot;).permitAll();\r\n                        auth.requestMatchers(&quot;/api/client/home&quot;).permitAll();\r\n                        auth.anyRequest().authenticated();\r\n                    })\r\n                    .csrf(csrf -&gt; {\r\n                        csrf.ignoringRequestMatchers(&quot;/api/client/createUser&quot;, &quot;/api/client/home&quot;);\r\n                    })\r\n                    .oauth2Login(withDefaults())\r\n                    .formLogin(withDefaults())\r\n                    .build();\r\n        }\r\n    \r\n    }\r\n\r\nFirstly I had a v&quot;i&quot; instead of a v1 in the controller so I would never get the request passed, and then it was a matter of CSRF config.\r\n\r\n**CSRF Token Generation:** Spring Security enables CSRF protection by default. Even if an endpoint is configured with permitAll(), CSRF protection might still be applied. To properly exclude an endpoint from CSRF protection, you might need to explicitly disable it for that endpoint. You can do this by chaining .and().csrf().disable() for the specific endpoint configuration.\r\n\r\n**SOLVED: By adding the disabling CSRF config to the securityConfig and by fixing my endpoints url.**","title":"403 Forbbiden: Pre-authenticated entry point called. Rejecting access","body":"<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(&quot;/api/client/createUser&quot;).permitAll();\n                    auth.requestMatchers(&quot;/api/client/home&quot;).permitAll();\n                    auth.anyRequest().authenticated();\n                })\n                .csrf(csrf -&gt; {\n                    csrf.ignoringRequestMatchers(&quot;/api/client/createUser&quot;, &quot;/api/client/home&quot;);\n                })\n                .oauth2Login(withDefaults())\n                .formLogin(withDefaults())\n                .build();\n    }\n\n}\n</code></pre>\n<p>Firstly I had a v&quot;i&quot; instead of a v1 in the controller so I would never get the request passed, and then it was a matter of CSRF config.</p>\n<p><strong>CSRF Token Generation:</strong> Spring Security enables CSRF protection by default. Even if an endpoint is configured with permitAll(), CSRF protection might still be applied. To properly exclude an endpoint from CSRF protection, you might need to explicitly disable it for that endpoint. You can do this by chaining .and().csrf().disable() for the specific endpoint configuration.</p>\n<p><strong>SOLVED: By adding the disabling CSRF config to the securityConfig and by fixing my endpoints url.</strong></p>\n"}],"owner":{"account_id":29023752,"reputation":41,"user_id":22232487,"display_name":"Kok0ro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3241,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76871711,"answer_count":1,"score":2,"last_activity_date":1691621233,"creation_date":1689436442,"question_id":76694592,"body_markdown":"My controller:\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/vi/client&quot;)\r\n@RequiredArgsConstructor\r\npublic class FHubClientController {\r\n\r\n    private final FHubService fHubService;\r\n    @GetMapping(&quot;/findAllUsersByRole&quot;)\r\n    public List&lt;User&gt; findAllUsersByRole(@RequestParam(&quot;role&quot;) String role) {\r\n        System.out.println(&quot;sdfasgf&quot;);\r\n\r\n        return fHubService.findAllUsersByRole(role.toUpperCase());\r\n    }\r\n}\r\n```\r\n\r\nMy SecurityConfiguration:\r\n```\r\npackage com.org.fhub.config;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationProvider;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\nimport org.springframework.security.web.authentication.logout.LogoutHandler;\r\n\r\nimport static com.org.fhub.domain.user.Permission.*;\r\nimport static com.org.fhub.domain.user.UserRoleEnum.ADMIN;\r\nimport static com.org.fhub.domain.user.UserRoleEnum.STAFF;\r\nimport static org.springframework.http.HttpMethod.*;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\n@EnableMethodSecurity\r\npublic class SecurityConfiguration {\r\n\r\n    private final JwtAuthenticationFilter jwtAuthFilter;\r\n    private final AuthenticationProvider authenticationProvider;\r\n    private final LogoutHandler logoutHandler;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .authorizeHttpRequests((authorize) -&gt; {\r\n                    authorize.requestMatchers(\r\n                            &quot;/api/v1/auth/**&quot;,\r\n                            &quot;/v2/api-docs&quot;,\r\n                            &quot;/v3/api-docs&quot;,\r\n                            &quot;/v3/api-docs/**&quot;,\r\n                            &quot;/swagger-resources&quot;,\r\n                            &quot;/swagger-resources/**&quot;,\r\n                            &quot;/configuration/ui&quot;,\r\n                            &quot;/configuration/security&quot;,\r\n                            &quot;/swagger-ui/**&quot;,\r\n                            &quot;/webjars/**&quot;,\r\n                            &quot;/swagger-ui.html&quot;\r\n                    ).permitAll();\r\n                    authorize.requestMatchers(&quot;/api/v1/staff/**&quot;).hasAnyRole(ADMIN.name(), STAFF.name());\r\n                    authorize.requestMatchers(GET, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_READ.name(), STAFF_READ.name());\r\n                    authorize.requestMatchers(POST, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_CREATE.name(), STAFF_CREATE.name());\r\n                    authorize.requestMatchers(PUT, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_UPDATE.name(), STAFF_UPDATE.name());\r\n                    authorize.requestMatchers(DELETE, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_DELETE.name(), STAFF_DELETE.name());\r\n                    authorize.anyRequest().authenticated();\r\n                })\r\n\r\n                /* .requestMatchers(&quot;/api/v1/admin/**&quot;).hasRole(ADMIN.name())\r\n\r\n                 .requestMatchers(GET, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_READ.name())\r\n                 .requestMatchers(POST, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_CREATE.name())\r\n                 .requestMatchers(PUT, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_UPDATE.name())\r\n                 .requestMatchers(DELETE, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_DELETE.name())*/\r\n\r\n                .sessionManagement((session) -&gt; session\r\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                )\r\n                .authenticationProvider(authenticationProvider)\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .logout((logout) -&gt; logout.logoutUrl(&quot;/api/v1/auth/logout&quot;).addLogoutHandler(logoutHandler).logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext()))\r\n        ;\r\n\r\n        return http.build();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nMy Filter:\r\n```\r\npackage com.org.fhub.config;\r\n\r\nimport com.org.fhub.domain.token.TokenRepository;\r\nimport jakarta.servlet.FilterChain;\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.lang.NonNull;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport java.io.IOException;\r\n\r\n@RequiredArgsConstructor\r\n@Component\r\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtService jwtService;\r\n    private final UserDetailsService userDetailsService;\r\n    private final TokenRepository tokenRepository;\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            @NonNull HttpServletRequest request,\r\n            @NonNull HttpServletResponse response,\r\n            @NonNull FilterChain filterChain\r\n    ) throws ServletException, IOException {\r\n        if (request.getServletPath().contains(&quot;/api/v1/auth&quot;)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n        final String jwt;\r\n        final String username;\r\n        if (authHeader == null ||!authHeader.startsWith(&quot;Bearer &quot;)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n        jwt = authHeader.substring(7);\r\n        username = jwtService.extractUsername(jwt);\r\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\r\n            var isTokenValid = tokenRepository.findByToken(jwt)\r\n                    .map(t -&gt; !t.isExpired() &amp;&amp; !t.isRevoked())\r\n                    .orElse(false);\r\n            if (jwtService.isTokenValid(jwt, userDetails) &amp;&amp; isTokenValid) {\r\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails,\r\n                        null,\r\n                        userDetails.getAuthorities()\r\n                );\r\n                authToken.setDetails(\r\n                        new WebAuthenticationDetailsSource().buildDetails(request)\r\n                );\r\n                SecurityContextHolder.getContext().setAuthentication(authToken);\r\n            }\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\nMy AplicationConfig:\r\n\r\n```\r\npackage com.org.fhub.config;\r\n\r\nimport com.org.fhub.domain.user.UserRepository;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.AuthenticationProvider;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\n\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class ApplicationConfig {\r\n\r\n    private final UserRepository repository;\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        return username -&gt; repository.findUserByUserName(username)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n        authProvider.setUserDetailsService(userDetailsService());\r\n        authProvider.setPasswordEncoder(passwordEncoder());\r\n        return authProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\r\n        return config.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n}\r\n```\r\nMy jwtService:\r\n\r\n```\r\npackage com.org.fhub.config;\r\n\r\nimport io.jsonwebtoken.Claims;\r\nimport io.jsonwebtoken.Jwts;\r\nimport io.jsonwebtoken.SignatureAlgorithm;\r\nimport io.jsonwebtoken.io.Decoders;\r\nimport io.jsonwebtoken.security.Keys;\r\nimport java.security.Key;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.function.Function;\r\n\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class JwtService {\r\n\r\n    @Value(&quot;${application.security.jwt.secret-key}&quot;)\r\n    private String secretKey;\r\n    @Value(&quot;${application.security.jwt.expiration}&quot;)\r\n    private long jwtExpiration;\r\n    @Value(&quot;${application.security.jwt.refresh-token.expiration}&quot;)\r\n    private long refreshExpiration;\r\n\r\n    public String extractUsername(String token) {\r\n        return extractClaim(token, Claims::getSubject);\r\n    }\r\n\r\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n        final Claims claims = extractAllClaims(token);\r\n        return claimsResolver.apply(claims);\r\n    }\r\n\r\n    public String generateToken(UserDetails userDetails) {\r\n        return generateToken(new HashMap&lt;&gt;(), userDetails);\r\n    }\r\n\r\n    public String generateToken(\r\n            Map&lt;String, Object&gt; extraClaims,\r\n            UserDetails userDetails\r\n    ) {\r\n        return buildToken(extraClaims, userDetails, jwtExpiration);\r\n    }\r\n\r\n    public String generateRefreshToken(\r\n            UserDetails userDetails\r\n    ) {\r\n        return buildToken(new HashMap&lt;&gt;(), userDetails, refreshExpiration);\r\n    }\r\n\r\n    private String buildToken(\r\n            Map&lt;String, Object&gt; extraClaims,\r\n            UserDetails userDetails,\r\n            long expiration\r\n    ) {\r\n        return Jwts\r\n                .builder()\r\n                .setClaims(extraClaims)\r\n                .setSubject(userDetails.getUsername())\r\n                .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                .setExpiration(new Date(System.currentTimeMillis() + expiration))\r\n                .signWith(getSignInKey(), SignatureAlgorithm.HS256)\r\n                .compact();\r\n    }\r\n\r\n    public boolean isTokenValid(String token, UserDetails userDetails) {\r\n        final String username = extractUsername(token);\r\n        return (username.equals(userDetails.getUsername())) &amp;&amp; !isTokenExpired(token);\r\n    }\r\n\r\n    private boolean isTokenExpired(String token) {\r\n        return extractExpiration(token).before(new Date());\r\n    }\r\n\r\n    private Date extractExpiration(String token) {\r\n        return extractClaim(token, Claims::getExpiration);\r\n    }\r\n\r\n    private Claims extractAllClaims(String token) {\r\n        return Jwts\r\n                .parserBuilder()\r\n                .setSigningKey(getSignInKey())\r\n                .build()\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n    }\r\n\r\n    private Key getSignInKey() {\r\n        byte[] keyBytes = Decoders.BASE64.decode(secretKey);\r\n        return Keys.hmacShaKeyFor(keyBytes);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThe token is valid and it says **authenticated=true** \r\n\r\nthe log produced:\r\n\r\n```\r\n2023-07-15T16:58:39.175+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)\r\n2023-07-15T16:58:39.177+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/client/findAllUsersByRole?role=PLUS\r\n2023-07-15T16:58:39.177+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n2023-07-15T16:58:39.178+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n2023-07-15T16:58:39.181+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n2023-07-15T16:58:39.182+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\r\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern=&#39;/api/v1/auth/logout&#39;, GET], Ant [pattern=&#39;/api/v1/auth/logout&#39;, POST], Ant [pattern=&#39;/api/v1/auth/logout&#39;, PUT], Ant [pattern=&#39;/api/v1/auth/logout&#39;, DELETE]]\r\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)\r\n2023-07-15T16:58:43.728+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\r\n2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\r\n2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\r\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=User(id=64b2afc9b0ab605e709f61b6, username=kokoro, name=Brito, password=$2a$10$2PN0M.nH.tUa6sqXX/RaAOIS8kcH4FZUGEO9AzD6Dat/98gW7BF4S, notes=notas, role=PLUS, tokens=null), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_PLUS]]\r\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\r\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\r\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\r\n2023-07-15T16:58:45.910+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53]\r\n2023-07-15T16:58:45.923+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923\r\n2023-07-15T16:58:45.924+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/client/findAllUsersByRole?role=PLUS\r\n2023-07-15T16:58:45.937+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)\r\n2023-07-15T16:58:45.940+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error?role=PLUS\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern=&#39;/api/v1/auth/logout&#39;, GET], Ant [pattern=&#39;/api/v1/auth/logout&#39;, POST], Ant [pattern=&#39;/api/v1/auth/logout&#39;, PUT], Ant [pattern=&#39;/api/v1/auth/logout&#39;, DELETE]]\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]]\r\n2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923\r\n2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\r\n2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\r\n\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\r\n2023-07-15T16:58:45.951+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\r\n\r\n```\r\n\r\nMy build.gradle:\r\n\r\n```\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-mongodb&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security:3.1.1&#39;\r\n```\r\n\r\n\r\n\r\nIm sending the Bearer correctly and validated it with the DB.\r\nAll other endpoints/controllers with authorities work fine, register, delete etc... this one doesnt even go in the controller.\r\n\r\nI expect this endpoint to be allowed to execute.","title":"403 Forbbiden: Pre-authenticated entry point called. Rejecting access","body":"<p>My controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/vi/client&quot;)\n@RequiredArgsConstructor\npublic class FHubClientController {\n\n    private final FHubService fHubService;\n    @GetMapping(&quot;/findAllUsersByRole&quot;)\n    public List&lt;User&gt; findAllUsersByRole(@RequestParam(&quot;role&quot;) String role) {\n        System.out.println(&quot;sdfasgf&quot;);\n\n        return fHubService.findAllUsersByRole(role.toUpperCase());\n    }\n}\n</code></pre>\n<p>My SecurityConfiguration:</p>\n<pre><code>package com.org.fhub.config;\n\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\nimport org.springframework.security.web.authentication.logout.LogoutHandler;\n\nimport static com.org.fhub.domain.user.Permission.*;\nimport static com.org.fhub.domain.user.UserRoleEnum.ADMIN;\nimport static com.org.fhub.domain.user.UserRoleEnum.STAFF;\nimport static org.springframework.http.HttpMethod.*;\n\n@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\n@EnableMethodSecurity\npublic class SecurityConfiguration {\n\n    private final JwtAuthenticationFilter jwtAuthFilter;\n    private final AuthenticationProvider authenticationProvider;\n    private final LogoutHandler logoutHandler;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests((authorize) -&gt; {\n                    authorize.requestMatchers(\n                            &quot;/api/v1/auth/**&quot;,\n                            &quot;/v2/api-docs&quot;,\n                            &quot;/v3/api-docs&quot;,\n                            &quot;/v3/api-docs/**&quot;,\n                            &quot;/swagger-resources&quot;,\n                            &quot;/swagger-resources/**&quot;,\n                            &quot;/configuration/ui&quot;,\n                            &quot;/configuration/security&quot;,\n                            &quot;/swagger-ui/**&quot;,\n                            &quot;/webjars/**&quot;,\n                            &quot;/swagger-ui.html&quot;\n                    ).permitAll();\n                    authorize.requestMatchers(&quot;/api/v1/staff/**&quot;).hasAnyRole(ADMIN.name(), STAFF.name());\n                    authorize.requestMatchers(GET, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_READ.name(), STAFF_READ.name());\n                    authorize.requestMatchers(POST, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_CREATE.name(), STAFF_CREATE.name());\n                    authorize.requestMatchers(PUT, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_UPDATE.name(), STAFF_UPDATE.name());\n                    authorize.requestMatchers(DELETE, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_DELETE.name(), STAFF_DELETE.name());\n                    authorize.anyRequest().authenticated();\n                })\n\n                /* .requestMatchers(&quot;/api/v1/admin/**&quot;).hasRole(ADMIN.name())\n\n                 .requestMatchers(GET, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_READ.name())\n                 .requestMatchers(POST, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_CREATE.name())\n                 .requestMatchers(PUT, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_UPDATE.name())\n                 .requestMatchers(DELETE, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_DELETE.name())*/\n\n                .sessionManagement((session) -&gt; session\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                )\n                .authenticationProvider(authenticationProvider)\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n                .logout((logout) -&gt; logout.logoutUrl(&quot;/api/v1/auth/logout&quot;).addLogoutHandler(logoutHandler).logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext()))\n        ;\n\n        return http.build();\n    }\n}\n\n</code></pre>\n<p>My Filter:</p>\n<pre><code>package com.org.fhub.config;\n\nimport com.org.fhub.domain.token.TokenRepository;\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.lang.NonNull;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport java.io.IOException;\n\n@RequiredArgsConstructor\n@Component\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private final JwtService jwtService;\n    private final UserDetailsService userDetailsService;\n    private final TokenRepository tokenRepository;\n\n    @Override\n    protected void doFilterInternal(\n            @NonNull HttpServletRequest request,\n            @NonNull HttpServletResponse response,\n            @NonNull FilterChain filterChain\n    ) throws ServletException, IOException {\n        if (request.getServletPath().contains(&quot;/api/v1/auth&quot;)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\n        final String jwt;\n        final String username;\n        if (authHeader == null ||!authHeader.startsWith(&quot;Bearer &quot;)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n        jwt = authHeader.substring(7);\n        username = jwtService.extractUsername(jwt);\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n            var isTokenValid = tokenRepository.findByToken(jwt)\n                    .map(t -&gt; !t.isExpired() &amp;&amp; !t.isRevoked())\n                    .orElse(false);\n            if (jwtService.isTokenValid(jwt, userDetails) &amp;&amp; isTokenValid) {\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n                        userDetails,\n                        null,\n                        userDetails.getAuthorities()\n                );\n                authToken.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request)\n                );\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>My AplicationConfig:</p>\n<pre><code>package com.org.fhub.config;\n\nimport com.org.fhub.domain.user.UserRepository;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n@Configuration\n@RequiredArgsConstructor\npublic class ApplicationConfig {\n\n    private final UserRepository repository;\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return username -&gt; repository.findUserByUserName(username)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService());\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p>My jwtService:</p>\n<pre><code>package com.org.fhub.config;\n\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.SignatureAlgorithm;\nimport io.jsonwebtoken.io.Decoders;\nimport io.jsonwebtoken.security.Keys;\nimport java.security.Key;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Function;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class JwtService {\n\n    @Value(&quot;${application.security.jwt.secret-key}&quot;)\n    private String secretKey;\n    @Value(&quot;${application.security.jwt.expiration}&quot;)\n    private long jwtExpiration;\n    @Value(&quot;${application.security.jwt.refresh-token.expiration}&quot;)\n    private long refreshExpiration;\n\n    public String extractUsername(String token) {\n        return extractClaim(token, Claims::getSubject);\n    }\n\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = extractAllClaims(token);\n        return claimsResolver.apply(claims);\n    }\n\n    public String generateToken(UserDetails userDetails) {\n        return generateToken(new HashMap&lt;&gt;(), userDetails);\n    }\n\n    public String generateToken(\n            Map&lt;String, Object&gt; extraClaims,\n            UserDetails userDetails\n    ) {\n        return buildToken(extraClaims, userDetails, jwtExpiration);\n    }\n\n    public String generateRefreshToken(\n            UserDetails userDetails\n    ) {\n        return buildToken(new HashMap&lt;&gt;(), userDetails, refreshExpiration);\n    }\n\n    private String buildToken(\n            Map&lt;String, Object&gt; extraClaims,\n            UserDetails userDetails,\n            long expiration\n    ) {\n        return Jwts\n                .builder()\n                .setClaims(extraClaims)\n                .setSubject(userDetails.getUsername())\n                .setIssuedAt(new Date(System.currentTimeMillis()))\n                .setExpiration(new Date(System.currentTimeMillis() + expiration))\n                .signWith(getSignInKey(), SignatureAlgorithm.HS256)\n                .compact();\n    }\n\n    public boolean isTokenValid(String token, UserDetails userDetails) {\n        final String username = extractUsername(token);\n        return (username.equals(userDetails.getUsername())) &amp;&amp; !isTokenExpired(token);\n    }\n\n    private boolean isTokenExpired(String token) {\n        return extractExpiration(token).before(new Date());\n    }\n\n    private Date extractExpiration(String token) {\n        return extractClaim(token, Claims::getExpiration);\n    }\n\n    private Claims extractAllClaims(String token) {\n        return Jwts\n                .parserBuilder()\n                .setSigningKey(getSignInKey())\n                .build()\n                .parseClaimsJws(token)\n                .getBody();\n    }\n\n    private Key getSignInKey() {\n        byte[] keyBytes = Decoders.BASE64.decode(secretKey);\n        return Keys.hmacShaKeyFor(keyBytes);\n    }\n}\n\n</code></pre>\n<p>The token is valid and it says <strong>authenticated=true</strong></p>\n<p>the log produced:</p>\n<pre><code>2023-07-15T16:58:39.175+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)\n2023-07-15T16:58:39.177+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/client/findAllUsersByRole?role=PLUS\n2023-07-15T16:58:39.177+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-07-15T16:58:39.178+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-07-15T16:58:39.181+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-07-15T16:58:39.182+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/api/v1/auth/logout', GET], Ant [pattern='/api/v1/auth/logout', POST], Ant [pattern='/api/v1/auth/logout', PUT], Ant [pattern='/api/v1/auth/logout', DELETE]]\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)\n2023-07-15T16:58:43.728+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\n2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\n2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\n2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=User(id=64b2afc9b0ab605e709f61b6, username=kokoro, name=Brito, password=$2a$10$2PN0M.nH.tUa6sqXX/RaAOIS8kcH4FZUGEO9AzD6Dat/98gW7BF4S, notes=notas, role=PLUS, tokens=null), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_PLUS]]\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\n2023-07-15T16:58:45.910+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53]\n2023-07-15T16:58:45.923+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923\n2023-07-15T16:58:45.924+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/client/findAllUsersByRole?role=PLUS\n2023-07-15T16:58:45.937+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)\n2023-07-15T16:58:45.940+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error?role=PLUS\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/api/v1/auth/logout', GET], Ant [pattern='/api/v1/auth/logout', POST], Ant [pattern='/api/v1/auth/logout', PUT], Ant [pattern='/api/v1/auth/logout', DELETE]]\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]]\n2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923\n2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\n2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n\n2023-07-15T16:58:45.951+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\n\n</code></pre>\n<p>My build.gradle:</p>\n<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-data-mongodb'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-security:3.1.1'\n</code></pre>\n<p>Im sending the Bearer correctly and validated it with the DB.\nAll other endpoints/controllers with authorities work fine, register, delete etc... this one doesnt even go in the controller.</p>\n<p>I expect this endpoint to be allowed to execute.</p>\n"},{"tags":["java","smartcontracts","nft","web3-java"],"owner":{"account_id":7191134,"reputation":143,"user_id":5491415,"display_name":"lehadnk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691620780,"creation_date":1691620780,"question_id":76871684,"body_markdown":"I&#39;m trying to implement the NFT minting function for a Java project.\r\nFirst, I created the test project in Alchemy and deployed the smart contract using Remix IDE. Next, using remix I called the safeMint function and minted an NFT, then successfully transferred it to my wallet. To test my Java code, I first implemented the following function that displays the wallet balance:\r\n```\r\npublic BigInteger getWalletBalance(String contractId, String walletId)\r\n{\r\n    Function function = new Function(\r\n            &quot;balanceOf&quot;,\r\n            List.of(\r\n                    new Address(walletId)\r\n            ),\r\n            List.of(new TypeReference&lt;Type&gt;() {})\r\n    );\r\n\r\n    String requestData = FunctionEncoder.encode(function);\r\n    Transaction transaction = Transaction.createEthCallTransaction(null, contractId, requestData);\r\n\r\n    try {\r\n        var callResult = web3j.ethCall(transaction, DefaultBlockParameterName.LATEST).send();\r\n        return new BigInteger(callResult.getValue().substring(2), 16);\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\nThis part of the integration worked with no issues, and I was able to successfully call the pure function, and get the valid result from the platform.\r\n\r\nNext, I&#39;ve decided to call non-payable function called safeMint:\r\n```\r\npublic void mintNft(String contractId, String walletId, NftMintRequest nftMintRequest)\r\n{\r\n    Function function = new Function(\r\n            &quot;safeMint&quot;,\r\n            List.of(\r\n                    new Address(walletId),\r\n                    new Utf8String(&quot;ifps://Qmc71tw4FTUK9j2sco2vSiEfuYk4CmagChPWg2RmrtXcuW&quot;)\r\n            ),\r\n            List.of(new TypeReference&lt;Type&gt;() {})\r\n    );\r\n\r\n    String requestData = FunctionEncoder.encode(function);\r\n    Transaction transaction = Transaction.createFunctionCallTransaction(\r\n            walletId,\r\n            BigInteger.ONE,\r\n            BigInteger.valueOf(3000000),\r\n            BigInteger.valueOf(3000000),\r\n            contractId,\r\n            BigInteger.ONE,\r\n            requestData\r\n    );\r\n\r\n    try {\r\n        var callResult = web3j.ethCall(transaction, DefaultBlockParameterName.LATEST).send();\r\n        System.out.println(callResult.getValue());\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\nThere are two issues I&#39;ve encountered so far:\r\n 1. RPC responds with error message &quot;execution reverted&quot;.\r\n 2. Since I have to support the transaction with gas fee, I have to somehow authorize it using my wallet private key. But I didn&#39;t manage to find any way to do this.\r\n\r\nWhat do I have to fix in my code so I can call safeMint method as well?\r\n\r\n","title":"Calling safeMint non-payable function using web3j","body":"<p>I'm trying to implement the NFT minting function for a Java project.\nFirst, I created the test project in Alchemy and deployed the smart contract using Remix IDE. Next, using remix I called the safeMint function and minted an NFT, then successfully transferred it to my wallet. To test my Java code, I first implemented the following function that displays the wallet balance:</p>\n<pre><code>public BigInteger getWalletBalance(String contractId, String walletId)\n{\n    Function function = new Function(\n            &quot;balanceOf&quot;,\n            List.of(\n                    new Address(walletId)\n            ),\n            List.of(new TypeReference&lt;Type&gt;() {})\n    );\n\n    String requestData = FunctionEncoder.encode(function);\n    Transaction transaction = Transaction.createEthCallTransaction(null, contractId, requestData);\n\n    try {\n        var callResult = web3j.ethCall(transaction, DefaultBlockParameterName.LATEST).send();\n        return new BigInteger(callResult.getValue().substring(2), 16);\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>This part of the integration worked with no issues, and I was able to successfully call the pure function, and get the valid result from the platform.</p>\n<p>Next, I've decided to call non-payable function called safeMint:</p>\n<pre><code>public void mintNft(String contractId, String walletId, NftMintRequest nftMintRequest)\n{\n    Function function = new Function(\n            &quot;safeMint&quot;,\n            List.of(\n                    new Address(walletId),\n                    new Utf8String(&quot;ifps://Qmc71tw4FTUK9j2sco2vSiEfuYk4CmagChPWg2RmrtXcuW&quot;)\n            ),\n            List.of(new TypeReference&lt;Type&gt;() {})\n    );\n\n    String requestData = FunctionEncoder.encode(function);\n    Transaction transaction = Transaction.createFunctionCallTransaction(\n            walletId,\n            BigInteger.ONE,\n            BigInteger.valueOf(3000000),\n            BigInteger.valueOf(3000000),\n            contractId,\n            BigInteger.ONE,\n            requestData\n    );\n\n    try {\n        var callResult = web3j.ethCall(transaction, DefaultBlockParameterName.LATEST).send();\n        System.out.println(callResult.getValue());\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>There are two issues I've encountered so far:</p>\n<ol>\n<li>RPC responds with error message &quot;execution reverted&quot;.</li>\n<li>Since I have to support the transaction with gas fee, I have to somehow authorize it using my wallet private key. But I didn't manage to find any way to do this.</li>\n</ol>\n<p>What do I have to fix in my code so I can call safeMint method as well?</p>\n"},{"tags":["java","unicode","char","codepoint"],"answers":[{"comments":[{"owner":{"account_id":4959811,"reputation":5014,"user_id":3991344,"accept_rate":92,"display_name":"Pokechu22"},"score":0,"creation_date":1410636941,"post_id":25826900,"comment_id":40404265,"body_markdown":"Ah, so that is what can be done.  I wouldn&#39;t have guessed that; I was looking for methods in `Character` to do that.  This seems to be working for what I needed, thanks.","body":"Ah, so that is what can be done.  I wouldn&#39;t have guessed that; I was looking for methods in <code>Character</code> to do that.  This seems to be working for what I needed, thanks."}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1410636846,"creation_date":1410636846,"answer_id":25826900,"question_id":25826859,"body_markdown":"If I understand your question, you could simply cast the `char` to an `int`, something like this\r\n\r\n\tchar ch = &#39;\\r&#39;;\r\n\tint codePoint = (int) ch;\r\n\tSystem.out.println(codePoint);\r\n\r\nOutput is\r\n\r\n    13","title":"What is the propper way to get a char&#39;s code point?","body":"<p>If I understand your question, you could simply cast the <code>char</code> to an <code>int</code>, something like this</p>\n\n<pre><code>char ch = '\\r';\nint codePoint = (int) ch;\nSystem.out.println(codePoint);\n</code></pre>\n\n<p>Output is</p>\n\n<pre><code>13\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1410637548,"creation_date":1410637075,"answer_id":25826931,"question_id":25826859,"body_markdown":"*If* you know that all your input is going to be in the Basic Multilingual Plane (U+0000 to U+FFFF) then you can just use:\n\n    char character = &#39;x&#39;;\n    int codePoint = character;\n\nThat uses the implicit conversion from `char` to `int`, as specified in JLS 5.1.2:\n\n&gt; 19 specific conversions on primitive types are called the widening primitive conversions:\n&gt;\n&gt; - ...\n&gt; - `char` to `int`, `long`, `float`, or `double`\n&gt;\n&gt; ...\n&gt;\n&gt; A widening conversion of a char to an integral type T zero-extends the representation of the char value to fill the wider format.\n\nHowever, a `char` is only a UTF-16 code *unit*. The point of `Character.codePointAt` is that it copes with code points outside the BMP, which are composed of a *surrogate pair* - two UTF-16 code units which join together to make a single character.\n\nFrom [JLS 3.1][1]:\n\n&gt; The Unicode standard was originally designed as a fixed-width 16-bit character encoding. It has since been changed to allow for characters whose representation requires more than 16 bits. The range of legal code points is now U+0000 to U+10FFFF, using the hexadecimal U+n notation. Characters whose code points are greater than U+FFFF are called supplementary characters. To represent the complete range of characters using only 16-bit units, the Unicode standard defines an encoding called UTF-16. In this encoding, supplementary characters are represented as pairs of 16-bit code units, the first from the high-surrogates range, (U+D800 to U+DBFF), the second from the low-surrogates range (U+DC00 to U+DFFF). For characters in the range U+0000 to U+FFFF, the values of code points and UTF-16 code units are the same.\n\nIf you need to be able to cope with that more complicated situation, you&#39;ll need the more complicated code.\n\n\n  [1]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.1","title":"What is the propper way to get a char&#39;s code point?","body":"<p><em>If</em> you know that all your input is going to be in the Basic Multilingual Plane (U+0000 to U+FFFF) then you can just use:</p>\n<pre><code>char character = 'x';\nint codePoint = character;\n</code></pre>\n<p>That uses the implicit conversion from <code>char</code> to <code>int</code>, as specified in JLS 5.1.2:</p>\n<blockquote>\n<p>19 specific conversions on primitive types are called the widening primitive conversions:</p>\n<ul>\n<li>...</li>\n<li><code>char</code> to <code>int</code>, <code>long</code>, <code>float</code>, or <code>double</code></li>\n</ul>\n<p>...</p>\n<p>A widening conversion of a char to an integral type T zero-extends the representation of the char value to fill the wider format.</p>\n</blockquote>\n<p>However, a <code>char</code> is only a UTF-16 code <em>unit</em>. The point of <code>Character.codePointAt</code> is that it copes with code points outside the BMP, which are composed of a <em>surrogate pair</em> - two UTF-16 code units which join together to make a single character.</p>\n<p>From <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.1\" rel=\"nofollow noreferrer\">JLS 3.1</a>:</p>\n<blockquote>\n<p>The Unicode standard was originally designed as a fixed-width 16-bit character encoding. It has since been changed to allow for characters whose representation requires more than 16 bits. The range of legal code points is now U+0000 to U+10FFFF, using the hexadecimal U+n notation. Characters whose code points are greater than U+FFFF are called supplementary characters. To represent the complete range of characters using only 16-bit units, the Unicode standard defines an encoding called UTF-16. In this encoding, supplementary characters are represented as pairs of 16-bit code units, the first from the high-surrogates range, (U+D800 to U+DBFF), the second from the low-surrogates range (U+DC00 to U+DFFF). For characters in the range U+0000 to U+FFFF, the values of code points and UTF-16 code units are the same.</p>\n</blockquote>\n<p>If you need to be able to cope with that more complicated situation, you'll need the more complicated code.</p>\n"},{"tags":[],"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691620250,"creation_date":1691620250,"answer_id":76871651,"question_id":25826859,"body_markdown":"I know this question is old, but neither of the existing answers actually answers the question, including the accepted answer.\r\n\r\nYou can simply compare a code point with a char directly.\r\n\r\n    if (codePoint == &#39;\\r&#39;)","title":"What is the propper way to get a char&#39;s code point?","body":"<p>I know this question is old, but neither of the existing answers actually answers the question, including the accepted answer.</p>\n<p>You can simply compare a code point with a char directly.</p>\n<pre><code>if (codePoint == '\\r')\n</code></pre>\n"}],"owner":{"account_id":4959811,"reputation":5014,"user_id":3991344,"accept_rate":92,"display_name":"Pokechu22"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1015,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":25826931,"answer_count":3,"score":4,"last_activity_date":1691620250,"creation_date":1410636518,"question_id":25826859,"body_markdown":"I need to do some stuff with codepoints and a newline.  I have a function that takes a `char`&#39;s codepoint, and if it is `\\r` it needs to behave differently.  I&#39;ve got this: \r\n\r\n    if (codePoint == Character.codePointAt(new char[] {&#39;\\r&#39;}, 0)) {\r\n\r\nbut that is very ugly and ***certainly*** not the right way to do it.  What is the correct method of doing this?\r\n\r\n&lt;sub&gt;(I know that I could hardcode the number `13` (decimal identifier for `\\r`) and use that, but doing that would make it unclear what I am doing...)&lt;/sub&gt;","title":"What is the propper way to get a char&#39;s code point?","body":"<p>I need to do some stuff with codepoints and a newline.  I have a function that takes a <code>char</code>'s codepoint, and if it is <code>\\r</code> it needs to behave differently.  I've got this: </p>\n\n<pre><code>if (codePoint == Character.codePointAt(new char[] {'\\r'}, 0)) {\n</code></pre>\n\n<p>but that is very ugly and <strong><em>certainly</em></strong> not the right way to do it.  What is the correct method of doing this?</p>\n\n<p><sub>(I know that I could hardcode the number <code>13</code> (decimal identifier for <code>\\r</code>) and use that, but doing that would make it unclear what I am doing...)</sub></p>\n"},{"tags":["java","android","computer-vision","face-detection"],"comments":[{"owner":{"account_id":6552102,"reputation":2093,"user_id":5750389,"display_name":"Elias Fazel"},"score":0,"creation_date":1489049200,"post_id":42690402,"comment_id":72503835,"body_markdown":"do you know how to take picture? call it when a face detected!","body":"do you know how to take picture? call it when a face detected!"},{"owner":{"account_id":6373389,"reputation":11,"user_id":4945158,"display_name":"Trung Th&#224;nh"},"score":0,"creation_date":1489049707,"post_id":42690402,"comment_id":72504144,"body_markdown":"yeah, i think so. But i don&#39;t know when was face detected and how to handle it.","body":"yeah, i think so. But i don&#39;t know when was face detected and how to handle it."}],"answers":[{"comments":[{"owner":{"account_id":6373389,"reputation":11,"user_id":4945158,"display_name":"Trung Th&#224;nh"},"score":0,"creation_date":1489131037,"post_id":42691744,"comment_id":72546057,"body_markdown":"thanks, but problem is onFaceDectiion call many many time so if using Handler it will raise exception:\n&quot;Can&#39;t create handler inside thread that has not called Looper.prepare()&quot;","body":"thanks, but problem is onFaceDectiion call many many time so if using Handler it will raise exception: &quot;Can&#39;t create handler inside thread that has not called Looper.prepare()&quot;"},{"owner":{"account_id":467493,"reputation":101,"user_id":5200968,"display_name":"Jayaprakash"},"score":0,"creation_date":1489391780,"post_id":42691744,"comment_id":72633119,"body_markdown":"Looper.prepare() method is used to create a queue in the thread. So jus mention like this,                                                                    mHandler = new Handler(Looper.getMainLooper()) {\n    @Override\n    public void handleMessage(Message message) {\n        // This is where you do your work in the UI thread.\n        // Your worker tells you in the message what to do.\n    }\n}; Otherwise, I Suggest for AsyncTask that works well for most things running in the background. Keep method in doInBackground once done onPostExecute will call to update UI.","body":"Looper.prepare() method is used to create a queue in the thread. So jus mention like this,                                                                    mHandler = new Handler(Looper.getMainLooper()) {     @Override     public void handleMessage(Message message) {         // This is where you do your work in the UI thread.         // Your worker tells you in the message what to do.     } }; Otherwise, I Suggest for AsyncTask that works well for most things running in the background. Keep method in doInBackground once done onPostExecute will call to update UI."}],"tags":[],"owner":{"account_id":467493,"reputation":101,"user_id":5200968,"display_name":"Jayaprakash"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489052478,"creation_date":1489052478,"answer_id":42691744,"question_id":42690402,"body_markdown":"You have to add FaceDetectionListener in camera API then call startFaceDetection() method,\r\n\r\n    CameraFaceDetectionListener fDListener = new CameraFaceDetectionListener();\r\n    mCamera.setFaceDetectionListener(fDetectionListener);\r\n    mCamera.startFaceDetection();\r\n\r\nImplement Camera.FaceDetectionListener, you receive the detected face in onFaceDetection override method,\r\n\r\n    private class MyFaceDetectionListener \r\n              implements Camera.FaceDetectionListener {\r\n\r\n    @Override\r\n    public void onFaceDetection(Face[] faces, Camera camera) {\r\n\r\n        if (faces.length == 0) {\r\n            Log.i(TAG, &quot;No faces detected&quot;);\r\n        } else if (faces.length &gt; 0) {\r\n            Log.i(TAG, &quot;Faces Detected = &quot; + \r\n                  String.valueOf(faces.length));\r\n\r\n            public List&lt;Rect&gt; faceRects;\r\n            faceRects = new ArrayList&lt;Rect&gt;();\r\n\r\n            for (int i=0; i&lt;faces.length; i++) {\r\n                int left = faces[i].rect.left;\r\n                int right = faces[i].rect.right;\r\n                int top = faces[i].rect.top;\r\n                int bottom = faces[i].rect.bottom;\r\n                Rect uRect = new Rect(left0, top0, right0, bottom0);\r\n                faceRects.add(uRect);\r\n            }\r\n            \r\n            // add function to draw rects on view/surface/canvas\r\n        }\r\n    }\r\n\r\nAs per your case, new Handler().postDelayed(new Runnable,long seconds) take 2nd picture inside runnable after 5 seconds.\r\nPlease let me know if you have any queries. \r\n \r\n","title":"take picture when face detected using FaceDetector google-vision","body":"<p>You have to add FaceDetectionListener in camera API then call startFaceDetection() method,</p>\n\n<pre><code>CameraFaceDetectionListener fDListener = new CameraFaceDetectionListener();\nmCamera.setFaceDetectionListener(fDetectionListener);\nmCamera.startFaceDetection();\n</code></pre>\n\n<p>Implement Camera.FaceDetectionListener, you receive the detected face in onFaceDetection override method,</p>\n\n<pre><code>private class MyFaceDetectionListener \n          implements Camera.FaceDetectionListener {\n\n@Override\npublic void onFaceDetection(Face[] faces, Camera camera) {\n\n    if (faces.length == 0) {\n        Log.i(TAG, \"No faces detected\");\n    } else if (faces.length &gt; 0) {\n        Log.i(TAG, \"Faces Detected = \" + \n              String.valueOf(faces.length));\n\n        public List&lt;Rect&gt; faceRects;\n        faceRects = new ArrayList&lt;Rect&gt;();\n\n        for (int i=0; i&lt;faces.length; i++) {\n            int left = faces[i].rect.left;\n            int right = faces[i].rect.right;\n            int top = faces[i].rect.top;\n            int bottom = faces[i].rect.bottom;\n            Rect uRect = new Rect(left0, top0, right0, bottom0);\n            faceRects.add(uRect);\n        }\n\n        // add function to draw rects on view/surface/canvas\n    }\n}\n</code></pre>\n\n<p>As per your case, new Handler().postDelayed(new Runnable,long seconds) take 2nd picture inside runnable after 5 seconds.\nPlease let me know if you have any queries. </p>\n"}],"owner":{"account_id":6373389,"reputation":11,"user_id":4945158,"display_name":"Trung Th&#224;nh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1356,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691620121,"creation_date":1489048577,"question_id":42690402,"body_markdown":"I found the demo code here: https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java\r\n\r\nand my question is how to take picture when face detected and save it to device, and when we take 1st picture next picture will be take after 5s when face detected because we can&#39;t save to many picture to device.","title":"take picture when face detected using FaceDetector google-vision","body":"<p>I found the demo code here: <a href=\"https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java\" rel=\"nofollow noreferrer\">https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java</a></p>\n\n<p>and my question is how to take picture when face detected and save it to device, and when we take 1st picture next picture will be take after 5s when face detected because we can't save to many picture to device.</p>\n"},{"tags":["java","spring-boot","jboss","get-mapping"],"comments":[{"owner":{"account_id":4034639,"reputation":985,"user_id":3319557,"accept_rate":100,"display_name":"mlecz"},"score":0,"creation_date":1691608550,"post_id":76870623,"comment_id":135516099,"body_markdown":"I guess your &quot;/test1&quot; returns index, maybe it redirects back to &quot;/&quot;. I dont know mvc, so im not sure","body":"I guess your &quot;/test1&quot; returns index, maybe it redirects back to &quot;/&quot;. I dont know mvc, so im not sure"}],"answers":[{"comments":[{"owner":{"account_id":5536358,"reputation":43,"user_id":4394528,"display_name":"Kmus"},"score":0,"creation_date":1691688464,"post_id":76871587,"comment_id":135528716,"body_markdown":"So why would my @GetMapping(&quot;/test&quot;) be showing up at example.org/ instead of example.org/test","body":"So why would my @GetMapping(&quot;/test&quot;) be showing up at example.org/ instead of example.org/test"},{"owner":{"account_id":28107781,"reputation":1,"user_id":21476112,"display_name":"mog"},"score":0,"creation_date":1691699165,"post_id":76871587,"comment_id":135530709,"body_markdown":"I dont know why this could be happening, but looking at your configuration i imagine youre trying to send a message to the post mapping from the index, and getting redirected to &#39;/&#39;? if thats not the case, there is either another controller class, some javascript on the front end redirecting, or cache","body":"I dont know why this could be happening, but looking at your configuration i imagine youre trying to send a message to the post mapping from the index, and getting redirected to &#39;/&#39;? if thats not the case, there is either another controller class, some javascript on the front end redirecting, or cache"}],"tags":[],"owner":{"account_id":28107781,"reputation":1,"user_id":21476112,"display_name":"mog"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691619207,"creation_date":1691619207,"answer_id":76871587,"question_id":76870623,"body_markdown":"@GetMapping() handles requests to whatever URI path, so if you have GetMapping(&quot;/test&quot;) this function or class will handle GET requests to example.org/test. You can also annotate classes with @RequestMapping(&quot;/something&quot;) to prepend a path, so combined will be &#39;example.org/something/test&#39; and will get handled by the GetMapping annotated function","title":"Not Understanding GetMapping()","body":"<p>@GetMapping() handles requests to whatever URI path, so if you have GetMapping(&quot;/test&quot;) this function or class will handle GET requests to example.org/test. You can also annotate classes with @RequestMapping(&quot;/something&quot;) to prepend a path, so combined will be 'example.org/something/test' and will get handled by the GetMapping annotated function</p>\n"}],"owner":{"account_id":5536358,"reputation":43,"user_id":4394528,"display_name":"Kmus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691619207,"creation_date":1691608317,"question_id":76870623,"body_markdown":"I&#39;m working with a Spring Boot application on a JBoss server. I&#39;m new to java, spring and JBoss.\r\n\r\nI was working through a session management example from https://www.javainuse.com/spring/springboot_session\r\n\r\nI ran this code:\r\n\r\n    package private.prototype1;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    \r\n    @Controller\r\n    public class SpringSessionController {\r\n    \r\n    \t@GetMapping(&quot;/&quot;)\r\n    \tpublic String process(Model model, HttpSession session) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t}\r\n    \t\tmodel.addAttribute(&quot;sessionMessages&quot;, messages);\r\n    \r\n    \t\treturn &quot;index&quot;;\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/persistMessage&quot;)\r\n    \tpublic String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\t}\r\n    \t\tmessages.add(msg);\r\n    \t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/destroy&quot;)\r\n    \tpublic String destroySession(HttpServletRequest request) {\r\n    \t\trequest.getSession().invalidate();\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    }\r\n\r\nWhen I ran it and went to myurl/prototype1/ I got a blank page. So I changed the GetMapping to /test... no great explanation for that, just seemed like something to try\r\n\r\n    package private.prototype1;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    \r\n    @Controller\r\n    public class SpringSessionController {\r\n    \r\n    \t@GetMapping(&quot;/test&quot;)\r\n    \tpublic String process(Model model, HttpSession session) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t}\r\n    \t\tmodel.addAttribute(&quot;sessionMessages&quot;, messages);\r\n    \r\n    \t\treturn &quot;index&quot;;\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/persistMessage&quot;)\r\n    \tpublic String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\t}\r\n    \t\tmessages.add(msg);\r\n    \t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/destroy&quot;)\r\n    \tpublic String destroySession(HttpServletRequest request) {\r\n    \t\trequest.getSession().invalidate();\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    }\r\n\r\nI deployed it to the JBoss server.\r\n\r\nI went back to myurl/prototype1/  and refreshed to see if I got a Not Found error instead of the white page. Surprisingly I&#39;m getting the page... I expected it to have been moved to myurl/prototype1/test but instead its at muyrl/prototype1.\r\n\r\nAlso, myurl/prototype1/test shows a blank page.\r\n\r\nI wanted to be double sure I was actually running the code I just changed so I added a &quot;2&quot; after the header in index.html and deployed it again\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe &quot;2&quot; showed up.\r\n\r\nI also viewed the source code from JBoss to be positive it deployed correctly:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIt shows the /test mapping...\r\n\r\nI can only assume that I just don&#39;t understand how @GetMapping() works. Can anyone straighten me out?\r\n\r\nEDIT: I also just tried changing it to @GetMapping(&quot;/asdf&quot;) and still that page shows up at / and /asdf is blank. Does it have something to do with that method using the index.html template? That doesn&#39;t seem like it would make sense..\r\n\r\n  [1]: https://i.stack.imgur.com/p4Hpu.png\r\n  [2]: https://i.stack.imgur.com/jw86l.png","title":"Not Understanding GetMapping()","body":"<p>I'm working with a Spring Boot application on a JBoss server. I'm new to java, spring and JBoss.</p>\n<p>I was working through a session management example from <a href=\"https://www.javainuse.com/spring/springboot_session\" rel=\"nofollow noreferrer\">https://www.javainuse.com/spring/springboot_session</a></p>\n<p>I ran this code:</p>\n<pre><code>package private.prototype1;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpSession;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class SpringSessionController {\n\n    @GetMapping(&quot;/&quot;)\n    public String process(Model model, HttpSession session) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n        }\n        model.addAttribute(&quot;sessionMessages&quot;, messages);\n\n        return &quot;index&quot;;\n    }\n\n    @PostMapping(&quot;/persistMessage&quot;)\n    public String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n            request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        }\n        messages.add(msg);\n        request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        return &quot;redirect:/&quot;;\n    }\n\n    @PostMapping(&quot;/destroy&quot;)\n    public String destroySession(HttpServletRequest request) {\n        request.getSession().invalidate();\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>When I ran it and went to myurl/prototype1/ I got a blank page. So I changed the GetMapping to /test... no great explanation for that, just seemed like something to try</p>\n<pre><code>package private.prototype1;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpSession;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class SpringSessionController {\n\n    @GetMapping(&quot;/test&quot;)\n    public String process(Model model, HttpSession session) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n        }\n        model.addAttribute(&quot;sessionMessages&quot;, messages);\n\n        return &quot;index&quot;;\n    }\n\n    @PostMapping(&quot;/persistMessage&quot;)\n    public String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n            request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        }\n        messages.add(msg);\n        request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        return &quot;redirect:/&quot;;\n    }\n\n    @PostMapping(&quot;/destroy&quot;)\n    public String destroySession(HttpServletRequest request) {\n        request.getSession().invalidate();\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>I deployed it to the JBoss server.</p>\n<p>I went back to myurl/prototype1/  and refreshed to see if I got a Not Found error instead of the white page. Surprisingly I'm getting the page... I expected it to have been moved to myurl/prototype1/test but instead its at muyrl/prototype1.</p>\n<p>Also, myurl/prototype1/test shows a blank page.</p>\n<p>I wanted to be double sure I was actually running the code I just changed so I added a &quot;2&quot; after the header in index.html and deployed it again</p>\n<p><a href=\"https://i.stack.imgur.com/p4Hpu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p4Hpu.png\" alt=\"enter image description here\" /></a></p>\n<p>The &quot;2&quot; showed up.</p>\n<p>I also viewed the source code from JBoss to be positive it deployed correctly:</p>\n<p><a href=\"https://i.stack.imgur.com/jw86l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jw86l.png\" alt=\"enter image description here\" /></a></p>\n<p>It shows the /test mapping...</p>\n<p>I can only assume that I just don't understand how @GetMapping() works. Can anyone straighten me out?</p>\n<p>EDIT: I also just tried changing it to @GetMapping(&quot;/asdf&quot;) and still that page shows up at / and /asdf is blank. Does it have something to do with that method using the index.html template? That doesn't seem like it would make sense..</p>\n"},{"tags":["java","c++","java-native-interface"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":1,"creation_date":1691607505,"post_id":76870281,"comment_id":135515945,"body_markdown":"A `jclass` object is literally a reference to a `java.lang.Class` object, so you can just invoke `getMethods` and `getFields` on it.","body":"A <code>jclass</code> object is literally a reference to a <code>java.lang.Class</code> object, so you can just invoke <code>getMethods</code> and <code>getFields</code> on it."}],"answers":[{"comments":[{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1691611809,"post_id":76870645,"comment_id":135516591,"body_markdown":"How can JNI get a class without having knowledge of all the classes? What sort of &quot;games&quot; can be played to mitigate this way of getting jclasses? Also, how would you suggest me going about &quot;you can get the name of the game&#39;s entry point class from the last element of the stack trace of that thread. If there are multiple threads then you may not know which to look at, but for debugging purposes, that would give you a short list to consider&quot; because I know the normal name path of the class well at least but for some reason its not working.","body":"How can JNI get a class without having knowledge of all the classes? What sort of &quot;games&quot; can be played to mitigate this way of getting jclasses? Also, how would you suggest me going about &quot;you can get the name of the game&#39;s entry point class from the last element of the stack trace of that thread. If there are multiple threads then you may not know which to look at, but for debugging purposes, that would give you a short list to consider&quot; because I know the normal name path of the class well at least but for some reason its not working."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1691612681,"post_id":76870645,"comment_id":135516736,"body_markdown":"@UnSure, JNI knows how to *find* a class that is in the classpath, given its name.  Similarly, any Java `ClassLoader` can tell you whether it knows about a class by a given name that you specify to it.  But neither can give you a list of all the available classes.  The concept is not even well defined, because classes can be defined on the fly.  More generally, existing class definitions don&#39;t have to be listable, or enumerable.  For instance, they can, in principle, be loaded over the network from a remote server.","body":"@UnSure, JNI knows how to <i>find</i> a class that is in the classpath, given its name.  Similarly, any Java <code>ClassLoader</code> can tell you whether it knows about a class by a given name that you specify to it.  But neither can give you a list of all the available classes.  The concept is not even well defined, because classes can be defined on the fly.  More generally, existing class definitions don&#39;t have to be listable, or enumerable.  For instance, they can, in principle, be loaded over the network from a remote server."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1691613120,"post_id":76870645,"comment_id":135516811,"body_markdown":"@UnSure, if you are confident that you know the name of the class you want then you don&#39;t need to try to figure it out from the stack traces, but your question gave me the impression that you were not certain you did.  At minimum, the stack traces might help you confirm what you (think you) already know.  Do consult the API docs `Thread.getAllStackTraces()` and the associated classes for information about how you could obtain class and method names for the currently-running methods.","body":"@UnSure, if you are confident that you know the name of the class you want then you don&#39;t need to try to figure it out from the stack traces, but your question gave me the impression that you were not certain you did.  At minimum, the stack traces might help you confirm what you (think you) already know.  Do consult the API docs <code>Thread.getAllStackTraces()</code> and the associated classes for information about how you could obtain class and method names for the currently-running methods."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1691613574,"post_id":76870645,"comment_id":135516889,"body_markdown":"As far as ClassLoader games, an application can equip threads with a custom or carefully-configured `ClassLoader`s that has a restricted view of the available classes, for example.  Again, it is unlikely that Minecraft is doing something like this.","body":"As far as ClassLoader games, an application can equip threads with a custom or carefully-configured <code>ClassLoader</code>s that has a restricted view of the available classes, for example.  Again, it is unlikely that Minecraft is doing something like this."},{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1691614183,"post_id":76870645,"comment_id":135516988,"body_markdown":"Here is the thing it works on some Minecraft clients but not all which leads me to believe some tricks may have been done here but how can I get the thread stack trace from JNI?","body":"Here is the thing it works on some Minecraft clients but not all which leads me to believe some tricks may have been done here but how can I get the thread stack trace from JNI?"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1691614475,"post_id":76870645,"comment_id":135517032,"body_markdown":"@UnSure, what do you mean &quot;how can I get the thread stack trace from JNI&quot;?  You are already doing it!  What else do you think your call to `Thread.getAllStackTraces()` does?  Did you not write that code?","body":"@UnSure, what do you mean &quot;how can I get the thread stack trace from JNI&quot;?  You are already doing it!  What else do you think your call to <code>Thread.getAllStackTraces()</code> does?  Did you not write that code?"},{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1691614969,"post_id":76870645,"comment_id":135517136,"body_markdown":"Yea but how do I use it to gain information on my situation so I can determine what the problem is?","body":"Yea but how do I use it to gain information on my situation so I can determine what the problem is?"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1691615553,"post_id":76870645,"comment_id":135517229,"body_markdown":"@UnSure the question that I suggested you could answer by looking at the stack traces is &quot;What is the name of the game&#39;s entry point class?&quot;  If the main thread is still running then the last element of that thread&#39;s stack trace will indicate the `main` method and the name of that class.  More generally, I expect that you can get the names of several important classes from the latter elements of your stack traces.","body":"@UnSure the question that I suggested you could answer by looking at the stack traces is &quot;What is the name of the game&#39;s entry point class?&quot;  If the main thread is still running then the last element of that thread&#39;s stack trace will indicate the <code>main</code> method and the name of that class.  More generally, I expect that you can get the names of several important classes from the latter elements of your stack traces."},{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1691616580,"post_id":76870645,"comment_id":135517372,"body_markdown":"I would just like some next steps to take to debug this so I can get it working. I am looking at the decompiled Minecraft code and to get the main class you start at the minecraft package then client package then get the class. This does work like I said but when I try it on other minecraft clients it does not work which is why I assume the path is changed but I have no idea how to get the new path sine theres no source available.","body":"I would just like some next steps to take to debug this so I can get it working. I am looking at the decompiled Minecraft code and to get the main class you start at the minecraft package then client package then get the class. This does work like I said but when I try it on other minecraft clients it does not work which is why I assume the path is changed but I have no idea how to get the new path sine theres no source available."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1691617525,"post_id":76870645,"comment_id":135517527,"body_markdown":"I&#39;m sorry, @UnSure, but you seem to keep moving the goalposts.  I have already answered the several questions posed in the original post.  I think that should suggest some next steps, and in these comments I have explicitly recommended variations on at least one: look at the details of the stack traces you are obtaining.  As far as I am concerned, **that answers the question posed**.  Nevertheless, I have also added the [minecraft] tag to the question, for perhaps that will draw someone with expertise more specific to your problem.","body":"I&#39;m sorry, @UnSure, but you seem to keep moving the goalposts.  I have already answered the several questions posed in the original post.  I think that should suggest some next steps, and in these comments I have explicitly recommended variations on at least one: look at the details of the stack traces you are obtaining.  As far as I am concerned, <b>that answers the question posed</b>.  Nevertheless, I have also added the [minecraft] tag to the question, for perhaps that will draw someone with expertise more specific to your problem."},{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1691617898,"post_id":76870645,"comment_id":135517582,"body_markdown":"Yea I mean sure I can accept your answer, but I still am in the same spot I started. You are saying &quot;look at the details of your stack trace&quot; but I don&#39;t know how. I have ``jmethodID mid_getAllStackTraces`` and ``jobject obj_stackTracesMap`` but I am not sure how to gain any useful info from this. I don&#39;t need anyone to tell me the correct class paths I just need to figure out how I can debug it so I can find names on my own, which I still am not sure how to do.","body":"Yea I mean sure I can accept your answer, but I still am in the same spot I started. You are saying &quot;look at the details of your stack trace&quot; but I don&#39;t know how. I have <code>jmethodID mid_getAllStackTraces</code> and <code>jobject obj_stackTracesMap</code> but I am not sure how to gain any useful info from this. I don&#39;t need anyone to tell me the correct class paths I just need to figure out how I can debug it so I can find names on my own, which I still am not sure how to do."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1691618351,"post_id":76870645,"comment_id":135517666,"body_markdown":"@UnSure, you have presented some moderately complex JNI code as if it was your own, but it&#39;s hard to reconcile that with the appearance that you don&#39;t seem to know JNI very well.  Or maybe it&#39;s just that you don&#39;t know where to find or how to navigate [Java API docs](https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#getAllStackTraces--)? I&#39;m having trouble advising you because I don&#39;t understand where the barrier is.","body":"@UnSure, you have presented some moderately complex JNI code as if it was your own, but it&#39;s hard to reconcile that with the appearance that you don&#39;t seem to know JNI very well.  Or maybe it&#39;s just that you don&#39;t know where to find or how to navigate <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#getAllStackTraces--\" rel=\"nofollow noreferrer\">Java API docs</a>? I&#39;m having trouble advising you because I don&#39;t understand where the barrier is."}],"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":12,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691616900,"creation_date":1691608512,"answer_id":76870645,"question_id":76870281,"body_markdown":"&gt; listing all the methods in a given Java class\r\n\r\nUse Java reflection.  [`java.lang.Class.getMethods()`][1] will give you the *public* methods of the class represented by the `Class` object it is invoked upon, including inherited ones.  [`java.lang.Class.getDeclaredMethods()`][2] will get you *all* the methods of any visibility declared directly by target class.  Between these two, and maybe `Class.getSuperclass()`, you can identify all the methods of any class of interest.\r\n\r\nYou can invoke those methods via JNI, but the JNI API does not have its own functions for accomplishing the same thing.\r\n\r\n&gt; listing all class names in a given java application\r\n\r\nYou can list or extract the contents of the relevant JAR files to find the names of the classes within.  Their package names may give you an idea of which are of the most interest.  There is no good Java API, however, for programmatically getting an exhaustive list of known or available classes.  JNI certainly does not provide such.\r\n\r\n&gt; I was trying to [use the context ClassLoaders of the live threads] to get Minecrafts main class\r\n\r\nThat&#39;s a plausible approach, supposing that you know the fully-qualified name of the class you want to find.  But it&#39;s not a sure thing.  There are fun `ClassLoader` games that could be played to prevent a given class or group of classes from being accessed that way.  Not that I think it likely that Minecraft plays such games, but it&#39;s not out of the question.\r\n\r\nHowever, you are already retrieving stack traces of all the threads, and if Minecraft&#39;s initial thread is still running then you can get the name of the game&#39;s entry point class from the last element of the stack trace of that thread.  If there are multiple threads then you may not know which to look at, but for debugging purposes, that would give you a short list to consider.\r\n\r\n&gt; I will need to be able to list all classes.\r\n\r\nFor some definition of &quot;all&quot;, I guess.  But even with a fairly restrictive definition, this is not something you can ordinarily obtain from a `ClassLoader`.  I would find another way.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getMethods--\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredMethods--","title":"Getting all classes and all methods in a class via JNI","body":"<blockquote>\n<p>listing all the methods in a given Java class</p>\n</blockquote>\n<p>Use Java reflection.  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getMethods--\" rel=\"nofollow noreferrer\"><code>java.lang.Class.getMethods()</code></a> will give you the <em>public</em> methods of the class represented by the <code>Class</code> object it is invoked upon, including inherited ones.  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredMethods--\" rel=\"nofollow noreferrer\"><code>java.lang.Class.getDeclaredMethods()</code></a> will get you <em>all</em> the methods of any visibility declared directly by target class.  Between these two, and maybe <code>Class.getSuperclass()</code>, you can identify all the methods of any class of interest.</p>\n<p>You can invoke those methods via JNI, but the JNI API does not have its own functions for accomplishing the same thing.</p>\n<blockquote>\n<p>listing all class names in a given java application</p>\n</blockquote>\n<p>You can list or extract the contents of the relevant JAR files to find the names of the classes within.  Their package names may give you an idea of which are of the most interest.  There is no good Java API, however, for programmatically getting an exhaustive list of known or available classes.  JNI certainly does not provide such.</p>\n<blockquote>\n<p>I was trying to [use the context ClassLoaders of the live threads] to get Minecrafts main class</p>\n</blockquote>\n<p>That's a plausible approach, supposing that you know the fully-qualified name of the class you want to find.  But it's not a sure thing.  There are fun <code>ClassLoader</code> games that could be played to prevent a given class or group of classes from being accessed that way.  Not that I think it likely that Minecraft plays such games, but it's not out of the question.</p>\n<p>However, you are already retrieving stack traces of all the threads, and if Minecraft's initial thread is still running then you can get the name of the game's entry point class from the last element of the stack trace of that thread.  If there are multiple threads then you may not know which to look at, but for debugging purposes, that would give you a short list to consider.</p>\n<blockquote>\n<p>I will need to be able to list all classes.</p>\n</blockquote>\n<p>For some definition of &quot;all&quot;, I guess.  But even with a fairly restrictive definition, this is not something you can ordinarily obtain from a <code>ClassLoader</code>.  I would find another way.</p>\n"}],"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76870645,"answer_count":1,"score":0,"last_activity_date":1691619039,"creation_date":1691604483,"question_id":76870281,"body_markdown":"I am using C++ along with JNI with the goal of listing all the methods in a given Java class and listing all class names in a given java application. I was trying to do the following to get Minecrafts main class but it&#39;s not working correctly, and I want to figure out how I can debug it in order to fix it myself. To do that I will need to be able to list all classes. This will then make debugging any other issues a lot easier. \r\n```\r\nstatic jobject classLoader;\r\nstatic jmethodID mid_findClass;\r\n\r\nstatic void setupClassLoader()\r\n{\r\n    jclass c_Thread = Java::Env-&gt;FindClass(&quot;java/lang/Thread&quot;);\r\n    jclass c_Map = Java::Env-&gt;FindClass(&quot;java/util/Map&quot;);\r\n    jclass c_Set = Java::Env-&gt;FindClass(&quot;java/util/Set&quot;);\r\n    jclass c_ClassLoader = Java::Env-&gt;FindClass(&quot;java/lang/ClassLoader&quot;);\r\n\r\n    jmethodID mid_getAllStackTraces = Java::Env-&gt;GetStaticMethodID(c_Thread, &quot;getAllStackTraces&quot;, &quot;()Ljava/util/Map;&quot;);\r\n    jmethodID mid_keySet = Java::Env-&gt;GetMethodID(c_Map, &quot;keySet&quot;, &quot;()Ljava/util/Set;&quot;);\r\n    jmethodID mid_toArray = Java::Env-&gt;GetMethodID(c_Set, &quot;toArray&quot;, &quot;()[Ljava/lang/Object;&quot;);\r\n    jmethodID mid_getContextClassLoader = Java::Env-&gt;GetMethodID(c_Thread, &quot;getContextClassLoader&quot;, &quot;()Ljava/lang/ClassLoader;&quot;);\r\n    mid_findClass = Java::Env-&gt;GetMethodID(c_ClassLoader, &quot;findClass&quot;, &quot;(Ljava/lang/String;)Ljava/lang/Class;&quot;);\r\n    jmethodID mid_currentThread = Java::Env-&gt;GetStaticMethodID(c_Thread, &quot;currentThread&quot;, &quot;()Ljava/lang/Thread;&quot;);\r\n\r\n    jobject obj_stackTracesMap = Java::Env-&gt;CallStaticObjectMethod(c_Thread, mid_getAllStackTraces);\r\n    jobject obj_threadsSet = Java::Env-&gt;CallObjectMethod(obj_stackTracesMap, mid_keySet);\r\n\r\n    jobjectArray threads = (jobjectArray) Java::Env-&gt;CallObjectMethod(obj_threadsSet, mid_toArray);\r\n    jint szThreads = Java::Env-&gt;GetArrayLength(threads);\r\n\r\n    for (int i = 0; i &lt; szThreads; i++) {\r\n        jobject thread = Java::Env-&gt;GetObjectArrayElement(threads, i);\r\n        jobject classLoaderObj = Java::Env-&gt;CallObjectMethod(thread, mid_getContextClassLoader);\r\n\r\n        if (classLoaderObj) { // How can I print all class names here instead of using NewStringUTF with a class name I presume to exist\r\n            jstring className = Java::Env-&gt;NewStringUTF(&quot;minecraft.client.Minecraft&quot;);\r\n            jobject minecraftClass = Java::Env-&gt;CallObjectMethod(classLoaderObj, mid_findClass, className);\r\n\r\n            if (minecraftClass) { // This is never true \r\n                classLoader = classLoaderObj;\r\n\r\n                Java::Env-&gt;DeleteLocalRef(minecraftClass);\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n        Java::Env-&gt;DeleteLocalRef(thread);\r\n    }\r\n   ```\r\n\r\nAlright assuming I get the above issue fixed by figuring out how I can print classes and then manage to get the right class I will need to be able to print methods of a class out with their names and return types. The following is my apprach but I have no idea how I would go about actually printing all method info from a jClass object.\r\n```\r\ninline static jclass clazz;\r\n\r\nJava::AssignClass(&quot;example.Example&quot;, clazz);\r\n\r\nbool Java::AssignClass(std::string name, jclass&amp; out)\r\n{\r\n    jstring className = Java::Env-&gt;NewStringUTF(name.c_str());\r\n    jobject findClass = Java::Env-&gt;CallObjectMethod(classLoader, mid_findClass, className);\r\n\r\n    if (findClass) {\r\n        out = (jclass) findClass;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n```","title":"Getting all classes and all methods in a class via JNI","body":"<p>I am using C++ along with JNI with the goal of listing all the methods in a given Java class and listing all class names in a given java application. I was trying to do the following to get Minecrafts main class but it's not working correctly, and I want to figure out how I can debug it in order to fix it myself. To do that I will need to be able to list all classes. This will then make debugging any other issues a lot easier.</p>\n<pre><code>static jobject classLoader;\nstatic jmethodID mid_findClass;\n\nstatic void setupClassLoader()\n{\n    jclass c_Thread = Java::Env-&gt;FindClass(&quot;java/lang/Thread&quot;);\n    jclass c_Map = Java::Env-&gt;FindClass(&quot;java/util/Map&quot;);\n    jclass c_Set = Java::Env-&gt;FindClass(&quot;java/util/Set&quot;);\n    jclass c_ClassLoader = Java::Env-&gt;FindClass(&quot;java/lang/ClassLoader&quot;);\n\n    jmethodID mid_getAllStackTraces = Java::Env-&gt;GetStaticMethodID(c_Thread, &quot;getAllStackTraces&quot;, &quot;()Ljava/util/Map;&quot;);\n    jmethodID mid_keySet = Java::Env-&gt;GetMethodID(c_Map, &quot;keySet&quot;, &quot;()Ljava/util/Set;&quot;);\n    jmethodID mid_toArray = Java::Env-&gt;GetMethodID(c_Set, &quot;toArray&quot;, &quot;()[Ljava/lang/Object;&quot;);\n    jmethodID mid_getContextClassLoader = Java::Env-&gt;GetMethodID(c_Thread, &quot;getContextClassLoader&quot;, &quot;()Ljava/lang/ClassLoader;&quot;);\n    mid_findClass = Java::Env-&gt;GetMethodID(c_ClassLoader, &quot;findClass&quot;, &quot;(Ljava/lang/String;)Ljava/lang/Class;&quot;);\n    jmethodID mid_currentThread = Java::Env-&gt;GetStaticMethodID(c_Thread, &quot;currentThread&quot;, &quot;()Ljava/lang/Thread;&quot;);\n\n    jobject obj_stackTracesMap = Java::Env-&gt;CallStaticObjectMethod(c_Thread, mid_getAllStackTraces);\n    jobject obj_threadsSet = Java::Env-&gt;CallObjectMethod(obj_stackTracesMap, mid_keySet);\n\n    jobjectArray threads = (jobjectArray) Java::Env-&gt;CallObjectMethod(obj_threadsSet, mid_toArray);\n    jint szThreads = Java::Env-&gt;GetArrayLength(threads);\n\n    for (int i = 0; i &lt; szThreads; i++) {\n        jobject thread = Java::Env-&gt;GetObjectArrayElement(threads, i);\n        jobject classLoaderObj = Java::Env-&gt;CallObjectMethod(thread, mid_getContextClassLoader);\n\n        if (classLoaderObj) { // How can I print all class names here instead of using NewStringUTF with a class name I presume to exist\n            jstring className = Java::Env-&gt;NewStringUTF(&quot;minecraft.client.Minecraft&quot;);\n            jobject minecraftClass = Java::Env-&gt;CallObjectMethod(classLoaderObj, mid_findClass, className);\n\n            if (minecraftClass) { // This is never true \n                classLoader = classLoaderObj;\n\n                Java::Env-&gt;DeleteLocalRef(minecraftClass);\n\n                break;\n            }\n        }\n\n        Java::Env-&gt;DeleteLocalRef(thread);\n    }\n</code></pre>\n<p>Alright assuming I get the above issue fixed by figuring out how I can print classes and then manage to get the right class I will need to be able to print methods of a class out with their names and return types. The following is my apprach but I have no idea how I would go about actually printing all method info from a jClass object.</p>\n<pre><code>inline static jclass clazz;\n\nJava::AssignClass(&quot;example.Example&quot;, clazz);\n\nbool Java::AssignClass(std::string name, jclass&amp; out)\n{\n    jstring className = Java::Env-&gt;NewStringUTF(name.c_str());\n    jobject findClass = Java::Env-&gt;CallObjectMethod(classLoader, mid_findClass, className);\n\n    if (findClass) {\n        out = (jclass) findClass;\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1691607807,"post_id":76870560,"comment_id":135515995,"body_markdown":"Does this answer your question? [How to get columns from Excel files using Apache POI?](https://stackoverflow.com/questions/2922692/how-to-get-columns-from-excel-files-using-apache-poi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2922692/how-to-get-columns-from-excel-files-using-apache-poi\">How to get columns from Excel files using Apache POI?</a>"},{"owner":{"account_id":28241245,"reputation":15,"user_id":21588981,"display_name":"Sujit Kumar"},"score":0,"creation_date":1691610215,"post_id":76870560,"comment_id":135516323,"body_markdown":"@Gaston Schabas thanks for your reply. I will implement this. But how can I get the range by reading the property from the properties file to get the range of the workbook","body":"@Gaston Schabas thanks for your reply. I will implement this. But how can I get the range by reading the property from the properties file to get the range of the workbook"},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1691625537,"post_id":76870560,"comment_id":135518362,"body_markdown":"I don&#39;t know if the library offers something for that. Looks like `&quot;B:F,I:K,L,P&quot;` follows the pattern that all values are splitted by a `,` and it could be a range splitted by a `:` or just one column. Maybe using the split function is enough. If you want something more complex, you should dig in the docs of the lib or implement your own parser. A json could be more readable and easier to parse. It depends on the complexity you need to solve your issue","body":"I don&#39;t know if the library offers something for that. Looks like <code>&quot;B:F,I:K,L,P&quot;</code> follows the pattern that all values are splitted by a <code>,</code> and it could be a range splitted by a <code>:</code> or just one column. Maybe using the split function is enough. If you want something more complex, you should dig in the docs of the lib or implement your own parser. A json could be more readable and easier to parse. It depends on the complexity you need to solve your issue"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1691665301,"post_id":76870560,"comment_id":135523485,"body_markdown":"Possibly https://poi.apache.org/apidocs/dev/org/apache/poi/ss/util/AreaReference.html will do the parsing work for you?","body":"Possibly <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/util/AreaReference.html\" rel=\"nofollow noreferrer\">poi.apache.org/apidocs/dev/org/apache/poi/ss/util/&hellip;</a> will do the parsing work for you?"}],"answers":[{"tags":[],"owner":{"display_name":"user9035826"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691618787,"creation_date":1691618787,"answer_id":76871567,"question_id":76870560,"body_markdown":"You will have to parse the property value you set and collect a list of column numbers. The you can call row.getCell(columnNumber) for each column number to get the actual values. Here is a quick and dirty example to show you what the parser may look like. Hope it helps.\r\n\r\n\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    \r\n    public class CherryPickedColumns {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString range_prop = &quot;B:F,I:K,L,P&quot;;\r\n    \t\t\r\n    \t\tString[] ranges = range_prop.split(&quot;,&quot;);\r\n    \t\t\r\n    \t\tList&lt;Integer&gt; columns = new ArrayList&lt;Integer&gt;();\r\n    \r\n    \t\tfor(int i=0; i&lt; ranges.length; i++) {\r\n    \t\t\tif(ranges[i].length() == 1) {\r\n    \t\t\t\tcolumns.add(ranges[i].charAt(0)-&#39;A&#39;);\r\n    \t\t\t} else if (ranges[i].length() == 3 &amp;&amp; ranges[i].charAt(1) == &#39;:&#39;) {\r\n    \t\t\t\tchar start = ranges[i].charAt(0);\r\n    \t\t\t\tchar end = ranges[i].charAt(2);\r\n    \t\t\t\twhile(start &lt;= end) {\r\n    \t\t\t\t\tcolumns.add(start-&#39;A&#39;);\r\n    \t\t\t\t\tstart += 1;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println(&quot;my cherry picked columns:&quot; + columns);\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"How to get the range of cherry pick columns of an excel file in apache poi and java","body":"<p>You will have to parse the property value you set and collect a list of column numbers. The you can call row.getCell(columnNumber) for each column number to get the actual values. Here is a quick and dirty example to show you what the parser may look like. Hope it helps.</p>\n<pre><code>import java.util.List;\nimport java.util.ArrayList;\n\npublic class CherryPickedColumns {\n\n    public static void main(String[] args) {\n        String range_prop = &quot;B:F,I:K,L,P&quot;;\n        \n        String[] ranges = range_prop.split(&quot;,&quot;);\n        \n        List&lt;Integer&gt; columns = new ArrayList&lt;Integer&gt;();\n\n        for(int i=0; i&lt; ranges.length; i++) {\n            if(ranges[i].length() == 1) {\n                columns.add(ranges[i].charAt(0)-'A');\n            } else if (ranges[i].length() == 3 &amp;&amp; ranges[i].charAt(1) == ':') {\n                char start = ranges[i].charAt(0);\n                char end = ranges[i].charAt(2);\n                while(start &lt;= end) {\n                    columns.add(start-'A');\n                    start += 1;\n                }\n            }\n        }\n\n        System.out.println(&quot;my cherry picked columns:&quot; + columns);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28241245,"reputation":15,"user_id":21588981,"display_name":"Sujit Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691618787,"creation_date":1691607594,"question_id":76870560,"body_markdown":"I have an excel sheet having columns A to P.\r\nBut I want to take the columns \r\nB to F, I to K, L, P\r\n\r\n\r\n\r\nHow can I achieve this?\r\n\r\n\r\nAny help is highly appreciated.\r\n\r\nThanks in advance.\r\n\r\n\r\n\r\nI have declared a property in properties file as below \r\n\r\nexcel.specific.columns= &quot;B:F,I:K,L,P&quot;\r\n\r\nThen I declared a list in the java class for the above property.\r\n\r\nBut not getting idea how to use that list.\r\n","title":"How to get the range of cherry pick columns of an excel file in apache poi and java","body":"<p>I have an excel sheet having columns A to P.\nBut I want to take the columns\nB to F, I to K, L, P</p>\n<p>How can I achieve this?</p>\n<p>Any help is highly appreciated.</p>\n<p>Thanks in advance.</p>\n<p>I have declared a property in properties file as below</p>\n<p>excel.specific.columns= &quot;B:F,I:K,L,P&quot;</p>\n<p>Then I declared a list in the java class for the above property.</p>\n<p>But not getting idea how to use that list.</p>\n"},{"tags":["java","selenium-webdriver","frameworks","cucumber","bdd"],"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1691615790,"post_id":76870992,"comment_id":135517265,"body_markdown":"Update the question with the implementation of `testContextSetup.driver`","body":"Update the question with the implementation of <code>testContextSetup.driver</code>"},{"owner":{"account_id":13744424,"reputation":13,"user_id":9918582,"display_name":"Immy110"},"score":0,"creation_date":1691618944,"post_id":76870992,"comment_id":135517741,"body_markdown":"Yes just done that now","body":"Yes just done that now"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1691619099,"post_id":76870992,"comment_id":135517761,"body_markdown":"But what is _`testContextSetup`_?","body":"But what is <i><code>testContextSetup</code></i>?"},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1693297598,"post_id":76870992,"comment_id":135738647,"body_markdown":"As requested please provide the ```testContextSetup``` method","body":"As requested please provide the <code>testContextSetup</code> method"}],"owner":{"account_id":13744424,"reputation":13,"user_id":9918582,"display_name":"Immy110"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691618620,"creation_date":1691612177,"question_id":76870992,"body_markdown":"I am getting this error when executing my code in my Cucumber Framework:\r\n\r\n```\r\nFAILED: runScenario(&quot;Search Experience for product search in both home and Offers page&quot;, &quot;Search and Place the order for Products&quot;)\r\n        Runs Cucumber Scenarios\r\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;this.driver&quot; is null\r\nat pageObjects.OffersPage.searchItem(OffersPage.java:21)\r\nat stepDefinitions.OfferPageStepDefinition.user_searched_for_same_shortname_in_offers_page(OfferPageStepDefinition.java:40)\r\n```\r\n\r\n Following is my code in OffersPage class where it&#39;s referring :\r\n\r\n```package pageObjects;\r\n\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\n\r\npublic class OffersPage {\r\n\t\r\npublic WebDriver driver;\r\n\t\r\n\tpublic OffersPage(WebDriver driver)\r\n\t{\r\n\t\tthis.driver = driver;\r\n\t}\r\n\t\r\n\tBy search = By.xpath(&quot;//input[@type=&#39;search&#39;]&quot;);\r\n\tBy productName = By.cssSelector(&quot;tr td:nth-child(1)&quot;); //This is the product name\r\n\t\r\n\tpublic void searchItem(String name)\r\n\r\n\t{\r\n\t\tdriver.findElement(search).sendKeys(name);\r\n\t}\r\n\t\r\n\t\r\n\tpublic void getSearchText()\r\n\t{\r\n\t\tdriver.findElement(search).getText();\r\n\t}\r\n\t\r\n\tpublic String getProductName() //Here we are returning the Product name\r\n\t{\r\n\t\treturn driver.findElement(productName).getText();\r\n\t}\r\n}\r\n```\r\n\r\nThis is my OffersPage StepDefinition File code (line 40) as pointed in the error message:\r\n\r\n```\r\n\t@Then(&quot;user searched for {string} shortname in offers page&quot;)\r\n\tpublic void user_searched_for_same_shortname_in_offers_page(String shortName) throws InterruptedException {\r\n\t  // Write code here that turns the phrase above into concrete actions\r\n\t\r\n\tswitchToOffersPage();\r\n\tOffersPage offersPage = new OffersPage(testContextSetup.driver);// the driver here will be linked to the OffersPage page object class\r\n\toffersPage.searchItem(shortName);\r\n\tThread.sleep(2000);\r\n    offerPageProductName = offersPage.getProductName();\r\n```\r\n\r\nWhere am I going wrong exactly?\r\n\r\n","title":"Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement&quot; because this.driver is null with the implementation of testContextSetup.driver","body":"<p>I am getting this error when executing my code in my Cucumber Framework:</p>\n<pre><code>FAILED: runScenario(&quot;Search Experience for product search in both home and Offers page&quot;, &quot;Search and Place the order for Products&quot;)\n        Runs Cucumber Scenarios\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;this.driver&quot; is null\nat pageObjects.OffersPage.searchItem(OffersPage.java:21)\nat stepDefinitions.OfferPageStepDefinition.user_searched_for_same_shortname_in_offers_page(OfferPageStepDefinition.java:40)\n</code></pre>\n<p>Following is my code in OffersPage class where it's referring :</p>\n<pre><code>\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\n\npublic class OffersPage {\n    \npublic WebDriver driver;\n    \n    public OffersPage(WebDriver driver)\n    {\n        this.driver = driver;\n    }\n    \n    By search = By.xpath(&quot;//input[@type='search']&quot;);\n    By productName = By.cssSelector(&quot;tr td:nth-child(1)&quot;); //This is the product name\n    \n    public void searchItem(String name)\n\n    {\n        driver.findElement(search).sendKeys(name);\n    }\n    \n    \n    public void getSearchText()\n    {\n        driver.findElement(search).getText();\n    }\n    \n    public String getProductName() //Here we are returning the Product name\n    {\n        return driver.findElement(productName).getText();\n    }\n}\n</code></pre>\n<p>This is my OffersPage StepDefinition File code (line 40) as pointed in the error message:</p>\n<pre><code>    @Then(&quot;user searched for {string} shortname in offers page&quot;)\n    public void user_searched_for_same_shortname_in_offers_page(String shortName) throws InterruptedException {\n      // Write code here that turns the phrase above into concrete actions\n    \n    switchToOffersPage();\n    OffersPage offersPage = new OffersPage(testContextSetup.driver);// the driver here will be linked to the OffersPage page object class\n    offersPage.searchItem(shortName);\n    Thread.sleep(2000);\n    offerPageProductName = offersPage.getProductName();\n</code></pre>\n<p>Where am I going wrong exactly?</p>\n"},{"tags":["java","notepad++","javadoc"],"comments":[{"owner":{"account_id":1874907,"reputation":4258,"user_id":1696314,"display_name":"NickL"},"score":7,"creation_date":1483736920,"post_id":41514314,"comment_id":70234806,"body_markdown":"Why on earth do you use notepad++ for programming in a language like Java? You should use an IDE, like Eclipse or Netbeans. These have functions that generate JavaDoc (can also be done from command line with &#39;javadoc&#39;). Have you tried googling &#39;how to generate JavaDoc&#39;?","body":"Why on earth do you use notepad++ for programming in a language like Java? You should use an IDE, like Eclipse or Netbeans. These have functions that generate JavaDoc (can also be done from command line with &#39;javadoc&#39;). Have you tried googling &#39;how to generate JavaDoc&#39;?"},{"owner":{"account_id":949203,"reputation":4454,"user_id":975741,"display_name":"trooper"},"score":4,"creation_date":1483737015,"post_id":41514314,"comment_id":70234864,"body_markdown":"`javadoc` is a tool that scans the java source for comments in order to create the html documentation (like you&#39;ve linked). if you are already writing valid javadoc style comments, you just need to run the utility: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html","body":"<code>javadoc</code> is a tool that scans the java source for comments in order to create the html documentation (like you&#39;ve linked). if you are already writing valid javadoc style comments, you just need to run the utility: <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/technotes/tools/windows/&hellip;</a>"},{"owner":{"account_id":1874907,"reputation":4258,"user_id":1696314,"display_name":"NickL"},"score":3,"creation_date":1483737830,"post_id":41514314,"comment_id":70235257,"body_markdown":"I agree that it might be irrelevant to this question. However, as the OP mentions that code documentation is essential for code maintenance, so is the usage of an IDE. Have fun maintaining (refactoring, debugging) code with a text editor.","body":"I agree that it might be irrelevant to this question. However, as the OP mentions that code documentation is essential for code maintenance, so is the usage of an IDE. Have fun maintaining (refactoring, debugging) code with a text editor."},{"owner":{"account_id":1874907,"reputation":4258,"user_id":1696314,"display_name":"NickL"},"score":3,"creation_date":1483737908,"post_id":41514314,"comment_id":70235298,"body_markdown":"Possible duplicate of [How to generate Javadoc from command line](http://stackoverflow.com/questions/4592396/how-to-generate-javadoc-from-command-line)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/4592396/how-to-generate-javadoc-from-command-line\">How to generate Javadoc from command line</a>"},{"owner":{"account_id":6107068,"reputation":109,"user_id":4764533,"accept_rate":56,"display_name":"Ghayel"},"score":0,"creation_date":1483737953,"post_id":41514314,"comment_id":70235314,"body_markdown":"Vote up for javadoc generator tool link","body":"Vote up for javadoc generator tool link"},{"owner":{"account_id":6107068,"reputation":109,"user_id":4764533,"accept_rate":56,"display_name":"Ghayel"},"score":0,"creation_date":1483738134,"post_id":41514314,"comment_id":70235380,"body_markdown":"Vote up for generating docs via command line","body":"Vote up for generating docs via command line"}],"answers":[{"tags":[],"owner":{"account_id":98471,"reputation":15227,"user_id":266531,"accept_rate":100,"display_name":"Kirby"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691618598,"creation_date":1691618598,"answer_id":76871555,"question_id":41514314,"body_markdown":"I found a similar question here: https://stackoverflow.com/questions/4709692/generic-javadoc-command-that-always-generates-all-javadocs-in-a-given-tree\r\n\r\nFrom [the answer][1] from user [stian][2], \r\n\r\n&gt; On Windows you can do it like this:\r\n&gt; \r\n&gt; Generate file list:\r\n&gt; \r\n&gt; `dir /s /b *.java &gt; file.lst`\r\n&gt;\r\n&gt; Generate javadoc:\r\n&gt; \r\n&gt; `javadoc -d outputdir @file.lst`\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/4946061/266531\r\n  [2]: https://stackoverflow.com/users/17542/stian","title":"How to generate docs for our code like javadocs?","body":"<p>I found a similar question here: <a href=\"https://stackoverflow.com/questions/4709692/generic-javadoc-command-that-always-generates-all-javadocs-in-a-given-tree\">Generic javadoc command that always generates all javadocs in a given tree?</a></p>\n<p>From <a href=\"https://stackoverflow.com/a/4946061/266531\">the answer</a> from user <a href=\"https://stackoverflow.com/users/17542/stian\">stian</a>,</p>\n<blockquote>\n<p>On Windows you can do it like this:</p>\n<p>Generate file list:</p>\n<p><code>dir /s /b *.java &gt; file.lst</code></p>\n<p>Generate javadoc:</p>\n<p><code>javadoc -d outputdir @file.lst</code></p>\n</blockquote>\n"}],"owner":{"account_id":6107068,"reputation":109,"user_id":4764533,"accept_rate":56,"display_name":"Ghayel"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3370,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691618598,"creation_date":1483736643,"question_id":41514314,"body_markdown":"I commit code documentation is very essential to maintain the software product. I am using notepad++ to write the java code. I installed one of its plugin NppDocIt that inserts auto comments by pressing `ctrl+alt+shift+D`. Its good to know about methods but I want to generate code documents like java docs for example [This Document][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\r\n\r\n**Update-1**\r\nThanks for good guidance and I learned a lot.\r\n\r\nI tried to generate javadoc as following:\r\n\r\n    F:\\Java\\Tomcat\\webapps\\ROOT\\WEB-INF\\classes&gt;javadoc -d &quot;C:/docs&quot; -sourcepath -package &quot;com/i18n/source/i18n&quot; -subpackages com\r\n    javadoc: error - Illegal package name: &quot;com/i18n/source/i18n&quot;\r\n    1 error\r\n\r\nMy package resides as:\r\n\r\n    com\r\n      |--i18n\r\n           |--resources\r\n                |--bundles\r\n                      |--labelsBundle\r\n\r\nPlease advise where I am wrong?\r\n\r\n**Update-2**&lt;br&gt;\r\n**Answer:**&lt;br&gt;\r\n\r\n 1. I added all java files in one folder\r\n 2. Created one folder for example c:/docs\r\n 3. run this command from commandline `javadoc -d &quot;C:/docs&quot; *.java`\r\n&lt;br&gt;&lt;br&gt;and successfully my codes documentation generated\r\n\r\nThanks from the bottom of my heart to stackoverflow and participants of this thread","title":"How to generate docs for our code like javadocs?","body":"<p>I commit code documentation is very essential to maintain the software product. I am using notepad++ to write the java code. I installed one of its plugin NppDocIt that inserts auto comments by pressing <code>ctrl+alt+shift+D</code>. Its good to know about methods but I want to generate code documents like java docs for example <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\" rel=\"nofollow noreferrer\">This Document</a></p>\n\n<p><strong>Update-1</strong>\nThanks for good guidance and I learned a lot.</p>\n\n<p>I tried to generate javadoc as following:</p>\n\n<pre><code>F:\\Java\\Tomcat\\webapps\\ROOT\\WEB-INF\\classes&gt;javadoc -d \"C:/docs\" -sourcepath -package \"com/i18n/source/i18n\" -subpackages com\njavadoc: error - Illegal package name: \"com/i18n/source/i18n\"\n1 error\n</code></pre>\n\n<p>My package resides as:</p>\n\n<pre><code>com\n  |--i18n\n       |--resources\n            |--bundles\n                  |--labelsBundle\n</code></pre>\n\n<p>Please advise where I am wrong?</p>\n\n<p><strong>Update-2</strong><br>\n<strong>Answer:</strong><br></p>\n\n<ol>\n<li>I added all java files in one folder</li>\n<li>Created one folder for example c:/docs</li>\n<li>run this command from commandline <code>javadoc -d \"C:/docs\" *.java</code>\n<br><br>and successfully my codes documentation generated</li>\n</ol>\n\n<p>Thanks from the bottom of my heart to stackoverflow and participants of this thread</p>\n"},{"tags":["java","selenium-webdriver","implicitwait"],"comments":[{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":3,"creation_date":1691587827,"post_id":76868241,"comment_id":135511829,"body_markdown":"Can you show the relevant code?","body":"Can you show the relevant code?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1691588930,"post_id":76868241,"comment_id":135512095,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691605396,"post_id":76868241,"comment_id":135515582,"body_markdown":"The most likely cause is that you&#39;re combining incompatible versions of libraries.","body":"The most likely cause is that you&#39;re combining incompatible versions of libraries."}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691617874,"creation_date":1691617874,"answer_id":76871493,"question_id":76868241,"body_markdown":"The current notation for [`implicitlyWait`](https://stackoverflow.com/a/45674706/7429447) uses the `Duration.ofSeconds(n)` as the unit of time and can be implemented as follows:\r\n\r\n\r\n\timport java.time.Duration;\r\n\timport org.openqa.selenium.WebDriver;\r\n\t\r\n\tdriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));","title":"No Such Method error while using implicitlyWait(Duration.ofSeconds(10)","body":"<p>The current notation for <a href=\"https://stackoverflow.com/a/45674706/7429447\"><code>implicitlyWait</code></a> uses the <code>Duration.ofSeconds(n)</code> as the unit of time and can be implemented as follows:</p>\n<pre><code>import java.time.Duration;\nimport org.openqa.selenium.WebDriver;\n\ndriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n</code></pre>\n"}],"owner":{"account_id":11439846,"reputation":1,"user_id":8385848,"display_name":"Devi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691617874,"creation_date":1691587573,"question_id":76868241,"body_markdown":"````\r\nava.lang.NoSuchMethodError: &#39;org.openqa.selenium.WebDriver$Timeouts org.openqa.selenium.WebDriver$Timeouts.implicitlyWait(java.time.Duration)\r\n````\r\nThis error is coming when I removed deprecated implicit wait to latest one.\r\n\r\nPlease any one provide me a solution to resolve this.\r\n\r\nTo launch a browser successfully","title":"No Such Method error while using implicitlyWait(Duration.ofSeconds(10)","body":"<pre><code>ava.lang.NoSuchMethodError: 'org.openqa.selenium.WebDriver$Timeouts org.openqa.selenium.WebDriver$Timeouts.implicitlyWait(java.time.Duration)\n</code></pre>\n<p>This error is coming when I removed deprecated implicit wait to latest one.</p>\n<p>Please any one provide me a solution to resolve this.</p>\n<p>To launch a browser successfully</p>\n"},{"tags":["java","spring","dependency-injection","singleton","spring-ioc"],"comments":[{"owner":{"account_id":2855061,"reputation":3154,"user_id":2451486,"accept_rate":94,"display_name":"smoggers"},"score":1,"creation_date":1437850596,"post_id":31629993,"comment_id":51207309,"body_markdown":"where?? you&#39;ve not posted the configuration","body":"where?? you&#39;ve not posted the configuration"},{"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"score":6,"creation_date":1437850874,"post_id":31629993,"comment_id":51207386,"body_markdown":"Well, if you define two bean instances of same class, there will be two instances...","body":"Well, if you define two bean instances of same class, there will be two instances..."},{"owner":{"account_id":3630754,"reputation":677,"user_id":3026998,"accept_rate":0,"display_name":"Raj"},"score":1,"creation_date":1437851143,"post_id":31629993,"comment_id":51207435,"body_markdown":"thanks Gab, since i can&#39;t understood what is the use of singleton? the meaning of singleton is only one instance (object) should be created for entire application. Then why spring is creating two objects for this.","body":"thanks Gab, since i can&#39;t understood what is the use of singleton? the meaning of singleton is only one instance (object) should be created for entire application. Then why spring is creating two objects for this."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":23,"creation_date":1437851481,"post_id":31629993,"comment_id":51207519,"body_markdown":"You are defining two singleton beans, that happen to have the same type. The singleton is per **bean**, not per class.","body":"You are defining two singleton beans, that happen to have the same type. The singleton is per <b>bean</b>, not per class."}],"answers":[{"comments":[{"owner":{"account_id":6459874,"reputation":107,"user_id":5004085,"display_name":"Anupama Rao"},"score":1,"creation_date":1437853389,"post_id":31630027,"comment_id":51208018,"body_markdown":"In your example when you intialize value to customer2 it will change the value of the customer object. for both the instances. you ca nundertsand this by not intializing any value to customer2.","body":"In your example when you intialize value to customer2 it will change the value of the customer object. for both the instances. you ca nundertsand this by not intializing any value to customer2."},{"owner":{"account_id":6459874,"reputation":107,"user_id":5004085,"display_name":"Anupama Rao"},"score":1,"creation_date":1437853395,"post_id":31630027,"comment_id":51208021,"body_markdown":"&lt;bean id=&quot;customer&quot; class=&quot;jp.ne.goo.beans.Customer&quot;&gt; \n\t&lt;property name=&quot;custno&quot; value=&quot;100&quot;&gt;&lt;/property&gt;\n\t&lt;property name=&quot;custName&quot; value=&quot;rajasekhar&quot;&gt; \n\t&lt;/property&gt;\n\t&lt;/bean&gt;\n\t\n\t&lt;bean id=&quot;customer2&quot; class=&quot;jp.ne.goo.beans.Customer&quot;&gt; \n\t&lt;/bean&gt;","body":"&lt;bean id=&quot;customer&quot; class=&quot;jp.ne.goo.beans.Customer&quot;&gt;  \t&lt;property name=&quot;custno&quot; value=&quot;100&quot;&gt;&lt;/property&gt; \t&lt;property name=&quot;custName&quot; value=&quot;rajasekhar&quot;&gt;  \t&lt;/property&gt; \t&lt;/bean&gt; \t \t&lt;bean id=&quot;customer2&quot; class=&quot;jp.ne.goo.beans.Customer&quot;&gt;  \t&lt;/bean&gt;"},{"owner":{"account_id":6459874,"reputation":107,"user_id":5004085,"display_name":"Anupama Rao"},"score":1,"creation_date":1437853590,"post_id":31630027,"comment_id":51208082,"body_markdown":"try the above code and print value for customer2 as spring singleton creates one object for the same class customer2 will also have the values of customer. (Usually when we carete a new instance and donot intialize it will have the defaut values as null or int = 0)","body":"try the above code and print value for customer2 as spring singleton creates one object for the same class customer2 will also have the values of customer. (Usually when we carete a new instance and donot intialize it will have the defaut values as null or int = 0)"},{"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"score":1,"creation_date":1437861206,"post_id":31630027,"comment_id":51210213,"body_markdown":"@Anupama Rao what about trying it yourself ? I&#39;am sure it will be instructive","body":"@Anupama Rao what about trying it yourself ? I&#39;am sure it will be instructive"}],"tags":[],"owner":{"account_id":6459874,"reputation":107,"user_id":5004085,"display_name":"Anupama Rao"},"comment_count":4,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1437850518,"creation_date":1437850518,"answer_id":31630027,"question_id":31629993,"body_markdown":"Spring default scope is singleton and it will create one object for all instances unless you explicitly specify the scope to be prototype. You have not posted spring configuration. Please post it, it will give a better idea.","title":"Is spring default scope singleton or not?","body":"<p>Spring default scope is singleton and it will create one object for all instances unless you explicitly specify the scope to be prototype. You have not posted spring configuration. Please post it, it will give a better idea.</p>\n"},{"comments":[{"owner":{"account_id":3630754,"reputation":677,"user_id":3026998,"accept_rate":0,"display_name":"Raj"},"score":1,"creation_date":1437851568,"post_id":31630098,"comment_id":51207546,"body_markdown":"thanks nathan, i can&#39;t understood what is the use of singleton? the meaning of singleton is only one instance (object) should be created for entire application. Then why spring is creating two objects for this. what machanism spring internally use for this.","body":"thanks nathan, i can&#39;t understood what is the use of singleton? the meaning of singleton is only one instance (object) should be created for entire application. Then why spring is creating two objects for this. what machanism spring internally use for this."},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":2,"creation_date":1437851784,"post_id":31630098,"comment_id":51207611,"body_markdown":"@Rajasekhar_b_1989: your definition is mistaken, i think, see the quote from the spring documentation i&#39;m adding.","body":"@Rajasekhar_b_1989: your definition is mistaken, i think, see the quote from the spring documentation i&#39;m adding."}],"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":2,"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1615000492,"creation_date":1437851077,"answer_id":31630098,"question_id":31629993,"body_markdown":"Spring&#39;s default scope *is* singleton. It&#39;s just that your idea of what it means to be a singleton doesn&#39;t match how Spring defines singletons.\r\n\r\nIf you tell Spring to make two separate beans with different ids and the same class, then you get two separate beans, each with singleton scope. All singleton scope means is that when you reference something with the same id, you get the same bean instance back.\r\n\r\nHere is how [the Spring documentation defines singleton scope][1]:\r\n\r\n&gt; Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Spring container.\r\n\r\nSingleton scope means using the same id retrieves the same bean, that is all. Testing that no two ids referenced the same class would get in the way of using maps as beans, and would be complicated by proxying things with BeanFactories.\r\nFor Spring to police this would involve a lot of work for little benefit. Instead it trusts the users to know what they&#39;re doing.\r\n\r\n If you want a bean’s singleton-ness preserved across multiple names, that is do-able. You can have more than one name refer to the same bean, that is done by using an [alias][2]:\r\n\r\n&gt; In a bean definition itself, you can supply more than one name for the bean, by using a combination of up to one name specified by the id attribute, and any number of other names in the name attribute. These names can be equivalent aliases to the same bean, and are useful for some situations, such as allowing each component in an application to refer to a common dependency by using a bean name that is specific to that component itself.\r\n&gt;\r\n&gt; Specifying all aliases where the bean is actually defined is not always adequate, however. It is sometimes desirable to introduce an alias for a bean that is defined elsewhere. This is commonly the case in large systems where configuration is split amongst each subsystem, each subsystem having its own set of object definitions. In XML-based configuration metadata, you can use the &lt;alias/&gt; element to accomplish this.\r\n\r\nSo if you add a name in the bean configuration:\r\n\r\n    &lt;bean id=&quot;customer&quot; name=&quot;customer2&quot; \r\n        class=&quot;jp.ne.goo.beans.Customer&quot;&gt;\r\n    &lt;/bean&gt;\r\n\r\nor create an alias for a bean defined elsewhere:\r\n\r\n    &lt;alias name=&quot;customer&quot; alias=&quot;customer2&quot;/&gt;\r\n\r\nthen &quot;customer&quot; and &quot;customer2&quot; will refer to the same bean instance.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton\r\n  [2]: http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-beanname-alias","title":"Is spring default scope singleton or not?","body":"<p>Spring's default scope <em>is</em> singleton. It's just that your idea of what it means to be a singleton doesn't match how Spring defines singletons.</p>\n<p>If you tell Spring to make two separate beans with different ids and the same class, then you get two separate beans, each with singleton scope. All singleton scope means is that when you reference something with the same id, you get the same bean instance back.</p>\n<p>Here is how <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton\" rel=\"noreferrer\">the Spring documentation defines singleton scope</a>:</p>\n<blockquote>\n<p>Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Spring container.</p>\n</blockquote>\n<p>Singleton scope means using the same id retrieves the same bean, that is all. Testing that no two ids referenced the same class would get in the way of using maps as beans, and would be complicated by proxying things with BeanFactories.\nFor Spring to police this would involve a lot of work for little benefit. Instead it trusts the users to know what they're doing.</p>\n<p>If you want a bean’s singleton-ness preserved across multiple names, that is do-able. You can have more than one name refer to the same bean, that is done by using an <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-beanname-alias\" rel=\"noreferrer\">alias</a>:</p>\n<blockquote>\n<p>In a bean definition itself, you can supply more than one name for the bean, by using a combination of up to one name specified by the id attribute, and any number of other names in the name attribute. These names can be equivalent aliases to the same bean, and are useful for some situations, such as allowing each component in an application to refer to a common dependency by using a bean name that is specific to that component itself.</p>\n<p>Specifying all aliases where the bean is actually defined is not always adequate, however. It is sometimes desirable to introduce an alias for a bean that is defined elsewhere. This is commonly the case in large systems where configuration is split amongst each subsystem, each subsystem having its own set of object definitions. In XML-based configuration metadata, you can use the  element to accomplish this.</p>\n</blockquote>\n<p>So if you add a name in the bean configuration:</p>\n<pre><code>&lt;bean id=&quot;customer&quot; name=&quot;customer2&quot; \n    class=&quot;jp.ne.goo.beans.Customer&quot;&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>or create an alias for a bean defined elsewhere:</p>\n<pre><code>&lt;alias name=&quot;customer&quot; alias=&quot;customer2&quot;/&gt;\n</code></pre>\n<p>then &quot;customer&quot; and &quot;customer2&quot; will refer to the same bean instance.</p>\n"},{"comments":[{"owner":{"account_id":3630754,"reputation":677,"user_id":3026998,"accept_rate":0,"display_name":"Raj"},"score":1,"creation_date":1437852338,"post_id":31630190,"comment_id":51207757,"body_markdown":"thanks Gab, according to GOF pattern singleton means only once instance should be created but in spring why creating two instances in this case.","body":"thanks Gab, according to GOF pattern singleton means only once instance should be created but in spring why creating two instances in this case."},{"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"score":2,"creation_date":1437852510,"post_id":31630190,"comment_id":51207802,"body_markdown":"because in spring the word singleton is applied to the ***bean*** and not to the class. Its two different concept","body":"because in spring the word singleton is applied to the <b><i>bean</i></b> and not to the class. Its two different concept"},{"owner":{"account_id":3630754,"reputation":677,"user_id":3026998,"accept_rate":0,"display_name":"Raj"},"score":1,"creation_date":1437852765,"post_id":31630190,"comment_id":51207869,"body_markdown":"thanks for information Gab, finally class object only loads into memory not bean.  what is mean by class and bean in this situation?","body":"thanks for information Gab, finally class object only loads into memory not bean.  what is mean by class and bean in this situation?"},{"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"score":1,"creation_date":1437855858,"post_id":31630190,"comment_id":51208718,"body_markdown":"A bean is a class instance whose lifecycle (creation, injection etc) is managed by the container. A class is the same concept as the object oriented one...","body":"A bean is a class instance whose lifecycle (creation, injection etc) is managed by the container. A class is the same concept as the object oriented one..."},{"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"score":0,"creation_date":1437856567,"post_id":31630190,"comment_id":51208935,"body_markdown":"&quot;class object only loads into memory not bean&quot;. This statement is incorrect.  A bean is a class instance, both instances and class definition are loaded in memory but in different places (heap and &quot;permgen&quot; respectively). the word bean just refers to the fact that  an instance is managed by a provided context called container.","body":"&quot;class object only loads into memory not bean&quot;. This statement is incorrect.  A bean is a class instance, both instances and class definition are loaded in memory but in different places (heap and &quot;permgen&quot; respectively). the word bean just refers to the fact that  an instance is managed by a provided context called container."},{"owner":{"account_id":3630754,"reputation":677,"user_id":3026998,"accept_rate":0,"display_name":"Raj"},"score":0,"creation_date":1437933384,"post_id":31630190,"comment_id":51226817,"body_markdown":"Thanks@gab, that means two objects will be created for the above code of  each bean. Why spring is creating two objects even though mentioned scope is Singleton. Just please try to explain in detail how it happens two instances for singleton","body":"Thanks@gab, that means two objects will be created for the above code of  each bean. Why spring is creating two objects even though mentioned scope is Singleton. Just please try to explain in detail how it happens two instances for singleton"}],"tags":[],"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1480432986,"creation_date":1437851687,"answer_id":31630190,"question_id":31629993,"body_markdown":"You&#39;re confusing two different concepts.\r\n\r\nThe word singleton in spring is used for a bean scope, meaning that the bean will be created only once for the whole application. \r\n\r\nSingleton usual meaning refers to the GOF pattern. It is an object oriented pattern guarantying that only one instance of a class will exists (at least in the scope of the classLoader). ","title":"Is spring default scope singleton or not?","body":"<p>You're confusing two different concepts.</p>\n\n<p>The word singleton in spring is used for a bean scope, meaning that the bean will be created only once for the whole application. </p>\n\n<p>Singleton usual meaning refers to the GOF pattern. It is an object oriented pattern guarantying that only one instance of a class will exists (at least in the scope of the classLoader). </p>\n"},{"tags":[],"owner":{"account_id":6582147,"reputation":438,"user_id":5086113,"accept_rate":86,"display_name":"Berrigan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1437851778,"creation_date":1437851778,"answer_id":31630200,"question_id":31629993,"body_markdown":"You are declaring two beans of the same class. That isn&#39;t the same.\r\n\r\n    @Component(&quot;springTestClass&quot;)\r\n    public class SpringTestClass{\r\n         private int randomNumber = 0;\r\n         public SpringTestClass(){\r\n           randomNumber = new Random().nextInt(2000);\r\n         }\r\n    \r\n         public int getRandomNumber(){\r\n           return this.randomNumber;\r\n         }\r\n    \r\n    }\r\n\r\nAnd try to access this bean in two places the number will be the same. But what you have done was creating two separate beans.\r\n\r\nIf you want to check if this works try:\r\n\r\n    public class Main{\r\n       public static void main(String[] args){\r\n         ApplicationContext ctx = ....;\r\n         SpringTestClass testObject1 = (SpringTestClass)ctx.getBean(&quot;springTestClass&quot;);\r\n         SpringTestClass testObject2 = (SpringTestClass)ctx.getBean(&quot;springTestClass&quot;);\r\n    \r\n        System.out.println(testObject1.getRandomNumber() == testObject2.getRandomNumber());\r\n       }\r\n    }\r\n\r\nThis code should return true if it is same instance;\r\nBut in SpringTestClass you can add @Scope(&quot;prototype&quot;) annotation. \r\nThe output will be false","title":"Is spring default scope singleton or not?","body":"<p>You are declaring two beans of the same class. That isn't the same.</p>\n\n<pre><code>@Component(\"springTestClass\")\npublic class SpringTestClass{\n     private int randomNumber = 0;\n     public SpringTestClass(){\n       randomNumber = new Random().nextInt(2000);\n     }\n\n     public int getRandomNumber(){\n       return this.randomNumber;\n     }\n\n}\n</code></pre>\n\n<p>And try to access this bean in two places the number will be the same. But what you have done was creating two separate beans.</p>\n\n<p>If you want to check if this works try:</p>\n\n<pre><code>public class Main{\n   public static void main(String[] args){\n     ApplicationContext ctx = ....;\n     SpringTestClass testObject1 = (SpringTestClass)ctx.getBean(\"springTestClass\");\n     SpringTestClass testObject2 = (SpringTestClass)ctx.getBean(\"springTestClass\");\n\n    System.out.println(testObject1.getRandomNumber() == testObject2.getRandomNumber());\n   }\n}\n</code></pre>\n\n<p>This code should return true if it is same instance;\nBut in SpringTestClass you can add @Scope(\"prototype\") annotation. \nThe output will be false</p>\n"},{"tags":[],"owner":{"account_id":1479983,"reputation":111,"user_id":5885447,"display_name":"ryoung10"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691617735,"creation_date":1463490378,"answer_id":37277073,"question_id":31629993,"body_markdown":"Like others have mentioned, two beans should be created from the code you posted. Singletons are defined as follows (from the Spring documentation: [Singleton Scope](http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton))\r\n\r\n&gt; Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Spring container.\r\n\r\nTo add clarity to this, the meaning behind &quot;shared instance&quot; is explained in the paragraph that follows the one above:\r\n\r\n&gt; all subsequent requests and references for that named bean return the cached object\r\n\r\nWhen a singleton bean is created, only one bean object is instantiated and cached. This refers only to the bean, not to whatever class the bean may be an instance of. For example,\r\n\r\n    &lt;bean id=&quot;myBean&quot; class=&quot;myPackage.myClass&quot; /&gt;\r\n\r\n    &lt;bean id=&quot;myOtherBean1&quot; class=&quot;myPackage.myOtherClass1&quot;&gt;\r\n        &lt;property name=&quot;beanReference1&quot; ref=&quot;myBean&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    &lt;bean id=&quot;myOtherBean2&quot; class=&quot;myPackage.myOtherClass2&quot;&gt;\r\n        &lt;property name=&quot;beanReference2&quot; ref=&quot;myBean&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nIn this made up configuration, &quot;myOtherBean1&quot; and &quot;myOtherBean2&quot; have references to the same &quot;myBean&quot; bean therefore the same &quot;myPackage.myClass&quot; instance. If you changed the code to add a second &quot;myPackage.myClass&quot; bean, it would be distinct from &quot;myBean&quot;.\r\n\r\nTo fully understand this, also refer to the other Spring scope: the prototype. From the Spring documentation for [Prototype Scope](http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-prototype):\r\n\r\n&gt; The non-singleton, prototype scope of bean deployment results in the creation of a new bean instance every time a request for that specific bean is made.\r\n\r\nThis means that if we were to use the same Spring XML as above, &quot;myOtherBean1&quot; and &quot;myOtherBean2&quot; would each receive their own distinct copies of &quot;myBean&quot; which is still just an instance of &quot;myPackage.myClass&quot;.","title":"Is spring default scope singleton or not?","body":"<p>Like others have mentioned, two beans should be created from the code you posted. Singletons are defined as follows (from the Spring documentation: <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton\" rel=\"nofollow noreferrer\">Singleton Scope</a>)</p>\n<blockquote>\n<p>Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Spring container.</p>\n</blockquote>\n<p>To add clarity to this, the meaning behind &quot;shared instance&quot; is explained in the paragraph that follows the one above:</p>\n<blockquote>\n<p>all subsequent requests and references for that named bean return the cached object</p>\n</blockquote>\n<p>When a singleton bean is created, only one bean object is instantiated and cached. This refers only to the bean, not to whatever class the bean may be an instance of. For example,</p>\n<pre><code>&lt;bean id=&quot;myBean&quot; class=&quot;myPackage.myClass&quot; /&gt;\n\n&lt;bean id=&quot;myOtherBean1&quot; class=&quot;myPackage.myOtherClass1&quot;&gt;\n    &lt;property name=&quot;beanReference1&quot; ref=&quot;myBean&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;myOtherBean2&quot; class=&quot;myPackage.myOtherClass2&quot;&gt;\n    &lt;property name=&quot;beanReference2&quot; ref=&quot;myBean&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>In this made up configuration, &quot;myOtherBean1&quot; and &quot;myOtherBean2&quot; have references to the same &quot;myBean&quot; bean therefore the same &quot;myPackage.myClass&quot; instance. If you changed the code to add a second &quot;myPackage.myClass&quot; bean, it would be distinct from &quot;myBean&quot;.</p>\n<p>To fully understand this, also refer to the other Spring scope: the prototype. From the Spring documentation for <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-prototype\" rel=\"nofollow noreferrer\">Prototype Scope</a>:</p>\n<blockquote>\n<p>The non-singleton, prototype scope of bean deployment results in the creation of a new bean instance every time a request for that specific bean is made.</p>\n</blockquote>\n<p>This means that if we were to use the same Spring XML as above, &quot;myOtherBean1&quot; and &quot;myOtherBean2&quot; would each receive their own distinct copies of &quot;myBean&quot; which is still just an instance of &quot;myPackage.myClass&quot;.</p>\n"},{"tags":[],"owner":{"account_id":10880077,"reputation":1286,"user_id":7999311,"display_name":"Adam Ostrožl&#237;k"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536821532,"creation_date":1536821532,"answer_id":52308109,"question_id":31629993,"body_markdown":"&gt; The following example shows a @Bean annotated method being called\r\n&gt; twice:\r\n\r\n    @Configuration\r\n    public class AppConfig {\r\n    \r\n        @Bean\r\n        public ClientService clientService1() {\r\n            ClientServiceImpl clientService = new ClientServiceImpl();\r\n            clientService.setClientDao(clientDao());\r\n            return clientService;\r\n        }\r\n    \r\n        @Bean\r\n        public ClientService clientService2() {\r\n            ClientServiceImpl clientService = new ClientServiceImpl();\r\n            clientService.setClientDao(clientDao());\r\n            return clientService;\r\n        }\r\n    \r\n        @Bean\r\n        public ClientDao clientDao() {\r\n            return new ClientDaoImpl();\r\n        }\r\n    \r\n    }\r\n\r\n&gt; clientDao() has been called once in clientService1() and once in\r\n&gt; clientService2(). Since this method creates a new instance of\r\n&gt; ClientDaoImpl and returns it, you would normally expect having 2\r\n&gt; instances (one for each service). That definitely would be\r\n&gt; problematic: in Spring, instantiated beans have a singleton scope by\r\n&gt; default. This is where the magic comes in: All @Configuration classes\r\n&gt; are subclassed at startup-time with CGLIB. In the subclass, the child\r\n&gt; method checks the container first for any cached (scoped) beans before\r\n&gt; it calls the parent method and creates a new instance. Note that as of\r\n&gt; Spring 3.2, it is no longer necessary to add CGLIB to your classpath\r\n&gt; because CGLIB classes have been repackaged under\r\n&gt; org.springframework.cglib and included directly within the spring-core\r\n&gt; JAR.","title":"Is spring default scope singleton or not?","body":"<blockquote>\n  <p>The following example shows a @Bean annotated method being called\n  twice:</p>\n</blockquote>\n\n<pre><code>@Configuration\npublic class AppConfig {\n\n    @Bean\n    public ClientService clientService1() {\n        ClientServiceImpl clientService = new ClientServiceImpl();\n        clientService.setClientDao(clientDao());\n        return clientService;\n    }\n\n    @Bean\n    public ClientService clientService2() {\n        ClientServiceImpl clientService = new ClientServiceImpl();\n        clientService.setClientDao(clientDao());\n        return clientService;\n    }\n\n    @Bean\n    public ClientDao clientDao() {\n        return new ClientDaoImpl();\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>clientDao() has been called once in clientService1() and once in\n  clientService2(). Since this method creates a new instance of\n  ClientDaoImpl and returns it, you would normally expect having 2\n  instances (one for each service). That definitely would be\n  problematic: in Spring, instantiated beans have a singleton scope by\n  default. This is where the magic comes in: All @Configuration classes\n  are subclassed at startup-time with CGLIB. In the subclass, the child\n  method checks the container first for any cached (scoped) beans before\n  it calls the parent method and creates a new instance. Note that as of\n  Spring 3.2, it is no longer necessary to add CGLIB to your classpath\n  because CGLIB classes have been repackaged under\n  org.springframework.cglib and included directly within the spring-core\n  JAR.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8869862,"reputation":61,"user_id":6623869,"display_name":"Pritam"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1595237740,"creation_date":1555271378,"answer_id":55679403,"question_id":31629993,"body_markdown":"In Spring Singleton refers to One bean per Spring container where as in Java Singleton refers to one object per class loader. \r\n\r\nSo Spring singleton is not same as java singleton. Don&#39;t get confused between these two.","title":"Is spring default scope singleton or not?","body":"<p>In Spring Singleton refers to One bean per Spring container where as in Java Singleton refers to one object per class loader.</p>\n<p>So Spring singleton is not same as java singleton. Don't get confused between these two.</p>\n"},{"tags":[],"owner":{"account_id":6331029,"reputation":21,"user_id":4915965,"display_name":"gopal jha"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564465330,"creation_date":1564464260,"answer_id":57264793,"question_id":31629993,"body_markdown":"Spring Singleton Bean Does not work like Java Singleton. \r\n\r\nIf we write\r\n\r\n    ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;MyConfig.xml&quot;);\r\n            Customer obj1= (Customer) ctx.getBean(&quot;customer&quot;);\r\n            Customer obj2 = (Customer) ctx.getBean(&quot;customer2&quot;);\r\n            System.out.println(obj1 == obj2);\r\n            System.out.println(obj1+ &quot;::&quot; + obj2);\r\n\r\nIf we see the output it will return 2 different Instance.\r\nAccording to Spring Docs\r\nBean is singleton only one shared Instance will be managed, and all request beans with an ID or ID matching that bean definition. Here 2 different ID is available.\r\n\r\nSpring container as managing Key value pair, Key as ID/Name and value is bean.\r\n\r\n","title":"Is spring default scope singleton or not?","body":"<p>Spring Singleton Bean Does not work like Java Singleton. </p>\n\n<p>If we write</p>\n\n<pre><code>ApplicationContext ctx = new ClassPathXmlApplicationContext(\"MyConfig.xml\");\n        Customer obj1= (Customer) ctx.getBean(\"customer\");\n        Customer obj2 = (Customer) ctx.getBean(\"customer2\");\n        System.out.println(obj1 == obj2);\n        System.out.println(obj1+ \"::\" + obj2);\n</code></pre>\n\n<p>If we see the output it will return 2 different Instance.\nAccording to Spring Docs\nBean is singleton only one shared Instance will be managed, and all request beans with an ID or ID matching that bean definition. Here 2 different ID is available.</p>\n\n<p>Spring container as managing Key value pair, Key as ID/Name and value is bean.</p>\n"},{"comments":[{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1658775232,"post_id":67490391,"comment_id":129130829,"body_markdown":"Please read the pre-existing answers on a question before you answer it. If you do that, I think  you will see that this doesn&#39;t add anything. An answer  should provide something the other answers don&#39;t cover.","body":"Please read the pre-existing answers on a question before you answer it. If you do that, I think  you will see that this doesn&#39;t add anything. An answer  should provide something the other answers don&#39;t cover."}],"tags":[],"owner":{"account_id":21526676,"reputation":21,"user_id":15866832,"display_name":"Bhanu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620748840,"creation_date":1620748840,"answer_id":67490391,"question_id":31629993,"body_markdown":"spring default scope is singleton. Once the bean will be created and same bean used throughout its lifecycle.","title":"Is spring default scope singleton or not?","body":"<p>spring default scope is singleton. Once the bean will be created and same bean used throughout its lifecycle.</p>\n"}],"owner":{"account_id":3630754,"reputation":677,"user_id":3026998,"accept_rate":0,"display_name":"Raj"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110044,"favorite_count":0,"down_vote_count":2,"up_vote_count":60,"answer_count":9,"score":58,"last_activity_date":1691617735,"creation_date":1437850326,"question_id":31629993,"body_markdown":"Could you please explain why Spring is creating two objects for the configuration of beans shown below, since by default spring default scope is singleton?\r\n    \r\nThe Spring configuration is here:\r\n\r\n    &lt;bean id=&quot;customer&quot; class=&quot;jp.ne.goo.beans.Customer&quot;&gt; \r\n        &lt;property name=&quot;custno&quot; value=&quot;100&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;custName&quot; value=&quot;rajasekhar&quot;&gt; &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    &lt;bean id=&quot;customer2&quot; class=&quot;jp.ne.goo.beans.Customer&quot;&gt; \r\n        &lt;property name=&quot;custno&quot; value=&quot;200&quot;&gt;&lt;/property&gt; \r\n        &lt;property name=&quot;custName&quot; value=&quot;siva&quot;&gt;&lt;/property&gt; \r\n    &lt;/bean&gt;\r\n\r\n","title":"Is spring default scope singleton or not?","body":"<p>Could you please explain why Spring is creating two objects for the configuration of beans shown below, since by default spring default scope is singleton?</p>\n\n<p>The Spring configuration is here:</p>\n\n<pre><code>&lt;bean id=\"customer\" class=\"jp.ne.goo.beans.Customer\"&gt; \n    &lt;property name=\"custno\" value=\"100\"&gt;&lt;/property&gt;\n    &lt;property name=\"custName\" value=\"rajasekhar\"&gt; &lt;/property&gt;\n&lt;/bean&gt;\n&lt;bean id=\"customer2\" class=\"jp.ne.goo.beans.Customer\"&gt; \n    &lt;property name=\"custno\" value=\"200\"&gt;&lt;/property&gt; \n    &lt;property name=\"custName\" value=\"siva\"&gt;&lt;/property&gt; \n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring","session","jboss","jndi"],"owner":{"account_id":5536358,"reputation":43,"user_id":4394528,"display_name":"Kmus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691617030,"creation_date":1691617030,"question_id":76871424,"body_markdown":"I&#39;m working on creating a prototype web app in Java on a JBoss server. I&#39;m using Spring, and right now I&#39;m trying to get an understanding of session management but I&#39;m having difficulty getting even the most basic form to work on JBoss.\r\n\r\nI&#39;m following this guide https://www.javainuse.com/spring/springboot_session\r\n\r\nI couldn&#39;t find a guide that matched my exact situation. JBoss, and Oracle. My oracle connection is declared as a Datasource in the JBoss console. This example guide has you instead setup your DB credentials in the application.properties, I had to change that. I also had some issues with importing some of the libraries in pom.xml so I tweaked that too.\r\n\r\nI&#39;m here cause the code doesn&#39;t seem to be running, and also I&#39;m not getting any meaningfull errors, just blank pages. \r\n\r\nThe code should render a form at root /\r\nYou can enter a value and post that to /persistMessage which will add that as a session var and then redirect you back to root / where the value you entered will be displayed via the session\r\n\r\nWhen I load up root I get the form, enter  value, submit and /persistMessage just loads a white page, does not redirect. I did some troubleshooting and it seems to be failing on the very first line of code &quot;List&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);&quot;\r\n\r\nCan anyone point me in the right direction to start troubleshooting this? Or, perhaps point me to a better guide or educational material that fits my scenario?\r\n\r\nI&#39;m waiting on database credentials, as soon as I get those I&#39;ll log in and see if the spring_session table has been created. ( I assume it wont be)\r\n\r\nMy Setup:\r\n\r\nI have the following libraries:\r\n\r\n**Prototype1Application.java**\r\n\r\n    package private.prototype1;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\t\r\n    \r\n    @SpringBootApplication\r\n    public class Prototype1Application {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Prototype1Application.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n**ServerInitializer.java**\r\n\r\n    package private.prototype1;\r\n    \r\n    import org.springframework.boot.builder.SpringApplicationBuilder;\r\n    import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\r\n    \r\n    public class ServletInitializer extends SpringBootServletInitializer {\r\n    \r\n    \t@Override\r\n    \tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n    \t\treturn application.sources(Prototype1Application.class);\r\n    \t}\r\n    \r\n    }\r\n\r\n**SpringSessionController.java**\r\n\r\n    package private.prototype1;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    \r\n    @Controller\r\n    public class SpringSessionController {\r\n    \r\n    \r\n    \t@GetMapping(&quot;/&quot;)\r\n    \tpublic String process(Model model, HttpSession session) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t}\r\n    \t\tmodel.addAttribute(&quot;sessionMessages&quot;, messages);\r\n    \r\n    \t\treturn &quot;index&quot;;\r\n    \t}\r\n    \t\r\n    \r\n    \t@PostMapping(&quot;/persistMessage&quot;)\r\n    \tpublic String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\r\n    \t\t//@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \t\t\r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\t}\r\n    \t\tmessages.add(msg);\r\n    \t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    \t\r\n    \t\r\n    \t@PostMapping(&quot;/destroy&quot;)\r\n    \tpublic String destroySession(HttpServletRequest request) {\r\n    \t\trequest.getSession().invalidate();\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    }\r\n\r\n**templates/index.html**\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Spring Boot Session Example&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \t&lt;div&gt;\r\n    \t\t&lt;form th:action=&quot;@{/persistMessage}&quot; method=&quot;post&quot;&gt;\r\n    \t\t\t&lt;textarea name=&quot;msg&quot; cols=&quot;40&quot; rows=&quot;2&quot;&gt;&lt;/textarea&gt;\r\n    \t\t\t&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;Save Message&quot; /&gt;\r\n    \t\t&lt;/form&gt;\r\n    \t&lt;/div&gt;\r\n    \t&lt;div&gt;\r\n    \t\t&lt;h2&gt;Messages2&lt;/h2&gt;\r\n    \t\t&lt;ul th:each=&quot;message : ${sessionMessages}&quot;&gt;\r\n    \t\t\t&lt;li th:text=&quot;&quot;&gt;msg&lt;/li&gt;\r\n    \t\t&lt;/ul&gt;\r\n    \t&lt;/div&gt;\r\n    \t&lt;div&gt;\r\n    \t\t&lt;form th:action=&quot;@{/destroy}&quot; method=&quot;post&quot;&gt;\r\n    \t\t\t&lt;input type=&quot;submit&quot; value=&quot;Destroy Session&quot; /&gt;\r\n    \t\t&lt;/form&gt;\r\n    \t&lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**application.properties** This is where I departed from the guide, I jused the jndi-name to point to my jboss datasource. I did this based on some googling around.. not sure this is the correct way.\r\n\r\n    spring.datasource.jndi-name = java:jboss/OracleDSprottype\r\n    \r\n    spring.h2.console.enabled=true\r\n    \r\n    spring.session.store-type=jdbc\r\n    spring.session.jdbc.initialize-schema=always\r\n    spring.session.timeout.seconds=900\r\n\r\n**pom.xml** I also departed from the guide here, I removed the mysql library since i was using oracle. Not sure if I should have replaced it with something else.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.11&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;private&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;prototype-1&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;prototype-1&lt;/name&gt;\r\n\t&lt;description&gt;prototype for a spring site&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t    &lt;exclusions&gt;\r\n\t\t\t&lt;!-- ************************************************************* --&gt;\r\n\t\t\t&lt;!-- had to exclude these items or the War wouldnt deploy on JBoss --&gt;\r\n\t\t\t&lt;!-- ************************************************************* --&gt;\r\n\t\t        &lt;exclusion&gt;\r\n\t\t            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n\t\t            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n\t\t        &lt;/exclusion&gt;\r\n\t\t    &lt;/exclusions&gt;\r\n\t    &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n   \t\t\t&lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\r\n   \t\t\t&lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\r\n  \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n\t      &lt;scope&gt;provided&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\t\t\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-session-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-session-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;","title":"Trouble Getting Started with Spring Session","body":"<p>I'm working on creating a prototype web app in Java on a JBoss server. I'm using Spring, and right now I'm trying to get an understanding of session management but I'm having difficulty getting even the most basic form to work on JBoss.</p>\n<p>I'm following this guide <a href=\"https://www.javainuse.com/spring/springboot_session\" rel=\"nofollow noreferrer\">https://www.javainuse.com/spring/springboot_session</a></p>\n<p>I couldn't find a guide that matched my exact situation. JBoss, and Oracle. My oracle connection is declared as a Datasource in the JBoss console. This example guide has you instead setup your DB credentials in the application.properties, I had to change that. I also had some issues with importing some of the libraries in pom.xml so I tweaked that too.</p>\n<p>I'm here cause the code doesn't seem to be running, and also I'm not getting any meaningfull errors, just blank pages.</p>\n<p>The code should render a form at root /\nYou can enter a value and post that to /persistMessage which will add that as a session var and then redirect you back to root / where the value you entered will be displayed via the session</p>\n<p>When I load up root I get the form, enter  value, submit and /persistMessage just loads a white page, does not redirect. I did some troubleshooting and it seems to be failing on the very first line of code &quot;List messages = (List) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);&quot;</p>\n<p>Can anyone point me in the right direction to start troubleshooting this? Or, perhaps point me to a better guide or educational material that fits my scenario?</p>\n<p>I'm waiting on database credentials, as soon as I get those I'll log in and see if the spring_session table has been created. ( I assume it wont be)</p>\n<p>My Setup:</p>\n<p>I have the following libraries:</p>\n<p><strong>Prototype1Application.java</strong></p>\n<pre><code>package private.prototype1;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;    \n\n@SpringBootApplication\npublic class Prototype1Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Prototype1Application.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>ServerInitializer.java</strong></p>\n<pre><code>package private.prototype1;\n\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\n\npublic class ServletInitializer extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(Prototype1Application.class);\n    }\n\n}\n</code></pre>\n<p><strong>SpringSessionController.java</strong></p>\n<pre><code>package private.prototype1;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpSession;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class SpringSessionController {\n\n\n    @GetMapping(&quot;/&quot;)\n    public String process(Model model, HttpSession session) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n        }\n        model.addAttribute(&quot;sessionMessages&quot;, messages);\n\n        return &quot;index&quot;;\n    }\n    \n\n    @PostMapping(&quot;/persistMessage&quot;)\n    public String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\n        //@SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n        \n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n            request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        }\n        messages.add(msg);\n        request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        return &quot;redirect:/&quot;;\n    }\n    \n    \n    @PostMapping(&quot;/destroy&quot;)\n    public String destroySession(HttpServletRequest request) {\n        request.getSession().invalidate();\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p><strong>templates/index.html</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Spring Boot Session Example&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div&gt;\n        &lt;form th:action=&quot;@{/persistMessage}&quot; method=&quot;post&quot;&gt;\n            &lt;textarea name=&quot;msg&quot; cols=&quot;40&quot; rows=&quot;2&quot;&gt;&lt;/textarea&gt;\n            &lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;Save Message&quot; /&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;h2&gt;Messages2&lt;/h2&gt;\n        &lt;ul th:each=&quot;message : ${sessionMessages}&quot;&gt;\n            &lt;li th:text=&quot;&quot;&gt;msg&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;form th:action=&quot;@{/destroy}&quot; method=&quot;post&quot;&gt;\n            &lt;input type=&quot;submit&quot; value=&quot;Destroy Session&quot; /&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>application.properties</strong> This is where I departed from the guide, I jused the jndi-name to point to my jboss datasource. I did this based on some googling around.. not sure this is the correct way.</p>\n<pre><code>spring.datasource.jndi-name = java:jboss/OracleDSprottype\n\nspring.h2.console.enabled=true\n\nspring.session.store-type=jdbc\nspring.session.jdbc.initialize-schema=always\nspring.session.timeout.seconds=900\n</code></pre>\n<p><strong>pom.xml</strong> I also departed from the guide here, I removed the mysql library since i was using oracle. Not sure if I should have replaced it with something else.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.11&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;private&lt;/groupId&gt;\n&lt;artifactId&gt;prototype-1&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n&lt;name&gt;prototype-1&lt;/name&gt;\n&lt;description&gt;prototype for a spring site&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n        &lt;!-- ************************************************************* --&gt;\n        &lt;!-- had to exclude these items or the War wouldnt deploy on JBoss --&gt;\n        &lt;!-- ************************************************************* --&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\n        &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;       \n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-session-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-session-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1691585644,"post_id":76867956,"comment_id":135511304,"body_markdown":"`\\\\b` is a boundary. `&quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;.replaceAll(&quot;\\\\b[X]+\\\\b&quot;, &quot;&quot;)` will get rid of the lone X(s). But it won&#39;t remove all the extra whitespace you&#39;re left with.","body":"<code>\\\\b</code> is a boundary. <code>&quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;.replaceAll(&quot;\\\\b[X]+\\\\b&quot;, &quot;&quot;)</code> will get rid of the lone X(s). But it won&#39;t remove all the extra whitespace you&#39;re left with."},{"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"score":0,"creation_date":1691586476,"post_id":76867956,"comment_id":135511481,"body_markdown":"What have you done so far???","body":"What have you done so far???"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691586620,"post_id":76867956,"comment_id":135511516,"body_markdown":"&quot;*repeated more than once* - so  here `&quot;some XX is OK*&quot; XX should not be removed?","body":"&quot;<i>repeated more than once</i> - so  here `&quot;some XX is OK*&quot; XX should not be removed?"}],"answers":[{"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1691589429,"post_id":76868068,"comment_id":135512204,"body_markdown":"Backtracking. Shudder. JWZ had a point about regular expressions.","body":"Backtracking. Shudder. JWZ had a point about regular expressions."}],"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1691586191,"creation_date":1691586191,"answer_id":76868068,"question_id":76867956,"body_markdown":"You can use `\\\\bX+(?= |$)|(?&lt;= )X+\\\\b`, this regex matches sequences of the letter &#39;X&#39; that fulfill one of two conditions:\r\n\r\n 1. The &#39;X&#39; sequence is surrounded by word boundaries (`\\\\b`) and is followed by either a space or the end of the string (`(?= |$)`).\r\n 2. The &#39;X&#39; sequence is preceded by a space and is followed by a word boundary (`(?&lt;= )X+\\\\b`).\r\n\r\nExample:\r\n\r\n```java\r\nString text = &quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;;\r\nString result = text.replaceAll(&quot;\\\\bX+(?= |$)|(?&lt;= )X+\\\\b&quot;, &quot;&quot;);\r\nSystem.out.println(result); //Hi, myX name is  Farid,  glad to meet youXXX\r\n```","title":"Regex : Remove Repeated and Single X from text","body":"<p>You can use <code>\\\\bX+(?= |$)|(?&lt;= )X+\\\\b</code>, this regex matches sequences of the letter 'X' that fulfill one of two conditions:</p>\n<ol>\n<li>The 'X' sequence is surrounded by word boundaries (<code>\\\\b</code>) and is followed by either a space or the end of the string (<code>(?= |$)</code>).</li>\n<li>The 'X' sequence is preceded by a space and is followed by a word boundary (<code>(?&lt;= )X+\\\\b</code>).</li>\n</ol>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String text = &quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;;\nString result = text.replaceAll(&quot;\\\\bX+(?= |$)|(?&lt;= )X+\\\\b&quot;, &quot;&quot;);\nSystem.out.println(result); //Hi, myX name is  Farid,  glad to meet youXXX\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27900922,"reputation":5928,"user_id":21305238,"display_name":"InSync"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691616453,"creation_date":1691615698,"answer_id":76871320,"question_id":76867956,"body_markdown":"You can remove such a word nicely in one go:\r\n\r\n```none\r\n              # Match either\r\n\\h*X+$        # 0+ horizontal whitespaces followed by 1+ &#39;X&#39; at the end of string\r\n|             # or\r\n\\bX+\\h+       # a standalone series of &#39;X&#39; followed by 1+ horizontal whitespaces.\r\n```\r\n\r\nTry it [on regex101.com][1].\r\n\r\nThe first branch matches `X+` at the end of string and any horizontal whitespaces *preceding* that, whereas the second matches any other instances and any horizontal whitespaces *following* that. This is how the matches look like:\r\n\r\n```none\r\nXXX Hi, myX name is XXXX Farid, X glad to meet youXXX XX\r\n^^^^                ^^^^^       ^^                   ^^^\r\n 2                    2         2                     1\r\n```\r\n\r\nTo provide another solution, splitting and filtering also works:\r\n\r\n&lt;sub&gt;(The following function is mainly written by ChatGPT, but I have validated that it works.)&lt;/sub&gt;\r\n\r\n```java\r\nstatic String filterX(String input) {\r\n  String[] words = input.split(&quot; &quot;);\r\n    \r\n  String[] filteredWords = Arrays.stream(words)\r\n          .filter(word -&gt; !word.matches(&quot;^X+$&quot;))\r\n          .toArray(String[]::new);\r\n    \r\n  return String.join(&quot; &quot;, filteredWords);\r\n}\r\n```\r\n\r\nTry it [on ideone.com][2].\r\n\r\nFor educational purposes, the following is a more complex version of that regex. It does essentially the same thing, but doesn&#39;t require duplicating `X+`.\r\n\r\n```none\r\n(?:           # Match either\r\n  \\h          # a horizontal whitespace\r\n  (?=\\S+$)    # iff the following word ends at the end of string\r\n|             # or\r\n  \\b          # a normal word boundary\r\n)             # succeeded by\r\nX+            # 1 or more &#39;X&#39;\r\n\\h*           # and 0 or more horizontal whitespaces\r\n```\r\n\r\nTry it [on regex101.com][3].\r\n\r\n\r\n  [1]: https://regex101.com/r/ZanIZh/1\r\n  [2]: https://ideone.com/ui8pXT\r\n  [3]: https://regex101.com/r/ZanIZh/2","title":"Regex : Remove Repeated and Single X from text","body":"<p>You can remove such a word nicely in one go:</p>\n<pre class=\"lang-none prettyprint-override\"><code>              # Match either\n\\h*X+$        # 0+ horizontal whitespaces followed by 1+ 'X' at the end of string\n|             # or\n\\bX+\\h+       # a standalone series of 'X' followed by 1+ horizontal whitespaces.\n</code></pre>\n<p>Try it <a href=\"https://regex101.com/r/ZanIZh/1\" rel=\"nofollow noreferrer\">on regex101.com</a>.</p>\n<p>The first branch matches <code>X+</code> at the end of string and any horizontal whitespaces <em>preceding</em> that, whereas the second matches any other instances and any horizontal whitespaces <em>following</em> that. This is how the matches look like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>XXX Hi, myX name is XXXX Farid, X glad to meet youXXX XX\n^^^^                ^^^^^       ^^                   ^^^\n 2                    2         2                     1\n</code></pre>\n<p>To provide another solution, splitting and filtering also works:</p>\n<p><sub>(The following function is mainly written by ChatGPT, but I have validated that it works.)</sub></p>\n<pre class=\"lang-java prettyprint-override\"><code>static String filterX(String input) {\n  String[] words = input.split(&quot; &quot;);\n    \n  String[] filteredWords = Arrays.stream(words)\n          .filter(word -&gt; !word.matches(&quot;^X+$&quot;))\n          .toArray(String[]::new);\n    \n  return String.join(&quot; &quot;, filteredWords);\n}\n</code></pre>\n<p>Try it <a href=\"https://ideone.com/ui8pXT\" rel=\"nofollow noreferrer\">on ideone.com</a>.</p>\n<p>For educational purposes, the following is a more complex version of that regex. It does essentially the same thing, but doesn't require duplicating <code>X+</code>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?:           # Match either\n  \\h          # a horizontal whitespace\n  (?=\\S+$)    # iff the following word ends at the end of string\n|             # or\n  \\b          # a normal word boundary\n)             # succeeded by\nX+            # 1 or more 'X'\n\\h*           # and 0 or more horizontal whitespaces\n</code></pre>\n<p>Try it <a href=\"https://regex101.com/r/ZanIZh/2\" rel=\"nofollow noreferrer\">on regex101.com</a>.</p>\n"}],"owner":{"account_id":8929942,"reputation":11,"user_id":6662894,"display_name":"Ferid Qelenderli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":76868068,"answer_count":2,"score":-2,"last_activity_date":1691616453,"creation_date":1691585371,"question_id":76867956,"body_markdown":"I need a regex that will remove the repeated X symbol from a text, but if only X is repeated more than once and has no other character nearby. But it needs to remove a single X character from a text too.\r\n\r\nFor example, if the given text is \r\n\r\n**&quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;**,\r\n\r\nthen the result must be \r\n\r\n**&quot;Hi, myX name is Farid, glad to meet youXXX&quot;**","title":"Regex : Remove Repeated and Single X from text","body":"<p>I need a regex that will remove the repeated X symbol from a text, but if only X is repeated more than once and has no other character nearby. But it needs to remove a single X character from a text too.</p>\n<p>For example, if the given text is</p>\n<p><strong>&quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;</strong>,</p>\n<p>then the result must be</p>\n<p><strong>&quot;Hi, myX name is Farid, glad to meet youXXX&quot;</strong></p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691587791,"post_id":76865337,"comment_id":135511818,"body_markdown":"What do you actually mean by &quot;layout manager&quot; in this context?","body":"What do you actually mean by &quot;layout manager&quot; in this context?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691593475,"post_id":76865337,"comment_id":135513207,"body_markdown":"Off-topic: given the `Person` class in the [Javadoc you cite](https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html), the cell value factories should be implemented as `p -&gt; p.getValue().firstNameProperty()` etc. The implementation you use will not allow the cell to update if the values are changed.","body":"Off-topic: given the <code>Person</code> class in the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\">Javadoc you cite</a>, the cell value factories should be implemented as <code>p -&gt; p.getValue().firstNameProperty()</code> etc. The implementation you use will not allow the cell to update if the values are changed."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691595641,"post_id":76865337,"comment_id":135513715,"body_markdown":"@James_D Thanks. I had remade the `Person` class as a [record](https://openjdk.org/jeps/395), read-only.","body":"@James_D Thanks. I had remade the <code>Person</code> class as a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>, read-only."}],"answers":[{"tags":[],"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1691565380,"creation_date":1691565380,"answer_id":76865440,"question_id":76865337,"body_markdown":"There are no layout managers in JavaFX.\r\nThe [Scence API documentation](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Scene.html) states how `Scene` behaves on resizing:\r\n&gt; If a Group is used as the root, the contents of the scene graph will be clipped by the scene&#39;s width and height and changes to the scene&#39;s size (if user resizes the stage) will not alter the layout of the scene graph. If a resizable node (layout Region or Control) is set as the root, then the root&#39;s size will track the scene&#39;s size, causing the contents to be relayed out as necessary.\r\n\r\nSince `TableView` is a `Control`, the latter behavior is what you get and what you see.","title":"What is the default layout manager for a `Scene` in JavaFX?","body":"<p>There are no layout managers in JavaFX.\nThe <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Scene.html\" rel=\"noreferrer\">Scence API documentation</a> states how <code>Scene</code> behaves on resizing:</p>\n<blockquote>\n<p>If a Group is used as the root, the contents of the scene graph will be clipped by the scene's width and height and changes to the scene's size (if user resizes the stage) will not alter the layout of the scene graph. If a resizable node (layout Region or Control) is set as the root, then the root's size will track the scene's size, causing the contents to be relayed out as necessary.</p>\n</blockquote>\n<p>Since <code>TableView</code> is a <code>Control</code>, the latter behavior is what you get and what you see.</p>\n"},{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691616400,"creation_date":1691592294,"answer_id":76868907,"question_id":76865337,"body_markdown":"As pointed out in [another answer](https://stackoverflow.com/a/76865440/2189127), JavaFX does not have explicit layout managers (as AWT, and consequently Swing, does), and the behavior when resizing a `Scene` (for example, when the user resizes the window containing it) is described in the API documentation.\r\n\r\nTaking the question\r\n\r\n&gt; What is the default layout manager of the `Scene` in this example?\r\n\r\nto more generally mean &quot;how does a `Scene` perform layout by default&quot;, what actually happens when a scene changes size is that it invokes [`resize(...)`][1] on the root node, passing in its new width and height. \r\n\r\n(Note that while this is the &quot;default&quot; behavior, it is also the only behavior: it cannot be changed.)\r\n\r\nThe actual implementation of `resize(...)` defined in [`Node`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#resize(double,double)) is a no-op, and this is inherited by both `Parent` and `Group`. So if the root node is an instance of [`Group`][2], nothing actually happens.\r\n\r\n[`Region`][3], on the other hand, overrides `resize(...)` to set its width and height to the values passed in, thereby causing the size of a root that is an instance of `Region` to track the size of the scene. Changing the size triggers a call to [`layout()`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Parent.html#layout()) on the next rendering pulse.\r\n\r\n`layout()`, which is a `final` method, is defined to first call `layoutChildren()` (which is overridable and should resize and position the child nodes), and then iteratively call `layout()` on any child nodes which are instances of `Parent`.\r\n\r\nSo the actual effect of resizing the `Scene` whose `root` is an instance of `Region` is determined by the implementation of `layoutChildren()` for that `root`. In the case of a `Control`, such as `TableView`, it is delegated to the [skin](https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/Control.html#skinProperty). `Skin` additionally defines a `layoutChildren()` method whose implementation determines how the various components of the control are laid out in the new width and height. \r\n\r\nConsequently in your example, the size of the [`TableView`][4] is set to the size of the control (by the implementation of `resize()` in `Region`), and the table view is then laid out according to the implementation of [`TableViewSkin`][5].\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#resize(double,double)\r\n  [2]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Group.html\r\n  [3]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/Region.html\r\n  [4]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\r\n  [5]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/skin/TableViewSkin.html","title":"What is the default layout manager for a `Scene` in JavaFX?","body":"<p>As pointed out in <a href=\"https://stackoverflow.com/a/76865440/2189127\">another answer</a>, JavaFX does not have explicit layout managers (as AWT, and consequently Swing, does), and the behavior when resizing a <code>Scene</code> (for example, when the user resizes the window containing it) is described in the API documentation.</p>\n<p>Taking the question</p>\n<blockquote>\n<p>What is the default layout manager of the <code>Scene</code> in this example?</p>\n</blockquote>\n<p>to more generally mean &quot;how does a <code>Scene</code> perform layout by default&quot;, what actually happens when a scene changes size is that it invokes <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#resize(double,double)\" rel=\"nofollow noreferrer\"><code>resize(...)</code></a> on the root node, passing in its new width and height.</p>\n<p>(Note that while this is the &quot;default&quot; behavior, it is also the only behavior: it cannot be changed.)</p>\n<p>The actual implementation of <code>resize(...)</code> defined in <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#resize(double,double)\" rel=\"nofollow noreferrer\"><code>Node</code></a> is a no-op, and this is inherited by both <code>Parent</code> and <code>Group</code>. So if the root node is an instance of <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Group.html\" rel=\"nofollow noreferrer\"><code>Group</code></a>, nothing actually happens.</p>\n<p><a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/Region.html\" rel=\"nofollow noreferrer\"><code>Region</code></a>, on the other hand, overrides <code>resize(...)</code> to set its width and height to the values passed in, thereby causing the size of a root that is an instance of <code>Region</code> to track the size of the scene. Changing the size triggers a call to <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Parent.html#layout()\" rel=\"nofollow noreferrer\"><code>layout()</code></a> on the next rendering pulse.</p>\n<p><code>layout()</code>, which is a <code>final</code> method, is defined to first call <code>layoutChildren()</code> (which is overridable and should resize and position the child nodes), and then iteratively call <code>layout()</code> on any child nodes which are instances of <code>Parent</code>.</p>\n<p>So the actual effect of resizing the <code>Scene</code> whose <code>root</code> is an instance of <code>Region</code> is determined by the implementation of <code>layoutChildren()</code> for that <code>root</code>. In the case of a <code>Control</code>, such as <code>TableView</code>, it is delegated to the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/Control.html#skinProperty\" rel=\"nofollow noreferrer\">skin</a>. <code>Skin</code> additionally defines a <code>layoutChildren()</code> method whose implementation determines how the various components of the control are laid out in the new width and height.</p>\n<p>Consequently in your example, the size of the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\"><code>TableView</code></a> is set to the size of the control (by the implementation of <code>resize()</code> in <code>Region</code>), and the table view is then laid out according to the implementation of <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/skin/TableViewSkin.html\" rel=\"nofollow noreferrer\"><code>TableViewSkin</code></a>.</p>\n"}],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76868907,"answer_count":2,"score":3,"last_activity_date":1691616400,"creation_date":1691564561,"question_id":76865337,"body_markdown":"Here is my version of the example code shown in the Javadoc for [`TableView`][1] in JavaFX/[OpenJFX][2]. (The `Person` class is a [record][3], read-only.)\r\n\r\n```java\r\npackage work.basil.example.jfxexample;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.beans.property.SimpleStringProperty;\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ObservableList;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.TableColumn;\r\nimport javafx.scene.control.TableView;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.util.List;\r\n\r\npublic class HelloApplication extends Application\r\n{\r\n    @Override\r\n    public void start ( Stage stage )\r\n    {\r\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\r\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\r\n        tableViewPersons.setItems ( persons );\r\n\r\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\r\n        firstNameCol.setCellValueFactory (   ( TableColumn.CellDataFeatures &lt; Person, String &gt; p ) -&gt; new SimpleStringProperty (p.getValue().getFirstName ()));\r\n\r\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\r\n        lastNameCol.setCellValueFactory (   ( TableColumn.CellDataFeatures &lt; Person, String &gt; p ) -&gt; new SimpleStringProperty (p.getValue().getLastName ()));\r\n\r\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\r\n        tableViewPersons.getColumns ( ).setAll ( columns );\r\n\r\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\r\n        stage.setTitle ( &quot;JavaFX Example&quot; );\r\n        stage.setScene ( scene );\r\n        stage.show ( );\r\n    }\r\n\r\n    private List &lt; Person &gt; fetchPersons ( )\r\n    {\r\n        return List.of (\r\n                new Person ( &quot;William&quot; , &quot;Reed&quot; ) ,\r\n                new Person ( &quot;James&quot; , &quot;Michaelson&quot; ) ,\r\n                new Person ( &quot;Julius&quot; , &quot;Dean&quot; ) );\r\n    }\r\n\r\n    public static void main ( String[] args )\r\n    {\r\n        launch ( );\r\n    }\r\n}\r\n```\r\n\r\nThis app presents a window filled with the table view. Resizing the window results in the `TableView` control being resized as well, to continue filling the window. \r\n\r\n[![screenshot of example JavaFX app with a single control, a TableView filling the window.][4]][4]\r\n\r\n&#128073;&#127996; What is the default layout manager of the [`Scene`][5] in this example? \r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\r\n  [2]: https://openjfx.io/\r\n  [3]: https://openjdk.org/jeps/395\r\n  [4]: https://i.stack.imgur.com/TrRMR.jpg\r\n  [5]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Scene.html","title":"What is the default layout manager for a `Scene` in JavaFX?","body":"<p>Here is my version of the example code shown in the Javadoc for <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\"><code>TableView</code></a> in JavaFX/<a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a>. (The <code>Person</code> class is a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>, read-only.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.jfxexample;\n\nimport javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.stage.Stage;\n\nimport java.util.List;\n\npublic class HelloApplication extends Application\n{\n    @Override\n    public void start ( Stage stage )\n    {\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\n        tableViewPersons.setItems ( persons );\n\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\n        firstNameCol.setCellValueFactory (   ( TableColumn.CellDataFeatures &lt; Person, String &gt; p ) -&gt; new SimpleStringProperty (p.getValue().getFirstName ()));\n\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\n        lastNameCol.setCellValueFactory (   ( TableColumn.CellDataFeatures &lt; Person, String &gt; p ) -&gt; new SimpleStringProperty (p.getValue().getLastName ()));\n\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\n        tableViewPersons.getColumns ( ).setAll ( columns );\n\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\n        stage.setTitle ( &quot;JavaFX Example&quot; );\n        stage.setScene ( scene );\n        stage.show ( );\n    }\n\n    private List &lt; Person &gt; fetchPersons ( )\n    {\n        return List.of (\n                new Person ( &quot;William&quot; , &quot;Reed&quot; ) ,\n                new Person ( &quot;James&quot; , &quot;Michaelson&quot; ) ,\n                new Person ( &quot;Julius&quot; , &quot;Dean&quot; ) );\n    }\n\n    public static void main ( String[] args )\n    {\n        launch ( );\n    }\n}\n</code></pre>\n<p>This app presents a window filled with the table view. Resizing the window results in the <code>TableView</code> control being resized as well, to continue filling the window.</p>\n<p><a href=\"https://i.stack.imgur.com/TrRMR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TrRMR.jpg\" alt=\"screenshot of example JavaFX app with a single control, a TableView filling the window.\" /></a></p>\n<p>👉🏼 What is the default layout manager of the <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Scene.html\" rel=\"nofollow noreferrer\"><code>Scene</code></a> in this example?</p>\n"},{"tags":["java","string","if-statement","replace"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1498683742,"post_id":44812465,"comment_id":76605581,"body_markdown":"Your question is very unclear. Can you be more specific?","body":"Your question is very unclear. Can you be more specific?"},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1498683852,"post_id":44812465,"comment_id":76605632,"body_markdown":"Maybe this is the problem `if (isTrue == true)` ?","body":"Maybe this is the problem <code>if (isTrue == true)</code> ?"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1498683909,"post_id":44812465,"comment_id":76605664,"body_markdown":"I think he refers to the main logic that displays the word, for example as `_ _ e _ _ e _ ` and remembers the correct `char`s.","body":"I think he refers to the main logic that displays the word, for example as <code>_ _ e _ _ e _ </code> and remembers the correct <code>char</code>s."},{"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"score":0,"creation_date":1498684096,"post_id":44812465,"comment_id":76605750,"body_markdown":"Yes correct I changed it.","body":"Yes correct I changed it."},{"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"score":0,"creation_date":1498684129,"post_id":44812465,"comment_id":76605760,"body_markdown":"Zabuza.  ACV no that is fine it just check if the input is 1 digit","body":"Zabuza.  ACV no that is fine it just check if the input is 1 digit"},{"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"score":0,"creation_date":1498684149,"post_id":44812465,"comment_id":76605768,"body_markdown":"Sorry for my worse english speaking","body":"Sorry for my worse english speaking"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1501156788,"post_id":44812465,"comment_id":77661169,"body_markdown":"@MichaelDev If an user answered your question please also **accept** his answer ([Accepting Answers: How does it work?](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)). If not than please specify what remains unanswered, this is a really crucial part of StackOverflow, thank you very much.","body":"@MichaelDev If an user answered your question please also <b>accept</b> his answer (<a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">Accepting Answers: How does it work?</a>). If not than please specify what remains unanswered, this is a really crucial part of StackOverflow, thank you very much."}],"answers":[{"comments":[{"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"score":0,"creation_date":1498685428,"post_id":44812643,"comment_id":76606355,"body_markdown":"I try my but ty","body":"I try my but ty"}],"tags":[],"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1498684846,"creation_date":1498684447,"answer_id":44812643,"question_id":44812465,"body_markdown":"There are several ways to implement hangman. I will show you an approach that is easy to understand, no focus on efficiency.\r\n\r\nYou need to know the final word and remember all characters that the user has guessed:\r\n\r\n    final String word = ... // the random word\r\n    final Set&lt;Character&gt; correctChars = new HashSet&lt;&gt;();\r\n    final Set&lt;Character&gt; incorrectChars = new HashSet&lt;&gt;();\r\n\r\nNow if a user guesses a character you should update the data-structures:\r\n\r\n    final char userGuess = ... // input from the user\r\n    if (correctChars.contains(userGuess) || incorrectChars.contains(userGuess) {\r\n        System.out.println(&quot;You guessed that already!&quot;);\r\n    } else if (word.contains(userGuess)) {\r\n        correctChars.add(userGuess);\r\n        System.out.println(&quot;Correct!&quot;);\r\n    } else {\r\n        incorrectChars.add(userGuess);\r\n        System.out.println(&quot;Incorrect!&quot;);\r\n    }\r\n\r\nAnd last you need something that prints the word as `_ _ _ _ ` and so on. We do so by replacing all characters that are not contained in `correctChars`:\r\n\r\n    String replacePattern = &quot;(?i)[^&quot;;\r\n    for (Character correctChar : correctChars) {\r\n        replacePattern += correctChar;\r\n    }\r\n    replacePattern += &quot;]&quot;;\r\n\r\n    final String wordToDisplay = word.replaceAll(replacePattern, &quot;_&quot;);\r\n    System.out.println(&quot;Progress: &quot; + wordToDisplay);\r\n\r\nThe `replacePattern` may then look like `(?i)[^aekqw]`. The `(?i)` matches case insensitive, the `[...]` is a group of symbols to match and the `^` negates the group. So all characters that are not contained inside the `[...]` get replaced.\r\n\r\nAnd a small check if the game has finished:\r\n\r\n    if (wordToDisplay.equals(word)) {\r\n        System.out.println(&quot;You won!&quot;);\r\n    } else if (incorrectChars.size() &gt; 10) {\r\n        System.out.println(&quot;You guessed wrong 10 times, you lost!&quot;);\r\n    } else {\r\n        ... // Next round starts\r\n    }","title":"Hangman check if String is contained in the word and replace it?","body":"<p>There are several ways to implement hangman. I will show you an approach that is easy to understand, no focus on efficiency.</p>\n\n<p>You need to know the final word and remember all characters that the user has guessed:</p>\n\n<pre><code>final String word = ... // the random word\nfinal Set&lt;Character&gt; correctChars = new HashSet&lt;&gt;();\nfinal Set&lt;Character&gt; incorrectChars = new HashSet&lt;&gt;();\n</code></pre>\n\n<p>Now if a user guesses a character you should update the data-structures:</p>\n\n<pre><code>final char userGuess = ... // input from the user\nif (correctChars.contains(userGuess) || incorrectChars.contains(userGuess) {\n    System.out.println(\"You guessed that already!\");\n} else if (word.contains(userGuess)) {\n    correctChars.add(userGuess);\n    System.out.println(\"Correct!\");\n} else {\n    incorrectChars.add(userGuess);\n    System.out.println(\"Incorrect!\");\n}\n</code></pre>\n\n<p>And last you need something that prints the word as <code>_ _ _ _</code> and so on. We do so by replacing all characters that are not contained in <code>correctChars</code>:</p>\n\n<pre><code>String replacePattern = \"(?i)[^\";\nfor (Character correctChar : correctChars) {\n    replacePattern += correctChar;\n}\nreplacePattern += \"]\";\n\nfinal String wordToDisplay = word.replaceAll(replacePattern, \"_\");\nSystem.out.println(\"Progress: \" + wordToDisplay);\n</code></pre>\n\n<p>The <code>replacePattern</code> may then look like <code>(?i)[^aekqw]</code>. The <code>(?i)</code> matches case insensitive, the <code>[...]</code> is a group of symbols to match and the <code>^</code> negates the group. So all characters that are not contained inside the <code>[...]</code> get replaced.</p>\n\n<p>And a small check if the game has finished:</p>\n\n<pre><code>if (wordToDisplay.equals(word)) {\n    System.out.println(\"You won!\");\n} else if (incorrectChars.size() &gt; 10) {\n    System.out.println(\"You guessed wrong 10 times, you lost!\");\n} else {\n    ... // Next round starts\n}\n</code></pre>\n"}],"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691615936,"creation_date":1498683630,"question_id":44812465,"body_markdown":"I created a hangman game in Java. I have no clue how to check and replace it. Everything works, the String word is correct and the gameboard is fine. So the game board give me the length of word as &quot;_ _ _ _ _&quot;, for example.\r\n\r\n**Simply my Question is how I can I get the position of String word checked by the userinput and go to battleboard and change the &quot;underline(_)&quot; with the word which find in the position.**\r\n\r\n    public void gameStart(int topic) {\r\n        String[] wordList = this.wordList.chooseTopicArray(topic);\r\n        String word = this.wordList.pickRandom(wordList);\r\n        String gameboard = spielbrettvorbereiten(word);\r\n        Scanner userInput = new Scanner(System.in);\r\n\r\n        for (int i = 0; i &lt;= 16;) {\r\n\r\n        System.out.println(gameboard);\r\n        System.out.print(&quot;Write a letter &quot;);\r\n\r\n        String input = userInput.next();\r\n        int length = input.length();\r\n        boolean isTrue = letters.errateWortEingabe(length);\r\n\r\n        if (isTrue == true) {\r\n        if (word.contains(input)) {\r\n\r\n        }\r\n\r\n\r\n        } else {\r\n           i = i - 1;\r\n        }\r\n\r\n\r\n        i++;\r\n        }\r\n\r\nI hope you guys can help me I am struggling so hard.\r\n\r\nBest Regards","title":"Hangman check if String is contained in the word and replace it?","body":"<p>I created a hangman game in Java. I have no clue how to check and replace it. Everything works, the String word is correct and the gameboard is fine. So the game board give me the length of word as &quot;_ _ _ _ _&quot;, for example.</p>\n<p><strong>Simply my Question is how I can I get the position of String word checked by the userinput and go to battleboard and change the &quot;underline(_)&quot; with the word which find in the position.</strong></p>\n<pre><code>public void gameStart(int topic) {\n    String[] wordList = this.wordList.chooseTopicArray(topic);\n    String word = this.wordList.pickRandom(wordList);\n    String gameboard = spielbrettvorbereiten(word);\n    Scanner userInput = new Scanner(System.in);\n\n    for (int i = 0; i &lt;= 16;) {\n\n    System.out.println(gameboard);\n    System.out.print(&quot;Write a letter &quot;);\n\n    String input = userInput.next();\n    int length = input.length();\n    boolean isTrue = letters.errateWortEingabe(length);\n\n    if (isTrue == true) {\n    if (word.contains(input)) {\n\n    }\n\n\n    } else {\n       i = i - 1;\n    }\n\n\n    i++;\n    }\n</code></pre>\n<p>I hope you guys can help me I am struggling so hard.</p>\n<p>Best Regards</p>\n"},{"tags":["java","json","dictionary","jsf","jackson"],"answers":[{"comments":[{"owner":{"account_id":9716057,"reputation":33,"user_id":7206440,"display_name":"Ju Gaertner"},"score":0,"creation_date":1498736418,"post_id":44820210,"comment_id":76627993,"body_markdown":"The way you do it, I can understand. But you think it&#39;ll work if the Object contains a Map ? We&#39;re putting datas into a map, and then using ObjectMapper to write the map into a file, but I have some issues when the value contains a Map.","body":"The way you do it, I can understand. But you think it&#39;ll work if the Object contains a Map ? We&#39;re putting datas into a map, and then using ObjectMapper to write the map into a file, but I have some issues when the value contains a Map."},{"owner":{"account_id":9716057,"reputation":33,"user_id":7206440,"display_name":"Ju Gaertner"},"score":0,"creation_date":1498748063,"post_id":44820210,"comment_id":76637462,"body_markdown":"I can&#39;t, I&#39;m not the one who decides for that, and Jackson has been chosen for the project..","body":"I can&#39;t, I&#39;m not the one who decides for that, and Jackson has been chosen for the project.."},{"owner":{"account_id":10509791,"reputation":21,"user_id":7745872,"display_name":"Java Gonzalez Arribas"},"score":0,"creation_date":1498748723,"post_id":44820210,"comment_id":76638003,"body_markdown":"Try then with ObjectMapper, to read:\n`ObjectMapper mapper= new ObjectMapper();\nObjectYouWant =mapper.readValue({json},ObjectYouWant.class);`\n\nTo write:\n`mapper.writeValue({outputJson}, objectYouWantToWrite);`","body":"Try then with ObjectMapper, to read: <code>ObjectMapper mapper= new ObjectMapper(); ObjectYouWant =mapper.readValue({json},ObjectYouWant.class);</code>  To write: <code>mapper.writeValue({outputJson}, objectYouWantToWrite);</code>"},{"owner":{"account_id":10509791,"reputation":21,"user_id":7745872,"display_name":"Java Gonzalez Arribas"},"score":0,"creation_date":1498748804,"post_id":44820210,"comment_id":76638063,"body_markdown":"This is done with com.fasterxml.jackson.databind.ObjectMapper","body":"This is done with com.fasterxml.jackson.databind.ObjectMapper"}],"tags":[],"owner":{"account_id":10509791,"reputation":21,"user_id":7745872,"display_name":"Java Gonzalez Arribas"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498725626,"creation_date":1498725626,"answer_id":44820210,"question_id":44819731,"body_markdown":"I think this is a repeated post, see https://stackoverflow.com/questions/12155800/how-to-convert-hashmap-to-json-object-in-java\r\n\r\nAnd as it says on one of the responses:\r\n\r\n    Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();\r\n    data.put( &quot;name&quot;, &quot;Mars&quot; );\r\n    data.put( &quot;age&quot;, 32 );\r\n    data.put( &quot;city&quot;, &quot;NY&quot; );\r\n    JSONObject json = new JSONObject();\r\n    json.putAll( data );\r\n    System.out.printf( &quot;JSON: %s&quot;, json.toString(2) );\r\n\r\noutput:\r\n\r\n\r\n    JSON: {\r\n      &quot;age&quot;: 32,\r\n      &quot;name&quot;: &quot;Mars&quot;,\r\n      &quot;city&quot;: &quot;NY&quot;\r\n    }\r\n\r\nYou can also try to use Google&#39;s GSON.Google&#39;s GSON is the best library available to convert Java Objects into their JSON representation\r\n","title":"Map inside a Map with Jackson with JSF","body":"<p>I think this is a repeated post, see <a href=\"https://stackoverflow.com/questions/12155800/how-to-convert-hashmap-to-json-object-in-java\">How to convert hashmap to JSON object in Java</a></p>\n\n<p>And as it says on one of the responses:</p>\n\n<pre><code>Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();\ndata.put( \"name\", \"Mars\" );\ndata.put( \"age\", 32 );\ndata.put( \"city\", \"NY\" );\nJSONObject json = new JSONObject();\njson.putAll( data );\nSystem.out.printf( \"JSON: %s\", json.toString(2) );\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>JSON: {\n  \"age\": 32,\n  \"name\": \"Mars\",\n  \"city\": \"NY\"\n}\n</code></pre>\n\n<p>You can also try to use Google's GSON.Google's GSON is the best library available to convert Java Objects into their JSON representation</p>\n"}],"owner":{"account_id":9716057,"reputation":33,"user_id":7206440,"display_name":"Ju Gaertner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":394,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691615877,"creation_date":1498724166,"question_id":44819731,"body_markdown":"I&#39;m using Jackson to read/write data from/into JSON files and I have an issue with the User POJO. It has a Map&lt;Enum, Object&gt; which is supposed to be the ways to contact the User (so it can have from 0 to 7, depending on the Enum). I want to be able to put ways to contact using a form in JSF.\r\n\r\nI tried something like `value=&quot;#{config.user.contacts[EMAIL_PRO]}&quot;`\r\nwhere of course EMAIL_PRO is an Enum (later, the user should be able to chose the Enum himself, but right now I try simple).\r\nBut when I do so, the error is \r\n\r\n&gt; Null key for a Map not allowed in JSON\r\n\r\nwhich I understand, &#39;cause my debug says that the value returned is `{null = null}`. Now first question: since the map is empty, is JSF supposed to work simply like that? The key &quot;EMAIL_PRO&quot; doesn&#39;t exists yet, but shouldn&#39;t JSF make the work done for me, and put right value with the key?\r\n\r\nThe other question is much more about Jackson and Maps. As I said, my POJO User contains a Map, and the JSON file is a Map himself (containing multiple users). \r\n\r\nIs it really possible to write a Map into this file using Jackson where the Map is `Map&lt;String, Object&gt;` and the Object contains a `Map&lt;Enum, Object&gt;`? And if yes, how?\r\n\r\nThanks for the help\r\n\r\nPS: I cannot change either my APIs or my POJOs.","title":"Map inside a Map with Jackson with JSF","body":"<p>I'm using Jackson to read/write data from/into JSON files and I have an issue with the User POJO. It has a Map&lt;Enum, Object&gt; which is supposed to be the ways to contact the User (so it can have from 0 to 7, depending on the Enum). I want to be able to put ways to contact using a form in JSF.</p>\n<p>I tried something like <code>value=&quot;#{config.user.contacts[EMAIL_PRO]}&quot;</code>\nwhere of course EMAIL_PRO is an Enum (later, the user should be able to chose the Enum himself, but right now I try simple).\nBut when I do so, the error is</p>\n<blockquote>\n<p>Null key for a Map not allowed in JSON</p>\n</blockquote>\n<p>which I understand, 'cause my debug says that the value returned is <code>{null = null}</code>. Now first question: since the map is empty, is JSF supposed to work simply like that? The key &quot;EMAIL_PRO&quot; doesn't exists yet, but shouldn't JSF make the work done for me, and put right value with the key?</p>\n<p>The other question is much more about Jackson and Maps. As I said, my POJO User contains a Map, and the JSON file is a Map himself (containing multiple users).</p>\n<p>Is it really possible to write a Map into this file using Jackson where the Map is <code>Map&lt;String, Object&gt;</code> and the Object contains a <code>Map&lt;Enum, Object&gt;</code>? And if yes, how?</p>\n<p>Thanks for the help</p>\n<p>PS: I cannot change either my APIs or my POJOs.</p>\n"},{"tags":["java","sms","infobip","infobip-api"],"owner":{"account_id":23752061,"reputation":11,"user_id":17768688,"display_name":"Hasan Isleem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691615689,"creation_date":1691573020,"question_id":76866314,"body_markdown":"I have a problem when send SMS I get 200 http status but message is not received to my mobile.\r\n  \r\nTHIS MY CODE\r\n\r\n```\r\n        try {\r\n            // Create the connection to the Infobip API.\r\n            URL url = new URL(BASE_URL + &quot;/sms/2/text/advanced&quot;);\r\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n            connection.setRequestMethod(&quot;POST&quot;);\r\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;App &quot; + API_KEY);\r\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n            connection.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n//            connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.76&quot;);\r\n            connection.setDoOutput(true);\r\n\r\n            // Create the SMS message JSON payload.\r\n            String payload = String.format(&quot;{\\&quot;messages\\&quot;:[{\\&quot;from\\&quot;:\\&quot;%s\\&quot;,\\&quot;destinations\\&quot;:[{\\&quot;to\\&quot;:\\&quot;%s\\&quot;}],\\&quot;text\\&quot;:\\&quot;%s\\&quot;}]}&quot;,\r\n                    SENDER,\r\n                    RECIPIENT,\r\n                    MESSAGE_TEXT\r\n            );\r\n            // Write the payload to the request.\r\n            try (OutputStream os = connection.getOutputStream()) {\r\n                byte[] input = payload.getBytes(&quot;utf-8&quot;);\r\n                os.write(input, 0, input.length);\r\n            }\r\n\r\n            // Get the response from the API.\r\n            int responseCode = connection.getResponseCode();\r\n            System.out.println(&quot;Response Code: &quot; + responseCode);\r\n\r\n            if (responseCode == HttpURLConnection.HTTP_OK) {\r\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\r\n                    String line;\r\n                    StringBuilder response = new StringBuilder();\r\n                    while ((line = reader.readLine()) != null) {\r\n                        response.append(line);\r\n                    }\r\n                    System.out.println(&quot;Message sent successfully. Response Content: &quot; + response.toString());\r\n                }\r\n            } else {\r\n                // Print the response content for error requests.\r\n                // Similar to the success case, adjust the parsing and print the full response content.\r\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getErrorStream()))) {\r\n                    String line;\r\n                    StringBuilder response = new StringBuilder();\r\n                    while ((line = reader.readLine()) != null) {\r\n                        response.append(line);\r\n                    }\r\n                    System.out.println(&quot;Error sending message. Response Content: &quot; + response.toString());\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nResponse Code: 200\r\n\r\nThis is response:\r\n\r\n&gt; Message sent successfully. Response Content: {&quot;messages&quot;:\\[{&quot;messageId&quot;:&quot;3915723960824335774697&quot;,&quot;status&quot;:{&quot;description&quot;:&quot;Message sent to next instance&quot;,&quot;groupId&quot;:1,&quot;groupName&quot;:&quot;PENDING&quot;,&quot;id&quot;:26,&quot;name&quot;:&quot;PENDING_ACCEPTED&quot;},&quot;to&quot;:&quot;970597086266&quot;}\\]}\r\n\r\nThis response should be returned like this:\r\n\r\n```none\r\n groupId: 3\r\n        groupName: DELIVERED\r\n        id: 5\r\n        name: DELIVERED_TO_HANDSET\r\n        description: Message delivered to handset\r\n        action: null\r\n```","title":"I have a problem when try to send SMS to my mobile by INFOBIP","body":"<p>I have a problem when send SMS I get 200 http status but message is not received to my mobile.</p>\n<p>THIS MY CODE</p>\n<pre><code>        try {\n            // Create the connection to the Infobip API.\n            URL url = new URL(BASE_URL + &quot;/sms/2/text/advanced&quot;);\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n            connection.setRequestMethod(&quot;POST&quot;);\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;App &quot; + API_KEY);\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n            connection.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n//            connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.76&quot;);\n            connection.setDoOutput(true);\n\n            // Create the SMS message JSON payload.\n            String payload = String.format(&quot;{\\&quot;messages\\&quot;:[{\\&quot;from\\&quot;:\\&quot;%s\\&quot;,\\&quot;destinations\\&quot;:[{\\&quot;to\\&quot;:\\&quot;%s\\&quot;}],\\&quot;text\\&quot;:\\&quot;%s\\&quot;}]}&quot;,\n                    SENDER,\n                    RECIPIENT,\n                    MESSAGE_TEXT\n            );\n            // Write the payload to the request.\n            try (OutputStream os = connection.getOutputStream()) {\n                byte[] input = payload.getBytes(&quot;utf-8&quot;);\n                os.write(input, 0, input.length);\n            }\n\n            // Get the response from the API.\n            int responseCode = connection.getResponseCode();\n            System.out.println(&quot;Response Code: &quot; + responseCode);\n\n            if (responseCode == HttpURLConnection.HTTP_OK) {\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\n                    String line;\n                    StringBuilder response = new StringBuilder();\n                    while ((line = reader.readLine()) != null) {\n                        response.append(line);\n                    }\n                    System.out.println(&quot;Message sent successfully. Response Content: &quot; + response.toString());\n                }\n            } else {\n                // Print the response content for error requests.\n                // Similar to the success case, adjust the parsing and print the full response content.\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getErrorStream()))) {\n                    String line;\n                    StringBuilder response = new StringBuilder();\n                    while ((line = reader.readLine()) != null) {\n                        response.append(line);\n                    }\n                    System.out.println(&quot;Error sending message. Response Content: &quot; + response.toString());\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>Response Code: 200</p>\n<p>This is response:</p>\n<blockquote>\n<p>Message sent successfully. Response Content: {&quot;messages&quot;:[{&quot;messageId&quot;:&quot;3915723960824335774697&quot;,&quot;status&quot;:{&quot;description&quot;:&quot;Message sent to next instance&quot;,&quot;groupId&quot;:1,&quot;groupName&quot;:&quot;PENDING&quot;,&quot;id&quot;:26,&quot;name&quot;:&quot;PENDING_ACCEPTED&quot;},&quot;to&quot;:&quot;970597086266&quot;}]}</p>\n</blockquote>\n<p>This response should be returned like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code> groupId: 3\n        groupName: DELIVERED\n        id: 5\n        name: DELIVERED_TO_HANDSET\n        description: Message delivered to handset\n        action: null\n</code></pre>\n"},{"tags":["java","gradle"],"owner":{"account_id":26722059,"reputation":405,"user_id":20325718,"display_name":"YutaSaito"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691615375,"creation_date":1691615375,"question_id":76871289,"body_markdown":"I am using Gradle and add the jar in the lib directory to dependencies as follows.\r\n\r\n```grovy:build.gradle\r\ndependencies {\r\n\timplementation files(&#39;libs/foo.jar&#39;)\r\n}\r\n```\r\n\r\n\r\nBut the pom.xml dependencies inside the jar are not picked up.\r\nWhat should I do?","title":"I want to get the pom.xml dependencies in the local jar","body":"<p>I am using Gradle and add the jar in the lib directory to dependencies as follows.</p>\n<pre><code>dependencies {\n    implementation files('libs/foo.jar')\n}\n</code></pre>\n<p>But the pom.xml dependencies inside the jar are not picked up.\nWhat should I do?</p>\n"},{"tags":["java","spark-java"],"comments":[{"owner":{"account_id":9158524,"reputation":334,"user_id":6810709,"display_name":"rollno748"},"score":0,"creation_date":1691916466,"post_id":76867687,"comment_id":135553461,"body_markdown":"Issue resolved after removing unwanted groovy library in pom.xml","body":"Issue resolved after removing unwanted groovy library in pom.xml"}],"owner":{"account_id":9158524,"reputation":334,"user_id":6810709,"display_name":"rollno748"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691615300,"creation_date":1691583270,"question_id":76867687,"body_markdown":"I have the below code - which is configured to serve static web page within the package (src/main/resources/public)\r\n\r\nWhich is not working and i dont see any exception in the logs as well \r\n\r\n```\r\n public void startRestServer() {\r\n        try {\r\n            port(serverPort);\r\n//            staticFiles.location(System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/public/&quot;);\r\n            staticFiles.location(&quot;/public&quot;);\r\n            connectionPool = SQLiteConnectionPool.getInstance(fileServerLocation, MIN_THREADS, MAX_THREADS, TIMEOUT);\r\n            staticFiles.externalLocation(this.fileServerLocation);\r\n            init();\r\n            awaitInitialization();\r\n            loadRestApiServices();\r\n            LOGGER.debug(String.format(&quot;REST services started :: http://%s:%s%s/&quot;,\r\n                    InetAddress.getLocalHost().getHostAddress(), serverPort, uriPath));\r\n        } catch (Exception e) {\r\n            LOGGER.error(&quot;REST services failed to start&quot;, e);\r\n        }\r\n    }\r\n```\r\n\r\nI have API path configured below\r\n\r\n```\r\npublic void loadRestApiServices() {\r\n        UploadService uploadService = new UploadServiceImpl();\r\n        path(RestController.uriPath, () -&gt; {\r\n            before(&quot;/*&quot;, (req, res) -&gt; LOGGER.info(&quot;Received api call&quot;));\r\n\r\n            get(&quot;/greet&quot;, (req, res) -&gt; {\r\n                return &quot;Hello Work !&quot;;\r\n            });\r\n\r\n            post(&quot;/upload&quot;, (req, res) -&gt; {\r\n                JSONObject jsonObject = new JSONObject(req.body());\r\n                uploadService.uploadCustomPlugin(jsonObject);\r\n                return null;\r\n            });\r\n\r\n            after((req, res) -&gt; res.header(&quot;Content-Encoding&quot;, &quot;gzip&quot;));\r\n\r\n        });\r\n```\r\n\r\n[![enter image description here](https://i.stack.imgur.com/zkj8B.png)](https://i.stack.imgur.com/zkj8B.png)\r\n\r\n\r\n\r\nExpected result: \r\n\r\nI want it to serve the index.html to user - which is basically a post form, to upload files","title":"Unable to serve a static web page using Spark java framework","body":"<p>I have the below code - which is configured to serve static web page within the package (src/main/resources/public)</p>\n<p>Which is not working and i dont see any exception in the logs as well</p>\n<pre><code> public void startRestServer() {\n        try {\n            port(serverPort);\n//            staticFiles.location(System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/public/&quot;);\n            staticFiles.location(&quot;/public&quot;);\n            connectionPool = SQLiteConnectionPool.getInstance(fileServerLocation, MIN_THREADS, MAX_THREADS, TIMEOUT);\n            staticFiles.externalLocation(this.fileServerLocation);\n            init();\n            awaitInitialization();\n            loadRestApiServices();\n            LOGGER.debug(String.format(&quot;REST services started :: http://%s:%s%s/&quot;,\n                    InetAddress.getLocalHost().getHostAddress(), serverPort, uriPath));\n        } catch (Exception e) {\n            LOGGER.error(&quot;REST services failed to start&quot;, e);\n        }\n    }\n</code></pre>\n<p>I have API path configured below</p>\n<pre><code>public void loadRestApiServices() {\n        UploadService uploadService = new UploadServiceImpl();\n        path(RestController.uriPath, () -&gt; {\n            before(&quot;/*&quot;, (req, res) -&gt; LOGGER.info(&quot;Received api call&quot;));\n\n            get(&quot;/greet&quot;, (req, res) -&gt; {\n                return &quot;Hello Work !&quot;;\n            });\n\n            post(&quot;/upload&quot;, (req, res) -&gt; {\n                JSONObject jsonObject = new JSONObject(req.body());\n                uploadService.uploadCustomPlugin(jsonObject);\n                return null;\n            });\n\n            after((req, res) -&gt; res.header(&quot;Content-Encoding&quot;, &quot;gzip&quot;));\n\n        });\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zkj8B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zkj8B.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected result:</p>\n<p>I want it to serve the index.html to user - which is basically a post form, to upload files</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":42916,"reputation":22357,"user_id":125212,"accept_rate":52,"display_name":"Jackie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691614136,"creation_date":1691614136,"question_id":76871173,"body_markdown":"I have the following...\r\n\r\n```java\r\npublic class MyBootstrapInitializer implements BootstrapRegistryInitializer {\r\n    @Override\r\n    public void initialize(BootstrapRegistry registry) {\r\n        log.debug(&quot;Initializing BootstrapRegistry &quot;+registry.isRegistered(BootstrapItem.class));\r\n        registry.register(\r\n                BootstrapItem.class,\r\n                context -&gt; new BootstrapItem(&quot;Hello World&quot;)\r\n        );\r\n        if(!registry.isRegistered(BootstrapItem.class)) {\r\n            log.error(&quot;BootstrapRegistry not initialized&quot;);\r\n            throw new RuntimeException(&quot;BootstrapRegistry not initialized&quot;);\r\n        }\r\n        log.debug(&quot;BootstrapRegistry Initialized&quot;);\r\n    }\r\n}\r\n```\r\n\r\nAnd then I try to access it with the EventPostProcessor\r\n\r\n```java\r\npublic class BootstrapPostProcessor implements EnvironmentPostProcessor, Ordered {\r\n\r\n    private final ConfigurableBootstrapContext bootstrapContext;\r\n\r\n    public BootstrapPostProcessor(final ConfigurableBootstrapContext bootstrapContext) {\r\n        this.bootstrapContext = bootstrapContext;\r\n    }\r\n\r\n    @Override\r\n    public void postProcessEnvironment(\r\n            final ConfigurableEnvironment environment,\r\n            final SpringApplication application\r\n    ) {\r\n        log.error(&quot;Getting the Object&quot;);\r\n        BootstrapItem bootstrapItem = bootstrapContext.get(BootstrapItem.class);\r\n        log.error(&quot;Object message is: &quot;+ bootstrapItem.getMessage());\r\n    }\r\n\r\n    @Override\r\n    public int getOrder() {\r\n        return 0;\r\n    }\r\n}\r\n```\r\n\r\nBut when I run the context doesn&#39;t have the instanceSupplier. What am I missing?\r\n\r\n&gt;java.lang.IllegalStateException: ...BootstrapItem has not been registered\r\n\r\nI have also confirmed that the same type of BootstrapItem the same type in both places.\r\n","title":"Why is my object not showing up on the BootstrapContext after being registered with the BootstrapRegistry?","body":"<p>I have the following...</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyBootstrapInitializer implements BootstrapRegistryInitializer {\n    @Override\n    public void initialize(BootstrapRegistry registry) {\n        log.debug(&quot;Initializing BootstrapRegistry &quot;+registry.isRegistered(BootstrapItem.class));\n        registry.register(\n                BootstrapItem.class,\n                context -&gt; new BootstrapItem(&quot;Hello World&quot;)\n        );\n        if(!registry.isRegistered(BootstrapItem.class)) {\n            log.error(&quot;BootstrapRegistry not initialized&quot;);\n            throw new RuntimeException(&quot;BootstrapRegistry not initialized&quot;);\n        }\n        log.debug(&quot;BootstrapRegistry Initialized&quot;);\n    }\n}\n</code></pre>\n<p>And then I try to access it with the EventPostProcessor</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BootstrapPostProcessor implements EnvironmentPostProcessor, Ordered {\n\n    private final ConfigurableBootstrapContext bootstrapContext;\n\n    public BootstrapPostProcessor(final ConfigurableBootstrapContext bootstrapContext) {\n        this.bootstrapContext = bootstrapContext;\n    }\n\n    @Override\n    public void postProcessEnvironment(\n            final ConfigurableEnvironment environment,\n            final SpringApplication application\n    ) {\n        log.error(&quot;Getting the Object&quot;);\n        BootstrapItem bootstrapItem = bootstrapContext.get(BootstrapItem.class);\n        log.error(&quot;Object message is: &quot;+ bootstrapItem.getMessage());\n    }\n\n    @Override\n    public int getOrder() {\n        return 0;\n    }\n}\n</code></pre>\n<p>But when I run the context doesn't have the instanceSupplier. What am I missing?</p>\n<blockquote>\n<p>java.lang.IllegalStateException: ...BootstrapItem has not been registered</p>\n</blockquote>\n<p>I have also confirmed that the same type of BootstrapItem the same type in both places.</p>\n"},{"tags":["java","spring","mongodb","spring-data-mongodb"],"comments":[{"owner":{"account_id":12262607,"reputation":1364,"user_id":8949877,"display_name":"Harshit"},"score":2,"creation_date":1616731417,"post_id":66766935,"comment_id":118100519,"body_markdown":"Hi Michael, It&#39;s not possible with find query, you need to use aggregation to get that result.","body":"Hi Michael, It&#39;s not possible with find query, you need to use aggregation to get that result."}],"answers":[{"tags":[],"owner":{"account_id":2638471,"reputation":25855,"user_id":2282634,"display_name":"Joe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616838027,"creation_date":1616838027,"answer_id":66829885,"question_id":66766935,"body_markdown":"The returned `{&quot;$oid&quot;: &quot;5eb97a8139d4c62be4d90e4c&quot;}` is the [MongoDB Extended JSON](https://docs.mongodb.com/manual/reference/mongodb-extended-json/#bson.ObjectId) representation of an ObjectID.  \r\n\r\nIt is not returning a string because the field stored in the database is of type `ObjectID`, not type `String`.  \r\n\r\nIf you want it to return a string, you should use aggregation with the [$toString](https://docs.mongodb.com/manual/reference/operator/aggregation/toString/index.html#tostring-aggregation) operator to convert it.","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>The returned <code>{&quot;$oid&quot;: &quot;5eb97a8139d4c62be4d90e4c&quot;}</code> is the <a href=\"https://docs.mongodb.com/manual/reference/mongodb-extended-json/#bson.ObjectId\" rel=\"nofollow noreferrer\">MongoDB Extended JSON</a> representation of an ObjectID.</p>\n<p>It is not returning a string because the field stored in the database is of type <code>ObjectID</code>, not type <code>String</code>.</p>\n<p>If you want it to return a string, you should use aggregation with the <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/toString/index.html#tostring-aggregation\" rel=\"nofollow noreferrer\">$toString</a> operator to convert it.</p>\n"},{"tags":[],"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1616904728,"creation_date":1616864665,"answer_id":66833978,"question_id":66766935,"body_markdown":"**No, that&#39;s impossible what you are thinking.**\r\n\r\n**Reason :** **MongoDB** can only return **JSON Document**. You can include the fields that you want to be there.\r\n\r\nThis suggestion that you can follow :\r\n\r\nDTO Definition :\r\n\r\n    @Document(collection = &quot;Info&quot;)\r\n    public class Info  {\r\n    \r\n      @Id\r\n      private String id;\r\n      \r\n      private Integer count;\r\n      \r\n      private String type;\r\n      \r\n      // other fields and getters and setters\r\n    }\r\n\r\nSample Repository :\r\n\r\n    public interface InfoRepository extends MongoRepository&lt;Info, String&gt; {\r\n    \r\n       @Query(value=&quot;{ &#39;count&#39; : 0, &#39;type&#39; : &#39;binary&#39; }&quot;, fields=&quot;{ &#39;id&#39; : 1 }&quot;)\r\n       List&lt;Info&gt; getInfo();\r\n     \r\n    }\r\n\r\nSample Service class :\r\n\r\n    @Service\r\n    public class InfoService {\r\n    \r\n       @Autowired \r\n       private InfoRepository infoRepository;\r\n    \r\n       public List&lt;String&gt; getIds() {\r\n       \r\n          return infoRepository.getInfo()\r\n                          .stream()\r\n                          .map(Info::getId)\r\n                          .collect(Collectors.toList());    \r\n    \r\n       }\r\n    \r\n    }\r\n    \r\n     \r\n\r\n","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p><strong>No, that's impossible what you are thinking.</strong></p>\n<p><strong>Reason :</strong> <strong>MongoDB</strong> can only return <strong>JSON Document</strong>. You can include the fields that you want to be there.</p>\n<p>This suggestion that you can follow :</p>\n<p>DTO Definition :</p>\n<pre><code>@Document(collection = &quot;Info&quot;)\npublic class Info  {\n\n  @Id\n  private String id;\n  \n  private Integer count;\n  \n  private String type;\n  \n  // other fields and getters and setters\n}\n</code></pre>\n<p>Sample Repository :</p>\n<pre><code>public interface InfoRepository extends MongoRepository&lt;Info, String&gt; {\n\n   @Query(value=&quot;{ 'count' : 0, 'type' : 'binary' }&quot;, fields=&quot;{ 'id' : 1 }&quot;)\n   List&lt;Info&gt; getInfo();\n \n}\n</code></pre>\n<p>Sample Service class :</p>\n<pre><code>@Service\npublic class InfoService {\n\n   @Autowired \n   private InfoRepository infoRepository;\n\n   public List&lt;String&gt; getIds() {\n   \n      return infoRepository.getInfo()\n                      .stream()\n                      .map(Info::getId)\n                      .collect(Collectors.toList());    \n\n   }\n\n}\n\n \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5498156,"reputation":5143,"user_id":4368485,"display_name":"Dĵ ΝιΓΞΗΛψΚ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616917016,"creation_date":1616917016,"answer_id":66839310,"question_id":66766935,"body_markdown":"the best you can get back is a document with an array field with the found ids like this:\r\n```\r\n{\r\n\t&quot;ids&quot; : [\r\n\t\t&quot;606018909fb6351e4c34f964&quot;,\r\n\t\t&quot;606018909fb6351e4c34f965&quot;\r\n\t]\r\n}\r\n```\r\nwhich can be achieved with an aggregation query like so:\r\n```\r\ndb.Info.aggregate([\r\n    {\r\n        $match: {\r\n            count: 0,\r\n            type: &quot;binary&quot;\r\n        }\r\n    },\r\n    {\r\n        $project: { _id: { $toString: &quot;$_id&quot; } }\r\n    },\r\n    {\r\n        $group: {\r\n            _id: null,\r\n            ids: { $push: &quot;$_id&quot; }\r\n        }\r\n    },\r\n    {\r\n        $project: { _id: 0 }\r\n    }\r\n])\r\n```","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>the best you can get back is a document with an array field with the found ids like this:</p>\n<pre><code>{\n    &quot;ids&quot; : [\n        &quot;606018909fb6351e4c34f964&quot;,\n        &quot;606018909fb6351e4c34f965&quot;\n    ]\n}\n</code></pre>\n<p>which can be achieved with an aggregation query like so:</p>\n<pre><code>db.Info.aggregate([\n    {\n        $match: {\n            count: 0,\n            type: &quot;binary&quot;\n        }\n    },\n    {\n        $project: { _id: { $toString: &quot;$_id&quot; } }\n    },\n    {\n        $group: {\n            _id: null,\n            ids: { $push: &quot;$_id&quot; }\n        }\n    },\n    {\n        $project: { _id: 0 }\n    }\n])\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15057874,"reputation":9,"user_id":10867625,"display_name":"Senthil Kumar Krishnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617275147,"creation_date":1617275147,"answer_id":66903381,"question_id":66766935,"body_markdown":"I have 2 suggestions.\r\n\r\n**1. You can use JPA query instead of named query**\r\n\r\n        public interface InfoRepository extends MongoRepository&lt;Info, String&gt; {\r\n             List&lt;Info&gt; findByCountAndType(final Integer count, final String type);\r\n        }\r\n**2. Use java stream api in your business logic to collect all id as List from the above result.**\r\n\r\n        public class InfoServiceImpl {\r\n           @Autowired\r\n           private InfoRepository repository;\r\n\r\n           public String getIds(final String type, final Integer count) {\r\n               return repository.findByCountAndType(count, type)\r\n                      .stream()\r\n                      .map(Info::getId)\r\n                      .collect(Collectors.toList());\r\n           }\r\n\r\n","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>I have 2 suggestions.</p>\n<p><strong>1. You can use JPA query instead of named query</strong></p>\n<pre><code>    public interface InfoRepository extends MongoRepository&lt;Info, String&gt; {\n         List&lt;Info&gt; findByCountAndType(final Integer count, final String type);\n    }\n</code></pre>\n<p><strong>2. Use java stream api in your business logic to collect all id as List from the above result.</strong></p>\n<pre><code>    public class InfoServiceImpl {\n       @Autowired\n       private InfoRepository repository;\n\n       public String getIds(final String type, final Integer count) {\n           return repository.findByCountAndType(count, type)\n                  .stream()\n                  .map(Info::getId)\n                  .collect(Collectors.toList());\n       }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29177783,"reputation":1,"user_id":22352678,"display_name":"Dmitriy Chernykh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691613740,"creation_date":1691416895,"answer_id":76852481,"question_id":66766935,"body_markdown":"It is possible:\r\n\r\n    @Aggregation(pipeline = {&quot;{$match: {}} &quot; +\r\n            &quot;{$project: { _id: { $toString: $_id } }} &quot; +\r\n            &quot;{$group: {_id: null, ids: { $push: $_id }}} &quot; +\r\n            &quot;{$project: { _id: 1 }}&quot;})\r\n    List&lt;String&gt; getInfo();","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>It is possible:</p>\n<pre><code>@Aggregation(pipeline = {&quot;{$match: {}} &quot; +\n        &quot;{$project: { _id: { $toString: $_id } }} &quot; +\n        &quot;{$group: {_id: null, ids: { $push: $_id }}} &quot; +\n        &quot;{$project: { _id: 1 }}&quot;})\nList&lt;String&gt; getInfo();\n</code></pre>\n"}],"owner":{"account_id":1067937,"reputation":13238,"user_id":1067943,"accept_rate":65,"display_name":"Michael"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4693,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1691613740,"creation_date":1616515652,"question_id":66766935,"body_markdown":"I use Java spring and MongoDB repository in my project.\r\n\r\nHere is DTO definition:\r\n\r\n\t@Document(collection = &quot;Info&quot;)\r\n\tpublic class Info  {\r\n\r\n\t  String id,\r\n\t  Integer count,\r\n\t  String type\r\n\t  …\r\n\t}\r\n\r\nI need to return from the query a list of IDs where the count field not zero and type filed has &#39;binary&#39; text.\r\n\r\nHere how I try to implement it:\r\n\r\n    @Query(value=&quot;{ &#39;count&#39; : 0, &#39;type&#39; : &#39;binary&#39; }&quot;, fields=&quot;{ &#39;id&#39; : 1 }&quot;)\r\n    List&lt;String&gt; getInfo();\r\n\t\r\nI get this result from query above:\r\n\r\n\t0={&quot;_id&quot;: {&quot;$oid&quot;: &quot;5eb97a8139d4c62be4d90e4c&quot;}}\r\n\t1={&quot;_id&quot;: {&quot;$oid&quot;: &quot;3ec97a8127d4c60cb4d90e9e&quot;}}\r\n\t\r\nAnd I expect this result:\r\n\r\n\t{&quot;5eb97a8139d4c62be4d90e4c&quot;, &quot;3ec97a8127d4c60cb4d90e9e&quot;}\r\n\r\nSo as you can see I expect to get a list of id strings from the query above. \r\n\t\r\nAny idea what should I change in the query above to get the expected list of ids results? \t\r\n\t","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>I use Java spring and MongoDB repository in my project.</p>\n<p>Here is DTO definition:</p>\n<pre><code>@Document(collection = &quot;Info&quot;)\npublic class Info  {\n\n  String id,\n  Integer count,\n  String type\n  …\n}\n</code></pre>\n<p>I need to return from the query a list of IDs where the count field not zero and type filed has 'binary' text.</p>\n<p>Here how I try to implement it:</p>\n<pre><code>@Query(value=&quot;{ 'count' : 0, 'type' : 'binary' }&quot;, fields=&quot;{ 'id' : 1 }&quot;)\nList&lt;String&gt; getInfo();\n</code></pre>\n<p>I get this result from query above:</p>\n<pre><code>0={&quot;_id&quot;: {&quot;$oid&quot;: &quot;5eb97a8139d4c62be4d90e4c&quot;}}\n1={&quot;_id&quot;: {&quot;$oid&quot;: &quot;3ec97a8127d4c60cb4d90e9e&quot;}}\n</code></pre>\n<p>And I expect this result:</p>\n<pre><code>{&quot;5eb97a8139d4c62be4d90e4c&quot;, &quot;3ec97a8127d4c60cb4d90e9e&quot;}\n</code></pre>\n<p>So as you can see I expect to get a list of id strings from the query above.</p>\n<p>Any idea what should I change in the query above to get the expected list of ids results?</p>\n"},{"tags":["java","mysql","sql","spring"],"comments":[{"owner":{"account_id":197604,"reputation":3397,"user_id":441783,"accept_rate":68,"display_name":"hese"},"score":0,"creation_date":1307723542,"post_id":6272272,"comment_id":7372764,"body_markdown":"thanks! (i&#39;ve asked about 14 questions till now, half of which have no answers and I answered one or two of them myself. I have gone through all my posts a number of times to accept or vote all replies, and I dont know what more to do, or probably I am doing it the wrong way.)","body":"thanks! (i&#39;ve asked about 14 questions till now, half of which have no answers and I answered one or two of them myself. I have gone through all my posts a number of times to accept or vote all replies, and I dont know what more to do, or probably I am doing it the wrong way.)"},{"owner":{"account_id":60076,"reputation":8249,"user_id":179573,"accept_rate":100,"display_name":"abalogh"},"score":0,"creation_date":1307732855,"post_id":6272272,"comment_id":7375034,"body_markdown":"By the way, you are absolutely free to accept your own answers if after some time you found a solution.","body":"By the way, you are absolutely free to accept your own answers if after some time you found a solution."},{"owner":{"account_id":197604,"reputation":3397,"user_id":441783,"accept_rate":68,"display_name":"hese"},"score":0,"creation_date":1307973650,"post_id":6272272,"comment_id":7405077,"body_markdown":"@abalogh - great, thanks! I can accept my own answer?  I didnt know that!","body":"@abalogh - great, thanks! I can accept my own answer?  I didnt know that!"}],"answers":[{"comments":[{"owner":{"account_id":92140,"reputation":779,"user_id":252648,"display_name":"Turing"},"score":12,"creation_date":1392043548,"post_id":6310921,"comment_id":32773572,"body_markdown":"This solution does not seem valid for applications that can potentially update the db from multiple sources.","body":"This solution does not seem valid for applications that can potentially update the db from multiple sources."},{"owner":{"account_id":92537,"reputation":6275,"user_id":253575,"accept_rate":83,"display_name":"IcedDante"},"score":8,"creation_date":1457475427,"post_id":6310921,"comment_id":59421603,"body_markdown":"Wow- please never implement a solution this way","body":"Wow- please never implement a solution this way"}],"tags":[],"owner":{"account_id":60076,"reputation":8249,"user_id":179573,"accept_rate":100,"display_name":"abalogh"},"comment_count":2,"down_vote_count":11,"up_vote_count":5,"is_accepted":true,"score":-6,"last_activity_date":1307732522,"creation_date":1307732522,"answer_id":6310921,"question_id":6272272,"body_markdown":"There is no provided solution for this using `BatchSqlUpdate` as far as I know, but you can always\r\n\r\n - query the last key before the insert \r\n - using this information, query all new keys after the insert\r\n\r\n","title":"BatchSqlUpdate - how to get auto generated keys","body":"<p>There is no provided solution for this using <code>BatchSqlUpdate</code> as far as I know, but you can always</p>\n\n<ul>\n<li>query the last key before the insert </li>\n<li>using this information, query all new keys after the insert</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2932312,"reputation":1029,"user_id":2766687,"display_name":"Bruno Morais"},"score":0,"creation_date":1606150982,"post_id":15942268,"comment_id":114868132,"body_markdown":"For future readers, I do suggest take a look on Dean Thomsen complement.","body":"For future readers, I do suggest take a look on Dean Thomsen complement."},{"owner":{"account_id":4844268,"reputation":1484,"user_id":3908406,"display_name":"user3908406"},"score":0,"creation_date":1631067199,"post_id":15942268,"comment_id":122121014,"body_markdown":"what does the `abc` in `primaryKey.get(&quot;abc&quot;)` stand for?","body":"what does the <code>abc</code> in <code>primaryKey.get(&quot;abc&quot;)</code> stand for?"}],"tags":[],"owner":{"account_id":2620665,"reputation":131,"user_id":2268752,"display_name":"takeseem"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1691613720,"creation_date":1365662513,"answer_id":15942268,"question_id":6272272,"body_markdown":"This solution is merged from the implementations of [JdbcTemplate.update(PreparedStatementCreator, KeyHolder)](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#update(org.springframework.jdbc.core.PreparedStatementCreator,org.springframework.jdbc.support.KeyHolder)) and [JdbcTemplate.batchUpdate(String, BatchPreparedStatementSetter)](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#batchUpdate(java.lang.String,org.springframework.jdbc.core.BatchPreparedStatementSetter)) to allow having both batching and the generated keys.\r\n\r\nIn addition, we directly store the generated keys back to the beans where the inserted rows came from.\r\n\r\na template proc class:\r\n\r\n    public abstract class BatchPreparedStatementSetterWithKeyHolder&lt;T&gt; implements BatchPreparedStatementSetter {\r\n    \tprivate final List&lt;T&gt; beans;\r\n    \t\r\n    \t/**\r\n    \t * @param datas\r\n    \t * @param returnGeneratedKeys true设置{@linkplain Statement#RETURN_GENERATED_KEYS}\r\n    \t */\r\n    \tpublic BatchPreparedStatementSetterWithKeyHolder(List&lt;T&gt; beans) {\r\n    \t\tthis.beans = beans;\r\n    \t}\r\n    \t\r\n    \t\r\n    \t@Override\r\n    \tpublic void setValues(PreparedStatement ps, int i) throws SQLException {\r\n    \t\tsetValues(ps, beans.get(i));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic final int getBatchSize() {\r\n    \t\treturn beans.size();\r\n    \t}\r\n    \t\r\n    \tpublic void setPrimaryKey(KeyHolder keyHolder) {\r\n    \t\tList&lt;Map&lt;String, Object&gt;&gt; keys = keyHolder.getKeyList();\r\n    \t\tfor (int i = 0, len = keys.size(); i &lt; len; i++) {\r\n    \t\t\tsetPrimaryKey(keys.get(i), beans.get(i));\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprotected abstract void setValues(PreparedStatement ps, T bean) throws SQLException;\r\n    \tprotected abstract void setPrimaryKey(Map&lt;String, Object&gt; primaryKey, T bean);\r\n    }\r\n\r\na util method batchupdate:\r\n\r\n    private static void generatedKeys(PreparedStatement ps, KeyHolder keyHolder) throws SQLException {\r\n    \t\tList&lt;Map&lt;String, Object&gt;&gt; keys = keyHolder.getKeyList();\r\n    \t\tResultSet rs = ps.getGeneratedKeys();\r\n    \t\tif (rs == null) return;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tkeys.addAll(new RowMapperResultSetExtractor&lt;Map&lt;String, Object&gt;&gt;(new ColumnMapRowMapper(), 1).extractData(rs));\r\n    \t\t} finally {\r\n    \t\t\trs.close();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * 批量更新\r\n    \t * @param jdbcTemplate\r\n    \t * @param sql\r\n    \t * @param pss\r\n    \t * @param keyHolder 存储主键，如果要存储主键，就必须传入此对象\r\n    \t * @return sql执行结果\r\n    \t * @see JdbcTemplate#batchUpdate(String, org.springframework.jdbc.core.BatchPreparedStatementSetter)\r\n    \t */\r\n    \tpublic static &lt;T&gt; int[] batchUpdateWithKeyHolder(JdbcTemplate jdbcTemplate, final String sql, final BatchPreparedStatementSetterWithKeyHolder&lt;T&gt; pss) {\r\n    \t\treturn jdbcTemplate.execute(new PreparedStatementCreator() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic PreparedStatement createPreparedStatement(Connection con) throws SQLException {\r\n    \t\t\t\treturn con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\r\n    \t\t\t}\r\n    \t\t}, new PreparedStatementCallback&lt;int[]&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic int[] doInPreparedStatement(PreparedStatement ps) throws SQLException, DataAccessException {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tint batchSize = pss.getBatchSize();\r\n    \t\t\t\t\tInterruptibleBatchPreparedStatementSetter ipss =\r\n    \t\t\t\t\t\t\t(pss instanceof InterruptibleBatchPreparedStatementSetter ?\r\n    \t\t\t\t\t\t\t(InterruptibleBatchPreparedStatementSetter) pss : null);\r\n    \t\t\t\t\tint[] result;\r\n    \t\t\t\t\tKeyHolder keyHolder = new GeneratedKeyHolder();\r\n    \t\t\t\t\t\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tif (JdbcUtils.supportsBatchUpdates(ps.getConnection())) {\r\n    \t\t\t\t\t\t\tfor (int i = 0; i &lt; batchSize; i++) {\r\n    \t\t\t\t\t\t\t\tpss.setValues(ps, i);\r\n    \t\t\t\t\t\t\t\tif (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) break;\r\n    \t\t\t\t\t\t\t\tps.addBatch();\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\tresult = ps.executeBatch();\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\tgeneratedKeys(ps, keyHolder);\r\n    \t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\tList&lt;Integer&gt; rowsAffected = new ArrayList&lt;Integer&gt;();\r\n    \t\t\t\t\t\t\tfor (int i = 0; i &lt; batchSize; i++) {\r\n    \t\t\t\t\t\t\t\tpss.setValues(ps, i);\r\n    \t\t\t\t\t\t\t\tif (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) break;\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\trowsAffected.add(ps.executeUpdate());\r\n    \t\t\t\t\t\t\t\tgeneratedKeys(ps, keyHolder);\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\tresult =  rowsAffected.stream().mapToInt(Integer::intValue).toArray();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t} finally {\r\n    \t\t\t\t\t\tpss.setPrimaryKey(keyHolder);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t\r\n    \t\t\t\t\treturn result;\r\n    \t\t\t\t} finally {\r\n    \t\t\t\t\tif (pss instanceof ParameterDisposer) ((ParameterDisposer) pss).cleanupParameters();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n\r\ne.x:\r\n\r\n    UtilJdbc.batchUpdateWithKeyHolder(jdbcTemplate,\r\n    \t\t\t\t&quot;insert into tbe_vm_node (creator_id, host, ssh_ip, ssh_user, ssh_passwd)&quot; +\r\n    \t\t\t\t&quot; values (?, ?, ?, ?, ?)&quot;,\r\n    \t\t\t\tnew BatchPreparedStatementSetterWithKeyHolder&lt;VmNode&gt;(vmNodes) {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tprotected void setValues(PreparedStatement ps, VmNode vmNode) throws SQLException {\r\n    \t\t\t\t\t\tUtilJdbc.setValues(ps, vmNode.getCreatorId(), vmNode.getHost(),\r\n    \t\t\t\t\t\t\t\tvmNode.getSshIp(), vmNode.getSshUser(), vmNode.getSshPasswd());\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tprotected void setPrimaryKey(Map&lt;String, Object&gt; primaryKey, VmNode vmNode) {\r\n    \t\t\t\t\t\tvmNode.setId((Long) primaryKey.get(&quot;abc&quot;));\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});","title":"BatchSqlUpdate - how to get auto generated keys","body":"<p>This solution is merged from the implementations of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#update(org.springframework.jdbc.core.PreparedStatementCreator,org.springframework.jdbc.support.KeyHolder)\" rel=\"nofollow noreferrer\">JdbcTemplate.update(PreparedStatementCreator, KeyHolder)</a> and <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#batchUpdate(java.lang.String,org.springframework.jdbc.core.BatchPreparedStatementSetter)\" rel=\"nofollow noreferrer\">JdbcTemplate.batchUpdate(String, BatchPreparedStatementSetter)</a> to allow having both batching and the generated keys.</p>\n<p>In addition, we directly store the generated keys back to the beans where the inserted rows came from.</p>\n<p>a template proc class:</p>\n<pre><code>public abstract class BatchPreparedStatementSetterWithKeyHolder&lt;T&gt; implements BatchPreparedStatementSetter {\n    private final List&lt;T&gt; beans;\n    \n    /**\n     * @param datas\n     * @param returnGeneratedKeys true设置{@linkplain Statement#RETURN_GENERATED_KEYS}\n     */\n    public BatchPreparedStatementSetterWithKeyHolder(List&lt;T&gt; beans) {\n        this.beans = beans;\n    }\n    \n    \n    @Override\n    public void setValues(PreparedStatement ps, int i) throws SQLException {\n        setValues(ps, beans.get(i));\n    }\n\n    @Override\n    public final int getBatchSize() {\n        return beans.size();\n    }\n    \n    public void setPrimaryKey(KeyHolder keyHolder) {\n        List&lt;Map&lt;String, Object&gt;&gt; keys = keyHolder.getKeyList();\n        for (int i = 0, len = keys.size(); i &lt; len; i++) {\n            setPrimaryKey(keys.get(i), beans.get(i));\n        }\n    }\n\n    protected abstract void setValues(PreparedStatement ps, T bean) throws SQLException;\n    protected abstract void setPrimaryKey(Map&lt;String, Object&gt; primaryKey, T bean);\n}\n</code></pre>\n<p>a util method batchupdate:</p>\n<pre><code>private static void generatedKeys(PreparedStatement ps, KeyHolder keyHolder) throws SQLException {\n        List&lt;Map&lt;String, Object&gt;&gt; keys = keyHolder.getKeyList();\n        ResultSet rs = ps.getGeneratedKeys();\n        if (rs == null) return;\n        \n        try {\n            keys.addAll(new RowMapperResultSetExtractor&lt;Map&lt;String, Object&gt;&gt;(new ColumnMapRowMapper(), 1).extractData(rs));\n        } finally {\n            rs.close();\n        }\n    }\n    \n    /**\n     * 批量更新\n     * @param jdbcTemplate\n     * @param sql\n     * @param pss\n     * @param keyHolder 存储主键，如果要存储主键，就必须传入此对象\n     * @return sql执行结果\n     * @see JdbcTemplate#batchUpdate(String, org.springframework.jdbc.core.BatchPreparedStatementSetter)\n     */\n    public static &lt;T&gt; int[] batchUpdateWithKeyHolder(JdbcTemplate jdbcTemplate, final String sql, final BatchPreparedStatementSetterWithKeyHolder&lt;T&gt; pss) {\n        return jdbcTemplate.execute(new PreparedStatementCreator() {\n            @Override\n            public PreparedStatement createPreparedStatement(Connection con) throws SQLException {\n                return con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\n            }\n        }, new PreparedStatementCallback&lt;int[]&gt;() {\n            @Override\n            public int[] doInPreparedStatement(PreparedStatement ps) throws SQLException, DataAccessException {\n                try {\n                    int batchSize = pss.getBatchSize();\n                    InterruptibleBatchPreparedStatementSetter ipss =\n                            (pss instanceof InterruptibleBatchPreparedStatementSetter ?\n                            (InterruptibleBatchPreparedStatementSetter) pss : null);\n                    int[] result;\n                    KeyHolder keyHolder = new GeneratedKeyHolder();\n                    \n                    try {\n                        if (JdbcUtils.supportsBatchUpdates(ps.getConnection())) {\n                            for (int i = 0; i &lt; batchSize; i++) {\n                                pss.setValues(ps, i);\n                                if (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) break;\n                                ps.addBatch();\n                            }\n                            result = ps.executeBatch();\n                            \n                            generatedKeys(ps, keyHolder);\n                        } else {\n                            List&lt;Integer&gt; rowsAffected = new ArrayList&lt;Integer&gt;();\n                            for (int i = 0; i &lt; batchSize; i++) {\n                                pss.setValues(ps, i);\n                                if (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) break;\n                                \n                                rowsAffected.add(ps.executeUpdate());\n                                generatedKeys(ps, keyHolder);\n                            }\n                            \n                            result =  rowsAffected.stream().mapToInt(Integer::intValue).toArray();\n                        }\n                    } finally {\n                        pss.setPrimaryKey(keyHolder);\n                    }\n                    \n                    return result;\n                } finally {\n                    if (pss instanceof ParameterDisposer) ((ParameterDisposer) pss).cleanupParameters();\n                }\n            }\n        });\n    }\n</code></pre>\n<p>e.x:</p>\n<pre><code>UtilJdbc.batchUpdateWithKeyHolder(jdbcTemplate,\n                &quot;insert into tbe_vm_node (creator_id, host, ssh_ip, ssh_user, ssh_passwd)&quot; +\n                &quot; values (?, ?, ?, ?, ?)&quot;,\n                new BatchPreparedStatementSetterWithKeyHolder&lt;VmNode&gt;(vmNodes) {\n                    @Override\n                    protected void setValues(PreparedStatement ps, VmNode vmNode) throws SQLException {\n                        UtilJdbc.setValues(ps, vmNode.getCreatorId(), vmNode.getHost(),\n                                vmNode.getSshIp(), vmNode.getSshUser(), vmNode.getSshPasswd());\n                    }\n                    @Override\n                    protected void setPrimaryKey(Map&lt;String, Object&gt; primaryKey, VmNode vmNode) {\n                        vmNode.setId((Long) primaryKey.get(&quot;abc&quot;));\n                    }\n                });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1316033,"reputation":7855,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"score":1,"creation_date":1644484669,"post_id":58864221,"comment_id":125620835,"body_markdown":"This one won&#39;t do batches properly.  `updateByNamedParam` executes the statement immediately, it&#39;s not batched then.","body":"This one won&#39;t do batches properly.  <code>updateByNamedParam</code> executes the statement immediately, it&#39;s not batched then."}],"tags":[],"owner":{"account_id":3801446,"reputation":1793,"user_id":3154987,"display_name":"BrianC"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573758894,"creation_date":1573758894,"answer_id":58864221,"question_id":6272272,"body_markdown":"        KeyHolder keyHolder = new GeneratedKeyHolder();\r\n        BatchSqlUpdate updateBatch = new BatchSqlUpdate();\r\n        updateBatch.setSql(&quot;Some INSERT SQL&quot;);\r\n        updateBatch.setJdbcTemplate(jdbcTemp);\r\n        updateBatch.setReturnGeneratedKeys(true);\r\n        updateBatch.updateByNamedParam( paramsMap ,keyHolder);\r\n        updateBatch.flush();","title":"BatchSqlUpdate - how to get auto generated keys","body":"<pre><code>    KeyHolder keyHolder = new GeneratedKeyHolder();\n    BatchSqlUpdate updateBatch = new BatchSqlUpdate();\n    updateBatch.setSql(\"Some INSERT SQL\");\n    updateBatch.setJdbcTemplate(jdbcTemp);\n    updateBatch.setReturnGeneratedKeys(true);\n    updateBatch.updateByNamedParam( paramsMap ,keyHolder);\n    updateBatch.flush();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4239388,"reputation":341,"user_id":3469728,"display_name":"helenov"},"score":0,"creation_date":1611768165,"post_id":59549979,"comment_id":116558731,"body_markdown":"You should not referer to another answer in you own.  It should be either a complete one or a comment suggesting an edition in the refered answer.","body":"You should not referer to another answer in you own.  It should be either a complete one or a comment suggesting an edition in the refered answer."}],"tags":[],"owner":{"account_id":1445733,"reputation":149,"user_id":1364290,"display_name":"Dean Thomsen"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1577852642,"creation_date":1577852642,"answer_id":59549979,"question_id":6272272,"body_markdown":"Thanks for the provided solution, I implemented that and it worked great. However, you have references to private classes (UtilIo, UtilObj) where I had to interpret what you were doing. I replaced &quot;UtilIO.close(rs);&quot; with:\r\n\r\n    if (rs != null) {\r\n        rs.close();\r\n    }\r\n\r\nAnd I replaced &quot;result = UtilObj.tointArray(rowsAffected);&quot; with this Java 8 code:\r\n\r\n    result = rowsAffected.stream().mapToInt(Integer::intValue).toArray();","title":"BatchSqlUpdate - how to get auto generated keys","body":"<p>Thanks for the provided solution, I implemented that and it worked great. However, you have references to private classes (UtilIo, UtilObj) where I had to interpret what you were doing. I replaced \"UtilIO.close(rs);\" with:</p>\n\n<pre><code>if (rs != null) {\n    rs.close();\n}\n</code></pre>\n\n<p>And I replaced \"result = UtilObj.tointArray(rowsAffected);\" with this Java 8 code:</p>\n\n<pre><code>result = rowsAffected.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n"}],"owner":{"account_id":197604,"reputation":3397,"user_id":441783,"accept_rate":68,"display_name":"hese"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14902,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":6310921,"answer_count":4,"score":17,"last_activity_date":1691613720,"creation_date":1307485161,"question_id":6272272,"body_markdown":"I am using spring BatchSqlUpdate to insert a set of rows.  How do I get the auto generated keys for all of the rows inserted?\r\n\r\nWhen doing a single insert I get the keys like this - \r\n\r\n    SqlUpdate sqlUpdate = new SqlUpdate(dataSource, sqlTemplate.toString());\r\n    sqlUpdate.setReturnGeneratedKeys(true);\r\n    KeyHolder keyHolder = new GeneratedKeyHolder();\r\n    sqlUpdate.update(new Object[] {}, keyHolder);\r\n    return keyHolder.getKey().longValue();\r\n\r\nThanks!\r\n\r\n","title":"BatchSqlUpdate - how to get auto generated keys","body":"<p>I am using spring BatchSqlUpdate to insert a set of rows.  How do I get the auto generated keys for all of the rows inserted?</p>\n\n<p>When doing a single insert I get the keys like this - </p>\n\n<pre><code>SqlUpdate sqlUpdate = new SqlUpdate(dataSource, sqlTemplate.toString());\nsqlUpdate.setReturnGeneratedKeys(true);\nKeyHolder keyHolder = new GeneratedKeyHolder();\nsqlUpdate.update(new Object[] {}, keyHolder);\nreturn keyHolder.getKey().longValue();\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["java","json","spring-boot","rest","response"],"comments":[{"owner":{"account_id":3837785,"reputation":277,"user_id":3181718,"display_name":"jr593"},"score":0,"creation_date":1602495696,"post_id":64315219,"comment_id":113728648,"body_markdown":"Please explain what you have tried so far, thanks","body":"Please explain what you have tried so far, thanks"},{"owner":{"account_id":4079098,"reputation":883,"user_id":3349973,"accept_rate":33,"display_name":"Sajjad"},"score":0,"creation_date":1602496120,"post_id":64315219,"comment_id":113728839,"body_markdown":"Have a look at`HttpClient`. You can use `sendAsync` to call `processRequest`. Once the `id` is returned, you can call `getResponse(jobId)`.","body":"Have a look at<code>HttpClient</code>. You can use <code>sendAsync</code> to call <code>processRequest</code>. Once the <code>id</code> is returned, you can call <code>getResponse(jobId)</code>."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692085057,"post_id":76871008,"comment_id":135573533,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76871008/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29194660,"reputation":1,"user_id":22366059,"display_name":"testotp mail"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691612417,"creation_date":1691612417,"answer_id":76871008,"question_id":64315219,"body_markdown":"Try to store the request id in database and wait for the response by polling the database.\r\n\r\nLike the request api may be in wait state and the response api will update the db with the request id","title":"How to send Response or status of request using springboot-rest api","body":"<p>Try to store the request id in database and wait for the response by polling the database.</p>\n<p>Like the request api may be in wait state and the response api will update the db with the request id</p>\n"}],"owner":{"account_id":15608701,"reputation":171,"user_id":11260746,"display_name":"Rubeena"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691612417,"creation_date":1602495207,"question_id":64315219,"body_markdown":"I have two rest webservice in my applcation as below(using spring-boot rest api)\r\n\r\n1- public **void processRequest(Request)** - This is asynch webservice to process the request, This will return id of request to client with acknowledgement.\r\n\r\n2- public **Response getResponse(jobid)** - This webservice should return the response of the request generated by ProcessRequest.\r\nhere i want to send the status if request is not ready yet.\r\n\r\nIs there any way to achieve above requirement?","title":"How to send Response or status of request using springboot-rest api","body":"<p>I have two rest webservice in my applcation as below(using spring-boot rest api)</p>\n<p>1- public <strong>void processRequest(Request)</strong> - This is asynch webservice to process the request, This will return id of request to client with acknowledgement.</p>\n<p>2- public <strong>Response getResponse(jobid)</strong> - This webservice should return the response of the request generated by ProcessRequest.\nhere i want to send the status if request is not ready yet.</p>\n<p>Is there any way to achieve above requirement?</p>\n"},{"tags":["java","enums","openapi-generator"],"comments":[{"owner":{"account_id":326480,"reputation":368,"user_id":5047819,"display_name":"Anders Lindgren"},"score":0,"creation_date":1691697473,"post_id":76870979,"comment_id":135530416,"body_markdown":"Have you tested the `enumUnknownDefaultCase`? It seems like a perfekt match for your problem. https://openapi-generator.tech/docs/generators/java","body":"Have you tested the <code>enumUnknownDefaultCase</code>? It seems like a perfekt match for your problem. <a href=\"https://openapi-generator.tech/docs/generators/java\" rel=\"nofollow noreferrer\">openapi-generator.tech/docs/generators/java</a>"}],"owner":{"account_id":92537,"reputation":6275,"user_id":253575,"accept_rate":83,"display_name":"IcedDante"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691612058,"creation_date":1691612058,"question_id":76870979,"body_markdown":"I am using the openapi-generator-maven-plugin to scaffold clients in our Spring Boot application. It uses these generated artifacts to connect with 3rd party apis. It works well except one server has been making frequent changes to a string enum value. The format in the open-api definition is something like:\r\n```\r\n&quot;type&quot;: {\r\n  &quot;type&quot;: &quot;string&quot;,\r\n  &quot;enum&quot;: [\r\n    &quot;PARLAY&quot;,\r\n    &quot;STRAIGHT&quot;,\r\n    &quot;FUTURE&quot;,\r\n    &quot;TABLE&quot;,\r\n    &quot;SLOT&quot;\r\n  ]\r\n}\r\n```\r\nOnce the POJO that corresponds the Schema type is generated this is somewhat reasonable rendered as an Enum:\r\n\r\n```\r\npublic enum LedgerEntryReasonEnum {\r\n   PARLAY(&quot;PARLAY&quot;),\r\n   STRAIGHT(&quot;STRAIGHT&quot;),\r\n   FUTURE(&quot;FUTURE&quot;),\r\n   TABLE(&quot;TABLE&quot;)\r\n}\r\n```\r\nThe problem is any changes here, such as new or renamed values break our system in prod. Because of the specifics of our operational excellence we choose not to worry about this specific field but rather, treat **all** enums as strings to avoid the risk of introducing a regression.\r\n\r\nIs there a way to configure the open-api configuration to set up type mappings for enums to String? Here is what my current configuration looks like:\r\n```\r\n&lt;configuration&gt;\r\n\t&lt;inputSpec&gt;${project.basedir}/src/main/resources/third-party-api.json&lt;/inputSpec&gt;\r\n\t&lt;generatorName&gt;java&lt;/generatorName&gt;\r\n\t&lt;library&gt;webclient&lt;/library&gt;\r\n\t&lt;apiPackage&gt;integrations.thirdparty.api&lt;/apiPackage&gt;\r\n\t&lt;invokerPackage&gt;integrations.thirdparty.invoker&lt;/invokerPackage&gt;\r\n\t&lt;modelPackage&gt;integrations.thirdparty.model&lt;/modelPackage&gt;\r\n\t&lt;output&gt;${project.build.directory}/generated-sources/&lt;/output&gt;\r\n\t&lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\r\n\t&lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n\t&lt;skipIfSpecIsUnchanged&gt;true&lt;/skipIfSpecIsUnchanged&gt;\r\n\t&lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\r\n\t&lt;configOptions&gt;\r\n\t\t&lt;sourceFolder&gt;.&lt;/sourceFolder&gt;\r\n\t&lt;/configOptions&gt;\r\n&lt;/configuration&gt;\r\n```","title":"OpenApi Codegen","body":"<p>I am using the openapi-generator-maven-plugin to scaffold clients in our Spring Boot application. It uses these generated artifacts to connect with 3rd party apis. It works well except one server has been making frequent changes to a string enum value. The format in the open-api definition is something like:</p>\n<pre><code>&quot;type&quot;: {\n  &quot;type&quot;: &quot;string&quot;,\n  &quot;enum&quot;: [\n    &quot;PARLAY&quot;,\n    &quot;STRAIGHT&quot;,\n    &quot;FUTURE&quot;,\n    &quot;TABLE&quot;,\n    &quot;SLOT&quot;\n  ]\n}\n</code></pre>\n<p>Once the POJO that corresponds the Schema type is generated this is somewhat reasonable rendered as an Enum:</p>\n<pre><code>public enum LedgerEntryReasonEnum {\n   PARLAY(&quot;PARLAY&quot;),\n   STRAIGHT(&quot;STRAIGHT&quot;),\n   FUTURE(&quot;FUTURE&quot;),\n   TABLE(&quot;TABLE&quot;)\n}\n</code></pre>\n<p>The problem is any changes here, such as new or renamed values break our system in prod. Because of the specifics of our operational excellence we choose not to worry about this specific field but rather, treat <strong>all</strong> enums as strings to avoid the risk of introducing a regression.</p>\n<p>Is there a way to configure the open-api configuration to set up type mappings for enums to String? Here is what my current configuration looks like:</p>\n<pre><code>&lt;configuration&gt;\n    &lt;inputSpec&gt;${project.basedir}/src/main/resources/third-party-api.json&lt;/inputSpec&gt;\n    &lt;generatorName&gt;java&lt;/generatorName&gt;\n    &lt;library&gt;webclient&lt;/library&gt;\n    &lt;apiPackage&gt;integrations.thirdparty.api&lt;/apiPackage&gt;\n    &lt;invokerPackage&gt;integrations.thirdparty.invoker&lt;/invokerPackage&gt;\n    &lt;modelPackage&gt;integrations.thirdparty.model&lt;/modelPackage&gt;\n    &lt;output&gt;${project.build.directory}/generated-sources/&lt;/output&gt;\n    &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\n    &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n    &lt;skipIfSpecIsUnchanged&gt;true&lt;/skipIfSpecIsUnchanged&gt;\n    &lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\n    &lt;configOptions&gt;\n        &lt;sourceFolder&gt;.&lt;/sourceFolder&gt;\n    &lt;/configOptions&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1691616436,"post_id":76870890,"comment_id":135517344,"body_markdown":"What are you trying to do? Sounds like a [xy problem](https://xyproblem.info/). Can you add your code as a [mcve]?","body":"What are you trying to do? Sounds like a <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">xy problem</a>. Can you add your code as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1691621453,"post_id":76870890,"comment_id":135518021,"body_markdown":"Instead of hooping through the &quot;Generate Class -&gt; work on it reflectively&quot;, consider using a `Map&lt;String, Object&gt;`.","body":"Instead of hooping through the &quot;Generate Class -&gt; work on it reflectively&quot;, consider using a <code>Map&lt;String, Object&gt;</code>."},{"owner":{"account_id":28695516,"reputation":1,"user_id":21973821,"display_name":"wyattfff"},"score":1,"creation_date":1692806150,"post_id":76870890,"comment_id":135675182,"body_markdown":"@Robert The software I am working on consists of ~40 copies of nearly-identical code, where the general flow is SQL query -&gt; conditional formatting -&gt; print to txt file. The only places that these pieces of code differ is the SQL query, the conditions applied, and the order of output fields. My goal is to eliminate this duplication by defining the conditions and field order in a &quot;template&quot; csv file. To that end, I am generating an entity class that maps the SQL query results to field names in the output, then passing the entities to a printer class that reads the template and print accordingly","body":"@Robert The software I am working on consists of ~40 copies of nearly-identical code, where the general flow is SQL query -&gt; conditional formatting -&gt; print to txt file. The only places that these pieces of code differ is the SQL query, the conditions applied, and the order of output fields. My goal is to eliminate this duplication by defining the conditions and field order in a &quot;template&quot; csv file. To that end, I am generating an entity class that maps the SQL query results to field names in the output, then passing the entities to a printer class that reads the template and print accordingly"},{"owner":{"account_id":28695516,"reputation":1,"user_id":21973821,"display_name":"wyattfff"},"score":0,"creation_date":1692806380,"post_id":76870890,"comment_id":135675233,"body_markdown":"@JohannesKuhn I am currently iterating through the members of the class because the order is important, I rely on the data being in a specific order. I could potentially use a LinkedHashMap, though I&#39;m not sure that that would resolve my current issue.","body":"@JohannesKuhn I am currently iterating through the members of the class because the order is important, I rely on the data being in a specific order. I could potentially use a LinkedHashMap, though I&#39;m not sure that that would resolve my current issue."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1692808172,"post_id":76870890,"comment_id":135675575,"body_markdown":"Fields in a class do not have an order, so they are the wrong tool in that case.","body":"Fields in a class do not have an order, so they are the wrong tool in that case."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1692839304,"post_id":76870890,"comment_id":135679856,"body_markdown":"If you are not doing anything with the fields, just formatting them, can you get away with not having a data object and instead just put everything in a hash and use a templating system for the final output?","body":"If you are not doing anything with the fields, just formatting them, can you get away with not having a data object and instead just put everything in a hash and use a templating system for the final output?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692885382,"post_id":76870890,"comment_id":135687113,"body_markdown":"Obviously, a `LinkedHashMap` would do but if you have to process a lot of rows it would be more efficient to have a single `List&lt;String&gt;` for the column names (which never change while processing a table) and a `List&lt;Object&gt;` for each row holding the values with indices corresponding to the column name list. But maybe, you can drop the over-engineered abstraction layers and just implement a loop over the `ResultSet`, performing the formatting and writing to the text file. Makes a total of 100 to 200 lines of code, depending on the complexity of the actual formatting. No code generation needed.","body":"Obviously, a <code>LinkedHashMap</code> would do but if you have to process a lot of rows it would be more efficient to have a single <code>List&lt;String&gt;</code> for the column names (which never change while processing a table) and a <code>List&lt;Object&gt;</code> for each row holding the values with indices corresponding to the column name list. But maybe, you can drop the over-engineered abstraction layers and just implement a loop over the <code>ResultSet</code>, performing the formatting and writing to the text file. Makes a total of 100 to 200 lines of code, depending on the complexity of the actual formatting. No code generation needed."}],"owner":{"account_id":28695516,"reputation":1,"user_id":21973821,"display_name":"wyattfff"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691611830,"creation_date":1691610984,"question_id":76870890,"body_markdown":"I&#39;m trying to load a class dynamically and iterate through the declared fields within it. I&#39;m finding that occasionally, a field that I have recently added to the dynamically loaded class is missing.\r\n\r\nThe catch (and yes, I understand this is not really best practice) is that the dynamically loaded class is modified by the program just before it is loaded. \r\n\r\nSpecifically:\r\n1. A &quot;template&quot; (for lack of a better word) .csv file is read (this can be updated in between runs of the program)\r\n2. A POJO class is generated based on that template (this is the class we want to dynamically load, and should be re-written on each run to reflect changes in the template)\r\n3. A `Class` object is created based on the full qualified name of the class we just made\r\n4. We iterate through the declared fields within the class. \r\n\r\nI&#39;ve tried making the function that actually generates the POJO class return a value to ensure that everything is running in order (not that that would ever happen but at this point I&#39;m deeply lost). \r\n\r\nI&#39;ve also tried deleting the POJO entirely between runs of the program, to no avail.\r\n\r\nThe only potential resolution that I&#39;ve found is running the whole program twice in a row, which seems to somehow make the changes to the POJO class fully settle.\r\n\r\nThis seems to indicate that in some way, when I load the generated class based on the qualified name, the previous version of the class (prior to any edits to the template) is loaded. \r\nThe real question is why? Is it possible to ensure that I am loading the absolute most recent version of a class?","title":"Dynamically loaded class missing members at runtime","body":"<p>I'm trying to load a class dynamically and iterate through the declared fields within it. I'm finding that occasionally, a field that I have recently added to the dynamically loaded class is missing.</p>\n<p>The catch (and yes, I understand this is not really best practice) is that the dynamically loaded class is modified by the program just before it is loaded.</p>\n<p>Specifically:</p>\n<ol>\n<li>A &quot;template&quot; (for lack of a better word) .csv file is read (this can be updated in between runs of the program)</li>\n<li>A POJO class is generated based on that template (this is the class we want to dynamically load, and should be re-written on each run to reflect changes in the template)</li>\n<li>A <code>Class</code> object is created based on the full qualified name of the class we just made</li>\n<li>We iterate through the declared fields within the class.</li>\n</ol>\n<p>I've tried making the function that actually generates the POJO class return a value to ensure that everything is running in order (not that that would ever happen but at this point I'm deeply lost).</p>\n<p>I've also tried deleting the POJO entirely between runs of the program, to no avail.</p>\n<p>The only potential resolution that I've found is running the whole program twice in a row, which seems to somehow make the changes to the POJO class fully settle.</p>\n<p>This seems to indicate that in some way, when I load the generated class based on the qualified name, the previous version of the class (prior to any edits to the template) is loaded.\nThe real question is why? Is it possible to ensure that I am loading the absolute most recent version of a class?</p>\n"},{"tags":["java","eclipse","junit","junit4"],"comments":[{"owner":{"account_id":28952,"reputation":13127,"user_id":77804,"accept_rate":55,"display_name":"phtrivier"},"score":1,"creation_date":1267089654,"post_id":2332832,"comment_id":2303167,"body_markdown":"Can you post the content of your test (or at least the class declaration). Also you wrote &quot;at the end have :&quot; with nothing else.","body":"Can you post the content of your test (or at least the class declaration). Also you wrote &quot;at the end have :&quot; with nothing else."},{"owner":{"account_id":5100086,"reputation":1138,"user_id":4089957,"display_name":"prasad vsv"},"score":0,"creation_date":1427794101,"post_id":2332832,"comment_id":46913246,"body_markdown":"check this one.. it should help  http://stackoverflow.com/questions/22469480/junit-no-tests-found","body":"check this one.. it should help  <a href=\"http://stackoverflow.com/questions/22469480/junit-no-tests-found\">stackoverflow.com/questions/22469480/junit-no-tests-found</a>"},{"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"score":0,"creation_date":1523727706,"post_id":2332832,"comment_id":86683933,"body_markdown":"For **junit 5** see [here](https://stackoverflow.com/a/49834357/234110)","body":"For <b>junit 5</b> see <a href=\"https://stackoverflow.com/a/49834357/234110\">here</a>"}],"answers":[{"comments":[{"owner":{"account_id":105295,"reputation":1351,"user_id":281070,"accept_rate":0,"display_name":"user281070"},"score":0,"creation_date":1267090156,"post_id":2332870,"comment_id":2303224,"body_markdown":"I do not understand, I do not think that it is related to eclispe version , my test worked yesterday \nand not the case now because of Junit launch popup \nis there a way to restet to my first configuration ?","body":"I do not understand, I do not think that it is related to eclispe version , my test worked yesterday  and not the case now because of Junit launch popup  is there a way to restet to my first configuration ?"},{"owner":{"account_id":42322,"reputation":9431,"user_id":123266,"accept_rate":100,"display_name":"b.roth"},"score":0,"creation_date":1267090490,"post_id":2332870,"comment_id":2303258,"body_markdown":"Lamisse, I&#39;m confused too. I suggest that you update your question to explain when the unit test run works and when it does not work.","body":"Lamisse, I&#39;m confused too. I suggest that you update your question to explain when the unit test run works and when it does not work."}],"tags":[],"owner":{"account_id":42322,"reputation":9431,"user_id":123266,"accept_rate":100,"display_name":"b.roth"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267089724,"creation_date":1267089724,"answer_id":2332870,"question_id":2332832,"body_markdown":"Is your Eclipse project maven based? If so, you may need to update the m2eclipse version. \r\n\r\n&gt; Just a quick note: I have a project in\r\n&gt; Eclipse which is maven-based, and\r\n&gt; generated initially using the &quot;new\r\n&gt; maven project&quot; wizard in Eclipse. I&#39;m\r\n&gt; using JUnit 4.5 for the unit tests,\r\n&gt; and could quite happily run the tests\r\n&gt; from the command line using maven, and\r\n&gt; individual tests from Eclipse using\r\n&gt; run as JUnit test.... However, when I\r\n&gt; tried to run all of the tests in the\r\n&gt; project by invoking run as JUnit\r\n&gt; test... on the project root node,\r\n&gt; Eclipse complained &quot;**no tests found\r\n&gt; with test runner junit 4**&quot;. Solved by\r\n&gt; upgrading m2eclipse to the latest\r\n&gt; stable development build from the\r\n&gt; m2eclipse update site (specifically, I\r\n&gt; upgraded from version\r\n&gt; 0.9.8.200905041414 to version 0.9.9.200907201116 in Eclipse Galileo).\r\n\r\nFrom here: [http://nuin.blogspot.com/2009/07/m2eclipse-and-junit4-no-tests-found.html][1]\r\n\r\n\r\n  [1]: http://nuin.blogspot.com/2009/07/m2eclipse-and-junit4-no-tests-found.html","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Is your Eclipse project maven based? If so, you may need to update the m2eclipse version. </p>\n\n<blockquote>\n  <p>Just a quick note: I have a project in\n  Eclipse which is maven-based, and\n  generated initially using the \"new\n  maven project\" wizard in Eclipse. I'm\n  using JUnit 4.5 for the unit tests,\n  and could quite happily run the tests\n  from the command line using maven, and\n  individual tests from Eclipse using\n  run as JUnit test.... However, when I\n  tried to run all of the tests in the\n  project by invoking run as JUnit\n  test... on the project root node,\n  Eclipse complained \"<strong>no tests found\n  with test runner junit 4</strong>\". Solved by\n  upgrading m2eclipse to the latest\n  stable development build from the\n  m2eclipse update site (specifically, I\n  upgraded from version\n  0.9.8.200905041414 to version 0.9.9.200907201116 in Eclipse Galileo).</p>\n</blockquote>\n\n<p>From here: <a href=\"http://nuin.blogspot.com/2009/07/m2eclipse-and-junit4-no-tests-found.html\" rel=\"nofollow noreferrer\">http://nuin.blogspot.com/2009/07/m2eclipse-and-junit4-no-tests-found.html</a></p>\n"},{"comments":[{"owner":{"account_id":105295,"reputation":1351,"user_id":281070,"accept_rate":0,"display_name":"user281070"},"score":0,"creation_date":1267091676,"post_id":2333018,"comment_id":2303374,"body_markdown":"@Test is here, the message is : could not faind main class toto.lolo.testrunner (which is specified in the run configuration )","body":"@Test is here, the message is : could not faind main class toto.lolo.testrunner (which is specified in the run configuration )"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1267092328,"post_id":2333018,"comment_id":2303443,"body_markdown":"@lamisse: so, some kind of classpath issue? or a syntex issue: it should be `toto.lolo.Testrunner` and not `toto.lolo.testrunner` (&#39;T&#39;)","body":"@lamisse: so, some kind of classpath issue? or a syntex issue: it should be <code>toto.lolo.Testrunner</code> and not <code>toto.lolo.testrunner</code> (&#39;T&#39;)"},{"owner":{"account_id":28952,"reputation":13127,"user_id":77804,"accept_rate":55,"display_name":"phtrivier"},"score":0,"creation_date":1267093010,"post_id":2333018,"comment_id":2303505,"body_markdown":"@lamisse : is &quot;toto.lolo.Testrunner&quot; the actual name of your TestRunner class ? Is it something you wrote ? Is the project / jar containing it in the classpath of your launch configuration ?","body":"@lamisse : is &quot;toto.lolo.Testrunner&quot; the actual name of your TestRunner class ? Is it something you wrote ? Is the project / jar containing it in the classpath of your launch configuration ?"}],"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1267091171,"creation_date":1267091171,"answer_id":2333018,"question_id":2332832,"body_markdown":"May be your JUnit launch configuration was for a individual test class, and you somehow changed that config to &quot;run all tests in a source folder, package or project&quot;\r\n\r\nBut that could trigger the &quot;No tests found with test runner &#39;JUnit 4&#39;&quot; error message.\r\n\r\nOr you did a modification in your test class, removing the `@Test` annotation.  \r\nSee this [wiki page][1].\r\n\r\n\r\n  [1]: http://java.syntaxerrors.info/index.php?title=No_tests_found_with_test_runner_JUnit4","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>May be your JUnit launch configuration was for a individual test class, and you somehow changed that config to \"run all tests in a source folder, package or project\"</p>\n\n<p>But that could trigger the \"No tests found with test runner 'JUnit 4'\" error message.</p>\n\n<p>Or you did a modification in your test class, removing the <code>@Test</code> annotation.<br>\nSee this <a href=\"http://java.syntaxerrors.info/index.php?title=No_tests_found_with_test_runner_JUnit4\" rel=\"nofollow noreferrer\">wiki page</a>.</p>\n"},{"comments":[{"owner":{"account_id":165926,"reputation":672,"user_id":389736,"accept_rate":25,"display_name":"Thien"},"score":1,"creation_date":1288985836,"post_id":2346309,"comment_id":4424436,"body_markdown":"Yep worked for me too and agree with dlamblin. Good reminder to always try restarting for any odd problem that can&#39;t be solved in the first 5 minutes of prodding.","body":"Yep worked for me too and agree with dlamblin. Good reminder to always try restarting for any odd problem that can&#39;t be solved in the first 5 minutes of prodding."},{"owner":{"account_id":102727,"reputation":13979,"user_id":275581,"accept_rate":92,"display_name":"metamatt"},"score":3,"creation_date":1299036705,"post_id":2346309,"comment_id":5798131,"body_markdown":"I had this problem, and I closed the source file where I&#39;d defined my test class, double-clicked on that file in the navigator, and it worked. So closing and reopening the file worked, without restarting Eclipse.","body":"I had this problem, and I closed the source file where I&#39;d defined my test class, double-clicked on that file in the navigator, and it worked. So closing and reopening the file worked, without restarting Eclipse."},{"owner":{"account_id":89355,"reputation":618,"user_id":246588,"accept_rate":100,"display_name":"Seth M."},"score":12,"creation_date":1299072412,"post_id":2346309,"comment_id":5804098,"body_markdown":"this really makes me want to look for a new IDE.  this worked for me.","body":"this really makes me want to look for a new IDE.  this worked for me."},{"owner":{"account_id":1066649,"reputation":617,"user_id":1067039,"accept_rate":100,"display_name":"Martin Charlesworth"},"score":2,"creation_date":1362529362,"post_id":2346309,"comment_id":21482923,"body_markdown":"closing and reopeneing the project fixed it for me!","body":"closing and reopeneing the project fixed it for me!"}],"tags":[],"owner":{"account_id":22179,"reputation":792,"user_id":54449,"accept_rate":100,"display_name":"JamesG"},"comment_count":4,"down_vote_count":3,"up_vote_count":49,"is_accepted":false,"score":46,"last_activity_date":1267247463,"creation_date":1267247463,"answer_id":2346309,"question_id":2332832,"body_markdown":"When we get these errors it seems like Eclipse is just confused.  Restart Eclipse, refresh the project, clean it, let Eclipse rebuild it, and try again.  Most times that works like a charm.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>When we get these errors it seems like Eclipse is just confused.  Restart Eclipse, refresh the project, clean it, let Eclipse rebuild it, and try again.  Most times that works like a charm.</p>\n"},{"comments":[{"owner":{"account_id":54888,"reputation":101121,"user_id":164299,"accept_rate":99,"display_name":"Rachel"},"score":8,"creation_date":1338924692,"post_id":2983085,"comment_id":14216389,"body_markdown":"i have method like `testQuotes` along with other methods that do not start with test but still i get No tests found error","body":"i have method like <code>testQuotes</code> along with other methods that do not start with test but still i get No tests found error"},{"owner":{"account_id":114531,"reputation":2147,"user_id":301111,"accept_rate":100,"display_name":"MrDrews"},"score":1,"creation_date":1365094647,"post_id":2983085,"comment_id":22497911,"body_markdown":"I had the same problem with a class that extends `junit.framework.TestCase`, and my methods needed to begin with &quot;test&quot;.  Rather than extending `TestCase`, I added an import: `import static org.junit.Assert.*;`, and I can name my methods how I want.  Bizarre...","body":"I had the same problem with a class that extends <code>junit.framework.TestCase</code>, and my methods needed to begin with &quot;test&quot;.  Rather than extending <code>TestCase</code>, I added an import: <code>import static org.junit.Assert.*;</code>, and I can name my methods how I want.  Bizarre..."},{"owner":{"account_id":2337801,"reputation":2525,"user_id":2056545,"accept_rate":80,"display_name":"michael_s"},"score":0,"creation_date":1376375183,"post_id":2983085,"comment_id":26676717,"body_markdown":"It seems even worse with Kepler than with Juno... - strangely clean build doesn&#39;t help at all, only **explicitly changing the file helped** (e.g. by inserting and removing a space and then saving). Afterwards I can &quot;Run As-JUnit Test&quot; and it works. So - not the renaming but simply changing the file did the trick for me.","body":"It seems even worse with Kepler than with Juno... - strangely clean build doesn&#39;t help at all, only <b>explicitly changing the file helped</b> (e.g. by inserting and removing a space and then saving). Afterwards I can &quot;Run As-JUnit Test&quot; and it works. So - not the renaming but simply changing the file did the trick for me."},{"owner":{"account_id":1312868,"reputation":224,"user_id":1260472,"accept_rate":91,"display_name":"BudsNanKis"},"score":0,"creation_date":1382027156,"post_id":2983085,"comment_id":28809435,"body_markdown":"Version: Kepler Release\nBuild id: 20130614-0229                                                      It works for this release. But, if I renamed the test back to its original, it would not work. Looks like it needs the word &quot;test&quot; at the beginning for some reason.","body":"Version: Kepler Release Build id: 20130614-0229                                                      It works for this release. But, if I renamed the test back to its original, it would not work. Looks like it needs the word &quot;test&quot; at the beginning for some reason."},{"owner":{"account_id":2244074,"reputation":4893,"user_id":1977887,"accept_rate":75,"display_name":"Erick G. Hagstrom"},"score":0,"creation_date":1427646411,"post_id":2983085,"comment_id":46852430,"body_markdown":"It seems that any edit of the file produces this result.","body":"It seems that any edit of the file produces this result."},{"owner":{"account_id":304924,"reputation":472,"user_id":614740,"accept_rate":50,"display_name":"Brian Shotola"},"score":8,"creation_date":1430928864,"post_id":2983085,"comment_id":48277424,"body_markdown":"Seriously, even if a test is annotated with @Test, the test function name still needs to be prefixed with &quot;test&quot;?","body":"Seriously, even if a test is annotated with @Test, the test function name still needs to be prefixed with &quot;test&quot;?"},{"owner":{"account_id":347392,"reputation":8392,"user_id":681479,"accept_rate":62,"display_name":"Brian White"},"score":4,"creation_date":1433033491,"post_id":2983085,"comment_id":49177718,"body_markdown":"You can add 2015 and Eclipse Luna to that list, too.  Actually a great many of my @Test methods still start with the prefix &quot;test&quot;.  I _removed_ that prefix on one test, saved, and then all tests were found.  Afterwards I added it back and all tests continued to be found.  It seems it&#39;s more about changing a method (file?) such that Eclipse re-discovers everything.","body":"You can add 2015 and Eclipse Luna to that list, too.  Actually a great many of my @Test methods still start with the prefix &quot;test&quot;.  I <i>removed</i> that prefix on one test, saved, and then all tests were found.  Afterwards I added it back and all tests continued to be found.  It seems it&#39;s more about changing a method (file?) such that Eclipse re-discovers everything."},{"owner":{"account_id":1677324,"reputation":2586,"user_id":3797214,"accept_rate":25,"display_name":"Nicolas Albert"},"score":0,"creation_date":1455201922,"post_id":2983085,"comment_id":58391885,"body_markdown":"In 2016 too, with the AndroidJUnitRunner !","body":"In 2016 too, with the AndroidJUnitRunner !"},{"owner":{"account_id":120843,"reputation":6055,"user_id":313511,"accept_rate":95,"display_name":"s1mm0t"},"score":1,"creation_date":1455478859,"post_id":2983085,"comment_id":58496921,"body_markdown":"2016 regardless of AndroidJUnitRunner!","body":"2016 regardless of AndroidJUnitRunner!"},{"owner":{"account_id":5508187,"reputation":699,"user_id":4375446,"accept_rate":93,"display_name":"randombee"},"score":0,"creation_date":1461237044,"post_id":2983085,"comment_id":61113136,"body_markdown":"This is still valid, for anyone that comes here wondering if it works. I&#39;m using Eclipse Mars.","body":"This is still valid, for anyone that comes here wondering if it works. I&#39;m using Eclipse Mars."},{"owner":{"account_id":4257011,"reputation":3241,"user_id":3482428,"accept_rate":100,"display_name":"Blueriver"},"score":2,"creation_date":1464220219,"post_id":2983085,"comment_id":62400487,"body_markdown":"Android Studio 2.1.1, May 2016, still works. I wonder if this answer will work until the end of the universe.","body":"Android Studio 2.1.1, May 2016, still works. I wonder if this answer will work until the end of the universe."},{"owner":{"account_id":1962125,"reputation":1418,"user_id":1763363,"display_name":"Powerslave"},"score":0,"creation_date":1477055698,"post_id":2983085,"comment_id":67622373,"body_markdown":"Hahahaha, this is nuts! I&#39;m on Mars.2 - unfortunately, this didn&#39;t help me. It keeps telling me nothing is there. UPDATE: I undid the renaming and BOOM! It sprung to life. On Oct 21, 2016","body":"Hahahaha, this is nuts! I&#39;m on Mars.2 - unfortunately, this didn&#39;t help me. It keeps telling me nothing is there. UPDATE: I undid the renaming and BOOM! It sprung to life. On Oct 21, 2016"},{"owner":{"account_id":3816702,"reputation":1988,"user_id":3165903,"accept_rate":56,"display_name":"Kamil Witkowski"},"score":1,"creation_date":1488453348,"post_id":2983085,"comment_id":72242408,"body_markdown":"Remember to rename it to &#39;test(..)&#39; not &#39;Test(...)&#39; in my case it makes difference.","body":"Remember to rename it to &#39;test(..)&#39; not &#39;Test(...)&#39; in my case it makes difference."},{"owner":{"account_id":5013813,"reputation":351,"user_id":4029189,"accept_rate":45,"display_name":"Alanight"},"score":0,"creation_date":1533205730,"post_id":2983085,"comment_id":90265826,"body_markdown":"Thanks, this solves my problem, but after renaming back, the same problem raise again.","body":"Thanks, this solves my problem, but after renaming back, the same problem raise again."},{"owner":{"account_id":386444,"reputation":1894,"user_id":744207,"accept_rate":82,"display_name":"tObi"},"score":1,"creation_date":1564612038,"post_id":2983085,"comment_id":101092981,"body_markdown":"This helped me in 2019 with STS 3.9.8... are you f*n serious?","body":"This helped me in 2019 with STS 3.9.8... are you f*n serious?"},{"owner":{"account_id":8836148,"reputation":76,"user_id":6600371,"display_name":"frva"},"score":0,"creation_date":1571288252,"post_id":2983085,"comment_id":103192043,"body_markdown":"With Netbeans 8.02 this still happened, I wanted a very simple run that I&#39;ve named &quot;public void testIt()&quot; =&gt; Netbeans returned no tests found...\nBy renaming to &quot;public void doASimpleTest()&quot; this has worked.","body":"With Netbeans 8.02 this still happened, I wanted a very simple run that I&#39;ve named &quot;public void testIt()&quot; =&gt; Netbeans returned no tests found... By renaming to &quot;public void doASimpleTest()&quot; this has worked."}],"tags":[],"owner":{"account_id":9311,"reputation":4535,"user_id":17138,"accept_rate":70,"display_name":"Germ&#225;n"},"comment_count":16,"down_vote_count":3,"up_vote_count":175,"is_accepted":false,"score":172,"last_activity_date":1355507810,"creation_date":1275798292,"answer_id":2983085,"question_id":2332832,"body_markdown":"this just happened to me. Rebuilding or restarting Eclipse didn&#39;t help.\r\n\r\nI solved it by renaming one of the test methods to start with &quot;test...&quot; (JUnit3 style) and then **all** tests are found. I renamed it back to what it was previously, and it still works.\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>this just happened to me. Rebuilding or restarting Eclipse didn't help.</p>\n\n<p>I solved it by renaming one of the test methods to start with \"test...\" (JUnit3 style) and then <strong>all</strong> tests are found. I renamed it back to what it was previously, and it still works.</p>\n"},{"tags":[],"owner":{"account_id":624258,"reputation":21,"user_id":371460,"display_name":"Footix29"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277026792,"creation_date":1277026792,"answer_id":3078786,"question_id":2332832,"body_markdown":"I tried the solution from Germ&#225;n.\r\nIt worked for all the method from my class but i have a lot of classes in my project.\r\n\r\nSo I tried removing from build path and then re-adding it.\r\nIt worked perfectly.\r\n\r\nHope it helps.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I tried the solution from Germán.\nIt worked for all the method from my class but i have a lot of classes in my project.</p>\n\n<p>So I tried removing from build path and then re-adding it.\nIt worked perfectly.</p>\n\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":634954,"reputation":1,"user_id":402583,"display_name":"Anna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1280167093,"creation_date":1280167093,"answer_id":3337550,"question_id":2332832,"body_markdown":"This happened to me too. I found that in Eclipse I didn&#39;t make a new Java Class file and so that&#39;s why it wasn&#39;t compiling. Try copying your code into a java class file if it&#39;s not already there and then compile.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>This happened to me too. I found that in Eclipse I didn't make a new Java Class file and so that's why it wasn't compiling. Try copying your code into a java class file if it's not already there and then compile.</p>\n"},{"comments":[{"owner":{"account_id":69548,"reputation":411,"user_id":202259,"accept_rate":44,"display_name":"Alex Kilpatrick"},"score":2,"creation_date":1296929024,"post_id":4748044,"comment_id":5465652,"body_markdown":"This solved the problem for me.  If you are looking at the older examples of how to use Junit first, they will lead you astray.","body":"This solved the problem for me.  If you are looking at the older examples of how to use Junit first, they will lead you astray."},{"owner":{"account_id":1081132,"reputation":4281,"user_id":1078098,"accept_rate":47,"display_name":"Veaceslav Gaidarji"},"score":0,"creation_date":1484064589,"post_id":4748044,"comment_id":70351099,"body_markdown":"&quot;If your class extends TestCase then even if you use Junit 4 Runner it will be run as 3&quot; - this is not true (at least for Groovy and Intellij IDEA). I&#39;m using JUnit 4.12, and I have annotated the class with `@RunWith(JUnit4)` and extended from &quot;GroovyTestCase&quot;. Without `@RunWith(JUnit4)` I face same issues.","body":"&quot;If your class extends TestCase then even if you use Junit 4 Runner it will be run as 3&quot; - this is not true (at least for Groovy and Intellij IDEA). I&#39;m using JUnit 4.12, and I have annotated the class with <code>@RunWith(JUnit4)</code> and extended from &quot;GroovyTestCase&quot;. Without <code>@RunWith(JUnit4)</code> I face same issues."},{"owner":{"account_id":6710876,"reputation":76,"user_id":5174367,"display_name":"sharmaap"},"score":0,"creation_date":1492276662,"post_id":4748044,"comment_id":73915769,"body_markdown":"The behavior is still the same as of 2017 (JUnit 4.12).","body":"The behavior is still the same as of 2017 (JUnit 4.12)."}],"tags":[],"owner":{"account_id":54016,"reputation":4741,"user_id":161575,"display_name":"toomasr"},"comment_count":3,"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1295532201,"creation_date":1295532201,"answer_id":4748044,"question_id":2332832,"body_markdown":"I was facing the same problem and I debugged it to bad examples on the web and internals of junit. Basically don&#39;t make your class extend TestCase as some examples show for Junit 4.x. Use some naming convention *Test* or if you want to have an annotation you can use @RunWith(JUnit4.class).\r\n\r\nIf you need access to assert methods extend Assert or use static imports.\r\n\r\nIf your class extends TestCase then even if you use Junit 4 Runner it will be run as 3. This is because in the initialization code there is detection:\r\n\r\nSee JUnit3Builder and the lines:\r\n\r\n\tboolean isPre4Test(Class&lt;?&gt; testClass) {\r\n\t\treturn junit.framework.TestCase.class.isAssignableFrom(testClass);\r\n\t}\r\n\r\nThis returns true and the test for junit4 compatibility won&#39;t be tried.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I was facing the same problem and I debugged it to bad examples on the web and internals of junit. Basically don't make your class extend TestCase as some examples show for Junit 4.x. Use some naming convention <em>Test</em> or if you want to have an annotation you can use @RunWith(JUnit4.class).</p>\n\n<p>If you need access to assert methods extend Assert or use static imports.</p>\n\n<p>If your class extends TestCase then even if you use Junit 4 Runner it will be run as 3. This is because in the initialization code there is detection:</p>\n\n<p>See JUnit3Builder and the lines:</p>\n\n<pre><code>boolean isPre4Test(Class&lt;?&gt; testClass) {\n    return junit.framework.TestCase.class.isAssignableFrom(testClass);\n}\n</code></pre>\n\n<p>This returns true and the test for junit4 compatibility won't be tried.</p>\n"},{"comments":[{"owner":{"account_id":1059051,"reputation":6072,"user_id":1061067,"accept_rate":28,"display_name":"Dio Phung"},"score":0,"creation_date":1413123776,"post_id":4964734,"comment_id":41316470,"body_markdown":"It is indeed the correct answer. I tested it with IntelliJ and JUnit 4.1 and it works !","body":"It is indeed the correct answer. I tested it with IntelliJ and JUnit 4.1 and it works !"},{"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"score":0,"creation_date":1472355912,"post_id":4964734,"comment_id":65716740,"body_markdown":"The problem that I am facing is that, in eclipse my JUnit tests run fine, but when I export them to a JAR, I get the above error. Any ideas?","body":"The problem that I am facing is that, in eclipse my JUnit tests run fine, but when I export them to a JAR, I get the above error. Any ideas?"},{"owner":{"account_id":3288925,"reputation":909,"user_id":2767662,"display_name":"Heinzlmaen"},"score":0,"creation_date":1581426228,"post_id":4964734,"comment_id":106422302,"body_markdown":"Is it the other way around these days? Adding &quot;extends TestCase&quot; solved the problem for me.","body":"Is it the other way around these days? Adding &quot;extends TestCase&quot; solved the problem for me."}],"tags":[],"owner":{"account_id":254962,"reputation":551,"user_id":534701,"accept_rate":40,"display_name":"nephilim"},"comment_count":3,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1297387749,"creation_date":1297387749,"answer_id":4964734,"question_id":2332832,"body_markdown":"Check if your test class extends &quot;TestCase&quot;. if so, remove that clause. Your class does not need to extend from &quot;TestCase&quot; class. It&#39;s most of the cases I&#39;ve met. \r\n\r\n    public class MyTestCase extends TestCase{\r\n      @Test\r\n      public void checkSomething() {\r\n        //...\r\n      }\r\n    }\r\n    //Result&gt; AssertionFailedError: No test Found in MyTestCase\r\n\r\nFollowing TestCase should be fine.\r\n\r\n    public class MyTestCase {\r\n      @Test\r\n      public void checkSomething() {\r\n        //...\r\n      }\r\n    }\r\n    //Works fine\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Check if your test class extends \"TestCase\". if so, remove that clause. Your class does not need to extend from \"TestCase\" class. It's most of the cases I've met. </p>\n\n<pre><code>public class MyTestCase extends TestCase{\n  @Test\n  public void checkSomething() {\n    //...\n  }\n}\n//Result&gt; AssertionFailedError: No test Found in MyTestCase\n</code></pre>\n\n<p>Following TestCase should be fine.</p>\n\n<pre><code>public class MyTestCase {\n  @Test\n  public void checkSomething() {\n    //...\n  }\n}\n//Works fine\n</code></pre>\n"},{"comments":[{"owner":{"account_id":111635,"reputation":3063,"user_id":294809,"accept_rate":80,"display_name":"Andree"},"score":0,"creation_date":1344681925,"post_id":5619513,"comment_id":15862803,"body_markdown":"This is the solution that works for me. Restarting doesn&#39;t work.","body":"This is the solution that works for me. Restarting doesn&#39;t work."},{"owner":{"account_id":466330,"reputation":13849,"user_id":871012,"accept_rate":74,"display_name":"quux00"},"score":0,"creation_date":1345570973,"post_id":5619513,"comment_id":16105938,"body_markdown":"This is what I was after since I have to have the &quot;test&quot; folder not in the &quot;src&quot; folder. I did this, then open/closed the project as suggested by the other answers and now it compiles and runs as a JUnit test. Thanks!","body":"This is what I was after since I have to have the &quot;test&quot; folder not in the &quot;src&quot; folder. I did this, then open/closed the project as suggested by the other answers and now it compiles and runs as a JUnit test. Thanks!"},{"owner":{"account_id":1570938,"reputation":1142,"user_id":1458639,"accept_rate":69,"display_name":"Peter Clause"},"score":0,"creation_date":1393343817,"post_id":5619513,"comment_id":33377748,"body_markdown":"I did the same by selecting the project -&gt; Java build path -&gt; Source -&gt; add the test folder. Many thanks!","body":"I did the same by selecting the project -&gt; Java build path -&gt; Source -&gt; add the test folder. Many thanks!"},{"owner":{"account_id":7491687,"reputation":905,"user_id":5693152,"display_name":"geneSummons"},"score":0,"creation_date":1512512397,"post_id":5619513,"comment_id":82286513,"body_markdown":"If src/test/groovy is already on your build path as a source folder, remove it and then add it again.  Easier than removing and replacing @Test in every test file...","body":"If src/test/groovy is already on your build path as a source folder, remove it and then add it again.  Easier than removing and replacing @Test in every test file..."}],"tags":[],"owner":{"account_id":736382,"reputation":359,"user_id":701911,"display_name":"Dima"},"comment_count":4,"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1302515256,"creation_date":1302515256,"answer_id":5619513,"question_id":2332832,"body_markdown":"In context menu of your &#39;test&#39; directory choose &#39;Build path&#39; -&gt; &#39;Use as a source folder&#39;.\r\nEclipse should see your unitTests.java files as a source files.\r\nWarning &#39;No JUnit tests found&#39; occures because there is no unitTests.class files in your &#39;build&#39; directory","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>In context menu of your 'test' directory choose 'Build path' -> 'Use as a source folder'.\nEclipse should see your unitTests.java files as a source files.\nWarning 'No JUnit tests found' occures because there is no unitTests.class files in your 'build' directory</p>\n"},{"tags":[],"owner":{"account_id":10242,"reputation":12230,"user_id":19246,"accept_rate":82,"display_name":"Martin C."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1303740091,"creation_date":1303740091,"answer_id":5779104,"question_id":2332832,"body_markdown":"I found out that Eclipse seems to only perform JUnit 3 style tests if your test-class extends from `TestCase`. If you remove the inheritance, the annotations worked for me.\r\n\r\nBeware that you need to statically import all the required `assert*` methods like `import static org.junit.Assert.*`.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I found out that Eclipse seems to only perform JUnit 3 style tests if your test-class extends from <code>TestCase</code>. If you remove the inheritance, the annotations worked for me.</p>\n\n<p>Beware that you need to statically import all the required <code>assert*</code> methods like <code>import static org.junit.Assert.*</code>.</p>\n"},{"tags":[],"owner":{"account_id":449322,"reputation":31,"user_id":844045,"display_name":"Rajith"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1310628754,"creation_date":1310628754,"answer_id":6689866,"question_id":2332832,"body_markdown":"I also faced the same issue while running JUnit test. I resolved this by putting the annotation @Test just above the main test function.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I also faced the same issue while running JUnit test. I resolved this by putting the annotation @Test just above the main test function.</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1332365069,"creation_date":1332365069,"answer_id":9813110,"question_id":2332832,"body_markdown":"No testsuits in JUnit4. Use annotations instead or use old JUnit3 name conventions.\r\n\r\nExample:\r\n \r\n    @RunWith(Suite.class)\r\n    @SuiteClasses({YourClassWithTests.class})\r\n  ","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>No testsuits in JUnit4. Use annotations instead or use old JUnit3 name conventions.</p>\n\n<p>Example:</p>\n\n<pre><code>@RunWith(Suite.class)\n@SuiteClasses({YourClassWithTests.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1130939,"reputation":11,"user_id":1117009,"display_name":"joe otherside"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1338082565,"creation_date":1338082565,"answer_id":10771039,"question_id":2332832,"body_markdown":"I had to do a mvn clean on command line then project-&gt;clean in eclipse. I renamed the class beforehand then renamed it back but i doubt that helped.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I had to do a mvn clean on command line then project->clean in eclipse. I renamed the class beforehand then renamed it back but i doubt that helped.</p>\n"},{"tags":[],"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343695653,"creation_date":1343695653,"answer_id":11731661,"question_id":2332832,"body_markdown":"What fixed my case was similar to @JamesG&#39;s answer:  I restarted Eclipse, rebuilt the project, and refreshed it; BUT before I did any of that, I 1st closed the project (right-click project in package explorer -&gt; Close Project) and then re-opened it.  Then it worked.\r\n\r\nA workaround solution I found before finding that ultimate solution I just described:  Copy the test class, and run the test class as JUnit.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>What fixed my case was similar to @JamesG's answer:  I restarted Eclipse, rebuilt the project, and refreshed it; BUT before I did any of that, I 1st closed the project (right-click project in package explorer -> Close Project) and then re-opened it.  Then it worked.</p>\n\n<p>A workaround solution I found before finding that ultimate solution I just described:  Copy the test class, and run the test class as JUnit.</p>\n"},{"comments":[{"owner":{"account_id":1313547,"reputation":4923,"user_id":1261007,"display_name":"Littm"},"score":1,"creation_date":1349921722,"post_id":11734114,"comment_id":17358981,"body_markdown":"Hi mate and welcome to Stackoverflow! :) Could you please elaborate your answer?","body":"Hi mate and welcome to Stackoverflow! :) Could you please elaborate your answer?"},{"owner":{"account_id":1727801,"reputation":3678,"user_id":1582089,"display_name":"Cassian"},"score":0,"creation_date":1412688026,"post_id":11734114,"comment_id":41152929,"body_markdown":"@Mahesh You mean refresh the file (select it and press F5)","body":"@Mahesh You mean refresh the file (select it and press F5)"}],"tags":[],"owner":{"account_id":1675520,"reputation":31,"user_id":1564816,"display_name":"Mahesh"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1343714781,"creation_date":1343714781,"answer_id":11734114,"question_id":2332832,"body_markdown":"When I face this problem I just edit the file and save it... works like charm","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>When I face this problem I just edit the file and save it... works like charm</p>\n"},{"tags":[],"owner":{"account_id":362234,"reputation":66,"user_id":705313,"display_name":"revindran"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1343776190,"creation_date":1343776190,"answer_id":11750342,"question_id":2332832,"body_markdown":"This happened to me as well. I tried restarting Eclipse and also prefixed my test-methods with tests. Neither worked.\r\n\r\nThe following step worked:\r\nChange all your test methods present in @BeforeClass and @AfterClass to static methods.\r\n\r\ni.e. if you have your test method in the below format:\r\n\r\n    @BeforeClass\r\n    public void testBeforeClass(){\r\n    }\r\n\r\nthen change it to:\r\n\r\n    @BeforeClass\r\n    public static void testBeforeClass(){\r\n    }\r\n\r\nThis worked for me.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>This happened to me as well. I tried restarting Eclipse and also prefixed my test-methods with tests. Neither worked.</p>\n\n<p>The following step worked:\nChange all your test methods present in @BeforeClass and @AfterClass to static methods.</p>\n\n<p>i.e. if you have your test method in the below format:</p>\n\n<pre><code>@BeforeClass\npublic void testBeforeClass(){\n}\n</code></pre>\n\n<p>then change it to:</p>\n\n<pre><code>@BeforeClass\npublic static void testBeforeClass(){\n}\n</code></pre>\n\n<p>This worked for me.</p>\n"},{"tags":[],"owner":{"account_id":2045401,"reputation":71,"user_id":1825579,"display_name":"Mike Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1352950454,"creation_date":1352950454,"answer_id":13391192,"question_id":2332832,"body_markdown":"Try Adding \r\n\r\n@Test above the method for the test like this\r\n\r\n    @Test\r\n    public void testParse()\r\n    {\r\n    \r\n    }","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Try Adding </p>\n\n<p>@Test above the method for the test like this</p>\n\n<pre><code>@Test\npublic void testParse()\n{\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2147264,"reputation":1017,"user_id":1904631,"accept_rate":57,"display_name":"Sergii"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1355504445,"creation_date":1355503082,"answer_id":13882757,"question_id":2332832,"body_markdown":"My problem was that declaration `import org.junit.Test;` has disappeared (or wasn&#39;t added?). After adding it, I had to remove another `import` declaration (Eclipse&#39;ll hint you which one) and everything began to work again.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>My problem was that declaration <code>import org.junit.Test;</code> has disappeared (or wasn't added?). After adding it, I had to remove another <code>import</code> declaration (Eclipse'll hint you which one) and everything began to work again.</p>\n"},{"tags":[],"owner":{"account_id":2603495,"reputation":31,"user_id":2255229,"display_name":"Josh T"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1365359966,"creation_date":1365359966,"answer_id":15866246,"question_id":2332832,"body_markdown":"Very late but what solved the problem for me was that my test method names all started with captial letters: &quot;public void Test&quot;. Making the t lower case worked.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Very late but what solved the problem for me was that my test method names all started with captial letters: \"public void Test\". Making the t lower case worked.</p>\n"},{"tags":[],"owner":{"account_id":1284726,"reputation":1432,"user_id":1238044,"accept_rate":64,"display_name":"Todor Kolev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374848661,"creation_date":1374848661,"answer_id":17883958,"question_id":2332832,"body_markdown":"Check if the folder your tests are in is a source folder. If not - right click and use as source folder.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Check if the folder your tests are in is a source folder. If not - right click and use as source folder.</p>\n"},{"tags":[],"owner":{"account_id":69588,"reputation":3307,"user_id":202367,"display_name":"pascal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1382455110,"creation_date":1382455110,"answer_id":19521885,"question_id":2332832,"body_markdown":"I&#39;m also running Eclipse with Maven (m2e 1.4). The tests were running with Maven, but not with Eclipse... even after several application of `Maven&gt;Update project`.\r\n\r\nMy solution was to add some lines in the .classpath generated by m2e. The lines are now sticking.\r\n\r\n    &lt;classpathentry kind=&quot;src&quot; output=&quot;target/test-classes&quot; path=&quot;src/test/java&quot;&gt;\r\n      &lt;attributes&gt;\r\n        &lt;attribute name=&quot;optional&quot; value=&quot;true&quot;/&gt;\r\n        &lt;attribute name=&quot;maven.pomderived&quot; value=&quot;true&quot;/&gt;\r\n      &lt;/attributes&gt;\r\n    &lt;/classpathentry&gt;\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I'm also running Eclipse with Maven (m2e 1.4). The tests were running with Maven, but not with Eclipse... even after several application of <code>Maven&gt;Update project</code>.</p>\n\n<p>My solution was to add some lines in the .classpath generated by m2e. The lines are now sticking.</p>\n\n<pre><code>&lt;classpathentry kind=\"src\" output=\"target/test-classes\" path=\"src/test/java\"&gt;\n  &lt;attributes&gt;\n    &lt;attribute name=\"optional\" value=\"true\"/&gt;\n    &lt;attribute name=\"maven.pomderived\" value=\"true\"/&gt;\n  &lt;/attributes&gt;\n&lt;/classpathentry&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3699724,"reputation":51,"user_id":3079895,"display_name":"Eyal Zamir"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1386509263,"creation_date":1386509263,"answer_id":20453935,"question_id":2332832,"body_markdown":"I have found out the answer:\r\n\r\nI got this error when I executed the test standalone from eclipse (right click on the method and choose to run as junit test), \r\n\r\nWhen I executed the complete class as junit test the test executed correctly with the parameters.\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I have found out the answer:</p>\n\n<p>I got this error when I executed the test standalone from eclipse (right click on the method and choose to run as junit test), </p>\n\n<p>When I executed the complete class as junit test the test executed correctly with the parameters.</p>\n"},{"tags":[],"owner":{"account_id":3624028,"reputation":47,"user_id":3022123,"display_name":"user3022123"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1388980430,"creation_date":1388980430,"answer_id":20942708,"question_id":2332832,"body_markdown":"Close and open the project worked for me.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Close and open the project worked for me.</p>\n"},{"tags":[],"owner":{"account_id":1336332,"reputation":3448,"user_id":1279002,"accept_rate":44,"display_name":"theINtoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411397356,"creation_date":1411397356,"answer_id":25976987,"question_id":2332832,"body_markdown":"I have this problem from time to time. The thing that resolves the issue most for me is to run the JUnit test from Run configurations... ensuring that JUnit 4 is set as the test runner.\r\n\r\nGenerally, I see this issue when attempting to Run As... Junit test from the context menu on the Package Explorer. If you right click the code for the test you are trying to run and instead of selecting Run As... Junit Test you select Run configurations... ensure the Project, Test Class and test runner are set correctly, clicking apply, then run works all the time for me.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I have this problem from time to time. The thing that resolves the issue most for me is to run the JUnit test from Run configurations... ensuring that JUnit 4 is set as the test runner.</p>\n\n<p>Generally, I see this issue when attempting to Run As... Junit test from the context menu on the Package Explorer. If you right click the code for the test you are trying to run and instead of selecting Run As... Junit Test you select Run configurations... ensure the Project, Test Class and test runner are set correctly, clicking apply, then run works all the time for me.</p>\n"},{"comments":[{"owner":{"account_id":7580927,"reputation":59,"user_id":5751647,"display_name":"MPSL"},"score":0,"creation_date":1556796010,"post_id":28324548,"comment_id":98554648,"body_markdown":"same, from the outline view it works, everything else does not - i have tried every solution posted in 3 stack overflow threads, nothing works","body":"same, from the outline view it works, everything else does not - i have tried every solution posted in 3 stack overflow threads, nothing works"},{"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"score":0,"creation_date":1561369988,"post_id":28324548,"comment_id":100027047,"body_markdown":"This works for me too, but is useless for testing coverage across a project.","body":"This works for me too, but is useless for testing coverage across a project."}],"tags":[],"owner":{"account_id":2392650,"reputation":2659,"user_id":2092205,"display_name":"Matthew Wise"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1423062229,"creation_date":1423062229,"answer_id":28324548,"question_id":2332832,"body_markdown":"Yet another possible solution I&#39;ll throw into the ring: I wasn&#39;t able to run the test class either from the editor window, nor the Package Explorer, but right-clicking on the class name in the Outline view and selecting Run As JUnit Test did work... Go figure!","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Yet another possible solution I'll throw into the ring: I wasn't able to run the test class either from the editor window, nor the Package Explorer, but right-clicking on the class name in the Outline view and selecting Run As JUnit Test did work... Go figure!</p>\n"},{"tags":[],"owner":{"account_id":5922320,"reputation":1,"user_id":4659306,"display_name":"JuanTorre"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426176768,"creation_date":1426176768,"answer_id":29014873,"question_id":2332832,"body_markdown":"I started to work with Selenium and Eclipse in my job and I was doing my first automated test and I deleted from the code @Before, @Test, and @After notes and I was having this issue &quot;No tests found with test runner junit4&quot;.\r\n\r\nMy solution it was simply to add again the @Before, @Test and @After notes and with that my script worked. Is important to not delete this from the code.\r\n\r\nThis is a simple test that uses Google to search something:\r\n\r\n    import java.util.regex.Pattern;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    import org.junit.*;\r\n    \r\n    import static org.junit.Assert.*;\r\n    import static org.hamcrest.CoreMatchers.*;\r\n    \r\n    import org.openqa.selenium.*;\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    import org.openqa.selenium.support.ui.Select;\r\n    \r\n    public class TestingClass {\r\n    \t\r\n    \tprivate WebDriver driver;\r\n    \t//Creates an instance of the FirefoxDriver\r\n    \t**@Before**\r\n    \tpublic void SetUp() throws Exception {\r\n    \t\tdriver = new FirefoxDriver();\r\n    \t}\r\n    \r\n    \t**@Test** \t\r\n    \t//Search using keyword through Google Search\r\n    \tpublic void TestTestClass2 () throws Exception {\r\n    \t\tdriver.get(&quot;http://www.google.com.mx/&quot;);\r\n    \t\tdriver.findElement(By.name(&quot;q&quot;)).sendKeys(&quot;selenium&quot;);\r\n    \t\tThread.sleep(10000);\r\n    \t\tdriver.findElement(By.name(&quot;btnG&quot;)).click();\r\n    \t\tThread.sleep(10000);\r\n    \t}\r\n    \t\r\n    \t//Kill all the WebDriver instances\r\n    \t**@After**\r\n    \tpublic void TearDown() throws Exception {\r\n    \t\tdriver.quit();\r\n    \t}\r\n    \t\r\n    }","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I started to work with Selenium and Eclipse in my job and I was doing my first automated test and I deleted from the code @Before, @Test, and @After notes and I was having this issue \"No tests found with test runner junit4\".</p>\n\n<p>My solution it was simply to add again the @Before, @Test and @After notes and with that my script worked. Is important to not delete this from the code.</p>\n\n<p>This is a simple test that uses Google to search something:</p>\n\n<pre><code>import java.util.regex.Pattern;\nimport java.util.concurrent.TimeUnit;\n\nimport org.junit.*;\n\nimport static org.junit.Assert.*;\nimport static org.hamcrest.CoreMatchers.*;\n\nimport org.openqa.selenium.*;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.support.ui.Select;\n\npublic class TestingClass {\n\n    private WebDriver driver;\n    //Creates an instance of the FirefoxDriver\n    **@Before**\n    public void SetUp() throws Exception {\n        driver = new FirefoxDriver();\n    }\n\n    **@Test**   \n    //Search using keyword through Google Search\n    public void TestTestClass2 () throws Exception {\n        driver.get(\"http://www.google.com.mx/\");\n        driver.findElement(By.name(\"q\")).sendKeys(\"selenium\");\n        Thread.sleep(10000);\n        driver.findElement(By.name(\"btnG\")).click();\n        Thread.sleep(10000);\n    }\n\n    //Kill all the WebDriver instances\n    **@After**\n    public void TearDown() throws Exception {\n        driver.quit();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1312122,"reputation":2474,"user_id":1259917,"display_name":"n0741337"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436974130,"creation_date":1436974130,"answer_id":31434706,"question_id":2332832,"body_markdown":"Using ScalaIDE (3.0.4-2.11-20140723-2253-Typesafe) I was having a similar problem with the `Right Click Scala Test Class-&gt; Run As -&gt; Scala Junit Test` context menu.\r\n\r\nI tried editting the class(but not for a compile failure), cleaning, closing the project, closing Eclipse.  None of those worked to restore the context menu for classes that had previously worked well.  The test classes don&#39;t use the `@Test` annotation and instead use the `@RunWith(classOf[JUnitRunner])` annotation at the top of the class using ScalaTest code.\r\n\r\nWhen I tried choosing `Scala Junit Test` from the Run Configuration launch editor directly, I received the dialog from the question.  Footix29&#39;s answer was the key for me.\r\n\r\nI noticed that even though I had cleaned my project a few times, my classes in the /bin directory hadn&#39;t actually been rebuilt in a while.\r\n\r\nHere&#39;s how I got back the context menu, and was able to once again run `Scala Junit Test`s:\r\n\r\n* `manually` cleaned the classes by deleting the `/bin/&lt;package dir&gt;*` via Explorer\r\n* `Project -&gt; Clean`ed the project along with a full rebuild\r\n\r\nI suspect that a class edit in general is able to clean some saved state of Eclipse and get it going again.  In my case all of the previously working classes I tried had failed so the `manual` clean step was just the hammer I needed.  However, other tricks that affect Eclipse&#39;s concept of the class path/build state should also work.\r\n\r\nFurther, I think that this behaviour was triggered in part by attempting to refactor a Scala class by renaming it( which the Scala Eclipse IDE sucks at ), where all the cleanup after the initial file change is manual.  There were no build errors, but there were also no warnings that I was expecting meaning something was definitely stuck in Eclipse&#39;s build state info.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Using ScalaIDE (3.0.4-2.11-20140723-2253-Typesafe) I was having a similar problem with the <code>Right Click Scala Test Class-&gt; Run As -&gt; Scala Junit Test</code> context menu.</p>\n\n<p>I tried editting the class(but not for a compile failure), cleaning, closing the project, closing Eclipse.  None of those worked to restore the context menu for classes that had previously worked well.  The test classes don't use the <code>@Test</code> annotation and instead use the <code>@RunWith(classOf[JUnitRunner])</code> annotation at the top of the class using ScalaTest code.</p>\n\n<p>When I tried choosing <code>Scala Junit Test</code> from the Run Configuration launch editor directly, I received the dialog from the question.  Footix29's answer was the key for me.</p>\n\n<p>I noticed that even though I had cleaned my project a few times, my classes in the /bin directory hadn't actually been rebuilt in a while.</p>\n\n<p>Here's how I got back the context menu, and was able to once again run <code>Scala Junit Test</code>s:</p>\n\n<ul>\n<li><code>manually</code> cleaned the classes by deleting the <code>/bin/&lt;package dir&gt;*</code> via Explorer</li>\n<li><code>Project -&gt; Clean</code>ed the project along with a full rebuild</li>\n</ul>\n\n<p>I suspect that a class edit in general is able to clean some saved state of Eclipse and get it going again.  In my case all of the previously working classes I tried had failed so the <code>manual</code> clean step was just the hammer I needed.  However, other tricks that affect Eclipse's concept of the class path/build state should also work.</p>\n\n<p>Further, I think that this behaviour was triggered in part by attempting to refactor a Scala class by renaming it( which the Scala Eclipse IDE sucks at ), where all the cleanup after the initial file change is manual.  There were no build errors, but there were also no warnings that I was expecting meaning something was definitely stuck in Eclipse's build state info.</p>\n"},{"tags":[],"owner":{"account_id":1317232,"reputation":3875,"user_id":1263837,"accept_rate":11,"display_name":"Kundan Atre"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439275257,"creation_date":1439275257,"answer_id":31934863,"question_id":2332832,"body_markdown":"There is another chance, you might have changed Junit Test from lower version(e.g. Junit 3) to Junit 4 .\r\nIs so follow below steps:-\r\n\r\n    1. Right Click on class\r\n    2. Select Run as &gt;&gt; &quot;Run Configurations&quot;\r\n    3. Check your &quot;Test Runner&quot; option in new window\r\n    4. If it not same as maven change it for example change it as Junit 4.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>There is another chance, you might have changed Junit Test from lower version(e.g. Junit 3) to Junit 4 .\nIs so follow below steps:-</p>\n\n<pre><code>1. Right Click on class\n2. Select Run as &gt;&gt; \"Run Configurations\"\n3. Check your \"Test Runner\" option in new window\n4. If it not same as maven change it for example change it as Junit 4.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":561923,"reputation":7498,"user_id":1118559,"accept_rate":38,"display_name":"MindBrain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455055972,"creation_date":1455055972,"answer_id":35303239,"question_id":2332832,"body_markdown":"Right Click the Project -&gt; Build Dependencies -&gt; remove the ones which have been excluded from the build path -&gt; Click OK\r\n\r\nRight Click the Project -&gt; Maven -&gt; Update Project.\r\n\r\nYou should be good to go..","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Right Click the Project -> Build Dependencies -> remove the ones which have been excluded from the build path -> Click OK</p>\n\n<p>Right Click the Project -> Maven -> Update Project.</p>\n\n<p>You should be good to go..</p>\n"},{"tags":[],"owner":{"account_id":1059488,"reputation":1695,"user_id":1061409,"display_name":"Vu Truong"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461815649,"creation_date":1461815649,"answer_id":36904941,"question_id":2332832,"body_markdown":"You can fix this issue by do as following:\r\n\r\n - Right click on the folder named &#39;Test&#39; &gt; Build Path &gt; Use as Source\r\n  Folder\r\n - Or you can set classpath same as: `&lt;classpathentry kind=&quot;src&quot;\r\n   path=&quot;src/test/java&quot;/&gt;` . You replace **&quot;src/test/java&quot;** by your test package\r\n\r\nThis issue happened because of junit cannot recognize your source code :D","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>You can fix this issue by do as following:</p>\n\n<ul>\n<li>Right click on the folder named 'Test' > Build Path > Use as Source\nFolder</li>\n<li>Or you can set classpath same as: <code>&lt;classpathentry kind=\"src\"\npath=\"src/test/java\"/&gt;</code> . You replace <strong>\"src/test/java\"</strong> by your test package</li>\n</ul>\n\n<p>This issue happened because of junit cannot recognize your source code :D</p>\n"},{"comments":[{"owner":{"account_id":4248662,"reputation":843,"user_id":3476492,"accept_rate":89,"display_name":"01000001"},"score":0,"creation_date":1592407526,"post_id":37417579,"comment_id":110416040,"body_markdown":"This answer here is helpful, I didn&#39;t have exactly same situation, but test methods names were quite similar and eclipse had issue finding them. Like testCase01, testCare02... I had to comment other &quot;testCasexx&quot; methods in order to run testCase01 or else it throws an exception.  Making all test methods PUBLIC seem to have resolved this issue!!","body":"This answer here is helpful, I didn&#39;t have exactly same situation, but test methods names were quite similar and eclipse had issue finding them. Like testCase01, testCare02... I had to comment other &quot;testCasexx&quot; methods in order to run testCase01 or else it throws an exception.  Making all test methods PUBLIC seem to have resolved this issue!!"}],"tags":[],"owner":{"account_id":157933,"reputation":539,"user_id":376208,"display_name":"SimonB"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464771430,"creation_date":1464102834,"answer_id":37417579,"question_id":2332832,"body_markdown":"Six years later ... and there are still problems with Eclipse and occasionally not finding JUnits.\r\n\r\nIn my Eclipse Mars 2 I discovered that it won&#39;t recognise test classes pulled in from git if there are more than 9 or 10 `@Test` annotations in the file. I need to comment out any extra tests, run the test class, then uncomment them and re-run the class. Go figure...","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Six years later ... and there are still problems with Eclipse and occasionally not finding JUnits.</p>\n\n<p>In my Eclipse Mars 2 I discovered that it won't recognise test classes pulled in from git if there are more than 9 or 10 <code>@Test</code> annotations in the file. I need to comment out any extra tests, run the test class, then uncomment them and re-run the class. Go figure...</p>\n"},{"tags":[],"owner":{"account_id":9037748,"reputation":9,"user_id":6733006,"display_name":"Heather"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1471590259,"creation_date":1471590259,"answer_id":39032974,"question_id":2332832,"body_markdown":"There are two reasons for this Exception:\r\n\r\n 1. The source code hasn’t been compiled YET.\r\n 2. Or on the contrary, the source code has been compiled BUT it cannot been found by JUnit.\r\n\r\nFor reason one, it has no leg to stand. Because like many people said: the ‘old’ methods work perfectly. Only the new-added methods cannot been identified. \r\nThen the second reason became the only explanation: JUnit can NOT find the freshly compiled classes. \r\nHaving that in mind, I did this: Right click the project -&gt;Java Build Path -&gt; Edit Source item:\r\nproject_name/src/test/java’s Output folder, change the Output folder into a ‘Specific output folder(path relative to project_name). Provide this value: target/test-class. \r\nBe hold: This is the default test source codes’ output folder defined by Maven. It has been overwrote by M2E (or me). That’s why JUnit cannot find it. \r\nSo my guess is many people who had run into this lovely exception are most likely dealing with a Web project which is managed by Maven. Am I right?! This also contributed my conclusion that reason one should be excluded -- “old” methods can be found is because they had been automatically compiled when the Tomcat was (re)started. Into the ‘wrong’ path maybe, but JUnit found it anyway.\r\n\r\nBefore I had figured this out. I tried many things as advised: update to the latest JUnit4, Back and forth between build path and use as source folder, capital Test vs test, etc. Nothing happened until I specifically identified the output location for the test source.\r\nWith all those explanation, my second reason should be re-phrased as this: the new codes had not been timely compiled to the right path! \r\nGood luck.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>There are two reasons for this Exception:</p>\n\n<ol>\n<li>The source code hasn’t been compiled YET.</li>\n<li>Or on the contrary, the source code has been compiled BUT it cannot been found by JUnit.</li>\n</ol>\n\n<p>For reason one, it has no leg to stand. Because like many people said: the ‘old’ methods work perfectly. Only the new-added methods cannot been identified. \nThen the second reason became the only explanation: JUnit can NOT find the freshly compiled classes. \nHaving that in mind, I did this: Right click the project ->Java Build Path -> Edit Source item:\nproject_name/src/test/java’s Output folder, change the Output folder into a ‘Specific output folder(path relative to project_name). Provide this value: target/test-class. \nBe hold: This is the default test source codes’ output folder defined by Maven. It has been overwrote by M2E (or me). That’s why JUnit cannot find it. \nSo my guess is many people who had run into this lovely exception are most likely dealing with a Web project which is managed by Maven. Am I right?! This also contributed my conclusion that reason one should be excluded -- “old” methods can be found is because they had been automatically compiled when the Tomcat was (re)started. Into the ‘wrong’ path maybe, but JUnit found it anyway.</p>\n\n<p>Before I had figured this out. I tried many things as advised: update to the latest JUnit4, Back and forth between build path and use as source folder, capital Test vs test, etc. Nothing happened until I specifically identified the output location for the test source.\nWith all those explanation, my second reason should be re-phrased as this: the new codes had not been timely compiled to the right path! \nGood luck.</p>\n"},{"tags":[],"owner":{"account_id":1904822,"reputation":150,"user_id":1719906,"accept_rate":67,"display_name":"Himadri"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1481460494,"creation_date":1481453609,"answer_id":41085369,"question_id":2332832,"body_markdown":"I also faced this Issue while implementing @RunWith(Cucumber.class). \r\nSince this annotation was inside a Public class and hence\r\nEclipse Shows this &quot;No tests found with test runner not found&quot; error.\r\n\r\nOnce I called / placed the test runner annotation before the runner class, The tests showed up nicely.\r\n\r\nReaders must identify which Junit Test Runner they are using. One can check with @RunWith(JUnit4.class) is Outside or inside the runner.class parenthesis {}. If its inside, Please place it outside.\r\n\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I also faced this Issue while implementing @RunWith(Cucumber.class). \nSince this annotation was inside a Public class and hence\nEclipse Shows this \"No tests found with test runner not found\" error.</p>\n\n<p>Once I called / placed the test runner annotation before the runner class, The tests showed up nicely.</p>\n\n<p>Readers must identify which Junit Test Runner they are using. One can check with @RunWith(JUnit4.class) is Outside or inside the runner.class parenthesis {}. If its inside, Please place it outside.</p>\n"},{"tags":[],"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1523727666,"creation_date":1523727666,"answer_id":49834357,"question_id":2332832,"body_markdown":"If you are trying to setup **junit 5**\r\nadd `@RunWith(JUnitPlatform.class)`\r\n\r\nand `import org.junit.platform.runner.JUnitPlatform;` so that eclipse can recognize the `junit 5` test classes as test classes","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>If you are trying to setup <strong>junit 5</strong>\nadd <code>@RunWith(JUnitPlatform.class)</code></p>\n\n<p>and <code>import org.junit.platform.runner.JUnitPlatform;</code> so that eclipse can recognize the <code>junit 5</code> test classes as test classes</p>\n"},{"tags":[],"owner":{"account_id":4192718,"reputation":1097,"user_id":3434956,"accept_rate":95,"display_name":"mohsen.nour"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547880805,"creation_date":1547880805,"answer_id":54264775,"question_id":2332832,"body_markdown":"My problem was using **\r\n\r\n&gt; testng\r\n\r\n** package \r\n org.testng.Assert; \r\n\r\nYou can replace it in libraries of the project (*Maven*)  with JUnit and then need to refactor project.  \r\nOR add TestNG Eclipse plug-in  \r\n\r\nhttp://testng.org/doc/eclipse.html\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>My problem was using **</p>\n\n<blockquote>\n  <p>testng</p>\n</blockquote>\n\n<p>** package \n org.testng.Assert; </p>\n\n<p>You can replace it in libraries of the project (<em>Maven</em>)  with JUnit and then need to refactor project.<br>\nOR add TestNG Eclipse plug-in  </p>\n\n<p><a href=\"http://testng.org/doc/eclipse.html\" rel=\"nofollow noreferrer\">http://testng.org/doc/eclipse.html</a></p>\n"},{"tags":[],"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561455538,"creation_date":1561455538,"answer_id":56751034,"question_id":2332832,"body_markdown":"I&#39;ve had issues with this recently, which seem to be fixed in the latest Eclipse.\r\n\r\n`eclipse-java 4.11.0,2019-03:R -&gt; 4.12.0,2019-06:R`","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I've had issues with this recently, which seem to be fixed in the latest Eclipse.</p>\n\n<p><code>eclipse-java 4.11.0,2019-03:R -&gt; 4.12.0,2019-06:R</code></p>\n"},{"tags":[],"owner":{"account_id":1378559,"reputation":1668,"user_id":1312034,"accept_rate":75,"display_name":"Ravikiran butti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564052554,"creation_date":1564052554,"answer_id":57200455,"question_id":2332832,"body_markdown":"I had this issue when my Java class name was similar to the Test class name. Just updated the name of the Test class by post fixing it with keywork &quot;Test&quot; and it started working\r\n\r\n**Before:**\r\nJava class : ACMEController\r\nTest class : ACMEController\r\n\r\n**After:**\r\nJava class : ACMEController\r\nTest class : ACMEControllerTest","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I had this issue when my Java class name was similar to the Test class name. Just updated the name of the Test class by post fixing it with keywork \"Test\" and it started working</p>\n\n<p><strong>Before:</strong>\nJava class : ACMEController\nTest class : ACMEController</p>\n\n<p><strong>After:</strong>\nJava class : ACMEController\nTest class : ACMEControllerTest</p>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568410318,"creation_date":1568410318,"answer_id":57930578,"question_id":2332832,"body_markdown":"Add `@Test` on top of your test.  \r\nMouse hover to the annotation.  \r\nChose &#39;add junit 4 library to classpath&#39;","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Add <code>@Test</code> on top of your test.<br>\nMouse hover to the annotation.<br>\nChose 'add junit 4 library to classpath'</p>\n"},{"tags":[],"owner":{"account_id":5727357,"reputation":409,"user_id":4523982,"display_name":"fidudidu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573116733,"creation_date":1573116733,"answer_id":58745030,"question_id":2332832,"body_markdown":"In my case the issue was the generics parameters:\r\n\r\n    public class TestClass&lt;T extends Serializable&gt; {\r\n\r\n**removing** :\r\n\r\n&gt; &amp;lt;T extends Serializable&amp;gt;\r\n\r\n and the option was available again.\r\n\r\nI&#39;m using Junit4","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>In my case the issue was the generics parameters:</p>\n\n<pre><code>public class TestClass&lt;T extends Serializable&gt; {\n</code></pre>\n\n<p><strong>removing</strong> :</p>\n\n<blockquote>\n  <p>&lt;T extends Serializable&gt;</p>\n</blockquote>\n\n<p>and the option was available again.</p>\n\n<p>I'm using Junit4</p>\n"},{"tags":[],"owner":{"account_id":18826296,"reputation":31,"user_id":13731108,"display_name":"Max Tardiveau"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592186070,"creation_date":1592186070,"answer_id":62380232,"question_id":2332832,"body_markdown":"You might be able to solve this simply by renaming your test class to have a name that ends with Test, e.g. ThisAndThatTest\r\n\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>You might be able to solve this simply by renaming your test class to have a name that ends with Test, e.g. ThisAndThatTest</p>\n"},{"tags":[],"owner":{"account_id":5258193,"reputation":905,"user_id":4200473,"display_name":"Richard Jessop"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599251561,"creation_date":1599250468,"answer_id":63747527,"question_id":2332832,"body_markdown":"Check for updates!  Eclipse is no doubt fully aware of this problem considering how many workarounds have been presented.  There is obviously something systemic involved...something that defies explanation or any sense of consistency.  It would have been useful if Eclipse would have let the community know what the problem was and how it was fixed.\r\n\r\nAnother recent find for me was to delete any source directories that had no files or the all files were excluded.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Check for updates!  Eclipse is no doubt fully aware of this problem considering how many workarounds have been presented.  There is obviously something systemic involved...something that defies explanation or any sense of consistency.  It would have been useful if Eclipse would have let the community know what the problem was and how it was fixed.</p>\n<p>Another recent find for me was to delete any source directories that had no files or the all files were excluded.</p>\n"},{"tags":[],"owner":{"account_id":2180987,"reputation":2146,"user_id":1930496,"display_name":"lorenzo-bettini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619776462,"creation_date":1619776462,"answer_id":67331833,"question_id":2332832,"body_markdown":"If you&#39;re sure it used to work and now it&#39;s not working anymore, chances are that the Java index got corrupted. In the preferences, search for &quot;java index&quot;; it&#39;s in &quot;Java&quot; and then there&#39;s a button &quot;Rebuild Index&quot; (or use Ctrl+3, &quot;Find Actions&quot;, to quickly search for &quot;Rebuild Java Index&quot;). Once selected, the next time you try to run the JUnit test you should see that Eclipse is rebuilding the Java index and the JUnit tests should start now.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>If you're sure it used to work and now it's not working anymore, chances are that the Java index got corrupted. In the preferences, search for &quot;java index&quot;; it's in &quot;Java&quot; and then there's a button &quot;Rebuild Index&quot; (or use Ctrl+3, &quot;Find Actions&quot;, to quickly search for &quot;Rebuild Java Index&quot;). Once selected, the next time you try to run the JUnit test you should see that Eclipse is rebuilding the Java index and the JUnit tests should start now.</p>\n"},{"tags":[],"owner":{"account_id":304252,"reputation":785,"user_id":613651,"display_name":"Keith Tyler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621576239,"creation_date":1621576239,"answer_id":67631452,"question_id":2332832,"body_markdown":"I ran into this issue because I had a @BeforeClass that was not static.\r\n\r\nFor some reason the error wasn&#39;t exposed through my normal junit run configuration.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I ran into this issue because I had a @BeforeClass that was not static.</p>\n<p>For some reason the error wasn't exposed through my normal junit run configuration.</p>\n"},{"tags":[],"owner":{"account_id":4245916,"reputation":338,"user_id":3474613,"display_name":"Nick"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633945694,"creation_date":1633945694,"answer_id":69524214,"question_id":2332832,"body_markdown":"I tried all the answers above.\r\n\r\nIn my case my project had both junit4 and junit5 dependencies. I was trying to use junit4 so after making sure I used correct junit4 imports it still did not work.\r\n\r\nI finally found the problem. The eclipse JUnit runner used in the debug configuration was set to JUnit5. I changed it to JUnit4 and the tests are now found and executed.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I tried all the answers above.</p>\n<p>In my case my project had both junit4 and junit5 dependencies. I was trying to use junit4 so after making sure I used correct junit4 imports it still did not work.</p>\n<p>I finally found the problem. The eclipse JUnit runner used in the debug configuration was set to JUnit5. I changed it to JUnit4 and the tests are now found and executed.</p>\n"},{"tags":[],"owner":{"account_id":17594,"reputation":3216,"user_id":39531,"accept_rate":50,"display_name":"jevon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650326134,"creation_date":1650326134,"answer_id":71918219,"question_id":2332832,"body_markdown":"Using JUnit4 and a Gradle-based project, none of the earlier suggestions worked in my case. What _did_ work was:\r\n\r\n1. Right click your `test` source folder, and click `Properties`\r\n2. Jump to `Run/Debug Settings`\r\n3. Select all of the run/debug configurations, and delete them.\r\n\r\nMy guess is that one of these launch configurations was messing up my JUnit4 runner. Resetting all of the run/debug configurations solved JUnit4 not finding any tests to run.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Using JUnit4 and a Gradle-based project, none of the earlier suggestions worked in my case. What <em>did</em> work was:</p>\n<ol>\n<li>Right click your <code>test</code> source folder, and click <code>Properties</code></li>\n<li>Jump to <code>Run/Debug Settings</code></li>\n<li>Select all of the run/debug configurations, and delete them.</li>\n</ol>\n<p>My guess is that one of these launch configurations was messing up my JUnit4 runner. Resetting all of the run/debug configurations solved JUnit4 not finding any tests to run.</p>\n"},{"tags":[],"owner":{"account_id":8460842,"reputation":554,"user_id":6346653,"display_name":"nick_j_white"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650938015,"creation_date":1650938015,"answer_id":72007515,"question_id":2332832,"body_markdown":"I tried all of the suggestions above. Only deleting existing test run configurations for that class finally resolved it. Eclipse is weird...","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I tried all of the suggestions above. Only deleting existing test run configurations for that class finally resolved it. Eclipse is weird...</p>\n"},{"tags":[],"owner":{"account_id":5362341,"reputation":688,"user_id":4273204,"accept_rate":0,"display_name":"Akash Verma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654421615,"creation_date":1654421615,"answer_id":72506216,"question_id":2332832,"body_markdown":"ok In my case (using Junit5), if i tried to run with  \r\n\r\n&gt; @RunWith(MockitoJUnitRunner::class)\r\n\r\nI got error \r\n\r\n    No tests found in ServiceImplTest\r\n    Is the method annotated with @Test?\r\n    Is the method public?\r\n    org.mockito.exceptions.base.MockitoException: \r\n\r\n    No tests found in ServiceImplTest\r\n    Is the method annotated with @Test?\r\n    Is the method public?\r\n\r\nSolution: Simply removing @RunWith(MockitoJUnitRunner::class) from Top of class worked!\r\n ","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>ok In my case (using Junit5), if i tried to run with</p>\n<blockquote>\n<p>@RunWith(MockitoJUnitRunner::class)</p>\n</blockquote>\n<p>I got error</p>\n<pre><code>No tests found in ServiceImplTest\nIs the method annotated with @Test?\nIs the method public?\norg.mockito.exceptions.base.MockitoException: \n\nNo tests found in ServiceImplTest\nIs the method annotated with @Test?\nIs the method public?\n</code></pre>\n<p>Solution: Simply removing @RunWith(MockitoJUnitRunner::class) from Top of class worked!</p>\n"},{"tags":[],"owner":{"account_id":3326028,"reputation":115,"user_id":2796104,"display_name":"Hmbucker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681983180,"creation_date":1681983180,"answer_id":76062614,"question_id":2332832,"body_markdown":"It might be silly, but I got the error making my @Test function private instead of public... too early in the morning.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>It might be silly, but I got the error making my @Test function private instead of public... too early in the morning.</p>\n"},{"tags":[],"owner":{"account_id":1474447,"reputation":721,"user_id":1385221,"accept_rate":80,"display_name":"madeFromCode"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691611634,"creation_date":1691611634,"answer_id":76870946,"question_id":2332832,"body_markdown":"I had to make the class public. Before I had &#39;class myTests&#39; and making it &#39;public class myTests&#39; allowed intelliJ to find the tests.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I had to make the class public. Before I had 'class myTests' and making it 'public class myTests' allowed intelliJ to find the tests.</p>\n"}],"owner":{"account_id":105295,"reputation":1351,"user_id":281070,"accept_rate":0,"display_name":"user281070"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284749,"favorite_count":0,"down_vote_count":0,"up_vote_count":120,"answer_count":49,"score":120,"last_activity_date":1691611634,"creation_date":1267089358,"question_id":2332832,"body_markdown":"My Java test worked well from Eclipse. But now, when I relaunch test from the run menu, I get the following message: \r\n\r\n    No tests found with test runner &#39;JUnit 4&#39;\r\n\r\nIn the `.classpath` file I have all `jar` files, and at the end have: \r\n\r\n    &lt;classpathentry exported=&quot;true&quot; kind=&quot;con&quot; path=&quot;org.eclipse.jdt.junit.JUNIT_CONTAINER/4&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;output&quot; path=&quot;bin&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\nHow can I resolve this error and get tests running again?\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>My Java test worked well from Eclipse. But now, when I relaunch test from the run menu, I get the following message: </p>\n\n<pre><code>No tests found with test runner 'JUnit 4'\n</code></pre>\n\n<p>In the <code>.classpath</code> file I have all <code>jar</code> files, and at the end have: </p>\n\n<pre><code>&lt;classpathentry exported=\"true\" kind=\"con\" path=\"org.eclipse.jdt.junit.JUNIT_CONTAINER/4\"/&gt;\n    &lt;classpathentry kind=\"output\" path=\"bin\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p>How can I resolve this error and get tests running again?</p>\n"},{"tags":["java","spring","scheduled-tasks","crontrigger"],"comments":[{"owner":{"account_id":4320098,"reputation":1431,"user_id":3528626,"display_name":"hisener"},"score":0,"creation_date":1521624652,"post_id":49402144,"comment_id":85806224,"body_markdown":"Are there any annotations in your code, too?","body":"Are there any annotations in your code, too?"},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521625606,"post_id":49402144,"comment_id":85806847,"body_markdown":"@hisener no just the &quot;sendPropertyNotificationEmail&quot; method is being called, which contains the mail sending functionality","body":"@hisener no just the &quot;sendPropertyNotificationEmail&quot; method is being called, which contains the mail sending functionality"},{"owner":{"account_id":3386007,"reputation":647,"user_id":2841947,"accept_rate":50,"display_name":"Rahul"},"score":0,"creation_date":1521627022,"post_id":49402144,"comment_id":85807876,"body_markdown":"Is sendPropertyNotificationEmail() expected to send one mail per invocation? When you say &#39;sending multiple mails&#39;, do you mean that somehow sendPropertyNotificationEmail() is invoked in multiple threads? Please clarify more on the problem.","body":"Is sendPropertyNotificationEmail() expected to send one mail per invocation? When you say &#39;sending multiple mails&#39;, do you mean that somehow sendPropertyNotificationEmail() is invoked in multiple threads? Please clarify more on the problem."},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521627201,"post_id":49402144,"comment_id":85808006,"body_markdown":"@Rahul yes i think it is getting invoked in multiple threads. Yes the function is implemented to send one mail every monday at 10 am, when m testing it locally it is running fine, only one mail is getting sent but when deployed in the production mode, multiple mails are being sent","body":"@Rahul yes i think it is getting invoked in multiple threads. Yes the function is implemented to send one mail every monday at 10 am, when m testing it locally it is running fine, only one mail is getting sent but when deployed in the production mode, multiple mails are being sent"},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521627587,"post_id":49402144,"comment_id":85808269,"body_markdown":"@Rahul, hisener please find the original code in the question i have edited it again. Actually in original code run method is called.","body":"@Rahul, hisener please find the original code in the question i have edited it again. Actually in original code run method is called."},{"owner":{"account_id":4320098,"reputation":1431,"user_id":3528626,"display_name":"hisener"},"score":0,"creation_date":1521628577,"post_id":49402144,"comment_id":85808980,"body_markdown":"I think you do not need override of the run method. Spring handles that. Please refer https://spring.io/guides/gs/scheduling-tasks/","body":"I think you do not need override of the run method. Spring handles that. Please refer <a href=\"https://spring.io/guides/gs/scheduling-tasks/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/scheduling-tasks</a>"},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521629437,"post_id":49402144,"comment_id":85809612,"body_markdown":"@hisener ok but still its behaving the same.","body":"@hisener ok but still its behaving the same."},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521629776,"post_id":49402144,"comment_id":85809806,"body_markdown":"@hisener  and also how can you say that run method is generating the issue? please explain.","body":"@hisener  and also how can you say that run method is generating the issue? please explain."},{"owner":{"account_id":4320098,"reputation":1431,"user_id":3528626,"display_name":"hisener"},"score":0,"creation_date":1521633371,"post_id":49402144,"comment_id":85812263,"body_markdown":"I thought somehow run method executed as well as sendPropertyNotificationEmail. I am not quite sure what problem is. I need to try but I am not available right now, sorry.","body":"I thought somehow run method executed as well as sendPropertyNotificationEmail. I am not quite sure what problem is. I need to try but I am not available right now, sorry."},{"owner":{"account_id":3970707,"reputation":533,"user_id":3275390,"accept_rate":60,"display_name":"shankulk"},"score":0,"creation_date":1540614369,"post_id":49402144,"comment_id":92940175,"body_markdown":"Are there more than one servers running in production?","body":"Are there more than one servers running in production?"}],"answers":[{"tags":[],"owner":{"account_id":2886869,"reputation":339,"user_id":2476515,"accept_rate":57,"display_name":"deepak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540607240,"creation_date":1540607240,"answer_id":53018231,"question_id":49402144,"body_markdown":"Check how instances are configured on your production container. Turn off auto-scaling, if it is set. A batch program should never have more than one instance running at any given point.","title":"java spring scheduler running multiple times in prod","body":"<p>Check how instances are configured on your production container. Turn off auto-scaling, if it is set. A batch program should never have more than one instance running at any given point.</p>\n"}],"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691611406,"creation_date":1521623420,"question_id":49402144,"body_markdown":"I am running a web application scheduler of spring(cron) for sending notification mail, when running on local server its running fine but on production mode its sending multiple mails.\r\n\r\n```\r\n&lt;bean id=&quot;EmailNotificationScheduledTask&quot; class=&quot;com.prism.utils.EmailNotificationTask&quot; /&gt;\r\n\t&lt;task:scheduled-tasks scheduler=&quot;scheduler&quot;&gt;\r\n\t    &lt;task:scheduled ref=&quot;EmailNotificationScheduledTask&quot; method=&quot;run&quot; cron=&quot;0 0 10 * * MON&quot;/&gt; \r\n\t&lt;/task:scheduled-tasks&gt;\r\n\t&lt;task:scheduler id=&quot;scheduler&quot; pool-size=&quot;1&quot;/&gt;\r\n\t\r\n&lt;/beans&gt;\r\n```\r\n```\r\npublic class EmailNotificationTask extends TimerTask{\r\n\t@Override\r\n\tpublic void run() {\r\n\t\t\tsynchronized (this) {\r\n\t\t\t\tsendPropertyNotificationEmail();\r\n\t\t\t}\r\n\t\t//}\r\n\t}\r\n\t\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic void sendPropertyNotificationEmail(){\r\n\t\ttry{\r\n\t\t\t//Mail sending logic\r\n\t\t}\r\n\t\t\t\r\n\t\t} catch (DAOException ee) {\r\n\t\t\t_logger.error(&quot;Error while sending notification messages&quot;, ee);\r\n\t\t}\r\n    }\r\n}\r\n```","title":"java spring scheduler running multiple times in prod","body":"<p>I am running a web application scheduler of spring(cron) for sending notification mail, when running on local server its running fine but on production mode its sending multiple mails.</p>\n<pre><code>&lt;bean id=&quot;EmailNotificationScheduledTask&quot; class=&quot;com.prism.utils.EmailNotificationTask&quot; /&gt;\n    &lt;task:scheduled-tasks scheduler=&quot;scheduler&quot;&gt;\n        &lt;task:scheduled ref=&quot;EmailNotificationScheduledTask&quot; method=&quot;run&quot; cron=&quot;0 0 10 * * MON&quot;/&gt; \n    &lt;/task:scheduled-tasks&gt;\n    &lt;task:scheduler id=&quot;scheduler&quot; pool-size=&quot;1&quot;/&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<pre><code>public class EmailNotificationTask extends TimerTask{\n    @Override\n    public void run() {\n            synchronized (this) {\n                sendPropertyNotificationEmail();\n            }\n        //}\n    }\n    \n    @SuppressWarnings(&quot;unchecked&quot;)\n    public void sendPropertyNotificationEmail(){\n        try{\n            //Mail sending logic\n        }\n            \n        } catch (DAOException ee) {\n            _logger.error(&quot;Error while sending notification messages&quot;, ee);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","linux","pid"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1691611093,"post_id":76870881,"comment_id":135516471,"body_markdown":"maybe use `ps efx`to better understand the process hierarchy.","body":"maybe use <code>ps efx</code>to better understand the process hierarchy."},{"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"score":0,"creation_date":1691657283,"post_id":76870881,"comment_id":135521951,"body_markdown":"Problem solved! actually i was using intelliJ installed via flatpack. I don&#39;t why it is creating its own namespace. Now using intelliJ IDE from snap store, its working fine. Thanks","body":"Problem solved! actually i was using intelliJ installed via flatpack. I don&#39;t why it is creating its own namespace. Now using intelliJ IDE from snap store, its working fine. Thanks"}],"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610876,"creation_date":1691610876,"question_id":76870881,"body_markdown":"When i am running my application using some IDE say IntelliJ idea, and using a function in my application code to print the current process pid i get some different pid which is not visible using `ps aux` command.\r\n\r\nI am using this function\r\n\r\n```java\r\nstatic void printCurrentPid(){\r\n   long pid = ProcessHandle.current().pid();\r\n   System.out.println(&quot;PID:&quot;+pid);\r\n}\r\n```\r\nBut when i run the jar of my application using cli, it prints the actual pid which is visible to kernel and can be seen using `jps` command.\r\n\r\nPlease help!","title":"Different pid of the java application when running using intellij idea","body":"<p>When i am running my application using some IDE say IntelliJ idea, and using a function in my application code to print the current process pid i get some different pid which is not visible using <code>ps aux</code> command.</p>\n<p>I am using this function</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void printCurrentPid(){\n   long pid = ProcessHandle.current().pid();\n   System.out.println(&quot;PID:&quot;+pid);\n}\n</code></pre>\n<p>But when i run the jar of my application using cli, it prints the actual pid which is visible to kernel and can be seen using <code>jps</code> command.</p>\n<p>Please help!</p>\n"},{"tags":["java","splunk"],"comments":[{"owner":{"account_id":3110,"reputation":32932,"user_id":4418,"accept_rate":94,"display_name":"warren"},"score":0,"creation_date":1691669963,"post_id":76870868,"comment_id":135524431,"body_markdown":"is the event in Splunk valid JSON? What do you mean by &quot;deserialize&quot;?","body":"is the event in Splunk valid JSON? What do you mean by &quot;deserialize&quot;?"}],"owner":{"account_id":449029,"reputation":49,"user_id":843583,"accept_rate":100,"display_name":"Loki"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610705,"creation_date":1691610705,"question_id":76870868,"body_markdown":"I have an object that is logged in splunk. It is a pretty large object. \r\nlooks something like this JobEntity(eventId=dc814fd9-91d2-4e4c-a2b1-7693248d, targetId=2345, status=CREATED, errorMessage=null....)\r\n\r\nIs there a way i can deserialize this java object(JobEntity). I need to reconstruct this object to reproduce an issue using unit tests.\r\n\r\nwhat i have tried so far:\r\n\r\n1: \r\n\r\n    try {\r\n          String objStr = FileUtil.readResourceFile(&quot;job/job_entity1.txt&quot;);\r\n          ObjectMapper objectMapper = new ObjectMapper();\r\n          JobEntity job = objectMapper.readValue(objStr, JobEntity.class);\r\n          System.out.println(job);\r\n        } catch (Exception ex) {\r\n          System.err.println(ex);\r\n        }\r\n\r\n2: \r\n\r\n        String filePath = &quot;/job/job_entity1.txt&quot;;\r\n        try {\r\n          FileInputStream file = new FileInputStream(filePath);\r\n          ObjectInputStream reader = new ObjectInputStream(file);\r\n          while (true) {\r\n            try {\r\n              JobEntity obj = (JobEntity)reader.readObject();\r\n              System.out.println(obj);\r\n            } catch (Exception ex) {\r\n              System.err.println(&quot;end of reader file &quot;);\r\n              break;\r\n            }\r\n          }\r\n        } catch (Exception ex) {\r\n          System.err.println(&quot;failed to read &quot; + filePath + &quot;, &quot;+ ex);\r\n        }","title":"Deserialize an object logged in splunk","body":"<p>I have an object that is logged in splunk. It is a pretty large object.\nlooks something like this JobEntity(eventId=dc814fd9-91d2-4e4c-a2b1-7693248d, targetId=2345, status=CREATED, errorMessage=null....)</p>\n<p>Is there a way i can deserialize this java object(JobEntity). I need to reconstruct this object to reproduce an issue using unit tests.</p>\n<p>what i have tried so far:</p>\n<p>1:</p>\n<pre><code>try {\n      String objStr = FileUtil.readResourceFile(&quot;job/job_entity1.txt&quot;);\n      ObjectMapper objectMapper = new ObjectMapper();\n      JobEntity job = objectMapper.readValue(objStr, JobEntity.class);\n      System.out.println(job);\n    } catch (Exception ex) {\n      System.err.println(ex);\n    }\n</code></pre>\n<p>2:</p>\n<pre><code>    String filePath = &quot;/job/job_entity1.txt&quot;;\n    try {\n      FileInputStream file = new FileInputStream(filePath);\n      ObjectInputStream reader = new ObjectInputStream(file);\n      while (true) {\n        try {\n          JobEntity obj = (JobEntity)reader.readObject();\n          System.out.println(obj);\n        } catch (Exception ex) {\n          System.err.println(&quot;end of reader file &quot;);\n          break;\n        }\n      }\n    } catch (Exception ex) {\n      System.err.println(&quot;failed to read &quot; + filePath + &quot;, &quot;+ ex);\n    }\n</code></pre>\n"},{"tags":["java","android","webview"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1691615836,"post_id":76870839,"comment_id":135517273,"body_markdown":"Have you run the profiler to see what functions its taking time in?  This sounds like something is running on the main thread the entire time","body":"Have you run the profiler to see what functions its taking time in?  This sounds like something is running on the main thread the entire time"},{"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"score":0,"creation_date":1691617212,"post_id":76870839,"comment_id":135517460,"body_markdown":"I ran both the app inspector and the profiler (CPU, Memory, Energy). CPU is steady at zero, memory is steady at around 250MB but energy consumption goes double. I can&#39;t understand why. I stopped the execution mid-30 seconds and couldn&#39;t find any clue to what is going on.","body":"I ran both the app inspector and the profiler (CPU, Memory, Energy). CPU is steady at zero, memory is steady at around 250MB but energy consumption goes double. I can&#39;t understand why. I stopped the execution mid-30 seconds and couldn&#39;t find any clue to what is going on."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1691646824,"post_id":76870839,"comment_id":135520124,"body_markdown":"If you ran the profiler, it should show you what functions it spent the most time in, and you can go from there.","body":"If you ran the profiler, it should show you what functions it spent the most time in, and you can go from there."},{"owner":{"account_id":13174654,"reputation":56,"user_id":9515917,"display_name":"SHAHEEN BSV"},"score":0,"creation_date":1691651607,"post_id":76870839,"comment_id":135520858,"body_markdown":"While it might not directly address your query, I recommend attempting to load the webview concurrently with the user&#39;s login. This can be achieved by utilizing a ViewSwitcher within a single activity, where both the login layout and webview are present inside a ViewSwitcher. This approach eliminates the need for a separate activity. As a result, the webview can finish loading while the user is entering their username, password, and initiating the login process.","body":"While it might not directly address your query, I recommend attempting to load the webview concurrently with the user&#39;s login. This can be achieved by utilizing a ViewSwitcher within a single activity, where both the login layout and webview are present inside a ViewSwitcher. This approach eliminates the need for a separate activity. As a result, the webview can finish loading while the user is entering their username, password, and initiating the login process."},{"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"score":0,"creation_date":1691675983,"post_id":76870839,"comment_id":135525873,"body_markdown":"@GabeSechan From your comment I understand that I may be using the profiler wrong (or the wrong profiler). This is all I can see (image below), I can&#39;t see the functions being called. Am I on the wrong place?\n\nhttps://imagebin.ca/v/7WOi5FbsWvV8","body":"@GabeSechan From your comment I understand that I may be using the profiler wrong (or the wrong profiler). This is all I can see (image below), I can&#39;t see the functions being called. Am I on the wrong place?  <a href=\"https://imagebin.ca/v/7WOi5FbsWvV8\" rel=\"nofollow noreferrer\">imagebin.ca/v/7WOi5FbsWvV8</a>"},{"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"score":0,"creation_date":1691675987,"post_id":76870839,"comment_id":135525874,"body_markdown":"@SHAHEENBSV Thank you, that would be a great idea. But sadly I can&#39;t do that, since the information of the webview directly depends upon the user authentication.","body":"@SHAHEENBSV Thank you, that would be a great idea. But sadly I can&#39;t do that, since the information of the webview directly depends upon the user authentication."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1691677376,"post_id":76870839,"comment_id":135526230,"body_markdown":"@Sagito https://developer.android.com/studio/profile/record-traces  You can record a trace, which will use sampling techniques to break down what threads are running, what functions they&#39;re running in, and the time spent in each.  It&#39;s an incredibly useful tool for performance issues on the CPU","body":"@Sagito <a href=\"https://developer.android.com/studio/profile/record-traces\" rel=\"nofollow noreferrer\">developer.android.com/studio/profile/record-traces</a>  You can record a trace, which will use sampling techniques to break down what threads are running, what functions they&#39;re running in, and the time spent in each.  It&#39;s an incredibly useful tool for performance issues on the CPU"},{"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"score":0,"creation_date":1691679508,"post_id":76870839,"comment_id":135526767,"body_markdown":"@GabeSechan this is incredible, thank you so much! I didn&#39;t know about this tool.","body":"@GabeSechan this is incredible, thank you so much! I didn&#39;t know about this tool."}],"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610484,"creation_date":1691610484,"question_id":76870839,"body_markdown":"We are using webviews on an Android app. The login activity is native and after logging in the user goes to a menu activity with a webview. Every menu option leads the user to different activities, each of them with its own webview. All these activities - including the menu - extend from the same BaseWebViewActivity class.\r\n\r\nIt all worked well until quite recently (one year ago, perhaps) when the app started to take 30 seconds to load the webview. I have added some metrics on WebViewClient and it is always 30 seconds.\r\n\r\nThe HTML code does not have remote dependencies (all necessary scripts are bundled within the APK) and it does not make any AJAX request.\r\n\r\nIf I remove everything from the HTML and write &quot;Hello world&quot;, then it is loaded instantaneously. If I leave any sort of HTML tag (except for &lt;html&gt;, &lt;head&gt;, &lt;title&gt; or &lt;body&gt;) in the file, then it takes 30 seconds to load.\r\n\r\nThings I have tried:\r\n\r\n - Turning hardware acceleration on/off\r\n - Removing everything from the HTML\r\n - Make webview not debuggable\r\n - Removed the WebViewClient\r\n - Requested google.com instead of the local file\r\n - Removed almost everything from the HTML file (see above)\r\n - Uninstalled Android System WebView updates\r\n - Updated Android System WebView (neither of these worked)\r\n - Turned cookie management on/off\r\n\r\nThis loading time is oddly specific and I&#39;m thinking this is somehow a timeout of something. However, Network Inspector confirmed that no network requests are taking place at the time. Also, during these 30 seconds, the UI and logcat become completely blocked and will only resume the operations have the 30 seconds have elapsed.\r\n\r\nThanks in advance!\r\n\r\n    /**** Option Activity ****/\r\n    public class OptionActivity extends SPBaseWebActivity\r\n    {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_web_calendar);\r\n\r\n        this.webview = (WebView) findViewById(R.id.webview);\r\n        DebugManager.log(&quot;Entered calendar activity&quot;);\r\n\r\n        DebugManager.clearPerformanceCheckpoints(&quot;calendar_view&quot;);\r\n        DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onCreate finished&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void onResume()\r\n    {\r\n        super.onResume();\r\n\r\n        DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onResume start&quot;);\r\n\r\n        String url = &quot;calendar.html&quot;;\r\n        setupWebview(url);\r\n        reloadOnResume = false;\r\n\r\n        DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onResume finished - &quot; + (System.currentTimeMillis() / 1000));\r\n    }\r\n\r\n    @Override\r\n    protected void onPageLoaded(WebView view, String url)\r\n    {\r\n        super.onPageLoaded(view, url);\r\n\r\n        DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onPageLoaded finished - &quot; + (System.currentTimeMillis() / 1000));\r\n    }\r\n    }\r\n\r\n\r\n    /**** SPBaseWebActivity ****/\r\n    public class SPBaseWebActivity implements WebAppInterfaceDelegate\r\n    {\r\n    protected WebView webview = null;\r\n    protected WebAppInterface jsInterface = null;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        //Remove title bar\r\n        this.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n\r\n        if (this.webview == null)\r\n            this.webview = (WebView)findViewById(R.id.webview);\r\n\r\n        setupWebview(null);\r\n    }\r\n\r\n    protected void setupWebview(String url)\r\n    {\r\n        if (this.webview != null)\r\n        {\r\n            if (url == null || url.length() == 0)\r\n                url = &quot;base/empty.html&quot;;\r\n            else if (!url.contains(&quot;http&quot;))\r\n                url = &quot;app/&quot; + url;\r\n\r\n            MVWebChromeClient mvwcc = new MVWebChromeClient();\r\n            mvwcc.parentActivity = this;\r\n\r\n            this.webview.setWebChromeClient(mvwcc);\r\n\r\n            DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;Webview client init - &quot; + (System.currentTimeMillis() / 1000));\r\n\r\n            this.webview.setWebViewClient(new WebViewClient()\r\n            {\r\n                @Override\r\n                public void onPageStarted(WebView view, String url, Bitmap favicon) {\r\n                    super.onPageStarted(view, url, favicon);\r\n\r\n                    DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;onPageStarted - &quot; + (System.currentTimeMillis() / 1000));\r\n                }\r\n\r\n                @Override\r\n                public void onPageFinished(WebView view, String url)\r\n                {\r\n                    if (android.os.Build.VERSION.SDK_INT &gt;= 21)\r\n                    {\r\n                        CookieManager.getInstance().setAcceptThirdPartyCookies(view, true);\r\n                        CookieManager.getInstance().flush();\r\n                    }\r\n                    else\r\n                        CookieManager.getInstance().setAcceptCookie(true);\r\n\r\n                    DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;onPageLoaded - &quot; + (System.currentTimeMillis() / 1000));\r\n                    onPageLoaded(view, url);\r\n                }\r\n            });\r\n\r\n            DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;Webview client created - &quot; + (System.currentTimeMillis() / 1000));\r\n\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n                WebView.setWebContentsDebuggingEnabled(Globals.DEBUG);\r\n            }\r\n\r\n            if (!url.contains(&quot;http&quot;))\r\n                this.webview.loadUrl(&quot;file:///android_asset/pages/&quot; + url);\r\n            else\r\n                this.webview.loadUrl(url);\r\n\r\n            this.webview.getSettings().setJavaScriptEnabled(true);\r\n            this.webview.getSettings().setAllowFileAccessFromFileURLs(true);\r\n            this.webview.getSettings().setAllowUniversalAccessFromFileURLs(true);\r\n            this.webview.getSettings().setDomStorageEnabled(true);\r\n\r\n            this.jsInterface = new WebAppInterface(this);\r\n            this.jsInterface.delegate = this;\r\n            this.jsInterface.parentActivity = this;\r\n\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= 21)\r\n            {\r\n                CookieManager.getInstance().setAcceptThirdPartyCookies(this.webview, true);\r\n                CookieManager.getInstance().flush();\r\n            }\r\n            else\r\n                CookieManager.getInstance().setAcceptCookie(true);\r\n\r\n            this.webview.addJavascriptInterface(this.jsInterface, &quot;Android&quot;);\r\n            this.webview.requestFocus();\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n    /**** HTML file ****/\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n\t&lt;head&gt;\r\n\t\t&lt;meta charset=&quot;utf8&quot; /&gt;\r\n\t\t&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n\t\t\r\n\t\t&lt;title&gt;MV Reports - Agendamento&lt;/title&gt;\r\n\t\t\r\n\t\t&lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/css/bootstrap.min.css&quot; /&gt;\r\n\t\t&lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/addons/font-awesome/css/font-awesome.min.css&quot; /&gt;\r\n\t\t&lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/addons/material2/css/materialdesignicons.min.css&quot; /&gt;\r\n\t&lt;/head&gt;\r\n\t&lt;body&gt;\r\n\t\tTakes 30 to load\r\n\t&lt;/body&gt;\r\n    &lt;/html&gt;","title":"Android Webview takes 30 seconds to load","body":"<p>We are using webviews on an Android app. The login activity is native and after logging in the user goes to a menu activity with a webview. Every menu option leads the user to different activities, each of them with its own webview. All these activities - including the menu - extend from the same BaseWebViewActivity class.</p>\n<p>It all worked well until quite recently (one year ago, perhaps) when the app started to take 30 seconds to load the webview. I have added some metrics on WebViewClient and it is always 30 seconds.</p>\n<p>The HTML code does not have remote dependencies (all necessary scripts are bundled within the APK) and it does not make any AJAX request.</p>\n<p>If I remove everything from the HTML and write &quot;Hello world&quot;, then it is loaded instantaneously. If I leave any sort of HTML tag (except for , ,  or ) in the file, then it takes 30 seconds to load.</p>\n<p>Things I have tried:</p>\n<ul>\n<li>Turning hardware acceleration on/off</li>\n<li>Removing everything from the HTML</li>\n<li>Make webview not debuggable</li>\n<li>Removed the WebViewClient</li>\n<li>Requested google.com instead of the local file</li>\n<li>Removed almost everything from the HTML file (see above)</li>\n<li>Uninstalled Android System WebView updates</li>\n<li>Updated Android System WebView (neither of these worked)</li>\n<li>Turned cookie management on/off</li>\n</ul>\n<p>This loading time is oddly specific and I'm thinking this is somehow a timeout of something. However, Network Inspector confirmed that no network requests are taking place at the time. Also, during these 30 seconds, the UI and logcat become completely blocked and will only resume the operations have the 30 seconds have elapsed.</p>\n<p>Thanks in advance!</p>\n<pre><code>/**** Option Activity ****/\npublic class OptionActivity extends SPBaseWebActivity\n{\n\n@Override\nprotected void onCreate(Bundle savedInstanceState)\n{\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_web_calendar);\n\n    this.webview = (WebView) findViewById(R.id.webview);\n    DebugManager.log(&quot;Entered calendar activity&quot;);\n\n    DebugManager.clearPerformanceCheckpoints(&quot;calendar_view&quot;);\n    DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onCreate finished&quot;);\n}\n\n@Override\nprotected void onResume()\n{\n    super.onResume();\n\n    DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onResume start&quot;);\n\n    String url = &quot;calendar.html&quot;;\n    setupWebview(url);\n    reloadOnResume = false;\n\n    DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onResume finished - &quot; + (System.currentTimeMillis() / 1000));\n}\n\n@Override\nprotected void onPageLoaded(WebView view, String url)\n{\n    super.onPageLoaded(view, url);\n\n    DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onPageLoaded finished - &quot; + (System.currentTimeMillis() / 1000));\n}\n}\n\n\n/**** SPBaseWebActivity ****/\npublic class SPBaseWebActivity implements WebAppInterfaceDelegate\n{\nprotected WebView webview = null;\nprotected WebAppInterface jsInterface = null;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState)\n{\n    super.onCreate(savedInstanceState);\n\n    //Remove title bar\n    this.requestWindowFeature(Window.FEATURE_NO_TITLE);\n\n    if (this.webview == null)\n        this.webview = (WebView)findViewById(R.id.webview);\n\n    setupWebview(null);\n}\n\nprotected void setupWebview(String url)\n{\n    if (this.webview != null)\n    {\n        if (url == null || url.length() == 0)\n            url = &quot;base/empty.html&quot;;\n        else if (!url.contains(&quot;http&quot;))\n            url = &quot;app/&quot; + url;\n\n        MVWebChromeClient mvwcc = new MVWebChromeClient();\n        mvwcc.parentActivity = this;\n\n        this.webview.setWebChromeClient(mvwcc);\n\n        DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;Webview client init - &quot; + (System.currentTimeMillis() / 1000));\n\n        this.webview.setWebViewClient(new WebViewClient()\n        {\n            @Override\n            public void onPageStarted(WebView view, String url, Bitmap favicon) {\n                super.onPageStarted(view, url, favicon);\n\n                DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;onPageStarted - &quot; + (System.currentTimeMillis() / 1000));\n            }\n\n            @Override\n            public void onPageFinished(WebView view, String url)\n            {\n                if (android.os.Build.VERSION.SDK_INT &gt;= 21)\n                {\n                    CookieManager.getInstance().setAcceptThirdPartyCookies(view, true);\n                    CookieManager.getInstance().flush();\n                }\n                else\n                    CookieManager.getInstance().setAcceptCookie(true);\n\n                DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;onPageLoaded - &quot; + (System.currentTimeMillis() / 1000));\n                onPageLoaded(view, url);\n            }\n        });\n\n        DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;Webview client created - &quot; + (System.currentTimeMillis() / 1000));\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n            WebView.setWebContentsDebuggingEnabled(Globals.DEBUG);\n        }\n\n        if (!url.contains(&quot;http&quot;))\n            this.webview.loadUrl(&quot;file:///android_asset/pages/&quot; + url);\n        else\n            this.webview.loadUrl(url);\n\n        this.webview.getSettings().setJavaScriptEnabled(true);\n        this.webview.getSettings().setAllowFileAccessFromFileURLs(true);\n        this.webview.getSettings().setAllowUniversalAccessFromFileURLs(true);\n        this.webview.getSettings().setDomStorageEnabled(true);\n\n        this.jsInterface = new WebAppInterface(this);\n        this.jsInterface.delegate = this;\n        this.jsInterface.parentActivity = this;\n\n        if (android.os.Build.VERSION.SDK_INT &gt;= 21)\n        {\n            CookieManager.getInstance().setAcceptThirdPartyCookies(this.webview, true);\n            CookieManager.getInstance().flush();\n        }\n        else\n            CookieManager.getInstance().setAcceptCookie(true);\n\n        this.webview.addJavascriptInterface(this.jsInterface, &quot;Android&quot;);\n        this.webview.requestFocus();\n    }\n}\n}\n\n\n/**** HTML file ****/\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;utf8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    \n    &lt;title&gt;MV Reports - Agendamento&lt;/title&gt;\n    \n    &lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/css/bootstrap.min.css&quot; /&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/addons/font-awesome/css/font-awesome.min.css&quot; /&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/addons/material2/css/materialdesignicons.min.css&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    Takes 30 to load\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","web","jakarta-ee"],"owner":{"account_id":27116540,"reputation":1,"user_id":20660794,"display_name":"Vsevolod Kasatchikov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610291,"creation_date":1691608936,"question_id":76870682,"body_markdown":"I use the @Dispose annotation, which should call a method to clean up the resources created by the @Produces annotation, for some reason the inscription &quot;cleaned&quot; is output to the console 2 times, not 1. Why?\r\n\r\n```\r\n@WebServlet(value = &quot;/tes&quot;)\r\npublic class MyTag extends HttpServlet {\r\n    @Inject\r\n    @Named(&quot;Person&quot;)\r\n    Person person;\r\n    @Override\r\n    protected void doGet(HttpServletRequest req,\r\n                         HttpServletResponse resp) {\r\n        System.out.println(person.name);\r\n    }\r\n}\r\n\r\n@ApplicationScoped\r\nclass Producer {\r\n    @Produces\r\n    @Named(&quot;Person&quot;)\r\n    public Person getPerson() {\r\n        return new Person(&quot;Max&quot;);\r\n    }\r\n    public void clean(@Disposes Person person) {\r\n        person.clean();\r\n    }\r\n}\r\n\r\nclass Person {\r\n    String name;\r\n    public Person(String name) {\r\n        this.name = name;\r\n    }\r\n    public void clean() {\r\n        System.out.println(&quot;cleaned&quot;);\r\n    }\r\n}\r\n```\r\n\r\n                                           ","title":"Annotation @Dispose calls the method to clean up resources 2 times. Jakarta EE","body":"<p>I use the @Dispose annotation, which should call a method to clean up the resources created by the @Produces annotation, for some reason the inscription &quot;cleaned&quot; is output to the console 2 times, not 1. Why?</p>\n<pre><code>@WebServlet(value = &quot;/tes&quot;)\npublic class MyTag extends HttpServlet {\n    @Inject\n    @Named(&quot;Person&quot;)\n    Person person;\n    @Override\n    protected void doGet(HttpServletRequest req,\n                         HttpServletResponse resp) {\n        System.out.println(person.name);\n    }\n}\n\n@ApplicationScoped\nclass Producer {\n    @Produces\n    @Named(&quot;Person&quot;)\n    public Person getPerson() {\n        return new Person(&quot;Max&quot;);\n    }\n    public void clean(@Disposes Person person) {\n        person.clean();\n    }\n}\n\nclass Person {\n    String name;\n    public Person(String name) {\n        this.name = name;\n    }\n    public void clean() {\n        System.out.println(&quot;cleaned&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-widget","android-gps"],"owner":{"account_id":17167952,"reputation":13,"user_id":12425736,"display_name":"Michel Sommer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610060,"creation_date":1691610060,"question_id":76870798,"body_markdown":"I have trouble updating my widget text, with the current location each 1000 ms, i only get the default text in the widget, not the location, can anyone give a hint.\r\n\r\nThe permissions in the manifest is correct, and works in the main application where the location is updated and displayed in the layout.\r\n\r\n\r\n```\r\nimport android.appwidget.AppWidgetManager;\r\nimport android.appwidget.AppWidgetProvider;\r\nimport android.content.Context;\r\nimport android.content.pm.PackageManager;\r\nimport android.widget.RemoteViews;\r\nimport android.location.Location;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.gms.location.LocationCallback;\r\nimport com.google.android.gms.location.LocationRequest;\r\nimport com.google.android.gms.location.LocationResult;\r\nimport com.google.android.gms.location.LocationServices;\r\n\r\nimport dk.seahawk.hamlocator.algorithm.GridAlgorithm;\r\nimport dk.seahawk.hamlocator.algorithm.GridAlgorithmInterface;\r\n\r\n\r\npublic class HamLocatorWidget extends AppWidgetProvider {\r\n    private Context context;\r\n\r\n    private static final int LOCATION_PERMISSION_REQUEST_CODE = 100;\r\n    private FusedLocationProviderClient fusedLocationClient;\r\n    private LocationCallback locationCallback;\r\n    private int INTERVAL = 1000;   // location refresh rate\r\n    private GridAlgorithmInterface gridAlgorithmInterface;\r\n\r\n\r\n    @Override\r\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\r\n        this.context = context;\r\n\r\n        for (int appWidgetId : appWidgetIds) {\r\n            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.ham_locator_widget);\r\n\r\n            // Initialize FusedLocationProviderClient\r\n            fusedLocationClient = LocationServices.getFusedLocationProviderClient(context);\r\n\r\n            // Initialize Maidenhead algorithm\r\n            gridAlgorithmInterface = new GridAlgorithm();\r\n\r\n            // Create and configure LocationCallback\r\n            locationCallback = new LocationCallback() {\r\n                @Override\r\n                public void onLocationResult(@NonNull LocationResult locationResult) {\r\n                    Location location = locationResult.getLastLocation();\r\n                    assert location != null;\r\n\r\n                    // Update location parameters\r\n                    String lastLocation = gridAlgorithmInterface.getGridLocation(location);\r\n\r\n                    views.setTextViewText(R.id.appwidget_text, lastLocation);\r\n                    appWidgetManager.updateAppWidget(appWidgetId, views);\r\n\r\n                    // Stop location updates after obtaining the location\r\n                    stopLocationUpdates();\r\n                }\r\n            };\r\n\r\n            // Start requesting location updates\r\n            startLocationUpdates();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onEnabled(Context context) {\r\n        startLocationUpdates();\r\n    }\r\n\r\n    @Override\r\n    public void onDisabled(Context context) {\r\n        stopLocationUpdates();\r\n    }\r\n\r\n    private void startLocationUpdates() {\r\n        LocationRequest locationRequest = LocationRequest.create();\r\n        locationRequest.setPriority(LOCATION_PERMISSION_REQUEST_CODE);\r\n        locationRequest.setInterval(INTERVAL); // Update interval in milliseconds\r\n\r\n        if (ActivityCompat.checkSelfPermission(context, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(context, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            return;\r\n        }\r\n        fusedLocationClient.requestLocationUpdates(locationRequest, locationCallback, null);\r\n    }\r\n\r\n    private void stopLocationUpdates() {\r\n        if (fusedLocationClient != null &amp;&amp; locationCallback != null) {\r\n            fusedLocationClient.removeLocationUpdates(locationCallback);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is the xml info file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;appwidget-provider xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:description=&quot;@string/app_widget_description&quot;\r\n    android:initialKeyguardLayout=&quot;@layout/ham_locator_widget&quot;\r\n    android:initialLayout=&quot;@layout/ham_locator_widget&quot;\r\n    android:minWidth=&quot;110dp&quot;\r\n    android:minHeight=&quot;40dp&quot;\r\n\r\n    android:previewLayout=&quot;@layout/ham_locator_widget&quot;\r\n    android:targetCellWidth=&quot;4&quot;\r\n    android:targetCellHeight=&quot;2&quot;\r\n    android:updatePeriodMillis=&quot;1000&quot;\r\n    android:widgetCategory=&quot;home_screen&quot; /&gt;\r\n\r\n```\r\n","title":"Android Widget text update","body":"<p>I have trouble updating my widget text, with the current location each 1000 ms, i only get the default text in the widget, not the location, can anyone give a hint.</p>\n<p>The permissions in the manifest is correct, and works in the main application where the location is updated and displayed in the layout.</p>\n<pre><code>import android.appwidget.AppWidgetManager;\nimport android.appwidget.AppWidgetProvider;\nimport android.content.Context;\nimport android.content.pm.PackageManager;\nimport android.widget.RemoteViews;\nimport android.location.Location;\n\nimport androidx.annotation.NonNull;\nimport androidx.core.app.ActivityCompat;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\nimport com.google.android.gms.location.LocationCallback;\nimport com.google.android.gms.location.LocationRequest;\nimport com.google.android.gms.location.LocationResult;\nimport com.google.android.gms.location.LocationServices;\n\nimport dk.seahawk.hamlocator.algorithm.GridAlgorithm;\nimport dk.seahawk.hamlocator.algorithm.GridAlgorithmInterface;\n\n\npublic class HamLocatorWidget extends AppWidgetProvider {\n    private Context context;\n\n    private static final int LOCATION_PERMISSION_REQUEST_CODE = 100;\n    private FusedLocationProviderClient fusedLocationClient;\n    private LocationCallback locationCallback;\n    private int INTERVAL = 1000;   // location refresh rate\n    private GridAlgorithmInterface gridAlgorithmInterface;\n\n\n    @Override\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\n        this.context = context;\n\n        for (int appWidgetId : appWidgetIds) {\n            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.ham_locator_widget);\n\n            // Initialize FusedLocationProviderClient\n            fusedLocationClient = LocationServices.getFusedLocationProviderClient(context);\n\n            // Initialize Maidenhead algorithm\n            gridAlgorithmInterface = new GridAlgorithm();\n\n            // Create and configure LocationCallback\n            locationCallback = new LocationCallback() {\n                @Override\n                public void onLocationResult(@NonNull LocationResult locationResult) {\n                    Location location = locationResult.getLastLocation();\n                    assert location != null;\n\n                    // Update location parameters\n                    String lastLocation = gridAlgorithmInterface.getGridLocation(location);\n\n                    views.setTextViewText(R.id.appwidget_text, lastLocation);\n                    appWidgetManager.updateAppWidget(appWidgetId, views);\n\n                    // Stop location updates after obtaining the location\n                    stopLocationUpdates();\n                }\n            };\n\n            // Start requesting location updates\n            startLocationUpdates();\n        }\n    }\n\n    @Override\n    public void onEnabled(Context context) {\n        startLocationUpdates();\n    }\n\n    @Override\n    public void onDisabled(Context context) {\n        stopLocationUpdates();\n    }\n\n    private void startLocationUpdates() {\n        LocationRequest locationRequest = LocationRequest.create();\n        locationRequest.setPriority(LOCATION_PERMISSION_REQUEST_CODE);\n        locationRequest.setInterval(INTERVAL); // Update interval in milliseconds\n\n        if (ActivityCompat.checkSelfPermission(context, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(context, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            return;\n        }\n        fusedLocationClient.requestLocationUpdates(locationRequest, locationCallback, null);\n    }\n\n    private void stopLocationUpdates() {\n        if (fusedLocationClient != null &amp;&amp; locationCallback != null) {\n            fusedLocationClient.removeLocationUpdates(locationCallback);\n        }\n    }\n\n}\n</code></pre>\n<p>Here is the xml info file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;appwidget-provider xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:description=&quot;@string/app_widget_description&quot;\n    android:initialKeyguardLayout=&quot;@layout/ham_locator_widget&quot;\n    android:initialLayout=&quot;@layout/ham_locator_widget&quot;\n    android:minWidth=&quot;110dp&quot;\n    android:minHeight=&quot;40dp&quot;\n\n    android:previewLayout=&quot;@layout/ham_locator_widget&quot;\n    android:targetCellWidth=&quot;4&quot;\n    android:targetCellHeight=&quot;2&quot;\n    android:updatePeriodMillis=&quot;1000&quot;\n    android:widgetCategory=&quot;home_screen&quot; /&gt;\n\n</code></pre>\n"},{"tags":["java","android","kotlin","android-debug"],"answers":[{"comments":[{"owner":{"account_id":29193971,"reputation":1,"user_id":22365524,"display_name":"kosi"},"score":0,"creation_date":1691611815,"post_id":76870766,"comment_id":135516594,"body_markdown":"thanks alot. I did as you said, it worked but this time, the route drawn wasn&#39;t fully shown on the screen, it appeared cut off probably has a connection to the override onMapReady function","body":"thanks alot. I did as you said, it worked but this time, the route drawn wasn&#39;t fully shown on the screen, it appeared cut off probably has a connection to the override onMapReady function"},{"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"score":0,"creation_date":1691613522,"post_id":76870766,"comment_id":135516881,"body_markdown":"Yep I told you there could be some problems after @kosi","body":"Yep I told you there could be some problems after @kosi"},{"owner":{"account_id":29193971,"reputation":1,"user_id":22365524,"display_name":"kosi"},"score":0,"creation_date":1691616071,"post_id":76870766,"comment_id":135517298,"body_markdown":"can you help me out?","body":"can you help me out?"},{"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"score":0,"creation_date":1691616096,"post_id":76870766,"comment_id":135517303,"body_markdown":"I would need the entire code to help you find a solution @kosi","body":"I would need the entire code to help you find a solution @kosi"},{"owner":{"account_id":29193971,"reputation":1,"user_id":22365524,"display_name":"kosi"},"score":0,"creation_date":1691622298,"post_id":76870766,"comment_id":135518110,"body_markdown":"how can i get that to you?","body":"how can i get that to you?"},{"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"score":0,"creation_date":1691651204,"post_id":76870766,"comment_id":135520770,"body_markdown":"You could copy paste fully in your question by editing it","body":"You could copy paste fully in your question by editing it"}],"tags":[],"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691609781,"creation_date":1691609781,"answer_id":76870766,"question_id":76870250,"body_markdown":"The error is caused because the function `drawRouteOnMap()` uses the variable `polyline` before it is initialized, since you declared it `lateinit`. This means you have to use the function `drawRouteOnMap()` only **after** `polyline` has a value.\r\n\r\nIn **this** piece of code you provided, moving / calling again the `drawRouteOnMap()` immediately after \r\n\r\n`polyline = response.body()?...` \r\n\r\nshould solve your problem, like this:\r\n\r\n    \r\n    val requestCall = routeService.getRoutes(origin, destination, apiKey)\r\n    requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\r\n        override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\r\n\r\n            if (response.isSuccessful) {\r\n\r\n                if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\r\n\r\n\r\n                    polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\r\n\r\n                    drawRouteOnMap()\r\n                }else{\r\n                    ....\r\n\r\nKeep in mind that since there is more code other than this, using the function `drawRouteOnMap()` in the response **could not** suit your case. By doing that it may generate others errors.\r\n\r\nThe [documentation][1] helps also checking if a variable is initialized or not, have a look.\r\n\r\nIf this doesn&#39;t help, please let me know and I&#39;ll provide more support, happy coding!\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/properties.html#late-initialized-properties-and-variables","title":"UninitializedPropertyAccessException while working with lateinit","body":"<p>The error is caused because the function <code>drawRouteOnMap()</code> uses the variable <code>polyline</code> before it is initialized, since you declared it <code>lateinit</code>. This means you have to use the function <code>drawRouteOnMap()</code> only <strong>after</strong> <code>polyline</code> has a value.</p>\n<p>In <strong>this</strong> piece of code you provided, moving / calling again the <code>drawRouteOnMap()</code> immediately after</p>\n<p><code>polyline = response.body()?...</code></p>\n<p>should solve your problem, like this:</p>\n<pre><code>val requestCall = routeService.getRoutes(origin, destination, apiKey)\nrequestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\n    override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\n\n        if (response.isSuccessful) {\n\n            if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\n\n\n                polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\n\n                drawRouteOnMap()\n            }else{\n                ....\n</code></pre>\n<p>Keep in mind that since there is more code other than this, using the function <code>drawRouteOnMap()</code> in the response <strong>could not</strong> suit your case. By doing that it may generate others errors.</p>\n<p>The <a href=\"https://kotlinlang.org/docs/properties.html#late-initialized-properties-and-variables\" rel=\"nofollow noreferrer\">documentation</a> helps also checking if a variable is initialized or not, have a look.</p>\n<p>If this doesn't help, please let me know and I'll provide more support, happy coding!</p>\n"}],"owner":{"account_id":29193971,"reputation":1,"user_id":22365524,"display_name":"kosi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691609781,"creation_date":1691604132,"question_id":76870250,"body_markdown":"I&#39;m working on Android development using Kotlin, and encountering an issue with a lateinit var named polyline. The error I&#39;m getting suggests that even though I assigned a value to polyline inside a function called from the onCreate, the app is still crashing with the message that polyline has not been initialized.\r\n\r\nPls how do I go about this? Is there something I&#39;m missing?\r\n\r\nSee the code below. I removed all unneccessary codes for this question\r\n\r\n```\r\nclass CustomerMapActivity : AppCompatActivity(), OnMapReadyCallback {\r\n\r\n    private lateinit var polyline: String\r\n\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityCustomerMapBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        val pickUpLocation = &quot;Hall 2 Car Park, Benin City, Nigeria&quot;\r\n        val dropOffLocation = &quot;Nadia Bakery, Benin City, Nigeria&quot;\r\n        val apiKey = R.string.google_api_key.toString()\r\n\r\n        routesDetails(pickUpLocation, dropOffLocation, apiKey)\r\n\r\n\r\n    }\r\n\r\n\r\n    override fun onMapReady(mMap: GoogleMap) {\r\n        \r\n        drawRouteOnMap()\r\n\r\n    }\r\n\r\n\r\n    private fun routesDetails(origin: String, destination: String, apiKey: String){\r\n\r\n        val routeService = ServiceBuilder.buildService(RouteService::class.java)\r\n\r\n        val requestCall = routeService.getRoutes(origin, destination, apiKey)\r\n        requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\r\n            override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\r\n\r\n                if (response.isSuccessful) {\r\n\r\n                    if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\r\n\r\n\r\n                        polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\r\n\r\n                    }else{\r\n                    }\r\n                }\r\n            }\r\n\r\n            override fun onFailure(call: Call&lt;RoutesResponse&gt;, t: Throwable) {\r\n\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n\r\n\r\n    private fun drawRouteOnMap() {\r\n        val decodedPolyline = PolyUtil.decode(polyline)\r\n        \r\n    }\r\n```\r\n\r\n\r\n\r\nLogcat:\r\n\r\n```\r\nFATAL EXCEPTION: main\r\n                                                                                                    Process: leoh.portcustomer, PID: 24494\r\n                                                                                                    kotlin.UninitializedPropertyAccessException: lateinit property polyline has not been initialized\r\n                                                                                                    \tat leoh.portcustomer.activities.CustomerMapActivity.drawRouteOnMap(CustomerMapActivity.kt:162)\r\n                                                                                                    \tat leoh.portcustomer.activities.CustomerMapActivity.onMapReady(CustomerMapActivity.kt:104)\r\n                                                                                                    \tat com.google.android.gms.maps.zzat.zzb(com.google.android.gms:play-services-maps@@18.1.0:1)\r\n                                                                                                    \tat com.google.android.gms.maps.internal.zzar.zza(com.google.android.gms:play-services-maps@@18.1.0:6)\r\n                                                                                                    \tat com.google.android.gms.internal.maps.zzb.onTransact(com.google.android.gms:play-services-maps@@18.1.0:3)\r\n                                                                                                    \tat android.os.Binder.transact(Binder.java:1043)\r\n                                                                                                    \tat m.ff.c(:com.google.android.gms.dynamite_mapsdynamite@232617040@23.26.17 (150700-0):8)\r\n                                                                                                    \tat com.google.maps.api.android.lib6.impl.bg.run(:com.google.android.gms.dynamite_mapsdynamite@232617040@23.26.17 (150700-0):19)\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:938)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:223)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:7656)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n```\r\n\r\nTried resolving it but wasnt still working.\r\nI&#39;ll appreciate your asistance","title":"UninitializedPropertyAccessException while working with lateinit","body":"<p>I'm working on Android development using Kotlin, and encountering an issue with a lateinit var named polyline. The error I'm getting suggests that even though I assigned a value to polyline inside a function called from the onCreate, the app is still crashing with the message that polyline has not been initialized.</p>\n<p>Pls how do I go about this? Is there something I'm missing?</p>\n<p>See the code below. I removed all unneccessary codes for this question</p>\n<pre><code>class CustomerMapActivity : AppCompatActivity(), OnMapReadyCallback {\n\n    private lateinit var polyline: String\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        binding = ActivityCustomerMapBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        val pickUpLocation = &quot;Hall 2 Car Park, Benin City, Nigeria&quot;\n        val dropOffLocation = &quot;Nadia Bakery, Benin City, Nigeria&quot;\n        val apiKey = R.string.google_api_key.toString()\n\n        routesDetails(pickUpLocation, dropOffLocation, apiKey)\n\n\n    }\n\n\n    override fun onMapReady(mMap: GoogleMap) {\n        \n        drawRouteOnMap()\n\n    }\n\n\n    private fun routesDetails(origin: String, destination: String, apiKey: String){\n\n        val routeService = ServiceBuilder.buildService(RouteService::class.java)\n\n        val requestCall = routeService.getRoutes(origin, destination, apiKey)\n        requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\n            override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\n\n                if (response.isSuccessful) {\n\n                    if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\n\n\n                        polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\n\n                    }else{\n                    }\n                }\n            }\n\n            override fun onFailure(call: Call&lt;RoutesResponse&gt;, t: Throwable) {\n\n            }\n\n        })\n    }\n\n\n\n    private fun drawRouteOnMap() {\n        val decodedPolyline = PolyUtil.decode(polyline)\n        \n    }\n</code></pre>\n<p>Logcat:</p>\n<pre><code>FATAL EXCEPTION: main\n                                                                                                    Process: leoh.portcustomer, PID: 24494\n                                                                                                    kotlin.UninitializedPropertyAccessException: lateinit property polyline has not been initialized\n                                                                                                        at leoh.portcustomer.activities.CustomerMapActivity.drawRouteOnMap(CustomerMapActivity.kt:162)\n                                                                                                        at leoh.portcustomer.activities.CustomerMapActivity.onMapReady(CustomerMapActivity.kt:104)\n                                                                                                        at com.google.android.gms.maps.zzat.zzb(com.google.android.gms:play-services-maps@@18.1.0:1)\n                                                                                                        at com.google.android.gms.maps.internal.zzar.zza(com.google.android.gms:play-services-maps@@18.1.0:6)\n                                                                                                        at com.google.android.gms.internal.maps.zzb.onTransact(com.google.android.gms:play-services-maps@@18.1.0:3)\n                                                                                                        at android.os.Binder.transact(Binder.java:1043)\n                                                                                                        at m.ff.c(:com.google.android.gms.dynamite_mapsdynamite@232617040@23.26.17 (150700-0):8)\n                                                                                                        at com.google.maps.api.android.lib6.impl.bg.run(:com.google.android.gms.dynamite_mapsdynamite@232617040@23.26.17 (150700-0):19)\n                                                                                                        at android.os.Handler.handleCallback(Handler.java:938)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:99)\n                                                                                                        at android.os.Looper.loop(Looper.java:223)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:7656)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>Tried resolving it but wasnt still working.\nI'll appreciate your asistance</p>\n"},{"tags":["java","sonarqube","saxon","illegalargumentexception","xxe"],"comments":[{"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"score":0,"creation_date":1635524514,"post_id":69771879,"comment_id":123330322,"body_markdown":"It seems like Sonar is detecting a legitimate error, and asking you to fix it by updating your version of the library. And you would prefer not to update, because then you would need to test more things because the code would be different. Yes, it will be more work to update, but any other answer will also require work (for example, backporting a fix for the bug and tricking Sonar into accepting it) -- and as libraries continue to change, it will be even harder to keep your code up to date. So, in short: update your library version.","body":"It seems like Sonar is detecting a legitimate error, and asking you to fix it by updating your version of the library. And you would prefer not to update, because then you would need to test more things because the code would be different. Yes, it will be more work to update, but any other answer will also require work (for example, backporting a fix for the bug and tricking Sonar into accepting it) -- and as libraries continue to change, it will be even harder to keep your code up to date. So, in short: update your library version."},{"owner":{"account_id":23183025,"reputation":11,"user_id":17280586,"display_name":"Dharani Dharan"},"score":0,"creation_date":1635746179,"post_id":69771879,"comment_id":123367482,"body_markdown":"Hi @tucuxi , thans for the detailed info. One question here:\nThe 10.3 version of this interface replaces InstructionInfo with Traceable --&gt; How do I use getConstructType() in this version or what&#39;s the alternative for this, like i asked in the second question. Thanks in advance.","body":"Hi @tucuxi , thans for the detailed info. One question here: The 10.3 version of this interface replaces InstructionInfo with Traceable --&gt; How do I use getConstructType() in this version or what&#39;s the alternative for this, like i asked in the second question. Thanks in advance."}],"answers":[{"comments":[{"owner":{"account_id":23183025,"reputation":11,"user_id":17280586,"display_name":"Dharani Dharan"},"score":0,"creation_date":1635746827,"post_id":69775077,"comment_id":123367576,"body_markdown":"Hi @Michael Kay , thanks for the detailed info. if saxon 9.7 uses Jaxp 1.3, I understand from your answer that, we cannot disable access to external entity in this version, pls correct me if I&#39;m wrong. \nOne question here:\nThe 10.3 version of this interface replaces InstructionInfo with Traceable --&gt; How do I use getConstructType() in this version or what&#39;s the alternative for this (the second question in my posted query)\n\nThanks in advance.","body":"Hi @Michael Kay , thanks for the detailed info. if saxon 9.7 uses Jaxp 1.3, I understand from your answer that, we cannot disable access to external entity in this version, pls correct me if I&#39;m wrong.  One question here: The 10.3 version of this interface replaces InstructionInfo with Traceable --&gt; How do I use getConstructType() in this version or what&#39;s the alternative for this (the second question in my posted query)  Thanks in advance."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1635769279,"post_id":69775077,"comment_id":123374177,"body_markdown":"You can disable access to external entities by supplying your own XMLReader instance (e.g. in a SAXSource) and configuring it yourself, rather than relying on Saxon to do so; or by setting an EntityResolver in various interfaces.","body":"You can disable access to external entities by supplying your own XMLReader instance (e.g. in a SAXSource) and configuring it yourself, rather than relying on Saxon to do so; or by setting an EntityResolver in various interfaces."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1635769312,"post_id":69775077,"comment_id":123374192,"body_markdown":"As mentioned in my previous response, you can use &quot;instanceof&quot; on the Traceable.","body":"As mentioned in my previous response, you can use &quot;instanceof&quot; on the Traceable."},{"owner":{"account_id":23183025,"reputation":11,"user_id":17280586,"display_name":"Dharani Dharan"},"score":0,"creation_date":1635773339,"post_id":69775077,"comment_id":123375769,"body_markdown":"Thanks for the response @Michael . Sorry I&#39;m asking more but I&#39;m a newbee here , so any example with &quot;instanceof&quot; wud be very helpful and much appreciated.","body":"Thanks for the response @Michael . Sorry I&#39;m asking more but I&#39;m a newbee here , so any example with &quot;instanceof&quot; wud be very helpful and much appreciated."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1635788432,"post_id":69775077,"comment_id":123381563,"body_markdown":"Your code does `if ((data == 155) || (data == 200)) {`, which I think corresponds to `xsl:for-each` and `xsl:template` in Saxon 9.9, though the numbers probably changed from one release to another, which was a major reason for changing the interface. In 10.x use `traceable instanceof ForEach`, `traceable instanceof NamedTemplate`, `traceable instanceof TemplateRule`. I&#39;m afraid the names are still poorly documented, but they&#39;re a bit more likely to be stable.","body":"Your code does <code>if ((data == 155) || (data == 200)) {</code>, which I think corresponds to <code>xsl:for-each</code> and <code>xsl:template</code> in Saxon 9.9, though the numbers probably changed from one release to another, which was a major reason for changing the interface. In 10.x use <code>traceable instanceof ForEach</code>, <code>traceable instanceof NamedTemplate</code>, <code>traceable instanceof TemplateRule</code>. I&#39;m afraid the names are still poorly documented, but they&#39;re a bit more likely to be stable."}],"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635543821,"creation_date":1635543821,"answer_id":69775077,"question_id":69771879,"body_markdown":"First point: to be a little argumentative, it is NOT a bug in Saxon 9.7. The Javadoc for TransformerFactory (in Java 8) says &quot;All implementations that implement JAXP 1.5 or newer are required to support the XMLConstants.ACCESS_EXTERNAL_DTD and XMLConstants.ACCESS_EXTERNAL_STYLESHEET properties.&quot; but Saxon 9.7 never claimed to implement JAXP 1.5, it only claimed to implement JAXP 1.3.\r\n\r\nSaying &quot;I want to stay on an old release of Saxon but I can&#39;t, because I want a version that supports a new feature of JAXP&quot; is very understandable, but not actually very logical.\r\n\r\nOne solution to this is to add your own implementation of the TransformerFactory API, which intercepts the attempt to set this property and doesn&#39;t pass it on to Saxon.\r\n\r\nNote that this property is in the wrong place anyway. DTD processing is the responsibility of the XML parser, not the XSLT processor. The specification doesn&#39;t make it clear exactly what effect it&#39;s supposed to have. If the XSLT processor instantiates the XML parser, it seems reasonable that it should pass the property on, but what should it do if it&#39;s not accepted? And should it pass it on at all if the XML parser is created by the user application rather than by the XSLT processor? Generally it&#39;s a very frustrating exercise trying to implement rules like this in the JAXP specification, which are often very fuzzily specified.\r\n\r\nI would encourage you generally to try to keep abreast of new Saxon releases to avoid hitting problems which have already been solved. Yes, it&#39;s true that we occasionally revise the design of some of the &quot;system programming&quot; interfaces such as the `TraceListener` interface. The 10.3 version of this interface replaces `InstructionInfo` with `Traceable`, and to find out what kind of `Traceable` is involved, you should use `instanceof`.\r\n\r\nWhen we do make changes, we often introduce a new API in one major version and drop the old API in the following version. If you jump forward three major releases in one go (9.7 to 10, skipping 9.8 and 9.9) then you&#39;re not able to take advantage of these transition aids.","title":"Hi, I&#39;m facing a blocker in a SonarQube violation - Disable access to external entities in XML parsing","body":"<p>First point: to be a little argumentative, it is NOT a bug in Saxon 9.7. The Javadoc for TransformerFactory (in Java 8) says &quot;All implementations that implement JAXP 1.5 or newer are required to support the XMLConstants.ACCESS_EXTERNAL_DTD and XMLConstants.ACCESS_EXTERNAL_STYLESHEET properties.&quot; but Saxon 9.7 never claimed to implement JAXP 1.5, it only claimed to implement JAXP 1.3.</p>\n<p>Saying &quot;I want to stay on an old release of Saxon but I can't, because I want a version that supports a new feature of JAXP&quot; is very understandable, but not actually very logical.</p>\n<p>One solution to this is to add your own implementation of the TransformerFactory API, which intercepts the attempt to set this property and doesn't pass it on to Saxon.</p>\n<p>Note that this property is in the wrong place anyway. DTD processing is the responsibility of the XML parser, not the XSLT processor. The specification doesn't make it clear exactly what effect it's supposed to have. If the XSLT processor instantiates the XML parser, it seems reasonable that it should pass the property on, but what should it do if it's not accepted? And should it pass it on at all if the XML parser is created by the user application rather than by the XSLT processor? Generally it's a very frustrating exercise trying to implement rules like this in the JAXP specification, which are often very fuzzily specified.</p>\n<p>I would encourage you generally to try to keep abreast of new Saxon releases to avoid hitting problems which have already been solved. Yes, it's true that we occasionally revise the design of some of the &quot;system programming&quot; interfaces such as the <code>TraceListener</code> interface. The 10.3 version of this interface replaces <code>InstructionInfo</code> with <code>Traceable</code>, and to find out what kind of <code>Traceable</code> is involved, you should use <code>instanceof</code>.</p>\n<p>When we do make changes, we often introduce a new API in one major version and drop the old API in the following version. If you jump forward three major releases in one go (9.7 to 10, skipping 9.8 and 9.9) then you're not able to take advantage of these transition aids.</p>\n"},{"tags":[],"owner":{"account_id":1912600,"reputation":17,"user_id":1725982,"display_name":"mrharmon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691609080,"creation_date":1691609080,"answer_id":76870698,"question_id":69771879,"body_markdown":"   \r\n    TransformerFactory tf = TransformerFactory.newInstance();\r\n    tf.setAttribute(“http://javax.xml.XMLConstants/property/accessExternalDTD”,””);\r\n    tf.setAttribute(&quot;http://javax.xml.XMLConstants/property/accessExternalStylesheet&quot;,””);\r\n    Transformer transformer = tf.newTransformer();\r\n\r\nreference: https://community.veracode.com/s/article/Java-Remediation-Guidance-for-XXE\r\n","title":"Hi, I&#39;m facing a blocker in a SonarQube violation - Disable access to external entities in XML parsing","body":"<pre><code>TransformerFactory tf = TransformerFactory.newInstance();\ntf.setAttribute(“http://javax.xml.XMLConstants/property/accessExternalDTD”,””);\ntf.setAttribute(&quot;http://javax.xml.XMLConstants/property/accessExternalStylesheet&quot;,””);\nTransformer transformer = tf.newTransformer();\n</code></pre>\n<p>reference: <a href=\"https://community.veracode.com/s/article/Java-Remediation-Guidance-for-XXE\" rel=\"nofollow noreferrer\">https://community.veracode.com/s/article/Java-Remediation-Guidance-for-XXE</a></p>\n"}],"owner":{"account_id":23183025,"reputation":11,"user_id":17280586,"display_name":"Dharani Dharan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1052,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691609080,"creation_date":1635523519,"question_id":69771879,"body_markdown":"Tried with the fix given in sonarqube.\r\n\r\n            *TransformerFactory tfactory = TransformerFactory.newInstance();\r\n\t\t\ttfactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\r\n\t\t\ttfactory.setAttribute(javax.xml.XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\r\n\t\t\treturn tfactory;*\r\n\r\nBut I&#39;m facing a runtime exception on setAttribute:\r\n&quot;java.lang.IllegalArgumentException: Unknown configuration property http://javax.xml.XMLConstants/property/accessExternalDTD&quot;\r\n\r\nThis seems to be because of a bug in the version of saxon jar im using [9.7] . And its working fine on saxon 10.3 . Please refer https://saxonica.plan.io/issues/4729 for this bug.\r\n\r\nBelow are my questions:\r\n\r\n1) Is there any way to make it work on my existing saxon version (without upgrading it to 10.x). Tried using transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true) but sonarqube is not satisfied as it expects above fix.\r\n\r\n2) If upgrading to 10.x is the only way, then below is the challenge im facing:\r\n\r\n    I&#39;m overriding a method from TraceListener for some business logics. But the method signature \r\n    got changed on latest version like below:\r\n   \r\n   Class - net.sf.saxon.lib.TraceListener\r\n\r\n   Saxon 9.7 -&gt; public void enter(InstructionInfo instruction, XPathContext context)\r\n\r\n   Saxon 10.x -&gt; public void enter(Traceable instruction, \r\n            java.util.Map&lt;java.lang.String,java.lang.Object&gt; properties, XPathContext context)  \r\n\r\n    My current Code:\r\n\r\n       *@Override\r\n       public void enter(InstructionInfo instruction, XPathContext context)\t{\r\n\t\tint data = instruction.getConstructType();\r\n\t\tif ((data == 155) || (data == 200)) {\r\n\t\t\t.......logic......\r\n\t\t}\r\n\t   }*\r\n\r\n  My new code will be :\r\n\r\n       *@Override\r\n       public void enter(Traceable instruction,           \r\n        java.util.Map&lt;java.lang.String,java.lang.Object&gt; properties, XPathContext context){\r\n\t\t--&gt; what to use here for getConstructType()\r\n\t\tif ((data == 155) || (data == 200)) {\r\n\t\t\t.......logic......\r\n\t\t}\r\n\t   }*\r\n\r\nSo the problem is 10.x jar doesn&#39;t have getConstructType() method in its Traceable class or InstructionInfo class. How do I use getConstructType() in 10.x version?\r\n\r\nP.S : It will be very helpful if the 1st question gets answered i.e) if I can be able to resolve with my current version of jar as new version requires testing of all the functionalities throughout the project :(  Hope someone can help me, thanks in advance.\r\n\r\n       ","title":"Hi, I&#39;m facing a blocker in a SonarQube violation - Disable access to external entities in XML parsing","body":"<p>Tried with the fix given in sonarqube.</p>\n<pre><code>        *TransformerFactory tfactory = TransformerFactory.newInstance();\n        tfactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\n        tfactory.setAttribute(javax.xml.XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\n        return tfactory;*\n</code></pre>\n<p>But I'm facing a runtime exception on setAttribute:\n&quot;java.lang.IllegalArgumentException: Unknown configuration property <a href=\"http://javax.xml.XMLConstants/property/accessExternalDTD%22\" rel=\"nofollow noreferrer\">http://javax.xml.XMLConstants/property/accessExternalDTD&quot;</a></p>\n<p>This seems to be because of a bug in the version of saxon jar im using [9.7] . And its working fine on saxon 10.3 . Please refer <a href=\"https://saxonica.plan.io/issues/4729\" rel=\"nofollow noreferrer\">https://saxonica.plan.io/issues/4729</a> for this bug.</p>\n<p>Below are my questions:</p>\n<ol>\n<li><p>Is there any way to make it work on my existing saxon version (without upgrading it to 10.x). Tried using transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true) but sonarqube is not satisfied as it expects above fix.</p>\n</li>\n<li><p>If upgrading to 10.x is the only way, then below is the challenge im facing:</p>\n<p>I'm overriding a method from TraceListener for some business logics. But the method signature\ngot changed on latest version like below:</p>\n<p>Class - net.sf.saxon.lib.TraceListener</p>\n<p>Saxon 9.7 -&gt; public void enter(InstructionInfo instruction, XPathContext context)</p>\n<p>Saxon 10.x -&gt; public void enter(Traceable instruction,\njava.util.Map&lt;java.lang.String,java.lang.Object&gt; properties, XPathContext context)</p>\n<p>My current Code:</p>\n<pre><code>*@Override\npublic void enter(InstructionInfo instruction, XPathContext context) {\n int data = instruction.getConstructType();\n if ((data == 155) || (data == 200)) {\n     .......logic......\n }\n}*\n</code></pre>\n</li>\n</ol>\n<p>My new code will be :</p>\n<pre><code>   *@Override\n   public void enter(Traceable instruction,           \n    java.util.Map&lt;java.lang.String,java.lang.Object&gt; properties, XPathContext context){\n    --&gt; what to use here for getConstructType()\n    if ((data == 155) || (data == 200)) {\n        .......logic......\n    }\n   }*\n</code></pre>\n<p>So the problem is 10.x jar doesn't have getConstructType() method in its Traceable class or InstructionInfo class. How do I use getConstructType() in 10.x version?</p>\n<p>P.S : It will be very helpful if the 1st question gets answered i.e) if I can be able to resolve with my current version of jar as new version requires testing of all the functionalities throughout the project :(  Hope someone can help me, thanks in advance.</p>\n"},{"tags":["java","spring-boot","junit5"],"comments":[{"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"score":0,"creation_date":1691582815,"post_id":76867608,"comment_id":135510684,"body_markdown":"you might want to look at [parameterized tests](https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests)","body":"you might want to look at <a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests\" rel=\"nofollow noreferrer\">parameterized tests</a>"},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1691583979,"post_id":76867608,"comment_id":135510906,"body_markdown":"can it be used on the init() method that&#39;s annotated with @BeforeAll?","body":"can it be used on the init() method that&#39;s annotated with @BeforeAll?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1691591854,"post_id":76867608,"comment_id":135512822,"body_markdown":"If these are your only tests, then is that method really necessary? Inside `testZip` you generate the files again anyway, so the only method that uses the result of `init` is `testMetaAttributeFile`. You might as well remove the field completely and turn it into a local variable like in `testZip`.","body":"If these are your only tests, then is that method really necessary? Inside <code>testZip</code> you generate the files again anyway, so the only method that uses the result of <code>init</code> is <code>testMetaAttributeFile</code>. You might as well remove the field completely and turn it into a local variable like in <code>testZip</code>."},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1691598827,"post_id":76867608,"comment_id":135514430,"body_markdown":"@RobSpoor I added one more dummy method. There are actually in total 4 methods like testXYXFile() , all of them use the result of init() method.","body":"@RobSpoor I added one more dummy method. There are actually in total 4 methods like testXYXFile() , all of them use the result of init() method."}],"answers":[{"comments":[{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1691585825,"post_id":76867707,"comment_id":135511349,"body_markdown":"In my case the init() method `new YourClassToTest();` The class new YourClassToTest(); also needs the version to be instantiated","body":"In my case the init() method <code>new YourClassToTest();</code> The class new YourClassToTest(); also needs the version to be instantiated"},{"owner":{"account_id":18042274,"reputation":36,"user_id":13114087,"display_name":"SHresTho12"},"score":0,"creation_date":1692191478,"post_id":76867707,"comment_id":135590150,"body_markdown":"I think then you can avoid the init function and create the object in the test method it self , It is not a good practice but it serves the purpose I guess","body":"I think then you can avoid the init function and create the object in the test method it self , It is not a good practice but it serves the purpose I guess"}],"tags":[],"owner":{"account_id":18042274,"reputation":36,"user_id":13114087,"display_name":"SHresTho12"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691583395,"creation_date":1691583395,"answer_id":76867707,"question_id":76867608,"body_markdown":"You can use parameterized testing. It runs same test on different parameters.\r\n \r\n\r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.params.ParameterizedTest;\r\n    import org.junit.jupiter.params.provider.MethodSource;\r\n    import java.util.stream.Stream;\r\n    \r\n        public class YourTestClass {\r\n        \r\n            private YourClassToTest yourClassToTest;\r\n    \r\n        @BeforeEach\r\n        public void init() {\r\n            yourClassToTest = new YourClassToTest();\r\n        }\r\n            @ParameterizedTest\r\n            @MethodSource(&quot;versions&quot;)\r\n            public void testWithDifferentVersions(String version) {\r\n                // Set the version in your test class based on the parameter\r\n                yourClassToTest.setVersion(version);\r\n                \r\n                // Your test assertions\r\n            }\r\n        \r\n            static Stream&lt;String&gt; versions() {\r\n                return Stream.of(&quot;0.25.1&quot;, &quot;0.24.1&quot;, &quot;0.24.0&quot;);\r\n            }\r\n        \r\n        }","title":"Run Junit test for various values of a list","body":"<p>You can use parameterized testing. It runs same test on different parameters.</p>\n<pre><code>import org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.MethodSource;\nimport java.util.stream.Stream;\n\n    public class YourTestClass {\n    \n        private YourClassToTest yourClassToTest;\n\n    @BeforeEach\n    public void init() {\n        yourClassToTest = new YourClassToTest();\n    }\n        @ParameterizedTest\n        @MethodSource(&quot;versions&quot;)\n        public void testWithDifferentVersions(String version) {\n            // Set the version in your test class based on the parameter\n            yourClassToTest.setVersion(version);\n            \n            // Your test assertions\n        }\n    \n        static Stream&lt;String&gt; versions() {\n            return Stream.of(&quot;0.25.1&quot;, &quot;0.24.1&quot;, &quot;0.24.0&quot;);\n        }\n    \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21488854,"reputation":1062,"user_id":15834974,"display_name":"vnk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691608170,"creation_date":1691608170,"answer_id":76870614,"question_id":76867608,"body_markdown":"This approach defines a constructor for a parametrized test class that can accept parameters that correspond to the input values for parameterized tests.  A factory method is used to create test instances with different sets of input values (in this case, a list of version strings) &lt;br&gt;\r\n\r\nWhen you run the tests, an instance of `MDServiceTest` for each input value provided by the data method is created, and the constructor will initialize `version` for each instance.\r\n\r\n```\r\n@RunWith(Parameterized.class)\r\nclass MDServiceTest {\r\n\r\n    @Autowired\r\n    private MDService MDService;\r\n    private List&lt;File&gt; MDFiles;\r\n    private static final String version;\r\n    private List&lt;File&gt; MDFiles;\r\n    private final String MDType=&quot;WLCR&quot;;\r\n\r\n    public MDServiceTest(String version){\r\n        this.version = version;\r\n        MDFiles = MDService.generateMDFiles(version, MDType);\r\n    }\r\n    @Test\r\n    void testMetaAttributeFile() throws IOException {\r\n        File MDAttribFile = MDFiles.get(0);\r\n        String filePath = String.format(&quot;src/%s/%s_%s.csv&quot;, version, MDType,version);\r\n        File expectedMDAttribFile = new File(filePath);\r\n        Assert.assertTrue(Utility.compareCsvFiles(expectedMDAttribFile, MDAttribFile));\r\n    }\r\n\r\n    @Test\r\n    void testMetaFile() throws IOException {\r\n        File MDAttribFile = MDFiles.get(1);\r\n                       .\r\n                       .\r\n                       .\r\n\r\n    }\r\n\r\n    @Test\r\n    void testZip() throws IOException, InterruptedException {\r\n        List&lt;File&gt; MDFiles = MDService.generateMDFiles(&quot;0.24.1&quot;, &quot;WLCR&quot;);\r\n        String zipFileName = &quot;test.zip&quot;;\r\n        File file = Utility.zipIt(MDFiles, zipFileName);\r\n        Assert.assertEquals(zipFileName, file.getName());\r\n    }\r\n\r\n    @Parameterized.Parameters\r\n    public static Collection&lt;Object[]&gt; data() {\r\n        return Arrays.asList(new Object[][]{\r\n                {&quot;0.24.1&quot;},\r\n                {&quot;0.25.1&quot;}\r\n        });\r\n    }\r\n```","title":"Run Junit test for various values of a list","body":"<p>This approach defines a constructor for a parametrized test class that can accept parameters that correspond to the input values for parameterized tests.  A factory method is used to create test instances with different sets of input values (in this case, a list of version strings) <br></p>\n<p>When you run the tests, an instance of <code>MDServiceTest</code> for each input value provided by the data method is created, and the constructor will initialize <code>version</code> for each instance.</p>\n<pre><code>@RunWith(Parameterized.class)\nclass MDServiceTest {\n\n    @Autowired\n    private MDService MDService;\n    private List&lt;File&gt; MDFiles;\n    private static final String version;\n    private List&lt;File&gt; MDFiles;\n    private final String MDType=&quot;WLCR&quot;;\n\n    public MDServiceTest(String version){\n        this.version = version;\n        MDFiles = MDService.generateMDFiles(version, MDType);\n    }\n    @Test\n    void testMetaAttributeFile() throws IOException {\n        File MDAttribFile = MDFiles.get(0);\n        String filePath = String.format(&quot;src/%s/%s_%s.csv&quot;, version, MDType,version);\n        File expectedMDAttribFile = new File(filePath);\n        Assert.assertTrue(Utility.compareCsvFiles(expectedMDAttribFile, MDAttribFile));\n    }\n\n    @Test\n    void testMetaFile() throws IOException {\n        File MDAttribFile = MDFiles.get(1);\n                       .\n                       .\n                       .\n\n    }\n\n    @Test\n    void testZip() throws IOException, InterruptedException {\n        List&lt;File&gt; MDFiles = MDService.generateMDFiles(&quot;0.24.1&quot;, &quot;WLCR&quot;);\n        String zipFileName = &quot;test.zip&quot;;\n        File file = Utility.zipIt(MDFiles, zipFileName);\n        Assert.assertEquals(zipFileName, file.getName());\n    }\n\n    @Parameterized.Parameters\n    public static Collection&lt;Object[]&gt; data() {\n        return Arrays.asList(new Object[][]{\n                {&quot;0.24.1&quot;},\n                {&quot;0.25.1&quot;}\n        });\n    }\n</code></pre>\n"}],"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691608170,"creation_date":1691582637,"question_id":76867608,"body_markdown":"I have created a Junit Test where the Test class has some variables like:  \r\nprivate final String version=&quot;0.25.1&quot;  \r\nAnd when I run tests it compares the files related to this version.  \r\nThere is an init() method too.  \r\nCurrently how I am testing it for another version by changing the value of the version  \r\nmanually to &quot;0.24.1&quot; and &quot;0.24.0&quot; so that I could check test results for all of these versions.  \r\nIs there a way to specify a list of versions and then run the tests for each version and see the results?  \r\nIt&#39;s a spring boot project.   \r\nHere is a minimal code for the Junit Test that I have written:  \r\n\r\n        @RunWith(SpringRunner.class)\r\n        @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK, classes = Application.class)\r\n        @AutoConfigureMockMvc\r\n        @TestPropertySource(locations = &quot;classpath:application-local.yml&quot;)\r\n        @TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n        class MDServiceTest {\r\n            @Autowired\r\n            private MDService MDService;\r\n            private List&lt;File&gt; MDFiles;\r\n            private final String version = &quot;0.24.1&quot;;\r\n            private final String MDType=&quot;WLCR&quot;;\r\n        \r\n            @BeforeAll\r\n            public void init() throws IOException, InterruptedException {\r\n                MDFiles = MDService.generateMDFiles(version, MDType);\r\n            }\r\n        \r\n            @Test\r\n            void testMetaAttributeFile() throws IOException {\r\n                File MDAttribFile = MDFiles.get(0);\r\n                String filePath = String.format(&quot;src/%s/%s_%s.csv&quot;, version, MDType,version);\r\n                File expectedMDAttribFile = new File(filePath);\r\n                Assert.assertTrue(Utility.compareCsvFiles(expectedMDAttribFile, MDAttribFile));\r\n            }\r\n        \r\n          @Test\r\n            void testMetaFile() throws IOException {\r\n                File MDAttribFile = MDFiles.get(1);\r\n                           .\r\n                           .\r\n                           .\r\n    \r\n            }\r\n        \r\n            @Test\r\n            void testZip() throws IOException, InterruptedException {\r\n                List&lt;File&gt; MDFiles = MDService.generateMDFiles(&quot;0.24.1&quot;, &quot;WLCR&quot;);\r\n                String zipFileName = &quot;test.zip&quot;;\r\n                File file = Utility.zipIt(MDFiles, zipFileName);\r\n                Assert.assertEquals(zipFileName, file.getName());\r\n            }\r\n        \r\n        }\r\n      \r\n\r\nI need to modify this so that it runs automatically for all version numbers. It could be that to use parameterizedTest I will have to modify this class because the init method also uses the version and @ParameterziedTest probably cannot be applied on it.\r\n","title":"Run Junit test for various values of a list","body":"<p>I have created a Junit Test where the Test class has some variables like:<br />\nprivate final String version=&quot;0.25.1&quot;<br />\nAnd when I run tests it compares the files related to this version.<br />\nThere is an init() method too.<br />\nCurrently how I am testing it for another version by changing the value of the version<br />\nmanually to &quot;0.24.1&quot; and &quot;0.24.0&quot; so that I could check test results for all of these versions.<br />\nIs there a way to specify a list of versions and then run the tests for each version and see the results?<br />\nIt's a spring boot project.<br />\nHere is a minimal code for the Junit Test that I have written:</p>\n<pre><code>    @RunWith(SpringRunner.class)\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK, classes = Application.class)\n    @AutoConfigureMockMvc\n    @TestPropertySource(locations = &quot;classpath:application-local.yml&quot;)\n    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\n    class MDServiceTest {\n        @Autowired\n        private MDService MDService;\n        private List&lt;File&gt; MDFiles;\n        private final String version = &quot;0.24.1&quot;;\n        private final String MDType=&quot;WLCR&quot;;\n    \n        @BeforeAll\n        public void init() throws IOException, InterruptedException {\n            MDFiles = MDService.generateMDFiles(version, MDType);\n        }\n    \n        @Test\n        void testMetaAttributeFile() throws IOException {\n            File MDAttribFile = MDFiles.get(0);\n            String filePath = String.format(&quot;src/%s/%s_%s.csv&quot;, version, MDType,version);\n            File expectedMDAttribFile = new File(filePath);\n            Assert.assertTrue(Utility.compareCsvFiles(expectedMDAttribFile, MDAttribFile));\n        }\n    \n      @Test\n        void testMetaFile() throws IOException {\n            File MDAttribFile = MDFiles.get(1);\n                       .\n                       .\n                       .\n\n        }\n    \n        @Test\n        void testZip() throws IOException, InterruptedException {\n            List&lt;File&gt; MDFiles = MDService.generateMDFiles(&quot;0.24.1&quot;, &quot;WLCR&quot;);\n            String zipFileName = &quot;test.zip&quot;;\n            File file = Utility.zipIt(MDFiles, zipFileName);\n            Assert.assertEquals(zipFileName, file.getName());\n        }\n    \n    }\n  \n</code></pre>\n<p>I need to modify this so that it runs automatically for all version numbers. It could be that to use parameterizedTest I will have to modify this class because the init method also uses the version and @ParameterziedTest probably cannot be applied on it.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":10345313,"reputation":330,"user_id":7630468,"display_name":"SwathiP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691608128,"creation_date":1691608128,"answer_id":76870609,"question_id":76867782,"body_markdown":"Check again if your Jenkins is really using Java 8 when building your project.\r\n\r\nAlso, specify maven compiler source and target version to Java 8 in project&#39;s `pom.xml`. \r\n\r\nEither add the properties in `pom.xml`:\r\n\r\n    &lt;project&gt;\r\n      [...]\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n      [...]\r\n    &lt;/project&gt;\r\n\r\nor configure maven compiler plugin:\r\n\r\n    &lt;project&gt;\r\n      [...]\r\n      &lt;build&gt;\r\n        [...]\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${compiler.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;source&gt;1.8&lt;/source&gt;\r\n              &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        [...]\r\n      &lt;/build&gt;\r\n      [...]\r\n    &lt;/project&gt;\r\n\r\nPlease see this [maven documentation][1] for more details. Hope it helps!\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html","title":"org/springframework/cloud/bootstrap/RefreshBootstrapRegistryInitializer error when Spring Boot application in Kubernetes","body":"<p>Check again if your Jenkins is really using Java 8 when building your project.</p>\n<p>Also, specify maven compiler source and target version to Java 8 in project's <code>pom.xml</code>.</p>\n<p>Either add the properties in <code>pom.xml</code>:</p>\n<pre><code>&lt;project&gt;\n  [...]\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  [...]\n&lt;/project&gt;\n</code></pre>\n<p>or configure maven compiler plugin:</p>\n<pre><code>&lt;project&gt;\n  [...]\n  &lt;build&gt;\n    [...]\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${compiler.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    [...]\n  &lt;/build&gt;\n  [...]\n&lt;/project&gt;\n</code></pre>\n<p>Please see this <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow noreferrer\">maven documentation</a> for more details. Hope it helps!</p>\n"}],"owner":{"account_id":4749106,"reputation":81,"user_id":5722013,"display_name":"Thushantha .Srimal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691608128,"creation_date":1691584018,"question_id":76867782,"body_markdown":"I&#39;m using Jenkins to build my Spring Boot application and then the image is deployed in a Kubernetes cluster. \r\nApplication is built using java 8 and the cluster also is java 8\r\nBut I get this bellow error\r\n\r\nit says &quot;compiled by a more recent version of the Java Runtime (class file version 61.0)&quot; but the build was using java 8.\r\n\r\nSpring boot version - 2.5.5\r\n\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n    \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\r\n    \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n    \tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\r\n    Caused by: java.lang.IllegalArgumentException: Cannot instantiate interface org.springframework.boot.BootstrapRegistryInitializer : org.springframework.cloud.bootstrap.RefreshBootstrapRegistryInitializer\r\n    \tat org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:475)\r\n    \tat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:457)\r\n    \tat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:450)\r\n    \tat org.springframework.boot.SpringApplication.getBootstrapRegistryInitializersFromSpringFactories(SpringApplication.java:297)\r\n    \tat org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:285)\r\n    \tat org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:266)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332)\r\n    \tat com.adl.et.telco.dte.celcom.reportmgt.ReportMgtServiceApplication.main(ReportMgtServiceApplication.java:55)\r\n    \t... 8 more\r\n    Caused by: java.lang.UnsupportedClassVersionError: org/springframework/cloud/bootstrap/RefreshBootstrapRegistryInitializer has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:757)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\r\n    \tat java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:419)\r\n    \tat org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:352)\r\n    \tat java.lang.Class.forName0(Native Method)\r\n    \tat java.lang.Class.forName(Class.java:348)\r\n    \tat org.springframework.util.ClassUtils.forName(ClassUtils.java:284)\r\n    \tat org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:468)\r\n    \t... 16 more\r\n\r\n\r\nCan anyone help me with this.\r\n","title":"org/springframework/cloud/bootstrap/RefreshBootstrapRegistryInitializer error when Spring Boot application in Kubernetes","body":"<p>I'm using Jenkins to build my Spring Boot application and then the image is deployed in a Kubernetes cluster.\nApplication is built using java 8 and the cluster also is java 8\nBut I get this bellow error</p>\n<p>it says &quot;compiled by a more recent version of the Java Runtime (class file version 61.0)&quot; but the build was using java 8.</p>\n<p>Spring boot version - 2.5.5</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\nCaused by: java.lang.IllegalArgumentException: Cannot instantiate interface org.springframework.boot.BootstrapRegistryInitializer : org.springframework.cloud.bootstrap.RefreshBootstrapRegistryInitializer\n    at org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:475)\n    at org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:457)\n    at org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:450)\n    at org.springframework.boot.SpringApplication.getBootstrapRegistryInitializersFromSpringFactories(SpringApplication.java:297)\n    at org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:285)\n    at org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:266)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332)\n    at com.adl.et.telco.dte.celcom.reportmgt.ReportMgtServiceApplication.main(ReportMgtServiceApplication.java:55)\n    ... 8 more\nCaused by: java.lang.UnsupportedClassVersionError: org/springframework/cloud/bootstrap/RefreshBootstrapRegistryInitializer has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:757)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:419)\n    at org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:352)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:348)\n    at org.springframework.util.ClassUtils.forName(ClassUtils.java:284)\n    at org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:468)\n    ... 16 more\n</code></pre>\n<p>Can anyone help me with this.</p>\n"},{"tags":["java","javafx","property-binding","hbox"],"comments":[{"owner":{"account_id":9676718,"reputation":5,"user_id":7179971,"display_name":"user7179971"},"score":0,"creation_date":1691605866,"post_id":76870238,"comment_id":135515673,"body_markdown":"@James_D Oh man. Whoops. I was having a brain fart moment and was treating the widthProperty as if it were just a second x value. I will look into overriding region as well. I am still very new to this and am not the best at finding the best way to do things yet. Thank you so much for your help!","body":"@James_D Oh man. Whoops. I was having a brain fart moment and was treating the widthProperty as if it were just a second x value. I will look into overriding region as well. I am still very new to this and am not the best at finding the best way to do things yet. Thank you so much for your help!"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1691610948,"post_id":76870238,"comment_id":135516437,"body_markdown":"Do you have to use `Rectangle`?","body":"Do you have to use <code>Rectangle</code>?"}],"answers":[{"comments":[{"owner":{"account_id":9676718,"reputation":5,"user_id":7179971,"display_name":"user7179971"},"score":0,"creation_date":1691795029,"post_id":76870600,"comment_id":135544752,"body_markdown":"Thanks again for your help. I haven&#39;t had the time because of work to try this out yet, but had another question for you. Did you know how to solve my problem by overriding layoutChildren in Region because you have lots of experience? Would you recommend me trying to read most of the documentation for basic JavaFX, or will I learn this stuff naturally with more experience?","body":"Thanks again for your help. I haven&#39;t had the time because of work to try this out yet, but had another question for you. Did you know how to solve my problem by overriding layoutChildren in Region because you have lots of experience? Would you recommend me trying to read most of the documentation for basic JavaFX, or will I learn this stuff naturally with more experience?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691867259,"post_id":76870600,"comment_id":135550421,"body_markdown":"@user7179971 Both things are true :).  I am a strong believer in reading the Javadocs of everything you use. The more experience you gain the easier that becomes because you recognise the patterns behind the way things are designed. (And the more you read the docs, the faster you gain good experience.) That said, the documentation covering subclassing region and how to manage custom layouts is quite limited and I don’t think I would have understood it without extensive (&gt;25 years) experience in other Java UI frameworks (so I know generally how these things are designed).","body":"@user7179971 Both things are true :).  I am a strong believer in reading the Javadocs of everything you use. The more experience you gain the easier that becomes because you recognise the patterns behind the way things are designed. (And the more you read the docs, the faster you gain good experience.) That said, the documentation covering subclassing region and how to manage custom layouts is quite limited and I don’t think I would have understood it without extensive (&gt;25 years) experience in other Java UI frameworks (so I know generally how these things are designed)."}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691608038,"creation_date":1691608038,"answer_id":76870600,"question_id":76870238,"body_markdown":"Your rectangles are behaving more or less as expected. The `x` property of the first rectangle is set to 10% of the width of the `HBox` and its `width` is set to 20% of the width of the `HBox`, so it extends to 30% of the width of the `HBox`. The `x` property of the second rectangle is set to 30% of the width of the `HBox`, so it starts where the first rectangle ends.\r\n\r\nBinding properties like this, however, is not the right way to lay things out in JavaFX. The `HBox` will try to resize if its child nodes resize, so that it can comfortably hold its children. If the size and position of the child nodes are bound to the size of the `HBox`, then they will resize if the `HBox` resizes. The library code is written to prevent any infinite recursion, but under some conditions it could be impossible to both satisfy the implicit dependency of the size of the container (the `HBox`) on the size of its children *and* the explicit dependency of the size of the children on the size of the container that the bindings create. You may notice at startup things don&#39;t quite look right (there is no gap to the right of the rectangles).\r\n\r\nA better approach is to subclass `Region` and override the `layoutChildren()` method. You can then query the width and height of the region and set the size and position of the rectangles accordingly.\r\n\r\nIf you want to allow for padding in the region, use `snappedXXXInset()` (where `XXX` is `top`/`right`/`bottom`/`left`). For simple use cases you could omit this.\r\n\r\nHere&#39;s a demo:\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.layout.Priority;\r\n    import javafx.scene.layout.Region;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class BarChartTest extends Application {\r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            HBox hbox = new HBox();\r\n    \r\n            Rectangle rectangle1 = new Rectangle();\r\n    \r\n            Rectangle rectangle2 = new Rectangle();\r\n            rectangle2.setFill(Color.SKYBLUE);\r\n    \r\n    \r\n            Region region = new Region() {\r\n    \r\n                // in reality these can be properties\r\n                private final double prefBarWidth = 40;\r\n                private final double prefBarHeight = 400;\r\n                private final double verticalBarPadding = 100;\r\n                {\r\n                    getChildren().addAll(rectangle1, rectangle2);\r\n                }\r\n    \r\n                @Override\r\n                protected void layoutChildren() {\r\n                    double x = snappedLeftInset();\r\n                    double w = getWidth() - x - snappedRightInset();\r\n                    rectangle1.setX(snapPositionX(x + w * 0.1));\r\n                    rectangle1.setWidth(snapPositionX(w * 0.2));\r\n                    rectangle2.setX(snapPositionX(x + w * 0.4));\r\n                    rectangle2.setWidth(snapPositionX(w * 0.2));\r\n    \r\n                    double y = snappedTopInset();\r\n                    double h = getHeight() - y - snappedBottomInset();\r\n                    rectangle1.setY(snapPositionY(y + verticalBarPadding));\r\n                    rectangle1.setHeight(snapPositionY(h - 2 * verticalBarPadding));\r\n                    rectangle2.setY(snapPositionY(y + verticalBarPadding));\r\n                    rectangle2.setHeight(snapPositionY(h - 2 * verticalBarPadding));\r\n                }\r\n    \r\n            };\r\n    \r\n            hbox.setPadding(new Insets(20,20,20,20));\r\n            hbox.getChildren().add(region);\r\n            // For demo, make region grow when window size increases:\r\n            HBox.setHgrow(region, Priority.ALWAYS);\r\n    \r\n            Scene scene = new Scene(hbox, 440, 640);\r\n    \r\n            primaryStage.setScene(scene);\r\n            primaryStage.setTitle(&quot;Bar Chart&quot;);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n\r\nNote I explicitly set the size of the scene here: that&#39;s because the region doesn&#39;t know how to calculate its preferred size (so by default it is zero). A slightly better solution would include that calculation:\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.layout.Priority;\r\n    import javafx.scene.layout.Region;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class BarChartTest extends Application {\r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            HBox hbox = new HBox();\r\n    \r\n            Rectangle rectangle1 = new Rectangle();\r\n    \r\n            Rectangle rectangle2 = new Rectangle();\r\n            rectangle2.setFill(Color.SKYBLUE);\r\n    \r\n    \r\n            Region region = new Region() {\r\n    \r\n                // in reality these can be properties\r\n                private final double prefBarWidth = 40;\r\n                private final double prefBarHeight = 400;\r\n                private final double verticalBarPadding = 100;\r\n                {\r\n                    getChildren().addAll(rectangle1, rectangle2);\r\n                }\r\n    \r\n                @Override\r\n                protected void layoutChildren() {\r\n                    double x = snappedLeftInset();\r\n                    double w = getWidth() - x - snappedRightInset();\r\n                    rectangle1.setX(snapPositionX(x + w * 0.1));\r\n                    rectangle1.setWidth(snapPositionX(w * 0.2));\r\n                    rectangle2.setX(snapPositionX(x + w * 0.4));\r\n                    rectangle2.setWidth(snapPositionX(w * 0.2));\r\n    \r\n                    double y = snappedTopInset();\r\n                    double h = getHeight() - y - snappedBottomInset();\r\n                    rectangle1.setY(snapPositionY(y + verticalBarPadding));\r\n                    rectangle1.setHeight(snapPositionY(h - 2 * verticalBarPadding));\r\n                    rectangle2.setY(snapPositionY(y + verticalBarPadding));\r\n                    rectangle2.setHeight(snapPositionY(h - 2 * verticalBarPadding));\r\n                }\r\n    \r\n                @Override\r\n                public double computePrefHeight(double width) {\r\n                    return 2*verticalBarPadding + prefBarHeight + snappedTopInset() + snappedBottomInset();\r\n                }\r\n    \r\n                @Override\r\n                public double computePrefWidth(double height) {\r\n                    return prefBarWidth*5 + snappedLeftInset()+snappedRightInset();\r\n                }\r\n    \r\n            };\r\n    \r\n            hbox.setPadding(new Insets(20,20,20,20));\r\n            hbox.getChildren().add(region);\r\n            // For demo, make region grow when window size increases:\r\n            HBox.setHgrow(region, Priority.ALWAYS);\r\n    \r\n            Scene scene = new Scene(hbox);\r\n    \r\n            primaryStage.setScene(scene);\r\n            primaryStage.setTitle(&quot;Bar Chart&quot;);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n","title":"How do I properly set bindings in JavaFX so that two rectangles retain their relative width and space between each other when the window is resized?","body":"<p>Your rectangles are behaving more or less as expected. The <code>x</code> property of the first rectangle is set to 10% of the width of the <code>HBox</code> and its <code>width</code> is set to 20% of the width of the <code>HBox</code>, so it extends to 30% of the width of the <code>HBox</code>. The <code>x</code> property of the second rectangle is set to 30% of the width of the <code>HBox</code>, so it starts where the first rectangle ends.</p>\n<p>Binding properties like this, however, is not the right way to lay things out in JavaFX. The <code>HBox</code> will try to resize if its child nodes resize, so that it can comfortably hold its children. If the size and position of the child nodes are bound to the size of the <code>HBox</code>, then they will resize if the <code>HBox</code> resizes. The library code is written to prevent any infinite recursion, but under some conditions it could be impossible to both satisfy the implicit dependency of the size of the container (the <code>HBox</code>) on the size of its children <em>and</em> the explicit dependency of the size of the children on the size of the container that the bindings create. You may notice at startup things don't quite look right (there is no gap to the right of the rectangles).</p>\n<p>A better approach is to subclass <code>Region</code> and override the <code>layoutChildren()</code> method. You can then query the width and height of the region and set the size and position of the rectangles accordingly.</p>\n<p>If you want to allow for padding in the region, use <code>snappedXXXInset()</code> (where <code>XXX</code> is <code>top</code>/<code>right</code>/<code>bottom</code>/<code>left</code>). For simple use cases you could omit this.</p>\n<p>Here's a demo:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.Priority;\nimport javafx.scene.layout.Region;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\npublic class BarChartTest extends Application {\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        HBox hbox = new HBox();\n\n        Rectangle rectangle1 = new Rectangle();\n\n        Rectangle rectangle2 = new Rectangle();\n        rectangle2.setFill(Color.SKYBLUE);\n\n\n        Region region = new Region() {\n\n            // in reality these can be properties\n            private final double prefBarWidth = 40;\n            private final double prefBarHeight = 400;\n            private final double verticalBarPadding = 100;\n            {\n                getChildren().addAll(rectangle1, rectangle2);\n            }\n\n            @Override\n            protected void layoutChildren() {\n                double x = snappedLeftInset();\n                double w = getWidth() - x - snappedRightInset();\n                rectangle1.setX(snapPositionX(x + w * 0.1));\n                rectangle1.setWidth(snapPositionX(w * 0.2));\n                rectangle2.setX(snapPositionX(x + w * 0.4));\n                rectangle2.setWidth(snapPositionX(w * 0.2));\n\n                double y = snappedTopInset();\n                double h = getHeight() - y - snappedBottomInset();\n                rectangle1.setY(snapPositionY(y + verticalBarPadding));\n                rectangle1.setHeight(snapPositionY(h - 2 * verticalBarPadding));\n                rectangle2.setY(snapPositionY(y + verticalBarPadding));\n                rectangle2.setHeight(snapPositionY(h - 2 * verticalBarPadding));\n            }\n\n        };\n\n        hbox.setPadding(new Insets(20,20,20,20));\n        hbox.getChildren().add(region);\n        // For demo, make region grow when window size increases:\n        HBox.setHgrow(region, Priority.ALWAYS);\n\n        Scene scene = new Scene(hbox, 440, 640);\n\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;Bar Chart&quot;);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p>Note I explicitly set the size of the scene here: that's because the region doesn't know how to calculate its preferred size (so by default it is zero). A slightly better solution would include that calculation:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.Priority;\nimport javafx.scene.layout.Region;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\npublic class BarChartTest extends Application {\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        HBox hbox = new HBox();\n\n        Rectangle rectangle1 = new Rectangle();\n\n        Rectangle rectangle2 = new Rectangle();\n        rectangle2.setFill(Color.SKYBLUE);\n\n\n        Region region = new Region() {\n\n            // in reality these can be properties\n            private final double prefBarWidth = 40;\n            private final double prefBarHeight = 400;\n            private final double verticalBarPadding = 100;\n            {\n                getChildren().addAll(rectangle1, rectangle2);\n            }\n\n            @Override\n            protected void layoutChildren() {\n                double x = snappedLeftInset();\n                double w = getWidth() - x - snappedRightInset();\n                rectangle1.setX(snapPositionX(x + w * 0.1));\n                rectangle1.setWidth(snapPositionX(w * 0.2));\n                rectangle2.setX(snapPositionX(x + w * 0.4));\n                rectangle2.setWidth(snapPositionX(w * 0.2));\n\n                double y = snappedTopInset();\n                double h = getHeight() - y - snappedBottomInset();\n                rectangle1.setY(snapPositionY(y + verticalBarPadding));\n                rectangle1.setHeight(snapPositionY(h - 2 * verticalBarPadding));\n                rectangle2.setY(snapPositionY(y + verticalBarPadding));\n                rectangle2.setHeight(snapPositionY(h - 2 * verticalBarPadding));\n            }\n\n            @Override\n            public double computePrefHeight(double width) {\n                return 2*verticalBarPadding + prefBarHeight + snappedTopInset() + snappedBottomInset();\n            }\n\n            @Override\n            public double computePrefWidth(double height) {\n                return prefBarWidth*5 + snappedLeftInset()+snappedRightInset();\n            }\n\n        };\n\n        hbox.setPadding(new Insets(20,20,20,20));\n        hbox.getChildren().add(region);\n        // For demo, make region grow when window size increases:\n        HBox.setHgrow(region, Priority.ALWAYS);\n\n        Scene scene = new Scene(hbox);\n\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;Bar Chart&quot;);\n        primaryStage.show();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9676718,"reputation":5,"user_id":7179971,"display_name":"user7179971"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76870600,"answer_count":1,"score":0,"last_activity_date":1691608038,"creation_date":1691604034,"question_id":76870238,"body_markdown":"I&#39;m trying to create a bar chart as seen in exercise 14.12 in Introduction to Java Programming and Data Structures. I am so lost and incompetent when it comes to using JavaFX, that I currently I&#39;m just trying to create two rectangles, that when you resize the window, their relative widths and distance from each other stay the same.\r\n\r\nI tried this: \r\n\r\n\r\n```\r\n HBox hBox = new HBox();\r\n      \r\n Group group = new Group();\r\n      \r\n      \r\n Rectangle rectangle1 = new Rectangle();\r\n rectangle1.xProperty().bind(hBox.widthProperty().multiply((double)10/100));\r\n rectangle1.setY(100);\r\n rectangle1.widthProperty().bind(hBox.widthProperty().multiply((double)20/100));\r\n rectangle1.setHeight(400);\r\n      \r\n Rectangle rectangle2 = new Rectangle();\r\n rectangle2.xProperty().bind(hBox.widthProperty().multiply((double)30/100));\r\n rectangle2.setY(100);\r\n rectangle2.widthProperty().bind(hBox.widthProperty().multiply((double)40/100));\r\n rectangle2.setHeight(400);\r\n\r\n group.getChildren().addAll(rectangle1, rectangle2);\r\n            \r\n hBox.setPadding(new Insets(20,20,20,20));\r\n hBox.getChildren().add(group);\r\n      \r\n Scene scene = new Scene(hBox);\r\n      \r\n primaryStage.setScene(scene);\r\n primaryStage.setTitle(&quot;Bar Chart&quot;);\r\n primaryStage.show();\r\n\r\n```\r\n\r\nI would have expected that with the widthProperty of rectangle1 set to 20% of the HBox size, and the xProperty of rectangle2 set to 30% of the HBox size, that there would be a noticeable distance between the rectangles, but they are basically merged together.","title":"How do I properly set bindings in JavaFX so that two rectangles retain their relative width and space between each other when the window is resized?","body":"<p>I'm trying to create a bar chart as seen in exercise 14.12 in Introduction to Java Programming and Data Structures. I am so lost and incompetent when it comes to using JavaFX, that I currently I'm just trying to create two rectangles, that when you resize the window, their relative widths and distance from each other stay the same.</p>\n<p>I tried this:</p>\n<pre><code> HBox hBox = new HBox();\n      \n Group group = new Group();\n      \n      \n Rectangle rectangle1 = new Rectangle();\n rectangle1.xProperty().bind(hBox.widthProperty().multiply((double)10/100));\n rectangle1.setY(100);\n rectangle1.widthProperty().bind(hBox.widthProperty().multiply((double)20/100));\n rectangle1.setHeight(400);\n      \n Rectangle rectangle2 = new Rectangle();\n rectangle2.xProperty().bind(hBox.widthProperty().multiply((double)30/100));\n rectangle2.setY(100);\n rectangle2.widthProperty().bind(hBox.widthProperty().multiply((double)40/100));\n rectangle2.setHeight(400);\n\n group.getChildren().addAll(rectangle1, rectangle2);\n            \n hBox.setPadding(new Insets(20,20,20,20));\n hBox.getChildren().add(group);\n      \n Scene scene = new Scene(hBox);\n      \n primaryStage.setScene(scene);\n primaryStage.setTitle(&quot;Bar Chart&quot;);\n primaryStage.show();\n\n</code></pre>\n<p>I would have expected that with the widthProperty of rectangle1 set to 20% of the HBox size, and the xProperty of rectangle2 set to 30% of the HBox size, that there would be a noticeable distance between the rectangles, but they are basically merged together.</p>\n"},{"tags":["java","spring-boot","serialization","redis","deserialization"],"owner":{"account_id":2377481,"reputation":1344,"user_id":2080429,"accept_rate":100,"display_name":"Yashasvi Raj Pant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691608005,"creation_date":1691607612,"question_id":76870562,"body_markdown":"I have two modules in Spring Boot Microservices `ModuleA` and `ModuleB`. Both modules share a common POJO class called `CacheData`, whose object is stored in Redis. \r\n\r\n`ModuleA` puts  the data in redis using\r\n    \r\n```\r\nprivate final ValueOperations&lt;String, CachedData&gt;keyToValueOperations;\r\n```\r\n\r\nlike:\r\n\r\n\r\n```\r\n   CacheData toSet = new CacheData(&quot;abc&quot;,&quot;utc&quot;,Arrays.asList(1,2,3));\r\n   keyToValueOperations.set(&#39;key&#39;, toSet);\r\n```\r\n\r\n```\r\npublic class CacheData implements Serializable {\r\n  @Serial private static final long serialVersionUID = -5640664404726218923L;\r\n  private String id;\r\n  private String timeZone;\r\n  private List&lt;Integer&gt; intList = new ArrayList&lt;&gt;();\r\n\r\n  public CacheData() {}\r\n\r\n  public CacheData(String id, String timeZone, List&lt;Integer&gt; intList) {\r\n    this.id = id;\r\n    this.timeZone = timeZone;\r\n    this.intList.addAll(intList);\r\n  }\r\n\r\n\r\n  public List&lt;Integer&gt; getIntList() {\r\n    return intList;\r\n  }\r\n\r\n \r\n  public CacheData setIntList(List&lt;Integer&gt; intList) {\r\n    this.intList.clear();\r\n    if (intList != null) {\r\n      this.intList.addAll(intList);\r\n    }\r\n    return this;\r\n  }\r\n\r\n \r\n  public String getId() {\r\n    return id;\r\n  }\r\n\r\n \r\n  public CacheData setId(String id) {\r\n    this.id = id;\r\n    return this;\r\n  }\r\n\r\n  public String getTimeZone() {\r\n    return timeZone;\r\n  }\r\n\r\n  \r\n  public CacheData setTimeZone(String timeZone) {\r\n    this.timeZone = timeZone;\r\n    return this;\r\n  }\r\n}\r\n```\r\n\r\nBut when I try to get the same data from `ModuleB` like:\r\n\r\n       CacheData toGet = keyToValueOperations.get(&#39;key);\r\n\r\nI am getting error as:\r\n```\r\n    java.io.IOException: FAILED_TO_UNCOMPRESS(5)\r\n\tat org.xerial.snappy.SnappyNative.throw_error(SnappyNative.java:112) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat org.xerial.snappy.SnappyNative.rawUncompress(Native Method) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat org.xerial.snappy.Snappy.rawUncompress(Snappy.java:480) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat org.xerial.snappy.Snappy.uncompress(Snappy.java:519) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat org.xerial.snappy.Snappy.uncompress(Snappy.java:494) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat com.qfree.auth.service.SnappyRedisSerializer.deserialize(SnappyRedisSerializer.java:59) ~[auth-util-test.jar:na]\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:54) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n ```\r\n\r\nI am using same serializer for both modules defined as the `@Bean` of respective modules as:\r\n ```\r\n    @Bean\r\n    public ValueOperations&lt;String, CachedData&gt; keyToValueOperations(\r\n    RedisConnectionFactory connectionFactory) {\r\n    RedisTemplate&lt;String, CachedData&gt; template = new RedisTemplate&lt;&gt;();\r\n    SnappyRedisSerializer&lt;String&gt; snappyRedisSerializer =\r\n      new SnappyRedisSerializer&lt;&gt;(new FstRedisSerializer&lt;&gt;(), RedisSerializer.java());\r\n    template.setKeySerializer(RedisSerializer.string());\r\n    template.setHashKeySerializer(RedisSerializer.string());\r\n    template.setValueSerializer(snappyRedisSerializer);\r\n    template.setHashValueSerializer(snappyRedisSerializer);\r\n    template.setConnectionFactory(connectionFactory);\r\n    template.afterPropertiesSet();\r\n    return template.opsForValue();\r\n    }\r\n ```\r\n\r\n  Related codes are:\r\n\r\n ```\r\n  public class SnappyRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt; {\r\n      private static final Logger LOGGER = LoggerFactory.getLogger(SnappyRedisSerializer.class);\r\n  private final RedisSerializer&lt;T&gt; innerSerializer;\r\n  private final RedisSerializer&lt;?&gt; legacySerializer;\r\n\r\n\r\n  public SnappyRedisSerializer(\r\n      RedisSerializer&lt;T&gt; innerSerializer, RedisSerializer&lt;?&gt; legacySerializer) {\r\n    this.innerSerializer = innerSerializer;\r\n    this.legacySerializer = legacySerializer;\r\n  }\r\n\r\n \r\n  public SnappyRedisSerializer(RedisSerializer&lt;T&gt; innerSerializer) {\r\n    this.innerSerializer = innerSerializer;\r\n    this.legacySerializer = null;\r\n  }\r\n\r\n  \r\n  @Override\r\n  public byte[] serialize(T object) throws SerializationException {\r\n    try {\r\n      byte[] bytes = innerSerializer.serialize(object);\r\n      return Snappy.compress(bytes);\r\n    } catch (Exception e) {\r\n      throw new SerializationException(e.getMessage(), e);\r\n    }\r\n  }\r\n\r\n \r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  @Override\r\n  public T deserialize(byte[] bytes) throws SerializationException {\r\n    try {\r\n      if (bytes == null) {\r\n        return null;\r\n      }\r\n      byte[] bos = Snappy.uncompress(bytes);\r\n      return innerSerializer.deserialize(bos);\r\n    } catch (Exception e) {\r\n      LOGGER.warn(&quot;Could not deserialize object, falling back to legacy&quot;, e);\r\n      if (legacySerializer == null) {\r\n        throw new SerializationException(e.getMessage(), e);\r\n      }\r\n      return (T) legacySerializer.deserialize(bytes);\r\n    }\r\n  }\r\n}\r\n```\r\n```\r\npublic class FstRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt; {\r\n\r\n  static ThreadLocal&lt;FSTConfiguration&gt; conf =\r\n      ThreadLocal.withInitial(FSTConfiguration::createDefaultConfiguration);\r\n\r\n\r\n  @Override\r\n  public byte[] serialize(T t) throws SerializationException {\r\n    FSTConfiguration fst = conf.get();\r\n    return fst.asByteArray(t);\r\n  }\r\n\r\n \r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  @Override\r\n  public T deserialize(byte[] bytes) throws SerializationException {\r\n    FSTConfiguration fst = conf.get();\r\n    return (T) fst.asObject(bytes);\r\n  }\r\n}\r\n```\r\n Note: From `ModuleA` , I can get the data using\r\n\r\n```\r\nCacheData toGet = keyToValueOperations.get(&#39;key);\r\n```\r\n\r\nAny help?          ","title":"Serialization and Deserialization Issue in Redis","body":"<p>I have two modules in Spring Boot Microservices <code>ModuleA</code> and <code>ModuleB</code>. Both modules share a common POJO class called <code>CacheData</code>, whose object is stored in Redis.</p>\n<p><code>ModuleA</code> puts  the data in redis using</p>\n<pre><code>private final ValueOperations&lt;String, CachedData&gt;keyToValueOperations;\n</code></pre>\n<p>like:</p>\n<pre><code>   CacheData toSet = new CacheData(&quot;abc&quot;,&quot;utc&quot;,Arrays.asList(1,2,3));\n   keyToValueOperations.set('key', toSet);\n</code></pre>\n<pre><code>public class CacheData implements Serializable {\n  @Serial private static final long serialVersionUID = -5640664404726218923L;\n  private String id;\n  private String timeZone;\n  private List&lt;Integer&gt; intList = new ArrayList&lt;&gt;();\n\n  public CacheData() {}\n\n  public CacheData(String id, String timeZone, List&lt;Integer&gt; intList) {\n    this.id = id;\n    this.timeZone = timeZone;\n    this.intList.addAll(intList);\n  }\n\n\n  public List&lt;Integer&gt; getIntList() {\n    return intList;\n  }\n\n \n  public CacheData setIntList(List&lt;Integer&gt; intList) {\n    this.intList.clear();\n    if (intList != null) {\n      this.intList.addAll(intList);\n    }\n    return this;\n  }\n\n \n  public String getId() {\n    return id;\n  }\n\n \n  public CacheData setId(String id) {\n    this.id = id;\n    return this;\n  }\n\n  public String getTimeZone() {\n    return timeZone;\n  }\n\n  \n  public CacheData setTimeZone(String timeZone) {\n    this.timeZone = timeZone;\n    return this;\n  }\n}\n</code></pre>\n<p>But when I try to get the same data from <code>ModuleB</code> like:</p>\n<pre><code>   CacheData toGet = keyToValueOperations.get('key);\n</code></pre>\n<p>I am getting error as:</p>\n<pre><code>    java.io.IOException: FAILED_TO_UNCOMPRESS(5)\n    at org.xerial.snappy.SnappyNative.throw_error(SnappyNative.java:112) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at org.xerial.snappy.SnappyNative.rawUncompress(Native Method) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at org.xerial.snappy.Snappy.rawUncompress(Snappy.java:480) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at org.xerial.snappy.Snappy.uncompress(Snappy.java:519) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at org.xerial.snappy.Snappy.uncompress(Snappy.java:494) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at com.qfree.auth.service.SnappyRedisSerializer.deserialize(SnappyRedisSerializer.java:59) ~[auth-util-test.jar:na]\n    at org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:54) ~[spring-data-redis-2.7.11.jar:2.7.11]\n</code></pre>\n<p>I am using same serializer for both modules defined as the <code>@Bean</code> of respective modules as:</p>\n<pre><code>   @Bean\n   public ValueOperations&lt;String, CachedData&gt; keyToValueOperations(\n   RedisConnectionFactory connectionFactory) {\n   RedisTemplate&lt;String, CachedData&gt; template = new RedisTemplate&lt;&gt;();\n   SnappyRedisSerializer&lt;String&gt; snappyRedisSerializer =\n     new SnappyRedisSerializer&lt;&gt;(new FstRedisSerializer&lt;&gt;(), RedisSerializer.java());\n   template.setKeySerializer(RedisSerializer.string());\n   template.setHashKeySerializer(RedisSerializer.string());\n   template.setValueSerializer(snappyRedisSerializer);\n   template.setHashValueSerializer(snappyRedisSerializer);\n   template.setConnectionFactory(connectionFactory);\n   template.afterPropertiesSet();\n   return template.opsForValue();\n   }\n</code></pre>\n<p>Related codes are:</p>\n<pre><code> public class SnappyRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt; {\n     private static final Logger LOGGER = LoggerFactory.getLogger(SnappyRedisSerializer.class);\n private final RedisSerializer&lt;T&gt; innerSerializer;\n private final RedisSerializer&lt;?&gt; legacySerializer;\n\n\n public SnappyRedisSerializer(\n     RedisSerializer&lt;T&gt; innerSerializer, RedisSerializer&lt;?&gt; legacySerializer) {\n   this.innerSerializer = innerSerializer;\n   this.legacySerializer = legacySerializer;\n }\n\n\n public SnappyRedisSerializer(RedisSerializer&lt;T&gt; innerSerializer) {\n   this.innerSerializer = innerSerializer;\n   this.legacySerializer = null;\n }\n\n \n @Override\n public byte[] serialize(T object) throws SerializationException {\n   try {\n     byte[] bytes = innerSerializer.serialize(object);\n     return Snappy.compress(bytes);\n   } catch (Exception e) {\n     throw new SerializationException(e.getMessage(), e);\n   }\n }\n\n\n @SuppressWarnings(&quot;unchecked&quot;)\n @Override\n public T deserialize(byte[] bytes) throws SerializationException {\n   try {\n     if (bytes == null) {\n       return null;\n     }\n     byte[] bos = Snappy.uncompress(bytes);\n     return innerSerializer.deserialize(bos);\n   } catch (Exception e) {\n     LOGGER.warn(&quot;Could not deserialize object, falling back to legacy&quot;, e);\n     if (legacySerializer == null) {\n       throw new SerializationException(e.getMessage(), e);\n     }\n     return (T) legacySerializer.deserialize(bytes);\n   }\n }\n}\n</code></pre>\n<pre><code>public class FstRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt; {\n\n  static ThreadLocal&lt;FSTConfiguration&gt; conf =\n      ThreadLocal.withInitial(FSTConfiguration::createDefaultConfiguration);\n\n\n  @Override\n  public byte[] serialize(T t) throws SerializationException {\n    FSTConfiguration fst = conf.get();\n    return fst.asByteArray(t);\n  }\n\n \n  @SuppressWarnings(&quot;unchecked&quot;)\n  @Override\n  public T deserialize(byte[] bytes) throws SerializationException {\n    FSTConfiguration fst = conf.get();\n    return (T) fst.asObject(bytes);\n  }\n}\n</code></pre>\n<p>Note: From <code>ModuleA</code> , I can get the data using</p>\n<pre><code>CacheData toGet = keyToValueOperations.get('key);\n</code></pre>\n<p>Any help?</p>\n"},{"tags":["java","cjk","chinese-locale","chinese-simplified","chinese-traditional"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691562995,"post_id":76865043,"comment_id":135506718,"body_markdown":"[Possible duplicate](https://stackoverflow.com/q/4596576/5133585)","body":"<a href=\"https://stackoverflow.com/q/4596576/5133585\">Possible duplicate</a>"},{"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"score":0,"creation_date":1691567280,"post_id":76865043,"comment_id":135507475,"body_markdown":"@Sweeper: I have looked at all duplicates before posting; they don&#39;t contain a straightforward answer, but rather &#39;look them up in the unihan table&#39;.. this question is how to achieve it with a regex using a character class with specific known ranges","body":"@Sweeper: I have looked at all duplicates before posting; they don&#39;t contain a straightforward answer, but rather &#39;look them up in the unihan table&#39;.. this question is how to achieve it with a regex using a character class with specific known ranges"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1691567728,"post_id":76865043,"comment_id":135507579,"body_markdown":"Well there is no straightforward answer. Finding the list of simplified characters is a necessary and sufficient step to finding the ranges that contain simplified characters, isn&#39;t it? Once you find the ranges, you basically found the whole list. Once you find the list, you also know which ranges they are in.","body":"Well there is no straightforward answer. Finding the list of simplified characters is a necessary and sufficient step to finding the ranges that contain simplified characters, isn&#39;t it? Once you find the ranges, you basically found the whole list. Once you find the list, you also know which ranges they are in."}],"answers":[{"tags":[],"owner":{"account_id":18302390,"reputation":28,"user_id":13326891,"display_name":"M. Usman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691568616,"creation_date":1691568616,"answer_id":76865780,"question_id":76865043,"body_markdown":"    public class ChineseCharacterDetector {\r\n        public static boolean containsSimplifiedChinese(String input) {\r\n            for (char c : input.toCharArray()) {\r\n                if (isSimplifiedChinese(c)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public static boolean containsTraditionalChinese(String input) {\r\n            for (char c : input.toCharArray()) {\r\n                if (isTraditionalChinese(c)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        private static boolean isSimplifiedChinese(char c) {\r\n            // Common simplified Chinese character range\r\n            return (c &gt;= &#39;\\u4E00&#39; &amp;&amp; c &lt;= &#39;\\u9FFF&#39;);\r\n        }\r\n    \r\n        private static boolean isTraditionalChinese(char c) {\r\n            // Common traditional Chinese character ranges\r\n            return (c &gt;= &#39;\\u4E00&#39; &amp;&amp; c &lt;= &#39;\\u9FFF&#39;) || // Common characters\r\n                   (c &gt;= &#39;\\u3400&#39; &amp;&amp; c &lt;= &#39;\\u4DBF&#39;) || // Extended-A\r\n                   (c &gt;= &#39;\\u20000&#39; &amp;&amp; c &lt;= &#39;\\u2A6DF&#39;); // Extended-B\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            String input = &quot;你好，世界！Hello, 世界！&quot;;\r\n            \r\n            if (containsSimplifiedChinese(input)) {\r\n                System.out.println(&quot;Contains Simplified Chinese characters&quot;);\r\n            } else if (containsTraditionalChinese(input)) {\r\n                System.out.println(&quot;Contains Traditional Chinese characters&quot;);\r\n            } else {\r\n                System.out.println(&quot;Contains neither Simplified nor Traditional Chinese characters&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nThe isSimplifiedChinese function takes into account characters from the common Simplified Chinese range, whereas the isTraditionalChinese function takes into account characters from the typical Traditional Chinese ranges, as well as certain expanded ranges. The functions containsSimplifiedChinese and containsTraditionalChinese iterate through the input text, looking for characters in the specified ranges.","title":"How to detect if Chinese text contains simplified or traditional characters?","body":"<pre><code>public class ChineseCharacterDetector {\n    public static boolean containsSimplifiedChinese(String input) {\n        for (char c : input.toCharArray()) {\n            if (isSimplifiedChinese(c)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public static boolean containsTraditionalChinese(String input) {\n        for (char c : input.toCharArray()) {\n            if (isTraditionalChinese(c)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private static boolean isSimplifiedChinese(char c) {\n        // Common simplified Chinese character range\n        return (c &gt;= '\\u4E00' &amp;&amp; c &lt;= '\\u9FFF');\n    }\n\n    private static boolean isTraditionalChinese(char c) {\n        // Common traditional Chinese character ranges\n        return (c &gt;= '\\u4E00' &amp;&amp; c &lt;= '\\u9FFF') || // Common characters\n               (c &gt;= '\\u3400' &amp;&amp; c &lt;= '\\u4DBF') || // Extended-A\n               (c &gt;= '\\u20000' &amp;&amp; c &lt;= '\\u2A6DF'); // Extended-B\n    }\n\n    public static void main(String[] args) {\n        String input = &quot;你好，世界！Hello, 世界！&quot;;\n        \n        if (containsSimplifiedChinese(input)) {\n            System.out.println(&quot;Contains Simplified Chinese characters&quot;);\n        } else if (containsTraditionalChinese(input)) {\n            System.out.println(&quot;Contains Traditional Chinese characters&quot;);\n        } else {\n            System.out.println(&quot;Contains neither Simplified nor Traditional Chinese characters&quot;);\n        }\n    }\n}\n</code></pre>\n<p>The isSimplifiedChinese function takes into account characters from the common Simplified Chinese range, whereas the isTraditionalChinese function takes into account characters from the typical Traditional Chinese ranges, as well as certain expanded ranges. The functions containsSimplifiedChinese and containsTraditionalChinese iterate through the input text, looking for characters in the specified ranges.</p>\n"}],"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":265,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1691567746,"answer_count":1,"score":-1,"last_activity_date":1691607866,"creation_date":1691561828,"question_id":76865043,"body_markdown":"What would be a reliable way in Java to detect if a Chinese Unicode string contains Chinese simplified characters or traditional characters? The assumption is that characters that are common for both simplified and traditional ranges would be treated as simplified by default.\r\n\r\nIdeally would be checking for a regex match by specific Unicode character ranges. Are these ranges documented and defined, and would this approach be reliable?\r\n\r\n###### Update\r\nRelated questions:\r\n- https://stackoverflow.com/questions/1366068/whats-the-complete-range-for-chinese-characters-in-unicode\r\n\r\n###### Summary\r\n- for detecting presence of Chinese characters (both simplified and traditional) a regex like `&quot;.*[\\\\u4E00-\\\\u9FA5]+.*&quot;` can be used\r\n- to further identify hanzi specifically as Traditional/Simplified the lists extracted from [cedict][1] can be used. The exclusive subsets with the common superset removed can be used to get the required differentiation as shown in the sample gist &lt;sup&gt;[*][2]&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://github.com/tsroten/zhon/tree/main/src/zhon/cedict\r\n  [2]: https://gist.github.com/glowinthedark/4acc24b22ce0eb8050390f28a0a83002","title":"How to detect if Chinese text contains simplified or traditional characters?","body":"<p>What would be a reliable way in Java to detect if a Chinese Unicode string contains Chinese simplified characters or traditional characters? The assumption is that characters that are common for both simplified and traditional ranges would be treated as simplified by default.</p>\n<p>Ideally would be checking for a regex match by specific Unicode character ranges. Are these ranges documented and defined, and would this approach be reliable?</p>\n<h6>Update</h6>\n<p>Related questions:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1366068/whats-the-complete-range-for-chinese-characters-in-unicode\">What&#39;s the complete range for Chinese characters in Unicode?</a></li>\n</ul>\n<h6>Summary</h6>\n<ul>\n<li>for detecting presence of Chinese characters (both simplified and traditional) a regex like <code>&quot;.*[\\\\u4E00-\\\\u9FA5]+.*&quot;</code> can be used</li>\n<li>to further identify hanzi specifically as Traditional/Simplified the lists extracted from <a href=\"https://github.com/tsroten/zhon/tree/main/src/zhon/cedict\" rel=\"nofollow noreferrer\">cedict</a> can be used. The exclusive subsets with the common superset removed can be used to get the required differentiation as shown in the sample gist <sup><a href=\"https://gist.github.com/glowinthedark/4acc24b22ce0eb8050390f28a0a83002\" rel=\"nofollow noreferrer\">*</a></sup></li>\n</ul>\n"},{"tags":["java","spring","forms","thymeleaf"],"owner":{"account_id":2364090,"reputation":374,"user_id":2070165,"display_name":"Franco G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691607803,"creation_date":1688109677,"question_id":76586824,"body_markdown":"I am getting the following error from using Thymeleaf:\r\n\r\n```\r\nNeither BindingResult nor plain target object for bean name &#39;contactForm&#39; available as the request attribute\r\n```\r\n\r\nEvaluating this expression:\r\n\r\n```\r\n#fields.hasErrors(&#39;actualName&#39;) ? &#39;form-control is-invalid&#39; : &#39;form-control&#39;&quot; (template: &quot;fragments/general.html\r\n```\r\n\r\nThe error message seems improper since the code does actually bind the contact form:\r\n\r\n```\r\n  @GetMapping(value = {&quot;/&quot;, &quot;/home&quot;})\r\n  public String main(HttpServletRequest request, Model model) {\r\n    model.addAttribute(&quot;pageTitle&quot;, &quot;Home Page&quot;);\r\n    model.addAttribute(&quot;contactForm&quot;, new ContactForm());\r\n    setupVisitor(request, model);\r\n    return &quot;index&quot;;\r\n  }\r\n```\r\n\r\nTwo strange things:\r\n\r\n1. It only happens in production when the application (executable Jar) is **behind Apache2** (redirecting port 8080 to port 80). By the way, this complicates things because debugging in production is difficult.\r\n\r\n2. Despite the error, the application works (but writes lot of text into the log file!)\r\n\r\nDoes anybody have a suggestion? Thanks in advance.\r\n\r\nHere is the log:\r\n\r\n```\r\norg.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/index.html]&quot;)\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1415) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1159) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1098) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n...\r\nCaused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors(&#39;actualName&#39;) ? &#39;form-control is-invalid&#39; : &#39;form-control&#39;&quot; (template: &quot;fragments/general.html&quot; - line 229, col 12)\r\n\tat org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393) ~[attoparser-2.0.6.RELEASE.jar!/:2.0.6.RELEASE]\r\n\tat org.attoparser.MarkupParser.parse(MarkupParser.java:257) ~[attoparser-2.0.6.RELEASE.jar!/:2.0.6.RELEASE]\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\t... 48 common frames omitted\r\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors(&#39;actualName&#39;) ? &#39;form-control is-invalid&#39; : &#39;form-control&#39;&quot; (template: &quot;fragments/general.html&quot; - line 229, col 12)\r\n\tat org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.expression.Expression.execute(Expression.java:109) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.expression.Expression.execute(Expression.java:138) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n...\r\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;contactForm&#39; available as request attribute\r\n\tat org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:926) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.thymeleaf.spring6.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:232) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.checkErrors(FieldUtils.java:212) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.hasErrors(FieldUtils.java:71) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.expression.Fields.hasErrors(Fields.java:58) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\t\r\n\t\r\n\r\n```","title":"Neither BindingResult nor plain target from Thymeleaf despite bound to model","body":"<p>I am getting the following error from using Thymeleaf:</p>\n<pre><code>Neither BindingResult nor plain target object for bean name 'contactForm' available as the request attribute\n</code></pre>\n<p>Evaluating this expression:</p>\n<pre><code>#fields.hasErrors('actualName') ? 'form-control is-invalid' : 'form-control'&quot; (template: &quot;fragments/general.html\n</code></pre>\n<p>The error message seems improper since the code does actually bind the contact form:</p>\n<pre><code>  @GetMapping(value = {&quot;/&quot;, &quot;/home&quot;})\n  public String main(HttpServletRequest request, Model model) {\n    model.addAttribute(&quot;pageTitle&quot;, &quot;Home Page&quot;);\n    model.addAttribute(&quot;contactForm&quot;, new ContactForm());\n    setupVisitor(request, model);\n    return &quot;index&quot;;\n  }\n</code></pre>\n<p>Two strange things:</p>\n<ol>\n<li><p>It only happens in production when the application (executable Jar) is <strong>behind Apache2</strong> (redirecting port 8080 to port 80). By the way, this complicates things because debugging in production is difficult.</p>\n</li>\n<li><p>Despite the error, the application works (but writes lot of text into the log file!)</p>\n</li>\n</ol>\n<p>Does anybody have a suggestion? Thanks in advance.</p>\n<p>Here is the log:</p>\n<pre><code>org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/index.html]&quot;)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1415) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1159) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1098) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.8.jar!/:na]\n...\nCaused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors('actualName') ? 'form-control is-invalid' : 'form-control'&quot; (template: &quot;fragments/general.html&quot; - line 229, col 12)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393) ~[attoparser-2.0.6.RELEASE.jar!/:2.0.6.RELEASE]\n    at org.attoparser.MarkupParser.parse(MarkupParser.java:257) ~[attoparser-2.0.6.RELEASE.jar!/:2.0.6.RELEASE]\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    ... 48 common frames omitted\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors('actualName') ? 'form-control is-invalid' : 'form-control'&quot; (template: &quot;fragments/general.html&quot; - line 229, col 12)\n    at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n...\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'contactForm' available as request attribute\n    at org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:926) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.thymeleaf.spring6.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:232) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.checkErrors(FieldUtils.java:212) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.hasErrors(FieldUtils.java:71) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.expression.Fields.hasErrors(Fields.java:58) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    \n    \n\n</code></pre>\n"},{"tags":["java","postgresql","dspace"],"comments":[{"owner":{"account_id":21830891,"reputation":1,"user_id":16125833,"display_name":"nitesh saini"},"score":0,"creation_date":1691655551,"post_id":76869291,"comment_id":135521650,"body_markdown":"Update: It was my fault. I was trying to run this command in the same repository bin file while I need to run this command in the new ant fresh installed repo bin file.","body":"Update: It was my fault. I was trying to run this command in the same repository bin file while I need to run this command in the new ant fresh installed repo bin file."}],"owner":{"account_id":21830891,"reputation":1,"user_id":16125833,"display_name":"nitesh saini"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691607765,"creation_date":1691595282,"question_id":76869291,"body_markdown":"I am trying to install dspace in my window 10. And when I tried to run dspace database migrate after mvn package command, I got this error error: could not find or load main class org.dspace.app.launcher.scriptlauncher caused by: java.lang.classnotfoundexception: org.dspace.app.launcher.scriptlauncher.\r\n\r\n\r\nI checked all enviorment variables and my ant apache and solr is running good. Can it be a error from my postgresql database??\r\nCan anyone help with this.\r\n\r\n","title":"error: could not find or load main class org.dspace.app.launcher.scriptlauncher","body":"<p>I am trying to install dspace in my window 10. And when I tried to run dspace database migrate after mvn package command, I got this error error: could not find or load main class org.dspace.app.launcher.scriptlauncher caused by: java.lang.classnotfoundexception: org.dspace.app.launcher.scriptlauncher.</p>\n<p>I checked all enviorment variables and my ant apache and solr is running good. Can it be a error from my postgresql database??\nCan anyone help with this.</p>\n"},{"tags":["java","quarkus-panache","mutiny"],"owner":{"account_id":9432970,"reputation":435,"user_id":7015860,"accept_rate":14,"display_name":"Kyle Hobbs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691607637,"creation_date":1691607637,"question_id":76870567,"body_markdown":"I have an Example entity class that extends PanacheEntityBase. My goal is to get a stream or list of examples and then run updates on each one and persist those updates, then run another function that does some other stuff - I know this other function works and it takes in an id parameter and returns a `Uni&lt;Void&gt;`.\r\n\r\nA very similar function is working that takes an id, then uses Example.findById(id) to update a single Example record. However, I cannot figure out how to get this working with multiple records.\r\n\r\nHere is the code that *does* work for a single Example record, taking in the `id` as a parameter:\r\n\r\n```\r\nreturn Panache.withTransaction(() -&gt; Example.&lt;Example&gt;findById(id)\r\n    .onItem().ifNull().failWith(new NotFoundException(&quot;Example not found.&quot;))\r\n\t.onItem().transformToUni(example -&gt; {\r\n\t\texample.setState(&quot;new state&quot;);\r\n\t\texample.setStateChangedAt(Instant.now());\r\n\t\treturn example.&lt;Example&gt;persist();\r\n\t})\r\n\t.onItem().call(example -&gt; anotherService.anotherFunction(example.getId()))\r\n\t.onItem().ignore()\r\n\t.andContinueWithNull()\r\n);\r\n```\r\n\r\nSo for multiple records, I am trying a similar thing (it should run on every Example record where state=&quot;old state&quot;). \r\n\r\nRight now, after the `.transform(...).onItem()` it looks like it is working with a `Uni&lt;Example&gt;` where as in the above single-record code, at that point it is working with just an `Example` and I do not understand why.\r\n\r\n```\r\nreturn Panache.withTransaction(() -&gt; Example.&lt;Example&gt;stream(&quot;state&quot;, &quot;old state&quot;)\r\n    .onItem().transform(example -&gt; {\r\n\t    example.setState(&quot;new state&quot;);\r\n\t    example.setStateChangedAt(Instant.now());\r\n\t    return example.&lt;Example&gt;persist();\r\n    }).onItem().call(example -&gt; {\r\n\t    anotherService.anotherFunction(example.getId());\r\n    })\r\n    .onItem().ignore()\r\n    .andContinueWithNull()\r\n);\r\n```\r\n\r\nI have also looked into some options using `Example.list()` instead of `Example.stream()`, but I have been unable to get it working that why either. I have been struggling through all this Uni and Multi stuff and still do not have a super firm grasp on it. Please assist in getting that second update transaction working.","title":"How can I update multiple records and persist the changes using Hibernate Reactive w/ Panache and Mutiny","body":"<p>I have an Example entity class that extends PanacheEntityBase. My goal is to get a stream or list of examples and then run updates on each one and persist those updates, then run another function that does some other stuff - I know this other function works and it takes in an id parameter and returns a <code>Uni&lt;Void&gt;</code>.</p>\n<p>A very similar function is working that takes an id, then uses Example.findById(id) to update a single Example record. However, I cannot figure out how to get this working with multiple records.</p>\n<p>Here is the code that <em>does</em> work for a single Example record, taking in the <code>id</code> as a parameter:</p>\n<pre><code>return Panache.withTransaction(() -&gt; Example.&lt;Example&gt;findById(id)\n    .onItem().ifNull().failWith(new NotFoundException(&quot;Example not found.&quot;))\n    .onItem().transformToUni(example -&gt; {\n        example.setState(&quot;new state&quot;);\n        example.setStateChangedAt(Instant.now());\n        return example.&lt;Example&gt;persist();\n    })\n    .onItem().call(example -&gt; anotherService.anotherFunction(example.getId()))\n    .onItem().ignore()\n    .andContinueWithNull()\n);\n</code></pre>\n<p>So for multiple records, I am trying a similar thing (it should run on every Example record where state=&quot;old state&quot;).</p>\n<p>Right now, after the <code>.transform(...).onItem()</code> it looks like it is working with a <code>Uni&lt;Example&gt;</code> where as in the above single-record code, at that point it is working with just an <code>Example</code> and I do not understand why.</p>\n<pre><code>return Panache.withTransaction(() -&gt; Example.&lt;Example&gt;stream(&quot;state&quot;, &quot;old state&quot;)\n    .onItem().transform(example -&gt; {\n        example.setState(&quot;new state&quot;);\n        example.setStateChangedAt(Instant.now());\n        return example.&lt;Example&gt;persist();\n    }).onItem().call(example -&gt; {\n        anotherService.anotherFunction(example.getId());\n    })\n    .onItem().ignore()\n    .andContinueWithNull()\n);\n</code></pre>\n<p>I have also looked into some options using <code>Example.list()</code> instead of <code>Example.stream()</code>, but I have been unable to get it working that why either. I have been struggling through all this Uni and Multi stuff and still do not have a super firm grasp on it. Please assist in getting that second update transaction working.</p>\n"},{"tags":["java","angular","typescript","spring-boot"],"comments":[{"owner":{"account_id":4091849,"reputation":2860,"user_id":3359635,"accept_rate":60,"display_name":"mat.hudak"},"score":0,"creation_date":1691609844,"post_id":76870533,"comment_id":135516275,"body_markdown":"You should provide some code, what you&#39;ve already tried to do. Otherwise this question will likely get closed.","body":"You should provide some code, what you&#39;ve already tried to do. Otherwise this question will likely get closed."},{"owner":{"account_id":26845407,"reputation":19,"user_id":20431236,"display_name":"prabin chand"},"score":0,"creation_date":1691763674,"post_id":76870533,"comment_id":135540004,"body_markdown":"I haven&#39;t found any code, to try with. so i am here asking for help","body":"I haven&#39;t found any code, to try with. so i am here asking for help"},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1692338475,"post_id":76870533,"comment_id":135612046,"body_markdown":"You can try [this](https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954) to upload using postman. Though OP was uploading using React, concept should be the same even for Angular","body":"You can try <a href=\"https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954\">this</a> to upload using postman. Though OP was uploading using React, concept should be the same even for Angular"}],"owner":{"account_id":26845407,"reputation":19,"user_id":20431236,"display_name":"prabin chand"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691607313,"creation_date":1691607313,"question_id":76870533,"body_markdown":"I&#39;m working on a project where I need to implement a feature that allows users to upload images using an Angular frontend. Let&#39;s say Person is my Entity , i have already created UI for taking user input including Image of person. \r\nHow to save image so that later on i can retrieve it from database and display in webpage using angular and spring boot ?\r\n\r\nI did some research but i was not able to get it. Is there anyone who can teach me to do so ?","title":"Uploading and Displaying Images in Angular with Spring Boot, and Retrieving from Database","body":"<p>I'm working on a project where I need to implement a feature that allows users to upload images using an Angular frontend. Let's say Person is my Entity , i have already created UI for taking user input including Image of person.\nHow to save image so that later on i can retrieve it from database and display in webpage using angular and spring boot ?</p>\n<p>I did some research but i was not able to get it. Is there anyone who can teach me to do so ?</p>\n"},{"tags":["java","godot","minecraft-forge","jvm-arguments"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677353,"post_id":76870418,"comment_id":135526223,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":27004232,"reputation":1,"user_id":20564997,"display_name":"Berc Plays"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691605982,"creation_date":1691605982,"question_id":76870418,"body_markdown":"I&#39;m making a minecraft launcher in godot 4 and for some reason, I get this error in the console. (I pasted the arguments directly from Process Explorer)\r\n\r\nI have tried searching for this problem but couldn&#39;t find any answers.\r\n\r\nI Tested it with these java versions:  jdk-16,jre-1.8 (I was trying to launch Minecraft 1.16.5 with forge)\r\n\r\nIf this answer is not clear enough or if you need some additional resources that I have not listed in my question then feel free to ask in the comments\r\n\r\nMinecraft Arguments\r\n```\r\nXX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump &quot;-Dos.name=Windows 10&quot; -Dos.version=10.0 -Xss1M -Djava.library.path=C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\bin\\aa3ff1ab4ceab9fa81e22cec28be461e9bc33e34 -Dminecraft.launcher.brand=minecraft-launcher -Dminecraft.launcher.version=2.6.16 -cp C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\forge\\1.16.5-36.2.39\\forge-1.16.5-36.2.39.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm\\9.1\\asm-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-commons\\9.1\\asm-commons-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-tree\\9.1\\asm-tree-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-util\\9.1\\asm-util-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-analysis\\9.1\\asm-analysis-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\cpw\\mods\\modlauncher\\8.1.3\\modlauncher-8.1.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\cpw\\mods\\grossjava9hacks\\1.3.3\\grossjava9hacks-1.3.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\accesstransformers\\3.0.1\\accesstransformers-3.0.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\antlr\\antlr4-runtime\\4.9.1\\antlr4-runtime-4.9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\eventbus\\4.0.0\\eventbus-4.0.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\forgespi\\3.2.0\\forgespi-3.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\coremods\\4.0.6\\coremods-4.0.6.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\unsafe\\0.2.0\\unsafe-0.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\electronwill\\night-config\\core\\3.6.3\\core-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\electronwill\\night-config\\toml\\3.6.3\\toml-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\jline\\jline\\3.12.1\\jline-3.12.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\maven\\maven-artifact\\3.6.3\\maven-artifact-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\jodah\\typetools\\0.8.3\\typetools-0.8.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-api\\2.15.0\\log4j-api-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-core\\2.15.0\\log4j-core-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-slf4j18-impl\\2.15.0\\log4j-slf4j18-impl-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecrell\\terminalconsoleappender\\1.2.0\\terminalconsoleappender-1.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\sf\\jopt-simple\\jopt-simple\\5.0.4\\jopt-simple-5.0.4.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\spongepowered\\mixin\\0.8.4\\mixin-0.8.4.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\nashorn-core-compat\\15.1.1.1\\nashorn-core-compat-15.1.1.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\patchy\\1.3.9\\patchy-1.3.9.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\oshi-project\\oshi-core\\1.1\\oshi-core-1.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\dev\\jna\\jna\\4.4.0\\jna-4.4.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\dev\\jna\\platform\\3.4.0\\platform-3.4.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\ibm\\icu\\icu4j\\66.1\\icu4j-66.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\javabridge\\1.0.22\\javabridge-1.0.22.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\io\\netty\\netty-all\\4.1.25.Final\\netty-all-4.1.25.Final.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\google\\guava\\guava\\21.0\\guava-21.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\commons\\commons-lang3\\3.5\\commons-lang3-3.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-io\\commons-io\\2.5\\commons-io-2.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-codec\\commons-codec\\1.10\\commons-codec-1.10.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\jinput\\jinput\\2.0.5\\jinput-2.0.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\jutils\\jutils\\1.0.0\\jutils-1.0.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\brigadier\\1.0.17\\brigadier-1.0.17.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\datafixerupper\\4.0.26\\datafixerupper-4.0.26.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\google\\code\\gson\\gson\\2.8.0\\gson-2.8.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\authlib\\2.1.28\\authlib-2.1.28.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\commons\\commons-compress\\1.8.1\\commons-compress-1.8.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\httpcomponents\\httpclient\\4.3.3\\httpclient-4.3.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-logging\\commons-logging\\1.1.3\\commons-logging-1.1.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\httpcomponents\\httpcore\\4.3.2\\httpcore-4.3.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\it\\unimi\\dsi\\fastutil\\8.2.1\\fastutil-8.2.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl\\3.2.2\\lwjgl-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-jemalloc\\3.2.2\\lwjgl-jemalloc-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-openal\\3.2.2\\lwjgl-openal-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-opengl\\3.2.2\\lwjgl-opengl-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-glfw\\3.2.2\\lwjgl-glfw-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-stb\\3.2.2\\lwjgl-stb-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-tinyfd\\3.2.2\\lwjgl-tinyfd-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\text2speech\\1.11.3\\text2speech-1.11.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\versions\\1.16.5-forge-36.2.39\\1.16.5-forge-36.2.39.jar -XX:+IgnoreUnrecognizedVMOptions --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=java.naming --add-opens=java.base/java.util.jar=ALL-UNNAMED -Xmx2G -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=32M cpw.mods.modlauncher.Launcher --username &lt;username&gt; --version 1.16.5-forge-36.2.39 --gameDir C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft --assetsDir C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\assets --assetIndex 1.16 --uuid &lt;uuid&gt; --accessToken &lt;token&gt; --userType msa --versionType release --launchTarget fmlclient --fml.forgeVersion 36.2.39 --fml.mcVersion 1.16.5 --fml.forgeGroup net.minecraftforge --fml.mcpVersion 20210115.111550\r\n```\r\n\r\n\r\nI pasted the arguments in the code and expected it to run with no errors but I got an error.\r\nError: Could not find or load main class  -Dminecraft.launcher.version=2.6.16 \r\nCaused by: java.lang.ClassNotFoundException:  -Dminecraft.launcher.version=2.6.16","title":"Minecraft Could not find or load main class -Dminecraft.launcher.version=2.6.16","body":"<p>I'm making a minecraft launcher in godot 4 and for some reason, I get this error in the console. (I pasted the arguments directly from Process Explorer)</p>\n<p>I have tried searching for this problem but couldn't find any answers.</p>\n<p>I Tested it with these java versions:  jdk-16,jre-1.8 (I was trying to launch Minecraft 1.16.5 with forge)</p>\n<p>If this answer is not clear enough or if you need some additional resources that I have not listed in my question then feel free to ask in the comments</p>\n<p>Minecraft Arguments</p>\n<pre><code>XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump &quot;-Dos.name=Windows 10&quot; -Dos.version=10.0 -Xss1M -Djava.library.path=C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\bin\\aa3ff1ab4ceab9fa81e22cec28be461e9bc33e34 -Dminecraft.launcher.brand=minecraft-launcher -Dminecraft.launcher.version=2.6.16 -cp C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\forge\\1.16.5-36.2.39\\forge-1.16.5-36.2.39.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm\\9.1\\asm-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-commons\\9.1\\asm-commons-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-tree\\9.1\\asm-tree-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-util\\9.1\\asm-util-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-analysis\\9.1\\asm-analysis-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\cpw\\mods\\modlauncher\\8.1.3\\modlauncher-8.1.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\cpw\\mods\\grossjava9hacks\\1.3.3\\grossjava9hacks-1.3.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\accesstransformers\\3.0.1\\accesstransformers-3.0.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\antlr\\antlr4-runtime\\4.9.1\\antlr4-runtime-4.9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\eventbus\\4.0.0\\eventbus-4.0.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\forgespi\\3.2.0\\forgespi-3.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\coremods\\4.0.6\\coremods-4.0.6.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\unsafe\\0.2.0\\unsafe-0.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\electronwill\\night-config\\core\\3.6.3\\core-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\electronwill\\night-config\\toml\\3.6.3\\toml-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\jline\\jline\\3.12.1\\jline-3.12.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\maven\\maven-artifact\\3.6.3\\maven-artifact-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\jodah\\typetools\\0.8.3\\typetools-0.8.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-api\\2.15.0\\log4j-api-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-core\\2.15.0\\log4j-core-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-slf4j18-impl\\2.15.0\\log4j-slf4j18-impl-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecrell\\terminalconsoleappender\\1.2.0\\terminalconsoleappender-1.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\sf\\jopt-simple\\jopt-simple\\5.0.4\\jopt-simple-5.0.4.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\spongepowered\\mixin\\0.8.4\\mixin-0.8.4.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\nashorn-core-compat\\15.1.1.1\\nashorn-core-compat-15.1.1.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\patchy\\1.3.9\\patchy-1.3.9.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\oshi-project\\oshi-core\\1.1\\oshi-core-1.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\dev\\jna\\jna\\4.4.0\\jna-4.4.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\dev\\jna\\platform\\3.4.0\\platform-3.4.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\ibm\\icu\\icu4j\\66.1\\icu4j-66.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\javabridge\\1.0.22\\javabridge-1.0.22.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\io\\netty\\netty-all\\4.1.25.Final\\netty-all-4.1.25.Final.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\google\\guava\\guava\\21.0\\guava-21.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\commons\\commons-lang3\\3.5\\commons-lang3-3.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-io\\commons-io\\2.5\\commons-io-2.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-codec\\commons-codec\\1.10\\commons-codec-1.10.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\jinput\\jinput\\2.0.5\\jinput-2.0.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\jutils\\jutils\\1.0.0\\jutils-1.0.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\brigadier\\1.0.17\\brigadier-1.0.17.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\datafixerupper\\4.0.26\\datafixerupper-4.0.26.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\google\\code\\gson\\gson\\2.8.0\\gson-2.8.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\authlib\\2.1.28\\authlib-2.1.28.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\commons\\commons-compress\\1.8.1\\commons-compress-1.8.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\httpcomponents\\httpclient\\4.3.3\\httpclient-4.3.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-logging\\commons-logging\\1.1.3\\commons-logging-1.1.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\httpcomponents\\httpcore\\4.3.2\\httpcore-4.3.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\it\\unimi\\dsi\\fastutil\\8.2.1\\fastutil-8.2.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl\\3.2.2\\lwjgl-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-jemalloc\\3.2.2\\lwjgl-jemalloc-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-openal\\3.2.2\\lwjgl-openal-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-opengl\\3.2.2\\lwjgl-opengl-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-glfw\\3.2.2\\lwjgl-glfw-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-stb\\3.2.2\\lwjgl-stb-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-tinyfd\\3.2.2\\lwjgl-tinyfd-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\text2speech\\1.11.3\\text2speech-1.11.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\versions\\1.16.5-forge-36.2.39\\1.16.5-forge-36.2.39.jar -XX:+IgnoreUnrecognizedVMOptions --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=java.naming --add-opens=java.base/java.util.jar=ALL-UNNAMED -Xmx2G -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=32M cpw.mods.modlauncher.Launcher --username &lt;username&gt; --version 1.16.5-forge-36.2.39 --gameDir C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft --assetsDir C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\assets --assetIndex 1.16 --uuid &lt;uuid&gt; --accessToken &lt;token&gt; --userType msa --versionType release --launchTarget fmlclient --fml.forgeVersion 36.2.39 --fml.mcVersion 1.16.5 --fml.forgeGroup net.minecraftforge --fml.mcpVersion 20210115.111550\n</code></pre>\n<p>I pasted the arguments in the code and expected it to run with no errors but I got an error.\nError: Could not find or load main class  -Dminecraft.launcher.version=2.6.16\nCaused by: java.lang.ClassNotFoundException:  -Dminecraft.launcher.version=2.6.16</p>\n"},{"tags":["java","apache-kafka","jackson","spring-kafka"],"comments":[{"owner":{"account_id":370719,"reputation":3063,"user_id":718849,"accept_rate":100,"display_name":"Jonck van der Kogel"},"score":0,"creation_date":1691579039,"post_id":76867051,"comment_id":135509884,"body_markdown":"Can you please share your application configuration? (particularly the spring.kafka.properties)","body":"Can you please share your application configuration? (particularly the spring.kafka.properties)"},{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":0,"creation_date":1691579772,"post_id":76867051,"comment_id":135510016,"body_markdown":"spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer","body":"spring.kafka.producer.key-serializer=org.apache.kafka.common&zwnj;&#8203;.serialization.Strin&zwnj;&#8203;gSerializer spring.kafka.producer.value-serializer=org.springframework.k&zwnj;&#8203;afka.support.seriali&zwnj;&#8203;zer.JsonSerializer"}],"answers":[{"comments":[{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":0,"creation_date":1691590418,"post_id":76868292,"comment_id":135512469,"body_markdown":"I changed private Struct dataAfterWrite to public. Still same error.","body":"I changed private Struct dataAfterWrite to public. Still same error."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1691599528,"post_id":76868292,"comment_id":135514564,"body_markdown":"The problem is `Struct` not the access level. That class is not JSON compatible. Meanwhile, a `TreeMap&lt;String, Object&gt;` or `JsonNode` is","body":"The problem is <code>Struct</code> not the access level. That class is not JSON compatible. Meanwhile, a <code>TreeMap&lt;String, Object&gt;</code> or <code>JsonNode</code> is"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691588011,"creation_date":1691588011,"answer_id":76868292,"question_id":76867051,"body_markdown":"As the error says, you&#39;ve defined a field `private Struct dataAfterWrite`, and Jackson doesn&#39;t know what to do with it. \r\n\r\nPerhaps you wanted a different type there? ","title":"Getting exception &quot;No serializer found for class org.apache.kafka.connect.data.Struct&quot; while sending message to kafka","body":"<p>As the error says, you've defined a field <code>private Struct dataAfterWrite</code>, and Jackson doesn't know what to do with it.</p>\n<p>Perhaps you wanted a different type there?</p>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691607889,"post_id":76870393,"comment_id":135516000,"body_markdown":"Ideally, you dont define your own Struct class in case you mistakenly import the Kafka Connect class instead, but public fields don&#39;t matter for Jackson","body":"Ideally, you dont define your own Struct class in case you mistakenly import the Kafka Connect class instead, but public fields don&#39;t matter for Jackson"}],"tags":[],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691605653,"creation_date":1691605653,"answer_id":76870393,"question_id":76867051,"body_markdown":"I got rid of the Struct from the EventsDTO POJO. The Struct class is not serializable as it has no public fields:\r\n\r\n```\r\npublic class Struct {\r\n\r\n    private final Schema schema;\r\n    private final Object[] values;\r\n\r\n   ...\r\n\r\n}\r\n\r\npublic class EventsDTO {\r\n    private String operation;\r\n}\r\n```\r\n\r\nNow, the exception doesn&#39;t occur.","title":"Getting exception &quot;No serializer found for class org.apache.kafka.connect.data.Struct&quot; while sending message to kafka","body":"<p>I got rid of the Struct from the EventsDTO POJO. The Struct class is not serializable as it has no public fields:</p>\n<pre><code>public class Struct {\n\n    private final Schema schema;\n    private final Object[] values;\n\n   ...\n\n}\n\npublic class EventsDTO {\n    private String operation;\n}\n</code></pre>\n<p>Now, the exception doesn't occur.</p>\n"}],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691605653,"creation_date":1691578257,"question_id":76867051,"body_markdown":"Our code to serialize a POJO and send it as json to kafka is failing with the exception below.\r\n\r\nCode:\r\n\r\n```\r\n@lombok.Data\r\npublic class EventsDTO {\r\n    private Struct dataAfterWrite;\r\n    private String operation;\r\n}\r\n\r\n...\r\n\r\npublic void sendMessage(EventsDTO data) {\r\n    Message&lt;EventsDTO&gt; message = MessageBuilder\r\n            .withPayload(data)\r\n            .setHeader(KafkaHeaders.TOPIC, &quot;events-ingestion-topic&quot;)\r\n            .build();\r\n    kafkaTemplate.send(message);\r\n    log.info(&quot;message send to kafka topic {}&quot;, message);\r\n}\r\n\r\n```\r\n\r\napplication.properties has\r\n```\r\nspring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\r\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\r\n```\r\n\r\n\r\nHere&#39;s the exception:\r\n```\r\n\r\norg.apache.kafka.common.errors.SerializationException: Can&#39;t serialize data [EventsDTO(dataAfterWrite=Struct{id=61713742,...,event_state=0}, operation=c)] for topic [events-ingestion-topic]\r\n\tat org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:216)\r\n\tat org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:203)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1005)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:952)\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:1022)\r\n\tat org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:752)\r\n\tat org.springframework.kafka.core.KafkaTemplate.observeSend(KafkaTemplate.java:723)\r\n\tat org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:546)\r\n\tat com.events.debeziumconnectorservice.kafka.KafkaProducer.sendMessage(KafkaProducer.java:25)\r\n\tat com.events.debeziumconnectorservice.debezium.Listener.handleChangeEvent(Listener.java:62)\r\n\tat io.debezium.embedded.ConvertingEngineBuilder.lambda$notifying$0(ConvertingEngineBuilder.java:75)\r\n\tat io.debezium.embedded.EmbeddedEngine$1.handleBatch(EmbeddedEngine.java:518)\r\n\tat io.debezium.embedded.EmbeddedEngine.run(EmbeddedEngine.java:913)\r\n\tat io.debezium.embedded.ConvertingEngineBuilder$2.run(ConvertingEngineBuilder.java:195)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.apache.kafka.connect.data.Struct and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.events.debeziumconnectorservice.models.EventsDTO[&quot;dataAfterWrite&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1306)\r\n\tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:408)\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:53)\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:30)\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:733)\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319)\r\n\tat com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1572)\r\n\tat com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1273)\r\n\tat com.fasterxml.jackson.databind.ObjectWriter.writeValueAsBytes(ObjectWriter.java:1163)\r\n\tat org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:213)\r\n\t... 16 common frames omitted\r\n```\r\n\r\nUpdate:\r\n\r\nChanging\r\n\r\n```\r\npublic class EventsDTO {\r\n    private Struct dataAfterWrite;\r\n    private String operation;\r\n}\r\n```\r\n\r\nto\r\n\r\n```\r\n@Data\r\n@JsonInclude\r\npublic class EventsDTO {\r\n    public Struct dataAfterWrite;\r\n    public String operation;\r\n}\r\n``` \r\ndidn&#39;t help. Got same exception.\r\n\r\nThanks for reading.","title":"Getting exception &quot;No serializer found for class org.apache.kafka.connect.data.Struct&quot; while sending message to kafka","body":"<p>Our code to serialize a POJO and send it as json to kafka is failing with the exception below.</p>\n<p>Code:</p>\n<pre><code>@lombok.Data\npublic class EventsDTO {\n    private Struct dataAfterWrite;\n    private String operation;\n}\n\n...\n\npublic void sendMessage(EventsDTO data) {\n    Message&lt;EventsDTO&gt; message = MessageBuilder\n            .withPayload(data)\n            .setHeader(KafkaHeaders.TOPIC, &quot;events-ingestion-topic&quot;)\n            .build();\n    kafkaTemplate.send(message);\n    log.info(&quot;message send to kafka topic {}&quot;, message);\n}\n\n</code></pre>\n<p>application.properties has</p>\n<pre><code>spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\n</code></pre>\n<p>Here's the exception:</p>\n<pre><code>\norg.apache.kafka.common.errors.SerializationException: Can't serialize data [EventsDTO(dataAfterWrite=Struct{id=61713742,...,event_state=0}, operation=c)] for topic [events-ingestion-topic]\n    at org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:216)\n    at org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:203)\n    at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1005)\n    at org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:952)\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:1022)\n    at org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:752)\n    at org.springframework.kafka.core.KafkaTemplate.observeSend(KafkaTemplate.java:723)\n    at org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:546)\n    at com.events.debeziumconnectorservice.kafka.KafkaProducer.sendMessage(KafkaProducer.java:25)\n    at com.events.debeziumconnectorservice.debezium.Listener.handleChangeEvent(Listener.java:62)\n    at io.debezium.embedded.ConvertingEngineBuilder.lambda$notifying$0(ConvertingEngineBuilder.java:75)\n    at io.debezium.embedded.EmbeddedEngine$1.handleBatch(EmbeddedEngine.java:518)\n    at io.debezium.embedded.EmbeddedEngine.run(EmbeddedEngine.java:913)\n    at io.debezium.embedded.ConvertingEngineBuilder$2.run(ConvertingEngineBuilder.java:195)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.apache.kafka.connect.data.Struct and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.events.debeziumconnectorservice.models.EventsDTO[&quot;dataAfterWrite&quot;])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)\n    at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1306)\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:408)\n    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:53)\n    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:30)\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:733)\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774)\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178)\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480)\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319)\n    at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1572)\n    at com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1273)\n    at com.fasterxml.jackson.databind.ObjectWriter.writeValueAsBytes(ObjectWriter.java:1163)\n    at org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:213)\n    ... 16 common frames omitted\n</code></pre>\n<p>Update:</p>\n<p>Changing</p>\n<pre><code>public class EventsDTO {\n    private Struct dataAfterWrite;\n    private String operation;\n}\n</code></pre>\n<p>to</p>\n<pre><code>@Data\n@JsonInclude\npublic class EventsDTO {\n    public Struct dataAfterWrite;\n    public String operation;\n}\n</code></pre>\n<p>didn't help. Got same exception.</p>\n<p>Thanks for reading.</p>\n"},{"tags":["java","jpa","orm","entity","clone"],"comments":[{"owner":{"display_name":"user3973283"},"score":0,"creation_date":1536215477,"post_id":11625096,"comment_id":91344780,"body_markdown":"You have a copy constructor where you copy what field values you want. That is nothing at all to do with the JPA API. Basic Java.","body":"You have a copy constructor where you copy what field values you want. That is nothing at all to do with the JPA API. Basic Java."}],"answers":[{"comments":[{"owner":{"account_id":1808566,"reputation":401,"user_id":1645102,"accept_rate":40,"display_name":"javaMS"},"score":0,"creation_date":1353311267,"post_id":11625136,"comment_id":18391088,"body_markdown":"I&#39;m doing this with an existing entity, i.e. I&#39;m basically changing the primary key (ID) of an entity object and merging it in order to have the desired object updated with other values. Any risks involved with this? It seems to work fine so far.","body":"I&#39;m doing this with an existing entity, i.e. I&#39;m basically changing the primary key (ID) of an entity object and merging it in order to have the desired object updated with other values. Any risks involved with this? It seems to work fine so far."},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":10,"creation_date":1425519966,"post_id":11625136,"comment_id":46001479,"body_markdown":"One gotcha we encountered with this technique is that `detach` will ignore unflushed changes to the managed entity. e.g. If you want to (1) modify a managed entity, (2) detach the entity, and (3) persist a copy, then you must call `flush` before you detach, or else your modifications won&#39;t be persisted. From the Javadoc for `flush`: &quot;Unflushed changes made to the entity if any (including removal of the entity), will not be synchronized to the database.&quot;","body":"One gotcha we encountered with this technique is that <code>detach</code> will ignore unflushed changes to the managed entity. e.g. If you want to (1) modify a managed entity, (2) detach the entity, and (3) persist a copy, then you must call <code>flush</code> before you detach, or else your modifications won&#39;t be persisted. From the Javadoc for <code>flush</code>: &quot;Unflushed changes made to the entity if any (including removal of the entity), will not be synchronized to the database.&quot;"},{"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"score":0,"creation_date":1446027985,"post_id":11625136,"comment_id":54569000,"body_markdown":"For those using Spring Data JPA (with its automatically generated repository implementations), see this: http://stackoverflow.com/a/26812963/56285","body":"For those using Spring Data JPA (with its automatically generated repository implementations), see this: <a href=\"http://stackoverflow.com/a/26812963/56285\">stackoverflow.com/a/26812963/56285</a>"},{"owner":{"account_id":5155648,"reputation":196,"user_id":4128952,"display_name":"atealxt"},"score":2,"creation_date":1459145680,"post_id":11625136,"comment_id":60142936,"body_markdown":"If entity has table relationship and cascade like `@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;FIELD_NAME&quot;)`, you probably need to loop each reference entity object and reset Id before persist, otherwise it may throw a [PersistentObjectException: detached entity passed to persist](http://stackoverflow.com/questions/15198675/javax-persistence-persistenceexception-org-hibernate-persistentobjectexception).","body":"If entity has table relationship and cascade like <code>@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;FIELD_NAME&quot;)</code>, you probably need to loop each reference entity object and reset Id before persist, otherwise it may throw a <a href=\"http://stackoverflow.com/questions/15198675/javax-persistence-persistenceexception-org-hibernate-persistentobjectexception\">PersistentObjectException: detached entity passed to persist</a>."},{"owner":{"account_id":43451,"reputation":3056,"user_id":127027,"accept_rate":100,"display_name":"doblak"},"score":2,"creation_date":1477561275,"post_id":11625136,"comment_id":67820901,"body_markdown":"@javaMS two kinds of risks come to mind: what happens when entity being detached is referenced in collections on other entities in the session; does this work properly when using lazyloading/proxies. Didn&#39;t dig into it to find out.","body":"@javaMS two kinds of risks come to mind: what happens when entity being detached is referenced in collections on other entities in the session; does this work properly when using lazyloading/proxies. Didn&#39;t dig into it to find out."},{"owner":{"account_id":2047736,"reputation":2932,"user_id":1827453,"accept_rate":69,"display_name":"Panu Haaramo"},"score":0,"creation_date":1596210574,"post_id":11625136,"comment_id":111748678,"body_markdown":"Using EclipseLink 2.7.4. Some time after persisting the detached entity I use `entityManager.find(class, id)` to find the original entity in different HTTP request. It finds the **new** entity which has different id from what was passed to find method! Solved by disabling cache for this entity.","body":"Using EclipseLink 2.7.4. Some time after persisting the detached entity I use <code>entityManager.find(class, id)</code> to find the original entity in different HTTP request. It finds the <b>new</b> entity which has different id from what was passed to find method! Solved by disabling cache for this entity."}],"tags":[],"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"comment_count":6,"down_vote_count":0,"up_vote_count":69,"is_accepted":true,"score":69,"last_activity_date":1343110434,"creation_date":1343110434,"answer_id":11625136,"question_id":11625096,"body_markdown":"Use `EntityManager.detach`. It makes the bean no longer linked to the EntityManager. Then set the Id to the new Id (or null if automatic), change the fields that you need and persist.","title":"How to clone a JPA entity","body":"<p>Use <code>EntityManager.detach</code>. It makes the bean no longer linked to the EntityManager. Then set the Id to the new Id (or null if automatic), change the fields that you need and persist.</p>\n"},{"tags":[],"owner":{"account_id":408635,"reputation":1045,"user_id":779419,"display_name":"schieferstapel"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1401956602,"creation_date":1374237845,"answer_id":17746371,"question_id":11625096,"body_markdown":"When using EclipseLink, you can use the VERY handy CopyGroup-Feature:\r\n\r\nhttp://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#CopyGroup\r\n\r\nA big plus is that without much fiddling it properly clones private-owned relation-ships, too.\r\n\r\nThis is my code, cloning a Playlist with its private-owned @OneToMany-relationship is a matter of a few lines:\r\n\r\n\tpublic Playlist cloneEntity( EntityManager em ) {\r\n\t\tCopyGroup group = new CopyGroup();\r\n\t\tgroup.setShouldResetPrimaryKey( true );\r\n\t\tPlaylist copy = (Playlist)em.unwrap( JpaEntityManager.class ).copy( this, group );\r\n\t\treturn copy;\r\n\t}\r\n\r\nMake sure that you use persist() to save this new object, merge() does not work.","title":"How to clone a JPA entity","body":"<p>When using EclipseLink, you can use the VERY handy CopyGroup-Feature:</p>\n\n<p><a href=\"http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#CopyGroup\">http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#CopyGroup</a></p>\n\n<p>A big plus is that without much fiddling it properly clones private-owned relation-ships, too.</p>\n\n<p>This is my code, cloning a Playlist with its private-owned @OneToMany-relationship is a matter of a few lines:</p>\n\n<pre><code>public Playlist cloneEntity( EntityManager em ) {\n    CopyGroup group = new CopyGroup();\n    group.setShouldResetPrimaryKey( true );\n    Playlist copy = (Playlist)em.unwrap( JpaEntityManager.class ).copy( this, group );\n    return copy;\n}\n</code></pre>\n\n<p>Make sure that you use persist() to save this new object, merge() does not work.</p>\n"},{"comments":[{"owner":{"account_id":2047736,"reputation":2932,"user_id":1827453,"accept_rate":69,"display_name":"Panu Haaramo"},"score":0,"creation_date":1596352916,"post_id":35288216,"comment_id":111780416,"body_markdown":"With EclipseLink 2.7.4 `merge` throws exception saying primary key cannot be updated. `persist` works fine.","body":"With EclipseLink 2.7.4 <code>merge</code> throws exception saying primary key cannot be updated. <code>persist</code> works fine."}],"tags":[],"owner":{"account_id":2486210,"reputation":41,"user_id":2164593,"display_name":"Bi30"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1455015539,"creation_date":1455009993,"answer_id":35288216,"question_id":11625096,"body_markdown":"I face the same problem today : I have an entity in database and I want to :\r\n&lt;ul&gt;\r\n&lt;li&gt; get it from database \r\n&lt;li&gt; change one of its attributes value\r\n&lt;li&gt; create a clone of it\r\n&lt;li&gt; modify just some few attributes of the clone\r\n&lt;li&gt; persist clone in database\r\n&lt;/ul&gt;\r\nI succeed in doing following steps :\r\n\r\n    @PersistenceContext(unitName = &quot;...&quot;)\r\n    private EntityManager entityManager;\r\n\r\n    public void findUpdateCloneAndModify(int myEntityId) {\r\n      // retrieve entity from database\r\n      MyEntity myEntity = entityManager.find(MyEntity.class, myEntityId);\r\n      // modify the entity\r\n      myEntity.setAnAttribute(newValue);\r\n      // update modification in database\r\n      myEntity = entityManager.merge(myEntity);\r\n      // detach entity to use it as a new entity (clone)\r\n      entityManager.detach(myEntity);\r\n      myEntity.setId(0);\r\n      // modify detached entity\r\n      myEntity.setAnotherAttribute(otherValue);\r\n      // persist modified clone in database\r\n      myEntity = entityManager.merge(myEntity);\r\n    }\r\n\r\n**Remark** : last step (clone persistence) does not work if I use &#39;persist&#39; instead of &#39;merge&#39;, even if I note in debug mode that clone id has been changed after &#39;persist&#39; command !&lt;br&gt;\r\n&lt;br&gt;\r\nThe problem I still face is that my first entity has not been modified before I detach it.\r\n","title":"How to clone a JPA entity","body":"<p>I face the same problem today : I have an entity in database and I want to :</p>\n\n<ul>\n<li> get it from database \n<li> change one of its attributes value\n<li> create a clone of it\n<li> modify just some few attributes of the clone\n<li> persist clone in database\n</ul>\n\n<p>I succeed in doing following steps :</p>\n\n<pre><code>@PersistenceContext(unitName = \"...\")\nprivate EntityManager entityManager;\n\npublic void findUpdateCloneAndModify(int myEntityId) {\n  // retrieve entity from database\n  MyEntity myEntity = entityManager.find(MyEntity.class, myEntityId);\n  // modify the entity\n  myEntity.setAnAttribute(newValue);\n  // update modification in database\n  myEntity = entityManager.merge(myEntity);\n  // detach entity to use it as a new entity (clone)\n  entityManager.detach(myEntity);\n  myEntity.setId(0);\n  // modify detached entity\n  myEntity.setAnotherAttribute(otherValue);\n  // persist modified clone in database\n  myEntity = entityManager.merge(myEntity);\n}\n</code></pre>\n\n<p><strong>Remark</strong> : last step (clone persistence) does not work if I use 'persist' instead of 'merge', even if I note in debug mode that clone id has been changed after 'persist' command !<br>\n<br>\nThe problem I still face is that my first entity has not been modified before I detach it.</p>\n"},{"tags":[],"owner":{"account_id":4369567,"reputation":131,"user_id":3564338,"display_name":"Amrita"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1483522112,"creation_date":1483522112,"answer_id":41460318,"question_id":11625096,"body_markdown":"You could use mapping frameworks like Orika. http://orika-mapper.github.io/orika-docs/\r\nOrika is a Java bean mapping framework that recursively copies data from one object to another. It is easy to configure and provides various flexibilities as well.&lt;/br&gt;\r\n\r\nHere is how I have used it in my project:&lt;/br&gt;\r\nadded a dependecy :&lt;br&gt;\r\n\r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;ma.glasnost.orika&lt;/groupId&gt;\r\n          &lt;artifactId&gt;orika-core&lt;/artifactId&gt;\r\n          &lt;version&gt;1.4.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nThen use it in the code as follows:&lt;br&gt;\r\n\r\n    MapperFactory mapperFactory = new DefaultMapperFactory.Builder().build();\r\n\tMapperFacade mapper=mapperFactory.getMapperFacade();\r\n\tUser mappedUser = mapper.map(oldUser, User.class);\r\n\r\nThis might help if you have many usecases where such kind of cloning is needed.","title":"How to clone a JPA entity","body":"<p>You could use mapping frameworks like Orika. <a href=\"http://orika-mapper.github.io/orika-docs/\" rel=\"nofollow noreferrer\">http://orika-mapper.github.io/orika-docs/</a>\nOrika is a Java bean mapping framework that recursively copies data from one object to another. It is easy to configure and provides various flexibilities as well.</p>\n\n<p>Here is how I have used it in my project:\nadded a dependecy :<br></p>\n\n<pre><code> &lt;dependency&gt;\n      &lt;groupId&gt;ma.glasnost.orika&lt;/groupId&gt;\n      &lt;artifactId&gt;orika-core&lt;/artifactId&gt;\n      &lt;version&gt;1.4.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then use it in the code as follows:<br></p>\n\n<pre><code>MapperFactory mapperFactory = new DefaultMapperFactory.Builder().build();\nMapperFacade mapper=mapperFactory.getMapperFacade();\nUser mappedUser = mapper.map(oldUser, User.class);\n</code></pre>\n\n<p>This might help if you have many usecases where such kind of cloning is needed.</p>\n"},{"comments":[{"owner":{"account_id":303075,"reputation":527,"user_id":611797,"display_name":"jwj"},"score":0,"creation_date":1525979568,"post_id":43489173,"comment_id":87576491,"body_markdown":"This approach seemed to work best for my purposes. I just use `BeanUtils.copyProperties(source, target, &quot;id&quot;)` and make a copy without its ID attribute, then persist it, where it is assigned an ID.","body":"This approach seemed to work best for my purposes. I just use <code>BeanUtils.copyProperties(source, target, &quot;id&quot;)</code> and make a copy without its ID attribute, then persist it, where it is assigned an ID."},{"owner":{"account_id":80571,"reputation":11247,"user_id":227755,"accept_rate":90,"display_name":"nurettin"},"score":0,"creation_date":1539619080,"post_id":43489173,"comment_id":92558250,"body_markdown":"Will this work when there are one to many / many to one relations ?","body":"Will this work when there are one to many / many to one relations ?"},{"owner":{"account_id":4577177,"reputation":61,"user_id":3715337,"display_name":"vertho"},"score":0,"creation_date":1541669462,"post_id":43489173,"comment_id":93297799,"body_markdown":"@nurettin, no. this is a shallow copy.\nquote from api doc: &quot;this method is intended to perform a &quot;shallow copy&quot; of the properties and so complex properties (for example, nested ones) will not be copied.&quot;\nTry this for deep copy: https://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html","body":"@nurettin, no. this is a shallow copy. quote from api doc: &quot;this method is intended to perform a &quot;shallow copy&quot; of the properties and so complex properties (for example, nested ones) will not be copied.&quot; Try this for deep copy: <a href=\"https://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html\" rel=\"nofollow noreferrer\">javaworld.com/article/2077578/learn-java/&hellip;</a>"}],"tags":[],"owner":{"account_id":4577177,"reputation":61,"user_id":3715337,"display_name":"vertho"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1541672372,"creation_date":1492586719,"answer_id":43489173,"question_id":11625096,"body_markdown":"As mentioned in the comments to the accepted answer, detatch will ignore unflushed changes to the managed entity.\r\nIf you are using spring you have another option which is to use `org.springframework.beans.BeanUtils`\r\n\r\nHere you have `BeanUtils.copyProperties(Object source, Object target)`. This will allow you to do a shallow copy without tampering with the entityManager.\r\n\r\n**Edit:**\r\nquote from api doc: &quot;this method is intended to perform a &quot;shallow copy&quot; of the properties and so complex properties (for example, nested ones) will not be copied.&quot; \r\n\r\n[This][1] blog post may inform you more about deep copying java objects.\r\n\r\n  [1]: https://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html","title":"How to clone a JPA entity","body":"<p>As mentioned in the comments to the accepted answer, detatch will ignore unflushed changes to the managed entity.\nIf you are using spring you have another option which is to use <code>org.springframework.beans.BeanUtils</code></p>\n\n<p>Here you have <code>BeanUtils.copyProperties(Object source, Object target)</code>. This will allow you to do a shallow copy without tampering with the entityManager.</p>\n\n<p><strong>Edit:</strong>\nquote from api doc: \"this method is intended to perform a \"shallow copy\" of the properties and so complex properties (for example, nested ones) will not be copied.\" </p>\n\n<p><a href=\"https://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html\" rel=\"nofollow noreferrer\">This</a> blog post may inform you more about deep copying java objects.</p>\n"},{"comments":[{"owner":{"account_id":1432074,"reputation":7327,"user_id":1354278,"accept_rate":73,"display_name":"johnm"},"score":0,"creation_date":1550758576,"post_id":52196792,"comment_id":96394769,"body_markdown":"the code you&#39;ve posted is implying you are working on a 2nd Edition of your book... (great!.. I have the 1st one)","body":"the code you&#39;ve posted is implying you are working on a 2nd Edition of your book... (great!.. I have the 1st one)"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":0,"creation_date":1550761791,"post_id":52196792,"comment_id":96397182,"body_markdown":"I will surely publish a second edition. I&#39;m waiting for Hibernate 6 to be launched and will release it in 2020.","body":"I will surely publish a second edition. I&#39;m waiting for Hibernate 6 to be launched and will release it in 2020."},{"owner":{"account_id":19132793,"reputation":193,"user_id":13974329,"display_name":"marco"},"score":0,"creation_date":1631774258,"post_id":52196792,"comment_id":122313485,"body_markdown":"Is that still a performant option to use if you have to duplicate 100+ entities (each having multiple relations)?","body":"Is that still a performant option to use if you have to duplicate 100+ entities (each having multiple relations)?"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":0,"creation_date":1631781782,"post_id":52196792,"comment_id":122316545,"body_markdown":"The only way to answer that is to write a JMH test that measures the performance.","body":"The only way to answer that is to write a JMH test that measures the performance."}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":4,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1669968881,"creation_date":1536209967,"answer_id":52196792,"question_id":11625096,"body_markdown":"You are better off using a copy constructor and controlling exactly what attributes need to be cloned.\r\n\r\nSo, if you have a `Post` entity like this one:\r\n\r\n    @Entity(name = &quot;Post&quot;)\r\n    @Table(name = &quot;post&quot;)\r\n    public class Post {\r\n     \r\n        @Id\r\n        @GeneratedValue\r\n        private Long id;\r\n     \r\n        private String title;\r\n     \r\n        @OneToMany(\r\n            mappedBy = &quot;post&quot;,\r\n            cascade = CascadeType.ALL, \r\n            orphanRemoval = true\r\n        )\r\n        private List&lt;PostComment&gt; comments = new ArrayList&lt;&gt;();\r\n     \r\n        @OneToOne(\r\n            mappedBy = &quot;post&quot;,\r\n            cascade = CascadeType.ALL, \r\n            orphanRemoval = true, \r\n            fetch = FetchType.LAZY\r\n        )\r\n        private PostDetails details;\r\n     \r\n        @ManyToMany\r\n        @JoinTable(\r\n            name = &quot;post_tag&quot;,\r\n            joinColumns = @JoinColumn(\r\n                name = &quot;post_id&quot;\r\n            ),\r\n            inverseJoinColumns = @JoinColumn(\r\n                name = &quot;tag_id&quot;\r\n            )\r\n        )\r\n        private Set&lt;Tag&gt; tags = new HashSet&lt;&gt;();\r\n     \r\n        //Getters and setters omitted for brevity\r\n     \r\n        public void addComment(\r\n                PostComment comment) {\r\n            comments.add(comment);\r\n            comment.setPost(this);\r\n        }\r\n     \r\n        public void addDetails(\r\n                PostDetails details) {\r\n            this.details = details;\r\n            details.setPost(this);\r\n        }\r\n     \r\n        public void removeDetails() {\r\n            this.details.setPost(null);\r\n            this.details = null;\r\n        }\r\n    }\r\n\r\nIt does not make sense to clone the `comments` when duplicating a `Post` and using it as a template for a new one:\r\n\r\n    Post post = entityManager.createQuery(&quot;&quot;&quot;\r\n        select p\r\n        from Post p\r\n        join fetch p.details\r\n        join fetch p.tags\r\n        where p.title = :title\r\n    \t&quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence, 1st edition&quot;\r\n    )\r\n    .getSingleResult();\r\n     \r\n    Post postClone = new Post(post);\r\n    postClone.setTitle(\r\n        postClone.getTitle().replace(&quot;1st&quot;, &quot;2nd&quot;)\r\n    );\r\n    entityManager.persist(postClone);\r\n\r\nWhat you need to add to the `Post` entity is a [`copy constructor`][1]:\r\n\r\n    /**\r\n     * Needed by Hibernate when hydrating the entity \r\n     * from the JDBC ResultSet\r\n     */\r\n    private Post() {}\r\n     \r\n    public Post(Post post) {\r\n        this.title = post.title;\r\n     \r\n        addDetails(\r\n            new PostDetails(post.details)\r\n        );\r\n     \r\n        tags.addAll(post.getTags());\r\n    }\r\n\r\nThis is the best way to address the entity clone/duplication problem. Any other methods, which try to make this process completely automatic, miss the point that not all attributes are worth duplicating.\r\n\r\n  [1]: https://vladmihalcea.com/clone-duplicate-entity-jpa-hibernate/\r\n","title":"How to clone a JPA entity","body":"<p>You are better off using a copy constructor and controlling exactly what attributes need to be cloned.</p>\n<p>So, if you have a <code>Post</code> entity like this one:</p>\n<pre><code>@Entity(name = &quot;Post&quot;)\n@Table(name = &quot;post&quot;)\npublic class Post {\n \n    @Id\n    @GeneratedValue\n    private Long id;\n \n    private String title;\n \n    @OneToMany(\n        mappedBy = &quot;post&quot;,\n        cascade = CascadeType.ALL, \n        orphanRemoval = true\n    )\n    private List&lt;PostComment&gt; comments = new ArrayList&lt;&gt;();\n \n    @OneToOne(\n        mappedBy = &quot;post&quot;,\n        cascade = CascadeType.ALL, \n        orphanRemoval = true, \n        fetch = FetchType.LAZY\n    )\n    private PostDetails details;\n \n    @ManyToMany\n    @JoinTable(\n        name = &quot;post_tag&quot;,\n        joinColumns = @JoinColumn(\n            name = &quot;post_id&quot;\n        ),\n        inverseJoinColumns = @JoinColumn(\n            name = &quot;tag_id&quot;\n        )\n    )\n    private Set&lt;Tag&gt; tags = new HashSet&lt;&gt;();\n \n    //Getters and setters omitted for brevity\n \n    public void addComment(\n            PostComment comment) {\n        comments.add(comment);\n        comment.setPost(this);\n    }\n \n    public void addDetails(\n            PostDetails details) {\n        this.details = details;\n        details.setPost(this);\n    }\n \n    public void removeDetails() {\n        this.details.setPost(null);\n        this.details = null;\n    }\n}\n</code></pre>\n<p>It does not make sense to clone the <code>comments</code> when duplicating a <code>Post</code> and using it as a template for a new one:</p>\n<pre><code>Post post = entityManager.createQuery(&quot;&quot;&quot;\n    select p\n    from Post p\n    join fetch p.details\n    join fetch p.tags\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence, 1st edition&quot;\n)\n.getSingleResult();\n \nPost postClone = new Post(post);\npostClone.setTitle(\n    postClone.getTitle().replace(&quot;1st&quot;, &quot;2nd&quot;)\n);\nentityManager.persist(postClone);\n</code></pre>\n<p>What you need to add to the <code>Post</code> entity is a <a href=\"https://vladmihalcea.com/clone-duplicate-entity-jpa-hibernate/\" rel=\"noreferrer\"><code>copy constructor</code></a>:</p>\n<pre><code>/**\n * Needed by Hibernate when hydrating the entity \n * from the JDBC ResultSet\n */\nprivate Post() {}\n \npublic Post(Post post) {\n    this.title = post.title;\n \n    addDetails(\n        new PostDetails(post.details)\n    );\n \n    tags.addAll(post.getTags());\n}\n</code></pre>\n<p>This is the best way to address the entity clone/duplication problem. Any other methods, which try to make this process completely automatic, miss the point that not all attributes are worth duplicating.</p>\n"},{"tags":[],"owner":{"account_id":5927594,"reputation":1227,"user_id":4663054,"display_name":"JanBrus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563526185,"creation_date":1563523951,"answer_id":57108222,"question_id":11625096,"body_markdown":"I just tried setting the id to null and it worked\r\n\r\n    address.setId(null);\r\n    address = addrRepo.save(address);\r\n\r\nsetting the id to null made it so it saved into a new record with new id since i have it automatically generated.","title":"How to clone a JPA entity","body":"<p>I just tried setting the id to null and it worked</p>\n\n<pre><code>address.setId(null);\naddress = addrRepo.save(address);\n</code></pre>\n\n<p>setting the id to null made it so it saved into a new record with new id since i have it automatically generated.</p>\n"},{"tags":[],"owner":{"account_id":8148643,"reputation":151,"user_id":6136489,"display_name":"Nicolas Mafra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572468073,"creation_date":1572467558,"answer_id":58633239,"question_id":11625096,"body_markdown":"ModelMapper lib can be used for this purpose.\r\n\r\n    public MyEntity clone(MyEntity myInstance) {\r\n        MyEntity newInstance = new MyEntity();\r\n        new ModelMapper().map(myInstance, newInstance);\r\n        return newInstance;\r\n    }\r\n\r\njust add the maven dependency\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n        &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"How to clone a JPA entity","body":"<p>ModelMapper lib can be used for this purpose.</p>\n\n<pre><code>public MyEntity clone(MyEntity myInstance) {\n    MyEntity newInstance = new MyEntity();\n    new ModelMapper().map(myInstance, newInstance);\n    return newInstance;\n}\n</code></pre>\n\n<p>just add the maven dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n    &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691605315,"creation_date":1691604996,"answer_id":76870326,"question_id":11625096,"body_markdown":"You can use BeanUtils which is available from Spring or Apache Commons Lang.  But you should not copy the `@Id` nor the `@Version` otherwise saving it will cause issues.\r\n\r\n```java\r\n  public static &lt;S, T&gt; T copyEntityData(\r\n    @NotNull S source,\r\n    @NotNull T target,\r\n    @NotNull EntityManager entityManager,\r\n    String... ignoreProperties) {\r\n\r\n    final var ignoredSet = new HashSet&lt;&gt;(Set.of(ignoreProperties));\r\n    final var targetEntityType = entityManager.getMetamodel().entity(target.getClass());\r\n    final var idName = targetEntityType.getId(targetEntityType.getIdType().getJavaType()).getName();\r\n    ignoredSet.add(idName);\r\n    Optional.ofNullable(targetEntityType.getVersion(Object.class))\r\n      .map(Attribute::getName)\r\n      .ifPresent(ignoredSet::add);\r\n\r\n    BeanUtils.copyProperties(source, target, ignoredSet.toArray(String[]::new));\r\n    return target;\r\n  }\r\n```\r\n\r\nNote this does *not* detect if the field is `updatable` so non-updatable data should be ignored.","title":"How to clone a JPA entity","body":"<p>You can use BeanUtils which is available from Spring or Apache Commons Lang.  But you should not copy the <code>@Id</code> nor the <code>@Version</code> otherwise saving it will cause issues.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public static &lt;S, T&gt; T copyEntityData(\n    @NotNull S source,\n    @NotNull T target,\n    @NotNull EntityManager entityManager,\n    String... ignoreProperties) {\n\n    final var ignoredSet = new HashSet&lt;&gt;(Set.of(ignoreProperties));\n    final var targetEntityType = entityManager.getMetamodel().entity(target.getClass());\n    final var idName = targetEntityType.getId(targetEntityType.getIdType().getJavaType()).getName();\n    ignoredSet.add(idName);\n    Optional.ofNullable(targetEntityType.getVersion(Object.class))\n      .map(Attribute::getName)\n      .ifPresent(ignoredSet::add);\n\n    BeanUtils.copyProperties(source, target, ignoredSet.toArray(String[]::new));\n    return target;\n  }\n</code></pre>\n<p>Note this does <em>not</em> detect if the field is <code>updatable</code> so non-updatable data should be ignored.</p>\n"}],"owner":{"account_id":368209,"reputation":1528,"user_id":714862,"accept_rate":52,"display_name":"krisy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75789,"favorite_count":0,"down_vote_count":0,"up_vote_count":66,"accepted_answer_id":11625136,"answer_count":9,"score":66,"last_activity_date":1691605315,"creation_date":1343110264,"question_id":11625096,"body_markdown":"I have a JPA entity already persisted in the database.   \r\nI would like to have a copy of it (with a different id), with some fields modified.\r\n\r\nWhat is the easiest way to do this? Like:\r\n\r\n * setting it&#39;s `@Id` field to `null` and persisting it will work?\r\n * will I have to create a clone method for the entity (copying all fields except the `@Id`)?\r\n * is there any other approach (like using a cloning framework)?\r\n","title":"How to clone a JPA entity","body":"<p>I have a JPA entity already persisted in the database.<br>\nI would like to have a copy of it (with a different id), with some fields modified.</p>\n\n<p>What is the easiest way to do this? Like:</p>\n\n<ul>\n<li>setting it's <code>@Id</code> field to <code>null</code> and persisting it will work?</li>\n<li>will I have to create a clone method for the entity (copying all fields except the <code>@Id</code>)?</li>\n<li>is there any other approach (like using a cloning framework)?</li>\n</ul>\n"},{"tags":["java","arraylist"],"owner":{"account_id":18626368,"reputation":9,"user_id":13575412,"display_name":"Smruti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691605123,"creation_date":1691045562,"question_id":76825538,"body_markdown":"I have 2 class as parent and child \r\n\r\n    public class Accounts implements Serializable{\t\r\n    private String accountCode;\r\n    private String number;\r\n    private List&lt;Details&gt;  details;\r\n    }\r\n    public class Details implements Serializable{\t\r\n    private String accode;\r\n    private String description;\r\n    private String currency;\t\r\n    }\r\nI have below details in arraylist\r\n\r\n20230725;444072744;IN909098223;TestData1;EUR\r\n20230801;444072743;IN909098224;TestData2;INR\r\n20230725;444072744;IN909098225;TestData3;USD\r\n\r\nparents are same with id  20230725 but they have different child.\r\nI want final result like \r\n\r\n20230725;444072744;{IN909098223;TestData1;EUR}, {IN909098225;TestData3;USD}\r\n20230801;444072743;IN909098224;TestData2;INR\r\n\r\nThis data is in a Arraylist\r\nI have done like below\r\n```\r\nint duplicateCount = 0;\r\n    List&lt;Accounts&gt; updatedAccount = new ArrayList&lt;Accounts&gt;();  \r\n\tfor (int i = 0; i &lt; Accounts.size(); i++) {  \r\n\t  for (int j = i+1; j &lt; Accounts.size(); j++) {\r\n\t    if(Accounts.get(i).getAccountCode().equals(Accounts.get(j).getAccountCode())) {\r\n\t\t  duplicateCount++;\r\n\t\t  Accounts.get(i).getDetails().addAll(Accounts.get(j).getDetails());\r\n\t\t  updatedAccount.add(Accounts.get(i));\r\n\t\t  }\r\n\t\t}\r\n    }\r\n    if(duplicateCount == 0){\r\n\t  updatedAccount.add(Accounts.get(i));\r\n\t}\r\n```\r\ni am geting \r\n\r\n    20230725;444072744;{IN909098223;TestData1;EUR}, {IN909098225;TestData3;USD}\r\n    20230801;444072743;IN909098224;TestData2;INR\r\n    20230725;444072744;IN909098225;TestData3;USD","title":"How to merge the child object and create unique parent Object from a Arraylist if parents are unique but have diffener child","body":"<p>I have 2 class as parent and child</p>\n<pre><code>public class Accounts implements Serializable{  \nprivate String accountCode;\nprivate String number;\nprivate List&lt;Details&gt;  details;\n}\npublic class Details implements Serializable{   \nprivate String accode;\nprivate String description;\nprivate String currency;    \n}\n</code></pre>\n<p>I have below details in arraylist</p>\n<p>20230725;444072744;IN909098223;TestData1;EUR\n20230801;444072743;IN909098224;TestData2;INR\n20230725;444072744;IN909098225;TestData3;USD</p>\n<p>parents are same with id  20230725 but they have different child.\nI want final result like</p>\n<p>20230725;444072744;{IN909098223;TestData1;EUR}, {IN909098225;TestData3;USD}\n20230801;444072743;IN909098224;TestData2;INR</p>\n<p>This data is in a Arraylist\nI have done like below</p>\n<pre><code>int duplicateCount = 0;\n    List&lt;Accounts&gt; updatedAccount = new ArrayList&lt;Accounts&gt;();  \n    for (int i = 0; i &lt; Accounts.size(); i++) {  \n      for (int j = i+1; j &lt; Accounts.size(); j++) {\n        if(Accounts.get(i).getAccountCode().equals(Accounts.get(j).getAccountCode())) {\n          duplicateCount++;\n          Accounts.get(i).getDetails().addAll(Accounts.get(j).getDetails());\n          updatedAccount.add(Accounts.get(i));\n          }\n        }\n    }\n    if(duplicateCount == 0){\n      updatedAccount.add(Accounts.get(i));\n    }\n</code></pre>\n<p>i am geting</p>\n<pre><code>20230725;444072744;{IN909098223;TestData1;EUR}, {IN909098225;TestData3;USD}\n20230801;444072743;IN909098224;TestData2;INR\n20230725;444072744;IN909098225;TestData3;USD\n</code></pre>\n"},{"tags":["java","spring","jpa","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":2,"creation_date":1516778868,"post_id":48416927,"comment_id":83823505,"body_markdown":"why do you exclude `DataSourceAutoConfiguration.class` and `HibernateJpaAutoConfiguration.class`?","body":"why do you exclude <code>DataSourceAutoConfiguration.class</code> and <code>HibernateJpaAutoConfiguration.class</code>?"},{"owner":{"account_id":12798378,"reputation":541,"user_id":9260487,"display_name":"Zahid Anwar"},"score":0,"creation_date":1516782283,"post_id":48416927,"comment_id":83825223,"body_markdown":"If I take out the exclude and simply have @EnableAutoConfiguration, Springboot throws an error about being unable to configure an inMemoryDatabase. This is what I see: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;inMemoryDatabaseShutdownExecutor&#39; defined in class path resource [org/springframework/boot/devtools/autoconfigure/DevToolsDataSourceAutoConfiguration.class]: Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"If I take out the exclude and simply have @EnableAutoConfiguration, Springboot throws an error about being unable to configure an inMemoryDatabase. This is what I see: org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion: Error creating bean with name &#39;inMemoryDatabaseShutdownExecutor&#39; defined in class path resource [org/springframework/boot/devtools/autoconfigure/DevToolsDat&zwnj;&#8203;aSourceAutoConfigura&zwnj;&#8203;tion.class]: Error creating bean with name &#39;dataSource&#39; defined in class path resource"},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1516782708,"post_id":48416927,"comment_id":83825418,"body_markdown":"try to start your app without any annotaion on your main class. Just leave `@SpringBootApplication`.  Also without `scanBasePackages= &quot;com.sweng.giflib&quot;`","body":"try to start your app without any annotaion on your main class. Just leave <code>@SpringBootApplication</code>.  Also without <code>scanBasePackages= &quot;com.sweng.giflib&quot;</code>"},{"owner":{"account_id":12798378,"reputation":541,"user_id":9260487,"display_name":"Zahid Anwar"},"score":0,"creation_date":1516783095,"post_id":48416927,"comment_id":83825614,"body_markdown":"Thank you for the suggestion but with just the @SpringBootApplication and no other annotation I still get something about the inMemoryDatabasesShutdown. I see org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;inMemoryDatabaseShutdownExecutor&#39; defined in class path resource [org/springframework/boot/devtools/autoconfigure/DevToolsDataSourceAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;inMemoryDatabaseShutdownExecutor&#39; parameter 0;","body":"Thank you for the suggestion but with just the @SpringBootApplication and no other annotation I still get something about the inMemoryDatabasesShutdown. I see org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion: Error creating bean with name &#39;inMemoryDatabaseShutdownExecutor&#39; defined in class path resource [org/springframework/boot/devtools/autoconfigure/DevToolsDat&zwnj;&#8203;aSourceAutoConfigura&zwnj;&#8203;tion.class]: Unsatisfied dependency expressed through method &#39;inMemoryDatabaseShutdownExecutor&#39; parameter 0;"},{"owner":{"account_id":11795065,"reputation":8307,"user_id":8629960,"display_name":"Kirill Simonov"},"score":1,"creation_date":1516831166,"post_id":48416927,"comment_id":83855860,"body_markdown":"I&#39;ve just noticed that you have some mistakes in your properties. Check my updated answer","body":"I&#39;ve just noticed that you have some mistakes in your properties. Check my updated answer"},{"owner":{"account_id":951350,"reputation":21,"user_id":7955362,"display_name":"Squarism"},"score":0,"creation_date":1688094670,"post_id":48416927,"comment_id":135030845,"body_markdown":"This post helped me fix the above problem [SO post](https://stackoverflow.com/a/61848468/7955362)","body":"This post helped me fix the above problem <a href=\"https://stackoverflow.com/a/61848468/7955362\">SO post</a>"}],"answers":[{"comments":[{"owner":{"account_id":12524244,"reputation":59,"user_id":9114634,"display_name":"VinjaNinja"},"score":1,"creation_date":1673611516,"post_id":48417180,"comment_id":132543539,"body_markdown":"Along with your response, I had to make another change since I was using 2 datasources (connecting to 2 different DBs).\n\n @Transactional(propagation = Propagation.REQUIRES_NEW, transactionManager = &quot;yourCustomTransactionManagerBean&quot;)\n\nThis will save few development days worth of efforts!\nThanks for your answer, upvoted :)","body":"Along with your response, I had to make another change since I was using 2 datasources (connecting to 2 different DBs).   @Transactional(propagation = Propagation.REQUIRES_NEW, transactionManager = &quot;yourCustomTransactionManagerBean&quot;)  This will save few development days worth of efforts! Thanks for your answer, upvoted :)"}],"tags":[],"owner":{"account_id":11795065,"reputation":8307,"user_id":8629960,"display_name":"Kirill Simonov"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1685033987,"creation_date":1516779657,"answer_id":48417180,"question_id":48416927,"body_markdown":"You either need to remove `exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class}` (and let Spring automatically configure your datasource) or [configure your datasource manually][1]\r\n\r\n    @Bean\r\n    @ConfigurationProperties(prefix=&quot;spring.datasource&quot;)\r\n    public DataSource dataSource() {\r\n        return new YourCustomDataSource();\r\n    }\r\n\r\n**UPDATE:**  Seems like you have some mistakes in your properties:\r\n\r\n    spring.datasource.url== jdbc:mysql://localhost:3306/giflib\r\n    spring.db.driver= com.mysql.jdbc.Driver\r\n\r\nTry to remove the extra `=` from the first line and use `spring.datasource.driver-class-name` property name for the second:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/giflib\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n\r\nAlso add a version to your MySQL dependency:\r\n\r\n    compile &quot;mysql:mysql-connector-java:6.0.6&quot;\r\n\r\nI think that because of these mistakes Spring is unable to autodetect your datasource type correctly.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-configure-a-datasource","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>You either need to remove <code>exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class}</code> (and let Spring automatically configure your datasource) or <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-configure-a-datasource\" rel=\"nofollow noreferrer\">configure your datasource manually</a></p>\n<pre><code>@Bean\n@ConfigurationProperties(prefix=&quot;spring.datasource&quot;)\npublic DataSource dataSource() {\n    return new YourCustomDataSource();\n}\n</code></pre>\n<p><strong>UPDATE:</strong>  Seems like you have some mistakes in your properties:</p>\n<pre><code>spring.datasource.url== jdbc:mysql://localhost:3306/giflib\nspring.db.driver= com.mysql.jdbc.Driver\n</code></pre>\n<p>Try to remove the extra <code>=</code> from the first line and use <code>spring.datasource.driver-class-name</code> property name for the second:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/giflib\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n</code></pre>\n<p>Also add a version to your MySQL dependency:</p>\n<pre><code>compile &quot;mysql:mysql-connector-java:6.0.6&quot;\n</code></pre>\n<p>I think that because of these mistakes Spring is unable to autodetect your datasource type correctly.</p>\n"},{"tags":[],"owner":{"account_id":1229279,"reputation":1864,"user_id":1194202,"accept_rate":73,"display_name":"Johna"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516782363,"creation_date":1516782363,"answer_id":48417848,"question_id":48416927,"body_markdown":"You have chosen to bypass auto creation of EntityManagerFactory. Therefore you should add folowing two beans in one of your configuration classes, possibly in Application class.\r\n\r\n    private static String PROP_DB_DRIVER_CLASS = &quot;spring.db.driver&quot;;\r\n    private static String PROP_DB_URL = &quot;spring.datasource.url&quot;;\r\n    private static String PROP_DB_USER = &quot;spring.datasource.username&quot;;\r\n    private static String PROP_DB_PASS = &quot;spring.datasource.password&quot;;\r\n\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Bean\r\n    public DataSource dataSource(){\r\n          DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n          dataSource.setDriverClassName(env.getProperty(PROP_DB_DRIVER_CLASS));\r\n          dataSource.setUrl(env.getProperty(PROP_DB_URL));\r\n          dataSource.setUsername(env.getProperty(PROP_DB_USER));\r\n          dataSource.setPassword(env.getProperty(PROP_DB_PASS));\r\n          return dataSource;\r\n    }\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n          LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n          em.setDataSource(dataSource());\r\n          em.setPackagesToScan(&quot;com.sweng.giflib.model&quot;);\r\n     \r\n          JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n          em.setJpaVendorAdapter(vendorAdapter);\r\n          em.setJpaProperties(additionalProperties());\r\n     \r\n          return em;\r\n    }\r\n\r\nDon&#39;t forget to add the hibernate dependency to your project.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>You have chosen to bypass auto creation of EntityManagerFactory. Therefore you should add folowing two beans in one of your configuration classes, possibly in Application class.</p>\n\n<pre><code>private static String PROP_DB_DRIVER_CLASS = \"spring.db.driver\";\nprivate static String PROP_DB_URL = \"spring.datasource.url\";\nprivate static String PROP_DB_USER = \"spring.datasource.username\";\nprivate static String PROP_DB_PASS = \"spring.datasource.password\";\n\n@Autowired\nprivate Environment env;\n\n@Bean\npublic DataSource dataSource(){\n      DriverManagerDataSource dataSource = new DriverManagerDataSource();\n      dataSource.setDriverClassName(env.getProperty(PROP_DB_DRIVER_CLASS));\n      dataSource.setUrl(env.getProperty(PROP_DB_URL));\n      dataSource.setUsername(env.getProperty(PROP_DB_USER));\n      dataSource.setPassword(env.getProperty(PROP_DB_PASS));\n      return dataSource;\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n      LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n      em.setDataSource(dataSource());\n      em.setPackagesToScan(\"com.sweng.giflib.model\");\n\n      JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n      em.setJpaVendorAdapter(vendorAdapter);\n      em.setJpaProperties(additionalProperties());\n\n      return em;\n}\n</code></pre>\n\n<p>Don't forget to add the hibernate dependency to your project.</p>\n"},{"comments":[{"owner":{"account_id":1751674,"reputation":117,"user_id":1600619,"display_name":"codester"},"score":0,"creation_date":1604620667,"post_id":52027710,"comment_id":114410570,"body_markdown":"For me, I needed to add hibernate dependencies that were missing in my pom (very similar to user9347049 &#39;s situation","body":"For me, I needed to add hibernate dependencies that were missing in my pom (very similar to user9347049 &#39;s situation"}],"tags":[],"owner":{"account_id":4418961,"reputation":1927,"user_id":9347049,"display_name":"user9347049"},"comment_count":1,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1535297408,"creation_date":1535297408,"answer_id":52027710,"question_id":48416927,"body_markdown":"Run into same issue when trying to connect spring boot to mysql database.\r\n\r\nWhat saved me was adding correct version of hibernate-core to my pom file. \r\nFrom hibernate onwards 5.2.0. hibernate-entitymanager is no longer needed.  Hibernate-core 5.2.0 have problem with Spring Data JPA while process collection.` Hibernate-core 5.2.1` and above is ok with Spring Data JPA if you are using Spring Data JPA. \r\n\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n     &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n     &lt;version&gt; 5.2.1.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>Run into same issue when trying to connect spring boot to mysql database.</p>\n\n<p>What saved me was adding correct version of hibernate-core to my pom file. \nFrom hibernate onwards 5.2.0. hibernate-entitymanager is no longer needed.  Hibernate-core 5.2.0 have problem with Spring Data JPA while process collection.<code>Hibernate-core 5.2.1</code> and above is ok with Spring Data JPA if you are using Spring Data JPA. </p>\n\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n &lt;version&gt; 5.2.1.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"score":14,"creation_date":1589487858,"post_id":54663039,"comment_id":109322993,"body_markdown":"So the bean has to be named &quot;entityManagerFactory&quot;.................gaaaaaaaaaaaaaaaaaa more spring voodoo.  :(","body":"So the bean has to be named &quot;entityManagerFactory&quot;.................gaaaaaaaaaaaaaaaaaa more spring voodoo.  :("},{"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"score":6,"creation_date":1608203080,"post_id":54663039,"comment_id":115513776,"body_markdown":"In my case I&#180;m running into this problem using two datasources. One defined with the default properties and the other prgrammatically, by creating LocalContainerEntityManagerFactoryBean and PlatformTransactionManager beans","body":"In my case I&#180;m running into this problem using two datasources. One defined with the default properties and the other prgrammatically, by creating LocalContainerEntityManagerFactoryBean and PlatformTransactionManager beans"},{"owner":{"account_id":1144927,"reputation":2893,"user_id":1127920,"accept_rate":81,"display_name":"gawi"},"score":6,"creation_date":1637137532,"post_id":54663039,"comment_id":123742422,"body_markdown":"Alternatively you can inform Spring Boot that your bean is named differently by: `@EnableJpaRepositories(basePackages = &quot;com.sweng.giflib.repository&quot;, entityManagerFactoryRef = &quot;sessionFactory&quot;)`","body":"Alternatively you can inform Spring Boot that your bean is named differently by: <code>@EnableJpaRepositories(basePackages = &quot;com.sweng.giflib.repository&quot;, entityManagerFactoryRef = &quot;sessionFactory&quot;)</code>"},{"owner":{"account_id":10807037,"reputation":71,"user_id":7948894,"display_name":"Ashutosh Mohanty"},"score":0,"creation_date":1658569420,"post_id":54663039,"comment_id":129087709,"body_markdown":"Thanks ! saved the day.  Spring configuration through properties file automatically loads up sessionFactory as entityManagerFactory, problem comes when I am creating the beans manually.","body":"Thanks ! saved the day.  Spring configuration through properties file automatically loads up sessionFactory as entityManagerFactory, problem comes when I am creating the beans manually."},{"owner":{"account_id":1653666,"reputation":430,"user_id":1523743,"accept_rate":100,"display_name":"instinct"},"score":0,"creation_date":1682252035,"post_id":54663039,"comment_id":134182701,"body_markdown":"My SpringBoot 2.6 app didn&#39;t need `@Bean(name=&quot;entityManagerFactory&quot;)` name but when I migrated to SpringBoot 3, It did. Thanks!","body":"My SpringBoot 2.6 app didn&#39;t need <code>@Bean(name=&quot;entityManagerFactory&quot;)</code> name but when I migrated to SpringBoot 3, It did. Thanks!"},{"owner":{"account_id":22296747,"reputation":151,"user_id":16522650,"display_name":"NebuCodeNezzar"},"score":0,"creation_date":1694361440,"post_id":54663039,"comment_id":135878179,"body_markdown":"Actually, if you have two datasource beans, the &quot;required a bean named &#39;entityManagerFactory&#39; that could not be found. &quot; error also appears","body":"Actually, if you have two datasource beans, the &quot;required a bean named &#39;entityManagerFactory&#39; that could not be found. &quot; error also appears"}],"tags":[],"owner":{"account_id":8868539,"reputation":2197,"user_id":6622913,"display_name":"Istiaque Hossain"},"comment_count":6,"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1630513497,"creation_date":1550035190,"answer_id":54663039,"question_id":48416927,"body_markdown":"I was getting error message like-\r\n\r\n&gt; required a bean named &#39;**entityManagerFactory**&#39; that could not be found.\r\n\r\n\r\n\r\nAfter lot of googling solve this problem.\r\nI set manual configuration for JPA.\r\n\r\n    @Bean \r\n    public LocalSessionFactoryBean sessionFactory() {\r\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean(); \r\n    \r\n        return sessionFactory;\r\n    }\r\nbut JPA by default search sessionFactory by name &#39;**entityManagerFactory**&#39;\r\nso change my code as:\r\n\r\n    @Bean(name=&quot;entityManagerFactory&quot;)\r\n    public LocalSessionFactoryBean sessionFactory() {\r\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\r\n    \r\n        return sessionFactory;\r\n    } ","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I was getting error message like-</p>\n<blockquote>\n<p>required a bean named '<strong>entityManagerFactory</strong>' that could not be found.</p>\n</blockquote>\n<p>After lot of googling solve this problem.\nI set manual configuration for JPA.</p>\n<pre><code>@Bean \npublic LocalSessionFactoryBean sessionFactory() {\n    LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean(); \n\n    return sessionFactory;\n}\n</code></pre>\n<p>but JPA by default search sessionFactory by name '<strong>entityManagerFactory</strong>'\nso change my code as:</p>\n<pre><code>@Bean(name=&quot;entityManagerFactory&quot;)\npublic LocalSessionFactoryBean sessionFactory() {\n    LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\n\n    return sessionFactory;\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16970991,"reputation":39,"user_id":12275621,"display_name":"avaneesh kumar Shukla"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1577369055,"creation_date":1577367827,"answer_id":59489335,"question_id":48416927,"body_markdown":"I tried several ways besides of mentioned suggestions to remove this error.I got resolved this error by  just removing following code from application.properties\r\n\r\n    spring.jpa.properties.hibernate.cache.use_second_level_cache=true                                                   \r\n    spring.jpa.properties.hibernate.cache.use_query_cache=false                                                         \r\n    spring.jpa.properties.hibernate.generate_statistics=false                                                           \r\n    spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I tried several ways besides of mentioned suggestions to remove this error.I got resolved this error by  just removing following code from application.properties</p>\n\n<pre><code>spring.jpa.properties.hibernate.cache.use_second_level_cache=true                                                   \nspring.jpa.properties.hibernate.cache.use_query_cache=false                                                         \nspring.jpa.properties.hibernate.generate_statistics=false                                                           \nspring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16201165,"reputation":1,"user_id":11697526,"display_name":"Wellington DC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577995283,"creation_date":1577995283,"answer_id":59569318,"question_id":48416927,"body_markdown":"In my case the problem was `exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class}` declared in `@SpringBootApplication` annotation, so thanks to Kirill Simonov tip I solved the problem that spent all day long of searching and broking head. Removing it worked extremely fine for me after hours trying. Everything else was ok, @Service, @Autowired, @EnableAutoConfiguration and @ComponentScan are redundant in this spring boot version, so really much time trying tips in the internet.\r\n\r\nI&#39;m using spring boot 2.1.11.RELEASE version.\r\n\r\nProgramming is something funny, once I used the exclude solution to solve an error message, then the same thing was the problem now. So there&#39;s no magic spell or formula as this universe has lots and lots of different scenarios, even if it&#39;s similar to a previous one we worked on.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>In my case the problem was <code>exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class}</code> declared in <code>@SpringBootApplication</code> annotation, so thanks to Kirill Simonov tip I solved the problem that spent all day long of searching and broking head. Removing it worked extremely fine for me after hours trying. Everything else was ok, @Service, @Autowired, @EnableAutoConfiguration and @ComponentScan are redundant in this spring boot version, so really much time trying tips in the internet.</p>\n\n<p>I'm using spring boot 2.1.11.RELEASE version.</p>\n\n<p>Programming is something funny, once I used the exclude solution to solve an error message, then the same thing was the problem now. So there's no magic spell or formula as this universe has lots and lots of different scenarios, even if it's similar to a previous one we worked on.</p>\n"},{"comments":[{"owner":{"account_id":4497597,"reputation":181,"user_id":3657024,"display_name":"rpajaziti"},"score":0,"creation_date":1697185665,"post_id":60474034,"comment_id":136250763,"body_markdown":"Mine was this one, someone added before this. Thanks","body":"Mine was this one, someone added before this. Thanks"}],"tags":[],"owner":{"account_id":8320082,"reputation":1581,"user_id":6252111,"display_name":"Abdulrahman Hashem"},"comment_count":1,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1583057640,"creation_date":1583057640,"answer_id":60474034,"question_id":48416927,"body_markdown":"For me, I&#39;ve forgotten to remove `DataSourceAutoConfiguration.class` from exclusions.\r\n\r\nSo this:\r\n\r\n    @SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})\r\n    // Main class definition\r\n\r\nShould be:\r\n\r\n    @SpringBootApplication()\r\n    // Main class definition","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>For me, I've forgotten to remove <code>DataSourceAutoConfiguration.class</code> from exclusions.</p>\n\n<p>So this:</p>\n\n<pre><code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})\n// Main class definition\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>@SpringBootApplication()\n// Main class definition\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11410251,"reputation":69,"user_id":8364607,"display_name":"tushar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1612760365,"creation_date":1612760365,"answer_id":66096130,"question_id":48416927,"body_markdown":"I was getting the issue , because I forgot to remove the annotation `@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class })` that I had added, while testing hardcoded values.\r\nResolved the issue by simply using `@SpringBootApplication`","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I was getting the issue , because I forgot to remove the annotation <code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class })</code> that I had added, while testing hardcoded values.\nResolved the issue by simply using <code>@SpringBootApplication</code></p>\n"},{"tags":[],"owner":{"account_id":2269433,"reputation":436,"user_id":1997258,"display_name":"dpalacio"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1612784588,"creation_date":1612784588,"answer_id":66100963,"question_id":48416927,"body_markdown":"in our case was working fine but not for tests with @WebMvcTest\r\n\r\nTook a while to find out but issue was:\r\n```\r\n@SpringBootApplication\r\n@ComponentScan({&quot;com.givenproject&quot;})\r\n@EntityScan(&quot;com.givenproject&quot;)\r\n@EnableJpaRepositories(&quot;com.givenproject&quot;)\r\n@Configuration\r\npublic class Application {\r\n```\r\n\r\ninstead do:\r\n```\r\n@SpringBootApplication\r\n@Configuration\r\npublic class Application {\r\n```\r\nand\r\n```\r\n@Configuration\r\n@ComponentScan({&quot;com.givenproject&quot;})\r\n@EntityScan(basePackages = &quot;com.givenproject&quot;)\r\n@EnableJpaRepositories(basePackages = &quot;com.givenproject&quot;)\r\npublic class DataConfig {\r\n}\r\n```","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>in our case was working fine but not for tests with @WebMvcTest</p>\n<p>Took a while to find out but issue was:</p>\n<pre><code>@SpringBootApplication\n@ComponentScan({&quot;com.givenproject&quot;})\n@EntityScan(&quot;com.givenproject&quot;)\n@EnableJpaRepositories(&quot;com.givenproject&quot;)\n@Configuration\npublic class Application {\n</code></pre>\n<p>instead do:</p>\n<pre><code>@SpringBootApplication\n@Configuration\npublic class Application {\n</code></pre>\n<p>and</p>\n<pre><code>@Configuration\n@ComponentScan({&quot;com.givenproject&quot;})\n@EntityScan(basePackages = &quot;com.givenproject&quot;)\n@EnableJpaRepositories(basePackages = &quot;com.givenproject&quot;)\npublic class DataConfig {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18266810,"reputation":302,"user_id":13298363,"display_name":"Aashman Thing"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1619098509,"creation_date":1619098509,"answer_id":67214363,"question_id":48416927,"body_markdown":"In my case, I removed the version of mysql connector and let spring boot handle it. And it worked.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>In my case, I removed the version of mysql connector and let spring boot handle it. And it worked.</p>\n"},{"comments":[{"owner":{"account_id":1058727,"reputation":2281,"user_id":1060828,"accept_rate":86,"display_name":"arowell"},"score":0,"creation_date":1632953757,"post_id":69383373,"comment_id":122636076,"body_markdown":"Is that a line you removed, or added?","body":"Is that a line you removed, or added?"},{"owner":{"account_id":15115213,"reputation":11,"user_id":10958055,"display_name":"Steinhof"},"score":0,"creation_date":1633171802,"post_id":69383373,"comment_id":122692810,"body_markdown":"removed the dependency","body":"removed the dependency"}],"tags":[],"owner":{"account_id":15115213,"reputation":11,"user_id":10958055,"display_name":"Steinhof"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1688103705,"creation_date":1632949639,"answer_id":69383373,"question_id":48416927,"body_markdown":"Solved a problem by removing jooq dependency:\r\n```\r\nimplementation(&quot;org.springframework.boot:spring-boot-starter-jooq&quot;)\r\n```\r\n","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>Solved a problem by removing jooq dependency:</p>\n<pre><code>implementation(&quot;org.springframework.boot:spring-boot-starter-jooq&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5448686,"reputation":6798,"user_id":4573839,"accept_rate":89,"display_name":"yu yang Jian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664951089,"creation_date":1664951089,"answer_id":73956543,"question_id":48416927,"body_markdown":"For me, I&#39;m wrting Spring Unit Test, in the `Cotroller` I declare `repository` variable, I move the repository and its behavior to another new class, and called the new class method in `Controller`.\r\n\r\nBesides, for the `Application` class in `src\\main` which is same package with `src\\test`, keep the `Application` simple like:\r\n\r\n    package yourpackage;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class ApplicationTest {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(ApplicationTest.class, args);\r\n        }\r\n    \r\n    }\r\n\r\nthen the problem is solved.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>For me, I'm wrting Spring Unit Test, in the <code>Cotroller</code> I declare <code>repository</code> variable, I move the repository and its behavior to another new class, and called the new class method in <code>Controller</code>.</p>\n<p>Besides, for the <code>Application</code> class in <code>src\\main</code> which is same package with <code>src\\test</code>, keep the <code>Application</code> simple like:</p>\n<pre><code>package yourpackage;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ApplicationTest {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ApplicationTest.class, args);\n    }\n\n}\n</code></pre>\n<p>then the problem is solved.</p>\n"},{"tags":[],"owner":{"account_id":22887286,"reputation":21,"user_id":17027975,"display_name":"Swapnil Gosavi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665813232,"creation_date":1665813232,"answer_id":74077039,"question_id":48416927,"body_markdown":"Please rebuild your project and download all dependencies once again.I also face same issue and my issue was resolved by just downloading dependencies once ","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>Please rebuild your project and download all dependencies once again.I also face same issue and my issue was resolved by just downloading dependencies once</p>\n"},{"tags":[],"owner":{"account_id":26878008,"reputation":1,"user_id":20458940,"display_name":"Atal Tiwari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667995666,"creation_date":1667995666,"answer_id":74374642,"question_id":48416927,"body_markdown":"Solved it by adding the missing annotation &#39;@Entity&#39;.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>Solved it by adding the missing annotation '@Entity'.</p>\n"},{"comments":[{"owner":{"account_id":12473846,"reputation":98,"user_id":9080974,"display_name":"Herry"},"score":0,"creation_date":1670835034,"post_id":74488398,"comment_id":131956673,"body_markdown":"`@EnableAutoConfiguration` is already included in `@SpringBootApplication`. IntelliJ even specifically warns about this","body":"<code>@EnableAutoConfiguration</code> is already included in <code>@SpringBootApplication</code>. IntelliJ even specifically warns about this"}],"tags":[],"owner":{"account_id":26972987,"reputation":1,"user_id":20538703,"display_name":"sai sree"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1668768036,"creation_date":1668768036,"answer_id":74488398,"question_id":48416927,"body_markdown":"My issue is resolved after adding annotation @EnableAutoConfiguration in class where @SpringBootApplication is present.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>My issue is resolved after adding annotation @EnableAutoConfiguration in class where @SpringBootApplication is present.</p>\n"},{"tags":[],"owner":{"account_id":28023815,"reputation":11,"user_id":21404183,"display_name":"M.M.S Navinda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678888894,"creation_date":1678888894,"answer_id":75745782,"question_id":48416927,"body_markdown":"I had same issue when have two custom data sources with flyway DB migration. After adding @primary annotation for one data source, it worked.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I had same issue when have two custom data sources with flyway DB migration. After adding @primary annotation for one data source, it worked.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1686042631,"post_id":76411782,"comment_id":134741462,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76411782/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28762203,"reputation":1,"user_id":22027848,"display_name":"user22027848"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686031028,"creation_date":1686031028,"answer_id":76411782,"question_id":48416927,"body_markdown":"also I am facing same issue, because I forgot to mention **jdbc** before **mysql://localhost:0000/databaseName** .After adding correct mysql url path my issue is resolved.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>also I am facing same issue, because I forgot to mention <strong>jdbc</strong> before <strong>mysql://localhost:0000/databaseName</strong> .After adding correct mysql url path my issue is resolved.</p>\n"},{"tags":[],"owner":{"account_id":28781625,"reputation":1,"user_id":22043121,"display_name":"Walid Loubar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691605042,"creation_date":1691583724,"answer_id":76867743,"question_id":48416927,"body_markdown":"I found the problem in my import the thing is that `framework.data.annotation.id` was the problem when I changed it with `import javax.persistence.Id`. It solved it (I am using 2.7 spring boot with java 11 ). I hope i could fix your problem.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I found the problem in my import the thing is that <code>framework.data.annotation.id</code> was the problem when I changed it with <code>import javax.persistence.Id</code>. It solved it (I am using 2.7 spring boot with java 11 ). I hope i could fix your problem.</p>\n"}],"owner":{"account_id":12798378,"reputation":541,"user_id":9260487,"display_name":"Zahid Anwar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183593,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"answer_count":18,"score":54,"last_activity_date":1691605042,"creation_date":1516778620,"question_id":48416927,"body_markdown":"I am developing a Spring Boot application using JPA and encountering this error. I am not certain if I am using the correct annotations or missing dependencies. Any help would be greatly appreciated.\r\n\r\n**This is the error message**\r\n\r\n    1:05:28 AM: Executing external task &#39;bootRun&#39;...\r\n    :compileJava\r\n    :processResources UP-TO-DATE\r\n    :classes\r\n    :findMainClass\r\n    :bootRun\r\n    01:05:35.198 [main] DEBUG org.springframework.boot.devtools.settings.DevToolsSettings - Included patterns for restart : []\r\n    01:05:35.201 [main] DEBUG org.springframework.boot.devtools.settings.DevToolsSettings - Excluded patterns for restart : [/spring-boot-starter/target/classes/, /spring-boot-autoconfigure/target/classes/, /spring-boot-starter-[\\w-]+/, /spring-boot/target/classes/, /spring-boot-actuator/target/classes/, /spring-boot-devtools/target/classes/]\r\n    01:05:35.201 [main] DEBUG org.springframework.boot.devtools.restart.ChangeableUrls - Matching URLs for reloading : [file:/C:/Users/zahid/IdeaProjects/giflib/build/classes/main/, file:/C:/Users/zahid/IdeaProjects/giflib/build/resources/main/]\r\n    \r\n      .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::        (v1.5.3.RELEASE)\r\n    \r\n    2018-01-24 01:05:35.539  INFO 14840 --- [  restartedMain] com.sweng.giflib.Application             : Starting Application on DESKTOP-EKFI3C8 with PID 14840 (C:\\Users\\zahid\\IdeaProjects\\giflib\\build\\classes\\main started by zahid in C:\\Users\\zahid\\IdeaProjects\\giflib)\r\n    2018-01-24 01:05:35.540  INFO 14840 --- [  restartedMain] com.sweng.giflib.Application             : No active profile set, falling back to default profiles: default\r\n    2018-01-24 01:05:35.828  INFO 14840 --- [  restartedMain] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@396ad740: startup date [Wed Jan 24 01:05:35 CST 2018]; root of context hierarchy\r\n    2018-01-24 01:05:37.685  INFO 14840 --- [  restartedMain] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)\r\n    2018-01-24 01:05:37.697  INFO 14840 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service Tomcat\r\n    2018-01-24 01:05:37.699  INFO 14840 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.14\r\n    2018-01-24 01:05:37.800  INFO 14840 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2018-01-24 01:05:37.801  INFO 14840 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1976 ms\r\n    2018-01-24 01:05:37.991  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;characterEncodingFilter&#39; to: [/*]\r\n    2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;hiddenHttpMethodFilter&#39; to: [/*]\r\n    2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;httpPutFormContentFilter&#39; to: [/*]\r\n    2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;requestContextFilter&#39; to: [/*]\r\n    2018-01-24 01:05:37.993  INFO 14840 --- [ost-startStop-1] .s.DelegatingFilterProxyRegistrationBean : Mapping filter: &#39;springSecurityFilterChain&#39; to: [/*]\r\n    2018-01-24 01:05:37.994  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: &#39;dispatcherServlet&#39; to [/]\r\n    2018-01-24 01:05:38.291  WARN 14840 --- [  restartedMain] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;securityConfig&#39;: Unsatisfied dependency expressed through field &#39;userService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;userServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;userRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39;: Cannot create inner bean &#39;(inner bean)#64397422&#39; of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#64397422&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n    2018-01-24 01:05:38.294  INFO 14840 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service Tomcat\r\n    2018-01-24 01:05:38.321  INFO 14840 --- [  restartedMain] utoConfigurationReportLoggingInitializer : \r\n    \r\n    Error starting ApplicationContext. To display the auto-configuration report re-run your application with &#39;debug&#39; enabled.\r\n    2018-01-24 01:05:38.444 ERROR 14840 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Field userRepository in com.sweng.giflib.service.UserServiceImpl required a bean named &#39;entityManagerFactory&#39; that could not be found.\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration.\r\n    \r\n    \r\n    BUILD SUCCESSFUL\r\n    \r\n    Total time: 9.681 secs\r\n    1:05:38 AM: External task execution finished &#39;bootRun&#39;.\r\n\r\n**build.gradle**\r\n\r\n    buildscript {\r\n        ext {\r\n            springBootVersion = &#39;1.5.3.RELEASE&#39;\r\n        }\r\n        repositories {\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n        }\r\n    }\r\n    \r\n    \r\n    group &#39;com.sweng&#39;\r\n    version &#39;1.0-SNAPSHOT&#39;\r\n    \r\n    \r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;idea&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    apply plugin: &#39;war&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    springBoot {\r\n        mainClass = &quot;com.sweng.giflib.Application&quot;\r\n    }\r\n    dependencies {\r\n        compile &quot;org.springframework.boot:spring-boot-starter-data-jpa:$springBootVersion&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-web:$springBootVersion&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-thymeleaf:$springBootVersion&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-devtools:$springBootVersion&quot;\r\n        compile &quot;mysql:mysql-connector-java&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-security:$springBootVersion&quot;\r\n        compile &quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity4:2.1.2.RELEASE&quot;\r\n    \r\n        providedRuntime &#39;org.springframework.boot:spring-boot-starter-tomcat&#39;\r\n    }\r\n\r\n**application.properties**\r\n\r\n    spring.datasource.url== jdbc:mysql://localhost:3306/giflib\r\n    spring.db.driver= com.mysql.jdbc.Driver\r\n    spring.datasource.username = su\r\n    spring.datasource.password = \r\n    spring.jpa.show-sql = true\r\n    #spring.jpa.hibernate.ddl-auto = update\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n    spring.jpa.hibernate.naming.strategy = org.hibernate.cfg.ImprovedNamingStrategy\r\n\r\n**Application.java**\r\n\r\n    package com.sweng.giflib;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;\r\n    import org.springframework.boot.builder.SpringApplicationBuilder;\r\n    import org.springframework.boot.web.support.SpringBootServletInitializer;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    \r\n    @ComponentScan\r\n    @Configuration\r\n    @EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\r\n    @EnableJpaRepositories(basePackages = &quot;com.sweng.giflib.repository&quot;)\r\n    @SpringBootApplication(scanBasePackages= &quot;com.sweng.giflib&quot;)\r\n    \r\n    public class Application extends SpringBootServletInitializer {\r\n    \r\n        @Override\r\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n            return application.sources(Application.class);\r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    \r\n    }\r\n\r\n**UserService.java**\r\n\r\n    package com.sweng.giflib.service;\r\n    \r\n    import com.sweng.giflib.model.User;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    \r\n    public interface UserService extends UserDetailsService {\r\n        User findByUsername(String username);\r\n    }\r\n\r\n**UserServiceImpl.java**\r\n\r\n    package com.sweng.giflib.service;\r\n    \r\n    import com.sweng.giflib.repository.UserRepository;\r\n    import com.sweng.giflib.model.User;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.core.userdetails.UsernameNotFoundException;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    @Service\r\n    public class UserServiceImpl implements UserService {\r\n        @Autowired\r\n        private UserRepository userRepository;\r\n    \r\n        @Override\r\n        public User findByUsername(String username)\r\n        {\r\n            return userRepository.findByusername(username);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n            // Load user from the database (throw exception if not found)\r\n            User user = userRepository.findByusername(username);\r\n            if(user == null) {\r\n                throw new UsernameNotFoundException(&quot;User not found&quot;);\r\n            }\r\n    \r\n            // Return user object\r\n            return user;\r\n        }\r\n    \r\n    }\r\n\r\n**UserRepository.java**\r\n\r\n    package com.sweng.giflib.repository;\r\n    \r\n    \r\n    import com.sweng.giflib.model.User;\r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface UserRepository extends CrudRepository&lt;User, Long&gt;{\r\n        User findByusername(String name);\r\n    \r\n    }\r\n\r\n**User.java**\r\n\r\n    package com.sweng.giflib.model;\r\n    \r\n    import org.springframework.security.core.GrantedAuthority;\r\n    import org.springframework.security.core.authority.SimpleGrantedAuthority;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    import javax.persistence.*;\r\n    import javax.validation.constraints.Size;\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.List;\r\n    \r\n    @Entity\r\n    public class User implements UserDetails {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column(unique = true)\r\n        @Size(min = 8, max = 20)\r\n        private String username;\r\n    \r\n        @Column(length = 100)\r\n        private String password;\r\n    \r\n        @Column(nullable = false)\r\n        private boolean enabled;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;role_id&quot;)\r\n        private Role role;\r\n    \r\n        @Override\r\n        public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n            List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n            authorities.add(new SimpleGrantedAuthority(role.getName()));\r\n            return authorities;\r\n        }\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        @Override\r\n        public String getPassword() {\r\n            return password;\r\n        }\r\n    \r\n        @Override\r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isAccountNonExpired() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isAccountNonLocked() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isCredentialsNonExpired() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isEnabled() {\r\n            return enabled;\r\n        }\r\n    }\r\n\r\n","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I am developing a Spring Boot application using JPA and encountering this error. I am not certain if I am using the correct annotations or missing dependencies. Any help would be greatly appreciated.</p>\n\n<p><strong>This is the error message</strong></p>\n\n<pre><code>1:05:28 AM: Executing external task 'bootRun'...\n:compileJava\n:processResources UP-TO-DATE\n:classes\n:findMainClass\n:bootRun\n01:05:35.198 [main] DEBUG org.springframework.boot.devtools.settings.DevToolsSettings - Included patterns for restart : []\n01:05:35.201 [main] DEBUG org.springframework.boot.devtools.settings.DevToolsSettings - Excluded patterns for restart : [/spring-boot-starter/target/classes/, /spring-boot-autoconfigure/target/classes/, /spring-boot-starter-[\\w-]+/, /spring-boot/target/classes/, /spring-boot-actuator/target/classes/, /spring-boot-devtools/target/classes/]\n01:05:35.201 [main] DEBUG org.springframework.boot.devtools.restart.ChangeableUrls - Matching URLs for reloading : [file:/C:/Users/zahid/IdeaProjects/giflib/build/classes/main/, file:/C:/Users/zahid/IdeaProjects/giflib/build/resources/main/]\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.5.3.RELEASE)\n\n2018-01-24 01:05:35.539  INFO 14840 --- [  restartedMain] com.sweng.giflib.Application             : Starting Application on DESKTOP-EKFI3C8 with PID 14840 (C:\\Users\\zahid\\IdeaProjects\\giflib\\build\\classes\\main started by zahid in C:\\Users\\zahid\\IdeaProjects\\giflib)\n2018-01-24 01:05:35.540  INFO 14840 --- [  restartedMain] com.sweng.giflib.Application             : No active profile set, falling back to default profiles: default\n2018-01-24 01:05:35.828  INFO 14840 --- [  restartedMain] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@396ad740: startup date [Wed Jan 24 01:05:35 CST 2018]; root of context hierarchy\n2018-01-24 01:05:37.685  INFO 14840 --- [  restartedMain] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)\n2018-01-24 01:05:37.697  INFO 14840 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service Tomcat\n2018-01-24 01:05:37.699  INFO 14840 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.14\n2018-01-24 01:05:37.800  INFO 14840 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2018-01-24 01:05:37.801  INFO 14840 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1976 ms\n2018-01-24 01:05:37.991  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2018-01-24 01:05:37.993  INFO 14840 --- [ost-startStop-1] .s.DelegatingFilterProxyRegistrationBean : Mapping filter: 'springSecurityFilterChain' to: [/*]\n2018-01-24 01:05:37.994  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]\n2018-01-24 01:05:38.291  WARN 14840 --- [  restartedMain] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig': Unsatisfied dependency expressed through field 'userService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository': Cannot create inner bean '(inner bean)#64397422' of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property 'entityManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#64397422': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n2018-01-24 01:05:38.294  INFO 14840 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service Tomcat\n2018-01-24 01:05:38.321  INFO 14840 --- [  restartedMain] utoConfigurationReportLoggingInitializer : \n\nError starting ApplicationContext. To display the auto-configuration report re-run your application with 'debug' enabled.\n2018-01-24 01:05:38.444 ERROR 14840 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField userRepository in com.sweng.giflib.service.UserServiceImpl required a bean named 'entityManagerFactory' that could not be found.\n\n\nAction:\n\nConsider defining a bean named 'entityManagerFactory' in your configuration.\n\n\nBUILD SUCCESSFUL\n\nTotal time: 9.681 secs\n1:05:38 AM: External task execution finished 'bootRun'.\n</code></pre>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '1.5.3.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n    }\n}\n\n\ngroup 'com.sweng'\nversion '1.0-SNAPSHOT'\n\n\napply plugin: 'java'\napply plugin: 'idea'\napply plugin: 'org.springframework.boot'\napply plugin: 'war'\n\nrepositories {\n    mavenCentral()\n}\n\nspringBoot {\n    mainClass = \"com.sweng.giflib.Application\"\n}\ndependencies {\n    compile \"org.springframework.boot:spring-boot-starter-data-jpa:$springBootVersion\"\n    compile \"org.springframework.boot:spring-boot-starter-web:$springBootVersion\"\n    compile \"org.springframework.boot:spring-boot-starter-thymeleaf:$springBootVersion\"\n    compile \"org.springframework.boot:spring-boot-devtools:$springBootVersion\"\n    compile \"mysql:mysql-connector-java\"\n    compile \"org.springframework.boot:spring-boot-starter-security:$springBootVersion\"\n    compile \"org.thymeleaf.extras:thymeleaf-extras-springsecurity4:2.1.2.RELEASE\"\n\n    providedRuntime 'org.springframework.boot:spring-boot-starter-tomcat'\n}\n</code></pre>\n\n<p><strong>application.properties</strong></p>\n\n<pre><code>spring.datasource.url== jdbc:mysql://localhost:3306/giflib\nspring.db.driver= com.mysql.jdbc.Driver\nspring.datasource.username = su\nspring.datasource.password = \nspring.jpa.show-sql = true\n#spring.jpa.hibernate.ddl-auto = update\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\nspring.jpa.hibernate.naming.strategy = org.hibernate.cfg.ImprovedNamingStrategy\n</code></pre>\n\n<p><strong>Application.java</strong></p>\n\n<pre><code>package com.sweng.giflib;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\nimport org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.boot.web.support.SpringBootServletInitializer;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n@ComponentScan\n@Configuration\n@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\n@EnableJpaRepositories(basePackages = \"com.sweng.giflib.repository\")\n@SpringBootApplication(scanBasePackages= \"com.sweng.giflib\")\n\npublic class Application extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(Application.class);\n    }\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n\n<p><strong>UserService.java</strong></p>\n\n<pre><code>package com.sweng.giflib.service;\n\nimport com.sweng.giflib.model.User;\nimport org.springframework.security.core.userdetails.UserDetailsService;\n\npublic interface UserService extends UserDetailsService {\n    User findByUsername(String username);\n}\n</code></pre>\n\n<p><strong>UserServiceImpl.java</strong></p>\n\n<pre><code>package com.sweng.giflib.service;\n\nimport com.sweng.giflib.repository.UserRepository;\nimport com.sweng.giflib.model.User;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserServiceImpl implements UserService {\n    @Autowired\n    private UserRepository userRepository;\n\n    @Override\n    public User findByUsername(String username)\n    {\n        return userRepository.findByusername(username);\n    }\n\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        // Load user from the database (throw exception if not found)\n        User user = userRepository.findByusername(username);\n        if(user == null) {\n            throw new UsernameNotFoundException(\"User not found\");\n        }\n\n        // Return user object\n        return user;\n    }\n\n}\n</code></pre>\n\n<p><strong>UserRepository.java</strong></p>\n\n<pre><code>package com.sweng.giflib.repository;\n\n\nimport com.sweng.giflib.model.User;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt;{\n    User findByusername(String name);\n\n}\n</code></pre>\n\n<p><strong>User.java</strong></p>\n\n<pre><code>package com.sweng.giflib.model;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport javax.persistence.*;\nimport javax.validation.constraints.Size;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\n\n@Entity\npublic class User implements UserDetails {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true)\n    @Size(min = 8, max = 20)\n    private String username;\n\n    @Column(length = 100)\n    private String password;\n\n    @Column(nullable = false)\n    private boolean enabled;\n\n    @OneToOne\n    @JoinColumn(name = \"role_id\")\n    private Role role;\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n        authorities.add(new SimpleGrantedAuthority(role.getName()));\n        return authorities;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    @Override\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return username;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return enabled;\n    }\n}\n</code></pre>\n"},{"tags":["java","windows","button","swt","noborder"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691491812,"post_id":76858145,"comment_id":135495890,"body_markdown":"Maybe try  calling`setBackgroundMode(SWT.INHERIT_DEFAULT)` on the parent `Composite`, also try `SWT.INHERIT_FORCE`","body":"Maybe try  calling<code>setBackgroundMode(SWT.INHERIT_DEFAULT)</code> on the parent <code>Composite</code>, also try <code>SWT.INHERIT_FORCE</code>"},{"owner":{"account_id":29183303,"reputation":1,"user_id":22357008,"display_name":"sEul"},"score":0,"creation_date":1691572736,"post_id":76858145,"comment_id":135508546,"body_markdown":"Yes, SWT.INHERIT_FORCE worked for me.\nThank you!!","body":"Yes, SWT.INHERIT_FORCE worked for me. Thank you!!"}],"owner":{"account_id":29183303,"reputation":1,"user_id":22357008,"display_name":"sEul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691604280,"creation_date":1691486296,"question_id":76858145,"body_markdown":"I have created an swt button but I can see there is a white border around the button. Is there anyway I can make the border bounds equal to button or remove that white border around the button?\r\nThis issue I&#39;m facing only on windows. On MacOs I don&#39;t see any white border around these buttons.\r\n\r\n\r\nI did try using SWT.FLAT while creating the button and I also tried using GridData to set the widthHint, HeightHint to 0 but nothing helped.","title":"Is there a way to remove border of swt button or at least to make bounds of border equal to that of button only on windows","body":"<p>I have created an swt button but I can see there is a white border around the button. Is there anyway I can make the border bounds equal to button or remove that white border around the button?\nThis issue I'm facing only on windows. On MacOs I don't see any white border around these buttons.</p>\n<p>I did try using SWT.FLAT while creating the button and I also tried using GridData to set the widthHint, HeightHint to 0 but nothing helped.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"score":3,"creation_date":1625861923,"post_id":68322316,"comment_id":120749376,"body_markdown":"You don&#39;t have to return the exception, instead return false. If you want to handle the exception near actionResult, throw e instead of returning e.","body":"You don&#39;t have to return the exception, instead return false. If you want to handle the exception near actionResult, throw e instead of returning e."},{"owner":{"account_id":12324258,"reputation":717,"user_id":8992732,"display_name":"Yohan Malshika"},"score":0,"creation_date":1625862057,"post_id":68322316,"comment_id":120749412,"body_markdown":"Do you want to return boolean value from the removeMember method?","body":"Do you want to return boolean value from the removeMember method?"},{"owner":{"display_name":"user14101761"},"score":0,"creation_date":1625862213,"post_id":68322316,"comment_id":120749456,"body_markdown":"@aksappy i considered that one but I am required to put the exception in some log file, which I could do in the method itself but couldn&#39;t help wonder if something like this is possible so the MemberAction class doesn&#39;t really know much about the rest of the app. Purely a learning thing I am doing.","body":"@aksappy i considered that one but I am required to put the exception in some log file, which I could do in the method itself but couldn&#39;t help wonder if something like this is possible so the MemberAction class doesn&#39;t really know much about the rest of the app. Purely a learning thing I am doing."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":1,"creation_date":1625862295,"post_id":68322316,"comment_id":120749471,"body_markdown":"Methods return a value of some type or nothing but throw an exception if something goes wrong. Never seen a method returning an exception while it could be possible I think,","body":"Methods return a value of some type or nothing but throw an exception if something goes wrong. Never seen a method returning an exception while it could be possible I think,"},{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1625862709,"post_id":68322316,"comment_id":120749580,"body_markdown":"In pure Java you don&#39;t do such thing. You return a type and throw exceptions. If you are coming from a functional background, you could make use of `Either&lt;Exception,Boolean&gt;` type from Vavr library maybe to represent 2 possible returns though.","body":"In pure Java you don&#39;t do such thing. You return a type and throw exceptions. If you are coming from a functional background, you could make use of <code>Either&lt;Exception,Boolean&gt;</code> type from Vavr library maybe to represent 2 possible returns though."}],"answers":[{"comments":[{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":1,"creation_date":1625862574,"post_id":68322375,"comment_id":120749539,"body_markdown":"Nice solution. Tho it should be `public static **boolean** removeMember(Member m){` if you can update that, in order not to got someone stressed out and wondering ;-) Never return Object because of bad intentions; be as specific as you can on returning stuff when you can help it.","body":"Nice solution. Tho it should be <code>public static **boolean** removeMember(Member m){</code> if you can update that, in order not to got someone stressed out and wondering ;-) Never return Object because of bad intentions; be as specific as you can on returning stuff when you can help it."},{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":1,"creation_date":1625864091,"post_id":68322375,"comment_id":120749916,"body_markdown":"@JayC667 Thanks for the suggestion. For fugure reference, feel free to edit answers directly to correct such oversights.","body":"@JayC667 Thanks for the suggestion. For fugure reference, feel free to edit answers directly to correct such oversights."}],"tags":[],"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1625862708,"creation_date":1625862265,"answer_id":68322375,"question_id":68322316,"body_markdown":"You shouldn&#39;t return an exception from a function. Instead, you should `throw` it. But since your code in the function might already throw an exception, you don&#39;t need to do anything:\r\n\r\n```\r\n   public static boolean removeMember(Member m){\r\n        //do stuff here that possibly throw the exception\r\n        //if nothing is wrong, return true\r\n        return true;\r\n    }\r\n```\r\nNow when you call the method, do the `try...catch`:\r\n\r\n```\r\n  \r\n  try {\r\n    actionResult = mActions.removeMember(m);\r\n    // do something with actionResult\r\n  }catch{\r\n    // remove failed\r\n  }\r\n```\r\n\r\nAlternatively, you can handle the exception in `removeMember()`, but return `false`:\r\n```\r\n   public static boolean removeMember(Member m){\r\n   \r\n        try {\r\n            //do stuff here that possibly throw the exception\r\n            //if nothing is wrong, return true\r\n            return true;\r\n        } catch (IllegalStateException e){\r\n            return false;\r\n        }\r\n    }\r\n```\r\n\r\nNote that every return should have the same type. It is not a good idea to declare `Object` as the return type in order to return things that are completely different types.\r\n\r\nThis provides the benefit that now you don&#39;t need to compare `if(actionResult.equals(true))`. Instead you can just use `if(actionResult)` since `actionResult` is a boolean.","title":"return boolean or an exception from a method","body":"<p>You shouldn't return an exception from a function. Instead, you should <code>throw</code> it. But since your code in the function might already throw an exception, you don't need to do anything:</p>\n<pre><code>   public static boolean removeMember(Member m){\n        //do stuff here that possibly throw the exception\n        //if nothing is wrong, return true\n        return true;\n    }\n</code></pre>\n<p>Now when you call the method, do the <code>try...catch</code>:</p>\n<pre><code>  \n  try {\n    actionResult = mActions.removeMember(m);\n    // do something with actionResult\n  }catch{\n    // remove failed\n  }\n</code></pre>\n<p>Alternatively, you can handle the exception in <code>removeMember()</code>, but return <code>false</code>:</p>\n<pre><code>   public static boolean removeMember(Member m){\n   \n        try {\n            //do stuff here that possibly throw the exception\n            //if nothing is wrong, return true\n            return true;\n        } catch (IllegalStateException e){\n            return false;\n        }\n    }\n</code></pre>\n<p>Note that every return should have the same type. It is not a good idea to declare <code>Object</code> as the return type in order to return things that are completely different types.</p>\n<p>This provides the benefit that now you don't need to compare <code>if(actionResult.equals(true))</code>. Instead you can just use <code>if(actionResult)</code> since <code>actionResult</code> is a boolean.</p>\n"},{"tags":[],"owner":{"account_id":13615604,"reputation":278,"user_id":9821615,"display_name":"Hira Kumar Maharjan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691604153,"creation_date":1625863264,"answer_id":68322499,"question_id":68322316,"body_markdown":"Lot of think you need to do here,  I have given a sample of wrong file path file to load which will show exception but at last it will return true from finally\r\n\r\n    import java.io.*;\r\n    public class Test {\r\n    public static Boolean Method_B() {\r\n        try {\r\n            System.out.println(&quot;Main working going..&quot;);\r\n            File file = new File(&quot;./nofile.txt&quot;);\r\n            FileInputStream fis = new FileInputStream(file);\r\n        } catch (IOException e) {\r\n            // Exception handling\r\n            System.out.println(&quot;No file found &quot;);\r\n        } catch (Exception e) {\r\n            // Exception handling\r\n            System.out.println(e);\r\n        } finally {\r\n            return true;\r\n        }\r\n    }\r\n    public static void main(String args[]) {\r\n        if (Test.Method_B()) {\r\n            System.out.println(&quot;Show true ans&quot;);\r\n        } else {\r\n            System.out.println(&quot;Sorry error occured&quot;);\r\n        }\r\n\r\n    }\r\n    }","title":"return boolean or an exception from a method","body":"<p>Lot of think you need to do here,  I have given a sample of wrong file path file to load which will show exception but at last it will return true from finally</p>\n<pre><code>import java.io.*;\npublic class Test {\npublic static Boolean Method_B() {\n    try {\n        System.out.println(&quot;Main working going..&quot;);\n        File file = new File(&quot;./nofile.txt&quot;);\n        FileInputStream fis = new FileInputStream(file);\n    } catch (IOException e) {\n        // Exception handling\n        System.out.println(&quot;No file found &quot;);\n    } catch (Exception e) {\n        // Exception handling\n        System.out.println(e);\n    } finally {\n        return true;\n    }\n}\npublic static void main(String args[]) {\n    if (Test.Method_B()) {\n        System.out.println(&quot;Show true ans&quot;);\n    } else {\n        System.out.println(&quot;Sorry error occured&quot;);\n    }\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3508628,"reputation":501,"user_id":2933553,"accept_rate":50,"display_name":"SaleemKhair"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625983089,"creation_date":1625863703,"answer_id":68322554,"question_id":68322316,"body_markdown":"There are multiple practices involving the remove operations in OOP,\r\n\r\n1. You can return the member that was removed inside a `Optional` object, where you can evaluate `.present()` in your condition later.\r\nThat will require you to silently handle the exception thrown on error, but you MUST log the error and return an empty `Optional` object. \r\n-&gt; We can see this in most CRUD interfaces.\r\n\r\n2. You could return a boolean `false` in your catch block, but that will also require you to log the exception message. \r\n-&gt; this is a best practice if you want to avoid interrupting the thread, like in UI apps.\r\n\r\n3. You could just re-throw the exception and have the caller of the function catch it, in this case you have to choises:\r\n\r\n   - Definite `throws` in your function, which will force the caller to catch it at compile time, this is called a **Checked Exception** If you believe an error here is fatal.\r\n   - Throw an unchecked exception **RuntimeException** and have it be thrown to the caller at runtime.\r\n\r\n   -&gt; Usually seen in API implementations where you want to give the caller the freedom to handle the call","title":"return boolean or an exception from a method","body":"<p>There are multiple practices involving the remove operations in OOP,</p>\n<ol>\n<li><p>You can return the member that was removed inside a <code>Optional</code> object, where you can evaluate <code>.present()</code> in your condition later.\nThat will require you to silently handle the exception thrown on error, but you MUST log the error and return an empty <code>Optional</code> object.\n-&gt; We can see this in most CRUD interfaces.</p>\n</li>\n<li><p>You could return a boolean <code>false</code> in your catch block, but that will also require you to log the exception message.\n-&gt; this is a best practice if you want to avoid interrupting the thread, like in UI apps.</p>\n</li>\n<li><p>You could just re-throw the exception and have the caller of the function catch it, in this case you have to choises:</p>\n<ul>\n<li>Definite <code>throws</code> in your function, which will force the caller to catch it at compile time, this is called a <strong>Checked Exception</strong> If you believe an error here is fatal.</li>\n<li>Throw an unchecked exception <strong>RuntimeException</strong> and have it be thrown to the caller at runtime.</li>\n</ul>\n<p>-&gt; Usually seen in API implementations where you want to give the caller the freedom to handle the call</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1377349,"reputation":53,"user_id":1311094,"display_name":"Maur&#237;cio Avellar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625869011,"creation_date":1625869011,"answer_id":68323176,"question_id":68322316,"body_markdown":"You can:\r\n\r\n```\r\npublic static Boolean removeMember(Member m) {\r\n   \r\n    try {\r\n        //do stuff here that possibly throw the exception\r\n        //if nothing is wrong, return true\r\n        return true;\r\n    } catch (IllegalStateException e) {\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nThen you could use like this:\r\n\r\n```\r\nif (actionResult.removeMember(m)) {\r\n\r\n} else {\r\n            \r\n}\r\n```\r\n\r\nMaybe if you can give us some more info on whether you need your method to return Boolean or an Exception type or even both, we could come up with a better version of the method. Maybe something like this:\r\n\r\n```\r\npublic static Object[] removeMember(Member m) {\r\n    try {\r\n        //do stuff here that possibly throw the exception\r\n        //if nothing is wrong, return true\r\n        return new Object[] {true, null};\r\n    } catch (Exception e){\r\n        return new Object[] {false, e};\r\n    }\r\n}\r\n```\r\n\r\nKeep in mind in my last example I am no longer returning a Boolean so my previous ```if``` wouldn&#39;t work. But you could easily access both Boolean and any other object returned from the method just by:\r\n\r\n```\r\nObject[] ob = actionResult.removeMember(m);\r\n    System.out.println(ob[0] + &quot; &quot; + ob[1]);\r\n```","title":"return boolean or an exception from a method","body":"<p>You can:</p>\n<pre><code>public static Boolean removeMember(Member m) {\n   \n    try {\n        //do stuff here that possibly throw the exception\n        //if nothing is wrong, return true\n        return true;\n    } catch (IllegalStateException e) {\n        return false;\n    }\n}\n</code></pre>\n<p>Then you could use like this:</p>\n<pre><code>if (actionResult.removeMember(m)) {\n\n} else {\n            \n}\n</code></pre>\n<p>Maybe if you can give us some more info on whether you need your method to return Boolean or an Exception type or even both, we could come up with a better version of the method. Maybe something like this:</p>\n<pre><code>public static Object[] removeMember(Member m) {\n    try {\n        //do stuff here that possibly throw the exception\n        //if nothing is wrong, return true\n        return new Object[] {true, null};\n    } catch (Exception e){\n        return new Object[] {false, e};\n    }\n}\n</code></pre>\n<p>Keep in mind in my last example I am no longer returning a Boolean so my previous <code>if</code> wouldn't work. But you could easily access both Boolean and any other object returned from the method just by:</p>\n<pre><code>Object[] ob = actionResult.removeMember(m);\n    System.out.println(ob[0] + &quot; &quot; + ob[1]);\n</code></pre>\n"}],"owner":{"display_name":"user14101761"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2561,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1691604153,"creation_date":1625861825,"question_id":68322316,"body_markdown":"I am learning Java and got stuck. I have this function:\r\n\r\n       class MemberAction{\r\n\r\n       public static Object removeMember(Member m){\r\n       \r\n            try {\r\n                //do stuff here that possibly throw the exception\r\n                //if nothing is wrong, return true\r\n                return true;\r\n            } catch (IllegalStateException e){\r\n                return e;\r\n            }\r\n        }\r\n     }\r\n\r\nthen call it like this:\r\n\r\n      Object actionResult = mActions.removeMember(m);\r\n      if(actionResult.equals(true)){\r\n\r\n      }else{\r\n\r\n      }\r\n\r\nit looks a bit weird and wondering if there is a better way to doing something like this. MemberAction methods return exception or a primitive value (some could be numbers or string) hence my equals(true) approach wont work always.\r\n\r\nWhat would be a good way to create a function that can return a primitive data or an exception and then check what the response was in a good way?","title":"return boolean or an exception from a method","body":"<p>I am learning Java and got stuck. I have this function:</p>\n<pre><code>   class MemberAction{\n\n   public static Object removeMember(Member m){\n   \n        try {\n            //do stuff here that possibly throw the exception\n            //if nothing is wrong, return true\n            return true;\n        } catch (IllegalStateException e){\n            return e;\n        }\n    }\n }\n</code></pre>\n<p>then call it like this:</p>\n<pre><code>  Object actionResult = mActions.removeMember(m);\n  if(actionResult.equals(true)){\n\n  }else{\n\n  }\n</code></pre>\n<p>it looks a bit weird and wondering if there is a better way to doing something like this. MemberAction methods return exception or a primitive value (some could be numbers or string) hence my equals(true) approach wont work always.</p>\n<p>What would be a good way to create a function that can return a primitive data or an exception and then check what the response was in a good way?</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":9930295,"reputation":11658,"user_id":11082165,"display_name":"Brian61354270"},"score":4,"creation_date":1691601493,"post_id":76869948,"comment_id":135514918,"body_markdown":"Could you clarify which part of the articles explanation you don&#39;t understand? It seems to sum it up concisely: _&quot;the Clutch object itself, which is an inner class, contains a reference to its enclosing instance, which is the Car object. Because of that reference, the Car object is still reachable after line 12&quot;_","body":"Could you clarify which part of the articles explanation you don&#39;t understand? It seems to sum it up concisely: <i>&quot;the Clutch object itself, which is an inner class, contains a reference to its enclosing instance, which is the Car object. Because of that reference, the Car object is still reachable after line 12&quot;</i>"},{"owner":{"account_id":9930295,"reputation":11658,"user_id":11082165,"display_name":"Brian61354270"},"score":2,"creation_date":1691601613,"post_id":76869948,"comment_id":135514938,"body_markdown":"Also, please note that questions on Stack Overflow _must be self contained_. It&#39;s OK to link that article as a reference, but your question must be understandable and answerable without accessing it. Please [edit] your question to include all of the essential parts, and/or reduce it to a [mre] of the part that you&#39;re asking about","body":"Also, please note that questions on Stack Overflow <i>must be self contained</i>. It&#39;s OK to link that article as a reference, but your question must be understandable and answerable without accessing it. Please <a href=\"https://stackoverflow.com/posts/76869948/edit\">edit</a> your question to include all of the essential parts, and/or reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the part that you&#39;re asking about"},{"owner":{"account_id":4924944,"reputation":378,"user_id":3966432,"accept_rate":80,"display_name":"user3966432"},"score":0,"creation_date":1691602234,"post_id":76869948,"comment_id":135515043,"body_markdown":"Thanks @Brian61354270. As suggested updated the question.","body":"Thanks @Brian61354270. As suggested updated the question."},{"owner":{"account_id":9930295,"reputation":11658,"user_id":11082165,"display_name":"Brian61354270"},"score":1,"creation_date":1691602530,"post_id":76869948,"comment_id":135515098,"body_markdown":"Could you clarify what you think the contents of `rl` is at lines 10, 11, and 12? I think you may be either missing the fact that line 11 shifted the elements in the list, or are thinking that index 1 means the first element when it really means the second. Lines 11 and 12 together removes the elements that were at indices 0 and 2 as of line 10.","body":"Could you clarify what you think the contents of <code>rl</code> is at lines 10, 11, and 12? I think you may be either missing the fact that line 11 shifted the elements in the list, or are thinking that index 1 means the first element when it really means the second. Lines 11 and 12 together removes the elements that were at indices 0 and 2 as of line 10."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1691602679,"post_id":76869948,"comment_id":135515124,"body_markdown":"after line 11, the clutch is at index 0; index 1 holds `null` that was added as index 2, but line 11 removed the first element (`remove(0)`), so now `null` is at index 1","body":"after line 11, the clutch is at index 0; index 1 holds <code>null</code> that was added as index 2, but line 11 removed the first element (<code>remove(0)</code>), so now <code>null</code> is at index 1"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1691603368,"post_id":76869948,"comment_id":135515247,"body_markdown":"Before line 11: `[car, clutch, null]`, after line 11: `[clutch, null]`, `remove(1)` removes the `null` and the final list is `[clutch]`.","body":"Before line 11: <code>[car, clutch, null]</code>, after line 11: <code>[clutch, null]</code>, <code>remove(1)</code> removes the <code>null</code> and the final list is <code>[clutch]</code>."},{"owner":{"account_id":4924944,"reputation":378,"user_id":3966432,"accept_rate":80,"display_name":"user3966432"},"score":0,"creation_date":1691603635,"post_id":76869948,"comment_id":135515293,"body_markdown":"You are right Brian61354270,  \nuser16320675, and kayaman I was missing the point that line no. 11 would shift all upper indexes","body":"You are right Brian61354270,   user16320675, and kayaman I was missing the point that line no. 11 would shift all upper indexes"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1691606989,"post_id":76869948,"comment_id":135515860,"body_markdown":"And for the future: Even after your edit, your code doesn&#39;t compile and is missing vital information to answer the question (the fact that Clutch is a non-static inner class). Again, please read [mre].","body":"And for the future: Even after your edit, your code doesn&#39;t compile and is missing vital information to answer the question (the fact that Clutch is a non-static inner class). Again, please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1692619514,"post_id":76870211,"comment_id":135643735,"body_markdown":"Note that starting with JDK&#160;18 the `Clutch` object [will not keep a reference to its outer (`Car`) object anymore](https://bugs.openjdk.org/browse/JDK-8271717). This demonstrates (again) that quiz questions around non-observable behavior are bad. Mandatory read: [Can java finalize an object when it is still in scope?](https://stackoverflow.com/q/24376768/2711488)","body":"Note that starting with JDK 18 the <code>Clutch</code> object <a href=\"https://bugs.openjdk.org/browse/JDK-8271717\" rel=\"nofollow noreferrer\">will not keep a reference to its outer (<code>Car</code>) object anymore</a>. This demonstrates (again) that quiz questions around non-observable behavior are bad. Mandatory read: <a href=\"https://stackoverflow.com/q/24376768/2711488\">Can java finalize an object when it is still in scope?</a>"}],"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691603791,"creation_date":1691603791,"answer_id":76870211,"question_id":76869948,"body_markdown":"You have missed that the first call to `remove` shifts the indexes of the other elements.  `remove(1)` on line 12 removes the `null`; `clutch` is still in the array, and `clutch` contains a reference to the `Car` because it is nonstatic.","title":"Is this Java Magazine Quiz answer is correct on Java Garbage Collector","body":"<p>You have missed that the first call to <code>remove</code> shifts the indexes of the other elements.  <code>remove(1)</code> on line 12 removes the <code>null</code>; <code>clutch</code> is still in the array, and <code>clutch</code> contains a reference to the <code>Car</code> because it is nonstatic.</p>\n"}],"owner":{"account_id":4924944,"reputation":378,"user_id":3966432,"accept_rate":80,"display_name":"user3966432"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76870211,"answer_count":1,"score":0,"last_activity_date":1691603791,"creation_date":1691601099,"question_id":76869948,"body_markdown":"As per my understanding of the below code snippet, the Car object will become eligible for GC after line no. 12. But the given solution says it will not. Can anyone check the below link and correct me if I am wrong?\r\n\r\n    01: var rl = new ArrayList&lt;Repairable&gt;();\r\n    02: var car = new Car();\r\n    03: var clutch = car.getClutch();\r\n    04: var engine = (Repairable) null;\r\n    05: rl.add(car);\r\n    06: rl.add(clutch);\r\n    07: car = null;\r\n    08: clutch = null;\r\n    09: rl.add(engine);\r\n    10: rl.set(2, engine);\r\n    11: rl.remove(0);\r\n    12: rl.remove(1);\r\n\r\n\r\nhttps://blogs.oracle.com/javamagazine/post/java-quiz-object-reachability\r\n\r\nUpdate: The article says &quot;Car object will not become eligible for GC even after line 12.&quot;\r\n\r\nI am not agreeing especially on this line. At index 1, the value is not null it actually holds the clutch object\r\n\r\n&gt; Line 12 removes the item at index 1, which is the null. The list, therefore, contains nothing except the clutch.\r\n\r\n","title":"Is this Java Magazine Quiz answer is correct on Java Garbage Collector","body":"<p>As per my understanding of the below code snippet, the Car object will become eligible for GC after line no. 12. But the given solution says it will not. Can anyone check the below link and correct me if I am wrong?</p>\n<pre><code>01: var rl = new ArrayList&lt;Repairable&gt;();\n02: var car = new Car();\n03: var clutch = car.getClutch();\n04: var engine = (Repairable) null;\n05: rl.add(car);\n06: rl.add(clutch);\n07: car = null;\n08: clutch = null;\n09: rl.add(engine);\n10: rl.set(2, engine);\n11: rl.remove(0);\n12: rl.remove(1);\n</code></pre>\n<p><a href=\"https://blogs.oracle.com/javamagazine/post/java-quiz-object-reachability\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/javamagazine/post/java-quiz-object-reachability</a></p>\n<p>Update: The article says &quot;Car object will not become eligible for GC even after line 12.&quot;</p>\n<p>I am not agreeing especially on this line. At index 1, the value is not null it actually holds the clutch object</p>\n<blockquote>\n<p>Line 12 removes the item at index 1, which is the null. The list, therefore, contains nothing except the clutch.</p>\n</blockquote>\n"},{"tags":["java","ant","maven"],"comments":[{"owner":{"account_id":102129,"reputation":7632,"user_id":274344,"accept_rate":82,"display_name":"Simeon"},"score":0,"creation_date":1317202971,"post_id":7581156,"comment_id":9193677,"body_markdown":"Can&#39;t you just compile the sources you need from ant ?","body":"Can&#39;t you just compile the sources you need from ant ?"}],"answers":[{"tags":[],"owner":{"account_id":102129,"reputation":7632,"user_id":274344,"accept_rate":82,"display_name":"Simeon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1317202813,"creation_date":1317202813,"answer_id":7581209,"question_id":7581156,"body_markdown":"You can use the [exec task][1] and call `mvn compile` as a terminal command. This is not ideal since you won&#39;t have any control over the execution, but otherwise I don&#39;t think there is a way to execute a Maven goal.\r\n\r\n\r\n  [1]: http://ant.apache.org/manual/Tasks/exec.html","title":"How to call for a Maven goal within an Ant script?","body":"<p>You can use the <a href=\"http://ant.apache.org/manual/Tasks/exec.html\" rel=\"nofollow\">exec task</a> and call <code>mvn compile</code> as a terminal command. This is not ideal since you won't have any control over the execution, but otherwise I don't think there is a way to execute a Maven goal.</p>\n"},{"comments":[{"owner":{"account_id":4265322,"reputation":553,"user_id":3488579,"accept_rate":57,"display_name":"pankaj"},"score":0,"creation_date":1467371813,"post_id":7581329,"comment_id":63717639,"body_markdown":"My requirement is I have old project which is build on ant and I have new project which is build on maven. I want build maven project from ant using build.xml. I used this and build my project but it did not work for me. My old project build successfully but new project did not.","body":"My requirement is I have old project which is build on ant and I have new project which is build on maven. I want build maven project from ant using build.xml. I used this and build my project but it did not work for me. My old project build successfully but new project did not."}],"tags":[],"owner":{"account_id":138637,"reputation":3042,"user_id":343699,"accept_rate":100,"display_name":"mateusz.fiolka"},"comment_count":1,"down_vote_count":1,"up_vote_count":23,"is_accepted":true,"score":22,"last_activity_date":1430762662,"creation_date":1317203439,"answer_id":7581329,"question_id":7581156,"body_markdown":"An example of use of exec task utilizing Maven run from the Windows CLI would be:\r\n\r\n    &lt;target name=&quot;buildProject&quot; description=&quot;Builds the individual project&quot;&gt;\r\n        &lt;exec dir=&quot;${source.dir}\\${projectName}&quot; executable=&quot;cmd&quot;&gt;\r\n            &lt;arg value=&quot;/C&quot;/&gt;\r\n            &lt;arg value=&quot;${env.MAVEN_HOME}\\bin\\mvn.bat&quot;/&gt;\r\n            &lt;arg line=&quot;clean install&quot; /&gt;\r\n    &lt;/exec&gt;\r\n    &lt;/target&gt;\r\n\r\n","title":"How to call for a Maven goal within an Ant script?","body":"<p>An example of use of exec task utilizing Maven run from the Windows CLI would be:</p>\n\n<pre><code>&lt;target name=\"buildProject\" description=\"Builds the individual project\"&gt;\n    &lt;exec dir=\"${source.dir}\\${projectName}\" executable=\"cmd\"&gt;\n        &lt;arg value=\"/C\"/&gt;\n        &lt;arg value=\"${env.MAVEN_HOME}\\bin\\mvn.bat\"/&gt;\n        &lt;arg line=\"clean install\" /&gt;\n&lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":490392,"reputation":6191,"user_id":453389,"accept_rate":89,"display_name":"shonky linux user"},"score":3,"creation_date":1476064318,"post_id":7581897,"comment_id":67180924,"body_markdown":"Maven Ant Tasks are now retired","body":"Maven Ant Tasks are now retired"}],"tags":[],"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1476332650,"creation_date":1317206161,"answer_id":7581897,"question_id":7581156,"body_markdown":"You can also look at [maven ant tasks][1] which is now retired though as commented below.  This allows you to run specific maven goals from within your ant build script.  You can look at [this SO question][2] as well.\r\n\r\n  [1]: http://maven.apache.org/ant-tasks/index.html\r\n  [2]: https://stackoverflow.com/questions/7552895/can-we-use-pom-xml-into-ant/","title":"How to call for a Maven goal within an Ant script?","body":"<p>You can also look at <a href=\"http://maven.apache.org/ant-tasks/index.html\" rel=\"nofollow noreferrer\">maven ant tasks</a> which is now retired though as commented below.  This allows you to run specific maven goals from within your ant build script.  You can look at <a href=\"https://stackoverflow.com/questions/7552895/can-we-use-pom-xml-into-ant/\">this SO question</a> as well.</p>\n"},{"tags":[],"owner":{"account_id":305963,"reputation":480,"user_id":616413,"display_name":"tbrugz"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1381515828,"creation_date":1381515828,"answer_id":19324835,"question_id":7581156,"body_markdown":"You may use a `java` task (this example is similar to @mateusz.fiolka answer but also works on Linux)\r\n\r\n\t&lt;target name=&quot;mvn-install&quot;&gt;\r\n\t\t&lt;property environment=&quot;env&quot; /&gt;\r\n\t\t&lt;path id=&quot;classpath&quot;&gt;\r\n\t\t\t&lt;fileset dir=&quot;${env.M2_HOME}/boot&quot;&gt;\r\n\t\t\t\t&lt;include name=&quot;plexus-classworlds-*.jar&quot; /&gt;\r\n\t\t\t&lt;/fileset&gt;\r\n\t\t&lt;/path&gt;\r\n\t\t&lt;property name=&quot;mvn.mainclass&quot; value=&quot;org.codehaus.plexus.classworlds.launcher.Launcher&quot; /&gt;\r\n\t\t\r\n\t\t&lt;java classname=&quot;${mvn.mainclass}&quot; classpathref=&quot;classpath&quot; fork=&quot;true&quot; failonerror=&quot;true&quot;&gt;\r\n\t\t\t&lt;jvmarg value=&quot;-Dclassworlds.conf=${env.M2_HOME}/bin/m2.conf&quot; /&gt;\r\n\t\t\t&lt;jvmarg value=&quot;-Dmaven.home=${env.M2_HOME}&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;install&quot; /&gt;\r\n\t\t&lt;/java&gt;\r\n\t&lt;/target&gt;\r\n\r\ntested with maven 3.0.5","title":"How to call for a Maven goal within an Ant script?","body":"<p>You may use a <code>java</code> task (this example is similar to @mateusz.fiolka answer but also works on Linux)</p>\n\n<pre><code>&lt;target name=\"mvn-install\"&gt;\n    &lt;property environment=\"env\" /&gt;\n    &lt;path id=\"classpath\"&gt;\n        &lt;fileset dir=\"${env.M2_HOME}/boot\"&gt;\n            &lt;include name=\"plexus-classworlds-*.jar\" /&gt;\n        &lt;/fileset&gt;\n    &lt;/path&gt;\n    &lt;property name=\"mvn.mainclass\" value=\"org.codehaus.plexus.classworlds.launcher.Launcher\" /&gt;\n\n    &lt;java classname=\"${mvn.mainclass}\" classpathref=\"classpath\" fork=\"true\" failonerror=\"true\"&gt;\n        &lt;jvmarg value=\"-Dclassworlds.conf=${env.M2_HOME}/bin/m2.conf\" /&gt;\n        &lt;jvmarg value=\"-Dmaven.home=${env.M2_HOME}\" /&gt;\n        &lt;arg value=\"install\" /&gt;\n    &lt;/java&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>tested with maven 3.0.5</p>\n"},{"comments":[{"owner":{"account_id":4265322,"reputation":553,"user_id":3488579,"accept_rate":57,"display_name":"pankaj"},"score":0,"creation_date":1467622470,"post_id":23060549,"comment_id":63787570,"body_markdown":"I copy  &lt;target name=&quot;mvn&quot;&gt;\n      &lt;exec dir=&quot;.&quot; executable=&quot;cmd&quot;&gt;\n        &lt;arg line=&quot;/c mvn clean install&quot; /&gt;\n     &lt;/exec&gt;  this in my build.xml and run ant all through cmd but pom.xml did not build. can you please tell what is wrong ?\n&lt;/target&gt;","body":"I copy  &lt;target name=&quot;mvn&quot;&gt;       &lt;exec dir=&quot;.&quot; executable=&quot;cmd&quot;&gt;         &lt;arg line=&quot;/c mvn clean install&quot; /&gt;      &lt;/exec&gt;  this in my build.xml and run ant all through cmd but pom.xml did not build. can you please tell what is wrong ? &lt;/target&gt;"},{"owner":{"account_id":2719313,"reputation":15631,"user_id":2345933,"accept_rate":84,"display_name":"Adam Siemion"},"score":0,"creation_date":1467657221,"post_id":23060549,"comment_id":63806521,"body_markdown":"@pankaj submit a new question for your problem","body":"@pankaj submit a new question for your problem"},{"owner":{"account_id":3825345,"reputation":456,"user_id":3172286,"accept_rate":50,"display_name":"Payne"},"score":0,"creation_date":1500107939,"post_id":23060549,"comment_id":77203585,"body_markdown":"@pankaj Did you add mvn target as depends or default target? New topic would be nice","body":"@pankaj Did you add mvn target as depends or default target? New topic would be nice"}],"tags":[],"owner":{"account_id":2719313,"reputation":15631,"user_id":2345933,"accept_rate":84,"display_name":"Adam Siemion"},"comment_count":3,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1421679324,"creation_date":1397479790,"answer_id":23060549,"question_id":7581156,"body_markdown":"Since none of the solutions worked for me, this is what I came up with:\r\n\r\nAssuming you are running on Windows:\r\n\r\n\t&lt;target name=&quot;mvn&quot;&gt;\r\n\t\t&lt;exec dir=&quot;.&quot; executable=&quot;cmd&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;/c mvn clean install&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;\r\n\r\nor on UNIX:\r\n\r\n\t&lt;target name=&quot;mvn&quot;&gt;\r\n\t\t&lt;exec dir=&quot;.&quot; executable=&quot;sh&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;-c &#39;mvn clean install&#39;&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;\r\n\r\nor if you want it to work on both UNIX and Windows:\r\n\r\n\t&lt;condition property=&quot;isWindows&quot;&gt;\r\n\t\t&lt;os family=&quot;windows&quot; /&gt;\r\n\t&lt;/condition&gt;\r\n\r\n\t&lt;condition property=&quot;isUnix&quot;&gt;\r\n\t\t&lt;os family=&quot;unix&quot; /&gt;\r\n\t&lt;/condition&gt;\r\n\r\n\t&lt;target name=&quot;all&quot; depends=&quot;mvn_windows, mvn_unix&quot;/&gt;\r\n\r\n\t&lt;target name=&quot;mvn_windows&quot; if=&quot;isWindows&quot;&gt;\r\n\t\t&lt;exec dir=&quot;.&quot; executable=&quot;cmd&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;/c mvn clean install&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;target name=&quot;mvn_unix&quot; if=&quot;isUnix&quot;&gt;\r\n\t\t&lt;exec dir=&quot;.&quot; executable=&quot;sh&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;-c &#39;mvn clean install&#39;&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;","title":"How to call for a Maven goal within an Ant script?","body":"<p>Since none of the solutions worked for me, this is what I came up with:</p>\n\n<p>Assuming you are running on Windows:</p>\n\n<pre><code>&lt;target name=\"mvn\"&gt;\n    &lt;exec dir=\".\" executable=\"cmd\"&gt;\n        &lt;arg line=\"/c mvn clean install\" /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>or on UNIX:</p>\n\n<pre><code>&lt;target name=\"mvn\"&gt;\n    &lt;exec dir=\".\" executable=\"sh\"&gt;\n        &lt;arg line=\"-c 'mvn clean install'\" /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>or if you want it to work on both UNIX and Windows:</p>\n\n<pre><code>&lt;condition property=\"isWindows\"&gt;\n    &lt;os family=\"windows\" /&gt;\n&lt;/condition&gt;\n\n&lt;condition property=\"isUnix\"&gt;\n    &lt;os family=\"unix\" /&gt;\n&lt;/condition&gt;\n\n&lt;target name=\"all\" depends=\"mvn_windows, mvn_unix\"/&gt;\n\n&lt;target name=\"mvn_windows\" if=\"isWindows\"&gt;\n    &lt;exec dir=\".\" executable=\"cmd\"&gt;\n        &lt;arg line=\"/c mvn clean install\" /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n\n&lt;target name=\"mvn_unix\" if=\"isUnix\"&gt;\n    &lt;exec dir=\".\" executable=\"sh\"&gt;\n        &lt;arg line=\"-c 'mvn clean install'\" /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":469001,"reputation":7729,"user_id":875305,"accept_rate":67,"display_name":"11101101b"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1450385977,"creation_date":1450385977,"answer_id":34344132,"question_id":7581156,"body_markdown":"I used [this answer][1] from [@Adam Siemion][2] above, but I didn&#39;t want separate targets for running on Windows or Linux. Instead I just set the property near the top of my ant script:\r\n\r\n\t&lt;condition property=&quot;isAntRunningOnWindows&quot;&gt;\r\n\t    &lt;os family=&quot;windows&quot; /&gt;\r\n\t&lt;/condition&gt;\r\n\r\nThen in the middle of my script I use an if-then-else statement:\r\n\r\n\t&lt;if&gt;\r\n\t\t&lt;equals arg1=&quot;${isAntRunningOnWindows}&quot; arg2=&quot;true&quot; /&gt;\r\n\t\t&lt;then&gt;\r\n\t\t\t&lt;echo message=&quot;OS is Windows&quot; /&gt;\r\n\t\t\t&lt;exec dir=&quot;.&quot; executable=&quot;cmd&quot;&gt;\r\n\t\t\t\t&lt;arg line=&quot;/c mvn clean package&quot; /&gt;\r\n\t\t\t&lt;/exec&gt;\r\n\t\t&lt;/then&gt;\r\n\t\t&lt;else&gt;\r\n\t\t\t&lt;echo message=&quot;OS is Linux/Unix&quot; /&gt;\r\n\t\t\t&lt;exec dir=&quot;.&quot; executable=&quot;sh&quot;&gt;\r\n\t\t\t\t&lt;arg line=&quot;-c &#39;mvn clean package&#39;&quot; /&gt;\r\n\t\t\t&lt;/exec&gt;\r\n\t\t&lt;/else&gt;\r\n\t&lt;/if&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/23060549/875305\r\n  [2]: https://stackoverflow.com/users/2345933/adam-siemion","title":"How to call for a Maven goal within an Ant script?","body":"<p>I used <a href=\"https://stackoverflow.com/a/23060549/875305\">this answer</a> from <a href=\"https://stackoverflow.com/users/2345933/adam-siemion\">@Adam Siemion</a> above, but I didn't want separate targets for running on Windows or Linux. Instead I just set the property near the top of my ant script:</p>\n\n<pre><code>&lt;condition property=\"isAntRunningOnWindows\"&gt;\n    &lt;os family=\"windows\" /&gt;\n&lt;/condition&gt;\n</code></pre>\n\n<p>Then in the middle of my script I use an if-then-else statement:</p>\n\n<pre><code>&lt;if&gt;\n    &lt;equals arg1=\"${isAntRunningOnWindows}\" arg2=\"true\" /&gt;\n    &lt;then&gt;\n        &lt;echo message=\"OS is Windows\" /&gt;\n        &lt;exec dir=\".\" executable=\"cmd\"&gt;\n            &lt;arg line=\"/c mvn clean package\" /&gt;\n        &lt;/exec&gt;\n    &lt;/then&gt;\n    &lt;else&gt;\n        &lt;echo message=\"OS is Linux/Unix\" /&gt;\n        &lt;exec dir=\".\" executable=\"sh\"&gt;\n            &lt;arg line=\"-c 'mvn clean package'\" /&gt;\n        &lt;/exec&gt;\n    &lt;/else&gt;\n&lt;/if&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2003177,"reputation":16895,"user_id":1793718,"accept_rate":69,"display_name":"Lucky"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1453204938,"creation_date":1453194245,"answer_id":34872525,"question_id":7581156,"body_markdown":"I am using the following target to run maven `clean`, `install` and `clean install` goals. Works fine.\r\n\r\n    &lt;project name=&quot;Maven run goals&quot; basedir=&quot;.&quot;  \r\n             xmlns:artifact=&quot;antlib:org.apache.maven.artifact.ant&quot;\r\n             xmlns:rsel=&quot;antlib:org.apache.tools.ant.types.resources.selectors&quot;&gt;\r\n\r\n\t\t&lt;target name=&quot;maven clean&quot;&gt;\r\n\t\t\t&lt;artifact:mvn mavenHome=&quot;${maven.home}&quot; fork=&quot;true&quot;&gt;\r\n\t\t\t\t&lt;arg value=&quot;clean&quot; /&gt;\r\n\t\t\t&lt;/artifact:mvn&gt;\r\n\t\t&lt;/target&gt;\r\n\t\t\t\t\r\n\t\t&lt;target name=&quot;maven install&quot;&gt;\r\n\t\t\t&lt;artifact:mvn mavenHome=&quot;${maven.home}&quot; fork=&quot;true&quot;&gt;\r\n\t\t\t\t&lt;arg value=&quot;install&quot; /&gt;\r\n\t\t\t&lt;/artifact:mvn&gt;\r\n\t\t&lt;/target&gt;\r\n\t\t\t\t\r\n\t\t&lt;target name=&quot;maven clean-install&quot;&gt;\r\n\t\t\t&lt;artifact:mvn mavenHome=&quot;${maven.home}&quot; fork=&quot;true&quot;&gt;\r\n\t\t\t\t&lt;arg value=&quot;clean&quot; /&gt;\r\n                &lt;arg value=&quot;install&quot; /&gt;\r\n\t\t\t&lt;/artifact:mvn&gt;\r\n\t\t&lt;/target&gt;\r\n\r\n\t&lt;/project&gt;\r\n\r\nYour maven.home property should point to the maven home directory. For example,\r\n\r\n    &lt;property name=&quot;maven.home&quot; value=&quot;D:\\\\Downloads\\\\apache-maven-3.0.5&quot;/&gt;","title":"How to call for a Maven goal within an Ant script?","body":"<p>I am using the following target to run maven <code>clean</code>, <code>install</code> and <code>clean install</code> goals. Works fine.</p>\n\n<pre><code>&lt;project name=\"Maven run goals\" basedir=\".\"  \n         xmlns:artifact=\"antlib:org.apache.maven.artifact.ant\"\n         xmlns:rsel=\"antlib:org.apache.tools.ant.types.resources.selectors\"&gt;\n\n    &lt;target name=\"maven clean\"&gt;\n        &lt;artifact:mvn mavenHome=\"${maven.home}\" fork=\"true\"&gt;\n            &lt;arg value=\"clean\" /&gt;\n        &lt;/artifact:mvn&gt;\n    &lt;/target&gt;\n\n    &lt;target name=\"maven install\"&gt;\n        &lt;artifact:mvn mavenHome=\"${maven.home}\" fork=\"true\"&gt;\n            &lt;arg value=\"install\" /&gt;\n        &lt;/artifact:mvn&gt;\n    &lt;/target&gt;\n\n    &lt;target name=\"maven clean-install\"&gt;\n        &lt;artifact:mvn mavenHome=\"${maven.home}\" fork=\"true\"&gt;\n            &lt;arg value=\"clean\" /&gt;\n            &lt;arg value=\"install\" /&gt;\n        &lt;/artifact:mvn&gt;\n    &lt;/target&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>Your maven.home property should point to the maven home directory. For example,</p>\n\n<pre><code>&lt;property name=\"maven.home\" value=\"D:\\\\Downloads\\\\apache-maven-3.0.5\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":477607,"reputation":7148,"user_id":889213,"accept_rate":72,"display_name":"thiagoh"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1479150409,"creation_date":1479150409,"answer_id":40596016,"question_id":7581156,"body_markdown":"Here there is a complete solution:\r\n\r\n\t&lt;target name=&quot;mvn_windows_setup&quot; if=&quot;isWindows&quot;&gt;\r\n\t\t&lt;property name=&quot;mvn.executable&quot; value=&quot;cmd&quot; /&gt;\r\n\t\t&lt;property name=&quot;mvn.args&quot; value=&quot;/c&quot; /&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;target name=&quot;mvn_unix_setup&quot; if=&quot;isUnix&quot;&gt;\r\n\t\t&lt;property name=&quot;mvn.executable&quot; value=&quot;sh&quot; /&gt;\r\n\t\t&lt;property name=&quot;mvn.args&quot; value=&quot;-c&quot; /&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;target name=&quot;run-mvn-goals&quot; depends=&quot;mvn_windows_setup, mvn_unix_setup&quot;&gt;\r\n\r\n\t\t&lt;exec dir=&quot;${basedir}&quot; executable=&quot;${mvn.executable}&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;${mvn.args} &#39;mvn ${p_goals}&#39;&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;!-- EXAMPLES OF HOW TO USE --&gt;\r\n\r\n\t&lt;!-- let&#39;s say you want to run mvn clean install --&gt;\r\n\t&lt;target name=&quot;mvn-clean-install&quot;&gt;\r\n\r\n\t\t&lt;antcall target=&quot;run-mvn-goals&quot;&gt;\r\n\t\t\t&lt;param name=&quot;p_goals&quot; value=&quot;clean install&quot;/&gt;\r\n\t\t&lt;/antcall&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;!-- or maybe you want to clean, package but skipping tests --&gt;\r\n\t&lt;target name=&quot;mvn-clean-package-notests&quot;&gt;\r\n\r\n\t\t&lt;antcall target=&quot;run-mvn-goals&quot;&gt;\r\n\t\t\t&lt;param name=&quot;p_goals&quot; value=&quot;clean package -DskipTests&quot;/&gt;\r\n\t\t&lt;/antcall&gt;\r\n\t&lt;/target&gt;\r\n\r\n\r\nThe output is something like this...\r\n\r\n\r\n\tBuildfile: /home/.../build.xml\r\n\tdeploy-complete:\r\n\tdeploy-complete:\r\n\tmvn_windows_setup:\r\n\tmvn_unix_setup:\r\n\trun-mvn-goals:\r\n\t     [exec] [INFO] Scanning for projects...\r\n\t     [exec] [INFO]                                                                         \r\n\t     [exec] [INFO] ------------------------------------------------------------------------\r\n\t     [exec] [INFO] Building wpm 0.0.1-SNAPSHOT\r\n\t     [exec] [INFO] ------------------------------------------------------------------------\r\n\t     [exec] [INFO] \r\n\t     [exec] [INFO] --- maven-clean-plugin:2.6.1:clean (default-clean) @ wpm ---\r\n\t     ...\r\n\t     ...\r\n\t     ...\r\n\t\t   [exec] [INFO] BUILD SUCCESS\r\n\t     [exec] [INFO] ------------------------------------------------------------------------\r\n\t     [exec] [INFO] Total time: 28.817 s\r\n\t     [exec] [INFO] Finished at: 2016-11-14T14:01:34-05:00\r\n\t     [exec] [INFO] Final Memory: 84M/872M\r\n\t     [exec] [INFO] ------------------------------------------------------------------------\r\n\tBUILD SUCCESSFUL\r\n\tTotal time: 31 seconds","title":"How to call for a Maven goal within an Ant script?","body":"<p>Here there is a complete solution:</p>\n\n<pre><code>&lt;target name=\"mvn_windows_setup\" if=\"isWindows\"&gt;\n    &lt;property name=\"mvn.executable\" value=\"cmd\" /&gt;\n    &lt;property name=\"mvn.args\" value=\"/c\" /&gt;\n&lt;/target&gt;\n\n&lt;target name=\"mvn_unix_setup\" if=\"isUnix\"&gt;\n    &lt;property name=\"mvn.executable\" value=\"sh\" /&gt;\n    &lt;property name=\"mvn.args\" value=\"-c\" /&gt;\n&lt;/target&gt;\n\n&lt;target name=\"run-mvn-goals\" depends=\"mvn_windows_setup, mvn_unix_setup\"&gt;\n\n    &lt;exec dir=\"${basedir}\" executable=\"${mvn.executable}\"&gt;\n        &lt;arg line=\"${mvn.args} 'mvn ${p_goals}'\" /&gt;\n    &lt;/exec&gt;\n\n&lt;/target&gt;\n\n&lt;!-- EXAMPLES OF HOW TO USE --&gt;\n\n&lt;!-- let's say you want to run mvn clean install --&gt;\n&lt;target name=\"mvn-clean-install\"&gt;\n\n    &lt;antcall target=\"run-mvn-goals\"&gt;\n        &lt;param name=\"p_goals\" value=\"clean install\"/&gt;\n    &lt;/antcall&gt;\n&lt;/target&gt;\n\n&lt;!-- or maybe you want to clean, package but skipping tests --&gt;\n&lt;target name=\"mvn-clean-package-notests\"&gt;\n\n    &lt;antcall target=\"run-mvn-goals\"&gt;\n        &lt;param name=\"p_goals\" value=\"clean package -DskipTests\"/&gt;\n    &lt;/antcall&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>The output is something like this...</p>\n\n<pre><code>Buildfile: /home/.../build.xml\ndeploy-complete:\ndeploy-complete:\nmvn_windows_setup:\nmvn_unix_setup:\nrun-mvn-goals:\n     [exec] [INFO] Scanning for projects...\n     [exec] [INFO]                                                                         \n     [exec] [INFO] ------------------------------------------------------------------------\n     [exec] [INFO] Building wpm 0.0.1-SNAPSHOT\n     [exec] [INFO] ------------------------------------------------------------------------\n     [exec] [INFO] \n     [exec] [INFO] --- maven-clean-plugin:2.6.1:clean (default-clean) @ wpm ---\n     ...\n     ...\n     ...\n       [exec] [INFO] BUILD SUCCESS\n     [exec] [INFO] ------------------------------------------------------------------------\n     [exec] [INFO] Total time: 28.817 s\n     [exec] [INFO] Finished at: 2016-11-14T14:01:34-05:00\n     [exec] [INFO] Final Memory: 84M/872M\n     [exec] [INFO] ------------------------------------------------------------------------\nBUILD SUCCESSFUL\nTotal time: 31 seconds\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1052025,"reputation":5610,"user_id":1055715,"accept_rate":83,"display_name":"Surasin Tancharoen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491124087,"creation_date":1491124087,"answer_id":43166593,"question_id":7581156,"body_markdown":"From Thiagoh answer, I have to add this to make it work.\r\n\r\n     &lt;condition property=&quot;isWindows&quot;&gt;\r\n                        &lt;os family=&quot;windows&quot; /&gt;\r\n     &lt;/condition&gt;\r\n    \r\n     &lt;condition property=&quot;isLinux&quot;&gt;\r\n                        &lt;os family=&quot;unix&quot; /&gt;\r\n     &lt;/condition&gt;\r\n    \r\n    &lt;target name=&quot;mvn_windows_setup&quot; if=&quot;isWindows&quot;&gt;\r\n        &lt;property name=&quot;mvn.executable&quot; value=&quot;cmd&quot; /&gt;\r\n        &lt;property name=&quot;mvn.args&quot; value=&quot;/c&quot; /&gt;\r\n    &lt;/target&gt;\r\n    \r\n    &lt;target name=&quot;mvn_unix_setup&quot; if=&quot;isLinux&quot;&gt;\r\n        &lt;property name=&quot;mvn.executable&quot; value=&quot;sh&quot; /&gt;\r\n        &lt;property name=&quot;mvn.args&quot; value=&quot;-c&quot; /&gt;\r\n    &lt;/target&gt;\r\n    \r\n    &lt;target name=&quot;run-mvn-goals&quot; depends=&quot;mvn_windows_setup, mvn_unix_setup&quot;&gt;\r\n    \r\n        &lt;exec dir=&quot;${basedir}&quot; executable=&quot;${mvn.executable}&quot;&gt;\r\n            &lt;arg line=&quot;${mvn.args} &#39;mvn ${p_goals}&#39;&quot; /&gt;\r\n        &lt;/exec&gt;\r\n    \r\n    &lt;/target&gt;\r\n\r\n","title":"How to call for a Maven goal within an Ant script?","body":"<p>From Thiagoh answer, I have to add this to make it work.</p>\n\n<pre><code> &lt;condition property=\"isWindows\"&gt;\n                    &lt;os family=\"windows\" /&gt;\n &lt;/condition&gt;\n\n &lt;condition property=\"isLinux\"&gt;\n                    &lt;os family=\"unix\" /&gt;\n &lt;/condition&gt;\n\n&lt;target name=\"mvn_windows_setup\" if=\"isWindows\"&gt;\n    &lt;property name=\"mvn.executable\" value=\"cmd\" /&gt;\n    &lt;property name=\"mvn.args\" value=\"/c\" /&gt;\n&lt;/target&gt;\n\n&lt;target name=\"mvn_unix_setup\" if=\"isLinux\"&gt;\n    &lt;property name=\"mvn.executable\" value=\"sh\" /&gt;\n    &lt;property name=\"mvn.args\" value=\"-c\" /&gt;\n&lt;/target&gt;\n\n&lt;target name=\"run-mvn-goals\" depends=\"mvn_windows_setup, mvn_unix_setup\"&gt;\n\n    &lt;exec dir=\"${basedir}\" executable=\"${mvn.executable}\"&gt;\n        &lt;arg line=\"${mvn.args} 'mvn ${p_goals}'\" /&gt;\n    &lt;/exec&gt;\n\n&lt;/target&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":115990,"reputation":5884,"user_id":304330,"accept_rate":56,"display_name":"Big Rich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558434023,"creation_date":1558434023,"answer_id":56236147,"question_id":7581156,"body_markdown":"`plexus` seems to be an older solution for embedding Maven. \r\n\r\nTake a look at the [Apache&#39;s Maven Embedder](https://maven.apache.org/ref/current/maven-embedder/index.html) project. \r\n\r\n[This article paragraph](https://www.sourcetrail.com/blog/how_to_integrate_maven_into_your_own_java_tool#using-maven-embedder) outlines embedding Maven into Java code, _**without**_ a locally installed Maven executable.","title":"How to call for a Maven goal within an Ant script?","body":"<p><code>plexus</code> seems to be an older solution for embedding Maven. </p>\n\n<p>Take a look at the <a href=\"https://maven.apache.org/ref/current/maven-embedder/index.html\" rel=\"nofollow noreferrer\">Apache's Maven Embedder</a> project. </p>\n\n<p><a href=\"https://www.sourcetrail.com/blog/how_to_integrate_maven_into_your_own_java_tool#using-maven-embedder\" rel=\"nofollow noreferrer\">This article paragraph</a> outlines embedding Maven into Java code, <em><strong>without</strong></em> a locally installed Maven executable.</p>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560516289,"creation_date":1560516289,"answer_id":56598492,"question_id":7581156,"body_markdown":"### Maven Ant Tasks &lt;sup&gt;[github](https://github.com/apache/maven-ant-tasks)&lt;/sup&gt; easy to run maven with goals form Ant.\r\n\r\n[Installation](http://maven.apache.org/ant-tasks/installation.html)\r\nCreate a `lib` directory in the root of your project and place the **maven-ant-tasks.jar**&lt;sup&gt;[binaries](http://archive.apache.org/dist/maven/ant-tasks/2.1.3/binaries/), [sonatype](https://search.maven.org/artifact/org.apache.maven/maven-ant-tasks/2.1.3/jar)&lt;/sup&gt; file inside it.\r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project name=&quot;maven&quot; default=&quot;build&quot; xmlns:artifact=&quot;antlib:org.apache.maven.artifact.ant&quot;&gt;\r\n\t&lt;property environment=&quot;env&quot; /&gt;\r\n\t\r\n\t&lt;!-- &lt;get src=&quot;http://search.maven.org/remotecontent?filepath=org/apache/maven/maven-ant-tasks/2.1.3/maven-ant-tasks-2.1.3.jar&quot; dest=&quot;lib/maven-ant-tasks-2.1.3.jar&quot;/&gt; --&gt;\r\n\r\n\t&lt;path id=&quot;maven-ant-tasks.classpath&quot; path=&quot;lib/maven-ant-tasks-2.1.3.jar&quot; /&gt;\r\n\t&lt;typedef resource=&quot;org/apache/maven/artifact/ant/antlib.xml&quot; uri=&quot;antlib:org.apache.maven.artifact.ant&quot; classpathref=&quot;maven-ant-tasks.classpath&quot; /&gt;\r\n\t\r\n\t&lt;record name=&quot;build.log&quot; loglevel=&quot;verbose&quot; action=&quot;start&quot;/&gt;\r\n\t&lt;target name=&quot;build&quot; description=&quot;project build ant script&quot;&gt;\r\n\t\t&lt;fail unless=&quot;env.MAVEN_HOME&quot; message=&quot;Environment variable MAVEN_HOME was not found on your system!&quot; /&gt;\r\n\t\t&lt;artifact:mvn mavenHome=&quot;${env.MAVEN_HOME}&quot; fork=&quot;true&quot;&gt;\r\n\t\t\t&lt;arg value=&quot;clean&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;install&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;-Pqa&quot; /&gt;\r\n\t\t&lt;/artifact:mvn&gt;\r\n\t&lt;/target&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n---\r\n\r\nSmall information between these elements ant `typedef` vs `taskdef`.\r\n\r\n * **[`Typedef`](https://ant.apache.org/manual/Tasks/typedef.html)**: Using a `typedef` declaration allows you to store the Ant Tasks&#39; library anywhere you like (such as source control) and put it&#39;s location in the build file.\r\n\r\n    ```lang-xml\r\n    &lt;typedef name=&quot;urlset&quot; classname=&quot;com.mydomain.URLSet&quot;/&gt;\r\n    ```\r\n * **[`Taskdef`](https://ant.apache.org/manual/Tasks/taskdef.html)** Adds a task definition to the current project, such that this new task can be used in the current project.\r\n\r\n    Using [PropertyFiles.java](https://github.com/Yash-777/LearnJava/blob/master/src/org/apache/tools/ant/taskdefs/optional/PropertyFiles.java) task by adding it to taskdef externally.\r\n    ```lang-xml\r\n    &lt;taskdef name = &quot;propertyfiles&quot;\r\n          classname = &quot;org.apache.tools.ant.taskdefs.optional.PropertyFiles&quot; /&gt;\r\n    ```\r\n    All the `taskdef` are configured in `apache-ant-1.9.4\\lib\\ant.jar\\org\\apache\\tools\\ant\\taskdefs\\defaults.properties` properties files. But i have created an external class and placed inside jar file. But instead of adding  entry in `defaults.properties` file externally informing the task by `taskdef`.\r\n\r\n    Second way, You can create a jar file, list all the `tasksef` in one properties file and refer the resource\r\n    [**antcontrib**](http://ant-contrib.sourceforge.net/) You can place the JAR in your Ant lib directory, and set classpath.\r\n\r\n    ```lang-xml\r\n\t&lt;taskdef resource=&quot;net/sf/antcontrib/antcontrib.properties&quot;&gt;\r\n\t\t&lt;classpath&gt;\r\n\t\t\t&lt;pathelement location=&quot;${env.ANT_HOME}/lib/ant-contrib-0.6.jar&quot;/&gt;\r\n\t\t&lt;/classpath&gt;\r\n\t&lt;/taskdef&gt;\r\n    ```","title":"How to call for a Maven goal within an Ant script?","body":"<h3>Maven Ant Tasks <sup><a href=\"https://github.com/apache/maven-ant-tasks\" rel=\"nofollow noreferrer\">github</a></sup> easy to run maven with goals form Ant.</h3>\n\n<p><a href=\"http://maven.apache.org/ant-tasks/installation.html\" rel=\"nofollow noreferrer\">Installation</a>\nCreate a <code>lib</code> directory in the root of your project and place the <strong>maven-ant-tasks.jar</strong><sup><a href=\"http://archive.apache.org/dist/maven/ant-tasks/2.1.3/binaries/\" rel=\"nofollow noreferrer\">binaries</a>, <a href=\"https://search.maven.org/artifact/org.apache.maven/maven-ant-tasks/2.1.3/jar\" rel=\"nofollow noreferrer\">sonatype</a></sup> file inside it.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;project name=\"maven\" default=\"build\" xmlns:artifact=\"antlib:org.apache.maven.artifact.ant\"&gt;\n    &lt;property environment=\"env\" /&gt;\n\n    &lt;!-- &lt;get src=\"http://search.maven.org/remotecontent?filepath=org/apache/maven/maven-ant-tasks/2.1.3/maven-ant-tasks-2.1.3.jar\" dest=\"lib/maven-ant-tasks-2.1.3.jar\"/&gt; --&gt;\n\n    &lt;path id=\"maven-ant-tasks.classpath\" path=\"lib/maven-ant-tasks-2.1.3.jar\" /&gt;\n    &lt;typedef resource=\"org/apache/maven/artifact/ant/antlib.xml\" uri=\"antlib:org.apache.maven.artifact.ant\" classpathref=\"maven-ant-tasks.classpath\" /&gt;\n\n    &lt;record name=\"build.log\" loglevel=\"verbose\" action=\"start\"/&gt;\n    &lt;target name=\"build\" description=\"project build ant script\"&gt;\n        &lt;fail unless=\"env.MAVEN_HOME\" message=\"Environment variable MAVEN_HOME was not found on your system!\" /&gt;\n        &lt;artifact:mvn mavenHome=\"${env.MAVEN_HOME}\" fork=\"true\"&gt;\n            &lt;arg value=\"clean\" /&gt;\n            &lt;arg value=\"install\" /&gt;\n            &lt;arg value=\"-Pqa\" /&gt;\n        &lt;/artifact:mvn&gt;\n    &lt;/target&gt;\n&lt;/project&gt;\n</code></pre>\n\n<hr>\n\n<p>Small information between these elements ant <code>typedef</code> vs <code>taskdef</code>.</p>\n\n<ul>\n<li><p><strong><a href=\"https://ant.apache.org/manual/Tasks/typedef.html\" rel=\"nofollow noreferrer\"><code>Typedef</code></a></strong>: Using a <code>typedef</code> declaration allows you to store the Ant Tasks' library anywhere you like (such as source control) and put it's location in the build file.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;typedef name=\"urlset\" classname=\"com.mydomain.URLSet\"/&gt;\n</code></pre></li>\n<li><p><strong><a href=\"https://ant.apache.org/manual/Tasks/taskdef.html\" rel=\"nofollow noreferrer\"><code>Taskdef</code></a></strong> Adds a task definition to the current project, such that this new task can be used in the current project.</p>\n\n<p>Using <a href=\"https://github.com/Yash-777/LearnJava/blob/master/src/org/apache/tools/ant/taskdefs/optional/PropertyFiles.java\" rel=\"nofollow noreferrer\">PropertyFiles.java</a> task by adding it to taskdef externally.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;taskdef name = \"propertyfiles\"\n      classname = \"org.apache.tools.ant.taskdefs.optional.PropertyFiles\" /&gt;\n</code></pre>\n\n<p>All the <code>taskdef</code> are configured in <code>apache-ant-1.9.4\\lib\\ant.jar\\org\\apache\\tools\\ant\\taskdefs\\defaults.properties</code> properties files. But i have created an external class and placed inside jar file. But instead of adding  entry in <code>defaults.properties</code> file externally informing the task by <code>taskdef</code>.</p>\n\n<p>Second way, You can create a jar file, list all the <code>tasksef</code> in one properties file and refer the resource\n<a href=\"http://ant-contrib.sourceforge.net/\" rel=\"nofollow noreferrer\"><strong>antcontrib</strong></a> You can place the JAR in your Ant lib directory, and set classpath.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;taskdef resource=\"net/sf/antcontrib/antcontrib.properties\"&gt;\n    &lt;classpath&gt;\n        &lt;pathelement location=\"${env.ANT_HOME}/lib/ant-contrib-0.6.jar\"/&gt;\n    &lt;/classpath&gt;\n&lt;/taskdef&gt;\n</code></pre></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":928900,"reputation":2486,"user_id":959156,"accept_rate":100,"display_name":"Mostafa Zeinali"},"score":0,"creation_date":1688494801,"post_id":64016917,"comment_id":135080616,"body_markdown":"This is great. Thanks you.","body":"This is great. Thanks you."}],"tags":[],"owner":{"account_id":1042691,"reputation":536,"user_id":1048376,"display_name":"splashout"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691603484,"creation_date":1600804976,"answer_id":64016917,"question_id":7581156,"body_markdown":"This is an old post, but still relevant (for me, anyhow). I think things have changed since the original post. Turns out the solution is quite simple, and [you don&#39;t need all the ant-maven integration fluff][1]. It makes me wonder why this wasn&#39;t the answer 8 years ago, as I&#39;m pretty sure it would have worked then as it does now. I should mention this is for Windows.  You could probably tweak it to support Unix or both.\r\n    \r\n\r\n 1. Install maven for Windows\r\n 2. Create an environment variable MAVEN_HOME that points to the base mvn install directory (e.g., C:\\dev\\apache-maven-3.6.3)\r\n 3. Add this to your build.xml file:\r\n&gt;     &lt;property environment=&quot;env&quot; /&gt;\r\n 4. Add this task to your build.xml:\r\n\r\n&gt;     &lt;target name=&quot;mvnPackage&quot; description=&quot;Creates war file&quot;&gt;\r\n&gt;        &lt;fail unless=&quot;env.MAVEN_HOME&quot; message=&quot;Environment variable MAVEN_HOME was not found on your system!&quot; /&gt;\r\n&gt;        &lt;exec executable=&quot;${env.MAVEN_HOME}\\bin\\mvn.cmd&quot;&gt;\r\n&gt;            &lt;arg value=&quot;clean&quot; /&gt;\r\n&gt;       \t &lt;arg value=&quot;package&quot; /&gt;\r\n&gt;        &lt;/exec&gt;\r\n&gt;     &lt;/target&gt;\r\n\r\n  [1]: https://issues.apache.org/jira/browse/MANTTASKS-201?focusedCommentId=15291978&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-15291978","title":"How to call for a Maven goal within an Ant script?","body":"<p>This is an old post, but still relevant (for me, anyhow). I think things have changed since the original post. Turns out the solution is quite simple, and <a href=\"https://issues.apache.org/jira/browse/MANTTASKS-201?focusedCommentId=15291978&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-15291978\" rel=\"nofollow noreferrer\">you don't need all the ant-maven integration fluff</a>. It makes me wonder why this wasn't the answer 8 years ago, as I'm pretty sure it would have worked then as it does now. I should mention this is for Windows.  You could probably tweak it to support Unix or both.</p>\n<ol>\n<li>Install maven for Windows</li>\n<li>Create an environment variable MAVEN_HOME that points to the base mvn install directory (e.g., C:\\dev\\apache-maven-3.6.3)</li>\n<li>Add this to your build.xml file:</li>\n</ol>\n<blockquote>\n<pre><code>&lt;property environment=&quot;env&quot; /&gt;\n</code></pre>\n</blockquote>\n<ol start=\"4\">\n<li>Add this task to your build.xml:</li>\n</ol>\n<blockquote>\n<pre><code>&lt;target name=&quot;mvnPackage&quot; description=&quot;Creates war file&quot;&gt;\n   &lt;fail unless=&quot;env.MAVEN_HOME&quot; message=&quot;Environment variable MAVEN_HOME was not found on your system!&quot; /&gt;\n   &lt;exec executable=&quot;${env.MAVEN_HOME}\\bin\\mvn.cmd&quot;&gt;\n       &lt;arg value=&quot;clean&quot; /&gt;\n       &lt;arg value=&quot;package&quot; /&gt;\n   &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":81772,"reputation":4274,"user_id":230415,"accept_rate":60,"display_name":"Dunith Dhanushka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44744,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":7581329,"answer_count":12,"score":38,"last_activity_date":1691603484,"creation_date":1317202553,"question_id":7581156,"body_markdown":"Is it possible to call or execute a Maven goal within an Ant script?\r\n\r\nSay I have an ant target called &#39;distribute&#39; and inside which I need to call a maven &#39;compile&#39; goal from another pom.xml.","title":"How to call for a Maven goal within an Ant script?","body":"<p>Is it possible to call or execute a Maven goal within an Ant script?</p>\n\n<p>Say I have an ant target called 'distribute' and inside which I need to call a maven 'compile' goal from another pom.xml.</p>\n"},{"tags":["java","collections","hashmap","set","reverse"],"comments":[{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":9,"creation_date":1524378985,"post_id":49963235,"comment_id":86942402,"body_markdown":"Elements in a `Set` are **not** ordered... a `LinkedHashSet` on the other hand...","body":"Elements in a <code>Set</code> are <b>not</b> ordered... a <code>LinkedHashSet</code> on the other hand..."}],"answers":[{"comments":[{"owner":{"account_id":3333125,"reputation":1453,"user_id":2801516,"accept_rate":53,"display_name":"Shaz"},"score":0,"creation_date":1524379583,"post_id":49963262,"comment_id":86942503,"body_markdown":"Is it possible to get an example for clarity please?","body":"Is it possible to get an example for clarity please?"},{"owner":{"account_id":3333125,"reputation":1453,"user_id":2801516,"accept_rate":53,"display_name":"Shaz"},"score":0,"creation_date":1524380106,"post_id":49963262,"comment_id":86942646,"body_markdown":"2 questions. String and Movie are the key/value of the hashmap here? And can you elaborate what (s1,s2)-&gt;s2.compareTo (s1) means ?","body":"2 questions. String and Movie are the key/value of the hashmap here? And can you elaborate what (s1,s2)-&gt;s2.compareTo (s1) means ?"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":0,"creation_date":1524380254,"post_id":49963262,"comment_id":86942692,"body_markdown":"@Shaz 1. yes 2. that&#39;s a lambda expression (available since Java 8). It&#39;s a shorter way to implement the `Comparator&lt;String&gt;` interface.","body":"@Shaz 1. yes 2. that&#39;s a lambda expression (available since Java 8). It&#39;s a shorter way to implement the <code>Comparator&lt;String&gt;</code> interface."},{"owner":{"account_id":12040719,"reputation":2536,"user_id":8807741,"display_name":"SeverityOne"},"score":0,"creation_date":1524380271,"post_id":49963262,"comment_id":86942706,"body_markdown":"Did you try reading the JavaDoc of `java.util.Map`? And are you familiar with Java 8 streams and lambda functions?","body":"Did you try reading the JavaDoc of <code>java.util.Map</code>? And are you familiar with Java 8 streams and lambda functions?"},{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":0,"creation_date":1524382764,"post_id":49963262,"comment_id":86943381,"body_markdown":"I&#39;d use `Comparator.naturalOrder().reversed()` or `Collections.reverseOrder()`, I think it&#39;s more declarative.","body":"I&#39;d use <code>Comparator.naturalOrder().reversed()</code> or <code>Collections.reverseOrder()</code>, I think it&#39;s more declarative."},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":0,"creation_date":1524383417,"post_id":49963262,"comment_id":86943542,"body_markdown":"@lexicore that does look better, however `Map&lt;String,String&gt; moviesByName = new TreeMap&lt;&gt;(Comparator.naturalOrder().reversed ());` doesn&#39;t pass compilation for me.","body":"@lexicore that does look better, however <code>Map&lt;String,String&gt; moviesByName = new TreeMap&lt;&gt;(Comparator.naturalOrder().reversed ());</code> doesn&#39;t pass compilation for me."},{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":1,"creation_date":1524383528,"post_id":49963262,"comment_id":86943570,"body_markdown":"@Eran FTFY: `Map&lt;String,String&gt; moviesByName = new TreeMap&lt;&gt;(Comparator.&lt;String&gt;naturalOrder().reversed());`. Not sure why type inference didn&#39;t work.","body":"@Eran FTFY: <code>Map&lt;String,String&gt; moviesByName = new TreeMap&lt;&gt;(Comparator.&lt;String&gt;naturalOrder().reversed());</code>. Not sure why type inference didn&#39;t work."}],"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524383660,"creation_date":1524379188,"answer_id":49963262,"question_id":49963235,"body_markdown":"If you want the keys of the `Map` to be ordered, you must use a different `Map` implementation, since the keys of a `HashMap` are not ordered.\r\n\r\nYou can use a `TreeMap`. You can pass to its constructor a `Comparator` that would determine the ordering of the keys. That would determine the order of the keys in the `Set` returned by `keySet()`.\r\n\r\nFor example, if you want your movies to be sorted according to reversed lexicographical order:\r\n\r\n    Map&lt;String,Movie&gt; moviesByName = new TreeMap&lt;&gt;((s1,s2)-&gt;s2.compareTo (s1));\r\n\r\nor, as lexicore suggested:\r\n\r\n    Map&lt;String,Movie&gt; moviesByName = new TreeMap&lt;&gt;(Comparator.&lt;String&gt;naturalOrder().reversed());","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p>If you want the keys of the <code>Map</code> to be ordered, you must use a different <code>Map</code> implementation, since the keys of a <code>HashMap</code> are not ordered.</p>\n\n<p>You can use a <code>TreeMap</code>. You can pass to its constructor a <code>Comparator</code> that would determine the ordering of the keys. That would determine the order of the keys in the <code>Set</code> returned by <code>keySet()</code>.</p>\n\n<p>For example, if you want your movies to be sorted according to reversed lexicographical order:</p>\n\n<pre><code>Map&lt;String,Movie&gt; moviesByName = new TreeMap&lt;&gt;((s1,s2)-&gt;s2.compareTo (s1));\n</code></pre>\n\n<p>or, as lexicore suggested:</p>\n\n<pre><code>Map&lt;String,Movie&gt; moviesByName = new TreeMap&lt;&gt;(Comparator.&lt;String&gt;naturalOrder().reversed());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":1,"creation_date":1524381474,"post_id":49963364,"comment_id":86943020,"body_markdown":"That would sort the values in reverse of the keys *natural* order, not in reverse of the order in the `keySet`.","body":"That would sort the values in reverse of the keys <i>natural</i> order, not in reverse of the order in the <code>keySet</code>."},{"owner":{"account_id":4355913,"reputation":301,"user_id":3554540,"display_name":"rifaqat"},"score":0,"creation_date":1524397586,"post_id":49963364,"comment_id":86946872,"body_markdown":"Although you are right, but The question in its original context is ambiguous, because the Set from a Map already doesn&#39;t have any guarantee that you know the order in which it was populated, so the Set here is not a pure Set with intention of preserving order, also there is a side question between the lines of getting a concatenated result in String. otherwise only a reverse loop could&#39;ve solved the problem.","body":"Although you are right, but The question in its original context is ambiguous, because the Set from a Map already doesn&#39;t have any guarantee that you know the order in which it was populated, so the Set here is not a pure Set with intention of preserving order, also there is a side question between the lines of getting a concatenated result in String. otherwise only a reverse loop could&#39;ve solved the problem."}],"tags":[],"owner":{"account_id":4355913,"reputation":301,"user_id":3554540,"display_name":"rifaqat"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524399535,"creation_date":1524380249,"answer_id":49963364,"question_id":49963235,"body_markdown":"If you are using Java8 you can try:\r\n\r\n    List&lt;String&gt; sorted = movieList.keySet().stream()\r\n                    .sorted(Collections.reverseOrder())\r\n                    .collect(Collectors.toList());\r\n\r\nOr even better if you want only the output String:\r\n\r\n    String output = movieList.keySet().stream()\r\n                    .sorted(Collections.reverseOrder())\r\n                    .collect(Collectors.joining(&quot;\\n&quot;));\r\n\r\nBut if the intent is to just reverse the map.keySet as Andreas suggested ... then \r\n\r\n    ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(movieList.keySet());\r\n    Collections.reverse(list);\r\n    //list is now in reverse order of the keySet","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p>If you are using Java8 you can try:</p>\n\n<pre><code>List&lt;String&gt; sorted = movieList.keySet().stream()\n                .sorted(Collections.reverseOrder())\n                .collect(Collectors.toList());\n</code></pre>\n\n<p>Or even better if you want only the output String:</p>\n\n<pre><code>String output = movieList.keySet().stream()\n                .sorted(Collections.reverseOrder())\n                .collect(Collectors.joining(\"\\n\"));\n</code></pre>\n\n<p>But if the intent is to just reverse the map.keySet as Andreas suggested ... then </p>\n\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(movieList.keySet());\nCollections.reverse(list);\n//list is now in reverse order of the keySet\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2570317,"reputation":11557,"user_id":2229229,"accept_rate":76,"display_name":"luksch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524380317,"creation_date":1524380317,"answer_id":49963374,"question_id":49963235,"body_markdown":"A key quality of a ```Set``` is that it not sorted. So you need to use another data structure to achieve this goal. The simplest solution may be a ```List```, but then you loose the quality of a ```Set``` to not contain entires that are equal (entry.equals(otherentry) == true)\r\n\r\nIf you want to retrieve entries in the order of filling (or reverse) and still want to retain the ```Set``` quality, you may use a [LinkedHashSet][1]\r\n\r\nThe solution of [Eran][2] is also possible, but there you need to create a comparator that results in the order of addition to the TreeMap. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\r\n  [2]: https://stackoverflow.com/a/49963262/2229229","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p>A key quality of a <code>Set</code> is that it not sorted. So you need to use another data structure to achieve this goal. The simplest solution may be a <code>List</code>, but then you loose the quality of a <code>Set</code> to not contain entires that are equal (entry.equals(otherentry) == true)</p>\n\n<p>If you want to retrieve entries in the order of filling (or reverse) and still want to retain the <code>Set</code> quality, you may use a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">LinkedHashSet</a></p>\n\n<p>The solution of <a href=\"https://stackoverflow.com/a/49963262/2229229\">Eran</a> is also possible, but there you need to create a comparator that results in the order of addition to the TreeMap. </p>\n"},{"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1524381274,"post_id":49963379,"comment_id":86942973,"body_markdown":"If you had formatted code to be readable, I might have up-voted it. But then again, an `ArrayList` created straight from `h` would be better. Besides the question is not about an ordered `LinkedHashSet`, but an unordered `keySet` from a `HashMap `.","body":"If you had formatted code to be readable, I might have up-voted it. But then again, an <code>ArrayList</code> created straight from <code>h</code> would be better. Besides the question is not about an ordered <code>LinkedHashSet</code>, but an unordered <code>keySet</code> from a <code>HashMap </code>."}],"tags":[],"owner":{"account_id":10494123,"reputation":634,"user_id":7734988,"display_name":"Abhi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524380382,"creation_date":1524380382,"answer_id":49963379,"question_id":49963235,"body_markdown":"    After getting values stored in a Set, Add all values of Set into a List then apply reverse function of list. Below is an example\r\n    \r\n    import java.util.*;\r\n    class Test\r\n    {\r\n    public static void main(String args[])\r\n    {\r\n    Set h=new LinkedHashSet();\r\n    List h2 = new LinkedList();\r\n    h.add(&quot;Lovely&quot;);\r\n    h.add(&quot;Professional&quot;);\r\n    h.add(&quot;University&quot;);\r\n    h2.addAll(h);\t\r\n    System.out.println(h);\r\n    Collections.reverse(h2);\r\n    System.out.println(h2);\r\n    }\r\n    }\t","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<pre><code>After getting values stored in a Set, Add all values of Set into a List then apply reverse function of list. Below is an example\n\nimport java.util.*;\nclass Test\n{\npublic static void main(String args[])\n{\nSet h=new LinkedHashSet();\nList h2 = new LinkedList();\nh.add(\"Lovely\");\nh.add(\"Professional\");\nh.add(\"University\");\nh2.addAll(h);   \nSystem.out.println(h);\nCollections.reverse(h2);\nSystem.out.println(h2);\n}\n}   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6528461,"reputation":3279,"user_id":5050431,"accept_rate":60,"display_name":"A_Arnold"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691603402,"creation_date":1691603402,"answer_id":76870174,"question_id":49963235,"body_markdown":"[JEP 431: Sequenced Collections][1] (release 9/19/23) in Java 21 has a `reversed()` method to `SortedSet`. This reversed view of the `SortedSet` can iterate in descending order.\r\n\r\n    SortedSet&lt;String&gt; movies =  movieList.keySet();\r\n    for(String movie : movies.reversed()) {\r\n        output += movie + &quot;\\n&quot;;\r\n    }\r\nThat being said you may want to use a `StringBuilder()` for your output variable.\r\n\r\n  [1]: https://openjdk.org/jeps/431","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p><a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">JEP 431: Sequenced Collections</a> (release 9/19/23) in Java 21 has a <code>reversed()</code> method to <code>SortedSet</code>. This reversed view of the <code>SortedSet</code> can iterate in descending order.</p>\n<pre><code>SortedSet&lt;String&gt; movies =  movieList.keySet();\nfor(String movie : movies.reversed()) {\n    output += movie + &quot;\\n&quot;;\n}\n</code></pre>\n<p>That being said you may want to use a <code>StringBuilder()</code> for your output variable.</p>\n"}],"owner":{"account_id":3333125,"reputation":1453,"user_id":2801516,"accept_rate":53,"display_name":"Shaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4044,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1691603402,"creation_date":1524378953,"question_id":49963235,"body_markdown":"I want to reverse the values in the `Set&lt;String&gt;`\r\n\r\nSo, I am creating a `Set&lt;String&gt;` of keys from some `HashMap` And printing out the values i.e. keys.\r\n\r\n\tSet&lt;String&gt; movies =  movieList.keySet();\r\n    for(String movie : movies) {\r\n\t    output += movie + &quot;\\n&quot;;\r\n\t}\r\n\r\n**I need to reverse the values of the `Set&lt;String&gt;` from last value to first values** Is this possible?\r\n&amp;nbsp;\r\n\r\n\r\n\r\n \r\n","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p>I want to reverse the values in the <code>Set&lt;String&gt;</code></p>\n\n<p>So, I am creating a <code>Set&lt;String&gt;</code> of keys from some <code>HashMap</code> And printing out the values i.e. keys.</p>\n\n<pre><code>Set&lt;String&gt; movies =  movieList.keySet();\nfor(String movie : movies) {\n    output += movie + \"\\n\";\n}\n</code></pre>\n\n<p><strong>I need to reverse the values of the <code>Set&lt;String&gt;</code> from last value to first values</strong> Is this possible?\n&nbsp;</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":3,"creation_date":1607877175,"post_id":65277913,"comment_id":115404344,"body_markdown":"What package does `BootjpaApplication` reside in? It needs to be in the root package for all other beans to be picked up by component scan","body":"What package does <code>BootjpaApplication</code> reside in? It needs to be in the root package for all other beans to be picked up by component scan"},{"owner":{"account_id":15162144,"reputation":71,"user_id":10940857,"display_name":"Sudo Pehpeh"},"score":0,"creation_date":1607878508,"post_id":65277913,"comment_id":115404729,"body_markdown":"@crizzis \nUserRespository is in com.jpa.dao,\nBootjpaApplication is in com.jpa.demo,\nuser.java is in com.jpa.entities.\nWhat do you mean by root package?","body":"@crizzis  UserRespository is in com.jpa.dao, BootjpaApplication is in com.jpa.demo, user.java is in com.jpa.entities. What do you mean by root package?"},{"owner":{"account_id":15162144,"reputation":71,"user_id":10940857,"display_name":"Sudo Pehpeh"},"score":0,"creation_date":1607878720,"post_id":65277913,"comment_id":115404801,"body_markdown":"I got it. @crizzis Thank you so much","body":"I got it. @crizzis Thank you so much"}],"answers":[{"comments":[{"owner":{"account_id":8358777,"reputation":1554,"user_id":6277983,"accept_rate":67,"display_name":"Suraj Gautam"},"score":0,"creation_date":1607878571,"post_id":65277981,"comment_id":115404750,"body_markdown":"what&#39;s the package name for BootjpaApplication class?","body":"what&#39;s the package name for BootjpaApplication class?"},{"owner":{"account_id":15162144,"reputation":71,"user_id":10940857,"display_name":"Sudo Pehpeh"},"score":0,"creation_date":1607878671,"post_id":65277981,"comment_id":115404786,"body_markdown":"UserRespository is in com.jpa.dao,\nBootjpaApplication is in com.jpa.demo,\nuser.java is in com.jpa.entities.","body":"UserRespository is in com.jpa.dao, BootjpaApplication is in com.jpa.demo, user.java is in com.jpa.entities."},{"owner":{"account_id":15162144,"reputation":71,"user_id":10940857,"display_name":"Sudo Pehpeh"},"score":0,"creation_date":1607878828,"post_id":65277981,"comment_id":115404835,"body_markdown":"hey, thanks for bringing the package in notice. The error was due to BootjpaApplication not being in the root package. Thank you so much!","body":"hey, thanks for bringing the package in notice. The error was due to BootjpaApplication not being in the root package. Thank you so much!"}],"tags":[],"owner":{"account_id":8358777,"reputation":1554,"user_id":6277983,"accept_rate":67,"display_name":"Suraj Gautam"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1607877137,"creation_date":1607877137,"answer_id":65277981,"question_id":65277913,"body_markdown":"It looks like your packages are not scanned properly. \r\n\r\nCan you please try adding `@SpringBootApplication(scanBasePackages = &quot;com.jpa&quot;)` instead of `@SpringBootApplication`.","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>It looks like your packages are not scanned properly.</p>\n<p>Can you please try adding <code>@SpringBootApplication(scanBasePackages = &quot;com.jpa&quot;)</code> instead of <code>@SpringBootApplication</code>.</p>\n"},{"comments":[{"owner":{"account_id":2258366,"reputation":656,"user_id":1989025,"display_name":"W Almir"},"score":0,"creation_date":1637755384,"post_id":70093132,"comment_id":123909800,"body_markdown":"I see this is your first answer,  which is awesome.\nBut since there&#39;s already an accepted answer, new answers should try to improve on it, or at least update outdated information.\nYour answer will probably work, but it&#39;s a little hacky and doesn&#39;t really address the issue in the question. \nBut please keep at it :)","body":"I see this is your first answer,  which is awesome. But since there&#39;s already an accepted answer, new answers should try to improve on it, or at least update outdated information. Your answer will probably work, but it&#39;s a little hacky and doesn&#39;t really address the issue in the question.  But please keep at it :)"}],"tags":[],"owner":{"account_id":23438485,"reputation":1,"user_id":17496291,"display_name":"BOBY BURMAN"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637744040,"creation_date":1637744040,"answer_id":70093132,"question_id":65277913,"body_markdown":"just create a single package(forget about coupling for a bit and do that). Then put all the classes(POJO , Main) and Interface(UserRepository) in side that package and re-start your project. It will work.\r\n","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>just create a single package(forget about coupling for a bit and do that). Then put all the classes(POJO , Main) and Interface(UserRepository) in side that package and re-start your project. It will work.</p>\n"},{"tags":[],"owner":{"account_id":26297323,"reputation":1,"user_id":19963339,"display_name":"Sourav Sanyal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662797447,"creation_date":1662797447,"answer_id":73670270,"question_id":65277913,"body_markdown":"your package structure should be like this,\r\n`com.spring`\r\n`com.spring.DAO`\r\n`com.spring.Model`\r\n`com.spring.View`\r\n`com.spring.Controller`\r\n\r\n","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>your package structure should be like this,\n<code>com.spring</code>\n<code>com.spring.DAO</code>\n<code>com.spring.Model</code>\n<code>com.spring.View</code>\n<code>com.spring.Controller</code></p>\n"},{"tags":[],"owner":{"account_id":27450585,"reputation":1,"user_id":20942892,"display_name":"Pradhyumn Patidar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672988622,"creation_date":1672988622,"answer_id":75027922,"question_id":65277913,"body_markdown":"In pom.xml file checks for hibernate and JPA configuration\r\n\r\nSame bug occur in my application\r\n\r\nI resolve it by adding configuration \r\n \r\n\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\nThank you !","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>In pom.xml file checks for hibernate and JPA configuration</p>\n<p>Same bug occur in my application</p>\n<p>I resolve it by adding configuration</p>\n<pre><code>      &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    \n</code></pre>\n<p>Thank you !</p>\n"},{"tags":[],"owner":{"account_id":27459942,"reputation":1,"user_id":20950688,"display_name":"Prajwal "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673360138,"creation_date":1673077337,"answer_id":75038813,"question_id":65277913,"body_markdown":"I had the same issues with Repository not being found. So what I did was to move everything into 1 package. And this worked meaning that there was nothing wrong with my code. I moved the Repos &amp; Entities into another package and added the following to `SpringApplication` class.\r\n```\r\n@EnableJpaRepositories(&quot;com...jpa&quot;)\r\n```\r\n\r\n```\r\n@EntityScan(&quot;com...jpa&quot;)\r\n```\r\nAfter that, I moved the Service (interface &amp; implementation) to another package and added the following to SpringApplication class.\r\n\r\n```\r\n@ComponentScan(&quot;com...service&quot;)\r\n```\r\nThis solved my issues.","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>I had the same issues with Repository not being found. So what I did was to move everything into 1 package. And this worked meaning that there was nothing wrong with my code. I moved the Repos &amp; Entities into another package and added the following to <code>SpringApplication</code> class.</p>\n<pre><code>@EnableJpaRepositories(&quot;com...jpa&quot;)\n</code></pre>\n<pre><code>@EntityScan(&quot;com...jpa&quot;)\n</code></pre>\n<p>After that, I moved the Service (interface &amp; implementation) to another package and added the following to SpringApplication class.</p>\n<pre><code>@ComponentScan(&quot;com...service&quot;)\n</code></pre>\n<p>This solved my issues.</p>\n"},{"tags":[],"owner":{"account_id":27982310,"reputation":1,"user_id":21369846,"display_name":"A J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678462950,"creation_date":1678443071,"answer_id":75694779,"question_id":65277913,"body_markdown":"Please check your package name. The package name should be in a hierarchical manner.\r\nlike\r\n\r\n    com.jpa.test  \r\n    com.jpa.test.dao  \r\n    com.jpa.test.entities","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>Please check your package name. The package name should be in a hierarchical manner.\nlike</p>\n<pre><code>com.jpa.test  \ncom.jpa.test.dao  \ncom.jpa.test.entities\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28955183,"reputation":1,"user_id":22178895,"display_name":"Saroj Ramtel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688557183,"creation_date":1688556976,"answer_id":76619937,"question_id":65277913,"body_markdown":"The problem here is location of the main class. The main class should be in the base package i.e. com.jpa in your case. Your main class is inside com.jpa.demo. Don&#39;t make the package demo for main class.\r\nhere is an example that follows your practice of code. This should solve the problem.[][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bV1jg.jpg","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>The problem here is location of the main class. The main class should be in the base package i.e. com.jpa in your case. Your main class is inside com.jpa.demo. Don't make the package demo for main class.\nhere is an example that follows your practice of code. This should solve the problem.<a href=\"https://i.stack.imgur.com/bV1jg.jpg\" rel=\"nofollow noreferrer\"></a></p>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1691693285,"post_id":76870141,"comment_id":135529661,"body_markdown":"I see this is your first answer, which is awesome. But since there&#39;s already an accepted answer, new answers should try to improve on it, or at least update outdated information. Your answer will probably work, but it&#39;s a little hacky and doesn&#39;t really address the issue in the question.","body":"I see this is your first answer, which is awesome. But since there&#39;s already an accepted answer, new answers should try to improve on it, or at least update outdated information. Your answer will probably work, but it&#39;s a little hacky and doesn&#39;t really address the issue in the question."}],"tags":[],"owner":{"account_id":29193903,"reputation":11,"user_id":22365460,"display_name":"Shristi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691603087,"creation_date":1691603087,"answer_id":76870141,"question_id":65277913,"body_markdown":"I also followed durgesh sir videos , I fixed my code by keeping it in same package , then it worked","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>I also followed durgesh sir videos , I fixed my code by keeping it in same package , then it worked</p>\n"}],"owner":{"account_id":15162144,"reputation":71,"user_id":10940857,"display_name":"Sudo Pehpeh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3293,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65277981,"answer_count":8,"score":1,"last_activity_date":1691603087,"creation_date":1607876781,"question_id":65277913,"body_markdown":"I am trying String JPA for the first time.\r\n\r\nI was following a Youtube video by Durgesh Sir.\r\n\r\nThis is the error\r\n\r\n```\r\nException in thread &quot;main&quot; org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:351)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1177)\r\n\tat com.jpa.demo.BootjpaApplication.main(BootjpaApplication.java:13)\r\n\r\n```\r\n\r\nFollowing are my files\r\n\r\nBootjpaApplication.java (which contains main)\r\n\r\n```\r\npackage com.jpa.demo;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.ApplicationContext;\r\nimport com.jpa.dao.UserRepository;\r\nimport com.jpa.entities.user;\r\n@SpringBootApplication\r\npublic class BootjpaApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tApplicationContext context= SpringApplication.run(BootjpaApplication.class, args);\r\n\t\tUserRepository userrepo= context.getBean(UserRepository.class);\r\n\t\tuser user=new user();\r\n\t\tuser.setName(&quot;Varun Dhawan&quot;);\r\n\t\tuser.setCity(&quot;Paris&quot;);\r\n\t\tuser.setStatus(&quot;happy&quot;);\r\n\t\tuser user1= userrepo.save(user);\r\n\t\tSystem.out.println(user1);\r\n\t}\r\n```\r\n\r\nuser.java (there are 4 variables. id is auto generated. Other 3 have getters and setters.\r\n\r\n```\r\npackage com.jpa.entities;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\npublic class user {\r\n\t@Id\r\n\t@GeneratedValue(strategy =GenerationType.AUTO)\r\n\tprivate int id;\r\n\t\r\n\tprivate String name;\r\n\tprivate String city;\r\n\tprivate String status;\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic String getCity() {\r\n\t\treturn city;\r\n\t}\r\n\tpublic void setCity(String city) {\r\n\t\tthis.city = city;\r\n\t}\r\n\tpublic String getStatus() {\r\n\t\treturn status;\r\n\t}\r\n\tpublic void setStatus(String status) {\r\n\t\tthis.status = status;\r\n\t}\r\n\tpublic user(int id, String name, String city, String status) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.city = city;\r\n\t\tthis.status = status;\r\n\t}\r\n\tpublic user() {\r\n\t\tsuper();\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;user [id=&quot; + id + &quot;, name=&quot; + name + &quot;, city=&quot; + city + &quot;, status=&quot; + status + &quot;]&quot;;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nUserRepository.java\r\n\r\n```\r\npackage com.jpa.dao;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.jpa.entities.user;\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;user,Integer&gt; {\r\n\t\r\n}\r\n```\r\n\r\nApplication.properties\r\n\r\n```\r\nspring.datasource.name=jpa\r\nspring.datasource.url=jdbc:mysql://localhost:3306/jpa\r\nspring.datasource.username=root\r\nspring.datasource.password=root@123\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\n\r\nThank you!","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>I am trying String JPA for the first time.</p>\n<p>I was following a Youtube video by Durgesh Sir.</p>\n<p>This is the error</p>\n<pre><code>Exception in thread &quot;main&quot; org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.jpa.dao.UserRepository' available\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:351)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1177)\n    at com.jpa.demo.BootjpaApplication.main(BootjpaApplication.java:13)\n\n</code></pre>\n<p>Following are my files</p>\n<p>BootjpaApplication.java (which contains main)</p>\n<pre><code>package com.jpa.demo;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationContext;\nimport com.jpa.dao.UserRepository;\nimport com.jpa.entities.user;\n@SpringBootApplication\npublic class BootjpaApplication {\n\n    public static void main(String[] args) {\n        ApplicationContext context= SpringApplication.run(BootjpaApplication.class, args);\n        UserRepository userrepo= context.getBean(UserRepository.class);\n        user user=new user();\n        user.setName(&quot;Varun Dhawan&quot;);\n        user.setCity(&quot;Paris&quot;);\n        user.setStatus(&quot;happy&quot;);\n        user user1= userrepo.save(user);\n        System.out.println(user1);\n    }\n</code></pre>\n<p>user.java (there are 4 variables. id is auto generated. Other 3 have getters and setters.</p>\n<pre><code>package com.jpa.entities;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class user {\n    @Id\n    @GeneratedValue(strategy =GenerationType.AUTO)\n    private int id;\n    \n    private String name;\n    private String city;\n    private String status;\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getCity() {\n        return city;\n    }\n    public void setCity(String city) {\n        this.city = city;\n    }\n    public String getStatus() {\n        return status;\n    }\n    public void setStatus(String status) {\n        this.status = status;\n    }\n    public user(int id, String name, String city, String status) {\n        super();\n        this.id = id;\n        this.name = name;\n        this.city = city;\n        this.status = status;\n    }\n    public user() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n    @Override\n    public String toString() {\n        return &quot;user [id=&quot; + id + &quot;, name=&quot; + name + &quot;, city=&quot; + city + &quot;, status=&quot; + status + &quot;]&quot;;\n    }\n    \n}\n</code></pre>\n<p>UserRepository.java</p>\n<pre><code>package com.jpa.dao;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.jpa.entities.user;\n@Repository\npublic interface UserRepository extends JpaRepository&lt;user,Integer&gt; {\n    \n}\n</code></pre>\n<p>Application.properties</p>\n<pre><code>spring.datasource.name=jpa\nspring.datasource.url=jdbc:mysql://localhost:3306/jpa\nspring.datasource.username=root\nspring.datasource.password=root@123\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>Thank you!</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1691593400,"post_id":76869015,"comment_id":135513187,"body_markdown":"Look into the concept of a junction table. It&#39;s easier to break up the many-to-many relationship itself into two one-to-many relationships. Think of if you had `books` and `authors` (many to many), then you&#39;d want a `book_author` table that contains entries of `(book_id, author_id)`. The advantage is to find all books of an author, it&#39;s now one-to-many, and all authors of a book is also one-to-many.","body":"Look into the concept of a junction table. It&#39;s easier to break up the many-to-many relationship itself into two one-to-many relationships. Think of if you had <code>books</code> and <code>authors</code> (many to many), then you&#39;d want a <code>book_author</code> table that contains entries of <code>(book_id, author_id)</code>. The advantage is to find all books of an author, it&#39;s now one-to-many, and all authors of a book is also one-to-many."}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691602936,"creation_date":1691602936,"answer_id":76870126,"question_id":76869015,"body_markdown":"The Jackson annotations you are looking for is a combination of `@JsonManagedReference` and `@JsonBackReference`. You can place it on the both ends of the relationship. However it can only be used for *one-to-one*, *one-to-many* and *many-to-one* relationships. Not for *many-to-many*.\r\n\r\nThat&#39;s why you should structurally decompose your bidirectional *many-to-many* relationship to two *many-to-one* relationships (as already suggested in the comment by @Rogue).\r\n\r\n**Here is the complete solution**\r\n\r\nFirst we will define a composite key class:\r\n```\r\n@Embeddable\r\nclass ArtistSongKey implements Serializable {\r\n\r\n    Long artistId;\r\n\r\n    Long songId;\r\n\r\n    // standard constructors, getters, and setters\r\n    // hashcode and equals implementation\r\n}\r\n```\r\nUsing this composite key class, we will create the entity class, which models the join table:\r\n```\r\n@Entity\r\nclass ArtistSong {\r\n\r\n    @EmbeddedId\r\n    ArtistSongKey id;\r\n\r\n    @ManyToOne\r\n    @JsonBackReference\r\n    @MapsId(&quot;artistId&quot;)\r\n    Artist artist;\r\n\r\n    @ManyToOne\r\n    @JsonBackReference\r\n    @MapsId(&quot;songId&quot;)\r\n    Song song;\r\n\r\n    // standard constructors, getters, and setters\r\n}\r\n```\r\nAfter this, we can configure the inverse references in the Artist and Song entities:\r\n```\r\nclass Artist {\r\n\r\n    @OneToMany(mappedBy = &quot;song&quot;)\r\n    @JsonManagedReference\r\n    Set&lt;ArtistSong&gt; songsOfArtist;\r\n\r\n    // ...\r\n}\r\n\r\nclass Song {\r\n\r\n    @OneToMany(mappedBy = &quot;artist&quot;)\r\n    @JsonManagedReference\r\n    Set&lt;ArtistSong&gt; artistsOfSong;\r\n\r\n    // ...\r\n}\r\n```\r\nPlease note the added Jackson annotations which should fix the recursion error and should provide the desired layout of JSON objects.\r\n\r\nBased on: [https://www.baeldung.com/jpa-many-to-many][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/jpa-many-to-many","title":"Bidirectional Many-to-many relationships in Spring JPA (Hibernate)","body":"<p>The Jackson annotations you are looking for is a combination of <code>@JsonManagedReference</code> and <code>@JsonBackReference</code>. You can place it on the both ends of the relationship. However it can only be used for <em>one-to-one</em>, <em>one-to-many</em> and <em>many-to-one</em> relationships. Not for <em>many-to-many</em>.</p>\n<p>That's why you should structurally decompose your bidirectional <em>many-to-many</em> relationship to two <em>many-to-one</em> relationships (as already suggested in the comment by @Rogue).</p>\n<p><strong>Here is the complete solution</strong></p>\n<p>First we will define a composite key class:</p>\n<pre><code>@Embeddable\nclass ArtistSongKey implements Serializable {\n\n    Long artistId;\n\n    Long songId;\n\n    // standard constructors, getters, and setters\n    // hashcode and equals implementation\n}\n</code></pre>\n<p>Using this composite key class, we will create the entity class, which models the join table:</p>\n<pre><code>@Entity\nclass ArtistSong {\n\n    @EmbeddedId\n    ArtistSongKey id;\n\n    @ManyToOne\n    @JsonBackReference\n    @MapsId(&quot;artistId&quot;)\n    Artist artist;\n\n    @ManyToOne\n    @JsonBackReference\n    @MapsId(&quot;songId&quot;)\n    Song song;\n\n    // standard constructors, getters, and setters\n}\n</code></pre>\n<p>After this, we can configure the inverse references in the Artist and Song entities:</p>\n<pre><code>class Artist {\n\n    @OneToMany(mappedBy = &quot;song&quot;)\n    @JsonManagedReference\n    Set&lt;ArtistSong&gt; songsOfArtist;\n\n    // ...\n}\n\nclass Song {\n\n    @OneToMany(mappedBy = &quot;artist&quot;)\n    @JsonManagedReference\n    Set&lt;ArtistSong&gt; artistsOfSong;\n\n    // ...\n}\n</code></pre>\n<p>Please note the added Jackson annotations which should fix the recursion error and should provide the desired layout of JSON objects.</p>\n<p>Based on: <a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-many-to-many</a></p>\n"}],"owner":{"account_id":27619970,"reputation":11,"user_id":21081249,"display_name":"bbn_dev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691602936,"creation_date":1691593117,"question_id":76869015,"body_markdown":"Im having trouble with many-to-many Bidirectional mapping using Spring Data JPA with Hibernate as JPA provider. The bidirectional relationship mapping allows you to navigate the association in both directions and that is what i need. I have two entities: `Artist` and `Song`. When i get an artist i want to get all his songs and vice versa, when i get a song i want to get the artists of that song. This results in a recursive error which, as i researched could be solved with @JsonIdentityInfo or using @JsonIgnore, but neither if them doesnt give me the json i truly want.\r\n\r\nThe Artist Entity:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;artist&quot;)\r\n@JsonIdentityInfo(\r\n        generator = ObjectIdGenerators.PropertyGenerator.class,\r\n        property = &quot;id&quot;)\r\npublic class Artist {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;image&quot;)\r\n    private String image;\r\n\r\n\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.PERSIST, CascadeType.MERGE })\r\n    @JoinTable(name = &quot;artist_songs&quot;, joinColumns = { @JoinColumn(name = &quot;artist_id&quot;) }, inverseJoinColumns = {\r\n            @JoinColumn(name = &quot;song_id&quot;) })\r\n    private Set&lt;Song&gt; songs = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\nand the Song Entity:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;song&quot;)\r\n@JsonIdentityInfo(\r\n        generator = ObjectIdGenerators.PropertyGenerator.class,\r\n        property = &quot;id&quot;)\r\npublic class Song {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n\r\n    @Column(name = &quot;src&quot;)\r\n    private String src;\r\n\r\n    @Column(name = &quot;image&quot;)\r\n    private String image;\r\n\r\n    @ManyToMany(fetch = FetchType.LAZY,\r\n            cascade = {\r\n                    CascadeType.PERSIST,\r\n                    CascadeType.MERGE\r\n            },\r\n            mappedBy = &quot;songs&quot;)\r\n    private Set&lt;Artist&gt; artists = new HashSet&lt;&gt;();\r\n}\r\n```\r\nMy problem is that when I make a call to get these entities i get these JSON objects:\r\n\r\n```\r\n// THE JSON I GET WHEN I CALL http://localhost:8080/api/artists\r\n[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;name&quot;: &quot;artist1&quot;,\r\n        &quot;image&quot;: &quot;artist1.png&quot;,\r\n        &quot;songs&quot;: [\r\n            {\r\n                &quot;id&quot;: 1,\r\n                &quot;title&quot;: &quot;song 1&quot;,\r\n                &quot;src&quot;: &quot;spng1.mp3&quot;,\r\n                &quot;image&quot;: &quot;song1.png&quot;,\r\n                &quot;artists&quot;: [\r\n                    1\r\n                ]\r\n            },\r\n            {\r\n                &quot;id&quot;: 2,\r\n                &quot;title&quot;: &quot;song 2&quot;,\r\n                &quot;src&quot;: &quot;song2.mp3&quot;,\r\n                &quot;image&quot;: &quot;song2.png&quot;,\r\n                &quot;artists&quot;: [\r\n                    1\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        &quot;id&quot;: 2,\r\n        &quot;name&quot;: &quot;artist2&quot;,\r\n        &quot;image&quot;: &quot;artist2.png&quot;,\r\n        &quot;songs&quot;: [\r\n            {\r\n                &quot;id&quot;: 3,\r\n                &quot;title&quot;: &quot;song 3&quot;,\r\n                &quot;src&quot;: &quot;song3.mp3&quot;,\r\n                &quot;image&quot;: &quot;song3.png&quot;,\r\n                &quot;artists&quot;: [\r\n                    2\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\n// THE JSON I GET WHEN I CALL http://localhost:8080/api/songs\r\n\r\n[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;song 1&quot;,\r\n        &quot;src&quot;: &quot;spng1.mp3&quot;,\r\n        &quot;image&quot;: &quot;song1.png&quot;,\r\n        &quot;artists&quot;: [\r\n            {\r\n                &quot;id&quot;: 1,\r\n                &quot;name&quot;: &quot;artist1&quot;,\r\n                &quot;image&quot;: &quot;artist1.png&quot;,\r\n                &quot;songs&quot;: [\r\n                    {\r\n                        &quot;id&quot;: 2,\r\n                        &quot;title&quot;: &quot;song 2&quot;,\r\n                        &quot;src&quot;: &quot;song2.mp3&quot;,\r\n                        &quot;image&quot;: &quot;song2.png&quot;,\r\n                        &quot;artists&quot;: [\r\n                            1\r\n                        ]\r\n                    },\r\n                    1\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    2,\r\n    {\r\n        &quot;id&quot;: 3,\r\n        &quot;title&quot;: &quot;song 3&quot;,\r\n        &quot;src&quot;: &quot;song3.mp3&quot;,\r\n        &quot;image&quot;: &quot;song3.png&quot;,\r\n        &quot;artists&quot;: [\r\n            {\r\n                &quot;id&quot;: 2,\r\n                &quot;name&quot;: &quot;artist2&quot;,\r\n                &quot;image&quot;: &quot;artist2.png&quot;,\r\n                &quot;songs&quot;: [\r\n                    3\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n]\r\n```\r\n\r\n\r\nThe JSON objects I want are like these:\r\n\r\n```\r\n// THE ARTIST ENTITY\r\n{\r\n        &quot;id&quot;: 2,\r\n        &quot;name&quot;: &quot;artist2&quot;,\r\n        &quot;image&quot;: &quot;artist2.png&quot;,\r\n        &quot;songs&quot;: [\r\n            {\r\n              &quot;id&quot;: 1,\r\n              &quot;title&quot;: &quot;song 1&quot;,\r\n              &quot;src&quot;: &quot;song1.mp3&quot;,\r\n              &quot;image&quot;: &quot;song1.png&quot;,\r\n//REMOVES THE FIELD artists INSIDE SONG. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL SONGS\r\n            },\r\n            {\r\n              &quot;id&quot;: 2,\r\n              &quot;title&quot;: &quot;song 2&quot;,\r\n              &quot;src&quot;: &quot;song2.mp3&quot;,\r\n              &quot;image&quot;: &quot;song2.png&quot;,\r\n//REMOVES THE FIELD artists INSIDE SONG. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL SONGS\r\n            }\r\n        ]\r\n    }\r\n\r\n\r\n\r\n// THE SONG ENTITY\r\n{\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;song 1&quot;,\r\n        &quot;src&quot;: &quot;song1.mp3&quot;,\r\n        &quot;image&quot;: &quot;song1.png&quot;,\r\n        &quot;artists&quot;: [\r\n            {\r\n                &quot;id&quot;: 2,\r\n                &quot;name&quot;: &quot;artist2&quot;,\r\n                &quot;image&quot;: &quot;artist2.png&quot;,\r\n//REMOVES THE FIELD songs INSIDE ARTIST. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL ARTISTS\r\n            }\r\n        ]\r\n    }\r\n```\r\n","title":"Bidirectional Many-to-many relationships in Spring JPA (Hibernate)","body":"<p>Im having trouble with many-to-many Bidirectional mapping using Spring Data JPA with Hibernate as JPA provider. The bidirectional relationship mapping allows you to navigate the association in both directions and that is what i need. I have two entities: <code>Artist</code> and <code>Song</code>. When i get an artist i want to get all his songs and vice versa, when i get a song i want to get the artists of that song. This results in a recursive error which, as i researched could be solved with @JsonIdentityInfo or using @JsonIgnore, but neither if them doesnt give me the json i truly want.</p>\n<p>The Artist Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;artist&quot;)\n@JsonIdentityInfo(\n        generator = ObjectIdGenerators.PropertyGenerator.class,\n        property = &quot;id&quot;)\npublic class Artist {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;image&quot;)\n    private String image;\n\n\n    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.PERSIST, CascadeType.MERGE })\n    @JoinTable(name = &quot;artist_songs&quot;, joinColumns = { @JoinColumn(name = &quot;artist_id&quot;) }, inverseJoinColumns = {\n            @JoinColumn(name = &quot;song_id&quot;) })\n    private Set&lt;Song&gt; songs = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>and the Song Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;song&quot;)\n@JsonIdentityInfo(\n        generator = ObjectIdGenerators.PropertyGenerator.class,\n        property = &quot;id&quot;)\npublic class Song {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @Column(name = &quot;src&quot;)\n    private String src;\n\n    @Column(name = &quot;image&quot;)\n    private String image;\n\n    @ManyToMany(fetch = FetchType.LAZY,\n            cascade = {\n                    CascadeType.PERSIST,\n                    CascadeType.MERGE\n            },\n            mappedBy = &quot;songs&quot;)\n    private Set&lt;Artist&gt; artists = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>My problem is that when I make a call to get these entities i get these JSON objects:</p>\n<pre><code>// THE JSON I GET WHEN I CALL http://localhost:8080/api/artists\n[\n    {\n        &quot;id&quot;: 1,\n        &quot;name&quot;: &quot;artist1&quot;,\n        &quot;image&quot;: &quot;artist1.png&quot;,\n        &quot;songs&quot;: [\n            {\n                &quot;id&quot;: 1,\n                &quot;title&quot;: &quot;song 1&quot;,\n                &quot;src&quot;: &quot;spng1.mp3&quot;,\n                &quot;image&quot;: &quot;song1.png&quot;,\n                &quot;artists&quot;: [\n                    1\n                ]\n            },\n            {\n                &quot;id&quot;: 2,\n                &quot;title&quot;: &quot;song 2&quot;,\n                &quot;src&quot;: &quot;song2.mp3&quot;,\n                &quot;image&quot;: &quot;song2.png&quot;,\n                &quot;artists&quot;: [\n                    1\n                ]\n            }\n        ]\n    },\n    {\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;artist2&quot;,\n        &quot;image&quot;: &quot;artist2.png&quot;,\n        &quot;songs&quot;: [\n            {\n                &quot;id&quot;: 3,\n                &quot;title&quot;: &quot;song 3&quot;,\n                &quot;src&quot;: &quot;song3.mp3&quot;,\n                &quot;image&quot;: &quot;song3.png&quot;,\n                &quot;artists&quot;: [\n                    2\n                ]\n            }\n        ]\n    }\n]\n\n// THE JSON I GET WHEN I CALL http://localhost:8080/api/songs\n\n[\n    {\n        &quot;id&quot;: 1,\n        &quot;title&quot;: &quot;song 1&quot;,\n        &quot;src&quot;: &quot;spng1.mp3&quot;,\n        &quot;image&quot;: &quot;song1.png&quot;,\n        &quot;artists&quot;: [\n            {\n                &quot;id&quot;: 1,\n                &quot;name&quot;: &quot;artist1&quot;,\n                &quot;image&quot;: &quot;artist1.png&quot;,\n                &quot;songs&quot;: [\n                    {\n                        &quot;id&quot;: 2,\n                        &quot;title&quot;: &quot;song 2&quot;,\n                        &quot;src&quot;: &quot;song2.mp3&quot;,\n                        &quot;image&quot;: &quot;song2.png&quot;,\n                        &quot;artists&quot;: [\n                            1\n                        ]\n                    },\n                    1\n                ]\n            }\n        ]\n    },\n    2,\n    {\n        &quot;id&quot;: 3,\n        &quot;title&quot;: &quot;song 3&quot;,\n        &quot;src&quot;: &quot;song3.mp3&quot;,\n        &quot;image&quot;: &quot;song3.png&quot;,\n        &quot;artists&quot;: [\n            {\n                &quot;id&quot;: 2,\n                &quot;name&quot;: &quot;artist2&quot;,\n                &quot;image&quot;: &quot;artist2.png&quot;,\n                &quot;songs&quot;: [\n                    3\n                ]\n            }\n        ]\n    }\n]\n</code></pre>\n<p>The JSON objects I want are like these:</p>\n<pre><code>// THE ARTIST ENTITY\n{\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;artist2&quot;,\n        &quot;image&quot;: &quot;artist2.png&quot;,\n        &quot;songs&quot;: [\n            {\n              &quot;id&quot;: 1,\n              &quot;title&quot;: &quot;song 1&quot;,\n              &quot;src&quot;: &quot;song1.mp3&quot;,\n              &quot;image&quot;: &quot;song1.png&quot;,\n//REMOVES THE FIELD artists INSIDE SONG. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL SONGS\n            },\n            {\n              &quot;id&quot;: 2,\n              &quot;title&quot;: &quot;song 2&quot;,\n              &quot;src&quot;: &quot;song2.mp3&quot;,\n              &quot;image&quot;: &quot;song2.png&quot;,\n//REMOVES THE FIELD artists INSIDE SONG. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL SONGS\n            }\n        ]\n    }\n\n\n\n// THE SONG ENTITY\n{\n        &quot;id&quot;: 1,\n        &quot;title&quot;: &quot;song 1&quot;,\n        &quot;src&quot;: &quot;song1.mp3&quot;,\n        &quot;image&quot;: &quot;song1.png&quot;,\n        &quot;artists&quot;: [\n            {\n                &quot;id&quot;: 2,\n                &quot;name&quot;: &quot;artist2&quot;,\n                &quot;image&quot;: &quot;artist2.png&quot;,\n//REMOVES THE FIELD songs INSIDE ARTIST. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL ARTISTS\n            }\n        ]\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","rest","http-method"],"comments":[{"owner":{"account_id":295316,"reputation":736,"user_id":3324415,"accept_rate":74,"display_name":"BernardV"},"score":1,"creation_date":1687442318,"post_id":76532614,"comment_id":134939956,"body_markdown":"Your wording of the question needs work. Also what does a question regarding the purpose of HTTP methods have to do with Spring Boot?","body":"Your wording of the question needs work. Also what does a question regarding the purpose of HTTP methods have to do with Spring Boot?"},{"owner":{"account_id":3930229,"reputation":2278,"user_id":4412979,"accept_rate":50,"display_name":"Vasily Liaskovsky"},"score":0,"creation_date":1691603990,"post_id":76532614,"comment_id":135515352,"body_markdown":"I just wonder how a user with over 30k rep and `spring-boot` tag on more than 50% of their posts could ask this kind of newbie question. Is this some kind of joke? Or are you guys grinding rep this way?","body":"I just wonder how a user with over 30k rep and <code>spring-boot</code> tag on more than 50% of their posts could ask this kind of newbie question. Is this some kind of joke? Or are you guys grinding rep this way?"}],"answers":[{"tags":[],"owner":{"account_id":24557191,"reputation":101,"user_id":18465532,"display_name":"Mina-"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687442390,"creation_date":1687442390,"answer_id":76532714,"question_id":76532614,"body_markdown":"## HTTP Methods are standard or specification\r\nAs you said, you can implement with totally ignoring what standard says, but it means your software/api should be used with concerns(because this don&#39;t follow standards), which make integration with others complicated.\r\n\r\nFor example, old standard says there can&#39;t be no body should be sent on GET, and Java developers followed this standard faithfully, errors occurred or were ignored when adding a body to a GET request, which made some developers in trouble who did not followed standard.\r\n\r\nRead also: [HTTP Methods definitions - RFC 9110](https://www.rfc-editor.org/rfc/rfc9110#name-method-definitions)","title":"Spring Boot Difference usages of HTTP Methods","body":"<h2>HTTP Methods are standard or specification</h2>\n<p>As you said, you can implement with totally ignoring what standard says, but it means your software/api should be used with concerns(because this don't follow standards), which make integration with others complicated.</p>\n<p>For example, old standard says there can't be no body should be sent on GET, and Java developers followed this standard faithfully, errors occurred or were ignored when adding a body to a GET request, which made some developers in trouble who did not followed standard.</p>\n<p>Read also: <a href=\"https://www.rfc-editor.org/rfc/rfc9110#name-method-definitions\" rel=\"nofollow noreferrer\">HTTP Methods definitions - RFC 9110</a></p>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691602917,"creation_date":1687441653,"question_id":76532614,"body_markdown":"I am using Spring Boot for creating rest API. I learnt about PUT, PATCH, POST. PUT is for updating the resource and if Id is not present then it creates. Patch is for updating part of the resource and Post for creating new resources.\r\n\r\nWhat I don&#39;t understand is, are they are only standards that helps outside world to let all know what the API is for ? Because I can do the same implementation in Put like Patch and make Put request to perform partial updates.","title":"Spring Boot Difference usages of HTTP Methods","body":"<p>I am using Spring Boot for creating rest API. I learnt about PUT, PATCH, POST. PUT is for updating the resource and if Id is not present then it creates. Patch is for updating part of the resource and Post for creating new resources.</p>\n<p>What I don't understand is, are they are only standards that helps outside world to let all know what the API is for ? Because I can do the same implementation in Put like Patch and make Put request to perform partial updates.</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"answers":[{"comments":[{"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"score":0,"creation_date":1687747679,"post_id":76550990,"comment_id":134974793,"body_markdown":"Thanks for your time. How can I check if message is really compressed ?","body":"Thanks for your time. How can I check if message is really compressed ?"},{"owner":{"account_id":12007582,"reputation":101,"user_id":8785434,"display_name":"Nguyen Tung"},"score":0,"creation_date":1687762514,"post_id":76550990,"comment_id":134976368,"body_markdown":"You can refer to this post https://stackoverflow.com/questions/36590471/how-can-i-verify-if-compression-is-working-correctly-in-kafka-0-8-2-2. I Hope this help!","body":"You can refer to this post <a href=\"https://stackoverflow.com/questions/36590471/how-can-i-verify-if-compression-is-working-correctly-in-kafka-0-8-2-2\" title=\"how can i verify if compression is working correctly in kafka 0 8 2 2\">stackoverflow.com/questions/36590471/&hellip;</a>. I Hope this help!"},{"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"score":0,"creation_date":1689205449,"post_id":76550990,"comment_id":135181999,"body_markdown":"Thanks. If compression is handled using compression-type property, then why we need max request size property? If the message size is more than 1 MB then compression method should compress and make the size less and send it to Kafka ? Why we need to specify the size property also ?","body":"Thanks. If compression is handled using compression-type property, then why we need max request size property? If the message size is more than 1 MB then compression method should compress and make the size less and send it to Kafka ? Why we need to specify the size property also ?"}],"tags":[],"owner":{"account_id":12007582,"reputation":101,"user_id":8785434,"display_name":"Nguyen Tung"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1687704568,"creation_date":1687704568,"answer_id":76550990,"question_id":76550855,"body_markdown":"The configuration ```max-request-size``` will help you in this case. This configuration is used to specify the maximum size of a request. By default, It is set to 1MB, that why you are seeing the error.\r\nYou can add the following property in your property file:\r\n```\r\nspring:\r\n  kafka:\r\n   producer:\r\n     max-request-size: 2097152\r\n```\r\nNote 2MB = 2097152 bytes (you can change it according to your requirement).\r\n\r\n","title":"Kafka message compression not working as expected","body":"<p>The configuration <code>max-request-size</code> will help you in this case. This configuration is used to specify the maximum size of a request. By default, It is set to 1MB, that why you are seeing the error.\nYou can add the following property in your property file:</p>\n<pre><code>spring:\n  kafka:\n   producer:\n     max-request-size: 2097152\n</code></pre>\n<p>Note 2MB = 2097152 bytes (you can change it according to your requirement).</p>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76550990,"answer_count":1,"score":0,"last_activity_date":1691602861,"creation_date":1687702838,"question_id":76550855,"body_markdown":"My project uses Apache Kafka for sending messages. Over the period of time, payload becomes heavy and has crossed the default size of 1MB. We thought of compressing the message at Producer end, but it is not working as expected.\r\n\r\nHere is the producer config,\r\n\r\n    spring:\r\n        kafka:\r\n            consumer:\r\n              group-id: group_name\r\n              bootstrap-servers: broker-server:9343\r\n            producer:\r\n              bootstrap-servers: ${spring.kafka.consumer.bootstrap-servers}\r\n              key-serializer: org.apache.kafka.common.serialization.StringSerializer\r\n              value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\r\n              compression-type: gzip\r\n\r\nbut with above configuration, if I send a message more than 1 MB, I am facing below error,\r\n\r\n&gt; org.springframework.kafka.KafkaException: Send failed; nested exception is org.apache.kafka.common.errors.RecordTooLargeException: The message is 1909152 bytes when serialized which is larger than 1048576, which is the value of the max.request.size configuration\r\n\r\nIs there any other configuration required to enable compression ? \r\n","title":"Kafka message compression not working as expected","body":"<p>My project uses Apache Kafka for sending messages. Over the period of time, payload becomes heavy and has crossed the default size of 1MB. We thought of compressing the message at Producer end, but it is not working as expected.</p>\n<p>Here is the producer config,</p>\n<pre><code>spring:\n    kafka:\n        consumer:\n          group-id: group_name\n          bootstrap-servers: broker-server:9343\n        producer:\n          bootstrap-servers: ${spring.kafka.consumer.bootstrap-servers}\n          key-serializer: org.apache.kafka.common.serialization.StringSerializer\n          value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\n          compression-type: gzip\n</code></pre>\n<p>but with above configuration, if I send a message more than 1 MB, I am facing below error,</p>\n<blockquote>\n<p>org.springframework.kafka.KafkaException: Send failed; nested exception is org.apache.kafka.common.errors.RecordTooLargeException: The message is 1909152 bytes when serialized which is larger than 1048576, which is the value of the max.request.size configuration</p>\n</blockquote>\n<p>Is there any other configuration required to enable compression ?</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689254490,"creation_date":1689254162,"answer_id":76679793,"question_id":76675335,"body_markdown":"Messages are always sent as bytes. That&#39;s the responsibly of the serializer \r\n\r\nDecompression is automatically done by the consumer. If you&#39;re getting an exception, it&#39;s caused by something else. For example, &quot;message conversion&quot; seems like a deserializer exception while taking the byte array to some POJO ","title":"Kafka consumer side decompression","body":"<p>Messages are always sent as bytes. That's the responsibly of the serializer</p>\n<p>Decompression is automatically done by the consumer. If you're getting an exception, it's caused by something else. For example, &quot;message conversion&quot; seems like a deserializer exception while taking the byte array to some POJO</p>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691602785,"creation_date":1689211522,"question_id":76675335,"body_markdown":"My application is implemented in Java using Spring Boot. We are using Kafka for receiving messages from another application which is implemented in .net.\r\n\r\nAs the message size becomes bigger than 1 MB, from producer end, they have implemented compression. But after compression, messages are sent in byte format and at consumer end, we are getting &quot;Message conversion Exception&quot;.\r\n\r\nShould we need to decompress the message which is in byte ? I tried searching but I haven&#39;t found any decompression technique at consumer end using Java Spring Boot. Does anyone faced such scenario ?\r\n","title":"Kafka consumer side decompression","body":"<p>My application is implemented in Java using Spring Boot. We are using Kafka for receiving messages from another application which is implemented in .net.</p>\n<p>As the message size becomes bigger than 1 MB, from producer end, they have implemented compression. But after compression, messages are sent in byte format and at consumer end, we are getting &quot;Message conversion Exception&quot;.</p>\n<p>Should we need to decompress the message which is in byte ? I tried searching but I haven't found any decompression technique at consumer end using Java Spring Boot. Does anyone faced such scenario ?</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691371912,"post_id":76848273,"comment_id":135478042,"body_markdown":"Show your repository class.  Do you have something like `@Id\n\tprivate Long id;` ?","body":"Show your repository class.  Do you have something like <code>@Id \tprivate Long id;</code> ?"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691372701,"post_id":76848273,"comment_id":135478089,"body_markdown":"That what your after?","body":"That what your after?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1691374983,"post_id":76848273,"comment_id":135478229,"body_markdown":"there is nothing wrong with your code - HBN does not support such concept: you are expecting to get the list of DTOs per JDBC-resultset, however HBN is trying to construct DTO per row. That is requires two steps: first, select entities and than convert them to DTOs","body":"there is nothing wrong with your code - HBN does not support such concept: you are expecting to get the list of DTOs per JDBC-resultset, however HBN is trying to construct DTO per row. That is requires two steps: first, select entities and than convert them to DTOs"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691375621,"post_id":76848273,"comment_id":135478269,"body_markdown":"@AndreyB.Panfilov do you have a link an article with more detail? Need to understand better.","body":"@AndreyB.Panfilov do you have a link an article with more detail? Need to understand better."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691387153,"post_id":76848273,"comment_id":135479110,"body_markdown":"can you update  question with bird service impl ?","body":"can you update  question with bird service impl ?"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691398492,"post_id":76848273,"comment_id":135480901,"body_markdown":"@AndreiLisa updated.","body":"@AndreiLisa updated."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691398664,"post_id":76848273,"comment_id":135480935,"body_markdown":"thanks, also add `BirdTestDto ` constructor, i will see if your constructor mach your DTO projections requirements","body":"thanks, also add <code>BirdTestDto </code> constructor, i will see if your constructor mach your DTO projections requirements"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691398819,"post_id":76848273,"comment_id":135480961,"body_markdown":"add @Param(&quot;id&quot;) for your  query `Optional&lt;BirdTestDto&gt; testBirdTestDto(@Param(&quot;id&quot;) Long id);`","body":"add @Param(&quot;id&quot;) for your  query <code>Optional&lt;BirdTestDto&gt; testBirdTestDto(@Param(&quot;id&quot;) Long id);</code>"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691401155,"post_id":76848273,"comment_id":135481412,"body_markdown":"have you tried it ? @RadikaMoonesinghe","body":"have you tried it ? @RadikaMoonesinghe"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691401799,"post_id":76848273,"comment_id":135481562,"body_markdown":"@AndreiLisa yes I have (good spotting) - but the error is still there. In fact the query syntax checker in Intellij is underlining it in red. I dont even get to try to build.","body":"@AndreiLisa yes I have (good spotting) - but the error is still there. In fact the query syntax checker in Intellij is underlining it in red. I dont even get to try to build."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691402556,"post_id":76848273,"comment_id":135481715,"body_markdown":"can you upload you source code on github, and add the link ?  i will check and will give the feedback","body":"can you upload you source code on github, and add the link ?  i will check and will give the feedback"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691402761,"post_id":76848273,"comment_id":135481752,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254834/discussion-between-radika-moonesinghe-and-andrei-lisa).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254834/discussion-between-radika-moonesinghe-and-andrei-lisa\">continue this discussion in chat</a>."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691414158,"post_id":76848273,"comment_id":135484119,"body_markdown":"i gave a answer in our chat, can you check please ? red underlining will disappear","body":"i gave a answer in our chat, can you check please ? red underlining will disappear"}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691602743,"creation_date":1691602743,"answer_id":76870106,"question_id":76848273,"body_markdown":"In our chat i gave an approach but there you need to call 2 different repository(birds and healthcheck) and now i want to give this answer based on `Interface Projections` because the birds entity have inner association with HealthCheck entity \r\n\r\nFirst of all, declare a interface like next one:\r\n\r\n    public interface BirdsTestDTO {\r\n    \r\n      String getName();\r\n    \r\n      Sex getSex();\r\n    \r\n      BirdStatus getStatus();\r\n    \r\n      List&lt;HealthCheckDto&gt; getListHealthCheck();\r\n    \r\n      interface HealthCheckDto {\r\n    \r\n        Long getId();\r\n\r\n        LocalDate getLocalDate();\r\n    \r\n        String getField();\r\n      }\r\n    \r\n    }\r\n\r\n**Be careful, next ones requirement is mandatory**\r\n\r\n 1. Default `get` prefix for every field\r\n 2. Field name after get must be the same as field name declared in entity class\r\n\r\n\r\nAnd finally in your Bird Repository you will have next one query\r\n\r\n      Optional&lt;BirdsTestDTO&gt; getBirdsById(@Param(&quot;id&quot;) Long id);\r\n\r\nThe result of all of this operations is the same, how you told me in our chat:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Here you can have `n+1` problem, to avoid it create a custom query using `JOIN FETCH clause.` Do it in your own.**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nS0uL.png","title":"Spring-data JPA Query can not locate appropriate constructor","body":"<p>In our chat i gave an approach but there you need to call 2 different repository(birds and healthcheck) and now i want to give this answer based on <code>Interface Projections</code> because the birds entity have inner association with HealthCheck entity</p>\n<p>First of all, declare a interface like next one:</p>\n<pre><code>public interface BirdsTestDTO {\n\n  String getName();\n\n  Sex getSex();\n\n  BirdStatus getStatus();\n\n  List&lt;HealthCheckDto&gt; getListHealthCheck();\n\n  interface HealthCheckDto {\n\n    Long getId();\n\n    LocalDate getLocalDate();\n\n    String getField();\n  }\n\n}\n</code></pre>\n<p><strong>Be careful, next ones requirement is mandatory</strong></p>\n<ol>\n<li>Default <code>get</code> prefix for every field</li>\n<li>Field name after get must be the same as field name declared in entity class</li>\n</ol>\n<p>And finally in your Bird Repository you will have next one query</p>\n<pre><code>  Optional&lt;BirdsTestDTO&gt; getBirdsById(@Param(&quot;id&quot;) Long id);\n</code></pre>\n<p>The result of all of this operations is the same, how you told me in our chat:</p>\n<p><a href=\"https://i.stack.imgur.com/nS0uL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nS0uL.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Here you can have <code>n+1</code> problem, to avoid it create a custom query using <code>JOIN FETCH clause.</code> Do it in your own.</strong></p>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691602743,"creation_date":1691369477,"question_id":76848273,"body_markdown":"In a Spring Boot 2.6 project I am getting a error that it cannot locate an appropriate constructor and further down that Validation failed for query method.\r\n\r\nMy query is returning a Dto with projection:\r\n\r\nBirdTestDto\r\n\r\n      @Value\r\n      public class BirdTestDto implements Serializable {\r\n        private String name;\r\n        private Sex sex;\r\n        private Status status;\r\n        private List&lt;HealthCheck&gt; listHealthCheck;\r\n\r\n    //Constructor\r\n    //Getter\r\n\r\nThe query on the repository is:\r\n\r\n        @Query(&quot;SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) &quot; +\r\n            &quot;FROM Bird b &quot; +\r\n            &quot;WHERE b.id = :id&quot;)\r\n       Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id);\r\n\r\nThe stack trace is:\r\n\r\n    \torg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;seagullController&#39; defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\controller\\seagullController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;birdServiceImpl&#39; defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\implementation\\BirdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;birdRepository&#39; defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat com.nz.seagull.seagullApplication.main(seagullApplication.java:22) ~[main/:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\t\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.6.4.jar:2.6.4]\r\n\tCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;birdServiceImpl&#39; defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\implementation\\BirdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;birdRepository&#39; defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\t... 24 common frames omitted\r\n\tCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;birdRepository&#39; defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\t... 38 common frames omitted\r\n\tCaused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:106) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:94) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\r\n\t\tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133) ~[na:na]\r\n\t\tat java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1054) ~[na:na]\r\n\t\tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) ~[na:na]\r\n\t\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[na:na]\r\n\t\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[na:na]\r\n\t\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[na:na]\r\n\t\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\r\n\t\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[na:na]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:96) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat java.base/java.util.Optional.map(Optional.java:265) ~[na:na]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.&lt;init&gt;(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:364) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:322) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.util.Lazy.getNullable(Lazy.java:230) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:328) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\t... 49 common frames omitted\r\n\tCaused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:96) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.&lt;init&gt;(SimpleJpaQuery.java:66) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:51) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:163) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:87) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:102) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\t... 71 common frames omitted\r\n\tCaused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.nz.seagull.view.BirdTestDto]. Expected arguments are: java.lang.String, com.nz.seagull.enumeration.Sex, com.nz.seagull.enumeration.Status, java.util.Collection [SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) FROM com.nz.seagull.model.Bird b WHERE b.id = :id]\r\n\t\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:757) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:114) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\t\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.16.jar:5.3.16]\r\n\t\tat com.sun.proxy.$Proxy118.createQuery(Unknown Source) ~[na:na]\r\n\t\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:90) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\t... 77 common frames omitted\r\n\tCaused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.nz.seagull.view.BirdTestDto]. Expected arguments are: java.lang.String, com.nz.seagull.enumeration.Sex, com.nz.seagull.enumeration.Status, java.util.Collection [SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) FROM com.nz.seagull.model.Bird b WHERE b.id = :id]\r\n\t\tat org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:74) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.hql.internal.ast.ErrorTracker.throwQueryException(ErrorTracker.java:93) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:282) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:113) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:73) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:162) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:636) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:748) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\t... 85 common frames omitted\r\n\r\n\tDisconnected from the target VM, address: &#39;127.0.0.1:52117&#39;, transport: &#39;socket&#39;\r\n\r\n\tProcess finished with exit code 0\r\n\r\n**UPDATE**\r\n\r\n    @Repository\r\n    public interface BirdRepository extends JpaRepository&lt;Bird, Long&gt; {\r\n\r\n    // Other queries \r\n\r\n        @Query(&quot;SELECT NEW com.nz.kiwi.view.BirdTestDto(b.name, b.sex, b.status) FROM Bird b WHERE b.id = :id &quot;)\r\n    Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id);\r\n\r\nI have also tried the query without retreiving the @OneToMany for HealthCheck and it works.\r\n\r\nI tried to change the definition for HealthCheck on the Dto to:\r\n\r\n    private List&lt;HealthCheck&gt; listHealthCheck = new ArrayList&lt;&gt;;\r\n\r\nBirdServiceImpl\r\n\r\n    @Service\r\n    @Transactional\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class BirdServiceImpl implements BirdService {\r\n\r\n        private final BirdRepository birdRepository;\r\n\r\n        public Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id) {\r\n            return birdRepository.testBirdTestDto(id);\r\n        }\r\n\r\nBut the constructor error remains.\r\n\r\nWhat is wrong with my constructor and how to fix this?","title":"Spring-data JPA Query can not locate appropriate constructor","body":"<p>In a Spring Boot 2.6 project I am getting a error that it cannot locate an appropriate constructor and further down that Validation failed for query method.</p>\n<p>My query is returning a Dto with projection:</p>\n<p>BirdTestDto</p>\n<pre><code>  @Value\n  public class BirdTestDto implements Serializable {\n    private String name;\n    private Sex sex;\n    private Status status;\n    private List&lt;HealthCheck&gt; listHealthCheck;\n\n//Constructor\n//Getter\n</code></pre>\n<p>The query on the repository is:</p>\n<pre><code>    @Query(&quot;SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) &quot; +\n        &quot;FROM Bird b &quot; +\n        &quot;WHERE b.id = :id&quot;)\n   Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id);\n</code></pre>\n<p>The stack trace is:</p>\n<pre><code>    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'seagullController' defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\controller\\seagullController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'birdServiceImpl' defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\implementation\\BirdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birdRepository' defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.16.jar:5.3.16]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.16.jar:5.3.16]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.4.jar:2.6.4]\n    at com.nz.seagull.seagullApplication.main(seagullApplication.java:22) ~[main/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.6.4.jar:2.6.4]\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'birdServiceImpl' defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\implementation\\BirdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birdRepository' defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 24 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birdRepository' defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 38 common frames omitted\nCaused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:106) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:94) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133) ~[na:na]\n    at java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1054) ~[na:na]\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[na:na]\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[na:na]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:96) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at java.base/java.util.Optional.map(Optional.java:265) ~[na:na]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.&lt;init&gt;(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:364) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:322) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.util.Lazy.getNullable(Lazy.java:230) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:328) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 49 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:96) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.&lt;init&gt;(SimpleJpaQuery.java:66) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:51) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:163) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:87) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:102) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    ... 71 common frames omitted\nCaused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.nz.seagull.view.BirdTestDto]. Expected arguments are: java.lang.String, com.nz.seagull.enumeration.Sex, com.nz.seagull.enumeration.Status, java.util.Collection [SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) FROM com.nz.seagull.model.Bird b WHERE b.id = :id]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:757) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:114) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.16.jar:5.3.16]\n    at com.sun.proxy.$Proxy118.createQuery(Unknown Source) ~[na:na]\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:90) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    ... 77 common frames omitted\nCaused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.nz.seagull.view.BirdTestDto]. Expected arguments are: java.lang.String, com.nz.seagull.enumeration.Sex, com.nz.seagull.enumeration.Status, java.util.Collection [SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) FROM com.nz.seagull.model.Bird b WHERE b.id = :id]\n    at org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:74) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.hql.internal.ast.ErrorTracker.throwQueryException(ErrorTracker.java:93) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:282) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:113) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:73) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:162) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:636) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:748) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    ... 85 common frames omitted\n\nDisconnected from the target VM, address: '127.0.0.1:52117', transport: 'socket'\n\nProcess finished with exit code 0\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<pre><code>@Repository\npublic interface BirdRepository extends JpaRepository&lt;Bird, Long&gt; {\n\n// Other queries \n\n    @Query(&quot;SELECT NEW com.nz.kiwi.view.BirdTestDto(b.name, b.sex, b.status) FROM Bird b WHERE b.id = :id &quot;)\nOptional&lt;BirdTestDto&gt; testBirdTestDto(Long id);\n</code></pre>\n<p>I have also tried the query without retreiving the @OneToMany for HealthCheck and it works.</p>\n<p>I tried to change the definition for HealthCheck on the Dto to:</p>\n<pre><code>private List&lt;HealthCheck&gt; listHealthCheck = new ArrayList&lt;&gt;;\n</code></pre>\n<p>BirdServiceImpl</p>\n<pre><code>@Service\n@Transactional\n@Slf4j\n@RequiredArgsConstructor\npublic class BirdServiceImpl implements BirdService {\n\n    private final BirdRepository birdRepository;\n\n    public Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id) {\n        return birdRepository.testBirdTestDto(id);\n    }\n</code></pre>\n<p>But the constructor error remains.</p>\n<p>What is wrong with my constructor and how to fix this?</p>\n"},{"tags":["java","spring-boot","lombok"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689606869,"creation_date":1689606869,"answer_id":76705872,"question_id":76705502,"body_markdown":"The [Lombok documentation for SneakyThrows](https://projectlombok.org/features/SneakyThrows) mentions some common use cases:\r\n\r\n&gt; A needlessly strict interface, such as Runnable - whatever exception propagates out of your run() method, checked or not, it will be passed to the Thread&#39;s unhandled exception handler. Catching a checked exception and wrapping it in some sort of RuntimeException is only obscuring the real cause of the issue.\r\n\r\nand\r\n\r\n&gt; An &#39;impossible&#39; exception. For example, new String(someByteArray, &quot;UTF-8&quot;); declares that it can throw an UnsupportedEncodingException but according to the JVM specification, UTF-8 must always be available. An UnsupportedEncodingException here is about as likely as a ClassNotFoundError when you use a String object, and you don&#39;t catch those either!\r\n\r\nOf course, if you don&#39;t agree, it&#39;s perfectly OK to not use the annotation at all.","title":"Use of Lombok @SneakyThrows annotation","body":"<p>The <a href=\"https://projectlombok.org/features/SneakyThrows\" rel=\"nofollow noreferrer\">Lombok documentation for SneakyThrows</a> mentions some common use cases:</p>\n<blockquote>\n<p>A needlessly strict interface, such as Runnable - whatever exception propagates out of your run() method, checked or not, it will be passed to the Thread's unhandled exception handler. Catching a checked exception and wrapping it in some sort of RuntimeException is only obscuring the real cause of the issue.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>An 'impossible' exception. For example, new String(someByteArray, &quot;UTF-8&quot;); declares that it can throw an UnsupportedEncodingException but according to the JVM specification, UTF-8 must always be available. An UnsupportedEncodingException here is about as likely as a ClassNotFoundError when you use a String object, and you don't catch those either!</p>\n</blockquote>\n<p>Of course, if you don't agree, it's perfectly OK to not use the annotation at all.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1689610122,"creation_date":1689610122,"answer_id":76706309,"question_id":76705502,"body_markdown":"Author of the feature here - this answer is _mostly_ objective, but there is a certain subjective nature to it all - at some point, any language feature is lightly dictatorial about telling people how one &#39;should&#39; program. It cannot be avoided. Ordinarily, opinion isn&#39;t acceptable on SO, but given that this is about lombok, and [A] I wrote this feature, and [B] I remain a core committer on lombok, I guess my opinion _is_ the answer asked for, and this cannot devolve into a war of opinions (except Roel, my co-committer, who by and large stands by these opinions).\r\n\r\n&gt; Usually if there could be an exception, its always good to catch/throw it\r\n\r\nIncorrect. It&#39;s _usually_ good to catch/throw it, but not _always_.\r\n\r\n## A quick review of what it does\r\n\r\nthe concept of the checked exception is __entirely a figment of `javac`&#39;s imagination__. The reason this doesn&#39;t compile:\r\n\r\n```\r\npublic void foo() {\r\n  throw new IOException();\r\n}\r\n```\r\n\r\nis because `javac` has an `if` construct in there that says: I won&#39;t compile this. If you hack `javac` and remove that construct, the resulting class file is _completely fine_. The class verifier (the code in the JVM that checks if executing the code in a class file would cause issues) doesn&#39;t care. The JVM doesn&#39;t care either. It will dutifully run that code and just... throw the exception. &quot;But... it&#39;s not declared!&quot;, yeah, the JVM doesn&#39;t care. It doesn&#39;t know what `throws IOException` means. It&#39;s a comment, as far as `java.exe` is concerned. This explains why languages like kotlin that are targeted to run on the JVM can do what they do (they don&#39;t have checked exceptions - you can throw whatever you like regardless of `throws` clause. Including java-written checked exceptions).\r\n\r\n`@SneakyThrows` is like that: It lets you throw exceptions without declaring that you do so. The exception is not suppressed, or wrapped, or ignored, or modified in any way. `@SneakyThrows` does just one job: Tell _the compiler_ to stop erroring and just get on with it.\r\n\r\nThe specific 2 cases where it isn&#39;t correct to either catch a checked exception, or add it to your `throws` line:\r\n\r\n## Impossible checked exceptions\r\n\r\nThe exception is declared, and therefore, you __must__ write code that handles it (either `catch` it, or stick it in the `throws` clause of your method), however, by way of spec or possibly simply experience and code review you know __for 100% sure__ that the exception cannot possibly happen.\r\n\r\nHere is a trivial example:\r\n\r\n```\r\nnew String(someByteArray, &quot;UTF-8&quot;);\r\n```\r\n\r\nThis code makes a string by treating the provided byte array as containing UTF-8 encoded text. One of the exceptions that this method is declared to throw (and this is a checked exception) is [`UnsupportedEncodingException`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/UnsupportedEncodingException.html).\r\n\r\nHowever, __this is impossible__. The java virtual machine specification __guarantees__ that UTF-8 is available. This code is entirely valid:\r\n\r\n```\r\ntry {\r\n  new String(someByteArray, &quot;UTF-8&quot;);\r\n} catch (UnsupportedEncodingException e) {\r\n  throw new InternalError(&quot;Your JDK is corrupt. Reinstall it. Hard-crashing now because continuing in the face of a corrupt JDK install is asking for trouble&quot;);\r\n  // possibly log that and run System.exit(0) instead!\r\n}\r\n```\r\n\r\nHowever, if we start writing that kind of code, where does it end? Should you write:\r\n\r\n```\r\nString x = ...;\r\ntry {\r\n  x = x.toLowerCase();\r\n} catch (IllegalStateException e) {\r\n  throw new RuntimeError(&quot;Your JDK is corrupt&quot;);\r\n}\r\n```\r\n\r\nThat seems rather silly. Hence, __objectively__, attempting to actually deal with the &#39;impossible unless JDK corrupt&#39; situation of that `UnsupportedEncodingException` is equally silly, so the only subjective thing I am injecting here is that it is silly to try to deal with a corrupt JDK; you really can&#39;t, and if you try, you end up writing untestable non-sequitur try/catches _everywhere_.\r\n\r\nThis kind of thing is exactly where SneakyThrows shines. Because you neither want to write the try/catch, nor do you want to burden callers by listing an exception type that cannot actually ever happen.\r\n\r\n__At the time lombok&#39;s SneakyThrows feature was released__, the `new String(someByteArray, StandardCharsets.UTF_8)` API didn&#39;t exist yet!__\r\n\r\nThe fact that it exists _now_ is a good thing: I&#39;d say that any API that throws a checked exception in cases where the programmer knows it cannot possibly happen, is really cruddy API. I&#39;m glad you now no longer have to deal with it.\r\n\r\nRegardless, plenty of libraries exist where this situation does occur.\r\n\r\n## Underspecced entrypoints\r\n\r\nThis is valid java:\r\n\r\n```\r\npublic static void main(String[] args) throws Exception {}\r\n```\r\n\r\n`main` methods are allowed to do that. I strongly advise all java programmers to get into the habit of doing that. The notion of checked exceptions (as in, callers need to &#39;worry&#39; about them) is great for library functions (any code written with the intent to be understood as an API and not as an implementation, and is to be used by code outside of the direct confines of the team that writes it. That doesn&#39;t necessarily imply &#39;by other people&#39;, but may imply: By another modular layer of the application we are writing).\r\n\r\nIt is silly for application code, though!\r\n\r\nA lot of exceptions are effectively unhandleable. A library has no idea what that even means (e.g. the code of `new FileInputStream` has no idea if one could perhaps handle &#39;file not found&#39; - maybe this is the &#39;file open&#39; dialog of a GUI app and the GUI can simply tell the user they typed a non-existent file name and need to pick something else - that&#39;s handling it). Application code, however, always knows. They can, or they can&#39;t. Often, they can&#39;t.\r\n\r\nSo, what do you do when you get an exception that _you_ cannot handle?\r\n\r\nYou have really only one option: Throw it onward and hope that some layer above you (a caller somewhere in the call chain) can handle it. Any other act __is silly__ and results in bad code, bad behaviour. For example, this is ubiquitous and yet evil:\r\n\r\n```\r\ntry {\r\n stuff;\r\ncatch (Thingie e) {\r\n e.printStackTrace();\r\n}\r\n```\r\n\r\nThis is the java version of basic&#39;s `ON ERROR RESUME NEXT`: When an error occurs, toss half of the info about it in the garbage, make it impossible for any other code to try to deal with it, log it to someplace few folks check, and then _just keep going as if nothing is wrong_, which likely means if something does go wrong, 85 stack traces appear because all code is written like this, and generally &#39;just keep going&#39; when an exception has occurs just means more exceptions will occur soon.\r\n\r\nWhen we speak of entrypoints, which isn&#39;t just `main`, but is also, e.g. for web frameworks, the many many methods that serve as the point where the web framework begins calling _your_ code (i.e. this is the entrypoint handler for the `/users/{username}` URL) are all &#39;entrypoints&#39; and &#39;application code&#39;, and here&#39;s the key insight:\r\n\r\n__It is non-trivial to deal with a generalized, unhandleable-by-the-business-logic error condition__.\r\n\r\nFor example, let&#39;s say you have a web framework entrypoint and the first thing it does is open the database to check the user&#39;s credentials. If the database is just flat out down, what should the SQLException that occurs result in, for the webbrowsing user? Surely &#39;an error message&#39;, but it&#39;s more complicated than that. What you optimally want to happen is:\r\n\r\n* The system gathers pertinent data which isn&#39;t 100% encoded in that exception. It also involves the request parameters for example, that should be quite useful. Perhaps not here (not useful to debug &#39;db is down&#39;), but for many errors, useful.\r\n* The system encrypts all this with a server key into a blob of data.\r\n* The system serves an error page to the user (with code 500) and includes a form that results in an email (our server is down or in trouble, we can&#39;t do the normal thing and let them submit to our server and save it, after all, our server is probably not capable of responding if it&#39;s in dire straits, and it is, if the DB is down!), it includes the encrypted blob. This prevents issues where a hacker can use the stack trace and error relevant info to glean hidden info whilst still letting our dev team decrypt it and figure out what went wrong.\r\n* All this data should also go into a log someplace.\r\n\r\nThat&#39;s decidedly non-trivial! You __do not__ want to have to write all that logic in 5000 separate try/catch blocks all over your code base.\r\n\r\nThe best place to handle such a generalized error response is __in whatever code calls entrypoints__.\r\n\r\nFor `main`, that&#39;s already how it works: You can throw whatever you want, and the way `java.exe` deals with it, (this&#39;d be the thread&#39;s default exception handler) is to print the type, message, stack trace, and causal chain, and then kill that thread.\r\n\r\nMany, many frameworks, however, messed up. For example, the servlet framework requires that you throw `ServletException`. That was silly of them. Lombok&#39;s `@SneakyThrows` can help you by letting you throw these exceptions. Usually (and this includes servlets), it works fine - the servlet entrypoint runners actually catch everything.\r\n\r\nThere is a third useful but less advisable use of SneakyThrows:\r\n\r\n## Milestones\r\n\r\nIt&#39;s less pretty as a codebase, but there are cases where exceptions really can occur, but rarely will (from experience / the situation) and whilst you really ought to catch them and wrap them in a properly typed exception, you&#39;re working towards a milestone release (a proof of concept for example), and whilst you don&#39;t want to write throw-away code, you&#39;re going to leave non-crucial stuff (not crucial for a working first version) documented as &#39;will fix later&#39;. In such cases, sneakythrows is better than all alternatives, because sneakythrows doesn&#39;t mess with the exception at all.\r\n\r\n","title":"Use of Lombok @SneakyThrows annotation","body":"<p>Author of the feature here - this answer is <em>mostly</em> objective, but there is a certain subjective nature to it all - at some point, any language feature is lightly dictatorial about telling people how one 'should' program. It cannot be avoided. Ordinarily, opinion isn't acceptable on SO, but given that this is about lombok, and [A] I wrote this feature, and [B] I remain a core committer on lombok, I guess my opinion <em>is</em> the answer asked for, and this cannot devolve into a war of opinions (except Roel, my co-committer, who by and large stands by these opinions).</p>\n<blockquote>\n<p>Usually if there could be an exception, its always good to catch/throw it</p>\n</blockquote>\n<p>Incorrect. It's <em>usually</em> good to catch/throw it, but not <em>always</em>.</p>\n<h2>A quick review of what it does</h2>\n<p>the concept of the checked exception is <strong>entirely a figment of <code>javac</code>'s imagination</strong>. The reason this doesn't compile:</p>\n<pre><code>public void foo() {\n  throw new IOException();\n}\n</code></pre>\n<p>is because <code>javac</code> has an <code>if</code> construct in there that says: I won't compile this. If you hack <code>javac</code> and remove that construct, the resulting class file is <em>completely fine</em>. The class verifier (the code in the JVM that checks if executing the code in a class file would cause issues) doesn't care. The JVM doesn't care either. It will dutifully run that code and just... throw the exception. &quot;But... it's not declared!&quot;, yeah, the JVM doesn't care. It doesn't know what <code>throws IOException</code> means. It's a comment, as far as <code>java.exe</code> is concerned. This explains why languages like kotlin that are targeted to run on the JVM can do what they do (they don't have checked exceptions - you can throw whatever you like regardless of <code>throws</code> clause. Including java-written checked exceptions).</p>\n<p><code>@SneakyThrows</code> is like that: It lets you throw exceptions without declaring that you do so. The exception is not suppressed, or wrapped, or ignored, or modified in any way. <code>@SneakyThrows</code> does just one job: Tell <em>the compiler</em> to stop erroring and just get on with it.</p>\n<p>The specific 2 cases where it isn't correct to either catch a checked exception, or add it to your <code>throws</code> line:</p>\n<h2>Impossible checked exceptions</h2>\n<p>The exception is declared, and therefore, you <strong>must</strong> write code that handles it (either <code>catch</code> it, or stick it in the <code>throws</code> clause of your method), however, by way of spec or possibly simply experience and code review you know <strong>for 100% sure</strong> that the exception cannot possibly happen.</p>\n<p>Here is a trivial example:</p>\n<pre><code>new String(someByteArray, &quot;UTF-8&quot;);\n</code></pre>\n<p>This code makes a string by treating the provided byte array as containing UTF-8 encoded text. One of the exceptions that this method is declared to throw (and this is a checked exception) is <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/UnsupportedEncodingException.html\" rel=\"noreferrer\"><code>UnsupportedEncodingException</code></a>.</p>\n<p>However, <strong>this is impossible</strong>. The java virtual machine specification <strong>guarantees</strong> that UTF-8 is available. This code is entirely valid:</p>\n<pre><code>try {\n  new String(someByteArray, &quot;UTF-8&quot;);\n} catch (UnsupportedEncodingException e) {\n  throw new InternalError(&quot;Your JDK is corrupt. Reinstall it. Hard-crashing now because continuing in the face of a corrupt JDK install is asking for trouble&quot;);\n  // possibly log that and run System.exit(0) instead!\n}\n</code></pre>\n<p>However, if we start writing that kind of code, where does it end? Should you write:</p>\n<pre><code>String x = ...;\ntry {\n  x = x.toLowerCase();\n} catch (IllegalStateException e) {\n  throw new RuntimeError(&quot;Your JDK is corrupt&quot;);\n}\n</code></pre>\n<p>That seems rather silly. Hence, <strong>objectively</strong>, attempting to actually deal with the 'impossible unless JDK corrupt' situation of that <code>UnsupportedEncodingException</code> is equally silly, so the only subjective thing I am injecting here is that it is silly to try to deal with a corrupt JDK; you really can't, and if you try, you end up writing untestable non-sequitur try/catches <em>everywhere</em>.</p>\n<p>This kind of thing is exactly where SneakyThrows shines. Because you neither want to write the try/catch, nor do you want to burden callers by listing an exception type that cannot actually ever happen.</p>\n<p><strong>At the time lombok's SneakyThrows feature was released</strong>, the <code>new String(someByteArray, StandardCharsets.UTF_8)</code> API didn't exist yet!__</p>\n<p>The fact that it exists <em>now</em> is a good thing: I'd say that any API that throws a checked exception in cases where the programmer knows it cannot possibly happen, is really cruddy API. I'm glad you now no longer have to deal with it.</p>\n<p>Regardless, plenty of libraries exist where this situation does occur.</p>\n<h2>Underspecced entrypoints</h2>\n<p>This is valid java:</p>\n<pre><code>public static void main(String[] args) throws Exception {}\n</code></pre>\n<p><code>main</code> methods are allowed to do that. I strongly advise all java programmers to get into the habit of doing that. The notion of checked exceptions (as in, callers need to 'worry' about them) is great for library functions (any code written with the intent to be understood as an API and not as an implementation, and is to be used by code outside of the direct confines of the team that writes it. That doesn't necessarily imply 'by other people', but may imply: By another modular layer of the application we are writing).</p>\n<p>It is silly for application code, though!</p>\n<p>A lot of exceptions are effectively unhandleable. A library has no idea what that even means (e.g. the code of <code>new FileInputStream</code> has no idea if one could perhaps handle 'file not found' - maybe this is the 'file open' dialog of a GUI app and the GUI can simply tell the user they typed a non-existent file name and need to pick something else - that's handling it). Application code, however, always knows. They can, or they can't. Often, they can't.</p>\n<p>So, what do you do when you get an exception that <em>you</em> cannot handle?</p>\n<p>You have really only one option: Throw it onward and hope that some layer above you (a caller somewhere in the call chain) can handle it. Any other act <strong>is silly</strong> and results in bad code, bad behaviour. For example, this is ubiquitous and yet evil:</p>\n<pre><code>try {\n stuff;\ncatch (Thingie e) {\n e.printStackTrace();\n}\n</code></pre>\n<p>This is the java version of basic's <code>ON ERROR RESUME NEXT</code>: When an error occurs, toss half of the info about it in the garbage, make it impossible for any other code to try to deal with it, log it to someplace few folks check, and then <em>just keep going as if nothing is wrong</em>, which likely means if something does go wrong, 85 stack traces appear because all code is written like this, and generally 'just keep going' when an exception has occurs just means more exceptions will occur soon.</p>\n<p>When we speak of entrypoints, which isn't just <code>main</code>, but is also, e.g. for web frameworks, the many many methods that serve as the point where the web framework begins calling <em>your</em> code (i.e. this is the entrypoint handler for the <code>/users/{username}</code> URL) are all 'entrypoints' and 'application code', and here's the key insight:</p>\n<p><strong>It is non-trivial to deal with a generalized, unhandleable-by-the-business-logic error condition</strong>.</p>\n<p>For example, let's say you have a web framework entrypoint and the first thing it does is open the database to check the user's credentials. If the database is just flat out down, what should the SQLException that occurs result in, for the webbrowsing user? Surely 'an error message', but it's more complicated than that. What you optimally want to happen is:</p>\n<ul>\n<li>The system gathers pertinent data which isn't 100% encoded in that exception. It also involves the request parameters for example, that should be quite useful. Perhaps not here (not useful to debug 'db is down'), but for many errors, useful.</li>\n<li>The system encrypts all this with a server key into a blob of data.</li>\n<li>The system serves an error page to the user (with code 500) and includes a form that results in an email (our server is down or in trouble, we can't do the normal thing and let them submit to our server and save it, after all, our server is probably not capable of responding if it's in dire straits, and it is, if the DB is down!), it includes the encrypted blob. This prevents issues where a hacker can use the stack trace and error relevant info to glean hidden info whilst still letting our dev team decrypt it and figure out what went wrong.</li>\n<li>All this data should also go into a log someplace.</li>\n</ul>\n<p>That's decidedly non-trivial! You <strong>do not</strong> want to have to write all that logic in 5000 separate try/catch blocks all over your code base.</p>\n<p>The best place to handle such a generalized error response is <strong>in whatever code calls entrypoints</strong>.</p>\n<p>For <code>main</code>, that's already how it works: You can throw whatever you want, and the way <code>java.exe</code> deals with it, (this'd be the thread's default exception handler) is to print the type, message, stack trace, and causal chain, and then kill that thread.</p>\n<p>Many, many frameworks, however, messed up. For example, the servlet framework requires that you throw <code>ServletException</code>. That was silly of them. Lombok's <code>@SneakyThrows</code> can help you by letting you throw these exceptions. Usually (and this includes servlets), it works fine - the servlet entrypoint runners actually catch everything.</p>\n<p>There is a third useful but less advisable use of SneakyThrows:</p>\n<h2>Milestones</h2>\n<p>It's less pretty as a codebase, but there are cases where exceptions really can occur, but rarely will (from experience / the situation) and whilst you really ought to catch them and wrap them in a properly typed exception, you're working towards a milestone release (a proof of concept for example), and whilst you don't want to write throw-away code, you're going to leave non-crucial stuff (not crucial for a working first version) documented as 'will fix later'. In such cases, sneakythrows is better than all alternatives, because sneakythrows doesn't mess with the exception at all.</p>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":528,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":76706309,"answer_count":2,"score":3,"last_activity_date":1691602714,"creation_date":1689604256,"question_id":76705502,"body_markdown":"I am trying to use Lombok library in my spring boot application. I came across @SneakyThrows annotation. But I didn&#39;t really get the full use of it. Usually if there could be an exception, it&#39;s always good to catch/throw it and also the caller can handle and catch or throws it, which is a good practice. But using @SneakyThrows we are bypassing it. So what is the real advantage of it ?\r\n\r\nI went over lot of links but it all only says about the behaviour and I didn&#39;t understand the real use case.\r\n","title":"Use of Lombok @SneakyThrows annotation","body":"<p>I am trying to use Lombok library in my spring boot application. I came across @SneakyThrows annotation. But I didn't really get the full use of it. Usually if there could be an exception, it's always good to catch/throw it and also the caller can handle and catch or throws it, which is a good practice. But using @SneakyThrows we are bypassing it. So what is the real advantage of it ?</p>\n<p>I went over lot of links but it all only says about the behaviour and I didn't understand the real use case.</p>\n"},{"tags":["java","immutability","lombok"],"answers":[{"tags":[],"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1691598505,"creation_date":1691597947,"answer_id":76869593,"question_id":76869433,"body_markdown":"The problem is that `tags` is an `Array`, hence a reference type, and arrays are mutable. While it is true that the you can&#39;t change the value of `tags` (e.g., you can&#39;t reassign it to reference a different array), the array it references can be mutated by whoever holds a reference to it (including the `ValueExample` class itself, or the `main` method you created to test this behaviour).\r\n\r\nLeaving reflection aside for a moment (as it provides a &quot;backdoor&quot; that breaks immutability), for a class to be really immutable, all the referenced properties should be immutable too – and Array isn&#39;t – or you might have to resort to techniques like defensive copying.\r\n\r\nAs an additional note, you need to return immutable objects in your getters too. Imagine you make a defensive copy of the `tags` array in your constructor. If you return your copy in the `getTags()`, anyone who can call that getter will also be able to mutate the array (again, because arrays are mutable). So ideally you&#39;d need to make a new copy in both the constructor and in the getter. If the array is big, this can easily become quite expensive... On top of that, each item in the array should be immutable too, otherwise anyone who has access to the array could mutate those objects too.","title":"Lombok Value annotation not working properly for Immutable java class","body":"<p>The problem is that <code>tags</code> is an <code>Array</code>, hence a reference type, and arrays are mutable. While it is true that the you can't change the value of <code>tags</code> (e.g., you can't reassign it to reference a different array), the array it references can be mutated by whoever holds a reference to it (including the <code>ValueExample</code> class itself, or the <code>main</code> method you created to test this behaviour).</p>\n<p>Leaving reflection aside for a moment (as it provides a &quot;backdoor&quot; that breaks immutability), for a class to be really immutable, all the referenced properties should be immutable too – and Array isn't – or you might have to resort to techniques like defensive copying.</p>\n<p>As an additional note, you need to return immutable objects in your getters too. Imagine you make a defensive copy of the <code>tags</code> array in your constructor. If you return your copy in the <code>getTags()</code>, anyone who can call that getter will also be able to mutate the array (again, because arrays are mutable). So ideally you'd need to make a new copy in both the constructor and in the getter. If the array is big, this can easily become quite expensive... On top of that, each item in the array should be immutable too, otherwise anyone who has access to the array could mutate those objects too.</p>\n"},{"comments":[{"owner":{"account_id":986686,"reputation":868,"user_id":1005007,"accept_rate":63,"display_name":"Gep"},"score":0,"creation_date":1692898340,"post_id":76870098,"comment_id":135690228,"body_markdown":"Since the title of that page is &quot;Immutable classes made very easy&quot; I assumed that the @Value annotation would create defensive copies of the array in both constructor and getter in order for the class to be fully immutable.","body":"Since the title of that page is &quot;Immutable classes made very easy&quot; I assumed that the @Value annotation would create defensive copies of the array in both constructor and getter in order for the class to be fully immutable."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1692908710,"post_id":76870098,"comment_id":135692203,"body_markdown":"The title is &quot;@Value&quot;. What you keep quoting is the tag line which, if you compare it to the other feature pages, always contains a funny summary, but should never be taken literally.","body":"The title is &quot;@Value&quot;. What you keep quoting is the tag line which, if you compare it to the other feature pages, always contains a funny summary, but should never be taken literally."},{"owner":{"account_id":986686,"reputation":868,"user_id":1005007,"accept_rate":63,"display_name":"Gep"},"score":0,"creation_date":1693053032,"post_id":76870098,"comment_id":135710787,"body_markdown":"&quot;Tagline: a sentence or short description of what your site is about.&quot; Say what you want, it&#39;s still misleading","body":"&quot;Tagline: a sentence or short description of what your site is about.&quot; Say what you want, it&#39;s still misleading"}],"tags":[],"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691602663,"creation_date":1691602663,"answer_id":76870098,"question_id":76869433,"body_markdown":"Adding on to the answer given by @user2340612:\r\n\r\nThe website you found is NOT the answer to the question &quot;How do I create an immutable class?&quot;.\r\n\r\nIt&#39;s the documentation on @Value, nothing more, nothing less. The only question this site attempts to answer is: &quot;What does @Value do?&quot;","title":"Lombok Value annotation not working properly for Immutable java class","body":"<p>Adding on to the answer given by @user2340612:</p>\n<p>The website you found is NOT the answer to the question &quot;How do I create an immutable class?&quot;.</p>\n<p>It's the documentation on @Value, nothing more, nothing less. The only question this site attempts to answer is: &quot;What does @Value do?&quot;</p>\n"}],"owner":{"account_id":986686,"reputation":868,"user_id":1005007,"accept_rate":63,"display_name":"Gep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691602663,"creation_date":1691596410,"question_id":76869433,"body_markdown":"I was looking to see if it&#39;s possible to create an immutable Java class using Lombok. I found this page on the Lombok website &quot;Immutable classes made very easy&quot;, but I&#39;m not convinced by it: https://projectlombok.org/features/Value\r\n\r\nI have tested it using the sample class they use in that page i.e.\r\n\r\n    @Value\r\n    public class ValueExample {\r\n      String name;\r\n      @With(AccessLevel.PACKAGE) @NonFinal int age;\r\n      double score;\r\n      protected String[] tags;\r\n      \r\n      @ToString(includeFieldNames=true)\r\n      @Value(staticConstructor=&quot;of&quot;)\r\n      public static class Exercise&lt;T&gt; {\r\n        String name;\r\n        T value;\r\n      }\r\n    }\r\n\r\nand wrote a little test:\r\n\r\n    public static void main(String... args) {\r\n\r\n        String tags[] = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};\r\n\r\n        ValueExample t = new ValueExample(&quot;name&quot;, 1, 2.3, tags);\r\n\r\n        System.out.println(&quot;BEFORE:&quot; + Arrays.toString(t.getTags()));\r\n\r\n        String[] tagsToModify = t.getTags();\r\n\r\n        for (int i = 0; i &lt; tags.length; i++) {\r\n            tagsToModify[i] = &quot;?&quot;;\r\n        }\r\n\r\n        System.out.println(&quot;AFTER: &quot; + Arrays.toString(t.getTags()));\r\n    }\r\n\r\nThe output of the test is:\r\n\r\n    BEFORE:[a, b, c]\r\n    AFTER: [?, ?, ?]\r\n\r\nwhich to me means the class in not immutable.\r\nAm I missing something obvious?","title":"Lombok Value annotation not working properly for Immutable java class","body":"<p>I was looking to see if it's possible to create an immutable Java class using Lombok. I found this page on the Lombok website &quot;Immutable classes made very easy&quot;, but I'm not convinced by it: <a href=\"https://projectlombok.org/features/Value\" rel=\"nofollow noreferrer\">https://projectlombok.org/features/Value</a></p>\n<p>I have tested it using the sample class they use in that page i.e.</p>\n<pre><code>@Value\npublic class ValueExample {\n  String name;\n  @With(AccessLevel.PACKAGE) @NonFinal int age;\n  double score;\n  protected String[] tags;\n  \n  @ToString(includeFieldNames=true)\n  @Value(staticConstructor=&quot;of&quot;)\n  public static class Exercise&lt;T&gt; {\n    String name;\n    T value;\n  }\n}\n</code></pre>\n<p>and wrote a little test:</p>\n<pre><code>public static void main(String... args) {\n\n    String tags[] = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};\n\n    ValueExample t = new ValueExample(&quot;name&quot;, 1, 2.3, tags);\n\n    System.out.println(&quot;BEFORE:&quot; + Arrays.toString(t.getTags()));\n\n    String[] tagsToModify = t.getTags();\n\n    for (int i = 0; i &lt; tags.length; i++) {\n        tagsToModify[i] = &quot;?&quot;;\n    }\n\n    System.out.println(&quot;AFTER: &quot; + Arrays.toString(t.getTags()));\n}\n</code></pre>\n<p>The output of the test is:</p>\n<pre><code>BEFORE:[a, b, c]\nAFTER: [?, ?, ?]\n</code></pre>\n<p>which to me means the class in not immutable.\nAm I missing something obvious?</p>\n"},{"tags":["java","mongodb","spring-boot","spring-data-mongodb"],"answers":[{"comments":[{"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"score":0,"creation_date":1691601652,"post_id":76869975,"comment_id":135514945,"body_markdown":"thanks, the mongo query works as expected but I didnt understand what to do with this replaceWith() java function. Should I just paste the entire replace block from mongo query inside this? Or is there any better way to use if we are using spring-data-mongo ?","body":"thanks, the mongo query works as expected but I didnt understand what to do with this replaceWith() java function. Should I just paste the entire replace block from mongo query inside this? Or is there any better way to use if we are using spring-data-mongo ?"},{"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"score":0,"creation_date":1691602032,"post_id":76869975,"comment_id":135515012,"body_markdown":"@jarvo69 Yes. Instead of translating each agregation pipeline to Spring data syntax (which is horrible for the complex queries), just parse them as JSON with `Document.parse()` method.","body":"@jarvo69 Yes. Instead of translating each agregation pipeline to Spring data syntax (which is horrible for the complex queries), just parse them as JSON with <code>Document.parse()</code> method."},{"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"score":0,"creation_date":1691603388,"post_id":76869975,"comment_id":135515251,"body_markdown":"What about this one?\n\n`{\n    $group: {\n      _id: &quot;$_id.storeId&quot;,\n      paymentType: {\n        $push: {\n          &quot;k&quot;: &quot;$_id.paymentType&quot;,\n          &quot;v&quot;: &quot;$total&quot;\n        }\n      },\n      &quot;total&quot;: {\n        $sum: &quot;$total&quot;\n      }\n    }\n  },`\n\nhow do i add this one in java? Can you please provide java equivalent for the same?","body":"What about this one?  <code>{     $group: {       _id: &quot;$_id.storeId&quot;,       paymentType: {         $push: {           &quot;k&quot;: &quot;$_id.paymentType&quot;,           &quot;v&quot;: &quot;$total&quot;         }       },       &quot;total&quot;: {         $sum: &quot;$total&quot;       }     }   },</code>  how do i add this one in java? Can you please provide java equivalent for the same?"},{"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"score":0,"creation_date":1691604057,"post_id":76869975,"comment_id":135515358,"body_markdown":"@jarvo69 Sure. `private static AggregationOperation group1() {return ctx -&gt; Document.parse(put here 1st pipeline)}`, `private static AggregationOperation group2() {return ctx -&gt; Document.parse(put here 2nd pipeline)}`, etc.","body":"@jarvo69 Sure. <code>private static AggregationOperation group1() {return ctx -&gt; Document.parse(put here 1st pipeline)}</code>, <code>private static AggregationOperation group2() {return ctx -&gt; Document.parse(put here 2nd pipeline)}</code>, etc."}],"tags":[],"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691602373,"creation_date":1691601343,"answer_id":76869975,"question_id":76869785,"body_markdown":"## Explanation:\r\n\r\n1. We need to group by 2 parameters (`storeId` + `paymentType`) and sum `paymentType&#39;s` total amount.\r\n2. We sum `total amount` for all `paymentType`s for each `storeId`.\r\n3. We need to use `$arrayToObject` to pivot each `paymentType` into field.\r\n4. With other operators we assamble expected result.\r\n---\r\n    {\r\n       &quot;Total Amount&quot;: NumberDecimal(&quot;250&quot;),\r\n       &quot;cash&quot;: NumberDecimal(&quot;200&quot;),\r\n       &quot;creditCard&quot;: NumberDecimal(&quot;50&quot;),\r\n       &quot;storeId&quot;: &quot;3070&quot;\r\n    }\r\n\r\n**Note:** `cash`, `creditCard`, `check`, etc. are dynamically filled. If any `storeId` has no such payment types, these fields may not be there.\r\n\r\nTry this one:\r\n\r\n    db.collection.aggregate([\r\n      {\r\n        $group: {\r\n          _id: {\r\n            storeId: &quot;$storeId&quot;,\r\n            paymentType: &quot;$paymentType&quot;\r\n          },\r\n          total: {\r\n            $sum: &quot;$total&quot;\r\n          }\r\n        }\r\n      },\r\n      {\r\n        $group: {\r\n          _id: &quot;$_id.storeId&quot;,\r\n          paymentType: {\r\n            $push: {\r\n              &quot;k&quot;: &quot;$_id.paymentType&quot;,\r\n              &quot;v&quot;: &quot;$total&quot;\r\n            }\r\n          },\r\n          &quot;total&quot;: {\r\n            $sum: &quot;$total&quot;\r\n          }\r\n        }\r\n      },\r\n      {\r\n        &quot;$replaceWith&quot;: {\r\n          &quot;$arrayToObject&quot;: {\r\n            &quot;$concatArrays&quot;: [\r\n              &quot;$paymentType&quot;,\r\n              [\r\n                {\r\n                  &quot;k&quot;: &quot;storeId&quot;,\r\n                  &quot;v&quot;: &quot;$_id&quot;\r\n                },\r\n                {\r\n                  &quot;k&quot;: &quot;Total Amount&quot;,\r\n                  &quot;v&quot;: &quot;$total&quot;\r\n                }\r\n              ]\r\n            ]\r\n          }\r\n        }\r\n      }\r\n    ])\r\n[MongoPlayground](https://mongoplayground.net/p/l07lEzwQfTb)\r\n\r\n### Java - complex aggregation pipeline\r\n\r\n    private static AggregationOperation replaceWith() {\r\n        return ctx -&gt; Document.parse(&quot;{&quot; +\r\n            &quot;&#39;$replaceWith&#39;: {&quot; +\r\n                &quot;&#39;$arrayToObject&#39;: {&quot; +\r\n                    &quot;...&quot; +\r\n                &quot;}&quot; +\r\n            &quot;}&quot;+\r\n        &quot;}&quot;)\r\n    }","title":"Java spring-mongo-data Mongodb query for group and projection logic","body":"<h2>Explanation:</h2>\n<ol>\n<li>We need to group by 2 parameters (<code>storeId</code> + <code>paymentType</code>) and sum <code>paymentType's</code> total amount.</li>\n<li>We sum <code>total amount</code> for all <code>paymentType</code>s for each <code>storeId</code>.</li>\n<li>We need to use <code>$arrayToObject</code> to pivot each <code>paymentType</code> into field.</li>\n<li>With other operators we assamble expected result.</li>\n</ol>\n<hr />\n<pre><code>{\n   &quot;Total Amount&quot;: NumberDecimal(&quot;250&quot;),\n   &quot;cash&quot;: NumberDecimal(&quot;200&quot;),\n   &quot;creditCard&quot;: NumberDecimal(&quot;50&quot;),\n   &quot;storeId&quot;: &quot;3070&quot;\n}\n</code></pre>\n<p><strong>Note:</strong> <code>cash</code>, <code>creditCard</code>, <code>check</code>, etc. are dynamically filled. If any <code>storeId</code> has no such payment types, these fields may not be there.</p>\n<p>Try this one:</p>\n<pre><code>db.collection.aggregate([\n  {\n    $group: {\n      _id: {\n        storeId: &quot;$storeId&quot;,\n        paymentType: &quot;$paymentType&quot;\n      },\n      total: {\n        $sum: &quot;$total&quot;\n      }\n    }\n  },\n  {\n    $group: {\n      _id: &quot;$_id.storeId&quot;,\n      paymentType: {\n        $push: {\n          &quot;k&quot;: &quot;$_id.paymentType&quot;,\n          &quot;v&quot;: &quot;$total&quot;\n        }\n      },\n      &quot;total&quot;: {\n        $sum: &quot;$total&quot;\n      }\n    }\n  },\n  {\n    &quot;$replaceWith&quot;: {\n      &quot;$arrayToObject&quot;: {\n        &quot;$concatArrays&quot;: [\n          &quot;$paymentType&quot;,\n          [\n            {\n              &quot;k&quot;: &quot;storeId&quot;,\n              &quot;v&quot;: &quot;$_id&quot;\n            },\n            {\n              &quot;k&quot;: &quot;Total Amount&quot;,\n              &quot;v&quot;: &quot;$total&quot;\n            }\n          ]\n        ]\n      }\n    }\n  }\n])\n</code></pre>\n<p><a href=\"https://mongoplayground.net/p/l07lEzwQfTb\" rel=\"nofollow noreferrer\">MongoPlayground</a></p>\n<h3>Java - complex aggregation pipeline</h3>\n<pre><code>private static AggregationOperation replaceWith() {\n    return ctx -&gt; Document.parse(&quot;{&quot; +\n        &quot;'$replaceWith': {&quot; +\n            &quot;'$arrayToObject': {&quot; +\n                &quot;...&quot; +\n            &quot;}&quot; +\n        &quot;}&quot;+\n    &quot;}&quot;)\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"score":0,"creation_date":1691601844,"post_id":76870010,"comment_id":135514976,"body_markdown":"but hardcoding `.is(&quot;cash&quot;)` and `.is(&quot;creditCard&quot;)` is not desirable. tomorrow there could possibly be more types of payment options then we will again need to add more conditions right?","body":"but hardcoding <code>.is(&quot;cash&quot;)</code> and <code>.is(&quot;creditCard&quot;)</code> is not desirable. tomorrow there could possibly be more types of payment options then we will again need to add more conditions right?"},{"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"score":0,"creation_date":1691607384,"post_id":76870010,"comment_id":135515922,"body_markdown":"getting error &quot;field name cannot start with $&quot;","body":"getting error &quot;field name cannot start with $&quot;"}],"tags":[],"owner":{"account_id":20953847,"reputation":66,"user_id":15394888,"display_name":"Kavinda"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691601736,"creation_date":1691601736,"answer_id":76870010,"question_id":76869785,"body_markdown":"If you want to group and add up some data from your MongoDB collection. Here&#39;s how you can do it using Java with Spring Data MongoDB:\r\n\r\n\r\n**If You want to group the data by the &quot;storeId&quot; and sum the amounts for different payment types (&quot;cash&quot; and &quot;creditCard&quot;). Here&#39;s how you can do that:**\r\n\r\n    import org.springframework.data.mongodb.core.aggregation.Aggregation;\r\n    import org.springframework.data.mongodb.core.aggregation.GroupOperation;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    \r\n    // ...\r\n    \r\n    GroupOperation groupingLogic() {\r\n        return Aggregation.group(&quot;storeId&quot;)\r\n            .sum(\r\n                ConditionalOperators.when(Criteria.where(&quot;paymentType&quot;).is(&quot;cash&quot;)).then(&quot;$total.$numberDecimal&quot;).otherwise(0)\r\n            ).as(&quot;cashPayment&quot;)\r\n            .sum(\r\n                ConditionalOperators.when(Criteria.where(&quot;paymentType&quot;).is(&quot;creditCard&quot;)).then(&quot;$total.$numberDecimal&quot;).otherwise(0)\r\n            ).as(&quot;cardPayment&quot;)\r\n            .sum(&quot;$total.$numberDecimal&quot;).as(&quot;totalAmountCashCard&quot;);\r\n    }\r\n\r\n\r\n\r\n**To show in your format. Here&#39;s how you can do that:**\r\n\r\n\r\n    import org.springframework.data.mongodb.core.aggregation.ProjectionOperation;\r\n\r\n    \r\n    ProjectionOperation projectionLogic() {\r\n        return Aggregation.project()\r\n            .and(&quot;storeId&quot;).as(&quot;StoreId&quot;)\r\n            .and(&quot;cashPayment&quot;).as(&quot;Cash Payment&quot;)\r\n            .and(&quot;cardPayment&quot;).as(&quot;Card Payment&quot;)\r\n            .and(&quot;totalAmountCashCard&quot;).as(&quot;Total Amount Cash + Card&quot;);\r\n    }\r\n\r\n**Putting It All Together:**\r\n\r\n\r\n    import org.springframework.data.mongodb.core.MongoTemplate;\r\n    import org.springframework.data.mongodb.core.aggregation.Aggregation;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.stereotype.Service;\r\n    import java.util.List;\r\n    \r\n    @Service\r\n    public class YourService {\r\n    \r\n        private final MongoTemplate mongoTemplate;\r\n    \r\n        public YourService(MongoTemplate mongoTemplate) {\r\n            this.mongoTemplate = mongoTemplate;\r\n        }\r\n    \r\n        public List&lt;YourOutputType&gt; getGroupedData() {\r\n            Aggregation aggregation = Aggregation.newAggregation(\r\n                groupingLogic(),\r\n                projectionLogic()\r\n            );\r\n    \r\n            return mongoTemplate.aggregate(aggregation, &quot;yourCollectionName&quot;, YourOutputType.class).getMappedResults();\r\n        }\r\n    }\r\n\r\n**Remember to replace yourCollectionName with the actual name** of your MongoDB collection and YourOutputType with the appropriate class that matches the expected output.\r\n\r\n","title":"Java spring-mongo-data Mongodb query for group and projection logic","body":"<p>If you want to group and add up some data from your MongoDB collection. Here's how you can do it using Java with Spring Data MongoDB:</p>\n<p><strong>If You want to group the data by the &quot;storeId&quot; and sum the amounts for different payment types (&quot;cash&quot; and &quot;creditCard&quot;). Here's how you can do that:</strong></p>\n<pre><code>import org.springframework.data.mongodb.core.aggregation.Aggregation;\nimport org.springframework.data.mongodb.core.aggregation.GroupOperation;\nimport org.springframework.data.mongodb.core.query.Criteria;\n\n// ...\n\nGroupOperation groupingLogic() {\n    return Aggregation.group(&quot;storeId&quot;)\n        .sum(\n            ConditionalOperators.when(Criteria.where(&quot;paymentType&quot;).is(&quot;cash&quot;)).then(&quot;$total.$numberDecimal&quot;).otherwise(0)\n        ).as(&quot;cashPayment&quot;)\n        .sum(\n            ConditionalOperators.when(Criteria.where(&quot;paymentType&quot;).is(&quot;creditCard&quot;)).then(&quot;$total.$numberDecimal&quot;).otherwise(0)\n        ).as(&quot;cardPayment&quot;)\n        .sum(&quot;$total.$numberDecimal&quot;).as(&quot;totalAmountCashCard&quot;);\n}\n</code></pre>\n<p><strong>To show in your format. Here's how you can do that:</strong></p>\n<pre><code>import org.springframework.data.mongodb.core.aggregation.ProjectionOperation;\n\n\nProjectionOperation projectionLogic() {\n    return Aggregation.project()\n        .and(&quot;storeId&quot;).as(&quot;StoreId&quot;)\n        .and(&quot;cashPayment&quot;).as(&quot;Cash Payment&quot;)\n        .and(&quot;cardPayment&quot;).as(&quot;Card Payment&quot;)\n        .and(&quot;totalAmountCashCard&quot;).as(&quot;Total Amount Cash + Card&quot;);\n}\n</code></pre>\n<p><strong>Putting It All Together:</strong></p>\n<pre><code>import org.springframework.data.mongodb.core.MongoTemplate;\nimport org.springframework.data.mongodb.core.aggregation.Aggregation;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.stereotype.Service;\nimport java.util.List;\n\n@Service\npublic class YourService {\n\n    private final MongoTemplate mongoTemplate;\n\n    public YourService(MongoTemplate mongoTemplate) {\n        this.mongoTemplate = mongoTemplate;\n    }\n\n    public List&lt;YourOutputType&gt; getGroupedData() {\n        Aggregation aggregation = Aggregation.newAggregation(\n            groupingLogic(),\n            projectionLogic()\n        );\n\n        return mongoTemplate.aggregate(aggregation, &quot;yourCollectionName&quot;, YourOutputType.class).getMappedResults();\n    }\n}\n</code></pre>\n<p><strong>Remember to replace yourCollectionName with the actual name</strong> of your MongoDB collection and YourOutputType with the appropriate class that matches the expected output.</p>\n"}],"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76870010,"answer_count":2,"score":0,"last_activity_date":1691602373,"creation_date":1691599608,"question_id":76869785,"body_markdown":"I have below 3 sample records:\r\n\r\n        {\r\n          &quot;_id&quot; : &quot;0cc5c468-2105-11ee-ad68-15d467e62by4d&quot;,\r\n          &quot;storeId&quot; : &quot;3070&quot;,\r\n          &quot;paymentType&quot; : &quot;cash&quot;,\r\n          &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;100&quot;}\r\n        },\r\n    {\r\n          &quot;_id&quot; : &quot;1111111-2105-11ee-ad68-15d467e62by4d&quot;,\r\n          &quot;storeId&quot; : &quot;3070&quot;,\r\n          &quot;paymentType&quot; : &quot;cash&quot;,\r\n          &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;100&quot;}\r\n        },\r\n        {\r\n          &quot;_id&quot; : &quot;0cc5c468-2105-11ee-ad68-15d467e62by4d&quot;,\r\n          &quot;storeId&quot; : &quot;3070&quot;,\r\n          &quot;paymentType&quot; : &quot;creditCard&quot;,\r\n          &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;50&quot;}\r\n        }\r\n\r\n\r\nI am trying to write some grouping and projection logic in which the desired output from above sample data should be as below:\r\n\r\n\r\n    StoreId | Cash Payment | Card Payment | Total Amount Cash + Card\r\n    3070        200               50                250\r\n\r\n\r\nThe last column can ofcourse be ignored but i need this kind of output from mongodb in java.\r\nI have tried many things and below is the code I have so far which is not giving desired output, it gives me two separate records for card payment and cash payment types. \r\n\r\n    GroupOperation groupingLogic() {\r\n            return group(&quot;storeId&quot;, &quot;paymentType&quot;)\r\n                    .first(&quot;storeId&quot;).as(&quot;storeId&quot;)\r\n                    .first(&quot;paymentType&quot;).as(&quot;paymentType&quot;)\r\n                    .sum(TOTAL).as(TOTAL);\r\n        }\r\n\r\nI am not sure how to get output as expected above with java mongodb code . \r\n\r\nPlease someone help.","title":"Java spring-mongo-data Mongodb query for group and projection logic","body":"<p>I have below 3 sample records:</p>\n<pre><code>    {\n      &quot;_id&quot; : &quot;0cc5c468-2105-11ee-ad68-15d467e62by4d&quot;,\n      &quot;storeId&quot; : &quot;3070&quot;,\n      &quot;paymentType&quot; : &quot;cash&quot;,\n      &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;100&quot;}\n    },\n{\n      &quot;_id&quot; : &quot;1111111-2105-11ee-ad68-15d467e62by4d&quot;,\n      &quot;storeId&quot; : &quot;3070&quot;,\n      &quot;paymentType&quot; : &quot;cash&quot;,\n      &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;100&quot;}\n    },\n    {\n      &quot;_id&quot; : &quot;0cc5c468-2105-11ee-ad68-15d467e62by4d&quot;,\n      &quot;storeId&quot; : &quot;3070&quot;,\n      &quot;paymentType&quot; : &quot;creditCard&quot;,\n      &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;50&quot;}\n    }\n</code></pre>\n<p>I am trying to write some grouping and projection logic in which the desired output from above sample data should be as below:</p>\n<pre><code>StoreId | Cash Payment | Card Payment | Total Amount Cash + Card\n3070        200               50                250\n</code></pre>\n<p>The last column can ofcourse be ignored but i need this kind of output from mongodb in java.\nI have tried many things and below is the code I have so far which is not giving desired output, it gives me two separate records for card payment and cash payment types.</p>\n<pre><code>GroupOperation groupingLogic() {\n        return group(&quot;storeId&quot;, &quot;paymentType&quot;)\n                .first(&quot;storeId&quot;).as(&quot;storeId&quot;)\n                .first(&quot;paymentType&quot;).as(&quot;paymentType&quot;)\n                .sum(TOTAL).as(TOTAL);\n    }\n</code></pre>\n<p>I am not sure how to get output as expected above with java mongodb code .</p>\n<p>Please someone help.</p>\n"},{"tags":["java","spring-boot","docker-compose","open-source","hotswap"],"owner":{"account_id":29193720,"reputation":11,"user_id":22365332,"display_name":"Ricardo A."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691602232,"creation_date":1691602232,"question_id":76870063,"body_markdown":"I&#39;m working on an open-source project called DLCM (link). The backend is built with Spring Boot and is running inside a Docker container. My development environment is VS Code, and I&#39;m sharing volumes between my host machine and the Docker container to reflect the code changes.\r\n\r\nHowever, when I make changes to the code, I currently have to rebuild everything, which is time-consuming. To remedy this, I integrated the Spring Boot DevTools into my project:\r\n\r\n```\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;optional&gt;true&lt;/optional&gt;\r\n &lt;/dependency&gt;\r\n```\r\n\r\n  \r\nI run the project within the Docker container using:\r\n\r\n```\r\nmvn -f /app/DLCM-Solution/pom.xml spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.config.location=/app/administration.properties&quot; -Dlicense.skipCheckLicense\r\n```\r\n\r\nUnfortunately, even with DevTools integrated, hot reloading (hot swap) isn&#39;t functioning as expected. Here&#39;s the Docker Compose configuration for the backend:\r\n\r\n```\r\ndlcm-administration:\r\n    image: development-dlcm-backend-image\r\n    # image: maven:3.6-openjdk-11\r\n    # image: $DOCKER_REGISTRY/dlcm-solution:$DLCM_SOLUTION_VERSION\r\n    container_name: light-administration\r\n    restart: always\r\n    volumes:\r\n      - ~/.m2:/root/.m2\r\n      - /home/ricardo/inuits/fair-vault/poc/fairvault-common/DLCM-Backend:/app # Mount source code\r\n      - /etc/timezone:/etc/timezone:ro\r\n      - dlcm-light-administration-tmp-volume:/tmp\r\n      - dlcm-light-home-volume:/home/dlcm/:rw\r\n      - /home/ricardo/inuits/fair-vault/dlcm-demo-docker-compose/dlcm-light/administration.properties:/app/administration.properties\r\n    command: mvn -f /app/DLCM-Solution/pom.xml spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.config.location=/app/administration.properties&quot; -Dlicense.skipCheckLicense\r\n    # command: tail -f /dev/null\r\n    ports:\r\n      - &#39;$IP_ADDRESS:$DLCM_ADMINISTRATION_PORT:$DLCM_ADMINISTRATION_INTERNAL_PORT&#39;\r\n    networks:\r\n      - lightnet\r\n      - infranet\r\n    mem_limit: 8g\r\n```\r\n\r\nI expect the code to hot swap as I make changes in my local development environment and to automatically rebuild inside the container. I chose this Docker setup to utilize its networking features and to streamline the setup process for future developers.\r\n\r\nHas anyone encountered and resolved a similar issue? Any pointers would be greatly appreciated.","title":"Hot swap not working for Spring Boot project inside Docker container","body":"<p>I'm working on an open-source project called DLCM (link). The backend is built with Spring Boot and is running inside a Docker container. My development environment is VS Code, and I'm sharing volumes between my host machine and the Docker container to reflect the code changes.</p>\n<p>However, when I make changes to the code, I currently have to rebuild everything, which is time-consuming. To remedy this, I integrated the Spring Boot DevTools into my project:</p>\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;optional&gt;true&lt;/optional&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>I run the project within the Docker container using:</p>\n<pre><code>mvn -f /app/DLCM-Solution/pom.xml spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.config.location=/app/administration.properties&quot; -Dlicense.skipCheckLicense\n</code></pre>\n<p>Unfortunately, even with DevTools integrated, hot reloading (hot swap) isn't functioning as expected. Here's the Docker Compose configuration for the backend:</p>\n<pre><code>dlcm-administration:\n    image: development-dlcm-backend-image\n    # image: maven:3.6-openjdk-11\n    # image: $DOCKER_REGISTRY/dlcm-solution:$DLCM_SOLUTION_VERSION\n    container_name: light-administration\n    restart: always\n    volumes:\n      - ~/.m2:/root/.m2\n      - /home/ricardo/inuits/fair-vault/poc/fairvault-common/DLCM-Backend:/app # Mount source code\n      - /etc/timezone:/etc/timezone:ro\n      - dlcm-light-administration-tmp-volume:/tmp\n      - dlcm-light-home-volume:/home/dlcm/:rw\n      - /home/ricardo/inuits/fair-vault/dlcm-demo-docker-compose/dlcm-light/administration.properties:/app/administration.properties\n    command: mvn -f /app/DLCM-Solution/pom.xml spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.config.location=/app/administration.properties&quot; -Dlicense.skipCheckLicense\n    # command: tail -f /dev/null\n    ports:\n      - '$IP_ADDRESS:$DLCM_ADMINISTRATION_PORT:$DLCM_ADMINISTRATION_INTERNAL_PORT'\n    networks:\n      - lightnet\n      - infranet\n    mem_limit: 8g\n</code></pre>\n<p>I expect the code to hot swap as I make changes in my local development environment and to automatically rebuild inside the container. I chose this Docker setup to utilize its networking features and to streamline the setup process for future developers.</p>\n<p>Has anyone encountered and resolved a similar issue? Any pointers would be greatly appreciated.</p>\n"},{"tags":["java","multithreading","java-native-interface","jvm-hotspot","numa"],"comments":[{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1573763557,"post_id":58866021,"comment_id":104001531,"body_markdown":"Have you tried `ForkJoinPool` instead of `ExecutorService`? 25% CPU utilization is really low if your problem is CPU bound.","body":"Have you tried <code>ForkJoinPool</code> instead of <code>ExecutorService</code>? 25% CPU utilization is really low if your problem is CPU bound."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573763628,"post_id":58866021,"comment_id":104001560,"body_markdown":"I have not. Why do you think that this would solve the problem?","body":"I have not. Why do you think that this would solve the problem?"},{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":1,"creation_date":1573763756,"post_id":58866021,"comment_id":104001611,"body_markdown":"Your problem sounds like something that should push CPU to 100% and yet you are on 25%. For some problems `ForkJoinPool` is more efficient than manual scheduling.","body":"Your problem sounds like something that should push CPU to 100% and yet you are on 25%. For some problems <code>ForkJoinPool</code> is more efficient than manual scheduling."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":2,"creation_date":1573763850,"post_id":58866021,"comment_id":104001649,"body_markdown":"Cycling through Hotspot versions, have you made sure you are using the &quot;server&quot; and not &quot;client&quot; version? What is your CPU utilization on Linux? Also, Windows uptime of several days is impressive! What is your secret? :P","body":"Cycling through Hotspot versions, have you made sure you are using the &quot;server&quot; and not &quot;client&quot; version? What is your CPU utilization on Linux? Also, Windows uptime of several days is impressive! What is your secret? :P"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573763934,"post_id":58866021,"comment_id":104001679,"body_markdown":"Yes, it does use 100% (or close to it) on Linux but not on Windows.","body":"Yes, it does use 100% (or close to it) on Linux but not on Windows."},{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1573764015,"post_id":58866021,"comment_id":104001710,"body_markdown":"Could it be that your Windows server has an antivirus? Can you test on a server with a minimal Windows installation?","body":"Could it be that your Windows server has an antivirus? Can you test on a server with a minimal Windows installation?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573764112,"post_id":58866021,"comment_id":104001748,"body_markdown":"@erickson Do you mean the server flag? I have tried that, it has no effect.","body":"@erickson Do you mean the server flag? I have tried that, it has no effect."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573764216,"post_id":58866021,"comment_id":104001797,"body_markdown":"@Karol Dowbecki: I ran it on several AWS Windows 2019 up to an expensive bare-metal as well as on a workstation. Except for whatever default is provided through Windows none of those have AV scanners running.","body":"@Karol Dowbecki: I ran it on several AWS Windows 2019 up to an expensive bare-metal as well as on a workstation. Except for whatever default is provided through Windows none of those have AV scanners running."},{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":3,"creation_date":1573764481,"post_id":58866021,"comment_id":104001900,"body_markdown":"Maybe try using [Xperf](https://learn.microsoft.com/en-us/windows-hardware/test/wpt/) to generate a [FlameGraph](http://www.brendangregg.com/flamegraphs.html). This could give you some insight what is the CPU doing (hopefully both user and kernel mode), but I never did it on Windows.","body":"Maybe try using <a href=\"https://learn.microsoft.com/en-us/windows-hardware/test/wpt/\" rel=\"nofollow noreferrer\">Xperf</a> to generate a <a href=\"http://www.brendangregg.com/flamegraphs.html\" rel=\"nofollow noreferrer\">FlameGraph</a>. This could give you some insight what is the CPU doing (hopefully both user and kernel mode), but I never did it on Windows."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573764699,"post_id":58866021,"comment_id":104001987,"body_markdown":"@KarolDowbecki Thanks for the reference. I will check it out, but the CPU is busy with the call of a native function more than 90% of the time.","body":"@KarolDowbecki Thanks for the reference. I will check it out, but the CPU is busy with the call of a native function more than 90% of the time."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1573765868,"post_id":58866021,"comment_id":104002487,"body_markdown":"Okay, do you mean that 90% of the 25% of CPU the process is using is in the native call, or that the CPU is at 100% with 90% in native code and 10% in Java?","body":"Okay, do you mean that 90% of the 25% of CPU the process is using is in the native call, or that the CPU is at 100% with 90% in native code and 10% in Java?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573767237,"post_id":58866021,"comment_id":104003077,"body_markdown":"@erickson 90% of the 25% CPU (on Windows) as well as 90% of the 100% CPU (on Linux) are in the native call","body":"@erickson 90% of the 25% CPU (on Windows) as well as 90% of the 100% CPU (on Linux) are in the native call"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573937394,"post_id":58866021,"comment_id":104054923,"body_markdown":"@KarolDowbecki The `ForkJoinPool` brings no relief.","body":"@KarolDowbecki The <code>ForkJoinPool</code> brings no relief."},{"owner":{"account_id":6333754,"reputation":2065,"user_id":4917881,"display_name":"aventurin"},"score":0,"creation_date":1573945036,"post_id":58866021,"comment_id":104056570,"body_markdown":"Did you also try different memory allocators in your solver?","body":"Did you also try different memory allocators in your solver?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574013518,"post_id":58866021,"comment_id":104069779,"body_markdown":"@aventurin How do I try different memory allocators and what are those?","body":"@aventurin How do I try different memory allocators and what are those?"},{"owner":{"account_id":6333754,"reputation":2065,"user_id":4917881,"display_name":"aventurin"},"score":0,"creation_date":1574018526,"post_id":58866021,"comment_id":104071327,"body_markdown":"They are responsible for dynamic memory allocation (`malloc`, `realloc`). When your solver code makes use of `malloc`, `realloc`, etc. then, in a long-running process the type of allocator may make a difference. It may also explain differences in various operating systems due to memory fragmentation and cache hit rates. See https://en.wikipedia.org/wiki/C_dynamic_memory_allocation","body":"They are responsible for dynamic memory allocation (<code>malloc</code>, <code>realloc</code>). When your solver code makes use of <code>malloc</code>, <code>realloc</code>, etc. then, in a long-running process the type of allocator may make a difference. It may also explain differences in various operating systems due to memory fragmentation and cache hit rates. See <a href=\"https://en.wikipedia.org/wiki/C_dynamic_memory_allocation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C_dynamic_memory_allocation</a>"},{"owner":{"account_id":5513230,"reputation":3625,"user_id":4378853,"accept_rate":100,"display_name":"GotoFinal"},"score":0,"creation_date":1574076137,"post_id":58866021,"comment_id":104088822,"body_markdown":"It&#39;s hard to guess without some example code. How do you read/write data your are saving? Maybe some additional read/write operations are the issue. Or try disabling all the windows defender functionalities - this sometimes can really slow down some applications.","body":"It&#39;s hard to guess without some example code. How do you read/write data your are saving? Maybe some additional read/write operations are the issue. Or try disabling all the windows defender functionalities - this sometimes can really slow down some applications."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574141295,"post_id":58866021,"comment_id":104115066,"body_markdown":"@GotoFinal I will give this some more thought, but it&#39;s quite difficult to isolate into a code snippet (or several even). The application runs in-memory and Windows Defender is turned off.","body":"@GotoFinal I will give this some more thought, but it&#39;s quite difficult to isolate into a code snippet (or several even). The application runs in-memory and Windows Defender is turned off."},{"owner":{"account_id":17015362,"reputation":151,"user_id":12309398,"display_name":"S.R."},"score":1,"creation_date":1574227881,"post_id":58866021,"comment_id":104152093,"body_markdown":"@Nils, both of runs (unix/win) uses same interface to call native library? I ask, because it looks like different. Like: win uses jna, linux jni.","body":"@Nils, both of runs (unix/win) uses same interface to call native library? I ask, because it looks like different. Like: win uses jna, linux jni."},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1574286455,"post_id":58866021,"comment_id":104182827,"body_markdown":"Hmm, @Nils didn&#39;t state whether he uses different native interfaces, but it sure looks like it was the case. Could definitely be the reason for the &quot;order of magnitude&quot; difference... https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#how-does-jna-performance-compare-to-custom-jni . But anyway I think he would have mentioned it if he employed different libraries on Linux and Windows.","body":"Hmm, @Nils didn&#39;t state whether he uses different native interfaces, but it sure looks like it was the case. Could definitely be the reason for the &quot;order of magnitude&quot; difference... <a href=\"https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#how-does-jna-performance-compare-to-custom-jni\" rel=\"nofollow noreferrer\">github.com/java-native-access/jna/blob/master/www/&hellip;</a> . But anyway I think he would have mentioned it if he employed different libraries on Linux and Windows."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574347919,"post_id":58866021,"comment_id":104208500,"body_markdown":"@S.R. Both implementations use the same interface on both systems.","body":"@S.R. Both implementations use the same interface on both systems."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574348460,"post_id":58866021,"comment_id":104208843,"body_markdown":"@ChristophJohn Here is a [link](https://github.com/quantego/clp-java) to one of the libraries I am using. The profiler does not identify repeated function calls as bottleneck. Most of the computation time is spend inside `CLPNative.javaclpInitialSolve(Pointer&lt;CLPSimplex&gt;)`","body":"@ChristophJohn Here is a <a href=\"https://github.com/quantego/clp-java\" rel=\"nofollow noreferrer\">link</a> to one of the libraries I am using. The profiler does not identify repeated function calls as bottleneck. Most of the computation time is spend inside <code>CLPNative.javaclpInitialSolve(Pointer&lt;CLPSimplex&gt;)</code>"},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1574374622,"post_id":58866021,"comment_id":104221701,"body_markdown":"I don&#39;t really have a solution without checking all that code. But here some things that I am asking myself: 1. You say that &quot;Garbage Collection is not an issue since the application does not create and de-reference a lot of objects&quot;.  OTOH you say &quot;Solution times for a subproblem are in the ms range&quot; and that solution times for the overall problem range from hours to days. So don&#39;t you create a **lot** of objects actually (for the subproblems)? Maybe you could activate GC logging to check. Or did you already verify in jvisualvm that GC is not the problem?","body":"I don&#39;t really have a solution without checking all that code. But here some things that I am asking myself: 1. You say that &quot;Garbage Collection is not an issue since the application does not create and de-reference a lot of objects&quot;.  OTOH you say &quot;Solution times for a subproblem are in the ms range&quot; and that solution times for the overall problem range from hours to days. So don&#39;t you create a <b>lot</b> of objects actually (for the subproblems)? Maybe you could activate GC logging to check. Or did you already verify in jvisualvm that GC is not the problem?"},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1574374645,"post_id":58866021,"comment_id":104221709,"body_markdown":"2. Since you are using native memory quite heavily, I&#39;d suggest you do some tracking to check. Example is here: https://www.baeldung.com/native-memory-tracking-in-jvm#9-nmt-over-time Please note that enabling NMT will result in about 5-10% performance drop (https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr007.html)  3. Are you passing the subproblems all at once to the Executor? Are you using a blocking task queue? Are you using a bounded task queue?","body":"2. Since you are using native memory quite heavily, I&#39;d suggest you do some tracking to check. Example is here: <a href=\"https://www.baeldung.com/native-memory-tracking-in-jvm#9-nmt-over-time\" rel=\"nofollow noreferrer\">baeldung.com/native-memory-tracking-in-jvm#9-nmt-over-time</a> Please note that enabling NMT will result in about 5-10% performance drop (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr007.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot&zwnj;&#8203;/&hellip;</a>)  3. Are you passing the subproblems all at once to the Executor? Are you using a blocking task queue? Are you using a bounded task queue?"},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1574374650,"post_id":58866021,"comment_id":104221714,"body_markdown":"4. I assume you retrieve the results of all the Callables that you submit? Or are you cancelling some of the Callables?   5. Are you heavily logging in your application so that I/O load might be slowing down the process?  Good luck ;)","body":"4. I assume you retrieve the results of all the Callables that you submit? Or are you cancelling some of the Callables?   5. Are you heavily logging in your application so that I/O load might be slowing down the process?  Good luck ;)"},{"owner":{"account_id":5786048,"reputation":1847,"user_id":4565235,"display_name":"David Lilljegren"},"score":0,"creation_date":1574443326,"post_id":58866021,"comment_id":104248256,"body_markdown":"Try this to see how many cores Java think it has   Runtime.getRuntime().availableProcessors();","body":"Try this to see how many cores Java think it has   Runtime.getRuntime().availableProcessors();"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574491850,"post_id":58866021,"comment_id":104259957,"body_markdown":"@ChristophJohn 1. The subproblems are not dereference but reused so GC really is not an issue; 2. Will look into this; 3. I am using a `BlockingQueue`; 4. I only use the callable to catch exceptions when a subproblem fails and do not cancel them, but runnables behave the same; 5. No. Thanks :)","body":"@ChristophJohn 1. The subproblems are not dereference but reused so GC really is not an issue; 2. Will look into this; 3. I am using a <code>BlockingQueue</code>; 4. I only use the callable to catch exceptions when a subproblem fails and do not cancel them, but runnables behave the same; 5. No. Thanks :)"},{"owner":{"account_id":2788462,"reputation":1275,"user_id":2399236,"accept_rate":80,"display_name":"barteks2x"},"score":0,"creation_date":1593263374,"post_id":58866021,"comment_id":110721156,"body_markdown":"I ran into what looks like a very much the same issue and no solution so far. I have a trivially parallelizable workload, I&#39;m submitting a lot of small tasks to an executor service (each taking milliseconds), with BlockingQueue in it so limit the amount of tasks submitted, CPU usage stuck at about 25% on windows, with a few orders of magnitudes slower processing (as much as 1000x slower on windows), with the vast majority of the work being spent in GZIP. I&#39;m going to be working on creating a small test case that reproduces it as the application is already fairly small. Any solutions?","body":"I ran into what looks like a very much the same issue and no solution so far. I have a trivially parallelizable workload, I&#39;m submitting a lot of small tasks to an executor service (each taking milliseconds), with BlockingQueue in it so limit the amount of tasks submitted, CPU usage stuck at about 25% on windows, with a few orders of magnitudes slower processing (as much as 1000x slower on windows), with the vast majority of the work being spent in GZIP. I&#39;m going to be working on creating a small test case that reproduces it as the application is already fairly small. Any solutions?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1593307695,"post_id":58866021,"comment_id":110733515,"body_markdown":"@barteks2x Difficult to say if it is really the same issue, because GZIP probably involves harddrive operations, which linux/win may handle differently. For my case, I guess that the issue is the high memory load that is happening off-heap, which slows down Java multithreading under Windows. I worked around that problem by decreasing the memory footprint.","body":"@barteks2x Difficult to say if it is really the same issue, because GZIP probably involves harddrive operations, which linux/win may handle differently. For my case, I guess that the issue is the high memory load that is happening off-heap, which slows down Java multithreading under Windows. I worked around that problem by decreasing the memory footprint."},{"owner":{"account_id":2788462,"reputation":1275,"user_id":2399236,"accept_rate":80,"display_name":"barteks2x"},"score":0,"creation_date":1593437860,"post_id":58866021,"comment_id":110773265,"body_markdown":"@Nils While I can&#39;t say for sure, I found 2 issues reported and marked as fixed forever ago https://bugs.java.com/bugdatabase/view_bug.do?bug_id=5043044 and https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6206933 that may seem relevant. This is highly speculative, but the way array access through JNI is implemented may cause issues with multiple threads being involved. And to be clear about my case of GZIP - all IO is done separately and is not a bottleneck.","body":"@Nils While I can&#39;t say for sure, I found 2 issues reported and marked as fixed forever ago <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=5043044\" rel=\"nofollow noreferrer\">bugs.java.com/bugdatabase/view_bug.do?bug_id=5043044</a> and <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6206933\" rel=\"nofollow noreferrer\">bugs.java.com/bugdatabase/view_bug.do?bug_id=6206933</a> that may seem relevant. This is highly speculative, but the way array access through JNI is implemented may cause issues with multiple threads being involved. And to be clear about my case of GZIP - all IO is done separately and is not a bottleneck."}],"answers":[{"comments":[{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574492040,"post_id":58985491,"comment_id":104259990,"body_markdown":"You think? There is enough free memory. Why would Windows start swapping? Anyways, thanks.","body":"You think? There is enough free memory. Why would Windows start swapping? Anyways, thanks."},{"owner":{"account_id":10354378,"reputation":632,"user_id":7636881,"display_name":"Sam Washington"},"score":0,"creation_date":1574610128,"post_id":58985491,"comment_id":104284654,"body_markdown":"At least on my laptop windows is swapping sometimes minimized applications, even with enough memory","body":"At least on my laptop windows is swapping sometimes minimized applications, even with enough memory"}],"tags":[],"owner":{"account_id":10354378,"reputation":632,"user_id":7636881,"display_name":"Sam Washington"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574380340,"creation_date":1574380340,"answer_id":58985491,"question_id":58866021,"body_markdown":"Sounds like windows is caching some memory to pagefile, after its being untouched for some time, and thats why the CPU is bottlenecked by the Disk speed\r\n\r\nYou can verify it with Process explorer and check how much memory is cached","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>Sounds like windows is caching some memory to pagefile, after its being untouched for some time, and thats why the CPU is bottlenecked by the Disk speed</p>\n\n<p>You can verify it with Process explorer and check how much memory is cached</p>\n"},{"comments":[{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574492293,"post_id":58998757,"comment_id":104260043,"body_markdown":"I use streams in other parts of the software, but in this case tasks are created while traversing a graph. I would not know how to wrap this using streams.","body":"I use streams in other parts of the software, but in this case tasks are created while traversing a graph. I would not know how to wrap this using streams."},{"owner":{"account_id":2725644,"reputation":4730,"user_id":2350799,"accept_rate":83,"display_name":"xcesco"},"score":0,"creation_date":1574551531,"post_id":58998757,"comment_id":104273945,"body_markdown":"Can you traverse the graph, build a list and then using streams?","body":"Can you traverse the graph, build a list and then using streams?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574574940,"post_id":58998757,"comment_id":104277220,"body_markdown":"Parallel streams are only syntactic sugar for a ForkJoinPool. That I have tried (see @KarolDowbecki comment above).","body":"Parallel streams are only syntactic sugar for a ForkJoinPool. That I have tried (see @KarolDowbecki comment above)."}],"tags":[],"owner":{"account_id":2725644,"reputation":4730,"user_id":2350799,"accept_rate":83,"display_name":"xcesco"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574442362,"creation_date":1574442362,"answer_id":58998757,"question_id":58866021,"body_markdown":"I think this performance difference is due to how the O.S. manages the threads. JVM hide all OS difference. There are many sites where you can read about it, like [this][1], for example. But it does not mean that the difference disappears. \r\n\r\nI suppose you are running on Java 8+ JVM. Due to this fact, I suggest you to try to use stream and functional programming features. Functional programming is very usefully when you have many small independent problems and you want easily switch from sequential to parallel execution. The good news is that you don&#39;t have to define a policy to determine how many threads do you have to manage (like with the ExecutorService). Just for example (taken from [here][2]):\r\n\r\n```java\r\npackage com.mkyong.java8;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.stream.IntStream;\r\nimport java.util.stream.Stream;\r\n\r\npublic class ParallelExample4 {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        long count = Stream.iterate(0, n -&gt; n + 1)\r\n                .limit(1_000_000)\r\n                //.parallel()   with this 23s, without this 1m 10s\r\n                .filter(ParallelExample4::isPrime)\r\n                .peek(x -&gt; System.out.format(&quot;%s\\t&quot;, x))\r\n                .count();\r\n\r\n        System.out.println(&quot;\\nTotal: &quot; + count);\r\n\r\n    }\r\n\r\n    public static boolean isPrime(int number) {\r\n        if (number &lt;= 1) return false;\r\n        return !IntStream.rangeClosed(2, number / 2).anyMatch(i -&gt; number % i == 0);\r\n    }\r\n\r\n}\r\n```\r\n\r\n&gt; Result:\r\n&gt; \r\n&gt; For normal streams, it takes 1 minute 10 seconds. For parallel\r\n&gt; streams, it takes 23 seconds. P.S Tested with i7-7700, 16G RAM,\r\n&gt; WIndows 10\r\n\r\nSo, I suggest you read about function programming, stream, lambda function in Java and try to implement a small number of test with your code (adapted to work in this new context).\r\n\r\n  [1]: https://forums.fedoraforum.org/showthread.php?206263-Java-Multi-threading-2x-faster-on-Linux-than-Windows-why\r\n  [2]: https://www.mkyong.com/java8/java-8-parallel-streams-examples/","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>I think this performance difference is due to how the O.S. manages the threads. JVM hide all OS difference. There are many sites where you can read about it, like <a href=\"https://forums.fedoraforum.org/showthread.php?206263-Java-Multi-threading-2x-faster-on-Linux-than-Windows-why\" rel=\"nofollow noreferrer\">this</a>, for example. But it does not mean that the difference disappears. </p>\n\n<p>I suppose you are running on Java 8+ JVM. Due to this fact, I suggest you to try to use stream and functional programming features. Functional programming is very usefully when you have many small independent problems and you want easily switch from sequential to parallel execution. The good news is that you don't have to define a policy to determine how many threads do you have to manage (like with the ExecutorService). Just for example (taken from <a href=\"https://www.mkyong.com/java8/java-8-parallel-streams-examples/\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.mkyong.java8;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.IntStream;\nimport java.util.stream.Stream;\n\npublic class ParallelExample4 {\n\n    public static void main(String[] args) {\n\n        long count = Stream.iterate(0, n -&gt; n + 1)\n                .limit(1_000_000)\n                //.parallel()   with this 23s, without this 1m 10s\n                .filter(ParallelExample4::isPrime)\n                .peek(x -&gt; System.out.format(\"%s\\t\", x))\n                .count();\n\n        System.out.println(\"\\nTotal: \" + count);\n\n    }\n\n    public static boolean isPrime(int number) {\n        if (number &lt;= 1) return false;\n        return !IntStream.rangeClosed(2, number / 2).anyMatch(i -&gt; number % i == 0);\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Result:</p>\n  \n  <p>For normal streams, it takes 1 minute 10 seconds. For parallel\n  streams, it takes 23 seconds. P.S Tested with i7-7700, 16G RAM,\n  WIndows 10</p>\n</blockquote>\n\n<p>So, I suggest you read about function programming, stream, lambda function in Java and try to implement a small number of test with your code (adapted to work in this new context).</p>\n"},{"comments":[{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574574348,"post_id":59009815,"comment_id":104277140,"body_markdown":"This looks very interesting! I am a bit hesitant to go this far (yet) for two reasons: 1) there will be a performance overhead of serializing and sending objects through sockets; 2) if I want to serialize everything this includes all dependencies that are linked in a task - it would be a bit of work to rewrite the code - nonetheless, thank you for the useful link(s).","body":"This looks very interesting! I am a bit hesitant to go this far (yet) for two reasons: 1) there will be a performance overhead of serializing and sending objects through sockets; 2) if I want to serialize everything this includes all dependencies that are linked in a task - it would be a bit of work to rewrite the code - nonetheless, thank you for the useful link(s)."},{"owner":{"account_id":5907672,"reputation":356,"user_id":4648862,"display_name":"geri"},"score":0,"creation_date":1575108365,"post_id":59009815,"comment_id":104460625,"body_markdown":"I fully share your concerns and redesigning the code would be some efforts. While traversing the graph you would need to introduce a threshold for the number of threads when it&#39;s time to split work into a new sub process. To address 2) have a look at Java memory-mapped file (java.nio.MappedByteBuffer), with that you could effectively share data between processes, for example your graph data. Godspeed :)","body":"I fully share your concerns and redesigning the code would be some efforts. While traversing the graph you would need to introduce a threshold for the number of threads when it&#39;s time to split work into a new sub process. To address 2) have a look at Java memory-mapped file (java.nio.MappedByteBuffer), with that you could effectively share data between processes, for example your graph data. Godspeed :)"}],"tags":[],"owner":{"account_id":5907672,"reputation":356,"user_id":4648862,"display_name":"geri"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1574526946,"creation_date":1574526946,"answer_id":59009815,"question_id":58866021,"body_markdown":"For Windows the number of threads per process is limited by the address space of the process (see also [Mark Russinovich - Pushing the Limits of Windows: Processes and Threads][1]). Think this causes side effects when it comes close to the limits (slow down of context switches, fragmentation...). For Windows I would try to divide the work load to a set of processes. For a similar issue that I had years ago I implemented a Java library to do this more conveniently (Java 8), have a look if you like: [Library to spawn tasks in an external process][2].\r\n\r\n\r\n  [1]: https://blogs.technet.microsoft.com/markrussinovich/2009/07/05/pushing-the-limits-of-windows-processes-and-threads/\r\n  [2]: https://github.com/gerixx/gfork","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>For Windows the number of threads per process is limited by the address space of the process (see also <a href=\"https://blogs.technet.microsoft.com/markrussinovich/2009/07/05/pushing-the-limits-of-windows-processes-and-threads/\" rel=\"nofollow noreferrer\">Mark Russinovich - Pushing the Limits of Windows: Processes and Threads</a>). Think this causes side effects when it comes close to the limits (slow down of context switches, fragmentation...). For Windows I would try to divide the work load to a set of processes. For a similar issue that I had years ago I implemented a Java library to do this more conveniently (Java 8), have a look if you like: <a href=\"https://github.com/gerixx/gfork\" rel=\"nofollow noreferrer\">Library to spawn tasks in an external process</a>.</p>\n"},{"comments":[{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574573084,"post_id":59011045,"comment_id":104276990,"body_markdown":"I have added a screenshot of the task manager for an execution that is representative of this problem. The application itself creates as many threads as there are physical cores on the machine. Java contributes a little more than 50 threads to that figure. As already said VisualVM says all threads are busy (green). They just don&#39;t push the CPU to the limit on Windows. They do on Linux.","body":"I have added a screenshot of the task manager for an execution that is representative of this problem. The application itself creates as many threads as there are physical cores on the machine. Java contributes a little more than 50 threads to that figure. As already said VisualVM says all threads are busy (green). They just don&#39;t push the CPU to the limit on Windows. They do on Linux."},{"owner":{"account_id":7130892,"reputation":700,"user_id":5452170,"display_name":"Xiao-Feng Li"},"score":0,"creation_date":1574640895,"post_id":59011045,"comment_id":104292372,"body_markdown":"@Nils I suspect you don&#39;t really have all the threads busy at the **same** time, but actually only 9 - 10 of them. They are scheduled randomly across all the cores, hence you have the 9/44 = 20% utilization in average. Can you use Java threads directly rather than ExecutorService to see the difference? It is not difficult to create 44 threads, and each grabbing the Runnable/Callable from a task pool/queue. (Although VisualVM shows all Java threads are busy, the reality can be that the 44 threads are scheduled quickly so that all of them get a chance to run in the sampling period of VisualVM.)","body":"@Nils I suspect you don&#39;t really have all the threads busy at the <b>same</b> time, but actually only 9 - 10 of them. They are scheduled randomly across all the cores, hence you have the 9/44 = 20% utilization in average. Can you use Java threads directly rather than ExecutorService to see the difference? It is not difficult to create 44 threads, and each grabbing the Runnable/Callable from a task pool/queue. (Although VisualVM shows all Java threads are busy, the reality can be that the 44 threads are scheduled quickly so that all of them get a chance to run in the sampling period of VisualVM.)"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574704344,"post_id":59011045,"comment_id":104317845,"body_markdown":"That’s a thought and something that I actually did at some point. In my implementation, I also made sure that native access is local to each thread, but this made no difference at all.","body":"That’s a thought and something that I actually did at some point. In my implementation, I also made sure that native access is local to each thread, but this made no difference at all."}],"tags":[],"owner":{"account_id":7130892,"reputation":700,"user_id":5452170,"display_name":"Xiao-Feng Li"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574535138,"creation_date":1574535138,"answer_id":59011045,"question_id":58866021,"body_markdown":"Would you please post the system statistics? Task manager is good enough to provide some clue if that is the only tool available. It can easily tell if your tasks are waiting for IO - which sounds like the culprit based on what you described. It may be due to certain memory management issue, or the library may write some temporary data to the disk, etc. \r\n\r\nWhen you are saying 25% of CPU utilization, do you mean only a few cores are busy working at the same time? (It can be that all the cores works from time to time, but not simultaneously.) Would you check how many threads (or processes) are really created in the system? Is the number always bigger than the number of cores? \r\n\r\nIf there are enough threads, are many of them idle waiting for something? If true, you can try to interrupt (or attach a debugger) to see what they are waiting for. ","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>Would you please post the system statistics? Task manager is good enough to provide some clue if that is the only tool available. It can easily tell if your tasks are waiting for IO - which sounds like the culprit based on what you described. It may be due to certain memory management issue, or the library may write some temporary data to the disk, etc. </p>\n\n<p>When you are saying 25% of CPU utilization, do you mean only a few cores are busy working at the same time? (It can be that all the cores works from time to time, but not simultaneously.) Would you check how many threads (or processes) are really created in the system? Is the number always bigger than the number of cores? </p>\n\n<p>If there are enough threads, are many of them idle waiting for something? If true, you can try to interrupt (or attach a debugger) to see what they are waiting for. </p>\n"},{"tags":[],"owner":{"account_id":244340,"reputation":8860,"user_id":517073,"accept_rate":87,"display_name":"Stepan Yakovenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691601649,"creation_date":1691601649,"answer_id":76870003,"question_id":58866021,"body_markdown":"If you are endlessly starting and finishing new threads, this might be the reason. Reuse threads by means of pools, for example with FixedThreadPool:\r\n\r\n```\r\nExecutorService executorService = Executors.newFixedThreadPool(10);\r\nFuture&lt;String&gt; future = executorService.submit(() -&gt; &quot;Hello World&quot;);\r\n// some operations\r\nString result = future.get();\r\n```","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>If you are endlessly starting and finishing new threads, this might be the reason. Reuse threads by means of pools, for example with FixedThreadPool:</p>\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(10);\nFuture&lt;String&gt; future = executorService.submit(() -&gt; &quot;Hello World&quot;);\n// some operations\nString result = future.get();\n</code></pre>\n"}],"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"comment_count":30,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3729,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":5,"score":18,"last_activity_date":1691601649,"creation_date":1573763353,"question_id":58866021,"body_markdown":"I am working on a Java application for solving a class of numerical optimization problems - large-scale linear programming problems to be more precise. A single problem can be split up into smaller subproblems that can solved in parallel. Since there are more subproblems than CPU cores, I use an ExecutorService and define each subproblem as a Callable that gets submitted to the ExecutorService. Solving a subproblem requires calling a native library - a linear programming solver in this case. \r\n\r\n**Problem**\r\n\r\nI can run the application on Unix and on Windows systems with up to 44 physical cores and up to 256g memory, but computation times on Windows are an order of magnitude higher than on Linux for large problems. Windows not only requires substantially more memory, but CPU utilization over time drops from 25% in the beginning to 5% after a few hours. Here is a screenshot of the task manager in Windows:\r\n\r\n[![Task Manager CPU utilization][1]][1]\r\n\r\n**Observations**\r\n\r\n- Solution times for large instances of the overall problem range from hours to days and consume up to 32g of memory (on Unix). Solution times for a subproblem are in the ms range.\r\n- I do not encounter this issue on small problems that take only a few minutes to solve.  \r\n- Linux uses both sockets out-of-the-box, whereas Windows requires me to explicitly activate memory interleaving in the BIOS so that the application utilizes both cores. Whether of not I do this has no effect on the deterioration of overall CPU utilization over time though.\r\n- When I look at the threads in VisualVM all pool threads are running, none are on wait or else.\r\n- According to VisualVM, 90% CPU time is spend on a native function call (solving a small linear program)\r\n- Garbage Collection is not an issue since the application does not create and de-reference a lot of objects. Also, most memory seems to be allocated off-heap. 4g of heap are sufficient on Linux and 8g on Windows for the largest instance.\r\n\r\n**What I&#39;ve tried**\r\n\r\n- all sorts of JVM args, high XMS, high metaspace, UseNUMA flag, other GCs. \r\n- different JVMs (Hotspot 8, 9, 10, 11). \r\n- different native libraries of different linear programming solvers (CLP, Xpress, Cplex, Gurobi). \r\n\r\n**Questions**\r\n\r\n- What drives the performance difference between Linux and Windows of a large multi-threaded Java application that makes heavy use of native calls?\r\n- Is there anything that I can change in the implementation that would help Windows, for example, should I avoid using an ExecutorService that receives thousands of Callables and do what instead?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CPT1m.png","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>I am working on a Java application for solving a class of numerical optimization problems - large-scale linear programming problems to be more precise. A single problem can be split up into smaller subproblems that can solved in parallel. Since there are more subproblems than CPU cores, I use an ExecutorService and define each subproblem as a Callable that gets submitted to the ExecutorService. Solving a subproblem requires calling a native library - a linear programming solver in this case. </p>\n\n<p><strong>Problem</strong></p>\n\n<p>I can run the application on Unix and on Windows systems with up to 44 physical cores and up to 256g memory, but computation times on Windows are an order of magnitude higher than on Linux for large problems. Windows not only requires substantially more memory, but CPU utilization over time drops from 25% in the beginning to 5% after a few hours. Here is a screenshot of the task manager in Windows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CPT1m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CPT1m.png\" alt=\"Task Manager CPU utilization\"></a></p>\n\n<p><strong>Observations</strong></p>\n\n<ul>\n<li>Solution times for large instances of the overall problem range from hours to days and consume up to 32g of memory (on Unix). Solution times for a subproblem are in the ms range.</li>\n<li>I do not encounter this issue on small problems that take only a few minutes to solve.  </li>\n<li>Linux uses both sockets out-of-the-box, whereas Windows requires me to explicitly activate memory interleaving in the BIOS so that the application utilizes both cores. Whether of not I do this has no effect on the deterioration of overall CPU utilization over time though.</li>\n<li>When I look at the threads in VisualVM all pool threads are running, none are on wait or else.</li>\n<li>According to VisualVM, 90% CPU time is spend on a native function call (solving a small linear program)</li>\n<li>Garbage Collection is not an issue since the application does not create and de-reference a lot of objects. Also, most memory seems to be allocated off-heap. 4g of heap are sufficient on Linux and 8g on Windows for the largest instance.</li>\n</ul>\n\n<p><strong>What I've tried</strong></p>\n\n<ul>\n<li>all sorts of JVM args, high XMS, high metaspace, UseNUMA flag, other GCs. </li>\n<li>different JVMs (Hotspot 8, 9, 10, 11). </li>\n<li>different native libraries of different linear programming solvers (CLP, Xpress, Cplex, Gurobi). </li>\n</ul>\n\n<p><strong>Questions</strong></p>\n\n<ul>\n<li>What drives the performance difference between Linux and Windows of a large multi-threaded Java application that makes heavy use of native calls?</li>\n<li>Is there anything that I can change in the implementation that would help Windows, for example, should I avoid using an ExecutorService that receives thousands of Callables and do what instead?</li>\n</ul>\n"},{"tags":["java","spring-boot","unit-testing","controller-tests"],"comments":[{"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"score":1,"creation_date":1623968640,"post_id":62890075,"comment_id":120235974,"body_markdown":"I’m so surprised that there aren’t more people with this problem. MockBean is basically unusable with multiple Integration test classes.","body":"I’m so surprised that there aren’t more people with this problem. MockBean is basically unusable with multiple Integration test classes."}],"answers":[{"comments":[{"owner":{"account_id":1276474,"reputation":173,"user_id":1231624,"display_name":"Kyroy"},"score":1,"creation_date":1594805461,"post_id":62891992,"comment_id":111252499,"body_markdown":"I also tried to use RestAssuredMockMvc, but had a lot of other problems.\nI was so annoyed from the tests that I now refactored to MockMvc, after your comment. At least this works. Still very weird that is does not work.","body":"I also tried to use RestAssuredMockMvc, but had a lot of other problems. I was so annoyed from the tests that I now refactored to MockMvc, after your comment. At least this works. Still very weird that is does not work."},{"owner":{"account_id":7812117,"reputation":2519,"user_id":5908014,"display_name":"tpschmidt"},"score":0,"creation_date":1594807724,"post_id":62891992,"comment_id":111253767,"body_markdown":"I&#39;m sure you&#39;re not doing anything wrong by going with this approach :) Happy that it worked out. If you&#39;re going for e2e tests against your actual service, you can go again for RestAssured.","body":"I&#39;m sure you&#39;re not doing anything wrong by going with this approach :) Happy that it worked out. If you&#39;re going for e2e tests against your actual service, you can go again for RestAssured."}],"tags":[],"owner":{"account_id":7812117,"reputation":2519,"user_id":5908014,"display_name":"tpschmidt"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1594720045,"creation_date":1594718784,"answer_id":62891992,"question_id":62890075,"body_markdown":"It would be much easier and way faster to just use [MockMvc][1].\r\n\r\nYou can just create a standalone setup for your desired controller and do additional configuration (like setting exception resolvers). Also you&#39;re able to inject your mocks easily:\r\n\r\n    @Before\r\n    public void init() {\r\n      MyController myController = new MyController(mock1, mock2, ...);\r\n      MockMvc mockMvc = \r\n      MockMvcBuilders.standaloneSetup(myController)\r\n                     .setHandlerExceptionResolvers(...)\r\n                     .build();\r\n    }\r\n\r\nAfterwards you can easily call your endpoints:\r\n\r\n    MvcResult result = mockMvc.perform(\r\n                get(&quot;/someApi&quot;))\r\n                 .andExpect(status().isOk)\r\n                 .andReturn();\r\n\r\nAdditional validation on the response can be done like you already know it.\r\n\r\n**Edit**: As a side note - this is designed to explicitly test your web layer. If you want to go for some kind of integration test going further down in your application stack, also covering business logic, this is not the right approach.\r\n\r\n  [1]: https://spring.io/guides/gs/testing-web/","title":"@SpringBootTest: @MockBean not injected when multiple test classes","body":"<p>It would be much easier and way faster to just use <a href=\"https://spring.io/guides/gs/testing-web/\" rel=\"nofollow noreferrer\">MockMvc</a>.</p>\n<p>You can just create a standalone setup for your desired controller and do additional configuration (like setting exception resolvers). Also you're able to inject your mocks easily:</p>\n<pre><code>@Before\npublic void init() {\n  MyController myController = new MyController(mock1, mock2, ...);\n  MockMvc mockMvc = \n  MockMvcBuilders.standaloneSetup(myController)\n                 .setHandlerExceptionResolvers(...)\n                 .build();\n}\n</code></pre>\n<p>Afterwards you can easily call your endpoints:</p>\n<pre><code>MvcResult result = mockMvc.perform(\n            get(&quot;/someApi&quot;))\n             .andExpect(status().isOk)\n             .andReturn();\n</code></pre>\n<p>Additional validation on the response can be done like you already know it.</p>\n<p><strong>Edit</strong>: As a side note - this is designed to explicitly test your web layer. If you want to go for some kind of integration test going further down in your application stack, also covering business logic, this is not the right approach.</p>\n"},{"tags":[],"owner":{"account_id":2031794,"reputation":393,"user_id":1815284,"display_name":"ouid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691601365,"creation_date":1691601365,"answer_id":76869979,"question_id":62890075,"body_markdown":"Since there was no answer given to &quot;Why is Spring not reloading the context with the mocks?&quot; question and I ran into it myself, here is my understanding of why it is the case.\r\n\r\nThe reason why Spring doesn&#39;t reload the context in case there are multiple tests using Spring&#39;s `ApplicationContext`, e.g., multiple `@SpringBootTest` tests is [Context Caching][1]:\r\n\r\n&gt; Once the TestContext framework loads an `ApplicationContext` (or `WebApplicationContext`) for a test, that context is cached and reused for all subsequent tests that declare the same unique context configuration within the same test suite.\r\n\r\n&gt; An `ApplicationContext` can be uniquely identified by the combination of configuration parameters that is used to load it. Consequently, the unique combination of configuration parameters is used to generate a key under which the context is cached.\r\n\r\nAnd in your case the key was the same for both cases. Therefore, even though `@MockBean protected FooService mockFooService` is correctly injected in `FooControllerTest`, it won&#39;t be injected in the controller under the test -  the controller will get an instance of `FooService` from the `ApplicationContext` of `PotatoControllerTest`, which will have an actual instance of the service injected.\r\n\r\n**Option 1**\r\n\r\nAs the documentation suggests, you can work around this behaviour by configuring different context keys for different test classes by either using different profiles or different `ContextConfiguration`s for different tests.\r\n\r\n```java\r\n@ContextConfiguration(classes = MockedServiceConfiguration.class)\r\nclass FooControllerTest {\r\n  @Autowired\r\n  FooService fooService; // this is a mocked bean that&#39;s injected in FooController and FooControllerTest\r\n}\r\n\r\n@TestConfiguration\r\nclass MockedServiceConfiguration {\r\n  @MockBean\r\n  FooService mockedService;\r\n}\r\n\r\n\r\n@ContextConfiguration(classes = OtherServiceConfiguration.class)\r\nclass BarControllerTest {\r\n  \r\n}\r\n\r\n\r\n@TestConfiguration\r\nclass OtherServiceConfiguration {\r\n  @Bean\r\n  public FooService getService() {\r\n   return new FooService(); // can probably also be @Autowired from the Spring context if it&#39;s declared as @Component or @Service\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Option 2**\r\n\r\n\r\nIf you can get away with a mocked service in both tests, you can also avoid using `@MockBean` altogether and define a regular `@Bean` which is also a mock:\r\n\r\n```java\r\n@SpringBootTest(classes = FooTestConfiguration.class)\r\nclass FooControllerTest {\r\n  @Autowired\r\n  FooService fooService; // Mockito#verify should work as expected\r\n}\r\n\r\n@SpringBootTest(classes = FooTestConfiguration.class)\r\nclass BarControllerTest {\r\n\r\n}\r\n\r\n@TestConfiguration\r\nclass FooTestConfiguration {\r\n  @Bean\r\n  public FooService getService() {\r\n    return Mockito.mock(FooService.class);\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Option 3**\r\n\r\nAnother alternative could be to use reflection to set `FooController`&#39;s `fooService` field to reference the mocked bean before executing the test, e.g., in `@BeforeAll` method.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/testing/testcontext-framework/ctx-management/caching.html","title":"@SpringBootTest: @MockBean not injected when multiple test classes","body":"<p>Since there was no answer given to &quot;Why is Spring not reloading the context with the mocks?&quot; question and I ran into it myself, here is my understanding of why it is the case.</p>\n<p>The reason why Spring doesn't reload the context in case there are multiple tests using Spring's <code>ApplicationContext</code>, e.g., multiple <code>@SpringBootTest</code> tests is <a href=\"https://docs.spring.io/spring-framework/reference/testing/testcontext-framework/ctx-management/caching.html\" rel=\"nofollow noreferrer\">Context Caching</a>:</p>\n<blockquote>\n<p>Once the TestContext framework loads an <code>ApplicationContext</code> (or <code>WebApplicationContext</code>) for a test, that context is cached and reused for all subsequent tests that declare the same unique context configuration within the same test suite.</p>\n</blockquote>\n<blockquote>\n<p>An <code>ApplicationContext</code> can be uniquely identified by the combination of configuration parameters that is used to load it. Consequently, the unique combination of configuration parameters is used to generate a key under which the context is cached.</p>\n</blockquote>\n<p>And in your case the key was the same for both cases. Therefore, even though <code>@MockBean protected FooService mockFooService</code> is correctly injected in <code>FooControllerTest</code>, it won't be injected in the controller under the test -  the controller will get an instance of <code>FooService</code> from the <code>ApplicationContext</code> of <code>PotatoControllerTest</code>, which will have an actual instance of the service injected.</p>\n<p><strong>Option 1</strong></p>\n<p>As the documentation suggests, you can work around this behaviour by configuring different context keys for different test classes by either using different profiles or different <code>ContextConfiguration</code>s for different tests.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ContextConfiguration(classes = MockedServiceConfiguration.class)\nclass FooControllerTest {\n  @Autowired\n  FooService fooService; // this is a mocked bean that's injected in FooController and FooControllerTest\n}\n\n@TestConfiguration\nclass MockedServiceConfiguration {\n  @MockBean\n  FooService mockedService;\n}\n\n\n@ContextConfiguration(classes = OtherServiceConfiguration.class)\nclass BarControllerTest {\n  \n}\n\n\n@TestConfiguration\nclass OtherServiceConfiguration {\n  @Bean\n  public FooService getService() {\n   return new FooService(); // can probably also be @Autowired from the Spring context if it's declared as @Component or @Service\n  }\n}\n\n</code></pre>\n<p><strong>Option 2</strong></p>\n<p>If you can get away with a mocked service in both tests, you can also avoid using <code>@MockBean</code> altogether and define a regular <code>@Bean</code> which is also a mock:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = FooTestConfiguration.class)\nclass FooControllerTest {\n  @Autowired\n  FooService fooService; // Mockito#verify should work as expected\n}\n\n@SpringBootTest(classes = FooTestConfiguration.class)\nclass BarControllerTest {\n\n}\n\n@TestConfiguration\nclass FooTestConfiguration {\n  @Bean\n  public FooService getService() {\n    return Mockito.mock(FooService.class);\n  }\n}\n\n</code></pre>\n<p><strong>Option 3</strong></p>\n<p>Another alternative could be to use reflection to set <code>FooController</code>'s <code>fooService</code> field to reference the mocked bean before executing the test, e.g., in <code>@BeforeAll</code> method.</p>\n"}],"owner":{"account_id":1276474,"reputation":173,"user_id":1231624,"display_name":"Kyroy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1814,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":62891992,"answer_count":2,"score":7,"last_activity_date":1691601365,"creation_date":1594711729,"question_id":62890075,"body_markdown":"I want to write controller tests that also test my annotations. What I&#39;ve read so far is that RestAssured one of the ways to go.\r\n\r\nIt works smoothly when I only have one controller test in place. However, when having 2 or more controller test classes in place, the @MockBeans seem to not be used properly.\r\nDepending on the test execution order, all tests from the first test class succeed, and all others fail.\r\n\r\nIn the following test run, the PotatoControllerTest was executed first, and then the FooControllerTest.\r\n\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@ActiveProfiles({&quot;test&quot;, &quot;httptest&quot;})\r\nclass FooControllerTest {\r\n\r\n    @MockBean\r\n    protected FooService mockFooService;\r\n\r\n    @MockBean\r\n    protected BarService mockBarService;\r\n\r\n    @LocalServerPort\r\n    protected int port;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        RestAssured.port = port;\r\n        RestAssured.authentication = basic(TestSecurityConfiguration.ADMIN_USERNAME, TestSecurityConfiguration.ADMIN_PASSWORD);\r\n        RestAssured.requestSpecification = new RequestSpecBuilder()\r\n                .setContentType(ContentType.JSON)\r\n                .setAccept(ContentType.JSON)\r\n                .build();\r\n    }\r\n\r\n    @SneakyThrows\r\n    @Test\r\n    void deleteFooNotExists() {\r\n        final Foo foo = TestUtils.generateTestFoo();\r\n        Mockito.doThrow(new DoesNotExistException(&quot;missing&quot;)).when(mockFooService).delete(foo.getId(), foo.getVersion());\r\n\r\n        RestAssured.given()\r\n                .when().delete(&quot;/v1/foo/{id}/{version}&quot;, foo.getId(), foo.getVersion())\r\n                .then()\r\n                .statusCode(HttpStatus.NOT_FOUND.value());\r\n        Mockito.verify(mockFooService, times(1)).delete(foo.getId(), foo.getVersion());\r\n    }\r\n\r\n...\r\n}\r\n```\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@ActiveProfiles({&quot;test&quot;, &quot;httptest&quot;})\r\nclass PotatoControllerTest {\r\n\r\n    @MockBean\r\n    protected PotatoService mockPotatoService;\r\n\r\n    @LocalServerPort\r\n    protected int port;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        RestAssured.port = port;\r\n        RestAssured.authentication = basic(TestSecurityConfiguration.ADMIN_USERNAME, TestSecurityConfiguration.ADMIN_PASSWORD);\r\n        RestAssured.requestSpecification = new RequestSpecBuilder()\r\n                .setContentType(ContentType.JSON)\r\n                .setAccept(ContentType.JSON)\r\n                .build();\r\n    }\r\n\r\n...\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\nWanted but not invoked:\r\nfooService bean.delete(\r\n    &quot;10e76ae4-ec1b-49ce-b162-8a5c587de2a8&quot;,\r\n    &quot;06db13f1-c4cd-435d-9693-b94c26503d40&quot;\r\n);\r\n-&gt; at com.xxx.service.FooService.delete(FooService.java:197)\r\nActually, there were zero interactions with this mock.\r\n```\r\n\r\nI tried to fix it with a common `ControllerTestBase` which configures all mocks and all other controller tests extending the base class. Which worked fine on my machine, but e.g. not in the pipeline. So I guess it is not really stable.\r\n\r\nWhy is Spring not reloading the context with the mocks? Is this the &quot;best&quot; way of testing my controllers?","title":"@SpringBootTest: @MockBean not injected when multiple test classes","body":"<p>I want to write controller tests that also test my annotations. What I've read so far is that RestAssured one of the ways to go.</p>\n<p>It works smoothly when I only have one controller test in place. However, when having 2 or more controller test classes in place, the @MockBeans seem to not be used properly.\nDepending on the test execution order, all tests from the first test class succeed, and all others fail.</p>\n<p>In the following test run, the PotatoControllerTest was executed first, and then the FooControllerTest.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ActiveProfiles({&quot;test&quot;, &quot;httptest&quot;})\nclass FooControllerTest {\n\n    @MockBean\n    protected FooService mockFooService;\n\n    @MockBean\n    protected BarService mockBarService;\n\n    @LocalServerPort\n    protected int port;\n\n    @BeforeEach\n    public void setup() {\n        RestAssured.port = port;\n        RestAssured.authentication = basic(TestSecurityConfiguration.ADMIN_USERNAME, TestSecurityConfiguration.ADMIN_PASSWORD);\n        RestAssured.requestSpecification = new RequestSpecBuilder()\n                .setContentType(ContentType.JSON)\n                .setAccept(ContentType.JSON)\n                .build();\n    }\n\n    @SneakyThrows\n    @Test\n    void deleteFooNotExists() {\n        final Foo foo = TestUtils.generateTestFoo();\n        Mockito.doThrow(new DoesNotExistException(&quot;missing&quot;)).when(mockFooService).delete(foo.getId(), foo.getVersion());\n\n        RestAssured.given()\n                .when().delete(&quot;/v1/foo/{id}/{version}&quot;, foo.getId(), foo.getVersion())\n                .then()\n                .statusCode(HttpStatus.NOT_FOUND.value());\n        Mockito.verify(mockFooService, times(1)).delete(foo.getId(), foo.getVersion());\n    }\n\n...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ActiveProfiles({&quot;test&quot;, &quot;httptest&quot;})\nclass PotatoControllerTest {\n\n    @MockBean\n    protected PotatoService mockPotatoService;\n\n    @LocalServerPort\n    protected int port;\n\n    @BeforeEach\n    public void setup() {\n        RestAssured.port = port;\n        RestAssured.authentication = basic(TestSecurityConfiguration.ADMIN_USERNAME, TestSecurityConfiguration.ADMIN_PASSWORD);\n        RestAssured.requestSpecification = new RequestSpecBuilder()\n                .setContentType(ContentType.JSON)\n                .setAccept(ContentType.JSON)\n                .build();\n    }\n\n...\n\n}\n</code></pre>\n<pre><code>Wanted but not invoked:\nfooService bean.delete(\n    &quot;10e76ae4-ec1b-49ce-b162-8a5c587de2a8&quot;,\n    &quot;06db13f1-c4cd-435d-9693-b94c26503d40&quot;\n);\n-&gt; at com.xxx.service.FooService.delete(FooService.java:197)\nActually, there were zero interactions with this mock.\n</code></pre>\n<p>I tried to fix it with a common <code>ControllerTestBase</code> which configures all mocks and all other controller tests extending the base class. Which worked fine on my machine, but e.g. not in the pipeline. So I guess it is not really stable.</p>\n<p>Why is Spring not reloading the context with the mocks? Is this the &quot;best&quot; way of testing my controllers?</p>\n"},{"tags":["java","dto","mapstruct"],"comments":[{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1507418175,"post_id":46598488,"comment_id":80202548,"body_markdown":"How does the generated code looks","body":"How does the generated code looks"},{"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"score":0,"creation_date":1650949774,"post_id":46598488,"comment_id":127238293,"body_markdown":"https://stackoverflow.com/a/59219506/5456789","body":"<a href=\"https://stackoverflow.com/a/59219506/5456789\">stackoverflow.com/a/59219506/5456789</a>"}],"answers":[{"comments":[{"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"score":1,"creation_date":1650949972,"post_id":51892635,"comment_id":127238335,"body_markdown":"abstract method of `mapStringtoList` is not necessary  and you should add  `ChildSource childFromString(String child)` implementation","body":"abstract method of <code>mapStringtoList</code> is not necessary  and you should add  <code>ChildSource childFromString(String child)</code> implementation"}],"tags":[],"owner":{"account_id":1876836,"reputation":4578,"user_id":1697885,"accept_rate":21,"display_name":"kinath_ru"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1534499078,"creation_date":1534499078,"answer_id":51892635,"question_id":46598488,"body_markdown":"You can do it like this. \r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n@Mapper(componentModel = &quot;spring&quot;)    \r\npublic abstract class SampleMapper {\r\n        @Mappings({ \r\n            @Mapping(target = &quot;id&quot;, source = &quot;sno&quot;),\r\n            @Mapping(target = &quot;name&quot;, source = &quot;mNAme&quot;),\r\n\t\t\t@Mapping(target = &quot;actions&quot;, source = &quot;childSource&quot;)\r\n        })\r\n        public abstract TargetDTO toDto(Source source);\r\n\r\n        protected abstract List&lt;String&gt; mapStringtoList(List&lt;ChildSource&gt; childSource);\r\n\r\n\t\tprotected String mapChildSourceToString(ChildSource child) {\r\n            return child.getAction();\r\n        }\r\n    }\r\n&lt;/code&gt;&lt;/pre&gt;","title":"Mapping List&lt;String&gt; from List&lt;Object&gt; using mapstruct","body":"<p>You can do it like this. </p>\n\n<pre><code>\n@Mapper(componentModel = \"spring\")    \npublic abstract class SampleMapper {\n        @Mappings({ \n            @Mapping(target = \"id\", source = \"sno\"),\n            @Mapping(target = \"name\", source = \"mNAme\"),\n            @Mapping(target = \"actions\", source = \"childSource\")\n        })\n        public abstract TargetDTO toDto(Source source);\n\n        protected abstract List mapStringtoList(List childSource);\n\n        protected String mapChildSourceToString(ChildSource child) {\n            return child.getAction();\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4922526,"reputation":1960,"user_id":3964927,"accept_rate":100,"display_name":"Null"},"score":0,"creation_date":1614970965,"post_id":66497201,"comment_id":117557486,"body_markdown":"Please [edit] your post to explain how it answers the question.","body":"Please <a href=\"https://stackoverflow.com/posts/66497201/edit\">edit</a> your post to explain how it answers the question."}],"tags":[],"owner":{"account_id":20880550,"reputation":21,"user_id":15338392,"display_name":"osama mussawir"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691600478,"creation_date":1614966211,"answer_id":66497201,"question_id":46598488,"body_markdown":"Using a default method to map the ChildSource to a String.\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;)    \r\n    public abstract class SampleMapper {\r\n        @Mappings({ \r\n            @Mapping(target = &quot;id&quot;, source = &quot;sno&quot;),\r\n            @Mapping(target = &quot;name&quot;, source = &quot;mNAme&quot;),\r\n            @Mapping(target = &quot;actions&quot;, source = &quot;childSource&quot;)\r\n        })\r\n        public abstract TargetDTO toDto(Source source);\r\n        \r\n        default String mapChildSourceToString(ChildSource child) {\r\n            return child.getAction();\r\n        }\r\n    }","title":"Mapping List&lt;String&gt; from List&lt;Object&gt; using mapstruct","body":"<p>Using a default method to map the ChildSource to a String.</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)    \npublic abstract class SampleMapper {\n    @Mappings({ \n        @Mapping(target = &quot;id&quot;, source = &quot;sno&quot;),\n        @Mapping(target = &quot;name&quot;, source = &quot;mNAme&quot;),\n        @Mapping(target = &quot;actions&quot;, source = &quot;childSource&quot;)\n    })\n    public abstract TargetDTO toDto(Source source);\n    \n    default String mapChildSourceToString(ChildSource child) {\n        return child.getAction();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9715230,"reputation":191,"user_id":7205869,"display_name":"bhuvana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17688,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":2,"score":19,"last_activity_date":1691600478,"creation_date":1507265587,"question_id":46598488,"body_markdown":"Hi I am getting null for List&lt;String&gt; action in DTO while setting it from the Child Source class using mapstruct. Could some help me in resolving this. Please find my code here\r\n\r\nEntity Class:\r\n\r\n    public class Source {\r\n        int id;\r\n        String name;\r\n        List&lt;ChildSource&gt; childSource;\r\n        //getters and setters\r\n    }\r\n\r\n    public class ChildSource {\r\n        String code;\r\n        String action;\r\n        //getters and setters   \r\n    }\r\n\r\nDestinationDTO:\r\n\r\n    public class TargetDTO{\r\n        int sNo;\r\n        String mName;\r\n        List&lt;String&gt; actions;\r\n        //getters and setters  \r\n    }\r\n\r\nMApper Class:\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;)    \r\n    public abstract class SampleMapper {\r\n        \t@Mappings({ \r\n        \t\t@Mapping(target = &quot;id&quot;, source = &quot;sno&quot;),\r\n        \t\t@Mapping(target = &quot;name&quot;, source = &quot;mNAme&quot;)\r\n        \t})\r\n        \tpublic abstract TargetDTO toDto(Source source);\r\n        \r\n        \t@IterableMapping(elementTargetType = String.class)\r\n        \tprotected abstract List&lt;String&gt; mapStringtoList(List&lt;ChildSource&gt; childSource);\r\n        \r\n        \tprotected String mapChildSourceToString(ChildSource child) {\r\n        \t\treturn child.getAction();\r\n        \t}\r\n        }\r\n\r\nBut my action list is setting as null in the target dto. Could anyone help me here please?\r\n","title":"Mapping List&lt;String&gt; from List&lt;Object&gt; using mapstruct","body":"<p>Hi I am getting null for List action in DTO while setting it from the Child Source class using mapstruct. Could some help me in resolving this. Please find my code here</p>\n\n<p>Entity Class:</p>\n\n<pre><code>public class Source {\n    int id;\n    String name;\n    List&lt;ChildSource&gt; childSource;\n    //getters and setters\n}\n\npublic class ChildSource {\n    String code;\n    String action;\n    //getters and setters   \n}\n</code></pre>\n\n<p>DestinationDTO:</p>\n\n<pre><code>public class TargetDTO{\n    int sNo;\n    String mName;\n    List&lt;String&gt; actions;\n    //getters and setters  \n}\n</code></pre>\n\n<p>MApper Class:</p>\n\n<pre><code>@Mapper(componentModel = \"spring\")    \npublic abstract class SampleMapper {\n        @Mappings({ \n            @Mapping(target = \"id\", source = \"sno\"),\n            @Mapping(target = \"name\", source = \"mNAme\")\n        })\n        public abstract TargetDTO toDto(Source source);\n\n        @IterableMapping(elementTargetType = String.class)\n        protected abstract List&lt;String&gt; mapStringtoList(List&lt;ChildSource&gt; childSource);\n\n        protected String mapChildSourceToString(ChildSource child) {\n            return child.getAction();\n        }\n    }\n</code></pre>\n\n<p>But my action list is setting as null in the target dto. Could anyone help me here please?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9876,"page":258,"page_size":100}
