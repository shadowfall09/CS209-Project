{"items":[{"tags":["java","timezone"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686817861,"post_id":76480570,"comment_id":134852402,"body_markdown":"Summer time maybe? Find out by debugging/printing which zones are actually used at runtime.","body":"Summer time maybe? Find out by debugging/printing which zones are actually used at runtime."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1686817926,"post_id":76480570,"comment_id":134852412,"body_markdown":"Maybe due to `daylight saving time`? [Minimal, reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) would help.","body":"Maybe due to <code>daylight saving time</code>? <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, reproducible example</a> would help."},{"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"score":0,"creation_date":1686818317,"post_id":76480570,"comment_id":134852480,"body_markdown":"We don&#39;t have daylight saving. I am just getting zone=ZoneId.of(&quot;&#39;), and print zone.getRules().getOffset(LocalDateTime.now()). It&#39;s different on this one server.","body":"We don&#39;t have daylight saving. I am just getting zone=ZoneId.of(&quot;&#39;), and print zone.getRules().getOffset(LocalDateTime.now()). It&#39;s different on this one server."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1686819774,"post_id":76480570,"comment_id":134852798,"body_markdown":"What is the `ZoneId.systemDefault()` in the servers? Do they all have the same default id or does the server that prints a different offset have a different zone id?","body":"What is the <code>ZoneId.systemDefault()</code> in the servers? Do they all have the same default id or does the server that prints a different offset have a different zone id?"},{"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"score":0,"creation_date":1686829487,"post_id":76480570,"comment_id":134854784,"body_markdown":"System default is same as the one I use. On all servers daylight savings for now are PT0S, which I understand means no savings. When I print zone.getRules(), it says &quot;currentStandardOffset=+03:00&quot; on correct servers, and &quot;+04:00&quot; for bad one.","body":"System default is same as the one I use. On all servers daylight savings for now are PT0S, which I understand means no savings. When I print zone.getRules(), it says &quot;currentStandardOffset=+03:00&quot; on correct servers, and &quot;+04:00&quot; for bad one."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686829718,"post_id":76480570,"comment_id":134854838,"body_markdown":"Printed how? What are you doing? Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"Printed how? What are you doing? Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"score":0,"creation_date":1686830511,"post_id":76480570,"comment_id":134855019,"body_markdown":"Added block to question","body":"Added block to question"}],"answers":[{"tags":[],"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686864893,"creation_date":1686864893,"answer_id":76485666,"question_id":76480570,"body_markdown":" I just updated Java on the target server to latest version, and problem is gone.\r\n","title":"Timezone offset is incorrect in Java","body":"<p>I just updated Java on the target server to latest version, and problem is gone.</p>\n"}],"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686864893,"creation_date":1686817759,"question_id":76480570,"body_markdown":"I was trying to find why on one of our windows servers Java application performs tasks one hour earlier than its supposed to.\r\n\r\nPrinted our time ZoneId offset - its +4 instead of +3. Java version is 1.8, same as other servers. Date and time settings in windows seem to be correct, timezone is +3 as it&#39;s supposed to be.\r\n\r\nI am not sure what to do - should I work around this in code somehow, or there is timezone settings somewhere in jre, which I can edit.\r\n\r\n\r\n----------\r\n\r\nThe code I use to see offset:\r\n\r\n    ZoneId def = ZoneId.systemDefault();\r\n    System.out.println(def.getRules().toString());\r\n\r\nOutput on bad server is &quot;ZoneRules[currentStandardOffset=+04:00]&quot;.\r\nMust be &quot;ZoneRules[currentStandardOffset=+03:00]&quot;.","title":"Timezone offset is incorrect in Java","body":"<p>I was trying to find why on one of our windows servers Java application performs tasks one hour earlier than its supposed to.</p>\n<p>Printed our time ZoneId offset - its +4 instead of +3. Java version is 1.8, same as other servers. Date and time settings in windows seem to be correct, timezone is +3 as it's supposed to be.</p>\n<p>I am not sure what to do - should I work around this in code somehow, or there is timezone settings somewhere in jre, which I can edit.</p>\n<hr />\n<p>The code I use to see offset:</p>\n<pre><code>ZoneId def = ZoneId.systemDefault();\nSystem.out.println(def.getRules().toString());\n</code></pre>\n<p>Output on bad server is &quot;ZoneRules[currentStandardOffset=+04:00]&quot;.\nMust be &quot;ZoneRules[currentStandardOffset=+03:00]&quot;.</p>\n"},{"tags":["java","concurrency"],"comments":[{"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"score":0,"creation_date":1686769752,"post_id":76471096,"comment_id":134846323,"body_markdown":"Guava offers `MoreExecutors.newSequentialExecutor(delegate)` and `ExecutionSequencer`, but lack those additional requirements. My personal trick is to chain `CompletableFuture` by keeping the tail reference and use a Semaphore to bound the size. Examples: [PolicyActor](https://github.com/ben-manes/caffeine/blob/master/simulator/src/main/java/com/github/benmanes/caffeine/cache/simulator/policy/PolicyActor.java), [EventDispatcher](https://github.com/ben-manes/caffeine/blob/master/jcache/src/main/java/com/github/benmanes/caffeine/jcache/event/EventDispatcher.java).","body":"Guava offers <code>MoreExecutors.newSequentialExecutor(delegate)</code> and <code>ExecutionSequencer</code>, but lack those additional requirements. My personal trick is to chain <code>CompletableFuture</code> by keeping the tail reference and use a Semaphore to bound the size. Examples: <a href=\"https://github.com/ben-manes/caffeine/blob/master/simulator/src/main/java/com/github/benmanes/caffeine/cache/simulator/policy/PolicyActor.java\" rel=\"nofollow noreferrer\">PolicyActor</a>, <a href=\"https://github.com/ben-manes/caffeine/blob/master/jcache/src/main/java/com/github/benmanes/caffeine/jcache/event/EventDispatcher.java\" rel=\"nofollow noreferrer\">EventDispatcher</a>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686927257,"post_id":76471096,"comment_id":134870238,"body_markdown":"What’s the difference between this “serial executor” and a `ThreadPoolExecutor` configured to have exactly one thread?","body":"What’s the difference between this “serial executor” and a <code>ThreadPoolExecutor</code> configured to have exactly one thread?"}],"owner":{"account_id":1308925,"reputation":1067,"user_id":1257349,"accept_rate":30,"display_name":"meijuh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686863090,"creation_date":1686727902,"question_id":76471096,"body_markdown":"I&#39;m looking for an off-the-shelf lockless serial executor. A serial executor allows concurrent enqueuing of tasks and serial processing of enqueued tasks. I already found [this example][1] which looks thread-safe. However, I&#39;m afraid those `synchronized` keywords may cause too much unnecessary contention, especially during enqueuing. The reason I&#39;m asking here for an off-the-shelf one is because writing a thread-safe lockless serial executor myself is far from trivial.\r\n\r\nSimilar to Spring&#39;s example of [ConcurrentWebSocketSessionDecorator.java][2], if possible, the lockless serial executor should have at least the following features:\r\n1. an overflow strategy,\r\n2. support for bounded queues.\r\n\r\nMaybe, there are alternative names for a &quot;serial executor&quot;, which would guide me in my search. That would be helpful too.\r\n\r\n  [1]: https://github.com/kabutz/javaspecialists/blob/master/src/main/java/eu/javaspecialists/tjsn/concurrency/util/SerialExecutor.java\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/main/spring-websocket/src/main/java/org/springframework/web/socket/handler/ConcurrentWebSocketSessionDecorator.java","title":"Lockless serial executor","body":"<p>I'm looking for an off-the-shelf lockless serial executor. A serial executor allows concurrent enqueuing of tasks and serial processing of enqueued tasks. I already found <a href=\"https://github.com/kabutz/javaspecialists/blob/master/src/main/java/eu/javaspecialists/tjsn/concurrency/util/SerialExecutor.java\" rel=\"nofollow noreferrer\">this example</a> which looks thread-safe. However, I'm afraid those <code>synchronized</code> keywords may cause too much unnecessary contention, especially during enqueuing. The reason I'm asking here for an off-the-shelf one is because writing a thread-safe lockless serial executor myself is far from trivial.</p>\n<p>Similar to Spring's example of <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-websocket/src/main/java/org/springframework/web/socket/handler/ConcurrentWebSocketSessionDecorator.java\" rel=\"nofollow noreferrer\">ConcurrentWebSocketSessionDecorator.java</a>, if possible, the lockless serial executor should have at least the following features:</p>\n<ol>\n<li>an overflow strategy,</li>\n<li>support for bounded queues.</li>\n</ol>\n<p>Maybe, there are alternative names for a &quot;serial executor&quot;, which would guide me in my search. That would be helpful too.</p>\n"},{"tags":["java","json","string","string-comparison"],"comments":[{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1686863066,"post_id":76485448,"comment_id":134860637,"body_markdown":"In retrospect, the VTC should be to link to this answer: https://stackoverflow.com/questions/56653323/s-doesnt-actually-capture-all-whitespace-characters - the &#39;weird whitespace&#39; is, amongst other things, [NARROW NO-BREAK SPACE](https://www.fileformat.info/info/unicode/char/202f/index.htm) - which `\\\\s` doesn&#39;t actually capture.","body":"In retrospect, the VTC should be to link to this answer: <a href=\"https://stackoverflow.com/questions/56653323/s-doesnt-actually-capture-all-whitespace-characters\" title=\"s doesnt actually capture all whitespace characters\">stackoverflow.com/questions/56653323/&hellip;</a> - the &#39;weird whitespace&#39; is, amongst other things, <a href=\"https://www.fileformat.info/info/unicode/char/202f/index.htm\" rel=\"nofollow noreferrer\">NARROW NO-BREAK SPACE</a> - which <code>\\\\s</code> doesn&#39;t actually capture."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1686863103,"post_id":76485448,"comment_id":134860641,"body_markdown":"more generally you misunderstood `\\\\s`. `\\\\s` doesn&#39;t mean any whitespace. I know the tutorials say that, but they are all just plain wrong. It, specifically, refers __only__ to ASCII whitespace symbols: Tab, space, line break, and carriage return. Not things like no-break space and the like.","body":"more generally you misunderstood <code>\\\\s</code>. <code>\\\\s</code> doesn&#39;t mean any whitespace. I know the tutorials say that, but they are all just plain wrong. It, specifically, refers <b>only</b> to ASCII whitespace symbols: Tab, space, line break, and carriage return. Not things like no-break space and the like."}],"owner":{"account_id":16235333,"reputation":1,"user_id":11722932,"display_name":"Shahnawaz Syed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1686864246,"answer_count":0,"score":0,"last_activity_date":1686862431,"creation_date":1686862431,"question_id":76485448,"body_markdown":"I am trying to compare two strings in my program. One is sourced from a spreadsheet the other is sourced from a JSONArray. \r\n\r\n```\r\nJSONArray String: &quot;Monday: 7:00 AM – 4:00 PM&quot;\r\nSpreadsheet String: &quot;Monday: 7:00 AM – 4:00 PM&quot;\r\n```\r\n\r\nObviously they appear to be equal but when using `.equals()` it returns false. I suspect that the reason is that the JSON File (outputs a different length of whitespace than the spreadsheet. I was able to confirm this using a Diff checker (&quot; &quot; vs &quot; &quot;).\r\n\r\n\r\nI have tried using `.replaceAll(&quot;\\\\s+&quot;,&quot; &quot;)` on both Strings but I am still getting a false result when I compare them. ","title":"Comparing two Strings with different types/lengths of whitespace using Java","body":"<p>I am trying to compare two strings in my program. One is sourced from a spreadsheet the other is sourced from a JSONArray.</p>\n<pre><code>JSONArray String: &quot;Monday: 7:00 AM – 4:00 PM&quot;\nSpreadsheet String: &quot;Monday: 7:00 AM – 4:00 PM&quot;\n</code></pre>\n<p>Obviously they appear to be equal but when using <code>.equals()</code> it returns false. I suspect that the reason is that the JSON File (outputs a different length of whitespace than the spreadsheet. I was able to confirm this using a Diff checker (&quot; &quot; vs &quot; &quot;).</p>\n<p>I have tried using <code>.replaceAll(&quot;\\\\s+&quot;,&quot; &quot;)</code> on both Strings but I am still getting a false result when I compare them.</p>\n"},{"tags":["java","url","uri","classpath"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686862221,"creation_date":1686862221,"answer_id":76485425,"question_id":76485258,"body_markdown":"As per the _JavaDoc_, it looks like it will be any _url_ that is not in compliance to _[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt)_.\r\n\r\n&gt; _&quot;... Note, any URL instance that complies with RFC 2396 can be converted to a URI. However, some URLs that are not strictly in compliance can not be converted to a URI. ...&quot;_\r\n\r\nHere is the RFC for a _url_, if you&#39;d like to compare the grammar&amp;mdash;section 2.  \r\n_[RFC 1738 &amp;ndash; Uniform Resource Locators (URL)](https://datatracker.ietf.org/doc/html/rfc1738)_.","title":"Can a Java resource URL be an invalid URI?","body":"<p>As per the <em>JavaDoc</em>, it looks like it will be any <em>url</em> that is not in compliance to <em><a href=\"https://www.ietf.org/rfc/rfc2396.txt\" rel=\"nofollow noreferrer\">RFC 2396</a></em>.</p>\n<blockquote>\n<p><em>&quot;... Note, any URL instance that complies with RFC 2396 can be converted to a URI. However, some URLs that are not strictly in compliance can not be converted to a URI. ...&quot;</em></p>\n</blockquote>\n<p>Here is the RFC for a <em>url</em>, if you'd like to compare the grammar—section 2.<br />\n<em><a href=\"https://datatracker.ietf.org/doc/html/rfc1738\" rel=\"nofollow noreferrer\">RFC 1738 – Uniform Resource Locators (URL)</a></em>.</p>\n"}],"owner":{"account_id":459254,"reputation":986,"user_id":859604,"display_name":"Olivier Cailloux"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686862221,"creation_date":1686860488,"question_id":76485258,"body_markdown":"Calling [`Class#getResource(String)`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)) in Java returns a `URL`.  And a Java `URL` can, in general, be an [invalid](https://stackoverflow.com/questions/23384311/an-example-of-url-which-cannot-be-converted-touri) `URI`. By “invalid URI” I mean here being a URL that throws an `URISyntaxException` when calling [`toURI()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/URL.html#toURI()).\r\n\r\nAre there some guarantees that this will not happen? That is: does the language guarantee that `getResource` will return a `URL` of the sort that can be converted to a `URI`? Otherwise, can anybody provide a – possibly hypothetical – example?\r\n","title":"Can a Java resource URL be an invalid URI?","body":"<p>Calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Class#getResource(String)</code></a> in Java returns a <code>URL</code>.  And a Java <code>URL</code> can, in general, be an <a href=\"https://stackoverflow.com/questions/23384311/an-example-of-url-which-cannot-be-converted-touri\">invalid</a> <code>URI</code>. By “invalid URI” I mean here being a URL that throws an <code>URISyntaxException</code> when calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/URL.html#toURI()\" rel=\"nofollow noreferrer\"><code>toURI()</code></a>.</p>\n<p>Are there some guarantees that this will not happen? That is: does the language guarantee that <code>getResource</code> will return a <code>URL</code> of the sort that can be converted to a <code>URI</code>? Otherwise, can anybody provide a – possibly hypothetical – example?</p>\n"},{"tags":["java","postgresql","google-cloud-platform","jdbc","quarkus"],"comments":[{"owner":{"account_id":15760814,"reputation":68963,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1686691440,"post_id":76468701,"comment_id":134833589,"body_markdown":"What&#39;s the XXX format?","body":"What&#39;s the XXX format?"},{"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"score":0,"creation_date":1686692205,"post_id":76468701,"comment_id":134833696,"body_markdown":"Well, at the moment I entered the incoming ip address instead of &#39;xxx&#39; , but that does not seem to work","body":"Well, at the moment I entered the incoming ip address instead of &#39;xxx&#39; , but that does not seem to work"},{"owner":{"account_id":15760814,"reputation":68963,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1686736849,"post_id":76468701,"comment_id":134839123,"body_markdown":"ok replace XXX by your database name.","body":"ok replace XXX by your database name."},{"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"score":0,"creation_date":1686740717,"post_id":76468701,"comment_id":134839891,"body_markdown":"That is basically my question. What is the database name? I can see a connection name, a service account, but not a database name","body":"That is basically my question. What is the database name? I can see a connection name, a service account, but not a database name"},{"owner":{"account_id":15760814,"reputation":68963,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":1,"creation_date":1686743998,"post_id":76468701,"comment_id":134840587,"body_markdown":"XXX must be the database name. When you create your Cloud SQL instance, it&#39;s a database engine with default database and you can also create your own database. Use that database name instead of XXX: https://cloud.google.com/sql/docs/mysql/create-manage-databases","body":"XXX must be the database name. When you create your Cloud SQL instance, it&#39;s a database engine with default database and you can also create your own database. Use that database name instead of XXX: <a href=\"https://cloud.google.com/sql/docs/mysql/create-manage-databases\" rel=\"nofollow noreferrer\">cloud.google.com/sql/docs/mysql/create-manage-databases</a>"}],"answers":[{"tags":[],"owner":{"account_id":25423833,"reputation":1324,"user_id":19229284,"display_name":"Chanpols"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686861183,"creation_date":1686861183,"answer_id":76485329,"question_id":76468701,"body_markdown":"Posting this as a community wiki so that others can benefit from it.\r\n&lt;hr&gt;\r\nAs mentioned by @guillaume blaquiere:\r\n\r\n&gt; XXX must be the database name. When you create your Cloud SQL instance, it&#39;s a database engine with a default database and you can also create your own database.\r\n&lt;hr&gt;\r\nReference:\r\n\r\n - [Create and manage databases](https://cloud.google.com/sql/docs/mysql/create-manage-databases)","title":"How to set database jdbc url for Google Cloud SQL on quarkus?","body":"<p>Posting this as a community wiki so that others can benefit from it.</p>\n<hr>\nAs mentioned by @guillaume blaquiere:\n<blockquote>\n<p>XXX must be the database name. When you create your Cloud SQL instance, it's a database engine with a default database and you can also create your own database.</p>\n</blockquote>\n<hr>\nReference:\n<ul>\n<li><a href=\"https://cloud.google.com/sql/docs/mysql/create-manage-databases\" rel=\"nofollow noreferrer\">Create and manage databases</a></li>\n</ul>\n"}],"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76485329,"answer_count":1,"score":0,"last_activity_date":1686861183,"creation_date":1686690308,"question_id":76468701,"body_markdown":"I am trying to put my PostgreSQL DB onto Google Cloud SQL but encounter an error. To reproduce the error I do the following: \r\n\r\n 1. `mvn install`\r\n 2. `export GOOGLE_APPLICATION_CREDENTIALS=yyy.json`\r\n 3. `java -jar target/quarkus-app/quarkus-run.jar`\r\n\r\nWhich throws the following error:\r\n\r\n`org.postgresql.util.PSQLException: FATAL: database &quot;XXX&quot; does not exist`\r\n\r\nWhen looking at the official [documentation of quarkus][1] it mentions that I need to set the following properties:\r\n\r\n```\r\nquarkus.datasource.db-kind=other \r\nquarkus.datasource.jdbc.url=jdbc:postgresql:///XXX \r\nquarkus.datasource.jdbc.driver=org.postgresql.Driver\r\nquarkus.datasource.username=quarkus\r\nquarkus.datasource.password=quarkus\r\nquarkus.datasource.jdbc.additional-jdbc-properties.cloudSqlInstance=project-id:gcp-region:instance \r\nquarkus.datasource.jdbc.additional-jdbc-properties.socketFactory=com.google.cloud.sql.postgres.SocketFactory \r\n```\r\nI assume I did not enter the correct database name on the second line (`quarkus.datasource.jdbc.url`)\r\nWhat url should be given as a property? The public IP address, the connection name, ...?\r\n\r\n  [1]: https://quarkus.io/guides/deploying-to-google-cloud#using-cloud-sql-with-a-jdbc-driver","title":"How to set database jdbc url for Google Cloud SQL on quarkus?","body":"<p>I am trying to put my PostgreSQL DB onto Google Cloud SQL but encounter an error. To reproduce the error I do the following:</p>\n<ol>\n<li><code>mvn install</code></li>\n<li><code>export GOOGLE_APPLICATION_CREDENTIALS=yyy.json</code></li>\n<li><code>java -jar target/quarkus-app/quarkus-run.jar</code></li>\n</ol>\n<p>Which throws the following error:</p>\n<p><code>org.postgresql.util.PSQLException: FATAL: database &quot;XXX&quot; does not exist</code></p>\n<p>When looking at the official <a href=\"https://quarkus.io/guides/deploying-to-google-cloud#using-cloud-sql-with-a-jdbc-driver\" rel=\"nofollow noreferrer\">documentation of quarkus</a> it mentions that I need to set the following properties:</p>\n<pre><code>quarkus.datasource.db-kind=other \nquarkus.datasource.jdbc.url=jdbc:postgresql:///XXX \nquarkus.datasource.jdbc.driver=org.postgresql.Driver\nquarkus.datasource.username=quarkus\nquarkus.datasource.password=quarkus\nquarkus.datasource.jdbc.additional-jdbc-properties.cloudSqlInstance=project-id:gcp-region:instance \nquarkus.datasource.jdbc.additional-jdbc-properties.socketFactory=com.google.cloud.sql.postgres.SocketFactory \n</code></pre>\n<p>I assume I did not enter the correct database name on the second line (<code>quarkus.datasource.jdbc.url</code>)\nWhat url should be given as a property? The public IP address, the connection name, ...?</p>\n"},{"tags":["java","selenium-webdriver","webdriver","geckodriver","java-20"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686860640,"creation_date":1686860640,"answer_id":76485277,"question_id":76485246,"body_markdown":"Initializing _Firefox_ with _GeckoDriver_\r\n---------------------------------\r\nUsing [Selenium](https://stackoverflow.com/a/54482491/7429447) _**v4.10.0**_, [GeckoDriver](https://stackoverflow.com/a/45331403/7429447) _**v0.33.0**_ and [tag:firefox] _**v114.0.1**_ you can use the minimum code block:\r\n\r\n\tWebDriver driver = new FirefoxDriver();\r\n\tdriver.get(&quot;https://www.selenium.dev/&quot;);\r\n\t\r\nConsole Output:\r\n\r\n\tJun 11, 2023 3:58:24 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\r\n\tINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\r\n\r\n","title":"How to initialize firefox with a Selenium Java project using Java 20","body":"<h2>Initializing <em>Firefox</em> with <em>GeckoDriver</em></h2>\n<p>Using <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> <em><strong>v4.10.0</strong></em>, <a href=\"https://stackoverflow.com/a/45331403/7429447\">GeckoDriver</a> <em><strong>v0.33.0</strong></em> and <a href=\"/questions/tagged/firefox\" class=\"post-tag\" title=\"show questions tagged &#39;firefox&#39;\" aria-label=\"show questions tagged &#39;firefox&#39;\" rel=\"tag\" aria-labelledby=\"tag-firefox-tooltip-container\">firefox</a> <em><strong>v114.0.1</strong></em> you can use the minimum code block:</p>\n<pre><code>WebDriver driver = new FirefoxDriver();\ndriver.get(&quot;https://www.selenium.dev/&quot;);\n</code></pre>\n<p>Console Output:</p>\n<pre><code>Jun 11, 2023 3:58:24 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\nINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\n</code></pre>\n"}],"owner":{"account_id":26796478,"reputation":11,"user_id":20389146,"display_name":"Mrym"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686860776,"creation_date":1686860365,"question_id":76485246,"body_markdown":"Which version of geckodriver should I use for Java version 20 and selenium  v4.10.0 ?\r\nwhile my firefox is 114. when I use geckodriver 0.33.0 I get this error:\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.remote.NoSuchDriverException: geckodriver located at path, but invalid","title":"How to initialize firefox with a Selenium Java project using Java 20","body":"<p>Which version of geckodriver should I use for Java version 20 and selenium  v4.10.0 ?\nwhile my firefox is 114. when I use geckodriver 0.33.0 I get this error:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.remote.NoSuchDriverException: geckodriver located at path, but invalid\n</code></pre>\n"},{"tags":["java","spring-boot","selenium-webdriver"],"comments":[{"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"score":0,"creation_date":1686767907,"post_id":76476630,"comment_id":134846014,"body_markdown":"Can you post a little code snippet where the error occurs?","body":"Can you post a little code snippet where the error occurs?"},{"owner":{"account_id":28125462,"reputation":1,"user_id":21490964,"display_name":"Lucas G&#252;imil"},"score":0,"creation_date":1686768487,"post_id":76476630,"comment_id":134846110,"body_markdown":"@M.Rogers yes, i have just done it!!! there it is","body":"@M.Rogers yes, i have just done it!!! there it is"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686773845,"creation_date":1686773845,"answer_id":76477242,"question_id":76476630,"body_markdown":"This error message...\r\n\r\n\t2023-06-14T15:27:44.720-03:00  WARN 10544 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\r\n\tjava.net.SocketException: Connection reset\r\n\r\n...implies that [SocketException](https://stackoverflow.com/a/75303602/7429447) occured while [WebDriver](https://stackoverflow.com/a/48080871/7429447) was initializing the client.\r\n\r\n\r\n----------\r\n\r\n\r\njava.net.SocketException: Connection reset\r\n------------------------------------------\r\n[java.net.SocketException](https://www.geeksforgeeks.org/java-net-socketexception-in-java-with-examples/) may occur due to several possible reasons as follows:\r\n\r\n- It can occur on the server-side when the client closed the socket connection before the response could be returned over the socket. For example, by quitting the browser before the response was retrieved.\r\n- It can also occur by writing to a connection that the other end has already closed normally resulting in an application protocol error.\r\n\r\nBut in majority of the cases using [Selenium](https://stackoverflow.com/a/54482491/7429447) the main reason seems to _incorrect libraries_ being added/used.\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nTo get rid of this issue remove all the jars/libraries and download latest stable [**selenium-server-4.10.0.jar**](https://www.selenium.dev/downloads/), add to your project and execute your test.\r\n\r\nSample Code:\r\n\r\n\tpackage Day1;\r\n\r\n\timport org.openqa.selenium.WebDriver;\r\n\timport org.openqa.selenium.firefox.FirefoxDriver;\r\n\r\n\tpublic class genericTestFirefox {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\r\n\t\t\tWebDriver driver = new FirefoxDriver();\r\n\t\t\tdriver.get(&quot;https://www.google.com/&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\nConsole Output:\r\n\r\n\tJun 15, 2023 1:44:30 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\r\n\tINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\t","title":"JAVA + SpringBoot + Selenium Automation","body":"<p>This error message...</p>\n<pre><code>2023-06-14T15:27:44.720-03:00  WARN 10544 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\njava.net.SocketException: Connection reset\n</code></pre>\n<p>...implies that <a href=\"https://stackoverflow.com/a/75303602/7429447\">SocketException</a> occured while <a href=\"https://stackoverflow.com/a/48080871/7429447\">WebDriver</a> was initializing the client.</p>\n<hr />\n<h2>java.net.SocketException: Connection reset</h2>\n<p><a href=\"https://www.geeksforgeeks.org/java-net-socketexception-in-java-with-examples/\" rel=\"nofollow noreferrer\">java.net.SocketException</a> may occur due to several possible reasons as follows:</p>\n<ul>\n<li>It can occur on the server-side when the client closed the socket connection before the response could be returned over the socket. For example, by quitting the browser before the response was retrieved.</li>\n<li>It can also occur by writing to a connection that the other end has already closed normally resulting in an application protocol error.</li>\n</ul>\n<p>But in majority of the cases using <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> the main reason seems to <em>incorrect libraries</em> being added/used.</p>\n<hr />\n<h2>Solution</h2>\n<p>To get rid of this issue remove all the jars/libraries and download latest stable <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\"><strong>selenium-server-4.10.0.jar</strong></a>, add to your project and execute your test.</p>\n<p>Sample Code:</p>\n<pre><code>package Day1;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\n\npublic class genericTestFirefox {\n\n    public static void main(String[] args) {\n\n        WebDriver driver = new FirefoxDriver();\n        driver.get(&quot;https://www.google.com/&quot;);\n    }\n}\n</code></pre>\n<p>Console Output:</p>\n<pre><code>Jun 15, 2023 1:44:30 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\nINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output    \n</code></pre>\n"}],"owner":{"account_id":28125462,"reputation":1,"user_id":21490964,"display_name":"Lucas G&#252;imil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686860475,"creation_date":1686767769,"question_id":76476630,"body_markdown":"When I run the project everything goes just fine, but in the middle of the test the browser closes itself and console throws me the following error\r\n\r\n```\r\n2023-06-14T15:27:44.720-03:00  WARN 10544 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\r\n\r\njava.net.SocketException: Connection reset\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\r\n\tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n2023-06-14T15:27:44.736-03:00  WARN 10544 --- [cHttpClient-1-4] o.openqa.selenium.remote.http.WebSocket  : Connection reset\r\n\r\njava.net.SocketException: Connection reset\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\r\n\tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n```\r\n\r\nTried changing the network adapter config goint to Internet Protocol 4 and specifying a DNS preferred adress. Then running cmd and using ipconfig /flushdns\r\n                            ipconfig /release \r\n                            ipconfig /renew\r\n                            netsh winsock reset\r\n\r\nStill does not work\r\n\r\n\r\n\r\n\r\n\r\nJUnit tells me that the line where the error happens is in this method\r\n\r\n    public void fillForm(String nombre, String email, String asunto, String mensaje) throws InterruptedException {\r\n\t\tWebElement nombreInput = driver.findElement(By.name(&quot;your-name&quot;));  \r\n\t\tnombreInput.sendKeys(nombre);\r\n\t\tWebElement emailInput = driver.findElement(By.name(&quot;your-email&quot;));\r\n\t    emailInput.sendKeys(email);\r\n\t    WebElement asuntoInput = driver.findElement(By.name(&quot;your-subject&quot;));\r\n\t    asuntoInput.sendKeys(asunto);\r\n\t    WebElement mensajeInput = driver.findElement(By.name(&quot;your-message&quot;));\r\n\t    mensajeInput.sendKeys(mensaje);\r\n\r\n","title":"JAVA + SpringBoot + Selenium Automation","body":"<p>When I run the project everything goes just fine, but in the middle of the test the browser closes itself and console throws me the following error</p>\n<pre><code>2023-06-14T15:27:44.720-03:00  WARN 10544 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\n\njava.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\n    at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\n    at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-06-14T15:27:44.736-03:00  WARN 10544 --- [cHttpClient-1-4] o.openqa.selenium.remote.http.WebSocket  : Connection reset\n\njava.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\n    at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\n    at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n</code></pre>\n<p>Tried changing the network adapter config goint to Internet Protocol 4 and specifying a DNS preferred adress. Then running cmd and using ipconfig /flushdns\nipconfig /release\nipconfig /renew\nnetsh winsock reset</p>\n<p>Still does not work</p>\n<p>JUnit tells me that the line where the error happens is in this method</p>\n<pre><code>public void fillForm(String nombre, String email, String asunto, String mensaje) throws InterruptedException {\n    WebElement nombreInput = driver.findElement(By.name(&quot;your-name&quot;));  \n    nombreInput.sendKeys(nombre);\n    WebElement emailInput = driver.findElement(By.name(&quot;your-email&quot;));\n    emailInput.sendKeys(email);\n    WebElement asuntoInput = driver.findElement(By.name(&quot;your-subject&quot;));\n    asuntoInput.sendKeys(asunto);\n    WebElement mensajeInput = driver.findElement(By.name(&quot;your-message&quot;));\n    mensajeInput.sendKeys(mensaje);\n</code></pre>\n"},{"tags":["java","maven","spring-boot","wildfly"],"comments":[{"owner":{"account_id":4181234,"reputation":3257,"user_id":3426201,"display_name":"Assafs"},"score":1,"creation_date":1546518326,"post_id":54021886,"comment_id":94880453,"body_markdown":"Did you consider adding the cdi-api to your pom.xml dependencies? It&#39;s not included within the dependencies you specified. &lt;dependency&gt;\n\t\t\t&lt;groupId&gt;javax.enterprise&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;cdi-api&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;1.2&lt;/version&gt;\n\t\t&lt;/dependency&gt;","body":"Did you consider adding the cdi-api to your pom.xml dependencies? It&#39;s not included within the dependencies you specified. &lt;dependency&gt; \t\t\t&lt;groupId&gt;javax.enterprise&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;cdi-api&lt;/artifactId&gt; \t\t\t&lt;version&gt;1.2&lt;/version&gt; \t\t&lt;/dependency&gt;"},{"owner":{"account_id":10966372,"reputation":535,"user_id":8057985,"display_name":"DeooK"},"score":0,"creation_date":1546523609,"post_id":54021886,"comment_id":94883453,"body_markdown":"It works, thanks.\nWhat I don&#39;t understand is why Spring doesn&#39;t include CDI in their parent POM (or, at least, specify that this dependency it&#39;s needed) :/","body":"It works, thanks. What I don&#39;t understand is why Spring doesn&#39;t include CDI in their parent POM (or, at least, specify that this dependency it&#39;s needed) :/"},{"owner":{"account_id":4181234,"reputation":3257,"user_id":3426201,"display_name":"Assafs"},"score":1,"creation_date":1546523732,"post_id":54021886,"comment_id":94883505,"body_markdown":"Cool! I&#39;m glad it worked. If you don&#39;t mind, I&#39;ll post the same information below as an answer? It will be easier to read with the formatting. If this solves the issue, would you mind accepting the answer by clicking on the grey checkmark next to it, making it green?","body":"Cool! I&#39;m glad it worked. If you don&#39;t mind, I&#39;ll post the same information below as an answer? It will be easier to read with the formatting. If this solves the issue, would you mind accepting the answer by clicking on the grey checkmark next to it, making it green?"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1546575717,"post_id":54021886,"comment_id":94902081,"body_markdown":"@Assafs No need to prompt users to give you rep.  The system works.","body":"@Assafs No need to prompt users to give you rep.  The system works."}],"answers":[{"tags":[],"owner":{"account_id":4181234,"reputation":3257,"user_id":3426201,"display_name":"Assafs"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1546523820,"creation_date":1546523820,"answer_id":54023746,"question_id":54021886,"body_markdown":"As we discussed in the comments, the solution might be as simple as adding the `cdi-api` to your **pom.xml** dependencies. It&#39;s not included within the dependencies you specified. \r\n\r\n    &lt;dependency&gt; \r\n        &lt;groupId&gt;javax.enterprise&lt;/groupId&gt; \r\n        &lt;artifactId&gt;cdi-api&lt;/artifactId&gt; \r\n        &lt;version&gt;1.2&lt;/version&gt; \r\n    &lt;/dependency&gt;","title":"Unable to find CDI BeanManager","body":"<p>As we discussed in the comments, the solution might be as simple as adding the <code>cdi-api</code> to your <strong>pom.xml</strong> dependencies. It's not included within the dependencies you specified. </p>\n\n<pre><code>&lt;dependency&gt; \n    &lt;groupId&gt;javax.enterprise&lt;/groupId&gt; \n    &lt;artifactId&gt;cdi-api&lt;/artifactId&gt; \n    &lt;version&gt;1.2&lt;/version&gt; \n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3035610,"reputation":516,"user_id":2573786,"display_name":"ogarzonm"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1594485219,"creation_date":1594485219,"answer_id":62851853,"question_id":54021886,"body_markdown":"Remember, is necessary to include the context that start the CDI configuration.\r\n\r\n&gt; &lt;Context&gt;\r\n    &lt;Resource name=&quot;BeanManager&quot; auth=&quot;Container&quot; type=&quot;javax.enterprise.inject.spi.BeanManager&quot; factory=&quot;org.apache.webbeans.container.ManagerObjectFactory&quot; /&gt;\r\n&lt;/Context&gt;\r\n\r\n[You can check the all setup here][1]\r\n\r\nOr you can review this [blog][2] \r\n\r\n  [1]: https://balusc.omnifaces.org/2013/10/how-to-install-cdi-in-tomcat.html\r\n  [2]: http://fritzthecat-blog.blogspot.com/2019/08/jsf-23-maven-project-in-eclipse.html","title":"Unable to find CDI BeanManager","body":"<p>Remember, is necessary to include the context that start the CDI configuration.</p>\n<blockquote>\n\n</blockquote>\n<pre><code>&lt;Resource name=&quot;BeanManager&quot; auth=&quot;Container&quot; type=&quot;javax.enterprise.inject.spi.BeanManager&quot; factory=&quot;org.apache.webbeans.container.ManagerObjectFactory&quot; /&gt;\n</code></pre>\n\n<p><a href=\"https://balusc.omnifaces.org/2013/10/how-to-install-cdi-in-tomcat.html\" rel=\"nofollow noreferrer\">You can check the all setup here</a></p>\n<p>Or you can review this <a href=\"http://fritzthecat-blog.blogspot.com/2019/08/jsf-23-maven-project-in-eclipse.html\" rel=\"nofollow noreferrer\">blog</a></p>\n"},{"tags":[],"owner":{"account_id":8342762,"reputation":950,"user_id":6267583,"accept_rate":100,"display_name":"morecore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638291604,"creation_date":1638291604,"answer_id":70173203,"question_id":54021886,"body_markdown":"Not directly related to your Problem, but maybe it might help someone else.\r\n\r\nWe are using SpringBoot with [joinfaces][1], in our case the problem was caused by an error in the `faces-config.xml` - specifically in the header part `&lt;faces-config ...&gt;`. Maybe check your `git`, if the file was updated recently.\r\n\r\n\r\n  [1]: http://joinfaces.org/","title":"Unable to find CDI BeanManager","body":"<p>Not directly related to your Problem, but maybe it might help someone else.</p>\n<p>We are using SpringBoot with <a href=\"http://joinfaces.org/\" rel=\"nofollow noreferrer\">joinfaces</a>, in our case the problem was caused by an error in the <code>faces-config.xml</code> - specifically in the header part <code>&lt;faces-config ...&gt;</code>. Maybe check your <code>git</code>, if the file was updated recently.</p>\n"}],"owner":{"account_id":10966372,"reputation":535,"user_id":8057985,"display_name":"DeooK"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24674,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":54023746,"answer_count":3,"score":10,"last_activity_date":1686860203,"creation_date":1546516829,"question_id":54021886,"body_markdown":"I&#39;m trying to set up a simple application to use SpringBoot 2.1.1 and Java 11 over Wildfly 14 (because Wildfly 15 isn&#39;t supported by Eclipse).\r\n\r\nThe deploy failed because Wildfly cannot find the CDI BeanManager in the project. I&#39;m only trying to follow the simple (official) tutorial, so I don&#39;t understand why the error appears.\r\n\r\nThis is the code:\r\n\r\npom.xml\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;start-class&gt;main&lt;/start-class&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;!-- Add typical dependencies for a web application --&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;!-- Package as an executable jar --&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nApplication.java\r\n\r\n    package main;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration\r\n    public class Application {\r\n    \r\n\t    public static void main(String[] args) {\r\n\t\t    SpringApplication.run(Application.class, args);\r\n\t    }\r\n    \r\n    }\r\n\r\n\r\nThis is the stacktrace:\r\n\r\n    &gt; 12:51:13,365 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of &quot;SpringBoot-0.0.1.war&quot; (runtime-name: &quot;SpringBoot-0.0.1.war&quot;)\r\n    &gt; WARNING: An illegal reflective access operation has occurred\r\n    &gt; WARNING: Illegal reflective access by io.undertow.util.FlexBase64$1 (jar:file:/C:/Users/87003556/Documents/Java/Wildfly%2014/modules/system/layers/base/io/undertow/core/main/undertow-core-2.0.13.Final.jar!/) to constructor java.lang.String(char[],boolean)\r\n    &gt; WARNING: Please consider reporting this to the maintainers of io.undertow.util.FlexBase64$1\r\n    &gt; WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\n    &gt; WARNING: All illegal access operations will be denied in a future release\r\n    &gt; 12:51:13,429 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443\r\n    &gt; 12:51:13,531 INFO  [org.jboss.ws.common.management] (MSC service thread 1-8) JBWS022052: Starting JBossWS 5.2.3.Final (Apache CXF 3.2.5.jbossorg-1) \r\n    &gt; 12:51:15,606 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletServerHttpResponse$ResponseAsyncListener due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,606 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletHttpHandlerAdapter$HandlerResultAsyncListener due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.ServletServerHttpAsyncRequestControl due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.web.context.request.async.StandardServletAsyncWebRequest due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,794 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-7) ISPN000128: Infinispan version: Infinispan &#39;Estrella Galicia&#39; 9.3.1.Final\r\n    &gt; 12:51:15,966 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 72) WFLYCLINF0002: Started client-mappings cache from ejb container\r\n    &gt; 12:51:16,075 INFO  [io.undertow.servlet] (ServerService Thread Pool -- 85) 1 Spring WebApplicationInitializers detected on classpath\r\n    &gt; 12:51:16,153 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 85) Initializing Mojarra 2.3.5.SP2 for context &#39;/SpringBoot-0.0.1&#39;\r\n    &gt; 12:51:16,761 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 85) Critical error during deployment: : com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:357)\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:243)\r\n    &gt; \tat com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:443)\r\n    &gt; \tat com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:237)\r\n    &gt; \tat io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)\r\n    &gt; \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n    &gt; \tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n    &gt; \t...\r\n    &gt; \tat org.jboss.threads.JBossThread.run(JBossThread.java:485)\r\n    &gt; Caused by: javax.faces.FacesException: Unable to find CDI BeanManager\r\n    &gt; \tat com.sun.faces.application.ApplicationImpl.isJsf23(ApplicationImpl.java:2714)\r\n    &gt; \tat com.sun.faces.application.ApplicationImpl.addELResolver(ApplicationImpl.java:549)\r\n    &gt; \t...\r\n    &gt; \tat javax.faces.FactoryFinder.getFactory(FactoryFinder.java:292)\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:354)\r\n    &gt; \t... 29 more\r\n    &gt; \r\n    &gt; 12:51:16,761 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 85) MSC000001: Failed to start service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)\r\n    &gt; \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n    &gt; \t...\r\n    &gt; \tat java.base/java.lang.Thread.run(Thread.java:825)\r\n    &gt; \tat org.jboss.threads.JBossThread.run(JBossThread.java:485)\r\n    &gt; Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:252)\r\n    &gt; \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\r\n    &gt; \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\r\n    &gt; \t... 8 more\r\n    &gt; Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:315)\r\n    &gt; \tat io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)\r\n    &gt; \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n    &gt; \t...\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:250)\r\n    &gt; \t... 10 more\r\n    &gt; Caused by: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:357)\r\n    &gt; \t...\r\n    &gt; \tat com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:237)\r\n    &gt; \t... 26 more\r\n    &gt; Caused by: javax.faces.FacesException: Unable to find CDI BeanManager\r\n    &gt; \tat com.sun.faces.application.ApplicationImpl.isJsf23(ApplicationImpl.java:2714)\r\n    &gt; \tat com.sun.faces.application.ApplicationImpl.addELResolver(ApplicationImpl.java:549)\r\n    &gt; \tat org.jboss.as.jsf.injection.weld.WeldApplication.&lt;init&gt;(WeldApplication.java:60)\r\n    &gt; \tat org.jboss.as.jsf.injection.weld.WeldApplicationFactory.getApplication(WeldApplicationFactory.java:52)\r\n    &gt; \tat com.sun.faces.application.InjectionApplicationFactory.getApplication(InjectionApplicationFactory.java:88)\r\n    &gt; \t...\tat javax.faces.FactoryFinder.getFactory(FactoryFinder.java:292)\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:354)\r\n    &gt; \t... 29 more\r\n    &gt; \r\n    &gt; 12:51:16,762 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;SpringBoot-0.0.1.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;SpringBoot-0.0.1.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt;     Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt;     Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt;     Caused by: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt;     Caused by: javax.faces.FacesException: Unable to find CDI BeanManager&quot;}}\r\n    &gt; 12:51:16,762 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 42) WFLYSRV0010: Deployed &quot;SpringBoot-0.0.1.war&quot; (runtime-name : &quot;SpringBoot-0.0.1.war&quot;)\r\n    &gt; 12:51:16,762 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report\r\n    &gt; WFLYCTL0186:   Services which failed to start:      service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n\r\n","title":"Unable to find CDI BeanManager","body":"<p>I'm trying to set up a simple application to use SpringBoot 2.1.1 and Java 11 over Wildfly 14 (because Wildfly 15 isn't supported by Eclipse).</p>\n<p>The deploy failed because Wildfly cannot find the CDI BeanManager in the project. I'm only trying to follow the simple (official) tutorial, so I don't understand why the error appears.</p>\n<p>This is the code:</p>\n<p>pom.xml</p>\n<pre><code>&lt;properties&gt;\n    &lt;start-class&gt;main&lt;/start-class&gt;\n&lt;/properties&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;!-- Add typical dependencies for a web application --&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;!-- Package as an executable jar --&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>Application.java</p>\n<pre><code>package main;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\n@EnableAutoConfiguration\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>This is the stacktrace:</p>\n<pre><code>&gt; 12:51:13,365 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of &quot;SpringBoot-0.0.1.war&quot; (runtime-name: &quot;SpringBoot-0.0.1.war&quot;)\n&gt; WARNING: An illegal reflective access operation has occurred\n&gt; WARNING: Illegal reflective access by io.undertow.util.FlexBase64$1 (jar:file:/C:/Users/87003556/Documents/Java/Wildfly%2014/modules/system/layers/base/io/undertow/core/main/undertow-core-2.0.13.Final.jar!/) to constructor java.lang.String(char[],boolean)\n&gt; WARNING: Please consider reporting this to the maintainers of io.undertow.util.FlexBase64$1\n&gt; WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\n&gt; WARNING: All illegal access operations will be denied in a future release\n&gt; 12:51:13,429 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443\n&gt; 12:51:13,531 INFO  [org.jboss.ws.common.management] (MSC service thread 1-8) JBWS022052: Starting JBossWS 5.2.3.Final (Apache CXF 3.2.5.jbossorg-1) \n&gt; 12:51:15,606 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletServerHttpResponse$ResponseAsyncListener due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,606 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletHttpHandlerAdapter$HandlerResultAsyncListener due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.ServletServerHttpAsyncRequestControl due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.web.context.request.async.StandardServletAsyncWebRequest due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,794 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-7) ISPN000128: Infinispan version: Infinispan 'Estrella Galicia' 9.3.1.Final\n&gt; 12:51:15,966 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 72) WFLYCLINF0002: Started client-mappings cache from ejb container\n&gt; 12:51:16,075 INFO  [io.undertow.servlet] (ServerService Thread Pool -- 85) 1 Spring WebApplicationInitializers detected on classpath\n&gt; 12:51:16,153 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 85) Initializing Mojarra 2.3.5.SP2 for context '/SpringBoot-0.0.1'\n&gt; 12:51:16,761 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 85) Critical error during deployment: : com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:357)\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:243)\n&gt;   at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:443)\n&gt;   at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:237)\n&gt;   at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)\n&gt;   at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n&gt;   at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n&gt;   ...\n&gt;   at org.jboss.threads.JBossThread.run(JBossThread.java:485)\n&gt; Caused by: javax.faces.FacesException: Unable to find CDI BeanManager\n&gt;   at com.sun.faces.application.ApplicationImpl.isJsf23(ApplicationImpl.java:2714)\n&gt;   at com.sun.faces.application.ApplicationImpl.addELResolver(ApplicationImpl.java:549)\n&gt;   ...\n&gt;   at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:292)\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:354)\n&gt;   ... 29 more\n&gt; \n&gt; 12:51:16,761 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 85) MSC000001: Failed to start service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)\n&gt;   at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n&gt;   ...\n&gt;   at java.base/java.lang.Thread.run(Thread.java:825)\n&gt;   at org.jboss.threads.JBossThread.run(JBossThread.java:485)\n&gt; Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:252)\n&gt;   at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\n&gt;   at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\n&gt;   ... 8 more\n&gt; Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:315)\n&gt;   at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)\n&gt;   at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n&gt;   ...\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:250)\n&gt;   ... 10 more\n&gt; Caused by: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:357)\n&gt;   ...\n&gt;   at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:237)\n&gt;   ... 26 more\n&gt; Caused by: javax.faces.FacesException: Unable to find CDI BeanManager\n&gt;   at com.sun.faces.application.ApplicationImpl.isJsf23(ApplicationImpl.java:2714)\n&gt;   at com.sun.faces.application.ApplicationImpl.addELResolver(ApplicationImpl.java:549)\n&gt;   at org.jboss.as.jsf.injection.weld.WeldApplication.&lt;init&gt;(WeldApplication.java:60)\n&gt;   at org.jboss.as.jsf.injection.weld.WeldApplicationFactory.getApplication(WeldApplicationFactory.java:52)\n&gt;   at com.sun.faces.application.InjectionApplicationFactory.getApplication(InjectionApplicationFactory.java:88)\n&gt;   ... at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:292)\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:354)\n&gt;   ... 29 more\n&gt; \n&gt; 12:51:16,762 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;SpringBoot-0.0.1.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;SpringBoot-0.0.1.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;     Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;     Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;     Caused by: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;     Caused by: javax.faces.FacesException: Unable to find CDI BeanManager&quot;}}\n&gt; 12:51:16,762 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 42) WFLYSRV0010: Deployed &quot;SpringBoot-0.0.1.war&quot; (runtime-name : &quot;SpringBoot-0.0.1.war&quot;)\n&gt; 12:51:16,762 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report\n&gt; WFLYCTL0186:   Services which failed to start:      service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n</code></pre>\n"},{"tags":["java","search-engine","google-search","google-search-api"],"answers":[{"tags":[],"owner":{"account_id":6288600,"reputation":204,"user_id":4886983,"display_name":"BARHOUMI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686860186,"creation_date":1686860186,"answer_id":76485228,"question_id":76485035,"body_markdown":"You have to use q argument to define image url instead of imageUrl\r\n\r\n    https://customsearch.googleapis.com/customsearch/v1?key=AIzaSyCca5akhZ492pP08QBchz5Q4QA6kFYsBrc&amp;cx=923a7bcc712ee431d&amp;searchType=image&amp;q=https://media.gq.com/photos/5a5f79d52316871dcb3c837f/master/w_1600,c_limit/Dua_Lipa_02.jpg","title":"programmable search engine returns 400 Request contains an invalid argument","body":"<p>You have to use q argument to define image url instead of imageUrl</p>\n<pre><code>https://customsearch.googleapis.com/customsearch/v1?key=AIzaSyCca5akhZ492pP08QBchz5Q4QA6kFYsBrc&amp;cx=923a7bcc712ee431d&amp;searchType=image&amp;q=https://media.gq.com/photos/5a5f79d52316871dcb3c837f/master/w_1600,c_limit/Dua_Lipa_02.jpg\n</code></pre>\n"}],"owner":{"account_id":7405799,"reputation":625,"user_id":5634777,"accept_rate":38,"display_name":"kaka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686860186,"creation_date":1686858002,"question_id":76485035,"body_markdown":"When I call this url from Java code, postman or a web browser\r\n\r\n    URL:\r\n    https://customsearch.googleapis.com/customsearch/v1?key=AIzaSyCca5akhZ492pP08QBchz5Q4QA6kFYsBrc&amp;cx=923a7bcc712ee431d&amp;searchType=image&amp;imgUrl=https://media.gq.com/photos/5a5f79d52316871dcb3c837f/master/w_1600,c_limit/Dua_Lipa_02.jpg\r\n\r\nResponse:\r\n\r\n    {\r\n        &quot;error&quot;: {\r\n            &quot;code&quot;: 400,\r\n            &quot;message&quot;: &quot;Request contains an invalid argument.&quot;,\r\n            &quot;errors&quot;: [\r\n                {\r\n                    &quot;message&quot;: &quot;Request contains an invalid argument.&quot;,\r\n                    &quot;domain&quot;: &quot;global&quot;,\r\n                    &quot;reason&quot;: &quot;badRequest&quot;\r\n                }\r\n            ],\r\n            &quot;status&quot;: &quot;INVALID_ARGUMENT&quot;\r\n        }\r\n     }\r\n","title":"programmable search engine returns 400 Request contains an invalid argument","body":"<p>When I call this url from Java code, postman or a web browser</p>\n<pre><code>URL:\nhttps://customsearch.googleapis.com/customsearch/v1?key=AIzaSyCca5akhZ492pP08QBchz5Q4QA6kFYsBrc&amp;cx=923a7bcc712ee431d&amp;searchType=image&amp;imgUrl=https://media.gq.com/photos/5a5f79d52316871dcb3c837f/master/w_1600,c_limit/Dua_Lipa_02.jpg\n</code></pre>\n<p>Response:</p>\n<pre><code>{\n    &quot;error&quot;: {\n        &quot;code&quot;: 400,\n        &quot;message&quot;: &quot;Request contains an invalid argument.&quot;,\n        &quot;errors&quot;: [\n            {\n                &quot;message&quot;: &quot;Request contains an invalid argument.&quot;,\n                &quot;domain&quot;: &quot;global&quot;,\n                &quot;reason&quot;: &quot;badRequest&quot;\n            }\n        ],\n        &quot;status&quot;: &quot;INVALID_ARGUMENT&quot;\n    }\n }\n</code></pre>\n"},{"tags":["java","junit","mockito","junit5","powermockito"],"comments":[{"owner":{"account_id":5676770,"reputation":21,"user_id":4489635,"display_name":"Shubham Singh"},"score":0,"creation_date":1686859597,"post_id":76483691,"comment_id":134860008,"body_markdown":"Can someone help with this?","body":"Can someone help with this?"}],"owner":{"account_id":5676770,"reputation":21,"user_id":4489635,"display_name":"Shubham Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686859690,"creation_date":1686846217,"question_id":76483691,"body_markdown":"I am not able to write test case for a class which has a function and that function has ServiceBusReceivedMessageContext as the parameter. ServiceBusReceivedMessageContext class is final class.Can someone help me to write test case for the method processMessage? I am not able to use mockito. I am writing test case for processMessage, but since ServiceBusReceivedMessageContext is final class and present in third party jar, how can it be possible to write test case for this method.\r\n\r\n\r\n```\r\npublic void processMessage(ServiceBusReceivedMessageContext context) {\r\n        try {\r\n            ServiceBusReceivedMessage message = context.getMessage();\r\n            \r\n        } catch (Exception e) {\r\n            log.error(&quot;Unhandled exception occurred while processing message: {}&quot;, e.getMessage(), e);\r\n            //throw new RuntimeException(&quot;Error processing message&quot;, e);\r\n        }\r\n    }\r\n\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\npackage com.azure.messaging.servicebus;\r\n\r\nimport com.azure.messaging.servicebus.models.AbandonOptions;\r\nimport com.azure.messaging.servicebus.models.CompleteOptions;\r\nimport com.azure.messaging.servicebus.models.DeadLetterOptions;\r\nimport com.azure.messaging.servicebus.models.DeferOptions;\r\n\r\nimport java.util.Objects;\r\n\r\n/**\r\n * The Service Bus processor message context that holds a received message and additional methods to settle the message.\r\n */\r\npublic final class ServiceBusReceivedMessageContext {\r\n    private final ServiceBusMessageContext receivedMessageContext;\r\n    private final ServiceBusReceiverAsyncClient receiverClient;\r\n    private final String fullyQualifiedNamespace;\r\n    private final String entityPath;\r\n\r\n    ServiceBusReceivedMessageContext(ServiceBusReceiverAsyncClient receiverClient,\r\n                                     ServiceBusMessageContext receivedMessageContext) {\r\n        this.receivedMessageContext = Objects.requireNonNull(receivedMessageContext,\r\n            &quot;&#39;receivedMessageContext&#39; cannot be null&quot;);\r\n        this.receiverClient = Objects.requireNonNull(receiverClient, &quot;&#39;receiverClient&#39; cannot be null&quot;);\r\n        entityPath = receiverClient.getEntityPath();\r\n        fullyQualifiedNamespace = receiverClient.getFullyQualifiedNamespace();\r\n    }\r\n\r\n    /**\r\n     * Gets the message received from Service Bus.\r\n     *\r\n     * @return The message received from Service Bus.\r\n     */\r\n    public ServiceBusReceivedMessage getMessage() {\r\n        return receivedMessageContext.getMessage();\r\n    }\r\n\r\n\r\n    /**\r\n     *  Gets the Service Bus resource this instance of {@link ServiceBusProcessorClient} interacts with.\r\n     *\r\n     * @return The Service Bus resource this instance of {@link ServiceBusProcessorClient} interacts with.\r\n     */\r\n    public String getEntityPath() {\r\n        return this.entityPath;\r\n    }\r\n\r\n    /**\r\n     * Gets the fully qualified Service Bus namespace that this instance of {@link ServiceBusProcessorClient}\r\n     * is associated with. This is likely similar to {@code {yournamespace}.servicebus.windows.net}.\r\n     *\r\n     * @return The fully qualified Service Bus namespace that this instance of {@link ServiceBusProcessorClient}\r\n     * is associated with.\r\n     */\r\n    public String getFullyQualifiedNamespace() {\r\n        return this.fullyQualifiedNamespace;\r\n    }\r\n\r\n    /**\r\n     * Abandons the {@link #getMessage() message} in this context.\r\n     */\r\n    public void abandon() {\r\n        receiverClient.abandon(receivedMessageContext.getMessage()).block();\r\n    }\r\n\r\n    /**\r\n     * Abandons the {@link #getMessage() message} in this context.\r\n     *\r\n     * @param options Additional options for abandoning the message.\r\n     */\r\n    public void abandon(AbandonOptions options) {\r\n        receiverClient.abandon(receivedMessageContext.getMessage(), options).block();\r\n    }\r\n\r\n    /**\r\n     * Completes the {@link #getMessage() message} in this context.\r\n     */\r\n    public void complete() {\r\n        receiverClient.complete(receivedMessageContext.getMessage()).block();\r\n    }\r\n\r\n    /**\r\n     * Completes the {@link #getMessage() message} in this context.\r\n     *\r\n     * @param options Additional options for completing the message.\r\n     * @throws NullPointerException if {@code options} are null.\r\n     */\r\n    public void complete(CompleteOptions options) {\r\n        receiverClient.complete(receivedMessageContext.getMessage(), options).block();\r\n    }\r\n\r\n    /**\r\n     * Defers the {@link #getMessage() message} in this context.\r\n     */\r\n    public void defer() {\r\n        receiverClient.defer(receivedMessageContext.getMessage()).block();\r\n    }\r\n\r\n    /**\r\n     * Defers the {@link #getMessage() message} in this context.\r\n     *\r\n     * @param options Additional options for deferring the message.\r\n     * @throws NullPointerException if {@code options} are null.\r\n     */\r\n    public void defer(DeferOptions options) {\r\n        receiverClient.defer(receivedMessageContext.getMessage(), options).block();\r\n    }\r\n\r\n    /**\r\n     * Dead-letters the {@link #getMessage() message} in this context.\r\n     */\r\n    public void deadLetter() {\r\n        receiverClient.deadLetter(receivedMessageContext.getMessage()).block();\r\n    }\r\n\r\n    /**\r\n     * Dead-letters the {@link #getMessage() message} in this context.\r\n     *\r\n     * @param options Additional options for dead-lettering the message.\r\n     *\r\n     * @throws NullPointerException if {@code options} are null.\r\n     */\r\n    public void deadLetter(DeadLetterOptions options) {\r\n        receiverClient.deadLetter(receivedMessageContext.getMessage(), options).block();\r\n    }\r\n}\r\n\r\n```\r\n","title":"How to write a test for a class which has a method and parameter in this method is of ServiceBusReceivedMessageContext?","body":"<p>I am not able to write test case for a class which has a function and that function has ServiceBusReceivedMessageContext as the parameter. ServiceBusReceivedMessageContext class is final class.Can someone help me to write test case for the method processMessage? I am not able to use mockito. I am writing test case for processMessage, but since ServiceBusReceivedMessageContext is final class and present in third party jar, how can it be possible to write test case for this method.</p>\n<pre><code>public void processMessage(ServiceBusReceivedMessageContext context) {\n        try {\n            ServiceBusReceivedMessage message = context.getMessage();\n            \n        } catch (Exception e) {\n            log.error(&quot;Unhandled exception occurred while processing message: {}&quot;, e.getMessage(), e);\n            //throw new RuntimeException(&quot;Error processing message&quot;, e);\n        }\n    }\n\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\npackage com.azure.messaging.servicebus;\n\nimport com.azure.messaging.servicebus.models.AbandonOptions;\nimport com.azure.messaging.servicebus.models.CompleteOptions;\nimport com.azure.messaging.servicebus.models.DeadLetterOptions;\nimport com.azure.messaging.servicebus.models.DeferOptions;\n\nimport java.util.Objects;\n\n/**\n * The Service Bus processor message context that holds a received message and additional methods to settle the message.\n */\npublic final class ServiceBusReceivedMessageContext {\n    private final ServiceBusMessageContext receivedMessageContext;\n    private final ServiceBusReceiverAsyncClient receiverClient;\n    private final String fullyQualifiedNamespace;\n    private final String entityPath;\n\n    ServiceBusReceivedMessageContext(ServiceBusReceiverAsyncClient receiverClient,\n                                     ServiceBusMessageContext receivedMessageContext) {\n        this.receivedMessageContext = Objects.requireNonNull(receivedMessageContext,\n            &quot;'receivedMessageContext' cannot be null&quot;);\n        this.receiverClient = Objects.requireNonNull(receiverClient, &quot;'receiverClient' cannot be null&quot;);\n        entityPath = receiverClient.getEntityPath();\n        fullyQualifiedNamespace = receiverClient.getFullyQualifiedNamespace();\n    }\n\n    /**\n     * Gets the message received from Service Bus.\n     *\n     * @return The message received from Service Bus.\n     */\n    public ServiceBusReceivedMessage getMessage() {\n        return receivedMessageContext.getMessage();\n    }\n\n\n    /**\n     *  Gets the Service Bus resource this instance of {@link ServiceBusProcessorClient} interacts with.\n     *\n     * @return The Service Bus resource this instance of {@link ServiceBusProcessorClient} interacts with.\n     */\n    public String getEntityPath() {\n        return this.entityPath;\n    }\n\n    /**\n     * Gets the fully qualified Service Bus namespace that this instance of {@link ServiceBusProcessorClient}\n     * is associated with. This is likely similar to {@code {yournamespace}.servicebus.windows.net}.\n     *\n     * @return The fully qualified Service Bus namespace that this instance of {@link ServiceBusProcessorClient}\n     * is associated with.\n     */\n    public String getFullyQualifiedNamespace() {\n        return this.fullyQualifiedNamespace;\n    }\n\n    /**\n     * Abandons the {@link #getMessage() message} in this context.\n     */\n    public void abandon() {\n        receiverClient.abandon(receivedMessageContext.getMessage()).block();\n    }\n\n    /**\n     * Abandons the {@link #getMessage() message} in this context.\n     *\n     * @param options Additional options for abandoning the message.\n     */\n    public void abandon(AbandonOptions options) {\n        receiverClient.abandon(receivedMessageContext.getMessage(), options).block();\n    }\n\n    /**\n     * Completes the {@link #getMessage() message} in this context.\n     */\n    public void complete() {\n        receiverClient.complete(receivedMessageContext.getMessage()).block();\n    }\n\n    /**\n     * Completes the {@link #getMessage() message} in this context.\n     *\n     * @param options Additional options for completing the message.\n     * @throws NullPointerException if {@code options} are null.\n     */\n    public void complete(CompleteOptions options) {\n        receiverClient.complete(receivedMessageContext.getMessage(), options).block();\n    }\n\n    /**\n     * Defers the {@link #getMessage() message} in this context.\n     */\n    public void defer() {\n        receiverClient.defer(receivedMessageContext.getMessage()).block();\n    }\n\n    /**\n     * Defers the {@link #getMessage() message} in this context.\n     *\n     * @param options Additional options for deferring the message.\n     * @throws NullPointerException if {@code options} are null.\n     */\n    public void defer(DeferOptions options) {\n        receiverClient.defer(receivedMessageContext.getMessage(), options).block();\n    }\n\n    /**\n     * Dead-letters the {@link #getMessage() message} in this context.\n     */\n    public void deadLetter() {\n        receiverClient.deadLetter(receivedMessageContext.getMessage()).block();\n    }\n\n    /**\n     * Dead-letters the {@link #getMessage() message} in this context.\n     *\n     * @param options Additional options for dead-lettering the message.\n     *\n     * @throws NullPointerException if {@code options} are null.\n     */\n    public void deadLetter(DeadLetterOptions options) {\n        receiverClient.deadLetter(receivedMessageContext.getMessage(), options).block();\n    }\n}\n\n</code></pre>\n"},{"tags":["java","enums","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1686859676,"creation_date":1617000818,"answer_id":66849821,"question_id":66795984,"body_markdown":"This can be done using `MappingConstants.THROW_EXCEPTION` and setting it to a `ValueMapping#target`.\r\n\r\nSo in this example in order to throw an exception for any remaining mapping you can write:\r\n\r\n```\r\n@ValueMapping(source = MappingConstants.ANY_REMAINING, target = MappingConstants.THROW_EXCEPTION)\r\n```\r\n\r\n**Note** this is available from version 1.5","title":"How to configure MapStruct to throw an exception when enum values can&#39;t be mapped","body":"<p>This can be done using <code>MappingConstants.THROW_EXCEPTION</code> and setting it to a <code>ValueMapping#target</code>.</p>\n<p>So in this example in order to throw an exception for any remaining mapping you can write:</p>\n<pre><code>@ValueMapping(source = MappingConstants.ANY_REMAINING, target = MappingConstants.THROW_EXCEPTION)\n</code></pre>\n<p><strong>Note</strong> this is available from version 1.5</p>\n"}],"owner":{"account_id":148117,"reputation":3294,"user_id":359666,"accept_rate":74,"display_name":"Uros K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6901,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":66849821,"answer_count":1,"score":5,"last_activity_date":1686859676,"creation_date":1616662321,"question_id":66795984,"body_markdown":"This is my Mapper:\r\n```java\r\n@Mapper\r\npublic interface ProductMapper {\r\n    ProductClassification toProductClassification(ProductTypes pisType);\r\n}\r\n```\r\nWhere `ProductTypes` and `ProductClassification` are enums. I want it to throw an exception when it can&#39;t map the enums, but I get compiler error:\r\n`The following constants from the source enum have\r\nno corresponding constant in the target enum and must be be mapped via adding additional mappings: EXTERNAL, UNKNOWN.`\r\n\r\nI tried with `@ValueMappings` annotation, but can only configure it to set the value to null, which is not sufficient:\r\n```java\r\n@ValueMappings({\r\n    @ValueMapping(source = MappingConstants.ANY_REMAINING, target = MappingConstants.NULL)\r\n})\r\n```\r\n\r\nWhat would be the right way to configure MapStruct mapper to throw an exception when it can&#39;t map enum constants?","title":"How to configure MapStruct to throw an exception when enum values can&#39;t be mapped","body":"<p>This is my Mapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface ProductMapper {\n    ProductClassification toProductClassification(ProductTypes pisType);\n}\n</code></pre>\n<p>Where <code>ProductTypes</code> and <code>ProductClassification</code> are enums. I want it to throw an exception when it can't map the enums, but I get compiler error:\n<code>The following constants from the source enum have no corresponding constant in the target enum and must be be mapped via adding additional mappings: EXTERNAL, UNKNOWN.</code></p>\n<p>I tried with <code>@ValueMappings</code> annotation, but can only configure it to set the value to null, which is not sufficient:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ValueMappings({\n    @ValueMapping(source = MappingConstants.ANY_REMAINING, target = MappingConstants.NULL)\n})\n</code></pre>\n<p>What would be the right way to configure MapStruct mapper to throw an exception when it can't map enum constants?</p>\n"},{"tags":["java","function","methods"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1686857684,"post_id":76484983,"comment_id":134859679,"body_markdown":"Calling `(int) VALUE` would cast a `float` to an `int` in Java. In Java, casting is not a function call like in Python. In Java, you just place the type you want in parenthesis before the value you want to cast. Python and Java are two very different languages. If you want to learn Java, set aside what you know about Python and read some Java tutorials to get a better understanding. The `Math.round` static method (or function as you may) has a lot more overhead than a simple typecast. Also, casting to an `int` truncates the decimal, it does not round it. So both may have different output.","body":"Calling <code>(int) VALUE</code> would cast a <code>float</code> to an <code>int</code> in Java. In Java, casting is not a function call like in Python. In Java, you just place the type you want in parenthesis before the value you want to cast. Python and Java are two very different languages. If you want to learn Java, set aside what you know about Python and read some Java tutorials to get a better understanding. The <code>Math.round</code> static method (or function as you may) has a lot more overhead than a simple typecast. Also, casting to an <code>int</code> truncates the decimal, it does not round it. So both may have different output."},{"owner":{"account_id":21161580,"reputation":119,"user_id":16547129,"display_name":"AlexFullinator"},"score":0,"creation_date":1686857921,"post_id":76484983,"comment_id":134859716,"body_markdown":"@Mr.Polywhirl Oh, thanks for the info. So, is casting values the only time you&#39;d do something like `(int) VALUE`?","body":"@Mr.Polywhirl Oh, thanks for the info. So, is casting values the only time you&#39;d do something like <code>(int) VALUE</code>?"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1686857979,"post_id":76484983,"comment_id":134859731,"body_markdown":"Yes, casting a value does not require a function call, but you could have a method that internally casts a value and returns a new one.","body":"Yes, casting a value does not require a function call, but you could have a method that internally casts a value and returns a new one."},{"owner":{"account_id":21161580,"reputation":119,"user_id":16547129,"display_name":"AlexFullinator"},"score":0,"creation_date":1686858039,"post_id":76484983,"comment_id":134859744,"body_markdown":"@Mr.Polywhirl Alright, thanks so much for the clarification on this!","body":"@Mr.Polywhirl Alright, thanks so much for the clarification on this!"}],"answers":[{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686858971,"creation_date":1686858558,"answer_id":76485090,"question_id":76484983,"body_markdown":"It depends on how you want to &quot;cast&quot;.\r\n\r\n1. If you are parsing a string in Python, you would call `int(str)`, but in Java you would have to use the boxed type&#39;s (`Integer.class`) static parsing method i.e `Integer.parseInt(str)`\r\n\r\n   ```py\r\n   # Python\r\n   str_val = &#39;42&#39;\r\n   int_val = int(str_val) # 42\r\n   print(type(str_val))   # &lt;class &#39;str&#39;&gt;\r\n   print(type(int_val))   # &lt;class &#39;int&#39;&gt;\r\n   ```\r\n\r\n   ```java\r\n   /* Java */\r\n   String strVal = &quot;42&quot;;\r\n   int intVal = Integer.parseInt(strVal); // 42\r\n   ```\r\n\r\n2. If you are converting a floating-point in Python, you would call `int(floating_value)`, but in Java you would simply place the desired type i.e. `(int)` before the value i.e. `(int) floatingValue`.\r\n\r\n   ```py\r\n   # Python\r\n   floating_value = 3.14\r\n   int_val = int(floating_value) # 3\r\n   print(type(floating_value))   # &lt;class &#39;float&#39;&gt;\r\n   print(type(int_val))          # &lt;class &#39;int&#39;&gt;\r\n   ```\r\n\r\n   ```java\r\n   /* Java */\r\n   float floatingVal = 3.14;\r\n   int intVal = (int) floatingVal; // 3\r\n   ```\r\n\r\nPython treats typecasting and parsing very similarly.","title":"Differences between some functions in Java","body":"<p>It depends on how you want to &quot;cast&quot;.</p>\n<ol>\n<li><p>If you are parsing a string in Python, you would call <code>int(str)</code>, but in Java you would have to use the boxed type's (<code>Integer.class</code>) static parsing method i.e <code>Integer.parseInt(str)</code></p>\n<pre class=\"lang-py prettyprint-override\"><code># Python\nstr_val = '42'\nint_val = int(str_val) # 42\nprint(type(str_val))   # &lt;class 'str'&gt;\nprint(type(int_val))   # &lt;class 'int'&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>/* Java */\nString strVal = &quot;42&quot;;\nint intVal = Integer.parseInt(strVal); // 42\n</code></pre>\n</li>\n<li><p>If you are converting a floating-point in Python, you would call <code>int(floating_value)</code>, but in Java you would simply place the desired type i.e. <code>(int)</code> before the value i.e. <code>(int) floatingValue</code>.</p>\n<pre class=\"lang-py prettyprint-override\"><code># Python\nfloating_value = 3.14\nint_val = int(floating_value) # 3\nprint(type(floating_value))   # &lt;class 'float'&gt;\nprint(type(int_val))          # &lt;class 'int'&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>/* Java */\nfloat floatingVal = 3.14;\nint intVal = (int) floatingVal; // 3\n</code></pre>\n</li>\n</ol>\n<p>Python treats typecasting and parsing very similarly.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686858872,"creation_date":1686858872,"answer_id":76485113,"question_id":76484983,"body_markdown":"To preface, you mention the following.\r\n\r\n&gt; _&quot;... In Python, the equivalent to casting to an integer is `int(VALUE)` ...&quot;_\r\n\r\nThe _[Math#round](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#round(double))_ function may not be the procedure you&#39;re looking for.\r\n\r\nIn Java, you can cast a _[String](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html)_ value to an _[int](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)_ value using the _[Integer#parseInt](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String))_ method.\r\n\r\n```java\r\nint value = Integer.parseInt(&quot;123&quot;);\r\n```\r\n\r\n&gt; _&quot;... I am curious about the difference between using the `Math.round(VALUE)` function versus casting to an integer like `(int) VALUE` ...&quot;_\r\n\r\nIf you are speaking in terms of a rounding mode, then the _Math#round_ method is going to round towards positive infinity.\r\n\r\nConsider the following demonstration.\r\n\r\n```java\r\ndouble[] values = { 5.5, 2.5, 1.6, 1.1, 1.0, -1.0, -1.1, -1.6, -2.5, -5.5 };\r\nfor (double value : values)\r\n    System.out.printf(&quot;%4.1f to %2d%n&quot;, value, Math.round(value));\r\n```\r\n```none\r\n 5.5 to  6\r\n 2.5 to  3\r\n 1.6 to  2\r\n 1.1 to  1\r\n 1.0 to  1\r\n-1.0 to -1\r\n-1.1 to -1\r\n-1.6 to -2\r\n-2.5 to -2\r\n-5.5 to -5\r\n```\r\n\r\nWhereas, a cast to an _int_ is going to simply truncate the fractional value.  \r\nNo rounding will occur.\r\n\r\n```java\r\ndouble[] values = { 5.5, 2.5, 1.6, 1.1, 1.0, -1.0, -1.1, -1.6, -2.5, -5.5 };\r\nfor (double value : values)\r\n    System.out.printf(&quot;%4.1f to %2d%n&quot;, value, (int) value);\r\n```\r\n```none\r\n 5.5 to  5\r\n 2.5 to  2\r\n 1.6 to  1\r\n 1.1 to  1\r\n 1.0 to  1\r\n-1.0 to -1\r\n-1.1 to -1\r\n-1.6 to -1\r\n-2.5 to -2\r\n-5.5 to -5\r\n```","title":"Differences between some functions in Java","body":"<p>To preface, you mention the following.</p>\n<blockquote>\n<p><em>&quot;... In Python, the equivalent to casting to an integer is <code>int(VALUE)</code> ...&quot;</em></p>\n</blockquote>\n<p>The <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#round(double)\" rel=\"nofollow noreferrer\">Math#round</a></em> function may not be the procedure you're looking for.</p>\n<p>In Java, you can cast a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html\" rel=\"nofollow noreferrer\">String</a></em> value to an <em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">int</a></em> value using the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"nofollow noreferrer\">Integer#parseInt</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int value = Integer.parseInt(&quot;123&quot;);\n</code></pre>\n<blockquote>\n<p><em>&quot;... I am curious about the difference between using the <code>Math.round(VALUE)</code> function versus casting to an integer like <code>(int) VALUE</code> ...&quot;</em></p>\n</blockquote>\n<p>If you are speaking in terms of a rounding mode, then the <em>Math#round</em> method is going to round towards positive infinity.</p>\n<p>Consider the following demonstration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] values = { 5.5, 2.5, 1.6, 1.1, 1.0, -1.0, -1.1, -1.6, -2.5, -5.5 };\nfor (double value : values)\n    System.out.printf(&quot;%4.1f to %2d%n&quot;, value, Math.round(value));\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code> 5.5 to  6\n 2.5 to  3\n 1.6 to  2\n 1.1 to  1\n 1.0 to  1\n-1.0 to -1\n-1.1 to -1\n-1.6 to -2\n-2.5 to -2\n-5.5 to -5\n</code></pre>\n<p>Whereas, a cast to an <em>int</em> is going to simply truncate the fractional value.<br />\nNo rounding will occur.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] values = { 5.5, 2.5, 1.6, 1.1, 1.0, -1.0, -1.1, -1.6, -2.5, -5.5 };\nfor (double value : values)\n    System.out.printf(&quot;%4.1f to %2d%n&quot;, value, (int) value);\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code> 5.5 to  5\n 2.5 to  2\n 1.6 to  1\n 1.1 to  1\n 1.0 to  1\n-1.0 to -1\n-1.1 to -1\n-1.6 to -1\n-2.5 to -2\n-5.5 to -5\n</code></pre>\n"}],"owner":{"account_id":21161580,"reputation":119,"user_id":16547129,"display_name":"AlexFullinator"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1686858971,"creation_date":1686857492,"question_id":76484983,"body_markdown":"I am new to Java and coming from a background in Python. I am curious about the difference between using the `Math.round(VALUE)` function versus casting to an integer like `(int) VALUE`. In Python, the equivalent to casting to an integer is `int(VALUE)`, so I am struggling to understand the distinction in Java. Can someone explain this difference to me?","title":"Differences between some functions in Java","body":"<p>I am new to Java and coming from a background in Python. I am curious about the difference between using the <code>Math.round(VALUE)</code> function versus casting to an integer like <code>(int) VALUE</code>. In Python, the equivalent to casting to an integer is <code>int(VALUE)</code>, so I am struggling to understand the distinction in Java. Can someone explain this difference to me?</p>\n"},{"tags":["java","jvm","garbage-collection"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686858037,"post_id":76484979,"comment_id":134859742,"body_markdown":"Which of the graphics is for which version of Java?","body":"Which of the graphics is for which version of Java?"},{"owner":{"account_id":1278736,"reputation":7363,"user_id":1233359,"accept_rate":73,"display_name":"Dreamer"},"score":0,"creation_date":1686858141,"post_id":76484979,"comment_id":134859769,"body_markdown":"@aled Sorry I forgot to mention all pictures are generated by JDK 11 except the 1st one","body":"@aled Sorry I forgot to mention all pictures are generated by JDK 11 except the 1st one"},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":1,"creation_date":1686860173,"post_id":76484979,"comment_id":134860112,"body_markdown":"presumably java 11 is more aggressive about unloading classes.  so you are probably seeing classes churn more over time.  but as long as your loaded classes is remaining stable, there shouldn&#39;t be any memory issues.","body":"presumably java 11 is more aggressive about unloading classes.  so you are probably seeing classes churn more over time.  but as long as your loaded classes is remaining stable, there shouldn&#39;t be any memory issues."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1686862745,"post_id":76484979,"comment_id":134860592,"body_markdown":"As long as metaspace is stable there is no issue. Classes are loaded into metaspace.","body":"As long as metaspace is stable there is no issue. Classes are loaded into metaspace."}],"owner":{"account_id":1278736,"reputation":7363,"user_id":1233359,"accept_rate":73,"display_name":"Dreamer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686858357,"creation_date":1686857458,"question_id":76484979,"body_markdown":"I am monitoring an application after JDK 11 upgrade from 8. What I found interesting is compare with JDK 8, JDK 11 has significantly increased `Total Loaded Classes` by time compared to JDK 8, despite the `Load Classes` is being steady.\r\n\r\nCan I confirm if Loaded Classes count is being stable, then Total Loaded Classes raised over time should not be a concern as long as heap/non-heap memories are also being stable?\r\n\r\n---Java 8--- (total loaded vs loaded seems to be unchanged over time)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n----Java 11----\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/82Hi5.png\r\n  [2]: https://i.stack.imgur.com/z8Bgn.png\r\n  [3]: https://i.stack.imgur.com/ljKO5.png\r\n  [4]: https://i.stack.imgur.com/oWQLc.png\r\n  [5]: https://i.stack.imgur.com/Uyi6A.png","title":"jvm - total loaded classes vs loaded classes","body":"<p>I am monitoring an application after JDK 11 upgrade from 8. What I found interesting is compare with JDK 8, JDK 11 has significantly increased <code>Total Loaded Classes</code> by time compared to JDK 8, despite the <code>Load Classes</code> is being steady.</p>\n<p>Can I confirm if Loaded Classes count is being stable, then Total Loaded Classes raised over time should not be a concern as long as heap/non-heap memories are also being stable?</p>\n<p>---Java 8--- (total loaded vs loaded seems to be unchanged over time)</p>\n<p><a href=\"https://i.stack.imgur.com/82Hi5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/82Hi5.png\" alt=\"enter image description here\" /></a></p>\n<p>----Java 11----</p>\n<p><a href=\"https://i.stack.imgur.com/z8Bgn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z8Bgn.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ljKO5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ljKO5.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/oWQLc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oWQLc.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Uyi6A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uyi6A.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","mongodb","converters","spring-data-mongodb","mongodb-java"],"answers":[{"tags":[],"owner":{"account_id":6288600,"reputation":204,"user_id":4886983,"display_name":"BARHOUMI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686857924,"creation_date":1686857924,"answer_id":76485029,"question_id":76468636,"body_markdown":"converter must be like this: \r\n\r\n    public class ArrayListToMapConverter implements Converter&lt;ArrayList, Map&lt;String, Object&gt;&gt; {\r\n\t@Override\r\n\tpublic Map&lt;String, Object&gt; convert(ArrayList source) {\r\n\t\tMap&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();\r\n\t\tfor (Object item : source) {\r\n\t\t\tif (item instanceof Map) {\r\n\t\t\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\t\t\tMap&lt;String, Object&gt; mapItem = (Map&lt;String, Object&gt;) item;\r\n\t\t\t\tresultMap.putAll(mapItem);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultMap;\r\n\t}\r\n}","title":"Custom converter spring data mongodb","body":"<p>converter must be like this:</p>\n<pre><code>public class ArrayListToMapConverter implements Converter&lt;ArrayList, Map&lt;String, Object&gt;&gt; {\n@Override\npublic Map&lt;String, Object&gt; convert(ArrayList source) {\n    Map&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();\n    for (Object item : source) {\n        if (item instanceof Map) {\n            @SuppressWarnings(&quot;unchecked&quot;)\n            Map&lt;String, Object&gt; mapItem = (Map&lt;String, Object&gt;) item;\n            resultMap.putAll(mapItem);\n        }\n    }\n    return resultMap;\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":6288600,"reputation":204,"user_id":4886983,"display_name":"BARHOUMI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":608,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686857924,"creation_date":1686689560,"question_id":76468636,"body_markdown":"I&#39;m trying to implement mu custom converter to be used in a specific find m&#233;thode. \r\nSo i implemented another mongoConfig with a custom mongoTemplate uses my custom converter as bellow.\r\n\r\nHere my attribute declared inside my entity called CommOutPut.\r\n\r\n    private List&lt;Map&lt;String, Object&gt;&gt; calls;\r\n\r\nMy find m&#233;thode is defined as bellow: \r\n\r\n    public List&lt;CommOutput&gt; getListCommSupervision(Date startDate, Date endDate, String whereComp) {\r\n\t\tQuery query = new Query();\r\n\t\tif (startDate != null &amp;&amp; endDate != null) {\r\n\t\t\tquery.addCriteria(Criteria.where(&quot;creationDate&quot;).gte(startDate).lte(endDate));\r\n\t\t} else {\r\n\t\t\tif (whereComp != null) {\r\n\t\t\t\tCriteria criteria = Criteria.where(StringUtils.substringBefore(whereComp, &quot;:&quot;)).is(StringUtils.substringAfter(whereComp, &quot;:&quot;));\r\n\t\t\t\tquery.addCriteria(criteria);\r\n\t\t\t}\r\n\t\t}\r\n\t\tquery.with(Sort.by(&quot;_id&quot;));\r\n\t\tquery.fields().include(&quot;creationDate&quot;).include(&quot;_id&quot;).include(&quot;commStatus&quot;)\r\n\t\t\t\t.include(&quot;commId&quot;).include(&quot;personId&quot;).include(&quot;sendWay&quot;)\r\n\t\t\t\t.include(&quot;commForceTreatment&quot;).include(&quot;errors&quot;).include(&quot;sysSourceIds&quot;)\r\n\t\t\t\t.include(&quot;calls.segmentId&quot;).include(&quot;calls.isFailureAllowed&quot;).include(&quot;calls.retHttp&quot;)\r\n\t\t\t\t.include(&quot;calls.retCode&quot;).include(&quot;orderStatus&quot;).include(&quot;commVectorStatus&quot;)\r\n\t\t\t\t.include(&quot;distributorId&quot;);\r\n\t\t\r\n\t\treturn mongoTemplateCustom.find(query, CommOutput.class);\r\n\t}\r\n\r\nMy original mongoConfig Bean:\r\n\r\n    @Configuration\r\n\t@Data\r\n\tpublic class MongoDaoTools extends MongoAutoConfiguration {\r\n\t\tprivate String env;\r\n\t\t\r\n\t\tprivate final DatabaseProperties properties;\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic MappingMongoConverter mappingMongoConverter(MongoDatabaseFactory databaseFactory) {\r\n\t\t\tMongoMappingContext context = new MongoMappingContext();\r\n\t\t\tDbRefResolver dbRefResolver = new DefaultDbRefResolver(databaseFactory);\r\n\t\t\tMappingMongoConverter converter = new MappingMongoConverter(dbRefResolver, context);\r\n\t\t\tconverter.setTypeMapper(new DefaultMongoTypeMapper(null));\r\n\t\t\tconverter.afterPropertiesSet();\r\n\t\t\treturn converter;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic MongoClient mongoClient() {\r\n\t\t\tConnectionString connectionString = new ConnectionString(properties.getDatabaseUri());\r\n\t\t\treturn MongoClients.create(connectionString);\r\n\t\t}\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic MongoDatabaseFactory mongoDatabaseFactory(MongoClient client) {\r\n\t\t\treturn new SimpleMongoClientDatabaseFactory(client, properties.getDatabase());\r\n\t\t}\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic MongoTemplate mongoTemplate(MongoDatabaseFactory databaseFactory,MappingMongoConverter mappingMongoConverter) throws Exception {\r\n\t\t\treturn new MongoTemplate(databaseFactory,mappingMongoConverter);\r\n\t\t}\r\n\t}\r\n\r\nMy converter class annotated with @ReadingConverter: \r\n\r\n    public class ArrayListToMapConverter implements Converter&lt;ArrayList, List&lt;Map&lt;String, Object&gt;&gt;&gt; {\r\n\t@Override\r\n\tpublic List&lt;Map&lt;String, Object&gt;&gt; convert(ArrayList source) {\r\n\t\tSystem.out.println(&quot;**************il est dans convert***************&quot;);\r\n\t\tList&lt;Map&lt;String, Object&gt;&gt; resultList = new ArrayList&lt;&gt;();\r\n\t\tfor (Object item : source) {\r\n\t\t\tif (item instanceof Map) {\r\n\t\t\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\t\t\tMap&lt;String, Object&gt; mapItem = (Map&lt;String, Object&gt;) item;\r\n\t\t\t\tresultList.add(mapItem);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultList;\r\n\t}\r\n}\r\n\r\n \r\n\r\nHere my custom mongoConfig contains my custom converter annotated with @Configuration: \r\n\r\n    public class MongoConfig extends MongoAutoConfiguration {\r\n\tprivate final DatabaseProperties properties;\r\n\t\r\n\tpublic MongoConfig(DatabaseProperties properties) {\r\n\t\tthis.properties = properties;\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@Primary\r\n\tpublic MongoClient mongoClient() {\r\n\t\tConnectionString connectionString = new ConnectionString(properties.getDatabaseUri());\r\n\t\treturn MongoClients.create(connectionString);\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@Primary\r\n\tpublic MongoDatabaseFactory mongoDatabaseFactory(MongoClient client) {\r\n\t\treturn new SimpleMongoClientDatabaseFactory(client, properties.getDatabase());\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@Qualifier(&quot;mongoTemplateCustom&quot;)\r\n\tpublic MongoTemplate mongoTemplateCustom(MongoDatabaseFactory databaseFactory) {\r\n\t\tMongoMappingContext context = new MongoMappingContext();\r\n\t\tDbRefResolver dbRefResolver = new DefaultDbRefResolver(databaseFactory);\r\n\t\tMappingMongoConverter converter = new MappingMongoConverter(dbRefResolver, context);\r\n\t\tconverter.setCustomConversions(customConversions());\r\n\t\tconverter.setTypeMapper(new DefaultMongoTypeMapper(null));\r\n\t\treturn new MongoTemplate(databaseFactory, converter);\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t@Bean\r\n\t@Primary\r\n\tpublic MongoCustomConversions customConversions() {\r\n\t\tSystem.out.println(&quot;Il passe par l&#224;&#224;&#224;&#224;&#224;&#224;&#224;&quot;);\r\n\t\tList&lt;Converter&lt;?, ?&gt;&gt; converters = new ArrayList&lt;&gt;();\r\n\t\tconverters.add(new ArrayListToMapConverter());\r\n\t\treturn new MongoCustomConversions(converters);\r\n\t}\r\n}\r\n\r\n  \r\n\r\nAfter retrieving data from data base, i&#39;m performing a loop in my business layer and here is the issue! \r\n\r\n    if (comm.getCalls() != null &amp;&amp; !comm.getCalls().isEmpty()) {\r\n\t\t\tfor (Map&lt;String, Object&gt; call : comm.getCalls()) { // \r\n\r\njava.lang.ClassCastException: class java.util.ArrayList cannot be cast to class java.util.Map (java.util.ArrayList and java.util.Map are in module java.base of loader &#39;bootstrap&#39;)\r\n\r\nI guess that my converter was not be called correctly. \r\n\r\n\r\n","title":"Custom converter spring data mongodb","body":"<p>I'm trying to implement mu custom converter to be used in a specific find méthode.\nSo i implemented another mongoConfig with a custom mongoTemplate uses my custom converter as bellow.</p>\n<p>Here my attribute declared inside my entity called CommOutPut.</p>\n<pre><code>private List&lt;Map&lt;String, Object&gt;&gt; calls;\n</code></pre>\n<p>My find méthode is defined as bellow:</p>\n<pre><code>public List&lt;CommOutput&gt; getListCommSupervision(Date startDate, Date endDate, String whereComp) {\n    Query query = new Query();\n    if (startDate != null &amp;&amp; endDate != null) {\n        query.addCriteria(Criteria.where(&quot;creationDate&quot;).gte(startDate).lte(endDate));\n    } else {\n        if (whereComp != null) {\n            Criteria criteria = Criteria.where(StringUtils.substringBefore(whereComp, &quot;:&quot;)).is(StringUtils.substringAfter(whereComp, &quot;:&quot;));\n            query.addCriteria(criteria);\n        }\n    }\n    query.with(Sort.by(&quot;_id&quot;));\n    query.fields().include(&quot;creationDate&quot;).include(&quot;_id&quot;).include(&quot;commStatus&quot;)\n            .include(&quot;commId&quot;).include(&quot;personId&quot;).include(&quot;sendWay&quot;)\n            .include(&quot;commForceTreatment&quot;).include(&quot;errors&quot;).include(&quot;sysSourceIds&quot;)\n            .include(&quot;calls.segmentId&quot;).include(&quot;calls.isFailureAllowed&quot;).include(&quot;calls.retHttp&quot;)\n            .include(&quot;calls.retCode&quot;).include(&quot;orderStatus&quot;).include(&quot;commVectorStatus&quot;)\n            .include(&quot;distributorId&quot;);\n    \n    return mongoTemplateCustom.find(query, CommOutput.class);\n}\n</code></pre>\n<p>My original mongoConfig Bean:</p>\n<pre><code>@Configuration\n@Data\npublic class MongoDaoTools extends MongoAutoConfiguration {\n    private String env;\n    \n    private final DatabaseProperties properties;\n    \n    @Bean\n    public MappingMongoConverter mappingMongoConverter(MongoDatabaseFactory databaseFactory) {\n        MongoMappingContext context = new MongoMappingContext();\n        DbRefResolver dbRefResolver = new DefaultDbRefResolver(databaseFactory);\n        MappingMongoConverter converter = new MappingMongoConverter(dbRefResolver, context);\n        converter.setTypeMapper(new DefaultMongoTypeMapper(null));\n        converter.afterPropertiesSet();\n        return converter;\n    }\n    \n    \n    @Bean\n    public MongoClient mongoClient() {\n        ConnectionString connectionString = new ConnectionString(properties.getDatabaseUri());\n        return MongoClients.create(connectionString);\n    }\n    \n    @Bean\n    public MongoDatabaseFactory mongoDatabaseFactory(MongoClient client) {\n        return new SimpleMongoClientDatabaseFactory(client, properties.getDatabase());\n    }\n    \n    @Bean\n    public MongoTemplate mongoTemplate(MongoDatabaseFactory databaseFactory,MappingMongoConverter mappingMongoConverter) throws Exception {\n        return new MongoTemplate(databaseFactory,mappingMongoConverter);\n    }\n}\n</code></pre>\n<p>My converter class annotated with @ReadingConverter:</p>\n<pre><code>public class ArrayListToMapConverter implements Converter&lt;ArrayList, List&lt;Map&lt;String, Object&gt;&gt;&gt; {\n@Override\npublic List&lt;Map&lt;String, Object&gt;&gt; convert(ArrayList source) {\n    System.out.println(&quot;**************il est dans convert***************&quot;);\n    List&lt;Map&lt;String, Object&gt;&gt; resultList = new ArrayList&lt;&gt;();\n    for (Object item : source) {\n        if (item instanceof Map) {\n            @SuppressWarnings(&quot;unchecked&quot;)\n            Map&lt;String, Object&gt; mapItem = (Map&lt;String, Object&gt;) item;\n            resultList.add(mapItem);\n        }\n    }\n    return resultList;\n}\n</code></pre>\n<p>}</p>\n<p>Here my custom mongoConfig contains my custom converter annotated with @Configuration:</p>\n<pre><code>public class MongoConfig extends MongoAutoConfiguration {\nprivate final DatabaseProperties properties;\n\npublic MongoConfig(DatabaseProperties properties) {\n    this.properties = properties;\n}\n\n@Bean\n@Primary\npublic MongoClient mongoClient() {\n    ConnectionString connectionString = new ConnectionString(properties.getDatabaseUri());\n    return MongoClients.create(connectionString);\n}\n\n@Bean\n@Primary\npublic MongoDatabaseFactory mongoDatabaseFactory(MongoClient client) {\n    return new SimpleMongoClientDatabaseFactory(client, properties.getDatabase());\n}\n\n@Bean\n@Qualifier(&quot;mongoTemplateCustom&quot;)\npublic MongoTemplate mongoTemplateCustom(MongoDatabaseFactory databaseFactory) {\n    MongoMappingContext context = new MongoMappingContext();\n    DbRefResolver dbRefResolver = new DefaultDbRefResolver(databaseFactory);\n    MappingMongoConverter converter = new MappingMongoConverter(dbRefResolver, context);\n    converter.setCustomConversions(customConversions());\n    converter.setTypeMapper(new DefaultMongoTypeMapper(null));\n    return new MongoTemplate(databaseFactory, converter);\n}\n\n\n\n@Bean\n@Primary\npublic MongoCustomConversions customConversions() {\n    System.out.println(&quot;Il passe par lààààààà&quot;);\n    List&lt;Converter&lt;?, ?&gt;&gt; converters = new ArrayList&lt;&gt;();\n    converters.add(new ArrayListToMapConverter());\n    return new MongoCustomConversions(converters);\n}\n</code></pre>\n<p>}</p>\n<p>After retrieving data from data base, i'm performing a loop in my business layer and here is the issue!</p>\n<pre><code>if (comm.getCalls() != null &amp;&amp; !comm.getCalls().isEmpty()) {\n        for (Map&lt;String, Object&gt; call : comm.getCalls()) { // \n</code></pre>\n<p>java.lang.ClassCastException: class java.util.ArrayList cannot be cast to class java.util.Map (java.util.ArrayList and java.util.Map are in module java.base of loader 'bootstrap')</p>\n<p>I guess that my converter was not be called correctly.</p>\n"},{"tags":["java","connection-pooling","apache-commons-dbcp"],"comments":[{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1563963955,"post_id":57180501,"comment_id":100872420,"body_markdown":"What was the case of application got hang/unresponsive? was it a bug?","body":"What was the case of application got hang/unresponsive? was it a bug?"},{"owner":{"account_id":10281194,"reputation":11,"user_id":7586282,"display_name":"Sachin Kumar"},"score":0,"creation_date":1564037734,"post_id":57180501,"comment_id":100900517,"body_markdown":"No it was not a code bug. Let&#39;s assume there were maxActive connection limit = 20 and one request needs 2 connection. Then we hit 11 requests(means connections needed = 22) in parallel which lead to server unresponsive.","body":"No it was not a code bug. Let&#39;s assume there were maxActive connection limit = 20 and one request needs 2 connection. Then we hit 11 requests(means connections needed = 22) in parallel which lead to server unresponsive."},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1564048274,"post_id":57180501,"comment_id":100906307,"body_markdown":"Show your configuration","body":"Show your configuration"},{"owner":{"account_id":10281194,"reputation":11,"user_id":7586282,"display_name":"Sachin Kumar"},"score":0,"creation_date":1564129302,"post_id":57180501,"comment_id":100936586,"body_markdown":"`final BasicDataSource basicDataSource = new BasicDataSource();` `basicDataSource.setUrl(url);`\n`basicDataSource.setUsername(user);`\n`basicDataSource.setPassword(password);`\n`basicDataSource.setDriverClassName(driver);`\n`if (driver.contains(&quot;oracle&quot;)) {`\n`basicDataSource.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;);`\n`}`\n`basicDataSource.setMaxTotal(20);`\n`basicDataSource.setMaxIdle(20);`\n`basicDataSource.setDefaultAutoCommit(false);`","body":"<code>final BasicDataSource basicDataSource = new BasicDataSource();</code> <code>basicDataSource.setUrl(url);</code> <code>basicDataSource.setUsername(user);</code> <code>basicDataSource.setPassword(password);</code> <code>basicDataSource.setDriverClassName(driver);</code> <code>if (driver.contains(&quot;oracle&quot;)) {</code> <code>basicDataSource.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;);</code> <code>}</code> <code>basicDataSource.setMaxTotal(20);</code> <code>basicDataSource.setMaxIdle(20);</code> <code>basicDataSource.setDefaultAutoCommit(false);</code>"}],"answers":[{"tags":[],"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563965053,"creation_date":1563965053,"answer_id":57181050,"question_id":57180501,"body_markdown":"Motivations to limit the number of connections in a db-Pool\r\n\r\n - The maximum number of connections clients might create to a DBMS normally is limited. By limiting the number of connections a node can use at the same time, you can calculate the hard limit and avoid meeting it.\r\n - if your application has a connection leak, this will hopefully lead on a single node to an error, not on the complete cluster, so you can handle it earlier, not when the DBMS stops working because all possible connections a dangling.\r\n\r\n","title":"apache-commons-dbcp connection pooling maxActive parameter","body":"<p>Motivations to limit the number of connections in a db-Pool</p>\n\n<ul>\n<li>The maximum number of connections clients might create to a DBMS normally is limited. By limiting the number of connections a node can use at the same time, you can calculate the hard limit and avoid meeting it.</li>\n<li>if your application has a connection leak, this will hopefully lead on a single node to an error, not on the complete cluster, so you can handle it earlier, not when the DBMS stops working because all possible connections a dangling.</li>\n</ul>\n"}],"owner":{"account_id":10281194,"reputation":11,"user_id":7586282,"display_name":"Sachin Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1504,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1686857521,"creation_date":1563963230,"question_id":57180501,"body_markdown":"We are using Apache DBCP 1.4 for database connection pooling, with Java back-end, in our application. We set the value for maxActive = 20(by default), there was a scenario where requests needed more than 20 connection for execution. At that time application gets hang/unresponsive.\r\n\r\nI have increased the value to maxActive = 50. Then execution completes successfully. In documentation of Apache DBCP, I have seen we can put the value of maxActive = -1, and this will not set upper limit on connection creation. \r\nCan I set maxActive = -1, if not can you please help me understand why it is not desirable and also what can be descent value we can set for maxActive so that my application do not gets hang/unresponsive.\r\n\r\n```java\r\nfinal BasicDataSource basicDataSource = new BasicDataSource(); \r\n\r\nbasicDataSource.setUrl(url);\r\nbasicDataSource.setUsername(user);\r\nbasicDataSource.setPassword(password);\r\nbasicDataSource.setDriverClassName(driver);\r\n\r\nif (driver.contains(&quot;oracle&quot;)) {\r\n  basicDataSource.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;); } \r\n  basicDataSource.setMaxTotal(20);\r\n  basicDataSource.setMaxIdle(20); \r\n  basicDataSource.setDefaultAutoCommit(false);\r\n}\r\n```","title":"apache-commons-dbcp connection pooling maxActive parameter","body":"<p>We are using Apache DBCP 1.4 for database connection pooling, with Java back-end, in our application. We set the value for maxActive = 20(by default), there was a scenario where requests needed more than 20 connection for execution. At that time application gets hang/unresponsive.</p>\n<p>I have increased the value to maxActive = 50. Then execution completes successfully. In documentation of Apache DBCP, I have seen we can put the value of maxActive = -1, and this will not set upper limit on connection creation.\nCan I set maxActive = -1, if not can you please help me understand why it is not desirable and also what can be descent value we can set for maxActive so that my application do not gets hang/unresponsive.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final BasicDataSource basicDataSource = new BasicDataSource(); \n\nbasicDataSource.setUrl(url);\nbasicDataSource.setUsername(user);\nbasicDataSource.setPassword(password);\nbasicDataSource.setDriverClassName(driver);\n\nif (driver.contains(&quot;oracle&quot;)) {\n  basicDataSource.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;); } \n  basicDataSource.setMaxTotal(20);\n  basicDataSource.setMaxIdle(20); \n  basicDataSource.setDefaultAutoCommit(false);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit","mockito"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1686911169,"post_id":76484746,"comment_id":134866790,"body_markdown":"Please show your full test instead of random snippets. I suspect you are using `@SpringBootTest` to run your test but without seeing the test class this is impossible to answer.","body":"Please show your full test instead of random snippets. I suspect you are using <code>@SpringBootTest</code> to run your test but without seeing the test class this is impossible to answer."},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694951366,"post_id":76484746,"comment_id":135956315,"body_markdown":"Yes, `@Mock`/`@InjectMocks` is Mockito, whereas `@Autowired`/`@MockBean` is for Spring Boot based tests","body":"Yes, <code>@Mock</code>/<code>@InjectMocks</code> is Mockito, whereas <code>@Autowired</code>/<code>@MockBean</code> is for Spring Boot based tests"}],"answers":[{"tags":[],"owner":{"account_id":28829182,"reputation":31,"user_id":22080054,"display_name":"Dan901"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686857431,"creation_date":1686857431,"answer_id":76484975,"question_id":76484746,"body_markdown":"`@Mock` and `@InjectMocks` annotations have nothing to do with Spring so it doesn&#39;t matter how you autowire the dependencies in the `ProfileController` class. From the error you got it looks like you are running the test with `@SpringBootTest` where the application context is started so you would need to use the `@MockBean` annotations on `ProfileService` and others in order for them to be injected into the application context.\r\n\r\nAlternatively, you can have a basic unit test without starting the whole application context where `@Mock` and `@InjectMocks` annotations would work as you expect. Just make sure to properly initialize the mocks. The easiest way would be to annotate the test class with `@ExtendWith(MockitoExtension.class)`","title":"Spring Boot / JUnit 5 / Mockito - mocking dependencies in Test classes","body":"<p><code>@Mock</code> and <code>@InjectMocks</code> annotations have nothing to do with Spring so it doesn't matter how you autowire the dependencies in the <code>ProfileController</code> class. From the error you got it looks like you are running the test with <code>@SpringBootTest</code> where the application context is started so you would need to use the <code>@MockBean</code> annotations on <code>ProfileService</code> and others in order for them to be injected into the application context.</p>\n<p>Alternatively, you can have a basic unit test without starting the whole application context where <code>@Mock</code> and <code>@InjectMocks</code> annotations would work as you expect. Just make sure to properly initialize the mocks. The easiest way would be to annotate the test class with <code>@ExtendWith(MockitoExtension.class)</code></p>\n"}],"owner":{"account_id":9286335,"reputation":85,"user_id":6896096,"display_name":"scadh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686857431,"creation_date":1686855553,"question_id":76484746,"body_markdown":"I am trying to write JUnit 5 tests for a Spring Boot API but running into problem with dependency injection in the Test class. I wish to test endpoints in the ProfileController, which has 3 dependencies: ProfileService, ProfileModelAssembler (to add REST-centric decorations to json response, e.g. &quot;links&quot;) and ModelMapper. In my Test class, I have the following 3 annotated as shown:\r\n\r\n    @InjectMocks\r\n    ProfileController profileController;\r\n    \r\n    @Mock\r\n    ProfileService profileService;\r\n    \r\n    @Mock\r\n    ProfileModelAssembler profileModelAssembler;\r\n    \r\n    @Mock\r\n    ModelMapper modelMapper;\r\n\r\nWhen I try to run a test, it errors out instantiating the ProfileController due to unsatisfied dependency for the ProfileService (&quot;No qualifying bean of type x.ProfileService available&quot;).\r\n\r\nIn my ProfileController, I have tried to @Autowire those fields directly (not recommended, I know):\r\n\r\n    @Autowired\r\n    private ProfileService profileService;\r\n    @Autowired\r\n    private ProfileModelAssembler profileModelAssembler;\r\n    @Autowired\r\n    private ModelMapper modelMapper;\r\n\r\nas well as via constructor injection:\r\n\r\n    @Autowired\r\n    public ProfileController(ProfileService profileService, ProfileModelAssembler profileModelAssembler, ModelMapper modelMapper) {\r\n        this.profileService = profileService;\r\n        this.profileModelAssembler = profileModelAssembler;\r\n        this.modelMapper = modelMapper;\r\n    }\r\n\r\nError is the same either way. Tutorials I have found for JUnit and Mockito are absolutely all over the place in approach, doing things radically different from one another. I know there are always multiple solutions to a problem, but I&#39;ve been surprised at how little adherence to any sort of &quot;preferred&quot; practice there is. Any recommendations to eliminate this error or resources to which I could turn to learn JUnit/Mockito in a &quot;simple&quot; way for my relatively simple needs?","title":"Spring Boot / JUnit 5 / Mockito - mocking dependencies in Test classes","body":"<p>I am trying to write JUnit 5 tests for a Spring Boot API but running into problem with dependency injection in the Test class. I wish to test endpoints in the ProfileController, which has 3 dependencies: ProfileService, ProfileModelAssembler (to add REST-centric decorations to json response, e.g. &quot;links&quot;) and ModelMapper. In my Test class, I have the following 3 annotated as shown:</p>\n<pre><code>@InjectMocks\nProfileController profileController;\n\n@Mock\nProfileService profileService;\n\n@Mock\nProfileModelAssembler profileModelAssembler;\n\n@Mock\nModelMapper modelMapper;\n</code></pre>\n<p>When I try to run a test, it errors out instantiating the ProfileController due to unsatisfied dependency for the ProfileService (&quot;No qualifying bean of type x.ProfileService available&quot;).</p>\n<p>In my ProfileController, I have tried to @Autowire those fields directly (not recommended, I know):</p>\n<pre><code>@Autowired\nprivate ProfileService profileService;\n@Autowired\nprivate ProfileModelAssembler profileModelAssembler;\n@Autowired\nprivate ModelMapper modelMapper;\n</code></pre>\n<p>as well as via constructor injection:</p>\n<pre><code>@Autowired\npublic ProfileController(ProfileService profileService, ProfileModelAssembler profileModelAssembler, ModelMapper modelMapper) {\n    this.profileService = profileService;\n    this.profileModelAssembler = profileModelAssembler;\n    this.modelMapper = modelMapper;\n}\n</code></pre>\n<p>Error is the same either way. Tutorials I have found for JUnit and Mockito are absolutely all over the place in approach, doing things radically different from one another. I know there are always multiple solutions to a problem, but I've been surprised at how little adherence to any sort of &quot;preferred&quot; practice there is. Any recommendations to eliminate this error or resources to which I could turn to learn JUnit/Mockito in a &quot;simple&quot; way for my relatively simple needs?</p>\n"},{"tags":["java","excel"],"owner":{"account_id":28829266,"reputation":1,"user_id":22080118,"display_name":"Alejandro Pedreros"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686856913,"creation_date":1686856871,"question_id":76484909,"body_markdown":"```\r\npublic class SheetHandler extends DefaultHandler {\r\n    private static final Logger LOG = LoggerFactory.getLogger(SheetHandler.class);\r\n\r\n    private final SharedStringsTable sst;\r\n    private String lastContents;\r\n    private boolean nextIsString;\r\n    private boolean inlineStr;\r\n    private String cellRowCol;\r\n    private final LruCache&lt;Integer, String&gt; stringTableCache;\r\n    private CommonUtils utils = new CommonUtils();\r\n\r\n    private FloorCeilingLocalBean bean;\r\n    private List&lt;FloorCeilingLocalBean&gt; beanList;\r\n    private int rowCount = 0;\r\n    private int columnCount = 0;\r\n    private static final int HEADER_ROW = 0;\r\n    private static final int COLUMNS_MAXIMUM = 14; // restore file\r\n\r\n    private static final String ROW = &quot;row&quot;;\r\n    private static final String CELL = &quot;c&quot;;\r\n    private static final String CELL_ROW_COL = &quot;r&quot;; // A cells row/column position\r\n    private static final String CELL_VALUE = &quot;v&quot;;\r\n    private static final String CELL_INLINE = &quot;t&quot;;\r\n    private static final String CELL_TYPE = &quot;t&quot;;\r\n    private static final String CELL_TYPE_STRING = &quot;s&quot;;\r\n\r\n    private static final int STATION_CELL = 1;\r\n    private static final int CATEGORY_CELL = 2;\r\n    private static final int CAR_CELL = 3;\r\n    private static final int DAILY_FLOOR_CELL = 4;\r\n    private static final int DAILY_CEIL_CELL = 5;\r\n    private static final int WEEKLY_FLOOR_CELL = 6;\r\n    private static final int WEEKLY_CEIL_CELL = 7;\r\n    private static final int MONTHLY_FLOOR_CELL = 8;\r\n    private static final int MONTHLY_CEIL_CELL = 9;\r\n    private static final int WEEKEND_FLOOR_CELL = 10;\r\n    private static final int WEEKEND_CEIL_CELL = 11;\r\n    private static final int FROM_DATE_CELL = 12;\r\n    private static final int TO_DATE_CELL = 13;\r\n    private static final int LOCK_RULE = 14;\r\n    public SheetHandler(SharedStringsTable sst) {\r\n        this.sst = sst;\r\n        this.stringTableCache = new LruCache&lt;&gt;(100000);\r\n    }\r\n\r\n    public SheetHandler(SharedStringsTable sst, LruCache&lt;Integer, String&gt; stringTableCache) {\r\n        this.sst = sst;\r\n        this.stringTableCache = stringTableCache;\r\n    }\r\n\r\n    @Override\r\n    public void startDocument() {\r\n        beanList = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n    private void startNewRow() {\r\n        columnCount = 1;\r\n\r\n        // header row\r\n        if (rowCount != HEADER_ROW) {\r\n            bean = new FloorCeilingLocalBean();\r\n        }\r\n    }\r\n\r\n    private void endRow() {\r\n        LOG.debug(&quot;Row: {}, Column: {},  Bean: {}&quot;,rowCount, columnCount-1, bean != null ? bean.toStringCsv() : &quot;&quot;);\r\n        // blank row or invalid row if the column count does not match one of these sizes\r\n        // also don&#39;t include the header row\r\n        int cols = columnCount - 1;\r\n        if ((cols == COLUMNS_MAXIMUM) &amp;&amp; (rowCount != HEADER_ROW)) {\r\n            beanList.add(bean);\r\n        }\r\n        rowCount++;\r\n    }\r\n\r\n    @Override\r\n    // callback function on a start tag element\r\n    public void startElement(String uri, String localName, String name, Attributes attributes)\r\n    {\r\n        // A ROW tag equals a new Floor/Ceiling bean\r\n        if(name.equals(ROW)) {\r\n            startNewRow();\r\n        } else\r\n        // A CELL tag equals a field in the bean\r\n        if(name.equals(CELL)) {\r\n            cellRowCol = attributes.getValue(CELL_ROW_COL);\r\n\r\n            // for a string cell the value is an index in the SST (Shared String Table).\r\n            // set the nextString flag, so we know to pull actual string value from the SST.\r\n            // If from a restore file the string value will be an in-line string\r\n            String cellType = attributes.getValue(CELL_TYPE);\r\n            nextIsString = cellType != null &amp;&amp; cellType.equals(CELL_TYPE_STRING);\r\n            inlineStr = cellType != null &amp;&amp; cellType.equals(&quot;inlineStr&quot;);\r\n        }\r\n\r\n        // Clear contents cache\r\n        lastContents = &quot;&quot;;\r\n    }\r\n\r\n    @Override\r\n    // Callback function on and end tag element\r\n    public void endElement(String uri, String localName, String name) {\r\n        // If a string cell, get the actual cell value from the SST. Cache it in the LRUCache if we need it again\r\n        if(nextIsString) {\r\n            Integer idx = Integer.valueOf(lastContents);\r\n            lastContents = stringTableCache.get(idx);\r\n            if (lastContents == null &amp;&amp; !stringTableCache.containsKey(idx)) {\r\n                lastContents = new XSSFRichTextString(sst.getEntryAt(idx)).toString();\r\n                stringTableCache.put(idx, lastContents);\r\n            }\r\n            nextIsString = false;\r\n        }\r\n\r\n        // A CELL_VALUE tag is the actual value in a cell\r\n        if((name.equals(CELL_VALUE) &amp;&amp; (rowCount &gt; 0)) || (inlineStr &amp;&amp; name.equals(CELL) &amp;&amp; (rowCount &gt; 0))) {\r\n            setBeanValue();\r\n            columnCount++;\r\n        }\r\n\r\n        //\r\n        if((name.equals(CELL_VALUE) &amp;&amp; (rowCount == 0)) || (inlineStr &amp;&amp; name.equals(CELL) &amp;&amp; (rowCount == 0))) {\r\n            validateHeader();\r\n            columnCount++;\r\n        }\r\n\r\n        // Ending ROW tag means end of bean population, so add bean to bean list\r\n        if(name.equals(ROW)) {\r\n            endRow();\r\n        }\r\n    }\r\n\r\n    // Based on the column set the corresponding field value in the bean.\r\n    // For any exceptions, the field in the bean will not be populated and the validator will filter it out\r\n    private void setBeanValue() {\r\n        try {\r\n            switch (columnCount) {\r\n                case STATION_CELL: bean.setStation(StringUtils.trim(lastContents)); break;\r\n                case CATEGORY_CELL: bean.setCategory(lastContents); break;\r\n                case CAR_CELL: bean.setCar(lastContents); break;\r\n                case DAILY_FLOOR_CELL: bean.setDailyFloorAmt(Float.parseFloat(lastContents)); break;\r\n                case DAILY_CEIL_CELL: bean.setDailyCeilingAmt(Float.parseFloat(lastContents)); break;\r\n                case WEEKLY_FLOOR_CELL: bean.setWeeklyFloorAmt(Float.parseFloat(lastContents)); break;\r\n                case WEEKLY_CEIL_CELL: bean.setWeeklyCeilingAmt(Float.parseFloat(lastContents)); break;\r\n                case MONTHLY_FLOOR_CELL: bean.setMonthlyFloorAmt(Float.parseFloat(lastContents)); break;\r\n                case MONTHLY_CEIL_CELL: bean.setMonthlyCeilingAmt(Float.parseFloat(lastContents)); break;\r\n                case WEEKEND_FLOOR_CELL: bean.setWeekendFloorAmt(Float.parseFloat(lastContents)); break;\r\n                case WEEKEND_CEIL_CELL: bean.setWeekendCeilingAmt(Float.parseFloat(lastContents)); break;\r\n                case FROM_DATE_CELL: bean.setFromDate( utils.getLocalDate(lastContents)); break;\r\n                case TO_DATE_CELL: bean.setToDate( utils.getLocalDate(lastContents)); break;\r\n                case LOCK_RULE: bean.setRuleLock(lastContents.equals(&quot;Y&quot;) ? true : false); break;\r\n                default: LOG.warn(&quot;Unknown cell position: row={}, column={}  and value={} &quot;, rowCount, columnCount, lastContents);\r\n            }\r\n        } catch (Exception e) {\r\n            LOG.warn(&quot;Unable to parse cell {} value={}&quot;, cellRowCol, lastContents);\r\n        }\r\n     }\r\n\r\n    /**\r\n     * Validate each header cell. An Invalid header name or additional columns invalidates the load\r\n     * of the file. Within Excel a column that is empty is not seen by the XML. For the header row\r\n     * we also need to verify that the header is always in the correct column/row position to account for this.\r\n     */\r\n    private void validateHeader() { // not reading the to_date and lock_field heading.\r\n        int columnNdx = columnCount - 1; // zero based array\r\n        if (columnCount &lt;= COLUMNS_MAXIMUM) { // need to avoid out-of-bounds on header array\r\n            int compareNameResult = StringUtils.compareIgnoreCase(HEADERS[columnNdx], StringUtils.trim(lastContents));\r\n            int comparePosResult = StringUtils.compareIgnoreCase(HEADER_POS[columnNdx], cellRowCol);\r\n            boolean lockFieldPresent = HEADERS[columnNdx].equalsIgnoreCase(&quot;LOCK_FIELD&quot;);\r\n            if ((compareNameResult != 0) || (comparePosResult != 0) &amp;&amp; !lockFieldPresent) {\r\n                LOG.error(&quot;{} column is either missing or misplaced. Please verify file layout.&quot;, HEADERS[columnNdx]);\r\n                throw new UnprocessableException(HEADERS[columnNdx] + &quot; column is either missing or misplaced. Please verify file layout.&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    public List&lt;FloorCeilingLocalBean&gt; getResultList() {\r\n        return beanList;\r\n    }\r\n\r\n    // acct for header by subtracting 1\r\n    public int getRowCount() {\r\n        return rowCount-1;\r\n    }\r\n\r\n    public FloorCeilingLocalBean getBean() {\r\n        return bean;\r\n    }\r\n\r\n    @Override\r\n    public void characters(char[] ch, int start, int length) {\r\n        lastContents += new String(ch, start, length);\r\n    }\r\n}\r\n```\r\nI added `lockFieldPresent = HEADERS[columnNdx].equalsIgnoreCase(&quot;LOCK_FIELD&quot;)` to capture if LOCK_FIELD is missing, but when I tested the code by removing the field from the excel file, the error.log under validateHeaders did not produce the error message. ","title":"what logic to use in the validateHeader() to capture if LOCK_FIELD is missing?","body":"<pre><code>public class SheetHandler extends DefaultHandler {\n    private static final Logger LOG = LoggerFactory.getLogger(SheetHandler.class);\n\n    private final SharedStringsTable sst;\n    private String lastContents;\n    private boolean nextIsString;\n    private boolean inlineStr;\n    private String cellRowCol;\n    private final LruCache&lt;Integer, String&gt; stringTableCache;\n    private CommonUtils utils = new CommonUtils();\n\n    private FloorCeilingLocalBean bean;\n    private List&lt;FloorCeilingLocalBean&gt; beanList;\n    private int rowCount = 0;\n    private int columnCount = 0;\n    private static final int HEADER_ROW = 0;\n    private static final int COLUMNS_MAXIMUM = 14; // restore file\n\n    private static final String ROW = &quot;row&quot;;\n    private static final String CELL = &quot;c&quot;;\n    private static final String CELL_ROW_COL = &quot;r&quot;; // A cells row/column position\n    private static final String CELL_VALUE = &quot;v&quot;;\n    private static final String CELL_INLINE = &quot;t&quot;;\n    private static final String CELL_TYPE = &quot;t&quot;;\n    private static final String CELL_TYPE_STRING = &quot;s&quot;;\n\n    private static final int STATION_CELL = 1;\n    private static final int CATEGORY_CELL = 2;\n    private static final int CAR_CELL = 3;\n    private static final int DAILY_FLOOR_CELL = 4;\n    private static final int DAILY_CEIL_CELL = 5;\n    private static final int WEEKLY_FLOOR_CELL = 6;\n    private static final int WEEKLY_CEIL_CELL = 7;\n    private static final int MONTHLY_FLOOR_CELL = 8;\n    private static final int MONTHLY_CEIL_CELL = 9;\n    private static final int WEEKEND_FLOOR_CELL = 10;\n    private static final int WEEKEND_CEIL_CELL = 11;\n    private static final int FROM_DATE_CELL = 12;\n    private static final int TO_DATE_CELL = 13;\n    private static final int LOCK_RULE = 14;\n    public SheetHandler(SharedStringsTable sst) {\n        this.sst = sst;\n        this.stringTableCache = new LruCache&lt;&gt;(100000);\n    }\n\n    public SheetHandler(SharedStringsTable sst, LruCache&lt;Integer, String&gt; stringTableCache) {\n        this.sst = sst;\n        this.stringTableCache = stringTableCache;\n    }\n\n    @Override\n    public void startDocument() {\n        beanList = new ArrayList&lt;&gt;();\n    }\n\n    private void startNewRow() {\n        columnCount = 1;\n\n        // header row\n        if (rowCount != HEADER_ROW) {\n            bean = new FloorCeilingLocalBean();\n        }\n    }\n\n    private void endRow() {\n        LOG.debug(&quot;Row: {}, Column: {},  Bean: {}&quot;,rowCount, columnCount-1, bean != null ? bean.toStringCsv() : &quot;&quot;);\n        // blank row or invalid row if the column count does not match one of these sizes\n        // also don't include the header row\n        int cols = columnCount - 1;\n        if ((cols == COLUMNS_MAXIMUM) &amp;&amp; (rowCount != HEADER_ROW)) {\n            beanList.add(bean);\n        }\n        rowCount++;\n    }\n\n    @Override\n    // callback function on a start tag element\n    public void startElement(String uri, String localName, String name, Attributes attributes)\n    {\n        // A ROW tag equals a new Floor/Ceiling bean\n        if(name.equals(ROW)) {\n            startNewRow();\n        } else\n        // A CELL tag equals a field in the bean\n        if(name.equals(CELL)) {\n            cellRowCol = attributes.getValue(CELL_ROW_COL);\n\n            // for a string cell the value is an index in the SST (Shared String Table).\n            // set the nextString flag, so we know to pull actual string value from the SST.\n            // If from a restore file the string value will be an in-line string\n            String cellType = attributes.getValue(CELL_TYPE);\n            nextIsString = cellType != null &amp;&amp; cellType.equals(CELL_TYPE_STRING);\n            inlineStr = cellType != null &amp;&amp; cellType.equals(&quot;inlineStr&quot;);\n        }\n\n        // Clear contents cache\n        lastContents = &quot;&quot;;\n    }\n\n    @Override\n    // Callback function on and end tag element\n    public void endElement(String uri, String localName, String name) {\n        // If a string cell, get the actual cell value from the SST. Cache it in the LRUCache if we need it again\n        if(nextIsString) {\n            Integer idx = Integer.valueOf(lastContents);\n            lastContents = stringTableCache.get(idx);\n            if (lastContents == null &amp;&amp; !stringTableCache.containsKey(idx)) {\n                lastContents = new XSSFRichTextString(sst.getEntryAt(idx)).toString();\n                stringTableCache.put(idx, lastContents);\n            }\n            nextIsString = false;\n        }\n\n        // A CELL_VALUE tag is the actual value in a cell\n        if((name.equals(CELL_VALUE) &amp;&amp; (rowCount &gt; 0)) || (inlineStr &amp;&amp; name.equals(CELL) &amp;&amp; (rowCount &gt; 0))) {\n            setBeanValue();\n            columnCount++;\n        }\n\n        //\n        if((name.equals(CELL_VALUE) &amp;&amp; (rowCount == 0)) || (inlineStr &amp;&amp; name.equals(CELL) &amp;&amp; (rowCount == 0))) {\n            validateHeader();\n            columnCount++;\n        }\n\n        // Ending ROW tag means end of bean population, so add bean to bean list\n        if(name.equals(ROW)) {\n            endRow();\n        }\n    }\n\n    // Based on the column set the corresponding field value in the bean.\n    // For any exceptions, the field in the bean will not be populated and the validator will filter it out\n    private void setBeanValue() {\n        try {\n            switch (columnCount) {\n                case STATION_CELL: bean.setStation(StringUtils.trim(lastContents)); break;\n                case CATEGORY_CELL: bean.setCategory(lastContents); break;\n                case CAR_CELL: bean.setCar(lastContents); break;\n                case DAILY_FLOOR_CELL: bean.setDailyFloorAmt(Float.parseFloat(lastContents)); break;\n                case DAILY_CEIL_CELL: bean.setDailyCeilingAmt(Float.parseFloat(lastContents)); break;\n                case WEEKLY_FLOOR_CELL: bean.setWeeklyFloorAmt(Float.parseFloat(lastContents)); break;\n                case WEEKLY_CEIL_CELL: bean.setWeeklyCeilingAmt(Float.parseFloat(lastContents)); break;\n                case MONTHLY_FLOOR_CELL: bean.setMonthlyFloorAmt(Float.parseFloat(lastContents)); break;\n                case MONTHLY_CEIL_CELL: bean.setMonthlyCeilingAmt(Float.parseFloat(lastContents)); break;\n                case WEEKEND_FLOOR_CELL: bean.setWeekendFloorAmt(Float.parseFloat(lastContents)); break;\n                case WEEKEND_CEIL_CELL: bean.setWeekendCeilingAmt(Float.parseFloat(lastContents)); break;\n                case FROM_DATE_CELL: bean.setFromDate( utils.getLocalDate(lastContents)); break;\n                case TO_DATE_CELL: bean.setToDate( utils.getLocalDate(lastContents)); break;\n                case LOCK_RULE: bean.setRuleLock(lastContents.equals(&quot;Y&quot;) ? true : false); break;\n                default: LOG.warn(&quot;Unknown cell position: row={}, column={}  and value={} &quot;, rowCount, columnCount, lastContents);\n            }\n        } catch (Exception e) {\n            LOG.warn(&quot;Unable to parse cell {} value={}&quot;, cellRowCol, lastContents);\n        }\n     }\n\n    /**\n     * Validate each header cell. An Invalid header name or additional columns invalidates the load\n     * of the file. Within Excel a column that is empty is not seen by the XML. For the header row\n     * we also need to verify that the header is always in the correct column/row position to account for this.\n     */\n    private void validateHeader() { // not reading the to_date and lock_field heading.\n        int columnNdx = columnCount - 1; // zero based array\n        if (columnCount &lt;= COLUMNS_MAXIMUM) { // need to avoid out-of-bounds on header array\n            int compareNameResult = StringUtils.compareIgnoreCase(HEADERS[columnNdx], StringUtils.trim(lastContents));\n            int comparePosResult = StringUtils.compareIgnoreCase(HEADER_POS[columnNdx], cellRowCol);\n            boolean lockFieldPresent = HEADERS[columnNdx].equalsIgnoreCase(&quot;LOCK_FIELD&quot;);\n            if ((compareNameResult != 0) || (comparePosResult != 0) &amp;&amp; !lockFieldPresent) {\n                LOG.error(&quot;{} column is either missing or misplaced. Please verify file layout.&quot;, HEADERS[columnNdx]);\n                throw new UnprocessableException(HEADERS[columnNdx] + &quot; column is either missing or misplaced. Please verify file layout.&quot;);\n            }\n        }\n    }\n\n    public List&lt;FloorCeilingLocalBean&gt; getResultList() {\n        return beanList;\n    }\n\n    // acct for header by subtracting 1\n    public int getRowCount() {\n        return rowCount-1;\n    }\n\n    public FloorCeilingLocalBean getBean() {\n        return bean;\n    }\n\n    @Override\n    public void characters(char[] ch, int start, int length) {\n        lastContents += new String(ch, start, length);\n    }\n}\n</code></pre>\n<p>I added <code>lockFieldPresent = HEADERS[columnNdx].equalsIgnoreCase(&quot;LOCK_FIELD&quot;)</code> to capture if LOCK_FIELD is missing, but when I tested the code by removing the field from the excel file, the error.log under validateHeaders did not produce the error message.</p>\n"},{"tags":["java","object","methods","scope"],"comments":[{"owner":{"account_id":18361187,"reputation":686,"user_id":13373270,"display_name":"codebod"},"score":1,"creation_date":1686856196,"post_id":76484698,"comment_id":134859403,"body_markdown":"How about passing a parameter into `myMethod` such as `public void myMethod(Item otherItem) {...}`?","body":"How about passing a parameter into <code>myMethod</code> such as <code>public void myMethod(Item otherItem) {...}</code>?"},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":0,"creation_date":1686858911,"post_id":76484698,"comment_id":134859905,"body_markdown":"Is all that code you posted in _one_ file? If it is, that could be confusing you. If you have a file `Item.java` for the &quot;Item&quot; class it would contain, from the code you posted, the lines only from the line `class Item {` through the last closing brace `}` — now look at _only_ that file. Looking at that file, where does `object2` in &quot;myMethod&quot; come from? No, don&#39;t look at Main.java ... looking _only_ at Item.java, where does `object2` come from? Nowhere. It&#39;s not declared anywhere in Item.java — it is not in the `Item` class, and &quot;Item&quot; does not know that Main.java exists.","body":"Is all that code you posted in <i>one</i> file? If it is, that could be confusing you. If you have a file <code>Item.java</code> for the &quot;Item&quot; class it would contain, from the code you posted, the lines only from the line <code>class Item {</code> through the last closing brace <code>}</code> — now look at <i>only</i> that file. Looking at that file, where does <code>object2</code> in &quot;myMethod&quot; come from? No, don&#39;t look at Main.java ... looking <i>only</i> at Item.java, where does <code>object2</code> come from? Nowhere. It&#39;s not declared anywhere in Item.java — it is not in the <code>Item</code> class, and &quot;Item&quot; does not know that Main.java exists."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686856900,"creation_date":1686856900,"answer_id":76484912,"question_id":76484698,"body_markdown":"&gt; _&quot;... I&#39;d like to change the value of an instance variable of an object inside a method, while that object hasn&#39;t called the method ...&quot;_\r\n\r\nTechnically you can, if the object&#39;s variable is _[static](https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)_.   \r\nAlthough, this does not appear to be logical for your current design.\r\n\r\n&gt; _&quot;... I&#39;d like to change object2.num inside the method myMethod, but that will give an error, as object2 is outside the scope of myMethod. ...&quot;_\r\n\r\nCorrect, in Java, you won&#39;t be able to change an object&#39;s variable without the actual object.\r\n\r\n&gt; _&quot;... The only solution I&#39;ve come up with is to give object1 an additional instance variable, num2, which will act as object2.num. Outside of the method, I will then change object2.num to object1.num2. ...&quot;_\r\n\r\nYou&#39;ll have to provide more details about the functional purpose of the task.  \r\n\r\nI recommend passing _object2_ as a parameter to _myMethod_.  \r\nAdditionally, I had to add a _return_ here, since the method returns an _int_.\r\n\r\n```java\r\npublic int myMethod(Item object2) {\r\n    object2.num *= this.num;\r\n    return this.num *= object2.num;\r\n}\r\n```\r\n\r\nOr, you could just declare the method with a _void_ return type.\r\n\r\n```java\r\npublic void myMethod(Item object2) {\r\n    object2.num *= this.num;\r\n    this.num *= object2.num;\r\n}\r\n```\r\n\r\nAnd then, supply _object2_ as the argument.\r\n\r\n```java\r\nobject1.myMethod(object2);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n16 8\r\n```","title":"How to change the value of an instance variable of an object that didn&#39;t call the method?","body":"<blockquote>\n<p><em>&quot;... I'd like to change the value of an instance variable of an object inside a method, while that object hasn't called the method ...&quot;</em></p>\n</blockquote>\n<p>Technically you can, if the object's variable is <em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"nofollow noreferrer\">static</a></em>.<br />\nAlthough, this does not appear to be logical for your current design.</p>\n<blockquote>\n<p><em>&quot;... I'd like to change object2.num inside the method myMethod, but that will give an error, as object2 is outside the scope of myMethod. ...&quot;</em></p>\n</blockquote>\n<p>Correct, in Java, you won't be able to change an object's variable without the actual object.</p>\n<blockquote>\n<p><em>&quot;... The only solution I've come up with is to give object1 an additional instance variable, num2, which will act as object2.num. Outside of the method, I will then change object2.num to object1.num2. ...&quot;</em></p>\n</blockquote>\n<p>You'll have to provide more details about the functional purpose of the task.</p>\n<p>I recommend passing <em>object2</em> as a parameter to <em>myMethod</em>.<br />\nAdditionally, I had to add a <em>return</em> here, since the method returns an <em>int</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int myMethod(Item object2) {\n    object2.num *= this.num;\n    return this.num *= object2.num;\n}\n</code></pre>\n<p>Or, you could just declare the method with a <em>void</em> return type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void myMethod(Item object2) {\n    object2.num *= this.num;\n    this.num *= object2.num;\n}\n</code></pre>\n<p>And then, supply <em>object2</em> as the argument.</p>\n<pre class=\"lang-java prettyprint-override\"><code>object1.myMethod(object2);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>16 8\n</code></pre>\n"}],"owner":{"account_id":28827590,"reputation":3,"user_id":22078664,"display_name":"Beau"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76484912,"answer_count":1,"score":0,"last_activity_date":1686856900,"creation_date":1686855146,"question_id":76484698,"body_markdown":"I&#39;m writing a program in java in which I&#39;d like to change the value of an instance variable of an object inside a method, while that object hasn&#39;t called the method. I&#39;m trying to do something similar to the attached code. I&#39;d like to change object2.num inside the method myMethod, but that will give an error, as object2 is outside the scope of myMethod.\r\n```\r\npublic class Main {\r\n\r\n  public static void main(String[] args) {\r\n\r\n    Item object1 = new Item(2);\r\n    Item object2 = new Item(4);\r\n    \r\n    object1.myMethod();\r\n    System.out.println(object1.num + &quot; &quot; + object2.num);\r\n  }\r\n}\r\n\r\nclass Item {\r\n  \r\n  int num;\r\n\r\n  Item(int n) {\r\n    num = n;\r\n  }\r\n\r\n  public int myMethod() {\r\n    object2.num *= this.num;\r\n    this.num *= object2.num;\r\n  }\r\n}\r\n```\r\n\r\n\r\nThe only solution I&#39;ve come up with is to give object1 an additional instance variable, num2, which will act as object2.num. Outside of the method, I will then change object2.num to object1.num2. However, this seems very suboptimal and will get annoying when working with multiple variables to change. Is there any more efficient way to achieve this?\r\n\r\nI&#39;m still pretty new to coding and there might already be a solution to this, so any help or a link to a solution will be greatly appreciated.","title":"How to change the value of an instance variable of an object that didn&#39;t call the method?","body":"<p>I'm writing a program in java in which I'd like to change the value of an instance variable of an object inside a method, while that object hasn't called the method. I'm trying to do something similar to the attached code. I'd like to change object2.num inside the method myMethod, but that will give an error, as object2 is outside the scope of myMethod.</p>\n<pre><code>public class Main {\n\n  public static void main(String[] args) {\n\n    Item object1 = new Item(2);\n    Item object2 = new Item(4);\n    \n    object1.myMethod();\n    System.out.println(object1.num + &quot; &quot; + object2.num);\n  }\n}\n\nclass Item {\n  \n  int num;\n\n  Item(int n) {\n    num = n;\n  }\n\n  public int myMethod() {\n    object2.num *= this.num;\n    this.num *= object2.num;\n  }\n}\n</code></pre>\n<p>The only solution I've come up with is to give object1 an additional instance variable, num2, which will act as object2.num. Outside of the method, I will then change object2.num to object1.num2. However, this seems very suboptimal and will get annoying when working with multiple variables to change. Is there any more efficient way to achieve this?</p>\n<p>I'm still pretty new to coding and there might already be a solution to this, so any help or a link to a solution will be greatly appreciated.</p>\n"},{"tags":["java","spring-boot","metrics","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":188555,"reputation":6379,"user_id":427321,"accept_rate":71,"display_name":"Bal&#225;zs N&#233;meth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589264402,"creation_date":1589264402,"answer_id":61745055,"question_id":61744960,"body_markdown":"Have a look at [Spring Boot Actuator - HttpTrace][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/actuator-api/html/#http-trace\r\n\r\nIt&#39;s not enabled in the latest versions by default but you can do so by implementing `HttpTraceRepository`.\r\n\r\nIn this repository you can use a counter to measure the number of requests, then add it to the MetricRegistry. Another option would be to use a filter and then use a counter there.","title":"How to count number of requests in spring boot app?","body":"<p>Have a look at <a href=\"https://docs.spring.io/spring-boot/docs/current/actuator-api/html/#http-trace\" rel=\"nofollow noreferrer\">Spring Boot Actuator - HttpTrace</a></p>\n\n<p>It's not enabled in the latest versions by default but you can do so by implementing <code>HttpTraceRepository</code>.</p>\n\n<p>In this repository you can use a counter to measure the number of requests, then add it to the MetricRegistry. Another option would be to use a filter and then use a counter there.</p>\n"},{"tags":[],"owner":{"account_id":8206242,"reputation":1370,"user_id":6175872,"display_name":"PatrickChen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589264444,"creation_date":1589264444,"answer_id":61745067,"question_id":61744960,"body_markdown":"A `spring-actuator` example:\r\n```xml\r\n//add pom\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\nusing the actuator\r\n```java\r\n@Bean\r\npublic SecurityWebFilterChain securityWebFilterChain(\r\n  ServerHttpSecurity http) {\r\n    return http.authorizeExchange()\r\n      .pathMatchers(&quot;/actuator/**&quot;).permitAll()\r\n      .anyExchange().authenticated()\r\n      .and().build();\r\n}\r\n```\r\nThen you can get the data from http://localhost:8080/metrics \r\n\r\ncheck more from the [official documentation][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-enabling","title":"How to count number of requests in spring boot app?","body":"<p>A <code>spring-actuator</code> example:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>//add pom\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n\n<p>using the actuator</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityWebFilterChain securityWebFilterChain(\n  ServerHttpSecurity http) {\n    return http.authorizeExchange()\n      .pathMatchers(\"/actuator/**\").permitAll()\n      .anyExchange().authenticated()\n      .and().build();\n}\n</code></pre>\n\n<p>Then you can get the data from <a href=\"http://localhost:8080/metrics\" rel=\"nofollow noreferrer\">http://localhost:8080/metrics</a> </p>\n\n<p>check more from the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-enabling\" rel=\"nofollow noreferrer\">official documentation</a></p>\n"},{"tags":[],"owner":{"account_id":8903318,"reputation":142,"user_id":6817932,"display_name":"Paulo Berezini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686855706,"creation_date":1686855706,"answer_id":76484767,"question_id":61744960,"body_markdown":"U can add Spring Boot Actuator and Micrometer dependencies\r\n\r\napplication.properties\r\n\r\n    management.metrics.enable.http.server.requests=true\r\n    management.endpoints.web.exposure.include=*\r\n\r\nMaven:\r\n\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;!-- Include a Micrometer registry of your choice --&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\nGradle:\r\n\r\n    dependencies {\r\n      implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n      implementation &#39;io.micrometer:micrometer-core&#39;\r\n      implementation &#39;io.micrometer:micrometer-registry-prometheus&#39;\r\n    }\r\n\r\nIf your runs on localhost:8080 use this\r\n\r\n    http://localhost:8080/actuator/metrics\r\n\r\n&gt; &quot;application.ready.time&quot;, &quot;application.started.time&quot;, &quot;disk.free&quot;,\r\n&gt; &quot;disk.total&quot;, &quot;executor.active&quot;, &quot;executor.completed&quot;,\r\n&gt; &quot;executor.pool.core&quot;, &quot;executor.pool.max&quot;, &quot;executor.pool.size&quot;,\r\n\r\n    http://localhost:8080/actuator/prometheus \r\n\r\n&gt; spring_data_repository_invocations_seconds_count{exception=&quot;None&quot;,method=&quot;findFirstByTitle&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\r\n&gt; 10.0 spring_data_repository_invocations_seconds_sum{exception=&quot;None&quot;,method=&quot;findFirstByTitle&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\r\n&gt; 0.0931051 spring_data_repository_invocations_seconds_count{exception=&quot;None&quot;,method=&quot;findByOrderByPublishedAtDesc&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\r\n&gt; 1.0 and .....\r\n\r\n    http://localhost:8080/actuator/metrics/http.server.requests\r\n\r\n&gt; &quot;name&quot;: &quot;http.server.requests&quot;, &quot;baseUnit&quot;: &quot;seconds&quot;, &quot;measurements&quot;:\r\n&gt; [   {\r\n&gt;     &quot;statistic&quot;: &quot;COUNT&quot;,\r\n&gt;     &quot;value&quot;: 20.0   },   {\r\n&gt;     &quot;statistic&quot;: &quot;TOTAL_TIME&quot;,\r\n&gt;     &quot;value&quot;: 2.0688337   },   {\r\n&gt;     &quot;statistic&quot;: &quot;MAX&quot;,\r\n&gt;     &quot;value&quot;: 0.0   } ],\r\n\r\n","title":"How to count number of requests in spring boot app?","body":"<p>U can add Spring Boot Actuator and Micrometer dependencies</p>\n<p>application.properties</p>\n<pre><code>management.metrics.enable.http.server.requests=true\nmanagement.endpoints.web.exposure.include=*\n</code></pre>\n<p>Maven:</p>\n<pre><code>&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n  &lt;!-- Include a Micrometer registry of your choice --&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Gradle:</p>\n<pre><code>dependencies {\n  implementation 'org.springframework.boot:spring-boot-starter-actuator'\n  implementation 'io.micrometer:micrometer-core'\n  implementation 'io.micrometer:micrometer-registry-prometheus'\n}\n</code></pre>\n<p>If your runs on localhost:8080 use this</p>\n<pre><code>http://localhost:8080/actuator/metrics\n</code></pre>\n<blockquote>\n<p>&quot;application.ready.time&quot;, &quot;application.started.time&quot;, &quot;disk.free&quot;,\n&quot;disk.total&quot;, &quot;executor.active&quot;, &quot;executor.completed&quot;,\n&quot;executor.pool.core&quot;, &quot;executor.pool.max&quot;, &quot;executor.pool.size&quot;,</p>\n</blockquote>\n<pre><code>http://localhost:8080/actuator/prometheus \n</code></pre>\n<blockquote>\n<p>spring_data_repository_invocations_seconds_count{exception=&quot;None&quot;,method=&quot;findFirstByTitle&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\n10.0 spring_data_repository_invocations_seconds_sum{exception=&quot;None&quot;,method=&quot;findFirstByTitle&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\n0.0931051 spring_data_repository_invocations_seconds_count{exception=&quot;None&quot;,method=&quot;findByOrderByPublishedAtDesc&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\n1.0 and .....</p>\n</blockquote>\n<pre><code>http://localhost:8080/actuator/metrics/http.server.requests\n</code></pre>\n<blockquote>\n<p>&quot;name&quot;: &quot;http.server.requests&quot;, &quot;baseUnit&quot;: &quot;seconds&quot;, &quot;measurements&quot;:\n[   {\n&quot;statistic&quot;: &quot;COUNT&quot;,\n&quot;value&quot;: 20.0   },   {\n&quot;statistic&quot;: &quot;TOTAL_TIME&quot;,\n&quot;value&quot;: 2.0688337   },   {\n&quot;statistic&quot;: &quot;MAX&quot;,\n&quot;value&quot;: 0.0   } ],</p>\n</blockquote>\n"}],"owner":{"account_id":15614593,"reputation":157,"user_id":11265082,"display_name":"Angara kilkiri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6907,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1686855706,"creation_date":1589263989,"question_id":61744960,"body_markdown":"I have a spring boot application whose metrics I want to later send to gcp. But for now I just need to find a way to count the total number of requests my application is handling either with `actuator` or with `micrometer`. Does anybody know how I could do something like this? Thanks In advance ","title":"How to count number of requests in spring boot app?","body":"<p>I have a spring boot application whose metrics I want to later send to gcp. But for now I just need to find a way to count the total number of requests my application is handling either with <code>actuator</code> or with <code>micrometer</code>. Does anybody know how I could do something like this? Thanks In advance </p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"owner":{"account_id":1315819,"reputation":1626,"user_id":1262728,"accept_rate":75,"display_name":"Erik van Oosten"},"score":0,"creation_date":1687025566,"post_id":76484716,"comment_id":134880770,"body_markdown":"The stacktrace that is posted here differs quite a bit from the other stackoverflow answer. This looks like you&#39;re trying to access a field that does not exist.","body":"The stacktrace that is posted here differs quite a bit from the other stackoverflow answer. This looks like you&#39;re trying to access a field that does not exist."}],"owner":{"account_id":26729789,"reputation":73,"user_id":20332351,"display_name":"Xuan Chen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686855285,"creation_date":1686855285,"question_id":76484716,"body_markdown":"I&#39;m trying to classify some documents using Spark (3.3.2). First, I defined the `sparkSession` and obtained the `javaSparkContext`. Then, I read the corpus, collected them into `labeledWordList`, and put them into a `dataFrame`. After creating the pipeline model `pipelineModel`, I would like to test the model with training data which was splited using `randomSplit()`. The code is as following:\r\n\r\n```java\r\npackage com.nova.spark.nlp;\r\n\r\nimport com.hankcs.hanlp.HanLP;\r\nimport com.nova.spark.logger.Log;\r\nimport com.nova.spark.model.CategorizedDocument;\r\nimport org.apache.spark.api.java.JavaRDD;\r\nimport org.apache.spark.api.java.JavaSparkContext;\r\nimport org.apache.spark.ml.Pipeline;\r\nimport org.apache.spark.ml.PipelineModel;\r\nimport org.apache.spark.ml.PipelineStage;\r\nimport org.apache.spark.ml.classification.LogisticRegression;\r\nimport org.apache.spark.ml.evaluation.MulticlassClassificationEvaluator;\r\nimport org.apache.spark.ml.feature.HashingTF;\r\nimport org.apache.spark.ml.feature.IDF;\r\nimport org.apache.spark.ml.feature.IndexToString;\r\nimport org.apache.spark.ml.feature.StringIndexer;\r\nimport org.apache.spark.ml.feature.Tokenizer;\r\nimport org.apache.spark.sql.Dataset;\r\nimport org.apache.spark.sql.Row;\r\nimport org.apache.spark.sql.RowFactory;\r\nimport org.apache.spark.sql.SparkSession;\r\nimport org.apache.spark.sql.types.DataTypes;\r\nimport org.apache.spark.sql.types.StructField;\r\nimport org.apache.spark.sql.types.StructType;\r\nimport scala.Tuple2;\r\n\r\nimport java.io.File;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class PretrainModel {\r\n    private static final String CORPUS_PATH = &quot;src/main/resources/corpus min/&quot;;\r\n\r\n    static {\r\n        HanLP.Config.ShowTermNature = false;\r\n        Log.getLogger().info(&quot;PretrainModel::static:Initialize&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Log.getLogger().info(&quot;PretrainModel::main:Start&quot;);\r\n        File[] categories = new File(CORPUS_PATH).listFiles();\r\n        assert categories != null;\r\n        List&lt;CategorizedDocument&gt; labeledWordList = new ArrayList&lt;&gt;();\r\n\r\n        SparkSession sparkSession = SparkSession.builder()\r\n                .master(&quot;local[*]&quot;)\r\n                .config(&quot;spark.driver.allowMultipleContexts&quot;, &quot;true&quot;)\r\n                .appName(&quot;PretrainModel::main&quot;)\r\n                .getOrCreate();\r\n        JavaSparkContext javaSparkContext = JavaSparkContext.fromSparkContext(sparkSession.sparkContext());\r\n        for (File currentCorpusDirectory : categories) {\r\n            String categoryName = currentCorpusDirectory.getName();\r\n            if (categoryName.startsWith(&quot;.&quot;)) {\r\n                continue;\r\n            }\r\n            Log.getLogger().info(&quot;PretrainModel::readCategorizedCorpus::Category-&quot; + categoryName + &quot;:Process&quot;);\r\n            List&lt;CategorizedDocument&gt; categorizedDocuments = javaSparkContext\r\n                    .wholeTextFiles(CORPUS_PATH + categoryName, 1)\r\n                    .cache()\r\n                    .map(Tuple2::_2)\r\n                    .filter(line -&gt; line.length() &gt; 20)\r\n                    .map(line -&gt; String.join(&quot; &quot;, Processor.getSplitWords(line)))\r\n                    .map(document -&gt; new CategorizedDocument(categoryName, document))\r\n                    .collect();\r\n            labeledWordList.addAll(categorizedDocuments);\r\n        }\r\n        Log.getLogger().info(&quot;PretrainModel::main:Done&quot;);\r\n\r\n        JavaRDD&lt;Row&gt; labeledWordRDD = javaSparkContext\r\n                .parallelize(labeledWordList)\r\n                .map(document -&gt; RowFactory.create(document.getCategory(), document.getDocument()));\r\n        StructField labelField = DataTypes.createStructField(&quot;category&quot;, DataTypes.StringType, false);\r\n        StructField wordField = DataTypes.createStructField(&quot;document&quot;, DataTypes.StringType, false);\r\n        StructType structType = DataTypes.createStructType(List.of(labelField, wordField));\r\n        Dataset&lt;Row&gt; dataFrame = sparkSession.createDataFrame(labeledWordRDD, structType);\r\n        Dataset&lt;Row&gt;[] randomSplits = dataFrame.randomSplit(new double[]{0.8, 0.2});\r\n        Dataset&lt;Row&gt; trainDataFrame = randomSplits[0], testDataFrame = randomSplits[1];\r\n\r\n        Tokenizer tokenizer = new Tokenizer()\r\n                .setInputCol(&quot;document&quot;)\r\n                .setOutputCol(&quot;words&quot;);\r\n        HashingTF hashingTF = new HashingTF()\r\n                .setInputCol(&quot;words&quot;)\r\n                .setOutputCol(&quot;rawFeatures&quot;)\r\n                .setNumFeatures(2000);\r\n        IDF idf = new IDF()\r\n                .setInputCol(&quot;rawFeatures&quot;)\r\n                .setOutputCol(&quot;features&quot;)\r\n                .setMinDocFreq(5);\r\n        StringIndexer stringIndexer = new StringIndexer()\r\n                .setInputCol(&quot;category&quot;)\r\n                .setOutputCol(&quot;label&quot;);\r\n        LogisticRegression logisticRegression = new LogisticRegression()\r\n                .setMaxIter(10);\r\n        IndexToString indexToString = new IndexToString()\r\n                .setInputCol(&quot;prediction&quot;)\r\n                .setOutputCol(&quot;class&quot;);\r\n        Pipeline pipeline = new Pipeline()\r\n                .setStages(new PipelineStage[]{tokenizer, hashingTF, idf, stringIndexer, logisticRegression, indexToString});\r\n        PipelineModel pipelineModel = pipeline.fit(trainDataFrame);\r\n        Dataset&lt;Row&gt; predictedDataFrame = pipelineModel.transform(testDataFrame);\r\n        predictedDataFrame.select(&quot;category&quot;, &quot;label&quot;, &quot;prediction&quot;, &quot;class&quot;)\r\n                .show(30, false);\r\n        MulticlassClassificationEvaluator evaluator = new MulticlassClassificationEvaluator()\r\n                .setLabelCol(&quot;label&quot;)\r\n                .setPredictionCol(&quot;prediction&quot;)\r\n                .setMetricName(&quot;accuracy&quot;);\r\n        double accuracy = evaluator.evaluate(predictedDataFrame);\r\n        System.out.println(&quot;Accuracy = &quot; + accuracy);\r\n    }\r\n}\r\n```\r\nHowever, I encounter some exception like this:\r\n\r\n```text\r\nException in thread &quot;main&quot; java.util.NoSuchElementException: None.get\r\n\tat scala.None$.get(Option.scala:627)\r\n\tat scala.None$.get(Option.scala:626)\r\n\tat org.apache.spark.ml.feature.IndexToString.transform(StringIndexer.scala:605)\r\n\tat org.apache.spark.ml.PipelineModel.$anonfun$transform$4(Pipeline.scala:311)\r\n\tat org.apache.spark.ml.MLEvents.withTransformEvent(events.scala:146)\r\n\tat org.apache.spark.ml.MLEvents.withTransformEvent$(events.scala:139)\r\n\tat org.apache.spark.ml.util.Instrumentation.withTransformEvent(Instrumentation.scala:42)\r\n\tat org.apache.spark.ml.PipelineModel.$anonfun$transform$3(Pipeline.scala:311)\r\n\tat scala.collection.ArrayOps$.foldLeft$extension(ArrayOps.scala:782)\r\n\tat org.apache.spark.ml.PipelineModel.$anonfun$transform$2(Pipeline.scala:310)\r\n\tat org.apache.spark.ml.MLEvents.withTransformEvent(events.scala:146)\r\n\tat org.apache.spark.ml.MLEvents.withTransformEvent$(events.scala:139)\r\n\tat org.apache.spark.ml.util.Instrumentation.withTransformEvent(Instrumentation.scala:42)\r\n\tat org.apache.spark.ml.PipelineModel.$anonfun$transform$1(Pipeline.scala:308)\r\n\tat org.apache.spark.ml.util.Instrumentation$.$anonfun$instrumented$1(Instrumentation.scala:191)\r\n\tat scala.util.Try$.apply(Try.scala:210)\r\n\tat org.apache.spark.ml.util.Instrumentation$.instrumented(Instrumentation.scala:191)\r\n\tat org.apache.spark.ml.PipelineModel.transform(Pipeline.scala:307)\r\n\tat com.nova.spark.nlp.PretrainModel.main(PretrainModel.java:101)\r\n```\r\n\r\nI have learnt the post [None.get when streaming][1] carefully, and I maintain only one `javaSparkContext` (instead of mixing `javaSparkContext` and something like `sparkContext` together). Yet I still encounter the problem.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/50987061/spark-streaming-exception-java-util-nosuchelementexception-none-get","title":"Why does java.util.NoSuchElementException: None.get happened?","body":"<p>I'm trying to classify some documents using Spark (3.3.2). First, I defined the <code>sparkSession</code> and obtained the <code>javaSparkContext</code>. Then, I read the corpus, collected them into <code>labeledWordList</code>, and put them into a <code>dataFrame</code>. After creating the pipeline model <code>pipelineModel</code>, I would like to test the model with training data which was splited using <code>randomSplit()</code>. The code is as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.nova.spark.nlp;\n\nimport com.hankcs.hanlp.HanLP;\nimport com.nova.spark.logger.Log;\nimport com.nova.spark.model.CategorizedDocument;\nimport org.apache.spark.api.java.JavaRDD;\nimport org.apache.spark.api.java.JavaSparkContext;\nimport org.apache.spark.ml.Pipeline;\nimport org.apache.spark.ml.PipelineModel;\nimport org.apache.spark.ml.PipelineStage;\nimport org.apache.spark.ml.classification.LogisticRegression;\nimport org.apache.spark.ml.evaluation.MulticlassClassificationEvaluator;\nimport org.apache.spark.ml.feature.HashingTF;\nimport org.apache.spark.ml.feature.IDF;\nimport org.apache.spark.ml.feature.IndexToString;\nimport org.apache.spark.ml.feature.StringIndexer;\nimport org.apache.spark.ml.feature.Tokenizer;\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.RowFactory;\nimport org.apache.spark.sql.SparkSession;\nimport org.apache.spark.sql.types.DataTypes;\nimport org.apache.spark.sql.types.StructField;\nimport org.apache.spark.sql.types.StructType;\nimport scala.Tuple2;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class PretrainModel {\n    private static final String CORPUS_PATH = &quot;src/main/resources/corpus min/&quot;;\n\n    static {\n        HanLP.Config.ShowTermNature = false;\n        Log.getLogger().info(&quot;PretrainModel::static:Initialize&quot;);\n    }\n\n    public static void main(String[] args) {\n        Log.getLogger().info(&quot;PretrainModel::main:Start&quot;);\n        File[] categories = new File(CORPUS_PATH).listFiles();\n        assert categories != null;\n        List&lt;CategorizedDocument&gt; labeledWordList = new ArrayList&lt;&gt;();\n\n        SparkSession sparkSession = SparkSession.builder()\n                .master(&quot;local[*]&quot;)\n                .config(&quot;spark.driver.allowMultipleContexts&quot;, &quot;true&quot;)\n                .appName(&quot;PretrainModel::main&quot;)\n                .getOrCreate();\n        JavaSparkContext javaSparkContext = JavaSparkContext.fromSparkContext(sparkSession.sparkContext());\n        for (File currentCorpusDirectory : categories) {\n            String categoryName = currentCorpusDirectory.getName();\n            if (categoryName.startsWith(&quot;.&quot;)) {\n                continue;\n            }\n            Log.getLogger().info(&quot;PretrainModel::readCategorizedCorpus::Category-&quot; + categoryName + &quot;:Process&quot;);\n            List&lt;CategorizedDocument&gt; categorizedDocuments = javaSparkContext\n                    .wholeTextFiles(CORPUS_PATH + categoryName, 1)\n                    .cache()\n                    .map(Tuple2::_2)\n                    .filter(line -&gt; line.length() &gt; 20)\n                    .map(line -&gt; String.join(&quot; &quot;, Processor.getSplitWords(line)))\n                    .map(document -&gt; new CategorizedDocument(categoryName, document))\n                    .collect();\n            labeledWordList.addAll(categorizedDocuments);\n        }\n        Log.getLogger().info(&quot;PretrainModel::main:Done&quot;);\n\n        JavaRDD&lt;Row&gt; labeledWordRDD = javaSparkContext\n                .parallelize(labeledWordList)\n                .map(document -&gt; RowFactory.create(document.getCategory(), document.getDocument()));\n        StructField labelField = DataTypes.createStructField(&quot;category&quot;, DataTypes.StringType, false);\n        StructField wordField = DataTypes.createStructField(&quot;document&quot;, DataTypes.StringType, false);\n        StructType structType = DataTypes.createStructType(List.of(labelField, wordField));\n        Dataset&lt;Row&gt; dataFrame = sparkSession.createDataFrame(labeledWordRDD, structType);\n        Dataset&lt;Row&gt;[] randomSplits = dataFrame.randomSplit(new double[]{0.8, 0.2});\n        Dataset&lt;Row&gt; trainDataFrame = randomSplits[0], testDataFrame = randomSplits[1];\n\n        Tokenizer tokenizer = new Tokenizer()\n                .setInputCol(&quot;document&quot;)\n                .setOutputCol(&quot;words&quot;);\n        HashingTF hashingTF = new HashingTF()\n                .setInputCol(&quot;words&quot;)\n                .setOutputCol(&quot;rawFeatures&quot;)\n                .setNumFeatures(2000);\n        IDF idf = new IDF()\n                .setInputCol(&quot;rawFeatures&quot;)\n                .setOutputCol(&quot;features&quot;)\n                .setMinDocFreq(5);\n        StringIndexer stringIndexer = new StringIndexer()\n                .setInputCol(&quot;category&quot;)\n                .setOutputCol(&quot;label&quot;);\n        LogisticRegression logisticRegression = new LogisticRegression()\n                .setMaxIter(10);\n        IndexToString indexToString = new IndexToString()\n                .setInputCol(&quot;prediction&quot;)\n                .setOutputCol(&quot;class&quot;);\n        Pipeline pipeline = new Pipeline()\n                .setStages(new PipelineStage[]{tokenizer, hashingTF, idf, stringIndexer, logisticRegression, indexToString});\n        PipelineModel pipelineModel = pipeline.fit(trainDataFrame);\n        Dataset&lt;Row&gt; predictedDataFrame = pipelineModel.transform(testDataFrame);\n        predictedDataFrame.select(&quot;category&quot;, &quot;label&quot;, &quot;prediction&quot;, &quot;class&quot;)\n                .show(30, false);\n        MulticlassClassificationEvaluator evaluator = new MulticlassClassificationEvaluator()\n                .setLabelCol(&quot;label&quot;)\n                .setPredictionCol(&quot;prediction&quot;)\n                .setMetricName(&quot;accuracy&quot;);\n        double accuracy = evaluator.evaluate(predictedDataFrame);\n        System.out.println(&quot;Accuracy = &quot; + accuracy);\n    }\n}\n</code></pre>\n<p>However, I encounter some exception like this:</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException: None.get\n    at scala.None$.get(Option.scala:627)\n    at scala.None$.get(Option.scala:626)\n    at org.apache.spark.ml.feature.IndexToString.transform(StringIndexer.scala:605)\n    at org.apache.spark.ml.PipelineModel.$anonfun$transform$4(Pipeline.scala:311)\n    at org.apache.spark.ml.MLEvents.withTransformEvent(events.scala:146)\n    at org.apache.spark.ml.MLEvents.withTransformEvent$(events.scala:139)\n    at org.apache.spark.ml.util.Instrumentation.withTransformEvent(Instrumentation.scala:42)\n    at org.apache.spark.ml.PipelineModel.$anonfun$transform$3(Pipeline.scala:311)\n    at scala.collection.ArrayOps$.foldLeft$extension(ArrayOps.scala:782)\n    at org.apache.spark.ml.PipelineModel.$anonfun$transform$2(Pipeline.scala:310)\n    at org.apache.spark.ml.MLEvents.withTransformEvent(events.scala:146)\n    at org.apache.spark.ml.MLEvents.withTransformEvent$(events.scala:139)\n    at org.apache.spark.ml.util.Instrumentation.withTransformEvent(Instrumentation.scala:42)\n    at org.apache.spark.ml.PipelineModel.$anonfun$transform$1(Pipeline.scala:308)\n    at org.apache.spark.ml.util.Instrumentation$.$anonfun$instrumented$1(Instrumentation.scala:191)\n    at scala.util.Try$.apply(Try.scala:210)\n    at org.apache.spark.ml.util.Instrumentation$.instrumented(Instrumentation.scala:191)\n    at org.apache.spark.ml.PipelineModel.transform(Pipeline.scala:307)\n    at com.nova.spark.nlp.PretrainModel.main(PretrainModel.java:101)\n</code></pre>\n<p>I have learnt the post <a href=\"https://stackoverflow.com/questions/50987061/spark-streaming-exception-java-util-nosuchelementexception-none-get\">None.get when streaming</a> carefully, and I maintain only one <code>javaSparkContext</code> (instead of mixing <code>javaSparkContext</code> and something like <code>sparkContext</code> together). Yet I still encounter the problem.</p>\n"},{"tags":["java","pact","pact-jvm"],"answers":[{"tags":[],"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686854996,"creation_date":1686854996,"answer_id":76484678,"question_id":76372512,"body_markdown":"You can use `arrayEachLike` or `arrayMinLike`/`arrayMaxLike` like this:\r\n\r\n```java\r\nDslPart expectedZoneResponse = \r\n  PactDslJsonArray.arrayEachLike()\r\n    .stringValue(&quot;Africa/Abidjan&quot;)\r\n    .stringValue(&quot;Asia/Tokyo&quot;);\r\n```\r\n\r\nSee also https://docs.pact.io/implementation_guides/jvm/consumer#matching-json-values-at-the-root","title":"Pact JVM, get array without any root as response","body":"<p>You can use <code>arrayEachLike</code> or <code>arrayMinLike</code>/<code>arrayMaxLike</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DslPart expectedZoneResponse = \n  PactDslJsonArray.arrayEachLike()\n    .stringValue(&quot;Africa/Abidjan&quot;)\n    .stringValue(&quot;Asia/Tokyo&quot;);\n</code></pre>\n<p>See also <a href=\"https://docs.pact.io/implementation_guides/jvm/consumer#matching-json-values-at-the-root\" rel=\"nofollow noreferrer\">https://docs.pact.io/implementation_guides/jvm/consumer#matching-json-values-at-the-root</a></p>\n"}],"owner":{"account_id":1711512,"reputation":33,"user_id":1569478,"display_name":"MMR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686855097,"creation_date":1685528827,"question_id":76372512,"body_markdown":"\r\nUsing Pack for JVM using Junit5. Maven dependency that I have used is as follows.\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;au.com.dius.pact.consumer&lt;/groupId&gt;\r\n  &lt;artifactId&gt;junit5&lt;/artifactId&gt;\r\n  &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI am trying to create DslPart response pattern based below JSON payload. \r\n\r\n```\r\n[\r\n   &quot;Africa/Abidjan&quot;,\r\n   &quot;Asia/Tokyo&quot;,\r\n   &quot;Africa/Addis_Ababa&quot;,\r\n   ...\r\n] \r\n```\r\n\r\nI managed to define the below DslPart definition, which makes the test pass. \r\n\r\n```\r\n   DslPart expectedZoneResponse = new PactDslJsonArray()\r\n            .stringValue(&quot;Africa/Abidjan&quot;)\r\n            .stringValue(&quot;Asia/Tokyo&quot;);\r\n```\r\n\r\nPact definition is.\r\n\r\n```\r\n@Pact(consumer = &quot;Client&quot;, provider = &quot;ServiceApi&quot;)\r\npublic RequestResponsePact getTestArray(PactDslWithProvider builder)\r\n    return builder\r\n           .given(&quot;ZoneInfo&quot;)\r\n            .uponReceiving(&quot;Return all zones.&quot;)\r\n              .path(&quot;/zones&quot;)\r\n              .method(&quot;GET&quot;)\r\n            .willRespondWith()\r\n              .status(200)\r\n              .body(expectedZoneResponse)\r\n            .toPact();\r\n```\r\n\r\nThe above Client test creates the pact definition file but when I run it against my provider contract test, it fails because the response got from server is way more then the static 2 string defined in the pact definition file. \r\n\r\n```\r\nbody: $ Expected a List with 2 elements but received 603 elements\r\n```\r\n\r\nMy intent was to provide string pattern &quot;[a-zA-Z]+/[a-zA-Z]+&quot; in **DslPart expectedZoneResponse**, which could be matched, but I could not achieve it. \r\n\r\nHow can I modify **DslPart expectedZoneResponse** so that I reflects a patten instead of the 2 string constant?\r\n\r\nThanks,","title":"Pact JVM, get array without any root as response","body":"<p>Using Pack for JVM using Junit5. Maven dependency that I have used is as follows.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;au.com.dius.pact.consumer&lt;/groupId&gt;\n  &lt;artifactId&gt;junit5&lt;/artifactId&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I am trying to create DslPart response pattern based below JSON payload.</p>\n<pre><code>[\n   &quot;Africa/Abidjan&quot;,\n   &quot;Asia/Tokyo&quot;,\n   &quot;Africa/Addis_Ababa&quot;,\n   ...\n] \n</code></pre>\n<p>I managed to define the below DslPart definition, which makes the test pass.</p>\n<pre><code>   DslPart expectedZoneResponse = new PactDslJsonArray()\n            .stringValue(&quot;Africa/Abidjan&quot;)\n            .stringValue(&quot;Asia/Tokyo&quot;);\n</code></pre>\n<p>Pact definition is.</p>\n<pre><code>@Pact(consumer = &quot;Client&quot;, provider = &quot;ServiceApi&quot;)\npublic RequestResponsePact getTestArray(PactDslWithProvider builder)\n    return builder\n           .given(&quot;ZoneInfo&quot;)\n            .uponReceiving(&quot;Return all zones.&quot;)\n              .path(&quot;/zones&quot;)\n              .method(&quot;GET&quot;)\n            .willRespondWith()\n              .status(200)\n              .body(expectedZoneResponse)\n            .toPact();\n</code></pre>\n<p>The above Client test creates the pact definition file but when I run it against my provider contract test, it fails because the response got from server is way more then the static 2 string defined in the pact definition file.</p>\n<pre><code>body: $ Expected a List with 2 elements but received 603 elements\n</code></pre>\n<p>My intent was to provide string pattern &quot;[a-zA-Z]+/[a-zA-Z]+&quot; in <strong>DslPart expectedZoneResponse</strong>, which could be matched, but I could not achieve it.</p>\n<p>How can I modify <strong>DslPart expectedZoneResponse</strong> so that I reflects a patten instead of the 2 string constant?</p>\n<p>Thanks,</p>\n"},{"tags":["java","record"],"comments":[{"owner":{"account_id":2141010,"reputation":118229,"user_id":1899640,"display_name":"that other guy"},"score":1,"creation_date":1686854993,"post_id":76484461,"comment_id":134859180,"body_markdown":"There are many ways to trade cpu usage and code complexity for memory depending on the characteristics of the data. First see whether you truly need to keep the objects in memory, or whether you can stream them. Using a HashMap to deduplicate is very simple straight and forward, and definitely worth a try. An open addressing implementation can save a further ~48 bytes per unique item. Storing fields in arrays instead of objects is annoying but can save another ~16 bytes. Be aware of compressed OOPs and object alignment. Stop when it gets cheaper to buy more RAM than to complicate the codebase.","body":"There are many ways to trade cpu usage and code complexity for memory depending on the characteristics of the data. First see whether you truly need to keep the objects in memory, or whether you can stream them. Using a HashMap to deduplicate is very simple straight and forward, and definitely worth a try. An open addressing implementation can save a further ~48 bytes per unique item. Storing fields in arrays instead of objects is annoying but can save another ~16 bytes. Be aware of compressed OOPs and object alignment. Stop when it gets cheaper to buy more RAM than to complicate the codebase."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686855046,"creation_date":1686855046,"answer_id":76484689,"question_id":76484461,"body_markdown":"If you need to keep the count for each record, you can use `Map&lt;MyRecord, Integer&gt;`:\r\n```\r\nList&lt;MyRecord&gt; list = ...;\r\nMap&lt;MyRecord, Integer&gt; map = new HashMap&lt;&gt;();\r\nfor (MyRecord myRecord : list) {\r\n  map.compute(myRecord, (key, value) -&gt; value == null ? 1 : value + 1);\r\n}\r\n```\r\nThis approach uses [Map.compute()][1] to calculate the values.\r\n\r\nIf you only need to get rid any duplicates, adding to a `Set&lt;MyRecord&gt;` is enough:\r\n```\r\nList&lt;MyRecord&gt; list = ...;\r\nSet&lt;MyRecord&gt; set = new HashSet&lt;&gt;(list);\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#compute-K-java.util.function.BiFunction-","title":"Can I deduplicate records to save memory?","body":"<p>If you need to keep the count for each record, you can use <code>Map&lt;MyRecord, Integer&gt;</code>:</p>\n<pre><code>List&lt;MyRecord&gt; list = ...;\nMap&lt;MyRecord, Integer&gt; map = new HashMap&lt;&gt;();\nfor (MyRecord myRecord : list) {\n  map.compute(myRecord, (key, value) -&gt; value == null ? 1 : value + 1);\n}\n</code></pre>\n<p>This approach uses <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#compute-K-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\">Map.compute()</a> to calculate the values.</p>\n<p>If you only need to get rid any duplicates, adding to a <code>Set&lt;MyRecord&gt;</code> is enough:</p>\n<pre><code>List&lt;MyRecord&gt; list = ...;\nSet&lt;MyRecord&gt; set = new HashSet&lt;&gt;(list);\n</code></pre>\n"}],"owner":{"account_id":9590347,"reputation":63,"user_id":7121473,"display_name":"iseki"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76484689,"answer_count":1,"score":0,"last_activity_date":1686855046,"creation_date":1686852936,"question_id":76484461,"body_markdown":"I have lots of java records that store the equality value. May I deduplicate them to save memory? My records is fully immutable. \r\nBecause I read and construct them from a stream style data source(A JSON stream or csv stream), so I think they will be distinct object in memory. But most of them contains the same value.\r\n\r\nSuch as use a HashMap? I see the JVM internal string pool, but it&#39;s only for String and they&#39;re lived too long.","title":"Can I deduplicate records to save memory?","body":"<p>I have lots of java records that store the equality value. May I deduplicate them to save memory? My records is fully immutable.\nBecause I read and construct them from a stream style data source(A JSON stream or csv stream), so I think they will be distinct object in memory. But most of them contains the same value.</p>\n<p>Such as use a HashMap? I see the JVM internal string pool, but it's only for String and they're lived too long.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","orm"],"answers":[{"tags":[],"owner":{"account_id":26151806,"reputation":151,"user_id":19839660,"display_name":"Iv&#225;n Larios"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686854937,"creation_date":1686854937,"answer_id":76484670,"question_id":76484067,"body_markdown":"I changed the code according to your requirements. I left the reverse relation on UserScanData as you had it on your code, in case you want to keep it. If I didn&#39;t explain the changes enough feel free to ask :)\r\n```\r\npublic class UserScan {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    //more fields\r\n\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;user_scan_id&quot;) //You specify the column in UserScan table that refers to the UserScanData id.\r\n    private UserScanData userScanData;\r\n\r\n}\r\n\r\npublic class UserScanData {\r\n\r\n    @Id\r\n    @Column(name = &quot;user_scan_id&quot;)\r\n    private Long userScanId;\r\n\r\n    //more fields\r\n\r\n    @OneToOne(mappedBy= &quot;userScanData&quot;, fetch = FetchType.LAZY) //This is the reverse relation you may not need\r\n    private UserScan userScan;\r\n}\r\n```","title":"Hibernate OneToOne mapping by primary key","body":"<p>I changed the code according to your requirements. I left the reverse relation on UserScanData as you had it on your code, in case you want to keep it. If I didn't explain the changes enough feel free to ask :)</p>\n<pre><code>public class UserScan {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    //more fields\n\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;user_scan_id&quot;) //You specify the column in UserScan table that refers to the UserScanData id.\n    private UserScanData userScanData;\n\n}\n\npublic class UserScanData {\n\n    @Id\n    @Column(name = &quot;user_scan_id&quot;)\n    private Long userScanId;\n\n    //more fields\n\n    @OneToOne(mappedBy= &quot;userScanData&quot;, fetch = FetchType.LAZY) //This is the reverse relation you may not need\n    private UserScan userScan;\n}\n</code></pre>\n"}],"owner":{"account_id":3210091,"reputation":5835,"user_id":2710256,"accept_rate":46,"display_name":"breakline"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686854937,"creation_date":1686849426,"question_id":76484067,"body_markdown":"Given these two entities how do I establish a working OneToOne relationship with Hibernate:\r\n\r\n    public class UserScan {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;)\r\n        private Long id;\r\n\r\n        //more fields\r\n\r\n        @OneToOne(mappedBy = &quot;userScan&quot;, cascade = CascadeType.ALL)\r\n        private UserScanData userScanData;\r\n    \r\n    }\r\n\r\n    public class UserScanData {\r\n\r\n        @Id\r\n        @Column(name = &quot;user_scan_id&quot;)\r\n        private Long userScanId;\r\n\r\n        //more fields\r\n\r\n        @OneToOne(fetch = FetchType.LAZY)\r\n        @MapsId\r\n        @JoinColumn(name = &quot;user_scan_id&quot;)\r\n        private UserScan userScan;\r\n    }\r\n\r\nObviously something is wrong here (I get an error of a missing field), but I&#39;m not sure how to do this. @PrimaryKeyJoinColumn did not work either.\r\n\r\nCurrent error is:\r\n\r\n**Schema-validation: missing column [user_scan_id] in table [user_scan]**\r\n\r\nI just want to connect the two table inside &quot;UserScan&quot;, &quot;UserScanData&quot; does not need to have the reverse relationship (unless needed by hibernate)\r\n\r\nAny help is appreciated.","title":"Hibernate OneToOne mapping by primary key","body":"<p>Given these two entities how do I establish a working OneToOne relationship with Hibernate:</p>\n<pre><code>public class UserScan {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    //more fields\n\n    @OneToOne(mappedBy = &quot;userScan&quot;, cascade = CascadeType.ALL)\n    private UserScanData userScanData;\n\n}\n\npublic class UserScanData {\n\n    @Id\n    @Column(name = &quot;user_scan_id&quot;)\n    private Long userScanId;\n\n    //more fields\n\n    @OneToOne(fetch = FetchType.LAZY)\n    @MapsId\n    @JoinColumn(name = &quot;user_scan_id&quot;)\n    private UserScan userScan;\n}\n</code></pre>\n<p>Obviously something is wrong here (I get an error of a missing field), but I'm not sure how to do this. @PrimaryKeyJoinColumn did not work either.</p>\n<p>Current error is:</p>\n<p><strong>Schema-validation: missing column [user_scan_id] in table [user_scan]</strong></p>\n<p>I just want to connect the two table inside &quot;UserScan&quot;, &quot;UserScanData&quot; does not need to have the reverse relationship (unless needed by hibernate)</p>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","while-loop","boolean"],"comments":[{"owner":{"account_id":129540,"reputation":210847,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":0,"creation_date":1686845757,"post_id":76483611,"comment_id":134857385,"body_markdown":"Because that&#39;s the syntax of the language.  `=` is assignment, `==` is equality comparison.  Not every language uses this syntax, but a great many do.","body":"Because that&#39;s the syntax of the language.  <code>=</code> is assignment, <code>==</code> is equality comparison.  Not every language uses this syntax, but a great many do."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":7,"creation_date":1686845796,"post_id":76483611,"comment_id":134857390,"body_markdown":"Your second example isn&#39;t comparing `d` with `false`. It&#39;s *assigning* the value of `false` to `d`. That&#39;s *almost certainly* not what you intended.","body":"Your second example isn&#39;t comparing <code>d</code> with <code>false</code>. It&#39;s <i>assigning</i> the value of <code>false</code> to <code>d</code>. That&#39;s <i>almost certainly</i> not what you intended."},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1686853811,"post_id":76483611,"comment_id":134858985,"body_markdown":"In math, writing algorithms would often use an arrow like &quot;&lt;-&quot; or &quot;&lt;=&quot; for assignment, and &quot;=&quot; for equality. There was no single arrow character, and the &quot;&lt;&quot; character was awkward to parse, so programming languages like Algol used &quot;:=&quot; for assignment, and &quot;=&quot; for equality. It worked, but &quot;:=&quot; was awkward to type, so C used &quot;=&quot; to assign and &quot;==&quot; to compare, which were a lot easier. That became the standard for most languages that followed, including Java.","body":"In math, writing algorithms would often use an arrow like &quot;&lt;-&quot; or &quot;&lt;=&quot; for assignment, and &quot;=&quot; for equality. There was no single arrow character, and the &quot;&lt;&quot; character was awkward to parse, so programming languages like Algol used &quot;:=&quot; for assignment, and &quot;=&quot; for equality. It worked, but &quot;:=&quot; was awkward to type, so C used &quot;=&quot; to assign and &quot;==&quot; to compare, which were a lot easier. That became the standard for most languages that followed, including Java."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686845768,"creation_date":1686845768,"answer_id":76483631,"question_id":76483611,"body_markdown":"Because **assignment** resolves to the assigned value. That sets `d` to `false` (and evaluates to `false`) and thus the `while` does not enter the loop body.\r\n\r\n    while (d=false) {\r\n\r\nAnd you don&#39;t need any `=` for `boolean`(s).\r\n\r\n    while (!d) {\r\n\r\n**or**\r\n\r\n    while (d) {\r\n\r\nare correct, and don&#39;t involve assignment.","title":"Why don&#39;t we have to use two &#39;=&#39; operands for mentioning equality for boolean variable?","body":"<p>Because <strong>assignment</strong> resolves to the assigned value. That sets <code>d</code> to <code>false</code> (and evaluates to <code>false</code>) and thus the <code>while</code> does not enter the loop body.</p>\n<pre><code>while (d=false) {\n</code></pre>\n<p>And you don't need any <code>=</code> for <code>boolean</code>(s).</p>\n<pre><code>while (!d) {\n</code></pre>\n<p><strong>or</strong></p>\n<pre><code>while (d) {\n</code></pre>\n<p>are correct, and don't involve assignment.</p>\n"},{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686853338,"creation_date":1686853338,"answer_id":76484508,"question_id":76483611,"body_markdown":"If you really use two &quot;=&quot; operators (not operands), you would get a compiler error …\r\n\r\n&quot;=&quot; is the operator for assignments, &quot;==&quot; is the equality operator, and &quot;= =&quot; is a syntax error.\r\n\r\nHow to use it is explained in [this answer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76483631/1554195","title":"Why don&#39;t we have to use two &#39;=&#39; operands for mentioning equality for boolean variable?","body":"<p>If you really use two &quot;=&quot; operators (not operands), you would get a compiler error …</p>\n<p>&quot;=&quot; is the operator for assignments, &quot;==&quot; is the equality operator, and &quot;= =&quot; is a syntax error.</p>\n<p>How to use it is explained in <a href=\"https://stackoverflow.com/a/76483631/1554195\">this answer</a>.</p>\n"}],"owner":{"account_id":28571449,"reputation":13,"user_id":21873606,"display_name":"emre.ddl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":76483631,"answer_count":2,"score":-2,"last_activity_date":1686853338,"creation_date":1686845649,"question_id":76483611,"body_markdown":"When I coding in a while loop in java , I discovered that we don&#39;t have to use two assignment operands for give meaning equality for JUST BOOLEAN VARİABLE(I found just it). What is the reason behind this situation? Thank you from now\r\n\r\n ` int a=30;\r\n\t  boolean d=true;\r\n\t \r\n\t  while (a==30) {   &lt;- We need to use like that for other variables\r\n           \r\n\t\t \r\n\t\t}`\r\n\r\n ` int a=30;\r\n\t  boolean d=true;\r\n\t \r\n\t  while (d=false) {   &lt;- We need to use like that for other variables\r\n           \r\n\t\t \r\n\t\t}`","title":"Why don&#39;t we have to use two &#39;=&#39; operands for mentioning equality for boolean variable?","body":"<p>When I coding in a while loop in java , I discovered that we don't have to use two assignment operands for give meaning equality for JUST BOOLEAN VARİABLE(I found just it). What is the reason behind this situation? Thank you from now</p>\n<p>` int a=30;\nboolean d=true;</p>\n<pre><code>  while (a==30) {   &lt;- We need to use like that for other variables\n       \n     \n    }`\n</code></pre>\n<p>` int a=30;\nboolean d=true;</p>\n<pre><code>  while (d=false) {   &lt;- We need to use like that for other variables\n       \n     \n    }`\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686853518,"post_id":76484479,"comment_id":134858921,"body_markdown":"If you want a Web application you should add spring-boot-starter-web dependency.","body":"If you want a Web application you should add spring-boot-starter-web dependency."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686853535,"post_id":76484479,"comment_id":134858926,"body_markdown":"Have you added any spring boot starters dependencies?","body":"Have you added any spring boot starters dependencies?"}],"owner":{"account_id":7732618,"reputation":336,"user_id":5859299,"display_name":"Austin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686853083,"creation_date":1686853083,"question_id":76484479,"body_markdown":"I have a spring boot app, it is just the basic example project. When I build the app and run the jar, the app stops at startup without actually launching the app. I get some output from the spring code, and I noticed that it is the same as what I see when I build the jar, but tomcat does not start. Does anyone know why the app is doing this?\r\n\r\nDemoApplication.java\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nOutput when running\r\n```\r\n .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::               (v2.7.12)\r\n\r\n[2023-06-15 18:02:39.813] - 70503 INFO [main] --- com.example.demo.DemoApplication: Starting DemoApplication using Java 1.8.0_352 on machine16 with PID 503 (~/sv/lib/d-test.jar started by user6 in ~/sv)\r\n[2023-06-15 18:02:39.838] - 70503 INFO [main] --- com.example.demo.DemoApplication: No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n[2023-06-15 18:02:40.883] - 70503 INFO [main] --- com.example.demo.DemoApplication: Started DemoApplication in 1.828 seconds (JVM running for 2.387)\r\n```\r\n\r\nOutput when building jar\r\n```\r\n.   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::               (v2.7.12)\r\n\r\n2023-06-15 18:07:10.050  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : Starting DemoApplicationTests using Java 1.8.0_352 on machine16 with PID 8372 (started by user6 in ~/sv/demo)\r\n2023-06-15 18:07:10.051  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-06-15 18:07:11.185  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : Started DemoApplicationTests in 1.347 seconds (JVM running for 2.184)\r\n\r\n```","title":"spring boot stops immediately, no exception thrown","body":"<p>I have a spring boot app, it is just the basic example project. When I build the app and run the jar, the app stops at startup without actually launching the app. I get some output from the spring code, and I noticed that it is the same as what I see when I build the jar, but tomcat does not start. Does anyone know why the app is doing this?</p>\n<p>DemoApplication.java</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Output when running</p>\n<pre><code> .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::               (v2.7.12)\n\n[2023-06-15 18:02:39.813] - 70503 INFO [main] --- com.example.demo.DemoApplication: Starting DemoApplication using Java 1.8.0_352 on machine16 with PID 503 (~/sv/lib/d-test.jar started by user6 in ~/sv)\n[2023-06-15 18:02:39.838] - 70503 INFO [main] --- com.example.demo.DemoApplication: No active profile set, falling back to 1 default profile: &quot;default&quot;\n[2023-06-15 18:02:40.883] - 70503 INFO [main] --- com.example.demo.DemoApplication: Started DemoApplication in 1.828 seconds (JVM running for 2.387)\n</code></pre>\n<p>Output when building jar</p>\n<pre><code>.   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::               (v2.7.12)\n\n2023-06-15 18:07:10.050  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : Starting DemoApplicationTests using Java 1.8.0_352 on machine16 with PID 8372 (started by user6 in ~/sv/demo)\n2023-06-15 18:07:10.051  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-06-15 18:07:11.185  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : Started DemoApplicationTests in 1.347 seconds (JVM running for 2.184)\n\n</code></pre>\n"},{"tags":["java","serialization","linkedhashmap","objectoutputstream"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":2,"creation_date":1686836937,"post_id":76483165,"comment_id":134856625,"body_markdown":"A [mcve] is a great start when asking for SQL assistance.","body":"A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is a great start when asking for SQL assistance."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686846802,"post_id":76483165,"comment_id":134857609,"body_markdown":"Do you know about a for-each loop? `LinkedHashMap&lt;String, NetworkedSQLObject&gt; map = new LinkedHashMap&lt;&gt;(); for(Map.Entry&lt;String, SQLObject&gt;&gt; entry: data.entrySet()) { Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + entry.getKey() + &#39;:&#39; + entry.getValue().getType() + &quot; -&gt; &quot; + entry.getValue().getValue()); put(entry.getKey(), new NetworkedSQLObject(entry.getValue())); } return map;` Since Java&#160;8 it’s even simpler: `data.forEach((k,v) -&gt; Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + k + &#39;:&#39; +v.getType() + &quot; -&gt; &quot; + v.getValue()); put(k, new NetworkedSQLObject(v); }`","body":"Do you know about a for-each loop? <code>LinkedHashMap&lt;String, NetworkedSQLObject&gt; map = new LinkedHashMap&lt;&gt;(); for(Map.Entry&lt;String, SQLObject&gt;&gt; entry: data.entrySet()) { Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + entry.getKey() + &#39;:&#39; + entry.getValue().getType() + &quot; -&gt; &quot; + entry.getValue().getValue()); put(entry.getKey(), new NetworkedSQLObject(entry.getValue())); } return map;</code> Since Java 8 it’s even simpler: <code>data.forEach((k,v) -&gt; Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + k + &#39;:&#39; +v.getType() + &quot; -&gt; &quot; + v.getValue()); put(k, new NetworkedSQLObject(v); }</code>"},{"owner":{"account_id":24613253,"reputation":58,"user_id":18514542,"display_name":"TBCM"},"score":0,"creation_date":1686940001,"post_id":76483165,"comment_id":134872679,"body_markdown":"@Holger For my instance, using an iterator retains the order in which the `LinkedHashMap`&#39;s elements were added. This is how I abstract and fill in the data from my SQL response and my objects. a traditional for loop was not working, and without using a `.entrySet().iterator()` it would not be a linear iteration.","body":"@Holger For my instance, using an iterator retains the order in which the <code>LinkedHashMap</code>&#39;s elements were added. This is how I abstract and fill in the data from my SQL response and my objects. a traditional for loop was not working, and without using a <code>.entrySet().iterator()</code> it would not be a linear iteration."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1687161104,"post_id":76483165,"comment_id":134892663,"body_markdown":"That’s nonsense. The for-each loop uses an `Iterator` under the hood and behaves exactly the same. It’s not even clear what you think it is, if not a linear iteration.","body":"That’s nonsense. The for-each loop uses an <code>Iterator</code> under the hood and behaves exactly the same. It’s not even clear what you think it is, if not a linear iteration."},{"owner":{"account_id":24613253,"reputation":58,"user_id":18514542,"display_name":"TBCM"},"score":0,"creation_date":1687265659,"post_id":76483165,"comment_id":134909973,"body_markdown":"@Holger, im not sure, but i tried both ways, and was left with a completely unordered iteration order with a for loop.","body":"@Holger, im not sure, but i tried both ways, and was left with a completely unordered iteration order with a for loop."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1687265977,"post_id":76483165,"comment_id":134910064,"body_markdown":"I’d like to see a [mre] for that…","body":"I’d like to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for that…"}],"answers":[{"tags":[],"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686837320,"creation_date":1686837320,"answer_id":76483223,"question_id":76483165,"body_markdown":"You have used the double brace initialization pattern in your class, which is generally not a desirable pattern (the double `{{}}`).  What that does is effectively define a new, inner class.  So you are not returning an actual LinkedHashMap, you are returning an anonymous inner class which extends from LinkedHashMap.  Since it is an inner class, it also retains a reference to the _outer_ class, in this case, your `SQLRow` class.  Simply removing the double brace initialization pattern should solve your problem.  (this is one of the many reasons the pattern should be avoided).","title":"Java LinkedHashMap converted to Object is serialized as another class?","body":"<p>You have used the double brace initialization pattern in your class, which is generally not a desirable pattern (the double <code>{{}}</code>).  What that does is effectively define a new, inner class.  So you are not returning an actual LinkedHashMap, you are returning an anonymous inner class which extends from LinkedHashMap.  Since it is an inner class, it also retains a reference to the <em>outer</em> class, in this case, your <code>SQLRow</code> class.  Simply removing the double brace initialization pattern should solve your problem.  (this is one of the many reasons the pattern should be avoided).</p>\n"}],"owner":{"account_id":24613253,"reputation":58,"user_id":18514542,"display_name":"TBCM"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76483223,"answer_count":1,"score":0,"last_activity_date":1686852940,"creation_date":1686836873,"question_id":76483165,"body_markdown":"I am trying to serialize a `LinkedHashMap` to be written to an `ObjectOutputStream`, but I&#39;ve encountered something strange. The `ObjectOutputStream`, writes the `LinkedHashMap` converted to an `Object`, however it is not a `LinkedHashMap`, it is writted as my class called `SQLRow`?!\r\n\r\n\r\n```\r\nHost.instance.getLogger().info(&quot;Sending back player data...&quot;);\r\nfinal LinkedHashMap&lt;String, NetworkedSQLObject&gt; hm = MirageSQLTables.players.getByPrimaryKey(rest.readUTF()).getAsSocketEligibleMap();\r\nHost.instance.getLogger().info(&quot;Linked Hash Map class name: &quot; + hm.getClass().getName());\r\nc.sendMessage(new SQLObjectResponsePacket(pID, (Object)hm));\r\n```\r\nNOTE: The function `getByPrimaryKey()` is a custom SQL function that returns my custom class, `SQLRow`.\r\n\r\noutput of code above:\r\n\r\n```\r\n\r\n14:37:03 [INFO] [Host] Sending back player data...\r\n14:37:03 [INFO] [Host] Getting col: id\r\n14:37:03 [INFO] [Host] Getting col: name\r\n14:37:03 [INFO] [Host] Getting col: date_joined\r\n14:37:03 [INFO] [Host] Getting col: rank\r\n14:37:03 [INFO] [Host] Getting col: moderator\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: id:TEXT -&gt; 2\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: name:TEXT -&gt; KrispWasntTaken\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: date_joined:TIMESTAMP -&gt; 2023-06-14 18:19:15.0\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: rank:INT -&gt; 0\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: moderator:BIT -&gt; true\r\n14:37:03 [INFO] [Host] Linked Hash Map class name: mirage.database.sql.SQLRow$1 &lt;---- HERE!\r\n\r\n```\r\n\r\nIt says the same thing in the NetworkedSQLObject constructor. The function `getAsSocketEligibleMap()` is INSIDE the SQLRow class, but I am really confused as it has no ties to the class and returns a fresh new `LinkedHashMap`, not an instance of a `SQLRow`...\r\n\r\n`getAsSocketEligibleMap()` code:\r\n\r\n```\r\n\r\npublic LinkedHashMap&lt;String, NetworkedSQLObject&gt; getAsSocketEligibleMap(){\r\n        return new LinkedHashMap&lt;&gt;(){{\r\n            Set&lt;Map.Entry&lt;String, SQLObject&gt;&gt; es = data.entrySet();\r\n\r\n            Iterator&lt;Map.Entry&lt;String, SQLObject&gt;&gt; i = es.iterator();\r\n\r\n            while(i.hasNext()){\r\n                Map.Entry&lt;String, SQLObject&gt; entry = i.next();\r\n                Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + entry.getKey() + &#39;:&#39; + entry.getValue().getType() + &quot; -&gt; &quot; + entry.getValue().getValue());\r\n                put(entry.getKey(), new NetworkedSQLObject(entry.getValue()));\r\n            }\r\n        }};\r\n    }\r\n\r\n```\r\n\r\n\r\nAny help is appreciated...\r\n","title":"Java LinkedHashMap converted to Object is serialized as another class?","body":"<p>I am trying to serialize a <code>LinkedHashMap</code> to be written to an <code>ObjectOutputStream</code>, but I've encountered something strange. The <code>ObjectOutputStream</code>, writes the <code>LinkedHashMap</code> converted to an <code>Object</code>, however it is not a <code>LinkedHashMap</code>, it is writted as my class called <code>SQLRow</code>?!</p>\n<pre><code>Host.instance.getLogger().info(&quot;Sending back player data...&quot;);\nfinal LinkedHashMap&lt;String, NetworkedSQLObject&gt; hm = MirageSQLTables.players.getByPrimaryKey(rest.readUTF()).getAsSocketEligibleMap();\nHost.instance.getLogger().info(&quot;Linked Hash Map class name: &quot; + hm.getClass().getName());\nc.sendMessage(new SQLObjectResponsePacket(pID, (Object)hm));\n</code></pre>\n<p>NOTE: The function <code>getByPrimaryKey()</code> is a custom SQL function that returns my custom class, <code>SQLRow</code>.</p>\n<p>output of code above:</p>\n<pre><code>\n14:37:03 [INFO] [Host] Sending back player data...\n14:37:03 [INFO] [Host] Getting col: id\n14:37:03 [INFO] [Host] Getting col: name\n14:37:03 [INFO] [Host] Getting col: date_joined\n14:37:03 [INFO] [Host] Getting col: rank\n14:37:03 [INFO] [Host] Getting col: moderator\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: id:TEXT -&gt; 2\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: name:TEXT -&gt; KrispWasntTaken\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: date_joined:TIMESTAMP -&gt; 2023-06-14 18:19:15.0\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: rank:INT -&gt; 0\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: moderator:BIT -&gt; true\n14:37:03 [INFO] [Host] Linked Hash Map class name: mirage.database.sql.SQLRow$1 &lt;---- HERE!\n\n</code></pre>\n<p>It says the same thing in the NetworkedSQLObject constructor. The function <code>getAsSocketEligibleMap()</code> is INSIDE the SQLRow class, but I am really confused as it has no ties to the class and returns a fresh new <code>LinkedHashMap</code>, not an instance of a <code>SQLRow</code>...</p>\n<p><code>getAsSocketEligibleMap()</code> code:</p>\n<pre><code>\npublic LinkedHashMap&lt;String, NetworkedSQLObject&gt; getAsSocketEligibleMap(){\n        return new LinkedHashMap&lt;&gt;(){{\n            Set&lt;Map.Entry&lt;String, SQLObject&gt;&gt; es = data.entrySet();\n\n            Iterator&lt;Map.Entry&lt;String, SQLObject&gt;&gt; i = es.iterator();\n\n            while(i.hasNext()){\n                Map.Entry&lt;String, SQLObject&gt; entry = i.next();\n                Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + entry.getKey() + ':' + entry.getValue().getType() + &quot; -&gt; &quot; + entry.getValue().getValue());\n                put(entry.getKey(), new NetworkedSQLObject(entry.getValue()));\n            }\n        }};\n    }\n\n</code></pre>\n<p>Any help is appreciated...</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"owner":{"account_id":792027,"reputation":2645,"user_id":869368,"display_name":"Matthias"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686852673,"creation_date":1686852673,"question_id":76484430,"body_markdown":"I&#39;m upgrading from Spring Boot 2 to Spring Boot 3.1. \r\nGenerally the application runs fine, however our API tests frequently fail since the upgrade due to a high amount of JPA Deadlock Exceptions. Such Deadlocks did not at all occur with Version 2 - it&#39;s the first time I am seeing them, and now they happen very often (~40% of tests will fail due to these deadlock exceptions). \r\n\r\nWhat I can see is that it&#39;s all inserts and it&#39;s all going to the same table, which isn&#39;t very big and does not have a lot of indexes to it (one foreign key index and one index on a state; that&#39;s it). There&#39;s not a single such exception on a different table, while some of them getting way more writes than this one. \r\n\r\nHas anyone seen such a behaviuor before? \r\n\r\n\r\n\r\n```\r\nCaused by: org.hibernate.exception.LockAcquisitionException: could not execute batch [(conn=1247) Deadlock found when trying to get lock; try restarting transaction] [insert into `order_purchase_order` (`buyer_purchase_order_comment`,`created_at`,`current_state`,`last_modified_at`,`order_id`,`state_history`,`supplier_dialect_id`,`supplier_id`,`supplier_id_name`,`supplier_name`,`supplier_sales_order_reference`,`id`) values (?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1178)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:289)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:262)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:241)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.getBatch(JdbcCoordinatorImpl.java:173)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleBatched.resolveBatch(MutationExecutorSingleBatched.java:47)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleBatched.performBatchedOperations(MutationExecutorSingleBatched.java:60)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2670)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:618)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:489)\r\n\tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:486)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:358)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1412)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:485)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2296)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1961)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 24 common frames omitted\r\nCaused by: java.sql.BatchUpdateException: (conn=1247) Deadlock found when trying to get lock; try restarting transaction\r\n\tat org.mariadb.jdbc.export.ExceptionFactory.createBatchUpdate(ExceptionFactory.java:215)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.executePipeline(StandardClient.java:637)\r\n\tat org.mariadb.jdbc.ClientPreparedStatement.executeBatchPipeline(ClientPreparedStatement.java:196)\r\n\tat org.mariadb.jdbc.ClientPreparedStatement.executeInternalPreparedBatch(ClientPreparedStatement.java:128)\r\n\tat org.mariadb.jdbc.ClientPreparedStatement.executeBatch(ClientPreparedStatement.java:466)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:127)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:275)\r\n\t... 51 common frames omitted\r\nCaused by: java.sql.SQLTransactionRollbackException: (conn=1247) Deadlock found when trying to get lock; try restarting transaction\r\n\tat org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:296)\r\n\tat org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:370)\r\n\tat org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:134)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:872)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:811)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:730)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.executePipeline(StandardClient.java:571)\r\n\t... 57 common frames omitted\r\n```","title":"Spring Boot 3 Upgrade - Spring Data JPA Deadlocks on insert to MariaDb at Concurrency","body":"<p>I'm upgrading from Spring Boot 2 to Spring Boot 3.1.\nGenerally the application runs fine, however our API tests frequently fail since the upgrade due to a high amount of JPA Deadlock Exceptions. Such Deadlocks did not at all occur with Version 2 - it's the first time I am seeing them, and now they happen very often (~40% of tests will fail due to these deadlock exceptions).</p>\n<p>What I can see is that it's all inserts and it's all going to the same table, which isn't very big and does not have a lot of indexes to it (one foreign key index and one index on a state; that's it). There's not a single such exception on a different table, while some of them getting way more writes than this one.</p>\n<p>Has anyone seen such a behaviuor before?</p>\n<pre><code>Caused by: org.hibernate.exception.LockAcquisitionException: could not execute batch [(conn=1247) Deadlock found when trying to get lock; try restarting transaction] [insert into `order_purchase_order` (`buyer_purchase_order_comment`,`created_at`,`current_state`,`last_modified_at`,`order_id`,`state_history`,`supplier_dialect_id`,`supplier_id`,`supplier_id_name`,`supplier_name`,`supplier_sales_order_reference`,`id`) values (?,?,?,?,?,?,?,?,?,?,?,?)]\n    at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1178)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\n    at org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:289)\n    at org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\n    at org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:262)\n    at org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:241)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.getBatch(JdbcCoordinatorImpl.java:173)\n    at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleBatched.resolveBatch(MutationExecutorSingleBatched.java:47)\n    at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleBatched.performBatchedOperations(MutationExecutorSingleBatched.java:60)\n    at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)\n    at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)\n    at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2670)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:618)\n    at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:489)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:486)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:358)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1412)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:485)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2296)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1961)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\n    ... 24 common frames omitted\nCaused by: java.sql.BatchUpdateException: (conn=1247) Deadlock found when trying to get lock; try restarting transaction\n    at org.mariadb.jdbc.export.ExceptionFactory.createBatchUpdate(ExceptionFactory.java:215)\n    at org.mariadb.jdbc.client.impl.StandardClient.executePipeline(StandardClient.java:637)\n    at org.mariadb.jdbc.ClientPreparedStatement.executeBatchPipeline(ClientPreparedStatement.java:196)\n    at org.mariadb.jdbc.ClientPreparedStatement.executeInternalPreparedBatch(ClientPreparedStatement.java:128)\n    at org.mariadb.jdbc.ClientPreparedStatement.executeBatch(ClientPreparedStatement.java:466)\n    at com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:127)\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)\n    at org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:275)\n    ... 51 common frames omitted\nCaused by: java.sql.SQLTransactionRollbackException: (conn=1247) Deadlock found when trying to get lock; try restarting transaction\n    at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:296)\n    at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:370)\n    at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:134)\n    at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:872)\n    at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:811)\n    at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:730)\n    at org.mariadb.jdbc.client.impl.StandardClient.executePipeline(StandardClient.java:571)\n    ... 57 common frames omitted\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":9921486,"reputation":5699,"user_id":7344445,"display_name":"Atif AbbAsi"},"score":0,"creation_date":1509083310,"post_id":46894118,"comment_id":80883907,"body_markdown":"mDatabase.getReference().keepSynced(false);      \n      FirebaseDatabase.getInstance().setPersistenceEnabled(false);","body":"mDatabase.getReference().keepSynced(false);             FirebaseDatabase.getInstance().setPersistenceEnabled(false);"},{"owner":{"account_id":8084605,"reputation":337,"user_id":6092538,"accept_rate":78,"display_name":"Snehal Gongle"},"score":0,"creation_date":1509084980,"post_id":46894118,"comment_id":80884545,"body_markdown":"look personally i don&#39;t think that it has anything to do with the cache still in case it has that problem then check enable offline persistence(https://firebase.google.com/docs/firestore/manage-data/enable-offline#configure_offline_persistence)","body":"look personally i don&#39;t think that it has anything to do with the cache still in case it has that problem then check enable offline persistence(<a href=\"https://firebase.google.com/docs/firestore/manage-data/enable-offline#configure_offline_persistence\" rel=\"nofollow noreferrer\">firebase.google.com/docs/firestore/manage-data/&hellip;</a>&zwnj;&#8203;)"},{"owner":{"account_id":152400,"reputation":240428,"user_id":366904,"accept_rate":82,"display_name":"Cody Gray - on strike"},"score":0,"creation_date":1509106097,"post_id":46894118,"comment_id":80896736,"body_markdown":"Please consider easing up on the minor edits here. The question already has a bounty set, so it&#39;ll be featured for 5 more days without you needing to &quot;bump&quot; it with edits.","body":"Please consider easing up on the minor edits here. The question already has a bounty set, so it&#39;ll be featured for 5 more days without you needing to &quot;bump&quot; it with edits."},{"owner":{"account_id":7781537,"reputation":4101,"user_id":5887805,"display_name":"Alexander Vitanov"},"score":0,"creation_date":1509214883,"post_id":46894118,"comment_id":80932400,"body_markdown":"Did you try this: https://stackoverflow.com/questions/46790741/how-can-i-delete-the-available-state-in-a-local-cache","body":"Did you try this: <a href=\"https://stackoverflow.com/questions/46790741/how-can-i-delete-the-available-state-in-a-local-cache\" title=\"how can i delete the available state in a local cache\">stackoverflow.com/questions/46790741/&hellip;</a>"},{"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"score":0,"creation_date":1509302896,"post_id":46894118,"comment_id":80954315,"body_markdown":"@AlexanderVitanov It seems like an option to consider if I won&#39;t find the solution. However, if I have checked whether the snapshot is from cache or not and I found out it does, will I be able to get the snapshot from the server instead? Can I choose?","body":"@AlexanderVitanov It seems like an option to consider if I won&#39;t find the solution. However, if I have checked whether the snapshot is from cache or not and I found out it does, will I be able to get the snapshot from the server instead? Can I choose?"},{"owner":{"account_id":1529459,"reputation":485,"user_id":1427044,"accept_rate":38,"display_name":"eJoe"},"score":0,"creation_date":1509723831,"post_id":46894118,"comment_id":81149024,"body_markdown":"I have the same problem with Firestore in my application? Any progress on this?","body":"I have the same problem with Firestore in my application? Any progress on this?"},{"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"score":0,"creation_date":1509732258,"post_id":46894118,"comment_id":81153896,"body_markdown":"@eJoe Nope. I still haven&#39;t found a solution.","body":"@eJoe Nope. I still haven&#39;t found a solution."}],"answers":[{"tags":[],"owner":{"account_id":9921486,"reputation":5699,"user_id":7344445,"display_name":"Atif AbbAsi"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1510749858,"creation_date":1509083239,"answer_id":46968268,"question_id":46894118,"body_markdown":"    // Enable Firestore logging\r\n        FirebaseFirestore.setLoggingEnabled(flase);\r\n    // Firestore\r\n        mFirestore = FirebaseFirestore.getInstance();\r\n\r\n   In general: the Firebase client tries to minimize the number of times it downloads data. But it also tries to minimize the amount of memory/disk space it uses.\r\n\r\nThe exact behavior depends on many things, such as whether the another listener has remained active on that location and whether you&#39;re using disk persistence. If you have two listeners for the same (or overlapping) data, updates will only be downloaded once. But if you remove the last listener for a location, the data for that location is removed from the (memory and/or disk) cache.\r\n\r\nWithout seeing a complete piece of code, it&#39;s hard to tell what will happen in your case.\r\n\r\nAlternatively: you can check for yourself by enabling Firebase&#39;s logging `[Firebase setLoggingEnabled:YES]`;\r\n\r\n  **try this For FireBase DataBase** \r\n\r\n      mDatabase.getReference().keepSynced(false);      \r\n          FirebaseDatabase.getInstance().setPersistenceEnabled(false);","title":"Can&#39;t Disable Offline Data In Firestore","body":"<pre><code>// Enable Firestore logging\n    FirebaseFirestore.setLoggingEnabled(flase);\n// Firestore\n    mFirestore = FirebaseFirestore.getInstance();\n</code></pre>\n\n<p>In general: the Firebase client tries to minimize the number of times it downloads data. But it also tries to minimize the amount of memory/disk space it uses.</p>\n\n<p>The exact behavior depends on many things, such as whether the another listener has remained active on that location and whether you're using disk persistence. If you have two listeners for the same (or overlapping) data, updates will only be downloaded once. But if you remove the last listener for a location, the data for that location is removed from the (memory and/or disk) cache.</p>\n\n<p>Without seeing a complete piece of code, it's hard to tell what will happen in your case.</p>\n\n<p>Alternatively: you can check for yourself by enabling Firebase's logging <code>[Firebase setLoggingEnabled:YES]</code>;</p>\n\n<p><strong>try this For FireBase DataBase</strong> </p>\n\n<pre><code>  mDatabase.getReference().keepSynced(false);      \n      FirebaseDatabase.getInstance().setPersistenceEnabled(false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1540872418,"creation_date":1510948584,"answer_id":47358362,"question_id":46894118,"body_markdown":"I just ran a few tests in an Android application to see how this works. Because Firestore is currently still in `beta release` and the product might suffer changes any time, i cannot guarantee that this behaviour will still hold in the future.\r\n\r\n\tdb.collection(&quot;tests&quot;).document(&quot;fOpCiqmUjAzjnZimjd5c&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\r\n\t\t\tDocumentSnapshot documentSnapshot = task.getResult();\r\n\t\t\tSystem.out.println(&quot;isFromCache: &quot; + documentSnapshot.getMetadata().isFromCache());\r\n\t\t}\r\n\t});\r\n\r\nRegarding the code, is the same no matter if we&#39;re getting the data from the cache or you are connected to the servers.\r\n\r\nWhen I&#39;m online it prints:\r\n\r\n    isFromCache: false\r\n\r\nWhen I&#39;m offline, it prints:\r\n\r\n    isFromCache: true\r\n\r\nSo, for the moment, there is no way to stop the retrieval of the data from the cache while you are not connected to the server, as you cannot force the retrieval of the data from the cache while you&#39;re connected to the server.\r\n\r\nIf instead I use a listener:\r\n\r\n\tdb.collection(&quot;tests&quot;).document(&quot;fOpCiqmUjAzjnZimjd5c&quot;).addSnapshotListener(new DocumentListenOptions().includeMetadataChanges(), new EventListener&lt;DocumentSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onEvent(DocumentSnapshot documentSnapshot, FirebaseFirestoreException e) {\r\n\t\t\tSystem.out.println(&quot;listener.isFromCache: &quot; + documentSnapshot.getMetadata().isFromCache());\r\n\t\t}\r\n\t});\r\n\r\nI get two prints when I&#39;m online:\r\n\r\n    listener.isFromCache: true\r\n    listener.isFromCache: false\r\n\r\n\r\nFirestore is desinged to retrieve data from the chache when the device is permanently offline or while your application temporarily loses its network connection and for the moment you cannot change this behaviour.\r\n\r\nAs a concusion, an API that does something like this, currently doesn&#39;t exist yet.\r\n\r\n**Edit:** Unlike in Firebase, where to enable the offline persistence you need use this line of code:\r\n\r\n    FirebaseDatabase.getInstance().setPersistenceEnabled(true);\r\n\r\nIn Firestore, for Android and iOS, offline persistence is `enabled by default`. \r\n\r\nUsing the above line of code, means that you tell Firebase to create a local (internal) copy of your database so that your app can work even if it temporarily loses its network connection.\r\n\r\nIn Firestore we find the opposite, to disable persistence, we need to set the `PersistenceEnabled` option to `false`. This means that you tell Firestore not to create a local copy of your database on user device, which in term means that you&#39;ll not be able to query your database unless your are connected to Firebase servers. So without having a local copy of your database and if beeing disconected, an Exception will be thrown. That&#39;s why is a good practice to use the `OnFailureListener`.\r\n\r\n**Update (2018-06-13):** As also @TalBarda mentioned in his answer this is now possible starting with the 16.0.0 SDK version update. So we can achieve this with the help of the [DocumentReference.get(Source source)](https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference.html#get(com.google.firebase.firestore.Source)) and [Query.get(Source source)](https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query.html#get(com.google.firebase.firestore.Source)) methods.\r\n\r\n&gt; By default, `get()` attempts to provide up-to-date data when possible by waiting for data from the server, but it may return cached data or fail if you are offline and the server cannot be reached. This behavior can be altered via the Source parameter.\r\n\r\nSo we can now pass as an argument to the `DocumentReference` or to the `Query` the source so we can force the retrieval of data from the `server only`, `chache only` or attempt server and fall back to the cache.\r\n\r\nSo something like this is now possible:\r\n\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    DocumentReference docIdRef = db.collection(&quot;tests&quot;).document(&quot;fOpCiqmUjAzjnZimjd5c&quot;);\r\n    docIdRef.get(Source.SERVER).addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n        @Override\r\n        public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n            //Get data from the documentSnapshot object\r\n        }\r\n    });\r\n\r\nIn this case, we force the data to be retrieved from the server only. If you want to force the data to be retrieved from the cache only, you should pass as an argument to the `get()` method, `Source.CACHE`. More informations [here](https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Source).","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>I just ran a few tests in an Android application to see how this works. Because Firestore is currently still in <code>beta release</code> and the product might suffer changes any time, i cannot guarantee that this behaviour will still hold in the future.</p>\n\n<pre><code>db.collection(\"tests\").document(\"fOpCiqmUjAzjnZimjd5c\").get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\n        DocumentSnapshot documentSnapshot = task.getResult();\n        System.out.println(\"isFromCache: \" + documentSnapshot.getMetadata().isFromCache());\n    }\n});\n</code></pre>\n\n<p>Regarding the code, is the same no matter if we're getting the data from the cache or you are connected to the servers.</p>\n\n<p>When I'm online it prints:</p>\n\n<pre><code>isFromCache: false\n</code></pre>\n\n<p>When I'm offline, it prints:</p>\n\n<pre><code>isFromCache: true\n</code></pre>\n\n<p>So, for the moment, there is no way to stop the retrieval of the data from the cache while you are not connected to the server, as you cannot force the retrieval of the data from the cache while you're connected to the server.</p>\n\n<p>If instead I use a listener:</p>\n\n<pre><code>db.collection(\"tests\").document(\"fOpCiqmUjAzjnZimjd5c\").addSnapshotListener(new DocumentListenOptions().includeMetadataChanges(), new EventListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onEvent(DocumentSnapshot documentSnapshot, FirebaseFirestoreException e) {\n        System.out.println(\"listener.isFromCache: \" + documentSnapshot.getMetadata().isFromCache());\n    }\n});\n</code></pre>\n\n<p>I get two prints when I'm online:</p>\n\n<pre><code>listener.isFromCache: true\nlistener.isFromCache: false\n</code></pre>\n\n<p>Firestore is desinged to retrieve data from the chache when the device is permanently offline or while your application temporarily loses its network connection and for the moment you cannot change this behaviour.</p>\n\n<p>As a concusion, an API that does something like this, currently doesn't exist yet.</p>\n\n<p><strong>Edit:</strong> Unlike in Firebase, where to enable the offline persistence you need use this line of code:</p>\n\n<pre><code>FirebaseDatabase.getInstance().setPersistenceEnabled(true);\n</code></pre>\n\n<p>In Firestore, for Android and iOS, offline persistence is <code>enabled by default</code>. </p>\n\n<p>Using the above line of code, means that you tell Firebase to create a local (internal) copy of your database so that your app can work even if it temporarily loses its network connection.</p>\n\n<p>In Firestore we find the opposite, to disable persistence, we need to set the <code>PersistenceEnabled</code> option to <code>false</code>. This means that you tell Firestore not to create a local copy of your database on user device, which in term means that you'll not be able to query your database unless your are connected to Firebase servers. So without having a local copy of your database and if beeing disconected, an Exception will be thrown. That's why is a good practice to use the <code>OnFailureListener</code>.</p>\n\n<p><strong>Update (2018-06-13):</strong> As also @TalBarda mentioned in his answer this is now possible starting with the 16.0.0 SDK version update. So we can achieve this with the help of the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference.html#get(com.google.firebase.firestore.Source)\" rel=\"noreferrer\">DocumentReference.get(Source source)</a> and <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query.html#get(com.google.firebase.firestore.Source)\" rel=\"noreferrer\">Query.get(Source source)</a> methods.</p>\n\n<blockquote>\n  <p>By default, <code>get()</code> attempts to provide up-to-date data when possible by waiting for data from the server, but it may return cached data or fail if you are offline and the server cannot be reached. This behavior can be altered via the Source parameter.</p>\n</blockquote>\n\n<p>So we can now pass as an argument to the <code>DocumentReference</code> or to the <code>Query</code> the source so we can force the retrieval of data from the <code>server only</code>, <code>chache only</code> or attempt server and fall back to the cache.</p>\n\n<p>So something like this is now possible:</p>\n\n<pre><code>FirebaseFirestore db = FirebaseFirestore.getInstance();\nDocumentReference docIdRef = db.collection(\"tests\").document(\"fOpCiqmUjAzjnZimjd5c\");\ndocIdRef.get(Source.SERVER).addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onSuccess(DocumentSnapshot documentSnapshot) {\n        //Get data from the documentSnapshot object\n    }\n});\n</code></pre>\n\n<p>In this case, we force the data to be retrieved from the server only. If you want to force the data to be retrieved from the cache only, you should pass as an argument to the <code>get()</code> method, <code>Source.CACHE</code>. More informations <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Source\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1525417532,"creation_date":1525417532,"answer_id":50169115,"question_id":46894118,"body_markdown":"According to `Cloud Firestore` ***16.0.0*** SDK update, there is now a solution to this problem:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/laWUp.png\r\n_____\r\n\r\n\r\nYou are now able to choose if you would like to fetch your data from the *server only*, **or** from the *cache only*, like this (an example for server only):\r\n\r\n    DocumentReference documentReference= FirebaseFirestore.getInstance().document(&quot;example&quot;);\r\n    documentReference.get(Source.SERVER).addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n        @Override\r\n        public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                //...\r\n        }\r\n    });\r\n\r\nFor cache only, just change the code above to `Source.CACHE`. \r\n_____\r\n**By default, both methods still attempt server and fall back to the cache.**\r\n","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>According to <code>Cloud Firestore</code> <strong><em>16.0.0</em></strong> SDK update, there is now a solution to this problem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/laWUp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/laWUp.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>You are now able to choose if you would like to fetch your data from the <em>server only</em>, <strong>or</strong> from the <em>cache only</em>, like this (an example for server only):</p>\n\n<pre><code>DocumentReference documentReference= FirebaseFirestore.getInstance().document(\"example\");\ndocumentReference.get(Source.SERVER).addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onSuccess(DocumentSnapshot documentSnapshot) {\n            //...\n    }\n});\n</code></pre>\n\n<p>For cache only, just change the code above to <code>Source.CACHE</code>. </p>\n\n<hr>\n\n<p><strong>By default, both methods still attempt server and fall back to the cache.</strong></p>\n"},{"tags":[],"owner":{"account_id":5102113,"reputation":125,"user_id":4091435,"display_name":"Ankit Tomer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1548136480,"creation_date":1548136480,"answer_id":54302033,"question_id":46894118,"body_markdown":"`FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder()\r\n               .setPersistenceEnabled(false)\r\n               .build();\r\ndbEventHome.setFirestoreSettings(settings);`\r\n\r\nBy setting this it is fetching from server always.","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p><code>FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder()\n               .setPersistenceEnabled(false)\n               .build();\ndbEventHome.setFirestoreSettings(settings);</code></p>\n\n<p>By setting this it is fetching from server always.</p>\n"},{"tags":[],"owner":{"account_id":13654567,"reputation":111,"user_id":9851480,"display_name":"Abdulkerim Yıldırım"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654784899,"creation_date":1654784899,"answer_id":72562104,"question_id":46894118,"body_markdown":"In Kotlin;\r\n\r\n    val settings = FirebaseFirestoreSettings.Builder()\r\n                with(settings){\r\n                    isPersistenceEnabled = false\r\n    }\r\n    Firebase.firestore.firestoreSettings = settings.build()","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>In Kotlin;</p>\n<pre><code>val settings = FirebaseFirestoreSettings.Builder()\n            with(settings){\n                isPersistenceEnabled = false\n}\nFirebase.firestore.firestoreSettings = settings.build()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19445039,"reputation":171,"user_id":14222768,"display_name":"EL HIRCH BADREDDYN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667678444,"creation_date":1667678444,"answer_id":74331083,"question_id":46894118,"body_markdown":"&gt;In Kotlin:\r\n```kotlin\r\n        val db:FirebaseFirestore = Firebase.firestore\r\n        val settings = firestoreSettings {\r\n            isPersistenceEnabled = false\r\n        }\r\n        db.firestoreSettings = settings\r\n```","title":"Can&#39;t Disable Offline Data In Firestore","body":"<blockquote>\n<p>In Kotlin:</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>        val db:FirebaseFirestore = Firebase.firestore\n        val settings = firestoreSettings {\n            isPersistenceEnabled = false\n        }\n        db.firestoreSettings = settings\n</code></pre>\n"},{"tags":[],"owner":{"account_id":158396,"reputation":13965,"user_id":377011,"accept_rate":75,"display_name":"Jonas Sourlier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686852041,"creation_date":1686852041,"answer_id":76484367,"question_id":46894118,"body_markdown":"In the Javascript SDK, by using Firestore&#39;s `getDocFromServer` and `getDocsFromServer`, you prevent getting data from the cache.","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>In the Javascript SDK, by using Firestore's <code>getDocFromServer</code> and <code>getDocsFromServer</code>, you prevent getting data from the cache.</p>\n"}],"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11978,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":50169115,"answer_count":7,"score":22,"last_activity_date":1686852041,"creation_date":1508775861,"question_id":46894118,"body_markdown":"After deleting data from my `Firestore Database`, it takes my `Android` `app` some time to realize that the data was deleted, and I assume that it&#39;s happening due the auto data cache. My app has nothing to do with offline usage and I&#39;d like to disable this feature...\r\n\r\nI have added this in my custom `Application Class`:\r\n\r\n    import android.app.Application;\r\n    import com.google.firebase.firestore.FirebaseFirestore;\r\n    import com.google.firebase.firestore.FirebaseFirestoreSettings;\r\n    \r\n    public class ApplicationClass extends Application {\r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n    \r\n            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n            FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder()\r\n                    .setPersistenceEnabled(false)\r\n                    .build();\r\n            db.setFirestoreSettings(settings);\r\n        }\r\n    }\r\n\r\nThe problem occurs after turning off the internet connection and than turning it back on (*while the app is still running, in the background or not*)- the `Firestore module` seems to lose connection to the server, and it makes the opposite operation than the intended one - **instead of *stop* taking data from the cache, it takes data from the cache *only*.** \r\n\r\nFor example, debugging this code will always show that **`isFromCache` is `true`** and **`documentSnapshot` is empty** (even though that on the `server` side - it&#39;s not empty):\r\n\r\n    usersRef.document(loggedEmail).collection(&quot;challenges_received&quot;).get().addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;() {\r\n        @Override\r\n        public void onSuccess(QuerySnapshot documentSnapshots) {\r\n            boolean isFromCache=documentSnapshots.getMetadata().isFromCache();\r\n            if (!documentSnapshots.isEmpty()) {\r\n            }\r\n        }\r\n    });\r\n\r\n**Is this normal behavior?** \r\n\r\nIs there another way to disable the data cache in `Cloud Firestore`? \r\n\r\n_______\r\n\r\n***EDIT:***\r\n\r\nAdding: `FirebaseFirestore.setLoggingEnabled(flase);` (instead of the code above) in the custom `Application Class` gives the same result.\r\n","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>After deleting data from my <code>Firestore Database</code>, it takes my <code>Android</code> <code>app</code> some time to realize that the data was deleted, and I assume that it's happening due the auto data cache. My app has nothing to do with offline usage and I'd like to disable this feature...</p>\n\n<p>I have added this in my custom <code>Application Class</code>:</p>\n\n<pre><code>import android.app.Application;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.FirebaseFirestoreSettings;\n\npublic class ApplicationClass extends Application {\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n\n        FirebaseFirestore db=FirebaseFirestore.getInstance();\n        FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder()\n                .setPersistenceEnabled(false)\n                .build();\n        db.setFirestoreSettings(settings);\n    }\n}\n</code></pre>\n\n<p>The problem occurs after turning off the internet connection and than turning it back on (<em>while the app is still running, in the background or not</em>)- the <code>Firestore module</code> seems to lose connection to the server, and it makes the opposite operation than the intended one - <strong>instead of <em>stop</em> taking data from the cache, it takes data from the cache <em>only</em>.</strong> </p>\n\n<p>For example, debugging this code will always show that <strong><code>isFromCache</code> is <code>true</code></strong> and <strong><code>documentSnapshot</code> is empty</strong> (even though that on the <code>server</code> side - it's not empty):</p>\n\n<pre><code>usersRef.document(loggedEmail).collection(\"challenges_received\").get().addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;() {\n    @Override\n    public void onSuccess(QuerySnapshot documentSnapshots) {\n        boolean isFromCache=documentSnapshots.getMetadata().isFromCache();\n        if (!documentSnapshots.isEmpty()) {\n        }\n    }\n});\n</code></pre>\n\n<p><strong>Is this normal behavior?</strong> </p>\n\n<p>Is there another way to disable the data cache in <code>Cloud Firestore</code>? </p>\n\n<hr>\n\n<p><strong><em>EDIT:</em></strong></p>\n\n<p>Adding: <code>FirebaseFirestore.setLoggingEnabled(flase);</code> (instead of the code above) in the custom <code>Application Class</code> gives the same result.</p>\n"},{"tags":["java","spring","maven","dependencies","confluence"],"owner":{"account_id":1947788,"reputation":25,"user_id":1752541,"accept_rate":75,"display_name":"user1752541"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686851908,"creation_date":1686851908,"question_id":76484351,"body_markdown":"I&#39;m currently struggling with the following issue: I need to use an interface in my plugin (PLUGIN A) that comes from another plugin (PLUGIN B). I&#39;m also the developer on PLUGIN B so I can make code changes (if needed).\r\n\r\nWhat I&#39;ve done so far:\r\n\r\n1. I&#39;ve added the packaged jar from PLUGIN B to my local maven repository by using this command:\r\n\r\n```\r\nmvn install:install-file -Dfile=plugin-b.jar \\\r\n    -DgroupId=com.my.plugin.b -DartifactId=plugin-b \\\r\n    -Dversion=1.0.0 \\\r\n    -Dpackaging=jar \r\n```\r\n\r\n2. Afterwards I&#39;ve added it as a dependency to the POM of my PLUGIN A:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.my.plugin.b&lt;/groupId&gt;\r\n            &lt;artifactId&gt;plugin-b&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nThis is also working so far as the plugin builds and I&#39;m capable of doing an import of the interface:\r\n\r\n```\r\nimport com.my.plugin.b.interfaces.MyInterface;\r\n```\r\n\r\nI can also use it in the IDE (IntelliJ) with all the code completion features. I was still having some troubles with the plugin not being installed on the server (could not find requirements) but this could be sorted out by adding this to the POM of PLUGIN A (inside the &lt;Import-Package&gt; tags of the &quot;confluence-maven-plugin&quot;:\r\n\r\n```\r\ncom.my.plugin.b.*;resolution:=&quot;optional&quot;,\r\n````\r\n\r\nBut when I&#39;m installing the now packaged version of PLUGIN A on my Confluence instance it gives me the following error in the logs when it comes to code execution:\r\n\r\n&gt;java.lang.NoClassDefFoundError: com/my/plugin/b/interfaces/MyInterface\r\n\r\n\r\nI&#39;ve no idea how I can fix this. I&#39;ve of course restarted the server and made a &quot;mvn clean package&quot; on the project.\r\n\r\nAlso I tried to use the scope &quot;compiled&quot; on the dependency pointing at PLUGIN B, but then the plugin doesn&#39;t do anything at all on the server and crashes with some spring related exceptions like:\r\n\r\n&gt;  getInstance Unable to create new reference LazyLoadedFilterReference{descriptor=com.my.plugin.b:rest-filter (null), filterConfig=com.atlassian.plugin.servlet.filter.PluginFilterConfig@82ha2js}\r\n\r\nProbably because it got problems with a lot of some other services/components that are coming out of PLUGIN B and are used in PLUGIN A by using spring scanner annotations. \r\n\r\nSo anybody got an idea of what to do, what to check or how I can solve this issue? \r\n\r\nSome more background information on the problem (explained without too much detail): In PLUGIN A the code is retrieving an object by a service that comes from a third party plugin (not in my responsibility, so no code access). In some cases the object returned by this service is an object of the type &quot;MyInterface&quot; because it is served by PLUGIN B. And I need to access this object and its method like defined in &quot;MyInterface&quot; for some calculations. I also tried creating an identical interface in PLUGIN A and cast it but all of this doesnt work.\r\n\r\nMaybe this information helps to find another solution for my problem.\r\n\r\nSo anybody got an idea of what to do, what to check or how I can solve this issue? \r\n\r\nThanks in advance!\r\n","title":"Using interface from another plugin (maven dependency) throws NoClassDefFoundError (Confluence Plugin)","body":"<p>I'm currently struggling with the following issue: I need to use an interface in my plugin (PLUGIN A) that comes from another plugin (PLUGIN B). I'm also the developer on PLUGIN B so I can make code changes (if needed).</p>\n<p>What I've done so far:</p>\n<ol>\n<li>I've added the packaged jar from PLUGIN B to my local maven repository by using this command:</li>\n</ol>\n<pre><code>mvn install:install-file -Dfile=plugin-b.jar \\\n    -DgroupId=com.my.plugin.b -DartifactId=plugin-b \\\n    -Dversion=1.0.0 \\\n    -Dpackaging=jar \n</code></pre>\n<ol start=\"2\">\n<li>Afterwards I've added it as a dependency to the POM of my PLUGIN A:</li>\n</ol>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.my.plugin.b&lt;/groupId&gt;\n            &lt;artifactId&gt;plugin-b&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>This is also working so far as the plugin builds and I'm capable of doing an import of the interface:</p>\n<pre><code>import com.my.plugin.b.interfaces.MyInterface;\n</code></pre>\n<p>I can also use it in the IDE (IntelliJ) with all the code completion features. I was still having some troubles with the plugin not being installed on the server (could not find requirements) but this could be sorted out by adding this to the POM of PLUGIN A (inside the  tags of the &quot;confluence-maven-plugin&quot;:</p>\n<pre><code>com.my.plugin.b.*;resolution:=&quot;optional&quot;,\n</code></pre>\n<p>But when I'm installing the now packaged version of PLUGIN A on my Confluence instance it gives me the following error in the logs when it comes to code execution:</p>\n<blockquote>\n<p>java.lang.NoClassDefFoundError: com/my/plugin/b/interfaces/MyInterface</p>\n</blockquote>\n<p>I've no idea how I can fix this. I've of course restarted the server and made a &quot;mvn clean package&quot; on the project.</p>\n<p>Also I tried to use the scope &quot;compiled&quot; on the dependency pointing at PLUGIN B, but then the plugin doesn't do anything at all on the server and crashes with some spring related exceptions like:</p>\n<blockquote>\n<p>getInstance Unable to create new reference LazyLoadedFilterReference{descriptor=com.my.plugin.b:rest-filter (null), filterConfig=com.atlassian.plugin.servlet.filter.PluginFilterConfig@82ha2js}</p>\n</blockquote>\n<p>Probably because it got problems with a lot of some other services/components that are coming out of PLUGIN B and are used in PLUGIN A by using spring scanner annotations.</p>\n<p>So anybody got an idea of what to do, what to check or how I can solve this issue?</p>\n<p>Some more background information on the problem (explained without too much detail): In PLUGIN A the code is retrieving an object by a service that comes from a third party plugin (not in my responsibility, so no code access). In some cases the object returned by this service is an object of the type &quot;MyInterface&quot; because it is served by PLUGIN B. And I need to access this object and its method like defined in &quot;MyInterface&quot; for some calculations. I also tried creating an identical interface in PLUGIN A and cast it but all of this doesnt work.</p>\n<p>Maybe this information helps to find another solution for my problem.</p>\n<p>So anybody got an idea of what to do, what to check or how I can solve this issue?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","tomcat","logging","single-sign-on","business-objects"],"comments":[{"owner":{"account_id":316385,"reputation":3253,"user_id":632537,"accept_rate":83,"display_name":"Isaac"},"score":0,"creation_date":1686923636,"post_id":76480943,"comment_id":134869369,"body_markdown":"You are going to get more engagement on this question [here](https://answers.sap.com/index.html) or [here](https://bobj-board.org/).","body":"You are going to get more engagement on this question <a href=\"https://answers.sap.com/index.html\" rel=\"nofollow noreferrer\">here</a> or <a href=\"https://bobj-board.org/\" rel=\"nofollow noreferrer\">here</a>."}],"owner":{"account_id":25975141,"reputation":1,"user_id":19689689,"display_name":"RACHID ABDELLAOUI"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686850533,"creation_date":1686820354,"question_id":76480943,"body_markdown":"Trying to set up SSO on SAP  BI 4.3 SP3 environment.\r\n\r\nThen get to the part where we have set up global.properties and entered the following lines in Tomcat settings:(java options)\r\n\r\n-`Djava.security.auth.login.config=c:\\windows\\bscLogin.conf`\r\n-`Djava.security.krb5.conf=c:\\windows\\krb5.ini`\r\n-`Djcsi.kerberos.debug=true`\r\n-`Dsun.security.krb5.debug=true`\r\n-`Djcsi.kerberos.maxpacketsize=0 `\r\n\r\nWhen we restart tomcat, stderr.log does not contain the message ‘Credentials Obtained’.\r\n\r\nAny idea what we could be doing wrong?\r\n\r\nThanks\r\n\r\nI checked all the files of configuration and they seem right","title":"The file stderr.log of SSO Tomcat not showing credentials obtained","body":"<p>Trying to set up SSO on SAP  BI 4.3 SP3 environment.</p>\n<p>Then get to the part where we have set up global.properties and entered the following lines in Tomcat settings:(java options)</p>\n<p>-<code>Djava.security.auth.login.config=c:\\windows\\bscLogin.conf</code>\n-<code>Djava.security.krb5.conf=c:\\windows\\krb5.ini</code>\n-<code>Djcsi.kerberos.debug=true</code>\n-<code>Dsun.security.krb5.debug=true</code>\n-<code>Djcsi.kerberos.maxpacketsize=0 </code></p>\n<p>When we restart tomcat, stderr.log does not contain the message ‘Credentials Obtained’.</p>\n<p>Any idea what we could be doing wrong?</p>\n<p>Thanks</p>\n<p>I checked all the files of configuration and they seem right</p>\n"},{"tags":["java","android","memory","memory-management","profiler"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1686865379,"post_id":76484177,"comment_id":134861032,"body_markdown":"Most likely the growing other memory part is caused by some code in one of the used native library. The memory profiler has problems to tag all memory allocated by those libraries correctly. Thus the native code most likely has a memory leak or you accumulate data in a structure you are not aware of.","body":"Most likely the growing other memory part is caused by some code in one of the used native library. The memory profiler has problems to tag all memory allocated by those libraries correctly. Thus the native code most likely has a memory leak or you accumulate data in a structure you are not aware of."},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1686912586,"post_id":76484177,"comment_id":134867042,"body_markdown":"Is there anyway to find out what exactly is causing this? Could it be because of nested methods that garbage collectors does not clean?\nmethod1() calling inside at a certain point method2(), method 2 calling inside at a certain point method3() and so on...","body":"Is there anyway to find out what exactly is causing this? Could it be because of nested methods that garbage collectors does not clean? method1() calling inside at a certain point method2(), method 2 calling inside at a certain point method3() and so on..."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1686913807,"post_id":76484177,"comment_id":134867270,"body_markdown":"Garbage collector only works on Java/Kotlin objects and data. On native level (.so files) there is no garbage collector, thus you have to manually everything you have allocated. If you forget something you have a memory leak.","body":"Garbage collector only works on Java/Kotlin objects and data. On native level (.so files) there is no garbage collector, thus you have to manually everything you have allocated. If you forget something you have a memory leak."},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1686915013,"post_id":76484177,"comment_id":134867497,"body_markdown":"But I didn&#39;t write native code (C++) myself. I am using openCV that is in C++. Anyway, if that was the case then why I don&#39;t get memory leaks by calling in a loop a few Tesseract and openCV methods?","body":"But I didn&#39;t write native code (C++) myself. I am using openCV that is in C++. Anyway, if that was the case then why I don&#39;t get memory leaks by calling in a loop a few Tesseract and openCV methods?"},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1686915056,"post_id":76484177,"comment_id":134867503,"body_markdown":"My only doubt at the moment would be the nested methods. Otherwise I have no clue what the issue could be and no idea how to find out.","body":"My only doubt at the moment would be the nested methods. Otherwise I have no clue what the issue could be and no idea how to find out."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1686915395,"post_id":76484177,"comment_id":134867560,"body_markdown":"Based on what you have posted this question can not be answered. May be you use multiple threads and that causes the memory somewhere else, or you create a List or Map where you accidentally add data again and again. I would use you original app and then disable step by step smaller code parts until the memory grow is eliminated.","body":"Based on what you have posted this question can not be answered. May be you use multiple threads and that causes the memory somewhere else, or you create a List or Map where you accidentally add data again and again. I would use you original app and then disable step by step smaller code parts until the memory grow is eliminated."},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1686917372,"post_id":76484177,"comment_id":134867963,"body_markdown":"I just realised you are right. The native code counter after a while gets very low and tagged as &quot;Others&quot;.","body":"I just realised you are right. The native code counter after a while gets very low and tagged as &quot;Others&quot;."}],"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686850362,"creation_date":1686850362,"question_id":76484177,"body_markdown":"I wrote a simple app that does three simple things: matches regex, perform OCR and use openCV to preprocess the image for a better OCR result.\r\nFor preprocessing the image I am using openCV.\r\nFor the OCR I am using Tesseract.\r\nI&#39;ve noticed that my app gets killed by the OS after 20 minutes or so, so I&#39;ve tried to launch the Android Profiler and monitor my app activity. \r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4]\r\n\r\nAs you can see there is huge memory consumption tagged as &quot;Others&quot; that never goes down. As you can see there is also a relevant consumption tagged as &quot;Native&quot; but that fortunately goes up and down, I guess it depends mainly on when methods of openCV are called.\r\n\r\nI have tried the following code:\r\n\r\n    while(true){\r\n    Bitmap preprocessedImage = OpenCV.preprocessImageForOCR(imageName);\r\n    MyTesseract myTesseract = new MyTesseract(preprocessedImage);\r\n    myTesseract.getText();\r\n    }\r\n\r\nand, weirdly enough, the memory consumption is around 200-220 MB (mostly the &quot;Native&quot; code). So, I really don&#39;t understand what is happening.\r\n\r\n  [1]: https://i.stack.imgur.com/ph4of.png\r\n  [2]: https://i.stack.imgur.com/PWlR3.png\r\n  [3]: https://i.stack.imgur.com/OFSXG.png\r\n  [4]: https://i.stack.imgur.com/sodsh.png","title":"Android Profiler: huge memory consumption, tagged as &quot;Others&quot;, that doesn&#39;t get garbage collected","body":"<p>I wrote a simple app that does three simple things: matches regex, perform OCR and use openCV to preprocess the image for a better OCR result.\nFor preprocessing the image I am using openCV.\nFor the OCR I am using Tesseract.\nI've noticed that my app gets killed by the OS after 20 minutes or so, so I've tried to launch the Android Profiler and monitor my app activity.</p>\n<p><a href=\"https://i.stack.imgur.com/ph4of.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ph4of.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/PWlR3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PWlR3.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/OFSXG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OFSXG.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/sodsh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sodsh.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see there is huge memory consumption tagged as &quot;Others&quot; that never goes down. As you can see there is also a relevant consumption tagged as &quot;Native&quot; but that fortunately goes up and down, I guess it depends mainly on when methods of openCV are called.</p>\n<p>I have tried the following code:</p>\n<pre><code>while(true){\nBitmap preprocessedImage = OpenCV.preprocessImageForOCR(imageName);\nMyTesseract myTesseract = new MyTesseract(preprocessedImage);\nmyTesseract.getText();\n}\n</code></pre>\n<p>and, weirdly enough, the memory consumption is around 200-220 MB (mostly the &quot;Native&quot; code). So, I really don't understand what is happening.</p>\n"},{"tags":["java","java-bytecode-asm"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1579077497,"post_id":59740678,"comment_id":105642232,"body_markdown":"What do you mean with “which isn&#39;t defined classwide”?","body":"What do you mean with “which isn&#39;t defined classwide”?"},{"owner":{"account_id":16521301,"reputation":13,"user_id":11937394,"display_name":"EinWildesPanda"},"score":0,"creation_date":1579087522,"post_id":59740678,"comment_id":105647303,"body_markdown":"The source class (where this code snippet would be) doesn&#39;t extend any superclass, or not the superclass which would contain this method.","body":"The source class (where this code snippet would be) doesn&#39;t extend any superclass, or not the superclass which would contain this method."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1579112693,"post_id":59740678,"comment_id":105660839,"body_markdown":"ASM processes bytecode, not source code. Your source code snippet compiles to two different class files. The class file for the outer class does not have any relationship to the `onPacketReceiving` and hence, no information about it. The inner class does extend or implement `PacketAdapter` and contains an explicit declaration for the `onPacketReceiving` method. When you want to know whether `PacketAdapter` contains a declaration of `onPacketReceiving`, you have to check the class file for `PacketAdapter`.","body":"ASM processes bytecode, not source code. Your source code snippet compiles to two different class files. The class file for the outer class does not have any relationship to the <code>onPacketReceiving</code> and hence, no information about it. The inner class does extend or implement <code>PacketAdapter</code> and contains an explicit declaration for the <code>onPacketReceiving</code> method. When you want to know whether <code>PacketAdapter</code> contains a declaration of <code>onPacketReceiving</code>, you have to check the class file for <code>PacketAdapter</code>."},{"owner":{"account_id":16521301,"reputation":13,"user_id":11937394,"display_name":"EinWildesPanda"},"score":0,"creation_date":1579113756,"post_id":59740678,"comment_id":105661352,"body_markdown":"Thanks! That&#39;s the clue I needed!","body":"Thanks! That&#39;s the clue I needed!"}],"owner":{"account_id":16521301,"reputation":13,"user_id":11937394,"display_name":"EinWildesPanda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686849995,"creation_date":1579030838,"question_id":59740678,"body_markdown":"I have this code in a class I&#39;m reading with ASM:\r\n\r\n        ProtocolLibrary.getProtocolManager().addPacketListener((PacketListener)new PacketAdapter(instance, new PacketType[] { PacketType.Handshake.Client.SET_PROTOCOL }) {\r\n            public void onPacketReceiving(final PacketEvent event) {\r\n                // some code here\r\n            }\r\n        });\r\n\r\n And my question is: Is it possible to check if a method, like &quot;onPacketReceiving&quot;, is inherited from a superclass, which isn&#39;t defined classwide? (The code above is just an example, so the code should be flexible) I tried iterating through MethodInsnNodes and LocalVariableNodes and didn&#39;t find anything, that could help me.\r\n","title":"ASM -&gt; Checking if method is from abstract class","body":"<p>I have this code in a class I'm reading with ASM:</p>\n<pre><code>    ProtocolLibrary.getProtocolManager().addPacketListener((PacketListener)new PacketAdapter(instance, new PacketType[] { PacketType.Handshake.Client.SET_PROTOCOL }) {\n        public void onPacketReceiving(final PacketEvent event) {\n            // some code here\n        }\n    });\n</code></pre>\n<p>And my question is: Is it possible to check if a method, like &quot;onPacketReceiving&quot;, is inherited from a superclass, which isn't defined classwide? (The code above is just an example, so the code should be flexible) I tried iterating through MethodInsnNodes and LocalVariableNodes and didn't find anything, that could help me.</p>\n"},{"tags":["java","multithreading","exception","instance","program-entry-point"],"owner":{"account_id":18424937,"reputation":1,"user_id":13421496,"display_name":"Lucas Silva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686849812,"creation_date":1686849812,"question_id":76484113,"body_markdown":"Na hora de executar o programa feito a selenium ele aparace a excess&#227;o Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\r\nException in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.&lt;clinit&gt;(SSLConnectionSocketFactory.java:144)\r\n\tat org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:71)\r\n\tat org.openqa.selenium.remote.internal.HttpClientFactory.&lt;init&gt;(HttpClientFactory.java:57)\r\n\tat org.openqa.selenium.remote.internal.HttpClientFactory.&lt;init&gt;(HttpClientFactory.java:60)\r\n\tat org.openqa.selenium.remote.internal.ApacheHttpClient$Factory.getDefaultHttpClientFactory(ApacheHttpClient.java:251)\r\n\tat org.openqa.selenium.remote.internal.ApacheHttpClient$Factory.&lt;init&gt;(ApacheHttpClient.java:228)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.getDefaultClientFactory(HttpCommandExecutor.java:89)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.&lt;init&gt;(HttpCommandExecutor.java:63)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.&lt;init&gt;(HttpCommandExecutor.java:58)\r\n\tat org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:95)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:275)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:116)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:220)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:215)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:211)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:124)\r\n\tat br.gov.pa.tj.selenium.LancarNavegador.main(LancarNavegador.java:13)\r\n\r\n\r\nEu espero corrigir o erro e que o programa rode","title":"Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE selenium java","body":"<p>Na hora de executar o programa feito a selenium ele aparace a excessão Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\nException in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\nat org.apache.http.conn.ssl.SSLConnectionSocketFactory.(SSLConnectionSocketFactory.java:144)\nat org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:71)\nat org.openqa.selenium.remote.internal.HttpClientFactory.(HttpClientFactory.java:57)\nat org.openqa.selenium.remote.internal.HttpClientFactory.(HttpClientFactory.java:60)\nat org.openqa.selenium.remote.internal.ApacheHttpClient$Factory.getDefaultHttpClientFactory(ApacheHttpClient.java:251)\nat org.openqa.selenium.remote.internal.ApacheHttpClient$Factory.(ApacheHttpClient.java:228)\nat org.openqa.selenium.remote.HttpCommandExecutor.getDefaultClientFactory(HttpCommandExecutor.java:89)\nat org.openqa.selenium.remote.HttpCommandExecutor.(HttpCommandExecutor.java:63)\nat org.openqa.selenium.remote.HttpCommandExecutor.(HttpCommandExecutor.java:58)\nat org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:95)\nat org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:275)\nat org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:116)\nat org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:220)\nat org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:215)\nat org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:211)\nat org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:124)\nat br.gov.pa.tj.selenium.LancarNavegador.main(LancarNavegador.java:13)</p>\n<p>Eu espero corrigir o erro e que o programa rode</p>\n"},{"tags":["java","kotlin"],"owner":{"account_id":28828702,"reputation":1,"user_id":22079677,"display_name":"JohnDTA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686849517,"creation_date":1686849517,"question_id":76484079,"body_markdown":"I&#39;m trying to create a feedback form with android studio I&#39;m quite a beginner but with android studio to make the simple form look it&#39;s not that hard what I need now is to send a &#39;feedback form&#39; to my telegram bot so when a user sends feedback to us, it should be sent to my telegrambot\r\n\r\n**values.xml**\r\n\r\n```\r\n&lt;string name=&quot;feedback&quot;&gt;&lt;/string&gt;\r\n```\r\n\r\ni search on internet very deep got this code\r\n\r\n```\r\nvar urlString = &quot;https://api.telegram.org/bot%s/sendMessage?chat_id=%s&amp;text=%s&quot;\r\nval apiToken = &quot;my_bot_api_token&quot;\r\nval chatId = &quot;@my_channel_name&quot;\r\nval text = &quot;Hello world!&quot;\r\nurlString = String.format(urlString, apiToken, chatId, text)\r\nval url = URL(urlString)\r\nval conn = url.openConnection()\r\nval inputStream = BufferedInputStream(conn.getInputStream())\r\nval br = BufferedReader(InputStreamReader(inputStream))\r\nval response = br.readText()\r\n// Do what you want with response\r\n```\r\n\r\nBut since I&#39;m a newbie in java/kotlin I can&#39;t figure out what functions to change\r\n\r\nAny help would be great","title":"How to send &quot;feedback&quot; to telegrambot using JAVA/Kotlin","body":"<p>I'm trying to create a feedback form with android studio I'm quite a beginner but with android studio to make the simple form look it's not that hard what I need now is to send a 'feedback form' to my telegram bot so when a user sends feedback to us, it should be sent to my telegrambot</p>\n<p><strong>values.xml</strong></p>\n<pre><code>&lt;string name=&quot;feedback&quot;&gt;&lt;/string&gt;\n</code></pre>\n<p>i search on internet very deep got this code</p>\n<pre><code>var urlString = &quot;https://api.telegram.org/bot%s/sendMessage?chat_id=%s&amp;text=%s&quot;\nval apiToken = &quot;my_bot_api_token&quot;\nval chatId = &quot;@my_channel_name&quot;\nval text = &quot;Hello world!&quot;\nurlString = String.format(urlString, apiToken, chatId, text)\nval url = URL(urlString)\nval conn = url.openConnection()\nval inputStream = BufferedInputStream(conn.getInputStream())\nval br = BufferedReader(InputStreamReader(inputStream))\nval response = br.readText()\n// Do what you want with response\n</code></pre>\n<p>But since I'm a newbie in java/kotlin I can't figure out what functions to change</p>\n<p>Any help would be great</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":28679067,"reputation":23,"user_id":21960620,"display_name":"solanke57"},"score":0,"creation_date":1686851799,"post_id":76484037,"comment_id":134858588,"body_markdown":"&quot;I changed @WebMvcTest(JobOfferController.class) to\n@WebMvcTest @Import(JobOfferController.class)\nand it works. Could someone explain why this is the case?&quot;","body":"&quot;I changed @WebMvcTest(JobOfferController.class) to @WebMvcTest @Import(JobOfferController.class) and it works. Could someone explain why this is the case?&quot;"}],"owner":{"account_id":28679067,"reputation":23,"user_id":21960620,"display_name":"solanke57"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686849204,"creation_date":1686849204,"question_id":76484037,"body_markdown":"I have configured Spring Security, and when I try to test the controller, it doesn&#39;t work because, for example, when testing the POST method, it returns a 404 error code (not even 403 or 401).\r\n\r\nSecurityConfig.class\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    private final JpaUserDetailsService jpaUserDetailsService;\r\n\r\n    @Bean\r\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .requestMatchers(&quot;/register&quot;).permitAll()\r\n                        .requestMatchers(HttpMethod.GET,&quot;/offers/**&quot;, &quot;/companies/**&quot;).permitAll()\r\n                        .anyRequest().authenticated())\r\n                .userDetailsService(jpaUserDetailsService)\r\n                .formLogin(Customizer.withDefaults())\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\nJpaUserDetailsService.class\r\n\r\n\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class JpaUserDetailsService implements UserDetailsService {\r\n\r\n    private final AppUserRepository appUserRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        return appUserRepository.findByUsername(username)\r\n                .map(SecurityAppUser::new)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found: &quot; + username));\r\n    }\r\n}\r\n```\r\n\r\nJobOfferController.class\r\n```\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class JobOfferController {\r\n\r\n    public static final String OFFER_PATH = &quot;/offers&quot;;\r\n    public static final String OFFER_PATH_ID = OFFER_PATH + &quot;/{offerId}&quot;;\r\n\r\n    private final JobOfferService jobOfferService;\r\n\r\n    @PostMapping(OFFER_PATH)\r\n    public ResponseEntity&lt;Void&gt; createOffer(@RequestBody JobOfferDto offerDto) {\r\n\r\n        JobOfferDto savedOffer = jobOfferService.saveNewOffer(offerDto);\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.add(&quot;Location&quot;, OFFER_PATH + &quot;/&quot; + savedOffer.getId().toString());\r\n\r\n        return new ResponseEntity&lt;&gt;(headers, HttpStatus.CREATED);\r\n    }\r\n```\r\n\r\nJobOfferControllerTest\r\n\r\n```\r\n@WebMvcTest(JobOfferController.class)\r\n@ContextConfiguration(classes = SecurityConfig.class)\r\nclass JobOfferControllerTest {\r\n\r\n    @MockBean\r\n    private JobOfferService jobOfferService;\r\n\r\n    private MockMvc mockMvc;\r\n\r\n    @Autowired\r\n    private WebApplicationContext context;\r\n\r\n    @MockBean\r\n    private JpaUserDetailsService jpaUserDetailsService;\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        mockMvc = MockMvcBuilders\r\n                .webAppContextSetup(context)\r\n                .apply(springSecurity())\r\n                .build();\r\n    }\r\n\r\n    @Test\r\n    void shouldCreateOffer() throws Exception {\r\n        JobOfferDto offerDto = createTestOffer(null, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;);\r\n        JobOfferDto savedDto = offerDto;\r\n        savedDto.setId(1L);\r\n\r\n        given(jobOfferService.saveNewOffer(any(JobOfferDto.class))).willReturn(savedDto);\r\n\r\n        mockMvc.perform(post(JobOfferController.OFFER_PATH)\r\n                        .with(user(&quot;user&quot;).password(&quot;password&quot;))\r\n                        .with(csrf())\r\n                .accept(MediaType.APPLICATION_JSON)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .content(objectMapper.writeValueAsString(offerDto)))\r\n                .andExpect(status().isCreated())\r\n                .andExpect(header().exists(&quot;Location&quot;));\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI tried to exclude security from this test, but I want to have it. This test method returns 404 not found and I have no idea why. \r\n\r\njava.lang.AssertionError: Status expected:&lt;201&gt; but was:&lt;404&gt;\r\nExpected :201\r\nActual   :404","title":"Spring Boot controller unit test is not working with security. When POST, returning 404 not found","body":"<p>I have configured Spring Security, and when I try to test the controller, it doesn't work because, for example, when testing the POST method, it returns a 404 error code (not even 403 or 401).</p>\n<p>SecurityConfig.class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final JpaUserDetailsService jpaUserDetailsService;\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(authorize -&gt; authorize\n                        .requestMatchers(&quot;/register&quot;).permitAll()\n                        .requestMatchers(HttpMethod.GET,&quot;/offers/**&quot;, &quot;/companies/**&quot;).permitAll()\n                        .anyRequest().authenticated())\n                .userDetailsService(jpaUserDetailsService)\n                .formLogin(Customizer.withDefaults())\n                .build();\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>JpaUserDetailsService.class</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class JpaUserDetailsService implements UserDetailsService {\n\n    private final AppUserRepository appUserRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        return appUserRepository.findByUsername(username)\n                .map(SecurityAppUser::new)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found: &quot; + username));\n    }\n}\n</code></pre>\n<p>JobOfferController.class</p>\n<pre><code>@RestController\n@RequiredArgsConstructor\npublic class JobOfferController {\n\n    public static final String OFFER_PATH = &quot;/offers&quot;;\n    public static final String OFFER_PATH_ID = OFFER_PATH + &quot;/{offerId}&quot;;\n\n    private final JobOfferService jobOfferService;\n\n    @PostMapping(OFFER_PATH)\n    public ResponseEntity&lt;Void&gt; createOffer(@RequestBody JobOfferDto offerDto) {\n\n        JobOfferDto savedOffer = jobOfferService.saveNewOffer(offerDto);\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.add(&quot;Location&quot;, OFFER_PATH + &quot;/&quot; + savedOffer.getId().toString());\n\n        return new ResponseEntity&lt;&gt;(headers, HttpStatus.CREATED);\n    }\n</code></pre>\n<p>JobOfferControllerTest</p>\n<pre><code>@WebMvcTest(JobOfferController.class)\n@ContextConfiguration(classes = SecurityConfig.class)\nclass JobOfferControllerTest {\n\n    @MockBean\n    private JobOfferService jobOfferService;\n\n    private MockMvc mockMvc;\n\n    @Autowired\n    private WebApplicationContext context;\n\n    @MockBean\n    private JpaUserDetailsService jpaUserDetailsService;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @BeforeEach\n    void setUp() {\n        mockMvc = MockMvcBuilders\n                .webAppContextSetup(context)\n                .apply(springSecurity())\n                .build();\n    }\n\n    @Test\n    void shouldCreateOffer() throws Exception {\n        JobOfferDto offerDto = createTestOffer(null, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;);\n        JobOfferDto savedDto = offerDto;\n        savedDto.setId(1L);\n\n        given(jobOfferService.saveNewOffer(any(JobOfferDto.class))).willReturn(savedDto);\n\n        mockMvc.perform(post(JobOfferController.OFFER_PATH)\n                        .with(user(&quot;user&quot;).password(&quot;password&quot;))\n                        .with(csrf())\n                .accept(MediaType.APPLICATION_JSON)\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(objectMapper.writeValueAsString(offerDto)))\n                .andExpect(status().isCreated())\n                .andExpect(header().exists(&quot;Location&quot;));\n    }\n</code></pre>\n<p>I tried to exclude security from this test, but I want to have it. This test method returns 404 not found and I have no idea why.</p>\n<p>java.lang.AssertionError: Status expected:&lt;201&gt; but was:&lt;404&gt;\nExpected :201\nActual   :404</p>\n"},{"tags":["java","spring","google-cloud-pubsub"],"answers":[{"tags":[],"owner":{"account_id":3151721,"reputation":377,"user_id":2665035,"accept_rate":67,"display_name":"killernerd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1615219253,"creation_date":1615219253,"answer_id":66533100,"question_id":66494681,"body_markdown":"Found the problem after creating a spring boot project from scratch (main project is normal spring). Noticed in the debug output that it was auto starting the service activator bean and some other things like actually subscribing to the channels which it wasn&#39;t doing in the main project.\r\n\r\nAfter a quick google the solution was simple, had to add\r\n\r\n    @EnableIntegration\r\n\r\nannotation at class level and the messages started coming in.","title":"pubsub messages not being pulled with poller and serviceactivator","body":"<p>Found the problem after creating a spring boot project from scratch (main project is normal spring). Noticed in the debug output that it was auto starting the service activator bean and some other things like actually subscribing to the channels which it wasn't doing in the main project.</p>\n<p>After a quick google the solution was simple, had to add</p>\n<pre><code>@EnableIntegration\n</code></pre>\n<p>annotation at class level and the messages started coming in.</p>\n"}],"owner":{"account_id":3151721,"reputation":377,"user_id":2665035,"accept_rate":67,"display_name":"killernerd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":496,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66533100,"answer_count":1,"score":0,"last_activity_date":1686848941,"creation_date":1614955847,"question_id":66494681,"body_markdown":"I&#39;ve been trying to get pubsub to work within a spring application. To get up and running I&#39;ve been reading through tutorials and documentation like [this][1]\r\n\r\nI can get things to build and start but if I go through cloud console to send a message to the test subscription it never arrives.\r\n\r\nThis is what my code looks like right now:\r\n\r\n    @Configuration\r\n    @Import({GcpPubSubAutoConfiguration.class})\r\n    public class PubSubConfigurator {\r\n\r\n    @Bean\r\n    public GcpProjectIdProvider projectIdProvider(){\r\n        return () -&gt; &quot;project-id&quot;;\r\n    }\r\n\r\n    @Bean\r\n    public CredentialsProvider credentialsProvider(){\r\n        return GoogleCredentials::getApplicationDefault;\r\n    }\r\n\r\n    @Bean\r\n    public MessageChannel inputMessageChannel() {\r\n       return new PublishSubscribeChannel();\r\n    }\r\n\r\n    @Bean\r\n    @InboundChannelAdapter(channel = &quot;inputMessageChannel&quot;, poller = @Poller(fixedDelay = &quot;5&quot;))\r\n    public MessageSource&lt;Object&gt; pubsubAdapter(PubSubTemplate pubSubTemplate) {\r\n        PubSubMessageSource messageSource = new PubSubMessageSource(pubSubTemplate,  &quot;tst-sandbox&quot;);\r\n        messageSource.setAckMode(AckMode.MANUAL);\r\n        messageSource.setPayloadType(String.class);\r\n        messageSource.setBlockOnPull(false);\r\n        messageSource.setMaxFetchSize(10);\r\n        //pubSubTemplate.pull(&quot;tst-sandbox&quot;, 10, true);\r\n        return messageSource;\r\n    }\r\n\r\n    // Define what happens to the messages arriving in the message channel.\r\n    @ServiceActivator(inputChannel = &quot;inputMessageChannel&quot;)\r\n    public void messageReceiver(\r\n            String payload,\r\n            @Header(GcpPubSubHeaders.ORIGINAL_MESSAGE) BasicAcknowledgeablePubsubMessage message) {\r\n        System.out.println(&quot;Message arrived via an inbound channel adapter from sub-one! Payload: &quot; + payload);\r\n        message.ack();\r\n    }\r\n    }\r\n\r\nMy thinking was that the poller annotation would start a poller to run every so often to check for messages and send them to the method annotated with service activator but this is clearly not the case as it is never hit.\r\n\r\nInterestingly enough if I put a breakpoint right before &quot;return messageSource&quot; and check the result of the template.pull call the messages ARE returned so it is seemingly not an issue with the connection itself.\r\n\r\nWhat am I missing here? Tutorials and documentation aren&#39;t helping much at this point as they all use pretty much the same bit of tutorial code like above...\r\n\r\nI have tried variations of the above code like creating the adapter instead of the messagesource like so:\r\n\r\n    @Bean\r\n    public PubSubInboundChannelAdapter inboundChannelAdapter(\r\n            @Qualifier(&quot;inputMessageChannel&quot;) MessageChannel messageChannel,\r\n            PubSubTemplate pubSubTemplate) {\r\n        PubSubInboundChannelAdapter adapter =\r\n                new PubSubInboundChannelAdapter(pubSubTemplate, &quot;tst-sandbox&quot;);\r\n        adapter.setOutputChannel(messageChannel);\r\n        adapter.setAckMode(AckMode.MANUAL);\r\n        adapter.setPayloadType(String.class);\r\n        return adapter;\r\n    }\r\n\r\nto no avail. Any suggestions are welcome.\r\n\r\n\r\n  [1]: https://cloud.spring.io/spring-cloud-gcp/multi/multi__spring_integration.html","title":"pubsub messages not being pulled with poller and serviceactivator","body":"<p>I've been trying to get pubsub to work within a spring application. To get up and running I've been reading through tutorials and documentation like <a href=\"https://cloud.spring.io/spring-cloud-gcp/multi/multi__spring_integration.html\" rel=\"nofollow noreferrer\">this</a></p>\n<p>I can get things to build and start but if I go through cloud console to send a message to the test subscription it never arrives.</p>\n<p>This is what my code looks like right now:</p>\n<pre><code>@Configuration\n@Import({GcpPubSubAutoConfiguration.class})\npublic class PubSubConfigurator {\n\n@Bean\npublic GcpProjectIdProvider projectIdProvider(){\n    return () -&gt; &quot;project-id&quot;;\n}\n\n@Bean\npublic CredentialsProvider credentialsProvider(){\n    return GoogleCredentials::getApplicationDefault;\n}\n\n@Bean\npublic MessageChannel inputMessageChannel() {\n   return new PublishSubscribeChannel();\n}\n\n@Bean\n@InboundChannelAdapter(channel = &quot;inputMessageChannel&quot;, poller = @Poller(fixedDelay = &quot;5&quot;))\npublic MessageSource&lt;Object&gt; pubsubAdapter(PubSubTemplate pubSubTemplate) {\n    PubSubMessageSource messageSource = new PubSubMessageSource(pubSubTemplate,  &quot;tst-sandbox&quot;);\n    messageSource.setAckMode(AckMode.MANUAL);\n    messageSource.setPayloadType(String.class);\n    messageSource.setBlockOnPull(false);\n    messageSource.setMaxFetchSize(10);\n    //pubSubTemplate.pull(&quot;tst-sandbox&quot;, 10, true);\n    return messageSource;\n}\n\n// Define what happens to the messages arriving in the message channel.\n@ServiceActivator(inputChannel = &quot;inputMessageChannel&quot;)\npublic void messageReceiver(\n        String payload,\n        @Header(GcpPubSubHeaders.ORIGINAL_MESSAGE) BasicAcknowledgeablePubsubMessage message) {\n    System.out.println(&quot;Message arrived via an inbound channel adapter from sub-one! Payload: &quot; + payload);\n    message.ack();\n}\n}\n</code></pre>\n<p>My thinking was that the poller annotation would start a poller to run every so often to check for messages and send them to the method annotated with service activator but this is clearly not the case as it is never hit.</p>\n<p>Interestingly enough if I put a breakpoint right before &quot;return messageSource&quot; and check the result of the template.pull call the messages ARE returned so it is seemingly not an issue with the connection itself.</p>\n<p>What am I missing here? Tutorials and documentation aren't helping much at this point as they all use pretty much the same bit of tutorial code like above...</p>\n<p>I have tried variations of the above code like creating the adapter instead of the messagesource like so:</p>\n<pre><code>@Bean\npublic PubSubInboundChannelAdapter inboundChannelAdapter(\n        @Qualifier(&quot;inputMessageChannel&quot;) MessageChannel messageChannel,\n        PubSubTemplate pubSubTemplate) {\n    PubSubInboundChannelAdapter adapter =\n            new PubSubInboundChannelAdapter(pubSubTemplate, &quot;tst-sandbox&quot;);\n    adapter.setOutputChannel(messageChannel);\n    adapter.setAckMode(AckMode.MANUAL);\n    adapter.setPayloadType(String.class);\n    return adapter;\n}\n</code></pre>\n<p>to no avail. Any suggestions are welcome.</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","spring-transactions"],"owner":{"account_id":422777,"reputation":841,"user_id":5328820,"display_name":"Burton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686848770,"creation_date":1686848770,"question_id":76483980,"body_markdown":"I have a email queue send job that runs every minute, but am running into `PessimisticLockException` issues sometimes when jobs overlap (i.e. a job takes more than 60 seconds to complete). I am able to reproduce this in a test, but I can&#39;t seem to solve the issue. The general logic is below. \r\n\r\nClearly, in my attempt to use Transaction `Propagation.REQUIRES_NEW` for saving entities &quot;immediately&quot; to the database, I am causing issues elsewhere, but I just can&#39;t seem to figure out the correct logic on this.\r\n\r\nIt&#39;s worth noting that if I &quot;detach&quot; each EmailQueue entity from inside the &quot;send email loop&quot;, then I avoid the `PessimisticLockException`. However when I do this, 3 emails are sent instead of 2 (the `emailQueueService.findQueued(onOrBefore)` correctly returns 1 email on the first job, but returns 2 emails on the overlapping job - erroneously returning the previous &quot;SENT&quot; email)\r\n\r\n\r\n```\r\nJAVA\r\npublic void sendQueuedEmails(Instant onOrBefore) {\r\n\r\n    // Fetches EmailQueue.State = &quot;QUEUED&quot; and EmailQueue.ScheduledSendDateTime &lt;= onOrBefore\r\n    // !! ISSUE :: On overlapping job, this also returns emails marked &quot;SENT&quot;\r\n    List&lt;EmailQueue&gt; emailQueueList = emailQueueService.findQueued(onOrBefore);\r\n\r\n    // Change EmailQueue.State = &quot;SENDING&quot; in separate @Transaction so they don&#39;t get picked up again by overlapping job\r\n    // Uses @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    emailQueueService.markEmailQueuesAsSending(emailQueueList);\r\n\r\n    // Send email loop\r\n    for (EmailQueue emailQueue : emailQueueList) {\r\n\r\n        // Send EmailQueue\r\n        // Changes EmailQueue.State = &quot;SENT&quot; (no database calls made in this method)\r\n        appUserEmailSender.send(emailQueue);\r\n\r\n        // Save EmailQueue\r\n        // Uses @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n        emailQueueService.saveAndCommit(emailQueue);\r\n\r\n        // !! ISSUE :: Without this statement a PessimisticLockException will be thrown when calling &quot;markEmailQueuesAsSending()&quot; on overlapping job\r\n        // emailQueueService.detach(emailQueue);\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd my test method looks like this:\r\n```\r\n@Test\r\nvoid sendQueuedEmails_overlapping_jobs() throws Exception {\r\n\r\n    // Load 2 Emails, 1 scheduled to be sent at 1am, 1 scheduled to be sent at 2am\r\n    helper.loadData(&quot;com/afs/core/service/email/EmailQueueSenderImplTest.xml&quot;, &quot;db/testData.dtd&quot;, DatabaseOperation.INSERT);\r\n\r\n    Instant scheduledSendDateTime_1 = // 1 am\r\n    Instant scheduledSendDateTime_2 = // 2 am\r\n\r\n    // half second delay each time myMailSenderMock.send() is called\r\n    doAnswer(AdditionalAnswers.answersWithDelay(500, invocation -&gt; null))\r\n            .when(myMailSenderMock).send();\r\n\r\n    // When calling overlapping sendQueuedEmails\r\n    emailQueueSender.sendQueuedEmails(scheduledSendDateTime_1);\r\n    emailQueueSender.sendQueuedEmails(scheduledSendDateTime_2);\r\n\r\n    // Then 2 emails should be sent successfully\r\n    Mockito.verify(myMailSenderMock, Mockito.times(2)).send();\r\n}\r\n```\r\n\r\nIn case this helps, my @Transactional methods are:\r\n```\r\n@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)\r\npublic void markEmailQueuesAsSending(List&lt;EmailQueue&gt; emailQueueList) {\r\n    for (EmailQueue emailQueue : emailQueueList) {\r\n        emailQueue.setEmailQueueState(EmailQueueState.SENDING);\r\n        this.save(emailQueue);\r\n    }\r\n    this.flush();\r\n}\r\n\r\n@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)\r\npublic void saveAndCommit(EmailQueue instance) {\r\n    save(instance);\r\n    this.flush();\r\n}\r\n```\r\n","title":"How to avoid PessimisticLockException for overlapping &quot;Email Queue Send&quot; jobs using Spring @Transactional","body":"<p>I have a email queue send job that runs every minute, but am running into <code>PessimisticLockException</code> issues sometimes when jobs overlap (i.e. a job takes more than 60 seconds to complete). I am able to reproduce this in a test, but I can't seem to solve the issue. The general logic is below.</p>\n<p>Clearly, in my attempt to use Transaction <code>Propagation.REQUIRES_NEW</code> for saving entities &quot;immediately&quot; to the database, I am causing issues elsewhere, but I just can't seem to figure out the correct logic on this.</p>\n<p>It's worth noting that if I &quot;detach&quot; each EmailQueue entity from inside the &quot;send email loop&quot;, then I avoid the <code>PessimisticLockException</code>. However when I do this, 3 emails are sent instead of 2 (the <code>emailQueueService.findQueued(onOrBefore)</code> correctly returns 1 email on the first job, but returns 2 emails on the overlapping job - erroneously returning the previous &quot;SENT&quot; email)</p>\n<pre><code>JAVA\npublic void sendQueuedEmails(Instant onOrBefore) {\n\n    // Fetches EmailQueue.State = &quot;QUEUED&quot; and EmailQueue.ScheduledSendDateTime &lt;= onOrBefore\n    // !! ISSUE :: On overlapping job, this also returns emails marked &quot;SENT&quot;\n    List&lt;EmailQueue&gt; emailQueueList = emailQueueService.findQueued(onOrBefore);\n\n    // Change EmailQueue.State = &quot;SENDING&quot; in separate @Transaction so they don't get picked up again by overlapping job\n    // Uses @Transactional(propagation = Propagation.REQUIRES_NEW)\n    emailQueueService.markEmailQueuesAsSending(emailQueueList);\n\n    // Send email loop\n    for (EmailQueue emailQueue : emailQueueList) {\n\n        // Send EmailQueue\n        // Changes EmailQueue.State = &quot;SENT&quot; (no database calls made in this method)\n        appUserEmailSender.send(emailQueue);\n\n        // Save EmailQueue\n        // Uses @Transactional(propagation = Propagation.REQUIRES_NEW)\n        emailQueueService.saveAndCommit(emailQueue);\n\n        // !! ISSUE :: Without this statement a PessimisticLockException will be thrown when calling &quot;markEmailQueuesAsSending()&quot; on overlapping job\n        // emailQueueService.detach(emailQueue);\n    }\n}\n\n</code></pre>\n<p>And my test method looks like this:</p>\n<pre><code>@Test\nvoid sendQueuedEmails_overlapping_jobs() throws Exception {\n\n    // Load 2 Emails, 1 scheduled to be sent at 1am, 1 scheduled to be sent at 2am\n    helper.loadData(&quot;com/afs/core/service/email/EmailQueueSenderImplTest.xml&quot;, &quot;db/testData.dtd&quot;, DatabaseOperation.INSERT);\n\n    Instant scheduledSendDateTime_1 = // 1 am\n    Instant scheduledSendDateTime_2 = // 2 am\n\n    // half second delay each time myMailSenderMock.send() is called\n    doAnswer(AdditionalAnswers.answersWithDelay(500, invocation -&gt; null))\n            .when(myMailSenderMock).send();\n\n    // When calling overlapping sendQueuedEmails\n    emailQueueSender.sendQueuedEmails(scheduledSendDateTime_1);\n    emailQueueSender.sendQueuedEmails(scheduledSendDateTime_2);\n\n    // Then 2 emails should be sent successfully\n    Mockito.verify(myMailSenderMock, Mockito.times(2)).send();\n}\n</code></pre>\n<p>In case this helps, my @Transactional methods are:</p>\n<pre><code>@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)\npublic void markEmailQueuesAsSending(List&lt;EmailQueue&gt; emailQueueList) {\n    for (EmailQueue emailQueue : emailQueueList) {\n        emailQueue.setEmailQueueState(EmailQueueState.SENDING);\n        this.save(emailQueue);\n    }\n    this.flush();\n}\n\n@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)\npublic void saveAndCommit(EmailQueue instance) {\n    save(instance);\n    this.flush();\n}\n</code></pre>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1686850785,"post_id":76483944,"comment_id":134858404,"body_markdown":"Maybe you could use JsonPath for that...","body":"Maybe you could use JsonPath for that..."},{"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"score":0,"creation_date":1686881961,"post_id":76483944,"comment_id":134862550,"body_markdown":"You may try [Josson](https://github.com/octomix/josson).  To look for the flattened keys of `x/y/yCol1`, use _Josson_ function `getNode` with this statement `map(x.map(y.map(yCol1))).flatten(&#39;/&#39;).keys().prepend(&#39;/&#39;)`.","body":"You may try <a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">Josson</a>.  To look for the flattened keys of <code>x&#47;y&#47;yCol1</code>, use <i>Josson</i> function <code>getNode</code> with this statement <code>map(x.map(y.map(yCol1))).flatten(&#39;&#47;&#39;).keys().prepend(&#39;&#47;&#39;)</code>."}],"owner":{"display_name":"user18292068"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686848571,"creation_date":1686848363,"question_id":76483944,"body_markdown":"I&#39;m using Java and Jaxson primarily.\r\n\r\nAssume a json structure such as\r\n\r\n    {\r\n        &quot;a&quot; : &quot;aVal&quot;,\r\n        &quot;b&quot; : &quot;bVal&quot;,\r\n        &quot;x&quot; : [{\r\n            &quot;xCol1&quot; :&quot;x1_1&quot;,\r\n            &quot;xCol2&quot; :&quot;x1_2&quot;,\r\n            &quot;y&quot; : [{\r\n                &quot;yCol1&quot; : &quot;x1_y1_1&quot;,\r\n                &quot;yCol2&quot; : &quot;x1_y1_2&quot;,\r\n            },{\r\n                &quot;yCol1&quot; : &quot;x1_y2_1&quot;,\r\n                &quot;yCol2&quot; : &quot;x1_y2_2&quot;\r\n            }]\r\n        },{\r\n            &quot;xCol1&quot; :&quot;x2_1&quot;,\r\n            &quot;xCol2&quot; :&quot;x2_2&quot;,\r\n            &quot;y&quot; : [{\r\n                &quot;yCol1&quot; : &quot;x2_y1_1&quot;,\r\n                &quot;yCol2&quot; : &quot;x2_y1_2&quot;,\r\n            },{\r\n                &quot;yCol1&quot; : &quot;x2_y2_1&quot;,\r\n                &quot;yCol2&quot; : &quot;x2_y2_2&quot;\r\n            }]\r\n        }]\r\n    }\r\n\r\nAlso assume a spec that tells us which node(s) to look for, say `x/y/yCol1`. Both width and depth of json can be greater than what is shown here: we don&#39;t know either the json or the specification beforehand: it must be processed dynamically.\r\n\r\nThe following works to do this recursively, but doesn&#39;t seem elegant...\r\n\r\n    public static void getPaths(String cp, String rp, JsonNode cj, List&lt;String&gt; rsp) {\r\n        if (rp.indexOf(&quot;/&quot;, 0) == 1 ) {\r\n            rsp.add(rp);\r\n        } else {\r\n            Integer ix = rp.indexOf(&quot;/&quot;, 1);\r\n            String ncp = cp;\r\n            String nrp = rp;\r\n            if (ix &gt; 0) {\r\n                ncp = rp.substring(0, ix);\r\n                nrp = rp.substring(ix);\r\n            } else {\r\n                ncp = rp;\r\n            }\r\n            JsonNode nn = cj.at(ncp);\r\n            if (nn.getNodeType() == JsonNodeType.ARRAY) {\r\n                Integer i = 0;\r\n                for (JsonNode j : ((ArrayNode)nn)) {\r\n                    getMatchingPaths(cp + ncp + &quot;/&quot; + i.toString(), nrp, j, rsp);\r\n                    i++;\r\n                }\r\n            } else if (nn.getNodeType() != JsonNodeType.MISSING) {\r\n                rsp.add(cp + rp);\r\n            }\r\n        }\r\n    }\r\n\r\nBasically:\r\n\r\n - `cp` is the current path so far (outside caller pass in empty string)\r\n - `rp` is the remaining path (outside caller pass in the whole path)\r\n - `cj` is the current Node (outside caller pass in root node)\r\n - `rsp` is\r\n   the results (outside caller pass in an empty list)\r\n\r\nSo for the given example, the caller would turn the json string into jsonNode, create rspList as an empty list of string, and call `getPaths(&quot;&quot;, &quot;/x/y/yCol1&quot;, jsonNode, rspList)`. The resulting response list is:\r\n\r\n    /x/0/y/0/yCol1\r\n    /x/0/y/1/yCol1\r\n    /x/1/y/0/yCol1\r\n    /x/1/y/1/yCol1\r\n\r\nThis is good enough for me to loop through, find each node using `at` and do whatever I want (such as derive new fields adjacent to the found fields). But I wonder if there are more elegant approaches using jaxson tricks or streaming tricks.","title":"Dynamically find all matching nodes from nested json arrays","body":"<p>I'm using Java and Jaxson primarily.</p>\n<p>Assume a json structure such as</p>\n<pre><code>{\n    &quot;a&quot; : &quot;aVal&quot;,\n    &quot;b&quot; : &quot;bVal&quot;,\n    &quot;x&quot; : [{\n        &quot;xCol1&quot; :&quot;x1_1&quot;,\n        &quot;xCol2&quot; :&quot;x1_2&quot;,\n        &quot;y&quot; : [{\n            &quot;yCol1&quot; : &quot;x1_y1_1&quot;,\n            &quot;yCol2&quot; : &quot;x1_y1_2&quot;,\n        },{\n            &quot;yCol1&quot; : &quot;x1_y2_1&quot;,\n            &quot;yCol2&quot; : &quot;x1_y2_2&quot;\n        }]\n    },{\n        &quot;xCol1&quot; :&quot;x2_1&quot;,\n        &quot;xCol2&quot; :&quot;x2_2&quot;,\n        &quot;y&quot; : [{\n            &quot;yCol1&quot; : &quot;x2_y1_1&quot;,\n            &quot;yCol2&quot; : &quot;x2_y1_2&quot;,\n        },{\n            &quot;yCol1&quot; : &quot;x2_y2_1&quot;,\n            &quot;yCol2&quot; : &quot;x2_y2_2&quot;\n        }]\n    }]\n}\n</code></pre>\n<p>Also assume a spec that tells us which node(s) to look for, say <code>x/y/yCol1</code>. Both width and depth of json can be greater than what is shown here: we don't know either the json or the specification beforehand: it must be processed dynamically.</p>\n<p>The following works to do this recursively, but doesn't seem elegant...</p>\n<pre><code>public static void getPaths(String cp, String rp, JsonNode cj, List&lt;String&gt; rsp) {\n    if (rp.indexOf(&quot;/&quot;, 0) == 1 ) {\n        rsp.add(rp);\n    } else {\n        Integer ix = rp.indexOf(&quot;/&quot;, 1);\n        String ncp = cp;\n        String nrp = rp;\n        if (ix &gt; 0) {\n            ncp = rp.substring(0, ix);\n            nrp = rp.substring(ix);\n        } else {\n            ncp = rp;\n        }\n        JsonNode nn = cj.at(ncp);\n        if (nn.getNodeType() == JsonNodeType.ARRAY) {\n            Integer i = 0;\n            for (JsonNode j : ((ArrayNode)nn)) {\n                getMatchingPaths(cp + ncp + &quot;/&quot; + i.toString(), nrp, j, rsp);\n                i++;\n            }\n        } else if (nn.getNodeType() != JsonNodeType.MISSING) {\n            rsp.add(cp + rp);\n        }\n    }\n}\n</code></pre>\n<p>Basically:</p>\n<ul>\n<li><code>cp</code> is the current path so far (outside caller pass in empty string)</li>\n<li><code>rp</code> is the remaining path (outside caller pass in the whole path)</li>\n<li><code>cj</code> is the current Node (outside caller pass in root node)</li>\n<li><code>rsp</code> is\nthe results (outside caller pass in an empty list)</li>\n</ul>\n<p>So for the given example, the caller would turn the json string into jsonNode, create rspList as an empty list of string, and call <code>getPaths(&quot;&quot;, &quot;/x/y/yCol1&quot;, jsonNode, rspList)</code>. The resulting response list is:</p>\n<pre><code>/x/0/y/0/yCol1\n/x/0/y/1/yCol1\n/x/1/y/0/yCol1\n/x/1/y/1/yCol1\n</code></pre>\n<p>This is good enough for me to loop through, find each node using <code>at</code> and do whatever I want (such as derive new fields adjacent to the found fields). But I wonder if there are more elegant approaches using jaxson tricks or streaming tricks.</p>\n"},{"tags":["windows","path","java","javaw"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1327508708,"post_id":9006127,"comment_id":11289035,"body_markdown":"Why do you need the location of the exe? Might you want to get the location of the jar instead?","body":"Why do you need the location of the exe? Might you want to get the location of the jar instead?"},{"owner":{"account_id":390715,"reputation":6107,"user_id":750965,"accept_rate":94,"display_name":"Johnydep"},"score":0,"creation_date":1327508921,"post_id":9006127,"comment_id":11289119,"body_markdown":"@Thomas, i need both. Location of jar can be found easily. I need to install my application as a windows service, and for that i need the abs path of default javaw.exe Actually it is there in Path but i am confused as it can show multiple entries of old and new versions, wondering how would i now which one is the default one?","body":"@Thomas, i need both. Location of jar can be found easily. I need to install my application as a windows service, and for that i need the abs path of default javaw.exe Actually it is there in Path but i am confused as it can show multiple entries of old and new versions, wondering how would i now which one is the default one?"}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1327509788,"creation_date":1327509036,"answer_id":9006281,"question_id":9006127,"body_markdown":"    String javaHome = System.getProperty(&quot;java.home&quot;);\r\n\r\n---\r\n\r\n&gt; Can you tell me either through pure Java ... on windows how is it possible to find out the location of javaw.exe?\r\n\r\n###E.G.\r\n\r\n    import java.io.File;\r\n    \r\n    class JavawLocation {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString javaHome = System.getProperty(&quot;java.home&quot;);\r\n    \t\tFile f = new File(javaHome);\r\n    \t\tf = new File(f, &quot;bin&quot;);\r\n    \t\tf = new File(f, &quot;javaw.exe&quot;);\r\n    \t\tSystem.out.println(f + &quot;    exists: &quot; + f.exists());\r\n    \t}\r\n    }\r\n\r\n###Output\r\n\r\n    C:\\Program Files (x86)\\Java\\jdk1.6.0_29\\jre\\bin\\javaw.exe    exists: true\r\n    Press any key to continue . . .\r\n\r\nAnd yes, I am confident that will work in a JRE.","title":"Find absolute java.exe path programmatically from java code","body":"<pre><code>String javaHome = System.getProperty(\"java.home\");\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Can you tell me either through pure Java ... on windows how is it possible to find out the location of javaw.exe?</p>\n</blockquote>\n\n<h3>E.G.</h3>\n\n<pre><code>import java.io.File;\n\nclass JavawLocation {\n\n    public static void main(String[] args) {\n        String javaHome = System.getProperty(\"java.home\");\n        File f = new File(javaHome);\n        f = new File(f, \"bin\");\n        f = new File(f, \"javaw.exe\");\n        System.out.println(f + \"    exists: \" + f.exists());\n    }\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>C:\\Program Files (x86)\\Java\\jdk1.6.0_29\\jre\\bin\\javaw.exe    exists: true\nPress any key to continue . . .\n</code></pre>\n\n<p>And yes, I am confident that will work in a JRE.</p>\n"},{"tags":[],"owner":{"account_id":3009343,"reputation":581,"user_id":2553175,"display_name":"Greg"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1457859855,"creation_date":1423595444,"answer_id":28439873,"question_id":9006127,"body_markdown":"On Windows, the java.library.path System Property begins with the path to the bin directory containing whichever java.exe was used to run your jar file.\r\n\r\nThis makes sense, because on Windows the first place any executable looks for DLL files is the directory containing the executable itself. So naturally, when the JVM runs, the first place it looks for DLLs is the directory containing java.exe.\r\n\r\nYou can acquire the path to java.exe as follows:\r\n\r\n    final String javaLibraryPath = System.getProperty(&quot;java.library.path&quot;);\r\n    final File javaExeFile = new File(\r\n      javaLibraryPath.substring(0, javaLibraryPath.indexOf(&#39;;&#39;)) + &quot;\\\\java.exe&quot;\r\n    );\r\n    final String javaExePath =\r\n      javaExeFile.exists() ? javaExeFile.getAbsolutePath() : &quot;java&quot;;\r\n\r\nThis code is Windows-specific - I hard-coded the path separator (;) and the file separator (\\). I also put in a fallback to just &quot;java&quot; in case the library path trick somehow doesn&#39;t work.\r\n\r\nI have tested this with Java 6 and 7 on Windows 7. I tried a 32-bit and 64-bit version of Java.","title":"Find absolute java.exe path programmatically from java code","body":"<p>On Windows, the java.library.path System Property begins with the path to the bin directory containing whichever java.exe was used to run your jar file.</p>\n\n<p>This makes sense, because on Windows the first place any executable looks for DLL files is the directory containing the executable itself. So naturally, when the JVM runs, the first place it looks for DLLs is the directory containing java.exe.</p>\n\n<p>You can acquire the path to java.exe as follows:</p>\n\n<pre><code>final String javaLibraryPath = System.getProperty(\"java.library.path\");\nfinal File javaExeFile = new File(\n  javaLibraryPath.substring(0, javaLibraryPath.indexOf(';')) + \"\\\\java.exe\"\n);\nfinal String javaExePath =\n  javaExeFile.exists() ? javaExeFile.getAbsolutePath() : \"java\";\n</code></pre>\n\n<p>This code is Windows-specific - I hard-coded the path separator (;) and the file separator (). I also put in a fallback to just \"java\" in case the library path trick somehow doesn't work.</p>\n\n<p>I have tested this with Java 6 and 7 on Windows 7. I tried a 32-bit and 64-bit version of Java.</p>\n"},{"tags":[],"owner":{"account_id":3225178,"reputation":1033,"user_id":2721809,"display_name":"Tim Angus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508513204,"creation_date":1508513204,"answer_id":46852384,"question_id":9006127,"body_markdown":"Here&#39;s a slightly more generalised solution that I came up with. Maybe useful:\r\n\r\n    private static String javaExe()\r\n    {\r\n        final String JAVA_HOME = System.getProperty(&quot;java.home&quot;);\r\n        final File BIN = new File(JAVA_HOME, &quot;bin&quot;);\r\n        File exe = new File(BIN, &quot;java&quot;);\r\n\r\n        if (!exe.exists())\r\n        {\r\n            // We might be on Windows, which needs an exe extension\r\n            exe = new File(BIN, &quot;java.exe&quot;);\r\n        }\r\n\r\n        if (exe.exists())\r\n        {\r\n            return exe.getAbsolutePath();\r\n        }\r\n\r\n        try\r\n        {\r\n            // Just try invoking java from the system path; this of course\r\n            // assumes &quot;java[.exe]&quot; is /actually/ Java\r\n            final String NAKED_JAVA = &quot;java&quot;;\r\n            new ProcessBuilder(NAKED_JAVA).start();\r\n\r\n            return NAKED_JAVA;\r\n        }\r\n        catch (IOException e)\r\n        {\r\n            return null;\r\n        }\r\n    }","title":"Find absolute java.exe path programmatically from java code","body":"<p>Here's a slightly more generalised solution that I came up with. Maybe useful:</p>\n\n<pre><code>private static String javaExe()\n{\n    final String JAVA_HOME = System.getProperty(\"java.home\");\n    final File BIN = new File(JAVA_HOME, \"bin\");\n    File exe = new File(BIN, \"java\");\n\n    if (!exe.exists())\n    {\n        // We might be on Windows, which needs an exe extension\n        exe = new File(BIN, \"java.exe\");\n    }\n\n    if (exe.exists())\n    {\n        return exe.getAbsolutePath();\n    }\n\n    try\n    {\n        // Just try invoking java from the system path; this of course\n        // assumes \"java[.exe]\" is /actually/ Java\n        final String NAKED_JAVA = \"java\";\n        new ProcessBuilder(NAKED_JAVA).start();\n\n        return NAKED_JAVA;\n    }\n    catch (IOException e)\n    {\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23738735,"reputation":1,"user_id":17757081,"display_name":"Ian The Dead"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652054829,"creation_date":1652054829,"answer_id":72165886,"question_id":9006127,"body_markdown":"an issue with using ```&quot;System.getProperty(&quot;java.home&quot;);&quot;```, is that it is not always the java exe that the jar is running on, if you want to get that, you can use ```&quot;System.getProperty(&quot;sun.boot.library.path&quot;);&quot;```, from there you can find &quot;java&quot;, &quot;java.exe&quot;, &quot;javaw&quot;, or &quot;javaw.exe&quot;... However there is still an issue with this, java will run just fine if the executable has been renamed, and the actual java executable&#39;s structure changes from different JRE&#39;s/JDKS&#39;s, so there is not much way to find the java exe if it has been renamed. unless someone else has a method ofc, in which case, can you share? :)\r\n\r\n(Also, I have seen some people suggest using the first index of ```System.getProperty(&quot;java.library.path&quot;);```, note, this might not work if the user/launcher has manually set the library path, something which is not too uncommon)","title":"Find absolute java.exe path programmatically from java code","body":"<p>an issue with using <code>&quot;System.getProperty(&quot;java.home&quot;);&quot;</code>, is that it is not always the java exe that the jar is running on, if you want to get that, you can use <code>&quot;System.getProperty(&quot;sun.boot.library.path&quot;);&quot;</code>, from there you can find &quot;java&quot;, &quot;java.exe&quot;, &quot;javaw&quot;, or &quot;javaw.exe&quot;... However there is still an issue with this, java will run just fine if the executable has been renamed, and the actual java executable's structure changes from different JRE's/JDKS's, so there is not much way to find the java exe if it has been renamed. unless someone else has a method ofc, in which case, can you share? :)</p>\n<p>(Also, I have seen some people suggest using the first index of <code>System.getProperty(&quot;java.library.path&quot;);</code>, note, this might not work if the user/launcher has manually set the library path, something which is not too uncommon)</p>\n"},{"tags":[],"owner":{"account_id":6912215,"reputation":467,"user_id":5307634,"display_name":"MbPCM"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655670374,"creation_date":1655670374,"answer_id":72680130,"question_id":9006127,"body_markdown":"Compilation of All above methods\r\n\r\n    static String getJavaPath(){\r\n    \r\n            String tmp1 = System.getProperty(&quot;java.home&quot;) + &quot;\\\\bin\\\\java.exe&quot;;\r\n            String tmp2 = System.getProperty(&quot;sun.boot.library.path&quot;) + &quot;\\\\java.exe&quot;;\r\n            String tmp3 = System.getProperty(&quot;java.library.path&quot;)+ &quot;\\\\java.exe&quot;;\r\n            if(new File(tmp1).exists()) {\r\n                return tmp1;\r\n            }else if(new File(tmp2).exists()){\r\n                return tmp2;\r\n            }else if(new File(tmp3).exists()) {\r\n                return tmp3;\r\n            }else{\r\n                String[] paths = System.getenv(&quot;PATH&quot;).split(&quot;;&quot;);\r\n                for(String path:paths){\r\n                    if(new File(path + &quot;\\\\java.exe&quot;).exists()){\r\n                        return path + &quot;\\\\java.exe&quot;;\r\n                    }\r\n                }\r\n            }\r\n            return &quot;&quot;;\r\n        }","title":"Find absolute java.exe path programmatically from java code","body":"<p>Compilation of All above methods</p>\n<pre><code>static String getJavaPath(){\n\n        String tmp1 = System.getProperty(&quot;java.home&quot;) + &quot;\\\\bin\\\\java.exe&quot;;\n        String tmp2 = System.getProperty(&quot;sun.boot.library.path&quot;) + &quot;\\\\java.exe&quot;;\n        String tmp3 = System.getProperty(&quot;java.library.path&quot;)+ &quot;\\\\java.exe&quot;;\n        if(new File(tmp1).exists()) {\n            return tmp1;\n        }else if(new File(tmp2).exists()){\n            return tmp2;\n        }else if(new File(tmp3).exists()) {\n            return tmp3;\n        }else{\n            String[] paths = System.getenv(&quot;PATH&quot;).split(&quot;;&quot;);\n            for(String path:paths){\n                if(new File(path + &quot;\\\\java.exe&quot;).exists()){\n                    return path + &quot;\\\\java.exe&quot;;\n                }\n            }\n        }\n        return &quot;&quot;;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":479954,"reputation":2855,"user_id":892914,"accept_rate":89,"display_name":"jnovacho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686848174,"creation_date":1686848174,"answer_id":76483923,"question_id":9006127,"body_markdown":"If you are running on Java 9+ you can use following snippet to check the Java command:\r\n\r\n    import java.io.IOException;\r\n    import java.util.Optional;\r\n    \r\n    public class ProcessUtils {\r\n      private ProcessUtils() {}\r\n    \r\n      public static Optional getCommandOfCurrentProcess() {\r\n         ProcessHandle processHandle = ProcessHandle.current();\r\n         return processHandle.info().command();\r\n      }\r\n    \r\n      public static void main(String[] args) throws IOException {\r\n        System.out.println(ProcessUtils.getCommandOfCurrentProcess());\r\n      }\r\n    }\r\n\r\nThis will use the new Java Process API to get the handle of itself. From there you can parse the path as needed.\r\n\r\n[Source][1]\r\n\r\n\r\n  [1]: https://www.rgagnon.com/javadetails/java-get-running-jvm-path.html","title":"Find absolute java.exe path programmatically from java code","body":"<p>If you are running on Java 9+ you can use following snippet to check the Java command:</p>\n<pre><code>import java.io.IOException;\nimport java.util.Optional;\n\npublic class ProcessUtils {\n  private ProcessUtils() {}\n\n  public static Optional getCommandOfCurrentProcess() {\n     ProcessHandle processHandle = ProcessHandle.current();\n     return processHandle.info().command();\n  }\n\n  public static void main(String[] args) throws IOException {\n    System.out.println(ProcessUtils.getCommandOfCurrentProcess());\n  }\n}\n</code></pre>\n<p>This will use the new Java Process API to get the handle of itself. From there you can parse the path as needed.</p>\n<p><a href=\"https://www.rgagnon.com/javadetails/java-get-running-jvm-path.html\" rel=\"nofollow noreferrer\">Source</a></p>\n"}],"owner":{"account_id":390715,"reputation":6107,"user_id":750965,"accept_rate":94,"display_name":"Johnydep"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26568,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":9006281,"answer_count":6,"score":27,"last_activity_date":1686848174,"creation_date":1327508477,"question_id":9006127,"body_markdown":"If I have a java jar or class file which is launched by the user (assuming java path is set in environment variables), so how can i from within the code, figure out absolute path of java.exe/javaw.exe from which this file is being launched.  \r\n  \r\nLike on ubuntu we can run: `% which java` and it shows the path.  \r\n  \r\nHowever on windows, if i check `System.getenv()` it may happen that there are multiple path&#39;s found e.g for old or new version. If through cmd line, I run `java -version` it does not show the path.  \r\n  \r\nCan you tell me either through pure java or command line on windows how is it possible to find out the location of javaw.exe?","title":"Find absolute java.exe path programmatically from java code","body":"<p>If I have a java jar or class file which is launched by the user (assuming java path is set in environment variables), so how can i from within the code, figure out absolute path of java.exe/javaw.exe from which this file is being launched.  </p>\n\n<p>Like on ubuntu we can run: <code>% which java</code> and it shows the path.  </p>\n\n<p>However on windows, if i check <code>System.getenv()</code> it may happen that there are multiple path's found e.g for old or new version. If through cmd line, I run <code>java -version</code> it does not show the path.  </p>\n\n<p>Can you tell me either through pure java or command line on windows how is it possible to find out the location of javaw.exe?</p>\n"},{"tags":["gradle","java"],"answers":[{"tags":[],"owner":{"account_id":42255,"reputation":8377,"user_id":123054,"accept_rate":83,"display_name":"Matt"},"down_vote_count":1,"up_vote_count":130,"is_accepted":true,"score":129,"last_activity_date":1665014828,"creation_date":1369127225,"answer_id":16666115,"question_id":16654951,"body_markdown":"`targetCompatibility` and `sourceCompatibility` maps to `-target release` and `-source release` in javac. Source is basically the source language level and target is the level of the bytecode that is generated.\r\n\r\nMore details can be found in the *Cross-Compilation Options for `javac`* section of *Tools Reference* [for Java 8][1], [for Java 11](https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9__CROSS-COMPILATIONOPTIONSFORJAVAC-7D3D83C3), [for Java 17][2], or [for Java 19][3]. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html\r\n  [3]: https://docs.oracle.com/en/java/javase/19/docs/specs/man/javac.html","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p><code>targetCompatibility</code> and <code>sourceCompatibility</code> maps to <code>-target release</code> and <code>-source release</code> in javac. Source is basically the source language level and target is the level of the bytecode that is generated.</p>\n<p>More details can be found in the <em>Cross-Compilation Options for <code>javac</code></em> section of <em>Tools Reference</em> <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html\" rel=\"noreferrer\">for Java 8</a>, <a href=\"https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9__CROSS-COMPILATIONOPTIONSFORJAVAC-7D3D83C3\" rel=\"noreferrer\">for Java 11</a>, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html\" rel=\"noreferrer\">for Java 17</a>, or <a href=\"https://docs.oracle.com/en/java/javase/19/docs/specs/man/javac.html\" rel=\"noreferrer\">for Java 19</a>.</p>\n"},{"tags":[],"owner":{"account_id":1808285,"reputation":1071,"user_id":1644873,"display_name":"user1644873"},"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1463039016,"creation_date":1394544148,"answer_id":22326989,"question_id":16654951,"body_markdown":"Be careful when you use these; we&#39;ve been bitten by people making assumptions.\r\n\r\nJust because you use sourceCompability (or targetCompatibility) of 1.5 doesn&#39;t mean you can always compile your code with JDK 1.6 and expect it to work under JDK 1.5. The issue is the available libraries.\r\n\r\nIf your code happens to call some method that is only available in JDK 1.6 it will still compile with the various Compatibility options for the target VM. But when you run it, it will fail because the offending method is not present (you&#39;ll get a MethodNotFoundException or ClassNotFoundException).\r\n\r\nFor this reason, I *always* compare the Compatibility setting to the actual Java version I&#39;m building under. If they don&#39;t match, I fail the build.","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>Be careful when you use these; we've been bitten by people making assumptions.</p>\n\n<p>Just because you use sourceCompability (or targetCompatibility) of 1.5 doesn't mean you can always compile your code with JDK 1.6 and expect it to work under JDK 1.5. The issue is the available libraries.</p>\n\n<p>If your code happens to call some method that is only available in JDK 1.6 it will still compile with the various Compatibility options for the target VM. But when you run it, it will fail because the offending method is not present (you'll get a MethodNotFoundException or ClassNotFoundException).</p>\n\n<p>For this reason, I <em>always</em> compare the Compatibility setting to the actual Java version I'm building under. If they don't match, I fail the build.</p>\n"},{"tags":[],"owner":{"account_id":5273615,"reputation":706,"user_id":4211159,"display_name":"A Jakhar"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1428507218,"creation_date":1428507218,"answer_id":29519066,"question_id":16654951,"body_markdown":"**sourceCompatibility** =  specifies that version of the Java programming language be used to compile **.java** files.\r\ne.g sourceCompatibility 1.6 =specifies that version 1.6 of the Java programming language be used to compile **.java** files.\r\n\r\n*By default sourceCompatibility = &quot;version of the current JVM in use&quot; and targetCompatibility = sourceCompatibility* \r\n\r\n**targetCompatibility** = The option ensures that the generated class files will be compatible with VMs specified by targetCompatibility . Note that in most cases, the value of the -target option is the value of the -source option; in that case, you can omit the -target option.\r\n\r\n*Class files will run on the target specified by targetCompatibility and on later versions, but not on earlier versions of the VM*\r\n\r\n\r\n","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p><strong>sourceCompatibility</strong> =  specifies that version of the Java programming language be used to compile <strong>.java</strong> files.\ne.g sourceCompatibility 1.6 =specifies that version 1.6 of the Java programming language be used to compile <strong>.java</strong> files.</p>\n\n<p><em>By default sourceCompatibility = \"version of the current JVM in use\" and targetCompatibility = sourceCompatibility</em> </p>\n\n<p><strong>targetCompatibility</strong> = The option ensures that the generated class files will be compatible with VMs specified by targetCompatibility . Note that in most cases, the value of the -target option is the value of the -source option; in that case, you can omit the -target option.</p>\n\n<p><em>Class files will run on the target specified by targetCompatibility and on later versions, but not on earlier versions of the VM</em></p>\n"},{"tags":[],"owner":{"account_id":15494779,"reputation":1291,"user_id":12824504,"display_name":"haoyu wang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1586262251,"creation_date":1586262251,"answer_id":61079964,"question_id":16654951,"body_markdown":"In my opinion, “sourceCompatibility” means the what feature you can use in your source code.For example,if you set sourceCompatibility to 1.7, then you can&#39;t use lambda expression which a new feature in java 8 even though you jdk version is 1.8.  \r\nAs for “targetCompatibility”, it means which version of jre the generated class file can be run on, if you set it to 1.8,it may not run successfully on jdk 1.7, but it can usually run on higher version of jdk.","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>In my opinion, “sourceCompatibility” means the what feature you can use in your source code.For example,if you set sourceCompatibility to 1.7, then you can't use lambda expression which a new feature in java 8 even though you jdk version is 1.8.<br>\nAs for “targetCompatibility”, it means which version of jre the generated class file can be run on, if you set it to 1.8,it may not run successfully on jdk 1.7, but it can usually run on higher version of jdk.</p>\n"},{"tags":[],"owner":{"account_id":1016338,"reputation":3267,"user_id":1027842,"accept_rate":75,"display_name":"Benjamin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589456733,"creation_date":1589456733,"answer_id":61796556,"question_id":16654951,"body_markdown":"These are the flags for the javac command.\r\n\r\n    javac [options] [sourcefiles]\r\n\r\n    Options:\r\n    ...\r\n    -source release - Specifies the version of source code accepted.\r\n    ...\r\n    -target release - Generates class files for a specific VM version.\r\n    ...\r\n\r\nIn other words:  you write a code in a `source` version and compile your classes to the `target` VM version. In order to run it e.g. on other workstation with older java version.\r\n\r\nAccording to: https://docs.oracle.com/en/java/javase/11/tools/javac.html\r\n\r\n","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>These are the flags for the javac command.</p>\n\n<pre><code>javac [options] [sourcefiles]\n\nOptions:\n...\n-source release - Specifies the version of source code accepted.\n...\n-target release - Generates class files for a specific VM version.\n...\n</code></pre>\n\n<p>In other words:  you write a code in a <code>source</code> version and compile your classes to the <code>target</code> VM version. In order to run it e.g. on other workstation with older java version.</p>\n\n<p>According to: <a href=\"https://docs.oracle.com/en/java/javase/11/tools/javac.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/tools/javac.html</a></p>\n"},{"tags":[],"owner":{"account_id":3703427,"reputation":473,"user_id":3082542,"display_name":"becke-ch"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668872331,"creation_date":1668872331,"answer_id":74501354,"question_id":16654951,"body_markdown":"There have been given a lot of good explanations of what `sourceCompatibility` vs `targetCompatibility` is good for and a further good article can be found here [Gradle: sourceCompatiblity vs targetCompatibility][1]. But instead of `sourceCompatibility` vs `targetCompatibility` I would suggest to use the Gradle `toolchain` (see [Toolchains for JVM projects][2]) which makes `release` or `sourceCompatibility` tweaks obsolete and gurantees that langauge-features (`sourceCompatibility`), bytecode (`targetCompatibility`) and Java-API/-Libraries (`release`) will match the Java Version. (Only drawback is that the IDE support is not yet fully established but is on its way).\r\n\r\n\r\n  [1]: https://www.baeldung.com/gradle-sourcecompatiblity-vs-targetcompatibility\r\n  [2]: https://docs.gradle.org/current/userguide/toolchains.html","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>There have been given a lot of good explanations of what <code>sourceCompatibility</code> vs <code>targetCompatibility</code> is good for and a further good article can be found here <a href=\"https://www.baeldung.com/gradle-sourcecompatiblity-vs-targetcompatibility\" rel=\"nofollow noreferrer\">Gradle: sourceCompatiblity vs targetCompatibility</a>. But instead of <code>sourceCompatibility</code> vs <code>targetCompatibility</code> I would suggest to use the Gradle <code>toolchain</code> (see <a href=\"https://docs.gradle.org/current/userguide/toolchains.html\" rel=\"nofollow noreferrer\">Toolchains for JVM projects</a>) which makes <code>release</code> or <code>sourceCompatibility</code> tweaks obsolete and gurantees that langauge-features (<code>sourceCompatibility</code>), bytecode (<code>targetCompatibility</code>) and Java-API/-Libraries (<code>release</code>) will match the Java Version. (Only drawback is that the IDE support is not yet fully established but is on its way).</p>\n"}],"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150260,"favorite_count":0,"down_vote_count":1,"up_vote_count":200,"accepted_answer_id":16666115,"answer_count":6,"score":199,"last_activity_date":1686847265,"creation_date":1369071084,"question_id":16654951,"body_markdown":"What is the relationship/difference between `sourceCompatibility` and `targetCompatibility`? What happens when they are set to different values?\r\n\r\nAccording to the [Toolchain and compatibility](https://docs.gradle.org/current/userguide/java_plugin.html#toolchain_and_compatibility) section of the [Java plugin](http://www.gradle.org/docs/current/userguide/java_plugin.html) Gradle documentation:\r\n\r\n* `sourceCompatibility` is &quot;Java version compatibility to use when compiling Java source.&quot;\r\n* `targetCompatibility` is &quot;Java version to generate classes for.&quot;\r\n\r\nMy understanding is that `targetCompatibility` will generate Java bytecode that is compatible with a specific version of Java. Is this a subset of the functionality of `sourceCompatibility`?\r\n\r\n","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>What is the relationship/difference between <code>sourceCompatibility</code> and <code>targetCompatibility</code>? What happens when they are set to different values?</p>\n<p>According to the <a href=\"https://docs.gradle.org/current/userguide/java_plugin.html#toolchain_and_compatibility\" rel=\"noreferrer\">Toolchain and compatibility</a> section of the <a href=\"http://www.gradle.org/docs/current/userguide/java_plugin.html\" rel=\"noreferrer\">Java plugin</a> Gradle documentation:</p>\n<ul>\n<li><code>sourceCompatibility</code> is &quot;Java version compatibility to use when compiling Java source.&quot;</li>\n<li><code>targetCompatibility</code> is &quot;Java version to generate classes for.&quot;</li>\n</ul>\n<p>My understanding is that <code>targetCompatibility</code> will generate Java bytecode that is compatible with a specific version of Java. Is this a subset of the functionality of <code>sourceCompatibility</code>?</p>\n"},{"tags":["java","maven","selenium-webdriver","testng","classpath"],"owner":{"account_id":4113062,"reputation":435,"user_id":3375417,"accept_rate":0,"display_name":"wheelerlc64"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686847069,"creation_date":1686847069,"question_id":76483797,"body_markdown":"Currently I have a TestNG/Selenium/Maven/Java project that I have setup to run as a jar with a goal of **test-jar**.  I used the maven dependency plugin to essentially copy all the dependencies to a lib folder in the test-classes folder within target directory.  My manifest in the JAR has the Class-Path with all jars.  When I run a java -jar myjar-tests.jar I get a NoClassDefFoundError as seenb elow:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/testng/TestListenerAdapter\r\n        at runner.CrystalUIMain.main(CrystalUIMain.java:11)\r\nCaused by: java.lang.ClassNotFoundException: org.testng.TestListenerAdapter\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n        ... 1 more\r\n```\r\n\r\nBelow is my pom.xml (maven dependency plugin and goal as test-jar for maven jar plugin):\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.crystalfw&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;ui&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;ui&lt;/name&gt;\r\n\t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n\t\t&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.8.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.9.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.aventstack&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;extentreports&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.24&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.3.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.2gis.winium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;winium-webdriver&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.1.0-1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;42.5.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.20.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.20.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-http-jdk-client --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.8.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.3.0&lt;/version&gt;\r\n\t\t\t&lt;!-- &lt;scope&gt;test&lt;/scope&gt; --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.inject&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guice&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.0&lt;/version&gt;\r\n&lt;!--\t\t\t&lt;classifier&gt;no_aop&lt;/classifier&gt;--&gt;\r\n&lt;!--\t\t\t&lt;scope&gt;compile&lt;/scope&gt;--&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.beust&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jcommander&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.48&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;32.0.1-jre&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;${maven.compiler.source}&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;${maven.compiler.target}&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.6.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;copy-dependencies&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/test-classes/lib&lt;/outputDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteSnapshots&gt;true&lt;/overWriteSnapshots&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.3.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;test-jar&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;archive&gt;\r\n&lt;!--\t\t\t\t\t\t\t\t&lt;manifestFile&gt;${project.build.outputDirectory}/META-INF/MANIFEST.MF&lt;/manifestFile&gt;--&gt;\r\n\t\t\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n\t\t\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t\t\t\t&lt;manifestEntries&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;Main-Class&gt;runner.CrystalUIMain&lt;/Main-Class&gt;\r\n\t\t\t\t\t\t\t\t&lt;/manifestEntries&gt;\r\n\t\t\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nBelow is my main class:\r\n\r\n```\r\npackage runner;\r\n\r\nimport org.testng.TestListenerAdapter;\r\nimport org.testng.TestNG;\r\nimport org.testng.collections.Lists;\r\n\r\nimport java.util.List;\r\n\r\npublic class CrystalUIMain {\r\n    public static void main(String[] args) {\r\n        TestListenerAdapter tla = new TestListenerAdapter();\r\n        TestNG testng = new TestNG();\r\n        List&lt;String&gt; suites = Lists.newArrayList();\r\n        suites.add(&quot;testng_basic.xml&quot;);//path to xml..\r\n        testng.setTestSuites(suites);\r\n        testng.run();\r\n    }\r\n}\r\n```\r\n\r\nMETA-INF/MANIFEST.MF:\r\n\r\n```\r\nManifest-Version: 1.0\r\nCreated-By: Maven JAR Plugin 3.3.0\r\nBuild-Jdk-Spec: 17\r\nClass-Path: testng-7.8.0.jar jquery-3.6.1.jar selenium-java-4.9.0.jar se\r\n lenium-api-4.9.0.jar selenium-chrome-driver-4.9.0.jar selenium-chromium\r\n -driver-4.9.0.jar selenium-json-4.9.0.jar selenium-manager-4.9.0.jar se\r\n lenium-devtools-v110-4.9.0.jar selenium-devtools-v111-4.9.0.jar seleniu\r\n m-devtools-v112-4.9.0.jar selenium-devtools-v85-4.9.0.jar selenium-edge\r\n -driver-4.9.0.jar selenium-firefox-driver-4.9.0.jar selenium-ie-driver-\r\n 4.9.0.jar selenium-remote-driver-4.9.0.jar netty-buffer-4.1.91.Final.ja\r\n r netty-codec-http-4.1.91.Final.jar netty-codec-4.1.91.Final.jar netty-\r\n handler-4.1.91.Final.jar netty-common-4.1.91.Final.jar netty-transport-\r\n classes-epoll-4.1.91.Final.jar netty-transport-classes-kqueue-4.1.91.Fi\r\n nal.jar netty-transport-native-unix-common-4.1.91.Final.jar netty-trans\r\n port-4.1.91.Final.jar netty-resolver-4.1.91.Final.jar opentelemetry-api\r\n -1.25.0.jar opentelemetry-context-1.25.0.jar opentelemetry-exporter-log\r\n ging-1.25.0.jar opentelemetry-sdk-metrics-1.25.0.jar opentelemetry-sdk-\r\n logs-1.25.0-alpha.jar opentelemetry-api-logs-1.25.0-alpha.jar opentelem\r\n etry-api-events-1.25.0-alpha.jar opentelemetry-sdk-common-1.25.0.jar op\r\n entelemetry-sdk-extension-autoconfigure-spi-1.25.0.jar opentelemetry-sd\r\n k-extension-autoconfigure-1.25.0-alpha.jar opentelemetry-sdk-trace-1.25\r\n .0.jar opentelemetry-sdk-1.25.0.jar opentelemetry-semconv-1.25.0-alpha.\r\n jar jtoml-2.0.0.jar byte-buddy-1.14.4.jar commons-exec-1.3.jar async-ht\r\n tp-client-2.12.3.jar async-http-client-netty-utils-2.12.3.jar netty-cod\r\n ec-socks-4.1.60.Final.jar netty-handler-proxy-4.1.60.Final.jar netty-tr\r\n ansport-native-epoll-4.1.60.Final-linux-x86_64.jar netty-transport-nati\r\n ve-kqueue-4.1.60.Final-osx-x86_64.jar netty-reactive-streams-2.0.4.jar \r\n jakarta.activation-1.2.2.jar selenium-safari-driver-4.9.0.jar selenium-\r\n support-4.9.0.jar extentreports-5.0.9.jar rxjava-3.0.4.jar reactive-str\r\n eams-1.0.3.jar freemarker-2.3.30.jar gson-2.8.6.jar lombok-1.18.24.jar \r\n poi-ooxml-5.2.2.jar poi-5.2.2.jar commons-codec-1.15.jar commons-math3-\r\n 3.6.1.jar SparseBitSet-1.2.jar poi-ooxml-lite-5.2.2.jar xmlbeans-5.0.3.\r\n jar commons-compress-1.21.jar commons-io-2.11.0.jar curvesapi-1.07.jar \r\n commons-collections4-4.4.jar webdrivermanager-5.3.2.jar docker-java-3.2\r\n .14.jar docker-java-core-3.2.14.jar docker-java-api-3.2.14.jar jackson-\r\n annotations-2.10.3.jar jackson-databind-2.10.3.jar jackson-core-2.10.3.\r\n jar bcpkix-jdk15on-1.64.jar bcprov-jdk15on-1.64.jar jcl-over-slf4j-1.7.\r\n 30.jar docker-java-transport-httpclient5-3.2.14.jar docker-java-transpo\r\n rt-3.2.14.jar jna-5.12.1.jar dec-0.1.2.jar commons-lang3-3.12.0.jar htt\r\n pclient5-5.2.1.jar httpcore5-5.2.jar httpcore5-h2-5.2.jar winium-webdri\r\n ver-0.1.0-1.jar postgresql-42.5.0.jar checker-qual-3.5.0.jar slf4j-api-\r\n 2.0.6.jar log4j-core-2.20.0.jar log4j-api-2.20.0.jar selenium-http-jdk-\r\n client-4.8.1.jar auto-service-annotations-1.0.1.jar auto-service-1.0.1.\r\n jar auto-common-1.2.jar selenium-http-4.8.1.jar failsafe-3.3.0.jar rest\r\n -assured-5.3.0.jar groovy-4.0.6.jar groovy-xml-4.0.6.jar httpclient-4.5\r\n .13.jar httpcore-4.4.13.jar commons-logging-1.2.jar httpmime-4.5.13.jar\r\n  hamcrest-2.1.jar tagsoup-1.2.1.jar json-path-5.3.0.jar groovy-json-4.0\r\n .6.jar rest-assured-common-5.3.0.jar xml-path-5.3.0.jar json-simple-1.1\r\n .1.jar junit-4.10.jar hamcrest-core-1.1.jar guice-4.1.0.jar javax.injec\r\n t-1.jar aopalliance-1.0.jar jcommander-1.48.jar guava-32.0.1-jre.jar fa\r\n ilureaccess-1.0.1.jar listenablefuture-9999.0-empty-to-avoid-conflict-w\r\n ith-guava.jar jsr305-3.0.2.jar error_prone_annotations-2.18.0.jar j2obj\r\n c-annotations-2.8.jar\r\nMain-Class: runner.CrystalUIMain\r\n\r\n```\r\n\r\nAny suggestions as to why I am getting this error even with the manifest classpath having all the jars?","title":"NoClassDefFoundError running TestNG test jar","body":"<p>Currently I have a TestNG/Selenium/Maven/Java project that I have setup to run as a jar with a goal of <strong>test-jar</strong>.  I used the maven dependency plugin to essentially copy all the dependencies to a lib folder in the test-classes folder within target directory.  My manifest in the JAR has the Class-Path with all jars.  When I run a java -jar myjar-tests.jar I get a NoClassDefFoundError as seenb elow:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/testng/TestListenerAdapter\n        at runner.CrystalUIMain.main(CrystalUIMain.java:11)\nCaused by: java.lang.ClassNotFoundException: org.testng.TestListenerAdapter\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n        ... 1 more\n</code></pre>\n<p>Below is my pom.xml (maven dependency plugin and goal as test-jar for maven jar plugin):</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.crystalfw&lt;/groupId&gt;\n    &lt;artifactId&gt;ui&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;ui&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.8.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.aventstack&lt;/groupId&gt;\n            &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\n            &lt;version&gt;5.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.24&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;5.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.2gis.winium&lt;/groupId&gt;\n            &lt;artifactId&gt;winium-webdriver&lt;/artifactId&gt;\n            &lt;version&gt;0.1.0-1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.20.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.20.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-http-jdk-client --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\n            &lt;version&gt;4.8.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n            &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n            &lt;version&gt;5.3.0&lt;/version&gt;\n            &lt;!-- &lt;scope&gt;test&lt;/scope&gt; --&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;guice&lt;/artifactId&gt;\n            &lt;version&gt;4.1.0&lt;/version&gt;\n&lt;!--            &lt;classifier&gt;no_aop&lt;/classifier&gt;--&gt;\n&lt;!--            &lt;scope&gt;compile&lt;/scope&gt;--&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.beust&lt;/groupId&gt;\n            &lt;artifactId&gt;jcommander&lt;/artifactId&gt;\n            &lt;version&gt;1.48&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;32.0.1-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\n                    &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.6.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/test-classes/lib&lt;/outputDirectory&gt;\n                            &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                            &lt;overWriteSnapshots&gt;true&lt;/overWriteSnapshots&gt;\n                            &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-jar&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;archive&gt;\n&lt;!--                                &lt;manifestFile&gt;${project.build.outputDirectory}/META-INF/MANIFEST.MF&lt;/manifestFile&gt;--&gt;\n                                &lt;manifest&gt;\n                                    &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                                &lt;/manifest&gt;\n                                &lt;manifestEntries&gt;\n                                    &lt;Main-Class&gt;runner.CrystalUIMain&lt;/Main-Class&gt;\n                                &lt;/manifestEntries&gt;\n                            &lt;/archive&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Below is my main class:</p>\n<pre><code>package runner;\n\nimport org.testng.TestListenerAdapter;\nimport org.testng.TestNG;\nimport org.testng.collections.Lists;\n\nimport java.util.List;\n\npublic class CrystalUIMain {\n    public static void main(String[] args) {\n        TestListenerAdapter tla = new TestListenerAdapter();\n        TestNG testng = new TestNG();\n        List&lt;String&gt; suites = Lists.newArrayList();\n        suites.add(&quot;testng_basic.xml&quot;);//path to xml..\n        testng.setTestSuites(suites);\n        testng.run();\n    }\n}\n</code></pre>\n<p>META-INF/MANIFEST.MF:</p>\n<pre><code>Manifest-Version: 1.0\nCreated-By: Maven JAR Plugin 3.3.0\nBuild-Jdk-Spec: 17\nClass-Path: testng-7.8.0.jar jquery-3.6.1.jar selenium-java-4.9.0.jar se\n lenium-api-4.9.0.jar selenium-chrome-driver-4.9.0.jar selenium-chromium\n -driver-4.9.0.jar selenium-json-4.9.0.jar selenium-manager-4.9.0.jar se\n lenium-devtools-v110-4.9.0.jar selenium-devtools-v111-4.9.0.jar seleniu\n m-devtools-v112-4.9.0.jar selenium-devtools-v85-4.9.0.jar selenium-edge\n -driver-4.9.0.jar selenium-firefox-driver-4.9.0.jar selenium-ie-driver-\n 4.9.0.jar selenium-remote-driver-4.9.0.jar netty-buffer-4.1.91.Final.ja\n r netty-codec-http-4.1.91.Final.jar netty-codec-4.1.91.Final.jar netty-\n handler-4.1.91.Final.jar netty-common-4.1.91.Final.jar netty-transport-\n classes-epoll-4.1.91.Final.jar netty-transport-classes-kqueue-4.1.91.Fi\n nal.jar netty-transport-native-unix-common-4.1.91.Final.jar netty-trans\n port-4.1.91.Final.jar netty-resolver-4.1.91.Final.jar opentelemetry-api\n -1.25.0.jar opentelemetry-context-1.25.0.jar opentelemetry-exporter-log\n ging-1.25.0.jar opentelemetry-sdk-metrics-1.25.0.jar opentelemetry-sdk-\n logs-1.25.0-alpha.jar opentelemetry-api-logs-1.25.0-alpha.jar opentelem\n etry-api-events-1.25.0-alpha.jar opentelemetry-sdk-common-1.25.0.jar op\n entelemetry-sdk-extension-autoconfigure-spi-1.25.0.jar opentelemetry-sd\n k-extension-autoconfigure-1.25.0-alpha.jar opentelemetry-sdk-trace-1.25\n .0.jar opentelemetry-sdk-1.25.0.jar opentelemetry-semconv-1.25.0-alpha.\n jar jtoml-2.0.0.jar byte-buddy-1.14.4.jar commons-exec-1.3.jar async-ht\n tp-client-2.12.3.jar async-http-client-netty-utils-2.12.3.jar netty-cod\n ec-socks-4.1.60.Final.jar netty-handler-proxy-4.1.60.Final.jar netty-tr\n ansport-native-epoll-4.1.60.Final-linux-x86_64.jar netty-transport-nati\n ve-kqueue-4.1.60.Final-osx-x86_64.jar netty-reactive-streams-2.0.4.jar \n jakarta.activation-1.2.2.jar selenium-safari-driver-4.9.0.jar selenium-\n support-4.9.0.jar extentreports-5.0.9.jar rxjava-3.0.4.jar reactive-str\n eams-1.0.3.jar freemarker-2.3.30.jar gson-2.8.6.jar lombok-1.18.24.jar \n poi-ooxml-5.2.2.jar poi-5.2.2.jar commons-codec-1.15.jar commons-math3-\n 3.6.1.jar SparseBitSet-1.2.jar poi-ooxml-lite-5.2.2.jar xmlbeans-5.0.3.\n jar commons-compress-1.21.jar commons-io-2.11.0.jar curvesapi-1.07.jar \n commons-collections4-4.4.jar webdrivermanager-5.3.2.jar docker-java-3.2\n .14.jar docker-java-core-3.2.14.jar docker-java-api-3.2.14.jar jackson-\n annotations-2.10.3.jar jackson-databind-2.10.3.jar jackson-core-2.10.3.\n jar bcpkix-jdk15on-1.64.jar bcprov-jdk15on-1.64.jar jcl-over-slf4j-1.7.\n 30.jar docker-java-transport-httpclient5-3.2.14.jar docker-java-transpo\n rt-3.2.14.jar jna-5.12.1.jar dec-0.1.2.jar commons-lang3-3.12.0.jar htt\n pclient5-5.2.1.jar httpcore5-5.2.jar httpcore5-h2-5.2.jar winium-webdri\n ver-0.1.0-1.jar postgresql-42.5.0.jar checker-qual-3.5.0.jar slf4j-api-\n 2.0.6.jar log4j-core-2.20.0.jar log4j-api-2.20.0.jar selenium-http-jdk-\n client-4.8.1.jar auto-service-annotations-1.0.1.jar auto-service-1.0.1.\n jar auto-common-1.2.jar selenium-http-4.8.1.jar failsafe-3.3.0.jar rest\n -assured-5.3.0.jar groovy-4.0.6.jar groovy-xml-4.0.6.jar httpclient-4.5\n .13.jar httpcore-4.4.13.jar commons-logging-1.2.jar httpmime-4.5.13.jar\n  hamcrest-2.1.jar tagsoup-1.2.1.jar json-path-5.3.0.jar groovy-json-4.0\n .6.jar rest-assured-common-5.3.0.jar xml-path-5.3.0.jar json-simple-1.1\n .1.jar junit-4.10.jar hamcrest-core-1.1.jar guice-4.1.0.jar javax.injec\n t-1.jar aopalliance-1.0.jar jcommander-1.48.jar guava-32.0.1-jre.jar fa\n ilureaccess-1.0.1.jar listenablefuture-9999.0-empty-to-avoid-conflict-w\n ith-guava.jar jsr305-3.0.2.jar error_prone_annotations-2.18.0.jar j2obj\n c-annotations-2.8.jar\nMain-Class: runner.CrystalUIMain\n\n</code></pre>\n<p>Any suggestions as to why I am getting this error even with the manifest classpath having all the jars?</p>\n"},{"tags":["java","json","serialization","clojure"],"answers":[{"tags":[],"owner":{"account_id":2041247,"reputation":29451,"user_id":1822379,"accept_rate":60,"display_name":"Alan Thompson"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686846829,"creation_date":1482821612,"answer_id":41340405,"question_id":41339445,"body_markdown":"I have renamed your example classes to make it more concrete:\r\n\r\n    public class Person {\r\n\t  String  name;\r\n\t  Address address;\r\n    }\r\n    \r\n    public class Address {\r\n\t  String street;\r\n\t  String city;\r\n    }\r\n\r\nHere is an outline of what to do. You simply define a conversion function for each class, and then compose them hierarchically:\r\n\r\n    (defn address-&gt;clj [address]\r\n\t  {:street  (.-street address)\r\n\t\tcity    (.-city address)})\r\n    \r\n    (defn person-&gt;clj [person]\r\n\t  {:name     (.-name person)\r\n\t\taddress  (address-&gt;clj (.-address person))})\r\n\r\nConsider some sample data (NOTE: constructor details omitted)\r\n\r\n    (def addr-1    (Address. &quot;123 Main St&quot; &quot;Anytown&quot;))\r\n    (def person-1  (Person.  &quot;Joe Smith&quot; addr-1))\r\n    \r\n    (someClass-&gt;clj  person-1)    ; Convert Java person-1 obj\r\n\r\nYou will get a Clojure map back that looks like:\r\n\r\n    {:name      &quot;Joe Smith&quot;\r\n\t :address \t{:street &quot;123 Main St&quot; \r\n\t\t\t     :city   &quot;Anytown&quot;}}\r\n\r\n---------------------\r\nUpdate\r\n\r\nIf you are working with a Java bean, please see also:\r\n\r\n- the [bean-dip][1] library\r\n- the [clojure.java.data][2] library\r\n\r\n\r\n  [1]: https://github.com/uwcpdx/bean-dip/\r\n  [2]: https://github.com/clojure/java.data","title":"How to serialize java class to json in clojure","body":"<p>I have renamed your example classes to make it more concrete:</p>\n<pre><code>public class Person {\n  String  name;\n  Address address;\n}\n\npublic class Address {\n  String street;\n  String city;\n}\n</code></pre>\n<p>Here is an outline of what to do. You simply define a conversion function for each class, and then compose them hierarchically:</p>\n<pre><code>(defn address-&gt;clj [address]\n  {:street  (.-street address)\n    city    (.-city address)})\n\n(defn person-&gt;clj [person]\n  {:name     (.-name person)\n    address  (address-&gt;clj (.-address person))})\n</code></pre>\n<p>Consider some sample data (NOTE: constructor details omitted)</p>\n<pre><code>(def addr-1    (Address. &quot;123 Main St&quot; &quot;Anytown&quot;))\n(def person-1  (Person.  &quot;Joe Smith&quot; addr-1))\n\n(someClass-&gt;clj  person-1)    ; Convert Java person-1 obj\n</code></pre>\n<p>You will get a Clojure map back that looks like:</p>\n<pre><code>{:name      &quot;Joe Smith&quot;\n :address   {:street &quot;123 Main St&quot; \n             :city   &quot;Anytown&quot;}}\n</code></pre>\n<hr />\n<p>Update</p>\n<p>If you are working with a Java bean, please see also:</p>\n<ul>\n<li>the <a href=\"https://github.com/uwcpdx/bean-dip/\" rel=\"nofollow noreferrer\">bean-dip</a> library</li>\n<li>the <a href=\"https://github.com/clojure/java.data\" rel=\"nofollow noreferrer\">clojure.java.data</a> library</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1610297,"reputation":512,"user_id":1489467,"accept_rate":0,"display_name":"Mamun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1482827567,"creation_date":1482827567,"answer_id":41341645,"question_id":41339445,"body_markdown":"I am not sure, I understand your question correctly. If you would like to convert java bean to clojure data structure, you could simply use clojure **bean** API. Using postwalk, you could also convert all inner part too. Find an example in bellow\r\n\r\n\r\n      (let [ao (doto (AnotherClass.)\r\n                     (.setAnotherkey &quot;Ano&quot;)\r\n                     (.setAnothervalue &quot;Ano-value&quot;))\r\n        o (doto  (SomeClass.)\r\n                 (.setKey &quot;A&quot;)\r\n                 (.setValue &quot;A-value&quot;)\r\n                 (.setAnotherClass ao))]\r\n       (-&gt;&gt; (dissoc (bean o) :class)\r\n             (w/postwalk (fn [v]\r\n                        (if (contains? #{AnotherClass SomeClass} (type v))\r\n                         (dissoc (bean v) :class)\r\n                         v)))))\r\n\r\n    ;;Output {:anotherClass {:anotherkey &quot;Ano&quot;, :anothervalue &quot;Ano-value&quot;}, :key &quot;A&quot;, :value &quot;A-value&quot;}","title":"How to serialize java class to json in clojure","body":"<p>I am not sure, I understand your question correctly. If you would like to convert java bean to clojure data structure, you could simply use clojure <strong>bean</strong> API. Using postwalk, you could also convert all inner part too. Find an example in bellow</p>\n\n<pre><code>  (let [ao (doto (AnotherClass.)\n                 (.setAnotherkey \"Ano\")\n                 (.setAnothervalue \"Ano-value\"))\n    o (doto  (SomeClass.)\n             (.setKey \"A\")\n             (.setValue \"A-value\")\n             (.setAnotherClass ao))]\n   (-&gt;&gt; (dissoc (bean o) :class)\n         (w/postwalk (fn [v]\n                    (if (contains? #{AnotherClass SomeClass} (type v))\n                     (dissoc (bean v) :class)\n                     v)))))\n\n;;Output {:anotherClass {:anotherkey \"Ano\", :anothervalue \"Ano-value\"}, :key \"A\", :value \"A-value\"}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3600446,"reputation":108,"user_id":3214583,"display_name":"ykembayev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1482829968,"creation_date":1482829968,"answer_id":41342196,"question_id":41339445,"body_markdown":"Thanks everybody. Problem was solved by [clj-gson][1]\r\n\r\n\r\n  [1]: https://github.com/spoon16/clj-gson","title":"How to serialize java class to json in clojure","body":"<p>Thanks everybody. Problem was solved by <a href=\"https://github.com/spoon16/clj-gson\" rel=\"nofollow noreferrer\">clj-gson</a></p>\n"},{"tags":[],"owner":{"account_id":40443,"reputation":1902,"user_id":117220,"accept_rate":67,"display_name":"Petr Gladkikh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581437768,"creation_date":1503047318,"answer_id":45752803,"question_id":41339445,"body_markdown":"With `clojure.data.json` you can extend writer protocol when necessary. E.g.:\r\n```clojure\r\n(require &#39;clojure.data.json)\r\n(extend-type java.util.UUID\r\n  clojure.data.json/JSONWriter\r\n  (-write [object ^PrintWriter out]\r\n     (.print out (str &quot; something &quot;))))\r\n```\r\n","title":"How to serialize java class to json in clojure","body":"<p>With <code>clojure.data.json</code> you can extend writer protocol when necessary. E.g.:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(require 'clojure.data.json)\n(extend-type java.util.UUID\n  clojure.data.json/JSONWriter\n  (-write [object ^PrintWriter out]\n     (.print out (str \" something \"))))\n</code></pre>\n"}],"owner":{"account_id":3600446,"reputation":108,"user_id":3214583,"display_name":"ykembayev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":758,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":41342196,"answer_count":4,"score":3,"last_activity_date":1686846829,"creation_date":1482816182,"question_id":41339445,"body_markdown":"I have many java classes, which can contain another class\r\n\r\n    public class SomeClass(){\r\n        private String key;\r\n        private String value;\r\n        private AnotherClass anotherClass;\r\n    }\r\n\r\n    public class AnotherClass(){\r\n        private String anotherkey;\r\n        private String anothervalue;\r\n    }\r\n\r\nHow can convert SomeClass to json in clojure? Already tried to use [cheshire][1], [clojure/data.json][2], but unsuccessfully\r\n\r\n\r\n  [1]: https://github.com/dakrone/cheshire#cheshire\r\n  [2]: https://github.com/clojure/data.json","title":"How to serialize java class to json in clojure","body":"<p>I have many java classes, which can contain another class</p>\n\n<pre><code>public class SomeClass(){\n    private String key;\n    private String value;\n    private AnotherClass anotherClass;\n}\n\npublic class AnotherClass(){\n    private String anotherkey;\n    private String anothervalue;\n}\n</code></pre>\n\n<p>How can convert SomeClass to json in clojure? Already tried to use <a href=\"https://github.com/dakrone/cheshire#cheshire\" rel=\"nofollow noreferrer\">cheshire</a>, <a href=\"https://github.com/clojure/data.json\" rel=\"nofollow noreferrer\">clojure/data.json</a>, but unsuccessfully</p>\n"},{"tags":["java","mysql"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1686832814,"post_id":76482567,"comment_id":134855576,"body_markdown":"Stop using the oudated `java.util.Date` class. Move to the newer `java.time.` API","body":"Stop using the oudated <code>java.util.Date</code> class. Move to the newer <code>java.time.</code> API"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1686832819,"post_id":76482567,"comment_id":134855579,"body_markdown":"You better not use `Date` and `Calendar` anymore, use `java.time`, maybe `String insertMe = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss&quot;);`","body":"You better not use <code>Date</code> and <code>Calendar</code> anymore, use <code>java.time</code>, maybe <code>String insertMe = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;uuuu&zwnj;&#8203;-MM-dd HH:mm:ss&quot;);</code>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1686832862,"post_id":76482567,"comment_id":134855589,"body_markdown":"There are many examples in the internet and on stack overflow. Try to search before wirting a new question","body":"There are many examples in the internet and on stack overflow. Try to search before wirting a new question"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1686834005,"post_id":76482567,"comment_id":134855867,"body_markdown":"Why do you need a `String`? What is the datatype of the column in your database?  If it is anything related to dates/times/timestamps leave it as is and let JDBC do the proper thing.","body":"Why do you need a <code>String</code>? What is the datatype of the column in your database?  If it is anything related to dates/times/timestamps leave it as is and let JDBC do the proper thing."}],"answers":[{"tags":[],"owner":{"account_id":28819895,"reputation":99,"user_id":22072627,"display_name":"CaptainObvious"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686833423,"creation_date":1686833423,"answer_id":76482667,"question_id":76482567,"body_markdown":"To convert a Date object to a String in the format &quot;yyyy-MM-dd HH:mm:ss&quot;, you can use the SimpleDateFormat class in Java. \r\n\r\n```import java.text.SimpleDateFormat;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\n\r\npublic class DateToStringExample {\r\n    public static void main(String[] args) {\r\n        Calendar calendar = Calendar.getInstance();\r\n        Date date = calendar.getTime();\r\n\r\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        String dateString = dateFormat.format(date);\r\n\r\n        System.out.println(&quot;Formatted Date String: &quot; + dateString);\r\n    }\r\n}\r\n```\r\n\r\nI made an example for you, you first obtain the current date and time using the Calendar class. Then, you create an instance of SimpleDateFormat and specify the desired format pattern as &quot;yyyy-MM-dd HH:mm:ss&quot;. Finally, you format the Date object using the format() method of SimpleDateFormat, which returns the formatted date string.\r\n\r\nYou can then use the dateString variable to insert the formatted date into a MySQL table","title":"Convert java Date format into a string so MySQL can read that string","body":"<p>To convert a Date object to a String in the format &quot;yyyy-MM-dd HH:mm:ss&quot;, you can use the SimpleDateFormat class in Java.</p>\n<pre><code>import java.util.Calendar;\nimport java.util.Date;\n\npublic class DateToStringExample {\n    public static void main(String[] args) {\n        Calendar calendar = Calendar.getInstance();\n        Date date = calendar.getTime();\n\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n        String dateString = dateFormat.format(date);\n\n        System.out.println(&quot;Formatted Date String: &quot; + dateString);\n    }\n}\n</code></pre>\n<p>I made an example for you, you first obtain the current date and time using the Calendar class. Then, you create an instance of SimpleDateFormat and specify the desired format pattern as &quot;yyyy-MM-dd HH:mm:ss&quot;. Finally, you format the Date object using the format() method of SimpleDateFormat, which returns the formatted date string.</p>\n<p>You can then use the dateString variable to insert the formatted date into a MySQL table</p>\n"},{"tags":[],"owner":{"account_id":9527261,"reputation":93,"user_id":7080129,"display_name":"sstlv_seraph"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686833835,"creation_date":1686833835,"answer_id":76482723,"question_id":76482567,"body_markdown":"You can use SimpleDateFormat:\r\n\r\n     Date date = new Date();\r\n     SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n     String formattedDate = dateFormat.format(date);\r\n\r\nor\r\n\r\n    Date date = new Date();\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n    String formattedDate = formatter.format(date.toInstant());","title":"Convert java Date format into a string so MySQL can read that string","body":"<p>You can use SimpleDateFormat:</p>\n<pre><code> Date date = new Date();\n SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n String formattedDate = dateFormat.format(date);\n</code></pre>\n<p>or</p>\n<pre><code>Date date = new Date();\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\nString formattedDate = formatter.format(date.toInstant());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686846393,"creation_date":1686846393,"answer_id":76483714,"question_id":76482567,"body_markdown":"There are a few ways to accomplish this.\r\n\r\nThe quickest way would be to use a _String_ format using the _tF_ and _tT_ specifiers.  \r\nThe _Formatter_ class offers the complete list of specifiers.  \r\n_[Formatter (Java SE 20 &amp;amp; JDK 20) &amp;ndash; Date/Time Conversions](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html#dt)_.\r\n\r\nAs a note, the _1$_ here is to de-reference the first argument&amp;mdash;as opposed to adding the argument twice.\r\n\r\n```java\r\nString string = &quot;%tF %1$tT&quot;.formatted(date.getTime());\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n2023-06-15 12:18:49\r\n```\r\n\r\nAdditionally, as others have recommended, you can use the _[SimpleDateFormat](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/text/SimpleDateFormat.html)_ class.\r\n\r\nAgain, the complete list of format specifiers can be found within the JavaDoc, linked above.\r\n\r\n```java\r\nSimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\nString string = format.format(date);\r\n```","title":"Convert java Date format into a string so MySQL can read that string","body":"<p>There are a few ways to accomplish this.</p>\n<p>The quickest way would be to use a <em>String</em> format using the <em>tF</em> and <em>tT</em> specifiers.<br />\nThe <em>Formatter</em> class offers the complete list of specifiers.<br />\n<em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html#dt\" rel=\"nofollow noreferrer\">Formatter (Java SE 20 &amp; JDK 20) – Date/Time Conversions</a></em>.</p>\n<p>As a note, the <em>1$</em> here is to de-reference the first argument—as opposed to adding the argument twice.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;%tF %1$tT&quot;.formatted(date.getTime());\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-06-15 12:18:49\n</code></pre>\n<p>Additionally, as others have recommended, you can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">SimpleDateFormat</a></em> class.</p>\n<p>Again, the complete list of format specifiers can be found within the JavaDoc, linked above.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\nString string = format.format(date);\n</code></pre>\n"}],"owner":{"account_id":24836356,"reputation":11,"user_id":18714950,"display_name":"Renato Pomparau"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1686846393,"creation_date":1686832704,"question_id":76482567,"body_markdown":"I need to convert a Date in java:\r\n`Date date=calendar.getTime();` // yyyy-MM-dd\r\nI want to turn it into a String &quot;yyyy-MM-dd HH:mm:ss&quot; so i can insert it into a table in MySQL. Any ideea?\r\n","title":"Convert java Date format into a string so MySQL can read that string","body":"<p>I need to convert a Date in java:\n<code>Date date=calendar.getTime();</code> // yyyy-MM-dd\nI want to turn it into a String &quot;yyyy-MM-dd HH:mm:ss&quot; so i can insert it into a table in MySQL. Any ideea?</p>\n"},{"tags":["java","jaxb","classloader","websphere-liberty"],"answers":[{"tags":[],"owner":{"account_id":13739626,"reputation":116,"user_id":9915084,"display_name":"Thomas Johnson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686846113,"creation_date":1686846113,"answer_id":76483676,"question_id":76468344,"body_markdown":"unfortunately, I do not think it&#39;s possible to extend the `NamespacePrefixMapper` class while using the `jaxb-2.2` feature on Liberty. I&#39;ve tested this myself with a custom user feature, and hit a `NoClassDefFoundError`. The reason this doesn&#39;t work with a user feature, is that the `jaxb-2.2` OSGi feature was written very intentionally to not expose any of the internal implementation packages, `com.sun.xml.bind.*`, as `IBM-API-Package` in it&#39;s feature manifest file.  \r\n\r\nIf you have a hard dependency on the `NamespacePrefixMapper` class, you might think about packaging your own JAXB specification and implementation and not enabling the `jaxb-2.2` feature on Liberty. You might also look at alternatives to using the `NamespacePrefixMapper`. You may or may not find this link useful for that https://stackoverflow.com/questions/3289644/define-spring-jaxb-namespaces-without-using-namespaceprefixmapper. ","title":"Application JAXB namespace mapper custom implementation not working in Liberty","body":"<p>unfortunately, I do not think it's possible to extend the <code>NamespacePrefixMapper</code> class while using the <code>jaxb-2.2</code> feature on Liberty. I've tested this myself with a custom user feature, and hit a <code>NoClassDefFoundError</code>. The reason this doesn't work with a user feature, is that the <code>jaxb-2.2</code> OSGi feature was written very intentionally to not expose any of the internal implementation packages, <code>com.sun.xml.bind.*</code>, as <code>IBM-API-Package</code> in it's feature manifest file.</p>\n<p>If you have a hard dependency on the <code>NamespacePrefixMapper</code> class, you might think about packaging your own JAXB specification and implementation and not enabling the <code>jaxb-2.2</code> feature on Liberty. You might also look at alternatives to using the <code>NamespacePrefixMapper</code>. You may or may not find this link useful for that <a href=\"https://stackoverflow.com/questions/3289644/define-spring-jaxb-namespaces-without-using-namespaceprefixmapper\">Define Spring JAXB namespaces without using NamespacePrefixMapper</a>.</p>\n"}],"owner":{"account_id":8738198,"reputation":31,"user_id":6536060,"display_name":"Igupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686846113,"creation_date":1686686690,"question_id":76468344,"body_markdown":"I&#39;m migrating from WAS to Liberty where in we are having JAXB as application dependency. I have extended the NamespaceMapper of the jaxb-impl and when I&#39;m trying to set it to Marshaller Property I&#39;m getting the error that the nampespace mapper should be instance of com.sun.xml.bind.marshaller.NamespacePrefixMapper and not of my custom namespace mapper.\r\n\r\n```\r\npublic class MyNamespaceMapper extends com.sun.xml.bind.marshaller.NamespacePrefixMapper{\r\n// custom logic.\r\n}\r\nJAXBContext context =JAXBContext.newInstance(&quot;class&quot;);\r\nMarshaller marshaller = context.createMarshaller();\r\nmarshaller.setProperty(&quot;com.sun.xml.bind.namespacePrefixMapper&quot;, new MyNamespaceMapper());\r\n```\r\n\r\n\r\n\r\nI have tried changing the delegation to parent last for the jaxb library but then I run into classloader issues.\r\nI tried using the ContextClassLoader but I keep running into the same issue.\r\nI tried creating the liberty user feature as well but I was unable run it correctly. Here is the maifest files of the feature I tried to create.\r\n\r\nFeature-marshaller.MF\r\n```\r\n\r\nSubsystem-ManifestVersion: 1.0\r\nSubsystem-SymbolicName: m-1.0.0; visibility:=public\r\nSubsystem-Version: 1.0.0.qualifier\r\nSubsystem-Type: osgi.subsystem.feature\r\nSubsystem-Content: marshaller; version=&quot;[1,1.0.100)&quot;\r\nIBM-Feature-Version: 2\r\nIBM-API-Package: com.sun.xml.bind.marshaller; type=&quot;api&quot;\r\nIBM-ShortName: m-1.0.0\r\n\r\n```\r\nMANIFEST.MF\r\n```\r\nManifest-Version: 1.0\r\nBundle-ManifestVersion: 2\r\nBundle-Name: marshaller\r\nBundle-SymbolicName: marshaller\r\nBundle-Version: 1.0.0\r\nImport-Package: org.osgi.framework\r\nBundle-RequiredExecutionEnvironment: JavaSE-1.8\r\nExport-Package: com.sun.xml.bind.marshaller\r\nBundle-ClassPath: jaxb-impl-1.0.jar\r\n\r\n```\r\nI tried to create this OSGI bundle from the option create plugin from existing jar and I pointed to the jaxb jar. and then I created these Manife`your text`st files.\r\n\r\nCan someone please help me fix this issue?\r\n\r\n","title":"Application JAXB namespace mapper custom implementation not working in Liberty","body":"<p>I'm migrating from WAS to Liberty where in we are having JAXB as application dependency. I have extended the NamespaceMapper of the jaxb-impl and when I'm trying to set it to Marshaller Property I'm getting the error that the nampespace mapper should be instance of com.sun.xml.bind.marshaller.NamespacePrefixMapper and not of my custom namespace mapper.</p>\n<pre><code>public class MyNamespaceMapper extends com.sun.xml.bind.marshaller.NamespacePrefixMapper{\n// custom logic.\n}\nJAXBContext context =JAXBContext.newInstance(&quot;class&quot;);\nMarshaller marshaller = context.createMarshaller();\nmarshaller.setProperty(&quot;com.sun.xml.bind.namespacePrefixMapper&quot;, new MyNamespaceMapper());\n</code></pre>\n<p>I have tried changing the delegation to parent last for the jaxb library but then I run into classloader issues.\nI tried using the ContextClassLoader but I keep running into the same issue.\nI tried creating the liberty user feature as well but I was unable run it correctly. Here is the maifest files of the feature I tried to create.</p>\n<p>Feature-marshaller.MF</p>\n<pre><code>\nSubsystem-ManifestVersion: 1.0\nSubsystem-SymbolicName: m-1.0.0; visibility:=public\nSubsystem-Version: 1.0.0.qualifier\nSubsystem-Type: osgi.subsystem.feature\nSubsystem-Content: marshaller; version=&quot;[1,1.0.100)&quot;\nIBM-Feature-Version: 2\nIBM-API-Package: com.sun.xml.bind.marshaller; type=&quot;api&quot;\nIBM-ShortName: m-1.0.0\n\n</code></pre>\n<p>MANIFEST.MF</p>\n<pre><code>Manifest-Version: 1.0\nBundle-ManifestVersion: 2\nBundle-Name: marshaller\nBundle-SymbolicName: marshaller\nBundle-Version: 1.0.0\nImport-Package: org.osgi.framework\nBundle-RequiredExecutionEnvironment: JavaSE-1.8\nExport-Package: com.sun.xml.bind.marshaller\nBundle-ClassPath: jaxb-impl-1.0.jar\n\n</code></pre>\n<p>I tried to create this OSGI bundle from the option create plugin from existing jar and I pointed to the jaxb jar. and then I created these Manife<code>your text</code>st files.</p>\n<p>Can someone please help me fix this issue?</p>\n"},{"tags":["java","spring-boot","telegram-bot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1643892491,"post_id":70971550,"comment_id":125462931,"body_markdown":"If you look at the code for the bot it uses Spring Boot 2.5 and not Spring Boot 2.6. Now it doesn&#39;t have the mean it doesn&#39;t work with 2.6 but it definitely hasn&#39;t been tested with it. So I would suggest downgrading to 2.5.x (whatever the latest version of that is).","body":"If you look at the code for the bot it uses Spring Boot 2.5 and not Spring Boot 2.6. Now it doesn&#39;t have the mean it doesn&#39;t work with 2.6 but it definitely hasn&#39;t been tested with it. So I would suggest downgrading to 2.5.x (whatever the latest version of that is)."}],"answers":[{"tags":[],"owner":{"account_id":27686348,"reputation":9,"user_id":21134035,"display_name":"Vladyslav Tupchiienko"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1675350248,"creation_date":1675350190,"answer_id":75325082,"question_id":70971550,"body_markdown":"Try to register your bot manually. \r\n\r\n1. Create bean for TelegramBotsAPI:  \r\n\r\n        @Bean  \r\n        public TelegramBotsApi telegramBotsApi() {  \r\n            return new TelegramBotsApi(DefaultBotSession.class);  \r\n        }\r\n\r\n  \r\n\r\n2. Register your bot in the constructor:\r\n\r\n        @Component\r\n        public class MySecretaryBot extends TelegramLongPollingBot {\r\n        \r\n            @Autowired\r\n            public MySecretaryBot(TelegramBotsApi telegramBotsApi) {\r\n                telegramBotsApi.registerBot(this);\r\n            }\r\n    \r\n            ...\r\n    \r\n        }\r\n\r\n","title":"Trying to implement telegrambots-spring-boot-starter and create Telegram bot, but it doesn&#39;t work","body":"<p>Try to register your bot manually.</p>\n<ol>\n<li><p>Create bean for TelegramBotsAPI:</p>\n<pre><code> @Bean  \n public TelegramBotsApi telegramBotsApi() {  \n     return new TelegramBotsApi(DefaultBotSession.class);  \n }\n</code></pre>\n</li>\n<li><p>Register your bot in the constructor:</p>\n<pre><code> @Component\n public class MySecretaryBot extends TelegramLongPollingBot {\n\n     @Autowired\n     public MySecretaryBot(TelegramBotsApi telegramBotsApi) {\n         telegramBotsApi.registerBot(this);\n     }\n\n     ...\n\n }\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":22248768,"reputation":11,"user_id":18965881,"display_name":"Ivan Kaliuzhnyi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676321302,"creation_date":1676321302,"answer_id":75441038,"question_id":70971550,"body_markdown":"You should set scanning directive.\r\nTry this:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = {\r\n            &quot;com.telegram.secretary.bot&quot;,\r\n            &quot;org.telegram.telegrambots&quot;\r\n    })\r\n    public class Application {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    \r\n    }","title":"Trying to implement telegrambots-spring-boot-starter and create Telegram bot, but it doesn&#39;t work","body":"<p>You should set scanning directive.\nTry this:</p>\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = {\n        &quot;com.telegram.secretary.bot&quot;,\n        &quot;org.telegram.telegrambots&quot;\n})\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13271068,"reputation":312,"user_id":9582156,"display_name":"bovae"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686846068,"creation_date":1686846068,"answer_id":76483671,"question_id":70971550,"body_markdown":"Your version of `telegrambots-spring-boot-starter` probably was not updated for Spring Boot 2.7.0 and newer support.\r\nSince Spring Boot 2.7.0 there was a change related to auto-configuration ([Release Notes][1]).\r\n\r\nIn order to make it work – create a new file under `src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports` and put the next line there:\r\n\r\n    org.telegram.telegrambots.starter.TelegramBotStarterConfiguration\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7-Release-Notes#changes-to-auto-configuration","title":"Trying to implement telegrambots-spring-boot-starter and create Telegram bot, but it doesn&#39;t work","body":"<p>Your version of <code>telegrambots-spring-boot-starter</code> probably was not updated for Spring Boot 2.7.0 and newer support.\nSince Spring Boot 2.7.0 there was a change related to auto-configuration (<a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7-Release-Notes#changes-to-auto-configuration\" rel=\"nofollow noreferrer\">Release Notes</a>).</p>\n<p>In order to make it work – create a new file under <code>src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> and put the next line there:</p>\n<pre><code>org.telegram.telegrambots.starter.TelegramBotStarterConfiguration\n</code></pre>\n"}],"owner":{"account_id":12426544,"reputation":29,"user_id":9050960,"display_name":"This Immortal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2569,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1686846068,"creation_date":1643892295,"question_id":70971550,"body_markdown":"I use Spring boot and telegrambots-spring-boot-starter dependency. I did all things as it showed in this repository:\r\nhttps://github.com/rubenlagus/TelegramBots/tree/master/telegrambots-spring-boot-starter. \r\nBut it didn&#39;t work. \r\n\r\n**My pom.xml:**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.telegram&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;secretary.bot&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;secretary.bot&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.telegram&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;telegrambots-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.7.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.6.3&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**My Bot class:**\r\n```\r\npackage com.telegram.secretary.bot;\r\n\r\nimport org.springframework.stereotype.Component;\r\nimport org.telegram.telegrambots.bots.TelegramLongPollingBot;\r\nimport org.telegram.telegrambots.meta.api.methods.send.SendMessage;\r\nimport org.telegram.telegrambots.meta.api.objects.Update;\r\nimport org.telegram.telegrambots.meta.exceptions.TelegramApiException;\r\n\r\n\r\nimport java.util.List;\r\n\r\n@Component\r\npublic class MySecretaryBot extends TelegramLongPollingBot {\r\n\r\n    @Override\r\n    public String getBotUsername() {\r\n        return &quot;Oyaqbot&quot;;\r\n    }\r\n\r\n    @Override\r\n    public String getBotToken() {\r\n        return &quot;5240178378:AAHA6GVOT2fGp_pFMyXD75LEBlms6iEVtSs&quot;;\r\n    }\r\n\r\n    @Override\r\n    public void onRegister() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpdateReceived(Update update) {\r\n\r\n        String command = update.getMessage().getText();\r\n\r\n        if(command.equals(&quot;/hello&quot;)){\r\n            String message = &quot;Hello, dear friend!&quot;;\r\n\r\n            SendMessage response = new SendMessage();\r\n            response.setChatId(update.getMessage().getChatId().toString());\r\n            response.setText(message);\r\n\r\n            try {\r\n                execute(response);\r\n            }\r\n            catch (TelegramApiException e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onUpdatesReceived(List&lt;Update&gt; updates) {\r\n\r\n    }\r\n}\r\n```\r\n\r\n**My Main Spring boot class:**\r\n```\r\npackage com.telegram.secretary.bot;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n}\r\n```\r\nNote: According to the repository telegram bot starter for Spring boot automatically registers your bot and no need registration code. And ApiContextInitializer.init(); method also doesn&#39;t exist anymore. \r\n","title":"Trying to implement telegrambots-spring-boot-starter and create Telegram bot, but it doesn&#39;t work","body":"<p>I use Spring boot and telegrambots-spring-boot-starter dependency. I did all things as it showed in this repository:\n<a href=\"https://github.com/rubenlagus/TelegramBots/tree/master/telegrambots-spring-boot-starter\" rel=\"nofollow noreferrer\">https://github.com/rubenlagus/TelegramBots/tree/master/telegrambots-spring-boot-starter</a>.\nBut it didn't work.</p>\n<p><strong>My pom.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.telegram&lt;/groupId&gt;\n    &lt;artifactId&gt;secretary.bot&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;secretary.bot&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.telegram&lt;/groupId&gt;\n            &lt;artifactId&gt;telegrambots-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;5.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6.3&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>My Bot class:</strong></p>\n<pre><code>package com.telegram.secretary.bot;\n\nimport org.springframework.stereotype.Component;\nimport org.telegram.telegrambots.bots.TelegramLongPollingBot;\nimport org.telegram.telegrambots.meta.api.methods.send.SendMessage;\nimport org.telegram.telegrambots.meta.api.objects.Update;\nimport org.telegram.telegrambots.meta.exceptions.TelegramApiException;\n\n\nimport java.util.List;\n\n@Component\npublic class MySecretaryBot extends TelegramLongPollingBot {\n\n    @Override\n    public String getBotUsername() {\n        return &quot;Oyaqbot&quot;;\n    }\n\n    @Override\n    public String getBotToken() {\n        return &quot;5240178378:AAHA6GVOT2fGp_pFMyXD75LEBlms6iEVtSs&quot;;\n    }\n\n    @Override\n    public void onRegister() {\n\n    }\n\n    @Override\n    public void onUpdateReceived(Update update) {\n\n        String command = update.getMessage().getText();\n\n        if(command.equals(&quot;/hello&quot;)){\n            String message = &quot;Hello, dear friend!&quot;;\n\n            SendMessage response = new SendMessage();\n            response.setChatId(update.getMessage().getChatId().toString());\n            response.setText(message);\n\n            try {\n                execute(response);\n            }\n            catch (TelegramApiException e){\n                e.printStackTrace();\n            }\n        }\n    }\n\n    @Override\n    public void onUpdatesReceived(List&lt;Update&gt; updates) {\n\n    }\n}\n</code></pre>\n<p><strong>My Main Spring boot class:</strong></p>\n<pre><code>package com.telegram.secretary.bot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>Note: According to the repository telegram bot starter for Spring boot automatically registers your bot and no need registration code. And ApiContextInitializer.init(); method also doesn't exist anymore.</p>\n"},{"tags":["java","xml","xml-parsing","erp"],"comments":[{"owner":{"account_id":1020072,"reputation":233583,"user_id":1030675,"display_name":"choroba"},"score":4,"creation_date":1686846107,"post_id":76483641,"comment_id":134857447,"body_markdown":"Where does the value come from? It&#39;s not present in the XML anywhere. Also, what code do you use to extract it?","body":"Where does the value come from? It&#39;s not present in the XML anywhere. Also, what code do you use to extract it?"},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1686853133,"post_id":76483641,"comment_id":134858867,"body_markdown":"The issue is with the output, not with the input data. Something that is taken from just your description. But if you want an explanation on how to fix this, you need to show the code you use.","body":"The issue is with the output, not with the input data. Something that is taken from just your description. But if you want an explanation on how to fix this, you need to show the code you use."}],"owner":{"account_id":19840472,"reputation":109,"user_id":14533154,"display_name":"AdnanKattekaden"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686846024,"creation_date":1686845832,"question_id":76483641,"body_markdown":"I have an XML code snippet as follows:\r\n```\r\n&lt;element id=&quot;billNoPre&quot; class=&quot;LabelText&quot; value=&quot;Reference:0-&quot; field=&quot;&quot;&gt;\r\n    &lt;matrix x=&quot;0&quot; y=&quot;0&quot; height=&quot;10&quot; scaleX=&quot;1&quot; scaleY=&quot;1&quot; rotation=&quot;0&quot; /&gt;\r\n    &lt;style fontStyle=&quot;normal&quot; lineHeight=&quot;100%&quot; textAlign=&quot;right&quot; fontSize=&quot;10&quot; fontWeight=&quot;bold&quot; fontFamily=&quot;calibriEmbedded&quot; /&gt;\r\n&lt;/element&gt;\r\n\r\n&lt;element id=&quot;billNo&quot; class=&quot;LabelText&quot; prefixElement=&quot;billNoPre&quot; value=&quot;00.00&quot; field=&quot;billNumber&quot;&gt;\r\n    &lt;matrix x=&quot;440&quot; y=&quot;15&quot; height=&quot;15&quot; scaleX=&quot;1&quot; scaleY=&quot;1&quot; rotation=&quot;0&quot; /&gt;\r\n    &lt;style fontStyle=&quot;normal&quot; lineHeight=&quot;100%&quot; textAlign=&quot;right&quot; fontWeight=&quot;bold&quot; fontSize=&quot;10&quot; fontFamily=&quot;calibriEmbedded&quot; /&gt;\r\n&lt;/element&gt;\r\n```\r\nWhen I retrieve the value of the billNo element, it includes extra whitespace between the prefix &quot;Reference:0-&quot; and the actual value &quot;4564564564&quot;. The current output is &quot;Reference:0- 4564564564&quot;, but I want it to be &quot;Reference:0-4564564564&quot; without any extra whitespace.\r\n\r\nHow can I modify the code to achieve the desired output?","title":"How to remove extra whitespace between prefix and value in XML element using attributes?","body":"<p>I have an XML code snippet as follows:</p>\n<pre><code>&lt;element id=&quot;billNoPre&quot; class=&quot;LabelText&quot; value=&quot;Reference:0-&quot; field=&quot;&quot;&gt;\n    &lt;matrix x=&quot;0&quot; y=&quot;0&quot; height=&quot;10&quot; scaleX=&quot;1&quot; scaleY=&quot;1&quot; rotation=&quot;0&quot; /&gt;\n    &lt;style fontStyle=&quot;normal&quot; lineHeight=&quot;100%&quot; textAlign=&quot;right&quot; fontSize=&quot;10&quot; fontWeight=&quot;bold&quot; fontFamily=&quot;calibriEmbedded&quot; /&gt;\n&lt;/element&gt;\n\n&lt;element id=&quot;billNo&quot; class=&quot;LabelText&quot; prefixElement=&quot;billNoPre&quot; value=&quot;00.00&quot; field=&quot;billNumber&quot;&gt;\n    &lt;matrix x=&quot;440&quot; y=&quot;15&quot; height=&quot;15&quot; scaleX=&quot;1&quot; scaleY=&quot;1&quot; rotation=&quot;0&quot; /&gt;\n    &lt;style fontStyle=&quot;normal&quot; lineHeight=&quot;100%&quot; textAlign=&quot;right&quot; fontWeight=&quot;bold&quot; fontSize=&quot;10&quot; fontFamily=&quot;calibriEmbedded&quot; /&gt;\n&lt;/element&gt;\n</code></pre>\n<p>When I retrieve the value of the billNo element, it includes extra whitespace between the prefix &quot;Reference:0-&quot; and the actual value &quot;4564564564&quot;. The current output is &quot;Reference:0- 4564564564&quot;, but I want it to be &quot;Reference:0-4564564564&quot; without any extra whitespace.</p>\n<p>How can I modify the code to achieve the desired output?</p>\n"},{"tags":["java","amazon-dynamodb"],"answers":[{"tags":[],"owner":{"account_id":257345,"reputation":6764,"user_id":538697,"display_name":"hunterhacker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686845938,"creation_date":1686845938,"answer_id":76483657,"question_id":76483526,"body_markdown":"Well, the underlying condition expression string can support NOT as an operator. \r\n\r\nhttps://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html\r\n","title":"Is it possible to negate a DynamoDB ConditionCheck in a WriteTransaction?","body":"<p>Well, the underlying condition expression string can support NOT as an operator.</p>\n<p><a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html</a></p>\n"}],"owner":{"account_id":12106354,"reputation":5,"user_id":8845063,"display_name":"Ethan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686845938,"creation_date":1686845065,"question_id":76483526,"body_markdown":"I&#39;m using DynamoDB transactions and wondering if I can conditionally write to my database if and only if a certain [ConditionCheck](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ConditionCheck.html) in my transaction fails. I would just restructure my ConditionCheck to search for the reverse of my current check, but with my current table design it would require some sort of `not_begins_with` query which isn&#39;t supported. Any chance someone knows of some sort of negation operator for ConditionChecks or the DynamoDB Java SDK that I can&#39;t find?","title":"Is it possible to negate a DynamoDB ConditionCheck in a WriteTransaction?","body":"<p>I'm using DynamoDB transactions and wondering if I can conditionally write to my database if and only if a certain <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ConditionCheck.html\" rel=\"nofollow noreferrer\">ConditionCheck</a> in my transaction fails. I would just restructure my ConditionCheck to search for the reverse of my current check, but with my current table design it would require some sort of <code>not_begins_with</code> query which isn't supported. Any chance someone knows of some sort of negation operator for ConditionChecks or the DynamoDB Java SDK that I can't find?</p>\n"},{"tags":["java","spring","tomcat","hotswap"],"comments":[{"owner":{"account_id":1600162,"reputation":1885,"user_id":1481345,"display_name":"Ale Zalazar"},"score":0,"creation_date":1686845595,"post_id":76483477,"comment_id":134857343,"body_markdown":"What kind of infrastructure are you running on? Can you boot an additional instance and switch traffic?","body":"What kind of infrastructure are you running on? Can you boot an additional instance and switch traffic?"},{"owner":{"account_id":10579480,"reputation":13,"user_id":7793849,"display_name":"Nethish Rajendran"},"score":0,"creation_date":1687060573,"post_id":76483477,"comment_id":134883245,"body_markdown":"We are using kubernetes and tomcat as servlet container. I guess we can do that. But many processes usually keep running in the background.","body":"We are using kubernetes and tomcat as servlet container. I guess we can do that. But many processes usually keep running in the background."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686845831,"creation_date":1686845415,"answer_id":76483578,"question_id":76483477,"body_markdown":"Don&#39;t.\r\n\r\nPro: \r\nNo deploymemt time.\r\n\r\nCon: \r\nNever, NEVER do a hot swap on a production system. Only if you are 100% sure about everything, but no one is 100% sure.\r\nI would recommend to never practice this task. \r\nSaved time isn&#39;t worth more than safety. \r\nWhat if your code has side effects you so not know?\r\n\r\nPlease don&#39;t. \r\n\r\nFix the bugs and then create a release.\r\n\r\nPlease Take a look at this Image:\r\nhttps://rapidbi.com/wp-content/uploads/2017/03/Project-management-triangle.png.webp\r\nYou can only pull in TWO sides of the triangle.\r\n\r\nKind regards","title":"Is it a good practice to hot swap java code in production?","body":"<p>Don't.</p>\n<p>Pro:\nNo deploymemt time.</p>\n<p>Con:\nNever, NEVER do a hot swap on a production system. Only if you are 100% sure about everything, but no one is 100% sure.\nI would recommend to never practice this task.\nSaved time isn't worth more than safety.\nWhat if your code has side effects you so not know?</p>\n<p>Please don't.</p>\n<p>Fix the bugs and then create a release.</p>\n<p>Please Take a look at this Image:\n<a href=\"https://rapidbi.com/wp-content/uploads/2017/03/Project-management-triangle.png.webp\" rel=\"nofollow noreferrer\">https://rapidbi.com/wp-content/uploads/2017/03/Project-management-triangle.png.webp</a>\nYou can only pull in TWO sides of the triangle.</p>\n<p>Kind regards</p>\n"}],"owner":{"account_id":10579480,"reputation":13,"user_id":7793849,"display_name":"Nethish Rajendran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76483578,"answer_count":1,"score":0,"last_activity_date":1686845831,"creation_date":1686844686,"question_id":76483477,"body_markdown":"We have a huge spring based monolith Java app that takes ~30 minutes to deploy. I recently found out the hotswap capabilities coming with the JDK quite helpful in development although it can only hotswap method body. \r\n\r\n\r\nThe official docs from oracle suggests below [here](https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/enhancements1.4.html#hotswap)\r\n&gt; Organizations deploying long running servers wish to be able to fix bugs without taking down the server.\r\n&gt; \r\n\r\nIs it recommended to do it in production?. What are the pros and cons of it?\r\n","title":"Is it a good practice to hot swap java code in production?","body":"<p>We have a huge spring based monolith Java app that takes ~30 minutes to deploy. I recently found out the hotswap capabilities coming with the JDK quite helpful in development although it can only hotswap method body.</p>\n<p>The official docs from oracle suggests below <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/enhancements1.4.html#hotswap\" rel=\"nofollow noreferrer\">here</a></p>\n<blockquote>\n<p>Organizations deploying long running servers wish to be able to fix bugs without taking down the server.</p>\n</blockquote>\n<p>Is it recommended to do it in production?. What are the pros and cons of it?</p>\n"},{"tags":["java","android","typedarray"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1532625419,"post_id":51543905,"comment_id":90056418,"body_markdown":"How are you instantiating `MyKeyboardView`? Are you inflating a layout? If so, have you actually set any of those custom attributes on the `&lt;MyKeyboardView&gt;` in the layout you&#39;re inflating?","body":"How are you instantiating <code>MyKeyboardView</code>? Are you inflating a layout? If so, have you actually set any of those custom attributes on the <code>&lt;MyKeyboardView&gt;</code> in the layout you&#39;re inflating?"},{"owner":{"account_id":8641082,"reputation":65,"user_id":6469760,"accept_rate":50,"display_name":"natanao1995"},"score":0,"creation_date":1532625673,"post_id":51543905,"comment_id":90056560,"body_markdown":"@MikeM. added code to question","body":"@MikeM. added code to question"},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1532626048,"post_id":51543905,"comment_id":90056758,"body_markdown":"Those attributes are going to be in your app&#39;s namespace, not the system namespace. Add `xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;`, and change the `android` prefix on all of your attributes to `app`. (Lemme know if Android Studio complains about anything.)","body":"Those attributes are going to be in your app&#39;s namespace, not the system namespace. Add <code>xmlns:app=&quot;http:&#47;&#47;schemas.android.com&#47;apk&#47;res-auto&quot;</code>, and change the <code>android</code> prefix on all of your attributes to <code>app</code>. (Lemme know if Android Studio complains about anything.)"},{"owner":{"account_id":8641082,"reputation":65,"user_id":6469760,"accept_rate":50,"display_name":"natanao1995"},"score":1,"creation_date":1532626860,"post_id":51543905,"comment_id":90057136,"body_markdown":"@MikeM. thank you so much! Now I have many other problems but at least my keyboard was inflated and doesn&#39;t crash anymore. Create an answer, so I will check it as right one)","body":"@MikeM. thank you so much! Now I have many other problems but at least my keyboard was inflated and doesn&#39;t crash anymore. Create an answer, so I will check it as right one)"}],"answers":[{"tags":[],"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1532627702,"creation_date":1532627702,"answer_id":51544893,"question_id":51543905,"body_markdown":"Your custom `View` attributes are going to be in your app&#39;s namespace, not the system namespace, so they weren&#39;t found in the given `AttributeSet` when they had the system namespace prefix on them.\r\n\r\nAdd the `xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;` namespace declaration either directly in the `&lt;MyKeyboardView&gt;` tag, or in an ancestor tag, and change the prefix on all of your attributes to `app`.\r\n\r\nNote that the prefix can be any valid name you like, though `app` is probably the most common.","title":"obtainStyledAttributes works wrong","body":"<p>Your custom <code>View</code> attributes are going to be in your app's namespace, not the system namespace, so they weren't found in the given <code>AttributeSet</code> when they had the system namespace prefix on them.</p>\n\n<p>Add the <code>xmlns:app=\"http://schemas.android.com/apk/res-auto\"</code> namespace declaration either directly in the <code>&lt;MyKeyboardView&gt;</code> tag, or in an ancestor tag, and change the prefix on all of your attributes to <code>app</code>.</p>\n\n<p>Note that the prefix can be any valid name you like, though <code>app</code> is probably the most common.</p>\n"},{"tags":[],"owner":{"account_id":11057093,"reputation":1,"user_id":8119633,"display_name":"Alim S. Ajiev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686845760,"creation_date":1686834669,"answer_id":76482845,"question_id":51543905,"body_markdown":"If you do not need your attributes being styleable You may not use &quot;declare-styleable&quot; at all. Just put your attributes in &quot;com.test.features.keyboard.MyKeyboardView&quot; tag without any namespace prefix and get their values like this:\r\n\r\n    attrs.getAttributeIntValue( null, &quot;your_attribute&quot;, 0 );","title":"obtainStyledAttributes works wrong","body":"<p>If you do not need your attributes being styleable You may not use &quot;declare-styleable&quot; at all. Just put your attributes in &quot;com.test.features.keyboard.MyKeyboardView&quot; tag without any namespace prefix and get their values like this:</p>\n<pre><code>attrs.getAttributeIntValue( null, &quot;your_attribute&quot;, 0 );\n</code></pre>\n"}],"owner":{"account_id":8641082,"reputation":65,"user_id":6469760,"accept_rate":50,"display_name":"natanao1995"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1330,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":51544893,"answer_count":2,"score":2,"last_activity_date":1686845760,"creation_date":1532623834,"question_id":51543905,"body_markdown":"I am trying to create my own keyboard. Using Android Keyboard is not enough for my task so I decided to create inheritor class directly from View.class. As base I decided to use code of Keyboard.class and then start change things one by one.\r\n\r\nI faced many problems trying even compile that class, used some reflection and hacks to obtain private fields. I created file attrs to be able to use Keyboard&#39;s attributes and tags.  Finally class compilled and know it crashes becouse parameteres, that should go from inflating, are null. \r\n\r\nWhat I found out is that method context.obtainStyledAttributes(attrs, R.styleable.MyKeyboardView); returns wrong result and a.getIndexCount(); after that returns 0.\r\n\r\nhere is my attr.xml file:\r\n\r\n    &lt;resources&gt;\r\n    &lt;declare-styleable name=&quot;MyKeyboardView&quot;&gt;\r\n        &lt;attr name=&quot;keyBackground&quot; format=&quot;reference&quot; /&gt;\r\n        &lt;attr name=&quot;keyTextSize&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;labelTextSize&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;state_long_pressable&quot; format=&quot;boolean&quot; /&gt;\r\n        &lt;attr name=&quot;keyTextColor&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;keyPreviewLayout&quot; format=&quot;reference&quot; /&gt;\r\n        &lt;attr name=&quot;keyPreviewOffset&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;keyPreviewHeight&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;verticalCorrection&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;shadowColor&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;shadowRadius&quot; format=&quot;float&quot; /&gt;\r\n        &lt;attr name=&quot;backgroundDimAmount&quot; format=&quot;float&quot; /&gt;\r\n        &lt;attr name=&quot;popupLayout&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;/declare-styleable&gt;\r\n&lt;/resources&gt;\r\n\r\nhere is part of my keyboard class:\r\n\r\n    public MyKeyboardView(Context context, AttributeSet attrs) {\r\n        this(context, attrs, Resources.getSystem().getIdentifier(&quot;keyboardViewStyle&quot;, &quot;attr&quot;, &quot;android&quot;));\r\n    }\r\n\r\n    public MyKeyboardView(Context context, AttributeSet attrs, int defStyleAttr) {\r\n        this(context, attrs, defStyleAttr, 0);\r\n    }\r\n\r\n    public MyKeyboardView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\r\n        super(context, attrs, defStyleAttr, defStyleRes);\r\n\r\n        TypedArray a = context.obtainStyledAttributes(\r\n                attrs, R.styleable.MyKeyboardView);\r\n\r\n        LayoutInflater inflate =\r\n                (LayoutInflater) context\r\n                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n\r\n        int previewLayout = 0;\r\n        int keyTextSize = 0;\r\n\r\n        int n = a.getIndexCount();\r\n\r\nThis is how I use keyboard in layout:\r\n\r\n    &lt;FrameLayout\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;240dp&quot;\r\n        android:layout_gravity=&quot;bottom&quot;&gt;\r\n        &lt;com.test.features.keyboard.MyKeyboardView\r\n            xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            android:id=&quot;@+id/keyboard_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:paddingTop=&quot;2.5dip&quot;\r\n            android:keyPreviewHeight=&quot;@dimen/key_height&quot;\r\n            android:shadowRadius=&quot;0&quot;\r\n            android:keyPreviewLayout=&quot;@layout/keyboard_key_preview&quot;\r\n            android:keyPreviewOffset=&quot;0dp&quot;\r\n            android:keyBackground=&quot;@drawable/keyboard_key_background&quot;\r\n            android:keyTextColor=&quot;@color/keyboard_key_color&quot;\r\n            android:background=&quot;@color/primary&quot;\r\n            android:popupLayout=&quot;@layout/keyboard_popup_layout&quot;/&gt;\r\n\r\ntried to use it like so, length() returned 11, but switch case found almost no matches. And if found, default value was used:\r\n\r\n    int n = a.length();\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int attr = a.getIndex(i);\r\n\r\n            switch (attr) {\r\n                case R.styleable.MyKeyboardView_keyBackground:\r\n                    mKeyBackground = a.getDrawable(attr);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_verticalCorrection:\r\n                    mVerticalCorrection = a.getDimensionPixelOffset(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyPreviewLayout:\r\n                    previewLayout = a.getResourceId(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyPreviewOffset:\r\n                    mPreviewOffset = a.getDimensionPixelOffset(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyPreviewHeight:\r\n                    mPreviewHeight = a.getDimensionPixelSize(attr, 80);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyTextSize:\r\n                    mKeyTextSize = a.getDimensionPixelSize(attr, 18);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyTextColor:\r\n                    mKeyTextColor = a.getColor(attr, 0xFF000000);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_labelTextSize:\r\n                    mLabelTextSize = a.getDimensionPixelSize(attr, 14);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_popupLayout:\r\n                    mPopupLayout = a.getResourceId(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_shadowColor:\r\n                    mShadowColor = a.getColor(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_shadowRadius:\r\n                    mShadowRadius = a.getFloat(attr, 0f);\r\n                    break;\r\n            }\r\n        }","title":"obtainStyledAttributes works wrong","body":"<p>I am trying to create my own keyboard. Using Android Keyboard is not enough for my task so I decided to create inheritor class directly from View.class. As base I decided to use code of Keyboard.class and then start change things one by one.</p>\n\n<p>I faced many problems trying even compile that class, used some reflection and hacks to obtain private fields. I created file attrs to be able to use Keyboard's attributes and tags.  Finally class compilled and know it crashes becouse parameteres, that should go from inflating, are null. </p>\n\n<p>What I found out is that method context.obtainStyledAttributes(attrs, R.styleable.MyKeyboardView); returns wrong result and a.getIndexCount(); after that returns 0.</p>\n\n<p>here is my attr.xml file:</p>\n\n<pre><code>&lt;resources&gt;\n&lt;declare-styleable name=\"MyKeyboardView\"&gt;\n    &lt;attr name=\"keyBackground\" format=\"reference\" /&gt;\n    &lt;attr name=\"keyTextSize\" format=\"dimension\" /&gt;\n    &lt;attr name=\"labelTextSize\" format=\"dimension\" /&gt;\n    &lt;attr name=\"state_long_pressable\" format=\"boolean\" /&gt;\n    &lt;attr name=\"keyTextColor\" format=\"color\" /&gt;\n    &lt;attr name=\"keyPreviewLayout\" format=\"reference\" /&gt;\n    &lt;attr name=\"keyPreviewOffset\" format=\"dimension\" /&gt;\n    &lt;attr name=\"keyPreviewHeight\" format=\"dimension\" /&gt;\n    &lt;attr name=\"verticalCorrection\" format=\"dimension\" /&gt;\n    &lt;attr name=\"shadowColor\" format=\"color\" /&gt;\n    &lt;attr name=\"shadowRadius\" format=\"float\" /&gt;\n    &lt;attr name=\"backgroundDimAmount\" format=\"float\" /&gt;\n    &lt;attr name=\"popupLayout\" format=\"reference\" /&gt;\n&lt;/declare-styleable&gt;\n</code></pre>\n\n<p></p>\n\n<p>here is part of my keyboard class:</p>\n\n<pre><code>public MyKeyboardView(Context context, AttributeSet attrs) {\n    this(context, attrs, Resources.getSystem().getIdentifier(\"keyboardViewStyle\", \"attr\", \"android\"));\n}\n\npublic MyKeyboardView(Context context, AttributeSet attrs, int defStyleAttr) {\n    this(context, attrs, defStyleAttr, 0);\n}\n\npublic MyKeyboardView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n    super(context, attrs, defStyleAttr, defStyleRes);\n\n    TypedArray a = context.obtainStyledAttributes(\n            attrs, R.styleable.MyKeyboardView);\n\n    LayoutInflater inflate =\n            (LayoutInflater) context\n                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n\n    int previewLayout = 0;\n    int keyTextSize = 0;\n\n    int n = a.getIndexCount();\n</code></pre>\n\n<p>This is how I use keyboard in layout:</p>\n\n<pre><code>&lt;FrameLayout\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"240dp\"\n    android:layout_gravity=\"bottom\"&gt;\n    &lt;com.test.features.keyboard.MyKeyboardView\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:id=\"@+id/keyboard_view\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:paddingTop=\"2.5dip\"\n        android:keyPreviewHeight=\"@dimen/key_height\"\n        android:shadowRadius=\"0\"\n        android:keyPreviewLayout=\"@layout/keyboard_key_preview\"\n        android:keyPreviewOffset=\"0dp\"\n        android:keyBackground=\"@drawable/keyboard_key_background\"\n        android:keyTextColor=\"@color/keyboard_key_color\"\n        android:background=\"@color/primary\"\n        android:popupLayout=\"@layout/keyboard_popup_layout\"/&gt;\n</code></pre>\n\n<p>tried to use it like so, length() returned 11, but switch case found almost no matches. And if found, default value was used:</p>\n\n<pre><code>int n = a.length();\n\n    for (int i = 0; i &lt; n; i++) {\n        int attr = a.getIndex(i);\n\n        switch (attr) {\n            case R.styleable.MyKeyboardView_keyBackground:\n                mKeyBackground = a.getDrawable(attr);\n                break;\n            case R.styleable.MyKeyboardView_verticalCorrection:\n                mVerticalCorrection = a.getDimensionPixelOffset(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_keyPreviewLayout:\n                previewLayout = a.getResourceId(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_keyPreviewOffset:\n                mPreviewOffset = a.getDimensionPixelOffset(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_keyPreviewHeight:\n                mPreviewHeight = a.getDimensionPixelSize(attr, 80);\n                break;\n            case R.styleable.MyKeyboardView_keyTextSize:\n                mKeyTextSize = a.getDimensionPixelSize(attr, 18);\n                break;\n            case R.styleable.MyKeyboardView_keyTextColor:\n                mKeyTextColor = a.getColor(attr, 0xFF000000);\n                break;\n            case R.styleable.MyKeyboardView_labelTextSize:\n                mLabelTextSize = a.getDimensionPixelSize(attr, 14);\n                break;\n            case R.styleable.MyKeyboardView_popupLayout:\n                mPopupLayout = a.getResourceId(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_shadowColor:\n                mShadowColor = a.getColor(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_shadowRadius:\n                mShadowRadius = a.getFloat(attr, 0f);\n                break;\n        }\n    }\n</code></pre>\n"},{"tags":["java","firebase","android-studio","firebase-realtime-database","firebase-authentication"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1686896261,"post_id":76483600,"comment_id":134863846,"body_markdown":"Does this [answer](https://stackoverflow.com/questions/72224454/execution-failed-for-task-appmapdebugsourcesetpaths-error-while-evaluatin/72226009#72226009) help?","body":"Does this <a href=\"https://stackoverflow.com/questions/72224454/execution-failed-for-task-appmapdebugsourcesetpaths-error-while-evaluatin/72226009#72226009\">answer</a> help?"},{"owner":{"account_id":28808432,"reputation":1,"user_id":22063719,"display_name":"Niru 15"},"score":0,"creation_date":1686922333,"post_id":76483600,"comment_id":134869045,"body_markdown":"@AlexMamo Hi, It&#39;s not working","body":"@AlexMamo Hi, It&#39;s not working"}],"owner":{"account_id":28808432,"reputation":1,"user_id":22063719,"display_name":"Niru 15"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686845586,"creation_date":1686845586,"question_id":76483600,"body_markdown":"I had an error when I linked my Android studio program with Firebase. I don&#39;t understand how to fix this error, please help me upgrade it.\r\n\r\nbuild.gradle(My Web) - Source Code\r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n    dependencies {// Add the dependency for the Google services Gradle plugin\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n}\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;8.0.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;8.0.2&#39; apply false\r\n}\r\n\r\nallprojects {\r\n    repositories {// Make sure that you have the following two repositories\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n}\r\n```\r\n[enter image description here](https://i.stack.imgur.com/zyEux.png)\r\n\r\nHelp me solve this error","title":"Build was configured to prefer settings repositories over project repositories but repository &#39;Google&#39; was added by build file &#39;build.grable&#39;:17","body":"<p>I had an error when I linked my Android studio program with Firebase. I don't understand how to fix this error, please help me upgrade it.</p>\n<p>build.gradle(My Web) - Source Code</p>\n<pre><code>buildscript {\n    repositories {\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n    dependencies {// Add the dependency for the Google services Gradle plugin\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}\nplugins {\n    id 'com.android.application' version '8.0.2' apply false\n    id 'com.android.library' version '8.0.2' apply false\n}\n\nallprojects {\n    repositories {// Make sure that you have the following two repositories\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zyEux.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Help me solve this error</p>\n"},{"tags":["java","spring","spring-integration","spring-integration-sftp"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686845577,"creation_date":1686845577,"answer_id":76483599,"question_id":76482739,"body_markdown":"The mentioned `SftpPersistentAcceptOnceFileListFilter` is a `ResettableFileListFilter`:\r\n\r\n\r\n    /**\r\n     * A {@link FileListFilter} that can be reset by removing a specific file from its\r\n     * state.\r\n     * @param &lt;F&gt; The type that will be filtered.\r\n     *\r\n     * @author Gary Russell\r\n     *\r\n     * @since 4.1.7\r\n     */\r\n    public interface ResettableFileListFilter&lt;F&gt; extends FileListFilter&lt;F&gt; {\r\n\r\nSo, you indeed can just have it as a top-level bean and call its `remove()` whenever your file processing has failed.\r\n\r\nThe framework does that in several places, but really before the message is delivered to target channel:\r\n\r\n\tprivate void resetFilterIfNecessary(AbstractFileInfo&lt;F&gt; file) {\r\n\t\tif (this.filter instanceof ResettableFileListFilter) {\r\n\t\t\tthis.logger.info(\r\n\t\t\t\t\tLogMessage.format(&quot;Removing the remote file &#39;%s&#39; from the filter for a subsequent transfer attempt&quot;,\r\n\t\t\t\t\t\t\tfile.getFilename()));\r\n\t\t\t((ResettableFileListFilter&lt;F&gt;) this.filter).remove(file.getFileInfo());\r\n\t\t}\r\n\t}\r\n\r\n\r\nThat `FileInfo` is available for your as a `FileHeaders.REMOTE_FILE_INFO` header in the message you process downstream.","title":"Removing a file from ConcurrentMetadataStore if file processing fails in spring-integration-sftp","body":"<p>The mentioned <code>SftpPersistentAcceptOnceFileListFilter</code> is a <code>ResettableFileListFilter</code>:</p>\n<pre><code>/**\n * A {@link FileListFilter} that can be reset by removing a specific file from its\n * state.\n * @param &lt;F&gt; The type that will be filtered.\n *\n * @author Gary Russell\n *\n * @since 4.1.7\n */\npublic interface ResettableFileListFilter&lt;F&gt; extends FileListFilter&lt;F&gt; {\n</code></pre>\n<p>So, you indeed can just have it as a top-level bean and call its <code>remove()</code> whenever your file processing has failed.</p>\n<p>The framework does that in several places, but really before the message is delivered to target channel:</p>\n<pre><code>private void resetFilterIfNecessary(AbstractFileInfo&lt;F&gt; file) {\n    if (this.filter instanceof ResettableFileListFilter) {\n        this.logger.info(\n                LogMessage.format(&quot;Removing the remote file '%s' from the filter for a subsequent transfer attempt&quot;,\n                        file.getFilename()));\n        ((ResettableFileListFilter&lt;F&gt;) this.filter).remove(file.getFileInfo());\n    }\n}\n</code></pre>\n<p>That <code>FileInfo</code> is available for your as a <code>FileHeaders.REMOTE_FILE_INFO</code> header in the message you process downstream.</p>\n"}],"owner":{"account_id":1374245,"reputation":4806,"user_id":1308570,"accept_rate":76,"display_name":"kaysush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76483599,"answer_count":1,"score":1,"last_activity_date":1686845577,"creation_date":1686833938,"question_id":76482739,"body_markdown":"I am facing a problem while using spring-integration-sftp to pull files from SFTP servers and do some processing. I&#39;m using `RedisMetadataStore` to power my `SftpPersistentAcceptOnceFileListFilter`. I&#39;m using a `Streaming Inbound Channel Adapter` for my use case. \r\n\r\nThe problem is as soon as a new file event is delivered to my handler that file is marked as processed in the Redis metadata store, so now if my downstream processing fails, that file is lost forever. I have retries in place, but what I would like to do is mark that file as un-processed in redis and have it picked up again in next poll cycle. \r\n\r\nI found that there is a [remove][1] method on RedisMetadataStore class that can remove a key if there is any exception while processing, but wanted to know is it advisable to call the remove method directly ? Because as far as I can understand, these methods are supposed to be called by the filter and not directly but I couldn&#39;t find any thing to deal with this situation. \r\n\r\nAre there any constructs to remove a file from `SftpPersistentAcceptOnceFileListFilter` if it fails during processing ? \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-integration/api/org/springframework/integration/redis/metadata/RedisMetadataStore.html#remove(java.lang.String)","title":"Removing a file from ConcurrentMetadataStore if file processing fails in spring-integration-sftp","body":"<p>I am facing a problem while using spring-integration-sftp to pull files from SFTP servers and do some processing. I'm using <code>RedisMetadataStore</code> to power my <code>SftpPersistentAcceptOnceFileListFilter</code>. I'm using a <code>Streaming Inbound Channel Adapter</code> for my use case.</p>\n<p>The problem is as soon as a new file event is delivered to my handler that file is marked as processed in the Redis metadata store, so now if my downstream processing fails, that file is lost forever. I have retries in place, but what I would like to do is mark that file as un-processed in redis and have it picked up again in next poll cycle.</p>\n<p>I found that there is a <a href=\"https://docs.spring.io/spring-integration/api/org/springframework/integration/redis/metadata/RedisMetadataStore.html#remove(java.lang.String)\" rel=\"nofollow noreferrer\">remove</a> method on RedisMetadataStore class that can remove a key if there is any exception while processing, but wanted to know is it advisable to call the remove method directly ? Because as far as I can understand, these methods are supposed to be called by the filter and not directly but I couldn't find any thing to deal with this situation.</p>\n<p>Are there any constructs to remove a file from <code>SftpPersistentAcceptOnceFileListFilter</code> if it fails during processing ?</p>\n"},{"tags":["java","junit","junit5","dbunit","spring-test-dbunit"],"owner":{"account_id":26030173,"reputation":49,"user_id":19736518,"display_name":"rhoudri hamza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":0,"score":3,"last_activity_date":1686845461,"creation_date":1686845461,"question_id":76483585,"body_markdown":"am trying to migrate from Junit4 to Junit5 knowing that am working with Spring Mvc , version 4.3.5 and i wanna know if there s someway to work with dbUnit for my class Repository\r\n\r\nI did my research and the last version of dependency for Dbunit which is 2.7.3 uses Junit4. So i need to confirm that there is no way to use Dbunit while using Junit 5 except if i decide to migrate towards Spring 5 or Spring Boot cus i found some articles that talks about this\r\n\r\nthe header of my old version of my class test normally u dont need it to answer my question but as i cant post the question for Quality reasons here it is : \r\n\r\n```\r\nContextConfiguration\r\n\r\n@TestPropertySource(locations = &quot;classpath:environnements.properties&quot;)\r\n@TestExecutionListeners(listeners = { DependencyInjectionTestExecutionListener.class,\r\n        TransactionDbUnitTestExecutionListener.class })\r\n//TODO ajouter les xml des d&#233;pendances\r\n// faire par groupes de dependances dans chaque test ?\r\n@DatabaseSetup(value = {&quot;/dbunit/RepositoryTyp-setup.xml&quot;, &quot;/dbunit/RepositoryPTest-setup.xml&quot;}, type = DatabaseOperation.CLEAN_INSERT)\r\npublic class PRepositoryTest extends SpringDbBasedTest {\r\n```","title":"Is There anyway i can use Dbunit with Junit5 while being in Spring 4?","body":"<p>am trying to migrate from Junit4 to Junit5 knowing that am working with Spring Mvc , version 4.3.5 and i wanna know if there s someway to work with dbUnit for my class Repository</p>\n<p>I did my research and the last version of dependency for Dbunit which is 2.7.3 uses Junit4. So i need to confirm that there is no way to use Dbunit while using Junit 5 except if i decide to migrate towards Spring 5 or Spring Boot cus i found some articles that talks about this</p>\n<p>the header of my old version of my class test normally u dont need it to answer my question but as i cant post the question for Quality reasons here it is :</p>\n<pre><code>ContextConfiguration\n\n@TestPropertySource(locations = &quot;classpath:environnements.properties&quot;)\n@TestExecutionListeners(listeners = { DependencyInjectionTestExecutionListener.class,\n        TransactionDbUnitTestExecutionListener.class })\n//TODO ajouter les xml des dépendances\n// faire par groupes de dependances dans chaque test ?\n@DatabaseSetup(value = {&quot;/dbunit/RepositoryTyp-setup.xml&quot;, &quot;/dbunit/RepositoryPTest-setup.xml&quot;}, type = DatabaseOperation.CLEAN_INSERT)\npublic class PRepositoryTest extends SpringDbBasedTest {\n</code></pre>\n"},{"tags":["java","android-studio","kotlin","maven","gradle"],"owner":{"account_id":23031506,"reputation":42,"user_id":17150924,"display_name":"Khoshghalb2c.IR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686844709,"creation_date":1686844709,"question_id":76483481,"body_markdown":"I have to use `maven { url &#39;https://jitpack.io&#39; }` to use the in-app payment library.\r\n&lt;br/&gt;But when I add `maven { url &#39;https://jitpack.io&#39; }` to `repositories` in `build.gradle (module)`-&gt;`allprojects`, files `Java` and `Kotlin` get corrupted and give an error.\r\n&lt;br/&gt;My code after adding `maven { url &#39;https://jitpack.io&#39; }` is as follows.\r\n\r\nbuild.gradle (project):\r\n``` lang-gradle\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;kotlin-android&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 32\r\n    buildToolsVersion &quot;31.0.0&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;ir.sazl.cardbank&quot;\r\n        minSdkVersion 21\r\n        targetSdkVersion 32\r\n        versionCode 12\r\n        versionName &quot;1.1.1&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;androidx.appcompat:appcompat:1.5.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    implementation &#39;com.github.duanhong169:colorpicker:1.1.6&#39;\r\n    implementation &quot;com.github.cafebazaar.Poolakey:poolakey:2.1.0&quot;\r\n}\r\n```\r\n\r\nbuild.gradle (module):\r\n```lang-gradle\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    ext {\r\n        kotlin_version = &#39;1.5.31&#39;\r\n    }\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath &quot;com.android.tools.build:gradle:4.2.1&quot;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        jcenter() // Warning: this repository is going to shut down soon\r\n        maven { url &#39;https://jitpack.io&#39; }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n&lt;br/&gt;&lt;br/&gt;\r\n**These are the errors:**\r\n&lt;br/&gt;`java` file error:&lt;br/&gt;\r\n[![Java File Error][1]][1]\r\n&lt;br/&gt;&lt;br/&gt;`kotlin` file error:&lt;br/&gt;\r\n[![Kotlin File Error][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vWupu.png\r\n  [2]: https://i.stack.imgur.com/t3iaF.png","title":"Android Studio maven { url &#39;https://jitpack.io&#39; } Corrupts java &amp; kotlin files","body":"<p>I have to use <code>maven { url 'https://jitpack.io' }</code> to use the in-app payment library.\n<br/>But when I add <code>maven { url 'https://jitpack.io' }</code> to <code>repositories</code> in <code>build.gradle (module)</code>-&gt;<code>allprojects</code>, files <code>Java</code> and <code>Kotlin</code> get corrupted and give an error.\n<br/>My code after adding <code>maven { url 'https://jitpack.io' }</code> is as follows.</p>\n<p>build.gradle (project):</p>\n<pre class=\"lang-gradle prettyprint-override\"><code>plugins {\n    id 'com.android.application'\n    id 'kotlin-android'\n}\n\nandroid {\n    compileSdkVersion 32\n    buildToolsVersion &quot;31.0.0&quot;\n\n    defaultConfig {\n        applicationId &quot;ir.sazl.cardbank&quot;\n        minSdkVersion 21\n        targetSdkVersion 32\n        versionCode 12\n        versionName &quot;1.1.1&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation 'androidx.appcompat:appcompat:1.5.1'\n    implementation 'com.google.android.material:material:1.6.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n    implementation 'com.github.duanhong169:colorpicker:1.1.6'\n    implementation &quot;com.github.cafebazaar.Poolakey:poolakey:2.1.0&quot;\n}\n</code></pre>\n<p>build.gradle (module):</p>\n<pre class=\"lang-gradle prettyprint-override\"><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    ext {\n        kotlin_version = '1.5.31'\n    }\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath &quot;com.android.tools.build:gradle:4.2.1&quot;\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        jcenter() // Warning: this repository is going to shut down soon\n        maven { url 'https://jitpack.io' }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p><br/><br/>\n<strong>These are the errors:</strong>\n<br/><code>java</code> file error:<br/>\n<a href=\"https://i.stack.imgur.com/vWupu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vWupu.png\" alt=\"Java File Error\" /></a>\n<br/><br/><code>kotlin</code> file error:<br/>\n<a href=\"https://i.stack.imgur.com/t3iaF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t3iaF.png\" alt=\"Kotlin File Error\" /></a></p>\n"},{"tags":["java","openapi-generator","openapi-generator-cli"],"comments":[{"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"score":0,"creation_date":1686844273,"post_id":76483322,"comment_id":134857054,"body_markdown":"Is there a reason that you are using the cli in gradle instead of using the gradle plugin?","body":"Is there a reason that you are using the cli in gradle instead of using the gradle plugin?"},{"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"score":0,"creation_date":1686844409,"post_id":76483322,"comment_id":134857087,"body_markdown":"@tbatch I remember having a hard setting up configuration with gradle plugin so I went with cli","body":"@tbatch I remember having a hard setting up configuration with gradle plugin so I went with cli"}],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686843487,"creation_date":1686843487,"question_id":76483322,"body_markdown":"My current setup:\r\n\r\n```groovy\r\nconfigurations {\r\n    openApiGenerator\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-starter-openfeign:4.0.1&#39;\r\n    implementation &#39;javax.annotation:javax.annotation-api:1.3.2&#39;\r\n    openApiGenerator &#39;org.openapitools:openapi-generator-cli:6.6.0&#39;\r\n}\r\n\r\ndef openApiGeneratorConfig = {\r\n    classpath configurations.openApiGenerator\r\n    mainClass = &#39;org.openapitools.codegen.OpenAPIGenerator&#39;\r\n    args &#39;generate&#39;\r\n    args &#39;-g&#39;, &#39;java&#39;\r\n    args &#39;-o&#39;, &quot;$projectDir&quot;\r\n    args &#39;-t&#39;, &quot;$projectDir/src/main/resources/openapi-config/templates&quot;\r\n    args &quot;--additional-properties&quot;, &quot;library=feign,&quot; +\r\n            &quot;dateLibrary=java8,&quot; +\r\n            &quot;useBeanValidation=false,&quot; +\r\n            &quot;performBeanValidation=false&quot;\r\n}\r\n\r\ntask generateApi(type: JavaExec) {\r\n    configure openApiGeneratorConfig\r\n    systemProperties = [&#39;apis&#39;: &#39;&#39;, &#39;models&#39;: &#39;&#39;]\r\n    args &#39;-i&#39;, &#39;https://petstore3.swagger.io/api/v3/openapi.yaml&#39;\r\n    args &#39;-c&#39;, &quot;$projectDir/src/main/resources/openapi-config/pet.json&quot;\r\n}\r\n```\r\n\r\n\r\nI&#39;m setting both useBeanValidation and performBeanValidation to false yet I still get @javax.annotation.Nullable annotations in my model fields.","title":"OpenApi CodeGen validating fields despite setting performBeanValidation to false","body":"<p>My current setup:</p>\n<pre><code>configurations {\n    openApiGenerator\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.cloud:spring-cloud-starter-openfeign:4.0.1'\n    implementation 'javax.annotation:javax.annotation-api:1.3.2'\n    openApiGenerator 'org.openapitools:openapi-generator-cli:6.6.0'\n}\n\ndef openApiGeneratorConfig = {\n    classpath configurations.openApiGenerator\n    mainClass = 'org.openapitools.codegen.OpenAPIGenerator'\n    args 'generate'\n    args '-g', 'java'\n    args '-o', &quot;$projectDir&quot;\n    args '-t', &quot;$projectDir/src/main/resources/openapi-config/templates&quot;\n    args &quot;--additional-properties&quot;, &quot;library=feign,&quot; +\n            &quot;dateLibrary=java8,&quot; +\n            &quot;useBeanValidation=false,&quot; +\n            &quot;performBeanValidation=false&quot;\n}\n\ntask generateApi(type: JavaExec) {\n    configure openApiGeneratorConfig\n    systemProperties = ['apis': '', 'models': '']\n    args '-i', 'https://petstore3.swagger.io/api/v3/openapi.yaml'\n    args '-c', &quot;$projectDir/src/main/resources/openapi-config/pet.json&quot;\n}\n</code></pre>\n<p>I'm setting both useBeanValidation and performBeanValidation to false yet I still get @javax.annotation.Nullable annotations in my model fields.</p>\n"},{"tags":["java","spring-boot","mockito","junit5"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1686831426,"post_id":76482332,"comment_id":134855247,"body_markdown":"You don&#39;t assert anything on the fetched books, only the size of the collection. All your other asserts are on your created list of Books not BookDtos.","body":"You don&#39;t assert anything on the fetched books, only the size of the collection. All your other asserts are on your created list of Books not BookDtos."},{"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"score":0,"creation_date":1686833614,"post_id":76482332,"comment_id":134855772,"body_markdown":"@M.Deinum Thanks! Could you please see my updated answer ?","body":"@M.Deinum Thanks! Could you please see my updated answer ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686833853,"post_id":76482332,"comment_id":134855826,"body_markdown":"Which is what you wanted... You will get a list with 3 elements, 1 book and 2 `null` elements. Hence your assertions will fail.","body":"Which is what you wanted... You will get a list with 3 elements, 1 book and 2 <code>null</code> elements. Hence your assertions will fail."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1686833970,"post_id":76482332,"comment_id":134855856,"body_markdown":"in the code you posted, I only see `Mockito.doReturn(bookDtos.get(2)...` as a comment. What you have really configured is `Mockito.when(mapper.map(book, BookDto.class)).thenReturn(bookDtos.get(0), bookDtos.get(1), bookDtos.get(2));`","body":"in the code you posted, I only see <code>Mockito.doReturn(bookDtos.get(2)...</code> as a comment. What you have really configured is <code>Mockito.when(mapper.map(book, BookDto.class)).thenReturn(bookDtos.get(0), bookDtos.get(1), bookDtos.get(2));</code>"},{"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"score":0,"creation_date":1686843282,"post_id":76482332,"comment_id":134856899,"body_markdown":"Thanks guys, could you please tell if there is better way, to not have to write the same when statement 3 times ?","body":"Thanks guys, could you please tell if there is better way, to not have to write the same when statement 3 times ?"}],"answers":[{"tags":[],"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686843072,"creation_date":1686843072,"answer_id":76483289,"question_id":76482332,"body_markdown":"Thanks for comments, indeeed the problem was with my misunderstanding of mockito.\r\n\r\nHere is the fixed test which is now working as I expected.\r\n\r\n    @Test\r\n    public void testFetchAllBooks() {\r\n        Mockito.doReturn(bookDtos.get(0))\r\n                .when(mapper).map(books.get(0), BookDto.class);\r\n        Mockito.doReturn(bookDtos.get(1))\r\n                .when(mapper).map(books.get(1), BookDto.class);\r\n        Mockito.doReturn(bookDtos.get(2))\r\n                .when(mapper).map(books.get(2), BookDto.class);\r\n        Mockito.doReturn(books)\r\n                .when(bookRepository).findAll();\r\n        List&lt;BookDto&gt; fetchedBooks = bookService.fetchAllBooks();\r\n        assertThat(fetchedBooks.size()).isEqualTo(3);\r\n        assertThat(fetchedBooks.get(0))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Lord of the Rings&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1951)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Trilogy&quot;);\r\n        assertThat(fetchedBooks.get(1))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;Frank Herbert&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1960)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Part I&quot;);\r\n        assertThat(fetchedBooks.get(2))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Hobbit&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1947)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Story&quot;);\r\n    }","title":"Why my Service unit test using mockito and model mapper is not failing?","body":"<p>Thanks for comments, indeeed the problem was with my misunderstanding of mockito.</p>\n<p>Here is the fixed test which is now working as I expected.</p>\n<pre><code>@Test\npublic void testFetchAllBooks() {\n    Mockito.doReturn(bookDtos.get(0))\n            .when(mapper).map(books.get(0), BookDto.class);\n    Mockito.doReturn(bookDtos.get(1))\n            .when(mapper).map(books.get(1), BookDto.class);\n    Mockito.doReturn(bookDtos.get(2))\n            .when(mapper).map(books.get(2), BookDto.class);\n    Mockito.doReturn(books)\n            .when(bookRepository).findAll();\n    List&lt;BookDto&gt; fetchedBooks = bookService.fetchAllBooks();\n    assertThat(fetchedBooks.size()).isEqualTo(3);\n    assertThat(fetchedBooks.get(0))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Lord of the Rings&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1951)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Trilogy&quot;);\n    assertThat(fetchedBooks.get(1))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;Frank Herbert&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1960)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Part I&quot;);\n    assertThat(fetchedBooks.get(2))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Hobbit&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1947)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Story&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76483289,"answer_count":1,"score":0,"last_activity_date":1686843072,"creation_date":1686831134,"question_id":76482332,"body_markdown":"I am quite new to Spring and Mockito and I am trapped in one tutorial.\r\nI have a simple service which is fetching books from repository\r\n\r\n    @Service\r\n    public class BookService {\r\n    \r\n        private  BookRepository bookRepository;\r\n        private  ModelMapper modelMapper;\r\n\r\n        public BookService(BookRepository bookRepository, ModelMapper modelMapper) {\r\n            this.bookRepository = bookRepository;\r\n            this.modelMapper = modelMapper;\r\n        }\r\n    \r\n        public List&lt;BookDto&gt; fetchAllBooks() {\r\n            List&lt;Book&gt; books = bookRepository.findAll();\r\n            return books.stream()\r\n                .map(convertBookModelToBookDto())\r\n                .collect(Collectors.toList());\r\n        }\r\n    \r\n        private Function&lt;Book, BookDto&gt; convertBookModelToBookDto() {\r\n            return book -&gt; modelMapper.map(book, BookDto.class);\r\n        }\r\n    }\r\n\r\nThen I have a simple unit test for that service, with just one test\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class BookServiceTest {\r\n    \r\n    @InjectMocks\r\n    private BookService bookService;\r\n    \r\n    @Mock\r\n    private BookRepository bookRepository;\r\n    \r\n    @Mock\r\n    private ModelMapper mapper;\r\n    \r\n    private List&lt;Book&gt; books;\r\n    private List&lt;BookDto&gt; bookDtos;\r\n    \r\n    @BeforeEach\r\n    public void setUp() {\r\n        Book book = getBook(&quot;Lord of the Rings&quot;, &quot;J.R.R. Tolkien&quot;, 1951, &quot;Trilogy&quot;);\r\n        Book book2 = getBook(&quot;Dune&quot;, &quot;Frank Herbert&quot;, 1960, &quot;Part I&quot;);\r\n        Book book3 = getBook(&quot;Hobbit&quot;, &quot;J.R.R. Tolkien&quot;, 1947, &quot;Story&quot;);\r\n        books = new ArrayList&lt;&gt;();\r\n        books.add(book);\r\n        books.add(book2);\r\n        books.add(book3);\r\n        \r\n        BookDto bookDto = getBookDto(&quot;Lord of the Rings&quot;, &quot;J.R.R. Tolkien&quot;, 1951, &quot;Trilogy&quot;);\r\n        BookDto bookDto2 = getBookDto(&quot;Dune&quot;, &quot;Frank Herbert&quot;, 1960, &quot;Part I&quot;);\r\n        BookDto bookDto3 = getBookDto(&quot;Hobbit&quot;, &quot;J.R.R. Tolkien&quot;, 1947, &quot;Story&quot;);\r\n        bookDtos = new ArrayList&lt;&gt;();\r\n        bookDtos.add(bookDto);\r\n        bookDtos.add(bookDto2);\r\n        bookDtos.add(bookDto3);\r\n        \r\n        MockitoAnnotations.openMocks(this);\r\n    }\r\n\r\n    /**\r\n     * Test of fetchAllBooks method, of class BookService.\r\n     */\r\n    @Test\r\n    public void testFetchAllBooks() {\r\n        Book book = books.get(0);\r\n        // Mockito.doReturn(bookDtos.get(2)).when(mapper).map(book, BookDto.class);\r\n        // Mockito.doReturn(books).when(bookRepository).findAll();\r\n        Mockito.when(bookRepository.findAll()).thenReturn(books);\r\n        Mockito.when(mapper.map(book, BookDto.class))\r\n            .thenReturn(bookDtos.get(0), bookDtos.get(1), bookDtos.get(2));\r\n        List&lt;BookDto&gt; fetchedBooks = bookService.fetchAllBooks();\r\n        assertThat(fetchedBooks.size()).isEqualTo(3);\r\n        assertThat(fetchedBooks.get(0))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Lord of the Rings&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1951)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Trilogy&quot;);\r\n        assertThat(fetchedBooks.get(1))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;Frank Herbert&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1960)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Part I&quot;);\r\n        assertThat(fetchedBooks.get(2))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Hobbit&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1947)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Story&quot;);\r\n    }\r\n    \r\n    private Book getBook(String title, String author, int year, String description) {\r\n        return Book.builder()\r\n                .author(author)\r\n                .title(title)\r\n                .releaseYear(year)\r\n                .description(description)\r\n                .build();\r\n    }\r\n    \r\n    private BookDto getBookDto(String title, String author, int year, String description) {\r\n        return BookDto.builder()\r\n                .author(author)\r\n                .title(title)\r\n                .releaseYear(year)\r\n                .description(description)\r\n                .build();\r\n    }\r\n    }\r\n\r\nThis is my configuration for model mapper\r\n\r\n    @Configuration\r\n    public class ModelMapperConfiguration {\r\n    \r\n    @Bean\r\n    public ModelMapper modelMapper() {\r\n        return new ModelMapper();\r\n    }\r\n    }\r\n\r\nThis is my Book entity class\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name = &quot;books&quot;)\r\n    public class Book implements Serializable {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(columnDefinition = &quot;NUMERIC(19,0)&quot;)\r\n    private Long id;\r\n    \r\n    @Column(name = &quot;title&quot;, nullable = false, unique = true)\r\n    private String title;\r\n    \r\n    @Column(name = &quot;description&quot;, nullable = false)\r\n    private String description;\r\n    \r\n    @Column(name = &quot;author&quot;, nullable = false)\r\n    private String author;\r\n    \r\n    @Column(name = &quot;release_year&quot;, nullable = false)\r\n    private Integer releaseYear;\r\n    }\r\n\r\nThis is my BookDto class\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class BookDto {\r\n    \r\n    private Long id;\r\n    \r\n    private String title;\r\n    \r\n    private String description;\r\n    \r\n    private String author;\r\n    \r\n    private Integer releaseYear;\r\n    }\r\n\r\nI dont know why my unit test is not failing, as it should because of this line\r\n\r\n    Mockito.doReturn(bookDtos.get(2)).when(mapper).map(book, BookDto.class);\r\n\r\nbecause it should return the third book dto, for each of the fetched books, so the assertions regarding the first and second fetched books should fail...\r\n\r\nI dont know what I am missing here.\r\n\r\nSpring Boot 2.7.12\r\nMockito 5.3.1\r\nAssertj 3.24.2\r\nModel Mapper 3.1.1\r\nJUnit 5\r\nJava 17\r\n\r\n\r\n**Edit 1**\r\n\r\nIn the assertions of books fetched I was using books, not fetchedBooks.\r\n\r\nBut now get following error when run test:\r\n\r\n    java.lang.AssertionError: Expecting actual not to be null\r\n\r\nat this line:\r\n\r\n    .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)","title":"Why my Service unit test using mockito and model mapper is not failing?","body":"<p>I am quite new to Spring and Mockito and I am trapped in one tutorial.\nI have a simple service which is fetching books from repository</p>\n<pre><code>@Service\npublic class BookService {\n\n    private  BookRepository bookRepository;\n    private  ModelMapper modelMapper;\n\n    public BookService(BookRepository bookRepository, ModelMapper modelMapper) {\n        this.bookRepository = bookRepository;\n        this.modelMapper = modelMapper;\n    }\n\n    public List&lt;BookDto&gt; fetchAllBooks() {\n        List&lt;Book&gt; books = bookRepository.findAll();\n        return books.stream()\n            .map(convertBookModelToBookDto())\n            .collect(Collectors.toList());\n    }\n\n    private Function&lt;Book, BookDto&gt; convertBookModelToBookDto() {\n        return book -&gt; modelMapper.map(book, BookDto.class);\n    }\n}\n</code></pre>\n<p>Then I have a simple unit test for that service, with just one test</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class BookServiceTest {\n\n@InjectMocks\nprivate BookService bookService;\n\n@Mock\nprivate BookRepository bookRepository;\n\n@Mock\nprivate ModelMapper mapper;\n\nprivate List&lt;Book&gt; books;\nprivate List&lt;BookDto&gt; bookDtos;\n\n@BeforeEach\npublic void setUp() {\n    Book book = getBook(&quot;Lord of the Rings&quot;, &quot;J.R.R. Tolkien&quot;, 1951, &quot;Trilogy&quot;);\n    Book book2 = getBook(&quot;Dune&quot;, &quot;Frank Herbert&quot;, 1960, &quot;Part I&quot;);\n    Book book3 = getBook(&quot;Hobbit&quot;, &quot;J.R.R. Tolkien&quot;, 1947, &quot;Story&quot;);\n    books = new ArrayList&lt;&gt;();\n    books.add(book);\n    books.add(book2);\n    books.add(book3);\n    \n    BookDto bookDto = getBookDto(&quot;Lord of the Rings&quot;, &quot;J.R.R. Tolkien&quot;, 1951, &quot;Trilogy&quot;);\n    BookDto bookDto2 = getBookDto(&quot;Dune&quot;, &quot;Frank Herbert&quot;, 1960, &quot;Part I&quot;);\n    BookDto bookDto3 = getBookDto(&quot;Hobbit&quot;, &quot;J.R.R. Tolkien&quot;, 1947, &quot;Story&quot;);\n    bookDtos = new ArrayList&lt;&gt;();\n    bookDtos.add(bookDto);\n    bookDtos.add(bookDto2);\n    bookDtos.add(bookDto3);\n    \n    MockitoAnnotations.openMocks(this);\n}\n\n/**\n * Test of fetchAllBooks method, of class BookService.\n */\n@Test\npublic void testFetchAllBooks() {\n    Book book = books.get(0);\n    // Mockito.doReturn(bookDtos.get(2)).when(mapper).map(book, BookDto.class);\n    // Mockito.doReturn(books).when(bookRepository).findAll();\n    Mockito.when(bookRepository.findAll()).thenReturn(books);\n    Mockito.when(mapper.map(book, BookDto.class))\n        .thenReturn(bookDtos.get(0), bookDtos.get(1), bookDtos.get(2));\n    List&lt;BookDto&gt; fetchedBooks = bookService.fetchAllBooks();\n    assertThat(fetchedBooks.size()).isEqualTo(3);\n    assertThat(fetchedBooks.get(0))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Lord of the Rings&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1951)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Trilogy&quot;);\n    assertThat(fetchedBooks.get(1))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;Frank Herbert&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1960)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Part I&quot;);\n    assertThat(fetchedBooks.get(2))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Hobbit&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1947)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Story&quot;);\n}\n\nprivate Book getBook(String title, String author, int year, String description) {\n    return Book.builder()\n            .author(author)\n            .title(title)\n            .releaseYear(year)\n            .description(description)\n            .build();\n}\n\nprivate BookDto getBookDto(String title, String author, int year, String description) {\n    return BookDto.builder()\n            .author(author)\n            .title(title)\n            .releaseYear(year)\n            .description(description)\n            .build();\n}\n}\n</code></pre>\n<p>This is my configuration for model mapper</p>\n<pre><code>@Configuration\npublic class ModelMapperConfiguration {\n\n@Bean\npublic ModelMapper modelMapper() {\n    return new ModelMapper();\n}\n}\n</code></pre>\n<p>This is my Book entity class</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;books&quot;)\npublic class Book implements Serializable {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(columnDefinition = &quot;NUMERIC(19,0)&quot;)\nprivate Long id;\n\n@Column(name = &quot;title&quot;, nullable = false, unique = true)\nprivate String title;\n\n@Column(name = &quot;description&quot;, nullable = false)\nprivate String description;\n\n@Column(name = &quot;author&quot;, nullable = false)\nprivate String author;\n\n@Column(name = &quot;release_year&quot;, nullable = false)\nprivate Integer releaseYear;\n}\n</code></pre>\n<p>This is my BookDto class</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class BookDto {\n\nprivate Long id;\n\nprivate String title;\n\nprivate String description;\n\nprivate String author;\n\nprivate Integer releaseYear;\n}\n</code></pre>\n<p>I dont know why my unit test is not failing, as it should because of this line</p>\n<pre><code>Mockito.doReturn(bookDtos.get(2)).when(mapper).map(book, BookDto.class);\n</code></pre>\n<p>because it should return the third book dto, for each of the fetched books, so the assertions regarding the first and second fetched books should fail...</p>\n<p>I dont know what I am missing here.</p>\n<p>Spring Boot 2.7.12\nMockito 5.3.1\nAssertj 3.24.2\nModel Mapper 3.1.1\nJUnit 5\nJava 17</p>\n<p><strong>Edit 1</strong></p>\n<p>In the assertions of books fetched I was using books, not fetchedBooks.</p>\n<p>But now get following error when run test:</p>\n<pre><code>java.lang.AssertionError: Expecting actual not to be null\n</code></pre>\n<p>at this line:</p>\n<pre><code>.hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\n</code></pre>\n"},{"tags":["java","spring-boot","jersey","junit5","jersey-client"],"owner":{"account_id":7372006,"reputation":473,"user_id":5611906,"accept_rate":100,"display_name":"TCH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686843046,"creation_date":1686837390,"question_id":76483235,"body_markdown":"## Context\r\nI want to test authorizations on Jersey resources in my application. I use JUnit5 and SpringBoot.   \r\nAll the Jersey resources tests extends a JerseyConfiguration class which has a SpringBoot configuration (see below) to create/mock all application services used in the tests. \r\n  \r\nThe &quot;success&quot; cases of my tests work fine, but I expect some of my test to fail with a response 403, because the method called by `@PreAuthorize()` should return false.    \r\nHowever, these fail cases return a response 200. With the debugger, I noticed that the method in `@PreAuthorize()` **is not called at all**, which explains the result 200.    \r\n\r\nSo I wonder if I forgot something in the configuration and how I can make the `@PreAuthorize()` method to be called in the tests\r\n\r\n## Files\r\n \r\n*MyResourceTest.java*  \r\n```java\r\n    public class MyResourceTest extends JerseyConfiguration {\r\n        // some  @Autowired services\r\n    }\r\n```\r\n\r\n*JerseyConfiguration.java*\r\n```java\r\n    public abstract class JerseyConfiguration extends FastJerseyTest {\r\n    \r\n        @Override\r\n        protected void configure(final ResourceConfig config) {\r\n            config.register(AuthenticationExceptionMapperProvider.class);\r\n            config.register(AccessDeniedExceptionMapperProvider.class);\r\n            config.register(JacksonObjectMapperProvider.class);\r\n            config.packages(&quot;jersey.resources.package&quot;); // this creates instances for resources\r\n            config.property(\r\n                &quot;contextConfig&quot;,\r\n                new AnnotationConfigApplicationContext(SpringTestConfig.class)\r\n            );\r\n        }\r\n\r\n        @Override\r\n        protected void configureClient(final ClientConfig config) {\r\n            config.register(JacksonObjectMapperProvider.class);\r\n            config.register(MultiPartFeature.class);\r\n        }\r\n    }\r\n```\r\n\r\n*SpringTestConfig.java*    \r\nIn security.components.package, there are all the `@Component` that implements the methods used in `@PreAuthorize` (like `CanSave.java`, see below)\r\n```java\r\n        @ExtendWith(SpringExtension.class)\r\n        @ComponentScan(basePackages = {&quot;security.components.package&quot;})\r\n        @PropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\n        @Import(SecurityConfiguration.class)\r\n        public class SpringTestConfig {\r\n            ... some mocks\r\n        }\r\n```\r\n\r\n*MyResource.java*\r\n```java\r\n@Component\r\n@Path(&quot;/api&quot;)\r\n@Produces(ResourceConstants.JSON_UTF8)\r\n@Consumes(ResourceConstants.JSON_UTF8)\r\npublic class MyResource {\r\n\r\n    @Autowired\r\n    private MyService service;\r\n\r\n    @POST\r\n    @Path(&quot;/save&quot;)\r\n    @PreAuthorize(&quot;@canSave.checkRole(#id)&quot;)\r\n    public List&lt;Entity&gt; save(@QueryParam(&quot;id&quot;) final Integer id) {\r\n        return this.service.saveBatch(id);\r\n    }\r\n}\r\n```\r\n\r\n*CanSave.java*\r\n```java\r\n@Component(CanSave.NAME)\r\npublic class CanSave {\r\n\r\n    public static final String NAME = &quot;canSave&quot;;\r\n\r\n    public boolean checkRole(final Integer id) {\r\n        // some check\r\n    }\r\n}\r\n```","title":"Test @PreAuthorize with Jersey Resources","body":"<h2>Context</h2>\n<p>I want to test authorizations on Jersey resources in my application. I use JUnit5 and SpringBoot.<br />\nAll the Jersey resources tests extends a JerseyConfiguration class which has a SpringBoot configuration (see below) to create/mock all application services used in the tests.</p>\n<p>The &quot;success&quot; cases of my tests work fine, but I expect some of my test to fail with a response 403, because the method called by <code>@PreAuthorize()</code> should return false.<br />\nHowever, these fail cases return a response 200. With the debugger, I noticed that the method in <code>@PreAuthorize()</code> <strong>is not called at all</strong>, which explains the result 200.</p>\n<p>So I wonder if I forgot something in the configuration and how I can make the <code>@PreAuthorize()</code> method to be called in the tests</p>\n<h2>Files</h2>\n<p><em>MyResourceTest.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class MyResourceTest extends JerseyConfiguration {\n        // some  @Autowired services\n    }\n</code></pre>\n<p><em>JerseyConfiguration.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public abstract class JerseyConfiguration extends FastJerseyTest {\n    \n        @Override\n        protected void configure(final ResourceConfig config) {\n            config.register(AuthenticationExceptionMapperProvider.class);\n            config.register(AccessDeniedExceptionMapperProvider.class);\n            config.register(JacksonObjectMapperProvider.class);\n            config.packages(&quot;jersey.resources.package&quot;); // this creates instances for resources\n            config.property(\n                &quot;contextConfig&quot;,\n                new AnnotationConfigApplicationContext(SpringTestConfig.class)\n            );\n        }\n\n        @Override\n        protected void configureClient(final ClientConfig config) {\n            config.register(JacksonObjectMapperProvider.class);\n            config.register(MultiPartFeature.class);\n        }\n    }\n</code></pre>\n<p><em>SpringTestConfig.java</em><br />\nIn security.components.package, there are all the <code>@Component</code> that implements the methods used in <code>@PreAuthorize</code> (like <code>CanSave.java</code>, see below)</p>\n<pre class=\"lang-java prettyprint-override\"><code>        @ExtendWith(SpringExtension.class)\n        @ComponentScan(basePackages = {&quot;security.components.package&quot;})\n        @PropertySource(locations = &quot;classpath:application-test.properties&quot;)\n        @Import(SecurityConfiguration.class)\n        public class SpringTestConfig {\n            ... some mocks\n        }\n</code></pre>\n<p><em>MyResource.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Path(&quot;/api&quot;)\n@Produces(ResourceConstants.JSON_UTF8)\n@Consumes(ResourceConstants.JSON_UTF8)\npublic class MyResource {\n\n    @Autowired\n    private MyService service;\n\n    @POST\n    @Path(&quot;/save&quot;)\n    @PreAuthorize(&quot;@canSave.checkRole(#id)&quot;)\n    public List&lt;Entity&gt; save(@QueryParam(&quot;id&quot;) final Integer id) {\n        return this.service.saveBatch(id);\n    }\n}\n</code></pre>\n<p><em>CanSave.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component(CanSave.NAME)\npublic class CanSave {\n\n    public static final String NAME = &quot;canSave&quot;;\n\n    public boolean checkRole(final Integer id) {\n        // some check\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","integration-testing","maven-module"],"comments":[{"owner":{"account_id":473079,"reputation":149,"user_id":881982,"display_name":"Kaspars Rinkevics"},"score":0,"creation_date":1686843455,"post_id":76483276,"comment_id":134856922,"body_markdown":"One option could be to create a script that wolud first build Module A and then execute integration tests in Module B.","body":"One option could be to create a script that wolud first build Module A and then execute integration tests in Module B."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686845814,"post_id":76483276,"comment_id":134857394,"body_markdown":"First you have to define the dependencies correctly ... then maven will automatically package module-A before running module-B ... Why are the integration tests in module-B  instead of A? Can you give more detailed information on that ... And what kind of functionally needs really to execute the jar ? Are usual unit- integration tests are not enough?","body":"First you have to define the dependencies correctly ... then maven will automatically package module-A before running module-B ... Why are the integration tests in module-B  instead of A? Can you give more detailed information on that ... And what kind of functionally needs really to execute the jar ? Are usual unit- integration tests are not enough?"},{"owner":{"account_id":101780,"reputation":2397,"user_id":273593,"accept_rate":38,"display_name":"Vito De Tullio"},"score":0,"creation_date":1686901835,"post_id":76483276,"comment_id":134864768,"body_markdown":"ok, then how can I express the dependencies correctly? again: if I build module-A I get and executable jar. In module-B I want to *use* the executable jar in my tests. Moreover I want to be able to update the source code of module-A, run the tests in module-B and then mvn should automatically rebuild the executable jar.","body":"ok, then how can I express the dependencies correctly? again: if I build module-A I get and executable jar. In module-B I want to <i>use</i> the executable jar in my tests. Moreover I want to be able to update the source code of module-A, run the tests in module-B and then mvn should automatically rebuild the executable jar."}],"owner":{"account_id":101780,"reputation":2397,"user_id":273593,"accept_rate":38,"display_name":"Vito De Tullio"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1686838233,"creation_date":1686838233,"question_id":76483276,"body_markdown":"I have a multi-module maven project.\r\none of the modules (module-A) let me create an executable jar. This jar is normally executed from a third party application and communicate via stdin/stdout.\r\n\r\na second one (module-B) is an integration test. In this module I want to verify that the third party process can communicate succesfully and my jar can behave in the expected way.\r\n\r\nat the moment, if I do some changes to module-A source code, I need to firstly `mvn package` the module to get the new jar and then I can run the tests in module-B.\r\n\r\nwhat is the best way to tell module-B to firstly package module-A before running the tests?\r\n","title":"package a module before integration tests","body":"<p>I have a multi-module maven project.\none of the modules (module-A) let me create an executable jar. This jar is normally executed from a third party application and communicate via stdin/stdout.</p>\n<p>a second one (module-B) is an integration test. In this module I want to verify that the third party process can communicate succesfully and my jar can behave in the expected way.</p>\n<p>at the moment, if I do some changes to module-A source code, I need to firstly <code>mvn package</code> the module to get the new jar and then I can run the tests in module-B.</p>\n<p>what is the best way to tell module-B to firstly package module-A before running the tests?</p>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":7788110,"reputation":1429,"user_id":6306585,"accept_rate":60,"display_name":"Shakirov Ramil"},"score":0,"creation_date":1686830752,"post_id":76482244,"comment_id":134855078,"body_markdown":"what if use nativeQuery = true?","body":"what if use nativeQuery = true?"},{"owner":{"account_id":1192733,"reputation":1507,"user_id":1165160,"accept_rate":92,"display_name":"King Midas"},"score":0,"creation_date":1686835794,"post_id":76482244,"comment_id":134856321,"body_markdown":"I would like to avoid using native queries as I use different sql engines on different scenarios.","body":"I would like to avoid using native queries as I use different sql engines on different scenarios."}],"answers":[{"tags":[],"owner":{"account_id":1192733,"reputation":1507,"user_id":1165160,"accept_rate":92,"display_name":"King Midas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686837701,"creation_date":1686837701,"answer_id":76483264,"question_id":76482244,"body_markdown":"Seems that the issue is related to the `:types IS NULL` part. Removing it make it works perfectly:\r\n\r\n```\r\n @Query(&quot;&quot;&quot;\r\n        SELECT COUNT(a) FROM MyEntity e WHERE\r\n        e.type IN :types\r\n        &quot;&quot;&quot;)\r\n    long countByTypesIn(@Param(&quot;types&quot;) List&lt;Type&gt; types);\r\n}\r\n```\r\n\r\n","title":"Spring JPA issue with IN operator","body":"<p>Seems that the issue is related to the <code>:types IS NULL</code> part. Removing it make it works perfectly:</p>\n<pre><code> @Query(&quot;&quot;&quot;\n        SELECT COUNT(a) FROM MyEntity e WHERE\n        e.type IN :types\n        &quot;&quot;&quot;)\n    long countByTypesIn(@Param(&quot;types&quot;) List&lt;Type&gt; types);\n}\n</code></pre>\n"}],"owner":{"account_id":1192733,"reputation":1507,"user_id":1165160,"accept_rate":92,"display_name":"King Midas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76483264,"answer_count":1,"score":2,"last_activity_date":1686837701,"creation_date":1686830381,"question_id":76482244,"body_markdown":"I have a very simple query. It is not the original one, but I can reproduce the issue with it and is simpler to understand. \r\n\r\n    @Repository\r\n    public interface MyRepository extends JpaRepository&lt;MyEntity, Long&gt; {\r\n\r\n     @Query(&quot;&quot;&quot;\r\n            SELECT COUNT(a) FROM MyEntity e WHERE\r\n            (:types IS NULL OR e.type IN :types)\r\n            &quot;&quot;&quot;)\r\n        long countByTypesIn(@Param(&quot;types&quot;) List&lt;Type&gt; types);\r\n    }\r\n\r\nThe idea here is, that types list is null, is not used on the where clause, and if the list is populated, only filter by the elements present on the list. \r\n\r\nThe entity has apart from other columns:\r\n\r\n```\r\n@Entity\r\npublic class MyEntity {\r\n    [...]\r\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\r\n    @JoinColumn(name = &quot;my_type&quot;)\r\n    private Type type;\r\n    [...]\r\n}\r\n```\r\n\r\n\r\nThen I create a test, where I call the repository for this count:\r\n\r\n```          \r\nAssert.assertEquals(myRepository.countByTypesIn(Collections.singletonList(type)), 1);\r\n```\r\n\r\n\r\nThe problem I have here, is that sometimes the test is launching the next exception:\r\n\r\n```\r\njava.lang.AssertionError: Unexpected value type (expected : java.lang.Long) : [myType (456)] (java.util.Collections$SingletonList)\r\n\tat org.hibernate.sql.exec.internal.JdbcParameterBindingImpl.&lt;init&gt;(JdbcParameterBindingImpl.java:23)\r\n```\r\nClass Type overrides `toString()`to show exactly the name of the type and an ID. \r\n\r\nThat as far I can understand, means that is expecting a long in param `:types` but receives a collection. But it is a collection, and must be a collection for a `IN` operator. I do not understand why is looking for a Long\r\n\r\nAnd the worst, is only failing the 50% of the times. Sometimes yes, sometimes not. I have debugged, and the hibernate class `JdbcParameterBindingImpl` is receiving different parameters in some cases. But the test is exactly the same. ","title":"Spring JPA issue with IN operator","body":"<p>I have a very simple query. It is not the original one, but I can reproduce the issue with it and is simpler to understand.</p>\n<pre><code>@Repository\npublic interface MyRepository extends JpaRepository&lt;MyEntity, Long&gt; {\n\n @Query(&quot;&quot;&quot;\n        SELECT COUNT(a) FROM MyEntity e WHERE\n        (:types IS NULL OR e.type IN :types)\n        &quot;&quot;&quot;)\n    long countByTypesIn(@Param(&quot;types&quot;) List&lt;Type&gt; types);\n}\n</code></pre>\n<p>The idea here is, that types list is null, is not used on the where clause, and if the list is populated, only filter by the elements present on the list.</p>\n<p>The entity has apart from other columns:</p>\n<pre><code>@Entity\npublic class MyEntity {\n    [...]\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\n    @JoinColumn(name = &quot;my_type&quot;)\n    private Type type;\n    [...]\n}\n</code></pre>\n<p>Then I create a test, where I call the repository for this count:</p>\n<pre><code>Assert.assertEquals(myRepository.countByTypesIn(Collections.singletonList(type)), 1);\n</code></pre>\n<p>The problem I have here, is that sometimes the test is launching the next exception:</p>\n<pre><code>java.lang.AssertionError: Unexpected value type (expected : java.lang.Long) : [myType (456)] (java.util.Collections$SingletonList)\n    at org.hibernate.sql.exec.internal.JdbcParameterBindingImpl.&lt;init&gt;(JdbcParameterBindingImpl.java:23)\n</code></pre>\n<p>Class Type overrides <code>toString()</code>to show exactly the name of the type and an ID.</p>\n<p>That as far I can understand, means that is expecting a long in param <code>:types</code> but receives a collection. But it is a collection, and must be a collection for a <code>IN</code> operator. I do not understand why is looking for a Long</p>\n<p>And the worst, is only failing the 50% of the times. Sometimes yes, sometimes not. I have debugged, and the hibernate class <code>JdbcParameterBindingImpl</code> is receiving different parameters in some cases. But the test is exactly the same.</p>\n"},{"tags":["java","android","overlay"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686837380,"creation_date":1686837380,"answer_id":76483232,"question_id":76482486,"body_markdown":"           InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\n        imm.showSoftInputFromInputMethod(edittext1.getApplicationWindowToken(), 1);\r\n        imm.showSoftInput(edittext1, InputMethodManager.SHOW_IMPLICIT);\r\n        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);\r\n    \r\n\r\nYou don&#39;t need any of that.  Setting the focus is sufficient.  And in particular the 2nd and 4th lines here are wrong-  both of them will show the keyboard, but not hook it up properly to the InputConnection and thus lead to a keyboard that appears but does nothing.\r\n","title":"Keyboard not focusing in overlay EditText. Keyboard is opening as expected but it is not working","body":"<pre><code>       InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n    imm.showSoftInputFromInputMethod(edittext1.getApplicationWindowToken(), 1);\n    imm.showSoftInput(edittext1, InputMethodManager.SHOW_IMPLICIT);\n    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);\n</code></pre>\n<p>You don't need any of that.  Setting the focus is sufficient.  And in particular the 2nd and 4th lines here are wrong-  both of them will show the keyboard, but not hook it up properly to the InputConnection and thus lead to a keyboard that appears but does nothing.</p>\n"}],"owner":{"account_id":26128294,"reputation":47,"user_id":19819407,"display_name":"Prokash Dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76483232,"answer_count":1,"score":1,"last_activity_date":1686837380,"creation_date":1686832164,"question_id":76482486,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dqXPG.png\r\n\r\nwhen I type anything on keyboard then google opening. Not able to type in this EditText view.\r\nHere I have created overlay services. and here I have written the codes for force open soft Keyboard logic.\r\nfloatingPointWidthService.java\r\n```\r\n public void onCreate() {\r\n        super.onCreate();\r\n        //init WindowManager\r\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\r\n        getWindowManagerDefaultDisplay();\r\n        //Init LayoutInflater\r\n        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);\r\n\r\n        addRemoveView(inflater);\r\n        addFloatingWidgetView(inflater);\r\n        implementClickListeners();\r\n        implementTouchListenerToFloatingWidgetView();\r\n        System.out.println(&quot;mFloatingWidgetView&quot; +mFloatingWidgetView);\r\n        expandedView = mFloatingWidgetView.findViewById(R.id.expanded_container);\r\n        expandedView.setVisibility(View.VISIBLE);//set large view open\r\n        edittext1 = mFloatingWidgetView.findViewById(R.id.floating_widget_title_label);\r\n        edittext1.requestFocus();\r\n        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\n        imm.showSoftInputFromInputMethod(edittext1.getApplicationWindowToken(), 1);\r\n        imm.showSoftInput(edittext1, InputMethodManager.SHOW_IMPLICIT);\r\n        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);\r\n    }\r\n\r\n```\r\nHere I have changes ```android:windowSoftInputMode=&quot;adjustPan&quot;``` \r\n  AndroidManifest.xml\r\n```\r\n&lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.ModFill&quot;\r\n        tools:targetApi=&quot;31&quot;\r\n        android:windowSoftInputMode=&quot;adjustPan&quot;// this is for overlayKeyBoard\r\n&gt;\r\n```\r\n\r\n\r\nThis is layout of overlay modal here I have added the EditText.\r\nfloating_width_layout.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n    &lt;!--   Root container of Floating Widget View  --&gt;\r\n    &lt;RelativeLayout\r\n        android:id=&quot;@+id/root_container&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n        &lt;!--  View while view is collapsed  --&gt;\r\n\r\n        &lt;RelativeLayout\r\n            android:id=&quot;@+id/collapse_view&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            android:visibility=&quot;visible&quot;&gt;\r\n\r\n            &lt;!--   ImageView of floating widget  --&gt;\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/collapsed_iv&quot;\r\n                android:layout_width=&quot;70dp&quot;\r\n                android:layout_height=&quot;70dp&quot;\r\n                android:layout_marginTop=&quot;8dp&quot;\r\n                android:src=&quot;@mipmap/ic_launcher_round&quot;\r\n                tools:ignore=&quot;ContentDescription&quot; /&gt;\r\n\r\n            &lt;!--   Close button to close Floating Widget View  --&gt;\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/close_floating_view&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginLeft=&quot;50dp&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;\r\n                android:background=&quot;@drawable/circle_shape&quot;\r\n                android:src=&quot;@drawable/ic_close_white_24dp&quot;\r\n                tools:ignore=&quot;ContentDescription&quot; /&gt;\r\n        &lt;/RelativeLayout&gt;\r\n\r\n        &lt;!--   View while view is expanded   --&gt;\r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/expanded_container&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;@android:color/white&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:padding=&quot;8dp&quot;\r\n            android:visibility=&quot;gone&quot;&gt;\r\n\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/floating_widget_image_view&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:src=&quot;@mipmap/ic_launcher&quot; /&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginLeft=&quot;5dp&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n\r\n                &lt;EditText\r\n                    android:id=&quot;@+id/floating_widget_title_label&quot;\r\n                    android:layout_width=&quot;120dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:gravity=&quot;center_vertical&quot;\r\n                    android:hint=&quot;Enter your comment&quot;\r\n                    android:textColor=&quot;@android:color/black&quot;\r\n                    android:textSize=&quot;14sp&quot; /&gt;\r\n\r\n            &lt;/LinearLayout&gt;\r\n\r\n            &lt;!--  ImageView to Close Expanded View  --&gt;\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/close_expanded_view&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:padding=&quot;10dp&quot;\r\n                android:src=&quot;@drawable/ic_close_black_24dp&quot; /&gt;\r\n\r\n            &lt;!--  ImageView to Open Activity  --&gt;\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/open_activity_button&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:padding=&quot;10dp&quot;\r\n                android:src=&quot;@drawable/ic_aspect_ratio_black_24dp&quot; /&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/RelativeLayout&gt;\r\n&lt;/FrameLayout&gt;\r\n```\r\nkeyboard is opening with last line ```imm.toggleSoftInput``` method. Please tell how to type text in this EditText.","title":"Keyboard not focusing in overlay EditText. Keyboard is opening as expected but it is not working","body":"<p><a href=\"https://i.stack.imgur.com/dqXPG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dqXPG.png\" alt=\"enter image description here\" /></a></p>\n<p>when I type anything on keyboard then google opening. Not able to type in this EditText view.\nHere I have created overlay services. and here I have written the codes for force open soft Keyboard logic.\nfloatingPointWidthService.java</p>\n<pre><code> public void onCreate() {\n        super.onCreate();\n        //init WindowManager\n        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\n        getWindowManagerDefaultDisplay();\n        //Init LayoutInflater\n        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);\n\n        addRemoveView(inflater);\n        addFloatingWidgetView(inflater);\n        implementClickListeners();\n        implementTouchListenerToFloatingWidgetView();\n        System.out.println(&quot;mFloatingWidgetView&quot; +mFloatingWidgetView);\n        expandedView = mFloatingWidgetView.findViewById(R.id.expanded_container);\n        expandedView.setVisibility(View.VISIBLE);//set large view open\n        edittext1 = mFloatingWidgetView.findViewById(R.id.floating_widget_title_label);\n        edittext1.requestFocus();\n        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n        imm.showSoftInputFromInputMethod(edittext1.getApplicationWindowToken(), 1);\n        imm.showSoftInput(edittext1, InputMethodManager.SHOW_IMPLICIT);\n        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);\n    }\n\n</code></pre>\n<p>Here I have changes <code>android:windowSoftInputMode=&quot;adjustPan&quot;</code>\nAndroidManifest.xml</p>\n<pre><code>&lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.ModFill&quot;\n        tools:targetApi=&quot;31&quot;\n        android:windowSoftInputMode=&quot;adjustPan&quot;// this is for overlayKeyBoard\n&gt;\n</code></pre>\n<p>This is layout of overlay modal here I have added the EditText.\nfloating_width_layout.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;!--   Root container of Floating Widget View  --&gt;\n    &lt;RelativeLayout\n        android:id=&quot;@+id/root_container&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n\n        &lt;!--  View while view is collapsed  --&gt;\n\n        &lt;RelativeLayout\n            android:id=&quot;@+id/collapse_view&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;vertical&quot;\n            android:visibility=&quot;visible&quot;&gt;\n\n            &lt;!--   ImageView of floating widget  --&gt;\n            &lt;ImageView\n                android:id=&quot;@+id/collapsed_iv&quot;\n                android:layout_width=&quot;70dp&quot;\n                android:layout_height=&quot;70dp&quot;\n                android:layout_marginTop=&quot;8dp&quot;\n                android:src=&quot;@mipmap/ic_launcher_round&quot;\n                tools:ignore=&quot;ContentDescription&quot; /&gt;\n\n            &lt;!--   Close button to close Floating Widget View  --&gt;\n            &lt;ImageView\n                android:id=&quot;@+id/close_floating_view&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginLeft=&quot;50dp&quot;\n                android:layout_marginTop=&quot;5dp&quot;\n                android:background=&quot;@drawable/circle_shape&quot;\n                android:src=&quot;@drawable/ic_close_white_24dp&quot;\n                tools:ignore=&quot;ContentDescription&quot; /&gt;\n        &lt;/RelativeLayout&gt;\n\n        &lt;!--   View while view is expanded   --&gt;\n        &lt;LinearLayout\n            android:id=&quot;@+id/expanded_container&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:background=&quot;@android:color/white&quot;\n            android:gravity=&quot;center&quot;\n            android:orientation=&quot;horizontal&quot;\n            android:padding=&quot;8dp&quot;\n            android:visibility=&quot;gone&quot;&gt;\n\n            &lt;ImageView\n                android:id=&quot;@+id/floating_widget_image_view&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:src=&quot;@mipmap/ic_launcher&quot; /&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginLeft=&quot;5dp&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;EditText\n                    android:id=&quot;@+id/floating_widget_title_label&quot;\n                    android:layout_width=&quot;120dp&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:gravity=&quot;center_vertical&quot;\n                    android:hint=&quot;Enter your comment&quot;\n                    android:textColor=&quot;@android:color/black&quot;\n                    android:textSize=&quot;14sp&quot; /&gt;\n\n            &lt;/LinearLayout&gt;\n\n            &lt;!--  ImageView to Close Expanded View  --&gt;\n            &lt;ImageView\n                android:id=&quot;@+id/close_expanded_view&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_weight=&quot;1&quot;\n                android:padding=&quot;10dp&quot;\n                android:src=&quot;@drawable/ic_close_black_24dp&quot; /&gt;\n\n            &lt;!--  ImageView to Open Activity  --&gt;\n            &lt;ImageView\n                android:id=&quot;@+id/open_activity_button&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_weight=&quot;1&quot;\n                android:padding=&quot;10dp&quot;\n                android:src=&quot;@drawable/ic_aspect_ratio_black_24dp&quot; /&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/RelativeLayout&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n<p>keyboard is opening with last line <code>imm.toggleSoftInput</code> method. Please tell how to type text in this EditText.</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686837337,"creation_date":1686837337,"answer_id":76483228,"question_id":76481597,"body_markdown":"This works as expected:\r\n\r\n```java\r\n@SpringBootApplication\r\npublic class So76481597Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(So76481597Application.class, args);\r\n\t}\r\n\r\n\t@KafkaListener(id = &quot;so76481597&quot;, topics = &quot;so76481597&quot;)\r\n\tvoid listen(String in, @Header(KafkaHeaders.DELIVERY_ATTEMPT) int del) {\r\n\t\tSystem.out.println(in + &quot;:&quot; + del);\r\n\t}\r\n\r\n\t@Bean\r\n\tNewTopic topic() {\r\n\t\treturn TopicBuilder.name(&quot;so76481597&quot;).partitions(1).replicas(1).build();\r\n\t}\r\n\r\n\t@Bean\r\n\tApplicationRunner runner(KafkaTemplate&lt;String, String&gt; template) {\r\n\t\treturn args -&gt; {\r\n\t\t\ttemplate.send(&quot;so76481597&quot;, &quot;foo&quot;);\r\n\t\t};\r\n\t}\r\n\r\n\t@Bean\r\n\tContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; containerCustomizer(\r\n\t\t\tConcurrentKafkaListenerContainerFactory&lt;String, Message&gt; factory) {\r\n\r\n\t\tContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; cust = container -&gt; {\r\n\t\t\tcontainer.getContainerProperties().setDeliveryAttemptHeader(true);\r\n\t\t};\r\n\t\tfactory.setContainerCustomizer(cust);\r\n\t\treturn cust;\r\n\t}\r\n\r\n}\r\n```\r\n\r\n```\r\nfoo:1\r\n```\r\n\r\nIf you can&#39;t figure it out, post an [MCRE](https://stackoverflow.com/help/minimal-reproducible-example) so I can see what you are doing wrong.","title":"MessageHandlingException: Missing header &#39;kafka_deliveryAttempt&#39; for method parameter type","body":"<p>This works as expected:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class So76481597Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(So76481597Application.class, args);\n    }\n\n    @KafkaListener(id = &quot;so76481597&quot;, topics = &quot;so76481597&quot;)\n    void listen(String in, @Header(KafkaHeaders.DELIVERY_ATTEMPT) int del) {\n        System.out.println(in + &quot;:&quot; + del);\n    }\n\n    @Bean\n    NewTopic topic() {\n        return TopicBuilder.name(&quot;so76481597&quot;).partitions(1).replicas(1).build();\n    }\n\n    @Bean\n    ApplicationRunner runner(KafkaTemplate&lt;String, String&gt; template) {\n        return args -&gt; {\n            template.send(&quot;so76481597&quot;, &quot;foo&quot;);\n        };\n    }\n\n    @Bean\n    ContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; containerCustomizer(\n            ConcurrentKafkaListenerContainerFactory&lt;String, Message&gt; factory) {\n\n        ContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; cust = container -&gt; {\n            container.getContainerProperties().setDeliveryAttemptHeader(true);\n        };\n        factory.setContainerCustomizer(cust);\n        return cust;\n    }\n\n}\n</code></pre>\n<pre><code>foo:1\n</code></pre>\n<p>If you can't figure it out, post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCRE</a> so I can see what you are doing wrong.</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686837351,"creation_date":1686824950,"question_id":76481597,"body_markdown":"I have a kafka listener with additional header KafkaHeaders.DELIVERY_ATTEMPT:\r\n\r\n    @KafkaListener(topics = &quot;$my_topic}&quot;, autoStartup = &quot;true&quot;)\r\n    public void listenForMessage(String message, @Header(KafkaHeaders.DELIVERY_ATTEMPT) int delivery) {\r\n        log.info(&quot;Message from kafka topic {}&quot;, message);\r\n        ...\r\n\r\n\r\nBased on documentation:\r\n\r\nhttps://docs.spring.io/spring-kafka/reference/html/#delivery-header\r\n\r\n&gt; When using @KafkaListener with the DefaultKafkaHeaderMapper or\r\n&gt; SimpleKafkaHeaderMapper, it can be obtained by adding\r\n&gt; @Header(KafkaHeaders.DELIVERY_ATTEMPT) int delivery as a parameter to\r\n&gt; the listener method.\r\n\r\nLooks like I&#39;ve done it.\r\n\r\nBut second step is not clear for me:\r\n\r\n&gt; To enable population of this header, set the container property\r\n&gt; deliveryAttemptHeader to true. It is disabled by default to avoid the\r\n&gt; (small) overhead of looking up the state for each record and adding\r\n&gt; the header.\r\n\r\n\r\nHow can I do it ?\r\n\r\nWithout second step I see the error:\r\n\r\n    org.springframework.kafka.listener.ListenerExecutionFailedException: Listener method could not be invoked with the incoming message\r\n    Endpoint handler details:\r\n    Method [public void ****.listenForMessage(java.lang.String,int)]\r\n    Bean [****MessageConsumer$$EnhancerBySpringCGLIB$$c2e2a4bd@3cc101bf]; nested exception is org.springframework.messaging.MessageHandlingException: Missing header &#39;kafka_deliveryAttempt&#39; for method parameter type [int], failedMessage=GenericMessage [payload=.....\r\n\r\nUpdate\r\n-\r\n\r\nI also tried\r\n\r\n    @Bean\r\n    public ContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; containerCustomizer(\r\n            ConcurrentKafkaListenerContainerFactory&lt;String, Message&gt; factory) {\r\n        ContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; custCustomizer = container -&gt; {\r\n            container.getContainerProperties().setDeliveryAttemptHeader(true);\r\n        };\r\n        factory.setContainerCustomizer(custCustomizer);\r\n        return custCustomizer;\r\n    }\r\n\r\nBut it didn&#39;t help although I see in debug that this property was set up.\r\n\r\n[![enter image description here][1]][1]\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kgeYz.png","title":"MessageHandlingException: Missing header &#39;kafka_deliveryAttempt&#39; for method parameter type","body":"<p>I have a kafka listener with additional header KafkaHeaders.DELIVERY_ATTEMPT:</p>\n<pre><code>@KafkaListener(topics = &quot;$my_topic}&quot;, autoStartup = &quot;true&quot;)\npublic void listenForMessage(String message, @Header(KafkaHeaders.DELIVERY_ATTEMPT) int delivery) {\n    log.info(&quot;Message from kafka topic {}&quot;, message);\n    ...\n</code></pre>\n<p>Based on documentation:</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/reference/html/#delivery-header\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/reference/html/#delivery-header</a></p>\n<blockquote>\n<p>When using @KafkaListener with the DefaultKafkaHeaderMapper or\nSimpleKafkaHeaderMapper, it can be obtained by adding\n@Header(KafkaHeaders.DELIVERY_ATTEMPT) int delivery as a parameter to\nthe listener method.</p>\n</blockquote>\n<p>Looks like I've done it.</p>\n<p>But second step is not clear for me:</p>\n<blockquote>\n<p>To enable population of this header, set the container property\ndeliveryAttemptHeader to true. It is disabled by default to avoid the\n(small) overhead of looking up the state for each record and adding\nthe header.</p>\n</blockquote>\n<p>How can I do it ?</p>\n<p>Without second step I see the error:</p>\n<pre><code>org.springframework.kafka.listener.ListenerExecutionFailedException: Listener method could not be invoked with the incoming message\nEndpoint handler details:\nMethod [public void ****.listenForMessage(java.lang.String,int)]\nBean [****MessageConsumer$$EnhancerBySpringCGLIB$$c2e2a4bd@3cc101bf]; nested exception is org.springframework.messaging.MessageHandlingException: Missing header 'kafka_deliveryAttempt' for method parameter type [int], failedMessage=GenericMessage [payload=.....\n</code></pre>\n<h2>Update</h2>\n<p>I also tried</p>\n<pre><code>@Bean\npublic ContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; containerCustomizer(\n        ConcurrentKafkaListenerContainerFactory&lt;String, Message&gt; factory) {\n    ContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; custCustomizer = container -&gt; {\n        container.getContainerProperties().setDeliveryAttemptHeader(true);\n    };\n    factory.setContainerCustomizer(custCustomizer);\n    return custCustomizer;\n}\n</code></pre>\n<p>But it didn't help although I see in debug that this property was set up.</p>\n<p><a href=\"https://i.stack.imgur.com/kgeYz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kgeYz.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","pdf","svg","pdfbox","batik"],"comments":[{"owner":{"account_id":3273747,"reputation":20856,"user_id":2756409,"accept_rate":100,"display_name":"TylerH"},"score":0,"creation_date":1684178576,"post_id":4120567,"comment_id":134476532,"body_markdown":"Related: [Convert PDF to clean SVG?](https://stackoverflow.com/questions/10288065/convert-pdf-to-clean-svg)","body":"Related: <a href=\"https://stackoverflow.com/questions/10288065/convert-pdf-to-clean-svg\">Convert PDF to clean SVG?</a>"},{"owner":{"account_id":3273747,"reputation":20856,"user_id":2756409,"accept_rate":100,"display_name":"TylerH"},"score":0,"creation_date":1684178696,"post_id":4120567,"comment_id":134476551,"body_markdown":"Note that tool recommendation requests are off-topic on Stack Overflow. Unfortunately every single answer below to date is a tool recommendation, so removing that request entirely from the post above would invalidate those answers, which is something that isn&#39;t allowed here. Hopefully my improvements to the question will allow it to remain salvaged and at the same time prevent more &quot;use Inkscape&quot; responses from appearing here.","body":"Note that tool recommendation requests are off-topic on Stack Overflow. Unfortunately every single answer below to date is a tool recommendation, so removing that request entirely from the post above would invalidate those answers, which is something that isn&#39;t allowed here. Hopefully my improvements to the question will allow it to remain salvaged and at the same time prevent more &quot;use Inkscape&quot; responses from appearing here."}],"answers":[{"tags":[],"owner":{"account_id":152374,"reputation":12714,"user_id":366856,"accept_rate":69,"display_name":"jbeard4"},"down_vote_count":1,"up_vote_count":67,"is_accepted":true,"score":66,"last_activity_date":1289218340,"creation_date":1289218340,"answer_id":4123701,"question_id":4120567,"body_markdown":"Inkscape can also be used to convert PDF to SVG. It&#39;s actually remarkably good at this, and although the code that it generates is a bit bloated, at the very least, it doesn&#39;t seem to have the particular issue that you are encountering in your program. I think it would be challenging to integrate it directly into Java, but inkscape provides a convenient command-line interface to this functionality, so probably the easiest way to access it would be via a system call. \r\n\r\nTo use Inkscape&#39;s command-line interface to convert a PDF to an SVG, use:\r\n\r\n    inkscape -l out.svg in.pdf\r\n\r\nWhich you can then probably call using:\r\n\r\n    Runtime.getRuntime().exec(&quot;inkscape -l out.svg in.pdf&quot;)\r\n\r\nhttp://download.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29\r\n\r\nI think exec() is synchronous and only returns after the process completes (although I&#39;m not 100% sure on that), so you shoudl be able to just read &quot;out.svg&quot; after that. In any case, Googling &quot;java system call&quot; will yield more info on how to do that part correctly.\r\n","title":"How to prevent my PDF to SVG conversion code from generating bloated content?","body":"<p>Inkscape can also be used to convert PDF to SVG. It's actually remarkably good at this, and although the code that it generates is a bit bloated, at the very least, it doesn't seem to have the particular issue that you are encountering in your program. I think it would be challenging to integrate it directly into Java, but inkscape provides a convenient command-line interface to this functionality, so probably the easiest way to access it would be via a system call. </p>\n\n<p>To use Inkscape's command-line interface to convert a PDF to an SVG, use:</p>\n\n<pre><code>inkscape -l out.svg in.pdf\n</code></pre>\n\n<p>Which you can then probably call using:</p>\n\n<pre><code>Runtime.getRuntime().exec(\"inkscape -l out.svg in.pdf\")\n</code></pre>\n\n<p><a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29\" rel=\"noreferrer\">http://download.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29</a></p>\n\n<p>I think exec() is synchronous and only returns after the process completes (although I'm not 100% sure on that), so you shoudl be able to just read \"out.svg\" after that. In any case, Googling \"java system call\" will yield more info on how to do that part correctly.</p>\n"},{"tags":[],"owner":{"account_id":64117,"reputation":25829,"user_id":189431,"display_name":"Koen."},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1665577480,"creation_date":1292951896,"answer_id":4502030,"question_id":4120567,"body_markdown":"Take a look at [pdf2svg][1] (also on [on github](https://github.com/dawbarton/pdf2svg/)):\r\n\r\n**To use**\r\n\r\n    pdf2svg &lt;input.pdf&gt; &lt;output.svg&gt; [&lt;pdf page no. or &quot;all&quot; &gt;]\r\n\r\nWhen using `all` give a filename with `%d` in it (which will be replaced by the page number).\r\n\r\n    pdf2svg input.pdf output_page%d.svg all\r\n\r\n\r\nAnd for some troubleshooting see:\r\nhttp://www.calcmaster.net/personal_projects/pdf2svg/\r\n\r\n\r\n  [1]: http://www.cityinthesky.co.uk/opensource/pdf2svg/","title":"How to prevent my PDF to SVG conversion code from generating bloated content?","body":"<p>Take a look at <a href=\"http://www.cityinthesky.co.uk/opensource/pdf2svg/\" rel=\"nofollow noreferrer\">pdf2svg</a> (also on <a href=\"https://github.com/dawbarton/pdf2svg/\" rel=\"nofollow noreferrer\">on github</a>):</p>\n<p><strong>To use</strong></p>\n<pre><code>pdf2svg &lt;input.pdf&gt; &lt;output.svg&gt; [&lt;pdf page no. or &quot;all&quot; &gt;]\n</code></pre>\n<p>When using <code>all</code> give a filename with <code>%d</code> in it (which will be replaced by the page number).</p>\n<pre><code>pdf2svg input.pdf output_page%d.svg all\n</code></pre>\n<p>And for some troubleshooting see:\n<a href=\"http://www.calcmaster.net/personal_projects/pdf2svg/\" rel=\"nofollow noreferrer\">http://www.calcmaster.net/personal_projects/pdf2svg/</a></p>\n"},{"tags":[],"owner":{"account_id":131562,"reputation":3011,"user_id":331668,"accept_rate":54,"display_name":"Leblanc Meneses"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684255752,"creation_date":1507617637,"answer_id":46660133,"question_id":4120567,"body_markdown":"You can use bash in a *nix environment. \r\n\r\nThe burst operation splits each page in the PDF into files. to-svg.sh loops through these single-page PDFs to generate the associated SVG file\r\n\r\n    pdftk 82page.pdf burst\r\n    sh to-svg.sh \r\n\r\ncontents of `to-svg.sh`\r\n\r\n    #!/bin/bash\r\n    FILES=burst/*\r\n    for f in $FILES\r\n    do\r\n      inkscape -l &quot;$f.svg&quot; &quot;$f&quot;\r\n    done\r\n","title":"How to prevent my PDF to SVG conversion code from generating bloated content?","body":"<p>You can use bash in a *nix environment.</p>\n<p>The burst operation splits each page in the PDF into files. to-svg.sh loops through these single-page PDFs to generate the associated SVG file</p>\n<pre><code>pdftk 82page.pdf burst\nsh to-svg.sh \n</code></pre>\n<p>contents of <code>to-svg.sh</code></p>\n<pre><code>#!/bin/bash\nFILES=burst/*\nfor f in $FILES\ndo\n  inkscape -l &quot;$f.svg&quot; &quot;$f&quot;\ndone\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4233050,"reputation":25920,"user_id":3464971,"display_name":"SuperNova"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1686837342,"creation_date":1587526846,"answer_id":61356922,"question_id":4120567,"body_markdown":"`pdftocairo` can be used to convert PDF to SVG.&lt;br&gt;\r\nIt&#39;s part of [poppler-utils](https://en.wikipedia.org/wiki/Poppler_(software)#poppler-utils) which can be installed either from [PyPI](https://pypi.org/project/poppler-utils/) via `pip`, built from git, or via your OS package manager &lt;sup&gt;(eg ubuntu/deb has it under this same name)&lt;/sup&gt;.\r\n\r\nFor example to convert the second page of a PDF, the following command can be run:\r\n\r\n    pdftocairo -svg -f 1 -l 1 input.pdf","title":"How to prevent my PDF to SVG conversion code from generating bloated content?","body":"<p><code>pdftocairo</code> can be used to convert PDF to SVG.<br>\nIt's part of <a href=\"https://en.wikipedia.org/wiki/Poppler_(software)#poppler-utils\" rel=\"nofollow noreferrer\">poppler-utils</a> which can be installed either from <a href=\"https://pypi.org/project/poppler-utils/\" rel=\"nofollow noreferrer\">PyPI</a> via <code>pip</code>, built from git, or via your OS package manager <sup>(eg ubuntu/deb has it under this same name)</sup>.</p>\n<p>For example to convert the second page of a PDF, the following command can be run:</p>\n<pre><code>pdftocairo -svg -f 1 -l 1 input.pdf\n</code></pre>\n"},{"tags":[],"owner":{"account_id":488703,"reputation":351,"user_id":962099,"accept_rate":75,"display_name":"MrDrMcCoy"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1684178970,"creation_date":1621615268,"answer_id":67640834,"question_id":4120567,"body_markdown":"I have encountered issues with the suggested inkscape, pdf2svg, or pdftocairo tools, as well as the not-suggested convert and mutool tools, when trying to convert large and complex PDFs such as some of the topographical maps from the USGS. Sometimes they would crash, other times they would produce massively inflated files. \r\n\r\nThe only PDF to SVG conversion tool that was able to handle all of them correctly for my use case was [dvisvgm][1]. Using it is very simple:\r\n\r\n    dvisvgm --pdf --output=file.svg file.pdf\r\n\r\nIt has various extra options for handling how elements are converted, as well as for optimization. Its resulting files can further be compacted by [svgcleaner][2] if necessary without perceptual quality loss.\r\n\r\n  [1]: https://dvisvgm.de/\r\n  [2]: https://github.com/RazrFalcon/SVGCleaner","title":"How to prevent my PDF to SVG conversion code from generating bloated content?","body":"<p>I have encountered issues with the suggested inkscape, pdf2svg, or pdftocairo tools, as well as the not-suggested convert and mutool tools, when trying to convert large and complex PDFs such as some of the topographical maps from the USGS. Sometimes they would crash, other times they would produce massively inflated files.</p>\n<p>The only PDF to SVG conversion tool that was able to handle all of them correctly for my use case was <a href=\"https://dvisvgm.de/\" rel=\"nofollow noreferrer\">dvisvgm</a>. Using it is very simple:</p>\n<pre><code>dvisvgm --pdf --output=file.svg file.pdf\n</code></pre>\n<p>It has various extra options for handling how elements are converted, as well as for optimization. Its resulting files can further be compacted by <a href=\"https://github.com/RazrFalcon/SVGCleaner\" rel=\"nofollow noreferrer\">svgcleaner</a> if necessary without perceptual quality loss.</p>\n"},{"tags":[],"owner":{"account_id":14505422,"reputation":817,"user_id":10477326,"display_name":"Daniel T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671165554,"creation_date":1671165554,"answer_id":74820257,"question_id":4120567,"body_markdown":"Inkscape does not work with the `-l` option any more. It said &quot;Can&#39;t open file: /out.svg (doesn&#39;t exist)&quot;. The long form that option is in the man page as `--export-plain-svg` and works but shows a deprecation warning. I was able to fix and update the command by using the `-o` option on Inkscape 1.1.2-3ubuntu4:\r\n\r\n```bash\r\ninkscape in.pdf -o out.svg\r\n```","title":"How to prevent my PDF to SVG conversion code from generating bloated content?","body":"<p>Inkscape does not work with the <code>-l</code> option any more. It said &quot;Can't open file: /out.svg (doesn't exist)&quot;. The long form that option is in the man page as <code>--export-plain-svg</code> and works but shows a deprecation warning. I was able to fix and update the command by using the <code>-o</code> option on Inkscape 1.1.2-3ubuntu4:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>inkscape in.pdf -o out.svg\n</code></pre>\n"}],"owner":{"account_id":193053,"reputation":1305,"user_id":434541,"accept_rate":71,"display_name":"user434541"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62745,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"accepted_answer_id":4123701,"answer_count":6,"score":59,"last_activity_date":1686837342,"creation_date":1289177742,"question_id":4120567,"body_markdown":"I want to convert PDF to SVG. I have written my own Java program using the Apache PDFBox and Batik libraries\r\n\r\n    PDDocument document = PDDocument.load( pdfFile );\r\n    DOMImplementation domImpl =\r\n        GenericDOMImplementation.getDOMImplementation();\r\n    \r\n    // Create an instance of org.w3c.dom.Document.\r\n    String svgNS = &quot;http://www.w3.org/2000/svg&quot;;\r\n    Document svgDocument = domImpl.createDocument(svgNS, &quot;svg&quot;, null);\r\n    SVGGeneratorContext ctx = SVGGeneratorContext.createDefault(svgDocument);\r\n    ctx.setEmbeddedFontsOn(true);\r\n    \r\n    // Ask the test to render into the SVG Graphics2D implementation.\r\n    \r\n        for(int i = 0 ; i &lt; document.getNumberOfPages() ; i++){\r\n            String svgFName = svgDir+&quot;page&quot;+i+&quot;.svg&quot;;\r\n            (new File(svgFName)).createNewFile();\r\n            // Create an instance of the SVG Generator.\r\n            SVGGraphics2D svgGenerator = new SVGGraphics2D(ctx,false);\r\n            Printable page  = document.getPrintable(i);\r\n            page.print(svgGenerator, document.getPageFormat(i), i);\r\n            svgGenerator.stream(svgFName);\r\n        }\r\nThis solution works, but the size of the resulting SVG files is huge (many times greater than the originating PDF). I have figured out where the problem is by looking at the SVG in a text editor: it encloses every character in the original document in its own `&lt;text&gt; &lt;/text&gt;` block even if the font properties of the characters are the same. \r\n\r\nFor example the word &quot;hello&quot; will appear as 6 different text blocks. \r\n\r\nIs there a way to fix the above code? Or is there another solution that will work more efficiently?","title":"How to prevent my PDF to SVG conversion code from generating bloated content?","body":"<p>I want to convert PDF to SVG. I have written my own Java program using the Apache PDFBox and Batik libraries</p>\n<pre><code>PDDocument document = PDDocument.load( pdfFile );\nDOMImplementation domImpl =\n    GenericDOMImplementation.getDOMImplementation();\n\n// Create an instance of org.w3c.dom.Document.\nString svgNS = &quot;http://www.w3.org/2000/svg&quot;;\nDocument svgDocument = domImpl.createDocument(svgNS, &quot;svg&quot;, null);\nSVGGeneratorContext ctx = SVGGeneratorContext.createDefault(svgDocument);\nctx.setEmbeddedFontsOn(true);\n\n// Ask the test to render into the SVG Graphics2D implementation.\n\n    for(int i = 0 ; i &lt; document.getNumberOfPages() ; i++){\n        String svgFName = svgDir+&quot;page&quot;+i+&quot;.svg&quot;;\n        (new File(svgFName)).createNewFile();\n        // Create an instance of the SVG Generator.\n        SVGGraphics2D svgGenerator = new SVGGraphics2D(ctx,false);\n        Printable page  = document.getPrintable(i);\n        page.print(svgGenerator, document.getPageFormat(i), i);\n        svgGenerator.stream(svgFName);\n    }\n</code></pre>\n<p>This solution works, but the size of the resulting SVG files is huge (many times greater than the originating PDF). I have figured out where the problem is by looking at the SVG in a text editor: it encloses every character in the original document in its own <code>&lt;text&gt; &lt;/text&gt;</code> block even if the font properties of the characters are the same.</p>\n<p>For example the word &quot;hello&quot; will appear as 6 different text blocks.</p>\n<p>Is there a way to fix the above code? Or is there another solution that will work more efficiently?</p>\n"},{"tags":["java","android","android-activity","android-spinner"],"owner":{"account_id":27720456,"reputation":1,"user_id":21161129,"display_name":"ViniSouza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686837230,"creation_date":1686837039,"question_id":76483187,"body_markdown":"I&#39;m creating an intelligent greenhouse monitored and controlled by an application, and I&#39;m creating a logic to register it. To choose the type of plant to be cultivated, I used a spinner on two screens, registration and data exchange (in case the farmer wants to use that greenhouse for another planting). However, only the data exchange screen spinner is working and the codes are identical, does anyone know what I can do to solve it?\r\n\r\nThis is the registration spinner:\r\n\r\n    Spinner spinner1 = findViewById(R.id.plantsCadastro_spinner);;\r\n\r\n        spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView&lt;?&gt; adapterView1, View view1, int position1, long l1) {\r\n                String item1 = adapterView1.getItemAtPosition(position1).toString();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView&lt;?&gt; adapterView1) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n        ArrayList&lt;String&gt; arrayList1 = new ArrayList&lt;&gt;();\r\n        arrayList1.add(&quot;product1&quot;);\r\n        arrayList1.add(&quot;product2&quot;);\r\n        arrayList1.add(&quot;product3&quot;);\r\n        ArrayAdapter&lt;String&gt; adapter1 =\r\n                new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item, arrayList1);\r\n\r\n        adapter1.setDropDownViewResource(android.R.layout.select_dialog_singlechoice);\r\n        spinner1.setAdapter(adapter1);\r\n\r\nand this is the config spinner:\r\n\r\n    Spinner spinner = findViewById(R.id.plants_spinner);\r\n\r\n        spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView&lt;?&gt; adapterView, View view, int position, long l) {\r\n                String item = adapterView.getItemAtPosition(position).toString();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n        ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;();\r\n        arrayList.add(&quot;product1&quot;);\r\n        arrayList.add(&quot;product2&quot;);\r\n        arrayList.add(&quot;product3&quot;);\r\n        ArrayAdapter&lt;String&gt; adapter =\r\n                new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item, arrayList);\r\n\r\n        adapter.setDropDownViewResource(android.R.layout.select_dialog_singlechoice);\r\n        spinner.setAdapter(adapter);","title":"How to use two spinner in two differents activities?","body":"<p>I'm creating an intelligent greenhouse monitored and controlled by an application, and I'm creating a logic to register it. To choose the type of plant to be cultivated, I used a spinner on two screens, registration and data exchange (in case the farmer wants to use that greenhouse for another planting). However, only the data exchange screen spinner is working and the codes are identical, does anyone know what I can do to solve it?</p>\n<p>This is the registration spinner:</p>\n<pre><code>Spinner spinner1 = findViewById(R.id.plantsCadastro_spinner);;\n\n    spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n        @Override\n        public void onItemSelected(AdapterView&lt;?&gt; adapterView1, View view1, int position1, long l1) {\n            String item1 = adapterView1.getItemAtPosition(position1).toString();\n        }\n\n        @Override\n        public void onNothingSelected(AdapterView&lt;?&gt; adapterView1) {\n\n        }\n    });\n\n\n    ArrayList&lt;String&gt; arrayList1 = new ArrayList&lt;&gt;();\n    arrayList1.add(&quot;product1&quot;);\n    arrayList1.add(&quot;product2&quot;);\n    arrayList1.add(&quot;product3&quot;);\n    ArrayAdapter&lt;String&gt; adapter1 =\n            new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item, arrayList1);\n\n    adapter1.setDropDownViewResource(android.R.layout.select_dialog_singlechoice);\n    spinner1.setAdapter(adapter1);\n</code></pre>\n<p>and this is the config spinner:</p>\n<pre><code>Spinner spinner = findViewById(R.id.plants_spinner);\n\n    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n        @Override\n        public void onItemSelected(AdapterView&lt;?&gt; adapterView, View view, int position, long l) {\n            String item = adapterView.getItemAtPosition(position).toString();\n        }\n\n        @Override\n        public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {\n\n        }\n    });\n\n\n    ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;();\n    arrayList.add(&quot;product1&quot;);\n    arrayList.add(&quot;product2&quot;);\n    arrayList.add(&quot;product3&quot;);\n    ArrayAdapter&lt;String&gt; adapter =\n            new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_spinner_item, arrayList);\n\n    adapter.setDropDownViewResource(android.R.layout.select_dialog_singlechoice);\n    spinner.setAdapter(adapter);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":970256,"reputation":892,"user_id":992940,"accept_rate":67,"display_name":"Dmitrii Bocharov"},"score":0,"creation_date":1686818326,"post_id":76480241,"comment_id":134852482,"body_markdown":"Official docs have everything. Check here https://docs.spring.io/spring-kafka/reference/html/#after-rollback. Search for &quot;By default, after ten failures, the failed record is logged...&quot; and &quot;You can add more exception types to the not-retryable category.&quot; The DELIVERY_ATTEMPT header doesn&#39;t work because you need to enable it - set the container property deliveryAttemptHeader to true (check here https://docs.spring.io/spring-kafka/reference/html/#delivery-header)","body":"Official docs have everything. Check here <a href=\"https://docs.spring.io/spring-kafka/reference/html/#after-rollback\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/reference/html/#after-rollback</a>. Search for &quot;By default, after ten failures, the failed record is logged...&quot; and &quot;You can add more exception types to the not-retryable category.&quot; The DELIVERY_ATTEMPT header doesn&#39;t work because you need to enable it - set the container property deliveryAttemptHeader to true (check here <a href=\"https://docs.spring.io/spring-kafka/reference/html/#delivery-header\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/reference/html/#delivery-header</a>)"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1686819503,"post_id":76480241,"comment_id":134852734,"body_markdown":"@Dmitrii Bocharov could you please provide example of code how to do it ?\n```\nTo enable population of this header, set the container property deliveryAttemptHeader to true. It is disabled by default to avoid the (small) overhead of looking up the state for each record and adding the header.\n```","body":"@Dmitrii Bocharov could you please provide example of code how to do it ? ``` To enable population of this header, set the container property deliveryAttemptHeader to true. It is disabled by default to avoid the (small) overhead of looking up the state for each record and adding the header. ```"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1686821494,"post_id":76480241,"comment_id":134853165,"body_markdown":"Or maybe something should be added to application.properties ?","body":"Or maybe something should be added to application.properties ?"},{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1686836341,"post_id":76480241,"comment_id":134856454,"body_markdown":"See my answer - you just need to change the default back off in the `DefaultErrorHandler`.","body":"See my answer - you just need to change the default back off in the <code>DefaultErrorHandler</code>."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686836305,"creation_date":1686836305,"answer_id":76483074,"question_id":76480241,"body_markdown":"See the documentation: https://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-error-handling\r\n\r\nand\r\n\r\nhttps://docs.spring.io/spring-kafka/docs/current/reference/html/#default-eh\r\n\r\nAdd a `DefaultErrorHandler` with a different `FixedBackOff` (the default is 9 retries with no back off between attempts).\r\n\r\n```java\r\nDefaultErrorHandler errorHandler =\r\n    new DefaultErrorHandler((record, exception) -&gt; {\r\n        // recover after 3 failures, with no back off - e.g. send to a dead-letter topic\r\n    }, new FixedBackOff(0L, 2L));\r\n```\r\n\r\nYou have to enable the delivery attempts header, it is not enabled by default.\r\n\r\nhttps://docs.spring.io/spring-kafka/docs/current/reference/html/#delivery-header","title":"How to change amount of DELIVERY_ATTEMPT before fail in KafkaListener?","body":"<p>See the documentation: <a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-error-handling\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#annotation-error-handling</a></p>\n<p>and</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#default-eh\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#default-eh</a></p>\n<p>Add a <code>DefaultErrorHandler</code> with a different <code>FixedBackOff</code> (the default is 9 retries with no back off between attempts).</p>\n<pre class=\"lang-java prettyprint-override\"><code>DefaultErrorHandler errorHandler =\n    new DefaultErrorHandler((record, exception) -&gt; {\n        // recover after 3 failures, with no back off - e.g. send to a dead-letter topic\n    }, new FixedBackOff(0L, 2L));\n</code></pre>\n<p>You have to enable the delivery attempts header, it is not enabled by default.</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#delivery-header\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#delivery-header</a></p>\n"},{"tags":[],"owner":{"account_id":970256,"reputation":892,"user_id":992940,"accept_rate":67,"display_name":"Dmitrii Bocharov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686837125,"creation_date":1686837125,"answer_id":76483197,"question_id":76480241,"body_markdown":"Summing up the comments + adding the example\r\n\r\nThe `DELIVERY_ATTEMPT` header doesn&#39;t work because you need to enable it - set the container property deliveryAttemptHeader to true (check here docs.spring.io/spring-kafka/reference/html/#delivery-header). You need to create a `KafkaListenerContainerFactory` bean:\r\n\r\n```java\r\n@Configuration\r\n@EnableKafka\r\npublic class KafkaConfig {\r\n\r\n    @Bean\r\n    KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;Integer, String&gt;&gt;\r\n                        kafkaListenerContainerFactory() {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory =\r\n                                new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(consumerFactory());\r\n        factory.getContainerProperties().setDeliveryAttemptHeader(true);\r\n        return factory;\r\n    }\r\n```\r\nCheck an example of the rest of the beans (e.g. consumerFactory()) here: https://docs.spring.io/spring-kafka/reference/html/#record-listener.  And then in the listener, you do:\r\n\r\n```java\r\n@KafkaListener(topics = &quot;${some_topic}&quot;, autoStartup = &quot;true&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\r\n```\r\n\r\nAnd of course, also check the answer by Gary Russell","title":"How to change amount of DELIVERY_ATTEMPT before fail in KafkaListener?","body":"<p>Summing up the comments + adding the example</p>\n<p>The <code>DELIVERY_ATTEMPT</code> header doesn't work because you need to enable it - set the container property deliveryAttemptHeader to true (check here docs.spring.io/spring-kafka/reference/html/#delivery-header). You need to create a <code>KafkaListenerContainerFactory</code> bean:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableKafka\npublic class KafkaConfig {\n\n    @Bean\n    KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;Integer, String&gt;&gt;\n                        kafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory =\n                                new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory());\n        factory.getContainerProperties().setDeliveryAttemptHeader(true);\n        return factory;\n    }\n</code></pre>\n<p>Check an example of the rest of the beans (e.g. consumerFactory()) here: <a href=\"https://docs.spring.io/spring-kafka/reference/html/#record-listener\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/reference/html/#record-listener</a>.  And then in the listener, you do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@KafkaListener(topics = &quot;${some_topic}&quot;, autoStartup = &quot;true&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\n</code></pre>\n<p>And of course, also check the answer by Gary Russell</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76483074,"answer_count":2,"score":0,"last_activity_date":1686837125,"creation_date":1686815451,"question_id":76480241,"body_markdown":"Lets say I have the following listener:\r\n\r\n    @KafkaListener(topics = &quot;${some_topic}&quot;, autoStartup = &quot;true&quot;)\r\n    public void listenForMessage(String message) {          \r\n        log.warn(&quot;Accepted message&quot;); \r\n        if (true) {\r\n                throw new RuntimeException(&quot;some error&quot;);\r\n            } \r\n\r\n    }\r\n\r\nI try to send message to the topic `${some_topic}` and see following:\r\n\r\n    2023-06-15 10:00:03.311  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.381  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.399  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.414  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.430  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.445  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.460  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message \r\n    2023-06-15 10:00:03.477  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.492  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.509  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\r\n    2023-06-15 10:00:03.509 ERROR 33580 --- [ntainer#0-0-C-1] o.s.k.l.FallbackBatchErrorHandler        : Records discarded: my-topic-0@33\r\n    \r\n    org.springframework.kafka.listener.ListenerExecutionFailedException: Listener method &#39;public void com.****.listenForMessage(java.lang.String)&#39; threw exception; nested exception is java.lang.RuntimeException: some error; nested exception is java.lang.RuntimeException: Ololo\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.decorateException(KafkaMessageListenerContainer.java:2871) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeBatchOnMessage(KafkaMessageListenerContainer.java:2407) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeBatchOnMessageWithRecordsOrList(KafkaMessageListenerContainer.java:2377) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$invokeBatchErrorHandler$46(KafkaMessageListenerContainer.java:2419) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.ErrorHandlingUtils.retryBatch(ErrorHandlingUtils.java:185) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.FallbackBatchErrorHandler.handle(FallbackBatchErrorHandler.java:131) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.ErrorHandlerAdapter.handleBatch(ErrorHandlerAdapter.java:160) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.FailedBatchProcessor.fallback(FailedBatchProcessor.java:191) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.FailedBatchProcessor.handle(FailedBatchProcessor.java:159) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.FailedBatchProcessor.doHandle(FailedBatchProcessor.java:150) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.DefaultErrorHandler.handleBatch(DefaultErrorHandler.java:182) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeBatchErrorHandler(KafkaMessageListenerContainer.java:2417) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeBatchListener(KafkaMessageListenerContainer.java:2234) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeBatchListener(KafkaMessageListenerContainer.java:2095) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2074) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1429) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1393) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1290) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]\r\n    \tat java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264) ~[?:?]\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java) ~[?:?]\r\n    \tat java.lang.Thread.run(Thread.java:833) ~[?:?]\r\n    \tSuppressed: org.springframework.kafka.listener.ListenerExecutionFailedException: Restored Stack Trace\r\n    \t\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:363) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \t\tat org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.invoke(BatchMessagingMessageListenerAdapter.java:180) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \t\tat org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.onMessage(BatchMessagingMessageListenerAdapter.java:172) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \t\tat org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.onMessage(BatchMessagingMessageListenerAdapter.java:61) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \t\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeBatchOnMessage(KafkaMessageListenerContainer.java:2387) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    Caused by: java.lang.RuntimeException: some error\r\n    \tat ***(MyServiceImpl.java:59) ~[classes/:?]\r\n    \tat ***.listenForMessage(MyServiceImpl.java:39) ~[classes/:?]\r\n    \tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n    \tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n    \tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n    \tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:339) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.invoke(BatchMessagingMessageListenerAdapter.java:180) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.onMessage(BatchMessagingMessageListenerAdapter.java:172) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.onMessage(BatchMessagingMessageListenerAdapter.java:61) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n    \tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeBatchOnMessage(KafkaMessageListenerContainer.java:2387) ~[spring-kafka-2.9.7.jar:2.9.7]\r\n\r\n\r\n\r\nWe see that listener tries to accept message 10 times and after fail #10 it prints error (and sends ack as far as I understand). I wanted to play with that behaviout \r\n\r\nI tried to implement following errorHandler to decrease retry amount to 3:\r\n\r\n       @Bean\r\n        public KafkaListenerErrorHandler eh() {\r\n            return (msg, ex) -&gt; {\r\n                if (msg.getHeaders().get(KafkaHeaders.DELIVERY_ATTEMPT, Integer.class) &gt; 3) {\r\n                    return &quot;FAILED&quot;;\r\n                }\r\n                throw ex;\r\n            };\r\n        }\r\n\r\nand reference to it\r\n\r\n    @KafkaListener(topics = &quot;${some_topic}&quot;, autoStartup = &quot;true&quot;, errorHandler = &quot;eh&quot;)\r\n    public void listenForMessage(String message) {          \r\n        log.warn(&quot;Accepted message&quot;); \r\n        if (true) {\r\n                throw new RuntimeException(&quot;some error&quot;);\r\n            } \r\n    \r\n    }\r\n\r\n\r\nBut `msg.getHeaders().get(KafkaHeaders.DELIVERY_ATTEMPT, Integer.class)` throws exception. So the behaviour is the same: 10 attempts to accept and then I see exception:\r\n\r\n    ...\r\n    Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because the return value of &quot;org.springframework.messaging.MessageHeaders.get(Object, java.lang.Class)&quot; is null\r\n\r\n\r\n\r\nAs far I understand there is a way to mark some exceptions retriable and some - not. Could you please provide example of configuration ?","title":"How to change amount of DELIVERY_ATTEMPT before fail in KafkaListener?","body":"<p>Lets say I have the following listener:</p>\n<pre><code>@KafkaListener(topics = &quot;${some_topic}&quot;, autoStartup = &quot;true&quot;)\npublic void listenForMessage(String message) {          \n    log.warn(&quot;Accepted message&quot;); \n    if (true) {\n            throw new RuntimeException(&quot;some error&quot;);\n        } \n\n}\n</code></pre>\n<p>I try to send message to the topic <code>${some_topic}</code> and see following:</p>\n<pre><code>2023-06-15 10:00:03.311  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.381  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.399  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.414  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.430  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.445  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.460  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message \n2023-06-15 10:00:03.477  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.492  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.509  WARN 33580 --- [ntainer#0-0-C-1] r.v.u.e.s.MyServiceImpl               : Accepted message\n2023-06-15 10:00:03.509 ERROR 33580 --- [ntainer#0-0-C-1] o.s.k.l.FallbackBatchErrorHandler        : Records discarded: my-topic-0@33\n\norg.springframework.kafka.listener.ListenerExecutionFailedException: Listener method 'public void com.****.listenForMessage(java.lang.String)' threw exception; nested exception is java.lang.RuntimeException: some error; nested exception is java.lang.RuntimeException: Ololo\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.decorateException(KafkaMessageListenerContainer.java:2871) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeBatchOnMessage(KafkaMessageListenerContainer.java:2407) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeBatchOnMessageWithRecordsOrList(KafkaMessageListenerContainer.java:2377) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$invokeBatchErrorHandler$46(KafkaMessageListenerContainer.java:2419) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.ErrorHandlingUtils.retryBatch(ErrorHandlingUtils.java:185) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.FallbackBatchErrorHandler.handle(FallbackBatchErrorHandler.java:131) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.ErrorHandlerAdapter.handleBatch(ErrorHandlerAdapter.java:160) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.FailedBatchProcessor.fallback(FailedBatchProcessor.java:191) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.FailedBatchProcessor.handle(FailedBatchProcessor.java:159) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.FailedBatchProcessor.doHandle(FailedBatchProcessor.java:150) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.DefaultErrorHandler.handleBatch(DefaultErrorHandler.java:182) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeBatchErrorHandler(KafkaMessageListenerContainer.java:2417) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeBatchListener(KafkaMessageListenerContainer.java:2234) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeBatchListener(KafkaMessageListenerContainer.java:2095) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2074) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1429) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1393) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1290) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]\n    at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264) ~[?:?]\n    at java.util.concurrent.FutureTask.run(FutureTask.java) ~[?:?]\n    at java.lang.Thread.run(Thread.java:833) ~[?:?]\n    Suppressed: org.springframework.kafka.listener.ListenerExecutionFailedException: Restored Stack Trace\n        at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:363) ~[spring-kafka-2.9.7.jar:2.9.7]\n        at org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.invoke(BatchMessagingMessageListenerAdapter.java:180) ~[spring-kafka-2.9.7.jar:2.9.7]\n        at org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.onMessage(BatchMessagingMessageListenerAdapter.java:172) ~[spring-kafka-2.9.7.jar:2.9.7]\n        at org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.onMessage(BatchMessagingMessageListenerAdapter.java:61) ~[spring-kafka-2.9.7.jar:2.9.7]\n        at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeBatchOnMessage(KafkaMessageListenerContainer.java:2387) ~[spring-kafka-2.9.7.jar:2.9.7]\nCaused by: java.lang.RuntimeException: some error\n    at ***(MyServiceImpl.java:59) ~[classes/:?]\n    at ***.listenForMessage(MyServiceImpl.java:39) ~[classes/:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n    at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.26.jar:5.3.26]\n    at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.26.jar:5.3.26]\n    at org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:339) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.invoke(BatchMessagingMessageListenerAdapter.java:180) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.onMessage(BatchMessagingMessageListenerAdapter.java:172) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.adapter.BatchMessagingMessageListenerAdapter.onMessage(BatchMessagingMessageListenerAdapter.java:61) ~[spring-kafka-2.9.7.jar:2.9.7]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeBatchOnMessage(KafkaMessageListenerContainer.java:2387) ~[spring-kafka-2.9.7.jar:2.9.7]\n</code></pre>\n<p>We see that listener tries to accept message 10 times and after fail #10 it prints error (and sends ack as far as I understand). I wanted to play with that behaviout</p>\n<p>I tried to implement following errorHandler to decrease retry amount to 3:</p>\n<pre><code>   @Bean\n    public KafkaListenerErrorHandler eh() {\n        return (msg, ex) -&gt; {\n            if (msg.getHeaders().get(KafkaHeaders.DELIVERY_ATTEMPT, Integer.class) &gt; 3) {\n                return &quot;FAILED&quot;;\n            }\n            throw ex;\n        };\n    }\n</code></pre>\n<p>and reference to it</p>\n<pre><code>@KafkaListener(topics = &quot;${some_topic}&quot;, autoStartup = &quot;true&quot;, errorHandler = &quot;eh&quot;)\npublic void listenForMessage(String message) {          \n    log.warn(&quot;Accepted message&quot;); \n    if (true) {\n            throw new RuntimeException(&quot;some error&quot;);\n        } \n\n}\n</code></pre>\n<p>But <code>msg.getHeaders().get(KafkaHeaders.DELIVERY_ATTEMPT, Integer.class)</code> throws exception. So the behaviour is the same: 10 attempts to accept and then I see exception:</p>\n<pre><code>...\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because the return value of &quot;org.springframework.messaging.MessageHeaders.get(Object, java.lang.Class)&quot; is null\n</code></pre>\n<p>As far I understand there is a way to mark some exceptions retriable and some - not. Could you please provide example of configuration ?</p>\n"},{"tags":["java","spring-boot","spring-aop","spring-annotations","spring-aspects"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686470928,"post_id":76435875,"comment_id":134800715,"body_markdown":"`@Profile(&quot;!it&quot;)` works just fine for me, if I try to recreate your situation. Why would you need an extra aspect? The bean is not even created with an inactive profile `it`, therefore you do not need to skip its post-construct method either.","body":"<code>@Profile(&quot;!it&quot;)</code> works just fine for me, if I try to recreate your situation. Why would you need an extra aspect? The bean is not even created with an inactive profile <code>it</code>, therefore you do not need to skip its post-construct method either."},{"owner":{"account_id":1310600,"reputation":3828,"user_id":1258669,"accept_rate":73,"display_name":"OTUser"},"score":0,"creation_date":1686620842,"post_id":76435875,"comment_id":134820841,"body_markdown":"@kriegaex As mentioned in the question I have a different setup in my project and @Profile(&quot;!it&quot;) not working for me hence I need the custom annotation to make it work","body":"@kriegaex As mentioned in the question I have a different setup in my project and @Profile(&quot;!it&quot;) not working for me hence I need the custom annotation to make it work"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1686642354,"post_id":76435875,"comment_id":134823189,"body_markdown":"You are making a claim without proof. I copied and tried your code, and `@Profile` works nicely. If your sitution is different,please publish an [MCVE](https://stackoverflow.com/help/mcve) reproducing the situation, ideally a Maven project on GitHub. Before I explain to you why your custom annotation approach does not work and what the alternative would be, let us try to solve the problem with on-board means and find out why for you same are not working.","body":"You are making a claim without proof. I copied and tried your code, and <code>@Profile</code> works nicely. If your sitution is different,please publish an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> reproducing the situation, ideally a Maven project on GitHub. Before I explain to you why your custom annotation approach does not work and what the alternative would be, let us try to solve the problem with on-board means and find out why for you same are not working."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1688889059,"post_id":76435875,"comment_id":135132538,"body_markdown":"I do not find it particularly polite to ignore a comprehensive and extensive answer for weeks. You asked a question, I spent time trying to answer it. I would appreciate some feedbacks.","body":"I do not find it particularly polite to ignore a comprehensive and extensive answer for weeks. You asked a question, I spent time trying to answer it. I would appreciate some feedbacks."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686837058,"creation_date":1686760074,"answer_id":76475713,"question_id":76435875,"body_markdown":"With Spring AOP it is impossible to intercept a bean lifecycle method with an aspect. In order to achieve that, you would have to explicitly call the method on the bean instance, which is not what you want, because Spring does that for you internally. When debugging, you will also see that `HeartBeat`&#39;s lifecycle method has long since run before the aspect becomes active. You could mark `HeartBeat` as `@Lazy`, then the aspect bean is wired first, but still that does not mean you can intercept the post-construct method with Spring AOP.\r\n\r\nLike I commented before, I see no reason why `@Profile` would not work. For me, it works beautifully. Chances are, that your Spring config needs fixing. You still did not provide any reproducer for your problem.\r\n\r\nIf you wish to intercept the post-construct method with an aspect, you need a more powerful AOP tool than Spring AOP, namely native AspectJ. I tried with load-time weaving, and it works, if configured correctly. The code looks like this:\r\n\r\n```java\r\npackage de.scrum_master.spring.q76435875;\r\n\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface SkipForTestProfile {}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.spring.q76435875;\r\n\r\nimport org.springframework.context.annotation.Lazy;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport javax.annotation.PostConstruct;\r\n\r\n@Component\r\n@Lazy\r\npublic class HeartBeat {\r\n  @PostConstruct\r\n  @SkipForTestProfile\r\n  protected void init() {\r\n    System.out.println(&quot;Doing health check&quot;);\r\n  }\r\n}\r\n```\r\n\r\nPlease note that you need `@Lazy`, otherwise you cannot inject the `Environment` into the native aspect on time before `HeartBeat.init()` executes.\r\n\r\nWithout `@Lazy`, you have to parse the system property `spring.profiles.active` manually. That is also possible.\r\n\r\n```java\r\npackage de.scrum_master.spring.q76435875;\r\n\r\nimport org.aspectj.lang.ProceedingJoinPoint;\r\nimport org.aspectj.lang.annotation.Around;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Configurable;\r\nimport org.springframework.core.env.Environment;\r\n\r\nimport java.util.Arrays;\r\n\r\n@Aspect\r\n//@Component\r\n@Configurable\r\npublic class SkipForTestProfileAspect {\r\n  @Autowired\r\n  private Environment environment;\r\n\r\n  @Around(&quot;@annotation(skipForTestProfile) &amp;&amp; execution(* *(..))&quot;)\r\n  public Object skipMethodForTestProfile(ProceedingJoinPoint joinPoint, SkipForTestProfile skipForTestProfile) throws Throwable {\r\n    System.out.println(joinPoint + &quot; -&gt;  test profile &quot; + (isTestProfile() ? &quot;active&quot; : &quot;inactive&quot;));\r\n    return isTestProfile() ? null : joinPoint.proceed();\r\n  }\r\n\r\n  private boolean isTestProfile() {\r\n    return Arrays.asList(environment.getActiveProfiles()).contains(&quot;it&quot;);\r\n  }\r\n}\r\n```\r\n\r\nPlease note that a native AspectJ aspect should not carry any `@Component` annotation, because it is not a Spring component. You do, however, need `@Configurable` (from `spring-aspects`) to be able to inject the Spring environment.\r\n\r\nAgain, that is unnecessary, if you parse the system property manually.\r\n\r\n```java\r\npackage de.scrum_master.spring.q76435875;\r\n\r\nimport org.aspectj.lang.Aspects;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.ConfigurableApplicationContext;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.EnableLoadTimeWeaving;\r\nimport org.springframework.context.annotation.aspectj.EnableSpringConfigured;\r\n\r\n@SpringBootApplication\r\n@Configuration\r\n//@EnableAspectJAutoProxy\r\n@EnableLoadTimeWeaving\r\n@EnableSpringConfigured\r\npublic class DemoApplication {\r\n  public static void main(String[] args) {\r\n    try (ConfigurableApplicationContext context = SpringApplication.run(DemoApplication.class, args)) {\r\n      HeartBeat heartBeat = context.getBean(HeartBeat.class);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIn this driver application, you see that we need `@EnableLoadTimeWeaving` rather than `@EnableAspectJAutoProxy` for native load-time weaving. We also need `@EnableSpringConfigured` in order to auto-wire a Spring bean (the environment) into a non-Spring component (the aspect).\r\n\r\nWe also explicitly instantiate a `HeartBeat` bean in order to see the effect of the aspect.\r\n\r\nNow start the application with JVM parameters (on a single line)\r\n\r\n```none\r\n--add-opens java.base/java.lang=ALL-UNNAMED\r\n-javaagent:/path/to/aspectjweaver-1.9.19.jar\r\n-javaagent:/path/to/spring-instrument-5.3.16.jar\r\n-Dspring.profiles.active=it\r\n```\r\n\r\nto see log output like\r\n\r\n```none\r\nexecution(void de.scrum_master.spring.q76435875.HeartBeat.init()) -&gt;  test profile active\r\n```\r\n\r\nWithout the active `it` profile, it says:\r\n\r\n```none\r\nexecution(void de.scrum_master.spring.q76435875.HeartBeat.init()) -&gt;  test profile inactive\r\nDoing health check\r\n```\r\n\r\nIs that really worth the effort? Would it not be better to get `@Profile` and Spring AOP working?\r\n\r\n---\r\n\r\n**Update:** If you want to work without `@EnableSpringConfigured`, `@Configurable` and `@Lazy`, simply instantiate a `StandardEnvironment` by yourself inside the aspect, and the sitution is simplified as follows:\r\n\r\n```java\r\npackage de.scrum_master.spring.q76435875;\r\n\r\nimport org.aspectj.lang.ProceedingJoinPoint;\r\nimport org.aspectj.lang.annotation.Around;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.springframework.core.env.Environment;\r\nimport org.springframework.core.env.StandardEnvironment;\r\n\r\nimport java.util.Arrays;\r\n\r\n@Aspect\r\n//@Component\r\npublic class SkipForTestProfileAspect {\r\n  private Environment environment = new StandardEnvironment();\r\n\r\n  @Around(&quot;@annotation(skipForTestProfile) &amp;&amp; execution(* *(..))&quot;)\r\n  public Object skipMethodForTestProfile(ProceedingJoinPoint joinPoint, SkipForTestProfile skipForTestProfile) throws Throwable {\r\n    System.out.println(joinPoint + &quot; -&gt;  test profile &quot; + (isTestProfile() ? &quot;active&quot; : &quot;inactive&quot;));\r\n    return isTestProfile() ? null : joinPoint.proceed();\r\n  }\r\n\r\n  private boolean isTestProfile() {\r\n    return Arrays.asList(environment.getActiveProfiles()).contains(&quot;it&quot;);\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.spring.q76435875;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport javax.annotation.PostConstruct;\r\n\r\n@Component\r\npublic class HeartBeat {\r\n  @PostConstruct\r\n  @SkipForTestProfile\r\n  protected void init() {\r\n    System.out.println(&quot;Doing health check&quot;);\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.spring.q76435875;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.ConfigurableApplicationContext;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.EnableLoadTimeWeaving;\r\n\r\n@SpringBootApplication\r\n@Configuration\r\n//@EnableAspectJAutoProxy\r\n@EnableLoadTimeWeaving\r\npublic class DemoApplication {\r\n  public static void main(String[] args) {\r\n    try (ConfigurableApplicationContext context = SpringApplication.run(DemoApplication.class, args)) {\r\n//      HeartBeat heartBeat = context.getBean(HeartBeat.class);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIn this configuration, it is also no longer necessary to instantiate the `HeartBeat` bean in the application starter in order to see the aspect log, because there is no `@Lazy` bean instantiation anymore. Everything works automatically during application start.","title":"SpringBoot 2.7: Custom Annotation Aspect not working","body":"<p>With Spring AOP it is impossible to intercept a bean lifecycle method with an aspect. In order to achieve that, you would have to explicitly call the method on the bean instance, which is not what you want, because Spring does that for you internally. When debugging, you will also see that <code>HeartBeat</code>'s lifecycle method has long since run before the aspect becomes active. You could mark <code>HeartBeat</code> as <code>@Lazy</code>, then the aspect bean is wired first, but still that does not mean you can intercept the post-construct method with Spring AOP.</p>\n<p>Like I commented before, I see no reason why <code>@Profile</code> would not work. For me, it works beautifully. Chances are, that your Spring config needs fixing. You still did not provide any reproducer for your problem.</p>\n<p>If you wish to intercept the post-construct method with an aspect, you need a more powerful AOP tool than Spring AOP, namely native AspectJ. I tried with load-time weaving, and it works, if configured correctly. The code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.spring.q76435875;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface SkipForTestProfile {}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.spring.q76435875;\n\nimport org.springframework.context.annotation.Lazy;\nimport org.springframework.stereotype.Component;\n\nimport javax.annotation.PostConstruct;\n\n@Component\n@Lazy\npublic class HeartBeat {\n  @PostConstruct\n  @SkipForTestProfile\n  protected void init() {\n    System.out.println(&quot;Doing health check&quot;);\n  }\n}\n</code></pre>\n<p>Please note that you need <code>@Lazy</code>, otherwise you cannot inject the <code>Environment</code> into the native aspect on time before <code>HeartBeat.init()</code> executes.</p>\n<p>Without <code>@Lazy</code>, you have to parse the system property <code>spring.profiles.active</code> manually. That is also possible.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.spring.q76435875;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Configurable;\nimport org.springframework.core.env.Environment;\n\nimport java.util.Arrays;\n\n@Aspect\n//@Component\n@Configurable\npublic class SkipForTestProfileAspect {\n  @Autowired\n  private Environment environment;\n\n  @Around(&quot;@annotation(skipForTestProfile) &amp;&amp; execution(* *(..))&quot;)\n  public Object skipMethodForTestProfile(ProceedingJoinPoint joinPoint, SkipForTestProfile skipForTestProfile) throws Throwable {\n    System.out.println(joinPoint + &quot; -&gt;  test profile &quot; + (isTestProfile() ? &quot;active&quot; : &quot;inactive&quot;));\n    return isTestProfile() ? null : joinPoint.proceed();\n  }\n\n  private boolean isTestProfile() {\n    return Arrays.asList(environment.getActiveProfiles()).contains(&quot;it&quot;);\n  }\n}\n</code></pre>\n<p>Please note that a native AspectJ aspect should not carry any <code>@Component</code> annotation, because it is not a Spring component. You do, however, need <code>@Configurable</code> (from <code>spring-aspects</code>) to be able to inject the Spring environment.</p>\n<p>Again, that is unnecessary, if you parse the system property manually.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.spring.q76435875;\n\nimport org.aspectj.lang.Aspects;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.EnableLoadTimeWeaving;\nimport org.springframework.context.annotation.aspectj.EnableSpringConfigured;\n\n@SpringBootApplication\n@Configuration\n//@EnableAspectJAutoProxy\n@EnableLoadTimeWeaving\n@EnableSpringConfigured\npublic class DemoApplication {\n  public static void main(String[] args) {\n    try (ConfigurableApplicationContext context = SpringApplication.run(DemoApplication.class, args)) {\n      HeartBeat heartBeat = context.getBean(HeartBeat.class);\n    }\n  }\n}\n</code></pre>\n<p>In this driver application, you see that we need <code>@EnableLoadTimeWeaving</code> rather than <code>@EnableAspectJAutoProxy</code> for native load-time weaving. We also need <code>@EnableSpringConfigured</code> in order to auto-wire a Spring bean (the environment) into a non-Spring component (the aspect).</p>\n<p>We also explicitly instantiate a <code>HeartBeat</code> bean in order to see the effect of the aspect.</p>\n<p>Now start the application with JVM parameters (on a single line)</p>\n<pre class=\"lang-none prettyprint-override\"><code>--add-opens java.base/java.lang=ALL-UNNAMED\n-javaagent:/path/to/aspectjweaver-1.9.19.jar\n-javaagent:/path/to/spring-instrument-5.3.16.jar\n-Dspring.profiles.active=it\n</code></pre>\n<p>to see log output like</p>\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.spring.q76435875.HeartBeat.init()) -&gt;  test profile active\n</code></pre>\n<p>Without the active <code>it</code> profile, it says:</p>\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.spring.q76435875.HeartBeat.init()) -&gt;  test profile inactive\nDoing health check\n</code></pre>\n<p>Is that really worth the effort? Would it not be better to get <code>@Profile</code> and Spring AOP working?</p>\n<hr />\n<p><strong>Update:</strong> If you want to work without <code>@EnableSpringConfigured</code>, <code>@Configurable</code> and <code>@Lazy</code>, simply instantiate a <code>StandardEnvironment</code> by yourself inside the aspect, and the sitution is simplified as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.spring.q76435875;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.springframework.core.env.Environment;\nimport org.springframework.core.env.StandardEnvironment;\n\nimport java.util.Arrays;\n\n@Aspect\n//@Component\npublic class SkipForTestProfileAspect {\n  private Environment environment = new StandardEnvironment();\n\n  @Around(&quot;@annotation(skipForTestProfile) &amp;&amp; execution(* *(..))&quot;)\n  public Object skipMethodForTestProfile(ProceedingJoinPoint joinPoint, SkipForTestProfile skipForTestProfile) throws Throwable {\n    System.out.println(joinPoint + &quot; -&gt;  test profile &quot; + (isTestProfile() ? &quot;active&quot; : &quot;inactive&quot;));\n    return isTestProfile() ? null : joinPoint.proceed();\n  }\n\n  private boolean isTestProfile() {\n    return Arrays.asList(environment.getActiveProfiles()).contains(&quot;it&quot;);\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.spring.q76435875;\n\nimport org.springframework.stereotype.Component;\n\nimport javax.annotation.PostConstruct;\n\n@Component\npublic class HeartBeat {\n  @PostConstruct\n  @SkipForTestProfile\n  protected void init() {\n    System.out.println(&quot;Doing health check&quot;);\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.spring.q76435875;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.EnableLoadTimeWeaving;\n\n@SpringBootApplication\n@Configuration\n//@EnableAspectJAutoProxy\n@EnableLoadTimeWeaving\npublic class DemoApplication {\n  public static void main(String[] args) {\n    try (ConfigurableApplicationContext context = SpringApplication.run(DemoApplication.class, args)) {\n//      HeartBeat heartBeat = context.getBean(HeartBeat.class);\n    }\n  }\n}\n</code></pre>\n<p>In this configuration, it is also no longer necessary to instantiate the <code>HeartBeat</code> bean in the application starter in order to see the aspect log, because there is no <code>@Lazy</code> bean instantiation anymore. Everything works automatically during application start.</p>\n"}],"owner":{"account_id":1310600,"reputation":3828,"user_id":1258669,"accept_rate":73,"display_name":"OTUser"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686837058,"creation_date":1686260583,"question_id":76435875,"body_markdown":"Below is my custom annotation `SkipForTestProfile` which I created to skip execution for &quot;it&quot; profile but the  `SkipForTestProfileAspect` code is not execuuted, i appreciate if someone can help me fix the Aspect to execute around the annotation `@SkipForTestProfile`\r\n\r\n\tpackage com.mp.annotations;\r\n\r\n\timport java.lang.annotation.ElementType;\r\n\timport java.lang.annotation.Retention;\r\n\timport java.lang.annotation.RetentionPolicy;\r\n\timport java.lang.annotation.Target;\r\n\r\n\t@Target(ElementType.METHOD)\r\n\t@Retention(RetentionPolicy.RUNTIME)\r\n\tpublic @interface SkipForTestProfile {\r\n\t}\r\n\r\n\r\nBelow is the aspect\r\n\r\n\tpackage com.mp.aspect;\r\n\r\n\r\n\timport java.util.Arrays;\r\n\r\n\timport org.aspectj.lang.ProceedingJoinPoint;\r\n\timport org.aspectj.lang.annotation.Around;\r\n\timport org.aspectj.lang.annotation.Aspect;\r\n\timport org.springframework.beans.factory.annotation.Autowired;\r\n\timport org.springframework.core.annotation.Order;\r\n\timport org.springframework.core.env.Environment;\r\n\timport org.springframework.stereotype.Component;\r\n\timport com.mp.annotations.SkipForTestProfile;\r\n\r\n\t@Aspect\r\n\t@Component\r\n\t@Order(1) // Define the order of aspect execution\r\n\tpublic class SkipForTestProfileAspect {\r\n\r\n\t\t@Autowired\r\n\t\tprivate Environment environment;\r\n\r\n\t\t@Around(&quot;@annotation(skipForTestProfile)&quot;)\r\n\t\tpublic Object skipMethodForTestProfile(ProceedingJoinPoint joinPoint, SkipForTestProfile skipForTestProfile) throws Throwable {\r\n\t\t\tif(isTestProfile()){\r\n\t\t\t\treturn null;\r\n\t\t\t} else{\r\n\t\t\t\treturn joinPoint.proceed();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate boolean isTestProfile() {\r\n\t\t\treturn Arrays.stream(environment.getActiveProfiles()).anyMatch(s -&gt; s.equals(&quot;it&quot;));\r\n\t\t}\r\n\t}\r\n\r\nBelow is my custom annotation usage\r\n\r\n\tpackage com.mp.healthIndicator;\r\n\r\n\t@Component\r\n\t@Slf4j\r\n\t@Profile(&quot;!it&quot;)// this is not working in my case hence created custom annotation\r\n\tpublic class HeartBeat{\r\n\r\n\r\n\t\t@PostConstruct\r\n\t\t@SkipForTestProfile\r\n\t\tprotected void init(){\t\t\t\r\n\t\t\t//do health check\r\n\t\t}\r\n\t}","title":"SpringBoot 2.7: Custom Annotation Aspect not working","body":"<p>Below is my custom annotation <code>SkipForTestProfile</code> which I created to skip execution for &quot;it&quot; profile but the  <code>SkipForTestProfileAspect</code> code is not execuuted, i appreciate if someone can help me fix the Aspect to execute around the annotation <code>@SkipForTestProfile</code></p>\n<pre><code>package com.mp.annotations;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface SkipForTestProfile {\n}\n</code></pre>\n<p>Below is the aspect</p>\n<pre><code>package com.mp.aspect;\n\n\nimport java.util.Arrays;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.core.env.Environment;\nimport org.springframework.stereotype.Component;\nimport com.mp.annotations.SkipForTestProfile;\n\n@Aspect\n@Component\n@Order(1) // Define the order of aspect execution\npublic class SkipForTestProfileAspect {\n\n    @Autowired\n    private Environment environment;\n\n    @Around(&quot;@annotation(skipForTestProfile)&quot;)\n    public Object skipMethodForTestProfile(ProceedingJoinPoint joinPoint, SkipForTestProfile skipForTestProfile) throws Throwable {\n        if(isTestProfile()){\n            return null;\n        } else{\n            return joinPoint.proceed();\n        }\n    }\n\n    private boolean isTestProfile() {\n        return Arrays.stream(environment.getActiveProfiles()).anyMatch(s -&gt; s.equals(&quot;it&quot;));\n    }\n}\n</code></pre>\n<p>Below is my custom annotation usage</p>\n<pre><code>package com.mp.healthIndicator;\n\n@Component\n@Slf4j\n@Profile(&quot;!it&quot;)// this is not working in my case hence created custom annotation\npublic class HeartBeat{\n\n\n    @PostConstruct\n    @SkipForTestProfile\n    protected void init(){          \n        //do health check\n    }\n}\n</code></pre>\n"},{"tags":["java","xml","spring-boot"],"comments":[{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1686712088,"post_id":76469869,"comment_id":134835401,"body_markdown":"What is the behavior? Do have &quot;completed&quot; but nothing on screen? An error message?","body":"What is the behavior? Do have &quot;completed&quot; but nothing on screen? An error message?"},{"owner":{"account_id":28816261,"reputation":11,"user_id":22069813,"display_name":"SB3279"},"score":0,"creation_date":1686714972,"post_id":76469869,"comment_id":134835613,"body_markdown":"&quot;completed&quot; is just for verifying the process is completed, while parsing the node elements it errors out at element.getElementsByTagName(&quot;ISREVENUE&quot;).item(0).getTextContent(). The XM provided is just a sample, which might have 500 nodes of groups which is provided by external system","body":"&quot;completed&quot; is just for verifying the process is completed, while parsing the node elements it errors out at element.getElementsByTagName(&quot;ISREVENUE&quot;).item(0).getTextCon&zwnj;&#8203;tent(). The XM provided is just a sample, which might have 500 nodes of groups which is provided by external system"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1686717943,"post_id":76469869,"comment_id":134835816,"body_markdown":"You wrote in your [comment](https://stackoverflow.com/questions/76469869/xml-reading-with-attributes-in-java#comment134835613_76469869): _it errors out at_ Pardon me, but I could not find details of that error in your question. Perhaps you can [edit] your question and post the error details?","body":"You wrote in your <a href=\"https://stackoverflow.com/questions/76469869/xml-reading-with-attributes-in-java#comment134835613_76469869\">comment</a>: <i>it errors out at</i> Pardon me, but I could not find details of that error in your question. Perhaps you can <a href=\"https://stackoverflow.com/posts/76469869/edit\">edit</a> your question and post the error details?"},{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1686720649,"post_id":76469869,"comment_id":134836057,"body_markdown":"Yes, like @Abra ask, what&#39;s the error you&#39;re facing? Is it an `ArrayIndexOutOfBoundsException`? Something else? Can you paste some logs? It would be the best.","body":"Yes, like @Abra ask, what&#39;s the error you&#39;re facing? Is it an <code>ArrayIndexOutOfBoundsException</code>? Something else? Can you paste some logs? It would be the best."},{"owner":{"account_id":28816261,"reputation":11,"user_id":22069813,"display_name":"SB3279"},"score":0,"creation_date":1686721147,"post_id":76469869,"comment_id":134836116,"body_markdown":"This was my first post, so Sorry for providing less information. Below is the error in StackTrace &quot;org.eclipse.debug.core.DebugException: com.sun.jdi.ClassNotLoadedException: Type has not been loaded occurred while retrieving component type of array.&quot; with exception as NullPointerException","body":"This was my first post, so Sorry for providing less information. Below is the error in StackTrace &quot;org.eclipse.debug.core.DebugException: com.sun.jdi.ClassNotLoadedException: Type has not been loaded occurred while retrieving component type of array.&quot; with exception as NullPointerException"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1686721432,"post_id":76469869,"comment_id":134836150,"body_markdown":"I copied both the XML and the code in your question and the code ran without error. Add the following line to your `catch` block: `ex.printStackTrace();`","body":"I copied both the XML and the code in your question and the code ran without error. Add the following line to your <code>catch</code> block: <code>ex.printStackTrace();</code>"},{"owner":{"account_id":28816261,"reputation":11,"user_id":22069813,"display_name":"SB3279"},"score":0,"creation_date":1686736625,"post_id":76469869,"comment_id":134839078,"body_markdown":"Thanks  Marc Le Bihan &amp; Abra for looking into the issue and spending some time. I have got the needed solution","body":"Thanks  Marc Le Bihan &amp; Abra for looking into the issue and spending some time. I have got the needed solution"}],"answers":[{"tags":[],"owner":{"account_id":28816261,"reputation":11,"user_id":22069813,"display_name":"SB3279"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686836833,"creation_date":1686736966,"answer_id":76472334,"question_id":76469869,"body_markdown":"I was not looping to the child nodes to get the needed values.\r\n\r\nBelow is the code which had solved the problem.\r\n\r\n```\r\ntry {\r\n\r\n\tFile xmlFile = new File(&quot;C:/Srinivas/NewData.xml&quot;);\r\n\tDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\tDocumentBuilder builder = factory.newDocumentBuilder();\r\n\tDocument doc = (Document) builder.parse(xmlFile);\r\n\r\n\tNodeList nodeList = doc.getElementsByTagName(&quot;GROUP&quot;);\r\n\tfor (int itr = 0; itr &lt; nodeList.getLength(); itr++) {\t\t\t\t\r\n\t\tNode node = nodeList.item(itr);\r\n\t\tif (node.getNodeType() == Node.ELEMENT_NODE) {\r\n\t\t\tSystem.out.println(node.getNodeName() + &quot; -- &quot; + node.getAttributes().item(0).getTextContent());\t\t\t\t\t\r\n\t\t\tNodeList childNodes =  node.getChildNodes();\r\n\t\t\tfor(int i=0; i&lt; childNodes.getLength(); i++)\r\n\t\t\t{\r\n\t\t\t\tNode childNode = childNodes.item(i);\r\n\t\t\t\tif (childNode.getNodeType() == Node.ELEMENT_NODE) {\r\n\t\t\t\t\tSystem.out.println(childNode.getNodeName() + &quot; -- &quot; + childNode.getTextContent());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;---------------------------------------&quot;);\r\n\t}\r\n\tSystem.out.println(&quot;completed&quot;);\r\n} catch (Exception ex) {\r\n\tSystem.out.println(ex.getMessage());\r\n}\r\n``` \r\nMy desired output is below\r\n\r\n\r\n``` \r\nGROUP -- Administration Expenses\r\nISDELETED -- \r\nISREVENUE -- Yes\r\nISDEEMEDPOSITIVE -- Yes\r\nMASTERID --  166\r\n---------------------------------------\r\nGROUP -- Bank Accounts\r\nISDELETED -- \r\nISREVENUE -- No\r\nISDEEMEDPOSITIVE -- Yes\r\nMASTERID --  22\r\n---------------------------------------\r\nGROUP -- Bank OD A/c\r\nISDELETED -- \r\nISREVENUE -- No\r\nISDEEMEDPOSITIVE -- No\r\nMASTERID --  11\r\n---------------------------------------\r\ncompleted\r\n``` ","title":"XML Reading with Attributes in Java","body":"<p>I was not looping to the child nodes to get the needed values.</p>\n<p>Below is the code which had solved the problem.</p>\n<pre><code>try {\n\n    File xmlFile = new File(&quot;C:/Srinivas/NewData.xml&quot;);\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder builder = factory.newDocumentBuilder();\n    Document doc = (Document) builder.parse(xmlFile);\n\n    NodeList nodeList = doc.getElementsByTagName(&quot;GROUP&quot;);\n    for (int itr = 0; itr &lt; nodeList.getLength(); itr++) {              \n        Node node = nodeList.item(itr);\n        if (node.getNodeType() == Node.ELEMENT_NODE) {\n            System.out.println(node.getNodeName() + &quot; -- &quot; + node.getAttributes().item(0).getTextContent());                    \n            NodeList childNodes =  node.getChildNodes();\n            for(int i=0; i&lt; childNodes.getLength(); i++)\n            {\n                Node childNode = childNodes.item(i);\n                if (childNode.getNodeType() == Node.ELEMENT_NODE) {\n                    System.out.println(childNode.getNodeName() + &quot; -- &quot; + childNode.getTextContent());\n                }\n            }\n        }\n        System.out.println(&quot;---------------------------------------&quot;);\n    }\n    System.out.println(&quot;completed&quot;);\n} catch (Exception ex) {\n    System.out.println(ex.getMessage());\n}\n</code></pre>\n<p>My desired output is below</p>\n<pre><code>GROUP -- Administration Expenses\nISDELETED -- \nISREVENUE -- Yes\nISDEEMEDPOSITIVE -- Yes\nMASTERID --  166\n---------------------------------------\nGROUP -- Bank Accounts\nISDELETED -- \nISREVENUE -- No\nISDEEMEDPOSITIVE -- Yes\nMASTERID --  22\n---------------------------------------\nGROUP -- Bank OD A/c\nISDELETED -- \nISREVENUE -- No\nISDEEMEDPOSITIVE -- No\nMASTERID --  11\n---------------------------------------\ncompleted\n</code></pre>\n"}],"owner":{"account_id":28816261,"reputation":11,"user_id":22069813,"display_name":"SB3279"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76472334,"answer_count":1,"score":1,"last_activity_date":1686836833,"creation_date":1686711633,"question_id":76469869,"body_markdown":"I am trying to parse the XML which have multiple nodes with different tags. \r\n\r\nThe code errors out with Exception as null at line:\r\n```java\r\nSystem.out.println(&quot;Revenue Value : &quot; +    element.getElementsByTagName(&quot;ISREVENUE&quot;).item(0).getTextContent()).\r\n```\r\nI am unable to parse the attribute to get its value like Group Name &quot;Administration Expenses&quot;, its child tags `ISREVENUE` is `&quot;Yes&quot;`, `MASTERID` is `166`, for all the nodes\r\n\r\nExpecting output\r\n\r\n```\r\nName (Group) : &quot;Administration Expenses&quot;\r\nRevenue Value : &quot;Yes&quot;\r\nMasterID Value : 166\r\n```\r\n\r\nfor all the nodes in the xml\r\n\r\nBelow is the XML Content\r\n\r\n```xml\r\n&lt;ENVELOPE&gt;\r\n    &lt;HEADER&gt;\r\n        &lt;VERSION&gt;1&lt;/VERSION&gt;\r\n        &lt;STATUS&gt;1&lt;/STATUS&gt;\r\n    &lt;/HEADER&gt;\r\n    &lt;BODY&gt;\r\n        &lt;DESC&gt;\r\n            &lt;CMPINFO&gt;\r\n                &lt;EXCISEDUTYCLASSIFICATION&gt;0&lt;/EXCISEDUTYCLASSIFICATION&gt;\r\n                &lt;SERIALNUMBER&gt;0&lt;/SERIALNUMBER&gt;\r\n                &lt;ADJUSTMENTCLASSIFICATION&gt;0&lt;/ADJUSTMENTCLASSIFICATION&gt;\r\n                &lt;INCOMETAXSLAB&gt;0&lt;/INCOMETAXSLAB&gt;\r\n                &lt;INCOMETAXCLASSIFICATION&gt;0&lt;/INCOMETAXCLASSIFICATION&gt;\r\n                &lt;LBTCLASSIFICATION&gt;0&lt;/LBTCLASSIFICATION&gt;\r\n                &lt;TAXUNIT&gt;0&lt;/TAXUNIT&gt;\r\n                &lt;RETURNMASTER&gt;0&lt;/RETURNMASTER&gt;\r\n                &lt;VOUCHER&gt;0&lt;/VOUCHER&gt;\r\n            &lt;/CMPINFO&gt;\r\n        &lt;/DESC&gt;\r\n        &lt;DATA&gt;\r\n            &lt;COLLECTION ISMSTDEPTYPE=&quot;Yes&quot; MSTDEPTYPE=&quot;4&quot;&gt;\r\n                &lt;GROUP NAME=&quot;Administration Expenses&quot; RESERVEDNAME=&quot;&quot;&gt;\r\n                    &lt;ISDELETED TYPE=&quot;Logical&quot;&gt;&lt;/ISDELETED&gt;\r\n                    &lt;ISREVENUE TYPE=&quot;Logical&quot;&gt;Yes&lt;/ISREVENUE&gt;\r\n                    &lt;ISDEEMEDPOSITIVE TYPE=&quot;Logical&quot;&gt;Yes&lt;/ISDEEMEDPOSITIVE&gt;\r\n                    &lt;MASTERID TYPE=&quot;Number&quot;&gt; 166&lt;/MASTERID&gt;\r\n                &lt;/GROUP&gt;\r\n                &lt;GROUP NAME=&quot;Bank Accounts&quot; RESERVEDNAME=&quot;Bank Accounts&quot;&gt;\r\n                    &lt;ISDELETED TYPE=&quot;Logical&quot;&gt;&lt;/ISDELETED&gt;\r\n                    &lt;ISREVENUE TYPE=&quot;Logical&quot;&gt;No&lt;/ISREVENUE&gt;\r\n                    &lt;ISDEEMEDPOSITIVE TYPE=&quot;Logical&quot;&gt;Yes&lt;/ISDEEMEDPOSITIVE&gt;\r\n                    &lt;MASTERID TYPE=&quot;Number&quot;&gt; 22&lt;/MASTERID&gt;\r\n                &lt;/GROUP&gt;\r\n                &lt;GROUP NAME=&quot;Bank OD A/c&quot; RESERVEDNAME=&quot;Bank OD A/c&quot;&gt;\r\n                    &lt;ISDELETED TYPE=&quot;Logical&quot;&gt;&lt;/ISDELETED&gt;\r\n                    &lt;ISREVENUE TYPE=&quot;Logical&quot;&gt;No&lt;/ISREVENUE&gt;\r\n                    &lt;ISDEEMEDPOSITIVE TYPE=&quot;Logical&quot;&gt;No&lt;/ISDEEMEDPOSITIVE&gt;\r\n                    &lt;MASTERID TYPE=&quot;Number&quot;&gt; 11&lt;/MASTERID&gt;\r\n                &lt;/GROUP&gt;\r\n            &lt;/COLLECTION&gt;\r\n        &lt;/DATA&gt;\r\n    &lt;/BODY&gt;\r\n&lt;/ENVELOPE&gt;\r\n```\r\n\r\nBelow is the code \r\n\r\n```java\r\ntry {\r\n    File xmlFile = new File(&quot;C:/Srinivas/NewData.xml&quot;);\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    DocumentBuilder builder = factory.newDocumentBuilder();\r\n    Document doc = (Document) builder.parse(xmlFile);\r\n\r\n    NodeList nodeList = doc.getElementsByTagName(&quot;GROUP&quot;);\r\n    for (int itr = 0; itr &lt; nodeList.getLength(); itr++) {\r\n        Node node = nodeList.item(itr);\r\n        if (node.getNodeType() == Node.ELEMENT_NODE) {\r\n            Element element = (Element) node;\r\n            String name = element.getAttribute(&quot;Name&quot;);\r\n            System.out.println(&quot;Revenue Value : &quot; +    element.getElementsByTagName(&quot;ISREVENUE&quot;).item(0).getTextContent());\r\n            System.out.println(&quot;Deemed Value : &quot; + element.getElementsByTagName(&quot;ISDEEMEDPOSITIVE&quot;).item(0).getTextContent());\r\n        }\r\n    }\r\n    System.out.println(&quot;completed&quot;);\r\n} catch (Exception ex) {\r\n    System.out.println(ex.getMessage());\r\n}\r\n```","title":"XML Reading with Attributes in Java","body":"<p>I am trying to parse the XML which have multiple nodes with different tags.</p>\n<p>The code errors out with Exception as null at line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;Revenue Value : &quot; +    element.getElementsByTagName(&quot;ISREVENUE&quot;).item(0).getTextContent()).\n</code></pre>\n<p>I am unable to parse the attribute to get its value like Group Name &quot;Administration Expenses&quot;, its child tags <code>ISREVENUE</code> is <code>&quot;Yes&quot;</code>, <code>MASTERID</code> is <code>166</code>, for all the nodes</p>\n<p>Expecting output</p>\n<pre><code>Name (Group) : &quot;Administration Expenses&quot;\nRevenue Value : &quot;Yes&quot;\nMasterID Value : 166\n</code></pre>\n<p>for all the nodes in the xml</p>\n<p>Below is the XML Content</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ENVELOPE&gt;\n    &lt;HEADER&gt;\n        &lt;VERSION&gt;1&lt;/VERSION&gt;\n        &lt;STATUS&gt;1&lt;/STATUS&gt;\n    &lt;/HEADER&gt;\n    &lt;BODY&gt;\n        &lt;DESC&gt;\n            &lt;CMPINFO&gt;\n                &lt;EXCISEDUTYCLASSIFICATION&gt;0&lt;/EXCISEDUTYCLASSIFICATION&gt;\n                &lt;SERIALNUMBER&gt;0&lt;/SERIALNUMBER&gt;\n                &lt;ADJUSTMENTCLASSIFICATION&gt;0&lt;/ADJUSTMENTCLASSIFICATION&gt;\n                &lt;INCOMETAXSLAB&gt;0&lt;/INCOMETAXSLAB&gt;\n                &lt;INCOMETAXCLASSIFICATION&gt;0&lt;/INCOMETAXCLASSIFICATION&gt;\n                &lt;LBTCLASSIFICATION&gt;0&lt;/LBTCLASSIFICATION&gt;\n                &lt;TAXUNIT&gt;0&lt;/TAXUNIT&gt;\n                &lt;RETURNMASTER&gt;0&lt;/RETURNMASTER&gt;\n                &lt;VOUCHER&gt;0&lt;/VOUCHER&gt;\n            &lt;/CMPINFO&gt;\n        &lt;/DESC&gt;\n        &lt;DATA&gt;\n            &lt;COLLECTION ISMSTDEPTYPE=&quot;Yes&quot; MSTDEPTYPE=&quot;4&quot;&gt;\n                &lt;GROUP NAME=&quot;Administration Expenses&quot; RESERVEDNAME=&quot;&quot;&gt;\n                    &lt;ISDELETED TYPE=&quot;Logical&quot;&gt;&lt;/ISDELETED&gt;\n                    &lt;ISREVENUE TYPE=&quot;Logical&quot;&gt;Yes&lt;/ISREVENUE&gt;\n                    &lt;ISDEEMEDPOSITIVE TYPE=&quot;Logical&quot;&gt;Yes&lt;/ISDEEMEDPOSITIVE&gt;\n                    &lt;MASTERID TYPE=&quot;Number&quot;&gt; 166&lt;/MASTERID&gt;\n                &lt;/GROUP&gt;\n                &lt;GROUP NAME=&quot;Bank Accounts&quot; RESERVEDNAME=&quot;Bank Accounts&quot;&gt;\n                    &lt;ISDELETED TYPE=&quot;Logical&quot;&gt;&lt;/ISDELETED&gt;\n                    &lt;ISREVENUE TYPE=&quot;Logical&quot;&gt;No&lt;/ISREVENUE&gt;\n                    &lt;ISDEEMEDPOSITIVE TYPE=&quot;Logical&quot;&gt;Yes&lt;/ISDEEMEDPOSITIVE&gt;\n                    &lt;MASTERID TYPE=&quot;Number&quot;&gt; 22&lt;/MASTERID&gt;\n                &lt;/GROUP&gt;\n                &lt;GROUP NAME=&quot;Bank OD A/c&quot; RESERVEDNAME=&quot;Bank OD A/c&quot;&gt;\n                    &lt;ISDELETED TYPE=&quot;Logical&quot;&gt;&lt;/ISDELETED&gt;\n                    &lt;ISREVENUE TYPE=&quot;Logical&quot;&gt;No&lt;/ISREVENUE&gt;\n                    &lt;ISDEEMEDPOSITIVE TYPE=&quot;Logical&quot;&gt;No&lt;/ISDEEMEDPOSITIVE&gt;\n                    &lt;MASTERID TYPE=&quot;Number&quot;&gt; 11&lt;/MASTERID&gt;\n                &lt;/GROUP&gt;\n            &lt;/COLLECTION&gt;\n        &lt;/DATA&gt;\n    &lt;/BODY&gt;\n&lt;/ENVELOPE&gt;\n</code></pre>\n<p>Below is the code</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    File xmlFile = new File(&quot;C:/Srinivas/NewData.xml&quot;);\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder builder = factory.newDocumentBuilder();\n    Document doc = (Document) builder.parse(xmlFile);\n\n    NodeList nodeList = doc.getElementsByTagName(&quot;GROUP&quot;);\n    for (int itr = 0; itr &lt; nodeList.getLength(); itr++) {\n        Node node = nodeList.item(itr);\n        if (node.getNodeType() == Node.ELEMENT_NODE) {\n            Element element = (Element) node;\n            String name = element.getAttribute(&quot;Name&quot;);\n            System.out.println(&quot;Revenue Value : &quot; +    element.getElementsByTagName(&quot;ISREVENUE&quot;).item(0).getTextContent());\n            System.out.println(&quot;Deemed Value : &quot; + element.getElementsByTagName(&quot;ISDEEMEDPOSITIVE&quot;).item(0).getTextContent());\n        }\n    }\n    System.out.println(&quot;completed&quot;);\n} catch (Exception ex) {\n    System.out.println(ex.getMessage());\n}\n</code></pre>\n"},{"tags":["java","android","user-interface"],"answers":[{"tags":[],"owner":{"account_id":28804448,"reputation":1,"user_id":22060628,"display_name":"Subhraman Sarkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686836424,"creation_date":1686836424,"answer_id":76483093,"question_id":76456533,"body_markdown":"The RadioButtons in SetupActivity&#39;s layout were missing `android:layout_width` attributes.","title":"Options Menu activating wrong menuItems after changing related Activity","body":"<p>The RadioButtons in SetupActivity's layout were missing <code>android:layout_width</code> attributes.</p>\n"}],"owner":{"account_id":28804448,"reputation":1,"user_id":22060628,"display_name":"Subhraman Sarkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686836424,"creation_date":1686571697,"question_id":76456533,"body_markdown":"Problem :\r\nI have a simple App with just two activities : MainActivity and SetupActivity. MainActivity has an Options Menu. Clicking on the Options Menu&#39;s 4th option brings up the SetupActivity.\r\nHowever, if the change the SetupActivity&#39;s layout file and add more widgets/views (of any type), the App builds fine, but the Options Menu malfunctions :\r\n1. Clicking on the 4th option does not brings up the SetupActivity, but clicking on one of the other menuitem brings the SetupActivity (with the new widgets). Usually this is the 3rd menu item, but can be one of the others.\r\n2. Other menu items do not do what they are supposed to do.\r\n\r\nI&#39;ve tried adding different types of views in the layout of SetupActivity, which does not work. Also, changing the minSdkVersion in Android Manifest does not work either. The problem persists. Also, searching the Internet did not bring up any related problems for me.\r\n\r\n\r\nOptions Menu creation in MainActivity.java\r\n\r\n```\r\n@Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        MenuInflater inf = this.getMenuInflater();\r\n        inf.inflate(R.menu.main_menu, menu);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem mnu_item) {\r\n        switch (mnu_item.getItemId()) {\r\n            case R.id.mnuOpen :\r\n                openFile();\r\n                return true;\r\n                \r\n            case R.id.mnuClear :\r\n                area.clearAllPlots();\r\n            \tarea.initPlot(true);\r\n            \treturn true;\r\n            \t\r\n            case R.id.mnuSys :\r\n                Intent setupIntent = new Intent(MainActivity.this, SetupActivity.class);\r\n                startActivity(setupIntent);\r\n                return true;\r\n                \r\n            default :\r\n                return super.onOptionsItemSelected(mnu_item);\r\n        }\r\n    }\r\n```\r\n\r\nMainActivity&#39;s Options Menu\r\n\r\n```\r\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;item\r\n        android:id=&quot;@+id/mnuOpen&quot;\r\n        android:title=&quot;Open datafile&quot;/&gt;\r\n    &lt;item\r\n        android:id=&quot;@+id/mnuClear&quot;\r\n        android:title=&quot;Clear&quot;/&gt;\r\n    &lt;item\r\n        android:id=&quot;@+id/mnuPlot&quot;\r\n        android:title=&quot;Plot properties...&quot;/&gt;\r\n    &lt;item\r\n        android:id=&quot;@+id/mnuSys&quot;\r\n        android:title=&quot;Setup system...&quot;/&gt;\r\n    &lt;item\r\n        android:id=&quot;@+id/mnuExit&quot;\r\n        android:title=&quot;Exit&quot;/&gt;\r\n&lt;/menu&gt;\r\n\r\n```\r\n\r\n\r\n\r\n\r\nSetupActivity.java\r\n\r\n```\r\npackage com.babai.ssplot;\r\n\r\nimport android.app.ActionBar;\r\nimport android.app.Activity;\r\nimport android.os.Bundle;\r\nimport android.view.Menu;\r\nimport android.view.MenuInflater;\r\n\r\npublic class SetupActivity extends Activity {\r\n    @Override\r\n    protected void onCreate(Bundle savedState) {\r\n        super.onCreate(savedState);\r\n        this.setContentView(R.layout.activity_setup);\r\n        \r\n        // Customize ActionBar\r\n        ActionBar bar = this.getActionBar();\r\n        bar.setTitle(&quot;Sytem Setup&quot;);\r\n        bar.setSubtitle(&quot;Setup system of equations&quot;); \r\n    }\r\n    \r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        MenuInflater inf = this.getMenuInflater();\r\n        inf.inflate(R.menu.setup_menu, menu);\r\n        return super.onCreateOptionsMenu(menu);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nLayout of SetupActivity.java\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\r\n&lt;TableLayout\r\n\txmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:id=&quot;@+id/setup&quot;\r\n\tandroid:layout_height=&quot;fill_parent&quot;\r\n\tandroid:layout_width=&quot;fill_parent&quot;\r\n\tandroid:layout_marginLeft=&quot;20sp&quot;\r\n\tandroid:layout_marginTop=&quot;20sp&quot;\r\n    android:layout_centerHorizontal=&quot;true&quot; &gt;\r\n    \r\n    &lt;TableRow&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/lblHeadingType&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:text=&quot;System type :&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:textColor=&quot;#FF6633&quot;\r\n            android:layout_span=&quot;6&quot; /&gt;\r\n    &lt;/TableRow&gt;\r\n\t\r\n\t&lt;TableRow&gt;\r\n\t    &lt;RadioGroup\r\n\t        android:id=&quot;@+id/rgroup1&quot;\r\n\t        android:layout_span=&quot;5&quot;\r\n\t        android:layout_width=&quot;wrap_content&quot;\r\n\t        android:orientation=&quot;vertical&quot;\r\n\t    &gt;\r\n\t        &lt;RadioButton\r\n\t            android:id=&quot;@+id/rb1&quot;\r\n\t            android:text=&quot;1D function&quot;\r\n\t            android:checked=&quot;true&quot;\r\n\t             /&gt;\r\n            &lt;RadioButton\r\n\t            android:id=&quot;@+id/rb2&quot;\r\n\t            android:text=&quot;2D function&quot;\r\n\t            /&gt;\r\n\t            \r\n\t        &lt;RadioButton\r\n\t            android:id=&quot;@+id/rb3&quot;\r\n\t            android:text=&quot;Difference Equation&quot;\r\n\t            android:checked=&quot;true&quot;\r\n\t             /&gt;\r\n            &lt;RadioButton\r\n\t            android:id=&quot;@+id/rb4&quot;\r\n\t            android:text=&quot;Differential Equation&quot;\r\n\t            /&gt;\r\n\t    &lt;/RadioGroup&gt;\r\n\t&lt;/TableRow&gt;\r\n&lt;!--\t\r\n\t&lt;TableRow&gt;\r\n    \t&lt;TextView\r\n    \t\tandroid:id=&quot;@+id/lblHR&quot;\r\n    \t\tandroid:text=&quot;Range :&quot;\r\n    \t\tandroid:textStyle=&quot;bold&quot;\r\n    \t\tandroid:textColor=&quot;#33FF33&quot;\r\n    \t\tandroid:textSize=&quot;20sp&quot;\r\n    \t\tandroid:layout_span=&quot;10&quot;\r\n    \t\tandroid:layout_column=&quot;1&quot; /&gt;\r\n    &lt;/TableRow&gt;--&gt;\r\n    \r\n    &lt;TableRow&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/lblHeadingEqn&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:text=&quot;Equations :&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:textColor=&quot;#FF3366&quot;\r\n            android:layout_span=&quot;10&quot; /&gt;\r\n    &lt;/TableRow&gt;\r\n    &lt;TableRow&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/lblEqn1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Eqn. 1 :&quot;\r\n            android:textSize=&quot;16sp&quot;\r\n            android:layout_column=&quot;1&quot; /&gt;\r\n            \r\n         &lt;EditText\r\n              android:id=&quot;@+id/editEqn1&quot;\r\n              android:layout_centerHorizontal=&quot;true&quot;\r\n              android:textSize=&quot;16sp&quot;\r\n              android:layout_width=&quot;200sp&quot;\r\n              android:layout_height=&quot;wrap_content&quot;\r\n              android:layout_column=&quot;2&quot; /&gt;\r\n\t&lt;/TableRow&gt;\r\n\t\r\n\t&lt;TableRow&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/lblEqn2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Eqn. 2 :&quot;\r\n            android:textSize=&quot;16sp&quot;\r\n            android:layout_column=&quot;1&quot; /&gt;\r\n            \r\n         &lt;EditText\r\n              android:id=&quot;@+id/editEqn2&quot;\r\n              android:layout_centerHorizontal=&quot;true&quot;\r\n              android:textSize=&quot;16sp&quot;\r\n              android:layout_width=&quot;200sp&quot;\r\n              android:layout_height=&quot;wrap_content&quot;\r\n              android:layout_column=&quot;2&quot;/&gt;\r\n\t&lt;/TableRow&gt;\r\n\t\r\n\t&lt;TableRow&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/lblEqn3&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Eqn. 3 :&quot;\r\n            android:textSize=&quot;16sp&quot;\r\n            android:layout_column=&quot;1&quot; /&gt;\r\n            \r\n         &lt;EditText\r\n              android:id=&quot;@+id/editEqn3&quot;\r\n              android:layout_centerHorizontal=&quot;true&quot;\r\n              android:textSize=&quot;16sp&quot;\r\n              android:layout_width=&quot;200sp&quot;\r\n              android:layout_height=&quot;wrap_content&quot;\r\n              android:layout_column=&quot;2&quot;\r\n               /&gt;\r\n\t&lt;/TableRow&gt;\r\n\r\n&lt;/TableLayout&gt;\r\n\r\n```\r\n\r\nTried :\r\nAdding more widgets to SetupActivity. Changing minSdkVersion from 19 to 25 and 11.\r\n\r\nExpected :\r\nActivity shows normally with the new widgets.\r\n\r\nWhat Happens :\r\nthe Options Menu malfunctions :\r\n1. Clicking on the 4th option does not brings up the SetupActivity, but clicking on one of the other menuitem brings the SetupActivity (with the new widgets). Usually this is the 3rd menu item, but can be one of the others.\r\n2. Other menu items do not do what they are supposed to do.","title":"Options Menu activating wrong menuItems after changing related Activity","body":"<p>Problem :\nI have a simple App with just two activities : MainActivity and SetupActivity. MainActivity has an Options Menu. Clicking on the Options Menu's 4th option brings up the SetupActivity.\nHowever, if the change the SetupActivity's layout file and add more widgets/views (of any type), the App builds fine, but the Options Menu malfunctions :</p>\n<ol>\n<li>Clicking on the 4th option does not brings up the SetupActivity, but clicking on one of the other menuitem brings the SetupActivity (with the new widgets). Usually this is the 3rd menu item, but can be one of the others.</li>\n<li>Other menu items do not do what they are supposed to do.</li>\n</ol>\n<p>I've tried adding different types of views in the layout of SetupActivity, which does not work. Also, changing the minSdkVersion in Android Manifest does not work either. The problem persists. Also, searching the Internet did not bring up any related problems for me.</p>\n<p>Options Menu creation in MainActivity.java</p>\n<pre><code>@Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        MenuInflater inf = this.getMenuInflater();\n        inf.inflate(R.menu.main_menu, menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem mnu_item) {\n        switch (mnu_item.getItemId()) {\n            case R.id.mnuOpen :\n                openFile();\n                return true;\n                \n            case R.id.mnuClear :\n                area.clearAllPlots();\n                area.initPlot(true);\n                return true;\n                \n            case R.id.mnuSys :\n                Intent setupIntent = new Intent(MainActivity.this, SetupActivity.class);\n                startActivity(setupIntent);\n                return true;\n                \n            default :\n                return super.onOptionsItemSelected(mnu_item);\n        }\n    }\n</code></pre>\n<p>MainActivity's Options Menu</p>\n<pre><code>&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;item\n        android:id=&quot;@+id/mnuOpen&quot;\n        android:title=&quot;Open datafile&quot;/&gt;\n    &lt;item\n        android:id=&quot;@+id/mnuClear&quot;\n        android:title=&quot;Clear&quot;/&gt;\n    &lt;item\n        android:id=&quot;@+id/mnuPlot&quot;\n        android:title=&quot;Plot properties...&quot;/&gt;\n    &lt;item\n        android:id=&quot;@+id/mnuSys&quot;\n        android:title=&quot;Setup system...&quot;/&gt;\n    &lt;item\n        android:id=&quot;@+id/mnuExit&quot;\n        android:title=&quot;Exit&quot;/&gt;\n&lt;/menu&gt;\n\n</code></pre>\n<p>SetupActivity.java</p>\n<pre><code>package com.babai.ssplot;\n\nimport android.app.ActionBar;\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.view.Menu;\nimport android.view.MenuInflater;\n\npublic class SetupActivity extends Activity {\n    @Override\n    protected void onCreate(Bundle savedState) {\n        super.onCreate(savedState);\n        this.setContentView(R.layout.activity_setup);\n        \n        // Customize ActionBar\n        ActionBar bar = this.getActionBar();\n        bar.setTitle(&quot;Sytem Setup&quot;);\n        bar.setSubtitle(&quot;Setup system of equations&quot;); \n    }\n    \n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        MenuInflater inf = this.getMenuInflater();\n        inf.inflate(R.menu.setup_menu, menu);\n        return super.onCreateOptionsMenu(menu);\n    }\n}\n</code></pre>\n<p>Layout of SetupActivity.java</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n\n&lt;TableLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:id=&quot;@+id/setup&quot;\n    android:layout_height=&quot;fill_parent&quot;\n    android:layout_width=&quot;fill_parent&quot;\n    android:layout_marginLeft=&quot;20sp&quot;\n    android:layout_marginTop=&quot;20sp&quot;\n    android:layout_centerHorizontal=&quot;true&quot; &gt;\n    \n    &lt;TableRow&gt;\n        &lt;TextView\n            android:id=&quot;@+id/lblHeadingType&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:textStyle=&quot;bold&quot;\n            android:text=&quot;System type :&quot;\n            android:textSize=&quot;20sp&quot;\n            android:textColor=&quot;#FF6633&quot;\n            android:layout_span=&quot;6&quot; /&gt;\n    &lt;/TableRow&gt;\n    \n    &lt;TableRow&gt;\n        &lt;RadioGroup\n            android:id=&quot;@+id/rgroup1&quot;\n            android:layout_span=&quot;5&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:orientation=&quot;vertical&quot;\n        &gt;\n            &lt;RadioButton\n                android:id=&quot;@+id/rb1&quot;\n                android:text=&quot;1D function&quot;\n                android:checked=&quot;true&quot;\n                 /&gt;\n            &lt;RadioButton\n                android:id=&quot;@+id/rb2&quot;\n                android:text=&quot;2D function&quot;\n                /&gt;\n                \n            &lt;RadioButton\n                android:id=&quot;@+id/rb3&quot;\n                android:text=&quot;Difference Equation&quot;\n                android:checked=&quot;true&quot;\n                 /&gt;\n            &lt;RadioButton\n                android:id=&quot;@+id/rb4&quot;\n                android:text=&quot;Differential Equation&quot;\n                /&gt;\n        &lt;/RadioGroup&gt;\n    &lt;/TableRow&gt;\n&lt;!--    \n    &lt;TableRow&gt;\n        &lt;TextView\n            android:id=&quot;@+id/lblHR&quot;\n            android:text=&quot;Range :&quot;\n            android:textStyle=&quot;bold&quot;\n            android:textColor=&quot;#33FF33&quot;\n            android:textSize=&quot;20sp&quot;\n            android:layout_span=&quot;10&quot;\n            android:layout_column=&quot;1&quot; /&gt;\n    &lt;/TableRow&gt;--&gt;\n    \n    &lt;TableRow&gt;\n        &lt;TextView\n            android:id=&quot;@+id/lblHeadingEqn&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:textStyle=&quot;bold&quot;\n            android:text=&quot;Equations :&quot;\n            android:textSize=&quot;20sp&quot;\n            android:textColor=&quot;#FF3366&quot;\n            android:layout_span=&quot;10&quot; /&gt;\n    &lt;/TableRow&gt;\n    &lt;TableRow&gt;\n        &lt;TextView\n            android:id=&quot;@+id/lblEqn1&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Eqn. 1 :&quot;\n            android:textSize=&quot;16sp&quot;\n            android:layout_column=&quot;1&quot; /&gt;\n            \n         &lt;EditText\n              android:id=&quot;@+id/editEqn1&quot;\n              android:layout_centerHorizontal=&quot;true&quot;\n              android:textSize=&quot;16sp&quot;\n              android:layout_width=&quot;200sp&quot;\n              android:layout_height=&quot;wrap_content&quot;\n              android:layout_column=&quot;2&quot; /&gt;\n    &lt;/TableRow&gt;\n    \n    &lt;TableRow&gt;\n        &lt;TextView\n            android:id=&quot;@+id/lblEqn2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Eqn. 2 :&quot;\n            android:textSize=&quot;16sp&quot;\n            android:layout_column=&quot;1&quot; /&gt;\n            \n         &lt;EditText\n              android:id=&quot;@+id/editEqn2&quot;\n              android:layout_centerHorizontal=&quot;true&quot;\n              android:textSize=&quot;16sp&quot;\n              android:layout_width=&quot;200sp&quot;\n              android:layout_height=&quot;wrap_content&quot;\n              android:layout_column=&quot;2&quot;/&gt;\n    &lt;/TableRow&gt;\n    \n    &lt;TableRow&gt;\n        &lt;TextView\n            android:id=&quot;@+id/lblEqn3&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Eqn. 3 :&quot;\n            android:textSize=&quot;16sp&quot;\n            android:layout_column=&quot;1&quot; /&gt;\n            \n         &lt;EditText\n              android:id=&quot;@+id/editEqn3&quot;\n              android:layout_centerHorizontal=&quot;true&quot;\n              android:textSize=&quot;16sp&quot;\n              android:layout_width=&quot;200sp&quot;\n              android:layout_height=&quot;wrap_content&quot;\n              android:layout_column=&quot;2&quot;\n               /&gt;\n    &lt;/TableRow&gt;\n\n&lt;/TableLayout&gt;\n\n</code></pre>\n<p>Tried :\nAdding more widgets to SetupActivity. Changing minSdkVersion from 19 to 25 and 11.</p>\n<p>Expected :\nActivity shows normally with the new widgets.</p>\n<p>What Happens :\nthe Options Menu malfunctions :</p>\n<ol>\n<li>Clicking on the 4th option does not brings up the SetupActivity, but clicking on one of the other menuitem brings the SetupActivity (with the new widgets). Usually this is the 3rd menu item, but can be one of the others.</li>\n<li>Other menu items do not do what they are supposed to do.</li>\n</ol>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686821685,"post_id":76481055,"comment_id":134853206,"body_markdown":"Seems about right. What&#39;s the problem?","body":"Seems about right. What&#39;s the problem?"},{"owner":{"account_id":24136874,"reputation":91,"user_id":18103650,"display_name":"Laplas"},"score":0,"creation_date":1686821871,"post_id":76481055,"comment_id":134853242,"body_markdown":"I don&#39;t know how to generate 5 users of a similar nature in the pay array and all in a JSON object.","body":"I don&#39;t know how to generate 5 users of a similar nature in the pay array and all in a JSON object."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1686821971,"post_id":76481055,"comment_id":134853269,"body_markdown":"You&#39;ll need another `JSONObject` with a `pays` key and a `JSONArray` value","body":"You&#39;ll need another <code>JSONObject</code> with a <code>pays</code> key and a <code>JSONArray</code> value"},{"owner":{"account_id":4215498,"reputation":1219,"user_id":3451846,"display_name":"Valerio Bozz"},"score":0,"creation_date":1687163648,"post_id":76481055,"comment_id":134893210,"body_markdown":"Probably the root problem is &quot;how to make an array in JSON from Java&quot;. Here a solution: https://stackoverflow.com/questions/13268799/create-a-jsonarray","body":"Probably the root problem is &quot;how to make an array in JSON from Java&quot;. Here a solution: <a href=\"https://stackoverflow.com/questions/13268799/create-a-jsonarray\">stackoverflow.com/questions/13268799/create-a-jsonarray</a>"},{"owner":{"account_id":4215498,"reputation":1219,"user_id":3451846,"display_name":"Valerio Bozz"},"score":0,"creation_date":1687163692,"post_id":76481055,"comment_id":134893220,"body_markdown":"Does this answer your question? [Create a JSONArray](https://stackoverflow.com/questions/13268799/create-a-jsonarray)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13268799/create-a-jsonarray\">Create a JSONArray</a>"}],"answers":[{"tags":[],"owner":{"account_id":26037703,"reputation":305,"user_id":19742955,"display_name":"Jai Prakash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686836256,"creation_date":1686833291,"answer_id":76482644,"question_id":76481055,"body_markdown":"Your code:\r\n\r\n&gt;     Faker faker = new Faker();\r\n&gt;     JSONObject json = new JSONObject();\r\n&gt; \r\n&gt;     json.put(&quot;lastName&quot;, faker.name().lastName());\r\n&gt;     json.put(&quot;firstName&quot;, faker.name().firstName());\r\n&gt; \r\n&gt;     json.put(&quot;phoneNumber&quot;, faker.phoneNumber());\r\n&gt;     json.put(&quot;amount&quot;, 1001);\r\n&gt; \r\n&gt;     return json;\r\n\r\nUpdated Code:\r\n\r\n\r\n    Faker faker = new Faker();\r\n    JSONObject json = new JSONObject();\r\n\r\n    json.put(&quot;lastName&quot;, faker.name().lastName());\r\n    json.put(&quot;firstName&quot;, faker.name().firstName());\r\n\r\n    json.put(&quot;phoneNumber&quot;, faker.phoneNumber());\r\n    json.put(&quot;amount&quot;, 1001);\r\n    \r\n    // updated here\r\n    JSONArray jsonArray=new JSONArray();\r\n    jsonArray.put(json);\r\n\r\n    JSONObject finalJson = new JSONObject(); \r\n    finalJson.put(&quot;pays&quot;,jsonArray);\r\n\r\n    return finalJson;","title":"How make array json object","body":"<p>Your code:</p>\n<blockquote>\n<pre><code>Faker faker = new Faker();\nJSONObject json = new JSONObject();\n\njson.put(&quot;lastName&quot;, faker.name().lastName());\njson.put(&quot;firstName&quot;, faker.name().firstName());\n\njson.put(&quot;phoneNumber&quot;, faker.phoneNumber());\njson.put(&quot;amount&quot;, 1001);\n\nreturn json;\n</code></pre>\n</blockquote>\n<p>Updated Code:</p>\n<pre><code>Faker faker = new Faker();\nJSONObject json = new JSONObject();\n\njson.put(&quot;lastName&quot;, faker.name().lastName());\njson.put(&quot;firstName&quot;, faker.name().firstName());\n\njson.put(&quot;phoneNumber&quot;, faker.phoneNumber());\njson.put(&quot;amount&quot;, 1001);\n\n// updated here\nJSONArray jsonArray=new JSONArray();\njsonArray.put(json);\n\nJSONObject finalJson = new JSONObject(); \nfinalJson.put(&quot;pays&quot;,jsonArray);\n\nreturn finalJson;\n</code></pre>\n"}],"owner":{"account_id":24136874,"reputation":91,"user_id":18103650,"display_name":"Laplas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1686836256,"creation_date":1686821266,"question_id":76481055,"body_markdown":"how do I make such a Json? I use a regular JSONObject and Array Json and don&#39;t understand how to create exactly such a Json object\r\n\r\n```\r\n        Faker faker = new Faker();\r\n        JSONObject json = new JSONObject();\r\n\r\n        json.put(&quot;lastName&quot;, faker.name().lastName());\r\n        json.put(&quot;firstName&quot;, faker.name().firstName());\r\n\r\n        json.put(&quot;phoneNumber&quot;, faker.phoneNumber());\r\n        json.put(&quot;amount&quot;, 1001);\r\n\r\n        return json;\r\n\r\n```\r\nI want to get in such a JSON\r\n```\r\n{\r\n  &quot;pays&quot;:[\r\n    {\r\n      &quot;lastName&quot;: &quot;Kek&quot;,\r\n      &quot;firstName&quot;: &quot;lol&quot;,\r\n      &quot;phoneNumber&quot;: 4325454555,\r\n      &quot;amount&quot;: 1000\r\n    },\r\n    {\r\n      &quot;lastName&quot;: &quot;Alex&quot;,\r\n      &quot;firstName&quot;: &quot;Lol&quot;,\r\n      &quot;phoneNumber&quot;: 9170067401,\r\n      &quot;amount&quot;: 1000\r\n    }\r\n  ]\r\n}\r\n```","title":"How make array json object","body":"<p>how do I make such a Json? I use a regular JSONObject and Array Json and don't understand how to create exactly such a Json object</p>\n<pre><code>        Faker faker = new Faker();\n        JSONObject json = new JSONObject();\n\n        json.put(&quot;lastName&quot;, faker.name().lastName());\n        json.put(&quot;firstName&quot;, faker.name().firstName());\n\n        json.put(&quot;phoneNumber&quot;, faker.phoneNumber());\n        json.put(&quot;amount&quot;, 1001);\n\n        return json;\n\n</code></pre>\n<p>I want to get in such a JSON</p>\n<pre><code>{\n  &quot;pays&quot;:[\n    {\n      &quot;lastName&quot;: &quot;Kek&quot;,\n      &quot;firstName&quot;: &quot;lol&quot;,\n      &quot;phoneNumber&quot;: 4325454555,\n      &quot;amount&quot;: 1000\n    },\n    {\n      &quot;lastName&quot;: &quot;Alex&quot;,\n      &quot;firstName&quot;: &quot;Lol&quot;,\n      &quot;phoneNumber&quot;: 9170067401,\n      &quot;amount&quot;: 1000\n    }\n  ]\n}\n</code></pre>\n"},{"tags":["java","android","node.js","android-studio","post"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1686834892,"post_id":76482586,"comment_id":134856103,"body_markdown":"You should log much more. Also in the async task and catch blocks.","body":"You should log much more. Also in the async task and catch blocks."}],"answers":[{"tags":[],"owner":{"account_id":9527261,"reputation":93,"user_id":7080129,"display_name":"sstlv_seraph"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686836103,"creation_date":1686836103,"answer_id":76483045,"question_id":76482586,"body_markdown":"Try to check the communication between your Android application and the server. \r\n\r\nSee if the `AsyncTask` is being executing properly.\r\n\r\nCheck internet permissions in your AndroidManifest.xml file\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n```\r\n\r\nIf its not in localhost, check if your server is accessible from your Android device or simulator. Make sure you&#39;re using the correct IP address or hostname and port number to connect to the server. \r\n\r\nInstead of `AsyncTask`, consider using `HttpURLConnection`, `OkHttp`, or libraries like `Retrofit` or `Volley`.\r\n\r\nRetrofit example:\r\n\r\n- Add dependency to your build.gradle:\r\n```groovy\r\nimplementation &#39;com.squareup.retrofit2:retrofit:2.9.0&#39;\r\nimplementation &#39;com.squareup.retrofit2:converter-gson:2.9.0&#39; // if you&#39;re using JSON\r\n```\r\n\r\n- Create instance and define an interface for your API:\r\n```java\r\nRetrofit retrofit = new Retrofit.Builder()\r\n    .baseUrl(&quot;http://10.0.2.2:3000/&quot;)\r\n    .addConverterFactory(GsonConverterFactory.create()) \r\n    .build();\r\n\r\n// API interface\r\ninterface MyApi {\r\n    @POST(&quot;login&quot;)\r\n    Call&lt;ResponseBody&gt; login(@Body JsonObject body); // replace with the request body type\r\n}\r\n\r\nMyApi myApi = retrofit.create(MyApi.class);\r\n```\r\n\r\n- Use the Retrofit to call the API in `postData`:\r\n```java\r\npublic void postData(String username, String password, String role, String company) {\r\n    try {\r\n        JsonObject body = new JsonObject();\r\n        body.addProperty(&quot;username&quot;, username);\r\n        body.addProperty(&quot;password&quot;, password);\r\n        body.addProperty(&quot;role&quot;, role);\r\n        body.addProperty(&quot;company&quot;, company);\r\n\r\n        Call&lt;ResponseBody&gt; call = myApi.login(body);\r\n        call.enqueue(new Callback&lt;ResponseBody&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\r\n                if (response.isSuccessful()) {\r\n                    // Handle successful response\r\n                    // ...\r\n                } else {\r\n                    // Handle unsuccessful response\r\n                    // ...\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\r\n                // Handle network failure\r\n                // ...\r\n            }\r\n        });\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```","title":"Problem with POST requests in JSON using HTTP Client in Android","body":"<p>Try to check the communication between your Android application and the server.</p>\n<p>See if the <code>AsyncTask</code> is being executing properly.</p>\n<p>Check internet permissions in your AndroidManifest.xml file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n</code></pre>\n<p>If its not in localhost, check if your server is accessible from your Android device or simulator. Make sure you're using the correct IP address or hostname and port number to connect to the server.</p>\n<p>Instead of <code>AsyncTask</code>, consider using <code>HttpURLConnection</code>, <code>OkHttp</code>, or libraries like <code>Retrofit</code> or <code>Volley</code>.</p>\n<p>Retrofit example:</p>\n<ul>\n<li>Add dependency to your build.gradle:</li>\n</ul>\n<pre><code>implementation 'com.squareup.retrofit2:retrofit:2.9.0'\nimplementation 'com.squareup.retrofit2:converter-gson:2.9.0' // if you're using JSON\n</code></pre>\n<ul>\n<li>Create instance and define an interface for your API:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>Retrofit retrofit = new Retrofit.Builder()\n    .baseUrl(&quot;http://10.0.2.2:3000/&quot;)\n    .addConverterFactory(GsonConverterFactory.create()) \n    .build();\n\n// API interface\ninterface MyApi {\n    @POST(&quot;login&quot;)\n    Call&lt;ResponseBody&gt; login(@Body JsonObject body); // replace with the request body type\n}\n\nMyApi myApi = retrofit.create(MyApi.class);\n</code></pre>\n<ul>\n<li>Use the Retrofit to call the API in <code>postData</code>:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public void postData(String username, String password, String role, String company) {\n    try {\n        JsonObject body = new JsonObject();\n        body.addProperty(&quot;username&quot;, username);\n        body.addProperty(&quot;password&quot;, password);\n        body.addProperty(&quot;role&quot;, role);\n        body.addProperty(&quot;company&quot;, company);\n\n        Call&lt;ResponseBody&gt; call = myApi.login(body);\n        call.enqueue(new Callback&lt;ResponseBody&gt;() {\n            @Override\n            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\n                if (response.isSuccessful()) {\n                    // Handle successful response\n                    // ...\n                } else {\n                    // Handle unsuccessful response\n                    // ...\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\n                // Handle network failure\n                // ...\n            }\n        });\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27352742,"reputation":15,"user_id":20861643,"display_name":"abcd1211231"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686836103,"creation_date":1686832839,"question_id":76482586,"body_markdown":"I have a button in html file when it is pressed it call the postData function in MainActivity.java\r\n\r\n    &lt;script&gt;\r\n    document.getElementById(&quot;login-button&quot;).addEventListener(&quot;click&quot;, function(event) {\r\n        event.preventDefault();\r\n\r\n        var username = document.getElementById(&quot;username&quot;).value;\r\n        var password = document.getElementById(&quot;password&quot;).value;\r\n        var role = document.getElementById(&quot;role&quot;).value;\r\n        var company = document.getElementById(&quot;company&quot;).value;\r\n\r\n        Android.postData(username, password, role, company);\r\n    });\r\n&lt;/script&gt;\r\n\r\nMainActivity.java:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    private String username;\r\n    private String password;\r\n    private String role;\r\n    private String company;\r\n    private Retrofit retrofit;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        WebView webView = findViewById(R.id.webview);\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.addJavascriptInterface(new WebAppInterface(), &quot;Android&quot;);\r\n        webView.loadUrl(&quot;file:///android_asset/index.html&quot;);\r\n\r\n\r\n    }\r\n\r\n    public class WebAppInterface {\r\n        @JavascriptInterface\r\n        public void postData(String username, String password, String role, String company) {\r\n            try {\r\n                //Test the data is fit with html input\r\n                System.out.println(&quot;Username: &quot; + username);\r\n                System.out.println(&quot;Password: &quot; + password);\r\n                System.out.println(&quot;Role: &quot; + role);\r\n                System.out.println(&quot;Company: &quot; + company);\r\n\r\n                JSONObject jsonObject = new JSONObject();\r\n                jsonObject.put(&quot;username&quot;, username);\r\n                jsonObject.put(&quot;password&quot;, password);\r\n                jsonObject.put(&quot;role&quot;, role);\r\n                jsonObject.put(&quot;company&quot;, company);\r\n                String jsonString = jsonObject.toString();\r\n                if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.P) {\r\n                    new post().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, jsonString);\r\n                } else {\r\n                    new post().execute(jsonString);\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n    class post extends AsyncTask&lt;String, Void, String&gt; {\r\n\r\n        @Override\r\n        protected String doInBackground(String... strings) {\r\n            try {\r\n\r\n                // on below line creating a url to post the data.\r\n                URL url = new URL(&quot;http://10.0.2.2:3000/login&quot;);\r\n\r\n                // on below line opening the connection.\r\n                HttpURLConnection client = (HttpURLConnection) url.openConnection();\r\n\r\n                // on below line setting method as post.\r\n                client.setRequestMethod(&quot;POST&quot;);\r\n\r\n                // on below line setting content type and accept type.\r\n                client.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n                client.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\n                // on below line setting client.\r\n                client.setDoOutput(true);\r\n\r\n                // on below line we are creating an output stream and posting the data.\r\n                try (OutputStream os = client.getOutputStream()) {\r\n                    byte[] input = strings[0].getBytes(&quot;utf-8&quot;);\r\n                    os.write(input, 0, input.length);\r\n                }\r\n\r\n                // on below line creating and initializing buffer reader.\r\n                try (BufferedReader br = new BufferedReader(\r\n                        new InputStreamReader(client.getInputStream(), &quot;utf-8&quot;))) {\r\n\r\n                    // on below line creating a string builder.\r\n                    StringBuilder response = new StringBuilder();\r\n\r\n                    // on below line creating a variable for response line.\r\n                    String responseLine = null;\r\n\r\n                    // on below line writing the response\r\n                    while ((responseLine = br.readLine()) != null) {\r\n                        response.append(responseLine.trim());\r\n                    }\r\n                }\r\n\r\n            } catch (Exception e) {\r\n\r\n                // on below line handling the exception.\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nAfter submit button Logcat show:\r\n```\r\n2023-06-15 05:21:08.684   505-505   AutofillManager         com.example.myapplication            V  requestHideFillUi(null): anchor = null\r\n2023-06-15 05:21:08.763   505-2113  System.out              com.example.myapplication            I  Username: 1\r\n2023-06-15 05:21:08.763   505-2113  System.out              com.example.myapplication            I  Password: 1\r\n2023-06-15 05:21:08.763   505-2113  System.out              com.example.myapplication            I  Role: Company\r\n2023-06-15 05:21:08.763   505-2113  System.out              com.example.myapplication            I  Company: Company 1\r\n```\r\nThis is my server.js:\r\n```\r\napp.post(&#39;/login&#39;, (req, res) =&gt; {\r\n    const { username, password, role, company } = req.body;\r\n    // Perform your login logic here\r\n    // For demonstration purposes, let&#39;s assume the username is &quot;admin&quot; and password is &quot;password&quot;\r\n    console.log(username, password, role, company);\r\n\r\n    if (role === &#39;Company&#39; &amp;&amp; company === &#39;Company 2&#39; &amp;&amp;\r\n        username === &#39;admin2&#39; &amp;&amp; password === &#39;password&#39;) {\r\n\r\n        res.json({ success: true, message: &#39;org2CreateUser.html&#39; });\r\n    }\r\n    if (role === &#39;Company&#39; &amp;&amp; company === &#39;Company 1&#39; &amp;&amp;\r\n        username === &#39;admin1&#39; &amp;&amp; password === &#39;password&#39;) {\r\n\r\n        res.json({ success: true, message: &#39;org1CreateUser.html&#39; });\r\n    }\r\n    if (role === &#39;Employer&#39;) {\r\n        credentials.forEach(element =&gt; {\r\n            if(element.username === username &amp;&amp; element.password == password) {\r\n                res.json({ success: true, message: &#39;upload.html&#39; });\r\n                return;\r\n            }\r\n        });\r\n        res.status(401).json({ success: false, message: &#39;Invalid username or password&#39; });\r\n    }\r\n});\r\napp.listen(3000, () =&gt; {\r\n    console.log(&#39;Server is running on port 3000&#39;);\r\n});\r\n```\r\nThe problem is i dont see the console.log(username, password, role, company); respone in console.log of server.When i use curl to test server it show normally:\r\n```\r\ncurl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{\r\n  &quot;username&quot;: &quot;admin&quot;,\r\n  &quot;password&quot;: &quot;password&quot;,\r\n  &quot;role&quot;: &quot;Company&quot;,\r\n  &quot;company&quot;: &quot;Company 1&quot;\r\n}&#39; http://localhost:3000/login\r\n```\r\nI dont know the json is send to the server or not. I use Android Studio in ubuntu vmware and connect my phone with usb debug.","title":"Problem with POST requests in JSON using HTTP Client in Android","body":"<p>I have a button in html file when it is pressed it call the postData function in MainActivity.java</p>\n<pre><code>&lt;script&gt;\ndocument.getElementById(&quot;login-button&quot;).addEventListener(&quot;click&quot;, function(event) {\n    event.preventDefault();\n\n    var username = document.getElementById(&quot;username&quot;).value;\n    var password = document.getElementById(&quot;password&quot;).value;\n    var role = document.getElementById(&quot;role&quot;).value;\n    var company = document.getElementById(&quot;company&quot;).value;\n\n    Android.postData(username, password, role, company);\n});\n</code></pre>\n\n<p>MainActivity.java:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\nprivate String username;\nprivate String password;\nprivate String role;\nprivate String company;\nprivate Retrofit retrofit;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    WebView webView = findViewById(R.id.webview);\n    webView.getSettings().setJavaScriptEnabled(true);\n    webView.addJavascriptInterface(new WebAppInterface(), &quot;Android&quot;);\n    webView.loadUrl(&quot;file:///android_asset/index.html&quot;);\n\n\n}\n\npublic class WebAppInterface {\n    @JavascriptInterface\n    public void postData(String username, String password, String role, String company) {\n        try {\n            //Test the data is fit with html input\n            System.out.println(&quot;Username: &quot; + username);\n            System.out.println(&quot;Password: &quot; + password);\n            System.out.println(&quot;Role: &quot; + role);\n            System.out.println(&quot;Company: &quot; + company);\n\n            JSONObject jsonObject = new JSONObject();\n            jsonObject.put(&quot;username&quot;, username);\n            jsonObject.put(&quot;password&quot;, password);\n            jsonObject.put(&quot;role&quot;, role);\n            jsonObject.put(&quot;company&quot;, company);\n            String jsonString = jsonObject.toString();\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.P) {\n                new post().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, jsonString);\n            } else {\n                new post().execute(jsonString);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\nclass post extends AsyncTask&lt;String, Void, String&gt; {\n\n    @Override\n    protected String doInBackground(String... strings) {\n        try {\n\n            // on below line creating a url to post the data.\n            URL url = new URL(&quot;http://10.0.2.2:3000/login&quot;);\n\n            // on below line opening the connection.\n            HttpURLConnection client = (HttpURLConnection) url.openConnection();\n\n            // on below line setting method as post.\n            client.setRequestMethod(&quot;POST&quot;);\n\n            // on below line setting content type and accept type.\n            client.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n            client.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n\n            // on below line setting client.\n            client.setDoOutput(true);\n\n            // on below line we are creating an output stream and posting the data.\n            try (OutputStream os = client.getOutputStream()) {\n                byte[] input = strings[0].getBytes(&quot;utf-8&quot;);\n                os.write(input, 0, input.length);\n            }\n\n            // on below line creating and initializing buffer reader.\n            try (BufferedReader br = new BufferedReader(\n                    new InputStreamReader(client.getInputStream(), &quot;utf-8&quot;))) {\n\n                // on below line creating a string builder.\n                StringBuilder response = new StringBuilder();\n\n                // on below line creating a variable for response line.\n                String responseLine = null;\n\n                // on below line writing the response\n                while ((responseLine = br.readLine()) != null) {\n                    response.append(responseLine.trim());\n                }\n            }\n\n        } catch (Exception e) {\n\n            // on below line handling the exception.\n            e.printStackTrace();\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>}</p>\n<p>After submit button Logcat show:</p>\n<pre><code>2023-06-15 05:21:08.684   505-505   AutofillManager         com.example.myapplication            V  requestHideFillUi(null): anchor = null\n2023-06-15 05:21:08.763   505-2113  System.out              com.example.myapplication            I  Username: 1\n2023-06-15 05:21:08.763   505-2113  System.out              com.example.myapplication            I  Password: 1\n2023-06-15 05:21:08.763   505-2113  System.out              com.example.myapplication            I  Role: Company\n2023-06-15 05:21:08.763   505-2113  System.out              com.example.myapplication            I  Company: Company 1\n</code></pre>\n<p>This is my server.js:</p>\n<pre><code>app.post('/login', (req, res) =&gt; {\n    const { username, password, role, company } = req.body;\n    // Perform your login logic here\n    // For demonstration purposes, let's assume the username is &quot;admin&quot; and password is &quot;password&quot;\n    console.log(username, password, role, company);\n\n    if (role === 'Company' &amp;&amp; company === 'Company 2' &amp;&amp;\n        username === 'admin2' &amp;&amp; password === 'password') {\n\n        res.json({ success: true, message: 'org2CreateUser.html' });\n    }\n    if (role === 'Company' &amp;&amp; company === 'Company 1' &amp;&amp;\n        username === 'admin1' &amp;&amp; password === 'password') {\n\n        res.json({ success: true, message: 'org1CreateUser.html' });\n    }\n    if (role === 'Employer') {\n        credentials.forEach(element =&gt; {\n            if(element.username === username &amp;&amp; element.password == password) {\n                res.json({ success: true, message: 'upload.html' });\n                return;\n            }\n        });\n        res.status(401).json({ success: false, message: 'Invalid username or password' });\n    }\n});\napp.listen(3000, () =&gt; {\n    console.log('Server is running on port 3000');\n});\n</code></pre>\n<p>The problem is i dont see the console.log(username, password, role, company); respone in console.log of server.When i use curl to test server it show normally:</p>\n<pre><code>curl -X POST -H &quot;Content-Type: application/json&quot; -d '{\n  &quot;username&quot;: &quot;admin&quot;,\n  &quot;password&quot;: &quot;password&quot;,\n  &quot;role&quot;: &quot;Company&quot;,\n  &quot;company&quot;: &quot;Company 1&quot;\n}' http://localhost:3000/login\n</code></pre>\n<p>I dont know the json is send to the server or not. I use Android Studio in ubuntu vmware and connect my phone with usb debug.</p>\n"},{"tags":["java","android","bluetooth","android-permissions","runtime-permissions"],"answers":[{"tags":[],"owner":{"account_id":18844085,"reputation":23,"user_id":18554239,"display_name":"Leon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686836086,"creation_date":1686836086,"answer_id":76483042,"question_id":76450553,"body_markdown":"I was eventually able to solve this myself.\r\n\r\nWhilst I declared the BLUETOOTH_SCAN and BLUETOOTH_CONNECT permissions in my manifest file, they are not the right permissions to ask in my context. These two permissions are only suitable for Android 12 (API level 31) or higher, but my app runs on Android 9 (API level 28). For Android versions equal to or lower than 11 (API level 30), the app needs to request the ACCESS_FINE_LOCATION (or ACCESS_COARSE_LOCATION for API level 28 or lower) permission at runtime instead.\r\n\r\nFor more detailed (and important) information, please refer to [Bluetooth permissions | Android Developers][1]\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/connectivity/bluetooth/permissions","title":"Android Bluetooth runtime user permission request dialogue disappears immeadiately after creation. How to solve it?","body":"<p>I was eventually able to solve this myself.</p>\n<p>Whilst I declared the BLUETOOTH_SCAN and BLUETOOTH_CONNECT permissions in my manifest file, they are not the right permissions to ask in my context. These two permissions are only suitable for Android 12 (API level 31) or higher, but my app runs on Android 9 (API level 28). For Android versions equal to or lower than 11 (API level 30), the app needs to request the ACCESS_FINE_LOCATION (or ACCESS_COARSE_LOCATION for API level 28 or lower) permission at runtime instead.</p>\n<p>For more detailed (and important) information, please refer to <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth/permissions\" rel=\"nofollow noreferrer\">Bluetooth permissions | Android Developers</a></p>\n"}],"owner":{"account_id":18844085,"reputation":23,"user_id":18554239,"display_name":"Leon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686836086,"creation_date":1686487970,"question_id":76450553,"body_markdown":"I&#39;m trying to request runtime user permission in an Android program using the `ActivityResultLauncher#launch()` function. It&#39;s supposed to make a permissions dialogue requesting the user to grant the requested permission. But in my program, the dialogue disappears in less than half a second. Could you please point out what I got wrong?\r\n\r\nI requested the permission in the main activity using this code snippet:\r\n\r\n```\r\nif (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n\t\tLog.i(TAG, &quot;Bluetooth scan permission denied. Requesting...&quot;);\r\n\t\trequestPermissionLauncher.launch(Manifest.permission.BLUETOOTH_SCAN);\r\n\t\tLog.i(TAG, &quot;Permission requested. Awaiting user response&quot;);\r\n\t\treturn;\r\n}\r\n```\r\n\r\n`requestPermissionLauncher` is defined in the activity as fallows:\r\n\r\n```\r\nprivate ActivityResultLauncher&lt;String&gt; requestPermissionLauncher =\r\n\t\t\tregisterForActivityResult(new ActivityResultContracts.RequestPermission(), isGranted -&gt; {\r\n\t\t\tif (isGranted) {\r\n\t\t\t\tLog.i(TAG, &quot;Requested permission granted!&quot;);\r\n\t\t\t\tscanLeDevice();\r\n\t\t\t} else {\r\n\t\t\t\tLog.e(TAG, &quot;Requested permission denied!&quot;);\r\n\t\t\t\tToast.makeText(this, &quot;Permission denied! Sorry, we can&#39;t continue.&quot;, Toast.LENGTH_LONG);\r\n\t\t\t}\r\n\t\t});\r\n```\r\n\r\nSome selected Logcat messages are as fallows:\r\n\r\n```\r\n---------------------------- PROCESS STARTED (4871) for package com.example.ble_imu_data_viewer ----------------------------\r\n...\r\n2023-06-11 19:57:01.623  4871-4871  important_info          com.example.ble_imu_data_viewer      I  Bluetooth scan permission denied. Requesting...\r\n2023-06-11 19:57:01.648  4871-4871  important_info          com.example.ble_imu_data_viewer      I  Permission requested. Awaiting user response\r\n2023-06-11 19:57:01.709  4871-4871  ActivityThread          com.example.ble_imu_data_viewer      D  add activity client record, r= ActivityRecord{af555b6 token=android.os.BinderProxy@5980385 {com.example.ble_imu_data_viewer/com.example.ble_imu_data_viewer.MainActivity}} token= android.os.BinderProxy@5980385\r\n2023-06-11 19:57:01.720  4871-4871  ZrHung.AppEyeUiProbe    com.example.ble_imu_data_viewer      D  notify runnable to start.\r\n2023-06-11 19:57:01.737  4871-4871  OpenGLRenderer          com.example.ble_imu_data_viewer      D  Skia GL Pipeline\r\n2023-06-11 19:57:01.750  4871-4871  HwAppInnerBoostImpl     com.example.ble_imu_data_viewer      D  set config for com.example.ble_imu_data_viewer BOOST_FLAG=false REPORT_DURATION_CLICK=1000 REPORT_TIMES_CLICK=3 REPORT_DURATION_SLIDE=5000 REPORT_TIMES_SLIDE=16\r\n2023-06-11 19:57:01.753  4871-4871  OpenGLRenderer          com.example.ble_imu_data_viewer      D    HWUI Binary is  enabled\r\n2023-06-11 19:57:01.753  4871-4871  OpenGLRenderer          com.example.ble_imu_data_viewer      D  disableOutlineDraw is true\r\n2023-06-11 19:57:01.792  1263-1506  HiDATA_HiNetwork        system_server                        E  monitor handleActivityChange curPkgName is com.example.ble_imu_data_viewer curUid is 10174 lastPkgName is :com.huawei.android.launcher\r\n2023-06-11 19:57:01.796  4871-4871  ZrHung.AppEyeUiProbe    com.example.ble_imu_data_viewer      D  stop checker.\r\n2023-06-11 19:57:01.802  1263-1506  HiDATA_HiNetwork        system_server                        E  onAppStart packageName is com.example.ble_imu_data_viewer\r\n2023-06-11 19:57:01.803  1263-1506  HiDATA_HiNetwork        system_server                        E  contain db file packageName: com.example.ble_imu_data_viewer iscanacce:-1\r\n2023-06-11 19:57:01.806  1730-10535 DollieAdapterService    com.huawei.systemserver              E  notifyActivityState pkg:com.example.ble_imu_data_viewer/com.example.ble_imu_data_viewer.MainActivity state:2 fg:true mUid:10174\r\n...\r\n2023-06-11 19:57:11.906  4871-4871  important_info          com.example.ble_imu_data_viewer      E  Requested permission denied!\r\n2023-06-11 19:57:11.919  4871-4871  ZrHung.AppEyeUiProbe    com.example.ble_imu_data_viewer      D  notify runnable to start.\r\n2023-06-11 19:57:11.936  4871-4871  InputMethodManager      com.example.ble_imu_data_viewer      W  startInputReason = 1\r\n2023-06-11 19:57:11.937  1263-1506  HiDATA_HiNetwork        system_server                        E  monitor handleActivityChange curPkgName is com.example.ble_imu_data_viewer curUid is 10174 lastPkgName is :com.example.ble_imu_data_viewer\r\n2023-06-11 19:57:11.938  1730-10535 DollieAdapterService    com.huawei.systemserver              E  notifyActivityState pkg:com.example.ble_imu_data_viewer/com.example.ble_imu_data_viewer.MainActivity state:2 fg:true mUid:10174\r\n...\r\n```\r\n\r\nI have declared the requested permission, `BLUETOOTH_SCAN`, in the Manifest file via\r\n\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; tools:remove=&quot;android:maxSdkVersion&quot;/&gt;\r\n```\r\n\r\nThe entire sorce code and complete Logcat content are available below:\r\n\r\n[AndroidManifest.xml](https://pastebin.com/bu61uKFk)\r\n\r\n[MainActivity.java](https://pastebin.com/4NenQiK7)\r\n\r\n[build.gradle](https://pastebin.com/3izkyhrC)\r\n\r\n[Complete Logcat content][1]\r\n\r\n\r\n  [1]: https://pastebin.com/YzZDTjar","title":"Android Bluetooth runtime user permission request dialogue disappears immeadiately after creation. How to solve it?","body":"<p>I'm trying to request runtime user permission in an Android program using the <code>ActivityResultLauncher#launch()</code> function. It's supposed to make a permissions dialogue requesting the user to grant the requested permission. But in my program, the dialogue disappears in less than half a second. Could you please point out what I got wrong?</p>\n<p>I requested the permission in the main activity using this code snippet:</p>\n<pre><code>if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n        Log.i(TAG, &quot;Bluetooth scan permission denied. Requesting...&quot;);\n        requestPermissionLauncher.launch(Manifest.permission.BLUETOOTH_SCAN);\n        Log.i(TAG, &quot;Permission requested. Awaiting user response&quot;);\n        return;\n}\n</code></pre>\n<p><code>requestPermissionLauncher</code> is defined in the activity as fallows:</p>\n<pre><code>private ActivityResultLauncher&lt;String&gt; requestPermissionLauncher =\n            registerForActivityResult(new ActivityResultContracts.RequestPermission(), isGranted -&gt; {\n            if (isGranted) {\n                Log.i(TAG, &quot;Requested permission granted!&quot;);\n                scanLeDevice();\n            } else {\n                Log.e(TAG, &quot;Requested permission denied!&quot;);\n                Toast.makeText(this, &quot;Permission denied! Sorry, we can't continue.&quot;, Toast.LENGTH_LONG);\n            }\n        });\n</code></pre>\n<p>Some selected Logcat messages are as fallows:</p>\n<pre><code>---------------------------- PROCESS STARTED (4871) for package com.example.ble_imu_data_viewer ----------------------------\n...\n2023-06-11 19:57:01.623  4871-4871  important_info          com.example.ble_imu_data_viewer      I  Bluetooth scan permission denied. Requesting...\n2023-06-11 19:57:01.648  4871-4871  important_info          com.example.ble_imu_data_viewer      I  Permission requested. Awaiting user response\n2023-06-11 19:57:01.709  4871-4871  ActivityThread          com.example.ble_imu_data_viewer      D  add activity client record, r= ActivityRecord{af555b6 token=android.os.BinderProxy@5980385 {com.example.ble_imu_data_viewer/com.example.ble_imu_data_viewer.MainActivity}} token= android.os.BinderProxy@5980385\n2023-06-11 19:57:01.720  4871-4871  ZrHung.AppEyeUiProbe    com.example.ble_imu_data_viewer      D  notify runnable to start.\n2023-06-11 19:57:01.737  4871-4871  OpenGLRenderer          com.example.ble_imu_data_viewer      D  Skia GL Pipeline\n2023-06-11 19:57:01.750  4871-4871  HwAppInnerBoostImpl     com.example.ble_imu_data_viewer      D  set config for com.example.ble_imu_data_viewer BOOST_FLAG=false REPORT_DURATION_CLICK=1000 REPORT_TIMES_CLICK=3 REPORT_DURATION_SLIDE=5000 REPORT_TIMES_SLIDE=16\n2023-06-11 19:57:01.753  4871-4871  OpenGLRenderer          com.example.ble_imu_data_viewer      D    HWUI Binary is  enabled\n2023-06-11 19:57:01.753  4871-4871  OpenGLRenderer          com.example.ble_imu_data_viewer      D  disableOutlineDraw is true\n2023-06-11 19:57:01.792  1263-1506  HiDATA_HiNetwork        system_server                        E  monitor handleActivityChange curPkgName is com.example.ble_imu_data_viewer curUid is 10174 lastPkgName is :com.huawei.android.launcher\n2023-06-11 19:57:01.796  4871-4871  ZrHung.AppEyeUiProbe    com.example.ble_imu_data_viewer      D  stop checker.\n2023-06-11 19:57:01.802  1263-1506  HiDATA_HiNetwork        system_server                        E  onAppStart packageName is com.example.ble_imu_data_viewer\n2023-06-11 19:57:01.803  1263-1506  HiDATA_HiNetwork        system_server                        E  contain db file packageName: com.example.ble_imu_data_viewer iscanacce:-1\n2023-06-11 19:57:01.806  1730-10535 DollieAdapterService    com.huawei.systemserver              E  notifyActivityState pkg:com.example.ble_imu_data_viewer/com.example.ble_imu_data_viewer.MainActivity state:2 fg:true mUid:10174\n...\n2023-06-11 19:57:11.906  4871-4871  important_info          com.example.ble_imu_data_viewer      E  Requested permission denied!\n2023-06-11 19:57:11.919  4871-4871  ZrHung.AppEyeUiProbe    com.example.ble_imu_data_viewer      D  notify runnable to start.\n2023-06-11 19:57:11.936  4871-4871  InputMethodManager      com.example.ble_imu_data_viewer      W  startInputReason = 1\n2023-06-11 19:57:11.937  1263-1506  HiDATA_HiNetwork        system_server                        E  monitor handleActivityChange curPkgName is com.example.ble_imu_data_viewer curUid is 10174 lastPkgName is :com.example.ble_imu_data_viewer\n2023-06-11 19:57:11.938  1730-10535 DollieAdapterService    com.huawei.systemserver              E  notifyActivityState pkg:com.example.ble_imu_data_viewer/com.example.ble_imu_data_viewer.MainActivity state:2 fg:true mUid:10174\n...\n</code></pre>\n<p>I have declared the requested permission, <code>BLUETOOTH_SCAN</code>, in the Manifest file via</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; tools:remove=&quot;android:maxSdkVersion&quot;/&gt;\n</code></pre>\n<p>The entire sorce code and complete Logcat content are available below:</p>\n<p><a href=\"https://pastebin.com/bu61uKFk\" rel=\"nofollow noreferrer\">AndroidManifest.xml</a></p>\n<p><a href=\"https://pastebin.com/4NenQiK7\" rel=\"nofollow noreferrer\">MainActivity.java</a></p>\n<p><a href=\"https://pastebin.com/3izkyhrC\" rel=\"nofollow noreferrer\">build.gradle</a></p>\n<p><a href=\"https://pastebin.com/YzZDTjar\" rel=\"nofollow noreferrer\">Complete Logcat content</a></p>\n"},{"tags":["java","elasticsearch","elasticsearch-jest"],"answers":[{"tags":[],"owner":{"account_id":1853502,"reputation":16211,"user_id":1679537,"accept_rate":82,"display_name":"xlecoustillier"},"down_vote_count":0,"up_vote_count":52,"is_accepted":true,"score":52,"last_activity_date":1632389432,"creation_date":1409239717,"answer_id":25552608,"question_id":25552321,"body_markdown":"I think in this case the [Bool query](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html) is the best shot.\r\n\r\nSomething like :\r\n\r\n    {\r\n        &quot;bool&quot; : {\r\n            &quot;must&quot; : { &quot;term&quot; : { &quot;component&quot; : &quot;comp_1&quot; } },\r\n            &quot;should&quot; : [\r\n                { &quot;term&quot; : { &quot;userId&quot; : &quot;A1A1&quot; } },\r\n                { &quot;term&quot; : { &quot;customerId&quot; : &quot;C1&quot; } },\r\n                { &quot;term&quot; : { &quot;currentRole&quot; : &quot;ADMIN&quot; } }\r\n            ],\r\n            &quot;minimum_should_match&quot; : 1\r\n        }\r\n    }\r\n\r\nWhich gives in Java:\r\n\r\n    QueryBuilder qb = QueryBuilders\r\n        .boolQuery()\r\n        .must(termQuery(&quot;component&quot;, currentComponent))\r\n        .should(termQuery(&quot;userId&quot;, currentUserId))\r\n        .should(termQuery(&quot;customerId&quot;, currentCustomerId))\r\n        .should(termQuery(&quot;currentRole&quot;, ADMIN))\r\n        .minimumNumberShouldMatch(1)\r\n\r\nThe `must` parts are `AND`s, the `should` parts are more or less `OR`s, except that you can specify a minimum number of `should`s to match (using `minimum_should_match`), this minimum being 1 by default I think (but you could set it to 0, meaning that a document matching no `should` condition would be returned as well).\r\n\r\nIf you want to do more complex queries involving nested `AND`s and `OR`s, simply nest other bool queries inside `must` or `should` parts.\r\n\r\nAlso, as you&#39;re looking for exact values (ids and so on), maybe you can use [term queries instead of match queries](http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/term-vs-full-text.html), which spare you the analysis phase (if those fields are analyzed at all, which doesn&#39;t necessarily make sense for ids). If they are analyzed, you still can do that, but only if you know exactly how your terms are stored ([standard analyzer stores them lower cased for instance](https://www.found.no/foundation/beginner-troubleshooting/#why-isnt-my-search-returning-what-i-expect)).","title":"OR and AND Operators in Elasticsearch query","body":"<p>I think in this case the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html\" rel=\"noreferrer\">Bool query</a> is the best shot.</p>\n<p>Something like :</p>\n<pre><code>{\n    &quot;bool&quot; : {\n        &quot;must&quot; : { &quot;term&quot; : { &quot;component&quot; : &quot;comp_1&quot; } },\n        &quot;should&quot; : [\n            { &quot;term&quot; : { &quot;userId&quot; : &quot;A1A1&quot; } },\n            { &quot;term&quot; : { &quot;customerId&quot; : &quot;C1&quot; } },\n            { &quot;term&quot; : { &quot;currentRole&quot; : &quot;ADMIN&quot; } }\n        ],\n        &quot;minimum_should_match&quot; : 1\n    }\n}\n</code></pre>\n<p>Which gives in Java:</p>\n<pre><code>QueryBuilder qb = QueryBuilders\n    .boolQuery()\n    .must(termQuery(&quot;component&quot;, currentComponent))\n    .should(termQuery(&quot;userId&quot;, currentUserId))\n    .should(termQuery(&quot;customerId&quot;, currentCustomerId))\n    .should(termQuery(&quot;currentRole&quot;, ADMIN))\n    .minimumNumberShouldMatch(1)\n</code></pre>\n<p>The <code>must</code> parts are <code>AND</code>s, the <code>should</code> parts are more or less <code>OR</code>s, except that you can specify a minimum number of <code>should</code>s to match (using <code>minimum_should_match</code>), this minimum being 1 by default I think (but you could set it to 0, meaning that a document matching no <code>should</code> condition would be returned as well).</p>\n<p>If you want to do more complex queries involving nested <code>AND</code>s and <code>OR</code>s, simply nest other bool queries inside <code>must</code> or <code>should</code> parts.</p>\n<p>Also, as you're looking for exact values (ids and so on), maybe you can use <a href=\"http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/term-vs-full-text.html\" rel=\"noreferrer\">term queries instead of match queries</a>, which spare you the analysis phase (if those fields are analyzed at all, which doesn't necessarily make sense for ids). If they are analyzed, you still can do that, but only if you know exactly how your terms are stored (<a href=\"https://www.found.no/foundation/beginner-troubleshooting/#why-isnt-my-search-returning-what-i-expect\" rel=\"noreferrer\">standard analyzer stores them lower cased for instance</a>).</p>\n"},{"tags":[],"owner":{"account_id":1820264,"reputation":332,"user_id":1654483,"display_name":"Alix Martin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1409301820,"creation_date":1409301820,"answer_id":25564713,"question_id":25552321,"body_markdown":"If you use a [`query_string` query][1], your ANDs and ORs will be interpreted as such by the Lucene library.\r\n\r\nThis allows you to search for \r\n\r\n    (currentUserId OR currentCustomerId) AND currentComponent\r\n\r\nfor instance. By default, the values will be searched for in all fields.\r\n\r\n\r\n  [1]: http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html","title":"OR and AND Operators in Elasticsearch query","body":"<p>If you use a <a href=\"http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html\" rel=\"nofollow\"><code>query_string</code> query</a>, your ANDs and ORs will be interpreted as such by the Lucene library.</p>\n\n<p>This allows you to search for </p>\n\n<pre><code>(currentUserId OR currentCustomerId) AND currentComponent\n</code></pre>\n\n<p>for instance. By default, the values will be searched for in all fields.</p>\n"},{"tags":[],"owner":{"account_id":12242688,"reputation":2142,"user_id":10854998,"display_name":"Gryu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686835976,"creation_date":1686835976,"answer_id":76483027,"question_id":25552321,"body_markdown":"Here&#39;s an example of query with AND, OR and NOT:\r\n\r\n    GET cities/_search\r\n    {\r\n      &quot;query&quot;: {&quot;bool&quot;: {&quot;must&quot;: [\r\n        {&quot;bool&quot;: {&quot;should&quot;: [\r\n          {&quot;bool&quot;: {&quot;must&quot;: [\r\n            {&quot;match&quot;: {&quot;description&quot;: &quot;great&quot;}},\r\n            {&quot;match&quot;: {&quot;description&quot;: &quot;orange&quot;}}\r\n          ]}},\r\n          {&quot;match&quot;: {&quot;description&quot;: &quot;popular&quot;}}\r\n        ]}},\r\n\r\n        {&quot;bool&quot;: {&quot;must_not&quot;: [\r\n          {&quot;match&quot;: {&quot;description&quot;: &quot;poor&quot;}}\r\n        ]}},\r\n\r\n        {&quot;bool&quot;: {&quot;should&quot;: [\r\n          {&quot;match&quot;: {&quot;city&quot;: &quot;London&quot;}},\r\n          {&quot;match&quot;: {&quot;city&quot;: &quot;Paris&quot;}},\r\n        ]}}\r\n      ]}},\r\n    &quot;size&quot;: 20,\r\n    &quot;from&quot;: 0\r\n    }\r\n\r\nIt searches among specified cities only cities, which description includes (&quot;great&quot; AND &quot;orange&quot;) OR &quot;popular&quot; words but excludes results, where &quot;poor&quot; word found\r\n\r\n`must` means **AND**, `should` means **OR**, `must_not` means **NOT**\r\n\r\nOther examples you can find [here][1]:\r\n\r\n\r\n\r\n  [1]: https://www.elastic.co/blog/lost-in-translation-boolean-operations-and-filters-in-the-bool-query","title":"OR and AND Operators in Elasticsearch query","body":"<p>Here's an example of query with AND, OR and NOT:</p>\n<pre><code>GET cities/_search\n{\n  &quot;query&quot;: {&quot;bool&quot;: {&quot;must&quot;: [\n    {&quot;bool&quot;: {&quot;should&quot;: [\n      {&quot;bool&quot;: {&quot;must&quot;: [\n        {&quot;match&quot;: {&quot;description&quot;: &quot;great&quot;}},\n        {&quot;match&quot;: {&quot;description&quot;: &quot;orange&quot;}}\n      ]}},\n      {&quot;match&quot;: {&quot;description&quot;: &quot;popular&quot;}}\n    ]}},\n\n    {&quot;bool&quot;: {&quot;must_not&quot;: [\n      {&quot;match&quot;: {&quot;description&quot;: &quot;poor&quot;}}\n    ]}},\n\n    {&quot;bool&quot;: {&quot;should&quot;: [\n      {&quot;match&quot;: {&quot;city&quot;: &quot;London&quot;}},\n      {&quot;match&quot;: {&quot;city&quot;: &quot;Paris&quot;}},\n    ]}}\n  ]}},\n&quot;size&quot;: 20,\n&quot;from&quot;: 0\n}\n</code></pre>\n<p>It searches among specified cities only cities, which description includes (&quot;great&quot; AND &quot;orange&quot;) OR &quot;popular&quot; words but excludes results, where &quot;poor&quot; word found</p>\n<p><code>must</code> means <strong>AND</strong>, <code>should</code> means <strong>OR</strong>, <code>must_not</code> means <strong>NOT</strong></p>\n<p>Other examples you can find <a href=\"https://www.elastic.co/blog/lost-in-translation-boolean-operations-and-filters-in-the-bool-query\" rel=\"nofollow noreferrer\">here</a>:</p>\n"}],"owner":{"account_id":2192346,"reputation":525,"user_id":1938998,"accept_rate":33,"display_name":"Udit Bhatia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46690,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":25552608,"answer_count":3,"score":22,"last_activity_date":1686835976,"creation_date":1409238813,"question_id":25552321,"body_markdown":"I have few json document with the following format :-\r\n\r\n        _source: {\r\n                userId: &quot;A1A1&quot;,\r\n                customerId: &quot;C1&quot;,\r\n                component: &quot;comp_1&quot;,\r\n                timestamp: 1408986553,\r\n         }\r\n\r\nI want to query the document based on the following :-\r\n\r\n    (( userId == currentUserId) OR ( customerId== currentCustomerId) OR (currentRole ==ADMIN) )  AND component= currentComponent)\r\n\r\nI tried using the SearchSourceBuilder and QueryBuilders.matchQuery, but I wasnt able to put multiple sub queries with AND and OR operators.\r\n\r\n    SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\r\n    searchSourceBuilder.query(QueryBuilders.matchQuery(&quot;userId&quot;,userId)).sort(&quot;timestamp&quot;, SortOrder.DESC).size(count);\r\n\r\nHow we query elasticsearch using OR and AND operators?\r\n\r\n\r\n\r\n\r\n","title":"OR and AND Operators in Elasticsearch query","body":"<p>I have few json document with the following format :-</p>\n\n<pre><code>    _source: {\n            userId: \"A1A1\",\n            customerId: \"C1\",\n            component: \"comp_1\",\n            timestamp: 1408986553,\n     }\n</code></pre>\n\n<p>I want to query the document based on the following :-</p>\n\n<pre><code>(( userId == currentUserId) OR ( customerId== currentCustomerId) OR (currentRole ==ADMIN) )  AND component= currentComponent)\n</code></pre>\n\n<p>I tried using the SearchSourceBuilder and QueryBuilders.matchQuery, but I wasnt able to put multiple sub queries with AND and OR operators.</p>\n\n<pre><code>SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\nsearchSourceBuilder.query(QueryBuilders.matchQuery(\"userId\",userId)).sort(\"timestamp\", SortOrder.DESC).size(count);\n</code></pre>\n\n<p>How we query elasticsearch using OR and AND operators?</p>\n"},{"tags":["java","jsoup"],"owner":{"account_id":21851501,"reputation":17,"user_id":18065631,"display_name":"NikMAX"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686835942,"creation_date":1686830965,"question_id":76482320,"body_markdown":"I&#39;m using Jsoup to parse data from website.  \r\nI need to parse data both from a URL and from a local HTML file, but the contents of the Document **for the same web page**, obtained from the link and from its HTML file, which I manually downloaded, are different.\r\n\r\n\r\nWhen I use: \r\n```java\r\nDocument pageDocument = Jsoup.connect(pageUrl)\r\n```\r\nMy target fragment of `pageDocument` looks like this: \r\n```html\r\n&lt;div class=&quot;rcol&quot; style=&quot;width:700px; padding:0 0 0 6px;&quot;&gt;\r\n   //some target data\r\n&lt;/div&gt;\r\n```\r\nBut when i use:\r\n\r\n```java\r\nDocument pageDocument = Jsoup.parse(htmlFile, &quot;UTF-8&quot;, baseUrl)\r\n```\r\nIts looks like this:\r\n\r\n```html\r\n&lt;a class=&quot;attribute-value&quot;&gt;rcol&lt;/a&gt;&quot; &lt;span class=&quot;attribute-name&quot;&gt;style&lt;/span&gt;=&quot;&lt;a class=&quot;attribute-value&quot;&gt;width:700px; padding:0 0 0 6px;&lt;/a&gt;\r\n```\r\n\r\nSo hundreds of lines of logic that I wrote to parse this document, obtained by URL, not working to the same file, obtained manually.  \r\n**IMPORTANT**: the content of the manually downloaded HTML file is completely identical to the file from the URL, I was check it. Differences appear only after I pass file to Jsoup.parse()!  \r\n**QUESTION**: why does the content of the HTML file changes after passing to Jsoup.parse() and how to prevent it?  \r\n\r\n**UPD**: I noticed that the length of the source code of the page in the browser and the length of the downloaded HTML file differ by one line. Looks like a closing tag was missing during the download or something else. I tried to manually create an HTML file by doing ctrl-c, ctrl-v of the page source code in browser and my assumption was confirmed - the file created in this way is parsed correctly.\r\nI still don&#39;t know why this is happening and would like to know. But if you are reading this post in the future, and the answer has not been found - keep in mind and ***recheck the HTML structure again***\r\n","title":"Jsoup: different Document structure while loading HTML from URL and from file","body":"<p>I'm using Jsoup to parse data from website.<br />\nI need to parse data both from a URL and from a local HTML file, but the contents of the Document <strong>for the same web page</strong>, obtained from the link and from its HTML file, which I manually downloaded, are different.</p>\n<p>When I use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document pageDocument = Jsoup.connect(pageUrl)\n</code></pre>\n<p>My target fragment of <code>pageDocument</code> looks like this:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=&quot;rcol&quot; style=&quot;width:700px; padding:0 0 0 6px;&quot;&gt;\n   //some target data\n&lt;/div&gt;\n</code></pre>\n<p>But when i use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document pageDocument = Jsoup.parse(htmlFile, &quot;UTF-8&quot;, baseUrl)\n</code></pre>\n<p>Its looks like this:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;a class=&quot;attribute-value&quot;&gt;rcol&lt;/a&gt;&quot; &lt;span class=&quot;attribute-name&quot;&gt;style&lt;/span&gt;=&quot;&lt;a class=&quot;attribute-value&quot;&gt;width:700px; padding:0 0 0 6px;&lt;/a&gt;\n</code></pre>\n<p>So hundreds of lines of logic that I wrote to parse this document, obtained by URL, not working to the same file, obtained manually.<br />\n<strong>IMPORTANT</strong>: the content of the manually downloaded HTML file is completely identical to the file from the URL, I was check it. Differences appear only after I pass file to Jsoup.parse()!<br />\n<strong>QUESTION</strong>: why does the content of the HTML file changes after passing to Jsoup.parse() and how to prevent it?</p>\n<p><strong>UPD</strong>: I noticed that the length of the source code of the page in the browser and the length of the downloaded HTML file differ by one line. Looks like a closing tag was missing during the download or something else. I tried to manually create an HTML file by doing ctrl-c, ctrl-v of the page source code in browser and my assumption was confirmed - the file created in this way is parsed correctly.\nI still don't know why this is happening and would like to know. But if you are reading this post in the future, and the answer has not been found - keep in mind and <em><strong>recheck the HTML structure again</strong></em></p>\n"},{"tags":["java","freemarker"],"answers":[{"tags":[],"owner":{"account_id":889764,"reputation":4441,"user_id":928276,"accept_rate":75,"display_name":"soorapadman"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1553856345,"creation_date":1553856265,"answer_id":55415681,"question_id":55415445,"body_markdown":"I would suggest you to do use `?size` like below.Please check the [Document][1]\r\n\r\n    ${repo.repoWords?size}\r\n\r\n\r\n  [1]: https://freemarker.apache.org/docs/ref_builtins_sequence.html#ref_builtin_size","title":"FreeMarker: Expected a hash, but this has evaluated to a sequence","body":"<p>I would suggest you to do use <code>?size</code> like below.Please check the <a href=\"https://freemarker.apache.org/docs/ref_builtins_sequence.html#ref_builtin_size\" rel=\"noreferrer\">Document</a></p>\n\n<pre><code>${repo.repoWords?size}\n</code></pre>\n"}],"owner":{"account_id":9975960,"reputation":2787,"user_id":7542937,"display_name":"Aleksej_Shherbak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8470,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":55415681,"answer_count":1,"score":3,"last_activity_date":1686835908,"creation_date":1553855502,"question_id":55415445,"body_markdown":"I understand that the same question already been here. But unfortunately it not helps me to solve my problem. I have HashSet in my FreeMarker template. I would like to show size of the HashSet on the view. I have the following for this:\r\n\r\n     &lt;td&gt;${repo.getRepoWords().size()}&lt;/td&gt;\r\n\r\nMethod getRepoWords is:\r\n\r\n     public HashSet getRepoWords() {\r\n         return repoWords;\r\n     }\r\n\r\nAs the result I see this exception\r\n\r\n&gt; FreeMarker template error (DEBUG mode; use RETHROW in production!):\r\n&gt; For &quot;.&quot; left-hand operand: Expected a hash, but this has evaluated to\r\n&gt; a sequence (wrapper: f.t.SimpleSequence): ==&gt; repo.getRepoWords() [in\r\n&gt; template &quot;repositories/detail.ftl&quot; at line 24, column 23] ---- FTL\r\n&gt; stack trace (&quot;~&quot; means nesting-related): - Failed at:\r\n&gt; ${repo.getRepoWords().size()} [in template &quot;repositories/detail.ftl&quot;\r\n&gt; at line 24, column 21] ~ Reached through: #nested [in template\r\n&gt; &quot;layouts/common.ftl&quot; in macro &quot;page&quot; at line 20, column 1] ~ Reached\r\n&gt; through: @c.page title=&quot;Главная страница&quot; [in template\r\n&gt; &quot;repositories/detail.ftl&quot; at line 2, column 1] ---- Java stack trace\r\n&gt; (for programmers): ---- freemarker.core.NonHashException: [...\r\n&gt; Exception message was already printed; see it above ...] at\r\n&gt; freemarker.core.Dot._eval(Dot.java:48) at\r\n&gt; freemarker.core.Expression.eval(Expression.java:83) at\r\n&gt; freemarker.core.MethodCall._eval(MethodCall.java:58) at\r\n&gt; freemarker.core.Expression.eval(Expression.java:83) at\r\n\r\nCan I use the size() method for a HashSet in a FreeMarker template?","title":"FreeMarker: Expected a hash, but this has evaluated to a sequence","body":"<p>I understand that the same question already been here. But unfortunately it not helps me to solve my problem. I have HashSet in my FreeMarker template. I would like to show size of the HashSet on the view. I have the following for this:</p>\n<pre><code> &lt;td&gt;${repo.getRepoWords().size()}&lt;/td&gt;\n</code></pre>\n<p>Method getRepoWords is:</p>\n<pre><code> public HashSet getRepoWords() {\n     return repoWords;\n }\n</code></pre>\n<p>As the result I see this exception</p>\n<blockquote>\n<p>FreeMarker template error (DEBUG mode; use RETHROW in production!):\nFor &quot;.&quot; left-hand operand: Expected a hash, but this has evaluated to\na sequence (wrapper: f.t.SimpleSequence): ==&gt; repo.getRepoWords() [in\ntemplate &quot;repositories/detail.ftl&quot; at line 24, column 23] ---- FTL\nstack trace (&quot;~&quot; means nesting-related): - Failed at:\n${repo.getRepoWords().size()} [in template &quot;repositories/detail.ftl&quot;\nat line 24, column 21] ~ Reached through: #nested [in template\n&quot;layouts/common.ftl&quot; in macro &quot;page&quot; at line 20, column 1] ~ Reached\nthrough: @c.page title=&quot;Главная страница&quot; [in template\n&quot;repositories/detail.ftl&quot; at line 2, column 1] ---- Java stack trace\n(for programmers): ---- freemarker.core.NonHashException: [...\nException message was already printed; see it above ...] at\nfreemarker.core.Dot._eval(Dot.java:48) at\nfreemarker.core.Expression.eval(Expression.java:83) at\nfreemarker.core.MethodCall._eval(MethodCall.java:58) at\nfreemarker.core.Expression.eval(Expression.java:83) at</p>\n</blockquote>\n<p>Can I use the size() method for a HashSet in a FreeMarker template?</p>\n"},{"tags":["java","spring-boot","jersey","junit5"],"owner":{"account_id":7372006,"reputation":473,"user_id":5611906,"accept_rate":100,"display_name":"TCH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686835862,"creation_date":1686318444,"question_id":76440894,"body_markdown":"## Context\r\nI want to test some Jersey resources in my application. I use JUnit5 and SpringBoot.\r\nAll my Jersey resources tests extends a JerseyConfiguration class which has a SpringBoot configuration to create/mock all application services used in the tests.  \r\nBut so far, I cannot get rid of the following error :\r\n\r\n&gt; Unsatisfied dependency expressed through field &#39;appProperties&#39;;\r\n&gt; nested exception is\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n&gt; Error creating bean with name &#39;getAppProperties&#39;: Unsatisfied\r\n&gt; dependency expressed through field &#39;hasAccess&#39;; nested exception is\r\n&gt; org.springframework.beans.TypeMismatchException: Failed to convert\r\n&gt; value of type &#39;java.lang.String&#39; to required type &#39;boolean&#39;; nested\r\n&gt; exception is java.lang.IllegalArgumentException: Invalid boolean value\r\n&gt; [${has.access}]\r\n\r\n## Problem\r\n\r\n**It seems that the AppProperties class is not loaded properly because it does not find the properties in application.properties file. However, all properties are set in this file under src/main/test/resources**  \r\n\r\nI tried different things without success such as\r\n`@TestPropertySource(properties = {&quot;has.access=true&quot;})`  \r\nand \r\n`@SpringBootTest(classes = {SpringTestConfig.class}, properties = &quot;has.access=true&quot;)`   \r\nAlso tried to mock the AppProperties like that in SpringTestConfig\r\n\r\n    @Bean\r\n    public AppProperties getAppProperties () {\r\n        AppProperties props = new AppProperties ();\r\n        props.setHasAccess(true);\r\n        return props;\r\n    }\r\n\r\nHere are some of the files of my test configuration   \r\n*MyTest.java*  \r\n\r\n    public class MyTest extends JerseyConfiguration {\r\n    // some  @Autowired services\r\n    }\r\n\r\n*JerseyConfiguration.java*\r\n\r\n    public abstract class JerseyConfiguration extends FastJerseyTest {\r\n    \r\n        @Override\r\n        protected void configure(final ResourceConfig config) {\r\n            config.register(AuthenticationExceptionMapperProvider.class);\r\n            config.register(AccessDeniedExceptionMapperProvider.class);\r\n            config.register(JacksonObjectMapperProvider.class);\r\n            config.packages(&quot;resources.package&quot;);\r\n            config.property(\r\n                &quot;contextConfig&quot;,\r\n                new AnnotationConfigApplicationContext(SpringTestConfig.class)\r\n            );\r\n        }\r\n\r\n*SpringTestConfig.java*\r\n\r\n        @ExtendWith(SpringExtension.class)\r\n        @ComponentScan(basePackages = {&quot;some.beans.packages&quot;})\r\n        @TestPropertySource(locations = &quot;classpath:application.properties&quot;)\r\n        @Import(SecurityConfiguration.class)\r\n        public class SpringTestConfig {\r\n            @Bean\r\n            public AppProperties getAppProperties () {\r\n               AppProperties props = new AppProperties();\r\n               props.setHasAccess(true);\r\n               return props;\r\n            }\r\n        ... some mocks\r\n\r\n*AppProperties.java*\r\n\r\n    @ToString\r\n    @Getter\r\n    @Setter\r\n    @ConfigurationProperties\r\n    public class AppProperties {\r\n    \r\n        @Value(&quot;${has.access}&quot;)\r\n        private boolean hasAccess;\r\n\r\nAnd there is the `application.properties` file for tests under *src/main/test/resources* containing all the properties of AppProperties \r\n\r\n## Partial solution\r\nif I add `@PropertySource(&quot;/application.properties&quot;)` to `SpringTestConfig`  instead of `@TestPropertySource`, then it works but it does not seem an ideal solution to me\r\n","title":"Junit5 test configuration for Jersey test and SpringBoot","body":"<h2>Context</h2>\n<p>I want to test some Jersey resources in my application. I use JUnit5 and SpringBoot.\nAll my Jersey resources tests extends a JerseyConfiguration class which has a SpringBoot configuration to create/mock all application services used in the tests.<br />\nBut so far, I cannot get rid of the following error :</p>\n<blockquote>\n<p>Unsatisfied dependency expressed through field 'appProperties';\nnested exception is\norg.springframework.beans.factory.UnsatisfiedDependencyException:\nError creating bean with name 'getAppProperties': Unsatisfied\ndependency expressed through field 'hasAccess'; nested exception is\norg.springframework.beans.TypeMismatchException: Failed to convert\nvalue of type 'java.lang.String' to required type 'boolean'; nested\nexception is java.lang.IllegalArgumentException: Invalid boolean value\n[${has.access}]</p>\n</blockquote>\n<h2>Problem</h2>\n<p><strong>It seems that the AppProperties class is not loaded properly because it does not find the properties in application.properties file. However, all properties are set in this file under src/main/test/resources</strong></p>\n<p>I tried different things without success such as\n<code>@TestPropertySource(properties = {&quot;has.access=true&quot;})</code><br />\nand\n<code>@SpringBootTest(classes = {SpringTestConfig.class}, properties = &quot;has.access=true&quot;)</code><br />\nAlso tried to mock the AppProperties like that in SpringTestConfig</p>\n<pre><code>@Bean\npublic AppProperties getAppProperties () {\n    AppProperties props = new AppProperties ();\n    props.setHasAccess(true);\n    return props;\n}\n</code></pre>\n<p>Here are some of the files of my test configuration<br />\n<em>MyTest.java</em></p>\n<pre><code>public class MyTest extends JerseyConfiguration {\n// some  @Autowired services\n}\n</code></pre>\n<p><em>JerseyConfiguration.java</em></p>\n<pre><code>public abstract class JerseyConfiguration extends FastJerseyTest {\n\n    @Override\n    protected void configure(final ResourceConfig config) {\n        config.register(AuthenticationExceptionMapperProvider.class);\n        config.register(AccessDeniedExceptionMapperProvider.class);\n        config.register(JacksonObjectMapperProvider.class);\n        config.packages(&quot;resources.package&quot;);\n        config.property(\n            &quot;contextConfig&quot;,\n            new AnnotationConfigApplicationContext(SpringTestConfig.class)\n        );\n    }\n</code></pre>\n<p><em>SpringTestConfig.java</em></p>\n<pre><code>    @ExtendWith(SpringExtension.class)\n    @ComponentScan(basePackages = {&quot;some.beans.packages&quot;})\n    @TestPropertySource(locations = &quot;classpath:application.properties&quot;)\n    @Import(SecurityConfiguration.class)\n    public class SpringTestConfig {\n        @Bean\n        public AppProperties getAppProperties () {\n           AppProperties props = new AppProperties();\n           props.setHasAccess(true);\n           return props;\n        }\n    ... some mocks\n</code></pre>\n<p><em>AppProperties.java</em></p>\n<pre><code>@ToString\n@Getter\n@Setter\n@ConfigurationProperties\npublic class AppProperties {\n\n    @Value(&quot;${has.access}&quot;)\n    private boolean hasAccess;\n</code></pre>\n<p>And there is the <code>application.properties</code> file for tests under <em>src/main/test/resources</em> containing all the properties of AppProperties</p>\n<h2>Partial solution</h2>\n<p>if I add <code>@PropertySource(&quot;/application.properties&quot;)</code> to <code>SpringTestConfig</code>  instead of <code>@TestPropertySource</code>, then it works but it does not seem an ideal solution to me</p>\n"},{"tags":["java","gradle","jooq","flyway"],"answers":[{"tags":[],"owner":{"account_id":1642511,"reputation":51,"user_id":1514699,"display_name":"ciech"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1658323311,"creation_date":1658317873,"answer_id":73051138,"question_id":72618530,"body_markdown":"I had similar case recently with mysql, gradle, flyway and jooq. Base on examples from gradle-jooq-plugin (https://github.com/etiennestuder/gradle-jooq-plugin/blob/master/example/) I came up with working solution for my case, with minor changes it should also work for yours:\r\n    \r\n    import org.testcontainers.containers.MySQLContainer\r\n\r\n    buildscript {\r\n        repositories {\r\n            mavenLocal()\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath &#39;org.testcontainers:mysql:1.17.3&#39;\r\n            classpath &#39;mysql:mysql-connector-java:8.0.29&#39;\r\n            classpath &#39;org.flywaydb:flyway-mysql:9.0.1&#39;\r\n    \r\n        }\r\n    }\r\n    \r\n    plugins {\r\n        id &#39;java&#39;\r\n        id &#39;org.flywaydb.flyway&#39; version &#39;9.0.1&#39;\r\n        id &#39;nu.studer.jooq&#39; version &#39;7.1.1&#39;\r\n    }\r\n    \r\n    repositories {\r\n        mavenLocal()\r\n        mavenCentral()\r\n    }\r\n    \r\n    configurations {\r\n        flywayMigration\r\n    }\r\n    \r\n    dependencies {\r\n        jooqGenerator(&#39;mysql:mysql-connector-java:8.0.29&#39;)\r\n    }\r\n    \r\n    task mysqlContainer {\r\n        var instance = new MySQLContainer(&quot;mysql:8.0.29&quot;)\r\n                .withDatabaseName(&#39;example&#39;)\r\n        instance.start()\r\n        mysqlContainer.ext.jdbcUrl = instance.getJdbcUrl()\r\n        mysqlContainer.ext.username = instance.getUsername()\r\n        mysqlContainer.ext.password = instance.getPassword()\r\n        mysqlContainer.ext.databaseName = instance.getDatabaseName()\r\n        mysqlContainer.ext.instance = instance\r\n    }\r\n    \r\n    flyway {\r\n        locations = [&#39;filesystem:./src/main/resources/db/migration&#39;]\r\n        configurations = [&#39;flywayMigration&#39;]\r\n        url = mysqlContainer.jdbcUrl\r\n        user = mysqlContainer.username\r\n        password = mysqlContainer.password\r\n    }\r\n    \r\n    \r\n    jooq {\r\n        configurations {\r\n            main {\r\n                generationTool {\r\n                    logging = org.jooq.meta.jaxb.Logging.WARN\r\n                    jdbc {\r\n                        driver = &#39;com.mysql.cj.jdbc.Driver&#39;\r\n                        url = mysqlContainer.jdbcUrl\r\n                        user =mysqlContainer.username\r\n                        password = mysqlContainer.password\r\n                    }\r\n                    generator {\r\n                        name = &#39;org.jooq.codegen.DefaultGenerator&#39;\r\n                        database {\r\n                            name = &#39;org.jooq.meta.mysql.MySQLDatabase&#39;\r\n                            includes = &#39;.*&#39;\r\n                            inputSchema = mysqlContainer.databaseName\r\n                            outputSchemaToDefault = true\r\n                        }\r\n                        target {\r\n                            packageName = &#39;com.example.jooq&#39;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    tasks.named(&#39;generateJooq&#39;).configure {\r\n        dependsOn tasks.named(&#39;mysqlContainer&#39;)\r\n        dependsOn tasks.named(&#39;flywayMigrate&#39;)\r\n    \r\n        inputs.files(fileTree(&#39;src/main/resources/db/migration&#39;))\r\n                .withPropertyName(&#39;migrations&#39;)\r\n                .withPathSensitivity(PathSensitivity.RELATIVE)\r\n    \r\n        allInputsDeclared = true\r\n        doLast {\r\n            mysqlContainer.instance.stop()\r\n        }\r\n    }\r\n\r\n","title":"How to configure jOOQ with Gradle, Testcontainers and Flyway?","body":"<p>I had similar case recently with mysql, gradle, flyway and jooq. Base on examples from gradle-jooq-plugin (<a href=\"https://github.com/etiennestuder/gradle-jooq-plugin/blob/master/example/\" rel=\"nofollow noreferrer\">https://github.com/etiennestuder/gradle-jooq-plugin/blob/master/example/</a>) I came up with working solution for my case, with minor changes it should also work for yours:</p>\n<pre><code>import org.testcontainers.containers.MySQLContainer\n\nbuildscript {\n    repositories {\n        mavenLocal()\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.testcontainers:mysql:1.17.3'\n        classpath 'mysql:mysql-connector-java:8.0.29'\n        classpath 'org.flywaydb:flyway-mysql:9.0.1'\n\n    }\n}\n\nplugins {\n    id 'java'\n    id 'org.flywaydb.flyway' version '9.0.1'\n    id 'nu.studer.jooq' version '7.1.1'\n}\n\nrepositories {\n    mavenLocal()\n    mavenCentral()\n}\n\nconfigurations {\n    flywayMigration\n}\n\ndependencies {\n    jooqGenerator('mysql:mysql-connector-java:8.0.29')\n}\n\ntask mysqlContainer {\n    var instance = new MySQLContainer(&quot;mysql:8.0.29&quot;)\n            .withDatabaseName('example')\n    instance.start()\n    mysqlContainer.ext.jdbcUrl = instance.getJdbcUrl()\n    mysqlContainer.ext.username = instance.getUsername()\n    mysqlContainer.ext.password = instance.getPassword()\n    mysqlContainer.ext.databaseName = instance.getDatabaseName()\n    mysqlContainer.ext.instance = instance\n}\n\nflyway {\n    locations = ['filesystem:./src/main/resources/db/migration']\n    configurations = ['flywayMigration']\n    url = mysqlContainer.jdbcUrl\n    user = mysqlContainer.username\n    password = mysqlContainer.password\n}\n\n\njooq {\n    configurations {\n        main {\n            generationTool {\n                logging = org.jooq.meta.jaxb.Logging.WARN\n                jdbc {\n                    driver = 'com.mysql.cj.jdbc.Driver'\n                    url = mysqlContainer.jdbcUrl\n                    user =mysqlContainer.username\n                    password = mysqlContainer.password\n                }\n                generator {\n                    name = 'org.jooq.codegen.DefaultGenerator'\n                    database {\n                        name = 'org.jooq.meta.mysql.MySQLDatabase'\n                        includes = '.*'\n                        inputSchema = mysqlContainer.databaseName\n                        outputSchemaToDefault = true\n                    }\n                    target {\n                        packageName = 'com.example.jooq'\n                    }\n                }\n            }\n        }\n    }\n}\n\ntasks.named('generateJooq').configure {\n    dependsOn tasks.named('mysqlContainer')\n    dependsOn tasks.named('flywayMigrate')\n\n    inputs.files(fileTree('src/main/resources/db/migration'))\n            .withPropertyName('migrations')\n            .withPathSensitivity(PathSensitivity.RELATIVE)\n\n    allInputsDeclared = true\n    doLast {\n        mysqlContainer.instance.stop()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6541677,"reputation":151,"user_id":5058989,"display_name":"walrus03"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675717722,"creation_date":1675717722,"answer_id":75366602,"question_id":72618530,"body_markdown":"We&#39;re using the following flow (It&#39;s kotlin and contains only the JOOQ resources-related part of the script). The main difference with [this answer][1] is that mine spins up a new container once you run only `generateJooq` task. Another one runs a new container in every task.  \r\n  \r\n\r\n\t...\r\n\r\n\tval containerInstance: PostgreSQLContainer&lt;Nothing&gt;? = if (&quot;generateJooq&quot; in project.gradle.startParameter.taskNames) {\r\n\t    PostgreSQLContainer&lt;Nothing&gt;(\r\n\t        DockerImageName.parse(\r\n\t            &quot;postgres:14.4-alpine&quot;,\r\n\t        ),\r\n\t    ).apply {\r\n\t        withDatabaseName(&quot;my-db&quot;)\r\n\t        start()\r\n\t    }\r\n\t} else {\r\n\t    null\r\n\t}\r\n\r\n\tflyway {\r\n\t    url = containerInstance?.jdbcUrl\r\n\t    user = containerInstance?.username\r\n\t    password = containerInstance?.password\r\n\t}\r\n\r\n\tjooq {\r\n\t    version.set(&quot;3.17.5&quot;) // default (can be omitted)\r\n\t    edition.set(nu.studer.gradle.jooq.JooqEdition.OSS) // default (can be omitted)\r\n\r\n\t    configurations {\r\n\t        create(&quot;main&quot;) { // name of the jOOQ configuration\r\n\t            generateSchemaSourceOnCompilation.set(false) // default (can be omitted)\r\n\t            jooqConfiguration.apply {\r\n\t                logging = Logging.ERROR\r\n\t                jdbc.apply {\r\n\t                    driver = &quot;org.postgresql.Driver&quot;\r\n\t                    url = containerInstance?.jdbcUrl\r\n\t                    user = containerInstance?.username\r\n\t                    password = containerInstance?.password\r\n\t                }\r\n\t                generator.apply {\r\n\t                    name = &quot;org.jooq.codegen.DefaultGenerator&quot;\r\n\t                    database.apply {\r\n\t                        name = &quot;org.jooq.meta.postgres.PostgresDatabase&quot;\r\n\t                        inputSchema = &quot;public&quot;\r\n\t                        isIncludeIndexes = false\r\n\t                        excludes = &quot;flyway.*&quot;\r\n\t                    }\r\n\t                    target.apply {\r\n\t                        packageName = &quot;mypackage&quot;\r\n\t                        directory = &quot;src/main/java&quot;\r\n\t                    }\r\n\t                    strategy.name = &quot;org.jooq.codegen.DefaultGeneratorStrategy&quot;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\t// This validation is optional. In our flow, we use flyway migrate plugin in only jooq resources generation flow\r\n\ttasks.flywayMigrate.configure {\r\n\t    val taskNames = project.gradle.startParameter.taskNames\r\n\t    if (&quot;flyMigrate&quot; in taskNames &amp;&amp; &quot;generateJooq&quot; !in taskNames) {\r\n\t        throw IllegalArgumentException(&quot;Flyway migrate is only available for generateJooq task&quot;)\r\n\t    }\r\n\t}\r\n\r\n\ttasks.named(&quot;generateJooq&quot;).configure {\r\n\t    dependsOn(tasks.named(&quot;flywayMigrate&quot;))\r\n\t    doLast {\r\n\t        containerInstance?.stop()\r\n\t    }\r\n\t}\r\n\r\n\t...\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/73051138/5058989","title":"How to configure jOOQ with Gradle, Testcontainers and Flyway?","body":"<p>We're using the following flow (It's kotlin and contains only the JOOQ resources-related part of the script). The main difference with <a href=\"https://stackoverflow.com/a/73051138/5058989\">this answer</a> is that mine spins up a new container once you run only <code>generateJooq</code> task. Another one runs a new container in every task.</p>\n<pre><code>...\n\nval containerInstance: PostgreSQLContainer&lt;Nothing&gt;? = if (&quot;generateJooq&quot; in project.gradle.startParameter.taskNames) {\n    PostgreSQLContainer&lt;Nothing&gt;(\n        DockerImageName.parse(\n            &quot;postgres:14.4-alpine&quot;,\n        ),\n    ).apply {\n        withDatabaseName(&quot;my-db&quot;)\n        start()\n    }\n} else {\n    null\n}\n\nflyway {\n    url = containerInstance?.jdbcUrl\n    user = containerInstance?.username\n    password = containerInstance?.password\n}\n\njooq {\n    version.set(&quot;3.17.5&quot;) // default (can be omitted)\n    edition.set(nu.studer.gradle.jooq.JooqEdition.OSS) // default (can be omitted)\n\n    configurations {\n        create(&quot;main&quot;) { // name of the jOOQ configuration\n            generateSchemaSourceOnCompilation.set(false) // default (can be omitted)\n            jooqConfiguration.apply {\n                logging = Logging.ERROR\n                jdbc.apply {\n                    driver = &quot;org.postgresql.Driver&quot;\n                    url = containerInstance?.jdbcUrl\n                    user = containerInstance?.username\n                    password = containerInstance?.password\n                }\n                generator.apply {\n                    name = &quot;org.jooq.codegen.DefaultGenerator&quot;\n                    database.apply {\n                        name = &quot;org.jooq.meta.postgres.PostgresDatabase&quot;\n                        inputSchema = &quot;public&quot;\n                        isIncludeIndexes = false\n                        excludes = &quot;flyway.*&quot;\n                    }\n                    target.apply {\n                        packageName = &quot;mypackage&quot;\n                        directory = &quot;src/main/java&quot;\n                    }\n                    strategy.name = &quot;org.jooq.codegen.DefaultGeneratorStrategy&quot;\n                }\n            }\n        }\n    }\n}\n\n// This validation is optional. In our flow, we use flyway migrate plugin in only jooq resources generation flow\ntasks.flywayMigrate.configure {\n    val taskNames = project.gradle.startParameter.taskNames\n    if (&quot;flyMigrate&quot; in taskNames &amp;&amp; &quot;generateJooq&quot; !in taskNames) {\n        throw IllegalArgumentException(&quot;Flyway migrate is only available for generateJooq task&quot;)\n    }\n}\n\ntasks.named(&quot;generateJooq&quot;).configure {\n    dependsOn(tasks.named(&quot;flywayMigrate&quot;))\n    doLast {\n        containerInstance?.stop()\n    }\n}\n\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15182232,"reputation":1,"user_id":10955240,"display_name":"Artem Veselov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686835475,"creation_date":1686696746,"answer_id":76469175,"question_id":72618530,"body_markdown":"I had a similar issue. Testcontainers spin up additional container that won&#39;t stop when you stop db container. Also, you probably want to stop regardless if task succeeds or fail. So, for the second issue the solution is to add BuildListener:\r\n```kotlin\r\nproject.gradle.addBuildListener(object : BuildAdapter() {\r\n    override fun buildFinished(result: BuildResult) {\r\n        dbContainer?.stop()\r\n    }\r\n})\r\n```\r\n\r\nWith second container I&#39;ve just switched from testcontainers for [docker-java][1]\r\n\r\n```kotlin\r\nstartMigrationDBTask.doFirst {\r\n    val dockerConf = DefaultDockerClientConfig.createDefaultConfigBuilder().build()\r\n    dockerClient = DockerClientImpl.getInstance(\r\n                dockerConf,\r\n                ZerodepDockerHttpClient.Builder()\r\n                    .dockerHost(dockerConf.dockerHost)\r\n                    .sslConfig(dockerConf.sslConfig)\r\n                    .build()\r\n            )\r\n\r\n    if (dockerClient!!.listImagesCmd().withImageNameFilter(&quot;postgres&quot;).exec().isEmpty()) {\r\n                    dockerClient!!.pullImageCmd(&quot;postgres:latest&quot;).exec(PullImageResultCallback()).awaitCompletion()\r\n    }\r\n    val containerResponse = dockerClient!!.createContainerCmd(&quot;postgres&quot;)\r\n                .withEnv(&quot;POSTGRES_PASSWORD=password&quot;, &quot;POSTGRES_USER=postgres&quot;, &quot;POSTGRES_DB=transactions&quot;)\r\n                .withHostConfig(HostConfig.newHostConfig().withPortBindings(PortBinding.parse(&quot;5432:5432&quot;)))\r\n                .exec()\r\n    dbContainerId = containerResponse.id\r\n    dockerClient!!.startContainerCmd(containerResponse.id).exec()\r\n}\r\n```\r\n\r\nand BuildListenr will change to:\r\n```\r\nproject.gradle.addBuildListener(object : BuildAdapter() {\r\n    override fun buildFinished(result: BuildResult) {\r\n        dbContainerId?.let { id -&gt;\r\n            dockerClient?.removeContainerCmd(id)?.withForce(true)?.exec()\r\n        }\r\n    }\r\n})\r\n```\r\n\r\n\r\n  [1]: https://github.com/docker-java/docker-java","title":"How to configure jOOQ with Gradle, Testcontainers and Flyway?","body":"<p>I had a similar issue. Testcontainers spin up additional container that won't stop when you stop db container. Also, you probably want to stop regardless if task succeeds or fail. So, for the second issue the solution is to add BuildListener:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>project.gradle.addBuildListener(object : BuildAdapter() {\n    override fun buildFinished(result: BuildResult) {\n        dbContainer?.stop()\n    }\n})\n</code></pre>\n<p>With second container I've just switched from testcontainers for <a href=\"https://github.com/docker-java/docker-java\" rel=\"nofollow noreferrer\">docker-java</a></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>startMigrationDBTask.doFirst {\n    val dockerConf = DefaultDockerClientConfig.createDefaultConfigBuilder().build()\n    dockerClient = DockerClientImpl.getInstance(\n                dockerConf,\n                ZerodepDockerHttpClient.Builder()\n                    .dockerHost(dockerConf.dockerHost)\n                    .sslConfig(dockerConf.sslConfig)\n                    .build()\n            )\n\n    if (dockerClient!!.listImagesCmd().withImageNameFilter(&quot;postgres&quot;).exec().isEmpty()) {\n                    dockerClient!!.pullImageCmd(&quot;postgres:latest&quot;).exec(PullImageResultCallback()).awaitCompletion()\n    }\n    val containerResponse = dockerClient!!.createContainerCmd(&quot;postgres&quot;)\n                .withEnv(&quot;POSTGRES_PASSWORD=password&quot;, &quot;POSTGRES_USER=postgres&quot;, &quot;POSTGRES_DB=transactions&quot;)\n                .withHostConfig(HostConfig.newHostConfig().withPortBindings(PortBinding.parse(&quot;5432:5432&quot;)))\n                .exec()\n    dbContainerId = containerResponse.id\n    dockerClient!!.startContainerCmd(containerResponse.id).exec()\n}\n</code></pre>\n<p>and BuildListenr will change to:</p>\n<pre><code>project.gradle.addBuildListener(object : BuildAdapter() {\n    override fun buildFinished(result: BuildResult) {\n        dbContainerId?.let { id -&gt;\n            dockerClient?.removeContainerCmd(id)?.withForce(true)?.exec()\n        }\n    }\n})\n</code></pre>\n"}],"owner":{"account_id":25554154,"reputation":181,"user_id":19338016,"display_name":"hololensen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2905,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1686835475,"creation_date":1655215975,"question_id":72618530,"body_markdown":"I need example of configuration gradle build file for jOOQ with Testcontainers and Flyway, in official repository of jOOQ I found only maven example and can&#39;t translate it to gradle, I try to convert it myself, but got this: \r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        mavenLocal()\r\n        mavenCentral()\r\n    }\r\n    dependencies { \r\n        // test container\r\n        classpath &quot;org.testcontainers:postgresql:$testContainersVersion&quot;\r\n    }\r\n}\r\n\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;nu.studer.jooq&#39; version &quot;$jooqPluginVersion&quot;\r\n    id &quot;org.flywaydb.flyway&quot; version &quot;$flywayPluginVersion&quot;\r\n}\r\n\r\nrepositories {\r\n    mavenLocal()\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    // spring\r\n    implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-jooq&#39;\r\n\r\n    // postgres\r\n    runtimeOnly &#39;org.postgresql:postgresql&#39;\r\n\r\n    // jooq\r\n    jooqGenerator &quot;org.postgresql:postgresql:$postgresVersion&quot;\r\n\r\n    // flyway\r\n    implementation &#39;org.flywaydb:flyway-core&#39;\r\n\r\n    // tests\r\n    testImplementation &quot;org.junit.jupiter:junit-jupiter-api:$junitVersion&quot;\r\n    testRuntimeOnly &quot;org.junit.jupiter:junit-jupiter-engine:$junitVersion&quot;\r\n    testImplementation &quot;org.testcontainers:testcontainers:$testContainersVersion&quot;\r\n    testImplementation &quot;org.testcontainers:postgresql:$testContainersVersion&quot;\r\n}\r\nvar JdbcDatabaseContainer&lt;?&gt; postgres = new PostgreSQLContainerProvider().newInstance(&quot;14-alpine&quot;)\r\npostgres.start()\r\n\r\nflyway {\r\n    url = postgres.jdbcUrl\r\n    user = postgres.username\r\n    password = postgres.password\r\n    schemas = [&#39;public&#39;]\r\n    locations = [&#39;classpath:db/migration&#39;]\r\n    baselineOnMigrate = true\r\n}\r\ntasks { \r\n    doLast {\r\n        if (postgres.isRunning) {\r\n            println(&quot;STOPPING DATABASE CONTAINER&quot;)\r\n            postgres.stop()\r\n        }\r\n    }\r\n}\r\n\r\njooq {\r\n    version = &quot;$jookVersion&quot;  // default (can be omitted)\r\n    edition = JooqEdition.OSS  // default (can be omitted)\r\n\r\n    configurations {\r\n        main {  // name of the jOOQ configuration\r\n            generateSchemaSourceOnCompilation = true  // default (can be omitted)\r\n\r\n            generationTool {\r\n                logging = org.jooq.meta.jaxb.Logging.WARN\r\n                jdbc {\r\n                    driver = &#39;org.postgresql.Driver&#39;\r\n                    url = postgres.jdbcUrl\r\n                    user = postgres.username\r\n                    password = postgres.password\r\n                }\r\n                generator {\r\n                    name = &#39;org.jooq.codegen.DefaultGenerator&#39;\r\n                    database {\r\n                        name = &#39;org.jooq.meta.postgres.PostgresDatabase&#39;\r\n                        inputSchema = &#39;public&#39;\r\n                        forcedTypes {\r\n                            forcedType {\r\n                                userType = &#39;com.fasterxml.jackson.databind.JsonNode&#39;\r\n                                includeTypes = &#39;.*&#39;\r\n                                includeExpression = &#39;.*JSON.*&#39;\r\n                                binding = &#39;dataflow.binding.PostgresJSONBBinding&#39;\r\n                            }\r\n                        }\r\n                    }\r\n                    generate {\r\n                        pojosAsKotlinDataClasses = true\r\n                        deprecated = false\r\n                        records = true\r\n                        pojos = true\r\n                        immutablePojos = false\r\n                        fluentSetters = true\r\n                        daos = true\r\n                    }\r\n                    target {\r\n                        packageName = &quot;dataflow.$dataflowPackageName&quot;\r\n                        directory = &#39;build/generated-src/jooq/main&#39;  // default (can be omitted)\r\n                    }\r\n                    strategy.name = &#39;org.jooq.codegen.DefaultGeneratorStrategy&#39;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nAnd it&#39;s create three container instead of one and don&#39;t stop them.\r\nP.S. I use Gradle jOOQ [plugin][1]\r\n\r\n\r\n  [1]: https://github.com/etiennestuder/gradle-jooq-plugin","title":"How to configure jOOQ with Gradle, Testcontainers and Flyway?","body":"<p>I need example of configuration gradle build file for jOOQ with Testcontainers and Flyway, in official repository of jOOQ I found only maven example and can't translate it to gradle, I try to convert it myself, but got this:</p>\n<pre><code>buildscript {\n    repositories {\n        mavenLocal()\n        mavenCentral()\n    }\n    dependencies { \n        // test container\n        classpath &quot;org.testcontainers:postgresql:$testContainersVersion&quot;\n    }\n}\n\nplugins {\n    id 'java'\n    id 'nu.studer.jooq' version &quot;$jooqPluginVersion&quot;\n    id &quot;org.flywaydb.flyway&quot; version &quot;$flywayPluginVersion&quot;\n}\n\nrepositories {\n    mavenLocal()\n    mavenCentral()\n}\n\ndependencies {\n    // spring\n    implementation 'org.springframework.boot:spring-boot-starter'\n    implementation 'org.springframework.boot:spring-boot-starter-jooq'\n\n    // postgres\n    runtimeOnly 'org.postgresql:postgresql'\n\n    // jooq\n    jooqGenerator &quot;org.postgresql:postgresql:$postgresVersion&quot;\n\n    // flyway\n    implementation 'org.flywaydb:flyway-core'\n\n    // tests\n    testImplementation &quot;org.junit.jupiter:junit-jupiter-api:$junitVersion&quot;\n    testRuntimeOnly &quot;org.junit.jupiter:junit-jupiter-engine:$junitVersion&quot;\n    testImplementation &quot;org.testcontainers:testcontainers:$testContainersVersion&quot;\n    testImplementation &quot;org.testcontainers:postgresql:$testContainersVersion&quot;\n}\nvar JdbcDatabaseContainer&lt;?&gt; postgres = new PostgreSQLContainerProvider().newInstance(&quot;14-alpine&quot;)\npostgres.start()\n\nflyway {\n    url = postgres.jdbcUrl\n    user = postgres.username\n    password = postgres.password\n    schemas = ['public']\n    locations = ['classpath:db/migration']\n    baselineOnMigrate = true\n}\ntasks { \n    doLast {\n        if (postgres.isRunning) {\n            println(&quot;STOPPING DATABASE CONTAINER&quot;)\n            postgres.stop()\n        }\n    }\n}\n\njooq {\n    version = &quot;$jookVersion&quot;  // default (can be omitted)\n    edition = JooqEdition.OSS  // default (can be omitted)\n\n    configurations {\n        main {  // name of the jOOQ configuration\n            generateSchemaSourceOnCompilation = true  // default (can be omitted)\n\n            generationTool {\n                logging = org.jooq.meta.jaxb.Logging.WARN\n                jdbc {\n                    driver = 'org.postgresql.Driver'\n                    url = postgres.jdbcUrl\n                    user = postgres.username\n                    password = postgres.password\n                }\n                generator {\n                    name = 'org.jooq.codegen.DefaultGenerator'\n                    database {\n                        name = 'org.jooq.meta.postgres.PostgresDatabase'\n                        inputSchema = 'public'\n                        forcedTypes {\n                            forcedType {\n                                userType = 'com.fasterxml.jackson.databind.JsonNode'\n                                includeTypes = '.*'\n                                includeExpression = '.*JSON.*'\n                                binding = 'dataflow.binding.PostgresJSONBBinding'\n                            }\n                        }\n                    }\n                    generate {\n                        pojosAsKotlinDataClasses = true\n                        deprecated = false\n                        records = true\n                        pojos = true\n                        immutablePojos = false\n                        fluentSetters = true\n                        daos = true\n                    }\n                    target {\n                        packageName = &quot;dataflow.$dataflowPackageName&quot;\n                        directory = 'build/generated-src/jooq/main'  // default (can be omitted)\n                    }\n                    strategy.name = 'org.jooq.codegen.DefaultGeneratorStrategy'\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>And it's create three container instead of one and don't stop them.\nP.S. I use Gradle jOOQ <a href=\"https://github.com/etiennestuder/gradle-jooq-plugin\" rel=\"noreferrer\">plugin</a></p>\n"},{"tags":["java","logging","quarkus","jaeger","opentracing"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1686644318,"post_id":76460187,"comment_id":134823555,"body_markdown":"As is mentioned in the docs, users are encouraged to use https://quarkus.io/guides/opentelemetry instead of OpenTracing which has been deprecated.","body":"As is mentioned in the docs, users are encouraged to use <a href=\"https://quarkus.io/guides/opentelemetry\" rel=\"nofollow noreferrer\">quarkus.io/guides/opentelemetry</a> instead of OpenTracing which has been deprecated."},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1686705119,"post_id":76460187,"comment_id":134834886,"body_markdown":"Thank you. Yes I did switch to using the telemetry. I have added the extension in the build.gradle and added the properties in the application.properties. However, i am getting the following error on startup of my server. Any idea what I am missing: Unrecognized configuration key &quot;quarkus.otel.exporter.otlp.traces.endpoint&quot; was provided; it will be ignored; verify that the dependency extension for this configuration is set or that you did not make a typo","body":"Thank you. Yes I did switch to using the telemetry. I have added the extension in the build.gradle and added the properties in the application.properties. However, i am getting the following error on startup of my server. Any idea what I am missing: Unrecognized configuration key &quot;quarkus.otel.exporter.otlp.traces.endpoint&quot; was provided; it will be ignored; verify that the dependency extension for this configuration is set or that you did not make a typo"}],"answers":[{"tags":[],"owner":{"account_id":5621681,"reputation":229,"user_id":6935180,"display_name":"Bruno Baptista"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686835298,"creation_date":1686835298,"answer_id":76482940,"question_id":76460187,"body_markdown":"The current recommended way to do tracing in Quarkus is with OpenTelemetry. OpenTracing is deprecated.\r\nSee: https://quarkus.io/blog/quarkus-observability-roadmap-2023/\r\n\r\nIn order to have logs from traces, you can use the OpenTelemetry collector and send the output to the log.\r\nHere is an example of a colector configuration [here][1].\r\nThe important part is on line 45.\r\n\r\n\r\n  [1]: https://github.com/brunobat/quarkus-observability-demo/blob/main/docker-compose/basic/otel-collector-config-tofile.yaml","title":"Quarkus opentracing","body":"<p>The current recommended way to do tracing in Quarkus is with OpenTelemetry. OpenTracing is deprecated.\nSee: <a href=\"https://quarkus.io/blog/quarkus-observability-roadmap-2023/\" rel=\"nofollow noreferrer\">https://quarkus.io/blog/quarkus-observability-roadmap-2023/</a></p>\n<p>In order to have logs from traces, you can use the OpenTelemetry collector and send the output to the log.\nHere is an example of a colector configuration <a href=\"https://github.com/brunobat/quarkus-observability-demo/blob/main/docker-compose/basic/otel-collector-config-tofile.yaml\" rel=\"nofollow noreferrer\">here</a>.\nThe important part is on line 45.</p>\n"}],"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686835298,"creation_date":1686602462,"question_id":76460187,"body_markdown":"Looking to implement open tracing on Quarkus based on the info below:\r\n\r\nhttps://quarkus.io/guides/opentracing\r\n\r\nHowever, it seems to require a separate Jaeger instance for grabbing all the traces across all services. Is it possible to write the trace information to the logs of the current service as well as a separate Jaeger instance?","title":"Quarkus opentracing","body":"<p>Looking to implement open tracing on Quarkus based on the info below:</p>\n<p><a href=\"https://quarkus.io/guides/opentracing\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/opentracing</a></p>\n<p>However, it seems to require a separate Jaeger instance for grabbing all the traces across all services. Is it possible to write the trace information to the logs of the current service as well as a separate Jaeger instance?</p>\n"},{"tags":["java","eclipselink","jboss7.x"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1687275840,"post_id":76482916,"comment_id":134912498,"body_markdown":"How did you install EclipseLink? By default JBoss EAP uses Hibernate as its JPA implementation.","body":"How did you install EclipseLink? By default JBoss EAP uses Hibernate as its JPA implementation."}],"owner":{"account_id":1710753,"reputation":993,"user_id":1568881,"accept_rate":40,"display_name":"Aguid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686835105,"creation_date":1686835105,"question_id":76482916,"body_markdown":"I am getting the following error when deploy my application using eclipselink 2.7.12 on EAP 7.4. \r\nDo you have an idea what is the cause ? \r\n\r\n```\r\nCaused by: java.util.ServiceConfigurationError: javax.persistence.spi.PersistenceProvider: org.eclipse.persistence.jpa.PersistenceProvider Unable to get public no-arg constructor\r\n        at java.base/java.util.ServiceLoader.fail(ServiceLoader.java:582)\r\n        at java.base/java.util.ServiceLoader.getConstructor(ServiceLoader.java:673)\r\n        at java.base/java.util.ServiceLoader$LazyClassPathLookupIterator.hasNextService(ServiceLoader.java:1233)\r\n        at java.base/java.util.ServiceLoader$LazyClassPathLookupIterator.hasNext(ServiceLoader.java:1265)\r\n        at java.base/java.util.ServiceLoader$2.hasNext(ServiceLoader.java:1300)\r\n        at java.base/java.util.ServiceLoader$3.hasNext(ServiceLoader.java:1385)\r\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.persistenceprovider.PersistenceProviderLoader.loadProviderModuleByName(PersistenceProviderLoader.java:70)\r\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceUnitServiceHandler.lookupProvider(PersistenceUnitServiceHandler.java:994)\r\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceUnitServiceHandler.addPuService(PersistenceUnitServiceHandler.java:266)\r\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceUnitServiceHandler.handleEarDeployment(PersistenceUnitServiceHandler.java:228)\r\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceUnitServiceHandler.deploy(PersistenceUnitServiceHandler.java:135)\r\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceBeginInstallProcessor.deploy(PersistenceBeginInstallProcessor.java:52)\r\n        at org.jboss.as.server@15.0.13.Final-redhat-00001//org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:182)\r\n        ... 8 more\r\nCaused by: java.lang.LinkageError: loader constraint violation in interface itable initialization for class org.eclipse.persistence.jpa.PersistenceProvider: when selecting method &#39;javax.persistence.spi.ProviderUtil javax.persistence\r\n.spi.PersistenceProvider.getProviderUtil()&#39; the class loader &#39;javax.persistence.api@2.2.3.redhat-00001&#39; @712a71c1 for super interface javax.persistence.spi.PersistenceProvider, and the class loader &#39;org.eclipse.persistence@2.7.12.v2\r\n0230209-e5c4074ef3&#39; @2ba8c1fd of the selected method&#39;s class, org.eclipse.persistence.jpa.PersistenceProvider have different Class objects for the type javax.persistence.spi.ProviderUtil used in the signature (javax.persistence.spi.\r\nPersistenceProvider is in unnamed module of loader &#39;javax.persistence.api@2.2.3.redhat-00001&#39; @712a71c1, parent loader &#39;app&#39;; org.eclipse.persistence.jpa.PersistenceProvider is in unnamed module of loader &#39;org.eclipse.persistence@2.\r\n7.12.v20230209-e5c4074ef3&#39; @2ba8c1fd, parent loader &#39;app&#39;)\r\n        at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)\r\n        at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3137)\r\n        at java.base/java.lang.Class.getConstructor0(Class.java:3342)\r\n        at java.base/java.lang.Class.getConstructor(Class.java:2151)\r\n        at java.base/java.util.ServiceLoader$1.run(ServiceLoader.java:660)\r\n        at java.base/java.util.ServiceLoader$1.run(ServiceLoader.java:657)\r\n        at java.base/java.security.AccessController.doPrivileged(Native Method)\r\n        at java.base/java.util.ServiceLoader.getConstructor(ServiceLoader.java:668)\r\n        ... 19 more\r\n\r\n```\r\n\r\n\r\n","title":"java.lang.LinkageError: loader constraint violation eclipselink 2.7.12 on EAP 7.4","body":"<p>I am getting the following error when deploy my application using eclipselink 2.7.12 on EAP 7.4.\nDo you have an idea what is the cause ?</p>\n<pre><code>Caused by: java.util.ServiceConfigurationError: javax.persistence.spi.PersistenceProvider: org.eclipse.persistence.jpa.PersistenceProvider Unable to get public no-arg constructor\n        at java.base/java.util.ServiceLoader.fail(ServiceLoader.java:582)\n        at java.base/java.util.ServiceLoader.getConstructor(ServiceLoader.java:673)\n        at java.base/java.util.ServiceLoader$LazyClassPathLookupIterator.hasNextService(ServiceLoader.java:1233)\n        at java.base/java.util.ServiceLoader$LazyClassPathLookupIterator.hasNext(ServiceLoader.java:1265)\n        at java.base/java.util.ServiceLoader$2.hasNext(ServiceLoader.java:1300)\n        at java.base/java.util.ServiceLoader$3.hasNext(ServiceLoader.java:1385)\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.persistenceprovider.PersistenceProviderLoader.loadProviderModuleByName(PersistenceProviderLoader.java:70)\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceUnitServiceHandler.lookupProvider(PersistenceUnitServiceHandler.java:994)\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceUnitServiceHandler.addPuService(PersistenceUnitServiceHandler.java:266)\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceUnitServiceHandler.handleEarDeployment(PersistenceUnitServiceHandler.java:228)\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceUnitServiceHandler.deploy(PersistenceUnitServiceHandler.java:135)\n        at org.jboss.as.jpa@7.4.5.GA-redhat-00001//org.jboss.as.jpa.processor.PersistenceBeginInstallProcessor.deploy(PersistenceBeginInstallProcessor.java:52)\n        at org.jboss.as.server@15.0.13.Final-redhat-00001//org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:182)\n        ... 8 more\nCaused by: java.lang.LinkageError: loader constraint violation in interface itable initialization for class org.eclipse.persistence.jpa.PersistenceProvider: when selecting method 'javax.persistence.spi.ProviderUtil javax.persistence\n.spi.PersistenceProvider.getProviderUtil()' the class loader 'javax.persistence.api@2.2.3.redhat-00001' @712a71c1 for super interface javax.persistence.spi.PersistenceProvider, and the class loader 'org.eclipse.persistence@2.7.12.v2\n0230209-e5c4074ef3' @2ba8c1fd of the selected method's class, org.eclipse.persistence.jpa.PersistenceProvider have different Class objects for the type javax.persistence.spi.ProviderUtil used in the signature (javax.persistence.spi.\nPersistenceProvider is in unnamed module of loader 'javax.persistence.api@2.2.3.redhat-00001' @712a71c1, parent loader 'app'; org.eclipse.persistence.jpa.PersistenceProvider is in unnamed module of loader 'org.eclipse.persistence@2.\n7.12.v20230209-e5c4074ef3' @2ba8c1fd, parent loader 'app')\n        at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)\n        at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3137)\n        at java.base/java.lang.Class.getConstructor0(Class.java:3342)\n        at java.base/java.lang.Class.getConstructor(Class.java:2151)\n        at java.base/java.util.ServiceLoader$1.run(ServiceLoader.java:660)\n        at java.base/java.util.ServiceLoader$1.run(ServiceLoader.java:657)\n        at java.base/java.security.AccessController.doPrivileged(Native Method)\n        at java.base/java.util.ServiceLoader.getConstructor(ServiceLoader.java:668)\n        ... 19 more\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-ldap"],"answers":[{"tags":[],"owner":{"account_id":8304670,"reputation":111,"user_id":6242189,"display_name":"cNgamba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686835072,"creation_date":1686835072,"answer_id":76482909,"question_id":76392614,"body_markdown":"Looks like the problem is with spring-security not able to handle basedn with space.\r\n\r\nhttps://github.com/spring-projects/spring-security/issues/2264\r\n\r\nReplacing the space in the basedn with %20 helps in successfully building the application. However, the workaround provided above doesn&#39;t work for me.","title":"LDAP Authentication in SpringBoot not working","body":"<p>Looks like the problem is with spring-security not able to handle basedn with space.</p>\n<p><a href=\"https://github.com/spring-projects/spring-security/issues/2264\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-security/issues/2264</a></p>\n<p>Replacing the space in the basedn with %20 helps in successfully building the application. However, the workaround provided above doesn't work for me.</p>\n"}],"owner":{"account_id":8304670,"reputation":111,"user_id":6242189,"display_name":"cNgamba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686835072,"creation_date":1685729960,"question_id":76392614,"body_markdown":"Below is my spring security ldap authentication code snippet\r\nI am able to authenticate admin user as shown in CASE 2. However, when I am not able to authenticate user1 as shown in CASE 1 for a different base dn. \r\n\r\n``` \r\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        if (ldapEnabled) {\r\n            auth.ldapAuthentication()\r\n                    .userDetailsContextMapper(customContextMapper())\r\n                    .userSearchFilter(&quot;(&amp;(objectClass=user)(&quot; + userDn+ &quot;))&quot;)\r\n                    .contextSource()\r\n                    .url(ldapProviderUrl + baseDn.trim().replaceAll(&quot; &quot;, &quot;%20&quot;))\r\n                    .managerDn(ldap.username)\r\n                    .managerPassword(ldap.password);\r\n        } else {\r\n            super.configure(auth);\r\n        }\r\n    }\r\n```\r\n\r\nThe properties that I use are\r\nFor case 1 \r\n```\r\nldap.enabled=true\r\nldap.provider.url=ldap://XX.XX.XX.XX:389/\r\nldap.username=CN=XXXXXX,OU=**People**,DC=pserv,DC=local\r\nldap.password=#########\r\nldap.base.dn=OU=**User Accounts**,DC=pserv,DC=local\r\nldap.user.dn.patterns=sAMAccountName={0}\r\nldap.user.password.attribute=userPassword\r\nldap.search.base.group=ou=groups\r\n```\r\nfor case 2\r\n```\r\nldap.enabled=true\r\nldap.provider.url=ldap://XX.XX.XX.XX:389/\r\nldap.username=CN=XXXXXX,OU=**People**,DC=pserv,DC=local\r\nldap.password=#########\r\nldap.base.dn=OU=**People**,DC=pserv,DC=local\r\nldap.user.dn.patterns=sAMAccountName={0}\r\nldap.user.password.attribute=userPassword\r\nldap.search.base.group=ou=groups\r\n```\r\n\r\n\r\nAnd my ldap directory tree: (Failed case) CASE 1 :\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWorking Ldap directory CASE 2:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CoinI.png\r\n  [2]: https://i.stack.imgur.com/7u9gQ.png\r\n\r\nQuestions:\r\n1. Is it because my ldap.username OU is under &quot;**People**&quot;?\r\n2. I fixed the issue for space in the base dn in case 1 nu replacing with %20. But I am not able to authenticate the user. Getting this error\r\n```\r\norg.springframework.security.authentication.InternalAuthenticationServiceException: [LDAP: error code 32 - 0000208D: NameErr: DSID-03100245, problem 2001 (NO_OBJECT), data 0, best match of:\r\n\t&#39;DC=pserv,DC=local&#39;\r\n ]; nested exception is javax.naming.NameNotFoundException: [LDAP: error code 32 - 0000208D: NameErr: DSID-03100245, problem 2001 (NO_OBJECT), data 0, best match of:\r\n\t&#39;DC=pserv,DC=local&#39;\r\n ]; remaining name &#39;/&#39;\r\n```","title":"LDAP Authentication in SpringBoot not working","body":"<p>Below is my spring security ldap authentication code snippet\nI am able to authenticate admin user as shown in CASE 2. However, when I am not able to authenticate user1 as shown in CASE 1 for a different base dn.</p>\n<pre><code>protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        if (ldapEnabled) {\n            auth.ldapAuthentication()\n                    .userDetailsContextMapper(customContextMapper())\n                    .userSearchFilter(&quot;(&amp;(objectClass=user)(&quot; + userDn+ &quot;))&quot;)\n                    .contextSource()\n                    .url(ldapProviderUrl + baseDn.trim().replaceAll(&quot; &quot;, &quot;%20&quot;))\n                    .managerDn(ldap.username)\n                    .managerPassword(ldap.password);\n        } else {\n            super.configure(auth);\n        }\n    }\n</code></pre>\n<p>The properties that I use are\nFor case 1</p>\n<pre><code>ldap.enabled=true\nldap.provider.url=ldap://XX.XX.XX.XX:389/\nldap.username=CN=XXXXXX,OU=**People**,DC=pserv,DC=local\nldap.password=#########\nldap.base.dn=OU=**User Accounts**,DC=pserv,DC=local\nldap.user.dn.patterns=sAMAccountName={0}\nldap.user.password.attribute=userPassword\nldap.search.base.group=ou=groups\n</code></pre>\n<p>for case 2</p>\n<pre><code>ldap.enabled=true\nldap.provider.url=ldap://XX.XX.XX.XX:389/\nldap.username=CN=XXXXXX,OU=**People**,DC=pserv,DC=local\nldap.password=#########\nldap.base.dn=OU=**People**,DC=pserv,DC=local\nldap.user.dn.patterns=sAMAccountName={0}\nldap.user.password.attribute=userPassword\nldap.search.base.group=ou=groups\n</code></pre>\n<p>And my ldap directory tree: (Failed case) CASE 1 :</p>\n<p><a href=\"https://i.stack.imgur.com/CoinI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CoinI.png\" alt=\"enter image description here\" /></a></p>\n<p>Working Ldap directory CASE 2:</p>\n<p><a href=\"https://i.stack.imgur.com/7u9gQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7u9gQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Questions:</p>\n<ol>\n<li>Is it because my ldap.username OU is under &quot;<strong>People</strong>&quot;?</li>\n<li>I fixed the issue for space in the base dn in case 1 nu replacing with %20. But I am not able to authenticate the user. Getting this error</li>\n</ol>\n<pre><code>org.springframework.security.authentication.InternalAuthenticationServiceException: [LDAP: error code 32 - 0000208D: NameErr: DSID-03100245, problem 2001 (NO_OBJECT), data 0, best match of:\n    'DC=pserv,DC=local'\n ]; nested exception is javax.naming.NameNotFoundException: [LDAP: error code 32 - 0000208D: NameErr: DSID-03100245, problem 2001 (NO_OBJECT), data 0, best match of:\n    'DC=pserv,DC=local'\n ]; remaining name '/'\n</code></pre>\n"},{"tags":["java","intellij-idea","code-formatting"],"answers":[{"tags":[],"owner":{"account_id":4687896,"reputation":140,"user_id":3794827,"accept_rate":57,"display_name":"Pavel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1405692960,"creation_date":1405691895,"answer_id":24826828,"question_id":24826723,"body_markdown":"You can change this in ***settings***\r\n\r\n`File` =&gt; `Settings` =&gt; `Code Style` =&gt; `Java` =&gt; `Wrapping and Braces` =&gt; `Braces Placement`.","title":"how to configure code formatter on intellij","body":"<p>You can change this in <strong><em>settings</em></strong></p>\n\n<p><code>File</code> => <code>Settings</code> => <code>Code Style</code> => <code>Java</code> => <code>Wrapping and Braces</code> => <code>Braces Placement</code>.</p>\n"},{"tags":[],"owner":{"account_id":4812242,"reputation":55062,"user_id":3885376,"accept_rate":64,"display_name":"ROMANIA_engineer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457107176,"creation_date":1457106528,"answer_id":35800225,"question_id":24826723,"body_markdown":"### IntelliJ IDEA 15\r\n\r\nCode Style is under Editor.\r\n\r\n**File** &gt; **Settings...** &gt; **Editor** &gt; **Code Style** &gt; **Java** &gt; **Wrapping and Braces** &gt; **Braces Placement** &gt; change &quot;End of line&quot; to &quot;Next line&quot; for &quot;In class declaration&quot;, &quot;In method declaration&quot; and &quot;Other&quot; &gt; OK\r\n\r\n[![Braces placement][1]][1]\r\n\r\nOn the right side, you will see a live preview.\r\n\r\n**Apply the new formatting**\r\n\r\n* For the current file: \r\n * click on the editor area &gt; press &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;L&lt;/kbd&gt;\r\n* For the whole project / a folder\r\n * click on a folder from the project structure (E.g.: on **src**) &gt; press &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;L&lt;/kbd&gt;\r\n\r\n  [1]: http://i.stack.imgur.com/L9DmB.png","title":"how to configure code formatter on intellij","body":"<h3>IntelliJ IDEA 15</h3>\n\n<p>Code Style is under Editor.</p>\n\n<p><strong>File</strong> > <strong>Settings...</strong> > <strong>Editor</strong> > <strong>Code Style</strong> > <strong>Java</strong> > <strong>Wrapping and Braces</strong> > <strong>Braces Placement</strong> > change \"End of line\" to \"Next line\" for \"In class declaration\", \"In method declaration\" and \"Other\" > OK</p>\n\n<p><a href=\"https://i.stack.imgur.com/L9DmB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L9DmB.png\" alt=\"Braces placement\"></a></p>\n\n<p>On the right side, you will see a live preview.</p>\n\n<p><strong>Apply the new formatting</strong></p>\n\n<ul>\n<li>For the current file: \n\n<ul>\n<li>click on the editor area > press <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>L</kbd></li>\n</ul></li>\n<li>For the whole project / a folder\n\n<ul>\n<li>click on a folder from the project structure (E.g.: on <strong>src</strong>) > press <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>L</kbd></li>\n</ul></li>\n</ul>\n"}],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2924,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":24826828,"answer_count":2,"score":2,"last_activity_date":1686834993,"creation_date":1405691615,"question_id":24826723,"body_markdown":"I have to write code in another style. Am I wondering how to configure IntelliJ for this purpose?\r\n\r\nIt is before code looking:\r\n\r\n    @Override\r\n\tpublic void generateTestObjectsInDb(Object... objects) {\r\n\t\ttry {\r\n\t\t\tfor (Object obj : objects) {\r\n\t\t\t\tDataBaseObjectService.createObjectInDB(obj);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\tLogger.fatal(&quot;Error occured while generating data in product Database.&quot;, e);\r\n\t\t}\r\n\t}\r\n\r\nAnd here is how it should look:\r\n\r\n    @Override\r\n\tpublic void generateTestObjectsInDb(Object... objects)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tfor (Object obj : objects)\r\n\t\t\t{\r\n\t\t\t\tDataBaseObjectService.createObjectInDB(obj);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (Exception e)\r\n\t\t{\r\n\t\t\tLogger.fatal(&quot;Error occured while generating data in product Database.&quot;, e);\r\n\t\t}\r\n\t}\r\n\r\nHow to achive this new code looking after using statndard key bindings ***Ctrl + Alt + L***?","title":"how to configure code formatter on intellij","body":"<p>I have to write code in another style. Am I wondering how to configure IntelliJ for this purpose?</p>\n<p>It is before code looking:</p>\n<pre><code>@Override\npublic void generateTestObjectsInDb(Object... objects) {\n    try {\n        for (Object obj : objects) {\n            DataBaseObjectService.createObjectInDB(obj);\n        }\n    } catch (Exception e) {\n        Logger.fatal(&quot;Error occured while generating data in product Database.&quot;, e);\n    }\n}\n</code></pre>\n<p>And here is how it should look:</p>\n<pre><code>@Override\npublic void generateTestObjectsInDb(Object... objects)\n{\n    try\n    {\n        for (Object obj : objects)\n        {\n            DataBaseObjectService.createObjectInDB(obj);\n        }\n    }\n    catch (Exception e)\n    {\n        Logger.fatal(&quot;Error occured while generating data in product Database.&quot;, e);\n    }\n}\n</code></pre>\n<p>How to achive this new code looking after using statndard key bindings <em><strong>Ctrl + Alt + L</strong></em>?</p>\n"},{"tags":["java","botframework","microsoft-teams","adaptive-cards","microsoft-teams-js"],"comments":[{"owner":{"account_id":25916036,"reputation":3523,"user_id":19639413,"display_name":"pmacfarlane"},"score":0,"creation_date":1686780417,"post_id":76477741,"comment_id":134848098,"body_markdown":"You should check your tags. You&#39;ve got `C` in there, which seems to be irrelevant, but no mention of `Java`. Feel free to [edit] your question to add more appropriate tags, or indeed for any reason, at any time.","body":"You should check your tags. You&#39;ve got <code>C</code> in there, which seems to be irrelevant, but no mention of <code>Java</code>. Feel free to <a href=\"https://stackoverflow.com/posts/76477741/edit\">edit</a> your question to add more appropriate tags, or indeed for any reason, at any time."},{"owner":{"account_id":23205773,"reputation":379,"user_id":17300012,"display_name":"Sayali-MSFT"},"score":0,"creation_date":1686822486,"post_id":76477741,"comment_id":134853385,"body_markdown":"“Unable to reach app. Please try again” error occur due to the reason for this seems the processing time taking more than 15 seconds. \nYou have to manage the long running operations.\nFor proper handling of managing long running operation please refer below doc.\nhttps://docs.microsoft.com/en-us/azure/bot-service/bot-builder-howto-long-operations-guidance?view=azure-bot-service-4.0","body":"“Unable to reach app. Please try again” error occur due to the reason for this seems the processing time taking more than 15 seconds.  You have to manage the long running operations. For proper handling of managing long running operation please refer below doc. <a href=\"https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-howto-long-operations-guidance?view=azure-bot-service-4.0\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/azure/bot-service/&hellip;</a>"},{"owner":{"account_id":5992276,"reputation":3,"user_id":4708050,"display_name":"lfdevjmp"},"score":0,"creation_date":1686932734,"post_id":76477741,"comment_id":134871395,"body_markdown":"@Sayali-MSFT  15 seconds?  The error message displays almost instantaneously.  Also this is a simplified version of the exact sequence of statements as shown in TeamsTaskModuleBot.java onTeamsTaskModuleFetch override in the teamstaskmodule sample project.  Is that code incorrect as well?","body":"@Sayali-MSFT  15 seconds?  The error message displays almost instantaneously.  Also this is a simplified version of the exact sequence of statements as shown in TeamsTaskModuleBot.java onTeamsTaskModuleFetch override in the teamstaskmodule sample project.  Is that code incorrect as well?"},{"owner":{"account_id":23205773,"reputation":379,"user_id":17300012,"display_name":"Sayali-MSFT"},"score":0,"creation_date":1687168955,"post_id":76477741,"comment_id":134894397,"body_markdown":"Could you please look into this sample for reference-https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/8f266c33608d6d7b4cf89c81779ccf49e7664c1e/samples/bot-task-module/java","body":"Could you please look into this sample for reference-<a href=\"https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/8f266c33608d6d7b4cf89c81779ccf49e7664c1e/samples/bot-task-module/java\" rel=\"nofollow noreferrer\">github.com/OfficeDev/Microsoft-Teams-Samples/tree/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":5992276,"reputation":3,"user_id":4708050,"display_name":"lfdevjmp"},"score":0,"creation_date":1687193232,"post_id":76477741,"comment_id":134899448,"body_markdown":"That&#39;s the sample I was referencing in my last comment.  My code is just a simplified implementation of that very same logic in TeamsTaskModuleBot.java.  I have another compose extension in my Teams app that successfully launches a Task Module using the very same URL, but the URL doesn&#39;t load into the task module when launched from the adaptive card.","body":"That&#39;s the sample I was referencing in my last comment.  My code is just a simplified implementation of that very same logic in TeamsTaskModuleBot.java.  I have another compose extension in my Teams app that successfully launches a Task Module using the very same URL, but the URL doesn&#39;t load into the task module when launched from the adaptive card."},{"owner":{"account_id":23205773,"reputation":379,"user_id":17300012,"display_name":"Sayali-MSFT"},"score":0,"creation_date":1688460753,"post_id":76477741,"comment_id":135073746,"body_markdown":"did you get any error in console?","body":"did you get any error in console?"}],"owner":{"account_id":5992276,"reputation":3,"user_id":4708050,"display_name":"lfdevjmp"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686834874,"creation_date":1686778916,"question_id":76477741,"body_markdown":"I have a simple Adaptive Card returning into the Teams chat from a TeamsActivityHandler.onMessageActivity override:\r\n\r\n```\r\n @Override\r\n    protected CompletableFuture&lt;Void&gt; onMessageActivity(TurnContext turnContext) {\t\t\r\n\t\t\r\n\t\tString text = turnContext.getActivity().getText().trim().toLowerCase();\t\t\r\n\t\t\r\n\t\tif(text.contains(&quot;calendar&quot;)){\r\n\t\t\t\r\n\t\t\tFile filePath = new File(this.teamsPath, &quot;calCard.json&quot;);\r\n\t\t\ttry (InputStream inputStream = new FileInputStream(filePath)) {\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tString result = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\t\t\t\t\r\n\t\t\t\treturn turnContext.sendActivity( MessageFactory.attachment(adaptiveCardAttachmentFromJson(result)) )\r\n\t\t\t\t.thenApply(resourceResponse -&gt; null);\t\t\t\r\n\t\t\t\t\r\n\t\t\t} catch (Throwable t) {\r\n\t\t\t\tthrow new CompletionException(t);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\treturn notImplemented();\r\n\t\t}\r\n}\r\n\r\nprivate Attachment adaptiveCardAttachmentFromJson(String json) throws IOException {\r\n\t\tAttachment attachment = new Attachment();\r\n\t\tattachment.setContentType(&quot;application/vnd.microsoft.card.adaptive&quot;);\r\n\t\tattachment.setContent(new ObjectMapper().readValue(json, ObjectNode.class));\r\n\t\treturn attachment;\r\n    }\r\n```\r\n\r\ncalCard.json\r\n\r\n```\r\n{   \r\n    &quot;type&quot;: &quot;AdaptiveCard&quot;,\r\n    &quot;body&quot;: [\r\n        {\r\n            &quot;type&quot;: &quot;TextBlock&quot;,\r\n            &quot;size&quot;: &quot;medium&quot;,\r\n            &quot;weight&quot;: &quot;bolder&quot;,\r\n            &quot;text&quot;: &quot;Calendar&quot;,\r\n            &quot;horizontalAlignment&quot;: &quot;center&quot;,\r\n            &quot;wrap&quot;: true,\r\n            &quot;style&quot;: &quot;heading&quot;\r\n        },\r\n        {\r\n            &quot;type&quot;: &quot;Input.Text&quot;,\r\n            &quot;label&quot;: &quot;Matter&quot;,\r\n            &quot;id&quot;: &quot;MATTER_DETAILS&quot;,\r\n            &quot;isRequired&quot;: true,\r\n            &quot;errorMessage&quot;: &quot;Matter is required&quot;,\r\n            &quot;placeholder&quot;: &quot;Select a Matter&quot;,\r\n            &quot;inlineAction&quot;: {\r\n                &quot;type&quot;: &quot;Action.Submit&quot;,\r\n                &quot;title&quot;: &quot;submit&quot;,\r\n                &quot;fetchTask&quot;: false,\r\n                &quot;data&quot;: {\r\n\t\t\t\t\t&quot;ade_window&quot;: &quot;MATTER_PICK&quot;,\r\n                    &quot;msteams&quot;: {\r\n                        &quot;type&quot;: &quot;task/fetch&quot;                        \t\t\t\t\t\r\n                    }\r\n                },\r\n                &quot;id&quot;: &quot;MATTER_PICK&quot;,\r\n                &quot;associatedInputs&quot;: &quot;none&quot;\r\n            }\r\n        },\r\n        {\r\n            &quot;type&quot;: &quot;Input.Text&quot;,\r\n            &quot;label&quot;: &quot;Description&quot;,\r\n            &quot;id&quot;: &quot;0&quot;,\r\n            &quot;name&quot;: &quot;CAL_DESC&quot;,\r\n            &quot;isRequired&quot;: true,\r\n            &quot;errorMessage&quot;: &quot;Name is required&quot;,\r\n            &quot;placeholder&quot;: &quot;Enter a Description&quot;\r\n        }\r\n    ],\r\n    &quot;actions&quot;: [\r\n        {\r\n            &quot;type&quot;: &quot;Action.Submit&quot;,\r\n            &quot;title&quot;: &quot;Submit&quot;\r\n        }\r\n    ],\r\n\t&quot;$schema&quot;: &quot;http://adaptivecards.io/schemas/adaptive-card.json&quot;,\r\n    &quot;version&quot;: &quot;1.3&quot;\r\n}\r\n```\r\n\r\nThe card is successfully produced in the chat, and upon clicking the inlineAction Action.Submit button, my bot receives the onTeamsTaskModuleFetch request and I handle with the following logic:\r\n\r\nNote: I can hit the ngrok String url shown here from the browser, and I&#39;m also using composeExtensions with commands using this address where the task module is loaded successfully.\r\n\r\n```\r\n  @Override\r\n    protected CompletableFuture&lt;TaskModuleResponse&gt; onTeamsTaskModuleFetch(\r\n        TurnContext turnContext,\r\n        TaskModuleRequest taskModuleRequest\r\n    ) {\r\n\t\t return Async.wrapBlock(() -&gt; {\r\n\t\t\r\n\t\t\tTaskModuleTaskInfo taskInfo = new TaskModuleTaskInfo();\r\n\t\t\t\r\n\t\t\tString url = &quot;https://6303-97-91-136-36.ngrok-free.app/JSP2.5/TeamsStart.jsp?_start_page=Matter%20Detail%20Pick&amp;winTitle=Select%20Matter&quot;;\r\n\t\t\t\r\n\t\t\ttaskInfo.setUrl(url);\r\n\t\t\ttaskInfo.setFallbackUrl(url);\t\t\r\n            taskInfo.setHeight(&quot;medium&quot;);\r\n\t\t\ttaskInfo.setWidth(&quot;small&quot;);\t\t\t\r\n\t\t\ttaskInfo.setTitle(&quot;Task Module Test&quot;);\t\t\t\r\n\t\t\t\r\n\t\t\treturn taskInfo;\r\n\t\t\r\n\t\t }).thenApply(TaskModuleResponseFactory::toTaskModuleResponse);\r\n\t}\r\n```\r\n\r\nThe web view fails to load and I&#39;m met with an empty Task Module displaying the text &quot;Unable to reach app. Please try again.&quot;\r\n\r\nAm I missing something?  \r\n\r\n\r\n\r\n","title":"Teams App - Embedded Web View Task Module launched from Adaptive Card - Bot Framework SDK for Java","body":"<p>I have a simple Adaptive Card returning into the Teams chat from a TeamsActivityHandler.onMessageActivity override:</p>\n<pre><code> @Override\n    protected CompletableFuture&lt;Void&gt; onMessageActivity(TurnContext turnContext) {      \n        \n        String text = turnContext.getActivity().getText().trim().toLowerCase();     \n        \n        if(text.contains(&quot;calendar&quot;)){\n            \n            File filePath = new File(this.teamsPath, &quot;calCard.json&quot;);\n            try (InputStream inputStream = new FileInputStream(filePath)) {         \n                \n                String result = IOUtils.toString(inputStream, StandardCharsets.UTF_8);              \n                return turnContext.sendActivity( MessageFactory.attachment(adaptiveCardAttachmentFromJson(result)) )\n                .thenApply(resourceResponse -&gt; null);           \n                \n            } catch (Throwable t) {\n                throw new CompletionException(t);\n            }\n            \n        }else{\n            return notImplemented();\n        }\n}\n\nprivate Attachment adaptiveCardAttachmentFromJson(String json) throws IOException {\n        Attachment attachment = new Attachment();\n        attachment.setContentType(&quot;application/vnd.microsoft.card.adaptive&quot;);\n        attachment.setContent(new ObjectMapper().readValue(json, ObjectNode.class));\n        return attachment;\n    }\n</code></pre>\n<p>calCard.json</p>\n<pre><code>{   \n    &quot;type&quot;: &quot;AdaptiveCard&quot;,\n    &quot;body&quot;: [\n        {\n            &quot;type&quot;: &quot;TextBlock&quot;,\n            &quot;size&quot;: &quot;medium&quot;,\n            &quot;weight&quot;: &quot;bolder&quot;,\n            &quot;text&quot;: &quot;Calendar&quot;,\n            &quot;horizontalAlignment&quot;: &quot;center&quot;,\n            &quot;wrap&quot;: true,\n            &quot;style&quot;: &quot;heading&quot;\n        },\n        {\n            &quot;type&quot;: &quot;Input.Text&quot;,\n            &quot;label&quot;: &quot;Matter&quot;,\n            &quot;id&quot;: &quot;MATTER_DETAILS&quot;,\n            &quot;isRequired&quot;: true,\n            &quot;errorMessage&quot;: &quot;Matter is required&quot;,\n            &quot;placeholder&quot;: &quot;Select a Matter&quot;,\n            &quot;inlineAction&quot;: {\n                &quot;type&quot;: &quot;Action.Submit&quot;,\n                &quot;title&quot;: &quot;submit&quot;,\n                &quot;fetchTask&quot;: false,\n                &quot;data&quot;: {\n                    &quot;ade_window&quot;: &quot;MATTER_PICK&quot;,\n                    &quot;msteams&quot;: {\n                        &quot;type&quot;: &quot;task/fetch&quot;                                            \n                    }\n                },\n                &quot;id&quot;: &quot;MATTER_PICK&quot;,\n                &quot;associatedInputs&quot;: &quot;none&quot;\n            }\n        },\n        {\n            &quot;type&quot;: &quot;Input.Text&quot;,\n            &quot;label&quot;: &quot;Description&quot;,\n            &quot;id&quot;: &quot;0&quot;,\n            &quot;name&quot;: &quot;CAL_DESC&quot;,\n            &quot;isRequired&quot;: true,\n            &quot;errorMessage&quot;: &quot;Name is required&quot;,\n            &quot;placeholder&quot;: &quot;Enter a Description&quot;\n        }\n    ],\n    &quot;actions&quot;: [\n        {\n            &quot;type&quot;: &quot;Action.Submit&quot;,\n            &quot;title&quot;: &quot;Submit&quot;\n        }\n    ],\n    &quot;$schema&quot;: &quot;http://adaptivecards.io/schemas/adaptive-card.json&quot;,\n    &quot;version&quot;: &quot;1.3&quot;\n}\n</code></pre>\n<p>The card is successfully produced in the chat, and upon clicking the inlineAction Action.Submit button, my bot receives the onTeamsTaskModuleFetch request and I handle with the following logic:</p>\n<p>Note: I can hit the ngrok String url shown here from the browser, and I'm also using composeExtensions with commands using this address where the task module is loaded successfully.</p>\n<pre><code>  @Override\n    protected CompletableFuture&lt;TaskModuleResponse&gt; onTeamsTaskModuleFetch(\n        TurnContext turnContext,\n        TaskModuleRequest taskModuleRequest\n    ) {\n         return Async.wrapBlock(() -&gt; {\n        \n            TaskModuleTaskInfo taskInfo = new TaskModuleTaskInfo();\n            \n            String url = &quot;https://6303-97-91-136-36.ngrok-free.app/JSP2.5/TeamsStart.jsp?_start_page=Matter%20Detail%20Pick&amp;winTitle=Select%20Matter&quot;;\n            \n            taskInfo.setUrl(url);\n            taskInfo.setFallbackUrl(url);       \n            taskInfo.setHeight(&quot;medium&quot;);\n            taskInfo.setWidth(&quot;small&quot;);         \n            taskInfo.setTitle(&quot;Task Module Test&quot;);          \n            \n            return taskInfo;\n        \n         }).thenApply(TaskModuleResponseFactory::toTaskModuleResponse);\n    }\n</code></pre>\n<p>The web view fails to load and I'm met with an empty Task Module displaying the text &quot;Unable to reach app. Please try again.&quot;</p>\n<p>Am I missing something?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":1,"creation_date":1379353073,"post_id":18834005,"comment_id":27784194,"body_markdown":"Are those classes in different packages? If yes then you need to import `B` class in `A` class.","body":"Are those classes in different packages? If yes then you need to import <code>B</code> class in <code>A</code> class."},{"owner":{"account_id":2560357,"reputation":1425,"user_id":2221461,"accept_rate":84,"display_name":"RaptorDotCpp"},"score":1,"creation_date":1379353076,"post_id":18834005,"comment_id":27784198,"body_markdown":"static methods do not require an instance. Everything looks fine, however the `public` keyword should start with a lowercase &#39;p&#39;. If `B` is in another package, you need to add an import statement: `import package_of_B.B;`","body":"static methods do not require an instance. Everything looks fine, however the <code>public</code> keyword should start with a lowercase &#39;p&#39;. If <code>B</code> is in another package, you need to add an import statement: <code>import package_of_B.B;</code>"}],"answers":[{"tags":[],"owner":{"account_id":3090566,"reputation":11682,"user_id":2616755,"accept_rate":50,"display_name":"cmd"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1420994666,"creation_date":1379353132,"answer_id":18834037,"question_id":18834005,"body_markdown":"Ensure you have proper access to B.staticMethod. Perhaps declare it as\r\n\r\n    public static String[] staticMethod() {\r\n        //code\r\n    }\r\n\r\nAlso, you need to import class B\r\n\r\n    import foo.bar.B; // use fully qualified path foo.bar.B\r\n\r\n    public class A {\r\n        String[] lists = B.staticMethod();\r\n    }","title":"Calling static method from another java class","body":"<p>Ensure you have proper access to B.staticMethod. Perhaps declare it as</p>\n\n<pre><code>public static String[] staticMethod() {\n    //code\n}\n</code></pre>\n\n<p>Also, you need to import class B</p>\n\n<pre><code>import foo.bar.B; // use fully qualified path foo.bar.B\n\npublic class A {\n    String[] lists = B.staticMethod();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2325581,"reputation":429,"user_id":2040186,"display_name":"BlakeP"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1379353161,"creation_date":1379353161,"answer_id":18834042,"question_id":18834005,"body_markdown":"You don&#39;t need to create an instance of the class to call a static method, but you do need to import the class. \r\n\r\n    package foo;\r\n\r\n    //assuming B is in same package\r\n    import foo.B;\r\n\r\n    Public class A{\r\n      String[] lists = B.staticMethod();\r\n    }","title":"Calling static method from another java class","body":"<p>You don't need to create an instance of the class to call a static method, but you do need to import the class. </p>\n\n<pre><code>package foo;\n\n//assuming B is in same package\nimport foo.B;\n\nPublic class A{\n  String[] lists = B.staticMethod();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379353610,"creation_date":1379353610,"answer_id":18834163,"question_id":18834005,"body_markdown":"Java has classloader mechanism that is kind of similar to PHP&#39;s autoloader. This means that you don&#39;t need anything like a `include` or `require` function: as long as the classes that you use are on the &quot;classpath&quot; they will be found.\r\n\r\nSome people will say that you have to use the [`import` statement][1]. That&#39;s not true; `import` does nothing but give you a way to refer to classes with their short names, so that you don&#39;t have to repeat the package name every time.\r\n\r\nFor example, code in a program that works with the `ArrayList` and `Date` classes could be written like this:\r\n\r\n    java.util.ArrayList&lt;java.util.Date&gt; list = new java.util.ArrayList&lt;&gt;();\r\n    list.add(new java.util.Date());\r\n\r\nRepeating the package name gets tiring after a while so we can use `import` to tell the compiler we want to refer to these classes by their short name:\r\n\r\n    import java.util.*;\r\n    ....\r\n    ArrayList&lt;Date&gt; list = new ArrayList&lt;&gt;();\r\n    list.add(new Date());\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html","title":"Calling static method from another java class","body":"<p>Java has classloader mechanism that is kind of similar to PHP's autoloader. This means that you don't need anything like a <code>include</code> or <code>require</code> function: as long as the classes that you use are on the \"classpath\" they will be found.</p>\n\n<p>Some people will say that you have to use the <a href=\"http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html\" rel=\"nofollow\"><code>import</code> statement</a>. That's not true; <code>import</code> does nothing but give you a way to refer to classes with their short names, so that you don't have to repeat the package name every time.</p>\n\n<p>For example, code in a program that works with the <code>ArrayList</code> and <code>Date</code> classes could be written like this:</p>\n\n<pre><code>java.util.ArrayList&lt;java.util.Date&gt; list = new java.util.ArrayList&lt;&gt;();\nlist.add(new java.util.Date());\n</code></pre>\n\n<p>Repeating the package name gets tiring after a while so we can use <code>import</code> to tell the compiler we want to refer to these classes by their short name:</p>\n\n<pre><code>import java.util.*;\n....\nArrayList&lt;Date&gt; list = new ArrayList&lt;&gt;();\nlist.add(new Date());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28827746,"reputation":1,"user_id":22078791,"display_name":"Thomas Burian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686834217,"creation_date":1686834217,"answer_id":76482779,"question_id":18834005,"body_markdown":"You can also import the static method only, like this:\r\n\r\n    import static packageX.packageY.B.staticMethod;\r\n\r\nThen call the method directly from inside your class method A without using a class name, like this:\r\n\r\n    String[] lists = staticMethod();","title":"Calling static method from another java class","body":"<p>You can also import the static method only, like this:</p>\n<pre><code>import static packageX.packageY.B.staticMethod;\n</code></pre>\n<p>Then call the method directly from inside your class method A without using a class name, like this:</p>\n<pre><code>String[] lists = staticMethod();\n</code></pre>\n"}],"owner":{"account_id":3311420,"reputation":945,"user_id":2784840,"accept_rate":52,"display_name":"LeDoc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104240,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":18834037,"answer_count":4,"score":11,"last_activity_date":1686834217,"creation_date":1379353009,"question_id":18834005,"body_markdown":"I&#39;ve recently switched from working in PHP to Java and have a query.  Want to emphasise I&#39;m a beginner in Java.\r\n\r\nEssentially I am working in File A (with class A) and want to refer to a static method saved in File B (class B).  Do I need to make any reference to File B when working with class A?  (I&#39;m thinking along the lines of require_once in PHP) My code in Class A is as follows:\r\n\r\n    Public class A{\r\n    String[] lists = B.staticMethod();\r\n    }\r\n\r\nEclipse is not recognising B as a class. Do I need to create an instance of B in order to access the static method.  Feel like I&#39;m really overlooking something and would appreciate any input.\r\n\r\n","title":"Calling static method from another java class","body":"<p>I've recently switched from working in PHP to Java and have a query.  Want to emphasise I'm a beginner in Java.</p>\n\n<p>Essentially I am working in File A (with class A) and want to refer to a static method saved in File B (class B).  Do I need to make any reference to File B when working with class A?  (I'm thinking along the lines of require_once in PHP) My code in Class A is as follows:</p>\n\n<pre><code>Public class A{\nString[] lists = B.staticMethod();\n}\n</code></pre>\n\n<p>Eclipse is not recognising B as a class. Do I need to create an instance of B in order to access the static method.  Feel like I'm really overlooking something and would appreciate any input.</p>\n"},{"tags":["java","enums","jackson"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686834170,"post_id":76482749,"comment_id":134855909,"body_markdown":"It all depends. Do you want binding to fail, or do you want to add a validation rule with the validation-api. What do you want to happen?","body":"It all depends. Do you want binding to fail, or do you want to add a validation rule with the validation-api. What do you want to happen?"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686834144,"creation_date":1686834144,"answer_id":76482767,"question_id":76482749,"body_markdown":"Like with all other types of value, Jackson will just put `null`. If you want to validate, you can do it later. You shouldn&#39;t do it during deserialization.","title":"Jackson Prevent Null Deserialization of Enum","body":"<p>Like with all other types of value, Jackson will just put <code>null</code>. If you want to validate, you can do it later. You shouldn't do it during deserialization.</p>\n"}],"owner":{"account_id":457191,"reputation":573,"user_id":856358,"accept_rate":83,"display_name":"user856358"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686834144,"creation_date":1686834012,"question_id":76482749,"body_markdown":"I&#39;m trying to understand how Jackson JSON deserialization understand null values. If I have a JSON that maps a single enum:\r\n\r\n```\r\n{\r\n    &quot;myEnum&quot;: null\r\n}\r\n```\r\n\r\nTo a field\r\n\r\n```\r\nprivate myEnum enum;\r\n```\r\n\r\nand `myEnum` looks as follows with no null value defined:\r\n\r\n```\r\npublic enum myEnum {\r\n   foo(&quot;foo&quot;),\r\n   bar(&quot;bar&quot;)\r\n  // ...\r\n}\r\n\r\n```\r\n\r\nDoes Jackson offer a native way to prevent null from being recognized as a valid value for this enum, or does this validation need to be managed in code? ","title":"Jackson Prevent Null Deserialization of Enum","body":"<p>I'm trying to understand how Jackson JSON deserialization understand null values. If I have a JSON that maps a single enum:</p>\n<pre><code>{\n    &quot;myEnum&quot;: null\n}\n</code></pre>\n<p>To a field</p>\n<pre><code>private myEnum enum;\n</code></pre>\n<p>and <code>myEnum</code> looks as follows with no null value defined:</p>\n<pre><code>public enum myEnum {\n   foo(&quot;foo&quot;),\n   bar(&quot;bar&quot;)\n  // ...\n}\n\n</code></pre>\n<p>Does Jackson offer a native way to prevent null from being recognized as a valid value for this enum, or does this validation need to be managed in code?</p>\n"},{"tags":["java","spring","solr","spring-data"],"comments":[{"owner":{"account_id":4469374,"reputation":8528,"user_id":3636071,"accept_rate":100,"display_name":"Abhijit Bashetti"},"score":0,"creation_date":1686836756,"post_id":76482759,"comment_id":134856573,"body_markdown":"you may need to change the pojo for the accessdate field with import java.util.Date;","body":"you may need to change the pojo for the accessdate field with import java.util.Date;"},{"owner":{"account_id":1288376,"reputation":55,"user_id":1240976,"display_name":"robhyx"},"score":0,"creation_date":1686836866,"post_id":76482759,"comment_id":134856603,"body_markdown":"That&#39;s the thing, I don&#39;t want it as a date, especially a java.util.Date. Keeping it as the string value Solr is providing is all I need, and I can do all the necessary comparisons that way.","body":"That&#39;s the thing, I don&#39;t want it as a date, especially a java.util.Date. Keeping it as the string value Solr is providing is all I need, and I can do all the necessary comparisons that way."},{"owner":{"account_id":4469374,"reputation":8528,"user_id":3636071,"accept_rate":100,"display_name":"Abhijit Bashetti"},"score":0,"creation_date":1686836919,"post_id":76482759,"comment_id":134856618,"body_markdown":"then you need change the field type in solr as well as string fieldType?","body":"then you need change the field type in solr as well as string fieldType?"},{"owner":{"account_id":1288376,"reputation":55,"user_id":1240976,"display_name":"robhyx"},"score":0,"creation_date":1686838995,"post_id":76482759,"comment_id":134856851,"body_markdown":"I don&#39;t think I can do that without breaking other things consuming the service. It&#39;s looking more and more like I&#39;m going to have to parse the Java date string, then convert it back to the UTC value, which is proving to be a pain in and of itself. I was just hoping there&#39;s some Spring configuration I could specify to make it return the string value from Solr. Nowhere am I asking for a date in the Java code.","body":"I don&#39;t think I can do that without breaking other things consuming the service. It&#39;s looking more and more like I&#39;m going to have to parse the Java date string, then convert it back to the UTC value, which is proving to be a pain in and of itself. I was just hoping there&#39;s some Spring configuration I could specify to make it return the string value from Solr. Nowhere am I asking for a date in the Java code."}],"owner":{"account_id":1288376,"reputation":55,"user_id":1240976,"display_name":"robhyx"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686834101,"creation_date":1686834101,"question_id":76482759,"body_markdown":"I have a simple Java client that talks to a Solr endpoint. A query is executed and the fields all map to fields within my POJO. However, one of the Solr fields (config below) is seemingly being converted to a java.util.Date then a String before it makes it to my POJO. Is this behavior expected, and how can I keep everything as the literal String value being returned from Solr, or am I going to need to do some clunky conversions back to a UTC datetime string? \r\n\r\nSolr is old, it’s 4.4.0, but I have no control over that and minimal control over any configurations. Spring-data-solr is 2.0.5.RELEASE. \r\n\r\nMy client:\r\n```\r\nprivate Cursor&lt;SolrMetricRecord&gt; querySolr(Query query) {\r\n\t\tCursor&lt;SolrMetricRecord&gt; cur = null;\r\n\t\ttry {\r\n\t\t\tcur = solrTemplate.queryForCursor(query, SolrMetricRecord.class);\r\n\t\t} catch (Exception e) {\r\n\t\t\tlogger.error(&quot;Exception thrown querying Solr&quot;,e);\r\n\t\t}\r\n\t\treturn cur;\r\n\t}\r\n\r\n@Override\r\n\tpublic List&lt;SolrMetricRecord&gt; getSolrMetricsRecordsStartingAtAccessDate(String startingAccessDate) {\r\n\t\t\r\n\t\tif (startingAccessDate==null)\r\n\t\t\tthrow new IllegalArgumentException(&quot;Starting accessDate must be specified.&quot;); \r\n\t\t\r\n\t\tQuery query = new SimpleQuery();\r\n\t\tquery.addCriteria(new Criteria(SOLR_FIELD_NAME_ACCESS_DATE).greaterThan(startingAccessDate));\r\n\t\tquery.addSort(new Sort(SOLR_FIELD_NAME_ACCESS_DATE));\r\n\t\tquery.setRows(1000);\r\n\t\t\r\n\t\tCursor&lt;SolrMetricRecord&gt; cur = querySolr(query);\r\n\r\n\t\treturn populateListFromCursor(cur);\r\n\t}\r\n\r\nprivate List&lt;SolrMetricRecord&gt; populateListFromCursor(Cursor&lt;SolrMetricRecord&gt; cur) {\r\n\t\tif (cur==null) {\r\n\t\t\tlogger.info(&quot;Null cursor returned from Solr query&quot;);\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (cur.isClosed())\r\n\t\t\tlogger.info(&quot;Cursor is closed... Call open()?&quot;);\r\n\t\t\r\n\t\tList&lt;SolrMetricRecord&gt; list = new ArrayList&lt;SolrMetricRecord&gt;();\r\n\t\t\r\n\t\ttry {\r\n\t\t\twhile (cur.hasNext()) {\r\n\t\t\t\tlist.add(cur.next());\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\t// This makes no sense...\r\n\t\t\tlogger.debug(&quot;Exception thrown calling hasNext()&quot;,e);\r\n\t\t}\r\n\t\t\r\n\t\treturn list;\r\n\t}\r\n```\r\nMy POJO:\r\n```\r\n@SolrDocument(solrCoreName = &quot;metrics&quot;)\r\npublic class SolrMetricRecord {\r\n\r\n\t@Id\r\n\t@Indexed(name = &quot;id&quot;, type = &quot;String&quot;)\r\n\tprivate String id;\r\n\t\r\n\t@Field(&quot;accessDate&quot;)\r\n\tprivate String accessDate;\r\n\t\r\n// Other fields\r\n\r\n```\r\nThe Solr field:\r\n```\r\n&lt;field name=&quot;accessDate&quot; type=&quot;datetime&quot; indexed=&quot;true&quot; stored=&quot;true&quot; multiValued=&quot;false&quot; /&gt;\r\n...\r\n&lt;fieldtype name=&quot;datetime&quot; class=&quot;solr.DateField&quot; sortMissingLast=&quot;true&quot; omitNorms=&quot;true&quot;/&gt;\r\n```\r\n\r\nWhat’s in Solr for accessDate:\r\n\r\n2023-06-06T17:52:17.139Z\r\n\r\nWhat I get back when I call the getter in Java:\r\n\r\nTue Jun 06 13:52:17 EDT 2023\r\n","title":"Solr UTC Datetime Retain Format in Spring Data","body":"<p>I have a simple Java client that talks to a Solr endpoint. A query is executed and the fields all map to fields within my POJO. However, one of the Solr fields (config below) is seemingly being converted to a java.util.Date then a String before it makes it to my POJO. Is this behavior expected, and how can I keep everything as the literal String value being returned from Solr, or am I going to need to do some clunky conversions back to a UTC datetime string?</p>\n<p>Solr is old, it’s 4.4.0, but I have no control over that and minimal control over any configurations. Spring-data-solr is 2.0.5.RELEASE.</p>\n<p>My client:</p>\n<pre><code>private Cursor&lt;SolrMetricRecord&gt; querySolr(Query query) {\n        Cursor&lt;SolrMetricRecord&gt; cur = null;\n        try {\n            cur = solrTemplate.queryForCursor(query, SolrMetricRecord.class);\n        } catch (Exception e) {\n            logger.error(&quot;Exception thrown querying Solr&quot;,e);\n        }\n        return cur;\n    }\n\n@Override\n    public List&lt;SolrMetricRecord&gt; getSolrMetricsRecordsStartingAtAccessDate(String startingAccessDate) {\n        \n        if (startingAccessDate==null)\n            throw new IllegalArgumentException(&quot;Starting accessDate must be specified.&quot;); \n        \n        Query query = new SimpleQuery();\n        query.addCriteria(new Criteria(SOLR_FIELD_NAME_ACCESS_DATE).greaterThan(startingAccessDate));\n        query.addSort(new Sort(SOLR_FIELD_NAME_ACCESS_DATE));\n        query.setRows(1000);\n        \n        Cursor&lt;SolrMetricRecord&gt; cur = querySolr(query);\n\n        return populateListFromCursor(cur);\n    }\n\nprivate List&lt;SolrMetricRecord&gt; populateListFromCursor(Cursor&lt;SolrMetricRecord&gt; cur) {\n        if (cur==null) {\n            logger.info(&quot;Null cursor returned from Solr query&quot;);\n            return null;\n        }\n\n        if (cur.isClosed())\n            logger.info(&quot;Cursor is closed... Call open()?&quot;);\n        \n        List&lt;SolrMetricRecord&gt; list = new ArrayList&lt;SolrMetricRecord&gt;();\n        \n        try {\n            while (cur.hasNext()) {\n                list.add(cur.next());\n            }\n        } catch (Exception e) {\n            // This makes no sense...\n            logger.debug(&quot;Exception thrown calling hasNext()&quot;,e);\n        }\n        \n        return list;\n    }\n</code></pre>\n<p>My POJO:</p>\n<pre><code>@SolrDocument(solrCoreName = &quot;metrics&quot;)\npublic class SolrMetricRecord {\n\n    @Id\n    @Indexed(name = &quot;id&quot;, type = &quot;String&quot;)\n    private String id;\n    \n    @Field(&quot;accessDate&quot;)\n    private String accessDate;\n    \n// Other fields\n\n</code></pre>\n<p>The Solr field:</p>\n<pre><code>&lt;field name=&quot;accessDate&quot; type=&quot;datetime&quot; indexed=&quot;true&quot; stored=&quot;true&quot; multiValued=&quot;false&quot; /&gt;\n...\n&lt;fieldtype name=&quot;datetime&quot; class=&quot;solr.DateField&quot; sortMissingLast=&quot;true&quot; omitNorms=&quot;true&quot;/&gt;\n</code></pre>\n<p>What’s in Solr for accessDate:</p>\n<p>2023-06-06T17:52:17.139Z</p>\n<p>What I get back when I call the getter in Java:</p>\n<p>Tue Jun 06 13:52:17 EDT 2023</p>\n"},{"tags":["java","itext","accessibility","itext7","screen-readers"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1686892077,"post_id":76482713,"comment_id":134863315,"body_markdown":"Can you share an example PDF generated by your code for analysis? Possibly all material added in such an event handler by default is tagged as Artifact...","body":"Can you share an example PDF generated by your code for analysis? Possibly all material added in such an event handler by default is tagged as Artifact..."}],"owner":{"account_id":28827560,"reputation":1,"user_id":22078642,"display_name":"Nee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686833716,"creation_date":1686833716,"question_id":76482713,"body_markdown":"i recently started working with iText and have the requirement that the pdf must comply with a PDF/UA standard in order to ensure accessibility. With the setTagged method and a few other configurations, for example an alternative text for my graphic, most of the work was already done. Unfortunately, the screenreader does not read my footer.\r\n\r\nthis is what my accessibility configurations look like:\r\n\r\n```\r\npdf.setTagged();\r\n        pdf.getCatalog().setLang(new PdfString(&quot;de&quot;));\r\n        pdf.getCatalog().setViewerPreferences(new PdfViewerPreferences().setDisplayDocTitle(true));\r\n        PdfDocumentInfo info = pdf.getDocumentInfo();\r\n        info.setTitle(&quot;pdfTitel&quot;);\r\n```\r\n\r\nthis is how i created the footer:\r\n\r\n```\r\nprivate static class TableFooterEventHandler implements IEventHandler {\r\n        private final Table table;\r\n\r\n        public TableFooterEventHandler(Table table) {\r\n            this.table = table;\r\n        }\r\n\r\n        @Override\r\n        public void handleEvent(Event currentEvent) {\r\n            PdfDocumentEvent docEvent = (PdfDocumentEvent) currentEvent;\r\n            PdfDocument pdf = docEvent.getDocument();\r\n            PdfPage page = docEvent.getPage();\r\n            PdfCanvas canvas = new PdfCanvas(page.newContentStreamBefore(), page.getResources(), pdf);\r\n\r\n            Canvas canvas1 = null;\r\n            try {\r\n                canvas1 = new Canvas(canvas, new Rectangle(68, 30, page.getPageSize().getWidth() - 105, 42)).add(table);\r\n            } finally {\r\n                if (canvas1 != null) {\r\n                    canvas1.close();\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nthis is how i actually add it:\r\n\r\n```\r\npdf.addEventHandler(PdfDocumentEvent.END_PAGE, new TableFooterEventHandler(footerTable));\r\n```\r\nafter that i close the whole document and return the outputstream like that:\r\n\r\n```\r\n document.close();\r\n\r\n return os;\r\n```\r\nWhen debugging, I noticed that the event handler seems to be called only after the document has been closed. Nevertheless, the footer appears on the pdf, but as I said, it is not read out by the screenreader. What could be the reason for this? \r\nI would be grateful for any help.","title":"PDF/UA with itext7 EventHandler is not read out loud","body":"<p>i recently started working with iText and have the requirement that the pdf must comply with a PDF/UA standard in order to ensure accessibility. With the setTagged method and a few other configurations, for example an alternative text for my graphic, most of the work was already done. Unfortunately, the screenreader does not read my footer.</p>\n<p>this is what my accessibility configurations look like:</p>\n<pre><code>pdf.setTagged();\n        pdf.getCatalog().setLang(new PdfString(&quot;de&quot;));\n        pdf.getCatalog().setViewerPreferences(new PdfViewerPreferences().setDisplayDocTitle(true));\n        PdfDocumentInfo info = pdf.getDocumentInfo();\n        info.setTitle(&quot;pdfTitel&quot;);\n</code></pre>\n<p>this is how i created the footer:</p>\n<pre><code>private static class TableFooterEventHandler implements IEventHandler {\n        private final Table table;\n\n        public TableFooterEventHandler(Table table) {\n            this.table = table;\n        }\n\n        @Override\n        public void handleEvent(Event currentEvent) {\n            PdfDocumentEvent docEvent = (PdfDocumentEvent) currentEvent;\n            PdfDocument pdf = docEvent.getDocument();\n            PdfPage page = docEvent.getPage();\n            PdfCanvas canvas = new PdfCanvas(page.newContentStreamBefore(), page.getResources(), pdf);\n\n            Canvas canvas1 = null;\n            try {\n                canvas1 = new Canvas(canvas, new Rectangle(68, 30, page.getPageSize().getWidth() - 105, 42)).add(table);\n            } finally {\n                if (canvas1 != null) {\n                    canvas1.close();\n                }\n            }\n        }\n    }\n</code></pre>\n<p>this is how i actually add it:</p>\n<pre><code>pdf.addEventHandler(PdfDocumentEvent.END_PAGE, new TableFooterEventHandler(footerTable));\n</code></pre>\n<p>after that i close the whole document and return the outputstream like that:</p>\n<pre><code> document.close();\n\n return os;\n</code></pre>\n<p>When debugging, I noticed that the event handler seems to be called only after the document has been closed. Nevertheless, the footer appears on the pdf, but as I said, it is not read out by the screenreader. What could be the reason for this?\nI would be grateful for any help.</p>\n"},{"tags":["java","spring","spring-mvc","spring-data"],"comments":[{"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"score":3,"creation_date":1460388135,"post_id":36552396,"comment_id":60706112,"body_markdown":"Why not `@SortDefault(sort = &quot;id&quot;, direction = Sort.Direction.DESC)`?","body":"Why not <code>@SortDefault(sort = &quot;id&quot;, direction = Sort.Direction.DESC)</code>?"},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":0,"creation_date":1460388250,"post_id":36552396,"comment_id":60706195,"body_markdown":"If you want to continue with this approach then you need to look at wrapping the HttpServletRequest in an HttpServletRequestWrapper: this will allow you to modify the request parameters as required. See here for an example: http://stackoverflow.com/questions/16848180/wrapping-request-parameters-using-httpservletrequestwrapper","body":"If you want to continue with this approach then you need to look at wrapping the HttpServletRequest in an HttpServletRequestWrapper: this will allow you to modify the request parameters as required. See here for an example: <a href=\"http://stackoverflow.com/questions/16848180/wrapping-request-parameters-using-httpservletrequestwrapper\" title=\"wrapping request parameters using httpservletrequestwrapper\">stackoverflow.com/questions/16848180/&hellip;</a>"},{"owner":{"account_id":2470850,"reputation":1666,"user_id":2152752,"accept_rate":43,"display_name":"oscar"},"score":1,"creation_date":1460388379,"post_id":36552396,"comment_id":60706304,"body_markdown":"Because @DefaultSort is only when there is not order. I want to add. If the view table I select the &quot;name&quot; field, I want to sort first by &quot;name&quot; and then for &quot;id&quot;","body":"Because @DefaultSort is only when there is not order. I want to add. If the view table I select the &quot;name&quot; field, I want to sort first by &quot;name&quot; and then for &quot;id&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1731429,"reputation":620,"user_id":1584965,"display_name":"ScottM"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1522683836,"creation_date":1522683422,"answer_id":49614155,"question_id":36552396,"body_markdown":"Instead of adding a separate @SortDefault, you can just add the sorting in the @PageableDefault definition.\r\n\r\n    @PageableDefault(sort = {&quot;name&quot;, &quot;id&quot;}, direction = Sort.Direction.DESC, value = 5) final Pageable pageable","title":"Append default order by id to Pageable with Spring Data","body":"<p>Instead of adding a separate @SortDefault, you can just add the sorting in the @PageableDefault definition.</p>\n\n<pre><code>@PageableDefault(sort = {\"name\", \"id\"}, direction = Sort.Direction.DESC, value = 5) final Pageable pageable\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18554343,"reputation":49,"user_id":13519843,"display_name":"Sriparna Ghosh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589223449,"creation_date":1589223449,"answer_id":61737240,"question_id":36552396,"body_markdown":"Add Sort and direction with @PageableDefault:\r\n\r\n     public String printMensagges(@PageableDefault(size = 40, sort = &quot;id&quot;, direction = Direction.DESC) Pageable pageable, Model model)","title":"Append default order by id to Pageable with Spring Data","body":"<p>Add Sort and direction with @PageableDefault:</p>\n\n<pre><code> public String printMensagges(@PageableDefault(size = 40, sort = \"id\", direction = Direction.DESC) Pageable pageable, Model model)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3657594,"reputation":357,"user_id":3048159,"display_name":"zbender"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603883285,"creation_date":1603883285,"answer_id":64571574,"question_id":36552396,"body_markdown":"This is my solution (with customization field name for additional sort).\r\n\r\nAnnotation for parameter of pageable (for customize field name):\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.PARAMETER)\r\n    public @interface AdditionalSort {\r\n        String value() default &quot;id&quot;;\r\n    }\r\n\r\nConfiguration (here main answer for question):\r\n\r\n    @Configuration\r\n    public class WebConfiguration implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) {\r\n            PageableHandlerMethodArgumentResolver pageResolver =\r\n                    new PageableHandlerMethodArgumentResolver(new AdditionalSortHandlerMethodArgumentResolver());\r\n            pageResolver.setFallbackPageable(PageRequest.of(0, Integer.MAX_VALUE));\r\n            argumentResolvers.add(pageResolver);\r\n        }\r\n    \r\n    \r\n        private static class AdditionalSortHandlerMethodArgumentResolver extends SortHandlerMethodArgumentResolver {\r\n    \r\n            private static final String DEFAULT_ADDITIONAL_SORT_FIELD = &quot;id&quot;;\r\n    \r\n            @Override\r\n            public Sort resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer,\r\n                                        NativeWebRequest webRequest, WebDataBinderFactory binderFactory) {\r\n                Sort sort = super.resolveArgument(parameter, mavContainer, webRequest, binderFactory);\r\n                String additionalSortField = parameter.hasParameterAnnotation(AdditionalSort.class) ?\r\n                        parameter.getParameterAnnotation(AdditionalSort.class).value() : DEFAULT_ADDITIONAL_SORT_FIELD;\r\n                return sort.and(Sort.by(additionalSortField));\r\n            }\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nController:\r\n\r\n    @GetMapping(value = &quot;/byOrganization/{organizationId}&quot;, produces = APPLICATION_JSON_UTF8_VALUE)\r\n    public ResponseEntity&lt;JsonItem&lt;PageDto&lt;EmployeeDto&gt;&gt;&gt; getByOrganization(@PathVariable\r\n                                                                                    String organizationId,\r\n                                                                            EmployeeFilter filter,\r\n                                                                            @SortDefault(sort = CREATION_DATE, direction = DESC)\r\n                                                                            @AdditionalSort(&quot;personId&quot;)\r\n                                                                                    Pageable pageable) {\r\n        return ResponseEntity.ok(JsonItem.withData(employeeService.findEmployees(organizationId, filter, pageable)));\r\n    }","title":"Append default order by id to Pageable with Spring Data","body":"<p>This is my solution (with customization field name for additional sort).</p>\n<p>Annotation for parameter of pageable (for customize field name):</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.PARAMETER)\npublic @interface AdditionalSort {\n    String value() default &quot;id&quot;;\n}\n</code></pre>\n<p>Configuration (here main answer for question):</p>\n<pre><code>@Configuration\npublic class WebConfiguration implements WebMvcConfigurer {\n\n    @Override\n    public void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers) {\n        PageableHandlerMethodArgumentResolver pageResolver =\n                new PageableHandlerMethodArgumentResolver(new AdditionalSortHandlerMethodArgumentResolver());\n        pageResolver.setFallbackPageable(PageRequest.of(0, Integer.MAX_VALUE));\n        argumentResolvers.add(pageResolver);\n    }\n\n\n    private static class AdditionalSortHandlerMethodArgumentResolver extends SortHandlerMethodArgumentResolver {\n\n        private static final String DEFAULT_ADDITIONAL_SORT_FIELD = &quot;id&quot;;\n\n        @Override\n        public Sort resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer,\n                                    NativeWebRequest webRequest, WebDataBinderFactory binderFactory) {\n            Sort sort = super.resolveArgument(parameter, mavContainer, webRequest, binderFactory);\n            String additionalSortField = parameter.hasParameterAnnotation(AdditionalSort.class) ?\n                    parameter.getParameterAnnotation(AdditionalSort.class).value() : DEFAULT_ADDITIONAL_SORT_FIELD;\n            return sort.and(Sort.by(additionalSortField));\n        }\n\n    }\n\n}\n</code></pre>\n<p>Controller:</p>\n<pre><code>@GetMapping(value = &quot;/byOrganization/{organizationId}&quot;, produces = APPLICATION_JSON_UTF8_VALUE)\npublic ResponseEntity&lt;JsonItem&lt;PageDto&lt;EmployeeDto&gt;&gt;&gt; getByOrganization(@PathVariable\n                                                                                String organizationId,\n                                                                        EmployeeFilter filter,\n                                                                        @SortDefault(sort = CREATION_DATE, direction = DESC)\n                                                                        @AdditionalSort(&quot;personId&quot;)\n                                                                                Pageable pageable) {\n    return ResponseEntity.ok(JsonItem.withData(employeeService.findEmployees(organizationId, filter, pageable)));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4387361,"reputation":347,"user_id":3577053,"display_name":"user07"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686833705,"creation_date":1686833705,"answer_id":76482711,"question_id":36552396,"body_markdown":"Spring lets to provide multiple sorting rules, each with a different sorting direction using a dedicated annotation `@SortDefault.SortDefaults`.\r\nNote, that though `@PageableDefault` annotation allows for multiple sorting columns, it doesn&#39;t allow to apply different sorting directions, but only the single value that will be applied for all columns.\r\n\r\n      @PageableDefault(size = 30)\r\n      @SortDefault.SortDefaults({\r\n          @SortDefault(\r\n              sort = &quot;createdAt&quot;, // column name of underlying DB table\r\n              direction = Sort.Direction.DESC),\r\n          @SortDefault(\r\n              sort = &quot;updatedAt&quot;, // column name of underlying DB table\r\n              direction = Sort.Direction.ASC)\r\n      }) Pageable pageable\r\n","title":"Append default order by id to Pageable with Spring Data","body":"<p>Spring lets to provide multiple sorting rules, each with a different sorting direction using a dedicated annotation <code>@SortDefault.SortDefaults</code>.\nNote, that though <code>@PageableDefault</code> annotation allows for multiple sorting columns, it doesn't allow to apply different sorting directions, but only the single value that will be applied for all columns.</p>\n<pre><code>  @PageableDefault(size = 30)\n  @SortDefault.SortDefaults({\n      @SortDefault(\n          sort = &quot;createdAt&quot;, // column name of underlying DB table\n          direction = Sort.Direction.DESC),\n      @SortDefault(\n          sort = &quot;updatedAt&quot;, // column name of underlying DB table\n          direction = Sort.Direction.ASC)\n  }) Pageable pageable\n</code></pre>\n"}],"owner":{"account_id":2470850,"reputation":1666,"user_id":2152752,"accept_rate":43,"display_name":"oscar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33141,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":4,"score":9,"last_activity_date":1686833705,"creation_date":1460386995,"question_id":36552396,"body_markdown":"I&#39;m using spring Pageable data and objects. When sorting by a field that can have the same values in database, changing page retrieves erroneous results.\r\n\r\nI&#39;m trying to add default order by id with HandlerInterceptorAdapter as follows:\r\n\r\nMy Interceptor:\r\n\r\n    public class OrderByIdWebArgumentResolver extends HandlerInterceptorAdapter {\r\n    \r\n        @Override\r\n        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {\r\n    \r\n            HandlerMethod hm= (HandlerMethod) handler;\r\n            Method method = hm.getMethod();\r\n            OrderById orderById = method.getAnnotation(OrderById.class);\r\n            if (orderById != null) {\r\n                for (MethodParameter parametro : hm.getMethodParameters()) {\r\n                    if (parametro.getGenericParameterType().equals(Pageable.class)) {\r\n                        Map&lt;String, String[]&gt; parameters = request.getParameterMap();\r\n                        String[] sortById = new String[2];\r\n                        sortById[0] = &quot;id&quot;;\r\n                        sortById[0] = &quot;desc&quot;;\r\n                        parameters.put(&quot;sort&quot;, sortById);\r\n                    }\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            return true;\r\n        }\r\n    }\r\n\r\nMy Controller:\r\n\r\n    @OrderById\r\n    @RequestMapping(value = &quot;/print&quot;, method = RequestMethod.GET)\r\n    public String printMensagges(@ModelAttribute MensaggesOption messageSelector, final ModelMap model,\r\n           @SortDefault(sort = &quot;date&quot;, direction = Sort.Direction.DESC) @PageableDefault(value = 5) final Pageable pageable, final Principal principal) {\r\n    \r\n    \t//I need the pageable has order by id here or in a service method\r\n    \tList&lt;Message&gt; messages = messageService.findAll(pageable);\r\n    \r\n        return &quot;/index&quot;;\r\n    }\r\n\r\nI get this error:\r\n\r\n&gt; java.lang.IllegalStateException: JBWEB000096: No modifications are\r\n&gt; allowed to a locked ParameterMap\r\n\r\n\r\nIs there any way to add default order ever? Can you add on service methods that have a Pageable parameter?\r\n\r\n\r\n\r\n","title":"Append default order by id to Pageable with Spring Data","body":"<p>I'm using spring Pageable data and objects. When sorting by a field that can have the same values in database, changing page retrieves erroneous results.</p>\n\n<p>I'm trying to add default order by id with HandlerInterceptorAdapter as follows:</p>\n\n<p>My Interceptor:</p>\n\n<pre><code>public class OrderByIdWebArgumentResolver extends HandlerInterceptorAdapter {\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {\n\n        HandlerMethod hm= (HandlerMethod) handler;\n        Method method = hm.getMethod();\n        OrderById orderById = method.getAnnotation(OrderById.class);\n        if (orderById != null) {\n            for (MethodParameter parametro : hm.getMethodParameters()) {\n                if (parametro.getGenericParameterType().equals(Pageable.class)) {\n                    Map&lt;String, String[]&gt; parameters = request.getParameterMap();\n                    String[] sortById = new String[2];\n                    sortById[0] = \"id\";\n                    sortById[0] = \"desc\";\n                    parameters.put(\"sort\", sortById);\n                }\n\n            }\n\n        }\n\n        return true;\n    }\n}\n</code></pre>\n\n<p>My Controller:</p>\n\n<pre><code>@OrderById\n@RequestMapping(value = \"/print\", method = RequestMethod.GET)\npublic String printMensagges(@ModelAttribute MensaggesOption messageSelector, final ModelMap model,\n       @SortDefault(sort = \"date\", direction = Sort.Direction.DESC) @PageableDefault(value = 5) final Pageable pageable, final Principal principal) {\n\n    //I need the pageable has order by id here or in a service method\n    List&lt;Message&gt; messages = messageService.findAll(pageable);\n\n    return \"/index\";\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>java.lang.IllegalStateException: JBWEB000096: No modifications are\n  allowed to a locked ParameterMap</p>\n</blockquote>\n\n<p>Is there any way to add default order ever? Can you add on service methods that have a Pageable parameter?</p>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-gateway"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":1,"creation_date":1683573959,"post_id":76203712,"comment_id":134384581,"body_markdown":"Rename `TimingFilter` to `TimingGatewayFilterFactory` and configure uit using ` - Timing`","body":"Rename <code>TimingFilter</code> to <code>TimingGatewayFilterFactory</code> and configure uit using ` - Timing`"},{"owner":{"account_id":9371512,"reputation":1243,"user_id":8958651,"accept_rate":10,"display_name":"Jonio"},"score":0,"creation_date":1683629951,"post_id":76203712,"comment_id":134392710,"body_markdown":"Thank you but it solves just a portion of the problem, the print happened only once at the startup of application and not for each request that is linked to the filter...","body":"Thank you but it solves just a portion of the problem, the print happened only once at the startup of application and not for each request that is linked to the filter..."},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1683634321,"post_id":76203712,"comment_id":134393813,"body_markdown":"Apply only happens once. Only things after the return statement happen on each filter request","body":"Apply only happens once. Only things after the return statement happen on each filter request"},{"owner":{"account_id":9371512,"reputation":1243,"user_id":8958651,"accept_rate":10,"display_name":"Jonio"},"score":0,"creation_date":1683634789,"post_id":76203712,"comment_id":134393926,"body_markdown":"the problem is that now the filter is called only at application startup... If I try to call the request, the filter is not invoked","body":"the problem is that now the filter is called only at application startup... If I try to call the request, the filter is not invoked"},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1683640752,"post_id":76203712,"comment_id":134395386,"body_markdown":"The println only happens once as coded","body":"The println only happens once as coded"}],"answers":[{"tags":[],"owner":{"account_id":26746848,"reputation":226,"user_id":20346807,"display_name":"Joan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684242848,"creation_date":1684242848,"answer_id":76263447,"question_id":76203712,"body_markdown":"Try this:\r\n\r\n    @Service\r\n    public class BarFilter implements WebFilter {\r\n    \r\n        @Override\r\n        public Mono&lt;Void&gt; filter(\r\n                final ServerWebExchange serverWebExchange,\r\n                final WebFilterChain webFilterChain\r\n        ) {\r\n            System.out.println(&quot;Filter works&quot;);\r\n            return webFilterChain.filter(serverWebExchange);\r\n        }\r\n    \r\n    }","title":"Spring Api Gateway custom filter not works","body":"<p>Try this:</p>\n<pre><code>@Service\npublic class BarFilter implements WebFilter {\n\n    @Override\n    public Mono&lt;Void&gt; filter(\n            final ServerWebExchange serverWebExchange,\n            final WebFilterChain webFilterChain\n    ) {\n        System.out.println(&quot;Filter works&quot;);\n        return webFilterChain.filter(serverWebExchange);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6146466,"reputation":564,"user_id":4792285,"accept_rate":67,"display_name":"Miraj Hamid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686833272,"creation_date":1686833272,"answer_id":76482643,"question_id":76203712,"body_markdown":"Try\r\n\r\n```   \r\nserver:\r\n  port: 8080\r\n\r\neureka:\r\n  instance:\r\n    hostname: localhost\r\n\r\nspring:\r\n  application:\r\n    name: api-gateway\r\n  cloud:\r\n    gateway:\r\n      routes:\r\n        - id: identity-auth\r\n          uri: http://localhost:8081/\r\n          predicates:\r\n            - Path=/auth/**\r\n        - id: identity-time\r\n          uri: http://localhost:8081/\r\n          predicates:\r\n            - Path=/timing/**\r\n      default-filters:\r\n        - Timing\r\n```","title":"Spring Api Gateway custom filter not works","body":"<p>Try</p>\n<pre><code>server:\n  port: 8080\n\neureka:\n  instance:\n    hostname: localhost\n\nspring:\n  application:\n    name: api-gateway\n  cloud:\n    gateway:\n      routes:\n        - id: identity-auth\n          uri: http://localhost:8081/\n          predicates:\n            - Path=/auth/**\n        - id: identity-time\n          uri: http://localhost:8081/\n          predicates:\n            - Path=/timing/**\n      default-filters:\n        - Timing\n</code></pre>\n"}],"owner":{"account_id":9371512,"reputation":1243,"user_id":8958651,"accept_rate":10,"display_name":"Jonio"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":437,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1686833272,"creation_date":1683573303,"question_id":76203712,"body_markdown":"I&#39;m difficult to figure out with a problem in my api gateway service. I follow a lot of forum and documentatio to perform an easy implementation of a filter that is called via a specific predicates. In this step I just want to understand why the system.out in the filter class is not printed (that&#39;s mean that my yml not communicate correctly with the framerk and with the class of the filter I suppose).\r\n\r\nThis is the application.yml file:\r\n\r\n    server:\r\n      port: 8080\r\n    \r\n    eureka:\r\n      instance:\r\n        hostname: localhost\r\n    \r\n    spring:\r\n      application:\r\n        name: api-gateway\r\n      cloud:\r\n        gateway:\r\n          routes:\r\n            - id: identity-auth\r\n              uri: http://localhost:8081/\r\n              predicates:\r\n                - Path=/auth/**\r\n            - id: identity-time\r\n              uri: http://localhost:8081/\r\n              predicates:\r\n                - Path=/timing/**\r\n              filters:\r\n                - Timing\r\n    \r\n    \r\n    \r\n    debug: true\r\n\r\nThe class delegated to manage the TimingFilter:\r\n\r\n\r\n    @Component\r\n    public class TimingGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;TimingFilter.Config&gt;{\r\n    \r\n        @Autowired\r\n        TestService testService;\r\n    \r\n        public TimingFilter(){\r\n            super(Config.class);\r\n        }\r\n    \r\n        @Override\r\n        public GatewayFilter apply(Config config) {\r\n            System.out.println(&quot;--------------here----------- &quot;);\r\n            return (exchange, chain) -&gt; {\r\n                String originalPath = exchange.getRequest().getPath().toString();\r\n                String newPath = &quot;/timing/&quot; + testService.evaluateCurrentDate();\r\n                URI uri = UriComponentsBuilder.fromUri(exchange.getRequest().getURI()).path(newPath).build(true).toUri();\r\n                ServerHttpRequest request = exchange.getRequest().mutate().uri(uri).build();\r\n                return chain.filter(exchange.mutate().request(request).build());\r\n            };\r\n        }\r\n    \r\n        public static class Config {\r\n    \r\n        }\r\n    }\r\n\r\nWithout go into the question of redirect to the other microservice, in this step I want just to understand why after the GET REQUEST : \r\n\r\n&gt; http://localhost:8080/timing\r\n\r\nI do not see the sout content when I performe the request, the print happend only one time in application startup.\r\n\r\nAny suggestions? thanks","title":"Spring Api Gateway custom filter not works","body":"<p>I'm difficult to figure out with a problem in my api gateway service. I follow a lot of forum and documentatio to perform an easy implementation of a filter that is called via a specific predicates. In this step I just want to understand why the system.out in the filter class is not printed (that's mean that my yml not communicate correctly with the framerk and with the class of the filter I suppose).</p>\n<p>This is the application.yml file:</p>\n<pre><code>server:\n  port: 8080\n\neureka:\n  instance:\n    hostname: localhost\n\nspring:\n  application:\n    name: api-gateway\n  cloud:\n    gateway:\n      routes:\n        - id: identity-auth\n          uri: http://localhost:8081/\n          predicates:\n            - Path=/auth/**\n        - id: identity-time\n          uri: http://localhost:8081/\n          predicates:\n            - Path=/timing/**\n          filters:\n            - Timing\n\n\n\ndebug: true\n</code></pre>\n<p>The class delegated to manage the TimingFilter:</p>\n<pre><code>@Component\npublic class TimingGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;TimingFilter.Config&gt;{\n\n    @Autowired\n    TestService testService;\n\n    public TimingFilter(){\n        super(Config.class);\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        System.out.println(&quot;--------------here----------- &quot;);\n        return (exchange, chain) -&gt; {\n            String originalPath = exchange.getRequest().getPath().toString();\n            String newPath = &quot;/timing/&quot; + testService.evaluateCurrentDate();\n            URI uri = UriComponentsBuilder.fromUri(exchange.getRequest().getURI()).path(newPath).build(true).toUri();\n            ServerHttpRequest request = exchange.getRequest().mutate().uri(uri).build();\n            return chain.filter(exchange.mutate().request(request).build());\n        };\n    }\n\n    public static class Config {\n\n    }\n}\n</code></pre>\n<p>Without go into the question of redirect to the other microservice, in this step I want just to understand why after the GET REQUEST :</p>\n<blockquote>\n<p>http://localhost:8080/timing</p>\n</blockquote>\n<p>I do not see the sout content when I performe the request, the print happend only one time in application startup.</p>\n<p>Any suggestions? thanks</p>\n"},{"tags":["java","prometheus","promql","circuit-breaker","resilience4j"],"answers":[{"tags":[],"owner":{"account_id":27974006,"reputation":10316,"user_id":21363224,"display_name":"markalex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686833045,"creation_date":1686833045,"answer_id":76482611,"question_id":76482405,"body_markdown":"To count **mean** you need to divide total value of response time by number of responses. Since those behave like counters, you need to apply rate first.\r\n\r\nI believe something as easy as this might work for you:\r\n```\r\nirate(resilience4j_circuitbreaker_calls_seconds_sum [1m])\r\n / irate(resilience4j_circuitbreaker_calls_seconds_count [1m])\r\n```\r\nRemember to adjust range selectors to your suite your situation (at least two times scrape interval).","title":"PromQL to find the mean response time of a downstream service","body":"<p>To count <strong>mean</strong> you need to divide total value of response time by number of responses. Since those behave like counters, you need to apply rate first.</p>\n<p>I believe something as easy as this might work for you:</p>\n<pre><code>irate(resilience4j_circuitbreaker_calls_seconds_sum [1m])\n / irate(resilience4j_circuitbreaker_calls_seconds_count [1m])\n</code></pre>\n<p>Remember to adjust range selectors to your suite your situation (at least two times scrape interval).</p>\n"}],"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686833045,"creation_date":1686831593,"question_id":76482405,"body_markdown":"What would be the correct **PromQL** to find the mean latency of the downstream calls.\r\n\r\nWe are using the given promQL to find the p99 of the downstream service: `histogram_quantile(0.99, sum(rate(resilience4j_circuitbreaker_calls_seconds_bucket{name=&quot;circuitBreakerName&quot;}[1m])) by (le))`.\r\n\r\nThe prometheus metrics which are exposed by application are : `resilience4j_circuitbreaker_calls_seconds_count`, `resilience4j_circuitbreaker_calls_seconds_sum` and `resilience4j_circuitbreaker_calls_seconds_bucket`. \r\n\r\nHow to write the promQL to find the mean time using above metrics ?","title":"PromQL to find the mean response time of a downstream service","body":"<p>What would be the correct <strong>PromQL</strong> to find the mean latency of the downstream calls.</p>\n<p>We are using the given promQL to find the p99 of the downstream service: <code>histogram_quantile(0.99, sum(rate(resilience4j_circuitbreaker_calls_seconds_bucket{name=&quot;circuitBreakerName&quot;}[1m])) by (le))</code>.</p>\n<p>The prometheus metrics which are exposed by application are : <code>resilience4j_circuitbreaker_calls_seconds_count</code>, <code>resilience4j_circuitbreaker_calls_seconds_sum</code> and <code>resilience4j_circuitbreaker_calls_seconds_bucket</code>.</p>\n<p>How to write the promQL to find the mean time using above metrics ?</p>\n"},{"tags":["java","excel","apache-poi","excel-charts"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1686799513,"post_id":76478320,"comment_id":134849819,"body_markdown":"This question is too broad to answer. What one can do is getting the XML of the charts. See https://stackoverflow.com/questions/52324851/how-to-change-the-graphical-attributes-of-a-point-in-an-excel-sunburst-chart-thr/52464948#52464948 for an example using sunburst chart. That can be adopted to other charts of type `application/vnd.ms-office.chartex+xml`. Please ask a more concrete question. What data of what chart you want to get?","body":"This question is too broad to answer. What one can do is getting the XML of the charts. See <a href=\"https://stackoverflow.com/questions/52324851/how-to-change-the-graphical-attributes-of-a-point-in-an-excel-sunburst-chart-thr/52464948#52464948\" title=\"how to change the graphical attributes of a point in an excel sunburst chart thr\">stackoverflow.com/questions/52324851/&hellip;</a> for an example using sunburst chart. That can be adopted to other charts of type <code>application&#47;vnd.ms-office.chartex+xml</code>. Please ask a more concrete question. What data of what chart you want to get?"},{"owner":{"account_id":6346949,"reputation":77,"user_id":4927182,"accept_rate":71,"display_name":"wwood_cc"},"score":0,"creation_date":1686828548,"post_id":76478320,"comment_id":134854591,"body_markdown":"Thanks, @AxelRichter. I have updated my question. The link you posted seems to be something that I can dig into deeper.","body":"Thanks, @AxelRichter. I have updated my question. The link you posted seems to be something that I can dig into deeper."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686832844,"creation_date":1686831824,"answer_id":76482437,"question_id":76478320,"body_markdown":"All your listed charts seems to be of extended chart type which is not available in versions of Office Open XML up to year 2007. But those old versions of Office Open XML is what Apache POI is developed on.\r\n\r\nThe  extended chart is not a `XSSFChart`. `XSSFChart` is of type `application/vnd.openxmlformats-officedocument.drawingml.chart+xml` while extended chart is of type `application/vnd.ms-office.chartex+xml`.\r\n\r\nBut we can using at least parts of apache poi and have to program the `XSSFChartEx` class our own instead the `XSSFChart` then. Unfortunately also a class `XSSFChartExRelation` is needed because such a relation class of course also not exists already.\r\n\r\nIn `XSSFChartEx` class we can have getters for needed parts as  title, series, legend, axes then. Simplest will be to get the XML of the parts as `XmlObject`.\r\n\r\nComplete example:\r\n\r\n    import java.io.IOException;\r\n    import java.io.OutputStream;\r\n    import java.io.FileInputStream;\r\n    \r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    import org.apache.poi.xssf.usermodel.XSSFSheet;\r\n    import org.apache.poi.xssf.usermodel.XSSFDrawing;\r\n    \r\n    import org.apache.poi.ooxml.POIXMLDocumentPart;\r\n    import org.apache.poi.ooxml.POIXMLRelation;\r\n    import org.apache.poi.openxml4j.opc.PackagePart;\r\n    \r\n    import org.apache.xmlbeans.XmlObject;\r\n    \r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    \r\n    public class GetChartExXML {\r\n                \r\n     private static List&lt;XSSFChartEx&gt; getChartExList(XSSFSheet sheet) {\r\n      List&lt;XSSFChartEx&gt; resultList = new ArrayList&lt;XSSFChartEx&gt;();\r\n      try {\r\n       XSSFDrawing drawing = sheet.getDrawingPatriarch();\r\n       if (drawing != null) {\r\n        for (POIXMLDocumentPart dpart : drawing.getRelations()) {\r\n         PackagePart ppart = dpart.getPackagePart();\r\n         if (&quot;application/vnd.ms-office.chartex+xml&quot;.equals(ppart.getContentType())) {\r\n          XSSFChartEx xssfChartEx = new XSSFChartEx(ppart);\r\n          String rId = drawing.getRelationId(dpart);\r\n          drawing.addRelation(\r\n           rId, \r\n           new XSSFChartExRelation(\r\n            &quot;application/vnd.ms-office.chartex+xml&quot;,\r\n            &quot;http://schemas.microsoft.com/office/2014/relationships/chartEx&quot;,\r\n            &quot;/xl/charts/chartEx#.xml&quot;),\r\n           xssfChartEx\r\n          );\r\n          resultList.add(xssfChartEx);\r\n         }\r\n        }\r\n       }\r\n      } catch (Exception e) {\r\n       e.printStackTrace();\r\n      }\r\n      return resultList;\r\n     } \r\n    \r\n     public static void main(String[] args) {\r\n      try {\r\n       XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ChartExample.xlsx&quot;));\r\n       XSSFSheet sheet = workbook.getSheetAt(0);\r\n       System.out.println(&quot;Loaded sheet is &quot; + sheet.getSheetName());\r\n       List&lt;XSSFChartEx&gt; chartExList = getChartExList(sheet);\r\n       System.out.println(chartExList);\r\n       for(XSSFChartEx xssfChartEx : chartExList) {\r\n        //System.out.println(xssfChartEx.getChartExXmlObject());\r\n        System.out.println(xssfChartEx.getTitle());\r\n        System.out.println(xssfChartEx.getSeriesCount());\r\n        System.out.println(xssfChartEx.getSeries(0));\r\n        System.out.println(xssfChartEx.getLegend());\r\n        System.out.println(xssfChartEx.getAxesCount());\r\n        System.out.println(xssfChartEx.getAxis(0));\r\n       }\r\n      } catch (Exception e) {\r\n       e.printStackTrace();\r\n      }\r\n     }\r\n    \r\n     private static class XSSFChartEx extends POIXMLDocumentPart {\r\n    \r\n      private XmlObject chartExXmlObject;\r\n    \r\n      private XSSFChartEx(PackagePart part) throws Exception {\r\n       super(part);\r\n       chartExXmlObject = XmlObject.Factory.parse(part.getInputStream());\r\n      }\r\n    \r\n      private XmlObject getChartExXmlObject() {\r\n       return chartExXmlObject;\r\n      }\r\n    \r\n      private int getSeriesCount() {\r\n       XmlObject[] result = chartExXmlObject.selectPath(\r\n        &quot;declare namespace cx=&#39;http://schemas.microsoft.com/office/drawing/2014/chartex&#39; &quot; +\r\n        &quot;.//cx:chart/cx:plotArea/cx:plotAreaRegion/cx:series&quot;\r\n       );\r\n       return result.length;\r\n      }\r\n      \r\n      private XmlObject getSeries(int number) {\r\n       XmlObject[] result = chartExXmlObject.selectPath(\r\n        &quot;declare namespace cx=&#39;http://schemas.microsoft.com/office/drawing/2014/chartex&#39; &quot; +\r\n        &quot;.//cx:chart/cx:plotArea/cx:plotAreaRegion/cx:series&quot;\r\n       );\r\n       if (result.length &gt; number) return result[number];\r\n       return null;\r\n      }\r\n    \r\n      private int getAxesCount() {\r\n       XmlObject[] result = chartExXmlObject.selectPath(\r\n        &quot;declare namespace cx=&#39;http://schemas.microsoft.com/office/drawing/2014/chartex&#39; &quot; +\r\n        &quot;.//cx:chart/cx:plotArea/cx:axis&quot;\r\n       );\r\n       return result.length;\r\n      }\r\n      \r\n      private XmlObject getAxis(int number) {\r\n       XmlObject[] result = chartExXmlObject.selectPath(\r\n        &quot;declare namespace cx=&#39;http://schemas.microsoft.com/office/drawing/2014/chartex&#39; &quot; +\r\n        &quot;.//cx:chart/cx:plotArea/cx:axis&quot;\r\n       );\r\n       if (result.length &gt; number) return result[number];\r\n       return null;\r\n      }\r\n    \r\n      private XmlObject getTitle() {\r\n       XmlObject[] result = chartExXmlObject.selectPath(\r\n        &quot;declare namespace cx=&#39;http://schemas.microsoft.com/office/drawing/2014/chartex&#39; &quot; +\r\n        &quot;.//cx:chart/cx:title&quot;\r\n       );\r\n       if (result.length &gt; 0) return result[0];\r\n       return null;\r\n      }\r\n      \r\n      private XmlObject getLegend() {\r\n       XmlObject[] result = chartExXmlObject.selectPath(\r\n        &quot;declare namespace cx=&#39;http://schemas.microsoft.com/office/drawing/2014/chartex&#39; &quot; +\r\n        &quot;.//cx:chart/cx:legend&quot;\r\n       );\r\n       if (result.length &gt; 0) return result[0];\r\n       return null;\r\n      }\r\n    \r\n      @Override\r\n      protected void commit() throws IOException {\r\n       PackagePart part = getPackagePart();\r\n       OutputStream out = part.getOutputStream();\r\n       chartExXmlObject.save(out);\r\n       out.close();\r\n      }\r\n     }\r\n    \r\n     private static class XSSFChartExRelation extends POIXMLRelation {\r\n      private XSSFChartExRelation(String type, String rel, String defaultName) {\r\n       super(type, rel, defaultName);\r\n      }\r\n     }\r\n    }\r\n\r\n\r\nThe real challenge is to find out the meaning of the found XML. Fortunately most of the XML element names are  self-explanatory. So one should be able to find out where is the title text for example. But to get the meaning of series settings, legend settings and axes settings can be challenging.\r\n","title":"How to extract advanced chart info from Excel using Apache POI?","body":"<p>All your listed charts seems to be of extended chart type which is not available in versions of Office Open XML up to year 2007. But those old versions of Office Open XML is what Apache POI is developed on.</p>\n<p>The  extended chart is not a <code>XSSFChart</code>. <code>XSSFChart</code> is of type <code>application/vnd.openxmlformats-officedocument.drawingml.chart+xml</code> while extended chart is of type <code>application/vnd.ms-office.chartex+xml</code>.</p>\n<p>But we can using at least parts of apache poi and have to program the <code>XSSFChartEx</code> class our own instead the <code>XSSFChart</code> then. Unfortunately also a class <code>XSSFChartExRelation</code> is needed because such a relation class of course also not exists already.</p>\n<p>In <code>XSSFChartEx</code> class we can have getters for needed parts as  title, series, legend, axes then. Simplest will be to get the XML of the parts as <code>XmlObject</code>.</p>\n<p>Complete example:</p>\n<pre><code>import java.io.IOException;\nimport java.io.OutputStream;\nimport java.io.FileInputStream;\n\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\n\nimport org.apache.poi.ooxml.POIXMLDocumentPart;\nimport org.apache.poi.ooxml.POIXMLRelation;\nimport org.apache.poi.openxml4j.opc.PackagePart;\n\nimport org.apache.xmlbeans.XmlObject;\n\nimport java.util.List;\nimport java.util.ArrayList;\n\npublic class GetChartExXML {\n            \n private static List&lt;XSSFChartEx&gt; getChartExList(XSSFSheet sheet) {\n  List&lt;XSSFChartEx&gt; resultList = new ArrayList&lt;XSSFChartEx&gt;();\n  try {\n   XSSFDrawing drawing = sheet.getDrawingPatriarch();\n   if (drawing != null) {\n    for (POIXMLDocumentPart dpart : drawing.getRelations()) {\n     PackagePart ppart = dpart.getPackagePart();\n     if (&quot;application/vnd.ms-office.chartex+xml&quot;.equals(ppart.getContentType())) {\n      XSSFChartEx xssfChartEx = new XSSFChartEx(ppart);\n      String rId = drawing.getRelationId(dpart);\n      drawing.addRelation(\n       rId, \n       new XSSFChartExRelation(\n        &quot;application/vnd.ms-office.chartex+xml&quot;,\n        &quot;http://schemas.microsoft.com/office/2014/relationships/chartEx&quot;,\n        &quot;/xl/charts/chartEx#.xml&quot;),\n       xssfChartEx\n      );\n      resultList.add(xssfChartEx);\n     }\n    }\n   }\n  } catch (Exception e) {\n   e.printStackTrace();\n  }\n  return resultList;\n } \n\n public static void main(String[] args) {\n  try {\n   XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ChartExample.xlsx&quot;));\n   XSSFSheet sheet = workbook.getSheetAt(0);\n   System.out.println(&quot;Loaded sheet is &quot; + sheet.getSheetName());\n   List&lt;XSSFChartEx&gt; chartExList = getChartExList(sheet);\n   System.out.println(chartExList);\n   for(XSSFChartEx xssfChartEx : chartExList) {\n    //System.out.println(xssfChartEx.getChartExXmlObject());\n    System.out.println(xssfChartEx.getTitle());\n    System.out.println(xssfChartEx.getSeriesCount());\n    System.out.println(xssfChartEx.getSeries(0));\n    System.out.println(xssfChartEx.getLegend());\n    System.out.println(xssfChartEx.getAxesCount());\n    System.out.println(xssfChartEx.getAxis(0));\n   }\n  } catch (Exception e) {\n   e.printStackTrace();\n  }\n }\n\n private static class XSSFChartEx extends POIXMLDocumentPart {\n\n  private XmlObject chartExXmlObject;\n\n  private XSSFChartEx(PackagePart part) throws Exception {\n   super(part);\n   chartExXmlObject = XmlObject.Factory.parse(part.getInputStream());\n  }\n\n  private XmlObject getChartExXmlObject() {\n   return chartExXmlObject;\n  }\n\n  private int getSeriesCount() {\n   XmlObject[] result = chartExXmlObject.selectPath(\n    &quot;declare namespace cx='http://schemas.microsoft.com/office/drawing/2014/chartex' &quot; +\n    &quot;.//cx:chart/cx:plotArea/cx:plotAreaRegion/cx:series&quot;\n   );\n   return result.length;\n  }\n  \n  private XmlObject getSeries(int number) {\n   XmlObject[] result = chartExXmlObject.selectPath(\n    &quot;declare namespace cx='http://schemas.microsoft.com/office/drawing/2014/chartex' &quot; +\n    &quot;.//cx:chart/cx:plotArea/cx:plotAreaRegion/cx:series&quot;\n   );\n   if (result.length &gt; number) return result[number];\n   return null;\n  }\n\n  private int getAxesCount() {\n   XmlObject[] result = chartExXmlObject.selectPath(\n    &quot;declare namespace cx='http://schemas.microsoft.com/office/drawing/2014/chartex' &quot; +\n    &quot;.//cx:chart/cx:plotArea/cx:axis&quot;\n   );\n   return result.length;\n  }\n  \n  private XmlObject getAxis(int number) {\n   XmlObject[] result = chartExXmlObject.selectPath(\n    &quot;declare namespace cx='http://schemas.microsoft.com/office/drawing/2014/chartex' &quot; +\n    &quot;.//cx:chart/cx:plotArea/cx:axis&quot;\n   );\n   if (result.length &gt; number) return result[number];\n   return null;\n  }\n\n  private XmlObject getTitle() {\n   XmlObject[] result = chartExXmlObject.selectPath(\n    &quot;declare namespace cx='http://schemas.microsoft.com/office/drawing/2014/chartex' &quot; +\n    &quot;.//cx:chart/cx:title&quot;\n   );\n   if (result.length &gt; 0) return result[0];\n   return null;\n  }\n  \n  private XmlObject getLegend() {\n   XmlObject[] result = chartExXmlObject.selectPath(\n    &quot;declare namespace cx='http://schemas.microsoft.com/office/drawing/2014/chartex' &quot; +\n    &quot;.//cx:chart/cx:legend&quot;\n   );\n   if (result.length &gt; 0) return result[0];\n   return null;\n  }\n\n  @Override\n  protected void commit() throws IOException {\n   PackagePart part = getPackagePart();\n   OutputStream out = part.getOutputStream();\n   chartExXmlObject.save(out);\n   out.close();\n  }\n }\n\n private static class XSSFChartExRelation extends POIXMLRelation {\n  private XSSFChartExRelation(String type, String rel, String defaultName) {\n   super(type, rel, defaultName);\n  }\n }\n}\n</code></pre>\n<p>The real challenge is to find out the meaning of the found XML. Fortunately most of the XML element names are  self-explanatory. So one should be able to find out where is the title text for example. But to get the meaning of series settings, legend settings and axes settings can be challenging.</p>\n"}],"owner":{"account_id":6346949,"reputation":77,"user_id":4927182,"accept_rate":71,"display_name":"wwood_cc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76482437,"answer_count":1,"score":0,"last_activity_date":1686832844,"creation_date":1686788042,"question_id":76478320,"body_markdown":"Is there a way to use Apache POI to extract the following information (preferably all the info):\r\n1. title (including position + style)\r\n2. axes (including position + style)\r\n3. series/ data ranges (including position + style)\r\n4. legend (including position + style)\r\n\r\nfor the following charts:\r\n1. High low close chart\r\n2. open high low close chart\r\n3. volume high low close chart\r\n4. volume open high low close chart\r\n5. box and whisker chart\r\n6. funnel chart\r\n7. paretoline chart\r\n8. region map chart\r\n9. sunburst chart\r\n10. treemap chart\r\n11. waterfall ","title":"How to extract advanced chart info from Excel using Apache POI?","body":"<p>Is there a way to use Apache POI to extract the following information (preferably all the info):</p>\n<ol>\n<li>title (including position + style)</li>\n<li>axes (including position + style)</li>\n<li>series/ data ranges (including position + style)</li>\n<li>legend (including position + style)</li>\n</ol>\n<p>for the following charts:</p>\n<ol>\n<li>High low close chart</li>\n<li>open high low close chart</li>\n<li>volume high low close chart</li>\n<li>volume open high low close chart</li>\n<li>box and whisker chart</li>\n<li>funnel chart</li>\n<li>paretoline chart</li>\n<li>region map chart</li>\n<li>sunburst chart</li>\n<li>treemap chart</li>\n<li>waterfall</li>\n</ol>\n"},{"tags":["java","jackson","swagger"],"answers":[{"tags":[],"owner":{"account_id":9316795,"reputation":1583,"user_id":6916890,"display_name":"lazylead"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1612208576,"creation_date":1612208217,"answer_id":65999045,"question_id":65998704,"body_markdown":"Potentially the issue is that your dependencies(including transitive) are incompatible with your swagger version. \r\nI don&#39;t know which build system you are using, but in maven it can be done using\r\n```java\r\nmvn dependency:tree\r\n```\r\nhttps://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html\r\n\r\nIn gradle you may try `gradle -q dependencies --configuration scm`, more in https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html\r\n\r\nTry to inspect your dependencies and their versions.","title":"Swagger reader throws java.lang.NoSuchMethodError","body":"<p>Potentially the issue is that your dependencies(including transitive) are incompatible with your swagger version.\nI don't know which build system you are using, but in maven it can be done using</p>\n<pre class=\"lang-java prettyprint-override\"><code>mvn dependency:tree\n</code></pre>\n<p><a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html</a></p>\n<p>In gradle you may try <code>gradle -q dependencies --configuration scm</code>, more in <a href=\"https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html</a></p>\n<p>Try to inspect your dependencies and their versions.</p>\n"},{"tags":[],"owner":{"account_id":6600231,"reputation":672,"user_id":5098772,"display_name":"Victor1125"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686832772,"creation_date":1686832772,"answer_id":76482576,"question_id":65998704,"body_markdown":"Check out `springfox-boot-starter` dependency in your pom.xml.\r\nIn case with upgrade from swagger2 to swagger3 I forgotten delete dependencies with swagger2 like `springfox-boot-starter`. After that works.","title":"Swagger reader throws java.lang.NoSuchMethodError","body":"<p>Check out <code>springfox-boot-starter</code> dependency in your pom.xml.\nIn case with upgrade from swagger2 to swagger3 I forgotten delete dependencies with swagger2 like <code>springfox-boot-starter</code>. After that works.</p>\n"}],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10661,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1686832772,"creation_date":1612206500,"question_id":65998704,"body_markdown":"I am trying to create API documentation in my project(Sparkjava). [I use this article][1] I wrote this parser:\r\n\r\n    import com.fasterxml.jackson.annotation.JsonInclude.Include;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import io.swagger.jaxrs.Reader;\r\n    import io.swagger.models.*;\r\n    import spark.Route;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public class SwaggerParser {\r\n    \r\n        public static String getSwaggerJson(List&lt;Route&gt; routes) throws JsonProcessingException {\r\n            Swagger swagger = getSwagger(routes);\r\n            return swaggerToJson(swagger);\r\n        }\r\n    \r\n        private static Swagger getSwagger(List&lt;Route&gt; routes) {\r\n            Swagger swagger = new Swagger();\r\n            swagger.info(new Info().description(&quot;User API&quot;)\r\n                    .version(&quot;V1.0&quot;)\r\n                    .title(&quot;Some random api for testing&quot;)\r\n                    .contact(new Contact().name(&quot;Serol&quot;).url(&quot;https://serol.ro&quot;)));\r\n            swagger.schemes(Arrays.asList(Scheme.HTTP, Scheme.HTTPS));\r\n            swagger.consumes(&quot;application/json&quot;);\r\n            swagger.produces(&quot;application/json&quot;);\r\n            swagger.tag(new Tag().name(&quot;swagger&quot;));\r\n    \r\n            Reader reader = new Reader(swagger);\r\n    \r\n            for (Route route : routes) {\r\n                try {\r\n                    reader.read(route.getClass());\r\n                }catch (Throwable throwable){\r\n                    System.out.println(throwable);\r\n                }\r\n            }\r\n    \r\n            return reader.getSwagger();\r\n        }\r\n    \r\n        public static String swaggerToJson(Swagger swagger) throws JsonProcessingException {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            objectMapper.setSerializationInclusion(Include.NON_EMPTY);\r\n            return objectMapper.writeValueAsString(swagger);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nIt works in my test application but doesn&#39;t work in the real project. I wrote init test for that:\r\n\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.healthgorilla.portal.server.labnetwork.api.GetOrdersAPI;\r\n    import com.healthgorilla.portal.server.labnetwork.route.GetOrdersRoute;\r\n    import org.junit.Test;\r\n    \r\n    import java.util.Collections;\r\n    \r\n    import static org.junit.Assert.*;\r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.when;\r\n    \r\n    public class SwaggerParserTest {\r\n        @Test\r\n        public void name() throws JsonProcessingException {\r\n            GetOrdersAPI api = mock(GetOrdersAPI.class);\r\n            when(api.exec()).thenReturn(&quot;&quot;);\r\n    \r\n            String swaggerJson = SwaggerParser.getSwaggerJson(Collections.singletonList(new GetOrdersRoute(api)));\r\n            \r\n            assertNotNull(swaggerJson);\r\n        }\r\n    }\r\n\r\nAnd it throws an exception:\r\n\r\n    java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.introspect.AnnotatedMember.getType(Lcom/fasterxml/jackson/databind/type/TypeBindings;)Lcom/fasterxml/jackson/databind/JavaType;\r\n\r\nBut in the test project it works\r\n  [1]: https://serol.ro/posts/2016/swagger_sparkjava/\r\n\r\n\r\nEDIT:\r\n\r\nI found conflict. It newer jckson version in the project. I change my swagger dependencies\r\n\r\n    &lt;!-- swagger --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;swagger-core&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6.2&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;swagger-jaxrs&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6.2&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n\r\nBut it doesn&#39;t help. There are my Jackson dependencies:\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.11.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                &lt;version&gt;2.11.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;2.11.2&lt;/version&gt;\r\n            &lt;/dependency&gt;","title":"Swagger reader throws java.lang.NoSuchMethodError","body":"<p>I am trying to create API documentation in my project(Sparkjava). [I use this article][1] I wrote this parser:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonInclude.Include;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport io.swagger.jaxrs.Reader;\nimport io.swagger.models.*;\nimport spark.Route;\n\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class SwaggerParser {\n\n    public static String getSwaggerJson(List&lt;Route&gt; routes) throws JsonProcessingException {\n        Swagger swagger = getSwagger(routes);\n        return swaggerToJson(swagger);\n    }\n\n    private static Swagger getSwagger(List&lt;Route&gt; routes) {\n        Swagger swagger = new Swagger();\n        swagger.info(new Info().description(&quot;User API&quot;)\n                .version(&quot;V1.0&quot;)\n                .title(&quot;Some random api for testing&quot;)\n                .contact(new Contact().name(&quot;Serol&quot;).url(&quot;https://serol.ro&quot;)));\n        swagger.schemes(Arrays.asList(Scheme.HTTP, Scheme.HTTPS));\n        swagger.consumes(&quot;application/json&quot;);\n        swagger.produces(&quot;application/json&quot;);\n        swagger.tag(new Tag().name(&quot;swagger&quot;));\n\n        Reader reader = new Reader(swagger);\n\n        for (Route route : routes) {\n            try {\n                reader.read(route.getClass());\n            }catch (Throwable throwable){\n                System.out.println(throwable);\n            }\n        }\n\n        return reader.getSwagger();\n    }\n\n    public static String swaggerToJson(Swagger swagger) throws JsonProcessingException {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.setSerializationInclusion(Include.NON_EMPTY);\n        return objectMapper.writeValueAsString(swagger);\n    }\n\n}\n</code></pre>\n<p>It works in my test application but doesn't work in the real project. I wrote init test for that:</p>\n<pre><code>import com.fasterxml.jackson.core.JsonProcessingException;\nimport com.healthgorilla.portal.server.labnetwork.api.GetOrdersAPI;\nimport com.healthgorilla.portal.server.labnetwork.route.GetOrdersRoute;\nimport org.junit.Test;\n\nimport java.util.Collections;\n\nimport static org.junit.Assert.*;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\npublic class SwaggerParserTest {\n    @Test\n    public void name() throws JsonProcessingException {\n        GetOrdersAPI api = mock(GetOrdersAPI.class);\n        when(api.exec()).thenReturn(&quot;&quot;);\n\n        String swaggerJson = SwaggerParser.getSwaggerJson(Collections.singletonList(new GetOrdersRoute(api)));\n        \n        assertNotNull(swaggerJson);\n    }\n}\n</code></pre>\n<p>And it throws an exception:</p>\n<pre><code>java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.introspect.AnnotatedMember.getType(Lcom/fasterxml/jackson/databind/type/TypeBindings;)Lcom/fasterxml/jackson/databind/JavaType;\n</code></pre>\n<p>But in the test project it works\n[1]: <a href=\"https://serol.ro/posts/2016/swagger_sparkjava/\" rel=\"noreferrer\">https://serol.ro/posts/2016/swagger_sparkjava/</a></p>\n<p>EDIT:</p>\n<p>I found conflict. It newer jckson version in the project. I change my swagger dependencies</p>\n<pre><code>&lt;!-- swagger --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-core&lt;/artifactId&gt;\n            &lt;version&gt;1.6.2&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-jaxrs&lt;/artifactId&gt;\n            &lt;version&gt;1.6.2&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>But it doesn't help. There are my Jackson dependencies:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.11.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.11.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.11.2&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":22279939,"reputation":67,"user_id":16508439,"display_name":"rento"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686832634,"creation_date":1686832634,"answer_id":76482554,"question_id":76475295,"body_markdown":"Based on your provided error message, it seems that the task &#39;install&#39; is unknown. I am not clearly sure what you are going to achieve, but if it is only about building the project you can simply run: `gradle clean build` or `./gradlew clean build`. Even `gradle build` or `./gradlew build` should do the job.","title":"How do I setup Hyperledger fabric chaincode java api?","body":"<p>Based on your provided error message, it seems that the task 'install' is unknown. I am not clearly sure what you are going to achieve, but if it is only about building the project you can simply run: <code>gradle clean build</code> or <code>./gradlew clean build</code>. Even <code>gradle build</code> or <code>./gradlew build</code> should do the job.</p>\n"}],"owner":{"account_id":28821301,"reputation":1,"user_id":22073771,"display_name":"Subrat Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686832634,"creation_date":1686757130,"question_id":76475295,"body_markdown":"This is my first time working with blockchain technology of any kind, and I am new to this space, I&#39;ve been trying to set it up for days, following the documentation \r\nhttps://hyperledger-fabric.readthedocs.io/en/release-2.5/getting_started.html but I am stuck here:\r\n\r\nhttps://github.com/hyperledger/fabric-chaincode-java\r\n\r\n    ./gradlew clean build install\r\n\r\nthis , always results in this,\r\n\r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Task &#39;install&#39; not found in root project &#39;fabric-chaincode-java&#39;.\r\n    \r\n    * Try:\r\n    Run gradlew tasks to get a list of available tasks. Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\r\n    \r\n    You can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\n    \r\n    See https://docs.gradle.org/7.1.1/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\n\r\nI tried setting up gradle, i tried making some changes in dependencies, nothing seems to work.","title":"How do I setup Hyperledger fabric chaincode java api?","body":"<p>This is my first time working with blockchain technology of any kind, and I am new to this space, I've been trying to set it up for days, following the documentation\n<a href=\"https://hyperledger-fabric.readthedocs.io/en/release-2.5/getting_started.html\" rel=\"nofollow noreferrer\">https://hyperledger-fabric.readthedocs.io/en/release-2.5/getting_started.html</a> but I am stuck here:</p>\n<p><a href=\"https://github.com/hyperledger/fabric-chaincode-java\" rel=\"nofollow noreferrer\">https://github.com/hyperledger/fabric-chaincode-java</a></p>\n<pre><code>./gradlew clean build install\n</code></pre>\n<p>this , always results in this,</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nTask 'install' not found in root project 'fabric-chaincode-java'.\n\n* Try:\nRun gradlew tasks to get a list of available tasks. Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\n\nYou can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\n\nSee https://docs.gradle.org/7.1.1/userguide/command_line_interface.html#sec:command_line_warnings\n</code></pre>\n<p>I tried setting up gradle, i tried making some changes in dependencies, nothing seems to work.</p>\n"},{"tags":["java","faker"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686830868,"post_id":76482305,"comment_id":134855099,"body_markdown":"Did you try searching the Faker documentation?","body":"Did you try searching the Faker documentation?"},{"owner":{"account_id":24136874,"reputation":91,"user_id":18103650,"display_name":"Laplas"},"score":0,"creation_date":1686830921,"post_id":76482305,"comment_id":134855114,"body_markdown":"yes, and I don&#39;t understand what the mistake is","body":"yes, and I don&#39;t understand what the mistake is"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1686831079,"post_id":76482305,"comment_id":134855159,"body_markdown":"Show all relevant code you wrote...","body":"Show all relevant code you wrote..."},{"owner":{"account_id":24136874,"reputation":91,"user_id":18103650,"display_name":"Laplas"},"score":0,"creation_date":1686831257,"post_id":76482305,"comment_id":134855204,"body_markdown":"add all for my code","body":"add all for my code"}],"answers":[{"tags":[],"owner":{"account_id":16025918,"reputation":4676,"user_id":11566161,"display_name":"Shri Hari L"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686832372,"creation_date":1686832372,"answer_id":76482518,"question_id":76482305,"body_markdown":"Calling [phoneNumber()](http://dius.github.io/java-faker/apidocs/index.html) gives the correct Russian format.\r\n\r\n```lang-java\r\nLocale locale = new Locale(&quot;ru&quot;);\r\nFaker faker = new Faker(locale);\r\nSystem.out.println(faker.phoneNumber().phoneNumber());\r\n// +7(979)761-86-72\r\n```\r\n\r\nThe *cell_phone* format has not been added in the [Russia&#39;s locale file](https://github.com/DiUS/java-faker/blob/master/src/main/resources/ru.yml#L54), only *phone_number*.\r\n\r\nSo, we can use the above method to generate Russia phone numbers.\r\n\r\nNote: Looks like [Moscow has different format](https://en.wikipedia.org/wiki/Telephone_numbers_in_Russia#Calls_within_a_city_or_region) for Phone Number. I guess, there is no city-wise formatting in Faker.\r\n\r\n","title":"Faker generate a phone number","body":"<p>Calling <a href=\"http://dius.github.io/java-faker/apidocs/index.html\" rel=\"nofollow noreferrer\">phoneNumber()</a> gives the correct Russian format.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Locale locale = new Locale(&quot;ru&quot;);\nFaker faker = new Faker(locale);\nSystem.out.println(faker.phoneNumber().phoneNumber());\n// +7(979)761-86-72\n</code></pre>\n<p>The <em>cell_phone</em> format has not been added in the <a href=\"https://github.com/DiUS/java-faker/blob/master/src/main/resources/ru.yml#L54\" rel=\"nofollow noreferrer\">Russia's locale file</a>, only <em>phone_number</em>.</p>\n<p>So, we can use the above method to generate Russia phone numbers.</p>\n<p>Note: Looks like <a href=\"https://en.wikipedia.org/wiki/Telephone_numbers_in_Russia#Calls_within_a_city_or_region\" rel=\"nofollow noreferrer\">Moscow has different format</a> for Phone Number. I guess, there is no city-wise formatting in Faker.</p>\n"}],"owner":{"account_id":24136874,"reputation":91,"user_id":18103650,"display_name":"Laplas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":696,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1686832372,"creation_date":1686830820,"question_id":76482305,"body_markdown":"I use the Faker library to generate a phone number. How to configure the generation so that the number is output in the format +7916xxxxxxxx\r\n\r\n```\r\nFaker faker = new Faker(new Locale(&quot;ru&quot;, &quot;Moscow&quot;));\r\nString phone = faker.phoneNumber().cellPhone();\r\n```\r\nI put the location on the desired segment, but the wrong format comes to the place of the phone number according to the type 999.000.999","title":"Faker generate a phone number","body":"<p>I use the Faker library to generate a phone number. How to configure the generation so that the number is output in the format +7916xxxxxxxx</p>\n<pre><code>Faker faker = new Faker(new Locale(&quot;ru&quot;, &quot;Moscow&quot;));\nString phone = faker.phoneNumber().cellPhone();\n</code></pre>\n<p>I put the location on the desired segment, but the wrong format comes to the place of the phone number according to the type 999.000.999</p>\n"},{"tags":["java","ssl","https","ssl-certificate"],"comments":[{"owner":{"account_id":4339914,"reputation":6758,"user_id":3543437,"accept_rate":81,"display_name":"kayleeFrye_onDeck"},"score":4,"creation_date":1468883996,"post_id":6908948,"comment_id":64300101,"body_markdown":"One time I got this error and contacted our security team, and it turned out I had to patch the JAR we were using, as our team was using an outdated one provided by the company. Just an FYI for anyone else who may be in a similar situation.","body":"One time I got this error and contacted our security team, and it turned out I had to patch the JAR we were using, as our team was using an outdated one provided by the company. Just an FYI for anyone else who may be in a similar situation."},{"owner":{"account_id":11282967,"reputation":367,"user_id":8274672,"display_name":"lucky"},"score":0,"creation_date":1684311933,"post_id":6908948,"comment_id":134498293,"body_markdown":"I received this PKIX issue in two cases on while downloading the maven dependency directly from the internet instead of my organisation cache. This was resolved correcting the setting.xml file. Second time, i faced this issue when i was trying hitting Microsoft uri for oAuth token, this was resolved by adding cacert file in my jdk path","body":"I received this PKIX issue in two cases on while downloading the maven dependency directly from the internet instead of my organisation cache. This was resolved correcting the setting.xml file. Second time, i faced this issue when i was trying hitting Microsoft uri for oAuth token, this was resolved by adding cacert file in my jdk path"}],"answers":[{"tags":[],"owner":{"account_id":113294,"reputation":54886,"user_id":298455,"accept_rate":100,"display_name":"Nishant"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1312272544,"creation_date":1312272544,"answer_id":6908991,"question_id":6908948,"body_markdown":"Quoting from [No more &#39;unable to find valid certification path to requested target&#39;][1] \r\n\r\n&gt;when trying to open an SSL connection to a host using JSSE. What this usually means is that the server is using a test certificate (possibly generated using keytool) rather than a certificate from a well known commercial Certification Authority such as Verisign or GoDaddy. Web browsers display warning dialogs in this case, but since JSSE cannot assume an interactive user is present it just throws an exception by default.\r\n&gt;\r\n&gt;Certificate validation is a very important part of SSL security, but I am not writing this entry to explain the details. If you are interested, you can start by reading the Wikipedia blurb. I am writing this entry to show a simple way to talk to that host with the test certificate, if you really want to.\r\n&gt;\r\n&gt;Basically, you want to add the server&#39;s certificate to the KeyStore with your trusted certificates\r\n\r\nTry the code provided there. It might help.\r\n\r\n  [1]: http://cold-caffein.blogspot.com/2011/07/looks-like-article-no-more-unable-to.html","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>Quoting from <a href=\"http://cold-caffein.blogspot.com/2011/07/looks-like-article-no-more-unable-to.html\" rel=\"noreferrer\">No more 'unable to find valid certification path to requested target'</a> </p>\n\n<blockquote>\n  <p>when trying to open an SSL connection to a host using JSSE. What this usually means is that the server is using a test certificate (possibly generated using keytool) rather than a certificate from a well known commercial Certification Authority such as Verisign or GoDaddy. Web browsers display warning dialogs in this case, but since JSSE cannot assume an interactive user is present it just throws an exception by default.</p>\n  \n  <p>Certificate validation is a very important part of SSL security, but I am not writing this entry to explain the details. If you are interested, you can start by reading the Wikipedia blurb. I am writing this entry to show a simple way to talk to that host with the test certificate, if you really want to.</p>\n  \n  <p>Basically, you want to add the server's certificate to the KeyStore with your trusted certificates</p>\n</blockquote>\n\n<p>Try the code provided there. It might help.</p>\n"},{"tags":[],"owner":{"account_id":115660,"reputation":3846,"user_id":303599,"display_name":"Maxim Mazin"},"down_vote_count":2,"up_vote_count":289,"is_accepted":false,"score":287,"last_activity_date":1441054116,"creation_date":1346089366,"answer_id":12146838,"question_id":6908948,"body_markdown":"The problem appears when your server has self signed certificate. To workaround it you can add this certificate to the list of trusted certificates of your JVM. \r\n\r\n[In this article][1] author describes how to fetch the certificate from your browser and add it to cacerts file of your JVM. You can either edit `JAVA_HOME/jre/lib/security/cacerts` file or run you application with `-Djavax.net.ssl.trustStore` parameter. Verify which JDK/JRE you are using too as this is often a source of confusion.\r\n\r\nSee also: https://stackoverflow.com/questions/8443081/how-are-ssl-certificate-server-names-resolved-can-i-add-alternative-names-using If you run into `java.security.cert.CertificateException: No name matching localhost found` exception.\r\n\r\n\r\n  [1]: http://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed.html","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>The problem appears when your server has self signed certificate. To workaround it you can add this certificate to the list of trusted certificates of your JVM. </p>\n\n<p><a href=\"http://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed.html\" rel=\"noreferrer\">In this article</a> author describes how to fetch the certificate from your browser and add it to cacerts file of your JVM. You can either edit <code>JAVA_HOME/jre/lib/security/cacerts</code> file or run you application with <code>-Djavax.net.ssl.trustStore</code> parameter. Verify which JDK/JRE you are using too as this is often a source of confusion.</p>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/8443081/how-are-ssl-certificate-server-names-resolved-can-i-add-alternative-names-using\">How are SSL certificate server names resolved/Can I add alternative names using keytool?</a> If you run into <code>java.security.cert.CertificateException: No name matching localhost found</code> exception.</p>\n"},{"tags":[],"owner":{"account_id":41138,"reputation":7777,"user_id":119479,"accept_rate":75,"display_name":"Gabe Martin-Dempesy"},"down_vote_count":2,"up_vote_count":197,"is_accepted":false,"score":195,"last_activity_date":1686832331,"creation_date":1382651280,"answer_id":19577333,"question_id":6908948,"body_markdown":"Here&#39;s what reliably works for me on **macOS**. Make sure to replace example.com and 443 with the actual hostname and port you&#39;re trying to connect to, and give a custom alias. The first command downloads the provided certificate from the remote server and saves it locally in x509 format. The second command loads the saved certificate into Java&#39;s SSL trust store.\r\n\r\n    openssl x509 -in &lt;(openssl s_client -connect example.com:443 -prexit 2&gt;/dev/null) -out ~/example.crt\r\n    sudo keytool -importcert -file ~/example.crt -alias example -keystore $(/usr/libexec/java_home)/jre/lib/security/cacerts -storepass changeit\r\n\r\nUnder **Windows** via **Git Bash or WSL** the first command looks a bit different :\r\n\r\n    openssl s_client -connect git.css.ch:443  -prexit &gt; ~/cert.txt\r\n    openssl x509 -in ~/cert.txt -out ~/example.crt","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>Here's what reliably works for me on <strong>macOS</strong>. Make sure to replace example.com and 443 with the actual hostname and port you're trying to connect to, and give a custom alias. The first command downloads the provided certificate from the remote server and saves it locally in x509 format. The second command loads the saved certificate into Java's SSL trust store.</p>\n<pre><code>openssl x509 -in &lt;(openssl s_client -connect example.com:443 -prexit 2&gt;/dev/null) -out ~/example.crt\nsudo keytool -importcert -file ~/example.crt -alias example -keystore $(/usr/libexec/java_home)/jre/lib/security/cacerts -storepass changeit\n</code></pre>\n<p>Under <strong>Windows</strong> via <strong>Git Bash or WSL</strong> the first command looks a bit different :</p>\n<pre><code>openssl s_client -connect git.css.ch:443  -prexit &gt; ~/cert.txt\nopenssl x509 -in ~/cert.txt -out ~/example.crt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1730593,"reputation":791,"user_id":1584296,"display_name":"Stephan Oudmaijer"},"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1394805119,"creation_date":1394805119,"answer_id":22406950,"question_id":6908948,"body_markdown":"I had the same issue with a valid signed wildcard certificate from symantec.\r\n\r\nFirst try running your java application with ***-Djavax.net.debug=SSL*** to see what is really going on.\r\n\r\nI ended up ***importing the intermediate certificate*** which was causing the cert chain to break.\r\n\r\nI downloaded the missing intermediate cert from symantec (you can see the download link to the missing cert in the ssl handshake log: http://svrintl-g3-aia.verisign.com/SVRIntlG3.cer in my case).\r\n\r\nAnd I imported the cert in the java keystore. After importing the intermediate certificate my wildcard ssl cert finally started working:\r\n\r\n    keytool -import -keystore ../jre/lib/security/cacerts -trustcacerts -alias &quot;VeriSign Class 3 International Server CA - G3&quot; -file /pathto/SVRIntlG3.cer\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>I had the same issue with a valid signed wildcard certificate from symantec.</p>\n\n<p>First try running your java application with <strong><em>-Djavax.net.debug=SSL</em></strong> to see what is really going on.</p>\n\n<p>I ended up <strong><em>importing the intermediate certificate</em></strong> which was causing the cert chain to break.</p>\n\n<p>I downloaded the missing intermediate cert from symantec (you can see the download link to the missing cert in the ssl handshake log: <a href=\"http://svrintl-g3-aia.verisign.com/SVRIntlG3.cer\">http://svrintl-g3-aia.verisign.com/SVRIntlG3.cer</a> in my case).</p>\n\n<p>And I imported the cert in the java keystore. After importing the intermediate certificate my wildcard ssl cert finally started working:</p>\n\n<pre><code>keytool -import -keystore ../jre/lib/security/cacerts -trustcacerts -alias \"VeriSign Class 3 International Server CA - G3\" -file /pathto/SVRIntlG3.cer\n</code></pre>\n"},{"tags":[],"owner":{"account_id":679681,"reputation":751,"user_id":888026,"display_name":"Jonas Bergstr&#246;m"},"down_vote_count":5,"up_vote_count":11,"is_accepted":false,"score":6,"last_activity_date":1407152740,"creation_date":1403788137,"answer_id":24431450,"question_id":6908948,"body_markdown":"I was able to get it working with code only, i.e. no need to use keytool:\r\n\r\n    import com.netflix.config.DynamicBooleanProperty;\r\n    import com.netflix.config.DynamicIntProperty;\r\n    import com.netflix.config.DynamicPropertyFactory;\r\n    import org.apache.http.client.config.RequestConfig;\r\n    import org.apache.http.config.Registry;\r\n    import org.apache.http.config.RegistryBuilder;\r\n    import org.apache.http.conn.ssl.SSLContexts;\r\n    import org.apache.http.conn.ssl.TrustStrategy;\r\n    import org.apache.http.conn.ssl.X509HostnameVerifier;\r\n    import org.apache.http.impl.nio.client.CloseableHttpAsyncClient;\r\n    import org.apache.http.impl.nio.client.HttpAsyncClients;\r\n    import org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager;\r\n    import org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor;\r\n    import org.apache.http.impl.nio.reactor.IOReactorConfig;\r\n    import org.apache.http.nio.conn.NoopIOSessionStrategy;\r\n    import org.apache.http.nio.conn.SchemeIOSessionStrategy;\r\n    import org.apache.http.nio.conn.ssl.SSLIOSessionStrategy;\r\n    \r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLException;\r\n    import javax.net.ssl.SSLSession;\r\n    import javax.net.ssl.SSLSocket;\r\n    import java.io.IOException;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    public class Test\r\n    {\r\n        private static final DynamicIntProperty MAX_TOTAL_CONNECTIONS = DynamicPropertyFactory.getInstance().getIntProperty(&quot;X.total.connections&quot;, 40);\r\n        private static final DynamicIntProperty ROUTE_CONNECTIONS = DynamicPropertyFactory.getInstance().getIntProperty(&quot;X.total.connections&quot;, 40);\r\n        private static final DynamicIntProperty CONNECT_TIMEOUT = DynamicPropertyFactory.getInstance().getIntProperty(&quot;X.connect.timeout&quot;, 60000);\r\n        private static final DynamicIntProperty SOCKET_TIMEOUT = DynamicPropertyFactory.getInstance().getIntProperty(&quot;X.socket.timeout&quot;, -1);\r\n        private static final DynamicIntProperty CONNECTION_REQUEST_TIMEOUT = DynamicPropertyFactory.getInstance().getIntProperty(&quot;X.connectionrequest.timeout&quot;, 60000);\r\n        private static final DynamicBooleanProperty STALE_CONNECTION_CHECK = DynamicPropertyFactory.getInstance().getBooleanProperty(&quot;X.checkconnection&quot;, true);\r\n    \r\n        public static void main(String[] args) throws Exception\r\n        {\r\n    \r\n            SSLContext sslcontext = SSLContexts.custom()\r\n                    .useTLS()\r\n                    .loadTrustMaterial(null, new TrustStrategy()\r\n                    {\r\n                        @Override\r\n                        public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException\r\n                        {\r\n                            return true;\r\n                        }\r\n                    })\r\n                    .build();\r\n            SSLIOSessionStrategy sslSessionStrategy = new SSLIOSessionStrategy(sslcontext, new AllowAll());\r\n    \r\n            Registry&lt;SchemeIOSessionStrategy&gt; sessionStrategyRegistry = RegistryBuilder.&lt;SchemeIOSessionStrategy&gt;create()\r\n                    .register(&quot;http&quot;, NoopIOSessionStrategy.INSTANCE)\r\n                    .register(&quot;https&quot;, sslSessionStrategy)\r\n                    .build();\r\n    \r\n            DefaultConnectingIOReactor ioReactor = new DefaultConnectingIOReactor(IOReactorConfig.DEFAULT);\r\n            PoolingNHttpClientConnectionManager connectionManager = new PoolingNHttpClientConnectionManager(ioReactor, sessionStrategyRegistry);\r\n            connectionManager.setMaxTotal(MAX_TOTAL_CONNECTIONS.get());\r\n            connectionManager.setDefaultMaxPerRoute(ROUTE_CONNECTIONS.get());\r\n    \r\n            RequestConfig requestConfig = RequestConfig.custom()\r\n                    .setSocketTimeout(SOCKET_TIMEOUT.get())\r\n                    .setConnectTimeout(CONNECT_TIMEOUT.get())\r\n                    .setConnectionRequestTimeout(CONNECTION_REQUEST_TIMEOUT.get())\r\n                    .setStaleConnectionCheckEnabled(STALE_CONNECTION_CHECK.get())\r\n                    .build();\r\n    \r\n            CloseableHttpAsyncClient httpClient = HttpAsyncClients.custom()\r\n                    .setSSLStrategy(sslSessionStrategy)\r\n                    .setConnectionManager(connectionManager)\r\n                    .setDefaultRequestConfig(requestConfig)\r\n                    .build();\r\n    \r\n            httpClient.start();\r\n    \r\n            // use httpClient...\r\n        }\r\n    \r\n        private static class AllowAll implements X509HostnameVerifier\r\n        {\r\n            @Override\r\n            public void verify(String s, SSLSocket sslSocket) throws IOException\r\n            {}\r\n    \r\n            @Override\r\n            public void verify(String s, X509Certificate x509Certificate) throws SSLException {}\r\n    \r\n            @Override\r\n            public void verify(String s, String[] strings, String[] strings2) throws SSLException\r\n            {}\r\n    \r\n            @Override\r\n            public boolean verify(String s, SSLSession sslSession)\r\n            {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>I was able to get it working with code only, i.e. no need to use keytool:</p>\n\n<pre><code>import com.netflix.config.DynamicBooleanProperty;\nimport com.netflix.config.DynamicIntProperty;\nimport com.netflix.config.DynamicPropertyFactory;\nimport org.apache.http.client.config.RequestConfig;\nimport org.apache.http.config.Registry;\nimport org.apache.http.config.RegistryBuilder;\nimport org.apache.http.conn.ssl.SSLContexts;\nimport org.apache.http.conn.ssl.TrustStrategy;\nimport org.apache.http.conn.ssl.X509HostnameVerifier;\nimport org.apache.http.impl.nio.client.CloseableHttpAsyncClient;\nimport org.apache.http.impl.nio.client.HttpAsyncClients;\nimport org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager;\nimport org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor;\nimport org.apache.http.impl.nio.reactor.IOReactorConfig;\nimport org.apache.http.nio.conn.NoopIOSessionStrategy;\nimport org.apache.http.nio.conn.SchemeIOSessionStrategy;\nimport org.apache.http.nio.conn.ssl.SSLIOSessionStrategy;\n\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLException;\nimport javax.net.ssl.SSLSession;\nimport javax.net.ssl.SSLSocket;\nimport java.io.IOException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\npublic class Test\n{\n    private static final DynamicIntProperty MAX_TOTAL_CONNECTIONS = DynamicPropertyFactory.getInstance().getIntProperty(\"X.total.connections\", 40);\n    private static final DynamicIntProperty ROUTE_CONNECTIONS = DynamicPropertyFactory.getInstance().getIntProperty(\"X.total.connections\", 40);\n    private static final DynamicIntProperty CONNECT_TIMEOUT = DynamicPropertyFactory.getInstance().getIntProperty(\"X.connect.timeout\", 60000);\n    private static final DynamicIntProperty SOCKET_TIMEOUT = DynamicPropertyFactory.getInstance().getIntProperty(\"X.socket.timeout\", -1);\n    private static final DynamicIntProperty CONNECTION_REQUEST_TIMEOUT = DynamicPropertyFactory.getInstance().getIntProperty(\"X.connectionrequest.timeout\", 60000);\n    private static final DynamicBooleanProperty STALE_CONNECTION_CHECK = DynamicPropertyFactory.getInstance().getBooleanProperty(\"X.checkconnection\", true);\n\n    public static void main(String[] args) throws Exception\n    {\n\n        SSLContext sslcontext = SSLContexts.custom()\n                .useTLS()\n                .loadTrustMaterial(null, new TrustStrategy()\n                {\n                    @Override\n                    public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException\n                    {\n                        return true;\n                    }\n                })\n                .build();\n        SSLIOSessionStrategy sslSessionStrategy = new SSLIOSessionStrategy(sslcontext, new AllowAll());\n\n        Registry&lt;SchemeIOSessionStrategy&gt; sessionStrategyRegistry = RegistryBuilder.&lt;SchemeIOSessionStrategy&gt;create()\n                .register(\"http\", NoopIOSessionStrategy.INSTANCE)\n                .register(\"https\", sslSessionStrategy)\n                .build();\n\n        DefaultConnectingIOReactor ioReactor = new DefaultConnectingIOReactor(IOReactorConfig.DEFAULT);\n        PoolingNHttpClientConnectionManager connectionManager = new PoolingNHttpClientConnectionManager(ioReactor, sessionStrategyRegistry);\n        connectionManager.setMaxTotal(MAX_TOTAL_CONNECTIONS.get());\n        connectionManager.setDefaultMaxPerRoute(ROUTE_CONNECTIONS.get());\n\n        RequestConfig requestConfig = RequestConfig.custom()\n                .setSocketTimeout(SOCKET_TIMEOUT.get())\n                .setConnectTimeout(CONNECT_TIMEOUT.get())\n                .setConnectionRequestTimeout(CONNECTION_REQUEST_TIMEOUT.get())\n                .setStaleConnectionCheckEnabled(STALE_CONNECTION_CHECK.get())\n                .build();\n\n        CloseableHttpAsyncClient httpClient = HttpAsyncClients.custom()\n                .setSSLStrategy(sslSessionStrategy)\n                .setConnectionManager(connectionManager)\n                .setDefaultRequestConfig(requestConfig)\n                .build();\n\n        httpClient.start();\n\n        // use httpClient...\n    }\n\n    private static class AllowAll implements X509HostnameVerifier\n    {\n        @Override\n        public void verify(String s, SSLSocket sslSocket) throws IOException\n        {}\n\n        @Override\n        public void verify(String s, X509Certificate x509Certificate) throws SSLException {}\n\n        @Override\n        public void verify(String s, String[] strings, String[] strings2) throws SSLException\n        {}\n\n        @Override\n        public boolean verify(String s, SSLSession sslSession)\n        {\n            return true;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1405668542,"creation_date":1405668542,"answer_id":24819489,"question_id":6908948,"body_markdown":"For those who like Debian and prepackaged Java:\r\n\r\n    sudo mkdir /usr/share/ca-certificates/test/  # don&#39;t mess with other certs\r\n    sudo cp ~/tmp/test.loc.crt /usr/share/ca-certificates/test/\r\n    sudo dpkg-reconfigure --force ca-certificates  # check your cert in curses GUI!\r\n    sudo update-ca-certificates --fresh --verbose\r\n\r\nDon&#39;t forget to check `/etc/default/cacerts` for:\r\n\r\n    # enable/disable updates of the keystore /etc/ssl/certs/java/cacerts\r\n    cacerts_updates=yes\r\n\r\nTo remove cert:\r\n\r\n    sudo rm /usr/share/ca-certificates/test/test.loc.crt\r\n    sudo rm /etc/ssl/certs/java/cacerts\r\n    sudo update-ca-certificates --fresh --verbose\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>For those who like Debian and prepackaged Java:</p>\n\n<pre><code>sudo mkdir /usr/share/ca-certificates/test/  # don't mess with other certs\nsudo cp ~/tmp/test.loc.crt /usr/share/ca-certificates/test/\nsudo dpkg-reconfigure --force ca-certificates  # check your cert in curses GUI!\nsudo update-ca-certificates --fresh --verbose\n</code></pre>\n\n<p>Don't forget to check <code>/etc/default/cacerts</code> for:</p>\n\n<pre><code># enable/disable updates of the keystore /etc/ssl/certs/java/cacerts\ncacerts_updates=yes\n</code></pre>\n\n<p>To remove cert:</p>\n\n<pre><code>sudo rm /usr/share/ca-certificates/test/test.loc.crt\nsudo rm /etc/ssl/certs/java/cacerts\nsudo update-ca-certificates --fresh --verbose\n</code></pre>\n"},{"tags":[],"owner":{"account_id":196789,"reputation":6968,"user_id":440432,"accept_rate":54,"display_name":"Robin"},"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1443541541,"creation_date":1419279760,"answer_id":27609876,"question_id":6908948,"body_markdown":" 1. Export the SSL certificate using Firefox. You can export it by hitting the URL in the browser and then select the option to export the certificate. Let&#39;s assume the cert file name is **your.ssl.server.name.crt**\r\n 2. Go to your `JRE_HOME/bin` or `JDK/JRE/bin`\r\n 3. Type the command \r\n 4. \r\n`keytool -keystore ..\\lib\\security\\cacerts -import -alias your.ssl.server.name -file .\\relative-path-to-cert-file\\your.ssl.server.name.crt`\r\n 5. Restart your Java process \r\n\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<ol>\n<li>Export the SSL certificate using Firefox. You can export it by hitting the URL in the browser and then select the option to export the certificate. Let's assume the cert file name is <strong>your.ssl.server.name.crt</strong></li>\n<li>Go to your <code>JRE_HOME/bin</code> or <code>JDK/JRE/bin</code></li>\n<li>Type the command </li>\n<li><code>keytool -keystore ..\\lib\\security\\cacerts -import -alias your.ssl.server.name -file .\\relative-path-to-cert-file\\your.ssl.server.name.crt</code></li>\n<li>Restart your Java process </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13259,"reputation":67754,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429204483,"creation_date":1429204483,"answer_id":29681694,"question_id":6908948,"body_markdown":"This can also be caused by using GoDaddy certs with Java 7 that are signed using SHA2.\r\n\r\nChrome and all other browsers are starting to deprecate SSL certs that are signed using SHA1, as it&#39;s not as secure. \r\n\r\nMore info [on the issue can be found here](http://tozny.com/blog/godaddys-ssl-certs-dont-work-in-java-the-right-solution/), as well as how to resolve it on your server if you need to now.\r\n\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>This can also be caused by using GoDaddy certs with Java 7 that are signed using SHA2.</p>\n\n<p>Chrome and all other browsers are starting to deprecate SSL certs that are signed using SHA1, as it's not as secure. </p>\n\n<p>More info <a href=\"http://tozny.com/blog/godaddys-ssl-certs-dont-work-in-java-the-right-solution/\" rel=\"nofollow\">on the issue can be found here</a>, as well as how to resolve it on your server if you need to now.</p>\n"},{"tags":[],"owner":{"account_id":2369743,"reputation":7275,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1434409666,"creation_date":1434123540,"answer_id":30807039,"question_id":6908948,"body_markdown":"The source of this error on my Apache 2.4 instance (using a Comodo wildcard certificate) was an incomplete path to the SHA-1 signed root certificate. There were multiple chains in the issued certificate, and the chain leading to a SHA-1 root certificate was missing an [intermediate certificate]. Modern browsers know how to handle this, but Java 7 doesn&#39;t handle it by default (although there are some convoluted ways to accomplish this in code). The result is error messages that look identical to the case of self-signed certificates:\r\n\r\n    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    \tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:196)\r\n    \tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:268)\r\n    \tat sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:380)\r\n    \t... 22 more\r\n\r\n\r\nIn this case, the &quot;unable to find valid certification path to requested target&quot; message is being produced due to the missing intermediate certificate. You can check which certificate is missing using [SSL Labs] test against the server. Once you find the appropriate certificate, download it and (if the server is under your control) add it to the certificate bundle. Alternatively, you can import the missing certificate locally. Accommodating this issue on the server is a more general solution to the problem.\r\n\r\n[intermediate certificate]:  https://support.comodo.com/index.php?/Default/Knowledgebase/Article/View/966/108/intermediate-1-sha-2-comodo-rsa-certification-authority\r\n[SSL Labs]: https://www.ssllabs.com/ssltest/\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>The source of this error on my Apache 2.4 instance (using a Comodo wildcard certificate) was an incomplete path to the SHA-1 signed root certificate. There were multiple chains in the issued certificate, and the chain leading to a SHA-1 root certificate was missing an <a href=\"https://support.comodo.com/index.php?/Default/Knowledgebase/Article/View/966/108/intermediate-1-sha-2-comodo-rsa-certification-authority\" rel=\"noreferrer\">intermediate certificate</a>. Modern browsers know how to handle this, but Java 7 doesn't handle it by default (although there are some convoluted ways to accomplish this in code). The result is error messages that look identical to the case of self-signed certificates:</p>\n\n<pre><code>Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:196)\n    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:268)\n    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:380)\n    ... 22 more\n</code></pre>\n\n<p>In this case, the \"unable to find valid certification path to requested target\" message is being produced due to the missing intermediate certificate. You can check which certificate is missing using <a href=\"https://www.ssllabs.com/ssltest/\" rel=\"noreferrer\">SSL Labs</a> test against the server. Once you find the appropriate certificate, download it and (if the server is under your control) add it to the certificate bundle. Alternatively, you can import the missing certificate locally. Accommodating this issue on the server is a more general solution to the problem.</p>\n"},{"tags":[],"owner":{"account_id":286974,"reputation":3435,"user_id":586522,"display_name":"bhdrk"},"down_vote_count":2,"up_vote_count":40,"is_accepted":false,"score":38,"last_activity_date":1435652702,"creation_date":1435652702,"answer_id":31133183,"question_id":6908948,"body_markdown":"@Gabe Martin-Dempesy&#39;s answer is helped to me. And I wrote a small script related to it. The usage is very simple.\r\n\r\nInstall a certificate from host: \r\n\r\n    &gt; sudo ./java-cert-importer.sh example.com\r\n\r\nRemove the certificate that installed already.\r\n\r\n    &gt; sudo ./java-cert-importer.sh example.com --delete\r\n\r\n**java-cert-importer.sh**\r\n\r\n&lt;!-- language: lang-bash --&gt;\r\n\r\n    #!/usr/bin/env bash\r\n    \r\n    # Exit on error\r\n    set -e\r\n    \r\n    # Ensure script is running as root\r\n    if [ &quot;$EUID&quot; -ne 0 ]\r\n      then echo &quot;WARN: Please run as root (sudo)&quot;\r\n      exit 1\r\n    fi\r\n    \r\n    # Check required commands\r\n    command -v openssl &gt;/dev/null 2&gt;&amp;1 || { echo &quot;Required command &#39;openssl&#39; not installed. Aborting.&quot; &gt;&amp;2; exit 1; }\r\n    command -v keytool &gt;/dev/null 2&gt;&amp;1 || { echo &quot;Required command &#39;keytool&#39; not installed. Aborting.&quot; &gt;&amp;2; exit 1; }\r\n    \r\n    # Get command line args\r\n    host=$1; port=${2:-443}; deleteCmd=${3:-${2}}\r\n    \r\n    # Check host argument\r\n    if [ ! ${host} ]; then\r\n    cat &lt;&lt; EOF\r\n    Please enter required parameter(s)\r\n    \r\n    usage:  ./java-cert-importer.sh &lt;host&gt; [ &lt;port&gt; | default=443 ] [ -d | --delete ]\r\n    \r\n    EOF\r\n    exit 1\r\n    fi;\r\n    \r\n    if [ &quot;$JAVA_HOME&quot; ]; then\r\n        javahome=${JAVA_HOME}\r\n    elif [[ &quot;$OSTYPE&quot; == &quot;linux-gnu&quot; ]]; then # Linux\r\n        javahome=$(readlink -f $(which java) | sed &quot;s:bin/java::&quot;)\r\n    elif [[ &quot;$OSTYPE&quot; == &quot;darwin&quot;* ]]; then # Mac OS X\r\n        javahome=&quot;$(/usr/libexec/java_home)/jre&quot;\r\n    fi\r\n    \r\n    if [ ! &quot;$javahome&quot; ]; then\r\n        echo &quot;WARN: Java home cannot be found.&quot;\r\n        exit 1\r\n    elif [ ! -d &quot;$javahome&quot; ]; then\r\n        echo &quot;WARN: Detected Java home does not exists: $javahome&quot;\r\n        exit 1\r\n    fi\r\n    \r\n    echo &quot;Detected Java Home: $javahome&quot;\r\n    \r\n    # Set cacerts file path\r\n    cacertspath=${javahome}/lib/security/cacerts\r\n    cacertsbackup=&quot;${cacertspath}.$$.backup&quot;\r\n    \r\n    if ( [ &quot;$deleteCmd&quot; == &quot;-d&quot; ] || [ &quot;$deleteCmd&quot; == &quot;--delete&quot; ] ); then\r\n        sudo keytool -delete -alias ${host} -keystore ${cacertspath} -storepass changeit\r\n        echo &quot;Certificate is deleted for ${host}&quot;\r\n        exit 0\r\n    fi\r\n    \r\n    # Get host info from user\r\n    #read -p &quot;Enter server host (E.g. example.com) : &quot; host\r\n    #read -p &quot;Enter server port (Default 443) : &quot; port\r\n    \r\n    # create temp file\r\n    tmpfile=&quot;/tmp/${host}.$$.crt&quot;\r\n    \r\n    # Create java cacerts backup file\r\n    cp ${cacertspath} ${cacertsbackup}\r\n    \r\n    echo &quot;Java CaCerts Backup: ${cacertsbackup}&quot;\r\n    \r\n    # Get certificate from speficied host\r\n    openssl x509 -in &lt;(openssl s_client -connect ${host}:${port} -prexit 2&gt;/dev/null) -out ${tmpfile}\r\n    \r\n    # Import certificate into java cacerts file\r\n    sudo keytool -importcert -file ${tmpfile} -alias ${host} -keystore ${cacertspath} -storepass changeit\r\n    \r\n    # Remove temp certificate file\r\n    rm ${tmpfile}\r\n    \r\n    # Check certificate alias name (same with host) that imported successfully\r\n    result=$(keytool -list -v -keystore ${cacertspath} -storepass changeit | grep &quot;Alias name: ${host}&quot;)\r\n    \r\n    # Show results to user\r\n    if [ &quot;$result&quot; ]; then\r\n        echo &quot;Success: Certificate is imported to java cacerts for ${host}&quot;;\r\n    else\r\n        echo &quot;Error: Something went wrong&quot;;\r\n    fi;\r\n\r\n\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>@Gabe Martin-Dempesy's answer is helped to me. And I wrote a small script related to it. The usage is very simple.</p>\n\n<p>Install a certificate from host: </p>\n\n<pre><code>&gt; sudo ./java-cert-importer.sh example.com\n</code></pre>\n\n<p>Remove the certificate that installed already.</p>\n\n<pre><code>&gt; sudo ./java-cert-importer.sh example.com --delete\n</code></pre>\n\n<p><strong>java-cert-importer.sh</strong></p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>#!/usr/bin/env bash\n\n# Exit on error\nset -e\n\n# Ensure script is running as root\nif [ \"$EUID\" -ne 0 ]\n  then echo \"WARN: Please run as root (sudo)\"\n  exit 1\nfi\n\n# Check required commands\ncommand -v openssl &gt;/dev/null 2&gt;&amp;1 || { echo \"Required command 'openssl' not installed. Aborting.\" &gt;&amp;2; exit 1; }\ncommand -v keytool &gt;/dev/null 2&gt;&amp;1 || { echo \"Required command 'keytool' not installed. Aborting.\" &gt;&amp;2; exit 1; }\n\n# Get command line args\nhost=$1; port=${2:-443}; deleteCmd=${3:-${2}}\n\n# Check host argument\nif [ ! ${host} ]; then\ncat &lt;&lt; EOF\nPlease enter required parameter(s)\n\nusage:  ./java-cert-importer.sh &lt;host&gt; [ &lt;port&gt; | default=443 ] [ -d | --delete ]\n\nEOF\nexit 1\nfi;\n\nif [ \"$JAVA_HOME\" ]; then\n    javahome=${JAVA_HOME}\nelif [[ \"$OSTYPE\" == \"linux-gnu\" ]]; then # Linux\n    javahome=$(readlink -f $(which java) | sed \"s:bin/java::\")\nelif [[ \"$OSTYPE\" == \"darwin\"* ]]; then # Mac OS X\n    javahome=\"$(/usr/libexec/java_home)/jre\"\nfi\n\nif [ ! \"$javahome\" ]; then\n    echo \"WARN: Java home cannot be found.\"\n    exit 1\nelif [ ! -d \"$javahome\" ]; then\n    echo \"WARN: Detected Java home does not exists: $javahome\"\n    exit 1\nfi\n\necho \"Detected Java Home: $javahome\"\n\n# Set cacerts file path\ncacertspath=${javahome}/lib/security/cacerts\ncacertsbackup=\"${cacertspath}.$$.backup\"\n\nif ( [ \"$deleteCmd\" == \"-d\" ] || [ \"$deleteCmd\" == \"--delete\" ] ); then\n    sudo keytool -delete -alias ${host} -keystore ${cacertspath} -storepass changeit\n    echo \"Certificate is deleted for ${host}\"\n    exit 0\nfi\n\n# Get host info from user\n#read -p \"Enter server host (E.g. example.com) : \" host\n#read -p \"Enter server port (Default 443) : \" port\n\n# create temp file\ntmpfile=\"/tmp/${host}.$$.crt\"\n\n# Create java cacerts backup file\ncp ${cacertspath} ${cacertsbackup}\n\necho \"Java CaCerts Backup: ${cacertsbackup}\"\n\n# Get certificate from speficied host\nopenssl x509 -in &lt;(openssl s_client -connect ${host}:${port} -prexit 2&gt;/dev/null) -out ${tmpfile}\n\n# Import certificate into java cacerts file\nsudo keytool -importcert -file ${tmpfile} -alias ${host} -keystore ${cacertspath} -storepass changeit\n\n# Remove temp certificate file\nrm ${tmpfile}\n\n# Check certificate alias name (same with host) that imported successfully\nresult=$(keytool -list -v -keystore ${cacertspath} -storepass changeit | grep \"Alias name: ${host}\")\n\n# Show results to user\nif [ \"$result\" ]; then\n    echo \"Success: Certificate is imported to java cacerts for ${host}\";\nelse\n    echo \"Error: Something went wrong\";\nfi;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":962425,"reputation":1531,"user_id":986485,"accept_rate":14,"display_name":"Radu Toader"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1631710265,"creation_date":1445842506,"answer_id":33340004,"question_id":6908948,"body_markdown":"I had the same problem with the certificates error and it was because of SNI: the http client that I used didn&#39;t have SNI implemented. So a version update did the job\r\n\r\n\r\n       &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.3.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>I had the same problem with the certificates error and it was because of SNI: the http client that I used didn't have SNI implemented. So a version update did the job</p>\n<pre><code>   &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.3.6&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2572556,"reputation":728,"user_id":2230891,"display_name":"Pradip Das"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461210309,"creation_date":1461210309,"answer_id":36759261,"question_id":6908948,"body_markdown":"You have two options, import the self-signed cert into java&#39;s keystore for each jvm the software will run on or try the non-validating ssl factory:\r\n\r\n    jdbc:postgresql://myserver.com:5432/mydatabasename?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>You have two options, import the self-signed cert into java's keystore for each jvm the software will run on or try the non-validating ssl factory:</p>\n\n<pre><code>jdbc:postgresql://myserver.com:5432/mydatabasename?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3269823,"reputation":388,"user_id":2753436,"display_name":"Praveen"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1515334077,"creation_date":1479467238,"answer_id":40675542,"question_id":6908948,"body_markdown":"For Windows only, follow these steps:\r\n\r\n 1. In Chrome go to settings.  \r\n 1. In Settings click show advance settings.  \r\n 1. Under HTTPS/SSL Click on Manage Certificates.  \r\n 1. Export Your Certificate.  \r\n 1. In Windows searchs (Pressing windows key on keyboard) type java.  \r\n 1. Select (Configure Java) Option Which will open Java Control Panel  \r\n 1. Select Security tab in Java Control Panel  \r\n 1. Select Manage Certificates  \r\n 1. Click Import  \r\n 1. Under (User) tab selected and certificate type as (Trusted Certificates)  \r\n 1. Click import button and browse to downloaded certificate and import it.\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>For Windows only, follow these steps:</p>\n\n<ol>\n<li>In Chrome go to settings.  </li>\n<li>In Settings click show advance settings.  </li>\n<li>Under HTTPS/SSL Click on Manage Certificates.  </li>\n<li>Export Your Certificate.  </li>\n<li>In Windows searchs (Pressing windows key on keyboard) type java.  </li>\n<li>Select (Configure Java) Option Which will open Java Control Panel  </li>\n<li>Select Security tab in Java Control Panel  </li>\n<li>Select Manage Certificates  </li>\n<li>Click Import  </li>\n<li>Under (User) tab selected and certificate type as (Trusted Certificates)  </li>\n<li>Click import button and browse to downloaded certificate and import it.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2584196,"reputation":1380,"user_id":2240274,"accept_rate":86,"display_name":"StaticNoiseLog"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1487087487,"creation_date":1486647132,"answer_id":42138073,"question_id":6908948,"body_markdown":"**UPDATE:** That a reboot helped was coincidental (I hoped so, hooray!). The real cause of the problem was this: When Gradle is directed to use a specific  keystore, that keystore must also contain all the official root certificates. Otherwise it cannot access libraries from regular repositories. What I had to do was this:\r\n\r\nImport the self-signed certificate:\r\n\r\n    keytool -import -trustcacerts -alias myselfsignedcert -file /Users/me/Desktop/selfsignedcert.crt -keystore ./privateKeystore.jks\r\n\r\nAdd the official root certificates:\r\n\r\n    keytool -importkeystore -srckeystore &lt;java-home&gt;/lib/security/cacerts -destkeystore ./privateKeystore.jks\r\n\r\nMaybe the Gradle daemon also got in the way. Might be worth killing all running daemons found with `./gradlew --status` if things start looking bleak.\r\n\r\n**ORIGINAL POSTING:**\r\n\r\nNobody will believe this, I know. Still, if all else fails, give it a try:\r\nAfter a **reboot** of my Mac the problem was gone. Grrr.\r\n\r\nBackground:\r\n./gradlew jar kept giving me &quot;unable to find valid certification path to requested target&quot;\r\n\r\nI am stuck with a self-signed certificate, saved from browser, imported in privateKeystore.jks. Then instructed Gradle to work with privateKeystore.jks:\r\n\r\n    org.gradle.jvmargs=-Djavax.net.debug=SSL -Djavax.net.ssl.trustStore=&quot;/Users/me/IntelliJ/myproject/privateKeystore.jks&quot;  -Djavax.net.ssl.trustStorePassword=changeit\r\n\r\nAs mentioned, this only worked after a reboot.","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p><strong>UPDATE:</strong> That a reboot helped was coincidental (I hoped so, hooray!). The real cause of the problem was this: When Gradle is directed to use a specific  keystore, that keystore must also contain all the official root certificates. Otherwise it cannot access libraries from regular repositories. What I had to do was this:</p>\n\n<p>Import the self-signed certificate:</p>\n\n<pre><code>keytool -import -trustcacerts -alias myselfsignedcert -file /Users/me/Desktop/selfsignedcert.crt -keystore ./privateKeystore.jks\n</code></pre>\n\n<p>Add the official root certificates:</p>\n\n<pre><code>keytool -importkeystore -srckeystore &lt;java-home&gt;/lib/security/cacerts -destkeystore ./privateKeystore.jks\n</code></pre>\n\n<p>Maybe the Gradle daemon also got in the way. Might be worth killing all running daemons found with <code>./gradlew --status</code> if things start looking bleak.</p>\n\n<p><strong>ORIGINAL POSTING:</strong></p>\n\n<p>Nobody will believe this, I know. Still, if all else fails, give it a try:\nAfter a <strong>reboot</strong> of my Mac the problem was gone. Grrr.</p>\n\n<p>Background:\n./gradlew jar kept giving me \"unable to find valid certification path to requested target\"</p>\n\n<p>I am stuck with a self-signed certificate, saved from browser, imported in privateKeystore.jks. Then instructed Gradle to work with privateKeystore.jks:</p>\n\n<pre><code>org.gradle.jvmargs=-Djavax.net.debug=SSL -Djavax.net.ssl.trustStore=\"/Users/me/IntelliJ/myproject/privateKeystore.jks\"  -Djavax.net.ssl.trustStorePassword=changeit\n</code></pre>\n\n<p>As mentioned, this only worked after a reboot.</p>\n"},{"tags":[],"owner":{"account_id":7493596,"reputation":548,"user_id":5694523,"accept_rate":60,"display_name":"Insoft"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1519370654,"creation_date":1519315586,"answer_id":48932009,"question_id":6908948,"body_markdown":"AVG version 18.1.3044 (with Windows 10) interfer with my local Spring application. \r\n\r\n**Solution:** enter in AVG section called &quot;Web and email&quot; and disable the &quot;email protection&quot;.\r\nAVG block the certificate if the site isn&#39;t secure.","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>AVG version 18.1.3044 (with Windows 10) interfer with my local Spring application. </p>\n\n<p><strong>Solution:</strong> enter in AVG section called \"Web and email\" and disable the \"email protection\".\nAVG block the certificate if the site isn't secure.</p>\n"},{"tags":[],"owner":{"account_id":2531638,"reputation":360,"user_id":2199826,"display_name":"Naveen"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1580892524,"creation_date":1531133027,"answer_id":51243676,"question_id":6908948,"body_markdown":"This solved my issue,\r\n\r\nWe need to import the cert onto the local java. If not we could get the below exception.\r\n\r\n&lt;pre&gt;\r\n    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\t    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\r\n\t    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1949)\r\n\t    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:302)\r\n&lt;/pre&gt;\r\n\r\n[SSLPOKE][1] is a tool where you can test the https connectivity from your local machine.\r\n\r\nCommand to test the connectivity:\r\n\r\n    &quot;%JAVA_HOME%/bin/java&quot; SSLPoke &lt;hostname&gt; 443\r\n\r\n&lt;pre&gt;\r\n    sun.security.validator.ValidatorException: PKIX path building failed: \r\n    sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)\r\n        at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)\r\n        at sun.security.validator.Validator.validate(Validator.java:260)\r\n        at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)\r\n        at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:229)\r\n        at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:124)\r\n        at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1496)\r\n        at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)\r\n        at sun.security.ssl.Handshaker.processLoop(Handshaker.java:1026)\r\n        at sun.security.ssl.Handshaker.process_record(Handshaker.java:961)\r\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1062)\r\n        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\r\n        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:747)\r\n        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\r\n        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:138)\r\n        at SSLPoke.main(SSLPoke.java:31)\r\n    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to \r\n    requested target\r\n        at sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\r\n        at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\r\n        at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)\r\n        at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)\r\n        ... 15 more\r\n&lt;/pre&gt;\r\n\r\n    keytool -import -alias &lt;anyname&gt; -keystore &quot;%JAVA_HOME%/jre/lib/security/cacerts&quot; -file &lt;cert path&gt;\r\n\r\n\r\nthis would first prompt to &quot;Enter keystore password:&quot; **`changeit`** is the default password. and finally a prompt &quot;Trust this certificate? [no]:&quot;, provide &quot;yes&quot; to add the cert to keystore.\r\n\r\n\r\n**Verfication:**\r\n\r\n\r\n    C:\\tools&gt;&quot;%JAVA_HOME%/bin/java&quot; SSLPoke &lt;hostname&gt; 443\r\n    Successfully connected    \r\n\r\n  [1]: https://confluence.atlassian.com/kb/files/779355358/779355357/1/1441897666313/SSLPoke.class","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>This solved my issue,</p>\n\n<p>We need to import the cert onto the local java. If not we could get the below exception.</p>\n\n<pre>\n    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n        at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1949)\n        at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:302)\n</pre>\n\n<p><a href=\"https://confluence.atlassian.com/kb/files/779355358/779355357/1/1441897666313/SSLPoke.class\" rel=\"noreferrer\">SSLPOKE</a> is a tool where you can test the https connectivity from your local machine.</p>\n\n<p>Command to test the connectivity:</p>\n\n<pre><code>\"%JAVA_HOME%/bin/java\" SSLPoke &lt;hostname&gt; 443\n</code></pre>\n\n<pre>\n    sun.security.validator.ValidatorException: PKIX path building failed: \n    sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:387)\n        at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)\n        at sun.security.validator.Validator.validate(Validator.java:260)\n        at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:324)\n        at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:229)\n        at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:124)\n        at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1496)\n        at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)\n        at sun.security.ssl.Handshaker.processLoop(Handshaker.java:1026)\n        at sun.security.ssl.Handshaker.process_record(Handshaker.java:961)\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1062)\n        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\n        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:747)\n        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\n        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:138)\n        at SSLPoke.main(SSLPoke.java:31)\n    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to \n    requested target\n        at sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\n        at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\n        at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:280)\n        at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:382)\n        ... 15 more\n</pre>\n\n<pre><code>keytool -import -alias &lt;anyname&gt; -keystore \"%JAVA_HOME%/jre/lib/security/cacerts\" -file &lt;cert path&gt;\n</code></pre>\n\n<p>this would first prompt to \"Enter keystore password:\" <strong><code>changeit</code></strong> is the default password. and finally a prompt \"Trust this certificate? [no]:\", provide \"yes\" to add the cert to keystore.</p>\n\n<p><strong>Verfication:</strong></p>\n\n<pre><code>C:\\tools&gt;\"%JAVA_HOME%/bin/java\" SSLPoke &lt;hostname&gt; 443\nSuccessfully connected    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":13205453,"reputation":1,"user_id":9537373,"display_name":"Alan Curtis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531859194,"creation_date":1531859194,"answer_id":51389684,"question_id":6908948,"body_markdown":"In my case I&#39;m running MacOs High Sierra with Java 1.6. The cacert file is in a different location than referenced above in Gabe Martin-Dempesy&#39;s answer. The cacert file was also already linked to another location (/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/security/cacerts). \r\n\r\nUsing FireFox, I exported the certificate from the web site in question to a local file called &quot;exportedCertFile.crt&quot;. From there, I used keytool to move the certificate into the cacert file. This fixed the problem.\r\n\r\n    bash-3.2# cd /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/security/\r\n    bash-3.2# keytool -importcert -file ~/exportedCertFile.crt -alias example -keystore cacerts -storepass changeit","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>In my case I'm running MacOs High Sierra with Java 1.6. The cacert file is in a different location than referenced above in Gabe Martin-Dempesy's answer. The cacert file was also already linked to another location (/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/lib/security/cacerts). </p>\n\n<p>Using FireFox, I exported the certificate from the web site in question to a local file called \"exportedCertFile.crt\". From there, I used keytool to move the certificate into the cacert file. This fixed the problem.</p>\n\n<pre><code>bash-3.2# cd /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/security/\nbash-3.2# keytool -importcert -file ~/exportedCertFile.crt -alias example -keystore cacerts -storepass changeit\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534847285,"creation_date":1534847285,"answer_id":51946655,"question_id":6908948,"body_markdown":"first Download the ssl certificate then you can go to your java bin path execute the below command in the console.\r\n\r\n    C:\\java\\JDK1.8.0_66-X64\\bin&gt;keytool -printcert -file C:\\Users\\lova\\openapi.cer -keystore openapistore","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>first Download the ssl certificate then you can go to your java bin path execute the below command in the console.</p>\n\n<pre><code>C:\\java\\JDK1.8.0_66-X64\\bin&gt;keytool -printcert -file C:\\Users\\lova\\openapi.cer -keystore openapistore\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9121738,"reputation":2096,"user_id":6786941,"accept_rate":69,"display_name":"Amr Ibrahim"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1537783082,"creation_date":1537783082,"answer_id":52476790,"question_id":6908948,"body_markdown":"Make sure that the https://176.66.3.69:6443/ have a valid certificate.\r\nyou can check it via browser firstly [![https not secure][1]][1] if it works in browser it will work in java.\r\n\r\nthat is working for me\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RYLoe.png","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>Make sure that the <a href=\"https://176.66.3.69:6443/\" rel=\"nofollow noreferrer\">https://176.66.3.69:6443/</a> have a valid certificate.\nyou can check it via browser firstly <a href=\"https://i.stack.imgur.com/RYLoe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RYLoe.png\" alt=\"https not secure\"></a> if it works in browser it will work in java.</p>\n\n<p>that is working for me</p>\n"},{"tags":[],"owner":{"account_id":3124728,"reputation":1564,"user_id":2643815,"display_name":"Smart Coder"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1558019787,"creation_date":1558019787,"answer_id":56171785,"question_id":6908948,"body_markdown":"In my case I had both keystore and truststore having the same certificate so removing truststore helped. Sometimes the chain of certificates can be an issue if you&#39;ve multiple copies of certificates.","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>In my case I had both keystore and truststore having the same certificate so removing truststore helped. Sometimes the chain of certificates can be an issue if you've multiple copies of certificates.</p>\n"},{"tags":[],"owner":{"account_id":954960,"reputation":13272,"user_id":980442,"accept_rate":25,"display_name":"Daniel De Le&#243;n"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1578265190,"creation_date":1578186007,"answer_id":59596185,"question_id":6908948,"body_markdown":"There is a lot of way to solve this...\r\n\r\nOne way is set the TrustStore certificates in a keystore file and put it in the path of the application, and set these system properties in the main method:\r\n\r\n    public static void main(String[] args) {\r\n      System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;trust-store.jks&quot;);\r\n      System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;TrustStore&quot;);\r\n      ...\r\n    }\r\n\r\nOther way is place the keystore as resource file inside the project jar file and load it:\r\n\r\n\r\n    public static SSLContext createSSLContext(String resourcePath, String pass) throws NoSuchAlgorithmException, KeyStoreException, IOException, CertificateException, UnrecoverableKeyException, KeyManagementException {\r\n      // initialise the keystore\r\n      final char[] password = pass.toCharArray();\r\n      KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n      ks.load(ThisClass.class.getResourceAsStream(resourcePath\r\n      ), password);\r\n\r\n      // Setup the key manager factory.\r\n      KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n      kmf.init(ks, password);\r\n\r\n      // Setup the trust manager factory.\r\n      TrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n      tmf.init(ks);\r\n\r\n      SSLContext sslc = SSLContext.getInstance(&quot;TLS&quot;);\r\n      sslc.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\r\n      return sslc;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n      SSLContext.setDefault(\r\n        createSSLContext(&quot;/trust-store.jks&quot;, &quot;TrustStore&quot;));\r\n      ...\r\n    }\r\n\r\n\r\nIn windows you can try this solution too: https://stackoverflow.com/a/59056537/980442\r\n\r\n----------\r\n\r\nI created the keystore file from a Certificate authority CA `.crt` file in this way:\r\n\r\n    keytool -import -alias ca -keystore trust-store.jks -storepass TrustStore -trustcacerts -file ca.crt\r\n\r\n\r\nFYI: https://docs.oracle.com/javadb/10.8.3.0/adminguide/cadminsslclient.html\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>There is a lot of way to solve this...</p>\n\n<p>One way is set the TrustStore certificates in a keystore file and put it in the path of the application, and set these system properties in the main method:</p>\n\n<pre><code>public static void main(String[] args) {\n  System.setProperty(\"javax.net.ssl.trustStore\", \"trust-store.jks\");\n  System.setProperty(\"javax.net.ssl.trustStorePassword\", \"TrustStore\");\n  ...\n}\n</code></pre>\n\n<p>Other way is place the keystore as resource file inside the project jar file and load it:</p>\n\n<pre><code>public static SSLContext createSSLContext(String resourcePath, String pass) throws NoSuchAlgorithmException, KeyStoreException, IOException, CertificateException, UnrecoverableKeyException, KeyManagementException {\n  // initialise the keystore\n  final char[] password = pass.toCharArray();\n  KeyStore ks = KeyStore.getInstance(\"JKS\");\n  ks.load(ThisClass.class.getResourceAsStream(resourcePath\n  ), password);\n\n  // Setup the key manager factory.\n  KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n  kmf.init(ks, password);\n\n  // Setup the trust manager factory.\n  TrustManagerFactory tmf = TrustManagerFactory.getInstance(\"SunX509\");\n  tmf.init(ks);\n\n  SSLContext sslc = SSLContext.getInstance(\"TLS\");\n  sslc.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\n  return sslc;\n}\n\npublic static void main(String[] args) {\n  SSLContext.setDefault(\n    createSSLContext(\"/trust-store.jks\", \"TrustStore\"));\n  ...\n}\n</code></pre>\n\n<p>In windows you can try this solution too: <a href=\"https://stackoverflow.com/a/59056537/980442\">https://stackoverflow.com/a/59056537/980442</a></p>\n\n<hr>\n\n<p>I created the keystore file from a Certificate authority CA <code>.crt</code> file in this way:</p>\n\n<pre><code>keytool -import -alias ca -keystore trust-store.jks -storepass TrustStore -trustcacerts -file ca.crt\n</code></pre>\n\n<p>FYI: <a href=\"https://docs.oracle.com/javadb/10.8.3.0/adminguide/cadminsslclient.html\" rel=\"noreferrer\">https://docs.oracle.com/javadb/10.8.3.0/adminguide/cadminsslclient.html</a></p>\n"},{"tags":[],"owner":{"account_id":7129527,"reputation":349,"user_id":5451312,"display_name":"Lalaphoon"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1583983822,"creation_date":1583977680,"answer_id":60646583,"question_id":6908948,"body_markdown":"Had the issue like this image.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u1N1A.png\r\n\r\nTried a few solutions.\r\nBut found that even if it&#39;s same project, when it&#39;s on other one&#39;s working place, it&#39;s totally fine. No extra settings needed. So we guessed it&#39;s an enviroment issue. We tried changing JDK version, IDE but didn&#39;t work. it took about 4 hours for investigation, until we tried the top-rated answer. I didn&#39;t find the error mentioned in that answer but I found via my browser about HTTP URL (lock) that there was a certification of Charles. Then I realized my charles was on all the time. As long as I turned that off, it&#39;s working all fine.\r\n\r\nSo I left my experience that could be helpful for your case.","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>Had the issue like this image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/u1N1A.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/u1N1A.png\" alt=\"enter image description here\"></a></p>\n\n<p>Tried a few solutions.\nBut found that even if it's same project, when it's on other one's working place, it's totally fine. No extra settings needed. So we guessed it's an enviroment issue. We tried changing JDK version, IDE but didn't work. it took about 4 hours for investigation, until we tried the top-rated answer. I didn't find the error mentioned in that answer but I found via my browser about HTTP URL (lock) that there was a certification of Charles. Then I realized my charles was on all the time. As long as I turned that off, it's working all fine.</p>\n\n<p>So I left my experience that could be helpful for your case.</p>\n"},{"tags":[],"owner":{"account_id":7361010,"reputation":185,"user_id":5604291,"display_name":"VicXj"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1602238818,"creation_date":1602238818,"answer_id":64278122,"question_id":6908948,"body_markdown":"**Simple Steps that I followed.**\r\n\r\n***problem:*** I was trying to connect to an endpoint(https://%s.blob.core.windows.net) using a simple java class(main method).\r\n\r\nSo I was getting this certification issue as mentioned above, in the question.\r\n\r\n***Solution:***\r\n1. Get the certificate using a browser(chrome). To do this paste your endpoint URL in the browser and enter. Now you will see a lock icon, click on that --&gt;certificate--&gt; details --&gt; copy to files--&gt; download it.\r\n\r\n2. open the cmd(i am using windows) as admin and then navigate to the directory where you have downloaded the .cer file.\r\n\r\n3.(Optional)If you are using multiple JDK in the same machine then change your JDK version the same as you are using in your application.\r\n\r\n4. Now use the below command \r\n\r\n&gt; keytool -import -alias mycertificate -keystore &quot;C:\\Program\r\n&gt; Files\\Java\\jdk-11.0.5\\lib\\security\\cacerts&quot; -file myurlcrt.cer\r\n\r\n5. Give the default password: *changeit*\r\n\r\n6. Trust this certificate: yes\r\n\r\nAnd you are done.\r\n\r\nThanks!","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p><strong>Simple Steps that I followed.</strong></p>\n<p><em><strong>problem:</strong></em> I was trying to connect to an endpoint(https://%s.blob.core.windows.net) using a simple java class(main method).</p>\n<p>So I was getting this certification issue as mentioned above, in the question.</p>\n<p><em><strong>Solution:</strong></em></p>\n<ol>\n<li><p>Get the certificate using a browser(chrome). To do this paste your endpoint URL in the browser and enter. Now you will see a lock icon, click on that --&gt;certificate--&gt; details --&gt; copy to files--&gt; download it.</p>\n</li>\n<li><p>open the cmd(i am using windows) as admin and then navigate to the directory where you have downloaded the .cer file.</p>\n</li>\n</ol>\n<p>3.(Optional)If you are using multiple JDK in the same machine then change your JDK version the same as you are using in your application.</p>\n<ol start=\"4\">\n<li>Now use the below command</li>\n</ol>\n<blockquote>\n<p>keytool -import -alias mycertificate -keystore &quot;C:\\Program\nFiles\\Java\\jdk-11.0.5\\lib\\security\\cacerts&quot; -file myurlcrt.cer</p>\n</blockquote>\n<ol start=\"5\">\n<li><p>Give the default password: <em>changeit</em></p>\n</li>\n<li><p>Trust this certificate: yes</p>\n</li>\n</ol>\n<p>And you are done.</p>\n<p>Thanks!</p>\n"},{"tags":[],"owner":{"account_id":351991,"reputation":2353,"user_id":688820,"accept_rate":50,"display_name":"Marek Manduch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611578170,"creation_date":1611578170,"answer_id":65884920,"question_id":6908948,"body_markdown":"As original question was - how to ignore the cert error, here is solution for those using SpringBoot and RestTemplate \r\n\r\n\r\n    @Service\r\n    public class SomeService {\r\n    \r\n        private final RestTemplate restTemplate;\r\n    \r\n        private final ObjectMapper objectMapper;    \r\n    \r\n        private static HttpComponentsClientHttpRequestFactory createRequestFactory() {\r\n            try {\r\n                SSLContextBuilder sslContext = new SSLContextBuilder();\r\n                sslContext.loadTrustMaterial(null, new TrustAllStrategy());\r\n                CloseableHttpClient client = HttpClients.custom().setSSLContext(sslContext.build()).setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).build();\r\n                HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\r\n                requestFactory.setHttpClient(client);\r\n                return requestFactory;\r\n            } catch (KeyManagementException | KeyStoreException | NoSuchAlgorithmException var3) {\r\n                throw new IllegalStateException(&quot;Couldn&#39;t create HTTP Request factory ignore SSL cert validity: &quot;, var3);\r\n            }\r\n        }\r\n    \r\n        @Autowired\r\n        public SomeService(RestTemplate restTemplate, ObjectMapper objectMapper) {\r\n            this.objectMapper = objectMapper;\r\n            this.dimetorURL = dimetorURL;\r\n            restTemplate.setRequestFactory(createRequestFactory());\r\n        }\r\n\r\n\r\n        public ResponseEntity&lt;ResponseObject&gt; sendRequest(RequestObject requestObject) {\r\n            //...\r\n            return restTemplate.exchange(url, HttpMethod.GET, ResponseObject.class);\r\n            //...\r\n        }\r\n    }\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>As original question was - how to ignore the cert error, here is solution for those using SpringBoot and RestTemplate</p>\n<pre><code>@Service\npublic class SomeService {\n\n    private final RestTemplate restTemplate;\n\n    private final ObjectMapper objectMapper;    \n\n    private static HttpComponentsClientHttpRequestFactory createRequestFactory() {\n        try {\n            SSLContextBuilder sslContext = new SSLContextBuilder();\n            sslContext.loadTrustMaterial(null, new TrustAllStrategy());\n            CloseableHttpClient client = HttpClients.custom().setSSLContext(sslContext.build()).setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).build();\n            HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\n            requestFactory.setHttpClient(client);\n            return requestFactory;\n        } catch (KeyManagementException | KeyStoreException | NoSuchAlgorithmException var3) {\n            throw new IllegalStateException(&quot;Couldn't create HTTP Request factory ignore SSL cert validity: &quot;, var3);\n        }\n    }\n\n    @Autowired\n    public SomeService(RestTemplate restTemplate, ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n        this.dimetorURL = dimetorURL;\n        restTemplate.setRequestFactory(createRequestFactory());\n    }\n\n\n    public ResponseEntity&lt;ResponseObject&gt; sendRequest(RequestObject requestObject) {\n        //...\n        return restTemplate.exchange(url, HttpMethod.GET, ResponseObject.class);\n        //...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11924446,"reputation":148,"user_id":8726139,"display_name":"Bastien Gallienne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624363207,"creation_date":1624362625,"answer_id":68083034,"question_id":6908948,"body_markdown":"If getting this error in maven, or maven with TestNG :\r\n1. download the certificate from the target website and install certificate on your machine (using keytool as suggested above, or on windows)\r\n2. add the following content to the maven arguments (command line and/or IDE):\r\n -Djavax.net.ssl.trustStore=C:\\Users\\me\\.keystore -Djavax.net.ssl.trustStorePassword=X\r\nWhere X is the password you used at the keytool step.\r\n\r\nnote : C:\\Users\\me\\.keystore should also be set to match your machine.\r\nFor instance :\r\n\r\n    mvn -ea -Dtestng.dtd.http=true  -Djavax.net.ssl.trustStore=C:\\Users\\me\\.keystore -Djavax.net.ssl.trustStorePassword=X -Dmaven.wagon.http.ssl.insecure=true -Dmaven.wagon.http.ssl.allowall=true -Dmaven.wagon.http.ssl.ignore.validity.dates=true -Dcucumber.features=src/test/resources -Dcucumber.glue=com.myapp -Dcucumber.filter.tags=&quot;@MY_TEST&quot;\r\n\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>If getting this error in maven, or maven with TestNG :</p>\n<ol>\n<li>download the certificate from the target website and install certificate on your machine (using keytool as suggested above, or on windows)</li>\n<li>add the following content to the maven arguments (command line and/or IDE):\n-Djavax.net.ssl.trustStore=C:\\Users\\me.keystore -Djavax.net.ssl.trustStorePassword=X\nWhere X is the password you used at the keytool step.</li>\n</ol>\n<p>note : C:\\Users\\me.keystore should also be set to match your machine.\nFor instance :</p>\n<pre><code>mvn -ea -Dtestng.dtd.http=true  -Djavax.net.ssl.trustStore=C:\\Users\\me\\.keystore -Djavax.net.ssl.trustStorePassword=X -Dmaven.wagon.http.ssl.insecure=true -Dmaven.wagon.http.ssl.allowall=true -Dmaven.wagon.http.ssl.ignore.validity.dates=true -Dcucumber.features=src/test/resources -Dcucumber.glue=com.myapp -Dcucumber.filter.tags=&quot;@MY_TEST&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4006340,"reputation":1493,"user_id":3300911,"accept_rate":56,"display_name":"raikumardipak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639153125,"creation_date":1639153125,"answer_id":70307479,"question_id":6908948,"body_markdown":"    Download the certificate from Nexus3 Browser (click on the lock-pad for View Site Information in case of Edge broser)\r\n    Click on Connection is secure\r\n    Click on the certificate details\r\n    Click on Copy To file (it opens up export certificate wizard)\r\n    Choose Base-64 encoding\r\n    Browse and select a download location and file-name (let’s say mycert)\r\n    Open cmd\r\n    Goto the download location and execute the below command\r\n    keytool -import -alias mycert -keystore  &quot;&lt;&lt;your-JAVA_HOME-directory&gt;&gt;\\jre\\lib\\security\\cacerts&quot; -file mycert.cer\r\n    Restart the machine\r\n    Execute maven build again.\r\n\r\n","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<pre><code>Download the certificate from Nexus3 Browser (click on the lock-pad for View Site Information in case of Edge broser)\nClick on Connection is secure\nClick on the certificate details\nClick on Copy To file (it opens up export certificate wizard)\nChoose Base-64 encoding\nBrowse and select a download location and file-name (let’s say mycert)\nOpen cmd\nGoto the download location and execute the below command\nkeytool -import -alias mycert -keystore  &quot;&lt;&lt;your-JAVA_HOME-directory&gt;&gt;\\jre\\lib\\security\\cacerts&quot; -file mycert.cer\nRestart the machine\nExecute maven build again.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6319592,"reputation":579,"user_id":4908212,"display_name":"Dorjee Dhondup"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649187240,"creation_date":1649186789,"answer_id":71757380,"question_id":6908948,"body_markdown":"This is what worked for me on macOS. Replace server-name and server-port with your own.\r\n\r\nRun these two commands on your terminal.\r\n\r\n# Download certificate from the remote server \r\n\r\n    openssl x509 -in &lt;(openssl s_client -connect server-name:server-port -prexit 2&gt;/dev/null) -out ~/server-name.crt\r\n\r\n\r\n# Import cert to Java keystore \r\n\r\n    sudo keytool -importcert -file ~/server-name.crt -alias server-name -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass changeit\r\n\r\nRestart your application and the certs errors should go away!","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>This is what worked for me on macOS. Replace server-name and server-port with your own.</p>\n<p>Run these two commands on your terminal.</p>\n<h1>Download certificate from the remote server</h1>\n<pre><code>openssl x509 -in &lt;(openssl s_client -connect server-name:server-port -prexit 2&gt;/dev/null) -out ~/server-name.crt\n</code></pre>\n<h1>Import cert to Java keystore</h1>\n<pre><code>sudo keytool -importcert -file ~/server-name.crt -alias server-name -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass changeit\n</code></pre>\n<p>Restart your application and the certs errors should go away!</p>\n"},{"tags":[],"owner":{"account_id":13919636,"reputation":1002,"user_id":10050431,"display_name":"Fabien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656400561,"creation_date":1656400181,"answer_id":72782084,"question_id":6908948,"body_markdown":"This works on any OS you just need JDK installed :\r\n\r\n 1. Download the certificate from the remote server :\r\n\r\n    &lt;code&gt;keytool -printcert -rfc -sslserver &lt;em&gt;**\\&lt;your remote server hostname\\&gt;**&lt;/em&gt; &gt; /tmp/remorte-cert.crt&lt;/code&gt;\r\n\r\n 2. Import the certificate to your JDK keystore :\r\n\r\n    &lt;code&gt;keytool -importcert -file /tmp/remorte-cert.crt -alias &lt;em&gt;**\\&lt;an alias for your remote server\\&gt;**&lt;/em&gt; -storepass changeit -keystore &quot;${JAVA_HOME}/lib/security/cacerts&quot; -noprompt&lt;/code&gt;","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>This works on any OS you just need JDK installed :</p>\n<ol>\n<li><p>Download the certificate from the remote server :</p>\n<p><code>keytool -printcert -rfc -sslserver <em><strong>&lt;your remote server hostname&gt;</strong></em> &gt; /tmp/remorte-cert.crt</code></p>\n</li>\n<li><p>Import the certificate to your JDK keystore :</p>\n<p><code>keytool -importcert -file /tmp/remorte-cert.crt -alias <em><strong>&lt;an alias for your remote server&gt;</strong></em> -storepass changeit -keystore &quot;${JAVA_HOME}/lib/security/cacerts&quot; -noprompt</code></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7442031,"reputation":3314,"user_id":5659521,"display_name":"Amit Meena"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663254628,"creation_date":1662467452,"answer_id":73622103,"question_id":6908948,"body_markdown":"**And if you are here in 2022 and are on mac follow this**\r\n\r\n**1. Download the certificate.**\r\n\r\n```\r\necho -n | openssl s_client -connect &lt;ServerName&gt;:&lt;PORT&gt; -servername &lt;ServerName&gt; \\\r\n    | openssl x509 &gt; /tmp/&lt;ServerName&gt;.cert\r\n```\r\n\r\n**2. Find your JDK path by executing the command.**\r\n\r\n```\r\n/usr/libexec/java_home\r\n```\r\n\r\n**3. Now import the cert into the cert-store of jdk.**\r\n\r\n```\r\nsudo keytool -import -alias mycertificate -keystore &quot;&lt;JDK_HOME&gt;/lib/security/cacerts&quot; -file /tmp/&lt;ServerName&gt;.cert\r\n```","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p><strong>And if you are here in 2022 and are on mac follow this</strong></p>\n<p><strong>1. Download the certificate.</strong></p>\n<pre><code>echo -n | openssl s_client -connect &lt;ServerName&gt;:&lt;PORT&gt; -servername &lt;ServerName&gt; \\\n    | openssl x509 &gt; /tmp/&lt;ServerName&gt;.cert\n</code></pre>\n<p><strong>2. Find your JDK path by executing the command.</strong></p>\n<pre><code>/usr/libexec/java_home\n</code></pre>\n<p><strong>3. Now import the cert into the cert-store of jdk.</strong></p>\n<pre><code>sudo keytool -import -alias mycertificate -keystore &quot;&lt;JDK_HOME&gt;/lib/security/cacerts&quot; -file /tmp/&lt;ServerName&gt;.cert\n</code></pre>\n"}],"owner":{"account_id":442331,"reputation":4041,"user_id":832897,"accept_rate":50,"display_name":"neztreh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1320845,"favorite_count":0,"down_vote_count":0,"up_vote_count":380,"answer_count":29,"score":380,"last_activity_date":1686832331,"creation_date":1312272270,"question_id":6908948,"body_markdown":"I have a class that will download a file from a **https** server. When I run  it, it returns a lot of errors. It seems that I have a problem with my certificate. Is it possible to ignore the client-server authentication? If so, how?\r\n\r\n    package com.da;\r\n    \r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.nio.CharBuffer;\r\n    import java.util.concurrent.Future;\r\n    \r\n    import org.apache.http.HttpResponse;\r\n    import org.apache.http.client.utils.URIUtils;\r\n    import org.apache.http.impl.nio.client.DefaultHttpAsyncClient;\r\n    import org.apache.http.nio.IOControl;\r\n    import org.apache.http.nio.client.HttpAsyncClient;\r\n    import org.apache.http.nio.client.methods.AsyncCharConsumer;\r\n    import org.apache.http.nio.client.methods.HttpAsyncGet;\r\n    import org.apache.http.nio.client.methods.HttpAsyncPost;\r\n    \r\n    public class RSDDownloadFile {\r\n    \tstatic FileOutputStream fos;\r\n    \r\n    \tpublic void DownloadFile(String URI, String Request) throws Exception\r\n    \t{\r\n    \t\tjava.net.URI uri = URIUtils.createURI(&quot;https&quot;, &quot;176.66.3.69:6443&quot;, -1, &quot;download.aspx&quot;,\r\n    \t\t\t\t&quot;Lang=EN&amp;AuthToken=package&quot;, null);\r\n    \t\tSystem.out.println(&quot;URI Query: &quot; + uri.toString());\r\n    \t\t\r\n    \t\tHttpAsyncClient httpclient = new DefaultHttpAsyncClient();\r\n            httpclient.start();\r\n            try {\r\n                Future&lt;Boolean&gt; future = httpclient.execute(\r\n                \t\tnew HttpAsyncGet(uri),\r\n                        new ResponseCallback(), null);\r\n                \r\n                Boolean result = future.get();\r\n                if (result != null &amp;&amp; result.booleanValue()) {\r\n                    System.out.println(&quot;\\nRequest successfully executed&quot;);\r\n                } else {\r\n                    System.out.println(&quot;Request failed&quot;);\r\n                }              \r\n            } \r\n            catch(Exception e){\r\n            \tSystem.out.println(&quot;[DownloadFile] Exception: &quot; + e.getMessage());\r\n            }\r\n            finally {\r\n            \tSystem.out.println(&quot;Shutting down&quot;);\r\n                httpclient.shutdown();\r\n            }\r\n            System.out.println(&quot;Done&quot;);  \r\n            \r\n    \t}\r\n    \t\r\n    \tstatic class ResponseCallback extends AsyncCharConsumer&lt;Boolean&gt; {\r\n    \r\n    \t    @Override\r\n    \t    protected void onResponseReceived(final HttpResponse response) {\r\n    \t    \t System.out.println(&quot;Response: &quot; + response.getStatusLine());\r\n    \t    \t System.out.println(&quot;Header: &quot; + response.toString());\r\n    \t    \t try {   \r\n    \t    \t\t //if(response.getStatusLine().getStatusCode()==200)\r\n    \t    \t\t\t fos = new FileOutputStream( &quot;Response.html&quot; );\r\n    \t    \t }catch(Exception e){\r\n    \t    \t\t System.out.println(&quot;[onResponseReceived] Exception: &quot; + e.getMessage());\r\n    \t    \t }\r\n    \t    }\r\n    \r\n    \t    @Override\r\n    \t    protected void onCharReceived(final CharBuffer buf, final IOControl ioctrl) throws IOException {\r\n    \t    \ttry\r\n    \t    \t{\r\n    \t            while (buf.hasRemaining()) \r\n    \t            {\r\n    \t                //System.out.print(buf.get());\r\n    \t                fos.write(buf.get());\r\n    \t            }\r\n    \t    \t}catch(Exception e)\r\n    \t    \t{\r\n    \t    \t\tSystem.out.println(&quot;[onCharReceived] Exception: &quot; + e.getMessage());\r\n    \t    \t}\r\n    \t    }\r\n    \r\n    \t    @Override\r\n    \t    protected void onCleanup() {\r\n    \t    \ttry\r\n    \t    \t{\t          \r\n    \t\t\t\tif(fos!=null)\r\n    \t\t\t\t\tfos.close();\r\n    \t    \t}catch(Exception e){\r\n    \t    \t\tSystem.out.println(&quot;[onCleanup] Exception: &quot; + e.getMessage());    \t\t\r\n    \t    \t}\r\n    \t    \t System.out.println(&quot;onCleanup()&quot;);\r\n    \t    }\r\n    \r\n    \t    @Override\r\n    \t    protected Boolean buildResult() {\r\n    \t        return Boolean.TRUE;\r\n    \t    }\r\n    \r\n    \t}\r\n    }\r\n\r\nErrors:\r\n\r\n    URI Query: https://176.66.3.69:6443/download.aspx?Lang=EN&amp;AuthToken=package\r\n    Aug 2, 2011 3:47:57 PM org.apache.http.impl.nio.client.NHttpClientProtocolHandler exception\r\n    SEVERE: I/O error: General SSLEngine problem\r\n    javax.net.ssl.SSLHandshakeException: General SSLEngine problem\r\n    \tat com.sun.net.ssl.internal.ssl.Handshaker.checkThrown(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.SSLEngineImpl.checkTaskThrown(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.SSLEngineImpl.writeAppRecord(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.SSLEngineImpl.wrap(Unknown Source)\r\n    \tat javax.net.ssl.SSLEngine.wrap(Unknown Source)\r\n    \tat org.apache.http.impl.nio.reactor.SSLIOSession.doHandshake(SSLIOSession.java:154)\r\n    \tat org.apache.http.impl.nio.reactor.SSLIOSession.isAppInputReady(SSLIOSession.java:276)\r\n    \tat org.apache.http.impl.nio.client.InternalClientEventDispatch.inputReady(InternalClientEventDispatch.java:79)\r\n    \tat org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:161)\r\n    \tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:335)\r\n    \tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315)\r\n    \tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:275)\r\n    \tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\r\n    \tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:542)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\r\n    \tat com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.SSLEngineImpl.fatal(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.Handshaker$1.run(Unknown Source)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat com.sun.net.ssl.internal.ssl.Handshaker$DelegatedTask.run(Unknown Source)\r\n    \tat org.apache.http.impl.nio.reactor.SSLIOSession.doHandshake(SSLIOSession.java:180)\r\n    \t... 9 more\r\n    Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    \tat sun.security.validator.PKIXValidator.doBuild(Unknown Source)\r\n    \tat sun.security.validator.PKIXValidator.engineValidate(Unknown Source)\r\n    \tat sun.security.validator.Validator.validate(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source)\r\n    \tat com.sun.net.ssl.internal.ssl.JsseX509TrustManager.checkServerTrusted(Unknown Source)\r\n    \t... 16 more\r\n    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    \tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(Unknown Source)\r\n    \tat java.security.cert.CertPathBuilder.build(Unknown Source)\r\n    \t... 21 more\r\n    onCleanup()\r\n    \r\n    [DownloadFile] Exception: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\r\n    Shutting down\r\n    Done","title":"Java: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>I have a class that will download a file from a <strong>https</strong> server. When I run  it, it returns a lot of errors. It seems that I have a problem with my certificate. Is it possible to ignore the client-server authentication? If so, how?</p>\n\n<pre><code>package com.da;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.nio.CharBuffer;\nimport java.util.concurrent.Future;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.utils.URIUtils;\nimport org.apache.http.impl.nio.client.DefaultHttpAsyncClient;\nimport org.apache.http.nio.IOControl;\nimport org.apache.http.nio.client.HttpAsyncClient;\nimport org.apache.http.nio.client.methods.AsyncCharConsumer;\nimport org.apache.http.nio.client.methods.HttpAsyncGet;\nimport org.apache.http.nio.client.methods.HttpAsyncPost;\n\npublic class RSDDownloadFile {\n    static FileOutputStream fos;\n\n    public void DownloadFile(String URI, String Request) throws Exception\n    {\n        java.net.URI uri = URIUtils.createURI(\"https\", \"176.66.3.69:6443\", -1, \"download.aspx\",\n                \"Lang=EN&amp;AuthToken=package\", null);\n        System.out.println(\"URI Query: \" + uri.toString());\n\n        HttpAsyncClient httpclient = new DefaultHttpAsyncClient();\n        httpclient.start();\n        try {\n            Future&lt;Boolean&gt; future = httpclient.execute(\n                    new HttpAsyncGet(uri),\n                    new ResponseCallback(), null);\n\n            Boolean result = future.get();\n            if (result != null &amp;&amp; result.booleanValue()) {\n                System.out.println(\"\\nRequest successfully executed\");\n            } else {\n                System.out.println(\"Request failed\");\n            }              \n        } \n        catch(Exception e){\n            System.out.println(\"[DownloadFile] Exception: \" + e.getMessage());\n        }\n        finally {\n            System.out.println(\"Shutting down\");\n            httpclient.shutdown();\n        }\n        System.out.println(\"Done\");  \n\n    }\n\n    static class ResponseCallback extends AsyncCharConsumer&lt;Boolean&gt; {\n\n        @Override\n        protected void onResponseReceived(final HttpResponse response) {\n             System.out.println(\"Response: \" + response.getStatusLine());\n             System.out.println(\"Header: \" + response.toString());\n             try {   \n                 //if(response.getStatusLine().getStatusCode()==200)\n                     fos = new FileOutputStream( \"Response.html\" );\n             }catch(Exception e){\n                 System.out.println(\"[onResponseReceived] Exception: \" + e.getMessage());\n             }\n        }\n\n        @Override\n        protected void onCharReceived(final CharBuffer buf, final IOControl ioctrl) throws IOException {\n            try\n            {\n                while (buf.hasRemaining()) \n                {\n                    //System.out.print(buf.get());\n                    fos.write(buf.get());\n                }\n            }catch(Exception e)\n            {\n                System.out.println(\"[onCharReceived] Exception: \" + e.getMessage());\n            }\n        }\n\n        @Override\n        protected void onCleanup() {\n            try\n            {             \n                if(fos!=null)\n                    fos.close();\n            }catch(Exception e){\n                System.out.println(\"[onCleanup] Exception: \" + e.getMessage());         \n            }\n             System.out.println(\"onCleanup()\");\n        }\n\n        @Override\n        protected Boolean buildResult() {\n            return Boolean.TRUE;\n        }\n\n    }\n}\n</code></pre>\n\n<p>Errors:</p>\n\n<pre><code>URI Query: https://176.66.3.69:6443/download.aspx?Lang=EN&amp;AuthToken=package\nAug 2, 2011 3:47:57 PM org.apache.http.impl.nio.client.NHttpClientProtocolHandler exception\nSEVERE: I/O error: General SSLEngine problem\njavax.net.ssl.SSLHandshakeException: General SSLEngine problem\n    at com.sun.net.ssl.internal.ssl.Handshaker.checkThrown(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.checkTaskThrown(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.writeAppRecord(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.wrap(Unknown Source)\n    at javax.net.ssl.SSLEngine.wrap(Unknown Source)\n    at org.apache.http.impl.nio.reactor.SSLIOSession.doHandshake(SSLIOSession.java:154)\n    at org.apache.http.impl.nio.reactor.SSLIOSession.isAppInputReady(SSLIOSession.java:276)\n    at org.apache.http.impl.nio.client.InternalClientEventDispatch.inputReady(InternalClientEventDispatch.java:79)\n    at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:161)\n    at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:335)\n    at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315)\n    at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:275)\n    at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\n    at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:542)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\n    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.fatal(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.Handshaker$1.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.net.ssl.internal.ssl.Handshaker$DelegatedTask.run(Unknown Source)\n    at org.apache.http.impl.nio.reactor.SSLIOSession.doHandshake(SSLIOSession.java:180)\n    ... 9 more\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at sun.security.validator.PKIXValidator.doBuild(Unknown Source)\n    at sun.security.validator.PKIXValidator.engineValidate(Unknown Source)\n    at sun.security.validator.Validator.validate(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source)\n    at com.sun.net.ssl.internal.ssl.JsseX509TrustManager.checkServerTrusted(Unknown Source)\n    ... 16 more\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(Unknown Source)\n    at java.security.cert.CertPathBuilder.build(Unknown Source)\n    ... 21 more\nonCleanup()\n\n[DownloadFile] Exception: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\nShutting down\nDone\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","h2","liquibase"],"answers":[{"tags":[],"owner":{"account_id":5916039,"reputation":21,"user_id":4654826,"display_name":"Sylvain B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686831701,"creation_date":1686831701,"answer_id":76482426,"question_id":76473853,"body_markdown":"Well, I managed to make it work with liquibase 3.10.3 (and previous versions until 3.6.2 too...).\r\n\r\nThose datas were loaded from a CSV file in a changeset using loadUpdateData.\r\nI had to update my changetSet to specify the imported column type like this : \r\n\r\n    databaseChangeLog:\r\n      - changeSet:\r\n          id: name\r\n          author: me\r\n          changes:\r\n            - loadUpdateData:\r\n                tableName: table\r\n                file: file.csv\r\n                quotchar: &#39;&quot;&#39;\r\n                primaryKey: id\r\n                columns:\r\n                  - column:\r\n                      name: myColumnWhichIsAnEnumInJava\r\n                      type: string\r\n\r\n\r\n----------\r\n\r\n\r\nI don&#39;t really understand why in future liquibase version this is necessary and why this changes the behavior of how H2 is reading the data.\r\n\r\nThis is not mentioned here :\r\nhttps://docs.liquibase.com/change-types/load-update-data.html\r\n\r\nBut this seems a bit related to https://liquibase.jira.com/browse/CORE-3287 ","title":"Column detected as ValueLobDb instead of ValueNull in h2 v1.4.197","body":"<p>Well, I managed to make it work with liquibase 3.10.3 (and previous versions until 3.6.2 too...).</p>\n<p>Those datas were loaded from a CSV file in a changeset using loadUpdateData.\nI had to update my changetSet to specify the imported column type like this :</p>\n<pre><code>databaseChangeLog:\n  - changeSet:\n      id: name\n      author: me\n      changes:\n        - loadUpdateData:\n            tableName: table\n            file: file.csv\n            quotchar: '&quot;'\n            primaryKey: id\n            columns:\n              - column:\n                  name: myColumnWhichIsAnEnumInJava\n                  type: string\n</code></pre>\n<hr />\n<p>I don't really understand why in future liquibase version this is necessary and why this changes the behavior of how H2 is reading the data.</p>\n<p>This is not mentioned here :\n<a href=\"https://docs.liquibase.com/change-types/load-update-data.html\" rel=\"nofollow noreferrer\">https://docs.liquibase.com/change-types/load-update-data.html</a></p>\n<p>But this seems a bit related to <a href=\"https://liquibase.jira.com/browse/CORE-3287\" rel=\"nofollow noreferrer\">https://liquibase.jira.com/browse/CORE-3287</a></p>\n"}],"owner":{"account_id":5916039,"reputation":21,"user_id":4654826,"display_name":"Sylvain B."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76482426,"answer_count":1,"score":1,"last_activity_date":1686831701,"creation_date":1686747481,"question_id":76473853,"body_markdown":"I am migrating a project from spring boot 1.5.19 to 2.4.5 (which is the current version of my issue).\r\n\r\nDuring this migration process I came across a strange issue regarding an Enum with this stack trace : \r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Unknown name value [] for enum class [***MyBusinessEnum***]\r\n\tat org.hibernate.type.EnumType$NamedEnumValueMapper.fromName(EnumType.java:433)\r\n\tat org.hibernate.type.EnumType$NamedEnumValueMapper.getValue(EnumType.java:417)\r\n\tat org.hibernate.type.EnumType.nullSafeGet(EnumType.java:231)\r\n\tat org.hibernate.type.CustomType.nullSafeGet(CustomType.java:119)\r\n\tat org.hibernate.type.AbstractType.hydrate(AbstractType.java:82)\r\n```\r\n\r\nThis enum is expected to be null there and should not be mapped using fromName...\r\n\r\nMany librairies were upgraded during this process, and I am looking for the culprit, if someone can give me some clues.\r\nFor example, liquibase as been upgraded from 3.5.5 to 3.10.3 (this is where my next investigation will be).\r\nI am in a test context with an h2 database (still the same) and hibernate 5.2.4.Final (still the same).\r\n\r\n\r\n---\r\n\r\nWhile debugging, the only difference I saw is that on the old branch before the migration, I had my row like this : \r\n[![Working ResultSet][2]][2]\r\n\r\nWhereas, in my migration branch, my row look like this : \r\n[![Broken ResultSet][1]][1]\r\n\r\nAnd unfortunately, ValueLobDb.getString() return &quot;&quot; instead of null for this column...\r\nFor me, this explain why I get the exception on the enum, but I don&#39;t know why the resultSet is not exactly the same... and how I should fix this. I did not changed dataset nor inserted data for this test.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xWMce.png\r\n  [2]: https://i.stack.imgur.com/qjciR.png\r\n\r\n\r\n----------\r\n\r\n**Edit : It seems that the culprit is liquibase : by forcing the version to 3.5.5, it works again...\r\nI wonder if it&#39;s a liquibase bug or not.**\r\n\r\n\r\n**Edit : The issue appears between 3.5.5 and 3.6.2 (I can&#39;t test other versions...) ==&gt; I am still interested for a tip as my goal is to upgrade versions... at least to the one used by spring boot. This would be sad to be stuck with liquibase 3.5.5 **","title":"Column detected as ValueLobDb instead of ValueNull in h2 v1.4.197","body":"<p>I am migrating a project from spring boot 1.5.19 to 2.4.5 (which is the current version of my issue).</p>\n<p>During this migration process I came across a strange issue regarding an Enum with this stack trace :</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Unknown name value [] for enum class [***MyBusinessEnum***]\n    at org.hibernate.type.EnumType$NamedEnumValueMapper.fromName(EnumType.java:433)\n    at org.hibernate.type.EnumType$NamedEnumValueMapper.getValue(EnumType.java:417)\n    at org.hibernate.type.EnumType.nullSafeGet(EnumType.java:231)\n    at org.hibernate.type.CustomType.nullSafeGet(CustomType.java:119)\n    at org.hibernate.type.AbstractType.hydrate(AbstractType.java:82)\n</code></pre>\n<p>This enum is expected to be null there and should not be mapped using fromName...</p>\n<p>Many librairies were upgraded during this process, and I am looking for the culprit, if someone can give me some clues.\nFor example, liquibase as been upgraded from 3.5.5 to 3.10.3 (this is where my next investigation will be).\nI am in a test context with an h2 database (still the same) and hibernate 5.2.4.Final (still the same).</p>\n<hr />\n<p>While debugging, the only difference I saw is that on the old branch before the migration, I had my row like this :\n<a href=\"https://i.stack.imgur.com/qjciR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qjciR.png\" alt=\"Working ResultSet\" /></a></p>\n<p>Whereas, in my migration branch, my row look like this :\n<a href=\"https://i.stack.imgur.com/xWMce.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xWMce.png\" alt=\"Broken ResultSet\" /></a></p>\n<p>And unfortunately, ValueLobDb.getString() return &quot;&quot; instead of null for this column...\nFor me, this explain why I get the exception on the enum, but I don't know why the resultSet is not exactly the same... and how I should fix this. I did not changed dataset nor inserted data for this test.</p>\n<hr />\n<p><strong>Edit : It seems that the culprit is liquibase : by forcing the version to 3.5.5, it works again...\nI wonder if it's a liquibase bug or not.</strong></p>\n<p>**Edit : The issue appears between 3.5.5 and 3.6.2 (I can't test other versions...) ==&gt; I am still interested for a tip as my goal is to upgrade versions... at least to the one used by spring boot. This would be sad to be stuck with liquibase 3.5.5 **</p>\n"},{"tags":["java","xwpf"],"owner":{"account_id":28827329,"reputation":1,"user_id":22078448,"display_name":"Leng Luntok"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686830276,"creation_date":1686830276,"question_id":76482230,"body_markdown":"Hi I have a code that accept input from a user then the program process it and transfer it into Microsoft word, the problem is when I use a debugger the String text returns null even though I called the getText function from the XWPFRun class,\r\nhere&#39;s the sample code that I have written:\r\n\r\n\r\n```\r\n    @FXML\r\n    private void handlePrintButtonAction() {\r\n        try {\r\n            //Part where it reads and manipulates the content inside the indigency \r\n            String IndigencyPath = &quot;C:\\\\Users\\\\aliya\\\\OneDrive\\\\Desktop\\\\leng\\\\cagbaby\\\\BrgyCert\\\\Indigency.docx&quot;;\r\n            XWPFDocument document = new XWPFDocument(new FileInputStream(IndigencyPath));\r\n\r\n            //User input data is retrieved and assigned to the string variables\r\n            String residentFirstName = firstNameField.getText();\r\n            String residentMiddleName = middleNameField.getText();\r\n            String residentLastName = lastNameField.getText();\r\n            String residentSuffix = suffixField.getText();\r\n            String residentAge = ageField.getText();\r\n            String residentZone = zoneField.getText();\r\n            String residentBarangay = barangayField.getText();\r\n            String residentMunicipality = municipalityField.getText();\r\n            String residentProvince = provinceField.getText();\r\n\r\n            //Iterates to every paragraph of the document to replace with the actual resident data\r\n            for (XWPFParagraph paragraph : document.getParagraphs()) {\r\n                List&lt;XWPFRun&gt; runs = paragraph.getRuns();\r\n                if (runs != null) {\r\n                    for (XWPFRun run : runs) {\r\n                        String text = run.getText(0);\r\n\r\n                        //Method to replace placeholders with actual user-inpu personal data\r\n                        if (text != null) {\r\n                            if (text.contains(&quot;&lt;&lt;ResidentFirstName&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentFirstName&gt;&gt;&quot;, residentFirstName);\r\n\r\n                            }\r\n                            if (text.contains(&quot;&lt;&lt;ResidentMiddleName&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentMiddleName&gt;&gt;&quot;, residentMiddleName);\r\n\r\n                            }\r\n                            if (text.contains(&quot;&lt;&lt;ResidentLastName&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentLastName&gt;&gt;&quot;, residentLastName);\r\n\r\n                            }\r\n                            if (text.contains(&quot;&lt;&lt;ResidentSuffix&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentSuffix&gt;&gt;&quot;, residentSuffix);\r\n\r\n                            }\r\n                            if (text.contains(&quot;&lt;&lt;ResidentAge&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentAge&gt;&gt;&quot;, residentAge);\r\n\r\n                            }\r\n                            if (text.contains(&quot;&lt;&lt;ResidentZone&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentZone&gt;&gt;&quot;, residentZone);\r\n\r\n                            }\r\n                            if (text.contains(&quot;&lt;&lt;ResidentBarangay&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentBarangay&gt;&gt;&quot;, residentBarangay);\r\n\r\n                            }\r\n                            if (text.contains(&quot;&lt;&lt;ResidentMunicipality&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentMunicipality&gt;&gt;&quot;, residentMunicipality);\r\n\r\n                            }\r\n                            if (text.contains(&quot;&lt;&lt;ResidentProvince&gt;&gt;&quot;)) {\r\n                                text = text.replace(&quot;&lt;&lt;ResidentProvince&gt;&gt;&quot;, residentProvince);\r\n                            }\r\n                            run.setText(text, 0);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            System.out.println(&quot;Print button clicked&quot;);\r\n\r\n            //Document with the personal data is inputted in a temporary file\r\n            File temporaryFile = File.createTempFile(&quot;resident_cert&quot;, &quot;.docx&quot;);\r\n            FileOutputStream outputStream = new FileOutputStream(temporaryFile);\r\n            document.write(outputStream); //flushes data sa docx\r\n            outputStream.close();\r\n\r\n            //Opens the document in the default app MICROSOFT WORD\r\n            Desktop.getDesktop().open(temporaryFile);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            // Handle any exceptions that occur during the process\r\n        }\r\n    }\r\n```\r\n\r\n\r\nIm expecting that the string text is not equal to null","title":"String text.getText(0) returns null in java XWPF","body":"<p>Hi I have a code that accept input from a user then the program process it and transfer it into Microsoft word, the problem is when I use a debugger the String text returns null even though I called the getText function from the XWPFRun class,\nhere's the sample code that I have written:</p>\n<pre><code>    @FXML\n    private void handlePrintButtonAction() {\n        try {\n            //Part where it reads and manipulates the content inside the indigency \n            String IndigencyPath = &quot;C:\\\\Users\\\\aliya\\\\OneDrive\\\\Desktop\\\\leng\\\\cagbaby\\\\BrgyCert\\\\Indigency.docx&quot;;\n            XWPFDocument document = new XWPFDocument(new FileInputStream(IndigencyPath));\n\n            //User input data is retrieved and assigned to the string variables\n            String residentFirstName = firstNameField.getText();\n            String residentMiddleName = middleNameField.getText();\n            String residentLastName = lastNameField.getText();\n            String residentSuffix = suffixField.getText();\n            String residentAge = ageField.getText();\n            String residentZone = zoneField.getText();\n            String residentBarangay = barangayField.getText();\n            String residentMunicipality = municipalityField.getText();\n            String residentProvince = provinceField.getText();\n\n            //Iterates to every paragraph of the document to replace with the actual resident data\n            for (XWPFParagraph paragraph : document.getParagraphs()) {\n                List&lt;XWPFRun&gt; runs = paragraph.getRuns();\n                if (runs != null) {\n                    for (XWPFRun run : runs) {\n                        String text = run.getText(0);\n\n                        //Method to replace placeholders with actual user-inpu personal data\n                        if (text != null) {\n                            if (text.contains(&quot;&lt;&lt;ResidentFirstName&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentFirstName&gt;&gt;&quot;, residentFirstName);\n\n                            }\n                            if (text.contains(&quot;&lt;&lt;ResidentMiddleName&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentMiddleName&gt;&gt;&quot;, residentMiddleName);\n\n                            }\n                            if (text.contains(&quot;&lt;&lt;ResidentLastName&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentLastName&gt;&gt;&quot;, residentLastName);\n\n                            }\n                            if (text.contains(&quot;&lt;&lt;ResidentSuffix&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentSuffix&gt;&gt;&quot;, residentSuffix);\n\n                            }\n                            if (text.contains(&quot;&lt;&lt;ResidentAge&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentAge&gt;&gt;&quot;, residentAge);\n\n                            }\n                            if (text.contains(&quot;&lt;&lt;ResidentZone&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentZone&gt;&gt;&quot;, residentZone);\n\n                            }\n                            if (text.contains(&quot;&lt;&lt;ResidentBarangay&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentBarangay&gt;&gt;&quot;, residentBarangay);\n\n                            }\n                            if (text.contains(&quot;&lt;&lt;ResidentMunicipality&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentMunicipality&gt;&gt;&quot;, residentMunicipality);\n\n                            }\n                            if (text.contains(&quot;&lt;&lt;ResidentProvince&gt;&gt;&quot;)) {\n                                text = text.replace(&quot;&lt;&lt;ResidentProvince&gt;&gt;&quot;, residentProvince);\n                            }\n                            run.setText(text, 0);\n                        }\n                    }\n                }\n            }\n\n            System.out.println(&quot;Print button clicked&quot;);\n\n            //Document with the personal data is inputted in a temporary file\n            File temporaryFile = File.createTempFile(&quot;resident_cert&quot;, &quot;.docx&quot;);\n            FileOutputStream outputStream = new FileOutputStream(temporaryFile);\n            document.write(outputStream); //flushes data sa docx\n            outputStream.close();\n\n            //Opens the document in the default app MICROSOFT WORD\n            Desktop.getDesktop().open(temporaryFile);\n        } catch (IOException e) {\n            e.printStackTrace();\n            // Handle any exceptions that occur during the process\n        }\n    }\n</code></pre>\n<p>Im expecting that the string text is not equal to null</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1481204132,"post_id":41040783,"comment_id":69288804,"body_markdown":"Member objects are available via reference fields and if they are mutable you can change them using an assignment i.e. `=`","body":"Member objects are available via reference fields and if they are mutable you can change them using an assignment i.e. <code>=</code>"},{"owner":{"account_id":3649369,"reputation":502,"user_id":3042026,"accept_rate":44,"display_name":"dr_dev"},"score":0,"creation_date":1481204237,"post_id":41040783,"comment_id":69288871,"body_markdown":"Can you please give a code example","body":"Can you please give a code example"},{"owner":{"account_id":3649369,"reputation":502,"user_id":3042026,"accept_rate":44,"display_name":"dr_dev"},"score":0,"creation_date":1481204376,"post_id":41040783,"comment_id":69288960,"body_markdown":"Why the downvote?","body":"Why the downvote?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1481204405,"post_id":41040783,"comment_id":69288986,"body_markdown":"Can you clarify what your doubt is about assignment and using fields?  Some people downvote questions if it&#39;s not clear what the OP is looking for. I post a comment...","body":"Can you clarify what your doubt is about assignment and using fields?  Some people downvote questions if it&#39;s not clear what the OP is looking for. I post a comment..."},{"owner":{"account_id":3649369,"reputation":502,"user_id":3042026,"accept_rate":44,"display_name":"dr_dev"},"score":0,"creation_date":1481204544,"post_id":41040783,"comment_id":69289086,"body_markdown":"I understood what you meant. I just want to see a useful example, where using composition in the way, as mentioned above would be an advantage over using inheritance.","body":"I understood what you meant. I just want to see a useful example, where using composition in the way, as mentioned above would be an advantage over using inheritance."},{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":0,"creation_date":1481610764,"post_id":41040783,"comment_id":69433975,"body_markdown":"Have a look at this question: http://stackoverflow.com/questions/49002/prefer-composition-over-inheritance/","body":"Have a look at this question: <a href=\"http://stackoverflow.com/questions/49002/prefer-composition-over-inheritance/\" title=\"prefer composition over inheritance\">stackoverflow.com/questions/49002/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1481204348,"creation_date":1481204348,"answer_id":41040882,"question_id":41040783,"body_markdown":"If your class extends `ArrayList`, a user of your class has access to all the public methods of `ArrayList`. You can&#39;t change your class to extend LinkedList, since that may break existing code.\r\n\r\n     public class Inheritence extends ArrayList&lt;String&gt;\r\n     {\r\n         // here your class depends on ArrayList implementation\r\n     }\r\n\r\nIf, on the other hand, your class has a private member whose type is `List`, the users of your class can&#39;t call methods of that member directly. And you can decide in runtime whether to assign an `ArrayList` instance to that member, or assign a different `List` implementation (`LinkedList` or something else). \r\n\r\n    public class Composition\r\n    {\r\n        private List&lt;String&gt; member;\r\n\r\n        public Composition ()\r\n        {\r\n            // here you decide the type of your member during runtime\r\n            if (someCondition) {\r\n                member = new ArrayList&lt;String&gt;();\r\n            } else {\r\n                member = new LinkedList&lt;String&gt;();\r\n            }\r\n        }\r\n    }","title":"Advantages of composition over inheritance in Java","body":"<p>If your class extends <code>ArrayList</code>, a user of your class has access to all the public methods of <code>ArrayList</code>. You can't change your class to extend LinkedList, since that may break existing code.</p>\n\n<pre><code> public class Inheritence extends ArrayList&lt;String&gt;\n {\n     // here your class depends on ArrayList implementation\n }\n</code></pre>\n\n<p>If, on the other hand, your class has a private member whose type is <code>List</code>, the users of your class can't call methods of that member directly. And you can decide in runtime whether to assign an <code>ArrayList</code> instance to that member, or assign a different <code>List</code> implementation (<code>LinkedList</code> or something else). </p>\n\n<pre><code>public class Composition\n{\n    private List&lt;String&gt; member;\n\n    public Composition ()\n    {\n        // here you decide the type of your member during runtime\n        if (someCondition) {\n            member = new ArrayList&lt;String&gt;();\n        } else {\n            member = new LinkedList&lt;String&gt;();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3220345,"reputation":5564,"user_id":2717958,"accept_rate":57,"display_name":"Michal Krasny"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1481205592,"creation_date":1481204768,"answer_id":41041031,"question_id":41040783,"body_markdown":"If you use inheritance, you hardly see the whole picture and you must study the code hell a lot to be able to understand what&#39;s going on. If you change one petite thing in parent class, you have trouble. What about all the descendants? Did this change affect them?\r\n\r\nAnd also consider testing. Parent class can not be separated, you have to test everything and the tests are complicated and often not made at all, because the effort is just too big to make testing sense.\r\n\r\nOn the other hand, when you use composition, you can easily separate functionalities, you can use dependency injection, when reading other people&#39;s code, you can focus on smaller piece of functionality. If higher level class, which uses composition needs to replace some minor functionality by other implementation, then it is far easier, because you much better know, what&#39;s going on in the code. The scattered code in several levels of inheritance is not encapsulated and very often totally unreadable.\r\n\r\nInheritance is also dangerous. Assume example, when you want to count, how many items did you add to HashSet. You can override methods add and addAll, but you don&#39;t know, if addAll calls method add for every item or not. See this [example][1]\r\n\r\nTo answer your original question - you can pass the inner object by a constructor or setter.\r\n\r\n  [1]: http://jtechies.blogspot.cz/2012/07/item-16-favor-composition-over.html","title":"Advantages of composition over inheritance in Java","body":"<p>If you use inheritance, you hardly see the whole picture and you must study the code hell a lot to be able to understand what's going on. If you change one petite thing in parent class, you have trouble. What about all the descendants? Did this change affect them?</p>\n\n<p>And also consider testing. Parent class can not be separated, you have to test everything and the tests are complicated and often not made at all, because the effort is just too big to make testing sense.</p>\n\n<p>On the other hand, when you use composition, you can easily separate functionalities, you can use dependency injection, when reading other people's code, you can focus on smaller piece of functionality. If higher level class, which uses composition needs to replace some minor functionality by other implementation, then it is far easier, because you much better know, what's going on in the code. The scattered code in several levels of inheritance is not encapsulated and very often totally unreadable.</p>\n\n<p>Inheritance is also dangerous. Assume example, when you want to count, how many items did you add to HashSet. You can override methods add and addAll, but you don't know, if addAll calls method add for every item or not. See this <a href=\"http://jtechies.blogspot.cz/2012/07/item-16-favor-composition-over.html\" rel=\"nofollow noreferrer\">example</a></p>\n\n<p>To answer your original question - you can pass the inner object by a constructor or setter.</p>\n"},{"tags":[],"owner":{"account_id":4947636,"reputation":1073,"user_id":3982592,"display_name":"Shyam Baitmangalkar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1481207488,"creation_date":1481207488,"answer_id":41041882,"question_id":41040783,"body_markdown":"The broader way of looking at composition and inheritance is, composition is a design technique to implement **`has-a`** relationship whereas inheritance is a technique to implement **`is-a`** relationship. Let&#39;s get into Object Orientation perspective to understand this in a better way. \r\n\r\nWhen I say, `Dog` **is a** `Mammal` and `Snake` **is a** `Reptile` but both are `Animals`, The design can be like, there should be a super class called `Animal` and two child classes called `Mammal` and `Reptile` which `Dog` and `Snake` should be extending. Respective code is as below:\r\n\r\n    public abstract class Animal {\r\n    \tpublic abstract void move();\r\n    \tpublic abstract void sleep();\r\n    \tpublic abstract void reproduce();\r\n    \t\r\n    }\r\n\r\nAny animal can perform these three actions.\r\n\r\n    public abstract class Mammal extends Animal{\r\n    \t@Override\r\n    \tpublic void reproduce(){\r\n    \t\tSystem.out.println(&quot;Gives birth!!&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\n    public abstract class Reptile extends Animal{\r\n    \t@Override\r\n    \tpublic void reproduce(){\r\n    \t\tSystem.out.println(&quot;Lays Eggs!!&quot;);\r\n    \t}\r\n    }\r\n\r\nAll Mammals/Reptile will perform this defined function in common way.\r\n\r\n    public class Dog extends Mammal{\r\n    \r\n    \t@Override\r\n    \tpublic void move() {\r\n    \t\tSystem.out.println(&quot;Uses it&#39;s limbs&quot;);\r\n    \t\t\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void sleep() {\r\n    \t\tSystem.out.println(&quot;Sleeps on it&#39;s tummy&quot;);\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n    public class Snake extends Reptile{\r\n    \r\n    \t@Override\r\n    \tpublic void move() {\r\n    \t\tSystem.out.println(&quot;Crawls&quot;);\r\n    \t\t\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void sleep() {\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\nAs you can observe in this example, `Dog` extends `Mammal` and `Snake` extends `Reptile`. Hence at any given point of time, `Dog` **will always be** a `Mammal` and a `Snake` **will always be** a `Reptile`. Hence, this **is-a** relationship builds a **strong bond** between two entities. During the course of execution, as long as `Dog` extends `Mammal`, it cannot be a `Reptile` or anything else.\r\n\r\nWhereas coming back to **has-a** relationship (Composition), I can say that a `Person` **has-a** `Car`. I&#39;m not specifying the type of the `Car` that this person has. Let&#39;s get back to OO perspective to understand this better.\r\n\r\nConsider this `Person` class\r\n\r\n    public class Person {\r\n    \tprivate String name;\r\n    \tprivate String address;\r\n    \t\r\n    \tprivate Car car;\r\n    \r\n    \tpublic Person(String name, String address, Car car) {\r\n    \t\tsuper();\r\n    \t\tthis.name = name;\r\n    \t\tthis.address = address;\r\n    \t\tthis.car = car;\r\n    \t}\r\n    \t\r\n    \t\r\n    }\r\n\r\nIt can be seen here that, a `Person` has-a name, address and car.\r\nThe code for Car and related classes goes below:\r\n\r\n    public class Car {\r\n    \t//Car related methods\r\n    }\r\n    \r\n    public class Ferrari extends Car{\r\n    \t//Ferrari specific methods, attributes\r\n    }\r\n    \r\n    public class Bmw extends Car{\r\n    \t//BMW specific attributes, methods.\r\n    }\r\nIt can be seen that `BMW` and `Ferrari` are types of `Car`.\r\nNow coming back to the statement **&quot;Person has-a Car&quot;**, the Car could be any Car. It could be a ferrari or BMW or anything else. This can be passed in during creation of `Person` object.\r\n\r\n`Person john = new Person(&quot;John&quot;, &quot;#81, 2nd Street,..&quot;, new Ferrari());`\r\n\r\nIt can be seen that John takes in a `Ferrari` `Car`. Here John can take in any type of `Car` being passed during object creation (dynamic nature). Hence that level of flexibility is provided by **has-a** (composition) relation.\r\n\r\nI hope this clears your doubt.","title":"Advantages of composition over inheritance in Java","body":"<p>The broader way of looking at composition and inheritance is, composition is a design technique to implement <strong><code>has-a</code></strong> relationship whereas inheritance is a technique to implement <strong><code>is-a</code></strong> relationship. Let's get into Object Orientation perspective to understand this in a better way. </p>\n\n<p>When I say, <code>Dog</code> <strong>is a</strong> <code>Mammal</code> and <code>Snake</code> <strong>is a</strong> <code>Reptile</code> but both are <code>Animals</code>, The design can be like, there should be a super class called <code>Animal</code> and two child classes called <code>Mammal</code> and <code>Reptile</code> which <code>Dog</code> and <code>Snake</code> should be extending. Respective code is as below:</p>\n\n<pre><code>public abstract class Animal {\n    public abstract void move();\n    public abstract void sleep();\n    public abstract void reproduce();\n\n}\n</code></pre>\n\n<p>Any animal can perform these three actions.</p>\n\n<pre><code>public abstract class Mammal extends Animal{\n    @Override\n    public void reproduce(){\n        System.out.println(\"Gives birth!!\");\n    }\n\n}\n\npublic abstract class Reptile extends Animal{\n    @Override\n    public void reproduce(){\n        System.out.println(\"Lays Eggs!!\");\n    }\n}\n</code></pre>\n\n<p>All Mammals/Reptile will perform this defined function in common way.</p>\n\n<pre><code>public class Dog extends Mammal{\n\n    @Override\n    public void move() {\n        System.out.println(\"Uses it's limbs\");\n\n    }\n\n    @Override\n    public void sleep() {\n        System.out.println(\"Sleeps on it's tummy\");\n\n    }\n\n}\n\n\npublic class Snake extends Reptile{\n\n    @Override\n    public void move() {\n        System.out.println(\"Crawls\");\n\n    }\n\n    @Override\n    public void sleep() {\n        System.out.println(\"\");\n\n    }\n\n}\n</code></pre>\n\n<p>As you can observe in this example, <code>Dog</code> extends <code>Mammal</code> and <code>Snake</code> extends <code>Reptile</code>. Hence at any given point of time, <code>Dog</code> <strong>will always be</strong> a <code>Mammal</code> and a <code>Snake</code> <strong>will always be</strong> a <code>Reptile</code>. Hence, this <strong>is-a</strong> relationship builds a <strong>strong bond</strong> between two entities. During the course of execution, as long as <code>Dog</code> extends <code>Mammal</code>, it cannot be a <code>Reptile</code> or anything else.</p>\n\n<p>Whereas coming back to <strong>has-a</strong> relationship (Composition), I can say that a <code>Person</code> <strong>has-a</strong> <code>Car</code>. I'm not specifying the type of the <code>Car</code> that this person has. Let's get back to OO perspective to understand this better.</p>\n\n<p>Consider this <code>Person</code> class</p>\n\n<pre><code>public class Person {\n    private String name;\n    private String address;\n\n    private Car car;\n\n    public Person(String name, String address, Car car) {\n        super();\n        this.name = name;\n        this.address = address;\n        this.car = car;\n    }\n\n\n}\n</code></pre>\n\n<p>It can be seen here that, a <code>Person</code> has-a name, address and car.\nThe code for Car and related classes goes below:</p>\n\n<pre><code>public class Car {\n    //Car related methods\n}\n\npublic class Ferrari extends Car{\n    //Ferrari specific methods, attributes\n}\n\npublic class Bmw extends Car{\n    //BMW specific attributes, methods.\n}\n</code></pre>\n\n<p>It can be seen that <code>BMW</code> and <code>Ferrari</code> are types of <code>Car</code>.\nNow coming back to the statement <strong>\"Person has-a Car\"</strong>, the Car could be any Car. It could be a ferrari or BMW or anything else. This can be passed in during creation of <code>Person</code> object.</p>\n\n<p><code>Person john = new Person(\"John\", \"#81, 2nd Street,..\", new Ferrari());</code></p>\n\n<p>It can be seen that John takes in a <code>Ferrari</code> <code>Car</code>. Here John can take in any type of <code>Car</code> being passed during object creation (dynamic nature). Hence that level of flexibility is provided by <strong>has-a</strong> (composition) relation.</p>\n\n<p>I hope this clears your doubt.</p>\n"}],"owner":{"account_id":3649369,"reputation":502,"user_id":3042026,"accept_rate":44,"display_name":"dr_dev"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2844,"favorite_count":0,"down_vote_count":3,"up_vote_count":6,"accepted_answer_id":41040882,"answer_count":3,"score":3,"last_activity_date":1686830158,"creation_date":1481204082,"question_id":41040783,"body_markdown":"The below paragraph is quoted from the book, &quot;Thinking in Java&quot; by Bruce Eckel.\r\n\r\n&gt; Composition comes with a great deal of flexibility. The member objects of your new class are typically private, making them inaccessible to the client programmers who are using the class. This allows you to change those members without disturbing existing client code. **You can also change the member objects at run time, to dynamically change the behavior of your program. Inheritance, which is described next, does not have this flexibility since the compiler must place compile-time restrictions on classes created with inheritance**.\r\n\r\nI don&#39;t understand, how the member object can be changed dynamically, and how it is an advantage over inheritance.\r\nCould somebody please explain this","title":"Advantages of composition over inheritance in Java","body":"<p>The below paragraph is quoted from the book, \"Thinking in Java\" by Bruce Eckel.</p>\n\n<blockquote>\n  <p>Composition comes with a great deal of flexibility. The member objects of your new class are typically private, making them inaccessible to the client programmers who are using the class. This allows you to change those members without disturbing existing client code. <strong>You can also change the member objects at run time, to dynamically change the behavior of your program. Inheritance, which is described next, does not have this flexibility since the compiler must place compile-time restrictions on classes created with inheritance</strong>.</p>\n</blockquote>\n\n<p>I don't understand, how the member object can be changed dynamically, and how it is an advantage over inheritance.\nCould somebody please explain this</p>\n"},{"tags":["java","spring","spring-boot","quartz-scheduler","quartz"],"owner":{"account_id":25376019,"reputation":135,"user_id":19189151,"display_name":"Deepak Samria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1686830031,"creation_date":1686826107,"question_id":76481739,"body_markdown":"Hope you are doing well.\r\n\r\nI&#39;m trying to understand the memory management of Quartz Scheduler. For that I’m having two questions: \r\n\r\n1. For example, I&#39;m having 10 worker threads for Quartz and all are occupied with executing the job. At the same time, we got triggers for another 10 jobs to execute. Now this is for sure quartz will for the availability of the threads. But will those new 10 jobs be loaded in the JVM or will remain in the Database (we have used JDBC as the job store type) until getting thread allocation?\r\n2. If I’m running two instances of my application and shared DB for job store persistence, then to avoid race conditions between the two instances what should I have to do so that one Job executes only once? Is it maintained by the quartz itself?\r\n\r\n\r\nI tried to look into the documentation but did not get any clue about it.\r\n\r\nThanks in advance.\r\n\r\nRegards\r\n","title":"Memory management of Quartz Scheduler in case of thread unavailability","body":"<p>Hope you are doing well.</p>\n<p>I'm trying to understand the memory management of Quartz Scheduler. For that I’m having two questions:</p>\n<ol>\n<li>For example, I'm having 10 worker threads for Quartz and all are occupied with executing the job. At the same time, we got triggers for another 10 jobs to execute. Now this is for sure quartz will for the availability of the threads. But will those new 10 jobs be loaded in the JVM or will remain in the Database (we have used JDBC as the job store type) until getting thread allocation?</li>\n<li>If I’m running two instances of my application and shared DB for job store persistence, then to avoid race conditions between the two instances what should I have to do so that one Job executes only once? Is it maintained by the quartz itself?</li>\n</ol>\n<p>I tried to look into the documentation but did not get any clue about it.</p>\n<p>Thanks in advance.</p>\n<p>Regards</p>\n"},{"tags":["java","xml","itext","sax"],"comments":[{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":1,"creation_date":1686830079,"post_id":74911946,"comment_id":134854933,"body_markdown":"Could you solve your problem in the meantime? You are missing code in your example. Also it seems you are reading &quot;new.PNG&quot; which is not an XML file...","body":"Could you solve your problem in the meantime? You are missing code in your example. Also it seems you are reading &quot;new.PNG&quot; which is not an XML file..."}],"owner":{"account_id":27323603,"reputation":1,"user_id":20836900,"display_name":"vbvmsr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686830017,"creation_date":1671951722,"question_id":74911946,"body_markdown":"While Running the following code in order to read an XML file and generating a corresponding PDF. I am facing the errors mentioned below the code.\r\n\r\n```\r\n\r\npackage com.test.pdf;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.io.FileReader;\r\nimport java.io.IOException;\r\nimport java.net.URISyntaxException;\r\nimport java.net.URL;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.util.ArrayList;\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.log4j.Logger;\r\n\r\nimport com.google.zxing.WriterException;\r\nimport com.itextpdf.text.Chunk;\r\nimport com.itextpdf.text.Document;\r\nimport com.itextpdf.text.DocumentException;\r\nimport com.itextpdf.text.PageSize;\r\nimport com.itextpdf.text.pdf.PdfDocument;\r\nimport com.itextpdf.text.pdf.PdfReader;\r\nimport com.itextpdf.text.pdf.PdfWriter;\r\nimport com.itextpdf.text.pdf.parser.PdfTextExtractor;\r\nimport com.itextpdf.xmp.impl.Base64;\r\n//import com.itextpdf.text.pdf.codec.Base64;\r\n\r\n\r\nimport org.apache.log4j.Logger;\r\n\r\npublic class PDFGenerator {\r\n\t\r\n\tfinal static Logger logger = Logger.getLogger(PDFGenerator.class);\r\n\tprivate static final String TITLE = &quot;TestReport&quot;;\r\n    public static final String PDF_EXTENSION = &quot;.pdf&quot;;\r\n    public static  String arg1 = &quot;&quot;;\r\n    public static  String arg2 = &quot;&quot;;\r\n    public static  String arg3 = &quot;&quot;;\r\n    \r\n    \r\n    public static String createPDFBase64(String arg1 , String arg2 , String arg3)  throws IOException, URISyntaxException, com.lowagie.text.DocumentException, WriterException {          \r\n\r\n    \tbyte[] encoded = null;\r\n    \tString out= null; \r\n        Document document = new Document();\r\n        \r\n        try {\r\n        \t\r\n        \t//arg1 = args[0];\r\n        \t//Document is not auto-closable hence need to close it separately\r\n            document = new Document(PageSize.LETTER);\r\n            System.out.println(&quot;Here i amn777&quot;);\r\n            \r\n            File temp = File.createTempFile(TITLE ,PDF_EXTENSION);\r\n            PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(\r\n            \t\ttemp)); // new File\r\n            \r\n            HeaderFooter event = new HeaderFooter(arg2);\r\n            \r\n            event.setHeader(&quot;Test Report&quot;);\r\n          \r\n            writer.setPageEvent(event);\r\n           \r\n            document.open();\r\n            PDFCreator pdfCreator = new PDFCreator();\r\n            pdfCreator.addMetaData(document,  arg1 , arg2 );\r\n           \r\n            pdfCreator.addTitlePage(document, arg2 );\r\n            \r\n            \r\n            //PDFCreator.addContent(document, dataObjList);\r\n            //String base64String = Base64.encodeFromFile(&quot;C:\\\\Users\\\\2000554\\\\Downloads\\\\HTMLToPDF\\\\TestReport.pdf&quot;);\r\n            //System.out.println(&quot;===============&gt;&gt;&gt;&quot; + base64String);\r\n            document.close();\r\n            \r\n            byte[] inFileBytes = Files.readAllBytes(temp.toPath()); \r\n            //PdfReader pReader = new PdfReader(inFileBytes);\r\n            //System.out.println(&quot;pReader.getFileLength()===============&gt;&gt;&gt;&quot; + pReader.getFileLength());\r\n            //System.out.println(&quot;pReader.getFileLength()===============&gt;&gt;&gt;&quot; + PdfTextExtractor.getTextFromPage(pReader, 1));\r\n            out = new String(Base64.encode(inFileBytes), &quot;UTF-8&quot;); \r\n            System.out.println(&quot;Clear cache..&quot;);\r\n            pdfCreator.xmlData.clear();\r\n            pdfCreator.dataObjMRCList.clear();\r\n            pdfCreator.dataObjNRCList.clear();\r\n            pdfCreator.dataObjVASList.clear();\r\n            pdfCreator.dataObjDEVList.clear();\r\n            pdfCreator.stcPhoneNumDispList.clear();\r\n            pdfCreator.stcSvcMap.clear();\r\n            pdfCreator.stcSvcBandWthMap.clear();\r\n            pdfCreator.invoiceTaxDvcMap.clear();\r\n            //byte[] decoded = java.util.Base64.getDecoder().decode(out.getBytes());\r\n            /* byte[] decoded = Base64.decode(out.getBytes());\r\n             FileOutputStream fos = new FileOutputStream(&quot;C:\\\\Users\\\\2000554\\\\Downloads\\\\HTMLToPDF\\\\TestBaseReport.pdf&quot;);\r\n            fos.write(decoded);\r\n            fos.flush();\r\n            fos.close();*/\r\n            \r\n            \r\n        }catch ( FileNotFoundException e) {\r\n           System.out.println(&quot;FileNotFoundException occurs..&quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }catch (DocumentException  e) {\r\n           System.out.println(&quot;DocumentException occurs..&quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        } catch (Exception e) {\r\n        \tSystem.out.println(&quot;Exception occurs..&quot; + e.getMessage());\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn null;\r\n\t\t}\r\n        finally{\r\n            if(null != document){\r\n               // document.close();\r\n            }\r\n        }\r\n\t\treturn out;\r\n    }\r\n    \r\n    public static void main(String args[]) {\r\n    \t\r\n    \ttry {\r\n    \t\tif(args != null &amp;&amp; args.length&gt;1) {\r\n    \t\t\tFileReader fReader = new FileReader(new File(&quot;C:\\\\Users\\\\2004807\\\\Downloads\\\\XML\\\\Amendment.xml&quot;));\r\n    \t\t\tBufferedReader bdr = new BufferedReader(fReader);\r\n    \t\t\tString line = null;\r\n    \t\t\tString xmlString = &quot;&quot;;\r\n    \t\t\twhile ((line=bdr.readLine())!=null){\r\n    \t\t\t\txmlString += line;\r\n    \t\t\t}\r\n    \t\t\tcreatePDFBase64(xmlString,args[1],args[2]);\r\n    \t\t}else {\r\n    \t\t\tcreatePDFBase64(&quot;&quot;,&quot;&quot;,&quot;&quot;);\r\n    \t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (URISyntaxException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (com.lowagie.text.DocumentException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (WriterException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n    \t\r\n    }\r\n    \r\n}\r\n```\r\n\r\n\r\nI rechecked the path and the XML format since the error mentioned is due to wrong formatting of XML in some cases. I still am getting the following error.\r\n```\r\nHere i amn777\r\n1getting resourcesfile:/C:/Users/2004807/Desktop/B2B%20Java/HtmlToPdf/target/classes/new.PNG\r\nInside getXMLData\r\nXML==&gt;\r\n[Fatal Error] :1:1: Premature end of file.\r\nError is :org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.\r\nxmlData size is :0\r\n```","title":"org.xml.sax.SAXParseException error while integrating XML for generating PDF","body":"<p>While Running the following code in order to read an XML file and generating a corresponding PDF. I am facing the errors mentioned below the code.</p>\n<pre><code>\npackage com.test.pdf;\n\nimport java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.net.URISyntaxException;\nimport java.net.URL;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.ArrayList;\n\nimport java.util.List;\n\nimport org.apache.log4j.Logger;\n\nimport com.google.zxing.WriterException;\nimport com.itextpdf.text.Chunk;\nimport com.itextpdf.text.Document;\nimport com.itextpdf.text.DocumentException;\nimport com.itextpdf.text.PageSize;\nimport com.itextpdf.text.pdf.PdfDocument;\nimport com.itextpdf.text.pdf.PdfReader;\nimport com.itextpdf.text.pdf.PdfWriter;\nimport com.itextpdf.text.pdf.parser.PdfTextExtractor;\nimport com.itextpdf.xmp.impl.Base64;\n//import com.itextpdf.text.pdf.codec.Base64;\n\n\nimport org.apache.log4j.Logger;\n\npublic class PDFGenerator {\n    \n    final static Logger logger = Logger.getLogger(PDFGenerator.class);\n    private static final String TITLE = &quot;TestReport&quot;;\n    public static final String PDF_EXTENSION = &quot;.pdf&quot;;\n    public static  String arg1 = &quot;&quot;;\n    public static  String arg2 = &quot;&quot;;\n    public static  String arg3 = &quot;&quot;;\n    \n    \n    public static String createPDFBase64(String arg1 , String arg2 , String arg3)  throws IOException, URISyntaxException, com.lowagie.text.DocumentException, WriterException {          \n\n        byte[] encoded = null;\n        String out= null; \n        Document document = new Document();\n        \n        try {\n            \n            //arg1 = args[0];\n            //Document is not auto-closable hence need to close it separately\n            document = new Document(PageSize.LETTER);\n            System.out.println(&quot;Here i amn777&quot;);\n            \n            File temp = File.createTempFile(TITLE ,PDF_EXTENSION);\n            PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(\n                    temp)); // new File\n            \n            HeaderFooter event = new HeaderFooter(arg2);\n            \n            event.setHeader(&quot;Test Report&quot;);\n          \n            writer.setPageEvent(event);\n           \n            document.open();\n            PDFCreator pdfCreator = new PDFCreator();\n            pdfCreator.addMetaData(document,  arg1 , arg2 );\n           \n            pdfCreator.addTitlePage(document, arg2 );\n            \n            \n            //PDFCreator.addContent(document, dataObjList);\n            //String base64String = Base64.encodeFromFile(&quot;C:\\\\Users\\\\2000554\\\\Downloads\\\\HTMLToPDF\\\\TestReport.pdf&quot;);\n            //System.out.println(&quot;===============&gt;&gt;&gt;&quot; + base64String);\n            document.close();\n            \n            byte[] inFileBytes = Files.readAllBytes(temp.toPath()); \n            //PdfReader pReader = new PdfReader(inFileBytes);\n            //System.out.println(&quot;pReader.getFileLength()===============&gt;&gt;&gt;&quot; + pReader.getFileLength());\n            //System.out.println(&quot;pReader.getFileLength()===============&gt;&gt;&gt;&quot; + PdfTextExtractor.getTextFromPage(pReader, 1));\n            out = new String(Base64.encode(inFileBytes), &quot;UTF-8&quot;); \n            System.out.println(&quot;Clear cache..&quot;);\n            pdfCreator.xmlData.clear();\n            pdfCreator.dataObjMRCList.clear();\n            pdfCreator.dataObjNRCList.clear();\n            pdfCreator.dataObjVASList.clear();\n            pdfCreator.dataObjDEVList.clear();\n            pdfCreator.stcPhoneNumDispList.clear();\n            pdfCreator.stcSvcMap.clear();\n            pdfCreator.stcSvcBandWthMap.clear();\n            pdfCreator.invoiceTaxDvcMap.clear();\n            //byte[] decoded = java.util.Base64.getDecoder().decode(out.getBytes());\n            /* byte[] decoded = Base64.decode(out.getBytes());\n             FileOutputStream fos = new FileOutputStream(&quot;C:\\\\Users\\\\2000554\\\\Downloads\\\\HTMLToPDF\\\\TestBaseReport.pdf&quot;);\n            fos.write(decoded);\n            fos.flush();\n            fos.close();*/\n            \n            \n        }catch ( FileNotFoundException e) {\n           System.out.println(&quot;FileNotFoundException occurs..&quot; + e.getMessage());\n            e.printStackTrace();\n        }catch (DocumentException  e) {\n           System.out.println(&quot;DocumentException occurs..&quot; + e.getMessage());\n            e.printStackTrace();\n        } catch (Exception e) {\n            System.out.println(&quot;Exception occurs..&quot; + e.getMessage());\n            e.printStackTrace();\n            return null;\n        }\n        finally{\n            if(null != document){\n               // document.close();\n            }\n        }\n        return out;\n    }\n    \n    public static void main(String args[]) {\n        \n        try {\n            if(args != null &amp;&amp; args.length&gt;1) {\n                FileReader fReader = new FileReader(new File(&quot;C:\\\\Users\\\\2004807\\\\Downloads\\\\XML\\\\Amendment.xml&quot;));\n                BufferedReader bdr = new BufferedReader(fReader);\n                String line = null;\n                String xmlString = &quot;&quot;;\n                while ((line=bdr.readLine())!=null){\n                    xmlString += line;\n                }\n                createPDFBase64(xmlString,args[1],args[2]);\n            }else {\n                createPDFBase64(&quot;&quot;,&quot;&quot;,&quot;&quot;);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (URISyntaxException e) {\n            e.printStackTrace();\n        } catch (com.lowagie.text.DocumentException e) {\n            e.printStackTrace();\n        } catch (WriterException e) {\n            e.printStackTrace();\n        }\n        \n    }\n    \n}\n</code></pre>\n<p>I rechecked the path and the XML format since the error mentioned is due to wrong formatting of XML in some cases. I still am getting the following error.</p>\n<pre><code>Here i amn777\n1getting resourcesfile:/C:/Users/2004807/Desktop/B2B%20Java/HtmlToPdf/target/classes/new.PNG\nInside getXMLData\nXML==&gt;\n[Fatal Error] :1:1: Premature end of file.\nError is :org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.\nxmlData size is :0\n</code></pre>\n"},{"tags":["java","android","overlay","android-softkeyboard"],"comments":[{"owner":{"account_id":6552102,"reputation":2093,"user_id":5750389,"display_name":"Elias Fazel"},"score":0,"creation_date":1676198629,"post_id":75426332,"comment_id":133085814,"body_markdown":"use this editText.requestFocus();","body":"use this editText.requestFocus();"},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1684219393,"post_id":75426332,"comment_id":134481330,"body_markdown":"Hi, I just encountered this issue. Were you able to resolve it? @karlson","body":"Hi, I just encountered this issue. Were you able to resolve it? @karlson"},{"owner":{"account_id":27135815,"reputation":21,"user_id":20677329,"display_name":"karlson"},"score":0,"creation_date":1684316302,"post_id":75426332,"comment_id":134499341,"body_markdown":"@QasimMalik It was a long time ago, so I don&#39;t remember what exactly worked for me. But maybe it will help you: `code`WindowManager.LayoutParams params = new WindowManager.LayoutParams(\n        width - 100, \n        height - 100,\n        WindowManager.LayoutParams.TYPE_ACCESSIBILITY_OVERLAY,\n        WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,\n        PixelFormat.TRANSLUCENT);","body":"@QasimMalik It was a long time ago, so I don&#39;t remember what exactly worked for me. But maybe it will help you: <code>code</code>WindowManager.LayoutParams params = new WindowManager.LayoutParams(         width - 100,          height - 100,         WindowManager.LayoutParams.TYPE_ACCESSIBILITY_OVERLAY,         WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,         PixelFormat.TRANSLUCENT);"},{"owner":{"account_id":18203305,"reputation":45,"user_id":13247077,"display_name":"Qasim Malik"},"score":0,"creation_date":1684395409,"post_id":75426332,"comment_id":134512561,"body_markdown":"@karlson Thanks for your response, I was able to resolve the issue after studying this  https://github.com/atifmahmood29/overlays-floating-window-like-facebook-messenger/blob/master/app/src/main/java/innovativepocket/com/systemalertwindow/FloatingWindow.java","body":"@karlson Thanks for your response, I was able to resolve the issue after studying this  <a href=\"https://github.com/atifmahmood29/overlays-floating-window-like-facebook-messenger/blob/master/app/src/main/java/innovativepocket/com/systemalertwindow/FloatingWindow.java\" rel=\"nofollow noreferrer\">github.com/atifmahmood29/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":26128294,"reputation":47,"user_id":19819407,"display_name":"Prokash Dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686829675,"creation_date":1686829675,"answer_id":76482156,"question_id":75426332,"body_markdown":"To programmatically open the keyboard in Android when your application is in the foreground, you can use the following steps:\r\n\r\nImport the necessary classes at the top of your activity or fragment:\r\n```import android.content.Context;\r\nimport android.view.inputmethod.InputMethodManager;\r\nimport android.view.View;\r\n```\r\nInside your activity or fragment, use the following code to open the keyboard:\r\n```\r\nInputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\nimm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);\r\n```\r\nEnsure that the view you want to associate with the keyboard has focus. You can call requestFocus() on the view before opening the keyboard:\r\n```\r\nview.requestFocus();\r\n```\r\nin AndroidManifest.xml\r\n[![code Image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P15Jw.png\r\nadd ```android:windowSoftInputMethod=&quot;adjustResize&quot;```\r\n","title":"How to show the keyboard for edittext in overlay?","body":"<p>To programmatically open the keyboard in Android when your application is in the foreground, you can use the following steps:</p>\n<p>Import the necessary classes at the top of your activity or fragment:</p>\n<pre><code>import android.view.inputmethod.InputMethodManager;\nimport android.view.View;\n</code></pre>\n<p>Inside your activity or fragment, use the following code to open the keyboard:</p>\n<pre><code>InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\nimm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);\n</code></pre>\n<p>Ensure that the view you want to associate with the keyboard has focus. You can call requestFocus() on the view before opening the keyboard:</p>\n<pre><code>view.requestFocus();\n</code></pre>\n<p>in AndroidManifest.xml\n<a href=\"https://i.stack.imgur.com/P15Jw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P15Jw.png\" alt=\"code Image\" /></a></p>\n<p>add <code>android:windowSoftInputMethod=&quot;adjustResize&quot;</code></p>\n"}],"owner":{"account_id":27135815,"reputation":21,"user_id":20677329,"display_name":"karlson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1686829675,"creation_date":1676197810,"question_id":75426332,"body_markdown":"I have an overlay and a text field in it. But when I want to enter text in the field, the virtual keyboard is not displayed.\r\n\r\nI have tried all the flags (`FLAG_LOCAL_FOCUS_MODE`, `FLAG_ALT_FOCUSABLE_IM`, `FLAG_NOT_FOCUSABLE`), but it did not bring any result.\r\n\r\nHere is my code:\r\n\r\n\r\n```java\r\n\r\nDisplayMetrics displayMetrics = new DisplayMetrics();\r\nWindowManager windowManager = (WindowManager)this.getSystemService(Context.WINDOW_SERVICE);\r\nwindowManager.getDefaultDisplay().getMetrics(displayMetrics);\r\n\r\nint height = displayMetrics.heightPixels;\r\nint width = displayMetrics.widthPixels;\r\n\r\nwindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\r\nWindowManager.LayoutParams params = new WindowManager.LayoutParams(\r\n        width - 100,\r\n        height - 100,\r\n        WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,\r\n        //WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,\r\n        //WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,\r\n        WindowManager.LayoutParams.FLAG_LOCAL_FOCUS_MODE,\r\n        PixelFormat.TRANSLUCENT);\r\n\r\nparams.gravity = Gravity.TOP | Gravity.RIGHT;\r\nparams.x = 50;\r\nparams.y = 50;\r\n\r\nConstraintLayout rootView = (ConstraintLayout) LayoutInflater.from(this).inflate(R.layout.overlay_layout, null);\r\nwindowManager.addView(rootView, params);\r\n```\r\n\r\n\r\nHow to fix it?\r\n","title":"How to show the keyboard for edittext in overlay?","body":"<p>I have an overlay and a text field in it. But when I want to enter text in the field, the virtual keyboard is not displayed.</p>\n<p>I have tried all the flags (<code>FLAG_LOCAL_FOCUS_MODE</code>, <code>FLAG_ALT_FOCUSABLE_IM</code>, <code>FLAG_NOT_FOCUSABLE</code>), but it did not bring any result.</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nDisplayMetrics displayMetrics = new DisplayMetrics();\nWindowManager windowManager = (WindowManager)this.getSystemService(Context.WINDOW_SERVICE);\nwindowManager.getDefaultDisplay().getMetrics(displayMetrics);\n\nint height = displayMetrics.heightPixels;\nint width = displayMetrics.widthPixels;\n\nwindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);\nWindowManager.LayoutParams params = new WindowManager.LayoutParams(\n        width - 100,\n        height - 100,\n        WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,\n        //WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,\n        //WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,\n        WindowManager.LayoutParams.FLAG_LOCAL_FOCUS_MODE,\n        PixelFormat.TRANSLUCENT);\n\nparams.gravity = Gravity.TOP | Gravity.RIGHT;\nparams.x = 50;\nparams.y = 50;\n\nConstraintLayout rootView = (ConstraintLayout) LayoutInflater.from(this).inflate(R.layout.overlay_layout, null);\nwindowManager.addView(rootView, params);\n</code></pre>\n<p>How to fix it?</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598425071,"creation_date":1598425071,"answer_id":63592125,"question_id":63590726,"body_markdown":"`String userProfile = System.getProperty(&quot;user.home&quot;);` returns `%USERPROFILE%` variable.\r\n\r\nSo you can use `String filepath = System.getProperty(&quot;user.home&quot;) + &quot;\\\\Downloads&quot;;`\r\n\r\nWorks even on Linux.\r\n","title":"Validate Excel file is downloaded in Selenium Web driver Java","body":"<p><code>String userProfile = System.getProperty(&quot;user.home&quot;);</code> returns <code>%USERPROFILE%</code> variable.</p>\n<p>So you can use <code>String filepath = System.getProperty(&quot;user.home&quot;) + &quot;\\\\Downloads&quot;;</code></p>\n<p>Works even on Linux.</p>\n"},{"tags":[],"owner":{"account_id":16250732,"reputation":11,"user_id":11734777,"display_name":"Dhananjay_Khade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599053376,"creation_date":1599053376,"answer_id":63706630,"question_id":63590726,"body_markdown":"   \r\n\r\n    I have found way to validate on local path and it&#39;s generic one\r\n\r\n    File folder = new File(System.getProperty(&quot;user.home&quot;) +\\\\Downloads);\r\n    File[] listOfFiles = folder.listFiles();\r\n\r\n    boolean found = false;\r\n\r\n    File f = null;\r\n     \r\n \r\n\r\n    for (File listOfFile : listOfFiles) {\r\n\r\n     if (listOfFile.isFile()) {\r\n          String fileName = listOfFile.getName();\r\n           System.out.println(&quot;File &quot; + listOfFile.getName());\r\n           if (fileName.matches(&quot;5MB.zip&quot;)) {\r\n               f = new File(fileName);\r\n               found = true;\r\n                }\r\n            }\r\n        }\r\n    Assert.assertTrue(&quot;Downloaded document is not found&quot;,found );\r\n\r\n    f.deleteOnExit();\r\n\r\n","title":"Validate Excel file is downloaded in Selenium Web driver Java","body":"<pre><code>I have found way to validate on local path and it's generic one\n\nFile folder = new File(System.getProperty(&quot;user.home&quot;) +\\\\Downloads);\nFile[] listOfFiles = folder.listFiles();\n\nboolean found = false;\n\nFile f = null;\n \n\n\nfor (File listOfFile : listOfFiles) {\n\n if (listOfFile.isFile()) {\n      String fileName = listOfFile.getName();\n       System.out.println(&quot;File &quot; + listOfFile.getName());\n       if (fileName.matches(&quot;5MB.zip&quot;)) {\n           f = new File(fileName);\n           found = true;\n            }\n        }\n    }\nAssert.assertTrue(&quot;Downloaded document is not found&quot;,found );\n\nf.deleteOnExit();\n</code></pre>\n"}],"owner":{"account_id":16250732,"reputation":11,"user_id":11734777,"display_name":"Dhananjay_Khade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1976,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686829611,"creation_date":1598417738,"question_id":63590726,"body_markdown":"I&#39;m able to download excel file by clicking Download button which comes under DOM ,\r\nafter that i want verify downloaded file is same one.\r\nAUTO IT is not allowed in project.\r\nI have tried below code for verification on local but if i will push this code to repo.\r\nthen user path will get change and code will fail.\r\n\r\n    `String filepath = &quot;C:User\\\\Dhananjay\\\\Downloads&quot;;\r\n   \r\n\r\n    String fileName = &quot;report.xlsx&quot;\r\n\r\n    File targetFile = new File(fileName,filePath);\r\n    \r\n    if(! targetFile.exists())&#39;\r\n    {\r\n\r\n    system.out.println(&quot;File is verified&quot;)`\r\n    }else{\r\n    system.out.println(&quot;file not downloaded&quot;)\r\n    }&#39;\r\n\r\n\r\n\r\n\r\n","title":"Validate Excel file is downloaded in Selenium Web driver Java","body":"<p>I'm able to download excel file by clicking Download button which comes under DOM ,\nafter that i want verify downloaded file is same one.\nAUTO IT is not allowed in project.\nI have tried below code for verification on local but if i will push this code to repo.\nthen user path will get change and code will fail.</p>\n<pre><code>`String filepath = &quot;C:User\\\\Dhananjay\\\\Downloads&quot;;\n\n\nString fileName = &quot;report.xlsx&quot;\n\nFile targetFile = new File(fileName,filePath);\n\nif(! targetFile.exists())'\n{\n\nsystem.out.println(&quot;File is verified&quot;)`\n}else{\nsystem.out.println(&quot;file not downloaded&quot;)\n}'\n</code></pre>\n"},{"tags":["javascript","java","jquery","ajax","spring-boot"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1686821455,"post_id":76481071,"comment_id":134853155,"body_markdown":"Looks like a decent start. Your URL, HTTP method and request body seem to match between client &amp; server. Now, if you want us to help, tell us what the actual problem is: When you execute this code, what goes wrong? Any errors?","body":"Looks like a decent start. Your URL, HTTP method and request body seem to match between client &amp; server. Now, if you want us to help, tell us what the actual problem is: When you execute this code, what goes wrong? Any errors?"},{"owner":{"account_id":28755178,"reputation":1,"user_id":22022359,"display_name":"DarkGalBi"},"score":0,"creation_date":1686821724,"post_id":76481071,"comment_id":134853214,"body_markdown":"jquery.min.js:2     POST http://localhost:8080/product/product/basket/change 404\nsend @ jquery.min.js:2\najax @ jquery.min.js:2\ncount @ basket.js:35\nonclick @ basket:88\n/////////////\nThe above error is displayed on the network console. I don&#39;t see any other errors","body":"jquery.min.js:2     POST <a href=\"http://localhost:8080/product/product/basket/change\" rel=\"nofollow noreferrer\">localhost:8080/product/product/basket/change</a> 404 send @ jquery.min.js:2 ajax @ jquery.min.js:2 count @ basket.js:35 onclick @ basket:88 ///////////// The above error is displayed on the network console. I don&#39;t see any other errors"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686821873,"post_id":76481071,"comment_id":134853243,"body_markdown":"OK, there&#39;s a big hint in the URL in the error message. Can you spot it?","body":"OK, there&#39;s a big hint in the URL in the error message. Can you spot it?"},{"owner":{"account_id":28755178,"reputation":1,"user_id":22022359,"display_name":"DarkGalBi"},"score":0,"creation_date":1686821972,"post_id":76481071,"comment_id":134853270,"body_markdown":"oh sorry , This error was on the front. I made a mistake when copying.////////\n\nXHR failed loading: POST &quot;http://localhost:8080/product/product/basket/chan","body":"oh sorry , This error was on the front. I made a mistake when copying.////////  XHR failed loading: POST &quot;<a href=\"http://localhost:8080/product/product/basket/chan\" rel=\"nofollow noreferrer\">localhost:8080/product/product/basket/chan</a>"},{"owner":{"account_id":10320735,"reputation":611,"user_id":7613718,"display_name":"Apodemus"},"score":0,"creation_date":1686822399,"post_id":76481071,"comment_id":134853367,"body_markdown":"what if you remove a single &quot;/product&quot; from your url?","body":"what if you remove a single &quot;/product&quot; from your url?"},{"owner":{"account_id":28755178,"reputation":1,"user_id":22022359,"display_name":"DarkGalBi"},"score":0,"creation_date":1686822828,"post_id":76481071,"comment_id":134853465,"body_markdown":"you mean change url to &#39;/basket/change&#39; both? same error..","body":"you mean change url to &#39;/basket/change&#39; both? same error.."}],"answers":[{"tags":[],"owner":{"account_id":3822950,"reputation":74,"user_id":3170573,"display_name":"JMPG Developer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686829271,"creation_date":1686829271,"answer_id":76482106,"question_id":76481071,"body_markdown":"The problem is that you send the parameters uncorrectly:\r\nIf you want to use this AJAX:\r\n\r\n    var form = {\r\n        count: count,\r\n        pno: pno\r\n    };\r\n\r\n    $.ajax({\r\n        url: &#39;product/basket/change&#39;,\r\n        type: &#39;POST&#39;,\r\n        data: form, // Pass the form object as data\r\n        success: function(response) {\r\n            // Handle the success response\r\n        },\r\n        error: function(error) {\r\n            // Handle the error response\r\n        }\r\n    });\r\n\r\nYou should change your Controller, because you are sending the value on the data, so it expected receive it as **@RequestBody** not **@RequestParam**\r\n\r\n    @ResponseBody\r\n    @PostMapping(&quot;/product/basket/change&quot;)\r\n    public void basketChange(@RequestBody Map&lt;String, String&gt; data) {\r\n        String count = data.get(&quot;count&quot;);\r\n        String pno = data.get(&quot;pno&quot;);\r\n        // Use the count and pno values as needed\r\n        // ...\r\n    }","title":"I want to send data to controller with ajax","body":"<p>The problem is that you send the parameters uncorrectly:\nIf you want to use this AJAX:</p>\n<pre><code>var form = {\n    count: count,\n    pno: pno\n};\n\n$.ajax({\n    url: 'product/basket/change',\n    type: 'POST',\n    data: form, // Pass the form object as data\n    success: function(response) {\n        // Handle the success response\n    },\n    error: function(error) {\n        // Handle the error response\n    }\n});\n</code></pre>\n<p>You should change your Controller, because you are sending the value on the data, so it expected receive it as <strong>@RequestBody</strong> not <strong>@RequestParam</strong></p>\n<pre><code>@ResponseBody\n@PostMapping(&quot;/product/basket/change&quot;)\npublic void basketChange(@RequestBody Map&lt;String, String&gt; data) {\n    String count = data.get(&quot;count&quot;);\n    String pno = data.get(&quot;pno&quot;);\n    // Use the count and pno values as needed\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":28755178,"reputation":1,"user_id":22022359,"display_name":"DarkGalBi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686829271,"creation_date":1686821351,"question_id":76481071,"body_markdown":"ajax\r\n```\r\nconsole.log(count);//10\r\nconsole.log(pno);//4\r\n\r\nvar form = {\r\n        count:count,\r\n\tpno:pno\r\n}\r\n\t\t\t\r\n$.ajax({\r\n\turl: &#39;product/basket/change&#39;,\r\n\ttype: &#39;POST&#39;,\r\n\tdata:form\r\n});\r\n\r\n```\r\n\r\nspring boot controller\r\n```\r\n\r\n@ResponseBody\r\n@PostMapping(&quot;/product/basket/change&quot;)\r\npublic void basketChange(@RequestParam(name = &quot;form&quot;) Map&lt;String, String&gt; data ....){\r\n    ....\r\n}\r\n\r\n```\r\n\r\nThis is my js and Controller code. How can I do send &#39;count&#39; and &#39;pno&#39; to Controller?\r\nI try to solve it with goolgle and gpt for 30 mins, but fail..","title":"I want to send data to controller with ajax","body":"<p>ajax</p>\n<pre><code>console.log(count);//10\nconsole.log(pno);//4\n\nvar form = {\n        count:count,\n    pno:pno\n}\n            \n$.ajax({\n    url: 'product/basket/change',\n    type: 'POST',\n    data:form\n});\n\n</code></pre>\n<p>spring boot controller</p>\n<pre><code>\n@ResponseBody\n@PostMapping(&quot;/product/basket/change&quot;)\npublic void basketChange(@RequestParam(name = &quot;form&quot;) Map&lt;String, String&gt; data ....){\n    ....\n}\n\n</code></pre>\n<p>This is my js and Controller code. How can I do send 'count' and 'pno' to Controller?\nI try to solve it with goolgle and gpt for 30 mins, but fail..</p>\n"},{"tags":["java","java-8","lombok"],"comments":[{"owner":{"account_id":284516,"reputation":14349,"user_id":582675,"accept_rate":75,"display_name":"Fabian Barney"},"score":5,"creation_date":1488979663,"post_id":42669129,"comment_id":72469847,"body_markdown":"Consider renaming your field name. Something like `boolean objectPresent`. Then you can follow the getter/setter naming patterns and your getter would be `isObjectPresent()`.","body":"Consider renaming your field name. Something like <code>boolean objectPresent</code>. Then you can follow the getter/setter naming patterns and your getter would be <code>isObjectPresent()</code>."},{"owner":{"account_id":4066772,"reputation":945,"user_id":3341400,"accept_rate":67,"display_name":"mwKART"},"score":2,"creation_date":1488986435,"post_id":42669129,"comment_id":72474826,"body_markdown":"I have to stick to &quot;has&quot; prefix based on the API Documentation. So I dont have that privilege.","body":"I have to stick to &quot;has&quot; prefix based on the API Documentation. So I dont have that privilege."},{"owner":{"account_id":3271718,"reputation":867,"user_id":2754938,"display_name":"Tyler"},"score":1,"creation_date":1499374747,"post_id":42669129,"comment_id":76892849,"body_markdown":"Possible duplicate of [Lombok how to customise getter for Boolean object field?](https://stackoverflow.com/questions/18139678/lombok-how-to-customise-getter-for-boolean-object-field)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/18139678/lombok-how-to-customise-getter-for-boolean-object-field\">Lombok how to customise getter for Boolean object field?</a>"},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1640038463,"post_id":42669129,"comment_id":124496505,"body_markdown":"Does this answer your question? [Lombok annotation @Getter for boolean field](https://stackoverflow.com/questions/42619986/lombok-annotation-getter-for-boolean-field)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/42619986/lombok-annotation-getter-for-boolean-field\">Lombok annotation @Getter for boolean field</a>"}],"answers":[{"tags":[],"owner":{"account_id":4066772,"reputation":945,"user_id":3341400,"accept_rate":67,"display_name":"mwKART"},"down_vote_count":2,"up_vote_count":27,"is_accepted":true,"score":25,"last_activity_date":1488979183,"creation_date":1488979183,"answer_id":42672460,"question_id":42669129,"body_markdown":"I found out help from [lombok-how-to-customise-getter-for-boolean-object-field][1].\r\nBy this I will be have the altering accessor level and the code getter old fashion,\r\n\r\n    @Getter(AccessLevel.NONE) private boolean hasObject;\r\n    \r\n    public boolean hasObject() {\r\n        return hasObject;\r\n    }\r\n\r\n\r\nI will be keeping this question open. Is this the only way to change getter method name or I will wait for better suggestions.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/18139678/lombok-how-to-customise-getter-for-boolean-object-field","title":"Edit lombok getter method name for boolean member having prefix &quot;has&quot;","body":"<p>I found out help from <a href=\"https://stackoverflow.com/questions/18139678/lombok-how-to-customise-getter-for-boolean-object-field\">lombok-how-to-customise-getter-for-boolean-object-field</a>.\nBy this I will be have the altering accessor level and the code getter old fashion,</p>\n\n<pre><code>@Getter(AccessLevel.NONE) private boolean hasObject;\n\npublic boolean hasObject() {\n    return hasObject;\n}\n</code></pre>\n\n<p>I will be keeping this question open. Is this the only way to change getter method name or I will wait for better suggestions.</p>\n"},{"tags":[],"owner":{"account_id":184324,"reputation":49687,"user_id":420303,"accept_rate":93,"display_name":"Daij-Djan"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1488980233,"creation_date":1488980233,"answer_id":42672835,"question_id":42669129,"body_markdown":"in your case it could be:\r\n\r\n     class XY : Object {\r\n          @Getter(fluent = true)\r\n          public boolean hasObject;\r\n     }\r\n\r\nOR\r\n\r\n     @Accessors(fluent = true)\r\n     class XY : Object {\r\n          public boolean hasObject;\r\n     }\r\n\r\naccording to the docs:\r\n&gt; fluent - A boolean. If true, the getter for pepper is just pepper(), and the setter is pepper(T newValue). Furthermore, unless specified, chain defaults to true.\r\nDefault: false.","title":"Edit lombok getter method name for boolean member having prefix &quot;has&quot;","body":"<p>in your case it could be:</p>\n\n<pre><code> class XY : Object {\n      @Getter(fluent = true)\n      public boolean hasObject;\n }\n</code></pre>\n\n<p>OR</p>\n\n<pre><code> @Accessors(fluent = true)\n class XY : Object {\n      public boolean hasObject;\n }\n</code></pre>\n\n<p>according to the docs:</p>\n\n<blockquote>\n  <p>fluent - A boolean. If true, the getter for pepper is just pepper(), and the setter is pepper(T newValue). Furthermore, unless specified, chain defaults to true.\n  Default: false.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1016338,"reputation":3267,"user_id":1027842,"accept_rate":75,"display_name":"Benjamin"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1610720370,"creation_date":1610720370,"answer_id":65737717,"question_id":42669129,"body_markdown":"Combining the [Accessors][1] and [Getter][2], you might get the folllowing:\r\n\r\n``` Lombok\r\n class ExampleClass {\r\n      @Accessors(fluent = true)\r\n      @Getter\r\n      private boolean hasObject;\r\n }\r\n```\r\n\r\nis an equivalent to the Vanilla Java:\r\n``` Vanilla Java\r\nclass ExampleClass {\r\n    \r\n    private boolean hasObject;\r\n\r\n    public hasObject() {\r\n        return hasObject;\r\n    }\r\n```\r\n\r\nWhich is what you wanted, I guess.\r\n\r\n\r\n  [1]: https://projectlombok.org/features/experimental/Accessors\r\n  [2]: https://projectlombok.org/features/GetterSetter","title":"Edit lombok getter method name for boolean member having prefix &quot;has&quot;","body":"<p>Combining the <a href=\"https://projectlombok.org/features/experimental/Accessors\" rel=\"noreferrer\">Accessors</a> and <a href=\"https://projectlombok.org/features/GetterSetter\" rel=\"noreferrer\">Getter</a>, you might get the folllowing:</p>\n<pre><code> class ExampleClass {\n      @Accessors(fluent = true)\n      @Getter\n      private boolean hasObject;\n }\n</code></pre>\n<p>is an equivalent to the Vanilla Java:</p>\n<pre><code>class ExampleClass {\n    \n    private boolean hasObject;\n\n    public hasObject() {\n        return hasObject;\n    }\n</code></pre>\n<p>Which is what you wanted, I guess.</p>\n"},{"tags":[],"owner":{"account_id":7273917,"reputation":123,"user_id":5545976,"display_name":"Rami"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1652258495,"creation_date":1652258495,"answer_id":72197961,"question_id":42669129,"body_markdown":"Just like this:\r\n\r\n     @Data\r\n     class ExampleClass {\r\n         \r\n          private Object data;\r\n    \r\n          @Accessors(fluent = true)\r\n          private boolean hasObject;\r\n     }\r\n\r\nThis will provide `getData()` and `hasObject()` methods.\r\n","title":"Edit lombok getter method name for boolean member having prefix &quot;has&quot;","body":"<p>Just like this:</p>\n<pre><code> @Data\n class ExampleClass {\n     \n      private Object data;\n\n      @Accessors(fluent = true)\n      private boolean hasObject;\n }\n</code></pre>\n<p>This will provide <code>getData()</code> and <code>hasObject()</code> methods.</p>\n"},{"tags":[],"owner":{"account_id":21950586,"reputation":99,"user_id":16229841,"display_name":"Pavel Merta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686829145,"creation_date":1686829145,"answer_id":76482094,"question_id":42669129,"body_markdown":"In case you are looking for solution which will apply for your whole application, you can set lombook configuration `lombok.accessors.fluent` to `true`\r\n\r\nFor more informations\r\nsee https://projectlombok.org/features/configuration","title":"Edit lombok getter method name for boolean member having prefix &quot;has&quot;","body":"<p>In case you are looking for solution which will apply for your whole application, you can set lombook configuration <code>lombok.accessors.fluent</code> to <code>true</code></p>\n<p>For more informations\nsee <a href=\"https://projectlombok.org/features/configuration\" rel=\"nofollow noreferrer\">https://projectlombok.org/features/configuration</a></p>\n"}],"owner":{"account_id":4066772,"reputation":945,"user_id":3341400,"accept_rate":67,"display_name":"mwKART"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39773,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":42672460,"answer_count":5,"score":39,"last_activity_date":1686829145,"creation_date":1488969823,"question_id":42669129,"body_markdown":"I am having a boolean variable `hasObject` in lombok which generates `isHasObject()`. I am using `@Data` lombok annotation. How can i change the method to `hasObject()`","title":"Edit lombok getter method name for boolean member having prefix &quot;has&quot;","body":"<p>I am having a boolean variable <code>hasObject</code> in lombok which generates <code>isHasObject()</code>. I am using <code>@Data</code> lombok annotation. How can i change the method to <code>hasObject()</code></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9625,"page":367,"page_size":100}
