{"items":[{"tags":["java","copy-constructor"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1677732263,"post_id":75611054,"comment_id":133397184,"body_markdown":"I don&#39;t see any array in the [pseudo] code in your question. Can you post a more concrete example? Something like a [mcve]?","body":"I don&#39;t see any array in the [pseudo] code in your question. Can you post a more concrete example? Something like a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":19304267,"reputation":21,"user_id":14111459,"display_name":"Gray"},"score":0,"creation_date":1677732812,"post_id":75611054,"comment_id":133397239,"body_markdown":"@Abra Sorry about that! I added the current version I am using to (try and) call the copy constructor.","body":"@Abra Sorry about that! I added the current version I am using to (try and) call the copy constructor."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1677733637,"post_id":75611054,"comment_id":133397348,"body_markdown":"Maybe try [reflection](https://docs.oracle.com/javase/tutorial/reflect/index.html)?","body":"Maybe try <a href=\"https://docs.oracle.com/javase/tutorial/reflect/index.html\" rel=\"nofollow noreferrer\">reflection</a>?"}],"answers":[{"comments":[{"owner":{"account_id":19304267,"reputation":21,"user_id":14111459,"display_name":"Gray"},"score":0,"creation_date":1677773919,"post_id":75616733,"comment_id":133407881,"body_markdown":"Very detailed answer, I appreciate it. If I consider the restrictions that I cannot typecast anywhere (be it in the driver or in the Building class), import any foreign Classes, nor use the Cloneable interface. Would it still be possible?","body":"Very detailed answer, I appreciate it. If I consider the restrictions that I cannot typecast anywhere (be it in the driver or in the Building class), import any foreign Classes, nor use the Cloneable interface. Would it still be possible?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1677801711,"post_id":75616733,"comment_id":133414416,"body_markdown":"No.  Not possible.  Even the reflection approach requires type casting, and switch patterns are a fancy form of `instanceof` + type cast.  (Though I guess it depends on exactly what you mean by &quot;typecast&quot;; i.e. whether you are talking about the syntax ... or what the syntax causes to happen.)","body":"No.  Not possible.  Even the reflection approach requires type casting, and switch patterns are a fancy form of <code>instanceof</code> + type cast.  (Though I guess it depends on exactly what you mean by &quot;typecast&quot;; i.e. whether you are talking about the syntax ... or what the syntax causes to happen.)"},{"owner":{"account_id":19304267,"reputation":21,"user_id":14111459,"display_name":"Gray"},"score":0,"creation_date":1677810328,"post_id":75616733,"comment_id":133415479,"body_markdown":"By typecast, I&#39;m referring to syntax itself. I am restricted in finding the actual type of the object being copied. Though it is much clearer now thanks to you, I wasn&#39;t sure what sort of hidden solution there was (if any). Thanks again!","body":"By typecast, I&#39;m referring to syntax itself. I am restricted in finding the actual type of the object being copied. Though it is much clearer now thanks to you, I wasn&#39;t sure what sort of hidden solution there was (if any). Thanks again!"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677766878,"creation_date":1677766878,"answer_id":75616733,"question_id":75611054,"body_markdown":"Apparently, you have a `Building[]` that contains various kinds of `Building` subtype.  And you want to create a deep copy.\r\n\r\nYou cannot do this by implementing a `Building` copy constructor.\r\n\r\nWhy?  \r\n\r\nBecause a constructor for `Building` can *only* construct a `Building` instance.  It *cannot* construct a `House` instance ... or `Hotel` or a `Church` or ...\r\n\r\n------------------------\r\n\r\nHowever, there are various alternatives that *will* work:\r\n\r\n  - Implement `Cloneable` in `Building` and each of its subtypes.\r\n\r\n  - Implement a *factory* method or class for creating a `Building` from another one.  Have it use `instanceof` (or Java 18+ pattern switches) to discriminate the subclasses and then use appropriate constructors for each subtype; e.g:\r\n\r\n        if (building instanceof House) {\r\n            return new House((House) building);\r\n        } else if (building instanceof Hotel) {\r\n            return new Hotel((Hotel) building);\r\n        } else ...\r\n\r\n  - Use reflection.  It is complicated, but you don&#39;t need to write code for each individual class or subclass in the hierarchy.\r\n\r\nEach alternative has pro&#39;s and con&#39;s, and we can&#39;t advise which one is best for each use-case.  Certainly, none of them are perfect for all use-cases.\r\n","title":"How to use a copy constructor to create a deep-copy of an Object array&#39;s contents without implementing cloneable() or arraycopy()?","body":"<p>Apparently, you have a <code>Building[]</code> that contains various kinds of <code>Building</code> subtype.  And you want to create a deep copy.</p>\n<p>You cannot do this by implementing a <code>Building</code> copy constructor.</p>\n<p>Why?</p>\n<p>Because a constructor for <code>Building</code> can <em>only</em> construct a <code>Building</code> instance.  It <em>cannot</em> construct a <code>House</code> instance ... or <code>Hotel</code> or a <code>Church</code> or ...</p>\n<hr />\n<p>However, there are various alternatives that <em>will</em> work:</p>\n<ul>\n<li><p>Implement <code>Cloneable</code> in <code>Building</code> and each of its subtypes.</p>\n</li>\n<li><p>Implement a <em>factory</em> method or class for creating a <code>Building</code> from another one.  Have it use <code>instanceof</code> (or Java 18+ pattern switches) to discriminate the subclasses and then use appropriate constructors for each subtype; e.g:</p>\n<pre><code>if (building instanceof House) {\n    return new House((House) building);\n} else if (building instanceof Hotel) {\n    return new Hotel((Hotel) building);\n} else ...\n</code></pre>\n</li>\n<li><p>Use reflection.  It is complicated, but you don't need to write code for each individual class or subclass in the hierarchy.</p>\n</li>\n</ul>\n<p>Each alternative has pro's and con's, and we can't advise which one is best for each use-case.  Certainly, none of them are perfect for all use-cases.</p>\n"}],"owner":{"account_id":19304267,"reputation":21,"user_id":14111459,"display_name":"Gray"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677766878,"creation_date":1677727500,"question_id":75611054,"body_markdown":"I need to create a copy of an array&#39;s contents, which are made up of various Objects of different types. However, I cannot use explicit casting to check the type of the Object, nor use the cloneable interface/arraycopy method. \r\n\r\n\r\n\r\nTo start, I created a superclass that all other classes extend from, but I&#39;m not sure how I would go about using the specific classes&#39; copy constructors. My initial attempt was: \r\n```\r\npublic Building(Object obj) {\r\n    try {\r\n        this.windows= ((House)obj).windows; \r\n        this.basement = ((House)obj).basement; \r\n    } catch (ClassCastException ex) {\r\n        this.windows = 0; \r\n        this.basement = false;\r\n    }\r\n    ... (various other try-catch blocks here)\r\n}\r\n```\r\nWith the driver being:\r\n```\r\npublic static Building[] copyBuildings(Building[] objects) {\r\n\r\n    Building[] objList = new Building[objects.length];\r\n        \r\n    for (int i = 0; i &lt; objects.length; i++) {    \r\n        objList[i] = new Building(objects[i]);\r\n    }\r\n        \r\n    return objList; \r\n}\r\n```\r\n\r\nBut, this doesn&#39;t properly call the subclass&#39;s copy constructor as I intended it to do, because it doesn&#39;t refer to them at all. I&#39;m not sure how to continue.\r\n\r\nBearing in mind the lack of explicit typecasting, if I do not know the explicit type of an object during runtime, is it possible to call an Object&#39;s copy constructor (do I need to alter my current code)? or does polymorphism not function in this way?\r\n\r\nAny help would be greatly appreciated! (as well as general feedback, I&#39;m not really used to using stackoverflow)","title":"How to use a copy constructor to create a deep-copy of an Object array&#39;s contents without implementing cloneable() or arraycopy()?","body":"<p>I need to create a copy of an array's contents, which are made up of various Objects of different types. However, I cannot use explicit casting to check the type of the Object, nor use the cloneable interface/arraycopy method.</p>\n<p>To start, I created a superclass that all other classes extend from, but I'm not sure how I would go about using the specific classes' copy constructors. My initial attempt was:</p>\n<pre><code>public Building(Object obj) {\n    try {\n        this.windows= ((House)obj).windows; \n        this.basement = ((House)obj).basement; \n    } catch (ClassCastException ex) {\n        this.windows = 0; \n        this.basement = false;\n    }\n    ... (various other try-catch blocks here)\n}\n</code></pre>\n<p>With the driver being:</p>\n<pre><code>public static Building[] copyBuildings(Building[] objects) {\n\n    Building[] objList = new Building[objects.length];\n        \n    for (int i = 0; i &lt; objects.length; i++) {    \n        objList[i] = new Building(objects[i]);\n    }\n        \n    return objList; \n}\n</code></pre>\n<p>But, this doesn't properly call the subclass's copy constructor as I intended it to do, because it doesn't refer to them at all. I'm not sure how to continue.</p>\n<p>Bearing in mind the lack of explicit typecasting, if I do not know the explicit type of an object during runtime, is it possible to call an Object's copy constructor (do I need to alter my current code)? or does polymorphism not function in this way?</p>\n<p>Any help would be greatly appreciated! (as well as general feedback, I'm not really used to using stackoverflow)</p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1677768282,"post_id":75614410,"comment_id":133406039,"body_markdown":"While it’s possible to do what you describe, you really should use [ServiceLoader](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/ServiceLoader.html) for finding implementations of an abstract class or interface.","body":"While it’s possible to do what you describe, you really should use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">ServiceLoader</a> for finding implementations of an abstract class or interface."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1677772653,"post_id":75614410,"comment_id":133407466,"body_markdown":"Your `id` fields are instance fields. So you’d have to create instances of a class you don’t known, in order to read the field. If you know the classes in advance, there is no point in comparing an additional id. What would be the advantage of `c = hypotheticalMethod(&quot;id_for_class3&quot;)` over `c = class3.class`? Also worth reading [What is the XY problem?](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378)","body":"Your <code>id</code> fields are instance fields. So you’d have to create instances of a class you don’t known, in order to read the field. If you know the classes in advance, there is no point in comparing an additional id. What would be the advantage of <code>c = hypotheticalMethod(&quot;id_for_class3&quot;)</code> over <code>c = class3.class</code>? Also worth reading <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\">What is the XY problem?</a>"}],"answers":[{"tags":[],"owner":{"account_id":27916655,"reputation":11,"user_id":21317664,"display_name":"ooz60"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677766842,"creation_date":1677766842,"answer_id":75616729,"question_id":75614410,"body_markdown":"You can get the value of id like below. This example will print &quot;id_for_class2&quot;.\r\n\r\n```\r\nimport java.lang.reflect.Field;\r\n\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws Exception{\r\n\r\n        class1 a = new class2();\r\n\r\n        Class cls = a.getClass();\r\n        Field field = cls.getDeclaredField(&quot;id&quot;);\r\n        Object value = field.get(a);\r\n\r\n        System.out.println(value);\r\n    }\r\n}\r\n```","title":"is there a way to use java reflection to find a class using the classes variable?","body":"<p>You can get the value of id like below. This example will print &quot;id_for_class2&quot;.</p>\n<pre><code>import java.lang.reflect.Field;\n\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception{\n\n        class1 a = new class2();\n\n        Class cls = a.getClass();\n        Field field = cls.getDeclaredField(&quot;id&quot;);\n        Object value = field.get(a);\n\n        System.out.println(value);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14782020,"reputation":31,"user_id":10675304,"display_name":"computerprogram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677766842,"creation_date":1677754120,"question_id":75614410,"body_markdown":"for example \r\n\r\nsay you had \r\n\r\n    public abstract class class1 {\r\n    \r\n    }\r\n    \r\n    public class2 extends class1 {\r\n    String id = &quot;id_for_class2&quot;\r\n    }\r\n    \r\n    public class3 extends class1 {\r\n    String id = &quot;id_for_class3&quot;\r\n    }\r\n    \r\n    public class4 extends class1 {\r\n    String id = &quot;id_for_class4&quot;}\r\n\r\n\r\nAnd you want to use reflection to get a specific class based on the id. \r\n\r\nIs there a way to do this using reflection in java? \r\n\r\n\r\n\r\n","title":"is there a way to use java reflection to find a class using the classes variable?","body":"<p>for example</p>\n<p>say you had</p>\n<pre><code>public abstract class class1 {\n\n}\n\npublic class2 extends class1 {\nString id = &quot;id_for_class2&quot;\n}\n\npublic class3 extends class1 {\nString id = &quot;id_for_class3&quot;\n}\n\npublic class4 extends class1 {\nString id = &quot;id_for_class4&quot;}\n</code></pre>\n<p>And you want to use reflection to get a specific class based on the id.</p>\n<p>Is there a way to do this using reflection in java?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1677576968,"post_id":75590089,"comment_id":133360779,"body_markdown":"It seems to say that long/double operations are *atomic* if the variable is *volatile*. It does **not** say that int variables are inherently volatile.","body":"It seems to say that long/double operations are <i>atomic</i> if the variable is <i>volatile</i>. It does <b>not</b> say that int variables are inherently volatile."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":3,"creation_date":1677577897,"post_id":75590089,"comment_id":133361024,"body_markdown":"It says that _reading or writing a variable_ of a variable (of type `int`) is an atomic operation (i.e. you can never observe it reading or writing two halves separately). It doesn&#39;t say that _changes_ are atomic.","body":"It says that <i>reading or writing a variable</i> of a variable (of type <code>int</code>) is an atomic operation (i.e. you can never observe it reading or writing two halves separately). It doesn&#39;t say that <i>changes</i> are atomic."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1677578284,"post_id":75590089,"comment_id":133361145,"body_markdown":"There is literally nothing about visibility in the quote.","body":"There is literally nothing about visibility in the quote."},{"owner":{"account_id":27898384,"reputation":23,"user_id":21303173,"display_name":"mkarmi"},"score":0,"creation_date":1677578462,"post_id":75590089,"comment_id":133361192,"body_markdown":"@Sweeper what I want to understand is if that atomic guarantees visibility for other threads.","body":"@Sweeper what I want to understand is if that atomic guarantees visibility for other threads."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1677579300,"post_id":75590089,"comment_id":133361432,"body_markdown":"&quot;atomic&quot; will guarantee that a thread always reads a complete change at once, but not that it reads every change from another thread at the right time (e.g. due to register read optimiziations). `volatile` ensures that a thread reads in a field &quot;freshly&quot; from memory before an operation.","body":"&quot;atomic&quot; will guarantee that a thread always reads a complete change at once, but not that it reads every change from another thread at the right time (e.g. due to register read optimiziations). <code>volatile</code> ensures that a thread reads in a field &quot;freshly&quot; from memory before an operation."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677585430,"creation_date":1677585430,"answer_id":75591757,"question_id":75590089,"body_markdown":"An atomic write means that all the bits of a value a transfered from the CPU core into memory in one chunk. An atomic read means similarly that all the bits of a value are transfered from the memory into the CPU core in one chunk.\r\n\r\nA non-atomic write or read means that the value is transfered in two (or more) separate chunks.\r\n\r\n----\r\n\r\nConsider a field\r\n\r\n    long someField = 0x00000000_12345678;\r\n\r\nand two threads: thread one reads that field at the same time thread two updates that field to `0x12345678_00000000`.\r\n\r\nWith non-atomic reads and writes the following can happen:\r\n\r\n* thread two writes the first 32 bits to memory (0x12345678)\r\n* thread one reads the first 32 bits from memory (0x12345678)\r\n* thread one reads the second 32 bits from memory (0x12345678)\r\n* thread two writes the second 32 bits to memory (0x00000000)\r\n\r\nAfter this sequence, the value that thread one has read is 0x12345678_12345678 - a value that was never written as a whole.\r\n\r\nThe statement in the JLS states that for `long` and `double` this can happen unless you declare the field as `volatile`.\r\n\r\nIt also states that a similar behaviour for all other types will never occur. For example with `int` values:\r\n\r\n    int someOtherField = 0x1234_0000;\r\n\r\nand one thread reading that field while another thread updates that field to 0x0000_1234: the value that the first thread reads will either be 0x1234_0000 or 0x0000_1234.\r\n\r\n---\r\n\r\nFor non-volatile fields however another outcome is possible (not related to atomicity, but to `volatile` fields):\r\n\r\n    while (someOtherField == 0x1234_0000) {\r\n        // do something\r\n    }\r\n\r\nA thread executing this piece of code is allowed to read the field only once and evaluate the condition to `true`, even if some other thread later changes the value of `someOtherField`.\r\n\r\n---\r\n\r\nWhy did the designers of Java use the `volatile` designator to also guarantee atomic reads and writes of `long` and `double`?\r\n\r\nProbably because they didn&#39;t want to introduce another designator for &quot;these values must be read and written atomically&quot;.\r\n\r\nEither your code cares about values (of type double or long) being written atomically - and then you are working with different threads, so you are most probably also interested in these changed values being visible to other threads, so you need the field to be volatile anyway.\r\n\r\nOr the values are only accessed from a single thread - in this case atomicity is not required (because reading both halves and writing both halves are never interleaved) and visibility in other threads is also not required.","title":"Does atomic guarantee visibility ? JAVA","body":"<p>An atomic write means that all the bits of a value a transfered from the CPU core into memory in one chunk. An atomic read means similarly that all the bits of a value are transfered from the memory into the CPU core in one chunk.</p>\n<p>A non-atomic write or read means that the value is transfered in two (or more) separate chunks.</p>\n<hr />\n<p>Consider a field</p>\n<pre><code>long someField = 0x00000000_12345678;\n</code></pre>\n<p>and two threads: thread one reads that field at the same time thread two updates that field to <code>0x12345678_00000000</code>.</p>\n<p>With non-atomic reads and writes the following can happen:</p>\n<ul>\n<li>thread two writes the first 32 bits to memory (0x12345678)</li>\n<li>thread one reads the first 32 bits from memory (0x12345678)</li>\n<li>thread one reads the second 32 bits from memory (0x12345678)</li>\n<li>thread two writes the second 32 bits to memory (0x00000000)</li>\n</ul>\n<p>After this sequence, the value that thread one has read is 0x12345678_12345678 - a value that was never written as a whole.</p>\n<p>The statement in the JLS states that for <code>long</code> and <code>double</code> this can happen unless you declare the field as <code>volatile</code>.</p>\n<p>It also states that a similar behaviour for all other types will never occur. For example with <code>int</code> values:</p>\n<pre><code>int someOtherField = 0x1234_0000;\n</code></pre>\n<p>and one thread reading that field while another thread updates that field to 0x0000_1234: the value that the first thread reads will either be 0x1234_0000 or 0x0000_1234.</p>\n<hr />\n<p>For non-volatile fields however another outcome is possible (not related to atomicity, but to <code>volatile</code> fields):</p>\n<pre><code>while (someOtherField == 0x1234_0000) {\n    // do something\n}\n</code></pre>\n<p>A thread executing this piece of code is allowed to read the field only once and evaluate the condition to <code>true</code>, even if some other thread later changes the value of <code>someOtherField</code>.</p>\n<hr />\n<p>Why did the designers of Java use the <code>volatile</code> designator to also guarantee atomic reads and writes of <code>long</code> and <code>double</code>?</p>\n<p>Probably because they didn't want to introduce another designator for &quot;these values must be read and written atomically&quot;.</p>\n<p>Either your code cares about values (of type double or long) being written atomically - and then you are working with different threads, so you are most probably also interested in these changed values being visible to other threads, so you need the field to be volatile anyway.</p>\n<p>Or the values are only accessed from a single thread - in this case atomicity is not required (because reading both halves and writing both halves are never interleaved) and visibility in other threads is also not required.</p>\n"},{"tags":[],"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677766764,"creation_date":1677762773,"answer_id":75615898,"question_id":75590089,"body_markdown":"In simple terms, volatile provides the following 3 properties:\r\n - atomicity\r\n - ordering\r\n - visibility\r\n\r\nAs Thomas Klager already explained, atomicity guarantees that an operation is atomic so isn&#39;t some interleaving of other operations like torn read or write. This is only a problem on 32 bits JVMs in combination with long/doubles.\r\n\r\nOrdering guarantees that surrounding loads and stores are ordered. E.g.:\r\n\r\n```\r\nint a;\r\nvolatile int b;\r\n\r\nthread1(){\r\n   a=1; \r\n   b=1;\r\n}\r\n\r\nthread2(){\r\n    while(b==0);\r\n    print(&quot;a=:&quot;+a);\r\n}\r\n```\r\n\r\nCan it happen that a=0 is printed? In the above example this can&#39;t happen because the &#39;b&#39; orders the accesses to &#39;b&#39;. But if &#39;b&#39; would be a plain variable, then the &#39;a=0&#39; could be printed.\r\n\r\nThe last one is visibility. So will a write to a variable on one CPU, be seen on another CPU? On modern hardware visibility isn&#39;t a concern because caches are coherent and store buffers eventually get written to the coherent cache. It is mostly a compiler concern, e.g the compiler could optimize this:\r\n\r\n```\r\nboolean stop;\r\n\r\nthread1(){\r\n   while(!stop){\r\n      print(&quot;loop&quot;);\r\n   }\r\n}\r\n\r\nthread2(){\r\n  stop = true;\r\n}\r\n```\r\n\r\nTo:\r\n\r\n```\r\nboolean stop;\r\n\r\nthread1(){\r\n   if(!stop){\r\n      while(true){\r\n         print(&quot;loop&quot;);\r\n      }\r\n   }\r\n}\r\n\r\nthread2(){\r\n  stop = true;\r\n}\r\n```\r\n\r\nNow it is clear that this loop never needs to see the updated stop value. With volatile, such compiler optimizations are prohibited.","title":"Does atomic guarantee visibility ? JAVA","body":"<p>In simple terms, volatile provides the following 3 properties:</p>\n<ul>\n<li>atomicity</li>\n<li>ordering</li>\n<li>visibility</li>\n</ul>\n<p>As Thomas Klager already explained, atomicity guarantees that an operation is atomic so isn't some interleaving of other operations like torn read or write. This is only a problem on 32 bits JVMs in combination with long/doubles.</p>\n<p>Ordering guarantees that surrounding loads and stores are ordered. E.g.:</p>\n<pre><code>int a;\nvolatile int b;\n\nthread1(){\n   a=1; \n   b=1;\n}\n\nthread2(){\n    while(b==0);\n    print(&quot;a=:&quot;+a);\n}\n</code></pre>\n<p>Can it happen that a=0 is printed? In the above example this can't happen because the 'b' orders the accesses to 'b'. But if 'b' would be a plain variable, then the 'a=0' could be printed.</p>\n<p>The last one is visibility. So will a write to a variable on one CPU, be seen on another CPU? On modern hardware visibility isn't a concern because caches are coherent and store buffers eventually get written to the coherent cache. It is mostly a compiler concern, e.g the compiler could optimize this:</p>\n<pre><code>boolean stop;\n\nthread1(){\n   while(!stop){\n      print(&quot;loop&quot;);\n   }\n}\n\nthread2(){\n  stop = true;\n}\n</code></pre>\n<p>To:</p>\n<pre><code>boolean stop;\n\nthread1(){\n   if(!stop){\n      while(true){\n         print(&quot;loop&quot;);\n      }\n   }\n}\n\nthread2(){\n  stop = true;\n}\n</code></pre>\n<p>Now it is clear that this loop never needs to see the updated stop value. With volatile, such compiler optimizations are prohibited.</p>\n"}],"owner":{"account_id":27898384,"reputation":23,"user_id":21303173,"display_name":"mkarmi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75591757,"answer_count":2,"score":2,"last_activity_date":1677766764,"creation_date":1677576354,"question_id":75590089,"body_markdown":"I was reading this statement :\r\n\r\n&gt; The Java language specification guarantees that reading or writing a variable is an atomic operation(unless the variable is of type long or double). Operations variables of type long or double are only atomic if they declared with the volatile keyword.\r\n\r\nnow I wonder if I need really to use volatile on &quot;int&quot; or any variable that is not long or double for example considering it&#39;s atomic, are the changes to that variable guaranteed to be visible by other thread ?\r\n\r\n\r\n-------\r\nWhat I want to understand if that atomic guarantees visibility for other thread without using volatile.","title":"Does atomic guarantee visibility ? JAVA","body":"<p>I was reading this statement :</p>\n<blockquote>\n<p>The Java language specification guarantees that reading or writing a variable is an atomic operation(unless the variable is of type long or double). Operations variables of type long or double are only atomic if they declared with the volatile keyword.</p>\n</blockquote>\n<p>now I wonder if I need really to use volatile on &quot;int&quot; or any variable that is not long or double for example considering it's atomic, are the changes to that variable guaranteed to be visible by other thread ?</p>\n<hr />\n<p>What I want to understand if that atomic guarantees visibility for other thread without using volatile.</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":4102217,"reputation":312,"user_id":3367392,"display_name":"aboudirawas"},"score":1,"creation_date":1677766679,"post_id":75616639,"comment_id":133405543,"body_markdown":"Try a Map&lt;String, List&lt;String&gt;&gt; having key: employee name for example and value: is list of documents","body":"Try a Map&lt;String, List&lt;String&gt;&gt; having key: employee name for example and value: is list of documents"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1677767339,"post_id":75616639,"comment_id":133405749,"body_markdown":"You can also make your own `#print` method that would keep this log.","body":"You can also make your own <code>#print</code> method that would keep this log."}],"owner":{"account_id":27918951,"reputation":1,"user_id":21319541,"display_name":"Jakob Huuse"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677766428,"creation_date":1677766428,"question_id":75616639,"body_markdown":"I&#39;m making a printer-class where I need to keep track of the print-history of objects with the Employee interface. \r\n\r\n```\r\npublic void printDocument(String document, Employee employee) {\r\n        System.out.println(document);\r\n        \r\n    }\r\n```\r\nHow could I store the history of an employee in a good way, so I can return the print-history of a specific employee with a method like\r\n\r\n```\r\npublic List&lt;String&gt; getPrintHistory(Employee employee) {\r\n        \r\n    }\r\n```\r\n\r\n\r\nI have tried storing the print-history of objects in a specific class with the employee interface in a list. The problem is that I want a more general method where I store the information in the Printer class, so I won&#39;t have to make a field for print-history for all the classes with the employee interface.","title":"Keep a printer-history for objects with a specific interface in java","body":"<p>I'm making a printer-class where I need to keep track of the print-history of objects with the Employee interface.</p>\n<pre><code>public void printDocument(String document, Employee employee) {\n        System.out.println(document);\n        \n    }\n</code></pre>\n<p>How could I store the history of an employee in a good way, so I can return the print-history of a specific employee with a method like</p>\n<pre><code>public List&lt;String&gt; getPrintHistory(Employee employee) {\n        \n    }\n</code></pre>\n<p>I have tried storing the print-history of objects in a specific class with the employee interface in a list. The problem is that I want a more general method where I store the information in the Printer class, so I won't have to make a field for print-history for all the classes with the employee interface.</p>\n"},{"tags":["java","ansible","jvm","jmx"],"comments":[{"owner":{"account_id":5284837,"reputation":40522,"user_id":9401096,"display_name":"Zeitounator"},"score":0,"creation_date":1677769661,"post_id":75616524,"comment_id":133406479,"body_markdown":"How would you get access to those attributes without ansible ?","body":"How would you get access to those attributes without ansible ?"},{"owner":{"account_id":9097660,"reputation":9382,"user_id":6771046,"display_name":"U880D"},"score":0,"creation_date":1677776947,"post_id":75616524,"comment_id":133408864,"body_markdown":"Unless there is not already an Ansible module available, one would need to create one in Python, see [How to connect to JMX agent using Python](https://stackoverflow.com/questions/3491082/). Since that seems to be not a quick and easy task, create an Ansible Custom Module in Java might be easier, or use an other script as wrapper. Overall it possible to achieve.","body":"Unless there is not already an Ansible module available, one would need to create one in Python, see <a href=\"https://stackoverflow.com/questions/3491082/\">How to connect to JMX agent using Python</a>. Since that seems to be not a quick and easy task, create an Ansible Custom Module in Java might be easier, or use an other script as wrapper. Overall it possible to achieve."},{"owner":{"account_id":9097660,"reputation":9382,"user_id":6771046,"display_name":"U880D"},"score":0,"creation_date":1677777666,"post_id":75616524,"comment_id":133409068,"body_markdown":"You could start with a research on [jmxQuery to monitor Java via Python](https://davidgildeh.com/2018/03/14/introducing-jmxquery-to-monitor-java-via-python/) and also search further for `jmx-exporter`, `prometheus jmx`. Please take note that just looking for tools, libraries, modules, further documentation, etc. is not on-topic here ...","body":"You could start with a research on <a href=\"https://davidgildeh.com/2018/03/14/introducing-jmxquery-to-monitor-java-via-python/\" rel=\"nofollow noreferrer\">jmxQuery to monitor Java via Python</a> and also search further for <code>jmx-exporter</code>, <code>prometheus jmx</code>. Please take note that just looking for tools, libraries, modules, further documentation, etc. is not on-topic here ..."},{"owner":{"account_id":9097660,"reputation":9382,"user_id":6771046,"display_name":"U880D"},"score":0,"creation_date":1677778663,"post_id":75616524,"comment_id":133409317,"body_markdown":"An other approach could be to something like [`ansible-javax`](https://github.com/tima/ansible-javax) &quot;_A module for executing an arbitrary java class or jar in a cleaner, more Ansible-like way._&quot;. Slowly it turns out and because of the many possibilities to achieve your goal, you would probably need to define before how do you like to access the JMX interface and make a design and decission upfront.","body":"An other approach could be to something like <a href=\"https://github.com/tima/ansible-javax\" rel=\"nofollow noreferrer\"><code>ansible-javax</code></a> &quot;<i>A module for executing an arbitrary java class or jar in a cleaner, more Ansible-like way.</i>&quot;. Slowly it turns out and because of the many possibilities to achieve your goal, you would probably need to define before how do you like to access the JMX interface and make a design and decission upfront."}],"owner":{"account_id":5061102,"reputation":607,"user_id":4062670,"display_name":"Valery Ryaboshapko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677765845,"creation_date":1677765845,"question_id":75616524,"body_markdown":"I use an Ansible playbook to start my JVM application and want to have a health-check task to ensure the application is running. That application has no HTTP interface but exposes several attributes via MBeans. So can I get access to those attributes from Ansible?","title":"How to read a JMX MBean attribute using Ansible?","body":"<p>I use an Ansible playbook to start my JVM application and want to have a health-check task to ensure the application is running. That application has no HTTP interface but exposes several attributes via MBeans. So can I get access to those attributes from Ansible?</p>\n"},{"tags":["java","git","kubernetes","jenkins","groovy"],"owner":{"account_id":11755625,"reputation":421,"user_id":8603405,"accept_rate":80,"display_name":"EilonA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677765825,"creation_date":1677765825,"question_id":75616519,"body_markdown":"I am using Kubernetes plugin and using my own image.\r\nThis image has git and worked before when I was using ec2 slaves.\r\n\r\nFrom some reason, after moving to container using K8s plugin I&#39;m getting this issue after using GitSCM checkout plugin.\r\n\r\nBut when I use &quot;sh git clone...&quot; it works perfectly.\r\n\r\nwhat am I missing?  JENKINS-30600? Permission denied?\r\n\r\nHow could it be?\r\n\r\n\r\n```\r\nWarning: JENKINS-30600: special launcher org.csanchez.jenkins.plugins.kubernetes.pipeline.ContainerExecDecorator$1@6c6a5bef; decorates RemoteLauncher[hudson.remoting.Channel@124fe7dc:JNLP4-connect connection from ip-10-20-119-149.us-west-2.compute.internal/10.20.119.149:53594] will be ignored (a typical symptom is the Git executable not being run inside a designated container)\r\n15:02:29  Cloning the remote Git repository\r\n15:02:29  ERROR: Error cloning remote repo &#39;origin&#39;\r\n15:02:29  hudson.plugins.git.GitException: Could not init /home/jenkins/agent/workspace/PR__test_container_main/infra-kit\r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:1049)\r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.CliGitAPIImpl$2.execute(CliGitAPIImpl.java:802)\r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$GitCommandMasterToSlaveCallable.call(RemoteGitImpl.java:158)\r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$GitCommandMasterToSlaveCallable.call(RemoteGitImpl.java:151)\r\n15:02:29  \tat hudson.remoting.UserRequest.perform(UserRequest.java:211)\r\n15:02:29  \tat hudson.remoting.UserRequest.perform(UserRequest.java:54)\r\n15:02:29  \tat hudson.remoting.Request$2.run(Request.java:377)\r\n15:02:29  \tat hudson.remoting.InterceptingExecutorService.lambda$wrap$0(InterceptingExecutorService.java:78)\r\n15:02:29  \tat java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\n15:02:29  \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n15:02:29  \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n15:02:29  \tat hudson.remoting.Engine$1.lambda$newThread$0(Engine.java:125)\r\n15:02:29  \tat java.base/java.lang.Thread.run(Unknown Source)\r\n15:02:29  \tSuppressed: hudson.remoting.Channel$CallSiteStackTrace: Remote call to JNLP4-connect connection from ip-10-20-119-149.us-west-2.compute.internal/10.20.119.149:53594\r\n15:02:29  \t\tat hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1784)\r\n15:02:29  \t\tat hudson.remoting.UserRequest$ExceptionResponse.retrieve(UserRequest.java:356)\r\n15:02:29  \t\tat hudson.remoting.Channel.call(Channel.java:1000)\r\n15:02:29  \t\tat org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.execute(RemoteGitImpl.java:143)\r\n15:02:29  \t\tat jdk.internal.reflect.GeneratedMethodAccessor745.invoke(Unknown Source)\r\n15:02:29  \t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n15:02:29  \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n15:02:29  \t\tat org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.invoke(RemoteGitImpl.java:129)\r\n15:02:29  \t\tat com.sun.proxy.$Proxy108.execute(Unknown Source)\r\n15:02:29  \t\tat hudson.plugins.git.GitSCM.retrieveChanges(GitSCM.java:1226)\r\n15:02:29  \t\tat hudson.plugins.git.GitSCM.checkout(GitSCM.java:1309)\r\n15:02:29  \t\tat org.jenkinsci.plugins.workflow.steps.scm.SCMStep.checkout(SCMStep.java:129)\r\n15:02:29  \t\tat org.jenkinsci.plugins.workflow.steps.scm.SCMStep$StepExecutionImpl.run(SCMStep.java:97)\r\n15:02:29  \t\tat org.jenkinsci.plugins.workflow.steps.scm.SCMStep$StepExecutionImpl.run(SCMStep.java:84)\r\n15:02:29  \t\tat org.jenkinsci.plugins.workflow.steps.SynchronousNonBlockingStepExecution.lambda$start$0(SynchronousNonBlockingStepExecution.java:47)\r\n15:02:29  \t\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n15:02:29  \t\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n15:02:29  \t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n15:02:29  \t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n15:02:29  \t\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n15:02:29  Caused by: hudson.plugins.git.GitException: Command &quot;/usr/bin/git init /home/jenkins/agent/workspace/test_container_main/infra-kit&quot; returned status code 1:\r\n15:02:29  stdout: \r\n15:02:29  stderr: /home/jenkins/agent/workspace/test_container_main/infra-kit/.git: Permission denied\r\n15:02:29  \r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2734)\r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2660)\r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2656)\r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:1981)\r\n15:02:29  \tat org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:1047)\r\n15:02:29  \t... 12 more\r\n```","title":"Jenkins - Git SCM plugin not working when checking out in K8S container slave","body":"<p>I am using Kubernetes plugin and using my own image.\nThis image has git and worked before when I was using ec2 slaves.</p>\n<p>From some reason, after moving to container using K8s plugin I'm getting this issue after using GitSCM checkout plugin.</p>\n<p>But when I use &quot;sh git clone...&quot; it works perfectly.</p>\n<p>what am I missing?  JENKINS-30600? Permission denied?</p>\n<p>How could it be?</p>\n<pre><code>Warning: JENKINS-30600: special launcher org.csanchez.jenkins.plugins.kubernetes.pipeline.ContainerExecDecorator$1@6c6a5bef; decorates RemoteLauncher[hudson.remoting.Channel@124fe7dc:JNLP4-connect connection from ip-10-20-119-149.us-west-2.compute.internal/10.20.119.149:53594] will be ignored (a typical symptom is the Git executable not being run inside a designated container)\n15:02:29  Cloning the remote Git repository\n15:02:29  ERROR: Error cloning remote repo 'origin'\n15:02:29  hudson.plugins.git.GitException: Could not init /home/jenkins/agent/workspace/PR__test_container_main/infra-kit\n15:02:29    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:1049)\n15:02:29    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$2.execute(CliGitAPIImpl.java:802)\n15:02:29    at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$GitCommandMasterToSlaveCallable.call(RemoteGitImpl.java:158)\n15:02:29    at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$GitCommandMasterToSlaveCallable.call(RemoteGitImpl.java:151)\n15:02:29    at hudson.remoting.UserRequest.perform(UserRequest.java:211)\n15:02:29    at hudson.remoting.UserRequest.perform(UserRequest.java:54)\n15:02:29    at hudson.remoting.Request$2.run(Request.java:377)\n15:02:29    at hudson.remoting.InterceptingExecutorService.lambda$wrap$0(InterceptingExecutorService.java:78)\n15:02:29    at java.base/java.util.concurrent.FutureTask.run(Unknown Source)\n15:02:29    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n15:02:29    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n15:02:29    at hudson.remoting.Engine$1.lambda$newThread$0(Engine.java:125)\n15:02:29    at java.base/java.lang.Thread.run(Unknown Source)\n15:02:29    Suppressed: hudson.remoting.Channel$CallSiteStackTrace: Remote call to JNLP4-connect connection from ip-10-20-119-149.us-west-2.compute.internal/10.20.119.149:53594\n15:02:29        at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1784)\n15:02:29        at hudson.remoting.UserRequest$ExceptionResponse.retrieve(UserRequest.java:356)\n15:02:29        at hudson.remoting.Channel.call(Channel.java:1000)\n15:02:29        at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.execute(RemoteGitImpl.java:143)\n15:02:29        at jdk.internal.reflect.GeneratedMethodAccessor745.invoke(Unknown Source)\n15:02:29        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n15:02:29        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n15:02:29        at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.invoke(RemoteGitImpl.java:129)\n15:02:29        at com.sun.proxy.$Proxy108.execute(Unknown Source)\n15:02:29        at hudson.plugins.git.GitSCM.retrieveChanges(GitSCM.java:1226)\n15:02:29        at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1309)\n15:02:29        at org.jenkinsci.plugins.workflow.steps.scm.SCMStep.checkout(SCMStep.java:129)\n15:02:29        at org.jenkinsci.plugins.workflow.steps.scm.SCMStep$StepExecutionImpl.run(SCMStep.java:97)\n15:02:29        at org.jenkinsci.plugins.workflow.steps.scm.SCMStep$StepExecutionImpl.run(SCMStep.java:84)\n15:02:29        at org.jenkinsci.plugins.workflow.steps.SynchronousNonBlockingStepExecution.lambda$start$0(SynchronousNonBlockingStepExecution.java:47)\n15:02:29        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n15:02:29        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n15:02:29        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n15:02:29        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n15:02:29        at java.base/java.lang.Thread.run(Thread.java:829)\n15:02:29  Caused by: hudson.plugins.git.GitException: Command &quot;/usr/bin/git init /home/jenkins/agent/workspace/test_container_main/infra-kit&quot; returned status code 1:\n15:02:29  stdout: \n15:02:29  stderr: /home/jenkins/agent/workspace/test_container_main/infra-kit/.git: Permission denied\n15:02:29  \n15:02:29    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2734)\n15:02:29    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2660)\n15:02:29    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2656)\n15:02:29    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:1981)\n15:02:29    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:1047)\n15:02:29    ... 12 more\n</code></pre>\n"},{"tags":["java","sql","postgresql","hibernate","hibernate-envers"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1677765754,"post_id":75616463,"comment_id":133405222,"body_markdown":"Why do you have a CROSS JOIN with a join condition in the WHERE clause? Can&#39;t you do a regular INNER JOIN instead?","body":"Why do you have a CROSS JOIN with a join condition in the WHERE clause? Can&#39;t you do a regular INNER JOIN instead?"},{"owner":{"account_id":27103103,"reputation":1,"user_id":20649348,"display_name":"ggrigorov"},"score":0,"creation_date":1677766088,"post_id":75616463,"comment_id":133405328,"body_markdown":"Hibernate does that. For me, that is the long way to write inner join and I don&#39;t understand why Envers does that.","body":"Hibernate does that. For me, that is the long way to write inner join and I don&#39;t understand why Envers does that."},{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1677830357,"post_id":75616463,"comment_id":133418284,"body_markdown":"What strange database version are you using that does not see this SQL is the same as an inner join?","body":"What strange database version are you using that does not see this SQL is the same as an inner join?"}],"owner":{"account_id":27103103,"reputation":1,"user_id":20649348,"display_name":"ggrigorov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677765707,"creation_date":1677765571,"question_id":75616463,"body_markdown":"i need to take the entries from **entity_name_aud** and **revinfo** tables using filter for **contract_id**. \r\n\r\n```\r\n...\r\nAuditQuery query = auditReader.createQuery()\r\n            .forRevisionsOfEntity(EntityName.class, false, true)\r\n            .add(filter);\r\n\r\n return query.getResultList();\r\n}\r\n```\r\nHibernate: \r\n\r\n```\r\n    select\r\n        e0_.id,\r\n        e0_.content_id,\r\n        e0_.rev,\r\n        r1_.rev,\r\n        e0_.revtype,\r\n        e0_.content,\r\n        r1_.revtstmp,\r\n        r1_.updated_by \r\n    from\r\n        entity_name_aud e0_ \r\n    cross join\r\n        revinfo r1_ \r\n    where\r\n        e0_.contract_id=? \r\n        and e0_.rev=r1_.rev\r\n```\r\n\r\nUnfortunately, this code generates cross join between those tables, which results in bad performance. Is it possible to change the cross join to left join. \r\n\r\n\r\nI checked Hibernate Envers documentation and didn&#39;t help much. \r\n\r\nPS: I have simplified the hibernate log for the cross join.","title":"How to avoid Hibernate Envers cross join?","body":"<p>i need to take the entries from <strong>entity_name_aud</strong> and <strong>revinfo</strong> tables using filter for <strong>contract_id</strong>.</p>\n<pre><code>...\nAuditQuery query = auditReader.createQuery()\n            .forRevisionsOfEntity(EntityName.class, false, true)\n            .add(filter);\n\n return query.getResultList();\n}\n</code></pre>\n<p>Hibernate:</p>\n<pre><code>    select\n        e0_.id,\n        e0_.content_id,\n        e0_.rev,\n        r1_.rev,\n        e0_.revtype,\n        e0_.content,\n        r1_.revtstmp,\n        r1_.updated_by \n    from\n        entity_name_aud e0_ \n    cross join\n        revinfo r1_ \n    where\n        e0_.contract_id=? \n        and e0_.rev=r1_.rev\n</code></pre>\n<p>Unfortunately, this code generates cross join between those tables, which results in bad performance. Is it possible to change the cross join to left join.</p>\n<p>I checked Hibernate Envers documentation and didn't help much.</p>\n<p>PS: I have simplified the hibernate log for the cross join.</p>\n"},{"tags":["java","edi"],"comments":[{"owner":{"account_id":18109258,"reputation":447,"user_id":13166430,"display_name":"Eimantas G"},"score":0,"creation_date":1677766022,"post_id":75616256,"comment_id":133405307,"body_markdown":"I think you should try using newer versions of these dependencies. Looks like for most of them newer version `1.7.1.0` is available. Use this https://mvnrepository.com/search?q=org.milyn.edi.unedifact page to find newest versions of your dependencies.","body":"I think you should try using newer versions of these dependencies. Looks like for most of them newer version <code>1.7.1.0</code> is available. Use this <a href=\"https://mvnrepository.com/search?q=org.milyn.edi.unedifact\" rel=\"nofollow noreferrer\">mvnrepository.com/search?q=org.milyn.edi.unedifact</a> page to find newest versions of your dependencies."},{"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"score":0,"creation_date":1677772978,"post_id":75616256,"comment_id":133407575,"body_markdown":"I tried but still doesn&#39;t work","body":"I tried but still doesn&#39;t work"},{"owner":{"account_id":18109258,"reputation":447,"user_id":13166430,"display_name":"Eimantas G"},"score":0,"creation_date":1677773988,"post_id":75616256,"comment_id":133407907,"body_markdown":"Then maybe you are missing https://mvnrepository.com/artifact/org.milyn.edi.unedifact/d03b-mapping this dependecy?","body":"Then maybe you are missing <a href=\"https://mvnrepository.com/artifact/org.milyn.edi.unedifact/d03b-mapping\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.milyn.edi.unedifact/d03b-mapp&zwnj;&#8203;ing</a> this dependecy?"},{"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"score":0,"creation_date":1677777522,"post_id":75616256,"comment_id":133409029,"body_markdown":"@EimantasG still doesn&#39;t work.","body":"@EimantasG still doesn&#39;t work."}],"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677764582,"creation_date":1677764582,"question_id":75616256,"body_markdown":"I am trying to following this tutorial [https://sites.google.com/site/smooksorg/documentation/documentation-smooks-1-1-x/examples/example---edi-to-xml][1] but I am getting in the following error:\r\n\r\n    Failed to locate jar file for EDI Mapping Model URN &#39;org.milyn.edi.unedifact:d03b-mapping:1.7.1.0&#39;.  Jar must be available on classpath.\r\n\r\nThis is my code snippet:\r\n\r\n    public class Main {\r\n    \r\n        protected static String runSmooksTransform() throws IOException, SAXException, SmooksException {\r\n    \r\n            // Configure Smooks using a Smooks config...\r\n            //Smooks smooks = new Smooks(&quot;smooks-config.xml&quot;);\r\n    \r\n            // Or, configure Smooks programmatically...\r\n            Smooks smooks = new Smooks();\r\n            smooks.setReaderConfig(new UNEdifactReaderConfigurator(&quot;urn:org.milyn.edi.unedifact:d03b-mapping:1.7.1.0&quot;));\r\n    \r\n            try {\r\n                StringWriter writer = new StringWriter();\r\n    //I AM GETTING ERROR THIS LINE\r\n                smooks.filterSource(new StreamSource(new FileInputStream(&quot;to-xml/apis.txt&quot;)), new StreamResult(writer));\r\n    \r\n                return writer.toString();\r\n            } finally {\r\n                smooks.close();\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) throws IOException, SAXException, SmooksException {\r\n            System.out.println(&quot;\\n\\n==============Message In==============&quot;);\r\n            System.out.println(readInputMessage());\r\n            System.out.println(&quot;======================================\\n&quot;);\r\n    \r\n            String messageOut = Main.runSmooksTransform();\r\n    \r\n            System.out.println(&quot;==============Message Out=============&quot;);\r\n            System.out.println(messageOut);\r\n            System.out.println(&quot;======================================\\n\\n&quot;);\r\n        }\r\n    \r\n        private static String readInputMessage() throws IOException {\r\n            return StreamUtils.readStreamAsString(new FileInputStream(&quot;to-xml/apis.txt&quot;));\r\n        }\r\n    }\r\n    \r\nand this is my pom xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.milyn&lt;/groupId&gt;\r\n            &lt;artifactId&gt;unedifact-examples&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5-SNAPSHOT&lt;/version&gt; &lt;!-- base pom version - do not remove this comment --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;name&gt;Milyn Smooks Example - UN/EDIFACT - To XML&lt;/name&gt;\r\n        &lt;artifactId&gt;milyn-smooks-example-unedifact-to-xml&lt;/artifactId&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n    \r\n            &lt;!-- Smooks --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.milyn&lt;/groupId&gt;\r\n                &lt;artifactId&gt;milyn-smooks-all&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.milyn&lt;/groupId&gt;\r\n                &lt;artifactId&gt;testres&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.milyn&lt;/groupId&gt;\r\n                &lt;artifactId&gt;milyn-edisax-parser&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- Smooks EDI Cartridge --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.milyn&lt;/groupId&gt;\r\n                &lt;artifactId&gt;milyn-smooks-edi&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    &lt;!--        &lt;dependency&gt;--&gt;\r\n    &lt;!--            &lt;groupId&gt;org.milyn&lt;/groupId&gt;--&gt;\r\n    &lt;!--            &lt;artifactId&gt;milyn-smooks-edi&lt;/artifactId&gt;--&gt;\r\n    &lt;!--            &lt;version&gt;1.7.1&lt;/version&gt;--&gt;\r\n    &lt;!--        &lt;/dependency&gt;--&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.milyn.edi.unedifact&lt;/groupId&gt;\r\n                &lt;artifactId&gt;d99b-mapping&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.milyn.edi.unedifact&lt;/groupId&gt;\r\n                &lt;artifactId&gt;d95a-mapping&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.milyn.edi.unedifact&lt;/groupId&gt;\r\n                &lt;artifactId&gt;d95b-mapping&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n        \r\n    \r\n    &lt;/project&gt;\r\n\r\nWhat exactly do am I? I don&#39;t know where I went wrong? I would be glad if you help. \r\n\r\n  [1]: https://sites.google.com/site/smooksorg/documentation/documentation-smooks-1-1-x/examples/example---edi-to-xml","title":"Failed to locate jar file for EDI Mapping Model URN &#39;org.milyn.edi.unedifact:d03b-mapping:1.7.1.0&#39;. Jar must be available on classpath","body":"<p>I am trying to following this tutorial <a href=\"https://sites.google.com/site/smooksorg/documentation/documentation-smooks-1-1-x/examples/example---edi-to-xml\" rel=\"nofollow noreferrer\">https://sites.google.com/site/smooksorg/documentation/documentation-smooks-1-1-x/examples/example---edi-to-xml</a> but I am getting in the following error:</p>\n<pre><code>Failed to locate jar file for EDI Mapping Model URN 'org.milyn.edi.unedifact:d03b-mapping:1.7.1.0'.  Jar must be available on classpath.\n</code></pre>\n<p>This is my code snippet:</p>\n<pre><code>public class Main {\n\n    protected static String runSmooksTransform() throws IOException, SAXException, SmooksException {\n\n        // Configure Smooks using a Smooks config...\n        //Smooks smooks = new Smooks(&quot;smooks-config.xml&quot;);\n\n        // Or, configure Smooks programmatically...\n        Smooks smooks = new Smooks();\n        smooks.setReaderConfig(new UNEdifactReaderConfigurator(&quot;urn:org.milyn.edi.unedifact:d03b-mapping:1.7.1.0&quot;));\n\n        try {\n            StringWriter writer = new StringWriter();\n//I AM GETTING ERROR THIS LINE\n            smooks.filterSource(new StreamSource(new FileInputStream(&quot;to-xml/apis.txt&quot;)), new StreamResult(writer));\n\n            return writer.toString();\n        } finally {\n            smooks.close();\n        }\n    }\n\n    public static void main(String[] args) throws IOException, SAXException, SmooksException {\n        System.out.println(&quot;\\n\\n==============Message In==============&quot;);\n        System.out.println(readInputMessage());\n        System.out.println(&quot;======================================\\n&quot;);\n\n        String messageOut = Main.runSmooksTransform();\n\n        System.out.println(&quot;==============Message Out=============&quot;);\n        System.out.println(messageOut);\n        System.out.println(&quot;======================================\\n\\n&quot;);\n    }\n\n    private static String readInputMessage() throws IOException {\n        return StreamUtils.readStreamAsString(new FileInputStream(&quot;to-xml/apis.txt&quot;));\n    }\n}\n</code></pre>\n<p>and this is my pom xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.milyn&lt;/groupId&gt;\n        &lt;artifactId&gt;unedifact-examples&lt;/artifactId&gt;\n        &lt;version&gt;1.5-SNAPSHOT&lt;/version&gt; &lt;!-- base pom version - do not remove this comment --&gt;\n    &lt;/parent&gt;\n    &lt;name&gt;Milyn Smooks Example - UN/EDIFACT - To XML&lt;/name&gt;\n    &lt;artifactId&gt;milyn-smooks-example-unedifact-to-xml&lt;/artifactId&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- Smooks --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.milyn&lt;/groupId&gt;\n            &lt;artifactId&gt;milyn-smooks-all&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.milyn&lt;/groupId&gt;\n            &lt;artifactId&gt;testres&lt;/artifactId&gt;\n            &lt;version&gt;1.6&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.milyn&lt;/groupId&gt;\n            &lt;artifactId&gt;milyn-edisax-parser&lt;/artifactId&gt;\n            &lt;version&gt;1.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Smooks EDI Cartridge --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.milyn&lt;/groupId&gt;\n            &lt;artifactId&gt;milyn-smooks-edi&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.milyn&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;milyn-smooks-edi&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;1.7.1&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.milyn.edi.unedifact&lt;/groupId&gt;\n            &lt;artifactId&gt;d99b-mapping&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.milyn.edi.unedifact&lt;/groupId&gt;\n            &lt;artifactId&gt;d95a-mapping&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.milyn.edi.unedifact&lt;/groupId&gt;\n            &lt;artifactId&gt;d95b-mapping&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    \n\n&lt;/project&gt;\n</code></pre>\n<p>What exactly do am I? I don't know where I went wrong? I would be glad if you help.</p>\n"},{"tags":["java","arrays","byte"],"comments":[{"owner":{"account_id":217925,"reputation":711,"user_id":473973,"accept_rate":62,"display_name":"user473973"},"score":1,"creation_date":1394639457,"post_id":22356792,"comment_id":33981318,"body_markdown":"What do you mean by &quot;can&#39;t seem to get the length of the array correctly&quot;?","body":"What do you mean by &quot;can&#39;t seem to get the length of the array correctly&quot;?"},{"owner":{"display_name":"user1907906"},"score":0,"creation_date":1394639487,"post_id":22356792,"comment_id":33981342,"body_markdown":"Why not? What error do you get?","body":"Why not? What error do you get?"},{"owner":{"display_name":"user3383062"},"score":0,"creation_date":1394639489,"post_id":22356792,"comment_id":33981343,"body_markdown":"Netbeans shows an error &#39;cannot find symbol&#39;.","body":"Netbeans shows an error &#39;cannot find symbol&#39;."},{"owner":{"account_id":1626752,"reputation":9002,"user_id":1502148,"accept_rate":25,"display_name":"G&#225;bor Bakos"},"score":0,"creation_date":1394639527,"post_id":22356792,"comment_id":33981381,"body_markdown":"Why do you think that is the case? Did you get an error? (You should use `bytes.length` instead of `bytes.length()`.)","body":"Why do you think that is the case? Did you get an error? (You should use <code>bytes.length</code> instead of <code>bytes.length()</code>.)"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":2,"creation_date":1394639581,"post_id":22356792,"comment_id":33981424,"body_markdown":"-1 for not including the exact compiler error message.","body":"-1 for not including the exact compiler error message."},{"owner":{"display_name":"user3383062"},"score":0,"creation_date":1394639636,"post_id":22356792,"comment_id":33981478,"body_markdown":"Sorry, fairly new to stack.","body":"Sorry, fairly new to stack."},{"owner":{"account_id":1220565,"reputation":3341,"user_id":1187293,"accept_rate":88,"display_name":"SteveL"},"score":0,"creation_date":1394639807,"post_id":22356792,"comment_id":33981630,"body_markdown":"Your should accept one of the answers,thats how SO works","body":"Your should accept one of the answers,thats how SO works"},{"owner":{"display_name":"user3383062"},"score":0,"creation_date":1394640000,"post_id":22356792,"comment_id":33981786,"body_markdown":"It asks me to wait 10 minutes before doing that.","body":"It asks me to wait 10 minutes before doing that."}],"answers":[{"tags":[],"owner":{"account_id":2789385,"reputation":7148,"user_id":2399935,"accept_rate":86,"display_name":"Brian"},"comment_count":0,"down_vote_count":0,"up_vote_count":81,"is_accepted":true,"score":81,"last_activity_date":1394639460,"creation_date":1394639460,"answer_id":22356830,"question_id":22356792,"body_markdown":"Use `bytes.length` without the `()`","title":"Length of byte[] array","body":"<p>Use <code>bytes.length</code> without the <code>()</code></p>\n"},{"tags":[],"owner":{"account_id":3534754,"reputation":38579,"user_id":2953344,"accept_rate":75,"display_name":"Sabuj Hassan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394639507,"creation_date":1394639507,"answer_id":22356855,"question_id":22356792,"body_markdown":"Its not `bytes.length()`, its `bytes.length`","title":"Length of byte[] array","body":"<p>Its not <code>bytes.length()</code>, its <code>bytes.length</code></p>\n"},{"tags":[],"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1394639522,"creation_date":1394639522,"answer_id":22356869,"question_id":22356792,"body_markdown":"See the [JLS - 10.7. Array Members][1]:\r\n\r\n&gt; The members of an array type are all of the following:\r\n&gt; \r\n&gt; The `public final field length`, which contains the number of components\r\n&gt; of the array. length may be positive or zero.\r\n\r\n`length` is a *property*, not a method. You should write:\r\n\r\n    bytes.length\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7\r\n","title":"Length of byte[] array","body":"<p>See the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7\">JLS - 10.7. Array Members</a>:</p>\n\n<blockquote>\n  <p>The members of an array type are all of the following:</p>\n  \n  <p>The <code>public final field length</code>, which contains the number of components\n  of the array. length may be positive or zero.</p>\n</blockquote>\n\n<p><code>length</code> is a <em>property</em>, not a method. You should write:</p>\n\n<pre><code>bytes.length\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1470573,"reputation":29818,"user_id":1382251,"accept_rate":68,"display_name":"barak manos"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1394639645,"creation_date":1394639645,"answer_id":22356927,"question_id":22356792,"body_markdown":"In order to get the length of an array, use `length`. For example:\r\n\r\n    int[] arr = {1,2,3};\r\n    int length = arr.length;\r\n\r\nIn order to get the length of a string, use `length()`. For example:\r\n\r\n    String str = &quot;123&quot;;\r\n    int length = str.length();\r\n","title":"Length of byte[] array","body":"<p>In order to get the length of an array, use <code>length</code>. For example:</p>\n\n<pre><code>int[] arr = {1,2,3};\nint length = arr.length;\n</code></pre>\n\n<p>In order to get the length of a string, use <code>length()</code>. For example:</p>\n\n<pre><code>String str = \"123\";\nint length = str.length();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2077900,"reputation":4268,"user_id":1850710,"accept_rate":43,"display_name":"Sudz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394639762,"creation_date":1394639762,"answer_id":22356980,"question_id":22356792,"body_markdown":"getBytes() Encodes the String into a sequence of bytes using the platform&#39;s default charset, storing the result into a new byte array.\r\n\r\nTry to print the bytes you will see the encoded values which may differ in length compare to original string.","title":"Length of byte[] array","body":"<p>getBytes() Encodes the String into a sequence of bytes using the platform's default charset, storing the result into a new byte array.</p>\n\n<p>Try to print the bytes you will see the encoded values which may differ in length compare to original string.</p>\n"},{"tags":[],"owner":{"account_id":27918798,"reputation":1,"user_id":21319414,"display_name":"AYUSH KUMAR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677764405,"creation_date":1677764405,"answer_id":75616214,"question_id":22356792,"body_markdown":"I second Sabuj&#39;s comment. It should be `bytes.length`","title":"Length of byte[] array","body":"<p>I second Sabuj's comment. It should be <code>bytes.length</code></p>\n"}],"owner":{"display_name":"user3383062"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126853,"favorite_count":0,"down_vote_count":1,"up_vote_count":31,"accepted_answer_id":22356830,"answer_count":6,"score":30,"last_activity_date":1677764405,"creation_date":1394639374,"question_id":22356792,"body_markdown":"    String str = &quot;123456789&quot;;\r\n    byte[] bytes = str.getBytes();\r\n\r\nI want to make the following loop\r\n\r\n    for (int j = 0; j &lt; bytes.length(); j++) {\r\n      b = bytes[j];\r\n    }\r\n\r\n`b` will store each byte of my array, but I can&#39;t seem to get the length of the array correctly.\r\n\r\n    Error:cannot find symbol\r\n    Problem solved:  bytes.length instead of  bytes.length()","title":"Length of byte[] array","body":"<pre><code>String str = \"123456789\";\nbyte[] bytes = str.getBytes();\n</code></pre>\n\n<p>I want to make the following loop</p>\n\n<pre><code>for (int j = 0; j &lt; bytes.length(); j++) {\n  b = bytes[j];\n}\n</code></pre>\n\n<p><code>b</code> will store each byte of my array, but I can't seem to get the length of the array correctly.</p>\n\n<pre><code>Error:cannot find symbol\nProblem solved:  bytes.length instead of  bytes.length()\n</code></pre>\n"},{"tags":["java","flutter","oop"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1677764407,"post_id":75616124,"comment_id":133404772,"body_markdown":"Ok. What did you set it to? What happens when you `echo %JAVA_HOME%`? Are you on Windows? Where did you install Java? Please don&#39;t ask us to guess.","body":"Ok. What did you set it to? What happens when you <code>echo %JAVA_HOME%</code>? Are you on Windows? Where did you install Java? Please don&#39;t ask us to guess."},{"owner":{"account_id":9472425,"reputation":582,"user_id":9741277,"display_name":"leun4m"},"score":0,"creation_date":1677764800,"post_id":75616124,"comment_id":133404895,"body_markdown":"Did you restart your terminal after setting `JAVA_HOME`? If you adjust your environment, properties might not be reloaded. To be completely sure it might be wise to restart or simply logout / login in your OS :)","body":"Did you restart your terminal after setting <code>JAVA_HOME</code>? If you adjust your environment, properties might not be reloaded. To be completely sure it might be wise to restart or simply logout / login in your OS :)"},{"owner":{"account_id":26610498,"reputation":1,"user_id":20230760,"display_name":"Barış G&#252;neri"},"score":0,"creation_date":1677767038,"post_id":75616124,"comment_id":133405663,"body_markdown":"Already answered. this will help https://stackoverflow.com/a/68496027/20230760","body":"Already answered. this will help <a href=\"https://stackoverflow.com/a/68496027/20230760\">stackoverflow.com/a/68496027/20230760</a>"},{"owner":{"account_id":26542412,"reputation":2015,"user_id":20172954,"display_name":"Yash Mehta"},"score":0,"creation_date":1677837829,"post_id":75616124,"comment_id":133420124,"body_markdown":"Does this answer your question? [ERROR: JAVA\\_HOME is not set and no &#39;java&#39; command could be found in your flutter PATH. In Flutter](https://stackoverflow.com/questions/64359564/error-java-home-is-not-set-and-no-java-command-could-be-found-in-your-flutter)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/64359564/error-java-home-is-not-set-and-no-java-command-could-be-found-in-your-flutter\">ERROR: JAVA_HOME is not set and no &#39;java&#39; command could be found in your flutter PATH. In Flutter</a>"}],"owner":{"account_id":27202585,"reputation":1,"user_id":20734654,"display_name":"genius"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677764171,"creation_date":1677763939,"question_id":75616124,"body_markdown":"When I am using command prompt then write a doctor flutter --android-licenses then an error show on \r\nPlease set the JAVA_HOME variable in your environment to match the\r\nlocation of your Java installation.\r\n\r\n\r\nI tied to add a java variable in system environment but when I open it again command prompt writes again the error remains same ","title":"java variable path in system envirnoment","body":"<p>When I am using command prompt then write a doctor flutter --android-licenses then an error show on\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.</p>\n<p>I tied to add a java variable in system environment but when I open it again command prompt writes again the error remains same</p>\n"},{"tags":["java","session","https","jmeter","jmeter-plugins"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1677757431,"post_id":75614890,"comment_id":133402770,"body_markdown":"An internal server error is just that: something happens on the server. Check the server logs. If it&#39;s a java application, look for a stacktrace. Without more details, nobody can help you.","body":"An internal server error is just that: something happens on the server. Check the server logs. If it&#39;s a java application, look for a stacktrace. Without more details, nobody can help you."},{"owner":{"account_id":1922777,"reputation":25,"user_id":1733869,"display_name":"ankit dasani"},"score":0,"creation_date":1677757673,"post_id":75614890,"comment_id":133402833,"body_markdown":"I just want to know why only the login failed and the rest of the requests are passed successfully.","body":"I just want to know why only the login failed and the rest of the requests are passed successfully."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1677759918,"post_id":75614890,"comment_id":133403476,"body_markdown":"as I said before: the error happens on the server. There&#39;s no way to tell that without inspecting what happens on the server.","body":"as I said before: the error happens on the server. There&#39;s no way to tell that without inspecting what happens on the server."}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677764157,"creation_date":1677764157,"answer_id":75616167,"question_id":75614890,"body_markdown":" 1. [HTTP Status Code 500][1] means **Internal Server Error**, from JMeter&#39;s perspective you can only cross-check the request and compare it with the request sent by the real browser (or other application). The requests must be exactly the same (apart from dynamic values which need to be [correlated][2])\r\n\r\n    Once you configure JMeter to behave like a real browser (or other application) the request should be executed successfully. \r\n\r\n    Also given HTTP 5xx errors are **server** side errors it worth checking your application logs for any suspicious entries, most probably you will be able to figure out what&#39;s wrong from there. \r\n\r\n 2. &gt;other responses it passed\r\n\r\n    If JMeter shows &quot;green&quot; marks it doesn&#39;t necessarily mean that the request is &quot;passed&quot;. JMeter automatically considers responses with [status codes][3] below 400 as successful. If you&#39;re getting [HTTP 200 OK][4] it means that the request is successful from the HTTP protocol perspective and it doesn&#39;t mean that the request is doing what it is supposed to be doing. Most probably you&#39;re hitting login page and no CRUD operations are being performed. Check response body using [View Results Tree][5] listener to see if this is the case. \r\n\r\n    In order to avoid such &quot;false positive&quot; results going forward consider adding [Response Assertions][6] to your samplers to check if the response contains anticipated values or doesn&#39;t contain errors or both. This way you will get confidence that your script is doing what it is supposed to be doing and you&#39;re getting expected response back from the server    \r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500\r\n  [2]: https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html#correlate-start\r\n  [3]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status\r\n  [4]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200\r\n  [5]: https://jmeter.apache.org/usermanual/component_reference.html#View_Results_Tree\r\n  [6]: https://www.blazemeter.com/blog/response-assertions-in-jmeter","title":"In login response throws 500 error but script is run successfully","body":"<ol>\n<li><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500\" rel=\"nofollow noreferrer\">HTTP Status Code 500</a> means <strong>Internal Server Error</strong>, from JMeter's perspective you can only cross-check the request and compare it with the request sent by the real browser (or other application). The requests must be exactly the same (apart from dynamic values which need to be <a href=\"https://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.html#correlate-start\" rel=\"nofollow noreferrer\">correlated</a>)</p>\n<p>Once you configure JMeter to behave like a real browser (or other application) the request should be executed successfully.</p>\n<p>Also given HTTP 5xx errors are <strong>server</strong> side errors it worth checking your application logs for any suspicious entries, most probably you will be able to figure out what's wrong from there.</p>\n</li>\n<li>\n<blockquote>\n<p>other responses it passed</p>\n</blockquote>\n<p>If JMeter shows &quot;green&quot; marks it doesn't necessarily mean that the request is &quot;passed&quot;. JMeter automatically considers responses with <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status\" rel=\"nofollow noreferrer\">status codes</a> below 400 as successful. If you're getting <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200\" rel=\"nofollow noreferrer\">HTTP 200 OK</a> it means that the request is successful from the HTTP protocol perspective and it doesn't mean that the request is doing what it is supposed to be doing. Most probably you're hitting login page and no CRUD operations are being performed. Check response body using <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#View_Results_Tree\" rel=\"nofollow noreferrer\">View Results Tree</a> listener to see if this is the case.</p>\n<p>In order to avoid such &quot;false positive&quot; results going forward consider adding <a href=\"https://www.blazemeter.com/blog/response-assertions-in-jmeter\" rel=\"nofollow noreferrer\">Response Assertions</a> to your samplers to check if the response contains anticipated values or doesn't contain errors or both. This way you will get confidence that your script is doing what it is supposed to be doing and you're getting expected response back from the server</p>\n</li>\n</ol>\n"}],"owner":{"account_id":1922777,"reputation":25,"user_id":1733869,"display_name":"ankit dasani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677764157,"creation_date":1677756954,"question_id":75614890,"body_markdown":"I have a script that performs login then some operations and logout.\r\n\r\nBut when I run the script with 1 user. at that time login request failed and in response throws a 500(internal server error) error message. when I checked the other responses it passed, the operation was successfully performed including logout as well.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIn addition, when I changed the Login request from POST to GET and run again the same script at that time login is passed but the creation operation failed. \r\n\r\nkindly suggest how to manage login requests and how to overcome the 500 error codes for this login request.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/w5dFW.png\r\n  [2]: https://i.stack.imgur.com/SSg8u.png","title":"In login response throws 500 error but script is run successfully","body":"<p>I have a script that performs login then some operations and logout.</p>\n<p>But when I run the script with 1 user. at that time login request failed and in response throws a 500(internal server error) error message. when I checked the other responses it passed, the operation was successfully performed including logout as well.</p>\n<p><a href=\"https://i.stack.imgur.com/w5dFW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w5dFW.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/SSg8u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SSg8u.png\" alt=\"enter image description here\" /></a></p>\n<p>In addition, when I changed the Login request from POST to GET and run again the same script at that time login is passed but the creation operation failed.</p>\n<p>kindly suggest how to manage login requests and how to overcome the 500 error codes for this login request.</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1677762133,"post_id":75615124,"comment_id":133404068,"body_markdown":"Exit code 1 means: (spring boot app) failed to start! (Try to get more logs)...upgrading from 2.7 to 3 is not trivial!! Please follow [upgrade guide](https://docs.spring.io/spring-boot/docs/current/reference/html/upgrading.html#upgrading).","body":"Exit code 1 means: (spring boot app) failed to start! (Try to get more logs)...upgrading from 2.7 to 3 is not trivial!! Please follow <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/upgrading.html#upgrading\" rel=\"nofollow noreferrer\">upgrade guide</a>."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1677762468,"post_id":75615124,"comment_id":133404152,"body_markdown":"&quot;Since this is a major release of Spring Boot, upgrading existing applications can be a little more involved that usual...&quot; from [3.0 release notes](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes)","body":"&quot;Since this is a major release of Spring Boot, upgrading existing applications can be a little more involved that usual...&quot; from <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\" rel=\"nofollow noreferrer\">3.0 release notes</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1677762564,"post_id":75615124,"comment_id":133404182,"body_markdown":"How about `mvn clean install`? (Or `package`;)","body":"How about <code>mvn clean install</code>? (Or <code>package</code>;)"},{"owner":{"account_id":5243888,"reputation":101,"user_id":4190206,"display_name":"iron24"},"score":1,"creation_date":1677762603,"post_id":75615124,"comment_id":133404189,"body_markdown":"Did all lof the above things. Went through the upgrade guide. Mvn clean and package works. I just can&#39;t run the application.","body":"Did all lof the above things. Went through the upgrade guide. Mvn clean and package works. I just can&#39;t run the application."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1677762784,"post_id":75615124,"comment_id":133404254,"body_markdown":"Also: &quot;IMPORTANT:For spring-boot v3 support, make sure you use [springdoc-openapi v2](https://springdoc.org/v2)&quot; ..from [springdoc](https://springdoc.org/)","body":"Also: &quot;IMPORTANT:For spring-boot v3 support, make sure you use <a href=\"https://springdoc.org/v2\" rel=\"nofollow noreferrer\">springdoc-openapi v2</a>&quot; ..from <a href=\"https://springdoc.org/\" rel=\"nofollow noreferrer\">springdoc</a>"},{"owner":{"account_id":5243888,"reputation":101,"user_id":4190206,"display_name":"iron24"},"score":1,"creation_date":1677763958,"post_id":75615124,"comment_id":133404614,"body_markdown":"Didn&#39;t work sadly, upgraded springdocs to 2.0.2. This part would have caused issues too I guess, so thank you anyway!","body":"Didn&#39;t work sadly, upgraded springdocs to 2.0.2. This part would have caused issues too I guess, so thank you anyway!"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1677765277,"post_id":75615124,"comment_id":133405048,"body_markdown":"Remove the properties you are using to define of spring-boot dependencies. Let the parent define them... that&#39;s the idea of using the parent... things like spring-security etc. also check the release notes of Spring Boot... what has changed in 3.X","body":"Remove the properties you are using to define of spring-boot dependencies. Let the parent define them... that&#39;s the idea of using the parent... things like spring-security etc. also check the release notes of Spring Boot... what has changed in 3.X"}],"owner":{"account_id":5243888,"reputation":101,"user_id":4190206,"display_name":"iron24"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":622,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677764126,"creation_date":1677758322,"question_id":75615124,"body_markdown":"Upgraded a Spring boot 2.7 project to 3.0.3 (current latest). When I&#39;m trying to start it with `mvn -e -X spring-boot:run -Dspring-boot.run.profiles=local`. Then I get the following error: \r\n\r\n```\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.0.3:run (default-cli) on project my-project: Process terminated with exit code: 1 -&gt; [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.0.3:run (default-cli) on project my-project: Process terminated with exit code: 1\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:375)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.apache.maven.plugin.MojoExecutionException: Process terminated with exit code: 1\r\n    at org.springframework.boot.maven.JavaProcessExecutor.run (JavaProcessExecutor.java:74)\r\n    at org.springframework.boot.maven.RunMojo.run (RunMojo.java:69)\r\n    at org.springframework.boot.maven.AbstractRunMojo.run (AbstractRunMojo.java:218)\r\n    at org.springframework.boot.maven.AbstractRunMojo.execute (AbstractRunMojo.java:205)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n```\r\n\r\nHere are the relevant pom.xml parts:\r\n\r\n```\r\n  &lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.3&lt;/version&gt;\r\n  &lt;/parent&gt;\r\n\r\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;my-project&lt;/artifactId&gt;\r\n  &lt;version&gt;3.0.3&lt;/version&gt;\r\n\r\n  &lt;name&gt;my-project&lt;/name&gt;\r\n\r\n\r\n\r\n    &lt;properties&gt;\r\n    &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\r\n    &lt;spring-boot.version&gt;${project.parent.version}&lt;/spring-boot.version&gt;\r\n    &lt;spring-cloud.version&gt;2.2.6.RELEASE&lt;/spring-cloud.version&gt;\r\n    &lt;springdoc.version&gt;2.0.2&lt;/springdoc.version&gt;\r\n    &lt;spring-security.version&gt;6.0.2&lt;/spring-security.version&gt;\r\n    &lt;lombok.version&gt;1.18.22&lt;/lombok.version&gt;\r\n    &lt;mapstruct.version&gt;1.5.3.Final&lt;/mapstruct.version&gt;\r\n    &lt;awssdk.version&gt;2.20.15&lt;/awssdk.version&gt;\r\n\r\n    ...\r\n  &lt;/properties&gt;\r\n\r\n\r\n    &lt;dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;2022.0.1&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n        &lt;artifactId&gt;bom&lt;/artifactId&gt;\r\n        &lt;version&gt;${awssdk.version}&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n  &lt;/dependencyManagement&gt;\r\n\r\n\r\n    &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\r\n      &lt;version&gt;2.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- SQS listeners --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-cloud-aws-messaging&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n          &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-cloud-aws-autoconfigure&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n      &lt;artifactId&gt;s3&lt;/artifactId&gt;\r\n      &lt;version&gt;${awssdk.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- API security --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-security.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-security.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-security.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n         &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n      &lt;version&gt;${springdoc.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;springdoc-openapi-starter-common&lt;/artifactId&gt;\r\n      &lt;version&gt;${springdoc.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;springdoc-openapi-starter-webmvc-api&lt;/artifactId&gt;\r\n      &lt;version&gt;${springdoc.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    ....\r\n  &lt;/dependencies&gt;\r\n\r\n&lt;build&gt;\r\n    &lt;resources&gt;\r\n      &lt;resource&gt;\r\n        &lt;filtering&gt;true&lt;/filtering&gt;\r\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n      &lt;/resource&gt;\r\n    &lt;/resources&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.0&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.11.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;${java.version}&lt;/source&gt;\r\n          &lt;target&gt;${java.version}&lt;/target&gt;\r\n          &lt;annotationProcessorPaths&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n              &lt;version&gt;0.2.0&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n              &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n          &lt;/annotationProcessorPaths&gt;\r\n          &lt;compilerArgument&gt;-Xlint:unchecked,deprecation&lt;/compilerArgument&gt;\r\n          &lt;compilerArgs&gt;\r\n            &lt;compilerArg&gt;\r\n              -Amapstruct.suppressGeneratorTimestamp=true\r\n            &lt;/compilerArg&gt;\r\n            &lt;compilerArg&gt;\r\n              -Amapstruct.suppressGeneratorVersionInfoComment=true\r\n            &lt;/compilerArg&gt;\r\n            &lt;compilerArg&gt;\r\n              -Amapstruct.defaultComponentModel=spring\r\n            &lt;/compilerArg&gt;\r\n          &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${maven.resources.plugin}&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;delimiters&gt;\r\n            &lt;delimiter&gt;@&lt;/delimiter&gt;\r\n          &lt;/delimiters&gt;\r\n          &lt;useDefaultDelimiters&gt;false&lt;/useDefaultDelimiters&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n```\r\n\r\nWhat am I missing? There are no more error messages (at least I can&#39;t produce them), and it was working fine with the earlier version of spring. ","title":"Unable to run spring boot 3.0.3 mojo error on run spring-boot-maven-plugin","body":"<p>Upgraded a Spring boot 2.7 project to 3.0.3 (current latest). When I'm trying to start it with <code>mvn -e -X spring-boot:run -Dspring-boot.run.profiles=local</code>. Then I get the following error:</p>\n<pre><code>[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.0.3:run (default-cli) on project my-project: Process terminated with exit code: 1 -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.0.3:run (default-cli) on project my-project: Process terminated with exit code: 1\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:375)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Process terminated with exit code: 1\n    at org.springframework.boot.maven.JavaProcessExecutor.run (JavaProcessExecutor.java:74)\n    at org.springframework.boot.maven.RunMojo.run (RunMojo.java:69)\n    at org.springframework.boot.maven.AbstractRunMojo.run (AbstractRunMojo.java:218)\n    at org.springframework.boot.maven.AbstractRunMojo.execute (AbstractRunMojo.java:205)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n</code></pre>\n<p>Here are the relevant pom.xml parts:</p>\n<pre><code>  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.3&lt;/version&gt;\n  &lt;/parent&gt;\n\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;my-project&lt;/artifactId&gt;\n  &lt;version&gt;3.0.3&lt;/version&gt;\n\n  &lt;name&gt;my-project&lt;/name&gt;\n\n\n\n    &lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n\n    &lt;spring-boot.version&gt;${project.parent.version}&lt;/spring-boot.version&gt;\n    &lt;spring-cloud.version&gt;2.2.6.RELEASE&lt;/spring-cloud.version&gt;\n    &lt;springdoc.version&gt;2.0.2&lt;/springdoc.version&gt;\n    &lt;spring-security.version&gt;6.0.2&lt;/spring-security.version&gt;\n    &lt;lombok.version&gt;1.18.22&lt;/lombok.version&gt;\n    &lt;mapstruct.version&gt;1.5.3.Final&lt;/mapstruct.version&gt;\n    &lt;awssdk.version&gt;2.20.15&lt;/awssdk.version&gt;\n\n    ...\n  &lt;/properties&gt;\n\n\n    &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n        &lt;version&gt;2022.0.1&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n        &lt;artifactId&gt;bom&lt;/artifactId&gt;\n        &lt;version&gt;${awssdk.version}&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n\n\n    &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\n      &lt;version&gt;2.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n      &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- SQS listeners --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-aws-messaging&lt;/artifactId&gt;\n      &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n          &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-aws-autoconfigure&lt;/artifactId&gt;\n      &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n      &lt;artifactId&gt;s3&lt;/artifactId&gt;\n      &lt;version&gt;${awssdk.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- API security --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n      &lt;version&gt;${spring-security.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n      &lt;version&gt;${spring-security.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n      &lt;version&gt;${spring-security.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n         &lt;dependency&gt;\n      &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n      &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n      &lt;version&gt;${springdoc.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n      &lt;artifactId&gt;springdoc-openapi-starter-common&lt;/artifactId&gt;\n      &lt;version&gt;${springdoc.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n      &lt;artifactId&gt;springdoc-openapi-starter-webmvc-api&lt;/artifactId&gt;\n      &lt;version&gt;${springdoc.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    ....\n  &lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;resources&gt;\n      &lt;resource&gt;\n        &lt;filtering&gt;true&lt;/filtering&gt;\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\n      &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.5.0&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.11.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;${java.version}&lt;/source&gt;\n          &lt;target&gt;${java.version}&lt;/target&gt;\n          &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n              &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n              &lt;version&gt;0.2.0&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n              &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n              &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n            &lt;/path&gt;\n          &lt;/annotationProcessorPaths&gt;\n          &lt;compilerArgument&gt;-Xlint:unchecked,deprecation&lt;/compilerArgument&gt;\n          &lt;compilerArgs&gt;\n            &lt;compilerArg&gt;\n              -Amapstruct.suppressGeneratorTimestamp=true\n            &lt;/compilerArg&gt;\n            &lt;compilerArg&gt;\n              -Amapstruct.suppressGeneratorVersionInfoComment=true\n            &lt;/compilerArg&gt;\n            &lt;compilerArg&gt;\n              -Amapstruct.defaultComponentModel=spring\n            &lt;/compilerArg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${maven.resources.plugin}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;delimiters&gt;\n            &lt;delimiter&gt;@&lt;/delimiter&gt;\n          &lt;/delimiters&gt;\n          &lt;useDefaultDelimiters&gt;false&lt;/useDefaultDelimiters&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n</code></pre>\n<p>What am I missing? There are no more error messages (at least I can't produce them), and it was working fine with the earlier version of spring.</p>\n"},{"tags":["java","xml","soap"],"comments":[{"owner":{"account_id":9472425,"reputation":582,"user_id":9741277,"display_name":"leun4m"},"score":0,"creation_date":1677763815,"post_id":75615650,"comment_id":133404571,"body_markdown":"Are you sure `\\n` in your XML file will be interpreted as newline? And not just the character sequence.","body":"Are you sure <code>\\n</code> in your XML file will be interpreted as newline? And not just the character sequence."}],"answers":[{"comments":[{"owner":{"account_id":7322177,"reputation":1011,"user_id":5577819,"accept_rate":100,"display_name":"Zia"},"score":0,"creation_date":1678099929,"post_id":75616131,"comment_id":133461591,"body_markdown":"I am using this regex but when i am passing \\n then its not getting strip out value.replaceAll(&quot;\\\\\\\\\\\\\\\\[tnbrf&#39;\\&quot;\\\\\\\\]&quot;, &quot;&quot;); with \\\\n its working fine, i also want to replace single \\ with space.","body":"I am using this regex but when i am passing \\n then its not getting strip out value.replaceAll(&quot;\\\\\\\\\\\\\\&#91;tnbrf&#39;\\&quot;\\\\\\&#93;&quot;, &quot;&quot;); with \\\\n its working fine, i also want to replace single \\ with space."}],"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677763983,"creation_date":1677763983,"answer_id":75616131,"question_id":75615650,"body_markdown":"As far as XML is concerned, `\\n` is not a special character or a newline, it is a backslash followed by an `n`. If you want to match it in a regular expression, you want `\\\\n`.","title":"Strip out Special Char Sequence from XML Element","body":"<p>As far as XML is concerned, <code>\\n</code> is not a special character or a newline, it is a backslash followed by an <code>n</code>. If you want to match it in a regular expression, you want <code>\\\\n</code>.</p>\n"}],"owner":{"account_id":7322177,"reputation":1011,"user_id":5577819,"accept_rate":100,"display_name":"Zia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677763983,"creation_date":1677761477,"question_id":75615650,"body_markdown":"I am having a soap request which contains the one element `&lt;NickName&gt;\\nickname&lt;/NickName&gt;` and in my java end i am trying to strip out the special char `\\n` (new line) from it so my nickname property will hold `ickname`.\r\nAt java end i am calling the below code\r\n\r\n     nickName.replaceAll(&quot;[^&quot;\r\n                    + &quot;\\u0009\\r\\n&quot;\r\n                    + &quot;\\u0020-\\uD7FF&quot;\r\n                    + &quot;\\uE000-\\uFFFD&quot;\r\n                    + &quot;\\ud800\\udc00-\\udbff\\udfff&quot;\r\n                    + &quot;]&quot;, &quot;&quot;);\r\n\r\nbut its not stripping the new line and i am getting result as \\nickname. i am expecting it should return me as `ickname`.","title":"Strip out Special Char Sequence from XML Element","body":"<p>I am having a soap request which contains the one element <code>&lt;NickName&gt;\\nickname&lt;/NickName&gt;</code> and in my java end i am trying to strip out the special char <code>\\n</code> (new line) from it so my nickname property will hold <code>ickname</code>.\nAt java end i am calling the below code</p>\n<pre><code> nickName.replaceAll(&quot;[^&quot;\n                + &quot;\\u0009\\r\\n&quot;\n                + &quot;\\u0020-\\uD7FF&quot;\n                + &quot;\\uE000-\\uFFFD&quot;\n                + &quot;\\ud800\\udc00-\\udbff\\udfff&quot;\n                + &quot;]&quot;, &quot;&quot;);\n</code></pre>\n<p>but its not stripping the new line and i am getting result as \\nickname. i am expecting it should return me as <code>ickname</code>.</p>\n"},{"tags":["java","json","hashmap"],"comments":[{"owner":{"account_id":1694567,"reputation":911,"user_id":1556234,"accept_rate":40,"display_name":"ema"},"score":1,"creation_date":1434104757,"post_id":30799635,"comment_id":49649852,"body_markdown":"read this https://github.com/elastic/elasticsearch/issues/1394. maybe it will be useful","body":"read this <a href=\"https://github.com/elastic/elasticsearch/issues/1394\" rel=\"nofollow noreferrer\">github.com/elastic/elasticsearch/issues/1394</a>. maybe it will be useful"},{"owner":{"account_id":4777729,"reputation":161,"user_id":4117071,"display_name":"Sergey K"},"score":1,"creation_date":1619527709,"post_id":30799635,"comment_id":118927786,"body_markdown":"May be `pathCustomerFile` is a String? \n\nI had a similar problem, I was wrong with the input parameter. Fixed by replacing with `new File (pathCustomerFile)`","body":"May be <code>pathCustomerFile</code> is a String?   I had a similar problem, I was wrong with the input parameter. Fixed by replacing with <code>new File (pathCustomerFile)</code>"}],"answers":[{"tags":[],"owner":{"account_id":4690297,"reputation":3860,"user_id":3796586,"accept_rate":64,"display_name":"zbig"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1434111877,"creation_date":1434102095,"answer_id":30799976,"question_id":30799635,"body_markdown":"Please double check your input JSON string you don&#39;t have it wrongly escaped or `/` dangling somewhere. For example `/\\&quot;name\\&quot;`. Then Provide the correct type mapping tis way:\r\n\r\n    new ObjectMapper().readValue(pathCustomerFile, new TypeReference&lt;HashMap&lt;String, Customer&gt;&gt;(){});\r\n\r\nMy answer was tested with jackson-mapper-asl 1.9.13.\r\n\r\n** Your mapping just with `HashMap.class` will not give you desired results as Jackson will map your JSON into `Map&lt;String, Map&gt;`. You will find out, when you will try to get a value from Map and operate as if it were type of Customer.","title":"org.codehaus.jackson.JsonParseException: Unexpected character (&#39;/&#39; (code 47))","body":"<p>Please double check your input JSON string you don't have it wrongly escaped or <code>/</code> dangling somewhere. For example <code>/\\\"name\\\"</code>. Then Provide the correct type mapping tis way:</p>\n\n<pre><code>new ObjectMapper().readValue(pathCustomerFile, new TypeReference&lt;HashMap&lt;String, Customer&gt;&gt;(){});\n</code></pre>\n\n<p>My answer was tested with jackson-mapper-asl 1.9.13.</p>\n\n<p>** Your mapping just with <code>HashMap.class</code> will not give you desired results as Jackson will map your JSON into <code>Map&lt;String, Map&gt;</code>. You will find out, when you will try to get a value from Map and operate as if it were type of Customer.</p>\n"},{"comments":[{"owner":{"account_id":5778058,"reputation":1442,"user_id":4559577,"accept_rate":33,"display_name":"Dave"},"score":0,"creation_date":1434105558,"post_id":30800470,"comment_id":49650275,"body_markdown":"mapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\n\n**Error**:\nno suitable method found for configure(DeserializationFeature,boolean)","body":"mapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_&zwnj;&#8203;AS_ARRAY, true);  <b>Error</b>: no suitable method found for configure(DeserializationFeature,boolean)"},{"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"score":0,"creation_date":1434106994,"post_id":30800470,"comment_id":49651242,"body_markdown":"what version of jackson do you use?","body":"what version of jackson do you use?"},{"owner":{"account_id":5778058,"reputation":1442,"user_id":4559577,"accept_rate":33,"display_name":"Dave"},"score":0,"creation_date":1434107179,"post_id":30800470,"comment_id":49651370,"body_markdown":"gson 2.3.1, jackson-mapper-asl 1.9.13","body":"gson 2.3.1, jackson-mapper-asl 1.9.13"},{"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"score":0,"creation_date":1434114494,"post_id":30800470,"comment_id":49656068,"body_markdown":"@DavideFruci see my UPDATE, also try it without configuring the mapper to accept the single value as array","body":"@DavideFruci see my UPDATE, also try it without configuring the mapper to accept the single value as array"},{"owner":{"account_id":5778058,"reputation":1442,"user_id":4559577,"accept_rate":33,"display_name":"Dave"},"score":0,"creation_date":1434221206,"post_id":30800470,"comment_id":49690564,"body_markdown":"I added your dependecies but I have the same error again.","body":"I added your dependecies but I have the same error again."},{"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"score":0,"creation_date":1434346212,"post_id":30800470,"comment_id":49720001,"body_markdown":"Try to use &#39;objectMapper.configure(JsonParser.Feature.ALLOW_COMMENTS, true);&#39;","body":"Try to use &#39;objectMapper.configure(JsonParser.Feature.ALLOW_COMMENTS, true);&#39;"},{"owner":{"account_id":5778058,"reputation":1442,"user_id":4559577,"accept_rate":33,"display_name":"Dave"},"score":0,"creation_date":1434358148,"post_id":30800470,"comment_id":49725637,"body_markdown":"mapper.configure(JsonParser.Feature.ALLOW_COMMENTS, true); **error** no suitable method found for configure(com.fasterxml.jackson.core.JsonParser.Feature.boolean);\n\n---\n\nLike dependecies I have: jackson-annotations (2.4.1), jackson-core (2.4.1), jackson-databind (2.4.1), json (20090211) and jackson-mapper-asl (1.9.13)","body":"mapper.configure(JsonParser.Feature.ALLOW_COMMENTS, true); <b>error</b> no suitable method found for configure(com.fasterxml.jackson.core.JsonParser.Feature.bool&zwnj;&#8203;ean);  ---  Like dependecies I have: jackson-annotations (2.4.1), jackson-core (2.4.1), jackson-databind (2.4.1), json (20090211) and jackson-mapper-asl (1.9.13)"},{"owner":{"account_id":5778058,"reputation":1442,"user_id":4559577,"accept_rate":33,"display_name":"Dave"},"score":0,"creation_date":1434445875,"post_id":30800470,"comment_id":49768710,"body_markdown":"In the end I converted file json in string and then this string in HashMap using: **mapCustomer = mapper.readValue(jsonString,\n                    new TypeReference&lt;HashMap&lt;String, Customer&gt;&gt;() {\n                    });**","body":"In the end I converted file json in string and then this string in HashMap using: <b>mapCustomer = mapper.readValue(jsonString,                     new TypeReference&lt;HashMap&lt;String, Customer&gt;&gt;() {                     });</b>"}],"tags":[],"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1434114480,"creation_date":1434103662,"answer_id":30800470,"question_id":30799635,"body_markdown":"I would create a POJO for customers having the list with the customers and the getter/setter pair, like that:\r\n\r\n    class CustomersFile{\r\n      List&lt;Customer&gt; customers;\r\n\r\n      //getter and setter\r\n    }\r\n\r\nThen I would create class Customer with the field name and customerDetails, like that:\r\n\r\n    class Customer {\r\n      String name;\r\n      CustomerDetails details;\r\n\r\n      //getters and setters for both fields\r\n    }\r\n\r\nAnd finally I would create the class CustomerDetails with all the fields, like that:\r\n\r\n    class CustomerDetails {\r\n      String name;\r\n      String telephone;\r\n      int pi; // and so on\r\n\r\n      //getters and setters for all fields  \r\n    }\r\n \r\nThen using object mapper I would map all the customers from json to my CustomersFile object:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    //this configuration is needed in case you have only one customer in your json.\r\n    objectMapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\r\n    CustomersFile customersFile = mapper.readValue(pathCustomerFile, CustomersFile.class);\r\n\r\nTo access the list of customers, just call:\r\n\r\n    List&lt;Customer&gt; customers = customersFile.getCustomers();\r\n\r\nIf you really need a HashMap&lt;String, Customer&gt; then loop through the list and fill this hash map:\r\n\r\n    HashMap&lt;String, Customer&gt; map = new HashMap&lt;&gt;();\r\n    for(Customer customer : customers) {\r\n      // as string you can use the id of the customer (pi) but its no necessary, just use your desired String\r\n      map.put(&quot;String.valueOf(customer.getPi())&quot;, customer);\r\n    }\r\n\r\n**UPDATE**\r\n\r\nBelow are the dependencies I use in my project&#39;s pom:\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.1&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"org.codehaus.jackson.JsonParseException: Unexpected character (&#39;/&#39; (code 47))","body":"<p>I would create a POJO for customers having the list with the customers and the getter/setter pair, like that:</p>\n\n<pre><code>class CustomersFile{\n  List&lt;Customer&gt; customers;\n\n  //getter and setter\n}\n</code></pre>\n\n<p>Then I would create class Customer with the field name and customerDetails, like that:</p>\n\n<pre><code>class Customer {\n  String name;\n  CustomerDetails details;\n\n  //getters and setters for both fields\n}\n</code></pre>\n\n<p>And finally I would create the class CustomerDetails with all the fields, like that:</p>\n\n<pre><code>class CustomerDetails {\n  String name;\n  String telephone;\n  int pi; // and so on\n\n  //getters and setters for all fields  \n}\n</code></pre>\n\n<p>Then using object mapper I would map all the customers from json to my CustomersFile object:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\n//this configuration is needed in case you have only one customer in your json.\nobjectMapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\nCustomersFile customersFile = mapper.readValue(pathCustomerFile, CustomersFile.class);\n</code></pre>\n\n<p>To access the list of customers, just call:</p>\n\n<pre><code>List&lt;Customer&gt; customers = customersFile.getCustomers();\n</code></pre>\n\n<p>If you really need a HashMap then loop through the list and fill this hash map:</p>\n\n<pre><code>HashMap&lt;String, Customer&gt; map = new HashMap&lt;&gt;();\nfor(Customer customer : customers) {\n  // as string you can use the id of the customer (pi) but its no necessary, just use your desired String\n  map.put(\"String.valueOf(customer.getPi())\", customer);\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Below are the dependencies I use in my project's pom:</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;version&gt;2.4.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.4.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.4.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":443973,"reputation":4509,"user_id":835523,"accept_rate":85,"display_name":"Steve"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1469112974,"creation_date":1469112974,"answer_id":38507637,"question_id":30799635,"body_markdown":"I had this issue recently. I was trying to pass a path (in the form of a string) to readValue. You need to pass it either a string to parse, or a file object. Based on your variable nameI think you may have passed it the path to a file.\r\n\r\n(Basically, it&#39;s reading the &#39;/&#39; in the file path and throwing errors on them.","title":"org.codehaus.jackson.JsonParseException: Unexpected character (&#39;/&#39; (code 47))","body":"<p>I had this issue recently. I was trying to pass a path (in the form of a string) to readValue. You need to pass it either a string to parse, or a file object. Based on your variable nameI think you may have passed it the path to a file.</p>\n\n<p>(Basically, it's reading the '/' in the file path and throwing errors on them.</p>\n"},{"tags":[],"owner":{"account_id":2357627,"reputation":89,"user_id":2065095,"display_name":"Thierry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598613980,"creation_date":1598613980,"answer_id":63632883,"question_id":30799635,"body_markdown":"I had the same error when I add comments in JSON.\r\nI find solution on https://github.com/elastic/elasticsearch/issues/1394\r\n\r\n\r\n\r\n    final ObjectMapper mapper = new ObjectMapper();\r\n    mapper.configure(JsonParser.Feature.ALLOW_COMMENTS, true);\r\n    final HashMap&lt;String, Customer&gt; listCustomer = mapper.readValue(pathCustomerFile, HashMap.class); //This line gives me no error\r\n\r\n","title":"org.codehaus.jackson.JsonParseException: Unexpected character (&#39;/&#39; (code 47))","body":"<p>I had the same error when I add comments in JSON.\nI find solution on <a href=\"https://github.com/elastic/elasticsearch/issues/1394\" rel=\"nofollow noreferrer\">https://github.com/elastic/elasticsearch/issues/1394</a></p>\n<pre><code>final ObjectMapper mapper = new ObjectMapper();\nmapper.configure(JsonParser.Feature.ALLOW_COMMENTS, true);\nfinal HashMap&lt;String, Customer&gt; listCustomer = mapper.readValue(pathCustomerFile, HashMap.class); //This line gives me no error\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10462244,"reputation":69,"user_id":7712620,"display_name":"Swati"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612333188,"creation_date":1612333188,"answer_id":66022248,"question_id":30799635,"body_markdown":"I had the same issue. I was mistakenly sending comments in my request payload like &#39;//&#39;. \r\nRemoving &#39;//&#39; worked for me.","title":"org.codehaus.jackson.JsonParseException: Unexpected character (&#39;/&#39; (code 47))","body":"<p>I had the same issue. I was mistakenly sending comments in my request payload like '//'.\nRemoving '//' worked for me.</p>\n"},{"tags":[],"owner":{"account_id":9642226,"reputation":1060,"user_id":7156098,"display_name":"alegria"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646915143,"creation_date":1646915143,"answer_id":71424154,"question_id":30799635,"body_markdown":"In my case, this was exactly as @Sergey K pointed out in the earliest comments. So the credit goes to him.\r\n\r\n    String pathCustomerFile = &quot;/blah/blah.json&quot;;  // &lt;-- Problematic line\r\n    listCustomer = new ObjectMapper().readValue(pathCustomerFile, HashMap.class);\r\n\r\nTurns out `pathCustomerFile` was `String` and jackson runtime was trying to interpret the value of this string as a JSON object, hence the error. \r\n\r\n**Unexpected character &#39;/&#39;** is the very first character of the path value `&quot;/blah/blah.json&quot;`\r\n\r\nYou can also tell this by the checked exception that the `readValue` method throws, if it is `ProcessingException`, then chances are the parameter itself is going to be interpreted as the JSON string.\r\n\r\n\r\n**SOLUTION:** \r\n\r\nWrapping the path string with `File` resolves the problem:\r\n\r\n    new ObjectMapper().readValue(new File(pathCustomerFile), HashMap.class);\r\nYou can verify this by the checked exception being thrown changing to `IOException` as well.","title":"org.codehaus.jackson.JsonParseException: Unexpected character (&#39;/&#39; (code 47))","body":"<p>In my case, this was exactly as @Sergey K pointed out in the earliest comments. So the credit goes to him.</p>\n<pre><code>String pathCustomerFile = &quot;/blah/blah.json&quot;;  // &lt;-- Problematic line\nlistCustomer = new ObjectMapper().readValue(pathCustomerFile, HashMap.class);\n</code></pre>\n<p>Turns out <code>pathCustomerFile</code> was <code>String</code> and jackson runtime was trying to interpret the value of this string as a JSON object, hence the error.</p>\n<p><strong>Unexpected character '/'</strong> is the very first character of the path value <code>&quot;/blah/blah.json&quot;</code></p>\n<p>You can also tell this by the checked exception that the <code>readValue</code> method throws, if it is <code>ProcessingException</code>, then chances are the parameter itself is going to be interpreted as the JSON string.</p>\n<p><strong>SOLUTION:</strong></p>\n<p>Wrapping the path string with <code>File</code> resolves the problem:</p>\n<pre><code>new ObjectMapper().readValue(new File(pathCustomerFile), HashMap.class);\n</code></pre>\n<p>You can verify this by the checked exception being thrown changing to <code>IOException</code> as well.</p>\n"}],"owner":{"account_id":5778058,"reputation":1442,"user_id":4559577,"accept_rate":33,"display_name":"Dave"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21783,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":6,"score":14,"last_activity_date":1677763973,"creation_date":1434101113,"question_id":30799635,"body_markdown":"I have a file that contains a HashMap customer list in json format.\r\n\r\nLike this: \r\n\r\n    {&quot;Davide&quot;:{&quot;name&quot;:&quot;Davide&quot;,&quot;cf&quot;:&quot;FRCDVD&quot;,&quot;pi&quot;:&quot;1234&quot;,\r\n        &quot;telephone&quot;:&quot;333&quot;,&quot;website&quot;:&quot;www&quot;,&quot;sector&quot;:&quot;Student&quot;,&quot;address&quot;:&quot;Rome&quot;}}\r\n\r\nThis is just a one customer of list. \r\nEverytime the controller is called I want to take datas from the file and convert them into HashMap list. \r\n\r\nI tried to do this with:\r\n\r\n    HashMap&lt;String, Customer&gt; listCustomer = new HashMap&lt;&gt;();\r\n    listCustomer = new ObjectMapper().readValue(pathCustomerFile, HashMap.class); //This line gives me error\r\n\r\nI got this error:\r\n\r\n&gt;  org.codehaus.jackson.JsonParseException: Unexpected character (&#39;/&#39; (code 47)): maybe a (non-standard) comment? (not recognized as one since Feature &#39;ALLOW_COMMENTS&#39; not enabled for parser)\r\n\r\nHow can I do that?","title":"org.codehaus.jackson.JsonParseException: Unexpected character (&#39;/&#39; (code 47))","body":"<p>I have a file that contains a HashMap customer list in json format.</p>\n\n<p>Like this: </p>\n\n<pre><code>{\"Davide\":{\"name\":\"Davide\",\"cf\":\"FRCDVD\",\"pi\":\"1234\",\n    \"telephone\":\"333\",\"website\":\"www\",\"sector\":\"Student\",\"address\":\"Rome\"}}\n</code></pre>\n\n<p>This is just a one customer of list. \nEverytime the controller is called I want to take datas from the file and convert them into HashMap list. </p>\n\n<p>I tried to do this with:</p>\n\n<pre><code>HashMap&lt;String, Customer&gt; listCustomer = new HashMap&lt;&gt;();\nlistCustomer = new ObjectMapper().readValue(pathCustomerFile, HashMap.class); //This line gives me error\n</code></pre>\n\n<p>I got this error:</p>\n\n<blockquote>\n  <p>org.codehaus.jackson.JsonParseException: Unexpected character ('/' (code 47)): maybe a (non-standard) comment? (not recognized as one since Feature 'ALLOW_COMMENTS' not enabled for parser)</p>\n</blockquote>\n\n<p>How can I do that?</p>\n"},{"tags":["java","spring","spring-boot","ssh","spring-cloud-config"],"owner":{"account_id":8411933,"reputation":2534,"user_id":6313539,"display_name":"Sweta Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677763605,"creation_date":1677763605,"question_id":75616062,"body_markdown":"I am trying to create a spring cloud config server to connect to git repository(bitbucket) using an SSH URI. I am following Spring Cloud Config.\r\n\r\nI generated key pair using the command\r\n```\r\nssh-keygen -m PEM -t rsa -b 4096 -C &quot;sweta&quot;\r\n```\r\n\r\nI tried to run below command for known_hosts file\r\n```\r\nssh webprod-cvs2.test.com\r\n```\r\nBelow is the outcome of above command\r\n```\r\nThe authenticity of host &#39;webprod-cvs2.test.com (161.134.126.61)&#39; can&#39;t be established.\r\nECDSA key fingerprint is SHA256:rOc67c4dj1nBlEnNJvB5e6u2TkcJo8k7X1VJCWk.\r\nThis key is not known by any other names\r\n```\r\n\r\nBelow is the entry in known_hosts file\r\n```\r\nwebprod-cvs2.test.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXAAAIbmlzdHAyNTYAAABBBOJeugo5WQ2UlUBDH7UWJUOSCp0f20thcUw8G8ZoKP54OBIgsBXeb8x5PxTq86jOmY+K4yYQFHGVdH8Vmz6HsgM=\r\n```\r\n\r\nBelow is application.properties file\r\n```\r\nspring.cloud.config.server.git.uri=git@webprod-cvs2.test.com:7999/micro/config-properties.git\r\nspring.cloud.config.server.git.ignoreLocalSshSettings=true\r\nspring.cloud.config.server.git.strictHostKeyChecking=false\r\nspring.cloud.config.server.git.host-key=AAAAE2VjZHNhLXAAAIbmlzdHAyNTYAAABBBOJeugo5WQ2UlUBDH7UWJUOSCp0f20thcUw8G8ZoKP54OBIgsBXeb8x5PxTq86jOmY+K4yYQFHGVdH8Vmz6HsgM=\r\nspring.cloud.config.server.git.hostKeyAlgorithm=ecdsa-sha2-nistp256\r\nspring.cloud.config.server.git.passphrase=secret123\r\nspring.cloud.config.server.git.privateKey=-----BEGIN RSA PRIVATE KEY-----\\n\\\r\nProc-Type: 4,ENCRYPTED\\n\\\r\nDEK-Info: AES-128-CBC,327F2601F22244F902A89CF70200FDE2\\n\\\r\n\\n\\\r\nO0SRZZ7qiC0fp6eNGahkd50MQHV0Li3S4wzqbIDsncDpSlp8WJ3wMFAKPDRV++0a\\\r\nN54jjVaDzPUVJkDJJvZpX6q5KT8sv54q7EzD8IX5DSnvrRaw8iR12GJF0MC77mCA\\\r\nnK3R9FE/iNa/Sg/Ui3woyEfyDR4ocgGYzQHCTdfPgBcV4SihU3503MLEa9yhCoCP\\\r\nmbfyEXI6NpfsbZ5ETY8Qek6r5E5XECw8HoU63x858St9Oti1/y36a6kj9cmX/iD7\\\r\nI50txX9mW+C/126NoHjYUzb4o5iGxtfB6vP/McBhcw9aEuFYcTJyTepM/nK1IlbL\\\r\ny8hQkoEiIz9Ijja6wYkP/0s/6DBhJPTpTMlijyd0yS+xGmCvJLmiqricZHbDAGwr\\\r\nL8Xgdp6as3VDgDCR5wQ+jzhFAEt7qToZt3oqD/XeWw0UTYlx5DnvNZGlVWSlvvPe\\\r\n7nH1ZqY2S5O6RpPgxsrj/x8nELYGGRp7kftcV28Fu3mlpOGwB2nXQK0uB6JsFKGh\\\r\nDEfCKtUZ2L1gEc+R3rNeq3Nji3ZlYzTbEdptuqXr7nQGX/7n5yRL90rNwUuDjv5Z\\\r\nHnX/ul5c8kwRbUz5/ZLviJ6gl5KFG8xUJErNcajFTdUaxlqN0plUUtP5X7Bld2M7\\\r\nzjv5C3KhOWp6mle82WB09ur1lZPFufhDRXedUm83rtOiWN5gG79EzzgOtybO1R0e\\\r\nOTId2A45EdNvnk2f2lHs5c/SQk8Q7VVE2/CHGyIPDnyWH1tiI6+V0Bjcl64kzxnP\\\r\n5RhWZ4gJGhS3mLLw3sRzwN5I/16VGc6yJ5qsoAMOYm5Nq4PVk51iKw1lI5NGDvLm\\\r\nYYLocfAnsT7L1ro+QfGYKHFWQXMbmxPtyHgWle60er08OufllilXotNjZ47b1xUn\\\r\n+XzJzQCmjoVsRjq3wjWiYOyLkR6UXsSJ86F8rYEXkHJ83ZXxPD+8pVm8py2C0/79\\\r\nGuWhlkYV6FJPJHXgw3JIp7S7LsyiEftJMFbADpk4KEghKb3oeDKMGkQ5xwCMhoY/\\\r\n+NfEWCK6EE9h9Nz2Fzyp3xl/C4ZHd6HtciqNpvrEZZP0BpNbt6EnAItvCdoAKAsh\\\r\nlD5Tmh/EdWjrPo29CYV2AvE1KXoa8HWojbiWIv+1SPrBPsfVz0B3hSIihkTmBS2C\\\r\nvWZfthHh568UO3kPoRPD0KD8wBrFf433xbzoUxLsTcZadgLqVmhngKmeMtWDdcRt\\\r\nbnae/QQQB0GyPaT+EUtJilWPqwFVaBK1qf0fhkRrC8YFcATQP+PyGkQg0CqfCXqS\\\r\nCnPjnQQMz+X/K7u952YJTb+CDRaZfD8X5ARZQhJN2yDvr+tEY+DE6A1Jn6QDyM4m\\\r\ngcgeIPoWFs237uRvzZ8cNazd6FUgz4inmEVyhkIVE91hUJU3nFeuNggxN8pSEz5j\\\r\nz1zTKSCfmCwUOPI6rnbTJKn0UtwLY7TaTFKZQYIOG5rgBGg4y5Qu3hDlvScDt6LS\\\r\nISV0Deve8XqgZtr5hgJrUMsHX4ebzmnoJjRVEA8Ye1cINbJ9EaJ1Q1sjeXD6K+Lb\\\r\nI5COg+H7NvZ8+UPrDforLOMxjQUXB0Ri+RRgES7WpKPxzHaYjPM7ynSZn+uw66zT\\\r\nh9xNcnkj+MknDQeeTccIHjl7KQuLstfsYJe9TF4AjPdRUEtf5O9OItD/maEhYAvD\\\r\ndLgmNMzgVnkrS6bx9RRF4njA/OSTOEu/9YGEfX5qH0ggAOh3BB+jzvwZdKKHHeeO\\\r\nyqav4GaCYSbLrUoJeSDyF04QiU7q/kr2/bMDNm1ZP+E1nCORZST0bA71oYOCyCZK\\\r\nck6QrvePe0hRRReHJN6dSeLs8JdmgWzmsbUugb4cZykjBaFro7ZJCitxZuBpj7Iv\\\r\nGdXlCYgUxZ4P+O5b0/LJPdSRuAgQDUd4rvX5PHs1E+AU3qyyFhjnQGb3c5rDJSCR\\\r\nty24xkuubD8CLUlP4YPwDK6NS6ywJnSSAFKvneZifo0O50rYqY90PiVyRZclArwM\\n\\\r\n-----END RSA PRIVATE KEY-----\r\n```\r\n\r\nBelow is the error log:\r\n```\r\nCaused by: org.apache.sshd.common.SshException: No more authentication methods available\r\n\tat org.apache.sshd.client.session.ClientUserAuthService.tryNext(ClientUserAuthService.java:353) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.client.session.ClientUserAuthService.processUserAuth(ClientUserAuthService.java:288) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n\tat org.apache.sshd.client.session.ClientUserAuthService.process(ClientUserAuthService.java:225) ~[sshd-osgi-2.7.0.jar:2.7.0]\r\n```\r\n\r\nCan someone please guide me what am I missing?","title":"Spring cloud config server connection to Bitbucket using SSH keys gives No more authentication methods available error","body":"<p>I am trying to create a spring cloud config server to connect to git repository(bitbucket) using an SSH URI. I am following Spring Cloud Config.</p>\n<p>I generated key pair using the command</p>\n<pre><code>ssh-keygen -m PEM -t rsa -b 4096 -C &quot;sweta&quot;\n</code></pre>\n<p>I tried to run below command for known_hosts file</p>\n<pre><code>ssh webprod-cvs2.test.com\n</code></pre>\n<p>Below is the outcome of above command</p>\n<pre><code>The authenticity of host 'webprod-cvs2.test.com (161.134.126.61)' can't be established.\nECDSA key fingerprint is SHA256:rOc67c4dj1nBlEnNJvB5e6u2TkcJo8k7X1VJCWk.\nThis key is not known by any other names\n</code></pre>\n<p>Below is the entry in known_hosts file</p>\n<pre><code>webprod-cvs2.test.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXAAAIbmlzdHAyNTYAAABBBOJeugo5WQ2UlUBDH7UWJUOSCp0f20thcUw8G8ZoKP54OBIgsBXeb8x5PxTq86jOmY+K4yYQFHGVdH8Vmz6HsgM=\n</code></pre>\n<p>Below is application.properties file</p>\n<pre><code>spring.cloud.config.server.git.uri=git@webprod-cvs2.test.com:7999/micro/config-properties.git\nspring.cloud.config.server.git.ignoreLocalSshSettings=true\nspring.cloud.config.server.git.strictHostKeyChecking=false\nspring.cloud.config.server.git.host-key=AAAAE2VjZHNhLXAAAIbmlzdHAyNTYAAABBBOJeugo5WQ2UlUBDH7UWJUOSCp0f20thcUw8G8ZoKP54OBIgsBXeb8x5PxTq86jOmY+K4yYQFHGVdH8Vmz6HsgM=\nspring.cloud.config.server.git.hostKeyAlgorithm=ecdsa-sha2-nistp256\nspring.cloud.config.server.git.passphrase=secret123\nspring.cloud.config.server.git.privateKey=-----BEGIN RSA PRIVATE KEY-----\\n\\\nProc-Type: 4,ENCRYPTED\\n\\\nDEK-Info: AES-128-CBC,327F2601F22244F902A89CF70200FDE2\\n\\\n\\n\\\nO0SRZZ7qiC0fp6eNGahkd50MQHV0Li3S4wzqbIDsncDpSlp8WJ3wMFAKPDRV++0a\\\nN54jjVaDzPUVJkDJJvZpX6q5KT8sv54q7EzD8IX5DSnvrRaw8iR12GJF0MC77mCA\\\nnK3R9FE/iNa/Sg/Ui3woyEfyDR4ocgGYzQHCTdfPgBcV4SihU3503MLEa9yhCoCP\\\nmbfyEXI6NpfsbZ5ETY8Qek6r5E5XECw8HoU63x858St9Oti1/y36a6kj9cmX/iD7\\\nI50txX9mW+C/126NoHjYUzb4o5iGxtfB6vP/McBhcw9aEuFYcTJyTepM/nK1IlbL\\\ny8hQkoEiIz9Ijja6wYkP/0s/6DBhJPTpTMlijyd0yS+xGmCvJLmiqricZHbDAGwr\\\nL8Xgdp6as3VDgDCR5wQ+jzhFAEt7qToZt3oqD/XeWw0UTYlx5DnvNZGlVWSlvvPe\\\n7nH1ZqY2S5O6RpPgxsrj/x8nELYGGRp7kftcV28Fu3mlpOGwB2nXQK0uB6JsFKGh\\\nDEfCKtUZ2L1gEc+R3rNeq3Nji3ZlYzTbEdptuqXr7nQGX/7n5yRL90rNwUuDjv5Z\\\nHnX/ul5c8kwRbUz5/ZLviJ6gl5KFG8xUJErNcajFTdUaxlqN0plUUtP5X7Bld2M7\\\nzjv5C3KhOWp6mle82WB09ur1lZPFufhDRXedUm83rtOiWN5gG79EzzgOtybO1R0e\\\nOTId2A45EdNvnk2f2lHs5c/SQk8Q7VVE2/CHGyIPDnyWH1tiI6+V0Bjcl64kzxnP\\\n5RhWZ4gJGhS3mLLw3sRzwN5I/16VGc6yJ5qsoAMOYm5Nq4PVk51iKw1lI5NGDvLm\\\nYYLocfAnsT7L1ro+QfGYKHFWQXMbmxPtyHgWle60er08OufllilXotNjZ47b1xUn\\\n+XzJzQCmjoVsRjq3wjWiYOyLkR6UXsSJ86F8rYEXkHJ83ZXxPD+8pVm8py2C0/79\\\nGuWhlkYV6FJPJHXgw3JIp7S7LsyiEftJMFbADpk4KEghKb3oeDKMGkQ5xwCMhoY/\\\n+NfEWCK6EE9h9Nz2Fzyp3xl/C4ZHd6HtciqNpvrEZZP0BpNbt6EnAItvCdoAKAsh\\\nlD5Tmh/EdWjrPo29CYV2AvE1KXoa8HWojbiWIv+1SPrBPsfVz0B3hSIihkTmBS2C\\\nvWZfthHh568UO3kPoRPD0KD8wBrFf433xbzoUxLsTcZadgLqVmhngKmeMtWDdcRt\\\nbnae/QQQB0GyPaT+EUtJilWPqwFVaBK1qf0fhkRrC8YFcATQP+PyGkQg0CqfCXqS\\\nCnPjnQQMz+X/K7u952YJTb+CDRaZfD8X5ARZQhJN2yDvr+tEY+DE6A1Jn6QDyM4m\\\ngcgeIPoWFs237uRvzZ8cNazd6FUgz4inmEVyhkIVE91hUJU3nFeuNggxN8pSEz5j\\\nz1zTKSCfmCwUOPI6rnbTJKn0UtwLY7TaTFKZQYIOG5rgBGg4y5Qu3hDlvScDt6LS\\\nISV0Deve8XqgZtr5hgJrUMsHX4ebzmnoJjRVEA8Ye1cINbJ9EaJ1Q1sjeXD6K+Lb\\\nI5COg+H7NvZ8+UPrDforLOMxjQUXB0Ri+RRgES7WpKPxzHaYjPM7ynSZn+uw66zT\\\nh9xNcnkj+MknDQeeTccIHjl7KQuLstfsYJe9TF4AjPdRUEtf5O9OItD/maEhYAvD\\\ndLgmNMzgVnkrS6bx9RRF4njA/OSTOEu/9YGEfX5qH0ggAOh3BB+jzvwZdKKHHeeO\\\nyqav4GaCYSbLrUoJeSDyF04QiU7q/kr2/bMDNm1ZP+E1nCORZST0bA71oYOCyCZK\\\nck6QrvePe0hRRReHJN6dSeLs8JdmgWzmsbUugb4cZykjBaFro7ZJCitxZuBpj7Iv\\\nGdXlCYgUxZ4P+O5b0/LJPdSRuAgQDUd4rvX5PHs1E+AU3qyyFhjnQGb3c5rDJSCR\\\nty24xkuubD8CLUlP4YPwDK6NS6ywJnSSAFKvneZifo0O50rYqY90PiVyRZclArwM\\n\\\n-----END RSA PRIVATE KEY-----\n</code></pre>\n<p>Below is the error log:</p>\n<pre><code>Caused by: org.apache.sshd.common.SshException: No more authentication methods available\n    at org.apache.sshd.client.session.ClientUserAuthService.tryNext(ClientUserAuthService.java:353) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.client.session.ClientUserAuthService.processUserAuth(ClientUserAuthService.java:288) ~[sshd-osgi-2.7.0.jar:2.7.0]\n    at org.apache.sshd.client.session.ClientUserAuthService.process(ClientUserAuthService.java:225) ~[sshd-osgi-2.7.0.jar:2.7.0]\n</code></pre>\n<p>Can someone please guide me what am I missing?</p>\n"},{"tags":["java","hibernate","grails-orm"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1677757112,"post_id":75614885,"comment_id":133402682,"body_markdown":"Do you ask for an SQL answer? If you do, add your current SQL attempt, otherwise you can remove the &lt;sql&gt; tag.","body":"Do you ask for an SQL answer? If you do, add your current SQL attempt, otherwise you can remove the &lt;sql&gt; tag."}],"owner":{"account_id":24342544,"reputation":39,"user_id":18279733,"display_name":"anonimos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677763444,"creation_date":1677756925,"question_id":75614885,"body_markdown":"I have a grails application where I have a domain class Person that has a field called uniqId (and other fields, but no persons_idx specifically mentioned). However, in db I have the table Person which has besides person_id column, also a persons_idx column that is a integer column (I think this column is autogenerated by hibernate). Here is the domain class :\r\n```\r\nclass Person {\r\n\r\n\tString unqId\r\n\r\n    static constraints = {\r\n\t\tunqId blank: false, minSize: 4, nullable: false\r\n    }\r\n\r\n\tstatic mapping = {\r\n\t\tid generator: &#39;assigned&#39;, name: &#39;unqId&#39;\r\n\t\tunqId column: &#39;person_id&#39;\r\n    }\r\n```\r\n\r\nI have another domain class Hospital that has a List of persons.\r\nI&#39;ve noticed if persons_idx values are not in ascending order (starting with 0,1,..n) then a NPE is thrown when writing something like:```hospital.persons.find {it.unqId.equals(personId)}```.  \r\nCaused by: java.lang.NullPointerException: Cannot get property &#39;unqId&#39; on null object.  Why do I get it?\r\nThe NPE exception is received for entries such as in Person table:\r\n\r\n| hid |persond_id |persons_idx |\r\n| -------- | -------------- | -------------- |\r\n| First    | 1            |5\r\n| Second   | 1            |6\r\n\r\nbut not if I have records as:\r\n\r\n| hid |persond_id |persons_idx |\r\n| -------- | -------------- | -------------- |\r\n| First    | 1            |0\r\n| Second   | 1            |1\r\n\r\n\r\nIn debug for the first example the List is a PersistedList of persons and has size 7 (because the last idx is 6)but only 2 displayed values.","title":"why i&#39;m getting NPE when trying to access a field from a domain class if tables_idx column values are not in ascending order using hibernate?","body":"<p>I have a grails application where I have a domain class Person that has a field called uniqId (and other fields, but no persons_idx specifically mentioned). However, in db I have the table Person which has besides person_id column, also a persons_idx column that is a integer column (I think this column is autogenerated by hibernate). Here is the domain class :</p>\n<pre><code>class Person {\n\n    String unqId\n\n    static constraints = {\n        unqId blank: false, minSize: 4, nullable: false\n    }\n\n    static mapping = {\n        id generator: 'assigned', name: 'unqId'\n        unqId column: 'person_id'\n    }\n</code></pre>\n<p>I have another domain class Hospital that has a List of persons.\nI've noticed if persons_idx values are not in ascending order (starting with 0,1,..n) then a NPE is thrown when writing something like:<code>hospital.persons.find {it.unqId.equals(personId)}</code>.<br />\nCaused by: java.lang.NullPointerException: Cannot get property 'unqId' on null object.  Why do I get it?\nThe NPE exception is received for entries such as in Person table:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>hid</th>\n<th>persond_id</th>\n<th>persons_idx</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>First</td>\n<td>1</td>\n<td>5</td>\n</tr>\n<tr>\n<td>Second</td>\n<td>1</td>\n<td>6</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>but not if I have records as:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>hid</th>\n<th>persond_id</th>\n<th>persons_idx</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>First</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>Second</td>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>In debug for the first example the List is a PersistedList of persons and has size 7 (because the last idx is 6)but only 2 displayed values.</p>\n"},{"tags":["java","macos","configuration"],"comments":[{"owner":{"account_id":94841,"reputation":50527,"user_id":258689,"accept_rate":88,"display_name":"Olivier Refalo"},"score":0,"creation_date":1377870676,"post_id":1348842,"comment_id":27259111,"body_markdown":"possible duplicate of [Where is JAVA\\_HOME on OSX Lion (10.7) , Mountain Lion (10.8) or Mavericks (10.9)?](http://stackoverflow.com/questions/6588390/where-is-java-home-on-osx-lion-10-7-mountain-lion-10-8-or-mavericks-10-9)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/6588390/where-is-java-home-on-osx-lion-10-7-mountain-lion-10-8-or-mavericks-10-9\">Where is JAVA_HOME on OSX Lion (10.7) , Mountain Lion (10.8) or Mavericks (10.9)?</a>"}],"answers":[{"comments":[{"owner":{"account_id":1712951,"reputation":3348,"user_id":1570601,"accept_rate":50,"display_name":"JRun"},"score":0,"creation_date":1393499422,"post_id":1348867,"comment_id":33461373,"body_markdown":"/bin . and check that it points to the /Library/java and not /System/Library/.. as that one may be outdated.","body":"/bin . and check that it points to the /Library/java and not /System/Library/.. as that one may be outdated."},{"owner":{"account_id":896,"reputation":81678,"user_id":1175,"accept_rate":80,"display_name":"Kristopher Johnson"},"score":1,"creation_date":1461768987,"post_id":1348867,"comment_id":61351224,"body_markdown":"This is no longer accurate. On OS X 10.5 and later, use /usr/libexec/java_home to find the path.","body":"This is no longer accurate. On OS X 10.5 and later, use /usr/libexec/java_home to find the path."}],"tags":[],"owner":{"account_id":25027,"reputation":9018,"user_id":64044,"display_name":"Clint"},"comment_count":2,"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1251487421,"creation_date":1251487421,"answer_id":1348867,"question_id":1348842,"body_markdown":"I tend to use `/Library/Java/Home`.  The way the preferences pane works this should be up to date with your preferred version.","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>I tend to use <code>/Library/Java/Home</code>.  The way the preferences pane works this should be up to date with your preferred version.</p>\n"},{"comments":[{"owner":{"account_id":6552,"reputation":20287,"user_id":11069,"accept_rate":100,"display_name":"Robert Christie"},"score":8,"creation_date":1251492056,"post_id":1348940,"comment_id":1185203,"body_markdown":"Snow Leopard does still have /usr/libexec/java_home. Thanks","body":"Snow Leopard does still have /usr/libexec/java_home. Thanks"},{"owner":{"account_id":2189095,"reputation":2139,"user_id":1936718,"accept_rate":34,"display_name":"drlobo"},"score":1,"creation_date":1365201656,"post_id":1348940,"comment_id":22546817,"body_markdown":"what is this &quot;/usr/libexec/java_home&quot; ?","body":"what is this &quot;/usr/libexec/java_home&quot; ?"},{"owner":{"account_id":14130,"reputation":401475,"user_id":28804,"accept_rate":74,"display_name":"mipadi"},"score":0,"creation_date":1365202881,"post_id":1348940,"comment_id":22547241,"body_markdown":"@drlobo: It&#39;s a tool for figuring out where `JAVA_HOME` is that ships with Macs.","body":"@drlobo: It&#39;s a tool for figuring out where <code>JAVA_HOME</code> is that ships with Macs."},{"owner":{"account_id":49770,"reputation":16873,"user_id":148335,"accept_rate":58,"display_name":"Pascal"},"score":59,"creation_date":1376015812,"post_id":1348940,"comment_id":26565815,"body_markdown":"Still valid for Mavericks","body":"Still valid for Mavericks"},{"owner":{"account_id":37073,"reputation":23568,"user_id":105904,"display_name":"Andrew Janke"},"score":0,"creation_date":1394943587,"post_id":1348940,"comment_id":34114091,"body_markdown":"I like to conditionalize it (in zsh) with `if /usr/libexec/java_home &amp;&gt; /dev/null; then export JAVA_HOME=$(/usr/libexec/java_home); fi`, so I can use the same .rc file on multiple machines whether they have the JDK installed or not. Unconditionalized; you&#39;ll get a warning on each shell startup.","body":"I like to conditionalize it (in zsh) with <code>if &#47;usr&#47;libexec&#47;java_home &amp;&gt; &#47;dev&#47;null; then export JAVA_HOME=$(&#47;usr&#47;libexec&#47;java_home); fi</code>, so I can use the same .rc file on multiple machines whether they have the JDK installed or not. Unconditionalized; you&#39;ll get a warning on each shell startup."},{"owner":{"account_id":1165812,"reputation":2692,"user_id":1144176,"display_name":"Jake Stoeffler"},"score":1,"creation_date":1403288840,"post_id":1348940,"comment_id":37616071,"body_markdown":"In Mavericks I had to put it in `~/.bash_profile` instead of `~/.bashrc`.","body":"In Mavericks I had to put it in <code>~&#47;.bash_profile</code> instead of <code>~&#47;.bashrc</code>."},{"owner":{"account_id":2541259,"reputation":630,"user_id":2207018,"display_name":"Heckscheibe"},"score":0,"creation_date":1407398249,"post_id":1348940,"comment_id":39201415,"body_markdown":"thanks especially for the part with the -v extension ;)","body":"thanks especially for the part with the -v extension ;)"},{"owner":{"account_id":105552,"reputation":3260,"user_id":281600,"display_name":"St&#233;phane B."},"score":0,"creation_date":1409752927,"post_id":1348940,"comment_id":40072809,"body_markdown":"If you want to share this environment variable with all users, you must update /etc/profile","body":"If you want to share this environment variable with all users, you must update /etc/profile"},{"owner":{"account_id":47591,"reputation":5499,"user_id":141042,"accept_rate":86,"display_name":"Geoffrey Wiseman"},"score":43,"creation_date":1414526816,"post_id":1348940,"comment_id":41846159,"body_markdown":"Still valid for Yosemite. ;)","body":"Still valid for Yosemite. ;)"},{"owner":{"account_id":303732,"reputation":1397,"user_id":612847,"accept_rate":67,"display_name":"Sergiu"},"score":4,"creation_date":1460012778,"post_id":1348940,"comment_id":60548857,"body_markdown":"I get an error when setting the path: `ln: /usr/libexec/java_home: Operation not permitted`. Anybody knows what could be the problem?","body":"I get an error when setting the path: <code>ln: &#47;usr&#47;libexec&#47;java_home: Operation not permitted</code>. Anybody knows what could be the problem?"},{"owner":{"account_id":392397,"reputation":28086,"user_id":753632,"accept_rate":57,"display_name":"Johann"},"score":0,"creation_date":1460816533,"post_id":1348940,"comment_id":60922544,"body_markdown":"I have multiple versions installed. I did what you wrote but it still shows the newest version. Running on El Capitan. Like someone else posted elsewhere, if you don&#39;t want it using the newest version, then you will have to rename the directory where it is installed, move it elsewhere or delete it. Seriously, this is 2016 and nobody has bothered to post a comment here on this???","body":"I have multiple versions installed. I did what you wrote but it still shows the newest version. Running on El Capitan. Like someone else posted elsewhere, if you don&#39;t want it using the newest version, then you will have to rename the directory where it is installed, move it elsewhere or delete it. Seriously, this is 2016 and nobody has bothered to post a comment here on this???"},{"owner":{"account_id":187852,"reputation":723,"user_id":426209,"accept_rate":75,"display_name":"Yichuan Wang"},"score":1,"creation_date":1461805250,"post_id":1348940,"comment_id":61370732,"body_markdown":"For fish shell users, use something like the following: `alias java7 &quot;set -gx JAVA_HOME (/usr/libexec/java_home -v1.7)&quot;` (Works on El Capitan)","body":"For fish shell users, use something like the following: <code>alias java7 &quot;set -gx JAVA_HOME (&#47;usr&#47;libexec&#47;java_home -v1.7)&quot;</code> (Works on El Capitan)"},{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1478877990,"post_id":1348940,"comment_id":68340549,"body_markdown":"https://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/","body":"<a href=\"https://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\" rel=\"nofollow noreferrer\">mkyong.com/java/&hellip;</a>"},{"owner":{"account_id":6393977,"reputation":2307,"user_id":4959049,"accept_rate":80,"display_name":"Robert Moore"},"score":0,"creation_date":1479389111,"post_id":1348940,"comment_id":68543152,"body_markdown":"@JakeStoeffler I think that&#39;s true for all versions of mac. I&#39;m on Sierra right now","body":"@JakeStoeffler I think that&#39;s true for all versions of mac. I&#39;m on Sierra right now"},{"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"score":0,"creation_date":1486556242,"post_id":1348940,"comment_id":71394404,"body_markdown":"I can not FIND Java path anywhere for Java 8 Update 121. (macOS 10.12.3)  Any ideas?","body":"I can not FIND Java path anywhere for Java 8 Update 121. (macOS 10.12.3)  Any ideas?"},{"owner":{"account_id":170199,"reputation":7167,"user_id":396747,"accept_rate":100,"display_name":"Gary"},"score":0,"creation_date":1510431829,"post_id":1348940,"comment_id":81435441,"body_markdown":"Works for High Sierra 10.13.1 with modification of version to 9.0 (possibly due to Homebrew)","body":"Works for High Sierra 10.13.1 with modification of version to 9.0 (possibly due to Homebrew)"},{"owner":{"account_id":49297,"reputation":8006,"user_id":146718,"accept_rate":60,"display_name":"Crysfel"},"score":10,"creation_date":1511112295,"post_id":1348940,"comment_id":81711662,"body_markdown":"High Sierra 10.13.1 check!!","body":"High Sierra 10.13.1 check!!"},{"owner":{"account_id":425057,"reputation":644,"user_id":805422,"accept_rate":80,"display_name":"DiableNoir"},"score":2,"creation_date":1522695105,"post_id":1348940,"comment_id":86240909,"body_markdown":"Works on High Sierra 10.13.4","body":"Works on High Sierra 10.13.4"},{"owner":{"account_id":5414025,"reputation":295,"user_id":4309748,"display_name":"Keuha"},"score":11,"creation_date":1543502272,"post_id":1348940,"comment_id":93949687,"body_markdown":"Still valid for Mojave","body":"Still valid for Mojave"},{"owner":{"account_id":16333890,"reputation":150,"user_id":11796570,"display_name":"Akhilesh Sharma"},"score":1,"creation_date":1568885845,"post_id":1348940,"comment_id":102420464,"body_markdown":"Still valid for Mojave","body":"Still valid for Mojave"},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":2,"creation_date":1571802296,"post_id":1348940,"comment_id":103357097,"body_markdown":"As mentioned by Kristopher Johnson below, this is officially documented at [Technical Q&amp;A QA1170 - Important Java Directories on Mac OS X](https://developer.apple.com/library/archive/qa/qa1170/_index.html).","body":"As mentioned by Kristopher Johnson below, this is officially documented at <a href=\"https://developer.apple.com/library/archive/qa/qa1170/_index.html\" rel=\"nofollow noreferrer\">Technical Q&amp;A QA1170 - Important Java Directories on Mac OS X</a>."},{"owner":{"account_id":7604100,"reputation":517,"user_id":5767592,"display_name":"KeepLearning"},"score":0,"creation_date":1586002069,"post_id":1348940,"comment_id":107967025,"body_markdown":"Remember to log in and log out, otherwise you will not see the change","body":"Remember to log in and log out, otherwise you will not see the change"},{"owner":{"account_id":1985735,"reputation":3193,"user_id":1781024,"accept_rate":84,"display_name":"Vikas Prasad"},"score":0,"creation_date":1613551265,"post_id":1348940,"comment_id":117106074,"body_markdown":"Big Sur 11.2.1 check!","body":"Big Sur 11.2.1 check!"}],"tags":[],"owner":{"account_id":14130,"reputation":401475,"user_id":28804,"accept_rate":74,"display_name":"mipadi"},"comment_count":23,"down_vote_count":2,"up_vote_count":883,"is_accepted":true,"score":881,"last_activity_date":1578704843,"creation_date":1251488211,"answer_id":1348940,"question_id":1348842,"body_markdown":"I just set `JAVA_HOME` to the output of that command, which should give you the Java path specified in your Java preferences. Here&#39;s a snippet from my `.bashrc` file, which sets this variable:\r\n\r\n    export JAVA_HOME=$(/usr/libexec/java_home)\r\n\r\nI haven&#39;t experienced any problems with that technique.\r\n\r\nOccasionally I do have to change the value of `JAVA_HOME` to an earlier version of Java. For example, one program I&#39;m maintaining requires 32-bit Java 5 on OS X, so when using that program, I set `JAVA_HOME` by running: \r\n\r\n    export JAVA_HOME=$(/usr/libexec/java_home -v 1.5)\r\n\r\nFor those of you who don&#39;t have `java_home` in your path add it like this.\r\n\r\n    sudo ln -s /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java_home /usr/libexec/java_home\r\n\r\n**References**: \r\n\r\n - [Oracle explains the java_home command] [1]\r\n\r\n - [An article for configuring the JDK in Spring Tool Suite (Eclipse\r\n   2019) on MacOS][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/install/installation-jdk-and-jre-macos.htm#JSJIG-GUID-7EB4F697-F3D1-40EA-ACDF-07FA90F02D57\r\n\r\n  [2]: https://confessionsofanagilecoach.blogspot.com/2019/12/setting-jdk-in-sts-4-on-macos.html","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>I just set <code>JAVA_HOME</code> to the output of that command, which should give you the Java path specified in your Java preferences. Here's a snippet from my <code>.bashrc</code> file, which sets this variable:</p>\n\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home)\n</code></pre>\n\n<p>I haven't experienced any problems with that technique.</p>\n\n<p>Occasionally I do have to change the value of <code>JAVA_HOME</code> to an earlier version of Java. For example, one program I'm maintaining requires 32-bit Java 5 on OS X, so when using that program, I set <code>JAVA_HOME</code> by running: </p>\n\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home -v 1.5)\n</code></pre>\n\n<p>For those of you who don't have <code>java_home</code> in your path add it like this.</p>\n\n<pre><code>sudo ln -s /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java_home /usr/libexec/java_home\n</code></pre>\n\n<p><strong>References</strong>: </p>\n\n<ul>\n<li><p><a href=\"https://docs.oracle.com/javase/9/install/installation-jdk-and-jre-macos.htm#JSJIG-GUID-7EB4F697-F3D1-40EA-ACDF-07FA90F02D57\" rel=\"noreferrer\">Oracle explains the java_home command</a></p></li>\n<li><p><a href=\"https://confessionsofanagilecoach.blogspot.com/2019/12/setting-jdk-in-sts-4-on-macos.html\" rel=\"noreferrer\">An article for configuring the JDK in Spring Tool Suite (Eclipse\n2019) on MacOS</a></p></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":183028,"reputation":10861,"user_id":418150,"accept_rate":52,"display_name":"Lee Goddard"},"score":0,"creation_date":1406538742,"post_id":2403860,"comment_id":38854938,"body_markdown":"For OSX running default bash, I generally use the bash `.bash_profile` —&#160;why do you use than the generic `.profile`?","body":"For OSX running default bash, I generally use the bash <code>.bash_profile</code> — why do you use than the generic <code>.profile</code>?"},{"owner":{"account_id":45993,"reputation":1472,"user_id":135767,"accept_rate":71,"display_name":"lucasarruda"},"score":1,"creation_date":1406751230,"post_id":2403860,"comment_id":38957367,"body_markdown":"Since `.profile` is generic, it will work with `sh` or `bash`, while `.bash_profile` is exclusive to `bash`. Also this isolates settings from apps that use `.bash_profile`, like `MacPorts`. But you can safely use any of the two. See more about it [here](http://stackoverflow.com/questions/6751252/difference-between-profile-and-bash-profile-on-snow-leopard)","body":"Since <code>.profile</code> is generic, it will work with <code>sh</code> or <code>bash</code>, while <code>.bash_profile</code> is exclusive to <code>bash</code>. Also this isolates settings from apps that use <code>.bash_profile</code>, like <code>MacPorts</code>. But you can safely use any of the two. See more about it <a href=\"http://stackoverflow.com/questions/6751252/difference-between-profile-and-bash-profile-on-snow-leopard\">here</a>"},{"owner":{"account_id":183028,"reputation":10861,"user_id":418150,"accept_rate":52,"display_name":"Lee Goddard"},"score":1,"creation_date":1406799825,"post_id":2403860,"comment_id":38975152,"body_markdown":"—&#160;FYI, the link you provided confirms my suspicion that under bash (ie by default), use of `.bash_profile` overrides `.profile`.","body":"— FYI, the link you provided confirms my suspicion that under bash (ie by default), use of <code>.bash_profile</code> overrides <code>.profile</code>."},{"owner":{"account_id":45993,"reputation":1472,"user_id":135767,"accept_rate":71,"display_name":"lucasarruda"},"score":0,"creation_date":1407186501,"post_id":2403860,"comment_id":39110100,"body_markdown":"@LeeGee yes, and it does that because `.bash_profile` is specific, whereas `.profile` is generic, for all `sh` variations.","body":"@LeeGee yes, and it does that because <code>.bash_profile</code> is specific, whereas <code>.profile</code> is generic, for all <code>sh</code> variations."},{"owner":{"account_id":5798934,"reputation":1387,"user_id":4573774,"accept_rate":76,"display_name":"Zaphod"},"score":1,"creation_date":1489955091,"post_id":2403860,"comment_id":72884882,"body_markdown":"Since OS/X puts a link to `java` in your `/usr/bin` there shouldn&#39;t be a need to explicitly add `$JAVA_HOME` to your path.","body":"Since OS/X puts a link to <code>java</code> in your <code>&#47;usr&#47;bin</code> there shouldn&#39;t be a need to explicitly add <code>$JAVA_HOME</code> to your path."}],"tags":[],"owner":{"account_id":45993,"reputation":1472,"user_id":135767,"accept_rate":71,"display_name":"lucasarruda"},"comment_count":5,"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1268074559,"creation_date":1268074559,"answer_id":2403860,"question_id":1348842,"body_markdown":"Also, it`s interesting to set your PATH to reflect the JDK. After adding JAVA_HOME (which can be done with the example cited by &#39;mipadi&#39;):\r\n\r\n`export JAVA_HOME=$(/usr/libexec/java_home)`\r\n\r\nAdd also in ~/.profile:\r\n\r\n`export PATH=${JAVA_HOME}/bin:$PATH`\r\n\r\n\r\n**P.S.:** For OSX, I generally use .profile in the HOME dir instead of .bashrc","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>Also, it`s interesting to set your PATH to reflect the JDK. After adding JAVA_HOME (which can be done with the example cited by 'mipadi'):</p>\n\n<p><code>export JAVA_HOME=$(/usr/libexec/java_home)</code></p>\n\n<p>Add also in ~/.profile:</p>\n\n<p><code>export PATH=${JAVA_HOME}/bin:$PATH</code></p>\n\n<p><strong>P.S.:</strong> For OSX, I generally use .profile in the HOME dir instead of .bashrc</p>\n"},{"comments":[{"owner":{"account_id":124949,"reputation":2835,"user_id":320399,"accept_rate":90,"display_name":"blong"},"score":1,"creation_date":1368739835,"post_id":16428639,"comment_id":23857474,"body_markdown":"Related: [Where is JAVA_HOME on OSX Lion (10.7) or Mountain Lion (10.8)?](http://stackoverflow.com/q/6588390/320399)","body":"Related: <a href=\"http://stackoverflow.com/q/6588390/320399\">Where is JAVA_HOME on OSX Lion (10.7) or Mountain Lion (10.8)?</a>"}],"tags":[],"owner":{"account_id":128400,"reputation":3225,"user_id":326206,"accept_rate":76,"display_name":"Nicolas Mommaerts"},"comment_count":1,"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1549466562,"creation_date":1367961197,"answer_id":16428639,"question_id":1348842,"body_markdown":"Nowadays Java seems to be installed in `/Library/Java/JavaVirtualMachines`","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>Nowadays Java seems to be installed in <code>/Library/Java/JavaVirtualMachines</code></p>\n"},{"tags":[],"owner":{"account_id":5158572,"reputation":457,"user_id":4131074,"display_name":"Rae"},"comment_count":0,"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1423773615,"creation_date":1423773615,"answer_id":28487345,"question_id":1348842,"body_markdown":"I&#39;m on Mac OS 10.6.8\r\n\r\nThe easiest solution works for me is simply put in\r\n\r\n    $ export JAVA_HOME=$(/usr/libexec/java_home)\r\nTo test whether it works, put in\r\n\r\n    $ echo $JAVA_HOME\r\nit shows\r\n\r\n    /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\r\nyou can also test \r\n\r\n    $ which java\r\n","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>I'm on Mac OS 10.6.8</p>\n\n<p>The easiest solution works for me is simply put in</p>\n\n<pre><code>$ export JAVA_HOME=$(/usr/libexec/java_home)\n</code></pre>\n\n<p>To test whether it works, put in</p>\n\n<pre><code>$ echo $JAVA_HOME\n</code></pre>\n\n<p>it shows</p>\n\n<pre><code>/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\n</code></pre>\n\n<p>you can also test </p>\n\n<pre><code>$ which java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6289460,"reputation":111,"user_id":4887626,"display_name":"P&#225;lossy L&#225;szl&#243;"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1549466576,"creation_date":1431352378,"answer_id":30169515,"question_id":1348842,"body_markdown":"That above works not any more in YOSEMITE for GRAPHICAL APPLICATIONS! Like eclipse, or anything started with Spotlight. (.bash_profile, launchd.conf works for terminal sessions only.) \r\nBefore starting eclipse, just open a terminal window, and give out the following command:\r\n\r\n    launchctl setenv JAVA_HOME /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home\r\n\r\n(With your installation path! Perhaps works with $(/usr/libexec/java_home) instead of the full path too.)\r\n\r\nView the whole excellent article about the permanent solution here:\r\nhttps://stackoverflow.com/questions/25385934/setting-environment-variables-via-launchd-conf-no-longer-works-in-os-x-yosemite","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>That above works not any more in YOSEMITE for GRAPHICAL APPLICATIONS! Like eclipse, or anything started with Spotlight. (.bash_profile, launchd.conf works for terminal sessions only.) \nBefore starting eclipse, just open a terminal window, and give out the following command:</p>\n\n<pre><code>launchctl setenv JAVA_HOME /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home\n</code></pre>\n\n<p>(With your installation path! Perhaps works with $(/usr/libexec/java_home) instead of the full path too.)</p>\n\n<p>View the whole excellent article about the permanent solution here:\n<a href=\"https://stackoverflow.com/questions/25385934/setting-environment-variables-via-launchd-conf-no-longer-works-in-os-x-yosemite\">Setting environment variables via launchd.conf no longer works in OS X Yosemite/El Capitan/macOS Sierra?</a></p>\n"},{"tags":[],"owner":{"account_id":1581969,"reputation":70,"user_id":1467169,"display_name":"Shirow"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1444765335,"creation_date":1444765335,"answer_id":33111263,"question_id":1348842,"body_markdown":"I&#39;ve found this [stack][1] to help, i was having the same issue and i could fix:\r\n\r\nMy java path was here:\r\n\r\n`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home`\r\n\r\nand was needed to put into my `.bash_profile`:\r\n\r\n`export JAVA_HOME=\\&quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\\&quot;`\r\n\r\nHope help\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/19582689/1467169","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>I've found this <a href=\"https://stackoverflow.com/a/19582689/1467169\">stack</a> to help, i was having the same issue and i could fix:</p>\n\n<p>My java path was here:</p>\n\n<p><code>/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home</code></p>\n\n<p>and was needed to put into my <code>.bash_profile</code>:</p>\n\n<p><code>export JAVA_HOME=\\\"/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home\\\"</code></p>\n\n<p>Hope help</p>\n"},{"comments":[{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":0,"creation_date":1567196844,"post_id":36893647,"comment_id":101905683,"body_markdown":"This is a duplicate!","body":"This is a duplicate!"},{"owner":{"account_id":896,"reputation":81678,"user_id":1175,"accept_rate":80,"display_name":"Kristopher Johnson"},"score":0,"creation_date":1571764484,"post_id":36893647,"comment_id":103346399,"body_markdown":"I think the inclusion of the link to official Apple documentation makes it not redundant.\n\nBut if it is, the correct action is to flag it as a Duplicate, not make a comment.","body":"I think the inclusion of the link to official Apple documentation makes it not redundant.  But if it is, the correct action is to flag it as a Duplicate, not make a comment."},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":0,"creation_date":1571792470,"post_id":36893647,"comment_id":103355260,"body_markdown":"I made a comment because I cannot mark an *answer* as a duplicate. Stack Overflow only allows user to mark a *question* as a duplicate (unfortunately). The link is helpful, but I think a comment to the current answer (or just edit it with the link since you already have the capability) would be better since it concentrates all useful information in one single answer. I believe there was guideline somewhere that Stack Overflow prefers fixing current answers over writing a new one.","body":"I made a comment because I cannot mark an <i>answer</i> as a duplicate. Stack Overflow only allows user to mark a <i>question</i> as a duplicate (unfortunately). The link is helpful, but I think a comment to the current answer (or just edit it with the link since you already have the capability) would be better since it concentrates all useful information in one single answer. I believe there was guideline somewhere that Stack Overflow prefers fixing current answers over writing a new one."}],"tags":[],"owner":{"account_id":896,"reputation":81678,"user_id":1175,"accept_rate":80,"display_name":"Kristopher Johnson"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461769295,"creation_date":1461769295,"answer_id":36893647,"question_id":1348842,"body_markdown":"As other answers note, the correct way to find the Java home directory is to use `/usr/libexec/java_home`.\r\n\r\nThe official documentation for this is in Apple&#39;s _Technical Q&amp;A QA1170: Important Java Directories on OS X_: https://developer.apple.com/library/mac/qa/qa1170/_index.html","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>As other answers note, the correct way to find the Java home directory is to use <code>/usr/libexec/java_home</code>.</p>\n\n<p>The official documentation for this is in Apple's <em>Technical Q&amp;A QA1170: Important Java Directories on OS X</em>: <a href=\"https://developer.apple.com/library/mac/qa/qa1170/_index.html\" rel=\"nofollow\">https://developer.apple.com/library/mac/qa/qa1170/_index.html</a></p>\n"},{"tags":[],"owner":{"account_id":187852,"reputation":723,"user_id":426209,"accept_rate":75,"display_name":"Yichuan Wang"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1461805285,"creation_date":1461805285,"answer_id":36903447,"question_id":1348842,"body_markdown":"For Fish Shell users, use something like the following: `alias java7 &quot;set -gx JAVA_HOME (/usr/libexec/java_home -v1.7)&quot;`","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>For Fish Shell users, use something like the following: <code>alias java7 \"set -gx JAVA_HOME (/usr/libexec/java_home -v1.7)\"</code></p>\n"},{"tags":[],"owner":{"account_id":73312,"reputation":5791,"user_id":211197,"display_name":"maksimov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1478632955,"creation_date":1478632955,"answer_id":40494854,"question_id":1348842,"body_markdown":"For me maven seems to work off the `.mavenrc` file:\r\n\r\n    echo &quot;export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)&quot; &gt; ~/.mavenrc\r\n\r\nI&#39;m sure I picked it up on SO too, just can&#39;t remember where.","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>For me maven seems to work off the <code>.mavenrc</code> file:</p>\n\n<pre><code>echo \"export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)\" &gt; ~/.mavenrc\n</code></pre>\n\n<p>I'm sure I picked it up on SO too, just can't remember where.</p>\n"},{"comments":[{"owner":{"account_id":3612523,"reputation":7494,"user_id":3013206,"accept_rate":20,"display_name":"Spindizzy"},"score":1,"creation_date":1540636564,"post_id":41367448,"comment_id":92944333,"body_markdown":"I like this approach, because it allows me to change the Java version very easy within the .mavenrc file.","body":"I like this approach, because it allows me to change the Java version very easy within the .mavenrc file."}],"tags":[],"owner":{"account_id":3733569,"reputation":5130,"user_id":3105145,"display_name":"KhaledMohamedP"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1482948437,"creation_date":1482948437,"answer_id":41367448,"question_id":1348842,"body_markdown":"Create file `~/.mavenrc`\r\n\r\nthen paste this into the file \r\n\r\n`export JAVA_HOME=$(/usr/libexec/java_home)`\r\n\r\ntest\r\n\r\n`mvn -v`\r\n","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>Create file <code>~/.mavenrc</code></p>\n\n<p>then paste this into the file </p>\n\n<p><code>export JAVA_HOME=$(/usr/libexec/java_home)</code></p>\n\n<p>test</p>\n\n<p><code>mvn -v</code></p>\n"},{"tags":[],"owner":{"account_id":259035,"reputation":12666,"user_id":541624,"accept_rate":64,"display_name":"ericn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1497175483,"creation_date":1497175483,"answer_id":44482574,"question_id":1348842,"body_markdown":"Skipping Terminal setup since you mentioned applications, permanent system environment variable set up (works for macOS Sierra; should work for El Capitan too):  \r\n\r\n    launchctl setenv JAVA_HOME $(/usr/libexec/java_home -v 1.8)\r\n\r\n  \r\n(this will set JAVA_HOME to the latest 1.8 JDK, chances are you have gone through serveral updates e.g. javac 1.8.0_101, javac 1.8.0_131)  \r\nOf course, change 1.8 to 1.7 or 1.6 (really?) to suit your need and your system  ","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>Skipping Terminal setup since you mentioned applications, permanent system environment variable set up (works for macOS Sierra; should work for El Capitan too):  </p>\n\n<pre><code>launchctl setenv JAVA_HOME $(/usr/libexec/java_home -v 1.8)\n</code></pre>\n\n<p>(this will set JAVA_HOME to the latest 1.8 JDK, chances are you have gone through serveral updates e.g. javac 1.8.0_101, javac 1.8.0_131)<br>\nOf course, change 1.8 to 1.7 or 1.6 (really?) to suit your need and your system  </p>\n"},{"comments":[{"owner":{"account_id":428408,"reputation":926,"user_id":810715,"accept_rate":69,"display_name":"TheProletariat"},"score":0,"creation_date":1521130438,"post_id":44667955,"comment_id":85610712,"body_markdown":"This is helpful, thanks.  But I believe you missed including the last step, which is then setting JAVA_HOME to the returned value in .bashrc / .bash_profile / .zshrc / etc.  Please correct me if I&#39;m mistaken.","body":"This is helpful, thanks.  But I believe you missed including the last step, which is then setting JAVA_HOME to the returned value in .bashrc / .bash_profile / .zshrc / etc.  Please correct me if I&#39;m mistaken."},{"owner":{"account_id":8858034,"reputation":8530,"user_id":6615163,"display_name":"hygull"},"score":2,"creation_date":1521198876,"post_id":44667955,"comment_id":85639737,"body_markdown":"It is not required. In my case, `$JAVA_HOME` refers `$(/usr/libexec/java_home)` and `$(/usr/libexec/java_home)` \n is internally referred as `/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home` by the System.","body":"It is not required. In my case, <code>$JAVA_HOME</code> refers <code>$(&#47;usr&#47;libexec&#47;java_home)</code> and <code>$(&#47;usr&#47;libexec&#47;java_home)</code>   is internally referred as <code>&#47;Library&#47;Java&#47;JavaVirtualMachines&#47;jdk1.8.0_131.jdk&#47;Contents&#47;&zwnj;&#8203;Home</code> by the System."},{"owner":{"account_id":428408,"reputation":926,"user_id":810715,"accept_rate":69,"display_name":"TheProletariat"},"score":1,"creation_date":1521481233,"post_id":44667955,"comment_id":85739276,"body_markdown":"Got it.  It was required in my case.  Thanks.","body":"Got it.  It was required in my case.  Thanks."}],"tags":[],"owner":{"account_id":8858034,"reputation":8530,"user_id":6615163,"display_name":"hygull"},"comment_count":3,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1498024970,"creation_date":1498024970,"answer_id":44667955,"question_id":1348842,"body_markdown":"I am having **MAC OS X(Sierra) 10.12.2**. \r\n\r\nI set **JAVA_HOME** to work on **React Native**(for Android apps) by following the following steps.\r\n\r\n* Open Terminal (Command+R, type Terminal, Hit ENTER).\r\n\r\n* Add the following lines to **~/.bash_profile**.\r\n```\r\nexport JAVA_HOME=$(/usr/libexec/java_home)\r\n```\r\n\r\n* Now run the following command. \r\n```\r\nsource ~/.bash_profile\r\n```\r\n\r\n* You can check the exact value of **JAVA_HOME** by typing the following command.\r\n```\r\necho $JAVA_HOME\r\n```\r\n\r\nThe value(output) returned will be something like below.\r\n```\r\n/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home\r\n```\r\n\r\n**That&#39;s it.**\r\n","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>I am having <strong>MAC OS X(Sierra) 10.12.2</strong>. </p>\n\n<p>I set <strong>JAVA_HOME</strong> to work on <strong>React Native</strong>(for Android apps) by following the following steps.</p>\n\n<ul>\n<li><p>Open Terminal (Command+R, type Terminal, Hit ENTER).</p></li>\n<li><p>Add the following lines to <strong>~/.bash_profile</strong>.\n<code>\nexport JAVA_HOME=$(/usr/libexec/java_home)\n</code></p></li>\n<li><p>Now run the following command. \n<code>\nsource ~/.bash_profile\n</code></p></li>\n<li><p>You can check the exact value of <strong>JAVA_HOME</strong> by typing the following command.\n<code>\necho $JAVA_HOME\n</code></p></li>\n</ul>\n\n<p>The value(output) returned will be something like below.\n<code>\n/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home\n</code></p>\n\n<p><strong>That's it.</strong></p>\n"},{"tags":[],"owner":{"account_id":7827419,"reputation":8252,"user_id":5918539,"display_name":"Jerry Chong"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1586856900,"creation_date":1586856900,"answer_id":61204631,"question_id":1348842,"body_markdown":"It is recommended to check **default terminal shell** before set **JAVA_HOME** environment variable, via following commands:\r\n\r\n    $ echo $SHELL\r\n    /bin/bash\r\n\r\nIf your default terminal is **/bin/bash** (Bash), then you should use **@hygull** method\r\n\r\nIf your default terminal is **/bin/zsh** (Z Shell), then you should set these environment variable in **~/.zshenv** file with following contents:\r\n\r\n    export JAVA_HOME=&quot;$(/usr/libexec/java_home)&quot;\r\n\r\nSimilarly, any other terminal type not mentioned above, you should set environment variable in its respective terminal env file.\r\n\r\nThis method tested working in **macOS Mojave Version 10.14.6**.","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>It is recommended to check <strong>default terminal shell</strong> before set <strong>JAVA_HOME</strong> environment variable, via following commands:</p>\n\n<pre><code>$ echo $SHELL\n/bin/bash\n</code></pre>\n\n<p>If your default terminal is <strong>/bin/bash</strong> (Bash), then you should use <strong>@hygull</strong> method</p>\n\n<p>If your default terminal is <strong>/bin/zsh</strong> (Z Shell), then you should set these environment variable in <strong>~/.zshenv</strong> file with following contents:</p>\n\n<pre><code>export JAVA_HOME=\"$(/usr/libexec/java_home)\"\n</code></pre>\n\n<p>Similarly, any other terminal type not mentioned above, you should set environment variable in its respective terminal env file.</p>\n\n<p>This method tested working in <strong>macOS Mojave Version 10.14.6</strong>.</p>\n"},{"tags":[],"owner":{"account_id":27890380,"reputation":11,"user_id":21296891,"display_name":"Raj Kumar Ram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677763370,"creation_date":1677499422,"answer_id":75580261,"question_id":1348842,"body_markdown":"MacBook Pro machine - MAC OS Ventura 13\r\n\r\nI set JAVA_HOME to work with the following the following steps:\r\n\r\n1. Open Command prompt/Terminal (Command+R, type Terminal in search and hit Enter)\r\n\r\n1. Open ~/.bash_profile file (`vi ~/.bash_profile`)\r\n\r\n1. Add/Update this lines to `~/.bash_profile` (`export JAVA_HOME=$(/usr/libexec/java_home)`)\r\n\r\n1. Run the following command (`source ~/.bash_profile`)\r\n\r\n1. Verify the java home path (`echo $JAVA_HOME`)\r\n\r\nOutput: It will be similar to your java path ( `/Library/Java/JavaVirtualMachines/applejdk-17.0.5.8.2.jdk/Contents/Home`)","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>MacBook Pro machine - MAC OS Ventura 13</p>\n<p>I set JAVA_HOME to work with the following the following steps:</p>\n<ol>\n<li><p>Open Command prompt/Terminal (Command+R, type Terminal in search and hit Enter)</p>\n</li>\n<li><p>Open ~/.bash_profile file (<code>vi ~/.bash_profile</code>)</p>\n</li>\n<li><p>Add/Update this lines to <code>~/.bash_profile</code> (<code>export JAVA_HOME=$(/usr/libexec/java_home)</code>)</p>\n</li>\n<li><p>Run the following command (<code>source ~/.bash_profile</code>)</p>\n</li>\n<li><p>Verify the java home path (<code>echo $JAVA_HOME</code>)</p>\n</li>\n</ol>\n<p>Output: It will be similar to your java path ( <code>/Library/Java/JavaVirtualMachines/applejdk-17.0.5.8.2.jdk/Contents/Home</code>)</p>\n"}],"owner":{"account_id":6552,"reputation":20287,"user_id":11069,"accept_rate":100,"display_name":"Robert Christie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":314301,"favorite_count":0,"down_vote_count":0,"up_vote_count":462,"accepted_answer_id":1348940,"answer_count":15,"score":462,"last_activity_date":1677763370,"creation_date":1251487078,"question_id":1348842,"body_markdown":"Many Java applications that use shell scripts to configure their environment use the `JAVA_HOME` environment variable to start the correct version of Java, locate JRE JARs, and so on.\r\n\r\nIn macOS X 10.6, the following paths seem to be valid for this variable\r\n\r\n    /Library/Java/Home\r\n    /System/Library/Frameworks/JavaVM.framework/Home\r\n    /System/Library/Frameworks/JavaVM.framework/Versions/Current\r\n\r\nSome of these are symlinks to the actual current VM (as defined in the Java Preference pane). \r\n\r\nBut which one should be used—or is it okay to use any of them?","title":"What should I set JAVA_HOME environment variable on macOS X 10.6?","body":"<p>Many Java applications that use shell scripts to configure their environment use the <code>JAVA_HOME</code> environment variable to start the correct version of Java, locate JRE JARs, and so on.</p>\n\n<p>In macOS X 10.6, the following paths seem to be valid for this variable</p>\n\n<pre><code>/Library/Java/Home\n/System/Library/Frameworks/JavaVM.framework/Home\n/System/Library/Frameworks/JavaVM.framework/Versions/Current\n</code></pre>\n\n<p>Some of these are symlinks to the actual current VM (as defined in the Java Preference pane). </p>\n\n<p>But which one should be used—or is it okay to use any of them?</p>\n"},{"tags":["java","junit","jmh"],"answers":[{"comments":[{"owner":{"account_id":2094629,"reputation":5281,"user_id":1863694,"accept_rate":53,"display_name":"Ivan Voroshilin"},"score":3,"creation_date":1454100545,"post_id":30486197,"comment_id":57909348,"body_markdown":"This is not a recommended option to run tests under JMH. Unit-tests and other IDE interferes with the measurements. Do it right from the command line.","body":"This is not a recommended option to run tests under JMH. Unit-tests and other IDE interferes with the measurements. Do it right from the command line."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1454176548,"post_id":30486197,"comment_id":57931086,"body_markdown":"@IvanVoroshilin I&#39;ve tried it both ways and did not see a difference in results. Do you have concrete advice under what conditions this becomes a problem?","body":"@IvanVoroshilin I&#39;ve tried it both ways and did not see a difference in results. Do you have concrete advice under what conditions this becomes a problem?"},{"owner":{"account_id":2094629,"reputation":5281,"user_id":1863694,"accept_rate":53,"display_name":"Ivan Voroshilin"},"score":1,"creation_date":1454219891,"post_id":30486197,"comment_id":57942523,"body_markdown":"The results are less reliable, it is just a recommendation. Eliminate the external factors. This gets in the way when it comes to microbenchmarking.","body":"The results are less reliable, it is just a recommendation. Eliminate the external factors. This gets in the way when it comes to microbenchmarking."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":28,"creation_date":1454249081,"post_id":30486197,"comment_id":57949803,"body_markdown":"@IvanVoroshilin Sounds like FUD spread by people who hate IDEs (I am referring to some of the core JVM developers, who also develop JMH). If we want to split hairs, we should also advise people to shutdown the window manager, stop all daemons, etc, etc. In practice, warming up and averaging over several iterations smooths out most timing noise.","body":"@IvanVoroshilin Sounds like FUD spread by people who hate IDEs (I am referring to some of the core JVM developers, who also develop JMH). If we want to split hairs, we should also advise people to shutdown the window manager, stop all daemons, etc, etc. In practice, warming up and averaging over several iterations smooths out most timing noise."},{"owner":{"account_id":190525,"reputation":458,"user_id":430550,"display_name":"garkin"},"score":0,"creation_date":1474446319,"post_id":30486197,"comment_id":66529775,"body_markdown":"Forking should negate most possible side effects.","body":"Forking should negate most possible side effects."},{"owner":{"account_id":4150445,"reputation":154,"user_id":3403066,"accept_rate":67,"display_name":"dsmith"},"score":4,"creation_date":1476303794,"post_id":30486197,"comment_id":67293372,"body_markdown":"If only we had a benchmarking framework to measure the differences... ;)","body":"If only we had a benchmarking framework to measure the differences... ;)"},{"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"score":0,"creation_date":1507715753,"post_id":30486197,"comment_id":80317957,"body_markdown":"@AleksandrDubinsky are you sure that LookUtils belongs to standard libs or to those JMH dependencies?","body":"@AleksandrDubinsky are you sure that LookUtils belongs to standard libs or to those JMH dependencies?"},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1507820350,"post_id":30486197,"comment_id":80372075,"body_markdown":"@JeanValjean I don&#39;t see a reference to &quot;LookUtils&quot; anywhere on this page.","body":"@JeanValjean I don&#39;t see a reference to &quot;LookUtils&quot; anywhere on this page."},{"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"score":0,"creation_date":1507898322,"post_id":30486197,"comment_id":80406271,"body_markdown":"@AleksandrDubinsky weird! I probably got access to a cached version, then! Thanks!","body":"@AleksandrDubinsky weird! I probably got access to a cached version, then! Thanks!"},{"owner":{"account_id":1220308,"reputation":2681,"user_id":1187067,"accept_rate":67,"display_name":"Pleymor"},"score":1,"creation_date":1559914007,"post_id":30486197,"comment_id":99579348,"body_markdown":"@AleksandrDubinsky I&#39;d suggest to add the StackProfiler which prints very useful profiling results at the end: `.addProfiler(StackProfiler.class)` like:\n\n....[Thread state: RUNNABLE]........................................................................\n 50.0%  50.0% java.net.SocketInputStream.socketRead0\n 21.5%  21.5% com.mycompany.myapp.MyProfiledClass.myMethod\n  9.4%   9.4% java.io.WinNTFileSystem.getBooleanAttributes\n  4.7%   4.7% java.util.zip.ZipFile.getEntry\n  3.0%   3.0% java.lang.String.regionMatches\n...","body":"@AleksandrDubinsky I&#39;d suggest to add the StackProfiler which prints very useful profiling results at the end: <code>.addProfiler(StackProfiler.class)</code> like:  ....[Thread state: RUNNABLE]...................................................&zwnj;&#8203;....................&zwnj;&#8203;.  50.0%  50.0% java.net.SocketInputStream.socketRead0  21.5%  21.5% com.mycompany.myapp.MyProfiledClass.myMethod   9.4%   9.4% java.io.WinNTFileSystem.getBooleanAttributes   4.7%   4.7% java.util.zip.ZipFile.getEntry   3.0%   3.0% java.lang.String.regionMatches ..."}],"tags":[],"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"comment_count":10,"down_vote_count":1,"up_vote_count":74,"is_accepted":true,"score":73,"last_activity_date":1529058953,"creation_date":1432738751,"answer_id":30486197,"question_id":30485856,"body_markdown":"I&#39;ve been running JMH inside my existing Maven project using JUnit with no apparent ill effects. I cannot answer why the authors recommend doing things differently. I have not observed a difference in results. JMH launches a separate JVM to run benchmarks to isolate them. Here is what I do:\r\n\r\n * Add the JMH dependencies to your POM:\r\n\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.openjdk.jmh&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jmh-core&lt;/artifactId&gt;\r\n          &lt;version&gt;1.21&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.openjdk.jmh&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jmh-generator-annprocess&lt;/artifactId&gt;\r\n          &lt;version&gt;1.21&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    Note that I&#39;ve placed them in scope `test`.\r\n\r\n    In Eclipse, you may need to configure the annotation processor manually. NetBeans handles this automatically.\r\n\r\n * Create your JUnit and JMH class. I&#39;ve chosen to combine both into a single class, but that is up to you. Notice that `OptionsBuilder.include` is what actually determines which benchmarks will be run from your JUnit test!\r\n\r\n        import java.util.ArrayList;\r\n        import java.util.List;\r\n        import java.util.Random;\r\n        import java.util.concurrent.TimeUnit;\r\n        import org.junit.Test;\r\n        import org.openjdk.jmh.annotations.*;\r\n        import org.openjdk.jmh.infra.Blackhole;\r\n        import org.openjdk.jmh.runner.Runner;\r\n        import org.openjdk.jmh.runner.options.*;\r\n\r\n\r\n        public class TestBenchmark \r\n        {\r\n\r\n              @Test public void \r\n            launchBenchmark() throws Exception {\r\n\r\n                    Options opt = new OptionsBuilder()\r\n                        // Specify which benchmarks to run. \r\n                        // You can be more specific if you&#39;d like to run only one benchmark per test.\r\n                        .include(this.getClass().getName() + &quot;.*&quot;)\r\n                        // Set the following options as needed\r\n                        .mode (Mode.AverageTime)\r\n                        .timeUnit(TimeUnit.MICROSECONDS)\r\n                        .warmupTime(TimeValue.seconds(1))\r\n                        .warmupIterations(2)\r\n                        .measurementTime(TimeValue.seconds(1))\r\n                        .measurementIterations(2)\r\n                        .threads(2)\r\n                        .forks(1)\r\n                        .shouldFailOnError(true)\r\n                        .shouldDoGC(true)\r\n                        //.jvmArgs(&quot;-XX:+UnlockDiagnosticVMOptions&quot;, &quot;-XX:+PrintInlining&quot;)\r\n                        //.addProfiler(WinPerfAsmProfiler.class)\r\n                        .build();\r\n\r\n                    new Runner(opt).run();\r\n                }\r\n\r\n            // The JMH samples are the best documentation for how to use it\r\n            // http://hg.openjdk.java.net/code-tools/jmh/file/tip/jmh-samples/src/main/java/org/openjdk/jmh/samples/\r\n            @State (Scope.Thread)\r\n            public static class BenchmarkState\r\n            {\r\n                List&lt;Integer&gt; list;\r\n\r\n                  @Setup (Level.Trial) public void\r\n                initialize() {\r\n\r\n                        Random rand = new Random();\r\n\r\n                        list = new ArrayList&lt;&gt;();\r\n                        for (int i = 0; i &lt; 1000; i++)\r\n                            list.add (rand.nextInt());\r\n                    }\r\n            }\r\n\r\n              @Benchmark public void \r\n            benchmark1 (BenchmarkState state, Blackhole bh) {\r\n\r\n                    List&lt;Integer&gt; list = state.list;\r\n\r\n                    for (int i = 0; i &lt; 1000; i++)\r\n                        bh.consume (list.get (i));\r\n                }\r\n        }\r\n\r\n * JMH&#39;s annotation processor seems to not work well with compile-on-save in NetBeans. You may need to do a full `Clean and Build` whenever you modify the benchmarks. (Any suggestions appreciated!)\r\n * Run your `launchBenchmark` test and watch the results!\r\n\r\n        -------------------------------------------------------\r\n         T E S T S\r\n        -------------------------------------------------------\r\n        Running com.Foo\r\n        # JMH version: 1.21\r\n        # VM version: JDK 1.8.0_172, Java HotSpot(TM) 64-Bit Server VM, 25.172-b11\r\n        # VM invoker: /usr/lib/jvm/java-8-jdk/jre/bin/java\r\n        # VM options: &lt;none&gt;\r\n        # Warmup: 2 iterations, 1 s each\r\n        # Measurement: 2 iterations, 1 s each\r\n        # Timeout: 10 min per iteration\r\n        # Threads: 2 threads, will synchronize iterations\r\n        # Benchmark mode: Average time, time/op\r\n        # Benchmark: com.Foo.benchmark1\r\n\r\n        # Run progress: 0.00% complete, ETA 00:00:04\r\n        # Fork: 1 of 1\r\n        # Warmup Iteration   1: 4.258 us/op\r\n        # Warmup Iteration   2: 4.359 us/op\r\n        Iteration   1: 4.121 us/op\r\n        Iteration   2: 4.029 us/op\r\n\r\n\r\n        Result &quot;benchmark1&quot;:\r\n          4.075 us/op\r\n\r\n\r\n        # Run complete. Total time: 00:00:06\r\n\r\n        REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on\r\n        why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial\r\n        experiments, perform baseline and negative tests that provide experimental control, make sure\r\n        the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.\r\n        Do not assume the numbers tell you what you want them to tell.\r\n\r\n        Benchmark                                Mode  Cnt  Score   Error  Units\r\n        Foo.benchmark1                           avgt    2  4.075          us/op\r\n        Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.013 sec\r\n\r\n\r\n * `Runner.run` even returns `RunResult` objects on which you can do assertions, etc.","title":"How to run JMH from inside JUnit tests?","body":"<p>I've been running JMH inside my existing Maven project using JUnit with no apparent ill effects. I cannot answer why the authors recommend doing things differently. I have not observed a difference in results. JMH launches a separate JVM to run benchmarks to isolate them. Here is what I do:</p>\n\n<ul>\n<li><p>Add the JMH dependencies to your POM:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.openjdk.jmh&lt;/groupId&gt;\n  &lt;artifactId&gt;jmh-core&lt;/artifactId&gt;\n  &lt;version&gt;1.21&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.openjdk.jmh&lt;/groupId&gt;\n  &lt;artifactId&gt;jmh-generator-annprocess&lt;/artifactId&gt;\n  &lt;version&gt;1.21&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Note that I've placed them in scope <code>test</code>.</p>\n\n<p>In Eclipse, you may need to configure the annotation processor manually. NetBeans handles this automatically.</p></li>\n<li><p>Create your JUnit and JMH class. I've chosen to combine both into a single class, but that is up to you. Notice that <code>OptionsBuilder.include</code> is what actually determines which benchmarks will be run from your JUnit test!</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.concurrent.TimeUnit;\nimport org.junit.Test;\nimport org.openjdk.jmh.annotations.*;\nimport org.openjdk.jmh.infra.Blackhole;\nimport org.openjdk.jmh.runner.Runner;\nimport org.openjdk.jmh.runner.options.*;\n\n\npublic class TestBenchmark \n{\n\n      @Test public void \n    launchBenchmark() throws Exception {\n\n            Options opt = new OptionsBuilder()\n                // Specify which benchmarks to run. \n                // You can be more specific if you'd like to run only one benchmark per test.\n                .include(this.getClass().getName() + \".*\")\n                // Set the following options as needed\n                .mode (Mode.AverageTime)\n                .timeUnit(TimeUnit.MICROSECONDS)\n                .warmupTime(TimeValue.seconds(1))\n                .warmupIterations(2)\n                .measurementTime(TimeValue.seconds(1))\n                .measurementIterations(2)\n                .threads(2)\n                .forks(1)\n                .shouldFailOnError(true)\n                .shouldDoGC(true)\n                //.jvmArgs(\"-XX:+UnlockDiagnosticVMOptions\", \"-XX:+PrintInlining\")\n                //.addProfiler(WinPerfAsmProfiler.class)\n                .build();\n\n            new Runner(opt).run();\n        }\n\n    // The JMH samples are the best documentation for how to use it\n    // http://hg.openjdk.java.net/code-tools/jmh/file/tip/jmh-samples/src/main/java/org/openjdk/jmh/samples/\n    @State (Scope.Thread)\n    public static class BenchmarkState\n    {\n        List&lt;Integer&gt; list;\n\n          @Setup (Level.Trial) public void\n        initialize() {\n\n                Random rand = new Random();\n\n                list = new ArrayList&lt;&gt;();\n                for (int i = 0; i &lt; 1000; i++)\n                    list.add (rand.nextInt());\n            }\n    }\n\n      @Benchmark public void \n    benchmark1 (BenchmarkState state, Blackhole bh) {\n\n            List&lt;Integer&gt; list = state.list;\n\n            for (int i = 0; i &lt; 1000; i++)\n                bh.consume (list.get (i));\n        }\n}\n</code></pre></li>\n<li><p>JMH's annotation processor seems to not work well with compile-on-save in NetBeans. You may need to do a full <code>Clean and Build</code> whenever you modify the benchmarks. (Any suggestions appreciated!)</p></li>\n<li><p>Run your <code>launchBenchmark</code> test and watch the results!</p>\n\n<pre><code>-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning com.Foo\n# JMH version: 1.21\n# VM version: JDK 1.8.0_172, Java HotSpot(TM) 64-Bit Server VM, 25.172-b11\n# VM invoker: /usr/lib/jvm/java-8-jdk/jre/bin/java\n# VM options: &lt;none&gt;\n# Warmup: 2 iterations, 1 s each\n# Measurement: 2 iterations, 1 s each\n# Timeout: 10 min per iteration\n# Threads: 2 threads, will synchronize iterations\n# Benchmark mode: Average time, time/op\n# Benchmark: com.Foo.benchmark1\n\n# Run progress: 0.00% complete, ETA 00:00:04\n# Fork: 1 of 1\n# Warmup Iteration   1: 4.258 us/op\n# Warmup Iteration   2: 4.359 us/op\nIteration   1: 4.121 us/op\nIteration   2: 4.029 us/op\n\n\nResult \"benchmark1\":\n  4.075 us/op\n\n\n# Run complete. Total time: 00:00:06\n\nREMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on\nwhy the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial\nexperiments, perform baseline and negative tests that provide experimental control, make sure\nthe benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.\nDo not assume the numbers tell you what you want them to tell.\n\nBenchmark                                Mode  Cnt  Score   Error  Units\nFoo.benchmark1                           avgt    2  4.075          us/op\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 7.013 sec\n</code></pre></li>\n<li><p><code>Runner.run</code> even returns <code>RunResult</code> objects on which you can do assertions, etc.</p></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1577446652,"post_id":59437235,"comment_id":105172848,"body_markdown":"Code-only answers are frowned-upon. How is this solution different and/or better than the existing answer? How does calling jmh.Main cause the correct tests to be run?","body":"Code-only answers are frowned-upon. How is this solution different and/or better than the existing answer? How does calling jmh.Main cause the correct tests to be run?"},{"owner":{"account_id":1215767,"reputation":1710,"user_id":1183404,"display_name":"Cristian Florescu"},"score":1,"creation_date":1577472134,"post_id":59437235,"comment_id":105182039,"body_markdown":"This is other simplified approach. That&#39;s all.","body":"This is other simplified approach. That&#39;s all."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1577957741,"post_id":59437235,"comment_id":105289885,"body_markdown":"I wasn&#39;t trying to criticize. I was listing questions that you should answer in the text of your post. It is bad to post some code without explanation.","body":"I wasn&#39;t trying to criticize. I was listing questions that you should answer in the text of your post. It is bad to post some code without explanation."},{"owner":{"account_id":1717188,"reputation":935,"user_id":1574012,"accept_rate":67,"display_name":"cljk"},"score":1,"creation_date":1579697461,"post_id":59437235,"comment_id":105851725,"body_markdown":"The difference is more or less obvious!?: The code obove provides the test-setup as annotations - the other one is a programmatic approach.\nBoth have in common that JUnit is just used to start JMH. It&#180;s a personal preference - I prefer the annotation approach.","body":"The difference is more or less obvious!?: The code obove provides the test-setup as annotations - the other one is a programmatic approach. Both have in common that JUnit is just used to start JMH. It&#180;s a personal preference - I prefer the annotation approach."},{"owner":{"account_id":1534150,"reputation":934,"user_id":1430630,"display_name":"Luke"},"score":1,"creation_date":1585701854,"post_id":59437235,"comment_id":107853713,"body_markdown":"Thanks, although I do get a message about &quot;Unable to find the resource: /META-INF/BenchmarkList&quot;","body":"Thanks, although I do get a message about &quot;Unable to find the resource: /META-INF/BenchmarkList&quot;"},{"owner":{"account_id":313594,"reputation":2936,"user_id":628318,"display_name":"drekbour"},"score":0,"creation_date":1596294313,"post_id":59437235,"comment_id":111769017,"body_markdown":"+1 Benchmark annotation-config is **shared** when running from Junit, build plugin or command-line. This supports running quick benchmarks from IDE (via Junit) and formal ones from build environment","body":"+1 Benchmark annotation-config is <b>shared</b> when running from Junit, build plugin or command-line. This supports running quick benchmarks from IDE (via Junit) and formal ones from build environment"},{"owner":{"account_id":6292124,"reputation":443,"user_id":4889421,"accept_rate":25,"display_name":"Chuck C"},"score":0,"creation_date":1644011942,"post_id":59437235,"comment_id":125501249,"body_markdown":"To make it more obvious what is happening and make it more similar to the above answer, the benchmark method should probably be converted to this:\n\n    @Test\n    public void benchmark() throws Exception {\n        Options opt = new OptionsBuilder()\n                .include(TestBenchmark.class.getSimpleName())\n                .build();\n\n        //how to run benchmark and collect results\n        Collection&lt;RunResult&gt; runResults = new Runner(opt).run();\n    }","body":"To make it more obvious what is happening and make it more similar to the above answer, the benchmark method should probably be converted to this:      @Test     public void benchmark() throws Exception {         Options opt = new OptionsBuilder()                 .include(TestBenchmark.class.getSimpleName())                 .build();          //how to run benchmark and collect results         Collection&lt;RunResult&gt; runResults = new Runner(opt).run();     }"}],"tags":[],"owner":{"account_id":1215767,"reputation":1710,"user_id":1183404,"display_name":"Cristian Florescu"},"comment_count":7,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1643810302,"creation_date":1576940581,"answer_id":59437235,"question_id":30485856,"body_markdown":"A declarative approach using annotations:\r\n\r\n        \r\n    @State(Scope.Benchmark)\r\n    @Threads(1)\r\n    public class TestBenchmark {\r\n           \r\n        @Param({&quot;10&quot;,&quot;100&quot;,&quot;1000&quot;})\r\n        public int iterations;\r\n    \r\n    \r\n        @Setup(Level.Invocation)\r\n        public void setupInvokation() throws Exception {\r\n            // executed before each invocation of the benchmark\r\n        }\r\n    \r\n        @Setup(Level.Iteration)\r\n        public void setupIteration() throws Exception {\r\n            // executed before each invocation of the iteration\r\n        }\r\n    \r\n        @Benchmark\r\n        @BenchmarkMode(Mode.AverageTime)\r\n        @Fork(warmups = 1, value = 1)\r\n        @Warmup(batchSize = -1, iterations = 3, time = 10, timeUnit = TimeUnit.MILLISECONDS)\r\n        @Measurement(batchSize = -1, iterations = 10, time = 10, timeUnit = TimeUnit.MILLISECONDS)\r\n        @OutputTimeUnit(TimeUnit.MILLISECONDS)\r\n        public void test() throws Exception {\r\n           Thread.sleep(ThreadLocalRandom.current().nextInt(0, iterations));\r\n        }\r\n    \r\n    \r\n        @Test\r\n        public void benchmark() throws Exception {\r\n            String[] argv = {};\r\n            org.openjdk.jmh.Main.main(argv);\r\n        }\r\n    \r\n    }\r\n\r\n","title":"How to run JMH from inside JUnit tests?","body":"<p>A declarative approach using annotations:</p>\n<pre><code>@State(Scope.Benchmark)\n@Threads(1)\npublic class TestBenchmark {\n       \n    @Param({&quot;10&quot;,&quot;100&quot;,&quot;1000&quot;})\n    public int iterations;\n\n\n    @Setup(Level.Invocation)\n    public void setupInvokation() throws Exception {\n        // executed before each invocation of the benchmark\n    }\n\n    @Setup(Level.Iteration)\n    public void setupIteration() throws Exception {\n        // executed before each invocation of the iteration\n    }\n\n    @Benchmark\n    @BenchmarkMode(Mode.AverageTime)\n    @Fork(warmups = 1, value = 1)\n    @Warmup(batchSize = -1, iterations = 3, time = 10, timeUnit = TimeUnit.MILLISECONDS)\n    @Measurement(batchSize = -1, iterations = 10, time = 10, timeUnit = TimeUnit.MILLISECONDS)\n    @OutputTimeUnit(TimeUnit.MILLISECONDS)\n    public void test() throws Exception {\n       Thread.sleep(ThreadLocalRandom.current().nextInt(0, iterations));\n    }\n\n\n    @Test\n    public void benchmark() throws Exception {\n        String[] argv = {};\n        org.openjdk.jmh.Main.main(argv);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1647852124,"post_id":71552000,"comment_id":126465978,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/71552000/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1647935277,"post_id":71552000,"comment_id":126489706,"body_markdown":"Code-only answers are frowned upon. At the least, please explain how your answer is different from other, similar answers.","body":"Code-only answers are frowned upon. At the least, please explain how your answer is different from other, similar answers."}],"tags":[],"owner":{"account_id":15805079,"reputation":11,"user_id":11403802,"display_name":"欲穷三千界"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1647826851,"creation_date":1647826851,"answer_id":71552000,"question_id":30485856,"body_markdown":"    @State(Scope.Benchmark)\r\n    @Threads(1)\r\n    @Fork(1)\r\n    @OutputTimeUnit(TimeUnit.MICROSECONDS)\r\n    @Warmup(iterations = 5, time = 1)\r\n    @Measurement(iterations = 5, time = 1)\r\n    @BenchmarkMode(Mode.All)\r\n    public class ToBytesTest {\r\n    \r\n      public static void main(String[] args) {\r\n        ToBytesTest test = new ToBytesTest();\r\n        System.out.println(test.string()[0] == test.charBufferWrap()[0] &amp;&amp; test.charBufferWrap()[0] == test.charBufferAllocate()[0]);\r\n      }\r\n    \r\n      @Test\r\n      public void benchmark() throws Exception {\r\n        org.openjdk.jmh.Main.main(new String[]{ToBytesTest.class.getName()});\r\n      }\r\n    \r\n      char[] chars = new char[]{&#39;中&#39;, &#39;国&#39;};\r\n    \r\n      @Benchmark\r\n      public byte[] string() {\r\n        return new String(chars).getBytes(StandardCharsets.UTF_8);\r\n      }\r\n    \r\n      @Benchmark\r\n      public byte[] charBufferWrap() {\r\n        return StandardCharsets.UTF_8.encode(CharBuffer.wrap(chars)).array();\r\n      }\r\n    \r\n      @Benchmark\r\n      public byte[] charBufferAllocate() {\r\n        CharBuffer cb = CharBuffer.allocate(chars.length).put(chars);\r\n        cb.flip();\r\n        return StandardCharsets.UTF_8.encode(cb).array();\r\n      }\r\n    }","title":"How to run JMH from inside JUnit tests?","body":"<pre><code>@State(Scope.Benchmark)\n@Threads(1)\n@Fork(1)\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\n@Warmup(iterations = 5, time = 1)\n@Measurement(iterations = 5, time = 1)\n@BenchmarkMode(Mode.All)\npublic class ToBytesTest {\n\n  public static void main(String[] args) {\n    ToBytesTest test = new ToBytesTest();\n    System.out.println(test.string()[0] == test.charBufferWrap()[0] &amp;&amp; test.charBufferWrap()[0] == test.charBufferAllocate()[0]);\n  }\n\n  @Test\n  public void benchmark() throws Exception {\n    org.openjdk.jmh.Main.main(new String[]{ToBytesTest.class.getName()});\n  }\n\n  char[] chars = new char[]{'中', '国'};\n\n  @Benchmark\n  public byte[] string() {\n    return new String(chars).getBytes(StandardCharsets.UTF_8);\n  }\n\n  @Benchmark\n  public byte[] charBufferWrap() {\n    return StandardCharsets.UTF_8.encode(CharBuffer.wrap(chars)).array();\n  }\n\n  @Benchmark\n  public byte[] charBufferAllocate() {\n    CharBuffer cb = CharBuffer.allocate(chars.length).put(chars);\n    cb.flip();\n    return StandardCharsets.UTF_8.encode(cb).array();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4073057,"reputation":3037,"user_id":3441063,"display_name":"Vlad Bochenin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677763156,"creation_date":1677709319,"answer_id":75609598,"question_id":30485856,"body_markdown":"You may write your own JUnit Runner to run benchmark.\r\nIt allows you to run and debug benchmarks from Eclipse IDE\r\n\r\n1. write class extending org.junit.runner.Runner class\r\n\r\n       public class BenchmarkRunner extends Runner {\r\n         //...\r\n       }\r\n\r\n2. implement constructor and few methods\r\n   \r\n\r\n       public class BenchmarkRunner extends Runner {\r\n          public BenchmarkRunner(Class&lt;?&gt; benchmarkClass) {\r\n          }\r\n    \r\n          public Description getDescription() {\r\n           //...\r\n          }  \r\n    \r\n          public void run(RunNotifier notifier) {\r\n           //...\r\n          }\r\n       }\r\n\r\n3. add the runner to your test class\r\n\r\n       @RunWith(BenchmarkRunner.class)  \r\n       public class CustomCollectionBenchmark {\r\n           //...\r\n       }  \r\n\r\nI&#39;ve described it detailed in my blog post:\r\nhttps://vbochenin.github.io/running-jmh-from-eclipse\r\n\r\n","title":"How to run JMH from inside JUnit tests?","body":"<p>You may write your own JUnit Runner to run benchmark.\nIt allows you to run and debug benchmarks from Eclipse IDE</p>\n<ol>\n<li><p>write class extending org.junit.runner.Runner class</p>\n<pre><code>public class BenchmarkRunner extends Runner {\n  //...\n}\n</code></pre>\n</li>\n<li><p>implement constructor and few methods</p>\n<pre><code>public class BenchmarkRunner extends Runner {\n   public BenchmarkRunner(Class&lt;?&gt; benchmarkClass) {\n   }\n\n   public Description getDescription() {\n    //...\n   }  \n\n   public void run(RunNotifier notifier) {\n    //...\n   }\n}\n</code></pre>\n</li>\n<li><p>add the runner to your test class</p>\n<pre><code>@RunWith(BenchmarkRunner.class)  \npublic class CustomCollectionBenchmark {\n    //...\n}  \n</code></pre>\n</li>\n</ol>\n<p>I've described it detailed in my blog post:\n<a href=\"https://vbochenin.github.io/running-jmh-from-eclipse\" rel=\"nofollow noreferrer\">https://vbochenin.github.io/running-jmh-from-eclipse</a></p>\n"}],"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20968,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":30486197,"answer_count":4,"score":43,"last_activity_date":1677763156,"creation_date":1432737910,"question_id":30485856,"body_markdown":"How can I run JMH benchmarks inside my existing project using JUnit tests? The official documentation recommends making a separate project, using Maven shade plugin, and launching JMH inside the `main` method. Is this necessary and why is it recommended?","title":"How to run JMH from inside JUnit tests?","body":"<p>How can I run JMH benchmarks inside my existing project using JUnit tests? The official documentation recommends making a separate project, using Maven shade plugin, and launching JMH inside the <code>main</code> method. Is this necessary and why is it recommended?</p>\n"},{"tags":["java","maven","chromium","chromium-embedded"],"answers":[{"tags":[],"owner":{"account_id":9952528,"reputation":1034,"user_id":7364588,"display_name":"user7364588"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1562587464,"creation_date":1562587464,"answer_id":56934545,"question_id":56932419,"body_markdown":"[Answer is at following link][1].\r\n\r\nCall `CefApp.startup();` **before** any call of `CefApp.getInstance()` to let it load libjcef.so.\r\n\r\n\r\n  [1]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/360004138000/comments/360000563279","title":"UnsatisfiedLinkError with JCEF","body":"<p><a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360004138000/comments/360000563279\" rel=\"nofollow noreferrer\">Answer is at following link</a>.</p>\n\n<p>Call <code>CefApp.startup();</code> <strong>before</strong> any call of <code>CefApp.getInstance()</code> to let it load libjcef.so.</p>\n"},{"tags":[],"owner":{"account_id":20040685,"reputation":16,"user_id":14691460,"display_name":"&#214;zg&#252;r Liman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677763127,"creation_date":1677496082,"answer_id":75579683,"question_id":56932419,"body_markdown":"I faced a similar problem. The problem is the Chrome version.\r\nadd the jcef version according to your chrome version\r\n\r\n - implementation `me.friwi:jcefmaven:110.0.25` \r\n - implementation `me.friwi:jcefmaven:109.1.11`","title":"UnsatisfiedLinkError with JCEF","body":"<p>I faced a similar problem. The problem is the Chrome version.\nadd the jcef version according to your chrome version</p>\n<ul>\n<li>implementation <code>me.friwi:jcefmaven:110.0.25</code></li>\n<li>implementation <code>me.friwi:jcefmaven:109.1.11</code></li>\n</ul>\n"}],"owner":{"account_id":9952528,"reputation":1034,"user_id":7364588,"display_name":"user7364588"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1263,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1677763127,"creation_date":1562579658,"question_id":56932419,"body_markdown":"Context :\r\n---\r\n- **Linux 64 debian**\r\n- Java **jdk 1.8.0_181**\r\n- **CEF_VERSION 75.0.13+g2c92fcd+chromium-75.0.3770.100** into `CMakeLists.txt`\r\n- Commit **467f8fc** 2019-07-02\r\n\r\n\r\nHere is the project tree :\r\n```\r\n.\r\n├── pom.yml\r\n├── java-cef/. &lt;------- the cloned java-cef repository\r\n├── lib/ &lt;------------- where builded jar cef and dependencies are stored\r\n|   ├── jogamp/gluegen/1.0/gluegen-1.0.jar\r\n|   ├── jogamp/jogl/1.0/jogl-1.0.jar\r\n|   └── org/cef/1.0/cef-1.0.jar\r\n└── src/\r\n```\r\n\r\nI am building the **JCEF** native sources, here are the followed commands :\r\n\r\n```sh\r\n# Build the JCEF natives and jar\r\ncd java-cef\r\nmkdir jcef_build &amp;&amp; cd jcef_build\r\ncmake -G &quot;Unix Makefiles&quot; -DCMAKE_BUILD_TYPE=Release ..\r\nmake -j4\r\ncd ../tools\r\n./compile.sh linux64\r\n./make_jar.sh linux64\r\n\r\n# Install the CEF jar and it&#39;s jar dependencies into lib/ folder\r\ncd ../../\r\nmvn install:install-file -Dfile=java-cef/out/linux64/jcef.jar -DgroupId=org -DartifactId=cef -Dversion=1.0 -Dpackaging=jar -DlocalRepositoryPath=lib\r\nmvn install:install-file -Dfile=java-cef/third_party/jogamp/jar/jogl-all-natives-linux-amd64.jar -DgroupId=jogamp -DartifactId=jogl -Dversion=1.0 -Dpackaging=jar -DlocalRepositoryPath=lib\r\nmvn install:install-file -Dfile=java-cef/third_party/jogamp/jar/gluegen-rt.jar -DgroupId=jogamp -DartifactId=gluegen -Dversion=1.0 -Dpackaging=jar -DlocalRepositoryPath=lib\r\n\r\n# Link to avoid ICU internal errors of CEF\r\nln -s $PWD/native/Release/icudtl.dat $JAVA_HOME/jre/bin/icudtl.dat\r\nln -s $PWD/native/Release/natives_blob.bin $JAVA_HOME/jre/bin/natives_blob.bin\r\nln -s $PWD/native/Release/snapshot_blob.bin $JAVA_HOME/jre/bin/snapshot_blob.bin\r\n\r\nmvn install\r\n```\r\n\r\nHere is the `pom.xml` :\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;my.app&lt;/groupId&gt;\r\n    &lt;artifactId&gt;app&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n    &lt;!-- JCEF dependencies --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cef&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jogamp&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gluegen&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jogamp&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jogl&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;        \r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;descriptorRefs&gt;\r\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                    &lt;/descriptorRefs&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            \r\n            &lt;!-- All about bash/bat creation --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;appassembler-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;programs&gt;\r\n                        &lt;!-- generic --&gt;\r\n                        &lt;program&gt;\r\n                            &lt;mainClass&gt;my.app.boot.Boot&lt;/mainClass&gt;\r\n                            &lt;id&gt;player&lt;/id&gt;\r\n                            &lt;jvmSettings&gt;\r\n                                &lt;extraArguments&gt;\r\n                                    &lt;extraArgument&gt;-Djava.library.path=${project.basedir}/java-cef/jcef_build/native/Release:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib&lt;/extraArgument&gt;\r\n                                &lt;/extraArguments&gt;\r\n                            &lt;/jvmSettings&gt;\r\n                        &lt;/program&gt;\r\n                    &lt;/programs&gt;\r\n                    &lt;assembleDirectory&gt;${project.basedir}&lt;/assembleDirectory&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;assemble&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt; \r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nIssue :\r\n---\r\n\r\nWhen src code runs `CefApp.getInstance(args, settings).getVersion();`, it returns `null` and throws the following error :\r\n```\r\nCaused by: java.lang.UnsatisfiedLinkError: org.cef.CefApp.N_PreInitialize()Z\r\n\tat org.cef.CefApp.N_PreInitialize(Native Method)\r\n\tat org.cef.CefApp.access$000(CefApp.java:24)\r\n\tat org.cef.CefApp$1.run(CefApp.java:162)\r\n\tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:301)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t...\r\n\r\njava.lang.UnsatisfiedLinkError: org.cef.CefApp.N_GetVersion()Lorg/cef/CefApp$CefVersion;\r\n\tat org.cef.CefApp.N_GetVersion(Native Method)\r\n\tat org.cef.CefApp.getVersion(CefApp.java:235)\r\n\tat my.app.boot.Browser.&lt;init&gt;(Browser.java:42)\r\n\tat my.app.boot.Boot.main(Boot.java:52)\r\n```\r\n\r\nAny idea ?","title":"UnsatisfiedLinkError with JCEF","body":"<h2>Context :</h2>\n\n<ul>\n<li><strong>Linux 64 debian</strong></li>\n<li>Java <strong>jdk 1.8.0_181</strong></li>\n<li><strong>CEF_VERSION 75.0.13+g2c92fcd+chromium-75.0.3770.100</strong> into <code>CMakeLists.txt</code></li>\n<li>Commit <strong>467f8fc</strong> 2019-07-02</li>\n</ul>\n\n<p>Here is the project tree :</p>\n\n<pre><code>.\n├── pom.yml\n├── java-cef/. &lt;------- the cloned java-cef repository\n├── lib/ &lt;------------- where builded jar cef and dependencies are stored\n|   ├── jogamp/gluegen/1.0/gluegen-1.0.jar\n|   ├── jogamp/jogl/1.0/jogl-1.0.jar\n|   └── org/cef/1.0/cef-1.0.jar\n└── src/\n</code></pre>\n\n<p>I am building the <strong>JCEF</strong> native sources, here are the followed commands :</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Build the JCEF natives and jar\ncd java-cef\nmkdir jcef_build &amp;&amp; cd jcef_build\ncmake -G \"Unix Makefiles\" -DCMAKE_BUILD_TYPE=Release ..\nmake -j4\ncd ../tools\n./compile.sh linux64\n./make_jar.sh linux64\n\n# Install the CEF jar and it's jar dependencies into lib/ folder\ncd ../../\nmvn install:install-file -Dfile=java-cef/out/linux64/jcef.jar -DgroupId=org -DartifactId=cef -Dversion=1.0 -Dpackaging=jar -DlocalRepositoryPath=lib\nmvn install:install-file -Dfile=java-cef/third_party/jogamp/jar/jogl-all-natives-linux-amd64.jar -DgroupId=jogamp -DartifactId=jogl -Dversion=1.0 -Dpackaging=jar -DlocalRepositoryPath=lib\nmvn install:install-file -Dfile=java-cef/third_party/jogamp/jar/gluegen-rt.jar -DgroupId=jogamp -DartifactId=gluegen -Dversion=1.0 -Dpackaging=jar -DlocalRepositoryPath=lib\n\n# Link to avoid ICU internal errors of CEF\nln -s $PWD/native/Release/icudtl.dat $JAVA_HOME/jre/bin/icudtl.dat\nln -s $PWD/native/Release/natives_blob.bin $JAVA_HOME/jre/bin/natives_blob.bin\nln -s $PWD/native/Release/snapshot_blob.bin $JAVA_HOME/jre/bin/snapshot_blob.bin\n\nmvn install\n</code></pre>\n\n<p>Here is the <code>pom.xml</code> :</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;my.app&lt;/groupId&gt;\n    &lt;artifactId&gt;app&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;dependencies&gt;\n    &lt;!-- JCEF dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org&lt;/groupId&gt;\n            &lt;artifactId&gt;cef&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jogamp&lt;/groupId&gt;\n            &lt;artifactId&gt;gluegen&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jogamp&lt;/groupId&gt;\n            &lt;artifactId&gt;jogl&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;        \n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;!-- All about bash/bat creation --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;appassembler-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.0.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;programs&gt;\n                        &lt;!-- generic --&gt;\n                        &lt;program&gt;\n                            &lt;mainClass&gt;my.app.boot.Boot&lt;/mainClass&gt;\n                            &lt;id&gt;player&lt;/id&gt;\n                            &lt;jvmSettings&gt;\n                                &lt;extraArguments&gt;\n                                    &lt;extraArgument&gt;-Djava.library.path=${project.basedir}/java-cef/jcef_build/native/Release:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib&lt;/extraArgument&gt;\n                                &lt;/extraArguments&gt;\n                            &lt;/jvmSettings&gt;\n                        &lt;/program&gt;\n                    &lt;/programs&gt;\n                    &lt;assembleDirectory&gt;${project.basedir}&lt;/assembleDirectory&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;assemble&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt; \n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<h2>Issue :</h2>\n\n<p>When src code runs <code>CefApp.getInstance(args, settings).getVersion();</code>, it returns <code>null</code> and throws the following error :</p>\n\n<pre><code>Caused by: java.lang.UnsatisfiedLinkError: org.cef.CefApp.N_PreInitialize()Z\n    at org.cef.CefApp.N_PreInitialize(Native Method)\n    at org.cef.CefApp.access$000(CefApp.java:24)\n    at org.cef.CefApp$1.run(CefApp.java:162)\n    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:301)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    ...\n\njava.lang.UnsatisfiedLinkError: org.cef.CefApp.N_GetVersion()Lorg/cef/CefApp$CefVersion;\n    at org.cef.CefApp.N_GetVersion(Native Method)\n    at org.cef.CefApp.getVersion(CefApp.java:235)\n    at my.app.boot.Browser.&lt;init&gt;(Browser.java:42)\n    at my.app.boot.Boot.main(Boot.java:52)\n</code></pre>\n\n<p>Any idea ?</p>\n"},{"tags":["java","inputstream","java.util.scanner"],"answers":[{"comments":[{"owner":{"account_id":1200792,"reputation":11279,"user_id":1171509,"accept_rate":84,"display_name":"jacobq"},"score":0,"creation_date":1442720578,"post_id":4232614,"comment_id":53196416,"body_markdown":"broken link looks like it should be --&gt; https://www.securecoding.cert.org/confluence/display/java/FIO06-J.+Do+not+create+multiple+buffered+wrappers+on+a+single+byte+or+character+stream","body":"broken link looks like it should be --&gt; <a href=\"https://www.securecoding.cert.org/confluence/display/java/FIO06-J.+Do+not+create+multiple+buffered+wrappers+on+a+single+byte+or+character+stream\" rel=\"nofollow noreferrer\">securecoding.cert.org/confluence/display/java/&hellip;</a>"}],"tags":[],"owner":{"display_name":"user166390"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1677762890,"creation_date":1290254656,"answer_id":4232614,"question_id":4232588,"body_markdown":"&gt; What am I doing wrong?\r\n\r\nUsing multiple scanners on the same stream is the underlying problem. Scanners can (and will) consume the stream - this may (will) lead to unexpected side-effects. Best not to do it.\r\n\r\nIf the input is closed, then the input (but Strings have no `close` method) is closed for everyone - and that&#39;s not much fun for anyone.\r\n\r\n**Edit:**  \r\n&quot;Details&quot; on why multiple scanners are bad:  \r\n[Do not create multiple buffered wrappers on a single byte or character stream](https://wiki.sei.cmu.edu/confluence/display/java/FIO06-J.+Do+not+create+multiple+buffered+wrappers+on+a+single+byte+or+character+stream)\r\n\r\n&gt; ...any buffered wrapper is unsafe; this condition is also exploitable if a Scanner is used instead...","title":"How to use multiple Scanner objects on System.in in Java?","body":"<blockquote>\n<p>What am I doing wrong?</p>\n</blockquote>\n<p>Using multiple scanners on the same stream is the underlying problem. Scanners can (and will) consume the stream - this may (will) lead to unexpected side-effects. Best not to do it.</p>\n<p>If the input is closed, then the input (but Strings have no <code>close</code> method) is closed for everyone - and that's not much fun for anyone.</p>\n<p><strong>Edit:</strong><br />\n&quot;Details&quot; on why multiple scanners are bad:<br />\n<a href=\"https://wiki.sei.cmu.edu/confluence/display/java/FIO06-J.+Do+not+create+multiple+buffered+wrappers+on+a+single+byte+or+character+stream\" rel=\"nofollow noreferrer\">Do not create multiple buffered wrappers on a single byte or character stream</a></p>\n<blockquote>\n<p>...any buffered wrapper is unsafe; this condition is also exploitable if a Scanner is used instead...</p>\n</blockquote>\n"}],"owner":{"account_id":44762,"reputation":331269,"user_id":131527,"accept_rate":83,"display_name":"ghostdog74"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18018,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":4232614,"answer_count":1,"score":9,"last_activity_date":1677762890,"creation_date":1290254315,"question_id":4232588,"body_markdown":"What&#39;s the correct way to use multiple Scanner objects in my program?  \r\n\r\nFor example, I use the scanner to read a file, then depending on what is found in the file, I prompt for user input and use the scanner again.  \r\n\r\nHere is an extraction of my code:\r\n\r\n    Scanner f = new Scanner (System.in); // Get the file name\r\n    String fileName = f.next();\r\n\r\n    Scanner input = new Scanner(new File(fileName));\r\n    while (input.hasNext()) {\r\n       String currentLine = input.nextLine();\r\n       if (some pattern found) {\r\n           Scanner getUserInput = new Scanner (System.in);\r\n           String userInput = getUserInput.next();\r\n           ...\r\n       }\r\n    }\r\n    ...\r\n\r\nIt doesn&#39;t seem to work. What am I doing wrong?  \r\n\r\nDo I need to use `userInput.close()`?  \r\n\r\nWhat I don&#39;t understand is, the first `System.in` is just getting the file name. After that, why does it interfere with the second `System.in`?  \r\nAs for the `input` object, it&#39;s reading from a file and not from `System.in`. \r\n\r\n","title":"How to use multiple Scanner objects on System.in in Java?","body":"<p>What's the correct way to use multiple Scanner objects in my program?</p>\n<p>For example, I use the scanner to read a file, then depending on what is found in the file, I prompt for user input and use the scanner again.</p>\n<p>Here is an extraction of my code:</p>\n<pre><code>Scanner f = new Scanner (System.in); // Get the file name\nString fileName = f.next();\n\nScanner input = new Scanner(new File(fileName));\nwhile (input.hasNext()) {\n   String currentLine = input.nextLine();\n   if (some pattern found) {\n       Scanner getUserInput = new Scanner (System.in);\n       String userInput = getUserInput.next();\n       ...\n   }\n}\n...\n</code></pre>\n<p>It doesn't seem to work. What am I doing wrong?</p>\n<p>Do I need to use <code>userInput.close()</code>?</p>\n<p>What I don't understand is, the first <code>System.in</code> is just getting the file name. After that, why does it interfere with the second <code>System.in</code>?<br />\nAs for the <code>input</code> object, it's reading from a file and not from <code>System.in</code>.</p>\n"},{"tags":["java","queue"],"answers":[{"comments":[{"owner":{"account_id":18234,"reputation":47478,"user_id":41613,"accept_rate":68,"display_name":"ʞɔıu"},"score":0,"creation_date":1299614208,"post_id":5237375,"comment_id":5895057,"body_markdown":"good but not optimal as the normal BlockingQueue implementation of contains() requires a traversal of entire queue","body":"good but not optimal as the normal BlockingQueue implementation of contains() requires a traversal of entire queue"},{"owner":{"account_id":111602,"reputation":8153,"user_id":294738,"accept_rate":67,"display_name":"M. Jessup"},"score":0,"creation_date":1299618207,"post_id":5237375,"comment_id":5896105,"body_markdown":"I would say &quot;optimal&quot; is subjective. Unless you roll your own the other simple option is the one suggested by spike and that is a classic space vs. time tradeoff. So while either could be argued as the best solution depending on the use I give my up vote to this because of its simplicity.","body":"I would say &quot;optimal&quot; is subjective. Unless you roll your own the other simple option is the one suggested by spike and that is a classic space vs. time tradeoff. So while either could be argued as the best solution depending on the use I give my up vote to this because of its simplicity."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":11,"creation_date":1353513457,"post_id":5237375,"comment_id":18470673,"body_markdown":"if &quot;optimal&quot; includes correct, then this implementation would fail as it is a race condition.","body":"if &quot;optimal&quot; includes correct, then this implementation would fail as it is a race condition."}],"tags":[],"owner":{"account_id":281244,"reputation":38779,"user_id":577423,"display_name":"Howard"},"comment_count":3,"down_vote_count":7,"up_vote_count":7,"is_accepted":false,"score":0,"last_activity_date":1299613176,"creation_date":1299613176,"answer_id":5237375,"question_id":5237283,"body_markdown":"You can override add and put methods of any implementation of `BlockingQueue&lt;T&gt;` to check first if the element is already within the queue, e.g.\r\n\r\n\t@Override\r\n\tpublic boolean add(T elem) {\r\n\t\tif (contains(elem))\r\n\t\t\treturn true;\r\n\t\treturn super.add(elem);\r\n\t}\r\n","title":"Java blocking queue containing only unique elements","body":"<p>You can override add and put methods of any implementation of <code>BlockingQueue&lt;T&gt;</code> to check first if the element is already within the queue, e.g.</p>\n\n<pre><code>@Override\npublic boolean add(T elem) {\n    if (contains(elem))\n        return true;\n    return super.add(elem);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":195556,"reputation":6174,"user_id":438512,"display_name":"Spike Gronim"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1299613281,"creation_date":1299613281,"answer_id":5237403,"question_id":5237283,"body_markdown":"You can create a new class that composes a BlockingQueue, a Set, and a lock. When you put() you test against the set while holding a lock that prevents get() from running. When you get() you remove the item from the set so that it can be put() again in the future.","title":"Java blocking queue containing only unique elements","body":"<p>You can create a new class that composes a BlockingQueue, a Set, and a lock. When you put() you test against the set while holding a lock that prevents get() from running. When you get() you remove the item from the set so that it can be put() again in the future.</p>\n"},{"comments":[{"owner":{"account_id":386004,"reputation":2061,"user_id":743522,"accept_rate":38,"display_name":"Jonathan Leung"},"score":0,"creation_date":1365773028,"post_id":5237416,"comment_id":22766975,"body_markdown":"The implementation of `contains` iterates over the list, this would be really slow...","body":"The implementation of <code>contains</code> iterates over the list, this would be really slow..."}],"tags":[],"owner":{"account_id":217190,"reputation":1365,"user_id":472872,"accept_rate":82,"display_name":"brayne"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1344916097,"creation_date":1299613378,"answer_id":5237416,"question_id":5237283,"body_markdown":"    class BlockingSet extends ArrayBlockingQueue&lt;E&gt; {\r\n       /*Retain all other methods except put*/\r\n       public void put(E o) throws InterruptedException {\r\n          if (!this.contains(o)){\r\n             super.put(o);\r\n          }\r\n       }\r\n    }","title":"Java blocking queue containing only unique elements","body":"<pre><code>class BlockingSet extends ArrayBlockingQueue&lt;E&gt; {\n   /*Retain all other methods except put*/\n   public void put(E o) throws InterruptedException {\n      if (!this.contains(o)){\n         super.put(o);\n      }\n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":476430,"reputation":11691,"user_id":887343,"accept_rate":77,"display_name":"forhas"},"score":0,"creation_date":1451983699,"post_id":29389075,"comment_id":56960105,"body_markdown":"@horec - Is that feeling coming from looking at the code or from actually trying it? Looking at t he code I had the same concern but have&#39;t really give it a shot yet","body":"@horec - Is that feeling coming from looking at the code or from actually trying it? Looking at t he code I had the same concern but have&#39;t really give it a shot yet"},{"owner":{"account_id":1557852,"reputation":4589,"user_id":1448419,"accept_rate":64,"display_name":"rcomblen"},"score":0,"creation_date":1496138159,"post_id":29389075,"comment_id":75526063,"body_markdown":"Your link is dead :-(","body":"Your link is dead :-("},{"owner":{"account_id":476430,"reputation":11691,"user_id":887343,"accept_rate":77,"display_name":"forhas"},"score":1,"creation_date":1496751634,"post_id":29389075,"comment_id":75779276,"body_markdown":"@rcomblen - fixed.","body":"@rcomblen - fixed."},{"owner":{"account_id":1260896,"reputation":1488,"user_id":1219213,"accept_rate":60,"display_name":"TheRealChx101"},"score":1,"creation_date":1632328431,"post_id":29389075,"comment_id":122464573,"body_markdown":"@forhas Your link died again.","body":"@forhas Your link died again."}],"tags":[],"owner":{"account_id":476430,"reputation":11691,"user_id":887343,"accept_rate":77,"display_name":"forhas"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1496751608,"creation_date":1427886075,"answer_id":29389075,"question_id":5237283,"body_markdown":"A blocking queue implementation backed by a linked hash set for predictable iteration order and constant time addition, removal and contains operations:\r\n\r\n[There you go][1].\r\n\r\n\r\n  [1]: https://github.com/abayer/incubator-marmotta/blob/master/platform/marmotta-core/src/main/java/org/apache/marmotta/platform/core/util/LinkedHashSetBlockingQueue.java","title":"Java blocking queue containing only unique elements","body":"<p>A blocking queue implementation backed by a linked hash set for predictable iteration order and constant time addition, removal and contains operations:</p>\n\n<p><a href=\"https://github.com/abayer/incubator-marmotta/blob/master/platform/marmotta-core/src/main/java/org/apache/marmotta/platform/core/util/LinkedHashSetBlockingQueue.java\" rel=\"nofollow noreferrer\">There you go</a>.</p>\n"},{"comments":[{"owner":{"account_id":1687748,"reputation":2947,"user_id":1550682,"accept_rate":73,"display_name":"Alan Evangelista"},"score":0,"creation_date":1636508068,"post_id":34265218,"comment_id":123574434,"body_markdown":"What if we cared about removing the element from the queue and from the set atomically ?","body":"What if we cared about removing the element from the queue and from the set atomically ?"}],"tags":[],"owner":{"account_id":2644515,"reputation":394,"user_id":2287514,"display_name":"horec"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1450090488,"creation_date":1450090488,"answer_id":34265218,"question_id":5237283,"body_markdown":"I wrote this class to solve a similar problem:\r\n\r\n    /**\r\n     * Linked blocking queue with {@link #add(Object)} method, which adds only element, that is not already in the queue.\r\n     */\r\n    public class SetBlockingQueue&lt;T&gt; extends LinkedBlockingQueue&lt;T&gt; {\r\n\r\n        private Set&lt;T&gt; set = Collections.newSetFromMap(new ConcurrentHashMap&lt;&gt;());\r\n\r\n        /**\r\n         * Add only element, that is not already enqueued.\r\n         * The method is synchronized, so that the duplicate elements can&#39;t get in during race condition.\r\n         * @param t object to put in\r\n         * @return true, if the queue was changed, false otherwise\r\n         */\r\n        @Override\r\n        public synchronized boolean add(T t) {\r\n            if (set.contains(t)) {\r\n                return false;\r\n            } else {\r\n                set.add(t);\r\n                return super.add(t);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Takes the element from the queue.\r\n         * Note that no synchronization with {@link #add(Object)} is here, as we don&#39;t care about the element staying in the set longer needed.\r\n         * @return taken element\r\n         * @throws InterruptedException\r\n         */\r\n        @Override\r\n        public T take() throws InterruptedException {\r\n            T t = super.take();\r\n            set.remove(t);\r\n            return t;\r\n        }\r\n    }\r\n","title":"Java blocking queue containing only unique elements","body":"<p>I wrote this class to solve a similar problem:</p>\n\n<pre><code>/**\n * Linked blocking queue with {@link #add(Object)} method, which adds only element, that is not already in the queue.\n */\npublic class SetBlockingQueue&lt;T&gt; extends LinkedBlockingQueue&lt;T&gt; {\n\n    private Set&lt;T&gt; set = Collections.newSetFromMap(new ConcurrentHashMap&lt;&gt;());\n\n    /**\n     * Add only element, that is not already enqueued.\n     * The method is synchronized, so that the duplicate elements can't get in during race condition.\n     * @param t object to put in\n     * @return true, if the queue was changed, false otherwise\n     */\n    @Override\n    public synchronized boolean add(T t) {\n        if (set.contains(t)) {\n            return false;\n        } else {\n            set.add(t);\n            return super.add(t);\n        }\n    }\n\n    /**\n     * Takes the element from the queue.\n     * Note that no synchronization with {@link #add(Object)} is here, as we don't care about the element staying in the set longer needed.\n     * @return taken element\n     * @throws InterruptedException\n     */\n    @Override\n    public T take() throws InterruptedException {\n        T t = super.take();\n        set.remove(t);\n        return t;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11367052,"reputation":21,"user_id":8333677,"display_name":"Tulio"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677762558,"creation_date":1677762558,"answer_id":75615852,"question_id":5237283,"body_markdown":"I&#39;m working in this exact same issue. The solution that was proposed has some problems, like not keeping the set and the queue with the same elements. \r\n\r\nI&#39;m not 100% sure if it&#39;s necessary, but I&#39;m guessing it is. Also, it doesn&#39;t contemplate other methods, ie offer and put. \r\n\r\nIf we use &#39;BlockingQueue&#39; as the backing queue for keeping things in sync, none of the relevant methods work. The lock of the inner queue conflicts with the  monitor lock and the interactions between blocking methods\r\n\r\nAt the end I have to implement something like that (full implementation in [UniqueBlockingQueue](https://gist.github.com/tulioballari/d85094e6b951ee2258e3ae67c774b36c) and test in [UniqueBlockingQueueTest]( https://gist.github.com/tulioballari/9d8806360147dc0241708cd460eaa615) ) based in the blocking queues already present in the jdk.\r\n\r\n\r\n    public class UniqueBlockingQueue&lt;E&gt; extends AbstractQueue&lt;E&gt; implements BlockingQueue&lt;E&gt; {\r\n\r\n      private final ReentrantLock lock = new ReentrantLock();\r\n      private final Condition notEmpty = lock.newCondition();\r\n      private final Condition notFull = lock.newCondition();\r\n\r\n      private HashSet&lt;E&gt; set = new HashSet&lt;&gt;();\r\n      private LinkedList&lt;E&gt; queue = new LinkedList&lt;&gt;();\r\n\r\n      private final int capacity;\r\n      private final AtomicInteger count = new AtomicInteger();\r\n    \r\n      @Override\r\n      public void put(E e) throws InterruptedException {\r\n        Objects.requireNonNull(e);\r\n\r\n        final var lock = this.lock;\r\n        final var count = this.count;\r\n        lock.lockInterruptibly();\r\n        try {\r\n            while (count.get() == capacity || set.contains(e)) {\r\n                notFull.await();\r\n            }\r\n            queue.add(e);\r\n            set.add(e);\r\n\r\n            final var c = count.getAndIncrement();\r\n            if (c + 1 &lt; capacity) {\r\n                notFull.signal();\r\n            }\r\n            if (c == 0) {\r\n                notEmpty.signal();\r\n            }\r\n        } finally {\r\n            lock.unlock();\r\n        }\r\n      }\r\n\r\n      @Override\r\n      public E take() throws InterruptedException {\r\n        final var lock = this.lock;\r\n        final var count = this.count;\r\n        lock.lockInterruptibly();\r\n        try {\r\n            while (count.get() == 0) {\r\n                notEmpty.await();\r\n            }\r\n            var e = queue.poll();\r\n            set.remove(e);\r\n\r\n            final var c = count.getAndDecrement();\r\n            if (c &gt; 1) {\r\n                notEmpty.signal();\r\n            }\r\n            if (c == capacity) {\r\n                notFull.signal();\r\n            }\r\n            return e;\r\n       } finally {\r\n           lock.unlock();\r\n       }\r\n      }\r\n    }","title":"Java blocking queue containing only unique elements","body":"<p>I'm working in this exact same issue. The solution that was proposed has some problems, like not keeping the set and the queue with the same elements.</p>\n<p>I'm not 100% sure if it's necessary, but I'm guessing it is. Also, it doesn't contemplate other methods, ie offer and put.</p>\n<p>If we use 'BlockingQueue' as the backing queue for keeping things in sync, none of the relevant methods work. The lock of the inner queue conflicts with the  monitor lock and the interactions between blocking methods</p>\n<p>At the end I have to implement something like that (full implementation in <a href=\"https://gist.github.com/tulioballari/d85094e6b951ee2258e3ae67c774b36c\" rel=\"nofollow noreferrer\">UniqueBlockingQueue</a> and test in <a href=\"https://gist.github.com/tulioballari/9d8806360147dc0241708cd460eaa615\" rel=\"nofollow noreferrer\">UniqueBlockingQueueTest</a> ) based in the blocking queues already present in the jdk.</p>\n<pre><code>public class UniqueBlockingQueue&lt;E&gt; extends AbstractQueue&lt;E&gt; implements BlockingQueue&lt;E&gt; {\n\n  private final ReentrantLock lock = new ReentrantLock();\n  private final Condition notEmpty = lock.newCondition();\n  private final Condition notFull = lock.newCondition();\n\n  private HashSet&lt;E&gt; set = new HashSet&lt;&gt;();\n  private LinkedList&lt;E&gt; queue = new LinkedList&lt;&gt;();\n\n  private final int capacity;\n  private final AtomicInteger count = new AtomicInteger();\n\n  @Override\n  public void put(E e) throws InterruptedException {\n    Objects.requireNonNull(e);\n\n    final var lock = this.lock;\n    final var count = this.count;\n    lock.lockInterruptibly();\n    try {\n        while (count.get() == capacity || set.contains(e)) {\n            notFull.await();\n        }\n        queue.add(e);\n        set.add(e);\n\n        final var c = count.getAndIncrement();\n        if (c + 1 &lt; capacity) {\n            notFull.signal();\n        }\n        if (c == 0) {\n            notEmpty.signal();\n        }\n    } finally {\n        lock.unlock();\n    }\n  }\n\n  @Override\n  public E take() throws InterruptedException {\n    final var lock = this.lock;\n    final var count = this.count;\n    lock.lockInterruptibly();\n    try {\n        while (count.get() == 0) {\n            notEmpty.await();\n        }\n        var e = queue.poll();\n        set.remove(e);\n\n        final var c = count.getAndDecrement();\n        if (c &gt; 1) {\n            notEmpty.signal();\n        }\n        if (c == capacity) {\n            notFull.signal();\n        }\n        return e;\n   } finally {\n       lock.unlock();\n   }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":18234,"reputation":47478,"user_id":41613,"accept_rate":68,"display_name":"ʞɔıu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14472,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":6,"score":15,"last_activity_date":1677762558,"creation_date":1299612540,"question_id":5237283,"body_markdown":"sort of like a &quot;blocking set&quot;. How can I implement a blocking queue where adding a member that is already in the set is ignored?","title":"Java blocking queue containing only unique elements","body":"<p>sort of like a \"blocking set\". How can I implement a blocking queue where adding a member that is already in the set is ignored?</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":19103228,"reputation":75,"user_id":13956589,"display_name":"HamsterofDeath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677762536,"creation_date":1677760858,"question_id":75615553,"body_markdown":"i have ~50 mvc tests that were green with spring boot 2.7.7 but became red with 3.0.3\r\n\r\neverything was and is still allowed:\r\n```\r\nrequestMatchers(applicationProperties.getBasePath() + &quot;internal/api/**&quot;).permitAll()\r\n```\r\nthe simplest test i have is this:\r\n\r\n```\r\nmockMvc.perform(MockMvcRequestBuilders.get(BASE_PATH))\r\n                .andExpect(status().isOk())\r\n```\r\nwhat i found out is that this bean\r\n```\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http, JwtIssuerAuthenticationManagerResolver authenticationManagerResolver) throws Exception {\r\n```\r\n\r\nis not created in 3.0. but the code is executed in 2.7.7\r\n\r\nany hints? \r\n","title":"after upgrading to spring boot 3, all my mockMvc tests return 403","body":"<p>i have ~50 mvc tests that were green with spring boot 2.7.7 but became red with 3.0.3</p>\n<p>everything was and is still allowed:</p>\n<pre><code>requestMatchers(applicationProperties.getBasePath() + &quot;internal/api/**&quot;).permitAll()\n</code></pre>\n<p>the simplest test i have is this:</p>\n<pre><code>mockMvc.perform(MockMvcRequestBuilders.get(BASE_PATH))\n                .andExpect(status().isOk())\n</code></pre>\n<p>what i found out is that this bean</p>\n<pre><code>    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http, JwtIssuerAuthenticationManagerResolver authenticationManagerResolver) throws Exception {\n</code></pre>\n<p>is not created in 3.0. but the code is executed in 2.7.7</p>\n<p>any hints?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":23370524,"reputation":27,"user_id":17441457,"display_name":"Adejumobi Daniel"},"score":1,"creation_date":1677755146,"post_id":75614428,"comment_id":133402130,"body_markdown":"is this okay...","body":"is this okay..."},{"owner":{"account_id":9213036,"reputation":754,"user_id":6845412,"display_name":"Utkarsh Dubey"},"score":0,"creation_date":1677755420,"post_id":75614428,"comment_id":133402206,"body_markdown":"You are calling your function twice, `calResult` and there is no if condition.","body":"You are calling your function twice, <code>calResult</code> and there is no if condition."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1677755438,"post_id":75614428,"comment_id":133402212,"body_markdown":"And note: your code is really hard to read ... why? Because of the inconsistent indentation. Be really diligent about this things: indent in on opening {, and go back one level after the closing }. Code is written so that HUMANs can read it. Also note: when asking questions here, focus on just bringing the MINIMUM of code here. The only thing that you care right here: that loop, and input/output. That class around it, with all the getters/setters ... doesn&#39;t contribute to your problem.","body":"And note: your code is really hard to read ... why? Because of the inconsistent indentation. Be really diligent about this things: indent in on opening {, and go back one level after the closing }. Code is written so that HUMANs can read it. Also note: when asking questions here, focus on just bringing the MINIMUM of code here. The only thing that you care right here: that loop, and input/output. That class around it, with all the getters/setters ... doesn&#39;t contribute to your problem."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1677755562,"post_id":75614428,"comment_id":133402256,"body_markdown":"so, your question is: why does it print the &quot;Dear Tobi&quot; line twice? It&#39;s because you call that method twice","body":"so, your question is: why does it print the &quot;Dear Tobi&quot; line twice? It&#39;s because you call that method twice"},{"owner":{"account_id":23370524,"reputation":27,"user_id":17441457,"display_name":"Adejumobi Daniel"},"score":0,"creation_date":1677755655,"post_id":75614428,"comment_id":133402284,"body_markdown":"Now I understand where the issue lies, but I dont know what to do.","body":"Now I understand where the issue lies, but I dont know what to do."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1677756081,"post_id":75614428,"comment_id":133402407,"body_markdown":"You are (perhaps inadvertently) using recursion: you call `calResult` before you come out of the first call to `calResult`. One way to fix this is to use a while loop instead, and make `confirmDetails` return a boolean.","body":"You are (perhaps inadvertently) using recursion: you call <code>calResult</code> before you come out of the first call to <code>calResult</code>. One way to fix this is to use a while loop instead, and make <code>confirmDetails</code> return a boolean."},{"owner":{"account_id":9213036,"reputation":754,"user_id":6845412,"display_name":"Utkarsh Dubey"},"score":0,"creation_date":1677756663,"post_id":75614428,"comment_id":133402568,"body_markdown":"Call `confirmDetails` from the main function and use return type in `confirmDetails` and `calResult` then do `System.out.println` also in main function.","body":"Call <code>confirmDetails</code> from the main function and use return type in <code>confirmDetails</code> and <code>calResult</code> then do <code>System.out.println</code> also in main function."}],"answers":[{"tags":[],"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677756398,"creation_date":1677756398,"answer_id":75614801,"question_id":75614428,"body_markdown":"Here is a minimal reproducible example of your problem:\r\n\r\n    public class Input {\r\n    \r\n        static Scanner scanner = new Scanner(System.in);\r\n        public static void main(String[] args) {\r\n            provideInput();\r\n        }\r\n        static String input;\r\n    \r\n        public static void provideInput() {\r\n            System.out.println(&quot;Read name:&quot; );\r\n            input = scanner.next();\r\n            if ( input.equals(&quot;false&quot;)) {\r\n                provideInput(); // here you recursively call the same method again. That does not mean that the original execution ends.\r\n            }\r\n            System.out.println(&quot;input = &quot; + input);\r\n        }\r\n    }\r\n\r\nIf I enter &quot;false&quot;, and the second time &quot;true&quot;,it&#39;ll give me \r\n\r\n    input = true\r\n    input = true\r\n\r\nas output.\r\n\r\nIf you want only once, move the print statement to the calling method:\r\n\r\n    public class Input {\r\n    \r\n        static Scanner scanner = new Scanner(System.in);\r\n        public static void main(String[] args) {\r\n            provideInput();\r\n            System.out.println(&quot;input = &quot; + input);\r\n        }\r\n        static String input;\r\n    \r\n        public static void provideInput() {\r\n            System.out.println(&quot;Read name:&quot; );\r\n            input = scanner.next();\r\n            if ( input.equals(&quot;false&quot;)) {\r\n                provideInput();\r\n            }\r\n        }\r\n    }\r\n\r\nThis will only print after the original execution of that method is finished.\r\n\r\n","title":"Prompt user input, getting multiple values","body":"<p>Here is a minimal reproducible example of your problem:</p>\n<pre><code>public class Input {\n\n    static Scanner scanner = new Scanner(System.in);\n    public static void main(String[] args) {\n        provideInput();\n    }\n    static String input;\n\n    public static void provideInput() {\n        System.out.println(&quot;Read name:&quot; );\n        input = scanner.next();\n        if ( input.equals(&quot;false&quot;)) {\n            provideInput(); // here you recursively call the same method again. That does not mean that the original execution ends.\n        }\n        System.out.println(&quot;input = &quot; + input);\n    }\n}\n</code></pre>\n<p>If I enter &quot;false&quot;, and the second time &quot;true&quot;,it'll give me</p>\n<pre><code>input = true\ninput = true\n</code></pre>\n<p>as output.</p>\n<p>If you want only once, move the print statement to the calling method:</p>\n<pre><code>public class Input {\n\n    static Scanner scanner = new Scanner(System.in);\n    public static void main(String[] args) {\n        provideInput();\n        System.out.println(&quot;input = &quot; + input);\n    }\n    static String input;\n\n    public static void provideInput() {\n        System.out.println(&quot;Read name:&quot; );\n        input = scanner.next();\n        if ( input.equals(&quot;false&quot;)) {\n            provideInput();\n        }\n    }\n}\n</code></pre>\n<p>This will only print after the original execution of that method is finished.</p>\n"},{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677756843,"creation_date":1677756843,"answer_id":75614863,"question_id":75614428,"body_markdown":"The `confirmDetails()` method is invoking `calResult()` which results in additional output.  Everytime `calResult()` is called you are going to have a line of output.  Since `confirmDetails()` is invoked by `calResult()` and may itself call `calResult()` you are producing additional lines of output.\r\n\r\n    calResult() {\r\n      ... stuff happen ...\r\n      confirmDetails()\r\n      output()\r\n    }\r\n\r\n    confirmDetails() {\r\n      ... stuff happens ...\r\n      calResults(..)\r\n    }\r\n\r\nYou need to re-organize your code a bit.  One thing that should help is to limit the responsibility of each method. Consider writing methods for each operation and your entry point manage flow of control.  For example.\r\n\r\n    public void calResult() {\r\n      while (true) {\r\n        getUserInput();\r\n        if (confirmDetails()) {\r\n          break;\r\n        }\r\n      }\r\n      double aggregate = calculateAggregate();\r\n      emitAggregate(aggregate);\r\n    }\r\n\r\n","title":"Prompt user input, getting multiple values","body":"<p>The <code>confirmDetails()</code> method is invoking <code>calResult()</code> which results in additional output.  Everytime <code>calResult()</code> is called you are going to have a line of output.  Since <code>confirmDetails()</code> is invoked by <code>calResult()</code> and may itself call <code>calResult()</code> you are producing additional lines of output.</p>\n<pre><code>calResult() {\n  ... stuff happen ...\n  confirmDetails()\n  output()\n}\n\nconfirmDetails() {\n  ... stuff happens ...\n  calResults(..)\n}\n</code></pre>\n<p>You need to re-organize your code a bit.  One thing that should help is to limit the responsibility of each method. Consider writing methods for each operation and your entry point manage flow of control.  For example.</p>\n<pre><code>public void calResult() {\n  while (true) {\n    getUserInput();\n    if (confirmDetails()) {\n      break;\n    }\n  }\n  double aggregate = calculateAggregate();\n  emitAggregate(aggregate);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2729259,"reputation":6968,"user_id":2353403,"accept_rate":82,"display_name":"Coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677756918,"creation_date":1677756918,"answer_id":75614882,"question_id":75614428,"body_markdown":"It&#39;s executing twice because the `confirmDetails();` is called from the same `calResult()`, and after `confirmDetails();` is called, you are printing the value.   So once the first call is executed, the control flow will come back to the first call and will execute the remaining part of the code, which is printing the value again. \r\n\r\nThe suggestion is to move the confirmation call to be the main class. \r\n\r\nHere is sample I have written where the input is taken from Main class itself. But this would give you a better idea. \r\n\r\n    public class Calculate {\r\n    \r\n    \tprivate String name;\r\n    \tprivate float jamb, postUtme, aggregate;\r\n    \r\n    \tpublic Calculate(String name, float jamb, float postUtme) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.jamb = jamb;\r\n    \t\tthis.postUtme = postUtme;\r\n    \t\tthis.aggregate = (jamb / 8) + (postUtme / 2);\r\n    \t}\r\n    \r\n    \tpublic void calResult() {\r\n    \t\tSystem.out.println(&quot;Dear &quot; + name + &quot; your aggregate is &quot; + aggregate);\r\n    \t}\r\n    \r\n       //Getters &amp; Setters\r\n    }\r\n\r\nMain Class\r\n\r\n    public static void main(String[] args) {\r\n    \t\tScanner input = new Scanner(System.in);\r\n    \t\tString name = &quot;PlaceHolderValue&quot;;\r\n    \t\tint jamb = 0;\r\n    \t\tint postUtme = 0;\r\n    \t\tboolean retry = true;\r\n    \t\tdo {\r\n    \t\t\tSystem.out.println(&quot;Enter your name&quot;);\r\n    \t\t\tname = input.next();\r\n    \r\n    \t\t\tSystem.out.println(&quot;Enter Jamb score&quot;);\r\n    \t\t\tjamb = input.nextInt();\r\n    \r\n    \t\t\tSystem.out.println(&quot;Enter PostUtme score&quot;);\r\n    \t\t\tpostUtme = input.nextInt();\r\n    \r\n    \t\t\tSystem.out.println(&quot;&quot;&quot;\r\n    \t\t\t\t\tCorrect??\r\n    \t\t\t\t\t\t\\t1 to confirm\r\n    \t\t\t\t\t\t\\t2 to re-enter&quot;&quot;&quot;);\r\n    \t\t\tint confirmD = input.nextInt();\r\n    \t\t\tretry = confirmD == 2;\r\n    \t\t} while (retry);\r\n    \r\n    \t\tinput.close();\r\n    \r\n    \t\tCalculate c = new Calculate(name, jamb, postUtme);\r\n    \t\tc.calResult();\r\n    \t}","title":"Prompt user input, getting multiple values","body":"<p>It's executing twice because the <code>confirmDetails();</code> is called from the same <code>calResult()</code>, and after <code>confirmDetails();</code> is called, you are printing the value.   So once the first call is executed, the control flow will come back to the first call and will execute the remaining part of the code, which is printing the value again.</p>\n<p>The suggestion is to move the confirmation call to be the main class.</p>\n<p>Here is sample I have written where the input is taken from Main class itself. But this would give you a better idea.</p>\n<pre><code>public class Calculate {\n\n    private String name;\n    private float jamb, postUtme, aggregate;\n\n    public Calculate(String name, float jamb, float postUtme) {\n        this.name = name;\n        this.jamb = jamb;\n        this.postUtme = postUtme;\n        this.aggregate = (jamb / 8) + (postUtme / 2);\n    }\n\n    public void calResult() {\n        System.out.println(&quot;Dear &quot; + name + &quot; your aggregate is &quot; + aggregate);\n    }\n\n   //Getters &amp; Setters\n}\n</code></pre>\n<p>Main Class</p>\n<pre><code>public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        String name = &quot;PlaceHolderValue&quot;;\n        int jamb = 0;\n        int postUtme = 0;\n        boolean retry = true;\n        do {\n            System.out.println(&quot;Enter your name&quot;);\n            name = input.next();\n\n            System.out.println(&quot;Enter Jamb score&quot;);\n            jamb = input.nextInt();\n\n            System.out.println(&quot;Enter PostUtme score&quot;);\n            postUtme = input.nextInt();\n\n            System.out.println(&quot;&quot;&quot;\n                    Correct??\n                        \\t1 to confirm\n                        \\t2 to re-enter&quot;&quot;&quot;);\n            int confirmD = input.nextInt();\n            retry = confirmD == 2;\n        } while (retry);\n\n        input.close();\n\n        Calculate c = new Calculate(name, jamb, postUtme);\n        c.calResult();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677762452,"creation_date":1677762452,"answer_id":75615832,"question_id":75614428,"body_markdown":"Just another concept. The code below just uses [Scanner.nextLine()](https://www.tutorialspoint.com/java/util/scanner_nextline.htm) and validates all User inputs using the [String.matches()](https://www.tutorialspoint.com/java/java_string_matches.htm) method along with small [Regular Expressions](https://www.vogella.com/tutorials/JavaRegularExpressions/article.html). \r\n\r\nThe `confirmDetails()` method is actually re-written to return a boolean value (true for confirm and false for re-write).\r\n\r\n**Regular Expressions Used In Code:**\r\n\r\n - `&quot;-?\\\\d+&quot;` Does the Input match a string representation of a signed\r\n   or unsigned Integer value;\r\n - `&quot;[12]&quot;` Does the Input match a string representation of a unsigned\r\n   Integer value of either `1` or `2`.\r\n\r\n**The Code:**\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    String final LS = System.lineSeparator();\r\n    \r\n    public void calResult() {\r\n        String name = &quot;&quot;;\r\n        int jamb, postUtme;\r\n        double aggregate = 0.0d;\r\n                \r\n        boolean validInfo = false;\r\n        while (!validInfo) {\r\n            // Name\r\n            String aName = &quot;&quot;;\r\n            while (aName.isEmpty()) {\r\n                System.out.print(&quot;Enter your name: -&gt; &quot;);\r\n                aName = input.nextLine().trim();\r\n                // Entry Validation: Is the entry empty?  \r\n                if (aName.isEmpty()) {\r\n                    // Yes...inform User and allow for retry...\r\n                    System.out.println(&quot;Invalid Entry! You must enter a valid name! &quot;\r\n                                     + &quot;Try again...&quot; + LS);\r\n                    aName = &quot;&quot;;\r\n                }\r\n            }\r\n            name = aName;\r\n            \r\n            // Jamb\r\n            String jam = &quot;&quot;;\r\n            while (jam.isEmpty()) {\r\n                System.out.print(&quot;Enter Jamb score: -&gt; &quot;);\r\n                jam = input.nextLine().trim();\r\n                /* Entry Validation: Is the entry a string representation of\r\n                   a signed of unsigned integer value?           */\r\n                if (!jam.matches(&quot;-?\\\\d+&quot;)) {\r\n                    // No...Inform User and allow retry:\r\n                    System.out.println(&quot;Invalid Entry! (&quot; + jam + &quot;) You must enter &quot;\r\n                                     + &quot;a valid Jamb score! Try again...&quot; + LS);\r\n                    jam = &quot;&quot;;\r\n                }\r\n            }\r\n            jamb = Integer.parseInt(jam);\r\n            \r\n            // PostUtime\r\n            String postUt = &quot;&quot;;\r\n            while (postUt.isEmpty()) {\r\n                System.out.print(&quot;Enter PostUtime score: -&gt; &quot;);\r\n                postUt = input.nextLine().trim();\r\n                /* Entry Validation: Is the entry a string representation of\r\n                   a signed of unsigned integer value?           */\r\n                if (!postUt.matches(&quot;-?\\\\d+&quot;)) {\r\n                    // No...Inform User and allow retry:\r\n                    System.out.println(&quot;Invalid Entry! (&quot; + postUt + &quot;) You must enter &quot;\r\n                                     + &quot;a valid PostUTime score! Try again...&quot; + LS);\r\n                    postUt = &quot;&quot;;\r\n                }\r\n            }\r\n            postUtme = Integer.parseInt(postUt);\r\n            aggregate = ((double)(jamb / 8.0d) + (double)(postUtme / 2.0d));\r\n            System.out.println();\r\n            \r\n            // Confirm Entry Details:\r\n            validInfo = confirmDetails();\r\n        }\r\n        \r\n        System.out.println();\r\n        System.out.println(&quot;Dear &quot; + name + &quot; your aggregate is &quot; + aggregate);\r\n    }\r\n\r\n    public boolean confirmDetails() {\r\n        String confirmD = &quot;&quot;;\r\n        while (confirmD.isEmpty()) {\r\n            System.out.println(&quot;Is the above information Correct?&quot;);\r\n            System.out.println(&quot;  1) To confirm&quot;);\r\n            System.out.println(&quot;  2) To re-enter&quot;);\r\n            System.out.print(&quot;Choice: -&gt; &quot;);\r\n            confirmD = input.nextLine().trim();\r\n            if (!confirmD.matches(&quot;[12]&quot;)) {\r\n                System.out.println(&quot;Invalid Menu Choice! (&quot; + confirmD + &quot;) &quot;\r\n                                 + &quot;Try again...&quot; + LS);\r\n                confirmD = &quot;&quot;;\r\n            }\r\n        }\r\n        return !confirmD.equals(&quot;2&quot;);\r\n    }","title":"Prompt user input, getting multiple values","body":"<p>Just another concept. The code below just uses <a href=\"https://www.tutorialspoint.com/java/util/scanner_nextline.htm\" rel=\"nofollow noreferrer\">Scanner.nextLine()</a> and validates all User inputs using the <a href=\"https://www.tutorialspoint.com/java/java_string_matches.htm\" rel=\"nofollow noreferrer\">String.matches()</a> method along with small <a href=\"https://www.vogella.com/tutorials/JavaRegularExpressions/article.html\" rel=\"nofollow noreferrer\">Regular Expressions</a>.</p>\n<p>The <code>confirmDetails()</code> method is actually re-written to return a boolean value (true for confirm and false for re-write).</p>\n<p><strong>Regular Expressions Used In Code:</strong></p>\n<ul>\n<li><code>&quot;-?\\\\d+&quot;</code> Does the Input match a string representation of a signed\nor unsigned Integer value;</li>\n<li><code>&quot;[12]&quot;</code> Does the Input match a string representation of a unsigned\nInteger value of either <code>1</code> or <code>2</code>.</li>\n</ul>\n<p><strong>The Code:</strong></p>\n<pre><code>Scanner input = new Scanner(System.in);\nString final LS = System.lineSeparator();\n\npublic void calResult() {\n    String name = &quot;&quot;;\n    int jamb, postUtme;\n    double aggregate = 0.0d;\n            \n    boolean validInfo = false;\n    while (!validInfo) {\n        // Name\n        String aName = &quot;&quot;;\n        while (aName.isEmpty()) {\n            System.out.print(&quot;Enter your name: -&gt; &quot;);\n            aName = input.nextLine().trim();\n            // Entry Validation: Is the entry empty?  \n            if (aName.isEmpty()) {\n                // Yes...inform User and allow for retry...\n                System.out.println(&quot;Invalid Entry! You must enter a valid name! &quot;\n                                 + &quot;Try again...&quot; + LS);\n                aName = &quot;&quot;;\n            }\n        }\n        name = aName;\n        \n        // Jamb\n        String jam = &quot;&quot;;\n        while (jam.isEmpty()) {\n            System.out.print(&quot;Enter Jamb score: -&gt; &quot;);\n            jam = input.nextLine().trim();\n            /* Entry Validation: Is the entry a string representation of\n               a signed of unsigned integer value?           */\n            if (!jam.matches(&quot;-?\\\\d+&quot;)) {\n                // No...Inform User and allow retry:\n                System.out.println(&quot;Invalid Entry! (&quot; + jam + &quot;) You must enter &quot;\n                                 + &quot;a valid Jamb score! Try again...&quot; + LS);\n                jam = &quot;&quot;;\n            }\n        }\n        jamb = Integer.parseInt(jam);\n        \n        // PostUtime\n        String postUt = &quot;&quot;;\n        while (postUt.isEmpty()) {\n            System.out.print(&quot;Enter PostUtime score: -&gt; &quot;);\n            postUt = input.nextLine().trim();\n            /* Entry Validation: Is the entry a string representation of\n               a signed of unsigned integer value?           */\n            if (!postUt.matches(&quot;-?\\\\d+&quot;)) {\n                // No...Inform User and allow retry:\n                System.out.println(&quot;Invalid Entry! (&quot; + postUt + &quot;) You must enter &quot;\n                                 + &quot;a valid PostUTime score! Try again...&quot; + LS);\n                postUt = &quot;&quot;;\n            }\n        }\n        postUtme = Integer.parseInt(postUt);\n        aggregate = ((double)(jamb / 8.0d) + (double)(postUtme / 2.0d));\n        System.out.println();\n        \n        // Confirm Entry Details:\n        validInfo = confirmDetails();\n    }\n    \n    System.out.println();\n    System.out.println(&quot;Dear &quot; + name + &quot; your aggregate is &quot; + aggregate);\n}\n\npublic boolean confirmDetails() {\n    String confirmD = &quot;&quot;;\n    while (confirmD.isEmpty()) {\n        System.out.println(&quot;Is the above information Correct?&quot;);\n        System.out.println(&quot;  1) To confirm&quot;);\n        System.out.println(&quot;  2) To re-enter&quot;);\n        System.out.print(&quot;Choice: -&gt; &quot;);\n        confirmD = input.nextLine().trim();\n        if (!confirmD.matches(&quot;[12]&quot;)) {\n            System.out.println(&quot;Invalid Menu Choice! (&quot; + confirmD + &quot;) &quot;\n                             + &quot;Try again...&quot; + LS);\n            confirmD = &quot;&quot;;\n        }\n    }\n    return !confirmD.equals(&quot;2&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":23370524,"reputation":27,"user_id":17441457,"display_name":"Adejumobi Daniel"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75614801,"answer_count":4,"score":0,"last_activity_date":1677762452,"creation_date":1677754206,"question_id":75614428,"body_markdown":"I am working on a basic Java program, whereby the user is prompted to enter it details.\r\nAfter entering it details, it ask the user if the entered details are correct.\r\nIf yes, the user details get printed out, if not the user has to re-enter it details again.\r\n\r\nNow the issue is, if the user entered it detail for the second time and they are okay, I get 2 print statement, the old one plus the new one, if they enter it N times, i get and N times print statment.\r\n\r\n \r\n\r\n        import java.util.Scanner;\r\n         \r\n         public class Calculate {\r\n         \r\n         private String name;\r\n         private float jamb, postUtme, aggregate;\r\n         \r\n         public Calculate(String name, float jamb, float postUtme, float aggregate) {\r\n         this.name = name;\r\n         this.jamb = jamb;\r\n         this.postUtme = postUtme;\r\n         this.aggregate = aggregate;\r\n             }\r\n         \r\n         Scanner input = new Scanner(System.in);\r\n         \r\n         public void calResult(){\r\n         System.out.println(&quot;Enter your name&quot;);\r\n         name = input.next();\r\n         \r\n         \r\n         System.out.println(&quot;Enter Jamb score&quot;);\r\n         jamb = input.nextInt();\r\n         \r\n         System.out.println(&quot;Enter PostUtme score&quot;);\r\n         postUtme = input.nextInt();\r\n         \r\n         aggregate = (jamb/8) + (postUtme/2);\r\n         \r\n         confirmDetails();\r\n         \r\n         System.out.println(&quot;Dear &quot; + name +  &quot; your aggregate is &quot; +  aggregate);\r\n            }\r\n         \r\n         public void confirmDetails(){\r\n         System.out.println(&quot;&quot;&quot;\r\n         Correct??\r\n                         \\t1 to confirm\r\n                         \\t2 to re-enter&quot;&quot;&quot;);\r\n         int confirmD = input.nextInt();\r\n         if (confirmD == 2){\r\n         calResult();\r\n                 }\r\n             }\r\n         \r\n         public String getName() {\r\n         return name;\r\n             }\r\n         \r\n         public void setName(String name) {\r\n         this.name = name;\r\n             }\r\n         \r\n         public float getJamb() {\r\n         return jamb;\r\n             }\r\n         \r\n         public void setJamb(float jamb) {\r\n         this.jamb = jamb;\r\n             }\r\n         \r\n         public float getPostUtme() {\r\n         return postUtme;\r\n             }\r\n         \r\n         public void setPostUtme(float postUtme) {\r\n         this.postUtme = postUtme;\r\n             }\r\n         \r\n         public float getAggregate() {\r\n         return aggregate;\r\n             }\r\n         \r\n         public void setAggregate(float aggregate) {\r\n         this.aggregate = aggregate;\r\n             }\r\n         }\r\n    \r\n Main class:\r\n      \r\n    \r\n         public class Main {\r\n         public static void main(String[] args) {\r\n         Calculate c = new Calculate(&quot;PlaceHolderValue&quot;, 0, 0, 0);\r\n         c.calResult();\r\n             }\r\n         }\r\n    \r\noutput from multiple entries:\r\n\r\n    Enter your name\r\n    Daniel\r\n    Enter Jamb score\r\n    50\r\n    Enter PostUtme score\r\n    40\r\n    Correct??\r\n    \t1 to confirm\r\n    \t2 to re-enter\r\n    2\r\n    Enter your name\r\n    Tobi\r\n    Enter Jamb score\r\n    30\r\n    Enter PostUtme score\r\n    20\r\n    Correct??\r\n    \t1 to confirm\r\n    \t2 to re-enter\r\n    1\r\n    Dear Tobi your aggregate is 13.75\r\n    Dear Tobi your aggregate is 13.75\r\n    \r\n    \r\nDesired output:\r\n\r\n    Enter your name\r\n    Daniel\r\n    Enter Jamb score\r\n    50\r\n    Enter PostUtme score\r\n    40\r\n    Correct??\r\n    \t1 to confirm\r\n    \t2 to re-enter\r\n    2\r\n    Enter your name\r\n    Tobi\r\n    Enter Jamb score\r\n    30\r\n    Enter PostUtme score\r\n    20\r\n    Correct??\r\n    \t1 to confirm\r\n    \t2 to re-enter\r\n    1\r\n    Dear Tobi your aggregate is 13.75","title":"Prompt user input, getting multiple values","body":"<p>I am working on a basic Java program, whereby the user is prompted to enter it details.\nAfter entering it details, it ask the user if the entered details are correct.\nIf yes, the user details get printed out, if not the user has to re-enter it details again.</p>\n<p>Now the issue is, if the user entered it detail for the second time and they are okay, I get 2 print statement, the old one plus the new one, if they enter it N times, i get and N times print statment.</p>\n<pre><code>    import java.util.Scanner;\n     \n     public class Calculate {\n     \n     private String name;\n     private float jamb, postUtme, aggregate;\n     \n     public Calculate(String name, float jamb, float postUtme, float aggregate) {\n     this.name = name;\n     this.jamb = jamb;\n     this.postUtme = postUtme;\n     this.aggregate = aggregate;\n         }\n     \n     Scanner input = new Scanner(System.in);\n     \n     public void calResult(){\n     System.out.println(&quot;Enter your name&quot;);\n     name = input.next();\n     \n     \n     System.out.println(&quot;Enter Jamb score&quot;);\n     jamb = input.nextInt();\n     \n     System.out.println(&quot;Enter PostUtme score&quot;);\n     postUtme = input.nextInt();\n     \n     aggregate = (jamb/8) + (postUtme/2);\n     \n     confirmDetails();\n     \n     System.out.println(&quot;Dear &quot; + name +  &quot; your aggregate is &quot; +  aggregate);\n        }\n     \n     public void confirmDetails(){\n     System.out.println(&quot;&quot;&quot;\n     Correct??\n                     \\t1 to confirm\n                     \\t2 to re-enter&quot;&quot;&quot;);\n     int confirmD = input.nextInt();\n     if (confirmD == 2){\n     calResult();\n             }\n         }\n     \n     public String getName() {\n     return name;\n         }\n     \n     public void setName(String name) {\n     this.name = name;\n         }\n     \n     public float getJamb() {\n     return jamb;\n         }\n     \n     public void setJamb(float jamb) {\n     this.jamb = jamb;\n         }\n     \n     public float getPostUtme() {\n     return postUtme;\n         }\n     \n     public void setPostUtme(float postUtme) {\n     this.postUtme = postUtme;\n         }\n     \n     public float getAggregate() {\n     return aggregate;\n         }\n     \n     public void setAggregate(float aggregate) {\n     this.aggregate = aggregate;\n         }\n     }\n</code></pre>\n<p>Main class:</p>\n<pre><code>     public class Main {\n     public static void main(String[] args) {\n     Calculate c = new Calculate(&quot;PlaceHolderValue&quot;, 0, 0, 0);\n     c.calResult();\n         }\n     }\n</code></pre>\n<p>output from multiple entries:</p>\n<pre><code>Enter your name\nDaniel\nEnter Jamb score\n50\nEnter PostUtme score\n40\nCorrect??\n    1 to confirm\n    2 to re-enter\n2\nEnter your name\nTobi\nEnter Jamb score\n30\nEnter PostUtme score\n20\nCorrect??\n    1 to confirm\n    2 to re-enter\n1\nDear Tobi your aggregate is 13.75\nDear Tobi your aggregate is 13.75\n</code></pre>\n<p>Desired output:</p>\n<pre><code>Enter your name\nDaniel\nEnter Jamb score\n50\nEnter PostUtme score\n40\nCorrect??\n    1 to confirm\n    2 to re-enter\n2\nEnter your name\nTobi\nEnter Jamb score\n30\nEnter PostUtme score\n20\nCorrect??\n    1 to confirm\n    2 to re-enter\n1\nDear Tobi your aggregate is 13.75\n</code></pre>\n"},{"tags":["java","jvm","anonymous-inner-class","anonymous-objects"],"comments":[{"owner":{"account_id":2378568,"reputation":2040,"user_id":4489263,"display_name":"Stefan Wuebbe"},"score":1,"creation_date":1667404590,"post_id":74287813,"comment_id":131160253,"body_markdown":"Would it make sense to add `java` and/or `jvm` Tags in order to address the desired audience?","body":"Would it make sense to add <code>java</code> and/or <code>jvm</code> Tags in order to address the desired audience?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1677761610,"post_id":74287813,"comment_id":133403910,"body_markdown":"All objects are stored in the heap memory. The fact that you don’t store a reference to the object doesn’t change the nature or storage type of the object. Of course, if you don’t store a reference to the object, it may get garbage collected at any point. There is no reason to assume that you can get the hash code of an unreachable object. By the way, your inner class is not anonymous, as it has the name `Inner`.","body":"All objects are stored in the heap memory. The fact that you don’t store a reference to the object doesn’t change the nature or storage type of the object. Of course, if you don’t store a reference to the object, it may get garbage collected at any point. There is no reason to assume that you can get the hash code of an unreachable object. By the way, your inner class is not anonymous, as it has the name <code>Inner</code>."}],"owner":{"account_id":26805084,"reputation":1,"user_id":20396508,"display_name":"Venkatesh Nambiyar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677761621,"creation_date":1667385333,"question_id":74287813,"body_markdown":"Where will Anonymous objects are stored in JVM memory. How to get hashcode of the Object?\r\n\r\n```\r\npublic class Outer {\r\n\t\r\n\tpublic class Inner {\r\n\t\t\r\n\t\tpublic void display() {\r\n\t\t\tSystem.out.println(&quot;Inner class method&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t\t\r\n\t\tnew Outer().new Inner().display();\r\n\t}\r\n}\r\n``\r\n","title":"Anonymous Object in Java / JVM","body":"<p>Where will Anonymous objects are stored in JVM memory. How to get hashcode of the Object?</p>\n<pre><code>public class Outer {\n    \n    public class Inner {\n        \n        public void display() {\n            System.out.println(&quot;Inner class method&quot;);\n        }\n    }\n    \n    public static void main(String[] args) {\n            \n        new Outer().new Inner().display();\n    }\n}\n``\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-batch","etl"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677761224,"creation_date":1677761224,"answer_id":75615607,"question_id":75605755,"body_markdown":"You can do that with an `ItemWriteListener#beforeWrite(Chunk&lt;Product&gt; products)`. This callback gives you access to the chunk or items just before they are written, so you can perform your REST batch request at that point and transform them as needed before the `write` operation.","title":"Spring Batch - How to handle an object buffering on the ItemProcessor&#39;s level","body":"<p>You can do that with an <code>ItemWriteListener#beforeWrite(Chunk&lt;Product&gt; products)</code>. This callback gives you access to the chunk or items just before they are written, so you can perform your REST batch request at that point and transform them as needed before the <code>write</code> operation.</p>\n"}],"owner":{"account_id":13664954,"reputation":23,"user_id":9859086,"display_name":"Hubert Stasiuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677761224,"creation_date":1677684384,"question_id":75605755,"body_markdown":"I am using a Spring Batch under the hood in my application. \r\nI have a lot of the already written ItemReader(s), ItemWriter(s) and a composite ItemProcessor(s) that allow me to build a Job that contains a chunk steps. All of the components share the same domain object &quot;Product&quot;.  \r\n\r\n    public class CustomReader implements ItemReader&lt;Product&gt; {\r\n    \r\n    @Override\r\n    public Product read() throws Exception {\r\n        //business logic for reading a products\r\n        return null;\r\n     }\r\n    }\r\n\r\n   \r\n\r\n    public class CustomWriter implements ItemWriter&lt;Product&gt; {\r\n\r\n    @Override\r\n    public void write(List&lt;? extends Product&gt; items) throws Exception {\r\n        //business logic for writing a products\r\n      }\r\n    }\r\n\r\n\r\n    public class CustomProcessor extends ItemProcessor&lt;Product, Product&gt; {\r\n    \r\n    @Override\r\n    public Product process(Product product) throws Exception {\r\n        //custom logic for data processing\r\n        return null;\r\n     }\r\n    }\r\n\r\n\r\n\r\nCurrently I need to have a possibility to use a new ItemProcessor that will be sending an http requests. However, from the Processor&#39;s perspective I have an access only to the individual Product object, but instead of sending an http request for a single product, I need to gather a 10 products together (get their ids) and execute a batch request. Then I need to map the response and return a multiple Products back to the ItemWriter.\r\n\r\n\r\n    public class CustomHttpProcessor extends ItemProcessor&lt;Product, Product&gt; {\r\n    @Override\r\n    public List&lt;Product&gt; process(List&lt;Product&gt; product) throws Exception {\r\n        //custom logic for sending a batch requests via http\r\n        return null;\r\n     }\r\n    }\r\n\r\n\r\nIs there any other option than changing the base domain object from Product to List&lt;Product&gt; everywhere in the codebase (I have a feeling that I will significantly decrease the performance of the entire application and skyrocket the memory usage?) Are there any other Spring Batch&#39;s features that I can use, or any patterns that I can use? \r\n\r\nThanks in advance for any help!","title":"Spring Batch - How to handle an object buffering on the ItemProcessor&#39;s level","body":"<p>I am using a Spring Batch under the hood in my application.\nI have a lot of the already written ItemReader(s), ItemWriter(s) and a composite ItemProcessor(s) that allow me to build a Job that contains a chunk steps. All of the components share the same domain object &quot;Product&quot;.</p>\n<pre><code>public class CustomReader implements ItemReader&lt;Product&gt; {\n\n@Override\npublic Product read() throws Exception {\n    //business logic for reading a products\n    return null;\n }\n}\n\n\n\npublic class CustomWriter implements ItemWriter&lt;Product&gt; {\n\n@Override\npublic void write(List&lt;? extends Product&gt; items) throws Exception {\n    //business logic for writing a products\n  }\n}\n\n\npublic class CustomProcessor extends ItemProcessor&lt;Product, Product&gt; {\n\n@Override\npublic Product process(Product product) throws Exception {\n    //custom logic for data processing\n    return null;\n }\n}\n</code></pre>\n<p>Currently I need to have a possibility to use a new ItemProcessor that will be sending an http requests. However, from the Processor's perspective I have an access only to the individual Product object, but instead of sending an http request for a single product, I need to gather a 10 products together (get their ids) and execute a batch request. Then I need to map the response and return a multiple Products back to the ItemWriter.</p>\n<pre><code>public class CustomHttpProcessor extends ItemProcessor&lt;Product, Product&gt; {\n@Override\npublic List&lt;Product&gt; process(List&lt;Product&gt; product) throws Exception {\n    //custom logic for sending a batch requests via http\n    return null;\n }\n}\n</code></pre>\n<p>Is there any other option than changing the base domain object from Product to List everywhere in the codebase (I have a feeling that I will significantly decrease the performance of the entire application and skyrocket the memory usage?) Are there any other Spring Batch's features that I can use, or any patterns that I can use?</p>\n<p>Thanks in advance for any help!</p>\n"},{"tags":["java","log4j"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1677768091,"post_id":75615163,"comment_id":133405973,"body_markdown":"There is nothing wrong here.  Your data has not been altered.  The `:` character is a special character in properties files, so the java.util.Properties class escaped it.  Read [the entire file format specification](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Properties.html#load(java.io.Reader)) for details.","body":"There is nothing wrong here.  Your data has not been altered.  The <code>:</code> character is a special character in properties files, so the java.util.Properties class escaped it.  Read <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Properties.html#load(java.io.Reader)\" rel=\"nofollow noreferrer\">the entire file format specification</a> for details."},{"owner":{"account_id":1794689,"reputation":301,"user_id":1634358,"accept_rate":80,"display_name":"Ranjeet"},"score":0,"creation_date":1677768661,"post_id":75615163,"comment_id":133406165,"body_markdown":"Once I hardcode path in log4j.properties to &#39;C:\\temp\\logs\\myapp&#39;, it creates log file successfully. Issue is there only if I try to update this property from java code.","body":"Once I hardcode path in log4j.properties to &#39;C:\\temp\\logs\\myapp&#39;, it creates log file successfully. Issue is there only if I try to update this property from java code."}],"owner":{"account_id":1794689,"reputation":301,"user_id":1634358,"accept_rate":80,"display_name":"Ranjeet"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677761196,"creation_date":1677758581,"question_id":75615163,"body_markdown":"I am trying to update log file path into a properties file. However, it is not updating properly and it is not creating the log file as well.\r\n\r\nCode:\r\n\r\n    private void updateLog4jProperties(String operationName) {\r\n    \tFileInputStream in;\r\n    \ttry {\r\n    \t\tin = new FileInputStream(&quot;config/log4j.properties&quot;);\r\n    \t\tProperties props = new Properties();\r\n    \t\tprops.load(in);\r\n    \t\tin.close();\r\n    \t\tFileOutputStream out = new FileOutputStream(&quot;config/log4j.properties&quot;);\r\n    \t\tif (System.getProperty(&quot;os.name&quot;).toLowerCase().indexOf(&quot;windows&quot;) &gt;= 0) {\r\n    \t\t\tprops.setProperty(&quot;log&quot;, &quot;C:/temp/logs/myapp&quot;);\r\n    \t\t\tFiles.createDirectories(Paths.get(&quot;C:/temp/logs/myapp&quot;));\r\n    \t\t} else {\r\n    \t\t\tprops.setProperty(&quot;log&quot;, &quot;/var/tmp/logs/myapp&quot;);\r\n    \t\t\tFiles.createDirectories(Paths.get(&quot;/var/tmp/logs/myapp&quot;));\r\n    \t\t}\r\n    \t\tprops.setProperty(&quot;log4j.appender.FILE.File&quot;, props.getProperty(&quot;log&quot;) + &quot;/&quot; + &quot;myapp_&quot;\r\n    \t\t\t\t+ operationName + &quot;_&quot; + new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;).format(new Date()) + &quot;.log&quot;);\r\n    \t\tprops.store(out, null);\r\n    \t\tout.close();\r\n    \t} catch (IOException e) {\r\n    \t\t// TODO Auto-generated catch block\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    }\r\nResulting log4j.properties after execution:\r\n\r\n    #Thu Mar 02 17:24:46 IST 2023\r\n    log4j.rootLogger=DEBUG, FILE\r\n    log4j.appender.FILE.File=C\\:/temp/logs/myapp/myapp_Test_20230302172446.log\r\n    log4j.appender.FILE=org.apache.log4j.FileAppender\r\n    log4j.appender.FILE.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.FILE.layout.conversionPattern=%d{HH\\:mm\\:ss.SSS} %-5level %logger{36} - %msg%n\r\n    log=C\\:/temp/logs/myapp\r\nIf you see, value for both `&#39;log&#39;` and `&#39;log4j.appender.FILE.File&#39;` contains `&#39;C\\:&#39;`.\r\nThough it is creating the folder structure `&#39;C:\\temp\\logs\\myapp&#39;`, log file `&#39;myapp_Test_20230302172446.log&#39;` is not present inside this folder.\r\n\r\nCan you please help to identify the issue here.","title":"Java - How to update file path in properties file for Windiows","body":"<p>I am trying to update log file path into a properties file. However, it is not updating properly and it is not creating the log file as well.</p>\n<p>Code:</p>\n<pre><code>private void updateLog4jProperties(String operationName) {\n    FileInputStream in;\n    try {\n        in = new FileInputStream(&quot;config/log4j.properties&quot;);\n        Properties props = new Properties();\n        props.load(in);\n        in.close();\n        FileOutputStream out = new FileOutputStream(&quot;config/log4j.properties&quot;);\n        if (System.getProperty(&quot;os.name&quot;).toLowerCase().indexOf(&quot;windows&quot;) &gt;= 0) {\n            props.setProperty(&quot;log&quot;, &quot;C:/temp/logs/myapp&quot;);\n            Files.createDirectories(Paths.get(&quot;C:/temp/logs/myapp&quot;));\n        } else {\n            props.setProperty(&quot;log&quot;, &quot;/var/tmp/logs/myapp&quot;);\n            Files.createDirectories(Paths.get(&quot;/var/tmp/logs/myapp&quot;));\n        }\n        props.setProperty(&quot;log4j.appender.FILE.File&quot;, props.getProperty(&quot;log&quot;) + &quot;/&quot; + &quot;myapp_&quot;\n                + operationName + &quot;_&quot; + new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;).format(new Date()) + &quot;.log&quot;);\n        props.store(out, null);\n        out.close();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Resulting log4j.properties after execution:</p>\n<pre><code>#Thu Mar 02 17:24:46 IST 2023\nlog4j.rootLogger=DEBUG, FILE\nlog4j.appender.FILE.File=C\\:/temp/logs/myapp/myapp_Test_20230302172446.log\nlog4j.appender.FILE=org.apache.log4j.FileAppender\nlog4j.appender.FILE.layout=org.apache.log4j.PatternLayout\nlog4j.appender.FILE.layout.conversionPattern=%d{HH\\:mm\\:ss.SSS} %-5level %logger{36} - %msg%n\nlog=C\\:/temp/logs/myapp\n</code></pre>\n<p>If you see, value for both <code>'log'</code> and <code>'log4j.appender.FILE.File'</code> contains <code>'C\\:'</code>.\nThough it is creating the folder structure <code>'C:\\temp\\logs\\myapp'</code>, log file <code>'myapp_Test_20230302172446.log'</code> is not present inside this folder.</p>\n<p>Can you please help to identify the issue here.</p>\n"},{"tags":["java","global-variables","java.util.scanner"],"comments":[{"owner":{"account_id":2882201,"reputation":10752,"user_id":2472820,"accept_rate":86,"display_name":"Kon"},"score":2,"creation_date":1390006276,"post_id":21198652,"comment_id":31921535,"body_markdown":"No, it&#39;s not necessarily bad practice in my experience.","body":"No, it&#39;s not necessarily bad practice in my experience."},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":3,"creation_date":1390006361,"post_id":21198652,"comment_id":31921559,"body_markdown":"It is bad object oriented programming since that thing is not part of any object.","body":"It is bad object oriented programming since that thing is not part of any object."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":2,"creation_date":1390006614,"post_id":21198652,"comment_id":31921610,"body_markdown":"might be a good use case for [Singleton pattern](http://en.wikipedia.org/wiki/Singleton_pattern).","body":"might be a good use case for <a href=\"http://en.wikipedia.org/wiki/Singleton_pattern\" rel=\"nofollow noreferrer\">Singleton pattern</a>."},{"owner":{"account_id":2882201,"reputation":10752,"user_id":2472820,"accept_rate":86,"display_name":"Kon"},"score":1,"creation_date":1390006616,"post_id":21198652,"comment_id":31921611,"body_markdown":"Utility objects are a necessity in large java programs. This object being a static member of some utility class would be extremely common practice. Maybe not ideal OO practice, but I don&#39;t think &lt;i&gt;bad&lt;/i&gt;.","body":"Utility objects are a necessity in large java programs. This object being a static member of some utility class would be extremely common practice. Maybe not ideal OO practice, but I don&#39;t think &lt;i&gt;bad&lt;/i&gt;."},{"owner":{"account_id":8834,"reputation":297144,"user_id":16076,"display_name":"Mitch Wheat"},"score":1,"creation_date":1390006619,"post_id":21198652,"comment_id":31921612,"body_markdown":"If you pass the keyboard, it will be much easier to mock when testing...","body":"If you pass the keyboard, it will be much easier to mock when testing..."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1390006692,"post_id":21198652,"comment_id":31921631,"body_markdown":"Generally speaking, you should give a variable the smallest scope that works. If you use the scanner in many places, it&#39;s probably OK,","body":"Generally speaking, you should give a variable the smallest scope that works. If you use the scanner in many places, it&#39;s probably OK,"}],"answers":[{"tags":[],"owner":{"account_id":16658,"reputation":4013,"user_id":36532,"accept_rate":70,"display_name":"LuRsT"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1390006701,"creation_date":1390006701,"answer_id":21198718,"question_id":21198652,"body_markdown":"It seems a lot easier to use a global variable, but in the long run, it can make the code very hard to maintain, have you thought about creating a class to handle the keyboard input? By having a good separation of concerns, you end up with cleaner code.\r\n\r\nhttps://en.wikipedia.org/wiki/Separation_of_concerns","title":"Is using Scanner as global variable in Java bad practice?","body":"<p>It seems a lot easier to use a global variable, but in the long run, it can make the code very hard to maintain, have you thought about creating a class to handle the keyboard input? By having a good separation of concerns, you end up with cleaner code.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/Separation_of_concerns</a></p>\n"},{"tags":[],"owner":{"account_id":2619509,"reputation":93,"user_id":2267871,"display_name":"Jaso333"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390006725,"creation_date":1390006725,"answer_id":21198721,"question_id":21198652,"body_markdown":"Depending on how the object should be used would define where to put it.\r\n\r\nIf the Scanner is something that there MUST be only one instance of, then consider making it a singleton instead of creating it using the constructor. The following link describes singletons:\r\n\r\nhttp://www.javaworld.com/article/2073352/core-java/simply-singleton.html\r\n\r\nThen, rather than having it as a static global, the Scanner class can have a public static method called &#39;getInstance&#39;. Therefore, you aren&#39;t tieing the instance of a scanner to any particular location and whenever you need to use it, call Scanner.getInstance from anywhere to access the underlying instance of the class.","title":"Is using Scanner as global variable in Java bad practice?","body":"<p>Depending on how the object should be used would define where to put it.</p>\n\n<p>If the Scanner is something that there MUST be only one instance of, then consider making it a singleton instead of creating it using the constructor. The following link describes singletons:</p>\n\n<p><a href=\"http://www.javaworld.com/article/2073352/core-java/simply-singleton.html\" rel=\"nofollow\">http://www.javaworld.com/article/2073352/core-java/simply-singleton.html</a></p>\n\n<p>Then, rather than having it as a static global, the Scanner class can have a public static method called 'getInstance'. Therefore, you aren't tieing the instance of a scanner to any particular location and whenever you need to use it, call Scanner.getInstance from anywhere to access the underlying instance of the class.</p>\n"},{"tags":[],"owner":{"account_id":1328608,"reputation":16312,"user_id":1272950,"display_name":"yǝsʞǝla"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390007096,"creation_date":1390007096,"answer_id":21198766,"question_id":21198652,"body_markdown":"Overall it&#39;s ok since it&#39;s a very commonly used object in your application. However there are 2 problems you can face as far as I can see:\r\n\r\n - Concurrent access and mutable state of Scanner can be a problem. You might want to synchronize that.\r\n - Unit testing might be a problem since you can&#39;t override static members. It might still be ok if in classes that use it it can be overridden.\r\n\r\nSo it depends on the size of your app and how it&#39;s used in terms of multithreading. I would do it at home but not at work.","title":"Is using Scanner as global variable in Java bad practice?","body":"<p>Overall it's ok since it's a very commonly used object in your application. However there are 2 problems you can face as far as I can see:</p>\n\n<ul>\n<li>Concurrent access and mutable state of Scanner can be a problem. You might want to synchronize that.</li>\n<li>Unit testing might be a problem since you can't override static members. It might still be ok if in classes that use it it can be overridden.</li>\n</ul>\n\n<p>So it depends on the size of your app and how it's used in terms of multithreading. I would do it at home but not at work.</p>\n"},{"tags":[],"owner":{"account_id":1437810,"reputation":2352,"user_id":1358817,"display_name":"Exorcismus"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1677761152,"creation_date":1390007189,"answer_id":21198774,"question_id":21198652,"body_markdown":"It&#39;s best if you created a special class for getting Inputs and/or produce Outputs.  \r\nFor example:\r\n\r\n    class IO {\r\n        Scanner scanner ;\r\n        \r\n        public Scanner getScanner() {\r\n            return new Scanner();\r\n        }\r\n\r\n        public Scanner getScanner(File file) {\r\n            return new Scanner(new FileReader(file));\r\n        }\r\n\r\n        // Other types of scanners...\r\n    }","title":"Is using Scanner as global variable in Java bad practice?","body":"<p>It's best if you created a special class for getting Inputs and/or produce Outputs.<br />\nFor example:</p>\n<pre><code>class IO {\n    Scanner scanner ;\n    \n    public Scanner getScanner() {\n        return new Scanner();\n    }\n\n    public Scanner getScanner(File file) {\n        return new Scanner(new FileReader(file));\n    }\n\n    // Other types of scanners...\n}\n</code></pre>\n"}],"owner":{"account_id":2351379,"reputation":1892,"user_id":2060096,"accept_rate":91,"display_name":"Ris"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13317,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"closed_date":1390012173,"accepted_answer_id":21198718,"answer_count":4,"score":9,"last_activity_date":1677761152,"creation_date":1390006234,"question_id":21198652,"body_markdown":"Is it considered bad programming practice to have an input scanner (such as a keyboard) declared as a global var in a class?  \r\nSuch as:\r\n\r\n    public static Scanner input  = new Scanner(System.in);\r\n\r\nI&#39;m working with alot of input from various methods, and it just seems a lot easier to use a public var then having to send the keyboard to each method.\r\n\r\n\t\r\n\r\n    ","title":"Is using Scanner as global variable in Java bad practice?","body":"<p>Is it considered bad programming practice to have an input scanner (such as a keyboard) declared as a global var in a class?<br />\nSuch as:</p>\n<pre><code>public static Scanner input  = new Scanner(System.in);\n</code></pre>\n<p>I'm working with alot of input from various methods, and it just seems a lot easier to use a public var then having to send the keyboard to each method.</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1405299220,"post_id":24728256,"comment_id":38357959,"body_markdown":"Consider fleshing out your question, providing detail and showing pertinent code.","body":"Consider fleshing out your question, providing detail and showing pertinent code."},{"owner":{"account_id":4533802,"reputation":115,"user_id":3683555,"accept_rate":100,"display_name":"user3683555"},"score":1,"creation_date":1405299316,"post_id":24728256,"comment_id":38357985,"body_markdown":"ok , I will update my question with a simplest possible eg","body":"ok , I will update my question with a simplest possible eg"},{"owner":{"account_id":3701688,"reputation":3357,"user_id":3081206,"display_name":"takendarkk"},"score":0,"creation_date":1405299833,"post_id":24728256,"comment_id":38358089,"body_markdown":"Declare your scanner as a class variable outside of main and your other function.","body":"Declare your scanner as a class variable outside of main and your other function."},{"owner":{"account_id":4533802,"reputation":115,"user_id":3683555,"accept_rate":100,"display_name":"user3683555"},"score":0,"creation_date":1405300363,"post_id":24728256,"comment_id":38358205,"body_markdown":"http://stackoverflow.com/questions/21198652/is-this-bad-programming-scanner-as-global-variable","body":"<a href=\"http://stackoverflow.com/questions/21198652/is-this-bad-programming-scanner-as-global-variable\" title=\"is this bad programming scanner as global variable\">stackoverflow.com/questions/21198652/&hellip;</a>"},{"owner":{"account_id":3701688,"reputation":3357,"user_id":3081206,"display_name":"takendarkk"},"score":0,"creation_date":1405300439,"post_id":24728256,"comment_id":38358219,"body_markdown":"Are you writing some difficult production code that will be difficult to maintain over long periods of time? If not, use my solution. If so, use one of the solutions from that question you linked.","body":"Are you writing some difficult production code that will be difficult to maintain over long periods of time? If not, use my solution. If so, use one of the solutions from that question you linked."},{"owner":{"account_id":4533802,"reputation":115,"user_id":3683555,"accept_rate":100,"display_name":"user3683555"},"score":0,"creation_date":1405300497,"post_id":24728256,"comment_id":38358230,"body_markdown":"unfortunately yes, I need to adhere to good programming practice","body":"unfortunately yes, I need to adhere to good programming practice"}],"answers":[{"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1405300885,"post_id":24728379,"comment_id":38358312,"body_markdown":"@user3683555: likely because you&#39;re declaring it inside of the main method and not before the method. You would need to declare it static and in the class.","body":"@user3683555: likely because you&#39;re declaring it inside of the main method and not before the method. You would need to declare it static and in the class."},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1405300896,"post_id":24728379,"comment_id":38358320,"body_markdown":"You&#39;re shadowing `sc` in `main`.  Further, since we&#39;re always going to pull from `System.in`, why not just declare and instantiate it as a field?","body":"You&#39;re shadowing <code>sc</code> in <code>main</code>.  Further, since we&#39;re always going to pull from <code>System.in</code>, why not just declare and instantiate it as a field?"},{"owner":{"account_id":2522887,"reputation":651,"user_id":2192878,"accept_rate":72,"display_name":"Jakkra"},"score":0,"creation_date":1405300909,"post_id":24728379,"comment_id":38358326,"body_markdown":"Should work now, I forgot to delete &quot;Scanner&quot; in Scanner sc = new... in main.","body":"Should work now, I forgot to delete &quot;Scanner&quot; in Scanner sc = new... in main."},{"owner":{"account_id":4533802,"reputation":115,"user_id":3683555,"accept_rate":100,"display_name":"user3683555"},"score":0,"creation_date":1405302054,"post_id":24728379,"comment_id":38358559,"body_markdown":"illegal modifier for parameter sc ; only final is permitted --&gt; this is the error i got after using private static in front of scanner.","body":"illegal modifier for parameter sc ; only final is permitted --&gt; this is the error i got after using private static in front of scanner."}],"tags":[],"owner":{"account_id":2522887,"reputation":651,"user_id":2192878,"accept_rate":72,"display_name":"Jakkra"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677760899,"creation_date":1405300464,"answer_id":24728379,"question_id":24728256,"body_markdown":"Use the same Scanner object.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class dummy {\r\n        private static final Scanner sc = new Scanner(System.in);\r\n    \r\n        public static void main(String[] args) {\r\n            int buy;  \r\n    \r\n            buy = sc.nextInt();\r\n            user = dummy2();\r\n\r\n            // Do more stuff with the same scanner\r\n\r\n            sc.close();\r\n        }\r\n    \r\n        private static boolean dummy2() {\r\n            // Scan stuff\r\n        }\r\n    }","title":"How to create multiple scanner elements in Java?","body":"<p>Use the same Scanner object.</p>\n<pre><code>import java.util.Scanner;\n\npublic class dummy {\n    private static final Scanner sc = new Scanner(System.in);\n\n    public static void main(String[] args) {\n        int buy;  \n\n        buy = sc.nextInt();\n        user = dummy2();\n\n        // Do more stuff with the same scanner\n\n        sc.close();\n    }\n\n    private static boolean dummy2() {\n        // Scan stuff\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4533802,"reputation":115,"user_id":3683555,"accept_rate":100,"display_name":"user3683555"},"score":0,"creation_date":1405301132,"post_id":24728411,"comment_id":38358372,"body_markdown":"This is a very useful answer. I get Nosuch element exception as problem is function is closing the Scanner. When the scanner is closed, it also closes the underlying ImputStream. This makes all other Scanner on that input invalid. Yes, you are correct. But, i need to find a way to get 2 inputs from the user at 2 different functions.","body":"This is a very useful answer. I get Nosuch element exception as problem is function is closing the Scanner. When the scanner is closed, it also closes the underlying ImputStream. This makes all other Scanner on that input invalid. Yes, you are correct. But, i need to find a way to get 2 inputs from the user at 2 different functions."},{"owner":{"account_id":4533802,"reputation":115,"user_id":3683555,"accept_rate":100,"display_name":"user3683555"},"score":0,"creation_date":1405301166,"post_id":24728411,"comment_id":38358376,"body_markdown":"However, you should not be taking user input in functions. This limits future use, say if you wanted to later add a GUI or make the same calculation based off a number not gotten from the user, then you would need rewrite the function. The function should take a int as a parameter, which the main method should get from the user. Only the main method and other methods directly relating to user input, such as the Scanner&#39;s methods, should read user input  ---&gt; this sums it up. I will tell u if it worked","body":"However, you should not be taking user input in functions. This limits future use, say if you wanted to later add a GUI or make the same calculation based off a number not gotten from the user, then you would need rewrite the function. The function should take a int as a parameter, which the main method should get from the user. Only the main method and other methods directly relating to user input, such as the Scanner&#39;s methods, should read user input  ---&gt; this sums it up. I will tell u if it worked"}],"tags":[],"owner":{"account_id":2442207,"reputation":1167,"user_id":2130376,"accept_rate":100,"display_name":"yesennes"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1405300814,"creation_date":1405300814,"answer_id":24728411,"question_id":24728256,"body_markdown":"First of all, it would make the question much easier to answer if you gave more information, such as the exception and its message, and maybe source code.\r\n\r\nIf the exception is a NoSuchElementException, the direct problem is that the function is closing the Scanner. When the scanner is closed, it also closes the underlying ImputStream. This makes all other Scanner on that input invalid.\r\n\r\nIf the exception is InputMismatchException, then the input is not an int.\r\n\r\nIf the exception is IllegalStateException, then the scanner has been closed, this could happen is the function and the main method are using the scanner, and one closes it.\r\n\r\nHowever, you should not be taking user input in functions. This limits future use, say if you wanted to later add a GUI or make the same calculation based off a number not gotten from the user, then you would need rewrite the function. The function should take a int as a parameter, which the main method should get from the user. Only the main method and other methods directly relating to user input, such as the Scanner&#39;s methods, should read user input.","title":"How to create multiple scanner elements in Java?","body":"<p>First of all, it would make the question much easier to answer if you gave more information, such as the exception and its message, and maybe source code.</p>\n\n<p>If the exception is a NoSuchElementException, the direct problem is that the function is closing the Scanner. When the scanner is closed, it also closes the underlying ImputStream. This makes all other Scanner on that input invalid.</p>\n\n<p>If the exception is InputMismatchException, then the input is not an int.</p>\n\n<p>If the exception is IllegalStateException, then the scanner has been closed, this could happen is the function and the main method are using the scanner, and one closes it.</p>\n\n<p>However, you should not be taking user input in functions. This limits future use, say if you wanted to later add a GUI or make the same calculation based off a number not gotten from the user, then you would need rewrite the function. The function should take a int as a parameter, which the main method should get from the user. Only the main method and other methods directly relating to user input, such as the Scanner's methods, should read user input.</p>\n"},{"comments":[{"owner":{"account_id":2522887,"reputation":651,"user_id":2192878,"accept_rate":72,"display_name":"Jakkra"},"score":1,"creation_date":1405301181,"post_id":24728437,"comment_id":38358384,"body_markdown":"Why are you closing the same scanner two times?","body":"Why are you closing the same scanner two times?"},{"owner":{"account_id":4699330,"reputation":332,"user_id":3827688,"display_name":"g.carvalho97"},"score":0,"creation_date":1405301341,"post_id":24728437,"comment_id":38358413,"body_markdown":"I just implemented the scanner in his example class, no further code modification. But thanks anyway.","body":"I just implemented the scanner in his example class, no further code modification. But thanks anyway."}],"tags":[],"owner":{"account_id":4699330,"reputation":332,"user_id":3827688,"display_name":"g.carvalho97"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1405301382,"creation_date":1405301059,"answer_id":24728437,"question_id":24728256,"body_markdown":"I would suggest something like that:\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class dummy {\r\n        Scanner sc = new Scanner(System.in);\r\n\r\n        public static void main(String[] args) {\r\n\r\n            int buy;  \r\n\r\n            buy = sc.nextInt();\r\n            user = dummy2();\r\n            sc.close();\r\n\r\n        }\r\n\r\n        static boolean dummy2(){\r\n            //lets scan a string.\r\n            sc.nextLine();\r\n        }\r\n    }\r\n\r\nReusable objects! Isn&#39;t that nice?","title":"How to create multiple scanner elements in Java?","body":"<p>I would suggest something like that:</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class dummy {\n    Scanner sc = new Scanner(System.in);\n\n    public static void main(String[] args) {\n\n        int buy;  \n\n        buy = sc.nextInt();\n        user = dummy2();\n        sc.close();\n\n    }\n\n    static boolean dummy2(){\n        //lets scan a string.\n        sc.nextLine();\n    }\n}\n</code></pre>\n\n<p>Reusable objects! Isn't that nice?</p>\n"}],"owner":{"account_id":4533802,"reputation":115,"user_id":3683555,"accept_rate":100,"display_name":"user3683555"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1259,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1675010814,"accepted_answer_id":24728411,"answer_count":3,"score":0,"last_activity_date":1677760899,"creation_date":1405299106,"question_id":24728256,"body_markdown":"- I have a main function in which I use Scanner to read an integer from the console. \r\n- Inside this main function, we can access another function which also uses the Scanner to read an integer. \r\n- The program &quot;swings&quot; between these two functions many times.  \r\n\r\nThe problem is that the Java.util.Scanner throws an exception.  \r\nIs there any way to overcome this?\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class dummy {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tint buy;  \r\n    \t\tScanner sc = new Scanner(System.in);\r\n\r\n    \t\tbuy = sc.nextInt();\r\n    \t\tuser = dummy2();\r\n\r\n    \t\tsc.close();\r\n    \t}\r\n    \r\n    \tprivate static boolean dummy2() {\r\n    \t\tScanner sc1 = new Scanner(System.in);\r\n\r\n    \t\t// Code...\r\n\r\n    \t\tsc1.close();\r\n    \t}\r\n    }\r\n\r\n \r\n          \r\n\r\n","title":"How to create multiple scanner elements in Java?","body":"<ul>\n<li>I have a main function in which I use Scanner to read an integer from the console.</li>\n<li>Inside this main function, we can access another function which also uses the Scanner to read an integer.</li>\n<li>The program &quot;swings&quot; between these two functions many times.</li>\n</ul>\n<p>The problem is that the Java.util.Scanner throws an exception.<br />\nIs there any way to overcome this?</p>\n<pre><code>import java.util.Scanner;\n\npublic class dummy {\n\n    public static void main(String[] args) {\n        int buy;  \n        Scanner sc = new Scanner(System.in);\n\n        buy = sc.nextInt();\n        user = dummy2();\n\n        sc.close();\n    }\n\n    private static boolean dummy2() {\n        Scanner sc1 = new Scanner(System.in);\n\n        // Code...\n\n        sc1.close();\n    }\n}\n\n\n      \n</code></pre>\n"},{"tags":["java","spring-boot","locale"],"owner":{"account_id":26101587,"reputation":11,"user_id":19796933,"display_name":"sejin park"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677760780,"creation_date":1677754628,"question_id":75614507,"body_markdown":"[![enter image description here][1]][1]\r\n    [![enter image description here][2]][2]\r\n\r\n    import java.util.Locale;\r\n    \r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class localeResolverConfig {\r\n    \r\n        @Bean\r\n        public LocaleResolver localeResolver() {\r\n            AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();\r\n           \r\n            localeResolver.setDefaultLocale(Locale.US);\r\n            return localeResolver;\r\n        }\r\n    \r\n        @Bean\r\n        public ReloadableResourceBundleMessageSource messageSource(){\r\n            ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\r\n            messageSource.setBasename(&quot;classpath:messages/message&quot;);\r\n            messageSource.setDefaultEncoding(&quot;UTF-8&quot;);\r\n            messageSource.setCacheSeconds(180);\r\n    \r\n          \r\n            Locale.setDefault(Locale.US);\r\n    \r\n            return messageSource;\r\n        }\r\n    }\r\n\r\n\r\ni tried multi language text message using various properties\r\n\r\nthe picture upper is my properties.\r\n\r\n\r\nAdditionally, what i want is this code\r\n\r\n                @Override\r\n    public ResponseEntity&lt;ResponseDto&lt;VerifiedCodeResDto&gt;&gt; sendSMS(String userId, HttpServletRequest request, PhoneNumDto phoneNumDto) {\r\n        // from HTTP request\r\n        String countryCode = request.getHeader(&quot;Country-Code&quot;);\r\n    \r\n      \r\n        String languageCode = &quot;&quot;;\r\n        switch (countryCode) {\r\n            case &quot;EN&quot;:\r\n                languageCode = messageSource.getMessage(langEn, null, new Locale(&quot;en_US&quot;));\r\n                break;\r\n            case &quot;KR&quot;:\r\n                languageCode = messageSource.getMessage(langEn, null, new Locale(&quot;ko_KR&quot;));\r\n                break;\r\n            case &quot;JA&quot;:\r\n                languageCode = messageSource.getMessage(langEn, null, new Locale(&quot;ja_JP&quot;));\r\n                break;\r\n            case &quot;ZH&quot;:\r\n                languageCode = messageSource.getMessage(langEn, null, new Locale(&quot;zh_CN&quot;));\r\n                break;\r\n        }\r\n\r\n\r\ni think i can&#39;t use properties. keep going errors\r\n\r\ncould you please let me know how to user various properties with locale?\r\n\r\n    \r\n        org.springframework.context.NoSuchMessageException: No message found under code &#39;??????UBPEX? \r\n    ???: &#39; for locale &#39;ko_kr&#39;.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uDD6n.png\r\n  [2]: https://i.stack.imgur.com/yucxS.png\r\n\r\n","title":"how to use bundle properties with locale. No message found under code &#39;?????: &#39; for locale &#39;ko_kr&#39;","body":"<p><a href=\"https://i.stack.imgur.com/uDD6n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uDD6n.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/yucxS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yucxS.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.util.Locale;\n\n@Configuration\n@EnableWebMvc\npublic class localeResolverConfig {\n\n    @Bean\n    public LocaleResolver localeResolver() {\n        AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();\n       \n        localeResolver.setDefaultLocale(Locale.US);\n        return localeResolver;\n    }\n\n    @Bean\n    public ReloadableResourceBundleMessageSource messageSource(){\n        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\n        messageSource.setBasename(&quot;classpath:messages/message&quot;);\n        messageSource.setDefaultEncoding(&quot;UTF-8&quot;);\n        messageSource.setCacheSeconds(180);\n\n      \n        Locale.setDefault(Locale.US);\n\n        return messageSource;\n    }\n}\n</code></pre>\n<p>i tried multi language text message using various properties</p>\n<p>the picture upper is my properties.</p>\n<p>Additionally, what i want is this code</p>\n<pre><code>            @Override\npublic ResponseEntity&lt;ResponseDto&lt;VerifiedCodeResDto&gt;&gt; sendSMS(String userId, HttpServletRequest request, PhoneNumDto phoneNumDto) {\n    // from HTTP request\n    String countryCode = request.getHeader(&quot;Country-Code&quot;);\n\n  \n    String languageCode = &quot;&quot;;\n    switch (countryCode) {\n        case &quot;EN&quot;:\n            languageCode = messageSource.getMessage(langEn, null, new Locale(&quot;en_US&quot;));\n            break;\n        case &quot;KR&quot;:\n            languageCode = messageSource.getMessage(langEn, null, new Locale(&quot;ko_KR&quot;));\n            break;\n        case &quot;JA&quot;:\n            languageCode = messageSource.getMessage(langEn, null, new Locale(&quot;ja_JP&quot;));\n            break;\n        case &quot;ZH&quot;:\n            languageCode = messageSource.getMessage(langEn, null, new Locale(&quot;zh_CN&quot;));\n            break;\n    }\n</code></pre>\n<p>i think i can't use properties. keep going errors</p>\n<p>could you please let me know how to user various properties with locale?</p>\n<pre><code>    org.springframework.context.NoSuchMessageException: No message found under code '??????UBPEX? \n???: ' for locale 'ko_kr'.\n</code></pre>\n"},{"tags":["java","spring-boot","configuration"],"owner":{"account_id":27230621,"reputation":33,"user_id":20758387,"display_name":"CurvedHalo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677760661,"creation_date":1677760661,"question_id":75615515,"body_markdown":"TL;DR: I get config in json format, and wish to bind it dynamically to objects without explicitly doing this in code, similar to how spring .properties binds with configuration beans. How can I do this?\r\n\r\nI am restricted to storing external configuration for my application in a third party service, which exposes the configuration via RES, returning each entry in the config as a separate json object. I would like to load values to a map, similarly to how springs OOTB binding would work. Example:\r\n\r\nI wish to store configuration in maps, with a String Key and various Objects for the values, as shown below:\r\n```\r\nMap&lt;String, Integer&gt; myInteger;\r\nMap&lt;String, String&gt; myStrings;\r\n\r\n```\r\n\r\nIn .properties files, I would do this:\r\n```\r\n#MyIntegers\r\nconfig.myIntegers.key1=1\r\nconfig.myIntegers.key2=2\r\n\r\n#MyStrings\r\nconfig.myStrings.key1=Value1\r\nconfig.myStrings.key2=Value2\r\n\r\n```\r\n\r\nBut My config is being returned to the bean as a result of a REST call in the following way:\r\n```\r\n[\r\n\t{\r\n\t\t&quot;partition&quot;: &quot;myIntegers&quot;,\r\n\t\t&quot;key&quot;: &quot;key1&quot;,\r\n\t\t&quot;value&quot;: 1\r\n\t},\r\n\t{\r\n\t\t&quot;partition&quot;: &quot;myIntegers&quot;,\r\n\t\t&quot;key&quot;: &quot;key2&quot;,\r\n\t\t&quot;value&quot;: 2\r\n\t},\r\n\t{\r\n\t\t&quot;partition&quot;: &quot;myStrings&quot;,\r\n\t\t&quot;key&quot;: &quot;key1&quot;,\r\n\t\t&quot;value&quot;: &quot;value1&quot;\r\n\t},\r\n\t{\r\n\t\t&quot;partition&quot;: &quot;myStrings&quot;,\r\n\t\t&quot;key&quot;: &quot;key2&quot;,\r\n\t\t&quot;value&quot;: &quot;value2&quot;\r\n\t}\r\n]\r\n```\r\nI want to make this dynamic, so I don&#39;t need to explicitly write logic for each object name. I found this in the spring config documentation, and thats what I&#39;d like to replicate. \r\n\r\n&quot;A YAML file is parsed to a Java Map&lt;String,Object&gt; (like a JSON object), and Spring Boot flattens the map so that it is 1-level deep and has period-separated keys, a lot like people are used to with Properties files in Java.&quot;\r\n\r\nI have tried storing a map of &#39;partitionName&#39; and &#39;classType&#39; but this is still not allowing me to instantiate the object. ","title":"Springboot - dynamically binding from DTO to various config types","body":"<p>TL;DR: I get config in json format, and wish to bind it dynamically to objects without explicitly doing this in code, similar to how spring .properties binds with configuration beans. How can I do this?</p>\n<p>I am restricted to storing external configuration for my application in a third party service, which exposes the configuration via RES, returning each entry in the config as a separate json object. I would like to load values to a map, similarly to how springs OOTB binding would work. Example:</p>\n<p>I wish to store configuration in maps, with a String Key and various Objects for the values, as shown below:</p>\n<pre><code>Map&lt;String, Integer&gt; myInteger;\nMap&lt;String, String&gt; myStrings;\n\n</code></pre>\n<p>In .properties files, I would do this:</p>\n<pre><code>#MyIntegers\nconfig.myIntegers.key1=1\nconfig.myIntegers.key2=2\n\n#MyStrings\nconfig.myStrings.key1=Value1\nconfig.myStrings.key2=Value2\n\n</code></pre>\n<p>But My config is being returned to the bean as a result of a REST call in the following way:</p>\n<pre><code>[\n    {\n        &quot;partition&quot;: &quot;myIntegers&quot;,\n        &quot;key&quot;: &quot;key1&quot;,\n        &quot;value&quot;: 1\n    },\n    {\n        &quot;partition&quot;: &quot;myIntegers&quot;,\n        &quot;key&quot;: &quot;key2&quot;,\n        &quot;value&quot;: 2\n    },\n    {\n        &quot;partition&quot;: &quot;myStrings&quot;,\n        &quot;key&quot;: &quot;key1&quot;,\n        &quot;value&quot;: &quot;value1&quot;\n    },\n    {\n        &quot;partition&quot;: &quot;myStrings&quot;,\n        &quot;key&quot;: &quot;key2&quot;,\n        &quot;value&quot;: &quot;value2&quot;\n    }\n]\n</code></pre>\n<p>I want to make this dynamic, so I don't need to explicitly write logic for each object name. I found this in the spring config documentation, and thats what I'd like to replicate.</p>\n<p>&quot;A YAML file is parsed to a Java Map&lt;String,Object&gt; (like a JSON object), and Spring Boot flattens the map so that it is 1-level deep and has period-separated keys, a lot like people are used to with Properties files in Java.&quot;</p>\n<p>I have tried storing a map of 'partitionName' and 'classType' but this is still not allowing me to instantiate the object.</p>\n"},{"tags":["java","spring","inheritance"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1677759226,"post_id":75615246,"comment_id":133403277,"body_markdown":"step one: make those qualifiers unique. if you don&#39;t, there is no point at using them in the first place","body":"step one: make those qualifiers unique. if you don&#39;t, there is no point at using them in the first place"}],"answers":[{"tags":[],"owner":{"account_id":2729259,"reputation":6968,"user_id":2353403,"accept_rate":82,"display_name":"Coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677760587,"creation_date":1677760587,"answer_id":75615504,"question_id":75615246,"body_markdown":"Add the below property in application.properties to override the bean definition. \r\n\r\n    spring.main.allow-bean-definition-overriding=true","title":"How to replace the autowired bean?","body":"<p>Add the below property in application.properties to override the bean definition.</p>\n<pre><code>spring.main.allow-bean-definition-overriding=true\n</code></pre>\n"}],"owner":{"account_id":8753156,"reputation":796,"user_id":6545554,"accept_rate":56,"display_name":"Capslock10"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677760587,"creation_date":1677759083,"question_id":75615246,"body_markdown":"I have an external library with the **HumanService.class** and **ActionService.class** \r\n\r\n```\r\n@Service(&quot;humanService&quot;)\r\npublic class HumanService {\r\n\r\n    private ActionService actionService;\r\n\r\n    public HumanService(@Qualifier(&quot;actionService&quot;) ActionService actionService) {\r\n        this.actionService = actionService;\r\n    }\r\n\r\n    public void talk(){\r\n        actionService.talk();\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Service(&quot;actionService&quot;)\r\n@Slf4j\r\npublic class ActionService {\r\n\r\n    public void talk(){\r\n        log.info(&quot;Hi&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nOn the other hand, I have a Spring Boot Project that include the library. And I am trying to replace the bean **actionService** with the new class **ActionBService.class** for overriding the **talk()**.\r\n\r\n```\r\n@Service(&quot;actionService&quot;)\r\n@Slf4j\r\npublic class ActionBService extends ActionService{\r\n\r\n    @Override\r\n    public void talk() {\r\n        log.info(&quot;Hello Action B&quot;);\r\n    }\r\n}\r\n```\r\n\r\nHowever, this approach will hit the bean name ConflictingBeanDefinitionException. And I tried **@Primary**, it is still not work. How do I replace the existing bean easily for customising the function?\r\n\r\n","title":"How to replace the autowired bean?","body":"<p>I have an external library with the <strong>HumanService.class</strong> and <strong>ActionService.class</strong></p>\n<pre><code>@Service(&quot;humanService&quot;)\npublic class HumanService {\n\n    private ActionService actionService;\n\n    public HumanService(@Qualifier(&quot;actionService&quot;) ActionService actionService) {\n        this.actionService = actionService;\n    }\n\n    public void talk(){\n        actionService.talk();\n    }\n}\n</code></pre>\n<pre><code>@Service(&quot;actionService&quot;)\n@Slf4j\npublic class ActionService {\n\n    public void talk(){\n        log.info(&quot;Hi&quot;);\n    }\n\n}\n</code></pre>\n<p>On the other hand, I have a Spring Boot Project that include the library. And I am trying to replace the bean <strong>actionService</strong> with the new class <strong>ActionBService.class</strong> for overriding the <strong>talk()</strong>.</p>\n<pre><code>@Service(&quot;actionService&quot;)\n@Slf4j\npublic class ActionBService extends ActionService{\n\n    @Override\n    public void talk() {\n        log.info(&quot;Hello Action B&quot;);\n    }\n}\n</code></pre>\n<p>However, this approach will hit the bean name ConflictingBeanDefinitionException. And I tried <strong>@Primary</strong>, it is still not work. How do I replace the existing bean easily for customising the function?</p>\n"},{"tags":["java","jenkins","groovy","jenkins-pipeline","jenkins-groovy"],"answers":[{"comments":[{"owner":{"account_id":25403030,"reputation":43,"user_id":19212183,"display_name":"Nageswar Reddy"},"score":0,"creation_date":1677739441,"post_id":75607203,"comment_id":133398153,"body_markdown":"This is working as expected but all the lines in package.json is becoming as single line. Can you please suggest to avoid this.","body":"This is working as expected but all the lines in package.json is becoming as single line. Can you please suggest to avoid this."},{"owner":{"account_id":3103561,"reputation":13351,"user_id":2627018,"accept_rate":81,"display_name":"ycr"},"score":0,"creation_date":1677759647,"post_id":75607203,"comment_id":133403389,"body_markdown":"@NageswarReddy take a look at the updated answer.","body":"@NageswarReddy take a look at the updated answer."}],"tags":[],"owner":{"account_id":3103561,"reputation":13351,"user_id":2627018,"accept_rate":81,"display_name":"ycr"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677759625,"creation_date":1677692446,"answer_id":75607203,"question_id":75605778,"body_markdown":"Check the following code.\r\n\r\n```groovy\r\ndef data = readJSON file: &#39;package.json&#39;\r\nString val = &quot;${ReleaseNumber}&quot;\r\ndata[&#39;version&#39;] = val\r\nwriteJSON file: &#39;package.json&#39;, json: data,  overwrite: true\r\n\r\n```\r\n**Update with prettyfy**\r\n\r\nYou will have to import JsonOutput hence add `import groovy.json.JsonOutput` before the pipeline.\r\n\r\n```groovy\r\ndef data = readJSON file: &#39;package.json&#39;\r\nString val = &quot;${ReleaseNumber}&quot;\r\ndata[&#39;version&#39;] = val\r\ndef formtted = JsonOutput.prettyPrint(JsonOutput.toJson(data))\r\nwriteFile file: &#39;package.json&#39;, text: formtted,  overwrite: true\r\n```","title":"How to replace a string in a file using jenkins pipeline script","body":"<p>Check the following code.</p>\n<pre><code>def data = readJSON file: 'package.json'\nString val = &quot;${ReleaseNumber}&quot;\ndata['version'] = val\nwriteJSON file: 'package.json', json: data,  overwrite: true\n\n</code></pre>\n<p><strong>Update with prettyfy</strong></p>\n<p>You will have to import JsonOutput hence add <code>import groovy.json.JsonOutput</code> before the pipeline.</p>\n<pre><code>def data = readJSON file: 'package.json'\nString val = &quot;${ReleaseNumber}&quot;\ndata['version'] = val\ndef formtted = JsonOutput.prettyPrint(JsonOutput.toJson(data))\nwriteFile file: 'package.json', text: formtted,  overwrite: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3849976,"reputation":879,"user_id":3190389,"accept_rate":65,"display_name":"Wafeeq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677700647,"creation_date":1677700647,"answer_id":75608368,"question_id":75605778,"body_markdown":"***Jenkins*** plugin **Content Replace** can also be used with regular expressions like this\r\n\r\n    contentReplace(\r\n      configs: [\r\n        fileContentReplaceConfig(\r\n          configs: [\r\n            fileContentReplaceItemConfig(\r\n              search: &#39;(Version=)([0-9]+\\\\.[0-9]+\\\\.[0-9]+)&#39;,\r\n              replace: &#39;$11.0.${BUILD_ID}&#39;,\r\n              matchCount: 1,\r\n              verbose: false,\r\n            )\r\n          ],\r\n          fileEncoding: &#39;UTF-8&#39;,\r\n           &#39;versions.txt&#39;\r\n        )\r\n      ]\r\n    )","title":"How to replace a string in a file using jenkins pipeline script","body":"<p><em><strong>Jenkins</strong></em> plugin <strong>Content Replace</strong> can also be used with regular expressions like this</p>\n<pre><code>contentReplace(\n  configs: [\n    fileContentReplaceConfig(\n      configs: [\n        fileContentReplaceItemConfig(\n          search: '(Version=)([0-9]+\\\\.[0-9]+\\\\.[0-9]+)',\n          replace: '$11.0.${BUILD_ID}',\n          matchCount: 1,\n          verbose: false,\n        )\n      ],\n      fileEncoding: 'UTF-8',\n       'versions.txt'\n    )\n  ]\n)\n</code></pre>\n"}],"owner":{"account_id":25403030,"reputation":43,"user_id":19212183,"display_name":"Nageswar Reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1043,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75607203,"answer_count":2,"score":3,"last_activity_date":1677759625,"creation_date":1677684535,"question_id":75605778,"body_markdown":"I am trying to edit a file package.json and trying to replace a string(&quot;version:1&quot;) inside it using jenkins pipeline script. I have written below script but its not working. \r\n\r\n```\r\ndef readContent = readFile &#39;./package.json&#39;\r\n\r\nupdatedProp = readContent.replaceAll(&quot;version:.*&quot;,&quot;version:${env.ReleaseNumber}.${BUILD_NUMBER},&quot;)\r\n \r\nwriteFile file: &#39;./package.json&#39;, text: &quot;${updatedProp}&quot;\r\n\r\n```\r\n\r\npackage.json file contains below content. \r\n\r\n```\r\n{\r\n    &quot;name&quot;: &quot;application&quot;,\r\n    &quot;version&quot;: &quot;1.0.0&quot;\r\n}\r\n```\r\n\r\nI request to correct me and help me building the code. ","title":"How to replace a string in a file using jenkins pipeline script","body":"<p>I am trying to edit a file package.json and trying to replace a string(&quot;version:1&quot;) inside it using jenkins pipeline script. I have written below script but its not working.</p>\n<pre><code>def readContent = readFile './package.json'\n\nupdatedProp = readContent.replaceAll(&quot;version:.*&quot;,&quot;version:${env.ReleaseNumber}.${BUILD_NUMBER},&quot;)\n \nwriteFile file: './package.json', text: &quot;${updatedProp}&quot;\n\n</code></pre>\n<p>package.json file contains below content.</p>\n<pre><code>{\n    &quot;name&quot;: &quot;application&quot;,\n    &quot;version&quot;: &quot;1.0.0&quot;\n}\n</code></pre>\n<p>I request to correct me and help me building the code.</p>\n"},{"tags":["java","java-11","anonymous-inner-class"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":2,"creation_date":1677665458,"post_id":75601836,"comment_id":133381096,"body_markdown":"Only by calling it from within `park()`","body":"Only by calling it from within <code>park()</code>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1677673215,"post_id":75601836,"comment_id":133383215,"body_markdown":"1) You could call `start` using reflection.  2) You could call `start` in a context where the static type of the the subclass of `Vehicle` hasn&#39;t been obscured; e.g. by assigning to a variable of type `Vehicle`.  3) Just don&#39;t do it.  4) See the duplicate link for more information.","body":"1) You could call <code>start</code> using reflection.  2) You could call <code>start</code> in a context where the static type of the the subclass of <code>Vehicle</code> hasn&#39;t been obscured; e.g. by assigning to a variable of type <code>Vehicle</code>.  3) Just don&#39;t do it.  4) See the duplicate link for more information."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1677759605,"post_id":75601836,"comment_id":133403377,"body_markdown":"Just declare `v2` using `var`, i.e. `var v2 = new Vehicle() { …`","body":"Just declare <code>v2</code> using <code>var</code>, i.e. <code>var v2 = new Vehicle() { …</code>"}],"owner":{"account_id":16795812,"reputation":1,"user_id":12142290,"display_name":"Benul Jayasekara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677673033,"answer_count":0,"score":0,"last_activity_date":1677759560,"creation_date":1677663283,"question_id":75601836,"body_markdown":"```\r\nclass Vehicle{\r\n    public void park(){\r\n        //Do something\r\n    }\r\n}\r\nclass Example{\r\n    public static void main(String args[]){\r\n\tVehicle v1=new Vehicle();\r\n\tVehicle v2=new Vehicle(){\r\n\t    public void park(){\r\n\t        //Do something\r\n\t    }\r\n\t    public void start(){\r\n\t        //Do something\r\n\t    }\r\n\t    //start();\r\n\t}/*.start()*/;\r\n    //v2.start();\r\n    }\r\n}\r\n```\r\n\r\n//All of those calling for start functions are illegal. Is there a possible way to access start function?","title":"Is there any possible way to access the anonymous inner class method? If no why Java compiler allowing to create this method? In java 11","body":"<pre><code>class Vehicle{\n    public void park(){\n        //Do something\n    }\n}\nclass Example{\n    public static void main(String args[]){\n    Vehicle v1=new Vehicle();\n    Vehicle v2=new Vehicle(){\n        public void park(){\n            //Do something\n        }\n        public void start(){\n            //Do something\n        }\n        //start();\n    }/*.start()*/;\n    //v2.start();\n    }\n}\n</code></pre>\n<p>//All of those calling for start functions are illegal. Is there a possible way to access start function?</p>\n"},{"tags":["java","jdbc","hsqldb"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1677242319,"post_id":75556537,"comment_id":133303960,"body_markdown":"Sysadmin tasks like this are normally done with scripting. Why use Java at all?","body":"Sysadmin tasks like this are normally done with scripting. Why use Java at all?"}],"answers":[{"comments":[{"owner":{"account_id":13504541,"reputation":99,"user_id":10910863,"display_name":"gourabix"},"score":0,"creation_date":1677596102,"post_id":75558100,"comment_id":133366694,"body_markdown":"`PERFORM EXPORT SCRIPT FOR TABLE` command backs up only the data. How can I get the structure for that table only? Also, these commands will work on a table-by-table basis. How can I specify multiple table names at once?","body":"<code>PERFORM EXPORT SCRIPT FOR TABLE</code> command backs up only the data. How can I get the structure for that table only? Also, these commands will work on a table-by-table basis. How can I specify multiple table names at once?"},{"owner":{"account_id":216064,"reputation":24129,"user_id":471070,"display_name":"fredt"},"score":0,"creation_date":1677685020,"post_id":75558100,"comment_id":133387206,"body_markdown":"Write a Java program to read a saved script file and copy the CREATE TABLE and INSERT statements for selected tables to another file.","body":"Write a Java program to read a saved script file and copy the CREATE TABLE and INSERT statements for selected tables to another file."}],"tags":[],"owner":{"account_id":216064,"reputation":24129,"user_id":471070,"display_name":"fredt"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677250938,"creation_date":1677250938,"answer_id":75558100,"question_id":75556537,"body_markdown":"There is also the PERFORM EXPORT SCRIPT FOR TABLE ... and PERFORM IMPORT SCRIPT DATA .. commands. The first command can export the contents of a single table as SQL statements. The second command can import the contents of a saved export.\r\n\r\nSee the Guide: http://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_data_management_statements  ","title":"How to backup and restore specific tables in an HSQLDB database with Java code","body":"<p>There is also the PERFORM EXPORT SCRIPT FOR TABLE ... and PERFORM IMPORT SCRIPT DATA .. commands. The first command can export the contents of a single table as SQL statements. The second command can import the contents of a saved export.</p>\n<p>See the Guide: <a href=\"http://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_data_management_statements\" rel=\"nofollow noreferrer\">http://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_data_management_statements</a></p>\n"}],"owner":{"account_id":13504541,"reputation":99,"user_id":10910863,"display_name":"gourabix"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75558100,"answer_count":1,"score":0,"last_activity_date":1677758900,"creation_date":1677241455,"question_id":75556537,"body_markdown":"I want to backup specific tables in an HSQLDB database. We have 50+ tables in our database, but I want approximately 12 of those to be backed up and then restored, including data (not table structure only).\r\n\r\nI want to achieve this using Java JDBC code. It would be great if I can specify some table names in the command, and I get the data as well as the table structure (DDL) in the file.\r\n\r\nFrom the [HSQLDB docs][1], I can see that it&#39;s possible to backup the entirety of the database in a `.tar` or `.tar.gz` file. But that&#39;s not our requirement.\r\n\r\nHere are some commands I have tried:\r\n\r\n 1. `PERFORM EXPORT SCRIPT FOR DATABASE`\r\n 2. `PERFORM EXPORT SCRIPT FOR TABLE &lt;table name&gt; DATA`\r\n 3. `SCRIPT`\r\n\r\n  [1]: https://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_backup","title":"How to backup and restore specific tables in an HSQLDB database with Java code","body":"<p>I want to backup specific tables in an HSQLDB database. We have 50+ tables in our database, but I want approximately 12 of those to be backed up and then restored, including data (not table structure only).</p>\n<p>I want to achieve this using Java JDBC code. It would be great if I can specify some table names in the command, and I get the data as well as the table structure (DDL) in the file.</p>\n<p>From the <a href=\"https://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_backup\" rel=\"nofollow noreferrer\">HSQLDB docs</a>, I can see that it's possible to backup the entirety of the database in a <code>.tar</code> or <code>.tar.gz</code> file. But that's not our requirement.</p>\n<p>Here are some commands I have tried:</p>\n<ol>\n<li><code>PERFORM EXPORT SCRIPT FOR DATABASE</code></li>\n<li><code>PERFORM EXPORT SCRIPT FOR TABLE &lt;table name&gt; DATA</code></li>\n<li><code>SCRIPT</code></li>\n</ol>\n"},{"tags":["java","units-of-measurement","jsr"],"owner":{"account_id":1096096,"reputation":745,"user_id":1089668,"accept_rate":60,"display_name":"zambotn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677758497,"creation_date":1677757487,"question_id":75614978,"body_markdown":"I&#39;m using JSR-385 with the RI (Indriya). I have a `Quantity` `q1` and defined as such:\r\n```java\r\nQuantityFormat qf = ServiceProvider.current().getFormatService().getQuantityFormat();\r\nQuantity q1 = qf.parse(&quot;10 J&quot;); // Here strings are constants but they are coming from user input\r\n                                  // The Unit of Measure can/will vary.\r\n```\r\n**Now I want to understand what `Quantity` (i.e. what interface in `javax.measure.quantity`) `q1` is measuring, if any.**\r\n\r\nI can retrieve `Dimension` but that is not the same thing:\r\n```java\r\nQuantity q2. qf.parse(&quot;10 N*m&quot;);\r\nSystem.stdout.println(q1.compareTo(q2)); // prints &quot;0&quot;, but torque and energy are not the same thing\r\n```\r\n\r\nAs additional &quot;free rant&quot;, the API of `Dimension.getBaseDimensions()` are so inconsistent Instead of returning always a `Map&lt;Dimension, Integer&gt;` they just do so when the Dimension is not related to a base dimension, in which case it returns `null` (it could have more consistently still return the Map containing a single `Map.Entry`), except in the case of `UnitDimension.NONE` when it follows again the expected behavior and returns an empty `Map`.","title":"Retreive the Quantity used to define a Unit in Java Unit of Measurement API (JSR 385)","body":"<p>I'm using JSR-385 with the RI (Indriya). I have a <code>Quantity</code> <code>q1</code> and defined as such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>QuantityFormat qf = ServiceProvider.current().getFormatService().getQuantityFormat();\nQuantity q1 = qf.parse(&quot;10 J&quot;); // Here strings are constants but they are coming from user input\n                                  // The Unit of Measure can/will vary.\n</code></pre>\n<p><strong>Now I want to understand what <code>Quantity</code> (i.e. what interface in <code>javax.measure.quantity</code>) <code>q1</code> is measuring, if any.</strong></p>\n<p>I can retrieve <code>Dimension</code> but that is not the same thing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Quantity q2. qf.parse(&quot;10 N*m&quot;);\nSystem.stdout.println(q1.compareTo(q2)); // prints &quot;0&quot;, but torque and energy are not the same thing\n</code></pre>\n<p>As additional &quot;free rant&quot;, the API of <code>Dimension.getBaseDimensions()</code> are so inconsistent Instead of returning always a <code>Map&lt;Dimension, Integer&gt;</code> they just do so when the Dimension is not related to a base dimension, in which case it returns <code>null</code> (it could have more consistently still return the Map containing a single <code>Map.Entry</code>), except in the case of <code>UnitDimension.NONE</code> when it follows again the expected behavior and returns an empty <code>Map</code>.</p>\n"},{"tags":["java","spring","dependency-injection","mapstruct"],"owner":{"account_id":27225904,"reputation":3,"user_id":20754419,"display_name":"go_with_christ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677759081,"answer_count":0,"score":0,"last_activity_date":1677758011,"creation_date":1677757903,"question_id":75615043,"body_markdown":"I am writing a mapper with basic `dto` -&gt; `entity` and vice versa. For a specific field, `response` , I need to invoke Gson&#39;s `toJson()` and `fromJson()` methods. By using an expression I was able to generate the needed code in the impl class. However I can&#39;t find a way to &#39;tell&#39; mapstruct to inject the bean I need.\r\n\r\n\r\n\r\n\r\nSample code :\r\n```java\r\n@Mapper(componentModel = SPRING, injectionStrategy = InjectionStrategy.CONSTRUCTOR)\r\npublic interface ConfigurationMapper {\r\n    \r\n    @Mapping(target = &quot;response&quot;, expression = &quot;java(gson.toJson(configurationDTO.getResponse()))&quot;)\r\n    MockConfiguration toEntity(ConfigurationDTO configurationDTO);\r\n\r\n    @Mapping(target = &quot;response&quot;, expression = &quot;java(gson.fromJson(configuration.getResponse(),Object.class))&quot;)\r\n    ConfigurationDTO toDTO(MockConfiguration configuration);\r\n\r\n    List&lt;ConfigurationDTO&gt; toDTOList(Collection&lt;MockConfiguration&gt; configurations);\r\n}\r\n```\r\nThe Gson config\r\n```java\r\n@Configuration\r\npublic class MapperConfiguration {\r\n\r\n    @Bean\r\n    public  Gson gson() {\r\n        return new GsonBuilder().setPrettyPrinting().disableHtmlEscaping()\r\n                .setDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssz&quot;).registerTypeAdapter(LocalDateTime.class, new LocalDateAdapter())\r\n                .create();\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@Generated(\r\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\r\n    comments = &quot;version: 1.4.2.Final, compiler: javac, environment: Java 11.0.17 (Amazon.com Inc.)&quot;\r\n)\r\n@Component\r\npublic class ConfigurationMapperImpl implements ConfigurationMapper {\r\n\r\n// I want this to be generated here\r\n    @Autowired\r\n    Gson gson;\r\n//\r\n    @Override\r\n    public MockConfiguration toEntity(ConfigurationDTO configurationDTO) {\r\n        if ( configurationDTO == null ) {\r\n            return null;\r\n        }\r\n\r\n        MockConfiguration mockConfiguration = new MockConfiguration();\r\n\r\n        mockConfiguration.setId( configurationDTO.getId() );\r\n        mockConfiguration.setPath( configurationDTO.getPath() );\r\n        mockConfiguration.setStatusCode( configurationDTO.getStatusCode() );\r\n        mockConfiguration.setMethod( configurationDTO.getMethod() );\r\n\r\n        mockConfiguration.setResponse( gson.toJson(configurationDTO.getResponse()) );\r\n\r\n        return mockConfiguration;\r\n    }\r\n    .\r\n    .\r\n    .\r\n}\r\n```\r\n\r\nAny ideas? Don&#39;t mind the `InjectionStrategy` etc in my `Mapper`, I was trying things that maybe would generate the injection I needed.","title":"How do I tell Mapstruct to inject a Bean on the generated class?","body":"<p>I am writing a mapper with basic <code>dto</code> -&gt; <code>entity</code> and vice versa. For a specific field, <code>response</code> , I need to invoke Gson's <code>toJson()</code> and <code>fromJson()</code> methods. By using an expression I was able to generate the needed code in the impl class. However I can't find a way to 'tell' mapstruct to inject the bean I need.</p>\n<p>Sample code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = SPRING, injectionStrategy = InjectionStrategy.CONSTRUCTOR)\npublic interface ConfigurationMapper {\n    \n    @Mapping(target = &quot;response&quot;, expression = &quot;java(gson.toJson(configurationDTO.getResponse()))&quot;)\n    MockConfiguration toEntity(ConfigurationDTO configurationDTO);\n\n    @Mapping(target = &quot;response&quot;, expression = &quot;java(gson.fromJson(configuration.getResponse(),Object.class))&quot;)\n    ConfigurationDTO toDTO(MockConfiguration configuration);\n\n    List&lt;ConfigurationDTO&gt; toDTOList(Collection&lt;MockConfiguration&gt; configurations);\n}\n</code></pre>\n<p>The Gson config</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MapperConfiguration {\n\n    @Bean\n    public  Gson gson() {\n        return new GsonBuilder().setPrettyPrinting().disableHtmlEscaping()\n                .setDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ssz&quot;).registerTypeAdapter(LocalDateTime.class, new LocalDateAdapter())\n                .create();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    comments = &quot;version: 1.4.2.Final, compiler: javac, environment: Java 11.0.17 (Amazon.com Inc.)&quot;\n)\n@Component\npublic class ConfigurationMapperImpl implements ConfigurationMapper {\n\n// I want this to be generated here\n    @Autowired\n    Gson gson;\n//\n    @Override\n    public MockConfiguration toEntity(ConfigurationDTO configurationDTO) {\n        if ( configurationDTO == null ) {\n            return null;\n        }\n\n        MockConfiguration mockConfiguration = new MockConfiguration();\n\n        mockConfiguration.setId( configurationDTO.getId() );\n        mockConfiguration.setPath( configurationDTO.getPath() );\n        mockConfiguration.setStatusCode( configurationDTO.getStatusCode() );\n        mockConfiguration.setMethod( configurationDTO.getMethod() );\n\n        mockConfiguration.setResponse( gson.toJson(configurationDTO.getResponse()) );\n\n        return mockConfiguration;\n    }\n    .\n    .\n    .\n}\n</code></pre>\n<p>Any ideas? Don't mind the <code>InjectionStrategy</code> etc in my <code>Mapper</code>, I was trying things that maybe would generate the injection I needed.</p>\n"},{"tags":["java","macos","file-writing","appstore-sandbox","entitlements"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1677758576,"post_id":75615065,"comment_id":133403079,"body_markdown":"&quot;I don&#39;t think it&#39;s unreasonable for an app to read and write files in its installation directory where all its files are put at installation.&quot; You may think so, but Windows, as one OS, does not allow user write access to any installation directory.  All user read/write files must be located under the System user.home.  This separation is for Windows security.  I&#39;m not familiar with Macs, but what you posted reads similarly.","body":"&quot;I don&#39;t think it&#39;s unreasonable for an app to read and write files in its installation directory where all its files are put at installation.&quot; You may think so, but Windows, as one OS, does not allow user write access to any installation directory.  All user read/write files must be located under the System user.home.  This separation is for Windows security.  I&#39;m not familiar with Macs, but what you posted reads similarly."},{"owner":{"account_id":5219222,"reputation":93,"user_id":4173204,"display_name":"Zyxl"},"score":0,"creation_date":1677758850,"post_id":75615065,"comment_id":133403154,"body_markdown":"@GilbertLeBlanc I haven&#39;t found that to be an issue on Windows (my main OS). Probably because I have the default installation directory to be within the user&#39;s home. Haven&#39;t had any user complaints about it so far.","body":"@GilbertLeBlanc I haven&#39;t found that to be an issue on Windows (my main OS). Probably because I have the default installation directory to be within the user&#39;s home. Haven&#39;t had any user complaints about it so far."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1677759053,"post_id":75615065,"comment_id":133403220,"body_markdown":"You&#39;re probably signed on to your Windows system as an administrator, as I am.  I said user access in my previous comment.","body":"You&#39;re probably signed on to your Windows system as an administrator, as I am.  I said user access in my previous comment."}],"owner":{"account_id":5219222,"reputation":93,"user_id":4173204,"display_name":"Zyxl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677758005,"creation_date":1677758005,"question_id":75615065,"body_markdown":"I made an OS-independent Java application with installers for each OS (I used install4j), and I want to put a Mac installer on the app store. However, that means the app has to be sandboxed and there are restrictions on file access.\r\n\r\nMy installers let the user choose an installation directory and then the .jar file and other user-editable files (settings etc.) are extracted from the installer into that folder. The application then has to be able to read and write files in this installation directory. For app store submission I have install4j produce a .pkg which installs the sandboxed app fine, but then when I run the sandboxed app it fails when it tries to write to the installation directory. Without the sandbox it works fine.\r\n\r\nFrom what I&#39;ve read, each sandboxed app has a &quot;container&quot; in which it has read and write permissions. It says [here][1]:\r\n&gt; Use the FileManager method url(for:in:appropriateFor:create:) to find common directories for user documents, scripts, and supporting files, as it returns a location within the app’s container for a sandboxed app.\r\n\r\nBut in Java there is no such method, so how am I supposed to find the app&#39;s container without just assuming where it will be?\r\n\r\nAlso, I would prefer my application code not to worry about the OS it is running on, so it would be good if the installation directory could be used for every OS. I don&#39;t think it&#39;s unreasonable for an app to read and write files in its installation directory where all its files are put at installation. Is there an entitlement to allow that? `com.apple.security.files.user-selected.read-write` didn&#39;t do the job when I tried it. Nor does it seem any of the other file entitlements listed [here][2] would work, except the all files entitlement, but that&#39;s deprecated.\r\n\r\n  [1]: https://developer.apple.com/documentation/security/app_sandbox/protecting_user_data_with_app_sandbox\r\n  [2]: https://developer.apple.com/documentation/security/app_sandbox","title":"Write to installation folder with Java app sandboxed on mac","body":"<p>I made an OS-independent Java application with installers for each OS (I used install4j), and I want to put a Mac installer on the app store. However, that means the app has to be sandboxed and there are restrictions on file access.</p>\n<p>My installers let the user choose an installation directory and then the .jar file and other user-editable files (settings etc.) are extracted from the installer into that folder. The application then has to be able to read and write files in this installation directory. For app store submission I have install4j produce a .pkg which installs the sandboxed app fine, but then when I run the sandboxed app it fails when it tries to write to the installation directory. Without the sandbox it works fine.</p>\n<p>From what I've read, each sandboxed app has a &quot;container&quot; in which it has read and write permissions. It says <a href=\"https://developer.apple.com/documentation/security/app_sandbox/protecting_user_data_with_app_sandbox\" rel=\"nofollow noreferrer\">here</a>:</p>\n<blockquote>\n<p>Use the FileManager method url(for:in:appropriateFor:create:) to find common directories for user documents, scripts, and supporting files, as it returns a location within the app’s container for a sandboxed app.</p>\n</blockquote>\n<p>But in Java there is no such method, so how am I supposed to find the app's container without just assuming where it will be?</p>\n<p>Also, I would prefer my application code not to worry about the OS it is running on, so it would be good if the installation directory could be used for every OS. I don't think it's unreasonable for an app to read and write files in its installation directory where all its files are put at installation. Is there an entitlement to allow that? <code>com.apple.security.files.user-selected.read-write</code> didn't do the job when I tried it. Nor does it seem any of the other file entitlements listed <a href=\"https://developer.apple.com/documentation/security/app_sandbox\" rel=\"nofollow noreferrer\">here</a> would work, except the all files entitlement, but that's deprecated.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":2,"creation_date":1677362359,"post_id":75568674,"comment_id":133324023,"body_markdown":"What URL do you call? Where is your `@EnableWebSecurity`? Why is your class not public?","body":"What URL do you call? Where is your <code>@EnableWebSecurity</code>? Why is your class not public?"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1677363109,"post_id":75568674,"comment_id":133324102,"body_markdown":"`I wonder what&#39;s the issue` well show us your full spring security debug logs so we can see what is actually happening under the hood.","body":"<code>I wonder what&#39;s the issue</code> well show us your full spring security debug logs so we can see what is actually happening under the hood."},{"owner":{"account_id":15106724,"reputation":508,"user_id":16163044,"display_name":"Sandro J"},"score":0,"creation_date":1677363581,"post_id":75568674,"comment_id":133324168,"body_markdown":"@dur I am calling the default url for sure `/`. I may have added `EnableWebSecurity` annotation, but it&#39;s added anyway. Classes are not public because I placed them in the same file, so person who wants to help me can just copy and easily run the app. Note that it&#39;s about the spring version.","body":"@dur I am calling the default url for sure <code>&#47;</code>. I may have added <code>EnableWebSecurity</code> annotation, but it&#39;s added anyway. Classes are not public because I placed them in the same file, so person who wants to help me can just copy and easily run the app. Note that it&#39;s about the spring version."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1677364055,"post_id":75568674,"comment_id":133324223,"body_markdown":"*I may have added EnableWebSecurity annotation, but it&#39;s added anyway.* I don&#39;t see it. You have to add it. Your code cannot work without it.","body":"<i>I may have added EnableWebSecurity annotation, but it&#39;s added anyway.</i> I don&#39;t see it. You have to add it. Your code cannot work without it."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1677364116,"post_id":75568674,"comment_id":133324232,"body_markdown":"My first guess is that your filter chain is never build. To be sure add a log or breakpoint. *I am calling the default url for sure /* Then you shouldn&#39;t get login page. This URL is permitted. That&#39;s another reason for my guess.","body":"My first guess is that your filter chain is never build. To be sure add a log or breakpoint. <i>I am calling the default url for sure /</i> Then you shouldn&#39;t get login page. This URL is permitted. That&#39;s another reason for my guess."},{"owner":{"account_id":15106724,"reputation":508,"user_id":16163044,"display_name":"Sandro J"},"score":0,"creation_date":1677364285,"post_id":75568674,"comment_id":133324251,"body_markdown":"@dur I mean it&#39;s added anyway by Spring. I tried it manually as well and didn&#39;t help. What place would be best to add a breakpoint?","body":"@dur I mean it&#39;s added anyway by Spring. I tried it manually as well and didn&#39;t help. What place would be best to add a breakpoint?"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1677365661,"post_id":75568674,"comment_id":133324426,"body_markdown":"Why do you think that Spring will add it? AFAIK Spring doesn&#39;t do that. Your filter chain has only one line, there you should add the breakpoint.","body":"Why do you think that Spring will add it? AFAIK Spring doesn&#39;t do that. Your filter chain has only one line, there you should add the breakpoint."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1677406742,"post_id":75568674,"comment_id":133328131,"body_markdown":"Once again, where are your debug logs?","body":"Once again, where are your debug logs?"},{"owner":{"account_id":7134819,"reputation":5068,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1677605878,"post_id":75568674,"comment_id":133369776,"body_markdown":"Can you try adding `authorizeHttpRequests().dispatcherTypeMatchers(DispatcherType.FORWARD).permitAll()` and tell if it works? https://docs.spring.io/spring-security/reference/5.8/migration/servlet/authorization.html#_permit_forward_when_using_spring_mvc","body":"Can you try adding <code>authorizeHttpRequests().dispatcherTypeMatchers(DispatcherTyp&zwnj;&#8203;e.FORWARD).permitAll&zwnj;&#8203;()</code> and tell if it works? <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/authorization.html#_permit_forward_when_using_spring_mvc\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/5.8/migration/servl&zwnj;&#8203;et/&hellip;</a>"},{"owner":{"account_id":15106724,"reputation":508,"user_id":16163044,"display_name":"Sandro J"},"score":0,"creation_date":1677607952,"post_id":75568674,"comment_id":133370367,"body_markdown":"@MarcusHertdaCoregio Nope :( it didn&#39;t help.","body":"@MarcusHertdaCoregio Nope :( it didn&#39;t help."}],"answers":[{"tags":[],"owner":{"account_id":17319363,"reputation":48,"user_id":12545156,"display_name":"Kehrlann"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677757903,"creation_date":1677755195,"answer_id":75614594,"question_id":75568674,"body_markdown":"This seems fixed in Spring Boot `3.0.3` ; broken in `3.0.0` through `3.0.2`.\r\n\r\nEDIT: The fix came in Spring Security `6.0.2`, when [DefaultSavedRequest.doesRequestMatch does not work, when matchingRequestParameterName is set](https://github.com/spring-projects/spring-security/issues/12665) was fixed.","title":"Spring Boot 3 redirection issue in secured POST method","body":"<p>This seems fixed in Spring Boot <code>3.0.3</code> ; broken in <code>3.0.0</code> through <code>3.0.2</code>.</p>\n<p>EDIT: The fix came in Spring Security <code>6.0.2</code>, when <a href=\"https://github.com/spring-projects/spring-security/issues/12665\" rel=\"nofollow noreferrer\">DefaultSavedRequest.doesRequestMatch does not work, when matchingRequestParameterName is set</a> was fixed.</p>\n"}],"owner":{"account_id":15106724,"reputation":508,"user_id":16163044,"display_name":"Sandro J"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":313,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75614594,"answer_count":1,"score":0,"last_activity_date":1677757903,"creation_date":1677361817,"question_id":75568674,"body_markdown":"I have this single file in my sample Spring application\r\n\r\n```java\r\n//skipped imports\r\n\r\n@SpringBootApplication\r\n@Controller\r\npublic class SpringMvcExampleApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(SpringMvcExampleApplication.class, args);\r\n    }\r\n}\r\n\r\n@RestController\r\nclass IndexController {\r\n    @GetMapping(&quot;/&quot;)\r\n    public String index() {\r\n        return &quot;&quot;&quot;\r\n                &lt;form method=&quot;post&quot; action=&quot;/home/1234&quot;&gt;\r\n                    &lt;input type=&quot;submit&quot; value=&quot;post&quot;/&gt;\r\n                &lt;/form&gt;\r\n                &quot;&quot;&quot;;\r\n    }\r\n}\r\n\r\n@Controller\r\n@RequestMapping(&quot;/home&quot;)\r\nclass HomeController {\r\n    @GetMapping\r\n    @ResponseBody\r\n    String homeGet() {\r\n        return &quot;&lt;h1&gt;Hello&lt;/h1&gt;&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/{id}&quot;)\r\n    String homePost(@PathVariable String id) {\r\n        return &quot;redirect:/home&quot;;\r\n    }\r\n}\r\n\r\n@Configuration\r\nclass Config {\r\n    @Bean\r\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .formLogin()\r\n                .and()\r\n                .csrf(cfg -&gt; cfg.disable())\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .requestMatchers(&quot;/&quot;).permitAll()\r\n                        .requestMatchers(&quot;/home/**&quot;).authenticated()\r\n                )\r\n                .build();\r\n    }\r\n}\r\n```\r\nI try to have default page - with button which requires user to be logged in, after clicking the button you are redirected to a secured page, if you are not logged in - you should log in and then be redirected.\r\n\r\nIn Spring Boot parent version 3 - I click to the button, login page shows up (expected), I enter credentials (which is &quot;user&quot; and generated password) and then I get 403 error code.\r\n\r\nIn Spring Boot parent version 2 - I change `requestMatchers` call to `mvcMatchers` (because I have to) and everything works, I normally get redirected to the secured page.\r\n\r\nPlease notice the use of path variable, I think this is important as well.\r\n\r\nI wonder what&#39;s the issue. It looks like a bug, because technically, it&#39;s the same code, because `requestMatchers` are replacement to `mvcMatchers`.\r\n\r\nAlso note that this is a simplified version of what I have in larger project and I tried to simplify the problem as much as I could.","title":"Spring Boot 3 redirection issue in secured POST method","body":"<p>I have this single file in my sample Spring application</p>\n<pre class=\"lang-java prettyprint-override\"><code>//skipped imports\n\n@SpringBootApplication\n@Controller\npublic class SpringMvcExampleApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringMvcExampleApplication.class, args);\n    }\n}\n\n@RestController\nclass IndexController {\n    @GetMapping(&quot;/&quot;)\n    public String index() {\n        return &quot;&quot;&quot;\n                &lt;form method=&quot;post&quot; action=&quot;/home/1234&quot;&gt;\n                    &lt;input type=&quot;submit&quot; value=&quot;post&quot;/&gt;\n                &lt;/form&gt;\n                &quot;&quot;&quot;;\n    }\n}\n\n@Controller\n@RequestMapping(&quot;/home&quot;)\nclass HomeController {\n    @GetMapping\n    @ResponseBody\n    String homeGet() {\n        return &quot;&lt;h1&gt;Hello&lt;/h1&gt;&quot;;\n    }\n\n    @PostMapping(&quot;/{id}&quot;)\n    String homePost(@PathVariable String id) {\n        return &quot;redirect:/home&quot;;\n    }\n}\n\n@Configuration\nclass Config {\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http\n                .formLogin()\n                .and()\n                .csrf(cfg -&gt; cfg.disable())\n                .authorizeHttpRequests(authorize -&gt; authorize\n                        .requestMatchers(&quot;/&quot;).permitAll()\n                        .requestMatchers(&quot;/home/**&quot;).authenticated()\n                )\n                .build();\n    }\n}\n</code></pre>\n<p>I try to have default page - with button which requires user to be logged in, after clicking the button you are redirected to a secured page, if you are not logged in - you should log in and then be redirected.</p>\n<p>In Spring Boot parent version 3 - I click to the button, login page shows up (expected), I enter credentials (which is &quot;user&quot; and generated password) and then I get 403 error code.</p>\n<p>In Spring Boot parent version 2 - I change <code>requestMatchers</code> call to <code>mvcMatchers</code> (because I have to) and everything works, I normally get redirected to the secured page.</p>\n<p>Please notice the use of path variable, I think this is important as well.</p>\n<p>I wonder what's the issue. It looks like a bug, because technically, it's the same code, because <code>requestMatchers</code> are replacement to <code>mvcMatchers</code>.</p>\n<p>Also note that this is a simplified version of what I have in larger project and I tried to simplify the problem as much as I could.</p>\n"},{"tags":["java","kubernetes","hadoop","hive"],"comments":[{"owner":{"account_id":7953524,"reputation":351,"user_id":6003629,"accept_rate":33,"display_name":"jimfawkes"},"score":0,"creation_date":1678374495,"post_id":75615011,"comment_id":133523402,"body_markdown":"Hi, I have the same issue, any chance you solved it by now?","body":"Hi, I have the same issue, any chance you solved it by now?"},{"owner":{"account_id":6353459,"reputation":4979,"user_id":4931657,"accept_rate":70,"display_name":"jake wong"},"score":0,"creation_date":1678377175,"post_id":75615011,"comment_id":133524325,"body_markdown":"Yea, it seems like the xml in the configmap wasnt properly aligned. so once I aligned the xml properly in the configmap, it worked fine. because yaml is tab based - gotta make sure the configmap data.xml stuffs are also aligned properly. hope that makes sense","body":"Yea, it seems like the xml in the configmap wasnt properly aligned. so once I aligned the xml properly in the configmap, it worked fine. because yaml is tab based - gotta make sure the configmap data.xml stuffs are also aligned properly. hope that makes sense"}],"owner":{"account_id":6353459,"reputation":4979,"user_id":4931657,"accept_rate":70,"display_name":"jake wong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677757685,"creation_date":1677757685,"question_id":75615011,"body_markdown":"I am trying to run HMS (standalone v3.0.0) in kubernetes while connecting to postgresql (with ssl enabled). I am successful in using `schematool -dbType postgres -initSchema` to build the tables required in postgres. however, `./start-metastore` returns with the following error:  \r\n\r\n```\r\nMetaException(message:Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\r\n         class not found)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:84)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.getProxy(RetryingHMSHandler.java:93)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:8541)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:8536)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.startMetaStore(HiveMetaStore.java:8806)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.main(HiveMetaStore.java:8723)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.util.RunJar.run(RunJar.java:308)\r\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:222)\r\nCaused by: java.lang.RuntimeException: Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\r\n         class not found\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.createExpressionProxy(ObjectStore.java:538)\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.initializeHelper(ObjectStore.java:491)\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.initialize(ObjectStore.java:417)\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.setConf(ObjectStore.java:372)\r\n        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:77)\r\n        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:137)\r\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.&lt;init&gt;(RawStoreProxy.java:59)\r\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.getProxy(RawStoreProxy.java:67)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newRawStoreForConf(HiveMetaStore.java:705)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMSForConf(HiveMetaStore.java:683)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:677)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:754)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:525)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invokeInternal(RetryingHMSHandler.java:147)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:108)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:80)\r\n        ... 11 more\r\nException in thread &quot;main&quot; MetaException(message:Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\r\n         class not found)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:84)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.getProxy(RetryingHMSHandler.java:93)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:8541)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:8536)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.startMetaStore(HiveMetaStore.java:8806)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.main(HiveMetaStore.java:8723)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.util.RunJar.run(RunJar.java:308)\r\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:222)\r\nCaused by: java.lang.RuntimeException: Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\r\n         class not found\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.createExpressionProxy(ObjectStore.java:538)\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.initializeHelper(ObjectStore.java:491)\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.initialize(ObjectStore.java:417)\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.setConf(ObjectStore.java:372)\r\n        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:77)\r\n        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:137)\r\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.&lt;init&gt;(RawStoreProxy.java:59)\r\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.getProxy(RawStoreProxy.java:67)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newRawStoreForConf(HiveMetaStore.java:705)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMSForConf(HiveMetaStore.java:683)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:677)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:754)\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:525)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invokeInternal(RetryingHMSHandler.java:147)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:108)\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:80)\r\n        ... 11 more\r\n2023-03-02 11:38:42,300 pool-2-thread-1 INFO Log4j appears to be running in a Servlet environment, but there&#39;s no log4j-web module available. If you want better web container support, please add the log4j-web JAR to your web archive or server lib directory.\r\n```\r\n\r\nWhat am i doing wrong?\r\n\r\nHow i&#39;ve set it up:\r\n\r\n**HMS dockerfile** \r\n``` \r\nFROM alpine:latest\r\n\r\nCOPY hadoop-3.1.0.tar.gz /opt/hadoop-3.1.0.tar.gz\r\nCOPY hive-standalone-metastore-3.0.0-bin.tar.gz /opt/hive-standalone-metastore-3.0.0-bin.tar.gz\r\n\r\nRUN wget -O /etc/apk/keys/amazoncorretto.rsa.pub  https://apk.corretto.aws/amazoncorretto.rsa.pub  &amp;&amp; \\\r\n    echo &quot;https://apk.corretto.aws/&quot; &gt;&gt; /etc/apk/repositories  &amp;&amp; \\\r\n    apk update &amp;&amp; apk upgrade &amp;&amp; \\\r\n    apk add --no-cache curl bash &amp;&amp; \\\r\n    apk add amazon-corretto-8 &amp;&amp; \\\r\n    apk add amazon-corretto-8-jre &amp;&amp; \\\r\n    tar -xvf /opt/hive-standalone-metastore-3.0.0-bin.tar.gz -C /opt/ &amp;&amp; \\\r\n    tar -xvf /opt/hadoop-3.1.0.tar.gz -C /opt/  &amp;&amp; \\\r\n    rm /opt/*.tar.gz\r\n\r\nCOPY postgresql-42.5.4.jar /opt/apache-hive-metastore-3.0.0-bin/lib\r\n\r\nENV HIVE_HOME=/opt/apache-hive-metastore-3.0.0-bin \\\r\n    CLASSPATH=/opt/apache-hive-metastore-3.0.0-bin/lib/ \\\r\n    HADOOP_HOME=/opt/hadoop-3.1.0 \\\r\n    JAVA_HOME=/usr/lib/jvm/java-8-amazon-corretto \\\r\n```\r\n\r\n**metastore-site.xml**\r\n```\r\n&lt;configuration&gt;\r\n        &lt;!--    Configure MetaStore as a server. To start more servers, change port--&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;metastore.thrift.uris&lt;/name&gt;\r\n            &lt;value&gt;thrift://meta-store.default.svc.cluster.local:9083&lt;/value&gt;\r\n            &lt;description&gt;\r\n                - Thrift URI for the remote metastore. Used by metastore client to connect to remote metastore.\r\n                - IP address (or fully-qualified domain name) and port of the metastore host\r\n            &lt;/description&gt;\r\n        &lt;/property&gt;\r\n        &lt;!--    For running MetaStore in standalone mode. --&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;metastore.task.threads.always\r\n            &lt;/name&gt;\r\n            &lt;value&gt;org.apache.hadoop.hive.metastore.events.EventCleanerTask&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;metastore.expression.proxy&lt;/name&gt;\r\n            &lt;value&gt;org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\r\n            &lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;!--Postgres&#39; connection details --&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;\r\n            &lt;value&gt;jdbc:postgresql://postgres-svc.default.svc.cluster.local:5432/hive?ssl=true&amp;amp;sslMode=verify-ca&amp;amp;sslcert=/etc/tls.crt&amp;amp;sslkey=/etc/postgresql.pk8&amp;amp;sslrootcert=/etc/root.crt&amp;amp;sslpassword=postgres&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;\r\n            &lt;value&gt;org.postgresql.Driver&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;\r\n            &lt;value&gt;postgres&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;\r\n            &lt;value&gt;postgres&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        \r\n        \r\n        &lt;!--URL of the default location for --&gt;\r\n        &lt;!--    &lt;property&gt;--&gt;\r\n        &lt;!--        &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;--&gt;\r\n        &lt;!--        &lt;value&gt;hdfs://localhost:9000/user/hive/warehouse&lt;/value&gt;--&gt;\r\n        &lt;!--        &lt;description&gt;--&gt;\r\n        &lt;!--            URI of the default location for tables in the default catalog and database.--&gt;\r\n        &lt;!--        &lt;/description&gt;--&gt;\r\n        &lt;!--    &lt;/property&gt;--&gt;\r\n        \r\n        &lt;property&gt;\r\n            &lt;name&gt;datanucleus.schema.autoCreateAll&lt;/name&gt;\r\n            &lt;value&gt;false&lt;/value&gt;\r\n            &lt;description&gt;\r\n                - Auto creates the necessary schema in the RDBMS at startup if one does not exist.\r\n                - Set this to false after creating it once.\r\n                - To enable auto create also set hive.metastore.schema.verification=false.\r\n                - Auto creation is not recommended in production; run schematool instead.\r\n            &lt;/description&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;datanucleus.autoStartMechanism&lt;/name&gt;\r\n            &lt;value&gt;SchemaTable&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;property&gt;\r\n            &lt;name&gt;datanucleus.fixedDatastore&lt;/name&gt;\r\n            &lt;value&gt;true&lt;/value&gt;\r\n        &lt;/property&gt;\r\n    \r\n    &lt;/configuration&gt;\r\n```\r\n\r\nIf it helps, **kubernetes deployment yaml**\r\n```\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: hive-meta-store\r\n  namespace: default\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app: hive-metastore-deployment\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: hive-metastore-deployment\r\n    spec:\r\n      securityContext:\r\n        runAsUser: 0\r\n      containers:\r\n        - name: metastore\r\n          image: hive-metastore-v0.0.1\r\n          imagePullPolicy: &quot;IfNotPresent&quot;\r\n          ports:\r\n            - containerPort: 9083\r\n              name: thrift-port\r\n#          envFrom:\r\n#            - configMapRef:\r\n#                name: postgres-config\r\n          volumeMounts:\r\n            - name: metastore-xml\r\n              mountPath: /opt/apache-hive-metastore-3.0.0-bin/conf/metastore-site.xml\r\n              subPath: metastore-site.xml\r\n            - name: postgres-ssl-crt\r\n              mountPath: /etc/tls.crt\r\n              subPath: tls.crt\r\n            - name: postgres-ssl-key\r\n              mountPath: /etc/tls.key\r\n              subPath: tls.key\r\n            - name: postgres-ssl-root\r\n              mountPath: /etc/root.crt\r\n              subPath: root.crt\r\n            - name: postgres-ssl-pk8\r\n              mountPath: /etc/postgresql.pk8\r\n              subPath: postgresql.pk8\r\n          command:\r\n            - /bin/sh\r\n            - -c\r\n            - &quot;watch ps&quot;\r\n      volumes:\r\n        - name: metastore-xml\r\n          configMap:\r\n            name: metastore-site.xml\r\n        - name: postgres-ssl-crt\r\n          secret:\r\n            secretName: postgres-ssl-secret\r\n            items:\r\n              - key: tls.crt\r\n                path: tls.crt\r\n                mode: 0444\r\n        - name: postgres-ssl-key\r\n          secret:\r\n            secretName: postgres-ssl-secret\r\n            items:\r\n              - key: tls.key\r\n                path: tls.key\r\n                mode: 0444\r\n        - name: postgres-ssl-root\r\n          secret:\r\n            secretName: postgres-ssl-secret\r\n            items:\r\n              - key: root.crt\r\n                path: root.crt\r\n                mode: 0444\r\n        - name: postgres-ssl-pk8\r\n          secret:\r\n            secretName: postgres-ssl-secret\r\n            items:\r\n              - key: postgresql.pk8\r\n                path: postgresql.pk8\r\n                mode: 0444\r\n```\r\n\r\nSo when I `exec` into the pod and run `./schematool -dbType postgres -initSchema`, no issues, i can see that postgresql hive database i updated all the required tables.\r\n\r\nThe problem comes in when i `start-metastore`, and it&#39;ll come out with the error:  `Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy class not found`","title":"Error loading PartitionExpressionProxy while starting up hive standalone metastore 3.0.0","body":"<p>I am trying to run HMS (standalone v3.0.0) in kubernetes while connecting to postgresql (with ssl enabled). I am successful in using <code>schematool -dbType postgres -initSchema</code> to build the tables required in postgres. however, <code>./start-metastore</code> returns with the following error:</p>\n<pre><code>MetaException(message:Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\n         class not found)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:84)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.getProxy(RetryingHMSHandler.java:93)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:8541)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:8536)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.startMetaStore(HiveMetaStore.java:8806)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.main(HiveMetaStore.java:8723)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.hadoop.util.RunJar.run(RunJar.java:308)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:222)\nCaused by: java.lang.RuntimeException: Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\n         class not found\n        at org.apache.hadoop.hive.metastore.ObjectStore.createExpressionProxy(ObjectStore.java:538)\n        at org.apache.hadoop.hive.metastore.ObjectStore.initializeHelper(ObjectStore.java:491)\n        at org.apache.hadoop.hive.metastore.ObjectStore.initialize(ObjectStore.java:417)\n        at org.apache.hadoop.hive.metastore.ObjectStore.setConf(ObjectStore.java:372)\n        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:77)\n        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:137)\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.&lt;init&gt;(RawStoreProxy.java:59)\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.getProxy(RawStoreProxy.java:67)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newRawStoreForConf(HiveMetaStore.java:705)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMSForConf(HiveMetaStore.java:683)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:677)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:754)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:525)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invokeInternal(RetryingHMSHandler.java:147)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:108)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:80)\n        ... 11 more\nException in thread &quot;main&quot; MetaException(message:Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\n         class not found)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:84)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.getProxy(RetryingHMSHandler.java:93)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:8541)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.newRetryingHMSHandler(HiveMetaStore.java:8536)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.startMetaStore(HiveMetaStore.java:8806)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore.main(HiveMetaStore.java:8723)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.hadoop.util.RunJar.run(RunJar.java:308)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:222)\nCaused by: java.lang.RuntimeException: Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\n         class not found\n        at org.apache.hadoop.hive.metastore.ObjectStore.createExpressionProxy(ObjectStore.java:538)\n        at org.apache.hadoop.hive.metastore.ObjectStore.initializeHelper(ObjectStore.java:491)\n        at org.apache.hadoop.hive.metastore.ObjectStore.initialize(ObjectStore.java:417)\n        at org.apache.hadoop.hive.metastore.ObjectStore.setConf(ObjectStore.java:372)\n        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:77)\n        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:137)\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.&lt;init&gt;(RawStoreProxy.java:59)\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.getProxy(RawStoreProxy.java:67)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newRawStoreForConf(HiveMetaStore.java:705)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMSForConf(HiveMetaStore.java:683)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:677)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:754)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:525)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invokeInternal(RetryingHMSHandler.java:147)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:108)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.&lt;init&gt;(RetryingHMSHandler.java:80)\n        ... 11 more\n2023-03-02 11:38:42,300 pool-2-thread-1 INFO Log4j appears to be running in a Servlet environment, but there's no log4j-web module available. If you want better web container support, please add the log4j-web JAR to your web archive or server lib directory.\n</code></pre>\n<p>What am i doing wrong?</p>\n<p>How i've set it up:</p>\n<p><strong>HMS dockerfile</strong></p>\n<pre><code>FROM alpine:latest\n\nCOPY hadoop-3.1.0.tar.gz /opt/hadoop-3.1.0.tar.gz\nCOPY hive-standalone-metastore-3.0.0-bin.tar.gz /opt/hive-standalone-metastore-3.0.0-bin.tar.gz\n\nRUN wget -O /etc/apk/keys/amazoncorretto.rsa.pub  https://apk.corretto.aws/amazoncorretto.rsa.pub  &amp;&amp; \\\n    echo &quot;https://apk.corretto.aws/&quot; &gt;&gt; /etc/apk/repositories  &amp;&amp; \\\n    apk update &amp;&amp; apk upgrade &amp;&amp; \\\n    apk add --no-cache curl bash &amp;&amp; \\\n    apk add amazon-corretto-8 &amp;&amp; \\\n    apk add amazon-corretto-8-jre &amp;&amp; \\\n    tar -xvf /opt/hive-standalone-metastore-3.0.0-bin.tar.gz -C /opt/ &amp;&amp; \\\n    tar -xvf /opt/hadoop-3.1.0.tar.gz -C /opt/  &amp;&amp; \\\n    rm /opt/*.tar.gz\n\nCOPY postgresql-42.5.4.jar /opt/apache-hive-metastore-3.0.0-bin/lib\n\nENV HIVE_HOME=/opt/apache-hive-metastore-3.0.0-bin \\\n    CLASSPATH=/opt/apache-hive-metastore-3.0.0-bin/lib/ \\\n    HADOOP_HOME=/opt/hadoop-3.1.0 \\\n    JAVA_HOME=/usr/lib/jvm/java-8-amazon-corretto \\\n</code></pre>\n<p><strong>metastore-site.xml</strong></p>\n<pre><code>&lt;configuration&gt;\n        &lt;!--    Configure MetaStore as a server. To start more servers, change port--&gt;\n        &lt;property&gt;\n            &lt;name&gt;metastore.thrift.uris&lt;/name&gt;\n            &lt;value&gt;thrift://meta-store.default.svc.cluster.local:9083&lt;/value&gt;\n            &lt;description&gt;\n                - Thrift URI for the remote metastore. Used by metastore client to connect to remote metastore.\n                - IP address (or fully-qualified domain name) and port of the metastore host\n            &lt;/description&gt;\n        &lt;/property&gt;\n        &lt;!--    For running MetaStore in standalone mode. --&gt;\n        &lt;property&gt;\n            &lt;name&gt;metastore.task.threads.always\n            &lt;/name&gt;\n            &lt;value&gt;org.apache.hadoop.hive.metastore.events.EventCleanerTask&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n            &lt;name&gt;metastore.expression.proxy&lt;/name&gt;\n            &lt;value&gt;org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy\n            &lt;/value&gt;\n        &lt;/property&gt;\n        &lt;!--Postgres' connection details --&gt;\n        &lt;property&gt;\n            &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;\n            &lt;value&gt;jdbc:postgresql://postgres-svc.default.svc.cluster.local:5432/hive?ssl=true&amp;amp;sslMode=verify-ca&amp;amp;sslcert=/etc/tls.crt&amp;amp;sslkey=/etc/postgresql.pk8&amp;amp;sslrootcert=/etc/root.crt&amp;amp;sslpassword=postgres&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n            &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;\n            &lt;value&gt;org.postgresql.Driver&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n            &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;\n            &lt;value&gt;postgres&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n            &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;\n            &lt;value&gt;postgres&lt;/value&gt;\n        &lt;/property&gt;\n        \n        \n        &lt;!--URL of the default location for --&gt;\n        &lt;!--    &lt;property&gt;--&gt;\n        &lt;!--        &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;--&gt;\n        &lt;!--        &lt;value&gt;hdfs://localhost:9000/user/hive/warehouse&lt;/value&gt;--&gt;\n        &lt;!--        &lt;description&gt;--&gt;\n        &lt;!--            URI of the default location for tables in the default catalog and database.--&gt;\n        &lt;!--        &lt;/description&gt;--&gt;\n        &lt;!--    &lt;/property&gt;--&gt;\n        \n        &lt;property&gt;\n            &lt;name&gt;datanucleus.schema.autoCreateAll&lt;/name&gt;\n            &lt;value&gt;false&lt;/value&gt;\n            &lt;description&gt;\n                - Auto creates the necessary schema in the RDBMS at startup if one does not exist.\n                - Set this to false after creating it once.\n                - To enable auto create also set hive.metastore.schema.verification=false.\n                - Auto creation is not recommended in production; run schematool instead.\n            &lt;/description&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n            &lt;name&gt;datanucleus.autoStartMechanism&lt;/name&gt;\n            &lt;value&gt;SchemaTable&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property&gt;\n            &lt;name&gt;datanucleus.fixedDatastore&lt;/name&gt;\n            &lt;value&gt;true&lt;/value&gt;\n        &lt;/property&gt;\n    \n    &lt;/configuration&gt;\n</code></pre>\n<p>If it helps, <strong>kubernetes deployment yaml</strong></p>\n<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: hive-meta-store\n  namespace: default\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: hive-metastore-deployment\n  template:\n    metadata:\n      labels:\n        app: hive-metastore-deployment\n    spec:\n      securityContext:\n        runAsUser: 0\n      containers:\n        - name: metastore\n          image: hive-metastore-v0.0.1\n          imagePullPolicy: &quot;IfNotPresent&quot;\n          ports:\n            - containerPort: 9083\n              name: thrift-port\n#          envFrom:\n#            - configMapRef:\n#                name: postgres-config\n          volumeMounts:\n            - name: metastore-xml\n              mountPath: /opt/apache-hive-metastore-3.0.0-bin/conf/metastore-site.xml\n              subPath: metastore-site.xml\n            - name: postgres-ssl-crt\n              mountPath: /etc/tls.crt\n              subPath: tls.crt\n            - name: postgres-ssl-key\n              mountPath: /etc/tls.key\n              subPath: tls.key\n            - name: postgres-ssl-root\n              mountPath: /etc/root.crt\n              subPath: root.crt\n            - name: postgres-ssl-pk8\n              mountPath: /etc/postgresql.pk8\n              subPath: postgresql.pk8\n          command:\n            - /bin/sh\n            - -c\n            - &quot;watch ps&quot;\n      volumes:\n        - name: metastore-xml\n          configMap:\n            name: metastore-site.xml\n        - name: postgres-ssl-crt\n          secret:\n            secretName: postgres-ssl-secret\n            items:\n              - key: tls.crt\n                path: tls.crt\n                mode: 0444\n        - name: postgres-ssl-key\n          secret:\n            secretName: postgres-ssl-secret\n            items:\n              - key: tls.key\n                path: tls.key\n                mode: 0444\n        - name: postgres-ssl-root\n          secret:\n            secretName: postgres-ssl-secret\n            items:\n              - key: root.crt\n                path: root.crt\n                mode: 0444\n        - name: postgres-ssl-pk8\n          secret:\n            secretName: postgres-ssl-secret\n            items:\n              - key: postgresql.pk8\n                path: postgresql.pk8\n                mode: 0444\n</code></pre>\n<p>So when I <code>exec</code> into the pod and run <code>./schematool -dbType postgres -initSchema</code>, no issues, i can see that postgresql hive database i updated all the required tables.</p>\n<p>The problem comes in when i <code>start-metastore</code>, and it'll come out with the error:  <code>Error loading PartitionExpressionProxy: org.apache.hadoop.hive.metastore.DefaultPartitionExpressionProxy class not found</code></p>\n"},{"tags":["java","stream","java-stream"],"answers":[{"tags":[],"owner":{"account_id":3583855,"reputation":150,"user_id":2991440,"display_name":"krishnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677757531,"creation_date":1677757531,"answer_id":75614984,"question_id":75614888,"body_markdown":"The equivalent one-liner : \r\n\r\n    Double totalTaxRate = itemList.stream()\r\n                    .filter(i -&gt; i.getItemClass() != 200)\r\n                    .flatMap(i -&gt; i.getTaxes().stream())\r\n                    .mapToDouble(t -&gt; t.getTaxRate()).sum();","title":"java stream : get sum of field in nested list of objects","body":"<p>The equivalent one-liner :</p>\n<pre><code>Double totalTaxRate = itemList.stream()\n                .filter(i -&gt; i.getItemClass() != 200)\n                .flatMap(i -&gt; i.getTaxes().stream())\n                .mapToDouble(t -&gt; t.getTaxRate()).sum();\n</code></pre>\n"}],"owner":{"account_id":27917730,"reputation":11,"user_id":21318545,"display_name":"mihaw70362"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75614984,"answer_count":1,"score":0,"last_activity_date":1677757531,"creation_date":1677756946,"question_id":75614888,"body_markdown":"From a List&lt;Item&gt; containing a List&lt;Tax&gt; , how do i get the sum of a specific field in Tax class after filtering List&lt;Item&gt; based on a field in Item class?\r\n\r\n\r\n\r\nThis is what I have done so far -\r\n\r\n```\r\npublic class Item {\r\n    private long itemClass;\r\n    private List&lt;Tax&gt; taxList;\r\n\r\n    public long getItemClass() {\r\n        return itemClass;\r\n    }\r\n    public void setItemClass(long itemClass) {\r\n        this.itemClass = itemClass;\r\n    }\r\n    public List&lt;Tax&gt; getTaxes() {\r\n        return taxList;\r\n    }\r\n    public void setTaxList(List&lt;Tax&gt; taxList) {\r\n        this.taxList = taxList;\r\n    }\r\n\r\n}\r\n\r\n\r\npublic class Tax {\r\n    private double taxRate;\r\n\r\n    public double getTaxRate() {\r\n        return taxRate;\r\n    }\r\n    public void setTaxRate(double taxRate) {\r\n        this.taxRate = taxRate;\r\n    }\r\n}\r\n\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        Item item1 = new Item();\r\n        item1.setItemClass(100);\r\n\r\n        Item item2 = new Item();\r\n        item1.setItemClass(200);\r\n\r\n        Item item3 = new Item();\r\n        item1.setItemClass(300);\r\n\r\n        Tax tax1 = new Tax();\r\n        tax1.setTaxRate(0.01);\r\n\r\n        Tax tax2 = new Tax();\r\n        tax1.setTaxRate(0.02);\r\n\r\n        Tax tax3 = new Tax();\r\n        tax1.setTaxRate(0.03);\r\n\r\n        item1.setTaxList(Arrays.asList(tax1, tax2));\r\n        item2.setTaxList(Arrays.asList(tax1, tax3));\r\n        item3.setTaxList(Arrays.asList(tax1, tax2, tax3));\r\n\r\n        List&lt;Item&gt; itemList = Arrays.asList(item1, item2, item3);\r\n\r\n        List&lt;Item&gt; filteredItemList = itemList.stream().filter(i -&gt; i.getItemClass() != 200).collect(Collectors.toList());\r\n        List&lt;Tax&gt; filteredTaxList = filteredItemList.stream().map(i -&gt; i.getTaxes()).flatMap(t -&gt; t.stream()).collect(Collectors.toList());\r\n        Double totalTaxRate = filteredTaxList.stream().mapToDouble(t -&gt; t.getTaxRate()).sum();\r\n\r\n        System.out.println(totalTaxRate); //expected result 0.09\r\n    }\r\n}\r\n```\r\n\r\nI am able to get the desired result. But 3 streams seems to be overkill. How do I make this more efficient?","title":"java stream : get sum of field in nested list of objects","body":"<p>From a List containing a List , how do i get the sum of a specific field in Tax class after filtering List based on a field in Item class?</p>\n<p>This is what I have done so far -</p>\n<pre><code>public class Item {\n    private long itemClass;\n    private List&lt;Tax&gt; taxList;\n\n    public long getItemClass() {\n        return itemClass;\n    }\n    public void setItemClass(long itemClass) {\n        this.itemClass = itemClass;\n    }\n    public List&lt;Tax&gt; getTaxes() {\n        return taxList;\n    }\n    public void setTaxList(List&lt;Tax&gt; taxList) {\n        this.taxList = taxList;\n    }\n\n}\n\n\npublic class Tax {\n    private double taxRate;\n\n    public double getTaxRate() {\n        return taxRate;\n    }\n    public void setTaxRate(double taxRate) {\n        this.taxRate = taxRate;\n    }\n}\n\n\npublic class App {\n    public static void main(String[] args) {\n        Item item1 = new Item();\n        item1.setItemClass(100);\n\n        Item item2 = new Item();\n        item1.setItemClass(200);\n\n        Item item3 = new Item();\n        item1.setItemClass(300);\n\n        Tax tax1 = new Tax();\n        tax1.setTaxRate(0.01);\n\n        Tax tax2 = new Tax();\n        tax1.setTaxRate(0.02);\n\n        Tax tax3 = new Tax();\n        tax1.setTaxRate(0.03);\n\n        item1.setTaxList(Arrays.asList(tax1, tax2));\n        item2.setTaxList(Arrays.asList(tax1, tax3));\n        item3.setTaxList(Arrays.asList(tax1, tax2, tax3));\n\n        List&lt;Item&gt; itemList = Arrays.asList(item1, item2, item3);\n\n        List&lt;Item&gt; filteredItemList = itemList.stream().filter(i -&gt; i.getItemClass() != 200).collect(Collectors.toList());\n        List&lt;Tax&gt; filteredTaxList = filteredItemList.stream().map(i -&gt; i.getTaxes()).flatMap(t -&gt; t.stream()).collect(Collectors.toList());\n        Double totalTaxRate = filteredTaxList.stream().mapToDouble(t -&gt; t.getTaxRate()).sum();\n\n        System.out.println(totalTaxRate); //expected result 0.09\n    }\n}\n</code></pre>\n<p>I am able to get the desired result. But 3 streams seems to be overkill. How do I make this more efficient?</p>\n"},{"tags":["java","spring-boot","heroku","gmail"],"comments":[{"owner":{"account_id":20969281,"reputation":1,"user_id":15406799,"display_name":"LibLev"},"score":0,"creation_date":1615890328,"post_id":60916539,"comment_id":117825705,"body_markdown":"If you want to use gmail here is the [solution](https://stackoverflow.com/questions/61707039/allow-less-secure-apps-on-but-heroku-still-generating-that-error/61709121#61709121?newreg=8ecf18086ee449bc959c6236abbf6563) what works for me.","body":"If you want to use gmail here is the <a href=\"https://stackoverflow.com/questions/61707039/allow-less-secure-apps-on-but-heroku-still-generating-that-error/61709121#61709121?newreg=8ecf18086ee449bc959c6236abbf6563\">solution</a> what works for me."}],"answers":[{"tags":[],"owner":{"account_id":145051,"reputation":130109,"user_id":354577,"accept_rate":100,"display_name":"Chris"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1585498827,"creation_date":1585498827,"answer_id":60917244,"question_id":60916539,"body_markdown":"&gt; How can I solve this?\r\n\r\nBy not using Gmail. It&#39;s not meant for automated, programmatic email delivery.\r\n\r\nInstead, use something like [SendGrid][1] or [Mailgun][2]. These services _are_ designed for programmatic mail delivery, and [both are available as official Heroku addons with free tiers][3].\r\n\r\n[1]: https://sendgrid.com/\r\n[2]: https://www.mailgun.com/\r\n[3]: https://elements.heroku.com/addons/#email-sms\r\n\r\n","title":"Send email with Spring Boot app in Heroku","body":"<blockquote>\n  <p>How can I solve this?</p>\n</blockquote>\n\n<p>By not using Gmail. It's not meant for automated, programmatic email delivery.</p>\n\n<p>Instead, use something like <a href=\"https://sendgrid.com/\" rel=\"nofollow noreferrer\">SendGrid</a> or <a href=\"https://www.mailgun.com/\" rel=\"nofollow noreferrer\">Mailgun</a>. These services <em>are</em> designed for programmatic mail delivery, and <a href=\"https://elements.heroku.com/addons/#email-sms\" rel=\"nofollow noreferrer\">both are available as official Heroku addons with free tiers</a>.</p>\n"},{"tags":[],"owner":{"account_id":20034190,"reputation":1,"user_id":14686307,"display_name":"Barabba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677757475,"creation_date":1677757451,"answer_id":75614973,"question_id":60916539,"body_markdown":"You can set an app password with [google][1]. This let you log in with a passcode only for that application.\r\n\r\n\r\n  [1]: https://support.google.com/accounts/answer/185833?hl=en","title":"Send email with Spring Boot app in Heroku","body":"<p>You can set an app password with <a href=\"https://support.google.com/accounts/answer/185833?hl=en\" rel=\"nofollow noreferrer\">google</a>. This let you log in with a passcode only for that application.</p>\n"}],"owner":{"account_id":17636980,"reputation":457,"user_id":12800059,"display_name":"Daniel Stefanelli"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1066,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60917244,"answer_count":2,"score":0,"last_activity_date":1677757475,"creation_date":1585495969,"question_id":60916539,"body_markdown":"I&#39;ve successfully deployed a Spring Boot app on Heroku. This app should send emails after an user fills a form.\r\n\r\nThe problem is that, in local it works, but in Heroku the app always throws `AuthenticationFailedException` because it is trying to sign in with my Gmail account from Heroku&#39;s server in another country.\r\n\r\nMy Gmail account does not have two factor authentication and less secure app option is enabled.\r\n\r\nHow can I solve this? How can my Spring Boot app in a server abroad sign in with my Gmail account from another country?","title":"Send email with Spring Boot app in Heroku","body":"<p>I've successfully deployed a Spring Boot app on Heroku. This app should send emails after an user fills a form.</p>\n\n<p>The problem is that, in local it works, but in Heroku the app always throws <code>AuthenticationFailedException</code> because it is trying to sign in with my Gmail account from Heroku's server in another country.</p>\n\n<p>My Gmail account does not have two factor authentication and less secure app option is enabled.</p>\n\n<p>How can I solve this? How can my Spring Boot app in a server abroad sign in with my Gmail account from another country?</p>\n"},{"tags":["java","c++","compiler-construction"],"comments":[{"owner":{"account_id":55292,"reputation":91593,"user_id":165520,"accept_rate":80,"display_name":"Prasoon Saurav"},"score":1,"creation_date":1263920675,"post_id":2095277,"comment_id":2028385,"body_markdown":"Read jalf&#39;s answer here: http://stackoverflow.com/questions/318398/why-does-c-compilation-take-so-long","body":"Read jalf&#39;s answer here: <a href=\"http://stackoverflow.com/questions/318398/why-does-c-compilation-take-so-long\" title=\"why does c compilation take so long\">stackoverflow.com/questions/318398/&hellip;</a>"},{"owner":{"account_id":9,"reputation":220303,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"score":1,"creation_date":1263920690,"post_id":2095277,"comment_id":2028389,"body_markdown":"That&#39;s a QoI (quality of implementation) issue. Some C++ compilers implement &quot;precompiled headers&quot;, which makes the build much, much faster.","body":"That&#39;s a QoI (quality of implementation) issue. Some C++ compilers implement &quot;precompiled headers&quot;, which makes the build much, much faster."},{"owner":{"display_name":"anon"},"score":1,"creation_date":1263921196,"post_id":2095277,"comment_id":2028463,"body_markdown":"Same question as http://stackoverflow.com/questions/318398/why-does-c-compilation-take-so-long","body":"Same question as <a href=\"http://stackoverflow.com/questions/318398/why-does-c-compilation-take-so-long\" title=\"why does c compilation take so long\">stackoverflow.com/questions/318398/&hellip;</a>"},{"owner":{"account_id":1827,"reputation":99237,"user_id":2509,"accept_rate":88,"display_name":"dmckee --- ex-moderator kitten"},"score":0,"creation_date":1263932406,"post_id":2095277,"comment_id":2029970,"body_markdown":"Certainly a dupe and it should be closed; but don&#39;t delete it because this title will come up on a very different set of searches.","body":"Certainly a dupe and it should be closed; but don&#39;t delete it because this title will come up on a very different set of searches."}],"answers":[{"tags":[],"owner":{"account_id":91653,"reputation":7008,"user_id":251543,"accept_rate":87,"display_name":"Aaron"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1263920748,"creation_date":1263920748,"answer_id":2095319,"question_id":2095277,"body_markdown":"Java compiles code into bytecode, which is interpreted by the Java VM. C++ must compile into object code, then to machine language. Because of this, it&#39;s possible for Java to compile only a single class for minor changes, while C++ object files must be re-linked with other object files to machine code executable (or DLLs). This may make the process take a bit longer.","title":"Difference between C++ and Java compilation process","body":"<p>Java compiles code into bytecode, which is interpreted by the Java VM. C++ must compile into object code, then to machine language. Because of this, it's possible for Java to compile only a single class for minor changes, while C++ object files must be re-linked with other object files to machine code executable (or DLLs). This may make the process take a bit longer.</p>\n"},{"tags":[],"owner":{"account_id":67956,"reputation":57056,"user_id":198536,"accept_rate":100,"display_name":"wallyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1263921076,"creation_date":1263921076,"answer_id":2095359,"question_id":2095277,"body_markdown":"A C++ program using all the language&#39;s features is inherently more difficult to compile.  A few template invocations with a number of types can easily double or triple the amount of code to generate.","title":"Difference between C++ and Java compilation process","body":"<p>A C++ program using all the language's features is inherently more difficult to compile.  A few template invocations with a number of types can easily double or triple the amount of code to generate.</p>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1396447880,"creation_date":1263921166,"answer_id":2095368,"question_id":2095277,"body_markdown":"There are a few high-level differences that come to my mind. Some of those are generalizations and should be prefixed with &quot;Often ...&quot; or &quot;Some compilers ...&quot;, but for the sake of readability I&#39;ll leave that out.\r\n\r\n - C/C++ compilation doesn&#39;t read any information from binary files, but reads method/type definitions only from header files that need to be parsed in full (exception: precompiled headers)\r\n - C/C++ compilation includes a pre-processor step that can do a wide array of text-replacement (which makes header pre-compilation harder to do)\r\n - The C++ syntax is a lot more complex than the Java syntax\r\n - The C++ type system is a lot more complex than the Java type system\r\n - C++ compilation usually produces native assembler code, which is a lot more complex to produce than the relatively simple byte code\r\n - C++ compilers need to do optimizations because there isn&#39;t any other thing that will do them. The Java compiler pretty much does a simple 1:1 translation of Java source code to Java byte code, no optimizations are done at that step (that&#39;s left for the JVM to do).\r\n - C++ has a template language that&#39;s Turing complete! (so strictly speaking C++ code needs to be *run* to produce executable code and a C++ compiler would need to solve the halting problem to tell you if arbitrary C++ code is compilable).","title":"Difference between C++ and Java compilation process","body":"<p>There are a few high-level differences that come to my mind. Some of those are generalizations and should be prefixed with \"Often ...\" or \"Some compilers ...\", but for the sake of readability I'll leave that out.</p>\n\n<ul>\n<li>C/C++ compilation doesn't read any information from binary files, but reads method/type definitions only from header files that need to be parsed in full (exception: precompiled headers)</li>\n<li>C/C++ compilation includes a pre-processor step that can do a wide array of text-replacement (which makes header pre-compilation harder to do)</li>\n<li>The C++ syntax is a lot more complex than the Java syntax</li>\n<li>The C++ type system is a lot more complex than the Java type system</li>\n<li>C++ compilation usually produces native assembler code, which is a lot more complex to produce than the relatively simple byte code</li>\n<li>C++ compilers need to do optimizations because there isn't any other thing that will do them. The Java compiler pretty much does a simple 1:1 translation of Java source code to Java byte code, no optimizations are done at that step (that's left for the JVM to do).</li>\n<li>C++ has a template language that's Turing complete! (so strictly speaking C++ code needs to be <em>run</em> to produce executable code and a C++ compiler would need to solve the halting problem to tell you if arbitrary C++ code is compilable).</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1263921205,"creation_date":1263921205,"answer_id":2095375,"question_id":2095277,"body_markdown":"Glossing over a lot of details, in Java you compile .java files into one or more .class files. In C++ you compile .cc (or whatever) source files into .o files, and then link the .o files together into an executable or library. The linking process is usually what kills you, especially for minor changes as the amount of work for linking is roughly proportional to the size of your entire project. (this is ignoring incremental linkers, which are specifically designed to not behave as badly for small changes)\r\n\r\nAnother factor is that the #include mechanism means that whenever you change a .h file, all of the .o files that depend on it need to be rebuilt. In Java, a .class file can depend on more than one .java file (eg: because of constant inlining), but there tend to be far fewer of these &quot;hot spots&quot; where changing one source file requires many other source files to be rebuilt.\r\n\r\nAlso, if you&#39;re using an IDE like Eclipse it&#39;s building your Java code in the background all the time, so by the time you tell it to build it&#39;s already mostly (if not completely) done.","title":"Difference between C++ and Java compilation process","body":"<p>Glossing over a lot of details, in Java you compile .java files into one or more .class files. In C++ you compile .cc (or whatever) source files into .o files, and then link the .o files together into an executable or library. The linking process is usually what kills you, especially for minor changes as the amount of work for linking is roughly proportional to the size of your entire project. (this is ignoring incremental linkers, which are specifically designed to not behave as badly for small changes)</p>\n\n<p>Another factor is that the #include mechanism means that whenever you change a .h file, all of the .o files that depend on it need to be rebuilt. In Java, a .class file can depend on more than one .java file (eg: because of constant inlining), but there tend to be far fewer of these \"hot spots\" where changing one source file requires many other source files to be rebuilt.</p>\n\n<p>Also, if you're using an IDE like Eclipse it's building your Java code in the background all the time, so by the time you tell it to build it's already mostly (if not completely) done.</p>\n"},{"tags":[],"owner":{"account_id":2164,"reputation":25680,"user_id":2979,"display_name":"Tendayi Mawushe"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1575757366,"creation_date":1263921530,"answer_id":2095431,"question_id":2095277,"body_markdown":"I am not sure why you expect the compilation speed of Java and C++ to be comparable since they are different languages with completely different design goals and implementations.\r\n\r\nThat said a few specific differences to keep in mind are:\r\n\r\n - Java is compiled to byte code and not right down to machine code. Compiling to this abstract virtual machine is simpler.\r\n - C++ compilation involves not only [compilation but also linking][1]. So it is typically a multi step process.\r\n - Java performs some late binding that is the association of a call to a function and the actual code to run is done at runtime. So a small change in one area need not trigger a compile of the whole program. In C++ this association needs to be done at compile time this is called early binding.\r\n\r\n\r\n  [1]: http://www.cprogramming.com/compilingandlinking.html","title":"Difference between C++ and Java compilation process","body":"<p>I am not sure why you expect the compilation speed of Java and C++ to be comparable since they are different languages with completely different design goals and implementations.</p>\n\n<p>That said a few specific differences to keep in mind are:</p>\n\n<ul>\n<li>Java is compiled to byte code and not right down to machine code. Compiling to this abstract virtual machine is simpler.</li>\n<li>C++ compilation involves not only <a href=\"http://www.cprogramming.com/compilingandlinking.html\" rel=\"nofollow noreferrer\">compilation but also linking</a>. So it is typically a multi step process.</li>\n<li>Java performs some late binding that is the association of a call to a function and the actual code to run is done at runtime. So a small change in one area need not trigger a compile of the whole program. In C++ this association needs to be done at compile time this is called early binding.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":51248,"reputation":2201,"user_id":153086,"accept_rate":82,"display_name":"Dusk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1263921944,"creation_date":1263921944,"answer_id":2095488,"question_id":2095277,"body_markdown":"Java compiles any source code into bytecode, which is interpreted by JVM. Because of this feature it can be used in multiple platform.","title":"Difference between C++ and Java compilation process","body":"<p>Java compiles any source code into bytecode, which is interpreted by JVM. Because of this feature it can be used in multiple platform.</p>\n"}],"owner":{"account_id":71693,"reputation":14346,"user_id":207335,"accept_rate":75,"display_name":"Boolean"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21086,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"closed_date":1677757197,"accepted_answer_id":2095368,"answer_count":6,"score":15,"last_activity_date":1677757206,"creation_date":1263920468,"question_id":2095277,"body_markdown":"I searched in google for the differences between C++ and Java compilation process, but C++ and Java language features and their differences are returned. \r\n\r\nI am proficient in Java, but not in C++. But I fixed few bugs in C++. From my experience, I noticed that C++ always took more time to build compared to Java for minor changes.","title":"Difference between C++ and Java compilation process","body":"<p>I searched in google for the differences between C++ and Java compilation process, but C++ and Java language features and their differences are returned.</p>\n<p>I am proficient in Java, but not in C++. But I fixed few bugs in C++. From my experience, I noticed that C++ always took more time to build compared to Java for minor changes.</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":1,"creation_date":1378615745,"post_id":18680503,"comment_id":27515428,"body_markdown":"This makes no sense, as the error &quot;use near &#39;? where id=?&#39; &quot; does not jive with the SQL statement.","body":"This makes no sense, as the error &quot;use near &#39;? where id=?&#39; &quot; does not jive with the SQL statement."},{"owner":{"account_id":199671,"reputation":148444,"user_id":445131,"accept_rate":89,"display_name":"Eric Leschinski"},"score":0,"creation_date":1378616234,"post_id":18680503,"comment_id":27515505,"body_markdown":"Show us the table create statement for testtable","body":"Show us the table create statement for testtable"},{"owner":{"account_id":3042352,"reputation":1055,"user_id":2579026,"display_name":"bhattedon"},"score":0,"creation_date":1378616487,"post_id":18680503,"comment_id":27515543,"body_markdown":"create table testtable (id integer, name char(50));","body":"create table testtable (id integer, name char(50));"},{"owner":{"account_id":1481208,"reputation":3739,"user_id":1403801,"accept_rate":90,"display_name":"NewUser"},"score":0,"creation_date":1378617050,"post_id":18680503,"comment_id":27515603,"body_markdown":"@OldProgrammer: The error is OP is supplying the sql string as parameter to execute method.","body":"@OldProgrammer: The error is OP is supplying the sql string as parameter to execute method."}],"answers":[{"comments":[{"owner":{"account_id":171807,"reputation":3228,"user_id":399471,"accept_rate":91,"display_name":"Abbas"},"score":1,"creation_date":1422558164,"post_id":18680633,"comment_id":44808018,"body_markdown":"It took me an hour to figure out that you **MUST NOT** pass your sql query to `statement.execute()` when using `PreparedStatement`. This is a violation of [Design by contract](http://en.wikipedia.org/wiki/Design_by_contract)","body":"It took me an hour to figure out that you <b>MUST NOT</b> pass your sql query to <code>statement.execute()</code> when using <code>PreparedStatement</code>. This is a violation of <a href=\"http://en.wikipedia.org/wiki/Design_by_contract\" rel=\"nofollow noreferrer\">Design by contract</a>"}],"tags":[],"owner":{"account_id":1481208,"reputation":3739,"user_id":1403801,"accept_rate":90,"display_name":"NewUser"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1677757002,"creation_date":1378616939,"answer_id":18680633,"question_id":18680503,"body_markdown":"PreparedStatement is precompiled statement. you don&#39;t have to supply the sql string while executing.\r\n\r\nThis should work:\r\n\r\n\t    try {\r\n\t        connection.setAutoCommit(true);\r\n\t        String sql = &quot;insert into testtable values(?,?)&quot;;\r\n\t        PreparedStatement statement = connection.prepareStatement(sql);\r\n\t        statement.setInt(1, userId);\r\n\t        statement.setString(2, userName);\r\n\t        saveStatus  = statement.execute();\r\n\t    } catch (SQLException e) {\r\n\t        e.printStackTrace();\r\n        }\r\n\t    return saveStatus;\r\n\t}\r\n","title":"MySQLSyntaxErrorException when trying to execute PreparedStatement","body":"<p>PreparedStatement is precompiled statement. you don't have to supply the sql string while executing.</p>\n<p>This should work:</p>\n<pre><code>    try {\n        connection.setAutoCommit(true);\n        String sql = &quot;insert into testtable values(?,?)&quot;;\n        PreparedStatement statement = connection.prepareStatement(sql);\n        statement.setInt(1, userId);\n        statement.setString(2, userName);\n        saveStatus  = statement.execute();\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n    return saveStatus;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3042352,"reputation":1055,"user_id":2579026,"display_name":"bhattedon"},"score":0,"creation_date":1378618263,"post_id":18680686,"comment_id":27515766,"body_markdown":"I tried using `executeUpdate()` as well, but it didn&#39;t work","body":"I tried using <code>executeUpdate()</code> as well, but it didn&#39;t work"},{"owner":{"account_id":413621,"reputation":123,"user_id":787371,"accept_rate":20,"display_name":"SmartTechie"},"score":0,"creation_date":1378622186,"post_id":18680686,"comment_id":27516505,"body_markdown":"Can you run the same program what i have given? The code is tested.","body":"Can you run the same program what i have given? The code is tested."},{"owner":{"account_id":413621,"reputation":123,"user_id":787371,"accept_rate":20,"display_name":"SmartTechie"},"score":0,"creation_date":1378622781,"post_id":18680686,"comment_id":27516626,"body_markdown":"Can you run the same program what i have given? The code is tested. Whenever there is a code snippet available, try to compare the code. So that, you will find the difference. In the code i said, use executeUpdate() method. If you observe that, I am not passing sql again.","body":"Can you run the same program what i have given? The code is tested. Whenever there is a code snippet available, try to compare the code. So that, you will find the difference. In the code i said, use executeUpdate() method. If you observe that, I am not passing sql again."}],"tags":[],"owner":{"account_id":413621,"reputation":123,"user_id":787371,"accept_rate":20,"display_name":"SmartTechie"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1378622377,"creation_date":1378617714,"answer_id":18680686,"question_id":18680503,"body_markdown":"There is a fundamental mistake in your code.\r\n\r\nOnce the `PreparedStatement` is created, we need to call `preparedStatement.executeUpdate();` with out passing SQL again\r\n\r\nHere is the full code for your question.\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.Driver;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    \r\n    \r\n    public class SampleMysql {\r\n    \r\n    \tpublic static Connection getConnection() throws SQLException {\r\n    \t\tDriver drv = new com.mysql.jdbc.Driver();\r\n    \t\tDriverManager.registerDriver(drv);\r\n    \t\tConnection con = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/sample&quot;,&quot;sample&quot;, &quot;sample&quot;);\r\n    \t\treturn con;\r\n    \t}\r\n    \t\r\n    \tpublic static int saveUser(int userId, String userName){\r\n    \t    int saveStatus = 0;\r\n    \t    Connection connection = null;\r\n    \t    try {\r\n    \t    \tconnection = getConnection();\r\n    \t        connection.setAutoCommit(true);\r\n    \t        String sql = &quot;INSERT INTO testtable VALUES(?,?)&quot;;\r\n    \t        PreparedStatement preparedStatement = connection.prepareStatement(sql);\r\n    \t        preparedStatement.setInt(1, userId);\r\n    \t        preparedStatement.setString(2, userName);\r\n    \t        saveStatus  = preparedStatement.executeUpdate();\r\n    \t    } catch (SQLException e) {\r\n    \t        e.printStackTrace();\r\n    \t    }finally{\r\n    \t        if (connection != null) {\r\n    \t        \ttry {\r\n    \t\t\t\t\tconnection.close();\r\n    \t\t\t\t} catch (SQLException e) {\r\n    \t\t\t\t\t\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t        }\r\n    \t    }\r\n    \t    return saveStatus;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] a) {\r\n    \t\tSystem.out.println(saveUser(1, &quot;sample&quot;));\r\n    \t}\r\n    }\r\n\r\nThe table script is given below.\r\n\r\n    CREATE TABLE testtable(user_ID INT(10), user_name VARCHAR(10));\r\n\r\n","title":"MySQLSyntaxErrorException when trying to execute PreparedStatement","body":"<p>There is a fundamental mistake in your code.</p>\n\n<p>Once the <code>PreparedStatement</code> is created, we need to call <code>preparedStatement.executeUpdate();</code> with out passing SQL again</p>\n\n<p>Here is the full code for your question.</p>\n\n<pre><code>import java.sql.Connection;\nimport java.sql.Driver;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\n\npublic class SampleMysql {\n\n    public static Connection getConnection() throws SQLException {\n        Driver drv = new com.mysql.jdbc.Driver();\n        DriverManager.registerDriver(drv);\n        Connection con = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/sample\",\"sample\", \"sample\");\n        return con;\n    }\n\n    public static int saveUser(int userId, String userName){\n        int saveStatus = 0;\n        Connection connection = null;\n        try {\n            connection = getConnection();\n            connection.setAutoCommit(true);\n            String sql = \"INSERT INTO testtable VALUES(?,?)\";\n            PreparedStatement preparedStatement = connection.prepareStatement(sql);\n            preparedStatement.setInt(1, userId);\n            preparedStatement.setString(2, userName);\n            saveStatus  = preparedStatement.executeUpdate();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }finally{\n            if (connection != null) {\n                try {\n                    connection.close();\n                } catch (SQLException e) {\n\n                    e.printStackTrace();\n                }\n            }\n        }\n        return saveStatus;\n    }\n\n    public static void main(String[] a) {\n        System.out.println(saveUser(1, \"sample\"));\n    }\n}\n</code></pre>\n\n<p>The table script is given below.</p>\n\n<pre><code>CREATE TABLE testtable(user_ID INT(10), user_name VARCHAR(10));\n</code></pre>\n"}],"owner":{"account_id":3042352,"reputation":1055,"user_id":2579026,"display_name":"bhattedon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9108,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"closed_date":1504018416,"accepted_answer_id":18680633,"answer_count":2,"score":7,"last_activity_date":1677757002,"creation_date":1378615454,"question_id":18680503,"body_markdown":"I tried to insert a userId (int) and a userName(String) using the PreparedStatement using JDBC using the following method:\r\n\r\n    public boolean saveUser(int userId, String userName){\r\n\t\tboolean saveStatus = false;\r\n\t\ttry {\r\n\t\t\tconnection.setAutoCommit(true);\r\n\t\t\tString sql = &quot;insert into testtable values(?,?)&quot;;\r\n\t\t\tPreparedStatement statement = connection.prepareStatement(sql);\r\n\t\t\tstatement.setInt(1, userId);\r\n\t\t\tstatement.setString(2, userName);\r\n\t\t\tsaveStatus  = statement.execute(sql);\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}finally{\r\n\t\t\tConnector.closeConnections();\r\n\t\t}\r\n\t\treturn saveStatus;\r\n\t}\r\n\r\nI get the following stacktrace:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in \r\n      your SQL syntax; check the manual that corresponds to your MySQL server version \r\n      for the right syntax to use near &#39;?,?)&#39; at line 1\r\n\r\nWhat am I doing wrong?\r\n","title":"MySQLSyntaxErrorException when trying to execute PreparedStatement","body":"<p>I tried to insert a userId (int) and a userName(String) using the PreparedStatement using JDBC using the following method:</p>\n\n<pre><code>public boolean saveUser(int userId, String userName){\n    boolean saveStatus = false;\n    try {\n        connection.setAutoCommit(true);\n        String sql = \"insert into testtable values(?,?)\";\n        PreparedStatement statement = connection.prepareStatement(sql);\n        statement.setInt(1, userId);\n        statement.setString(2, userName);\n        saveStatus  = statement.execute(sql);\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }finally{\n        Connector.closeConnections();\n    }\n    return saveStatus;\n}\n</code></pre>\n\n<p>I get the following stacktrace:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in \n  your SQL syntax; check the manual that corresponds to your MySQL server version \n  for the right syntax to use near '?,?)' at line 1\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["java","spring","spring-el"],"answers":[{"comments":[{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1677752838,"post_id":75614062,"comment_id":133401442,"body_markdown":"That does not work for me. I get `Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;com.abc.pvc.ftp.path&#39; in value &quot;#{&#39;${com.abc.pvc.ftp.path}:${com.abc.pvc.path}/ftp&#39;}&quot;\n`","body":"That does not work for me. I get <code>Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;com.abc.pvc.ftp.path&#39; in value &quot;#{&#39;${com.abc.pvc.ftp.path}:${com.abc.pvc.path}&#47;ftp&#39;}&quot; </code>"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1677752916,"post_id":75614062,"comment_id":133401467,"body_markdown":"@BetaRide, yes,you&#39;ll need to add those to your properties/yaml.","body":"@BetaRide, yes,you&#39;ll need to add those to your properties/yaml."},{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":0,"creation_date":1677753036,"post_id":75614062,"comment_id":133401513,"body_markdown":"@BetaRide for me it&#39;s work, maybe you not add this property (com.abc.pvc.ftp.path/com.abc.pvc.path)?","body":"@BetaRide for me it&#39;s work, maybe you not add this property (com.abc.pvc.ftp.path/com.abc.pvc.path)?"},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1677753373,"post_id":75614062,"comment_id":133401591,"body_markdown":"The wole thing does not make sense if com.abc.pvc.ftp.path must be in the properties file. In most cases only com.abc.pvc.path should be there and the other values should set their defaults based on this.","body":"The wole thing does not make sense if com.abc.pvc.ftp.path must be in the properties file. In most cases only com.abc.pvc.path should be there and the other values should set their defaults based on this."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1677754227,"post_id":75614062,"comment_id":133401867,"body_markdown":"yes, that works if that contains the entire value, but seeing as that is not the case, that&#39;s not how it works","body":"yes, that works if that contains the entire value, but seeing as that is not the case, that&#39;s not how it works"},{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":0,"creation_date":1677754571,"post_id":75614062,"comment_id":133401962,"body_markdown":"@BetaRide i am edit answer, this you mean?","body":"@BetaRide i am edit answer, this you mean?"},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1677756656,"post_id":75614062,"comment_id":133402564,"body_markdown":"Yes. Looks ugly but works.","body":"Yes. Looks ugly but works."}],"tags":[],"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"comment_count":7,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1677756638,"creation_date":1677752288,"answer_id":75614062,"question_id":75613988,"body_markdown":"    @Value(value = &quot;${com.abc.pvc.path}&quot;)\r\n    private Path path;\r\n    \r\n    // one level works fine\r\n    @Value(value = &quot;${com.abc.pvc.ftp.path:${com.abc.pvc.path}/ftp}&quot;)\r\n    private Path ftpPath;\r\n    \r\n    // two levels do not work\r\n    @Value(value = &quot;${com.abc.pvc.etc.path:${com.abc.pvc.ftp.path:${com.abc.pvc.path}}/etc}&quot;)\r\n    private Path etcPath;\r\n\r\n\r\nyou not set placeholder com.abc.pvc.ftp.path, when you set ftpPath  \r\nGuide https://www.baeldung.com/spring-value-annotation","title":"How to reference something in @Value from an other @Value","body":"<pre><code>@Value(value = &quot;${com.abc.pvc.path}&quot;)\nprivate Path path;\n\n// one level works fine\n@Value(value = &quot;${com.abc.pvc.ftp.path:${com.abc.pvc.path}/ftp}&quot;)\nprivate Path ftpPath;\n\n// two levels do not work\n@Value(value = &quot;${com.abc.pvc.etc.path:${com.abc.pvc.ftp.path:${com.abc.pvc.path}}/etc}&quot;)\nprivate Path etcPath;\n</code></pre>\n<p>you not set placeholder com.abc.pvc.ftp.path, when you set ftpPath<br />\nGuide <a href=\"https://www.baeldung.com/spring-value-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-value-annotation</a></p>\n"}],"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677756638,"creation_date":1677751892,"question_id":75613988,"body_markdown":"I have a number of `@Value` properties in my spring bean. Most of the time only the first one is set in the properties file. The others should derieve their values from the first one with sensible defaults if not overwritten.\r\n\r\nUnfortunately this only works with one level. If I try to reference a property with 2 level its not finding it any more.\r\n\r\n    @Component(&quot;pvcConfiguration&quot;)\r\n    public class PvcConfiguration {\r\n    \r\n        @Value(value = &quot;${com.abc.pvc.path}&quot;)\r\n        private Path path;\r\n        \r\n        // one level works fine\r\n        @Value(value = &quot;${com.abc.pvc.ftp.path:${com.abc.pvc.path}/ftp}&quot;)\r\n        private Path ftpPath;\r\n    \r\n        // two levels do not work\r\n        @Value(value = &quot;${com.abc.pvc.etc.path:${com.abc.pvc.ftp.path}/etc}&quot;)\r\n        private Path etcPath;\r\n    \r\n    }\r\n\r\nError message:\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;com.abc.pvc.ftpPath&#39; in value &quot;com.abc.pvc.etcPath:${ch.sbb.infop.pvc.ftp.path}/etc&quot;\r\n\r\nAny ideas how to get this working?","title":"How to reference something in @Value from an other @Value","body":"<p>I have a number of <code>@Value</code> properties in my spring bean. Most of the time only the first one is set in the properties file. The others should derieve their values from the first one with sensible defaults if not overwritten.</p>\n<p>Unfortunately this only works with one level. If I try to reference a property with 2 level its not finding it any more.</p>\n<pre><code>@Component(&quot;pvcConfiguration&quot;)\npublic class PvcConfiguration {\n\n    @Value(value = &quot;${com.abc.pvc.path}&quot;)\n    private Path path;\n    \n    // one level works fine\n    @Value(value = &quot;${com.abc.pvc.ftp.path:${com.abc.pvc.path}/ftp}&quot;)\n    private Path ftpPath;\n\n    // two levels do not work\n    @Value(value = &quot;${com.abc.pvc.etc.path:${com.abc.pvc.ftp.path}/etc}&quot;)\n    private Path etcPath;\n\n}\n</code></pre>\n<p>Error message:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'com.abc.pvc.ftpPath' in value &quot;com.abc.pvc.etcPath:${ch.sbb.infop.pvc.ftp.path}/etc&quot;\n</code></pre>\n<p>Any ideas how to get this working?</p>\n"},{"tags":["java","xml","azure-api-management"],"comments":[{"owner":{"account_id":9273165,"reputation":3381,"user_id":6886501,"display_name":"Markus Meyer"},"score":0,"creation_date":1675396491,"post_id":75328111,"comment_id":132924725,"body_markdown":"Are you using Java or JavaScript?","body":"Are you using Java or JavaScript?"},{"owner":{"account_id":12036483,"reputation":980,"user_id":8804776,"display_name":"Justin Mathew"},"score":0,"creation_date":1675499437,"post_id":75328111,"comment_id":132945592,"body_markdown":"From the policy I understood that you are creating different rate limit policies for different clients. And this policy you are building on java. Say if a new client is being subscribed you will have a new policy for them. If its the right understanding can you paste the java code which you have currently and explain further","body":"From the policy I understood that you are creating different rate limit policies for different clients. And this policy you are building on java. Say if a new client is being subscribed you will have a new policy for them. If its the right understanding can you paste the java code which you have currently and explain further"},{"owner":{"account_id":22359615,"reputation":551,"user_id":16576319,"display_name":"Mahesh"},"score":0,"creation_date":1675567518,"post_id":75328111,"comment_id":132956317,"body_markdown":"@MarkusMeyer Sorry for the Confusion. I am using Java.","body":"@MarkusMeyer Sorry for the Confusion. I am using Java."},{"owner":{"account_id":22359615,"reputation":551,"user_id":16576319,"display_name":"Mahesh"},"score":0,"creation_date":1675567619,"post_id":75328111,"comment_id":132956319,"body_markdown":"@JustinMathew I have updated my code, to include the main function. Hope that suffices.","body":"@JustinMathew I have updated my code, to include the main function. Hope that suffices."},{"owner":{"account_id":12036483,"reputation":980,"user_id":8804776,"display_name":"Justin Mathew"},"score":0,"creation_date":1675652019,"post_id":75328111,"comment_id":132968681,"body_markdown":"@Mahesh this is fine I dont see a problem with this approach. Anyway one or the otherway you need to locate the children and append it.","body":"@Mahesh this is fine I dont see a problem with this approach. Anyway one or the otherway you need to locate the children and append it."}],"owner":{"account_id":22359615,"reputation":551,"user_id":16576319,"display_name":"Mahesh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677756315,"creation_date":1675366261,"question_id":75328111,"body_markdown":"Consider this huge policy. If I need to add new node to marked node (A) as a child, what \r\nwould be the ideal way to traverse through the policy and reach the node to add node element as a child. Currently I am using `document.getElementByTagName` in a nested manner to reach the point and then adding node created by `document.createElement`. What would be the ideal approach ? Is there any better way to deal with policy in APIM as I will keep policies adding programmatically for most part using `Java`. \r\n\r\n\r\nPS: This is just a sample APIM policy I use. You needn&#39;t go through the entire file. Just locate the (A) Part.\r\n\r\n    &lt;policies&gt;\r\n        &lt;inbound&gt;\r\n            &lt;base /&gt;\r\n            &lt;cors&gt;\r\n                &lt;allowed-origins&gt;\r\n                    &lt;origin&gt;*&lt;/origin&gt;\r\n                &lt;/allowed-origins&gt;\r\n                &lt;allowed-methods&gt;\r\n                    &lt;method&gt;*&lt;/method&gt;\r\n                &lt;/allowed-methods&gt;\r\n                &lt;allowed-headers&gt;\r\n                    &lt;header&gt;*&lt;/header&gt;\r\n                &lt;/allowed-headers&gt;\r\n                &lt;expose-headers&gt;\r\n                    &lt;header&gt;*&lt;/header&gt;\r\n                &lt;/expose-headers&gt;\r\n            &lt;/cors&gt;\r\n            &lt;choose&gt;\r\n                &lt;when condition=&quot;@{                     var publicEndpoints = &quot;{{ProductA-public-apis}}&quot;;                     var requestPath = context.Request.Method + &quot;-&quot; + context.Request.Url.Path;                     string[] publicEndpointsArr = publicEndpoints.Split(&#39;,&#39;);                     return publicEndpointsArr.Contains(requestPath);                 }&quot;&gt;\r\n                    &lt;set-header name=&quot;x-restricted-path&quot; exists-action=&quot;append&quot;&gt;\r\n                        &lt;value&gt;false&lt;/value&gt;\r\n                    &lt;/set-header&gt;\r\n                &lt;/when&gt;\r\n                &lt;otherwise&gt;\r\n                    &lt;validate-jwt header-name=&quot;Authorization&quot; failed-validation-httpcode=&quot;401&quot; failed-validation-error-message=&quot;Unauthorized Realm&quot; require-expiration-time=&quot;true&quot; require-scheme=&quot;Bearer&quot; require-signed-tokens=&quot;true&quot;&gt;\r\n                        &lt;openid-config url=&quot;https://oauth.theiris.club.com/auth/realms/vpm/.well-known/openid-configuration&quot; /&gt;\r\n                        &lt;openid-config url=&quot;https://oauth.theiris.club.com/auth/realms/bnym-emg/.well-known/openid-configuration&quot; /&gt;\r\n                        &lt;openid-config url=&quot;https://oauth.theiris.club.com/auth/realms/abcdefgh-india/.well-known/openid-configuration&quot; /&gt;\r\n                    &lt;/validate-jwt&gt;\r\n                    &lt;set-variable name=&quot;token&quot; value=&quot;@{\r\n                        return context.Request.Headers.GetValueOrDefault(&quot;Authorization&quot;,&quot;scheme param&quot;)\r\n                                        .Split(&#39; &#39;).Last();\r\n                    }&quot; /&gt;\r\n                    &lt;choose&gt;\r\n                        &lt;when condition=&quot;@{                         Jwt jwt;                         context.Variables.GetValueOrDefault(&quot;token&quot;,&quot;&quot;)                                     .TryParseJwt(out jwt);                         string iss = jwt.Issuer  ;                                 return !(iss.Contains(&quot;https://oauth.theiris.club.com/auth/realms/&quot;));                     }&quot;&gt;\r\n                            &lt;return-response&gt;\r\n                                &lt;set-status code=&quot;401&quot; reason=&quot;Unauthorized (Invalid Issuer)&quot; /&gt;\r\n                            &lt;/return-response&gt;\r\n                        &lt;/when&gt;\r\n                        &lt;otherwise /&gt;\r\n                    &lt;/choose&gt;\r\n                    &lt;set-header name=&quot;x-user-id&quot; exists-action=&quot;append&quot;&gt;\r\n                        &lt;value&gt;@{\r\n                                Jwt jwt;\r\n                                var roles = context.Variables.GetValueOrDefault(&quot;roles&quot;, &quot;&quot;);\r\n                                context.Variables.GetValueOrDefault(&quot;token&quot;,&quot;&quot;)\r\n                                            .TryParseJwt(out jwt);\r\n                                \r\n                                return jwt.Claims[&quot;sub&quot;][0]; \r\n                            }&lt;/value&gt;\r\n                    &lt;/set-header&gt;\r\n                    &lt;set-variable name=&quot;roles&quot; value=&quot;@{\r\n                            string allRoles = &quot;UNKNOWN&quot;;\r\n                            Jwt jwt;\r\n                            context.Variables.GetValueOrDefault(&quot;token&quot;,&quot;&quot;)\r\n                                        .TryParseJwt(out jwt);\r\n                            string realmRoles = (jwt.Claims[&quot;realm_access&quot;][0]);\r\n                            var realmRolesJson = JObject.Parse(realmRoles)[&quot;roles&quot;];\r\n                            allRoles = String.Join(&quot;,&quot;, realmRolesJson);\r\n                            return allRoles;\r\n                            }&quot; /&gt;\r\n                    &lt;choose&gt; --------------------------------&gt; (A)\r\n                        &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;66845034-db2a-4cde-8be9-015eedf316ae&quot;))&quot;&gt;\r\n                            &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-66845034-db2a-4cde-8be9-015eedf316ae&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-66845034-db2a-4cde-8be9-015eedf316ae&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;15638400&quot; counter-key=&quot;ProductA-quota-per-sub-66845034-db2a-4cde-8be9-015eedf316ae&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                        &lt;/when&gt;\r\n                        &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;ad591921-4b1b-457a-9af2-3c9437823a32&quot;))&quot;&gt;\r\n                            &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-ad591921-4b1b-457a-9af2-3c9437823a32&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-ad591921-4b1b-457a-9af2-3c9437823a32&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;31536000&quot; counter-key=&quot;ProductA-quota-per-sub-ad591921-4b1b-457a-9af2-3c9437823a32&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                        &lt;/when&gt;\r\n                        &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;7debc949-579e-4173-9cdf-398f027df36a&quot;))&quot;&gt;\r\n                            &lt;rate-limit-by-key calls=&quot;1&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;7776000&quot; counter-key=&quot;ProductA-quota-per-sub-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                        &lt;/when&gt;\r\n                        &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;7debc949-579e-4173-9cdf-398f027df36a&quot;))&quot;&gt;\r\n                            &lt;rate-limit-by-key calls=&quot;10&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;2505600&quot; counter-key=&quot;ProductA-quota-per-sub-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                        &lt;/when&gt;\r\n                        &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;7debc949-579e-4173-9cdf-398f027df36a&quot;))&quot;&gt;\r\n                            &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;2505600&quot; counter-key=&quot;ProductA-quota-per-sub-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                        &lt;/when&gt;\r\n                        &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;7debc949-579e-4173-9cdf-398f027df36a&quot;))&quot;&gt;\r\n                            &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;2505600&quot; counter-key=&quot;ProductA-quota-per-sub-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                        &lt;/when&gt;\r\n                        &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;de4c0b8d-0ede-4236-bf0d-bd6db6c3c92a&quot;))&quot;&gt;\r\n                            &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-de4c0b8d-0ede-4236-bf0d-bd6db6c3c92a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-de4c0b8d-0ede-4236-bf0d-bd6db6c3c92a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                            &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;2678400&quot; counter-key=&quot;ProductA-quota-per-sub-de4c0b8d-0ede-4236-bf0d-bd6db6c3c92a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\r\n                        &lt;/when&gt;\r\n                        &lt;otherwise /&gt;\r\n                    &lt;/choose&gt;\r\n                &lt;/otherwise&gt;\r\n            &lt;/choose&gt;\r\n            &lt;set-backend-service base-url=&quot;https://producta.club&quot; /&gt;\r\n        &lt;/inbound&gt;\r\n        &lt;backend&gt;\r\n            &lt;base /&gt;\r\n        &lt;/backend&gt;\r\n        &lt;outbound&gt;\r\n            &lt;base /&gt;\r\n        &lt;/outbound&gt;\r\n        &lt;on-error&gt;\r\n            &lt;choose&gt;\r\n                &lt;when condition=&quot;@(context.LastError.Reason == &quot;RateLimitExceeded&quot;)&quot;&gt;\r\n                    &lt;return-response&gt;\r\n                        &lt;set-status code=&quot;429&quot; /&gt;\r\n                        &lt;set-header name=&quot;Content-Type&quot; exists-action=&quot;override&quot;&gt;\r\n                            &lt;value&gt;application/json&lt;/value&gt;\r\n                        &lt;/set-header&gt;\r\n                        &lt;set-body&gt;{\r\n                            &quot;Limit Exceeded&quot;\r\n                     }&lt;/set-body&gt;\r\n                    &lt;/return-response&gt;\r\n                &lt;/when&gt;\r\n            &lt;/choose&gt;\r\n        &lt;/on-error&gt;\r\n    &lt;/policies&gt;\r\n\r\nA Sample Part of Code, how I am doing this,\r\nThis is just to get to gist of what I am doing, to validate this approach. \r\n\r\n    private String getXMLWithUpdatedJWTPolicy(Document doc, String serviceName, Organization org) {\r\n        Node validateJWTNode = getValidateJWTNode(doc, serviceName);\r\n        Element openIdConfig = doc.createElement(NODE_OPENID_CONFIG);\r\n        String openIdConfigUrl = String.format(openIdConfigBaseUrl, org.getRealm());\r\n        openIdConfig.setAttribute(NODE_OPENID_CONFIG_ATTR_URL, openIdConfigUrl);\r\n        validateJWTNode.appendChild(openIdConfig);\r\n        // Create RateLimitSection if it doesnt exist.\r\n        if(Objects.isNull(getQuotaAndLimitNodes(doc)) ){\r\n            log.info(&quot;Found that there is not section for rate limiting&quot;);\r\n            Node quotaLimitParent =  getQuotaAndLimitParentNodes(doc);\r\n            Element rateLimitSection = doc.createElement(&quot;choose&quot;);\r\n            rateLimitSection.setAttribute(&quot;id&quot;, GatewayConstants.RATE_LIMIT_SECTION_ID);\r\n            Element otherwiseNode = doc.createElement(&quot;otherwise&quot;);\r\n            rateLimitSection.appendChild(otherwiseNode);\r\n            quotaLimitParent.appendChild(rateLimitSection);\r\n        }\r\n        setQuotaAndLimit(doc, org.getId());\r\n        return policyService.convertDocumentToString(doc);\r\n    }\r\n\r\n\r\nThanks ","title":"How to iterate through a large APIM Policy programmatically using Java?","body":"<p>Consider this huge policy. If I need to add new node to marked node (A) as a child, what\nwould be the ideal way to traverse through the policy and reach the node to add node element as a child. Currently I am using <code>document.getElementByTagName</code> in a nested manner to reach the point and then adding node created by <code>document.createElement</code>. What would be the ideal approach ? Is there any better way to deal with policy in APIM as I will keep policies adding programmatically for most part using <code>Java</code>.</p>\n<p>PS: This is just a sample APIM policy I use. You needn't go through the entire file. Just locate the (A) Part.</p>\n<pre><code>&lt;policies&gt;\n    &lt;inbound&gt;\n        &lt;base /&gt;\n        &lt;cors&gt;\n            &lt;allowed-origins&gt;\n                &lt;origin&gt;*&lt;/origin&gt;\n            &lt;/allowed-origins&gt;\n            &lt;allowed-methods&gt;\n                &lt;method&gt;*&lt;/method&gt;\n            &lt;/allowed-methods&gt;\n            &lt;allowed-headers&gt;\n                &lt;header&gt;*&lt;/header&gt;\n            &lt;/allowed-headers&gt;\n            &lt;expose-headers&gt;\n                &lt;header&gt;*&lt;/header&gt;\n            &lt;/expose-headers&gt;\n        &lt;/cors&gt;\n        &lt;choose&gt;\n            &lt;when condition=&quot;@{                     var publicEndpoints = &quot;{{ProductA-public-apis}}&quot;;                     var requestPath = context.Request.Method + &quot;-&quot; + context.Request.Url.Path;                     string[] publicEndpointsArr = publicEndpoints.Split(',');                     return publicEndpointsArr.Contains(requestPath);                 }&quot;&gt;\n                &lt;set-header name=&quot;x-restricted-path&quot; exists-action=&quot;append&quot;&gt;\n                    &lt;value&gt;false&lt;/value&gt;\n                &lt;/set-header&gt;\n            &lt;/when&gt;\n            &lt;otherwise&gt;\n                &lt;validate-jwt header-name=&quot;Authorization&quot; failed-validation-httpcode=&quot;401&quot; failed-validation-error-message=&quot;Unauthorized Realm&quot; require-expiration-time=&quot;true&quot; require-scheme=&quot;Bearer&quot; require-signed-tokens=&quot;true&quot;&gt;\n                    &lt;openid-config url=&quot;https://oauth.theiris.club.com/auth/realms/vpm/.well-known/openid-configuration&quot; /&gt;\n                    &lt;openid-config url=&quot;https://oauth.theiris.club.com/auth/realms/bnym-emg/.well-known/openid-configuration&quot; /&gt;\n                    &lt;openid-config url=&quot;https://oauth.theiris.club.com/auth/realms/abcdefgh-india/.well-known/openid-configuration&quot; /&gt;\n                &lt;/validate-jwt&gt;\n                &lt;set-variable name=&quot;token&quot; value=&quot;@{\n                    return context.Request.Headers.GetValueOrDefault(&quot;Authorization&quot;,&quot;scheme param&quot;)\n                                    .Split(' ').Last();\n                }&quot; /&gt;\n                &lt;choose&gt;\n                    &lt;when condition=&quot;@{                         Jwt jwt;                         context.Variables.GetValueOrDefault(&quot;token&quot;,&quot;&quot;)                                     .TryParseJwt(out jwt);                         string iss = jwt.Issuer  ;                                 return !(iss.Contains(&quot;https://oauth.theiris.club.com/auth/realms/&quot;));                     }&quot;&gt;\n                        &lt;return-response&gt;\n                            &lt;set-status code=&quot;401&quot; reason=&quot;Unauthorized (Invalid Issuer)&quot; /&gt;\n                        &lt;/return-response&gt;\n                    &lt;/when&gt;\n                    &lt;otherwise /&gt;\n                &lt;/choose&gt;\n                &lt;set-header name=&quot;x-user-id&quot; exists-action=&quot;append&quot;&gt;\n                    &lt;value&gt;@{\n                            Jwt jwt;\n                            var roles = context.Variables.GetValueOrDefault(&quot;roles&quot;, &quot;&quot;);\n                            context.Variables.GetValueOrDefault(&quot;token&quot;,&quot;&quot;)\n                                        .TryParseJwt(out jwt);\n                            \n                            return jwt.Claims[&quot;sub&quot;][0]; \n                        }&lt;/value&gt;\n                &lt;/set-header&gt;\n                &lt;set-variable name=&quot;roles&quot; value=&quot;@{\n                        string allRoles = &quot;UNKNOWN&quot;;\n                        Jwt jwt;\n                        context.Variables.GetValueOrDefault(&quot;token&quot;,&quot;&quot;)\n                                    .TryParseJwt(out jwt);\n                        string realmRoles = (jwt.Claims[&quot;realm_access&quot;][0]);\n                        var realmRolesJson = JObject.Parse(realmRoles)[&quot;roles&quot;];\n                        allRoles = String.Join(&quot;,&quot;, realmRolesJson);\n                        return allRoles;\n                        }&quot; /&gt;\n                &lt;choose&gt; --------------------------------&gt; (A)\n                    &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;66845034-db2a-4cde-8be9-015eedf316ae&quot;))&quot;&gt;\n                        &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-66845034-db2a-4cde-8be9-015eedf316ae&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-66845034-db2a-4cde-8be9-015eedf316ae&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;15638400&quot; counter-key=&quot;ProductA-quota-per-sub-66845034-db2a-4cde-8be9-015eedf316ae&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                    &lt;/when&gt;\n                    &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;ad591921-4b1b-457a-9af2-3c9437823a32&quot;))&quot;&gt;\n                        &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-ad591921-4b1b-457a-9af2-3c9437823a32&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-ad591921-4b1b-457a-9af2-3c9437823a32&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;31536000&quot; counter-key=&quot;ProductA-quota-per-sub-ad591921-4b1b-457a-9af2-3c9437823a32&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                    &lt;/when&gt;\n                    &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;7debc949-579e-4173-9cdf-398f027df36a&quot;))&quot;&gt;\n                        &lt;rate-limit-by-key calls=&quot;1&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;7776000&quot; counter-key=&quot;ProductA-quota-per-sub-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                    &lt;/when&gt;\n                    &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;7debc949-579e-4173-9cdf-398f027df36a&quot;))&quot;&gt;\n                        &lt;rate-limit-by-key calls=&quot;10&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;2505600&quot; counter-key=&quot;ProductA-quota-per-sub-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                    &lt;/when&gt;\n                    &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;7debc949-579e-4173-9cdf-398f027df36a&quot;))&quot;&gt;\n                        &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;2505600&quot; counter-key=&quot;ProductA-quota-per-sub-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                    &lt;/when&gt;\n                    &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;7debc949-579e-4173-9cdf-398f027df36a&quot;))&quot;&gt;\n                        &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;2505600&quot; counter-key=&quot;ProductA-quota-per-sub-7debc949-579e-4173-9cdf-398f027df36a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                    &lt;/when&gt;\n                    &lt;when condition=&quot;@(context.Request.Headers.GetValueOrDefault(&quot;x-org-id&quot;, &quot;&quot;).Equals(&quot;de4c0b8d-0ede-4236-bf0d-bd6db6c3c92a&quot;))&quot;&gt;\n                        &lt;rate-limit-by-key calls=&quot;1000&quot; renewal-period=&quot;60&quot; counter-key=&quot;ProductA-rate-limit-de4c0b8d-0ede-4236-bf0d-bd6db6c3c92a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;1000&quot; renewal-period=&quot;86400&quot; counter-key=&quot;ProductA-quota-per-day-de4c0b8d-0ede-4236-bf0d-bd6db6c3c92a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                        &lt;quota-by-key calls=&quot;2147483647&quot; renewal-period=&quot;2678400&quot; counter-key=&quot;ProductA-quota-per-sub-de4c0b8d-0ede-4236-bf0d-bd6db6c3c92a&quot; increment-condition=&quot;@(context.Response.StatusCode &gt;= 200 &amp;&amp; context.Response.StatusCode &lt; 400)&quot; /&gt;\n                    &lt;/when&gt;\n                    &lt;otherwise /&gt;\n                &lt;/choose&gt;\n            &lt;/otherwise&gt;\n        &lt;/choose&gt;\n        &lt;set-backend-service base-url=&quot;https://producta.club&quot; /&gt;\n    &lt;/inbound&gt;\n    &lt;backend&gt;\n        &lt;base /&gt;\n    &lt;/backend&gt;\n    &lt;outbound&gt;\n        &lt;base /&gt;\n    &lt;/outbound&gt;\n    &lt;on-error&gt;\n        &lt;choose&gt;\n            &lt;when condition=&quot;@(context.LastError.Reason == &quot;RateLimitExceeded&quot;)&quot;&gt;\n                &lt;return-response&gt;\n                    &lt;set-status code=&quot;429&quot; /&gt;\n                    &lt;set-header name=&quot;Content-Type&quot; exists-action=&quot;override&quot;&gt;\n                        &lt;value&gt;application/json&lt;/value&gt;\n                    &lt;/set-header&gt;\n                    &lt;set-body&gt;{\n                        &quot;Limit Exceeded&quot;\n                 }&lt;/set-body&gt;\n                &lt;/return-response&gt;\n            &lt;/when&gt;\n        &lt;/choose&gt;\n    &lt;/on-error&gt;\n&lt;/policies&gt;\n</code></pre>\n<p>A Sample Part of Code, how I am doing this,\nThis is just to get to gist of what I am doing, to validate this approach.</p>\n<pre><code>private String getXMLWithUpdatedJWTPolicy(Document doc, String serviceName, Organization org) {\n    Node validateJWTNode = getValidateJWTNode(doc, serviceName);\n    Element openIdConfig = doc.createElement(NODE_OPENID_CONFIG);\n    String openIdConfigUrl = String.format(openIdConfigBaseUrl, org.getRealm());\n    openIdConfig.setAttribute(NODE_OPENID_CONFIG_ATTR_URL, openIdConfigUrl);\n    validateJWTNode.appendChild(openIdConfig);\n    // Create RateLimitSection if it doesnt exist.\n    if(Objects.isNull(getQuotaAndLimitNodes(doc)) ){\n        log.info(&quot;Found that there is not section for rate limiting&quot;);\n        Node quotaLimitParent =  getQuotaAndLimitParentNodes(doc);\n        Element rateLimitSection = doc.createElement(&quot;choose&quot;);\n        rateLimitSection.setAttribute(&quot;id&quot;, GatewayConstants.RATE_LIMIT_SECTION_ID);\n        Element otherwiseNode = doc.createElement(&quot;otherwise&quot;);\n        rateLimitSection.appendChild(otherwiseNode);\n        quotaLimitParent.appendChild(rateLimitSection);\n    }\n    setQuotaAndLimit(doc, org.getId());\n    return policyService.convertDocumentToString(doc);\n}\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","git","operating-system","processing"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1677698114,"post_id":75607428,"comment_id":133391262,"body_markdown":"You’re probably seeing the last line of an error message, which happens to be a blank line.  After you close the BufferedReader, check whether `p.waitFor()` returns zero.  If the return code is not zero, the command failed.","body":"You’re probably seeing the last line of an error message, which happens to be a blank line.  After you close the BufferedReader, check whether <code>p.waitFor()</code> returns zero.  If the return code is not zero, the command failed."},{"owner":{"account_id":9241028,"reputation":57,"user_id":7056614,"display_name":"DCrown"},"score":0,"creation_date":1677756044,"post_id":75607428,"comment_id":133402396,"body_markdown":"It is returning zero. I do believe the issue is that when calling processing to run the sketch, processing runs it .exe instance on the installation folder. Thus, when calling the command there are no git instances at that folder","body":"It is returning zero. I do believe the issue is that when calling processing to run the sketch, processing runs it .exe instance on the installation folder. Thus, when calling the command there are no git instances at that folder"}],"answers":[{"tags":[],"owner":{"account_id":9241028,"reputation":57,"user_id":7056614,"display_name":"DCrown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677756312,"creation_date":1677756312,"answer_id":75614784,"question_id":75607428,"body_markdown":"I found out that Processing does not necessarily run at the location of the sketch. Thus, when running the `git describe --tags` from the ProcessBuilder, the command ran at the location of `processing.exe`.\r\n\r\nA simple solution was to set the directory of ProcessBuilder like this:\r\n\r\n     pb.directory(new File(sketchPath())); // Run at sketch directory","title":"ProcessBuilder not working with Processing","body":"<p>I found out that Processing does not necessarily run at the location of the sketch. Thus, when running the <code>git describe --tags</code> from the ProcessBuilder, the command ran at the location of <code>processing.exe</code>.</p>\n<p>A simple solution was to set the directory of ProcessBuilder like this:</p>\n<pre><code> pb.directory(new File(sketchPath())); // Run at sketch directory\n</code></pre>\n"}],"owner":{"account_id":9241028,"reputation":57,"user_id":7056614,"display_name":"DCrown"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75614784,"answer_count":1,"score":0,"last_activity_date":1677756312,"creation_date":1677693925,"question_id":75607428,"body_markdown":"I am working on creating a sketch with Processing, and I would like to add the version number to it. I&#39;m trying to run the following:\r\n\r\n    \r\n    try {\r\n        ProcessBuilder pb = new ProcessBuilder(&quot;git&quot;, &quot;describe&quot;, &quot;--tags&quot;);\r\n        pb.redirectErrorStream(true);\r\n        Process p = pb.start();\r\n        BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n\r\n        String line;\r\n        while (true) {\r\n            line = br.readLine();\r\n            if (line == null) { break; }\r\n            System.out.println(line);\r\n            version = line;\r\n        }\r\n        // Close buffer reader\r\n        br.close();\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\nHowever, I always get a blank response. If I run the command on the terminal I get the version number. What could be the reason for the above to get only a blank response? \r\n\r\nMy thinking is that probably processing is running on its separate directory, rather than running directly where the sketch is located. If so, how could I make the code above run at the sketch location?","title":"ProcessBuilder not working with Processing","body":"<p>I am working on creating a sketch with Processing, and I would like to add the version number to it. I'm trying to run the following:</p>\n<pre><code>try {\n    ProcessBuilder pb = new ProcessBuilder(&quot;git&quot;, &quot;describe&quot;, &quot;--tags&quot;);\n    pb.redirectErrorStream(true);\n    Process p = pb.start();\n    BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));\n\n    String line;\n    while (true) {\n        line = br.readLine();\n        if (line == null) { break; }\n        System.out.println(line);\n        version = line;\n    }\n    // Close buffer reader\n    br.close();\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>However, I always get a blank response. If I run the command on the terminal I get the version number. What could be the reason for the above to get only a blank response?</p>\n<p>My thinking is that probably processing is running on its separate directory, rather than running directly where the sketch is located. If so, how could I make the code above run at the sketch location?</p>\n"},{"tags":["java","performance","jmeter","load"],"answers":[{"comments":[{"owner":{"account_id":27915022,"reputation":1,"user_id":21316350,"display_name":"Subramanian I"},"score":0,"creation_date":1677756112,"post_id":75611824,"comment_id":133402412,"body_markdown":"I added my full code","body":"I added my full code"},{"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"score":0,"creation_date":1677756291,"post_id":75611824,"comment_id":133402462,"body_markdown":"Probably there is something wrong with your project dependencies. You can take i.e. [jmeter-from-code](https://bitbucket.org/blazemeter/jmeter-from-code/src/master/) example project as a basis. See [JMeter Command Line Overview: 5 Ways To Launch a Test](https://www.blazemeter.com/blog/jmeter-command-line) article for general information on various ways of launching a JMeter test in non-GUI mode.","body":"Probably there is something wrong with your project dependencies. You can take i.e. <a href=\"https://bitbucket.org/blazemeter/jmeter-from-code/src/master/\" rel=\"nofollow noreferrer\">jmeter-from-code</a> example project as a basis. See <a href=\"https://www.blazemeter.com/blog/jmeter-command-line\" rel=\"nofollow noreferrer\">JMeter Command Line Overview: 5 Ways To Launch a Test</a> article for general information on various ways of launching a JMeter test in non-GUI mode."}],"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677737008,"creation_date":1677737008,"answer_id":75611824,"question_id":75611645,"body_markdown":"As per [SSL Encryption][1] chapter of JMeter Documentation:\r\n\r\n&gt;**The JMeter HTTP samplers are configured to accept all certificates, whether trusted or not, regardless of validity periods, etc.** This is to allow the maximum flexibility in testing servers. \r\n\r\nIt means that if you use [HTTP Request][2] sampler it will be successfully executed even if there are problems with server-side certificates. \r\n\r\nIf you wrote your own java code and trying to use it in [JSR223 Test Element][3] or trying to [create a JMeter plugin][4] you can create a special SSLSocketFactory which will trust all certificates like it&#39;s described in [Trusting all certificates using HttpClient over HTTPS][5] thread \r\n\r\nIn any case we cannot comprehensively assist without seeing your full code. \r\n\r\n\r\n  [1]: https://jmeter.apache.org/usermanual/get-started.html#opt_ssl\r\n  [2]: https://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request\r\n  [3]: https://jmeter.apache.org/usermanual/best-practices.html#jsr223\r\n  [4]: https://www.blazemeter.com/blog/jmeter-plugin-development\r\n  [5]: https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https","title":"Why Exception occured in Jmeter java code when try to execute?","body":"<p>As per <a href=\"https://jmeter.apache.org/usermanual/get-started.html#opt_ssl\" rel=\"nofollow noreferrer\">SSL Encryption</a> chapter of JMeter Documentation:</p>\n<blockquote>\n<p><strong>The JMeter HTTP samplers are configured to accept all certificates, whether trusted or not, regardless of validity periods, etc.</strong> This is to allow the maximum flexibility in testing servers.</p>\n</blockquote>\n<p>It means that if you use <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request\" rel=\"nofollow noreferrer\">HTTP Request</a> sampler it will be successfully executed even if there are problems with server-side certificates.</p>\n<p>If you wrote your own java code and trying to use it in <a href=\"https://jmeter.apache.org/usermanual/best-practices.html#jsr223\" rel=\"nofollow noreferrer\">JSR223 Test Element</a> or trying to <a href=\"https://www.blazemeter.com/blog/jmeter-plugin-development\" rel=\"nofollow noreferrer\">create a JMeter plugin</a> you can create a special SSLSocketFactory which will trust all certificates like it's described in <a href=\"https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https\">Trusting all certificates using HttpClient over HTTPS</a> thread</p>\n<p>In any case we cannot comprehensively assist without seeing your full code.</p>\n"}],"owner":{"account_id":27915022,"reputation":1,"user_id":21316350,"display_name":"Subramanian I"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677756093,"creation_date":1677735290,"question_id":75611645,"body_markdown":"```package Performance;\r\nimport java.io.File;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\nimport java.util.Scanner;\r\nimport org.apache.jmeter.config.Arguments;\r\nimport org.apache.jmeter.config.gui.ArgumentsPanel;\r\nimport org.apache.jmeter.control.LoopController;\r\nimport org.apache.jmeter.control.gui.LoopControlPanel;\r\nimport org.apache.jmeter.control.gui.TestPlanGui;\r\nimport org.apache.jmeter.engine.StandardJMeterEngine;\r\nimport org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui;\r\nimport org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy;\r\nimport org.apache.jmeter.reporters.ResultCollector;\r\nimport org.apache.jmeter.reporters.Summariser;\r\nimport org.apache.jmeter.save.SaveService;\r\nimport org.apache.jmeter.testelement.TestElement;\r\nimport org.apache.jmeter.testelement.TestPlan;\r\nimport org.apache.jmeter.threads.ThreadGroup;\r\nimport org.apache.jmeter.threads.gui.ThreadGroupGui;\r\nimport org.apache.jmeter.util.JMeterUtils;\r\nimport org.apache.jorphan.collections.HashTree;\r\n\r\npublic class Load Performance {\r\n    \r\n    static Scanner s = new Scanner(System.in);            \r\n\r\n    public static void main(String[] arg) throws Exception {\r\n        \r\n        // Prompt user to enter URL\r\n        System.out.print(&quot;Enter URL: &quot;);\r\n        String url = System.console().readLine();\r\n        System.out.println(&quot;Enter the No.of USER: &quot;);\r\n        int user = s.nextInt();\r\n        System.out.println(&quot;Enter the No.of LOOP: &quot;);\r\n        int loop = s.nextInt();\r\n        System.out.println(&quot;Enter the ramp up: &quot;);\r\n        int rampup = s.nextInt();\r\n\r\n        String jmeter = &quot;~/Downloads/Apache_Jars/apache-jmeter-5.5&quot;;\r\n        File jmeterHome=new File(jmeter);\r\n        String slash = System.getProperty(&quot;file.separator&quot;);\r\n\r\n        if (jmeterHome.exists()) {\r\n            File jmeterProperties = new File(jmeterHome.getPath() + slash + &quot;bin&quot; + slash + &quot;jmeter.properties&quot;);\r\n            if (jmeterProperties.exists()) {\r\n                //JMeter Engine\r\n                StandardJMeterEngine jmeter1 = new StandardJMeterEngine();\r\n\r\n                //JMeter initialization (properties, log levels, locale, etc)\r\n                JMeterUtils.setJMeterHome(jmeterHome.getPath());\r\n                JMeterUtils.loadJMeterProperties(jmeterProperties.getPath());\r\n                JMeterUtils.initLogging();// you can comment this line out to see extra log messages of i.e. DEBUG level\r\n                JMeterUtils.initLocale();\r\n\r\n                // JMeter Test Plan, basically JOrphan HashTree\r\n                HashTree testPlanTree = new HashTree();\r\n\r\n                //HTTP Sampler - open client\r\n                HTTPSamplerProxy client = new HTTPSamplerProxy();\r\n                client.setDomain(url);          \r\n                client.setPath(&quot;/&quot;);\r\n                client.setMethod(&quot;GET&quot;);\r\n                client.setName(&quot;Open Client&quot;);\r\n                client.setProperty(TestElement.TEST_CLASS, HTTPSamplerProxy.class.getName());\r\n                client.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());\r\n\r\n                // Loop Controller\r\n                LoopController loopController = new LoopController();\r\n                loopController.setLoops(loop);\r\n                loopController.setFirst(true);\r\n                loopController.setProperty(TestElement.TEST_CLASS, LoopController.class.getName());\r\n                loopController.setProperty(TestElement.GUI_CLASS, LoopControlPanel.class.getName());\r\n                loopController.initialize();\r\n\r\n                // Thread Group\r\n                ThreadGroup threadGroup = new ThreadGroup();\r\n                threadGroup.setName(&quot;Example Thread Group&quot;);\r\n                threadGroup.setNumThreads(user);\r\n                threadGroup.setRampUp(rampup);\r\n                threadGroup.setSamplerController(loopController);\r\n                threadGroup.setProperty(TestElement.TEST_CLASS, ThreadGroup.class.getName());\r\n                threadGroup.setProperty(TestElement.GUI_CLASS, ThreadGroupGui.class.getName());\r\n\r\n                // Test Plan\r\n                TestPlan testPlan = new TestPlan(&quot;Create JMeter Script From Java Code&quot;);\r\n                testPlan.setProperty(TestElement.TEST_CLASS, TestPlan.class.getName());\r\n                testPlan.setProperty(TestElement.GUI_CLASS, TestPlanGui.class.getName());\r\n                testPlan.setUserDefinedVariables((Arguments) new ArgumentsPanel().createTestElement());\r\n\r\n                // Construct Test Plan from previously initialized elements\r\n                testPlanTree.add(testPlan);\r\n                HashTree threadGroupHashTree = testPlanTree.add(testPlan, threadGroup);\r\n                threadGroupHashTree.add(client);\r\n\r\n                // save generated test plan to JMeter&#39;s .jmx file format\r\n                SaveService.saveTree(testPlanTree, Files.newOutputStream(Paths.get(jmeterHome + slash + &quot;example.jmx&quot;)));\r\n\r\n                Summariser summer = null;\r\n                String summariserName = JMeterUtils.getPropDefault(&quot;summariser.name&quot;, &quot;summary&quot;);\r\n                if (summariserName.length() &gt; 0) {\r\n                    summer = new Summariser(summariserName);\r\n                }\r\n\r\n                // Store execution results into a .jtl file\r\n                String logFile = jmeterHome + slash + &quot;example.jtl&quot;;\r\n                ResultCollector logger = new ResultCollector(summer);\r\n                logger.setFilename(logFile);\r\n                testPlanTree.add(testPlanTree.getArray()[0], logger);\r\n\r\n                // Run Test Plan\r\n                jmeter1.configure(testPlanTree);\r\n                jmeter1.run();\r\n\r\n                System.out.println(&quot;Test completed. See &quot; + jmeterHome + slash + &quot;example.jtl file for results&quot;);\r\n                System.out.println(&quot;JMeter .jmx script is available at &quot; + jmeterHome + slash + &quot;example.jmx&quot;);\r\n                System.exit(0);\r\n            }\r\n        }\r\n        System.err.println(&quot;jmeter.home property is not set or pointing to incorrect location&quot;);\r\n        System.exit(1);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n&gt; Exception in thread &quot;Example Thread Group 1-1&quot;\r\n&gt; java.lang.NoSuchMethodError:\r\n&gt; org.apache.jmeter.util.HttpSSLProtocolSocketFactory.&lt;init&gt;(Lorg/apache/jmeter/util/JsseSSLManager;I)V\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.util.HC4TrustAllSSLSocketFactory.&lt;init&gt;(HC4TrustAllSSLSocketFactory.java:55)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.LazySchemeSocketFactory$AdapteeHolder.checkAndInit(LazySchemeSocketFactory.java:52)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.LazySchemeSocketFactory$AdapteeHolder.&lt;clinit&gt;(LazySchemeSocketFactory.java:44)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.LazySchemeSocketFactory.createSocket(LazySchemeSocketFactory.java:79)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:168)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:326)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.MeasuringConnectionManager$MeasuredConnection.open(MeasuringConnectionManager.java:114)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n&gt; \tat\r\n&gt; org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.executeRequest(HTTPHC4Impl.java:654)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:413)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:76)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1166)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1155)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.threads.JMeterThread.doSampling(JMeterThread.java:651)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:570)\r\n&gt; \tat\r\n&gt; org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:501)\r\n&gt; \tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:268)\r\n&gt; \tat java.lang.Thread.run(Thread.java:748)\r\n\r\n\r\nI written a java code for load performance and i compile that with google url its execute successfully but i enter my url which has no ssl certificate, The code is doesn&#39;t execute and its display this exception,","title":"Why Exception occured in Jmeter java code when try to execute?","body":"<pre><code>import java.io.File;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.Scanner;\nimport org.apache.jmeter.config.Arguments;\nimport org.apache.jmeter.config.gui.ArgumentsPanel;\nimport org.apache.jmeter.control.LoopController;\nimport org.apache.jmeter.control.gui.LoopControlPanel;\nimport org.apache.jmeter.control.gui.TestPlanGui;\nimport org.apache.jmeter.engine.StandardJMeterEngine;\nimport org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui;\nimport org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy;\nimport org.apache.jmeter.reporters.ResultCollector;\nimport org.apache.jmeter.reporters.Summariser;\nimport org.apache.jmeter.save.SaveService;\nimport org.apache.jmeter.testelement.TestElement;\nimport org.apache.jmeter.testelement.TestPlan;\nimport org.apache.jmeter.threads.ThreadGroup;\nimport org.apache.jmeter.threads.gui.ThreadGroupGui;\nimport org.apache.jmeter.util.JMeterUtils;\nimport org.apache.jorphan.collections.HashTree;\n\npublic class Load Performance {\n    \n    static Scanner s = new Scanner(System.in);            \n\n    public static void main(String[] arg) throws Exception {\n        \n        // Prompt user to enter URL\n        System.out.print(&quot;Enter URL: &quot;);\n        String url = System.console().readLine();\n        System.out.println(&quot;Enter the No.of USER: &quot;);\n        int user = s.nextInt();\n        System.out.println(&quot;Enter the No.of LOOP: &quot;);\n        int loop = s.nextInt();\n        System.out.println(&quot;Enter the ramp up: &quot;);\n        int rampup = s.nextInt();\n\n        String jmeter = &quot;~/Downloads/Apache_Jars/apache-jmeter-5.5&quot;;\n        File jmeterHome=new File(jmeter);\n        String slash = System.getProperty(&quot;file.separator&quot;);\n\n        if (jmeterHome.exists()) {\n            File jmeterProperties = new File(jmeterHome.getPath() + slash + &quot;bin&quot; + slash + &quot;jmeter.properties&quot;);\n            if (jmeterProperties.exists()) {\n                //JMeter Engine\n                StandardJMeterEngine jmeter1 = new StandardJMeterEngine();\n\n                //JMeter initialization (properties, log levels, locale, etc)\n                JMeterUtils.setJMeterHome(jmeterHome.getPath());\n                JMeterUtils.loadJMeterProperties(jmeterProperties.getPath());\n                JMeterUtils.initLogging();// you can comment this line out to see extra log messages of i.e. DEBUG level\n                JMeterUtils.initLocale();\n\n                // JMeter Test Plan, basically JOrphan HashTree\n                HashTree testPlanTree = new HashTree();\n\n                //HTTP Sampler - open client\n                HTTPSamplerProxy client = new HTTPSamplerProxy();\n                client.setDomain(url);          \n                client.setPath(&quot;/&quot;);\n                client.setMethod(&quot;GET&quot;);\n                client.setName(&quot;Open Client&quot;);\n                client.setProperty(TestElement.TEST_CLASS, HTTPSamplerProxy.class.getName());\n                client.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());\n\n                // Loop Controller\n                LoopController loopController = new LoopController();\n                loopController.setLoops(loop);\n                loopController.setFirst(true);\n                loopController.setProperty(TestElement.TEST_CLASS, LoopController.class.getName());\n                loopController.setProperty(TestElement.GUI_CLASS, LoopControlPanel.class.getName());\n                loopController.initialize();\n\n                // Thread Group\n                ThreadGroup threadGroup = new ThreadGroup();\n                threadGroup.setName(&quot;Example Thread Group&quot;);\n                threadGroup.setNumThreads(user);\n                threadGroup.setRampUp(rampup);\n                threadGroup.setSamplerController(loopController);\n                threadGroup.setProperty(TestElement.TEST_CLASS, ThreadGroup.class.getName());\n                threadGroup.setProperty(TestElement.GUI_CLASS, ThreadGroupGui.class.getName());\n\n                // Test Plan\n                TestPlan testPlan = new TestPlan(&quot;Create JMeter Script From Java Code&quot;);\n                testPlan.setProperty(TestElement.TEST_CLASS, TestPlan.class.getName());\n                testPlan.setProperty(TestElement.GUI_CLASS, TestPlanGui.class.getName());\n                testPlan.setUserDefinedVariables((Arguments) new ArgumentsPanel().createTestElement());\n\n                // Construct Test Plan from previously initialized elements\n                testPlanTree.add(testPlan);\n                HashTree threadGroupHashTree = testPlanTree.add(testPlan, threadGroup);\n                threadGroupHashTree.add(client);\n\n                // save generated test plan to JMeter's .jmx file format\n                SaveService.saveTree(testPlanTree, Files.newOutputStream(Paths.get(jmeterHome + slash + &quot;example.jmx&quot;)));\n\n                Summariser summer = null;\n                String summariserName = JMeterUtils.getPropDefault(&quot;summariser.name&quot;, &quot;summary&quot;);\n                if (summariserName.length() &gt; 0) {\n                    summer = new Summariser(summariserName);\n                }\n\n                // Store execution results into a .jtl file\n                String logFile = jmeterHome + slash + &quot;example.jtl&quot;;\n                ResultCollector logger = new ResultCollector(summer);\n                logger.setFilename(logFile);\n                testPlanTree.add(testPlanTree.getArray()[0], logger);\n\n                // Run Test Plan\n                jmeter1.configure(testPlanTree);\n                jmeter1.run();\n\n                System.out.println(&quot;Test completed. See &quot; + jmeterHome + slash + &quot;example.jtl file for results&quot;);\n                System.out.println(&quot;JMeter .jmx script is available at &quot; + jmeterHome + slash + &quot;example.jmx&quot;);\n                System.exit(0);\n            }\n        }\n        System.err.println(&quot;jmeter.home property is not set or pointing to incorrect location&quot;);\n        System.exit(1);\n    }\n}\n</code></pre>\n<blockquote>\n<p>Exception in thread &quot;Example Thread Group 1-1&quot;\njava.lang.NoSuchMethodError:\norg.apache.jmeter.util.HttpSSLProtocolSocketFactory.(Lorg/apache/jmeter/util/JsseSSLManager;I)V\nat\norg.apache.jmeter.protocol.http.util.HC4TrustAllSSLSocketFactory.(HC4TrustAllSSLSocketFactory.java:55)\nat\norg.apache.jmeter.protocol.http.sampler.LazySchemeSocketFactory$AdapteeHolder.checkAndInit(LazySchemeSocketFactory.java:52)\nat\norg.apache.jmeter.protocol.http.sampler.LazySchemeSocketFactory$AdapteeHolder.(LazySchemeSocketFactory.java:44)\nat\norg.apache.jmeter.protocol.http.sampler.LazySchemeSocketFactory.createSocket(LazySchemeSocketFactory.java:79)\nat\norg.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:168)\nat\norg.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:326)\nat\norg.apache.jmeter.protocol.http.sampler.MeasuringConnectionManager$MeasuredConnection.open(MeasuringConnectionManager.java:114)\nat\norg.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610)\nat\norg.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445)\nat\norg.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\nat\norg.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\nat\norg.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\nat\norg.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.executeRequest(HTTPHC4Impl.java:654)\nat\norg.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:413)\nat\norg.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:76)\nat\norg.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1166)\nat\norg.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1155)\nat\norg.apache.jmeter.threads.JMeterThread.doSampling(JMeterThread.java:651)\nat\norg.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:570)\nat\norg.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:501)\nat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:268)\nat java.lang.Thread.run(Thread.java:748)</p>\n</blockquote>\n<p>I written a java code for load performance and i compile that with google url its execute successfully but i enter my url which has no ssl certificate, The code is doesn't execute and its display this exception,</p>\n"},{"tags":["python","java","pdf","pdfbox","pdfminer"],"owner":{"account_id":25536959,"reputation":9,"user_id":19323860,"display_name":"0xracer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677755988,"creation_date":1677755988,"question_id":75614730,"body_markdown":"I&#39;m working in a tool that automates the process of making tagged PDF files more accessible. The first step on this tool would be taking a PDF file and removing all the `&lt;P&gt;` tags which are empty (the ones that contain no text), without modifying how the PDF looks.\r\n\r\nIs there a way to achieve this, using tools like PDFBox, PDFMiner, PikePDF, on Java or Python?\r\n\r\nThanks in advance.\r\n\r\nI have tried several solutions but the furthest I went was getting the `&lt;P&gt;` tags and printing them on the console, using PDFBox","title":"Is there a way to remove the empty &lt;P&gt; tags from a PDF file?","body":"<p>I'm working in a tool that automates the process of making tagged PDF files more accessible. The first step on this tool would be taking a PDF file and removing all the <code>&lt;P&gt;</code> tags which are empty (the ones that contain no text), without modifying how the PDF looks.</p>\n<p>Is there a way to achieve this, using tools like PDFBox, PDFMiner, PikePDF, on Java or Python?</p>\n<p>Thanks in advance.</p>\n<p>I have tried several solutions but the furthest I went was getting the <code>&lt;P&gt;</code> tags and printing them on the console, using PDFBox</p>\n"},{"tags":["java","android","selenium-webdriver","appium"],"answers":[{"tags":[],"owner":{"account_id":3922153,"reputation":61,"user_id":3243961,"display_name":"Seploid"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677755738,"creation_date":1677755738,"answer_id":75614693,"question_id":75449485,"body_markdown":"It looks that you need to add call of DriverManager.getDriver().resetApp() method in quit() method of Hooks class. ","title":"Make Appium reset driver and app after every test","body":"<p>It looks that you need to add call of DriverManager.getDriver().resetApp() method in quit() method of Hooks class.</p>\n"}],"owner":{"account_id":25241659,"reputation":55,"user_id":19075454,"display_name":"Roberto Teresa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":397,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677755738,"creation_date":1676385967,"question_id":75449485,"body_markdown":"Hi I&#39;m using your project https://github.com/rajatt95/MasterAppiumFramework_BDD for testing but I want to modify it so it resets the app and driver after every test instead of every class. How can I accomplish this?\r\n\r\n","title":"Make Appium reset driver and app after every test","body":"<p>Hi I'm using your project <a href=\"https://github.com/rajatt95/MasterAppiumFramework_BDD\" rel=\"nofollow noreferrer\">https://github.com/rajatt95/MasterAppiumFramework_BDD</a> for testing but I want to modify it so it resets the app and driver after every test instead of every class. How can I accomplish this?</p>\n"},{"tags":["java","amazon-s3"],"comments":[{"owner":{"account_id":2544335,"reputation":510,"user_id":2209469,"display_name":"Selim Emre Toy"},"score":0,"creation_date":1677696391,"post_id":75607728,"comment_id":133390807,"body_markdown":"Hi Jim, I recommend that you allow all the permissions in the bucket settings. Afterward, you can gradually change it to your production settings step by step. This way, you can understand which part caused the problem.","body":"Hi Jim, I recommend that you allow all the permissions in the bucket settings. Afterward, you can gradually change it to your production settings step by step. This way, you can understand which part caused the problem."},{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":1,"creation_date":1677696589,"post_id":75607728,"comment_id":133390876,"body_markdown":"Does the S3 bucket also have a bucket policy that could be overriding these IAM permissions? Ditto, is there an organization-level SCP? Have you double-checked that you are using the AWS credentials you think you are using (call STS GetCallerIdentity)?","body":"Does the S3 bucket also have a bucket policy that could be overriding these IAM permissions? Ditto, is there an organization-level SCP? Have you double-checked that you are using the AWS credentials you think you are using (call STS GetCallerIdentity)?"},{"owner":{"account_id":11060326,"reputation":445,"user_id":8121862,"display_name":"Jim ReesPotter"},"score":0,"creation_date":1677698821,"post_id":75607728,"comment_id":133391422,"body_markdown":"Credentials are fine, I&#39;m accessing Kms and dynamodb with them a few steps beforehand. I think that policy allows the user full access to s3 (am I right?), Not sure about an overriding policy, it&#39;s a more or less new Aws account - will have a look. Thanks!","body":"Credentials are fine, I&#39;m accessing Kms and dynamodb with them a few steps beforehand. I think that policy allows the user full access to s3 (am I right?), Not sure about an overriding policy, it&#39;s a more or less new Aws account - will have a look. Thanks!"},{"owner":{"account_id":23401113,"reputation":1486,"user_id":17464257,"display_name":"Alex Chadyuk"},"score":0,"creation_date":1677704234,"post_id":75607728,"comment_id":133392877,"body_markdown":"Could you try to do a `aws s3 cp &lt;LocalPath&gt; &lt;S3Uri&gt;` from the same machine to see the error you get?","body":"Could you try to do a <code>aws s3 cp &lt;LocalPath&gt; &lt;S3Uri&gt;</code> from the same machine to see the error you get?"}],"answers":[{"tags":[],"owner":{"account_id":11060326,"reputation":445,"user_id":8121862,"display_name":"Jim ReesPotter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677755735,"creation_date":1677755735,"answer_id":75614692,"question_id":75607728,"body_markdown":"I got this working... points that are pretty obvious but I couldn&#39;t establish from the docs:\r\n- bucket is just the name - not s://bucket, not the URN\r\n- key is the name to save it under. you can add folders that don&#39;t exist, no leading slash - eg &quot;folder/file&quot;\r\n- regenerating the credentials after I&#39;d updated the user&#39;s policies may have helped, not sure\r\n\r\nThanks for the advice though - testing with AWS cli especially.","title":"Getting &#39;Access Denied&#39; exception on S3 putObject","body":"<p>I got this working... points that are pretty obvious but I couldn't establish from the docs:</p>\n<ul>\n<li>bucket is just the name - not s://bucket, not the URN</li>\n<li>key is the name to save it under. you can add folders that don't exist, no leading slash - eg &quot;folder/file&quot;</li>\n<li>regenerating the credentials after I'd updated the user's policies may have helped, not sure</li>\n</ul>\n<p>Thanks for the advice though - testing with AWS cli especially.</p>\n"}],"owner":{"account_id":11060326,"reputation":445,"user_id":8121862,"display_name":"Jim ReesPotter"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677755735,"creation_date":1677696128,"question_id":75607728,"body_markdown":"I&#39;m trying to write a byte array to an S3 bucket using Java sdk2 (software.amazon.awssdk:s3), but I can&#39;t get it to work - I constantly get access denied errors. Here&#39;s what I have:\r\n\r\nA very permissive policy:\r\n```\r\n        {\r\n            &quot;Sid&quot;: &quot;VisualEditor1&quot;,\r\n            &quot;Effect&quot;: &quot;Allow&quot;,\r\n            &quot;Action&quot;: &quot;s3:*&quot;,\r\n            &quot;Resource&quot;: [\r\n                &quot;arn:aws:s3:::*&quot;,\r\n                &quot;arn:aws:s3:*:896591375297:accesspoint/*&quot;,\r\n                &quot;arn:aws:s3::896591375297:accesspoint/*&quot;,\r\n                &quot;arn:aws:s3-object-lambda:*:896591375297:accesspoint/*&quot;,\r\n                &quot;arn:aws:s3:::*/*&quot;,\r\n                &quot;arn:aws:s3:*:896591375297:job/*&quot;,\r\n                &quot;arn:aws:s3:us-west-2:896591375297:async-request/mrap/*/*&quot;,\r\n                &quot;arn:aws:s3:*:896591375297:storage-lens/*&quot;\r\n            ]\r\n        }\r\n```\r\n\r\nAnd some code:\r\n```\r\n    public void saveCA(String orgId, String certId, byte[] caData) {\r\n\r\n      PutObjectRequest req = PutObjectRequest.builder()\r\n          .bucket(&quot;cacache-bucket&quot;)   // tried the ARN here (no banana). Bucket exists\r\n          .key(certId)   // certId is to be the object name\r\n          .build();\r\n\r\n      RequestBody body = RequestBody.fromBytes(caData);\r\n      client.putObject(req, body);\r\n    }\r\n```\r\n\r\nAnd the error:\r\n```\r\nsoftware.amazon.awssdk.services.s3.model.S3Exception: Access Denied (Service: S3, Status Code: 403, Request ID: RQH01Z7PJ54YDSAV, Extended Request ID: vJRt...\r\n```\r\n\r\nAny ideas?\r\n\r\nthanks,\r\n\r\nJim","title":"Getting &#39;Access Denied&#39; exception on S3 putObject","body":"<p>I'm trying to write a byte array to an S3 bucket using Java sdk2 (software.amazon.awssdk:s3), but I can't get it to work - I constantly get access denied errors. Here's what I have:</p>\n<p>A very permissive policy:</p>\n<pre><code>        {\n            &quot;Sid&quot;: &quot;VisualEditor1&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: &quot;s3:*&quot;,\n            &quot;Resource&quot;: [\n                &quot;arn:aws:s3:::*&quot;,\n                &quot;arn:aws:s3:*:896591375297:accesspoint/*&quot;,\n                &quot;arn:aws:s3::896591375297:accesspoint/*&quot;,\n                &quot;arn:aws:s3-object-lambda:*:896591375297:accesspoint/*&quot;,\n                &quot;arn:aws:s3:::*/*&quot;,\n                &quot;arn:aws:s3:*:896591375297:job/*&quot;,\n                &quot;arn:aws:s3:us-west-2:896591375297:async-request/mrap/*/*&quot;,\n                &quot;arn:aws:s3:*:896591375297:storage-lens/*&quot;\n            ]\n        }\n</code></pre>\n<p>And some code:</p>\n<pre><code>    public void saveCA(String orgId, String certId, byte[] caData) {\n\n      PutObjectRequest req = PutObjectRequest.builder()\n          .bucket(&quot;cacache-bucket&quot;)   // tried the ARN here (no banana). Bucket exists\n          .key(certId)   // certId is to be the object name\n          .build();\n\n      RequestBody body = RequestBody.fromBytes(caData);\n      client.putObject(req, body);\n    }\n</code></pre>\n<p>And the error:</p>\n<pre><code>software.amazon.awssdk.services.s3.model.S3Exception: Access Denied (Service: S3, Status Code: 403, Request ID: RQH01Z7PJ54YDSAV, Extended Request ID: vJRt...\n</code></pre>\n<p>Any ideas?</p>\n<p>thanks,</p>\n<p>Jim</p>\n"},{"tags":["java","android","react-native","gradle","google-cloud-storage"],"comments":[{"owner":{"account_id":1948645,"reputation":30116,"user_id":6877799,"accept_rate":75,"display_name":"AmerllicA"},"score":7,"creation_date":1677146920,"post_id":75531408,"comment_id":133281678,"body_markdown":"I found it out, it happens because I&#39;m located in Iran, the country that got banned by US sanctions, so even by using a VPN, I&#39;m not able to take an Android build of my current project. if anybody knows how to fix this please give me shout here.","body":"I found it out, it happens because I&#39;m located in Iran, the country that got banned by US sanctions, so even by using a VPN, I&#39;m not able to take an Android build of my current project. if anybody knows how to fix this please give me shout here."},{"owner":{"account_id":22875718,"reputation":261,"user_id":17018079,"display_name":"RaminKh"},"score":2,"creation_date":1677407164,"post_id":75531408,"comment_id":133328189,"body_markdown":"this is a common problem among us my brother.I fix my case once using &#39;Shekan DNS&#39;.","body":"this is a common problem among us my brother.I fix my case once using &#39;Shekan DNS&#39;."},{"owner":{"account_id":1948645,"reputation":30116,"user_id":6877799,"accept_rate":75,"display_name":"AmerllicA"},"score":2,"creation_date":1677449242,"post_id":75531408,"comment_id":133335215,"body_markdown":"@RaminKhodaie, Bro, I already test Shekan DNSz, but have no success so far.","body":"@RaminKhodaie, Bro, I already test Shekan DNSz, but have no success so far."},{"owner":{"account_id":1051095,"reputation":5101,"user_id":1055015,"accept_rate":52,"display_name":"Exlord"},"score":2,"creation_date":1677476173,"post_id":75531408,"comment_id":133338139,"body_markdown":"@AmerllicA Broo also clear DNS cache before running this command","body":"@AmerllicA Broo also clear DNS cache before running this command"},{"owner":{"account_id":22875718,"reputation":261,"user_id":17018079,"display_name":"RaminKh"},"score":1,"creation_date":1677490417,"post_id":75531408,"comment_id":133340944,"body_markdown":"@AmerllicA once I was struggling with somehow same problem for a week, then I left it and when came back at Saturday without any changes it works and download all packages.it is strange a little :)","body":"@AmerllicA once I was struggling with somehow same problem for a week, then I left it and when came back at Saturday without any changes it works and download all packages.it is strange a little :)"}],"answers":[{"tags":[],"owner":{"account_id":4232873,"reputation":530,"user_id":3464834,"display_name":"mohammadreza berneti"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677755708,"creation_date":1677395419,"answer_id":75570492,"question_id":75531408,"body_markdown":"This solution works for me:\r\n\r\n**Step 1:** creating a socks proxy with ssh tunnel:\r\n\r\n`ssh -f -N -M -S /tmp/sshtunnel -D 1086 root@x.x.x.x`\r\n\r\n**Step 2:** passing my system traffic through the socks proxy by Shadowrocket (needs m1 macbook)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/T9uec.png","title":"React Native Android build cannot download lifecycle-common-java8","body":"<p>This solution works for me:</p>\n<p><strong>Step 1:</strong> creating a socks proxy with ssh tunnel:</p>\n<p><code>ssh -f -N -M -S /tmp/sshtunnel -D 1086 root@x.x.x.x</code></p>\n<p><strong>Step 2:</strong> passing my system traffic through the socks proxy by Shadowrocket (needs m1 macbook)</p>\n<p><a href=\"https://i.stack.imgur.com/T9uec.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T9uec.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1948645,"reputation":30116,"user_id":6877799,"accept_rate":75,"display_name":"AmerllicA"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1677755708,"creation_date":1677061879,"question_id":75531408,"body_markdown":"I&#39;m trying to development build (`yarn android`), but the Android build of React Native got stuck behind this issue, I don&#39;t know which package needs this, I made a fresh React Native project and everything was correct there, but on my project, it got stuck. For sure a package needs this, but I haven&#39;t got any clue.\r\n\r\n\r\n``` * What went wrong:\r\nExecution failed for task &#39;:app:checkDebugDuplicateClasses&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\n   &gt; Failed to transform lifecycle-common-java8-2.4.0.jar (androidx.lifecycle:lifecycle-common-java8:2.4.0) to match attributes {artifactType=enumerated-runtime-classes, org.gradle.category=library, org.gradle.dependency.bundling=external, org.gradle.jvm.version=8, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\r\n      &gt; Could not find lifecycle-common-java8-2.4.0.jar (androidx.lifecycle:lifecycle-common-java8:2.4.0).\r\n        Searched in the following locations:\r\n            https://dl.google.com/dl/android/maven2/androidx/lifecycle/lifecycle-common-java8/2.4.0/lifecycle-common-java8-2.4.0.jar\r\n```\r\n\r\nI&#39;m able to download this file by using a browser, but the build procedure cannot download it. even I thought if I know the download place I will put the file there and maybe it helps, but I don&#39;t know where does the build procedure use to store the file and then use it.\r\n","title":"React Native Android build cannot download lifecycle-common-java8","body":"<p>I'm trying to development build (<code>yarn android</code>), but the Android build of React Native got stuck behind this issue, I don't know which package needs this, I made a fresh React Native project and everything was correct there, but on my project, it got stuck. For sure a package needs this, but I haven't got any clue.</p>\n<pre><code>Execution failed for task ':app:checkDebugDuplicateClasses'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Failed to transform lifecycle-common-java8-2.4.0.jar (androidx.lifecycle:lifecycle-common-java8:2.4.0) to match attributes {artifactType=enumerated-runtime-classes, org.gradle.category=library, org.gradle.dependency.bundling=external, org.gradle.jvm.version=8, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\n      &gt; Could not find lifecycle-common-java8-2.4.0.jar (androidx.lifecycle:lifecycle-common-java8:2.4.0).\n        Searched in the following locations:\n            https://dl.google.com/dl/android/maven2/androidx/lifecycle/lifecycle-common-java8/2.4.0/lifecycle-common-java8-2.4.0.jar\n</code></pre>\n<p>I'm able to download this file by using a browser, but the build procedure cannot download it. even I thought if I know the download place I will put the file there and maybe it helps, but I don't know where does the build procedure use to store the file and then use it.</p>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"comments":[{"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"score":0,"creation_date":1338210974,"post_id":10785243,"comment_id":14027078,"body_markdown":"Thank you! that&#39;s definitely better than my solution.","body":"Thank you! that&#39;s definitely better than my solution."},{"owner":{"account_id":37187,"reputation":46693,"user_id":106261,"accept_rate":87,"display_name":"NimChimpsky"},"score":0,"creation_date":1338211181,"post_id":10785243,"comment_id":14027156,"body_markdown":"@davioooh Spring 3.0 + ? This is relevant chapter I think http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html &quot;using propertyregistars&quot; shows how to do globally","body":"@davioooh Spring 3.0 + ? This is relevant chapter I think <a href=\"http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html\" rel=\"nofollow noreferrer\">static.springsource.org/spring/docs/current/&hellip;</a> &quot;using propertyregistars&quot; shows how to do globally"},{"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"score":0,"creation_date":1338211336,"post_id":10785243,"comment_id":14027219,"body_markdown":"Yes, I&#39;m using Spring 3.1, but I&#39;m still new to it... (and to Spring Framework in general...)","body":"Yes, I&#39;m using Spring 3.1, but I&#39;m still new to it... (and to Spring Framework in general...)"},{"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"score":0,"creation_date":1338211846,"post_id":10785243,"comment_id":14027382,"body_markdown":"here how to set a global editor: http://stackoverflow.com/q/1268021/1061499 Very helpful!","body":"here how to set a global editor: <a href=\"http://stackoverflow.com/q/1268021/1061499\">stackoverflow.com/q/1268021/1061499</a> Very helpful!"}],"tags":[],"owner":{"account_id":37187,"reputation":46693,"user_id":106261,"accept_rate":87,"display_name":"NimChimpsky"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1338210693,"creation_date":1338210693,"answer_id":10785243,"question_id":10785107,"body_markdown":"register a date editor in yr controller :\r\n\r\n    @InitBinder\r\n    protected void initBinder(WebDataBinder binder)\t{\r\n    \tbinder.registerCustomEditor(LocalDate.class, new LocalDateEditor());\r\n    }\r\n\r\nand then the data editor itself can look like this :\r\n\r\n    public class LocalDateEditor extends PropertyEditorSupport{\r\n    \r\n     @Override\r\n     public void setAsText(String text) throws IllegalArgumentException{\r\n       setValue(Joda.getLocalDateFromddMMMyyyy(text));\r\n     }\r\n    \r\n     @Override\r\n     public String getAsText() throws IllegalArgumentException {\r\n       return Joda.getStringFromLocalDate((LocalDate) getValue());\r\n     }\r\n    }\r\n\r\nI am using my own abstract utility class (Joda) for parsing dates, in fact LocalDates from [Joda Datetime library][1] - recommended as the standard java date/calendar is an abomination, imho. But you should get the idea. Also, you can register a global editor, so you don&#39;t have to do it each controller (I can&#39;t remember how).\r\n\r\n\r\n  [1]: http://joda-time.sourceforge.net/","title":"Set date format for an input text using Spring MVC","body":"<p>register a date editor in yr controller :</p>\n\n<pre><code>@InitBinder\nprotected void initBinder(WebDataBinder binder) {\n    binder.registerCustomEditor(LocalDate.class, new LocalDateEditor());\n}\n</code></pre>\n\n<p>and then the data editor itself can look like this :</p>\n\n<pre><code>public class LocalDateEditor extends PropertyEditorSupport{\n\n @Override\n public void setAsText(String text) throws IllegalArgumentException{\n   setValue(Joda.getLocalDateFromddMMMyyyy(text));\n }\n\n @Override\n public String getAsText() throws IllegalArgumentException {\n   return Joda.getStringFromLocalDate((LocalDate) getValue());\n }\n}\n</code></pre>\n\n<p>I am using my own abstract utility class (Joda) for parsing dates, in fact LocalDates from <a href=\"http://joda-time.sourceforge.net/\" rel=\"noreferrer\">Joda Datetime library</a> - recommended as the standard java date/calendar is an abomination, imho. But you should get the idea. Also, you can register a global editor, so you don't have to do it each controller (I can't remember how).</p>\n"},{"tags":[],"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1338210700,"creation_date":1338210700,"answer_id":10785246,"question_id":10785107,"body_markdown":"Done! I just added this method to my controller class:\r\n\r\n    @InitBinder\r\n\tprotected void initBinder(WebDataBinder binder) {\r\n\t\tSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n\t\tbinder.registerCustomEditor(Date.class, new CustomDateEditor(\r\n\t\t\t\tdateFormat, false));\r\n\t}","title":"Set date format for an input text using Spring MVC","body":"<p>Done! I just added this method to my controller class:</p>\n\n<pre><code>@InitBinder\nprotected void initBinder(WebDataBinder binder) {\n    SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\n    binder.registerCustomEditor(Date.class, new CustomDateEditor(\n            dateFormat, false));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2162795,"reputation":12144,"user_id":1916588,"accept_rate":56,"display_name":"Kurt Bourbaki"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1677755559,"creation_date":1377501795,"answer_id":18438744,"question_id":10785107,"body_markdown":"If you want to format all your dates without having to repeat the same code in every Controller, you can create a **global InitBinder** in a class annotated with [**@ControllerAdvice**](http://static.springsource.org/spring/docs/3.2.4.RELEASE/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html) annotation.\r\n\r\nSteps\r\n====================\r\n\r\n**1.** Create a DateEditor class that will format your dates, like this:\r\n\r\n        public class DateEditor extends PropertyEditorSupport {\r\n         \r\n        public void setAsText(String value) {\r\n          try {\r\n            setValue(new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).parse(value));\r\n          } catch(ParseException e) {\r\n            setValue(null);\r\n          }\r\n        }\r\n\r\n        public String getAsText() {\r\n          String s = &quot;&quot;;\r\n          if (getValue() != null) {\r\n             s = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).format((Date) getValue());\r\n          }\r\n          return s;\r\n        }\r\n\r\n**2.** Create a class annotated with @ControllerAdvice (I called it GlobalBindingInitializer): \r\n\r\n        @ControllerAdvice\r\n        public class GlobalBindingInitializer {\r\n         \r\n         /* Initialize a global InitBinder for dates instead of cloning its code in every Controller */\r\n         \r\n          @InitBinder\r\n          public void binder(WebDataBinder binder) {\r\n            binder.registerCustomEditor(Date.class, new DateEditor());\r\n          }\r\n        }\r\n\r\n**3.** In your Spring MVC configuration file (for example webmvc-config.xml) add the lines that allow Spring to scan the package in which you created your GlobalBindingInitializer class. For example, if you created GlobalBindingInitializer in the org.example.common package: \r\n\r\n        &lt;context:component-scan base-package=&quot;org.example.common&quot; /&gt;\r\n\r\n\r\nFinished!\r\n\r\n**Sources:**\r\n\r\n* [Keenformatics - How To create a global InitBinder in Spring with @ControllerAdvice](https://www.keenformatics.com/how-to-create-global-initbinder-in-spring/) (my blog)\r\n* [Spring Framework 3.2.4 - Annotation Type ControllerAdvice](http://static.springsource.org/spring/docs/3.2.4.RELEASE/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)\r\n* [Spring Framework API 2.5 - Annotation Type InitBinder](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/annotation/InitBinder.html)\r\n* Personal experience","title":"Set date format for an input text using Spring MVC","body":"<p>If you want to format all your dates without having to repeat the same code in every Controller, you can create a <strong>global InitBinder</strong> in a class annotated with <a href=\"http://static.springsource.org/spring/docs/3.2.4.RELEASE/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html\" rel=\"nofollow noreferrer\"><strong>@ControllerAdvice</strong></a> annotation.</p>\n<h1>Steps</h1>\n<p><strong>1.</strong> Create a DateEditor class that will format your dates, like this:</p>\n<pre><code>    public class DateEditor extends PropertyEditorSupport {\n     \n    public void setAsText(String value) {\n      try {\n        setValue(new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).parse(value));\n      } catch(ParseException e) {\n        setValue(null);\n      }\n    }\n\n    public String getAsText() {\n      String s = &quot;&quot;;\n      if (getValue() != null) {\n         s = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).format((Date) getValue());\n      }\n      return s;\n    }\n</code></pre>\n<p><strong>2.</strong> Create a class annotated with @ControllerAdvice (I called it GlobalBindingInitializer):</p>\n<pre><code>    @ControllerAdvice\n    public class GlobalBindingInitializer {\n     \n     /* Initialize a global InitBinder for dates instead of cloning its code in every Controller */\n     \n      @InitBinder\n      public void binder(WebDataBinder binder) {\n        binder.registerCustomEditor(Date.class, new DateEditor());\n      }\n    }\n</code></pre>\n<p><strong>3.</strong> In your Spring MVC configuration file (for example webmvc-config.xml) add the lines that allow Spring to scan the package in which you created your GlobalBindingInitializer class. For example, if you created GlobalBindingInitializer in the org.example.common package:</p>\n<pre><code>    &lt;context:component-scan base-package=&quot;org.example.common&quot; /&gt;\n</code></pre>\n<p>Finished!</p>\n<p><strong>Sources:</strong></p>\n<ul>\n<li><a href=\"https://www.keenformatics.com/how-to-create-global-initbinder-in-spring/\" rel=\"nofollow noreferrer\">Keenformatics - How To create a global InitBinder in Spring with @ControllerAdvice</a> (my blog)</li>\n<li><a href=\"http://static.springsource.org/spring/docs/3.2.4.RELEASE/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html\" rel=\"nofollow noreferrer\">Spring Framework 3.2.4 - Annotation Type ControllerAdvice</a></li>\n<li><a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/annotation/InitBinder.html\" rel=\"nofollow noreferrer\">Spring Framework API 2.5 - Annotation Type InitBinder</a></li>\n<li>Personal experience</li>\n</ul>\n"}],"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19181,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":10785243,"answer_count":3,"score":7,"last_activity_date":1677755559,"creation_date":1338210028,"question_id":10785107,"body_markdown":"How can I set the format for a [`Date`][1] in a text field with Spring MVC?\r\n\r\nI&#39;m using the Spring Form tag library and the `input` tag.\r\n\r\nWhat I get now is something like this `Mon May 28 11:09:28 CEST 2012`.\r\n\r\nI&#39;d like to show the date in `dd/MM/yyyy` format.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Date.html","title":"Set date format for an input text using Spring MVC","body":"<p>How can I set the format for a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>Date</code></a> in a text field with Spring MVC?</p>\n\n<p>I'm using the Spring Form tag library and the <code>input</code> tag.</p>\n\n<p>What I get now is something like this <code>Mon May 28 11:09:28 CEST 2012</code>.</p>\n\n<p>I'd like to show the date in <code>dd/MM/yyyy</code> format.</p>\n"},{"tags":["java","amazon-web-services"],"answers":[{"tags":[],"owner":{"account_id":190127,"reputation":711,"user_id":429896,"accept_rate":100,"display_name":"HypeXR"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677755522,"creation_date":1425058665,"answer_id":28771063,"question_id":21478341,"body_markdown":"I&#39;ve accomplished something similar with SQS using Java&#39;s [ExecutorService][1], [Future][2], and the [ConcurrentLinkedQueue][3].\r\n\r\nThe ExecutorService creates a thread pool that can execute classes that implement the Callable interface and returns a Future.  As the ExecutorService creates the futures I push them onto a ConcurrentLinkedQueue that runs in a thread and processes the results as the futures complete.\r\n\r\nImplement checking SQS and starting the work asynchronously:\r\n\r\n    import java.util.concurrent.Callable;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.Future;\r\n    \r\n    public class SqsProcessor {\r\n    \r\n        private static final int THREAD_COUNT = 100;\r\n        private ExecutorService _executor = null;\r\n        private FutureResultProcessor futureResultProcessor = null;\r\n        \r\n        public SqsProcessor() {\r\n            _executor = Executors.newFixedThreadPool(THREAD_COUNT);\r\n            _futureResultProcessor = new FutureResultProcessor();\r\n        }\r\n    \r\n        public void waitReceive() {\r\n    \r\n            // Receive a SQS message\r\n    \r\n            // Start the work related to the SQS message\r\n            Callable&lt;MyWorkerResult&gt; sqsWorker = new MyWorker(sqsMessage);\r\n            Future&lt;MyWorkerResult&gt; sqsFuture = _executor.submit(sqsWorker);\r\n    \r\n            // Send to the queue so the result can be processed when it completes\r\n            _futureResultProcessor.add(sqsFuture);\r\n        }\r\n    }\r\n    \r\nClass that does the work:\r\n\r\n    import java.util.concurrent.Callable;\r\n    \r\n    public class MyWorker implements Callable&lt;MyWorkerResult&gt; {\r\n    \r\n        private String _sqsMessage = null;\r\n    \r\n        public MyWorker(String sqsMessage) {\r\n            _sqsMessage = sqsMessage;\r\n        }\r\n    \r\n        @Override\r\n        public MyWorkerResult call() throws Exception {\r\n            // Do work relating to the SQS message\r\n        }\r\n    }\r\n\r\nHolds the results of the work:\r\n\r\n    public class MyWorkerResult {\r\n        // Results set in MyWorker call()\r\n    }\r\n\r\n\r\nConcurrentLinkedQueue to receive and process the future results:\r\n\r\n    import java.util.concurrent.Future;\r\n    import java.util.concurrent.ConcurrentLinkedQueue;\r\n    \r\n    public class FutureResultProcessor extends Thread {\r\n    \r\n        private final ConcurrentLinkedQueue&lt;Future&lt;MyWorkerResult&gt;&gt; resultQueue = new ConcurrentLinkedQueue&lt;Future&lt;MyWorkerResult&gt;&gt;();\r\n        private final Integer CHECK_SLEEP = 300;\r\n    \r\n        public FutureResultProcessor() {\r\n        }\r\n    \r\n        public void run() {\r\n            while(true) {\r\n                Future&lt;MyWorkerResult&gt; myFuture = resultQueue.poll();\r\n    \r\n                if(myFuture == null) {\r\n                    // There&#39;s nothing to process\r\n                    try { Thread.sleep(CHECK_SLEEP); } catch (InterruptedException e) {}\r\n                    continue;\r\n                }\r\n    \r\n                // Process result\r\n                if(myFuture != null) {\r\n    \r\n                    MyFutureResult myFutureResult = myFuture.get();\r\n    \r\n                    // Process result\r\n                }\r\n            }\r\n        }\r\n    \r\n        public void add(Future&lt;MyWorkerResult&gt; sqsFuture) {\r\n            resultQueue.offer(sqsFuture);\r\n        }\r\n    }\r\n\r\nAlternatively you could collect a group of futures and wait for them all to finish before processing the results.\r\n\r\n[Akka][4] could be a good fit.  I haven&#39;t used it directly, but it provides a framework for running asynchronous tasks, provides error handling, and could even distribute the tasks to remote instances. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html\r\n  [4]: http://akka.io/","title":"Process Amazon SQS messages from queue asynchronously in Java","body":"<p>I've accomplished something similar with SQS using Java's <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">ExecutorService</a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html\" rel=\"nofollow noreferrer\">Future</a>, and the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html\" rel=\"nofollow noreferrer\">ConcurrentLinkedQueue</a>.</p>\n<p>The ExecutorService creates a thread pool that can execute classes that implement the Callable interface and returns a Future.  As the ExecutorService creates the futures I push them onto a ConcurrentLinkedQueue that runs in a thread and processes the results as the futures complete.</p>\n<p>Implement checking SQS and starting the work asynchronously:</p>\n<pre><code>import java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\n\npublic class SqsProcessor {\n\n    private static final int THREAD_COUNT = 100;\n    private ExecutorService _executor = null;\n    private FutureResultProcessor futureResultProcessor = null;\n    \n    public SqsProcessor() {\n        _executor = Executors.newFixedThreadPool(THREAD_COUNT);\n        _futureResultProcessor = new FutureResultProcessor();\n    }\n\n    public void waitReceive() {\n\n        // Receive a SQS message\n\n        // Start the work related to the SQS message\n        Callable&lt;MyWorkerResult&gt; sqsWorker = new MyWorker(sqsMessage);\n        Future&lt;MyWorkerResult&gt; sqsFuture = _executor.submit(sqsWorker);\n\n        // Send to the queue so the result can be processed when it completes\n        _futureResultProcessor.add(sqsFuture);\n    }\n}\n</code></pre>\n<p>Class that does the work:</p>\n<pre><code>import java.util.concurrent.Callable;\n\npublic class MyWorker implements Callable&lt;MyWorkerResult&gt; {\n\n    private String _sqsMessage = null;\n\n    public MyWorker(String sqsMessage) {\n        _sqsMessage = sqsMessage;\n    }\n\n    @Override\n    public MyWorkerResult call() throws Exception {\n        // Do work relating to the SQS message\n    }\n}\n</code></pre>\n<p>Holds the results of the work:</p>\n<pre><code>public class MyWorkerResult {\n    // Results set in MyWorker call()\n}\n</code></pre>\n<p>ConcurrentLinkedQueue to receive and process the future results:</p>\n<pre><code>import java.util.concurrent.Future;\nimport java.util.concurrent.ConcurrentLinkedQueue;\n\npublic class FutureResultProcessor extends Thread {\n\n    private final ConcurrentLinkedQueue&lt;Future&lt;MyWorkerResult&gt;&gt; resultQueue = new ConcurrentLinkedQueue&lt;Future&lt;MyWorkerResult&gt;&gt;();\n    private final Integer CHECK_SLEEP = 300;\n\n    public FutureResultProcessor() {\n    }\n\n    public void run() {\n        while(true) {\n            Future&lt;MyWorkerResult&gt; myFuture = resultQueue.poll();\n\n            if(myFuture == null) {\n                // There's nothing to process\n                try { Thread.sleep(CHECK_SLEEP); } catch (InterruptedException e) {}\n                continue;\n            }\n\n            // Process result\n            if(myFuture != null) {\n\n                MyFutureResult myFutureResult = myFuture.get();\n\n                // Process result\n            }\n        }\n    }\n\n    public void add(Future&lt;MyWorkerResult&gt; sqsFuture) {\n        resultQueue.offer(sqsFuture);\n    }\n}\n</code></pre>\n<p>Alternatively you could collect a group of futures and wait for them all to finish before processing the results.</p>\n<p><a href=\"http://akka.io/\" rel=\"nofollow noreferrer\">Akka</a> could be a good fit.  I haven't used it directly, but it provides a framework for running asynchronous tasks, provides error handling, and could even distribute the tasks to remote instances.</p>\n"}],"owner":{"account_id":1645696,"reputation":4041,"user_id":1517277,"accept_rate":71,"display_name":"jasenkoh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3153,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":28771063,"answer_count":1,"score":6,"last_activity_date":1677755522,"creation_date":1391165853,"question_id":21478341,"body_markdown":"I am having hard time figuring out how to process messages from Amazon SQS. \r\n \r\nI am trying to implement following: \r\n\r\n 1. Listener on SQS \r\n 2. Process message from queue and add it to DB\r\n 3. Delete processed message from queue\r\n\r\n\r\nWhat bothers me a lot is how to implement step 2. I have class `SQSConnector` and `ProfileDao`. Right now I want simple implementation, by initializing `SQSConnector` in `ProfileDao` and receiving messages from queue. My idea is to start new thread, start polling messages and when queue is empty interrupt the thread from `ProfileDao`.\r\n\r\nWhat&#39;s the best way of returning/processing messages (callback function?), and if there is another way of doing this I am open for options.\r\n\r\nThank you","title":"Process Amazon SQS messages from queue asynchronously in Java","body":"<p>I am having hard time figuring out how to process messages from Amazon SQS. </p>\n\n<p>I am trying to implement following: </p>\n\n<ol>\n<li>Listener on SQS </li>\n<li>Process message from queue and add it to DB</li>\n<li>Delete processed message from queue</li>\n</ol>\n\n<p>What bothers me a lot is how to implement step 2. I have class <code>SQSConnector</code> and <code>ProfileDao</code>. Right now I want simple implementation, by initializing <code>SQSConnector</code> in <code>ProfileDao</code> and receiving messages from queue. My idea is to start new thread, start polling messages and when queue is empty interrupt the thread from <code>ProfileDao</code>.</p>\n\n<p>What's the best way of returning/processing messages (callback function?), and if there is another way of doing this I am open for options.</p>\n\n<p>Thank you</p>\n"},{"tags":["java","web-services","batch-file","cxf"],"comments":[{"owner":{"account_id":153878,"reputation":2055,"user_id":369446,"accept_rate":100,"display_name":"Michael Shopsin"},"score":0,"creation_date":1516288934,"post_id":48324608,"comment_id":83634651,"body_markdown":"Could we see your batch file?","body":"Could we see your batch file?"},{"owner":{"account_id":12712422,"reputation":41,"user_id":9235621,"display_name":"Venu Goli"},"score":0,"creation_date":1516289294,"post_id":48324608,"comment_id":83634901,"body_markdown":"This is the batch file I have.\n\nset path=C:\\Program Files\\Java\\jdk1.8.0_91\\bin\nset classpath=cxf-core-3.1.7.jar;cxf-rt-frontend-simple-3.1.7.jar;sqljdbc42.jar;cxf-rt-frontend-jaxws-3.1.7.jar;wsdl4j-1.6.3.jar;cxf-rt-wsdl-3.1.7.jar;xmlschema-core-2.2.1.jar;lib\\*.jar;.\njava com.strongmail.services.v2.MailingService_MailingServicePort_Client\npause","body":"This is the batch file I have.  set path=C:\\Program Files\\Java\\jdk1.8.0_91\\bin set classpath=cxf-core-3.1.7.jar;cxf-rt-frontend-simple-3.1.7.ja&zwnj;&#8203;r;sqljdbc42.jar;cxf-&zwnj;&#8203;rt-frontend-jaxws-3.&zwnj;&#8203;1.7.jar;wsdl4j-1.6.3&zwnj;&#8203;.jar;cxf-rt-wsdl-3.1&zwnj;&#8203;.7.jar;xmlschema-cor&zwnj;&#8203;e-2.2.1.jar;lib*.jar&zwnj;&#8203;;. java com.strongmail.services.v2.MailingService_MailingServicePort&zwnj;&#8203;_Client pause"}],"answers":[{"comments":[{"owner":{"account_id":2447666,"reputation":513,"user_id":2134591,"accept_rate":27,"display_name":"SuRa"},"score":0,"creation_date":1561634021,"post_id":50043698,"comment_id":100133780,"body_markdown":"Thanks. Faced same issue and this help me.","body":"Thanks. Faced same issue and this help me."},{"owner":{"account_id":2181800,"reputation":552,"user_id":3094331,"accept_rate":73,"display_name":"user3094331"},"score":2,"creation_date":1596366975,"post_id":50043698,"comment_id":111783554,"body_markdown":"Even I have added ?WSDL next to my service still I am getting the above error ? Can you please let me in which scenario we can get the above error","body":"Even I have added ?WSDL next to my service still I am getting the above error ? Can you please let me in which scenario we can get the above error"}],"tags":[],"owner":{"account_id":1573333,"reputation":15365,"user_id":1460509,"accept_rate":92,"display_name":"Devrim"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1524747736,"creation_date":1524747736,"answer_id":50043698,"question_id":48324608,"body_markdown":"I&#39;ve created java classes from wsdl with `org.apache.cxf.tools.wsdlto.WSDLToJava`. While creating an instance of the service, I had exact same exception at runtime:\r\n\r\n&gt; org.apache.cxf.service.factory.ServiceConstructionException: Failed to\r\n&gt; create service\r\n\r\nPrevious code:\r\n\r\n    URL wsdlURL = new URL(&quot;http://example.com/my_service.asmx&quot;);\r\n    MyWS mailWS = new MyWS(wsdlURL); // Exception is thrown here\r\n\r\nSolution was weird. I&#39;ve just added `?wsdl` next to service address:\r\n\r\n    URL wsdlURL = new URL(&quot;http://example.com/my_service.asmx?wsdl&quot;);\r\n    MyWS mailWS = new MyWS(wsdlURL);\r\n","title":"javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service","body":"<p>I've created java classes from wsdl with <code>org.apache.cxf.tools.wsdlto.WSDLToJava</code>. While creating an instance of the service, I had exact same exception at runtime:</p>\n\n<blockquote>\n  <p>org.apache.cxf.service.factory.ServiceConstructionException: Failed to\n  create service</p>\n</blockquote>\n\n<p>Previous code:</p>\n\n<pre><code>URL wsdlURL = new URL(\"http://example.com/my_service.asmx\");\nMyWS mailWS = new MyWS(wsdlURL); // Exception is thrown here\n</code></pre>\n\n<p>Solution was weird. I've just added <code>?wsdl</code> next to service address:</p>\n\n<pre><code>URL wsdlURL = new URL(\"http://example.com/my_service.asmx?wsdl\");\nMyWS mailWS = new MyWS(wsdlURL);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7635211,"reputation":81,"user_id":5788964,"display_name":"Pekmezli D&#252;r&#252;m"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677755468,"creation_date":1677755468,"answer_id":75614640,"question_id":48324608,"body_markdown":"If you are trying to create a client for a api has **SSL**, you should start the Java command with a necessary option.\r\n-Dorg.apache.cxf.stax.allowInsecureParser=1\r\n\r\n","title":"javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service","body":"<p>If you are trying to create a client for a api has <strong>SSL</strong>, you should start the Java command with a necessary option.\n-Dorg.apache.cxf.stax.allowInsecureParser=1</p>\n"}],"owner":{"account_id":12712422,"reputation":41,"user_id":9235621,"display_name":"Venu Goli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24791,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1677755468,"creation_date":1516288760,"question_id":48324608,"body_markdown":"I need desperate help to figure out the reason for the failure in creating the service. \r\n\r\nMy application is developed using Eclipse tool and it runs well there. It uses cxf-3.1.7 library collection. A console program that initializes the process to create the service to the API. Everything looks good and fine.\r\n\r\nI am trying to deploy the code in another machine. I installed the necessary jre and other files. I created a batch file with all the necessary path and classpath settings. I need to run the batch file on a daily base, so that it pulls the data regularly. But, when I run the batch file, it fails to create the service with the above error message. \r\n\r\nCan someone suggest me the reason if I am going wrong somewhere or any solution to get the service created. This is the batch file I have:\r\n\r\n    set path=C:\\Program Files\\Java\\jdk1.8.0_91\\bin \r\n    set classpath=cxf-core-3.1.7.jar;cxf-rt-frontend-simple-3.1.7.ja‌​r;sqljdbc42.jar;cxf-‌​rt-frontend-jaxws-3.‌​1.7.jar;wsdl4j-1.6.3‌​.jar;cxf-rt-wsdl-3.1‌​.7.jar;xmlschema-cor‌​e-2.2.1.jar;lib*.jar‌​;. \r\n    java com.strongmail.services.v2.MailingService_MailingServicePort‌​_Client \r\n    pause\r\n\r\nThanks in advance.","title":"javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service","body":"<p>I need desperate help to figure out the reason for the failure in creating the service. </p>\n\n<p>My application is developed using Eclipse tool and it runs well there. It uses cxf-3.1.7 library collection. A console program that initializes the process to create the service to the API. Everything looks good and fine.</p>\n\n<p>I am trying to deploy the code in another machine. I installed the necessary jre and other files. I created a batch file with all the necessary path and classpath settings. I need to run the batch file on a daily base, so that it pulls the data regularly. But, when I run the batch file, it fails to create the service with the above error message. </p>\n\n<p>Can someone suggest me the reason if I am going wrong somewhere or any solution to get the service created. This is the batch file I have:</p>\n\n<pre><code>set path=C:\\Program Files\\Java\\jdk1.8.0_91\\bin \nset classpath=cxf-core-3.1.7.jar;cxf-rt-frontend-simple-3.1.7.ja‌​r;sqljdbc42.jar;cxf-‌​rt-frontend-jaxws-3.‌​1.7.jar;wsdl4j-1.6.3‌​.jar;cxf-rt-wsdl-3.1‌​.7.jar;xmlschema-cor‌​e-2.2.1.jar;lib*.jar‌​;. \njava com.strongmail.services.v2.MailingService_MailingServicePort‌​_Client \npause\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","hibernate","unique-constraint"],"answers":[{"tags":[],"owner":{"account_id":2243576,"reputation":407,"user_id":1977508,"accept_rate":50,"display_name":"Furious Gamer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677755390,"creation_date":1677755390,"answer_id":75614630,"question_id":75610242,"body_markdown":"I figured it out. The issue was that the table schema for the &quot;settings&quot; table was generated with identity sequence provider using &quot;START WITH 1&quot;:\r\n\r\n    ALTER TABLE settings ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (\r\n        SEQUENCE NAME settings_id_seq\r\n        START WITH 1\r\n        INCREMENT BY 1\r\n        NO MINVALUE\r\n        NO MAXVALUE\r\n        CACHE 1\r\n    );\r\n\r\nWhich apparently means that it will always force starting with 1, even if an entry already exists with ID 1.\r\n\r\n","title":"org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint on persist() without ID?","body":"<p>I figured it out. The issue was that the table schema for the &quot;settings&quot; table was generated with identity sequence provider using &quot;START WITH 1&quot;:</p>\n<pre><code>ALTER TABLE settings ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (\n    SEQUENCE NAME settings_id_seq\n    START WITH 1\n    INCREMENT BY 1\n    NO MINVALUE\n    NO MAXVALUE\n    CACHE 1\n);\n</code></pre>\n<p>Which apparently means that it will always force starting with 1, even if an entry already exists with ID 1.</p>\n"}],"owner":{"account_id":2243576,"reputation":407,"user_id":1977508,"accept_rate":50,"display_name":"Furious Gamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677755390,"creation_date":1677715823,"question_id":75610242,"body_markdown":"I&#39;m getting an exception with Hibernate that makes absolutely no sense to me. I am using the `persist()` method to store a new, unattached entity without an ID (so it does not result ina detached entity passed exception). I even explicitely set the ID of the entity to **null** before passing it in. So as far as i understand, autoincrement will generate a new ID for the new entity to be saved (which is also mutated in the passed object for use after the method call). This is how it has always worked for me at least. However, something really strange is happening in this code and i cant figure out why, maybe its something minor. When i call this code:\r\n\r\n        @Transactional\r\n        public Settings createSettingsFor(Long id, Settings settings) {\r\n            // Setting the ID explicitely to null here, to be sure it is not set before persist\r\n            settings.setId(null);\r\n            // Exception triggers here\r\n            entityManager.persist(settings);\r\n            entityManager.flush();\r\n            // Attempting to link the newly created setting with another table entity manually, since i initially thought the error might be here but, but its caused before\r\n            entityManager\r\n                .createNativeQuery(&quot;UPDATE bots b WHERE b.id = :id SET b.settings_id = :settings_id&quot;)\r\n                .setParameter(&quot;id&quot;, id)\r\n                .setParameter(&quot;settings_id&quot;, settings.getId())\r\n                .executeUpdate();\r\n            return settings;\r\n        }\r\n\r\ni get the following exception:\r\n\r\n    org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint &quot;settings_pkey&quot;\r\n      Detail: Key (id)=(1) already exists.\r\n\r\nNow, the thing is: There is indeed already an entry in the settings table with the ID 1, which is a default setting generated when the database is created. **However, why is hibernate selecting an ID already in use to persist a new, unattached entity (without ID)?** I thought it must be some odd caching thing, but i rebuild the app a dozen times now. ","title":"org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint on persist() without ID?","body":"<p>I'm getting an exception with Hibernate that makes absolutely no sense to me. I am using the <code>persist()</code> method to store a new, unattached entity without an ID (so it does not result ina detached entity passed exception). I even explicitely set the ID of the entity to <strong>null</strong> before passing it in. So as far as i understand, autoincrement will generate a new ID for the new entity to be saved (which is also mutated in the passed object for use after the method call). This is how it has always worked for me at least. However, something really strange is happening in this code and i cant figure out why, maybe its something minor. When i call this code:</p>\n<pre><code>    @Transactional\n    public Settings createSettingsFor(Long id, Settings settings) {\n        // Setting the ID explicitely to null here, to be sure it is not set before persist\n        settings.setId(null);\n        // Exception triggers here\n        entityManager.persist(settings);\n        entityManager.flush();\n        // Attempting to link the newly created setting with another table entity manually, since i initially thought the error might be here but, but its caused before\n        entityManager\n            .createNativeQuery(&quot;UPDATE bots b WHERE b.id = :id SET b.settings_id = :settings_id&quot;)\n            .setParameter(&quot;id&quot;, id)\n            .setParameter(&quot;settings_id&quot;, settings.getId())\n            .executeUpdate();\n        return settings;\n    }\n</code></pre>\n<p>i get the following exception:</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint &quot;settings_pkey&quot;\n  Detail: Key (id)=(1) already exists.\n</code></pre>\n<p>Now, the thing is: There is indeed already an entry in the settings table with the ID 1, which is a default setting generated when the database is created. <strong>However, why is hibernate selecting an ID already in use to persist a new, unattached entity (without ID)?</strong> I thought it must be some odd caching thing, but i rebuild the app a dozen times now.</p>\n"},{"tags":["java","kotlin","authentication","spring-security","jwt"],"comments":[{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1677754405,"post_id":75614401,"comment_id":133401918,"body_markdown":"Please explain the real problem in more detail. You wrote *passing the wrong token I get : JWT signature does not match locally computed signature* - I would expect the described behavior for a wrong token, what did you expect instead?","body":"Please explain the real problem in more detail. You wrote <i>passing the wrong token I get : JWT signature does not match locally computed signature</i> - I would expect the described behavior for a wrong token, what did you expect instead?"},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":1,"creation_date":1677758056,"post_id":75614401,"comment_id":133402931,"body_markdown":"First you do `jwtTokenUtil.getUsernameFromToken(...)`, which already seems to validate the token and  there you only catch `ExpiredJwtException` but not the signature exception. Later you call `jwtTokenUtil.validateToken` and don&#39;t catch any exceptions. So the 500 seems justified. You should explicitly catch the signature exception (an other exceptions) as well, and also reconsider the structure of your code with two validations.","body":"First you do <code>jwtTokenUtil.getUsernameFromToken(...)</code>, which already seems to validate the token and  there you only catch <code>ExpiredJwtException</code> but not the signature exception. Later you call <code>jwtTokenUtil.validateToken</code> and don&#39;t catch any exceptions. So the 500 seems justified. You should explicitly catch the signature exception (an other exceptions) as well, and also reconsider the structure of your code with two validations."},{"owner":{"account_id":20392513,"reputation":151,"user_id":14960124,"display_name":"Pauline"},"score":0,"creation_date":1677762891,"post_id":75614401,"comment_id":133404291,"body_markdown":"But I should not get signature exception, I don&#39;t see why I get it? The signature should be fine?","body":"But I should not get signature exception, I don&#39;t see why I get it? The signature should be fine?"},{"owner":{"account_id":7134819,"reputation":5068,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":1,"creation_date":1677766039,"post_id":75614401,"comment_id":133405312,"body_markdown":"The signature is based on the header and payload part of the token, if they are changed so is the signature, therefore, it will not match.","body":"The signature is based on the header and payload part of the token, if they are changed so is the signature, therefore, it will not match."},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":1,"creation_date":1677766849,"post_id":75614401,"comment_id":133405608,"body_markdown":"You only mentioned *passing the wrong token*, so what is a wrong token here? Please explain that. If the key used to create the signature is not the same as the key used to verify, it would cause a signature exception. But you should generally be prepared for all kinds of exceptions.","body":"You only mentioned <i>passing the wrong token</i>, so what is a wrong token here? Please explain that. If the key used to create the signature is not the same as the key used to verify, it would cause a signature exception. But you should generally be prepared for all kinds of exceptions."}],"owner":{"account_id":20392513,"reputation":151,"user_id":14960124,"display_name":"Pauline"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677755044,"creation_date":1677754068,"question_id":75614401,"body_markdown":"Can&#39;t figure out what I am doing wrong. When passing the correct Bearer token everything works fine. But, when trying to invoke an &quot;Unauthorized&quot; by passing the wrong token I get :\r\n`JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.`\r\n\r\nMy code:\r\n\r\n```\r\nimport io.jsonwebtoken.Claims import io.jsonwebtoken.Jwts \r\nimport io.jsonwebtoken.SignatureAlgorithm \r\nimport io.jsonwebtoken.security.Keys\r\nimport org.springframework.security.core.userdetails.UserDetails \r\nimport org.springframework.stereotype.Component \r\nimport java.io.Serializable import java.security.Key \r\nimport java.util.*\r\n\r\n@Component class JwtTokenUtil : Serializable {\r\n\r\nprivate val serialVersionUID = -2550185165626007488L\r\n\r\nfun getUsernameFromToken(token: String?): String {\r\n    return getClaimFromToken(token, Claims::getSubject)\r\n}\r\n\r\nfun getExpirationDateFromToken(token: String?): Date {\r\n    return getClaimFromToken(token, Claims::getExpiration)\r\n}\r\n\r\nfun &lt;T&gt; getClaimFromToken(token: String?, claimsResolver: (Claims) -&gt; T): T {\r\n    val claims: Claims = getAllClaimsFromToken(token)\r\n    return claimsResolver(claims)\r\n}\r\n\r\nprivate fun getAllClaimsFromToken(token: String?): Claims {\r\n    return Jwts.parserBuilder()\r\n        .setSigningKey(key)\r\n        .build()\r\n        .parseClaimsJws(token)\r\n        .body\r\n}\r\n\r\nprivate fun isTokenExpired(token: String?): Boolean {\r\n    val expiration = getExpirationDateFromToken(token)\r\n    return expiration.before(Date())\r\n}\r\n\r\nfun generateToken(userDetails: UserDetails): String? {\r\n    val claims: Map&lt;String, Any&gt; = HashMap()\r\n    return doGenerateToken(claims, userDetails.username)\r\n}\r\n\r\nprivate fun doGenerateToken(claims: Map&lt;String, Any&gt;, subject: String): String? {\r\n    return Jwts.builder().setClaims(claims).setSubject(subject).setIssuedAt(Date(System.currentTimeMillis()))\r\n        .setExpiration(Date(System.currentTimeMillis() + JWT_TOKEN_VALIDITY * 1000))\r\n        .signWith(key).compact()\r\n}\r\n\r\nfun validateToken(token: String?, userDetails: UserDetails): Boolean {\r\n    val username = getUsernameFromToken(token)\r\n    return username == userDetails.username &amp;&amp; !isTokenExpired(token)\r\n}\r\n\r\ncompanion object {\r\n    const val JWT_TOKEN_VALIDITY = (5 * 60 * 60).toLong()\r\n    val key: Key = Keys.secretKeyFor(SignatureAlgorithm.HS512)\r\n}\r\n\r\n}\r\n```\r\n\r\nAnd in Filter:\r\n\r\n```\r\nimport io.jsonwebtoken.ExpiredJwtException\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken\r\nimport org.springframework.security.core.context.SecurityContextHolder\r\nimport org.springframework.security.core.userdetails.UserDetails\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource\r\nimport org.springframework.stereotype.Component\r\nimport org.springframework.web.filter.OncePerRequestFilter\r\nimport java.io.IOExceptionimport javax.servlet.FilterChain\r\nimport javax.servlet.ServletException\r\nimport javax.servlet.http.HttpServletRequest\r\nimport javax.servlet.http.HttpServletResponse\r\n\r\n@Componentclass JwtTokenFilter(private val jwtUserDetailsService: JwtUserDetailsService,private val jwtTokenUtil: JwtTokenUtil) : OncePerRequestFilter() {\r\n\r\n@Throws(ServletException::class, IOException::class)\r\noverride fun doFilterInternal(request: HttpServletRequest, response: HttpServletResponse, chain: FilterChain) {\r\n    val requestTokenHeader = request.getHeader(&quot;Authorization&quot;)\r\n    var username: String? = null\r\n    var jwtToken: String? = null\r\n    // JWT Token is in the form &quot;Bearer token&quot;. Remove Bearer word and get\r\n    // only the Token\r\n    if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\r\n        jwtToken = requestTokenHeader.substring(7)\r\n        println(jwtToken)\r\n        try {\r\n            username = jwtTokenUtil.getUsernameFromToken(jwtToken)\r\n        } catch (e: IllegalArgumentException) {\r\n            println(&quot;Unable to get JWT Token&quot;)\r\n        } catch (e: ExpiredJwtException) {\r\n            println(&quot;JWT Token has expired&quot;)\r\n        }\r\n    } else {\r\n        logger.warn(&quot;JWT Token does not begin with Bearer String&quot;)\r\n    }\r\n    // Once we get the token validate it.\r\n    if (username != null &amp;&amp; SecurityContextHolder.getContext().authentication == null) {\r\n        val userDetails: UserDetails = jwtUserDetailsService.loadUserByUsername(username)\r\n\r\n        if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\n            val usernamePasswordAuthenticationToken = UsernamePasswordAuthenticationToken(\r\n                userDetails,\r\n                null,\r\n                userDetails.authorities\r\n            )\r\n            usernamePasswordAuthenticationToken.details = WebAuthenticationDetailsSource().buildDetails(request)\r\n            SecurityContextHolder.getContext().authentication = usernamePasswordAuthenticationToken\r\n        }\r\n    }\r\n    chain.doFilter(request, response)\r\n}\r\n\r\n}\r\n```\r\n\r\nMy security config:\r\n\r\n```\r\nimport org.springframework.beans.factory.annotation.Autowired\r\nimport org.springframework.context.annotation.Bean\r\nimport org.springframework.context.annotation.Configuration\r\nimport org.springframework.security.authentication.AuthenticationManager\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity\r\nimport org.springframework.security.config.http.SessionCreationPolicy\r\nimport org.springframework.security.core.userdetails.User\r\nimport org.springframework.security.core.userdetails.UserDetails\r\nimport org.springframework.security.core.userdetails.UserDetailsService\r\nimport org.springframework.security.crypto.password.PasswordEncoder\r\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager\r\nimport org.springframework.security.web.SecurityFilterChain\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter\r\nimport se.chorus.acceptusemail.security.JwtException\r\nimport se.chorus.acceptusemail.security.JwtTokenFilter\r\nimport se.chorus.acceptusemail.security.JwtUserDetailsService\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\nclass SecurityConfiguration(\r\n    private val jwtUserDetailsService: JwtUserDetailsService,\r\n    private val jwtException: JwtException,\r\n    private val passwordEncoder: PasswordEncoder,\r\n    private val jwtTokenFilter: JwtTokenFilter\r\n) {\r\n\r\n    @Bean\r\n    @Throws(java.lang.Exception::class)\r\n    fun authenticationManager(authenticationConfiguration: AuthenticationConfiguration): AuthenticationManager? {\r\n        return authenticationConfiguration.authenticationManager\r\n    }\r\n\r\n    @Autowired\r\n    @Throws(java.lang.Exception::class)\r\n    fun configureGlobal(auth: AuthenticationManagerBuilder) {\r\n        auth.userDetailsService&lt;UserDetailsService&gt;(jwtUserDetailsService).passwordEncoder(passwordEncoder)\r\n    }\r\n\r\n    @Throws(Exception::class)\r\n    @Bean\r\n    protected fun filterChain(http: HttpSecurity): SecurityFilterChain {\r\n        http.csrf().disable()\r\n            .authorizeHttpRequests { requests -&gt;\r\n                requests\r\n                    .requestMatchers(&quot;/&quot;, &quot;/authenticate&quot;, &quot;/register&quot;).permitAll()\r\n                    .anyRequest().authenticated().and()\r\n                    .exceptionHandling().authenticationEntryPoint(jwtException).and().sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter::class.java)\r\n            }\r\n\r\n        return http.build()\r\n    } // ...\r\n\r\n    @Bean\r\n    fun userDetailsService(): UserDetailsService? {\r\n        val user: UserDetails = User.withUsername(&quot;user&quot;)\r\n            .password(&quot;password&quot;)\r\n            .roles(&quot;USER&quot;)\r\n            .build()\r\n        return InMemoryUserDetailsManager(user)\r\n    }\r\n}\r\n```\r\n\r\nI have tried to change the &quot;key&quot; to a constant secret and also tried various approaches where I use a constant secret encoded to bytearray.\r\n\r\nIt seems like nothing changes my issue.\r\n\r\n\r\nEdit:\r\nI would like it to throw 401 Unauthorized instead of 500 as it does now. I don&#39;t understand why I get a signature exception when it should be an unauthorized exception. As I have set up in my config\r\n\r\n            @Throws(Exception::class)\r\n        @Bean\r\n        protected fun filterChain(http: HttpSecurity): SecurityFilterChain {\r\n            http.csrf().disable()\r\n                .authorizeHttpRequests { requests -&gt;\r\n                    requests\r\n                        .requestMatchers(&quot;/&quot;, &quot;/authenticate&quot;, &quot;/register&quot;).permitAll()\r\n                        .anyRequest().authenticated().and()\r\n                        .exceptionHandling().authenticationEntryPoint(jwtException).and().sessionManagement()\r\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                        .and()\r\n                        .addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter::class.java)\r\n                }\r\n    \r\n\r\n\r\n\r\nMy exception class:\r\n    \r\n    \r\n    \r\n    import org.springframework.security.core.AuthenticationException\r\n    import org.springframework.security.web.AuthenticationEntryPoint\r\n    import org.springframework.stereotype.Component\r\n    import java.io.IOException\r\n    import javax.servlet.http.HttpServletRequest\r\n    import javax.servlet.http.HttpServletResponse\r\n    \r\n    @Component\r\n    class JwtException : AuthenticationEntryPoint {\r\n        @Throws(IOException::class)\r\n        override fun commence(\r\n            request: HttpServletRequest,\r\n            response: HttpServletResponse,\r\n            authException: AuthenticationException\r\n        ) {\r\n            response.sendError(HttpServletResponse.SC_UNAUTHORIZED, authException.message)\r\n        }\r\n    }\r\n\r\n","title":"JWT signature does not match locally computed signature - only happens when bearer token is incorrect","body":"<p>Can't figure out what I am doing wrong. When passing the correct Bearer token everything works fine. But, when trying to invoke an &quot;Unauthorized&quot; by passing the wrong token I get :\n<code>JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.</code></p>\n<p>My code:</p>\n<pre><code>import io.jsonwebtoken.Claims import io.jsonwebtoken.Jwts \nimport io.jsonwebtoken.SignatureAlgorithm \nimport io.jsonwebtoken.security.Keys\nimport org.springframework.security.core.userdetails.UserDetails \nimport org.springframework.stereotype.Component \nimport java.io.Serializable import java.security.Key \nimport java.util.*\n\n@Component class JwtTokenUtil : Serializable {\n\nprivate val serialVersionUID = -2550185165626007488L\n\nfun getUsernameFromToken(token: String?): String {\n    return getClaimFromToken(token, Claims::getSubject)\n}\n\nfun getExpirationDateFromToken(token: String?): Date {\n    return getClaimFromToken(token, Claims::getExpiration)\n}\n\nfun &lt;T&gt; getClaimFromToken(token: String?, claimsResolver: (Claims) -&gt; T): T {\n    val claims: Claims = getAllClaimsFromToken(token)\n    return claimsResolver(claims)\n}\n\nprivate fun getAllClaimsFromToken(token: String?): Claims {\n    return Jwts.parserBuilder()\n        .setSigningKey(key)\n        .build()\n        .parseClaimsJws(token)\n        .body\n}\n\nprivate fun isTokenExpired(token: String?): Boolean {\n    val expiration = getExpirationDateFromToken(token)\n    return expiration.before(Date())\n}\n\nfun generateToken(userDetails: UserDetails): String? {\n    val claims: Map&lt;String, Any&gt; = HashMap()\n    return doGenerateToken(claims, userDetails.username)\n}\n\nprivate fun doGenerateToken(claims: Map&lt;String, Any&gt;, subject: String): String? {\n    return Jwts.builder().setClaims(claims).setSubject(subject).setIssuedAt(Date(System.currentTimeMillis()))\n        .setExpiration(Date(System.currentTimeMillis() + JWT_TOKEN_VALIDITY * 1000))\n        .signWith(key).compact()\n}\n\nfun validateToken(token: String?, userDetails: UserDetails): Boolean {\n    val username = getUsernameFromToken(token)\n    return username == userDetails.username &amp;&amp; !isTokenExpired(token)\n}\n\ncompanion object {\n    const val JWT_TOKEN_VALIDITY = (5 * 60 * 60).toLong()\n    val key: Key = Keys.secretKeyFor(SignatureAlgorithm.HS512)\n}\n\n}\n</code></pre>\n<p>And in Filter:</p>\n<pre><code>import io.jsonwebtoken.ExpiredJwtException\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken\nimport org.springframework.security.core.context.SecurityContextHolder\nimport org.springframework.security.core.userdetails.UserDetails\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource\nimport org.springframework.stereotype.Component\nimport org.springframework.web.filter.OncePerRequestFilter\nimport java.io.IOExceptionimport javax.servlet.FilterChain\nimport javax.servlet.ServletException\nimport javax.servlet.http.HttpServletRequest\nimport javax.servlet.http.HttpServletResponse\n\n@Componentclass JwtTokenFilter(private val jwtUserDetailsService: JwtUserDetailsService,private val jwtTokenUtil: JwtTokenUtil) : OncePerRequestFilter() {\n\n@Throws(ServletException::class, IOException::class)\noverride fun doFilterInternal(request: HttpServletRequest, response: HttpServletResponse, chain: FilterChain) {\n    val requestTokenHeader = request.getHeader(&quot;Authorization&quot;)\n    var username: String? = null\n    var jwtToken: String? = null\n    // JWT Token is in the form &quot;Bearer token&quot;. Remove Bearer word and get\n    // only the Token\n    if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\n        jwtToken = requestTokenHeader.substring(7)\n        println(jwtToken)\n        try {\n            username = jwtTokenUtil.getUsernameFromToken(jwtToken)\n        } catch (e: IllegalArgumentException) {\n            println(&quot;Unable to get JWT Token&quot;)\n        } catch (e: ExpiredJwtException) {\n            println(&quot;JWT Token has expired&quot;)\n        }\n    } else {\n        logger.warn(&quot;JWT Token does not begin with Bearer String&quot;)\n    }\n    // Once we get the token validate it.\n    if (username != null &amp;&amp; SecurityContextHolder.getContext().authentication == null) {\n        val userDetails: UserDetails = jwtUserDetailsService.loadUserByUsername(username)\n\n        if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\n            val usernamePasswordAuthenticationToken = UsernamePasswordAuthenticationToken(\n                userDetails,\n                null,\n                userDetails.authorities\n            )\n            usernamePasswordAuthenticationToken.details = WebAuthenticationDetailsSource().buildDetails(request)\n            SecurityContextHolder.getContext().authentication = usernamePasswordAuthenticationToken\n        }\n    }\n    chain.doFilter(request, response)\n}\n\n}\n</code></pre>\n<p>My security config:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.context.annotation.Bean\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.security.authentication.AuthenticationManager\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity\nimport org.springframework.security.config.http.SessionCreationPolicy\nimport org.springframework.security.core.userdetails.User\nimport org.springframework.security.core.userdetails.UserDetails\nimport org.springframework.security.core.userdetails.UserDetailsService\nimport org.springframework.security.crypto.password.PasswordEncoder\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager\nimport org.springframework.security.web.SecurityFilterChain\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter\nimport se.chorus.acceptusemail.security.JwtException\nimport se.chorus.acceptusemail.security.JwtTokenFilter\nimport se.chorus.acceptusemail.security.JwtUserDetailsService\n\n@Configuration\n@EnableWebSecurity\nclass SecurityConfiguration(\n    private val jwtUserDetailsService: JwtUserDetailsService,\n    private val jwtException: JwtException,\n    private val passwordEncoder: PasswordEncoder,\n    private val jwtTokenFilter: JwtTokenFilter\n) {\n\n    @Bean\n    @Throws(java.lang.Exception::class)\n    fun authenticationManager(authenticationConfiguration: AuthenticationConfiguration): AuthenticationManager? {\n        return authenticationConfiguration.authenticationManager\n    }\n\n    @Autowired\n    @Throws(java.lang.Exception::class)\n    fun configureGlobal(auth: AuthenticationManagerBuilder) {\n        auth.userDetailsService&lt;UserDetailsService&gt;(jwtUserDetailsService).passwordEncoder(passwordEncoder)\n    }\n\n    @Throws(Exception::class)\n    @Bean\n    protected fun filterChain(http: HttpSecurity): SecurityFilterChain {\n        http.csrf().disable()\n            .authorizeHttpRequests { requests -&gt;\n                requests\n                    .requestMatchers(&quot;/&quot;, &quot;/authenticate&quot;, &quot;/register&quot;).permitAll()\n                    .anyRequest().authenticated().and()\n                    .exceptionHandling().authenticationEntryPoint(jwtException).and().sessionManagement()\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                    .and()\n                    .addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter::class.java)\n            }\n\n        return http.build()\n    } // ...\n\n    @Bean\n    fun userDetailsService(): UserDetailsService? {\n        val user: UserDetails = User.withUsername(&quot;user&quot;)\n            .password(&quot;password&quot;)\n            .roles(&quot;USER&quot;)\n            .build()\n        return InMemoryUserDetailsManager(user)\n    }\n}\n</code></pre>\n<p>I have tried to change the &quot;key&quot; to a constant secret and also tried various approaches where I use a constant secret encoded to bytearray.</p>\n<p>It seems like nothing changes my issue.</p>\n<p>Edit:\nI would like it to throw 401 Unauthorized instead of 500 as it does now. I don't understand why I get a signature exception when it should be an unauthorized exception. As I have set up in my config</p>\n<pre><code>        @Throws(Exception::class)\n    @Bean\n    protected fun filterChain(http: HttpSecurity): SecurityFilterChain {\n        http.csrf().disable()\n            .authorizeHttpRequests { requests -&gt;\n                requests\n                    .requestMatchers(&quot;/&quot;, &quot;/authenticate&quot;, &quot;/register&quot;).permitAll()\n                    .anyRequest().authenticated().and()\n                    .exceptionHandling().authenticationEntryPoint(jwtException).and().sessionManagement()\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                    .and()\n                    .addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter::class.java)\n            }\n</code></pre>\n<p>My exception class:</p>\n<pre><code>import org.springframework.security.core.AuthenticationException\nimport org.springframework.security.web.AuthenticationEntryPoint\nimport org.springframework.stereotype.Component\nimport java.io.IOException\nimport javax.servlet.http.HttpServletRequest\nimport javax.servlet.http.HttpServletResponse\n\n@Component\nclass JwtException : AuthenticationEntryPoint {\n    @Throws(IOException::class)\n    override fun commence(\n        request: HttpServletRequest,\n        response: HttpServletResponse,\n        authException: AuthenticationException\n    ) {\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, authException.message)\n    }\n}\n</code></pre>\n"},{"tags":["java","json","orm","spring-mvc","jackson"],"comments":[{"owner":{"account_id":4667026,"reputation":10199,"user_id":3779853,"accept_rate":85,"display_name":"phil294"},"score":0,"creation_date":1483565233,"post_id":3325387,"comment_id":70152779,"body_markdown":"Add `@Transient` to `Trainee.bodyStats`.","body":"Add <code>@Transient</code> to <code>Trainee.bodyStats</code>."},{"owner":{"account_id":3665677,"reputation":2063,"user_id":3395831,"accept_rate":53,"display_name":"Utku"},"score":4,"creation_date":1513405471,"post_id":3325387,"comment_id":82650226,"body_markdown":"As of 2017, `@JsonIgnoreProperties` is the cleanest solution.\n Check out [Zammel AlaaEddine&#39;s answer](https://stackoverflow.com/a/39573255/3395831) for more details.","body":"As of 2017, <code>@JsonIgnoreProperties</code> is the cleanest solution.  Check out <a href=\"https://stackoverflow.com/a/39573255/3395831\">Zammel AlaaEddine&#39;s answer</a> for more details."},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1525223040,"post_id":3325387,"comment_id":87269606,"body_markdown":"How is this spring&#39;s fault??","body":"How is this spring&#39;s fault??"},{"owner":{"account_id":4802848,"reputation":2464,"user_id":3878948,"accept_rate":86,"display_name":"Rishabh Agarwal"},"score":0,"creation_date":1541185593,"post_id":3325387,"comment_id":93143680,"body_markdown":"https://stackoverflow.com/a/53124476/3878948","body":"<a href=\"https://stackoverflow.com/a/53124476/3878948\">stackoverflow.com/a/53124476/3878948</a>"},{"owner":{"account_id":15539213,"reputation":346,"user_id":11210547,"display_name":"P&#233;ter Bar&#225;th"},"score":0,"creation_date":1651587696,"post_id":3325387,"comment_id":127395401,"body_markdown":"Maybe it will be helpful: https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion","body":"Maybe it will be helpful: <a href=\"https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":56356,"reputation":1922,"user_id":168796,"accept_rate":60,"display_name":"Ben"},"score":1,"creation_date":1285947277,"post_id":3329629,"comment_id":4079509,"body_markdown":"I had the same problem and @JsonIgnore solved it. I had the method annotated with @XmlTransient which should have done the same (and worked when using Jettison). You thought you can use jaxb annotation with Jackson so why isn&#39;t this working?","body":"I had the same problem and @JsonIgnore solved it. I had the method annotated with @XmlTransient which should have done the same (and worked when using Jettison). You thought you can use jaxb annotation with Jackson so why isn&#39;t this working?"},{"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"score":1,"creation_date":1285948294,"post_id":3329629,"comment_id":4079707,"body_markdown":"@Ben: Actually I don&#39;t know. Perhaps its support was not enabled: http://wiki.fasterxml.com/JacksonJAXBAnnotations","body":"@Ben: Actually I don&#39;t know. Perhaps its support was not enabled: <a href=\"http://wiki.fasterxml.com/JacksonJAXBAnnotations\" rel=\"nofollow noreferrer\">wiki.fasterxml.com/JacksonJAXBAnnotations</a>"},{"owner":{"account_id":2162795,"reputation":12144,"user_id":1916588,"accept_rate":56,"display_name":"Kurt Bourbaki"},"score":47,"creation_date":1391601655,"post_id":3329629,"comment_id":32591875,"body_markdown":"Since Jackson 1.6 there&#39;s a better solution: you can use two new annotations to solve infinite recursion problem without ignoring the getters/setters during serialization. See my answer below for details.","body":"Since Jackson 1.6 there&#39;s a better solution: you can use two new annotations to solve infinite recursion problem without ignoring the getters/setters during serialization. See my answer below for details."},{"owner":{"account_id":2642203,"reputation":1763,"user_id":2285617,"accept_rate":79,"display_name":"Semyon Danilov"},"score":1,"creation_date":1393599513,"post_id":3329629,"comment_id":33519051,"body_markdown":"@axtavt Thanks for perfect answer. Btw, I came with another solution: you can simply avoid creating getter for this value, so Spring won&#39;t be able to access it while creating JSON (but I don&#39;t think that it suits every case, so your answer is better)","body":"@axtavt Thanks for perfect answer. Btw, I came with another solution: you can simply avoid creating getter for this value, so Spring won&#39;t be able to access it while creating JSON (but I don&#39;t think that it suits every case, so your answer is better)"},{"owner":{"account_id":3354060,"reputation":5435,"user_id":2817457,"accept_rate":50,"display_name":"Jianwu Chen"},"score":12,"creation_date":1427362907,"post_id":3329629,"comment_id":46749281,"body_markdown":"All the above solutions seem need to change the domain objects by adding annotations. If I&#39;m serialize third party classes which I have no way to modify them. How can I avoid this issue?","body":"All the above solutions seem need to change the domain objects by adding annotations. If I&#39;m serialize third party classes which I have no way to modify them. How can I avoid this issue?"},{"owner":{"account_id":1531336,"reputation":447,"user_id":1428467,"accept_rate":100,"display_name":"slim"},"score":4,"creation_date":1474632167,"post_id":3329629,"comment_id":66622276,"body_markdown":"this solution doesn&#39;t work in some situations. In relational database with jpa, if you put `@JsonIgnore` you will null in &quot;foreign key&quot; when you update the entity...","body":"this solution doesn&#39;t work in some situations. In relational database with jpa, if you put <code>@JsonIgnore</code> you will null in &quot;foreign key&quot; when you update the entity..."},{"owner":{"account_id":2686270,"reputation":915,"user_id":2320630,"display_name":"fabioresner"},"score":1,"creation_date":1500479386,"post_id":3329629,"comment_id":77358257,"body_markdown":"I&#39;ve also added an example bellow using @JsonView to solve the problem. For me it&#39;s the best solution among all discussed here.","body":"I&#39;ve also added an example bellow using @JsonView to solve the problem. For me it&#39;s the best solution among all discussed here."},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":1,"creation_date":1565116223,"post_id":3329629,"comment_id":101248372,"body_markdown":"Thanks for great solution. However I found that `@JsonManagedReference`, `@JsonBackReference` does not gives you the data associated with `@OneToMany` and `@ManyToOne` scenario, also when using `@JsonIgnoreProperties` does skip associated entity data. How to solve this?","body":"Thanks for great solution. However I found that <code>@JsonManagedReference</code>, <code>@JsonBackReference</code> does not gives you the data associated with <code>@OneToMany</code> and <code>@ManyToOne</code> scenario, also when using <code>@JsonIgnoreProperties</code> does skip associated entity data. How to solve this?"},{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1575519374,"post_id":3329629,"comment_id":104596047,"body_markdown":"@axtavt If I put @ jsonIgnore annotation in the child. I could not get parent object from child .when I try to take the child. why the parent object is not coming, it is ignored by @ jsonignore. tell me the way to get from child to parent and parent to child.","body":"@axtavt If I put @ jsonIgnore annotation in the child. I could not get parent object from child .when I try to take the child. why the parent object is not coming, it is ignored by @ jsonignore. tell me the way to get from child to parent and parent to child."},{"owner":{"account_id":1613382,"reputation":3295,"user_id":1502439,"accept_rate":40,"display_name":"Janac Meena"},"score":1,"creation_date":1579549867,"post_id":3329629,"comment_id":105796500,"body_markdown":"I put this annotation on all of my OneToMany relations, and it works great","body":"I put this annotation on all of my OneToMany relations, and it works great"}],"tags":[],"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"comment_count":10,"down_vote_count":15,"up_vote_count":374,"is_accepted":true,"score":359,"last_activity_date":1599557972,"creation_date":1280069622,"answer_id":3329629,"question_id":3325387,"body_markdown":"You may use `@JsonIgnore` to break the cycle ([reference][1]).\r\n\r\nYou need to import `org.codehaus.jackson.annotate.JsonIgnore` (legacy versions) or `com.fasterxml.jackson.annotation.JsonIgnore` (current versions).\r\n\r\n \r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-annotations#annotations-for-ignoring-properties","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>You may use <code>@JsonIgnore</code> to break the cycle (<a href=\"https://github.com/FasterXML/jackson-annotations#annotations-for-ignoring-properties\" rel=\"noreferrer\">reference</a>).</p>\n<p>You need to import <code>org.codehaus.jackson.annotate.JsonIgnore</code> (legacy versions) or <code>com.fasterxml.jackson.annotation.JsonIgnore</code> (current versions).</p>\n"},{"comments":[{"owner":{"account_id":10081074,"reputation":1138,"user_id":9040373,"display_name":"whatamidoingwithmylife"},"score":2,"creation_date":1558426850,"post_id":4126846,"comment_id":99086862,"body_markdown":"Links are dead, do you mind updating them or editing your answer.","body":"Links are dead, do you mind updating them or editing your answer."}],"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1608127529,"creation_date":1289241358,"answer_id":4126846,"question_id":3325387,"body_markdown":"Also, Jackson 1.6 has support for [handling bi-directional references][1]... which seems like \r\nwhat you are looking for ([this blog entry][2] also mentions the feature)\r\n\r\nAnd as of July 2011, there is also &quot;[jackson-module-hibernate][3]&quot; which might help in some aspects of dealing with Hibernate objects, although not necessarily this particular one (which does require annotations).\r\n\r\n  [1]: https://massiveprogramming.blogspot.com/2017/03/jacksonfeaturebidirreferences-fasterxml.html\r\n  [2]: http://jackson-users.ning.com/profiles/blogs/using-bidirectional-feature\r\n  [3]: https://github.com/FasterXML/jackson-module-hibernate","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>Also, Jackson 1.6 has support for <a href=\"https://massiveprogramming.blogspot.com/2017/03/jacksonfeaturebidirreferences-fasterxml.html\" rel=\"nofollow noreferrer\">handling bi-directional references</a>... which seems like\nwhat you are looking for (<a href=\"http://jackson-users.ning.com/profiles/blogs/using-bidirectional-feature\" rel=\"nofollow noreferrer\">this blog entry</a> also mentions the feature)</p>\n<p>And as of July 2011, there is also &quot;<a href=\"https://github.com/FasterXML/jackson-module-hibernate\" rel=\"nofollow noreferrer\">jackson-module-hibernate</a>&quot; which might help in some aspects of dealing with Hibernate objects, although not necessarily this particular one (which does require annotations).</p>\n"},{"tags":[],"owner":{"account_id":466908,"reputation":13049,"user_id":871953,"accept_rate":94,"display_name":"Eugene Retunsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1334029615,"creation_date":1334029615,"answer_id":10082869,"question_id":3325387,"body_markdown":"Now Jackson supports avoiding cycles without ignoring the fields:\r\n\r\nhttps://stackoverflow.com/questions/10065002/jackson-serialization-of-entities-with-birectional-relationships-avoiding-cyc","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>Now Jackson supports avoiding cycles without ignoring the fields:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/10065002/jackson-serialization-of-entities-with-birectional-relationships-avoiding-cyc\">Jackson - serialization of entities with birectional relationships (avoiding cycles)</a></p>\n"},{"comments":[{"owner":{"account_id":985380,"reputation":7450,"user_id":1005102,"accept_rate":71,"display_name":"Utku &#214;zdemir"},"score":38,"creation_date":1388198792,"post_id":18288939,"comment_id":31202364,"body_markdown":"Thanks for clear answer. This is a more convenient solution than putting `@JsonIgnore` on back reference.","body":"Thanks for clear answer. This is a more convenient solution than putting <code>@JsonIgnore</code> on back reference."},{"owner":{"account_id":894910,"reputation":475,"user_id":932408,"accept_rate":62,"display_name":"flosk8"},"score":3,"creation_date":1410028691,"post_id":18288939,"comment_id":40176993,"body_markdown":"This is definitely the right way to do it. If you do it like this on the server side because you use Jackson there, it doesnt matter what json mapper you use on the client side and you don not have to set the child to parent link manual. It just works. Thanks Kurt","body":"This is definitely the right way to do it. If you do it like this on the server side because you use Jackson there, it doesnt matter what json mapper you use on the client side and you don not have to set the child to parent link manual. It just works. Thanks Kurt"},{"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"score":1,"creation_date":1428389820,"post_id":18288939,"comment_id":47130770,"body_markdown":"Nice, detailed explanation and definitely better and more descriptive approach than `@JsonIgnore`.","body":"Nice, detailed explanation and definitely better and more descriptive approach than <code>@JsonIgnore</code>."},{"owner":{"account_id":95741,"reputation":5991,"user_id":260574,"accept_rate":76,"display_name":"n00b"},"score":2,"creation_date":1432190702,"post_id":18288939,"comment_id":48823696,"body_markdown":"Thanks! The @JsonIdentityInfo worked for cyclical references that involved multiple entities in many overlapping loops.","body":"Thanks! The @JsonIdentityInfo worked for cyclical references that involved multiple entities in many overlapping loops."},{"owner":{"account_id":295230,"reputation":14501,"user_id":599528,"accept_rate":95,"display_name":"Jacob"},"score":0,"creation_date":1438766099,"post_id":18288939,"comment_id":51579381,"body_markdown":"Any idea about the problem with this? http://stackoverflow.com/questions/31825622/java-lang-illegalargumentexception-can-not-handle-managed-back-reference","body":"Any idea about the problem with this? <a href=\"http://stackoverflow.com/questions/31825622/java-lang-illegalargumentexception-can-not-handle-managed-back-reference\" title=\"java lang illegalargumentexception can not handle managed back reference\">stackoverflow.com/questions/31825622/&hellip;</a>"},{"owner":{"account_id":3018700,"reputation":869,"user_id":2560218,"accept_rate":69,"display_name":"Kaizar Laxmidhar"},"score":0,"creation_date":1447344755,"post_id":18288939,"comment_id":55125051,"body_markdown":"This is quite true BUT in my case I had to move the annotations JsonManagedReference and JsonBackReference at getters methods, at field level it didn&#39;t work","body":"This is quite true BUT in my case I had to move the annotations JsonManagedReference and JsonBackReference at getters methods, at field level it didn&#39;t work"},{"owner":{"account_id":2340452,"reputation":711,"user_id":2051870,"accept_rate":15,"display_name":"swv"},"score":1,"creation_date":1455213023,"post_id":18288939,"comment_id":58400026,"body_markdown":"I can&#39;t get this to work for the life of me.  I think I have a pretty similar setup, but I&#39;ve obviously got something wrong since I cannot get anything but infinite recurision errors:","body":"I can&#39;t get this to work for the life of me.  I think I have a pretty similar setup, but I&#39;ve obviously got something wrong since I cannot get anything but infinite recurision errors:"},{"owner":{"account_id":8053096,"reputation":3420,"user_id":6071045,"accept_rate":32,"display_name":"Alessandro C"},"score":1,"creation_date":1464777126,"post_id":18288939,"comment_id":62619332,"body_markdown":"If the annotations are in the Entitites Class it doesn&#39;t work with Spring Data Rest. The annotations need to stay in the Projection classes, otherwise the problem remains.","body":"If the annotations are in the Entitites Class it doesn&#39;t work with Spring Data Rest. The annotations need to stay in the Projection classes, otherwise the problem remains."},{"owner":{"account_id":1076897,"reputation":2780,"user_id":1074834,"accept_rate":71,"display_name":"Oleg Abrazhaev"},"score":1,"creation_date":1468580389,"post_id":18288939,"comment_id":64197336,"body_markdown":"I have tried @JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property=&quot;@id&quot;)\nand it&#39;s just add @id with increasing number but doesn&#39;t remove recursion. And If I use annotations JsonManaged and JsonBack than I haven&#39;t this fields in JSON output at all.","body":"I have tried @JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGe&zwnj;&#8203;nerator.class, property=&quot;@id&quot;) and it&#39;s just add @id with increasing number but doesn&#39;t remove recursion. And If I use annotations JsonManaged and JsonBack than I haven&#39;t this fields in JSON output at all."},{"owner":{"account_id":1076897,"reputation":2780,"user_id":1074834,"accept_rate":71,"display_name":"Oleg Abrazhaev"},"score":1,"creation_date":1468582574,"post_id":18288939,"comment_id":64198546,"body_markdown":"I have mixed `@OneToMany` and `@ManyToOne` and `@JsonManagedReference` position, so now it&#39;s work. `@JsonManagedReference` should be on `@ManyToOne` side and `@JsonBackReference` on `@OneToMany` side.","body":"I have mixed <code>@OneToMany</code> and <code>@ManyToOne</code> and <code>@JsonManagedReference</code> position, so now it&#39;s work. <code>@JsonManagedReference</code> should be on <code>@ManyToOne</code> side and <code>@JsonBackReference</code> on <code>@OneToMany</code> side."},{"owner":{"account_id":3045528,"reputation":18505,"user_id":2581314,"accept_rate":82,"display_name":"erluxman"},"score":1,"creation_date":1497870454,"post_id":18288939,"comment_id":76243291,"body_markdown":"Used &#39;@JsonManagedReference&#39; and &#39;@JsonBackReference&#39; , two annotations that saved me.. Thank you so much .","body":"Used &#39;@JsonManagedReference&#39; and &#39;@JsonBackReference&#39; , two annotations that saved me.. Thank you so much ."},{"owner":{"account_id":2447666,"reputation":513,"user_id":2134591,"accept_rate":27,"display_name":"SuRa"},"score":0,"creation_date":1505222039,"post_id":18288939,"comment_id":79317018,"body_markdown":"@Kurt Will these annotations work in bi-directional way? i.e., Trainee have BodyStat &amp; BodyStat  have Trainee?","body":"@Kurt Will these annotations work in bi-directional way? i.e., Trainee have BodyStat &amp; BodyStat  have Trainee?"},{"owner":{"account_id":2589855,"reputation":89,"user_id":2244793,"display_name":"Akshat M"},"score":1,"creation_date":1507053988,"post_id":18288939,"comment_id":80055897,"body_markdown":"@Kurt: Thanks man. This works for me. I was not able to understand why I was getting recursive unlimited results and browser and IDE both getting hanged.","body":"@Kurt: Thanks man. This works for me. I was not able to understand why I was getting recursive unlimited results and browser and IDE both getting hanged."},{"owner":{"account_id":2480042,"reputation":1134,"user_id":2159680,"accept_rate":81,"display_name":"Eric Huang"},"score":0,"creation_date":1526462948,"post_id":18288939,"comment_id":87750438,"body_markdown":"Does `@JsonManageReference` and `@jsonBackReference` work on `@ManyToMany` relationships?  .... I have tried above solution but still getting infinite recursion","body":"Does <code>@JsonManageReference</code> and <code>@jsonBackReference</code> work on <code>@ManyToMany</code> relationships?  .... I have tried above solution but still getting infinite recursion"},{"owner":{"account_id":3987330,"reputation":711,"user_id":3287514,"accept_rate":80,"display_name":"OzzyTheGiant"},"score":0,"creation_date":1526676308,"post_id":18288939,"comment_id":87853507,"body_markdown":"If you still didn&#39;t quite get the jist of using `@JsonIgnoreProperties` on Hibernate entities, place the annotation at the top of the class and pass in the names of the fields you wish to ignore. Normally this would be the fields that are annotated with `@ManyToOne`","body":"If you still didn&#39;t quite get the jist of using <code>@JsonIgnoreProperties</code> on Hibernate entities, place the annotation at the top of the class and pass in the names of the fields you wish to ignore. Normally this would be the fields that are annotated with <code>@ManyToOne</code>"},{"owner":{"account_id":2384530,"reputation":1672,"user_id":2085768,"display_name":"RoutesMaps.com"},"score":0,"creation_date":1555082539,"post_id":18288939,"comment_id":97998464,"body_markdown":"You can not use Collection, Map, Array or enumeration as @JsonBackReference: https://fasterxml.github.io/jackson-annotations/javadoc/2.2.0/com/fasterxml/jackson/annotation/JsonBackReference.html.","body":"You can not use Collection, Map, Array or enumeration as @JsonBackReference: <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.2.0/com/fasterxml/jackson/annotation/JsonBackReference.html\" rel=\"nofollow noreferrer\">fasterxml.github.io/jackson-annotations/javadoc/2.2.0/com/&hellip;</a>."},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1565115316,"post_id":18288939,"comment_id":101248002,"body_markdown":"@All - Only issue with this solution is that dates are coming like &quot;createdDate&quot;: {\n                &quot;epochSecond&quot;: 1565115275,\n                &quot;nano&quot;: 767000000\n            },\n            &quot;lastUpdateDate&quot;: {\n                &quot;epochSecond&quot;: 1565115275,\n                &quot;nano&quot;: 767000000\n            },","body":"@All - Only issue with this solution is that dates are coming like &quot;createdDate&quot;: {                 &quot;epochSecond&quot;: 1565115275,                 &quot;nano&quot;: 767000000             },             &quot;lastUpdateDate&quot;: {                 &quot;epochSecond&quot;: 1565115275,                 &quot;nano&quot;: 767000000             },"},{"owner":{"account_id":1456294,"reputation":4735,"user_id":1371792,"accept_rate":71,"display_name":"GreenROBO"},"score":0,"creation_date":1566631100,"post_id":18288939,"comment_id":101724474,"body_markdown":"What if I want to get &quot;trainee_fk&quot; in Json Response of &quot;ta_bodystat&quot; table response?  Does Anyone Know?","body":"What if I want to get &quot;trainee_fk&quot; in Json Response of &quot;ta_bodystat&quot; table response?  Does Anyone Know?"},{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1575519526,"post_id":18288939,"comment_id":104596075,"body_markdown":"If I put @ jsonIgnore annotation in the child. I could not get parent object from child .when I try to take the child. why the parent object is not coming, it is ignored by @ jsonignore. tell me the way to get from child to parent and parent to child.","body":"If I put @ jsonIgnore annotation in the child. I could not get parent object from child .when I try to take the child. why the parent object is not coming, it is ignored by @ jsonignore. tell me the way to get from child to parent and parent to child."},{"owner":{"account_id":9691730,"reputation":1318,"user_id":7189597,"display_name":"Sobhan"},"score":0,"creation_date":1580193781,"post_id":18288939,"comment_id":106007058,"body_markdown":"@kurt what if I got this error on creating Json from DTOs not Entitys and i have got no annotation related to relation ships???could you please help me?","body":"@kurt what if I got this error on creating Json from DTOs not Entitys and i have got no annotation related to relation ships???could you please help me?"},{"owner":{"account_id":9518077,"reputation":3742,"user_id":8135721,"display_name":"Bawantha"},"score":0,"creation_date":1624932044,"post_id":18288939,"comment_id":120485954,"body_markdown":"Adding this won&#39;t show me the at least one time result. It completely doesn&#39;t show the result","body":"Adding this won&#39;t show me the at least one time result. It completely doesn&#39;t show the result"}],"tags":[],"owner":{"account_id":2162795,"reputation":12144,"user_id":1916588,"accept_rate":56,"display_name":"Kurt Bourbaki"},"comment_count":21,"down_vote_count":0,"up_vote_count":804,"is_accepted":false,"score":804,"last_activity_date":1677754836,"creation_date":1376743213,"answer_id":18288939,"question_id":3325387,"body_markdown":"## JsonIgnoreProperties [2017 Update]:\r\n\r\nYou can now use [JsonIgnoreProperties](https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonIgnoreProperties.html) to _suppress serialization of properties (during serialization), or ignore processing of JSON properties read (during deserialization)_. If this is not what you&#39;re looking for, please keep reading below.\r\n\r\n(Thanks to As Zammel AlaaEddine for pointing this out).\r\n\r\n---\r\n\r\n## JsonManagedReference and JsonBackReference\r\nSince Jackson 1.6 you can use two annotations to solve the infinite recursion problem without ignoring the getters/setters during serialization: [`@JsonManagedReference`](https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonManagedReference.html) and [`@JsonBackReference`](https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonBackReference.html).\r\n\r\n**Explanation**\r\n\r\nFor Jackson to work well, one of the two sides of the relationship should not be serialized, in order to avoid the infite loop that causes your stackoverflow error.\r\n\r\nSo, Jackson takes the forward part of the reference (your `Set&lt;BodyStat&gt; bodyStats` in Trainee class), and converts it in a json-like storage format; this is the so-called **marshalling** process. Then, Jackson looks for the back part of the reference (i.e. `Trainee trainee` in BodyStat class) and leaves it as it is, not serializing it. This part of the relationship will be re-constructed during the deserialization (**unmarshalling**) of the forward reference.\r\n\r\nYou can change your code like this (I skip the useless parts):\r\n\r\n**Business Object 1:**\r\n    \r\n    @Entity\r\n    @Table(name = &quot;ta_trainee&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\r\n    public class Trainee extends BusinessObject {\r\n\r\n        @OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n        @Column(nullable = true)\r\n        @JsonManagedReference\r\n        private Set&lt;BodyStat&gt; bodyStats;\r\n\r\n\r\n**Business Object 2:**\r\n\r\n    @Entity\r\n    @Table(name = &quot;ta_bodystat&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\r\n    public class BodyStat extends BusinessObject {\r\n\r\n        @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n        @JoinColumn(name=&quot;trainee_fk&quot;)\r\n        @JsonBackReference\r\n        private Trainee trainee;\r\n\r\n\r\nNow it all should work properly.\r\n\r\nIf you want more informations, I wrote an article about [Json and Jackson Stackoverflow issues on Keenformatics](https://www.keenformatics.com/how-to-solve-json-infinite-recursion), my blog.\r\n\r\n**EDIT:** \r\n\r\nAnother useful annotation you could check is [@JsonIdentityInfo](https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonIdentityInfo.html): using it, everytime Jackson serializes your object, it will add an ID (or another attribute of your choose) to it, so that it won&#39;t entirely &quot;scan&quot; it again everytime. This can be useful when you&#39;ve got a chain loop between more interrelated objects (for example: Order -&gt; OrderLine -&gt; User -&gt; Order and over again).\r\n\r\nIn this case you&#39;ve got to be careful, since you could need to read your object&#39;s attributes more than once (for example in a products list with more products that share the same seller), and this annotation prevents you to do so. I suggest to always take a look at firebug logs to check the Json response and see what&#39;s going on in your code.\r\n\r\n**Sources:**\r\n\r\n* [Keenformatics - How To Solve JSON infinite recursion Stackoverflow](https://www.keenformatics.com/how-to-solve-json-infinite-recursion/) (my blog)\r\n* Personal experience","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<h2>JsonIgnoreProperties [2017 Update]:</h2>\n<p>You can now use <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonIgnoreProperties.html\" rel=\"noreferrer\">JsonIgnoreProperties</a> to <em>suppress serialization of properties (during serialization), or ignore processing of JSON properties read (during deserialization)</em>. If this is not what you're looking for, please keep reading below.</p>\n<p>(Thanks to As Zammel AlaaEddine for pointing this out).</p>\n<hr />\n<h2>JsonManagedReference and JsonBackReference</h2>\n<p>Since Jackson 1.6 you can use two annotations to solve the infinite recursion problem without ignoring the getters/setters during serialization: <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonManagedReference.html\" rel=\"noreferrer\"><code>@JsonManagedReference</code></a> and <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonBackReference.html\" rel=\"noreferrer\"><code>@JsonBackReference</code></a>.</p>\n<p><strong>Explanation</strong></p>\n<p>For Jackson to work well, one of the two sides of the relationship should not be serialized, in order to avoid the infite loop that causes your stackoverflow error.</p>\n<p>So, Jackson takes the forward part of the reference (your <code>Set&lt;BodyStat&gt; bodyStats</code> in Trainee class), and converts it in a json-like storage format; this is the so-called <strong>marshalling</strong> process. Then, Jackson looks for the back part of the reference (i.e. <code>Trainee trainee</code> in BodyStat class) and leaves it as it is, not serializing it. This part of the relationship will be re-constructed during the deserialization (<strong>unmarshalling</strong>) of the forward reference.</p>\n<p>You can change your code like this (I skip the useless parts):</p>\n<p><strong>Business Object 1:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;ta_trainee&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\npublic class Trainee extends BusinessObject {\n\n    @OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @Column(nullable = true)\n    @JsonManagedReference\n    private Set&lt;BodyStat&gt; bodyStats;\n</code></pre>\n<p><strong>Business Object 2:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;ta_bodystat&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\npublic class BodyStat extends BusinessObject {\n\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;trainee_fk&quot;)\n    @JsonBackReference\n    private Trainee trainee;\n</code></pre>\n<p>Now it all should work properly.</p>\n<p>If you want more informations, I wrote an article about <a href=\"https://www.keenformatics.com/how-to-solve-json-infinite-recursion\" rel=\"noreferrer\">Json and Jackson Stackoverflow issues on Keenformatics</a>, my blog.</p>\n<p><strong>EDIT:</strong></p>\n<p>Another useful annotation you could check is <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonIdentityInfo.html\" rel=\"noreferrer\">@JsonIdentityInfo</a>: using it, everytime Jackson serializes your object, it will add an ID (or another attribute of your choose) to it, so that it won't entirely &quot;scan&quot; it again everytime. This can be useful when you've got a chain loop between more interrelated objects (for example: Order -&gt; OrderLine -&gt; User -&gt; Order and over again).</p>\n<p>In this case you've got to be careful, since you could need to read your object's attributes more than once (for example in a products list with more products that share the same seller), and this annotation prevents you to do so. I suggest to always take a look at firebug logs to check the Json response and see what's going on in your code.</p>\n<p><strong>Sources:</strong></p>\n<ul>\n<li><a href=\"https://www.keenformatics.com/how-to-solve-json-infinite-recursion/\" rel=\"noreferrer\">Keenformatics - How To Solve JSON infinite recursion Stackoverflow</a> (my blog)</li>\n<li>Personal experience</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":985380,"reputation":7450,"user_id":1005102,"accept_rate":71,"display_name":"Utku &#214;zdemir"},"score":0,"creation_date":1388198931,"post_id":20338702,"comment_id":31202386,"body_markdown":"Can you please explain &quot;This worked much better&quot;? Is there a problem with managed reference?","body":"Can you please explain &quot;This worked much better&quot;? Is there a problem with managed reference?"},{"owner":{"account_id":2162795,"reputation":12144,"user_id":1916588,"accept_rate":56,"display_name":"Kurt Bourbaki"},"score":0,"creation_date":1388503634,"post_id":20338702,"comment_id":31293856,"body_markdown":"@Utku&#214;zdemir I added details about `@JsonIdentityInfo` in my answer above.","body":"@Utku&#214;zdemir I added details about <code>@JsonIdentityInfo</code> in my answer above."},{"owner":{"account_id":96131,"reputation":432,"user_id":261433,"accept_rate":50,"display_name":"cuser"},"score":3,"creation_date":1389896270,"post_id":20338702,"comment_id":31868640,"body_markdown":"this is the best solution we found so far, because when we used &quot; @JsonManagedReference&quot; the get method successfully returned the values without any stackoverflow error. But, when we tried to save data using the post, it returned an error of 415 (unsupported media error)","body":"this is the best solution we found so far, because when we used &quot; @JsonManagedReference&quot; the get method successfully returned the values without any stackoverflow error. But, when we tried to save data using the post, it returned an error of 415 (unsupported media error)"},{"owner":{"account_id":1076897,"reputation":2780,"user_id":1074834,"accept_rate":71,"display_name":"Oleg Abrazhaev"},"score":3,"creation_date":1468581347,"post_id":20338702,"comment_id":64197911,"body_markdown":"I have added `@JsonIdentityInfo` annotation to my entities but it&#39;s not solves the recursion problem. Only `@JsonBackReference` and `@JsonManagedReference` solves, but they are remove mapped properties from JSON.","body":"I have added <code>@JsonIdentityInfo</code> annotation to my entities but it&#39;s not solves the recursion problem. Only <code>@JsonBackReference</code> and <code>@JsonManagedReference</code> solves, but they are remove mapped properties from JSON."}],"tags":[],"owner":{"account_id":472489,"reputation":2168,"user_id":1442960,"accept_rate":80,"display_name":"Marcus"},"comment_count":4,"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1401735409,"creation_date":1386021315,"answer_id":20338702,"question_id":3325387,"body_markdown":"Also, using Jackson 2.0+ you can use `@JsonIdentityInfo`.  This worked much better for my hibernate classes than `@JsonBackReference` and `@JsonManagedReference`, which had problems for me and did not solve the issue.  Just add something like:\r\n\r\n    @Entity\r\n    @Table(name = &quot;ta_trainee&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\r\n    @JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property=&quot;@traineeId&quot;)\r\n    public class Trainee extends BusinessObject {\r\n\r\n    @Entity\r\n    @Table(name = &quot;ta_bodystat&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\r\n    @JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property=&quot;@bodyStatId&quot;)\r\n    public class BodyStat extends BusinessObject {\r\n\r\nand it should work.","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>Also, using Jackson 2.0+ you can use <code>@JsonIdentityInfo</code>.  This worked much better for my hibernate classes than <code>@JsonBackReference</code> and <code>@JsonManagedReference</code>, which had problems for me and did not solve the issue.  Just add something like:</p>\n\n<pre><code>@Entity\n@Table(name = \"ta_trainee\", uniqueConstraints = {@UniqueConstraint(columnNames = {\"id\"})})\n@JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property=\"@traineeId\")\npublic class Trainee extends BusinessObject {\n\n@Entity\n@Table(name = \"ta_bodystat\", uniqueConstraints = {@UniqueConstraint(columnNames = {\"id\"})})\n@JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property=\"@bodyStatId\")\npublic class BodyStat extends BusinessObject {\n</code></pre>\n\n<p>and it should work.</p>\n"},{"comments":[{"owner":{"account_id":894910,"reputation":475,"user_id":932408,"accept_rate":62,"display_name":"flosk8"},"score":3,"creation_date":1410028845,"post_id":25573341,"comment_id":40177050,"body_markdown":"I think its better to use Kurt&#39;s solution. Because the JoinColumn solution can end in unreferenced data dead bodies.","body":"I think its better to use Kurt&#39;s solution. Because the JoinColumn solution can end in unreferenced data dead bodies."},{"owner":{"account_id":4547683,"reputation":3756,"user_id":3693726,"accept_rate":92,"display_name":"Deniss M."},"score":1,"creation_date":1521978103,"post_id":25573341,"comment_id":85953284,"body_markdown":"This is actually the only thing that helped me. No other solutions from the top worked. I am still not sure why...","body":"This is actually the only thing that helped me. No other solutions from the top worked. I am still not sure why..."}],"tags":[],"owner":{"account_id":4905682,"reputation":839,"user_id":3952494,"display_name":"Klapsa2503"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1409333480,"creation_date":1409333480,"answer_id":25573341,"question_id":3325387,"body_markdown":"In my case it was enough to change relation from:\r\n    \r\n    @OneToMany(mappedBy = &quot;county&quot;)\r\n    private List&lt;Town&gt; towns;\r\nto:\r\n\r\n    @OneToMany\r\n    private List&lt;Town&gt; towns;\r\nanother relation stayed as it was:\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;county_id&quot;)\r\n    private County county;\r\n","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>In my case it was enough to change relation from:</p>\n\n<pre><code>@OneToMany(mappedBy = \"county\")\nprivate List&lt;Town&gt; towns;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>@OneToMany\nprivate List&lt;Town&gt; towns;\n</code></pre>\n\n<p>another relation stayed as it was:</p>\n\n<pre><code>@ManyToOne\n@JoinColumn(name = \"county_id\")\nprivate County county;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1708812,"reputation":790,"user_id":1567291,"accept_rate":77,"display_name":"bytor99999"},"score":0,"creation_date":1458845553,"post_id":27466459,"comment_id":60049142,"body_markdown":"What problem does is solve then, because it looks interesting. I have the same issue as the OP and all the tricks including above haven&#39;t worked.","body":"What problem does is solve then, because it looks interesting. I have the same issue as the OP and all the tricks including above haven&#39;t worked."}],"tags":[],"owner":{"account_id":65816,"reputation":4229,"user_id":193435,"display_name":"Shane"},"comment_count":1,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1418532652,"creation_date":1418532652,"answer_id":27466459,"question_id":3325387,"body_markdown":"There&#39;s now a Jackson module (for Jackson 2) specifically designed to handle Hibernate lazy initialization problems when serializing.\r\n\r\nhttps://github.com/FasterXML/jackson-datatype-hibernate\r\n\r\nJust add the dependency (note there are different dependencies for Hibernate 3 and Hibernate 4):\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-datatype-hibernate4&lt;/artifactId&gt;\r\n      &lt;version&gt;2.4.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand then register the module when intializing Jackson&#39;s ObjectMapper:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.registerModule(new Hibernate4Module());\r\n\r\nDocumentation currently isn&#39;t great. See the [Hibernate4Module code](https://github.com/FasterXML/jackson-datatype-hibernate/blob/master/hibernate4/src/main/java/com/fasterxml/jackson/datatype/hibernate4/Hibernate4Module.java#L15) for available options.","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>There's now a Jackson module (for Jackson 2) specifically designed to handle Hibernate lazy initialization problems when serializing.</p>\n\n<p><a href=\"https://github.com/FasterXML/jackson-datatype-hibernate\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-datatype-hibernate</a></p>\n\n<p>Just add the dependency (note there are different dependencies for Hibernate 3 and Hibernate 4):</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-datatype-hibernate4&lt;/artifactId&gt;\n  &lt;version&gt;2.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and then register the module when intializing Jackson's ObjectMapper:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.registerModule(new Hibernate4Module());\n</code></pre>\n\n<p>Documentation currently isn't great. See the <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate/blob/master/hibernate4/src/main/java/com/fasterxml/jackson/datatype/hibernate4/Hibernate4Module.java#L15\" rel=\"noreferrer\">Hibernate4Module code</a> for available options.</p>\n"},{"comments":[{"owner":{"account_id":4195407,"reputation":456,"user_id":3436941,"accept_rate":75,"display_name":"Khasan 24-7"},"score":6,"creation_date":1438951931,"post_id":30742761,"comment_id":51673946,"body_markdown":"I think `@JsonIgnore` ignores this attribute from being retrieved to client side. What if i need this attribute with its child(if it has child)?","body":"I think <code>@JsonIgnore</code> ignores this attribute from being retrieved to client side. What if i need this attribute with its child(if it has child)?"},{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":1,"creation_date":1593746812,"post_id":30742761,"comment_id":110893182,"body_markdown":"yeah, I have the same question. But Nobody is answering me.","body":"yeah, I have the same question. But Nobody is answering me."},{"owner":{"account_id":9471715,"reputation":151,"user_id":7042380,"display_name":"Antonio"},"score":0,"creation_date":1656403384,"post_id":30742761,"comment_id":128556940,"body_markdown":"@KumaresanPerumal try this https://stackoverflow.com/a/37394318/7042380","body":"@KumaresanPerumal try this <a href=\"https://stackoverflow.com/a/37394318/7042380\">stackoverflow.com/a/37394318/7042380</a>"}],"tags":[],"owner":{"account_id":6442886,"reputation":141,"user_id":4992319,"display_name":"Manjunath BR"},"comment_count":3,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1433883746,"creation_date":1433883746,"answer_id":30742761,"question_id":3325387,"body_markdown":"This worked perfectly fine for me. \r\nAdd the annotation @JsonIgnore on the child class where you mention the reference to the parent class. \r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;ID&quot;, nullable = false, updatable = false)\r\n    @JsonIgnore\r\n    private Member member;\r\n","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>This worked perfectly fine for me. \nAdd the annotation @JsonIgnore on the child class where you mention the reference to the parent class. </p>\n\n<pre><code>@ManyToOne\n@JoinColumn(name = \"ID\", nullable = false, updatable = false)\n@JsonIgnore\nprivate Member member;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2890572,"reputation":57,"user_id":2479456,"display_name":"Perkone"},"score":0,"creation_date":1654249412,"post_id":32121754,"comment_id":128051098,"body_markdown":"Can you show an example?","body":"Can you show an example?"}],"tags":[],"owner":{"account_id":3287359,"reputation":479,"user_id":2766491,"display_name":"Dahar Youssef"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1440082847,"creation_date":1440082847,"answer_id":32121754,"question_id":3325387,"body_markdown":"you can use DTO pattern \r\ncreate class TraineeDTO without any anotation hiberbnate and you can use jackson mapper to convert Trainee to TraineeDTO and bingo the error message disapeare :)","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>you can use DTO pattern \ncreate class TraineeDTO without any anotation hiberbnate and you can use jackson mapper to convert Trainee to TraineeDTO and bingo the error message disapeare :)</p>\n"},{"tags":[],"owner":{"account_id":123367,"reputation":1413,"user_id":317772,"accept_rate":70,"display_name":"OJVM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448918197,"creation_date":1448914850,"answer_id":34007286,"question_id":3325387,"body_markdown":"I had this problem, but I didn&#39;t want to use annotation in my entities, so I solved by creating a constructor for my class, this constructor must not have a reference back to the entities who references this entity. Let&#39;s say this scenario.\r\n\r\n    public class A{\r\n       private int id;\r\n       private String code;\r\n       private String name;\r\n       private List&lt;B&gt; bs;\r\n    }\r\n    \r\n    public class B{\r\n       private int id;\r\n       private String code;\r\n       private String name;\r\n       private A a;\r\n    }\r\n\r\nIf you try to send to the view the class `B` or `A` with `@ResponseBody` it may cause an infinite loop. You can write a constructor in your class and create a query with your `entityManager` like this.\r\n\r\n    &quot;select new A(id, code, name) from A&quot;\r\n\r\nThis is the class with the constructor.\r\n\r\n    public class A{\r\n       private int id;\r\n       private String code;\r\n       private String name;\r\n       private List&lt;B&gt; bs;\r\n\r\n       public A(){\r\n       }\r\n\r\n       public A(int id, String code, String name){\r\n          this.id = id;\r\n          this.code = code;\r\n          this.name = name;\r\n       }\r\n\r\n    }\r\n\r\nHowever, there are some constrictions about this solution, as you can see, in the constructor I did not make a reference to **List&lt;B&gt; bs** this is because Hibernate does not allow it, at least in **version 3.6.10.Final**, so when I need to show both entities in a view I do the following.\r\n\r\n    public A getAById(int id); //THE A id\r\n    \r\n    public List&lt;B&gt; getBsByAId(int idA); //the A id.\r\n\r\nThe other problem with this solution, is that if you add or remove a property you must update your constructor and all your queries.","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>I had this problem, but I didn't want to use annotation in my entities, so I solved by creating a constructor for my class, this constructor must not have a reference back to the entities who references this entity. Let's say this scenario.</p>\n\n<pre><code>public class A{\n   private int id;\n   private String code;\n   private String name;\n   private List&lt;B&gt; bs;\n}\n\npublic class B{\n   private int id;\n   private String code;\n   private String name;\n   private A a;\n}\n</code></pre>\n\n<p>If you try to send to the view the class <code>B</code> or <code>A</code> with <code>@ResponseBody</code> it may cause an infinite loop. You can write a constructor in your class and create a query with your <code>entityManager</code> like this.</p>\n\n<pre><code>\"select new A(id, code, name) from A\"\n</code></pre>\n\n<p>This is the class with the constructor.</p>\n\n<pre><code>public class A{\n   private int id;\n   private String code;\n   private String name;\n   private List&lt;B&gt; bs;\n\n   public A(){\n   }\n\n   public A(int id, String code, String name){\n      this.id = id;\n      this.code = code;\n      this.name = name;\n   }\n\n}\n</code></pre>\n\n<p>However, there are some constrictions about this solution, as you can see, in the constructor I did not make a reference to <strong>List bs</strong> this is because Hibernate does not allow it, at least in <strong>version 3.6.10.Final</strong>, so when I need to show both entities in a view I do the following.</p>\n\n<pre><code>public A getAById(int id); //THE A id\n\npublic List&lt;B&gt; getBsByAId(int idA); //the A id.\n</code></pre>\n\n<p>The other problem with this solution, is that if you add or remove a property you must update your constructor and all your queries.</p>\n"},{"tags":[],"owner":{"account_id":350071,"reputation":21,"user_id":685731,"display_name":"Morik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461185668,"creation_date":1461185668,"answer_id":36754991,"question_id":3325387,"body_markdown":"In case you are using Spring Data Rest, issue can be resolved by creating  Repositories for every Entity involved in cyclical references.","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>In case you are using Spring Data Rest, issue can be resolved by creating  Repositories for every Entity involved in cyclical references.</p>\n"},{"tags":[],"owner":{"account_id":9111952,"reputation":161,"user_id":6780354,"display_name":"Sveteek"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1508434600,"creation_date":1472730093,"answer_id":39270618,"question_id":3325387,"body_markdown":"Be sure you use **com.fasterxml.jackson** everywhere. I spent much time to find it out.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;properties&gt;\r\n      &lt;fasterxml.jackson.version&gt;2.9.2&lt;/fasterxml.jackson.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;version&gt;${fasterxml.jackson.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;${fasterxml.jackson.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen use `@JsonManagedReference` and `@JsonBackReference`.\r\n\r\nFinally, you can serialize your model to JSON:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    String json = mapper.writeValueAsString(model);\r\n","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>Be sure you use <strong>com.fasterxml.jackson</strong> everywhere. I spent much time to find it out.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n  &lt;fasterxml.jackson.version&gt;2.9.2&lt;/fasterxml.jackson.version&gt;\n&lt;/properties&gt;\n\n&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;version&gt;${fasterxml.jackson.version}&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;${fasterxml.jackson.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then use <code>@JsonManagedReference</code> and <code>@JsonBackReference</code>.</p>\n\n<p>Finally, you can serialize your model to JSON:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.ObjectMapper;\n\nObjectMapper mapper = new ObjectMapper();\nString json = mapper.writeValueAsString(model);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1565115924,"post_id":39573255,"comment_id":101248248,"body_markdown":"@tero - With this approach as well we dont get data associated with the entity.","body":"@tero - With this approach as well we dont get data associated with the entity."},{"owner":{"account_id":8702347,"reputation":1580,"user_id":6511727,"accept_rate":100,"display_name":"tero17"},"score":0,"creation_date":1565361471,"post_id":39573255,"comment_id":101342665,"body_markdown":"@PAA HEY PAA i think that is associated whith the entity! why you say that ?","body":"@PAA HEY PAA i think that is associated whith the entity! why you say that ?"},{"owner":{"account_id":2437651,"reputation":1465,"user_id":2127121,"accept_rate":88,"display_name":"Villat"},"score":1,"creation_date":1569197917,"post_id":39573255,"comment_id":102506521,"body_markdown":"@tero17 how do you manage the infinite recursion when you have more than 2 classes? For instance: Class A -&gt; Class B -&gt; Class C -&gt; Class A. I tried with JsonIgnoreProperties without luck","body":"@tero17 how do you manage the infinite recursion when you have more than 2 classes? For instance: Class A -&gt; Class B -&gt; Class C -&gt; Class A. I tried with JsonIgnoreProperties without luck"},{"owner":{"account_id":8702347,"reputation":1580,"user_id":6511727,"accept_rate":100,"display_name":"tero17"},"score":0,"creation_date":1569832543,"post_id":39573255,"comment_id":102710047,"body_markdown":"@Villat this is another problem to solve, i suggest to open a new demand for that.","body":"@Villat this is another problem to solve, i suggest to open a new demand for that."},{"owner":{"account_id":8164177,"reputation":858,"user_id":6147174,"accept_rate":55,"display_name":"Wecherowski"},"score":0,"creation_date":1590783993,"post_id":39573255,"comment_id":109822829,"body_markdown":"+1 for the code sample, as a Jackson newbie the use of @JsonIgnoreProperties wasn&#39;t entirely clear by reading the JavaDoc","body":"+1 for the code sample, as a Jackson newbie the use of @JsonIgnoreProperties wasn&#39;t entirely clear by reading the JavaDoc"}],"tags":[],"owner":{"account_id":8702347,"reputation":1580,"user_id":6511727,"accept_rate":100,"display_name":"tero17"},"comment_count":5,"down_vote_count":0,"up_vote_count":134,"is_accepted":false,"score":134,"last_activity_date":1509741378,"creation_date":1474288269,"answer_id":39573255,"question_id":3325387,"body_markdown":"The new annotation @JsonIgnoreProperties resolves many of the issues with the other options.     \r\n\r\n\r\n    @Entity\r\n\r\n    public class Material{\r\n       ...    \r\n       @JsonIgnoreProperties(&quot;costMaterials&quot;)\r\n       private List&lt;Supplier&gt; costSuppliers = new ArrayList&lt;&gt;();\r\n       ...\r\n    }\r\n    \r\n    @Entity\r\n    public class Supplier{\r\n       ...\r\n       @JsonIgnoreProperties(&quot;costSuppliers&quot;)\r\n       private List&lt;Material&gt; costMaterials = new ArrayList&lt;&gt;();\r\n       ....\r\n    }\r\n\r\n\r\n\r\n\r\nCheck it out here. It works just like in the documentation:  \r\nhttp://springquay.blogspot.com/2016/01/new-approach-to-solve-json-recursive.html","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>The new annotation @JsonIgnoreProperties resolves many of the issues with the other options.     </p>\n\n<pre><code>@Entity\n\npublic class Material{\n   ...    \n   @JsonIgnoreProperties(\"costMaterials\")\n   private List&lt;Supplier&gt; costSuppliers = new ArrayList&lt;&gt;();\n   ...\n}\n\n@Entity\npublic class Supplier{\n   ...\n   @JsonIgnoreProperties(\"costSuppliers\")\n   private List&lt;Material&gt; costMaterials = new ArrayList&lt;&gt;();\n   ....\n}\n</code></pre>\n\n<p>Check it out here. It works just like in the documentation:<br>\n<a href=\"http://springquay.blogspot.com/2016/01/new-approach-to-solve-json-recursive.html\" rel=\"noreferrer\">http://springquay.blogspot.com/2016/01/new-approach-to-solve-json-recursive.html</a></p>\n"},{"comments":[{"owner":{"account_id":2797853,"reputation":433,"user_id":2406724,"display_name":"Hugo Ba&#233;s"},"score":1,"creation_date":1500562770,"post_id":45177667,"comment_id":77403122,"body_markdown":"This is a nice article explaining many alternative solutions to solve recursions: http://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion","body":"This is a nice article explaining many alternative solutions to solve recursions: <a href=\"http://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"}],"tags":[],"owner":{"account_id":2686270,"reputation":915,"user_id":2320630,"display_name":"fabioresner"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1508434896,"creation_date":1500414463,"answer_id":45177667,"question_id":3325387,"body_markdown":"For me the best solution is to use `@JsonView` and create specific filters for each scenario. You could also use `@JsonManagedReference` and `@JsonBackReference`, however it is a hardcoded solution to only one situation, where the owner always references the owning side, and never the opposite. If you have another serialization scenario where you need to re-annotate the attribute differently, you will not be able to.\r\n\r\n&lt;h3&gt;Problem&lt;/h3&gt;\r\nLets use two classes, `Company` and `Employee` where you have a cyclic dependency between them:\r\n\r\n    public class Company {\r\n    \r\n    \tprivate Employee employee;\r\n    \t\r\n    \tpublic Company(Employee employee) {\r\n    \t\tthis.employee = employee;\r\n    \t}\r\n    \r\n    \tpublic Employee getEmployee() {\r\n    \t\treturn employee;\r\n    \t}\r\n    }\r\n\r\n    public class Employee {\r\n    \r\n    \tprivate Company company;\r\n    \r\n    \tpublic Company getCompany() {\r\n    \t\treturn company;\r\n    \t}\r\n    \r\n    \tpublic void setCompany(Company company) {\r\n    \t\tthis.company = company;\r\n    \t}\r\n    }\r\n\r\nAnd the test class that tries to serialize using `ObjectMapper` (**Spring Boot**):\r\n\r\n    @SpringBootTest\r\n    @RunWith(SpringRunner.class)\r\n    @Transactional\r\n    public class CompanyTest {\r\n    \r\n    \t@Autowired\r\n    \tpublic ObjectMapper mapper;\r\n    \t\r\n    \t@Test\r\n    \tpublic void shouldSaveCompany() throws JsonProcessingException {\r\n    \t\tEmployee employee = new Employee();\r\n    \t\tCompany company = new Company(employee);\r\n    \t\temployee.setCompany(company);\r\n    \t\t\r\n    \t\tString jsonCompany = mapper.writeValueAsString(company);\r\n            System.out.println(jsonCompany);\r\n            assertTrue(true);\r\n    \t}\r\n    }\r\n\r\nIf you run this code, you&#39;ll get the:\r\n\r\n    org.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError)\r\n\r\n&lt;h3&gt;Solution Using `@JsonView`&lt;/h3&gt;\r\n\r\n`@JsonView` enables you to use filters and choose what fields should be included while serializing the objects. A filter is just a class reference used as a identifier. So let&#39;s first create the filters:\r\n\r\n    public class Filter {\r\n    \r\n    \tpublic static interface EmployeeData {};\r\n    \r\n    \tpublic static interface CompanyData extends EmployeeData {};\r\n    \t\r\n    } \r\n\r\nRemember, the filters are dummy classes, just used for specifying the fields with the `@JsonView` annotation, so you can create as many as you want and need. Let&#39;s see it in action, but first we need to annotate our `Company` class:\r\n\r\n    public class Company {\r\n    \r\n    \t@JsonView(Filter.CompanyData.class)\r\n    \tprivate Employee employee;\r\n    \t\r\n    \tpublic Company(Employee employee) {\r\n    \t\tthis.employee = employee;\r\n    \t}\r\n    \r\n    \tpublic Employee getEmployee() {\r\n    \t\treturn employee;\r\n    \t}\r\n    }\r\n\r\nand change the Test in order for the serializer to use the View:\r\n\r\n    @SpringBootTest\r\n    @RunWith(SpringRunner.class)\r\n    @Transactional\r\n    public class CompanyTest {\r\n    \r\n    \t@Autowired\r\n    \tpublic ObjectMapper mapper;\r\n    \t\r\n    \t@Test\r\n    \tpublic void shouldSaveCompany() throws JsonProcessingException {\r\n    \t\tEmployee employee = new Employee();\r\n    \t\tCompany company = new Company(employee);\r\n    \t\temployee.setCompany(company);\r\n    \t\t\r\n    \t\tObjectWriter writter = mapper.writerWithView(Filter.CompanyData.class);\r\n    \t\tString jsonCompany = writter.writeValueAsString(company);\r\n    \t\t\r\n    \t\tSystem.out.println(jsonCompany);\r\n    \t\tassertTrue(true);\r\n    \t}\r\n    }\r\n\r\nNow if you run this code, the Infinite Recursion problem is solved, because you have explicitly said that you just want to serialize the attributes that were annotated with `@JsonView(Filter.CompanyData.class)`.\r\n\r\nWhen it reaches the back reference for company in the `Employee`, it checks that it&#39;s not annotated and ignore the serialization. You also have a powerful and flexible solution to choose which data you want to send through your REST APIs.\r\n\r\nWith Spring you can annotate your REST Controllers methods with the desired `@JsonView` filter and the serialization is applied transparently to the returning object.\r\n\r\nHere are the imports used in case you need to check:\r\n\r\n    import static org.junit.Assert.assertTrue;\r\n\r\n    import javax.transaction.Transactional;\r\n    \r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    \r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.ObjectWriter;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonView;","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>For me the best solution is to use <code>@JsonView</code> and create specific filters for each scenario. You could also use <code>@JsonManagedReference</code> and <code>@JsonBackReference</code>, however it is a hardcoded solution to only one situation, where the owner always references the owning side, and never the opposite. If you have another serialization scenario where you need to re-annotate the attribute differently, you will not be able to.</p>\n\n<h3>Problem</h3>\n\n<p>Lets use two classes, <code>Company</code> and <code>Employee</code> where you have a cyclic dependency between them:</p>\n\n<pre><code>public class Company {\n\n    private Employee employee;\n\n    public Company(Employee employee) {\n        this.employee = employee;\n    }\n\n    public Employee getEmployee() {\n        return employee;\n    }\n}\n\npublic class Employee {\n\n    private Company company;\n\n    public Company getCompany() {\n        return company;\n    }\n\n    public void setCompany(Company company) {\n        this.company = company;\n    }\n}\n</code></pre>\n\n<p>And the test class that tries to serialize using <code>ObjectMapper</code> (<strong>Spring Boot</strong>):</p>\n\n<pre><code>@SpringBootTest\n@RunWith(SpringRunner.class)\n@Transactional\npublic class CompanyTest {\n\n    @Autowired\n    public ObjectMapper mapper;\n\n    @Test\n    public void shouldSaveCompany() throws JsonProcessingException {\n        Employee employee = new Employee();\n        Company company = new Company(employee);\n        employee.setCompany(company);\n\n        String jsonCompany = mapper.writeValueAsString(company);\n        System.out.println(jsonCompany);\n        assertTrue(true);\n    }\n}\n</code></pre>\n\n<p>If you run this code, you'll get the:</p>\n\n<pre><code>org.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError)\n</code></pre>\n\n<h3>Solution Using `@JsonView`</h3>\n\n<p><code>@JsonView</code> enables you to use filters and choose what fields should be included while serializing the objects. A filter is just a class reference used as a identifier. So let's first create the filters:</p>\n\n<pre><code>public class Filter {\n\n    public static interface EmployeeData {};\n\n    public static interface CompanyData extends EmployeeData {};\n\n} \n</code></pre>\n\n<p>Remember, the filters are dummy classes, just used for specifying the fields with the <code>@JsonView</code> annotation, so you can create as many as you want and need. Let's see it in action, but first we need to annotate our <code>Company</code> class:</p>\n\n<pre><code>public class Company {\n\n    @JsonView(Filter.CompanyData.class)\n    private Employee employee;\n\n    public Company(Employee employee) {\n        this.employee = employee;\n    }\n\n    public Employee getEmployee() {\n        return employee;\n    }\n}\n</code></pre>\n\n<p>and change the Test in order for the serializer to use the View:</p>\n\n<pre><code>@SpringBootTest\n@RunWith(SpringRunner.class)\n@Transactional\npublic class CompanyTest {\n\n    @Autowired\n    public ObjectMapper mapper;\n\n    @Test\n    public void shouldSaveCompany() throws JsonProcessingException {\n        Employee employee = new Employee();\n        Company company = new Company(employee);\n        employee.setCompany(company);\n\n        ObjectWriter writter = mapper.writerWithView(Filter.CompanyData.class);\n        String jsonCompany = writter.writeValueAsString(company);\n\n        System.out.println(jsonCompany);\n        assertTrue(true);\n    }\n}\n</code></pre>\n\n<p>Now if you run this code, the Infinite Recursion problem is solved, because you have explicitly said that you just want to serialize the attributes that were annotated with <code>@JsonView(Filter.CompanyData.class)</code>.</p>\n\n<p>When it reaches the back reference for company in the <code>Employee</code>, it checks that it's not annotated and ignore the serialization. You also have a powerful and flexible solution to choose which data you want to send through your REST APIs.</p>\n\n<p>With Spring you can annotate your REST Controllers methods with the desired <code>@JsonView</code> filter and the serialization is applied transparently to the returning object.</p>\n\n<p>Here are the imports used in case you need to check:</p>\n\n<pre><code>import static org.junit.Assert.assertTrue;\n\nimport javax.transaction.Transactional;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.ObjectWriter;\n\nimport com.fasterxml.jackson.annotation.JsonView;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3268751,"reputation":1481,"user_id":2752615,"accept_rate":67,"display_name":"Arif Acar"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1521038390,"creation_date":1521038390,"answer_id":49280585,"question_id":3325387,"body_markdown":"I also met the same problem. I used `@JsonIdentityInfo`&#39;s `ObjectIdGenerators.PropertyGenerator.class` generator type.\r\n\r\nThat&#39;s my solution:\r\n\r\n    @Entity\r\n    @Table(name = &quot;ta_trainee&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\r\n    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n    public class Trainee extends BusinessObject {\r\n    ...","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>I also met the same problem. I used <code>@JsonIdentityInfo</code>'s <code>ObjectIdGenerators.PropertyGenerator.class</code> generator type.</p>\n\n<p>That's my solution:</p>\n\n<pre><code>@Entity\n@Table(name = \"ta_trainee\", uniqueConstraints = {@UniqueConstraint(columnNames = {\"id\"})})\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = \"id\")\npublic class Trainee extends BusinessObject {\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":1,"creation_date":1565114939,"post_id":49515589,"comment_id":101247866,"body_markdown":"In my case, its not working. Could you please take a look: https://github.com/JavaHelper/issue-jackson-boot ?","body":"In my case, its not working. Could you please take a look: <a href=\"https://github.com/JavaHelper/issue-jackson-boot\" rel=\"nofollow noreferrer\">github.com/JavaHelper/issue-jackson-boot</a> ?"}],"tags":[],"owner":{"account_id":2686476,"reputation":69,"user_id":2320785,"display_name":"RAJ KASHWAN"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1522160939,"creation_date":1522160939,"answer_id":49515589,"question_id":3325387,"body_markdown":"You can use **@JsonIgnore**, but this will ignore the json data which can be accessed because of the Foreign Key relationship. Therefore if you reqiure the foreign key data (most of the time we require), then **@JsonIgnore** will not help you. In such situation please follow the below solution.\r\n\r\nyou are getting Infinite recursion, because of the **BodyStat** class again referring the **Trainee** object \r\n\r\n**BodyStat**\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;trainee_fk&quot;)\r\n    private Trainee trainee;\r\n\r\n**Trainee**\r\n\r\n    @OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    @Column(nullable = true)\r\n    private Set&lt;BodyStat&gt; bodyStats;\r\nTherefore, you have to comment/omit the above part in  **Trainee**\r\n","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>You can use <strong>@JsonIgnore</strong>, but this will ignore the json data which can be accessed because of the Foreign Key relationship. Therefore if you reqiure the foreign key data (most of the time we require), then <strong>@JsonIgnore</strong> will not help you. In such situation please follow the below solution.</p>\n\n<p>you are getting Infinite recursion, because of the <strong>BodyStat</strong> class again referring the <strong>Trainee</strong> object </p>\n\n<p><strong>BodyStat</strong></p>\n\n<pre><code>@ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n@JoinColumn(name=\"trainee_fk\")\nprivate Trainee trainee;\n</code></pre>\n\n<p><strong>Trainee</strong></p>\n\n<pre><code>@OneToMany(mappedBy = \"trainee\", fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n@Column(nullable = true)\nprivate Set&lt;BodyStat&gt; bodyStats;\n</code></pre>\n\n<p>Therefore, you have to comment/omit the above part in  <strong>Trainee</strong></p>\n"},{"comments":[{"owner":{"account_id":3531078,"reputation":2299,"user_id":2950614,"display_name":"ifelse.codes"},"score":0,"creation_date":1541665261,"post_id":50125705,"comment_id":93295708,"body_markdown":"Use this confidently as I have seen Jhipster uses this in its generated code","body":"Use this confidently as I have seen Jhipster uses this in its generated code"},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1565116314,"post_id":50125705,"comment_id":101248414,"body_markdown":"Thanks for the answer. However I found that `@JsonManagedReference`, `@JsonBackReference` does not gives you the data associated with `@OneToMany` and `@ManyToOne` scenario, also when using `@JsonIgnoreProperties` does skip associated entity data. How to solve this?","body":"Thanks for the answer. However I found that <code>@JsonManagedReference</code>, <code>@JsonBackReference</code> does not gives you the data associated with <code>@OneToMany</code> and <code>@ManyToOne</code> scenario, also when using <code>@JsonIgnoreProperties</code> does skip associated entity data. How to solve this?"}],"tags":[],"owner":{"account_id":3531078,"reputation":2299,"user_id":2950614,"display_name":"ifelse.codes"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1525221938,"creation_date":1525221938,"answer_id":50125705,"question_id":3325387,"body_markdown":"***@JsonIgnoreProperties*** is the answer.\r\n\r\nUse something like this :: \r\n\r\n    @OneToMany(mappedBy = &quot;course&quot;,fetch=FetchType.EAGER)\r\n    @JsonIgnoreProperties(&quot;course&quot;)\r\n    private Set&lt;Student&gt; students;","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p><strong><em>@JsonIgnoreProperties</em></strong> is the answer.</p>\n\n<p>Use something like this :: </p>\n\n<pre><code>@OneToMany(mappedBy = \"course\",fetch=FetchType.EAGER)\n@JsonIgnoreProperties(\"course\")\nprivate Set&lt;Student&gt; students;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8899884,"reputation":180,"user_id":6643647,"display_name":"Prabu M"},"score":0,"creation_date":1527484717,"post_id":50559524,"comment_id":88129578,"body_markdown":"I have used hibernate mapping in spring boot application","body":"I have used hibernate mapping in spring boot application"},{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1565116288,"post_id":50559524,"comment_id":101248404,"body_markdown":"Hi Author,\nThanks for the nice tutorials and great posts. However I found that `@JsonManagedReference`, `@JsonBackReference` does not gives you the data associated with `@OneToMany` and `@ManyToOne` scenario, also when using `@JsonIgnoreProperties` does skip associated entity data. How to solve this?","body":"Hi Author, Thanks for the nice tutorials and great posts. However I found that <code>@JsonManagedReference</code>, <code>@JsonBackReference</code> does not gives you the data associated with <code>@OneToMany</code> and <code>@ManyToOne</code> scenario, also when using <code>@JsonIgnoreProperties</code> does skip associated entity data. How to solve this?"}],"tags":[],"owner":{"account_id":8899884,"reputation":180,"user_id":6643647,"display_name":"Prabu M"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1527484796,"creation_date":1527484597,"answer_id":50559524,"question_id":3325387,"body_markdown":"Working fine for me\r\n[Resolve Json Infinite Recursion problem when working with Jackson][1]\r\n\r\n\r\n  [1]: http://javasampleapproach.com/json/resolve-json-infinite-recursion-problems-working-jackson\r\n\r\nThis is what I have done in oneToMany and ManyToOne Mapping\r\n\r\n\r\n    @ManyToOne\r\n\t@JoinColumn(name=&quot;Key&quot;)\r\n\t@JsonBackReference\r\n\tprivate LgcyIsp Key;\r\n\r\n\r\n    @OneToMany(mappedBy=&quot;LgcyIsp &quot;)\r\n\t@JsonManagedReference\r\n\tprivate List&lt;Safety&gt; safety;","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>Working fine for me\n<a href=\"http://javasampleapproach.com/json/resolve-json-infinite-recursion-problems-working-jackson\" rel=\"noreferrer\">Resolve Json Infinite Recursion problem when working with Jackson</a></p>\n\n<p>This is what I have done in oneToMany and ManyToOne Mapping</p>\n\n<pre><code>@ManyToOne\n@JoinColumn(name=\"Key\")\n@JsonBackReference\nprivate LgcyIsp Key;\n\n\n@OneToMany(mappedBy=\"LgcyIsp \")\n@JsonManagedReference\nprivate List&lt;Safety&gt; safety;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1575519538,"post_id":55349057,"comment_id":104596081,"body_markdown":"If I put @ jsonIgnore annotation in the child. I could not get parent object from child .when I try to take the child. why the parent object is not coming, it is ignored by @ jsonignore. tell me the way to get from child to parent and parent to child.","body":"If I put @ jsonIgnore annotation in the child. I could not get parent object from child .when I try to take the child. why the parent object is not coming, it is ignored by @ jsonignore. tell me the way to get from child to parent and parent to child."}],"tags":[],"owner":{"account_id":1750411,"reputation":189,"user_id":1599616,"display_name":"Scott Langeberg"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553567756,"creation_date":1553567756,"answer_id":55349057,"question_id":3325387,"body_markdown":"If you cannot ignore the property, try modifying the visibility of the field. In our case, we had old code still submitting entities with the relationship, so in my case, this was the fix: \r\n```\r\n    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n    private Trainee trainee;\r\n```","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>If you cannot ignore the property, try modifying the visibility of the field. In our case, we had old code still submitting entities with the relationship, so in my case, this was the fix: </p>\n\n<pre><code>    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n    private Trainee trainee;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1575519533,"post_id":57474972,"comment_id":104596076,"body_markdown":"If I put @ jsonIgnore annotation in the child. I could not get parent object from child .when I try to take the child. why the parent object is not coming, it is ignored by @ jsonignore. tell me the way to get from child to parent and parent to child.","body":"If I put @ jsonIgnore annotation in the child. I could not get parent object from child .when I try to take the child. why the parent object is not coming, it is ignored by @ jsonignore. tell me the way to get from child to parent and parent to child."},{"owner":{"account_id":15832854,"reputation":707,"user_id":11423630,"display_name":"Shubham"},"score":0,"creation_date":1575526532,"post_id":57474972,"comment_id":104598060,"body_markdown":"No need of Using  @JsonIgnore just use the above annotations and For getting  objets of parent and child By using Getters and setters. and Jsonignore is also doing the same but it will create infinite recursion. If  You share your code then i can check why You are not getting objects. Because for me both are coming.","body":"No need of Using  @JsonIgnore just use the above annotations and For getting  objets of parent and child By using Getters and setters. and Jsonignore is also doing the same but it will create infinite recursion. If  You share your code then i can check why You are not getting objects. Because for me both are coming."},{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1575534668,"post_id":57474972,"comment_id":104601197,"body_markdown":"I meant to say. when taking a parent. The parent should come with child object. when taking child object. The child should come with a parent. It is not working in this scenario. could you please help me?","body":"I meant to say. when taking a parent. The parent should come with child object. when taking child object. The child should come with a parent. It is not working in this scenario. could you please help me?"}],"tags":[],"owner":{"account_id":15832854,"reputation":707,"user_id":11423630,"display_name":"Shubham"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1565688957,"creation_date":1565688957,"answer_id":57474972,"question_id":3325387,"body_markdown":"You Should use     @JsonBackReference with @ManyToOne entity and @JsonManagedReference with @onetomany containing entity classes.\r\n\r\n    @OneToMany(\r\n    \t        mappedBy = &quot;queue_group&quot;,fetch = FetchType.LAZY,\r\n    \t        cascade = CascadeType.ALL\r\n    \t    )\r\n    \t@JsonManagedReference\r\n    \tprivate Set&lt;Queue&gt; queues;\r\n\r\n \r\n\r\n    @ManyToOne(cascade=CascadeType.ALL)\r\n    \t    @JoinColumn(name = &quot;qid&quot;)\r\n    \t   // @JsonIgnore\r\n    \t    @JsonBackReference\r\n    \t    private Queue_group queue_group;\r\n\r\n\r\n\t   \r\n\t","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>You Should use     @JsonBackReference with @ManyToOne entity and @JsonManagedReference with @onetomany containing entity classes.</p>\n\n<pre><code>@OneToMany(\n            mappedBy = \"queue_group\",fetch = FetchType.LAZY,\n            cascade = CascadeType.ALL\n        )\n    @JsonManagedReference\n    private Set&lt;Queue&gt; queues;\n\n\n\n@ManyToOne(cascade=CascadeType.ALL)\n        @JoinColumn(name = \"qid\")\n       // @JsonIgnore\n        @JsonBackReference\n        private Queue_group queue_group;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22929,"reputation":1492,"user_id":57033,"accept_rate":80,"display_name":"hello_earth"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589295125,"creation_date":1589295125,"answer_id":61754882,"question_id":3325387,"body_markdown":"I&#39;m a late comer and it&#39;s such a long thread already. But I spent a couple of hours trying to figure this out too, and would like to give my case as another example. \r\n\r\nI tried both JsonIgnore, JsonIgnoreProperties and BackReference solutions, but strangely enough it was like they weren&#39;t picked up. \r\n\r\nI used Lombok and thought that maybe it interferes, since it creates constructors and overrides toString (saw toString in stackoverflowerror stack). \r\n\r\nFinally it wasn&#39;t Lombok&#39;s fault - I used automatic NetBeans generation of JPA entities from database tables, without giving it much thought - well, and one of the annotations that were added to the generated classes was @XmlRootElement. Once I removed it everything started working. Oh well.","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>I'm a late comer and it's such a long thread already. But I spent a couple of hours trying to figure this out too, and would like to give my case as another example. </p>\n\n<p>I tried both JsonIgnore, JsonIgnoreProperties and BackReference solutions, but strangely enough it was like they weren't picked up. </p>\n\n<p>I used Lombok and thought that maybe it interferes, since it creates constructors and overrides toString (saw toString in stackoverflowerror stack). </p>\n\n<p>Finally it wasn't Lombok's fault - I used automatic NetBeans generation of JPA entities from database tables, without giving it much thought - well, and one of the annotations that were added to the generated classes was @XmlRootElement. Once I removed it everything started working. Oh well.</p>\n"},{"tags":[],"owner":{"account_id":160026,"reputation":8395,"user_id":379779,"accept_rate":57,"display_name":"zawhtut"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591614006,"creation_date":1591614006,"answer_id":62260526,"question_id":3325387,"body_markdown":"The point is to place the **@JsonIgnore** in the setter method as follow.  in my case.\r\n\r\n**Township.java**\r\n\r\n\r\n    @Access(AccessType.PROPERTY)\r\n    @OneToMany(fetch = FetchType.LAZY)\r\n    @JoinColumn(name=&quot;townshipId&quot;, nullable=false ,insertable=false, updatable=false)\r\n    public List&lt;Village&gt; getVillages() {\r\n    \treturn villages;\r\n    }\r\n    \r\n    @JsonIgnore\r\n    @Access(AccessType.PROPERTY)\r\n    public void setVillages(List&lt;Village&gt; villages) {\r\n    \tthis.villages = villages;\r\n    }\r\n\r\n**Village.java**\r\n\r\n\t@ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;townshipId&quot;, insertable=false, updatable=false)\r\n\tTownship township;\r\n\t\r\n\t@Column(name = &quot;townshipId&quot;, nullable=false)\r\n\tLong townshipId;","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>The point is to place the <strong>@JsonIgnore</strong> in the setter method as follow.  in my case.</p>\n\n<p><strong>Township.java</strong></p>\n\n<pre><code>@Access(AccessType.PROPERTY)\n@OneToMany(fetch = FetchType.LAZY)\n@JoinColumn(name=\"townshipId\", nullable=false ,insertable=false, updatable=false)\npublic List&lt;Village&gt; getVillages() {\n    return villages;\n}\n\n@JsonIgnore\n@Access(AccessType.PROPERTY)\npublic void setVillages(List&lt;Village&gt; villages) {\n    this.villages = villages;\n}\n</code></pre>\n\n<p><strong>Village.java</strong></p>\n\n<pre><code>@ManyToOne(fetch = FetchType.EAGER)\n@JoinColumn(name = \"townshipId\", insertable=false, updatable=false)\nTownship township;\n\n@Column(name = \"townshipId\", nullable=false)\nLong townshipId;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5577204,"reputation":310,"user_id":4420271,"accept_rate":78,"display_name":"philburns"},"score":0,"creation_date":1606825804,"post_id":62955863,"comment_id":115073951,"body_markdown":"What is the dependency to be used for `@ToString`?","body":"What is the dependency to be used for <code>@ToString</code>?"}],"tags":[],"owner":{"account_id":8585267,"reputation":66,"user_id":6431622,"display_name":"Marco Aur&#233;lio Alves Puton"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1594995314,"creation_date":1594995314,"answer_id":62955863,"question_id":3325387,"body_markdown":"For some reason, in my case, it wasn&#39;t working with Set. I had to change it to List and use @JsonIgnore and @ToString.Exclude to get it working.\r\n\r\nReplace Set with List:\r\n\r\n    //before\r\n    @OneToMany(mappedBy=&quot;client&quot;)\r\n    private Set&lt;address&gt; addressess;\r\n    \r\n    //after\r\n    @OneToMany(mappedBy=&quot;client&quot;)\r\n    private List&lt;address&gt; addressess;\r\n\r\nAnd add @JsonIgnore and @ToString.Exclude annotations:\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;client_id&quot;, nullable = false)\r\n    @JsonIgnore\r\n    @ToString.Exclude\r\n    private Client client;","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>For some reason, in my case, it wasn't working with Set. I had to change it to List and use @JsonIgnore and @ToString.Exclude to get it working.</p>\n<p>Replace Set with List:</p>\n<pre><code>//before\n@OneToMany(mappedBy=&quot;client&quot;)\nprivate Set&lt;address&gt; addressess;\n\n//after\n@OneToMany(mappedBy=&quot;client&quot;)\nprivate List&lt;address&gt; addressess;\n</code></pre>\n<p>And add @JsonIgnore and @ToString.Exclude annotations:</p>\n<pre><code>@ManyToOne\n@JoinColumn(name=&quot;client_id&quot;, nullable = false)\n@JsonIgnore\n@ToString.Exclude\nprivate Client client;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15205356,"reputation":126,"user_id":10971996,"display_name":"kasee nadh reddy bojja"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595471041,"creation_date":1595471041,"answer_id":63045903,"question_id":3325387,"body_markdown":"I have the same problem after doing more analysis i came to know that, we can get mapped entity also by just keeping **@JsonBackReference** at OneToMany annotation\r\n\r\n    @Entity\r\n    @Table(name = &quot;ta_trainee&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\r\n    public class Trainee extends BusinessObject {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.TABLE)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Integer id;\r\n\r\n    @Column(name = &quot;name&quot;, nullable = true)\r\n    private String name;\r\n\r\n    @Column(name = &quot;surname&quot;, nullable = true)\r\n    private String surname;\r\n\r\n    @OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    @Column(nullable = true)\r\n    @JsonBackReference\r\n    private Set&lt;BodyStat&gt; bodyStats;","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>I have the same problem after doing more analysis i came to know that, we can get mapped entity also by just keeping <strong>@JsonBackReference</strong> at OneToMany annotation</p>\n<pre><code>@Entity\n@Table(name = &quot;ta_trainee&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\npublic class Trainee extends BusinessObject {\n\n@Id\n@GeneratedValue(strategy = GenerationType.TABLE)\n@Column(name = &quot;id&quot;, nullable = false)\nprivate Integer id;\n\n@Column(name = &quot;name&quot;, nullable = true)\nprivate String name;\n\n@Column(name = &quot;surname&quot;, nullable = true)\nprivate String surname;\n\n@OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n@Column(nullable = true)\n@JsonBackReference\nprivate Set&lt;BodyStat&gt; bodyStats;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2319952,"reputation":405,"user_id":2035999,"display_name":"Leandro Ferreira"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1597420973,"creation_date":1597420973,"answer_id":63416266,"question_id":3325387,"body_markdown":"**VERY IMPORTANT:** If you are using LOMBOK, make shure to exclude attributes of collections like Set, List, etc...\r\n\r\nLike this:\r\n\r\n    @EqualsAndHashCode(exclude = {&quot;attributeOfTypeList&quot;, &quot;attributeOfTypeSet&quot;})\r\n\r\n","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p><strong>VERY IMPORTANT:</strong> If you are using LOMBOK, make shure to exclude attributes of collections like Set, List, etc...</p>\n<p>Like this:</p>\n<pre><code>@EqualsAndHashCode(exclude = {&quot;attributeOfTypeList&quot;, &quot;attributeOfTypeSet&quot;})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2043059,"reputation":1,"user_id":1823788,"display_name":"Bharath Brahma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606946155,"creation_date":1606874933,"answer_id":65101230,"question_id":3325387,"body_markdown":"I have faced same issue, add jsonbackref and jsonmanagedref and please make sure @override equals and hashCode methods , this definitely fix this issue.","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>I have faced same issue, add jsonbackref and jsonmanagedref and please make sure @override equals and hashCode methods , this definitely fix this issue.</p>\n"},{"tags":[],"owner":{"account_id":13069368,"reputation":386,"user_id":9443465,"display_name":"Sachithra Dilshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1614192919,"creation_date":1614192000,"answer_id":66356937,"question_id":3325387,"body_markdown":"If you use `@JsonManagedReference`, `@JsonBackReference` or `@JsonIgnore` annotation it ignore some fields and solve Infinite Recursion with Jackson JSON.\r\n\r\nBut if you use `@JsonIdentityInfo` which also avoid the Infinite Recursion and you can get all the fields values, so I suggest that you use `@JsonIdentityInfo` annotation.\r\n\r\n```\r\n@JsonIdentityInfo(generator= ObjectIdGenerators.UUIDGenerator.class, property=&quot;@id&quot;)\r\n```\r\n\r\nRefer this article https://www.toptal.com/javascript/bidirectional-relationship-in-json to get good understanding about `@JsonIdentityInfo` annotation.\r\n    \r\n\r\n\r\n","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>If you use <code>@JsonManagedReference</code>, <code>@JsonBackReference</code> or <code>@JsonIgnore</code> annotation it ignore some fields and solve Infinite Recursion with Jackson JSON.</p>\n<p>But if you use <code>@JsonIdentityInfo</code> which also avoid the Infinite Recursion and you can get all the fields values, so I suggest that you use <code>@JsonIdentityInfo</code> annotation.</p>\n<pre><code>@JsonIdentityInfo(generator= ObjectIdGenerators.UUIDGenerator.class, property=&quot;@id&quot;)\n</code></pre>\n<p>Refer this article <a href=\"https://www.toptal.com/javascript/bidirectional-relationship-in-json\" rel=\"nofollow noreferrer\">https://www.toptal.com/javascript/bidirectional-relationship-in-json</a> to get good understanding about <code>@JsonIdentityInfo</code> annotation.</p>\n"},{"tags":[],"owner":{"account_id":18473332,"reputation":45,"user_id":13457596,"display_name":"emily"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627237043,"creation_date":1627237043,"answer_id":68521381,"question_id":3325387,"body_markdown":"This post: https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion\r\nhas a full explanation.\r\n\r\nIf you are using Jackson with older versions, you can try  @jsonmanagedreference + @jsonbackreference. If your Jackson is above 2 (1.9 also doesn&#39;t work as I know), try @JsonIdentityInfo instead.","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>This post: <a href=\"https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion</a>\nhas a full explanation.</p>\n<p>If you are using Jackson with older versions, you can try  @jsonmanagedreference + @jsonbackreference. If your Jackson is above 2 (1.9 also doesn't work as I know), try @JsonIdentityInfo instead.</p>\n"},{"tags":[],"owner":{"account_id":4488914,"reputation":1121,"user_id":3650586,"display_name":"Anomitra"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1672997087,"creation_date":1672997087,"answer_id":75029055,"question_id":3325387,"body_markdown":"As someone using Spring Data and Lombok, this is how I solved it for myself.\r\n\r\n    @Entity\r\n    @Data\r\n    public class Foo extends BaseEntity {\r\n\r\n        @OneToMany(fetch = FetchType.EAGER)\r\n        @JoinColumn(name = &quot;foo_id&quot;)\r\n        @JsonIgnoreProperties(&quot;parent_foo&quot;)\r\n        @EqualsAndHashCode.Exclude\r\n        private Set&lt;Bar&gt; linkedBars;\r\n    }\r\n\r\n    @Entity\r\n    @Data\r\n    public class Bar extends BaseEntity {\r\n\r\n        @Column(name = &quot;foo_id&quot;)\r\n        private Long parentFooId;\r\n\r\n        @ManyToOne(fetch = FetchType.EAGER)\r\n        @JoinColumn(name = &quot;foo_id&quot;, insertable = false, updatable = false)\r\n        @JsonIgnoreProperties({&quot;linkedBars&quot;})\r\n        private Foo parentFoo;\r\n    }\r\n\r\nThe `JsonIgnoreProperties` annotation stops infinite recursion as many answers have discussed above. \r\n\r\n`@EqualsAndHashCode.Exclude` prevents the `StackOverflowError` caused by `hashCode` and `equals` being called recursively. \r\n\r\nUsing `Set` over `List` resolves the `MultipleBagFetchException` which occurs when you add multiple collection fields. You can also use `@Fetch(value = FetchMode.SUBSELECT)` to avoid the cartesian product, but I haven&#39;t tried it personally since my use case didn&#39;t need it. \r\n\r\nThe explicit definition of `parentFooId` in `Bar` is to allow mapping `Foo` entities with `Bar`s.","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>As someone using Spring Data and Lombok, this is how I solved it for myself.</p>\n<pre><code>@Entity\n@Data\npublic class Foo extends BaseEntity {\n\n    @OneToMany(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;foo_id&quot;)\n    @JsonIgnoreProperties(&quot;parent_foo&quot;)\n    @EqualsAndHashCode.Exclude\n    private Set&lt;Bar&gt; linkedBars;\n}\n\n@Entity\n@Data\npublic class Bar extends BaseEntity {\n\n    @Column(name = &quot;foo_id&quot;)\n    private Long parentFooId;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;foo_id&quot;, insertable = false, updatable = false)\n    @JsonIgnoreProperties({&quot;linkedBars&quot;})\n    private Foo parentFoo;\n}\n</code></pre>\n<p>The <code>JsonIgnoreProperties</code> annotation stops infinite recursion as many answers have discussed above.</p>\n<p><code>@EqualsAndHashCode.Exclude</code> prevents the <code>StackOverflowError</code> caused by <code>hashCode</code> and <code>equals</code> being called recursively.</p>\n<p>Using <code>Set</code> over <code>List</code> resolves the <code>MultipleBagFetchException</code> which occurs when you add multiple collection fields. You can also use <code>@Fetch(value = FetchMode.SUBSELECT)</code> to avoid the cartesian product, but I haven't tried it personally since my use case didn't need it.</p>\n<p>The explicit definition of <code>parentFooId</code> in <code>Bar</code> is to allow mapping <code>Foo</code> entities with <code>Bar</code>s.</p>\n"}],"owner":{"account_id":99208,"reputation":9643,"user_id":268098,"accept_rate":86,"display_name":"Ta Sas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":446506,"favorite_count":0,"down_vote_count":0,"up_vote_count":548,"accepted_answer_id":3329629,"answer_count":29,"score":548,"last_activity_date":1677754836,"creation_date":1279980035,"question_id":3325387,"body_markdown":"When trying to convert a JPA object that has a bi-directional association into JSON, I keep getting \r\n\r\n```\r\norg.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError)\r\n```\r\n\r\nAll I found is [this thread][1] which basically concludes with recommending to avoid bi-directional associations. Does anyone have an idea for  a workaround for this spring bug?\r\n\r\n------ EDIT 2010-07-24 16:26:22 -------\r\n\r\nCodesnippets:\r\n\r\nBusiness Object 1:\r\n\r\n```lang-java\r\n@Entity\r\n@Table(name = &quot;ta_trainee&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\r\npublic class Trainee extends BusinessObject {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.TABLE)\r\n\t@Column(name = &quot;id&quot;, nullable = false)\r\n\tprivate Integer id;\r\n\r\n\t@Column(name = &quot;name&quot;, nullable = true)\r\n\tprivate String name;\r\n\r\n\t@Column(name = &quot;surname&quot;, nullable = true)\r\n\tprivate String surname;\r\n\r\n\t@OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n\t@Column(nullable = true)\r\n\tprivate Set&lt;BodyStat&gt; bodyStats;\r\n\r\n\t@OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n\t@Column(nullable = true)\r\n\tprivate Set&lt;Training&gt; trainings;\r\n\r\n\t@OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n\t@Column(nullable = true)\r\n\tprivate Set&lt;ExerciseType&gt; exerciseTypes;\r\n\r\n\tpublic Trainee() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\t//... getters/setters ...\r\n}\r\n```\r\n\r\nBusiness Object 2:\r\n\r\n```lang-java\r\nimport javax.persistence.*;\r\nimport java.util.Date;\r\n\r\n@Entity\r\n@Table(name = &quot;ta_bodystat&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\r\npublic class BodyStat extends BusinessObject {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.TABLE)\r\n\t@Column(name = &quot;id&quot;, nullable = false)\r\n\tprivate Integer id;\r\n\r\n\t@Column(name = &quot;height&quot;, nullable = true)\r\n\tprivate Float height;\r\n\r\n\t@Column(name = &quot;measuretime&quot;, nullable = false)\r\n\t@Temporal(TemporalType.TIMESTAMP)\r\n\tprivate Date measureTime;\r\n\r\n\t@ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n\t@JoinColumn(name=&quot;trainee_fk&quot;)\r\n\tprivate Trainee trainee;\r\n}\r\n```\r\n\r\nController:\r\n\r\n\r\n```lang-java\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestMethod;\r\nimport org.springframework.web.bind.annotation.ResponseBody;\r\n\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.validation.ConstraintViolation;\r\nimport java.util.*;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\n\r\n@Controller\r\n@RequestMapping(value = &quot;/trainees&quot;)\r\npublic class TraineesController {\r\n\r\n\tfinal Logger logger = LoggerFactory.getLogger(TraineesController.class);\r\n\r\n\tprivate Map&lt;Long, Trainee&gt; trainees = new ConcurrentHashMap&lt;Long, Trainee&gt;();\r\n\r\n\t@Autowired\r\n\tprivate ITraineeDAO traineeDAO;\r\n\t \r\n\t/**\r\n\t * Return json repres. of all trainees\r\n\t */\r\n\t@RequestMapping(value = &quot;/getAllTrainees&quot;, method = RequestMethod.GET)\r\n\t@ResponseBody        \r\n\tpublic Collection getAllTrainees() {\r\n\t\tCollection allTrainees = this.traineeDAO.getAll();\r\n\r\n\t\tthis.logger.debug(&quot;A total of &quot; + allTrainees.size() + &quot;  trainees was read from db&quot;);\r\n\r\n\t\treturn allTrainees;\r\n\t}    \r\n}\r\n```\r\n\r\nJPA-implementation of the trainee DAO:\r\n\r\n```lang-java\r\n@Repository\r\n@Transactional\r\npublic class TraineeDAO implements ITraineeDAO {\r\n\r\n\t@PersistenceContext\r\n\tprivate EntityManager em;\r\n\r\n\t@Transactional\r\n\tpublic Trainee save(Trainee trainee) {\r\n\t\tem.persist(trainee);\r\n\t\treturn trainee;\r\n\t}\r\n\r\n\t@Transactional(readOnly = true)\r\n\tpublic Collection getAll() {\r\n\t\treturn (Collection) em.createQuery(&quot;SELECT t FROM Trainee t&quot;).getResultList();\r\n\t}\r\n}\r\n```\r\n\r\npersistence.xml\r\n\r\n```xml\r\n&lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\r\n\t\t\t xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t\t xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd&quot;\r\n\t\t\t version=&quot;1.0&quot;&gt;\r\n\t&lt;persistence-unit name=&quot;RDBMS&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n\t\t&lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;validate&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.archive.autodetection&quot; value=&quot;class&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;dialect&quot; value=&quot;org.hibernate.dialect.MySQL5InnoDBDialect&quot;/&gt;\r\n\t\t\t&lt;!-- &lt;property name=&quot;dialect&quot; value=&quot;org.hibernate.dialect.HSQLDialect&quot;/&gt;         --&gt;\r\n\t\t&lt;/properties&gt;\r\n\t&lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\n[1]: http://forum.springsource.org/showthread.php?t=88803","title":"Infinite Recursion with Jackson JSON and Hibernate JPA issue","body":"<p>When trying to convert a JPA object that has a bi-directional association into JSON, I keep getting</p>\n<pre><code>org.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError)\n</code></pre>\n<p>All I found is <a href=\"http://forum.springsource.org/showthread.php?t=88803\" rel=\"noreferrer\">this thread</a> which basically concludes with recommending to avoid bi-directional associations. Does anyone have an idea for  a workaround for this spring bug?</p>\n<p>------ EDIT 2010-07-24 16:26:22 -------</p>\n<p>Codesnippets:</p>\n<p>Business Object 1:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;ta_trainee&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\npublic class Trainee extends BusinessObject {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.TABLE)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Integer id;\n\n    @Column(name = &quot;name&quot;, nullable = true)\n    private String name;\n\n    @Column(name = &quot;surname&quot;, nullable = true)\n    private String surname;\n\n    @OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @Column(nullable = true)\n    private Set&lt;BodyStat&gt; bodyStats;\n\n    @OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @Column(nullable = true)\n    private Set&lt;Training&gt; trainings;\n\n    @OneToMany(mappedBy = &quot;trainee&quot;, fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @Column(nullable = true)\n    private Set&lt;ExerciseType&gt; exerciseTypes;\n\n    public Trainee() {\n        super();\n    }\n\n    //... getters/setters ...\n}\n</code></pre>\n<p>Business Object 2:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.*;\nimport java.util.Date;\n\n@Entity\n@Table(name = &quot;ta_bodystat&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;id&quot;})})\npublic class BodyStat extends BusinessObject {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.TABLE)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Integer id;\n\n    @Column(name = &quot;height&quot;, nullable = true)\n    private Float height;\n\n    @Column(name = &quot;measuretime&quot;, nullable = false)\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date measureTime;\n\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;trainee_fk&quot;)\n    private Trainee trainee;\n}\n</code></pre>\n<p>Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport javax.servlet.http.HttpServletResponse;\nimport javax.validation.ConstraintViolation;\nimport java.util.*;\nimport java.util.concurrent.ConcurrentHashMap;\n\n@Controller\n@RequestMapping(value = &quot;/trainees&quot;)\npublic class TraineesController {\n\n    final Logger logger = LoggerFactory.getLogger(TraineesController.class);\n\n    private Map&lt;Long, Trainee&gt; trainees = new ConcurrentHashMap&lt;Long, Trainee&gt;();\n\n    @Autowired\n    private ITraineeDAO traineeDAO;\n     \n    /**\n     * Return json repres. of all trainees\n     */\n    @RequestMapping(value = &quot;/getAllTrainees&quot;, method = RequestMethod.GET)\n    @ResponseBody        \n    public Collection getAllTrainees() {\n        Collection allTrainees = this.traineeDAO.getAll();\n\n        this.logger.debug(&quot;A total of &quot; + allTrainees.size() + &quot;  trainees was read from db&quot;);\n\n        return allTrainees;\n    }    \n}\n</code></pre>\n<p>JPA-implementation of the trainee DAO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\n@Transactional\npublic class TraineeDAO implements ITraineeDAO {\n\n    @PersistenceContext\n    private EntityManager em;\n\n    @Transactional\n    public Trainee save(Trainee trainee) {\n        em.persist(trainee);\n        return trainee;\n    }\n\n    @Transactional(readOnly = true)\n    public Collection getAll() {\n        return (Collection) em.createQuery(&quot;SELECT t FROM Trainee t&quot;).getResultList();\n    }\n}\n</code></pre>\n<p>persistence.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd&quot;\n             version=&quot;1.0&quot;&gt;\n    &lt;persistence-unit name=&quot;RDBMS&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;validate&quot;/&gt;\n            &lt;property name=&quot;hibernate.archive.autodetection&quot; value=&quot;class&quot;/&gt;\n            &lt;property name=&quot;dialect&quot; value=&quot;org.hibernate.dialect.MySQL5InnoDBDialect&quot;/&gt;\n            &lt;!-- &lt;property name=&quot;dialect&quot; value=&quot;org.hibernate.dialect.HSQLDialect&quot;/&gt;         --&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n"},{"tags":["java","data-binding","vaadin","lombok","vaadin23"],"owner":{"account_id":18336090,"reputation":17,"user_id":13353450,"display_name":"Buddhima Chamaranga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677761383,"answer_count":0,"score":0,"last_activity_date":1677754679,"creation_date":1677749091,"question_id":75613466,"body_markdown":"**I&#39;m getting this error when my entities consist of another entities. I also tried Jackson annotations also doesn&#39;t help. when only trying to save one entity it is fine. It happens when models consist of other models**\r\n\r\n```\r\njava.lang.StackOverflowError: null\r\n\tat com.example.application.models.Schema.hashCode(Schema.java:12) ~[classes/:na]\r\n\tat com.example.application.models.Job.hashCode(Job.java:11) ~[classes/:na]\r\n\tat com.example.application.models.Schema.hashCode(Schema.java:12) ~[classes/:na]\r\n\tat com.example.application.models.Job.hashCode(Job.java:11) ~[classes/:na]\r\n\tat com.example.application.models.Schema.hashCode(Schema.java:12) ~[classes/:na]\r\n\tat com.example.application.models.Job.hashCode(Job.java:11) ~[classes/:na]\r\n\tat com.example.application.models.Schema.hashCode(Schema.java:12) ~[classes/:na]\r\n\tat com.example.application.models.Job.hashCode(Job.java:11) ~[classes/:na]\r\n```\r\n\r\n\r\n```\r\nThese are my entity classes\r\n\r\n@Data\r\n@Entity\r\n@Table(name = &quot;job&quot;)\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Job {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column(name = &quot;jobName&quot;)\r\n    private String jobName;\r\n    @Column(name = &quot;jobDesc&quot;)\r\n    private String jobDesc;\r\n    private String status;\r\n\r\n\r\n    @JsonIgnore\r\n    @OneToOne(cascade = CascadeType.ALL,mappedBy = &quot;job&quot;)\r\n    @NotNull\r\n    private Schema schema;\r\n\r\n    private boolean isScheduled;\r\n    private String cronExpression;\r\n\r\n    public Job(String jobName, String jobDesc, String status, Schema schema) {\r\n        this.jobName = jobName;\r\n        this.jobDesc = jobDesc;\r\n        this.status = status;\r\n        this.schema = schema;\r\n    }\r\n}\r\n\r\n@Entity\r\n@Data\r\n@Table(name = &quot;reqDetails&quot;)\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Schema {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private String schemaName;\r\n    private String schemaURL;\r\n    private String entityName;\r\n    private String schemaValue;\r\n    \r\n    @JoinColumn(name =&quot;job_fk_id&quot;,referencedColumnName = &quot;id&quot;)\r\n    private Job job;\r\n\r\n    public Schema(String schemaName, String schemaURL, String entityName, String schemaValue) {\r\n        this.schemaName = schemaName;\r\n        this.schemaURL = schemaURL;\r\n        this.entityName = entityName;\r\n        this.schemaValue = schemaValue;\r\n    }\r\n}`\r\n```\r\nAfter saving the form the database shows the saved object correctly. But when vaadin tries to retrieve the data, the streaming issue comes. I&#39;m using vaadin version 23","title":"Lombok: Vaadin binder gets a stackover flow error when entity model consist of a another model","body":"<p><strong>I'm getting this error when my entities consist of another entities. I also tried Jackson annotations also doesn't help. when only trying to save one entity it is fine. It happens when models consist of other models</strong></p>\n<pre><code>java.lang.StackOverflowError: null\n    at com.example.application.models.Schema.hashCode(Schema.java:12) ~[classes/:na]\n    at com.example.application.models.Job.hashCode(Job.java:11) ~[classes/:na]\n    at com.example.application.models.Schema.hashCode(Schema.java:12) ~[classes/:na]\n    at com.example.application.models.Job.hashCode(Job.java:11) ~[classes/:na]\n    at com.example.application.models.Schema.hashCode(Schema.java:12) ~[classes/:na]\n    at com.example.application.models.Job.hashCode(Job.java:11) ~[classes/:na]\n    at com.example.application.models.Schema.hashCode(Schema.java:12) ~[classes/:na]\n    at com.example.application.models.Job.hashCode(Job.java:11) ~[classes/:na]\n</code></pre>\n<pre><code>These are my entity classes\n\n@Data\n@Entity\n@Table(name = &quot;job&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Job {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = &quot;jobName&quot;)\n    private String jobName;\n    @Column(name = &quot;jobDesc&quot;)\n    private String jobDesc;\n    private String status;\n\n\n    @JsonIgnore\n    @OneToOne(cascade = CascadeType.ALL,mappedBy = &quot;job&quot;)\n    @NotNull\n    private Schema schema;\n\n    private boolean isScheduled;\n    private String cronExpression;\n\n    public Job(String jobName, String jobDesc, String status, Schema schema) {\n        this.jobName = jobName;\n        this.jobDesc = jobDesc;\n        this.status = status;\n        this.schema = schema;\n    }\n}\n\n@Entity\n@Data\n@Table(name = &quot;reqDetails&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Schema {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String schemaName;\n    private String schemaURL;\n    private String entityName;\n    private String schemaValue;\n    \n    @JoinColumn(name =&quot;job_fk_id&quot;,referencedColumnName = &quot;id&quot;)\n    private Job job;\n\n    public Schema(String schemaName, String schemaURL, String entityName, String schemaValue) {\n        this.schemaName = schemaName;\n        this.schemaURL = schemaURL;\n        this.entityName = entityName;\n        this.schemaValue = schemaValue;\n    }\n}`\n</code></pre>\n<p>After saving the form the database shows the saved object correctly. But when vaadin tries to retrieve the data, the streaming issue comes. I'm using vaadin version 23</p>\n"},{"tags":["java","logging","junit","mockito","quarkus"],"comments":[{"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"score":1,"creation_date":1621594334,"post_id":67633839,"comment_id":119548899,"body_markdown":"Looking at `LoggerProducer`, the logger is produced with scope `@Dependent`. `@InjectMock` requires the scope of the bean to be a normal scope, so this is unfortunately not going to work. (The error message doesn&#39;t exactly pinpoint the problem, but I&#39;m pretty sure it&#39;s closely related. The `LoggerProducer` injects an `InjectionPoint`, which is only possible for `@Dependent` beans, and `@Dependent` beans are not supported by the `@InjectMock` mechanism.)","body":"Looking at <code>LoggerProducer</code>, the logger is produced with scope <code>@Dependent</code>. <code>@InjectMock</code> requires the scope of the bean to be a normal scope, so this is unfortunately not going to work. (The error message doesn&#39;t exactly pinpoint the problem, but I&#39;m pretty sure it&#39;s closely related. The <code>LoggerProducer</code> injects an <code>InjectionPoint</code>, which is only possible for <code>@Dependent</code> beans, and <code>@Dependent</code> beans are not supported by the <code>@InjectMock</code> mechanism.)"},{"owner":{"account_id":3186968,"reputation":367,"user_id":2692353,"display_name":"Mani76"},"score":1,"creation_date":1622209969,"post_id":67633839,"comment_id":119734395,"body_markdown":"Is there any other way to verify (any) logger interaction with Quarkus?\n\nMost of the time i need to annotate my classes with\n``` @ExtendWith(MockitoExtension.class) ```\ninstead of ``` @QuarkusTest ``` to have full mock-support.\n\nMore and more I think I should stop this project with Quarkus and use Spring instead.","body":"Is there any other way to verify (any) logger interaction with Quarkus?  Most of the time i need to annotate my classes with ``` @ExtendWith(MockitoExtension.class) ``` instead of ``` @QuarkusTest ``` to have full mock-support.  More and more I think I should stop this project with Quarkus and use Spring instead."},{"owner":{"account_id":1155867,"reputation":992,"user_id":1136504,"accept_rate":67,"display_name":"DannyThunder"},"score":0,"creation_date":1623335845,"post_id":67633839,"comment_id":120055664,"body_markdown":"I&#39;m in the same boat. This sucks big time!","body":"I&#39;m in the same boat. This sucks big time!"}],"answers":[{"tags":[],"owner":{"account_id":1835243,"reputation":211,"user_id":1665770,"display_name":"Umut Shn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627057992,"creation_date":1627054587,"answer_id":68501708,"question_id":67633839,"body_markdown":"I have a workaround for this issue.\r\nNot sure if its proper or not and didn&#39;t see your class too.\r\n\r\nSo instead of this\r\n\r\n```\r\n  @Test\r\n  void simpleTest() {\r\n    // mapper throws exception\r\n    Response response = mapper.toResponse(new IllegalArgumentException());\r\n\r\n    Assertions.assertEquals(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode(), response.getStatus());\r\n\r\n    Mockito.verify(logger, Mockito.times(1)).error(Mockito.anyString(), Mockito.any(IllegalArgumentException.class));\r\n  }\r\n```\r\n\r\nTry this\r\n\r\n```\r\n\r\n  @Inject\r\n  MockLoggerProducer mockLoggerProducer;\r\n\r\n  @Test\r\n  void simpleTest() {\r\n    // mapper throws exception\r\n    Response response = mapper.toResponse(new IllegalArgumentException());\r\n\r\n    Assertions.assertEquals(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode(), response.getStatus());\r\n\r\n    Logger logger = mockLoggerProducer.getMockLogger(Mapper.class);\r\n    Mockito.verify(logger, Mockito.times(1)).error(Mockito.anyString(), Mockito.any(IllegalArgumentException.class));\r\n  }\r\n\r\n    @Alternative\r\n    @Priority(1)\r\n    @Singleton\r\n    static class MockLoggerProducer {\r\n        Map&lt;Class&lt;?&gt;, Logger&gt; loggers = new HashMap&lt;&gt;();\r\n\r\n        @Produces\r\n        Logger getSimpleLogger(InjectionPoint injectionPoint) {\r\n            Logger logger = loggers.get(injectionPoint.getMember().getDeclaringClass());\r\n            if (logger == null) {\r\n                logger = mock(Logger.class);\r\n                loggers.put(injectionPoint.getMember().getDeclaringClass(), logger);\r\n            }\r\n            return logger;\r\n        }\r\n\r\n        Logger getMockLogger(Class&lt;?&gt; clazz) {\r\n            return loggers.get(clazz);\r\n        }\r\n    }\r\n```\r\n\r\nUsing quarkus 2.0.2 this works for me","title":"Mock Quarkus provided logger","body":"<p>I have a workaround for this issue.\nNot sure if its proper or not and didn't see your class too.</p>\n<p>So instead of this</p>\n<pre><code>  @Test\n  void simpleTest() {\n    // mapper throws exception\n    Response response = mapper.toResponse(new IllegalArgumentException());\n\n    Assertions.assertEquals(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode(), response.getStatus());\n\n    Mockito.verify(logger, Mockito.times(1)).error(Mockito.anyString(), Mockito.any(IllegalArgumentException.class));\n  }\n</code></pre>\n<p>Try this</p>\n<pre><code>\n  @Inject\n  MockLoggerProducer mockLoggerProducer;\n\n  @Test\n  void simpleTest() {\n    // mapper throws exception\n    Response response = mapper.toResponse(new IllegalArgumentException());\n\n    Assertions.assertEquals(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode(), response.getStatus());\n\n    Logger logger = mockLoggerProducer.getMockLogger(Mapper.class);\n    Mockito.verify(logger, Mockito.times(1)).error(Mockito.anyString(), Mockito.any(IllegalArgumentException.class));\n  }\n\n    @Alternative\n    @Priority(1)\n    @Singleton\n    static class MockLoggerProducer {\n        Map&lt;Class&lt;?&gt;, Logger&gt; loggers = new HashMap&lt;&gt;();\n\n        @Produces\n        Logger getSimpleLogger(InjectionPoint injectionPoint) {\n            Logger logger = loggers.get(injectionPoint.getMember().getDeclaringClass());\n            if (logger == null) {\n                logger = mock(Logger.class);\n                loggers.put(injectionPoint.getMember().getDeclaringClass(), logger);\n            }\n            return logger;\n        }\n\n        Logger getMockLogger(Class&lt;?&gt; clazz) {\n            return loggers.get(clazz);\n        }\n    }\n</code></pre>\n<p>Using quarkus 2.0.2 this works for me</p>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677754616,"creation_date":1662462004,"answer_id":73620895,"question_id":67633839,"body_markdown":"I avoid totally `@QuarkusTest` and other quarkus related annotations, and using only Mockito annotations, it works. \r\n\r\n```java\r\nimport org.jboss.logging.Logger;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.mockito.InjectMocks;\r\nimport org.mockito.Mock;\r\nimport org.mockito.junit.jupiter.MockitoExtension;\r\n\r\n@ExtendWith(MockitoExtension.class)\r\nclass MyBeanTest {\r\n    @InjectMocks\r\n    private MyBean bean = new MyBean();\r\n\r\n    @Mock\r\n    Logger logger;\r\n    // because it does nothing when logging, so you don&#39;t need to stub like `doNothing()...`.\r\n\r\n    @Test\r\n    ...(all is fine)\r\n\r\n}\r\n```","title":"Mock Quarkus provided logger","body":"<p>I avoid totally <code>@QuarkusTest</code> and other quarkus related annotations, and using only Mockito annotations, it works.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.jboss.logging.Logger;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\n@ExtendWith(MockitoExtension.class)\nclass MyBeanTest {\n    @InjectMocks\n    private MyBean bean = new MyBean();\n\n    @Mock\n    Logger logger;\n    // because it does nothing when logging, so you don't need to stub like `doNothing()...`.\n\n    @Test\n    ...(all is fine)\n\n}\n</code></pre>\n"}],"owner":{"account_id":3186968,"reputation":367,"user_id":2692353,"display_name":"Mani76"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1316,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1677754616,"creation_date":1621587903,"question_id":67633839,"body_markdown":"Quarkus offers a internal logger producer (since 1.11.x), so there is no custom logger producer. For a unit test, I need to mock these logger because of the verify-method fo Mockito.\r\n\r\n```\r\nimport org.jboss.logging.Logger;\r\n\r\n@QuarkusTest\r\npublic class ApplicationExceptionMapperTest {\r\n\r\n  @InjectMock\r\n  Logger logger;\r\n\r\n  @Test\r\n  void simpleTest() {\r\n    // mapper throws exception\r\n    Response response = mapper.toResponse(new IllegalArgumentException());\r\n\r\n    Assertions.assertEquals(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode(), response.getStatus());\r\n\r\n    Mockito.verify(logger, Mockito.times(1)).error(Mockito.anyString(), Mockito.any(IllegalArgumentException.class));\r\n  }\r\n}\r\n```\r\n\r\nThe problem is, when executing the test, I get a NPE:\r\n\r\n```\r\norg.junit.jupiter.api.extension.TestInstantiationException: Failed to create test instance\r\n\r\n\tat io.quarkus.test.junit.QuarkusTestExtension.initTestState(QuarkusTestExtension.java:725)\r\n\tat io.quarkus.test.junit.QuarkusTestExtension.interceptTestClassConstructor(QuarkusTestExtension.java:689)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.api.extension.InvocationInterceptor.interceptTestClassConstructor(InvocationInterceptor.java:72)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:77)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestClassConstructor(ClassBasedTestDescriptor.java:342)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateTestClass(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateTestClass(ClassTestDescriptor.java:79)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:267)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:369)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:221)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat io.quarkus.test.junit.QuarkusTestExtension.initTestState(QuarkusTestExtension.java:717)\r\n\t... 61 more\r\nCaused by: java.lang.NullPointerException\r\n\tat io.quarkus.arc.runtime.LoggerProducer.getSimpleLogger(LoggerProducer.java:25)\r\n\tat io.quarkus.arc.runtime.LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.create(LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.zig:193)\r\n\tat io.quarkus.arc.runtime.LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.get(LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.zig:223)\r\n\tat io.quarkus.arc.runtime.LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.get(LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.zig:258)\r\n```\r\n\r\nIs this a Quarkus-bug or do I need anything else to get this test work as expected?","title":"Mock Quarkus provided logger","body":"<p>Quarkus offers a internal logger producer (since 1.11.x), so there is no custom logger producer. For a unit test, I need to mock these logger because of the verify-method fo Mockito.</p>\n<pre><code>import org.jboss.logging.Logger;\n\n@QuarkusTest\npublic class ApplicationExceptionMapperTest {\n\n  @InjectMock\n  Logger logger;\n\n  @Test\n  void simpleTest() {\n    // mapper throws exception\n    Response response = mapper.toResponse(new IllegalArgumentException());\n\n    Assertions.assertEquals(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode(), response.getStatus());\n\n    Mockito.verify(logger, Mockito.times(1)).error(Mockito.anyString(), Mockito.any(IllegalArgumentException.class));\n  }\n}\n</code></pre>\n<p>The problem is, when executing the test, I get a NPE:</p>\n<pre><code>org.junit.jupiter.api.extension.TestInstantiationException: Failed to create test instance\n\n    at io.quarkus.test.junit.QuarkusTestExtension.initTestState(QuarkusTestExtension.java:725)\n    at io.quarkus.test.junit.QuarkusTestExtension.interceptTestClassConstructor(QuarkusTestExtension.java:689)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.api.extension.InvocationInterceptor.interceptTestClassConstructor(InvocationInterceptor.java:72)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:77)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestClassConstructor(ClassBasedTestDescriptor.java:342)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateTestClass(ClassBasedTestDescriptor.java:289)\n    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateTestClass(ClassTestDescriptor.java:79)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:267)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259)\n    at java.base/java.util.Optional.orElseGet(Optional.java:369)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:221)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at io.quarkus.test.junit.QuarkusTestExtension.initTestState(QuarkusTestExtension.java:717)\n    ... 61 more\nCaused by: java.lang.NullPointerException\n    at io.quarkus.arc.runtime.LoggerProducer.getSimpleLogger(LoggerProducer.java:25)\n    at io.quarkus.arc.runtime.LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.create(LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.zig:193)\n    at io.quarkus.arc.runtime.LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.get(LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.zig:223)\n    at io.quarkus.arc.runtime.LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.get(LoggerProducer_ProducerMethod_getSimpleLogger_5859fcbc233b38eb09604548b809f68a02e7d55b_Bean.zig:258)\n</code></pre>\n<p>Is this a Quarkus-bug or do I need anything else to get this test work as expected?</p>\n"},{"tags":["java","jar","ant"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1677605378,"post_id":75594506,"comment_id":133369650,"body_markdown":"You need to add the source path of the new `Car` class and remove the old one.","body":"You need to add the source path of the new <code>Car</code> class and remove the old one."},{"owner":{"account_id":18117684,"reputation":21,"user_id":13174147,"display_name":"panda"},"score":0,"creation_date":1677746165,"post_id":75594506,"comment_id":133399576,"body_markdown":"How ? I tried this but its not working :\n\n&lt;target name=&quot;UpdateJar&quot; depends=&quot;Compile&quot;&gt;\n\t\t&lt;exec executable=&quot;java path&quot;&gt;\n\t\t\t&lt;arg value=&quot;-uf&quot;/&gt;\n\t\t\t&lt;arg value=&quot;$Sample.jar&quot;/&gt;\n\t\t\t&lt;arg value=&quot;${Path}&quot;/&gt;\n\t\t\t&lt;arg value=&quot;Test.class&quot;/&gt;\n\t\t&lt;/exec&gt;\n\t&lt;/target&gt;","body":"How ? I tried this but its not working :  &lt;target name=&quot;UpdateJar&quot; depends=&quot;Compile&quot;&gt; \t\t&lt;exec executable=&quot;java path&quot;&gt; \t\t\t&lt;arg value=&quot;-uf&quot;/&gt; \t\t\t&lt;arg value=&quot;$Sample.jar&quot;/&gt; \t\t\t&lt;arg value=&quot;${Path}&quot;/&gt; \t\t\t&lt;arg value=&quot;Test.class&quot;/&gt; \t\t&lt;/exec&gt; \t&lt;/target&gt;"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1677754226,"post_id":75594506,"comment_id":133401866,"body_markdown":"I can&#39;t read that - you should have put that, commented, into your post above. It is possible to have several source dirs in the javac task (which is what needs to be done - *not* just adding a class into the jar) but why don&#39;t you just copy the &#39;new&#39; class into the same source tree?","body":"I can&#39;t read that - you should have put that, commented, into your post above. It is possible to have several source dirs in the javac task (which is what needs to be done - <i>not</i> just adding a class into the jar) but why don&#39;t you just copy the &#39;new&#39; class into the same source tree?"},{"owner":{"account_id":18117684,"reputation":21,"user_id":13174147,"display_name":"panda"},"score":0,"creation_date":1677754612,"post_id":75594506,"comment_id":133401972,"body_markdown":"@g00se I added it to my question above, because they are in a different package sources and different project","body":"@g00se I added it to my question above, because they are in a different package sources and different project"}],"owner":{"account_id":18117684,"reputation":21,"user_id":13174147,"display_name":"panda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677754573,"creation_date":1677600229,"question_id":75594506,"body_markdown":"I have an existing jar file that has three classes (Car,Home,Agency) that are in same package and same jar file. Now I have created another class Car in another package (contains extra code) and I need to update my jar by adding this class (and deleting the first Car.class).\r\n\r\nHow can I do that using ant build?\r\n\r\nI have tried this code ant but it only delete all my classes and add a package too\r\n```\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n\r\n&lt;project default=&quot;makejar&quot; name=&quot;Test&quot; basedir=&quot;.&quot;&gt;\r\n\r\n\t&lt;property name=&quot;src&quot; location=&quot;../src/pack2&quot; /&gt;\r\n\t&lt;property name=&quot;class&quot; location=&quot;../class&quot; /&gt;\r\n\t&lt;property name=&quot;build.dir&quot; location=&quot;../bin&quot; /&gt;\r\n\t&lt;!-- delete existing dir--&gt;\r\n\t &lt;target name=&quot;clean&quot;&gt;\r\n\t    &lt;delete dir=&quot;${build.dir}&quot; /&gt;\r\n\t  &lt;/target&gt;\r\n\t&lt;!--create new dir--&gt;\r\n\t&lt;target name=&quot;makedir&quot;&gt;\r\n\t    &lt;mkdir dir=&quot;${build.dir}&quot; /&gt;\r\n\t  &lt;/target&gt;\r\n\t&lt;!-- Target for compiling the java code--&gt;\r\n\t\t&lt;target name=&quot;compile&quot; depends=&quot;clean, makedir&quot;&gt;\r\n\t\t\t&lt;javac srcdir=&quot;${src}&quot; destdir=&quot;${build.dir}&quot; &gt;\r\n\t\t\t&lt;/javac&gt;\r\n\t\t\t&lt;echo message=&quot;Compile Ok&quot; /&gt;   \t               \r\n\t\t&lt;/target&gt;\r\n\t\r\n\t&lt;!-- Defualt target to run all targets--&gt;\r\n\t  &lt;target name=&quot;mainTarget&quot; depends=&quot;compile&quot;&gt;\r\n\t    &lt;description&gt;Main target&lt;/description&gt;\r\n\t  \t\r\n\t  &lt;/target&gt;\r\n\t&lt;target name =&quot;makejar&quot; description=&quot;Create a jar for the HelloWorld project&quot; depends=&quot;mainTarget&quot;&gt;\r\n\t     &lt;mkdir dir=&quot;${build.dir}&quot;/&gt;\r\n\t     &lt;mkdir dir=&quot;${build.dir}/classes&quot;/&gt;\r\n\t     &lt;jar jarfile=&quot;${build.dir}/HelloWorld.jar&quot; basedir=&quot;${build.dir}&quot; update=&quot;true&quot;&gt;\r\n\t     &lt;/jar&gt;\r\n\t\t&lt;echo message=&quot;UPDATE OK&quot; /&gt;   \t               \r\n\r\n\t   &lt;/target&gt;\r\n&lt;/project&gt;\r\n\r\nAnd now I have this :\r\n[enter image description here](https://i.stack.imgur.com/yQyTV.png)\r\n\r\nBut I need all the classes not to be in a folder\r\n\r\nI also tried this :\r\n\r\n&lt;target name=&quot;UpdateJar&quot; depends=&quot;Compile&quot;&gt; \r\n  &lt;exec executable=&quot;java path&quot;&gt; \r\n    &lt;arg value=&quot;-uf&quot;/&gt; \r\n    &lt;arg value=&quot;$Sample.jar&quot;/&gt;\r\n    &lt;arg value=&quot;${Path}&quot;/&gt; \r\n    &lt;arg value=&quot;Test.class&quot;/&gt; \r\n &lt;/exec&gt; \r\n&lt;/target&gt;","title":"Is it possible to add a class from another package to an existing jar file using ant?","body":"<p>I have an existing jar file that has three classes (Car,Home,Agency) that are in same package and same jar file. Now I have created another class Car in another package (contains extra code) and I need to update my jar by adding this class (and deleting the first Car.class).</p>\n<p>How can I do that using ant build?</p>\n<p>I have tried this code ant but it only delete all my classes and add a package too</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n\n&lt;project default=&quot;makejar&quot; name=&quot;Test&quot; basedir=&quot;.&quot;&gt;\n\n    &lt;property name=&quot;src&quot; location=&quot;../src/pack2&quot; /&gt;\n    &lt;property name=&quot;class&quot; location=&quot;../class&quot; /&gt;\n    &lt;property name=&quot;build.dir&quot; location=&quot;../bin&quot; /&gt;\n    &lt;!-- delete existing dir--&gt;\n     &lt;target name=&quot;clean&quot;&gt;\n        &lt;delete dir=&quot;${build.dir}&quot; /&gt;\n      &lt;/target&gt;\n    &lt;!--create new dir--&gt;\n    &lt;target name=&quot;makedir&quot;&gt;\n        &lt;mkdir dir=&quot;${build.dir}&quot; /&gt;\n      &lt;/target&gt;\n    &lt;!-- Target for compiling the java code--&gt;\n        &lt;target name=&quot;compile&quot; depends=&quot;clean, makedir&quot;&gt;\n            &lt;javac srcdir=&quot;${src}&quot; destdir=&quot;${build.dir}&quot; &gt;\n            &lt;/javac&gt;\n            &lt;echo message=&quot;Compile Ok&quot; /&gt;                      \n        &lt;/target&gt;\n    \n    &lt;!-- Defualt target to run all targets--&gt;\n      &lt;target name=&quot;mainTarget&quot; depends=&quot;compile&quot;&gt;\n        &lt;description&gt;Main target&lt;/description&gt;\n        \n      &lt;/target&gt;\n    &lt;target name =&quot;makejar&quot; description=&quot;Create a jar for the HelloWorld project&quot; depends=&quot;mainTarget&quot;&gt;\n         &lt;mkdir dir=&quot;${build.dir}&quot;/&gt;\n         &lt;mkdir dir=&quot;${build.dir}/classes&quot;/&gt;\n         &lt;jar jarfile=&quot;${build.dir}/HelloWorld.jar&quot; basedir=&quot;${build.dir}&quot; update=&quot;true&quot;&gt;\n         &lt;/jar&gt;\n        &lt;echo message=&quot;UPDATE OK&quot; /&gt;                   \n\n       &lt;/target&gt;\n&lt;/project&gt;\n\nAnd now I have this :\n[enter image description here](https://i.stack.imgur.com/yQyTV.png)\n\nBut I need all the classes not to be in a folder\n\nI also tried this :\n\n&lt;target name=&quot;UpdateJar&quot; depends=&quot;Compile&quot;&gt; \n  &lt;exec executable=&quot;java path&quot;&gt; \n    &lt;arg value=&quot;-uf&quot;/&gt; \n    &lt;arg value=&quot;$Sample.jar&quot;/&gt;\n    &lt;arg value=&quot;${Path}&quot;/&gt; \n    &lt;arg value=&quot;Test.class&quot;/&gt; \n &lt;/exec&gt; \n&lt;/target&gt;\n</code></pre>\n"},{"tags":["java","android","android-intent","file-sharing","share-intent"],"comments":[{"owner":{"account_id":21138619,"reputation":192,"user_id":15541550,"display_name":"Tanishq Chawda"},"score":0,"creation_date":1677754791,"post_id":75614484,"comment_id":133402034,"body_markdown":"for printing you need to use printManager","body":"for printing you need to use printManager"}],"owner":{"account_id":27917304,"reputation":1,"user_id":21318189,"display_name":"VishaL RaJpuT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677754521,"creation_date":1677754521,"question_id":75614484,"body_markdown":"Is there any way to create default share intent which allow save, copy and print option in intent chooser. Need help.\r\n\r\n                        URL pdfUrl;\r\n                        try {\r\n                            pdfUrl = new URL(pdfData.getFile());\r\n                        } catch (MalformedURLException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                        Intent intentShare = new Intent(Intent.ACTION_SEND);\r\n                        intentShare.setType(&quot;text/plain&quot;);\r\n                        intentShare.putExtra(Intent.EXTRA_SUBJECT, &quot;Sharing File...&quot;);\r\n                        intentShare.putExtra(Intent.EXTRA_TEXT,pdfUrl);\r\n                        startActivity(Intent.createChooser(intentShare, &quot;Share File&quot;));\r\n\r\nIt allow only copy and I want copy,save and print.","title":"how to allow shared intent to save, copy and print option in android","body":"<p>Is there any way to create default share intent which allow save, copy and print option in intent chooser. Need help.</p>\n<pre><code>                    URL pdfUrl;\n                    try {\n                        pdfUrl = new URL(pdfData.getFile());\n                    } catch (MalformedURLException e) {\n                        throw new RuntimeException(e);\n                    }\n                    Intent intentShare = new Intent(Intent.ACTION_SEND);\n                    intentShare.setType(&quot;text/plain&quot;);\n                    intentShare.putExtra(Intent.EXTRA_SUBJECT, &quot;Sharing File...&quot;);\n                    intentShare.putExtra(Intent.EXTRA_TEXT,pdfUrl);\n                    startActivity(Intent.createChooser(intentShare, &quot;Share File&quot;));\n</code></pre>\n<p>It allow only copy and I want copy,save and print.</p>\n"},{"tags":["java","spring-boot","refactoring","redundancy","exceptionhandler"],"answers":[{"tags":[],"owner":{"account_id":18610226,"reputation":85,"user_id":13562851,"display_name":"Surya Teja Chavali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677742410,"creation_date":1677742410,"answer_id":75612454,"question_id":75612303,"body_markdown":"You can create a single method that takes a generic ```RuntimeException``` as the parameter and use an ```if/else``` statement to check the type of the exception and modify the response accordingly.\r\n\r\nThe below method checks the type of the exception and sets the appropriate HTTP status code and error message in the DataResponse object. If the exception is not one of the custom exceptions, a generic error message and status code is returned.\r\n\r\n```\r\n@ControllerAdvice\r\npublic class HandleExceptions {\r\n\r\n    @ExceptionHandler(value = RuntimeException.class)\r\n    public ResponseEntity&lt;Object&gt; handleCustomException(RuntimeException e) {\r\n        HttpStatus status;\r\n        DataResponse data;\r\n        \r\n        if (e instanceof CustomException1) {\r\n            status = HttpStatus.NOT_FOUND;\r\n            data = new DataResponse(&quot;custom status code for exception 1&quot;, e.getMessage());\r\n        } else if (e instanceof CustomException2) {\r\n            status = HttpStatus.NOT_FOUND;\r\n            data = new DataResponse(&quot;custom status code for exception 2&quot;, e.getMessage());\r\n        } else if (e instanceof CustomException3) {\r\n            status = HttpStatus.BAD_REQUEST;\r\n            data = new DataResponse(&quot;custom status code for exception 3&quot;, e.getMessage());\r\n        } else {\r\n            // Handle any other exceptions here\r\n            status = HttpStatus.INTERNAL_SERVER_ERROR;\r\n            data = new DataResponse(&quot;unknown error&quot;, e.getMessage());\r\n        }\r\n        \r\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\r\n        return new ResponseEntity&lt;&gt;(exceptionResponse, status);\r\n    }\r\n}\r\n\r\n```","title":"Is it possible to handle multiple exceptions with one @ExceptionHandler in spring boot?","body":"<p>You can create a single method that takes a generic <code>RuntimeException</code> as the parameter and use an <code>if/else</code> statement to check the type of the exception and modify the response accordingly.</p>\n<p>The below method checks the type of the exception and sets the appropriate HTTP status code and error message in the DataResponse object. If the exception is not one of the custom exceptions, a generic error message and status code is returned.</p>\n<pre><code>@ControllerAdvice\npublic class HandleExceptions {\n\n    @ExceptionHandler(value = RuntimeException.class)\n    public ResponseEntity&lt;Object&gt; handleCustomException(RuntimeException e) {\n        HttpStatus status;\n        DataResponse data;\n        \n        if (e instanceof CustomException1) {\n            status = HttpStatus.NOT_FOUND;\n            data = new DataResponse(&quot;custom status code for exception 1&quot;, e.getMessage());\n        } else if (e instanceof CustomException2) {\n            status = HttpStatus.NOT_FOUND;\n            data = new DataResponse(&quot;custom status code for exception 2&quot;, e.getMessage());\n        } else if (e instanceof CustomException3) {\n            status = HttpStatus.BAD_REQUEST;\n            data = new DataResponse(&quot;custom status code for exception 3&quot;, e.getMessage());\n        } else {\n            // Handle any other exceptions here\n            status = HttpStatus.INTERNAL_SERVER_ERROR;\n            data = new DataResponse(&quot;unknown error&quot;, e.getMessage());\n        }\n        \n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\n        return new ResponseEntity&lt;&gt;(exceptionResponse, status);\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677743828,"creation_date":1677743828,"answer_id":75612649,"question_id":75612303,"body_markdown":"The approach of Surya Teja Chavali for sure works, but it&#39;s also possible to do it a bit better (?) for readability&#39;s sake.\r\n\r\nKeep the multiple methods, each accepting a different exception, to _not_ introduce a huge if-else mess in your code. \r\n\r\nThen just add a &#39;normal&#39; private method, which then accepts `Throwable` as a parameter and handle everything \r\n\r\n```\r\n@ControllerAdvice\r\npublic class HandleExceptions {\r\n\r\n    @ExceptionHandler(value = CustomException1.class)\r\n    public ResponseEntity&lt;Object&gt; handleCustomException1(CustomException1 e) {\r\n        DataResponse data = new DataResponse(&quot;custom status code for exception 1&quot;, e.getMessage());\r\n        return handleCustomException2(e, data, HttpStatus.BAD_REQUEST);\r\n    }\r\n\r\n    @ExceptionHandler(value = CustomException2.class)\r\n    public ResponseEntity&lt;Object&gt; handleCustomException2(CustomException2 e) {\r\n        DataResponse data = new DataResponse(&quot;custom status code for exception 2&quot;, e.getMessage());\r\n        return handleException(e, data, HttpStatus.NOT_FOUND);\r\n    }\r\n\r\n    private ResponseEntity&lt;ExceptionResponse&gt; handleException(Throwable t, DataResponse data, HttpStatus status) {\r\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\r\n        return new ResponseEntity&lt;&gt;(ExceptionResponse, status);\r\n    }\r\n}\r\n```\r\n\r\nYou won&#39;t be able to remove all redundancy with this approach as well, but it&#39;ll be a bit more readable.","title":"Is it possible to handle multiple exceptions with one @ExceptionHandler in spring boot?","body":"<p>The approach of Surya Teja Chavali for sure works, but it's also possible to do it a bit better (?) for readability's sake.</p>\n<p>Keep the multiple methods, each accepting a different exception, to <em>not</em> introduce a huge if-else mess in your code.</p>\n<p>Then just add a 'normal' private method, which then accepts <code>Throwable</code> as a parameter and handle everything</p>\n<pre><code>@ControllerAdvice\npublic class HandleExceptions {\n\n    @ExceptionHandler(value = CustomException1.class)\n    public ResponseEntity&lt;Object&gt; handleCustomException1(CustomException1 e) {\n        DataResponse data = new DataResponse(&quot;custom status code for exception 1&quot;, e.getMessage());\n        return handleCustomException2(e, data, HttpStatus.BAD_REQUEST);\n    }\n\n    @ExceptionHandler(value = CustomException2.class)\n    public ResponseEntity&lt;Object&gt; handleCustomException2(CustomException2 e) {\n        DataResponse data = new DataResponse(&quot;custom status code for exception 2&quot;, e.getMessage());\n        return handleException(e, data, HttpStatus.NOT_FOUND);\n    }\n\n    private ResponseEntity&lt;ExceptionResponse&gt; handleException(Throwable t, DataResponse data, HttpStatus status) {\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\n        return new ResponseEntity&lt;&gt;(ExceptionResponse, status);\n    }\n}\n</code></pre>\n<p>You won't be able to remove all redundancy with this approach as well, but it'll be a bit more readable.</p>\n"},{"tags":[],"owner":{"account_id":5771551,"reputation":135,"user_id":4554863,"display_name":"Dinosaur-Guy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677747869,"creation_date":1677747869,"answer_id":75613275,"question_id":75612303,"body_markdown":"I think in this case redundancy is not really an issue. The actual code is not really the same - you have a different status code and a different message for each of them. So I would argue that you make the code less readable by trying to combine those methods just to save a few lines of code.\r\nYou could move your `ResponseStatus` to an annotation and remove the `ResponseEntity` wrapper, too by using `@ResponseBody`. This way you move the boilerplate away from your logic. But that is more like personal preference.\r\n\r\n```java\r\n@ExceptionHandler(value = CustomException1.class)\r\n@ResponseStatus(HttpStatus.NOT_FOUND)\r\n@ResponseBody\r\npublic ExceptionResponse handleCustomException1(CustomException1 e) {\r\n    DataResponse data = new DataResponse(&quot;custom status code for exception 1&quot;, e.getMessage());\r\n    return new ExceptionResponse(data);\r\n}\r\n```\r\n\r\nWhen using `@RestControllerAdvice` instead of `@ControllerAdvice` you can also remove the `@ResponseBody` annotation.","title":"Is it possible to handle multiple exceptions with one @ExceptionHandler in spring boot?","body":"<p>I think in this case redundancy is not really an issue. The actual code is not really the same - you have a different status code and a different message for each of them. So I would argue that you make the code less readable by trying to combine those methods just to save a few lines of code.\nYou could move your <code>ResponseStatus</code> to an annotation and remove the <code>ResponseEntity</code> wrapper, too by using <code>@ResponseBody</code>. This way you move the boilerplate away from your logic. But that is more like personal preference.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExceptionHandler(value = CustomException1.class)\n@ResponseStatus(HttpStatus.NOT_FOUND)\n@ResponseBody\npublic ExceptionResponse handleCustomException1(CustomException1 e) {\n    DataResponse data = new DataResponse(&quot;custom status code for exception 1&quot;, e.getMessage());\n    return new ExceptionResponse(data);\n}\n</code></pre>\n<p>When using <code>@RestControllerAdvice</code> instead of <code>@ControllerAdvice</code> you can also remove the <code>@ResponseBody</code> annotation.</p>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677754442,"creation_date":1677754442,"answer_id":75614474,"question_id":75612303,"body_markdown":"Alternativ solution with super class:\r\n\r\n    public class CustomException extends RuntimeException {\r\n        private final HttpStatus httpStatus;\r\n        private final String statusCode;\r\n        public CustomException(HttpStatus httpStatus, String statusCode, String message) {\r\n            super(message);\r\n            this.httpStatus = httpStatus;\r\n            this.statusCode = statusCode;\r\n        }\r\n    }\r\n\r\n    public class CustomException1 extends CustomException {\r\n        public CustomException1(String message) {\r\n            super(HttpStatus.NOT_FOUND, &quot;custom status code for exception 1&quot;, message);\r\n        }\r\n    }\r\n    // ... similar for 2 and 3\r\n    @ControllerAdvice\r\n    public class HandleExceptions {\r\n        @ExceptionHandler(value = CustomException.class)\r\n        public ResponseEntity&lt;Object&gt; handleCustomException(CustomException e) {\r\n            DataResponse data = new DataResponse(e.getStatusCode, e.getMessage());\r\n            ExceptionResponse exceptionResponse = new ExceptionResponse(data);\r\n            return new ResponseEntity&lt;&gt;(exceptionResponse, e.httpStatus);\r\n        }\r\n    }","title":"Is it possible to handle multiple exceptions with one @ExceptionHandler in spring boot?","body":"<p>Alternativ solution with super class:</p>\n<pre><code>public class CustomException extends RuntimeException {\n    private final HttpStatus httpStatus;\n    private final String statusCode;\n    public CustomException(HttpStatus httpStatus, String statusCode, String message) {\n        super(message);\n        this.httpStatus = httpStatus;\n        this.statusCode = statusCode;\n    }\n}\n\npublic class CustomException1 extends CustomException {\n    public CustomException1(String message) {\n        super(HttpStatus.NOT_FOUND, &quot;custom status code for exception 1&quot;, message);\n    }\n}\n// ... similar for 2 and 3\n@ControllerAdvice\npublic class HandleExceptions {\n    @ExceptionHandler(value = CustomException.class)\n    public ResponseEntity&lt;Object&gt; handleCustomException(CustomException e) {\n        DataResponse data = new DataResponse(e.getStatusCode, e.getMessage());\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\n        return new ResponseEntity&lt;&gt;(exceptionResponse, e.httpStatus);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27908512,"reputation":1,"user_id":21311196,"display_name":"brain-dot-isEmpty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1677754442,"creation_date":1677741265,"question_id":75612303,"body_markdown":"I have this code where I&#39;m supposed to return a customized error message and error code. It works fine but the problem is that it&#39;s extremely redundant. I was wondering if it&#39;s possible to handle all these custom exceptions with one @ExceptionHandler.\r\n\r\n```\r\n@ControllerAdvice\r\npublic class HandleExceptions {\r\n\r\n    @ExceptionHandler(value = CustomException1.class)\r\n    public ResponseEntity&lt;Object&gt; handleCustomException1(CustomException1 e) {\r\n        HttpStatus status = HttpStatus.NOT_FOUND;\r\n        DataResponse data = new DataResponse(&quot;custom status code for exception 1&quot;, e.getMessage());\r\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\r\n        return new ResponseEntity&lt;&gt;(ExceptionResponse, status);\r\n    }\r\n    \r\n    @ExceptionHandler(value = CustomException2.class)\r\n    public ResponseEntity&lt;Object&gt; handleCustomException2(CustomException2 e) {\r\n        HttpStatus status = HttpStatus.NOT_FOUND;\r\n        DataResponse data = new DataResponse(&quot;custom status code for exception 2&quot;, e.getMessage());\r\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\r\n        return new ResponseEntity&lt;&gt;(ExceptionResponse, status);\r\n    }\r\n    \r\n    @ExceptionHandler(value = CustomException3.class)\r\n    public ResponseEntity&lt;Object&gt; handleCustomException3(CustomException3 e) {\r\n        HttpStatus status = HttpStatus.BAD_REQUEST;\r\n        DataResponse data = new DataResponse(&quot;custom status code for exception 3&quot;, e.getMessage());\r\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\r\n        return new ResponseEntity&lt;&gt;(ExceptionResponse, status);\r\n    }\r\n\r\n``` \r\n```\r\n\r\npublic class ExceptionResponse {\r\n    private final DataResponse data;\r\n}\r\n\r\npublic class DataResponse {\r\n    private String statusCode;\r\n    private String message;\r\n}\r\n```\r\n\r\nThe custom error classes all look like this:\r\n\r\n```\r\npublic class CustomException extends RuntimeException{\r\n    public CustomException(String message){         \r\n        super(message);     \r\n    }\r\n}\r\n```\r\n\r\nAn example of the response would be:\r\n\r\n```\r\nData: {\r\n status: 1111,\r\n message: user not found \r\n} \r\n```","title":"Is it possible to handle multiple exceptions with one @ExceptionHandler in spring boot?","body":"<p>I have this code where I'm supposed to return a customized error message and error code. It works fine but the problem is that it's extremely redundant. I was wondering if it's possible to handle all these custom exceptions with one @ExceptionHandler.</p>\n<pre><code>@ControllerAdvice\npublic class HandleExceptions {\n\n    @ExceptionHandler(value = CustomException1.class)\n    public ResponseEntity&lt;Object&gt; handleCustomException1(CustomException1 e) {\n        HttpStatus status = HttpStatus.NOT_FOUND;\n        DataResponse data = new DataResponse(&quot;custom status code for exception 1&quot;, e.getMessage());\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\n        return new ResponseEntity&lt;&gt;(ExceptionResponse, status);\n    }\n    \n    @ExceptionHandler(value = CustomException2.class)\n    public ResponseEntity&lt;Object&gt; handleCustomException2(CustomException2 e) {\n        HttpStatus status = HttpStatus.NOT_FOUND;\n        DataResponse data = new DataResponse(&quot;custom status code for exception 2&quot;, e.getMessage());\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\n        return new ResponseEntity&lt;&gt;(ExceptionResponse, status);\n    }\n    \n    @ExceptionHandler(value = CustomException3.class)\n    public ResponseEntity&lt;Object&gt; handleCustomException3(CustomException3 e) {\n        HttpStatus status = HttpStatus.BAD_REQUEST;\n        DataResponse data = new DataResponse(&quot;custom status code for exception 3&quot;, e.getMessage());\n        ExceptionResponse exceptionResponse = new ExceptionResponse(data);\n        return new ResponseEntity&lt;&gt;(ExceptionResponse, status);\n    }\n\n</code></pre>\n<pre><code>\npublic class ExceptionResponse {\n    private final DataResponse data;\n}\n\npublic class DataResponse {\n    private String statusCode;\n    private String message;\n}\n</code></pre>\n<p>The custom error classes all look like this:</p>\n<pre><code>public class CustomException extends RuntimeException{\n    public CustomException(String message){         \n        super(message);     \n    }\n}\n</code></pre>\n<p>An example of the response would be:</p>\n<pre><code>Data: {\n status: 1111,\n message: user not found \n} \n</code></pre>\n"},{"tags":["java","spring","spring-boot","lucene","hibernate-search"],"answers":[{"tags":[],"owner":{"account_id":8974783,"reputation":9445,"user_id":6692043,"display_name":"yrodiere"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677659725,"creation_date":1677659725,"answer_id":75601253,"question_id":75538545,"body_markdown":"You probably forgot to update the association on both sides. When Hibernate indexes `TableDoc`, the `tableRows` association doesn&#39;t contain your new `TableRow` (yet), so even though Hibernate Search does reindex, the resulting document doesn&#39;t contain the new table row either.\r\n\r\nTry this:\r\n\r\n```\r\n  public TableRow create(TableRow tableRow) {\r\n    tableRow.getTableDoc().getTableRows().add(tableRow);\r\n    return tableRowRepository.save(tableRow);\r\n  }\r\n```\r\n\r\nSee also https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#limitations-changes-asymmetric-association-updates","title":"Hibernate search does not create index after some methods","body":"<p>You probably forgot to update the association on both sides. When Hibernate indexes <code>TableDoc</code>, the <code>tableRows</code> association doesn't contain your new <code>TableRow</code> (yet), so even though Hibernate Search does reindex, the resulting document doesn't contain the new table row either.</p>\n<p>Try this:</p>\n<pre><code>  public TableRow create(TableRow tableRow) {\n    tableRow.getTableDoc().getTableRows().add(tableRow);\n    return tableRowRepository.save(tableRow);\n  }\n</code></pre>\n<p>See also <a href=\"https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#limitations-changes-asymmetric-association-updates\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#limitations-changes-asymmetric-association-updates</a></p>\n"},{"tags":[],"owner":{"account_id":17629753,"reputation":89,"user_id":12794090,"display_name":"Martin Kršek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677754259,"creation_date":1677754259,"answer_id":75614441,"question_id":75538545,"body_markdown":"As @yrodiere commented and provided documentation link, it is needed to update both sides of a relationship. \r\n\r\nIt is now working with create method like this:\r\n```\r\n  public TableRow create(TableRow tableRow) {\r\n    TableDoc tableDoc = tableDocRepository.findById(tableRow.getTableDoc().getId())\r\n        .orElseThrow(() -&gt; new ObjectNotFoundException();\r\n    tableRow.setTableDoc(tableDoc);\r\n    return tableRowRepository.save(tableRow);\r\n  }\r\n``` ","title":"Hibernate search does not create index after some methods","body":"<p>As @yrodiere commented and provided documentation link, it is needed to update both sides of a relationship.</p>\n<p>It is now working with create method like this:</p>\n<pre><code>  public TableRow create(TableRow tableRow) {\n    TableDoc tableDoc = tableDocRepository.findById(tableRow.getTableDoc().getId())\n        .orElseThrow(() -&gt; new ObjectNotFoundException();\n    tableRow.setTableDoc(tableDoc);\n    return tableRowRepository.save(tableRow);\n  }\n</code></pre>\n"}],"owner":{"account_id":17629753,"reputation":89,"user_id":12794090,"display_name":"Martin Kršek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75614441,"answer_count":2,"score":0,"last_activity_date":1677754259,"creation_date":1677103000,"question_id":75538545,"body_markdown":"I have application with two objects, TableDoc and TableRow.\r\n```\r\n@Entity\r\n@Indexed\r\npublic class TableDoc{\r\n  @OneToMany(mappedBy = &quot;tableDoc&quot;, fetch = FetchType.LAZY)\r\n  @IndexedEmbedded\r\n  @JsonManagedReference\r\n  private Set&lt;TableRow&gt; tableRows = new HashSet&lt;&gt;();\r\n}\r\n```\r\n```\r\n@Entity\r\n@Indexed\r\npublic class TableRow{\r\n  @ManyToOne\r\n  @JoinColumn(name = &quot;table_id&quot;)\r\n  @JsonBackReference\r\n  private TableDoc tableDoc;\r\n\r\n  @FullTextField\r\n  @Column(name = &quot;cell_values&quot;)\r\n  private String cellValues;\r\n}\r\n```\r\n\r\nI am creating and appending new TableRow into TableDoc by this simplified method:\r\n```\r\n  public TableRow create(TableRow tableRow) {\r\n    return tableRowRepository.save(tableRow);\r\n  }\r\n```\r\nEverything is persisted correctly in database. For some reason, Hibernate search 6 with lucene does not index/reindex tableRow.cellValues when I create TableRow with create method above.\r\n\r\nI have to reindex whole application to be able to query by cellValues values. Also update does create index, only create is problematic. This is my update method:\r\n```\r\n  public TableRow update(String id, TableRow tableRow) {\r\n    TableRow tableRowToUpdate = tableRowRepository.findById(id)\r\n        .orElseThrow(() -&gt; new ObjectNotFoundException(&quot;TableRow&quot;, &quot;id&quot;, id));\r\n    tableRowToUpdate.setCellValues(tableRow.getCellValues());\r\n    return tableRowRepository.save(tableRowToUpdate);\r\n  }\r\n```\r\nBoth, update and create method do receive same object:\r\n```\r\n{\r\n &quot;tableDoc&quot;:{&quot;id&quot;:&quot;myLongTableDocId&quot;},\r\n &quot;cellValues&quot;:&quot;one&quot;\r\n}\r\n```\r\n","title":"Hibernate search does not create index after some methods","body":"<p>I have application with two objects, TableDoc and TableRow.</p>\n<pre><code>@Entity\n@Indexed\npublic class TableDoc{\n  @OneToMany(mappedBy = &quot;tableDoc&quot;, fetch = FetchType.LAZY)\n  @IndexedEmbedded\n  @JsonManagedReference\n  private Set&lt;TableRow&gt; tableRows = new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre><code>@Entity\n@Indexed\npublic class TableRow{\n  @ManyToOne\n  @JoinColumn(name = &quot;table_id&quot;)\n  @JsonBackReference\n  private TableDoc tableDoc;\n\n  @FullTextField\n  @Column(name = &quot;cell_values&quot;)\n  private String cellValues;\n}\n</code></pre>\n<p>I am creating and appending new TableRow into TableDoc by this simplified method:</p>\n<pre><code>  public TableRow create(TableRow tableRow) {\n    return tableRowRepository.save(tableRow);\n  }\n</code></pre>\n<p>Everything is persisted correctly in database. For some reason, Hibernate search 6 with lucene does not index/reindex tableRow.cellValues when I create TableRow with create method above.</p>\n<p>I have to reindex whole application to be able to query by cellValues values. Also update does create index, only create is problematic. This is my update method:</p>\n<pre><code>  public TableRow update(String id, TableRow tableRow) {\n    TableRow tableRowToUpdate = tableRowRepository.findById(id)\n        .orElseThrow(() -&gt; new ObjectNotFoundException(&quot;TableRow&quot;, &quot;id&quot;, id));\n    tableRowToUpdate.setCellValues(tableRow.getCellValues());\n    return tableRowRepository.save(tableRowToUpdate);\n  }\n</code></pre>\n<p>Both, update and create method do receive same object:</p>\n<pre><code>{\n &quot;tableDoc&quot;:{&quot;id&quot;:&quot;myLongTableDocId&quot;},\n &quot;cellValues&quot;:&quot;one&quot;\n}\n</code></pre>\n"},{"tags":["java","influxdb"],"answers":[{"tags":[],"owner":{"account_id":11267005,"reputation":101,"user_id":8263513,"display_name":"FreeCat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677753233,"creation_date":1677753233,"answer_id":75614239,"question_id":69128316,"body_markdown":"You have to use pivot() function to transform data into tabular form.\r\nPlease refer to [this][1].\r\n\r\n\r\n  [1]: https://github.com/influxdata/influxdb-client-java/issues/245","title":"InfluxDB FluxResultMapper not mapping by _fields","body":"<p>You have to use pivot() function to transform data into tabular form.\nPlease refer to <a href=\"https://github.com/influxdata/influxdb-client-java/issues/245\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}],"owner":{"account_id":2897670,"reputation":407,"user_id":2485062,"accept_rate":77,"display_name":"Xear"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677753233,"creation_date":1631256666,"question_id":69128316,"body_markdown":"I&#39;m trying to read measurements from the InfluxDB by using the `influxdb-client-java` and mapping the result to a POJO. Unfortunately I&#39;m struggeling with how the internal `FluxResultMapper` is working.\r\n\r\nConsidering the following measurement\r\n[![Sample measurment][1]][1]\r\n\r\nWhen using the `QueryApi` like this\r\n\r\n    queryApi.query(fluxQueryString, POJO.class,\r\n      (cancellable, fluxRecord) -&gt; {\r\n        LOG.info(&quot;progress: {}&quot;, fluxRecord.getProgress());\r\n      });\r\n\r\nThe method `FluxResultMapper::toPojo` should do the mapping. But the implementation of this method is just mapping tags like `jobId` or `identifier` or `_time` NOT the actual fields like `progress` which are values of `_field`\r\n\r\nDoesn&#39;t the implementation of `FluxResultMapper::toPojo` need something like this:\r\n\r\n    ...\r\n    Map&lt;String, Object&gt; recordValues = record.getValues();\r\n    String col = null;\r\n    if (recordValues.containsKey(columnName)) {\r\n      col = columnName;\r\n    } else if (recordValues.containsKey(&quot;_&quot; + columnName)) {\r\n      col = &quot;_&quot; + columnName;\r\n\r\n    // ISN&#39;T SOMETHING LIKE THIS MISSING ???\r\n    } else if (recordValues.containsKey(&quot;_field&quot;) &amp;&amp; \r\n      recordValues.get(&quot;_field&quot;).equals(columnName)) {\r\n      col = &quot;_value&quot;;\r\n    // END OF NEW\r\n\r\n    } else {\r\n      String columnNameInSnakeCase = this.camelCaseToSnakeCase(columnName);\r\n    if (recordValues.containsKey(columnNameInSnakeCase)) {\r\n      col = columnNameInSnakeCase;\r\n    }\r\n    ...\r\n\r\nOriginal code (of Version 3.1.0) can be found on [Github][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Crb4Y.png\r\n  [2]: https://github.com/influxdata/influxdb-client-java/blob/v3.1.0/client-core/src/main/java/com/influxdb/query/internal/FluxResultMapper.java\r\n\r\nAm I missing something or did I understand it entirely wrong? Any help is much appreciated. ","title":"InfluxDB FluxResultMapper not mapping by _fields","body":"<p>I'm trying to read measurements from the InfluxDB by using the <code>influxdb-client-java</code> and mapping the result to a POJO. Unfortunately I'm struggeling with how the internal <code>FluxResultMapper</code> is working.</p>\n<p>Considering the following measurement\n<a href=\"https://i.stack.imgur.com/Crb4Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Crb4Y.png\" alt=\"Sample measurment\" /></a></p>\n<p>When using the <code>QueryApi</code> like this</p>\n<pre><code>queryApi.query(fluxQueryString, POJO.class,\n  (cancellable, fluxRecord) -&gt; {\n    LOG.info(&quot;progress: {}&quot;, fluxRecord.getProgress());\n  });\n</code></pre>\n<p>The method <code>FluxResultMapper::toPojo</code> should do the mapping. But the implementation of this method is just mapping tags like <code>jobId</code> or <code>identifier</code> or <code>_time</code> NOT the actual fields like <code>progress</code> which are values of <code>_field</code></p>\n<p>Doesn't the implementation of <code>FluxResultMapper::toPojo</code> need something like this:</p>\n<pre><code>...\nMap&lt;String, Object&gt; recordValues = record.getValues();\nString col = null;\nif (recordValues.containsKey(columnName)) {\n  col = columnName;\n} else if (recordValues.containsKey(&quot;_&quot; + columnName)) {\n  col = &quot;_&quot; + columnName;\n\n// ISN'T SOMETHING LIKE THIS MISSING ???\n} else if (recordValues.containsKey(&quot;_field&quot;) &amp;&amp; \n  recordValues.get(&quot;_field&quot;).equals(columnName)) {\n  col = &quot;_value&quot;;\n// END OF NEW\n\n} else {\n  String columnNameInSnakeCase = this.camelCaseToSnakeCase(columnName);\nif (recordValues.containsKey(columnNameInSnakeCase)) {\n  col = columnNameInSnakeCase;\n}\n...\n</code></pre>\n<p>Original code (of Version 3.1.0) can be found on <a href=\"https://github.com/influxdata/influxdb-client-java/blob/v3.1.0/client-core/src/main/java/com/influxdb/query/internal/FluxResultMapper.java\" rel=\"nofollow noreferrer\">Github</a></p>\n<p>Am I missing something or did I understand it entirely wrong? Any help is much appreciated.</p>\n"},{"tags":["java","spring-boot","mssql-jdbc"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1676045121,"post_id":75412886,"comment_id":133064570,"body_markdown":"You are missing the port and database in your `spring.datasource.url`. Your param is also wrong. Please try with `jdbc:sqlserver://localhost:1433/db?encrypt=false`","body":"You are missing the port and database in your <code>spring.datasource.url</code>. Your param is also wrong. Please try with <code>jdbc:sqlserver:&#47;&#47;localhost:1433&#47;db?encrypt=false</code>"},{"owner":{"account_id":4136672,"reputation":417,"user_id":3393192,"accept_rate":75,"display_name":"Sheradil"},"score":0,"creation_date":1676046324,"post_id":75412886,"comment_id":133064955,"body_markdown":"Nope. That actually makes things worse. Then I get: &#39;Invalid port number:1433/db?encrypt=false&#39;. The seperator definitely is &#39;;&#39; instead of &#39;?&#39;. But even if I use the &#39;;&#39; in that place, I get: invalid port number: &#39;1433/db&#39;. And the port is optional, as 1433 is the standard port for MSSQL and should be used by default by the MSSQL driver","body":"Nope. That actually makes things worse. Then I get: &#39;Invalid port number:1433/db?encrypt=false&#39;. The seperator definitely is &#39;;&#39; instead of &#39;?&#39;. But even if I use the &#39;;&#39; in that place, I get: invalid port number: &#39;1433/db&#39;. And the port is optional, as 1433 is the standard port for MSSQL and should be used by default by the MSSQL driver"}],"answers":[{"tags":[],"owner":{"account_id":27085849,"reputation":291,"user_id":20634376,"display_name":"Georgii Vlasov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677753167,"creation_date":1677753167,"answer_id":75614218,"question_id":75412886,"body_markdown":"In the JPA Buddy discord channel, it&#39;s recommended to use:\r\nencrypt=true and trustServerCertificate=true\r\n\r\nHere is the reference: https://discord.com/channels/779011925748219934/995025376222920775/995963092359991317","title":"How to connect springboot with MSSQL Server using Hibernate","body":"<p>In the JPA Buddy discord channel, it's recommended to use:\nencrypt=true and trustServerCertificate=true</p>\n<p>Here is the reference: <a href=\"https://discord.com/channels/779011925748219934/995025376222920775/995963092359991317\" rel=\"nofollow noreferrer\">https://discord.com/channels/779011925748219934/995025376222920775/995963092359991317</a></p>\n"}],"owner":{"account_id":4136672,"reputation":417,"user_id":3393192,"accept_rate":75,"display_name":"Sheradil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677753167,"creation_date":1676041918,"question_id":75412886,"body_markdown":"I try to connect my Springboot application to my local MSSQL Server with hibernate. For now I&#39;ve set up a local ms sql server. I couldn&#39;t establish a connection to my database using IntelliJ CE and the JPA buddy. \r\n\r\nOn the net I found a guide that used IntelliJ UE. I installed the 30 day trial and with the ultimate version I could establish a connection with the database (using View-&gt;Tool Windows-&gt;Database, SSL is not enabled).\r\n [![IntelliJ Ultimate Database Screenshot][1]][1]\r\n\r\nEven though the URL is kinda messy with &quot;...server://./db&quot;. If I replace the &#39;//./&#39; with &#39;//localhost/&#39; it does not work anymore.\r\n\r\nNow, I soon won&#39;t have access to the ultimate version anymore. So, my question is: **How do I get the same behaviour with the JPA buddy and IntelliJ Community Edition?**\r\n\r\nI guess that it is related to the selected driver &#39;MS SQL Server -&gt;LocalDB&lt;-&#39;. \r\n\r\nWhen I use the following JPA settings, it does not work in the community version (it doesnt matter if I use the &#39;jtds&#39; driver or not):\r\n\r\n[![IntelliJ Community Database Screenshot][2]][2]\r\n\r\nIn both cases I get &quot;Error during login for the user &#39;dbuser&#39;&quot;. (The server is local and I don&#39;t have SSL enabled, therefore the &#39;;encrypt=false&#39;)\r\n\r\nI also tried to use the application.properties with the following content:\r\n\r\n    spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver\r\n    spring.datasource.url=jdbc:sqlserver://localhost;encrypt=false\r\n    spring.datasource.username=dbuser\r\n    spring.datasource.password=...\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\nBut this didn&#39;t work either.\r\nAny help is appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Iq3Jm.jpg\r\n  [2]: https://i.stack.imgur.com/Fg5fk.jpg","title":"How to connect springboot with MSSQL Server using Hibernate","body":"<p>I try to connect my Springboot application to my local MSSQL Server with hibernate. For now I've set up a local ms sql server. I couldn't establish a connection to my database using IntelliJ CE and the JPA buddy.</p>\n<p>On the net I found a guide that used IntelliJ UE. I installed the 30 day trial and with the ultimate version I could establish a connection with the database (using View-&gt;Tool Windows-&gt;Database, SSL is not enabled).\n<a href=\"https://i.stack.imgur.com/Iq3Jm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Iq3Jm.jpg\" alt=\"IntelliJ Ultimate Database Screenshot\" /></a></p>\n<p>Even though the URL is kinda messy with &quot;...server://./db&quot;. If I replace the '//./' with '//localhost/' it does not work anymore.</p>\n<p>Now, I soon won't have access to the ultimate version anymore. So, my question is: <strong>How do I get the same behaviour with the JPA buddy and IntelliJ Community Edition?</strong></p>\n<p>I guess that it is related to the selected driver 'MS SQL Server -&gt;LocalDB&lt;-'.</p>\n<p>When I use the following JPA settings, it does not work in the community version (it doesnt matter if I use the 'jtds' driver or not):</p>\n<p><a href=\"https://i.stack.imgur.com/Fg5fk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fg5fk.jpg\" alt=\"IntelliJ Community Database Screenshot\" /></a></p>\n<p>In both cases I get &quot;Error during login for the user 'dbuser'&quot;. (The server is local and I don't have SSL enabled, therefore the ';encrypt=false')</p>\n<p>I also tried to use the application.properties with the following content:</p>\n<pre><code>spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver\nspring.datasource.url=jdbc:sqlserver://localhost;encrypt=false\nspring.datasource.username=dbuser\nspring.datasource.password=...\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>But this didn't work either.\nAny help is appreciated.</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":8456658,"reputation":20415,"user_id":6343685,"accept_rate":60,"display_name":"Harshad Pansuriya"},"score":0,"creation_date":1464266122,"post_id":5291542,"comment_id":62420977,"body_markdown":"@Jon Egerton the link is disable change it.","body":"@Jon Egerton the link is disable change it."}],"tags":[],"owner":{"account_id":290516,"reputation":40771,"user_id":592111,"accept_rate":93,"display_name":"Jon Egerton"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1515001133,"creation_date":1300041994,"answer_id":5291542,"question_id":5291503,"body_markdown":"Here&#39;s an example android age calculation that you should be able to work from:\r\n\r\n        public int getAge (int _year, int _month, int _day) {\r\n                \r\n                GregorianCalendar cal = new GregorianCalendar();\r\n                int y, m, d, a;         \r\n\r\n                y = cal.get(Calendar.YEAR);\r\n                m = cal.get(Calendar.MONTH);\r\n                d = cal.get(Calendar.DAY_OF_MONTH);\r\n                cal.set(_year, _month, _day);\r\n                a = y - cal.get(Calendar.YEAR);\r\n                if ((m &lt; cal.get(Calendar.MONTH))\r\n                                || ((m == cal.get(Calendar.MONTH)) &amp;&amp; (d &lt; cal\r\n                                                .get(Calendar.DAY_OF_MONTH)))) {\r\n                        --a;\r\n                }\r\n                if(a &lt; 0)\r\n                        throw new IllegalArgumentException(&quot;Age &lt; 0&quot;);\r\n                return a;\r\n        }\r\n\r\n  [1]: http://www.androidsnippets.com/calculate-age","title":"How to create method for age calculation method in android","body":"<p>Here's an example android age calculation that you should be able to work from:</p>\n\n<pre><code>    public int getAge (int _year, int _month, int _day) {\n\n            GregorianCalendar cal = new GregorianCalendar();\n            int y, m, d, a;         \n\n            y = cal.get(Calendar.YEAR);\n            m = cal.get(Calendar.MONTH);\n            d = cal.get(Calendar.DAY_OF_MONTH);\n            cal.set(_year, _month, _day);\n            a = y - cal.get(Calendar.YEAR);\n            if ((m &lt; cal.get(Calendar.MONTH))\n                            || ((m == cal.get(Calendar.MONTH)) &amp;&amp; (d &lt; cal\n                                            .get(Calendar.DAY_OF_MONTH)))) {\n                    --a;\n            }\n            if(a &lt; 0)\n                    throw new IllegalArgumentException(\"Age &lt; 0\");\n            return a;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":325468,"reputation":209,"user_id":646662,"accept_rate":67,"display_name":"Heba"},"score":0,"creation_date":1300172180,"post_id":5307965,"comment_id":5987496,"body_markdown":"I used a DatePicker to get DOB,too, but I convert it to string in order to store it in the database (SQLite), and every time I need the age for calculation I return the dob as an argument, so I add the substring method to get the year, month and day.","body":"I used a DatePicker to get DOB,too, but I convert it to string in order to store it in the database (SQLite), and every time I need the age for calculation I return the dob as an argument, so I add the substring method to get the year, month and day."},{"owner":{"account_id":263738,"reputation":1868,"user_id":549510,"accept_rate":89,"display_name":"Kingsolmn"},"score":0,"creation_date":1300206413,"post_id":5307965,"comment_id":5995697,"body_markdown":"I built this solution using bits and pieces of answers on SO, I believe the `Calendar.DAY_OF_YEAR` came from a answer that pointed to www.coderanch.com. Enjoy!","body":"I built this solution using bits and pieces of answers on SO, I believe the <code>Calendar.DAY_OF_YEAR</code> came from a answer that pointed to www.coderanch.com. Enjoy!"},{"owner":{"account_id":2193082,"reputation":8094,"user_id":1939564,"display_name":"Muhammad Babar"},"score":0,"creation_date":1365503302,"post_id":5307965,"comment_id":22640997,"body_markdown":"@Kingsolmn im sorry to say but your algo is wrong,your are not checking the month case","body":"@Kingsolmn im sorry to say but your algo is wrong,your are not checking the month case"},{"owner":{"account_id":263738,"reputation":1868,"user_id":549510,"accept_rate":89,"display_name":"Kingsolmn"},"score":0,"creation_date":1371306907,"post_id":5307965,"comment_id":24779806,"body_markdown":"@MuhammadBabar how do you mean?","body":"@MuhammadBabar how do you mean?"},{"owner":{"account_id":2193082,"reputation":8094,"user_id":1939564,"display_name":"Muhammad Babar"},"score":0,"creation_date":1371449604,"post_id":5307965,"comment_id":24808736,"body_markdown":"your solutions fails when current month is equals to d.o.b month  but current day is less than d.o.b day, please see my answer below","body":"your solutions fails when current month is equals to d.o.b month  but current day is less than d.o.b day, please see my answer below"},{"owner":{"account_id":263738,"reputation":1868,"user_id":549510,"accept_rate":89,"display_name":"Kingsolmn"},"score":1,"creation_date":1371480245,"post_id":5307965,"comment_id":24824608,"body_markdown":"Ok, I get what you&#39;re saying now. However, the case you are describing is why I opted to use the `Calendar.DAY_OF_YEAR` field. Just a different approach to the same solution is all. The best approach should be determined, in part, by the implementation. That and personal preference and style.","body":"Ok, I get what you&#39;re saying now. However, the case you are describing is why I opted to use the <code>Calendar.DAY_OF_YEAR</code> field. Just a different approach to the same solution is all. The best approach should be determined, in part, by the implementation. That and personal preference and style."},{"owner":{"account_id":1797706,"reputation":573,"user_id":1636758,"accept_rate":89,"display_name":"Mahesh Kavathiya"},"score":1,"creation_date":1481092929,"post_id":5307965,"comment_id":69229532,"body_markdown":"Not working for this date : 27-11-1989 , I am getting 26 year but actually i am 27 year old","body":"Not working for this date : 27-11-1989 , I am getting 26 year but actually i am 27 year old"}],"tags":[],"owner":{"account_id":263738,"reputation":1868,"user_id":549510,"accept_rate":89,"display_name":"Kingsolmn"},"comment_count":7,"down_vote_count":2,"up_vote_count":55,"is_accepted":true,"score":53,"last_activity_date":1300168009,"creation_date":1300168009,"answer_id":5307965,"question_id":5291503,"body_markdown":"Here is my solution to the problem:\r\n\r\n\t/**\r\n\t * Method to extract the user&#39;s age from the entered Date of Birth.\r\n\t * \r\n\t * @param DoB String The user&#39;s date of birth.\r\n\t * \r\n\t * @return ageS String The user&#39;s age in years based on the supplied DoB.\r\n\t */\r\n\tprivate String getAge(int year, int month, int day){\r\n\t\tCalendar dob = Calendar.getInstance();\r\n\t\tCalendar today = Calendar.getInstance();\r\n\r\n\t\tdob.set(year, month, day); \r\n\r\n\t\tint age = today.get(Calendar.YEAR) - dob.get(Calendar.YEAR);\r\n\r\n\t\tif (today.get(Calendar.DAY_OF_YEAR) &lt; dob.get(Calendar.DAY_OF_YEAR)){\r\n\t\t\tage--; \r\n\t\t}\r\n\r\n\t\tInteger ageInt = new Integer(age);\r\n\t\tString ageS = ageInt.toString();\r\n\r\n\t\treturn ageS;  \r\n\t}\r\n\r\nI used a [DatePicker][1] to get the input values required here. This method, together with the date picker, is specifically to get the user&#39;s DoB and calculate their age. A slight modification can be made to allow for String input(s) of the user&#39;s DoB, depending upon your specific implementation. The return type of String is for updating a TextView, a slight mod can be made to allow for type `int` output also.\r\n\r\n\r\n  [1]: http://developer.android.com/resources/tutorials/views/hello-datepicker.html","title":"How to create method for age calculation method in android","body":"<p>Here is my solution to the problem:</p>\n\n<pre><code>/**\n * Method to extract the user's age from the entered Date of Birth.\n * \n * @param DoB String The user's date of birth.\n * \n * @return ageS String The user's age in years based on the supplied DoB.\n */\nprivate String getAge(int year, int month, int day){\n    Calendar dob = Calendar.getInstance();\n    Calendar today = Calendar.getInstance();\n\n    dob.set(year, month, day); \n\n    int age = today.get(Calendar.YEAR) - dob.get(Calendar.YEAR);\n\n    if (today.get(Calendar.DAY_OF_YEAR) &lt; dob.get(Calendar.DAY_OF_YEAR)){\n        age--; \n    }\n\n    Integer ageInt = new Integer(age);\n    String ageS = ageInt.toString();\n\n    return ageS;  \n}\n</code></pre>\n\n<p>I used a <a href=\"http://developer.android.com/resources/tutorials/views/hello-datepicker.html\" rel=\"noreferrer\">DatePicker</a> to get the input values required here. This method, together with the date picker, is specifically to get the user's DoB and calculate their age. A slight modification can be made to allow for String input(s) of the user's DoB, depending upon your specific implementation. The return type of String is for updating a TextView, a slight mod can be made to allow for type <code>int</code> output also.</p>\n"},{"tags":[],"owner":{"account_id":2193082,"reputation":8094,"user_id":1939564,"display_name":"Muhammad Babar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365505425,"creation_date":1365505425,"answer_id":15900166,"question_id":5291503,"body_markdown":"Here is the fully tested and working code\r\n\r\nBelow is an example using date picker dialog\r\n\r\n    @Override\r\n    \tpublic void onDateSet(DatePicker view, int mBirthYear, int mMonthOfYear, int mDayOfMonth) \r\n    \t{\r\n    \t\t\tmAge = year - mBirthYear;\r\n    \t\t\t  \t\t\t\r\n    \t\t\tif( (mMonthOfYear == month &amp;&amp; day &lt; mDayOfMonth) || ( month &lt; mMonthOfYear) ) \r\n    \t\t\t{\r\n    \t\t\t\tmAge--;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tString years = getString(R.string.years);\r\n    \t\t\t\r\n    \t\t\tetAge.setText(mAge+years);\t\t\r\n    \t\t\r\n    \t}","title":"How to create method for age calculation method in android","body":"<p>Here is the fully tested and working code</p>\n\n<p>Below is an example using date picker dialog</p>\n\n<pre><code>@Override\n    public void onDateSet(DatePicker view, int mBirthYear, int mMonthOfYear, int mDayOfMonth) \n    {\n            mAge = year - mBirthYear;\n\n            if( (mMonthOfYear == month &amp;&amp; day &lt; mDayOfMonth) || ( month &lt; mMonthOfYear) ) \n            {\n                mAge--;\n            }\n\n            String years = getString(R.string.years);\n\n            etAge.setText(mAge+years);      \n\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1797706,"reputation":573,"user_id":1636758,"accept_rate":89,"display_name":"Mahesh Kavathiya"},"score":4,"creation_date":1481092872,"post_id":26311990,"comment_id":69229509,"body_markdown":"It&#39;s work fine...above all example are giving wrong age when you enter 27-11-1989, My age is 27 but it shows 26...","body":"It&#39;s work fine...above all example are giving wrong age when you enter 27-11-1989, My age is 27 but it shows 26..."},{"owner":{"account_id":11796382,"reputation":631,"user_id":8631006,"display_name":"Fahry Mohammed"},"score":1,"creation_date":1524809855,"post_id":26311990,"comment_id":87129072,"body_markdown":"Yes. other answers are wrong on current birth month. The age change affects once the only birth month over. But this code from the day.","body":"Yes. other answers are wrong on current birth month. The age change affects once the only birth month over. But this code from the day."},{"owner":{"account_id":11970579,"reputation":626,"user_id":8793928,"display_name":"Android Geek"},"score":0,"creation_date":1582535797,"post_id":26311990,"comment_id":106797333,"body_markdown":"this must be accepted answer...works perfectly even in current month bday too..all above answers doesnt give me accurate answer when bday is in current month.","body":"this must be accepted answer...works perfectly even in current month bday too..all above answers doesnt give me accurate answer when bday is in current month."}],"tags":[],"owner":{"account_id":3346968,"reputation":1224,"user_id":2811956,"accept_rate":80,"display_name":"W I Z A R D"},"comment_count":3,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1525331030,"creation_date":1413010685,"answer_id":26311990,"question_id":5291503,"body_markdown":"This works Perfectly.....\r\n\r\n    public int getAge(int DOByear, int DOBmonth, int DOBday) {\r\n    \r\n    \t\tint age;\r\n    \r\n    \t\tfinal Calendar calenderToday = Calendar.getInstance();\r\n    \t\tint currentYear = calenderToday.get(Calendar.YEAR);\r\n    \t\tint currentMonth = 1 + calenderToday.get(Calendar.MONTH);\r\n    \t\tint todayDay = calenderToday.get(Calendar.DAY_OF_MONTH);\r\n    \t\t\r\n    \t\tage = currentYear - DOByear;\r\n    \t\r\n    \t\tif(DOBmonth &gt; currentMonth) {\r\n    \t\t\t--age;\r\n    \t\t} else if(DOBmonth == currentMonth) {\r\n    \t\t\tif(DOBday &gt; todayDay){\r\n    \t\t\t\t--age;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn age;\r\n    \t}","title":"How to create method for age calculation method in android","body":"<p>This works Perfectly.....</p>\n\n<pre><code>public int getAge(int DOByear, int DOBmonth, int DOBday) {\n\n        int age;\n\n        final Calendar calenderToday = Calendar.getInstance();\n        int currentYear = calenderToday.get(Calendar.YEAR);\n        int currentMonth = 1 + calenderToday.get(Calendar.MONTH);\n        int todayDay = calenderToday.get(Calendar.DAY_OF_MONTH);\n\n        age = currentYear - DOByear;\n\n        if(DOBmonth &gt; currentMonth) {\n            --age;\n        } else if(DOBmonth == currentMonth) {\n            if(DOBday &gt; todayDay){\n                --age;\n            }\n        }\n        return age;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12186457,"reputation":1,"user_id":8896040,"display_name":"Shawn Triscari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509994854,"creation_date":1509994854,"answer_id":47143905,"question_id":5291503,"body_markdown":"None of the posted solutions worked for me. So, I worked my own logic and got this, which works 100% for me:\r\n\r\n    \r\n\r\n     Integer getAge(Integer year, Integer month, Integer day) {\r\n         Calendar dob = Calendar.getInstance();\r\n         Calendar today = Calendar.getInstance();\r\n\r\n         dob.set(year, month, day);\r\n         int age = today.get(Calendar.YEAR) - dob.get(Calendar.YEAR);\r\n\r\n         if(month == (today.get(Calendar.MONTH)+1) &amp;&amp; day &gt; today.get(Calendar.DAY_OF_MONTH)) {\r\n             age--;\r\n         }\r\n\r\n         return age;\r\n     }","title":"How to create method for age calculation method in android","body":"<p>None of the posted solutions worked for me. So, I worked my own logic and got this, which works 100% for me:</p>\n\n<pre><code> Integer getAge(Integer year, Integer month, Integer day) {\n     Calendar dob = Calendar.getInstance();\n     Calendar today = Calendar.getInstance();\n\n     dob.set(year, month, day);\n     int age = today.get(Calendar.YEAR) - dob.get(Calendar.YEAR);\n\n     if(month == (today.get(Calendar.MONTH)+1) &amp;&amp; day &gt; today.get(Calendar.DAY_OF_MONTH)) {\n         age--;\n     }\n\n     return age;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5876042,"reputation":3033,"user_id":4626826,"accept_rate":46,"display_name":"Vishwajit Palankar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519735309,"creation_date":1519735309,"answer_id":49008991,"question_id":5291503,"body_markdown":"The below will provide you age in the most accurate way possible\r\n\r\n    public static String getAgeFromLong(String birthday) {\r\n\r\n        SimpleDateFormat sdf= new SimpleDateFormat(&quot;ddMMyyyy&quot;,Locale.ENGLISH);\r\n        Calendar dobCal=Calendar.getInstance();\r\n        dobCal.setTime(sdf.parse(birthday));\r\n\r\n        Calendar diffCal = Calendar.getInstance();\r\n        diffCal.setTimeInMillis(Calendar.getInstance().getTimeInMillis() - dobCal.getInstance().getTimeInMillis());\r\n\r\n        String ageS = &quot;&quot;;\r\n\r\n        int age = diffCal.get(Calendar.YEAR) - 1970;\r\n        //Check if less than a year\r\n        if (age == 0) {\r\n            age = diffCal.get(Calendar.MONTH);\r\n            //Check if less than a month\r\n            if (age == 0) {\r\n                age = diffCal.get(Calendar.WEEK_OF_YEAR);\r\n                //Check if less than a week\r\n                if (age == 1) {\r\n                    age = diffCal.get(Calendar.DAY_OF_YEAR);\r\n                    ageS = (age - 1) + &quot; Days&quot;;\r\n                } else {\r\n                    ageS = (age - 1) + &quot; Weeks&quot;;\r\n                }\r\n            } else {\r\n                ageS = age + &quot; Months&quot;;\r\n            }\r\n        } else {\r\n            ageS = age + &quot; Years&quot;;\r\n        }\r\n\r\n        return ageS;\r\n    }","title":"How to create method for age calculation method in android","body":"<p>The below will provide you age in the most accurate way possible</p>\n\n<pre><code>public static String getAgeFromLong(String birthday) {\n\n    SimpleDateFormat sdf= new SimpleDateFormat(\"ddMMyyyy\",Locale.ENGLISH);\n    Calendar dobCal=Calendar.getInstance();\n    dobCal.setTime(sdf.parse(birthday));\n\n    Calendar diffCal = Calendar.getInstance();\n    diffCal.setTimeInMillis(Calendar.getInstance().getTimeInMillis() - dobCal.getInstance().getTimeInMillis());\n\n    String ageS = \"\";\n\n    int age = diffCal.get(Calendar.YEAR) - 1970;\n    //Check if less than a year\n    if (age == 0) {\n        age = diffCal.get(Calendar.MONTH);\n        //Check if less than a month\n        if (age == 0) {\n            age = diffCal.get(Calendar.WEEK_OF_YEAR);\n            //Check if less than a week\n            if (age == 1) {\n                age = diffCal.get(Calendar.DAY_OF_YEAR);\n                ageS = (age - 1) + \" Days\";\n            } else {\n                ageS = (age - 1) + \" Weeks\";\n            }\n        } else {\n            ageS = age + \" Months\";\n        }\n    } else {\n        ageS = age + \" Years\";\n    }\n\n    return ageS;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673000811,"creation_date":1673000811,"answer_id":75029721,"question_id":5291503,"body_markdown":"# *java.time*\r\n\r\nDue to the existence of a new(er) date and time library it is not recommended to use `java.util.Date` and `java.util.Calendar` anymore. The only exception should be a situation where you have to involve considerably large amounts of legacy code.\r\n\r\nSo… here is the modern way using `java.time` (Java 8+).\r\n\r\n**Java**\r\n```Java\r\npublic int getAge(int year, int month, int dayOfMonth) {\r\n\treturn Period.between(\r\n\t\t\t\tLocalDate.of(year, month, dayOfMonth),\r\n\t\t\t\tLocalDate.now()\r\n\t\t\t).getYears();\r\n}\r\n```\r\n\r\n**Kotlin**\r\n```lang-kotlin\r\nfun getAge(year: Int, month: Int, dayOfMonth: Int): Int {\r\n\treturn Period.between(\r\n\t\t\t\tLocalDate.of(year, month, dayOfMonth),\r\n\t\t\t\tLocalDate.now()\r\n\t\t\t).years\r\n}\r\n```\r\n\r\nBoth snippets need the following imports from `java.time`:\r\n\r\n```Java\r\nimport java.time.LocalDate;\r\nimport java.time.Period\r\n```\r\n\r\nSee also [Oracle Tutorial](https://docs.oracle.com/javase/tutorial/datetime/TOC.html).\r\n\r\nSince there&#39;s [API Desugaring](https://developer.android.com/studio/write/java8-support) in Android now, there&#39;s even no/little need for a backport like \r\n[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) which only supported API levels 26 and above in Android.\r\n\r\n\r\nAPI desugaring makes (a subset of) `java.time` directly available to API levels below 26 (well, not really down to version 1, but will do for most of the API levels that should be supported nowadays).","title":"How to create method for age calculation method in android","body":"<h1><em>java.time</em></h1>\n<p>Due to the existence of a new(er) date and time library it is not recommended to use <code>java.util.Date</code> and <code>java.util.Calendar</code> anymore. The only exception should be a situation where you have to involve considerably large amounts of legacy code.</p>\n<p>So… here is the modern way using <code>java.time</code> (Java 8+).</p>\n<p><strong>Java</strong></p>\n<pre><code>public int getAge(int year, int month, int dayOfMonth) {\n    return Period.between(\n                LocalDate.of(year, month, dayOfMonth),\n                LocalDate.now()\n            ).getYears();\n}\n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun getAge(year: Int, month: Int, dayOfMonth: Int): Int {\n    return Period.between(\n                LocalDate.of(year, month, dayOfMonth),\n                LocalDate.now()\n            ).years\n}\n</code></pre>\n<p>Both snippets need the following imports from <code>java.time</code>:</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.Period\n</code></pre>\n<p>See also <a href=\"https://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\">Oracle Tutorial</a>.</p>\n<p>Since there's <a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">API Desugaring</a> in Android now, there's even no/little need for a backport like\n<a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a> which only supported API levels 26 and above in Android.</p>\n<p>API desugaring makes (a subset of) <code>java.time</code> directly available to API levels below 26 (well, not really down to version 1, but will do for most of the API levels that should be supported nowadays).</p>\n"},{"tags":[],"owner":{"account_id":3816054,"reputation":181,"user_id":3165400,"display_name":"Artem_Iens"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677753154,"creation_date":1677049246,"answer_id":75529212,"question_id":5291503,"body_markdown":"Using [kotlinx-datetime][1] , also works for KMM.\r\n\r\nThe birthdate in ISO format: `2003-02-22`\r\n\r\n```kotlin\r\nfun calculateAgeFromBirthdate(birthdate: String): Int {\r\n    val birthdateParts = birthdate.split(&quot;-&quot;)\r\n    val birthYear = birthdateParts[0].toInt()\r\n    val birthMonth = birthdateParts[1].toInt()\r\n    val birthDay = birthdateParts[2].toInt()\r\n\r\n    val currentMoment = Clock.System.now()\r\n    val currentDate = currentMoment.toLocalDateTime(TimeZone.currentSystemDefault()).date\r\n    val currentYear = currentDate.year\r\n    val currentMonth = currentDate.monthNumber\r\n    val currentDay = currentDate.dayOfMonth\r\n\r\n    var age = currentYear - birthYear\r\n    if (currentMonth &lt; birthMonth || (currentMonth == birthMonth &amp;&amp; currentDay &lt; birthDay)) {\r\n        age--\r\n    }\r\n    return age\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://github.com/Kotlin/kotlinx-datetime","title":"How to create method for age calculation method in android","body":"<p>Using <a href=\"https://github.com/Kotlin/kotlinx-datetime\" rel=\"nofollow noreferrer\">kotlinx-datetime</a> , also works for KMM.</p>\n<p>The birthdate in ISO format: <code>2003-02-22</code></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun calculateAgeFromBirthdate(birthdate: String): Int {\n    val birthdateParts = birthdate.split(&quot;-&quot;)\n    val birthYear = birthdateParts[0].toInt()\n    val birthMonth = birthdateParts[1].toInt()\n    val birthDay = birthdateParts[2].toInt()\n\n    val currentMoment = Clock.System.now()\n    val currentDate = currentMoment.toLocalDateTime(TimeZone.currentSystemDefault()).date\n    val currentYear = currentDate.year\n    val currentMonth = currentDate.monthNumber\n    val currentDay = currentDate.dayOfMonth\n\n    var age = currentYear - birthYear\n    if (currentMonth &lt; birthMonth || (currentMonth == birthMonth &amp;&amp; currentDay &lt; birthDay)) {\n        age--\n    }\n    return age\n}\n</code></pre>\n"}],"owner":{"account_id":325468,"reputation":209,"user_id":646662,"accept_rate":67,"display_name":"Heba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28378,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":5307965,"answer_count":8,"score":17,"last_activity_date":1677753154,"creation_date":1300041592,"question_id":5291503,"body_markdown":"I want to write a method to calculate the age from the birth date, is the logic correct and how to write it in android Java:\r\n\r\n\r\n    public int calculateAge(String birthday){ \r\n     // consider that birthday format is ddmmyyyy;\r\n\r\n     String today = SystemDate(ddmmyyyy);\r\n     int bDay = birthday(1,2).toInteger;\r\n     int bMonth = birthday(3,4).toInteger;\r\n     int bYear = birhtday(5,8).toInteger;\r\n\r\n     int tDay = today(1,2).toInteger;\r\n     int tMonth = today(3,4).toInteger;\r\n     int tYear = today(5,8).toInteger;\r\n  \r\n     if (tMonth == bMonth){\r\n         if (tday&gt;= bDay){ \r\n            age = tYear - bYear;\r\n          else \r\n            age = tYear - bYear - 1;}\r\n     else\r\n       if (tMonth &gt; bMonth) {\r\n           age = tYear - bYear;\r\n       else \r\n           age = tYear - bYear - 1;}\r\n     }\r\n     return age;\r\n    }\r\n \r\n\r\n\r\n\r\n","title":"How to create method for age calculation method in android","body":"<p>I want to write a method to calculate the age from the birth date, is the logic correct and how to write it in android Java:</p>\n\n<pre><code>public int calculateAge(String birthday){ \n // consider that birthday format is ddmmyyyy;\n\n String today = SystemDate(ddmmyyyy);\n int bDay = birthday(1,2).toInteger;\n int bMonth = birthday(3,4).toInteger;\n int bYear = birhtday(5,8).toInteger;\n\n int tDay = today(1,2).toInteger;\n int tMonth = today(3,4).toInteger;\n int tYear = today(5,8).toInteger;\n\n if (tMonth == bMonth){\n     if (tday&gt;= bDay){ \n        age = tYear - bYear;\n      else \n        age = tYear - bYear - 1;}\n else\n   if (tMonth &gt; bMonth) {\n       age = tYear - bYear;\n   else \n       age = tYear - bYear - 1;}\n }\n return age;\n}\n</code></pre>\n"},{"tags":["java","image","opencv","crop"],"comments":[{"owner":{"account_id":17033694,"reputation":4572,"user_id":12323248,"display_name":"akuzminykh"},"score":0,"creation_date":1609095126,"post_id":65469133,"comment_id":115746998,"body_markdown":"What image format is that?","body":"What image format is that?"},{"owner":{"account_id":18688943,"reputation":2332,"user_id":13623742,"display_name":"Charlie Armstrong"},"score":1,"creation_date":1609095994,"post_id":65469133,"comment_id":115747234,"body_markdown":"Typically the transparency is stored in the alpha channel, if the image format supports that.  You can try using `Color c = new Color(255, 255, 255, 0);`.  Keep in mind that 1) Only some image formats support an alpha channel and 2) Programs reading the image file are free to interpret the alpha channel in any way they choose, so some may use it for a bump map or something.  There&#39;s no sure fire way to make something transparent.","body":"Typically the transparency is stored in the alpha channel, if the image format supports that.  You can try using <code>Color c = new Color(255, 255, 255, 0);</code>.  Keep in mind that 1) Only some image formats support an alpha channel and 2) Programs reading the image file are free to interpret the alpha channel in any way they choose, so some may use it for a bump map or something.  There&#39;s no sure fire way to make something transparent."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1609106532,"creation_date":1609099188,"answer_id":65469901,"question_id":65469133,"body_markdown":"Try this.  This will paint the image on the screen inside a circle.  If you want to create a new image, get the Graphics context from a `BufferedImage` and write the image to that instead of the graphics context in `paintComponent`. Any image format will work as this does not rely on any transparency mode of the graphics image.\r\n\r\nThe main idea behind this is setting the `clip region` to that of a circle.  Then whatever you paint will only appear in that region.\r\n\r\nIn this example, I made the diameter of the circle the minimum of the width and height of the image.  This way, the entire circle will fit in a rectangle.  \r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.Image;\r\nimport java.awt.RenderingHints;\r\nimport java.awt.geom.Ellipse2D;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.SwingUtilities;\r\n\r\n\r\n\r\npublic class ImageInCircle extends JPanel {\r\n\tJFrame f = new JFrame();\r\n\tImage img;\r\n\tint width;\r\n\tint height;\r\n\tstatic String imgFile =\r\n\t         &quot;location/of/image/img.gif&quot;;\r\n\r\n\t  \r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSwingUtilities.invokeLater(()-&gt;new ImageInCircle().start());\r\n\t\t  \r\n\t}\r\n\t@Override\r\n\tpublic Dimension getPreferredSize() {\r\n\t\t return new Dimension(width, height);\r\n\t}\r\n\tpublic ImageInCircle () {\r\n\t\tf.add(this);\r\n\t\tf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\r\n\t}\r\n\tpublic void start() {\r\n\t\ttry {\r\n\t\timg = ImageIO.read(new File(imgFile));\r\n\t\t} catch (IOException fne) {\r\n\t\t\tfne.printStackTrace();\r\n\t\t}\r\n\t\twidth = img.getWidth(null);\r\n\t\theight = img.getHeight(null);\r\n\t\trevalidate();\r\n\t\tf.setVisible(true);\r\n\t\tf.pack();\r\n\r\n\t\tf.setLocationRelativeTo(null);\r\n\t\trepaint(); \r\n\t}\r\n\t\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\t super.paintComponent(g);\r\n\t\t  setBackground(Color.white);\r\n\t\t  Graphics2D g2 = (Graphics2D) g;\r\n\r\n\t\t  g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n\t\t        RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t  int circleDiameter = Math.min(width,height);\r\n\t\t  Ellipse2D.Double circle = new Ellipse2D.Double(0,0,circleDiameter,circleDiameter);\r\n\t      g2.setClip(circle);\r\n\t\t  g2.drawImage(img,0,0,this);\r\n\t}\r\n\t\t\r\n\t  \r\n}\r\n","title":"How to crop an image into a circle with java?","body":"<p>Try this.  This will paint the image on the screen inside a circle.  If you want to create a new image, get the Graphics context from a <code>BufferedImage</code> and write the image to that instead of the graphics context in <code>paintComponent</code>. Any image format will work as this does not rely on any transparency mode of the graphics image.</p>\n<p>The main idea behind this is setting the <code>clip region</code> to that of a circle.  Then whatever you paint will only appear in that region.</p>\n<p>In this example, I made the diameter of the circle the minimum of the width and height of the image.  This way, the entire circle will fit in a rectangle.</p>\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.RenderingHints;\nimport java.awt.geom.Ellipse2D;\nimport java.io.File;\nimport java.io.IOException;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\n\n\npublic class ImageInCircle extends JPanel {\n    JFrame f = new JFrame();\n    Image img;\n    int width;\n    int height;\n    static String imgFile =\n             &quot;location/of/image/img.gif&quot;;\n\n      \n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(()-&gt;new ImageInCircle().start());\n          \n    }\n    @Override\n    public Dimension getPreferredSize() {\n         return new Dimension(width, height);\n    }\n    public ImageInCircle () {\n        f.add(this);\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n    }\n    public void start() {\n        try {\n        img = ImageIO.read(new File(imgFile));\n        } catch (IOException fne) {\n            fne.printStackTrace();\n        }\n        width = img.getWidth(null);\n        height = img.getHeight(null);\n        revalidate();\n        f.setVisible(true);\n        f.pack();\n\n        f.setLocationRelativeTo(null);\n        repaint(); \n    }\n    \n    public void paintComponent(Graphics g) {\n         super.paintComponent(g);\n          setBackground(Color.white);\n          Graphics2D g2 = (Graphics2D) g;\n\n          g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n          int circleDiameter = Math.min(width,height);\n          Ellipse2D.Double circle = new Ellipse2D.Double(0,0,circleDiameter,circleDiameter);\n          g2.setClip(circle);\n          g2.drawImage(img,0,0,this);\n    }\n        \n      \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16965497,"reputation":332,"user_id":12271495,"display_name":"Jan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677753141,"creation_date":1677753141,"answer_id":75614208,"question_id":65469133,"body_markdown":"If you want to crop the image and save as new image, then you can do this:\r\n\r\n```java\r\nimport javax.imageio.ImageIO;\r\nimport java.awt.*;\r\nimport java.awt.geom.Ellipse2D;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\npublic class ImageInCircle {\r\n    Image img;\r\n    public void cropImageIntoCircle(String imgFile) {\r\n        try {\r\n            img = ImageIO.read(new File(imgFile));\r\n        } catch (IOException fne) {\r\n            fne.printStackTrace();\r\n        }\r\n        int width = img.getWidth(null);\r\n        int height = img.getHeight(null);\r\n\r\n        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\r\n        Graphics2D g2 = bi.createGraphics();\r\n\r\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n                RenderingHints.VALUE_ANTIALIAS_ON);\r\n        int circleDiameter = Math.min(width,height);\r\n        Ellipse2D.Double circle = new Ellipse2D.Double(0,0,circleDiameter,circleDiameter);\r\n        g2.setClip(circle);\r\n        g2.drawImage(img,0,0,null);\r\n        try {\r\n            ImageIO.write(bi, &quot;PNG&quot;, new File(&quot;assets/&quot; + imgFile.substring(0, imgFile.lastIndexOf(&quot;.&quot;)) + &quot;.png&quot;));\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSimilar to @WJS solution, but just a tweak on saving the image","title":"How to crop an image into a circle with java?","body":"<p>If you want to crop the image and save as new image, then you can do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.imageio.ImageIO;\nimport java.awt.*;\nimport java.awt.geom.Ellipse2D;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class ImageInCircle {\n    Image img;\n    public void cropImageIntoCircle(String imgFile) {\n        try {\n            img = ImageIO.read(new File(imgFile));\n        } catch (IOException fne) {\n            fne.printStackTrace();\n        }\n        int width = img.getWidth(null);\n        int height = img.getHeight(null);\n\n        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g2 = bi.createGraphics();\n\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n        int circleDiameter = Math.min(width,height);\n        Ellipse2D.Double circle = new Ellipse2D.Double(0,0,circleDiameter,circleDiameter);\n        g2.setClip(circle);\n        g2.drawImage(img,0,0,null);\n        try {\n            ImageIO.write(bi, &quot;PNG&quot;, new File(&quot;assets/&quot; + imgFile.substring(0, imgFile.lastIndexOf(&quot;.&quot;)) + &quot;.png&quot;));\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>Similar to @WJS solution, but just a tweak on saving the image</p>\n"}],"owner":{"account_id":20310329,"reputation":11,"user_id":14897571,"display_name":"Sofia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":905,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":65469901,"answer_count":2,"score":0,"last_activity_date":1677753141,"creation_date":1609093897,"question_id":65469133,"body_markdown":"I really need some help with that. \r\nI&#39;m trying to crop an image into a circle and it&#39;s fine but the pixels outside the circle stay white. How can I put them transparent?\r\n\r\nMy code it&#39;s:\r\n\r\n    static ColorImage Circulo(ColorImage img, int radius) {\r\n\t\tfor (int x=0; x &lt; img.getWidth(); x++ ) {\r\n\t\t\t\tfor(int y=0; y &lt; img.getHeight(); y++) {\r\n\t\t\t\t\tif((x - (img.getWidth()/2)) * (x - (img.getWidth()/2)) + (y - (img.getHeight()/2) )* (y - (img.getHeight()/2)) &lt;= (radius*radius)) {\r\n\t\t\t\t\t\timg.setColor(x, y, img.getColor(x, y));\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tColor c = new Color (255, 255, 255);\r\n\t\t\t\t\t\timg.setColor(x, y, c );\t\t\r\n\t\t\t\t\t}\r\n\t\t\t     }\r\n\t\t\t}\r\n\t\t\treturn img;\r\n\t\t}\r\n\r\n","title":"How to crop an image into a circle with java?","body":"<p>I really need some help with that.\nI'm trying to crop an image into a circle and it's fine but the pixels outside the circle stay white. How can I put them transparent?</p>\n<p>My code it's:</p>\n<pre><code>static ColorImage Circulo(ColorImage img, int radius) {\n    for (int x=0; x &lt; img.getWidth(); x++ ) {\n            for(int y=0; y &lt; img.getHeight(); y++) {\n                if((x - (img.getWidth()/2)) * (x - (img.getWidth()/2)) + (y - (img.getHeight()/2) )* (y - (img.getHeight()/2)) &lt;= (radius*radius)) {\n                    img.setColor(x, y, img.getColor(x, y));\n                }else {\n                    Color c = new Color (255, 255, 255);\n                    img.setColor(x, y, c );     \n                }\n             }\n        }\n        return img;\n    }\n</code></pre>\n"},{"tags":["java","sftp","edtftpj"],"answers":[{"comments":[{"owner":{"account_id":5876005,"reputation":27,"user_id":4626801,"display_name":"Ramya Murugesan"},"score":0,"creation_date":1582898771,"post_id":60451413,"comment_id":106945845,"body_markdown":"Your are explicitly setting the original timestamp after the upload.that is fine . But I am asking with the explicit setting is there any method or parameter that will setup the client to stick with original timestamp for all the upload files for current connection","body":"Your are explicitly setting the original timestamp after the upload.that is fine . But I am asking with the explicit setting is there any method or parameter that will setup the client to stick with original timestamp for all the upload files for current connection"},{"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1582901151,"post_id":60451413,"comment_id":106947144,"body_markdown":"I do not think so. Even if it where, it would internally do the same.","body":"I do not think so. Even if it where, it would internally do the same."}],"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582891657,"creation_date":1582891657,"answer_id":60451413,"question_id":60451215,"body_markdown":"Call [`SSHFTPClient.setModTime`](https://enterprisedt.com/products/edtftpjssl/doc/api/com/enterprisedt/net/ftp/ssh/SSHFTPClient.html#setModTime-java.lang.String-java.util.Date-) after the upload.\r\n\r\n\r\n```\r\nsshFtpClient.setModTime(remotePath, new Date(new File(localPath).lastModified());\r\n```\r\n\r\n","title":"Preserving modified timestamp of file while uploading to SFTP","body":"<p>Call <a href=\"https://enterprisedt.com/products/edtftpjssl/doc/api/com/enterprisedt/net/ftp/ssh/SSHFTPClient.html#setModTime-java.lang.String-java.util.Date-\" rel=\"nofollow noreferrer\"><code>SSHFTPClient.setModTime</code></a> after the upload.</p>\n\n<pre><code>sshFtpClient.setModTime(remotePath, new Date(new File(localPath).lastModified());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677752940,"creation_date":1582900226,"answer_id":60453774,"question_id":60451215,"body_markdown":"&gt; Let me know if there is any way. \r\n\r\nThere is no way to preserve the timestamps while transferring the file.  The SFTP protocol does not allow it.\r\n\r\nThe SFTP wire protocol specification documents were never completed and ratified, but the most recent draft (for version 6 of the protocol) is [draft-ietf-secsh-filexfer-13][1].\r\n\r\nIf you look at Section 8.1 and 8.2, you will see that the client requests for opening a file (`SSH_FXP_OPEN`) and writing a file (`SSH_FXP_WRITE`) do not pass any time-stamp information from the client to the server.  Since the request doesn&#39;t pass timestamps, they cannot be preserved in the transfer.\r\n\r\nIf you want to &quot;preserve&quot; the timestamp, the protocol document says that the client needs to send an `SSH_FXP_SETSTAT` or `SSH_FXP_FSETSTAT` request to update the relevant file attributes.\r\n\r\n[Martin&#39;s Answer][2] has code for doing this using the `SSHFTPClient` library.\r\n\r\nI have not checked, but I am confident that this applies to the earlier versions of the SFTP protocol as well.\r\n\r\n  [1]: https://datatracker.ietf.org/doc/html/draft-ietf-secsh-filexfer-13\r\n  [2]: https://stackoverflow.com/a/60451413/139985","title":"Preserving modified timestamp of file while uploading to SFTP","body":"<blockquote>\n<p>Let me know if there is any way.</p>\n</blockquote>\n<p>There is no way to preserve the timestamps while transferring the file.  The SFTP protocol does not allow it.</p>\n<p>The SFTP wire protocol specification documents were never completed and ratified, but the most recent draft (for version 6 of the protocol) is <a href=\"https://datatracker.ietf.org/doc/html/draft-ietf-secsh-filexfer-13\" rel=\"nofollow noreferrer\">draft-ietf-secsh-filexfer-13</a>.</p>\n<p>If you look at Section 8.1 and 8.2, you will see that the client requests for opening a file (<code>SSH_FXP_OPEN</code>) and writing a file (<code>SSH_FXP_WRITE</code>) do not pass any time-stamp information from the client to the server.  Since the request doesn't pass timestamps, they cannot be preserved in the transfer.</p>\n<p>If you want to &quot;preserve&quot; the timestamp, the protocol document says that the client needs to send an <code>SSH_FXP_SETSTAT</code> or <code>SSH_FXP_FSETSTAT</code> request to update the relevant file attributes.</p>\n<p><a href=\"https://stackoverflow.com/a/60451413/139985\">Martin's Answer</a> has code for doing this using the <code>SSHFTPClient</code> library.</p>\n<p>I have not checked, but I am confident that this applies to the earlier versions of the SFTP protocol as well.</p>\n"}],"owner":{"account_id":5876005,"reputation":27,"user_id":4626801,"display_name":"Ramya Murugesan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2290,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60451413,"answer_count":2,"score":1,"last_activity_date":1677752940,"creation_date":1582890886,"question_id":60451215,"body_markdown":"I need to preserve modified timestamp of my file while uploading it to SFTP site.\r\n\r\nI am using com.enterprisedt.net.ftp.ssh.SSHFTPclient for the transfer.\r\n \r\nPlease let me know if there is any way. \r\n","title":"Preserving modified timestamp of file while uploading to SFTP","body":"<p>I need to preserve modified timestamp of my file while uploading it to SFTP site.</p>\n\n<p>I am using com.enterprisedt.net.ftp.ssh.SSHFTPclient for the transfer.</p>\n\n<p>Please let me know if there is any way. </p>\n"},{"tags":["java","image","pdf","png","pdfbox"],"answers":[{"comments":[{"owner":{"account_id":196189,"reputation":2128,"user_id":439506,"accept_rate":28,"display_name":"Dhrumil Shah"},"score":0,"creation_date":1490698064,"post_id":35398054,"comment_id":73218360,"body_markdown":"I am getting this error.  -- fail --javax.imageio.IIOException: Unsupported Image Type","body":"I am getting this error.  -- fail --javax.imageio.IIOException: Unsupported Image Type"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1490701627,"post_id":35398054,"comment_id":73220695,"body_markdown":"@Dhrumil that would indicate that the type of image you use is not supported by the java image io classes, at least not without additional plugins.","body":"@Dhrumil that would indicate that the type of image you use is not supported by the java image io classes, at least not without additional plugins."},{"owner":{"account_id":196189,"reputation":2128,"user_id":439506,"accept_rate":28,"display_name":"Dhrumil Shah"},"score":0,"creation_date":1490872499,"post_id":35398054,"comment_id":73311673,"body_markdown":"I am getting this error for any type of images. like JPG,JPEG,PNG etc.. i am  getting same error with Apache PDFBox 2.0.5.. i have to moved to lower version of PDFBox and this issue is not coming. i am not sure why this issue is coming to new version.","body":"I am getting this error for any type of images. like JPG,JPEG,PNG etc.. i am  getting same error with Apache PDFBox 2.0.5.. i have to moved to lower version of PDFBox and this issue is not coming. i am not sure why this issue is coming to new version."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1490877373,"post_id":35398054,"comment_id":73315166,"body_markdown":"Please make that a stack overflow question in its own right and supply both your exact pivotal code and sample files to reproduce the issue.","body":"Please make that a stack overflow question in its own right and supply both your exact pivotal code and sample files to reproduce the issue."},{"owner":{"account_id":196189,"reputation":2128,"user_id":439506,"accept_rate":28,"display_name":"Dhrumil Shah"},"score":0,"creation_date":1493355086,"post_id":35398054,"comment_id":74390612,"body_markdown":"When i used older version of PDF box i am able to generate image in PDF. I am not sure what is the issue with latest version. i will post this issue to apache PDF issue tracker.","body":"When i used older version of PDF box i am able to generate image in PDF. I am not sure what is the issue with latest version. i will post this issue to apache PDF issue tracker."}],"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"comment_count":5,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1455484398,"creation_date":1455484398,"answer_id":35398054,"question_id":35397634,"body_markdown":"The issue is that you add a new page to the document\r\n\r\n    doc.addPage(new PDPage());\r\n\r\nbut then create a content stream for yet another new page which you don&#39;t add to the document:\r\n\r\n    PDPageContentStream contentStream = new PDPageContentStream(doc, new PDPage(), true, false);\r\n\r\nYou should create the content stream for the page you added to the document, e.g. like this:\r\n\r\n    PDDocument doc = null;\r\n    doc = new PDDocument();\r\n    PDPage page = new PDPage();\r\n    doc.addPage(page);\r\n    try{\r\n        BufferedImage awtImage = ImageIO.read( new File( &quot;c://temp//line_chart.png&quot; ) );\r\n        PDImageXObject  pdImageXObject = LosslessFactory.createFromImage(doc, awtImage);\r\n        PDPageContentStream contentStream = new PDPageContentStream(doc, page, true, false);\r\n        contentStream.drawImage(pdImageXObject, 200, 300, awtImage.getWidth() / 2, awtImage.getHeight() / 2);\r\n        contentStream.close();\r\n        doc.save( &quot;c://temp//pdf//PDF_image.pdf&quot; );\r\n        doc.close();\r\n    } catch (Exception io){\r\n        System.out.println(&quot; -- fail --&quot; + io);\r\n    }\r\n","title":"PDFBox v2 write PNG image to PDF file, getting empty file","body":"<p>The issue is that you add a new page to the document</p>\n\n<pre><code>doc.addPage(new PDPage());\n</code></pre>\n\n<p>but then create a content stream for yet another new page which you don't add to the document:</p>\n\n<pre><code>PDPageContentStream contentStream = new PDPageContentStream(doc, new PDPage(), true, false);\n</code></pre>\n\n<p>You should create the content stream for the page you added to the document, e.g. like this:</p>\n\n<pre><code>PDDocument doc = null;\ndoc = new PDDocument();\nPDPage page = new PDPage();\ndoc.addPage(page);\ntry{\n    BufferedImage awtImage = ImageIO.read( new File( \"c://temp//line_chart.png\" ) );\n    PDImageXObject  pdImageXObject = LosslessFactory.createFromImage(doc, awtImage);\n    PDPageContentStream contentStream = new PDPageContentStream(doc, page, true, false);\n    contentStream.drawImage(pdImageXObject, 200, 300, awtImage.getWidth() / 2, awtImage.getHeight() / 2);\n    contentStream.close();\n    doc.save( \"c://temp//pdf//PDF_image.pdf\" );\n    doc.close();\n} catch (Exception io){\n    System.out.println(\" -- fail --\" + io);\n}\n</code></pre>\n"}],"owner":{"account_id":6886346,"reputation":93,"user_id":5291275,"display_name":"Danny L."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10225,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":35398054,"answer_count":1,"score":5,"last_activity_date":1677752874,"creation_date":1455481926,"question_id":35397634,"body_markdown":"I&#39;m using PDFBox 2. Trying to write a PNG image file to new PDF file.\r\n\r\nI saw there was already an answer that mention it was fixed on PDFBox2:\r\nhttps://stackoverflow.com/questions/22317706/how-to-add-png-images-to-pdf-using-apache-pdfbox and \r\nhttps://issues.apache.org/jira/browse/PDFBOX-1990\r\n\r\nThis is my code:\r\n\r\n    package pdfProj;\r\n    \r\n    import java.awt.image.BufferedImage;\r\n    import java.io.File;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    \r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.pdmodel.PDPage;\r\n    import org.apache.pdfbox.pdmodel.PDPageContentStream;\r\n    import org.apache.pdfbox.pdmodel.graphics.image.LosslessFactory;\r\n    import org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject;\r\n    \r\n    public class b {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n        \tPDDocument doc = null;\r\n            doc = new PDDocument();        \r\n            doc.addPage(new PDPage());\r\n            try{\r\n            \tBufferedImage awtImage = ImageIO.read( new File( &quot;c://temp//line_chart.png&quot; ) );\r\n            \tPDImageXObject  pdImageXObject = LosslessFactory.createFromImage(doc, awtImage);\r\n     \t    \tPDPageContentStream contentStream = new PDPageContentStream(doc, new PDPage(), true, false);\r\n     \t        contentStream.drawImage(pdImageXObject, 200, 300, awtImage.getWidth() / 2, awtImage.getHeight() / 2);\r\n    \t            contentStream.close();\r\n    \t            doc.save( &quot;c://temp//pdf//PDF_image.pdf&quot; );\r\n               \tdoc.close();\r\n            } catch (Exception io){\r\n                System.out.println(&quot; -- fail --&quot; + io);\r\n            }\r\n    \r\n    \t}\r\n    }\r\n\r\nThere is no exception. Just getting an empty PDF file created.","title":"PDFBox v2 write PNG image to PDF file, getting empty file","body":"<p>I'm using PDFBox 2. Trying to write a PNG image file to new PDF file.</p>\n\n<p>I saw there was already an answer that mention it was fixed on PDFBox2:\n<a href=\"https://stackoverflow.com/questions/22317706/how-to-add-png-images-to-pdf-using-apache-pdfbox\">How to add .png images to pdf using Apache PDFBox</a> and \n<a href=\"https://issues.apache.org/jira/browse/PDFBOX-1990\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/PDFBOX-1990</a></p>\n\n<p>This is my code:</p>\n\n<pre><code>package pdfProj;\n\nimport java.awt.image.BufferedImage;\nimport java.io.File;\n\nimport javax.imageio.ImageIO;\n\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPage;\nimport org.apache.pdfbox.pdmodel.PDPageContentStream;\nimport org.apache.pdfbox.pdmodel.graphics.image.LosslessFactory;\nimport org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject;\n\npublic class b {\n\n    public static void main(String[] args) {\n        PDDocument doc = null;\n        doc = new PDDocument();        \n        doc.addPage(new PDPage());\n        try{\n            BufferedImage awtImage = ImageIO.read( new File( \"c://temp//line_chart.png\" ) );\n            PDImageXObject  pdImageXObject = LosslessFactory.createFromImage(doc, awtImage);\n            PDPageContentStream contentStream = new PDPageContentStream(doc, new PDPage(), true, false);\n            contentStream.drawImage(pdImageXObject, 200, 300, awtImage.getWidth() / 2, awtImage.getHeight() / 2);\n                contentStream.close();\n                doc.save( \"c://temp//pdf//PDF_image.pdf\" );\n            doc.close();\n        } catch (Exception io){\n            System.out.println(\" -- fail --\" + io);\n        }\n\n    }\n}\n</code></pre>\n\n<p>There is no exception. Just getting an empty PDF file created.</p>\n"},{"tags":["java","gradle","maven-bom"],"owner":{"account_id":13430029,"reputation":945,"user_id":9690114,"display_name":"RomanMitasov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677752675,"creation_date":1677752675,"question_id":75614127,"body_markdown":"Just playing with Gradle `java-library` plugin and noticed that I can do something like this\r\n\r\n```groovy\r\n// project :a\r\n\r\ndependencies {\r\n  // notice that I&#39;m using &#39;api&#39; here, not &#39;implementation&#39;\r\n  api platform(&#39;org.springframework.boot:spring-boot-dependencies:2.7.5&#39;)\r\n\r\n  // the following works as expected\r\n  implementation &#39;org.springframework.boot:spring-boot&#39;\r\n}\r\n\r\n// project :b\r\n\r\ndependencies {\r\n  implementation project(&#39;:a&#39;)\r\n\r\n  // and this works too!!!\r\n  implementation &#39;org.springframework.boot:spring-boot&#39;\r\n}\r\n\r\n```\r\n\r\nThe above example works completely the same as if I added `spring-boot-dependencies` artifact in `:b`\r\n\r\nIs it illegal? Or I&#39;ve just discovered new strange way of creating platform+lib artifacts for Gradle?","title":"Gradle java-library transitive api dependency for a platform (BOM) artifact","body":"<p>Just playing with Gradle <code>java-library</code> plugin and noticed that I can do something like this</p>\n<pre><code>// project :a\n\ndependencies {\n  // notice that I'm using 'api' here, not 'implementation'\n  api platform('org.springframework.boot:spring-boot-dependencies:2.7.5')\n\n  // the following works as expected\n  implementation 'org.springframework.boot:spring-boot'\n}\n\n// project :b\n\ndependencies {\n  implementation project(':a')\n\n  // and this works too!!!\n  implementation 'org.springframework.boot:spring-boot'\n}\n\n</code></pre>\n<p>The above example works completely the same as if I added <code>spring-boot-dependencies</code> artifact in <code>:b</code></p>\n<p>Is it illegal? Or I've just discovered new strange way of creating platform+lib artifacts for Gradle?</p>\n"},{"tags":["java","apache-commons-config"],"comments":[{"owner":{"account_id":2919487,"reputation":436,"user_id":2502066,"display_name":"Preetam Kumar"},"score":0,"creation_date":1470319186,"post_id":38769198,"comment_id":64910067,"body_markdown":"can you tell the version of the Commons-configuration jar are you using?","body":"can you tell the version of the Commons-configuration jar are you using?"}],"answers":[{"comments":[{"owner":{"account_id":2807267,"reputation":1120,"user_id":2414254,"accept_rate":74,"display_name":"Yunus Einsteinium"},"score":0,"creation_date":1471171481,"post_id":38941352,"comment_id":65237922,"body_markdown":"Then the big question is where to keep the properties file(the location should be relative path and sure that there will be no security issues with it) ?","body":"Then the big question is where to keep the properties file(the location should be relative path and sure that there will be no security issues with it) ?"}],"tags":[],"owner":{"account_id":938578,"reputation":5229,"user_id":4657798,"display_name":"Miloš Milivojević"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1471172036,"creation_date":1471170772,"answer_id":38941352,"question_id":38769198,"body_markdown":"You cannot save a configuration that points to a file within a JAR. Try using a configuration file that is located outside of your JAR and you&#39;ll see that auto-save option works correctly.\n\n**EDIT**\n\nYou can put the file both in a JAR and in the same relative path in one of the default locations. Here&#39;s what [the documentation][1] says.\n\n&gt; If you do not specify an absolute path, the file will be searched automatically in the following locations:\n&gt;\n&gt; - in the current directory\n&gt; - in the user home directory\n&gt; - in the classpath\n\nSo, if for instance you have a default properties file in you JAR, located at `conf/configuration.properties`, you can put the properties either in user&#39;s home directory under the same relative path - e.g. on Linux `/home/username/conf/configuration.properties` or in the same directory with your JAR file. Both should be secure enough.\n\n  [1]: https://commons.apache.org/proper/commons-configuration/userguide_v1.10/howto_properties.html#Properties_files","title":"Apache Commons Configuration Cant save","body":"<p>You cannot save a configuration that points to a file within a JAR. Try using a configuration file that is located outside of your JAR and you'll see that auto-save option works correctly.</p>\n<p><strong>EDIT</strong></p>\n<p>You can put the file both in a JAR and in the same relative path in one of the default locations. Here's what <a href=\"https://commons.apache.org/proper/commons-configuration/userguide_v1.10/howto_properties.html#Properties_files\" rel=\"nofollow noreferrer\">the documentation</a> says.</p>\n<blockquote>\n<p>If you do not specify an absolute path, the file will be searched automatically in the following locations:</p>\n<ul>\n<li>in the current directory</li>\n<li>in the user home directory</li>\n<li>in the classpath</li>\n</ul>\n</blockquote>\n<p>So, if for instance you have a default properties file in you JAR, located at <code>conf/configuration.properties</code>, you can put the properties either in user's home directory under the same relative path - e.g. on Linux <code>/home/username/conf/configuration.properties</code> or in the same directory with your JAR file. Both should be secure enough.</p>\n"},{"tags":[],"owner":{"account_id":16438960,"reputation":21,"user_id":11875847,"display_name":"kmat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677752667,"creation_date":1677752655,"answer_id":75614124,"question_id":38769198,"body_markdown":"That issue can be connected with inproper version of commons configuration. I had exactly same dependency in my pom and problems arose from it. What I&#39;ve done is included such dependencies instead\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-configuration2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nCommons-configuration2 uses commons-beanutils which is optional, that is why I&#39;ve\r\nalso included second dependency.\r\n\r\n","title":"Apache Commons Configuration Cant save","body":"<p>That issue can be connected with inproper version of commons configuration. I had exactly same dependency in my pom and problems arose from it. What I've done is included such dependencies instead</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-configuration2&lt;/artifactId&gt;\n        &lt;version&gt;2.8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\n        &lt;version&gt;1.9.3&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Commons-configuration2 uses commons-beanutils which is optional, that is why I've\nalso included second dependency.</p>\n"}],"owner":{"account_id":2807267,"reputation":1120,"user_id":2414254,"accept_rate":74,"display_name":"Yunus Einsteinium"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1964,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":38941352,"answer_count":2,"score":1,"last_activity_date":1677752667,"creation_date":1470318458,"question_id":38769198,"body_markdown":"I am using Apache Commons Configuration to keep some properties in a properties file located in a package `re/iprocu/coperativeerp/config/payment/configurations.properties`\r\n\r\n    private PropertiesConfiguration configs = new  PropertiesConfiguration(&quot;re/iprocu/coperativeerp/config/payment/configurations.properties&quot;);\r\n    configs.setAutoSave(true);\r\n    configs.setProperty(date.getYear()+&quot;-&quot;+date.getMonthValue()+&quot;-01&quot;, offsetMember);\r\n\r\nThe problem is when i run the above code i get the following error\r\n\r\n    Exception in thread &quot;JavaFX Application Thread&quot; org.apache.commons.configuration.ConfigurationRuntimeException: Failed to auto-save\r\n\tat org.apache.commons.configuration.AbstractFileConfiguration.possiblySave(AbstractFileConfiguration.java:753)\r\n\tat org.apache.commons.configuration.AbstractFileConfiguration.clearProperty(AbstractFileConfiguration.java:799)\r\n\tat org.apache.commons.configuration.AbstractConfiguration.setProperty(AbstractConfiguration.java:485)\r\n\tat org.apache.commons.configuration.AbstractFileConfiguration.setProperty(AbstractFileConfiguration.java:788)\r\n\r\n\r\n**Update**\r\n\r\nApache Commons Configuration V. 1.10 \r\n\r\nMaven dependency\r\n\r\n    &lt;dependency&gt;\r\n         &lt;groupId&gt;commons-configuration&lt;/groupId&gt;\r\n         &lt;artifactId&gt;commons-configuration&lt;/artifactId&gt;\r\n         &lt;version&gt;1.10&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Apache Commons Configuration Cant save","body":"<p>I am using Apache Commons Configuration to keep some properties in a properties file located in a package <code>re/iprocu/coperativeerp/config/payment/configurations.properties</code></p>\n\n<pre><code>private PropertiesConfiguration configs = new  PropertiesConfiguration(\"re/iprocu/coperativeerp/config/payment/configurations.properties\");\nconfigs.setAutoSave(true);\nconfigs.setProperty(date.getYear()+\"-\"+date.getMonthValue()+\"-01\", offsetMember);\n</code></pre>\n\n<p>The problem is when i run the above code i get the following error</p>\n\n<pre><code>Exception in thread \"JavaFX Application Thread\" org.apache.commons.configuration.ConfigurationRuntimeException: Failed to auto-save\nat org.apache.commons.configuration.AbstractFileConfiguration.possiblySave(AbstractFileConfiguration.java:753)\nat org.apache.commons.configuration.AbstractFileConfiguration.clearProperty(AbstractFileConfiguration.java:799)\nat org.apache.commons.configuration.AbstractConfiguration.setProperty(AbstractConfiguration.java:485)\nat org.apache.commons.configuration.AbstractFileConfiguration.setProperty(AbstractFileConfiguration.java:788)\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Apache Commons Configuration V. 1.10 </p>\n\n<p>Maven dependency</p>\n\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;commons-configuration&lt;/groupId&gt;\n     &lt;artifactId&gt;commons-configuration&lt;/artifactId&gt;\n     &lt;version&gt;1.10&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","android","zip","unzip"],"answers":[{"tags":[],"owner":{"account_id":24409604,"reputation":11,"user_id":18337295,"display_name":"Максим Белый"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677561910,"creation_date":1677561910,"answer_id":75588156,"question_id":75584749,"body_markdown":"In fact, it was because of the &quot;Deflate&quot; compression method. The file was over 4 GB a bit. And because of this, the compression method was Deflate+Store. That it was impossible to process normally. As I understand it, only compressed sections were processed, and as soon as I tried to process uncompressed ones, it immediately crashed, probably due to the fact that the class is not intended for uncompressed data. Please check my theory and give feedback.","title":"When the archive is unzipped into a directory, only 100 MB of 1.5 GB is unzipped. Then - crash","body":"<p>In fact, it was because of the &quot;Deflate&quot; compression method. The file was over 4 GB a bit. And because of this, the compression method was Deflate+Store. That it was impossible to process normally. As I understand it, only compressed sections were processed, and as soon as I tried to process uncompressed ones, it immediately crashed, probably due to the fact that the class is not intended for uncompressed data. Please check my theory and give feedback.</p>\n"},{"tags":[],"owner":{"account_id":24409604,"reputation":11,"user_id":18337295,"display_name":"Максим Белый"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677752457,"creation_date":1677752457,"answer_id":75614090,"question_id":75584749,"body_markdown":"the code was moved to the Zip4j library. the problem has disappeared","title":"When the archive is unzipped into a directory, only 100 MB of 1.5 GB is unzipped. Then - crash","body":"<p>the code was moved to the Zip4j library. the problem has disappeared</p>\n"}],"owner":{"account_id":24409604,"reputation":11,"user_id":18337295,"display_name":"Максим Белый"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75614090,"answer_count":2,"score":0,"last_activity_date":1677752457,"creation_date":1677525911,"question_id":75584749,"body_markdown":"\r\n \r\n```\r\nprivate class UnZipTask extends AsyncTask &lt;String, Integer, String&gt; {\r\n        @Override\r\n        protected String doInBackground(String... params) {\r\n            String filePath = params[0];\r\n            String destinationPath = params[1];\r\n            try {\r\n                File outdir = new File(destinationPath);\r\n                if (!outdir.exists()) {\r\n                    outdir.mkdirs();\r\n                }\r\n                File file = new File(filePath);\r\n                if (!file.exists()) {\r\n                    System.out.println(&quot;DEBUGLOG_0&quot;);\r\n                    return null;\r\n                }\r\n                ZipInputStream zin = new ZipInputStream(new FileInputStream(file));\r\n                ZipEntry entry;\r\n                String name, dir;\r\n                while ((entry = zin.getNextEntry()) != null) {\r\n                    name = entry.getName();\r\n                    if (entry.isDirectory()) {\r\n                        mkdirs(outdir, name);\r\n                        continue;\r\n                    }\r\n                    dir = dirpart(name);\r\n                    if (dir != null) {\r\n                        mkdirs(outdir, dir);\r\n                    }\r\n                    byte[] buffer = new byte[4096];\r\n                    BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(new File(outdir, name)));\r\n\r\n                    int publishprogress = 0;\r\n                    long length = entry.getSize();\r\n                    int count;\r\n                    while ((count = zin.read(buffer)) != -1) {\r\n                        out.write(buffer, 0, count);\r\n                        publishprogress += count;\r\n                        publishProgress((int) (publishprogress * 100 / length));\r\n                        System.out.println(&quot;DEBUGLOG_19 &quot; + count + &quot;-------publishprogress &quot; + (int) (publishprogress * 100 / length) +&quot;         &quot;+ entry.getName());\r\n                    }\r\n                    System.out.println(&quot;DEBUGLOG_05&quot;);\r\n                    out.close();\r\n                }\r\n                System.out.println(&quot;DEBUGLOG_06&quot;);\r\n                zin.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n                writeLog(e);\r\n            }\r\n            return null;\r\n        }\r\n\r\n\r\n        @Override\r\n        protected void onProgressUpdate(Integer... progress) {\r\n            super.onProgressUpdate(progress);\r\n            loading.setText(&quot;Unzipping...                  &quot;+progress[0] + &quot;%&quot;);\r\n            progressloading.setProgress(progress[0]);\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(String result) {\r\n            loading.setVisibility(View.INVISIBLE);\r\n            progressloading.setVisibility(View.INVISIBLE);\r\n            com.luxury.launcher.other.Utils.delete(new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS) + &quot;/game.zip&quot;));\r\n\r\n            StartGame();\r\n        }\r\n\r\n        @Override\r\n\r\n        protected void onPreExecute() {\r\n            super.onPreExecute();\r\n            loading.setVisibility(View.VISIBLE);\r\n            progressloading.setVisibility(View.VISIBLE);\r\n            progressloading.setIndeterminate(false);\r\n            progressloading.setMax(100);\r\n        }\r\n\r\n\r\n        private void mkdirs(File outdir, String path) {\r\n            File file = new File(outdir, path);\r\n            if (!file.exists()) {\r\n                file.mkdirs();\r\n            }\r\n        }\r\n\r\n        private String dirpart(String name) {\r\n            int index = name.lastIndexOf(File.separator);\r\n            return index == -1 ? null : name.substring(0, index);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI tried to solve the problem related to the archive, but changing the buffer size and rewriting the class did not bring the desired result. At the same time, I made sure that the archive itself is not damaged, and the cause of the problem should be found elsewhere. It may be worth paying attention to other parameters or functions that may affect the work with the archive.","title":"When the archive is unzipped into a directory, only 100 MB of 1.5 GB is unzipped. Then - crash","body":"<pre><code>private class UnZipTask extends AsyncTask &lt;String, Integer, String&gt; {\n        @Override\n        protected String doInBackground(String... params) {\n            String filePath = params[0];\n            String destinationPath = params[1];\n            try {\n                File outdir = new File(destinationPath);\n                if (!outdir.exists()) {\n                    outdir.mkdirs();\n                }\n                File file = new File(filePath);\n                if (!file.exists()) {\n                    System.out.println(&quot;DEBUGLOG_0&quot;);\n                    return null;\n                }\n                ZipInputStream zin = new ZipInputStream(new FileInputStream(file));\n                ZipEntry entry;\n                String name, dir;\n                while ((entry = zin.getNextEntry()) != null) {\n                    name = entry.getName();\n                    if (entry.isDirectory()) {\n                        mkdirs(outdir, name);\n                        continue;\n                    }\n                    dir = dirpart(name);\n                    if (dir != null) {\n                        mkdirs(outdir, dir);\n                    }\n                    byte[] buffer = new byte[4096];\n                    BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(new File(outdir, name)));\n\n                    int publishprogress = 0;\n                    long length = entry.getSize();\n                    int count;\n                    while ((count = zin.read(buffer)) != -1) {\n                        out.write(buffer, 0, count);\n                        publishprogress += count;\n                        publishProgress((int) (publishprogress * 100 / length));\n                        System.out.println(&quot;DEBUGLOG_19 &quot; + count + &quot;-------publishprogress &quot; + (int) (publishprogress * 100 / length) +&quot;         &quot;+ entry.getName());\n                    }\n                    System.out.println(&quot;DEBUGLOG_05&quot;);\n                    out.close();\n                }\n                System.out.println(&quot;DEBUGLOG_06&quot;);\n                zin.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n                writeLog(e);\n            }\n            return null;\n        }\n\n\n        @Override\n        protected void onProgressUpdate(Integer... progress) {\n            super.onProgressUpdate(progress);\n            loading.setText(&quot;Unzipping...                  &quot;+progress[0] + &quot;%&quot;);\n            progressloading.setProgress(progress[0]);\n        }\n\n        @Override\n        protected void onPostExecute(String result) {\n            loading.setVisibility(View.INVISIBLE);\n            progressloading.setVisibility(View.INVISIBLE);\n            com.luxury.launcher.other.Utils.delete(new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS) + &quot;/game.zip&quot;));\n\n            StartGame();\n        }\n\n        @Override\n\n        protected void onPreExecute() {\n            super.onPreExecute();\n            loading.setVisibility(View.VISIBLE);\n            progressloading.setVisibility(View.VISIBLE);\n            progressloading.setIndeterminate(false);\n            progressloading.setMax(100);\n        }\n\n\n        private void mkdirs(File outdir, String path) {\n            File file = new File(outdir, path);\n            if (!file.exists()) {\n                file.mkdirs();\n            }\n        }\n\n        private String dirpart(String name) {\n            int index = name.lastIndexOf(File.separator);\n            return index == -1 ? null : name.substring(0, index);\n        }\n    }\n}\n</code></pre>\n<p>I tried to solve the problem related to the archive, but changing the buffer size and rewriting the class did not bring the desired result. At the same time, I made sure that the archive itself is not damaged, and the cause of the problem should be found elsewhere. It may be worth paying attention to other parameters or functions that may affect the work with the archive.</p>\n"},{"tags":["java","infix-notation","postfix-notation"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1364980465,"post_id":15780817,"comment_id":22438964,"body_markdown":"Why? What do you care how many parentheses there are?","body":"Why? What do you care how many parentheses there are?"}],"answers":[{"comments":[{"owner":{"account_id":3419,"reputation":10436,"user_id":4931,"accept_rate":86,"display_name":"Michael Deardeuff"},"score":2,"creation_date":1364976825,"post_id":15781419,"comment_id":22437128,"body_markdown":"What about operator precedence?","body":"What about operator precedence?"}],"tags":[],"owner":{"account_id":2509313,"reputation":4808,"user_id":2182172,"display_name":"Lone nebula"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1364995855,"creation_date":1364974389,"answer_id":15781419,"question_id":15780817,"body_markdown":"What you need to do if you really want as few parentheses as possible, is similar to what the algorithm you linked to says. However...\r\n\r\n - You should store an operator for each *composite* operand in the `Stack`. Namely, the last operator used in the operand. You could use a second `Stack` for this. If the operand is not composite, you could add `null` to the second `Stack`, since there is no operator.\r\n - Don&#39;t encapsulate the resulted `String` with parentheses. That is done elsewhere in the algorithm (see below).\r\n\r\nWhen you pop the top two values from each of the `Stack`s, you have 3 operators at hand: \r\n\r\n - The current operator\r\n - The last used operator in the first operand (if the operator exists)\r\n - The last used operator in the second operand (if the operator exists)\r\n\r\nDepending on these three operators, you should encapsulate the first and/or second operand with parentheses, before combining them.\r\n\r\nYou could use operator precedence to determine whether there should be parentheses. The order goes like this: `(none), {&quot;*&quot;, &quot;/&quot;}, {&quot;+&quot;, &quot;-&quot;}`\r\n\r\n - The first operand needs parentheses if and only if its operator has a lower precedence than the current operator.\r\n - The second operand needs parentheses if its operator has a lower precedence than the current operator, or if they have equal precedence where the current operator is either `&quot;/&quot;` or `&quot;-&quot;`.\r\n\r\nThe rest should be done the way your algorithm described.","title":"Postfix to Infix with minimum number of parentheses","body":"<p>What you need to do if you really want as few parentheses as possible, is similar to what the algorithm you linked to says. However...</p>\n\n<ul>\n<li>You should store an operator for each <em>composite</em> operand in the <code>Stack</code>. Namely, the last operator used in the operand. You could use a second <code>Stack</code> for this. If the operand is not composite, you could add <code>null</code> to the second <code>Stack</code>, since there is no operator.</li>\n<li>Don't encapsulate the resulted <code>String</code> with parentheses. That is done elsewhere in the algorithm (see below).</li>\n</ul>\n\n<p>When you pop the top two values from each of the <code>Stack</code>s, you have 3 operators at hand: </p>\n\n<ul>\n<li>The current operator</li>\n<li>The last used operator in the first operand (if the operator exists)</li>\n<li>The last used operator in the second operand (if the operator exists)</li>\n</ul>\n\n<p>Depending on these three operators, you should encapsulate the first and/or second operand with parentheses, before combining them.</p>\n\n<p>You could use operator precedence to determine whether there should be parentheses. The order goes like this: <code>(none), {\"*\", \"/\"}, {\"+\", \"-\"}</code></p>\n\n<ul>\n<li>The first operand needs parentheses if and only if its operator has a lower precedence than the current operator.</li>\n<li>The second operand needs parentheses if its operator has a lower precedence than the current operator, or if they have equal precedence where the current operator is either <code>\"/\"</code> or <code>\"-\"</code>.</li>\n</ul>\n\n<p>The rest should be done the way your algorithm described.</p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1548487589,"post_id":35897601,"comment_id":95566834,"body_markdown":"This doesn&#39;t minimise parentheses.","body":"This doesn&#39;t minimise parentheses."}],"tags":[],"owner":{"account_id":1891952,"reputation":2743,"user_id":1709793,"accept_rate":0,"display_name":"craftsmannadeem"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1457542032,"creation_date":1457542032,"answer_id":35897601,"question_id":15780817,"body_markdown":"Here is the implementation:\r\n\r\n    public class PostfixToInfixConverter implements ExpressionConverter {\r\n\r\n\t@Override\r\n\tpublic String convert(String postfix) {\r\n\t\tString[] expressions = postfix.split(&quot;\\\\s&quot;);\r\n\t\t Deque&lt;Expression&gt; stack = new LinkedList&lt;Expression&gt;();\r\n\t\tfor (String exp : expressions) {\r\n\t\t\tif (exp.equals(&quot;+&quot;) || exp.equals(&quot;-&quot;)) {\r\n\t\t\t\tString right = stack.pop().getExpression();\r\n\t\t\t\tString left = stack.pop().getExpression();\r\n\t\t\t\tExpression newExp = new Expression(right + exp + left, exp);\r\n\t\t\t\tstack.push(newExp);\r\n\t\t\t} else if (exp.equals(&quot;*&quot;) || exp.equals(&quot;/&quot;)) {\r\n\t\t\t\tString right = correctExpression(stack.pop());\r\n\t\t\t\tString left = correctExpression(stack.pop());\r\n\t\t\t\tstack.push(new Expression(right +  exp +  left, exp));\r\n\t\t\t} else {\r\n\t\t\t\tstack.push(new Expression(exp, &quot;&quot;));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn stack.pop().getExpression();\r\n\t}\r\n\t\r\n\tprivate String correctExpression(Expression exp) {\r\n\t\tString result = exp.getExpression();\r\n\t\tif (exp.getOperatorUsed().equals(&quot;+&quot;) || exp.getOperatorUsed().equals(&quot;-&quot;)) {\r\n\t\t\tresult = &quot;(&quot; + result + &quot;)&quot;;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate static class Expression {\r\n\t\tString expression;\r\n\t\tString operatorUsed;\r\n\t\tpublic Expression(String exp, String operator) {\r\n\t\t\tthis.expression = exp;\r\n\t\t\tthis.operatorUsed = operator;\r\n\t\t}\r\n\t\tpublic String getExpression() {\r\n\t\t\treturn expression;\r\n\t\t}\r\n\t\tpublic String getOperatorUsed() {\r\n\t\t\treturn operatorUsed;\r\n\t\t}\t\t\r\n\t}\t\r\n}\r\n\r\n\r\nHere is the unit tests\r\n    \r\n    @Test\r\n\tpublic void test() {\r\n\t\tExpressionConverter converter = new PostfixToInfixConverter();\r\n\t\tassertThat(converter.convert(&quot;1 2 * 3 4 * + 5 *&quot;), equalTo(&quot;5*(4*3+2*1)&quot;));\r\n\t\tassertThat(converter.convert(&quot;a b + c + 2 *&quot;), equalTo(&quot;2*(c+b+a)&quot;));\r\n\t}","title":"Postfix to Infix with minimum number of parentheses","body":"<p>Here is the implementation:</p>\n\n<pre><code>public class PostfixToInfixConverter implements ExpressionConverter {\n\n@Override\npublic String convert(String postfix) {\n    String[] expressions = postfix.split(\"\\\\s\");\n     Deque&lt;Expression&gt; stack = new LinkedList&lt;Expression&gt;();\n    for (String exp : expressions) {\n        if (exp.equals(\"+\") || exp.equals(\"-\")) {\n            String right = stack.pop().getExpression();\n            String left = stack.pop().getExpression();\n            Expression newExp = new Expression(right + exp + left, exp);\n            stack.push(newExp);\n        } else if (exp.equals(\"*\") || exp.equals(\"/\")) {\n            String right = correctExpression(stack.pop());\n            String left = correctExpression(stack.pop());\n            stack.push(new Expression(right +  exp +  left, exp));\n        } else {\n            stack.push(new Expression(exp, \"\"));\n        }\n    }\n    return stack.pop().getExpression();\n}\n\nprivate String correctExpression(Expression exp) {\n    String result = exp.getExpression();\n    if (exp.getOperatorUsed().equals(\"+\") || exp.getOperatorUsed().equals(\"-\")) {\n        result = \"(\" + result + \")\";\n    }\n    return result;\n}\n\nprivate static class Expression {\n    String expression;\n    String operatorUsed;\n    public Expression(String exp, String operator) {\n        this.expression = exp;\n        this.operatorUsed = operator;\n    }\n    public String getExpression() {\n        return expression;\n    }\n    public String getOperatorUsed() {\n        return operatorUsed;\n    }       \n}   \n</code></pre>\n\n<p>}</p>\n\n<p>Here is the unit tests</p>\n\n<pre><code>@Test\npublic void test() {\n    ExpressionConverter converter = new PostfixToInfixConverter();\n    assertThat(converter.convert(\"1 2 * 3 4 * + 5 *\"), equalTo(\"5*(4*3+2*1)\"));\n    assertThat(converter.convert(\"a b + c + 2 *\"), equalTo(\"2*(c+b+a)\"));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3650734,"reputation":123,"user_id":3042989,"accept_rate":25,"display_name":"shranet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677752178,"creation_date":1677752178,"answer_id":75614036,"question_id":15780817,"body_markdown":"I found an example to solve this problem. There is a _Unparsing class in [ast][1] library of python to unparse AST tree.\r\n\r\nThere is a require_parens function in the library to check parentheses.\r\n\r\nExample:\r\n\r\n    ~% python3.11\r\n    &gt;&gt;&gt; import ast\r\n    &gt;&gt;&gt; ast.unparse(ast.parse(&quot;(-(-1+2)+((2*3))-4)&quot;))\r\n    &#39;-(-1 + 2) + 2 * 3 - 4&#39;\r\n    &gt;&gt;&gt;\r\n\r\nIf you want you can convert AST tree to postfix notation using a ast.walk function. [Link][2]\r\n\r\n\r\n  [1]: https://github.com/python/cpython/blob/main/Lib/ast.py#L684\r\n  [2]: https://stackoverflow.com/questions/42590512/how-to-convert-from-infix-to-postfix-prefix-using-ast-python-module","title":"Postfix to Infix with minimum number of parentheses","body":"<p>I found an example to solve this problem. There is a _Unparsing class in <a href=\"https://github.com/python/cpython/blob/main/Lib/ast.py#L684\" rel=\"nofollow noreferrer\">ast</a> library of python to unparse AST tree.</p>\n<p>There is a require_parens function in the library to check parentheses.</p>\n<p>Example:</p>\n<pre><code>~% python3.11\n&gt;&gt;&gt; import ast\n&gt;&gt;&gt; ast.unparse(ast.parse(&quot;(-(-1+2)+((2*3))-4)&quot;))\n'-(-1 + 2) + 2 * 3 - 4'\n&gt;&gt;&gt;\n</code></pre>\n<p>If you want you can convert AST tree to postfix notation using a ast.walk function. <a href=\"https://stackoverflow.com/questions/42590512/how-to-convert-from-infix-to-postfix-prefix-using-ast-python-module\">Link</a></p>\n"}],"owner":{"account_id":1138466,"reputation":17496,"user_id":1123020,"accept_rate":60,"display_name":"Yoda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5696,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":15781419,"answer_count":3,"score":4,"last_activity_date":1677752178,"creation_date":1364972353,"question_id":15780817,"body_markdown":"I am looking for algorithm postfix to infix notation which will produce the minimum number of the parentheses. \r\n\r\nI have found that but it will produce many, many parentheses: http://tajendrasengar.blogspot.com/2011/09/postfix-to-infix-algorithm.html\r\n\r\n**For example**\r\n\r\nThe input:\r\n\r\n    &lt;ONP&gt;abcd*/+~\r\n\r\nThe result:\r\n\r\n    &lt;INF&gt;~(a+b/(c*d))\r\n\r\n\r\n\r\n","title":"Postfix to Infix with minimum number of parentheses","body":"<p>I am looking for algorithm postfix to infix notation which will produce the minimum number of the parentheses. </p>\n\n<p>I have found that but it will produce many, many parentheses: <a href=\"http://tajendrasengar.blogspot.com/2011/09/postfix-to-infix-algorithm.html\" rel=\"nofollow\">http://tajendrasengar.blogspot.com/2011/09/postfix-to-infix-algorithm.html</a></p>\n\n<p><strong>For example</strong></p>\n\n<p>The input:</p>\n\n<pre><code>&lt;ONP&gt;abcd*/+~\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>&lt;INF&gt;~(a+b/(c*d))\n</code></pre>\n"},{"tags":["java","function","jersey","cloud","multipart"],"owner":{"account_id":16167353,"reputation":3,"user_id":11672023,"display_name":"Filippo Angileri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677751613,"creation_date":1677751613,"question_id":75613934,"body_markdown":"I try to use Google Cloud Functions for produce a response in multipart/form-data and i want use jersey Multipart object \r\nI need help to convert the object to byte array to put it on the respose of the GCF \r\n```\r\nresponse.getOutputStream().write(convertMultiPartToByteArray(multiPart));\r\n\r\n```\r\nSome people can help me to make the function convertMultiPartToByteArray? \r\n\r\ni try\r\n```\r\npublic byte[] convertMultiPartToByteArray(MultiPart multiPart) {\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        for (BodyPart bodyPart : multiPart.getBodyParts()) {\r\n            byte[] bodyPartBytes = bodyPart.getEntityAs(byte[].class);\r\n            baos.write(bodyPartBytes, 0, bodyPartBytes.length);\r\n        }\r\n        byte[] multiPartBytes = baos.toByteArray();\r\n        return multiPartBytes;\r\n    }\r\n```\r\nbut it return \r\n\r\n```\r\njava.lang.IllegalStateException: Entity instance does not contain the unconverted content.\r\n\tat org.glassfish.jersey.media.multipart.BodyPart.getEntityAs(BodyPart.java:267)\r\n\tat com.example.HelloWorld.convertMultiPartToByteArray(HelloWorld.java:132)\r\n\tat com.example.HelloWorld.service(HelloWorld.java:107)\r\n\tat com.google.cloud.functions.invoker.HttpFunctionExecutor.service(HttpFunctionExecutor.java:69)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:550)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat com.google.cloud.functions.invoker.runner.Invoker$NotFoundHandler.handle(Invoker.java:466)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:516)\r\n\tat org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\r\n\tat org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\r\n```\r\n","title":"Use jersey Multipart Object as HttpResponse for Google Cloud Functions","body":"<p>I try to use Google Cloud Functions for produce a response in multipart/form-data and i want use jersey Multipart object\nI need help to convert the object to byte array to put it on the respose of the GCF</p>\n<pre><code>response.getOutputStream().write(convertMultiPartToByteArray(multiPart));\n\n</code></pre>\n<p>Some people can help me to make the function convertMultiPartToByteArray?</p>\n<p>i try</p>\n<pre><code>public byte[] convertMultiPartToByteArray(MultiPart multiPart) {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        for (BodyPart bodyPart : multiPart.getBodyParts()) {\n            byte[] bodyPartBytes = bodyPart.getEntityAs(byte[].class);\n            baos.write(bodyPartBytes, 0, bodyPartBytes.length);\n        }\n        byte[] multiPartBytes = baos.toByteArray();\n        return multiPartBytes;\n    }\n</code></pre>\n<p>but it return</p>\n<pre><code>java.lang.IllegalStateException: Entity instance does not contain the unconverted content.\n    at org.glassfish.jersey.media.multipart.BodyPart.getEntityAs(BodyPart.java:267)\n    at com.example.HelloWorld.convertMultiPartToByteArray(HelloWorld.java:132)\n    at com.example.HelloWorld.service(HelloWorld.java:107)\n    at com.google.cloud.functions.invoker.HttpFunctionExecutor.service(HttpFunctionExecutor.java:69)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:550)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501)\n    at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at com.google.cloud.functions.invoker.runner.Invoker$NotFoundHandler.handle(Invoker.java:466)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.Server.handle(Server.java:516)\n    at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487)\n    at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\n    at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","testing","mapstruct"],"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677741544,"post_id":75612023,"comment_id":133398550,"body_markdown":"Anybody else have ever write unit test for a method that uses MapStruct ?","body":"Anybody else have ever write unit test for a method that uses MapStruct ?"}],"answers":[{"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677748247,"post_id":75612793,"comment_id":133400084,"body_markdown":"**1.** How @Spy is in action in this scenario?","body":"<b>1.</b> How @Spy is in action in this scenario?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677748371,"post_id":75612793,"comment_id":133400119,"body_markdown":"**2.** I have a similar problem with my Controller Test and even I used mapper as spy, the request does not hit to the service method (but Controller still get response). So, do you have a proper examples for unit and integration test with the methods where MapStruct is used? Any example usage lease?","body":"<b>2.</b> I have a similar problem with my Controller Test and even I used mapper as spy, the request does not hit to the service method (but Controller still get response). So, do you have a proper examples for unit and integration test with the methods where MapStruct is used? Any example usage lease?"},{"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"score":0,"creation_date":1677749223,"post_id":75612793,"comment_id":133400334,"body_markdown":"@fredrick I added some explanation. However, I don&#39;t understand your question 1, it is too unspecific.","body":"@fredrick I added some explanation. However, I don&#39;t understand your question 1, it is too unspecific."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677751519,"post_id":75612793,"comment_id":133401021,"body_markdown":"Thanks a lot for your help. My controller test still does not hit to service method and controller returns null as data value when I run test method. I shared all the related code in Update section. Could you pls have a look at?","body":"Thanks a lot for your help. My controller test still does not hit to service method and controller returns null as data value when I run test method. I shared all the related code in Update section. Could you pls have a look at?"},{"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"score":0,"creation_date":1677827850,"post_id":75612793,"comment_id":133417721,"body_markdown":"Please ask a seperate question, then I will look into it. And I&#39;d appreciate if you could mark the answer as accepted! :)","body":"Please ask a seperate question, then I will look into it. And I&#39;d appreciate if you could mark the answer as accepted! :)"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677832764,"post_id":75612793,"comment_id":133418833,"body_markdown":"Thanks amigo. What about this &gt;&gt;&gt; https://stackoverflow.com/questions/75624848/tested-method-call-does-not-hit-the-service-in-spring-boot","body":"Thanks amigo. What about this &gt;&gt;&gt; <a href=\"https://stackoverflow.com/questions/75624848/tested-method-call-does-not-hit-the-service-in-spring-boot\" title=\"tested method call does not hit the service in spring boot\">stackoverflow.com/questions/75624848/&hellip;</a>"}],"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677749188,"creation_date":1677744741,"answer_id":75612793,"question_id":75612023,"body_markdown":"## Unit Test\r\nFor a unit test, try using a [spy][1] instead. By using a spy, the real instance will be wrapped by Mockito so that you can stub or verify against it, but when not stubbed, the real methods will be executed when called. By annotating it with `@Spy`, Mockito will consider it as well for injecting the dependencies in the class annotated with `@InjectMocks`.\r\n\r\n#### Example\r\n```java\r\n@ExtendWith(MockitoExtension.class)\r\nclass CategoryServiceTest {\r\n\r\n    @InjectMocks\r\n    private CategoryService service;\r\n\r\n    @Mock\r\n    private CategoryRepository categoryRepository;\r\n\r\n    @Spy\r\n    private CategoryRequestMapper categoryRequestMapper = new CategoryRequestMapperImpl();\r\n\r\n    // your tests go here\r\n```\r\n\r\n## Integration Test\r\nIf your mapper needs other autowired beans (like other mappers) as well, you might want to change it to a reduced integration test. You can instruct Spring to create an application context with only the beans you specify instead of the whole application context with all auto configurations etc. If you want to verify that your mapper was called, you can use [`@SpyBean`][2] like in the example below. If you don&#39;t want to verify or stub it, you can omit it as well.\r\n\r\n#### Example\r\n```java\r\n@SpringBootTest(classes = {CategoryService.class, CategoryRequestMapper.class, ...}) // other beans that should be automatically created by Spring go here\r\nclass CategoryServiceTest {\r\n\r\n    @Autowired\r\n    private CategoryService service;\r\n\r\n    @MockBean\r\n    private CategoryRepository categoryRepository;\r\n\r\n    @SpyBean\r\n    private CategoryRequestMapper categoryRequestMapper\r\n\r\n    // your tests go here\r\n```\r\n\r\n\r\n  [1]: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Spy.html\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/SpyBean.html","title":"Cannot use MapStruct in Unit Test for a service method","body":"<h2>Unit Test</h2>\n<p>For a unit test, try using a <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Spy.html\" rel=\"nofollow noreferrer\">spy</a> instead. By using a spy, the real instance will be wrapped by Mockito so that you can stub or verify against it, but when not stubbed, the real methods will be executed when called. By annotating it with <code>@Spy</code>, Mockito will consider it as well for injecting the dependencies in the class annotated with <code>@InjectMocks</code>.</p>\n<h4>Example</h4>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(MockitoExtension.class)\nclass CategoryServiceTest {\n\n    @InjectMocks\n    private CategoryService service;\n\n    @Mock\n    private CategoryRepository categoryRepository;\n\n    @Spy\n    private CategoryRequestMapper categoryRequestMapper = new CategoryRequestMapperImpl();\n\n    // your tests go here\n</code></pre>\n<h2>Integration Test</h2>\n<p>If your mapper needs other autowired beans (like other mappers) as well, you might want to change it to a reduced integration test. You can instruct Spring to create an application context with only the beans you specify instead of the whole application context with all auto configurations etc. If you want to verify that your mapper was called, you can use <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/SpyBean.html\" rel=\"nofollow noreferrer\"><code>@SpyBean</code></a> like in the example below. If you don't want to verify or stub it, you can omit it as well.</p>\n<h4>Example</h4>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = {CategoryService.class, CategoryRequestMapper.class, ...}) // other beans that should be automatically created by Spring go here\nclass CategoryServiceTest {\n\n    @Autowired\n    private CategoryService service;\n\n    @MockBean\n    private CategoryRepository categoryRepository;\n\n    @SpyBean\n    private CategoryRequestMapper categoryRequestMapper\n\n    // your tests go here\n</code></pre>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":660,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75612793,"answer_count":1,"score":1,"last_activity_date":1677751278,"creation_date":1677739130,"question_id":75612023,"body_markdown":"I write unit test for testing mappings and it works without any problem. However, when I try to test a service method that makes mapping via MapperStruct, the mapper instance throws &quot;_Null pointer exception_&quot;. Here is the approach I am following (before that, I have tried many different ways as suggested on Stackoverflow, but none of them has worked :(\r\n\r\n***UnitTest:***\r\n\r\n```\r\n@SpringBootTest // ???\r\n@ExtendWith(MockitoExtension.class)\r\nclass CategoryServiceTest {\r\n\r\n    @InjectMocks\r\n    private CategoryService service;\r\n\r\n    @Mock\r\n    private CategoryRepository categoryRepository;\r\n\r\n    @Mock\r\n    public CategoryRequestMapper categoryRequestMapper;\r\n\r\n\r\n    @ParameterizedTest\r\n    @CsvFileSource(resources = &quot;/data/categories.csv&quot;)\r\n    void test_create(Long id, String name, Integer ordinal) {\r\n        CategoryRequest request = new CategoryRequest(id, name, ordinal);\r\n           when(categoryRepository.existsByNameIgnoreCase(request.getName()))\r\n    .thenReturn(false);\r\n\r\n        service.create(request);\r\n\r\n        // validations ...\r\n    }\r\n}\r\n```\r\n\r\n\r\n***ServiceMethod:***\r\n\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class CategoryService {\r\n\r\n    private final CategoryRepository categoryRepository;\r\n    private final CategoryRequestMapper categoryRequestMapper;\r\n\r\n    public CommandResponse create(CategoryRequest request) {\r\n\r\n        // !!! categoryRequestMapper is null\r\n        final Category category = categoryRequestMapper.toEntity(request);\r\n        categoryRepository.save(category);\r\n        return CommandResponse.builder().id(category.getId()).build();\r\n    }\r\n}\r\n```\r\n\r\nSo, should I also stub `categoryRequestMapper` in the test method? \r\n\r\n\r\n\r\n\r\n**Update:***\r\n\r\n```\r\n@SpringBootTest(classes = {CategoryController.class, CategoryService.class, CategoryResponseMapperImpl.class})\r\nclass CategoryControllerTest {\r\n\r\n    @Autowired\r\n    private CategoryController categoryController;\r\n\r\n    @MockBean\r\n    private CategoryRepository categoryRepository;\r\n\r\n    @MockBean\r\n    private CategoryService categoryService;\r\n\r\n    @Spy\r\n    // @SpyBean\r\n    public CategoryResponseMapper categoryResponseMapper = new CategoryResponseMapperImpl();\r\n\r\n    @Test\r\n    void test_findById() throws Exception {\r\n        LocalDateTime dateTime = LocalDate.of(2022, 1, 1).atStartOfDay();\r\n\r\n        Category category = new Category();\r\n        category.setId(123L);\r\n        category.setName(&quot;Category&quot;);\r\n        category.setOrdinal(1);\r\n\r\n        when(clock.instant()).thenReturn(dateTime.atZone(ZoneId.of(&quot;UTC&quot;)).toInstant());\r\n        when(categoryRepository.findById(any())).thenReturn(Optional.of(category));\r\n\r\n        MockHttpServletRequestBuilder requestBuilder = MockMvcRequestBuilders.get(&quot;/api/v1/categories/{id}&quot;, 123L);\r\n        MockMvcBuilders.standaloneSetup(categoryController)\r\n                .build()\r\n                .perform(requestBuilder)\r\n                .andExpect(MockMvcResultMatchers.status().isOk())\r\n                .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/json&quot;))\r\n                .andExpect(MockMvcResultMatchers.content()\r\n                        .string(\r\n                                &quot;{\\&quot;timestamp\\&quot;:1640995200000,\\&quot;message\\&quot;:\\&quot;Success\\&quot;,\\&quot;data\\&quot;:{\\&quot;id\\&quot;:123,\\&quot;name\\&quot;:\\&quot;Category\\&quot;,\\&quot;ordinal\\&quot;:1}}&quot;));\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\n@GetMapping(&quot;/categories/{id}&quot;)\r\npublic ResponseEntity&lt;ApiResponse&lt;CategoryResponse&gt;&gt; findById(@PathVariable long id) {\r\n    final CategoryResponse response = categoryService.findById(id);\r\n    return ResponseEntity.ok(new ApiResponse&lt;&gt;(Instant.now(clock).toEpochMilli(), SUCCESS, response));\r\n}\r\n```\r\n\r\n```\r\nprivate final CategoryRepository categoryRepository;\r\nprivate final CategoryRequestMapper categoryRequestMapper;\r\nprivate final CategoryResponseMapper categoryResponseMapper;\r\n\r\npublic CategoryResponse findById(Long id) {\r\n    return categoryRepository.findById(id)\r\n            .map(categoryResponseMapper::toDto)\r\n            .orElseThrow(() -&gt; {\r\n                return new NoSuchElementFoundException(NOT_FOUND);\r\n            });\r\n}\r\n```","title":"Cannot use MapStruct in Unit Test for a service method","body":"<p>I write unit test for testing mappings and it works without any problem. However, when I try to test a service method that makes mapping via MapperStruct, the mapper instance throws &quot;<em>Null pointer exception</em>&quot;. Here is the approach I am following (before that, I have tried many different ways as suggested on Stackoverflow, but none of them has worked :(</p>\n<p><em><strong>UnitTest:</strong></em></p>\n<pre><code>@SpringBootTest // ???\n@ExtendWith(MockitoExtension.class)\nclass CategoryServiceTest {\n\n    @InjectMocks\n    private CategoryService service;\n\n    @Mock\n    private CategoryRepository categoryRepository;\n\n    @Mock\n    public CategoryRequestMapper categoryRequestMapper;\n\n\n    @ParameterizedTest\n    @CsvFileSource(resources = &quot;/data/categories.csv&quot;)\n    void test_create(Long id, String name, Integer ordinal) {\n        CategoryRequest request = new CategoryRequest(id, name, ordinal);\n           when(categoryRepository.existsByNameIgnoreCase(request.getName()))\n    .thenReturn(false);\n\n        service.create(request);\n\n        // validations ...\n    }\n}\n</code></pre>\n<p><em><strong>ServiceMethod:</strong></em></p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class CategoryService {\n\n    private final CategoryRepository categoryRepository;\n    private final CategoryRequestMapper categoryRequestMapper;\n\n    public CommandResponse create(CategoryRequest request) {\n\n        // !!! categoryRequestMapper is null\n        final Category category = categoryRequestMapper.toEntity(request);\n        categoryRepository.save(category);\n        return CommandResponse.builder().id(category.getId()).build();\n    }\n}\n</code></pre>\n<p>So, should I also stub <code>categoryRequestMapper</code> in the test method?</p>\n<p><strong>Update:</strong>*</p>\n<pre><code>@SpringBootTest(classes = {CategoryController.class, CategoryService.class, CategoryResponseMapperImpl.class})\nclass CategoryControllerTest {\n\n    @Autowired\n    private CategoryController categoryController;\n\n    @MockBean\n    private CategoryRepository categoryRepository;\n\n    @MockBean\n    private CategoryService categoryService;\n\n    @Spy\n    // @SpyBean\n    public CategoryResponseMapper categoryResponseMapper = new CategoryResponseMapperImpl();\n\n    @Test\n    void test_findById() throws Exception {\n        LocalDateTime dateTime = LocalDate.of(2022, 1, 1).atStartOfDay();\n\n        Category category = new Category();\n        category.setId(123L);\n        category.setName(&quot;Category&quot;);\n        category.setOrdinal(1);\n\n        when(clock.instant()).thenReturn(dateTime.atZone(ZoneId.of(&quot;UTC&quot;)).toInstant());\n        when(categoryRepository.findById(any())).thenReturn(Optional.of(category));\n\n        MockHttpServletRequestBuilder requestBuilder = MockMvcRequestBuilders.get(&quot;/api/v1/categories/{id}&quot;, 123L);\n        MockMvcBuilders.standaloneSetup(categoryController)\n                .build()\n                .perform(requestBuilder)\n                .andExpect(MockMvcResultMatchers.status().isOk())\n                .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/json&quot;))\n                .andExpect(MockMvcResultMatchers.content()\n                        .string(\n                                &quot;{\\&quot;timestamp\\&quot;:1640995200000,\\&quot;message\\&quot;:\\&quot;Success\\&quot;,\\&quot;data\\&quot;:{\\&quot;id\\&quot;:123,\\&quot;name\\&quot;:\\&quot;Category\\&quot;,\\&quot;ordinal\\&quot;:1}}&quot;));\n    }\n}\n</code></pre>\n<pre><code>@GetMapping(&quot;/categories/{id}&quot;)\npublic ResponseEntity&lt;ApiResponse&lt;CategoryResponse&gt;&gt; findById(@PathVariable long id) {\n    final CategoryResponse response = categoryService.findById(id);\n    return ResponseEntity.ok(new ApiResponse&lt;&gt;(Instant.now(clock).toEpochMilli(), SUCCESS, response));\n}\n</code></pre>\n<pre><code>private final CategoryRepository categoryRepository;\nprivate final CategoryRequestMapper categoryRequestMapper;\nprivate final CategoryResponseMapper categoryResponseMapper;\n\npublic CategoryResponse findById(Long id) {\n    return categoryRepository.findById(id)\n            .map(categoryResponseMapper::toDto)\n            .orElseThrow(() -&gt; {\n                return new NoSuchElementFoundException(NOT_FOUND);\n            });\n}\n</code></pre>\n"},{"tags":["java","spring-boot","rest","maven"],"answers":[{"tags":[],"owner":{"account_id":18089135,"reputation":450,"user_id":13149219,"display_name":"Utsav10"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677750677,"creation_date":1677750677,"answer_id":75613754,"question_id":75611989,"body_markdown":"try returning `ResponseEntity&lt;String&gt;` as your controller output","title":"Unable to get proper response of endpoints in restful-web services","body":"<p>try returning <code>ResponseEntity&lt;String&gt;</code> as your controller output</p>\n"}],"owner":{"account_id":23586307,"reputation":1,"user_id":17624713,"display_name":"Azmat Hayat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677750677,"creation_date":1677738835,"question_id":75611989,"body_markdown":"My Rest Application is **UP** and **RUNNING** Without any error but still not getting correct output\r\nthe same project is working fine in mac book but not working in windows please help me to resolve it \r\n\r\n\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class UserController {\r\n\t\r\n\t\r\n\t@GetMapping(&quot;/hello&quot;)\r\n\tpublic String hello() {\r\n\t\t\r\n\t\treturn &quot;Hello Good Morning&quot;;\r\n\t\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.0-M1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t&lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t&lt;/pluginRepositories&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nwhile hitting the url:- http://localhost:8080/hello\r\ngetting below response\r\n\r\n\r\nWhitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n\r\nThu Mar 02 11:44:12 IST 2023\r\nThere was an unexpected error (type=Not Found, status=404).\r\n\r\n\r\n\r\nI tried in eclipse and and STS as well \r\nI also tried by changing the perspective -&gt; java to Java browsing","title":"Unable to get proper response of endpoints in restful-web services","body":"<p>My Rest Application is <strong>UP</strong> and <strong>RUNNING</strong> Without any error but still not getting correct output\nthe same project is working fine in mac book but not working in windows please help me to resolve it</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<pre><code>package com.example.demo;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class UserController {\n    \n    \n    @GetMapping(&quot;/hello&quot;)\n    public String hello() {\n        \n        return &quot;Hello Good Morning&quot;;\n        \n    }\n\n}\n</code></pre>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0-M1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>while hitting the url:- http://localhost:8080/hello\ngetting below response</p>\n<p>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.</p>\n<p>Thu Mar 02 11:44:12 IST 2023\nThere was an unexpected error (type=Not Found, status=404).</p>\n<p>I tried in eclipse and and STS as well\nI also tried by changing the perspective -&gt; java to Java browsing</p>\n"},{"tags":["java","android","logging"],"comments":[{"owner":{"account_id":424143,"reputation":2103,"user_id":803975,"display_name":"whaleberg"},"score":0,"creation_date":1480606865,"post_id":40914629,"comment_id":69041611,"body_markdown":"Couldn&#39;t you leave the log statements in the code and configure the logging framework to not emit debug level logs?  The ability to configure different logging parameters in production and testing is one of the major features in almost every logging framework.","body":"Couldn&#39;t you leave the log statements in the code and configure the logging framework to not emit debug level logs?  The ability to configure different logging parameters in production and testing is one of the major features in almost every logging framework."}],"answers":[{"comments":[{"owner":{"account_id":6015349,"reputation":368,"user_id":4724407,"accept_rate":25,"display_name":"Alexey Simchenko"},"score":1,"creation_date":1480708746,"post_id":40914773,"comment_id":69091433,"body_markdown":"Thanks for advise but I need a another thing: I do some card in some branch, and then I merge it to common branch, usually in dev or release or master branch, and I don&#39;t want that logs go from some feature_branch to common branch.","body":"Thanks for advise but I need a another thing: I do some card in some branch, and then I merge it to common branch, usually in dev or release or master branch, and I don&#39;t want that logs go from some feature_branch to common branch."}],"tags":[],"owner":{"account_id":1186977,"reputation":3361,"user_id":3361863,"accept_rate":54,"display_name":"vkislicins"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1480606879,"creation_date":1480606879,"answer_id":40914773,"question_id":40914629,"body_markdown":"You can use ProGuard to delete logs when building for release. Simply add the following to your `proguard-rules.pro`\r\n\r\n    -assumenosideeffects class android.util.Log {\r\n        public static boolean isLoggable(java.lang.String, int);\r\n        public static int v(...);\r\n        public static int i(...);\r\n        public static int d(...);\r\n    }\r\n\r\nThis will remove the logs when you&#39;re building for release. Obviously, make sure you have proguard on for release and off for debug. Also, this will keep your error logs in the app, cause you probably want those there anyway.","title":"Android Studio, delete all logs quickly from project","body":"<p>You can use ProGuard to delete logs when building for release. Simply add the following to your <code>proguard-rules.pro</code></p>\n\n<pre><code>-assumenosideeffects class android.util.Log {\n    public static boolean isLoggable(java.lang.String, int);\n    public static int v(...);\n    public static int i(...);\n    public static int d(...);\n}\n</code></pre>\n\n<p>This will remove the logs when you're building for release. Obviously, make sure you have proguard on for release and off for debug. Also, this will keep your error logs in the app, cause you probably want those there anyway.</p>\n"},{"comments":[{"owner":{"account_id":6015349,"reputation":368,"user_id":4724407,"accept_rate":25,"display_name":"Alexey Simchenko"},"score":1,"creation_date":1480709096,"post_id":40914779,"comment_id":69091593,"body_markdown":"It doesn&#39;t work because replacing delete only beginning of the log. For example if I will do as you wrote and replace this &quot;Log.d&quot;, in result will be end of logs:\nbefore replacing\nLog.d(TAG, &quot;Method: constantScrolling&quot;);\nafter\n(TAG, &quot;Method: constantScrolling&quot;);\nAnd it&#39;s not good. It&#39;s not delete log but only reduce it and make error.","body":"It doesn&#39;t work because replacing delete only beginning of the log. For example if I will do as you wrote and replace this &quot;Log.d&quot;, in result will be end of logs: before replacing Log.d(TAG, &quot;Method: constantScrolling&quot;); after (TAG, &quot;Method: constantScrolling&quot;); And it&#39;s not good. It&#39;s not delete log but only reduce it and make error."}],"tags":[],"owner":{"account_id":5894482,"reputation":678,"user_id":4640003,"accept_rate":50,"display_name":"megaturbo"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1480606894,"creation_date":1480606894,"answer_id":40914779,"question_id":40914629,"body_markdown":"I would do that:\r\n\r\n 1. Right click on app\r\n 2.  Replace in path\r\n 3. Find : &quot;Log.d(&quot; (or whatever you need)\r\n 4. Replace with : &quot;&quot;\r\n 5. Find","title":"Android Studio, delete all logs quickly from project","body":"<p>I would do that:</p>\n\n<ol>\n<li>Right click on app</li>\n<li>Replace in path</li>\n<li>Find : \"Log.d(\" (or whatever you need)</li>\n<li>Replace with : \"\"</li>\n<li>Find</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6546218,"reputation":469,"user_id":5062157,"display_name":"Eugene Styer"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1480608402,"creation_date":1480608402,"answer_id":40915279,"question_id":40914629,"body_markdown":"I&#39;ll give the Java equivalent of something I&#39;ve done in C++:\r\n\r\n    class MyLog {\r\n        static int d( String t, String m ) { return Log.d(t,m); }\r\n        // static int d( String t, String m) { return 0; }\r\n        static dx( String t, String m ) { return 0; }\r\n    \r\n        static int v( String t, String m ) { return Log.d(t,m); }\r\n        // static int v( String t, String m) { return 0; }\r\n        static vx( String t, String m ) { return 0; }\r\n    \r\n        ...\r\n    }\r\n\r\nIn my program I use:\r\n\r\nMyLog.d( TAG, &quot;Message&quot; );\r\n\r\nNow if I want to disable logging entirely, then I can go to the MyLog class and simply comment out the first (real) entry, and uncomment the dummy line. If I want to disable a specific entry, then change &quot;.d&quot; to &quot;.dx&quot; and the log entry stays in the source in case I want to enable it later.","title":"Android Studio, delete all logs quickly from project","body":"<p>I'll give the Java equivalent of something I've done in C++:</p>\n\n<pre><code>class MyLog {\n    static int d( String t, String m ) { return Log.d(t,m); }\n    // static int d( String t, String m) { return 0; }\n    static dx( String t, String m ) { return 0; }\n\n    static int v( String t, String m ) { return Log.d(t,m); }\n    // static int v( String t, String m) { return 0; }\n    static vx( String t, String m ) { return 0; }\n\n    ...\n}\n</code></pre>\n\n<p>In my program I use:</p>\n\n<p>MyLog.d( TAG, \"Message\" );</p>\n\n<p>Now if I want to disable logging entirely, then I can go to the MyLog class and simply comment out the first (real) entry, and uncomment the dummy line. If I want to disable a specific entry, then change \".d\" to \".dx\" and the log entry stays in the source in case I want to enable it later.</p>\n"},{"tags":[],"owner":{"account_id":13919619,"reputation":684,"user_id":10050419,"display_name":"Ronny Bigler"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1578220941,"creation_date":1577962567,"answer_id":59562151,"question_id":40914629,"body_markdown":"my Way:\r\n\r\n**1)** enable Column Selection Mode (`alt+shift+insert`)\r\n\r\n**2)** select on one LOG.d(TAG, &quot;text&quot;); the part &#39;LOG.&#39;\r\n\r\n**3)** then do `shift + ctrl + alt + j`\r\n\r\n**4)** click left arrow\r\n\r\n**5)** do shift+end\r\n\r\n**6)** hit delete.\r\n\r\nthis removes all LOG calls at once in a java file.","title":"Android Studio, delete all logs quickly from project","body":"<p>my Way:</p>\n\n<p><strong>1)</strong> enable Column Selection Mode (<code>alt+shift+insert</code>)</p>\n\n<p><strong>2)</strong> select on one LOG.d(TAG, \"text\"); the part 'LOG.'</p>\n\n<p><strong>3)</strong> then do <code>shift + ctrl + alt + j</code></p>\n\n<p><strong>4)</strong> click left arrow</p>\n\n<p><strong>5)</strong> do shift+end</p>\n\n<p><strong>6)</strong> hit delete.</p>\n\n<p>this removes all LOG calls at once in a java file.</p>\n"},{"tags":[],"owner":{"account_id":5867720,"reputation":527,"user_id":4621089,"accept_rate":73,"display_name":"Afshin Izadi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677750026,"creation_date":1677750026,"answer_id":75613638,"question_id":40914629,"body_markdown":"Press \r\n\r\n    ctrl+shift+r\r\n\r\nThen enable Regex button in the opned window, its like \r\n\r\n&gt; .*\r\n\r\nWrite \r\n \r\n\r\n    Log.[edivw]\\(.*;\r\n\r\nIn the first textbox\r\n\r\nAnd be sure the second textbook is empty, then press replace all\r\n\r\n*But recommend just replace Log. with //Log.\r\nBy this you just comment all logs.\r\n","title":"Android Studio, delete all logs quickly from project","body":"<p>Press</p>\n<pre><code>ctrl+shift+r\n</code></pre>\n<p>Then enable Regex button in the opned window, its like</p>\n<blockquote>\n<p>.*</p>\n</blockquote>\n<p>Write</p>\n<pre><code>Log.[edivw]\\(.*;\n</code></pre>\n<p>In the first textbox</p>\n<p>And be sure the second textbook is empty, then press replace all</p>\n<p>*But recommend just replace Log. with //Log.\nBy this you just comment all logs.</p>\n"}],"owner":{"account_id":6015349,"reputation":368,"user_id":4724407,"accept_rate":25,"display_name":"Alexey Simchenko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2934,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1677750026,"creation_date":1480606484,"question_id":40914629,"body_markdown":"When I work with big project I often use logs in development branch. But I don&#39;t want to have logs in release/master branches. When I am doing some card I use 10-50 logs depending on the difficulty of the task.\r\nIt takes 2-5 min to delete 50 logs in different classes. It&#39;s not a lot compared with a time of fulfilling of a task but I want to reduce this time.\r\n\r\nFor example I have logs like this:\r\n\r\n    Log.d(TAG, &quot;Method: constantScrolling&quot;);\r\n....\r\n\r\n    Log.d(TAG, &quot;constantScrolling 2609 scrollTimer.cancel&quot;);\r\n\r\n\r\n\r\n\r\nThey all have the same beginning - Log.d(TAG\r\n\r\nTo find all logs to delete I use this: in java class &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;F&lt;/kbd&gt; -&gt; insert Log.d(TAG -&gt; press arrow down -&gt; press &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Y&lt;/kbd&gt; on every log.\r\nSo, I quickly delete all logs which having the same beginning Log.d(TAG\r\n\r\nIs there a way to do that quicker? \r\nFor example if there are some equal strings to delete I can use: right click on app -&gt; Replace in path.. -&gt; Text to find: Log.d(TAG, &quot;Method: constantScrolling&quot;); -&gt; Replace with: (empty) -&gt; Find\r\nSo, in some seconds I can delete equal strings on whole project.\r\nMaybe there is some combination for deleting strings that having the same beginning?","title":"Android Studio, delete all logs quickly from project","body":"<p>When I work with big project I often use logs in development branch. But I don't want to have logs in release/master branches. When I am doing some card I use 10-50 logs depending on the difficulty of the task.\nIt takes 2-5 min to delete 50 logs in different classes. It's not a lot compared with a time of fulfilling of a task but I want to reduce this time.</p>\n\n<p>For example I have logs like this:</p>\n\n<pre><code>Log.d(TAG, \"Method: constantScrolling\");\n</code></pre>\n\n<p>....</p>\n\n<pre><code>Log.d(TAG, \"constantScrolling 2609 scrollTimer.cancel\");\n</code></pre>\n\n<p>They all have the same beginning - Log.d(TAG</p>\n\n<p>To find all logs to delete I use this: in java class <kbd>Ctrl</kbd>+<kbd>F</kbd> -> insert Log.d(TAG -> press arrow down -> press <kbd>Ctrl</kbd>+<kbd>Y</kbd> on every log.\nSo, I quickly delete all logs which having the same beginning Log.d(TAG</p>\n\n<p>Is there a way to do that quicker? \nFor example if there are some equal strings to delete I can use: right click on app -> Replace in path.. -> Text to find: Log.d(TAG, \"Method: constantScrolling\"); -> Replace with: (empty) -> Find\nSo, in some seconds I can delete equal strings on whole project.\nMaybe there is some combination for deleting strings that having the same beginning?</p>\n"},{"tags":["java","android","android-studio","play-billing-library","google-play-billing"],"answers":[{"tags":[],"owner":{"account_id":4093834,"reputation":1,"user_id":3361173,"display_name":"D.Djaber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677749770,"creation_date":1677749770,"answer_id":75613591,"question_id":74751143,"body_markdown":"To check if user has bought a subscription use  queryPurchasesAsync() function.","title":"Check if the user has bought subscription in android java","body":"<p>To check if user has bought a subscription use  queryPurchasesAsync() function.</p>\n"}],"owner":{"account_id":27044541,"reputation":13,"user_id":20598914,"display_name":"IT Student"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":471,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677749770,"creation_date":1670657262,"question_id":74751143,"body_markdown":"How do I write a function that checks whether a user has bought a subscription or not whenever my App opens?\r\n\r\nThese function only tells that the user successfully bought the subscription or cancel the procedure during the payment procedure.\r\n\r\n    private PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener() {\r\n        @Override\r\n        public void onPurchasesUpdated(BillingResult billingResult, List&lt;Purchase&gt; purchases) {\r\n            // To be implemented in a later section.\r\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; purchases != null) {\r\n                for (Purchase purchase : purchases) {\r\n                    handlePurchase(purchase);\r\n                    Log.d(&quot;purchaseListners&quot;, purchase.toString());\r\n                }\r\n                Log.d(&quot;purchaseListners&quot;, &quot;true&quot;);\r\n    \r\n         \r\n    \r\n            } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.USER_CANCELED){\r\n                // Handle an error caused by a user cancelling the purchase flow.\r\n                Log.d(&quot;purchaseListners&quot;, &quot;false&quot;);\r\n                Constant.subscription = false;\r\n            } else {\r\n                Log.d(&quot;purchaseListners&quot;, &quot;shh&quot;);\r\n            }\r\n    \r\n        }\r\n    };\r\n\r\n\r\n    void handlePurchase(Purchase purchase) {\r\n        ConsumeParams consumeParams =\r\n                ConsumeParams.newBuilder()\r\n                        .setPurchaseToken(purchase.getPurchaseToken())\r\n                        .build();\r\n    \r\n        ConsumeResponseListener listener = new ConsumeResponseListener() {\r\n            @Override\r\n            public void onConsumeResponse(BillingResult billingResult, String purchaseToken) {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                    Constant.subscription = true;\r\n                    // Handle the success of the consume operation.\r\n\r\n                    Log.d(&quot;purchaseListners&quot;, billingResult.toString());\r\n                }\r\n            }\r\n        };\r\n    \r\n        billingClient.consumeAsync(consumeParams, listener);\r\n    }","title":"Check if the user has bought subscription in android java","body":"<p>How do I write a function that checks whether a user has bought a subscription or not whenever my App opens?</p>\n<p>These function only tells that the user successfully bought the subscription or cancel the procedure during the payment procedure.</p>\n<pre><code>private PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener() {\n    @Override\n    public void onPurchasesUpdated(BillingResult billingResult, List&lt;Purchase&gt; purchases) {\n        // To be implemented in a later section.\n        if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; purchases != null) {\n            for (Purchase purchase : purchases) {\n                handlePurchase(purchase);\n                Log.d(&quot;purchaseListners&quot;, purchase.toString());\n            }\n            Log.d(&quot;purchaseListners&quot;, &quot;true&quot;);\n\n     \n\n        } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.USER_CANCELED){\n            // Handle an error caused by a user cancelling the purchase flow.\n            Log.d(&quot;purchaseListners&quot;, &quot;false&quot;);\n            Constant.subscription = false;\n        } else {\n            Log.d(&quot;purchaseListners&quot;, &quot;shh&quot;);\n        }\n\n    }\n};\n\n\nvoid handlePurchase(Purchase purchase) {\n    ConsumeParams consumeParams =\n            ConsumeParams.newBuilder()\n                    .setPurchaseToken(purchase.getPurchaseToken())\n                    .build();\n\n    ConsumeResponseListener listener = new ConsumeResponseListener() {\n        @Override\n        public void onConsumeResponse(BillingResult billingResult, String purchaseToken) {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                Constant.subscription = true;\n                // Handle the success of the consume operation.\n\n                Log.d(&quot;purchaseListners&quot;, billingResult.toString());\n            }\n        }\n    };\n\n    billingClient.consumeAsync(consumeParams, listener);\n}\n</code></pre>\n"},{"tags":["java","rest"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1599564397,"post_id":63792686,"comment_id":112806479,"body_markdown":"There is a mismatch between the version of `JSONArray` that you compiled against and the one that you are using at runtime.","body":"There is a mismatch between the version of <code>JSONArray</code> that you compiled against and the one that you are using at runtime."}],"answers":[{"comments":[{"owner":{"account_id":18258323,"reputation":109,"user_id":13291702,"display_name":"Neha"},"score":0,"creation_date":1599566671,"post_id":63793132,"comment_id":112807588,"body_markdown":"i added now  &lt;version&gt;20200518&lt;/version&gt;but still shows the same error","body":"i added now  &lt;version&gt;20200518&lt;/version&gt;but still shows the same error"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1599573028,"post_id":63793132,"comment_id":112810905,"body_markdown":"It is the JAR file that is being used at runtime is the problem.  Not the build-time dependency.  Check where `JSONArray` is &gt;&gt;actually&lt;&lt; being loaded from at runtime.","body":"It is the JAR file that is being used at runtime is the problem.  Not the build-time dependency.  Check where <code>JSONArray</code> is &gt;&gt;actually&lt;&lt; being loaded from at runtime."},{"owner":{"account_id":18258323,"reputation":109,"user_id":13291702,"display_name":"Neha"},"score":0,"creation_date":1599657160,"post_id":63793132,"comment_id":112840704,"body_markdown":"sorry to ask but how do i chech that ?","body":"sorry to ask but how do i chech that ?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1599659093,"post_id":63793132,"comment_id":112841678,"body_markdown":"How are you running the code?  In a web container?  Which one?","body":"How are you running the code?  In a web container?  Which one?"},{"owner":{"account_id":18258323,"reputation":109,"user_id":13291702,"display_name":"Neha"},"score":0,"creation_date":1599714947,"post_id":63793132,"comment_id":112859978,"body_markdown":"i am running code in another server,i.e Amazon instance.i deploy my jar file inside war file and deploying that war file inside server.","body":"i am running code in another server,i.e Amazon instance.i deploy my jar file inside war file and deploying that war file inside server."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599565202,"creation_date":1599565202,"answer_id":63793132,"question_id":63792686,"body_markdown":"&gt; Any idea why I am having this error ?\r\n\r\nThere is a mismatch between the version of `JSONArray` that you compiled against and the one that you are using at runtime.  That causes the error.\r\n\r\nAccording to the [javadoc][1] for the 20160810 version in your POM file, there is a `forEach` method on `org.json.JSONArray` that is defined by the `Iterable` interface.  \r\n\r\nHowever it is clear from the exception that the version of `JSONArray` that you are using at runtime does not have that method.\r\n\r\nNote that the method is not present in the Android version (see https://developer.android.com/reference/org/json/JSONArray) and won&#39;t be present in versions prior to Java 8 ... because Java 7 `Iterable` doesn&#39;t have a `forEach` method ([javadoc][2]).\r\n\r\n\r\n  [1]: https://javadoc.io/doc/org.json/json/20160810/org/json/JSONArray.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html","title":"NoSuchMethodError in JAVA when using forEach Method","body":"<blockquote>\n<p>Any idea why I am having this error ?</p>\n</blockquote>\n<p>There is a mismatch between the version of <code>JSONArray</code> that you compiled against and the one that you are using at runtime.  That causes the error.</p>\n<p>According to the <a href=\"https://javadoc.io/doc/org.json/json/20160810/org/json/JSONArray.html\" rel=\"nofollow noreferrer\">javadoc</a> for the 20160810 version in your POM file, there is a <code>forEach</code> method on <code>org.json.JSONArray</code> that is defined by the <code>Iterable</code> interface.</p>\n<p>However it is clear from the exception that the version of <code>JSONArray</code> that you are using at runtime does not have that method.</p>\n<p>Note that the method is not present in the Android version (see <a href=\"https://developer.android.com/reference/org/json/JSONArray\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/org/json/JSONArray</a>) and won't be present in versions prior to Java 8 ... because Java 7 <code>Iterable</code> doesn't have a <code>forEach</code> method (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html\" rel=\"nofollow noreferrer\">javadoc</a>).</p>\n"},{"tags":[],"owner":{"account_id":10035537,"reputation":66,"user_id":7420332,"display_name":"vikas dl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599568631,"creation_date":1599568631,"answer_id":63794111,"question_id":63792686,"body_markdown":"Check for correct import statement.Your Code seems fine.\r\nI did quick check in Eclipse works fine.\r\n\r\n\r\n    import org.json.JSONArray;\r\n    import org.json.JSONObject;\r\n    \r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t  \r\n    \t\t\t\tJSONObject jo =   new JSONObject(5);\r\n    \t\t\t\tjo.put(&quot;red&quot;,new JSONArray(List.of(1,2,3,4,5)));\r\n    \t\t\t\tjo.put(&quot;blue&quot;, &quot;green&quot;);\r\n    \r\n    \t     \r\n    \t      \r\n    \t      jo.getJSONArray(&quot;red&quot;).forEach(item -&gt; {String var = item.toString();});\r\n    \r\n    \t}\r\n    \r\n    }","title":"NoSuchMethodError in JAVA when using forEach Method","body":"<p>Check for correct import statement.Your Code seems fine.\nI did quick check in Eclipse works fine.</p>\n<pre><code>import org.json.JSONArray;\nimport org.json.JSONObject;\n\npublic class Test {\n\n    public static void main(String[] args) {\n          \n                JSONObject jo =   new JSONObject(5);\n                jo.put(&quot;red&quot;,new JSONArray(List.of(1,2,3,4,5)));\n                jo.put(&quot;blue&quot;, &quot;green&quot;);\n\n         \n          \n          jo.getJSONArray(&quot;red&quot;).forEach(item -&gt; {String var = item.toString();});\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8998843,"reputation":21,"user_id":6708140,"display_name":"Ratheesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645602970,"creation_date":1645212174,"answer_id":71178839,"question_id":63792686,"body_markdown":"This is because while running, the jar is picking from the jar folder of Spark, inorder to override this, specify the jar in --jar of spark submit and also add conf like this :\r\n\r\n    --conf spark.driver.extraClassPath=json-20200518.jar \r\n    --conf spark.executor.extraClassPath=json-20200518.jar\r\n\r\nhttps://hadoopsters.com/2019/05/08/how-to-override-a-spark-dependency-in-client-or-cluster-mode/","title":"NoSuchMethodError in JAVA when using forEach Method","body":"<p>This is because while running, the jar is picking from the jar folder of Spark, inorder to override this, specify the jar in --jar of spark submit and also add conf like this :</p>\n<pre><code>--conf spark.driver.extraClassPath=json-20200518.jar \n--conf spark.executor.extraClassPath=json-20200518.jar\n</code></pre>\n<p><a href=\"https://hadoopsters.com/2019/05/08/how-to-override-a-spark-dependency-in-client-or-cluster-mode/\" rel=\"nofollow noreferrer\">https://hadoopsters.com/2019/05/08/how-to-override-a-spark-dependency-in-client-or-cluster-mode/</a></p>\n"},{"tags":[],"owner":{"account_id":10390033,"reputation":76,"user_id":7661683,"display_name":"Radzivon Hrechukha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677749762,"creation_date":1677749762,"answer_id":75613590,"question_id":63792686,"body_markdown":"I have faced the same problem while running my Spring Boot application together with [Spring Boot Configuration Properties Migrator][1].\r\nThe problem is correctly described [in the answer by Stephen C][2] : Spring Boot Migrator depends on old JSON handling library - `android-json:0.0.20131108.vaadin1` and another library in my application depends on newer `json:20210307`. \r\n\r\nThe solution for this case is to add the Migrator library excluding the old JSON handling library to avoid later loading of classes from it during runtime:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-properties-migrator&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;android-json&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-properties-migrator\r\n  [2]: https://stackoverflow.com/questions/63792686/nosuchmethoderror-in-java-when-using-foreach-method/63793132#63793132","title":"NoSuchMethodError in JAVA when using forEach Method","body":"<p>I have faced the same problem while running my Spring Boot application together with <a href=\"https://www.baeldung.com/spring-boot-properties-migrator\" rel=\"nofollow noreferrer\">Spring Boot Configuration Properties Migrator</a>.\nThe problem is correctly described <a href=\"https://stackoverflow.com/questions/63792686/nosuchmethoderror-in-java-when-using-foreach-method/63793132#63793132\">in the answer by Stephen C</a> : Spring Boot Migrator depends on old JSON handling library - <code>android-json:0.0.20131108.vaadin1</code> and another library in my application depends on newer <code>json:20210307</code>.</p>\n<p>The solution for this case is to add the Migrator library excluding the old JSON handling library to avoid later loading of classes from it during runtime:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-properties-migrator&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.vaadin.external.google&lt;/groupId&gt;\n                    &lt;artifactId&gt;android-json&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":18258323,"reputation":109,"user_id":13291702,"display_name":"Neha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1609,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1677749762,"creation_date":1599563456,"question_id":63792686,"body_markdown":"I have below code snipet : \r\n\r\n    JSONArray processNodes = new JSONObject(customCon.geteOutput())\r\n    \t\t\t\t\t\t.getJSONArray(&quot;process-node&quot;);\r\n    processNodes.forEach(item -&gt; {JSONObject node = (JSONObject) item;});\r\n\r\nI added dependency in pom.xml as : \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n        &lt;version&gt;20160810&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBut runtime it gives error as java.lang.NoSuchMethodError :org.json.JSONArray.forEach(Ljava/util/function/Consumer;)\r\n\r\nAny idea why i am having this error ?\r\n\r\n","title":"NoSuchMethodError in JAVA when using forEach Method","body":"<p>I have below code snipet :</p>\n<pre><code>JSONArray processNodes = new JSONObject(customCon.geteOutput())\n                        .getJSONArray(&quot;process-node&quot;);\nprocessNodes.forEach(item -&gt; {JSONObject node = (JSONObject) item;});\n</code></pre>\n<p>I added dependency in pom.xml as :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.json&lt;/groupId&gt;\n    &lt;artifactId&gt;json&lt;/artifactId&gt;\n    &lt;version&gt;20160810&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But runtime it gives error as java.lang.NoSuchMethodError :org.json.JSONArray.forEach(Ljava/util/function/Consumer;)</p>\n<p>Any idea why i am having this error ?</p>\n"},{"tags":["java","spring-boot","data-migration"],"comments":[{"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"score":2,"creation_date":1677749997,"post_id":75613567,"comment_id":133400569,"body_markdown":"This is not a suitable question for this page. Please do some research on your own first and then ask again if you&#39;re stuck. You could start improving this question by e.g. providing us with _how_ you even want to validate the records; by checking every single value to the corresponding value in the other DB? A normal job should do the trick :)","body":"This is not a suitable question for this page. Please do some research on your own first and then ask again if you&#39;re stuck. You could start improving this question by e.g. providing us with <i>how</i> you even want to validate the records; by checking every single value to the corresponding value in the other DB? A normal job should do the trick :)"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677755208,"post_id":75613567,"comment_id":133402146,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":11562818,"reputation":1,"user_id":8472044,"display_name":"Manjunath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677749641,"creation_date":1677749641,"question_id":75613567,"body_markdown":"Hi We have recently migrated the data from postgres to mongo db with some additional columns in mongo db.\r\nWe have migrated around 150M records . \r\n\r\nIs there anyway I can validate the data ( not 150M but atleast some data) using spring boot.","title":"How to validate the data from postgres to mongodb","body":"<p>Hi We have recently migrated the data from postgres to mongo db with some additional columns in mongo db.\nWe have migrated around 150M records .</p>\n<p>Is there anyway I can validate the data ( not 150M but atleast some data) using spring boot.</p>\n"},{"tags":["java","android-studio","apk"],"answers":[{"comments":[{"owner":{"account_id":24206884,"reputation":11,"user_id":18163944,"display_name":"Alex Montsarj"},"score":0,"creation_date":1677750146,"post_id":75613551,"comment_id":133400609,"body_markdown":"Still doesn&#39;t work. And why do I need a &#39;apk installer&#39;?","body":"Still doesn&#39;t work. And why do I need a &#39;apk installer&#39;?"},{"owner":{"account_id":12993876,"reputation":100,"user_id":9392209,"display_name":"Animalz"},"score":0,"creation_date":1677753321,"post_id":75613551,"comment_id":133401582,"body_markdown":"Worked for me when i tried with my apps. Can you explain the steps you are making from start to the end ? At best, you post your code and your config files.","body":"Worked for me when i tried with my apps. Can you explain the steps you are making from start to the end ? At best, you post your code and your config files."}],"tags":[],"owner":{"account_id":12993876,"reputation":100,"user_id":9392209,"display_name":"Animalz"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677749555,"creation_date":1677749555,"answer_id":75613551,"question_id":75613293,"body_markdown":"If i am getting it right, you transported the .apk file to your phone and tried to open it there. First of all, you need an android phone. There you navigate to the play store and download the &quot;APK Installer&quot; app. Open this app and install your .apk file like instructed there, hope i could help.","title":"Cannot open apk after install","body":"<p>If i am getting it right, you transported the .apk file to your phone and tried to open it there. First of all, you need an android phone. There you navigate to the play store and download the &quot;APK Installer&quot; app. Open this app and install your .apk file like instructed there, hope i could help.</p>\n"}],"owner":{"account_id":24206884,"reputation":11,"user_id":18163944,"display_name":"Alex Montsarj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677749555,"creation_date":1677747990,"question_id":75613293,"body_markdown":"I developed an android studio application with custom chrome tab for my website.\r\n\r\n\r\n```\r\npublic class AnnaStudio {\r\n    String url = &quot;https://www.example.com/&quot;;\r\n    CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();\r\n    CustomTabsIntent customTabsIntent = builder.build();\r\n    customTabsIntent.launchUrl(this, Uri.parse(url));\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example&quot;\r\n        minSdk 24\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &quot;androidx.browser:browser:1.4.0&quot;\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n}\r\n```\r\n\r\n[![Cannot run the app after install](https://i.stack.imgur.com/XUv9u.jpg)](https://i.stack.imgur.com/XUv9u.jpg)\r\n\r\n\r\nI tried building both as debug and as a signed release.\r\n\r\nI followed https://stackoverflow.com/questions/49629821/cant-open-to-install-apk-built-from-android-studio But it seems to address other issue, and the solutions weren&#39;t good for me.\r\n","title":"Cannot open apk after install","body":"<p>I developed an android studio application with custom chrome tab for my website.</p>\n<pre><code>public class AnnaStudio {\n    String url = &quot;https://www.example.com/&quot;;\n    CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();\n    CustomTabsIntent customTabsIntent = builder.build();\n    customTabsIntent.launchUrl(this, Uri.parse(url));\n\n}\n</code></pre>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    namespace 'com.example'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example&quot;\n        minSdk 24\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation &quot;androidx.browser:browser:1.4.0&quot;\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/XUv9u.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XUv9u.jpg\" alt=\"Cannot run the app after install\" /></a></p>\n<p>I tried building both as debug and as a signed release.</p>\n<p>I followed <a href=\"https://stackoverflow.com/questions/49629821/cant-open-to-install-apk-built-from-android-studio\">can&#39;t open (to install) apk built from android studio</a> But it seems to address other issue, and the solutions weren't good for me.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3817409,"reputation":12833,"user_id":3166417,"accept_rate":39,"display_name":"itzhar"},"score":0,"creation_date":1530614029,"post_id":51152228,"comment_id":89288114,"body_markdown":"add all items to the menu and change their visibility according to your needs. i don&#39;t think u can change the text","body":"add all items to the menu and change their visibility according to your needs. i don&#39;t think u can change the text"},{"owner":{"account_id":9168132,"reputation":517,"user_id":6816893,"display_name":"Anjani Mittal"},"score":0,"creation_date":1530615331,"post_id":51152228,"comment_id":89288948,"body_markdown":"refer to this https://stackoverflow.com/questions/7066657/android-how-to-dynamically-change-menu-item-text-outside-of-onoptionsitemssele","body":"refer to this <a href=\"https://stackoverflow.com/questions/7066657/android-how-to-dynamically-change-menu-item-text-outside-of-onoptionsitemssele\" title=\"android how to dynamically change menu item text outside of onoptionsitemssele\">stackoverflow.com/questions/7066657/&hellip;</a>"},{"owner":{"display_name":"user8959091"},"score":0,"creation_date":1530616767,"post_id":51152228,"comment_id":89289817,"body_markdown":"Where do you click? Is it a ListView or RecyclerView item, or a simple view like a TextView?","body":"Where do you click? Is it a ListView or RecyclerView item, or a simple view like a TextView?"}],"answers":[{"tags":[],"owner":{"account_id":4363176,"reputation":1175,"user_id":3559661,"display_name":"vbp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530613902,"creation_date":1530613902,"answer_id":51152358,"question_id":51152228,"body_markdown":"Inflate another menu when showing popup again.\r\n\r\n   \r\n\r\n      public void showPopup(View v) {\r\n        Context wrapper = new ContextThemeWrapper(this, R.style.PopupPerfilAjeno);\r\n        PopupMenu popup = new PopupMenu(wrapper, v);\r\n        popup.setOnMenuItemClickListener(this);\r\n        if (condition) popup.inflate(R.menu.menu);\r\n        else popup.inflate(R.menu.menu2);\r\n        popup.show();\r\n\r\n        menuOpts = popup.getMenu();\r\n    }","title":"Change PopupMenu items&#39; title programmatically","body":"<p>Inflate another menu when showing popup again.</p>\n\n<pre><code>  public void showPopup(View v) {\n    Context wrapper = new ContextThemeWrapper(this, R.style.PopupPerfilAjeno);\n    PopupMenu popup = new PopupMenu(wrapper, v);\n    popup.setOnMenuItemClickListener(this);\n    if (condition) popup.inflate(R.menu.menu);\n    else popup.inflate(R.menu.menu2);\n    popup.show();\n\n    menuOpts = popup.getMenu();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5746592,"reputation":954,"user_id":4537666,"accept_rate":77,"display_name":"guillefix"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1530616839,"creation_date":1530616839,"answer_id":51153331,"question_id":51152228,"body_markdown":"I&#39;ve found a solution. I added 4 boolean variables and modified the showPopup and addContact methods like this:\r\n\r\n\r\n    private boolean friend, workmate, neighbour, fan;\r\n    \r\n    public void showPopup(View v) {\r\n        Context wrapper = new ContextThemeWrapper(this, R.style.PopupPerfilAjeno);\r\n        PopupMenu popup = new PopupMenu(wrapper, v);\r\n        popup.setOnMenuItemClickListener(this);\r\n        popup.inflate(R.menu.menu);\r\n\r\n        Menu menuOpts = popup.getMenu();\r\n\r\n        if (friend) {\r\n            menuOpts.getItem(0).setTitle(R.string.remove_friends);\r\n        }\r\n        if (workmate) {\r\n            menuOpts.getItem(1).setTitle(R.string.remove_workamtes);\r\n        }\r\n        if (neighbour) {\r\n            menuOpts.getItem(2).setTitle(R.string.remove_neighbours);\r\n        }\r\n        if (fan) {\r\n            menuOpts.getItem(3).setTitle(R.string.remove_fans);\r\n        }\r\n\r\n        popup.show();\r\n    }\r\n\r\n    private void addContact(final int circle) {\r\n    \r\n        switch (circle) {\r\n            case 1:\r\n                 friend = true;\r\n                 workmate = false;\r\n                 neighbour = false;\r\n                 fan = false;\r\n                 break;\r\n            case 2:\r\n                 friend = false;\r\n                 workmate = true;\r\n                 neighbour = false;\r\n                 fan = false;\r\n                 break;\r\n            case 3:\r\n                 friend = false;\r\n                 workmate = false;\r\n                 neighbour = true;\r\n                 fan = false;\r\n                 break;\r\n            case 4:\r\n                 friend = false;\r\n                 workmate = false;\r\n                 neighbour = false;\r\n                 fan = true;\r\n                 break;\r\n         }\r\n     }","title":"Change PopupMenu items&#39; title programmatically","body":"<p>I've found a solution. I added 4 boolean variables and modified the showPopup and addContact methods like this:</p>\n\n<pre><code>private boolean friend, workmate, neighbour, fan;\n\npublic void showPopup(View v) {\n    Context wrapper = new ContextThemeWrapper(this, R.style.PopupPerfilAjeno);\n    PopupMenu popup = new PopupMenu(wrapper, v);\n    popup.setOnMenuItemClickListener(this);\n    popup.inflate(R.menu.menu);\n\n    Menu menuOpts = popup.getMenu();\n\n    if (friend) {\n        menuOpts.getItem(0).setTitle(R.string.remove_friends);\n    }\n    if (workmate) {\n        menuOpts.getItem(1).setTitle(R.string.remove_workamtes);\n    }\n    if (neighbour) {\n        menuOpts.getItem(2).setTitle(R.string.remove_neighbours);\n    }\n    if (fan) {\n        menuOpts.getItem(3).setTitle(R.string.remove_fans);\n    }\n\n    popup.show();\n}\n\nprivate void addContact(final int circle) {\n\n    switch (circle) {\n        case 1:\n             friend = true;\n             workmate = false;\n             neighbour = false;\n             fan = false;\n             break;\n        case 2:\n             friend = false;\n             workmate = true;\n             neighbour = false;\n             fan = false;\n             break;\n        case 3:\n             friend = false;\n             workmate = false;\n             neighbour = true;\n             fan = false;\n             break;\n        case 4:\n             friend = false;\n             workmate = false;\n             neighbour = false;\n             fan = true;\n             break;\n     }\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6767185,"reputation":17855,"user_id":5211833,"accept_rate":83,"display_name":"Adriaan"},"score":1,"creation_date":1677749096,"post_id":75613454,"comment_id":133400305,"body_markdown":"Please read [answer] and [edit] your answer to contain an explanation as to why this code would actually solve the problem at hand. Always remember that you&#39;re not only solving the problem, but are also educating the OP and any future readers of this post.","body":"Please read <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a> and <a href=\"https://stackoverflow.com/posts/75613454/edit\">edit</a> your answer to contain an explanation as to why this code would actually solve the problem at hand. Always remember that you&#39;re not only solving the problem, but are also educating the OP and any future readers of this post."}],"tags":[],"owner":{"account_id":5969539,"reputation":43,"user_id":4692271,"accept_rate":25,"display_name":"thefatb0b"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677749034,"creation_date":1677749034,"answer_id":75613454,"question_id":51152228,"body_markdown":"kotlin solution:\r\n\r\n    var popup = PopupMenu(this,view)\r\n    popup.inflate(R.menu.my_popup)\r\n    popup.menu[0].title = &quot;custom string&quot;\r\n    popup.show()","title":"Change PopupMenu items&#39; title programmatically","body":"<p>kotlin solution:</p>\n<pre><code>var popup = PopupMenu(this,view)\npopup.inflate(R.menu.my_popup)\npopup.menu[0].title = &quot;custom string&quot;\npopup.show()\n</code></pre>\n"}],"owner":{"account_id":5746592,"reputation":954,"user_id":4537666,"accept_rate":77,"display_name":"guillefix"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6181,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":51153331,"answer_count":3,"score":6,"last_activity_date":1677749034,"creation_date":1530613492,"question_id":51152228,"body_markdown":"I have a PopupMenu with 4 options: add as friend, as neighbour, as workmate and as fan. What I want to do is if you click, lets say, on &quot;Add as friend&quot;, then that option changes into &quot;remove friend&quot;.\r\n\r\nHere&#39;s what I&#39;ve tried so far:\r\n\r\nActivity:\r\n\r\n    private Menu menuOpts;\r\n    \r\n    public void showPopup(View v) {\r\n        Context wrapper = new ContextThemeWrapper(this, R.style.PopupPerfilAjeno);\r\n        PopupMenu popup = new PopupMenu(wrapper, v);\r\n        popup.setOnMenuItemClickListener(this);\r\n        popup.inflate(R.menu.menu);\r\n        popup.show();\r\n\r\n        menuOpts = popup.getMenu();\r\n    }\r\n\r\n    @Override\r\n    public boolean onMenuItemClick(MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.add_friend:\r\n                String add_as_friend = getString(R.string.add_as_friend );\r\n\r\n                if (item.getTitle().toString().equals(add_as_friend )) {\r\n                    addContact(1, item);\r\n                }\r\n                else {\r\n                    removeContact(1, item);\r\n                }\r\n                return true;\r\n            case R.id.add_workmate:\r\n                //\r\n                return true;\r\n            case R.id.add_neighbour:\r\n                //\r\n                return true;\r\n            case R.id.add_fan:\r\n                //\r\n                return true;\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n    // circle: 1 = friend, 2 = workmate, 3 = neighbour, 4 = fan\r\n    private void addContact(final int circle, final MenuItem item) {\r\n            \r\n        switch (circle) {\r\n            case 1:\r\n                menuOpts.findItem(R.id.add_friend).setTitle(R.string.remove_friend);\r\n                 // this won&#39;t work either:\r\n                 // item.setTitle(R.string.remove_friend);\r\n                 break;\r\n            case 2:\r\n                menuOpts.findItem(R.id.add_workmate).setTitle(R.string.remove_workmate);\r\n                 break;\r\n            case 3:\r\n                menuOpts.findItem(R.id.add_neighbour).setTitle(R.string.remove_neighbour);\r\n                 break;\r\n            case 4:\r\n                menuOpts.findItem(R.id.add_fan).setTitle(R.string.remove_fan);\r\n                 break;\r\n         }\r\n     }\r\n\r\n\r\nmenu.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/add_friend&quot;\r\n            android:orderInCategory=&quot;100&quot;\r\n            android:title=&quot;@string/add_as_friend&quot;\r\n            app:showAsAction=&quot;always&quot; /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/add_workmate&quot;\r\n            android:orderInCategory=&quot;100&quot;\r\n            android:title=&quot;@string/add_as_workmate&quot;\r\n            app:showAsAction=&quot;always&quot; /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/add_neighbour&quot;\r\n            android:orderInCategory=&quot;100&quot;\r\n            android:title=&quot;@string/add_as_neighbour&quot;\r\n            app:showAsAction=&quot;always&quot; /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/add_fan&quot;\r\n            android:orderInCategory=&quot;100&quot;\r\n            android:title=&quot;@string/add_as_fan&quot;\r\n            app:showAsAction=&quot;always&quot; /&gt;\r\n    &lt;/menu&gt;\r\n\r\n","title":"Change PopupMenu items&#39; title programmatically","body":"<p>I have a PopupMenu with 4 options: add as friend, as neighbour, as workmate and as fan. What I want to do is if you click, lets say, on \"Add as friend\", then that option changes into \"remove friend\".</p>\n\n<p>Here's what I've tried so far:</p>\n\n<p>Activity:</p>\n\n<pre><code>private Menu menuOpts;\n\npublic void showPopup(View v) {\n    Context wrapper = new ContextThemeWrapper(this, R.style.PopupPerfilAjeno);\n    PopupMenu popup = new PopupMenu(wrapper, v);\n    popup.setOnMenuItemClickListener(this);\n    popup.inflate(R.menu.menu);\n    popup.show();\n\n    menuOpts = popup.getMenu();\n}\n\n@Override\npublic boolean onMenuItemClick(MenuItem item) {\n    switch (item.getItemId()) {\n        case R.id.add_friend:\n            String add_as_friend = getString(R.string.add_as_friend );\n\n            if (item.getTitle().toString().equals(add_as_friend )) {\n                addContact(1, item);\n            }\n            else {\n                removeContact(1, item);\n            }\n            return true;\n        case R.id.add_workmate:\n            //\n            return true;\n        case R.id.add_neighbour:\n            //\n            return true;\n        case R.id.add_fan:\n            //\n            return true;\n        default:\n            return false;\n    }\n}\n// circle: 1 = friend, 2 = workmate, 3 = neighbour, 4 = fan\nprivate void addContact(final int circle, final MenuItem item) {\n\n    switch (circle) {\n        case 1:\n            menuOpts.findItem(R.id.add_friend).setTitle(R.string.remove_friend);\n             // this won't work either:\n             // item.setTitle(R.string.remove_friend);\n             break;\n        case 2:\n            menuOpts.findItem(R.id.add_workmate).setTitle(R.string.remove_workmate);\n             break;\n        case 3:\n            menuOpts.findItem(R.id.add_neighbour).setTitle(R.string.remove_neighbour);\n             break;\n        case 4:\n            menuOpts.findItem(R.id.add_fan).setTitle(R.string.remove_fan);\n             break;\n     }\n }\n</code></pre>\n\n<p>menu.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;item\n        android:id=\"@+id/add_friend\"\n        android:orderInCategory=\"100\"\n        android:title=\"@string/add_as_friend\"\n        app:showAsAction=\"always\" /&gt;\n    &lt;item\n        android:id=\"@+id/add_workmate\"\n        android:orderInCategory=\"100\"\n        android:title=\"@string/add_as_workmate\"\n        app:showAsAction=\"always\" /&gt;\n    &lt;item\n        android:id=\"@+id/add_neighbour\"\n        android:orderInCategory=\"100\"\n        android:title=\"@string/add_as_neighbour\"\n        app:showAsAction=\"always\" /&gt;\n    &lt;item\n        android:id=\"@+id/add_fan\"\n        android:orderInCategory=\"100\"\n        android:title=\"@string/add_as_fan\"\n        app:showAsAction=\"always\" /&gt;\n&lt;/menu&gt;\n</code></pre>\n"},{"tags":["java","record","java-14"],"answers":[{"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1601767491,"post_id":64186934,"comment_id":113508726,"body_markdown":"That is not allowed, unless the `@NotNull` annotation class is defined with a [target](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/annotation/Target.html) that includes [ElementType.RECORD_COMPONENT](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/annotation/ElementType.html#RECORD_COMPONENT).  Existing libraries’ annotation classes will need to be updated.","body":"That is not allowed, unless the <code>@NotNull</code> annotation class is defined with a <a href=\"https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/annotation/Target.html\" rel=\"nofollow noreferrer\">target</a> that includes <a href=\"https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/annotation/ElementType.html#RECORD_COMPONENT\" rel=\"nofollow noreferrer\">ElementType.RECORD_COMPONENT</a>.  Existing libraries’ annotation classes will need to be updated."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":11,"creation_date":1601890155,"post_id":64186934,"comment_id":113536049,"body_markdown":"@VGR annotation target locations are not mutual exclusive. A record component declaration still is a type use.","body":"@VGR annotation target locations are not mutual exclusive. A record component declaration still is a type use."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1601897932,"post_id":64186934,"comment_id":113539371,"body_markdown":"@Holger Oops, my mistake, you’re right.  The JEP actually says “Declaration annotations are permitted on record components if they are applicable to record components, parameters, fields, or methods.”","body":"@Holger Oops, my mistake, you’re right.  The JEP actually says “Declaration annotations are permitted on record components if they are applicable to record components, parameters, fields, or methods.”"}],"tags":[],"owner":{"account_id":8393641,"reputation":850,"user_id":6301562,"display_name":"dawis11"},"comment_count":3,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1601745490,"creation_date":1601745490,"answer_id":64186934,"question_id":64186922,"body_markdown":"You can do like that: \r\n\r\n    public record SomeData(@NotNull(message = &quot;Data not be null&quot;) String data) {}","title":"Java records validation anotation","body":"<p>You can do like that:</p>\n<pre><code>public record SomeData(@NotNull(message = &quot;Data not be null&quot;) String data) {}\n</code></pre>\n"}],"owner":{"account_id":16656303,"reputation":161,"user_id":14353673,"display_name":"Valdy B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14082,"favorite_count":0,"down_vote_count":2,"up_vote_count":10,"accepted_answer_id":64186934,"answer_count":1,"score":8,"last_activity_date":1677748777,"creation_date":1601745392,"question_id":64186922,"body_markdown":"I have old POJO with valid annotation:\r\n```\r\npublic class SomeData {\r\n\r\n    @NotNull(message = &quot;Data not be null&quot;)\r\n    private String data;\r\n\r\n    public FormData(String data) {\r\n        this.data = data;\r\n    }\r\n\r\n    public String getData() {\r\n        return data;\r\n    }\r\n\r\n   public String setData(String data) {\r\n        this.data = data\r\n    }\r\n    \r\n}\r\n```\r\n\r\nBut know I have `records`\r\n\r\n```\r\npublic record SomeData(String data) {}\r\n```\r\n\r\nHow I can add annotation in records?\r\n","title":"Java records validation anotation","body":"<p>I have old POJO with valid annotation:</p>\n<pre><code>public class SomeData {\n\n    @NotNull(message = &quot;Data not be null&quot;)\n    private String data;\n\n    public FormData(String data) {\n        this.data = data;\n    }\n\n    public String getData() {\n        return data;\n    }\n\n   public String setData(String data) {\n        this.data = data\n    }\n    \n}\n</code></pre>\n<p>But know I have <code>records</code></p>\n<pre><code>public record SomeData(String data) {}\n</code></pre>\n<p>How I can add annotation in records?</p>\n"},{"tags":["javascript","java","android","firebase","retrofit"],"comments":[{"owner":{"account_id":4561654,"reputation":3050,"user_id":3703819,"display_name":"dey"},"score":0,"creation_date":1677455851,"post_id":75575341,"comment_id":133336067,"body_markdown":"Please show the Java implementation","body":"Please show the Java implementation"},{"owner":{"account_id":20600038,"reputation":9,"user_id":15121497,"display_name":"Taha Younis"},"score":0,"creation_date":1677472583,"post_id":75575341,"comment_id":133337800,"body_markdown":"I edited the question now you can see it","body":"I edited the question now you can see it"}],"owner":{"account_id":20600038,"reputation":9,"user_id":15121497,"display_name":"Taha Younis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677748662,"creation_date":1677449888,"question_id":75575341,"body_markdown":"I Using firebase realtime database to store tokens, and I can send notification to one device which I specify it \r\nbut when I read all tokens in List of string and try to send notification to all the tokens by send the list of string it just send to one device the first\r\nany one have idea to make \r\n\r\n**API**\r\n\r\n    public interface API {\r\n    @FormUrlEncoded\r\n    @POST(&quot;send&quot;)\r\n    Call&lt;ResponseBody&gt; sendNotification(\r\n            @Field(&quot;token&quot;) List &lt;String&gt; tokens,\r\n            @Field(&quot;title&quot;) String title,\r\n            @Field(&quot;body&quot;) String body\r\n    );\r\n\r\n**Activity**\r\n\r\n     binding.btnSend.setOnClickListener(v -&gt; {\r\n            db.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    for (DataSnapshot dataSnapshot: snapshot.getChildren()){\r\n                        User_Model userModel = dataSnapshot.getValue(User_Model.class);\r\n                        tokens.add(userModel.getToken());\r\n                        // send notification to admin\r\n                        API api = retrofit.create(API.class);\r\n                        Call &lt;ResponseBody&gt; call = api.sendNotification(tokens,binding.etNotificationTitle.getText().toString(),binding.etNotificationBody.getText().toString());\r\n                        call.enqueue(new Callback &lt;ResponseBody&gt;() {\r\n                            @Override\r\n                            public void onResponse(Call &lt;ResponseBody&gt; call, Response &lt;ResponseBody&gt; response) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onFailure(Call &lt;ResponseBody&gt; call, Throwable t) {\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n                    Toast.makeText(AddNotificationActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n        });\r\n\r\n**NotificationHelper**\r\n\r\n    public class NotificationHelper {\r\n\r\n    public static void displayNotification(Context context,String title, String body){\r\n        String id = &quot;my_channel_id_01&quot;;\r\n        Intent notificationIntent = new Intent(context, Cart_Fragment.class);\r\n        notificationIntent.putExtra(&quot;cartId&quot;,2);\r\n        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);\r\n        PendingIntent pendingIntent = PendingIntent.getActivity(context,\r\n                0,notificationIntent,0);\r\n\r\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(context,id)\r\n                .setContentTitle(title)\r\n                .setContentText(body)\r\n                .setSmallIcon(R.drawable.img_logo)\r\n                .setPriority(NotificationCompat.PRIORITY_HIGH)\r\n                .setVibrate(new long[]{100,1000,200,340})\r\n                .setAutoCancel(false);\r\n        builder.addAction(R.drawable.img_logo,&quot;تاكيد الطلب&quot;,pendingIntent);\r\n        builder.setColor(Color.BLUE);\r\n        builder.setContentIntent(pendingIntent);\r\n\r\n        NotificationManagerCompat managerCompat= NotificationManagerCompat.from(context);\r\n        managerCompat.notify(1,builder.build());\r\n    }\r\n    }\r\n**MyFirebaseMessagingService**\r\n\r\n    public class MyFirebaseMessagingService extends FirebaseMessagingService {\r\n\r\n    @Override\r\n    public void onMessageReceived(@NonNull RemoteMessage message) {\r\n        super.onMessageReceived(message);\r\n\r\n        if (message.getNotification() != null){\r\n            String title = message.getNotification().getTitle();\r\n            String body = message.getNotification().getBody();\r\n\r\n            NotificationHelper.displayNotification(getApplicationContext(),title,body);\r\n        }\r\n    }\r\n    }\r\n\r\n**index.js**\r\n\r\n    const functions = require(&#39;firebase-functions&#39;);\r\n    var {google} = require(&#39;googleapis&#39;);\r\n    var MESSAGING_SCOPE = &quot;https://www.googleapis.com/auth/firebase.messaging&quot;;\r\n    var SCOPES = [MESSAGING_SCOPE];\r\n\r\n    var express = require(&#39;express&#39;);\r\n    var app = express(); \r\n\r\n    var bodyParser = require(&#39;body-parser&#39;);\r\n    var router = express.Router(); \r\n\r\n    var request = require(&#39;request&#39;);\r\n\r\n\r\n    app.use(bodyParser.urlencoded({extended:true}));\r\n    app.use(bodyParser.json());\r\n\r\n    router.post(&#39;/send&#39;, function(req, res){\r\n\r\n    getAccessToken().then(function(access_token){\r\n\r\n        var title = req.body.title; \r\n        var body = req.body.body; \r\n        var token = req.body.token; \r\n\r\n        request.post({\r\n            headers:{\r\n                Authorization: &#39;Bearer &#39;+access_token\r\n            }, \r\n            url: &quot;my url&quot;, \r\n            body: JSON.stringify(\r\n                {\r\n                    &quot;message&quot;:{\r\n                        &quot;token&quot; : token,\r\n                        &quot;notification&quot; : {\r\n                            &quot;body&quot; : body,\r\n                            &quot;title&quot; : title,\r\n                        }\r\n                    }\r\n                }\r\n            )\r\n        }, function(error, response, body){\r\n            res.end(body);\r\n            console.log(body);\r\n        });\r\n    });\r\n    });\r\n\r\n    app.use(&#39;/api&#39;, router);\r\n\r\n\r\n    function getAccessToken(){\r\n    return new Promise(function(resolve, reject){\r\n        var key = require(&quot;./service-account.json&quot;);\r\n        var jwtClient = new google.auth.JWT(\r\n            key.client_email,\r\n            null,\r\n            key.private_key,\r\n            SCOPES,\r\n            null\r\n        );\r\n        jwtClient.authorize(function(err, tokens){\r\n            if(err){\r\n                reject(err);\r\n                return; \r\n            }\r\n            resolve(tokens.access_token);\r\n        });\r\n    });\r\n    }\r\n\r\n    exports.api = functions.https.onRequest(app);\r\n\r\n","title":"send notification to all devices using FCM","body":"<p>I Using firebase realtime database to store tokens, and I can send notification to one device which I specify it\nbut when I read all tokens in List of string and try to send notification to all the tokens by send the list of string it just send to one device the first\nany one have idea to make</p>\n<p><strong>API</strong></p>\n<pre><code>public interface API {\n@FormUrlEncoded\n@POST(&quot;send&quot;)\nCall&lt;ResponseBody&gt; sendNotification(\n        @Field(&quot;token&quot;) List &lt;String&gt; tokens,\n        @Field(&quot;title&quot;) String title,\n        @Field(&quot;body&quot;) String body\n);\n</code></pre>\n<p><strong>Activity</strong></p>\n<pre><code> binding.btnSend.setOnClickListener(v -&gt; {\n        db.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                for (DataSnapshot dataSnapshot: snapshot.getChildren()){\n                    User_Model userModel = dataSnapshot.getValue(User_Model.class);\n                    tokens.add(userModel.getToken());\n                    // send notification to admin\n                    API api = retrofit.create(API.class);\n                    Call &lt;ResponseBody&gt; call = api.sendNotification(tokens,binding.etNotificationTitle.getText().toString(),binding.etNotificationBody.getText().toString());\n                    call.enqueue(new Callback &lt;ResponseBody&gt;() {\n                        @Override\n                        public void onResponse(Call &lt;ResponseBody&gt; call, Response &lt;ResponseBody&gt; response) {\n\n                        }\n\n                        @Override\n                        public void onFailure(Call &lt;ResponseBody&gt; call, Throwable t) {\n\n                        }\n                    });\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n                Toast.makeText(AddNotificationActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\n            }\n        });\n    });\n</code></pre>\n<p><strong>NotificationHelper</strong></p>\n<pre><code>public class NotificationHelper {\n\npublic static void displayNotification(Context context,String title, String body){\n    String id = &quot;my_channel_id_01&quot;;\n    Intent notificationIntent = new Intent(context, Cart_Fragment.class);\n    notificationIntent.putExtra(&quot;cartId&quot;,2);\n    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);\n    PendingIntent pendingIntent = PendingIntent.getActivity(context,\n            0,notificationIntent,0);\n\n    NotificationCompat.Builder builder = new NotificationCompat.Builder(context,id)\n            .setContentTitle(title)\n            .setContentText(body)\n            .setSmallIcon(R.drawable.img_logo)\n            .setPriority(NotificationCompat.PRIORITY_HIGH)\n            .setVibrate(new long[]{100,1000,200,340})\n            .setAutoCancel(false);\n    builder.addAction(R.drawable.img_logo,&quot;تاكيد الطلب&quot;,pendingIntent);\n    builder.setColor(Color.BLUE);\n    builder.setContentIntent(pendingIntent);\n\n    NotificationManagerCompat managerCompat= NotificationManagerCompat.from(context);\n    managerCompat.notify(1,builder.build());\n}\n}\n</code></pre>\n<p><strong>MyFirebaseMessagingService</strong></p>\n<pre><code>public class MyFirebaseMessagingService extends FirebaseMessagingService {\n\n@Override\npublic void onMessageReceived(@NonNull RemoteMessage message) {\n    super.onMessageReceived(message);\n\n    if (message.getNotification() != null){\n        String title = message.getNotification().getTitle();\n        String body = message.getNotification().getBody();\n\n        NotificationHelper.displayNotification(getApplicationContext(),title,body);\n    }\n}\n}\n</code></pre>\n<p><strong>index.js</strong></p>\n<pre><code>const functions = require('firebase-functions');\nvar {google} = require('googleapis');\nvar MESSAGING_SCOPE = &quot;https://www.googleapis.com/auth/firebase.messaging&quot;;\nvar SCOPES = [MESSAGING_SCOPE];\n\nvar express = require('express');\nvar app = express(); \n\nvar bodyParser = require('body-parser');\nvar router = express.Router(); \n\nvar request = require('request');\n\n\napp.use(bodyParser.urlencoded({extended:true}));\napp.use(bodyParser.json());\n\nrouter.post('/send', function(req, res){\n\ngetAccessToken().then(function(access_token){\n\n    var title = req.body.title; \n    var body = req.body.body; \n    var token = req.body.token; \n\n    request.post({\n        headers:{\n            Authorization: 'Bearer '+access_token\n        }, \n        url: &quot;my url&quot;, \n        body: JSON.stringify(\n            {\n                &quot;message&quot;:{\n                    &quot;token&quot; : token,\n                    &quot;notification&quot; : {\n                        &quot;body&quot; : body,\n                        &quot;title&quot; : title,\n                    }\n                }\n            }\n        )\n    }, function(error, response, body){\n        res.end(body);\n        console.log(body);\n    });\n});\n});\n\napp.use('/api', router);\n\n\nfunction getAccessToken(){\nreturn new Promise(function(resolve, reject){\n    var key = require(&quot;./service-account.json&quot;);\n    var jwtClient = new google.auth.JWT(\n        key.client_email,\n        null,\n        key.private_key,\n        SCOPES,\n        null\n    );\n    jwtClient.authorize(function(err, tokens){\n        if(err){\n            reject(err);\n            return; \n        }\n        resolve(tokens.access_token);\n    });\n});\n}\n\nexports.api = functions.https.onRequest(app);\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1677746863,"post_id":75612776,"comment_id":133399736,"body_markdown":"For what purpose do you need to create the `MultipartFile`?","body":"For what purpose do you need to create the <code>MultipartFile</code>?"},{"owner":{"account_id":8911546,"reputation":412,"user_id":6651590,"display_name":"Bartłomiej Adamczyk"},"score":0,"creation_date":1677747114,"post_id":75612776,"comment_id":133399802,"body_markdown":"I have a method contract that I need to maintain","body":"I have a method contract that I need to maintain"}],"answers":[{"comments":[{"owner":{"account_id":8911546,"reputation":412,"user_id":6651590,"display_name":"Bartłomiej Adamczyk"},"score":0,"creation_date":1677753277,"post_id":75613312,"comment_id":133401574,"body_markdown":"Yeah, that&#39;s one of the options I was considering, but I thought that there&#39;s maybe another way to handle this which I&#39;m maybe not aware of","body":"Yeah, that&#39;s one of the options I was considering, but I thought that there&#39;s maybe another way to handle this which I&#39;m maybe not aware of"}],"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677748531,"creation_date":1677748155,"answer_id":75613312,"question_id":75612776,"body_markdown":"You could always just implement the interface which is straight-forward in your case:\r\n```java\r\npublic class FileMultipartFile implements MultiartFile{\r\n    private Path path;\r\n    public FileMultipartFile(Path path){\r\n        this.path=path;\r\n    }\r\n    @Override \r\n    public String&#160;getName(){\r\n        return path.getFileName().toString();\r\n    }\r\n    @Override \r\n    public String&#160;getOriginalFilename() {\r\n        return getName();\r\n    }\r\n    @Override\r\n    public String&#160;getContentType() {\r\n        try{\r\n             //not ideal as mentioned in the comments of https://stackoverflow.com/a/8973468/10871900 \r\n             return Files.probeContentType(path); \r\n        }catch(IOException e){\r\n             return null;\r\n        }\r\n    }\r\n    @Override\r\n    public long&#160;getSize() {\r\n        return Files.size(path);\r\n    }\r\n    @Override\r\n    public boolean&#160;isEmpty() {\r\n        return getSize()==0;\r\n    }\r\n    @Override \r\n    public byte[]&#160;getBytes() throws IOException {\r\n        return Files.readAllBytes(path);\r\n    }\r\n    @Override \r\n    public InputStream&#160;getInputStream() throws IOException {\r\n         return Files.newInputStream(path);\r\n    }\r\n    @Override \r\n    public void&#160;transferTo(File&#160;dest) throws IOException, IllegalStateException {\r\n        transferTo(dest.toPath());\r\n    }\r\n    @Override \r\n    public void&#160;transferTo(Path&#160;dest) throws IOException, IllegalStateException {\r\n        Files.copy(path, dest);\r\n    }\r\n}\r\n```\r\n\r\nYou can create instances using `new FileMultipartFile(yourFile.toPath());`\r\n\r\nIn case you want to use a custom name, mime type or similar, you can add additional fields.","title":"How to create MultipartFile with Spring 6.x.x without using MockMultipartFile","body":"<p>You could always just implement the interface which is straight-forward in your case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FileMultipartFile implements MultiartFile{\n    private Path path;\n    public FileMultipartFile(Path path){\n        this.path=path;\n    }\n    @Override \n    public String getName(){\n        return path.getFileName().toString();\n    }\n    @Override \n    public String getOriginalFilename() {\n        return getName();\n    }\n    @Override\n    public String getContentType() {\n        try{\n             //not ideal as mentioned in the comments of https://stackoverflow.com/a/8973468/10871900 \n             return Files.probeContentType(path); \n        }catch(IOException e){\n             return null;\n        }\n    }\n    @Override\n    public long getSize() {\n        return Files.size(path);\n    }\n    @Override\n    public boolean isEmpty() {\n        return getSize()==0;\n    }\n    @Override \n    public byte[] getBytes() throws IOException {\n        return Files.readAllBytes(path);\n    }\n    @Override \n    public InputStream getInputStream() throws IOException {\n         return Files.newInputStream(path);\n    }\n    @Override \n    public void transferTo(File dest) throws IOException, IllegalStateException {\n        transferTo(dest.toPath());\n    }\n    @Override \n    public void transferTo(Path dest) throws IOException, IllegalStateException {\n        Files.copy(path, dest);\n    }\n}\n</code></pre>\n<p>You can create instances using <code>new FileMultipartFile(yourFile.toPath());</code></p>\n<p>In case you want to use a custom name, mime type or similar, you can add additional fields.</p>\n"}],"owner":{"account_id":8911546,"reputation":412,"user_id":6651590,"display_name":"Bartłomiej Adamczyk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1536,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75613312,"answer_count":1,"score":1,"last_activity_date":1677748531,"creation_date":1677744686,"question_id":75612776,"body_markdown":"Up until Spring 5.x I was creating the multipart files that way (using now deprecated **CommonsMultipartFile**):\r\n\r\n```\r\nOutputStream outputStream;\r\nfinal DiskFileItem diskFileItem = new DiskFileItem(&quot;file&quot;, mimeType, false, fileName, fileSize, repo));\r\ntry (InputStream inputStream = new FileInputStream(actualFile)) {\r\n    outputStream = diskFileItem.getOutputStream();\r\n    IOUtils.copy(inputStream, outputStream);\r\n    return new CommonsMultipartFile(diskFileItem);\r\n} catch (Exception e) {\r\n    throw new GoogleConversionFailedException(&quot;Cannot build MultipartFile&quot;, e);\r\n}\r\n```\r\n\r\nHow to achieve the same result (create MultipartFile out of java.io.File) on Spring 6 **without using MockMultipartFile** (documentation states that it&#39;s supposed to be used for testing i *really* want to avoid that route)?","title":"How to create MultipartFile with Spring 6.x.x without using MockMultipartFile","body":"<p>Up until Spring 5.x I was creating the multipart files that way (using now deprecated <strong>CommonsMultipartFile</strong>):</p>\n<pre><code>OutputStream outputStream;\nfinal DiskFileItem diskFileItem = new DiskFileItem(&quot;file&quot;, mimeType, false, fileName, fileSize, repo));\ntry (InputStream inputStream = new FileInputStream(actualFile)) {\n    outputStream = diskFileItem.getOutputStream();\n    IOUtils.copy(inputStream, outputStream);\n    return new CommonsMultipartFile(diskFileItem);\n} catch (Exception e) {\n    throw new GoogleConversionFailedException(&quot;Cannot build MultipartFile&quot;, e);\n}\n</code></pre>\n<p>How to achieve the same result (create MultipartFile out of java.io.File) on Spring 6 <strong>without using MockMultipartFile</strong> (documentation states that it's supposed to be used for testing i <em>really</em> want to avoid that route)?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1677709025,"post_id":75608688,"comment_id":133393974,"body_markdown":"You can add the values as parameters of the bean method and use them in the creation of the appropriate class.","body":"You can add the values as parameters of the bean method and use them in the creation of the appropriate class."}],"answers":[{"comments":[{"owner":{"account_id":15891300,"reputation":72,"user_id":11466340,"display_name":"DLarcom"},"score":0,"creation_date":1677708710,"post_id":75609390,"comment_id":133393924,"body_markdown":"Is there any way I can do this but create the bean as well? The overall issue was errors being thrown if spring tried to instantiate both Type1 and Type2 as beans, while the properties only exist for one or the other. I&#39;d get errors from @Value fields being null","body":"Is there any way I can do this but create the bean as well? The overall issue was errors being thrown if spring tried to instantiate both Type1 and Type2 as beans, while the properties only exist for one or the other. I&#39;d get errors from @Value fields being null"},{"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"score":0,"creation_date":1677712344,"post_id":75609390,"comment_id":133394618,"body_markdown":"Since `Type1` and `Type2` are different classes, each should request only what it needs. So only `property1` in the class for `Type1`. (I am not sure that answers your question)","body":"Since <code>Type1</code> and <code>Type2</code> are different classes, each should request only what it needs. So only <code>property1</code> in the class for <code>Type1</code>. (I am not sure that answers your question)"},{"owner":{"account_id":15891300,"reputation":72,"user_id":11466340,"display_name":"DLarcom"},"score":0,"creation_date":1677712638,"post_id":75609390,"comment_id":133394664,"body_markdown":"I fixed the issue by adding Component and Lazy to each of the classes, I did want it to fetch the existing bean, the bean just wasnt being created on startup because it was missing annotations. Thanks for the help!","body":"I fixed the issue by adding Component and Lazy to each of the classes, I did want it to fetch the existing bean, the bean just wasnt being created on startup because it was missing annotations. Thanks for the help!"}],"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677707704,"creation_date":1677707704,"answer_id":75609390,"question_id":75608688,"body_markdown":"Spring is not going to process those annotations unless you let it do the instantiation. You will want to use the application context like so.\r\n\r\n```Java\r\n@Bean\r\npublic SomeInterface someinterface(){\r\n\r\n    @Autowired private ApplicationContext context;\r\n\r\n    switch(type) {\r\n        case &quot;type1&quot;:\r\n            return context.getBean(Type1.class);\r\n        case &quot;type2&quot;:\r\n            return context.getBean(Type2.class);\r\n        default:\r\n            throw Exception\r\n    }\r\n}\r\n```","title":"Spring Boot @Value is null, cant be solved with @Component","body":"<p>Spring is not going to process those annotations unless you let it do the instantiation. You will want to use the application context like so.</p>\n<pre><code>@Bean\npublic SomeInterface someinterface(){\n\n    @Autowired private ApplicationContext context;\n\n    switch(type) {\n        case &quot;type1&quot;:\n            return context.getBean(Type1.class);\n        case &quot;type2&quot;:\n            return context.getBean(Type2.class);\n        default:\n            throw Exception\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677748476,"creation_date":1677748476,"answer_id":75613347,"question_id":75608688,"body_markdown":"The accepted answer is a somewhat risky thing to do because it relies on the `TypeX` classes already having been instantiated when the `@Configuration` containing the `@Bean` is evaluated. \r\n\r\nThe canonical way to do this is to not declare the implementing classes as `@Component`s if you declare them as `@Bean`s anyway, but to create them in the `@Bean` method.\r\n\r\n```\r\n@Configuration\r\nclass MyBeans {\r\n @Bean\r\n SomeInterface(@Value(@Value(&quot;${some.property}&quot;) prop1, \r\n                      @Value(&quot;${some.property2}&quot;) prop2) {\r\n  var type = ...; // not clear where this comes from in your example\r\n\r\n  SomeInterface result;\r\n  switch(type) {\r\n   case &quot;type1&quot;: return new Type1(prop1, prop2);\r\n   case &quot;type2&quot;: return new Type2(prop1, prop2);\r\n   default: throw new IllegalArgumentException(&quot;cannot evaluate type&quot;);\r\n  }\r\n }\r\n}\r\n```\r\n\r\n","title":"Spring Boot @Value is null, cant be solved with @Component","body":"<p>The accepted answer is a somewhat risky thing to do because it relies on the <code>TypeX</code> classes already having been instantiated when the <code>@Configuration</code> containing the <code>@Bean</code> is evaluated.</p>\n<p>The canonical way to do this is to not declare the implementing classes as <code>@Component</code>s if you declare them as <code>@Bean</code>s anyway, but to create them in the <code>@Bean</code> method.</p>\n<pre><code>@Configuration\nclass MyBeans {\n @Bean\n SomeInterface(@Value(@Value(&quot;${some.property}&quot;) prop1, \n                      @Value(&quot;${some.property2}&quot;) prop2) {\n  var type = ...; // not clear where this comes from in your example\n\n  SomeInterface result;\n  switch(type) {\n   case &quot;type1&quot;: return new Type1(prop1, prop2);\n   case &quot;type2&quot;: return new Type2(prop1, prop2);\n   default: throw new IllegalArgumentException(&quot;cannot evaluate type&quot;);\n  }\n }\n}\n</code></pre>\n"}],"owner":{"account_id":15891300,"reputation":72,"user_id":11466340,"display_name":"DLarcom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":370,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75609390,"answer_count":2,"score":0,"last_activity_date":1677748476,"creation_date":1677702679,"question_id":75608688,"body_markdown":"I have a bean in my spring boot project that needs to return one or the other depending on what settings are provided in an external application.properties file.\r\n\r\nThe setting that will always exist is &quot;type&quot;. Each of the 2 types implement &quot;SomeInterface&quot;, but have their own unique settings from the properties file to be fetched.\r\n```\r\n@Bean\r\npublic SomeInterface someinterface(){\r\n\r\n\tswitch(type) {\r\n\t\tcase &quot;type1&quot;:\r\n\t\t\treturn new Type1();\r\n\t\tcase &quot;type2&quot;:\r\n\t\t\treturn new Type2();\r\n\t\tdefault:\r\n\t\t\tthrow Exception\r\n\t}\r\n}\r\n```\r\n```\r\npublic class Type1 implements SomeInterface {\r\n\r\n\t@Value(&quot;${some.property}&quot;)\r\n\tprivate String property1;\t//Always null\r\n\r\n\t@Value(&quot;${some.property2}&quot;)\r\n\tprivate String property2;\t//Always null\r\n}\r\n```\r\n\r\nI&#39;ve looked around and it seems I cant fetch the values using `@Value` within each of the two types because of the class being instantiated with `new`. Other posts I&#39;ve seen fix this issue use `@Component` to have spring instantiate the bean for you, but this doesnt work in my case. When properties for 1 type exists, the properties for the other will not. Is there a simple way to be able to fetch these properties with `@Value` in each of the type classes while also only instantiating the type that is needed instead of trying to instantiate both?","title":"Spring Boot @Value is null, cant be solved with @Component","body":"<p>I have a bean in my spring boot project that needs to return one or the other depending on what settings are provided in an external application.properties file.</p>\n<p>The setting that will always exist is &quot;type&quot;. Each of the 2 types implement &quot;SomeInterface&quot;, but have their own unique settings from the properties file to be fetched.</p>\n<pre><code>@Bean\npublic SomeInterface someinterface(){\n\n    switch(type) {\n        case &quot;type1&quot;:\n            return new Type1();\n        case &quot;type2&quot;:\n            return new Type2();\n        default:\n            throw Exception\n    }\n}\n</code></pre>\n<pre><code>public class Type1 implements SomeInterface {\n\n    @Value(&quot;${some.property}&quot;)\n    private String property1;   //Always null\n\n    @Value(&quot;${some.property2}&quot;)\n    private String property2;   //Always null\n}\n</code></pre>\n<p>I've looked around and it seems I cant fetch the values using <code>@Value</code> within each of the two types because of the class being instantiated with <code>new</code>. Other posts I've seen fix this issue use <code>@Component</code> to have spring instantiate the bean for you, but this doesnt work in my case. When properties for 1 type exists, the properties for the other will not. Is there a simple way to be able to fetch these properties with <code>@Value</code> in each of the type classes while also only instantiating the type that is needed instead of trying to instantiate both?</p>\n"},{"tags":["python","java","image","opencv","computer-vision"],"comments":[{"owner":{"account_id":12652010,"reputation":2802,"user_id":10626495,"display_name":"maciek97x"},"score":0,"creation_date":1677743970,"post_id":75612479,"comment_id":133399051,"body_markdown":"Can you show the results?","body":"Can you show the results?"},{"owner":{"account_id":9897892,"reputation":57149,"user_id":7328782,"accept_rate":86,"display_name":"Cris Luengo"},"score":0,"creation_date":1677763290,"post_id":75612479,"comment_id":133404405,"body_markdown":"In Python you not only convert to RGB, but you also change the order of dimensions of the array, going from interleaved (the three values for each pixel being together in memory) to planar order (all the red values being together, and all the green values being together, etc). Why do you need this? Are you sure you want to copy this in Java?","body":"In Python you not only convert to RGB, but you also change the order of dimensions of the array, going from interleaved (the three values for each pixel being together in memory) to planar order (all the red values being together, and all the green values being together, etc). Why do you need this? Are you sure you want to copy this in Java?"}],"answers":[{"comments":[{"owner":{"account_id":9897892,"reputation":57149,"user_id":7328782,"accept_rate":86,"display_name":"Cris Luengo"},"score":1,"creation_date":1677763160,"post_id":75613344,"comment_id":133404367,"body_markdown":"Since both BGR to RGB and RGB to BGR involve swapping the 1st and 3rd channels, I would guess there’s no difference between `COLOR_RGB2BGR` and `COLOR_BGR2RGB`.","body":"Since both BGR to RGB and RGB to BGR involve swapping the 1st and 3rd channels, I would guess there’s no difference between <code>COLOR_RGB2BGR</code> and <code>COLOR_BGR2RGB</code>."},{"owner":{"account_id":4919628,"reputation":18071,"user_id":3962537,"display_name":"Dan Mašek"},"score":1,"creation_date":1677764440,"post_id":75613344,"comment_id":133404784,"body_markdown":"@CrisLuengo Yes, absolutely no difference, since `COLOR_RGB2BGR == COLOR_BGR2RGB`","body":"@CrisLuengo Yes, absolutely no difference, since <code>COLOR_RGB2BGR == COLOR_BGR2RGB</code>"}],"tags":[],"owner":{"account_id":26589772,"reputation":582,"user_id":20213170,"display_name":"nick"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677748437,"creation_date":1677748437,"answer_id":75613344,"question_id":75612479,"body_markdown":"It&#39;s pretty straight forward, and you already got the right function (````cvtColor()````). \r\n\r\nAre you using the right flag ? ````COLOR_RGB2BGR```` means converting RGB-&gt;BGR, but you say you want BGR-&gt;RGB ? That would be ````COLOR_BGR2RGB````. \\\r\nHere is the full list: https://docs.opencv.org/3.4/d8/d01/group__imgproc__color__conversions.html\r\n\r\nYou can also tell ````imread()```` in what color space to read the image file, btw: \\\r\n````Mat cv::imread \t(const String&amp; filename, int flags = IMREAD_COLOR)```` \\\r\nhttps://docs.opencv.org/3.4/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56","title":"How to convert OpenCV Java BGR Image Matrix to RGB?","body":"<p>It's pretty straight forward, and you already got the right function (<code>cvtColor()</code>).</p>\n<p>Are you using the right flag ? <code>COLOR_RGB2BGR</code> means converting RGB-&gt;BGR, but you say you want BGR-&gt;RGB ? That would be <code>COLOR_BGR2RGB</code>. <br />\nHere is the full list: <a href=\"https://docs.opencv.org/3.4/d8/d01/group__imgproc__color__conversions.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/3.4/d8/d01/group__imgproc__color__conversions.html</a></p>\n<p>You can also tell <code>imread()</code> in what color space to read the image file, btw: <br />\n<code>Mat cv::imread  (const String&amp; filename, int flags = IMREAD_COLOR)</code> <br />\n<a href=\"https://docs.opencv.org/3.4/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56\" rel=\"nofollow noreferrer\">https://docs.opencv.org/3.4/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56</a></p>\n"}],"owner":{"account_id":19096069,"reputation":149,"user_id":13945310,"display_name":"BayanR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677748437,"creation_date":1677742576,"question_id":75612479,"body_markdown":"In python we can do the following to convert CV BGR value to RGB\r\n\r\n    im = cv2.imread(&quot;image.jpg&quot;) # BGR\r\n    im = im.transpose((2, 0, 1))[::-1]  # HWC to CHW, BGR to RGB\r\n\r\nI can&#39;t figure out how to do this with Java. \r\nI&#39;ve tried the following but it gives a completely different value when the second line is executed.\r\n\r\n    Mat image = Imgcodecs.imread(&quot;image.jpg&quot;); // BGR matches the python thus far\r\n    Imgproc.cvtColor(image, image, Imgproc.COLOR_RGB2BGR); // doesnt match the python","title":"How to convert OpenCV Java BGR Image Matrix to RGB?","body":"<p>In python we can do the following to convert CV BGR value to RGB</p>\n<pre><code>im = cv2.imread(&quot;image.jpg&quot;) # BGR\nim = im.transpose((2, 0, 1))[::-1]  # HWC to CHW, BGR to RGB\n</code></pre>\n<p>I can't figure out how to do this with Java.\nI've tried the following but it gives a completely different value when the second line is executed.</p>\n<pre><code>Mat image = Imgcodecs.imread(&quot;image.jpg&quot;); // BGR matches the python thus far\nImgproc.cvtColor(image, image, Imgproc.COLOR_RGB2BGR); // doesnt match the python\n</code></pre>\n"},{"tags":["java","android","android-studio","licensing","android-lvl"],"comments":[{"owner":{"account_id":15387165,"reputation":23,"user_id":14521298,"display_name":"Jade Kush"},"score":0,"creation_date":1677741764,"post_id":75606500,"comment_id":133398593,"body_markdown":"Could you provide a more detailed answer? Thanks.","body":"Could you provide a more detailed answer? Thanks."}],"answers":[{"comments":[{"owner":{"account_id":15387165,"reputation":23,"user_id":14521298,"display_name":"Jade Kush"},"score":0,"creation_date":1677769448,"post_id":75613137,"comment_id":133406384,"body_markdown":"You would be able to help me to convert that kotlin code to java?\nhttps://stackoverflow.com/questions/75617277/converting-rough-implementation-of-google-play-licensing-api-from-kotlin-to-java","body":"You would be able to help me to convert that kotlin code to java? <a href=\"https://stackoverflow.com/questions/75617277/converting-rough-implementation-of-google-play-licensing-api-from-kotlin-to-java\" title=\"converting rough implementation of google play licensing api from kotlin to java\">stackoverflow.com/questions/75617277/&hellip;</a>"}],"tags":[],"owner":{"account_id":15268897,"reputation":1894,"user_id":11016652,"display_name":"zomega"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677748123,"creation_date":1677747058,"answer_id":75613137,"question_id":75606500,"body_markdown":"I don&#39;t know why but when you download this library using the SDK manager then the `build.gradle` of the library is missing. And so you can&#39;t import it.\r\n\r\nPlease download the code from the git repository directly. Also note that this is the official way to download the library as described under [https://developer.android.com/google/play/licensing/setting-up][1].\r\n\r\nYou can use the `git` command or download it using the browser. You can find the repo under [https://github.com/google/play-licensing][2]. Download/extract it to an folder which is **not** inside your Android project.\r\n\r\nIf you don&#39;t have git select the green button and then select `Download ZIP`. Extract the ZIP to a folder which is **not** in your Android project folder.\r\n\r\nNow open your Android Studio project and click `File &gt; New &gt; Import Module...`. Select the `lvl_library` folder of the library.\r\n\r\nIf it asks you select that you want to trust the library.\r\n\r\nYou are done.\r\n\r\nPlease note when there are updates for this library you have to do it manually. Close Android Studio. Delete `lvl_library` from your project. Copy the new `lvl_library` to your project. Done.\r\n\r\n  [1]: https://developer.android.com/google/play/licensing/setting-up\r\n  [2]: https://github.com/google/play-licensing","title":"Importing module from source (google play licensing) doesn&#39;t actually import anything","body":"<p>I don't know why but when you download this library using the SDK manager then the <code>build.gradle</code> of the library is missing. And so you can't import it.</p>\n<p>Please download the code from the git repository directly. Also note that this is the official way to download the library as described under <a href=\"https://developer.android.com/google/play/licensing/setting-up\" rel=\"nofollow noreferrer\">https://developer.android.com/google/play/licensing/setting-up</a>.</p>\n<p>You can use the <code>git</code> command or download it using the browser. You can find the repo under <a href=\"https://github.com/google/play-licensing\" rel=\"nofollow noreferrer\">https://github.com/google/play-licensing</a>. Download/extract it to an folder which is <strong>not</strong> inside your Android project.</p>\n<p>If you don't have git select the green button and then select <code>Download ZIP</code>. Extract the ZIP to a folder which is <strong>not</strong> in your Android project folder.</p>\n<p>Now open your Android Studio project and click <code>File &gt; New &gt; Import Module...</code>. Select the <code>lvl_library</code> folder of the library.</p>\n<p>If it asks you select that you want to trust the library.</p>\n<p>You are done.</p>\n<p>Please note when there are updates for this library you have to do it manually. Close Android Studio. Delete <code>lvl_library</code> from your project. Copy the new <code>lvl_library</code> to your project. Done.</p>\n"}],"owner":{"account_id":15387165,"reputation":23,"user_id":14521298,"display_name":"Jade Kush"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75613137,"answer_count":1,"score":1,"last_activity_date":1677748123,"creation_date":1677688310,"question_id":75606500,"body_markdown":"I am following this answer in order to setup Google Play Licensing: https://stackoverflow.com/questions/62852617/google-play-licencing-for-an-android-app-in-android-studio?fbclid=IwAR3JJ4fm9Jm-Q8aifuQlfPOaMfgi32IvESqANpkvzIl-lEtKibADds7K47E\r\n\r\nEverything perfect until **.10**\r\nHowever when I finish importing the module I don&#39;t have any module/folder in my project. I tried to check in the path of my android studio project and there is a folder with the module name I&#39;ve chosen but it&#39;s empty. What am I doing wrong?\r\n","title":"Importing module from source (google play licensing) doesn&#39;t actually import anything","body":"<p>I am following this answer in order to setup Google Play Licensing: <a href=\"https://stackoverflow.com/questions/62852617/google-play-licencing-for-an-android-app-in-android-studio?fbclid=IwAR3JJ4fm9Jm-Q8aifuQlfPOaMfgi32IvESqANpkvzIl-lEtKibADds7K47E\">Google Play Licencing for an Android app in Android Studio</a></p>\n<p>Everything perfect until <strong>.10</strong>\nHowever when I finish importing the module I don't have any module/folder in my project. I tried to check in the path of my android studio project and there is a folder with the module name I've chosen but it's empty. What am I doing wrong?</p>\n"},{"tags":["java","c#","c++","visual-studio"],"comments":[{"owner":{"account_id":9472425,"reputation":582,"user_id":9741277,"display_name":"leun4m"},"score":1,"creation_date":1677748370,"post_id":75613240,"comment_id":133400118,"body_markdown":"Food for thought: I wouldn&#39;t soley advise to make such a decision on IDE convenience. So what do you mean to express; if it&#39;s just a selection of values I would go with an enum, if you would actually have some logic behind it, the usage of classes might come in handy.","body":"Food for thought: I wouldn&#39;t soley advise to make such a decision on IDE convenience. So what do you mean to express; if it&#39;s just a selection of values I would go with an enum, if you would actually have some logic behind it, the usage of classes might come in handy."},{"owner":{"account_id":22579674,"reputation":975,"user_id":16764510,"display_name":"Yujian Yao - MSFT"},"score":0,"creation_date":1677832574,"post_id":75613240,"comment_id":133418771,"body_markdown":"You couldn&#39;t avoid &quot;.&quot; when you use class, enum is already a good way to go.","body":"You couldn&#39;t avoid &quot;.&quot; when you use class, enum is already a good way to go."}],"owner":{"account_id":11562141,"reputation":53,"user_id":8471533,"display_name":"pippo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1677747665,"creation_date":1677747665,"question_id":75613240,"body_markdown":"I have a tree-structured categories parameter that I want to pass to a function. I hope that it can be friendly enough to the coding assistance like Visual Assist or IntelliSense, and it can directly pop up the current possible options. Currently, the best option I can think of to achieve this is to use an Enum type as a parameter. For example:\r\n\r\n    enum CategoriesTree\r\n    {\r\n            ModuleA,\r\n            ModuleA_SubModuleA,\r\n            ModuleA_SubModuleB,\r\n            ModuleA_SubModuleC,\r\n            ModuleA_SubModuleC_ClassA,\r\n            ModuleA_SubModuleC_ClassB,\r\n            ModuleA_SubModuleC_ClassC,\r\n            ModuleA_SubModuleD,\r\n            ModuleB,\r\n            ModuleB_SubModuleA,\r\n            ModuleB_SubModuleB,\r\n            ModuleB_SubModuleC,\r\n    }\r\n    \r\n    void MyFunction(CategoriesTree category);\r\n\r\nIn an IDE like Visual Studio, after I type &quot;void MyFunction(&quot;, the code assist will directly list all the enumeration types for me to choose from. This achieves half of what I expect. However, the drawback is that it directly gives all the enumerations. In actual situations, there may be thousands of enumerations, so it is not convenient. What I hope for is to give me a hierarchical tree structure level by level, such as starting with two options, **ModuleA** and **ModuleB**, and then when I choose **ModuleA**, press Tab or &quot;.&quot;, and then give me the next level of options: **SubModuleA**, **SubModuleB**, **SubModuleC** and **SubModuleD**, and so on.\r\n\r\nTherefore, I have come up with another solution:\r\n\r\n    public class category_base\r\n    {\r\n    \r\n    };\r\n    \r\n    public class CategoriesTree\r\n    {\r\n        public class ModuleA_Def : category_base\r\n        {\r\n            public class SubModuleA_Def : category_base\r\n            {\r\n            };\r\n            public class SubModuleB_Def : category_base\r\n            {\r\n            };\r\n            public class SubModuleC_Def : category_base\r\n            {\r\n                public class ClassA_Def : category_base\r\n                {\r\n                };\r\n                public class ClassB_Def : category_base\r\n                {\r\n                };\r\n                public class ClassC_Def : category_base\r\n                {\r\n                };\r\n                public ClassA_Def ClassA = new ClassA_Def();\r\n                public ClassB_Def ClassB = new ClassB_Def();\r\n                public ClassC_Def ClassC = new ClassC_Def();\r\n            };\r\n            public class SubModuleD_Def : category_base\r\n            {\r\n            };\r\n            public SubModuleA_Def SubModuleA = new SubModuleA_Def();\r\n            public SubModuleB_Def SubModuleB = new SubModuleB_Def();\r\n            public SubModuleC_Def SubModuleC = new SubModuleC_Def();\r\n            public SubModuleD_Def SubModuleD = new SubModuleD_Def();\r\n        };\r\n    \r\n        public class ModuleB_Def : category_base\r\n        {\r\n            public class SubModuleA_Def : category_base\r\n            {\r\n            };\r\n            public class SubModuleB_Def : category_base\r\n            {\r\n            };\r\n            public class SubModuleC_Def : category_base\r\n            {\r\n            };\r\n            public SubModuleA_Def SubModuleA = new SubModuleA_Def();\r\n            public SubModuleB_Def SubModuleB = new SubModuleB_Def();\r\n            public SubModuleC_Def SubModuleC = new SubModuleC_Def();\r\n        };\r\n        public static ModuleA_Def ModuleA = new ModuleA_Def();\r\n        public static ModuleB_Def ModuleB = new ModuleB_Def();\r\n    }\r\n\r\nNow, I need to call this function:\r\n\r\n    void MyFunction(category_base category);\r\n\r\nThis method can indeed do what the enumeration method cannot do: my entire parameter has been structured into a tree. However, it cannot achieve what the enumeration can do: when I type &quot;void MyFunction(&quot;, there is no code prompt popping up. I have to manually enter &quot;CategoriesTree&quot; and add a &quot;.&quot; to start.\r\n\r\nI would like to ask if there is a solution that can achieve the advantages of both these 2 methods? And the solution should be used in C++, C# and Java, event Typescript.\r\n","title":"The best practice to pass hierrachy category value to functions","body":"<p>I have a tree-structured categories parameter that I want to pass to a function. I hope that it can be friendly enough to the coding assistance like Visual Assist or IntelliSense, and it can directly pop up the current possible options. Currently, the best option I can think of to achieve this is to use an Enum type as a parameter. For example:</p>\n<pre><code>enum CategoriesTree\n{\n        ModuleA,\n        ModuleA_SubModuleA,\n        ModuleA_SubModuleB,\n        ModuleA_SubModuleC,\n        ModuleA_SubModuleC_ClassA,\n        ModuleA_SubModuleC_ClassB,\n        ModuleA_SubModuleC_ClassC,\n        ModuleA_SubModuleD,\n        ModuleB,\n        ModuleB_SubModuleA,\n        ModuleB_SubModuleB,\n        ModuleB_SubModuleC,\n}\n\nvoid MyFunction(CategoriesTree category);\n</code></pre>\n<p>In an IDE like Visual Studio, after I type &quot;void MyFunction(&quot;, the code assist will directly list all the enumeration types for me to choose from. This achieves half of what I expect. However, the drawback is that it directly gives all the enumerations. In actual situations, there may be thousands of enumerations, so it is not convenient. What I hope for is to give me a hierarchical tree structure level by level, such as starting with two options, <strong>ModuleA</strong> and <strong>ModuleB</strong>, and then when I choose <strong>ModuleA</strong>, press Tab or &quot;.&quot;, and then give me the next level of options: <strong>SubModuleA</strong>, <strong>SubModuleB</strong>, <strong>SubModuleC</strong> and <strong>SubModuleD</strong>, and so on.</p>\n<p>Therefore, I have come up with another solution:</p>\n<pre><code>public class category_base\n{\n\n};\n\npublic class CategoriesTree\n{\n    public class ModuleA_Def : category_base\n    {\n        public class SubModuleA_Def : category_base\n        {\n        };\n        public class SubModuleB_Def : category_base\n        {\n        };\n        public class SubModuleC_Def : category_base\n        {\n            public class ClassA_Def : category_base\n            {\n            };\n            public class ClassB_Def : category_base\n            {\n            };\n            public class ClassC_Def : category_base\n            {\n            };\n            public ClassA_Def ClassA = new ClassA_Def();\n            public ClassB_Def ClassB = new ClassB_Def();\n            public ClassC_Def ClassC = new ClassC_Def();\n        };\n        public class SubModuleD_Def : category_base\n        {\n        };\n        public SubModuleA_Def SubModuleA = new SubModuleA_Def();\n        public SubModuleB_Def SubModuleB = new SubModuleB_Def();\n        public SubModuleC_Def SubModuleC = new SubModuleC_Def();\n        public SubModuleD_Def SubModuleD = new SubModuleD_Def();\n    };\n\n    public class ModuleB_Def : category_base\n    {\n        public class SubModuleA_Def : category_base\n        {\n        };\n        public class SubModuleB_Def : category_base\n        {\n        };\n        public class SubModuleC_Def : category_base\n        {\n        };\n        public SubModuleA_Def SubModuleA = new SubModuleA_Def();\n        public SubModuleB_Def SubModuleB = new SubModuleB_Def();\n        public SubModuleC_Def SubModuleC = new SubModuleC_Def();\n    };\n    public static ModuleA_Def ModuleA = new ModuleA_Def();\n    public static ModuleB_Def ModuleB = new ModuleB_Def();\n}\n</code></pre>\n<p>Now, I need to call this function:</p>\n<pre><code>void MyFunction(category_base category);\n</code></pre>\n<p>This method can indeed do what the enumeration method cannot do: my entire parameter has been structured into a tree. However, it cannot achieve what the enumeration can do: when I type &quot;void MyFunction(&quot;, there is no code prompt popping up. I have to manually enter &quot;CategoriesTree&quot; and add a &quot;.&quot; to start.</p>\n<p>I would like to ask if there is a solution that can achieve the advantages of both these 2 methods? And the solution should be used in C++, C# and Java, event Typescript.</p>\n"},{"tags":["java","spring","spring-security"],"answers":[{"tags":[],"owner":{"account_id":73589,"reputation":5327,"user_id":211794,"accept_rate":58,"display_name":"Ashok Koyi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677747534,"creation_date":1677698769,"answer_id":75608116,"question_id":75555866,"body_markdown":"I&#39;m not sure if that can be done out of the box. If I remember correctly Spring security team is working on enabling more OpenId connect specific features with the future versions of Spring Security Authz Server. I am not sure if they would be implementing this out of the box (or) we have to do it ourselves.\r\n\r\nSince `email` is just a scope, we can register this scope at authz server level for that specific client (`ClientRegistration`) &amp; also at the client end (in `OAuth2ClientProperties.Registration`).\r\n\r\nOnce you setup this, what needs to be done is customisation of `/userinfo` endpoint. Since `/userinfo` is secured at Spring Authz server i.e that can only be accessed using Access token (which spring login client automatically accesses as soon as the authz code flow is complete), we need to customise it so that we can send email details of the logged in resource owner at this endpoint.\r\n\r\nIt can be done in this manner.\r\n\r\n```\r\n@Component\r\nclass UserInfoResponseCustomizer implements Function&lt;OidcUserInfoAuthenticationContext, OidcUserInfo&gt; {\r\n  private final UserDetailsService userDetailsService;\r\n\r\n  public UserInfoResponseCustomizer(UserDetailsService userDetailsService) {\r\n    this.userDetailsService = userDetailsService;\r\n  }\r\n\r\n  @Override\r\n  public OidcUserInfo apply(OidcUserInfoAuthenticationContext oidcUserInfoAuthenticationContext) {\r\n    final var authToken = ((JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication());\r\n    final var resourceOwnerUsername = authToken.getName();\r\n    final var builder = OidcUserInfo.builder().subject(resourceOwnerUsername);\r\n    if (authToken.getAuthorities().stream().anyMatch(authority -&gt; authority.getAuthority().equals(&quot;SCOPE_email&quot;))) {\r\n      final var userWithEmail = (UserWithEmail) userDetailsService.loadUserByUsername(resourceOwnerUsername);\r\n      builder.email(userWithEmail.getEmail()); //UserWithEmail is a custom spring `UserDetails` object that contains email property\r\n    }\r\n    return builder.build();\r\n  }\r\n}\r\n```\r\n\r\nand link this upto Authz server \r\n\r\n```\r\n@Bean\r\n@Order(1)\r\npublic SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http, UserInfoResponseCustomizer userInfoResponseCustomizer) throws Exception {\r\n  OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n  http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n      .oidc(customizer -&gt; customizer.userInfoEndpoint(oidcUserInfoEndpointConfigurer -&gt; oidcUserInfoEndpointConfigurer.userInfoMapper(userInfoResponseCustomizer)));\t// Enable OpenID Connect 1.0\r\n\r\n  http\r\n      // Redirect to the login page when not authenticated from the\r\n      // authorization endpoint\r\n      .exceptionHandling((exceptions) -&gt; exceptions.authenticationEntryPoint(new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;)))\r\n      // Accept access tokens for User Info and/or Client Registration\r\n      .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\r\n  return http.build();\r\n}\r\n```\r\n\r\nWhen you are registering your client, ensure the client is allowed to request for that `email` scope\r\n\r\n```\r\n@Bean\r\npublic RegisteredClientRepository registeredClientRepository() {\r\n  RegisteredClient frontendClient = RegisteredClient.withId(UUID.randomUUID().toString())\r\n      .clientId(&quot;my-client&quot;)\r\n      .clientSecret(&quot;{noop}my-client-secret&quot;)\r\n      .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\r\n      .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\r\n      .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\r\n      .redirectUri(&quot;http://my-client.com/login/oauth2/code/my-client&quot;)\r\n      .scope(OidcScopes.OPENID)\r\n      .scope(OidcScopes.PROFILE)\r\n      .scope(OidcScopes.EMAIL)\r\n      .build();\r\n}\r\n```\r\n\r\nWith these changes in place on Authz server end, you should be able complete Auth code flow &amp; hit the `/userinfo` endpoint on Authz server &amp; access email address of the user.\r\n\r\nPlease note that with default settings in spring login module, when a client complete authz `code` flow for `openid` flow, the library automatically fetches `/userinfo` endpoint. So, you should be able access this email address at the oauth client end by accessing the claims inside this object `(OidcUser)((OAuth2LoginAuthenticationToken)SecurityContextHolder.getContext().getAuthentication())).getPrincipal())`.","title":"Customise scopes_supported in spring security authorisation server","body":"<p>I'm not sure if that can be done out of the box. If I remember correctly Spring security team is working on enabling more OpenId connect specific features with the future versions of Spring Security Authz Server. I am not sure if they would be implementing this out of the box (or) we have to do it ourselves.</p>\n<p>Since <code>email</code> is just a scope, we can register this scope at authz server level for that specific client (<code>ClientRegistration</code>) &amp; also at the client end (in <code>OAuth2ClientProperties.Registration</code>).</p>\n<p>Once you setup this, what needs to be done is customisation of <code>/userinfo</code> endpoint. Since <code>/userinfo</code> is secured at Spring Authz server i.e that can only be accessed using Access token (which spring login client automatically accesses as soon as the authz code flow is complete), we need to customise it so that we can send email details of the logged in resource owner at this endpoint.</p>\n<p>It can be done in this manner.</p>\n<pre><code>@Component\nclass UserInfoResponseCustomizer implements Function&lt;OidcUserInfoAuthenticationContext, OidcUserInfo&gt; {\n  private final UserDetailsService userDetailsService;\n\n  public UserInfoResponseCustomizer(UserDetailsService userDetailsService) {\n    this.userDetailsService = userDetailsService;\n  }\n\n  @Override\n  public OidcUserInfo apply(OidcUserInfoAuthenticationContext oidcUserInfoAuthenticationContext) {\n    final var authToken = ((JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication());\n    final var resourceOwnerUsername = authToken.getName();\n    final var builder = OidcUserInfo.builder().subject(resourceOwnerUsername);\n    if (authToken.getAuthorities().stream().anyMatch(authority -&gt; authority.getAuthority().equals(&quot;SCOPE_email&quot;))) {\n      final var userWithEmail = (UserWithEmail) userDetailsService.loadUserByUsername(resourceOwnerUsername);\n      builder.email(userWithEmail.getEmail()); //UserWithEmail is a custom spring `UserDetails` object that contains email property\n    }\n    return builder.build();\n  }\n}\n</code></pre>\n<p>and link this upto Authz server</p>\n<pre><code>@Bean\n@Order(1)\npublic SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http, UserInfoResponseCustomizer userInfoResponseCustomizer) throws Exception {\n  OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n  http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n      .oidc(customizer -&gt; customizer.userInfoEndpoint(oidcUserInfoEndpointConfigurer -&gt; oidcUserInfoEndpointConfigurer.userInfoMapper(userInfoResponseCustomizer)));    // Enable OpenID Connect 1.0\n\n  http\n      // Redirect to the login page when not authenticated from the\n      // authorization endpoint\n      .exceptionHandling((exceptions) -&gt; exceptions.authenticationEntryPoint(new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;)))\n      // Accept access tokens for User Info and/or Client Registration\n      .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n\n  return http.build();\n}\n</code></pre>\n<p>When you are registering your client, ensure the client is allowed to request for that <code>email</code> scope</p>\n<pre><code>@Bean\npublic RegisteredClientRepository registeredClientRepository() {\n  RegisteredClient frontendClient = RegisteredClient.withId(UUID.randomUUID().toString())\n      .clientId(&quot;my-client&quot;)\n      .clientSecret(&quot;{noop}my-client-secret&quot;)\n      .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\n      .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n      .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\n      .redirectUri(&quot;http://my-client.com/login/oauth2/code/my-client&quot;)\n      .scope(OidcScopes.OPENID)\n      .scope(OidcScopes.PROFILE)\n      .scope(OidcScopes.EMAIL)\n      .build();\n}\n</code></pre>\n<p>With these changes in place on Authz server end, you should be able complete Auth code flow &amp; hit the <code>/userinfo</code> endpoint on Authz server &amp; access email address of the user.</p>\n<p>Please note that with default settings in spring login module, when a client complete authz <code>code</code> flow for <code>openid</code> flow, the library automatically fetches <code>/userinfo</code> endpoint. So, you should be able access this email address at the oauth client end by accessing the claims inside this object <code>(OidcUser)((OAuth2LoginAuthenticationToken)SecurityContextHolder.getContext().getAuthentication())).getPrincipal())</code>.</p>\n"}],"owner":{"account_id":3135323,"reputation":468,"user_id":2651934,"accept_rate":33,"display_name":"Anoop Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75608116,"answer_count":1,"score":0,"last_activity_date":1677747534,"creation_date":1677237167,"question_id":75555866,"body_markdown":"I have following configuration for spring oauth server\r\n\r\n```java\r\n    @Bean\r\n    @Order(1)\r\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n                .oidc(Customizer.withDefaults());\t// Enable OpenID Connect 1.0\r\n        http\r\n                // Redirect to the login page when not authenticated from the\r\n                // authorization endpoint\r\n                .exceptionHandling((exceptions) -&gt; exceptions\r\n                        .authenticationEntryPoint(\r\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;))\r\n                )\r\n\r\n                // Accept access tokens for User Info and/or Client Registration\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\r\n        return http.build();\r\n    }\r\n```\r\nWith this configuration well-known (http://[host]/.well-known/openid-configuration) endpoint gives only `openid` for `scopes_supported`.\r\n\r\nIs there a way to customise this to return `[&quot;openid&quot;, &quot;email&quot;, &quot;profile&quot;]`\r\n\r\nscopes_supported is hardcoded in [OidcProviderConfigurationEndpointFilter](https://github.com/spring-projects/spring-authorization-server/blob/98e3fe807a56da3236bc92b4c07f61e61a80efbc/oauth2-authorization-server/src/main/java/org/springframework/security/oauth2/server/authorization/oidc/web/OidcProviderConfigurationEndpointFilter.java#L112)\r\n","title":"Customise scopes_supported in spring security authorisation server","body":"<p>I have following configuration for spring oauth server</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    @Order(1)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n                .oidc(Customizer.withDefaults());   // Enable OpenID Connect 1.0\n        http\n                // Redirect to the login page when not authenticated from the\n                // authorization endpoint\n                .exceptionHandling((exceptions) -&gt; exceptions\n                        .authenticationEntryPoint(\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;))\n                )\n\n                // Accept access tokens for User Info and/or Client Registration\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n\n        return http.build();\n    }\n</code></pre>\n<p>With this configuration well-known (http://[host]/.well-known/openid-configuration) endpoint gives only <code>openid</code> for <code>scopes_supported</code>.</p>\n<p>Is there a way to customise this to return <code>[&quot;openid&quot;, &quot;email&quot;, &quot;profile&quot;]</code></p>\n<p>scopes_supported is hardcoded in <a href=\"https://github.com/spring-projects/spring-authorization-server/blob/98e3fe807a56da3236bc92b4c07f61e61a80efbc/oauth2-authorization-server/src/main/java/org/springframework/security/oauth2/server/authorization/oidc/web/OidcProviderConfigurationEndpointFilter.java#L112\" rel=\"nofollow noreferrer\">OidcProviderConfigurationEndpointFilter</a></p>\n"},{"tags":["java","jar","ant"],"answers":[{"comments":[{"owner":{"account_id":18117684,"reputation":21,"user_id":13174147,"display_name":"panda"},"score":0,"creation_date":1677750091,"post_id":75613119,"comment_id":133400595,"body_markdown":"I tried to add it but an error occured that the file dont exist","body":"I tried to add it but an error occured that the file dont exist"},{"owner":{"account_id":18117684,"reputation":21,"user_id":13174147,"display_name":"panda"},"score":0,"creation_date":1677750213,"post_id":75613119,"comment_id":133400628,"body_markdown":"I also tried to unzip and copy ant i have an error\n\n&lt;target name=&quot;T0&quot;&gt;\n\t\t&lt;mkdir dir=&quot;C:\\Users\\Jars&quot;/&gt;\n\t\t&lt;unzip src=&quot;C:\\Users\\Test\\bin\\HelloWorld.jar&quot; dest=&quot;C:\\Users\\Jars&quot;/&gt; \n\t\t&lt;copy overwrite=&quot;true&quot; todir=&quot;C:\\Users\\Jars&quot; &gt;\n\t\t\t &lt;path&gt;\n\t\t\t    &lt;pathelement path=&quot;${build.dir}/tst2.class&quot;/&gt;\n\t\t\t  &lt;/path&gt;\n\t\t&lt;/copy&gt;\n\t&lt;/target&gt;","body":"I also tried to unzip and copy ant i have an error  &lt;target name=&quot;T0&quot;&gt; \t\t&lt;mkdir dir=&quot;C:\\Users\\Jars&quot;/&gt; \t\t&lt;unzip src=&quot;C:\\Users\\Test\\bin\\HelloWorld.jar&quot; dest=&quot;C:\\Users\\Jars&quot;/&gt;  \t\t&lt;copy overwrite=&quot;true&quot; todir=&quot;C:\\Users\\Jars&quot; &gt; \t\t\t &lt;path&gt; \t\t\t    &lt;pathelement path=&quot;${build.dir}/tst2.class&quot;/&gt; \t\t\t  &lt;/path&gt; \t\t&lt;/copy&gt; \t&lt;/target&gt;"}],"tags":[],"owner":{"account_id":14376658,"reputation":383,"user_id":10384954,"display_name":"Wladimir Diskowski"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677746982,"creation_date":1677746982,"answer_id":75613119,"question_id":75612787,"body_markdown":"jar -uf .../test.jar Test.class\r\n\r\naccording documetation &quot;Updates an existing file jarfile (when f is specified) by adding to it files and directories specified by inputfiles.&quot;\r\n\r\nhttps://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html","title":"How to move a file into an existing Jar using Ant","body":"<p>jar -uf .../test.jar Test.class</p>\n<p>according documetation &quot;Updates an existing file jarfile (when f is specified) by adding to it files and directories specified by inputfiles.&quot;</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html</a></p>\n"}],"owner":{"account_id":18117684,"reputation":21,"user_id":13174147,"display_name":"panda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677746982,"creation_date":1677744719,"question_id":75612787,"body_markdown":"Can anyone please explain to me what thatt code do :`&lt;target&#160;name=&quot;MoveFIle&quot;&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;exec&#160;executable=&quot;C:\\\\Program Files\\\\Java\\\\jdk1.8.0_131\\\\bin\\\\jar&quot;&#160;dir=&quot;${basedir}/classes/&quot;&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&lt;arg&#160;value=&quot;-uf&quot;&#160;/&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;arg&#160;value=&quot;${basedir}/test.jar&quot;&#160;/&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&lt;argvalue=&quot;Test.class&quot;&#160;/&gt;&#160;&#160;&#160;&#160;&#160;\r\n &lt;/exec&gt;`\r\n\r\nIw there any possibility to move the file into a special path when the Jar is unzipped ?\r\n\r\n","title":"How to move a file into an existing Jar using Ant","body":"<p>Can anyone please explain to me what thatt code do :<code>&lt;target name=&quot;MoveFIle&quot;&gt;             &lt;exec executable=&quot;C:\\\\Program Files\\\\Java\\\\jdk1.8.0_131\\\\bin\\\\jar&quot; dir=&quot;${basedir}/classes/&quot;&gt;         &lt;arg value=&quot;-uf&quot; /&gt;                    &lt;arg value=&quot;${basedir}/test.jar&quot; /&gt;                &lt;argvalue=&quot;Test.class&quot; /&gt;      &lt;/exec&gt;</code></p>\n<p>Iw there any possibility to move the file into a special path when the Jar is unzipped ?</p>\n"},{"tags":["java","internationalization","locale","currency"],"answers":[{"tags":[],"owner":{"account_id":27899,"reputation":4492,"user_id":74057,"accept_rate":82,"display_name":"aldrin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1309607662,"creation_date":1309607662,"answer_id":6556831,"question_id":6556792,"body_markdown":"You can either create the locale,\r\n\r\n    new Locale(&quot;en&quot;, &quot;US&quot;)\r\n    new Locale(&quot;fr&quot;, &quot;FR&quot;)\r\n\r\nor\r\n\r\niterate through `Locale.getAvailableLocales()` till you find your locale and then use that instance.","title":"If you have the ISO country code `US`, `FR`, how do you get the Locale code (`Locale.US`, `Locale.FRANCE`)?","body":"<p>You can either create the locale,</p>\n\n<pre><code>new Locale(\"en\", \"US\")\nnew Locale(\"fr\", \"FR\")\n</code></pre>\n\n<p>or</p>\n\n<p>iterate through <code>Locale.getAvailableLocales()</code> till you find your locale and then use that instance.</p>\n"},{"comments":[{"owner":{"account_id":13315515,"reputation":377,"user_id":9865674,"display_name":"Amit Kumar"},"score":0,"creation_date":1609418266,"post_id":6556832,"comment_id":115838873,"body_markdown":"can Locale.Builder help here to get default language from a countrycode?","body":"can Locale.Builder help here to get default language from a countrycode?"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1526473252,"creation_date":1309607669,"answer_id":6556832,"question_id":6556792,"body_markdown":"In Java7 there is the `Locale.Builder`, but before that there isn&#39;t an easy way. You can, however create a utility method:\r\n\r\n1. loop `Locale.getAvailableLocales()`\r\n2. for each check if `locale.getCountryCode().equals(countryCodeParam)` and return it","title":"If you have the ISO country code `US`, `FR`, how do you get the Locale code (`Locale.US`, `Locale.FRANCE`)?","body":"<p>In Java7 there is the <code>Locale.Builder</code>, but before that there isn't an easy way. You can, however create a utility method:</p>\n\n<ol>\n<li>loop <code>Locale.getAvailableLocales()</code></li>\n<li>for each check if <code>locale.getCountryCode().equals(countryCodeParam)</code> and return it</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1309607746,"creation_date":1309607746,"answer_id":6556839,"question_id":6556792,"body_markdown":"A locale is specified most importantly by the ISO-639 language code, possible also a ISO-3166 country code and a variant. The `Locale` class has constructors that take either only a language code, or additionally a country code, or additionally a variant.\r\n\r\nIf you only have the country code, you first need a map that converts it to a language code - but that does not necessarily produce a unique result, many countries use more than one official language.","title":"If you have the ISO country code `US`, `FR`, how do you get the Locale code (`Locale.US`, `Locale.FRANCE`)?","body":"<p>A locale is specified most importantly by the ISO-639 language code, possible also a ISO-3166 country code and a variant. The <code>Locale</code> class has constructors that take either only a language code, or additionally a country code, or additionally a variant.</p>\n\n<p>If you only have the country code, you first need a map that converts it to a language code - but that does not necessarily produce a unique result, many countries use more than one official language.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1309607788,"creation_date":1309607788,"answer_id":6556841,"question_id":6556792,"body_markdown":"You can&#39;t, because a Locale is used to hold a language, not a country. It can hold a language for a specific country, and for a specific variant in this country, but it&#39;s a language first. And there is no one-to-one relationship between a language and a country. Most languages are spoken in various countries, and many countries have several languages.\r\n\r\nIf you had the country code for a language, you could use `new Locale(code)`. But with a country code, all you can do is call `getAvailableLocales`, loop through the results, and find one which has your country code. But there might be several ones.","title":"If you have the ISO country code `US`, `FR`, how do you get the Locale code (`Locale.US`, `Locale.FRANCE`)?","body":"<p>You can't, because a Locale is used to hold a language, not a country. It can hold a language for a specific country, and for a specific variant in this country, but it's a language first. And there is no one-to-one relationship between a language and a country. Most languages are spoken in various countries, and many countries have several languages.</p>\n\n<p>If you had the country code for a language, you could use <code>new Locale(code)</code>. But with a country code, all you can do is call <code>getAvailableLocales</code>, loop through the results, and find one which has your country code. But there might be several ones.</p>\n"},{"tags":[],"owner":{"account_id":1426019,"reputation":4217,"user_id":1356883,"display_name":"kofemann"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677746833,"creation_date":1677746833,"answer_id":75613092,"question_id":6556792,"body_markdown":"The accepted answer is of course correct, but a solution is still needed. So, here is my attempt to implement it:\r\n\r\n```java\r\n   public static Locale countryCodeToLocate(String countryCode) {\r\n\r\n        for(Locale l : Locale.getAvailableLocales()) {\r\n            // try to convert `en_US` into `us`\r\n            String lang = l.toString().toLowerCase();\r\n            String prefix = l.getLanguage().toLowerCase();\r\n            if (lang.startsWith(prefix + &quot;_&quot; + countryCode)) {\r\n                return l;\r\n            }\r\n        }\r\n        return Locale.getDefault();\r\n    }\r\n```","title":"If you have the ISO country code `US`, `FR`, how do you get the Locale code (`Locale.US`, `Locale.FRANCE`)?","body":"<p>The accepted answer is of course correct, but a solution is still needed. So, here is my attempt to implement it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   public static Locale countryCodeToLocate(String countryCode) {\n\n        for(Locale l : Locale.getAvailableLocales()) {\n            // try to convert `en_US` into `us`\n            String lang = l.toString().toLowerCase();\n            String prefix = l.getLanguage().toLowerCase();\n            if (lang.startsWith(prefix + &quot;_&quot; + countryCode)) {\n                return l;\n            }\n        }\n        return Locale.getDefault();\n    }\n</code></pre>\n"}],"owner":{"account_id":772317,"reputation":253,"user_id":816587,"display_name":"Pascal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51484,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":6556841,"answer_count":5,"score":25,"last_activity_date":1677746833,"creation_date":1309607056,"question_id":6556792,"body_markdown":"If you have the country code `US`, `FR` (ISO-3166-1 alpha-2 country code), how do you get the Locale code (`Locale.US`, `Locale.FRANCE`) to do something like this:\r\n\r\n    System.out.println(DecimalFormat.getCurrencyInstance(Locale.US).format(12.34));\r\n    System.out.println(DecimalFormat.getCurrencyInstance(Locale.FRANCE).format(12.34));\r\n\r\n    $12.34\r\n    12,34 €","title":"If you have the ISO country code `US`, `FR`, how do you get the Locale code (`Locale.US`, `Locale.FRANCE`)?","body":"<p>If you have the country code <code>US</code>, <code>FR</code> (ISO-3166-1 alpha-2 country code), how do you get the Locale code (<code>Locale.US</code>, <code>Locale.FRANCE</code>) to do something like this:</p>\n\n<pre><code>System.out.println(DecimalFormat.getCurrencyInstance(Locale.US).format(12.34));\nSystem.out.println(DecimalFormat.getCurrencyInstance(Locale.FRANCE).format(12.34));\n\n$12.34\n12,34 €\n</code></pre>\n"},{"tags":["java","debugging","kotlin","gradle"],"comments":[{"owner":{"account_id":969586,"reputation":2499,"user_id":992380,"display_name":"Alexey Belkov"},"score":5,"creation_date":1598877030,"post_id":63668477,"comment_id":112590896,"body_markdown":"This is a bug in the new Kotlin coroutine debugger. As a workaround please do in Intellij: &quot;File | Settings | Build, Execution, Deployment | Debugger | Data Views | Kotlin | Disable coroutine agent&quot;.","body":"This is a bug in the new Kotlin coroutine debugger. As a workaround please do in Intellij: &quot;File | Settings | Build, Execution, Deployment | Debugger | Data Views | Kotlin | Disable coroutine agent&quot;."},{"owner":{"account_id":225067,"reputation":29525,"user_id":485337,"accept_rate":91,"display_name":"Adam Arold"},"score":1,"creation_date":1598880732,"post_id":63668477,"comment_id":112592663,"body_markdown":"Please add this as an answer, this works! Thanks!","body":"Please add this as an answer, this works! Thanks!"}],"answers":[{"comments":[{"owner":{"account_id":1759287,"reputation":2740,"user_id":1606824,"accept_rate":50,"display_name":"Swapnil Kale"},"score":0,"creation_date":1643617136,"post_id":63688652,"comment_id":125378402,"body_markdown":"Coroutine agent is found at different place in Android Studio on Macbook. But anyways i used search in Preferences and found the correct place. This solution worked. Thanks.","body":"Coroutine agent is found at different place in Android Studio on Macbook. But anyways i used search in Preferences and found the correct place. This solution worked. Thanks."}],"tags":[],"owner":{"account_id":969586,"reputation":2499,"user_id":992380,"display_name":"Alexey Belkov"},"comment_count":1,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1616515573,"creation_date":1598966793,"answer_id":63688652,"question_id":63668477,"body_markdown":"This is a bug in the new Kotlin 1.4 coroutine debugger: https://youtrack.jetbrains.com/issue/KT-41175. As a workaround please do in Intellij IDEA: **File | Settings (Preferences) | Build, Execution, Deployment | Debugger | Data Views | Kotlin | Disable coroutine agent.**\r\n\r\nThe coroutine debugger is going to be disabled in MPP projects by default in Kotlin 1.4.10.","title":"Debug mode stopped working in IDEA with Kotlin","body":"<p>This is a bug in the new Kotlin 1.4 coroutine debugger: <a href=\"https://youtrack.jetbrains.com/issue/KT-41175\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-41175</a>. As a workaround please do in Intellij IDEA: <strong>File | Settings (Preferences) | Build, Execution, Deployment | Debugger | Data Views | Kotlin | Disable coroutine agent.</strong></p>\n<p>The coroutine debugger is going to be disabled in MPP projects by default in Kotlin 1.4.10.</p>\n"},{"tags":[],"owner":{"account_id":4429916,"reputation":11,"user_id":3607297,"display_name":"DupontC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677746579,"creation_date":1677746579,"answer_id":75613054,"question_id":63668477,"body_markdown":"In some Intellij version : **File | Settings (Preferences) | Build, Execution, Deployment | Debugger**\r\n\r\n[![coroutime location][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/plby3.png","title":"Debug mode stopped working in IDEA with Kotlin","body":"<p>In some Intellij version : <strong>File | Settings (Preferences) | Build, Execution, Deployment | Debugger</strong></p>\n<p><a href=\"https://i.stack.imgur.com/plby3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/plby3.png\" alt=\"coroutime location\" /></a></p>\n"}],"owner":{"account_id":225067,"reputation":29525,"user_id":485337,"accept_rate":91,"display_name":"Adam Arold"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3065,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":63688652,"answer_count":2,"score":10,"last_activity_date":1677746579,"creation_date":1598867253,"question_id":63668477,"body_markdown":"I have been working on a project for a while now and on one day I tried to run my project in debug mode and I got this error message:\r\n\r\n```\r\nFailed to find Premain-Class manifest attribute in C:\\Users\\myuser\\.gradle\\caches\\modules-2\\files-2.1\\org.jetbrains.kotlinx\\kotlinx-coroutines-core-metadata\\1.3.8-native-mt-1.4.0-rc\\5b54677a19ebb20ec7dac0d9e4dfc806df327df\\kotlinx-coroutines-core-metadata-1.3.8-native-mt-1.4.0-rc.jar\r\nError occurred during initialization of VM\r\nagent library failed to init: instrument\r\n```\r\n\r\nI tried\r\n\r\n - Invalidate cache and restart\r\n - Reimporting the project\r\n - Deleting the `.gradle` folder from the project **and** my HOME dir\r\n\r\nbut nothing helped.\r\n\r\nWhat can I do to solve this? I did no code change that could make this happen, it was working a day ago.","title":"Debug mode stopped working in IDEA with Kotlin","body":"<p>I have been working on a project for a while now and on one day I tried to run my project in debug mode and I got this error message:</p>\n<pre><code>Failed to find Premain-Class manifest attribute in C:\\Users\\myuser\\.gradle\\caches\\modules-2\\files-2.1\\org.jetbrains.kotlinx\\kotlinx-coroutines-core-metadata\\1.3.8-native-mt-1.4.0-rc\\5b54677a19ebb20ec7dac0d9e4dfc806df327df\\kotlinx-coroutines-core-metadata-1.3.8-native-mt-1.4.0-rc.jar\nError occurred during initialization of VM\nagent library failed to init: instrument\n</code></pre>\n<p>I tried</p>\n<ul>\n<li>Invalidate cache and restart</li>\n<li>Reimporting the project</li>\n<li>Deleting the <code>.gradle</code> folder from the project <strong>and</strong> my HOME dir</li>\n</ul>\n<p>but nothing helped.</p>\n<p>What can I do to solve this? I did no code change that could make this happen, it was working a day ago.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"score":0,"creation_date":1677745884,"post_id":75612869,"comment_id":133399504,"body_markdown":"Thank you for the reply! will it not go in sequence by going through all the if conditions? And can we use @async?","body":"Thank you for the reply! will it not go in sequence by going through all the if conditions? And can we use @async?"}],"tags":[],"owner":{"account_id":26816655,"reputation":77,"user_id":20406553,"display_name":"jetbrain_icin icin"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1677746125,"creation_date":1677745288,"answer_id":75612869,"question_id":75612741,"body_markdown":"You can use Java&#39;s CompletableFuture :\r\n\r\n    List&lt;CompletableFuture&lt;Void&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n\r\n    if (mobile != null) {\r\n       futures.add(checkDuplicateMobileNo(mobile).thenAccept(duplicateExists -&gt; {\r\n       if (duplicateExists) {\r\n           throw new BadRequestException();\r\n       }\r\n       }));\r\n    }\r\n\r\n    if (email != null) {\r\n        futures.add(checkDuplicateEmail(email).thenAccept(duplicateExists -&gt; {\r\n       if (duplicateExists) {\r\n           throw new BadRequestException();\r\n       }\r\n       }));\r\n    }\r\n\r\n    if (uniqueId1 != null) {\r\n        futures.add(checkDuplicateUniqueId1(uniqueId1).thenAccept(duplicateExists -&gt; {\r\n       if (duplicateExists) {\r\n           throw new BadRequestException();\r\n       }\r\n       }));\r\n    }\r\n\r\n    if (uniqueId2 != null) {\r\n       futures.add(checkDuplicateUniqueId2(uniqueId2).thenAccept(duplicateExists -&gt; {\r\n       if (duplicateExists) {\r\n           throw new BadRequestException();\r\n       }\r\n       }));\r\n    }\r\n\r\n    CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).join();\r\n\r\n    // then do post request\r\n\r\nYes, if you write the duplicate checks using if statements, they will be executed in sequence, one after another. This means that the next check will only be performed after the previous one has completed. This can cause delays and slow down the overall execution of your code.\r\n\r\nTo make the duplicate checks execute in parallel:\r\n\r\n    List&lt;CompletableFuture&lt;Void&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n\r\n    if(mobile!=null){\r\n        futures.add(CompletableFuture.runAsync(() -&gt; {\r\n      if(checkDuplicateMobileNo(mobile)){\r\n         throw new BadRequestException();\r\n      }\r\n       }));\r\n    }\r\n\r\n    if(email!=null){\r\n       futures.add(CompletableFuture.runAsync(() -&gt; {\r\n      if(checkDuplicateEmail(email)){\r\n         throw new BadRequestException();\r\n      }\r\n       }));\r\n    }\r\n\r\n    if(uniqueId1!=null){\r\n       futures.add(CompletableFuture.runAsync(() -&gt; {\r\n      if(checkDuplicateUniqueId1(uniqueId1)){\r\n         throw new BadRequestException();\r\n      }\r\n       }));\r\n    }\r\n\r\n    if(uniqueId2!=null){\r\n       futures.add(CompletableFuture.runAsync(() -&gt; {\r\n      if(checkDuplicateUniqueId2(uniqueId2)){\r\n         throw new BadRequestException();\r\n      }\r\n       }));\r\n    }\r\n\r\n    CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).join();\r\n\r\n    // then do post request\r\n","title":"make multiple REST API calls parallel in Spring","body":"<p>You can use Java's CompletableFuture :</p>\n<pre><code>List&lt;CompletableFuture&lt;Void&gt;&gt; futures = new ArrayList&lt;&gt;();\n\nif (mobile != null) {\n   futures.add(checkDuplicateMobileNo(mobile).thenAccept(duplicateExists -&gt; {\n   if (duplicateExists) {\n       throw new BadRequestException();\n   }\n   }));\n}\n\nif (email != null) {\n    futures.add(checkDuplicateEmail(email).thenAccept(duplicateExists -&gt; {\n   if (duplicateExists) {\n       throw new BadRequestException();\n   }\n   }));\n}\n\nif (uniqueId1 != null) {\n    futures.add(checkDuplicateUniqueId1(uniqueId1).thenAccept(duplicateExists -&gt; {\n   if (duplicateExists) {\n       throw new BadRequestException();\n   }\n   }));\n}\n\nif (uniqueId2 != null) {\n   futures.add(checkDuplicateUniqueId2(uniqueId2).thenAccept(duplicateExists -&gt; {\n   if (duplicateExists) {\n       throw new BadRequestException();\n   }\n   }));\n}\n\nCompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).join();\n\n// then do post request\n</code></pre>\n<p>Yes, if you write the duplicate checks using if statements, they will be executed in sequence, one after another. This means that the next check will only be performed after the previous one has completed. This can cause delays and slow down the overall execution of your code.</p>\n<p>To make the duplicate checks execute in parallel:</p>\n<pre><code>List&lt;CompletableFuture&lt;Void&gt;&gt; futures = new ArrayList&lt;&gt;();\n\nif(mobile!=null){\n    futures.add(CompletableFuture.runAsync(() -&gt; {\n  if(checkDuplicateMobileNo(mobile)){\n     throw new BadRequestException();\n  }\n   }));\n}\n\nif(email!=null){\n   futures.add(CompletableFuture.runAsync(() -&gt; {\n  if(checkDuplicateEmail(email)){\n     throw new BadRequestException();\n  }\n   }));\n}\n\nif(uniqueId1!=null){\n   futures.add(CompletableFuture.runAsync(() -&gt; {\n  if(checkDuplicateUniqueId1(uniqueId1)){\n     throw new BadRequestException();\n  }\n   }));\n}\n\nif(uniqueId2!=null){\n   futures.add(CompletableFuture.runAsync(() -&gt; {\n  if(checkDuplicateUniqueId2(uniqueId2)){\n     throw new BadRequestException();\n  }\n   }));\n}\n\nCompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).join();\n\n// then do post request\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"score":0,"creation_date":1677746011,"post_id":75612928,"comment_id":133399535,"body_markdown":"Thank you for the reply!  due to inbuilt framework I have to continue with RestTemplate. So checking the good solution for based on it.","body":"Thank you for the reply!  due to inbuilt framework I have to continue with RestTemplate. So checking the good solution for based on it."},{"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"score":0,"creation_date":1678370637,"post_id":75612928,"comment_id":133522104,"body_markdown":"could you please provide some examples.... When I try Mono.zip the exchange method is deprecated","body":"could you please provide some examples.... When I try Mono.zip the exchange method is deprecated"},{"owner":{"account_id":10848746,"reputation":239,"user_id":7977273,"display_name":"Dishant Kamble"},"score":0,"creation_date":1678438117,"post_id":75612928,"comment_id":133535905,"body_markdown":"You could probably use `retrieve()` instead. Assuming all your `checkDuplicateXXX` methods use webClient and return a `Mono`. In the calling method, you can do something like \n\n`Mono.zip(checkDuplicateMobile(), checkDupicateEmail(), ...).map(tuple -&gt; DO_COMPUTATION).block()`\n\nSo your clients are async and you are doing computation once all responses are available and the result returned from the async flow by `block()`\n\nHope this helps","body":"You could probably use <code>retrieve()</code> instead. Assuming all your <code>checkDuplicateXXX</code> methods use webClient and return a <code>Mono</code>. In the calling method, you can do something like   <code>Mono.zip(checkDuplicateMobile(), checkDupicateEmail(), ...).map(tuple -&gt; DO_COMPUTATION).block()</code>  So your clients are async and you are doing computation once all responses are available and the result returned from the async flow by <code>block()</code>  Hope this helps"},{"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"score":0,"creation_date":1678530707,"post_id":75612928,"comment_id":133552998,"body_markdown":"Thank you for the reply. How can we make parameters dynamic to Mono.zip(..). Say if my Mobile no. is null I don&#39;t want to check duplicate..it should be Mono.zip(checkDupicateEmail(),checkDupicateSomethingElse(),..)","body":"Thank you for the reply. How can we make parameters dynamic to Mono.zip(..). Say if my Mobile no. is null I don&#39;t want to check duplicate..it should be Mono.zip(checkDupicateEmail(),checkDupicateSomethingElse(),.&zwnj;&#8203;.)"},{"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"score":0,"creation_date":1678533712,"post_id":75612928,"comment_id":133553412,"body_markdown":"I have added this way...\n-----------------------------------\npublic Mono&lt;Optional&lt;Mobile&gt;&gt; getByMobile(Map&lt;String, String&gt; queryParamHuman) {\n        if(queryParamHuman.get(Constants.MOBILE) != null){\n            return webClient.get()\n                    .uri(uriBuilder -&gt;uriBuilder.path(url)).build())\n                    .retrieve()\n                    .bodyToMono(PingDigitalIdentityGetResponse.class).map(Optional::of).defaultIfEmpty(Optional.empty());\n        }\n        return Mono.&lt;Mobile&gt;empty().map(Optional::of).defaultIfEmpty(Optional.empty());\n    }","body":"I have added this way... ----------------------------------- public Mono&lt;Optional&lt;Mobile&gt;&gt; getByMobile(Map&lt;String, String&gt; queryParamHuman) {         if(queryParamHuman.get(Constants.MOBILE) != null){             return webClient.get()                     .uri(uriBuilder -&gt;uriBuilder.path(url)).build())                     .retrieve()                     .bodyToMono(PingDigitalIdentityGetResponse.class).map(Option&zwnj;&#8203;al::of).defaultIfEmp&zwnj;&#8203;ty(Optional.empty())&zwnj;&#8203;;         }         return Mono.&lt;Mobile&gt;empty().map(Optional::of).defaultIfEmpty(Option&zwnj;&#8203;al.empty());     }"},{"owner":{"account_id":10848746,"reputation":239,"user_id":7977273,"display_name":"Dishant Kamble"},"score":0,"creation_date":1678714715,"post_id":75612928,"comment_id":133581873,"body_markdown":"I would rather keep the `null` check within the validator method and still call it. the validator method will in itself check duplicates after checking if it&#39;s NOT `null`. If it&#39;s `null` you can return `Mono.empty()`","body":"I would rather keep the <code>null</code> check within the validator method and still call it. the validator method will in itself check duplicates after checking if it&#39;s NOT <code>null</code>. If it&#39;s <code>null</code> you can return <code>Mono.empty()</code>"},{"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"score":0,"creation_date":1678774882,"post_id":75612928,"comment_id":133594005,"body_markdown":"Thank you for the reply, will implement accordingly :)","body":"Thank you for the reply, will implement accordingly :)"},{"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"score":0,"creation_date":1683876910,"post_id":75612928,"comment_id":134436598,"body_markdown":"Hi @Dishant, can we do non blocking here instead of Mono.zip(checkDuplicateMobile(), checkDupicateEmail(), ...).map(tuple -&gt; DO_COMPUTATION).block(). As it will wait for all the responses","body":"Hi @Dishant, can we do non blocking here instead of Mono.zip(checkDuplicateMobile(), checkDupicateEmail(), ...).map(tuple -&gt; DO_COMPUTATION).block(). As it will wait for all the responses"}],"tags":[],"owner":{"account_id":10848746,"reputation":239,"user_id":7977273,"display_name":"Dishant Kamble"},"comment_count":8,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677745662,"creation_date":1677745662,"answer_id":75612928,"question_id":75612741,"body_markdown":"It&#39;s difficult to comprehend your question as to what exactly you want to achieve. But with the initial understanding, I believe you can do the following.\r\n\r\n1. Make your client reactive (i.e. use `WebClient` instead of `RestTemplate`)\r\n2. Do **NOT** `block` the response of the client call immediately (i.e. you will have a `Mono` as a return)\r\n3. Make all 4 client calls within a `Mono.zip`\r\n4. Perform your computation and registration\r\n5. `blockOptional` to complete the flow.\r\n\r\nHope this gives a baseline.\r\n\r\nIf unclear, feel free to add a comment.","title":"make multiple REST API calls parallel in Spring","body":"<p>It's difficult to comprehend your question as to what exactly you want to achieve. But with the initial understanding, I believe you can do the following.</p>\n<ol>\n<li>Make your client reactive (i.e. use <code>WebClient</code> instead of <code>RestTemplate</code>)</li>\n<li>Do <strong>NOT</strong> <code>block</code> the response of the client call immediately (i.e. you will have a <code>Mono</code> as a return)</li>\n<li>Make all 4 client calls within a <code>Mono.zip</code></li>\n<li>Perform your computation and registration</li>\n<li><code>blockOptional</code> to complete the flow.</li>\n</ol>\n<p>Hope this gives a baseline.</p>\n<p>If unclear, feel free to add a comment.</p>\n"}],"owner":{"account_id":20553950,"reputation":41,"user_id":15085988,"display_name":"mathew thomas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4515,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677746125,"creation_date":1677744494,"question_id":75612741,"body_markdown":"My API does the POST request for registration ,to find the duplicate records in the request body it does 4 GET calls to other API.\r\n1. Checks mobile number already exists or not\r\n2. Email ID already exists or not\r\n3. Check for other 2 unique IDs already exists or not.\r\n\r\nCode:\r\n\r\n    if(mobile!=null){\r\n       if(checkDuplicateMobileNo(mobile)){ // restTemplate call to GET API\r\n         throw new BadRequestException();\r\n    }\r\n    \r\n    if(email!=null){\r\n       if(checkDuplicateEmail(email)){ // restTemplate call to GET API\r\n         throw new BadRequestException();\r\n    }\r\n    \r\n    if(uniqueId1!=null){\r\n       if(checkDuplicateUniqueId1(uniqueId1)){ // restTemplate call to GET API\r\n         throw new BadRequestException();\r\n    }\r\n    \r\n    if(uniqueId2!=null){\r\n       if(checkDuplicateUniqueId1(uniqueId1)){ // restTemplate call to GET API\r\n         throw new BadRequestException();\r\n    }\r\n\r\n// then do post request\r\n\r\nHow can I do duplicate checks parallelly in Spring?\r\n\r\n\r\n","title":"make multiple REST API calls parallel in Spring","body":"<p>My API does the POST request for registration ,to find the duplicate records in the request body it does 4 GET calls to other API.</p>\n<ol>\n<li>Checks mobile number already exists or not</li>\n<li>Email ID already exists or not</li>\n<li>Check for other 2 unique IDs already exists or not.</li>\n</ol>\n<p>Code:</p>\n<pre><code>if(mobile!=null){\n   if(checkDuplicateMobileNo(mobile)){ // restTemplate call to GET API\n     throw new BadRequestException();\n}\n\nif(email!=null){\n   if(checkDuplicateEmail(email)){ // restTemplate call to GET API\n     throw new BadRequestException();\n}\n\nif(uniqueId1!=null){\n   if(checkDuplicateUniqueId1(uniqueId1)){ // restTemplate call to GET API\n     throw new BadRequestException();\n}\n\nif(uniqueId2!=null){\n   if(checkDuplicateUniqueId1(uniqueId1)){ // restTemplate call to GET API\n     throw new BadRequestException();\n}\n</code></pre>\n<p>// then do post request</p>\n<p>How can I do duplicate checks parallelly in Spring?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":4246990,"reputation":123,"user_id":3475366,"display_name":"user3475366"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677745783,"creation_date":1677745783,"answer_id":75612948,"question_id":75609628,"body_markdown":"OMG I didn&#39;t realize that \r\n```\r\n@ManyToOne(cascade = CascadeType.ALL)\r\n```\r\ndoes save of A again. After removing ```cascade = CascadeType.ALL``` everything works as expected.","title":"orphanRemoval generates additional delete-statement","body":"<p>OMG I didn't realize that</p>\n<pre><code>@ManyToOne(cascade = CascadeType.ALL)\n</code></pre>\n<p>does save of A again. After removing <code>cascade = CascadeType.ALL</code> everything works as expected.</p>\n"}],"owner":{"account_id":4246990,"reputation":123,"user_id":3475366,"display_name":"user3475366"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677745783,"creation_date":1677709625,"question_id":75609628,"body_markdown":"I have the following: \r\n```\r\nclass A {\r\n\r\n @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER, mappedBy = &quot;a&quot;)\r\n    private Set&lt;B&gt; bs;\r\n \r\n @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;a&quot;)\r\n private Set&lt;C&gt; cs;\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;B&quot;)\r\n@IdClass(BKey.class)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\nclass B {\r\n    @Id\r\n    @ManyToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;a_id&quot;)\r\n    private A a;\r\n\r\n    @Id\r\n    private String anotherKey;\r\n}\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@EqualsAndHashCode\r\npublic class BKey implements Serializable {\r\n\r\n    private A a;\r\n\r\n    private String anotherKey;\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;C&quot;)\r\n@IdClass(CKey.class)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\nclass C {\r\n    @Id\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;a_id&quot;)\r\n    private A a;\r\n\r\n    @Id\r\n    private String anotherKey;\r\n}\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@EqualsAndHashCode\r\npublic class CKey implements Serializable {\r\n\r\n    private A a;\r\n\r\n    private String anotherKey;\r\n}\r\n\r\n```\r\n\r\nwhen I&#39;m doing \r\n\r\n```myRepo.save(objectA);```\r\n\r\nit does what I need actually, if there are new items of class B, then insert-statement is generated, if some of them removed, then delete-statement is generated because of orphanRemoval. \r\nBut for some reason when new items are added for class C, then correct insert-statements are generated but in addition one delete-statement is generated which always remove first added item. I totally don&#39;t get this. Any reasons what can cause this ? When I remove orphanRemoval from B, then the delete-statement is not generated which is expected behaviour. But as you see there is just no relation between B and C.   ","title":"orphanRemoval generates additional delete-statement","body":"<p>I have the following:</p>\n<pre><code>class A {\n\n @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER, mappedBy = &quot;a&quot;)\n    private Set&lt;B&gt; bs;\n \n @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;a&quot;)\n private Set&lt;C&gt; cs;\n}\n\n@Entity\n@Table(name = &quot;B&quot;)\n@IdClass(BKey.class)\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\nclass B {\n    @Id\n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;a_id&quot;)\n    private A a;\n\n    @Id\n    private String anotherKey;\n}\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\n@EqualsAndHashCode\npublic class BKey implements Serializable {\n\n    private A a;\n\n    private String anotherKey;\n}\n\n@Entity\n@Table(name = &quot;C&quot;)\n@IdClass(CKey.class)\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\nclass C {\n    @Id\n    @ManyToOne\n    @JoinColumn(name = &quot;a_id&quot;)\n    private A a;\n\n    @Id\n    private String anotherKey;\n}\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\n@EqualsAndHashCode\npublic class CKey implements Serializable {\n\n    private A a;\n\n    private String anotherKey;\n}\n\n</code></pre>\n<p>when I'm doing</p>\n<p><code>myRepo.save(objectA);</code></p>\n<p>it does what I need actually, if there are new items of class B, then insert-statement is generated, if some of them removed, then delete-statement is generated because of orphanRemoval.\nBut for some reason when new items are added for class C, then correct insert-statements are generated but in addition one delete-statement is generated which always remove first added item. I totally don't get this. Any reasons what can cause this ? When I remove orphanRemoval from B, then the delete-statement is not generated which is expected behaviour. But as you see there is just no relation between B and C.</p>\n"},{"tags":["java","email","microsoft-graph-api","email-attachments"],"answers":[{"comments":[{"owner":{"account_id":5338579,"reputation":89,"user_id":4256613,"display_name":"Afsar"},"score":0,"creation_date":1677682143,"post_id":75603664,"comment_id":133386265,"body_markdown":"Hi,\nThanks for your quick response.\nI do not want to call separate api like above.\nI want to fetch count number during fetching subject,time etc","body":"Hi, Thanks for your quick response. I do not want to call separate api like above. I want to fetch count number during fetching subject,time etc"},{"owner":{"account_id":2596604,"reputation":15928,"user_id":2250152,"accept_rate":72,"display_name":"user2250152"},"score":0,"creation_date":1677745006,"post_id":75603664,"comment_id":133399299,"body_markdown":"@Afsar The correct query Message message = graphClient.me().messages(messageId)\n\t.buildRequest()\n\t.expand(&quot;attachments($count=true;$top=0)&quot;)\n\t.select(&quot;id,subject,receivedDatetime,isRead&quot;)\n\t.get(); doesn&#39;t return number of attachments. Query parameters inside expand are ignored by Graph API.","body":"@Afsar The correct query Message message = graphClient.me().messages(messageId) \t.buildRequest() \t.expand(&quot;attachments($count=true;$top=0)&quot;) \t.select(&quot;id,subject,receivedDatetime,isRead&quot;) \t.get(); doesn&#39;t return number of attachments. Query parameters inside expand are ignored by Graph API."},{"owner":{"account_id":221891,"reputation":5421,"user_id":480118,"accept_rate":81,"display_name":"mike01010"},"score":0,"creation_date":1681272434,"post_id":75603664,"comment_id":134027958,"body_markdown":"what would be the equivalent version fo this for getting the last say 10 most recent files on onedrive? there is very little documentation on DrivesRequestBuilder","body":"what would be the equivalent version fo this for getting the last say 10 most recent files on onedrive? there is very little documentation on DrivesRequestBuilder"}],"tags":[],"owner":{"account_id":2596604,"reputation":15928,"user_id":2250152,"accept_rate":72,"display_name":"user2250152"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677745530,"creation_date":1677673279,"answer_id":75603664,"question_id":75603350,"body_markdown":"One way can be this\r\n\r\n    GET https://graph.microsoft.com/v1.0/me/messages/{messageId}/attachments/$count\r\n\r\nCode\r\n\r\n    int attachmentsCount = graphClient.me().messages(messageId).attachments().count()\r\n\t.buildRequest()\r\n\t.get();\r\n\r\nThe correct way based on ODATA should be\r\n\r\n    Message message = graphClient.me().messages(messageId)\r\n\t.buildRequest()\r\n\t.expand(&quot;attachments($count=true)&quot;)\r\n\t.select(&quot;id,subject,receivedDatetime,isRead&quot;)\r\n\t.get();\r\n\r\nIn `$expand` you should be able specify query parameter for expanded properties but Graph API ignores it","title":"How to fetch count of attachments (only) in graph api using java","body":"<p>One way can be this</p>\n<pre><code>GET https://graph.microsoft.com/v1.0/me/messages/{messageId}/attachments/$count\n</code></pre>\n<p>Code</p>\n<pre><code>int attachmentsCount = graphClient.me().messages(messageId).attachments().count()\n.buildRequest()\n.get();\n</code></pre>\n<p>The correct way based on ODATA should be</p>\n<pre><code>Message message = graphClient.me().messages(messageId)\n.buildRequest()\n.expand(&quot;attachments($count=true)&quot;)\n.select(&quot;id,subject,receivedDatetime,isRead&quot;)\n.get();\n</code></pre>\n<p>In <code>$expand</code> you should be able specify query parameter for expanded properties but Graph API ignores it</p>\n"}],"owner":{"account_id":5338579,"reputation":89,"user_id":4256613,"display_name":"Afsar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677745530,"creation_date":1677671577,"question_id":75603350,"body_markdown":"I want to fetch count of attachments in a mail using grapgClient in java.\r\nOne way is there is fetch AttachmentCollectionPage and then get number. But I want to get count attachment count while I am fetching subject, received. I do not want to download content of attachments.\r\n\r\nSo do we have any way to call like this:\r\n\r\n    graphClientService.messages(messageId)\r\n                     .buildRequest()\r\n                        .select(&quot;subject,receivedDatetime,isRead,attachments.count&quot;)\r\n                                .get();\r\n\r\n  \r\n\r\n\r\nDo we have any way to fetch count like this ***attachments.count*** ?\r\n","title":"How to fetch count of attachments (only) in graph api using java","body":"<p>I want to fetch count of attachments in a mail using grapgClient in java.\nOne way is there is fetch AttachmentCollectionPage and then get number. But I want to get count attachment count while I am fetching subject, received. I do not want to download content of attachments.</p>\n<p>So do we have any way to call like this:</p>\n<pre><code>graphClientService.messages(messageId)\n                 .buildRequest()\n                    .select(&quot;subject,receivedDatetime,isRead,attachments.count&quot;)\n                            .get();\n</code></pre>\n<p>Do we have any way to fetch count like this <em><strong>attachments.count</strong></em> ?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1677744978,"post_id":75612720,"comment_id":133399291,"body_markdown":"`Uri uri = Uri.parse(&quot;//download:&quot;+url)` ??? What should that be? Please start with a valud url","body":"<code>Uri uri = Uri.parse(&quot;&#47;&#47;download:&quot;+url)</code> ??? What should that be? Please start with a valud url"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1677745083,"post_id":75612720,"comment_id":133399315,"body_markdown":"If you catch that exception your app would not crash.","body":"If you catch that exception your app would not crash."},{"owner":{"account_id":27916120,"reputation":3,"user_id":21317247,"display_name":"Habie Putra"},"score":0,"creation_date":1677747447,"post_id":75612720,"comment_id":133399909,"body_markdown":"@blackapps im trying something before and forgot to delete that, any thanks! my app didnt crash anymore","body":"@blackapps im trying something before and forgot to delete that, any thanks! my app didnt crash anymore"}],"answers":[{"tags":[],"owner":{"account_id":15410355,"reputation":95,"user_id":11117247,"display_name":"Nasimuddin Bhanej"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677745454,"creation_date":1677745454,"answer_id":75612894,"question_id":75612720,"body_markdown":"Try this inside *onDownloadStart*:\r\n\r\n    Intent aIntent = new Intent(Intent.ACTION_VIEW);\r\n    aIntent.setData(Uri.parse(url));\r\n    startActivity(aIntent);\r\n\r\nIf that doesn&#39;t work, We can use DownloadManager to download content from url under *onDownloadStart*:\r\n\r\n    DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\r\n\r\n    request.allowScanningByMediaScanner();\r\n    request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n\r\n    request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, &quot;&lt;&lt;FileName&gt;&gt;&quot;);\r\n\r\n    DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);\r\n    dm.enqueue(request);\r\n    Toast.makeText(getApplicationContext(), &quot;Downloading File&quot;, Toast.LENGTH_LONG).show();\r\n\r\nAlong with this permission in *AndroidManifest.xml* file:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;","title":"Android: No Activity found to handle Intent ( Download .xml file)","body":"<p>Try this inside <em>onDownloadStart</em>:</p>\n<pre><code>Intent aIntent = new Intent(Intent.ACTION_VIEW);\naIntent.setData(Uri.parse(url));\nstartActivity(aIntent);\n</code></pre>\n<p>If that doesn't work, We can use DownloadManager to download content from url under <em>onDownloadStart</em>:</p>\n<pre><code>DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\n\nrequest.allowScanningByMediaScanner();\nrequest.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\n\nrequest.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, &quot;&lt;&lt;FileName&gt;&gt;&quot;);\n\nDownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);\ndm.enqueue(request);\nToast.makeText(getApplicationContext(), &quot;Downloading File&quot;, Toast.LENGTH_LONG).show();\n</code></pre>\n<p>Along with this permission in <em>AndroidManifest.xml</em> file:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":27916120,"reputation":3,"user_id":21317247,"display_name":"Habie Putra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75612894,"answer_count":1,"score":0,"last_activity_date":1677745454,"creation_date":1677744316,"question_id":75612720,"body_markdown":"Crash after trigger download button that contains url to download .xml file\r\n\r\nI am new in Android Development, i want to create a android app source from my web using webView but always crashing when i trying to download .xml file in emulator, can someone help me to correcting this code?\r\n\r\nError i face\r\n\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.webview, PID: 2422\r\n    android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=//download:blob:http:mydownloadurl\r\n```\r\n\r\n\r\n```\r\nimport ...\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    WebView mWebView;\r\n\r\n\r\n\r\n    String URL = &quot;myWebsite&quot;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        mWebView = (WebView) findViewById(R.id.webView);\r\n\r\n\r\n        //menghidupkan javascript\r\n        mWebView.getSettings().setJavaScriptEnabled(true);\r\n        mWebView.loadUrl(URL);\r\n        mWebView.setWebViewClient(new MyWebViewClient());\r\n        mWebView.getSettings().setAllowContentAccess(true);\r\n        mWebView.getSettings().setDomStorageEnabled(true);\r\n        mWebView.getSettings().setAllowFileAccess(true);\r\n\r\n        mWebView.setDownloadListener(new DownloadListener() {\r\n            public void onDownloadStart(String url, String userAgent,\r\n                                        String contentDisposition, String mimetype,\r\n                                        long contentLength) {\r\n                Uri uri = Uri.parse(&quot;//download:&quot;+url);\r\n                Intent aIntent = new Intent(Intent.ACTION_VIEW,uri);\r\n                startActivity(aIntent);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    //method ini perlu ditambahkan agar saat halaman web diload tetap diload di aplikasi, tidak diload di webbrowseer\r\n    private class MyWebViewClient extends WebViewClient {\r\n\r\n\r\n        @Override\r\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n\r\n            view.loadUrl(url);\r\n            return true;\r\n        }\r\n        @Override\r\n        public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {\r\n            handler.proceed();\r\n        }\r\n\r\n    }\r\n\r\n    //tambahkan method ini agar saat tombol back ditekan, tidak keluar dari aplikasi tapi kembali ke halaman sebelumnya\r\n    @Override\r\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\r\n\r\n        if ((keyCode == KeyEvent.KEYCODE_BACK) &amp;&amp; mWebView.canGoBack()) {\r\n            mWebView.goBack();\r\n            return true;\r\n        }\r\n        return super.onKeyDown(keyCode, event);\r\n    }\r\n```\r\n","title":"Android: No Activity found to handle Intent ( Download .xml file)","body":"<p>Crash after trigger download button that contains url to download .xml file</p>\n<p>I am new in Android Development, i want to create a android app source from my web using webView but always crashing when i trying to download .xml file in emulator, can someone help me to correcting this code?</p>\n<p>Error i face</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.webview, PID: 2422\n    android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=//download:blob:http:mydownloadurl\n</code></pre>\n<pre><code>import ...\n\npublic class MainActivity extends AppCompatActivity {\n    WebView mWebView;\n\n\n\n    String URL = &quot;myWebsite&quot;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        mWebView = (WebView) findViewById(R.id.webView);\n\n\n        //menghidupkan javascript\n        mWebView.getSettings().setJavaScriptEnabled(true);\n        mWebView.loadUrl(URL);\n        mWebView.setWebViewClient(new MyWebViewClient());\n        mWebView.getSettings().setAllowContentAccess(true);\n        mWebView.getSettings().setDomStorageEnabled(true);\n        mWebView.getSettings().setAllowFileAccess(true);\n\n        mWebView.setDownloadListener(new DownloadListener() {\n            public void onDownloadStart(String url, String userAgent,\n                                        String contentDisposition, String mimetype,\n                                        long contentLength) {\n                Uri uri = Uri.parse(&quot;//download:&quot;+url);\n                Intent aIntent = new Intent(Intent.ACTION_VIEW,uri);\n                startActivity(aIntent);\n            }\n        });\n\n    }\n\n    //method ini perlu ditambahkan agar saat halaman web diload tetap diload di aplikasi, tidak diload di webbrowseer\n    private class MyWebViewClient extends WebViewClient {\n\n\n        @Override\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n\n            view.loadUrl(url);\n            return true;\n        }\n        @Override\n        public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {\n            handler.proceed();\n        }\n\n    }\n\n    //tambahkan method ini agar saat tombol back ditekan, tidak keluar dari aplikasi tapi kembali ke halaman sebelumnya\n    @Override\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\n\n        if ((keyCode == KeyEvent.KEYCODE_BACK) &amp;&amp; mWebView.canGoBack()) {\n            mWebView.goBack();\n            return true;\n        }\n        return super.onKeyDown(keyCode, event);\n    }\n</code></pre>\n"},{"tags":["java","virtual-machine","openstack","openstack-glance","openstacksdk"],"comments":[{"owner":{"account_id":23891810,"reputation":11,"user_id":17891346,"display_name":"Аа Аа"},"score":0,"creation_date":1678450703,"post_id":75612887,"comment_id":133539354,"body_markdown":"Issue: https://github.com/openstack4j/openstack4j/issues/202","body":"Issue: <a href=\"https://github.com/openstack4j/openstack4j/issues/202\" rel=\"nofollow noreferrer\">github.com/openstack4j/openstack4j/issues/202</a>"}],"owner":{"account_id":23891810,"reputation":11,"user_id":17891346,"display_name":"Аа Аа"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677745402,"creation_date":1677745402,"question_id":75612887,"body_markdown":"**Environment**\r\nJava 17 + Spring\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.openstack4j.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;openstack4j&lt;/artifactId&gt;\r\n            &lt;version&gt;3.10&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n**Call**\r\n```\r\nString imageId = &lt;id that was used to create VM image metadata through osClientV3.imagesV2().create(image)&gt;;\r\nImageUpdate imageUpdate = &lt;patch data&gt;;\r\nOSClientV3 osClientV3 = &lt;create client&gt;;\r\nImage image = osClientV3\r\n                .imagesV2()\r\n                .update(imageId, imageUpdate);\r\n```\r\n\r\n**Created request**\r\n```\r\n\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.impl.conn.DefaultHttpClientConnectionOperator : Connection established 10.16.104.31:62444&lt;-&gt;&lt;my_os_ip&gt;:9292\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.impl.execchain.MainClientExec : Executing request PATCH /v2/images/5b9acfbb-1e19-4127-8bac-fe1eae2ed1ad HTTP/1.1\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.impl.execchain.MainClientExec : Target auth state: UNCHALLENGED\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.impl.execchain.MainClientExec : Proxy auth state: UNCHALLENGED\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; PATCH /v2/images/5b9acfbb-1e19-4127-8bac-fe1eae2ed1ad HTTP/1.1\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Content-Type: application/json\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; User-Agent: OpenStack4j / OpenStack Client\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; X-Auth-Token: my-auth-token\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; X-OpenStack-Nova-API-Version: 2.90\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Content-Length: 246\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Host:  my-correct-os-hostname:9292\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Connection: Keep-Alive\r\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Accept-Encoding: gzip,deflate\r\n```\r\nMistake here: \r\n```\r\nContent-Type: application/json\r\n```\r\n\r\n**Response log:**\r\n```\r\n2023-03-01 19:44:38,123 DEBUG [http-nio-8104-exec-9] org.apache.http.wire : http-outgoing-57 &lt;&lt; &quot;HTTP/1.1 415 Unsupported Media Type[\\r][\\n]&quot;\r\n2023-03-01 19:44:38,123 DEBUG [http-nio-8104-exec-9] org.apache.http.wire : http-outgoing-57 &lt;&lt; &quot;accept-patch: application/openstack-images-v2.0-json-patch, application/openstack-images-v2.1-json-patch[\\r][\\n]&quot;\r\n2023-03-01 19:44:38,123 DEBUG [http-nio-8104-exec-9] org.apache.http.wire : http-outgoing-57 &lt;&lt; &quot;content-length: 104[\\r][\\n]&quot;\r\n2023-03-01 19:44:38,123 DEBUG [http-nio-8104-exec-9] org.apache.http.wire : http-outgoing-57 &lt;&lt; &quot;content-type: text/plain; charset=UTF-8[\\r][\\n]&quot;\r\n\r\n```\r\n**Expected behavior**\r\nWhen i call it in Insomnia i use other headers (it works well)\r\n```\r\n&gt; PATCH /v2/images/d55969b2-7e83-474e-84ff-29212e80efa4 HTTP/1.1\r\n&gt; Host:  my-correct-os-hostname:9292\r\n&gt; User-Agent: insomnia/2022.7.5\r\n&gt; X-OpenStack-Nova-API-Version: 2.90\r\n&gt; X-Auth-Token: my-auth-token\r\n&gt; Content-Type: application/openstack-images-v2.1-json-patch\r\n&gt; Accept: */*\r\n&gt; Content-Length: 207\r\n```\r\n\r\n**Proofs**\r\nOfficial doc: https://specs.openstack.org/openstack/glance-specs/specs/api/v2/http-patch-image-api-v2.html\r\nUser case: https://www.sebastien-han.fr/blog/2015/05/13/openstack-glance-use-multiple-location-for-an-image/\r\n\r\nIs documentation correct?\r\nAre there any ways to set custom headers to `osClientV3` ?\r\n\r\nI tried to invoke PATCH method for precreated virtual machine image metadata.","title":"Weird behavior of Openstack SDK for java: PATCH calls with incorrect headers","body":"<p><strong>Environment</strong>\nJava 17 + Spring</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.openstack4j.core&lt;/groupId&gt;\n            &lt;artifactId&gt;openstack4j&lt;/artifactId&gt;\n            &lt;version&gt;3.10&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><strong>Call</strong></p>\n<pre><code>String imageId = &lt;id that was used to create VM image metadata through osClientV3.imagesV2().create(image)&gt;;\nImageUpdate imageUpdate = &lt;patch data&gt;;\nOSClientV3 osClientV3 = &lt;create client&gt;;\nImage image = osClientV3\n                .imagesV2()\n                .update(imageId, imageUpdate);\n</code></pre>\n<p><strong>Created request</strong></p>\n<pre><code>\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.impl.conn.DefaultHttpClientConnectionOperator : Connection established 10.16.104.31:62444&lt;-&gt;&lt;my_os_ip&gt;:9292\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.impl.execchain.MainClientExec : Executing request PATCH /v2/images/5b9acfbb-1e19-4127-8bac-fe1eae2ed1ad HTTP/1.1\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.impl.execchain.MainClientExec : Target auth state: UNCHALLENGED\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.impl.execchain.MainClientExec : Proxy auth state: UNCHALLENGED\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; PATCH /v2/images/5b9acfbb-1e19-4127-8bac-fe1eae2ed1ad HTTP/1.1\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Content-Type: application/json\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; User-Agent: OpenStack4j / OpenStack Client\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; X-Auth-Token: my-auth-token\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; X-OpenStack-Nova-API-Version: 2.90\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Content-Length: 246\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Host:  my-correct-os-hostname:9292\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Connection: Keep-Alive\n2023-03-01 19:44:38,113 DEBUG [http-nio-8104-exec-9] org.apache.http.headers : http-outgoing-57 &gt;&gt; Accept-Encoding: gzip,deflate\n</code></pre>\n<p>Mistake here:</p>\n<pre><code>Content-Type: application/json\n</code></pre>\n<p><strong>Response log:</strong></p>\n<pre><code>2023-03-01 19:44:38,123 DEBUG [http-nio-8104-exec-9] org.apache.http.wire : http-outgoing-57 &lt;&lt; &quot;HTTP/1.1 415 Unsupported Media Type[\\r][\\n]&quot;\n2023-03-01 19:44:38,123 DEBUG [http-nio-8104-exec-9] org.apache.http.wire : http-outgoing-57 &lt;&lt; &quot;accept-patch: application/openstack-images-v2.0-json-patch, application/openstack-images-v2.1-json-patch[\\r][\\n]&quot;\n2023-03-01 19:44:38,123 DEBUG [http-nio-8104-exec-9] org.apache.http.wire : http-outgoing-57 &lt;&lt; &quot;content-length: 104[\\r][\\n]&quot;\n2023-03-01 19:44:38,123 DEBUG [http-nio-8104-exec-9] org.apache.http.wire : http-outgoing-57 &lt;&lt; &quot;content-type: text/plain; charset=UTF-8[\\r][\\n]&quot;\n\n</code></pre>\n<p><strong>Expected behavior</strong>\nWhen i call it in Insomnia i use other headers (it works well)</p>\n<pre><code>&gt; PATCH /v2/images/d55969b2-7e83-474e-84ff-29212e80efa4 HTTP/1.1\n&gt; Host:  my-correct-os-hostname:9292\n&gt; User-Agent: insomnia/2022.7.5\n&gt; X-OpenStack-Nova-API-Version: 2.90\n&gt; X-Auth-Token: my-auth-token\n&gt; Content-Type: application/openstack-images-v2.1-json-patch\n&gt; Accept: */*\n&gt; Content-Length: 207\n</code></pre>\n<p><strong>Proofs</strong>\nOfficial doc: <a href=\"https://specs.openstack.org/openstack/glance-specs/specs/api/v2/http-patch-image-api-v2.html\" rel=\"nofollow noreferrer\">https://specs.openstack.org/openstack/glance-specs/specs/api/v2/http-patch-image-api-v2.html</a>\nUser case: <a href=\"https://www.sebastien-han.fr/blog/2015/05/13/openstack-glance-use-multiple-location-for-an-image/\" rel=\"nofollow noreferrer\">https://www.sebastien-han.fr/blog/2015/05/13/openstack-glance-use-multiple-location-for-an-image/</a></p>\n<p>Is documentation correct?\nAre there any ways to set custom headers to <code>osClientV3</code> ?</p>\n<p>I tried to invoke PATCH method for precreated virtual machine image metadata.</p>\n"},{"tags":["java","groovy"],"comments":[{"owner":{"account_id":4358,"reputation":168420,"user_id":6509,"display_name":"tim_yates"},"score":1,"creation_date":1677758158,"post_id":75612853,"comment_id":133402964,"body_markdown":"What about `double a = 3 / 2.0` so you&#39;re not doing integer division?","body":"What about <code>double a = 3 &#47; 2.0</code> so you&#39;re not doing integer division?"},{"owner":{"account_id":27916168,"reputation":1,"user_id":21317292,"display_name":"lucky dog"},"score":0,"creation_date":1677838150,"post_id":75612853,"comment_id":133420217,"body_markdown":"when I want verify difference between groovy divide  and  java divide. \nI find this strange phenomenon with open or close  invoke dynamic","body":"when I want verify difference between groovy divide  and  java divide.  I find this strange phenomenon with open or close  invoke dynamic"},{"owner":{"account_id":27916168,"reputation":1,"user_id":21317292,"display_name":"lucky dog"},"score":0,"creation_date":1677838411,"post_id":75612853,"comment_id":133420280,"body_markdown":"if I switch `def a = 3 / 2`, it will work well and meet expectations","body":"if I switch <code>def a = 3 &#47; 2</code>, it will work well and meet expectations"}],"owner":{"account_id":27916168,"reputation":1,"user_id":21317292,"display_name":"lucky dog"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677745363,"creation_date":1677745174,"question_id":75612853,"body_markdown":"## my evniment:\r\ngroovy 3.0.8  \r\njvm 1.8   \r\nsystem window10  \r\n\r\n\r\n## my problem\r\nSame groovy source code,\r\nif I close invoke dynamic the run result is inconsistent with open invoke dynamic.\r\n\r\nmy source code:\r\n\r\n```groovy  \r\nstatic void main(String[] args) {\r\n        double a = 3 / 2\r\n        println a\r\n    }\r\n```\r\n\r\n\r\ncompile with close invoke dynamic. will print result: 1.0\r\n```\r\n\r\n    public static void main(String... args) {\r\n        CallSite[] var1 = $getCallSiteArray();\r\n        double a = 0.0D;\r\n        if (BytecodeInterface8.isOrigInt() &amp;&amp; BytecodeInterface8.isOrigD() &amp;&amp; !__$stMC &amp;&amp; !BytecodeInterface8.disabledStandardMetaClass()) {\r\n            int var5 = 3 / 2;\r\n            a = (double)var5;\r\n        } else {\r\n            Object var4 = var1[0].call(3, 2);\r\n            a = DefaultTypeTransformation.doubleUnbox(var4);\r\n        }\r\n\r\n        var1[1].callStatic(AA.class, a);\r\n    }\r\n\r\n```\r\n\r\n\r\ncompile with open invoke dynamic,will print result 1.5\r\n```\r\n    public static void main(String... args) {\r\n        double a = DefaultTypeTransformation.doubleUnbox(true.invoke&lt;invokedynamic&gt;(3, 2));\r\n        AA.class.invoke&lt;invokedynamic&gt;(AA.class, a);\r\n    }\r\n```\r\n\r\n\r\n## my expect result\r\nThe output should be the same whether it is closed or open","title":"groovy invoke dynamic Impact on divide operation","body":"<h2>my evniment:</h2>\n<p>groovy 3.0.8<br />\njvm 1.8<br />\nsystem window10</p>\n<h2>my problem</h2>\n<p>Same groovy source code,\nif I close invoke dynamic the run result is inconsistent with open invoke dynamic.</p>\n<p>my source code:</p>\n<pre><code>static void main(String[] args) {\n        double a = 3 / 2\n        println a\n    }\n</code></pre>\n<p>compile with close invoke dynamic. will print result: 1.0</p>\n<pre><code>\n    public static void main(String... args) {\n        CallSite[] var1 = $getCallSiteArray();\n        double a = 0.0D;\n        if (BytecodeInterface8.isOrigInt() &amp;&amp; BytecodeInterface8.isOrigD() &amp;&amp; !__$stMC &amp;&amp; !BytecodeInterface8.disabledStandardMetaClass()) {\n            int var5 = 3 / 2;\n            a = (double)var5;\n        } else {\n            Object var4 = var1[0].call(3, 2);\n            a = DefaultTypeTransformation.doubleUnbox(var4);\n        }\n\n        var1[1].callStatic(AA.class, a);\n    }\n\n</code></pre>\n<p>compile with open invoke dynamic,will print result 1.5</p>\n<pre><code>    public static void main(String... args) {\n        double a = DefaultTypeTransformation.doubleUnbox(true.invoke&lt;invokedynamic&gt;(3, 2));\n        AA.class.invoke&lt;invokedynamic&gt;(AA.class, a);\n    }\n</code></pre>\n<h2>my expect result</h2>\n<p>The output should be the same whether it is closed or open</p>\n"},{"tags":["java","compiler-errors","char"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677744942,"post_id":75612786,"comment_id":133399280,"body_markdown":"Interesting question. Why do you want this, what are you trying to obtain? The short answer is that the funny and unexpected behaviour is taken over from C and C++","body":"Interesting question. Why do you want this, what are you trying to obtain? The short answer is that the funny and unexpected behaviour is taken over from C and C++"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1677745722,"post_id":75612786,"comment_id":133399461,"body_markdown":"I am afraid you over-interpreted [the tutorial](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html). It says that bitwise operators can be applied to integral types and that `~` (complement) *can be applied to any of the integral types*. Easy to misunderstand. What it does not say is that using `|` (or) on `char` first promotes the operands to `int`. Yeah, it’s confusing.","body":"I am afraid you over-interpreted <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"nofollow noreferrer\">the tutorial</a>. It says that bitwise operators can be applied to integral types and that <code>~</code> (complement) <i>can be applied to any of the integral types</i>. Easy to misunderstand. What it does not say is that using <code>|</code> (or) on <code>char</code> first promotes the operands to <code>int</code>. Yeah, it’s confusing."},{"owner":{"account_id":27915978,"reputation":11,"user_id":21317124,"display_name":"Tempally Smith"},"score":1,"creation_date":1678102372,"post_id":75612786,"comment_id":133462271,"body_markdown":"Thank you all! I have found [the complete answer](https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2). From now on I will carefully read the tutorial: &quot;perform bitwise and bit shift operations on integral types&quot; does not mean that it preserves that types.","body":"Thank you all! I have found <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2\" rel=\"nofollow noreferrer\">the complete answer</a>. From now on I will carefully read the tutorial: &quot;perform bitwise and bit shift operations on integral types&quot; does not mean that it preserves that types."}],"owner":{"account_id":27915978,"reputation":11,"user_id":21317124,"display_name":"Tempally Smith"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1677744887,"answer_count":0,"score":1,"last_activity_date":1677745332,"creation_date":1677744714,"question_id":75612786,"body_markdown":"For example, we have\r\n\r\n    char char1 = 0, char2 = 0;\r\n\r\nThis works fine:\r\n\r\n    char1 |= char2;\r\n\r\nThis does not:\r\n\r\n    char1 = char1 | char2;\r\n\r\nThe latter leads to &quot;error: incompatible types: possible lossy conversion from int to char&quot;\r\n\r\nWhy these options have different behavior?\r\n&lt;br/&gt;Where &quot;int&quot; has emerged? According to Oracle:\r\n- bitwise operators &quot;can be applied to any of the integral types&quot;\r\n- char is an integral type\r\n\r\n","title":"Java: why char1|=char2 is not equal to char1=char1|char2?","body":"<p>For example, we have</p>\n<pre><code>char char1 = 0, char2 = 0;\n</code></pre>\n<p>This works fine:</p>\n<pre><code>char1 |= char2;\n</code></pre>\n<p>This does not:</p>\n<pre><code>char1 = char1 | char2;\n</code></pre>\n<p>The latter leads to &quot;error: incompatible types: possible lossy conversion from int to char&quot;</p>\n<p>Why these options have different behavior?\n<br/>Where &quot;int&quot; has emerged? According to Oracle:</p>\n<ul>\n<li>bitwise operators &quot;can be applied to any of the integral types&quot;</li>\n<li>char is an integral type</li>\n</ul>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9617,"page":608,"page_size":100}
