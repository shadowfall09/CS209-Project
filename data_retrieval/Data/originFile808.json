{"items":[{"tags":["java","intellij-idea","javafx","netbeans","jetbrains-ide"],"answers":[{"tags":[],"owner":{"account_id":1424961,"reputation":30720,"user_id":1348743,"display_name":"Javaru"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1510418042,"creation_date":1510327781,"answer_id":47226206,"question_id":47224993,"body_markdown":"Rather than having an action to create the controller, IDEA uses [intentions][1] (activate via &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Enter&lt;/kbd&gt; or &lt;kbd&gt;⌥&lt;/kbd&gt;&lt;kbd&gt;⏎&lt;/kbd&gt;). And its philosophy would be to keep the controller in sync as you edit the FXML file rather than recreating it to update it with changes.\r\n\r\nFor example, when you create an FXML file, IDEA offers to create the controller:\r\n[![enter image description here][2]][2]\r\n\r\nFirst I name it as desired, and then use an Intention to create the corresponding class:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThen as I add things to the FXML, IDEA offers to create the corresponding items in the controller:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\nSimilarly with an `fx:id`:\r\n\r\n[![enter image description here][5]][5]\r\n\r\nAnd if I use the rename refactor to change the `fx:id`\r\n\r\n[![enter image description here][6]][6]\r\n\r\nit renames the corresponding field name in the Controller to match. So instead of editing it and then recreating the controller to capture the name change, it simply keeps them in sync. But again, the key is to use the rename refactoring and not just &quot;manually&quot; edit the `fx:id`.\r\n\r\n# Edit to answer follow-up questions in comments\r\n*First a disclaimer...* I only dabble in JavaFX to write simple dialogs as front ends to command line scripts. So I&#39;m by no means an expert and may not be aware of a JavaFX related feature in IDEA. But I have been using IDEA for 14 years and typically know what to look for in terms of features and &quot;how do I&quot; questions.\r\n\r\n\r\n&gt; Can you shed some light on using this kind of stuff with Scene Builder, if you know something about it?\r\n\r\nWhenever I use a WYSIYWG editor like Scene Builder, I still keep an eye on and cleanup the code it generates. I&#39;m still a bit old school in that way. And I believe IntelliJ IDEA adheres to that philosophy. \r\n\r\n&gt; I find it really hard to believe IDEA has no way of &quot;mass automatic updating&quot; edits made in Scene Builder\r\n\r\nI can tell you as an IDE, IDEA is not big on Wizards or mass code generation. Instead it&#39;s more &quot;surgical&quot; in nature. It&#39;s &quot;code by intentions&quot; philosophy is to enter/edit your intent, and then use an intention/quick-fix to implement that intention. Thus any code generation it does is small and focused. *But...* in some cases you can ask it to simultaneously apply an intention to multiple items by opening the intentions side menu (using the right arrow &lt;kbd&gt;→&lt;/kbd&gt; key) and selecting the &quot;Fix All &#39;*issue name*&#39; problems in file&quot;. Again, given my limited experience with JavaFx work, I may not be aware of something. But I&#39;m not seeing anything where such a thing would be and I&#39;m not seeing anything in the Help pages.\r\n\r\n&amp;lt;soapbox&gt;\r\nWhen I first started using IDEA in 2003 I too wondered where all the wizards and mass code generation features that my old IDE provided were. (I previously used Forte for Java, the predecessor to NetBeans.) At first I missed them. Then I started using intentions and refactorings for everything. After a couple of months, I didn&#39;t miss the wizards. After a few more months, I came to hate wizards in other IDEs. In the long run, I was far more productive using the intentions &amp; refactorings. And I noticed I was no longer spending a lot of time dealing with compile issues and bugs that I did when I used wizards.\r\n&amp;lt;/soapbox&gt;\r\n\r\n&gt; If I assign fx:id&#39;s to a lot of buttons and such in Scene Builder, do I then have to manually go into the code view of the fxml file, find all of the fx:id&#39;s and for each of them alt+enter to get them into the controller?\r\n\r\nUnfortunately for the &quot;create field&quot; intention for missing IDs&quot; there is not a batch mode available. So you can not use the &quot;fix all&quot; option. My educated guess as to why not is that when creating the field you are given the opportunity to select the type for it. For example, with the `fx:id` for a label, I may want to type the field as `Label`, `Labeled`, `Control`, etc. Granted in most cases you are likely to type it as the actual type it is in your FXML. So you may want to open a feature request asking for a batch mode to be made available for the &quot;Create field&quot; intention that defaults the field to type used in the FXML. Nevertheless, if you get use to using &lt;kbd&gt;F2&lt;/kbd&gt; to navigate to the next error, and then using &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Enter&lt;/kbd&gt; (or &lt;kbd&gt;⌥&lt;/kbd&gt;&lt;kbd&gt;⏎&lt;/kbd&gt;) to open the quick fix, you&#39;ll find you can add the missing fields very quickly.\r\n\r\n&gt; if I deleted some fx:id&#39;s also, then I would have to remember which ones they were, to them manually delete them in the controller?\r\n\r\nAgain, instead of just &quot;manually&quot; deleting an `fx:id`, use an IDEA refactoring. When deleting `fx:ids` (or anything) use the &quot;Safe Delete&quot; refactoring. With your cursor on the id (either in the FXML file or the Controller), type &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Delete&lt;/kbd&gt; (or &lt;kbd&gt;⌘&lt;/kbd&gt;&lt;kbd&gt;⌦&lt;/kbd&gt;) to launch &quot;Safe Delete&quot;.\r\n\r\n[![enter image description here][7]][7]\r\n\r\nIf there are no usages, the field is deleted. Otherwise you get a warning:\r\n\r\n[![enter image description here][8]][8]\r\n\r\nClick the &quot;View Usages&quot; button. The &quot;Find&quot; toolbar will open up showing the usages. \r\n\r\n[![enter image description here][9]][9]\r\n\r\nUpdate your code to remove their usages. Use the &quot;Rerun Safe Delete&quot; button to monitor your progress. Once all usages are done, hit the &quot;Do Refactor&quot; button to delete the usages. While this may seem more involved than some sort of regenerate the controller option, my question would be how would such a feature deal with the usage of that field in a method within the controller? Would it just not recreate the field leaving a compile error in my controller? How would it &quot;regenerate&quot; all the customization I&#39;ve made to the controller? \r\n\r\nThe Safe Delete also keeps your code error free. If I had a dollar for every time I went to delete a something I absolutely knew was not being used anywhere only for the safe delete refactoring to pop up a warning about the place its being used that I totally forgot about. \r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/intention-actions.html\r\n  [2]: https://i.stack.imgur.com/887Hu.png\r\n  [3]: https://i.stack.imgur.com/JVXK9.png\r\n  [4]: https://i.stack.imgur.com/uOEyk.png\r\n  [5]: https://i.stack.imgur.com/JYNYj.png\r\n  [6]: https://i.stack.imgur.com/d9wNh.png\r\n  [7]: https://i.stack.imgur.com/0b7KE.png\r\n  [8]: https://i.stack.imgur.com/J64zV.png\r\n  [9]: https://i.stack.imgur.com/zIe0H.png","title":"IntelliJ, is it possible to &quot;Make controller&quot; as in NetBeans?","body":"<p>Rather than having an action to create the controller, IDEA uses <a href=\"https://www.jetbrains.com/help/idea/intention-actions.html\" rel=\"noreferrer\">intentions</a> (activate via <kbd>Alt</kbd>+<kbd>Enter</kbd> or <kbd>⌥</kbd><kbd>⏎</kbd>). And its philosophy would be to keep the controller in sync as you edit the FXML file rather than recreating it to update it with changes.</p>\n\n<p>For example, when you create an FXML file, IDEA offers to create the controller:\n<a href=\"https://i.stack.imgur.com/887Hu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/887Hu.png\" alt=\"enter image description here\"></a></p>\n\n<p>First I name it as desired, and then use an Intention to create the corresponding class:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JVXK9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JVXK9.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then as I add things to the FXML, IDEA offers to create the corresponding items in the controller:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uOEyk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/uOEyk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Similarly with an <code>fx:id</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JYNYj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JYNYj.png\" alt=\"enter image description here\"></a></p>\n\n<p>And if I use the rename refactor to change the <code>fx:id</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/d9wNh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/d9wNh.png\" alt=\"enter image description here\"></a></p>\n\n<p>it renames the corresponding field name in the Controller to match. So instead of editing it and then recreating the controller to capture the name change, it simply keeps them in sync. But again, the key is to use the rename refactoring and not just \"manually\" edit the <code>fx:id</code>.</p>\n\n<h1>Edit to answer follow-up questions in comments</h1>\n\n<p><em>First a disclaimer...</em> I only dabble in JavaFX to write simple dialogs as front ends to command line scripts. So I'm by no means an expert and may not be aware of a JavaFX related feature in IDEA. But I have been using IDEA for 14 years and typically know what to look for in terms of features and \"how do I\" questions.</p>\n\n<blockquote>\n  <p>Can you shed some light on using this kind of stuff with Scene Builder, if you know something about it?</p>\n</blockquote>\n\n<p>Whenever I use a WYSIYWG editor like Scene Builder, I still keep an eye on and cleanup the code it generates. I'm still a bit old school in that way. And I believe IntelliJ IDEA adheres to that philosophy. </p>\n\n<blockquote>\n  <p>I find it really hard to believe IDEA has no way of \"mass automatic updating\" edits made in Scene Builder</p>\n</blockquote>\n\n<p>I can tell you as an IDE, IDEA is not big on Wizards or mass code generation. Instead it's more \"surgical\" in nature. It's \"code by intentions\" philosophy is to enter/edit your intent, and then use an intention/quick-fix to implement that intention. Thus any code generation it does is small and focused. <em>But...</em> in some cases you can ask it to simultaneously apply an intention to multiple items by opening the intentions side menu (using the right arrow <kbd>→</kbd> key) and selecting the \"Fix All '<em>issue name</em>' problems in file\". Again, given my limited experience with JavaFx work, I may not be aware of something. But I'm not seeing anything where such a thing would be and I'm not seeing anything in the Help pages.</p>\n\n<p>&lt;soapbox>\nWhen I first started using IDEA in 2003 I too wondered where all the wizards and mass code generation features that my old IDE provided were. (I previously used Forte for Java, the predecessor to NetBeans.) At first I missed them. Then I started using intentions and refactorings for everything. After a couple of months, I didn't miss the wizards. After a few more months, I came to hate wizards in other IDEs. In the long run, I was far more productive using the intentions &amp; refactorings. And I noticed I was no longer spending a lot of time dealing with compile issues and bugs that I did when I used wizards.\n&lt;/soapbox></p>\n\n<blockquote>\n  <p>If I assign fx:id's to a lot of buttons and such in Scene Builder, do I then have to manually go into the code view of the fxml file, find all of the fx:id's and for each of them alt+enter to get them into the controller?</p>\n</blockquote>\n\n<p>Unfortunately for the \"create field\" intention for missing IDs\" there is not a batch mode available. So you can not use the \"fix all\" option. My educated guess as to why not is that when creating the field you are given the opportunity to select the type for it. For example, with the <code>fx:id</code> for a label, I may want to type the field as <code>Label</code>, <code>Labeled</code>, <code>Control</code>, etc. Granted in most cases you are likely to type it as the actual type it is in your FXML. So you may want to open a feature request asking for a batch mode to be made available for the \"Create field\" intention that defaults the field to type used in the FXML. Nevertheless, if you get use to using <kbd>F2</kbd> to navigate to the next error, and then using <kbd>Alt</kbd>+<kbd>Enter</kbd> (or <kbd>⌥</kbd><kbd>⏎</kbd>) to open the quick fix, you'll find you can add the missing fields very quickly.</p>\n\n<blockquote>\n  <p>if I deleted some fx:id's also, then I would have to remember which ones they were, to them manually delete them in the controller?</p>\n</blockquote>\n\n<p>Again, instead of just \"manually\" deleting an <code>fx:id</code>, use an IDEA refactoring. When deleting <code>fx:ids</code> (or anything) use the \"Safe Delete\" refactoring. With your cursor on the id (either in the FXML file or the Controller), type <kbd>Alt</kbd>+<kbd>Delete</kbd> (or <kbd>⌘</kbd><kbd>⌦</kbd>) to launch \"Safe Delete\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/0b7KE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0b7KE.png\" alt=\"enter image description here\"></a></p>\n\n<p>If there are no usages, the field is deleted. Otherwise you get a warning:</p>\n\n<p><a href=\"https://i.stack.imgur.com/J64zV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/J64zV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Click the \"View Usages\" button. The \"Find\" toolbar will open up showing the usages. </p>\n\n<p><a href=\"https://i.stack.imgur.com/zIe0H.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zIe0H.png\" alt=\"enter image description here\"></a></p>\n\n<p>Update your code to remove their usages. Use the \"Rerun Safe Delete\" button to monitor your progress. Once all usages are done, hit the \"Do Refactor\" button to delete the usages. While this may seem more involved than some sort of regenerate the controller option, my question would be how would such a feature deal with the usage of that field in a method within the controller? Would it just not recreate the field leaving a compile error in my controller? How would it \"regenerate\" all the customization I've made to the controller? </p>\n\n<p>The Safe Delete also keeps your code error free. If I had a dollar for every time I went to delete a something I absolutely knew was not being used anywhere only for the safe delete refactoring to pop up a warning about the place its being used that I totally forgot about. </p>\n"},{"tags":[],"owner":{"account_id":11724066,"reputation":362,"user_id":8582026,"display_name":"Mcin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1518719281,"creation_date":1518719281,"answer_id":48814013,"question_id":47224993,"body_markdown":"If you use Javaru&#39;s solution then created fields will be public and without @FXML annotations.\r\n\r\nTo change it go to: \r\nFile | Settings | Editor | Code Style | Java | Code Generation | Default Visibility - choose Escalate or Private, and check &quot;use external annotations&quot; at the bottom.\r\n\r\nSecond solution: open fxml file in scene builder set the controller class in controller section at left bottom part of window. Go to: view | show sample controller skeleton and copy controller class code.\r\n\r\nIt is my first post, hope I&#39;ve helped. :)","title":"IntelliJ, is it possible to &quot;Make controller&quot; as in NetBeans?","body":"<p>If you use Javaru's solution then created fields will be public and without @FXML annotations.</p>\n\n<p>To change it go to: \nFile | Settings | Editor | Code Style | Java | Code Generation | Default Visibility - choose Escalate or Private, and check \"use external annotations\" at the bottom.</p>\n\n<p>Second solution: open fxml file in scene builder set the controller class in controller section at left bottom part of window. Go to: view | show sample controller skeleton and copy controller class code.</p>\n\n<p>It is my first post, hope I've helped. :)</p>\n"},{"tags":[],"owner":{"account_id":7804169,"reputation":159,"user_id":5902541,"display_name":"Sona"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587362720,"creation_date":1587362720,"answer_id":61316054,"question_id":47224993,"body_markdown":"I can&#39;t see create method or create field&lt;br&gt;\r\nI see this[![enter image description here][1]][1]&lt;br&gt;\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0mKQh.png\r\n  [2]: https://i.stack.imgur.com/ZRoRf.png","title":"IntelliJ, is it possible to &quot;Make controller&quot; as in NetBeans?","body":"<p>I can't see create method or create field<br>\nI see this<a href=\"https://i.stack.imgur.com/0mKQh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0mKQh.png\" alt=\"enter image description here\"></a><br>\n<a href=\"https://i.stack.imgur.com/ZRoRf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZRoRf.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":27175224,"reputation":1,"user_id":20711319,"display_name":"Ivo Baklov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671060011,"creation_date":1670402753,"answer_id":74713891,"question_id":47224993,"body_markdown":"Go to your `.fxml` file and there is red error element: the name of your handle function in my example. \r\n\r\nJust push create it. \r\n\r\nIntelliJ gives you possibilities to create your event:\r\n\r\n![Popup: &quot;Cannot resolve symbol &#39;onEditCades&#39;.\r\nCreate method &#39;onEditCades in &#39;Settings&#39; Alt-Shift+Enter, More actions... Alt+Enter&quot;](https://i.stack.imgur.com/8yWpa.png) ","title":"IntelliJ, is it possible to &quot;Make controller&quot; as in NetBeans?","body":"<p>Go to your <code>.fxml</code> file and there is red error element: the name of your handle function in my example.</p>\n<p>Just push create it.</p>\n<p>IntelliJ gives you possibilities to create your event:</p>\n<p><img src=\"https://i.stack.imgur.com/8yWpa.png\" alt=\"Popup: &quot;Cannot resolve symbol 'onEditCades'.\nCreate method 'onEditCades in 'Settings' Alt-Shift+Enter, More actions... Alt+Enter&quot;\" /></p>\n"}],"owner":{"account_id":12220760,"reputation":133,"user_id":8919875,"display_name":"ThomasBear"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14645,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":47226206,"answer_count":4,"score":13,"last_activity_date":1671060011,"creation_date":1510324127,"question_id":47224993,"body_markdown":"Does anyone with IntelliJ &amp; NetBeans experience know, if IntelliJ has some similar feature as for NetBeans &quot;Make controller&quot; when right clicking the corresponding FXML file?\r\n\r\nI think it is pretty important since it updates, if I have added something new (a FXID for example), and if I deleted it and such - and also places it in the correct place by itself. \r\n\r\nI know you, in Scene Builder, can go to *&quot;View -&gt; Show Sample Controller Skeleton&quot;*, but this is just not enough automation, especially not from a Jetbrains IDE.\r\n\r\nThis also means that the following link is not an answer: \r\nhttps://stackoverflow.com/questions/46295321/how-to-do-netbeansmake-controller-in-intellij-idea\r\n\r\n[![Menu in Netbeans, showing the &quot;Make controller&quot; feature][1]]\r\n\r\n[![Menu in IntelliJ, showing nothing about controllers][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sfbYM.jpg\r\n  [2]: https://i.stack.imgur.com/BLu0m.jpg","title":"IntelliJ, is it possible to &quot;Make controller&quot; as in NetBeans?","body":"<p>Does anyone with IntelliJ &amp; NetBeans experience know, if IntelliJ has some similar feature as for NetBeans \"Make controller\" when right clicking the corresponding FXML file?</p>\n\n<p>I think it is pretty important since it updates, if I have added something new (a FXID for example), and if I deleted it and such - and also places it in the correct place by itself. </p>\n\n<p>I know you, in Scene Builder, can go to <em>\"View -> Show Sample Controller Skeleton\"</em>, but this is just not enough automation, especially not from a Jetbrains IDE.</p>\n\n<p>This also means that the following link is not an answer: \n<a href=\"https://stackoverflow.com/questions/46295321/how-to-do-netbeansmake-controller-in-intellij-idea\">how to do netbeans&#39;&quot;make controller&quot; in intellij idea</a></p>\n\n<p>[<img src=\"https://i.stack.imgur.com/sfbYM.jpg\" alt=\"Menu in Netbeans, showing the &quot;Make controller&quot; feature\">]</p>\n\n<p><a href=\"https://i.stack.imgur.com/BLu0m.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BLu0m.jpg\" alt=\"Menu in IntelliJ, showing nothing about controllers\"></a></p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":365762,"reputation":9960,"user_id":710877,"display_name":"Anantha Sharma"},"score":7,"creation_date":1380691143,"post_id":19130384,"comment_id":28291312,"body_markdown":"CTRL+F7, this will iterate through open windows.. once you reach the project explorer, hit enter, voila you will be there.","body":"CTRL+F7, this will iterate through open windows.. once you reach the project explorer, hit enter, voila you will be there."},{"owner":{"account_id":915770,"reputation":532,"user_id":948600,"accept_rate":6,"display_name":"Aditya"},"score":0,"creation_date":1380694456,"post_id":19130384,"comment_id":28292279,"body_markdown":"Thanks Anantha, Cmd/Ctrl + F7 works.","body":"Thanks Anantha, Cmd/Ctrl + F7 works."}],"answers":[{"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1380691087,"creation_date":1380691087,"answer_id":19130415,"question_id":19130384,"body_markdown":"Press `Ctrl+Shift+L` to open the Key Assist. All key shortcuts are available in key assist, see what you need is available there or not","title":"Shortcut key to activate project explorer in Eclipse","body":"<p>Press <code>Ctrl+Shift+L</code> to open the Key Assist. All key shortcuts are available in key assist, see what you need is available there or not</p>\n"},{"tags":[],"owner":{"account_id":313546,"reputation":7820,"user_id":628242,"accept_rate":55,"display_name":"Lokesh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1380691174,"creation_date":1380691174,"answer_id":19130428,"question_id":19130384,"body_markdown":"By activate do you mean to open the project?\r\nThis shortcut is not set by default. Go to Preferences-&gt;keys and serach for open project and set shortcut of your choice.\r\n\r\nBut to apply this shortcut you will have to reach that project. So set a shortcut to reach Project explorer [same way as explained above] , use arrow keys to reach project and then use your open project shortcut. Easiest way use mouse :)","title":"Shortcut key to activate project explorer in Eclipse","body":"<p>By activate do you mean to open the project?\nThis shortcut is not set by default. Go to Preferences->keys and serach for open project and set shortcut of your choice.</p>\n\n<p>But to apply this shortcut you will have to reach that project. So set a shortcut to reach Project explorer [same way as explained above] , use arrow keys to reach project and then use your open project shortcut. Easiest way use mouse :)</p>\n"},{"tags":[],"owner":{"account_id":1021804,"reputation":12875,"user_id":1031945,"accept_rate":83,"display_name":"Aniket Kulkarni"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1671060007,"creation_date":1380693040,"answer_id":19130723,"question_id":19130384,"body_markdown":"Go to **Window --&gt; Preferences --&gt; Click on General --&gt; Keys**. You will see   \r\n\r\n![enter image description here][1]\r\n\r\n\r\nNow, below **Scheme** there is textbox, type `project explorer`. You will see  \r\n\r\n![enter image description here][2]  \r\n\r\nSelect **Show View** from the grid. In **Binding** type the short key which ever you want. I typed **Ctrl+Alt+Shift+Q**. Then click on Apply and OK.  \r\n\r\nIf you want to assign a short key and that short key exists then you will see in **Conflicts:** table.  \r\n\r\nSome useful shortcuts are  \r\n\r\n 1. [103 shortcuts](https://shortcutworld.com/Eclipse/win/Eclipse-Helios_Shortcuts)\r\n 2. [more shortcuts](http://eclipse.dzone.com/news/effective-eclipse-shortcut-key)\r\n\r\n  [1]: http://i.stack.imgur.com/2xupg.png\r\n  [2]: http://i.stack.imgur.com/Ex6Lw.png","title":"Shortcut key to activate project explorer in Eclipse","body":"<p>Go to <strong>Window --&gt; Preferences --&gt; Click on General --&gt; Keys</strong>. You will see</p>\n<p><img src=\"https://i.stack.imgur.com/2xupg.png\" alt=\"enter image description here\" /></p>\n<p>Now, below <strong>Scheme</strong> there is textbox, type <code>project explorer</code>. You will see</p>\n<p><img src=\"https://i.stack.imgur.com/Ex6Lw.png\" alt=\"enter image description here\" /></p>\n<p>Select <strong>Show View</strong> from the grid. In <strong>Binding</strong> type the short key which ever you want. I typed <strong>Ctrl+Alt+Shift+Q</strong>. Then click on Apply and OK.</p>\n<p>If you want to assign a short key and that short key exists then you will see in <strong>Conflicts:</strong> table.</p>\n<p>Some useful shortcuts are</p>\n<ol>\n<li><a href=\"https://shortcutworld.com/Eclipse/win/Eclipse-Helios_Shortcuts\" rel=\"nofollow noreferrer\">103 shortcuts</a></li>\n<li><a href=\"http://eclipse.dzone.com/news/effective-eclipse-shortcut-key\" rel=\"nofollow noreferrer\">more shortcuts</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1474388,"reputation":5265,"user_id":1385174,"accept_rate":60,"display_name":"Adam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1442319665,"creation_date":1442319665,"answer_id":32585962,"question_id":19130384,"body_markdown":"Customise the `Show View` dialog.\r\n\r\nThe Eclipse defaults don&#39;t include the Project Explorer view, so you must add that. \r\n\r\nFrom [eclipseonetips.com][1]:\r\n\r\n&gt; The Show View commands are activated by pressing `Alt`+`Shift`+`Q`, then the letter for the relevant view, eg. to navigate to the Package Explorer, press `Alt`+`Shift`+`Q`, `P`.\r\n\r\nSo pressing `Alt`+`Shift`+`Q` will cause the `Show View` dialog to pop up where you can select the view you want with the cursor arrows, the mouse or the `P`. \r\n\r\nFollow the instructions given in Aniket Kulkami&#39;s answer and add `Alt`+`Shift`+`Q`,`R` to the Project Explorer Show View item. Then you will see the option appear in the `Show View` dialog along with the other views it&#39;s possible to navigate to, and `R` will select it.\r\n\r\nIt might also make sense for you to remove the `P` from the Package Explorer view so you can use it for the Project Explorer instead.\r\n\r\n  [1]: http://www.eclipseonetips.com/2010/02/15/the-fastest-ways-to-navigate-views-in-eclipse-using-the-keyboard/","title":"Shortcut key to activate project explorer in Eclipse","body":"<p>Customise the <code>Show View</code> dialog.</p>\n\n<p>The Eclipse defaults don't include the Project Explorer view, so you must add that. </p>\n\n<p>From <a href=\"http://www.eclipseonetips.com/2010/02/15/the-fastest-ways-to-navigate-views-in-eclipse-using-the-keyboard/\" rel=\"nofollow\">eclipseonetips.com</a>:</p>\n\n<blockquote>\n  <p>The Show View commands are activated by pressing <code>Alt</code>+<code>Shift</code>+<code>Q</code>, then the letter for the relevant view, eg. to navigate to the Package Explorer, press <code>Alt</code>+<code>Shift</code>+<code>Q</code>, <code>P</code>.</p>\n</blockquote>\n\n<p>So pressing <code>Alt</code>+<code>Shift</code>+<code>Q</code> will cause the <code>Show View</code> dialog to pop up where you can select the view you want with the cursor arrows, the mouse or the <code>P</code>. </p>\n\n<p>Follow the instructions given in Aniket Kulkami's answer and add <code>Alt</code>+<code>Shift</code>+<code>Q</code>,<code>R</code> to the Project Explorer Show View item. Then you will see the option appear in the <code>Show View</code> dialog along with the other views it's possible to navigate to, and <code>R</code> will select it.</p>\n\n<p>It might also make sense for you to remove the <code>P</code> from the Package Explorer view so you can use it for the Project Explorer instead.</p>\n"}],"owner":{"account_id":915770,"reputation":532,"user_id":948600,"accept_rate":6,"display_name":"Aditya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22333,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"answer_count":4,"score":11,"last_activity_date":1671060007,"creation_date":1380690894,"question_id":19130384,"body_markdown":"I am unable to find out the shortcut key to activate the project explorer in eclipse. I usually use cmd+F12 key to activate the editor, however i have to rely on mouse to move to a project explorer. \r\n\r\nIs there a shortcut key available for that ? If not can it be configured ? ","title":"Shortcut key to activate project explorer in Eclipse","body":"<p>I am unable to find out the shortcut key to activate the project explorer in eclipse. I usually use cmd+F12 key to activate the editor, however i have to rely on mouse to move to a project explorer. </p>\n\n<p>Is there a shortcut key available for that ? If not can it be configured ? </p>\n"},{"tags":["java","android","android-spinner","android-seekbar"],"answers":[{"tags":[],"owner":{"account_id":18680710,"reputation":3,"user_id":13617304,"display_name":"Mailing Delgado"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671059994,"creation_date":1670806773,"answer_id":74765748,"question_id":74692815,"body_markdown":"I found the way how to reset the seekbar, spinner and textview with a button. Look at the code below.\r\n\r\n    public void handleReset(View v){\r\n        String result;\r\n        int zeroNum = 0, oneNum = 1;\r\n        Double Small = 2.99,oneOunce= 0.15, subTotal;\r\n        subTotal = Small + oneOunce;\r\n        try{\r\n            sizeSpinner.setSelection(zeroNum) ;\r\n            flavorSpinner.setSelection(zeroNum);\r\n            seekbar.setProgress(oneNum);\r\n            peanutsCheckbox.setChecked(false);\r\n            mmsCheckbox.setChecked(false);\r\n            almondsCheckbox.setChecked(false);\r\n            brownieCheckbox.setChecked(false);\r\n            strawberriesCheckbox.setChecked(false);\r\n            oreosCheckbox.setChecked(false);\r\n            gummybearsCheckbox.setChecked(false);\r\n            marshmallowsCheckbox.setChecked(false);\r\n        }catch (NumberFormatException e){\r\n            Toast.makeText(this, &quot;Incorrect key&quot;, Toast.LENGTH_SHORT).show();\r\n        }finally {\r\n            result = numFormat.format(subTotal);\r\n            totalTextView.setText(result);\r\n        }\r\n    }\r\n\r\n","title":"Seekbar and Spinner cleared by a button JAVA Android Studio","body":"<p>I found the way how to reset the seekbar, spinner and textview with a button. Look at the code below.</p>\n<pre><code>public void handleReset(View v){\n    String result;\n    int zeroNum = 0, oneNum = 1;\n    Double Small = 2.99,oneOunce= 0.15, subTotal;\n    subTotal = Small + oneOunce;\n    try{\n        sizeSpinner.setSelection(zeroNum) ;\n        flavorSpinner.setSelection(zeroNum);\n        seekbar.setProgress(oneNum);\n        peanutsCheckbox.setChecked(false);\n        mmsCheckbox.setChecked(false);\n        almondsCheckbox.setChecked(false);\n        brownieCheckbox.setChecked(false);\n        strawberriesCheckbox.setChecked(false);\n        oreosCheckbox.setChecked(false);\n        gummybearsCheckbox.setChecked(false);\n        marshmallowsCheckbox.setChecked(false);\n    }catch (NumberFormatException e){\n        Toast.makeText(this, &quot;Incorrect key&quot;, Toast.LENGTH_SHORT).show();\n    }finally {\n        result = numFormat.format(subTotal);\n        totalTextView.setText(result);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18680710,"reputation":3,"user_id":13617304,"display_name":"Mailing Delgado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74765748,"answer_count":1,"score":0,"last_activity_date":1671059994,"creation_date":1670265108,"question_id":74692815,"body_markdown":"I&#39;m trying to reset the seekbar, spinner and textview using a button. With the code I have implemented resets the seekbar and spinner to the position at the first click but it wont reset the textview in the first click. If I click the reset button a second time it will reset the textview. \r\n\r\n\r\n\r\n```\r\npublic void handleReset(View v){\r\n    Integer zeroNum = 0, oneNum = 1;\r\n    Double Small = 2.99,oneOunce= 0.15;\r\n\r\n    totalTextView.setText(Double.toString(Small + oneOunce));\r\n  \r\n   sizeSpinner.setSelection(zeroNum) ;\r\n   seekbar.setProgress(oneNum);\r\n   \r\n}\r\n```\r\n\r\n\r\n\r\nI want everything to reset async. ","title":"Seekbar and Spinner cleared by a button JAVA Android Studio","body":"<p>I'm trying to reset the seekbar, spinner and textview using a button. With the code I have implemented resets the seekbar and spinner to the position at the first click but it wont reset the textview in the first click. If I click the reset button a second time it will reset the textview.</p>\n<pre><code>public void handleReset(View v){\n    Integer zeroNum = 0, oneNum = 1;\n    Double Small = 2.99,oneOunce= 0.15;\n\n    totalTextView.setText(Double.toString(Small + oneOunce));\n  \n   sizeSpinner.setSelection(zeroNum) ;\n   seekbar.setProgress(oneNum);\n   \n}\n</code></pre>\n<p>I want everything to reset async.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1590336305,"post_id":61960848,"comment_id":109636340,"body_markdown":"What is `List&lt;A&gt;`? It looks like you want to collect `WordLocation` objects. Then, why are you calling `line.toString()` two times for each line? `line` is already a `String`. Also, the `isLetterOrDigit` pretest is obsolete, the `.equals(word)` test implies this condition. I wouldn&#39;t even use a `BreakIterator` when searching for a particular given `word`. Searching for the word, e.g. using `Scanner`, with word boundary anchors would do simpler and likely more efficient.","body":"What is <code>List&lt;A&gt;</code>? It looks like you want to collect <code>WordLocation</code> objects. Then, why are you calling <code>line.toString()</code> two times for each line? <code>line</code> is already a <code>String</code>. Also, the <code>isLetterOrDigit</code> pretest is obsolete, the <code>.equals(word)</code> test implies this condition. I wouldn&#39;t even use a <code>BreakIterator</code> when searching for a particular given <code>word</code>. Searching for the word, e.g. using <code>Scanner</code>, with word boundary anchors would do simpler and likely more efficient."},{"owner":{"account_id":18655715,"reputation":15,"user_id":13598183,"display_name":"fontesi"},"score":0,"creation_date":1590585411,"post_id":61960848,"comment_id":109734483,"body_markdown":"I had to use BreakIterator and had other many conditions to keep. That&#39;s a part of my long codes, so it seems to be strange.","body":"I had to use BreakIterator and had other many conditions to keep. That&#39;s a part of my long codes, so it seems to be strange."}],"answers":[{"tags":[],"owner":{"account_id":11260438,"reputation":5143,"user_id":8258942,"accept_rate":0,"display_name":"Nitin Bisht"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1590170929,"creation_date":1590170622,"answer_id":61961193,"question_id":61960848,"body_markdown":"    public class Try {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tPath path = Paths.get(&quot;etc/demo.txt&quot;);\r\n    \t\tList&lt;String&gt; result = compute(path, &quot;Test&quot;);\r\n    \t\tresult.stream().forEach(s -&gt; System.out.println(s));\r\n    \t}\r\n    \r\n    \tprivate static List&lt;String&gt; compute(Path textFilePath, String wordToFind) {\r\n    \r\n    \t\tList&lt;String&gt; results = new ArrayList&lt;String&gt;();\r\n            // Added position and initialized with 0\r\n    \t\tint[] position = new int[]{0};\r\n    \t\ttry {\r\n    \t\t\tFiles.lines(textFilePath).forEach(line -&gt; {\r\n    \r\n    \t\t\t\tBreakIterator it = BreakIterator.getWordInstance();\r\n    \t\t\t\tit.setText(line.toString());\r\n    \r\n    \t\t\t\tint start = it.first();\r\n    \t\t\t\tint end = it.next();\r\n                    // Increment position by 1 for each line\r\n    \t\t\t\tposition[0] += 1;\r\n    \r\n    \t\t\t\twhile (end != BreakIterator.DONE) {\r\n    \t\t\t\t\tString currentWord = line.toString().substring(start, end);\r\n    \t\t\t\t\tif (Character.isLetterOrDigit(currentWord.charAt(0))) {\r\n    \t\t\t\t\t\tif (currentWord.equals(wordToFind)) {\r\n    \t\t\t\t\t\t\tresults.add(&quot;File Path: &quot; + textFilePath + &quot;, Found Word: &quot; + wordToFind + &quot;, Line: &quot; + position[0]);\r\n    \t\t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tstart = end;\r\n    \t\t\t\t\tend = it.next();\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn results;\r\n    \t}\r\n    \r\n    }\r\n\r\n**demo.txt:**\r\n\r\n    Stream1\r\n    Review\r\n    Stream\r\n    2020-10-10 10:00\r\n    Test\r\n    0.0\r\n    admin HOST Test\r\n    Stream2\r\n    Review\r\n\r\n**Output:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Note:**\r\n\r\n 1. This is an example for your reference as it uses `List&lt;String&gt;`.\r\n 2. Added `int[] position = new int[]{0};` and `position[0] += 1;` for line numbers to be displayed.\r\n 3. In above example `Test` exists in line number `5` and `7`.\r\n\r\n  [1]: https://i.stack.imgur.com/6Rhh6.png\r\n","title":"How can I get the line number where the word has been found?","body":"<pre><code>public class Try {\n\n    public static void main(String[] args) {\n\n        Path path = Paths.get(\"etc/demo.txt\");\n        List&lt;String&gt; result = compute(path, \"Test\");\n        result.stream().forEach(s -&gt; System.out.println(s));\n    }\n\n    private static List&lt;String&gt; compute(Path textFilePath, String wordToFind) {\n\n        List&lt;String&gt; results = new ArrayList&lt;String&gt;();\n        // Added position and initialized with 0\n        int[] position = new int[]{0};\n        try {\n            Files.lines(textFilePath).forEach(line -&gt; {\n\n                BreakIterator it = BreakIterator.getWordInstance();\n                it.setText(line.toString());\n\n                int start = it.first();\n                int end = it.next();\n                // Increment position by 1 for each line\n                position[0] += 1;\n\n                while (end != BreakIterator.DONE) {\n                    String currentWord = line.toString().substring(start, end);\n                    if (Character.isLetterOrDigit(currentWord.charAt(0))) {\n                        if (currentWord.equals(wordToFind)) {\n                            results.add(\"File Path: \" + textFilePath + \", Found Word: \" + wordToFind + \", Line: \" + position[0]);\n                            break;\n                        }\n                    }\n                    start = end;\n                    end = it.next();\n                }\n            });\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return results;\n    }\n\n}\n</code></pre>\n\n<p><strong>demo.txt:</strong></p>\n\n<pre><code>Stream1\nReview\nStream\n2020-10-10 10:00\nTest\n0.0\nadmin HOST Test\nStream2\nReview\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/6Rhh6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6Rhh6.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Note:</strong></p>\n\n<ol>\n<li>This is an example for your reference as it uses <code>List&lt;String&gt;</code>.</li>\n<li>Added <code>int[] position = new int[]{0};</code> and <code>position[0] += 1;</code> for line numbers to be displayed.</li>\n<li>In above example <code>Test</code> exists in line number <code>5</code> and <code>7</code>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10695228,"reputation":535,"user_id":7872645,"display_name":"sapisch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590170689,"creation_date":1590170689,"answer_id":61961224,"question_id":61960848,"body_markdown":"You can use a `LineNumberReader` to get the linenumber. That would look something like this:\r\n\r\n    private static List&lt;A&gt; compute(Path textFile, String word) {\r\n        List&lt;A&gt; results = new ArrayList&lt;A&gt;();\r\n\r\n        try (final LineNumberReader reader = new LineNumberReader(new FileReader(textFile.toFile()))) {\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n                BreakIterator it = BreakIterator.getWordInstance();\r\n                it.setText(line);\r\n\r\n                int start = it.first();\r\n                int end = it.next();\r\n\r\n                final int lineNumber = reader.getLineNumber(); // here is your linenumber\r\n\r\n                while (end != BreakIterator.DONE) {\r\n                    String currentWord = line.substring(start, end);\r\n                    if (Character.isLetterOrDigit(currentWord.charAt(0))) {\r\n                        if (currentWord.equals(word)) {\r\n                            results.add(new WordLocation(textFile, line));\r\n                            break;\r\n                        }\r\n                    }\r\n                    start = end;\r\n                    end = it.next();\r\n                }\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return results;\r\n    }","title":"How can I get the line number where the word has been found?","body":"<p>You can use a <code>LineNumberReader</code> to get the linenumber. That would look something like this:</p>\n\n<pre><code>private static List&lt;A&gt; compute(Path textFile, String word) {\n    List&lt;A&gt; results = new ArrayList&lt;A&gt;();\n\n    try (final LineNumberReader reader = new LineNumberReader(new FileReader(textFile.toFile()))) {\n        String line;\n        while ((line = reader.readLine()) != null) {\n            BreakIterator it = BreakIterator.getWordInstance();\n            it.setText(line);\n\n            int start = it.first();\n            int end = it.next();\n\n            final int lineNumber = reader.getLineNumber(); // here is your linenumber\n\n            while (end != BreakIterator.DONE) {\n                String currentWord = line.substring(start, end);\n                if (Character.isLetterOrDigit(currentWord.charAt(0))) {\n                    if (currentWord.equals(word)) {\n                        results.add(new WordLocation(textFile, line));\n                        break;\n                    }\n                }\n                start = end;\n                end = it.next();\n            }\n        }\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return results;\n}\n</code></pre>\n"}],"owner":{"account_id":18655715,"reputation":15,"user_id":13598183,"display_name":"fontesi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61961193,"answer_count":2,"score":0,"last_activity_date":1671059989,"creation_date":1590169408,"question_id":61960848,"body_markdown":"\r\n```java\r\nprivate static List&lt;A&gt; compute(Path textFile, String word) {\r\n    List&lt;A&gt; results = new ArrayList&lt;A&gt;();\r\n\r\n    try {\r\n        Files.lines(textFile).forEach(line -&gt; {\r\n\r\n            BreakIterator it = BreakIterator.getWordInstance();\r\n            it.setText(line.toString());\r\n\r\n            int start = it.first();\r\n            int end = it.next();\r\n\r\n            while (end != BreakIterator.DONE) {\r\n                String currentWord = line.toString().substring(start, end);\r\n                if (Character.isLetterOrDigit(currentWord.charAt(0))) {\r\n                    if (currentWord.equals(word)) {\r\n                        results.add(new WordLocation(textFile, line));\r\n                        break;\r\n                    }\r\n                }\r\n                start = end;\r\n                end = it.next();\r\n            }\r\n        });\r\n\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n    return results;\r\n}\r\n```\r\n\r\nHow can I get the line number which the word has been found?\r\nI want to use a stream to calculate in Lamdba.\r\nDo you have any idea? \r\n\r\n\r\n\r\n","title":"How can I get the line number where the word has been found?","body":"<pre class=\"lang-java prettyprint-override\"><code>private static List&lt;A&gt; compute(Path textFile, String word) {\n    List&lt;A&gt; results = new ArrayList&lt;A&gt;();\n\n    try {\n        Files.lines(textFile).forEach(line -&gt; {\n\n            BreakIterator it = BreakIterator.getWordInstance();\n            it.setText(line.toString());\n\n            int start = it.first();\n            int end = it.next();\n\n            while (end != BreakIterator.DONE) {\n                String currentWord = line.toString().substring(start, end);\n                if (Character.isLetterOrDigit(currentWord.charAt(0))) {\n                    if (currentWord.equals(word)) {\n                        results.add(new WordLocation(textFile, line));\n                        break;\n                    }\n                }\n                start = end;\n                end = it.next();\n            }\n        });\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return results;\n}\n</code></pre>\n<p>How can I get the line number which the word has been found?\nI want to use a stream to calculate in Lamdba.\nDo you have any idea?</p>\n"},{"tags":["java","spring","jdbctemplate"],"comments":[{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1644809656,"post_id":71105421,"comment_id":125696250,"body_markdown":"Does this answer your question? [How to get Map data using JDBCTemplate.queryForMap](https://stackoverflow.com/questions/10029785/how-to-get-map-data-using-jdbctemplate-queryformap)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/10029785/how-to-get-map-data-using-jdbctemplate-queryformap\">How to get Map data using JDBCTemplate.queryForMap</a>"},{"owner":{"account_id":8964938,"reputation":749,"user_id":6686007,"display_name":"Roberto Petrilli"},"score":0,"creation_date":1644831693,"post_id":71105421,"comment_id":125701091,"body_markdown":"&quot;How to get Map data using JDBCTemplate.queryForMap&quot; does not answer my question. My problem is not to populate a map out of a resultset but to have a callback on each record I can use for any computation. The answer from pete below is, in my opinion, a cleaner solution.","body":"&quot;How to get Map data using JDBCTemplate.queryForMap&quot; does not answer my question. My problem is not to populate a map out of a resultset but to have a callback on each record I can use for any computation. The answer from pete below is, in my opinion, a cleaner solution."}],"answers":[{"tags":[],"owner":{"account_id":19105124,"reputation":41,"user_id":13952451,"display_name":"Arun Kumar M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644817254,"creation_date":1644817254,"answer_id":71107580,"question_id":71105421,"body_markdown":"    You can try using the following code. Just create a new map, insert values in it and return it. and then you can copy values from that result map to your map.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n     Map&lt;String, Double&gt; mAcc = new HashMap&lt;&gt;();\r\n        sql = &quot;select ar.id_codice_art, sum(ar.quantita) quantita\\n&quot; +\r\n                &quot;from accettazione a \\n&quot; +\r\n                &quot;inner join accettazione_riga ar on a.id_accettazione = ar.id_accettazione\\n&quot; +\r\n                &quot;where a.id_ordine = ? \\n&quot; +\r\n                &quot;group by ar.id_codice_art&quot;;\r\n        Map&lt;String,Double&gt; = jdbcTemplate.query(sql, (rs)-&gt;{\r\n        Map&lt;String,Double&gt; map = new HashMap&lt;&gt;();\r\n            while(rs.next()){\r\n            map.put(rs.getString(&quot;id_codice_art&quot;), rs.getDouble(&quot;quantita&quot;));\r\n            }\r\n            return map;\r\n        }, idOrdine);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Better way to use JdbcTemplate with Lambda RowMapper","body":"<pre><code>You can try using the following code. Just create a new map, insert values in it and return it. and then you can copy values from that result map to your map.\n</code></pre>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code> Map&lt;String, Double&gt; mAcc = new HashMap&lt;&gt;();\n    sql = \"select ar.id_codice_art, sum(ar.quantita) quantita\\n\" +\n            \"from accettazione a \\n\" +\n            \"inner join accettazione_riga ar on a.id_accettazione = ar.id_accettazione\\n\" +\n            \"where a.id_ordine = ? \\n\" +\n            \"group by ar.id_codice_art\";\n    Map&lt;String,Double&gt; = jdbcTemplate.query(sql, (rs)-&gt;{\n    Map&lt;String,Double&gt; map = new HashMap&lt;&gt;();\n        while(rs.next()){\n        map.put(rs.getString(\"id_codice_art\"), rs.getDouble(\"quantita\"));\n        }\n        return map;\n    }, idOrdine);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":17947811,"reputation":76,"user_id":13041661,"display_name":"pete_bc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644818208,"creation_date":1644817774,"answer_id":71107628,"question_id":71105421,"body_markdown":"I&#39;m assuming that the idOrdine key is a Long.\r\n\r\n    Map&lt;String, Double&gt; mAcc = new HashMap&lt;&gt;();\r\n    PreparedStatementSetter pss = ps -&gt; ps.setLong(1, idOrdine);\r\n    RowCallbackHandler rch = rs -&gt; mAcc.put(rs.getString(&quot;id_codice_art&quot;),\r\n         rs.getDouble(&quot;quantita&quot;));\r\n    jdbcTemplate.query(sql, pss, rch);\r\n\r\nOf course, you can in-line those lambdas to avoid importing those two classes. \r\n\r\nI just learned that in researching your answer, and now I&#39;m going to rewrite a chunk of code I just wrote for work to use that method too!","title":"Better way to use JdbcTemplate with Lambda RowMapper","body":"<p>I'm assuming that the idOrdine key is a Long.</p>\n<pre><code>Map&lt;String, Double&gt; mAcc = new HashMap&lt;&gt;();\nPreparedStatementSetter pss = ps -&gt; ps.setLong(1, idOrdine);\nRowCallbackHandler rch = rs -&gt; mAcc.put(rs.getString(&quot;id_codice_art&quot;),\n     rs.getDouble(&quot;quantita&quot;));\njdbcTemplate.query(sql, pss, rch);\n</code></pre>\n<p>Of course, you can in-line those lambdas to avoid importing those two classes.</p>\n<p>I just learned that in researching your answer, and now I'm going to rewrite a chunk of code I just wrote for work to use that method too!</p>\n"}],"owner":{"account_id":8964938,"reputation":749,"user_id":6686007,"display_name":"Roberto Petrilli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":892,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71107628,"answer_count":2,"score":0,"last_activity_date":1671059984,"creation_date":1644791463,"question_id":71105421,"body_markdown":"Often in time I use jdbcTemplate.query not to return a resultset but to access the DB and do some computations on each record selected.\r\nFor example the code below works \r\n\r\n        Map&lt;String, Double&gt; mAcc = new HashMap&lt;&gt;();\r\n        sql = &quot;select ar.id_codice_art, sum(ar.quantita) quantita\\n&quot; +\r\n                &quot;from accettazione a \\n&quot; +\r\n                &quot;inner join accettazione_riga ar on a.id_accettazione = ar.id_accettazione\\n&quot; +\r\n                &quot;where a.id_ordine = ? \\n&quot; +\r\n                &quot;group by ar.id_codice_art&quot;;\r\n        jdbcTemplate.query(sql, (rs, i)-&gt;{\r\n            mAcc.put(rs.getString(&quot;id_codice_art&quot;), rs.getDouble(&quot;quantita&quot;));\r\n            return &quot;&quot;;\r\n        }, idOrdine);\r\n\r\nbut it&#39;s not clean especially when a return &quot;&quot; because it is required by RowMapper&lt;T&gt; interface. At the same time I don&#39;t want to create a record or a class just to return a list and work on the list.\r\n\r\nIs there a better way to do the same think using jdbcTemplate?","title":"Better way to use JdbcTemplate with Lambda RowMapper","body":"<p>Often in time I use jdbcTemplate.query not to return a resultset but to access the DB and do some computations on each record selected.\nFor example the code below works</p>\n<pre><code>    Map&lt;String, Double&gt; mAcc = new HashMap&lt;&gt;();\n    sql = &quot;select ar.id_codice_art, sum(ar.quantita) quantita\\n&quot; +\n            &quot;from accettazione a \\n&quot; +\n            &quot;inner join accettazione_riga ar on a.id_accettazione = ar.id_accettazione\\n&quot; +\n            &quot;where a.id_ordine = ? \\n&quot; +\n            &quot;group by ar.id_codice_art&quot;;\n    jdbcTemplate.query(sql, (rs, i)-&gt;{\n        mAcc.put(rs.getString(&quot;id_codice_art&quot;), rs.getDouble(&quot;quantita&quot;));\n        return &quot;&quot;;\n    }, idOrdine);\n</code></pre>\n<p>but it's not clean especially when a return &quot;&quot; because it is required by RowMapper interface. At the same time I don't want to create a record or a class just to return a list and work on the list.</p>\n<p>Is there a better way to do the same think using jdbcTemplate?</p>\n"},{"tags":["java","generics","wildcard"],"comments":[{"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"score":1,"creation_date":1345492309,"post_id":12043874,"comment_id":16079942,"body_markdown":"possible duplicate of [Can&#39;t add value to the Java collection with wildcard generic type](http://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type\">Can&#39;t add value to the Java collection with wildcard generic type</a>"},{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1345493142,"post_id":12043874,"comment_id":16080281,"body_markdown":"Erm, isn&#39;t it kind of inconsistent to vote to close the question *and* provide an answer?","body":"Erm, isn&#39;t it kind of inconsistent to vote to close the question <i>and</i> provide an answer?"},{"owner":{"account_id":405939,"reputation":11839,"user_id":775138,"accept_rate":66,"display_name":"herman"},"score":0,"creation_date":1345503870,"post_id":12043874,"comment_id":16083737,"body_markdown":"It is not a duplicate (at least not of that question).","body":"It is not a duplicate (at least not of that question)."},{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":0,"creation_date":1345504299,"post_id":12043874,"comment_id":16083843,"body_markdown":"I&#39;ve seen questions about this exact example before, but can&#39;t seem to find them in search.","body":"I&#39;ve seen questions about this exact example before, but can&#39;t seem to find them in search."},{"owner":{"account_id":29404,"reputation":45520,"user_id":79439,"accept_rate":62,"display_name":"thecoop"},"score":0,"creation_date":1383310354,"post_id":12043874,"comment_id":29307918,"body_markdown":"possible duplicate of [Capturing wildcards in java generics](http://stackoverflow.com/questions/17340474/capturing-wildcards-in-java-generics)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/17340474/capturing-wildcards-in-java-generics\">Capturing wildcards in java generics</a>"},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1434098383,"post_id":12043874,"comment_id":49646235,"body_markdown":"I just wrote an [answer](http://stackoverflow.com/questions/30797805/understanding-a-captured-type-in-java/30798066#30798066) which explains wildcard capture for another question. That information seems relevant for this question also.","body":"I just wrote an <a href=\"http://stackoverflow.com/questions/30797805/understanding-a-captured-type-in-java/30798066#30798066\">answer</a> which explains wildcard capture for another question. That information seems relevant for this question also."},{"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"score":0,"creation_date":1453747735,"post_id":12043874,"comment_id":57728001,"body_markdown":"http://bayou.io/draft/Capturing_Wildcards.html","body":"<a href=\"http://bayou.io/draft/Capturing_Wildcards.html\" rel=\"nofollow noreferrer\">bayou.io/draft/Capturing_Wildcards.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1345492251,"creation_date":1345491166,"answer_id":12043924,"question_id":12043874,"body_markdown":"&gt; why the compiler can&#39;t retain the assignment safe?\r\n\r\nThe compiler doesn&#39;t know _anything_ about the type of elements in `List&lt;?&gt; i`, by definition of `?`. Wildcard does *not* mean &quot;any type;&quot; it means &quot;some unknown type.&quot;\r\n\r\n&gt;  It knows that,by executing for instance, the method with an Integer List, it gets from i.get an Integer value.\r\n\r\nThat&#39;s true, but as I said above: the compiler can *only* know – at **compile time**, remember – that `i.get(0)` returns an `Object`, which is the upper bound of `?`. But there&#39;s no guarantee that `?` is *at runtime* `Object`, so there is no way for the compiler to know that `i.set(0, i.get(0))` is a safe call. It&#39;s like writing this:\r\n\r\n    List&lt;Foo&gt; fooz = /* init */;\r\n    Object foo = fooz.get(0);\r\n    fooz.set(0, foo); // won&#39;t compile because foo is an object, not a Foo\r\n\r\n###More reading:\r\n- https://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type\r\n- https://stackoverflow.com/questions/69702/java-collections-using-wildcard\r\n- https://stackoverflow.com/questions/7363170/generic-collection-wildcard-in-java\r\n- https://stackoverflow.com/questions/9637125/generics-cannot-add-to-a-list-with-unbounded-wildcard\r\n- https://stackoverflow.com/questions/10777701/what-is-the-difference-betwen-collection-and-collectiont","title":"Java Generics: Wildcard capture misunderstanding","body":"<blockquote>\n  <p>why the compiler can't retain the assignment safe?</p>\n</blockquote>\n\n<p>The compiler doesn't know <em>anything</em> about the type of elements in <code>List&lt;?&gt; i</code>, by definition of <code>?</code>. Wildcard does <em>not</em> mean \"any type;\" it means \"some unknown type.\"</p>\n\n<blockquote>\n  <p>It knows that,by executing for instance, the method with an Integer List, it gets from i.get an Integer value.</p>\n</blockquote>\n\n<p>That's true, but as I said above: the compiler can <em>only</em> know – at <strong>compile time</strong>, remember – that <code>i.get(0)</code> returns an <code>Object</code>, which is the upper bound of <code>?</code>. But there's no guarantee that <code>?</code> is <em>at runtime</em> <code>Object</code>, so there is no way for the compiler to know that <code>i.set(0, i.get(0))</code> is a safe call. It's like writing this:</p>\n\n<pre><code>List&lt;Foo&gt; fooz = /* init */;\nObject foo = fooz.get(0);\nfooz.set(0, foo); // won't compile because foo is an object, not a Foo\n</code></pre>\n\n<h3>More reading:</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type\">Can&#39;t add value to the Java collection with wildcard generic type</a></li>\n<li><a href=\"https://stackoverflow.com/questions/69702/java-collections-using-wildcard\">Java Collections using wildcard</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7363170/generic-collection-wildcard-in-java\">Generic collection &amp; wildcard in java</a></li>\n<li><a href=\"https://stackoverflow.com/questions/9637125/generics-cannot-add-to-a-list-with-unbounded-wildcard\">Generics - Cannot add to a List with unbounded wildcard</a></li>\n<li><a href=\"https://stackoverflow.com/questions/10777701/what-is-the-difference-betwen-collection-and-collectiont\">What is the difference betwen Collection&lt;?&gt; and Collection&lt;T&gt;</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1345492760,"creation_date":1345492760,"answer_id":12044287,"question_id":12043874,"body_markdown":"&gt; why the compiler can&#39;t retain the assignment safe? It knows that,by executing for instance, the method with an Integer List, it gets from i.get an Integer value. So it try to set an Integer value at index 0 to the same Integer list (i).\r\n\r\nPut differently, why does the compiler not know that the two usages of the wildcard type `List&lt;?&gt;` in\r\n\r\n    i.set(0, i.get(0));\r\n\r\nrefer to the same actual type?\r\n\r\nWell, that would require the compiler to know that `i` contains the same instance for both evaluations of the expression. Since `i` isn&#39;t even final, the compiler would have to check whether `i` could possibly have been assigned in between evaluating the two expressions. Such an analysis is only simple for local variables (for who knows whether an invoked method will update a particular field of a particular object?). This is quite a bit of additional complexity in the compiler for rarely manifesting benefits. I suppose that&#39;s why the designers of the Java programming language kept things simple by specifying that different uses of the same wildcard type have different captures.","title":"Java Generics: Wildcard capture misunderstanding","body":"<blockquote>\n  <p>why the compiler can't retain the assignment safe? It knows that,by executing for instance, the method with an Integer List, it gets from i.get an Integer value. So it try to set an Integer value at index 0 to the same Integer list (i).</p>\n</blockquote>\n\n<p>Put differently, why does the compiler not know that the two usages of the wildcard type <code>List&lt;?&gt;</code> in</p>\n\n<pre><code>i.set(0, i.get(0));\n</code></pre>\n\n<p>refer to the same actual type?</p>\n\n<p>Well, that would require the compiler to know that <code>i</code> contains the same instance for both evaluations of the expression. Since <code>i</code> isn't even final, the compiler would have to check whether <code>i</code> could possibly have been assigned in between evaluating the two expressions. Such an analysis is only simple for local variables (for who knows whether an invoked method will update a particular field of a particular object?). This is quite a bit of additional complexity in the compiler for rarely manifesting benefits. I suppose that's why the designers of the Java programming language kept things simple by specifying that different uses of the same wildcard type have different captures.</p>\n"},{"tags":[],"owner":{"account_id":181527,"reputation":1103,"user_id":415582,"display_name":"Wouter Vegter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1438335268,"creation_date":1437667144,"answer_id":31592481,"question_id":12043874,"body_markdown":"I also find this question hard to understand; splitting the single command into two commands helped me.\r\n\r\nBelow code is what actually happens in the background when the original method is inspected&amp;compiled, the compiler makes its own local variable: the result of the `i.get(0)` call is placed in the register on the local variable stack.\r\n\r\nAnd that is - for the understanding of this issue - the same as making a local variable which for convenience I have given the name `element`.\r\n\r\n    import java.util.List;\r\n    public class WildcardError {\r\n     void foo(List&lt;?&gt; i) {\r\n      Object element = i.get(0);  // command 1\r\n      i.set(0, element);          // command 2\r\n     }\r\n    }\r\n\r\nWhen command 1 is inspected, it can only set the type of `element` to `Object` (--&gt; upperbound concept, see Matt&#39;s answer), as it can not use `?` as a variable type; the `?` is only used for indicating that the generic type is unknown.\r\n\r\nVariable types can only be real types or generic types, but since you don&#39;t use a generic type in this method like `&lt;T&gt;` for example, it is **forced** to use a real type. This forcing is done because of the following lines in the java specification (jls8, 18.2.1):\r\n\r\n&gt; A constraint formula of the form ‹Expression → T› is reduced as follows:\r\n&gt;\r\n&gt; [...]\r\n&gt; \r\n&gt; – If the expression is a class instance creation expression or a method invocation expression, the constraint reduces to the bound set B3 which would be used to determine the expression&#39;s invocation type when targeting T, as defined in &#167;18.5.2. (For a class instance creation expression, the corresponding &quot;method&quot; used for inference is defined in &#167;15.9.3). \r\n","title":"Java Generics: Wildcard capture misunderstanding","body":"<p>I also find this question hard to understand; splitting the single command into two commands helped me.</p>\n\n<p>Below code is what actually happens in the background when the original method is inspected&amp;compiled, the compiler makes its own local variable: the result of the <code>i.get(0)</code> call is placed in the register on the local variable stack.</p>\n\n<p>And that is - for the understanding of this issue - the same as making a local variable which for convenience I have given the name <code>element</code>.</p>\n\n<pre><code>import java.util.List;\npublic class WildcardError {\n void foo(List&lt;?&gt; i) {\n  Object element = i.get(0);  // command 1\n  i.set(0, element);          // command 2\n }\n}\n</code></pre>\n\n<p>When command 1 is inspected, it can only set the type of <code>element</code> to <code>Object</code> (--> upperbound concept, see Matt's answer), as it can not use <code>?</code> as a variable type; the <code>?</code> is only used for indicating that the generic type is unknown.</p>\n\n<p>Variable types can only be real types or generic types, but since you don't use a generic type in this method like <code>&lt;T&gt;</code> for example, it is <strong>forced</strong> to use a real type. This forcing is done because of the following lines in the java specification (jls8, 18.2.1):</p>\n\n<blockquote>\n  <p>A constraint formula of the form ‹Expression → T› is reduced as follows:</p>\n  \n  <p>[...]</p>\n  \n  <p>– If the expression is a class instance creation expression or a method invocation expression, the constraint reduces to the bound set B3 which would be used to determine the expression's invocation type when targeting T, as defined in §18.5.2. (For a class instance creation expression, the corresponding \"method\" used for inference is defined in §15.9.3). </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5028852,"reputation":315,"user_id":4039750,"display_name":"dhanu10896"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531493891,"creation_date":1531488388,"answer_id":51326224,"question_id":12043874,"body_markdown":"Solution Will Be,\r\n\r\n\r\n    import java.util.List;\r\n    \r\n        public class WildcardError {\r\n    \r\n        private void fooHelper(List&lt;T&gt; i){\r\n             i.set(0, i.get(0));\r\n        }\r\n        public void foo(List&lt;?&gt; i){\r\n             fooHelper(i);\r\n        }\r\n    }\r\n\r\nhere fooHelper will capture type T of wildcard ? (so as the name wildcard capture).\r\n","title":"Java Generics: Wildcard capture misunderstanding","body":"<p>Solution Will Be,</p>\n\n<pre><code>import java.util.List;\n\n    public class WildcardError {\n\n    private void fooHelper(List&lt;T&gt; i){\n         i.set(0, i.get(0));\n    }\n    public void foo(List&lt;?&gt; i){\n         fooHelper(i);\n    }\n}\n</code></pre>\n\n<p>here fooHelper will capture type T of wildcard ? (so as the name wildcard capture).</p>\n"},{"tags":[],"owner":{"account_id":6315942,"reputation":2105,"user_id":5255935,"accept_rate":59,"display_name":"Sumit Jha"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1534015751,"creation_date":1534015751,"answer_id":51803050,"question_id":12043874,"body_markdown":"\r\nAccording to Get-Put principle:\r\n\r\n1. If you have extends wildcard as in ``List&lt;? extends Something&gt;``, then:\r\n\r\n 1A. You can get from the structure using ``Something`` or its ``superclass`` reference. \r\n\r\n\r\n        void foo(List&lt;? extends Number&gt; nums) {\r\n           Number number = nums.get(0); \r\n           Object number = nums.get(0); // superclass reference also works.\r\n        }\r\n\r\n 1B. You cannot add anything to the structure (except ``null``).\r\n\r\n\r\n        void foo(List&lt;? extends Number&gt; nums) {\r\n           nums.add(1); Compile error\r\n           nums.add(1L); Compile error\r\n           nums.add(null); // only null is allowed.\r\n        }\r\n\r\n2. Similarly, if you have super wildcard as in ``List&lt;? super Something&gt;``, then:\r\n\r\n 2A. You can add to the structure which is ``Something`` or its ``subclass``.\r\n For eg:\r\n\r\n\r\n        void foo(List&lt;? super Number&gt; nums) {\r\n            nums.add(1); // Integer is a subclass of Number\r\n            nums.add(1L); // Long is a subclass of Number\r\n            nums.add(&quot;str&quot;); // Compile error: String is not subclass of Number         \r\n        }\r\n\r\n\r\n 2A. You cannot get from the structure (except via Object reference).\r\n For eg:\r\n\r\n\r\n        void foo(List&lt;? super Integer&gt; nums) {\r\n            Integer num = nums.get(0); // Compile error\r\n            Number num = nums.get(0); // Compile error\r\n            Object num = nums.get(0); // Only get via Object reference is allowed.        \r\n        }\r\n\r\nComing back to OP&#39;s question, ``List&lt;?&gt; i`` is just the short representation for ``List&lt;? extends Object&gt; i``. And since it&#39;s a ``extends`` wildcard, the ``set`` operation fails.\r\n\r\nThe final piece remaining is WHY the operation fails ? Or why the Get-Put principle in the first place? - This has to do with type safety as answered by Jon Skeet [here][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type","title":"Java Generics: Wildcard capture misunderstanding","body":"<p>According to Get-Put principle:</p>\n\n<ol>\n<li><p>If you have extends wildcard as in <code>List&lt;? extends Something&gt;</code>, then:</p>\n\n<p>1A. You can get from the structure using <code>Something</code> or its <code>superclass</code> reference. </p>\n\n<pre><code>void foo(List&lt;? extends Number&gt; nums) {\n   Number number = nums.get(0); \n   Object number = nums.get(0); // superclass reference also works.\n}\n</code></pre>\n\n<p>1B. You cannot add anything to the structure (except <code>null</code>).</p>\n\n<pre><code>void foo(List&lt;? extends Number&gt; nums) {\n   nums.add(1); Compile error\n   nums.add(1L); Compile error\n   nums.add(null); // only null is allowed.\n}\n</code></pre></li>\n<li><p>Similarly, if you have super wildcard as in <code>List&lt;? super Something&gt;</code>, then:</p>\n\n<p>2A. You can add to the structure which is <code>Something</code> or its <code>subclass</code>.\nFor eg:</p>\n\n<pre><code>void foo(List&lt;? super Number&gt; nums) {\n    nums.add(1); // Integer is a subclass of Number\n    nums.add(1L); // Long is a subclass of Number\n    nums.add(\"str\"); // Compile error: String is not subclass of Number         \n}\n</code></pre>\n\n<p>2A. You cannot get from the structure (except via Object reference).\nFor eg:</p>\n\n<pre><code>void foo(List&lt;? super Integer&gt; nums) {\n    Integer num = nums.get(0); // Compile error\n    Number num = nums.get(0); // Compile error\n    Object num = nums.get(0); // Only get via Object reference is allowed.        \n}\n</code></pre></li>\n</ol>\n\n<p>Coming back to OP's question, <code>List&lt;?&gt; i</code> is just the short representation for <code>List&lt;? extends Object&gt; i</code>. And since it's a <code>extends</code> wildcard, the <code>set</code> operation fails.</p>\n\n<p>The final piece remaining is WHY the operation fails ? Or why the Get-Put principle in the first place? - This has to do with type safety as answered by Jon Skeet <a href=\"https://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":14035706,"reputation":703,"user_id":10203694,"display_name":"Alexander Korostin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565155954,"creation_date":1565155954,"answer_id":57387543,"question_id":12043874,"body_markdown":"I guess your misunderstanding of the restriction comes from substitution of `?` for  `any type`, `Object` or something like that in your mind. But that assumption is not correct, `?` in fact means `unknown type`. So in the following line\r\n```java\r\nfooz.set(0, foo);\r\n```\r\nyou&#39;re trying to assign the variable of some type to the variable of unknown type (since the function signature is like `void set(int, ?)`), which can never be possible, whatever the type of `foo` would be. In your case the type of foo is `Object` and you cannot assign it to a variable of some unknown type, which in fact may be `Foo`, `Bar` or any other.","title":"Java Generics: Wildcard capture misunderstanding","body":"<p>I guess your misunderstanding of the restriction comes from substitution of <code>?</code> for  <code>any type</code>, <code>Object</code> or something like that in your mind. But that assumption is not correct, <code>?</code> in fact means <code>unknown type</code>. So in the following line</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>fooz.set(0, foo);\n</code></pre>\n\n<p>you're trying to assign the variable of some type to the variable of unknown type (since the function signature is like <code>void set(int, ?)</code>), which can never be possible, whatever the type of <code>foo</code> would be. In your case the type of foo is <code>Object</code> and you cannot assign it to a variable of some unknown type, which in fact may be <code>Foo</code>, <code>Bar</code> or any other.</p>\n"},{"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639404855,"creation_date":1639404855,"answer_id":70336045,"question_id":12043874,"body_markdown":"I think you misunderstand the `?` in Generics.  It isn&#39;t &quot;wildcard capture&quot; at runtime.  It is &quot;wildcard capture&quot; at compile time.  Since that capture is gone after compilation, the `List&lt;?&gt;` often becomes `List&lt;Object&gt;` or a list of some interface or common base class that is the lowest subclass that is shared amongst the instances according to the Generics type.\r\n\r\nBecause Java had to make the Generics system compatible with non-Generics supporting JVMs, there are no Generics types at runtime.  This means that all checks / captures don&#39;t exist at runtime.  Either the compiler permits a very narrow range of compatible Generics type assignments when it compiles, or it throws an error.\r\n\r\nNow if you want to hold a Generics type at runtime, there are approaches.  Most of them involve passing the Class object as a parameter into a constructor, which holds it in a field.  Then you can refer to the field for the exact passed type.  You can entangle this type with your Generics parameters; and by doing so, you can then have the actual type in places in the runtime code where the &quot;Generics type parameters&quot; have been replaced by their most permissive type supported in the real Java type system.  I don&#39;t recommend doing this for many situations, as it is a lot of work (and not likely to give you much more security); but, occasionally you really do need the type.\r\n","title":"Java Generics: Wildcard capture misunderstanding","body":"<p>I think you misunderstand the <code>?</code> in Generics.  It isn't &quot;wildcard capture&quot; at runtime.  It is &quot;wildcard capture&quot; at compile time.  Since that capture is gone after compilation, the <code>List&lt;?&gt;</code> often becomes <code>List&lt;Object&gt;</code> or a list of some interface or common base class that is the lowest subclass that is shared amongst the instances according to the Generics type.</p>\n<p>Because Java had to make the Generics system compatible with non-Generics supporting JVMs, there are no Generics types at runtime.  This means that all checks / captures don't exist at runtime.  Either the compiler permits a very narrow range of compatible Generics type assignments when it compiles, or it throws an error.</p>\n<p>Now if you want to hold a Generics type at runtime, there are approaches.  Most of them involve passing the Class object as a parameter into a constructor, which holds it in a field.  Then you can refer to the field for the exact passed type.  You can entangle this type with your Generics parameters; and by doing so, you can then have the actual type in places in the runtime code where the &quot;Generics type parameters&quot; have been replaced by their most permissive type supported in the real Java type system.  I don't recommend doing this for many situations, as it is a lot of work (and not likely to give you much more security); but, occasionally you really do need the type.</p>\n"}],"owner":{"display_name":"user1462183"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9802,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":12043924,"answer_count":7,"score":25,"last_activity_date":1671059975,"creation_date":1345490932,"question_id":12043874,"body_markdown":"Reading the Java online tutorial I haven&#39;t understood anything about wildcard capture.\r\nFor example:\r\n\r\n        import java.util.List;\r\n        public class WildcardError {\r\n         void foo(List&lt;?&gt; i) {\r\n          i.set(0, i.get(0));\r\n         }\r\n        }\r\n\r\nWhy can&#39;t the compiler retain the assignment safely?\r\n\r\nIt knows that, by executing for instance, the method with an `Integer` List, it gets from `i.get` an `Integer` value. So it tries to set an `Integer` value at index `0` to the same Integer list (`i`).\r\n\r\nSo, what&#39;s wrong? Why write Wildcard helper?","title":"Java Generics: Wildcard capture misunderstanding","body":"<p>Reading the Java online tutorial I haven't understood anything about wildcard capture.\nFor example:</p>\n<pre><code>    import java.util.List;\n    public class WildcardError {\n     void foo(List&lt;?&gt; i) {\n      i.set(0, i.get(0));\n     }\n    }\n</code></pre>\n<p>Why can't the compiler retain the assignment safely?</p>\n<p>It knows that, by executing for instance, the method with an <code>Integer</code> List, it gets from <code>i.get</code> an <code>Integer</code> value. So it tries to set an <code>Integer</code> value at index <code>0</code> to the same Integer list (<code>i</code>).</p>\n<p>So, what's wrong? Why write Wildcard helper?</p>\n"},{"tags":["java","android","android-studio","listview","layout-inflater"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671967007,"post_id":74791422,"comment_id":132201790,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27245007,"reputation":1,"user_id":20770468,"display_name":"STOK BULL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671059950,"creation_date":1670969449,"question_id":74791422,"body_markdown":"I&#39;m trying to install an app from android studio to an oppo find x3 pro with one ui 4.1.1 but app crashes. I tried the installation on multiple device but it works. Only on devices with one ui 4.1.1 I found this problem. \r\n\r\n```\r\nE/OplusCustomizeRestrictionManager: sInstance is null, start a new sInstance\r\nD/AndroidRuntime: Shutting down VM\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.skadut, PID: 7846\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.skadut/com.example.skadut.MainActivity}: android.view.InflateException: Binary XML file line #36 in com.example.skadut:layout/activity_main: Binary XML file line #36 in com.example.skadut:layout/activity_main: Error inflating class android.widget.ListView\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3780)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3942)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:109)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2345)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loopOnce(Looper.java:233)\r\n        at android.os.Looper.loop(Looper.java:344)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8212)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1034)\r\n     Caused by: android.view.InflateException: Binary XML file line #36 in com.example.skadut:layout/activity_main: Binary XML file line #36 in com.example.skadut:layout/activity_main: Error inflating class android.widget.ListView\r\n     Caused by: android.view.InflateException: Binary XML file line #36 in com.example.skadut:layout/activity_main: Error inflating class android.widget.ListView\r\n     Caused by: java.lang.reflect.InvocationTargetException\r\n        at java.lang.reflect.Constructor.newInstance0(Native Method)\r\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:343)\r\n        at android.view.LayoutInflater.createView(LayoutInflater.java:863)\r\n        at android.view.LayoutInflater.createView(LayoutInflater.java:785)\r\n        at com.android.internal.policy.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:58)\r\n        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:939)\r\n        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:959)\r\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:1013)\r\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:970)\r\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:1132)\r\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1093)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:692)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:542)\r\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:488)\r\n        at androidx.appcompat.app.AppCompatDelegateImpl.setContentView(AppCompatDelegateImpl.java:706)\r\n        at androidx.appcompat.app.AppCompatActivity.setContentView(AppCompatActivity.java:195)\r\n        at com.example.skadut.MainActivity.onCreate(MainActivity.java:35)\r\n        at android.app.Activity.performCreate(Activity.java:8129)\r\n        at android.app.Activity.performCreate(Activity.java:8109)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1344)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3749)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3942)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:109)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2345)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loopOnce(Looper.java:233)\r\n        at android.os.Looper.loop(Looper.java:344)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8212)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\nE/AndroidRuntime:     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1034)\r\n     Caused by: java.lang.UnsupportedOperationException: Failed to resolve attribute at index 13: TypedValue{t=0x2/d=0x7f030040 a=-1}\r\n        at android.content.res.TypedArray.getDrawableForDensity(TypedArray.java:998)\r\n        at android.content.res.TypedArray.getDrawable(TypedArray.java:982)\r\n        at android.view.View.&lt;init&gt;(View.java:5552)\r\n        at android.view.ViewGroup.&lt;init&gt;(ViewGroup.java:706)\r\n        at android.widget.AdapterView.&lt;init&gt;(AdapterView.java:264)\r\n        at android.widget.AbsListView.&lt;init&gt;(AbsListView.java:901)\r\n        at android.widget.ListView.&lt;init&gt;(ListView.java:231)\r\n        at android.widget.ListView.&lt;init&gt;(ListView.java:227)\r\n        at android.widget.ListView.&lt;init&gt;(ListView.java:223)\r\n        \t... 33 more\r\nI/Process: Sending signal. PID: 7846 SIG: 9\r\nDisconnected from the target VM, address: &#39;localhost:62879&#39;, transport: &#39;socket&#39;\r\n```\r\n\r\n\r\nI would like understand why on tab s7 this works but on tab s8 doesn&#39;t work and also on find x3 pro. Someone has some similar experience?","title":"Android studio launch app crash on one ui 4.1.1","body":"<p>I'm trying to install an app from android studio to an oppo find x3 pro with one ui 4.1.1 but app crashes. I tried the installation on multiple device but it works. Only on devices with one ui 4.1.1 I found this problem.</p>\n<pre><code>E/OplusCustomizeRestrictionManager: sInstance is null, start a new sInstance\nD/AndroidRuntime: Shutting down VM\nE/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.skadut, PID: 7846\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.skadut/com.example.skadut.MainActivity}: android.view.InflateException: Binary XML file line #36 in com.example.skadut:layout/activity_main: Binary XML file line #36 in com.example.skadut:layout/activity_main: Error inflating class android.widget.ListView\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3780)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3942)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:109)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2345)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:233)\n        at android.os.Looper.loop(Looper.java:344)\n        at android.app.ActivityThread.main(ActivityThread.java:8212)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1034)\n     Caused by: android.view.InflateException: Binary XML file line #36 in com.example.skadut:layout/activity_main: Binary XML file line #36 in com.example.skadut:layout/activity_main: Error inflating class android.widget.ListView\n     Caused by: android.view.InflateException: Binary XML file line #36 in com.example.skadut:layout/activity_main: Error inflating class android.widget.ListView\n     Caused by: java.lang.reflect.InvocationTargetException\n        at java.lang.reflect.Constructor.newInstance0(Native Method)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:343)\n        at android.view.LayoutInflater.createView(LayoutInflater.java:863)\n        at android.view.LayoutInflater.createView(LayoutInflater.java:785)\n        at com.android.internal.policy.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:58)\n        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:939)\n        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:959)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:1013)\n        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:970)\n        at android.view.LayoutInflater.rInflate(LayoutInflater.java:1132)\n        at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1093)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:692)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:542)\n        at android.view.LayoutInflater.inflate(LayoutInflater.java:488)\n        at androidx.appcompat.app.AppCompatDelegateImpl.setContentView(AppCompatDelegateImpl.java:706)\n        at androidx.appcompat.app.AppCompatActivity.setContentView(AppCompatActivity.java:195)\n        at com.example.skadut.MainActivity.onCreate(MainActivity.java:35)\n        at android.app.Activity.performCreate(Activity.java:8129)\n        at android.app.Activity.performCreate(Activity.java:8109)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1344)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3749)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3942)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:109)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2345)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:233)\n        at android.os.Looper.loop(Looper.java:344)\n        at android.app.ActivityThread.main(ActivityThread.java:8212)\n        at java.lang.reflect.Method.invoke(Native Method)\nE/AndroidRuntime:     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1034)\n     Caused by: java.lang.UnsupportedOperationException: Failed to resolve attribute at index 13: TypedValue{t=0x2/d=0x7f030040 a=-1}\n        at android.content.res.TypedArray.getDrawableForDensity(TypedArray.java:998)\n        at android.content.res.TypedArray.getDrawable(TypedArray.java:982)\n        at android.view.View.&lt;init&gt;(View.java:5552)\n        at android.view.ViewGroup.&lt;init&gt;(ViewGroup.java:706)\n        at android.widget.AdapterView.&lt;init&gt;(AdapterView.java:264)\n        at android.widget.AbsListView.&lt;init&gt;(AbsListView.java:901)\n        at android.widget.ListView.&lt;init&gt;(ListView.java:231)\n        at android.widget.ListView.&lt;init&gt;(ListView.java:227)\n        at android.widget.ListView.&lt;init&gt;(ListView.java:223)\n            ... 33 more\nI/Process: Sending signal. PID: 7846 SIG: 9\nDisconnected from the target VM, address: 'localhost:62879', transport: 'socket'\n</code></pre>\n<p>I would like understand why on tab s7 this works but on tab s8 doesn't work and also on find x3 pro. Someone has some similar experience?</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":1713048,"reputation":1374,"user_id":1570688,"accept_rate":86,"display_name":"bluelurker"},"score":0,"creation_date":1670326512,"post_id":74701040,"comment_id":131845700,"body_markdown":"can you share the full stack trace?","body":"can you share the full stack trace?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1670336769,"post_id":74701040,"comment_id":131849610,"body_markdown":"Don&#39;t copy answers from posters answering their own question without understanding what they actually hit and are solving. The question/answer you posted is not applicable to your question at all, and steered you wrong. Embeddable does not put the java object into a single field - what you want instead is a Basic mapping. The answer below describes using a converter to control the form the data takes in that single field and generally preferred - JPA would use java&#39;s serialization if you don&#39;t specify a converter, but you don&#39;t need the converter strictly speaking.","body":"Don&#39;t copy answers from posters answering their own question without understanding what they actually hit and are solving. The question/answer you posted is not applicable to your question at all, and steered you wrong. Embeddable does not put the java object into a single field - what you want instead is a Basic mapping. The answer below describes using a converter to control the form the data takes in that single field and generally preferred - JPA would use java&#39;s serialization if you don&#39;t specify a converter, but you don&#39;t need the converter strictly speaking."}],"answers":[{"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670328824,"creation_date":1670328824,"answer_id":74702315,"question_id":74701040,"body_markdown":"The problem is with the JPA mapping, not with the Controller, I think.\r\n\r\nYou&#39;re using @Embeddable, which normally result in a set of columns in your main table. If it&#39;s a collection of @Embeddable objects, you could map it to a separate table with foreign keys, using @ElementCollection.\r\n\r\nHowever, you want to store the collection of sensors as a single JSON string in a single column in your main table. For that, you do not need the @Embeddable annotation. You need to write a custom convertor to convert the collection of sensors to JSON. \r\n\r\n    public class SensorsConverter implements AttributeConverter&lt;List&lt;Sensors&gt;, String&gt; {\r\n    \r\n        private final ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public String convertToDatabaseColumn(List&lt;Sensors&gt; sensors) {\r\n    \r\n            return objectMapper.writeValueAsString(sensors);\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;Sensors&gt; convertToEntityAttribute(String sensorsJSON) {\r\n    \r\n            return objectMapper.readValue(sensorsJSON, new TypeReference&lt;List&lt;Sensors&gt;&gt;() {});\r\n        }\r\n    \r\n    }\r\n\r\nThen you can use it in your entity class:\r\n\r\n    @Column(name = &quot;SENSORS&quot;)\r\n    @Convert(converter = SensorsConverter.class)\r\n    private List&lt;Sensors&gt; sensors;","title":"Can not store list of objects as single column JSON","body":"<p>The problem is with the JPA mapping, not with the Controller, I think.</p>\n<p>You're using @Embeddable, which normally result in a set of columns in your main table. If it's a collection of @Embeddable objects, you could map it to a separate table with foreign keys, using @ElementCollection.</p>\n<p>However, you want to store the collection of sensors as a single JSON string in a single column in your main table. For that, you do not need the @Embeddable annotation. You need to write a custom convertor to convert the collection of sensors to JSON.</p>\n<pre><code>public class SensorsConverter implements AttributeConverter&lt;List&lt;Sensors&gt;, String&gt; {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public String convertToDatabaseColumn(List&lt;Sensors&gt; sensors) {\n\n        return objectMapper.writeValueAsString(sensors);\n    }\n\n    @Override\n    public List&lt;Sensors&gt; convertToEntityAttribute(String sensorsJSON) {\n\n        return objectMapper.readValue(sensorsJSON, new TypeReference&lt;List&lt;Sensors&gt;&gt;() {});\n    }\n\n}\n</code></pre>\n<p>Then you can use it in your entity class:</p>\n<pre><code>@Column(name = &quot;SENSORS&quot;)\n@Convert(converter = SensorsConverter.class)\nprivate List&lt;Sensors&gt; sensors;\n</code></pre>\n"}],"owner":{"account_id":11992626,"reputation":1,"user_id":19473840,"display_name":"Luthfi Fitra Musyaffa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671059945,"creation_date":1670323089,"question_id":74701040,"body_markdown":"I&#39;m trying to store a whole array of object into one field on my oracle database, I&#39;m referring to the solution on [this](https://stackoverflow.com/questions/66555092/spring-boot-how-to-send-an-array-of-objects-using-post-request-json) question, but it kept giving me `Can not set java.lang.String field xxx.demo.Models.Sensors.amplitudos to xxx.demo.Models.Sensors` error, I have checked the JSON body and the entity class, but I cannot find the mistake.\r\n\r\nHere is my code.\r\n\r\n`entity`\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;SENSOR&quot;)\r\npublic class Sensor implements Serializable {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n\r\n    @Column(name = &quot;TIMERECEIVED&quot;)\r\n    private Timestamp timereceived;\r\n\r\n    @Column(name = &quot;SENSORS&quot;)\r\n    private Sensors[] sensors;\r\n\r\n    @Column(name = &quot;LOC&quot;)\r\n    private String location;\r\n\r\n    public Sensor() {\r\n\r\n    }\r\n\r\n    public Sensor(Timestamp timereceived, Sensors[] sensors, String location) {\r\n        this.timereceived = timereceived;\r\n        this.sensors = sensors;\r\n        this.location = location;\r\n    }\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public Timestamp getTimereceived() {\r\n        return timereceived;\r\n    }\r\n\r\n    public void setTimereceived(Timestamp timereceived) {\r\n        this.timereceived = timereceived;\r\n    }\r\n\r\n    public Sensors[] getSensors() {\r\n        return sensors;\r\n    }\r\n\r\n    public void setSensors(Sensors[] sensors) {\r\n        this.sensors = sensors;\r\n    }\r\n\r\n    public String getLocation() {\r\n        return location;\r\n    }\r\n\r\n    public void setLocation(String location) {\r\n        this.location = location;\r\n    }\r\n\r\n}\r\n```\r\n\r\n`Sensors class`\r\n\r\n```\r\n@Embeddable\r\npublic class Sensors {\r\n    private String amplitudos;\r\n    private Double displacement;\r\n    private String frequencies;\r\n    private Integer sensorId;\r\n\r\n    public Sensors() {\r\n\r\n    }\r\n\r\n    public Sensors(String amplitudos, Double displacement, String frequencies, Integer sensorId) {\r\n        this.amplitudos = amplitudos;\r\n        this.displacement = displacement;\r\n        this.frequencies = frequencies;\r\n        this.sensorId = sensorId;\r\n    }\r\n\r\n    public String getAmplitudos() {\r\n        return amplitudos;\r\n    }\r\n\r\n    public void setAmplitudos(String amplitudos) {\r\n        this.amplitudos = amplitudos;\r\n    }\r\n\r\n    public Double getDisplacement() {\r\n        return displacement;\r\n    }\r\n\r\n    public void setDisplacement(Double displacement) {\r\n        this.displacement = displacement;\r\n    }\r\n\r\n    public String getFrequencies() {\r\n        return frequencies;\r\n    }\r\n\r\n    public void setFrequencies(String frequencies) {\r\n        this.frequencies = frequencies;\r\n    }\r\n\r\n    public Integer getSensorId() {\r\n        return sensorId;\r\n    }\r\n\r\n    public void setSensorId(Integer sensorId) {\r\n        this.sensorId = sensorId;\r\n    }\r\n\r\n}\r\n```\r\n\r\nmy JSON body\r\n\r\n```\r\n{\r\n    &quot;timereceived&quot;: &quot;2022-11-29T12:04:42.166&quot;,\r\n    &quot;sensors&quot;: [\r\n        {\r\n            &quot;amplitudos&quot;: &quot;a1#a2#a3#a4&quot;,\r\n            &quot;displacement&quot;: 0.002,\r\n            &quot;frequencies&quot;: &quot;f1#f2#f3#f4&quot;,\r\n            &quot;sensorid&quot;: 1\r\n        },\r\n        {\r\n            &quot;amplitudos&quot;: &quot;a1#a2#a3#a4&quot;,\r\n            &quot;displacement&quot;: 0.002,\r\n            &quot;frequencies&quot;: &quot;f1#f2#f3#f4&quot;,\r\n            &quot;sensorid&quot;: 2\r\n        },\r\n        {\r\n            &quot;amplitudos&quot;: &quot;a1#a2#a3#a4&quot;,\r\n            &quot;displacement&quot;: 0.002,\r\n            &quot;frequencies&quot;: &quot;f1#f2#f3#f4&quot;,\r\n            &quot;sensorid&quot;: 3\r\n        },\r\n        {\r\n            &quot;amplitudos&quot;: &quot;a1#a2#a3#a4&quot;,\r\n            &quot;displacement&quot;: 0.002,\r\n            &quot;frequencies&quot;: &quot;f1#f2#f3#f4&quot;,\r\n            &quot;sensorid&quot;: 4\r\n        }\r\n    ],\r\n    &quot;location&quot;: &quot;lokasi&quot;\r\n}\r\n```\r\n\r\nmy controller\r\n\r\n```\r\n@PostMapping(&quot;/sendData&quot;)\r\npublic ResponseEntity sendData(@RequestBody Sensor sensor) {\r\n    Sensor newSensor = sensorRepository.save(sensor);\r\n\r\n    System.out.println(newSensor);\r\n    return ResponseEntity.ok(&quot;Sensor received&quot;);\r\n}\r\n```\r\nI have tried checking every possible solution and the problem is not fixed, my expectation is the data stored into 1 column for the `sensors` field in the JSON body.","title":"Can not store list of objects as single column JSON","body":"<p>I'm trying to store a whole array of object into one field on my oracle database, I'm referring to the solution on <a href=\"https://stackoverflow.com/questions/66555092/spring-boot-how-to-send-an-array-of-objects-using-post-request-json\">this</a> question, but it kept giving me <code>Can not set java.lang.String field xxx.demo.Models.Sensors.amplitudos to xxx.demo.Models.Sensors</code> error, I have checked the JSON body and the entity class, but I cannot find the mistake.</p>\n<p>Here is my code.</p>\n<p><code>entity</code></p>\n<pre><code>@Entity\n@Table(name = &quot;SENSOR&quot;)\npublic class Sensor implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    @Column(name = &quot;TIMERECEIVED&quot;)\n    private Timestamp timereceived;\n\n    @Column(name = &quot;SENSORS&quot;)\n    private Sensors[] sensors;\n\n    @Column(name = &quot;LOC&quot;)\n    private String location;\n\n    public Sensor() {\n\n    }\n\n    public Sensor(Timestamp timereceived, Sensors[] sensors, String location) {\n        this.timereceived = timereceived;\n        this.sensors = sensors;\n        this.location = location;\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public Timestamp getTimereceived() {\n        return timereceived;\n    }\n\n    public void setTimereceived(Timestamp timereceived) {\n        this.timereceived = timereceived;\n    }\n\n    public Sensors[] getSensors() {\n        return sensors;\n    }\n\n    public void setSensors(Sensors[] sensors) {\n        this.sensors = sensors;\n    }\n\n    public String getLocation() {\n        return location;\n    }\n\n    public void setLocation(String location) {\n        this.location = location;\n    }\n\n}\n</code></pre>\n<p><code>Sensors class</code></p>\n<pre><code>@Embeddable\npublic class Sensors {\n    private String amplitudos;\n    private Double displacement;\n    private String frequencies;\n    private Integer sensorId;\n\n    public Sensors() {\n\n    }\n\n    public Sensors(String amplitudos, Double displacement, String frequencies, Integer sensorId) {\n        this.amplitudos = amplitudos;\n        this.displacement = displacement;\n        this.frequencies = frequencies;\n        this.sensorId = sensorId;\n    }\n\n    public String getAmplitudos() {\n        return amplitudos;\n    }\n\n    public void setAmplitudos(String amplitudos) {\n        this.amplitudos = amplitudos;\n    }\n\n    public Double getDisplacement() {\n        return displacement;\n    }\n\n    public void setDisplacement(Double displacement) {\n        this.displacement = displacement;\n    }\n\n    public String getFrequencies() {\n        return frequencies;\n    }\n\n    public void setFrequencies(String frequencies) {\n        this.frequencies = frequencies;\n    }\n\n    public Integer getSensorId() {\n        return sensorId;\n    }\n\n    public void setSensorId(Integer sensorId) {\n        this.sensorId = sensorId;\n    }\n\n}\n</code></pre>\n<p>my JSON body</p>\n<pre><code>{\n    &quot;timereceived&quot;: &quot;2022-11-29T12:04:42.166&quot;,\n    &quot;sensors&quot;: [\n        {\n            &quot;amplitudos&quot;: &quot;a1#a2#a3#a4&quot;,\n            &quot;displacement&quot;: 0.002,\n            &quot;frequencies&quot;: &quot;f1#f2#f3#f4&quot;,\n            &quot;sensorid&quot;: 1\n        },\n        {\n            &quot;amplitudos&quot;: &quot;a1#a2#a3#a4&quot;,\n            &quot;displacement&quot;: 0.002,\n            &quot;frequencies&quot;: &quot;f1#f2#f3#f4&quot;,\n            &quot;sensorid&quot;: 2\n        },\n        {\n            &quot;amplitudos&quot;: &quot;a1#a2#a3#a4&quot;,\n            &quot;displacement&quot;: 0.002,\n            &quot;frequencies&quot;: &quot;f1#f2#f3#f4&quot;,\n            &quot;sensorid&quot;: 3\n        },\n        {\n            &quot;amplitudos&quot;: &quot;a1#a2#a3#a4&quot;,\n            &quot;displacement&quot;: 0.002,\n            &quot;frequencies&quot;: &quot;f1#f2#f3#f4&quot;,\n            &quot;sensorid&quot;: 4\n        }\n    ],\n    &quot;location&quot;: &quot;lokasi&quot;\n}\n</code></pre>\n<p>my controller</p>\n<pre><code>@PostMapping(&quot;/sendData&quot;)\npublic ResponseEntity sendData(@RequestBody Sensor sensor) {\n    Sensor newSensor = sensorRepository.save(sensor);\n\n    System.out.println(newSensor);\n    return ResponseEntity.ok(&quot;Sensor received&quot;);\n}\n</code></pre>\n<p>I have tried checking every possible solution and the problem is not fixed, my expectation is the data stored into 1 column for the <code>sensors</code> field in the JSON body.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":947184,"reputation":48994,"user_id":974186,"accept_rate":79,"display_name":"Ren&#233; Link"},"score":0,"creation_date":1631176593,"post_id":69114778,"comment_id":122153933,"body_markdown":"A `Long` is of type `Long` and can be converted to `long` using the `longValue()` method. What do you want to validate? I mean if request parameters can not be converted to `Long` they can not be assigned to a `Long` field. You will get a conversion error.","body":"A <code>Long</code> is of type <code>Long</code> and can be converted to <code>long</code> using the <code>longValue()</code> method. What do you want to validate? I mean if request parameters can not be converted to <code>Long</code> they can not be assigned to a <code>Long</code> field. You will get a conversion error."},{"owner":{"account_id":22693280,"reputation":11,"user_id":16861865,"display_name":"ban29"},"score":0,"creation_date":1631177839,"post_id":69114778,"comment_id":122154410,"body_markdown":"From request if I send \n{\n&quot;long_fieldname&quot; :&quot;&quot;\n}\nThen it should send the error response that the field type is not valid should be a double value.\nIn short validate if the field is of type double or not","body":"From request if I send  { &quot;long_fieldname&quot; :&quot;&quot; } Then it should send the error response that the field type is not valid should be a double value. In short validate if the field is of type double or not"},{"owner":{"account_id":5363666,"reputation":1950,"user_id":4274223,"display_name":"Gregorio Palam&#224;"},"score":0,"creation_date":1631178336,"post_id":69114778,"comment_id":122154577,"body_markdown":"This kind of validation is built-in, because Java is strongly typed. If you&#39;re passing a String in your json, and it is not throwing a validation exception, then there is something that&#39;s not working about the validation mechanism. Can you please add some code, so we can better help you?","body":"This kind of validation is built-in, because Java is strongly typed. If you&#39;re passing a String in your json, and it is not throwing a validation exception, then there is something that&#39;s not working about the validation mechanism. Can you please add some code, so we can better help you?"},{"owner":{"account_id":22693280,"reputation":11,"user_id":16861865,"display_name":"ban29"},"score":0,"creation_date":1631179734,"post_id":69114778,"comment_id":122155103,"body_markdown":"I did not add any validation mechanism for the double type and long type...for string types I am getting the expected error response\nI could add validations for string types like below\n@NotBlank(message = &quot;sample field cannot be null&quot;)\n\tprivate String sampleField ;\n\nbut for long and double could not figure out correct validators.\n@Column(name = &quot;longfield&quot;)\n\tprivate Long longfield;\n@Column(name = &quot;doublefield&quot;)\n\tprivate Double doublefield;","body":"I did not add any validation mechanism for the double type and long type...for string types I am getting the expected error response I could add validations for string types like below @NotBlank(message = &quot;sample field cannot be null&quot;) \tprivate String sampleField ;  but for long and double could not figure out correct validators. @Column(name = &quot;longfield&quot;) \tprivate Long longfield; @Column(name = &quot;doublefield&quot;) \tprivate Double doublefield;"}],"answers":[{"tags":[],"owner":{"account_id":26398944,"reputation":11,"user_id":20049671,"display_name":"crim_sid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671059920,"creation_date":1670397273,"answer_id":74712963,"question_id":69114778,"body_markdown":"You can do for long by using @Range , @Digits\r\n\r\n@Range will have min, max, message\r\nbut min and max only takes integer so add `L` at last like this: \r\n```java\r\n@Range(min = 0, max = 4294967298L, message=&quot;Count of crystals should be less than 4294967298&quot;)\r\nprivate Long cntOfCrystals;\r\n```\r\n\r\nbut `@Range` is from `import org.hibernate.validator.constraints.Range;` so make sure add this dependency and `@Pattern` won&#39;t work for Long and Double","title":"Validating that if the field in integer,Long and double value in java bean validation","body":"<p>You can do for long by using @Range , @Digits</p>\n<p>@Range will have min, max, message\nbut min and max only takes integer so add <code>L</code> at last like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Range(min = 0, max = 4294967298L, message=&quot;Count of crystals should be less than 4294967298&quot;)\nprivate Long cntOfCrystals;\n</code></pre>\n<p>but <code>@Range</code> is from <code>import org.hibernate.validator.constraints.Range;</code> so make sure add this dependency and <code>@Pattern</code> won't work for Long and Double</p>\n"}],"owner":{"account_id":22693280,"reputation":11,"user_id":16861865,"display_name":"ban29"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":983,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671059920,"creation_date":1631176146,"question_id":69114778,"body_markdown":"In my spring boot application. I am validating the input request parameters.\r\nI am following the below  guide and validating at the Bean Model level.\r\n   https://reflectoring.io/bean-validation-with-spring-boot/\r\n\r\nFor the **Long** what is the valid annotation which verifies if the input field is of long type?Or can I use any regex pattern if so can anyone help me with  valid  regular expression for **Long** value.\r\n\r\nFor the **Double** value what is the valid annotation which verifies if the input field is of double type?Or can I use any regex pattern if so can anyone help me with  valid  regular expression for double value.I dont want to use **BigDecimal** as it may break the already existing code.\r\n\r\n ","title":"Validating that if the field in integer,Long and double value in java bean validation","body":"<p>In my spring boot application. I am validating the input request parameters.\nI am following the below  guide and validating at the Bean Model level.\n<a href=\"https://reflectoring.io/bean-validation-with-spring-boot/\" rel=\"nofollow noreferrer\">https://reflectoring.io/bean-validation-with-spring-boot/</a></p>\n<p>For the <strong>Long</strong> what is the valid annotation which verifies if the input field is of long type?Or can I use any regex pattern if so can anyone help me with  valid  regular expression for <strong>Long</strong> value.</p>\n<p>For the <strong>Double</strong> value what is the valid annotation which verifies if the input field is of double type?Or can I use any regex pattern if so can anyone help me with  valid  regular expression for double value.I dont want to use <strong>BigDecimal</strong> as it may break the already existing code.</p>\n"},{"tags":["java","unit-testing","set","hashset"],"answers":[{"tags":[],"owner":{"account_id":3393,"reputation":60796,"user_id":4893,"accept_rate":64,"display_name":"sblundy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671059897,"creation_date":1276920669,"answer_id":3074302,"question_id":3074289,"body_markdown":"Two sets are equal, meaning they contain the same items, if they both contain one another\r\n\r\n    Assert.assertTrue(s1.containsAll(s2) &amp;&amp; s2.containsAll(s1))\r\n\r\nThere&#39;s also [SetUtils.isEqualSet][1]\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/SetUtils.html#isEqualSet-java.util.Collection-java.util.Collection-","title":"What&#39;s the best way to validate the values of a Set in a unit test?","body":"<p>Two sets are equal, meaning they contain the same items, if they both contain one another</p>\n<pre><code>Assert.assertTrue(s1.containsAll(s2) &amp;&amp; s2.containsAll(s1))\n</code></pre>\n<p>There's also <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/SetUtils.html#isEqualSet-java.util.Collection-java.util.Collection-\" rel=\"nofollow noreferrer\">SetUtils.isEqualSet</a></p>\n"},{"tags":[],"owner":{"account_id":45510,"reputation":9296,"user_id":134176,"accept_rate":100,"display_name":"Dean Povey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1276920758,"creation_date":1276920758,"answer_id":3074308,"question_id":3074289,"body_markdown":"Just put your expected values in a Set and then use assertEquals on the expected and actual set.  That works a charm, e.g.\r\n\r\n    Set&lt;String&gt; expected = new HashSet&lt;String&gt;(Arrays.asList(&quot;expected&quot;, &quot;items&quot;));\r\n    ...\r\n    Set&lt;String&gt; actual = ...;\r\n    Assert.assertEquals(expected, actual);","title":"What&#39;s the best way to validate the values of a Set in a unit test?","body":"<p>Just put your expected values in a Set and then use assertEquals on the expected and actual set.  That works a charm, e.g.</p>\n\n<pre><code>Set&lt;String&gt; expected = new HashSet&lt;String&gt;(Arrays.asList(\"expected\", \"items\"));\n...\nSet&lt;String&gt; actual = ...;\nAssert.assertEquals(expected, actual);\n</code></pre>\n"}],"owner":{"account_id":147563,"reputation":585,"user_id":358758,"accept_rate":40,"display_name":"Risser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2428,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":3074308,"answer_count":2,"score":2,"last_activity_date":1671059897,"creation_date":1276920334,"question_id":3074289,"body_markdown":"Okay, often I&#39;ll have a method that returns a Set of some sort.  The problem with unit testing such a method is that there is no guarantee an iteration over the set will always return the items in the same order.\r\n\r\nDoes anyone have any preferred method of validating a Set?\r\n\r\nPeter","title":"What&#39;s the best way to validate the values of a Set in a unit test?","body":"<p>Okay, often I'll have a method that returns a Set of some sort.  The problem with unit testing such a method is that there is no guarantee an iteration over the set will always return the items in the same order.</p>\n\n<p>Does anyone have any preferred method of validating a Set?</p>\n\n<p>Peter</p>\n"},{"tags":["java","runtime.exec"],"comments":[{"owner":{"display_name":"user784540"},"score":1,"creation_date":1461036863,"post_id":36708057,"comment_id":61003633,"body_markdown":"in Windows try to use command `start C:\\Users\\Admin\\Downloads\\VID_20160226_203631957.mp4`. If filename contains spaces use double quotes for your file path. For example: if your file name is `my file.mp4` then use the command: `start &quot;my file.mp4&quot;`","body":"in Windows try to use command <code>start C:\\Users\\Admin\\Downloads\\VID_20160226_203631957.mp4</code>. If filename contains spaces use double quotes for your file path. For example: if your file name is <code>my file.mp4</code> then use the command: <code>start &quot;my file.mp4&quot;</code>"},{"owner":{"account_id":186082,"reputation":4236,"user_id":423199,"accept_rate":99,"display_name":"Hector"},"score":1,"creation_date":1461037013,"post_id":36708057,"comment_id":61003675,"body_markdown":"Do not use runtime exec. Use Process Builder https://docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.html","body":"Do not use runtime exec. Use Process Builder <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.h&zwnj;&#8203;tml</a>"},{"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"score":0,"creation_date":1461037852,"post_id":36708057,"comment_id":61003875,"body_markdown":"@Hector You should create an answer for that. It&#39;s the correct solution.","body":"@Hector You should create an answer for that. It&#39;s the correct solution."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1461038556,"creation_date":1461037087,"answer_id":36708111,"question_id":36708057,"body_markdown":"Use [`Desktop.open(File)`](https://docs.oracle.com/javase/8/docs/api/java/awt/Desktop.html#open-java.io.File-) which *launches the associated application to open the file.* Something like,\r\n\r\n\tFile f = new File(&quot;C:/Users/Admin/Downloads/VID_20160226_203631957.mp4&quot;);\r\n\ttry {\r\n\t\tDesktop.getDesktop().open(f);\r\n\t} catch (IOException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\nYou might prefer to build the path relative to the [user&#39;s home directory](https://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html); something like\r\n\r\n\tFile downloads = new File(System.getProperty(&quot;user.home&quot;), &quot;Downloads&quot;);\r\n\tFile f = new File(downloads, &quot;VID_20160226_203631957.mp4&quot;);\r\n\r\n","title":"how to open a file using exec method in java?","body":"<p>Use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/Desktop.html#open-java.io.File-\" rel=\"nofollow\"><code>Desktop.open(File)</code></a> which <em>launches the associated application to open the file.</em> Something like,</p>\n\n<pre><code>File f = new File(\"C:/Users/Admin/Downloads/VID_20160226_203631957.mp4\");\ntry {\n    Desktop.getDesktop().open(f);\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>You might prefer to build the path relative to the <a href=\"https://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html\" rel=\"nofollow\">user's home directory</a>; something like</p>\n\n<pre><code>File downloads = new File(System.getProperty(\"user.home\"), \"Downloads\");\nFile f = new File(downloads, \"VID_20160226_203631957.mp4\");\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user4910279"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461037557,"creation_date":1461037557,"answer_id":36708185,"question_id":36708057,"body_markdown":"Try this.\r\n\r\n    Runtime r= Runtime.getRuntime();\r\n    r.exec(&quot;cmd /c C:\\\\Users\\\\Admin\\\\Downloads\\\\VID_20160226_203631957.mp4&quot;);","title":"how to open a file using exec method in java?","body":"<p>Try this.</p>\n\n<pre><code>Runtime r= Runtime.getRuntime();\nr.exec(\"cmd /c C:\\\\Users\\\\Admin\\\\Downloads\\\\VID_20160226_203631957.mp4\");\n</code></pre>\n"}],"owner":{"account_id":5453027,"reputation":37,"user_id":4337279,"display_name":"Darrel D&#39;britto"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3382,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36708185,"answer_count":2,"score":1,"last_activity_date":1671059877,"creation_date":1461036765,"question_id":36708057,"body_markdown":"    C:\\Users\\Admin\\Downloads\\VID_20160226_203631957.mp4\r\n\r\nwhen I execute above line in command prompt the corresponding video gets played with default media player.\r\n\r\nBut when I try to do same using java Runtime class it doesnt work.\r\nI am using following method.\r\n       \r\n    Runtime r= Runtime.getRuntime();\r\n    r.exec(&quot;C:\\Users\\Admin\\Downloads\\VID_20160226_203631957.mp4&quot;)\r\n\r\n\r\n","title":"how to open a file using exec method in java?","body":"<pre><code>C:\\Users\\Admin\\Downloads\\VID_20160226_203631957.mp4\n</code></pre>\n\n<p>when I execute above line in command prompt the corresponding video gets played with default media player.</p>\n\n<p>But when I try to do same using java Runtime class it doesnt work.\nI am using following method.</p>\n\n<pre><code>Runtime r= Runtime.getRuntime();\nr.exec(\"C:\\Users\\Admin\\Downloads\\VID_20160226_203631957.mp4\")\n</code></pre>\n"},{"tags":["java","spring","spring-boot","solr","spring-data-solr"],"comments":[{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1671034082,"post_id":74799747,"comment_id":132011392,"body_markdown":"the `@Indexed` is probably a custom annotation which you have created for your project. If you look closer though you will see that the provided `@Indexed(&quot;orders_*&quot;)` does not match with the fields which remain unindexed. So probably you need the `@Indexed(&quot;order_*&quot;)` instead","body":"the <code>@Indexed</code> is probably a custom annotation which you have created for your project. If you look closer though you will see that the provided <code>@Indexed(&quot;orders_*&quot;)</code> does not match with the fields which remain unindexed. So probably you need the <code>@Indexed(&quot;order_*&quot;)</code> instead"},{"owner":{"account_id":26952186,"reputation":25,"user_id":20521221,"display_name":"Dragon"},"score":0,"creation_date":1671039797,"post_id":74799747,"comment_id":132013514,"body_markdown":"@PanagiotisBougioukos `@Indexed` is not a custom annotation. It is provided by `Solr` for `Spring Data Solr`","body":"@PanagiotisBougioukos <code>@Indexed</code> is not a custom annotation. It is provided by <code>Solr</code> for <code>Spring Data Solr</code>"}],"owner":{"account_id":26952186,"reputation":25,"user_id":20521221,"display_name":"Dragon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1671059873,"creation_date":1671027961,"question_id":74799747,"body_markdown":"I have following `data`:\r\n```\r\n&quot;orders&quot;:{\r\n      &quot;placed_orders_count&quot;:2,\r\n      &quot;0&quot;:{\r\n         &quot;order_id&quot;:&quot;000000001&quot;,\r\n         &quot;order_date&quot;:&quot;2019-03-27 14:25:03&quot;\r\n      },\r\n      &quot;1&quot;:{\r\n         &quot;order_id&quot;:&quot;000000002&quot;,\r\n         &quot;order_date&quot;:&quot;2019-03-27 14:25:03&quot;\r\n      }\r\n   }\r\n```\r\nI want to insert all this data into Solr. I have tried:\r\n```\r\nString customerFeedJson = new Gson().toJson(customerFeedsolr.getOrders());\r\nString solrUrl = solrServerUrl.concat(customerFeedPrefix).concat(Constants.HYPHEN).concat(String.valueOf(siteID))\r\n                        .concat(Constants.SOLR_URL_QUERIES);\r\nHttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;String&gt;(Arrays.asList(customerFeedJson).toString());\r\nrestTemplate.exchange(solrUrl, HttpMethod.POST, requestEntity, String.class);\r\n```\r\nBut on Solr, I am only able to index `&quot;placed_orders_count&quot;:2`.\r\nI have indexed `orders field` as:\r\n\r\n```\r\npublic class CustomerFeedSolr {\r\n\r\n    @Indexed(&quot;orders_*&quot;)\r\n    @Field(child = true)\r\n    private Map&lt;String, ?&gt; orders;\r\n//Getters and Setters\r\n}\r\n```\r\n\r\n&lt;h1&gt;Expectations:&lt;/h1&gt;\r\n\r\n```\r\n&quot;placed_orders_count&quot;:[2.0],\r\n &quot;0&quot;:[\r\n      &quot;order_id&quot;:&quot;000000001&quot;,\r\n      &quot;order_date&quot;:&quot;2019-03-27 14:25:03&quot;\r\n  ],\r\n  &quot;1&quot;:[\r\n      &quot;order_id&quot;:&quot;000000002&quot;,\r\n      &quot;order_date&quot;:&quot;2019-03-27 14:25:03&quot;\r\n  ]\r\n```\r\n\r\n&lt;h1&gt;Actual&lt;/h1&gt;\r\n\r\n```\r\n&quot;placed_orders_count&quot;:[2.0]\r\n```","title":"How to insert a subList into solr with Spring Data Solr","body":"<p>I have following <code>data</code>:</p>\n<pre><code>&quot;orders&quot;:{\n      &quot;placed_orders_count&quot;:2,\n      &quot;0&quot;:{\n         &quot;order_id&quot;:&quot;000000001&quot;,\n         &quot;order_date&quot;:&quot;2019-03-27 14:25:03&quot;\n      },\n      &quot;1&quot;:{\n         &quot;order_id&quot;:&quot;000000002&quot;,\n         &quot;order_date&quot;:&quot;2019-03-27 14:25:03&quot;\n      }\n   }\n</code></pre>\n<p>I want to insert all this data into Solr. I have tried:</p>\n<pre><code>String customerFeedJson = new Gson().toJson(customerFeedsolr.getOrders());\nString solrUrl = solrServerUrl.concat(customerFeedPrefix).concat(Constants.HYPHEN).concat(String.valueOf(siteID))\n                        .concat(Constants.SOLR_URL_QUERIES);\nHttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;String&gt;(Arrays.asList(customerFeedJson).toString());\nrestTemplate.exchange(solrUrl, HttpMethod.POST, requestEntity, String.class);\n</code></pre>\n<p>But on Solr, I am only able to index <code>&quot;placed_orders_count&quot;:2</code>.\nI have indexed <code>orders field</code> as:</p>\n<pre><code>public class CustomerFeedSolr {\n\n    @Indexed(&quot;orders_*&quot;)\n    @Field(child = true)\n    private Map&lt;String, ?&gt; orders;\n//Getters and Setters\n}\n</code></pre>\n<h1>Expectations:</h1>\n<pre><code>&quot;placed_orders_count&quot;:[2.0],\n &quot;0&quot;:[\n      &quot;order_id&quot;:&quot;000000001&quot;,\n      &quot;order_date&quot;:&quot;2019-03-27 14:25:03&quot;\n  ],\n  &quot;1&quot;:[\n      &quot;order_id&quot;:&quot;000000002&quot;,\n      &quot;order_date&quot;:&quot;2019-03-27 14:25:03&quot;\n  ]\n</code></pre>\n<h1>Actual</h1>\n<pre><code>&quot;placed_orders_count&quot;:[2.0]\n</code></pre>\n"},{"tags":["java","hibernate","one-to-many"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1536923743,"post_id":52313118,"comment_id":91608284,"body_markdown":"You should use `mappedBy` on child side of relation (the one that does not hold FK)","body":"You should use <code>mappedBy</code> on child side of relation (the one that does not hold FK)"}],"answers":[{"tags":[],"owner":{"account_id":14323979,"reputation":2032,"user_id":10346580,"display_name":"Sunny Goel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671059854,"creation_date":1536840808,"answer_id":52313534,"question_id":52313118,"body_markdown":"Try it with the following code, just point the join table to `Department` from `Employee`.\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;DPT_ID&quot;, insertable = false, updatable = false)\r\n    private Department department;\r\n\r\n","title":"Hibernate 5 Java bidirectional oneToMany field is null but table contains data","body":"<p>Try it with the following code, just point the join table to <code>Department</code> from <code>Employee</code>.</p>\n<pre><code>@ManyToOne\n@JoinColumn(name = &quot;DPT_ID&quot;, insertable = false, updatable = false)\nprivate Department department;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536879628,"creation_date":1536878136,"answer_id":52322624,"question_id":52313118,"body_markdown":"Looks like a `Owning entity` issue, so I think your test is persisting data in two different ways. In your annotation `@OneToMany(cascade = CascadeType.ALL)` you have declared `Department` to be the owner of the relationship. So, if you persist data with\r\n\r\n    dept.getEmployees().add(emp);\r\n\r\nthen the department (id) field will be updated \r\n\r\n    Hibernate: insert into EMPLOYEE (EMP_ID, DESIGNATION, NAME) values (null, ?, ?)\r\n    Hibernate: update EMPLOYEE set DEPARTMENT=? where EMP_ID=?\r\n\r\nbut if you persist with \r\n\r\n    emp.setDepartment(dept);\r\n\r\nthen the department(id) field of employee won&#39;t get updated. \r\n\r\n    Hibernate: insert into EMPLOYEE (EMP_ID, DESIGNATION, NAME) values (null, ?, ?)\r\n\r\nIf the department id of employee isn&#39;t persisted then you can&#39;t retrieve the department. It&#39;s more efficient if you make Employee the owner of the relationship since it has the foreign key.\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy=&quot;department&quot;)\r\n    private List&lt;Employee&gt; employees; // don&#39;t need to make a list, only for fetches\r\n    // and \r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;DEPARTMENT&quot;)\r\n    private Department department;\r\n\r\nand set the department of the employee when persisting relations. Then the insert is done with the departmentid and not updated separately.\r\n\r\n    Hibernate: insert into EMPLOYEE (EMP_ID, DEPARTMENT, DESIGNATION, NAME) values (null, ?, ?, ?)\r\n\r\nThere is nothing expressly wrong with the criteria code as JPA will follow the annotated relationship but it does so in two separate queries since you don&#39;t have a specific join.\r\n\r\n\r\n    Hibernate: select employee0_.EMP_ID as EMP_ID1_1_, employee0_.DEPARTMENT as DEPARTME4_1_, employee0_.DESIGNATION as DESIGNAT2_1_, employee0_.NAME as NAME3_1_ from EMPLOYEE employee0_\r\n    Hibernate: select department0_.DPT_ID as DPT_ID1_0_0_, department0_.NAME as NAME2_0_0_ from DEPARTMENT department0_ where department0_.DPT_ID=?\r\n\r\n\r\nIf you add a specific Fetch then it will do it in a single SQL statement.\r\n\r\n    root.fetch(&quot;department&quot;);\r\n\r\nand\r\n\r\n    Hibernate: select employee0_.EMP_ID as EMP_ID1_1_0_, department1_.DPT_ID as DPT_ID1_0_1_, employee0_.DEPARTMENT as DEPARTME4_1_0_, employee0_.DESIGNATION as DESIGNAT2_1_0_, employee0_.NAME as NAME3_1_0_, department1_.NAME as NAME2_0_1_ from EMPLOYEE employee0_ inner join DEPARTMENT department1_ on employee0_.DEPARTMENT=department1_.DPT_ID\r\n","title":"Hibernate 5 Java bidirectional oneToMany field is null but table contains data","body":"<p>Looks like a <code>Owning entity</code> issue, so I think your test is persisting data in two different ways. In your annotation <code>@OneToMany(cascade = CascadeType.ALL)</code> you have declared <code>Department</code> to be the owner of the relationship. So, if you persist data with</p>\n\n<pre><code>dept.getEmployees().add(emp);\n</code></pre>\n\n<p>then the department (id) field will be updated </p>\n\n<pre><code>Hibernate: insert into EMPLOYEE (EMP_ID, DESIGNATION, NAME) values (null, ?, ?)\nHibernate: update EMPLOYEE set DEPARTMENT=? where EMP_ID=?\n</code></pre>\n\n<p>but if you persist with </p>\n\n<pre><code>emp.setDepartment(dept);\n</code></pre>\n\n<p>then the department(id) field of employee won't get updated. </p>\n\n<pre><code>Hibernate: insert into EMPLOYEE (EMP_ID, DESIGNATION, NAME) values (null, ?, ?)\n</code></pre>\n\n<p>If the department id of employee isn't persisted then you can't retrieve the department. It's more efficient if you make Employee the owner of the relationship since it has the foreign key.</p>\n\n<pre><code>@OneToMany(cascade = CascadeType.ALL, mappedBy=\"department\")\nprivate List&lt;Employee&gt; employees; // don't need to make a list, only for fetches\n// and \n@ManyToOne\n@JoinColumn(name = \"DEPARTMENT\")\nprivate Department department;\n</code></pre>\n\n<p>and set the department of the employee when persisting relations. Then the insert is done with the departmentid and not updated separately.</p>\n\n<pre><code>Hibernate: insert into EMPLOYEE (EMP_ID, DEPARTMENT, DESIGNATION, NAME) values (null, ?, ?, ?)\n</code></pre>\n\n<p>There is nothing expressly wrong with the criteria code as JPA will follow the annotated relationship but it does so in two separate queries since you don't have a specific join.</p>\n\n<pre><code>Hibernate: select employee0_.EMP_ID as EMP_ID1_1_, employee0_.DEPARTMENT as DEPARTME4_1_, employee0_.DESIGNATION as DESIGNAT2_1_, employee0_.NAME as NAME3_1_ from EMPLOYEE employee0_\nHibernate: select department0_.DPT_ID as DPT_ID1_0_0_, department0_.NAME as NAME2_0_0_ from DEPARTMENT department0_ where department0_.DPT_ID=?\n</code></pre>\n\n<p>If you add a specific Fetch then it will do it in a single SQL statement.</p>\n\n<pre><code>root.fetch(\"department\");\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Hibernate: select employee0_.EMP_ID as EMP_ID1_1_0_, department1_.DPT_ID as DPT_ID1_0_1_, employee0_.DEPARTMENT as DEPARTME4_1_0_, employee0_.DESIGNATION as DESIGNAT2_1_0_, employee0_.NAME as NAME3_1_0_, department1_.NAME as NAME2_0_1_ from EMPLOYEE employee0_ inner join DEPARTMENT department1_ on employee0_.DEPARTMENT=department1_.DPT_ID\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10933337,"reputation":642,"user_id":8035798,"accept_rate":50,"display_name":"Seymur Asadov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536902790,"creation_date":1536902790,"answer_id":52325448,"question_id":52313118,"body_markdown":"***In my opinion, your relational mapping is incorrect! Try to change code like this.***\r\n\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;DEPT_ID&quot;)\r\n    private Department department;\r\n\r\n\r\n    @OneToMany(mappedBy = &quot;department&quot;,cascade = CascadeType.ALL)\r\n    private List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\r\n\r\n","title":"Hibernate 5 Java bidirectional oneToMany field is null but table contains data","body":"<p><strong><em>In my opinion, your relational mapping is incorrect! Try to change code like this.</em></strong></p>\n\n<pre><code>@ManyToOne\n@JoinColumn(name = \"DEPT_ID\")\nprivate Department department;\n\n\n@OneToMany(mappedBy = \"department\",cascade = CascadeType.ALL)\nprivate List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3916360,"reputation":159,"user_id":3240085,"accept_rate":64,"display_name":"uti.devel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671041094,"creation_date":1536914558,"answer_id":52328137,"question_id":52313118,"body_markdown":"I found the problem. I used the same session for persisting and querying.\r\n\r\n    session = HibernateUtil.getSessionFactory().openSession();\r\n    transaction = session.getTransaction();\r\n    transaction.begin();\r\n    …\r\n    session.persist(stuff);\r\n    session.flush();\r\n    transaction.commit();\r\n    \r\n    transaction = session.getTransaction();\r\n    transaction.begin();\r\n    \r\n    query stuff\r\n\r\nIf I close the session after persisting and open a new session everything works fine.\r\n\r\nI added a fixed version of the test project to my question just in case someone is interested.\r\n","title":"Hibernate 5 Java bidirectional oneToMany field is null but table contains data","body":"<p>I found the problem. I used the same session for persisting and querying.</p>\n<pre><code>session = HibernateUtil.getSessionFactory().openSession();\ntransaction = session.getTransaction();\ntransaction.begin();\n…\nsession.persist(stuff);\nsession.flush();\ntransaction.commit();\n\ntransaction = session.getTransaction();\ntransaction.begin();\n\nquery stuff\n</code></pre>\n<p>If I close the session after persisting and open a new session everything works fine.</p>\n<p>I added a fixed version of the test project to my question just in case someone is interested.</p>\n"}],"owner":{"account_id":3916360,"reputation":159,"user_id":3240085,"accept_rate":64,"display_name":"uti.devel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":786,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1671059854,"creation_date":1536839438,"question_id":52313118,"body_markdown":"I have two entities Department and Employee. Department has a list of Employees. And Employee has a field Department. I can create Employees and add them to to list inside Department. The Database Tables are filled as expected on persist. If I query for a Department I get the Department and the List of Employees is filled. Everything fine this way. If I query for an Employee and get the Department field it Returns null.\r\n\r\n    @Entity\r\n    @Table(name = &quot;DEPARTMENT&quot;)\r\n    public class Department {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;DPT_ID&quot;)\r\n        private long id;\r\n    \r\n        @Column(name = &quot;NAME&quot;, nullable = false, unique = true)\r\n        private String name;\r\n    \r\n    \r\n        @OneToMany(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;DEPARTMENT&quot;) //we need to duplicate the physical information\r\n        private List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\r\n    …\r\n\r\n--\r\n\r\n    @Entity\r\n    @Table(name = &quot;EMPLOYEE&quot;)\r\n    public class Employee {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;EMP_ID&quot;)\r\n        private long id;\r\n    \r\n        @Column(name = &quot;NAME&quot;, nullable = false)\r\n        private String name;\r\n    \r\n        @Column(name = &quot;DESIGNATION&quot;)\r\n        private String designation;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;DEPARTMENT&quot;, insertable = false, updatable = false)\r\n        private Department department;\r\n    ...\r\n\r\n--\r\n\r\nThe query where employee.getDepartment() return null\r\n    \r\n            session = HibernateUtil.getSessionFactory().openSession();\r\n            transaction = session.getTransaction();\r\n            transaction.begin();\r\n\r\n            Department department = new Department();\r\n            department.setName(&quot;IT Department&quot;);\r\n\r\n            Employee employee1 = new Employee();\r\n            employee1.setName(&quot;Adam&quot;);\r\n            employee1.setDesignation(&quot;Manager&quot;);\r\n\r\n            Employee employee2 = new Employee();\r\n            employee2.setName(&quot;Miller&quot;);\r\n            employee2.setDesignation(&quot;Software Engineer&quot;);\r\n\r\n            Employee employee3 = new Employee();\r\n            employee3.setName(&quot;Smith&quot;);\r\n            employee3.setDesignation(&quot;Associate  Engineer&quot;);\r\n\r\n            department.getEmployees().add(employee1);\r\n            department.getEmployees().add(employee2);\r\n            department.getEmployees().add(employee3);\r\n\r\n            session.persist(department);\r\n            session.flush();\r\n            transaction.commit();\r\n\r\n\r\n            transaction = session.getTransaction();\r\n            transaction.begin();\r\n\r\n            {\r\n                CriteriaBuilder builder = session.getCriteriaBuilder();\r\n                CriteriaQuery&lt;Employee&gt; query = builder.createQuery(Employee.class);\r\n                Root&lt;Employee&gt; root = query.from(Employee.class);\r\n                query.select(root);\r\n                Query&lt;Employee&gt; q = session.createQuery(query);\r\n                List&lt;Employee&gt; employees = q.getResultList();\r\n                for (Employee employee : employees) {\r\n                    System.out.println(&quot;EMPLOYEE NAME: &quot; + employee.getName());\r\n                    System.out.println(&quot;DEPARTMENT NAME: &quot; + employee.getDepartment()); // gives null\r\n                }\r\n            }\r\n            {\r\n                CriteriaBuilder builder = session.getCriteriaBuilder();\r\n                CriteriaQuery&lt;Department&gt; query = builder.createQuery(Department.class);\r\n                Root&lt;Department&gt; root = query.from(Department.class);\r\n                query.select(root);\r\n                Query&lt;Department&gt; q = session.createQuery(query);\r\n                List&lt;Department&gt; departments = q.getResultList();\r\n                for (Department deps : departments) {\r\n                    System.out.println(deps.getName());\r\n                    System.out.println(deps.getEmployees()); // list of employees is filled\r\n                }\r\n            }\r\n\r\n[![Department table][1]][1]\r\n[![Employee Table][2]][2]\r\n\r\nThe tables seem to be filled correctly. But if i use getDepartment on a queried Employee i get null. If i use getEmployees on a queried Department i get all the Employees.\r\n\r\nI tried both ways described here : https://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-bidirectional\r\n\r\nExample 7.21. Bidirectional one to many with many to one side as association owner\r\n\r\nand\r\n\r\nExample 7.22. Bidirectional association with one to many side as owner\r\n\r\nSame result for me.\r\n\r\nWhat am i missing?\r\n\r\nHere is the complete test Project: [updated Project zip][3]\r\n\r\nSOLVED FIXED PROJECT: [SOLVED PROBLEM PROJECT][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BuXmD.jpg\r\n  [2]: https://i.stack.imgur.com/YdJgC.jpg\r\n  [3]: https://filetransfer.io/data-package/aHGyccvK\r\n  [4]: https://filetransfer.io/data-package/SvDN2rkq","title":"Hibernate 5 Java bidirectional oneToMany field is null but table contains data","body":"<p>I have two entities Department and Employee. Department has a list of Employees. And Employee has a field Department. I can create Employees and add them to to list inside Department. The Database Tables are filled as expected on persist. If I query for a Department I get the Department and the List of Employees is filled. Everything fine this way. If I query for an Employee and get the Department field it Returns null.</p>\n\n<pre><code>@Entity\n@Table(name = \"DEPARTMENT\")\npublic class Department {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"DPT_ID\")\n    private long id;\n\n    @Column(name = \"NAME\", nullable = false, unique = true)\n    private String name;\n\n\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = \"DEPARTMENT\") //we need to duplicate the physical information\n    private List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\n…\n</code></pre>\n\n<p>--</p>\n\n<pre><code>@Entity\n@Table(name = \"EMPLOYEE\")\npublic class Employee {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"EMP_ID\")\n    private long id;\n\n    @Column(name = \"NAME\", nullable = false)\n    private String name;\n\n    @Column(name = \"DESIGNATION\")\n    private String designation;\n\n    @ManyToOne\n    @JoinColumn(name = \"DEPARTMENT\", insertable = false, updatable = false)\n    private Department department;\n...\n</code></pre>\n\n<p>--</p>\n\n<p>The query where employee.getDepartment() return null</p>\n\n<pre><code>        session = HibernateUtil.getSessionFactory().openSession();\n        transaction = session.getTransaction();\n        transaction.begin();\n\n        Department department = new Department();\n        department.setName(\"IT Department\");\n\n        Employee employee1 = new Employee();\n        employee1.setName(\"Adam\");\n        employee1.setDesignation(\"Manager\");\n\n        Employee employee2 = new Employee();\n        employee2.setName(\"Miller\");\n        employee2.setDesignation(\"Software Engineer\");\n\n        Employee employee3 = new Employee();\n        employee3.setName(\"Smith\");\n        employee3.setDesignation(\"Associate  Engineer\");\n\n        department.getEmployees().add(employee1);\n        department.getEmployees().add(employee2);\n        department.getEmployees().add(employee3);\n\n        session.persist(department);\n        session.flush();\n        transaction.commit();\n\n\n        transaction = session.getTransaction();\n        transaction.begin();\n\n        {\n            CriteriaBuilder builder = session.getCriteriaBuilder();\n            CriteriaQuery&lt;Employee&gt; query = builder.createQuery(Employee.class);\n            Root&lt;Employee&gt; root = query.from(Employee.class);\n            query.select(root);\n            Query&lt;Employee&gt; q = session.createQuery(query);\n            List&lt;Employee&gt; employees = q.getResultList();\n            for (Employee employee : employees) {\n                System.out.println(\"EMPLOYEE NAME: \" + employee.getName());\n                System.out.println(\"DEPARTMENT NAME: \" + employee.getDepartment()); // gives null\n            }\n        }\n        {\n            CriteriaBuilder builder = session.getCriteriaBuilder();\n            CriteriaQuery&lt;Department&gt; query = builder.createQuery(Department.class);\n            Root&lt;Department&gt; root = query.from(Department.class);\n            query.select(root);\n            Query&lt;Department&gt; q = session.createQuery(query);\n            List&lt;Department&gt; departments = q.getResultList();\n            for (Department deps : departments) {\n                System.out.println(deps.getName());\n                System.out.println(deps.getEmployees()); // list of employees is filled\n            }\n        }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BuXmD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BuXmD.jpg\" alt=\"Department table\"></a>\n<a href=\"https://i.stack.imgur.com/YdJgC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YdJgC.jpg\" alt=\"Employee Table\"></a></p>\n\n<p>The tables seem to be filled correctly. But if i use getDepartment on a queried Employee i get null. If i use getEmployees on a queried Department i get all the Employees.</p>\n\n<p>I tried both ways described here : <a href=\"https://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-bidirectional\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-bidirectional</a></p>\n\n<p>Example 7.21. Bidirectional one to many with many to one side as association owner</p>\n\n<p>and</p>\n\n<p>Example 7.22. Bidirectional association with one to many side as owner</p>\n\n<p>Same result for me.</p>\n\n<p>What am i missing?</p>\n\n<p>Here is the complete test Project: <a href=\"https://filetransfer.io/data-package/aHGyccvK\" rel=\"nofollow noreferrer\">updated Project zip</a></p>\n\n<p>SOLVED FIXED PROJECT: <a href=\"https://filetransfer.io/data-package/SvDN2rkq\" rel=\"nofollow noreferrer\">SOLVED PROBLEM PROJECT</a></p>\n"},{"tags":["java","swing","netbeans","windows-10"],"comments":[{"owner":{"account_id":98471,"reputation":15227,"user_id":266531,"accept_rate":100,"display_name":"Kirby"},"score":0,"creation_date":1671059818,"post_id":74798516,"comment_id":132018864,"body_markdown":"What do you mean by &quot;it didn&#39;t work&quot;. Can you expand on what the expectation was versus what occurred?","body":"What do you mean by &quot;it didn&#39;t work&quot;. Can you expand on what the expectation was versus what occurred?"}],"owner":{"account_id":26842805,"reputation":1,"user_id":20429033,"display_name":"The Techy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671059793,"creation_date":1671021883,"question_id":74798516,"body_markdown":"I want to use the code provided inside the FlatLaf library to create a Java Swing GUI for a school project, but I don&#39;t know how to add the FlatLaf libraries to my NetBeans IDE 16. I followed the instructions, but nothing worked.\r\nThere is an answer, but it&#39;s outdated (Netbeans 12). I don&#39;t know how to do it for the latest versions.\r\n\r\nI went to Tools &gt; Libraries &gt; Absolute Layout &gt; Add JAR/Folder   and added the Folder that contains the JAR.\r\nthe JAR file is inside a folder. I named it FlatLaf in the documents.\r\nThen I created a folder named FlatLaf inside my project folder that contains the JAR file, and added\r\n`FlatLightLaf.setup();` inside the main method of the Jframe file.\r\nBut, it didn&#39;t work.","title":"How to add FlatLaf Libraries to Java Swing project Apache Netbeans IDE 16?","body":"<p>I want to use the code provided inside the FlatLaf library to create a Java Swing GUI for a school project, but I don't know how to add the FlatLaf libraries to my NetBeans IDE 16. I followed the instructions, but nothing worked.\nThere is an answer, but it's outdated (Netbeans 12). I don't know how to do it for the latest versions.</p>\n<p>I went to Tools &gt; Libraries &gt; Absolute Layout &gt; Add JAR/Folder   and added the Folder that contains the JAR.\nthe JAR file is inside a folder. I named it FlatLaf in the documents.\nThen I created a folder named FlatLaf inside my project folder that contains the JAR file, and added\n<code>FlatLightLaf.setup();</code> inside the main method of the Jframe file.\nBut, it didn't work.</p>\n"},{"tags":["java","amazon-web-services","maven","aws-lambda"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1671059268,"post_id":74804971,"comment_id":132018747,"body_markdown":"Or configure the [handler](https://docs.aws.amazon.com/lambda/latest/dg/java-handler.html) method e.g. `org.example.HelloWorld::handler`.","body":"Or configure the <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/java-handler.html\" rel=\"nofollow noreferrer\">handler</a> method e.g. <code>org.example.HelloWorld::handler</code>."},{"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"score":0,"creation_date":1671059322,"post_id":74804971,"comment_id":132018761,"body_markdown":"Your handler should be something like `org.example.HelloWorld::handler`.","body":"Your handler should be something like <code>org.example.HelloWorld::handler</code>."}],"answers":[{"tags":[],"owner":{"account_id":18734395,"reputation":1261,"user_id":13659075,"display_name":"Ricardo Ferreira"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671059557,"creation_date":1671059557,"answer_id":74805159,"question_id":74804971,"body_markdown":"You had a typo while specifying the handler in the runtime settings. The correct way to specify the handler is:\r\n\r\n`packageName.className::method`\r\n\r\nIn your case, instead of:\r\n\r\n`org.example.HelloWorld.handler`\r\n\r\nChange to:\r\n\r\n`org.example.HelloWorld::handler`","title":"Java AWS Lambda &quot;ErrorMessage: Class not found","body":"<p>You had a typo while specifying the handler in the runtime settings. The correct way to specify the handler is:</p>\n<p><code>packageName.className::method</code></p>\n<p>In your case, instead of:</p>\n<p><code>org.example.HelloWorld.handler</code></p>\n<p>Change to:</p>\n<p><code>org.example.HelloWorld::handler</code></p>\n"}],"owner":{"account_id":4900033,"reputation":1579,"user_id":3948658,"accept_rate":50,"display_name":"dredbound"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":991,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671114755,"accepted_answer_id":74805159,"answer_count":1,"score":0,"last_activity_date":1671059557,"creation_date":1671057972,"question_id":74804971,"body_markdown":"I&#39;m trying to write a simple java lambda function. However I keep receiving this error when I run the lambda test after uploading the jar file for the lambda function:\r\n\r\n    {\r\n      &quot;errorMessage&quot;: &quot;Class not found: org.example.HelloWorld.handler&quot;,\r\n      &quot;errorType&quot;: &quot;java.lang.ClassNotFoundException&quot;\r\n    }\r\n\r\nHere is the Java code for the lambda:\r\n\r\n    package org.example;\r\n    \r\n    /**\r\n    * Hello world!\r\n    *\r\n    */\r\n    public class HelloWorld\r\n    {\r\n        public String handler() {\r\n            return &quot;Hello World&quot;;\r\n        }\r\n    }\r\n\r\nFor some more context this is a maven project, and I&#39;m creating the jar file by running `mvn clean package` from the root `LambdaExample` directory.\r\n\r\nHere is my file/directory structure for the project including the `hello-lambda.jar` that gets uploaded to AWS lambda .\r\n[![enter image description here][1]][1]\r\n\r\nHere is my lambda function handler:\r\n[![enter image description here][2]][2]\r\n\r\n\r\nHere is the lambda function summary:\r\n[![enter image description here][3]][3]\r\n\r\n\r\nAnd here is full error output from AWS Lambda Test:\r\n[![enter image description here][4]][4]\r\n\r\nThis seems like a pretty basic project and I followed a tutorial ([this one][5]) so it should work. Anyone know why I&#39;m getting this error and how I can fix it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zA7ZM.png\r\n  [2]: https://i.stack.imgur.com/2DFuh.png\r\n  [3]: https://i.stack.imgur.com/DHRnk.png\r\n  [4]: https://i.stack.imgur.com/ywkb2.png\r\n  [5]: https://www.youtube.com/watch?v=N-ejay6w2As&amp;ab_channel=AjayWadhara","title":"Java AWS Lambda &quot;ErrorMessage: Class not found","body":"<p>I'm trying to write a simple java lambda function. However I keep receiving this error when I run the lambda test after uploading the jar file for the lambda function:</p>\n<pre><code>{\n  &quot;errorMessage&quot;: &quot;Class not found: org.example.HelloWorld.handler&quot;,\n  &quot;errorType&quot;: &quot;java.lang.ClassNotFoundException&quot;\n}\n</code></pre>\n<p>Here is the Java code for the lambda:</p>\n<pre><code>package org.example;\n\n/**\n* Hello world!\n*\n*/\npublic class HelloWorld\n{\n    public String handler() {\n        return &quot;Hello World&quot;;\n    }\n}\n</code></pre>\n<p>For some more context this is a maven project, and I'm creating the jar file by running <code>mvn clean package</code> from the root <code>LambdaExample</code> directory.</p>\n<p>Here is my file/directory structure for the project including the <code>hello-lambda.jar</code> that gets uploaded to AWS lambda .\n<a href=\"https://i.stack.imgur.com/zA7ZM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zA7ZM.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is my lambda function handler:\n<a href=\"https://i.stack.imgur.com/2DFuh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2DFuh.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the lambda function summary:\n<a href=\"https://i.stack.imgur.com/DHRnk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DHRnk.png\" alt=\"enter image description here\" /></a></p>\n<p>And here is full error output from AWS Lambda Test:\n<a href=\"https://i.stack.imgur.com/ywkb2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ywkb2.png\" alt=\"enter image description here\" /></a></p>\n<p>This seems like a pretty basic project and I followed a tutorial (<a href=\"https://www.youtube.com/watch?v=N-ejay6w2As&amp;ab_channel=AjayWadhara\" rel=\"nofollow noreferrer\">this one</a>) so it should work. Anyone know why I'm getting this error and how I can fix it?</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud","spring-cloud-netflix"],"comments":[{"owner":{"account_id":4695136,"reputation":4605,"user_id":3800170,"accept_rate":60,"display_name":"alayor"},"score":1,"creation_date":1502373778,"post_id":45615866,"comment_id":78190730,"body_markdown":"What happens when you access eureka with the browser in the new port? E.g. localhost:8080/","body":"What happens when you access eureka with the browser in the new port? E.g. localhost:8080/"},{"owner":{"account_id":5456085,"reputation":434,"user_id":4339475,"accept_rate":100,"display_name":"Robert jardonneau"},"score":0,"creation_date":1502374484,"post_id":45615866,"comment_id":78191308,"body_markdown":"Your comment helped me solve my issue : I had the eureka IHM but only the eureka client appeared in register application (not the server). I added  `eureka.client.serviceUrl.defaultZone: &quot;http://localhost:8080/eureka&quot;` in my server config and it worked ! Thank you so much","body":"Your comment helped me solve my issue : I had the eureka IHM but only the eureka client appeared in register application (not the server). I added  <code>eureka.client.serviceUrl.defaultZone: &quot;http:&#47;&#47;localhost:8080&#47;eureka&quot;</code> in my server config and it worked ! Thank you so much"}],"answers":[{"tags":[],"owner":{"account_id":9133695,"reputation":460,"user_id":6794249,"display_name":"Shchipunov"},"down_vote_count":1,"up_vote_count":25,"is_accepted":true,"score":24,"last_activity_date":1653688848,"creation_date":1502374955,"answer_id":45616390,"question_id":45615866,"body_markdown":"Try this configuration:\r\n\r\n1. Server.\r\n\r\n```\r\n    server:\r\n      port: 8080\r\n    eureka:\r\n      instance:\r\n      hostname: localhost\r\n      client:\r\n        registerWithEureka: false\r\n        fetchRegistry: false\r\n          serviceUrl:\r\n            defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/\r\n```\r\n\r\n2. Client.\r\n\r\n\r\n```\r\n    spring:\r\n      application:\r\n      name: eureka-client\r\n    server:\r\n      port: 8083\r\n    eureka:\r\n      client:\r\n      registerWithEureka: true\r\n      fetchRegistry: true\r\n      serviceUrl:\r\n        defaultZone: http://localhost:8080/eureka/\r\n```","title":"Changing default port of eureka server using spring cloud","body":"<p>Try this configuration:</p>\n<ol>\n<li>Server.</li>\n</ol>\n<pre><code>    server:\n      port: 8080\n    eureka:\n      instance:\n      hostname: localhost\n      client:\n        registerWithEureka: false\n        fetchRegistry: false\n          serviceUrl:\n            defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/\n</code></pre>\n<ol start=\"2\">\n<li>Client.</li>\n</ol>\n<pre><code>    spring:\n      application:\n      name: eureka-client\n    server:\n      port: 8083\n    eureka:\n      client:\n      registerWithEureka: true\n      fetchRegistry: true\n      serviceUrl:\n        defaultZone: http://localhost:8080/eureka/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8920847,"reputation":490,"user_id":6657484,"display_name":"ayman.mostafa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594214760,"creation_date":1594214760,"answer_id":62795876,"question_id":45615866,"body_markdown":"Yep. as per Shchipunov comment the below properties do the job\r\n1-eureka.instance.hostname=localhost (eureka server)\r\n2-eureka.client.serviceUrl.defaultZone  (client project)\r\n\r\n","title":"Changing default port of eureka server using spring cloud","body":"<p>Yep. as per Shchipunov comment the below properties do the job\n1-eureka.instance.hostname=localhost (eureka server)\n2-eureka.client.serviceUrl.defaultZone  (client project)</p>\n"},{"tags":[],"owner":{"account_id":17293282,"reputation":3,"user_id":12524462,"display_name":"Leni Code"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605463320,"creation_date":1605463320,"answer_id":64847943,"question_id":45615866,"body_markdown":"You just need to add  eureka.client.service-url.defaultZone=http://localhost:8080/eureka in your server application.yml file and remove quotes around url in both files.\r\n\r\nremove quotes around url (Don&#39;t forget it)","title":"Changing default port of eureka server using spring cloud","body":"<p>You just need to add  eureka.client.service-url.defaultZone=http://localhost:8080/eureka in your server application.yml file and remove quotes around url in both files.</p>\n<p>remove quotes around url (Don't forget it)</p>\n"},{"tags":[],"owner":{"account_id":9848760,"reputation":11,"user_id":7295450,"display_name":"Mithun Majumdar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671059487,"creation_date":1670749318,"answer_id":74759502,"question_id":45615866,"body_markdown":"The changes below work fine for me.\r\n    \r\n    spring.application.name=netflix-eureka-naming-server \r\n    # Eureka default port\r\n    #server.port=8761   \r\n    server.port=8762\r\n    eureka.instance.hostname=localhost\r\n    eureka.client.register-with-eureka=false\r\n    eureka.client.fetch-registry=false\r\n    eureka.client.service-Url.defaultZone=http://${eureka.instance.hostname}:${server.port}/eureka/","title":"Changing default port of eureka server using spring cloud","body":"<p>The changes below work fine for me.</p>\n<pre><code>spring.application.name=netflix-eureka-naming-server \n# Eureka default port\n#server.port=8761   \nserver.port=8762\neureka.instance.hostname=localhost\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\neureka.client.service-Url.defaultZone=http://${eureka.instance.hostname}:${server.port}/eureka/\n</code></pre>\n"}],"owner":{"account_id":5456085,"reputation":434,"user_id":4339475,"accept_rate":100,"display_name":"Robert jardonneau"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26294,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":45616390,"answer_count":4,"score":9,"last_activity_date":1671059487,"creation_date":1502373524,"question_id":45615866,"body_markdown":"I got to spring-boot application, an eureka server and an eureka client.\r\n\r\nHere is my server configuration\r\n\r\n    server:\r\n      port: 8761\r\n    \r\n    spring:\r\n      application:\r\n        name: eureka-server\r\n\r\nHere is my server code\r\n\r\n    package fr.maif.eurekaserver;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\r\n    import org.springframework.cloud.netflix.zuul.EnableZuulProxy;\r\n    \r\n    @SpringBootApplication\r\n    @EnableEurekaServer\r\n    @EnableZuulProxy\r\n    public class EurekaServerApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(EurekaServerApplication.class, args);\r\n    \t}\r\n    }\r\nHere is the client configuration\r\n\r\n    spring:\r\n      application:\r\n        name: eureka-client\r\n    server:\r\n      port: 8083\r\n    eureka:\r\n      client:\r\n        serviceUrl:\r\n          defaultZone: &quot;http://localhost:8761/eureka&quot;\r\n\r\nHere is my client code\r\n\r\n    package fr.maif.eurekaclient;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.client.discovery.EnableDiscoveryClient;\r\n    \r\n    @SpringBootApplication\r\n    @EnableDiscoveryClient\r\n    public class EurekaClientApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(EurekaClientApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n\r\nThe above works perfectly while the server port remains 8761, however when I try to change it (to 8080 or any other value) both in server port &amp; client defaultZone configuration, the server continuously throws ConnectExceptions.\r\n\r\n    2017-08-10 15:54:31.424 ERROR 22219 --- [get_localhost-4] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\r\n    \r\n    com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)\r\n    \tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\r\n    \tat com.netflix.eureka.cluster.DynamicGZIPContentEncodingFilter.handle(DynamicGZIPContentEncodingFilter.java:48) ~[eureka-core-1.6.2.jar:1.6.2]\r\n    \tat com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.6.2.jar:1.6.2]\r\n    \tat com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]\r\n    \tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]\r\n    \tat com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]\r\n    \tat com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]\r\n    \tat com.netflix.eureka.transport.JerseyReplicationClient.submitBatchUpdates(JerseyReplicationClient.java:116) ~[eureka-core-1.6.2.jar:1.6.2]\r\n    \tat com.netflix.eureka.cluster.ReplicationTaskProcessor.process(ReplicationTaskProcessor.java:71) ~[eureka-core-1.6.2.jar:1.6.2]\r\n    \tat com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:187) [eureka-core-1.6.2.jar:1.6.2]\r\n    \tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_131]\r\n    Caused by: java.net.ConnectException: Connection refused (Connection refused)\r\n    \tat java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_131]\r\n    \tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_131]\r\n    \tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_131]\r\n    \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_131]\r\n    \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_131]\r\n    \tat java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_131]\r\n    \tat org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.3.jar:4.5.3]\r\n    \tat com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\r\n    \t... 10 common frames omitted\r\n\r\nWhat do I do wrong ?","title":"Changing default port of eureka server using spring cloud","body":"<p>I got to spring-boot application, an eureka server and an eureka client.</p>\n\n<p>Here is my server configuration</p>\n\n<pre><code>server:\n  port: 8761\n\nspring:\n  application:\n    name: eureka-server\n</code></pre>\n\n<p>Here is my server code</p>\n\n<pre><code>package fr.maif.eurekaserver;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\nimport org.springframework.cloud.netflix.zuul.EnableZuulProxy;\n\n@SpringBootApplication\n@EnableEurekaServer\n@EnableZuulProxy\npublic class EurekaServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaServerApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>Here is the client configuration</p>\n\n<pre><code>spring:\n  application:\n    name: eureka-client\nserver:\n  port: 8083\neureka:\n  client:\n    serviceUrl:\n      defaultZone: \"http://localhost:8761/eureka\"\n</code></pre>\n\n<p>Here is my client code</p>\n\n<pre><code>package fr.maif.eurekaclient;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\n\n@SpringBootApplication\n@EnableDiscoveryClient\npublic class EurekaClientApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaClientApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>The above works perfectly while the server port remains 8761, however when I try to change it (to 8080 or any other value) both in server port &amp; client defaultZone configuration, the server continuously throws ConnectExceptions.</p>\n\n<pre><code>2017-08-10 15:54:31.424 ERROR 22219 --- [get_localhost-4] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\n\ncom.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)\n    at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\n    at com.netflix.eureka.cluster.DynamicGZIPContentEncodingFilter.handle(DynamicGZIPContentEncodingFilter.java:48) ~[eureka-core-1.6.2.jar:1.6.2]\n    at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.6.2.jar:1.6.2]\n    at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]\n    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]\n    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]\n    at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]\n    at com.netflix.eureka.transport.JerseyReplicationClient.submitBatchUpdates(JerseyReplicationClient.java:116) ~[eureka-core-1.6.2.jar:1.6.2]\n    at com.netflix.eureka.cluster.ReplicationTaskProcessor.process(ReplicationTaskProcessor.java:71) ~[eureka-core-1.6.2.jar:1.6.2]\n    at com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:187) [eureka-core-1.6.2.jar:1.6.2]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_131]\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n    at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_131]\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_131]\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_131]\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_131]\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_131]\n    at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_131]\n    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.3.jar:4.5.3]\n    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.3.jar:4.5.3]\n    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.3.jar:4.5.3]\n    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.3.jar:4.5.3]\n    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.3.jar:4.5.3]\n    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.3.jar:4.5.3]\n    at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.3.jar:4.5.3]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.3.jar:4.5.3]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.3.jar:4.5.3]\n    at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]\n    ... 10 common frames omitted\n</code></pre>\n\n<p>What do I do wrong ?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1671058852,"post_id":74805051,"comment_id":132018657,"body_markdown":"the [documentation](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/Instant.html) shows all methods of the `Instant` class - e.g. `truncatedTo()` (with `ChronoUnit.DAYS)`)","body":"the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\">documentation</a> shows all methods of the <code>Instant</code> class - e.g. <code>truncatedTo()</code> (with <code>ChronoUnit.DAYS)</code>)"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1671059458,"post_id":74805051,"comment_id":132018790,"body_markdown":"It&#39;s worth being *very* aware that &quot;current date&quot; is only with respect to UTC in this case. That may be what you want, but you should check.","body":"It&#39;s worth being <i>very</i> aware that &quot;current date&quot; is only with respect to UTC in this case. That may be what you want, but you should check."}],"owner":{"account_id":3227749,"reputation":1860,"user_id":2723677,"accept_rate":61,"display_name":"mmar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671059227,"answer_count":0,"score":0,"last_activity_date":1671058668,"creation_date":1671058668,"question_id":74805051,"body_markdown":"The `Instant.now();` gives `2022-12-14T22:55:56.055612600Z`. But I would like to have output like this `2022-12-14T00:00:00.000Z`. Meaning, I need instant to provide me with current date, but the time with all zeros. How can I achieve?","title":"How to get Instant.now with time as zero?","body":"<p>The <code>Instant.now();</code> gives <code>2022-12-14T22:55:56.055612600Z</code>. But I would like to have output like this <code>2022-12-14T00:00:00.000Z</code>. Meaning, I need instant to provide me with current date, but the time with all zeros. How can I achieve?</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"answers":[{"tags":[],"owner":{"account_id":2490888,"reputation":6960,"user_id":2168346,"accept_rate":82,"display_name":"JiriS"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1444904492,"creation_date":1444904492,"answer_id":33145949,"question_id":31859271,"body_markdown":"It seems it is possible to use a combination of `org.apache.spark.sql.functions.explode(Column col)` and `DataFrame.withColumn(String colName, Column col)` to replace the column with the exploded version of it.","title":"SparkSQL and explode on DataFrame in Java","body":"<p>It seems it is possible to use a combination of <code>org.apache.spark.sql.functions.explode(Column col)</code> and <code>DataFrame.withColumn(String colName, Column col)</code> to replace the column with the exploded version of it.</p>\n"},{"tags":[],"owner":{"account_id":3519487,"reputation":919,"user_id":2942154,"display_name":"marilena.oita"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1448532499,"creation_date":1448532499,"answer_id":33935766,"question_id":31859271,"body_markdown":"I solved it in this manner: say that you have an array column containing job descriptions named &quot;positions&quot;, for each person with &quot;fullName&quot;. \r\n\r\nThen you get from initial schema :\r\n\r\n    root\r\n    |-- fullName: string (nullable = true)\r\n    |-- positions: array (nullable = true)\r\n        |    |-- element: struct (containsNull = true)\r\n        |    |    |-- companyName: string (nullable = true)\r\n        |    |    |-- title: string (nullable = true)\r\n    ...\r\n\r\nto schema:\r\n\r\n    root\r\n     |-- personName: string (nullable = true)\r\n     |-- companyName: string (nullable = true)\r\n     |-- positionTitle: string (nullable = true)\r\n\r\nby doing:\r\n\r\n        DataFrame personPositions = persons.select(persons.col(&quot;fullName&quot;).as(&quot;personName&quot;),\r\n              org.apache.spark.sql.functions.explode(persons.col(&quot;positions&quot;)).as(&quot;pos&quot;));\r\n        \r\n        DataFrame test = personPositions.select(personPositions.col(&quot;personName&quot;),\r\n        personPositions.col(&quot;pos&quot;).getField(&quot;companyName&quot;).as(&quot;companyName&quot;), personPositions.col(&quot;pos&quot;).getField(&quot;title&quot;).as(&quot;positionTitle&quot;));\r\n      \r\n","title":"SparkSQL and explode on DataFrame in Java","body":"<p>I solved it in this manner: say that you have an array column containing job descriptions named \"positions\", for each person with \"fullName\". </p>\n\n<p>Then you get from initial schema :</p>\n\n<pre><code>root\n|-- fullName: string (nullable = true)\n|-- positions: array (nullable = true)\n    |    |-- element: struct (containsNull = true)\n    |    |    |-- companyName: string (nullable = true)\n    |    |    |-- title: string (nullable = true)\n...\n</code></pre>\n\n<p>to schema:</p>\n\n<pre><code>root\n |-- personName: string (nullable = true)\n |-- companyName: string (nullable = true)\n |-- positionTitle: string (nullable = true)\n</code></pre>\n\n<p>by doing:</p>\n\n<pre><code>    DataFrame personPositions = persons.select(persons.col(\"fullName\").as(\"personName\"),\n          org.apache.spark.sql.functions.explode(persons.col(\"positions\")).as(\"pos\"));\n\n    DataFrame test = personPositions.select(personPositions.col(\"personName\"),\n    personPositions.col(\"pos\").getField(\"companyName\").as(\"companyName\"), personPositions.col(\"pos\").getField(\"title\").as(\"positionTitle\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4191645,"reputation":167,"user_id":3434131,"display_name":"JustTry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671058567,"creation_date":1671058054,"answer_id":74804984,"question_id":31859271,"body_markdown":"I have the similar problem with a little twist i have the data is &quot;;&quot; separated value , so I have to convert it in array then use explode on it \r\n\r\n    Dataset&lt;Row&gt; modelNum = csv.select(&quot;ROWNUM&quot;, &quot;MODELNUM&quot;);\r\n    //converting string data type to array then using explode function to decompose\r\n\tmodelNum = modelNum.withColumn(&quot;MODEL&quot;, split(modelNum.col(&quot;MODELNUM&quot;), &quot;;&quot;));\r\n\tmodelNum = modelNum.select(modelNum.col(&quot;ROWNUM&quot;), explode(modelNum.col(&quot;MODEL&quot;)).alias(&quot;MODEL_&quot;));\r\n\r\ndata looks like below before and after explode \r\n\r\n    +------+-------------+    |ROWNUM|MODEL_|\r\n    |ROWNUM|     MODELNUM|    +------+------+\r\n    +------+-------------+    |     1|1060008|\r\n    |     1|1060008;1261290|  |     1|1261290|\r\n    |     2|1060008;1261290|  |     2|1060008|\r\n    |     3|1060008;1261290|  |     2|1261290|\r\n                              |     3|1060008|\r\n                              |     3|1261290|","title":"SparkSQL and explode on DataFrame in Java","body":"<p>I have the similar problem with a little twist i have the data is &quot;;&quot; separated value , so I have to convert it in array then use explode on it</p>\n<pre><code>Dataset&lt;Row&gt; modelNum = csv.select(&quot;ROWNUM&quot;, &quot;MODELNUM&quot;);\n//converting string data type to array then using explode function to decompose\nmodelNum = modelNum.withColumn(&quot;MODEL&quot;, split(modelNum.col(&quot;MODELNUM&quot;), &quot;;&quot;));\nmodelNum = modelNum.select(modelNum.col(&quot;ROWNUM&quot;), explode(modelNum.col(&quot;MODEL&quot;)).alias(&quot;MODEL_&quot;));\n</code></pre>\n<p>data looks like below before and after explode</p>\n<pre><code>+------+-------------+    |ROWNUM|MODEL_|\n|ROWNUM|     MODELNUM|    +------+------+\n+------+-------------+    |     1|1060008|\n|     1|1060008;1261290|  |     1|1261290|\n|     2|1060008;1261290|  |     2|1060008|\n|     3|1060008;1261290|  |     2|1261290|\n                          |     3|1060008|\n                          |     3|1261290|\n</code></pre>\n"}],"owner":{"account_id":2490888,"reputation":6960,"user_id":2168346,"accept_rate":82,"display_name":"JiriS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14072,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":33145949,"answer_count":3,"score":9,"last_activity_date":1671058567,"creation_date":1438873399,"question_id":31859271,"body_markdown":"Is there an easy way how use `explode` on array column on SparkSQL `DataFrame`? It&#39;s relatively simple in Scala, but this function seems to be unavailable (as mentioned in javadoc) in Java.\r\n\r\nAn option is to use `SQLContext.sql(...)` and `explode` function inside the query, but I&#39;m looking for a bit better and especially cleaner way. `DataFrame`s are loaded from parquet files.","title":"SparkSQL and explode on DataFrame in Java","body":"<p>Is there an easy way how use <code>explode</code> on array column on SparkSQL <code>DataFrame</code>? It's relatively simple in Scala, but this function seems to be unavailable (as mentioned in javadoc) in Java.</p>\n\n<p>An option is to use <code>SQLContext.sql(...)</code> and <code>explode</code> function inside the query, but I'm looking for a bit better and especially cleaner way. <code>DataFrame</code>s are loaded from parquet files.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-rds"],"comments":[{"owner":{"account_id":7575391,"reputation":32359,"user_id":5747944,"display_name":"sytech"},"score":0,"creation_date":1671057762,"post_id":74802208,"comment_id":132018408,"body_markdown":"What exactly do you mean about not wanting to use the `application.yml` or `.properties`? You don&#39;t need to put any secrets in those files -- that&#39;s the whole point of the secretsmanager driver....","body":"What exactly do you mean about not wanting to use the <code>application.yml</code> or <code>.properties</code>? You don&#39;t need to put any secrets in those files -- that&#39;s the whole point of the secretsmanager driver...."}],"answers":[{"tags":[],"owner":{"account_id":7575391,"reputation":32359,"user_id":5747944,"display_name":"sytech"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671057806,"creation_date":1671057806,"answer_id":74804947,"question_id":74802208,"body_markdown":"Yes, it&#39;s possible to do. The exact implementation will vary by framework/ORM, but you would need to cache the credentials, but also check if a new password is needed **every time** a new connection is acquired.\r\n\r\nIn your code, you are setting the password once statically:\r\n\r\n```java\r\n            DataSource dataSource = DataSourceBuilder\r\n                    .create()\r\n                    .url(&quot;jdbc:postgresql://&quot; + secrets.getHost() + &quot;:&quot; + secrets.getPort() + &quot;/&quot; + secrets.getDatabase())\r\n                    .username(secrets.getUsername())\r\n                    .password(secrets.getPassword())\r\n                    .build();\r\n```\r\n\r\nThe `getPassword()` function is only ever called once when you build the datasource and is reused for additional connections from that data source. Instead, you need to retrieve (from cache/secretsmanger) _every_ time a connection is created.\r\n\r\n\r\nAWS provides a [java caching client for AWS secretsmanager](https://github.com/aws/aws-secretsmanager-caching-java/) (clients for other languages are also available). You can adapt that into your data source to use that to retrieve the password for _every connection_. You can read the official guidance documentation on that here: [Rotate database credentials without restarting containers](https://docs.aws.amazon.com/prescriptive-guidance/latest/patterns/rotate-database-credentials-without-restarting-containers.html). \r\n\r\nIn the context of Spring, that means implementing this pattern in your data source driver, which is exactly what the `com.amazonaws.secretsmanager.sql.AWSSecretsManagerMySQLDriver` class provides. Because you are rotating the secret so often, you probably want to [configure the secret cache](https://docs.aws.amazon.com/secretsmanager/latest/userguide/retrieving-secrets_cache-java-ref_SecretCacheConfiguration.html) to refresh more often than the default of 1 hour or adjust your rotation frequency.\r\n\r\n\r\nIf you really need to be rotating the password that often and you&#39;re using RDS for your database, you might consider just using IAM-based authentication instead. I can&#39;t imagine why you would want to have a password that rotates so frequently, keeping in mind you are billed for secret retrieval API calls.","title":"It&#180;s possible retrive or refresh a password by secretmanagerid in AWS, the password has been rotated by a policy every five minutes","body":"<p>Yes, it's possible to do. The exact implementation will vary by framework/ORM, but you would need to cache the credentials, but also check if a new password is needed <strong>every time</strong> a new connection is acquired.</p>\n<p>In your code, you are setting the password once statically:</p>\n<pre class=\"lang-java prettyprint-override\"><code>            DataSource dataSource = DataSourceBuilder\n                    .create()\n                    .url(&quot;jdbc:postgresql://&quot; + secrets.getHost() + &quot;:&quot; + secrets.getPort() + &quot;/&quot; + secrets.getDatabase())\n                    .username(secrets.getUsername())\n                    .password(secrets.getPassword())\n                    .build();\n</code></pre>\n<p>The <code>getPassword()</code> function is only ever called once when you build the datasource and is reused for additional connections from that data source. Instead, you need to retrieve (from cache/secretsmanger) <em>every</em> time a connection is created.</p>\n<p>AWS provides a <a href=\"https://github.com/aws/aws-secretsmanager-caching-java/\" rel=\"nofollow noreferrer\">java caching client for AWS secretsmanager</a> (clients for other languages are also available). You can adapt that into your data source to use that to retrieve the password for <em>every connection</em>. You can read the official guidance documentation on that here: <a href=\"https://docs.aws.amazon.com/prescriptive-guidance/latest/patterns/rotate-database-credentials-without-restarting-containers.html\" rel=\"nofollow noreferrer\">Rotate database credentials without restarting containers</a>.</p>\n<p>In the context of Spring, that means implementing this pattern in your data source driver, which is exactly what the <code>com.amazonaws.secretsmanager.sql.AWSSecretsManagerMySQLDriver</code> class provides. Because you are rotating the secret so often, you probably want to <a href=\"https://docs.aws.amazon.com/secretsmanager/latest/userguide/retrieving-secrets_cache-java-ref_SecretCacheConfiguration.html\" rel=\"nofollow noreferrer\">configure the secret cache</a> to refresh more often than the default of 1 hour or adjust your rotation frequency.</p>\n<p>If you really need to be rotating the password that often and you're using RDS for your database, you might consider just using IAM-based authentication instead. I can't imagine why you would want to have a password that rotates so frequently, keeping in mind you are billed for secret retrieval API calls.</p>\n"}],"owner":{"account_id":13682657,"reputation":7,"user_id":9872609,"display_name":"Abraham Macias"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":437,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671057806,"creation_date":1671039321,"question_id":74802208,"body_markdown":"well that&#180;s the question, It&#180;s possible to retrieve or refresh a password by secretmanagerid in AWS?, the password has been rotated by a policy every five minutes. I don&#180;t want to restart my microservice to retrieve the pass, I was looking for a solution and I found something like this:\r\n\r\n\r\n&lt;dependency&gt;\r\n\r\n    &lt;groupId&gt;com.amazonaws.secretsmanager&lt;/groupId&gt;\r\n\r\n    &lt;artifactId&gt;aws-secretsmanager-jdbc&lt;/artifactId&gt;\r\n\r\n    &lt;version&gt;1.0.5&lt;/version&gt;\r\n\r\n&lt;/dependency&gt;\r\n\r\nspring:\r\n\r\n  datasource:\r\n\r\n    url: jdbc-secretsmanager:mysql://database-host:3306/rotate_db\r\n\r\n    username: secret/rotation\r\n\r\n    driver-class-name: com.amazonaws.secretsmanager.sql.AWSSecretsManagerMySQLDriver\r\n\r\n   \r\nBut I don&#39;t want to use the configuration in the application.yml or .properties, I want to keep these values in the parameter store as secrets, currently my code looks like this:\r\n\r\n    @Bean\r\n        public DataSource dataSource() {\r\n            AwsSecrets secrets = getSecret();\r\n            if(Objects.nonNull(secrets)){\r\n                log.info(&quot;Getting parameters: host: {}, port: {}, Db: {}, user: {}, pass: {}&quot;, secrets.getHost(), secrets.getPort(), secrets.getDatabase(),secrets.getUsername(), secrets.getPassword());\r\n                DataSource dataSource = DataSourceBuilder\r\n                        .create()\r\n                        .url(&quot;jdbc:postgresql://&quot; + secrets.getHost() + &quot;:&quot; + secrets.getPort() + &quot;/&quot; + secrets.getDatabase())\r\n                        .username(secrets.getUsername())\r\n                        .password(secrets.getPassword())\r\n                        .build();\r\n                return new TracingDataSource(dataSource);\r\n            }\r\n            log.debug(&quot;Unable to get secrets&quot;);\r\n            return null;\r\n        }\r\n    \r\n        @Bean\r\n        public Filter tracingFilter() {\r\n            return new AWSXRayServletFilter(&quot;back-microservice&quot;);\r\n        }\r\n    \r\n    \r\n        private AwsSecrets getSecret() {\r\n    \r\n            AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard()\r\n                    .withRegion(amazonRegion)\r\n                    .withCredentials(dynamoDBConfig.accountAmazonAWSCredentials())\r\n                    .build();\r\n    \r\n            String secret;\r\n            GetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest()\r\n                    .withSecretId(secretmanagerId);\r\n            GetSecretValueResult getSecretValueResult = null;\r\n    \r\n            try {\r\n                getSecretValueResult = client.getSecretValue(getSecretValueRequest);\r\n            } catch (Exception e) {\r\n                log.debug(&quot;Unable to get secrets values&quot;);\r\n                throw e;\r\n            }\r\n            if (getSecretValueResult.getSecretString() != null) {\r\n                secret = getSecretValueResult.getSecretString();\r\n                return gson.fromJson(secret, AwsSecrets.class);\r\n            }\r\n    \r\n            return null;\r\n        }","title":"It&#180;s possible retrive or refresh a password by secretmanagerid in AWS, the password has been rotated by a policy every five minutes","body":"<p>well that´s the question, It´s possible to retrieve or refresh a password by secretmanagerid in AWS?, the password has been rotated by a policy every five minutes. I don´t want to restart my microservice to retrieve the pass, I was looking for a solution and I found something like this:</p>\n\n<pre><code>&lt;groupId&gt;com.amazonaws.secretsmanager&lt;/groupId&gt;\n\n&lt;artifactId&gt;aws-secretsmanager-jdbc&lt;/artifactId&gt;\n\n&lt;version&gt;1.0.5&lt;/version&gt;\n</code></pre>\n\n<p>spring:</p>\n<p>datasource:</p>\n<pre><code>url: jdbc-secretsmanager:mysql://database-host:3306/rotate_db\n\nusername: secret/rotation\n\ndriver-class-name: com.amazonaws.secretsmanager.sql.AWSSecretsManagerMySQLDriver\n</code></pre>\n<p>But I don't want to use the configuration in the application.yml or .properties, I want to keep these values in the parameter store as secrets, currently my code looks like this:</p>\n<pre><code>@Bean\n    public DataSource dataSource() {\n        AwsSecrets secrets = getSecret();\n        if(Objects.nonNull(secrets)){\n            log.info(&quot;Getting parameters: host: {}, port: {}, Db: {}, user: {}, pass: {}&quot;, secrets.getHost(), secrets.getPort(), secrets.getDatabase(),secrets.getUsername(), secrets.getPassword());\n            DataSource dataSource = DataSourceBuilder\n                    .create()\n                    .url(&quot;jdbc:postgresql://&quot; + secrets.getHost() + &quot;:&quot; + secrets.getPort() + &quot;/&quot; + secrets.getDatabase())\n                    .username(secrets.getUsername())\n                    .password(secrets.getPassword())\n                    .build();\n            return new TracingDataSource(dataSource);\n        }\n        log.debug(&quot;Unable to get secrets&quot;);\n        return null;\n    }\n\n    @Bean\n    public Filter tracingFilter() {\n        return new AWSXRayServletFilter(&quot;back-microservice&quot;);\n    }\n\n\n    private AwsSecrets getSecret() {\n\n        AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard()\n                .withRegion(amazonRegion)\n                .withCredentials(dynamoDBConfig.accountAmazonAWSCredentials())\n                .build();\n\n        String secret;\n        GetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest()\n                .withSecretId(secretmanagerId);\n        GetSecretValueResult getSecretValueResult = null;\n\n        try {\n            getSecretValueResult = client.getSecretValue(getSecretValueRequest);\n        } catch (Exception e) {\n            log.debug(&quot;Unable to get secrets values&quot;);\n            throw e;\n        }\n        if (getSecretValueResult.getSecretString() != null) {\n            secret = getSecretValueResult.getSecretString();\n            return gson.fromJson(secret, AwsSecrets.class);\n        }\n\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","numberformatexception"],"comments":[{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":0,"creation_date":1458891428,"post_id":36215779,"comment_id":60063955,"body_markdown":"Look at if there are any hidden special characters, white spaces etc.","body":"Look at if there are any hidden special characters, white spaces etc."},{"owner":{"account_id":7752870,"reputation":169,"user_id":5868252,"accept_rate":50,"display_name":"eyeballs"},"score":0,"creation_date":1458891981,"post_id":36215779,"comment_id":60064137,"body_markdown":"there were no any hidden special characters :) but thank you to answer me","body":"there were no any hidden special characters :) but thank you to answer me"}],"answers":[{"tags":[],"owner":{"account_id":2279106,"reputation":9588,"user_id":2004685,"accept_rate":69,"display_name":"user2004685"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1458891116,"creation_date":1458891116,"answer_id":36215811,"question_id":36215779,"body_markdown":"You must be having the trailing whitespaces. Use the `trim()` function as follows:\r\n\r\n    val = Integer.parseInt(line.trim());\r\n\r\nHere is the code snippet:\r\n\r\n    int val = 0;\r\n    BufferedReader br = new BufferedReader(new FileReader(&quot;out.txt&quot;));\r\n\r\n    String line = null;\r\n    while(true) {\r\n        line = br.readLine();\r\n        if (line == null) break;\r\n        val = Integer.parseInt(line.trim());\r\n    }\r\n    br.close();\r\n\r\nAlso, if you want to check whether String is `null` or `empty` you can start using the Apache Commons `StringUtils` as follows:\r\n\r\n    if (StringUtils.isEmpty(line)) break;","title":"java.lang.NumberFormatException: For input string: &quot;1&quot;","body":"<p>You must be having the trailing whitespaces. Use the <code>trim()</code> function as follows:</p>\n\n<pre><code>val = Integer.parseInt(line.trim());\n</code></pre>\n\n<p>Here is the code snippet:</p>\n\n<pre><code>int val = 0;\nBufferedReader br = new BufferedReader(new FileReader(\"out.txt\"));\n\nString line = null;\nwhile(true) {\n    line = br.readLine();\n    if (line == null) break;\n    val = Integer.parseInt(line.trim());\n}\nbr.close();\n</code></pre>\n\n<p>Also, if you want to check whether String is <code>null</code> or <code>empty</code> you can start using the Apache Commons <code>StringUtils</code> as follows:</p>\n\n<pre><code>if (StringUtils.isEmpty(line)) break;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7752870,"reputation":169,"user_id":5868252,"accept_rate":50,"display_name":"eyeballs"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1458974786,"creation_date":1458891912,"answer_id":36215982,"question_id":36215779,"body_markdown":"Oops. Yesterday the following code worked well so i uploaded it as you are seeing. but today, i tried compile one more time **without &#39;.toString()&#39; and well, it worked too.** So It was my mistake and I&#39;m sorry to bother you guys.\r\n(I don&#39;t know why it didn&#39;t work without &#39;.toString&#39; exactly the day before yesterday.)\r\n\r\n--------------------------------\r\n\r\nThank you so much people who cared of my question but i found the answer(i don&#39;t know how to find it by myself)\r\n\r\nfollowing codes work very well :) Thank you!\r\n\r\n\r\n        BufferedReader br = new BufferedReader(new FileReader(&quot;out.txt&quot;));\r\n        int val=0;\r\n\r\n        while(true) {\r\n            String line = br.readLine();\r\n            if (line==null)\tbreak;\r\n            val=Integer.parseInt(line.toString());\r\n        }\r\n        br.close();","title":"java.lang.NumberFormatException: For input string: &quot;1&quot;","body":"<p>Oops. Yesterday the following code worked well so i uploaded it as you are seeing. but today, i tried compile one more time <strong>without '.toString()' and well, it worked too.</strong> So It was my mistake and I'm sorry to bother you guys.\n(I don't know why it didn't work without '.toString' exactly the day before yesterday.)</p>\n\n<hr>\n\n<p>Thank you so much people who cared of my question but i found the answer(i don't know how to find it by myself)</p>\n\n<p>following codes work very well :) Thank you!</p>\n\n<pre><code>    BufferedReader br = new BufferedReader(new FileReader(\"out.txt\"));\n    int val=0;\n\n    while(true) {\n        String line = br.readLine();\n        if (line==null) break;\n        val=Integer.parseInt(line.toString());\n    }\n    br.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10940754,"reputation":1993,"user_id":8040697,"display_name":"Emad Razavi"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1550774877,"creation_date":1550774877,"answer_id":54814185,"question_id":36215779,"body_markdown":"I removed this invisible Unicode character and now parsing to INT works great. I know it&#39;s not the case here but maybe can help some other people.\r\n\r\n    text = text.replaceAll(&quot;\\\\uFEFF&quot;, &quot;&quot;);\r\n\r\n","title":"java.lang.NumberFormatException: For input string: &quot;1&quot;","body":"<p>I removed this invisible Unicode character and now parsing to INT works great. I know it's not the case here but maybe can help some other people.</p>\n\n<pre><code>text = text.replaceAll(\"\\\\uFEFF\", \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27069463,"reputation":1,"user_id":20620304,"display_name":"silence Li"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671057155,"creation_date":1670480346,"answer_id":74726242,"question_id":36215779,"body_markdown":"Did you create the file on a Mac? Probably there is some hidden character. You can create it on Windows and try again.","title":"java.lang.NumberFormatException: For input string: &quot;1&quot;","body":"<p>Did you create the file on a Mac? Probably there is some hidden character. You can create it on Windows and try again.</p>\n"}],"owner":{"account_id":7752870,"reputation":169,"user_id":5868252,"accept_rate":50,"display_name":"eyeballs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26413,"favorite_count":0,"down_vote_count":3,"up_vote_count":6,"accepted_answer_id":36215811,"answer_count":4,"score":3,"last_activity_date":1671057155,"creation_date":1458890934,"question_id":36215779,"body_markdown":"&quot;out.txt&quot; content is \r\n\r\n&gt; 1\r\n\r\nMy JAVA code is like this.\r\n\r\n        int val=0;\r\n        BufferedReader br = new BufferedReader(new FileReader(&quot;out.txt&quot;));\r\n\r\n        while(true) {\r\n            String line = br.readLine();\r\n            if (line==null) break;\r\n            val=Integer.parseInt(line);\r\n        }\r\n        br.close();\r\n\r\nand debugger says,\r\n\r\n&gt; java.lang.NumberFormatException: For input string: &quot;﻿1&quot;\r\n\r\n\r\n\r\ni need to use 1 from &quot;out.txt&quot;.\r\nHow can i use 1 as Integer?\r\nThank you for your attention :)","title":"java.lang.NumberFormatException: For input string: &quot;1&quot;","body":"<p>\"out.txt\" content is </p>\n\n<blockquote>\n  <p>1</p>\n</blockquote>\n\n<p>My JAVA code is like this.</p>\n\n<pre><code>    int val=0;\n    BufferedReader br = new BufferedReader(new FileReader(\"out.txt\"));\n\n    while(true) {\n        String line = br.readLine();\n        if (line==null) break;\n        val=Integer.parseInt(line);\n    }\n    br.close();\n</code></pre>\n\n<p>and debugger says,</p>\n\n<blockquote>\n  <p>java.lang.NumberFormatException: For input string: \"﻿1\"</p>\n</blockquote>\n\n<p>i need to use 1 from \"out.txt\".\nHow can i use 1 as Integer?\nThank you for your attention :)</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":6450853,"reputation":1946,"user_id":4997818,"accept_rate":42,"display_name":"Jigar Naik"},"score":0,"creation_date":1559127067,"post_id":56358794,"comment_id":99321238,"body_markdown":"its not null it&#39;s empty `Map&lt;Integer, Optional&lt;SecurityAttributeChange&gt;&gt; spnCreationDetails`","body":"its not null it&#39;s empty <code>Map&lt;Integer, Optional&lt;SecurityAttributeChange&gt;&gt; spnCreationDetails</code>"},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1559128377,"post_id":56358794,"comment_id":99321984,"body_markdown":"What does `SecurityAttributeChange` and `SecurityAttr` look like? When you create an instance with no-arg constructor, what are you doing inside it? What about the attributes then used with getters. More importantly, what does the exception log read?","body":"What does <code>SecurityAttributeChange</code> and <code>SecurityAttr</code> look like? When you create an instance with no-arg constructor, what are you doing inside it? What about the attributes then used with getters. More importantly, what does the exception log read?"},{"owner":{"account_id":1769203,"reputation":8965,"user_id":1614378,"accept_rate":55,"display_name":"devops"},"score":0,"creation_date":1559129461,"post_id":56358794,"comment_id":99322556,"body_markdown":"Very good example of &quot;how to make your code unreadable&quot;","body":"Very good example of &quot;how to make your code unreadable&quot;"},{"owner":{"account_id":6450853,"reputation":1946,"user_id":4997818,"accept_rate":42,"display_name":"Jigar Naik"},"score":0,"creation_date":1559129523,"post_id":56358794,"comment_id":99322594,"body_markdown":"Suggessions are welcome @dieter","body":"Suggessions are welcome @dieter"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1559138469,"post_id":56358794,"comment_id":99328118,"body_markdown":"What is `e`? This looks much like it could be far simpler when knowing what you are actually doing.","body":"What is <code>e</code>? This looks much like it could be far simpler when knowing what you are actually doing."},{"owner":{"account_id":6450853,"reputation":1946,"user_id":4997818,"accept_rate":42,"display_name":"Jigar Naik"},"score":0,"creation_date":1559140691,"post_id":56358794,"comment_id":99329448,"body_markdown":"e is Map.Entry object","body":"e is Map.Entry object"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1559128292,"creation_date":1559127182,"answer_id":56358863,"question_id":56358794,"body_markdown":"If `spnCreationDetails.get(e.getKey())` can be null, you probably need:\r\n\r\n    Optional.ofNullable(spnCreationDetails.get(e.getKey()))\r\n            .orElse(new SecurityAttributeChange())\r\n            .getNewAttribute()\r\n            .orElse(new SecurityAttr())\r\n            .getUserName();\r\n\r\ni.e. `spnCreationDetails.get(e.getKey())` should be wrapped with an `Optional`.\r\n\r\nEDIT: Seeing your comment, `spnCreationDetails.get(e.getKey())` can return either a `null` or an `Optional&lt;SecurityAttributeChange&gt;`, so it would be better to transform only the `null` into a new `Optional`:\r\n\r\n    spnCreationDetails.getOrDefault(e.getKey(),Optional.empty())\r\n                      .orElse(new SecurityAttributeChange())\r\n                      .getNewAttribute()\r\n                      .orElse(new SecurityAttr())\r\n                      .getUserName();            ","title":"Handling Null Pointer while using lambda","body":"<p>If <code>spnCreationDetails.get(e.getKey())</code> can be null, you probably need:</p>\n\n<pre><code>Optional.ofNullable(spnCreationDetails.get(e.getKey()))\n        .orElse(new SecurityAttributeChange())\n        .getNewAttribute()\n        .orElse(new SecurityAttr())\n        .getUserName();\n</code></pre>\n\n<p>i.e. <code>spnCreationDetails.get(e.getKey())</code> should be wrapped with an <code>Optional</code>.</p>\n\n<p>EDIT: Seeing your comment, <code>spnCreationDetails.get(e.getKey())</code> can return either a <code>null</code> or an <code>Optional&lt;SecurityAttributeChange&gt;</code>, so it would be better to transform only the <code>null</code> into a new <code>Optional</code>:</p>\n\n<pre><code>spnCreationDetails.getOrDefault(e.getKey(),Optional.empty())\n                  .orElse(new SecurityAttributeChange())\n                  .getNewAttribute()\n                  .orElse(new SecurityAttr())\n                  .getUserName();            \n</code></pre>\n"}],"owner":{"account_id":6450853,"reputation":1946,"user_id":4997818,"accept_rate":42,"display_name":"Jigar Naik"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":56358863,"answer_count":1,"score":1,"last_activity_date":1671057112,"creation_date":1559126944,"question_id":56358794,"body_markdown":"Will below code ever get `nullPointerException` unless `e.getKey()` returns `null`\r\n\r\n    Map&lt;Integer, Optional&lt;SecurityAttributeChange&gt;&gt; spnCreationDetails;\r\n    Optional.ofNullable(spnCreationDetails.get(e.getKey()).orElse(new SecurityAttributeChange()).getNewAttribute())\r\n    \t\t\t\t\t\t\t\t\t.orElse(new SecurityAttr())\r\n    \t\t\t\t\t\t\t\t\t.getUserName());\r\n\r\nI am getting NPE in this line, is there anyway to debug this? I know `spnCreationDetails.get(e.getKey())` returns null, Am i missing anything in handling `null` over here?\r\n\r\n***\r\n\r\n **- EDIT**\r\n\r\n*** \r\n\r\nHere is the almost complete method which will help to give input on how to refactor this so that it&#39;s readable. \r\n\r\n    private void updateAuditFields(List&lt;SecurityAttributeChange&gt; securityChanges, Map&lt;Integer, Map&lt;String, Object&gt;&gt; result) {\r\n    \r\n    \tMap&lt;Integer, Optional&lt;SecurityAttributeChange&gt;&gt; spnModificationDetails = ...\r\n    \r\n    \tMap&lt;Integer, Optional&lt;SecurityAttributeChange&gt;&gt; spnCreationDetails = ...\r\n    \t\r\n    \tresult.entrySet().stream().forEach(e -&gt; {\r\n    \t\te.getValue()\r\n    \t\t\t\t.put(&quot;userIdLastChanged&quot;,\r\n    \t\t\t\t\t\tOptional.ofNullable(Optional.ofNullable(spnModificationDetails.get(e.getKey()))\r\n    \t\t\t\t\t\t\t\t.orElse(Optional.of(new SecurityAttributeChange()))\r\n    \t\t\t\t\t\t\t\t.get()\r\n    \t\t\t\t\t\t\t\t.getNewAttribute()).orElse(new SecurityAttr()).getUserName());\r\n    \r\n    \t\te.getValue()\r\n    \t\t\t\t.put(&quot;lastChangedDatetime&quot;,\r\n    \t\t\t\t\t\tOptional.ofNullable(Optional.ofNullable(spnModificationDetails.get(e.getKey()))\r\n    \t\t\t\t\t\t\t\t.orElse(Optional.of(new SecurityAttributeChange()))\r\n    \t\t\t\t\t\t\t\t.get()\r\n    \t\t\t\t\t\t\t\t.getNewAttribute()).orElse(new SecurityAttr()).getKnowledgeBeginDate());\r\n    \r\n    \t\te.getValue()\r\n    \t\t\t\t.put(&quot;userIdCreated&quot;, Optional.ofNullable(\r\n    \t\t\t\t\t\tOptional.ofNullable(spnCreationDetails.get(e.getKey())).orElse(Optional.of(new SecurityAttributeChange())).get().getNewAttribute())\r\n    \t\t\t\t\t\t.orElse(new SecurityAttr())\r\n    \t\t\t\t\t\t.getUserName());\r\n    \r\n    \t\te.getValue()\r\n    \t\t\t\t.put(&quot;createdDatetime&quot;,\r\n    \t\t\t\t\t\tOptional.ofNullable(Optional.ofNullable(spnCreationDetails.get(e.getKey()))\r\n    \t\t\t\t\t\t\t\t.orElse(Optional.of(new SecurityAttributeChange()))\r\n    \t\t\t\t\t\t\t\t.get()\r\n    \t\t\t\t\t\t\t\t.getNewAttribute()).orElse(new SecurityAttr()).getKnowledgeBeginDate());\r\n    \r\n    \t});\r\n    }\r\n\r\n","title":"Handling Null Pointer while using lambda","body":"<p>Will below code ever get <code>nullPointerException</code> unless <code>e.getKey()</code> returns <code>null</code></p>\n\n<pre><code>Map&lt;Integer, Optional&lt;SecurityAttributeChange&gt;&gt; spnCreationDetails;\nOptional.ofNullable(spnCreationDetails.get(e.getKey()).orElse(new SecurityAttributeChange()).getNewAttribute())\n                                    .orElse(new SecurityAttr())\n                                    .getUserName());\n</code></pre>\n\n<p>I am getting NPE in this line, is there anyway to debug this? I know <code>spnCreationDetails.get(e.getKey())</code> returns null, Am i missing anything in handling <code>null</code> over here?</p>\n\n<hr>\n\n<p><strong>- EDIT</strong></p>\n\n<hr>\n\n<p>Here is the almost complete method which will help to give input on how to refactor this so that it's readable. </p>\n\n<pre><code>private void updateAuditFields(List&lt;SecurityAttributeChange&gt; securityChanges, Map&lt;Integer, Map&lt;String, Object&gt;&gt; result) {\n\n    Map&lt;Integer, Optional&lt;SecurityAttributeChange&gt;&gt; spnModificationDetails = ...\n\n    Map&lt;Integer, Optional&lt;SecurityAttributeChange&gt;&gt; spnCreationDetails = ...\n\n    result.entrySet().stream().forEach(e -&gt; {\n        e.getValue()\n                .put(\"userIdLastChanged\",\n                        Optional.ofNullable(Optional.ofNullable(spnModificationDetails.get(e.getKey()))\n                                .orElse(Optional.of(new SecurityAttributeChange()))\n                                .get()\n                                .getNewAttribute()).orElse(new SecurityAttr()).getUserName());\n\n        e.getValue()\n                .put(\"lastChangedDatetime\",\n                        Optional.ofNullable(Optional.ofNullable(spnModificationDetails.get(e.getKey()))\n                                .orElse(Optional.of(new SecurityAttributeChange()))\n                                .get()\n                                .getNewAttribute()).orElse(new SecurityAttr()).getKnowledgeBeginDate());\n\n        e.getValue()\n                .put(\"userIdCreated\", Optional.ofNullable(\n                        Optional.ofNullable(spnCreationDetails.get(e.getKey())).orElse(Optional.of(new SecurityAttributeChange())).get().getNewAttribute())\n                        .orElse(new SecurityAttr())\n                        .getUserName());\n\n        e.getValue()\n                .put(\"createdDatetime\",\n                        Optional.ofNullable(Optional.ofNullable(spnCreationDetails.get(e.getKey()))\n                                .orElse(Optional.of(new SecurityAttributeChange()))\n                                .get()\n                                .getNewAttribute()).orElse(new SecurityAttr()).getKnowledgeBeginDate());\n\n    });\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671056420,"creation_date":1671056420,"answer_id":74804765,"question_id":74788600,"body_markdown":"It will be a lot easier to implement using a custom form object.\r\n\r\nFor example, create this class:\r\n\r\n```\r\npublic class AssignFriendFormData {\r\n  private String friendId;\r\n  private String customerId;\r\n\r\n  // getter and setters here\r\n}\r\n```\r\n\r\nUse this in your `@GetMappping`:\r\n\r\n```\r\n@GetMapping(&quot;/customer/{customerId}&quot;)\r\n    public String getCustomer(Model theModel, @PathVariable int customerId, @AuthenticationPrincipal MyUserDetails user) {\r\n        Customer currUser = customerService.findById(user.getCustomer().getId());\r\n        Customer foundCustomer = customerService.findById(customerId);\r\n\r\n        AssignFriendFormData formData = new AssignFriendFormData();\r\n        formData.setFriendId(foundCustomer.getId());\r\n        formData.setCustomerId(currUser.getId());\r\n        theModel.addAttribute(&quot;formData&quot;, formData);\r\n        \r\n        return &quot;customerdetails&quot;;\r\n```\r\n\r\nChange the form to this:\r\n\r\n```\r\n&lt;form action=&quot;#&quot; th:action=&quot;@{/home/addFriend}&quot; th:object=&quot;${formData}&quot; method=&quot;post&quot;&gt;\r\n    &lt;input type=&quot;hidden&quot; th:field=&quot;*{friendId}&quot; /&gt;\r\n    &lt;input type=&quot;hidden&quot; th:field=&quot;*{customerId}&quot; /&gt;\r\n    &lt;input type=&quot;submit&quot; value=&quot;Add Friend&quot; class=&quot;btn btn-primary flex-grow-1&quot; /&gt;\r\n&lt;/form&gt;\r\n```\r\n\r\nFinally, update the `@PostMapping` to use the form data object:\r\n\r\n```\r\n@PostMapping(&quot;/addFriend&quot;)\r\n    public String getPost(@Valid @ModelAttribute(&quot;formData&quot;) AssignFriendFormData formData) {\r\n        Customer friendCustomer = customerService.findById(formData.getFriendId());\r\n        Customer currCustomer = customerService.findById(formData.getCustomerId());\r\n        \r\n        System.out.println(currCustomer.getFirstName());\r\n        System.out.println(friendCustomer.getFirstName());\r\n        \r\n        return &quot;redirect:/home&quot;;\r\n    }\r\n```\r\n\r\nSee [Form handling with Thymeleaf][1] for a more in-depth tutorial on this.\r\n\r\n\r\n  [1]: https://www.wimdeblauwe.com/blog/2021/05/23/form-handling-with-thymeleaf/","title":"Second hidden input is not read","body":"<p>It will be a lot easier to implement using a custom form object.</p>\n<p>For example, create this class:</p>\n<pre><code>public class AssignFriendFormData {\n  private String friendId;\n  private String customerId;\n\n  // getter and setters here\n}\n</code></pre>\n<p>Use this in your <code>@GetMappping</code>:</p>\n<pre><code>@GetMapping(&quot;/customer/{customerId}&quot;)\n    public String getCustomer(Model theModel, @PathVariable int customerId, @AuthenticationPrincipal MyUserDetails user) {\n        Customer currUser = customerService.findById(user.getCustomer().getId());\n        Customer foundCustomer = customerService.findById(customerId);\n\n        AssignFriendFormData formData = new AssignFriendFormData();\n        formData.setFriendId(foundCustomer.getId());\n        formData.setCustomerId(currUser.getId());\n        theModel.addAttribute(&quot;formData&quot;, formData);\n        \n        return &quot;customerdetails&quot;;\n</code></pre>\n<p>Change the form to this:</p>\n<pre><code>&lt;form action=&quot;#&quot; th:action=&quot;@{/home/addFriend}&quot; th:object=&quot;${formData}&quot; method=&quot;post&quot;&gt;\n    &lt;input type=&quot;hidden&quot; th:field=&quot;*{friendId}&quot; /&gt;\n    &lt;input type=&quot;hidden&quot; th:field=&quot;*{customerId}&quot; /&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Add Friend&quot; class=&quot;btn btn-primary flex-grow-1&quot; /&gt;\n&lt;/form&gt;\n</code></pre>\n<p>Finally, update the <code>@PostMapping</code> to use the form data object:</p>\n<pre><code>@PostMapping(&quot;/addFriend&quot;)\n    public String getPost(@Valid @ModelAttribute(&quot;formData&quot;) AssignFriendFormData formData) {\n        Customer friendCustomer = customerService.findById(formData.getFriendId());\n        Customer currCustomer = customerService.findById(formData.getCustomerId());\n        \n        System.out.println(currCustomer.getFirstName());\n        System.out.println(friendCustomer.getFirstName());\n        \n        return &quot;redirect:/home&quot;;\n    }\n</code></pre>\n<p>See <a href=\"https://www.wimdeblauwe.com/blog/2021/05/23/form-handling-with-thymeleaf/\" rel=\"nofollow noreferrer\">Form handling with Thymeleaf</a> for a more in-depth tutorial on this.</p>\n"}],"owner":{"account_id":18807214,"reputation":45,"user_id":13716265,"display_name":"Thorvas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74804765,"answer_count":1,"score":0,"last_activity_date":1671056420,"creation_date":1670951857,"question_id":74788600,"body_markdown":"I have two hidden input fields to implement Friend system. I pass user and friend&#39;s ids in Model and then use them in thymeleaf page to pass them in form to ```PostMapping``` and save changes. However, ```PostMapping``` cannot see my second ```@RequestParam```. &lt;br&gt;\r\n&lt;br&gt; **Both ```customer``` and ```friend``` are properly passed to model as I tried to output them on website using ```th:text```**\r\n&lt;br&gt;\r\n&lt;br&gt;Snippets of code:\r\n&lt;br&gt; Adding both users to model:\r\n```\r\n@GetMapping(&quot;/customer/{customerId}&quot;)\r\n\tpublic String getCustomer(Model theModel, @PathVariable int customerId, @AuthenticationPrincipal MyUserDetails user) {\r\n\t\tCustomer currUser = customerService.findById(user.getCustomer().getId());\r\n\t\tCustomer foundCustomer = customerService.findById(customerId);\r\n\t\ttheModel.addAttribute(&quot;friend&quot;, foundCustomer);\r\n\t\ttheModel.addAttribute(&quot;customer&quot;, currUser);\r\n\t\treturn &quot;customerdetails&quot;;\r\n```\r\n&lt;br&gt; Snippet of Thymeleaf code:\r\n```\r\n&lt;form action=&quot;#&quot; th:action=&quot;@{/home/addFriend}&quot; th:object=&quot;${friend}&quot; method=&quot;post&quot;&gt;\r\n        \t\t\t&lt;input type=&quot;hidden&quot; th:field=&quot;${friend.id}&quot; th:attr=&quot;name=&#39;friendId&#39;&quot; /&gt;\r\n        \t\t\t&lt;input type=&quot;hidden&quot; th:field=&quot;${customer.id}&quot; th:attr=&quot;name=&#39;customerId&#39;&quot; /&gt;\r\n                  &lt;input type=&quot;submit&quot; value=&quot;Add Friend&quot; class=&quot;btn btn-primary flex-grow-1&quot; /&gt;\r\n&lt;/form&gt;\r\n```\r\n&lt;br&gt; PostMapping (where issue occurs):\r\n```\r\n@PostMapping(&quot;/addFriend&quot;)\r\n\tpublic String getPost(@RequestParam(&quot;friendId&quot;) int friendId, @RequestParam(&quot;customerId&quot;) int customerId) {\r\n\t\tCustomer friendCustomer = customerService.findById(friendId);\r\n\t\tCustomer currCustomer = customerService.findById(customerId);\r\n\t\t\r\n\t\tSystem.out.println(currCustomer.getFirstName());\r\n\t\tSystem.out.println(friendCustomer.getFirstName());\r\n\t\t\r\n\t\treturn &quot;redirect:/home&quot;;\r\n\t}\r\n```\r\n&lt;br&gt; Code of error: &lt;br&gt;\r\n```\r\n[org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter &#39;friendId&#39; for method parameter type int is not present]\r\n```","title":"Second hidden input is not read","body":"<p>I have two hidden input fields to implement Friend system. I pass user and friend's ids in Model and then use them in thymeleaf page to pass them in form to <code>PostMapping</code> and save changes. However, <code>PostMapping</code> cannot see my second <code>@RequestParam</code>. <br>\n<br> <strong>Both <code>customer</code> and <code>friend</code> are properly passed to model as I tried to output them on website using <code>th:text</code></strong>\n<br>\n<br>Snippets of code:\n<br> Adding both users to model:</p>\n<pre><code>@GetMapping(&quot;/customer/{customerId}&quot;)\n    public String getCustomer(Model theModel, @PathVariable int customerId, @AuthenticationPrincipal MyUserDetails user) {\n        Customer currUser = customerService.findById(user.getCustomer().getId());\n        Customer foundCustomer = customerService.findById(customerId);\n        theModel.addAttribute(&quot;friend&quot;, foundCustomer);\n        theModel.addAttribute(&quot;customer&quot;, currUser);\n        return &quot;customerdetails&quot;;\n</code></pre>\n<p><br> Snippet of Thymeleaf code:</p>\n<pre><code>&lt;form action=&quot;#&quot; th:action=&quot;@{/home/addFriend}&quot; th:object=&quot;${friend}&quot; method=&quot;post&quot;&gt;\n                    &lt;input type=&quot;hidden&quot; th:field=&quot;${friend.id}&quot; th:attr=&quot;name='friendId'&quot; /&gt;\n                    &lt;input type=&quot;hidden&quot; th:field=&quot;${customer.id}&quot; th:attr=&quot;name='customerId'&quot; /&gt;\n                  &lt;input type=&quot;submit&quot; value=&quot;Add Friend&quot; class=&quot;btn btn-primary flex-grow-1&quot; /&gt;\n&lt;/form&gt;\n</code></pre>\n<p><br> PostMapping (where issue occurs):</p>\n<pre><code>@PostMapping(&quot;/addFriend&quot;)\n    public String getPost(@RequestParam(&quot;friendId&quot;) int friendId, @RequestParam(&quot;customerId&quot;) int customerId) {\n        Customer friendCustomer = customerService.findById(friendId);\n        Customer currCustomer = customerService.findById(customerId);\n        \n        System.out.println(currCustomer.getFirstName());\n        System.out.println(friendCustomer.getFirstName());\n        \n        return &quot;redirect:/home&quot;;\n    }\n</code></pre>\n<p><br> Code of error: <br></p>\n<pre><code>[org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'friendId' for method parameter type int is not present]\n</code></pre>\n"},{"tags":["java","arrays","hashmap","set"],"answers":[{"tags":[],"owner":{"account_id":6788741,"reputation":24,"user_id":5226546,"display_name":"wolray"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671003018,"creation_date":1671003018,"answer_id":74794863,"question_id":74793923,"body_markdown":"Suppose you have a `Record` class for each entry\r\n```lang-java\r\npublic class Record {\r\n    public String name;\r\n    public Integer date;\r\n    public String status;\r\n\r\n    public Record(String name, Integer date, String status) {\r\n        this.name = name;\r\n        this.date = date;\r\n        this.status = status;\r\n    }\r\n}\r\n```\r\nYou can use `Stream` API to achieve your goals\r\n```lang-java\r\npublic static Map&lt;String, Integer&gt; useStream(List&lt;Record&gt; records) {\r\n    return records.stream()\r\n        .collect(Collectors.groupingBy(r -&gt; r.name))\r\n        .entrySet().stream()\r\n        .collect(Collectors.toMap(Map.Entry::getKey, e -&gt; {\r\n            Integer[] lastFail = new Integer[]{null};\r\n            return e.getValue().stream()\r\n                .sorted(Comparator.comparing(r -&gt; r.date))\r\n                .mapToInt(t -&gt; {\r\n                    if (t.status.equals(&quot;fail&quot;) &amp;&amp; lastFail[0] == null) {\r\n                        lastFail[0] = t.date;\r\n                    } else if (t.status.equals(&quot;success&quot;) &amp;&amp; lastFail[0] != null) {\r\n                        int last = lastFail[0];\r\n                        lastFail[0] = null;\r\n                        return t.date - last;\r\n                    }\r\n                    return 0;\r\n                })\r\n                .sum();\r\n        }));\r\n}\r\n```\r\nOr you can use better [`Seq`](https://github.com/wolray/seq-java/blob/master/README.md) API with smoother code\r\n```lang-java\r\npublic static Map&lt;String, Integer&gt; useSeq(List&lt;Record&gt; records) {\r\n    return Seq.of(records)\r\n        .groupBy(r -&gt; r.name)\r\n        .toList()\r\n        .toMap(Map.Entry::getKey, e -&gt; {\r\n            Integer[] lastFail = new Integer[]{null};\r\n            return Seq.of(e.getValue())\r\n                .sortBy(r -&gt; r.date)\r\n                .sumInt(t -&gt; {\r\n                    if (t.status.equals(&quot;fail&quot;) &amp;&amp; lastFail[0] == null) {\r\n                        lastFail[0] = t.date;\r\n                    } else if (t.status.equals(&quot;success&quot;) &amp;&amp; lastFail[0] != null) {\r\n                        int last = lastFail[0];\r\n                        lastFail[0] = null;\r\n                        return t.date - last;\r\n                    }\r\n                    return 0;\r\n                });\r\n        });\r\n}\r\n```\r\nBoth of these methods result as {chris=6, john=7}","title":"How to make a calculation on the list of HashMaps in Java?","body":"<p>Suppose you have a <code>Record</code> class for each entry</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Record {\n    public String name;\n    public Integer date;\n    public String status;\n\n    public Record(String name, Integer date, String status) {\n        this.name = name;\n        this.date = date;\n        this.status = status;\n    }\n}\n</code></pre>\n<p>You can use <code>Stream</code> API to achieve your goals</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Map&lt;String, Integer&gt; useStream(List&lt;Record&gt; records) {\n    return records.stream()\n        .collect(Collectors.groupingBy(r -&gt; r.name))\n        .entrySet().stream()\n        .collect(Collectors.toMap(Map.Entry::getKey, e -&gt; {\n            Integer[] lastFail = new Integer[]{null};\n            return e.getValue().stream()\n                .sorted(Comparator.comparing(r -&gt; r.date))\n                .mapToInt(t -&gt; {\n                    if (t.status.equals(&quot;fail&quot;) &amp;&amp; lastFail[0] == null) {\n                        lastFail[0] = t.date;\n                    } else if (t.status.equals(&quot;success&quot;) &amp;&amp; lastFail[0] != null) {\n                        int last = lastFail[0];\n                        lastFail[0] = null;\n                        return t.date - last;\n                    }\n                    return 0;\n                })\n                .sum();\n        }));\n}\n</code></pre>\n<p>Or you can use better <a href=\"https://github.com/wolray/seq-java/blob/master/README.md\" rel=\"nofollow noreferrer\"><code>Seq</code></a> API with smoother code</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Map&lt;String, Integer&gt; useSeq(List&lt;Record&gt; records) {\n    return Seq.of(records)\n        .groupBy(r -&gt; r.name)\n        .toList()\n        .toMap(Map.Entry::getKey, e -&gt; {\n            Integer[] lastFail = new Integer[]{null};\n            return Seq.of(e.getValue())\n                .sortBy(r -&gt; r.date)\n                .sumInt(t -&gt; {\n                    if (t.status.equals(&quot;fail&quot;) &amp;&amp; lastFail[0] == null) {\n                        lastFail[0] = t.date;\n                    } else if (t.status.equals(&quot;success&quot;) &amp;&amp; lastFail[0] != null) {\n                        int last = lastFail[0];\n                        lastFail[0] = null;\n                        return t.date - last;\n                    }\n                    return 0;\n                });\n        });\n}\n</code></pre>\n<p>Both of these methods result as {chris=6, john=7}</p>\n"}],"owner":{"account_id":24999373,"reputation":117,"user_id":18859913,"display_name":"Good Panic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1671232738,"accepted_answer_id":74794863,"answer_count":1,"score":-2,"last_activity_date":1671056131,"creation_date":1670995595,"question_id":74793923,"body_markdown":"I currently have the following sorted set of maps of data: \r\n\r\n```\r\n[\r\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2015, &quot;status&quot;:&quot;success&quot;},\r\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2013, &quot;status&quot;:&quot;fail&quot;},\r\n   {&quot;name&quot;:&quot;chris&quot;, &quot;date&quot;:2013, &quot;status&quot;:&quot;success&quot;},\r\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2012, &quot;status&quot;:&quot;fail&quot;},\r\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2009, &quot;status&quot;:&quot;success&quot;},\r\n   {&quot;name&quot;:&quot;chris&quot;, &quot;date&quot;:2007, &quot;status&quot;:&quot;fail&quot;},\r\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2005, &quot;status&quot;:&quot;fail&quot;},\r\n]\r\n```\r\n\r\nI&#39;m trying to calculate the failure duration for each of the names until `2022`. Status for each name is in failure until the next success status.\r\n\r\nSo, let&#39;s say for the name `john`, it was failed on `2005`, next success was `2009`, which means 4 years of failure. Then it got failed again on `2012`, and again on `2013`, which overall until `2015` would be 3 years of failure. Combining them would result in 7 years for `john`.\r\n\r\nWith the same logic, for `chris` we have 6 years of failure.\r\n\r\nI&#39;m stuck in the implementation of this. Does anyone have an efficient solution for this problem?","title":"How to make a calculation on the list of HashMaps in Java?","body":"<p>I currently have the following sorted set of maps of data:</p>\n<pre><code>[\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2015, &quot;status&quot;:&quot;success&quot;},\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2013, &quot;status&quot;:&quot;fail&quot;},\n   {&quot;name&quot;:&quot;chris&quot;, &quot;date&quot;:2013, &quot;status&quot;:&quot;success&quot;},\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2012, &quot;status&quot;:&quot;fail&quot;},\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2009, &quot;status&quot;:&quot;success&quot;},\n   {&quot;name&quot;:&quot;chris&quot;, &quot;date&quot;:2007, &quot;status&quot;:&quot;fail&quot;},\n   {&quot;name&quot;:&quot;john&quot;, &quot;date&quot;:2005, &quot;status&quot;:&quot;fail&quot;},\n]\n</code></pre>\n<p>I'm trying to calculate the failure duration for each of the names until <code>2022</code>. Status for each name is in failure until the next success status.</p>\n<p>So, let's say for the name <code>john</code>, it was failed on <code>2005</code>, next success was <code>2009</code>, which means 4 years of failure. Then it got failed again on <code>2012</code>, and again on <code>2013</code>, which overall until <code>2015</code> would be 3 years of failure. Combining them would result in 7 years for <code>john</code>.</p>\n<p>With the same logic, for <code>chris</code> we have 6 years of failure.</p>\n<p>I'm stuck in the implementation of this. Does anyone have an efficient solution for this problem?</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"owner":{"account_id":14619528,"reputation":79,"user_id":10558667,"display_name":"Brendan McCauley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671055924,"creation_date":1671055924,"question_id":74804712,"body_markdown":"I need to implement a join starting from the (destinationFsac, destinationCity, destinationRoad) non-unique tuple in AuditAttributes and returning an OperatingStation with the unique non-primary key of (fsac, city19, operatingRoad).\r\n\r\nAuditAttributes.java:\r\n```\r\n\t@Column(name=&quot;AAT_DEST_FSAC&quot;, nullable = false)\r\n\tprivate String destinationFsac;\r\n\r\n\t@Column(name=&quot;AAT_DEST_CITY_19&quot;, nullable = false)\r\n\tprivate String destinationCity;\r\n\r\n\t@Column(name=&quot;AAT_DEST_RD&quot;, nullable = false)\r\n\tprivate String destinationRoad;\r\n\r\n\t@ManyToOne(fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;AAT_DEST_FSAC&quot;, referencedColumnName = &quot;FSAC&quot;, insertable = false, updatable = false)\r\n\t@JoinColumn(name = &quot;AAT_DEST_CITY_19&quot;, referencedColumnName = &quot;OP_STA_CITY_19&quot;, insertable = false, updatable = false)\r\n\t@JoinColumn(name = &quot;AAT_DEST_RD&quot;, referencedColumnName = &quot;OP_RD&quot;, insertable = false, updatable = false)\r\n\t@Where(clause = &quot;deletePending &lt;&gt; &#39;Y&#39;&quot;)\r\n\tprivate OperatingStation destOperatingStation;\r\n```\r\nOperatingStation.java:\r\n```\r\n\t@NaturalId\r\n\t@Column(name = &quot;FSAC&quot;)\r\n\tprivate String fsac;\r\n\r\n\t@NaturalId\r\n\t@Column(name = &quot;OP_STA_CITY_19&quot;)\r\n\tprivate String city19;\r\n\r\n\t@Id\r\n\t@NaturalId\r\n\t@Column(name = &quot;OP_RD&quot;)\r\n\tprivate String operatingRoad;\r\n\r\n\t@OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;destOperatingStation&quot;)\r\n\tprivate Set&lt;AuditAttributes&gt; destAuditAttributesSet;\r\n```\r\nAuditRepository.java:\r\n```\r\n    @EntityGraph(type = EntityGraph.EntityGraphType.FETCH,\r\n\t\t\tattributePaths = {\r\n\t\t\t\t\t&quot;auditAttributes&quot;,\r\n\t\t\t\t\t&quot;auditAttributes.destOperatingStation&quot;,\r\n\t\t\t\t\t&quot;auditAttributes.onOperatingStation&quot;,\r\n\t\t\t\t\t&quot;auditAttributes.offOperatingStation&quot;\r\n\t\t\t})\r\n    Optional&lt;Audit&gt; findClassificationHistoryRouteBySa(\r\n    \t\t@Param(&quot;sa&quot;) Integer sa);\r\n```\r\nHowever, when I start up Spring Boot, I get an exception:\r\n```\r\norg.springframework.boot.SpringApplication - Application run failed org.hibernate.AnnotationException: referencedColumnNames(FSAC, OP_STA_CITY_19, OP_RD) of com.classification.data.entity.AuditAttributes.destOperatingStation referencing com.classification.data.entity.OperatingStation not mapped to a single property\r\n```\r\nHow do I resolve this error and get the join working correctly?","title":"How do I perform a Spring JPA @OneToMany/@ManyToOne join using composite non-primary keys?","body":"<p>I need to implement a join starting from the (destinationFsac, destinationCity, destinationRoad) non-unique tuple in AuditAttributes and returning an OperatingStation with the unique non-primary key of (fsac, city19, operatingRoad).</p>\n<p>AuditAttributes.java:</p>\n<pre><code>    @Column(name=&quot;AAT_DEST_FSAC&quot;, nullable = false)\n    private String destinationFsac;\n\n    @Column(name=&quot;AAT_DEST_CITY_19&quot;, nullable = false)\n    private String destinationCity;\n\n    @Column(name=&quot;AAT_DEST_RD&quot;, nullable = false)\n    private String destinationRoad;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;AAT_DEST_FSAC&quot;, referencedColumnName = &quot;FSAC&quot;, insertable = false, updatable = false)\n    @JoinColumn(name = &quot;AAT_DEST_CITY_19&quot;, referencedColumnName = &quot;OP_STA_CITY_19&quot;, insertable = false, updatable = false)\n    @JoinColumn(name = &quot;AAT_DEST_RD&quot;, referencedColumnName = &quot;OP_RD&quot;, insertable = false, updatable = false)\n    @Where(clause = &quot;deletePending &lt;&gt; 'Y'&quot;)\n    private OperatingStation destOperatingStation;\n</code></pre>\n<p>OperatingStation.java:</p>\n<pre><code>    @NaturalId\n    @Column(name = &quot;FSAC&quot;)\n    private String fsac;\n\n    @NaturalId\n    @Column(name = &quot;OP_STA_CITY_19&quot;)\n    private String city19;\n\n    @Id\n    @NaturalId\n    @Column(name = &quot;OP_RD&quot;)\n    private String operatingRoad;\n\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;destOperatingStation&quot;)\n    private Set&lt;AuditAttributes&gt; destAuditAttributesSet;\n</code></pre>\n<p>AuditRepository.java:</p>\n<pre><code>    @EntityGraph(type = EntityGraph.EntityGraphType.FETCH,\n            attributePaths = {\n                    &quot;auditAttributes&quot;,\n                    &quot;auditAttributes.destOperatingStation&quot;,\n                    &quot;auditAttributes.onOperatingStation&quot;,\n                    &quot;auditAttributes.offOperatingStation&quot;\n            })\n    Optional&lt;Audit&gt; findClassificationHistoryRouteBySa(\n            @Param(&quot;sa&quot;) Integer sa);\n</code></pre>\n<p>However, when I start up Spring Boot, I get an exception:</p>\n<pre><code>org.springframework.boot.SpringApplication - Application run failed org.hibernate.AnnotationException: referencedColumnNames(FSAC, OP_STA_CITY_19, OP_RD) of com.classification.data.entity.AuditAttributes.destOperatingStation referencing com.classification.data.entity.OperatingStation not mapped to a single property\n</code></pre>\n<p>How do I resolve this error and get the join working correctly?</p>\n"},{"tags":["java","html","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671055464,"creation_date":1671055464,"answer_id":74804650,"question_id":74804032,"body_markdown":"If I understand you correctly then `company.description` contains text with inside it a `&lt;a href=&quot;...&quot;&gt;` part. If you use `th:text`, then Thymeleaf will escape the HTML for safety reasons.\r\n\r\nIf you are absolutely sure this is not user data, you can use `th:utext`. But if this is data coming from an untrusted source (e.g. the users of your application), then this is a security risk as people can put in all kinds of HTML (or JavaScript!) code in there.","title":"How to create a link inside text in Thymeleaf?","body":"<p>If I understand you correctly then <code>company.description</code> contains text with inside it a <code>&lt;a href=&quot;...&quot;&gt;</code> part. If you use <code>th:text</code>, then Thymeleaf will escape the HTML for safety reasons.</p>\n<p>If you are absolutely sure this is not user data, you can use <code>th:utext</code>. But if this is data coming from an untrusted source (e.g. the users of your application), then this is a security risk as people can put in all kinds of HTML (or JavaScript!) code in there.</p>\n"}],"owner":{"account_id":26038502,"reputation":95,"user_id":19743660,"display_name":"programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74804650,"answer_count":1,"score":0,"last_activity_date":1671055464,"creation_date":1671051012,"question_id":74804032,"body_markdown":"I have a cycle, in this cycle I print company description as a text. \r\n\r\n    &lt;ul class=&quot;companies&quot; th:each=&quot;company: ${companies}&quot;&gt;\r\n    &lt;li style=&quot;text-decoration:none&quot;&gt;&lt;strong th:text=&quot;${company.code}&quot;&gt;Text1&lt;/strong&gt; – &lt;span th:text=&quot;${company.description}&quot;&gt;description&lt;/span&gt;&lt;/li&gt;\r\n    &lt;/ul&gt;\r\n\r\nbut thing is, that I have inside &quot;company.description&quot; long text with one link. But in result link becomes just a text. How to create a link?","title":"How to create a link inside text in Thymeleaf?","body":"<p>I have a cycle, in this cycle I print company description as a text.</p>\n<pre><code>&lt;ul class=&quot;companies&quot; th:each=&quot;company: ${companies}&quot;&gt;\n&lt;li style=&quot;text-decoration:none&quot;&gt;&lt;strong th:text=&quot;${company.code}&quot;&gt;Text1&lt;/strong&gt; – &lt;span th:text=&quot;${company.description}&quot;&gt;description&lt;/span&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n<p>but thing is, that I have inside &quot;company.description&quot; long text with one link. But in result link becomes just a text. How to create a link?</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1671022010,"post_id":74798317,"comment_id":132006531,"body_markdown":"It uses `tag_name` because that is the default naming strategy. CamelCase will be converted to `tag_name`. So either rename your field to `tagname` or switch to a different naming strategy, or rename the column in the database.","body":"It uses <code>tag_name</code> because that is the default naming strategy. CamelCase will be converted to <code>tag_name</code>. So either rename your field to <code>tagname</code> or switch to a different naming strategy, or rename the column in the database."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1671034710,"post_id":74798317,"comment_id":132011632,"body_markdown":"Spring/Hibernate doesn&#39;t abide by the JPA specification and will override your column definitions. See https://dev.to/aleksey/hibernate-naming-strategies-jpa-specification-vs-spring-boot-opinionation-m1c as you can change the strategy Spring sets for implicit and physical naming.","body":"Spring/Hibernate doesn&#39;t abide by the JPA specification and will override your column definitions. See <a href=\"https://dev.to/aleksey/hibernate-naming-strategies-jpa-specification-vs-spring-boot-opinionation-m1c\" rel=\"nofollow noreferrer\">dev.to/aleksey/&hellip;</a> as you can change the strategy Spring sets for implicit and physical naming."}],"answers":[{"tags":[],"owner":{"account_id":6985227,"reputation":73,"user_id":5356474,"display_name":"furkanbegen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671054630,"creation_date":1671054630,"answer_id":74804541,"question_id":74798317,"body_markdown":"You can match the DB column name with your field like this.\r\n\r\n    @Column(name=&quot;tag_name&quot;)\r\n    private String tagName;\r\n    \r\n","title":"JPA Spring saving entity to a different name in MariaDB","body":"<p>You can match the DB column name with your field like this.</p>\n<pre><code>@Column(name=&quot;tag_name&quot;)\nprivate String tagName;\n</code></pre>\n"}],"owner":{"account_id":27199263,"reputation":1,"user_id":20731739,"display_name":"s558kim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671054630,"creation_date":1671020958,"question_id":74798317,"body_markdown":"The first code block is the entity and the second code saves the tag to the database. \r\n\r\n```\r\npublic class Tag {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    private String tagName;\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = &quot;tags&quot;)\r\n    private Set&lt;Board&gt; boards = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\n\r\n```\r\npublic void getTagList(String tagName) {\r\n\r\n    Tag tag = new Tag();\r\n    tag.setTagName(tagName);\r\n    tagRepository.save(tag);\r\n}\r\n```\r\nWhenever I send over the tagName, I get an error saying \r\n*java.sql.SQLSyntaxErrorException: (conn=564) Unknown column &#39;tag_name&#39; in &#39;field list&#39;\r\n* I don&#39;t have &#39;tag_name&#39; anywhere in my code and I&#39;m not sure why JPA is trying to save it with a slightly different name.\r\n\r\n\r\nI added a column called tag_name in the database and it seems to work and save the data into tag_name.","title":"JPA Spring saving entity to a different name in MariaDB","body":"<p>The first code block is the entity and the second code saves the tag to the database.</p>\n<pre><code>public class Tag {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String tagName;\n\n    @JsonIgnore\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = &quot;tags&quot;)\n    private Set&lt;Board&gt; boards = new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre><code>public void getTagList(String tagName) {\n\n    Tag tag = new Tag();\n    tag.setTagName(tagName);\n    tagRepository.save(tag);\n}\n</code></pre>\n<p>Whenever I send over the tagName, I get an error saying\n*java.sql.SQLSyntaxErrorException: (conn=564) Unknown column 'tag_name' in 'field list'</p>\n<ul>\n<li>I don't have 'tag_name' anywhere in my code and I'm not sure why JPA is trying to save it with a slightly different name.</li>\n</ul>\n<p>I added a column called tag_name in the database and it seems to work and save the data into tag_name.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":1,"creation_date":1671053388,"post_id":74804349,"comment_id":132017292,"body_markdown":"Why is extracting the string between last `:` and `&amp;` and then using a suitable string-to-int function not an answer? What did you try? What problems occurred? With &quot;expression&quot;, do you mean &quot;regular expression&quot;?","body":"Why is extracting the string between last <code>:</code> and <code>&amp;</code> and then using a suitable string-to-int function not an answer? What did you try? What problems occurred? With &quot;expression&quot;, do you mean &quot;regular expression&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":1626304,"reputation":169369,"user_id":1501794,"accept_rate":72,"display_name":"Rahul Tripathi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671054338,"creation_date":1671054338,"answer_id":74804493,"question_id":74804349,"body_markdown":"You can try this regex:\r\n\r\n    (?&lt;=\\&amp;quot;urn:li:fsd_jobPosting:)(.*?)(?=\\&amp;)\r\n\r\n[Regex Demo][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/y3A0iW/1","title":"Get number from a string","body":"<p>You can try this regex:</p>\n<pre><code>(?&lt;=\\&amp;quot;urn:li:fsd_jobPosting:)(.*?)(?=\\&amp;)\n</code></pre>\n<p><a href=\"https://regex101.com/r/y3A0iW/1\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"closed_date":1671095441,"answer_count":1,"score":-2,"last_activity_date":1671054338,"creation_date":1671053249,"question_id":74804349,"body_markdown":"I have this part of a html code:\r\n\r\n    &amp;quot;urn:li:fsd_jobPosting:3374616185&amp;\r\n\r\nIn my case I have this String expression which is found many times into html table rows but with different number.\r\n\r\nFor example is it possible to get the number based on a expression for example `&amp;quot;urn:li:fsd_jobPosting:&lt;&gt;&amp;`?","title":"Get number from a string","body":"<p>I have this part of a html code:</p>\n<pre><code>&amp;quot;urn:li:fsd_jobPosting:3374616185&amp;\n</code></pre>\n<p>In my case I have this String expression which is found many times into html table rows but with different number.</p>\n<p>For example is it possible to get the number based on a expression for example <code>&amp;quot;urn:li:fsd_jobPosting:&lt;&gt;&amp;</code>?</p>\n"},{"tags":["java","jenkins-pipeline","sonarqube","sonarscanner"],"owner":{"account_id":13125667,"reputation":1604,"user_id":9481731,"display_name":"AhmFM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":560,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671054202,"creation_date":1671054202,"question_id":74804472,"body_markdown":"Team,\r\nmy same steps locally from MacBook work fine and when I built the same in shell script and invoked from Jenkins pipeline I get this error. any hint is it permission related because am setting Jenkins as USER in docker file? or is it bug? no clue. any hint?\r\n\r\n`sonar-scanner ${SONAR_PROJECT_KEY} ${CODE_PATH} ${SONAR_HOST_URL} ${SONAR_TOKEN} ${SONAR_PROJECT_NAME}`\r\n\r\n```\r\necho &quot;Running Sonar Setup&quot;\r\nRunning Sonar Setup\r\nsonar-scanner --version\r\nINFO: Scanner configuration file: /opt/sonar-scanner/conf/sonar-scanner.properties\r\nINFO: Project root configuration file: NONE\r\nINFO: SonarScanner 4.7.0.2747\r\nINFO: Java 11.0.14.1 Eclipse Adoptium (64-bit)\r\nINFO: Linux 5.4.0-65-generic amd64\r\n```\r\n\r\nJenkins log\r\n```\r\nINFO: Scanner configuration file: /opt/sonar-scanner/conf/sonar-scanner.properties\r\nINFO: Project root configuration file: NONE\r\nINFO: SonarScanner 4.7.0.2747\r\nINFO: Java 11.0.14.1 Eclipse Adoptium (64-bit)\r\nINFO: Linux 5.4.0-65-generic amd64\r\nINFO: User cache: /home/jenkins/.sonar/cache\r\nINFO: Scanner configuration file: /opt/sonar-scanner/conf/sonar-scanner.properties\r\nINFO: Project root configuration file: NONE\r\nINFO: Analyzing on SonarQube server 9.2.4\r\nINFO: Default locale: &quot;en_US&quot;, source code encoding: &quot;US-ASCII&quot; (analysis is platform dependent)\r\nINFO: Load global settings\r\nINFO: Load global settings (done) | time=537ms\r\nINFO: Server id: C00CED92-AWlyCvw4VSvNnYFw3U2r\r\nINFO: User cache: /home/jenkins/.sonar/cache\r\nINFO: Load/download plugins\r\nINFO: Load plugins index\r\nINFO: Load plugins index (done) | time=243ms\r\nINFO: Load/download plugins (done) | time=40489ms\r\nINFO: Loaded core extensions: developer-scanner\r\nINFO: Process project properties\r\nINFO: Process project properties (done) | time=6ms\r\nINFO: Execute project builders\r\nINFO: Execute project builders (done) | time=1ms\r\nINFO: Project key: AIgroup_product_Main\r\nINFO: Base dir: /home/jenkins/agent/workspace/product/code-coverage-WIP\r\nINFO: Working dir: /home/jenkins/agent/workspace/product/code-coverage-WIP/.scannerwork\r\nINFO: Load project settings for component key: &#39;AIgroup_product_Main&#39;\r\nINFO: Load project settings for component key: &#39;AIgroup_product_Main&#39; (done) | time=222ms\r\nINFO: Load project branches\r\nINFO: Load project branches (done) | time=217ms\r\nINFO: Load project pull requests\r\nINFO: Load project pull requests (done) | time=214ms\r\nINFO: Load branch configuration\r\nINFO: Load branch configuration (done) | time=1ms\r\nINFO: Auto-configuring with CI &#39;Jenkins&#39;\r\nINFO: Load quality profiles\r\nINFO: Load quality profiles (done) | time=450ms\r\nINFO: Auto-configuring with CI &#39;Jenkins&#39;\r\nINFO: Load active rules\r\nINFO: Load active rules (done) | time=8916ms\r\nINFO: Indexing files...\r\nINFO: Project configuration:\r\nINFO: 49659 files indexed...  (last one was bazel-code-coverage-WIP/src/ui/labeling/apps/mapgt-validator/src/app/routed/jobs/job/job.component.ts)\r\nINFO: Load project repositories\r\nINFO: Load project repositories (done) | time=218ms\r\nINFO: 86490 files indexed...  (last one was bazel-code-coverage-WIP/external/com_github_gogo_protobuf/protoc-gen-gogo/Makefile)\r\nWARN: Invalid character encountered in file /home/jenkins/agent/workspace/product/code-coverage-WIP/bazel-code-coverage-WIP/external/com_google_protobuf/php/src/GPBMetadata/Google/Protobuf/Type.php at line 21 for encoding US-ASCII. Please fix file content or configure the encoding to be used using property &#39;sonar.sourceEncoding&#39;.\r\nWARN: Invalid character encountered in file /home/jenkins/agent/workspace/product/code-coverage-WIP/bazel-code-coverage-WIP/external/com_google_protobuf/php/src/GPBMetadata/Google/Protobuf/Api.php at line 21 for encoding US-ASCII. Please fix file content or configure the encoding to be used using property &#39;sonar.sourceEncoding&#39;.\r\nINFO: 125923 files indexed...  (last one was bazel-code-coverage-WIP/devops/terraform/live/product-sjc4/product-dev0-sjc4.nonprod-nvkong.com/modules/hl-accessmanagement/rds.tf)\r\nINFO: 152919 files indexed...  (last one was bazel-code-coverage-WIP/bazel-out/host/bin/external/bazel_tools/tools/build_defs/hash/sha256.runfiles/product/external/python3_9_x86_64-unknown-linux-gnu/lib/python3.9/lib2to3/fixes/fix_funcattrs.py)\r\nINFO: 188294 files indexed...  (last one was bazel-out/host/bin/external/bazel_tools/tools/build_defs/hash/sha256.runfiles/product/external/python3_9_x86_64-unknown-linux-gnu/lib/python3.9/site-packages/pip/_vendor/distlib/locators.py)\r\nINFO: 192531 files indexed\r\nINFO: Quality profile for c: Sonar way\r\nINFO: Quality profile for cpp: Sonar way\r\nINFO: Quality profile for cs: Sonar way\r\nINFO: Quality profile for css: Sonar way\r\nINFO: Quality profile for go: Sonar way\r\nINFO: Quality profile for java: Sonar way\r\nINFO: Quality profile for js: Sonar way\r\nINFO: Quality profile for json: Sonar way\r\nINFO: Quality profile for kotlin: Sonar way\r\nINFO: Quality profile for objc: Sonar way\r\nINFO: Quality profile for php: Sonar way\r\nINFO: Quality profile for plsql: Sonar way\r\nINFO: Quality profile for py: Sonar way\r\nINFO: Quality profile for ruby: Sonar way\r\nINFO: Quality profile for scala: Sonar way\r\nINFO: Quality profile for swift: Sonar way\r\nINFO: Quality profile for terraform: Sonar way\r\nINFO: Quality profile for ts: Sonar way\r\nINFO: Quality profile for web: Sonar way\r\nINFO: Quality profile for xml: Sonar way\r\nINFO: Quality profile for yaml: Sonar way\r\nINFO: ------------- Run sensors on module AIgroup_product_Main_Project\r\nINFO: Load metrics repository\r\nINFO: ------------------------------------------------------------------------\r\nINFO: EXECUTION FAILURE\r\nINFO: ------------------------------------------------------------------------\r\nINFO: Total time: 2:44.377s\r\nINFO: Final Memory: 8M/120M\r\nINFO: ------------------------------------------------------------------------\r\nERROR: Error during SonarScanner execution\r\njava.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.ModuleSensorsExecutor\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:678)\r\n\tat org.sonar.core.platform.ComponentContainer.getComponentByType(ComponentContainer.java:282)\r\n\tat org.sonar.scanner.scan.ModuleScanContainer.doAfterStart(ModuleScanContainer.java:79)\r\n\tat org.sonar.core.platform.ComponentContainer.startComponents(ComponentContainer.java:137)\r\n\tat org.sonar.core.platform.ComponentContainer.execute(ComponentContainer.java:123)\r\n\tat org.sonar.scanner.scan.ProjectScanContainer.scan(ProjectScanContainer.java:384)\r\n\tat org.sonar.scanner.scan.ProjectScanContainer.scanRecursively(ProjectScanContainer.java:380)\r\n\tat org.sonar.scanner.scan.ProjectScanContainer.doAfterStart(ProjectScanContainer.java:349)\r\n\tat org.sonar.core.platform.ComponentContainer.startComponents(ComponentContainer.java:137)\r\n\tat org.sonar.core.platform.ComponentContainer.execute(ComponentContainer.java:123)\r\n\tat org.sonar.scanner.bootstrap.GlobalContainer.doAfterStart(GlobalContainer.java:136)\r\n\tat org.sonar.core.platform.ComponentContainer.startComponents(ComponentContainer.java:137)\r\n\tat org.sonar.core.platform.ComponentContainer.execute(ComponentContainer.java:123)\r\n\tat org.sonar.batch.bootstrapper.Batch.doExecute(Batch.java:72)\r\n\tat org.sonar.batch.bootstrapper.Batch.execute(Batch.java:66)\r\n\tat org.sonarsource.scanner.api.internal.batch.BatchIsolatedLauncher.execute(BatchIsolatedLauncher.java:46)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.sonarsource.scanner.api.internal.IsolatedLauncherProxy.invoke(IsolatedLauncherProxy.java:60)\r\n\tat com.sun.proxy.$Proxy0.execute(Unknown Source)\r\n\tat org.sonarsource.scanner.api.EmbeddedScanner.doExecute(EmbeddedScanner.java:189)\r\n\tat org.sonarsource.scanner.api.EmbeddedScanner.execute(EmbeddedScanner.java:138)\r\n\tat org.sonarsource.scanner.cli.Main.execute(Main.java:112)\r\n\tat org.sonarsource.scanner.cli.Main.execute(Main.java:75)\r\n\tat org.sonarsource.scanner.cli.Main.main(Main.java:61)\r\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.ModuleSensorExtensionDictionnary\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\r\n\tat org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\r\n\tat org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\r\n\tat org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\r\n\tat org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\r\n\tat org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\r\n\tat org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\r\n\tat org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\r\n\tat org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\r\n\tat org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\r\n\tat org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\r\n\tat org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\r\n\t... 27 more\r\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.ModuleSensorContext\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\r\n\tat org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\r\n\tat org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\r\n\tat org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\r\n\tat org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\r\n\tat org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\r\n\tat org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\r\n\tat org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\r\n\tat org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\r\n\tat org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\r\n\tat org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\r\n\tat org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\r\n\t... 41 more\r\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.DefaultSensorStorage\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\r\n\tat org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\r\n\tat org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\r\n\tat org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\r\n\tat org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\r\n\tat org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\r\n\tat org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\r\n\tat org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\r\n\tat org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\r\n\tat org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\r\n\tat org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\r\n\tat org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\r\n\t... 55 more\r\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.DefaultSensorStorage\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:621)\r\n\tat org.picocontainer.containers.ImmutablePicoContainer.getComponent(ImmutablePicoContainer.java:40)\r\n\tat org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:718)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\r\n\t... 69 more\r\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.scan.measure.DefaultMetricFinder\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\r\n\tat org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\r\n\tat org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\r\n\tat org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\r\n\tat org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\r\n\tat org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\r\n\tat org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\r\n\tat org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\r\n\tat org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\r\n\tat org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\r\n\tat org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\r\n\tat org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\r\n\t... 74 more\r\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.repository.MetricsRepository\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\r\n\tat org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\r\n\tat org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\r\n\tat org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\r\n\tat org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\r\n\tat org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\r\n\tat org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\r\n\tat org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\r\n\tat org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\r\n\tat org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\r\n\tat org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\r\n\tat org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\r\n\t... 88 more\r\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.repository.MetricsRepository\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:621)\r\n\tat org.picocontainer.containers.ImmutablePicoContainer.getComponent(ImmutablePicoContainer.java:40)\r\n\tat org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:718)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\r\n\t... 102 more\r\nCaused by: java.lang.IllegalStateException: Unable to load metrics\r\n\tat org.sonar.scanner.repository.DefaultMetricsRepositoryLoader.load(DefaultMetricsRepositoryLoader.java:47)\r\n\tat org.sonar.scanner.repository.MetricsRepositoryProvider.provide(MetricsRepositoryProvider.java:36)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.picocontainer.injectors.MethodInjector.invokeMethod(MethodInjector.java:129)\r\n\tat org.picocontainer.injectors.MethodInjector.access$000(MethodInjector.java:39)\r\n\tat org.picocontainer.injectors.MethodInjector$2.run(MethodInjector.java:113)\r\n\tat org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\r\n\tat org.picocontainer.injectors.MethodInjector.decorateComponentInstance(MethodInjector.java:120)\r\n\tat org.picocontainer.injectors.CompositeInjector.decorateComponentInstance(CompositeInjector.java:58)\r\n\tat org.picocontainer.injectors.Reinjector.reinject(Reinjector.java:142)\r\n\tat org.picocontainer.injectors.ProviderAdapter.getComponentInstance(ProviderAdapter.java:96)\r\n\tat org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\r\n\tat org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\r\n\tat org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\r\n\t... 107 more\r\nCaused by: java.lang.IllegalStateException: Fail to request url: http://sonar.company.com:9119/api/metrics/search?ps=500&amp;p=1\r\n\tat org.sonarqube.ws.client.HttpConnector.doCall(HttpConnector.java:205)\r\n\tat org.sonarqube.ws.client.HttpConnector.get(HttpConnector.java:124)\r\n\tat org.sonarqube.ws.client.HttpConnector.call(HttpConnector.java:111)\r\n\tat org.sonar.scanner.bootstrap.DefaultScannerWsClient.call(DefaultScannerWsClient.java:73)\r\n\tat org.sonar.scanner.repository.DefaultMetricsRepositoryLoader.loadFromPaginatedWs(DefaultMetricsRepositoryLoader.java:57)\r\n\tat org.sonar.scanner.repository.DefaultMetricsRepositoryLoader.load(DefaultMetricsRepositoryLoader.java:45)\r\n\t... 123 more\r\nCaused by: java.net.SocketTimeoutException: timeout\r\n\tat okio.SocketAsyncTimeout.newTimeoutException(JvmOkio.kt:143)\r\n\tat okio.AsyncTimeout.access$newTimeoutException(AsyncTimeout.kt:162)\r\n\tat okio.AsyncTimeout$source$1.read(AsyncTimeout.kt:335)\r\n\tat okio.RealBufferedSource.indexOf(RealBufferedSource.kt:427)\r\n\tat okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.kt:320)\r\n\tat okhttp3.internal.http1.HeadersReader.readLine(HeadersReader.kt:29)\r\n\tat okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.kt:178)\r\n\tat okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.kt:106)\r\n\tat okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.kt:79)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat org.sonarqube.ws.client.OkHttpClientBuilder.addHeaders(OkHttpClientBuilder.java:222)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:34)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\r\n\tat okhttp3.internal.connection.RealCall.execute(RealCall.kt:154)\r\n\tat org.sonarqube.ws.client.HttpConnector.doCall(HttpConnector.java:203)\r\n\t... 128 more\r\nCaused by: java.net.SocketException: Socket closed\r\n\tat java.base/java.net.SocketInputStream.read(Unknown Source)\r\n\tat java.base/java.net.SocketInputStream.read(Unknown Source)\r\n\tat okio.InputStreamSource.read(JvmOkio.kt:90)\r\n\tat okio.AsyncTimeout$source$1.read(AsyncTimeout.kt:129)\r\n\t... 148 more\r\nERROR: \r\nERROR: Re-run SonarScanner using the -X switch to enable full debug logging.\r\n[Pipeline] }\r\n```\r\n\r\nDOCKERFILE running this\r\n```\r\nFROM ubuntu:20.04\r\nENV DEBIAN_FRONTEND=noninteractive\r\nRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\\r\n  build-essential \\\r\n  ca-certificates \\\r\n  curl \\\r\n  dnsutils \\\r\n  g++ \\\r\n  gcc \\\r\n  git \\\r\n  openjdk-11-jdk-headless \\\r\n  python \\\r\n  python-dev \\\r\n  python-pkg-resources \\\r\n  python-setuptools \\\r\n  python3 \\\r\n  python3-dev \\\r\n  python3-pip \\\r\n  python3-pkg-resources \\\r\n  python3-setuptools \\\r\n  software-properties-common \\\r\n  unzip \\\r\n  wget \\\r\n  zip \\\r\n  zlib1g-dev \\\r\n  &amp;&amp; rm -rf /var/lib/apt/lists/* &amp;&amp; apt-get clean\r\n\r\nRUN mkdir /downloads/sonarqube -p\r\nRUN cd /downloads/sonarqube \r\nRUN wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.7.0.2747-linux.zip\r\nRUN unzip sonar-scanner-cli-4.7.0.2747-linux.zip\r\nRUN mv sonar-scanner-4.7.0.2747-linux /opt/sonar-scanner\r\nENV PATH=&quot;$PATH:/opt/sonar-scanner/bin&quot;\r\nRUN rm /sonar-scanner-cli-4.7.0.2747-linux.zip\r\nRUN useradd -ms /bin/bash jenkins\r\nUSER jenkins\r\nWORKDIR /home/jenkins\r\n```\r\n","title":"sonar scanner error &quot;Unable to load component class org.sonar.scanner.sensor.ModuleSensorsExecutor&quot;","body":"<p>Team,\nmy same steps locally from MacBook work fine and when I built the same in shell script and invoked from Jenkins pipeline I get this error. any hint is it permission related because am setting Jenkins as USER in docker file? or is it bug? no clue. any hint?</p>\n<p><code>sonar-scanner ${SONAR_PROJECT_KEY} ${CODE_PATH} ${SONAR_HOST_URL} ${SONAR_TOKEN} ${SONAR_PROJECT_NAME}</code></p>\n<pre><code>echo &quot;Running Sonar Setup&quot;\nRunning Sonar Setup\nsonar-scanner --version\nINFO: Scanner configuration file: /opt/sonar-scanner/conf/sonar-scanner.properties\nINFO: Project root configuration file: NONE\nINFO: SonarScanner 4.7.0.2747\nINFO: Java 11.0.14.1 Eclipse Adoptium (64-bit)\nINFO: Linux 5.4.0-65-generic amd64\n</code></pre>\n<p>Jenkins log</p>\n<pre><code>INFO: Scanner configuration file: /opt/sonar-scanner/conf/sonar-scanner.properties\nINFO: Project root configuration file: NONE\nINFO: SonarScanner 4.7.0.2747\nINFO: Java 11.0.14.1 Eclipse Adoptium (64-bit)\nINFO: Linux 5.4.0-65-generic amd64\nINFO: User cache: /home/jenkins/.sonar/cache\nINFO: Scanner configuration file: /opt/sonar-scanner/conf/sonar-scanner.properties\nINFO: Project root configuration file: NONE\nINFO: Analyzing on SonarQube server 9.2.4\nINFO: Default locale: &quot;en_US&quot;, source code encoding: &quot;US-ASCII&quot; (analysis is platform dependent)\nINFO: Load global settings\nINFO: Load global settings (done) | time=537ms\nINFO: Server id: C00CED92-AWlyCvw4VSvNnYFw3U2r\nINFO: User cache: /home/jenkins/.sonar/cache\nINFO: Load/download plugins\nINFO: Load plugins index\nINFO: Load plugins index (done) | time=243ms\nINFO: Load/download plugins (done) | time=40489ms\nINFO: Loaded core extensions: developer-scanner\nINFO: Process project properties\nINFO: Process project properties (done) | time=6ms\nINFO: Execute project builders\nINFO: Execute project builders (done) | time=1ms\nINFO: Project key: AIgroup_product_Main\nINFO: Base dir: /home/jenkins/agent/workspace/product/code-coverage-WIP\nINFO: Working dir: /home/jenkins/agent/workspace/product/code-coverage-WIP/.scannerwork\nINFO: Load project settings for component key: 'AIgroup_product_Main'\nINFO: Load project settings for component key: 'AIgroup_product_Main' (done) | time=222ms\nINFO: Load project branches\nINFO: Load project branches (done) | time=217ms\nINFO: Load project pull requests\nINFO: Load project pull requests (done) | time=214ms\nINFO: Load branch configuration\nINFO: Load branch configuration (done) | time=1ms\nINFO: Auto-configuring with CI 'Jenkins'\nINFO: Load quality profiles\nINFO: Load quality profiles (done) | time=450ms\nINFO: Auto-configuring with CI 'Jenkins'\nINFO: Load active rules\nINFO: Load active rules (done) | time=8916ms\nINFO: Indexing files...\nINFO: Project configuration:\nINFO: 49659 files indexed...  (last one was bazel-code-coverage-WIP/src/ui/labeling/apps/mapgt-validator/src/app/routed/jobs/job/job.component.ts)\nINFO: Load project repositories\nINFO: Load project repositories (done) | time=218ms\nINFO: 86490 files indexed...  (last one was bazel-code-coverage-WIP/external/com_github_gogo_protobuf/protoc-gen-gogo/Makefile)\nWARN: Invalid character encountered in file /home/jenkins/agent/workspace/product/code-coverage-WIP/bazel-code-coverage-WIP/external/com_google_protobuf/php/src/GPBMetadata/Google/Protobuf/Type.php at line 21 for encoding US-ASCII. Please fix file content or configure the encoding to be used using property 'sonar.sourceEncoding'.\nWARN: Invalid character encountered in file /home/jenkins/agent/workspace/product/code-coverage-WIP/bazel-code-coverage-WIP/external/com_google_protobuf/php/src/GPBMetadata/Google/Protobuf/Api.php at line 21 for encoding US-ASCII. Please fix file content or configure the encoding to be used using property 'sonar.sourceEncoding'.\nINFO: 125923 files indexed...  (last one was bazel-code-coverage-WIP/devops/terraform/live/product-sjc4/product-dev0-sjc4.nonprod-nvkong.com/modules/hl-accessmanagement/rds.tf)\nINFO: 152919 files indexed...  (last one was bazel-code-coverage-WIP/bazel-out/host/bin/external/bazel_tools/tools/build_defs/hash/sha256.runfiles/product/external/python3_9_x86_64-unknown-linux-gnu/lib/python3.9/lib2to3/fixes/fix_funcattrs.py)\nINFO: 188294 files indexed...  (last one was bazel-out/host/bin/external/bazel_tools/tools/build_defs/hash/sha256.runfiles/product/external/python3_9_x86_64-unknown-linux-gnu/lib/python3.9/site-packages/pip/_vendor/distlib/locators.py)\nINFO: 192531 files indexed\nINFO: Quality profile for c: Sonar way\nINFO: Quality profile for cpp: Sonar way\nINFO: Quality profile for cs: Sonar way\nINFO: Quality profile for css: Sonar way\nINFO: Quality profile for go: Sonar way\nINFO: Quality profile for java: Sonar way\nINFO: Quality profile for js: Sonar way\nINFO: Quality profile for json: Sonar way\nINFO: Quality profile for kotlin: Sonar way\nINFO: Quality profile for objc: Sonar way\nINFO: Quality profile for php: Sonar way\nINFO: Quality profile for plsql: Sonar way\nINFO: Quality profile for py: Sonar way\nINFO: Quality profile for ruby: Sonar way\nINFO: Quality profile for scala: Sonar way\nINFO: Quality profile for swift: Sonar way\nINFO: Quality profile for terraform: Sonar way\nINFO: Quality profile for ts: Sonar way\nINFO: Quality profile for web: Sonar way\nINFO: Quality profile for xml: Sonar way\nINFO: Quality profile for yaml: Sonar way\nINFO: ------------- Run sensors on module AIgroup_product_Main_Project\nINFO: Load metrics repository\nINFO: ------------------------------------------------------------------------\nINFO: EXECUTION FAILURE\nINFO: ------------------------------------------------------------------------\nINFO: Total time: 2:44.377s\nINFO: Final Memory: 8M/120M\nINFO: ------------------------------------------------------------------------\nERROR: Error during SonarScanner execution\njava.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.ModuleSensorsExecutor\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:678)\n    at org.sonar.core.platform.ComponentContainer.getComponentByType(ComponentContainer.java:282)\n    at org.sonar.scanner.scan.ModuleScanContainer.doAfterStart(ModuleScanContainer.java:79)\n    at org.sonar.core.platform.ComponentContainer.startComponents(ComponentContainer.java:137)\n    at org.sonar.core.platform.ComponentContainer.execute(ComponentContainer.java:123)\n    at org.sonar.scanner.scan.ProjectScanContainer.scan(ProjectScanContainer.java:384)\n    at org.sonar.scanner.scan.ProjectScanContainer.scanRecursively(ProjectScanContainer.java:380)\n    at org.sonar.scanner.scan.ProjectScanContainer.doAfterStart(ProjectScanContainer.java:349)\n    at org.sonar.core.platform.ComponentContainer.startComponents(ComponentContainer.java:137)\n    at org.sonar.core.platform.ComponentContainer.execute(ComponentContainer.java:123)\n    at org.sonar.scanner.bootstrap.GlobalContainer.doAfterStart(GlobalContainer.java:136)\n    at org.sonar.core.platform.ComponentContainer.startComponents(ComponentContainer.java:137)\n    at org.sonar.core.platform.ComponentContainer.execute(ComponentContainer.java:123)\n    at org.sonar.batch.bootstrapper.Batch.doExecute(Batch.java:72)\n    at org.sonar.batch.bootstrapper.Batch.execute(Batch.java:66)\n    at org.sonarsource.scanner.api.internal.batch.BatchIsolatedLauncher.execute(BatchIsolatedLauncher.java:46)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at org.sonarsource.scanner.api.internal.IsolatedLauncherProxy.invoke(IsolatedLauncherProxy.java:60)\n    at com.sun.proxy.$Proxy0.execute(Unknown Source)\n    at org.sonarsource.scanner.api.EmbeddedScanner.doExecute(EmbeddedScanner.java:189)\n    at org.sonarsource.scanner.api.EmbeddedScanner.execute(EmbeddedScanner.java:138)\n    at org.sonarsource.scanner.cli.Main.execute(Main.java:112)\n    at org.sonarsource.scanner.cli.Main.execute(Main.java:75)\n    at org.sonarsource.scanner.cli.Main.main(Main.java:61)\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.ModuleSensorExtensionDictionnary\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\n    at org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\n    at org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\n    at org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\n    at org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\n    at org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\n    at org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\n    at org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\n    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\n    at org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\n    at org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\n    at org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\n    ... 27 more\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.ModuleSensorContext\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\n    at org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\n    at org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\n    at org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\n    at org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\n    at org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\n    at org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\n    at org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\n    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\n    at org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\n    at org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\n    at org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\n    ... 41 more\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.DefaultSensorStorage\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\n    at org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\n    at org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\n    at org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\n    at org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\n    at org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\n    at org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\n    at org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\n    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\n    at org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\n    at org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\n    at org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\n    ... 55 more\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.sensor.DefaultSensorStorage\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:621)\n    at org.picocontainer.containers.ImmutablePicoContainer.getComponent(ImmutablePicoContainer.java:40)\n    at org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:718)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\n    ... 69 more\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.scan.measure.DefaultMetricFinder\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\n    at org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\n    at org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\n    at org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\n    at org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\n    at org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\n    at org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\n    at org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\n    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\n    at org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\n    at org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\n    at org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\n    ... 74 more\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.repository.MetricsRepository\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:632)\n    at org.picocontainer.parameters.BasicComponentParameter$1.resolveInstance(BasicComponentParameter.java:118)\n    at org.picocontainer.parameters.ComponentParameter$1.resolveInstance(ComponentParameter.java:136)\n    at org.picocontainer.injectors.SingleMemberInjector.getParameter(SingleMemberInjector.java:78)\n    at org.picocontainer.injectors.ConstructorInjector$CtorAndAdapters.getParameterArguments(ConstructorInjector.java:309)\n    at org.picocontainer.injectors.ConstructorInjector$1.run(ConstructorInjector.java:335)\n    at org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\n    at org.picocontainer.injectors.ConstructorInjector.getComponentInstance(ConstructorInjector.java:364)\n    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.getComponentInstance(AbstractInjectionFactory.java:56)\n    at org.picocontainer.behaviors.AbstractBehavior.getComponentInstance(AbstractBehavior.java:64)\n    at org.picocontainer.behaviors.Stored.getComponentInstance(Stored.java:91)\n    at org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\n    ... 88 more\nCaused by: java.lang.IllegalStateException: Unable to load component class org.sonar.scanner.repository.MetricsRepository\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:66)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:621)\n    at org.picocontainer.containers.ImmutablePicoContainer.getComponent(ImmutablePicoContainer.java:40)\n    at org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:718)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\n    ... 102 more\nCaused by: java.lang.IllegalStateException: Unable to load metrics\n    at org.sonar.scanner.repository.DefaultMetricsRepositoryLoader.load(DefaultMetricsRepositoryLoader.java:47)\n    at org.sonar.scanner.repository.MetricsRepositoryProvider.provide(MetricsRepositoryProvider.java:36)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at org.picocontainer.injectors.MethodInjector.invokeMethod(MethodInjector.java:129)\n    at org.picocontainer.injectors.MethodInjector.access$000(MethodInjector.java:39)\n    at org.picocontainer.injectors.MethodInjector$2.run(MethodInjector.java:113)\n    at org.picocontainer.injectors.AbstractInjector$ThreadLocalCyclicDependencyGuard.observe(AbstractInjector.java:270)\n    at org.picocontainer.injectors.MethodInjector.decorateComponentInstance(MethodInjector.java:120)\n    at org.picocontainer.injectors.CompositeInjector.decorateComponentInstance(CompositeInjector.java:58)\n    at org.picocontainer.injectors.Reinjector.reinject(Reinjector.java:142)\n    at org.picocontainer.injectors.ProviderAdapter.getComponentInstance(ProviderAdapter.java:96)\n    at org.picocontainer.DefaultPicoContainer.getInstance(DefaultPicoContainer.java:699)\n    at org.picocontainer.DefaultPicoContainer.getComponent(DefaultPicoContainer.java:647)\n    at org.sonar.core.platform.ComponentContainer$ExtendedDefaultPicoContainer.getComponent(ComponentContainer.java:64)\n    ... 107 more\nCaused by: java.lang.IllegalStateException: Fail to request url: http://sonar.company.com:9119/api/metrics/search?ps=500&amp;p=1\n    at org.sonarqube.ws.client.HttpConnector.doCall(HttpConnector.java:205)\n    at org.sonarqube.ws.client.HttpConnector.get(HttpConnector.java:124)\n    at org.sonarqube.ws.client.HttpConnector.call(HttpConnector.java:111)\n    at org.sonar.scanner.bootstrap.DefaultScannerWsClient.call(DefaultScannerWsClient.java:73)\n    at org.sonar.scanner.repository.DefaultMetricsRepositoryLoader.loadFromPaginatedWs(DefaultMetricsRepositoryLoader.java:57)\n    at org.sonar.scanner.repository.DefaultMetricsRepositoryLoader.load(DefaultMetricsRepositoryLoader.java:45)\n    ... 123 more\nCaused by: java.net.SocketTimeoutException: timeout\n    at okio.SocketAsyncTimeout.newTimeoutException(JvmOkio.kt:143)\n    at okio.AsyncTimeout.access$newTimeoutException(AsyncTimeout.kt:162)\n    at okio.AsyncTimeout$source$1.read(AsyncTimeout.kt:335)\n    at okio.RealBufferedSource.indexOf(RealBufferedSource.kt:427)\n    at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.kt:320)\n    at okhttp3.internal.http1.HeadersReader.readLine(HeadersReader.kt:29)\n    at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.kt:178)\n    at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.kt:106)\n    at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.kt:79)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at org.sonarqube.ws.client.OkHttpClientBuilder.addHeaders(OkHttpClientBuilder.java:222)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:34)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n    at okhttp3.internal.connection.RealCall.execute(RealCall.kt:154)\n    at org.sonarqube.ws.client.HttpConnector.doCall(HttpConnector.java:203)\n    ... 128 more\nCaused by: java.net.SocketException: Socket closed\n    at java.base/java.net.SocketInputStream.read(Unknown Source)\n    at java.base/java.net.SocketInputStream.read(Unknown Source)\n    at okio.InputStreamSource.read(JvmOkio.kt:90)\n    at okio.AsyncTimeout$source$1.read(AsyncTimeout.kt:129)\n    ... 148 more\nERROR: \nERROR: Re-run SonarScanner using the -X switch to enable full debug logging.\n[Pipeline] }\n</code></pre>\n<p>DOCKERFILE running this</p>\n<pre><code>FROM ubuntu:20.04\nENV DEBIAN_FRONTEND=noninteractive\nRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\\n  build-essential \\\n  ca-certificates \\\n  curl \\\n  dnsutils \\\n  g++ \\\n  gcc \\\n  git \\\n  openjdk-11-jdk-headless \\\n  python \\\n  python-dev \\\n  python-pkg-resources \\\n  python-setuptools \\\n  python3 \\\n  python3-dev \\\n  python3-pip \\\n  python3-pkg-resources \\\n  python3-setuptools \\\n  software-properties-common \\\n  unzip \\\n  wget \\\n  zip \\\n  zlib1g-dev \\\n  &amp;&amp; rm -rf /var/lib/apt/lists/* &amp;&amp; apt-get clean\n\nRUN mkdir /downloads/sonarqube -p\nRUN cd /downloads/sonarqube \nRUN wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.7.0.2747-linux.zip\nRUN unzip sonar-scanner-cli-4.7.0.2747-linux.zip\nRUN mv sonar-scanner-4.7.0.2747-linux /opt/sonar-scanner\nENV PATH=&quot;$PATH:/opt/sonar-scanner/bin&quot;\nRUN rm /sonar-scanner-cli-4.7.0.2747-linux.zip\nRUN useradd -ms /bin/bash jenkins\nUSER jenkins\nWORKDIR /home/jenkins\n</code></pre>\n"},{"tags":["java","wordpress"],"answers":[{"tags":[],"owner":{"account_id":1168233,"reputation":3508,"user_id":1146032,"accept_rate":93,"display_name":"A_Elric"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640428474,"creation_date":1640428474,"answer_id":70479413,"question_id":70479412,"body_markdown":"You can upload an image file (of certain file types -- common image formats are enabled by default (full WP accepted upload formats list here: https://wordpress.com/support/accepted-filetypes/ )\r\n\r\nThe code I used to accomplish this is as follows: \r\n\r\n    import org.apache.http.HttpEntity;\r\n    import org.apache.http.HttpHeaders;\r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpPost;\r\n    import org.apache.http.entity.ContentType;\r\n    import org.apache.http.entity.mime.MultipartEntityBuilder;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.util.EntityUtils;\r\n\r\n            CloseableHttpClient httpClient = HttpClients.createDefault();\r\n            String encoded_cred = Base64.getEncoder().encodeToString((&quot;username:pw&quot;).getBytes());\r\n            String extension = &quot;&quot;;\r\n            String mime = &quot;&quot;;\r\n            String fileName = F.getName();\r\n            int i = fileName.lastIndexOf(&#39;.&#39;);\r\n            if (i &gt; 0) {\r\n                extension = fileName.substring(i + 1);\r\n            }\r\n            if (extension.equalsIgnoreCase(&quot;png&quot;)) {\r\n                mime = &quot;image/png&quot;;\r\n            }\r\n            if (extension.equalsIgnoreCase(&quot;jpeg&quot;)) {\r\n                mime = &quot;image/jpeg&quot;;\r\n            }\r\n        \r\n            //endpoint and entity\r\n            String uri = &quot;https://www.&lt;domain&gt;.com/wp-json/wp/v2/media&quot;;\r\n            HttpEntity entity = MultipartEntityBuilder.create()\r\n                    .addBinaryBody(&quot;file&quot;, new FileInputStream(F), ContentType.create(mime), fileName)\r\n                    .build();\r\n\r\n\r\n            //request and execution\r\n            HttpPost media = new HttpPost(uri);\r\n            media.setEntity(entity);\r\n            media.setHeader(HttpHeaders.AUTHORIZATION, &quot;Basic &quot; + encoded_cred);\r\n            CloseableHttpResponse response = httpClient.execute(media);\r\n            String resp = EntityUtils.toString(response.getEntity());\r\n\r\n\r\nMy pomfile used these, though versions aren&#39;t necessarily the same:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n            &lt;version&gt;4.5.13&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpmime&lt;/artifactId&gt;\r\n            &lt;version&gt;4.5.13&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;","title":"How do I upload an image to the wordpress media API using java","body":"<p>You can upload an image file (of certain file types -- common image formats are enabled by default (full WP accepted upload formats list here: <a href=\"https://wordpress.com/support/accepted-filetypes/\" rel=\"nofollow noreferrer\">https://wordpress.com/support/accepted-filetypes/</a> )</p>\n<p>The code I used to accomplish this is as follows:</p>\n<pre><code>import org.apache.http.HttpEntity;\nimport org.apache.http.HttpHeaders;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.entity.ContentType;\nimport org.apache.http.entity.mime.MultipartEntityBuilder;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.util.EntityUtils;\n\n        CloseableHttpClient httpClient = HttpClients.createDefault();\n        String encoded_cred = Base64.getEncoder().encodeToString((&quot;username:pw&quot;).getBytes());\n        String extension = &quot;&quot;;\n        String mime = &quot;&quot;;\n        String fileName = F.getName();\n        int i = fileName.lastIndexOf('.');\n        if (i &gt; 0) {\n            extension = fileName.substring(i + 1);\n        }\n        if (extension.equalsIgnoreCase(&quot;png&quot;)) {\n            mime = &quot;image/png&quot;;\n        }\n        if (extension.equalsIgnoreCase(&quot;jpeg&quot;)) {\n            mime = &quot;image/jpeg&quot;;\n        }\n    \n        //endpoint and entity\n        String uri = &quot;https://www.&lt;domain&gt;.com/wp-json/wp/v2/media&quot;;\n        HttpEntity entity = MultipartEntityBuilder.create()\n                .addBinaryBody(&quot;file&quot;, new FileInputStream(F), ContentType.create(mime), fileName)\n                .build();\n\n\n        //request and execution\n        HttpPost media = new HttpPost(uri);\n        media.setEntity(entity);\n        media.setHeader(HttpHeaders.AUTHORIZATION, &quot;Basic &quot; + encoded_cred);\n        CloseableHttpResponse response = httpClient.execute(media);\n        String resp = EntityUtils.toString(response.getEntity());\n</code></pre>\n<p>My pomfile used these, though versions aren't necessarily the same:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5.13&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpmime&lt;/artifactId&gt;\n        &lt;version&gt;4.5.13&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\n        &lt;version&gt;1.9&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1168233,"reputation":3508,"user_id":1146032,"accept_rate":93,"display_name":"A_Elric"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671053658,"creation_date":1655273401,"answer_id":72626600,"question_id":70479412,"body_markdown":"Answer 2: \r\n\r\nI revised this code to use java.net.http -- this works better if you need to make a modular application since apache commons has yet to implement app modules so you can&#39;t package without a big fuss.\r\n\r\n    public static long uploadFile(File f, int counter, int size){\r\n        String uri = &quot;https://www.YOURDOMAIN.com/wp-json/wp/v2/media&quot;;\r\n        String extension = &quot;&quot;;\r\n        String mime = &quot;&quot;;\r\n        String encoded_cred = Base64.getEncoder().encodeToString((&quot;ACCOUNT:PASSWORD&quot;).getBytes());\r\n        long mediaID = -1;\r\n        String fileName = f.getName();\r\n        int i = fileName.lastIndexOf(&#39;.&#39;);\r\n        if (i &gt; 0) {\r\n            extension = fileName.substring(i + 1);\r\n        }\r\n        if (extension.equalsIgnoreCase(&quot;png&quot;)) {\r\n            mime = &quot;image/png&quot;;\r\n        }\r\n        if (extension.equalsIgnoreCase(&quot;jpeg&quot;) || extension.equalsIgnoreCase(&quot;jpg&quot;)) {\r\n            mime = &quot;image/jpeg&quot;;\r\n        }\r\n        Path fp = f.toPath();\r\n        try {\r\n            HttpClient client = HttpClient.newHttpClient();\r\n            HttpRequest request = HttpRequest.newBuilder().uri(URI.create(uri))\r\n                    .POST(HttpRequest.BodyPublishers.ofFile(fp) )\r\n                    .headers(&quot;AUTHORIZATION&quot;, &quot;Basic &quot; + encoded_cred,\r\n                             &quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + f.getName(),\r\n                             &quot;Content-Type&quot;, mime\r\n                            )\r\n                    .build();\r\n            HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\n            System.out.println(response.body()); // output response body\r\n\r\n    }catch (Exception e){e.printStackTrace(); AppendLog.appendLog(&quot;Upload failed for file: &quot; + f.getName(), consoleLog);}\r\n\r\n        return mediaID;\r\n    }\r\n\r\n\r\nadditional implementation of upload button using Vaadin to get file for the uploadFile step:\r\n\r\n    import com.vaadin.flow.component.Component;\r\n    import com.vaadin.flow.component.html.Div;\r\n    import com.vaadin.flow.component.html.Image;\r\n    import com.vaadin.flow.component.html.Label;\r\n    import com.vaadin.flow.component.orderedlayout.FlexComponent;\r\n    import com.vaadin.flow.component.orderedlayout.HorizontalLayout;\r\n    import com.vaadin.flow.component.upload.Upload;\r\n    import com.vaadin.flow.component.upload.receivers.MultiFileMemoryBuffer;\r\n    import com.vaadin.flow.server.StreamResource;\r\n    import org.apache.commons.io.FileUtils;\r\n    \r\n    import java.io.*;\r\n    import java.util.ArrayList;\r\n    import java.util.Random;\r\n    \r\n    public class SetImages {\r\n        public static Component imageUpload(ArrayList&lt;File&gt; setImages, Div setHolder){\r\n            Random random = new Random();\r\n            var layout = new HorizontalLayout();\r\n            var label = new Label(&quot;Select set images&quot;);\r\n            MultiFileMemoryBuffer buffer = new MultiFileMemoryBuffer();\r\n            Upload upload = new Upload(buffer);\r\n            upload.addSucceededListener(event -&gt; {\r\n                String fileName = event.getFileName();\r\n                InputStream fileData = buffer.getInputStream(fileName);\r\n                int randFile = random.nextInt();\r\n                File f = null;\r\n                try {\r\n                    f = File.createTempFile(&quot;setimg-&quot; + randFile, &quot;.jpg&quot;);\r\n                }catch (IOException IE) {IE.printStackTrace();}\r\n                Image img = new Image(new StreamResource(f.getName(), () -&gt;{\r\n                    try{\r\n                        int rand = random.nextInt();\r\n                        File imageFile = File.createTempFile(&quot;setimg-&quot; + rand, &quot;.jpg&quot;);\r\n                        FileUtils.copyInputStreamToFile(fileData, imageFile);\r\n                        setImages.add(imageFile);\r\n                        return new FileInputStream(imageFile);\r\n                    } catch (IOException fnf){fnf.printStackTrace();}\r\n                    return null;\r\n                }), &quot;alt text&quot;);\r\n                img.setWidth(&quot;250px&quot;);\r\n                img.setHeight(&quot;400px&quot;);\r\n                setHolder.add(img);\r\n            });\r\n            layout.setAlignItems(FlexComponent.Alignment.CENTER);\r\n            layout.add(label, upload);\r\n            return layout;\r\n        }\r\n    }\r\n","title":"How do I upload an image to the wordpress media API using java","body":"<p>Answer 2:</p>\n<p>I revised this code to use java.net.http -- this works better if you need to make a modular application since apache commons has yet to implement app modules so you can't package without a big fuss.</p>\n<pre><code>public static long uploadFile(File f, int counter, int size){\n    String uri = &quot;https://www.YOURDOMAIN.com/wp-json/wp/v2/media&quot;;\n    String extension = &quot;&quot;;\n    String mime = &quot;&quot;;\n    String encoded_cred = Base64.getEncoder().encodeToString((&quot;ACCOUNT:PASSWORD&quot;).getBytes());\n    long mediaID = -1;\n    String fileName = f.getName();\n    int i = fileName.lastIndexOf('.');\n    if (i &gt; 0) {\n        extension = fileName.substring(i + 1);\n    }\n    if (extension.equalsIgnoreCase(&quot;png&quot;)) {\n        mime = &quot;image/png&quot;;\n    }\n    if (extension.equalsIgnoreCase(&quot;jpeg&quot;) || extension.equalsIgnoreCase(&quot;jpg&quot;)) {\n        mime = &quot;image/jpeg&quot;;\n    }\n    Path fp = f.toPath();\n    try {\n        HttpClient client = HttpClient.newHttpClient();\n        HttpRequest request = HttpRequest.newBuilder().uri(URI.create(uri))\n                .POST(HttpRequest.BodyPublishers.ofFile(fp) )\n                .headers(&quot;AUTHORIZATION&quot;, &quot;Basic &quot; + encoded_cred,\n                         &quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + f.getName(),\n                         &quot;Content-Type&quot;, mime\n                        )\n                .build();\n        HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\n        System.out.println(response.body()); // output response body\n\n}catch (Exception e){e.printStackTrace(); AppendLog.appendLog(&quot;Upload failed for file: &quot; + f.getName(), consoleLog);}\n\n    return mediaID;\n}\n</code></pre>\n<p>additional implementation of upload button using Vaadin to get file for the uploadFile step:</p>\n<pre><code>import com.vaadin.flow.component.Component;\nimport com.vaadin.flow.component.html.Div;\nimport com.vaadin.flow.component.html.Image;\nimport com.vaadin.flow.component.html.Label;\nimport com.vaadin.flow.component.orderedlayout.FlexComponent;\nimport com.vaadin.flow.component.orderedlayout.HorizontalLayout;\nimport com.vaadin.flow.component.upload.Upload;\nimport com.vaadin.flow.component.upload.receivers.MultiFileMemoryBuffer;\nimport com.vaadin.flow.server.StreamResource;\nimport org.apache.commons.io.FileUtils;\n\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.Random;\n\npublic class SetImages {\n    public static Component imageUpload(ArrayList&lt;File&gt; setImages, Div setHolder){\n        Random random = new Random();\n        var layout = new HorizontalLayout();\n        var label = new Label(&quot;Select set images&quot;);\n        MultiFileMemoryBuffer buffer = new MultiFileMemoryBuffer();\n        Upload upload = new Upload(buffer);\n        upload.addSucceededListener(event -&gt; {\n            String fileName = event.getFileName();\n            InputStream fileData = buffer.getInputStream(fileName);\n            int randFile = random.nextInt();\n            File f = null;\n            try {\n                f = File.createTempFile(&quot;setimg-&quot; + randFile, &quot;.jpg&quot;);\n            }catch (IOException IE) {IE.printStackTrace();}\n            Image img = new Image(new StreamResource(f.getName(), () -&gt;{\n                try{\n                    int rand = random.nextInt();\n                    File imageFile = File.createTempFile(&quot;setimg-&quot; + rand, &quot;.jpg&quot;);\n                    FileUtils.copyInputStreamToFile(fileData, imageFile);\n                    setImages.add(imageFile);\n                    return new FileInputStream(imageFile);\n                } catch (IOException fnf){fnf.printStackTrace();}\n                return null;\n            }), &quot;alt text&quot;);\n            img.setWidth(&quot;250px&quot;);\n            img.setHeight(&quot;400px&quot;);\n            setHolder.add(img);\n        });\n        layout.setAlignItems(FlexComponent.Alignment.CENTER);\n        layout.add(label, upload);\n        return layout;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1168233,"reputation":3508,"user_id":1146032,"accept_rate":93,"display_name":"A_Elric"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1300,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70479413,"answer_count":2,"score":1,"last_activity_date":1671053847,"creation_date":1640428474,"question_id":70479412,"body_markdown":"How do I upload an image to the wordpress API using java?  The Rest API is path is wp-json/wp/v2/media","title":"How do I upload an image to the wordpress media API using java","body":"<p>How do I upload an image to the wordpress API using java?  The Rest API is path is wp-json/wp/v2/media</p>\n"},{"tags":["java","concurrency","parallel-processing"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1670950892,"post_id":74785628,"comment_id":131989639,"body_markdown":"Using wait and notify is generally a code smell, and it doesn&#39;t really seem to be helping here.  I would expect a ConcurrentMap of video names/IDs to jobs.","body":"Using wait and notify is generally a code smell, and it doesn&#39;t really seem to be helping here.  I would expect a ConcurrentMap of video names/IDs to jobs."},{"owner":{"account_id":19939538,"reputation":3,"user_id":14611526,"display_name":"Henry FXP"},"score":0,"creation_date":1671051234,"post_id":74785628,"comment_id":132016711,"body_markdown":"Exactly, that will solve the issue, the problem. The wait and notify is for other purposes, or at least thats how it is intended to be. How can I save video contained in every job into a ConcurrentMap and then check if another new job is trying to place its own video in the jobs queue?","body":"Exactly, that will solve the issue, the problem. The wait and notify is for other purposes, or at least thats how it is intended to be. How can I save video contained in every job into a ConcurrentMap and then check if another new job is trying to place its own video in the jobs queue?"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1671055670,"post_id":74785628,"comment_id":132017891,"body_markdown":"Use `putIfAbsent` on the map with the video key.  If and only if it succeeds by returning null, the current task &quot;wins the race&quot; and should be responsible for enqueuing the job for that video.","body":"Use <code>putIfAbsent</code> on the map with the video key.  If and only if it succeeds by returning null, the current task &quot;wins the race&quot; and should be responsible for enqueuing the job for that video."}],"owner":{"account_id":19939538,"reputation":3,"user_id":14611526,"display_name":"Henry FXP"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671053422,"creation_date":1670938071,"question_id":74785628,"body_markdown":"I need to process Video, which is an object inside a Job object.There can only be one Job per original video. When a Video is processed, it is saved as another Video object inside that Job.       I want to be able to detect whether that Video is already being processed:\r\nIf it is:\r\n- It must not add it to the queue\r\n- Once the original Video is processed, the processed video must be sent to all who added or tried to add that same Video\r\n\r\nIf it is not:\r\n- Add it to the queue\r\n\r\n\r\n```\r\npublic class Job {\r\n\tprivate Video o_video;\r\n\tprivate Video coded_video;\r\n\t\r\n\tpublic Job(Video v) {\r\n\t\to_video = v;\r\n\t\tcoded_video = null;\r\n\t}\r\n\t\r\n\tpublic Video extractOriginal() {\r\n\t\treturn o_video;\r\n\t}\r\n\tpublic void addCodedVideo(Video vCod) {\r\n\t\tsynchronized(this) {\r\n\t\t\tcoded_video = vCod;\r\n\t\t\tthis.notifyAll();\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\tpublic Video extractCodedVideo() throws InterruptedException {\r\n\t\tsynchronized(this) {\r\n\t\t\twhile(coded_video ==null) {\r\n\t\t\t\tthis.wait();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn coded_video;\r\n\t}\r\n}\r\n```","title":"How can I check if a Value exists in a Concurrent Array/Map/List of Objects in order to prevent adding and link new to the existing one","body":"<p>I need to process Video, which is an object inside a Job object.There can only be one Job per original video. When a Video is processed, it is saved as another Video object inside that Job.       I want to be able to detect whether that Video is already being processed:\nIf it is:</p>\n<ul>\n<li>It must not add it to the queue</li>\n<li>Once the original Video is processed, the processed video must be sent to all who added or tried to add that same Video</li>\n</ul>\n<p>If it is not:</p>\n<ul>\n<li>Add it to the queue</li>\n</ul>\n<pre><code>public class Job {\n    private Video o_video;\n    private Video coded_video;\n    \n    public Job(Video v) {\n        o_video = v;\n        coded_video = null;\n    }\n    \n    public Video extractOriginal() {\n        return o_video;\n    }\n    public void addCodedVideo(Video vCod) {\n        synchronized(this) {\n            coded_video = vCod;\n            this.notifyAll();\n        }\n        return;\n    }\n    public Video extractCodedVideo() throws InterruptedException {\n        synchronized(this) {\n            while(coded_video ==null) {\n                this.wait();\n            }\n        }\n        return coded_video;\n    }\n}\n</code></pre>\n"},{"tags":["java","encryption","keystore"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1671053289,"post_id":74804307,"comment_id":132017265,"body_markdown":"To decrypt it you must supply the correct password. What else is there to say?","body":"To decrypt it you must supply the correct password. What else is there to say?"},{"owner":{"account_id":1626304,"reputation":169369,"user_id":1501794,"accept_rate":72,"display_name":"Rahul Tripathi"},"score":1,"creation_date":1671053391,"post_id":74804307,"comment_id":132017293,"body_markdown":"Do check if you have a non-ASCII character in the password. If you are using openssl then it can handle that, keypass can&#39;t.","body":"Do check if you have a non-ASCII character in the password. If you are using openssl then it can handle that, keypass can&#39;t."},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1671053722,"post_id":74804307,"comment_id":132017383,"body_markdown":"[Run John the Ripper to recover password](https://stackoverflow.com/q/53547386/238704).","body":"<a href=\"https://stackoverflow.com/q/53547386/238704\">Run John the Ripper to recover password</a>."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1671065342,"post_id":74804307,"comment_id":132019895,"body_markdown":"Was this PKCS12 created using OpenSSL 3.0.x, and are you running on Java below 11.0.12 or an even numbered update of 8? If so dupe https://stackoverflow.com/questions/72412346/java-keytool-importing-pkcs12-to-jks-getting-error-keystore-password-was-inc .","body":"Was this PKCS12 created using OpenSSL 3.0.x, and are you running on Java below 11.0.12 or an even numbered update of 8? If so dupe <a href=\"https://stackoverflow.com/questions/72412346/java-keytool-importing-pkcs12-to-jks-getting-error-keystore-password-was-inc\" title=\"java keytool importing pkcs12 to jks getting error keystore password was inc\">stackoverflow.com/questions/72412346/&hellip;</a> ."}],"owner":{"account_id":2801644,"reputation":17019,"user_id":2409793,"accept_rate":49,"display_name":"pkaramol"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671053192,"creation_date":1671052946,"question_id":74804307,"body_markdown":"I am trying to deploy a `kafka-ui` [application][1].\r\n\r\nThe logs indicate that:\r\n\r\n```\r\nCaused by: java.io.IOException: keystore password was incorrect\r\n\tat java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(Unknown Source)\r\n\tat java.base/sun.security.util.KeyStoreDelegator.engineLoad(Unknown Source)\r\n\tat java.base/java.security.KeyStore.load(Unknown Source)\r\n\tat org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$FileBasedStore.load(DefaultSslEngineFactory.java:372)\r\n\t... 42 common frames omitted\r\nCaused by: java.security.UnrecoverableKeyException: failed to decrypt safe contents entry: javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.\r\n\t... 46 common frames omitted\r\n```\r\n\r\nI am pretty sure I have set the correct password, so my question is (assuming I have access to all necessary files) how can I run a decryption of the keystore/clientstore files?\r\n\r\n  [1]: https://github.com/tchiotludo/akhq","title":"Decrypt keystore/truststore files with the password","body":"<p>I am trying to deploy a <code>kafka-ui</code> <a href=\"https://github.com/tchiotludo/akhq\" rel=\"nofollow noreferrer\">application</a>.</p>\n<p>The logs indicate that:</p>\n<pre><code>Caused by: java.io.IOException: keystore password was incorrect\n    at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(Unknown Source)\n    at java.base/sun.security.util.KeyStoreDelegator.engineLoad(Unknown Source)\n    at java.base/java.security.KeyStore.load(Unknown Source)\n    at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$FileBasedStore.load(DefaultSslEngineFactory.java:372)\n    ... 42 common frames omitted\nCaused by: java.security.UnrecoverableKeyException: failed to decrypt safe contents entry: javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.\n    ... 46 common frames omitted\n</code></pre>\n<p>I am pretty sure I have set the correct password, so my question is (assuming I have access to all necessary files) how can I run a decryption of the keystore/clientstore files?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1671038929,"post_id":74802117,"comment_id":132013250,"body_markdown":"Your `UserRepository` interface extended another interface with many methods, and they will all need to be defined. My familiarity with Spring isn&#39;t great, but you likely wanted `UserRepository` to be an abstract class extending from something that already implemented `JpaRepository` for you (e.g. how there is `List` and `AbstractList` in the collections api).","body":"Your <code>UserRepository</code> interface extended another interface with many methods, and they will all need to be defined. My familiarity with Spring isn&#39;t great, but you likely wanted <code>UserRepository</code> to be an abstract class extending from something that already implemented <code>JpaRepository</code> for you (e.g. how there is <code>List</code> and <code>AbstractList</code> in the collections api)."},{"owner":{"account_id":8323670,"reputation":709,"user_id":6254385,"accept_rate":90,"display_name":"epicUsername"},"score":0,"creation_date":1671039741,"post_id":74802117,"comment_id":132013496,"body_markdown":"Yes. You need to extend JPA in the UserInterface to use what you want out of it, but it did not compel me to implement the 2-3 dozen methods that live in it when I do implement it. Usually, you might use one read, write, update and delete methods out of it in the controller, and it works; you don&#39;t need the Impl class specifically either. Removing it, doing a clean and update also results in nought.","body":"Yes. You need to extend JPA in the UserInterface to use what you want out of it, but it did not compel me to implement the 2-3 dozen methods that live in it when I do implement it. Usually, you might use one read, write, update and delete methods out of it in the controller, and it works; you don&#39;t need the Impl class specifically either. Removing it, doing a clean and update also results in nought."},{"owner":{"account_id":462194,"reputation":5746,"user_id":864369,"accept_rate":100,"display_name":"Dan W"},"score":0,"creation_date":1671040872,"post_id":74802117,"comment_id":132013838,"body_markdown":"Your class should be an interface extending CrudRepository. Spring will wire up the implementation at runtime - https://spring.io/guides/gs/accessing-data-jpa/","body":"Your class should be an interface extending CrudRepository. Spring will wire up the implementation at runtime - <a href=\"https://spring.io/guides/gs/accessing-data-jpa/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/accessing-data-jpa</a>"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1671040995,"post_id":74802117,"comment_id":132013879,"body_markdown":"@epicUsername right, an interface does not need to implement abstract methods, since it is an &quot;abstract&quot; type itself (which is similar in this case to `public abstract class`). When you have a concrete class (e.g. `class MyClass`), then any abstract methods must be implemented.","body":"@epicUsername right, an interface does not need to implement abstract methods, since it is an &quot;abstract&quot; type itself (which is similar in this case to <code>public abstract class</code>). When you have a concrete class (e.g. <code>class MyClass</code>), then any abstract methods must be implemented."},{"owner":{"account_id":8323670,"reputation":709,"user_id":6254385,"accept_rate":90,"display_name":"epicUsername"},"score":0,"creation_date":1671046117,"post_id":74802117,"comment_id":132015391,"body_markdown":"@DanW, I did consider that initially, and I&#39;ve put CrudReposiyory back in, but to no effect. Rogue - indeed, but since I had none that need to be implemented, all I did in the Controller is create a repo object and pick the methods that I wanted out of it.","body":"@DanW, I did consider that initially, and I&#39;ve put CrudReposiyory back in, but to no effect. Rogue - indeed, but since I had none that need to be implemented, all I did in the Controller is create a repo object and pick the methods that I wanted out of it."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1671087573,"post_id":74802117,"comment_id":132023144,"body_markdown":"Ditch `UserRepositoryImpl` that isn&#39;t needed as it is a Spring Data JPA interface for which a dynamic repository will be created. You are also using Eclipse and Maven and my experience with that combination is not that good, they fight eachother on the classpath and for compiliation. One cleaning out stuff the other did and vice versa.","body":"Ditch <code>UserRepositoryImpl</code> that isn&#39;t needed as it is a Spring Data JPA interface for which a dynamic repository will be created. You are also using Eclipse and Maven and my experience with that combination is not that good, they fight eachother on the classpath and for compiliation. One cleaning out stuff the other did and vice versa."},{"owner":{"account_id":8323670,"reputation":709,"user_id":6254385,"accept_rate":90,"display_name":"epicUsername"},"score":0,"creation_date":1671116960,"post_id":74802117,"comment_id":132033092,"body_markdown":"@M.Deinum, I am using Spring Tools Suite 4 as my IDE, which integrates Maven... what would be a better solution in your opinion? E.g. VSCode, but I&#39;ve been using that primarily for front-end stuff.","body":"@M.Deinum, I am using Spring Tools Suite 4 as my IDE, which integrates Maven... what would be a better solution in your opinion? E.g. VSCode, but I&#39;ve been using that primarily for front-end stuff."}],"answers":[{"tags":[],"owner":{"account_id":8323670,"reputation":709,"user_id":6254385,"accept_rate":90,"display_name":"epicUsername"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671053189,"creation_date":1671053189,"answer_id":74804341,"question_id":74802117,"body_markdown":"In order to get the API to start:\r\n\r\nFirst, it looks like the problem had to do with the fact that the project was on an network drive, which caused the initial errors; copying the project to a local C: drive directory got rid of them. It appears that whatever process Maven or Spring Boot uses to update references in this case doesn&#39;t capture folder redirection in the context of network drives; it might be because of a different proxy connection, but I can&#39;t be sure.\r\n\r\nThen, you might an error that the API can&#39;t start, because it can&#39;t make a bean of the controller type. To resolve that, first check that your PK value is of the same type as the one in your database; in my case that was an integer type, since I am operating with MS SQL.\r\n\r\nIn my case, I also had to add the **UserRepositoryImpl** class file back in and implement all the methods from CrudRepository to clear the project of errors. The, do a clean and update, the project starts.\r\n\r\nI still have the implementation of my repo methods in the controller, and the connection with the frontend is still broken, but at least I have an operational API again, without having to rebuild it.\r\n\r\nThanks again to everyone who commented!","title":"Why does SpringBoot API corrupt itself with no obvious reason?","body":"<p>In order to get the API to start:</p>\n<p>First, it looks like the problem had to do with the fact that the project was on an network drive, which caused the initial errors; copying the project to a local C: drive directory got rid of them. It appears that whatever process Maven or Spring Boot uses to update references in this case doesn't capture folder redirection in the context of network drives; it might be because of a different proxy connection, but I can't be sure.</p>\n<p>Then, you might an error that the API can't start, because it can't make a bean of the controller type. To resolve that, first check that your PK value is of the same type as the one in your database; in my case that was an integer type, since I am operating with MS SQL.</p>\n<p>In my case, I also had to add the <strong>UserRepositoryImpl</strong> class file back in and implement all the methods from CrudRepository to clear the project of errors. The, do a clean and update, the project starts.</p>\n<p>I still have the implementation of my repo methods in the controller, and the connection with the frontend is still broken, but at least I have an operational API again, without having to rebuild it.</p>\n<p>Thanks again to everyone who commented!</p>\n"}],"owner":{"account_id":8323670,"reputation":709,"user_id":6254385,"accept_rate":90,"display_name":"epicUsername"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74804341,"answer_count":1,"score":-1,"last_activity_date":1671053189,"creation_date":1671038814,"question_id":74802117,"body_markdown":"I am working on a boilerplate SpringBoot-React CRUD project as a basis for something bigger that I want to do. The project also uses MSSQL as a database and Spring JPA to interface with it. \r\n\r\n**UPDATE**\r\n\r\nConsidering another angle - can it have to do with switched corporate VPNs, if the project is stored on a networked drive, or should some of the metadata in the workspace be deleted, and then re-clean and update the project?\r\n\r\n**********\r\n\r\n**UPDATE 2**\r\n\r\nHe&#39;s dead, Jim:\r\n[![enter image description here][1]][1]\r\n\r\n***********\r\n\r\nI will be still working to figure this out.\r\n\r\n\r\nWhat has been frustrating is that after building the API and it working, it gets a spontaneous error that I can&#39;t explain, and which forces me to recreate the entire project. In a word, the implementation of the repository gets the &quot;add unimplemented methods&quot; error, when the interface itself has no methods specified. Then, I get an error in the POM file about the &quot;MANIFEST.MF&quot; file missing. This occurs with the API just running without a problem for a time, and then it just breaks. This has occurred a few times already, but now it&#39;s getting problematic, because I also don&#39;t have a lot of time left for the project.\r\n\r\nFor context:\r\n\r\nTypical MVC project structure:\r\n[![enter image description here][2]][2]\r\n\r\nThe implementation error:\r\n[![enter image description here][3]][3]\r\n\r\nAdding the unimplemented methods will result in the addition of every conceivable method in JPA, when none of them are declared in the interface:\r\n[![enter image description here][4]][4]\r\n\r\nThe interface had a declared methods that was implemented in the Controller, which was just due to a shortcoming in the example I was basing this on:\r\n[![enter image description here][5]][5]\r\n\r\nI am suspecting that this is an STS4 issue? Coincidentally, it then doesn&#39;t stop &quot;Computing...&quot;, again spontaneously:\r\n[![enter image description here][6]][6]\r\n\r\nAfter all of the above happens, the POM file gives me the MANIFEST.MF Error:\r\n[![enter image description here][7]][7]\r\n\r\nThere is also an error at the &lt;parent&gt; line:\r\n\r\n[![enter image description here][8]][8]\r\n\r\nI have tried reinstalling the Eclipse IDE on this, I&#39;ve ensured that the environment is compatible (Java 11, Spring 2.7.6, Maven, installed libs are JPA, Dev Tools, MSSQL Driver, Web - typical ones for the sort of the project). SQL configuration also worked correctly before, with the connection via the endpoints.\r\n\r\nThe front end is built in React and uses Axios to marry it to the endpoint, and that was working fine before.\r\n\r\nSimilar posts exist, but nothing quite like this\r\n\r\nhttps://stackoverflow.com/questions/31189449/error-manifest-mf-already-exists-in-vfs-when-creating-new-artifact\r\n\r\nhttps://stackoverflow.com/questions/40180123/manifest-mf-the-system-cannot-find-the-path-specified\r\n\r\n\r\nI really don&#39;t want to have to recreate the API again, but I am about out of other options and time.\r\n\r\nThank you in advance!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CoaGO.png\r\n  [2]: https://i.stack.imgur.com/YLthG.png\r\n  [3]: https://i.stack.imgur.com/zrYsl.png\r\n  [4]: https://i.stack.imgur.com/oYEQs.png\r\n  [5]: https://i.stack.imgur.com/Xifxa.png\r\n  [6]: https://i.stack.imgur.com/Xiv1D.png\r\n  [7]: https://i.stack.imgur.com/dewHc.png\r\n  [8]: https://i.stack.imgur.com/7jeEo.png","title":"Why does SpringBoot API corrupt itself with no obvious reason?","body":"<p>I am working on a boilerplate SpringBoot-React CRUD project as a basis for something bigger that I want to do. The project also uses MSSQL as a database and Spring JPA to interface with it.</p>\n<p><strong>UPDATE</strong></p>\n<p>Considering another angle - can it have to do with switched corporate VPNs, if the project is stored on a networked drive, or should some of the metadata in the workspace be deleted, and then re-clean and update the project?</p>\n<hr />\n<p><strong>UPDATE 2</strong></p>\n<p>He's dead, Jim:\n<a href=\"https://i.stack.imgur.com/CoaGO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CoaGO.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>I will be still working to figure this out.</p>\n<p>What has been frustrating is that after building the API and it working, it gets a spontaneous error that I can't explain, and which forces me to recreate the entire project. In a word, the implementation of the repository gets the &quot;add unimplemented methods&quot; error, when the interface itself has no methods specified. Then, I get an error in the POM file about the &quot;MANIFEST.MF&quot; file missing. This occurs with the API just running without a problem for a time, and then it just breaks. This has occurred a few times already, but now it's getting problematic, because I also don't have a lot of time left for the project.</p>\n<p>For context:</p>\n<p>Typical MVC project structure:\n<a href=\"https://i.stack.imgur.com/YLthG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YLthG.png\" alt=\"enter image description here\" /></a></p>\n<p>The implementation error:\n<a href=\"https://i.stack.imgur.com/zrYsl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zrYsl.png\" alt=\"enter image description here\" /></a></p>\n<p>Adding the unimplemented methods will result in the addition of every conceivable method in JPA, when none of them are declared in the interface:\n<a href=\"https://i.stack.imgur.com/oYEQs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oYEQs.png\" alt=\"enter image description here\" /></a></p>\n<p>The interface had a declared methods that was implemented in the Controller, which was just due to a shortcoming in the example I was basing this on:\n<a href=\"https://i.stack.imgur.com/Xifxa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xifxa.png\" alt=\"enter image description here\" /></a></p>\n<p>I am suspecting that this is an STS4 issue? Coincidentally, it then doesn't stop &quot;Computing...&quot;, again spontaneously:\n<a href=\"https://i.stack.imgur.com/Xiv1D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xiv1D.png\" alt=\"enter image description here\" /></a></p>\n<p>After all of the above happens, the POM file gives me the MANIFEST.MF Error:\n<a href=\"https://i.stack.imgur.com/dewHc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dewHc.png\" alt=\"enter image description here\" /></a></p>\n<p>There is also an error at the  line:</p>\n<p><a href=\"https://i.stack.imgur.com/7jeEo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7jeEo.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried reinstalling the Eclipse IDE on this, I've ensured that the environment is compatible (Java 11, Spring 2.7.6, Maven, installed libs are JPA, Dev Tools, MSSQL Driver, Web - typical ones for the sort of the project). SQL configuration also worked correctly before, with the connection via the endpoints.</p>\n<p>The front end is built in React and uses Axios to marry it to the endpoint, and that was working fine before.</p>\n<p>Similar posts exist, but nothing quite like this</p>\n<p><a href=\"https://stackoverflow.com/questions/31189449/error-manifest-mf-already-exists-in-vfs-when-creating-new-artifact\">Error &quot;MANIFEST.MF already exists in VFS&quot; when creating new artifact</a></p>\n<p><a href=\"https://stackoverflow.com/questions/40180123/manifest-mf-the-system-cannot-find-the-path-specified\">MANIFEST.MF (The system cannot find the path specified)</a></p>\n<p>I really don't want to have to recreate the API again, but I am about out of other options and time.</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","spring","tomcat","spring-boot"],"comments":[{"owner":{"account_id":13921,"reputation":2655,"user_id":28214,"accept_rate":50,"display_name":"gregturn"},"score":0,"creation_date":1411759189,"post_id":26064999,"comment_id":40840409,"body_markdown":"Look at http://stackoverflow.com/a/25999919/28214 where there is an example of configuring users programmatically.","body":"Look at <a href=\"http://stackoverflow.com/a/25999919/28214\">stackoverflow.com/a/25999919/28214</a> where there is an example of configuring users programmatically."},{"owner":{"account_id":2635879,"reputation":1397,"user_id":2280576,"accept_rate":78,"display_name":"NTyler"},"score":0,"creation_date":1411913676,"post_id":26064999,"comment_id":40874675,"body_markdown":"That&#39;s great information on setting up the users programatically, but it doesn&#39;t cover how to protect a url resource with container security, which is the piece I&#39;m missing.","body":"That&#39;s great information on setting up the users programatically, but it doesn&#39;t cover how to protect a url resource with container security, which is the piece I&#39;m missing."}],"answers":[{"tags":[],"owner":{"account_id":138694,"reputation":1243,"user_id":343802,"display_name":"leo"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1462522762,"creation_date":1462522762,"answer_id":37067552,"question_id":26064999,"body_markdown":"From [official Spring doc](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/WebApplicationInitializer.html):\r\n\r\n&gt; WEB-INF/web.xml and WebApplicationInitializer use are not mutually exclusive; for example, web.xml can register one servlet, and a WebApplicationInitializer can register another. An initializer can even modify registrations performed in web.xml through methods such as ServletContext.getServletRegistration(String). However, if WEB-INF/web.xml is present in the application, its version attribute must be set to &quot;3.0&quot; or greater, otherwise ServletContainerInitializer bootstrapping will be ignored by the servlet container.\r\n\r\nSo, I solved with both `WebApplicationInitializer` (`SpringBootServletInitializer` extends `WebApplicationInitializer`) and `web.xml`.\r\n\r\nSpring Boot Java Config Class:\r\n\r\n     @SpringBootApplication\r\n     public class MyApplication extends SpringBootServletInitializer {\r\n\t\r\n\t     @Override\r\n\t     protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n\t\t     return application.sources(MyApplication.class);\r\n\t     }\r\n\t\r\n\t     public static void main(String[] args) {\r\n\t\t     SpringApplication.run(MyApplication.class, args);\r\n\t     }\r\n          \r\n          //...\r\n     }\r\n\r\nweb.xml:\r\n\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;\r\n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;\r\n    metadata-complete=&quot;false&quot; version=&quot;3.0&quot;&gt;\r\n\r\n\t\t&lt;display-name&gt;My Awesome Application&lt;/display-name&gt;\r\n\r\n\t\t&lt;security-constraint&gt;\r\n\t\t    &lt;web-resource-collection&gt;\r\n\t\t\t    &lt;web-resource-name&gt;My Awesome Resource Name&lt;/web-resource-name&gt;\r\n\t\t\t    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n\t\t\t    &lt;http-method&gt;GET&lt;/http-method&gt;\r\n\t\t\t    &lt;http-method&gt;POST&lt;/http-method&gt;\r\n\t\t\t    &lt;http-method&gt;PUT&lt;/http-method&gt;\r\n\t\t\t    &lt;http-method&gt;DELETE&lt;/http-method&gt;\r\n\t\t    &lt;/web-resource-collection&gt;\r\n\t\t    &lt;auth-constraint&gt;\r\n\t\t\t    &lt;role-name&gt;myawesomerole&lt;/role-name&gt;\r\n\t\t    &lt;/auth-constraint&gt;\r\n\t\t&lt;/security-constraint&gt;\r\n\r\n\t\t&lt;login-config&gt;\r\n\t\t    &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\r\n\t\t&lt;/login-config&gt;\r\n\r\n    &lt;/web-app&gt;\r\n\r\nSee also: https://stackoverflow.com/questions/18875356/using-tomcat-basic-auth-with-new-webapplicationinitializer","title":"Spring Boot with container security","body":"<p>From <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/WebApplicationInitializer.html\" rel=\"noreferrer\">official Spring doc</a>:</p>\n\n<blockquote>\n  <p>WEB-INF/web.xml and WebApplicationInitializer use are not mutually exclusive; for example, web.xml can register one servlet, and a WebApplicationInitializer can register another. An initializer can even modify registrations performed in web.xml through methods such as ServletContext.getServletRegistration(String). However, if WEB-INF/web.xml is present in the application, its version attribute must be set to \"3.0\" or greater, otherwise ServletContainerInitializer bootstrapping will be ignored by the servlet container.</p>\n</blockquote>\n\n<p>So, I solved with both <code>WebApplicationInitializer</code> (<code>SpringBootServletInitializer</code> extends <code>WebApplicationInitializer</code>) and <code>web.xml</code>.</p>\n\n<p>Spring Boot Java Config Class:</p>\n\n<pre><code> @SpringBootApplication\n public class MyApplication extends SpringBootServletInitializer {\n\n     @Override\n     protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n         return application.sources(MyApplication.class);\n     }\n\n     public static void main(String[] args) {\n         SpringApplication.run(MyApplication.class, args);\n     }\n\n      //...\n }\n</code></pre>\n\n<p>web.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\nxsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\nmetadata-complete=\"false\" version=\"3.0\"&gt;\n\n    &lt;display-name&gt;My Awesome Application&lt;/display-name&gt;\n\n    &lt;security-constraint&gt;\n        &lt;web-resource-collection&gt;\n            &lt;web-resource-name&gt;My Awesome Resource Name&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n            &lt;http-method&gt;GET&lt;/http-method&gt;\n            &lt;http-method&gt;POST&lt;/http-method&gt;\n            &lt;http-method&gt;PUT&lt;/http-method&gt;\n            &lt;http-method&gt;DELETE&lt;/http-method&gt;\n        &lt;/web-resource-collection&gt;\n        &lt;auth-constraint&gt;\n            &lt;role-name&gt;myawesomerole&lt;/role-name&gt;\n        &lt;/auth-constraint&gt;\n    &lt;/security-constraint&gt;\n\n    &lt;login-config&gt;\n        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\n    &lt;/login-config&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/18875356/using-tomcat-basic-auth-with-new-webapplicationinitializer\">Using Tomcat Basic Auth with new WebApplicationInitializer</a></p>\n"},{"tags":[],"owner":{"account_id":307015,"reputation":21530,"user_id":618087,"display_name":"Rob Winch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671052074,"creation_date":1671052074,"answer_id":74804193,"question_id":26064999,"body_markdown":"As the Spring Security Project, I&#39;d recommend using Spring Security as it does more than container Security (i.e. protection against common exploits, method security to provide defense in depth, etc). However, if you want to use container security you can as shown below:\r\n\r\nYou can use the following to use container managed security a Spring Boot 2.7.x or 3.0.0 Application:\r\n\r\nCreate a file at `src/main/resources/tomcat-users.xml`:\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n    &lt;tomcat-users&gt;\r\n    \t&lt;role rolename=&quot;ROLE_USER&quot;/&gt;\r\n    \t&lt;user username=&quot;user&quot; password=&quot;password&quot; roles=&quot;ROLE_USER&quot;/&gt;\r\n    &lt;/tomcat-users&gt;\r\n\r\nCreate the following Spring Configuration:\r\n\r\n    package example;\r\n    \r\n    import java.net.URL;\r\n    \r\n    import org.apache.catalina.Context;\r\n    import org.apache.catalina.authenticator.BasicAuthenticator;\r\n    import org.apache.catalina.realm.MemoryRealm;\r\n    import org.apache.catalina.realm.RealmBase;\r\n    import org.apache.tomcat.util.descriptor.web.LoginConfig;\r\n    import org.apache.tomcat.util.descriptor.web.SecurityCollection;\r\n    import org.apache.tomcat.util.descriptor.web.SecurityConstraint;\r\n    \r\n    import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    /**\r\n     * @author Rob Winch\r\n     */\r\n    @Configuration\r\n    public class ContainerSecurityConfiguration {\r\n    \r\n    \t@Bean\r\n    \tpublic TomcatServletWebServerFactory servletContainer() {\r\n    \t\treturn new TomcatServletWebServerFactory() {\r\n    \t\t\t@Override\r\n    \t\t\tprotected void postProcessContext(Context context) {\r\n    \t\t\t\tcontext.getPipeline().addValve(new BasicAuthenticator());\r\n    \t\t\t\tcontext.setRealm(createRealm());\r\n    \t\t\t\tcontext.setLoginConfig(createLoginConfig());\r\n    \t\t\t\tcontext.addSecurityRole(&quot;ROLE_USER&quot;);\r\n    \t\t\t\tcontext.addConstraint(createSecurityConstraint());\r\n    \t\t\t}\r\n    \r\n    \t\t\tprivate static RealmBase createRealm() {\r\n    \t\t\t\tMemoryRealm memoryRealm = new MemoryRealm();\r\n    \t\t\t\tmemoryRealm.setPathname(getTomcatUsersPath());\r\n    \t\t\t\treturn memoryRealm;\r\n    \t\t\t}\r\n    \r\n    \t\t\t// this must find the path to tomcat-users.xml, here we find \r\n    \t\t\t// it as a resource, but you can provide an absolute path to \r\n    \t\t\t// any place on your file system\r\n    \t\t\tprivate static String getTomcatUsersPath() {\r\n    \t\t\t\tString resourceName = &quot;/tomcat-users.xml&quot;;\r\n    \t\t\t\tURL resource = ContainerSecurityConfiguration.class.getResource(resourceName);\r\n    \t\t\t\tif (resource == null) {\r\n    \t\t\t\t\tthrow new IllegalStateException(&quot;Cannot find resource &quot; + resourceName);\r\n    \t\t\t\t}\r\n    \t\t\t\treturn resource.getPath();\r\n    \t\t\t}\r\n    \r\n    \t\t\tprivate static LoginConfig createLoginConfig() {\r\n    \t\t\t\tLoginConfig config = new LoginConfig();\r\n    \t\t\t\tconfig.setRealmName(&quot;basic&quot;);\r\n    \t\t\t\tconfig.setAuthMethod(&quot;BASIC&quot;);\r\n    \t\t\t\treturn config;\r\n    \t\t\t}\r\n    \r\n    \t\t\t// /private/* -&gt; ROLE_USER\r\n    \t\t\tprivate static SecurityConstraint createSecurityConstraint() {\r\n    \t\t\t\tSecurityConstraint securityConstraint = new SecurityConstraint();\r\n    \t\t\t\tsecurityConstraint.setDisplayName(&quot;Private resources&quot;);\r\n    \t\t\t\tSecurityCollection securityCollection = new SecurityCollection();\r\n    \t\t\t\tsecurityCollection.addPattern(&quot;/private/*&quot;);\r\n    \t\t\t\tsecurityConstraint.addCollection(securityCollection);\r\n    \t\t\t\tsecurityConstraint.addAuthRole(&quot;ROLE_USER&quot;);\r\n    \t\t\t\treturn securityConstraint;\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    \r\n    }\r\n\r\nHere is an automated test you can use:\r\n\r\n    package example;\r\n    \r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.boot.test.context.SpringBootTest.WebEnvironment;\r\n    import org.springframework.boot.test.web.client.TestRestTemplate;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.ResponseEntity;\r\n    \r\n    import static org.assertj.core.api.Assertions.assertThat;\r\n    \r\n    @SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\r\n    public class ApplicationTests {\r\n    \t@Autowired\r\n    \tTestRestTemplate rest;\r\n    \r\n    \t@Test\r\n    \tpublic void authenticationRequired() {\r\n    \t\tResponseEntity&lt;String&gt; result = this.rest.getForEntity(&quot;/private&quot;, String.class);\r\n    \t\tassertThat(result.getStatusCode()).isEqualTo(HttpStatus.UNAUTHORIZED);\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void authorizationSuccess() {\r\n    \t\tResponseEntity&lt;String&gt; result = this.rest.withBasicAuth(&quot;user&quot;, &quot;password&quot;).getForEntity(&quot;/private&quot;, String.class);\r\n    \t\tassertThat(result.getStatusCode()).isEqualTo(HttpStatus.OK);\r\n    \t\tassertThat(result.getBody()).isEqualTo(&quot;private message&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\n# No XML\r\n\r\nIf you do not want to use the xml file you can also manage your users pragmatically. First create a Tomcat Realm with the following:\r\n\r\n    package example;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    \r\n    import org.apache.catalina.realm.GenericPrincipal;\r\n    import org.apache.catalina.realm.RealmBase;\r\n    /**\r\n     * @author Rob Winch\r\n     */\r\n    class ProgramaticMemoryRealm extends RealmBase {\r\n    \tprivate final Map&lt;String, UserInformation&gt; usernameToPrincipal = new HashMap&lt;&gt;();\r\n    \r\n    \tpublic ProgramaticMemoryRealm(UserInformation... users) {\r\n    \t\tthis(List.of(users));\r\n    \t}\r\n    \r\n    \tpublic ProgramaticMemoryRealm(List&lt;UserInformation&gt; users) {\r\n    \t\tusers.stream().forEach(this::addUser);\r\n    \t}\r\n    \r\n    \tprivate void addUser(UserInformation user) {\r\n    \t\tthis.usernameToPrincipal.put(user.user().getName(), user);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected String getPassword(String username) {\r\n    \t\tUserInformation userInformation = this.usernameToPrincipal.get(username);\r\n    \t\treturn userInformation == null ? null : userInformation.password();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected GenericPrincipal getPrincipal(String username) {\r\n    \t\tUserInformation userInformation = this.usernameToPrincipal.get(username);\r\n    \t\treturn userInformation == null ? null : userInformation.user();\r\n    \t}\r\n    \r\n    \tpublic record UserInformation(GenericPrincipal user, String password) {\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\nNow in `ContainerSecurityConfiguration` instead of using `MemoryRealm` use `ProgramaticMemoryRealm`:\r\n\r\n    private static RealmBase createRealm() {\r\n    \tGenericPrincipal user = new GenericPrincipal(&quot;user&quot;, &quot;password&quot;, List.of(&quot;ROLE_USER&quot;));\r\n    \treturn new ProgramaticMemoryRealm(new UserInformation(user, &quot;password&quot;));\r\n    }\r\n\r\nNOTE: We use UserInformation because in Spring Boot 3+ the GenericPrincipal password is not accessible and the constructor with the password is deprecated. In Spring Boot 2.7 UserInformation is not really necessary since the password is fully available on GenericPrincipal.","title":"Spring Boot with container security","body":"<p>As the Spring Security Project, I'd recommend using Spring Security as it does more than container Security (i.e. protection against common exploits, method security to provide defense in depth, etc). However, if you want to use container security you can as shown below:</p>\n<p>You can use the following to use container managed security a Spring Boot 2.7.x or 3.0.0 Application:</p>\n<p>Create a file at <code>src/main/resources/tomcat-users.xml</code>:</p>\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;tomcat-users&gt;\n    &lt;role rolename=&quot;ROLE_USER&quot;/&gt;\n    &lt;user username=&quot;user&quot; password=&quot;password&quot; roles=&quot;ROLE_USER&quot;/&gt;\n&lt;/tomcat-users&gt;\n</code></pre>\n<p>Create the following Spring Configuration:</p>\n<pre><code>package example;\n\nimport java.net.URL;\n\nimport org.apache.catalina.Context;\nimport org.apache.catalina.authenticator.BasicAuthenticator;\nimport org.apache.catalina.realm.MemoryRealm;\nimport org.apache.catalina.realm.RealmBase;\nimport org.apache.tomcat.util.descriptor.web.LoginConfig;\nimport org.apache.tomcat.util.descriptor.web.SecurityCollection;\nimport org.apache.tomcat.util.descriptor.web.SecurityConstraint;\n\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n/**\n * @author Rob Winch\n */\n@Configuration\npublic class ContainerSecurityConfiguration {\n\n    @Bean\n    public TomcatServletWebServerFactory servletContainer() {\n        return new TomcatServletWebServerFactory() {\n            @Override\n            protected void postProcessContext(Context context) {\n                context.getPipeline().addValve(new BasicAuthenticator());\n                context.setRealm(createRealm());\n                context.setLoginConfig(createLoginConfig());\n                context.addSecurityRole(&quot;ROLE_USER&quot;);\n                context.addConstraint(createSecurityConstraint());\n            }\n\n            private static RealmBase createRealm() {\n                MemoryRealm memoryRealm = new MemoryRealm();\n                memoryRealm.setPathname(getTomcatUsersPath());\n                return memoryRealm;\n            }\n\n            // this must find the path to tomcat-users.xml, here we find \n            // it as a resource, but you can provide an absolute path to \n            // any place on your file system\n            private static String getTomcatUsersPath() {\n                String resourceName = &quot;/tomcat-users.xml&quot;;\n                URL resource = ContainerSecurityConfiguration.class.getResource(resourceName);\n                if (resource == null) {\n                    throw new IllegalStateException(&quot;Cannot find resource &quot; + resourceName);\n                }\n                return resource.getPath();\n            }\n\n            private static LoginConfig createLoginConfig() {\n                LoginConfig config = new LoginConfig();\n                config.setRealmName(&quot;basic&quot;);\n                config.setAuthMethod(&quot;BASIC&quot;);\n                return config;\n            }\n\n            // /private/* -&gt; ROLE_USER\n            private static SecurityConstraint createSecurityConstraint() {\n                SecurityConstraint securityConstraint = new SecurityConstraint();\n                securityConstraint.setDisplayName(&quot;Private resources&quot;);\n                SecurityCollection securityCollection = new SecurityCollection();\n                securityCollection.addPattern(&quot;/private/*&quot;);\n                securityConstraint.addCollection(securityCollection);\n                securityConstraint.addAuthRole(&quot;ROLE_USER&quot;);\n                return securityConstraint;\n            }\n        };\n    }\n\n}\n</code></pre>\n<p>Here is an automated test you can use:</p>\n<pre><code>package example;\n\nimport org.junit.jupiter.api.Test;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.context.SpringBootTest.WebEnvironment;\nimport org.springframework.boot.test.web.client.TestRestTemplate;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\npublic class ApplicationTests {\n    @Autowired\n    TestRestTemplate rest;\n\n    @Test\n    public void authenticationRequired() {\n        ResponseEntity&lt;String&gt; result = this.rest.getForEntity(&quot;/private&quot;, String.class);\n        assertThat(result.getStatusCode()).isEqualTo(HttpStatus.UNAUTHORIZED);\n    }\n\n    @Test\n    public void authorizationSuccess() {\n        ResponseEntity&lt;String&gt; result = this.rest.withBasicAuth(&quot;user&quot;, &quot;password&quot;).getForEntity(&quot;/private&quot;, String.class);\n        assertThat(result.getStatusCode()).isEqualTo(HttpStatus.OK);\n        assertThat(result.getBody()).isEqualTo(&quot;private message&quot;);\n    }\n\n}\n</code></pre>\n<h1>No XML</h1>\n<p>If you do not want to use the xml file you can also manage your users pragmatically. First create a Tomcat Realm with the following:</p>\n<pre><code>package example;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.apache.catalina.realm.GenericPrincipal;\nimport org.apache.catalina.realm.RealmBase;\n/**\n * @author Rob Winch\n */\nclass ProgramaticMemoryRealm extends RealmBase {\n    private final Map&lt;String, UserInformation&gt; usernameToPrincipal = new HashMap&lt;&gt;();\n\n    public ProgramaticMemoryRealm(UserInformation... users) {\n        this(List.of(users));\n    }\n\n    public ProgramaticMemoryRealm(List&lt;UserInformation&gt; users) {\n        users.stream().forEach(this::addUser);\n    }\n\n    private void addUser(UserInformation user) {\n        this.usernameToPrincipal.put(user.user().getName(), user);\n    }\n\n    @Override\n    protected String getPassword(String username) {\n        UserInformation userInformation = this.usernameToPrincipal.get(username);\n        return userInformation == null ? null : userInformation.password();\n    }\n\n    @Override\n    protected GenericPrincipal getPrincipal(String username) {\n        UserInformation userInformation = this.usernameToPrincipal.get(username);\n        return userInformation == null ? null : userInformation.user();\n    }\n\n    public record UserInformation(GenericPrincipal user, String password) {\n\n    }\n}\n</code></pre>\n<p>Now in <code>ContainerSecurityConfiguration</code> instead of using <code>MemoryRealm</code> use <code>ProgramaticMemoryRealm</code>:</p>\n<pre><code>private static RealmBase createRealm() {\n    GenericPrincipal user = new GenericPrincipal(&quot;user&quot;, &quot;password&quot;, List.of(&quot;ROLE_USER&quot;));\n    return new ProgramaticMemoryRealm(new UserInformation(user, &quot;password&quot;));\n}\n</code></pre>\n<p>NOTE: We use UserInformation because in Spring Boot 3+ the GenericPrincipal password is not accessible and the constructor with the password is deprecated. In Spring Boot 2.7 UserInformation is not really necessary since the password is fully available on GenericPrincipal.</p>\n"}],"owner":{"account_id":2635879,"reputation":1397,"user_id":2280576,"accept_rate":78,"display_name":"NTyler"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5220,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":74804193,"answer_count":2,"score":7,"last_activity_date":1671052074,"creation_date":1411752048,"question_id":26064999,"body_markdown":"I&#39;ve been using spring boot for some projects lately and I really like it.  For a new project, we&#39;d like to use tomcat-users.xml for really basic authentication, but I can&#39;t figure out how to use the &lt;security-constraint&gt; mechanism without a web.xml file.  Most people using spring boot seem to be using spring security.\r\n\r\nIs it possible to use tomcat container security with the spring boot java config model?  I understand this breaks the runnable jar paradigm but we&#39;re planning to deploy this as a war anyway.","title":"Spring Boot with container security","body":"<p>I've been using spring boot for some projects lately and I really like it.  For a new project, we'd like to use tomcat-users.xml for really basic authentication, but I can't figure out how to use the  mechanism without a web.xml file.  Most people using spring boot seem to be using spring security.</p>\n\n<p>Is it possible to use tomcat container security with the spring boot java config model?  I understand this breaks the runnable jar paradigm but we're planning to deploy this as a war anyway.</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":9977764,"reputation":348,"user_id":13322259,"display_name":"Derek S."},"score":0,"creation_date":1591138338,"post_id":62162568,"comment_id":109940976,"body_markdown":"How many accounts, assets and portfolios do you have?  Should they all fit in memory?","body":"How many accounts, assets and portfolios do you have?  Should they all fit in memory?"},{"owner":{"account_id":1261744,"reputation":517,"user_id":1219836,"display_name":"RXP"},"score":0,"creation_date":1591139403,"post_id":62162568,"comment_id":109941223,"body_markdown":"I just have 1 portfolio, 5 accounts and about 60 assets in total. This is a very small application and they all fit in memory","body":"I just have 1 portfolio, 5 accounts and about 60 assets in total. This is a very small application and they all fit in memory"},{"owner":{"account_id":9977764,"reputation":348,"user_id":13322259,"display_name":"Derek S."},"score":0,"creation_date":1591149550,"post_id":62162568,"comment_id":109943602,"body_markdown":"I&#39;m missing what&#39;s gone awry for you but I&#39;d throw a `query.SetMaxResults(2)` in there and see what happens.","body":"I&#39;m missing what&#39;s gone awry for you but I&#39;d throw a <code>query.SetMaxResults(2)</code> in there and see what happens."},{"owner":{"account_id":1261744,"reputation":517,"user_id":1219836,"display_name":"RXP"},"score":0,"creation_date":1591155479,"post_id":62162568,"comment_id":109944920,"body_markdown":"I will try that in the morning and let you know. It is very weird why this is happening","body":"I will try that in the morning and let you know. It is very weird why this is happening"},{"owner":{"account_id":1261744,"reputation":517,"user_id":1219836,"display_name":"RXP"},"score":0,"creation_date":1591183981,"post_id":62162568,"comment_id":109957145,"body_markdown":"Derek S. it still does not work. I set the maximum results to 2 and I get the exact same Exception","body":"Derek S. it still does not work. I set the maximum results to 2 and I get the exact same Exception"},{"owner":{"account_id":9977764,"reputation":348,"user_id":13322259,"display_name":"Derek S."},"score":0,"creation_date":1591184839,"post_id":62162568,"comment_id":109957681,"body_markdown":"Is it possible there is a circular reference in your data?  Try just getting the count and see if that comes back.","body":"Is it possible there is a circular reference in your data?  Try just getting the count and see if that comes back."},{"owner":{"account_id":1261744,"reputation":517,"user_id":1219836,"display_name":"RXP"},"score":0,"creation_date":1591185203,"post_id":62162568,"comment_id":109957885,"body_markdown":"I dont see a circular reference within the Account Entity. I did test with (String query = &quot;SELECT a from Account a WHERE a.portfolio = &quot; + pId + &quot; AND a.accountName = &quot; + &quot;&#39;&quot;\n\t\t\t\t\t+ accountName + &quot;&#39;&quot;;) and it worked fine. I am puzzled at why the other query is going into an infinite loop","body":"I dont see a circular reference within the Account Entity. I did test with (String query = &quot;SELECT a from Account a WHERE a.portfolio = &quot; + pId + &quot; AND a.accountName = &quot; + &quot;&#39;&quot; \t\t\t\t\t+ accountName + &quot;&#39;&quot;;) and it worked fine. I am puzzled at why the other query is going into an infinite loop"},{"owner":{"account_id":9977764,"reputation":348,"user_id":13322259,"display_name":"Derek S."},"score":0,"creation_date":1591185309,"post_id":62162568,"comment_id":109957947,"body_markdown":"If that doesn&#39;t do it I think you set show SQL and format SQL true in your config and try timing the query in MySQL to see what you are getting.","body":"If that doesn&#39;t do it I think you set show SQL and format SQL true in your config and try timing the query in MySQL to see what you are getting."},{"owner":{"account_id":9977764,"reputation":348,"user_id":13322259,"display_name":"Derek S."},"score":0,"creation_date":1591185499,"post_id":62162568,"comment_id":109958078,"body_markdown":"There is an issue somewhere in how you are joining the tables and you are getting too much back. It isn&#39;t at the account level most likely but one of your other mailed tables.  Removing them one at a time might help but it is probably a combination of two.","body":"There is an issue somewhere in how you are joining the tables and you are getting too much back. It isn&#39;t at the account level most likely but one of your other mailed tables.  Removing them one at a time might help but it is probably a combination of two."},{"owner":{"account_id":1261744,"reputation":517,"user_id":1219836,"display_name":"RXP"},"score":0,"creation_date":1591185724,"post_id":62162568,"comment_id":109958212,"body_markdown":"Let me try and may be I will create a separate test app and try it there","body":"Let me try and may be I will create a separate test app and try it there"},{"owner":{"account_id":1261744,"reputation":517,"user_id":1219836,"display_name":"RXP"},"score":0,"creation_date":1591206347,"post_id":62162568,"comment_id":109970736,"body_markdown":"Derek, I experimented with enabling SQL and formatting it and I noticed that for a simple getAllAccounts query, the hibernate query is quite large more than 100 lines. Is that normal?","body":"Derek, I experimented with enabling SQL and formatting it and I noticed that for a simple getAllAccounts query, the hibernate query is quite large more than 100 lines. Is that normal?"},{"owner":{"account_id":9977764,"reputation":348,"user_id":13322259,"display_name":"Derek S."},"score":0,"creation_date":1591311080,"post_id":62162568,"comment_id":110016303,"body_markdown":"I think the way you are combining several pieces of information is having an unexpected complication. Try commenting some out and see if you can narrow it down. Or try just pulling the lower level objects like assets.","body":"I think the way you are combining several pieces of information is having an unexpected complication. Try commenting some out and see if you can narrow it down. Or try just pulling the lower level objects like assets."},{"owner":{"account_id":1261744,"reputation":517,"user_id":1219836,"display_name":"RXP"},"score":0,"creation_date":1591535384,"post_id":62162568,"comment_id":110086875,"body_markdown":"The problem is with Eager fetching. Switching to Lazy speeds up the query but there are issues with LazyInitializationException!","body":"The problem is with Eager fetching. Switching to Lazy speeds up the query but there are issues with LazyInitializationException!"},{"owner":{"account_id":9977764,"reputation":348,"user_id":13322259,"display_name":"Derek S."},"score":0,"creation_date":1591630785,"post_id":62162568,"comment_id":110122184,"body_markdown":"I still contend your data model is creating many relationships you don&#39;t intend and you will want to iron that out.  I&#39;d guess AccountCalculation or AccountSummary is connecting to Assets many times over but can&#39;t be sure as you only shared the Account table.","body":"I still contend your data model is creating many relationships you don&#39;t intend and you will want to iron that out.  I&#39;d guess AccountCalculation or AccountSummary is connecting to Assets many times over but can&#39;t be sure as you only shared the Account table."}],"answers":[{"tags":[],"owner":{"account_id":21323237,"reputation":1,"user_id":15696049,"display_name":"aliunaldiii"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671052054,"creation_date":1667909086,"answer_id":74360447,"question_id":62162568,"body_markdown":"If you are using Oracle db it may cause due to lack of grant of your user on your database. If your database user has no grant on the table, you cannot access the table. You can try to grant the user on your table for the necessary operations like below.\r\n\r\n    GRANT\r\n    SELECT, INSERT, UPDATE, DELETE \r\n    ON\r\n    your_schema_name.account\r\n    TO\r\n    your_db_user;","title":"HHH000327: Error performing load command : org.hibernate.exception.GenericJDBCException: could not extract ResultSet","body":"<p>If you are using Oracle db it may cause due to lack of grant of your user on your database. If your database user has no grant on the table, you cannot access the table. You can try to grant the user on your table for the necessary operations like below.</p>\n<pre><code>GRANT\nSELECT, INSERT, UPDATE, DELETE \nON\nyour_schema_name.account\nTO\nyour_db_user;\n</code></pre>\n"}],"owner":{"account_id":1261744,"reputation":517,"user_id":1219836,"display_name":"RXP"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1925,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671052054,"creation_date":1591137901,"question_id":62162568,"body_markdown":"I am using JPA2.2 with Hibernate and a MySql database. I have a simple Entity (Account) and when I try to send a simple query, I get a hibernate Exception and crashes because it goes out of memory. Any help in tracking this issue will be great.\r\n\r\nThanks.\r\nEntity: Account.java\r\n\r\n    @Entity\r\n    @Table(name=&quot;account&quot;)\r\n    public class Account implements Serializable {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t@Id @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \t@Column(name = &quot;accountId&quot;)\r\n    \tprivate Long accountId;\r\n    \t\r\n    \t@Column(name = &quot;accountName&quot;)\r\n    \tprivate String accountName;\r\n    \t\r\n    \t@Column(name=&quot;startDate&quot;)\r\n    \tprivate LocalDate startDate;\r\n    \t\r\n    \t@Column(name=&quot;startBalance&quot;)\r\n    \tprivate double startBalance;\r\n    \t\r\n    \t@Embedded\r\n    \tprivate Summary summary = new Summary();\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name=&quot;portfolioId&quot;)\r\n    \tprivate Portfolio portfolio;\r\n    \t\r\n    \t@OneToMany(fetch=FetchType.EAGER, mappedBy=&quot;account&quot;, cascade=CascadeType.ALL)\r\n    \tprivate Set&lt;Asset&gt; assets = new HashSet&lt;Asset&gt;();\r\n    \t\r\n    \t@OneToMany(fetch=FetchType.EAGER, mappedBy = &quot;account&quot;, cascade=CascadeType.ALL)\r\n    \t@MapKey(name = &quot;startDate&quot;)\r\n    \tprivate Map&lt;LocalDate, AccountCalculation&gt; accountCalculations = new HashMap&lt;LocalDate, AccountCalculation&gt;();\r\n    \t\r\n    \t@OneToMany(fetch=FetchType.EAGER, mappedBy = &quot;account&quot;, cascade=CascadeType.ALL)\r\n    \t@MapKey(name = &quot;year&quot;)\r\n    \tprivate Map&lt;Integer, AccountSummary&gt; accountSummaries = new HashMap&lt;Integer, AccountSummary&gt;();\r\n    \t\r\n    \tpublic Account() {\r\n    \t\tsuper();\r\n    \t}\r\n\r\nQuery to get All the Accounts\r\n\r\n    public List&lt;Account&gt; getAllAccounts() {\r\n    \tTypedQuery&lt;Account&gt; query = em.createQuery(&quot;SELECT a FROM Account a&quot;, Account.class);\r\n    \tList&lt;Account&gt; results = query.getResultList();\r\n    \treturn results;\r\n    }\r\n\r\npersistence.xml\r\n\r\n    &lt;persistence version=&quot;2.2&quot;\r\n    \txmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\r\n    \t&lt;persistence-unit name=&quot;portfoliomanager&quot; transaction-type=&quot;JTA&quot;&gt;\r\n    \t\t&lt;jta-data-source&gt;java:/PMDevDS&lt;/jta-data-source&gt;\r\n    \t\t&lt;!-- &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt; --&gt;\r\n    \t\t&lt;properties&gt;\r\n    \t\t\t&lt;property name=&quot;hibernate.show_sql&quot; value=&quot;false&quot; /&gt;\r\n    \t\t\t&lt;property name=&quot;hibernate.dialect&quot;\r\n    \t\t\t\tvalue=&quot;org.hibernate.dialect.MySQL8Dialect&quot; /&gt;\r\n    \t\t\t&lt;property\r\n    \t\t\t\tname=&quot;javax.persistence.schema-generation.database.action&quot;\r\n    \t\t\t\tvalue=&quot;update&quot; /&gt;\r\n    \t\t\t&lt;property name=&quot;hibernate.format_sql&quot; value=&quot;false&quot; /&gt;\r\n    \t\t&lt;/properties&gt;\r\n    \t&lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nError trace:\r\n\r\n    16:56:18,220 INFO  [org.hibernate.hql.internal.QueryTranslatorFactoryInitiator] (default task-1) HHH000397: Using ASTQueryTranslatorFactory\r\n    17:00:30,129 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (default task-1) SQL Error: 0, SQLState: S1000\r\n    17:00:30,131 ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (default task-1) GC overhead limit exceeded\r\n    17:00:30,134 INFO  [org.hibernate.event.internal.DefaultLoadEventListener] (default task-1) HHH000327: Error performing load command : org.hibernate.exception.GenericJDBCException: could not extract ResultSet\r\n    17:00:55,899 ERROR [org.jboss.as.ejb3.invocation] (default task-1) WFLYEJB0034: EJB Invocation failed on component AccountService for method public java.util.List com.poth.portfoliomanager.service.AccountService.getAllAccounts(): javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not extract ResultSet\r\n    \tat org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:258)\r\n    \tat org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:374)\r\n    \tat org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:156)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)\r\n    \tat org.jboss.weld.module.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:72)\r\n    \tat org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:89)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:60)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:438)\r\n    \tat org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:627)\r\n    \tat org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:57)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)\r\n    \tat org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)\r\n    \tat org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)\r\n    \tat org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:81)\r\n    \tat com.poth.portfoliomanager.service.AccountService$$$view13.getAllAccounts(Unknown Source)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.jboss.weld.util.reflection.Reflections.invokeAndUnwrap(Reflections.java:410)\r\n    \tat org.jboss.weld.module.ejb.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:134)\r\n    \tat org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)\r\n    \tat org.jboss.weld.module.ejb.InjectionPointPropagatingEnterpriseTargetBeanInstance.invoke(InjectionPointPropagatingEnterpriseTargetBeanInstance.java:68)\r\n    \tat org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:106)\r\n    \tat com.poth.portfoliomanager.service.AccountService$Proxy$_$$_Weld$EnterpriseProxy$.getAllAccounts(Unknown Source)\r\n    \tat com.poth.portfoliomanager.view.queryBean.queryAccount(queryBean.java:42)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat com.sun.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:153)\r\n    \tat com.sun.el.parser.AstValue.invoke(AstValue.java:261)\r\n    \tat com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:237)\r\n    \tat org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\r\n    \tat org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\r\n    \tat org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\r\n    \tat org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\r\n    \tat com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:65)\r\n    \tat com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:66)\r\n    \tat com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:82)\r\n    \tat com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:71)\r\n    \tat org.primefaces.application.DialogActionListener.processAction(DialogActionListener.java:54)\r\n    \tat javax.faces.component.UICommand.broadcast(UICommand.java:222)\r\n    \tat javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)\r\n    \tat javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1396)\r\n    \tat com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:58)\r\n    \tat com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)\r\n    \tat com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)\r\n    \tat javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)\r\n    \tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)\r\n    \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\r\n    \tat io.opentracing.contrib.jaxrs2.server.SpanFinishingFilter.doFilter(SpanFinishingFilter.java:52)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n    \tat io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n    \tat io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\r\n    \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\r\n    \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\r\n    \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n    \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n    \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n    \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n    \tat io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n    \tat io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)\r\n    \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n    \tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)\r\n    \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:376)\r\n    \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)\r\n    \tat org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not extract ResultSet\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1515)\r\n    \tat org.hibernate.query.Query.getResultList(Query.java:132)\r\n    \tat com.poth.portfoliomanager.service.AccountService.getAllAccounts(AccountService.java:88)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)\r\n    \tat org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.delegateInterception(Jsr299BindingsInterceptor.java:79)\r\n    \tat org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:89)\r\n    \tat org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:102)\r\n    \tat org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:40)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)\r\n    \tat org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\r\n    \tat org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:249)\r\n    \t... 115 more\r\n    Caused by: org.hibernate.exception.GenericJDBCException: could not extract ResultSet\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:69)\r\n    \tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.getResultSet(AbstractLoadPlanBasedLoader.java:400)\r\n    \tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeQueryStatement(AbstractLoadPlanBasedLoader.java:172)\r\n    \tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:106)\r\n    \tat org.hibernate.loader.entity.plan.AbstractLoadPlanBasedEntityLoader.load(AbstractLoadPlanBasedEntityLoader.java:188)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:4289)\r\n    \tat org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:597)\r\n    \tat org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:565)\r\n    \tat org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:226)\r\n    \tat org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:350)\r\n    \tat org.hibernate.event.internal.DefaultLoadEventListener.doOnLoad(DefaultLoadEventListener.java:127)\r\n    \tat org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:93)\r\n    \tat org.hibernate.internal.SessionImpl.fireLoadNoChecks(SessionImpl.java:1277)\r\n    \tat org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:1149)\r\n    \tat org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:682)\r\n    \tat org.hibernate.type.EntityType.resolve(EntityType.java:464)\r\n    \tat org.hibernate.type.ManyToOneType.resolve(ManyToOneType.java:239)\r\n    \tat org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:205)\r\n    \tat org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:160)\r\n    \tat org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:1172)\r\n    \tat org.hibernate.loader.Loader.processResultSet(Loader.java:1022)\r\n    \tat org.hibernate.loader.Loader.doQuery(Loader.java:960)\r\n    \tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:351)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2787)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2770)\r\n    \tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2604)\r\n    \tat org.hibernate.loader.Loader.list(Loader.java:2599)\r\n    \tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:505)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:395)\r\n    \tat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:220)\r\n    \tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1526)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1538)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1506)\r\n    \t... 145 more\r\n    Caused by: java.sql.SQLException: GC overhead limit exceeded\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n    \tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\r\n    \tat com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1003)\r\n    \tat org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeQuery(WrappedPreparedStatement.java:504)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:60)\r\n    \t... 177 more\r\n    \r\n\r\n\r\n","title":"HHH000327: Error performing load command : org.hibernate.exception.GenericJDBCException: could not extract ResultSet","body":"<p>I am using JPA2.2 with Hibernate and a MySql database. I have a simple Entity (Account) and when I try to send a simple query, I get a hibernate Exception and crashes because it goes out of memory. Any help in tracking this issue will be great.</p>\n\n<p>Thanks.\nEntity: Account.java</p>\n\n<pre><code>@Entity\n@Table(name=\"account\")\npublic class Account implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"accountId\")\n    private Long accountId;\n\n    @Column(name = \"accountName\")\n    private String accountName;\n\n    @Column(name=\"startDate\")\n    private LocalDate startDate;\n\n    @Column(name=\"startBalance\")\n    private double startBalance;\n\n    @Embedded\n    private Summary summary = new Summary();\n\n    @ManyToOne\n    @JoinColumn(name=\"portfolioId\")\n    private Portfolio portfolio;\n\n    @OneToMany(fetch=FetchType.EAGER, mappedBy=\"account\", cascade=CascadeType.ALL)\n    private Set&lt;Asset&gt; assets = new HashSet&lt;Asset&gt;();\n\n    @OneToMany(fetch=FetchType.EAGER, mappedBy = \"account\", cascade=CascadeType.ALL)\n    @MapKey(name = \"startDate\")\n    private Map&lt;LocalDate, AccountCalculation&gt; accountCalculations = new HashMap&lt;LocalDate, AccountCalculation&gt;();\n\n    @OneToMany(fetch=FetchType.EAGER, mappedBy = \"account\", cascade=CascadeType.ALL)\n    @MapKey(name = \"year\")\n    private Map&lt;Integer, AccountSummary&gt; accountSummaries = new HashMap&lt;Integer, AccountSummary&gt;();\n\n    public Account() {\n        super();\n    }\n</code></pre>\n\n<p>Query to get All the Accounts</p>\n\n<pre><code>public List&lt;Account&gt; getAllAccounts() {\n    TypedQuery&lt;Account&gt; query = em.createQuery(\"SELECT a FROM Account a\", Account.class);\n    List&lt;Account&gt; results = query.getResultList();\n    return results;\n}\n</code></pre>\n\n<p>persistence.xml</p>\n\n<pre><code>&lt;persistence version=\"2.2\"\n    xmlns=\"http://xmlns.jcp.org/xml/ns/persistence\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd\"&gt;\n    &lt;persistence-unit name=\"portfoliomanager\" transaction-type=\"JTA\"&gt;\n        &lt;jta-data-source&gt;java:/PMDevDS&lt;/jta-data-source&gt;\n        &lt;!-- &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt; --&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.show_sql\" value=\"false\" /&gt;\n            &lt;property name=\"hibernate.dialect\"\n                value=\"org.hibernate.dialect.MySQL8Dialect\" /&gt;\n            &lt;property\n                name=\"javax.persistence.schema-generation.database.action\"\n                value=\"update\" /&gt;\n            &lt;property name=\"hibernate.format_sql\" value=\"false\" /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>Error trace:</p>\n\n<pre><code>16:56:18,220 INFO  [org.hibernate.hql.internal.QueryTranslatorFactoryInitiator] (default task-1) HHH000397: Using ASTQueryTranslatorFactory\n17:00:30,129 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (default task-1) SQL Error: 0, SQLState: S1000\n17:00:30,131 ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (default task-1) GC overhead limit exceeded\n17:00:30,134 INFO  [org.hibernate.event.internal.DefaultLoadEventListener] (default task-1) HHH000327: Error performing load command : org.hibernate.exception.GenericJDBCException: could not extract ResultSet\n17:00:55,899 ERROR [org.jboss.as.ejb3.invocation] (default task-1) WFLYEJB0034: EJB Invocation failed on component AccountService for method public java.util.List com.poth.portfoliomanager.service.AccountService.getAllAccounts(): javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not extract ResultSet\n    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:258)\n    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:374)\n    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:156)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)\n    at org.jboss.weld.module.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:72)\n    at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:89)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:60)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:438)\n    at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:627)\n    at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:57)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)\n    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)\n    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)\n    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:81)\n    at com.poth.portfoliomanager.service.AccountService$$$view13.getAllAccounts(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.jboss.weld.util.reflection.Reflections.invokeAndUnwrap(Reflections.java:410)\n    at org.jboss.weld.module.ejb.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:134)\n    at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)\n    at org.jboss.weld.module.ejb.InjectionPointPropagatingEnterpriseTargetBeanInstance.invoke(InjectionPointPropagatingEnterpriseTargetBeanInstance.java:68)\n    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:106)\n    at com.poth.portfoliomanager.service.AccountService$Proxy$_$$_Weld$EnterpriseProxy$.getAllAccounts(Unknown Source)\n    at com.poth.portfoliomanager.view.queryBean.queryAccount(queryBean.java:42)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at com.sun.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:153)\n    at com.sun.el.parser.AstValue.invoke(AstValue.java:261)\n    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:237)\n    at org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\n    at org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\n    at org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\n    at org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\n    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:65)\n    at com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:66)\n    at com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:82)\n    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:71)\n    at org.primefaces.application.DialogActionListener.processAction(DialogActionListener.java:54)\n    at javax.faces.component.UICommand.broadcast(UICommand.java:222)\n    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)\n    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1396)\n    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:58)\n    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)\n    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)\n    at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)\n    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n    at io.opentracing.contrib.jaxrs2.server.SpanFinishingFilter.doFilter(SpanFinishingFilter.java:52)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n    at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n    at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n    at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)\n    at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)\n    at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)\n    at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n    at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:376)\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)\n    at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not extract ResultSet\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1515)\n    at org.hibernate.query.Query.getResultList(Query.java:132)\n    at com.poth.portfoliomanager.service.AccountService.getAllAccounts(AccountService.java:88)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)\n    at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.delegateInterception(Jsr299BindingsInterceptor.java:79)\n    at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:89)\n    at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:102)\n    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:40)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)\n    at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)\n    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:249)\n    ... 115 more\nCaused by: org.hibernate.exception.GenericJDBCException: could not extract ResultSet\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:69)\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.getResultSet(AbstractLoadPlanBasedLoader.java:400)\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeQueryStatement(AbstractLoadPlanBasedLoader.java:172)\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:106)\n    at org.hibernate.loader.entity.plan.AbstractLoadPlanBasedEntityLoader.load(AbstractLoadPlanBasedEntityLoader.java:188)\n    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:4289)\n    at org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:597)\n    at org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:565)\n    at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:226)\n    at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:350)\n    at org.hibernate.event.internal.DefaultLoadEventListener.doOnLoad(DefaultLoadEventListener.java:127)\n    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:93)\n    at org.hibernate.internal.SessionImpl.fireLoadNoChecks(SessionImpl.java:1277)\n    at org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:1149)\n    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:682)\n    at org.hibernate.type.EntityType.resolve(EntityType.java:464)\n    at org.hibernate.type.ManyToOneType.resolve(ManyToOneType.java:239)\n    at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:205)\n    at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:160)\n    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:1172)\n    at org.hibernate.loader.Loader.processResultSet(Loader.java:1022)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:960)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:351)\n    at org.hibernate.loader.Loader.doList(Loader.java:2787)\n    at org.hibernate.loader.Loader.doList(Loader.java:2770)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2604)\n    at org.hibernate.loader.Loader.list(Loader.java:2599)\n    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:505)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:395)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:220)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1526)\n    at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1538)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1506)\n    ... 145 more\nCaused by: java.sql.SQLException: GC overhead limit exceeded\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1003)\n    at org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeQuery(WrappedPreparedStatement.java:504)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:60)\n    ... 177 more\n</code></pre>\n"},{"tags":["java","snowflake-cloud-data-platform"],"answers":[{"tags":[],"owner":{"account_id":45023,"reputation":55990,"user_id":132438,"accept_rate":43,"display_name":"Felipe Hoffa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671051941,"creation_date":1671051941,"answer_id":74804176,"question_id":74669931,"body_markdown":"Thanks for this question - I wrote a whole post going step-by-step to get this working:\r\n\r\n- https://hoffa.medium.com/free-ip-address-geolocation-with-maxmind-and-snowflake-676e74ea80b8\r\n\r\nYou had the right idea in the code you posted, a full working UDF would be:\r\n\r\n```sql\r\ncreate or replace function geoip2_country(ip String)\r\nreturns string\r\nlanguage java\r\nhandler = &#39;X.x&#39;\r\nimports = (&#39;@fh_jars/geoip2-4.0.0.jar&#39;\r\n         , &#39;@fh_jars/maxmind-db-3.0.0.jar&#39;\r\n         , &#39;@fh_jars/jackson-annotations-2.14.1.jar&#39;\r\n         , &#39;@fh_jars/jackson-core-2.14.1.jar&#39;\r\n         , &#39;@fh_jars/jackson-databind-2.14.1.jar&#39;)\r\nas $$\r\nimport java.io.File;\r\nimport java.net.InetAddress;\r\n\r\nimport com.snowflake.snowpark_java.types.SnowflakeFile;\r\nimport com.maxmind.geoip2.model.*;\r\nimport com.maxmind.geoip2.DatabaseReader;\r\nimport com.maxmind.geoip2.exception.AddressNotFoundException;\r\n\r\nclass X {\r\n    DatabaseReader _reader;\r\n    \r\n    public String x(String ip) throws Exception {\r\n        if (null == _reader) {\r\n            // lazy initialization\r\n            _reader = new DatabaseReader.Builder(SnowflakeFile.newInstance(&quot;@fh_jars/GeoLite2-Country.mmdb&quot;).getInputStream()).build();\r\n        }\r\n        try {\r\n            return _reader.country(InetAddress.getByName(ip)).getCountry().getIsoCode();\r\n        } catch (AddressNotFoundException e) {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n$$;\r\n```","title":"GeoIP2 Snowflake Java UDF Integration issue","body":"<p>Thanks for this question - I wrote a whole post going step-by-step to get this working:</p>\n<ul>\n<li><a href=\"https://hoffa.medium.com/free-ip-address-geolocation-with-maxmind-and-snowflake-676e74ea80b8\" rel=\"nofollow noreferrer\">https://hoffa.medium.com/free-ip-address-geolocation-with-maxmind-and-snowflake-676e74ea80b8</a></li>\n</ul>\n<p>You had the right idea in the code you posted, a full working UDF would be:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create or replace function geoip2_country(ip String)\nreturns string\nlanguage java\nhandler = 'X.x'\nimports = ('@fh_jars/geoip2-4.0.0.jar'\n         , '@fh_jars/maxmind-db-3.0.0.jar'\n         , '@fh_jars/jackson-annotations-2.14.1.jar'\n         , '@fh_jars/jackson-core-2.14.1.jar'\n         , '@fh_jars/jackson-databind-2.14.1.jar')\nas $$\nimport java.io.File;\nimport java.net.InetAddress;\n\nimport com.snowflake.snowpark_java.types.SnowflakeFile;\nimport com.maxmind.geoip2.model.*;\nimport com.maxmind.geoip2.DatabaseReader;\nimport com.maxmind.geoip2.exception.AddressNotFoundException;\n\nclass X {\n    DatabaseReader _reader;\n    \n    public String x(String ip) throws Exception {\n        if (null == _reader) {\n            // lazy initialization\n            _reader = new DatabaseReader.Builder(SnowflakeFile.newInstance(&quot;@fh_jars/GeoLite2-Country.mmdb&quot;).getInputStream()).build();\n        }\n        try {\n            return _reader.country(InetAddress.getByName(ip)).getCountry().getIsoCode();\n        } catch (AddressNotFoundException e) {\n            return null;\n        }\n    }\n}\n$$;\n</code></pre>\n"}],"owner":{"account_id":13533859,"reputation":117,"user_id":10192738,"display_name":"Kaido"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74804176,"answer_count":1,"score":1,"last_activity_date":1671051941,"creation_date":1670095302,"question_id":74669931,"body_markdown":"I want to create a Java UDF in a snowflake worksheet in order to query GeoIp2 library and get the ISO code of a given IP. I have &#39;@AWS_CSV_STAGE/lib/geoip2-2.8.0.jar&#39;,&#39;@AWS_CSV_STAGE/geodata/GeoLite2-City.mmdb&#39;\r\nalready staged. How can i direct the function handler to the method that creates the Database Reader as explained here in the documentation for Java:\r\nhttps://dev.maxmind.com/geoip/geolocate-an-ip/databases?lang=en#1-install-the-geoip2-client-library\r\nin general how can i achieve this whole thing below in my udf?\r\n```\r\nFile database = new File(&quot;/path/to/maxmind-database.mmdb&quot;)\r\nDatabaseReader reader = new DatabaseReader.Builder(database).build();\r\nInetAddress ipAddress = InetAddress.getByName(&quot;128.101.101.101&quot;);\r\nCityResponse response = reader.city(ipAddress);\r\nCountry country = response.getCountry();\r\n```\r\nso far i wrote this but of course it&#39;s not working:\r\nanyway i couldn&#39;t find much material about how to tackle this kind of problem.\r\n\r\n```\r\nCREATE OR REPLACE FUNCTION GEO()\r\n  returns varchar not null\r\n  language java\r\n  imports = (&#39;@AWS_CSV_STAGE/lib/geoip2-2.8.0.jar&#39;,&#39;@AWS_CSV_STAGE/geodata/GeoLite2-City.mmdb&#39;)\r\n  handler = &#39;DatabaseReader.Builder&#39;;\r\n\r\nSELECT GEO();\r\n```\r\nbasically what i want to achieve is to call the UDF on a column of ip address table and get the country code in another column for each ip address. ","title":"GeoIP2 Snowflake Java UDF Integration issue","body":"<p>I want to create a Java UDF in a snowflake worksheet in order to query GeoIp2 library and get the ISO code of a given IP. I have '@AWS_CSV_STAGE/lib/geoip2-2.8.0.jar','@AWS_CSV_STAGE/geodata/GeoLite2-City.mmdb'\nalready staged. How can i direct the function handler to the method that creates the Database Reader as explained here in the documentation for Java:\n<a href=\"https://dev.maxmind.com/geoip/geolocate-an-ip/databases?lang=en#1-install-the-geoip2-client-library\" rel=\"nofollow noreferrer\">https://dev.maxmind.com/geoip/geolocate-an-ip/databases?lang=en#1-install-the-geoip2-client-library</a>\nin general how can i achieve this whole thing below in my udf?</p>\n<pre><code>File database = new File(&quot;/path/to/maxmind-database.mmdb&quot;)\nDatabaseReader reader = new DatabaseReader.Builder(database).build();\nInetAddress ipAddress = InetAddress.getByName(&quot;128.101.101.101&quot;);\nCityResponse response = reader.city(ipAddress);\nCountry country = response.getCountry();\n</code></pre>\n<p>so far i wrote this but of course it's not working:\nanyway i couldn't find much material about how to tackle this kind of problem.</p>\n<pre><code>CREATE OR REPLACE FUNCTION GEO()\n  returns varchar not null\n  language java\n  imports = ('@AWS_CSV_STAGE/lib/geoip2-2.8.0.jar','@AWS_CSV_STAGE/geodata/GeoLite2-City.mmdb')\n  handler = 'DatabaseReader.Builder';\n\nSELECT GEO();\n</code></pre>\n<p>basically what i want to achieve is to call the UDF on a column of ip address table and get the country code in another column for each ip address.</p>\n"},{"tags":["java","menu","char","switch-statement","do-while"],"answers":[{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671051818,"creation_date":1671039369,"answer_id":74802218,"question_id":74801397,"body_markdown":"Don&#39;t recreate the scanner each time `menu` is called.  Create it once at start of main and use it, such as:\r\n\r\n    public static Scanner input = new Scanner(System.in);\r\n\r\n    public static void main(String[] args) {\r\n        // same code...until end of main...\r\n        input.close();\r\n        System.exit(0);\r\n    }\r\n\r\nand in `menu`:\r\n\r\n    public static char menu() {\r\n        // same prompts...\r\n\r\n        //REMOVE    Scanner input = new Scanner(System.in);\r\n        char ch = input.next().charAt(0);\r\n        //REMOVE    input.close();\r\n        return ch;\r\n    }\r\n","title":"How to do a switch menu in java with do while","body":"<p>Don't recreate the scanner each time <code>menu</code> is called.  Create it once at start of main and use it, such as:</p>\n<pre><code>public static Scanner input = new Scanner(System.in);\n\npublic static void main(String[] args) {\n    // same code...until end of main...\n    input.close();\n    System.exit(0);\n}\n</code></pre>\n<p>and in <code>menu</code>:</p>\n<pre><code>public static char menu() {\n    // same prompts...\n\n    //REMOVE    Scanner input = new Scanner(System.in);\n    char ch = input.next().charAt(0);\n    //REMOVE    input.close();\n    return ch;\n}\n</code></pre>\n"}],"owner":{"account_id":27252758,"reputation":13,"user_id":20776919,"display_name":"John AZ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74802218,"answer_count":1,"score":1,"last_activity_date":1671051818,"creation_date":1671035499,"question_id":74801397,"body_markdown":"Good day!\r\n\r\nThis is my switch menu for a project in java!\r\n\r\nWhen I put a diferent letter (letter that it&#180;s not in the switch) I get this error message, and when I try one of the correct letter I get the same error message again:\r\n\r\n```\r\nException in thread &quot;main&quot; java.util.NoSuchElementException\r\n        at java.base/java.util.Scanner.throwFor(Scanner.java:937)\r\n        at java.base/java.util.Scanner.next(Scanner.java:1478)\r\n        at teste.menu(teste.java:65)\r\n        at teste.main(teste.java:16)\r\n```\r\n\r\n\r\nThis is my code: \r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class teste{\r\n  public static void main(String[] args){\r\n\r\n    char ch;\r\n    do {\r\n      ch = menu();\r\n      switch (ch){\r\n        case &#39;a&#39;:\r\n          //String name =&quot;resultado.csv&quot;;\r\n          //ReadFile(name);\r\n          break;\r\n        case &#39;b&#39;:\r\n          //WriteFile();\r\n          break;\r\n        case &#39;c&#39;:\r\n          System.out.println(&quot;nome&quot;);\r\n          break;\r\n        case &#39;d&#39;:\r\n          System.out.println(&quot;nome&quot;);\r\n          break;\r\n        case &#39;e&#39;:\r\n          System.out.println(&quot;nome&quot;);\r\n          break;\r\n        case &#39;f&#39;:\r\n          System.out.println(&quot;nome&quot;);\r\n          break;\r\n        case &#39;g&#39;:\r\n          System.out.println(&quot;nome&quot;);\r\n          break;\r\n        case &#39;h&#39;:\r\n          System.out.println(&quot;nome&quot;);\r\n          break;\r\n        default:\r\n          System.out.println(&quot;a-k!&quot;);\r\n          break;\r\n      }\r\n    }while (ch != &#39;k&#39;);\r\n\r\n    System.exit(0);\r\n\r\n  }\r\n\r\n  public static char menu(){\r\n    System.out.println(&quot;Chose: &quot;);\r\n    System.out.println(&quot;a: Show&quot;);\r\n    System.out.println(&quot;b: Write&quot;);\r\n    System.out.println(&quot;c: All Numbers Are the Same&quot;);\r\n    System.out.println(&quot;d: Sum Between Two Integers&quot;);\r\n    System.out.println(&quot;e: Repeat the String&quot;);\r\n    System.out.println(&quot;f: It is Palindrome&quot;);\r\n    System.out.println(&quot;g: Display&quot;);\r\n    System.out.println(&quot;h: Display&quot;);\r\n    System.out.println(&quot;k: Quit&quot;);\r\n    System.out.println(&quot;Insira a op&#231;&#227;o: &quot;);\r\n    Scanner input = new Scanner(System.in);\r\n    char ch = input.next().charAt(0);\r\n    input.close();\r\n    return ch;\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\nI tryed with numbers and I got the same error message\r\n","title":"How to do a switch menu in java with do while","body":"<p>Good day!</p>\n<p>This is my switch menu for a project in java!</p>\n<p>When I put a diferent letter (letter that it´s not in the switch) I get this error message, and when I try one of the correct letter I get the same error message again:</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException\n        at java.base/java.util.Scanner.throwFor(Scanner.java:937)\n        at java.base/java.util.Scanner.next(Scanner.java:1478)\n        at teste.menu(teste.java:65)\n        at teste.main(teste.java:16)\n</code></pre>\n<p>This is my code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class teste{\n  public static void main(String[] args){\n\n    char ch;\n    do {\n      ch = menu();\n      switch (ch){\n        case 'a':\n          //String name =&quot;resultado.csv&quot;;\n          //ReadFile(name);\n          break;\n        case 'b':\n          //WriteFile();\n          break;\n        case 'c':\n          System.out.println(&quot;nome&quot;);\n          break;\n        case 'd':\n          System.out.println(&quot;nome&quot;);\n          break;\n        case 'e':\n          System.out.println(&quot;nome&quot;);\n          break;\n        case 'f':\n          System.out.println(&quot;nome&quot;);\n          break;\n        case 'g':\n          System.out.println(&quot;nome&quot;);\n          break;\n        case 'h':\n          System.out.println(&quot;nome&quot;);\n          break;\n        default:\n          System.out.println(&quot;a-k!&quot;);\n          break;\n      }\n    }while (ch != 'k');\n\n    System.exit(0);\n\n  }\n\n  public static char menu(){\n    System.out.println(&quot;Chose: &quot;);\n    System.out.println(&quot;a: Show&quot;);\n    System.out.println(&quot;b: Write&quot;);\n    System.out.println(&quot;c: All Numbers Are the Same&quot;);\n    System.out.println(&quot;d: Sum Between Two Integers&quot;);\n    System.out.println(&quot;e: Repeat the String&quot;);\n    System.out.println(&quot;f: It is Palindrome&quot;);\n    System.out.println(&quot;g: Display&quot;);\n    System.out.println(&quot;h: Display&quot;);\n    System.out.println(&quot;k: Quit&quot;);\n    System.out.println(&quot;Insira a opção: &quot;);\n    Scanner input = new Scanner(System.in);\n    char ch = input.next().charAt(0);\n    input.close();\n    return ch;\n  }\n\n}\n\n</code></pre>\n<p>I tryed with numbers and I got the same error message</p>\n"},{"tags":["java","docker","maven","clojure"],"comments":[{"owner":{"account_id":278496,"reputation":1624,"user_id":573110,"accept_rate":78,"display_name":"Harold"},"score":0,"creation_date":1674056642,"post_id":74804062,"comment_id":132634338,"body_markdown":"Is the clojure jar in the docker image, and on the classpath? It may help if you share some information about how you prepared the docker image.","body":"Is the clojure jar in the docker image, and on the classpath? It may help if you share some information about how you prepared the docker image."}],"owner":{"account_id":2276463,"reputation":2628,"user_id":2002580,"accept_rate":81,"display_name":"BWStearns"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671051219,"creation_date":1671051219,"question_id":74804062,"body_markdown":"I&#39;m getting `ArtifactDescriptorException: Failed to read artifact descriptor for org.clojure:clojure:jar` when running a literal hello world program using the command `clojure -M file.clj` in a docker container. No issue doing it locally. Some googling suggests it might be a maven issue but there&#39;re no dependencies so I don&#39;t see why it&#39;s trying to get anything from a maven repo.\r\n\r\nFull error output:\r\n\r\n```\r\norg.clojure:clojure:jar:1.10.2\r\norg.eclipse.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.clojure:clojure:jar:1.10.2\r\nat org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:255)\r\nat org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor(DefaultArtifactDescriptorReader.java:171)\r\nat org.eclipse.aether.internal.impl.DefaultRepositorySystem.readArtifactDescriptor(DefaultRepositorySystem.java:255)\r\nat clojure.tools.deps.alpha.extensions.maven$eval1068$fn__1070.invoke(maven.clj:107)\r\nat clojure.lang.MultiFn.invoke(MultiFn.java:244)\r\nat clojure.tools.deps.alpha$expand_deps$children_task__785$fn__787$fn__788.invoke(alpha.clj:403)\r\nat clojure.tools.deps.alpha.util.concurrent$submit_task$task__502.invoke(concurrent.clj:34)\r\nat clojure.lang.AFn.call(AFn.java:18)\r\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\nat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.eclipse.aether.resolution.ArtifactResolutionException: Could not transfer artifact org.clojure:clojure:pom:1.10.2 from/to central (https://repo1.maven.org/maven2/): repo1.maven.org: Temporary failure in name resolution\r\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:424)\r\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:229)\r\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:207)\r\nat org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:240)\r\n... 11 more\r\nCaused by: org.eclipse.aether.transfer.ArtifactTransferException: Could not transfer artifact org.clojure:clojure:pom:1.10.2 from/to central (https://repo1.maven.org/maven2/): repo1.maven.org: Temporary failure in name resolution\r\nat org.eclipse.aether.connector.basic.ArtifactTransportListener.transferFailed(ArtifactTransportListener.java:52)\r\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector$TaskRunner.run(BasicRepositoryConnector.java:369)\r\nat org.eclipse.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:75)\r\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector$DirectExecutor.execute(BasicRepositoryConnector.java:628)\r\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector.get(BasicRepositoryConnector.java:262)\r\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.performDownloads(DefaultArtifactResolver.java:499)\r\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:401)\r\n... 14 more\r\nCaused by: java.net.UnknownHostException: repo1.maven.org: Temporary failure in name resolution\r\nat java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\r\nat java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:929)\r\nat java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1529)\r\nat java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:848)\r\nat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1519)\r\nat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1378)\r\nat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1306)\r\nat org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:45)\r\nat org.apache.http.impl.conn.DefaultClientConnectionOperator.resolveHostname(DefaultClientConnectionOperator.java:263)\r\nat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:162)\r\nat org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:326)\r\nat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:605)\r\nat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:440)\r\nat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\r\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)\r\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\nat org.apache.http.impl.client.DecompressingHttpClient.execute(DecompressingHttpClient.java:164)\r\nat org.eclipse.aether.transport.http.HttpTransporter.execute(HttpTransporter.java:290)\r\nat org.eclipse.aether.transport.http.HttpTransporter.implGet(HttpTransporter.java:246)\r\nat org.eclipse.aether.spi.connector.transport.AbstractTransporter.get(AbstractTransporter.java:67)\r\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector$GetTaskRunner.runTask(BasicRepositoryConnector.java:457)\r\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector$TaskRunner.run(BasicRepositoryConnector.java:364)\r\n... 19 more\r\n```","title":"ArtifactDescriptorException when running a clojure hello world in a docker container","body":"<p>I'm getting <code>ArtifactDescriptorException: Failed to read artifact descriptor for org.clojure:clojure:jar</code> when running a literal hello world program using the command <code>clojure -M file.clj</code> in a docker container. No issue doing it locally. Some googling suggests it might be a maven issue but there're no dependencies so I don't see why it's trying to get anything from a maven repo.</p>\n<p>Full error output:</p>\n<pre><code>org.clojure:clojure:jar:1.10.2\norg.eclipse.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.clojure:clojure:jar:1.10.2\nat org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:255)\nat org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor(DefaultArtifactDescriptorReader.java:171)\nat org.eclipse.aether.internal.impl.DefaultRepositorySystem.readArtifactDescriptor(DefaultRepositorySystem.java:255)\nat clojure.tools.deps.alpha.extensions.maven$eval1068$fn__1070.invoke(maven.clj:107)\nat clojure.lang.MultiFn.invoke(MultiFn.java:244)\nat clojure.tools.deps.alpha$expand_deps$children_task__785$fn__787$fn__788.invoke(alpha.clj:403)\nat clojure.tools.deps.alpha.util.concurrent$submit_task$task__502.invoke(concurrent.clj:34)\nat clojure.lang.AFn.call(AFn.java:18)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\nat java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.eclipse.aether.resolution.ArtifactResolutionException: Could not transfer artifact org.clojure:clojure:pom:1.10.2 from/to central (https://repo1.maven.org/maven2/): repo1.maven.org: Temporary failure in name resolution\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:424)\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:229)\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:207)\nat org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:240)\n... 11 more\nCaused by: org.eclipse.aether.transfer.ArtifactTransferException: Could not transfer artifact org.clojure:clojure:pom:1.10.2 from/to central (https://repo1.maven.org/maven2/): repo1.maven.org: Temporary failure in name resolution\nat org.eclipse.aether.connector.basic.ArtifactTransportListener.transferFailed(ArtifactTransportListener.java:52)\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector$TaskRunner.run(BasicRepositoryConnector.java:369)\nat org.eclipse.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:75)\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector$DirectExecutor.execute(BasicRepositoryConnector.java:628)\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector.get(BasicRepositoryConnector.java:262)\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.performDownloads(DefaultArtifactResolver.java:499)\nat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:401)\n... 14 more\nCaused by: java.net.UnknownHostException: repo1.maven.org: Temporary failure in name resolution\nat java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\nat java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:929)\nat java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1529)\nat java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:848)\nat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1519)\nat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1378)\nat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1306)\nat org.apache.http.impl.conn.SystemDefaultDnsResolver.resolve(SystemDefaultDnsResolver.java:45)\nat org.apache.http.impl.conn.DefaultClientConnectionOperator.resolveHostname(DefaultClientConnectionOperator.java:263)\nat org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:162)\nat org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:326)\nat org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:605)\nat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:440)\nat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835)\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)\nat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\nat org.apache.http.impl.client.DecompressingHttpClient.execute(DecompressingHttpClient.java:164)\nat org.eclipse.aether.transport.http.HttpTransporter.execute(HttpTransporter.java:290)\nat org.eclipse.aether.transport.http.HttpTransporter.implGet(HttpTransporter.java:246)\nat org.eclipse.aether.spi.connector.transport.AbstractTransporter.get(AbstractTransporter.java:67)\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector$GetTaskRunner.runTask(BasicRepositoryConnector.java:457)\nat org.eclipse.aether.connector.basic.BasicRepositoryConnector$TaskRunner.run(BasicRepositoryConnector.java:364)\n... 19 more\n</code></pre>\n"},{"tags":["java","date","parsing","timezone-offset","datetime-parsing"],"comments":[{"owner":{"account_id":7757959,"reputation":2450,"user_id":5871602,"accept_rate":100,"display_name":"Daniel E."},"score":0,"creation_date":1526369848,"post_id":50344734,"comment_id":87705170,"body_markdown":"wich language ?","body":"wich language ?"},{"owner":{"account_id":7782807,"reputation":208,"user_id":9679216,"display_name":"Nyle Hassan"},"score":0,"creation_date":1526369939,"post_id":50344734,"comment_id":87705235,"body_markdown":"Have a look at this, https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html","body":"Have a look at this, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/time/format/&hellip;</a>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1526371393,"post_id":50344734,"comment_id":87706062,"body_markdown":"Okay, so after a lot of banging my head against a brick wall - `+3:00` is not a valid value for the formatter, it MUST have a leading zero `+03:00` :/. After I corrected for that, I ended up using `yyyy-MM-dd HH:mm:ss.n z` for `DateTimeFormatter`","body":"Okay, so after a lot of banging my head against a brick wall - <code>+3:00</code> is not a valid value for the formatter, it MUST have a leading zero <code>+03:00</code> :/. After I corrected for that, I ended up using <code>yyyy-MM-dd HH:mm:ss.n z</code> for <code>DateTimeFormatter</code>"},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":0,"creation_date":1526371892,"post_id":50344734,"comment_id":87706324,"body_markdown":"Exactly what MadProgrammer says. You can not parse this date with java&#39;s default parsers. Other than writing a custom parser (which I don&#39;t recommend) you should programmatically add a leading 0 to your offset and parse it as a `ZonedDateTime`","body":"Exactly what MadProgrammer says. You can not parse this date with java&#39;s default parsers. Other than writing a custom parser (which I don&#39;t recommend) you should programmatically add a leading 0 to your offset and parse it as a <code>ZonedDateTime</code>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1526371929,"post_id":50344734,"comment_id":87706346,"body_markdown":"... or get the format correct at it&#39;s source","body":"... or get the format correct at it&#39;s source"},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":1,"creation_date":1526371973,"post_id":50344734,"comment_id":87706369,"body_markdown":"That would obviously be the preferred way. I never understand when programs don&#39;t just simply abide by ISO 8601 for time formatting.","body":"That would obviously be the preferred way. I never understand when programs don&#39;t just simply abide by ISO 8601 for time formatting."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1526372040,"post_id":50344734,"comment_id":87706401,"body_markdown":"I believe that neither Java’s standard formatters nor those you can build from a format pAttern string can parse an offset with 1-digit hours such as `+3:00`. `DateTimeFormatterBuilder.appendOffset()` allows you to control the format of the offset, for example `+H:MM:ss` - hour and minute, with second if non-zero, with colon.","body":"I believe that neither Java’s standard formatters nor those you can build from a format pAttern string can parse an offset with 1-digit hours such as <code>+3:00</code>. <code>DateTimeFormatterBuilder.appendOffset()</code> allows you to control the format of the offset, for example <code>+H:MM:ss</code> - hour and minute, with second if non-zero, with colon."},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":1,"creation_date":1526372218,"post_id":50344734,"comment_id":87706505,"body_markdown":"@OleV.V. good idea but sadly the pattern does not allow `H` only, it has to be `HH` or you run into an `IllegalArgumentException`","body":"@OleV.V. good idea but sadly the pattern does not allow <code>H</code> only, it has to be <code>HH</code> or you run into an <code>IllegalArgumentException</code>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1526372477,"post_id":50344734,"comment_id":87706636,"body_markdown":"@Ben You are partly correct: it does not work in Java 8, but it does in Java 9 and 10.","body":"@Ben You are partly correct: it does not work in Java 8, but it does in Java 9 and 10."},{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":0,"creation_date":1526372527,"post_id":50344734,"comment_id":87706668,"body_markdown":"@OleV.V. that&#39;s actually very good to know! Thanks! Haven&#39;t looked at that particularly in Java 9/10 yet. TIL.","body":"@OleV.V. that&#39;s actually very good to know! Thanks! Haven&#39;t looked at that particularly in Java 9/10 yet. TIL."},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1526372714,"post_id":50344734,"comment_id":87706778,"body_markdown":"Possible duplicate of [How to parse a date?](https://stackoverflow.com/questions/999172/how-to-parse-a-date)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/999172/how-to-parse-a-date\">How to parse a date?</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1526373650,"post_id":50344734,"comment_id":87707350,"body_markdown":"@AxelH I was thinking the same at first. The real problem in this question is how to parse the offset with one-digit hours, and the question you are linking to certainly doesn’t address that. It’s not really explained in this question that this is the real problem, though.","body":"@AxelH I was thinking the same at first. The real problem in this question is how to parse the offset with one-digit hours, and the question you are linking to certainly doesn’t address that. It’s not really explained in this question that this is the real problem, though."},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1526373809,"post_id":50344734,"comment_id":87707448,"body_markdown":"Well @OleV.V., the answer provide the documentation of `SimpleDateFormat` (and other provide the ISO for java.time) where we can found that this offset is not a valid offset (until java 9 based on your answer). This answer partially the &quot;how to parse that format&quot; since this can&#39;&#39;t be done directly (not without some modification of the `String`). So I think this would still be a correct answer (we can&#39;t write an answer for every possible format that can be written, sometime reading the manual should be enough). But I see what you mean, this might be a borderline duplicate ;)","body":"Well @OleV.V., the answer provide the documentation of <code>SimpleDateFormat</code> (and other provide the ISO for java.time) where we can found that this offset is not a valid offset (until java 9 based on your answer). This answer partially the &quot;how to parse that format&quot; since this can&#39;&#39;t be done directly (not without some modification of the <code>String</code>). So I think this would still be a correct answer (we can&#39;t write an answer for every possible format that can be written, sometime reading the manual should be enough). But I see what you mean, this might be a borderline duplicate ;)"}],"answers":[{"tags":[],"owner":{"account_id":11506001,"reputation":81,"user_id":8432211,"display_name":"tomasomsk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526372377,"creation_date":1526372377,"answer_id":50345466,"question_id":50344734,"body_markdown":"Comment from MadProgrammer is really helpful. Thanks, man. \r\nAt first I add 0 before 3 in timezone and my string had became &#39;2018-05-15 09:32:51.550082 +03:00&#39; and then I use DateTimeFormatter &#39;yyyy-MM-dd HH:mm:ss.n z&#39; and all works now. Thanks to all","title":"Parse date-time from String with offset with one-digit hours","body":"<p>Comment from MadProgrammer is really helpful. Thanks, man. \nAt first I add 0 before 3 in timezone and my string had became '2018-05-15 09:32:51.550082 +03:00' and then I use DateTimeFormatter 'yyyy-MM-dd HH:mm:ss.n z' and all works now. Thanks to all</p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1671050442,"creation_date":1526372564,"answer_id":50345524,"question_id":50344734,"body_markdown":"Java 9 and later allows:\r\n\r\n\t\tString dateTimeString = &quot;2018-05-15 09:32:51.550082 +3:00&quot;;\r\n\t\tDateTimeFormatter formatter = new DateTimeFormatterBuilder()\r\n\t\t\t\t.appendPattern(&quot;uuuu-MM-dd HH:mm:ss.SSSSSS &quot;)\r\n\t\t\t\t.appendOffset(&quot;+H:MM:ss&quot;, &quot;+0:00&quot;)\r\n\t\t\t\t.toFormatter();\r\n\t\tOffsetDateTime dateTime = OffsetDateTime.parse(dateTimeString, formatter);\r\n\t\tSystem.out.println(dateTime);\r\n\r\nOutput:\r\n\r\n&gt; 2018-05-15T09:32:51.550082+03:00\r\n\r\nFor Java 8 or the ThreeTen Backport you will probably have to prepare your date-time string before parsing it:\r\n\r\n\t\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss.SSSSSS XXX&quot;);\r\n\t\tdateTimeString \r\n\t\t\t\t= dateTimeString.replaceFirst(&quot;([+-])(\\\\d(?::\\\\d\\\\d){0,2})$&quot;, &quot;$10$2&quot;);\r\n\r\nThe rest is as before and gives the same result. The `replaceFirst` call inserts a `0` between the `+` and `3:00`, but only if the hours were only one digit. The regular expression is hard to read, so you will prefer the Java 9 solution.\r\n\r\nAs already discussed in the comments the hard part is the offset of `+3:00`. Java’s built-in formatters and the format pattern letters you can use for specifying your own format all require two-digit hours in the offset. The `DateTimeFormatterBuilder.appendOffset` method that I am using allows a limited number of formats to be specified; 9 different formats in Java 8; 22 in Java 9. Link: [Documentation of `appendOffset()`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/format/DateTimeFormatterBuilder.html#appendOffset(java.lang.String,java.lang.String)).","title":"Parse date-time from String with offset with one-digit hours","body":"<p>Java 9 and later allows:</p>\n<pre><code>    String dateTimeString = &quot;2018-05-15 09:32:51.550082 +3:00&quot;;\n    DateTimeFormatter formatter = new DateTimeFormatterBuilder()\n            .appendPattern(&quot;uuuu-MM-dd HH:mm:ss.SSSSSS &quot;)\n            .appendOffset(&quot;+H:MM:ss&quot;, &quot;+0:00&quot;)\n            .toFormatter();\n    OffsetDateTime dateTime = OffsetDateTime.parse(dateTimeString, formatter);\n    System.out.println(dateTime);\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>2018-05-15T09:32:51.550082+03:00</p>\n</blockquote>\n<p>For Java 8 or the ThreeTen Backport you will probably have to prepare your date-time string before parsing it:</p>\n<pre><code>    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss.SSSSSS XXX&quot;);\n    dateTimeString \n            = dateTimeString.replaceFirst(&quot;([+-])(\\\\d(?::\\\\d\\\\d){0,2})$&quot;, &quot;$10$2&quot;);\n</code></pre>\n<p>The rest is as before and gives the same result. The <code>replaceFirst</code> call inserts a <code>0</code> between the <code>+</code> and <code>3:00</code>, but only if the hours were only one digit. The regular expression is hard to read, so you will prefer the Java 9 solution.</p>\n<p>As already discussed in the comments the hard part is the offset of <code>+3:00</code>. Java’s built-in formatters and the format pattern letters you can use for specifying your own format all require two-digit hours in the offset. The <code>DateTimeFormatterBuilder.appendOffset</code> method that I am using allows a limited number of formats to be specified; 9 different formats in Java 8; 22 in Java 9. Link: <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/format/DateTimeFormatterBuilder.html#appendOffset(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">Documentation of <code>appendOffset()</code></a>.</p>\n"}],"owner":{"account_id":11506001,"reputation":81,"user_id":8432211,"display_name":"tomasomsk"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1682,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"accepted_answer_id":50345524,"answer_count":2,"score":4,"last_activity_date":1671050442,"creation_date":1526369768,"question_id":50344734,"body_markdown":"I need to parse date in Java. I have String value `2018-05-15 09:32:51.550082 +3:00` and I need to parse it into date-time. I tried to parse to `ZonedDateTime`, but I got an error at index 10. Tried to parse with `DateTimeFormatter` parser &#39;yyyy-MM-dd HH:mm:ss.SSSSSS Z&#39; and got error at index 26. Apparently my UTC offset of `+3:00` cannot be parsed. How can I do this?","title":"Parse date-time from String with offset with one-digit hours","body":"<p>I need to parse date in Java. I have String value <code>2018-05-15 09:32:51.550082 +3:00</code> and I need to parse it into date-time. I tried to parse to <code>ZonedDateTime</code>, but I got an error at index 10. Tried to parse with <code>DateTimeFormatter</code> parser 'yyyy-MM-dd HH:mm:ss.SSSSSS Z' and got error at index 26. Apparently my UTC offset of <code>+3:00</code> cannot be parsed. How can I do this?</p>\n"},{"tags":["java","generics","haskell","polymorphism","higher-kinded-types"],"comments":[{"owner":{"account_id":31498,"reputation":12813,"user_id":86515,"accept_rate":100,"display_name":"KitsuneYMG"},"score":1,"creation_date":1242650892,"post_id":876948,"comment_id":684775,"body_markdown":"What is the actual problem you are trying to solve with this? Could it not be more easily solved using a template?","body":"What is the actual problem you are trying to solve with this? Could it not be more easily solved using a template?"}],"answers":[{"tags":[],"owner":{"account_id":2961,"reputation":70821,"user_id":4203,"accept_rate":90,"display_name":"Hank Gay"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1671050135,"creation_date":1242640526,"answer_id":876966,"question_id":876948,"body_markdown":"In order to pass a type parameter, the type definition has to declare that it accepts one (it has to be *generic*). Apparently, your `F` is not a generic type.\r\n\r\nUPDATE: The line\r\n\r\n    F&lt;Fix&lt;F&gt;&gt; in;\r\n\r\ndeclares a variable of type `F` which accepts a type parameter, the value of which is `Fix`, which itself accepts a type parameter, the value of which is `F`. `F` isn&#39;t even defined in your example. I think you *may* want\r\n\r\n    Fix&lt;F&gt; in;\r\n\r\nThat will give you a variable of type `Fix` (the type you did define in your example) to which you are passing a type parameter with value `F`. Since `Fix` is defined to accept a type parameter, this works.\r\n\r\nUPDATE 2: Reread your title, and now I think you might be trying to do something similar to the approach presented in [&quot;Towards Equal Rights for Higher-Kinded Types&quot;][1] (PDF alert). If so, Java doesn&#39;t support that, but you might try Scala.\r\n\r\n[1]: https://web.archive.org/web/20091229052347id_/http://www.cs.kuleuven.be/~adriaan/files/higher.pdf\r\n\r\n","title":"Higher-kinded generics in Java","body":"<p>In order to pass a type parameter, the type definition has to declare that it accepts one (it has to be <em>generic</em>). Apparently, your <code>F</code> is not a generic type.</p>\n<p>UPDATE: The line</p>\n<pre><code>F&lt;Fix&lt;F&gt;&gt; in;\n</code></pre>\n<p>declares a variable of type <code>F</code> which accepts a type parameter, the value of which is <code>Fix</code>, which itself accepts a type parameter, the value of which is <code>F</code>. <code>F</code> isn't even defined in your example. I think you <em>may</em> want</p>\n<pre><code>Fix&lt;F&gt; in;\n</code></pre>\n<p>That will give you a variable of type <code>Fix</code> (the type you did define in your example) to which you are passing a type parameter with value <code>F</code>. Since <code>Fix</code> is defined to accept a type parameter, this works.</p>\n<p>UPDATE 2: Reread your title, and now I think you might be trying to do something similar to the approach presented in <a href=\"https://web.archive.org/web/20091229052347id_/http://www.cs.kuleuven.be/%7Eadriaan/files/higher.pdf\" rel=\"nofollow noreferrer\">&quot;Towards Equal Rights for Higher-Kinded Types&quot;</a> (PDF alert). If so, Java doesn't support that, but you might try Scala.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1242641611,"creation_date":1242641611,"answer_id":877036,"question_id":876948,"body_markdown":"It looks as if you may want something like:\r\n\r\n    public class Fix&lt;F extends Fix&lt;F&gt;&gt; {\r\n        private F in;\r\n    }\r\n\r\n(See the Enum class, and questions about its generics.)","title":"Higher-kinded generics in Java","body":"<p>It looks as if you may want something like:</p>\n\n<pre><code>public class Fix&lt;F extends Fix&lt;F&gt;&gt; {\n    private F in;\n}\n</code></pre>\n\n<p>(See the Enum class, and questions about its generics.)</p>\n"},{"tags":[],"owner":{"account_id":8456,"reputation":22280,"user_id":15255,"accept_rate":89,"display_name":"Zarkonnen"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1343468175,"creation_date":1242641726,"answer_id":877041,"question_id":876948,"body_markdown":"I think what you&#39;re trying to do is simply not supported by Java generics. The simpler case of\r\n\r\n    public class Foo&lt;T&gt; {\r\n        public T&lt;String&gt; bar() { return null; }\r\n    }\r\n\r\nalso does not compile using javac.\r\n\r\nSince Java does not know at compile-time what `T` is, it can&#39;t guarantee that `T&lt;String&gt;` is at all meaningful. For example if you created a `Foo&lt;BufferedImage&gt;`, `bar` would have the signature\r\n\r\n    public BufferedImage&lt;String&gt; bar()\r\n\r\nwhich is nonsensical. Since there is no mechanism to force you to only instantiate `Foo`s with generic `T`s, it refuses to compile.","title":"Higher-kinded generics in Java","body":"<p>I think what you're trying to do is simply not supported by Java generics. The simpler case of</p>\n\n<pre><code>public class Foo&lt;T&gt; {\n    public T&lt;String&gt; bar() { return null; }\n}\n</code></pre>\n\n<p>also does not compile using javac.</p>\n\n<p>Since Java does not know at compile-time what <code>T</code> is, it can't guarantee that <code>T&lt;String&gt;</code> is at all meaningful. For example if you created a <code>Foo&lt;BufferedImage&gt;</code>, <code>bar</code> would have the signature</p>\n\n<pre><code>public BufferedImage&lt;String&gt; bar()\n</code></pre>\n\n<p>which is nonsensical. Since there is no mechanism to force you to only instantiate <code>Foo</code>s with generic <code>T</code>s, it refuses to compile.</p>\n"},{"tags":[],"owner":{"account_id":38886,"reputation":69913,"user_id":111896,"accept_rate":98,"display_name":"ZelluX"},"down_vote_count":1,"up_vote_count":28,"is_accepted":false,"score":27,"last_activity_date":1284382423,"creation_date":1243222174,"answer_id":905219,"question_id":876948,"body_markdown":"Maybe you can try Scala, which is a functional language running on JVM, that supports higher-kinded generics.\r\n\r\n---\r\n\r\n**[ EDIT by [Rahul G][1] ]**\r\n\r\nHere&#39;s how your particular example roughly translates to Scala:\r\n\r\n    trait Expr[+A]\r\n\r\n    trait FixExpr {\r\n      val in: Expr[FixExpr]\r\n    }\r\n\r\n    trait Fix[F[_]] {\r\n      val in: F[Fix[F]]\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/192247/missing-faktor","title":"Higher-kinded generics in Java","body":"<p>Maybe you can try Scala, which is a functional language running on JVM, that supports higher-kinded generics.</p>\n\n<hr>\n\n<p><strong>[ EDIT by <a href=\"https://stackoverflow.com/users/192247/missing-faktor\">Rahul G</a> ]</strong></p>\n\n<p>Here's how your particular example roughly translates to Scala:</p>\n\n<pre><code>trait Expr[+A]\n\ntrait FixExpr {\n  val in: Expr[FixExpr]\n}\n\ntrait Fix[F[_]] {\n  val in: F[Fix[F]]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":425954,"reputation":825,"user_id":806883,"display_name":"Victor Nazarov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471270347,"creation_date":1471270347,"answer_id":38956764,"question_id":876948,"body_markdown":"Still, there are ways to encode higer-kinded generics in Java. Please, have a look at [higher-kinded-java project](https://github.com/sviperll/higher-kinded-java).\r\n\r\nUsing this as a library, you can modify your code like this:\r\n\r\n    public class Fix&lt;F extends Type.Constructor&gt; {\r\n        Type.App&lt;F, Fix&lt;F&gt;&gt; in;\r\n    }\r\n\r\nYou should probably add an `@GenerateTypeConstructor` annotation to your `Expr` class\r\n\r\n    @GenerateTypeConstructor\r\n    public class Expr&lt;S&gt; {\r\n        // ...\r\n    }\r\n\r\nThis annotation generates ExprTypeConstructor class.\r\nNow you can process your Fix of Expr like this: \r\n\r\n    class Main {\r\n        void run() {\r\n            runWithTyConstr(ExprTypeConstructor.get);\r\n        }\r\n\r\n        &lt;E extends Type.Constructor&gt; void runWithTyConstr(ExprTypeConstructor.Is&lt;E&gt; tyConstrKnowledge) {\r\n            Expr&lt;Fix&lt;E&gt;&gt; one = Expr.lit(1);\r\n            Expr&lt;Fix&lt;E&gt;&gt; two = Expr.lit(2);\r\n\r\n            // convertToTypeApp method is generated by annotation processor\r\n            Type.App&lt;E, Fix&lt;E&gt;&gt; oneAsTyApp = tyConstrKnowledge.convertToTypeApp(one);\r\n            Type.App&lt;E, Fix&lt;E&gt;&gt; twoAsTyApp = tyConstrKnowledge.convertToTypeApp(two);\r\n\r\n            Fix&lt;E&gt; oneFix = new Fix&lt;&gt;(oneAsTyApp);\r\n            Fix&lt;E&gt; twoFix = new Fix&lt;&gt;(twoAsTyApp);\r\n\r\n            Expr&lt;Fix&lt;E&gt;&gt; addition = Expr.add(oneFix, twoFix);\r\n            process(addition, tyConstrKnowledge);\r\n        }\r\n\r\n        &lt;E extends Type.Constructor&gt; void process(\r\n                Fix&lt;E&gt; fixedPoint,\r\n                ExprTypeConstructor.Is&lt;E&gt; tyConstrKnowledge) {\r\n\r\n            Type.App&lt;E, Fix&lt;E&gt;&gt; inTyApp = fixedPoint.getIn();\r\n\r\n            // convertToExpr method is generated by annotation processor\r\n            Expr&lt;Fix&lt;E&gt;&gt; in = tyConstrKnowledge.convertToExpr(inTyApp);\r\n\r\n            for (Fix&lt;E&gt; subExpr: in.getSubExpressions()) {\r\n                process(subExpr, tyConstrKnowledge);\r\n            }\r\n        }\r\n\r\n    }\r\n","title":"Higher-kinded generics in Java","body":"<p>Still, there are ways to encode higer-kinded generics in Java. Please, have a look at <a href=\"https://github.com/sviperll/higher-kinded-java\" rel=\"nofollow\">higher-kinded-java project</a>.</p>\n\n<p>Using this as a library, you can modify your code like this:</p>\n\n<pre><code>public class Fix&lt;F extends Type.Constructor&gt; {\n    Type.App&lt;F, Fix&lt;F&gt;&gt; in;\n}\n</code></pre>\n\n<p>You should probably add an <code>@GenerateTypeConstructor</code> annotation to your <code>Expr</code> class</p>\n\n<pre><code>@GenerateTypeConstructor\npublic class Expr&lt;S&gt; {\n    // ...\n}\n</code></pre>\n\n<p>This annotation generates ExprTypeConstructor class.\nNow you can process your Fix of Expr like this: </p>\n\n<pre><code>class Main {\n    void run() {\n        runWithTyConstr(ExprTypeConstructor.get);\n    }\n\n    &lt;E extends Type.Constructor&gt; void runWithTyConstr(ExprTypeConstructor.Is&lt;E&gt; tyConstrKnowledge) {\n        Expr&lt;Fix&lt;E&gt;&gt; one = Expr.lit(1);\n        Expr&lt;Fix&lt;E&gt;&gt; two = Expr.lit(2);\n\n        // convertToTypeApp method is generated by annotation processor\n        Type.App&lt;E, Fix&lt;E&gt;&gt; oneAsTyApp = tyConstrKnowledge.convertToTypeApp(one);\n        Type.App&lt;E, Fix&lt;E&gt;&gt; twoAsTyApp = tyConstrKnowledge.convertToTypeApp(two);\n\n        Fix&lt;E&gt; oneFix = new Fix&lt;&gt;(oneAsTyApp);\n        Fix&lt;E&gt; twoFix = new Fix&lt;&gt;(twoAsTyApp);\n\n        Expr&lt;Fix&lt;E&gt;&gt; addition = Expr.add(oneFix, twoFix);\n        process(addition, tyConstrKnowledge);\n    }\n\n    &lt;E extends Type.Constructor&gt; void process(\n            Fix&lt;E&gt; fixedPoint,\n            ExprTypeConstructor.Is&lt;E&gt; tyConstrKnowledge) {\n\n        Type.App&lt;E, Fix&lt;E&gt;&gt; inTyApp = fixedPoint.getIn();\n\n        // convertToExpr method is generated by annotation processor\n        Expr&lt;Fix&lt;E&gt;&gt; in = tyConstrKnowledge.convertToExpr(inTyApp);\n\n        for (Fix&lt;E&gt; subExpr: in.getSubExpressions()) {\n            process(subExpr, tyConstrKnowledge);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609624894,"creation_date":1609624894,"answer_id":65544544,"question_id":876948,"body_markdown":"There is a roundabout way to encode higher kinded types in Java as pointed out by Victor. The gist of it is to introduce a type `H&lt;F, T&gt;` to encode `F&lt;T&gt;`. This can then be used to encode fixed point of functors (i.e. Haskell&#39;s `Fix` type): \r\n\r\n    public interface Functor&lt;F, T&gt; {\r\n        &lt;R&gt; H&lt;F, R&gt; map(Function&lt;T, R&gt; f);\r\n    }\r\n\r\n    public static record Fix&lt;F extends H&lt;F, T&gt; &amp; Functor&lt;F, T&gt;, T&gt;(F f) {\r\n        public Functor&lt;F, Fix&lt;F, T&gt;&gt; unfix() {\r\n            return (Functor&lt;F, Fix&lt;F, T&gt;&gt;) f;\r\n        }\r\n    }\r\n\r\nFrom here you can go on and implement catamorphisms over initial algebras: \r\n\r\n    public interface Algebra&lt;F, T&gt; extends Function&lt;H&lt;F, T&gt;, T&gt; {}\r\n\r\n    public static &lt;F extends H&lt;F, T&gt; &amp; Functor&lt;F, T&gt;, T&gt; Function&lt;Fix&lt;F, T&gt;, T&gt; cata(Algebra&lt;F, T&gt; alg) {\r\n        return fix -&gt; alg.apply(fix.unfix().map(cata(alg)));\r\n    }\r\n\r\nSee my [GitHub repo](https://github.com/mduerig/java-functional/blob/master/src/michid/fun/Free.java) for working code including some example algebras. (Note, IDE&#39;s like IntelliJ struggle with the code although it compiles and runs just fine with Java 15). ","title":"Higher-kinded generics in Java","body":"<p>There is a roundabout way to encode higher kinded types in Java as pointed out by Victor. The gist of it is to introduce a type <code>H&lt;F, T&gt;</code> to encode <code>F&lt;T&gt;</code>. This can then be used to encode fixed point of functors (i.e. Haskell's <code>Fix</code> type):</p>\n<pre><code>public interface Functor&lt;F, T&gt; {\n    &lt;R&gt; H&lt;F, R&gt; map(Function&lt;T, R&gt; f);\n}\n\npublic static record Fix&lt;F extends H&lt;F, T&gt; &amp; Functor&lt;F, T&gt;, T&gt;(F f) {\n    public Functor&lt;F, Fix&lt;F, T&gt;&gt; unfix() {\n        return (Functor&lt;F, Fix&lt;F, T&gt;&gt;) f;\n    }\n}\n</code></pre>\n<p>From here you can go on and implement catamorphisms over initial algebras:</p>\n<pre><code>public interface Algebra&lt;F, T&gt; extends Function&lt;H&lt;F, T&gt;, T&gt; {}\n\npublic static &lt;F extends H&lt;F, T&gt; &amp; Functor&lt;F, T&gt;, T&gt; Function&lt;Fix&lt;F, T&gt;, T&gt; cata(Algebra&lt;F, T&gt; alg) {\n    return fix -&gt; alg.apply(fix.unfix().map(cata(alg)));\n}\n</code></pre>\n<p>See my <a href=\"https://github.com/mduerig/java-functional/blob/master/src/michid/fun/Free.java\" rel=\"nofollow noreferrer\">GitHub repo</a> for working code including some example algebras. (Note, IDE's like IntelliJ struggle with the code although it compiles and runs just fine with Java 15).</p>\n"}],"owner":{"account_id":9435,"reputation":6733,"user_id":17439,"accept_rate":86,"display_name":"Martijn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6345,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":877041,"answer_count":6,"score":35,"last_activity_date":1671050135,"creation_date":1242640250,"question_id":876948,"body_markdown":"Suppose I have the following class:\r\n\r\n    public class FixExpr {\r\n      Expr&lt;FixExpr&gt; in;\r\n    }\r\n\r\nNow I want to introduce a generic argument, abstracting over the use of Expr:\r\n\r\n    public class Fix&lt;F&gt; {\r\n      F&lt;Fix&lt;F&gt;&gt; in;\r\n    }\r\n\r\nBut Eclipse doesn&#39;t like this:\r\n\r\n&gt; The type F is not generic; it cannot be parametrized with arguments &amp;lt;Fix&amp;lt;F&amp;gt;&amp;gt;\r\n\r\nIs this possible at all or have I overlooked something that causes this specific instance to break?\r\n\r\nSome background information: in Haskell this is a common way to write generic functions; I&#39;m trying to port this to Java. The type argument F in the example above has kind * -&gt; * instead of the usual kind *. In Haskell it looks like this:\r\n\r\n    newtype Fix f = In { out :: f (Fix f) }\r\n\r\n","title":"Higher-kinded generics in Java","body":"<p>Suppose I have the following class:</p>\n\n<pre><code>public class FixExpr {\n  Expr&lt;FixExpr&gt; in;\n}\n</code></pre>\n\n<p>Now I want to introduce a generic argument, abstracting over the use of Expr:</p>\n\n<pre><code>public class Fix&lt;F&gt; {\n  F&lt;Fix&lt;F&gt;&gt; in;\n}\n</code></pre>\n\n<p>But Eclipse doesn't like this:</p>\n\n<blockquote>\n  <p>The type F is not generic; it cannot be parametrized with arguments &lt;Fix&lt;F&gt;&gt;</p>\n</blockquote>\n\n<p>Is this possible at all or have I overlooked something that causes this specific instance to break?</p>\n\n<p>Some background information: in Haskell this is a common way to write generic functions; I'm trying to port this to Java. The type argument F in the example above has kind * -> * instead of the usual kind *. In Haskell it looks like this:</p>\n\n<pre><code>newtype Fix f = In { out :: f (Fix f) }\n</code></pre>\n"},{"tags":["java","html","pdf","pdf-generation","itext"],"comments":[{"owner":{"account_id":2014603,"reputation":1765,"user_id":1802203,"accept_rate":29,"display_name":"Akshay Joy"},"score":0,"creation_date":1369137687,"post_id":16669462,"comment_id":23983431,"body_markdown":"Possible the duplicate http://stackoverflow.com/questions/235851/using-itext-to-convert-html-to-pdf","body":"Possible the duplicate <a href=\"http://stackoverflow.com/questions/235851/using-itext-to-convert-html-to-pdf\" title=\"using itext to convert html to pdf\">stackoverflow.com/questions/235851/&hellip;</a>"},{"owner":{"account_id":2796131,"reputation":19,"user_id":2405327,"display_name":"MST"},"score":0,"creation_date":1369141879,"post_id":16669462,"comment_id":23985946,"body_markdown":"Nearly what I need, but they only create complete documents, too. What I need is the possibility to add sections of HTML to a document. I will try to create a seperate document and merge both documents.","body":"Nearly what I need, but they only create complete documents, too. What I need is the possibility to add sections of HTML to a document. I will try to create a seperate document and merge both documents."}],"answers":[{"tags":[],"owner":{"account_id":1779372,"reputation":76344,"user_id":1622493,"display_name":"Bruno Lowagie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369206782,"creation_date":1369206782,"answer_id":16685602,"question_id":16669462,"body_markdown":"Go to parsing [HTML step by step][1]. In that example, the final pipeline is a `PdfWriterPipeline` which isn&#39;t what you want (because this pipeline writes stuff to the document). You want to replace this final pipeline with an [ElementHandlerPipeline][2], converting all the HTML tags that are encountered to an [ElementList][3].\r\n\r\nOnce you have this list of `Element` instances, it&#39;s up to you to decide what to do with it (adding them to a `Paragraph` is one option).\r\n\r\n\r\n  [1]: http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html#itextdoc-menu-7\r\n  [2]: http://api.itextpdf.com/xml/com/itextpdf/tool/xml/pipeline/end/ElementHandlerPipeline.html\r\n  [3]: http://api.itextpdf.com/xml/com/itextpdf/tool/xml/ElementList.html","title":"Convert HTML to PDF and add it to a paragraph","body":"<p>Go to parsing <a href=\"http://demo.itextsupport.com/xmlworker/itextdoc/flatsite.html#itextdoc-menu-7\" rel=\"nofollow\">HTML step by step</a>. In that example, the final pipeline is a <code>PdfWriterPipeline</code> which isn't what you want (because this pipeline writes stuff to the document). You want to replace this final pipeline with an <a href=\"http://api.itextpdf.com/xml/com/itextpdf/tool/xml/pipeline/end/ElementHandlerPipeline.html\" rel=\"nofollow\">ElementHandlerPipeline</a>, converting all the HTML tags that are encountered to an <a href=\"http://api.itextpdf.com/xml/com/itextpdf/tool/xml/ElementList.html\" rel=\"nofollow\">ElementList</a>.</p>\n\n<p>Once you have this list of <code>Element</code> instances, it's up to you to decide what to do with it (adding them to a <code>Paragraph</code> is one option).</p>\n"},{"tags":[],"owner":{"account_id":2594045,"reputation":145,"user_id":2248088,"accept_rate":89,"display_name":"FlyingTurtle"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1437635441,"creation_date":1437618888,"answer_id":31577249,"question_id":16669462,"body_markdown":"    String html = &quot;&lt;p&gt;Html code here&lt;/p&gt;&quot;;\r\n     Paragraph comb = new Paragraph();\r\n\r\n    StringBuilder sb = new StringBuilder();\r\n    sb.append(html);\r\n\r\n    ElementList list = XMLWorkerHelper.parseToElementList(sb.toString(), null);\r\n    for (Element element : list) {\r\n        comb.add(element);\r\n    }\r\n\r\n    para = new Paragraph(comb);\r\n    cell = new PdfPCell(para);\r\n    cell.setHorizontalAlignment(Element.ALIGN_LEFT);\r\n    cell.setBorder(Rectangle.NO_BORDER);\r\n    cell.setPaddingTop(0);\r\n    cell.setPaddingBottom(15f);\r\n    cell.setLeading(3f, 1.2f);\r\n\r\n    table.addCell(cell);","title":"Convert HTML to PDF and add it to a paragraph","body":"<pre><code>String html = \"&lt;p&gt;Html code here&lt;/p&gt;\";\n Paragraph comb = new Paragraph();\n\nStringBuilder sb = new StringBuilder();\nsb.append(html);\n\nElementList list = XMLWorkerHelper.parseToElementList(sb.toString(), null);\nfor (Element element : list) {\n    comb.add(element);\n}\n\npara = new Paragraph(comb);\ncell = new PdfPCell(para);\ncell.setHorizontalAlignment(Element.ALIGN_LEFT);\ncell.setBorder(Rectangle.NO_BORDER);\ncell.setPaddingTop(0);\ncell.setPaddingBottom(15f);\ncell.setLeading(3f, 1.2f);\n\ntable.addCell(cell);\n</code></pre>\n"}],"owner":{"account_id":2796131,"reputation":19,"user_id":2405327,"display_name":"MST"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4280,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1671050030,"creation_date":1369137547,"question_id":16669462,"body_markdown":"I want to add a paragraph, containing HTML, to a document.  \r\nAs far as I know, iText only supports adding HTML to a document directly via XMLWorkerHelper.\r\n\r\nFurthermore I want to change the font of the HTML, but this can be done with a css-file.\r\n\r\nMy approach is similar to this code:\r\n\r\n    XMLWorkerHelper worker = XMLWorkerHelper.getInstance();\r\n    worker.parseXHtml(pdfWriter, document, fis);\r\n\r\nBut this solution is writing to the document directly. I want to add the HTML to a paragraph, so I may add some additional formatting to that section.\r\n","title":"Convert HTML to PDF and add it to a paragraph","body":"<p>I want to add a paragraph, containing HTML, to a document.<br>\nAs far as I know, iText only supports adding HTML to a document directly via XMLWorkerHelper.</p>\n\n<p>Furthermore I want to change the font of the HTML, but this can be done with a css-file.</p>\n\n<p>My approach is similar to this code:</p>\n\n<pre><code>XMLWorkerHelper worker = XMLWorkerHelper.getInstance();\nworker.parseXHtml(pdfWriter, document, fis);\n</code></pre>\n\n<p>But this solution is writing to the document directly. I want to add the HTML to a paragraph, so I may add some additional formatting to that section.</p>\n"},{"tags":["java","spring-boot","authentication","spring-security","basic-authentication"],"comments":[{"owner":{"account_id":22249835,"reputation":1973,"user_id":16482938,"display_name":"j_b"},"score":0,"creation_date":1671040574,"post_id":74802014,"comment_id":132013750,"body_markdown":"https://stackoverflow.com/questions/64090192/basic-auth-not-working-with-post-endpoint  -- might provide some insight","body":"<a href=\"https://stackoverflow.com/questions/64090192/basic-auth-not-working-with-post-endpoint\" title=\"basic auth not working with post endpoint\">stackoverflow.com/questions/64090192/&hellip;</a>  -- might provide some insight"},{"owner":{"account_id":23077784,"reputation":1,"user_id":17190503,"display_name":"GreenEngineer"},"score":0,"creation_date":1671049155,"post_id":74802014,"comment_id":132016196,"body_markdown":"Thanks but I can only do post request with it. I cannot do put and delete requests.","body":"Thanks but I can only do post request with it. I cannot do put and delete requests."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":1,"creation_date":1671051220,"post_id":74802014,"comment_id":132016703,"body_markdown":"@GreenEngineer, if you can do a post request, you can do both put and delete requests as well.","body":"@GreenEngineer, if you can do a post request, you can do both put and delete requests as well."}],"owner":{"account_id":23077784,"reputation":1,"user_id":17190503,"display_name":"GreenEngineer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671049430,"creation_date":1671038309,"question_id":74802014,"body_markdown":"I have added basic authentication in my Rest API. My API is CRUD. I have changed the username and password. When I apply the GET, GET by id parameter and POST, they are working flawlessly but when I  call the PUT and DELETE, I get 401 unauthorized. I have checked the username and password for they are correct or no. There is no problem about it. What is the reason about this issue?\r\n\r\npom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n   &lt;parent&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n   &lt;/parent&gt;\r\n   &lt;groupId&gt;com.xyztq&lt;/groupId&gt;\r\n   &lt;artifactId&gt;TodoApp2&lt;/artifactId&gt;\r\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n   &lt;name&gt;TodoApp2&lt;/name&gt;\r\n   &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n   &lt;properties&gt;\r\n      &lt;java.version&gt;17&lt;/java.version&gt;\r\n   &lt;/properties&gt;\r\n   &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n\r\n\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n         &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n         &lt;optional&gt;true&lt;/optional&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n\r\n   &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n               &lt;excludes&gt;\r\n                  &lt;exclude&gt;\r\n                     &lt;groupId&gt;org.project.lombok&lt;/groupId&gt;\r\n                     &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                  &lt;/exclude&gt;\r\n               &lt;/excludes&gt;\r\n            &lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n   &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nSecurityConfiguration class\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfiguration {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n      http.httpBasic();\r\n      http.formLogin();\r\n    \r\n  http.authorizeHttpRequests().requestMatchers(&quot;/todos&quot;).authenticated().and()\r\n                .csrf().ignoringRequestMatchers(&quot;/todos&quot;)\r\n                .and().authorizeHttpRequests().requestMatchers(&quot;/todos/{id}&quot;).authenticated().and()\r\n                .csrf().ignoringRequestMatchers(&quot;/todos/{id}&quot;);\r\n        return http.build();\r\n    }\r\n```\r\n\r\nThis is my controller\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/todos&quot;)\r\n@AllArgsConstructor\r\npublic class TodoController {\r\n    private final TodoService todoService;\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;Todo&gt;&gt; getTodos(@RequestParam(required = false) String title){\r\n        return new ResponseEntity&lt;&gt;(todoService.getTodos(title), OK);\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Todo&gt; getTodo(@PathVariable String id){\r\n        return new ResponseEntity&lt;&gt;(todoService.getTodoById(id), OK);\r\n    }\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;Todo&gt; createTodo(@RequestBody Todo todo){\r\n        return new ResponseEntity&lt;&gt;(todoService.createTodo(todo), OK);\r\n    }\r\n\r\n    @PutMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Void&gt; updateTodo(@PathVariable String id,@RequestBody Todo todo){\r\n        todoService.updateTodo(id,todo);\r\n        return new ResponseEntity&lt;&gt;(OK);\r\n    }\r\n    @PatchMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Void&gt; updateDoneTodo(@PathVariable String id,@RequestBody Todo todo){\r\n        todoService.patchTodo(id,todo);\r\n        return new ResponseEntity&lt;&gt;(OK);\r\n    }\r\n\r\n    @DeleteMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Void&gt; deleteTodo(@PathVariable String id){\r\n        todoService.deleteTodo(id);\r\n        return new ResponseEntity&lt;&gt;(OK);\r\n    }\r\n```","title":"Basic authentication in Spring Boot","body":"<p>I have added basic authentication in my Rest API. My API is CRUD. I have changed the username and password. When I apply the GET, GET by id parameter and POST, they are working flawlessly but when I  call the PUT and DELETE, I get 401 unauthorized. I have checked the username and password for they are correct or no. There is no problem about it. What is the reason about this issue?</p>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n   &lt;/parent&gt;\n   &lt;groupId&gt;com.xyztq&lt;/groupId&gt;\n   &lt;artifactId&gt;TodoApp2&lt;/artifactId&gt;\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n   &lt;name&gt;TodoApp2&lt;/name&gt;\n   &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n   &lt;properties&gt;\n      &lt;java.version&gt;17&lt;/java.version&gt;\n   &lt;/properties&gt;\n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n\n\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n         &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n         &lt;optional&gt;true&lt;/optional&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n   &lt;build&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n               &lt;excludes&gt;\n                  &lt;exclude&gt;\n                     &lt;groupId&gt;org.project.lombok&lt;/groupId&gt;\n                     &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                  &lt;/exclude&gt;\n               &lt;/excludes&gt;\n            &lt;/configuration&gt;\n         &lt;/plugin&gt;\n      &lt;/plugins&gt;\n   &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>SecurityConfiguration class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n      http.httpBasic();\n      http.formLogin();\n    \n  http.authorizeHttpRequests().requestMatchers(&quot;/todos&quot;).authenticated().and()\n                .csrf().ignoringRequestMatchers(&quot;/todos&quot;)\n                .and().authorizeHttpRequests().requestMatchers(&quot;/todos/{id}&quot;).authenticated().and()\n                .csrf().ignoringRequestMatchers(&quot;/todos/{id}&quot;);\n        return http.build();\n    }\n</code></pre>\n<p>This is my controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/todos&quot;)\n@AllArgsConstructor\npublic class TodoController {\n    private final TodoService todoService;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;Todo&gt;&gt; getTodos(@RequestParam(required = false) String title){\n        return new ResponseEntity&lt;&gt;(todoService.getTodos(title), OK);\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Todo&gt; getTodo(@PathVariable String id){\n        return new ResponseEntity&lt;&gt;(todoService.getTodoById(id), OK);\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;Todo&gt; createTodo(@RequestBody Todo todo){\n        return new ResponseEntity&lt;&gt;(todoService.createTodo(todo), OK);\n    }\n\n    @PutMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Void&gt; updateTodo(@PathVariable String id,@RequestBody Todo todo){\n        todoService.updateTodo(id,todo);\n        return new ResponseEntity&lt;&gt;(OK);\n    }\n    @PatchMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Void&gt; updateDoneTodo(@PathVariable String id,@RequestBody Todo todo){\n        todoService.patchTodo(id,todo);\n        return new ResponseEntity&lt;&gt;(OK);\n    }\n\n    @DeleteMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Void&gt; deleteTodo(@PathVariable String id){\n        todoService.deleteTodo(id);\n        return new ResponseEntity&lt;&gt;(OK);\n    }\n</code></pre>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1460142494,"post_id":36507416,"comment_id":60621811,"body_markdown":"Why do you want to prevent sub-classes of ABB?","body":"Why do you want to prevent sub-classes of ABB?"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":1,"creation_date":1460142773,"post_id":36507416,"comment_id":60621953,"body_markdown":"@PeterLawrey I want to prevent sub-classes of A","body":"@PeterLawrey I want to prevent sub-classes of A"},{"owner":{"account_id":78033,"reputation":3457,"user_id":222364,"display_name":"Darth Android"},"score":0,"creation_date":1460143083,"post_id":36507416,"comment_id":60622148,"body_markdown":"@Marcono1234 Why do you want to prevent subclasses of A? (You can do this by making A `final`)","body":"@Marcono1234 Why do you want to prevent subclasses of A? (You can do this by making A <code>final</code>)"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":1,"creation_date":1460143438,"post_id":36507416,"comment_id":60622350,"body_markdown":"@DarthAndroid I rather want for example an ArrayList to contain only objects that `extends A` and `super AAB`, the class `ABB` can still have subclasses, however they should be not allowed for the ArrayList","body":"@DarthAndroid I rather want for example an ArrayList to contain only objects that <code>extends A</code> and <code>super AAB</code>, the class <code>ABB</code> can still have subclasses, however they should be not allowed for the ArrayList"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1460144424,"post_id":36507416,"comment_id":60622909,"body_markdown":"Isn&#39;t `AB ` a subclass of `A`?","body":"Isn&#39;t <code>AB </code> a subclass of <code>A</code>?"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1460144639,"post_id":36507416,"comment_id":60623010,"body_markdown":"@PeterLawrey yes it is, but `super ABB` means that I want subclasses of `ABB` doesn&#39;t it? Or why are you asking if I want to prevent subclasses of ABB?","body":"@PeterLawrey yes it is, but <code>super ABB</code> means that I want subclasses of <code>ABB</code> doesn&#39;t it? Or why are you asking if I want to prevent subclasses of ABB?"},{"owner":{"account_id":5012123,"reputation":13192,"user_id":4028085,"display_name":"brso05"},"score":0,"creation_date":1460144822,"post_id":36507416,"comment_id":60623102,"body_markdown":"You could create a dummy interface that you use for the classes you want to have in the arraylist and just have the classes you want implement the dummy interface...http://stackoverflow.com/a/745769/4028085","body":"You could create a dummy interface that you use for the classes you want to have in the arraylist and just have the classes you want implement the dummy interface...<a href=\"http://stackoverflow.com/a/745769/4028085\">stackoverflow.com/a/745769/4028085</a>"},{"owner":{"account_id":5012123,"reputation":13192,"user_id":4028085,"display_name":"brso05"},"score":0,"creation_date":1460145206,"post_id":36507416,"comment_id":60623339,"body_markdown":"`ArrayList&lt;? extends mydummyinterface&gt;` Use the interface as an identifier to identify what classes your object can `extend`...`AB implements mydummyinterface`.","body":"<code>ArrayList&lt;? extends mydummyinterface&gt;</code> Use the interface as an identifier to identify what classes your object can <code>extend</code>...<code>AB implements mydummyinterface</code>."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1460145369,"post_id":36507416,"comment_id":60623429,"body_markdown":"`super T` means `T` or a super class. not sub-classes.","body":"<code>super T</code> means <code>T</code> or a super class. not sub-classes."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1460151015,"post_id":36507416,"comment_id":60626055,"body_markdown":"@PeterLawrey yes sorry I mixed it up in that comment but I meant what you said. Because then I don&#39;t understand your question &quot;Why do you want to prevent sub-classes of ABB? &quot;","body":"@PeterLawrey yes sorry I mixed it up in that comment but I meant what you said. Because then I don&#39;t understand your question &quot;Why do you want to prevent sub-classes of ABB? &quot;"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1460191127,"post_id":36507416,"comment_id":60634894,"body_markdown":"@Marcono1234 You have stated that you want `super ABB` which means you don&#39;t want sub classes of ABB.","body":"@Marcono1234 You have stated that you want <code>super ABB</code> which means you don&#39;t want sub classes of ABB."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1460298673,"post_id":36507416,"comment_id":60665819,"body_markdown":"@PeterLawrey, yes you are right. Sorry for the confusion I mixed it up there again. I don&#39;t necessarily want to prevent subclasses of ABB but instead only want to make sure that only this inheritance line of classes is allowed, but not for example objects of the class AA.","body":"@PeterLawrey, yes you are right. Sorry for the confusion I mixed it up there again. I don&#39;t necessarily want to prevent subclasses of ABB but instead only want to make sure that only this inheritance line of classes is allowed, but not for example objects of the class AA."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1460299123,"post_id":36507416,"comment_id":60665962,"body_markdown":"In this case you just need `extends ABB`","body":"In this case you just need <code>extends ABB</code>"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1460300966,"post_id":36507416,"comment_id":60666666,"body_markdown":"@PeterLawrey but I want to allow classes that `extends A`. I just want the line from A to ABB","body":"@PeterLawrey but I want to allow classes that <code>extends A</code>. I just want the line from A to ABB"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1460312173,"post_id":36507416,"comment_id":60670909,"body_markdown":"Which means you do want to exclude subclasses of ABB or is you want to exclude AA and ABA","body":"Which means you do want to exclude subclasses of ABB or is you want to exclude AA and ABA"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1460386217,"post_id":36507416,"comment_id":60704730,"body_markdown":"@PeterLawrey The latter one","body":"@PeterLawrey The latter one"}],"answers":[{"tags":[],"owner":{"account_id":78033,"reputation":3457,"user_id":222364,"display_name":"Darth Android"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1460142600,"creation_date":1460142600,"answer_id":36507474,"question_id":36507416,"body_markdown":"No, Java does not let you simultaneously specify both bounds. That said, I&#39;ve never run across a situation where both bounds were needed. There&#39;s almost no reason to include some subclasses but not others - if you need to exclude subclasses, those subclasses are probably violating their contract.","title":"super and extends combined for generics in Java","body":"<p>No, Java does not let you simultaneously specify both bounds. That said, I've never run across a situation where both bounds were needed. There's almost no reason to include some subclasses but not others - if you need to exclude subclasses, those subclasses are probably violating their contract.</p>\n"}],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":815,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":36507474,"answer_count":1,"score":5,"last_activity_date":1671048857,"creation_date":1460142389,"question_id":36507416,"body_markdown":"Can you specify `super` and `extends` for generics in Java?\r\n\r\nFor example, let&#39;s say you have this class structure:\r\n[![class inheritance structure][1]][1]\r\n\r\nBut only want to select classes that: `extends A` and `super ABB`. Is that possible?\r\n\r\n  [1]: http://i.stack.imgur.com/v7CXu.png","title":"super and extends combined for generics in Java","body":"<p>Can you specify <code>super</code> and <code>extends</code> for generics in Java?</p>\n<p>For example, let's say you have this class structure:\n<a href=\"https://i.stack.imgur.com/v7CXu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v7CXu.png\" alt=\"class inheritance structure\" /></a></p>\n<p>But only want to select classes that: <code>extends A</code> and <code>super ABB</code>. Is that possible?</p>\n"},{"tags":["java","jdbc","resultset"],"answers":[{"tags":[],"owner":{"account_id":175652,"reputation":6899,"user_id":405818,"accept_rate":67,"display_name":"Amit"},"down_vote_count":19,"up_vote_count":0,"is_accepted":false,"score":-19,"last_activity_date":1283167554,"creation_date":1283167554,"answer_id":3599888,"question_id":3599861,"body_markdown":"if not rs.getString(&quot;Column_ABC&quot;)= nothing then\r\n&#39; your code here","title":"How can I determine if the column name exist in the ResultSet?","body":"<p>if not rs.getString(\"Column_ABC\")= nothing then\n' your code here</p>\n"},{"tags":[],"owner":{"account_id":114151,"reputation":32353,"user_id":300311,"accept_rate":88,"display_name":"Erick Robertson"},"down_vote_count":0,"up_vote_count":145,"is_accepted":true,"score":145,"last_activity_date":1364541687,"creation_date":1283168332,"answer_id":3599960,"question_id":3599861,"body_markdown":"**Use the `ResultSetMetaData` class.**\r\n\r\n    public static boolean hasColumn(ResultSet rs, String columnName) throws SQLException {\r\n        ResultSetMetaData rsmd = rs.getMetaData();\r\n        int columns = rsmd.getColumnCount();\r\n        for (int x = 1; x &lt;= columns; x++) {\r\n            if (columnName.equals(rsmd.getColumnName(x))) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\nThe thing I don&#39;t understand is why this function would ever be needed.  The query or stored procedure being executed should have known results.  The columns of the query should be known.  Needing a function like this may be a sign that there is a design problem somewhere.","title":"How can I determine if the column name exist in the ResultSet?","body":"<p><strong>Use the <code>ResultSetMetaData</code> class.</strong></p>\n\n<pre><code>public static boolean hasColumn(ResultSet rs, String columnName) throws SQLException {\n    ResultSetMetaData rsmd = rs.getMetaData();\n    int columns = rsmd.getColumnCount();\n    for (int x = 1; x &lt;= columns; x++) {\n        if (columnName.equals(rsmd.getColumnName(x))) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>The thing I don't understand is why this function would ever be needed.  The query or stored procedure being executed should have known results.  The columns of the query should be known.  Needing a function like this may be a sign that there is a design problem somewhere.</p>\n"},{"tags":[],"owner":{"account_id":319815,"reputation":1802,"user_id":637777,"accept_rate":93,"display_name":"Zip184"},"down_vote_count":13,"up_vote_count":21,"is_accepted":false,"score":8,"last_activity_date":1408537092,"creation_date":1403720138,"answer_id":24415715,"question_id":3599861,"body_markdown":"Not sure if this is more or less efficient than Erick&#39;s answer but it&#39;s easier.\r\n\r\n    String str;\r\n    \r\n    try {\r\n        str = rs.getString(columnName);\r\n    } catch (java.sql.SQLException e) {\r\n        str = null;\r\n    }","title":"How can I determine if the column name exist in the ResultSet?","body":"<p>Not sure if this is more or less efficient than Erick's answer but it's easier.</p>\n\n<pre><code>String str;\n\ntry {\n    str = rs.getString(columnName);\n} catch (java.sql.SQLException e) {\n    str = null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5592786,"reputation":49,"user_id":4431384,"display_name":"VivekJ"},"down_vote_count":6,"up_vote_count":2,"is_accepted":false,"score":-4,"last_activity_date":1474449696,"creation_date":1474449378,"answer_id":39612310,"question_id":3599861,"body_markdown":"\t/**\r\n\t * returns default value if column is not present in resultset\r\n\t * \r\n\t * @param rs\r\n\t * @param columnLabel\r\n\t * @param defaultValue\r\n\t * @return\r\n\t */\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tprivate static &lt;T&gt; T getValueFromResultSet(final ResultSet rs,\r\n\t\t\tString columnLabel, T defaultValue) {\r\n\t\ttry {\r\n\t\t\treturn (T) rs.getObject(columnLabel);\r\n\t\t} catch (SQLException e) {\r\n\t\t\treturn defaultValue;\r\n\t\t}\r\n\t}\r\n\r\nIn java version &gt;=7 you have a option of passing Class type in ResultSet#getObject method","title":"How can I determine if the column name exist in the ResultSet?","body":"<pre><code>/**\n * returns default value if column is not present in resultset\n * \n * @param rs\n * @param columnLabel\n * @param defaultValue\n * @return\n */\n@SuppressWarnings(\"unchecked\")\nprivate static &lt;T&gt; T getValueFromResultSet(final ResultSet rs,\n        String columnLabel, T defaultValue) {\n    try {\n        return (T) rs.getObject(columnLabel);\n    } catch (SQLException e) {\n        return defaultValue;\n    }\n}\n</code></pre>\n\n<p>In java version >=7 you have a option of passing Class type in ResultSet#getObject method</p>\n"},{"tags":[],"owner":{"account_id":13631894,"reputation":348,"user_id":9833789,"display_name":"Talick"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1585230517,"creation_date":1578978754,"answer_id":59727839,"question_id":3599861,"body_markdown":"    private boolean isThere(ResultSet rs, String column){\r\n        try{\r\n            rs.findColumn(column);\r\n            return true;\r\n        } catch (SQLException sqlex){\r\n            logger.debug(&quot;column doesn&#39;t exist {}&quot;, column);\r\n        }\r\n\r\n        return false;\r\n    }","title":"How can I determine if the column name exist in the ResultSet?","body":"<pre><code>private boolean isThere(ResultSet rs, String column){\n    try{\n        rs.findColumn(column);\n        return true;\n    } catch (SQLException sqlex){\n        logger.debug(\"column doesn't exist {}\", column);\n    }\n\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17294029,"reputation":19,"user_id":12525073,"display_name":"sanket patwardhan"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1584707160,"creation_date":1584707160,"answer_id":60774137,"question_id":3599861,"body_markdown":"resultSet.getColumnMetaData().contains(columnName)","title":"How can I determine if the column name exist in the ResultSet?","body":"<p>resultSet.getColumnMetaData().contains(columnName)</p>\n"}],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93480,"favorite_count":0,"down_vote_count":1,"up_vote_count":90,"accepted_answer_id":3599960,"answer_count":6,"score":89,"last_activity_date":1671048661,"creation_date":1283167310,"question_id":3599861,"body_markdown":"As the `ResultSet` contains the data returned from the dynamic SQL, if there are any method to determine if the `ResultSet` contains a particular column name?\r\n\r\nFor example , if I run `rs.getString(&quot;Column_ABC&quot;)` but `&quot;Column_ABC&quot;` does not really exist, it will throw out the exception.\r\n\r\nHow can I test if the `ResultSet` can get a data from a column named `&quot;Column_ABC&quot;`? ","title":"How can I determine if the column name exist in the ResultSet?","body":"<p>As the <code>ResultSet</code> contains the data returned from the dynamic SQL, if there are any method to determine if the <code>ResultSet</code> contains a particular column name?</p>\n<p>For example , if I run <code>rs.getString(&quot;Column_ABC&quot;)</code> but <code>&quot;Column_ABC&quot;</code> does not really exist, it will throw out the exception.</p>\n<p>How can I test if the <code>ResultSet</code> can get a data from a column named <code>&quot;Column_ABC&quot;</code>?</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":0,"creation_date":1671047886,"post_id":74803555,"comment_id":132015847,"body_markdown":"I was going to write an answer about this but it&#39;s explained in detail [here](https://interviewsansar.com/java-vector-time-complexity-and-how-vector-grows-in-java/)","body":"I was going to write an answer about this but it&#39;s explained in detail <a href=\"https://interviewsansar.com/java-vector-time-complexity-and-how-vector-grows-in-java/\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1671049204,"post_id":74803555,"comment_id":132016213,"body_markdown":"Be aware that the `Vector` class is [legacy](https://en.wikipedia.org/wiki/Legacy_system), as noted in its Javadoc. Supplanted by the `ArrayList` class.","body":"Be aware that the <code>Vector</code> class is <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a>, as noted in its Javadoc. Supplanted by the <code>ArrayList</code> class."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671047958,"creation_date":1671047958,"answer_id":74803588,"question_id":74803555,"body_markdown":"You can add as many elements to a collection as you please.  They are unlimited in that sense.\r\n\r\nSome collections have an internal _capacity_, which describes how many elements the collection can hold _without_ allocating more memory or rebuilding its internal data structures.\r\n\r\nBy setting the capacity correctly in advance, you can ensure that the collection doesn&#39;t need to allocate any more memory than necessary, or spend extra time rebuilding its data structures.  Setting capacity is about optimizing performance, not how many elements you can ever add to a collection.\r\n\r\n(Finally, as a side note, I recommend noticing how `Vector` has effectively been replaced by `ArrayList` for decades, and how you should really never use it anymore.)","title":"The Collections in Java have limited capacity?","body":"<p>You can add as many elements to a collection as you please.  They are unlimited in that sense.</p>\n<p>Some collections have an internal <em>capacity</em>, which describes how many elements the collection can hold <em>without</em> allocating more memory or rebuilding its internal data structures.</p>\n<p>By setting the capacity correctly in advance, you can ensure that the collection doesn't need to allocate any more memory than necessary, or spend extra time rebuilding its data structures.  Setting capacity is about optimizing performance, not how many elements you can ever add to a collection.</p>\n<p>(Finally, as a side note, I recommend noticing how <code>Vector</code> has effectively been replaced by <code>ArrayList</code> for decades, and how you should really never use it anymore.)</p>\n"}],"owner":{"account_id":26786987,"reputation":35,"user_id":20381027,"display_name":"cristian porrety"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74803588,"answer_count":1,"score":-1,"last_activity_date":1671047958,"creation_date":1671047736,"question_id":74803555,"body_markdown":"i&#39;m reading about collections, namely, [Vector](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Vector.html) in this moment, but i can&#39;t understand a part\r\n\r\n&gt; Each vector tries to optimize storage management by maintaining a capacity and a capacityIncrement. The capacity is always at least as large as the vector size; it is usually larger because as components are added to the vector, the vector&#39;s storage increases in chunks the size of capacityIncrement. An application can increase the capacity of a vector before inserting a large number of components; this reduces the amount of incremental reallocation.\r\n\r\nI have been reading very little about collections in java, and the little I have seen I realize that they are dynamic, but until a moment I thought they were unlimited, I do not know if they are, this capacity and capacityIncrement confuse me, someone could explain me what they consist of please? :)","title":"The Collections in Java have limited capacity?","body":"<p>i'm reading about collections, namely, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Vector.html\" rel=\"nofollow noreferrer\">Vector</a> in this moment, but i can't understand a part</p>\n<blockquote>\n<p>Each vector tries to optimize storage management by maintaining a capacity and a capacityIncrement. The capacity is always at least as large as the vector size; it is usually larger because as components are added to the vector, the vector's storage increases in chunks the size of capacityIncrement. An application can increase the capacity of a vector before inserting a large number of components; this reduces the amount of incremental reallocation.</p>\n</blockquote>\n<p>I have been reading very little about collections in java, and the little I have seen I realize that they are dynamic, but until a moment I thought they were unlimited, I do not know if they are, this capacity and capacityIncrement confuse me, someone could explain me what they consist of please? :)</p>\n"},{"tags":["java","amazon-web-services","amazon-rds","squirrel-sql"],"comments":[{"owner":{"account_id":18911549,"reputation":600,"user_id":13797513,"display_name":"chptr-one"},"score":0,"creation_date":1671092362,"post_id":74803582,"comment_id":132024292,"body_markdown":"Please,  don&#39;t post images of code or error messages. Instead copy and paste or type the actual code/message into the post directly.","body":"Please,  don&#39;t post images of code or error messages. Instead copy and paste or type the actual code/message into the post directly."}],"owner":{"account_id":19066461,"reputation":1,"user_id":13921477,"display_name":"Sai Kiran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671047928,"creation_date":1671047928,"question_id":74803582,"body_markdown":"I have created a db in AWS in my root account but when i wanted to connect it from my local Squirrel i am getting below shown error.\r\nSteps i follwed were \r\n1. create aws Databse(Mysql)\r\n2. downloaded jdbc mysql driver and added to squirrel \r\n3. created an Alias to test connection by giving all required content when i am testing it it gives below error\r\n[enter image description here](https://i.stack.imgur.com/u99T1.png)\r\n","title":"How to establish connection from AWS database to Squirrel","body":"<p>I have created a db in AWS in my root account but when i wanted to connect it from my local Squirrel i am getting below shown error.\nSteps i follwed were</p>\n<ol>\n<li>create aws Databse(Mysql)</li>\n<li>downloaded jdbc mysql driver and added to squirrel</li>\n<li>created an Alias to test connection by giving all required content when i am testing it it gives below error\n<a href=\"https://i.stack.imgur.com/u99T1.png\" rel=\"nofollow noreferrer\">enter image description here</a></li>\n</ol>\n"},{"tags":["java","encoding","character-encoding","charset"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1671036719,"post_id":74801544,"comment_id":132012492,"body_markdown":"What is the `JavaSource` class?  What does its `write` method look like?","body":"What is the <code>JavaSource</code> class?  What does its <code>write</code> method look like?"},{"owner":{"account_id":27253272,"reputation":11,"user_id":20777347,"display_name":"Navie"},"score":0,"creation_date":1671036854,"post_id":74801544,"comment_id":132012548,"body_markdown":"@VGR I have added it in the question. Thank you.","body":"@VGR I have added it in the question. Thank you."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1671037012,"post_id":74801544,"comment_id":132012605,"body_markdown":"[The documentation for Files.newBufferedWriter](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/nio/file/Files.html#newBufferedWriter(java.nio.file.Path,java.nio.file.OpenOption...)) clearly says it uses UTF-8.  You should pass `&quot;-encoding&quot;, &quot;UTF-8&quot;` to your CompilerUtils.compile method.","body":"<a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/nio/file/Files.html#newBufferedWriter(java.nio.file.Path,java.nio.file.OpenOption...)\" rel=\"nofollow noreferrer\">The documentation for Files.newBufferedWriter</a> clearly says it uses UTF-8.  You should pass <code>&quot;-encoding&quot;, &quot;UTF-8&quot;</code> to your CompilerUtils.compile method."},{"owner":{"account_id":27253272,"reputation":11,"user_id":20777347,"display_name":"Navie"},"score":0,"creation_date":1671037158,"post_id":74801544,"comment_id":132012651,"body_markdown":"so, I should specify encoding as  try (BufferedWriter out = Files.newBufferedWriter(file, Charset.defaultCharset()))","body":"so, I should specify encoding as  try (BufferedWriter out = Files.newBufferedWriter(file, Charset.defaultCharset()))"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1671044543,"post_id":74801544,"comment_id":132014964,"body_markdown":"**Caution:** As of Java 18, [defaultCharset() always returns UTF-8 on all platforms.](https://openjdk.org/jeps/400)  I strongly recommend using UTF-8 both for the files and for the compiler.  It’s the easiest, most portable way to be certain the program works everywhere.","body":"<b>Caution:</b> As of Java 18, <a href=\"https://openjdk.org/jeps/400\" rel=\"nofollow noreferrer\">defaultCharset() always returns UTF-8 on all platforms.</a>  I strongly recommend using UTF-8 both for the files and for the compiler.  It’s the easiest, most portable way to be certain the program works everywhere."}],"owner":{"account_id":27253272,"reputation":11,"user_id":20777347,"display_name":"Navie"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671046602,"creation_date":1671036060,"question_id":74801544,"body_markdown":"I have a class with a function as follows\r\n`\r\n```\r\n    private static Path compileNamedModuleTest() throws IOException {\r\n        Path base = Paths.get(&quot;.&quot;, &quot;named&quot;);\r\n        Path src = base.resolve(&quot;src&quot;);\r\n        Path classes = base.resolve(&quot;classes&quot;);\r\n\r\n        ModuleInfoMaker maker = new ModuleInfoMaker(src);\r\n        maker.writeJavaFiles(&quot;test&quot;,\r\n                              &quot;module test {}&quot;,\r\n                              &quot;package test; public sealed interface Base permits test.a.ImplA1, test.a.ImplA2, test.b.ImplB, test.c.ImplC {}&quot;,\r\n                              &quot;package test.a; public final class ImplA1 implements test.Base {}&quot;,\r\n                              &quot;package test.a; public final class ImplA2 implements test.Base {}&quot;,\r\n                              &quot;package test.b; public final class ImplB implements test.Base {}&quot;,\r\n                              &quot;package test.c; public final class ImplC implements test.Base {}&quot;\r\n                              );\r\n        \r\n         System.out.println(&quot;Default Charset: &quot;\r\n                           + Charset.defaultCharset());\r\n                           \r\n        if (!CompilerUtils.compile(src, classes.resolve(&quot;test&quot;), &quot;--enable-preview&quot;, &quot;-source&quot;, System.getProperty(&quot;java.specification.version&quot;))) {\r\n            throw new AssertionError(&quot;Compilation didn&#39;t succeed!&quot;);\r\n        }\r\n\r\n        Files.delete(classes.resolve(&quot;test&quot;).resolve(&quot;test&quot;).resolve(&quot;c&quot;).resolve(&quot;ImplC.class&quot;));\r\n\r\n        return classes;\r\n    }\r\n```\r\n`\r\n\r\nand `WriteJavaFiles` function as \r\n\r\n\r\n```\r\n    /**\r\n     * Create java source files of the given module\r\n     */\r\n    public void writeJavaFiles(String module, String moduleInfoJava, String... contents)\r\n        throws IOException\r\n    {\r\n        Path msrc = dir.resolve(module);\r\n        new JavaSource(moduleInfoJava).write(msrc);\r\n        for (String c : contents) {\r\n            new JavaSource(c).write(msrc);\r\n        }\r\n    }\r\n```\r\n\r\nI am getting error as Error:\r\n\r\n&gt; Java files created during execution have encoding issues due to which\r\n&gt; compilation fails.\r\n&gt; \r\n&gt;     ./named/src/test/test/a/ImplA1.java:1: error: illegal character: &#39;\\u009b&#39;\r\n&gt;     /named/src/test/test/a/ImplA2.java:1: error: illegal character: &#39;\\u0080&#39;\r\n\r\nWhich I believe is an encoding issue and need to add `charset.defaultCharset()` somewhere. But I am unsure where to put it?\r\n\r\nJavaSource class\r\n\r\n    static class JavaSource {\r\n            final String source;\r\n            JavaSource(String source) {\r\n                this.source = source;\r\n            }\r\n    \r\n            /**\r\n             * Writes the source code to a file in a specified directory.\r\n             * @param dir the directory\r\n             * @throws IOException if there is a problem writing the file\r\n             */\r\n            public void write(Path dir) throws IOException {\r\n                Path file = dir.resolve(getJavaFileNameFromSource(source));\r\n                Files.createDirectories(file.getParent());\r\n                try (BufferedWriter out = Files.newBufferedWriter(file)) {\r\n                    out.write(source.replace(&quot;\\n&quot;, System.lineSeparator()));\r\n                }\r\n            }\r\n\r\n\r\n\r\nI tried adding `Charset` as argument in `WriteJavaFiles` but did not help.","title":"Encoding issue, failing with Assertion Error","body":"<p>I have a class with a function as follows\n`</p>\n<pre><code>    private static Path compileNamedModuleTest() throws IOException {\n        Path base = Paths.get(&quot;.&quot;, &quot;named&quot;);\n        Path src = base.resolve(&quot;src&quot;);\n        Path classes = base.resolve(&quot;classes&quot;);\n\n        ModuleInfoMaker maker = new ModuleInfoMaker(src);\n        maker.writeJavaFiles(&quot;test&quot;,\n                              &quot;module test {}&quot;,\n                              &quot;package test; public sealed interface Base permits test.a.ImplA1, test.a.ImplA2, test.b.ImplB, test.c.ImplC {}&quot;,\n                              &quot;package test.a; public final class ImplA1 implements test.Base {}&quot;,\n                              &quot;package test.a; public final class ImplA2 implements test.Base {}&quot;,\n                              &quot;package test.b; public final class ImplB implements test.Base {}&quot;,\n                              &quot;package test.c; public final class ImplC implements test.Base {}&quot;\n                              );\n        \n         System.out.println(&quot;Default Charset: &quot;\n                           + Charset.defaultCharset());\n                           \n        if (!CompilerUtils.compile(src, classes.resolve(&quot;test&quot;), &quot;--enable-preview&quot;, &quot;-source&quot;, System.getProperty(&quot;java.specification.version&quot;))) {\n            throw new AssertionError(&quot;Compilation didn't succeed!&quot;);\n        }\n\n        Files.delete(classes.resolve(&quot;test&quot;).resolve(&quot;test&quot;).resolve(&quot;c&quot;).resolve(&quot;ImplC.class&quot;));\n\n        return classes;\n    }\n</code></pre>\n<p>`</p>\n<p>and <code>WriteJavaFiles</code> function as</p>\n<pre><code>    /**\n     * Create java source files of the given module\n     */\n    public void writeJavaFiles(String module, String moduleInfoJava, String... contents)\n        throws IOException\n    {\n        Path msrc = dir.resolve(module);\n        new JavaSource(moduleInfoJava).write(msrc);\n        for (String c : contents) {\n            new JavaSource(c).write(msrc);\n        }\n    }\n</code></pre>\n<p>I am getting error as Error:</p>\n<blockquote>\n<p>Java files created during execution have encoding issues due to which\ncompilation fails.</p>\n<pre><code>./named/src/test/test/a/ImplA1.java:1: error: illegal character: '\\u009b'\n/named/src/test/test/a/ImplA2.java:1: error: illegal character: '\\u0080'\n</code></pre>\n</blockquote>\n<p>Which I believe is an encoding issue and need to add <code>charset.defaultCharset()</code> somewhere. But I am unsure where to put it?</p>\n<p>JavaSource class</p>\n<pre><code>static class JavaSource {\n        final String source;\n        JavaSource(String source) {\n            this.source = source;\n        }\n\n        /**\n         * Writes the source code to a file in a specified directory.\n         * @param dir the directory\n         * @throws IOException if there is a problem writing the file\n         */\n        public void write(Path dir) throws IOException {\n            Path file = dir.resolve(getJavaFileNameFromSource(source));\n            Files.createDirectories(file.getParent());\n            try (BufferedWriter out = Files.newBufferedWriter(file)) {\n                out.write(source.replace(&quot;\\n&quot;, System.lineSeparator()));\n            }\n        }\n</code></pre>\n<p>I tried adding <code>Charset</code> as argument in <code>WriteJavaFiles</code> but did not help.</p>\n"},{"tags":["java","spring-boot","hystrix","feign","netflix"],"answers":[{"tags":[],"owner":{"account_id":21170558,"reputation":53,"user_id":15602766,"display_name":"kqlqk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671046268,"creation_date":1671046268,"answer_id":74803367,"question_id":74783707,"body_markdown":"Okay, as I understand there is a following way how handling works: \r\n1. After exception calling ErrorDecoder\r\n2. After ErrorDecoder calling Fallback.\r\n\r\nSo i changed fallback to fallback factory and just throw exception farther in Fallback class.\r\n\r\n```\r\n    @Component\r\n    class Fallback implements FallbackFactory&lt;M2Client&gt; {\r\n        @Override\r\n        public AuthenticationClient create(Throwable cause) {\r\n            if (cause instanceof TimeoutException) {\r\n                throw new MicroserviceException(&quot;Service is unavailable&quot;);\r\n            }\r\n\r\n            if (cause instanceof RuntimeException) {\r\n                throw (RuntimeException) cause;\r\n            } else {\r\n                throw new RuntimeException(&quot;Unhandled exception: &quot; + cause.getMessage());\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n","title":"Custom error decoder stop working | Feign Hystrix","body":"<p>Okay, as I understand there is a following way how handling works:</p>\n<ol>\n<li>After exception calling ErrorDecoder</li>\n<li>After ErrorDecoder calling Fallback.</li>\n</ol>\n<p>So i changed fallback to fallback factory and just throw exception farther in Fallback class.</p>\n<pre><code>    @Component\n    class Fallback implements FallbackFactory&lt;M2Client&gt; {\n        @Override\n        public AuthenticationClient create(Throwable cause) {\n            if (cause instanceof TimeoutException) {\n                throw new MicroserviceException(&quot;Service is unavailable&quot;);\n            }\n\n            if (cause instanceof RuntimeException) {\n                throw (RuntimeException) cause;\n            } else {\n                throw new RuntimeException(&quot;Unhandled exception: &quot; + cause.getMessage());\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":21170558,"reputation":53,"user_id":15602766,"display_name":"kqlqk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74803367,"answer_count":1,"score":1,"last_activity_date":1671046268,"creation_date":1670928916,"question_id":74783707,"body_markdown":"Error decoder doesn&#39;t work.\r\n\r\nI have 2 microservices M1 M2. M1 use feign client with custom ErrorDecoder for communicating with M2. Then i added Hystrix for circuit breaking if M2 is unavailable.\r\n\r\nFeign client:\r\n```\r\n@FeignClient(name = &quot;M2&quot;, fallback = M2Client.Fallback.class)\r\npublic interface M2Client{\r\n\r\n    @GetMapping(&quot;/api/v1/users/{id}&quot;)\r\n    UserDTO getUserById(@PathVariable long id);\r\n    \r\n    //other endpoints\r\n\r\n    @Component\r\n    class Fallback implements M2Client{\r\n        @Override\r\n        public UserDTO getUserById(long id) {\r\n            throw new MicroserviceException(&quot;Service is unavailable&quot;);\r\n        }\r\n}\r\n```\r\n\r\nError decoder:\r\n\r\n```\r\n@Component\r\npublic class CustomErrorDecoder implements ErrorDecoder {\r\n\r\n    @Override\r\n    public Exception decode(String s, Response response) {\r\n    //...\r\n   }\r\n}\r\n```\r\n\r\nBut Custom ErrorDecoder stop working and all time M2 throw error, that calling fallback\r\n","title":"Custom error decoder stop working | Feign Hystrix","body":"<p>Error decoder doesn't work.</p>\n<p>I have 2 microservices M1 M2. M1 use feign client with custom ErrorDecoder for communicating with M2. Then i added Hystrix for circuit breaking if M2 is unavailable.</p>\n<p>Feign client:</p>\n<pre><code>@FeignClient(name = &quot;M2&quot;, fallback = M2Client.Fallback.class)\npublic interface M2Client{\n\n    @GetMapping(&quot;/api/v1/users/{id}&quot;)\n    UserDTO getUserById(@PathVariable long id);\n    \n    //other endpoints\n\n    @Component\n    class Fallback implements M2Client{\n        @Override\n        public UserDTO getUserById(long id) {\n            throw new MicroserviceException(&quot;Service is unavailable&quot;);\n        }\n}\n</code></pre>\n<p>Error decoder:</p>\n<pre><code>@Component\npublic class CustomErrorDecoder implements ErrorDecoder {\n\n    @Override\n    public Exception decode(String s, Response response) {\n    //...\n   }\n}\n</code></pre>\n<p>But Custom ErrorDecoder stop working and all time M2 throw error, that calling fallback</p>\n"},{"tags":["java","httpclient","steam","steambot"],"comments":[{"owner":{"account_id":719135,"reputation":711,"user_id":642319,"accept_rate":50,"display_name":"FreeBird"},"score":1,"creation_date":1612865532,"post_id":66116589,"comment_id":116893692,"body_markdown":"Your Postman screenshot shows two cookies though. Take a look at those. Even in Chrome I get a 403 so that seems like default behaviour when unauthenticated.","body":"Your Postman screenshot shows two cookies though. Take a look at those. Even in Chrome I get a 403 so that seems like default behaviour when unauthenticated."},{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1612865562,"post_id":66116589,"comment_id":116893707,"body_markdown":"The request urls are different, perhaps the uri in your code requires some form of Auth, while the one in postman doesnt","body":"The request urls are different, perhaps the uri in your code requires some form of Auth, while the one in postman doesnt"},{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1612865624,"post_id":66116589,"comment_id":116893741,"body_markdown":"@FreeBird seems likely the cookies have the auth/session details stored?","body":"@FreeBird seems likely the cookies have the auth/session details stored?"},{"owner":{"account_id":719135,"reputation":711,"user_id":642319,"accept_rate":50,"display_name":"FreeBird"},"score":0,"creation_date":1612866121,"post_id":66116589,"comment_id":116893948,"body_markdown":"@Gavin yes that&#39;s what I suspect too.","body":"@Gavin yes that&#39;s what I suspect too."},{"owner":{"account_id":18370164,"reputation":3,"user_id":13380412,"display_name":"Adwait"},"score":0,"creation_date":1612874330,"post_id":66116589,"comment_id":116897378,"body_markdown":"Thanks for the reply guys, the cookies were because I made the same request before without cookies and then steam set the cookies of sessionid and steamCountry. I am using Postman desktop application and not chrome plugin, is it still someway connected?","body":"Thanks for the reply guys, the cookies were because I made the same request before without cookies and then steam set the cookies of sessionid and steamCountry. I am using Postman desktop application and not chrome plugin, is it still someway connected?"}],"answers":[{"tags":[],"owner":{"account_id":16267237,"reputation":620,"user_id":11746899,"display_name":"Opri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612866948,"creation_date":1612866948,"answer_id":66117243,"question_id":66116589,"body_markdown":"I am pretty sure that the 2 cookies you have in postman and not in the java code are responsible for having the 403 response.\r\n\r\nPostman is a google chrome plugin so when connecting w/ chrome, maybe you stored in the cache the cookies.\r\n\r\nYou also need to add them to the java code.","title":"Java HttpClient Request return 403 status while postman returns the intended response","body":"<p>I am pretty sure that the 2 cookies you have in postman and not in the java code are responsible for having the 403 response.</p>\n<p>Postman is a google chrome plugin so when connecting w/ chrome, maybe you stored in the cache the cookies.</p>\n<p>You also need to add them to the java code.</p>\n"},{"tags":[],"owner":{"account_id":18370164,"reputation":3,"user_id":13380412,"display_name":"Adwait"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612885012,"creation_date":1612885012,"answer_id":66122145,"question_id":66116589,"body_markdown":"Firstly Thanks for all your answers and replies.\r\n\r\nSo I found that the inventory that I was trying to access was set visible to friends only, so response was 403. So it does work for inventories that are set to public.\r\n\r\nI am sorry, I should have check it first.\r\n\r\nWhat I still dont understand is how did the postman desktop client get the intended response? I understand that chrome was able to get the inventory because I have active steam login with cookies that would have been send but postman request did not have any cookies other than sessionid and country. If someone could explain how this happens it would really help me.","title":"Java HttpClient Request return 403 status while postman returns the intended response","body":"<p>Firstly Thanks for all your answers and replies.</p>\n<p>So I found that the inventory that I was trying to access was set visible to friends only, so response was 403. So it does work for inventories that are set to public.</p>\n<p>I am sorry, I should have check it first.</p>\n<p>What I still dont understand is how did the postman desktop client get the intended response? I understand that chrome was able to get the inventory because I have active steam login with cookies that would have been send but postman request did not have any cookies other than sessionid and country. If someone could explain how this happens it would really help me.</p>\n"}],"owner":{"account_id":18370164,"reputation":3,"user_id":13380412,"display_name":"Adwait"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":690,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671045936,"creation_date":1612864403,"question_id":66116589,"body_markdown":"Tried to request with postman which gives desired response.\r\n\r\nThe java code used for making the same request is as below fails with a 403 status.\r\n\r\n```java\r\nString url = &quot;https://steamcommunity.com/inventory/76561198865293952/440/2?l=english&amp;count=5000&quot;;\r\nString cookiesString = &quot;sessionid=&quot; + generateSessionId() + &quot;;steamCountry=IN%7Ce744269b3c4e531facb33ecaff29eb44&quot;;\r\n\r\nHttpClient client = HttpClient.newHttpClient();\r\n\r\nHttpRequest request = HttpRequest\r\n                .newBuilder()\r\n                .GET()\r\n                .header(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36&quot;)\r\n                .header(&quot;Accept&quot;, &quot;*/*&quot;)\r\n                .header(&quot;Cookie&quot;, cookiesString)\r\n                .uri(URI.create(url))\r\n                .build();\r\n\r\nHttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\n\r\nSystem.out.println(response.statusCode()); //prints 403\r\nSystem.out.println(response.body()); // prints       �+�� O��%   \r\n\r\n```\r\n\r\n```java\r\n/**\r\n* Generates a Steam Session Id.\r\n* @return sessionId.\r\n*/\r\npublic static String generateSessionId() {\r\n   return new BigInteger(96, new Random()).toString(16);\r\n}\r\n```\r\n\r\nPostman request does not need any headers(Not even User-Agent, only Host is kept, No cookies are needed) at all to get the desired response. Even navigating to link in browser shows the json response.\r\n\r\n[PostMan request ScreenShot][1]\r\n\r\n[Postman Request Image with cookies][2]\r\n\r\nThank you. Have a great day.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/B5TZL.png\r\n  [2]: https://i.stack.imgur.com/zOJKE.png","title":"Java HttpClient Request return 403 status while postman returns the intended response","body":"<p>Tried to request with postman which gives desired response.</p>\n<p>The java code used for making the same request is as below fails with a 403 status.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String url = &quot;https://steamcommunity.com/inventory/76561198865293952/440/2?l=english&amp;count=5000&quot;;\nString cookiesString = &quot;sessionid=&quot; + generateSessionId() + &quot;;steamCountry=IN%7Ce744269b3c4e531facb33ecaff29eb44&quot;;\n\nHttpClient client = HttpClient.newHttpClient();\n\nHttpRequest request = HttpRequest\n                .newBuilder()\n                .GET()\n                .header(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36&quot;)\n                .header(&quot;Accept&quot;, &quot;*/*&quot;)\n                .header(&quot;Cookie&quot;, cookiesString)\n                .uri(URI.create(url))\n                .build();\n\nHttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\n\nSystem.out.println(response.statusCode()); //prints 403\nSystem.out.println(response.body()); // prints       �+�� O��%   \n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n* Generates a Steam Session Id.\n* @return sessionId.\n*/\npublic static String generateSessionId() {\n   return new BigInteger(96, new Random()).toString(16);\n}\n</code></pre>\n<p>Postman request does not need any headers(Not even User-Agent, only Host is kept, No cookies are needed) at all to get the desired response. Even navigating to link in browser shows the json response.</p>\n<p><a href=\"https://i.stack.imgur.com/B5TZL.png\" rel=\"nofollow noreferrer\">PostMan request ScreenShot</a></p>\n<p><a href=\"https://i.stack.imgur.com/zOJKE.png\" rel=\"nofollow noreferrer\">Postman Request Image with cookies</a></p>\n<p>Thank you. Have a great day.</p>\n"},{"tags":["java","spring","spring-boot","inversion-of-control"],"comments":[{"owner":{"account_id":6141709,"reputation":1016,"user_id":4788928,"display_name":"Jeff Bennett"},"score":0,"creation_date":1607237802,"post_id":65165160,"comment_id":115206065,"body_markdown":"Is StorageAutoConfiguration annotated with &lt;at&gt;Configuration (and referenced by the main class).  I&#39;m suspicious that it is not, and that may cause Spring to overlook it and instantiate it late.  Plausibly, adding &lt;at&gt;Bean inside the class allows spring to realize it is configuration and thus initiate it early.  Just a theory, but might explain your behavior difference.","body":"Is StorageAutoConfiguration annotated with &lt;at&gt;Configuration (and referenced by the main class).  I&#39;m suspicious that it is not, and that may cause Spring to overlook it and instantiate it late.  Plausibly, adding &lt;at&gt;Bean inside the class allows spring to realize it is configuration and thus initiate it early.  Just a theory, but might explain your behavior difference."},{"owner":{"account_id":1871643,"reputation":455,"user_id":1693720,"display_name":"raywang"},"score":0,"creation_date":1607401070,"post_id":65165160,"comment_id":115254467,"body_markdown":"@Jeff Bennett:  thanks for your suggestion, there is a &lt;at&gt;Configuration with the class,   please see the UPDATE. actually, if I just add other &lt;at&gt;Bean method but not MethodValidationPostProcessor, it doesn&#39;t work too.","body":"@Jeff Bennett:  thanks for your suggestion, there is a &lt;at&gt;Configuration with the class,   please see the UPDATE. actually, if I just add other &lt;at&gt;Bean method but not MethodValidationPostProcessor, it doesn&#39;t work too."}],"answers":[{"tags":[],"owner":{"account_id":12617349,"reputation":11,"user_id":9174315,"display_name":"alyoro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671044925,"creation_date":1671044925,"answer_id":74803165,"question_id":65165160,"body_markdown":"Hi I&#39;ve had similar problem when I was trying to initialize custom beans using BeanFactoryAware interface - The @Configuration annotated class was like:\r\n\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(SomeProps.class)\r\n    class MyConfiguration implements BeanFactoryAware {\r\n\r\n      @Override\r\n      public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\r\n        ...\r\n        ...\r\n      }\r\n\r\n      @Bean\r\n      MyBean myBean(){\r\n        return new MyBean();\r\n      }\r\n    }\r\n\r\nIt did not run this configuration class code before MyBean was needed and NoSuchBeanDefinitionException were thrown.\r\n\r\nTo fix this I&#39;ve changed BeanFactoryAware interface to extending AbstractBeanFactoryAwareAdvisingPostProcessor like that:\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(SomeProps.class)\r\n    class MyConfiguration extends AbstractBeanFactoryAwareAdvisingPostProcessor {\r\n\r\n      @Override\r\n      public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\r\n        ...\r\n        ...\r\n      }\r\n\r\n      @Bean\r\n      MyBean myBean(){\r\n        return new MyBean();\r\n      }\r\n    }\r\n\r\n","title":"about the order of spring bean initialing","body":"<p>Hi I've had similar problem when I was trying to initialize custom beans using BeanFactoryAware interface - The @Configuration annotated class was like:</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties(SomeProps.class)\nclass MyConfiguration implements BeanFactoryAware {\n\n  @Override\n  public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n    ...\n    ...\n  }\n\n  @Bean\n  MyBean myBean(){\n    return new MyBean();\n  }\n}\n</code></pre>\n<p>It did not run this configuration class code before MyBean was needed and NoSuchBeanDefinitionException were thrown.</p>\n<p>To fix this I've changed BeanFactoryAware interface to extending AbstractBeanFactoryAwareAdvisingPostProcessor like that:</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties(SomeProps.class)\nclass MyConfiguration extends AbstractBeanFactoryAwareAdvisingPostProcessor {\n\n  @Override\n  public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n    ...\n    ...\n  }\n\n  @Bean\n  MyBean myBean(){\n    return new MyBean();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1871643,"reputation":455,"user_id":1693720,"display_name":"raywang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671044925,"creation_date":1607234238,"question_id":65165160,"body_markdown":"I have a custom spring-boot starter project which is used by rest controller, the auto configuration class is used for creating several(according to config value in application.yml) Storage Context instance as spring singleton, so I have to create them dynamically in setBeanFactory method of BeanFactoryAware by :\r\n\r\n```\r\n\r\n@Import(StorageContextProperties.class)\r\npublic class StorageAutoConfiguration implements BeanFactoryAware {\r\n\r\n      ......\r\n        \r\n      @Override\r\n      public void setBeanFactory(BeanFactory factory) throws BeansException {\r\n\r\n         ......\r\n\r\n         StorageContextProperties config = beanFactory.getBean(StorageContextProperties.class);\r\n\r\n         config.getProfiles().stream().forEach(p -&gt;  {\r\n\r\n              ......\r\n\r\n              ((SingletonBeanRegistry) beanFactory).registerSingleton(profile.name, instance);\r\n\r\n\r\n\r\n\r\n\r\n```\r\n\r\nthe problem is that the method is not been called before the controller @autowired event, so it will complain there is no StorageContext instance, I have also tried BeanFactoryPostProcessor and InitializingBean interface, neither of them works. \r\n\r\nBut, I notice if I just add some special @Bean method into the auto config class, let&#39;s say :\r\n\r\n```\r\n@Import(StorageContextProperties.class)\r\npublic class StorageAutoConfiguration implements BeanFactoryAware{\r\n\r\n    @Bean\r\n    public MethodValidationPostProcessor validationPostProcessor2() {\r\n        return new MethodValidationPostProcessor();\r\n    }\r\n    \r\n\r\n    ......\r\n\r\n    @Override\r\n    public void setBeanFactory(BeanFactory factory) throws BeansException {\r\n\r\n\r\n```\r\n\r\nthen the setBeanFactory() will be called before the controller, it seems that spring needs MethodValidationPostProcessor instance, so it created shared instance of singleton bean: StorageAutoConfiguration, also create StorageContextProperties instance and call setBeanFactory().\r\n\r\nthe code works if I add above @Bean method. well things also goes well in this way, but I don&#39;t like the style since I actually have no need for MethodValidationPostProcessor.\r\n\r\nis there any elegant(without @Bean method) way to achieve it?\r\n\r\nmy requirements are :\r\n\r\n\r\nbefore the controller creating event.\r\n\r\n1 create StorageContextProperties  ( it&#39;s a @ConfigurationProperties class by @Import)\r\n2 some callback I can call registerSingleton() to create my Storage Context instances\r\n\r\n\r\n\r\nThanks! \r\n\r\n[UPDATED1]\r\n\r\nI still don&#39;t find any way to make it works, but I changed the code as :\r\n\r\n```\r\n\r\n@Configuration\r\n@Import(StorageContextProperties.class)\r\n@ConditionalOnProperty(prefix = &quot;avalon.thiton.storage.config&quot;, name = &quot;masterKey&quot;)\r\npublic class StorageAutoConfiguration implements BeanFactoryAware {\r\n\r\n    private static Logger log = LoggerFactory.getLogger(StorageAutoConfiguration.class);\r\n\r\n    @Bean\r\n    @Order(Ordered.LOWEST_PRECEDENCE)\r\n    @ConditionalOnMissingBean(MethodValidationPostProcessor.class)\r\n    public MethodValidationPostProcessor placeholder() {\r\n        return new MethodValidationPostProcessor();\r\n    }\r\n\r\n    ......\r\n\r\n```\r\n\r\nIt makes me feel..... better.","title":"about the order of spring bean initialing","body":"<p>I have a custom spring-boot starter project which is used by rest controller, the auto configuration class is used for creating several(according to config value in application.yml) Storage Context instance as spring singleton, so I have to create them dynamically in setBeanFactory method of BeanFactoryAware by :</p>\n<pre><code>\n@Import(StorageContextProperties.class)\npublic class StorageAutoConfiguration implements BeanFactoryAware {\n\n      ......\n        \n      @Override\n      public void setBeanFactory(BeanFactory factory) throws BeansException {\n\n         ......\n\n         StorageContextProperties config = beanFactory.getBean(StorageContextProperties.class);\n\n         config.getProfiles().stream().forEach(p -&gt;  {\n\n              ......\n\n              ((SingletonBeanRegistry) beanFactory).registerSingleton(profile.name, instance);\n\n\n\n\n\n</code></pre>\n<p>the problem is that the method is not been called before the controller @autowired event, so it will complain there is no StorageContext instance, I have also tried BeanFactoryPostProcessor and InitializingBean interface, neither of them works.</p>\n<p>But, I notice if I just add some special @Bean method into the auto config class, let's say :</p>\n<pre><code>@Import(StorageContextProperties.class)\npublic class StorageAutoConfiguration implements BeanFactoryAware{\n\n    @Bean\n    public MethodValidationPostProcessor validationPostProcessor2() {\n        return new MethodValidationPostProcessor();\n    }\n    \n\n    ......\n\n    @Override\n    public void setBeanFactory(BeanFactory factory) throws BeansException {\n\n\n</code></pre>\n<p>then the setBeanFactory() will be called before the controller, it seems that spring needs MethodValidationPostProcessor instance, so it created shared instance of singleton bean: StorageAutoConfiguration, also create StorageContextProperties instance and call setBeanFactory().</p>\n<p>the code works if I add above @Bean method. well things also goes well in this way, but I don't like the style since I actually have no need for MethodValidationPostProcessor.</p>\n<p>is there any elegant(without @Bean method) way to achieve it?</p>\n<p>my requirements are :</p>\n<p>before the controller creating event.</p>\n<p>1 create StorageContextProperties  ( it's a @ConfigurationProperties class by @Import)\n2 some callback I can call registerSingleton() to create my Storage Context instances</p>\n<p>Thanks!</p>\n<p>[UPDATED1]</p>\n<p>I still don't find any way to make it works, but I changed the code as :</p>\n<pre><code>\n@Configuration\n@Import(StorageContextProperties.class)\n@ConditionalOnProperty(prefix = &quot;avalon.thiton.storage.config&quot;, name = &quot;masterKey&quot;)\npublic class StorageAutoConfiguration implements BeanFactoryAware {\n\n    private static Logger log = LoggerFactory.getLogger(StorageAutoConfiguration.class);\n\n    @Bean\n    @Order(Ordered.LOWEST_PRECEDENCE)\n    @ConditionalOnMissingBean(MethodValidationPostProcessor.class)\n    public MethodValidationPostProcessor placeholder() {\n        return new MethodValidationPostProcessor();\n    }\n\n    ......\n\n</code></pre>\n<p>It makes me feel..... better.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect","ignite","noclassdeffounderror"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1630086699,"post_id":68948937,"comment_id":121868985,"body_markdown":"Show us the class in the error actually exists - https://stackoverflow.com/a/1343026/2308683","body":"Show us the class in the error actually exists - <a href=\"https://stackoverflow.com/a/1343026/2308683\">stackoverflow.com/a/1343026/2308683</a>"},{"owner":{"account_id":22579956,"reputation":21,"user_id":16764755,"display_name":"CoderClown"},"score":0,"creation_date":1630302700,"post_id":68948937,"comment_id":121909534,"body_markdown":"Hi the class is part of kafka-ignite.2.9.1.jar, I have edited the problem. Please have a look and guide. Also, the error is popped only when I am trying to run it in distributed mode, in standalone it&#39;s not showing any such issue. Is it because of static nature of class?","body":"Hi the class is part of kafka-ignite.2.9.1.jar, I have edited the problem. Please have a look and guide. Also, the error is popped only when I am trying to run it in distributed mode, in standalone it&#39;s not showing any such issue. Is it because of static nature of class?"}],"owner":{"account_id":22579956,"reputation":21,"user_id":16764755,"display_name":"CoderClown"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1671044883,"creation_date":1630045967,"question_id":68948937,"body_markdown":"I am trying to load kafka topic data into ignite caches with the help of Apache Ignite Sink connector. Facing following issue. All required jars are in place along with ignite configuration (xml) file. \r\n\r\nI am pretty unsure why it is throwing ConnectException and NoClassDefFoundException for IgniteSinkTask$StreamerContext$Holder. Due to some reason java is unable to run these classes.\r\n\r\n\r\n    public static class StreamerContext {\r\n        private StreamerContext() {\r\n        }\r\n\r\n        public static Ignite getIgnite() {\r\n            return IgniteSinkTask.StreamerContext.Holder.IGNITE;\r\n        }\r\n\r\n        public static IgniteDataStreamer getStreamer() {\r\n            return IgniteSinkTask.StreamerContext.Holder.STREAMER;\r\n        }\r\n\r\n        private static class Holder {\r\n            private static final Ignite IGNITE;\r\n            private static final IgniteDataStreamer STREAMER;\r\n\r\n            private Holder() {\r\n            }\r\n\r\n            static {\r\n                IGNITE = Ignition.start(IgniteSinkTask.igniteConfigFile);\r\n                STREAMER = IGNITE.dataStreamer(IgniteSinkTask.cacheName);\r\n            }\r\n        }\r\n    }\r\n\r\nHow can I resolve this?\r\nThanks in advance.\r\n\r\n\r\n\r\n\r\n     [ERROR] 2021-08-27 06:13:58,827\r\n     [task-thread-IgniteSinkConnectorConnector_0-0]\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask deliverMessages -\r\n     WorkerSinkTask{​id=IgniteSinkConnectorConnector_0-0}​ Task threw an\r\n     uncaught and unrecoverable exception. Task is being killed and will\r\n     not recover until manually restarted. Error: Could not initialize\r\n     class\r\n     org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext$Holder\r\n     java.lang.NoClassDefFoundError: Could not initialize class\r\n     org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext$Holder\r\n     at\r\n     org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext.getStreamer(IgniteSinkTask.java:198)\r\n     at\r\n     org.apache.ignite.stream.kafka.connect.IgniteSinkTask.put(IgniteSinkTask.java:118)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages(WorkerSinkTask.java:586)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:329)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:232)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:201)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:185)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234)\r\n     at\r\n     java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n     at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n     at\r\n     java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n     at\r\n     java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n     at java.base/java.lang.Thread.run(Thread.java:834) [ERROR] 2021-08-27\r\n     06:13:58,828 [task-thread-IgniteSinkConnectorConnector_0-0]\r\n     org.apache.kafka.connect.runtime.WorkerTask doRun -\r\n     WorkerSinkTask{​id=IgniteSinkConnectorConnector_0-0}​ Task threw an\r\n     uncaught and unrecoverable exception. Task is being killed and will\r\n     not recover until manually restarted\r\n     org.apache.kafka.connect.errors.ConnectException: Exiting\r\n     WorkerSinkTask due to unrecoverable exception. at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages(WorkerSinkTask.java:614)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:329)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:232)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:201)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:185)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234)\r\n     at\r\n     java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n     at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n     at\r\n     java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n     at\r\n     java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n     at java.base/java.lang.Thread.run(Thread.java:834) Caused by:\r\n     java.lang.NoClassDefFoundError: Could not initialize class\r\n     org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext$Holder\r\n     at\r\n     org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext.getStreamer(IgniteSinkTask.java:198)\r\n     at\r\n     org.apache.ignite.stream.kafka.connect.IgniteSinkTask.put(IgniteSinkTask.java:118)\r\n     at\r\n     org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages(WorkerSinkTask.java:586)\r\n\r\n","title":"Apache Ignite Connector - Giving NoClassDefFoundError","body":"<p>I am trying to load kafka topic data into ignite caches with the help of Apache Ignite Sink connector. Facing following issue. All required jars are in place along with ignite configuration (xml) file.</p>\n<p>I am pretty unsure why it is throwing ConnectException and NoClassDefFoundException for IgniteSinkTask$StreamerContext$Holder. Due to some reason java is unable to run these classes.</p>\n<pre><code>public static class StreamerContext {\n    private StreamerContext() {\n    }\n\n    public static Ignite getIgnite() {\n        return IgniteSinkTask.StreamerContext.Holder.IGNITE;\n    }\n\n    public static IgniteDataStreamer getStreamer() {\n        return IgniteSinkTask.StreamerContext.Holder.STREAMER;\n    }\n\n    private static class Holder {\n        private static final Ignite IGNITE;\n        private static final IgniteDataStreamer STREAMER;\n\n        private Holder() {\n        }\n\n        static {\n            IGNITE = Ignition.start(IgniteSinkTask.igniteConfigFile);\n            STREAMER = IGNITE.dataStreamer(IgniteSinkTask.cacheName);\n        }\n    }\n}\n</code></pre>\n<p>How can I resolve this?\nThanks in advance.</p>\n<pre><code> [ERROR] 2021-08-27 06:13:58,827\n [task-thread-IgniteSinkConnectorConnector_0-0]\n org.apache.kafka.connect.runtime.WorkerSinkTask deliverMessages -\n WorkerSinkTask{​id=IgniteSinkConnectorConnector_0-0}​ Task threw an\n uncaught and unrecoverable exception. Task is being killed and will\n not recover until manually restarted. Error: Could not initialize\n class\n org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext$Holder\n java.lang.NoClassDefFoundError: Could not initialize class\n org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext$Holder\n at\n org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext.getStreamer(IgniteSinkTask.java:198)\n at\n org.apache.ignite.stream.kafka.connect.IgniteSinkTask.put(IgniteSinkTask.java:118)\n at\n org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages(WorkerSinkTask.java:586)\n at\n org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:329)\n at\n org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:232)\n at\n org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:201)\n at\n org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:185)\n at\n org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234)\n at\n java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n at\n java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n at\n java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n at java.base/java.lang.Thread.run(Thread.java:834) [ERROR] 2021-08-27\n 06:13:58,828 [task-thread-IgniteSinkConnectorConnector_0-0]\n org.apache.kafka.connect.runtime.WorkerTask doRun -\n WorkerSinkTask{​id=IgniteSinkConnectorConnector_0-0}​ Task threw an\n uncaught and unrecoverable exception. Task is being killed and will\n not recover until manually restarted\n org.apache.kafka.connect.errors.ConnectException: Exiting\n WorkerSinkTask due to unrecoverable exception. at\n org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages(WorkerSinkTask.java:614)\n at\n org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:329)\n at\n org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:232)\n at\n org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:201)\n at\n org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:185)\n at\n org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234)\n at\n java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n at\n java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n at\n java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n at java.base/java.lang.Thread.run(Thread.java:834) Caused by:\n java.lang.NoClassDefFoundError: Could not initialize class\n org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext$Holder\n at\n org.apache.ignite.stream.kafka.connect.IgniteSinkTask$StreamerContext.getStreamer(IgniteSinkTask.java:198)\n at\n org.apache.ignite.stream.kafka.connect.IgniteSinkTask.put(IgniteSinkTask.java:118)\n at\n org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages(WorkerSinkTask.java:586)\n</code></pre>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":934735,"reputation":23556,"user_id":963881,"accept_rate":83,"display_name":"syntagma"},"score":0,"creation_date":1496785790,"post_id":44400163,"comment_id":75800532,"body_markdown":"Why not just deserialize `data` to `Map&lt;String, String&gt;`?","body":"Why not just deserialize <code>data</code> to <code>Map&lt;String, String&gt;</code>?"},{"owner":{"account_id":187570,"reputation":4917,"user_id":425722,"accept_rate":83,"display_name":"Andrew Rueckert"},"score":0,"creation_date":1496785915,"post_id":44400163,"comment_id":75800569,"body_markdown":"Does `context.deserialize(data, typeOfT);` not work?","body":"Does <code>context.deserialize(data, typeOfT);</code> not work?"},{"owner":{"account_id":2162613,"reputation":9277,"user_id":1916449,"accept_rate":100,"display_name":"arekolek"},"score":0,"creation_date":1496786691,"post_id":44400163,"comment_id":75800820,"body_markdown":"@syntagma &quot;user_id&quot; is not a String, that&#39;s for starters. But even if, how would that help me to throw `ApiError` if &quot;type&quot; is &quot;error&quot; or return the `User` otherwise?","body":"@syntagma &quot;user_id&quot; is not a String, that&#39;s for starters. But even if, how would that help me to throw <code>ApiError</code> if &quot;type&quot; is &quot;error&quot; or return the <code>User</code> otherwise?"},{"owner":{"account_id":2162613,"reputation":9277,"user_id":1916449,"accept_rate":100,"display_name":"arekolek"},"score":1,"creation_date":1496786974,"post_id":44400163,"comment_id":75800899,"body_markdown":"@AndrewRueckert I expect not. Documentation says &quot;In the implementation of this call-back method, you should consider invoking JsonDeserializationContext.deserialize(JsonElement, Type) method to create objects for any non-trivial field of the returned object. However, you should never invoke it on the the same type passing json since that will cause an infinite loop (Gson will call your call-back method again).&quot;","body":"@AndrewRueckert I expect not. Documentation says &quot;In the implementation of this call-back method, you should consider invoking JsonDeserializationContext.deserialize(JsonElement, Type) method to create objects for any non-trivial field of the returned object. However, you should never invoke it on the the same type passing json since that will cause an infinite loop (Gson will call your call-back method again).&quot;"},{"owner":{"account_id":1612513,"reputation":2128,"user_id":1491076,"display_name":"Nuno Rafael Figueiredo"},"score":0,"creation_date":1617725174,"post_id":44400163,"comment_id":118382491,"body_markdown":"&quot;I don&#39;t think JsonReader has an option to read the input twice&quot; - it has a peek() method","body":"&quot;I don&#39;t think JsonReader has an option to read the input twice&quot; - it has a peek() method"},{"owner":{"account_id":2162613,"reputation":9277,"user_id":1916449,"accept_rate":100,"display_name":"arekolek"},"score":0,"creation_date":1617740436,"post_id":44400163,"comment_id":118388956,"body_markdown":"@NunoRafaelFigueiredo I&#39;m not sure how being able to peek at the next token would help with the input given as the example.","body":"@NunoRafaelFigueiredo I&#39;m not sure how being able to peek at the next token would help with the input given as the example."}],"answers":[{"tags":[],"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1496793067,"creation_date":1496793067,"answer_id":44401396,"question_id":44400163,"body_markdown":"&gt;But actually it&#39;s wrong, because it doesn&#39;t use the same Gson to delegate that work to, so it will use a different field naming policy, for example.\r\n\r\nCorrect. You should use `JsonDeserializationContext`.\r\n\r\n&gt;... because I don&#39;t think JsonReader has an option to read the input twice, there&#39;s also no way to cache the &quot;data&quot; value in an abstract type like JsonElement to parse after &quot;type&quot; has been encountered.\r\n\r\nCorrect. `JsonReader` is a stream reader whilst `JsonElement` is a tree. These are like SAX and DOM from the XML world with all of their respective pros and cons. Streaming readers just read input stream, and you have to buffer/cache intermediate data yourself.\r\n\r\nYou _can use both approaches_ for you case, but I would go with `JsonDeserializer` for its simplicity (assuming you&#39;re not going to write a super-fast deserializer).\r\n\r\nI&#39;m not really sure how your `User` and `ApiError` relate to each other, but I would go with a common class for both two different kinds of values: real values and errors. It looks like your two classes have a common parent or ancestor, but I&#39;m not really sure how you deal with them at a call-site (perhaps `instanceof`?). Say, something like this (constructor hidden in order to encapsulate the complexity of the object structure initialization):\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tfinal class Content&lt;T&gt; {\r\n\r\n\t\tprivate final boolean isSuccess;\r\n\t\tprivate final T data;\r\n\t\tprivate final ApiError error;\r\n\r\n\t\tprivate Content(final boolean isSuccess, final T data, final ApiError error) {\r\n\t\t\tthis.isSuccess = isSuccess;\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.error = error;\r\n\t\t}\r\n\r\n\t\tstatic &lt;T&gt; Content&lt;T&gt; success(final T data) {\r\n\t\t\treturn new Content&lt;&gt;(true, data, null);\r\n\t\t}\r\n\r\n\t\tstatic &lt;T&gt; Content&lt;T&gt; error(final ApiError error) {\r\n\t\t\treturn new Content&lt;&gt;(false, null, error);\r\n\t\t}\r\n\r\n\t\tboolean isSuccess() {\r\n\t\t\treturn isSuccess;\r\n\t\t}\r\n\r\n\t\tT getData()\r\n\t\t\t\tthrows IllegalStateException {\r\n\t\t\tif ( !isSuccess ) {\r\n\t\t\t\tthrow new IllegalStateException();\r\n\t\t\t}\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\tApiError getError()\r\n\t\t\t\tthrows IllegalStateException {\r\n\t\t\tif ( isSuccess ) {\r\n\t\t\t\tthrow new IllegalStateException();\r\n\t\t\t}\r\n\t\t\treturn error;\r\n\t\t}\r\n\r\n\t}\r\n\r\nAnd both `User` and `ApiError` from my perspective (I prefer `@SerializedName` though to have a stronger control over naming -- but it seems like a matter of habit).\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tfinal class ApiError {\r\n\r\n\t\t@SuppressWarnings(&quot;error_name&quot;)\r\n\t\tfinal String errorName = null;\r\n\r\n\t\t@SerializedName(&quot;error_message&quot;)\r\n\t\tfinal String errorMessage = null;\r\n\r\n\t}\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tfinal class User {\r\n\r\n\t\t@SerializedName(&quot;display_name&quot;)\r\n\t\tfinal String displayName = null;\r\n\r\n\t\t@SerializedName(&quot;user_email&quot;)\r\n\t\tfinal String userEmail = null;\r\n\r\n\t\t@SuppressWarnings(&quot;user_id&quot;)\r\n\t\tfinal int userId = Integer.valueOf(0);\r\n\r\n\t}\r\n\r\nNext, since tree manipulation is easier, just implement your JSON deserializer:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tfinal class ContentJsonDeserializer&lt;T&gt;\r\n\t\t\timplements JsonDeserializer&lt;Content&lt;T&gt;&gt; {\r\n\r\n\t\t// This deserializer holds no state\r\n\t\tprivate static final JsonDeserializer&lt;?&gt; contentJsonDeserializer = new ContentJsonDeserializer&lt;&gt;();\r\n\r\n\t\tprivate ContentJsonDeserializer() {\r\n\t\t}\r\n\r\n\t\t// ... and we hide away that fact not letting this one to be instantiated at call sites\r\n\t\tstatic &lt;T&gt; JsonDeserializer&lt;T&gt; getContentJsonDeserializer() {\r\n\t\t\t// Narrowing down the @SuppressWarnings scope -- suppressing warnings for entire method may be harmful\r\n\t\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\t\tfinal JsonDeserializer&lt;T&gt; contentJsonDeserializer = (JsonDeserializer&lt;T&gt;) ContentJsonDeserializer.contentJsonDeserializer;\r\n\t\t\treturn contentJsonDeserializer;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic Content&lt;T&gt; deserialize(final JsonElement jsonElement, final Type type, final JsonDeserializationContext context)\r\n\t\t\t\tthrows JsonParseException {\r\n\t\t\tfinal JsonObject jsonObject = jsonElement.getAsJsonObject();\r\n\t\t\tfinal String responseType = jsonObject.getAsJsonPrimitive(&quot;type&quot;).getAsString();\r\n\t\t\tswitch ( responseType ) {\r\n\t\t\tcase &quot;success&quot;:\r\n\t\t\t\treturn success(context.deserialize(jsonObject.get(&quot;data&quot;), getTypeParameter0(type)));\r\n\t\t\tcase &quot;error&quot;:\r\n\t\t\t\treturn error(context.deserialize(jsonObject.get(&quot;data&quot;), ApiError.class));\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new JsonParseException(responseType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Trying to detect any given type parameterization for its first type parameter\r\n\t\tprivate static Type getTypeParameter0(final Type type) {\r\n\t\t\tif ( !(type instanceof ParameterizedType) ) {\r\n\t\t\t\treturn Object.class;\r\n\t\t\t}\r\n\t\t\treturn ((ParameterizedType) type).getActualTypeArguments()[0];\r\n\t\t}\r\n\r\n\t}\r\n\r\nDemo:\r\n\r\n\tprivate static final Gson gson = new GsonBuilder()\r\n\t\t\t.registerTypeAdapter(Content.class, getContentJsonDeserializer())\r\n\t\t\t.create();\r\n\r\n\tprivate static final Type userContent = new TypeToken&lt;Content&lt;User&gt;&gt;() {\r\n\t}.getType();\r\n\r\n\tpublic static void main(final String... args)\r\n\t\t\tthrows IOException {\r\n\t\tfor ( final String name : ImmutableList.of(&quot;success.json&quot;, &quot;error.json&quot;, &quot;success-reversed.json&quot;, &quot;error-reversed.json&quot;) ) {\r\n\t\t\ttry ( final JsonReader jsonReader = getPackageResourceJsonReader(Q44400163.class, name) ) {\r\n\t\t\t\tfinal Content&lt;User&gt; content = gson.fromJson(jsonReader, userContent);\r\n\t\t\t\tif ( content.isSuccess() ) {\r\n\t\t\t\t\tSystem.out.println(&quot;SUCCESS: &quot; + content.getData().displayName);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSystem.out.println(&quot;ERROR:   &quot; + content.getError().errorMessage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nOutput:\r\n\r\n&gt;SUCCESS: Invisible Pink Unicorn  \r\n&gt;ERROR:   The username or password you entered is incorrect.  \r\n&gt;SUCCESS: Invisible Pink Unicorn  \r\n&gt;ERROR:   The username or password you entered is incorrect.\r\n\r\nNow, back to you original question regarding `TypeAdapter`. As I mentioned above, you can do it using a type adapter as well, but you have to implement the two cases support:\r\n\r\n* Forward case, and you have already implemented it (the best case): read the `type` property first, and then read the `data` property according to your real date type. By the way, your `TypeAdapter` implementation is far from being generic: you had to resolve the real data type and its adapter using `Gson.getDelegateAdapter`.\r\n* Reverse case (the worst case): read the `data` property into a tree view (therefore buffering it into memory) as a `JsonElement` instance (you have to get the `TypeAdapter&lt;JsonElement&gt;` from the `Gson` instance in the `create` method first), and then, according to the next `type` property value, read it as a value from the tree using `TypeAdapter.fromJsonTree`.\r\n\r\nAnd yes, don&#39;t forget to check the parsing state here (handle missing `type` and `data` for both cases somehow). As you can see, this introduces variable complexity and performance/memory cost, but it can give you the best performance. You decide.","title":"Deserializing a JSON Object with Gson TypeAdapter in an ordering-insensitive manner","body":"<blockquote>\n  <p>But actually it's wrong, because it doesn't use the same Gson to delegate that work to, so it will use a different field naming policy, for example.</p>\n</blockquote>\n\n<p>Correct. You should use <code>JsonDeserializationContext</code>.</p>\n\n<blockquote>\n  <p>... because I don't think JsonReader has an option to read the input twice, there's also no way to cache the \"data\" value in an abstract type like JsonElement to parse after \"type\" has been encountered.</p>\n</blockquote>\n\n<p>Correct. <code>JsonReader</code> is a stream reader whilst <code>JsonElement</code> is a tree. These are like SAX and DOM from the XML world with all of their respective pros and cons. Streaming readers just read input stream, and you have to buffer/cache intermediate data yourself.</p>\n\n<p>You <em>can use both approaches</em> for you case, but I would go with <code>JsonDeserializer</code> for its simplicity (assuming you're not going to write a super-fast deserializer).</p>\n\n<p>I'm not really sure how your <code>User</code> and <code>ApiError</code> relate to each other, but I would go with a common class for both two different kinds of values: real values and errors. It looks like your two classes have a common parent or ancestor, but I'm not really sure how you deal with them at a call-site (perhaps <code>instanceof</code>?). Say, something like this (constructor hidden in order to encapsulate the complexity of the object structure initialization):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>final class Content&lt;T&gt; {\n\n    private final boolean isSuccess;\n    private final T data;\n    private final ApiError error;\n\n    private Content(final boolean isSuccess, final T data, final ApiError error) {\n        this.isSuccess = isSuccess;\n        this.data = data;\n        this.error = error;\n    }\n\n    static &lt;T&gt; Content&lt;T&gt; success(final T data) {\n        return new Content&lt;&gt;(true, data, null);\n    }\n\n    static &lt;T&gt; Content&lt;T&gt; error(final ApiError error) {\n        return new Content&lt;&gt;(false, null, error);\n    }\n\n    boolean isSuccess() {\n        return isSuccess;\n    }\n\n    T getData()\n            throws IllegalStateException {\n        if ( !isSuccess ) {\n            throw new IllegalStateException();\n        }\n        return data;\n    }\n\n    ApiError getError()\n            throws IllegalStateException {\n        if ( isSuccess ) {\n            throw new IllegalStateException();\n        }\n        return error;\n    }\n\n}\n</code></pre>\n\n<p>And both <code>User</code> and <code>ApiError</code> from my perspective (I prefer <code>@SerializedName</code> though to have a stronger control over naming -- but it seems like a matter of habit).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>final class ApiError {\n\n    @SuppressWarnings(\"error_name\")\n    final String errorName = null;\n\n    @SerializedName(\"error_message\")\n    final String errorMessage = null;\n\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>final class User {\n\n    @SerializedName(\"display_name\")\n    final String displayName = null;\n\n    @SerializedName(\"user_email\")\n    final String userEmail = null;\n\n    @SuppressWarnings(\"user_id\")\n    final int userId = Integer.valueOf(0);\n\n}\n</code></pre>\n\n<p>Next, since tree manipulation is easier, just implement your JSON deserializer:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>final class ContentJsonDeserializer&lt;T&gt;\n        implements JsonDeserializer&lt;Content&lt;T&gt;&gt; {\n\n    // This deserializer holds no state\n    private static final JsonDeserializer&lt;?&gt; contentJsonDeserializer = new ContentJsonDeserializer&lt;&gt;();\n\n    private ContentJsonDeserializer() {\n    }\n\n    // ... and we hide away that fact not letting this one to be instantiated at call sites\n    static &lt;T&gt; JsonDeserializer&lt;T&gt; getContentJsonDeserializer() {\n        // Narrowing down the @SuppressWarnings scope -- suppressing warnings for entire method may be harmful\n        @SuppressWarnings(\"unchecked\")\n        final JsonDeserializer&lt;T&gt; contentJsonDeserializer = (JsonDeserializer&lt;T&gt;) ContentJsonDeserializer.contentJsonDeserializer;\n        return contentJsonDeserializer;\n    }\n\n    @Override\n    public Content&lt;T&gt; deserialize(final JsonElement jsonElement, final Type type, final JsonDeserializationContext context)\n            throws JsonParseException {\n        final JsonObject jsonObject = jsonElement.getAsJsonObject();\n        final String responseType = jsonObject.getAsJsonPrimitive(\"type\").getAsString();\n        switch ( responseType ) {\n        case \"success\":\n            return success(context.deserialize(jsonObject.get(\"data\"), getTypeParameter0(type)));\n        case \"error\":\n            return error(context.deserialize(jsonObject.get(\"data\"), ApiError.class));\n        default:\n            throw new JsonParseException(responseType);\n        }\n    }\n\n    // Trying to detect any given type parameterization for its first type parameter\n    private static Type getTypeParameter0(final Type type) {\n        if ( !(type instanceof ParameterizedType) ) {\n            return Object.class;\n        }\n        return ((ParameterizedType) type).getActualTypeArguments()[0];\n    }\n\n}\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>private static final Gson gson = new GsonBuilder()\n        .registerTypeAdapter(Content.class, getContentJsonDeserializer())\n        .create();\n\nprivate static final Type userContent = new TypeToken&lt;Content&lt;User&gt;&gt;() {\n}.getType();\n\npublic static void main(final String... args)\n        throws IOException {\n    for ( final String name : ImmutableList.of(\"success.json\", \"error.json\", \"success-reversed.json\", \"error-reversed.json\") ) {\n        try ( final JsonReader jsonReader = getPackageResourceJsonReader(Q44400163.class, name) ) {\n            final Content&lt;User&gt; content = gson.fromJson(jsonReader, userContent);\n            if ( content.isSuccess() ) {\n                System.out.println(\"SUCCESS: \" + content.getData().displayName);\n            } else {\n                System.out.println(\"ERROR:   \" + content.getError().errorMessage);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>SUCCESS: Invisible Pink Unicorn<br>\n  ERROR:   The username or password you entered is incorrect.<br>\n  SUCCESS: Invisible Pink Unicorn<br>\n  ERROR:   The username or password you entered is incorrect.</p>\n</blockquote>\n\n<p>Now, back to you original question regarding <code>TypeAdapter</code>. As I mentioned above, you can do it using a type adapter as well, but you have to implement the two cases support:</p>\n\n<ul>\n<li>Forward case, and you have already implemented it (the best case): read the <code>type</code> property first, and then read the <code>data</code> property according to your real date type. By the way, your <code>TypeAdapter</code> implementation is far from being generic: you had to resolve the real data type and its adapter using <code>Gson.getDelegateAdapter</code>.</li>\n<li>Reverse case (the worst case): read the <code>data</code> property into a tree view (therefore buffering it into memory) as a <code>JsonElement</code> instance (you have to get the <code>TypeAdapter&lt;JsonElement&gt;</code> from the <code>Gson</code> instance in the <code>create</code> method first), and then, according to the next <code>type</code> property value, read it as a value from the tree using <code>TypeAdapter.fromJsonTree</code>.</li>\n</ul>\n\n<p>And yes, don't forget to check the parsing state here (handle missing <code>type</code> and <code>data</code> for both cases somehow). As you can see, this introduces variable complexity and performance/memory cost, but it can give you the best performance. You decide.</p>\n"},{"tags":[],"owner":{"account_id":7288829,"reputation":85,"user_id":5556026,"display_name":"Shane Gillis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671044727,"creation_date":1671044727,"answer_id":74803130,"question_id":44400163,"body_markdown":"I am late to the game, but there is another option.\r\n\r\nYes, using the (De)Serializers is expensive, since creating large JsonTrees all at once is expensive, but... \r\n\r\nI&#39;m currently using GSON 2.9.1, and one thing of note is that the JsonParser has some useful static methods, like...\r\n\r\n    JsonReader je = new JsonReader(...);\r\n    JsonObject jo = JsonParser.parseReader(jr).getAsJsonObject();\r\n\r\nNow, of course, if you use JsonParser to consume the whole JsonReader, you get that big, fat, expensive tree.  However, JsonParser is kinda smart. So if we do something like this:\r\n\r\n    JsonReader jr = new JsonReader(...);\r\n    jr.beginObject();\r\n    jr.nextName();\r\n    JsonObject jo = JsonParser.parseReader(jr).getAsJsonObject();\r\n\r\nYou&#39;ll find that the JsonObject jo is the sub-tree of whatever the JsonReader had queued up in the stream.  Play with it a bit more and you notice that this:\r\n\r\n    JsonReader jr = new JsonReader(...);\r\n    jr.beginObject();\r\n    jr.nextName();\r\n    JsonObject jo = JsonParser.parseReader(jr).getAsJsonObject();\r\n    methodCallToProcessJsonObject(jo);\r\n    jr.nextName();\r\n    jo = JsonParser.parseReader(jr).getAsJsonObject();\r\n    methodCallToProcessJsonObject(jo);\r\n\r\nSet up some logic and you can use the Stream for running through the Big Chunk &#39;o JSON, but switch to processing smaller JsonElements when it is more convenient.\r\n\r\nI imagine you can do something very similar with JsonStreamParser.\r\n\r\nOn the writer end, a JsonWriter has a `jsonValue(String)` method that you can use with a JsonObject or JsonArray and their respective `toString()` methods.\r\n\r\nSo you can mix and match.\r\n\r\n","title":"Deserializing a JSON Object with Gson TypeAdapter in an ordering-insensitive manner","body":"<p>I am late to the game, but there is another option.</p>\n<p>Yes, using the (De)Serializers is expensive, since creating large JsonTrees all at once is expensive, but...</p>\n<p>I'm currently using GSON 2.9.1, and one thing of note is that the JsonParser has some useful static methods, like...</p>\n<pre><code>JsonReader je = new JsonReader(...);\nJsonObject jo = JsonParser.parseReader(jr).getAsJsonObject();\n</code></pre>\n<p>Now, of course, if you use JsonParser to consume the whole JsonReader, you get that big, fat, expensive tree.  However, JsonParser is kinda smart. So if we do something like this:</p>\n<pre><code>JsonReader jr = new JsonReader(...);\njr.beginObject();\njr.nextName();\nJsonObject jo = JsonParser.parseReader(jr).getAsJsonObject();\n</code></pre>\n<p>You'll find that the JsonObject jo is the sub-tree of whatever the JsonReader had queued up in the stream.  Play with it a bit more and you notice that this:</p>\n<pre><code>JsonReader jr = new JsonReader(...);\njr.beginObject();\njr.nextName();\nJsonObject jo = JsonParser.parseReader(jr).getAsJsonObject();\nmethodCallToProcessJsonObject(jo);\njr.nextName();\njo = JsonParser.parseReader(jr).getAsJsonObject();\nmethodCallToProcessJsonObject(jo);\n</code></pre>\n<p>Set up some logic and you can use the Stream for running through the Big Chunk 'o JSON, but switch to processing smaller JsonElements when it is more convenient.</p>\n<p>I imagine you can do something very similar with JsonStreamParser.</p>\n<p>On the writer end, a JsonWriter has a <code>jsonValue(String)</code> method that you can use with a JsonObject or JsonArray and their respective <code>toString()</code> methods.</p>\n<p>So you can mix and match.</p>\n"}],"owner":{"account_id":2162613,"reputation":9277,"user_id":1916449,"accept_rate":100,"display_name":"arekolek"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9624,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44401396,"answer_count":2,"score":1,"last_activity_date":1671044727,"creation_date":1496784730,"question_id":44400163,"body_markdown":"Is it possible to achieve both of the following goals?\r\n\r\n - Be able to delegate to default Gson deserializer that invoked our custom implementation.\r\n - Be unaffected by different order of the keys in the JSON object\r\n\r\nBelow I describe two possible approaches that only achieve one of them.\r\n\r\n----------\r\n\r\nThe API I&#39;m working with returns either a successful like:\r\n\r\n    {\r\n      &quot;type&quot;: &quot;success&quot;,\r\n      &quot;data&quot;: {\r\n        &quot;display_name&quot;: &quot;Invisible Pink Unicorn&quot;,\r\n        &quot;user_email&quot;: &quot;user@example.com&quot;,\r\n        &quot;user_id&quot;: 1234\r\n      }\r\n    }\r\n\r\nOr an error, like:\r\n\r\n    {\r\n        &quot;type&quot;: &quot;error&quot;,\r\n        &quot;data&quot;: {\r\n            &quot;error_name&quot;: &quot;incorrect_password&quot;,\r\n            &quot;error_message&quot;: &quot;The username or password you entered is incorrect.&quot;\r\n        }\r\n    }\r\n\r\nThe way it&#39;s handled at the moment is by registering a TypeAdapter that throws an exception with the given `&quot;error_message&quot;` if the type is `&quot;error&quot;`:\r\n\r\n    new GsonBuilder()\r\n        .registerTypeAdapter(User.class, new ContentDeserializer&lt;User&gt;())\r\n        .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)\r\n        .create()\r\n\r\n    public class ContentDeserializer&lt;T&gt; implements JsonDeserializer&lt;T&gt; {\r\n        @Override\r\n        public T deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n            final JsonObject object = json.getAsJsonObject();\r\n            final String type = object.get(&quot;type&quot;).getAsString();\r\n            final JsonElement data = object.get(&quot;data&quot;);\r\n            final Gson gson = new Gson();\r\n            if (&quot;error&quot;.equals(type)) {\r\n                throw gson.fromJson(data, ApiError.class);\r\n            } else {\r\n                return gson.fromJson(data, typeOfT);\r\n            }\r\n        }\r\n    }\r\n\r\nWhich is neat, because it&#39;s pretty succinct and uses a default deserializer to do all the hard work.\r\n\r\n**But actually it&#39;s wrong, because it doesn&#39;t use the same Gson to delegate that work to, so it will use a different field naming policy, for example.**\r\n\r\nTo fix that, I wrote a TypeAdapterFactory:\r\n\r\n    public class UserAdapterFactory implements TypeAdapterFactory {\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        @Override\r\n        public &lt;T&gt; TypeAdapter&lt;T&gt; create(Gson gson, TypeToken&lt;T&gt; type) {\r\n            if (!User.class.isAssignableFrom(type.getRawType())) return null;\r\n            final TypeAdapter&lt;User&gt; userAdapter = (TypeAdapter&lt;User&gt;) gson.getDelegateAdapter(this, type);\r\n            final TypeAdapter&lt;ApiError&gt; apiErrorAdapter = gson.getAdapter(ApiError.class);\r\n            return (TypeAdapter&lt;T&gt;) new Adapter(userAdapter, apiErrorAdapter);\r\n        }\r\n    \r\n        private static class Adapter extends TypeAdapter&lt;User&gt; {\r\n            private final TypeAdapter&lt;User&gt; userAdapter;\r\n            private final TypeAdapter&lt;ApiError&gt; apiErrorAdapter;\r\n    \r\n            Adapter(TypeAdapter&lt;User&gt; userAdapter, TypeAdapter&lt;ApiError&gt; apiErrorAdapter) {\r\n                this.userAdapter = userAdapter;\r\n                this.apiErrorAdapter = apiErrorAdapter;\r\n            }\r\n    \r\n            @Override\r\n            public void write(JsonWriter out, User value) throws IOException {\r\n            }\r\n    \r\n            @Override\r\n            public User read(JsonReader in) throws IOException {\r\n                User user = null;\r\n                String type = null;\r\n                in.beginObject();\r\n                while (in.hasNext()) {\r\n                    switch (in.nextName()) {\r\n                        case &quot;type&quot;:\r\n                            type = in.nextString();\r\n                            break;\r\n                        case &quot;data&quot;:\r\n                            if (&quot;error&quot;.equals(type)) {\r\n                                throw apiErrorAdapter.read(in);\r\n                            } else if (&quot;success&quot;.equals(type)) {\r\n                                user = userAdapter.read(in);\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n                in.endObject();\r\n                return user;\r\n            }\r\n        }\r\n    }\r\n\r\nWhich was a lot more work, but at least lets me delegate to the same Gson configuration.\r\n\r\n**The problem with this approach is that it breaks when the JSON Object will have a different order:**\r\n\r\n    {\r\n      &quot;data&quot;: {\r\n        &quot;display_name&quot;: &quot;Invisible Pink Unicorn&quot;,\r\n        &quot;user_email&quot;: &quot;user@example.com&quot;,\r\n        &quot;user_id&quot;: 1234\r\n      },\r\n      &quot;type&quot;: &quot;success&quot;\r\n    }\r\n\r\nAnd I don&#39;t see any way around this, because I don&#39;t think `JsonReader` has an option to read the input twice, there&#39;s also no way to cache the &quot;data&quot; value in an abstract type like `JsonElement` to parse after &quot;type&quot; has been encountered.","title":"Deserializing a JSON Object with Gson TypeAdapter in an ordering-insensitive manner","body":"<p>Is it possible to achieve both of the following goals?</p>\n\n<ul>\n<li>Be able to delegate to default Gson deserializer that invoked our custom implementation.</li>\n<li>Be unaffected by different order of the keys in the JSON object</li>\n</ul>\n\n<p>Below I describe two possible approaches that only achieve one of them.</p>\n\n<hr>\n\n<p>The API I'm working with returns either a successful like:</p>\n\n<pre><code>{\n  \"type\": \"success\",\n  \"data\": {\n    \"display_name\": \"Invisible Pink Unicorn\",\n    \"user_email\": \"user@example.com\",\n    \"user_id\": 1234\n  }\n}\n</code></pre>\n\n<p>Or an error, like:</p>\n\n<pre><code>{\n    \"type\": \"error\",\n    \"data\": {\n        \"error_name\": \"incorrect_password\",\n        \"error_message\": \"The username or password you entered is incorrect.\"\n    }\n}\n</code></pre>\n\n<p>The way it's handled at the moment is by registering a TypeAdapter that throws an exception with the given <code>\"error_message\"</code> if the type is <code>\"error\"</code>:</p>\n\n<pre><code>new GsonBuilder()\n    .registerTypeAdapter(User.class, new ContentDeserializer&lt;User&gt;())\n    .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)\n    .create()\n\npublic class ContentDeserializer&lt;T&gt; implements JsonDeserializer&lt;T&gt; {\n    @Override\n    public T deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n        final JsonObject object = json.getAsJsonObject();\n        final String type = object.get(\"type\").getAsString();\n        final JsonElement data = object.get(\"data\");\n        final Gson gson = new Gson();\n        if (\"error\".equals(type)) {\n            throw gson.fromJson(data, ApiError.class);\n        } else {\n            return gson.fromJson(data, typeOfT);\n        }\n    }\n}\n</code></pre>\n\n<p>Which is neat, because it's pretty succinct and uses a default deserializer to do all the hard work.</p>\n\n<p><strong>But actually it's wrong, because it doesn't use the same Gson to delegate that work to, so it will use a different field naming policy, for example.</strong></p>\n\n<p>To fix that, I wrote a TypeAdapterFactory:</p>\n\n<pre><code>public class UserAdapterFactory implements TypeAdapterFactory {\n\n    @SuppressWarnings(\"unchecked\")\n    @Override\n    public &lt;T&gt; TypeAdapter&lt;T&gt; create(Gson gson, TypeToken&lt;T&gt; type) {\n        if (!User.class.isAssignableFrom(type.getRawType())) return null;\n        final TypeAdapter&lt;User&gt; userAdapter = (TypeAdapter&lt;User&gt;) gson.getDelegateAdapter(this, type);\n        final TypeAdapter&lt;ApiError&gt; apiErrorAdapter = gson.getAdapter(ApiError.class);\n        return (TypeAdapter&lt;T&gt;) new Adapter(userAdapter, apiErrorAdapter);\n    }\n\n    private static class Adapter extends TypeAdapter&lt;User&gt; {\n        private final TypeAdapter&lt;User&gt; userAdapter;\n        private final TypeAdapter&lt;ApiError&gt; apiErrorAdapter;\n\n        Adapter(TypeAdapter&lt;User&gt; userAdapter, TypeAdapter&lt;ApiError&gt; apiErrorAdapter) {\n            this.userAdapter = userAdapter;\n            this.apiErrorAdapter = apiErrorAdapter;\n        }\n\n        @Override\n        public void write(JsonWriter out, User value) throws IOException {\n        }\n\n        @Override\n        public User read(JsonReader in) throws IOException {\n            User user = null;\n            String type = null;\n            in.beginObject();\n            while (in.hasNext()) {\n                switch (in.nextName()) {\n                    case \"type\":\n                        type = in.nextString();\n                        break;\n                    case \"data\":\n                        if (\"error\".equals(type)) {\n                            throw apiErrorAdapter.read(in);\n                        } else if (\"success\".equals(type)) {\n                            user = userAdapter.read(in);\n                        }\n                        break;\n                }\n            }\n            in.endObject();\n            return user;\n        }\n    }\n}\n</code></pre>\n\n<p>Which was a lot more work, but at least lets me delegate to the same Gson configuration.</p>\n\n<p><strong>The problem with this approach is that it breaks when the JSON Object will have a different order:</strong></p>\n\n<pre><code>{\n  \"data\": {\n    \"display_name\": \"Invisible Pink Unicorn\",\n    \"user_email\": \"user@example.com\",\n    \"user_id\": 1234\n  },\n  \"type\": \"success\"\n}\n</code></pre>\n\n<p>And I don't see any way around this, because I don't think <code>JsonReader</code> has an option to read the input twice, there's also no way to cache the \"data\" value in an abstract type like <code>JsonElement</code> to parse after \"type\" has been encountered.</p>\n"},{"tags":["java","mockito","junit4"],"comments":[{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":1,"creation_date":1671018230,"post_id":74797650,"comment_id":132005209,"body_markdown":"Please clean up this question and clarify. It&#39;s not really clear what you are doing, and what the error is.","body":"Please clean up this question and clarify. It&#39;s not really clear what you are doing, and what the error is."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671026526,"post_id":74797650,"comment_id":132008253,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27249421,"reputation":1,"user_id":20774144,"display_name":"Coder999"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671044578,"creation_date":1671017625,"question_id":74797650,"body_markdown":"I am getting java.lang.ExceptionInInitializerError while using Mockito for writing Junit test case, could someonie tell me how to mock  below code snippet:\r\n\r\n\r\n```\r\n clazz SomeCntroller {\r\n\t\r\n\r\n\t/** The Constant DATE_TIME_FORMATTER. */\r\n\tprivate static final DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n*# \t\r\n line 4 # \t**private static final  FTPConfigPropery sampleProperty= SampleService.getInstance().getFTPConfigPropery(true);***\r\n\r\n\r\n\r\npublic void someMethod(){\r\n\r\n-------------------------------\r\n\r\n\r\n}\r\n}\r\n```\r\n\r\ngetting error at line 4, surprisingly date variable is also final and static but i am not getting any error there.\r\n\r\n\r\n- Using @Mock/@InjectMocks for both FTPConfigProperty and SampleService class;\r\n- Making this class variable a local variable (this works but unfortunately i cant d that because it someone else&#39;s code) ","title":"Mock private static final variable","body":"<p>I am getting java.lang.ExceptionInInitializerError while using Mockito for writing Junit test case, could someonie tell me how to mock  below code snippet:</p>\n<pre><code> clazz SomeCntroller {\n    \n\n    /** The Constant DATE_TIME_FORMATTER. */\n    private static final DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n*#  \n line 4 #   **private static final  FTPConfigPropery sampleProperty= SampleService.getInstance().getFTPConfigPropery(true);***\n\n\n\npublic void someMethod(){\n\n-------------------------------\n\n\n}\n}\n</code></pre>\n<p>getting error at line 4, surprisingly date variable is also final and static but i am not getting any error there.</p>\n<ul>\n<li>Using @Mock/@InjectMocks for both FTPConfigProperty and SampleService class;</li>\n<li>Making this class variable a local variable (this works but unfortunately i cant d that because it someone else's code)</li>\n</ul>\n"},{"tags":["java","encoding","utf-8","character-encoding"],"comments":[{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":1,"creation_date":1565946065,"post_id":57521664,"comment_id":101510197,"body_markdown":"The problem starts with the `encode` method having a `String` as input and result. Strings in Java are a sequence of characters, independent of encoding. Instead, use byte arrays to represent encoded strings. Then decode the UTF-8 to a string and encode that string in TIS620.","body":"The problem starts with the <code>encode</code> method having a <code>String</code> as input and result. Strings in Java are a sequence of characters, independent of encoding. Instead, use byte arrays to represent encoded strings. Then decode the UTF-8 to a string and encode that string in TIS620."},{"owner":{"account_id":16518310,"reputation":31,"user_id":11935139,"display_name":"apj"},"score":0,"creation_date":1565946378,"post_id":57521664,"comment_id":101510338,"body_markdown":"Thanks @henry , so public static String encode(byte[] input, String encoding) will be sufficient right?","body":"Thanks @henry , so public static String encode(byte[] input, String encoding) will be sufficient right?"},{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1565947603,"post_id":57521664,"comment_id":101510900,"body_markdown":"No, `public static byte[] encode(byte[] input, String encoding)`","body":"No, <code>public static byte[] encode(byte[] input, String encoding)</code>"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1565950325,"post_id":57521664,"comment_id":101512089,"body_markdown":"No, actually it should be `public static byte[] encode(String input, Charset encoding)`: you want to encode a String into a byte array using a given Charset. If you take a byte[] as argument, you&#39;ll first have to decode it to a String (using which charset?), and then re-encode it.","body":"No, actually it should be <code>public static byte[] encode(String input, Charset encoding)</code>: you want to encode a String into a byte array using a given Charset. If you take a byte[] as argument, you&#39;ll first have to decode it to a String (using which charset?), and then re-encode it."},{"owner":{"account_id":16518310,"reputation":31,"user_id":11935139,"display_name":"apj"},"score":0,"creation_date":1565959940,"post_id":57521664,"comment_id":101516387,"body_markdown":"I&#39;ve use case where I get multiple String values from JSON file and I need to convert  encoding of few of those strings to TIS620 but  even the converted strings will be added to String buffer,  for example, I get Str1,str2,str3 from json file.I read all values then only str2 encoding if I change to TIS620 but at the end I add all to StringBuilder which ultimately uses toString() and this is UTF-16. Will my encoding for converted string will again gets converted to UTF16?","body":"I&#39;ve use case where I get multiple String values from JSON file and I need to convert  encoding of few of those strings to TIS620 but  even the converted strings will be added to String buffer,  for example, I get Str1,str2,str3 from json file.I read all values then only str2 encoding if I change to TIS620 but at the end I add all to StringBuilder which ultimately uses toString() and this is UTF-16. Will my encoding for converted string will again gets converted to UTF16?"},{"owner":{"account_id":2567288,"reputation":20405,"user_id":2226988,"display_name":"Tom Blodget"},"score":0,"creation_date":1565968230,"post_id":57521664,"comment_id":101520400,"body_markdown":"@Henry No, at the API level, a `String` is a counted sequence of UTF-16 code units. While you could consider `String` to &quot;not have an encoding&quot; for most text processing, any use of length, offset, or decomposition into `char` or `Character` has to take UTF-16 into account. (As well use of \\uHHHH notation inside character or string literals.)","body":"@Henry No, at the API level, a <code>String</code> is a counted sequence of UTF-16 code units. While you could consider <code>String</code> to &quot;not have an encoding&quot; for most text processing, any use of length, offset, or decomposition into <code>char</code> or <code>Character</code> has to take UTF-16 into account. (As well use of \\uHHHH notation inside character or string literals.)"},{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1565968872,"post_id":57521664,"comment_id":101520691,"body_markdown":"@TomBlodget I know, of course there is an internal representation. But for the most part one can ignore that. It becomes only visible if you handle characters outside of the BMP.","body":"@TomBlodget I know, of course there is an internal representation. But for the most part one can ignore that. It becomes only visible if you handle characters outside of the BMP."}],"answers":[{"tags":[],"owner":{"account_id":2567288,"reputation":20405,"user_id":2226988,"display_name":"Tom Blodget"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566009268,"creation_date":1566009268,"answer_id":57532871,"question_id":57521664,"body_markdown":"It turns out there is nothing special about TIS-620. Although not every Java implementation is required to support it, main full-sized implementations do. \r\n\r\nYes, there can be data loss: Unicode is much bigger than TIS-620. In particular, two characters in your string are not supported: ⏎ ⇥\r\nTypically, unsupported characters are replaced by ? but other behaviors such as an exception are possible.\r\n\r\n    Charset.forName(&quot;TIS620&quot;)\r\n        .encode(&quot;๕ค 9 ๖ต 0 ๗จ - ๘ข = ๙ช q ๐ๆ w \\&quot;ไ e ฎำ r ฑพ t ธะ y ํั u ๊ี i ณร o ฯน p ญย [ ฐบ ] ,ล ⏎ ⇥ a ฤฟ s ฆห d ฏก f โด g ฌเ h ็้ j ๋่ k ษา l ศส ; ซ&quot;)\r\n        .array()\r\n\r\n","title":"Convert String with encoding UTF-8 to TIS620 (Thai encoding) in Java.What are the ways to do it and it there any data loss?","body":"<p>It turns out there is nothing special about TIS-620. Although not every Java implementation is required to support it, main full-sized implementations do. </p>\n\n<p>Yes, there can be data loss: Unicode is much bigger than TIS-620. In particular, two characters in your string are not supported: ⏎ ⇥\nTypically, unsupported characters are replaced by ? but other behaviors such as an exception are possible.</p>\n\n<pre><code>Charset.forName(\"TIS620\")\n    .encode(\"๕ค 9 ๖ต 0 ๗จ - ๘ข = ๙ช q ๐ๆ w \\\"ไ e ฎำ r ฑพ t ธะ y ํั u ๊ี i ณร o ฯน p ญย [ ฐบ ] ,ล ⏎ ⇥ a ฤฟ s ฆห d ฏก f โด g ฌเ h ็้ j ๋่ k ษา l ศส ; ซ\")\n    .array()\n</code></pre>\n"}],"owner":{"account_id":16518310,"reputation":31,"user_id":11935139,"display_name":"apj"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9539,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1671044550,"creation_date":1565945739,"question_id":57521664,"body_markdown":"As an input the string will be any Thai char string with UTF-8 encoding,\r\nCovert this string format from **UTF-8** to **TIS620** in Java.\r\n\r\n 1. Can that be achieved by java.io.Charset?\r\n 2. Is there any data loss or increase in char size post encoding?\r\n 3. Any java utility/open source available for any encoding conversion?\r\n\r\n\r\nI&#39;m new to character encoding and checked few online help links but could not find any with reference to TIS620\r\n\r\nInput is input string to be converted e.g. \r\n&gt;๕ค 9 ๖ต 0 ๗จ - ๘ข = ๙ช q ๐ๆ w \\&quot;ไ e ฎำ r ฑพ t ธะ y ํั u ๊ี i ณร o ฯน p ญย [ ฐบ ] ,ล ⏎ ⇥ a ฤฟ s ฆห d ฏก f โด g ฌเ h ็้ j ๋่ k ษา l ศส ; ซ\r\n\r\nencoding - tis 620\r\n```\r\npublic static String encode(String input, String encoding) {\r\n    //   byte[] bytes = input.getBytes();\r\n    return new String(input.getBytes(), Charset.forName(encoding));\r\n}\r\n```\r\n\r\nExpected output is the given UTF-8 string will be converted to TIS 620 encoding","title":"Convert String with encoding UTF-8 to TIS620 (Thai encoding) in Java.What are the ways to do it and it there any data loss?","body":"<p>As an input the string will be any Thai char string with UTF-8 encoding,\nCovert this string format from <strong>UTF-8</strong> to <strong>TIS620</strong> in Java.</p>\n\n<ol>\n<li>Can that be achieved by java.io.Charset?</li>\n<li>Is there any data loss or increase in char size post encoding?</li>\n<li>Any java utility/open source available for any encoding conversion?</li>\n</ol>\n\n<p>I'm new to character encoding and checked few online help links but could not find any with reference to TIS620</p>\n\n<p>Input is input string to be converted e.g. </p>\n\n<blockquote>\n  <p>๕ค 9 ๖ต 0 ๗จ - ๘ข = ๙ช q ๐ๆ w \\\"ไ e ฎำ r ฑพ t ธะ y ํั u ๊ี i ณร o ฯน p ญย [ ฐบ ] ,ล ⏎ ⇥ a ฤฟ s ฆห d ฏก f โด g ฌเ h ็้ j ๋่ k ษา l ศส ; ซ</p>\n</blockquote>\n\n<p>encoding - tis 620</p>\n\n<pre><code>public static String encode(String input, String encoding) {\n    //   byte[] bytes = input.getBytes();\n    return new String(input.getBytes(), Charset.forName(encoding));\n}\n</code></pre>\n\n<p>Expected output is the given UTF-8 string will be converted to TIS 620 encoding</p>\n"},{"tags":["java","concurrentmodification"],"answers":[{"tags":[],"owner":{"account_id":2590393,"reputation":1553,"user_id":2245234,"accept_rate":51,"display_name":"Jeeppp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671044398,"creation_date":1671044398,"answer_id":74803077,"question_id":74803013,"body_markdown":"When implementing a custom iterator for a Linked List in Java, you can check for concurrent modification errors by using the `modCount` field of the `AbstractList` class, which is the parent class of the `LinkedList` class. This field tracks the number of structural modifications (additions, deletions, etc.) that have been made to the list. You can compare the value of `modCount` before and after iterating through the list to determine if any modifications have been made, and throw a `ConcurrentModificationException` if the values are different. Here is an example:\r\n\r\n```// custom iterator for a Linked List\r\npublic class MyLinkedListIterator&lt;E&gt; implements Iterator&lt;E&gt; {\r\n  private final MyLinkedList&lt;E&gt; list;\r\n  private int expectedModCount;\r\n  private Node&lt;E&gt; current;\r\n\r\n  public MyLinkedListIterator(MyLinkedList&lt;E&gt; list) {\r\n    this.list = list;\r\n    this.expectedModCount = list.modCount;\r\n    this.current = list.first;\r\n  }\r\n\r\n  @Override\r\n  public boolean hasNext() {\r\n    return current != null;\r\n  }\r\n\r\n  @Override\r\n  public E next() {\r\n    checkForConcurrentModification();\r\n    E element = current.element;\r\n    current = current.next;\r\n    return element;\r\n  }\r\n\r\n  @Override\r\n  public void remove() {\r\n    checkForConcurrentModification();\r\n    // implementation of remove() method goes here\r\n  }\r\n\r\n  private void checkForConcurrentModification() {\r\n    if (list.modCount != expectedModCount) {\r\n      throw new ConcurrentModificationException();\r\n    }\r\n  }\r\n}\r\n```","title":"How to check for concurrent modification error while overriding Iterator for Linked List in Java?","body":"<p>When implementing a custom iterator for a Linked List in Java, you can check for concurrent modification errors by using the <code>modCount</code> field of the <code>AbstractList</code> class, which is the parent class of the <code>LinkedList</code> class. This field tracks the number of structural modifications (additions, deletions, etc.) that have been made to the list. You can compare the value of <code>modCount</code> before and after iterating through the list to determine if any modifications have been made, and throw a <code>ConcurrentModificationException</code> if the values are different. Here is an example:</p>\n<pre><code>public class MyLinkedListIterator&lt;E&gt; implements Iterator&lt;E&gt; {\n  private final MyLinkedList&lt;E&gt; list;\n  private int expectedModCount;\n  private Node&lt;E&gt; current;\n\n  public MyLinkedListIterator(MyLinkedList&lt;E&gt; list) {\n    this.list = list;\n    this.expectedModCount = list.modCount;\n    this.current = list.first;\n  }\n\n  @Override\n  public boolean hasNext() {\n    return current != null;\n  }\n\n  @Override\n  public E next() {\n    checkForConcurrentModification();\n    E element = current.element;\n    current = current.next;\n    return element;\n  }\n\n  @Override\n  public void remove() {\n    checkForConcurrentModification();\n    // implementation of remove() method goes here\n  }\n\n  private void checkForConcurrentModification() {\n    if (list.modCount != expectedModCount) {\n      throw new ConcurrentModificationException();\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":20155363,"reputation":99,"user_id":14781713,"display_name":"Anish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1671044398,"creation_date":1671044070,"question_id":74803013,"body_markdown":"I was trying to implement a doubly linked list in java and I am overriding the default Iterator interface , But how can I check for concurrent modification error inside my overridden Iterator?\r\n\r\n    @Override\r\n    public Iterator&lt;T&gt; iterator(){\r\n            return new Iterator&lt;T&gt;() {\r\n                private Node&lt;T&gt; trav = head;\r\n                @Override\r\n                public boolean hasNext() {\r\n                    return trav!=null;\r\n                }\r\n    \r\n                @Override\r\n                public T next() {\r\n                    T data = trav.data;\r\n                    trav = trav.next;\r\n                    return data;\r\n                }\r\n            };\r\n        }  \r\n\r\nThis is my overridden Iterator interface.","title":"How to check for concurrent modification error while overriding Iterator for Linked List in Java?","body":"<p>I was trying to implement a doubly linked list in java and I am overriding the default Iterator interface , But how can I check for concurrent modification error inside my overridden Iterator?</p>\n<pre><code>@Override\npublic Iterator&lt;T&gt; iterator(){\n        return new Iterator&lt;T&gt;() {\n            private Node&lt;T&gt; trav = head;\n            @Override\n            public boolean hasNext() {\n                return trav!=null;\n            }\n\n            @Override\n            public T next() {\n                T data = trav.data;\n                trav = trav.next;\n                return data;\n            }\n        };\n    }  \n</code></pre>\n<p>This is my overridden Iterator interface.</p>\n"},{"tags":["java","xalan"],"answers":[{"tags":[],"owner":{"account_id":28100,"reputation":8984,"user_id":74694,"accept_rate":86,"display_name":"Neeme Praks"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285349554,"creation_date":1285349554,"answer_id":3789551,"question_id":3789044,"body_markdown":"If you look at the [Document JavaDoc][1], you can see that it extends [Node][2] interface, but not [NodeList][3]. Not sure if it will work, but you could try to pass in *params.getChildNodes()* instead of *params*.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Document.html\r\n  [2]: http://download.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html\r\n  [3]: http://download.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/NodeList.html","title":"passing xml nodes/documents/fragments as parameters to xslt","body":"<p>If you look at the <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Document.html\" rel=\"nofollow\">Document JavaDoc</a>, you can see that it extends <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html\" rel=\"nofollow\">Node</a> interface, but not <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/NodeList.html\" rel=\"nofollow\">NodeList</a>. Not sure if it will work, but you could try to pass in <em>params.getChildNodes()</em> instead of <em>params</em>.</p>\n"},{"tags":[],"owner":{"account_id":28100,"reputation":8984,"user_id":74694,"accept_rate":86,"display_name":"Neeme Praks"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671043816,"creation_date":1285411707,"answer_id":3793476,"question_id":3789044,"body_markdown":"*(Posting a new answer, as the previous one did not solve the issue and this new one is radically different from the previous)*\r\n\r\nSeems to be a known issue with XALAN compiling processor ( [XALANJ-2057][1],\r\n[How can I pass a node as parameter to translets for XSLTC Processor][2]).\r\n\r\nSo, what are the alternatives?\r\n\r\n 1. **mess around with URIs** as outlined in\r\n    a response to [How can I pass a node\r\n    as parameter to translets for XSLTC\r\n    Processor][2] post\r\n 2. Instead of\r\n    XALAN compiling processor (XSLTC),\r\n    **use XALAN interpretive processor**. Or any other XSLT processor that supports such behavior.\r\n 3. **Use DTMAxisIterator**\r\n    instead, also outlined in a response to [How can I pass a node\r\n    as parameter to translets for XSLTC\r\n    Processor][3] post - not sure if it will work, though.\r\n 4. **Create a new DOM tree**, combining your &quot;parameter&quot; DOM and the original XSLT input document\r\n\r\n  [1]: https://issues.apache.org/jira/browse/XALANJ-2057\r\n  [2]: https://marc.info/?l=xalan-j-users&amp;m=116982111306829&amp;w=2\r\n  [3]: https://marc.info/?l=xalan-j-users&amp;m=117007764209577&amp;w=2","title":"passing xml nodes/documents/fragments as parameters to xslt","body":"<p><em>(Posting a new answer, as the previous one did not solve the issue and this new one is radically different from the previous)</em></p>\n<p>Seems to be a known issue with XALAN compiling processor ( <a href=\"https://issues.apache.org/jira/browse/XALANJ-2057\" rel=\"nofollow noreferrer\">XALANJ-2057</a>,\n<a href=\"https://marc.info/?l=xalan-j-users&amp;m=116982111306829&amp;w=2\" rel=\"nofollow noreferrer\">How can I pass a node as parameter to translets for XSLTC Processor</a>).</p>\n<p>So, what are the alternatives?</p>\n<ol>\n<li><strong>mess around with URIs</strong> as outlined in\na response to <a href=\"https://marc.info/?l=xalan-j-users&amp;m=116982111306829&amp;w=2\" rel=\"nofollow noreferrer\">How can I pass a node\nas parameter to translets for XSLTC\nProcessor</a> post</li>\n<li>Instead of\nXALAN compiling processor (XSLTC),\n<strong>use XALAN interpretive processor</strong>. Or any other XSLT processor that supports such behavior.</li>\n<li><strong>Use DTMAxisIterator</strong>\ninstead, also outlined in a response to <a href=\"https://marc.info/?l=xalan-j-users&amp;m=117007764209577&amp;w=2\" rel=\"nofollow noreferrer\">How can I pass a node\nas parameter to translets for XSLTC\nProcessor</a> post - not sure if it will work, though.</li>\n<li><strong>Create a new DOM tree</strong>, combining your &quot;parameter&quot; DOM and the original XSLT input document</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":154660,"reputation":2439,"user_id":370746,"accept_rate":88,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1352339742,"creation_date":1352339742,"answer_id":13281355,"question_id":3789044,"body_markdown":"Here&#39;s a working example with the URIResolver Gambit, #1 in the list of solutions:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import javax.xml.transform.Source;\r\n    import javax.xml.transform.Transformer;\r\n    import javax.xml.transform.TransformerException;\r\n    import javax.xml.transform.TransformerFactory;\r\n    import javax.xml.transform.URIResolver;\r\n    import javax.xml.transform.stream.StreamResult;\r\n    import javax.xml.transform.stream.StreamSource;\r\n    import java.io.StringReader;\r\n    import java.io.StringWriter;\r\n    \r\n    public class XSLTest {\r\n        public static void main(String[] args) {\r\n    \r\n            class MyResolver implements URIResolver {\r\n                String _xml;\r\n                MyResolver(String xml) { _xml = xml; }\r\n                @Override\r\n                public Source resolve(String href, String base) throws TransformerException {\r\n                    return new StreamSource(new StringReader(_xml));\r\n                }\r\n            }\r\n    \r\n            String lookup =\r\n                &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\\n&quot; +\r\n                &quot;&lt;urls&gt;\\n&quot; +\r\n                &quot;    &lt;url id=&#39;google&#39;&gt;https://www.google.com&lt;/url&gt;\\n&quot; +\r\n                &quot;    &lt;url id=&#39;yahoo&#39;&gt;https://www.yahoo.com&lt;/url&gt;\\n&quot; +\r\n                &quot;    &lt;url id=&#39;apple&#39;&gt;https://www.apple.com&lt;/url&gt;\\n&quot; +\r\n                &quot;&lt;/urls&gt;&quot;;\r\n    \r\n            String main =\r\n                &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;&quot; +\r\n                &quot;&lt;list&gt;&quot;+\r\n                &quot;   &lt;link ref=&#39;yahoo&#39;&gt;Yahoo&lt;/link&gt;&quot;+\r\n                &quot;   &lt;link ref=&#39;google&#39;&gt;Google&lt;/link&gt;&quot;+\r\n                &quot;&lt;/list&gt;&quot;;\r\n    \r\n            String xsl =\r\n                &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\\n&quot; +\r\n                &quot;&lt;xsl:stylesheet version=&#39;1.0&#39; xmlns:xsl=&#39;http://www.w3.org/1999/XSL/Transform&#39;&gt;\\n&quot; +\r\n                &quot;    &lt;xsl:param name=&#39;lookup-doc&#39; /&gt;\\n&quot; +\r\n                &quot;    &lt;xsl:variable name=&#39;lookup&#39; select=&#39;document($lookup-doc)&#39;/&gt;\\n&quot; +\r\n                &quot;    &lt;xsl:template match=&#39;/&#39;&gt;\\n&quot; +\r\n                &quot;        &lt;xsl:for-each select=&#39;//link&#39;&gt;\\n&quot; +\r\n                &quot;            &lt;xsl:variable name=&#39;ref&#39; select=&#39;@ref&#39;/&gt;\\n&quot; +\r\n                &quot;            &lt;xsl:element name=&#39;a&#39;&gt;\\n&quot; +\r\n                &quot;                &lt;xsl:attribute name=&#39;href&#39;&gt;\\n&quot; +\r\n                &quot;                    &lt;xsl:value-of select=&#39;$lookup//url[@id=$ref]&#39;/&gt;\\n&quot; +\r\n                &quot;                &lt;/xsl:attribute&gt;\\n&quot; +\r\n                &quot;                &lt;xsl:value-of select=&#39;text()&#39;/&gt;\\n&quot; +\r\n                &quot;            &lt;/xsl:element&gt;\\n&quot; +\r\n                &quot;        &lt;/xsl:for-each&gt;\\n&quot; +\r\n                &quot;    &lt;/xsl:template&gt;\\n&quot; +\r\n                &quot;&lt;/xsl:stylesheet&gt;&quot;;\r\n    \r\n            try {\r\n    \r\n                // xsl doc\r\n                Source xsltSource = new StreamSource(new StringReader(xsl));\r\n    \r\n                TransformerFactory transFact = TransformerFactory.newInstance();\r\n                Transformer trans = transFact.newTransformer(xsltSource);\r\n    \r\n                // main doc\r\n                Source mainSource = new StreamSource(new StringReader(main));\r\n    \r\n                // lookup doc - stage it in the URI resolver\r\n                trans.setURIResolver(new MyResolver(lookup));\r\n                // dummy URL, you could use different values here to \r\n                // support multiple document parameters\r\n                trans.setParameter(&quot;lookup-doc&quot;, &quot;xml://lookup&quot;);\r\n    \r\n                StringWriter out = new StringWriter();\r\n                trans.transform(mainSource, new StreamResult(out));\r\n    \r\n                System.out.println(out.toString());\r\n    \r\n            } catch (TransformerException e) {\r\n                System.err.println(&quot;It&#39;s the wrong trousers Gromit, and they&#39;ve gone wrong!&quot;);\r\n                e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nI also had a working version where I put the xml source **in** the URI like\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    xml://&lt;urls&gt;&lt;url&gt;&lt;url id=&#39;google&#39;&gt;https://www.google.com&lt;/url&gt;...\r\n\r\nbut I figured that might run into length limits somewhere.","title":"passing xml nodes/documents/fragments as parameters to xslt","body":"<p>Here's a working example with the URIResolver Gambit, #1 in the list of solutions:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import javax.xml.transform.Source;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerException;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.URIResolver;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\nimport java.io.StringReader;\nimport java.io.StringWriter;\n\npublic class XSLTest {\n    public static void main(String[] args) {\n\n        class MyResolver implements URIResolver {\n            String _xml;\n            MyResolver(String xml) { _xml = xml; }\n            @Override\n            public Source resolve(String href, String base) throws TransformerException {\n                return new StreamSource(new StringReader(_xml));\n            }\n        }\n\n        String lookup =\n            \"&lt;?xml version='1.0' encoding='utf-8'?&gt;\\n\" +\n            \"&lt;urls&gt;\\n\" +\n            \"    &lt;url id='google'&gt;https://www.google.com&lt;/url&gt;\\n\" +\n            \"    &lt;url id='yahoo'&gt;https://www.yahoo.com&lt;/url&gt;\\n\" +\n            \"    &lt;url id='apple'&gt;https://www.apple.com&lt;/url&gt;\\n\" +\n            \"&lt;/urls&gt;\";\n\n        String main =\n            \"&lt;?xml version='1.0' encoding='utf-8'?&gt;\" +\n            \"&lt;list&gt;\"+\n            \"   &lt;link ref='yahoo'&gt;Yahoo&lt;/link&gt;\"+\n            \"   &lt;link ref='google'&gt;Google&lt;/link&gt;\"+\n            \"&lt;/list&gt;\";\n\n        String xsl =\n            \"&lt;?xml version='1.0' encoding='UTF-8'?&gt;\\n\" +\n            \"&lt;xsl:stylesheet version='1.0' xmlns:xsl='http://www.w3.org/1999/XSL/Transform'&gt;\\n\" +\n            \"    &lt;xsl:param name='lookup-doc' /&gt;\\n\" +\n            \"    &lt;xsl:variable name='lookup' select='document($lookup-doc)'/&gt;\\n\" +\n            \"    &lt;xsl:template match='/'&gt;\\n\" +\n            \"        &lt;xsl:for-each select='//link'&gt;\\n\" +\n            \"            &lt;xsl:variable name='ref' select='@ref'/&gt;\\n\" +\n            \"            &lt;xsl:element name='a'&gt;\\n\" +\n            \"                &lt;xsl:attribute name='href'&gt;\\n\" +\n            \"                    &lt;xsl:value-of select='$lookup//url[@id=$ref]'/&gt;\\n\" +\n            \"                &lt;/xsl:attribute&gt;\\n\" +\n            \"                &lt;xsl:value-of select='text()'/&gt;\\n\" +\n            \"            &lt;/xsl:element&gt;\\n\" +\n            \"        &lt;/xsl:for-each&gt;\\n\" +\n            \"    &lt;/xsl:template&gt;\\n\" +\n            \"&lt;/xsl:stylesheet&gt;\";\n\n        try {\n\n            // xsl doc\n            Source xsltSource = new StreamSource(new StringReader(xsl));\n\n            TransformerFactory transFact = TransformerFactory.newInstance();\n            Transformer trans = transFact.newTransformer(xsltSource);\n\n            // main doc\n            Source mainSource = new StreamSource(new StringReader(main));\n\n            // lookup doc - stage it in the URI resolver\n            trans.setURIResolver(new MyResolver(lookup));\n            // dummy URL, you could use different values here to \n            // support multiple document parameters\n            trans.setParameter(\"lookup-doc\", \"xml://lookup\");\n\n            StringWriter out = new StringWriter();\n            trans.transform(mainSource, new StreamResult(out));\n\n            System.out.println(out.toString());\n\n        } catch (TransformerException e) {\n            System.err.println(\"It's the wrong trousers Gromit, and they've gone wrong!\");\n            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.\n        }\n\n    }\n}\n</code></pre>\n\n<p>I also had a working version where I put the xml source <strong>in</strong> the URI like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>xml://&lt;urls&gt;&lt;url&gt;&lt;url id='google'&gt;https://www.google.com&lt;/url&gt;...\n</code></pre>\n\n<p>but I figured that might run into length limits somewhere.</p>\n"},{"tags":[],"owner":{"account_id":431269,"reputation":981,"user_id":815218,"accept_rate":83,"display_name":"sprockets"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1356625860,"creation_date":1356625860,"answer_id":14057887,"question_id":3789044,"body_markdown":"I found a solution (here: https://stackoverflow.com/questions/9110750/xslt-processing-with-java-passing-xml-content-in-parameter)  which may work for your case as well:\r\n\r\n    String urls = &quot;&lt;urls&gt;&lt;url id=&#39;google&#39;&gt;https://www.google.com&lt;/url&gt;...&quot;;\r\n    trans.setParameter(&quot;lookupdoc&quot;, new StreamSource(new StringReader(urls)));\r\n\r\ninstead of creating a uriresolver from a string, just create a stream source from a string reader and pass it to the stylesheet. \r\n\r\nAfter that, I was able to access the doc normally as XML:\r\n\r\n    &lt;xsl:param name=&quot;lookupdoc&quot;&gt;&lt;urls/&gt;&lt;/xsl:param&gt;\t\r\n    ... \r\n    &lt;xsl:variable name=&quot;googleurl&quot; select=&quot;$lookupdoc/@id=&#39;google&quot;/&gt;\r\n\r\nDid not test with xalan, but maybe the answer will help others who stumble onto this question :)","title":"passing xml nodes/documents/fragments as parameters to xslt","body":"<p>I found a solution (here: <a href=\"https://stackoverflow.com/questions/9110750/xslt-processing-with-java-passing-xml-content-in-parameter\">XSLT Processing with Java : passing xml content in parameter</a>)  which may work for your case as well:</p>\n\n<pre><code>String urls = \"&lt;urls&gt;&lt;url id='google'&gt;https://www.google.com&lt;/url&gt;...\";\ntrans.setParameter(\"lookupdoc\", new StreamSource(new StringReader(urls)));\n</code></pre>\n\n<p>instead of creating a uriresolver from a string, just create a stream source from a string reader and pass it to the stylesheet. </p>\n\n<p>After that, I was able to access the doc normally as XML:</p>\n\n<pre><code>&lt;xsl:param name=\"lookupdoc\"&gt;&lt;urls/&gt;&lt;/xsl:param&gt; \n... \n&lt;xsl:variable name=\"googleurl\" select=\"$lookupdoc/@id='google\"/&gt;\n</code></pre>\n\n<p>Did not test with xalan, but maybe the answer will help others who stumble onto this question :)</p>\n"},{"tags":[],"owner":{"account_id":1170632,"reputation":390,"user_id":1147905,"display_name":"ujay68"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565710841,"creation_date":1565710841,"answer_id":57481184,"question_id":3789044,"body_markdown":"It&#39;s an annoyance, one way or the other. In the end, I&#39;ve always found it easiest and most compatible with other XSLT processors to serialize the XML fragment to a temp file, pass that file&#39;s URI to XSLT as a string parameter, and from there load the URI via the XPath document() function.","title":"passing xml nodes/documents/fragments as parameters to xslt","body":"<p>It's an annoyance, one way or the other. In the end, I've always found it easiest and most compatible with other XSLT processors to serialize the XML fragment to a temp file, pass that file's URI to XSLT as a string parameter, and from there load the URI via the XPath document() function.</p>\n"}],"owner":{"account_id":89373,"reputation":1555,"user_id":246621,"accept_rate":67,"display_name":"mkm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9262,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":3793476,"answer_count":5,"score":8,"last_activity_date":1671043816,"creation_date":1285345478,"question_id":3789044,"body_markdown":"I tried to pass a `w3c.dom.Document`, `Element` and `NodeList` as parameters to a xslt transform.\r\n\r\nI want to be able to process it within the xslt:  \r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n\t&lt;xsl:param name=&quot;links&quot; /&gt;\r\n\t&lt;xsl:template match=&quot;/&quot;&gt;\r\n\t\t&lt;record&gt;\r\n\t\t\t&lt;xsl:for-each select=&quot;$links/*&quot;&gt;\r\n\t\t\t\t&lt;test /&gt;\r\n\t\t\t&lt;/xsl:for-each&gt;\r\n\t\t&lt;/record&gt;\r\n\t&lt;/xsl:template&gt;\r\n\r\nI pass the parameter as:\r\n\r\n\t\t\tDocument params = createLinksParams(links);\r\n\t\t\ttransformer.setParameter(&quot;links&quot;, params);\r\n\r\nI get this exception:\r\n&gt; &#39;Invalid conversion from &#39;com.sun.org.apache.xerces.internal.dom.DocumentImpl&#39; to &#39;node-set&#39;.&#39;\r\n\r\nI tried also `exslt:node-set()`, `xalan:nodeset()` etc, but it doesn&#39;t work.\r\n\r\nIt seems that internally xalan excepts his own implementation of the Node.\r\n\r\nHow can I do something similar without incurring in this problem? \r\n\r\nI cannot use `document($param)` because I construct the doc on the fly.\r\n","title":"passing xml nodes/documents/fragments as parameters to xslt","body":"<p>I tried to pass a <code>w3c.dom.Document</code>, <code>Element</code> and <code>NodeList</code> as parameters to a xslt transform.</p>\n\n<p>I want to be able to process it within the xslt:  </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xsl:param name=\"links\" /&gt;\n&lt;xsl:template match=\"/\"&gt;\n    &lt;record&gt;\n        &lt;xsl:for-each select=\"$links/*\"&gt;\n            &lt;test /&gt;\n        &lt;/xsl:for-each&gt;\n    &lt;/record&gt;\n&lt;/xsl:template&gt;\n</code></pre>\n\n<p>I pass the parameter as:</p>\n\n<pre><code>        Document params = createLinksParams(links);\n        transformer.setParameter(\"links\", params);\n</code></pre>\n\n<p>I get this exception:</p>\n\n<blockquote>\n  <p>'Invalid conversion from 'com.sun.org.apache.xerces.internal.dom.DocumentImpl' to 'node-set'.'</p>\n</blockquote>\n\n<p>I tried also <code>exslt:node-set()</code>, <code>xalan:nodeset()</code> etc, but it doesn't work.</p>\n\n<p>It seems that internally xalan excepts his own implementation of the Node.</p>\n\n<p>How can I do something similar without incurring in this problem? </p>\n\n<p>I cannot use <code>document($param)</code> because I construct the doc on the fly.</p>\n"},{"tags":["java","spring-boot","ehcache-3"],"comments":[{"owner":{"account_id":13440047,"reputation":710,"user_id":9697465,"display_name":"lordneru"},"score":0,"creation_date":1683030571,"post_id":74802907,"comment_id":134301223,"body_markdown":"Hi, did you find a solution? I am using SpringBoot 3 and JDK17 and org.springframework.cache.ehcache package exists no more.","body":"Hi, did you find a solution? I am using SpringBoot 3 and JDK17 and org.springframework.cache.ehcache package exists no more."}],"owner":{"account_id":7781809,"reputation":346,"user_id":5887992,"accept_rate":36,"display_name":"Yashwanth Potu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":404,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671043459,"creation_date":1671043385,"question_id":74802907,"body_markdown":"Below is my Simple Config Class \r\n\r\n    package com.mcd.restaurantmanager.product.config;\r\n    \r\n    import org.springframework.cache.annotation.EnableCaching;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @EnableCaching\r\n    @Configuration\r\n    public class CacheConfig {\r\n    }\r\n\r\nBelow is my ehcache.xml\r\n\r\n    &lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n            xmlns=&quot;http://www.ehcache.org/v3&quot;\r\n            xmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;\r\n            xsi:schemaLocation=&quot;\r\n                http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd\r\n                http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd&quot;&gt;\r\n    \r\n        &lt;cache alias=&quot;hierarchyLevelByRestaurantGroupId&quot;&gt;\r\n            &lt;key-type&gt;java.math.BigDecimal&lt;/key-type&gt;\r\n            &lt;value-type&gt;java.lang.String&lt;/value-type&gt;\r\n            &lt;expiry&gt;\r\n                &lt;ttl unit=&quot;seconds&quot;&gt;30&lt;/ttl&gt;\r\n            &lt;/expiry&gt;\r\n    \r\n            &lt;listeners&gt;\r\n                &lt;listener&gt;\r\n                    &lt;class&gt;com.mcd.restaurantmanager.product.service.CustomCacheEventLogger&lt;/class&gt;\r\n                    &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;\r\n                    &lt;event-ordering-mode&gt;UNORDERED&lt;/event-ordering-mode&gt;\r\n                    &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;\r\n                    &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;\r\n                &lt;/listener&gt;\r\n            &lt;/listeners&gt;\r\n    \r\n            &lt;resources&gt;\r\n                &lt;heap unit=&quot;entries&quot;&gt;2&lt;/heap&gt;\r\n                &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\r\n            &lt;/resources&gt;\r\n        &lt;/cache&gt;\r\n    \r\n        &lt;cache-template name=&quot;default&quot;&gt;\r\n            &lt;expiry&gt;\r\n                &lt;ttl unit=&quot;seconds&quot;&gt;30&lt;/ttl&gt;\r\n            &lt;/expiry&gt;\r\n            &lt;listeners&gt;\r\n                &lt;listener&gt;\r\n                    &lt;class&gt;guru.springframework.ehcache.config.CacheLogger&lt;/class&gt;\r\n                    &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;\r\n                    &lt;event-ordering-mode&gt;UNORDERED&lt;/event-ordering-mode&gt;\r\n                    &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;\r\n                    &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;\r\n                    &lt;events-to-fire-on&gt;EVICTED&lt;/events-to-fire-on&gt;\r\n                &lt;/listener&gt;\r\n            &lt;/listeners&gt;\r\n            &lt;resources&gt;\r\n                &lt;heap&gt;1000&lt;/heap&gt;\r\n                &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\r\n                &lt;disk persistent=&quot;true&quot; unit=&quot;MB&quot;&gt;20&lt;/disk&gt;\r\n            &lt;/resources&gt;\r\n        &lt;/cache-template&gt;\r\n    \r\n    &lt;/config&gt;\r\n\r\nBelow is how I am using caching with methods\r\n\r\n      @Cacheable(value = &quot;id&quot;, key = &quot;#restaurantGroupId&quot;)\r\n        public String getLevel(BigDecimal id, String somRandom) {\r\n            return getGroups(somRandom).stream()\r\n                    .filter(restaurantGroup -&gt; restaurantGroup.getId().equals(id))\r\n                    .map(restaurantGroup -&gt; restaurantGroup.getLevel().getValue())\r\n                    .findFirst()\r\n                    .orElse(null);\r\n        }\r\n\r\nThis is my listener\r\n\r\n    package com.mcd.restaurantmanager.product.service;\r\n    \r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.ehcache.event.CacheEvent;\r\n    import org.ehcache.event.CacheEventListener;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    @Slf4j\r\n    @Service\r\n    public class CustomCacheEventLogger implements CacheEventListener&lt;Object, Object&gt; {\r\n        @Override\r\n        public void onEvent(CacheEvent&lt;?, ?&gt; event) {\r\n            log.info(&quot;Cache event = {}, Key = {},  Old value = {}, New value = {}&quot;,\r\n                    event.getType(),\r\n                    event.getKey(),\r\n                    event.getOldValue(),\r\n                    event.getNewValue());\r\n        }\r\n    }\r\n\r\n\r\nI am not sure if I missed something, but I am getting below error\r\n\r\n**A component required a bean of type &#39;org.springframework.cache.CacheManager&#39; that could not be found.**\r\n\r\nPlease let me know what I am missing, I am using ehcache 3.\r\n\r\n","title":"EhCache 3 Configuration not working with simple configuration of springboot","body":"<p>Below is my Simple Config Class</p>\n<pre><code>package com.mcd.restaurantmanager.product.config;\n\nimport org.springframework.cache.annotation.EnableCaching;\nimport org.springframework.context.annotation.Configuration;\n\n@EnableCaching\n@Configuration\npublic class CacheConfig {\n}\n</code></pre>\n<p>Below is my ehcache.xml</p>\n<pre><code>&lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xmlns=&quot;http://www.ehcache.org/v3&quot;\n        xmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;\n        xsi:schemaLocation=&quot;\n            http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd\n            http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd&quot;&gt;\n\n    &lt;cache alias=&quot;hierarchyLevelByRestaurantGroupId&quot;&gt;\n        &lt;key-type&gt;java.math.BigDecimal&lt;/key-type&gt;\n        &lt;value-type&gt;java.lang.String&lt;/value-type&gt;\n        &lt;expiry&gt;\n            &lt;ttl unit=&quot;seconds&quot;&gt;30&lt;/ttl&gt;\n        &lt;/expiry&gt;\n\n        &lt;listeners&gt;\n            &lt;listener&gt;\n                &lt;class&gt;com.mcd.restaurantmanager.product.service.CustomCacheEventLogger&lt;/class&gt;\n                &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;\n                &lt;event-ordering-mode&gt;UNORDERED&lt;/event-ordering-mode&gt;\n                &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;\n                &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;\n            &lt;/listener&gt;\n        &lt;/listeners&gt;\n\n        &lt;resources&gt;\n            &lt;heap unit=&quot;entries&quot;&gt;2&lt;/heap&gt;\n            &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\n        &lt;/resources&gt;\n    &lt;/cache&gt;\n\n    &lt;cache-template name=&quot;default&quot;&gt;\n        &lt;expiry&gt;\n            &lt;ttl unit=&quot;seconds&quot;&gt;30&lt;/ttl&gt;\n        &lt;/expiry&gt;\n        &lt;listeners&gt;\n            &lt;listener&gt;\n                &lt;class&gt;guru.springframework.ehcache.config.CacheLogger&lt;/class&gt;\n                &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;\n                &lt;event-ordering-mode&gt;UNORDERED&lt;/event-ordering-mode&gt;\n                &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;\n                &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;\n                &lt;events-to-fire-on&gt;EVICTED&lt;/events-to-fire-on&gt;\n            &lt;/listener&gt;\n        &lt;/listeners&gt;\n        &lt;resources&gt;\n            &lt;heap&gt;1000&lt;/heap&gt;\n            &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\n            &lt;disk persistent=&quot;true&quot; unit=&quot;MB&quot;&gt;20&lt;/disk&gt;\n        &lt;/resources&gt;\n    &lt;/cache-template&gt;\n\n&lt;/config&gt;\n</code></pre>\n<p>Below is how I am using caching with methods</p>\n<pre><code>  @Cacheable(value = &quot;id&quot;, key = &quot;#restaurantGroupId&quot;)\n    public String getLevel(BigDecimal id, String somRandom) {\n        return getGroups(somRandom).stream()\n                .filter(restaurantGroup -&gt; restaurantGroup.getId().equals(id))\n                .map(restaurantGroup -&gt; restaurantGroup.getLevel().getValue())\n                .findFirst()\n                .orElse(null);\n    }\n</code></pre>\n<p>This is my listener</p>\n<pre><code>package com.mcd.restaurantmanager.product.service;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.ehcache.event.CacheEvent;\nimport org.ehcache.event.CacheEventListener;\nimport org.springframework.stereotype.Service;\n\n@Slf4j\n@Service\npublic class CustomCacheEventLogger implements CacheEventListener&lt;Object, Object&gt; {\n    @Override\n    public void onEvent(CacheEvent&lt;?, ?&gt; event) {\n        log.info(&quot;Cache event = {}, Key = {},  Old value = {}, New value = {}&quot;,\n                event.getType(),\n                event.getKey(),\n                event.getOldValue(),\n                event.getNewValue());\n    }\n}\n</code></pre>\n<p>I am not sure if I missed something, but I am getting below error</p>\n<p><strong>A component required a bean of type 'org.springframework.cache.CacheManager' that could not be found.</strong></p>\n<p>Please let me know what I am missing, I am using ehcache 3.</p>\n"},{"tags":["java","amazon-web-services","aws-lambda","integration-patterns"],"answers":[{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670603148,"creation_date":1670602453,"answer_id":74745632,"question_id":74745630,"body_markdown":"Consider the approach with [Jackson tree model](https://www.baeldung.com/jackson-json-node-tree-model): \r\n\r\n    public class MyHandler extends JsonHandler&lt;ObjectNode&gt; {\r\n\r\n        @Override\r\n        public ObjectNode handleRequest(ObjectNode json, Context context) {\r\n            // enrich or modify the input\r\n            json.putPOJO(&quot;enriched&quot;, pojo);\r\n            // return (the same) modified input object\r\n            return json;\r\n            // or replace it with something totally different\r\n            // return &quot;Some other POJO&quot;;\r\n        }\r\n    }\r\n\r\n\r\nWhere JsonHandler parent class is defined as\r\n\r\n    public abstract class JsonHandler&lt;R&gt; implements RequestStreamHandler, RequestHandler&lt;ObjectNode, R&gt; {\r\n        \r\n        private ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public void handleRequest(InputStream input, OutputStream output, Context context) throws IOException {\r\n            ObjectNode json = (ObjectNode) objectMapper.readTree(input);\r\n            R result = handleRequest(json, context);\r\n            output.write(objectMapper.writeValueAsString(result).getBytes());\r\n        }\r\n    \r\n        @Override\r\n        public abstract R handleRequest(ObjectNode json, Context context);\r\n    }\r\n","title":"AWS lambda enrich / modify input object","body":"<p>Consider the approach with <a href=\"https://www.baeldung.com/jackson-json-node-tree-model\" rel=\"nofollow noreferrer\">Jackson tree model</a>:</p>\n<pre><code>public class MyHandler extends JsonHandler&lt;ObjectNode&gt; {\n\n    @Override\n    public ObjectNode handleRequest(ObjectNode json, Context context) {\n        // enrich or modify the input\n        json.putPOJO(&quot;enriched&quot;, pojo);\n        // return (the same) modified input object\n        return json;\n        // or replace it with something totally different\n        // return &quot;Some other POJO&quot;;\n    }\n}\n</code></pre>\n<p>Where JsonHandler parent class is defined as</p>\n<pre><code>public abstract class JsonHandler&lt;R&gt; implements RequestStreamHandler, RequestHandler&lt;ObjectNode, R&gt; {\n    \n    private ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public void handleRequest(InputStream input, OutputStream output, Context context) throws IOException {\n        ObjectNode json = (ObjectNode) objectMapper.readTree(input);\n        R result = handleRequest(json, context);\n        output.write(objectMapper.writeValueAsString(result).getBytes());\n    }\n\n    @Override\n    public abstract R handleRequest(ObjectNode json, Context context);\n}\n</code></pre>\n"}],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671043070,"creation_date":1670602453,"question_id":74745630,"body_markdown":"Usually you need to do something with [InputPath, ResultPath and OutputPath](https://docs.aws.amazon.com/step-functions/latest/dg/input-output-example.html) to process your data.  \r\nBut sometimes you need something as simple as modifying a property in your input object, like [camel do](https://camel.apache.org/components/3.18.x/eips/enterprise-integration-patterns.html) with [Message EIP](https://www.enterpriseintegrationpatterns.com/Message.html) or [Enricher EIP](https://www.enterpriseintegrationpatterns.com/DataEnricher.html)  \r\nIs there an option to eliminate the configuration overhead?","title":"AWS lambda enrich / modify input object","body":"<p>Usually you need to do something with <a href=\"https://docs.aws.amazon.com/step-functions/latest/dg/input-output-example.html\" rel=\"nofollow noreferrer\">InputPath, ResultPath and OutputPath</a> to process your data.<br />\nBut sometimes you need something as simple as modifying a property in your input object, like <a href=\"https://camel.apache.org/components/3.18.x/eips/enterprise-integration-patterns.html\" rel=\"nofollow noreferrer\">camel do</a> with <a href=\"https://www.enterpriseintegrationpatterns.com/Message.html\" rel=\"nofollow noreferrer\">Message EIP</a> or <a href=\"https://www.enterpriseintegrationpatterns.com/DataEnricher.html\" rel=\"nofollow noreferrer\">Enricher EIP</a><br />\nIs there an option to eliminate the configuration overhead?</p>\n"},{"tags":["java","mongodb","spring-data"],"comments":[{"owner":{"account_id":1358954,"reputation":19779,"user_id":1296707,"accept_rate":50,"display_name":"Markus W Mahlberg"},"score":0,"creation_date":1571523696,"post_id":58468040,"comment_id":103271327,"body_markdown":"`_id`s must be unique and are immutable. If you want to update, you have to call the update method.","body":"<code>_id</code>s must be unique and are immutable. If you want to update, you have to call the update method."},{"owner":{"account_id":7764898,"reputation":219,"user_id":5876366,"accept_rate":100,"display_name":"Priancy"},"score":2,"creation_date":1571556129,"post_id":58468040,"comment_id":103275405,"body_markdown":"@MarkusWMahlberg Save inherited from org.springframework.data.repository.CrudRepository by definition, is supposed to update an object in the upsert style, update if present and insert if not. When calling save , I am passing the code field in the POJO, so ideally it should check if code is same, it should update the document.","body":"@MarkusWMahlberg Save inherited from org.springframework.data.repository.CrudRepository by definition, is supposed to update an object in the upsert style, update if present and insert if not. When calling save , I am passing the code field in the POJO, so ideally it should check if code is same, it should update the document."},{"owner":{"account_id":6128773,"reputation":959,"user_id":5230876,"accept_rate":60,"display_name":"Nishant Bhardwaz"},"score":0,"creation_date":1600772972,"post_id":58468040,"comment_id":113187205,"body_markdown":"@Priancy Have you found the solution, facing the same issue.","body":"@Priancy Have you found the solution, facing the same issue."},{"owner":{"account_id":10749005,"reputation":993,"user_id":7909229,"display_name":"Aayush Mall"},"score":0,"creation_date":1670930287,"post_id":58468040,"comment_id":131982024,"body_markdown":"@priancy I am also facing the same, did you get some solution for this?","body":"@priancy I am also facing the same, did you get some solution for this?"},{"owner":{"account_id":7764898,"reputation":219,"user_id":5876366,"accept_rate":100,"display_name":"Priancy"},"score":0,"creation_date":1671042677,"post_id":58468040,"comment_id":132014403,"body_markdown":"@AayushMall This issue occurs when you try to insert a new java object with the same id in mongo.  If you wish to update an existing object in mongo, you have to get that object first from database and update the fields and save the same object again.","body":"@AayushMall This issue occurs when you try to insert a new java object with the same id in mongo.  If you wish to update an existing object in mongo, you have to get that object first from database and update the fields and save the same object again."}],"owner":{"account_id":7764898,"reputation":219,"user_id":5876366,"accept_rate":100,"display_name":"Priancy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1347,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1671042843,"creation_date":1571519496,"question_id":58468040,"body_markdown":"&gt;I want to use a custom String *code* as a **primary key** in my collection and ensure that **Mongo Repository *save* updates/upserts** the document based on code. But when a 2nd entry is added with same code, it throws **E11000 duplicate key error collection**. PFB my code snippet :\r\n\r\n    public class WebCategoryTemp {\r\n\r\n    @Id\r\n    private String code;\r\n    @Indexed\r\n    private Long timestamp;\r\n    private String name;\r\n    private String parent;\r\n    private Map&lt;String,String&gt; attributes;\r\n    private List&lt;String&gt; brands;\r\n    private List&lt;String&gt; categories;\r\n    private List&lt;String&gt; optionCodes;\r\n\r\n    }\r\n&gt;Repository:\r\n\r\n    public interface WebCategoryTempRepository extends \r\n    MongoRepository&lt;WebCategoryTemp, String&gt; {\r\n    }\r\n&gt; I am getting the below exception while adding another entry with same code :\r\n  \r\n\r\n    org.springframework.dao.DuplicateKeyException: E11000 duplicate key error \r\n      collection: AQUAMAN.webCategoryTemp index: _id_ dup key: { _id: \r\n      &quot;GlobalTrends&quot; }; nested exception is com.mongodb.MongoWriteException: \r\n      E11000 duplicate key error collection: AQUAMAN.webCategoryTemp index: _id_ \r\n      dup key: { _id: &quot;GlobalTrends&quot; }\r\n\r\n&gt; Sample Mongo Document:\r\n\r\n    {\r\n    \t&quot;_id&quot; : &quot;GlobalTrends&quot;,\r\n    \t&quot;timestamp&quot; : NumberLong(&quot;1570439407216&quot;),\r\n    \t&quot;name&quot; : &quot;GlobalTrendss&quot;,\r\n    \t&quot;parent&quot; : &quot;83&quot;,\r\n    \t&quot;attributes&quot; : {\r\n    \t\t&quot;categoryLevel&quot; : &quot;4&quot;,\r\n    \t\t&quot;returnWindow&quot; : &quot;35&quot;,\r\n    \t\t&quot;isReturnable&quot; : &quot;true&quot;,\r\n    \t\t&quot;maximumQuantity&quot; : &quot;2&quot;,\r\n    \t\t&quot;categoryToggle&quot; : &quot;toggleCode&quot;,\r\n    \t\t&quot;catalogId&quot; : &quot;rilfnlProductCatalog&quot;\r\n    \t},\r\n    \t&quot;brands&quot; : [ ],\r\n    \t&quot;categories&quot; : [\r\n    \t\t&quot;830316001&quot;\r\n    \t],\r\n    \t&quot;version&quot; : NumberLong(0)\r\n    }\r\n\r\n\r\n\r\n&gt;Solution:\r\nThis issue occurs when you try to **save** an already existing db object with spring data. \r\nAs a fix for this issue, we should hit a find query first to mongo to check if the object exists. If find returns the mongo object, we should update the same reference and then save it.\r\n\r\n","title":"E11000 duplicate key error collection in spring data mongo when using custom String as a primary key","body":"<blockquote>\n<p>I want to use a custom String <em>code</em> as a <strong>primary key</strong> in my collection and ensure that <strong>Mongo Repository <em>save</em> updates/upserts</strong> the document based on code. But when a 2nd entry is added with same code, it throws <strong>E11000 duplicate key error collection</strong>. PFB my code snippet :</p>\n</blockquote>\n<pre><code>public class WebCategoryTemp {\n\n@Id\nprivate String code;\n@Indexed\nprivate Long timestamp;\nprivate String name;\nprivate String parent;\nprivate Map&lt;String,String&gt; attributes;\nprivate List&lt;String&gt; brands;\nprivate List&lt;String&gt; categories;\nprivate List&lt;String&gt; optionCodes;\n\n}\n</code></pre>\n<blockquote>\n<p>Repository:</p>\n</blockquote>\n<pre><code>public interface WebCategoryTempRepository extends \nMongoRepository&lt;WebCategoryTemp, String&gt; {\n}\n</code></pre>\n<blockquote>\n<p>I am getting the below exception while adding another entry with same code :</p>\n</blockquote>\n<pre><code>org.springframework.dao.DuplicateKeyException: E11000 duplicate key error \n  collection: AQUAMAN.webCategoryTemp index: _id_ dup key: { _id: \n  &quot;GlobalTrends&quot; }; nested exception is com.mongodb.MongoWriteException: \n  E11000 duplicate key error collection: AQUAMAN.webCategoryTemp index: _id_ \n  dup key: { _id: &quot;GlobalTrends&quot; }\n</code></pre>\n<blockquote>\n<p>Sample Mongo Document:</p>\n</blockquote>\n<pre><code>{\n    &quot;_id&quot; : &quot;GlobalTrends&quot;,\n    &quot;timestamp&quot; : NumberLong(&quot;1570439407216&quot;),\n    &quot;name&quot; : &quot;GlobalTrendss&quot;,\n    &quot;parent&quot; : &quot;83&quot;,\n    &quot;attributes&quot; : {\n        &quot;categoryLevel&quot; : &quot;4&quot;,\n        &quot;returnWindow&quot; : &quot;35&quot;,\n        &quot;isReturnable&quot; : &quot;true&quot;,\n        &quot;maximumQuantity&quot; : &quot;2&quot;,\n        &quot;categoryToggle&quot; : &quot;toggleCode&quot;,\n        &quot;catalogId&quot; : &quot;rilfnlProductCatalog&quot;\n    },\n    &quot;brands&quot; : [ ],\n    &quot;categories&quot; : [\n        &quot;830316001&quot;\n    ],\n    &quot;version&quot; : NumberLong(0)\n}\n</code></pre>\n<blockquote>\n<p>Solution:\nThis issue occurs when you try to <strong>save</strong> an already existing db object with spring data.\nAs a fix for this issue, we should hit a find query first to mongo to check if the object exists. If find returns the mongo object, we should update the same reference and then save it.</p>\n</blockquote>\n"},{"tags":["java","linux","tomcat","memory-management","cloud-foundry"],"comments":[{"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"score":0,"creation_date":1671111359,"post_id":74802373,"comment_id":132030829,"body_markdown":"What is being reported when you run `cf app &lt;your-app&gt;`?","body":"What is being reported when you run <code>cf app &lt;your-app&gt;</code>?"},{"owner":{"account_id":2282818,"reputation":1576,"user_id":2007533,"accept_rate":47,"display_name":"Kumar"},"score":0,"creation_date":1671118930,"post_id":74802373,"comment_id":132033956,"body_markdown":"@DanielMikusa: it shows 5GB...","body":"@DanielMikusa: it shows 5GB..."},{"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"score":0,"creation_date":1671120053,"post_id":74802373,"comment_id":132034401,"body_markdown":"It could be a number of things, but if `cf app` reports 5G in use then something in the container is using that. I would remove all of your custom JVM memory settings, let the buildpack handle that. Then set a lower memory limit. If you only want it to use 1G or 2G, then set that as the memory limit. The Java buildpack will size your app so it doesn&#39;t use more memory than that.","body":"It could be a number of things, but if <code>cf app</code> reports 5G in use then something in the container is using that. I would remove all of your custom JVM memory settings, let the buildpack handle that. Then set a lower memory limit. If you only want it to use 1G or 2G, then set that as the memory limit. The Java buildpack will size your app so it doesn&#39;t use more memory than that."},{"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"score":1,"creation_date":1671120173,"post_id":74802373,"comment_id":132034425,"body_markdown":"Also, it&#39;s important to understand the JVM&#39;s heap isn&#39;t ever going to take up the full memory limit of the container. There are other processes in the container that take up a small amount of memory, there are also other memory regions in the Java process that will take up sometimes non-insignificant amounts of memory. You can use Java NMT to explore those non-heap regions, some APM tools might show this information as well.","body":"Also, it&#39;s important to understand the JVM&#39;s heap isn&#39;t ever going to take up the full memory limit of the container. There are other processes in the container that take up a small amount of memory, there are also other memory regions in the Java process that will take up sometimes non-insignificant amounts of memory. You can use Java NMT to explore those non-heap regions, some APM tools might show this information as well."},{"owner":{"account_id":2282818,"reputation":1576,"user_id":2007533,"accept_rate":47,"display_name":"Kumar"},"score":0,"creation_date":1671123569,"post_id":74802373,"comment_id":132035699,"body_markdown":"@DanielMikusa: Thanks for the suggestions. 1) I will try to reduce the memory and check how it behaves\n2) For using NMT - should I start the app with -XX:NativeMemoryTracking=detail and then ssh and use jcmd? Do you have any documentation?\n3) I found one more interesting thing (may not be exactly relevant to this issue) - My VM memory limit id 8G but the &#39;top` command shows KiB Mem : 26110456+total which translated to ~26G...","body":"@DanielMikusa: Thanks for the suggestions. 1) I will try to reduce the memory and check how it behaves 2) For using NMT - should I start the app with -XX:NativeMemoryTracking=detail and then ssh and use jcmd? Do you have any documentation? 3) I found one more interesting thing (may not be exactly relevant to this issue) - My VM memory limit id 8G but the &#39;top` command shows KiB Mem : 26110456+total which translated to ~26G..."},{"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"score":0,"creation_date":1671221501,"post_id":74802373,"comment_id":132060540,"body_markdown":"`top` is not accurate because you&#39;re in a container. It looks at the entire VM, not just your container. That&#39;s why I suggested looking at `cf app` because it knows about your container limits specifically. I haven&#39;t had to enable Java NMT in a while, but this is what I used to do: https://github.com/dmikusa/cf-debug-tools#use-profile-to-dump-the-jvm-native-memory","body":"<code>top</code> is not accurate because you&#39;re in a container. It looks at the entire VM, not just your container. That&#39;s why I suggested looking at <code>cf app</code> because it knows about your container limits specifically. I haven&#39;t had to enable Java NMT in a while, but this is what I used to do: <a href=\"https://github.com/dmikusa/cf-debug-tools#use-profile-to-dump-the-jvm-native-memory\" rel=\"nofollow noreferrer\">github.com/dmikusa/&hellip;</a>"}],"owner":{"account_id":2282818,"reputation":1576,"user_id":2007533,"accept_rate":47,"display_name":"Kumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":384,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671042780,"creation_date":1671040185,"question_id":74802373,"body_markdown":"I have a Spring based JAVA Web App deployed in Cloud Foundry (running on Tomcat8 and compiled on JAVA8). \r\n\r\nAfter couple of calls (payload size is 15MB per request) to application the memory rises to 5GB.\r\n\r\nI took the heap dump using cf plugin `cf java heap-dump`, surprisingly the leak analysis on heap dump showed just few MBs per thread (there was one thread per request).\r\n\r\nI did `ssh` login to the app and ran `top` command which again showed java process consuming 5GB!\r\n\r\nTo restrict the memory of app, I added following `JAVA_OPTS` environment variable (just to check if that restricts the app memory):\r\n\r\n`-Xmx=512M -XX:MarkStackSizeMax=512M -XX:G1HeapRegionSize=512M -XX:ReservedCodeCacheSize=240M -XX:CICompilerCount=5 -Xss=512M -Xmx=512M -XX:MaxDirectMemorySize=30M -XX:MaxMetaspaceSize=512M`\r\n\r\nEven after this, there was no change and couple of calls lead to same 5GB usage of memory.\r\n\r\nFurther, I ran `pmap` command and I got following response:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI am not understanding what is first 2 rows with maximum memory usage.\r\n\r\nWhat can be the possible cause for such high memory usage, if the heap dump doesn&#39;t show it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ogagc.png","title":"Cloud Foundry App is showing 5GB of memory usage but heap dump shows just few MBs","body":"<p>I have a Spring based JAVA Web App deployed in Cloud Foundry (running on Tomcat8 and compiled on JAVA8).</p>\n<p>After couple of calls (payload size is 15MB per request) to application the memory rises to 5GB.</p>\n<p>I took the heap dump using cf plugin <code>cf java heap-dump</code>, surprisingly the leak analysis on heap dump showed just few MBs per thread (there was one thread per request).</p>\n<p>I did <code>ssh</code> login to the app and ran <code>top</code> command which again showed java process consuming 5GB!</p>\n<p>To restrict the memory of app, I added following <code>JAVA_OPTS</code> environment variable (just to check if that restricts the app memory):</p>\n<p><code>-Xmx=512M -XX:MarkStackSizeMax=512M -XX:G1HeapRegionSize=512M -XX:ReservedCodeCacheSize=240M -XX:CICompilerCount=5 -Xss=512M -Xmx=512M -XX:MaxDirectMemorySize=30M -XX:MaxMetaspaceSize=512M</code></p>\n<p>Even after this, there was no change and couple of calls lead to same 5GB usage of memory.</p>\n<p>Further, I ran <code>pmap</code> command and I got following response:</p>\n<p><a href=\"https://i.stack.imgur.com/Ogagc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ogagc.png\" alt=\"enter image description here\" /></a></p>\n<p>I am not understanding what is first 2 rows with maximum memory usage.</p>\n<p>What can be the possible cause for such high memory usage, if the heap dump doesn't show it?</p>\n"},{"tags":["java","ant","ivy"],"comments":[{"owner":{"account_id":15396644,"reputation":25755,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1671062863,"post_id":74801818,"comment_id":132019482,"body_markdown":"Welcome to SO! Make sure to ask an actual question. Don&#39;t make us guess what your question is, even though you might think it&#39;s obvious.","body":"Welcome to SO! Make sure to ask an actual question. Don&#39;t make us guess what your question is, even though you might think it&#39;s obvious."}],"answers":[{"tags":[],"owner":{"account_id":27253474,"reputation":1,"user_id":20777514,"display_name":"EricaWork"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671042618,"creation_date":1671042618,"answer_id":74802781,"question_id":74801818,"body_markdown":"The problem is I had the jar files in multiple location. I removed it from the $ANT_HOME/lib/ant/lib folder and it worked.","title":"ant error while compiling typedef A class needed by class IvyAntSettings cannot be found","body":"<p>The problem is I had the jar files in multiple location. I removed it from the $ANT_HOME/lib/ant/lib folder and it worked.</p>\n"}],"owner":{"account_id":27253474,"reputation":1,"user_id":20777514,"display_name":"EricaWork"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671042618,"creation_date":1671037366,"question_id":74801818,"body_markdown":"I have an ant project with build.xml and ivy.xml setup.\r\n\r\nwhen I run the &quot;ant&quot; command line or I use intellij to build the jar (with -compile) I am getting this error:\r\n\r\n```\r\nBUILD FAILED\r\nbuild.xml : the following error occurred while executing this line:\r\njar:file:/C:/java/jdk1.8.0_351/jre/lib/ext/ivy-2.3.0.jar!/org/apache/ivy/ant/antlib.xml:21: type def A class needed by class org.apache.ivy.IvySettings cannot be found: org/apache/tools/types/DataType using the classloader AntClassLoader[]\r\n...\r\nCaused by: java.lang.NoClassDefFoundError: org/apache/tools/types/DataType\r\n```\r\n\r\nI tried ivy version 2.3.0, 2.4.0, 2.5.0, 2.5.1, ant version 1.10.5, 1.10.10, 1.10.12.\r\n\r\nMy ANT\\_*HOME and JAVA*\\_*HOME are set properly and ANT\\_*HOME is in PATH\r\n\r\nI can create run configuration and the service runs properly, I can access API/REST, no compile errors.\r\n\r\nI am not sure what else to check","title":"ant error while compiling typedef A class needed by class IvyAntSettings cannot be found","body":"<p>I have an ant project with build.xml and ivy.xml setup.</p>\n<p>when I run the &quot;ant&quot; command line or I use intellij to build the jar (with -compile) I am getting this error:</p>\n<pre><code>BUILD FAILED\nbuild.xml : the following error occurred while executing this line:\njar:file:/C:/java/jdk1.8.0_351/jre/lib/ext/ivy-2.3.0.jar!/org/apache/ivy/ant/antlib.xml:21: type def A class needed by class org.apache.ivy.IvySettings cannot be found: org/apache/tools/types/DataType using the classloader AntClassLoader[]\n...\nCaused by: java.lang.NoClassDefFoundError: org/apache/tools/types/DataType\n</code></pre>\n<p>I tried ivy version 2.3.0, 2.4.0, 2.5.0, 2.5.1, ant version 1.10.5, 1.10.10, 1.10.12.</p>\n<p>My ANT_<em>HOME and JAVA</em>_*HOME are set properly and ANT_*HOME is in PATH</p>\n<p>I can create run configuration and the service runs properly, I can access API/REST, no compile errors.</p>\n<p>I am not sure what else to check</p>\n"},{"tags":["java","image","rescale"],"answers":[{"tags":[],"owner":{"account_id":1020946,"reputation":8274,"user_id":1031312,"accept_rate":96,"display_name":"Ozzy"},"down_vote_count":2,"up_vote_count":119,"is_accepted":true,"score":117,"last_activity_date":1607166322,"creation_date":1334922232,"answer_id":10245583,"question_id":10245220,"body_markdown":"Here we go:\r\n\r\n    Dimension imgSize = new Dimension(500, 100);\r\n    Dimension boundary = new Dimension(200, 200);\r\n\r\nFunction to return the new size depending on the boundary:\r\n\r\n    public static Dimension getScaledDimension(Dimension imgSize, Dimension boundary) {\r\n\r\n        int original_width = imgSize.width;\r\n        int original_height = imgSize.height;\r\n        int bound_width = boundary.width;\r\n        int bound_height = boundary.height;\r\n        int new_width = original_width;\r\n        int new_height = original_height;\r\n\r\n        // first check if we need to scale width\r\n        if (original_width &gt; bound_width) {\r\n            //scale width to fit\r\n            new_width = bound_width;\r\n            //scale height to maintain aspect ratio\r\n            new_height = (new_width * original_height) / original_width;\r\n        }\r\n\r\n        // then check if we need to scale even with the new height\r\n        if (new_height &gt; bound_height) {\r\n            //scale height to fit instead\r\n            new_height = bound_height;\r\n            //scale width to maintain aspect ratio\r\n            new_width = (new_height * original_width) / original_height;\r\n        }\r\n\r\n        return new Dimension(new_width, new_height);\r\n    }\r\n\r\nIn case anyone also needs the image resizing code, [here is a decent solution][1].\r\n\r\nIf you&#39;re unsure about the above solution, [there are different ways][2] to achieve the same result.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/11371387/1031312\r\n  [2]: https://stackoverflow.com/a/11959928/1031312\r\n","title":"Resize image, maintain aspect ratio","body":"<p>Here we go:</p>\n<pre><code>Dimension imgSize = new Dimension(500, 100);\nDimension boundary = new Dimension(200, 200);\n</code></pre>\n<p>Function to return the new size depending on the boundary:</p>\n<pre><code>public static Dimension getScaledDimension(Dimension imgSize, Dimension boundary) {\n\n    int original_width = imgSize.width;\n    int original_height = imgSize.height;\n    int bound_width = boundary.width;\n    int bound_height = boundary.height;\n    int new_width = original_width;\n    int new_height = original_height;\n\n    // first check if we need to scale width\n    if (original_width &gt; bound_width) {\n        //scale width to fit\n        new_width = bound_width;\n        //scale height to maintain aspect ratio\n        new_height = (new_width * original_height) / original_width;\n    }\n\n    // then check if we need to scale even with the new height\n    if (new_height &gt; bound_height) {\n        //scale height to fit instead\n        new_height = bound_height;\n        //scale width to maintain aspect ratio\n        new_width = (new_height * original_width) / original_height;\n    }\n\n    return new Dimension(new_width, new_height);\n}\n</code></pre>\n<p>In case anyone also needs the image resizing code, <a href=\"https://stackoverflow.com/a/11371387/1031312\">here is a decent solution</a>.</p>\n<p>If you're unsure about the above solution, <a href=\"https://stackoverflow.com/a/11959928/1031312\">there are different ways</a> to achieve the same result.</p>\n"},{"tags":[],"owner":{"account_id":6957,"reputation":74511,"user_id":11858,"accept_rate":93,"display_name":"daveb"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1334922374,"creation_date":1334922374,"answer_id":10245616,"question_id":10245220,"body_markdown":"You will want to check out [Image.getScaledInstance()][1], and more in this answer: https://stackoverflow.com/questions/3967731/java-scale-image-best-practice\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29","title":"Resize image, maintain aspect ratio","body":"<p>You will want to check out <a href=\"http://docs.oracle.com/javase/6/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29\" rel=\"nofollow noreferrer\">Image.getScaledInstance()</a>, and more in this answer: <a href=\"https://stackoverflow.com/questions/3967731/java-scale-image-best-practice\">How to improve the performance of g.drawImage() method for resizing images</a></p>\n"},{"tags":[],"owner":{"account_id":3647112,"reputation":11,"user_id":3040058,"display_name":"Pedro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385523148,"creation_date":1385523148,"answer_id":20233380,"question_id":10245220,"body_markdown":"try this\r\n\r\n    float rateX =  (float)jpDisplayImagen.getWidth()/(float)img.getWidth();\r\n    float rateY = (float)jpDisplayImagen.getHeight()/(float)img.getHeight();\r\n    if (rateX&gt;rateY){\r\n        int W=(int)(img.getWidth()*rateY);\r\n        int H=(int)(img.getHeight()*rateY);\r\n        jpDisplayImagen.getGraphics().drawImage(img, 0, 0,W,H, null);\r\n    }\r\n    else{\r\n        int W=(int)(img.getWidth()*rateX);\r\n        int H=(int)(img.getHeight()*rateX);\r\n        jpDisplayImagen.getGraphics().drawImage(img, 0, 0,W,H, null);\r\n    }","title":"Resize image, maintain aspect ratio","body":"<p>try this</p>\n\n<pre><code>float rateX =  (float)jpDisplayImagen.getWidth()/(float)img.getWidth();\nfloat rateY = (float)jpDisplayImagen.getHeight()/(float)img.getHeight();\nif (rateX&gt;rateY){\n    int W=(int)(img.getWidth()*rateY);\n    int H=(int)(img.getHeight()*rateY);\n    jpDisplayImagen.getGraphics().drawImage(img, 0, 0,W,H, null);\n}\nelse{\n    int W=(int)(img.getWidth()*rateX);\n    int H=(int)(img.getHeight()*rateX);\n    jpDisplayImagen.getGraphics().drawImage(img, 0, 0,W,H, null);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1424629,"reputation":433,"user_id":1348487,"accept_rate":89,"display_name":"Hansj&#246;rg Hofer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441610112,"creation_date":1441610112,"answer_id":32433077,"question_id":10245220,"body_markdown":"    public class ImageTransformation {\r\n\r\n    public static final String PNG = &quot;png&quot;;\r\n    \r\n    public static byte[] resize(FileItem fileItem, int width, int height) {\r\n\r\n        try {\r\n            ResampleOp resampleOp = new ResampleOp(width, height);\r\n            BufferedImage scaledImage = resampleOp.filter(ImageIO.read(fileItem.getInputStream()), null);\r\n\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            ImageIO.write(scaledImage, PNG, baos);\r\n\r\n            return baos.toByteArray();\r\n        } catch (Exception ex) {\r\n            throw new MapsException(&quot;An error occured during image resizing.&quot;, ex);\r\n        }\r\n\r\n    }\r\n    \r\n    public static byte[] resizeAdjustMax(FileItem fileItem, int maxWidth, int maxHeight) {\r\n    \t\r\n        try {\r\n    \t\tBufferedInputStream bis = new BufferedInputStream(fileItem.getInputStream());  \r\n    \t\tBufferedImage bufimg = ImageIO.read(bis);   \r\n    \t\t\r\n    \t\t//check size of image \r\n    \t\tint img_width = bufimg.getWidth();\r\n            int img_height = bufimg.getHeight();\r\n            if(img_width &gt; maxWidth || img_height &gt; maxHeight) {\r\n            \tfloat factx = (float) img_width / maxWidth;\r\n            \tfloat facty = (float) img_height / maxHeight;\r\n            \tfloat fact = (factx&gt;facty) ? factx : facty;\r\n            \timg_width = (int) ((int) img_width / fact);\r\n            \timg_height = (int) ((int) img_height / fact);\r\n            }\r\n            \r\n            return resize(fileItem,img_width, img_height);\r\n\r\n        } catch (Exception ex) {\r\n            throw new MapsException(&quot;An error occured during image resizing.&quot;, ex);\r\n        }\r\n\r\n    }\r\n}\r\n","title":"Resize image, maintain aspect ratio","body":"<pre><code>public class ImageTransformation {\n\npublic static final String PNG = \"png\";\n\npublic static byte[] resize(FileItem fileItem, int width, int height) {\n\n    try {\n        ResampleOp resampleOp = new ResampleOp(width, height);\n        BufferedImage scaledImage = resampleOp.filter(ImageIO.read(fileItem.getInputStream()), null);\n\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        ImageIO.write(scaledImage, PNG, baos);\n\n        return baos.toByteArray();\n    } catch (Exception ex) {\n        throw new MapsException(\"An error occured during image resizing.\", ex);\n    }\n\n}\n\npublic static byte[] resizeAdjustMax(FileItem fileItem, int maxWidth, int maxHeight) {\n\n    try {\n        BufferedInputStream bis = new BufferedInputStream(fileItem.getInputStream());  \n        BufferedImage bufimg = ImageIO.read(bis);   \n\n        //check size of image \n        int img_width = bufimg.getWidth();\n        int img_height = bufimg.getHeight();\n        if(img_width &gt; maxWidth || img_height &gt; maxHeight) {\n            float factx = (float) img_width / maxWidth;\n            float facty = (float) img_height / maxHeight;\n            float fact = (factx&gt;facty) ? factx : facty;\n            img_width = (int) ((int) img_width / fact);\n            img_height = (int) ((int) img_height / fact);\n        }\n\n        return resize(fileItem,img_width, img_height);\n\n    } catch (Exception ex) {\n        throw new MapsException(\"An error occured during image resizing.\", ex);\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":406441,"reputation":32619,"user_id":775954,"accept_rate":85,"display_name":"Matthias Braun"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1568028928,"creation_date":1442750977,"answer_id":32679235,"question_id":10245220,"body_markdown":"Translated from [here][1]:\r\n\r\n    Dimension getScaledDimension(Dimension imageSize, Dimension boundary) {\r\n\r\n        double widthRatio = boundary.getWidth() / imageSize.getWidth();\r\n        double heightRatio = boundary.getHeight() / imageSize.getHeight();\r\n        double ratio = Math.min(widthRatio, heightRatio);\r\n\r\n        return new Dimension((int) (imageSize.width  * ratio),\r\n                             (int) (imageSize.height * ratio));\r\n    }\r\n\r\nYou can also use [imgscalr][2] to resize images while maintaining aspect ratio:\r\n\r\n    BufferedImage resizeMe = ImageIO.read(new File(&quot;orig.jpg&quot;));\r\n    Dimension newMaxSize = new Dimension(255, 255);\r\n    BufferedImage resizedImg = Scalr.resize(resizeMe, Method.QUALITY,\r\n                                            newMaxSize.width, newMaxSize.height);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio#14731922\r\n  [2]: https://github.com/thebuzzmedia/imgscalr\r\n","title":"Resize image, maintain aspect ratio","body":"<p>Translated from <a href=\"https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio#14731922\">here</a>:</p>\n\n<pre><code>Dimension getScaledDimension(Dimension imageSize, Dimension boundary) {\n\n    double widthRatio = boundary.getWidth() / imageSize.getWidth();\n    double heightRatio = boundary.getHeight() / imageSize.getHeight();\n    double ratio = Math.min(widthRatio, heightRatio);\n\n    return new Dimension((int) (imageSize.width  * ratio),\n                         (int) (imageSize.height * ratio));\n}\n</code></pre>\n\n<p>You can also use <a href=\"https://github.com/thebuzzmedia/imgscalr\" rel=\"noreferrer\">imgscalr</a> to resize images while maintaining aspect ratio:</p>\n\n<pre><code>BufferedImage resizeMe = ImageIO.read(new File(\"orig.jpg\"));\nDimension newMaxSize = new Dimension(255, 255);\nBufferedImage resizedImg = Scalr.resize(resizeMe, Method.QUALITY,\n                                        newMaxSize.width, newMaxSize.height);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8098266,"reputation":1,"user_id":6102055,"display_name":"Michael"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1458702649,"creation_date":1458702649,"answer_id":36169119,"question_id":10245220,"body_markdown":"Just add one more block to Ozzy&#39;s code so the thing looks like this:\r\n\r\n\r\n\r\n    public static Dimension getScaledDimension(Dimension imgSize,Dimension boundary) {\r\n    \r\n        int original_width = imgSize.width;\r\n        int original_height = imgSize.height;\r\n        int bound_width = boundary.width;\r\n        int bound_height = boundary.height;\r\n        int new_width = original_width;\r\n        int new_height = original_height;\r\n    \r\n        // first check if we need to scale width\r\n        if (original_width &gt; bound_width) {\r\n            //scale width to fit\r\n            new_width = bound_width;\r\n            //scale height to maintain aspect ratio\r\n            new_height = (new_width * original_height) / original_width;\r\n        }\r\n    \r\n        // then check if we need to scale even with the new height\r\n        if (new_height &gt; bound_height) {\r\n            //scale height to fit instead\r\n            new_height = bound_height;\r\n            //scale width to maintain aspect ratio\r\n            new_width = (new_height * original_width) / original_height;\r\n        }\r\n        // upscale if original is smaller\r\n        if (original_width &lt; bound_width) {\r\n            //scale width to fit\r\n            new_width = bound_width;\r\n            //scale height to maintain aspect ratio\r\n            new_height = (new_width * original_height) / original_width;\r\n        }\r\n    \r\n        return new Dimension(new_width, new_height);\r\n    }","title":"Resize image, maintain aspect ratio","body":"<p>Just add one more block to Ozzy's code so the thing looks like this:</p>\n\n<pre><code>public static Dimension getScaledDimension(Dimension imgSize,Dimension boundary) {\n\n    int original_width = imgSize.width;\n    int original_height = imgSize.height;\n    int bound_width = boundary.width;\n    int bound_height = boundary.height;\n    int new_width = original_width;\n    int new_height = original_height;\n\n    // first check if we need to scale width\n    if (original_width &gt; bound_width) {\n        //scale width to fit\n        new_width = bound_width;\n        //scale height to maintain aspect ratio\n        new_height = (new_width * original_height) / original_width;\n    }\n\n    // then check if we need to scale even with the new height\n    if (new_height &gt; bound_height) {\n        //scale height to fit instead\n        new_height = bound_height;\n        //scale width to maintain aspect ratio\n        new_width = (new_height * original_width) / original_height;\n    }\n    // upscale if original is smaller\n    if (original_width &lt; bound_width) {\n        //scale width to fit\n        new_width = bound_width;\n        //scale height to maintain aspect ratio\n        new_height = (new_width * original_height) / original_width;\n    }\n\n    return new Dimension(new_width, new_height);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8145482,"reputation":11,"user_id":6134267,"display_name":"Khadzko Aliaksander"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1459335885,"creation_date":1459335885,"answer_id":36306952,"question_id":10245220,"body_markdown":"This is my solution:\r\n\r\n    /*\r\n    Change dimension of Image\r\n    */\r\n    public static Image resizeImage(Image image, int scaledWidth, int scaledHeight, boolean preserveRatio) {  \r\n                     \r\n        if (preserveRatio) { \r\n            double imageHeight = image.getHeight();\r\n            double imageWidth = image.getWidth();\r\n            \r\n            if (imageHeight/scaledHeight &gt; imageWidth/scaledWidth) {\r\n                scaledWidth = (int) (scaledHeight * imageWidth / imageHeight);\r\n            } else {\r\n                scaledHeight = (int) (scaledWidth * imageHeight / imageWidth);\r\n            }        \r\n        }                   \r\n        BufferedImage inputBufImage = SwingFXUtils.fromFXImage(image, null);     \r\n        // creates output image\r\n        BufferedImage outputBufImage = new BufferedImage(scaledWidth, scaledHeight, inputBufImage.getType());       \r\n        // scales the input image to the output image\r\n        Graphics2D g2d = outputBufImage.createGraphics();\r\n        g2d.drawImage(inputBufImage, 0, 0, scaledWidth, scaledHeight, null);\r\n        g2d.dispose();      \r\n        return SwingFXUtils.toFXImage(outputBufImage, null);\r\n    }","title":"Resize image, maintain aspect ratio","body":"<p>This is my solution:</p>\n\n<pre><code>/*\nChange dimension of Image\n*/\npublic static Image resizeImage(Image image, int scaledWidth, int scaledHeight, boolean preserveRatio) {  \n\n    if (preserveRatio) { \n        double imageHeight = image.getHeight();\n        double imageWidth = image.getWidth();\n\n        if (imageHeight/scaledHeight &gt; imageWidth/scaledWidth) {\n            scaledWidth = (int) (scaledHeight * imageWidth / imageHeight);\n        } else {\n            scaledHeight = (int) (scaledWidth * imageHeight / imageWidth);\n        }        \n    }                   \n    BufferedImage inputBufImage = SwingFXUtils.fromFXImage(image, null);     \n    // creates output image\n    BufferedImage outputBufImage = new BufferedImage(scaledWidth, scaledHeight, inputBufImage.getType());       \n    // scales the input image to the output image\n    Graphics2D g2d = outputBufImage.createGraphics();\n    g2d.drawImage(inputBufImage, 0, 0, scaledWidth, scaledHeight, null);\n    g2d.dispose();      \n    return SwingFXUtils.toFXImage(outputBufImage, null);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2815364,"reputation":4577,"user_id":2420599,"display_name":"Gabriel Archanjo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472217377,"creation_date":1472217377,"answer_id":39167273,"question_id":10245220,"body_markdown":"All other answers show how to calculate the new image height in function of the new image width or vice-versa and how to resize the image using Java Image API. For those people who are looking for a straightforward solution I recommend any java image processing framework that can do this in a single line. \r\n\r\nThe exemple below uses [Marvin Framework][1]:\r\n\r\n    // 300 is the new width. The height is calculated to maintain aspect.\r\n    scale(image.clone(), image, 300);\r\n\r\n**Necessary import:**\r\n\r\n    import static marvin.MarvinPluginCollection.*\r\n\r\n\r\n\r\n  [1]: http://marvinproject.sourceforge.net/","title":"Resize image, maintain aspect ratio","body":"<p>All other answers show how to calculate the new image height in function of the new image width or vice-versa and how to resize the image using Java Image API. For those people who are looking for a straightforward solution I recommend any java image processing framework that can do this in a single line. </p>\n\n<p>The exemple below uses <a href=\"http://marvinproject.sourceforge.net/\" rel=\"nofollow\">Marvin Framework</a>:</p>\n\n<pre><code>// 300 is the new width. The height is calculated to maintain aspect.\nscale(image.clone(), image, 300);\n</code></pre>\n\n<p><strong>Necessary import:</strong></p>\n\n<pre><code>import static marvin.MarvinPluginCollection.*\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7893242,"reputation":8350,"user_id":5962766,"accept_rate":87,"display_name":"Justinas Jakavonis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484212473,"creation_date":1484212473,"answer_id":41609124,"question_id":10245220,"body_markdown":"Load image:\r\n\r\n    BufferedImage bufferedImage = ImageIO.read(file);\t\r\n\r\nResize it:\r\n\r\n    private BufferedImage resizeAndCrop(BufferedImage bufferedImage, Integer width, Integer height) {\r\n\r\n\t\tMode mode = (double) width / (double) height &gt;= (double) bufferedImage.getWidth() / (double) bufferedImage.getHeight() ? Scalr.Mode.FIT_TO_WIDTH\r\n\t\t\t\t: Scalr.Mode.FIT_TO_HEIGHT;\r\n\r\n\t\tbufferedImage = Scalr.resize(bufferedImage, Scalr.Method.ULTRA_QUALITY, mode, width, height);\r\n\r\n\t\tint x = 0;\r\n\t\tint y = 0;\r\n\r\n\t\tif (mode == Scalr.Mode.FIT_TO_WIDTH) {\r\n\t\t\ty = (bufferedImage.getHeight() - height) / 2;\r\n\t\t} else if (mode == Scalr.Mode.FIT_TO_HEIGHT) {\r\n\t\t\tx = (bufferedImage.getWidth() - width) / 2;\r\n\t\t}\r\n\r\n\t\tbufferedImage = Scalr.crop(bufferedImage, x, y, width, height);\r\n\r\n\t\treturn bufferedImage;\r\n\t}\r\n\r\nUsing Scalr library:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.imgscalr&lt;/groupId&gt;\r\n        &lt;artifactId&gt;imgscalr-lib&lt;/artifactId&gt;\r\n        &lt;version&gt;4.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Resize image, maintain aspect ratio","body":"<p>Load image:</p>\n\n<pre><code>BufferedImage bufferedImage = ImageIO.read(file);   \n</code></pre>\n\n<p>Resize it:</p>\n\n<pre><code>private BufferedImage resizeAndCrop(BufferedImage bufferedImage, Integer width, Integer height) {\n\n    Mode mode = (double) width / (double) height &gt;= (double) bufferedImage.getWidth() / (double) bufferedImage.getHeight() ? Scalr.Mode.FIT_TO_WIDTH\n            : Scalr.Mode.FIT_TO_HEIGHT;\n\n    bufferedImage = Scalr.resize(bufferedImage, Scalr.Method.ULTRA_QUALITY, mode, width, height);\n\n    int x = 0;\n    int y = 0;\n\n    if (mode == Scalr.Mode.FIT_TO_WIDTH) {\n        y = (bufferedImage.getHeight() - height) / 2;\n    } else if (mode == Scalr.Mode.FIT_TO_HEIGHT) {\n        x = (bufferedImage.getWidth() - width) / 2;\n    }\n\n    bufferedImage = Scalr.crop(bufferedImage, x, y, width, height);\n\n    return bufferedImage;\n}\n</code></pre>\n\n<p>Using Scalr library:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.imgscalr&lt;/groupId&gt;\n    &lt;artifactId&gt;imgscalr-lib&lt;/artifactId&gt;\n    &lt;version&gt;4.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5470089,"reputation":1693,"user_id":4349707,"accept_rate":40,"display_name":"Ohad Navon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503818012,"creation_date":1503818012,"answer_id":45902544,"question_id":10245220,"body_markdown":"I have found the selected answer to have problems with upscaling, and so I have made (yet) another version (which I have tested):\r\n\r\n    public static Point scaleFit(Point src, Point bounds) {\r\n      int newWidth = src.x;\r\n      int newHeight = src.y;\r\n      double boundsAspectRatio = bounds.y / (double) bounds.x;\r\n      double srcAspectRatio = src.y / (double) src.x;\r\n    \r\n      // first check if we need to scale width\r\n      if (boundsAspectRatio &lt; srcAspectRatio) {\r\n        // scale width to fit\r\n        newWidth = bounds.x;\r\n        //scale height to maintain aspect ratio\r\n        newHeight = (newWidth * src.y) / src.x;\r\n      } else {\r\n        //scale height to fit instead\r\n        newHeight = bounds.y;\r\n        //scale width to maintain aspect ratio\r\n        newWidth = (newHeight * src.x) / src.y;\r\n      }\r\n    \r\n      return new Point(newWidth, newHeight);\r\n    }\r\n\r\nWritten in Android terminology :-)\r\n\r\nas for the tests:\r\n\r\n    @Test public void scaleFit() throws Exception {\r\n      final Point displaySize = new Point(1080, 1920);\r\n      assertEquals(displaySize, Util.scaleFit(displaySize, displaySize));\r\n      assertEquals(displaySize, Util.scaleFit(new Point(displaySize.x / 2, displaySize.y / 2), displaySize));\r\n      assertEquals(displaySize, Util.scaleFit(new Point(displaySize.x * 2, displaySize.y * 2), displaySize));\r\n      assertEquals(new Point(displaySize.x, displaySize.y * 2), Util.scaleFit(new Point(displaySize.x / 2, displaySize.y), displaySize));\r\n      assertEquals(new Point(displaySize.x * 2, displaySize.y), Util.scaleFit(new Point(displaySize.x, displaySize.y / 2), displaySize));\r\n      assertEquals(new Point(displaySize.x, displaySize.y * 3 / 2), Util.scaleFit(new Point(displaySize.x / 3, displaySize.y / 2), displaySize));\r\n    }","title":"Resize image, maintain aspect ratio","body":"<p>I have found the selected answer to have problems with upscaling, and so I have made (yet) another version (which I have tested):</p>\n\n<pre><code>public static Point scaleFit(Point src, Point bounds) {\n  int newWidth = src.x;\n  int newHeight = src.y;\n  double boundsAspectRatio = bounds.y / (double) bounds.x;\n  double srcAspectRatio = src.y / (double) src.x;\n\n  // first check if we need to scale width\n  if (boundsAspectRatio &lt; srcAspectRatio) {\n    // scale width to fit\n    newWidth = bounds.x;\n    //scale height to maintain aspect ratio\n    newHeight = (newWidth * src.y) / src.x;\n  } else {\n    //scale height to fit instead\n    newHeight = bounds.y;\n    //scale width to maintain aspect ratio\n    newWidth = (newHeight * src.x) / src.y;\n  }\n\n  return new Point(newWidth, newHeight);\n}\n</code></pre>\n\n<p>Written in Android terminology :-)</p>\n\n<p>as for the tests:</p>\n\n<pre><code>@Test public void scaleFit() throws Exception {\n  final Point displaySize = new Point(1080, 1920);\n  assertEquals(displaySize, Util.scaleFit(displaySize, displaySize));\n  assertEquals(displaySize, Util.scaleFit(new Point(displaySize.x / 2, displaySize.y / 2), displaySize));\n  assertEquals(displaySize, Util.scaleFit(new Point(displaySize.x * 2, displaySize.y * 2), displaySize));\n  assertEquals(new Point(displaySize.x, displaySize.y * 2), Util.scaleFit(new Point(displaySize.x / 2, displaySize.y), displaySize));\n  assertEquals(new Point(displaySize.x * 2, displaySize.y), Util.scaleFit(new Point(displaySize.x, displaySize.y / 2), displaySize));\n  assertEquals(new Point(displaySize.x, displaySize.y * 3 / 2), Util.scaleFit(new Point(displaySize.x / 3, displaySize.y / 2), displaySize));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14995571,"reputation":21,"user_id":10825045,"display_name":"satan97"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1546236893,"creation_date":1546236893,"answer_id":53984195,"question_id":10245220,"body_markdown":" Here&#39;s a small piece of code that I wrote, it resizes the image to fit the container while keeping the image&#39;s original aspect ratio. It takes in as parameters the container&#39;s width, height and the image. You can modify it to fit your needs.\r\nIt&#39;s simple and works fine for my applications.\r\n\r\n    private Image scaleimage(int wid, int hei, BufferedImage img){\r\n        Image im = img;\r\n        double scale;\r\n        double imw = img.getWidth();\r\n        double imh = img.getHeight();\r\n        if (wid &gt; imw &amp;&amp; hei &gt; imh){\r\n            im = img;\r\n        }else if(wid/imw &lt; hei/imh){\r\n            scale = wid/imw;\r\n            im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);\r\n        }else if (wid/imw &gt; hei/imh){\r\n            scale = hei/imh;\r\n            im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);\r\n        }else if (wid/imw == hei/imh){\r\n            scale = wid/imw;\r\n            im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);\r\n        } \r\n        return im;\r\n    }\r\n    ","title":"Resize image, maintain aspect ratio","body":"<p>Here's a small piece of code that I wrote, it resizes the image to fit the container while keeping the image's original aspect ratio. It takes in as parameters the container's width, height and the image. You can modify it to fit your needs.\nIt's simple and works fine for my applications.</p>\n\n<pre><code>private Image scaleimage(int wid, int hei, BufferedImage img){\n    Image im = img;\n    double scale;\n    double imw = img.getWidth();\n    double imh = img.getHeight();\n    if (wid &gt; imw &amp;&amp; hei &gt; imh){\n        im = img;\n    }else if(wid/imw &lt; hei/imh){\n        scale = wid/imw;\n        im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);\n    }else if (wid/imw &gt; hei/imh){\n        scale = hei/imh;\n        im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);\n    }else if (wid/imw == hei/imh){\n        scale = wid/imw;\n        im = img.getScaledInstance((int) (scale*imw), (int) (scale*imh), Image.SCALE_SMOOTH);\n    } \n    return im;\n}\n</code></pre>\n"}],"owner":{"account_id":978824,"reputation":3408,"user_id":1004978,"accept_rate":91,"display_name":"Fofole"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131492,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":10245583,"answer_count":11,"score":77,"last_activity_date":1671042441,"creation_date":1334920844,"question_id":10245220,"body_markdown":"I have an image which I resize:\r\n\r\n    if((width != null) || (height != null))\r\n    {\r\n        try{\r\n            // Scale image on disk\r\n            BufferedImage originalImage = ImageIO.read(file);\r\n            int type = originalImage.getType() == 0 ? BufferedImage.TYPE_INT_ARGB\r\n                                                    : originalImage.getType();\r\n\r\n            BufferedImage resizedImageJpg = resizeImage(originalImage, type, 200, 200);\r\n            ImageIO.write(resizedImageJpg, &quot;jpg&quot;, file); \r\n\r\n           } catch(IOException e) {\r\n               System.out.println(e.getMessage());\r\n           }\r\n    }\r\n\r\nThis is how I resize the image:\r\n\r\n    private static BufferedImage resizeImage(BufferedImage originalImage, int type,\r\n                                             Integer imgWidth, Integer imgHeight)\r\n    {\r\n        var resizedImage = new BufferedImage(imgWidth, imgHeight, type);\r\n        Graphics2D g = resizedImage.createGraphics();\r\n        g.drawImage(originalImage, 0, 0, imgWidth, imgHeight, null);\r\n        g.dispose();\r\n\r\n        return resizedImage;\r\n    }\r\n\r\nNow the problem is, I also need to maintain aspect ratio. That is, I need the new 200/200 image to contain the new image scaled. Something like this:\r\n![enter image description here][1]\r\n\r\nI tried some things but they didn&#39;t work out as expected.\r\nAny help is appreciated.\r\n\r\n  [1]: https://i.stack.imgur.com/ZoXYs.jpg\r\n","title":"Resize image, maintain aspect ratio","body":"<p>I have an image which I resize:</p>\n<pre><code>if((width != null) || (height != null))\n{\n    try{\n        // Scale image on disk\n        BufferedImage originalImage = ImageIO.read(file);\n        int type = originalImage.getType() == 0 ? BufferedImage.TYPE_INT_ARGB\n                                                : originalImage.getType();\n\n        BufferedImage resizedImageJpg = resizeImage(originalImage, type, 200, 200);\n        ImageIO.write(resizedImageJpg, &quot;jpg&quot;, file); \n\n       } catch(IOException e) {\n           System.out.println(e.getMessage());\n       }\n}\n</code></pre>\n<p>This is how I resize the image:</p>\n<pre><code>private static BufferedImage resizeImage(BufferedImage originalImage, int type,\n                                         Integer imgWidth, Integer imgHeight)\n{\n    var resizedImage = new BufferedImage(imgWidth, imgHeight, type);\n    Graphics2D g = resizedImage.createGraphics();\n    g.drawImage(originalImage, 0, 0, imgWidth, imgHeight, null);\n    g.dispose();\n\n    return resizedImage;\n}\n</code></pre>\n<p>Now the problem is, I also need to maintain aspect ratio. That is, I need the new 200/200 image to contain the new image scaled. Something like this:\n<img src=\"https://i.stack.imgur.com/ZoXYs.jpg\" alt=\"enter image description here\" /></p>\n<p>I tried some things but they didn't work out as expected.\nAny help is appreciated.</p>\n"},{"tags":["python","java","html","pyvis"],"owner":{"account_id":20683211,"reputation":161,"user_id":15186292,"display_name":"TomasC8"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671042237,"creation_date":1671042237,"question_id":74802720,"body_markdown":"I&#39;m creating a network visualization in python using Pyvis. I can create the graph as I want with no problem, but when I run my script and get the html file as output, I want the nodes to change colors when I click on them and I can&#39;t achieve that. I&#39;ve tried a lot of things and nothing seems to work. The data I&#39;m using has the following structure but with a lot more nodes than this:\r\n\r\n```\r\nimport pandas as pd\r\nfrom pyvis.network import Network\r\n\r\ndata = [[&#39;A&#39;,&#39;B&#39;, 1], [&#39;A&#39;,&#39;C&#39;, 4], [&#39;B&#39;,&#39;A&#39;, 1], \r\n        [&#39;D&#39;,&#39;E&#39;, 5], [&#39;D&#39;,&#39;F&#39;, 1], [&#39;G&#39;,&#39;J&#39;, 7],\r\n        [&#39;A&#39;,&#39;J&#39;, 4], [&#39;G&#39;,&#39;F&#39;, 14], [&#39;C&#39;,&#39;L&#39;, 4], \r\n        [&#39;A&#39;,&#39;F&#39;, 2], [&#39;E&#39;,&#39;H&#39;, 12], [&#39;I&#39;,&#39;E&#39;, 2],\r\n        [&#39;I&#39;,&#39;K&#39;, 4], [&#39;L&#39;,&#39;H&#39;, 21]]\r\n\r\ndf = pd.DataFrame(data, columns=[&#39;source&#39;, &#39;target&#39;, &#39;feature_count&#39;]\r\n\r\n# Step 1: Initialize Network\r\ngraph = Network(height=&#39;750px&#39;, width=&#39;100%&#39;, directed=True)\r\n\r\n# Step 2: Get sources, targets and weights\r\nsources = df[&#39;source&#39;]\r\ntargets = df[&#39;targets&#39;]\r\nweights = df[&#39;feature_count&#39;]\r\n\r\nedge_data = zip(sources, targets, weights)\r\n\r\n# Step 3: Create the graph adding each node individually.\r\nfor edge in edge_data:  \r\n    source_name = edge[0]\r\n    target_name = edge[1]\r\n    weight = edge[2]\r\n\r\n    graph.add_node(n_id=source_name, label=source_name, labelHighlightBold=True)\r\n    graph.add_node(n_id=target_name, label=target_name, labelHighlightBold=True)\r\n    graph.add_edge(source_name, target_name, value=weight, title=weight, arrowStrikethrough=False)\r\n\r\n# Step 4: Use the Json Dictionary that sets the options to specify that I want the color of the node to change to red when clicked on\r\noptions = {\r\n    &quot;configure&quot;: {\r\n         &quot;enabled&quot;: True\r\n     },\r\n    &quot;interaction&quot;: {\r\n        &quot;hover&quot;: True\r\n    },\r\n    &quot;nodes&quot;: {\r\n         &quot;borderWidth&quot;: 2,\r\n         &quot;borderWidthSelected&quot;: 4,\r\n         &quot;chosen&quot; : True,\r\n         &quot;color&quot;: { &quot;highlight&quot;: { &quot;border&quot;: &quot;#FF4040&quot;,\r\n                                   &quot;background&quot;: &quot;#EE3B3B&quot;\r\n                     },\r\n                    &quot;hover&quot;: { &quot;border&quot;: &quot;#DEB887&quot;,\r\n                               &quot;background&quot;: &quot;#FFD39B&quot;\r\n                     }\r\n         }\r\n     }\r\n}\r\n\r\n# Step 5: Define the options\r\ngraph.options = options\r\n\r\n\r\n# Step 6: Visualize the Network\r\ngraph.show(&#39;graph.html&#39;)\r\n```\r\n\r\nFor some reason this doesn&#39;t work. I&#39;ve been searching for other possible solutions and I can&#39;t find them. It seems that the only thing left would be to create a function In Java that makes this and pass it to the html code. The thing is I don&#39;t know Java and I&#39;m afraid to spend a lot of time trying that without getting to a solution or having another solution more quickly. \r\n\r\nAny ideas ?\r\n\r\nThanks!\r\n","title":"Change color of the node in Pyvis Network when it gets clicked on","body":"<p>I'm creating a network visualization in python using Pyvis. I can create the graph as I want with no problem, but when I run my script and get the html file as output, I want the nodes to change colors when I click on them and I can't achieve that. I've tried a lot of things and nothing seems to work. The data I'm using has the following structure but with a lot more nodes than this:</p>\n<pre><code>import pandas as pd\nfrom pyvis.network import Network\n\ndata = [['A','B', 1], ['A','C', 4], ['B','A', 1], \n        ['D','E', 5], ['D','F', 1], ['G','J', 7],\n        ['A','J', 4], ['G','F', 14], ['C','L', 4], \n        ['A','F', 2], ['E','H', 12], ['I','E', 2],\n        ['I','K', 4], ['L','H', 21]]\n\ndf = pd.DataFrame(data, columns=['source', 'target', 'feature_count']\n\n# Step 1: Initialize Network\ngraph = Network(height='750px', width='100%', directed=True)\n\n# Step 2: Get sources, targets and weights\nsources = df['source']\ntargets = df['targets']\nweights = df['feature_count']\n\nedge_data = zip(sources, targets, weights)\n\n# Step 3: Create the graph adding each node individually.\nfor edge in edge_data:  \n    source_name = edge[0]\n    target_name = edge[1]\n    weight = edge[2]\n\n    graph.add_node(n_id=source_name, label=source_name, labelHighlightBold=True)\n    graph.add_node(n_id=target_name, label=target_name, labelHighlightBold=True)\n    graph.add_edge(source_name, target_name, value=weight, title=weight, arrowStrikethrough=False)\n\n# Step 4: Use the Json Dictionary that sets the options to specify that I want the color of the node to change to red when clicked on\noptions = {\n    &quot;configure&quot;: {\n         &quot;enabled&quot;: True\n     },\n    &quot;interaction&quot;: {\n        &quot;hover&quot;: True\n    },\n    &quot;nodes&quot;: {\n         &quot;borderWidth&quot;: 2,\n         &quot;borderWidthSelected&quot;: 4,\n         &quot;chosen&quot; : True,\n         &quot;color&quot;: { &quot;highlight&quot;: { &quot;border&quot;: &quot;#FF4040&quot;,\n                                   &quot;background&quot;: &quot;#EE3B3B&quot;\n                     },\n                    &quot;hover&quot;: { &quot;border&quot;: &quot;#DEB887&quot;,\n                               &quot;background&quot;: &quot;#FFD39B&quot;\n                     }\n         }\n     }\n}\n\n# Step 5: Define the options\ngraph.options = options\n\n\n# Step 6: Visualize the Network\ngraph.show('graph.html')\n</code></pre>\n<p>For some reason this doesn't work. I've been searching for other possible solutions and I can't find them. It seems that the only thing left would be to create a function In Java that makes this and pass it to the html code. The thing is I don't know Java and I'm afraid to spend a lot of time trying that without getting to a solution or having another solution more quickly.</p>\n<p>Any ideas ?</p>\n<p>Thanks!</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6098078,"reputation":28937,"user_id":4758255,"display_name":"ישו אוהב אותך"},"score":0,"creation_date":1521529889,"post_id":49331411,"comment_id":85757039,"body_markdown":"Why did you want to change to version `23` ?","body":"Why did you want to change to version <code>23</code> ?"},{"owner":{"account_id":542542,"reputation":1950,"user_id":911408,"accept_rate":38,"display_name":"Vladimir Vlasov"},"score":0,"creation_date":1541681778,"post_id":49331411,"comment_id":93304314,"body_markdown":"I tried various workarounds but only [this one](https://stackoverflow.com/a/51508579/911408) helped me.","body":"I tried various workarounds but only <a href=\"https://stackoverflow.com/a/51508579/911408\">this one</a> helped me."},{"owner":{"account_id":7268394,"reputation":1726,"user_id":5542309,"display_name":"Navneet kumar"},"score":0,"creation_date":1549735423,"post_id":49331411,"comment_id":96013021,"body_markdown":"[if you are here with a react-native project please go here :](https://stackoverflow.com/questions/50574492/react-native-error-resource-androidstyle-textappearance-material-widget-butto)","body":"<a href=\"https://stackoverflow.com/questions/50574492/react-native-error-resource-androidstyle-textappearance-material-widget-butto\">if you are here with a react-native project please go here :</a>"},{"owner":{"account_id":7268394,"reputation":1726,"user_id":5542309,"display_name":"Navneet kumar"},"score":0,"creation_date":1549735510,"post_id":49331411,"comment_id":96013055,"body_markdown":"if you are here because of a react-native project please check [ this](https://stackoverflow.com/questions/50574492/react-native-error-resource-androidstyle-textappearance-material-widget-butto)","body":"if you are here because of a react-native project please check [ this](<a href=\"https://stackoverflow.com/questions/50574492/react-native-error-resource-androidstyle-textappearance-material-widget-butto\" title=\"react native error resource androidstyle textappearance material widget butto\">stackoverflow.com/questions/50574492/&hellip;</a>)"},{"owner":{"account_id":2236390,"reputation":502,"user_id":1972657,"display_name":"SChalice"},"score":0,"creation_date":1551410623,"post_id":49331411,"comment_id":96638843,"body_markdown":"The DJI UX SDK requires &gt;= 24 due to this issue. But because the included ffmpeg 0x86 library cannot deal with an SDK &gt; 23 this will not compile. Apparently the DJI UX SDK  needs a rewrite and the supported mpeg lib needs an upgrade.","body":"The DJI UX SDK requires &gt;= 24 due to this issue. But because the included ffmpeg 0x86 library cannot deal with an SDK &gt; 23 this will not compile. Apparently the DJI UX SDK  needs a rewrite and the supported mpeg lib needs an upgrade."}],"answers":[{"tags":[],"owner":{"account_id":13004715,"reputation":968,"user_id":9399618,"display_name":"Meow Cat 2012"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1521520372,"creation_date":1521257042,"answer_id":49332191,"question_id":49331411,"body_markdown":"android:style/TextAppearance.Material.Widget.Button.Borderless.Colored was added in API 24 so you can&#39;t use it with version 23. You can use a style that was added before version 23. You can also apply new styles to newer-versioned devices and apply an old style as a default: https://developer.android.com/guide/topics/ui/look-and-feel/themes.html#Versions\r\n\r\n**Added**  03/20/&#39;18 12:32\r\n\r\nAs you&#39;re not familiar with Android, a simple solution is to just use an older text appearance. This at least makes the app working on your Android 5 device. Afterwards you can learn about how to further customize the TextView, but for now let&#39;s just make it work.  \r\n\r\n 1. The appearance of text may be set for a certain TextView within a layout file, located at [something]/res/layout/xxx.xml, which the &quot;layout&quot; could also be &quot;layout-xxx&quot;. \r\n 2. It may be set within a style file, located at [something]/res/values/styles.xml, &quot;values&quot; may also be &quot;values-xxx&quot;. \r\n\r\nfolder &quot;res&quot; can be easily found from the project tree in Android Studio.  \r\nYou can also use **Ctrl+Shift+F** to search in whole project.  \r\nWhen you find it, just delete or comment the line.","title":"Error:resource android:style/TextAppearance.Material.Widget.Button.Borderless.Colored not found","body":"<p>android:style/TextAppearance.Material.Widget.Button.Borderless.Colored was added in API 24 so you can't use it with version 23. You can use a style that was added before version 23. You can also apply new styles to newer-versioned devices and apply an old style as a default: <a href=\"https://developer.android.com/guide/topics/ui/look-and-feel/themes.html#Versions\" rel=\"noreferrer\">https://developer.android.com/guide/topics/ui/look-and-feel/themes.html#Versions</a></p>\n\n<p><strong>Added</strong>  03/20/'18 12:32</p>\n\n<p>As you're not familiar with Android, a simple solution is to just use an older text appearance. This at least makes the app working on your Android 5 device. Afterwards you can learn about how to further customize the TextView, but for now let's just make it work.  </p>\n\n<ol>\n<li>The appearance of text may be set for a certain TextView within a layout file, located at [something]/res/layout/xxx.xml, which the \"layout\" could also be \"layout-xxx\". </li>\n<li>It may be set within a style file, located at [something]/res/values/styles.xml, \"values\" may also be \"values-xxx\". </li>\n</ol>\n\n<p>folder \"res\" can be easily found from the project tree in Android Studio.<br>\nYou can also use <strong>Ctrl+Shift+F</strong> to search in whole project.<br>\nWhen you find it, just delete or comment the line.</p>\n"},{"tags":[],"owner":{"account_id":7476401,"reputation":19,"user_id":5992616,"display_name":"hoor shin haye"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1534666192,"creation_date":1534666192,"answer_id":51915717,"question_id":49331411,"body_markdown":"Check &quot;style.xml&quot; file &amp; you see errors are highlighted.  Change App theme color in following:\r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;\r\n    &lt;style name=&quot;AppTheme.AppBarOverlay&quot; parent=&quot;ThemeOverlay.AppCompat.Dark.ActionBar&quot; /&gt;\r\n","title":"Error:resource android:style/TextAppearance.Material.Widget.Button.Borderless.Colored not found","body":"<p>Check \"style.xml\" file &amp; you see errors are highlighted.  Change App theme color in following:</p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.DarkActionBar\"&gt;\n&lt;style name=\"AppTheme.AppBarOverlay\" parent=\"ThemeOverlay.AppCompat.Dark.ActionBar\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5055015,"reputation":800,"user_id":4058506,"accept_rate":83,"display_name":"Gowthaman"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1561032191,"creation_date":1561032191,"answer_id":56685569,"question_id":49331411,"body_markdown":"**Issue:** \r\nThe colorError is supported in android 26 or higher and this package is on 23, However the package might be in the lower version. \r\n\r\n**Solution:**\r\n\r\nAdd the following code in build.gradle.\r\nplace this inside allprojects {\r\n\r\n    // force libs to use recent buildtools\r\n    // https://github.com/luggit/react-native-config/issues/299\r\n    subprojects {\r\n        afterEvaluate {\r\n            project -&gt;\r\n                if (project.hasProperty(&quot;android&quot;)) {\r\n                    android {\r\n                        compileSdkVersion = 27\r\n                        buildToolsVersion = &quot;27.0.3&quot;\r\n                    }\r\n                }\r\n        }\r\n    }","title":"Error:resource android:style/TextAppearance.Material.Widget.Button.Borderless.Colored not found","body":"<p><strong>Issue:</strong> \nThe colorError is supported in android 26 or higher and this package is on 23, However the package might be in the lower version. </p>\n\n<p><strong>Solution:</strong></p>\n\n<p>Add the following code in build.gradle.\nplace this inside allprojects {</p>\n\n<pre><code>// force libs to use recent buildtools\n// https://github.com/luggit/react-native-config/issues/299\nsubprojects {\n    afterEvaluate {\n        project -&gt;\n            if (project.hasProperty(\"android\")) {\n                android {\n                    compileSdkVersion = 27\n                    buildToolsVersion = \"27.0.3\"\n                }\n            }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18351566,"reputation":1,"user_id":13365619,"display_name":"Rodrigo Bina"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671041882,"creation_date":1670720378,"answer_id":74757657,"question_id":49331411,"body_markdown":"just replace this: \r\n\r\n    @android:style/TextAppearance.Material.Widget.Button.Borderless.Colored\r\n\r\nfor this:\r\n    \r\n    @android:style/Widget.Material.Button.Borderless.Colored","title":"Error:resource android:style/TextAppearance.Material.Widget.Button.Borderless.Colored not found","body":"<p>just replace this:</p>\n<pre><code>@android:style/TextAppearance.Material.Widget.Button.Borderless.Colored\n</code></pre>\n<p>for this:</p>\n<pre><code>@android:style/Widget.Material.Button.Borderless.Colored\n</code></pre>\n"}],"owner":{"account_id":4765350,"reputation":5368,"user_id":3851580,"accept_rate":69,"display_name":"Varun Naharia"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51559,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"answer_count":4,"score":30,"last_activity_date":1671041882,"creation_date":1521247953,"question_id":49331411,"body_markdown":"I am trying to build a project that has compileSdkVersion 25 and targetSdkVersion 25 but I need to change both to 23 so after changing  compileSdkVersion 23 and targetSdkVersion 23 I am getting an error \r\n\r\n&gt;  Error:resource\r\n&gt; android:style/TextAppearance.Material.Widget.Button.Borderless.Colored\r\n&gt; not found. Error:resource\r\n&gt; android:style/TextAppearance.Material.Widget.Button.Colored not found.\r\n&gt; Error:failed linking references.\r\n&gt; Error:java.util.concurrent.ExecutionException:\r\n&gt; java.util.concurrent.ExecutionException:\r\n&gt; com.android.tools.aapt2.Aapt2Exception: AAPT2 error: check logs for\r\n&gt; details Error:java.util.concurrent.ExecutionException:\r\n&gt; com.android.tools.aapt2.Aapt2Exception: AAPT2 error: check logs for\r\n&gt; details Error:com.android.tools.aapt2.Aapt2Exception: AAPT2 error:\r\n&gt; check logs for details Error:Execution failed for task\r\n&gt; &#39;:app:processDebugResources&#39;.\r\n&gt; &gt; Failed to execute aapt\r\n\r\n[![enter image description here][1]][1] \r\n\r\nI am an iOS developer and doesn&#39;t have much experience in Android, I am unable to find where this error point in code and how to fix.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YkdbV.png\r\n\r\n**Edit: 1**\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 23\r\n        buildToolsVersion &#39;26.0.2&#39;\r\n        defaultConfig {\r\n            applicationId &#39;com.abc.app&#39;\r\n            minSdkVersion 21\r\n            targetSdkVersion 23\r\n            versionCode 4\r\n            versionName &#39;1.3&#39;\r\n            testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n            buildConfigField(&quot;String&quot;, &quot;API_KEY&quot;, &quot;\\&quot;empty\\&quot;&quot;)\r\n            //buildConfigField(&quot;String&quot;, &quot;API_KEY&quot;, API_KEY)\r\n        }\r\n        packagingOptions {\r\n            exclude &#39;META-INF/DEPENDENCIES.txt&#39;\r\n            exclude &#39;META-INF/LICENSE.txt&#39;\r\n            exclude &#39;META-INF/NOTICE.txt&#39;\r\n            exclude &#39;META-INF/NOTICE&#39;\r\n            exclude &#39;META-INF/LICENSE&#39;\r\n            exclude &#39;META-INF/DEPENDENCIES&#39;\r\n            exclude &#39;META-INF/notice.txt&#39;\r\n            exclude &#39;META-INF/license.txt&#39;\r\n            exclude &#39;META-INF/dependencies.txt&#39;\r\n            exclude &#39;META-INF/LGPL2.1&#39;\r\n            exclude &#39;META-INF/services/com.fasterxml.jackson.core.ObjectCodec&#39;\r\n            exclude &#39;META-INF/services/com.fasterxml.jackson.core.JsonFactory&#39;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        productFlavors {\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n        androidTestImplementation(&#39;com.android.support.test.espresso:espresso-core:2.2.2&#39;, {\r\n            exclude group: &#39;com.android.support&#39;, module: &#39;support-annotations&#39;\r\n        })\r\n        implementation &#39;com.wang.avi:library:2.1.3&#39;\r\n        implementation &#39;com.android.support:appcompat-v7:25.4.0&#39;\r\n        implementation &#39;com.android.support:customtabs:25.4.0&#39;\r\n        implementation &#39;com.android.support:cardview-v7:25.4.0&#39;\r\n        implementation &#39;com.nex3z:toggle-button-group:1.1.2&#39;\r\n        implementation &#39;com.github.ivbaranov:materialfavoritebutton:0.1.4&#39;\r\n        implementation &#39;com.android.support:design:25.4.0&#39;\r\n        implementation &#39;com.android.volley:volley:1.0.0&#39;\r\n        implementation &#39;com.github.PhilJay:MPAndroidChart:v3.0.2&#39;\r\n        implementation &#39;com.yqritc:recyclerview-flexibledivider:1.2.9&#39;\r\n        implementation &#39;com.android.support.constraint:constraint-layout:1.0.2&#39;\r\n        implementation &#39;com.squareup.picasso:picasso:2.5.2&#39;\r\n        implementation &#39;com.google.code.gson:gson:2.8.1&#39;\r\n        implementation &#39;com.github.bumptech.glide:glide:4.3.1&#39;\r\n        implementation &#39;com.google.android.gms:play-services-ads:11.8.0&#39;\r\n        annotationProcessor &#39;com.github.bumptech.glide:compiler:4.3.1&#39;\r\n        implementation(&#39;com.github.fcopardo:easyrest:v1.4.2@aar&#39;) {\r\n            transitive = true\r\n        }\r\n        //    compile &#39;com.github.wrdlbrnft:sorted-list-adapter:0.3.0.27&#39;\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n    }\r\n\r\n","title":"Error:resource android:style/TextAppearance.Material.Widget.Button.Borderless.Colored not found","body":"<p>I am trying to build a project that has compileSdkVersion 25 and targetSdkVersion 25 but I need to change both to 23 so after changing  compileSdkVersion 23 and targetSdkVersion 23 I am getting an error </p>\n\n<blockquote>\n  <p>Error:resource\n  android:style/TextAppearance.Material.Widget.Button.Borderless.Colored\n  not found. Error:resource\n  android:style/TextAppearance.Material.Widget.Button.Colored not found.\n  Error:failed linking references.\n  Error:java.util.concurrent.ExecutionException:\n  java.util.concurrent.ExecutionException:\n  com.android.tools.aapt2.Aapt2Exception: AAPT2 error: check logs for\n  details Error:java.util.concurrent.ExecutionException:\n  com.android.tools.aapt2.Aapt2Exception: AAPT2 error: check logs for\n  details Error:com.android.tools.aapt2.Aapt2Exception: AAPT2 error:\n  check logs for details Error:Execution failed for task\n  ':app:processDebugResources'.</p>\n  \n  <blockquote>\n    <p>Failed to execute aapt</p>\n  </blockquote>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/YkdbV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YkdbV.png\" alt=\"enter image description here\"></a> </p>\n\n<p>I am an iOS developer and doesn't have much experience in Android, I am unable to find where this error point in code and how to fix.</p>\n\n<p><strong>Edit: 1</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion '26.0.2'\n    defaultConfig {\n        applicationId 'com.abc.app'\n        minSdkVersion 21\n        targetSdkVersion 23\n        versionCode 4\n        versionName '1.3'\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        buildConfigField(\"String\", \"API_KEY\", \"\\\"empty\\\"\")\n        //buildConfigField(\"String\", \"API_KEY\", API_KEY)\n    }\n    packagingOptions {\n        exclude 'META-INF/DEPENDENCIES.txt'\n        exclude 'META-INF/LICENSE.txt'\n        exclude 'META-INF/NOTICE.txt'\n        exclude 'META-INF/NOTICE'\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/DEPENDENCIES'\n        exclude 'META-INF/notice.txt'\n        exclude 'META-INF/license.txt'\n        exclude 'META-INF/dependencies.txt'\n        exclude 'META-INF/LGPL2.1'\n        exclude 'META-INF/services/com.fasterxml.jackson.core.ObjectCodec'\n        exclude 'META-INF/services/com.fasterxml.jackson.core.JsonFactory'\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    productFlavors {\n    }\n}\n\ndependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    androidTestImplementation('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    implementation 'com.wang.avi:library:2.1.3'\n    implementation 'com.android.support:appcompat-v7:25.4.0'\n    implementation 'com.android.support:customtabs:25.4.0'\n    implementation 'com.android.support:cardview-v7:25.4.0'\n    implementation 'com.nex3z:toggle-button-group:1.1.2'\n    implementation 'com.github.ivbaranov:materialfavoritebutton:0.1.4'\n    implementation 'com.android.support:design:25.4.0'\n    implementation 'com.android.volley:volley:1.0.0'\n    implementation 'com.github.PhilJay:MPAndroidChart:v3.0.2'\n    implementation 'com.yqritc:recyclerview-flexibledivider:1.2.9'\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    implementation 'com.squareup.picasso:picasso:2.5.2'\n    implementation 'com.google.code.gson:gson:2.8.1'\n    implementation 'com.github.bumptech.glide:glide:4.3.1'\n    implementation 'com.google.android.gms:play-services-ads:11.8.0'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.3.1'\n    implementation('com.github.fcopardo:easyrest:v1.4.2@aar') {\n        transitive = true\n    }\n    //    compile 'com.github.wrdlbrnft:sorted-list-adapter:0.3.0.27'\n    testImplementation 'junit:junit:4.12'\n}\n</code></pre>\n"},{"tags":["java","spring","grpc","jaeger","opentracing"],"owner":{"account_id":19117595,"reputation":61,"user_id":13962184,"display_name":"Deus Asakura"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":691,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671041874,"creation_date":1671041874,"question_id":74802667,"body_markdown":"I have 2 applications communicating via grps.\r\nWhen I try to send a span context, I always get null in ***extracted***.\r\n```\r\nMap&lt;String, String&gt; tracingMetadata = new HashMap&lt;&gt;();\r\n        tracingMetadata.put(&quot;trace-id&quot;, traceId);\r\n        tracingMetadata.put(&quot;span-id&quot;, spanId);\r\nSpanContext extracted = tracer.extract(Format.Builtin.TEXT_MAP, new TextMapAdapter(tracingMetadata));\r\n```\r\nTherefore, I send it via metadata in ClientIntercaptor like that.\r\n```\r\n    return new ForwardingClientCall.SimpleForwardingClientCall&lt;ReqT, RespT&gt;(\r\n        next.newCall(method, callOptions)) {\r\n      @Override\r\n      public void start(Listener&lt;RespT&gt; responseListener, Metadata headers) {\r\n        headers.put(Metadata.Key.of(&quot;trace-id&quot;, Metadata.ASCII_STRING_MARSHALLER), traceId);\r\n        headers.put(Metadata.Key.of(&quot;span-id&quot;, Metadata.ASCII_STRING_MARSHALLER), spanId);\r\n...\r\n```\r\n\r\nWhen I try to create a context span from this data, it either talks about incompatible types, or context doesn&#39;t change. In ***pre*** and ***after*** equal context.\r\n```\r\nprivate void injectParentContext(Span span) {\r\n    final String traceId = HeadersServerInterceptor.getTraceIdHeader();\r\n    final String spanId = HeadersServerInterceptor.getSpanIdHeader();\r\n\r\n    final Map&lt;String, String&gt; contextValues = new HashMap&lt;&gt;();\r\n    contextValues.put(&quot;x-b3-trace-id&quot;, traceId);\r\n    contextValues.put(&quot;x-b3-spanid&quot;, spanId);\r\n\r\n    final SpanContext pre=span.context();\r\n\r\n    tracer.inject(span.context(), Format.Builtin.TEXT_MAP, new TextMapAdapter(contextValues));\r\n\r\n    final SpanContext after=  span.context();\r\n  }\r\n```\r\nI tried different ***Format.Builtin*** and ***Adapter***, nothing works.  \r\nWhat am I doing wrong?","title":"Opentracing proper way to inject/extract span context","body":"<p>I have 2 applications communicating via grps.\nWhen I try to send a span context, I always get null in <em><strong>extracted</strong></em>.</p>\n<pre><code>Map&lt;String, String&gt; tracingMetadata = new HashMap&lt;&gt;();\n        tracingMetadata.put(&quot;trace-id&quot;, traceId);\n        tracingMetadata.put(&quot;span-id&quot;, spanId);\nSpanContext extracted = tracer.extract(Format.Builtin.TEXT_MAP, new TextMapAdapter(tracingMetadata));\n</code></pre>\n<p>Therefore, I send it via metadata in ClientIntercaptor like that.</p>\n<pre><code>    return new ForwardingClientCall.SimpleForwardingClientCall&lt;ReqT, RespT&gt;(\n        next.newCall(method, callOptions)) {\n      @Override\n      public void start(Listener&lt;RespT&gt; responseListener, Metadata headers) {\n        headers.put(Metadata.Key.of(&quot;trace-id&quot;, Metadata.ASCII_STRING_MARSHALLER), traceId);\n        headers.put(Metadata.Key.of(&quot;span-id&quot;, Metadata.ASCII_STRING_MARSHALLER), spanId);\n...\n</code></pre>\n<p>When I try to create a context span from this data, it either talks about incompatible types, or context doesn't change. In <em><strong>pre</strong></em> and <em><strong>after</strong></em> equal context.</p>\n<pre><code>private void injectParentContext(Span span) {\n    final String traceId = HeadersServerInterceptor.getTraceIdHeader();\n    final String spanId = HeadersServerInterceptor.getSpanIdHeader();\n\n    final Map&lt;String, String&gt; contextValues = new HashMap&lt;&gt;();\n    contextValues.put(&quot;x-b3-trace-id&quot;, traceId);\n    contextValues.put(&quot;x-b3-spanid&quot;, spanId);\n\n    final SpanContext pre=span.context();\n\n    tracer.inject(span.context(), Format.Builtin.TEXT_MAP, new TextMapAdapter(contextValues));\n\n    final SpanContext after=  span.context();\n  }\n</code></pre>\n<p>I tried different <em><strong>Format.Builtin</strong></em> and <em><strong>Adapter</strong></em>, nothing works.<br />\nWhat am I doing wrong?</p>\n"},{"tags":["java","kotlin","constants"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1670984292,"post_id":74792904,"comment_id":131997606,"body_markdown":"If all of the constants are `String` constants, then they are cached in the `String` intern pool regardless. The `companion` is conceptually cleaner, but in practice I doubt it matters at all.","body":"If all of the constants are <code>String</code> constants, then they are cached in the <code>String</code> intern pool regardless. The <code>companion</code> is conceptually cleaner, but in practice I doubt it matters at all."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1670989576,"post_id":74792904,"comment_id":131998343,"body_markdown":"Is the constant supposed to be visible outside the Kotlin file? If not, just declare it as a top level item: `val MY_CONST = &quot;...&quot;`","body":"Is the constant supposed to be visible outside the Kotlin file? If not, just declare it as a top level item: <code>val MY_CONST = &quot;...&quot;</code>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670989237,"creation_date":1670985940,"answer_id":74793058,"question_id":74792904,"body_markdown":"&gt; BUT If I have 100 or more contacts in one class all static, when they are released? \r\n\r\nYou&#39;re going to write the info of 100 contacts in a source file? That&#39;s.. generally not where such data is supposed to go, but okay. 100.\r\n\r\nYou know what? That&#39;s bush league. Let&#39;s make it 10,000 contacts, all written out in one gigantic kotlin or java file.\r\n\r\nIt&#39;s still peanuts, memory wise. What&#39;s the share of a penny compared to the GDP of the world? Something along those lines. Whenever you load a class file, that&#39;s in memory. And is never getting released. And it doesn&#39;t matter one iota.\r\n\r\nAll those constant values are part of the class def and are loaded at least once in that sense no matter what you do.\r\n\r\nThe correct way is obviously for static data (i.e. things that are inherent to the class and do not ever change) to be loaded once precisely, instead of &#39;x times, where x is the amount of instances&#39;. It&#39;s semantically correct (by its nature, unchanging, class-global stuff is `static`, that&#39;s what static means), and increments the &#39;load&#39; of the fact that this class has been touched by a few percentage points (you&#39;re just adding references; all those strings are loaded only once and are loaded whether you make this stuff static or not, it&#39;s part of the class definition. Where do you imagine those strings go if there are 0 instances? JVM is not going to reload that class file from disk every time you call `new Foo()`!) - whereas if it&#39;s once-per-instance you might be looking at millions of refs for no reason at all.\r\n","title":"What&#39;s the best way to declare a constant in Kotlin?","body":"<blockquote>\n<p>BUT If I have 100 or more contacts in one class all static, when they are released?</p>\n</blockquote>\n<p>You're going to write the info of 100 contacts in a source file? That's.. generally not where such data is supposed to go, but okay. 100.</p>\n<p>You know what? That's bush league. Let's make it 10,000 contacts, all written out in one gigantic kotlin or java file.</p>\n<p>It's still peanuts, memory wise. What's the share of a penny compared to the GDP of the world? Something along those lines. Whenever you load a class file, that's in memory. And is never getting released. And it doesn't matter one iota.</p>\n<p>All those constant values are part of the class def and are loaded at least once in that sense no matter what you do.</p>\n<p>The correct way is obviously for static data (i.e. things that are inherent to the class and do not ever change) to be loaded once precisely, instead of 'x times, where x is the amount of instances'. It's semantically correct (by its nature, unchanging, class-global stuff is <code>static</code>, that's what static means), and increments the 'load' of the fact that this class has been touched by a few percentage points (you're just adding references; all those strings are loaded only once and are loaded whether you make this stuff static or not, it's part of the class definition. Where do you imagine those strings go if there are 0 instances? JVM is not going to reload that class file from disk every time you call <code>new Foo()</code>!) - whereas if it's once-per-instance you might be looking at millions of refs for no reason at all.</p>\n"},{"tags":[],"owner":{"account_id":14283811,"reputation":6405,"user_id":10317684,"display_name":"Ricky Mo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670989062,"creation_date":1670988652,"answer_id":74793288,"question_id":74792904,"body_markdown":"The ability to override makes a different between the two. Take a look at the following example. `speed` might be a property that is constant across a class, but you might want a different constant value for different subclasses.\r\n```\r\nimport kotlin.reflect.KClass\r\n\r\n\r\nopen class Animal{\r\n    \r\n    companion object{\r\n        val speed : Int = 1\r\n    }\r\n    \r\n    var x: Int = 0\r\n    \r\n    fun move(){\r\n        x += speed\r\n        print(&quot;${this} moved to ${x}\\n&quot;)\r\n    }\r\n}\r\n\r\nclass Dog : Animal(){\r\n    companion object{\r\n        val speed : Int = 3\r\n    }\r\n}\r\n\r\nclass Cat : Animal(){\r\n    companion object{\r\n        val speed : Int = 2\r\n    }\r\n}\r\n\r\nfun main()\r\n{\r\n    val a = Animal()\r\n    a.move()\r\n    val c = Cat()\r\n    c.move()\r\n    val d = Dog()\r\n    d.move()\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\nAnimal@49c2faae moved to 1\r\nCat@17f052a3 moved to 1\r\nDog@685f4c2e moved to 1\r\n```\r\n\r\nThis doesn&#39;t work because `speed` in `move()` always refer to `Animal.speed`. So in this case, you want `speed` be an instance member instead of static (or companion).\r\n\r\n```\r\nopen class Animal{\r\n    \r\n    open val speed : Int = 1\r\n    \r\n    var x: Int = 0\r\n    \r\n    fun move(){\r\n        x += speed\r\n        print(&quot;${this} moved to ${x}\\n&quot;)\r\n    }\r\n}\r\n\r\nclass Dog : Animal(){\r\n    override val speed : Int = 3\r\n}\r\n\r\nclass Cat : Animal(){\r\n    override val speed : Int = 2\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\nAnimal@37f8bb67 moved to 1\r\nCat@1d56ce6a moved to 2\r\nDog@17f052a3 moved to 3\r\n```\r\n\r\nAs a general practice, if a value is something that is absolutely independent to individual instances, make it static. In contrast, if a property sounds like a property belongs to the individual instance, not belongs to a type, even it is constant across every instances (for the time being), I would put it as an instance member as it is likely subject to change in future development. Though it is totally fine to make it static until you actually find the needs to change in the future. For the above example, you might even eventually change `speed` to `var` instead of `val` when you later find that every individual dog has different speed. Just do what suit your needs at the moment :)","title":"What&#39;s the best way to declare a constant in Kotlin?","body":"<p>The ability to override makes a different between the two. Take a look at the following example. <code>speed</code> might be a property that is constant across a class, but you might want a different constant value for different subclasses.</p>\n<pre><code>import kotlin.reflect.KClass\n\n\nopen class Animal{\n    \n    companion object{\n        val speed : Int = 1\n    }\n    \n    var x: Int = 0\n    \n    fun move(){\n        x += speed\n        print(&quot;${this} moved to ${x}\\n&quot;)\n    }\n}\n\nclass Dog : Animal(){\n    companion object{\n        val speed : Int = 3\n    }\n}\n\nclass Cat : Animal(){\n    companion object{\n        val speed : Int = 2\n    }\n}\n\nfun main()\n{\n    val a = Animal()\n    a.move()\n    val c = Cat()\n    c.move()\n    val d = Dog()\n    d.move()\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Animal@49c2faae moved to 1\nCat@17f052a3 moved to 1\nDog@685f4c2e moved to 1\n</code></pre>\n<p>This doesn't work because <code>speed</code> in <code>move()</code> always refer to <code>Animal.speed</code>. So in this case, you want <code>speed</code> be an instance member instead of static (or companion).</p>\n<pre><code>open class Animal{\n    \n    open val speed : Int = 1\n    \n    var x: Int = 0\n    \n    fun move(){\n        x += speed\n        print(&quot;${this} moved to ${x}\\n&quot;)\n    }\n}\n\nclass Dog : Animal(){\n    override val speed : Int = 3\n}\n\nclass Cat : Animal(){\n    override val speed : Int = 2\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Animal@37f8bb67 moved to 1\nCat@1d56ce6a moved to 2\nDog@17f052a3 moved to 3\n</code></pre>\n<p>As a general practice, if a value is something that is absolutely independent to individual instances, make it static. In contrast, if a property sounds like a property belongs to the individual instance, not belongs to a type, even it is constant across every instances (for the time being), I would put it as an instance member as it is likely subject to change in future development. Though it is totally fine to make it static until you actually find the needs to change in the future. For the above example, you might even eventually change <code>speed</code> to <code>var</code> instead of <code>val</code> when you later find that every individual dog has different speed. Just do what suit your needs at the moment :)</p>\n"},{"tags":[],"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671041146,"creation_date":1671041146,"answer_id":74802550,"question_id":74792904,"body_markdown":"There are many ways to define constants in Kotlin. They differ in their scope and use of namespaces, memory usage, and ability to inherit and override.\r\n\r\nThere&#39;s no single ‘best’ approach; it depends on what your constants _represent_, and how you&#39;re using them.\r\n\r\nHere are some (simplified) examples:\r\n\r\n1. **At the top (file) level**:\r\n```\r\nconst val a = &quot;A&quot;\r\n```\r\nThe declaration is ‘loose’ in a file, not contained in any class. This is usually the simplest and most concise way — but it may not occur to folks who are used to Java, as it has no direct Java equivalent.\r\n\r\nThe constant is available anywhere in the file (as a bare `a`); and if not private, it can also be used anywhere else (either as a fully-qualified `list.of.packages.a`, or if that&#39;s imported, simply as `a`). It can&#39;t be inherited or overridden.\r\n\r\n2. **In a companion object**:\r\n```\r\nclass A {\r\n    companion object {\r\n        const val a = &quot;A&quot;\r\n    }\r\n}\r\n```\r\nIf you know Java, this is roughly equivalent to a static field (as the question demonstrates). As with a top-level declaration, there is exactly one instance of the property in memory.\r\n\r\nThe main difference is that it&#39;s now part of A, which affects its scope and accessibility: it&#39;s available anywhere within `A` and its `companion object`, and (unless you restrict it) it can also be used elsewhere (as `list.of.packages.A.a`, and `A.a` if `A` is in scope, and simple `a` if the whole thing is imported). (You can&#39;t inherit from a singleton such as a companion object, so it can&#39;t be inherited or overridden.)\r\n\r\n3. **In a class**:\r\n```\r\nclass A {\r\n    val a = &quot;A&quot;\r\n}\r\n```\r\nThis differs both in concept and in practice, because _every instance_ of `A` has its own property. This means that each instance of `A` will take an extra 4 or 8 bytes (or whatever the platform needs to store a reference) — even though they all hold the same reference. (The String object itself is [interned](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/intern.html).)\r\n\r\nIf `A` or `a` are closed (as here), that&#39;s is unlikely to make good sense either in terms of the _meaning_ of the code, or its memory usage. (If you only have a few instances, it won&#39;t make much difference — but what if you have hundreds of thousands of instances in memory?) However, if `A` and `a` are both `open`, then subclasses can override the value, which can be handy. (However, see below.)\r\n\r\nOnce again, the property is available anywhere within `A`, and (unless restricted) anywhere that can see `A`. (Note that the property can&#39;t be `const` in this case, which means the compiler can&#39;t inline uses of it.)\r\n\r\n4. **In a class, with an explicit getter**:\r\n```\r\nclass A {\r\n    val a get() = &quot;A&quot;\r\n}\r\n```\r\nThis is conceptually very similar to the previous case: every instance of `A` has its own property, which can be overridden in subclasses. And it&#39;s accessed in exactly the same way.\r\n\r\nHowever, the implementation is more efficient. This version provides the [getter function](https://kotlinlang.org/docs/properties.html#getters-and-setters) — and because that makes no reference to a backing field, the compiler doesn&#39;t create one. So you get all the benefits of a class property, but without the memory overhead.\r\n\r\n5. **As enum values**:\r\n```\r\nenum class A {\r\n    A\r\n}\r\n```\r\nThis makes sense only if you have a number of these values which are all examples of some common category; but if you do, then this is usually a much better way to group them together and make them available as named constants.\r\n\r\n6. **As values in a structure such as an array or map**:\r\n```\r\nval letterConstants = mapOf(&#39;a&#39; to &quot;A&quot;)\r\n```\r\nThis approach makes good sense if you want to look values up programatically, but if you have a lot of values and want to avoid polluting namespaces, it can still make sense even if you only ever access it with constants.\r\n\r\nIt can also be loaded up (or extended) at runtime (e.g. from a file or database).\r\n\r\n(I&#39;m sure there are other approaches, too, that I haven&#39;t thought of.)\r\n\r\n---\r\n\r\nAs I said, it&#39;s hard to recommend a particular implementation, because it&#39;ll depend upon the problem you&#39;re trying to solve: what the constants mean, what they&#39;re associated with, and how and where they&#39;ll be used.","title":"What&#39;s the best way to declare a constant in Kotlin?","body":"<p>There are many ways to define constants in Kotlin. They differ in their scope and use of namespaces, memory usage, and ability to inherit and override.</p>\n<p>There's no single ‘best’ approach; it depends on what your constants <em>represent</em>, and how you're using them.</p>\n<p>Here are some (simplified) examples:</p>\n<ol>\n<li><strong>At the top (file) level</strong>:</li>\n</ol>\n<pre><code>const val a = &quot;A&quot;\n</code></pre>\n<p>The declaration is ‘loose’ in a file, not contained in any class. This is usually the simplest and most concise way — but it may not occur to folks who are used to Java, as it has no direct Java equivalent.</p>\n<p>The constant is available anywhere in the file (as a bare <code>a</code>); and if not private, it can also be used anywhere else (either as a fully-qualified <code>list.of.packages.a</code>, or if that's imported, simply as <code>a</code>). It can't be inherited or overridden.</p>\n<ol start=\"2\">\n<li><strong>In a companion object</strong>:</li>\n</ol>\n<pre><code>class A {\n    companion object {\n        const val a = &quot;A&quot;\n    }\n}\n</code></pre>\n<p>If you know Java, this is roughly equivalent to a static field (as the question demonstrates). As with a top-level declaration, there is exactly one instance of the property in memory.</p>\n<p>The main difference is that it's now part of A, which affects its scope and accessibility: it's available anywhere within <code>A</code> and its <code>companion object</code>, and (unless you restrict it) it can also be used elsewhere (as <code>list.of.packages.A.a</code>, and <code>A.a</code> if <code>A</code> is in scope, and simple <code>a</code> if the whole thing is imported). (You can't inherit from a singleton such as a companion object, so it can't be inherited or overridden.)</p>\n<ol start=\"3\">\n<li><strong>In a class</strong>:</li>\n</ol>\n<pre><code>class A {\n    val a = &quot;A&quot;\n}\n</code></pre>\n<p>This differs both in concept and in practice, because <em>every instance</em> of <code>A</code> has its own property. This means that each instance of <code>A</code> will take an extra 4 or 8 bytes (or whatever the platform needs to store a reference) — even though they all hold the same reference. (The String object itself is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/intern.html\" rel=\"nofollow noreferrer\">interned</a>.)</p>\n<p>If <code>A</code> or <code>a</code> are closed (as here), that's is unlikely to make good sense either in terms of the <em>meaning</em> of the code, or its memory usage. (If you only have a few instances, it won't make much difference — but what if you have hundreds of thousands of instances in memory?) However, if <code>A</code> and <code>a</code> are both <code>open</code>, then subclasses can override the value, which can be handy. (However, see below.)</p>\n<p>Once again, the property is available anywhere within <code>A</code>, and (unless restricted) anywhere that can see <code>A</code>. (Note that the property can't be <code>const</code> in this case, which means the compiler can't inline uses of it.)</p>\n<ol start=\"4\">\n<li><strong>In a class, with an explicit getter</strong>:</li>\n</ol>\n<pre><code>class A {\n    val a get() = &quot;A&quot;\n}\n</code></pre>\n<p>This is conceptually very similar to the previous case: every instance of <code>A</code> has its own property, which can be overridden in subclasses. And it's accessed in exactly the same way.</p>\n<p>However, the implementation is more efficient. This version provides the <a href=\"https://kotlinlang.org/docs/properties.html#getters-and-setters\" rel=\"nofollow noreferrer\">getter function</a> — and because that makes no reference to a backing field, the compiler doesn't create one. So you get all the benefits of a class property, but without the memory overhead.</p>\n<ol start=\"5\">\n<li><strong>As enum values</strong>:</li>\n</ol>\n<pre><code>enum class A {\n    A\n}\n</code></pre>\n<p>This makes sense only if you have a number of these values which are all examples of some common category; but if you do, then this is usually a much better way to group them together and make them available as named constants.</p>\n<ol start=\"6\">\n<li><strong>As values in a structure such as an array or map</strong>:</li>\n</ol>\n<pre><code>val letterConstants = mapOf('a' to &quot;A&quot;)\n</code></pre>\n<p>This approach makes good sense if you want to look values up programatically, but if you have a lot of values and want to avoid polluting namespaces, it can still make sense even if you only ever access it with constants.</p>\n<p>It can also be loaded up (or extended) at runtime (e.g. from a file or database).</p>\n<p>(I'm sure there are other approaches, too, that I haven't thought of.)</p>\n<hr />\n<p>As I said, it's hard to recommend a particular implementation, because it'll depend upon the problem you're trying to solve: what the constants mean, what they're associated with, and how and where they'll be used.</p>\n"}],"owner":{"account_id":109994,"reputation":15573,"user_id":291240,"accept_rate":70,"display_name":"William Hu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":811,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74802550,"answer_count":3,"score":0,"last_activity_date":1671041146,"creation_date":1670984079,"question_id":74792904,"body_markdown":"When we using kotlin there are mainly two ways of declaring constant:\r\n\r\n    class Foo {\r\n        companion object {\r\n            private const val a = &quot;A&quot;\r\n        }\r\n    }\r\n\r\nAnd:\r\n\r\n    class Foo {\r\n        private val a = &quot;A&quot;\r\n    }\r\n\r\n\r\nwhich one is better?\r\n\r\n\r\nI searched the `companion` way is equivalent to\r\n\r\n    public static final class Companion {\r\n            @NotNull\r\n                 private static final String a = &quot;A&quot;; \r\n        }\r\n\r\nin Java.\r\n\r\nIn this [question][1]\r\n\r\n&gt; If a constant is not static, Java will allocate a memory for that constant in every object of the class (i.e., one copy of the constant per object).\r\n&gt; \r\n&gt; If a constant is static, there will be only one copy of the constant\r\n&gt; for that class (i.e., one copy per class).\r\n\r\nYes that&#39;s true.\r\n\r\n**BUT**\r\nIf I have 100 or more constants in one class all static, when they are released? There are always in memory.\r\nThey won&#39;t be released until the program killed/terminated, right?\r\n\r\nSo I think the second way \r\n\r\n    class Foo {\r\n            private val a = &quot;A&quot;\r\n        }\r\nis the right way. As any instance will be released some point then the memory is released. \r\n\r\nNot quite sure I missed something. Any comments? Thanks!\r\n\r\n  [1]: https://stackoverflow.com/questions/8093230/why-are-java-constants-declared-static","title":"What&#39;s the best way to declare a constant in Kotlin?","body":"<p>When we using kotlin there are mainly two ways of declaring constant:</p>\n<pre><code>class Foo {\n    companion object {\n        private const val a = &quot;A&quot;\n    }\n}\n</code></pre>\n<p>And:</p>\n<pre><code>class Foo {\n    private val a = &quot;A&quot;\n}\n</code></pre>\n<p>which one is better?</p>\n<p>I searched the <code>companion</code> way is equivalent to</p>\n<pre><code>public static final class Companion {\n        @NotNull\n             private static final String a = &quot;A&quot;; \n    }\n</code></pre>\n<p>in Java.</p>\n<p>In this <a href=\"https://stackoverflow.com/questions/8093230/why-are-java-constants-declared-static\">question</a></p>\n<blockquote>\n<p>If a constant is not static, Java will allocate a memory for that constant in every object of the class (i.e., one copy of the constant per object).</p>\n<p>If a constant is static, there will be only one copy of the constant\nfor that class (i.e., one copy per class).</p>\n</blockquote>\n<p>Yes that's true.</p>\n<p><strong>BUT</strong>\nIf I have 100 or more constants in one class all static, when they are released? There are always in memory.\nThey won't be released until the program killed/terminated, right?</p>\n<p>So I think the second way</p>\n<pre><code>class Foo {\n        private val a = &quot;A&quot;\n    }\n</code></pre>\n<p>is the right way. As any instance will be released some point then the memory is released.</p>\n<p>Not quite sure I missed something. Any comments? Thanks!</p>\n"},{"tags":["java","set","guava"],"comments":[{"owner":{"account_id":13372,"reputation":16082,"user_id":26816,"accept_rate":69,"display_name":"RHSeeger"},"score":0,"creation_date":1303832019,"post_id":5792596,"comment_id":6641159,"body_markdown":"Can you comment on why SortedSet isn&#39;t an option? It&#39;s possible that, with more information, someone may be able to provide a better solution.","body":"Can you comment on why SortedSet isn&#39;t an option? It&#39;s possible that, with more information, someone may be able to provide a better solution."},{"owner":{"account_id":354233,"reputation":16125,"user_id":692456,"accept_rate":71,"display_name":"Flash"},"score":0,"creation_date":1303832173,"post_id":5792596,"comment_id":6641215,"body_markdown":"Why should the first element returned by the iterator be the oldest?","body":"Why should the first element returned by the iterator be the oldest?"},{"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"score":2,"creation_date":1303832319,"post_id":5792596,"comment_id":6641252,"body_markdown":"@RHSeeger, Sorted set is not an options because it Compares objects and sorts the by their natural order.  Objects don&#39;t track their insertion order into other Collection objects, so it is not possible to override or alter the natural ordering to mimic insertion order.","body":"@RHSeeger, Sorted set is not an options because it Compares objects and sorts the by their natural order.  Objects don&#39;t track their insertion order into other Collection objects, so it is not possible to override or alter the natural ordering to mimic insertion order."},{"owner":{"account_id":13372,"reputation":16082,"user_id":26816,"accept_rate":69,"display_name":"RHSeeger"},"score":0,"creation_date":1303832568,"post_id":5792596,"comment_id":6641322,"body_markdown":"What about using a container object such that you have a SortedSet&lt;OriginalClass,Date&gt;, with an overridden comparison method that sorts based on the date added?","body":"What about using a container object such that you have a SortedSet&lt;OriginalClass,Date&gt;, with an overridden comparison method that sorts based on the date added?"},{"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"score":1,"creation_date":1303833073,"post_id":5792596,"comment_id":6641515,"body_markdown":"@RHSeeger: because I can add 1000 elements with the same timestamp (at the millisecond).","body":"@RHSeeger: because I can add 1000 elements with the same timestamp (at the millisecond)."},{"owner":{"account_id":13372,"reputation":16082,"user_id":26816,"accept_rate":69,"display_name":"RHSeeger"},"score":0,"creation_date":1303833478,"post_id":5792596,"comment_id":6641645,"body_markdown":"I can think of ways to get what you want, but the cleanest solutions (I can think of) all involve a custom Set/OrderedSet implementation. Do you have a good reason for not implementing your own version of Set/OrderedSet, even if the code involved is small?","body":"I can think of ways to get what you want, but the cleanest solutions (I can think of) all involve a custom Set/OrderedSet implementation. Do you have a good reason for not implementing your own version of Set/OrderedSet, even if the code involved is small?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1303837777,"post_id":5792596,"comment_id":6642804,"body_markdown":"`Do you have a good reason for not implementing your own version of Set/OrderedSet, even if the code involved is small?` Yes ... it&#39;s been done already ;)","body":"<code>Do you have a good reason for not implementing your own version of Set&#47;OrderedSet, even if the code involved is small?</code> Yes ... it&#39;s been done already ;)"}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1303832166,"creation_date":1303831841,"answer_id":5792675,"question_id":5792596,"body_markdown":"Quick and dirty one-line solution: `mySet.remove(mySet.toArray(new Foo[mySet.size()])[0])` ;)\r\n\r\nHowever, I&#39;d still go for the iterator solution, since this would be more readable and should also be faster.\r\n\r\nEdit: I&#39;d go for Mike Samuel&#39;s solution. :)","title":"Removing the &quot;first&quot; object from a Set","body":"<p>Quick and dirty one-line solution: <code>mySet.remove(mySet.toArray(new Foo[mySet.size()])[0])</code> ;)</p>\n\n<p>However, I'd still go for the iterator solution, since this would be more readable and should also be faster.</p>\n\n<p>Edit: I'd go for Mike Samuel's solution. :)</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1303832304,"creation_date":1303831996,"answer_id":5792716,"question_id":5792596,"body_markdown":"With guava:\r\n\r\n    if (!set.isEmpty() &amp;&amp; set.size() &gt;= MAX_SET_SIZE) {\r\n        set.remove(Iterables.get(set, 0));\r\n    }\r\n\r\nI will also suggest an alternative approach. Yes, it it changing the implementation, but not drastically: extend `LinkedHashSet` and have that condition in the `add` method:\r\n\r\n\r\n    public LimitedLinkedHashSet&lt;E&gt; extends LinkedHashSet&lt;E&gt; {\r\n        public void add(E element) {\r\n             super.add(element);\r\n             // your 5-line logic from above or my solution with guava\r\n        }\r\n    }\r\n\r\nIt&#39;s still 5 line, but it is invisible to the code that&#39;s using it. And since this is actually a specific behaviour of the set, it is logical to have it within the set.","title":"Removing the &quot;first&quot; object from a Set","body":"<p>With guava:</p>\n\n<pre><code>if (!set.isEmpty() &amp;&amp; set.size() &gt;= MAX_SET_SIZE) {\n    set.remove(Iterables.get(set, 0));\n}\n</code></pre>\n\n<p>I will also suggest an alternative approach. Yes, it it changing the implementation, but not drastically: extend <code>LinkedHashSet</code> and have that condition in the <code>add</code> method:</p>\n\n<pre><code>public LimitedLinkedHashSet&lt;E&gt; extends LinkedHashSet&lt;E&gt; {\n    public void add(E element) {\n         super.add(element);\n         // your 5-line logic from above or my solution with guava\n    }\n}\n</code></pre>\n\n<p>It's still 5 line, but it is invisible to the code that's using it. And since this is actually a specific behaviour of the set, it is logical to have it within the set.</p>\n"},{"tags":[],"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1671041070,"creation_date":1303832010,"answer_id":5792718,"question_id":5792596,"body_markdown":"```java\r\n    if (!mySet.isEmpty())\r\n      mySet.remove(mySet.iterator().next());\r\n```\r\n\r\nseems to be less than 3 lines.\r\n\r\nYou have to synchronize around it of course if your set is shared by multiple threads.","title":"Removing the &quot;first&quot; object from a Set","body":"<pre class=\"lang-java prettyprint-override\"><code>    if (!mySet.isEmpty())\n      mySet.remove(mySet.iterator().next());\n</code></pre>\n<p>seems to be less than 3 lines.</p>\n<p>You have to synchronize around it of course if your set is shared by multiple threads.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1303832516,"creation_date":1303832516,"answer_id":5792822,"question_id":5792596,"body_markdown":"LinkedHashSet is a wrapper for LinkedHashMap which supports a simple &quot;remove oldest&quot; policy. To use it as a Set you can do\r\n\r\n    Set&lt;String&gt; set = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;(){\r\n        protected boolean removeEldestEntry(Map.Entry&lt;String, Boolean&gt; eldest) {\r\n            return size() &gt; MAX_ENTRIES;\r\n        }\r\n    });\r\n","title":"Removing the &quot;first&quot; object from a Set","body":"<p>LinkedHashSet is a wrapper for LinkedHashMap which supports a simple \"remove oldest\" policy. To use it as a Set you can do</p>\n\n<pre><code>Set&lt;String&gt; set = Collections.newSetFromMap(new LinkedHashMap&lt;String, Boolean&gt;(){\n    protected boolean removeEldestEntry(Map.Entry&lt;String, Boolean&gt; eldest) {\n        return size() &gt; MAX_ENTRIES;\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1303856037,"creation_date":1303832643,"answer_id":5792844,"question_id":5792596,"body_markdown":"I think the way you&#39;re doing it is fine. Is this something you do often enough to be worth finding a shorter way? You could do basically the same thing with Guava like this:\r\n\r\n    Iterables.removeIf(Iterables.limit(mySet, 1), Predicates.alwaysTrue());\r\n\r\nThat adds the small overhead of wrapping the set and its iterator for limiting and then calling the `alwaysTrue()` predicate once... doesn&#39;t seem especially worth it to me though.\r\n\r\n**Edit:** To put what I said in a comment in an answer, you could create a `SetMultimap` that automatically restricts the number of values it can have per key like this:\r\n\r\n    SetMultimap&lt;K, V&gt; multimap = Multimaps.newSetMultimap(map,\r\n        new Supplier&lt;Set&lt;V&gt;&gt;() {\r\n          public Set&lt;V&gt; get() {\r\n            return Sets.newSetFromMap(new LinkedHashMap&lt;V, Boolean&gt;() {\r\n              @Override protected boolean removeEldestEntry(Entry&lt;K, V&gt; eldestEntry) {\r\n                return size() &gt; MAX_SIZE;\r\n              }\r\n            });\r\n          }\r\n        });","title":"Removing the &quot;first&quot; object from a Set","body":"<p>I think the way you're doing it is fine. Is this something you do often enough to be worth finding a shorter way? You could do basically the same thing with Guava like this:</p>\n\n<pre><code>Iterables.removeIf(Iterables.limit(mySet, 1), Predicates.alwaysTrue());\n</code></pre>\n\n<p>That adds the small overhead of wrapping the set and its iterator for limiting and then calling the <code>alwaysTrue()</code> predicate once... doesn't seem especially worth it to me though.</p>\n\n<p><strong>Edit:</strong> To put what I said in a comment in an answer, you could create a <code>SetMultimap</code> that automatically restricts the number of values it can have per key like this:</p>\n\n<pre><code>SetMultimap&lt;K, V&gt; multimap = Multimaps.newSetMultimap(map,\n    new Supplier&lt;Set&lt;V&gt;&gt;() {\n      public Set&lt;V&gt; get() {\n        return Sets.newSetFromMap(new LinkedHashMap&lt;V, Boolean&gt;() {\n          @Override protected boolean removeEldestEntry(Entry&lt;K, V&gt; eldestEntry) {\n            return size() &gt; MAX_SIZE;\n          }\n        });\n      }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":280045,"reputation":6775,"user_id":575520,"accept_rate":67,"display_name":"Laurent Pireyn"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1395954087,"creation_date":1303833615,"answer_id":5793039,"question_id":5792596,"body_markdown":"If you really need to do this at several places in your code, just write a static method.\r\n\r\nThe other solutions proposed are often slower since they imply calling the `Set.remove(Object)` method instead of the `Iterator.remove()` method.\r\n\r\n    @Nullable\r\n    public static &lt;T&gt; T removeFirst(Collection&lt;? extends T&gt; c) {\r\n      Iterator&lt;? extends T&gt; it = c.iterator();\r\n      if (!it.hasNext()) { return null; }\r\n      T removed = it.next();\r\n      it.remove();\r\n      return removed;\r\n    }\r\n","title":"Removing the &quot;first&quot; object from a Set","body":"<p>If you really need to do this at several places in your code, just write a static method.</p>\n\n<p>The other solutions proposed are often slower since they imply calling the <code>Set.remove(Object)</code> method instead of the <code>Iterator.remove()</code> method.</p>\n\n<pre><code>@Nullable\npublic static &lt;T&gt; T removeFirst(Collection&lt;? extends T&gt; c) {\n  Iterator&lt;? extends T&gt; it = c.iterator();\n  if (!it.hasNext()) { return null; }\n  T removed = it.next();\n  it.remove();\n  return removed;\n}\n</code></pre>\n"}],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39907,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":5792822,"answer_count":6,"score":24,"last_activity_date":1671041070,"creation_date":1303831524,"question_id":5792596,"body_markdown":"Under certain situations, I need to evict the oldest element in a Java `Set`. The set is implemented using a [`LinkedHashSet`][1], which makes this simple: just get rid of the first element returned by the set&#39;s iterator:\r\n\r\n    Set&lt;Foo&gt; mySet = new LinkedHashSet&lt;Foo&gt;();\r\n    // do stuff...\r\n    if (mySet.size() &gt;= MAX_SET_SIZE)\r\n    {\r\n        Iterator&lt;Foo&gt; iter = mySet.iterator();\r\n        iter.next();\r\n        iter.remove();\r\n    }\r\n    \r\nThis is ugly: 3 lines to do something I *could* do with 1 line if I was using a `SortedSet` (for other reasons, a `SortedSet` is not an option here):\r\n\r\n    if (/*stuff*/)\r\n    {\r\n        mySet.remove(mySet.first());\r\n    }\r\n\r\nSo is there a cleaner way of doing this, **without:**\r\n\r\n- changing the `Set` implementation, or\r\n- writing a static utility method?\r\n\r\nAny solutions leveraging [Guava][2] are fine.\r\n\r\n----------\r\n\r\n\r\n&lt;sub&gt;I am fully aware that sets do not have inherent ordering. I&#39;m asking about removing the first entry as defined by iteration order.&lt;/sub&gt;\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\r\n  [2]: http://code.google.com/p/guava-libraries/","title":"Removing the &quot;first&quot; object from a Set","body":"<p>Under certain situations, I need to evict the oldest element in a Java <code>Set</code>. The set is implemented using a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\"><code>LinkedHashSet</code></a>, which makes this simple: just get rid of the first element returned by the set's iterator:</p>\n\n<pre><code>Set&lt;Foo&gt; mySet = new LinkedHashSet&lt;Foo&gt;();\n// do stuff...\nif (mySet.size() &gt;= MAX_SET_SIZE)\n{\n    Iterator&lt;Foo&gt; iter = mySet.iterator();\n    iter.next();\n    iter.remove();\n}\n</code></pre>\n\n<p>This is ugly: 3 lines to do something I <em>could</em> do with 1 line if I was using a <code>SortedSet</code> (for other reasons, a <code>SortedSet</code> is not an option here):</p>\n\n<pre><code>if (/*stuff*/)\n{\n    mySet.remove(mySet.first());\n}\n</code></pre>\n\n<p>So is there a cleaner way of doing this, <strong>without:</strong></p>\n\n<ul>\n<li>changing the <code>Set</code> implementation, or</li>\n<li>writing a static utility method?</li>\n</ul>\n\n<p>Any solutions leveraging <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a> are fine.</p>\n\n<hr>\n\n<p><sub>I am fully aware that sets do not have inherent ordering. I'm asking about removing the first entry as defined by iteration order.</sub></p>\n"},{"tags":["java","spring-boot","graphql"],"owner":{"account_id":3320406,"reputation":340,"user_id":2791725,"accept_rate":78,"display_name":"San"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671041001,"creation_date":1671041001,"question_id":74802514,"body_markdown":"I am trying to write the code to print the content length of the response header in GraphQL API. This is the code have tried below but am unable to proceed further. Appreciate your input.\r\n\r\n    public class GraphQLRequestBody {\r\n    private String query;\r\n    private Map&lt;String, Object&gt; variables;\r\n\r\n    public String getQuery() {\r\n        return query;\r\n    }\r\n\r\n    public void setQuery(String query) {\r\n        this.query = query;\r\n    }\r\n\r\n    public Map&lt;String, Object&gt; getVariables() {\r\n        return variables;\r\n    }\r\n\r\n    public void setVariables(Map&lt;String, Object&gt; variables) {\r\n        this.variables = variables;\r\n    }}\r\n\r\n        public CompletableFuture&lt;Map&lt;String, Object&gt;&gt; graphQL(\r\n            @RequestBody String query, final HttpEntity&lt;String&gt; request) {\r\n        String contentType = Objects.requireNonNull(request.getHeaders().getContentType()).toString();\r\n\r\n        GraphQLRequestBody graphQLRequest = new GraphQLRequestBody();\r\n        graphQLRequest.setQuery(query);\r\n        if (contentType.contains(APPLICATION_JSON_VALUE)) {\r\n            graphQLRequest = GraphQLUtils.parseJsonRequestQuery(query);\r\n        }\r\n        return graphql\r\n                .executeAsync(\r\n                        ExecutionInput.newExecutionInput()\r\n                                .query(graphQLRequest.getQuery())\r\n                                .variables(\r\n                                        Optional.ofNullable(graphQLRequest.getVariables())\r\n                                                .orElseGet(Collections::emptyMap))\r\n                                .build())\r\n                .thenApply(ExecutionResult::toSpecification);\r\n    }","title":"How to get HTTP response byte size from the GraphQL API in Java","body":"<p>I am trying to write the code to print the content length of the response header in GraphQL API. This is the code have tried below but am unable to proceed further. Appreciate your input.</p>\n<pre><code>public class GraphQLRequestBody {\nprivate String query;\nprivate Map&lt;String, Object&gt; variables;\n\npublic String getQuery() {\n    return query;\n}\n\npublic void setQuery(String query) {\n    this.query = query;\n}\n\npublic Map&lt;String, Object&gt; getVariables() {\n    return variables;\n}\n\npublic void setVariables(Map&lt;String, Object&gt; variables) {\n    this.variables = variables;\n}}\n\n    public CompletableFuture&lt;Map&lt;String, Object&gt;&gt; graphQL(\n        @RequestBody String query, final HttpEntity&lt;String&gt; request) {\n    String contentType = Objects.requireNonNull(request.getHeaders().getContentType()).toString();\n\n    GraphQLRequestBody graphQLRequest = new GraphQLRequestBody();\n    graphQLRequest.setQuery(query);\n    if (contentType.contains(APPLICATION_JSON_VALUE)) {\n        graphQLRequest = GraphQLUtils.parseJsonRequestQuery(query);\n    }\n    return graphql\n            .executeAsync(\n                    ExecutionInput.newExecutionInput()\n                            .query(graphQLRequest.getQuery())\n                            .variables(\n                                    Optional.ofNullable(graphQLRequest.getVariables())\n                                            .orElseGet(Collections::emptyMap))\n                            .build())\n            .thenApply(ExecutionResult::toSpecification);\n}\n</code></pre>\n"},{"tags":["java","api","authentication","keycloak","access-token"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1671047715,"post_id":74501562,"comment_id":132015806,"body_markdown":"I think what you might need is the &quot;identity provider federation&quot; feature or Keycloak, where you can connect several identity providers. (Don&#39;t necessarily have to be all Keycloak instances.) Found the docs (https://www.keycloak.org/docs/latest/server_admin/#_identity_broker) but didn&#39;t try it for myself.","body":"I think what you might need is the &quot;identity provider federation&quot; feature or Keycloak, where you can connect several identity providers. (Don&#39;t necessarily have to be all Keycloak instances.) Found the docs (<a href=\"https://www.keycloak.org/docs/latest/server_admin/#_identity_broker\" rel=\"nofollow noreferrer\">keycloak.org/docs/latest/server_admin/#_identity_broker</a>) but didn&#39;t try it for myself."}],"answers":[{"tags":[],"owner":{"account_id":27036050,"reputation":11,"user_id":20591662,"display_name":"mha63"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669299214,"creation_date":1669299214,"answer_id":74562108,"question_id":74501562,"body_markdown":"The post by trotman23 in this thread may help\r\nhttps://keycloak.discourse.group/t/unable-to-retrieve-upstream-identity-providers-original-token/2267/2","title":"Authorization with two Keycloaks and shared tokens","body":"<p>The post by trotman23 in this thread may help\n<a href=\"https://keycloak.discourse.group/t/unable-to-retrieve-upstream-identity-providers-original-token/2267/2\" rel=\"nofollow noreferrer\">https://keycloak.discourse.group/t/unable-to-retrieve-upstream-identity-providers-original-token/2267/2</a></p>\n"},{"tags":[],"owner":{"account_id":5946082,"reputation":13,"user_id":4675543,"display_name":"Yonchev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671028808,"creation_date":1671028808,"answer_id":74799932,"question_id":74501562,"body_markdown":"I found next article who helped me to do auth process throw 2 keycloak instances\r\n\r\nhttps://www.jessym.com/articles/stateless-oauth2-social-logins-with-spring-boot\r\n","title":"Authorization with two Keycloaks and shared tokens","body":"<p>I found next article who helped me to do auth process throw 2 keycloak instances</p>\n<p><a href=\"https://www.jessym.com/articles/stateless-oauth2-social-logins-with-spring-boot\" rel=\"nofollow noreferrer\">https://www.jessym.com/articles/stateless-oauth2-social-logins-with-spring-boot</a></p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671040912,"creation_date":1671040592,"answer_id":74802447,"question_id":74501562,"body_markdown":"I detailed how to achieve multi-tenancy on a Spring resource-server with JWT decoder in [this answer][1]. \r\n\r\nAll the authorization-servers being Keycloak is not important. The solution I proposed there is having resource-server(s) accept identities emitted by more than just one issuer (use a list of trusted issuers instead). So clients or users can choose their preferred authorization-server in that list. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74791753/619830","title":"Authorization with two Keycloaks and shared tokens","body":"<p>I detailed how to achieve multi-tenancy on a Spring resource-server with JWT decoder in <a href=\"https://stackoverflow.com/a/74791753/619830\">this answer</a>.</p>\n<p>All the authorization-servers being Keycloak is not important. The solution I proposed there is having resource-server(s) accept identities emitted by more than just one issuer (use a list of trusted issuers instead). So clients or users can choose their preferred authorization-server in that list.</p>\n"}],"owner":{"account_id":5946082,"reputation":13,"user_id":4675543,"display_name":"Yonchev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":940,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74799932,"answer_count":3,"score":0,"last_activity_date":1671040912,"creation_date":1668873886,"question_id":74501562,"body_markdown":"I have the following situation. Some of the users are authorized to the my backend service with Direct Access Grants, but those who are administrators are on a second Keycloak with another client and realm, and I need to be able to get valid tokens for the first Keycloak for them as well. I registered the second Keycloak with the administrators in the Identity Provider of the first one and if I use the normal web work flow from the first one I can log in with an admin user but I stay in the page of the first Keycloak and I can&#39;t get the tokens of that user in my backend. If I try to change the redirect_uri, I get an error that it is not allowed, even though I put * in the client of the second one. These are my settings for both Keycloaks.\r\n\r\nHow can I get a token for a user from the second Keycloak that is also valid in the first Keycloak?\r\n\r\nFirst Keycloak Identity Provider settings:\r\n\r\n      &quot;identityProviders&quot;: [\r\n    {\r\n      &quot;alias&quot;: &quot;keycloak-oidc&quot;,\r\n      &quot;internalId&quot;: &quot;c3a3b1db-65ee-49df-b517-bfba6c355696&quot;,\r\n      &quot;providerId&quot;: &quot;keycloak-oidc&quot;,\r\n      &quot;enabled&quot;: true,\r\n      &quot;updateProfileFirstLoginMode&quot;: &quot;on&quot;,\r\n      &quot;trustEmail&quot;: false,\r\n      &quot;storeToken&quot;: true,\r\n      &quot;addReadTokenRoleOnCreate&quot;: true,\r\n      &quot;authenticateByDefault&quot;: false,\r\n      &quot;linkOnly&quot;: false,\r\n      &quot;firstBrokerLoginFlowAlias&quot;: &quot;first broker login&quot;,\r\n      &quot;config&quot;: {\r\n        &quot;userInfoUrl&quot;: &quot;http://host.docker.internal:909/auth/realms/vrp-realm-adm/protocol/openid-connect/userinfo&quot;,\r\n        &quot;hideOnLoginPage&quot;: &quot;false&quot;,\r\n        &quot;clientId&quot;: &quot;vrp-client-adm&quot;,\r\n        &quot;tokenUrl&quot;: &quot;http://host.docker.internal:909/auth/realms/vrp-realm-adm/protocol/openid-connect/token&quot;,\r\n        &quot;acceptsPromptNoneForwardFromClient&quot;: &quot;false&quot;,\r\n        &quot;backchannelSupported&quot;: &quot;false&quot;,\r\n        &quot;useJwksUrl&quot;: &quot;true&quot;,\r\n        &quot;loginHint&quot;: &quot;false&quot;,\r\n        &quot;authorizationUrl&quot;: &quot;http://host.docker.internal:909/auth/realms/vrp-realm-adm/protocol/openid-connect/auth&quot;,\r\n        &quot;clientAuthMethod&quot;: &quot;client_secret_post&quot;,\r\n        &quot;logoutUrl&quot;: &quot;http://host.docker.internal:909/auth/realms/vrp-realm-adm/protocol/openid-connect/logout&quot;,\r\n        &quot;syncMode&quot;: &quot;IMPORT&quot;,\r\n        &quot;clientSecret&quot;: &quot;**********&quot;\r\n      }\r\n    }\r\n  \r\n\r\n\r\nSecond Keycloak client settings:\r\n\r\n    {\r\n      &quot;id&quot;: &quot;f873a96c-6468-4737-b576-bdf610fb9597&quot;,\r\n      &quot;clientId&quot;: &quot;vrp-client-adm&quot;,\r\n      &quot;rootUrl&quot;: &quot;http://localhost:808&quot;,\r\n      &quot;adminUrl&quot;: &quot;http://localhost:808&quot;,\r\n      &quot;surrogateAuthRequired&quot;: false,\r\n      &quot;enabled&quot;: true,\r\n      &quot;alwaysDisplayInConsole&quot;: false,\r\n      &quot;clientAuthenticatorType&quot;: &quot;client-secret&quot;,\r\n      &quot;secret&quot;: &quot;**********&quot;,\r\n      &quot;redirectUris&quot;: [\r\n        &quot;*&quot;\r\n      ],\r\n      &quot;webOrigins&quot;: [\r\n        &quot;*&quot;\r\n      ],\r\n      &quot;notBefore&quot;: 0,\r\n      &quot;bearerOnly&quot;: false,\r\n      &quot;consentRequired&quot;: false,\r\n      &quot;standardFlowEnabled&quot;: false,\r\n      &quot;implicitFlowEnabled&quot;: true,\r\n      &quot;directAccessGrantsEnabled&quot;: true,\r\n      &quot;serviceAccountsEnabled&quot;: true,\r\n      &quot;publicClient&quot;: false,\r\n      &quot;frontchannelLogout&quot;: false,\r\n      &quot;protocol&quot;: &quot;openid-connect&quot;,\r\n      &quot;attributes&quot;: {\r\n        &quot;saml.multivalued.roles&quot;: &quot;false&quot;,\r\n        &quot;saml.force.post.binding&quot;: &quot;false&quot;,\r\n        &quot;frontchannel.logout.session.required&quot;: &quot;false&quot;,\r\n        &quot;oauth2.device.authorization.grant.enabled&quot;: &quot;false&quot;,\r\n        &quot;backchannel.logout.revoke.offline.tokens&quot;: &quot;false&quot;,\r\n        &quot;saml.server.signature.keyinfo.ext&quot;: &quot;false&quot;,\r\n        &quot;use.refresh.tokens&quot;: &quot;true&quot;,\r\n        &quot;oidc.ciba.grant.enabled&quot;: &quot;true&quot;,\r\n        &quot;backchannel.logout.session.required&quot;: &quot;true&quot;,\r\n        &quot;client_credentials.use_refresh_token&quot;: &quot;false&quot;,\r\n        &quot;saml.client.signature&quot;: &quot;false&quot;,\r\n        &quot;require.pushed.authorization.requests&quot;: &quot;false&quot;,\r\n        &quot;saml.allow.ecp.flow&quot;: &quot;false&quot;,\r\n        &quot;saml.assertion.signature&quot;: &quot;false&quot;,\r\n        &quot;id.token.as.detached.signature&quot;: &quot;false&quot;,\r\n        &quot;client.secret.creation.time&quot;: &quot;1668867137&quot;,\r\n        &quot;saml.encrypt&quot;: &quot;false&quot;,\r\n        &quot;saml.server.signature&quot;: &quot;false&quot;,\r\n        &quot;exclude.session.state.from.auth.response&quot;: &quot;false&quot;,\r\n        &quot;saml.artifact.binding&quot;: &quot;false&quot;,\r\n        &quot;saml_force_name_id_format&quot;: &quot;false&quot;,\r\n        &quot;tls.client.certificate.bound.access.tokens&quot;: &quot;false&quot;,\r\n        &quot;acr.loa.map&quot;: &quot;{}&quot;,\r\n        &quot;saml.authnstatement&quot;: &quot;false&quot;,\r\n        &quot;display.on.consent.screen&quot;: &quot;false&quot;,\r\n        &quot;token.response.type.bearer.lower-case&quot;: &quot;false&quot;,\r\n        &quot;saml.onetimeuse.condition&quot;: &quot;false&quot;\r\n      },\r\n      &quot;authenticationFlowBindingOverrides&quot;: {},\r\n      &quot;fullScopeAllowed&quot;: true,\r\n      &quot;nodeReRegistrationTimeout&quot;: -1,\r\n      &quot;protocolMappers&quot;: [\r\n        {\r\n          &quot;id&quot;: &quot;6e02e265-af71-4af2-9253-ac26051053a4&quot;,\r\n          &quot;name&quot;: &quot;Client IP Address&quot;,\r\n          &quot;protocol&quot;: &quot;openid-connect&quot;,\r\n          &quot;protocolMapper&quot;: &quot;oidc-usersessionmodel-note-mapper&quot;,\r\n          &quot;consentRequired&quot;: false,\r\n          &quot;config&quot;: {\r\n            &quot;user.session.note&quot;: &quot;clientAddress&quot;,\r\n            &quot;id.token.claim&quot;: &quot;true&quot;,\r\n            &quot;access.token.claim&quot;: &quot;true&quot;,\r\n            &quot;claim.name&quot;: &quot;clientAddress&quot;,\r\n            &quot;jsonType.label&quot;: &quot;String&quot;\r\n          }\r\n        },\r\n        {\r\n          &quot;id&quot;: &quot;2173ad2e-953d-401a-816b-19d920f7fa16&quot;,\r\n          &quot;name&quot;: &quot;Client ID&quot;,\r\n          &quot;protocol&quot;: &quot;openid-connect&quot;,\r\n          &quot;protocolMapper&quot;: &quot;oidc-usersessionmodel-note-mapper&quot;,\r\n          &quot;consentRequired&quot;: false,\r\n          &quot;config&quot;: {\r\n            &quot;user.session.note&quot;: &quot;clientId&quot;,\r\n            &quot;id.token.claim&quot;: &quot;true&quot;,\r\n            &quot;access.token.claim&quot;: &quot;true&quot;,\r\n            &quot;claim.name&quot;: &quot;clientId&quot;,\r\n            &quot;jsonType.label&quot;: &quot;String&quot;\r\n          }\r\n        },\r\n        {\r\n          &quot;id&quot;: &quot;2aad6645-174c-4dcd-b711-4eb388dbac3e&quot;,\r\n          &quot;name&quot;: &quot;Client Host&quot;,\r\n          &quot;protocol&quot;: &quot;openid-connect&quot;,\r\n          &quot;protocolMapper&quot;: &quot;oidc-usersessionmodel-note-mapper&quot;,\r\n          &quot;consentRequired&quot;: false,\r\n          &quot;config&quot;: {\r\n            &quot;user.session.note&quot;: &quot;clientHost&quot;,\r\n            &quot;id.token.claim&quot;: &quot;true&quot;,\r\n            &quot;access.token.claim&quot;: &quot;true&quot;,\r\n            &quot;claim.name&quot;: &quot;clientHost&quot;,\r\n            &quot;jsonType.label&quot;: &quot;String&quot;\r\n          }\r\n        }\r\n      ],\r\n      &quot;defaultClientScopes&quot;: [\r\n        &quot;web-origins&quot;,\r\n        &quot;acr&quot;,\r\n        &quot;profile&quot;,\r\n        &quot;roles&quot;,\r\n        &quot;email&quot;\r\n      ],\r\n      &quot;optionalClientScopes&quot;: [\r\n        &quot;address&quot;,\r\n        &quot;phone&quot;,\r\n        &quot;offline_access&quot;,\r\n        &quot;microprofile-jwt&quot;\r\n      ]\r\n    } ","title":"Authorization with two Keycloaks and shared tokens","body":"<p>I have the following situation. Some of the users are authorized to the my backend service with Direct Access Grants, but those who are administrators are on a second Keycloak with another client and realm, and I need to be able to get valid tokens for the first Keycloak for them as well. I registered the second Keycloak with the administrators in the Identity Provider of the first one and if I use the normal web work flow from the first one I can log in with an admin user but I stay in the page of the first Keycloak and I can't get the tokens of that user in my backend. If I try to change the redirect_uri, I get an error that it is not allowed, even though I put * in the client of the second one. These are my settings for both Keycloaks.</p>\n<p>How can I get a token for a user from the second Keycloak that is also valid in the first Keycloak?</p>\n<p>First Keycloak Identity Provider settings:</p>\n<pre><code>  &quot;identityProviders&quot;: [\n{\n  &quot;alias&quot;: &quot;keycloak-oidc&quot;,\n  &quot;internalId&quot;: &quot;c3a3b1db-65ee-49df-b517-bfba6c355696&quot;,\n  &quot;providerId&quot;: &quot;keycloak-oidc&quot;,\n  &quot;enabled&quot;: true,\n  &quot;updateProfileFirstLoginMode&quot;: &quot;on&quot;,\n  &quot;trustEmail&quot;: false,\n  &quot;storeToken&quot;: true,\n  &quot;addReadTokenRoleOnCreate&quot;: true,\n  &quot;authenticateByDefault&quot;: false,\n  &quot;linkOnly&quot;: false,\n  &quot;firstBrokerLoginFlowAlias&quot;: &quot;first broker login&quot;,\n  &quot;config&quot;: {\n    &quot;userInfoUrl&quot;: &quot;http://host.docker.internal:909/auth/realms/vrp-realm-adm/protocol/openid-connect/userinfo&quot;,\n    &quot;hideOnLoginPage&quot;: &quot;false&quot;,\n    &quot;clientId&quot;: &quot;vrp-client-adm&quot;,\n    &quot;tokenUrl&quot;: &quot;http://host.docker.internal:909/auth/realms/vrp-realm-adm/protocol/openid-connect/token&quot;,\n    &quot;acceptsPromptNoneForwardFromClient&quot;: &quot;false&quot;,\n    &quot;backchannelSupported&quot;: &quot;false&quot;,\n    &quot;useJwksUrl&quot;: &quot;true&quot;,\n    &quot;loginHint&quot;: &quot;false&quot;,\n    &quot;authorizationUrl&quot;: &quot;http://host.docker.internal:909/auth/realms/vrp-realm-adm/protocol/openid-connect/auth&quot;,\n    &quot;clientAuthMethod&quot;: &quot;client_secret_post&quot;,\n    &quot;logoutUrl&quot;: &quot;http://host.docker.internal:909/auth/realms/vrp-realm-adm/protocol/openid-connect/logout&quot;,\n    &quot;syncMode&quot;: &quot;IMPORT&quot;,\n    &quot;clientSecret&quot;: &quot;**********&quot;\n  }\n}\n</code></pre>\n<p>Second Keycloak client settings:</p>\n<pre><code>{\n  &quot;id&quot;: &quot;f873a96c-6468-4737-b576-bdf610fb9597&quot;,\n  &quot;clientId&quot;: &quot;vrp-client-adm&quot;,\n  &quot;rootUrl&quot;: &quot;http://localhost:808&quot;,\n  &quot;adminUrl&quot;: &quot;http://localhost:808&quot;,\n  &quot;surrogateAuthRequired&quot;: false,\n  &quot;enabled&quot;: true,\n  &quot;alwaysDisplayInConsole&quot;: false,\n  &quot;clientAuthenticatorType&quot;: &quot;client-secret&quot;,\n  &quot;secret&quot;: &quot;**********&quot;,\n  &quot;redirectUris&quot;: [\n    &quot;*&quot;\n  ],\n  &quot;webOrigins&quot;: [\n    &quot;*&quot;\n  ],\n  &quot;notBefore&quot;: 0,\n  &quot;bearerOnly&quot;: false,\n  &quot;consentRequired&quot;: false,\n  &quot;standardFlowEnabled&quot;: false,\n  &quot;implicitFlowEnabled&quot;: true,\n  &quot;directAccessGrantsEnabled&quot;: true,\n  &quot;serviceAccountsEnabled&quot;: true,\n  &quot;publicClient&quot;: false,\n  &quot;frontchannelLogout&quot;: false,\n  &quot;protocol&quot;: &quot;openid-connect&quot;,\n  &quot;attributes&quot;: {\n    &quot;saml.multivalued.roles&quot;: &quot;false&quot;,\n    &quot;saml.force.post.binding&quot;: &quot;false&quot;,\n    &quot;frontchannel.logout.session.required&quot;: &quot;false&quot;,\n    &quot;oauth2.device.authorization.grant.enabled&quot;: &quot;false&quot;,\n    &quot;backchannel.logout.revoke.offline.tokens&quot;: &quot;false&quot;,\n    &quot;saml.server.signature.keyinfo.ext&quot;: &quot;false&quot;,\n    &quot;use.refresh.tokens&quot;: &quot;true&quot;,\n    &quot;oidc.ciba.grant.enabled&quot;: &quot;true&quot;,\n    &quot;backchannel.logout.session.required&quot;: &quot;true&quot;,\n    &quot;client_credentials.use_refresh_token&quot;: &quot;false&quot;,\n    &quot;saml.client.signature&quot;: &quot;false&quot;,\n    &quot;require.pushed.authorization.requests&quot;: &quot;false&quot;,\n    &quot;saml.allow.ecp.flow&quot;: &quot;false&quot;,\n    &quot;saml.assertion.signature&quot;: &quot;false&quot;,\n    &quot;id.token.as.detached.signature&quot;: &quot;false&quot;,\n    &quot;client.secret.creation.time&quot;: &quot;1668867137&quot;,\n    &quot;saml.encrypt&quot;: &quot;false&quot;,\n    &quot;saml.server.signature&quot;: &quot;false&quot;,\n    &quot;exclude.session.state.from.auth.response&quot;: &quot;false&quot;,\n    &quot;saml.artifact.binding&quot;: &quot;false&quot;,\n    &quot;saml_force_name_id_format&quot;: &quot;false&quot;,\n    &quot;tls.client.certificate.bound.access.tokens&quot;: &quot;false&quot;,\n    &quot;acr.loa.map&quot;: &quot;{}&quot;,\n    &quot;saml.authnstatement&quot;: &quot;false&quot;,\n    &quot;display.on.consent.screen&quot;: &quot;false&quot;,\n    &quot;token.response.type.bearer.lower-case&quot;: &quot;false&quot;,\n    &quot;saml.onetimeuse.condition&quot;: &quot;false&quot;\n  },\n  &quot;authenticationFlowBindingOverrides&quot;: {},\n  &quot;fullScopeAllowed&quot;: true,\n  &quot;nodeReRegistrationTimeout&quot;: -1,\n  &quot;protocolMappers&quot;: [\n    {\n      &quot;id&quot;: &quot;6e02e265-af71-4af2-9253-ac26051053a4&quot;,\n      &quot;name&quot;: &quot;Client IP Address&quot;,\n      &quot;protocol&quot;: &quot;openid-connect&quot;,\n      &quot;protocolMapper&quot;: &quot;oidc-usersessionmodel-note-mapper&quot;,\n      &quot;consentRequired&quot;: false,\n      &quot;config&quot;: {\n        &quot;user.session.note&quot;: &quot;clientAddress&quot;,\n        &quot;id.token.claim&quot;: &quot;true&quot;,\n        &quot;access.token.claim&quot;: &quot;true&quot;,\n        &quot;claim.name&quot;: &quot;clientAddress&quot;,\n        &quot;jsonType.label&quot;: &quot;String&quot;\n      }\n    },\n    {\n      &quot;id&quot;: &quot;2173ad2e-953d-401a-816b-19d920f7fa16&quot;,\n      &quot;name&quot;: &quot;Client ID&quot;,\n      &quot;protocol&quot;: &quot;openid-connect&quot;,\n      &quot;protocolMapper&quot;: &quot;oidc-usersessionmodel-note-mapper&quot;,\n      &quot;consentRequired&quot;: false,\n      &quot;config&quot;: {\n        &quot;user.session.note&quot;: &quot;clientId&quot;,\n        &quot;id.token.claim&quot;: &quot;true&quot;,\n        &quot;access.token.claim&quot;: &quot;true&quot;,\n        &quot;claim.name&quot;: &quot;clientId&quot;,\n        &quot;jsonType.label&quot;: &quot;String&quot;\n      }\n    },\n    {\n      &quot;id&quot;: &quot;2aad6645-174c-4dcd-b711-4eb388dbac3e&quot;,\n      &quot;name&quot;: &quot;Client Host&quot;,\n      &quot;protocol&quot;: &quot;openid-connect&quot;,\n      &quot;protocolMapper&quot;: &quot;oidc-usersessionmodel-note-mapper&quot;,\n      &quot;consentRequired&quot;: false,\n      &quot;config&quot;: {\n        &quot;user.session.note&quot;: &quot;clientHost&quot;,\n        &quot;id.token.claim&quot;: &quot;true&quot;,\n        &quot;access.token.claim&quot;: &quot;true&quot;,\n        &quot;claim.name&quot;: &quot;clientHost&quot;,\n        &quot;jsonType.label&quot;: &quot;String&quot;\n      }\n    }\n  ],\n  &quot;defaultClientScopes&quot;: [\n    &quot;web-origins&quot;,\n    &quot;acr&quot;,\n    &quot;profile&quot;,\n    &quot;roles&quot;,\n    &quot;email&quot;\n  ],\n  &quot;optionalClientScopes&quot;: [\n    &quot;address&quot;,\n    &quot;phone&quot;,\n    &quot;offline_access&quot;,\n    &quot;microprofile-jwt&quot;\n  ]\n} \n</code></pre>\n"},{"tags":["java","list","garbage-collection","garbage"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":3,"creation_date":1671037918,"post_id":74801899,"comment_id":132012933,"body_markdown":"Because those objects can be garbage collected, no longer taking up memory when not needed. The overhead of those objects is fairly minimal (think bytes per entry), and it would complicate the design of those classes if they tried to re-use everything. The CPU overhead of instantiating what is essentially a wrapper object is quite minimal as well, and that tradeoff is likely worth it for the ability to apply OOP principles to the objects you add to the list. Further, these objects define state/relationships between other entries, which would have to exist somewhere.","body":"Because those objects can be garbage collected, no longer taking up memory when not needed. The overhead of those objects is fairly minimal (think bytes per entry), and it would complicate the design of those classes if they tried to re-use everything. The CPU overhead of instantiating what is essentially a wrapper object is quite minimal as well, and that tradeoff is likely worth it for the ability to apply OOP principles to the objects you add to the list. Further, these objects define state/relationships between other entries, which would have to exist somewhere."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1671042637,"post_id":74801899,"comment_id":132014392,"body_markdown":"Storing unused nodes under a soft reference would mean allocating that soft reference in addition to the (unused) node, thereby increasing memory consumption and the load on the garbage collector.","body":"Storing unused nodes under a soft reference would mean allocating that soft reference in addition to the (unused) node, thereby increasing memory consumption and the load on the garbage collector."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1671044346,"post_id":74801899,"comment_id":132014905,"body_markdown":"The main misconception is in your sentence “*reusing Nodes should reduce the load on the garbage collector*”. A garbage collector has to process the objects that are still alive, hence, reusing objects *raises* the load on the garbage collector. It could decrease the number of GC invocations when the speculative remembering turned out right, however, even then, it won’t compensate the higher costs of the garbage collection. But all unused cached nodes will even raise the number of invocations.","body":"The main misconception is in your sentence “<i>reusing Nodes should reduce the load on the garbage collector</i>”. A garbage collector has to process the objects that are still alive, hence, reusing objects <i>raises</i> the load on the garbage collector. It could decrease the number of GC invocations when the speculative remembering turned out right, however, even then, it won’t compensate the higher costs of the garbage collection. But all unused cached nodes will even raise the number of invocations."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671040568,"creation_date":1671039765,"answer_id":74802294,"question_id":74801899,"body_markdown":"&gt; Moreover, it could store the unused Nodes under a soft reference so as not to waste memory. Reusing Nodes should reduce the load on the garbage collector and decrease the number of its invocations. \r\n\r\nJava&#39;s garbage collection is optimized for the case of having many short-lived objects over having longer-lived objects -- especially for small objects like linked list nodes.  Due to the generational approach of Java&#39;s GC, it usually performs better to throw away existing objects and reallocate them.  Additionally, maintaining soft references can often add noticeable overhead.\r\n\r\nThe approach you describe would make things worse, not better, for most applications.  In general, the Java garbage collector is _extremely_ good at its job, and trying to manually manage Java objects for memory reasons rarely beats it.","title":"Why don`t Java containers like HashMap or LinkedList reuse internal Nodes which were deleted when adding new elements?","body":"<blockquote>\n<p>Moreover, it could store the unused Nodes under a soft reference so as not to waste memory. Reusing Nodes should reduce the load on the garbage collector and decrease the number of its invocations.</p>\n</blockquote>\n<p>Java's garbage collection is optimized for the case of having many short-lived objects over having longer-lived objects -- especially for small objects like linked list nodes.  Due to the generational approach of Java's GC, it usually performs better to throw away existing objects and reallocate them.  Additionally, maintaining soft references can often add noticeable overhead.</p>\n<p>The approach you describe would make things worse, not better, for most applications.  In general, the Java garbage collector is <em>extremely</em> good at its job, and trying to manually manage Java objects for memory reasons rarely beats it.</p>\n"}],"owner":{"account_id":10594551,"reputation":69,"user_id":11430763,"display_name":"Дмитрий Воронецкий"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1671040568,"creation_date":1671037734,"question_id":74801899,"body_markdown":"A class like LinkedList&lt;E&gt; stores objects in instances of an internal class called Node. Each time a new element is added, a new Node is created with the &#39;new&#39; operator. Why does not it try to reuse Nodes that were previously created for elements which were later deleted?\r\nThe LinkedList could store a list of nodes created for elements that were deleted and try to reuse them when new elements are added. Moreover, it could store the unused Nodes under a soft reference so as not to waste memory.\r\nReusing Nodes should reduce the load on the garbage collector and decrease the number of its invocations. \r\nWhy does not Java do that?","title":"Why don`t Java containers like HashMap or LinkedList reuse internal Nodes which were deleted when adding new elements?","body":"<p>A class like LinkedList stores objects in instances of an internal class called Node. Each time a new element is added, a new Node is created with the 'new' operator. Why does not it try to reuse Nodes that were previously created for elements which were later deleted?\nThe LinkedList could store a list of nodes created for elements that were deleted and try to reuse them when new elements are added. Moreover, it could store the unused Nodes under a soft reference so as not to waste memory.\nReusing Nodes should reduce the load on the garbage collector and decrease the number of its invocations.\nWhy does not Java do that?</p>\n"},{"tags":["java","android","websocket","okhttp"],"answers":[{"tags":[],"owner":{"account_id":6493537,"reputation":284,"user_id":5026806,"display_name":"Javier Refuerzo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671040483,"creation_date":1671040483,"answer_id":74802428,"question_id":74800314,"body_markdown":"\r\nVerify you manifest has Internet permission\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n\r\nVerify that you have clear traffic for unsecure ws connection\r\n\r\n    &lt;application\r\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\r\n\r\n    &lt;/application&gt;\r\n\r\n\r\n\r\nImplement the WebSocketListener and override onFailure to see errors.\r\n\r\n    @Override\r\n    public void onFailure(@NotNull WebSocket webSocket, @NotNull Throwable t, @Nullable Response response) {\r\n        Log.v(LOG_TAG, &quot;OnFailure: &quot; + response + &quot;, &quot; + t);\r\n        super.onFailure(webSocket, t, response);\r\n    }\r\n\r\n","title":"android - OkHttp3: unable to connect to websocket in android","body":"<p>Verify you manifest has Internet permission</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n</code></pre>\n<p>Verify that you have clear traffic for unsecure ws connection</p>\n<pre><code>&lt;application\n    android:usesCleartextTraffic=&quot;true&quot;&gt;\n\n&lt;/application&gt;\n</code></pre>\n<p>Implement the WebSocketListener and override onFailure to see errors.</p>\n<pre><code>@Override\npublic void onFailure(@NotNull WebSocket webSocket, @NotNull Throwable t, @Nullable Response response) {\n    Log.v(LOG_TAG, &quot;OnFailure: &quot; + response + &quot;, &quot; + t);\n    super.onFailure(webSocket, t, response);\n}\n</code></pre>\n"}],"owner":{"account_id":22827343,"reputation":21,"user_id":16976400,"display_name":"KZB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74802428,"answer_count":1,"score":0,"last_activity_date":1671040483,"creation_date":1671030579,"question_id":74800314,"body_markdown":"I have a websocket hosted on a server which has been tested and works. I cant identify any error messages in the logs.\r\n\r\nThe connect to the servers websocket fails with no error\r\n\r\nBtw I am new with android.\r\n\r\nHere is the code from android. The WebListener class in empty.\r\n```java\r\npackage kean.pathfinder;\r\n\r\nimport android.Manifest;\r\nimport android.content.Context;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Location;\r\nimport android.location.LocationListener;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\nimport android.os.PersistableBundle;\r\nimport android.widget.Button;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.MapView;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.Polyline;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.IOException;\r\nimport java.util.concurrent.atomic.AtomicReference;\r\n\r\nimport kean.pathfinder.websocket.WebListener;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.WebSocket;\r\n\r\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback, LocationListener {\r\n\r\n    private MapView map;\r\n\r\n    private final Path path = new Path();\r\n    private GoogleMap googleMap;\r\n    private LocationManager locationManager;\r\n    private WebSocket ws;\r\n    private OkHttpClient client;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        map = findViewById(R.id.map);\r\n        Button start = findViewById(R.id.start);\r\n        Button undo = findViewById(R.id.undo);\r\n        Button clear = findViewById(R.id.clear);\r\n\r\n        client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder().url(&quot;ws://myServer.ip&quot;).build();\r\n        WebListener listener = new WebListener();\r\n        ws = client.newWebSocket(request,listener);\r\n\r\n        ws.send(&quot;Hi from android&quot;);\r\n\r\n        ws.close(1000,&quot;Session end&quot;);\r\n\r\n        start.setOnClickListener(l -&gt; {\r\n            try {\r\n                JSONObject object = new JSONObject();\r\n                JSONArray array = new JSONArray();\r\n                for (LatLng latLng : path.getPoints()){\r\n                    JSONObject point = new JSONObject();\r\n                    point.put(&quot;lat&quot;,latLng.latitude);\r\n                    point.put(&quot;lng&quot;,latLng.longitude);\r\n                    array.put(point);\r\n                }\r\n                object.put(&quot;points&quot;,array);\r\n                ws.send(object.toString());\r\n            } catch (JSONException e){\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n        undo.setOnClickListener(l -&gt; {\r\n            path.undo();\r\n            updatePoly();\r\n        });\r\n        clear.setOnClickListener(l -&gt; {\r\n            path.clear();\r\n            updatePoly();\r\n        });\r\n\r\n\r\n        map.getMapAsync(this);\r\n        map.onCreate(savedInstanceState);\r\n\r\n        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n\r\n        requestLocation();\r\n    }\r\n\r\n    public void onMapReady(@NonNull GoogleMap googleMap) {\r\n        googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);\r\n        this.googleMap = googleMap;\r\n\r\n        googleMap.setOnMapClickListener(l -&gt; {\r\n            path.add(l);\r\n            updatePoly();\r\n        });\r\n    }\r\n\r\n    private final AtomicReference&lt;Polyline&gt; polyline = new AtomicReference&lt;&gt;();\r\n    private void updatePoly(){\r\n        Polyline p = polyline.get();\r\n        if (p != null) p.remove();\r\n        polyline.set(googleMap.addPolyline(path.getPoly()));\r\n    }\r\n\r\n    public void onLocationChanged(@NonNull Location location) {\r\n        LatLng latLng = new LatLng(location.getLatitude(),location.getLongitude());\r\n        googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng,50));\r\n        locationManager.removeUpdates(this);\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == 1){\r\n            requestLocation();\r\n        }\r\n    }\r\n\r\n    private void requestLocation()\r\n    {\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},1);\r\n            return;\r\n        }\r\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 400L, 1000f, this);\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        map.onStart();\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        map.onResume();\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        map.onPause();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        map.onStop();\r\n        ws.close(1000,&quot;Session ended&quot;);\r\n        client.dispatcher().executorService().shutdown();\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        map.onDestroy();\r\n    }\r\n\r\n    @Override\r\n    public void onSaveInstanceState(@NonNull Bundle outState, @NonNull PersistableBundle outPersistentState) {\r\n        super.onSaveInstanceState(outState, outPersistentState);\r\n        map.onSaveInstanceState(outState);\r\n    }\r\n\r\n    @Override\r\n    public void onLowMemory() {\r\n        super.onLowMemory();\r\n        map.onLowMemory();\r\n    }\r\n}\r\n```\r\nHere is the manifest file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.PathFinder&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;android.app.lib_name&quot;\r\n                android:value=&quot;&quot; /&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.maps.v2.API_KEY&quot;\r\n            android:value=&quot;token&quot; /&gt;\r\n\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\n\r\n\r\nI have also tested the code in a normal java project and it worked.\r\nHere is the code\r\n```java\r\npackage org.example;\r\n\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.WebSocket;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        Request request = new Request.Builder().url(&quot;ws://myServer.ip&quot;).build();\r\n        // Empty class\r\n        WebListener listener = new WebListener();\r\n        WebSocket ws = client.newWebSocket(request,listener);\r\n\r\n        ws.send(&quot;Hello World&quot;);\r\n\r\n        ws.close(1000,&quot;End&quot;);\r\n\r\n        client.dispatcher().executorService().shutdown();\r\n    }\r\n}\r\n```\r\n","title":"android - OkHttp3: unable to connect to websocket in android","body":"<p>I have a websocket hosted on a server which has been tested and works. I cant identify any error messages in the logs.</p>\n<p>The connect to the servers websocket fails with no error</p>\n<p>Btw I am new with android.</p>\n<p>Here is the code from android. The WebListener class in empty.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package kean.pathfinder;\n\nimport android.Manifest;\nimport android.content.Context;\nimport android.content.pm.PackageManager;\nimport android.location.Location;\nimport android.location.LocationListener;\nimport android.location.LocationManager;\nimport android.os.Bundle;\nimport android.os.PersistableBundle;\nimport android.widget.Button;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\n\nimport com.google.android.gms.maps.CameraUpdateFactory;\nimport com.google.android.gms.maps.GoogleMap;\nimport com.google.android.gms.maps.MapView;\nimport com.google.android.gms.maps.OnMapReadyCallback;\nimport com.google.android.gms.maps.model.LatLng;\nimport com.google.android.gms.maps.model.Polyline;\n\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.IOException;\nimport java.util.concurrent.atomic.AtomicReference;\n\nimport kean.pathfinder.websocket.WebListener;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.WebSocket;\n\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback, LocationListener {\n\n    private MapView map;\n\n    private final Path path = new Path();\n    private GoogleMap googleMap;\n    private LocationManager locationManager;\n    private WebSocket ws;\n    private OkHttpClient client;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        map = findViewById(R.id.map);\n        Button start = findViewById(R.id.start);\n        Button undo = findViewById(R.id.undo);\n        Button clear = findViewById(R.id.clear);\n\n        client = new OkHttpClient();\n\n        Request request = new Request.Builder().url(&quot;ws://myServer.ip&quot;).build();\n        WebListener listener = new WebListener();\n        ws = client.newWebSocket(request,listener);\n\n        ws.send(&quot;Hi from android&quot;);\n\n        ws.close(1000,&quot;Session end&quot;);\n\n        start.setOnClickListener(l -&gt; {\n            try {\n                JSONObject object = new JSONObject();\n                JSONArray array = new JSONArray();\n                for (LatLng latLng : path.getPoints()){\n                    JSONObject point = new JSONObject();\n                    point.put(&quot;lat&quot;,latLng.latitude);\n                    point.put(&quot;lng&quot;,latLng.longitude);\n                    array.put(point);\n                }\n                object.put(&quot;points&quot;,array);\n                ws.send(object.toString());\n            } catch (JSONException e){\n                e.printStackTrace();\n            }\n        });\n        undo.setOnClickListener(l -&gt; {\n            path.undo();\n            updatePoly();\n        });\n        clear.setOnClickListener(l -&gt; {\n            path.clear();\n            updatePoly();\n        });\n\n\n        map.getMapAsync(this);\n        map.onCreate(savedInstanceState);\n\n        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n\n        requestLocation();\n    }\n\n    public void onMapReady(@NonNull GoogleMap googleMap) {\n        googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);\n        this.googleMap = googleMap;\n\n        googleMap.setOnMapClickListener(l -&gt; {\n            path.add(l);\n            updatePoly();\n        });\n    }\n\n    private final AtomicReference&lt;Polyline&gt; polyline = new AtomicReference&lt;&gt;();\n    private void updatePoly(){\n        Polyline p = polyline.get();\n        if (p != null) p.remove();\n        polyline.set(googleMap.addPolyline(path.getPoly()));\n    }\n\n    public void onLocationChanged(@NonNull Location location) {\n        LatLng latLng = new LatLng(location.getLatitude(),location.getLongitude());\n        googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng,50));\n        locationManager.removeUpdates(this);\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode == 1){\n            requestLocation();\n        }\n    }\n\n    private void requestLocation()\n    {\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},1);\n            return;\n        }\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 400L, 1000f, this);\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        map.onStart();\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        map.onResume();\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        map.onPause();\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        map.onStop();\n        ws.close(1000,&quot;Session ended&quot;);\n        client.dispatcher().executorService().shutdown();\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        map.onDestroy();\n    }\n\n    @Override\n    public void onSaveInstanceState(@NonNull Bundle outState, @NonNull PersistableBundle outPersistentState) {\n        super.onSaveInstanceState(outState, outPersistentState);\n        map.onSaveInstanceState(outState);\n    }\n\n    @Override\n    public void onLowMemory() {\n        super.onLowMemory();\n        map.onLowMemory();\n    }\n}\n</code></pre>\n<p>Here is the manifest file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.PathFinder&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;&quot; /&gt;\n        &lt;/activity&gt;\n\n        &lt;meta-data\n            android:name=&quot;com.google.android.maps.v2.API_KEY&quot;\n            android:value=&quot;token&quot; /&gt;\n\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>I have also tested the code in a normal java project and it worked.\nHere is the code</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.WebSocket;\n\npublic class Main {\n    public static void main(String[] args) {\n        OkHttpClient client = new OkHttpClient();\n\n        Request request = new Request.Builder().url(&quot;ws://myServer.ip&quot;).build();\n        // Empty class\n        WebListener listener = new WebListener();\n        WebSocket ws = client.newWebSocket(request,listener);\n\n        ws.send(&quot;Hello World&quot;);\n\n        ws.close(1000,&quot;End&quot;);\n\n        client.dispatcher().executorService().shutdown();\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","jsf","jakarta-ee"],"comments":[{"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"score":0,"creation_date":1671354645,"post_id":74802379,"comment_id":132078276,"body_markdown":"Have a look at https://balusc.omnifaces.org/2020/04/jsf-23-tutorial-with-eclipse-maven.html","body":"Have a look at <a href=\"https://balusc.omnifaces.org/2020/04/jsf-23-tutorial-with-eclipse-maven.html\" rel=\"nofollow noreferrer\">balusc.omnifaces.org/2020/04/&hellip;</a>"},{"owner":{"account_id":3931237,"reputation":21,"user_id":11368494,"display_name":"Edufa"},"score":0,"creation_date":1671546274,"post_id":74802379,"comment_id":132119150,"body_markdown":"hi, I saw this link, it is very good and shows all the steps on how to configure the environment, but it doesn&#39;t help with my problem. with the environment configured how to make eclipe&#39;s code assist identify classes annotated as @Named in *.xhtml pages","body":"hi, I saw this link, it is very good and shows all the steps on how to configure the environment, but it doesn&#39;t help with my problem. with the environment configured how to make eclipe&#39;s code assist identify classes annotated as @Named in *.xhtml pages"},{"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"score":0,"creation_date":1671619943,"post_id":74802379,"comment_id":132136596,"body_markdown":"Open the facelet with &quot;JBoss Tools HTML editor&quot;","body":"Open the facelet with &quot;JBoss Tools HTML editor&quot;"},{"owner":{"account_id":3931237,"reputation":21,"user_id":11368494,"display_name":"Edufa"},"score":0,"creation_date":1671624616,"post_id":74802379,"comment_id":132138028,"body_markdown":"@grigouille unfortunately it didn&#39;t work in eclipse 2022-12 + jakarta 10","body":"@grigouille unfortunately it didn&#39;t work in eclipse 2022-12 + jakarta 10"}],"owner":{"account_id":3931237,"reputation":21,"user_id":11368494,"display_name":"Edufa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1671040221,"creation_date":1671040221,"question_id":74802379,"body_markdown":"I&#39;m trying to use eclipse&#39;s code assist to access my ManagedBean, on pages with Facelets, but when I press Ctrl+Space, it doesn&#39;t work. Nothing appears.\r\n\r\nHow can I enable this feature in Eclipse? Is this a known issue?\r\n\r\nI tried installing JBoss Tools 4.26 and it didn&#39;t work.\r\n\r\nIs there any configuration for this to work in the latest version of eclipse?\r\n\r\n\r\ninformation:\r\n\r\n- I&#39;m using a fresh installation of eclipse 2022-12. \r\n- openjdk 17, \r\n- Tomcat 10.1\r\n- Jakarta 10, \r\n- Jakarta Servlet 6, \r\n- Jakarta CDI 4, \r\n- Jakarta Faces 4\r\n\r\n","title":"How to make code assist work in eclipse using jakarta faces + facelets","body":"<p>I'm trying to use eclipse's code assist to access my ManagedBean, on pages with Facelets, but when I press Ctrl+Space, it doesn't work. Nothing appears.</p>\n<p>How can I enable this feature in Eclipse? Is this a known issue?</p>\n<p>I tried installing JBoss Tools 4.26 and it didn't work.</p>\n<p>Is there any configuration for this to work in the latest version of eclipse?</p>\n<p>information:</p>\n<ul>\n<li>I'm using a fresh installation of eclipse 2022-12.</li>\n<li>openjdk 17,</li>\n<li>Tomcat 10.1</li>\n<li>Jakarta 10,</li>\n<li>Jakarta Servlet 6,</li>\n<li>Jakarta CDI 4,</li>\n<li>Jakarta Faces 4</li>\n</ul>\n"},{"tags":["java","spring-boot","authentication","keycloak","security-context"],"owner":{"account_id":17037472,"reputation":31,"user_id":12326204,"display_name":"Lorem ipsum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671039852,"creation_date":1671039852,"question_id":74802308,"body_markdown":"I have a REST API springboot application that uses keycloack as authentication.\r\nAll work fine with authentication and autorization.\r\n\r\nNow I have to schedule some jobs that will have to use resource services. The execution of these services is bound by the fact that there is an authenticated keycloack user and that he has an &#39;admin&#39; role.\r\n\r\nThis is how I check if user is authorized:\r\n  \r\n\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    KeycloakPrincipal&lt;?&gt; userDetails = (KeycloakPrincipal&lt;?&gt;) authentication.getPrincipal();\r\n    AccessToken accessToken = userDetails.getKeycloakSecurityContext().getToken();\r\n    AccessToken.Access resourceAccess = accessToken.getResourceAccess(env.getProperty(&quot;keycloak.resource&quot;));\r\n    roles = resourceAccess.getRoles();\r\n    boolean isAuthorized = userRoles.contains(&#39;admin&#39;)\r\n\r\nHow can I set my admin user in the SecurityContextHolder?","title":"How to manually authenticate keycloack user when execute a scheduled job in springboot application","body":"<p>I have a REST API springboot application that uses keycloack as authentication.\nAll work fine with authentication and autorization.</p>\n<p>Now I have to schedule some jobs that will have to use resource services. The execution of these services is bound by the fact that there is an authenticated keycloack user and that he has an 'admin' role.</p>\n<p>This is how I check if user is authorized:</p>\n<pre><code>Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\nKeycloakPrincipal&lt;?&gt; userDetails = (KeycloakPrincipal&lt;?&gt;) authentication.getPrincipal();\nAccessToken accessToken = userDetails.getKeycloakSecurityContext().getToken();\nAccessToken.Access resourceAccess = accessToken.getResourceAccess(env.getProperty(&quot;keycloak.resource&quot;));\nroles = resourceAccess.getRoles();\nboolean isAuthorized = userRoles.contains('admin')\n</code></pre>\n<p>How can I set my admin user in the SecurityContextHolder?</p>\n"},{"tags":["java","mysql","spring-boot","jackson","r2dbc"],"comments":[{"owner":{"account_id":5096216,"reputation":122,"user_id":4118062,"display_name":"fabiohbarbosa"},"score":0,"creation_date":1671039875,"post_id":73448705,"comment_id":132013538,"body_markdown":"Did you get a solution for this? I&#39;ve got the same issue","body":"Did you get a solution for this? I&#39;ve got the same issue"}],"owner":{"account_id":20423221,"reputation":183,"user_id":14983790,"display_name":"Mike"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671039852,"creation_date":1661188030,"question_id":73448705,"body_markdown":"I am working with Spring [WebFlux](https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html) and [r2dbc](https://docs.spring.io/spring-data/r2dbc/docs/current/reference/html/).\r\n\r\nI have an entity with an enum field, and I would like to store it as tinyint in mysql while serializing as string.\r\n\r\n// Order.java\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Table(&quot;orders&quot;)\r\n    public class Order {\r\n        @Id\r\n        Long id;\r\n\r\n        StatusEnum status;\r\n    }\r\n\r\n// StatusEnum.java\r\n\r\n    @AllArgsConstructor\r\n    public enum StatusEnum {\r\n        PENDING(11),\r\n        IN_PROGRESS(12),\r\n        SUCCESSFUL(13),\r\n        FAILED(14),\r\n\r\n        UNKNOWN(255);\r\n\r\n        final int value;\r\n    }\r\n\r\n// sql\r\n\r\n    CREATE TABLE IF NOT EXISTS orders (\r\n        id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n        status TINYINT UNSIGNED NOT NULL DEFAULT 255\r\n    )  ENGINE=INNODB;\r\n\r\n// API result for e.g. `GET /api/orders`\r\n\r\n    [\r\n        { &quot;id&quot;: 1, &quot;status&quot;: &quot;PENDING&quot; },\r\n        { &quot;id&quot;: 2, &quot;status&quot;: &quot;IN_PROGRESS&quot; },\r\n        { &quot;id&quot;: 3, &quot;status&quot;: &quot;SUCCESSFUL&quot; },\r\n        { &quot;id&quot;: 4, &quot;status&quot;: &quot;FAILED&quot; }\r\n    ]\r\n\r\nIt reported error when inserting records:\r\n\r\n    Incorrect integer value: &#39;PENDING&#39; for column &#39;status&#39; at row 1; nested exception is io.r2dbc.spi.R2dbcNonTransientResourceException\r\n\r\nHow can I resolve it? Thanks.","title":"how to store enum as tinyint in mysql with r2dbc","body":"<p>I am working with Spring <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html\" rel=\"nofollow noreferrer\">WebFlux</a> and <a href=\"https://docs.spring.io/spring-data/r2dbc/docs/current/reference/html/\" rel=\"nofollow noreferrer\">r2dbc</a>.</p>\n<p>I have an entity with an enum field, and I would like to store it as tinyint in mysql while serializing as string.</p>\n<p>// Order.java</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(&quot;orders&quot;)\npublic class Order {\n    @Id\n    Long id;\n\n    StatusEnum status;\n}\n</code></pre>\n<p>// StatusEnum.java</p>\n<pre><code>@AllArgsConstructor\npublic enum StatusEnum {\n    PENDING(11),\n    IN_PROGRESS(12),\n    SUCCESSFUL(13),\n    FAILED(14),\n\n    UNKNOWN(255);\n\n    final int value;\n}\n</code></pre>\n<p>// sql</p>\n<pre><code>CREATE TABLE IF NOT EXISTS orders (\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n    status TINYINT UNSIGNED NOT NULL DEFAULT 255\n)  ENGINE=INNODB;\n</code></pre>\n<p>// API result for e.g. <code>GET /api/orders</code></p>\n<pre><code>[\n    { &quot;id&quot;: 1, &quot;status&quot;: &quot;PENDING&quot; },\n    { &quot;id&quot;: 2, &quot;status&quot;: &quot;IN_PROGRESS&quot; },\n    { &quot;id&quot;: 3, &quot;status&quot;: &quot;SUCCESSFUL&quot; },\n    { &quot;id&quot;: 4, &quot;status&quot;: &quot;FAILED&quot; }\n]\n</code></pre>\n<p>It reported error when inserting records:</p>\n<pre><code>Incorrect integer value: 'PENDING' for column 'status' at row 1; nested exception is io.r2dbc.spi.R2dbcNonTransientResourceException\n</code></pre>\n<p>How can I resolve it? Thanks.</p>\n"},{"tags":["java","jpa","jpa-2.0","bean-validation"],"comments":[{"owner":{"account_id":1062360,"reputation":37721,"user_id":1063716,"accept_rate":94,"display_name":"Steve Chambers"},"score":2,"creation_date":1389776255,"post_id":2781771,"comment_id":31801754,"body_markdown":"possible duplicate of [Cross field validation with Hibernate Validator (JSR 303)](http://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303\">Cross field validation with Hibernate Validator (JSR 303)</a>"}],"answers":[{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":133,"is_accepted":true,"score":133,"last_activity_date":1636813306,"creation_date":1273174254,"answer_id":2783859,"question_id":2781771,"body_markdown":"For multiple properties validation, you should use class-level constraints. From \r\n[Bean Validation Sneak Peek part II: custom constraints][1]:\r\n\r\n&gt; ### Class-level constraints\r\n&gt; \r\n&gt; Some of you have expressed concerns\r\n&gt; about the ability to apply a\r\n&gt; constraint spanning multiple\r\n&gt; properties, or to express constraint\r\n&gt; which depend on several properties.\r\n&gt; The classical example is address\r\n&gt; validation. Addresses have intricate\r\n&gt; rules:\r\n&gt; \r\n&gt; * a street name is somewhat standard and must certainly have a length limit\r\n&gt; * the zip code structure entirely depends on the country\r\n&gt; * the city can often be correlated to a zipcode and some error checking can\r\n&gt; be done (provided that a validation\r\n&gt; service is accessible)\r\n&gt; * because of these interdependencies a simple property level constraint does\r\n&gt; to fit the bill\r\n&gt; \r\n&gt; The solution offered by the Bean\r\n&gt; Validation specification is two-fold:\r\n&gt; \r\n&gt; * it offers the ability to force a set of constraints to be applied before an\r\n&gt; other set of constraints through the\r\n&gt; use of groups and group sequences.\r\n&gt; This subject will be covered in the\r\n&gt; next blog entry\r\n&gt; * it allows to define class level constraints\r\n&gt; \r\n&gt; Class level constraints are regular\r\n&gt; constraints (annotation /\r\n&gt; implementation duo) which apply on a\r\n&gt; class rather than a property. Said\r\n&gt; differently, class-level constraints\r\n&gt; receive the object instance (rather\r\n&gt; than the property value) in `isValid`.\r\n&gt; \r\n&gt;     @AddressAnnotation \r\n&gt;     public class Address {\r\n&gt;         @NotNull @Max(50) private String street1;\r\n&gt;         @Max(50) private String street2;\r\n&gt;         @Max(10) @NotNull private String zipCode;\r\n&gt;         @Max(20) @NotNull String city;\r\n&gt;         @NotNull private Country country;\r\n&gt;         \r\n&gt;         ...\r\n&gt;     }\r\n&gt;     \r\n&gt;     @Constraint(validatedBy = MultiCountryAddressValidator.class)\r\n&gt;     @Target(ElementType.TYPE)\r\n&gt;     @Retention(RetentionPolicy.RUNTIME)\r\n&gt;     public @interface AddressAnnotation {\r\n&gt;         String message() default &quot;{error.address}&quot;;\r\n&gt;         Class&lt;?&gt;[] groups() default { };\r\n&gt;         Class&lt;? extends Payload&gt;[] payload() default { };\r\n&gt;     }\r\n&gt;     \r\n&gt;     public class MultiCountryAddressValidator implements ConstraintValidator&lt;AddressAnnotation, Address&gt; {\r\n&gt;         public void initialize(AddressAnnotation constraintAnnotation) {\r\n&gt;         // initialize the zipcode/city/country correlation service\r\n&gt;         }\r\n&gt;     \r\n&gt;         /**\r\n&gt;          * Validate zipcode and city depending on the country\r\n&gt;          */\r\n&gt;         public boolean isValid(Address object, ConstraintValidatorContext context) {\r\n&gt;             if (!(object instanceof Address)) {\r\n&gt;                 throw new IllegalArgumentException(&quot;@AddressAnnotation only applies to Address objects&quot;);\r\n&gt;             }\r\n&gt;             Address address = (Address) object;\r\n&gt;             Country country = address.getCountry();\r\n&gt;             if (country.getISO2() == &quot;FR&quot;) {\r\n&gt;                 // check address.getZipCode() structure for France (5 numbers)\r\n&gt;                 // check zipcode and city correlation (calling an external service?)\r\n&gt;                 return isValid;\r\n&gt;             } else if (country.getISO2() == &quot;GR&quot;) {\r\n&gt;                 // check address.getZipCode() structure for Greece\r\n&gt;                 // no zipcode / city correlation available at the moment\r\n&gt;                 return isValid;\r\n&gt;             }\r\n&gt;             // ...\r\n&gt;         }\r\n&gt;     }\r\n&gt; \r\n&gt; The advanced address validation rules\r\n&gt; have been left out of the address\r\n&gt; object and implemented by\r\n&gt; `MultiCountryAddressValidator`. By\r\n&gt; accessing the object instance, class\r\n&gt; level constraints have a lot of\r\n&gt; flexibility and can validate multiple\r\n&gt; correlated properties. Note that\r\n&gt; ordering is left out of the equation\r\n&gt; here, we will come back to it in the\r\n&gt; next post.\r\n&gt; \r\n&gt; The expert group has discussed various\r\n&gt; multiple properties support\r\n&gt; approaches: we think the class level\r\n&gt; constraint approach provides both\r\n&gt; enough simplicity and flexibility\r\n&gt; compared to other property level\r\n&gt; approaches involving dependencies.\r\n&gt; Your feedback is welcome.\r\n\r\n  [1]: https://in.relation.to/2008/04/01/bean-validation-sneak-peek-part-ii-custom-constraints/#H-ClasslevelConstraints","title":"How can I validate two or more fields in combination?","body":"<p>For multiple properties validation, you should use class-level constraints. From\n<a href=\"https://in.relation.to/2008/04/01/bean-validation-sneak-peek-part-ii-custom-constraints/#H-ClasslevelConstraints\" rel=\"noreferrer\">Bean Validation Sneak Peek part II: custom constraints</a>:</p>\n<blockquote>\n<h3>Class-level constraints</h3>\n<p>Some of you have expressed concerns\nabout the ability to apply a\nconstraint spanning multiple\nproperties, or to express constraint\nwhich depend on several properties.\nThe classical example is address\nvalidation. Addresses have intricate\nrules:</p>\n<ul>\n<li>a street name is somewhat standard and must certainly have a length limit</li>\n<li>the zip code structure entirely depends on the country</li>\n<li>the city can often be correlated to a zipcode and some error checking can\nbe done (provided that a validation\nservice is accessible)</li>\n<li>because of these interdependencies a simple property level constraint does\nto fit the bill</li>\n</ul>\n<p>The solution offered by the Bean\nValidation specification is two-fold:</p>\n<ul>\n<li>it offers the ability to force a set of constraints to be applied before an\nother set of constraints through the\nuse of groups and group sequences.\nThis subject will be covered in the\nnext blog entry</li>\n<li>it allows to define class level constraints</li>\n</ul>\n<p>Class level constraints are regular\nconstraints (annotation /\nimplementation duo) which apply on a\nclass rather than a property. Said\ndifferently, class-level constraints\nreceive the object instance (rather\nthan the property value) in <code>isValid</code>.</p>\n<pre><code>@AddressAnnotation \npublic class Address {\n    @NotNull @Max(50) private String street1;\n    @Max(50) private String street2;\n    @Max(10) @NotNull private String zipCode;\n    @Max(20) @NotNull String city;\n    @NotNull private Country country;\n    \n    ...\n}\n\n@Constraint(validatedBy = MultiCountryAddressValidator.class)\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface AddressAnnotation {\n    String message() default &quot;{error.address}&quot;;\n    Class&lt;?&gt;[] groups() default { };\n    Class&lt;? extends Payload&gt;[] payload() default { };\n}\n\npublic class MultiCountryAddressValidator implements ConstraintValidator&lt;AddressAnnotation, Address&gt; {\n    public void initialize(AddressAnnotation constraintAnnotation) {\n    // initialize the zipcode/city/country correlation service\n    }\n\n    /**\n     * Validate zipcode and city depending on the country\n     */\n    public boolean isValid(Address object, ConstraintValidatorContext context) {\n        if (!(object instanceof Address)) {\n            throw new IllegalArgumentException(&quot;@AddressAnnotation only applies to Address objects&quot;);\n        }\n        Address address = (Address) object;\n        Country country = address.getCountry();\n        if (country.getISO2() == &quot;FR&quot;) {\n            // check address.getZipCode() structure for France (5 numbers)\n            // check zipcode and city correlation (calling an external service?)\n            return isValid;\n        } else if (country.getISO2() == &quot;GR&quot;) {\n            // check address.getZipCode() structure for Greece\n            // no zipcode / city correlation available at the moment\n            return isValid;\n        }\n        // ...\n    }\n}\n</code></pre>\n<p>The advanced address validation rules\nhave been left out of the address\nobject and implemented by\n<code>MultiCountryAddressValidator</code>. By\naccessing the object instance, class\nlevel constraints have a lot of\nflexibility and can validate multiple\ncorrelated properties. Note that\nordering is left out of the equation\nhere, we will come back to it in the\nnext post.</p>\n<p>The expert group has discussed various\nmultiple properties support\napproaches: we think the class level\nconstraint approach provides both\nenough simplicity and flexibility\ncompared to other property level\napproaches involving dependencies.\nYour feedback is welcome.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":40043,"reputation":18749,"user_id":115835,"display_name":"Hardy"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1567530139,"creation_date":1291646607,"answer_id":4367525,"question_id":2781771,"body_markdown":"A custom class level validator is the way to go, when you want to stay with the Bean Validation specification, example [here][1].\r\n\r\nIf you are happy to use a Hibernate Validator feature, you could use *[@ScriptAssert][2]*, which is provided since Validator-4.1.0.Final. Exceprt from its JavaDoc:\r\n\r\n&gt; Script expressions can be written in any scripting or expression\r\n&gt; language, for which a [JSR 223][2] (&quot;Scripting for the JavaTM Platform&quot;)\r\n&gt; compatible engine can be found on the classpath.\r\n\r\nExample:\r\n\r\n&lt;!-- language-all: java --&gt;\r\n\r\n    @ScriptAssert(lang = &quot;javascript&quot;, script = &quot;_this.value1 != null || _this != value2)&quot;)\r\n    public class MyBean {\r\n      private String value1;\r\n      private String value2;\r\n    }\r\n\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-class-level-constraints\r\n  [2]: https://docs.jboss.org/hibernate/stable/validator/api/index.html?org/hibernate/validator/constraints/ScriptAssert.html","title":"How can I validate two or more fields in combination?","body":"<p>A custom class level validator is the way to go, when you want to stay with the Bean Validation specification, example <a href=\"https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-class-level-constraints\" rel=\"noreferrer\">here</a>.</p>\n\n<p>If you are happy to use a Hibernate Validator feature, you could use <em><a href=\"https://docs.jboss.org/hibernate/stable/validator/api/index.html?org/hibernate/validator/constraints/ScriptAssert.html\" rel=\"noreferrer\">@ScriptAssert</a></em>, which is provided since Validator-4.1.0.Final. Exceprt from its JavaDoc:</p>\n\n<blockquote>\n  <p>Script expressions can be written in any scripting or expression\n  language, for which a <a href=\"https://docs.jboss.org/hibernate/stable/validator/api/index.html?org/hibernate/validator/constraints/ScriptAssert.html\" rel=\"noreferrer\">JSR 223</a> (\"Scripting for the JavaTM Platform\")\n  compatible engine can be found on the classpath.</p>\n</blockquote>\n\n<p>Example:</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>@ScriptAssert(lang = \"javascript\", script = \"_this.value1 != null || _this != value2)\")\npublic class MyBean {\n  private String value1;\n  private String value2;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1536403161,"creation_date":1496398884,"answer_id":44326568,"question_id":2781771,"body_markdown":"To work properly with [Bean Validation][2], the example provided in Pascal Thivent&#39;s [answer][1] could be rewritten as follows:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @ValidAddress\r\n    public class Address {\r\n\r\n        @NotNull\r\n        @Size(max = 50)\r\n        private String street1;\r\n\r\n        @Size(max = 50)\r\n        private String street2;\r\n\r\n        @NotNull\r\n        @Size(max = 10)\r\n        private String zipCode;\r\n\r\n        @NotNull\r\n        @Size(max = 20)\r\n        private String city;\r\n\r\n        @Valid\r\n        @NotNull\r\n        private Country country;\r\n\r\n        // Getters and setters\r\n    }\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class Country {\r\n\r\n        @NotNull\r\n        @Size(min = 2, max = 2)\r\n        private String iso2;\r\n\r\n        // Getters and setters\r\n    }\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Documented\r\n    @Target(TYPE)\r\n    @Retention(RUNTIME)\r\n    @Constraint(validatedBy = { MultiCountryAddressValidator.class })\r\n    public @interface ValidAddress {\r\n\r\n        String message() default &quot;{com.example.validation.ValidAddress.message}&quot;;\r\n\r\n        Class&lt;?&gt;[] groups() default {};\r\n\r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class MultiCountryAddressValidator \r\n           implements ConstraintValidator&lt;ValidAddress, Address&gt; {\r\n\r\n        public void initialize(ValidAddress constraintAnnotation) {\r\n\r\n        }\r\n\r\n        @Override\r\n        public boolean isValid(Address address, \r\n                               ConstraintValidatorContext constraintValidatorContext) {\r\n\r\n            Country country = address.getCountry();\r\n            if (country == null || country.getIso2() == null || address.getZipCode() == null) {\r\n                return true;\r\n            }\r\n\r\n            switch (country.getIso2()) {\r\n                case &quot;FR&quot;:\r\n                    return // Check if address.getZipCode() is valid for France\r\n                case &quot;GR&quot;:\r\n                    return // Check if address.getZipCode() is valid for Greece\r\n                default:\r\n                    return true;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/2783859/1426227\r\n  [2]: http://beanvalidation.org/","title":"How can I validate two or more fields in combination?","body":"<p>To work properly with <a href=\"http://beanvalidation.org/\" rel=\"noreferrer\">Bean Validation</a>, the example provided in Pascal Thivent's <a href=\"https://stackoverflow.com/a/2783859/1426227\">answer</a> could be rewritten as follows:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ValidAddress\npublic class Address {\n\n    @NotNull\n    @Size(max = 50)\n    private String street1;\n\n    @Size(max = 50)\n    private String street2;\n\n    @NotNull\n    @Size(max = 10)\n    private String zipCode;\n\n    @NotNull\n    @Size(max = 20)\n    private String city;\n\n    @Valid\n    @NotNull\n    private Country country;\n\n    // Getters and setters\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Country {\n\n    @NotNull\n    @Size(min = 2, max = 2)\n    private String iso2;\n\n    // Getters and setters\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Target(TYPE)\n@Retention(RUNTIME)\n@Constraint(validatedBy = { MultiCountryAddressValidator.class })\npublic @interface ValidAddress {\n\n    String message() default \"{com.example.validation.ValidAddress.message}\";\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class MultiCountryAddressValidator \n       implements ConstraintValidator&lt;ValidAddress, Address&gt; {\n\n    public void initialize(ValidAddress constraintAnnotation) {\n\n    }\n\n    @Override\n    public boolean isValid(Address address, \n                           ConstraintValidatorContext constraintValidatorContext) {\n\n        Country country = address.getCountry();\n        if (country == null || country.getIso2() == null || address.getZipCode() == null) {\n            return true;\n        }\n\n        switch (country.getIso2()) {\n            case \"FR\":\n                return // Check if address.getZipCode() is valid for France\n            case \"GR\":\n                return // Check if address.getZipCode() is valid for Greece\n            default:\n                return true;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14776121,"reputation":273,"user_id":10671001,"display_name":"S Debasish Nayak"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1622645167,"creation_date":1622644798,"answer_id":67807310,"question_id":2781771,"body_markdown":"Programing Language : Java \r\n\r\nThis is a solution that helped me.\r\n\r\nRequirement : \r\n1. On UI there is a table which contains List of Objects which is having Maping to multiple Tables/Objects with fk relationship.\r\n\r\n2. Now the validation is out of multiple fks there are only 3 columns which can&#39;t be duplicated. I mean the combination of 3 can&#39;t be duplicated.\r\n\r\nNote : As I am working on Custom Framework on Java there is no option to use HashCode or equals. If I will use array index iteration that will increase the time complexity which I don&#39;t want.\r\n\r\nSolution:\r\n\r\nI have prepared a String , which is a custom String that contains ID of FK1#ID of FK2#ID of FK3\r\nEx: the String will form like -&gt; 1000L#3000L#1300L#\r\n\r\nThis String, we will add to a set by using add() of set which will return false if duplicate comes up.\r\n\r\nBased on this flag we can throw validation message.\r\n\r\nThis helped me. Some scenario and restriction comes where DS may not help.","title":"How can I validate two or more fields in combination?","body":"<p>Programing Language : Java</p>\n<p>This is a solution that helped me.</p>\n<p>Requirement :</p>\n<ol>\n<li><p>On UI there is a table which contains List of Objects which is having Maping to multiple Tables/Objects with fk relationship.</p>\n</li>\n<li><p>Now the validation is out of multiple fks there are only 3 columns which can't be duplicated. I mean the combination of 3 can't be duplicated.</p>\n</li>\n</ol>\n<p>Note : As I am working on Custom Framework on Java there is no option to use HashCode or equals. If I will use array index iteration that will increase the time complexity which I don't want.</p>\n<p>Solution:</p>\n<p>I have prepared a String , which is a custom String that contains ID of FK1#ID of FK2#ID of FK3\nEx: the String will form like -&gt; 1000L#3000L#1300L#</p>\n<p>This String, we will add to a set by using add() of set which will return false if duplicate comes up.</p>\n<p>Based on this flag we can throw validation message.</p>\n<p>This helped me. Some scenario and restriction comes where DS may not help.</p>\n"},{"tags":[],"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1652205531,"creation_date":1636644955,"answer_id":69930984,"question_id":2781771,"body_markdown":"You can use `@javax.validation.constraints.AssertTrue` validations like this:\r\n\r\n```java\r\npublic class MyModel {\r\n    \r\n    private String value1;\r\n    private String value2;\r\n\r\n    @AssertTrue(message = &quot;Values are invalid&quot;)\r\n    private boolean isValid() {\r\n        return value1 != null || value2 != null;\r\n    }\r\n}\r\n```","title":"How can I validate two or more fields in combination?","body":"<p>You can use <code>@javax.validation.constraints.AssertTrue</code> validations like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyModel {\n    \n    private String value1;\n    private String value2;\n\n    @AssertTrue(message = &quot;Values are invalid&quot;)\n    private boolean isValid() {\n        return value1 != null || value2 != null;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11983,"reputation":71675,"user_id":23368,"accept_rate":92,"display_name":"Daniel Rikowski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162528,"favorite_count":0,"down_vote_count":1,"up_vote_count":138,"accepted_answer_id":2783859,"answer_count":5,"score":137,"last_activity_date":1671039429,"creation_date":1273155696,"question_id":2781771,"body_markdown":"I&#39;m using JPA 2.0/Hibernate validation to validate my models. I now have a situation where the combination of two fields has to be validated:\r\n\r\n\r\n    public class MyModel {\r\n        public Integer getValue1() {\r\n            //...\r\n        }\r\n        public String getValue2() {\r\n            //...\r\n        }\r\n    }\r\n\r\nThe model is *invalid* if both `getValue1()` and `getValue2()` are `null` and valid otherwise.\r\n\r\nHow can I perform this kind of validation with JPA 2.0/Hibernate? With a simple `@NotNull` annotation both getters must be non-null to pass validation.\r\n\r\n\r\n\r\n\r\n","title":"How can I validate two or more fields in combination?","body":"<p>I'm using JPA 2.0/Hibernate validation to validate my models. I now have a situation where the combination of two fields has to be validated:</p>\n\n<pre><code>public class MyModel {\n    public Integer getValue1() {\n        //...\n    }\n    public String getValue2() {\n        //...\n    }\n}\n</code></pre>\n\n<p>The model is <em>invalid</em> if both <code>getValue1()</code> and <code>getValue2()</code> are <code>null</code> and valid otherwise.</p>\n\n<p>How can I perform this kind of validation with JPA 2.0/Hibernate? With a simple <code>@NotNull</code> annotation both getters must be non-null to pass validation.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1670928486,"post_id":74783526,"comment_id":131981398,"body_markdown":"The last element does not have a successor. JavaDocs of `Stream.iterate()` say *The stream terminates as soon as the hasNext predicate returns false.*… Could be the reason for the last element to get skipped.","body":"The last element does not have a successor. JavaDocs of <code>Stream.iterate()</code> say <i>The stream terminates as soon as the hasNext predicate returns false.</i>… Could be the reason for the last element to get skipped."},{"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"score":0,"creation_date":1670928610,"post_id":74783526,"comment_id":131981446,"body_markdown":"I&#39;ve posted some ugly working code, is there anything better I could do?","body":"I&#39;ve posted some ugly working code, is there anything better I could do?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1670929818,"post_id":74783526,"comment_id":131981846,"body_markdown":"Related [How does `Arrays.parallelPrefix(...)` in Java 8 work?](https://stackoverflow.com/questions/52961981/how-does-newly-introduced-arrays-parallelprefix-in-java-8-work)","body":"Related <a href=\"https://stackoverflow.com/questions/52961981/how-does-newly-introduced-arrays-parallelprefix-in-java-8-work\">How does <code>Arrays.parallelPrefix(...)</code> in Java 8 work?</a>"},{"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"score":0,"creation_date":1670929848,"post_id":74783526,"comment_id":131981858,"body_markdown":"Yeah so the actual problem of summing elements isn&#39;t important, it&#39;s the concept of having a stream as input, and then producing a stream as output which is a sequence of dependent calculations","body":"Yeah so the actual problem of summing elements isn&#39;t important, it&#39;s the concept of having a stream as input, and then producing a stream as output which is a sequence of dependent calculations"},{"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"score":0,"creation_date":1670975421,"post_id":74783526,"comment_id":131996311,"body_markdown":"@Holger I think that got messed up on edits, my first buggy code it now there which misses the last element.","body":"@Holger I think that got messed up on edits, my first buggy code it now there which misses the last element."},{"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"score":0,"creation_date":1670975440,"post_id":74783526,"comment_id":131996313,"body_markdown":"Hey thanks all for the help question looks way better now.","body":"Hey thanks all for the help question looks way better now."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1670930863,"creation_date":1670928887,"answer_id":74783703,"question_id":74783526,"body_markdown":"&gt; ... but is there a better solution?\r\n\r\nYes, an elegant solution can be by using [`Arrays#parallelPrefix`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Arrays.html#parallelPrefix(int%5B%5D,java.util.function.IntBinaryOperator)).\r\n\r\n    public class Main {\r\n        public static void main(String args[]) {\r\n            int[] arr = { 1, 2, 3, 4 };\r\n            Arrays.parallelPrefix(arr, Integer::sum);\r\n            System.out.println(Arrays.toString(arr));\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    [1, 3, 6, 10]\r\n\r\nYou can always convert back and forth between `Stream&lt;Integer&gt;` and `int[]` as per your requirement.\r\n\r\n    public class Main {\r\n        public static void main(String args[]) {\r\n            int[] arr = Stream.of(1, 2, 3, 4).mapToInt(Integer::valueOf).toArray();\r\n            Arrays.parallelPrefix(arr, Integer::sum);\r\n            System.out.println(Arrays.toString(arr));\r\n    \r\n            // In case , you need a Stream&lt;Integer&gt; again\r\n            Stream&lt;Integer&gt; resultStream = Arrays.stream(arr).boxed();\r\n    \r\n            // Or want the result as a List&lt;Integer&gt;\r\n            List&lt;Integer&gt; resultList = resultStream.toList();\r\n            System.out.println(resultList);\r\n        }\r\n    }","title":"Stream iterate not using last value","body":"<blockquote>\n<p>... but is there a better solution?</p>\n</blockquote>\n<p>Yes, an elegant solution can be by using <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Arrays.html#parallelPrefix(int%5B%5D,java.util.function.IntBinaryOperator)\" rel=\"noreferrer\"><code>Arrays#parallelPrefix</code></a>.</p>\n<pre><code>public class Main {\n    public static void main(String args[]) {\n        int[] arr = { 1, 2, 3, 4 };\n        Arrays.parallelPrefix(arr, Integer::sum);\n        System.out.println(Arrays.toString(arr));\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>[1, 3, 6, 10]\n</code></pre>\n<p>You can always convert back and forth between <code>Stream&lt;Integer&gt;</code> and <code>int[]</code> as per your requirement.</p>\n<pre><code>public class Main {\n    public static void main(String args[]) {\n        int[] arr = Stream.of(1, 2, 3, 4).mapToInt(Integer::valueOf).toArray();\n        Arrays.parallelPrefix(arr, Integer::sum);\n        System.out.println(Arrays.toString(arr));\n\n        // In case , you need a Stream&lt;Integer&gt; again\n        Stream&lt;Integer&gt; resultStream = Arrays.stream(arr).boxed();\n\n        // Or want the result as a List&lt;Integer&gt;\n        List&lt;Integer&gt; resultList = resultStream.toList();\n        System.out.println(resultList);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671027962,"creation_date":1670942713,"answer_id":74786607,"question_id":74783526,"body_markdown":"&gt; Here&#39;s a generic code illustrating the problem.\r\n&gt; \r\n&gt;     public static &lt;O, I&gt; Stream&lt;O&gt; iterate(O seed, Stream&lt;I&gt; stream,\r\n&gt;                                            BiFunction&lt;I,O,O&gt; function) {\r\n&gt;         \r\n&gt;         return iterate(seed, stream.iterator(), function);\r\n&gt;     }\r\n&gt; \r\n&gt; \r\n&gt; I want to be able to take a stream of dates and then produce a stream\r\n&gt; of balances. That way you don&#39;t need to know how many elements there\r\n&gt; will be, or even the distribution of dates, which makes it a more\r\n&gt; flexible approach.\r\n\r\nI&#39;ve written the following solution based on the assumption that it&#39;s possible to **merge** the **balances** produces in the different threads, and the function `BiFunction&lt;I,O,O&gt;` is [***associative***][associativity], as well as a merging function `BinaryOperator&lt;O&gt;`, that would be responsible for combining resulting values, i.e. *balances*.\r\n\r\nAlso, the value of `seed` should meat the same requirements which are imposed on `identity` of the [`Stream.reduce()`][reduce] operation (otherwise parallel stream would yield an incorrect result). I.e. \r\n\r\n```\r\nmerger.apply(r, mapper.apply(seed, t)) == mapper.apply(t, r)\r\n```\r\n\r\nWhich would not hold true if `seed` would be `1` and both `mapper` and `merger` would be defined as `Integer::sum`, but `i -&gt; i * i` and `seed` `1` the condition would be met.\r\n\r\n***Note** that if at least one of these requirements is not possible to fulfil, streams are not the right tool for this problem*.\r\n\r\nHere&#39;s how it might be implemented using a custom Collector. To define a Collector we can use static method [`Collector.of()`][collector.of].\r\n\r\n    public static &lt;R, T&gt; Stream&lt;R&gt; iterate(R seed, Stream&lt;T&gt; stream,\r\n                                           BiFunction&lt;T, R, R&gt; mapper,\r\n                                           BinaryOperator&lt;R&gt; merger) {\r\n        return stream\r\n            .collect(sequenceCollector(seed, mapper, merger));\r\n    }\r\n    \r\n    public static &lt;R, T&gt; Collector&lt;T, ?, Stream&lt;R&gt;&gt; sequenceCollector(R seed,\r\n                                                                      BiFunction&lt;T, R, R&gt; mapper,\r\n                                                                      BinaryOperator&lt;R&gt; merger) {\r\n        return Collector.of(\r\n            ArrayDeque::new,\r\n            (Deque&lt;R&gt; deque, T next) -&gt;\r\n                deque.add(\r\n                    mapper.apply(next, Objects.requireNonNullElse(deque.peekLast(), seed))\r\n                ),\r\n            (left, right) -&gt; {\r\n                R last = left.getLast();\r\n                right.forEach(next -&gt; left.add(merger.apply(next, last)));\r\n                return left;\r\n            },\r\n            Collection::stream\r\n        );\r\n    }\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        Stream&lt;Integer&gt; input1 = Stream.of(1, 2, 3, 4);\r\n        Stream&lt;Integer&gt; output1 = iterate(0, input1, Integer::sum, Integer::sum);\r\n        \r\n        List&lt;Integer&gt; outputList1 = output1.toList();\r\n        System.out.println(&quot;Sequential: &quot; + outputList1);\r\n        \r\n        Stream&lt;Integer&gt; input2 = Stream.of(1, 2, 3, 4).parallel();\r\n        Stream&lt;Integer&gt; output2 = iterate(0, input2, Integer::sum, Integer::sum);\r\n        \r\n        List&lt;Integer&gt; outputList2 = output2.toList();\r\n        System.out.println(&quot;Parallel:   &quot; + outputList2);\r\n    }\r\n\r\n*Output:*\r\n\r\n```\r\nSequential: [1, 3, 6, 10]\r\nParallel:   [1, 3, 6, 10]\r\n```\r\n\r\n\r\n\r\n   [associativity]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#Associativity\r\n\r\n   [reduce]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#reduce(U,java.util.function.BiFunction,java.util.function.BinaryOperator)\r\n\r\n   [collector.of]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.function.Function,java.util.stream.Collector.Characteristics...)","title":"Stream iterate not using last value","body":"<blockquote>\n<p>Here's a generic code illustrating the problem.</p>\n<pre><code>public static &lt;O, I&gt; Stream&lt;O&gt; iterate(O seed, Stream&lt;I&gt; stream,\n                                       BiFunction&lt;I,O,O&gt; function) {\n    \n    return iterate(seed, stream.iterator(), function);\n}\n</code></pre>\n<p>I want to be able to take a stream of dates and then produce a stream\nof balances. That way you don't need to know how many elements there\nwill be, or even the distribution of dates, which makes it a more\nflexible approach.</p>\n</blockquote>\n<p>I've written the following solution based on the assumption that it's possible to <strong>merge</strong> the <strong>balances</strong> produces in the different threads, and the function <code>BiFunction&lt;I,O,O&gt;</code> is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#Associativity\" rel=\"nofollow noreferrer\"><em><strong>associative</strong></em></a>, as well as a merging function <code>BinaryOperator&lt;O&gt;</code>, that would be responsible for combining resulting values, i.e. <em>balances</em>.</p>\n<p>Also, the value of <code>seed</code> should meat the same requirements which are imposed on <code>identity</code> of the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#reduce(U,java.util.function.BiFunction,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>Stream.reduce()</code></a> operation (otherwise parallel stream would yield an incorrect result). I.e.</p>\n<pre><code>merger.apply(r, mapper.apply(seed, t)) == mapper.apply(t, r)\n</code></pre>\n<p>Which would not hold true if <code>seed</code> would be <code>1</code> and both <code>mapper</code> and <code>merger</code> would be defined as <code>Integer::sum</code>, but <code>i -&gt; i * i</code> and <code>seed</code> <code>1</code> the condition would be met.</p>\n<p><em><strong>Note</strong> that if at least one of these requirements is not possible to fulfil, streams are not the right tool for this problem</em>.</p>\n<p>Here's how it might be implemented using a custom Collector. To define a Collector we can use static method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.function.Function,java.util.stream.Collector.Characteristics...)\" rel=\"nofollow noreferrer\"><code>Collector.of()</code></a>.</p>\n<pre><code>public static &lt;R, T&gt; Stream&lt;R&gt; iterate(R seed, Stream&lt;T&gt; stream,\n                                       BiFunction&lt;T, R, R&gt; mapper,\n                                       BinaryOperator&lt;R&gt; merger) {\n    return stream\n        .collect(sequenceCollector(seed, mapper, merger));\n}\n\npublic static &lt;R, T&gt; Collector&lt;T, ?, Stream&lt;R&gt;&gt; sequenceCollector(R seed,\n                                                                  BiFunction&lt;T, R, R&gt; mapper,\n                                                                  BinaryOperator&lt;R&gt; merger) {\n    return Collector.of(\n        ArrayDeque::new,\n        (Deque&lt;R&gt; deque, T next) -&gt;\n            deque.add(\n                mapper.apply(next, Objects.requireNonNullElse(deque.peekLast(), seed))\n            ),\n        (left, right) -&gt; {\n            R last = left.getLast();\n            right.forEach(next -&gt; left.add(merger.apply(next, last)));\n            return left;\n        },\n        Collection::stream\n    );\n}\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    Stream&lt;Integer&gt; input1 = Stream.of(1, 2, 3, 4);\n    Stream&lt;Integer&gt; output1 = iterate(0, input1, Integer::sum, Integer::sum);\n    \n    List&lt;Integer&gt; outputList1 = output1.toList();\n    System.out.println(&quot;Sequential: &quot; + outputList1);\n    \n    Stream&lt;Integer&gt; input2 = Stream.of(1, 2, 3, 4).parallel();\n    Stream&lt;Integer&gt; output2 = iterate(0, input2, Integer::sum, Integer::sum);\n    \n    List&lt;Integer&gt; outputList2 = output2.toList();\n    System.out.println(&quot;Parallel:   &quot; + outputList2);\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Sequential: [1, 3, 6, 10]\nParallel:   [1, 3, 6, 10]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670987593,"creation_date":1670987593,"answer_id":74793192,"question_id":74783526,"body_markdown":"Try this:\r\n\r\n    AtomicInteger sum = new AtomicInteger(0);\r\n    List&lt;Integer&gt; result = Stream.of(1, 2, 3, 4).map(it -&gt; sum.addAndGet(it)).toList();\r\n    result.forEach(System.out::print);","title":"Stream iterate not using last value","body":"<p>Try this:</p>\n<pre><code>AtomicInteger sum = new AtomicInteger(0);\nList&lt;Integer&gt; result = Stream.of(1, 2, 3, 4).map(it -&gt; sum.addAndGet(it)).toList();\nresult.forEach(System.out::print);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671039163,"creation_date":1671005497,"answer_id":74795240,"question_id":74783526,"body_markdown":"The problem is that the three arguments to `Stream.iterate(…,…,…)` correspond to the three arguments to a `for(…;…;…) …` statement, where the loop’s body corresponds to the chained stream operations. But this doesn’t match an iterator loop, which looks like\r\n\r\n```java\r\nfor(Iterator&lt;I&gt; iterator = …; iterator.hasNext(); ) {\r\n    I elements = iterator.next();\r\n    …\r\n}\r\n```\r\n\r\nIn other words, the right place of the `next()` call would be after the `hasNext()` check, before the remaining loop body, whereas the function passed as third argument to `Stream.iterate(…,…,…)` is evaluated after the loop body equivalent, before the `hasNext()` check.\r\n\r\nA simple solution would be\r\n\r\n```java\r\npublic static &lt;O, I&gt; Stream&lt;O&gt; iterate(\r\n    O seed, Iterator&lt;I&gt; iterator, BiFunction&lt;I,O,O&gt; function) {\r\n\r\n    return Stream.iterate(seed, Objects::nonNull,\r\n        prev -&gt; iterator.hasNext()? function.apply(iterator.next(), prev): null);\r\n}\r\n```\r\n\r\nwhich effectively moves the `hasNext()` check before the `next()` call. But it requires that `null` will never occur as a normal result of the function evaluation, which should be the case for all arithmetic operations.\r\n\r\nOtherwise, you would have to go one level deeper to implement a general-purpose stream operation:\r\n\r\n```java\r\npublic static &lt;O, I&gt; Stream&lt;O&gt; iterate(\r\n    O seed, Stream&lt;I&gt; stream, BiFunction&lt;I,O,O&gt; function) {\r\n\r\n    boolean parallel = stream.isParallel();\r\n    Spliterator&lt;I&gt; sp = stream.spliterator();\r\n\r\n    return StreamSupport.stream(new Spliterators.AbstractSpliterator&lt;O&gt;(\r\n        sp.estimateSize() == Long.MAX_VALUE? Long.MAX_VALUE: sp.estimateSize() + 1,\r\n        sp.characteristics() &amp; Spliterator.SIZED | Spliterator.ORDERED) {\r\n\r\n        O value = seed;\r\n        final Consumer&lt;I&gt; c = i -&gt; value = function.apply(i, value);\r\n        boolean end;\r\n\r\n        @Override\r\n        public boolean tryAdvance(Consumer&lt;? super O&gt; action) {\r\n            if(end) return false;\r\n            O current = value;\r\n            end = !sp.tryAdvance(c);\r\n            action.accept(current);\r\n            return true;\r\n        }\r\n    }, parallel).onClose(stream::close);\r\n}\r\n```\r\n\r\nThis is more complicated, but has no constraints of the values produced by the function and is more efficient than going through an `Iterator`. Note that this solution also cares to retain the current parallel setting and ensures that closing the stream will be delegated to the original stream, which might be important when being backed by a resource, like `Files.lines`, etc.\r\n","title":"Stream iterate not using last value","body":"<p>The problem is that the three arguments to <code>Stream.iterate(…,…,…)</code> correspond to the three arguments to a <code>for(…;…;…) …</code> statement, where the loop’s body corresponds to the chained stream operations. But this doesn’t match an iterator loop, which looks like</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(Iterator&lt;I&gt; iterator = …; iterator.hasNext(); ) {\n    I elements = iterator.next();\n    …\n}\n</code></pre>\n<p>In other words, the right place of the <code>next()</code> call would be after the <code>hasNext()</code> check, before the remaining loop body, whereas the function passed as third argument to <code>Stream.iterate(…,…,…)</code> is evaluated after the loop body equivalent, before the <code>hasNext()</code> check.</p>\n<p>A simple solution would be</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;O, I&gt; Stream&lt;O&gt; iterate(\n    O seed, Iterator&lt;I&gt; iterator, BiFunction&lt;I,O,O&gt; function) {\n\n    return Stream.iterate(seed, Objects::nonNull,\n        prev -&gt; iterator.hasNext()? function.apply(iterator.next(), prev): null);\n}\n</code></pre>\n<p>which effectively moves the <code>hasNext()</code> check before the <code>next()</code> call. But it requires that <code>null</code> will never occur as a normal result of the function evaluation, which should be the case for all arithmetic operations.</p>\n<p>Otherwise, you would have to go one level deeper to implement a general-purpose stream operation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;O, I&gt; Stream&lt;O&gt; iterate(\n    O seed, Stream&lt;I&gt; stream, BiFunction&lt;I,O,O&gt; function) {\n\n    boolean parallel = stream.isParallel();\n    Spliterator&lt;I&gt; sp = stream.spliterator();\n\n    return StreamSupport.stream(new Spliterators.AbstractSpliterator&lt;O&gt;(\n        sp.estimateSize() == Long.MAX_VALUE? Long.MAX_VALUE: sp.estimateSize() + 1,\n        sp.characteristics() &amp; Spliterator.SIZED | Spliterator.ORDERED) {\n\n        O value = seed;\n        final Consumer&lt;I&gt; c = i -&gt; value = function.apply(i, value);\n        boolean end;\n\n        @Override\n        public boolean tryAdvance(Consumer&lt;? super O&gt; action) {\n            if(end) return false;\n            O current = value;\n            end = !sp.tryAdvance(c);\n            action.accept(current);\n            return true;\n        }\n    }, parallel).onClose(stream::close);\n}\n</code></pre>\n<p>This is more complicated, but has no constraints of the values produced by the function and is more efficient than going through an <code>Iterator</code>. Note that this solution also cares to retain the current parallel setting and ensures that closing the stream will be delegated to the original stream, which might be important when being backed by a resource, like <code>Files.lines</code>, etc.</p>\n"}],"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74795240,"answer_count":4,"score":2,"last_activity_date":1671039163,"creation_date":1670928150,"question_id":74783526,"body_markdown":"# Simplified Example\r\n\r\nI have the following code which generates the sum of a series i.e. `1, 1+2, 1+2+3, 1+2+3+4`\r\n\r\n    public static void main(String[] args) {\r\n    \r\n        Stream&lt;Integer&gt; inputStream = Stream.of(1,2,3,4);\r\n        Iterator&lt;Integer&gt; iterator = inputStream.iterator();\r\n        \r\n        Stream&lt;Integer&gt; outputStream = Stream.iterate(\r\n                iterator.next(),\r\n                i -&gt; iterator.hasNext(),\r\n                next -&gt; {\r\n                    return iterator.next() + next;\r\n                }\r\n        );\r\n    \r\n        List&lt;Integer&gt; outputList = outputStream.collect(Collectors.toList());\r\n        System.out.println(outputList);\r\n    \r\n    }\r\n\r\nBut this prints: `[1, 3, 6]`, missing the last element.\r\n\r\n\r\n## Working example but needs Atomic Variable\r\n\r\nNote this seems to get the correct check I want, but is there a better solution? Looks awful:\r\n\r\n    public static void main(String[] args) {\r\n    \r\n        Stream&lt;Integer&gt; inputStream = Stream.of(1,2,3,4);\r\n        Iterator&lt;Integer&gt; iterator = inputStream.iterator();\r\n    \r\n        AtomicBoolean check = new AtomicBoolean(true);\r\n    \r\n        Stream&lt;Integer&gt; outputStream = Stream.iterate(\r\n            iterator.next(),\r\n            i -&gt; check.get(),\r\n            next -&gt; {\r\n                check.set(iterator.hasNext());\r\n                return iterator.hasNext() ? iterator.next() + next : next;\r\n            }\r\n        );\r\n    \r\n        List&lt;Integer&gt; outputList = outputStream.collect(Collectors.toList());\r\n        System.out.println(outputList);\r\n    \r\n    }\r\n\r\n# Generic Problem description\r\n\r\nHere&#39;s a generic code illustrating the problem.\r\n\r\n    public static &lt;O, I&gt; Stream&lt;O&gt; iterate(O seed, Stream&lt;I&gt; stream, BiFunction&lt;I,O,O&gt; function) {\r\n        return iterate(seed, stream.iterator(), function);\r\n    }\r\n    \r\n    public static &lt;O, I&gt; Stream&lt;O&gt; iterate(O seed, Iterator&lt;I&gt; iterator, BiFunction&lt;I,O,O&gt; function) {\r\n        AtomicBoolean hasNext = new AtomicBoolean(true);\r\n        return Stream.iterate(\r\n            seed,\r\n            i -&gt; hasNext.get(),\r\n            next -&gt; {\r\n                hasNext.set(iterator.hasNext());\r\n                return iterator.hasNext() ? function.apply(iterator.next(), next) : next;\r\n            }\r\n        );\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        \r\n        Stream&lt;Integer&gt; inputStream = Stream.of(2,3,4);\r\n        BiFunction&lt;Integer, Integer, Integer&gt; f = Integer::sum;\r\n        Stream&lt;Integer&gt; outputStream = iterate(1, inputStream, f);\r\n        \r\n        List&lt;Integer&gt; outputList = outputStream.collect(Collectors.toList());\r\n        System.out.println(outputList);\r\n        \r\n    }\r\n\r\n# Problem Context\r\n\r\nBasically, I want to do this because I am creating a function which produces a forecast of the balance of an interest bearing account.\r\n\r\nI want to be able to take a stream of dates and then produce a stream of balances. That way you don&#39;t need to know how many elements there will be, or even the distribution of dates, which makes it a more flexible approach.\r\n\r\nAlso note that the next element of the `Stream` depends on the previous. This is why I have a `seed` which represents the first value (does not have a previous value), which would be the opening balance.","title":"Stream iterate not using last value","body":"<h1>Simplified Example</h1>\n<p>I have the following code which generates the sum of a series i.e. <code>1, 1+2, 1+2+3, 1+2+3+4</code></p>\n<pre><code>public static void main(String[] args) {\n\n    Stream&lt;Integer&gt; inputStream = Stream.of(1,2,3,4);\n    Iterator&lt;Integer&gt; iterator = inputStream.iterator();\n    \n    Stream&lt;Integer&gt; outputStream = Stream.iterate(\n            iterator.next(),\n            i -&gt; iterator.hasNext(),\n            next -&gt; {\n                return iterator.next() + next;\n            }\n    );\n\n    List&lt;Integer&gt; outputList = outputStream.collect(Collectors.toList());\n    System.out.println(outputList);\n\n}\n</code></pre>\n<p>But this prints: <code>[1, 3, 6]</code>, missing the last element.</p>\n<h2>Working example but needs Atomic Variable</h2>\n<p>Note this seems to get the correct check I want, but is there a better solution? Looks awful:</p>\n<pre><code>public static void main(String[] args) {\n\n    Stream&lt;Integer&gt; inputStream = Stream.of(1,2,3,4);\n    Iterator&lt;Integer&gt; iterator = inputStream.iterator();\n\n    AtomicBoolean check = new AtomicBoolean(true);\n\n    Stream&lt;Integer&gt; outputStream = Stream.iterate(\n        iterator.next(),\n        i -&gt; check.get(),\n        next -&gt; {\n            check.set(iterator.hasNext());\n            return iterator.hasNext() ? iterator.next() + next : next;\n        }\n    );\n\n    List&lt;Integer&gt; outputList = outputStream.collect(Collectors.toList());\n    System.out.println(outputList);\n\n}\n</code></pre>\n<h1>Generic Problem description</h1>\n<p>Here's a generic code illustrating the problem.</p>\n<pre><code>public static &lt;O, I&gt; Stream&lt;O&gt; iterate(O seed, Stream&lt;I&gt; stream, BiFunction&lt;I,O,O&gt; function) {\n    return iterate(seed, stream.iterator(), function);\n}\n\npublic static &lt;O, I&gt; Stream&lt;O&gt; iterate(O seed, Iterator&lt;I&gt; iterator, BiFunction&lt;I,O,O&gt; function) {\n    AtomicBoolean hasNext = new AtomicBoolean(true);\n    return Stream.iterate(\n        seed,\n        i -&gt; hasNext.get(),\n        next -&gt; {\n            hasNext.set(iterator.hasNext());\n            return iterator.hasNext() ? function.apply(iterator.next(), next) : next;\n        }\n    );\n}\n\npublic static void main(String[] args) {\n    \n    Stream&lt;Integer&gt; inputStream = Stream.of(2,3,4);\n    BiFunction&lt;Integer, Integer, Integer&gt; f = Integer::sum;\n    Stream&lt;Integer&gt; outputStream = iterate(1, inputStream, f);\n    \n    List&lt;Integer&gt; outputList = outputStream.collect(Collectors.toList());\n    System.out.println(outputList);\n    \n}\n</code></pre>\n<h1>Problem Context</h1>\n<p>Basically, I want to do this because I am creating a function which produces a forecast of the balance of an interest bearing account.</p>\n<p>I want to be able to take a stream of dates and then produce a stream of balances. That way you don't need to know how many elements there will be, or even the distribution of dates, which makes it a more flexible approach.</p>\n<p>Also note that the next element of the <code>Stream</code> depends on the previous. This is why I have a <code>seed</code> which represents the first value (does not have a previous value), which would be the opening balance.</p>\n"},{"tags":["java","constants","preprocessor","code-readability","define-syntax"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":4,"creation_date":1671038116,"post_id":74801951,"comment_id":132012992,"body_markdown":"You could use annotations like `@Input` and `@Output`, which you&#39;d define yourself via a `public @interface`. My understanding is you want these merely as markers in the source code, which the annotations would allow some auto-complete. However, you might be served just as well by a comment or structuring your design in a way that inputs/outputs are distinct in some fashion","body":"You could use annotations like <code>@Input</code> and <code>@Output</code>, which you&#39;d define yourself via a <code>public @interface</code>. My understanding is you want these merely as markers in the source code, which the annotations would allow some auto-complete. However, you might be served just as well by a comment or structuring your design in a way that inputs/outputs are distinct in some fashion"},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":1,"creation_date":1671038263,"post_id":74801951,"comment_id":132013049,"body_markdown":"This is going to produce very non-idiomatic Java. Rather than taking C&#39;s habits and porting them to Java, I&#39;d suggest learning (and getting used to) Java&#39;s habits.","body":"This is going to produce very non-idiomatic Java. Rather than taking C&#39;s habits and porting them to Java, I&#39;d suggest learning (and getting used to) Java&#39;s habits."},{"owner":{"account_id":21254355,"reputation":11,"user_id":15636113,"display_name":"IlluSion"},"score":0,"creation_date":1671449513,"post_id":74801951,"comment_id":132094415,"body_markdown":"I understand, thanks a lot for the reply and tips, I will keep them in mind.","body":"I understand, thanks a lot for the reply and tips, I will keep them in mind."}],"answers":[{"tags":[],"owner":{"account_id":21889,"reputation":30982,"user_id":53538,"accept_rate":88,"display_name":"Guss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671038700,"creation_date":1671038256,"answer_id":74802006,"question_id":74801951,"body_markdown":"Java indeed does not have a pre-processor, and your use case doesn&#39;t require that either: you aren&#39;t actually preprocessing the code, you just put in some tags that the compiler can ignore.\r\n\r\nWhat you are looking for are &quot;[annotations](https://docs.oracle.com/javase/tutorial/java/annotations/)&quot; - you basically want to annotate your code with some nice text that will not affect the compiler.\r\n\r\nThis basically requires defining some specialized Java types for this using the `@interface` keyword and then you can use them to write things like:\r\n\r\n```java\r\npublic void doStuff(@Input invar, @Output outvar) {\r\n...\r\n```\r\n\r\nThese annotations can be simply:\r\n\r\n```\r\n@interface Input {}\r\n\r\n@interface Output {}\r\n```\r\n\r\nor you can add more features and even use reflection to examine them in runtime.\r\n\r\nSee the linked documentation above for more details.","title":"Simulating C/C++ empty defines in Java","body":"<p>Java indeed does not have a pre-processor, and your use case doesn't require that either: you aren't actually preprocessing the code, you just put in some tags that the compiler can ignore.</p>\n<p>What you are looking for are &quot;<a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/\" rel=\"nofollow noreferrer\">annotations</a>&quot; - you basically want to annotate your code with some nice text that will not affect the compiler.</p>\n<p>This basically requires defining some specialized Java types for this using the <code>@interface</code> keyword and then you can use them to write things like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void doStuff(@Input invar, @Output outvar) {\n...\n</code></pre>\n<p>These annotations can be simply:</p>\n<pre><code>@interface Input {}\n\n@interface Output {}\n</code></pre>\n<p>or you can add more features and even use reflection to examine them in runtime.</p>\n<p>See the linked documentation above for more details.</p>\n"}],"owner":{"account_id":21254355,"reputation":11,"user_id":15636113,"display_name":"IlluSion"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74802006,"answer_count":1,"score":-1,"last_activity_date":1671038700,"creation_date":1671037935,"question_id":74801951,"body_markdown":"I know Java does not have pre-processor, but I struggle to find a way to do this.\r\n\r\nI am looking to create macros to improve code readibility, to specify which of the functions or parameters are for input or output specifically. In C, this would be done like this :\r\n\r\n```\r\n#define IN\r\n#define OUT\r\n```\r\nAnd these would just be used before the variables and functions. Can I simulate the same behavior in Java?\r\n\r\n\r\nI did not manage to find a way to do this. The only way I found was including defines in the code and first using the cpp pre-processor to replace them, and then run the java code, but maybe there is a better way of doing this? ","title":"Simulating C/C++ empty defines in Java","body":"<p>I know Java does not have pre-processor, but I struggle to find a way to do this.</p>\n<p>I am looking to create macros to improve code readibility, to specify which of the functions or parameters are for input or output specifically. In C, this would be done like this :</p>\n<pre><code>#define IN\n#define OUT\n</code></pre>\n<p>And these would just be used before the variables and functions. Can I simulate the same behavior in Java?</p>\n<p>I did not manage to find a way to do this. The only way I found was including defines in the code and first using the cpp pre-processor to replace them, and then run the java code, but maybe there is a better way of doing this?</p>\n"},{"tags":["java","eclipse","keyboard-shortcuts"],"comments":[{"owner":{"account_id":2889405,"reputation":2350,"user_id":2478531,"accept_rate":80,"display_name":"Pankaj"},"score":0,"creation_date":1597601836,"post_id":63438725,"comment_id":112180235,"body_markdown":"Have you tried `sout` ?","body":"Have you tried <code>sout</code> ?"},{"owner":{"account_id":19308579,"reputation":1,"user_id":14114864,"display_name":"Allen Wang"},"score":0,"creation_date":1597700934,"post_id":63438725,"comment_id":112214714,"body_markdown":"@Pankaj I haven&#39;t, but trying it now would probably work, since `syso` works as well now. The issue mysteriously disappeared.","body":"@Pankaj I haven&#39;t, but trying it now would probably work, since <code>syso</code> works as well now. The issue mysteriously disappeared."}],"answers":[{"tags":[],"owner":{"account_id":27018575,"reputation":9,"user_id":20576952,"display_name":"Abdur Rahim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671037841,"creation_date":1671037841,"answer_id":74801922,"question_id":63438725,"body_markdown":"From content assist&gt;advanced&gt; check Java proposals. (Eclipse IDE Enterprise Java and Web Developers - 2022-12). For the first time, it might not work. Create a new class and use CTRL+Spacebar. The suggestions will show up ","title":"syso insertion shortcut not working in Eclipse","body":"<p>From content assist&gt;advanced&gt; check Java proposals. (Eclipse IDE Enterprise Java and Web Developers - 2022-12). For the first time, it might not work. Create a new class and use CTRL+Spacebar. The suggestions will show up</p>\n"}],"owner":{"account_id":19308579,"reputation":1,"user_id":14114864,"display_name":"Allen Wang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671037841,"creation_date":1597592109,"question_id":63438725,"body_markdown":"I&#39;m currently running the latest version of Eclipse (2020-06, I believe) on MacOS Catalina. I am unable to use the shortcut where you type `syso`, then press Control+Space, which results in the text being replaced by `System.out.println()`. I have also tried `Syso`, `sysout`, and `Sysout` to no effect. I have checked my keybind preferences and Control+Space is bound to the content assist command. Further, if I do type `syso` and press Control+Space, I get a box saying &quot;No Default Proposals&quot;. If I continue pressing it, this message changes to &quot;No Template Proposals&quot;, then &quot;No SWT Template Proposals&quot;, then &quot;No Chain Template Proposals&quot;, and finally &quot;No Java Proposals&quot; before cycling back to the original message. Identical behavior is also seen with `sysout`, `Syso`, and `Sysout`. This occurs with the default preferences in Content Assist and Content Assist&gt;Advanced. A reinstall didn&#39;t fix this issue.\r\n\r\nI am aware of other topics dealing with the same issue. However, I tried the approaches mentioned, none of which worked.\r\n\r\nUpdate: This is quite odd. Upon creating a new file, the shortcut works. I&#39;m not sure what the difference was between the new file and the old one. Both were standard .java files.","title":"syso insertion shortcut not working in Eclipse","body":"<p>I'm currently running the latest version of Eclipse (2020-06, I believe) on MacOS Catalina. I am unable to use the shortcut where you type <code>syso</code>, then press Control+Space, which results in the text being replaced by <code>System.out.println()</code>. I have also tried <code>Syso</code>, <code>sysout</code>, and <code>Sysout</code> to no effect. I have checked my keybind preferences and Control+Space is bound to the content assist command. Further, if I do type <code>syso</code> and press Control+Space, I get a box saying &quot;No Default Proposals&quot;. If I continue pressing it, this message changes to &quot;No Template Proposals&quot;, then &quot;No SWT Template Proposals&quot;, then &quot;No Chain Template Proposals&quot;, and finally &quot;No Java Proposals&quot; before cycling back to the original message. Identical behavior is also seen with <code>sysout</code>, <code>Syso</code>, and <code>Sysout</code>. This occurs with the default preferences in Content Assist and Content Assist&gt;Advanced. A reinstall didn't fix this issue.</p>\n<p>I am aware of other topics dealing with the same issue. However, I tried the approaches mentioned, none of which worked.</p>\n<p>Update: This is quite odd. Upon creating a new file, the shortcut works. I'm not sure what the difference was between the new file and the old one. Both were standard .java files.</p>\n"},{"tags":["java","docker-compose","yaml","upgrade"],"answers":[{"tags":[],"owner":{"account_id":21889,"reputation":30982,"user_id":53538,"accept_rate":88,"display_name":"Guss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671037825,"creation_date":1671037825,"answer_id":74801919,"question_id":74801749,"body_markdown":"You shouldn&#39;t update the JDK version of the TeamCity server - you generally don&#39;t want to modify the server dependencies as that may cause instability.\r\n\r\nWhat you are supposed to be doing (and the example compose file kind of shows it) is to use the agent container to run your build, or more correctly - build a new image - based on the agent image (i.e. uses `FROM jetbrains/teamcity-agent:latest`) - where you install whatever tools you need for your build.\r\n\r\nThe agent images are also locked to a user, but they install `sudo` so you should be able to use that to build an image with updated JDK. Another alternative is to build a completely new image for the agent by copying the open source TeamCity agent Docker file from [their Github repository](https://github.com/JetBrains/teamcity-docker-minimal-agent/blob/master/ubuntu/Dockerfile) and updating it as needed.","title":"How to upgrade JDK in Docker compose container?","body":"<p>You shouldn't update the JDK version of the TeamCity server - you generally don't want to modify the server dependencies as that may cause instability.</p>\n<p>What you are supposed to be doing (and the example compose file kind of shows it) is to use the agent container to run your build, or more correctly - build a new image - based on the agent image (i.e. uses <code>FROM jetbrains/teamcity-agent:latest</code>) - where you install whatever tools you need for your build.</p>\n<p>The agent images are also locked to a user, but they install <code>sudo</code> so you should be able to use that to build an image with updated JDK. Another alternative is to build a completely new image for the agent by copying the open source TeamCity agent Docker file from <a href=\"https://github.com/JetBrains/teamcity-docker-minimal-agent/blob/master/ubuntu/Dockerfile\" rel=\"nofollow noreferrer\">their Github repository</a> and updating it as needed.</p>\n"}],"owner":{"account_id":1382680,"reputation":3298,"user_id":1315357,"accept_rate":46,"display_name":"jnemecz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":488,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671037825,"creation_date":1671037050,"question_id":74801749,"body_markdown":"I have this `docker-compose.yml` configuration file for TeamCity - server and agent.\r\n\r\n    version: &quot;3.5&quot;\r\n    services:\r\n      server:\r\n        image: jetbrains/teamcity-server:latest\r\n        container_name: teamcity_server\r\n        networks:\r\n          - teamcity_network\r\n        ports:\r\n          - &quot;8111:8111&quot;\r\n        extra_hosts:\r\n          - &quot;host.docker.internal:host-gateway&quot;\r\n        volumes:\r\n          - datadir:/data/teamcity_server/datadir\r\n          - logs:/opt/teamcity/logs\r\n        environment:\r\n          TEAMCITY_SERVER_MEM_OPTS: -Xmx1024m\r\n      agent:\r\n        image: jetbrains/teamcity-agent:latest\r\n        container_name: teamcity_agent\r\n        volumes:\r\n          - agent_conf:/data/teamcity_agent/conf\r\n        environment:\r\n          - SERVER_URL=http://example.com:8111\r\n    networks:\r\n      teamcity_network:\r\n    volumes:\r\n      datadir:\r\n      logs:\r\n      agent_conf: \r\n\r\n\r\nTeamCity server and agent start correctly, I can login, create projects, connect to Git repository etc.\r\n\r\nBut my Java application needs Java 17, and TeamCity docker images provide Java 11. I tried to do upgrade, and logged in into docker Ubuntu `docker exec -it &lt;mycontainerId&gt; bash` but I am user and I have no system privileges to update Java in the container.\r\n\r\n**Question:** How can I install Java 17 into container and replace Java 11 to Java 17? Or is there configuration option for `docker-compose.yml` to install Java 17 instead of 11?\r\n\r\n","title":"How to upgrade JDK in Docker compose container?","body":"<p>I have this <code>docker-compose.yml</code> configuration file for TeamCity - server and agent.</p>\n<pre><code>version: &quot;3.5&quot;\nservices:\n  server:\n    image: jetbrains/teamcity-server:latest\n    container_name: teamcity_server\n    networks:\n      - teamcity_network\n    ports:\n      - &quot;8111:8111&quot;\n    extra_hosts:\n      - &quot;host.docker.internal:host-gateway&quot;\n    volumes:\n      - datadir:/data/teamcity_server/datadir\n      - logs:/opt/teamcity/logs\n    environment:\n      TEAMCITY_SERVER_MEM_OPTS: -Xmx1024m\n  agent:\n    image: jetbrains/teamcity-agent:latest\n    container_name: teamcity_agent\n    volumes:\n      - agent_conf:/data/teamcity_agent/conf\n    environment:\n      - SERVER_URL=http://example.com:8111\nnetworks:\n  teamcity_network:\nvolumes:\n  datadir:\n  logs:\n  agent_conf: \n</code></pre>\n<p>TeamCity server and agent start correctly, I can login, create projects, connect to Git repository etc.</p>\n<p>But my Java application needs Java 17, and TeamCity docker images provide Java 11. I tried to do upgrade, and logged in into docker Ubuntu <code>docker exec -it &lt;mycontainerId&gt; bash</code> but I am user and I have no system privileges to update Java in the container.</p>\n<p><strong>Question:</strong> How can I install Java 17 into container and replace Java 11 to Java 17? Or is there configuration option for <code>docker-compose.yml</code> to install Java 17 instead of 11?</p>\n"},{"tags":["java","bufferedimage","graphics2d"],"answers":[{"tags":[],"owner":{"account_id":14590759,"reputation":87,"user_id":10537963,"display_name":"Andre_601"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1612630132,"creation_date":1612630132,"answer_id":66079385,"question_id":66072351,"body_markdown":"Found a solution.\r\n\r\nThe second example seems to be the one to use and I managed to get this setup to work for me:\r\n```java\r\n    private final OkHttpClient CLIENT = new OkHttpClient();\r\n\r\n    private BufferedImage getAvatar(String url) throws IOException{\r\n        URL url = new URL(url);\r\n        URLConnection connection = url.openConnection();\r\n        connection.setRequestProperty(&quot;User-Agent&quot;, &quot;ImageRenderer&quot;);\r\n        connection.connect();\r\n\r\n        return ImageIO.read(connection.getInputStream());\r\n    }\r\n\r\n    public byte[] getChance(String url1, String url2, int chance){\r\n        try{\r\n            BufferedImage template = ImageIO.read(new File(&quot;img/chance.png&quot;));\r\n            BufferedImage avatar1 = getAvatar(url1);\r\n            BufferedImage avatar2 = getAvatar(url2);\r\n\r\n            // Create new BufferedImage with the template&#39;s sizes.\r\n            BufferedImage background = new BufferedImage(template.getWidth(), template.getHeight(), template.getType());\r\n\r\n            Graphics2D img = background.createGraphics();\r\n\r\n            Color outlineColor = Color.BLACK;\r\n            Color fontColor;\r\n\r\n            if(chance &lt;= 100 &amp;&amp; chance &gt; 74){\r\n                fontColor = Color.GREEN;\r\n            }else\r\n            if(chance &lt;= 74 &amp;&amp; chance &gt; 49){\r\n                fontColor = Color.ORANGE;\r\n            }else\r\n            if(chance &lt;= 49 &amp;&amp; chance &gt; 24){\r\n                fontColor = Color.RED;\r\n            }else{\r\n                fontColor = Color.BLACK;\r\n            }\r\n\r\n            // Set the avatars followed by the template.\r\n            img.drawImage(avatar1, 0, 0, 320, 320, null);\r\n            img.drawImage(avatar2, 640, 0, 320, 320, null);\r\n            img.drawImage(template, 0, 0, null);\r\n\r\n            Font font = new Font(Font.SANS_SERIF, Font.PLAIN, 80);\r\n            \r\n            img.setColor(fontColor);\r\n            img.setFont(font);\r\n\r\n            String text = chance + &quot;%&quot;;\r\n            \r\n            img.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n            img.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n\r\n            FontRenderContext context = img.getFontRenderContext();\r\n\r\n            // Set X and Y position for the text to be centred.\r\n            int textX = (imgWidth / 2) - (img.getFontMetrics(font).stringWidth(text) / 2);\r\n            int textY = (imgHeight / 2) + 40;\r\n\r\n            // Draw the actual String\r\n            img.drawString(text, textX, textY);\r\n\r\n            // Get TextLayout and AffineTransform\r\n            TextLayout layout = new TextLayout(text, font, context);\r\n            AffineTransform transform = img.getTransform();\r\n            \r\n            // Create the Shape of the outline\r\n            Shape outline = layout.getOutline(null);\r\n            \r\n            // Move position\r\n            transform.translate(textX, textY);\r\n            \r\n            // Apply the shape\r\n            img.transform(transform);\r\n            img.setColor(outlineColor);\r\n            img.draw(outline);\r\n            \r\n            img.setClip(outline);\r\n\r\n            img.dispose();\r\n\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            ImageIO.setUseCache(false);\r\n            ImageIO.write(background, &quot;png&quot;, baos);\r\n\r\n            return baos.toByteArray();\r\n        }catch(IOException ex){\r\n            return null;\r\n        }\r\n    }\r\n```","title":"How to add an outline to a text and then add it to the image&#39;s center?","body":"<p>Found a solution.</p>\n<p>The second example seems to be the one to use and I managed to get this setup to work for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private final OkHttpClient CLIENT = new OkHttpClient();\n\n    private BufferedImage getAvatar(String url) throws IOException{\n        URL url = new URL(url);\n        URLConnection connection = url.openConnection();\n        connection.setRequestProperty(&quot;User-Agent&quot;, &quot;ImageRenderer&quot;);\n        connection.connect();\n\n        return ImageIO.read(connection.getInputStream());\n    }\n\n    public byte[] getChance(String url1, String url2, int chance){\n        try{\n            BufferedImage template = ImageIO.read(new File(&quot;img/chance.png&quot;));\n            BufferedImage avatar1 = getAvatar(url1);\n            BufferedImage avatar2 = getAvatar(url2);\n\n            // Create new BufferedImage with the template's sizes.\n            BufferedImage background = new BufferedImage(template.getWidth(), template.getHeight(), template.getType());\n\n            Graphics2D img = background.createGraphics();\n\n            Color outlineColor = Color.BLACK;\n            Color fontColor;\n\n            if(chance &lt;= 100 &amp;&amp; chance &gt; 74){\n                fontColor = Color.GREEN;\n            }else\n            if(chance &lt;= 74 &amp;&amp; chance &gt; 49){\n                fontColor = Color.ORANGE;\n            }else\n            if(chance &lt;= 49 &amp;&amp; chance &gt; 24){\n                fontColor = Color.RED;\n            }else{\n                fontColor = Color.BLACK;\n            }\n\n            // Set the avatars followed by the template.\n            img.drawImage(avatar1, 0, 0, 320, 320, null);\n            img.drawImage(avatar2, 640, 0, 320, 320, null);\n            img.drawImage(template, 0, 0, null);\n\n            Font font = new Font(Font.SANS_SERIF, Font.PLAIN, 80);\n            \n            img.setColor(fontColor);\n            img.setFont(font);\n\n            String text = chance + &quot;%&quot;;\n            \n            img.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n            img.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n\n            FontRenderContext context = img.getFontRenderContext();\n\n            // Set X and Y position for the text to be centred.\n            int textX = (imgWidth / 2) - (img.getFontMetrics(font).stringWidth(text) / 2);\n            int textY = (imgHeight / 2) + 40;\n\n            // Draw the actual String\n            img.drawString(text, textX, textY);\n\n            // Get TextLayout and AffineTransform\n            TextLayout layout = new TextLayout(text, font, context);\n            AffineTransform transform = img.getTransform();\n            \n            // Create the Shape of the outline\n            Shape outline = layout.getOutline(null);\n            \n            // Move position\n            transform.translate(textX, textY);\n            \n            // Apply the shape\n            img.transform(transform);\n            img.setColor(outlineColor);\n            img.draw(outline);\n            \n            img.setClip(outline);\n\n            img.dispose();\n\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\n            ImageIO.setUseCache(false);\n            ImageIO.write(background, &quot;png&quot;, baos);\n\n            return baos.toByteArray();\n        }catch(IOException ex){\n            return null;\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":14590759,"reputation":87,"user_id":10537963,"display_name":"Andre_601"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66079385,"answer_count":1,"score":0,"last_activity_date":1671037708,"creation_date":1612570875,"question_id":66072351,"body_markdown":"I currently have a method which generates an image based on a template, two separate avatars and a text to then return it as a byte array.  \r\nThe text displayed has a different colour based on the size of the `chance` integer provided.\r\n\r\nSince the font can have a colour that the template image has, is there a chance (no pun intended) that the text would not be visible on the resulting image, which is why I would like to apply a black outline to the font shown.\r\n\r\nI already found [this answer here](https://stackoverflow.com/a/10017054/10537963) and while it actually gives two examples, does it confuse me more than actually helping me.  \r\n\r\nThe [first example](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Paints.htm) has a lot of steps I myself don&#39;t need and I&#39;m not sure which one I can discard and which are mandatory to keep.  \r\nI&#39;m also not sure how I would apply my logic with centring the text here, as the example seems to apply the font&#39;s outline and fill to each letter individually which in my case would be extremely annoying and also not guaranteed to be the same each time, as the text could be `#%`, `##%` or `###%`.\r\n\r\nThe [second example](http://www.java2s.com/Code/Java/2D-Graphics-GUI/OutlineFontpaint.htm) seems to be more about usage within a JPanel? Or in other words am I not sure if this code could also be applied to an image alone, or if it needs tinkering to work with only images.\r\n\r\nI basically need to know what methods are needed to create the font with the `fontColor`, add a black outline for it and then place it in the centre of the image itself before returning it as a byte array.\r\n\r\nHere is the code I currently use for context.\r\n```java\r\n    private final OkHttpClient CLIENT = new OkHttpClient();\r\n\r\n    private BufferedImage getAvatar(String url) throws IOException{\r\n        URL url = new URL(url);\r\n        URLConnection connection = url.openConnection();\r\n        connection.setRequestProperty(&quot;User-Agent&quot;, &quot;ImageRenderer&quot;);\r\n        connection.connect();\r\n\r\n        return ImageIO.read(connection.getInputStream());\r\n    }\r\n\r\n    public byte[] getChance(String url1, String url2, int chance){\r\n        try{\r\n            BufferedImage template = ImageIO.read(new File(&quot;img/chance.png&quot;));\r\n            BufferedImage avatar1 = getAvatar(url1);\r\n            BufferedImage avatar2 = getAvatar(url2);\r\n\r\n            // Create new BufferedImage with the template&#39;s sizes.\r\n            BufferedImage background = new BufferedImage(template.getWidth(), template.getHeight(), template.getType());\r\n\r\n            Graphics2D img = background.createGraphics();\r\n\r\n            Font font = new Font(Font.SANS_SERIF, Font.PLAIN, 80);\r\n            img.setFont(font);\r\n\r\n            Color fontColor;\r\n\r\n            if(chance &lt;= 100 &amp;&amp; chance &gt; 74){\r\n                fontColor = Color.GREEN;\r\n            }else\r\n            if(chance &lt;= 74 &amp;&amp; chance &gt; 49){\r\n                fontColor = Color.ORANGE;\r\n            }else\r\n            if(chance &lt;= 49 &amp;&amp; chance &gt; 24){\r\n                fontColor = Color.RED;\r\n            }else{\r\n                fontColor = Color.BLACK;\r\n            }\r\n    \r\n            String text = chance + &quot;%&quot;;\r\n            \r\n            img.setColor(fontColor);\r\n\r\n            // Set the avatars followed by the template.\r\n            img.drawImage(avatar1, 0, 0, 320, 320, null);\r\n            img.drawImage(avatar2, 640, 0, 320, 320, null);\r\n            img.drawImage(template, 0, 0, null);\r\n\r\n            // Get the image&#39;s width and height\r\n            int imgWidth = template.getWidth();\r\n            int imgHeight = template.getHeight();\r\n\r\n            // Set X and Y position for the text to be centered.\r\n            int textX = (imgWidth / 2) - (img.getFontMetrics().stringWidth(text) / 2);\r\n            int textY = (imgHeight / 2) - 40;\r\n\r\n            // Draw the actual String\r\n            img.drawString(text, textX, textY);\r\n\r\n            img.dispose();\r\n\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            ImageIO.setUseCache(false);\r\n            ImageIO.write(background, &quot;png&quot;, baos);\r\n\r\n            return baos.toByteArray();\r\n        }catch(IOException ex){\r\n            return null;\r\n        }\r\n    }\r\n```","title":"How to add an outline to a text and then add it to the image&#39;s center?","body":"<p>I currently have a method which generates an image based on a template, two separate avatars and a text to then return it as a byte array.<br />\nThe text displayed has a different colour based on the size of the <code>chance</code> integer provided.</p>\n<p>Since the font can have a colour that the template image has, is there a chance (no pun intended) that the text would not be visible on the resulting image, which is why I would like to apply a black outline to the font shown.</p>\n<p>I already found <a href=\"https://stackoverflow.com/a/10017054/10537963\">this answer here</a> and while it actually gives two examples, does it confuse me more than actually helping me.</p>\n<p>The <a href=\"http://www.java2s.com/Code/Java/2D-Graphics-GUI/Paints.htm\" rel=\"nofollow noreferrer\">first example</a> has a lot of steps I myself don't need and I'm not sure which one I can discard and which are mandatory to keep.<br />\nI'm also not sure how I would apply my logic with centring the text here, as the example seems to apply the font's outline and fill to each letter individually which in my case would be extremely annoying and also not guaranteed to be the same each time, as the text could be <code>#%</code>, <code>##%</code> or <code>###%</code>.</p>\n<p>The <a href=\"http://www.java2s.com/Code/Java/2D-Graphics-GUI/OutlineFontpaint.htm\" rel=\"nofollow noreferrer\">second example</a> seems to be more about usage within a JPanel? Or in other words am I not sure if this code could also be applied to an image alone, or if it needs tinkering to work with only images.</p>\n<p>I basically need to know what methods are needed to create the font with the <code>fontColor</code>, add a black outline for it and then place it in the centre of the image itself before returning it as a byte array.</p>\n<p>Here is the code I currently use for context.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private final OkHttpClient CLIENT = new OkHttpClient();\n\n    private BufferedImage getAvatar(String url) throws IOException{\n        URL url = new URL(url);\n        URLConnection connection = url.openConnection();\n        connection.setRequestProperty(&quot;User-Agent&quot;, &quot;ImageRenderer&quot;);\n        connection.connect();\n\n        return ImageIO.read(connection.getInputStream());\n    }\n\n    public byte[] getChance(String url1, String url2, int chance){\n        try{\n            BufferedImage template = ImageIO.read(new File(&quot;img/chance.png&quot;));\n            BufferedImage avatar1 = getAvatar(url1);\n            BufferedImage avatar2 = getAvatar(url2);\n\n            // Create new BufferedImage with the template's sizes.\n            BufferedImage background = new BufferedImage(template.getWidth(), template.getHeight(), template.getType());\n\n            Graphics2D img = background.createGraphics();\n\n            Font font = new Font(Font.SANS_SERIF, Font.PLAIN, 80);\n            img.setFont(font);\n\n            Color fontColor;\n\n            if(chance &lt;= 100 &amp;&amp; chance &gt; 74){\n                fontColor = Color.GREEN;\n            }else\n            if(chance &lt;= 74 &amp;&amp; chance &gt; 49){\n                fontColor = Color.ORANGE;\n            }else\n            if(chance &lt;= 49 &amp;&amp; chance &gt; 24){\n                fontColor = Color.RED;\n            }else{\n                fontColor = Color.BLACK;\n            }\n    \n            String text = chance + &quot;%&quot;;\n            \n            img.setColor(fontColor);\n\n            // Set the avatars followed by the template.\n            img.drawImage(avatar1, 0, 0, 320, 320, null);\n            img.drawImage(avatar2, 640, 0, 320, 320, null);\n            img.drawImage(template, 0, 0, null);\n\n            // Get the image's width and height\n            int imgWidth = template.getWidth();\n            int imgHeight = template.getHeight();\n\n            // Set X and Y position for the text to be centered.\n            int textX = (imgWidth / 2) - (img.getFontMetrics().stringWidth(text) / 2);\n            int textY = (imgHeight / 2) - 40;\n\n            // Draw the actual String\n            img.drawString(text, textX, textY);\n\n            img.dispose();\n\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\n            ImageIO.setUseCache(false);\n            ImageIO.write(background, &quot;png&quot;, baos);\n\n            return baos.toByteArray();\n        }catch(IOException ex){\n            return null;\n        }\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","testing","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":1,"up_vote_count":29,"is_accepted":true,"score":28,"last_activity_date":1485377010,"creation_date":1485372279,"answer_id":41859960,"question_id":41858894,"body_markdown":"If I were you, I would simply mock the services A and B and your executors, then inject them thanks to the annotation [`@InjectMocks`][1] as they are fields of your class.\r\n\r\nIf you want mock the method `execute` of your `Executor`, you should rather proceed as next to simply call the method `run` of the provided `Runnable`:\r\n\r\n    doAnswer(\r\n        (InvocationOnMock invocation) -&gt; {\r\n            ((Runnable) invocation.getArguments()[0]).run();\r\n            return null;\r\n        }\r\n    ).when(serviceAExecutorService).execute(any(Runnable.class));\r\n\r\nSo basically your test would be something like this:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class CompletableFutureServiceTest {\r\n    \r\n        // The mock of my service A\r\n        @Mock\r\n        private ServiceA ServiceA;\r\n        // The mock of my service B\r\n        @Mock\r\n        private ServiceB ServiceB;\r\n        // The mock of your executor for the service A\r\n        @Mock\r\n        private Executor serviceAExecutorService;\r\n        // The mock of your executor for the service B\r\n        @Mock\r\n        private Executor serviceBExecutorService;\r\n        // My class in which I want to inject the mocks\r\n        @InjectMocks\r\n        private CompletableFutureService service;\r\n    \r\n        @Test\r\n        public void testSomeMethod() {\r\n            // Mock the method execute to call the run method of the provided Runnable\r\n            doAnswer(\r\n                (InvocationOnMock invocation) -&gt; {\r\n                    ((Runnable) invocation.getArguments()[0]).run();\r\n                    return null;\r\n                }\r\n            ).when(serviceAExecutorService).execute(any(Runnable.class));\r\n            doAnswer(\r\n                (InvocationOnMock invocation) -&gt; {\r\n                    ((Runnable) invocation.getArguments()[0]).run();\r\n                    return null;\r\n                }\r\n            ).when(serviceBExecutorService).execute(any(Runnable.class));\r\n\r\n            ServiceAResponse serviceAResponse = ... // The answer to return by service A\r\n            // Make the mock of my service A return my answer\r\n            when(ServiceA.retrieve(any(ServiceARequest.class))).thenReturn(\r\n                serviceAResponse\r\n            );\r\n            ServiceBResponse serviceBResponse = ... // The answer to return by service B\r\n            // Make the mock of my service B return my answer\r\n            when(ServiceB.retrieve(any(ServiceBRequest.class))).thenReturn(\r\n                serviceBResponse\r\n            );\r\n    \r\n            // Execute my method\r\n            ServiceResponse response = service.someMethod(\r\n                new ServiceARequest(), new ServiceBRequest()\r\n            );\r\n\r\n            // Test the result assuming that both responses are wrapped into a POJO\r\n            Assert.assertEquals(serviceAResponse, response.getServiceAResponse());\r\n            Assert.assertEquals(serviceBResponse, response.getServiceBResponse());\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://static.javadoc.io/org.mockito/mockito-core/1.10.19/org/mockito/InjectMocks.html","title":"CompletableFuture usability and unit test","body":"<p>If I were you, I would simply mock the services A and B and your executors, then inject them thanks to the annotation <a href=\"http://static.javadoc.io/org.mockito/mockito-core/1.10.19/org/mockito/InjectMocks.html\" rel=\"noreferrer\"><code>@InjectMocks</code></a> as they are fields of your class.</p>\n\n<p>If you want mock the method <code>execute</code> of your <code>Executor</code>, you should rather proceed as next to simply call the method <code>run</code> of the provided <code>Runnable</code>:</p>\n\n<pre><code>doAnswer(\n    (InvocationOnMock invocation) -&gt; {\n        ((Runnable) invocation.getArguments()[0]).run();\n        return null;\n    }\n).when(serviceAExecutorService).execute(any(Runnable.class));\n</code></pre>\n\n<p>So basically your test would be something like this:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class CompletableFutureServiceTest {\n\n    // The mock of my service A\n    @Mock\n    private ServiceA ServiceA;\n    // The mock of my service B\n    @Mock\n    private ServiceB ServiceB;\n    // The mock of your executor for the service A\n    @Mock\n    private Executor serviceAExecutorService;\n    // The mock of your executor for the service B\n    @Mock\n    private Executor serviceBExecutorService;\n    // My class in which I want to inject the mocks\n    @InjectMocks\n    private CompletableFutureService service;\n\n    @Test\n    public void testSomeMethod() {\n        // Mock the method execute to call the run method of the provided Runnable\n        doAnswer(\n            (InvocationOnMock invocation) -&gt; {\n                ((Runnable) invocation.getArguments()[0]).run();\n                return null;\n            }\n        ).when(serviceAExecutorService).execute(any(Runnable.class));\n        doAnswer(\n            (InvocationOnMock invocation) -&gt; {\n                ((Runnable) invocation.getArguments()[0]).run();\n                return null;\n            }\n        ).when(serviceBExecutorService).execute(any(Runnable.class));\n\n        ServiceAResponse serviceAResponse = ... // The answer to return by service A\n        // Make the mock of my service A return my answer\n        when(ServiceA.retrieve(any(ServiceARequest.class))).thenReturn(\n            serviceAResponse\n        );\n        ServiceBResponse serviceBResponse = ... // The answer to return by service B\n        // Make the mock of my service B return my answer\n        when(ServiceB.retrieve(any(ServiceBRequest.class))).thenReturn(\n            serviceBResponse\n        );\n\n        // Execute my method\n        ServiceResponse response = service.someMethod(\n            new ServiceARequest(), new ServiceBRequest()\n        );\n\n        // Test the result assuming that both responses are wrapped into a POJO\n        Assert.assertEquals(serviceAResponse, response.getServiceAResponse());\n        Assert.assertEquals(serviceBResponse, response.getServiceBResponse());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14819018,"reputation":111,"user_id":10701993,"display_name":"Roshan Oswal"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1543166854,"creation_date":1543166854,"answer_id":53470015,"question_id":41858894,"body_markdown":"      @Mock\r\n      private AsyncExecuter asyncExecuter;\r\n      @Mock\r\n      private CompletableFuture&lt;XyzSample&gt; xyzSampleResponse;\r\n      @Mock\r\n      private CompletableFuture&lt;Map&lt;String, String&gt;&gt; abcSampleResponse;\r\n    \r\n     @Before\r\n      public void setUp() throws Exception {\r\n    \r\n        abcSampleResponse = CompletableFuture.completedFuture(TestUtil.readJsonResource(\r\n            &quot;misc_mapper_response.json&quot;, new TypeReference&lt;Map&lt;String, String&gt;&gt;() {\r\n            }));\r\n    \r\n        xyzSampleResponse = CompletableFuture.completedFuture(TestUtil.readJsonResource(\r\n            &quot;gp_facade_response.json&quot;, new TypeReference&lt;XyzSample&gt;() {\r\n            }));\r\n    \r\n      }\r\n    \r\n       @Test\r\n      public void testAbcMethod() {\r\n    \r\n        Mockito.doReturn(abcSampleResponse).when(asyncExecuter)\r\n            .callPgEndpoint(TestConstants.TEST_CUSTOMER_ID);\r\n    \r\n        Mockito.doReturn(xyzSampleResponse).when(asyncExecuter)\r\n            .getUserPreference(TestConstants.TEST_CUSTOMER_ID);\r\n    \r\n    \r\n        final ActualResponse actualResponse = globalPositionService\r\n            .getGlobalPosition(TestConstants.TEST_CUSTOMER_ID);\r\n    \r\n        assertNotNull(actualResponse);\r\n    }\r\n    \r\n    =====Service\r\n    public ActualResponse getGlobalPosition(final String customerId) {\r\n    \r\n        final CompletableFuture&lt;Map&lt;String, String&gt;&gt; abcSampleResponse = asyncExecuter\r\n            .getProductTypeInfo();\r\n        final CompletableFuture&lt;XyzSample&gt; xyzSampleResponse = asyncExecuter\r\n            .getUserPreference(customerId);\r\n    \r\n        try {\r\n          return new ResponseDecorator(pgResponse.get(), userPreferenceResponse.get(),\r\n              productTypeInfo.get()).decorate();\r\n        } catch (final Exception e) {\r\n          log.error(&quot;Error Occurred while building the response&quot;, e);\r\n        }\r\n        return null;\r\n      }\r\n    \r\n    @Component\r\n    public class AsyncExecuter {\r\n      public CompletableFuture&lt;XyzSample&gt; callPgEndpoint(final String customerId) {\r\n        return CompletableFuture.completedFuture(xxx);\r\n      }\r\n    }","title":"CompletableFuture usability and unit test","body":"<pre><code>  @Mock\n  private AsyncExecuter asyncExecuter;\n  @Mock\n  private CompletableFuture&lt;XyzSample&gt; xyzSampleResponse;\n  @Mock\n  private CompletableFuture&lt;Map&lt;String, String&gt;&gt; abcSampleResponse;\n\n @Before\n  public void setUp() throws Exception {\n\n    abcSampleResponse = CompletableFuture.completedFuture(TestUtil.readJsonResource(\n        \"misc_mapper_response.json\", new TypeReference&lt;Map&lt;String, String&gt;&gt;() {\n        }));\n\n    xyzSampleResponse = CompletableFuture.completedFuture(TestUtil.readJsonResource(\n        \"gp_facade_response.json\", new TypeReference&lt;XyzSample&gt;() {\n        }));\n\n  }\n\n   @Test\n  public void testAbcMethod() {\n\n    Mockito.doReturn(abcSampleResponse).when(asyncExecuter)\n        .callPgEndpoint(TestConstants.TEST_CUSTOMER_ID);\n\n    Mockito.doReturn(xyzSampleResponse).when(asyncExecuter)\n        .getUserPreference(TestConstants.TEST_CUSTOMER_ID);\n\n\n    final ActualResponse actualResponse = globalPositionService\n        .getGlobalPosition(TestConstants.TEST_CUSTOMER_ID);\n\n    assertNotNull(actualResponse);\n}\n\n=====Service\npublic ActualResponse getGlobalPosition(final String customerId) {\n\n    final CompletableFuture&lt;Map&lt;String, String&gt;&gt; abcSampleResponse = asyncExecuter\n        .getProductTypeInfo();\n    final CompletableFuture&lt;XyzSample&gt; xyzSampleResponse = asyncExecuter\n        .getUserPreference(customerId);\n\n    try {\n      return new ResponseDecorator(pgResponse.get(), userPreferenceResponse.get(),\n          productTypeInfo.get()).decorate();\n    } catch (final Exception e) {\n      log.error(\"Error Occurred while building the response\", e);\n    }\n    return null;\n  }\n\n@Component\npublic class AsyncExecuter {\n  public CompletableFuture&lt;XyzSample&gt; callPgEndpoint(final String customerId) {\n    return CompletableFuture.completedFuture(xxx);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6715684,"reputation":52,"user_id":5177590,"display_name":"Dilwar Mandal"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671037669,"creation_date":1671037669,"answer_id":74801886,"question_id":41858894,"body_markdown":"I have resolved this for JUnit5 and Mockito\r\n\r\n    @Spy ThreadPoolTaskExecutor spyTaskExecutor = new ThreadPoolTaskExecutor();\r\n\r\nAnd \r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        openMocks(this);\r\n        spyTaskExecutor.setCorePoolSize(1);\r\n        spyTaskExecutor.setWaitForTasksToCompleteOnShutdown(true);\r\n        spyTaskExecutor.initialize();\r\n    }\r\n\r\n","title":"CompletableFuture usability and unit test","body":"<p>I have resolved this for JUnit5 and Mockito</p>\n<pre><code>@Spy ThreadPoolTaskExecutor spyTaskExecutor = new ThreadPoolTaskExecutor();\n</code></pre>\n<p>And</p>\n<pre><code>@BeforeEach\nvoid setUp() {\n    openMocks(this);\n    spyTaskExecutor.setCorePoolSize(1);\n    spyTaskExecutor.setWaitForTasksToCompleteOnShutdown(true);\n    spyTaskExecutor.initialize();\n}\n</code></pre>\n"}],"owner":{"account_id":1276057,"reputation":385,"user_id":1231307,"display_name":"Leo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73014,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":41859960,"answer_count":3,"score":26,"last_activity_date":1671037669,"creation_date":1485368753,"question_id":41858894,"body_markdown":"I&#39;m learning about java 8 `CompletableFuture` and ended up with this.\r\n\r\nFist of all, what do you think about this lines of code? I need to send request to different services in parallel and then wait for all of them to response and continue working.\r\n\r\n    //service A\r\n    CompletableFuture&lt;ServiceAResponse&gt; serviceAFuture = CompletableFuture.supplyAsync(\r\n        () -&gt; this.ServiceA.retrieve(serviceARequest), serviceAExecutorService\r\n    );\r\n    \r\n    //service B\r\n    CompletableFuture&lt;ServiceBResponse&gt; serviceBFuture = CompletableFuture.supplyAsync(\r\n        () -&gt; this.ServiceB.retrieve(serviceBRequest), serviceBExecutorService\r\n    );\r\n    \r\n    CompletableFuture.allOf(serviceAFuture, serviceBFuture).join();\r\n    ServiceAResponse responseA = serviceAFuture.join();\r\n    ServiceBResponse responseB = serviceBFuture.join();\r\n\r\n\r\nAnd even the code is doing what I want, I&#39;m having problems testing the class where that code is. I tried using Mockito and do something like:\r\n\r\n    doAnswer(invocation -&gt; CompletableFuture.completedFuture(this.serviceAResponse))\r\n        .when(this.serviceAExecutorService)\r\n        .execute(any());\r\n\r\nWhere executor services and services responses are mocking but the test never ends and the thread keeps waiting for something in this line\r\n\r\n    CompletableFuture.allOf(serviceAFuture, serviceBFuture).join();\r\n\r\nAny hint on what I&#39;m missing here? Thank you!","title":"CompletableFuture usability and unit test","body":"<p>I'm learning about java 8 <code>CompletableFuture</code> and ended up with this.</p>\n\n<p>Fist of all, what do you think about this lines of code? I need to send request to different services in parallel and then wait for all of them to response and continue working.</p>\n\n<pre><code>//service A\nCompletableFuture&lt;ServiceAResponse&gt; serviceAFuture = CompletableFuture.supplyAsync(\n    () -&gt; this.ServiceA.retrieve(serviceARequest), serviceAExecutorService\n);\n\n//service B\nCompletableFuture&lt;ServiceBResponse&gt; serviceBFuture = CompletableFuture.supplyAsync(\n    () -&gt; this.ServiceB.retrieve(serviceBRequest), serviceBExecutorService\n);\n\nCompletableFuture.allOf(serviceAFuture, serviceBFuture).join();\nServiceAResponse responseA = serviceAFuture.join();\nServiceBResponse responseB = serviceBFuture.join();\n</code></pre>\n\n<p>And even the code is doing what I want, I'm having problems testing the class where that code is. I tried using Mockito and do something like:</p>\n\n<pre><code>doAnswer(invocation -&gt; CompletableFuture.completedFuture(this.serviceAResponse))\n    .when(this.serviceAExecutorService)\n    .execute(any());\n</code></pre>\n\n<p>Where executor services and services responses are mocking but the test never ends and the thread keeps waiting for something in this line</p>\n\n<pre><code>CompletableFuture.allOf(serviceAFuture, serviceBFuture).join();\n</code></pre>\n\n<p>Any hint on what I'm missing here? Thank you!</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1671033569,"post_id":74800882,"comment_id":132011167,"body_markdown":"I believe you need to look into `Singleton` pattern.","body":"I believe you need to look into <code>Singleton</code> pattern."},{"owner":{"account_id":875148,"reputation":953,"user_id":924941,"accept_rate":90,"display_name":"user924941"},"score":0,"creation_date":1671034133,"post_id":74800882,"comment_id":132011412,"body_markdown":"Singletons will not help, there can be many singleton instances in different processes","body":"Singletons will not help, there can be many singleton instances in different processes"}],"answers":[{"tags":[],"owner":{"account_id":4401323,"reputation":2073,"user_id":3586940,"display_name":"Hisham Hijjawi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671037388,"creation_date":1671037388,"answer_id":74801823,"question_id":74800882,"body_markdown":"In general, no. Your library may provide a method that allows you to check for this, but there isn&#39;t a way to know what libraries another app is running at runtime.\r\n","title":"Communication between proccesses in android","body":"<p>In general, no. Your library may provide a method that allows you to check for this, but there isn't a way to know what libraries another app is running at runtime.</p>\n"}],"owner":{"account_id":875148,"reputation":953,"user_id":924941,"accept_rate":90,"display_name":"user924941"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671037388,"creation_date":1671033143,"question_id":74800882,"body_markdown":"I have a library that is being used in android apps. I found out that in cases when the app has multi processes my library will have a ton of problems. Is there a way to know if a instance of my library is already running in a different process so I don&#39;t start a new one ?","title":"Communication between proccesses in android","body":"<p>I have a library that is being used in android apps. I found out that in cases when the app has multi processes my library will have a ton of problems. Is there a way to know if a instance of my library is already running in a different process so I don't start a new one ?</p>\n"},{"tags":["java","java-17"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1671037501,"post_id":74801780,"comment_id":132012782,"body_markdown":"Q: Exactly what kind of potential &quot;performance hit(s)&quot; are you concerned about?  Q: Have you been able to run any comparison tests yourself (e.g. start instances with/without debug mode *OUTSIDE* of a container, and measure with &quot;time&quot;, &quot;top&quot;, &quot;jstat&quot;, VisualVM, etc)?","body":"Q: Exactly what kind of potential &quot;performance hit(s)&quot; are you concerned about?  Q: Have you been able to run any comparison tests yourself (e.g. start instances with/without debug mode <i>OUTSIDE</i> of a container, and measure with &quot;time&quot;, &quot;top&quot;, &quot;jstat&quot;, VisualVM, etc)?"},{"owner":{"account_id":25946793,"reputation":99,"user_id":19665422,"display_name":"Thorbj&#248;rn Andersen - UFST"},"score":0,"creation_date":1671053151,"post_id":74801780,"comment_id":132017225,"body_markdown":"CPU usage and memory usage primarily.  I have not done measurements myself yet as I thought this might be something that might also be relevant to others.","body":"CPU usage and memory usage primarily.  I have not done measurements myself yet as I thought this might be something that might also be relevant to others."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":1,"creation_date":1671058848,"post_id":74801780,"comment_id":132018654,"body_markdown":"I assume you probably mean configuring your Docker file with something like this: `ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;-agentlib:jdwp&quot;,&quot;/myapp.jar&quot;]`.  In which case, &quot;No&quot; - I don&#39;t believe there&#39;s any additional overhead if you don&#39;t actually attach the debugger and start setting watches and breakpoints.  But I&#39;d definitely *RUN SOME TESTS*.","body":"I assume you probably mean configuring your Docker file with something like this: <code>ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;-agentlib:jdwp&quot;,&quot;&#47;myapp.jar&quot;]</code>.  In which case, &quot;No&quot; - I don&#39;t believe there&#39;s any additional overhead if you don&#39;t actually attach the debugger and start setting watches and breakpoints.  But I&#39;d definitely <i>RUN SOME TESTS</i>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1671123048,"post_id":74801780,"comment_id":132035529,"body_markdown":"Well, yes, around Java&#160;1.4 times, some performance problems of the JVM debug mode have been fixed. Don’t know why you think that some vaguely remembered out-of-context information matters. The answer to your last question is, no, there is still some potential performance degradation in debug mode. However, the actual question should be, will it run fast enough for you? That’s something, no stranger on the internet can answer for you.","body":"Well, yes, around Java 1.4 times, some performance problems of the JVM debug mode have been fixed. Don’t know why you think that some vaguely remembered out-of-context information matters. The answer to your last question is, no, there is still some potential performance degradation in debug mode. However, the actual question should be, will it run fast enough for you? That’s something, no stranger on the internet can answer for you."}],"owner":{"account_id":25946793,"reputation":99,"user_id":19665422,"display_name":"Thorbj&#248;rn Andersen - UFST"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1671037197,"creation_date":1671037197,"question_id":74801780,"body_markdown":"We are consolidating and updating our Java deployments, and in that process we would like to be prepared for having to find non-reproducible problems with a running JVM in a container, by having the JVM start in server debug mode (and with Flight Recorder active so we currently do not want J9), where the JVM runs the application while awaiting a debugger connecting. \r\n\r\nI believe I have read years back that JVM debug performance had been improved, but I have not been able to located information about how things are now, and whether this might be distribution specific.\r\n\r\nWould this perform as well as a JVM not running in debug mode for OpenJDK 17?\r\n\r\n","title":"Is there a performance hit by running OpenJDK 17 in debug mode in a container before a debugger is attached?","body":"<p>We are consolidating and updating our Java deployments, and in that process we would like to be prepared for having to find non-reproducible problems with a running JVM in a container, by having the JVM start in server debug mode (and with Flight Recorder active so we currently do not want J9), where the JVM runs the application while awaiting a debugger connecting.</p>\n<p>I believe I have read years back that JVM debug performance had been improved, but I have not been able to located information about how things are now, and whether this might be distribution specific.</p>\n<p>Would this perform as well as a JVM not running in debug mode for OpenJDK 17?</p>\n"},{"tags":["java","windows","cross-platform"],"comments":[{"owner":{"account_id":96180,"reputation":3556,"user_id":261542,"display_name":"mikek3332002"},"score":0,"creation_date":1279152020,"post_id":3249117,"comment_id":3360302,"body_markdown":"You could use a JNI method to get file attributes and check whether its a reparse point","body":"You could use a JNI method to get file attributes and check whether its a reparse point"},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":2,"creation_date":1326146493,"post_id":3249117,"comment_id":10972328,"body_markdown":"Should add that incidentally, Java 7 doesn&#39;t detect junctions as symlinks either.","body":"Should add that incidentally, Java 7 doesn&#39;t detect junctions as symlinks either."}],"answers":[{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1279478638,"creation_date":1279478638,"answer_id":3276772,"question_id":3249117,"body_markdown":"The answer is &#39;no&#39;. Junction points and symbolic links are not the same sort of thing. The JRE doesn&#39;t check for them, and so the functions you cite don&#39;t differentiate them.\r\n\r\nHaving said this, you might accomplish something with the following:\r\n\r\nIf the junctioned directory has contents, then the result of getting the canonical pathname of something down below it might be &#39;surprising&#39; and reveal the situation, since it is likely to be a pathname under the target of the junction. This only works if the directory pointed to by the junction is, of course, non-empty.","title":"Cross platform way to detect a symbolic link / junction point?","body":"<p>The answer is 'no'. Junction points and symbolic links are not the same sort of thing. The JRE doesn't check for them, and so the functions you cite don't differentiate them.</p>\n\n<p>Having said this, you might accomplish something with the following:</p>\n\n<p>If the junctioned directory has contents, then the result of getting the canonical pathname of something down below it might be 'surprising' and reveal the situation, since it is likely to be a pathname under the target of the junction. This only works if the directory pointed to by the junction is, of course, non-empty.</p>\n"},{"tags":[],"owner":{"account_id":169148,"reputation":3473,"user_id":395072,"display_name":"Manish Singh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1279496889,"creation_date":1279496889,"answer_id":3277704,"question_id":3249117,"body_markdown":"\r\nYou can try this dirty hack for windows \r\n\r\n\t\tif (f.isDirectory() || f.isFile()) {\r\n\t\t\tSystem.out.println(&quot;File or Directory&quot;);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;Link&quot;);\r\n\t\t}\r\n","title":"Cross platform way to detect a symbolic link / junction point?","body":"<p>You can try this dirty hack for windows </p>\n\n<pre><code>    if (f.isDirectory() || f.isFile()) {\n        System.out.println(\"File or Directory\");\n    } else {\n        System.out.println(\"Link\");\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":31142,"reputation":28734,"user_id":85306,"accept_rate":94,"display_name":"Jherico"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1358470735,"creation_date":1279595328,"answer_id":3286732,"question_id":3249117,"body_markdown":"There doesn&#39;t appear to be any cross platform mechanism for this in Java 6 or earlier, though its a fairly simple task using JNA\r\n\r\n\r\n    interface Kernel32 extends Library {\r\n      public int GetFileAttributesW(WString fileName);\r\n    }\r\n\r\n    static Kernel32 lib = null;\r\n    public static int getWin32FileAttributes(File f) throws IOException { \r\n      if (lib == null) {\r\n        synchronized (Kernel32.class) {\r\n    \t  lib = (Kernel32) Native.loadLibrary(&quot;kernel32&quot;, Kernel32.class);\r\n        }\r\n      }\r\n      return lib.GetFileAttributesW(new WString(f.getCanonicalPath()));\r\n    }\r\n      \r\n    public static boolean isJunctionOrSymlink(File f) throws IOException {\r\n      if (!f.exists()) { return false; }\r\n      int attributes = getWin32FileAttributes(f);\r\n      if (-1 == attributes) { return false; }\r\n      return ((0x400 &amp; attributes) != 0);\r\n    }\r\n\r\nEDIT: updated per comment about possible error return by `getWin32FileAttributes()`\r\n\r\n","title":"Cross platform way to detect a symbolic link / junction point?","body":"<p>There doesn't appear to be any cross platform mechanism for this in Java 6 or earlier, though its a fairly simple task using JNA</p>\n\n<pre><code>interface Kernel32 extends Library {\n  public int GetFileAttributesW(WString fileName);\n}\n\nstatic Kernel32 lib = null;\npublic static int getWin32FileAttributes(File f) throws IOException { \n  if (lib == null) {\n    synchronized (Kernel32.class) {\n      lib = (Kernel32) Native.loadLibrary(\"kernel32\", Kernel32.class);\n    }\n  }\n  return lib.GetFileAttributesW(new WString(f.getCanonicalPath()));\n}\n\npublic static boolean isJunctionOrSymlink(File f) throws IOException {\n  if (!f.exists()) { return false; }\n  int attributes = getWin32FileAttributes(f);\n  if (-1 == attributes) { return false; }\n  return ((0x400 &amp; attributes) != 0);\n}\n</code></pre>\n\n<p>EDIT: updated per comment about possible error return by <code>getWin32FileAttributes()</code></p>\n"},{"tags":[],"owner":{"account_id":2866071,"reputation":6012,"user_id":2460378,"accept_rate":81,"display_name":"Thomas S."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671036912,"creation_date":1671036912,"answer_id":74801717,"question_id":3249117,"body_markdown":"With nio it is possible to detect a junction/reparse point or symlink even without reflection or use of JNA:\r\n\r\n    public void isReparsePointOrSymlink(Path path) {\r\n\t\tfinal var attribute = Files.getAttribute(path, &quot;dos:attributes&quot;, LinkOption.NOFOLLOW_LINKS);\r\n\t\tif (attribute instanceof Integer value) {\r\n\t\t\tfinal boolean isJunctionOrSymlink = (value &amp; 0x400) != 0;\r\n\t\t\treturn isJunctionOrSymlink;\r\n\t\t}\r\n\t\treturn Files.isSymbolicLink(path);\r\n\t}\r\nNote, that `Files.isSymbolicLink(path)` only returns `true` for the symbolic link, not for the reparse point. If you need to distinguish between both and `isReparsePointOrSymlink` returns `true`, check also `Files.isSymbolicLink`.","title":"Cross platform way to detect a symbolic link / junction point?","body":"<p>With nio it is possible to detect a junction/reparse point or symlink even without reflection or use of JNA:</p>\n<pre><code>public void isReparsePointOrSymlink(Path path) {\n    final var attribute = Files.getAttribute(path, &quot;dos:attributes&quot;, LinkOption.NOFOLLOW_LINKS);\n    if (attribute instanceof Integer value) {\n        final boolean isJunctionOrSymlink = (value &amp; 0x400) != 0;\n        return isJunctionOrSymlink;\n    }\n    return Files.isSymbolicLink(path);\n}\n</code></pre>\n<p>Note, that <code>Files.isSymbolicLink(path)</code> only returns <code>true</code> for the symbolic link, not for the reparse point. If you need to distinguish between both and <code>isReparsePointOrSymlink</code> returns <code>true</code>, check also <code>Files.isSymbolicLink</code>.</p>\n"}],"owner":{"account_id":31142,"reputation":28734,"user_id":85306,"accept_rate":94,"display_name":"Jherico"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3502,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":3286732,"answer_count":4,"score":9,"last_activity_date":1671036912,"creation_date":1279131201,"question_id":3249117,"body_markdown":"In java, a symbolic link in a Unix environment can be detected by comparing the file&#39;s canonical and absolute path.  However, this trick does not work on windows. If I execute\r\n\r\n    mkdir c:\\foo\r\n    mklink /j c:\\bar\r\n\r\nfrom the command line and then execute the following lines in java\r\n\r\n\r\n\tFile f = new File(&quot;C:/bar&quot;);\r\n\tSystem.out.println(f.getAbsolutePath());\r\n\tSystem.out.println(f.getCanonicalPath());\r\n\r\nthe output is \r\n\r\n    C:\\bar\r\n    C:\\bar\r\n\r\nIs there any pre-Java 7 way of detecting a junction in windows?","title":"Cross platform way to detect a symbolic link / junction point?","body":"<p>In java, a symbolic link in a Unix environment can be detected by comparing the file's canonical and absolute path.  However, this trick does not work on windows. If I execute</p>\n\n<pre><code>mkdir c:\\foo\nmklink /j c:\\bar\n</code></pre>\n\n<p>from the command line and then execute the following lines in java</p>\n\n<pre><code>File f = new File(\"C:/bar\");\nSystem.out.println(f.getAbsolutePath());\nSystem.out.println(f.getCanonicalPath());\n</code></pre>\n\n<p>the output is </p>\n\n<pre><code>C:\\bar\nC:\\bar\n</code></pre>\n\n<p>Is there any pre-Java 7 way of detecting a junction in windows?</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":339226,"reputation":1661,"user_id":668572,"display_name":"Sedat Polat"},"score":0,"creation_date":1671036710,"post_id":74801610,"comment_id":132012489,"body_markdown":"You must initialise your array like List&lt;Europe&gt; europeList = new ArrayList&lt;&gt;(); before using it.","body":"You must initialise your array like List&lt;Europe&gt; europeList = new ArrayList&lt;&gt;(); before using it."},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1671036836,"post_id":74801610,"comment_id":132012539,"body_markdown":"Duplicate of [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/q/218384/10819573)","body":"Duplicate of <a href=\"https://stackoverflow.com/q/218384/10819573\">What is a NullPointerException, and how do I fix it?</a>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1671036660,"creation_date":1671036660,"answer_id":74801656,"question_id":74801610,"body_markdown":"Sounds like you forgot to actually make a list here. `europeList` is _a reference variable_ - it&#39;s like a blank page in an addressbook. You gotta build a house first:\r\n\r\n`List&lt;Europe&gt; europeList = new ArrayList&lt;Europe&gt;();`\r\n\r\nNow you can call `europeList.add` without getting an NPE.\r\n\r\n`.` is java-ese for: Walk over to this address and do something with the house you find there. NullPointerException is: &#39;.uhh.. the page is blank; I can&#39;t walk over to the place you want me to walk to&#39;.\r\n","title":"Adding lists made with Arrays.asList to a new List","body":"<p>Sounds like you forgot to actually make a list here. <code>europeList</code> is <em>a reference variable</em> - it's like a blank page in an addressbook. You gotta build a house first:</p>\n<p><code>List&lt;Europe&gt; europeList = new ArrayList&lt;Europe&gt;();</code></p>\n<p>Now you can call <code>europeList.add</code> without getting an NPE.</p>\n<p><code>.</code> is java-ese for: Walk over to this address and do something with the house you find there. NullPointerException is: '.uhh.. the page is blank; I can't walk over to the place you want me to walk to'.</p>\n"}],"owner":{"account_id":26683599,"reputation":7,"user_id":20293241,"display_name":"theadvocate"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1671039022,"answer_count":1,"score":-2,"last_activity_date":1671036660,"creation_date":1671036427,"question_id":74801610,"body_markdown":"I need to make a list of countries based on continets. I have made a list of countries, based on a class (in my case, Europe- that has String Name, int population, int surface- separate class with getters, setters and constructor.)\r\nNow I&#39;ve made 3 lists of name, population, and surface, all with the same number of indexes., using the Arrays.asList method, as follows:\r\n\r\n\r\n```\r\nList&lt;String&gt; countriesEurope = Arrays.asList(&quot;Russia&quot;, &quot;Germany&quot;, &quot;United Kingdom&quot;, &quot;France&quot;, &quot;Italy&quot;, &quot;Spain&quot;, &quot;Ukraine&quot;, &quot;Poland&quot;, &quot;Romania&quot;, &quot;Netherlands&quot;, &quot;Belgium&quot;, &quot;Czech Republic&quot;, &quot;Greece&quot;, &quot;Portugal&quot;, &quot;Sweden&quot;, &quot;Hungary&quot;, &quot;Belarus&quot;, &quot;Austria&quot;, &quot;Serbia&quot;, &quot;Switzerland&quot;, &quot;Bulgaria&quot;, &quot;Denmark&quot;, &quot;Finland&quot;, &quot;Slovakia&quot;, &quot;Norway&quot;, &quot;Ireland&quot;, &quot;Croatia&quot;, &quot;Moldova&quot;, &quot;Bosnia and Herzegovina&quot;, &quot;Albania&quot;, &quot;Lithuania&quot;, &quot;North Macedonia&quot;, &quot;Slovenia&quot;, &quot;Latvia&quot;, &quot;Estonia&quot;, &quot;Montenegro&quot;, &quot;Luxembourg&quot;, &quot;Malta&quot;, &quot;Iceland&quot;, &quot;Channel Islands&quot;, &quot;Isle of Man&quot;, &quot;Andorra&quot;, &quot;Faeroe Islands&quot;, &quot;Monaco&quot;, &quot;Liechtenstein&quot;, &quot;San Marino&quot;, &quot;Gibraltar&quot;, &quot;Holy See&quot;);\r\nList&lt;Integer&gt; populationEurope = Arrays.asList(145934462,83783942,67886011,65273511,60461826,46754778,43733762,37846611,19237691, 17134872, 11589623, 10708981, 10423054, 10196709, 10099265, 9660351, 9449323, 9006398, 8737371, 8654622, 6948445, 5792202, 5540720, 5459642, 5421241, 4937786, 4105267, 4033963, 3280819, 2877797, 2722289, 2083374, 2078938, 1886198, 1326535, 628066, 625978, 441543, 341243, 173863, 85033, 77265, 48863, 39242, 38128, 33931, 33691, 801);\r\nList&lt;Integer&gt; surfaceEurope = Arrays.asList(16376870,34856,24193,547557,29414,4988,57932,30623,23017,3372,3028,7724,1289, 9159, 41034, 9053, 20291, 82409, 8746, 39516, 10856, 4243, 30389, 48088, 365268, 6889, 5596, 3285, 51, 274, 62674, 2522, 2014, 622, 4239, 1345, 259, 320, 10025, 190, 570, 470, 1396, 1, 160, 60, 10, 0);\r\n```\r\nI want to add them to a new list, that will contain all this data, with the following method:\r\n\r\n\r\n```\r\nList&lt;Europe&gt; europeList ;\r\n\r\nfor (int i=0; i&lt;countriesEurope.size(); i++){\r\n    europeList.add(new Europe(countriesEurope.get(i), populationEurope.get(i), surfaceEurope.get(i)));\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nWhen I want to print, using sysout, I can not print them, as I get:\r\n\r\n```\r\nxception in thread &quot;main&quot; java.lang.NullPointerException\r\n\tat AllCountries.main(AllCountries.java:19)\r\n```\r\n\r\n","title":"Adding lists made with Arrays.asList to a new List","body":"<p>I need to make a list of countries based on continets. I have made a list of countries, based on a class (in my case, Europe- that has String Name, int population, int surface- separate class with getters, setters and constructor.)\nNow I've made 3 lists of name, population, and surface, all with the same number of indexes., using the Arrays.asList method, as follows:</p>\n<pre><code>List&lt;String&gt; countriesEurope = Arrays.asList(&quot;Russia&quot;, &quot;Germany&quot;, &quot;United Kingdom&quot;, &quot;France&quot;, &quot;Italy&quot;, &quot;Spain&quot;, &quot;Ukraine&quot;, &quot;Poland&quot;, &quot;Romania&quot;, &quot;Netherlands&quot;, &quot;Belgium&quot;, &quot;Czech Republic&quot;, &quot;Greece&quot;, &quot;Portugal&quot;, &quot;Sweden&quot;, &quot;Hungary&quot;, &quot;Belarus&quot;, &quot;Austria&quot;, &quot;Serbia&quot;, &quot;Switzerland&quot;, &quot;Bulgaria&quot;, &quot;Denmark&quot;, &quot;Finland&quot;, &quot;Slovakia&quot;, &quot;Norway&quot;, &quot;Ireland&quot;, &quot;Croatia&quot;, &quot;Moldova&quot;, &quot;Bosnia and Herzegovina&quot;, &quot;Albania&quot;, &quot;Lithuania&quot;, &quot;North Macedonia&quot;, &quot;Slovenia&quot;, &quot;Latvia&quot;, &quot;Estonia&quot;, &quot;Montenegro&quot;, &quot;Luxembourg&quot;, &quot;Malta&quot;, &quot;Iceland&quot;, &quot;Channel Islands&quot;, &quot;Isle of Man&quot;, &quot;Andorra&quot;, &quot;Faeroe Islands&quot;, &quot;Monaco&quot;, &quot;Liechtenstein&quot;, &quot;San Marino&quot;, &quot;Gibraltar&quot;, &quot;Holy See&quot;);\nList&lt;Integer&gt; populationEurope = Arrays.asList(145934462,83783942,67886011,65273511,60461826,46754778,43733762,37846611,19237691, 17134872, 11589623, 10708981, 10423054, 10196709, 10099265, 9660351, 9449323, 9006398, 8737371, 8654622, 6948445, 5792202, 5540720, 5459642, 5421241, 4937786, 4105267, 4033963, 3280819, 2877797, 2722289, 2083374, 2078938, 1886198, 1326535, 628066, 625978, 441543, 341243, 173863, 85033, 77265, 48863, 39242, 38128, 33931, 33691, 801);\nList&lt;Integer&gt; surfaceEurope = Arrays.asList(16376870,34856,24193,547557,29414,4988,57932,30623,23017,3372,3028,7724,1289, 9159, 41034, 9053, 20291, 82409, 8746, 39516, 10856, 4243, 30389, 48088, 365268, 6889, 5596, 3285, 51, 274, 62674, 2522, 2014, 622, 4239, 1345, 259, 320, 10025, 190, 570, 470, 1396, 1, 160, 60, 10, 0);\n</code></pre>\n<p>I want to add them to a new list, that will contain all this data, with the following method:</p>\n<pre><code>List&lt;Europe&gt; europeList ;\n\nfor (int i=0; i&lt;countriesEurope.size(); i++){\n    europeList.add(new Europe(countriesEurope.get(i), populationEurope.get(i), surfaceEurope.get(i)));\n}\n\n</code></pre>\n<p>When I want to print, using sysout, I can not print them, as I get:</p>\n<pre><code>xception in thread &quot;main&quot; java.lang.NullPointerException\n    at AllCountries.main(AllCountries.java:19)\n</code></pre>\n"},{"tags":["java","spring","jpa","annotations","transient"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1671036878,"post_id":74801648,"comment_id":132012559,"body_markdown":"You need to use the one from `javax.persistence` which indicates basically that this isn&#39;t a DB field. Your issue is you are trying to shoehorn too much into a single object. For your query create a dedicated DTO instead of trying to shoehorn it into the entity.","body":"You need to use the one from <code>javax.persistence</code> which indicates basically that this isn&#39;t a DB field. Your issue is you are trying to shoehorn too much into a single object. For your query create a dedicated DTO instead of trying to shoehorn it into the entity."},{"owner":{"account_id":8017300,"reputation":197,"user_id":6047129,"accept_rate":40,"display_name":"Felipe Hogrefe Bento"},"score":0,"creation_date":1671110231,"post_id":74801648,"comment_id":132030414,"body_markdown":"That worked!! Besides that I need an approach like this: https://stackoverflow.com/a/55487634/6047129\nThanks :)","body":"That worked!! Besides that I need an approach like this: <a href=\"https://stackoverflow.com/a/55487634/6047129\">stackoverflow.com/a/55487634/6047129</a> Thanks :)"}],"owner":{"account_id":8017300,"reputation":197,"user_id":6047129,"accept_rate":40,"display_name":"Felipe Hogrefe Bento"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671036630,"creation_date":1671036630,"question_id":74801648,"body_markdown":"I have a entity, something like this:\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    @Entity(name = &quot;warranties&quot;)\r\n    public class Warranty implements Comparable&lt;Warranty&gt; {\r\n    \r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Column(name = &quot;warranty_pk&quot;)\r\n      private Long id;\r\n    \r\n      @Column(nullable = false)\r\n      private Date startDate;\r\n    \r\n      @Column(nullable = false)\r\n      private Date expireDate;\r\n    \r\n      @Column\r\n      private String note;\r\n    \r\n      @Transient\r\n      private Date displayDate;\r\n      }\r\n    }\r\n\r\nNotice that displayDate is annotated with @Transient.\r\n\r\nI have two functionalities related to this entity, one is to fetch some of them, to do that I need to check expiration dates. So in my repository I have the following query:\r\n\r\n      @Query(value =\r\n          &quot;SELECT &quot;\r\n              + &quot;IF(expire_date &lt; ((CURDATE() + INTERVAL 1 DAY) - INTERVAL 1 SECOND), expire_date, (expire_date - INTERVAL 90 day)) AS display_date, * &quot;\r\n              + &quot;FROM warranties &quot;\r\n              + &quot;WHERE expire_date &lt; ((CURDATE() + INTERVAL 1 DAY) - INTERVAL 1 SECOND) + INTERVAL 90 DAY &quot;\r\n              + &quot;AND expire_date &lt;= :expire_date &quot;\r\n              + &quot;AND start_date &gt;= :startDate &quot;\r\n              + &quot;AND expire_date &lt;= :endDate + INTERVAL 90 DAY &quot;\r\n              + &quot;ORDER BY display_date DESC&quot;,\r\n          nativeQuery = true)\r\n      List&lt;Warranty&gt; findWarranties(@Param(&quot;expire_date&quot;) Date expireDate,\r\n          @Param(&quot;startDate&quot;) Date startDate, @Param(&quot;endDate&quot;) Date endDate);\r\n\r\nIts that way so I can retrieve the &quot;displayDate&quot; calculated by the database.\r\n\r\nIt works fine when I use the following import:\r\n\r\n    import org.springframework.data.annotation.Transient;\r\n\r\nAnd the other functionality is a save, where I save a given note.\r\n\r\nFor that case I get the following error:\r\n\r\n    Caused by: java.sql.SQLSyntaxErrorException: Unknown column &#39;warranty0_.display_date&#39; in &#39;field list&#39;\r\n\r\nIf I use the following import, the second functionality works fine:\r\n\r\n    import javax.persistence.Transient;\r\n\r\nBut then the **findWarranties** doesn&#39;t return displayDate.\r\n\r\nAny thoughts?\r\n","title":"Correct use of @Transient","body":"<p>I have a entity, something like this:</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@Entity(name = &quot;warranties&quot;)\npublic class Warranty implements Comparable&lt;Warranty&gt; {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;warranty_pk&quot;)\n  private Long id;\n\n  @Column(nullable = false)\n  private Date startDate;\n\n  @Column(nullable = false)\n  private Date expireDate;\n\n  @Column\n  private String note;\n\n  @Transient\n  private Date displayDate;\n  }\n}\n</code></pre>\n<p>Notice that displayDate is annotated with @Transient.</p>\n<p>I have two functionalities related to this entity, one is to fetch some of them, to do that I need to check expiration dates. So in my repository I have the following query:</p>\n<pre><code>  @Query(value =\n      &quot;SELECT &quot;\n          + &quot;IF(expire_date &lt; ((CURDATE() + INTERVAL 1 DAY) - INTERVAL 1 SECOND), expire_date, (expire_date - INTERVAL 90 day)) AS display_date, * &quot;\n          + &quot;FROM warranties &quot;\n          + &quot;WHERE expire_date &lt; ((CURDATE() + INTERVAL 1 DAY) - INTERVAL 1 SECOND) + INTERVAL 90 DAY &quot;\n          + &quot;AND expire_date &lt;= :expire_date &quot;\n          + &quot;AND start_date &gt;= :startDate &quot;\n          + &quot;AND expire_date &lt;= :endDate + INTERVAL 90 DAY &quot;\n          + &quot;ORDER BY display_date DESC&quot;,\n      nativeQuery = true)\n  List&lt;Warranty&gt; findWarranties(@Param(&quot;expire_date&quot;) Date expireDate,\n      @Param(&quot;startDate&quot;) Date startDate, @Param(&quot;endDate&quot;) Date endDate);\n</code></pre>\n<p>Its that way so I can retrieve the &quot;displayDate&quot; calculated by the database.</p>\n<p>It works fine when I use the following import:</p>\n<pre><code>import org.springframework.data.annotation.Transient;\n</code></pre>\n<p>And the other functionality is a save, where I save a given note.</p>\n<p>For that case I get the following error:</p>\n<pre><code>Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'warranty0_.display_date' in 'field list'\n</code></pre>\n<p>If I use the following import, the second functionality works fine:</p>\n<pre><code>import javax.persistence.Transient;\n</code></pre>\n<p>But then the <strong>findWarranties</strong> doesn't return displayDate.</p>\n<p>Any thoughts?</p>\n"},{"tags":["java","spring-boot","jackson"],"owner":{"account_id":1062864,"reputation":767,"user_id":1064127,"accept_rate":48,"display_name":"Sutty1000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671036510,"creation_date":1671036026,"question_id":74801536,"body_markdown":"I&#39;m using Spring Boot to return YAML via a controller. I have created a Jackson YAMLFactory ObjectMapper. However the consumer of the YAML from the endpoint is fussy about certain fields having single quotes but the majority should not, this is not something I can change.\r\n\r\nI have my ObjectMapper set up as such:\r\n\r\n    public MappingJackson2YamlHttpMessageConverter yamlHttpMessageConverter() {\r\n        return new MappingJackson2YamlHttpMessageConverter(new ObjectMapper(new YAMLFactory()\r\n                .enable(YAMLGenerator.Feature.MINIMIZE_QUOTES))\r\n                .enable(SerializationFeature.INDENT_OUTPUT));\r\n    }\r\n\r\nThis successfully returns me YAML with no double quotes which was the default. I can not however work out how to allow specific fields to be enclosed by single quotes. I have tried annotating the Getters with JsonRawValue and then adding the quote into the value set in the field:\r\n\r\n    @JsonRawValue\r\n    public String getSonarProjectKey() {\r\n        return sonarProjectKey;\r\n    }\r\n\r\n But of course this does not work with YAML and I get an exception. \r\n\r\nSo I&#39;m unsure about how to achieve this requirement. ","title":"Jackson YAMLFactory, how to allow/disable single quotes at a field level?","body":"<p>I'm using Spring Boot to return YAML via a controller. I have created a Jackson YAMLFactory ObjectMapper. However the consumer of the YAML from the endpoint is fussy about certain fields having single quotes but the majority should not, this is not something I can change.</p>\n<p>I have my ObjectMapper set up as such:</p>\n<pre><code>public MappingJackson2YamlHttpMessageConverter yamlHttpMessageConverter() {\n    return new MappingJackson2YamlHttpMessageConverter(new ObjectMapper(new YAMLFactory()\n            .enable(YAMLGenerator.Feature.MINIMIZE_QUOTES))\n            .enable(SerializationFeature.INDENT_OUTPUT));\n}\n</code></pre>\n<p>This successfully returns me YAML with no double quotes which was the default. I can not however work out how to allow specific fields to be enclosed by single quotes. I have tried annotating the Getters with JsonRawValue and then adding the quote into the value set in the field:</p>\n<pre><code>@JsonRawValue\npublic String getSonarProjectKey() {\n    return sonarProjectKey;\n}\n</code></pre>\n<p>But of course this does not work with YAML and I get an exception.</p>\n<p>So I'm unsure about how to achieve this requirement.</p>\n"},{"tags":["java","hibernate","hibernate-criteria","criteria-api"],"owner":{"account_id":27253075,"reputation":1,"user_id":20777182,"display_name":"Lev Averin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671036460,"creation_date":1671036399,"question_id":74801604,"body_markdown":"I&#39;m trying to write a Criteria API query which will return employees with current salary &gt; N.\r\nThe problem is that I have to solve greatest-n-per-group problem because salaries table contains full history of employees&#39;s salaries and I have to select salary with greatest from_date.\r\n\r\nMy tables:\r\n\r\nEmployees, which look something like this\r\n\r\n| emp_no    | first_name| last_name| \r\n| --------  | --------  | -------- |\r\n| 10001     | Georgi    | Facello  |\r\n| 10002     | Chirstian | Koblick  |\r\n\r\nAnd salaries table, with following format:\r\n\r\n\r\n| emp_no  | salary  | from_date  | to_date    |\r\n| --------| --------| --------   | --------   |\r\n| 10001   | 60117   | 1986-06-26 | 1987-06-26 |\r\n| 10001   | 62102   | 1987-06-26 | 1988-06-25 |\r\n\r\nEmployee.java:\r\n\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;employees&quot;)\r\n@Getter @Setter\r\npublic class Employee implements Serializable {\r\n    @Id\r\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;emp_no&quot;)\r\n    private long id;\r\n\r\n    @OneToMany(mappedBy = &quot;employee&quot;, fetch = FetchType.EAGER)\r\n    List&lt;Salary&gt; salaries;\r\n\r\n    @Column(name = &quot;birth_date&quot;)\r\n    private java.sql.Date birthDate;\r\n\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private Gender gender;\r\n\r\n    @Column(name = &quot;hire_date&quot;)\r\n    private java.sql.Date hireDate;\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nSalary.java:\r\n\r\n```\r\n@Entity\r\n@Getter @Setter\r\n@Table(name = &quot;salaries&quot;)\r\npublic class Salary implements Serializable {\r\n    @Id\r\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;emp_no&quot;, insertable=false, updatable=false)\r\n    private long id;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;emp_no&quot;, insertable=false, updatable=false)\r\n    private Employee employee;\r\n\r\n    @Column(name = &quot;salary&quot;)\r\n    private int salary;\r\n\r\n    @Column(name = &quot;from_date&quot;)\r\n    private java.sql.Date fromDate;\r\n\r\n    @Column(name = &quot;to_date&quot;)\r\n    private java.sql.Date toDate;\r\n}\r\n```\r\nSo, basically I&#39;m just looking for Criteria API analogue of this SQL query\r\n\r\n```\r\nSELECT\r\n    e1_0.emp_no,\r\n    e1_0.birth_date,\r\n    e1_0.first_name,\r\n    e1_0.gender,\r\n    e1_0.hire_date,\r\n    e1_0.last_name,\r\n    s1_0.salary\r\nFROM\r\n    employees e1_0\r\nLEFT JOIN\r\n    salaries s1_0 on e1_0.emp_no=s1_0.emp_no\r\nINNER JOIN\r\n    (SELECT emp_no, MAX(from_date) from_date\r\n    FROM salaries s1_0\r\n    GROUP BY emp_no)\r\n    s2_0 ON s2_0.emp_no=s1_0.emp_no AND s2_0.from_date=s1_0.from_date\r\nWHERE\r\n    s1_0.salary &gt; 100000\r\n```\r\n","title":"Solve greatest-n-per-group problem using JPA Criteria API","body":"<p>I'm trying to write a Criteria API query which will return employees with current salary &gt; N.\nThe problem is that I have to solve greatest-n-per-group problem because salaries table contains full history of employees's salaries and I have to select salary with greatest from_date.</p>\n<p>My tables:</p>\n<p>Employees, which look something like this</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>emp_no</th>\n<th>first_name</th>\n<th>last_name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>10001</td>\n<td>Georgi</td>\n<td>Facello</td>\n</tr>\n<tr>\n<td>10002</td>\n<td>Chirstian</td>\n<td>Koblick</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>And salaries table, with following format:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>emp_no</th>\n<th>salary</th>\n<th>from_date</th>\n<th>to_date</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>10001</td>\n<td>60117</td>\n<td>1986-06-26</td>\n<td>1987-06-26</td>\n</tr>\n<tr>\n<td>10001</td>\n<td>62102</td>\n<td>1987-06-26</td>\n<td>1988-06-25</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Employee.java:</p>\n<pre><code>@Entity\n@Table(name=&quot;employees&quot;)\n@Getter @Setter\npublic class Employee implements Serializable {\n    @Id\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;emp_no&quot;)\n    private long id;\n\n    @OneToMany(mappedBy = &quot;employee&quot;, fetch = FetchType.EAGER)\n    List&lt;Salary&gt; salaries;\n\n    @Column(name = &quot;birth_date&quot;)\n    private java.sql.Date birthDate;\n\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n\n    @Enumerated(EnumType.STRING)\n    private Gender gender;\n\n    @Column(name = &quot;hire_date&quot;)\n    private java.sql.Date hireDate;\n\n}\n</code></pre>\n<p>Salary.java:</p>\n<pre><code>@Entity\n@Getter @Setter\n@Table(name = &quot;salaries&quot;)\npublic class Salary implements Serializable {\n    @Id\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;emp_no&quot;, insertable=false, updatable=false)\n    private long id;\n\n    @ManyToOne\n    @JoinColumn(name=&quot;emp_no&quot;, insertable=false, updatable=false)\n    private Employee employee;\n\n    @Column(name = &quot;salary&quot;)\n    private int salary;\n\n    @Column(name = &quot;from_date&quot;)\n    private java.sql.Date fromDate;\n\n    @Column(name = &quot;to_date&quot;)\n    private java.sql.Date toDate;\n}\n</code></pre>\n<p>So, basically I'm just looking for Criteria API analogue of this SQL query</p>\n<pre><code>SELECT\n    e1_0.emp_no,\n    e1_0.birth_date,\n    e1_0.first_name,\n    e1_0.gender,\n    e1_0.hire_date,\n    e1_0.last_name,\n    s1_0.salary\nFROM\n    employees e1_0\nLEFT JOIN\n    salaries s1_0 on e1_0.emp_no=s1_0.emp_no\nINNER JOIN\n    (SELECT emp_no, MAX(from_date) from_date\n    FROM salaries s1_0\n    GROUP BY emp_no)\n    s2_0 ON s2_0.emp_no=s1_0.emp_no AND s2_0.from_date=s1_0.from_date\nWHERE\n    s1_0.salary &gt; 100000\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":1,"creation_date":1671035679,"post_id":74801400,"comment_id":132012018,"body_markdown":"(LMGTFY) I think you are looking for Firebase App Distribution.","body":"(LMGTFY) I think you are looking for Firebase App Distribution."},{"owner":{"account_id":4230767,"reputation":521,"user_id":6077973,"display_name":"kagof"},"score":0,"creation_date":1671036855,"post_id":74801400,"comment_id":132012549,"body_markdown":"As @TheLibrarian said, Firebase App Distribution works, or for a more caveman solution you can export the app to an APK file and send that to the user","body":"As @TheLibrarian said, Firebase App Distribution works, or for a more caveman solution you can export the app to an APK file and send that to the user"},{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":1,"creation_date":1671037544,"post_id":74801400,"comment_id":132012797,"body_markdown":"I just wanna clarify. LMGTFY was just about that it is very easy to find things about this. I use App Distribution. They have very good gradle integration where you can compile and automatically upload it for distribution. but again this is VERY broad question without any &quot;problem&quot; as seen in SO terms.","body":"I just wanna clarify. LMGTFY was just about that it is very easy to find things about this. I use App Distribution. They have very good gradle integration where you can compile and automatically upload it for distribution. but again this is VERY broad question without any &quot;problem&quot; as seen in SO terms."},{"owner":{"account_id":23812384,"reputation":49,"user_id":17976855,"display_name":"oliver davidson"},"score":0,"creation_date":1671037854,"post_id":74801400,"comment_id":132012915,"body_markdown":"This isn&#39;t a broad question at all. You need to relax and be simple. I&#39;m in need of a way to send the app to another phone via internet. How is this broad? You are supposed to give me anything that is going to help me with this and i&#39;ll try all of them out. This website is also in google so i did google too. Ease out big guy.","body":"This isn&#39;t a broad question at all. You need to relax and be simple. I&#39;m in need of a way to send the app to another phone via internet. How is this broad? You are supposed to give me anything that is going to help me with this and i&#39;ll try all of them out. This website is also in google so i did google too. Ease out big guy."}],"owner":{"account_id":23812384,"reputation":49,"user_id":17976855,"display_name":"oliver davidson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1671036404,"creation_date":1671035509,"question_id":74801400,"body_markdown":"I have built an Android app using Android Studio and I need to download the app on some other phone. I can&#39;t access the phone physically, so I can&#39;t connect it to my computer via USB and install it on the phone. I need a way to send the app files to the user via internet so that they can download and install and test the app. How can I accomplish this?","title":"How can I send someone my app through internet","body":"<p>I have built an Android app using Android Studio and I need to download the app on some other phone. I can't access the phone physically, so I can't connect it to my computer via USB and install it on the phone. I need a way to send the app files to the user via internet so that they can download and install and test the app. How can I accomplish this?</p>\n"},{"tags":["java","spring","spring-boot","eclipse","spring-data-jpa"],"comments":[{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1670353902,"post_id":74705644,"comment_id":131855881,"body_markdown":"You mean to say there is data in application.properties file but showing empty in target/classes/application.properties?","body":"You mean to say there is data in application.properties file but showing empty in target/classes/application.properties?"},{"owner":{"account_id":2511288,"reputation":71,"user_id":2183717,"display_name":"pedrociarlini"},"score":0,"creation_date":1670515510,"post_id":74705644,"comment_id":131897529,"body_markdown":"Yes. completely empty `target/classes/application.properties` file.","body":"Yes. completely empty <code>target&#47;classes&#47;application.properties</code> file."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1670653991,"post_id":74705644,"comment_id":131927733,"body_markdown":"what is your major problem ? Maven config or Eclipse ? 1. open a terminal , `mvn clean package`, then check `target/classes/application.properties` is ok or empty ? if ok, then maven config file is not the problem, do not modify maven config pom.xml, test 2. `mvn clean spring-boot:run`, 3. Eclipse , Maven -&gt; Annotation Processing -&gt; `Do not automatically configure/execute annotation processing from pom.xml` , In your project -&gt; `Run as` -&gt; `Maven build` -&gt; goal: `package`.","body":"what is your major problem ? Maven config or Eclipse ? 1. open a terminal , <code>mvn clean package</code>, then check <code>target&#47;classes&#47;application.properties</code> is ok or empty ? if ok, then maven config file is not the problem, do not modify maven config pom.xml, test 2. <code>mvn clean spring-boot:run</code>, 3. Eclipse , Maven -&gt; Annotation Processing -&gt; <code>Do not automatically configure&#47;execute annotation processing from pom.xml</code> , In your project -&gt; <code>Run as</code> -&gt; <code>Maven build</code> -&gt; goal: <code>package</code>."},{"owner":{"account_id":2511288,"reputation":71,"user_id":2183717,"display_name":"pedrociarlini"},"score":0,"creation_date":1670945280,"post_id":74705644,"comment_id":131987535,"body_markdown":"@life888888, everything is fine when executing maven the app using maven commands. I think the problem in on Ecipse.","body":"@life888888, everything is fine when executing maven the app using maven commands. I think the problem in on Ecipse."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1670947346,"post_id":74705644,"comment_id":131988280,"body_markdown":"Try, Click Your Project, popup menu `Maven` -&gt; `Update Project`,  `Update Maven Project` Window, default checkbox for all, but not `Offline`","body":"Try, Click Your Project, popup menu <code>Maven</code> -&gt; <code>Update Project</code>,  <code>Update Maven Project</code> Window, default checkbox for all, but not <code>Offline</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1670947613,"post_id":74705644,"comment_id":131988383,"body_markdown":"Or `File` -&gt; `Switch workspace`, use new workspace. try again, you already try **delete eclipse files (.project, .settings, .classpath etc) and import as an &quot;existing MVN project&quot;**","body":"Or <code>File</code> -&gt; <code>Switch workspace</code>, use new workspace. try again, you already try <b>delete eclipse files (.project, .settings, .classpath etc) and import as an &quot;existing MVN project&quot;</b>"},{"owner":{"account_id":2511288,"reputation":71,"user_id":2183717,"display_name":"pedrociarlini"},"score":0,"creation_date":1671035155,"post_id":74705644,"comment_id":132011813,"body_markdown":"`Maven -&gt; Update Project`, all the time :), almost an automatic action on my fingers. Tried.\n`File -&gt; Switch workspace` -&gt; I need to do this every day to switch between personal and professional projects... so, tried.","body":"<code>Maven -&gt; Update Project</code>, all the time :), almost an automatic action on my fingers. Tried. <code>File -&gt; Switch workspace</code> -&gt; I need to do this every day to switch between personal and professional projects... so, tried."}],"answers":[{"tags":[],"owner":{"account_id":2511288,"reputation":71,"user_id":2183717,"display_name":"pedrociarlini"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671035849,"creation_date":1671035849,"answer_id":74801487,"question_id":74705644,"body_markdown":"A friend from work, Sim&#227;o, help me to find the problem.\r\n\r\nI don&#39;t know how or why but in Eclipse inside `Project properties` &gt; `Java Build Path` &gt; tab `Source` &gt; _source folders on build path_ &gt; `project/src/main/resources`, the option _Excluded_ was `Excluded: **`, where is supposed to be `Excluded: none`\r\n\r\n[![Excluded option][1]][1]\r\n\r\n\r\nI expected that the _application.properties_ wasn&#39;t copied at all, instead of a empty copy of it.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U44fS.png","title":"Eclipse is copying an empty application.properties to target/classes (spring boot)","body":"<p>A friend from work, Simão, help me to find the problem.</p>\n<p>I don't know how or why but in Eclipse inside <code>Project properties</code> &gt; <code>Java Build Path</code> &gt; tab <code>Source</code> &gt; <em>source folders on build path</em> &gt; <code>project/src/main/resources</code>, the option <em>Excluded</em> was <code>Excluded: **</code>, where is supposed to be <code>Excluded: none</code></p>\n<p><a href=\"https://i.stack.imgur.com/U44fS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U44fS.png\" alt=\"Excluded option\" /></a></p>\n<p>I expected that the <em>application.properties</em> wasn't copied at all, instead of a empty copy of it.</p>\n"}],"owner":{"account_id":2511288,"reputation":71,"user_id":2183717,"display_name":"pedrociarlini"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":734,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74801487,"answer_count":1,"score":0,"last_activity_date":1671035849,"creation_date":1670342882,"question_id":74705644,"body_markdown":"I&#39;m facing a problem with this specific project, the resultant `target/classes/application.properties` is copied as an empty one when I update the `src/main/resources/application.properties`.\r\n\r\nFor this project I&#39;m using two datasources/jpa configs, following the same format as the following:\r\n\r\n\r\n``` lang-java\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(basePackages = { PJE_BPMN_PACKAGES }, entityManagerFactoryRef = PJE_BPMN_EMF, transactionManagerRef = PJE_BPMN_TM)\r\npublic class PjeBpmnDbConfig {\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\r\n\t@Primary\r\n\t@Bean(name = PJE_BPMN_DS)\r\n\t@ConfigurationProperties(prefix = &quot;pjebpmn.datasource&quot;)\r\n\tpublic DataSource createDataSource() {\r\n\t\treturn DataSourceBuilder.create().build();\r\n\t}\r\n\r\n\r\n\t@Bean(name = PJE_BPMN_EMF)\r\n\t@Primary\r\n\t@ConfigurationProperties(prefix = &quot;pjebpmn.jpa&quot;)\r\n\tpublic LocalContainerEntityManagerFactoryBean createEntityManager(EntityManagerFactoryBuilder entityManagerFactoryBuilder,\r\n\t\t\t@Qualifier(PJE_BPMN_DS) DataSource dataSource) {\r\n\r\n\t\tMap&lt;String, String&gt; properties = new HashMap&lt;&gt;();\r\n\t\tSystem.out.println(\r\n\t\t\t\t&quot;lendo pjebpmn.jpa.hibernate.ddl-auto do properties, e retornou: &quot; + env.getProperty(&quot;pjebpmn.jpa.hibernate.ddl-auto&quot;, &quot;NADA&quot;));\r\n\t\tproperties.put(&quot;hibernate.hbm2ddl.auto&quot;, env.getProperty(&quot;pjebpmn.jpa.hibernate.ddl-auto&quot;, &quot;update&quot;));\r\n\t\tproperties.put(&quot;hibernate.dialect&quot;, env.getProperty(&quot;pjebpmn.jpa.properties.hibernate.dialect&quot;, &quot;org.hibernate.dialect.PostgreSQLDialect&quot;));\r\n\r\n\t\treturn entityManagerFactoryBuilder.dataSource(dataSource).packages(PJE_BPMN_PACKAGES).persistenceUnit(PJE_BPMN_DS).properties(properties)\r\n\t\t\t\t.build();\r\n\t}\r\n\r\n\t@Primary\r\n\t@Bean(name = PJE_BPMN_TM)\r\n\tpublic PlatformTransactionManager createTransactionManager(@Qualifier(PJE_BPMN_EMF) EntityManagerFactory entityManagerFactory) {\r\n\r\n\t\tJpaTransactionManager transactionManager = new JpaTransactionManager(entityManagerFactory);\r\n\t\treturn transactionManager;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nIn the pom.xml, I&#39;m using the start.spring.io generated, with `spring-boot-starter-data-jpa`, `spring-boot-starter-web`, `lombok`, `spring-boot-devtools`, `spring-boot-configuration-processor` and `postgresql` dependencis.\r\n\r\n\r\nWhats wrong?\r\n\r\n\r\nPS: I activated the `Eclipse &gt; Preferences &gt; Maven &gt; Annotation Processing &gt; &quot;Experimental&quot;` option, and the deactivated moments later.\r\n\r\n\r\n\r\nEnvironment:\r\n- Mac Os catalina\r\n- Eclipse 2022-09\r\n- Sprint boot 2.7.6\r\n\r\nI&#39;ve tried with no success:\r\n- delete project from eclipse and eclipse files (.project, .settings, etc) and import as an &quot;existing MVN project&quot;\r\n- remove lombok and spring-boot-configuration-processor from pom.xml","title":"Eclipse is copying an empty application.properties to target/classes (spring boot)","body":"<p>I'm facing a problem with this specific project, the resultant <code>target/classes/application.properties</code> is copied as an empty one when I update the <code>src/main/resources/application.properties</code>.</p>\n<p>For this project I'm using two datasources/jpa configs, following the same format as the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = { PJE_BPMN_PACKAGES }, entityManagerFactoryRef = PJE_BPMN_EMF, transactionManagerRef = PJE_BPMN_TM)\npublic class PjeBpmnDbConfig {\n    @Autowired\n    private Environment env;\n\n    @Primary\n    @Bean(name = PJE_BPMN_DS)\n    @ConfigurationProperties(prefix = &quot;pjebpmn.datasource&quot;)\n    public DataSource createDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n\n    @Bean(name = PJE_BPMN_EMF)\n    @Primary\n    @ConfigurationProperties(prefix = &quot;pjebpmn.jpa&quot;)\n    public LocalContainerEntityManagerFactoryBean createEntityManager(EntityManagerFactoryBuilder entityManagerFactoryBuilder,\n            @Qualifier(PJE_BPMN_DS) DataSource dataSource) {\n\n        Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();\n        System.out.println(\n                &quot;lendo pjebpmn.jpa.hibernate.ddl-auto do properties, e retornou: &quot; + env.getProperty(&quot;pjebpmn.jpa.hibernate.ddl-auto&quot;, &quot;NADA&quot;));\n        properties.put(&quot;hibernate.hbm2ddl.auto&quot;, env.getProperty(&quot;pjebpmn.jpa.hibernate.ddl-auto&quot;, &quot;update&quot;));\n        properties.put(&quot;hibernate.dialect&quot;, env.getProperty(&quot;pjebpmn.jpa.properties.hibernate.dialect&quot;, &quot;org.hibernate.dialect.PostgreSQLDialect&quot;));\n\n        return entityManagerFactoryBuilder.dataSource(dataSource).packages(PJE_BPMN_PACKAGES).persistenceUnit(PJE_BPMN_DS).properties(properties)\n                .build();\n    }\n\n    @Primary\n    @Bean(name = PJE_BPMN_TM)\n    public PlatformTransactionManager createTransactionManager(@Qualifier(PJE_BPMN_EMF) EntityManagerFactory entityManagerFactory) {\n\n        JpaTransactionManager transactionManager = new JpaTransactionManager(entityManagerFactory);\n        return transactionManager;\n    }\n\n}\n</code></pre>\n<p>In the pom.xml, I'm using the start.spring.io generated, with <code>spring-boot-starter-data-jpa</code>, <code>spring-boot-starter-web</code>, <code>lombok</code>, <code>spring-boot-devtools</code>, <code>spring-boot-configuration-processor</code> and <code>postgresql</code> dependencis.</p>\n<p>Whats wrong?</p>\n<p>PS: I activated the <code>Eclipse &gt; Preferences &gt; Maven &gt; Annotation Processing &gt; &quot;Experimental&quot;</code> option, and the deactivated moments later.</p>\n<p>Environment:</p>\n<ul>\n<li>Mac Os catalina</li>\n<li>Eclipse 2022-09</li>\n<li>Sprint boot 2.7.6</li>\n</ul>\n<p>I've tried with no success:</p>\n<ul>\n<li>delete project from eclipse and eclipse files (.project, .settings, etc) and import as an &quot;existing MVN project&quot;</li>\n<li>remove lombok and spring-boot-configuration-processor from pom.xml</li>\n</ul>\n"},{"tags":["java","tomcat8"],"comments":[{"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"score":0,"creation_date":1489009171,"post_id":42318819,"comment_id":72488930,"body_markdown":"FYI running tomcat with our war files also does NOT produce the issue","body":"FYI running tomcat with our war files also does NOT produce the issue"},{"owner":{"account_id":61249,"reputation":23600,"user_id":182660,"accept_rate":50,"display_name":"SergGr"},"score":1,"creation_date":1489113630,"post_id":42318819,"comment_id":72540083,"body_markdown":"I know this is not very simple advice but still: you can always build Tomcat from sources and start it under debugger and in the debugger you can place breakpoints on various log messages and trace back the reason from there.","body":"I know this is not very simple advice but still: you can always build Tomcat from sources and start it under debugger and in the debugger you can place breakpoints on various log messages and trace back the reason from there."},{"owner":{"account_id":1326560,"reputation":2671,"user_id":1271255,"display_name":"minus"},"score":0,"creation_date":1489450030,"post_id":42318819,"comment_id":72666401,"body_markdown":"You should set tomcat internals logging level to ALL, this way you should be able to see which resource caused the reload. See https://tomcat.apache.org/tomcat-8.5-doc/logging.html","body":"You should set tomcat internals logging level to ALL, this way you should be able to see which resource caused the reload. See <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/logging.html\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-8.5-doc/logging.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":3424165,"reputation":6012,"user_id":2870532,"accept_rate":70,"display_name":"Tony"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489209461,"creation_date":1489207943,"answer_id":42731484,"question_id":42318819,"body_markdown":"It&#39;s hard to tell from current info, so I can just only give some suggestions to help you:\r\n\r\n - Checking `conf/context.xml`, you may see whether the your watchedResources is changed.\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;!--Default set of monitored resources. If one of these changes, the --&gt;\r\n    &lt;!--  web application will be reload.--&gt;\r\n    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\r\n    &lt;WatchedResource&gt;${catalina.base}/conf/web.xml&lt;/WatchedResource&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n - You may specify the tag in `context.xml` as `&lt;Context reloadable=&quot;false&quot;&gt;` to try to stop this issue.\r\n - More logging: localhost.date.log, host-manager.date.log\r\n - From [this thread][1], it says it may related with Eclipse and it si suggested to check jars in Eclipse vs the jars used by the installed tomcat:\r\n&gt;There are sometimes problems when a jar (in Eclispe) has a future timestamp, or is loaded after Tomcat starts, which results in Tomcat reloading the context. \r\n\r\n - Implement your `ServletContextListener` and check `ServleConextEvent` to find info about pre context status.\r\n\r\n  [1]: https://www.experts-exchange.com/questions/26520473/tomcat-standardcontext-reload.html#a33843968","title":"Why is Tomcat 8.5 reloading context","body":"<p>It's hard to tell from current info, so I can just only give some suggestions to help you:</p>\n\n<ul>\n<li>Checking <code>conf/context.xml</code>, you may see whether the your watchedResources is changed.</li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!--Default set of monitored resources. If one of these changes, the --&gt;\r\n&lt;!--  web application will be reload.--&gt;\r\n&lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\r\n&lt;WatchedResource&gt;${catalina.base}/conf/web.xml&lt;/WatchedResource&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ul>\n<li>You may specify the tag in <code>context.xml</code> as <code>&lt;Context reloadable=\"false\"&gt;</code> to try to stop this issue.</li>\n<li>More logging: localhost.date.log, host-manager.date.log</li>\n<li><p>From <a href=\"https://www.experts-exchange.com/questions/26520473/tomcat-standardcontext-reload.html#a33843968\" rel=\"nofollow noreferrer\">this thread</a>, it says it may related with Eclipse and it si suggested to check jars in Eclipse vs the jars used by the installed tomcat:</p>\n\n<blockquote>\n  <p>There are sometimes problems when a jar (in Eclispe) has a future timestamp, or is loaded after Tomcat starts, which results in Tomcat reloading the context. </p>\n</blockquote></li>\n<li><p>Implement your <code>ServletContextListener</code> and check <code>ServleConextEvent</code> to find info about pre context status.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":217270,"reputation":2444,"user_id":472992,"display_name":"J&#246;rg"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1489421237,"creation_date":1489421237,"answer_id":42768277,"question_id":42318819,"body_markdown":"You may try the following settings:\r\n\r\n1. Open your server configuration from Eclipse Servers View\r\n - then make sure that in this editors Server Options section *&quot;Modules auto reload by default&quot;* is unchecked\r\n - also make sure that in that editors Publishing section *&quot;Never publish automatically&quot;* is selected\r\n2. Open context menu of your server in Eclipse Servers View\r\n - select *&quot;Add and Remove...&quot;*\r\n - in the dialog make sure that *&quot;If server is started, publish changes immediately&quot;* is unchecked and Finish (you might also have to remove all webapps first and add them again in another step)\r\n\r\n\r\n\r\n","title":"Why is Tomcat 8.5 reloading context","body":"<p>You may try the following settings:</p>\n\n<ol>\n<li>Open your server configuration from Eclipse Servers View\n\n<ul>\n<li>then make sure that in this editors Server Options section <em>\"Modules auto reload by default\"</em> is unchecked</li>\n<li>also make sure that in that editors Publishing section <em>\"Never publish automatically\"</em> is selected</li>\n</ul></li>\n<li>Open context menu of your server in Eclipse Servers View\n\n<ul>\n<li>select <em>\"Add and Remove...\"</em></li>\n<li>in the dialog make sure that <em>\"If server is started, publish changes immediately\"</em> is unchecked and Finish (you might also have to remove all webapps first and add them again in another step)</li>\n</ul></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16062883,"reputation":1058,"user_id":11593292,"display_name":"Sandun Susantha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671035742,"creation_date":1671035742,"answer_id":74801467,"question_id":42318819,"body_markdown":"Go to **server.xml** file by search with **ctrl+shift+R** \r\nUnder &lt;Context&gt; give value as **false** for **reloadable** as follows.\r\n\r\n    &lt;Context docBase=&quot;YourAppName&quot; path=&quot;/YourApp&quot; reloadable=&quot;false&quot; source=&quot;org.eclipse.jst.j2ee.server:YourAppName&quot;/&gt;","title":"Why is Tomcat 8.5 reloading context","body":"<p>Go to <strong>server.xml</strong> file by search with <strong>ctrl+shift+R</strong>\nUnder  give value as <strong>false</strong> for <strong>reloadable</strong> as follows.</p>\n<pre><code>&lt;Context docBase=&quot;YourAppName&quot; path=&quot;/YourApp&quot; reloadable=&quot;false&quot; source=&quot;org.eclipse.jst.j2ee.server:YourAppName&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8941,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":42768277,"answer_count":3,"score":6,"last_activity_date":1671035742,"creation_date":1487441267,"question_id":42318819,"body_markdown":"It seems like since we upgraded tomcat to version 8+ we aways get a context reload on startup.  However it only seems to happen in our development environments (windows OS with eclipse and tomcat 8.5).  Our production environments (linux OS with tomcat 8.5) do not have this issue.  Ill post it below but I do not see any indication of why this is happenign from the tomcat logs.  I know this is normally behavior with something in the web apps directory is changed, but for the life of me i cannot figure out what is doing it.  There must be some way to track it down though.\r\n\r\n\r\n\r\nThis first chunk of log is it fully starting\r\n\r\n&gt; Feb 18, 2017 9:53:41 AM org.apache.tomcat.util.digester.SetPropertiesRule begin\r\nWARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property &#39;source&#39; to &#39;org.eclipse.jst.jee.server:Stackoverflow-commproxy&#39; did not find a matching property.\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Server version:        Apache Tomcat/8.5.11\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Server built:          Jan 10 2017 21:02:52 UTC\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Server number:         8.5.11.0\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: OS Name:               Windows 10\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: OS Version:            10.0\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Architecture:          amd64\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Java Home:             C:\\Program Files\\Java\\jdk1.8.0_91\\jre\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: JVM Version:           1.8.0_91-b14\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: JVM Vendor:            Oracle Corporation\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: CATALINA_BASE:         C:\\CodeRepos\\work\\EclipseWorkspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: CATALINA_HOME:         C:\\tomcat\\apache-tomcat-8.5.11\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Command line argument: -Dcatalina.base=C:\\CodeRepos\\work\\EclipseWorkspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Command line argument: -Dcatalina.home=C:\\tomcat\\apache-tomcat-8.5.11\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Command line argument: -Dwtp.deploy=C:\\CodeRepos\\work\\EclipseWorkspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Command line argument: -Djava.endorsed.dirs=C:\\tomcat\\apache-tomcat-8.5.11\\endorsed\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\r\nINFO: Command line argument: -Dfile.encoding=Cp1252\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\nINFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\\Program Files\\Java\\jdk1.8.0_91\\bin;C:\\WINDOWS\\Sun\\Java\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:/Program Files/Java/jre1.8.0_121/bin/server;C:/Program Files/Java/jre1.8.0_121/bin;C:/Program Files/Java/jre1.8.0_121/lib/amd64;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Python27\\;C:\\Python27\\Scripts;C:\\Program Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\GtkSharp\\2.12\\bin;C:\\Users\\dever\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\\;C:\\Program Files\\Microsoft SQL Server\\120\\Tools\\Binn\\;C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit\\;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\ManagementStudio\\;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\DTS\\Binn\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\WINDOWS\\system32\\config\\systemprofile\\.dnx\\bin;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Microsoft Emulator Manager\\1.0\\;C:\\Program Files\\Git\\cmd;C:\\Program Files\\nodejs\\;C:\\Program Files\\Emscripten\\emscripten\\1.35.0;C:\\Program Files\\Emscripten;C:\\Program Files\\Emscripten\\clang\\e1.35.0_64bit;C:\\Program Files\\Emscripten\\node\\0.12.2_64bit;C:\\Program Files\\Emscripten\\python\\2.7.5.3_64bit;C:\\Program Files\\Emscripten\\java\\7.45_64bit\\bin;C:\\Program Files\\Emscripten\\crunch\\1.03;C:\\Program Files\\Emscripten\\mingw\\4.6.2_32bit;C:\\Program Files\\TortoiseSVN\\bin;C:\\JavaProgramFiles\\jdk1.8.0_91\\bin;C:\\Ruby193\\bin;C:\\program files\\apache-maven-3.3.9\\bin;c:\\Program Files\\MongoDB\\Server\\3.2\\bin;C:\\JavaProgramFiles\\apache-ant-1.9.7\\bin;C:\\JavaProgramFiles\\xmlbeans-1.0.3\\bin;C:\\Users\\dever\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\dever\\AppData\\Roaming\\npm;C:\\Program Files\\eclipse\\jee-neon\\eclipse;;.\r\nFeb 18, 2017 9:53:41 AM org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\r\nFeb 18, 2017 9:53:41 AM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector\r\nINFO: Using a shared selector for servlet write/read\r\nFeb 18, 2017 9:53:41 AM org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;ajp-nio-8009&quot;]\r\nFeb 18, 2017 9:53:41 AM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector\r\nINFO: Using a shared selector for servlet write/read\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.startup.Catalina load\r\nINFO: Initialization processed in 610 ms\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.core.StandardService startInternal\r\nINFO: Starting service Catalina\r\nFeb 18, 2017 9:53:41 AM org.apache.catalina.core.StandardEngine startInternal\r\nINFO: Starting Servlet Engine: Apache Tomcat/8.5.11\r\nFeb 18, 2017 9:53:44 AM org.apache.jasper.servlet.TldScanner scanJars\r\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\nFeb 18, 2017 9:53:44 AM org.apache.catalina.core.ApplicationContext log\r\nINFO: No Spring WebApplicationInitializer types detected on classpath\r\nFeb 18, 2017 9:53:44 AM org.apache.catalina.core.ApplicationContext log\r\nINFO: Initializing Spring root WebApplicationContext\r\n2017-02-18 09:53:45.755 [localhost-startStop-1] INFO  com.stackoverflow.util.common.AppConfigPostProcessor - Setting system property: org.jboss.logging.provider=slf4j\r\n2017-02-18 09:53:45.757 [localhost-startStop-1] INFO  com.stackoverflow.util.common.AppConfigPostProcessor - Setting default timezone to: UTC\r\n2017-02-18 09:53:47.990 [localhost-startStop-1] INFO  com.stackoverflow.util.concurrent.ThreadPoolTaskScheduler - Initializing ExecutorService  &#39;taskScheduler&#39;\r\n2017-02-18 09:53:47.997 [localhost-startStop-1] INFO  com.stackoverflow.service.commproxy.LoggingServiceImpl - Logging Service: init successfully\r\n2017-02-18 09:53:48.011 [localhost-startStop-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: initializing Stackoverflow Device Service...\r\n2017-02-18 09:53:48.314 [localhost-startStop-1] INFO  com.stackoverflow.cache.mapdb.MapDBCacheManager - Opened StackoverflowCommProxyCacheV4 MapDB store. File location C:\\Users\\dever\\AppData\\Local\\Temp\\StackoverflowCommProxyCacheV4.DeviceMetaDataCache\r\n2017-02-18 09:53:48.314 [localhost-startStop-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: loading local DeviceMetaData cache\r\n2017-02-18 09:53:48.316 [taskScheduler-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: starting device pool refresh task\r\nFeb 18, 2017 5:53:48 PM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [http-nio-8080]\r\nFeb 18, 2017 5:53:48 PM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [ajp-nio-8009]\r\nFeb 18, 2017 5:53:48 PM org.apache.catalina.startup.Catalina start\r\nINFO: Server startup in 6928 ms\r\n2017-02-18 09:53:49.774 [taskScheduler-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: received list of device metadata with 15 items from Stackoverflow Cloud Services\r\n2017-02-18 09:53:49.775 [taskScheduler-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: device metadata cache contains 15 items\r\n2017-02-18 09:53:49.806 [taskScheduler-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: performed refresh cycle. Time spent: 1490 ms\r\nFeb 18, 2017 5:53:58 PM org.apache.catalina.core.StandardContext reload\r\nINFO: Reloading Context with name [/stackoverflow-commproxy] has started\r\n\r\nNotice how there is no error and none of the operations which took place would have touched the disk.  With a slight exception for logging.  Which does log to file however with our settings like this it really shouldnt be touching the web apps directory:\r\n\r\nlog4j2.xml\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration monitorInterval=&quot;180&quot;&gt;\r\n    \t&lt;Properties&gt;\r\n    \t\t&lt;!-- change the path to conference logs below to fit your system --&gt;\r\n    \t\t&lt;Property name=&quot;LOG_DIR&quot;&gt;C:\\CodeRepos\\logs\\&lt;/Property&gt;\r\n\r\n\r\nAnd the rest of the log file:\r\n\r\n&gt; \r\nFeb 18, 2017 5:53:58 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Closing Spring root WebApplicationContext\r\n2017-02-18 09:53:58.514 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: destroying Stackoverflow Device Service...\r\n2017-02-18 09:53:58.543 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.cache.mapdb.MapDBCacheManager - Closed StackoverflowCommProxyCacheV4.DeviceMetaDataCache MapDB store\r\n2017-02-18 09:53:58.545 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.util.concurrent.ThreadPoolTaskScheduler - Shutting down ExecutorService &#39;taskScheduler&#39;\r\nFeb 18, 2017 5:53:58 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nWARNING: The web application [Stackoverflow-commproxy] appears to have started a thread named [Log4j2-Log4j2Scheduled-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n sun.misc.Unsafe.park(Native Method)\r\n java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)\r\n java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)\r\n java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\r\n java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\r\n java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\r\n java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n java.lang.Thread.run(Thread.java:745)\r\nFeb 18, 2017 5:54:00 PM org.apache.jasper.servlet.TldScanner scanJars\r\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\nFeb 18, 2017 5:54:00 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: No Spring WebApplicationInitializer types detected on classpath\r\nFeb 18, 2017 5:54:00 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Initializing Spring root WebApplicationContext\r\n2017-02-18 17:54:01.637 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.util.common.AppConfigPostProcessor - Setting system property: org.jboss.logging.provider=slf4j\r\n2017-02-18 17:54:01.639 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.util.common.AppConfigPostProcessor - Setting default timezone to: UTC\r\n2017-02-18 17:54:03.732 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.util.concurrent.ThreadPoolTaskScheduler - Initializing ExecutorService  &#39;taskScheduler&#39;\r\n2017-02-18 17:54:03.739 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.service.commproxy.LoggingServiceImpl - Logging Service: init successfully\r\n2017-02-18 17:54:03.751 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: initializing Stackoverflow Device Service...\r\n2017-02-18 17:54:04.024 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.cache.mapdb.MapDBCacheManager - Opened StackoverflowCommProxyCacheV4 MapDB store. File location C:\\Users\\dever\\AppData\\Local\\Temp\\StackoverflowCommProxyCacheV4.DeviceMetaDataCache\r\n2017-02-18 17:54:04.024 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: loading local DeviceMetaData cache\r\n2017-02-18 17:54:04.025 [taskScheduler-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: starting device pool refresh task\r\nFeb 18, 2017 5:54:04 PM org.apache.catalina.core.StandardContext reload\r\nINFO: Reloading Context with name [/Stackoverflow-commproxy] is completed\r\n2017-02-18 17:54:04.987 [taskScheduler-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: received list of device metadata with 15 items from Stackoverflow Cloud Services\r\n2017-02-18 17:54:04.987 [taskScheduler-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: device metadata cache contains 15 items\r\n2017-02-18 17:54:05.020 [taskScheduler-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: performed refresh cycle. Time spent: 995\r\n\r\nWe can see an error regarding some thread that log4j started and couldnt stop but other than that there is no indication of what caused the context reload, and the error regarding log4j is only happening because of the reload.\r\n\r\nHow can I track down the cause of context reload.  We have several projects suffering for this issue some it seems something more global than a specific process or class.   \r\n\r\n**Haven&#39;t received any answers so I just wanted to reiterate the fact that Im really looking for my next step in troubleshooting this?  Some other log to look at or some way to find out what is triggering the context reload**","title":"Why is Tomcat 8.5 reloading context","body":"<p>It seems like since we upgraded tomcat to version 8+ we aways get a context reload on startup.  However it only seems to happen in our development environments (windows OS with eclipse and tomcat 8.5).  Our production environments (linux OS with tomcat 8.5) do not have this issue.  Ill post it below but I do not see any indication of why this is happenign from the tomcat logs.  I know this is normally behavior with something in the web apps directory is changed, but for the life of me i cannot figure out what is doing it.  There must be some way to track it down though.</p>\n\n<p>This first chunk of log is it fully starting</p>\n\n<blockquote>\n  <p>Feb 18, 2017 9:53:41 AM org.apache.tomcat.util.digester.SetPropertiesRule begin\n  WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Stackoverflow-commproxy' did not find a matching property.\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Server version:        Apache Tomcat/8.5.11\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Server built:          Jan 10 2017 21:02:52 UTC\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Server number:         8.5.11.0\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: OS Name:               Windows 10\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: OS Version:            10.0\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Architecture:          amd64\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Java Home:             C:\\Program Files\\Java\\jdk1.8.0_91\\jre\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: JVM Version:           1.8.0_91-b14\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: JVM Vendor:            Oracle Corporation\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: CATALINA_BASE:         C:\\CodeRepos\\work\\EclipseWorkspace.metadata.plugins\\org.eclipse.wst.server.core\\tmp0\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: CATALINA_HOME:         C:\\tomcat\\apache-tomcat-8.5.11\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Command line argument: -Dcatalina.base=C:\\CodeRepos\\work\\EclipseWorkspace.metadata.plugins\\org.eclipse.wst.server.core\\tmp0\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Command line argument: -Dcatalina.home=C:\\tomcat\\apache-tomcat-8.5.11\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Command line argument: -Dwtp.deploy=C:\\CodeRepos\\work\\EclipseWorkspace.metadata.plugins\\org.eclipse.wst.server.core\\tmp0\\wtpwebapps\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Command line argument: -Djava.endorsed.dirs=C:\\tomcat\\apache-tomcat-8.5.11\\endorsed\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.VersionLoggerListener log\n  INFO: Command line argument: -Dfile.encoding=Cp1252\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\n  INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\\Program Files\\Java\\jdk1.8.0_91\\bin;C:\\WINDOWS\\Sun\\Java\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:/Program Files/Java/jre1.8.0_121/bin/server;C:/Program Files/Java/jre1.8.0_121/bin;C:/Program Files/Java/jre1.8.0_121/lib/amd64;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Python27\\;C:\\Python27\\Scripts;C:\\Program Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\GtkSharp\\2.12\\bin;C:\\Users\\dever.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\\;C:\\Program Files\\Microsoft SQL Server\\120\\Tools\\Binn\\;C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit\\;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\ManagementStudio\\;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\DTS\\Binn\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files (x86)\\Windows Live\\Shared;C:\\WINDOWS\\system32\\config\\systemprofile.dnx\\bin;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Microsoft Emulator Manager\\1.0\\;C:\\Program Files\\Git\\cmd;C:\\Program Files\\nodejs\\;C:\\Program Files\\Emscripten\\emscripten\\1.35.0;C:\\Program Files\\Emscripten;C:\\Program Files\\Emscripten\\clang\\e1.35.0_64bit;C:\\Program Files\\Emscripten\\node\\0.12.2_64bit;C:\\Program Files\\Emscripten\\python\\2.7.5.3_64bit;C:\\Program Files\\Emscripten\\java\\7.45_64bit\\bin;C:\\Program Files\\Emscripten\\crunch\\1.03;C:\\Program Files\\Emscripten\\mingw\\4.6.2_32bit;C:\\Program Files\\TortoiseSVN\\bin;C:\\JavaProgramFiles\\jdk1.8.0_91\\bin;C:\\Ruby193\\bin;C:\\program files\\apache-maven-3.3.9\\bin;c:\\Program Files\\MongoDB\\Server\\3.2\\bin;C:\\JavaProgramFiles\\apache-ant-1.9.7\\bin;C:\\JavaProgramFiles\\xmlbeans-1.0.3\\bin;C:\\Users\\dever\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\dever\\AppData\\Roaming\\npm;C:\\Program Files\\eclipse\\jee-neon\\eclipse;;.\n  Feb 18, 2017 9:53:41 AM org.apache.coyote.AbstractProtocol init\n  INFO: Initializing ProtocolHandler [\"http-nio-8080\"]\n  Feb 18, 2017 9:53:41 AM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector\n  INFO: Using a shared selector for servlet write/read\n  Feb 18, 2017 9:53:41 AM org.apache.coyote.AbstractProtocol init\n  INFO: Initializing ProtocolHandler [\"ajp-nio-8009\"]\n  Feb 18, 2017 9:53:41 AM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector\n  INFO: Using a shared selector for servlet write/read\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.startup.Catalina load\n  INFO: Initialization processed in 610 ms\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.core.StandardService startInternal\n  INFO: Starting service Catalina\n  Feb 18, 2017 9:53:41 AM org.apache.catalina.core.StandardEngine startInternal\n  INFO: Starting Servlet Engine: Apache Tomcat/8.5.11\n  Feb 18, 2017 9:53:44 AM org.apache.jasper.servlet.TldScanner scanJars\n  INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n  Feb 18, 2017 9:53:44 AM org.apache.catalina.core.ApplicationContext log\n  INFO: No Spring WebApplicationInitializer types detected on classpath\n  Feb 18, 2017 9:53:44 AM org.apache.catalina.core.ApplicationContext log\n  INFO: Initializing Spring root WebApplicationContext\n  2017-02-18 09:53:45.755 [localhost-startStop-1] INFO  com.stackoverflow.util.common.AppConfigPostProcessor - Setting system property: org.jboss.logging.provider=slf4j\n  2017-02-18 09:53:45.757 [localhost-startStop-1] INFO  com.stackoverflow.util.common.AppConfigPostProcessor - Setting default timezone to: UTC\n  2017-02-18 09:53:47.990 [localhost-startStop-1] INFO  com.stackoverflow.util.concurrent.ThreadPoolTaskScheduler - Initializing ExecutorService  'taskScheduler'\n  2017-02-18 09:53:47.997 [localhost-startStop-1] INFO  com.stackoverflow.service.commproxy.LoggingServiceImpl - Logging Service: init successfully\n  2017-02-18 09:53:48.011 [localhost-startStop-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: initializing Stackoverflow Device Service...\n  2017-02-18 09:53:48.314 [localhost-startStop-1] INFO  com.stackoverflow.cache.mapdb.MapDBCacheManager - Opened StackoverflowCommProxyCacheV4 MapDB store. File location C:\\Users\\dever\\AppData\\Local\\Temp\\StackoverflowCommProxyCacheV4.DeviceMetaDataCache\n  2017-02-18 09:53:48.314 [localhost-startStop-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: loading local DeviceMetaData cache\n  2017-02-18 09:53:48.316 [taskScheduler-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: starting device pool refresh task\n  Feb 18, 2017 5:53:48 PM org.apache.coyote.AbstractProtocol start\n  INFO: Starting ProtocolHandler [http-nio-8080]\n  Feb 18, 2017 5:53:48 PM org.apache.coyote.AbstractProtocol start\n  INFO: Starting ProtocolHandler [ajp-nio-8009]\n  Feb 18, 2017 5:53:48 PM org.apache.catalina.startup.Catalina start\n  INFO: Server startup in 6928 ms\n  2017-02-18 09:53:49.774 [taskScheduler-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: received list of device metadata with 15 items from Stackoverflow Cloud Services\n  2017-02-18 09:53:49.775 [taskScheduler-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: device metadata cache contains 15 items\n  2017-02-18 09:53:49.806 [taskScheduler-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: performed refresh cycle. Time spent: 1490 ms\n  Feb 18, 2017 5:53:58 PM org.apache.catalina.core.StandardContext reload\n  INFO: Reloading Context with name [/stackoverflow-commproxy] has started</p>\n</blockquote>\n\n<p>Notice how there is no error and none of the operations which took place would have touched the disk.  With a slight exception for logging.  Which does log to file however with our settings like this it really shouldnt be touching the web apps directory:</p>\n\n<p>log4j2.xml</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration monitorInterval=\"180\"&gt;\n    &lt;Properties&gt;\n        &lt;!-- change the path to conference logs below to fit your system --&gt;\n        &lt;Property name=\"LOG_DIR\"&gt;C:\\CodeRepos\\logs\\&lt;/Property&gt;\n</code></pre>\n\n<p>And the rest of the log file:</p>\n\n<blockquote>\n  <p>Feb 18, 2017 5:53:58 PM org.apache.catalina.core.ApplicationContext log\n  INFO: Closing Spring root WebApplicationContext\n  2017-02-18 09:53:58.514 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: destroying Stackoverflow Device Service...\n  2017-02-18 09:53:58.543 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.cache.mapdb.MapDBCacheManager - Closed StackoverflowCommProxyCacheV4.DeviceMetaDataCache MapDB store\n  2017-02-18 09:53:58.545 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.util.concurrent.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'\n  Feb 18, 2017 5:53:58 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\n  WARNING: The web application [Stackoverflow-commproxy] appears to have started a thread named [Log4j2-Log4j2Scheduled-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n   sun.misc.Unsafe.park(Native Method)\n   java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)\n   java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)\n   java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\n   java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n  Feb 18, 2017 5:54:00 PM org.apache.jasper.servlet.TldScanner scanJars\n  INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n  Feb 18, 2017 5:54:00 PM org.apache.catalina.core.ApplicationContext log\n  INFO: No Spring WebApplicationInitializer types detected on classpath\n  Feb 18, 2017 5:54:00 PM org.apache.catalina.core.ApplicationContext log\n  INFO: Initializing Spring root WebApplicationContext\n  2017-02-18 17:54:01.637 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.util.common.AppConfigPostProcessor - Setting system property: org.jboss.logging.provider=slf4j\n  2017-02-18 17:54:01.639 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.util.common.AppConfigPostProcessor - Setting default timezone to: UTC\n  2017-02-18 17:54:03.732 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.util.concurrent.ThreadPoolTaskScheduler - Initializing ExecutorService  'taskScheduler'\n  2017-02-18 17:54:03.739 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.service.commproxy.LoggingServiceImpl - Logging Service: init successfully\n  2017-02-18 17:54:03.751 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: initializing Stackoverflow Device Service...\n  2017-02-18 17:54:04.024 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] INFO  com.stackoverflow.cache.mapdb.MapDBCacheManager - Opened StackoverflowCommProxyCacheV4 MapDB store. File location C:\\Users\\dever\\AppData\\Local\\Temp\\StackoverflowCommProxyCacheV4.DeviceMetaDataCache\n  2017-02-18 17:54:04.024 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: loading local DeviceMetaData cache\n  2017-02-18 17:54:04.025 [taskScheduler-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: starting device pool refresh task\n  Feb 18, 2017 5:54:04 PM org.apache.catalina.core.StandardContext reload\n  INFO: Reloading Context with name [/Stackoverflow-commproxy] is completed\n  2017-02-18 17:54:04.987 [taskScheduler-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: received list of device metadata with 15 items from Stackoverflow Cloud Services\n  2017-02-18 17:54:04.987 [taskScheduler-1] DEBUG com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: device metadata cache contains 15 items\n  2017-02-18 17:54:05.020 [taskScheduler-1] INFO  com.stackoverflow.service.commproxy.DeviceServiceImpl - Device Service: performed refresh cycle. Time spent: 995</p>\n</blockquote>\n\n<p>We can see an error regarding some thread that log4j started and couldnt stop but other than that there is no indication of what caused the context reload, and the error regarding log4j is only happening because of the reload.</p>\n\n<p>How can I track down the cause of context reload.  We have several projects suffering for this issue some it seems something more global than a specific process or class.   </p>\n\n<p><strong>Haven't received any answers so I just wanted to reiterate the fact that Im really looking for my next step in troubleshooting this?  Some other log to look at or some way to find out what is triggering the context reload</strong></p>\n"},{"tags":["java","elasticsearch","statistics","spring-data-elasticsearch"],"comments":[{"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"score":0,"creation_date":1671141437,"post_id":74799946,"comment_id":132041124,"body_markdown":"Does this answer your question? [Elasticsearch: Filter out irrelevant results based on score](https://stackoverflow.com/questions/43922588/elasticsearch-filter-out-irrelevant-results-based-on-score)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/43922588/elasticsearch-filter-out-irrelevant-results-based-on-score\">Elasticsearch: Filter out irrelevant results based on score</a>"}],"answers":[{"tags":[],"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671035563,"creation_date":1671035563,"answer_id":74801414,"question_id":74799946,"body_markdown":"From what I understand you want to have a minimum_score to reduce results. Did you read about the [min_score][1] parameter?\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/7.17/search-search.html#search-api-min-score","title":"Elasticsearch - Further filter out results based on match score using Java","body":"<p>From what I understand you want to have a minimum_score to reduce results. Did you read about the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/search-search.html#search-api-min-score\" rel=\"nofollow noreferrer\">min_score</a> parameter?</p>\n"}],"owner":{"account_id":26579158,"reputation":7,"user_id":20204076,"display_name":"Java2Avaj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671035563,"creation_date":1671028885,"question_id":74799946,"body_markdown":"We are currently limiting to 50 documents when we are searching in. But score for each document could be very different. eg score of 1st object = 5, score of 50th object = 0.0001. In this case we need to filter out objects with so low score.\r\n\r\n\r\nWhat kind of statistical distribution/formula should we use upon querying to the elasticsearch? I am thinking of standard deviation but not so sure?","title":"Elasticsearch - Further filter out results based on match score using Java","body":"<p>We are currently limiting to 50 documents when we are searching in. But score for each document could be very different. eg score of 1st object = 5, score of 50th object = 0.0001. In this case we need to filter out objects with so low score.</p>\n<p>What kind of statistical distribution/formula should we use upon querying to the elasticsearch? I am thinking of standard deviation but not so sure?</p>\n"},{"tags":["java","netbeans","netbeans-platform"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1671063728,"post_id":74789898,"comment_id":132019638,"body_markdown":"To be certain that you run the desired project, first select it in the _Projects_ panel (so that the background color for that node changes, to denote selection), then right click the mouse to open the context menu for that project, and then select the **Run** menu entry. If that doesn&#39;t resolve the issue you will need to update your question with more details, and evidence of the problem.","body":"To be certain that you run the desired project, first select it in the <i>Projects</i> panel (so that the background color for that node changes, to denote selection), then right click the mouse to open the context menu for that project, and then select the <b>Run</b> menu entry. If that doesn&#39;t resolve the issue you will need to update your question with more details, and evidence of the problem."},{"owner":{"account_id":27243845,"reputation":1,"user_id":20769518,"display_name":"Bahaa ALsulaiman"},"score":0,"creation_date":1671302324,"post_id":74789898,"comment_id":132072027,"body_markdown":"It resolved the issue but.However, when I click on run button in the upper panel it runs the previous one..So do I have to suspend the previous project?","body":"It resolved the issue but.However, when I click on run button in the upper panel it runs the previous one..So do I have to suspend the previous project?"}],"owner":{"account_id":27243845,"reputation":1,"user_id":20769518,"display_name":"Bahaa ALsulaiman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671035447,"creation_date":1670959038,"question_id":74789898,"body_markdown":"I&#39;ve got problem with my NetBeans app, once I click on the run button, it runs the previous program \r\nI coded. Like in the image, I ran the program (Which is  PasswordGUI) and it indescribably ran the previous code (Which was Ourproject)\r\n\r\n\r\n .. So, I&#39;m stuck in here and need help\r\n\r\n\r\nbest wishes\r\n\r\nI tried to search if my project in the app have kind of untidy which may this problem the untidiness\r\nof my projects..\r\n","title":"Error that runs mistakenly the previous codes when Actually want to run the current code in NetBeans","body":"<p>I've got problem with my NetBeans app, once I click on the run button, it runs the previous program\nI coded. Like in the image, I ran the program (Which is  PasswordGUI) and it indescribably ran the previous code (Which was Ourproject)</p>\n<p>.. So, I'm stuck in here and need help</p>\n<p>best wishes</p>\n<p>I tried to search if my project in the app have kind of untidy which may this problem the untidiness\nof my projects..</p>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":4509047,"reputation":3905,"user_id":3665698,"display_name":"mcoolive"},"score":2,"creation_date":1667240908,"post_id":74267631,"comment_id":131119099,"body_markdown":"Is the warning is displayed during compilation or during the run ? Can you share the command line to execute the program ?","body":"Is the warning is displayed during compilation or during the run ? Can you share the command line to execute the program ?"},{"owner":{"account_id":25219005,"reputation":51,"user_id":19055767,"display_name":"Samuel Wakoli"},"score":0,"creation_date":1667243481,"post_id":74267631,"comment_id":131119802,"body_markdown":"This file Write_your_first_program_in_Kotlin.kt executed well, but still with the same warning. And now this file Create_a_birthday_message_in_Kotlin.kt is not executing.","body":"This file Write_your_first_program_in_Kotlin.kt executed well, but still with the same warning. And now this file Create_a_birthday_message_in_Kotlin.kt is not executing."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1671035593,"post_id":74267631,"comment_id":132011983,"body_markdown":"Which version of kotlin are you using?","body":"Which version of kotlin are you using?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1671036479,"post_id":74267631,"comment_id":132012373,"body_markdown":"Based on the [Kotlin 1.5.x change log](https://github.com/JetBrains/kotlin/blob/master/docs/changelogs/ChangeLog-1.5.X.md), I&#39;d say he is using earlier than Kotlin 1.5.0.  This sound like issue https://youtrack.jetbrains.com/issue/KT-44232.  And the fix will be to upgrade Kotlin.","body":"Based on the <a href=\"https://github.com/JetBrains/kotlin/blob/master/docs/changelogs/ChangeLog-1.5.X.md\" rel=\"nofollow noreferrer\">Kotlin 1.5.x change log</a>, I&#39;d say he is using earlier than Kotlin 1.5.0.  This sound like issue <a href=\"https://youtrack.jetbrains.com/issue/KT-44232\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-44232</a>.  And the fix will be to upgrade Kotlin."}],"owner":{"account_id":25219005,"reputation":51,"user_id":19055767,"display_name":"Samuel Wakoli"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":236,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671035301,"creation_date":1667240572,"question_id":74267631,"body_markdown":"My Kotlin code is running well, though I&#39;m getting this warning:\r\n\r\n&gt;OpenJDK 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.\r\n\r\n\r\nHow can I fix this?\r\n\r\nI&#39;m using Ubuntu 22.10; VS Code with the following installed:\r\nKotlin Command line Kotlin compiler  \r\nopenjdk 18.0.2-ea 2022-07-19  \r\nOpenJDK Runtime Environment (build 18.0.2-ea+9-Ubuntu-2)  \r\nOpenJDK 64-Bit Server VM (build 18.0.2-ea+9-Ubuntu-2, mixed mode, sharing)\r\n\r\nI tried renaming the .kt files with underscores but nothing changed.\r\n\r\n[![First screenshot showing the issue][1]][1]\r\n\r\n[![Second screenshot][2]][2]\r\n\r\n[![Third screenshot][3]][3]\r\n\r\n[![The last screenshot][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pR8nZ.png\r\n  [2]: https://i.stack.imgur.com/cHrQD.png\r\n  [3]: https://i.stack.imgur.com/upvRB.png\r\n  [4]: https://i.stack.imgur.com/jDNVd.png","title":"Kotlin: OpenJDK 64-Bit Server VM warning","body":"<p>My Kotlin code is running well, though I'm getting this warning:</p>\n<blockquote>\n<p>OpenJDK 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.</p>\n</blockquote>\n<p>How can I fix this?</p>\n<p>I'm using Ubuntu 22.10; VS Code with the following installed:\nKotlin Command line Kotlin compiler<br />\nopenjdk 18.0.2-ea 2022-07-19<br />\nOpenJDK Runtime Environment (build 18.0.2-ea+9-Ubuntu-2)<br />\nOpenJDK 64-Bit Server VM (build 18.0.2-ea+9-Ubuntu-2, mixed mode, sharing)</p>\n<p>I tried renaming the .kt files with underscores but nothing changed.</p>\n<p><a href=\"https://i.stack.imgur.com/pR8nZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pR8nZ.png\" alt=\"First screenshot showing the issue\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/cHrQD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cHrQD.png\" alt=\"Second screenshot\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/upvRB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/upvRB.png\" alt=\"Third screenshot\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/jDNVd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jDNVd.png\" alt=\"The last screenshot\" /></a></p>\n"},{"tags":["java","amazon-web-services","amazon-s3","bucket"],"answers":[{"tags":[],"owner":{"account_id":13262876,"reputation":1370,"user_id":13494542,"display_name":"Abdul Moeez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1608328931,"creation_date":1608328931,"answer_id":65364482,"question_id":65363966,"body_markdown":"It seems likely that this bucket was created in a different region. Please send your request to your region endpoint. The default region is as follow&#39;s\r\n\r\n    US Standard is us-east-1\r\n\r\nThe upper link have region **&#39;Region.US_WEST_2&#39;**. First confirm your region then send your request accordingly.","title":"The bucket you are attempting to access must be addressed using the specified endpoint Uploading a file to AWS S3","body":"<p>It seems likely that this bucket was created in a different region. Please send your request to your region endpoint. The default region is as follow's</p>\n<pre><code>US Standard is us-east-1\n</code></pre>\n<p>The upper link have region <strong>'Region.US_WEST_2'</strong>. First confirm your region then send your request accordingly.</p>\n"},{"tags":[],"owner":{"account_id":21889,"reputation":30982,"user_id":53538,"accept_rate":88,"display_name":"Guss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671035255,"creation_date":1671035255,"answer_id":74801345,"question_id":65363966,"body_markdown":"What annoyed me is that if you create the S3 client once during initialization and re-use it (which is just the thing that makes sense), then you have to know ahead of time all the regions where you need to access buckets, and pre-init multiple S3 clients - there&#39;s no way that I can find (at least for the Java SDK) to &quot;just send one request using a different endpoint&quot;.\r\n\r\nBecause pre-initing all the clients for all the regions that are possible (and they keep adding more all the time) is just insane, I wrote up this wrapper (it is using the async clients and exposes a Vert.x promises API, but it should be easy to adapt to anything else):\r\n\r\n```java\r\n/**\r\n * S3 client factory that helps resolve region-specific clients\r\n * Licensed for any use under CC0\r\n */\r\npublic class S3AsyncClientFactory {\r\n\tprivate ConcurrentHashMap&lt;String, S3AsyncClient&gt; cache = \r\n\t\t\tnew ConcurrentHashMap&lt;&gt;();\r\n\tprivate S3AsyncClient global;\r\n\t\t\r\n\tprivate S3AsyncClientFactory() {\r\n\t// I call it &quot;global&quot; but it actually uses your &quot;default region&quot;.\r\n\t// There is a &quot;global&quot; region, but I couldn&#39;t be bothered to\r\n\t// figure out how to create such a client.\r\n\t\tglobal = S3AsyncClient.create();\r\n\t}\r\n\t\t\r\n\tpublic Future&lt;Region&gt; getBucketLocation(String bucket) {\r\n\t\treturn Future.fromCompletionStage(\r\n\t\t\t\tglobal.getBucketLocation(b -&gt; b.bucket(bucket)))\r\n\t\t\t\t.map(loc -&gt; loc.locationConstraintAsString())\r\n\t\t\t// annoyingly, get location returns an empty string for\r\n\t\t\t// the &quot;standard region&quot; and Region.of() can&#39;t handle that\r\n\t\t\t\t.map(loc -&gt; loc == null || loc.isEmpty() ?\r\n\t\t\t\t\t\tRegion.US_EAST_1 : Region.of(loc));\r\n\t}\r\n\t\t\r\n\tpublic Future&lt;S3AsyncClient&gt; forBucket(String bucket) {\r\n\t\treturn getBucketLocation(bucket).map(this::forRegion);\r\n\t}\r\n\t\r\n\tpublic S3AsyncClient global() {\r\n\t\treturn global;\r\n\t}\r\n\t\t\r\n\tpublic S3AsyncClient forRegion(Region region) {\r\n\t\treturn cache.computeIfAbsent(region.toString(),\r\n\t\t\t// you may want to replace this part if you have custom\r\n\t\t\t// init code or you need non-default credentials chain\r\n\t\t\t\tr -&gt; S3AsyncClient.builder().region(region).build());\r\n\t}\r\n\t\t\r\n\tpublic S3AsyncClient forRegion(String region) {\r\n\t\treturn forRegion(Region.of(region));\r\n\t}\r\n}\r\n```\r\n\r\nWith that piece of code you just create and cache per-region S3 clients, as needed:\r\n\r\n```java\r\nfactory.forBucket(bucket).compose(c -&gt; Future.fromCompletionStage(\r\n\t\tc.getObject(b -&gt; b.bucket(bucket).key(key), responseTransformer)))\r\n\t\t.map(res -&gt; ...\r\n```\r\n(please don&#39;t mind the ugly &quot;different libraries have difference concurrency implementations&quot; code &#129335;)\r\n\r\nYou may also want to have a bucket-keyed client implementation cache (I have it in another layer where it makes more sense for my use case).","title":"The bucket you are attempting to access must be addressed using the specified endpoint Uploading a file to AWS S3","body":"<p>What annoyed me is that if you create the S3 client once during initialization and re-use it (which is just the thing that makes sense), then you have to know ahead of time all the regions where you need to access buckets, and pre-init multiple S3 clients - there's no way that I can find (at least for the Java SDK) to &quot;just send one request using a different endpoint&quot;.</p>\n<p>Because pre-initing all the clients for all the regions that are possible (and they keep adding more all the time) is just insane, I wrote up this wrapper (it is using the async clients and exposes a Vert.x promises API, but it should be easy to adapt to anything else):</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * S3 client factory that helps resolve region-specific clients\n * Licensed for any use under CC0\n */\npublic class S3AsyncClientFactory {\n    private ConcurrentHashMap&lt;String, S3AsyncClient&gt; cache = \n            new ConcurrentHashMap&lt;&gt;();\n    private S3AsyncClient global;\n        \n    private S3AsyncClientFactory() {\n    // I call it &quot;global&quot; but it actually uses your &quot;default region&quot;.\n    // There is a &quot;global&quot; region, but I couldn't be bothered to\n    // figure out how to create such a client.\n        global = S3AsyncClient.create();\n    }\n        \n    public Future&lt;Region&gt; getBucketLocation(String bucket) {\n        return Future.fromCompletionStage(\n                global.getBucketLocation(b -&gt; b.bucket(bucket)))\n                .map(loc -&gt; loc.locationConstraintAsString())\n            // annoyingly, get location returns an empty string for\n            // the &quot;standard region&quot; and Region.of() can't handle that\n                .map(loc -&gt; loc == null || loc.isEmpty() ?\n                        Region.US_EAST_1 : Region.of(loc));\n    }\n        \n    public Future&lt;S3AsyncClient&gt; forBucket(String bucket) {\n        return getBucketLocation(bucket).map(this::forRegion);\n    }\n    \n    public S3AsyncClient global() {\n        return global;\n    }\n        \n    public S3AsyncClient forRegion(Region region) {\n        return cache.computeIfAbsent(region.toString(),\n            // you may want to replace this part if you have custom\n            // init code or you need non-default credentials chain\n                r -&gt; S3AsyncClient.builder().region(region).build());\n    }\n        \n    public S3AsyncClient forRegion(String region) {\n        return forRegion(Region.of(region));\n    }\n}\n</code></pre>\n<p>With that piece of code you just create and cache per-region S3 clients, as needed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>factory.forBucket(bucket).compose(c -&gt; Future.fromCompletionStage(\n        c.getObject(b -&gt; b.bucket(bucket).key(key), responseTransformer)))\n        .map(res -&gt; ...\n</code></pre>\n<p>(please don't mind the ugly &quot;different libraries have difference concurrency implementations&quot; code 🤷)</p>\n<p>You may also want to have a bucket-keyed client implementation cache (I have it in another layer where it makes more sense for my use case).</p>\n"}],"owner":{"account_id":5619788,"reputation":4111,"user_id":4450024,"accept_rate":99,"display_name":"Nu&#241;ito Calzada"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":432,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65364482,"answer_count":2,"score":1,"last_activity_date":1671035255,"creation_date":1608325860,"question_id":65363966,"body_markdown":"I am trying to upload a file to S3 using this example:\r\n\r\nhttps://github.com/awsdocs/aws-doc-sdk-examples/blob/master/javav2/example_code/s3/src/main/java/com/example/s3/PutObject.java\r\n\r\nBut I have this error:\r\n\r\n    The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint. (Service: S3, Status Code: 301, Request ID: 15F45F10B11A3267, Extended Request ID: 9TdN5/GMl9h6VGPq6ee4MttjlLFm+V5GjIaXIJLAO1YasdZCls0M4udxJso8n1P+qMr4iigP5g=)\r\n\r\n","title":"The bucket you are attempting to access must be addressed using the specified endpoint Uploading a file to AWS S3","body":"<p>I am trying to upload a file to S3 using this example:</p>\n<p><a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/blob/master/javav2/example_code/s3/src/main/java/com/example/s3/PutObject.java\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-doc-sdk-examples/blob/master/javav2/example_code/s3/src/main/java/com/example/s3/PutObject.java</a></p>\n<p>But I have this error:</p>\n<pre><code>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint. (Service: S3, Status Code: 301, Request ID: 15F45F10B11A3267, Extended Request ID: 9TdN5/GMl9h6VGPq6ee4MttjlLFm+V5GjIaXIJLAO1YasdZCls0M4udxJso8n1P+qMr4iigP5g=)\n</code></pre>\n"},{"tags":["java","apache-camel"],"comments":[{"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1671033258,"post_id":74797416,"comment_id":132011024,"body_markdown":"But I don&#39;t want to use the body multiple times; I want to use the body content before marshall() step in a later step.","body":"But I don&#39;t want to use the body multiple times; I want to use the body content before marshall() step in a later step."},{"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1671033298,"post_id":74797416,"comment_id":132011041,"body_markdown":"At last I use a bean to put all the `choice()` logic. See https://stackoverflow.com/questions/74549659/which-eip-to-use-retrieve-config-by-message-content-mapping-filtering-and-oau/74595769#74595769","body":"At last I use a bean to put all the <code>choice()</code> logic. See <a href=\"https://stackoverflow.com/questions/74549659/which-eip-to-use-retrieve-config-by-message-content-mapping-filtering-and-oau/74595769#74595769\" title=\"which eip to use retrieve config by message content mapping filtering and oau\">stackoverflow.com/questions/74549659/&hellip;</a>"},{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1671033945,"post_id":74797416,"comment_id":132011338,"body_markdown":"sorry, wrong copy/paste. The streaming solution was for another post :-( I therefore delete my comment","body":"sorry, wrong copy/paste. The streaming solution was for another post :-( I therefore delete my comment"}],"answers":[{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671035183,"creation_date":1671035183,"answer_id":74801332,"question_id":74797416,"body_markdown":"An alternative would be to replace the (Camel) choice logic by a custom (Java) processor.\r\n\r\n    from(&quot;direct:demo&quot;)\r\n    \t.process( e -&gt; setDynamicUri(e) );\r\n    \t.toD(&quot;${headers.nextUri}&quot;);\r\n    \r\n    \r\n    private void setDynamicUri(Exchange e) {\r\n    \tString httpMethod = e.getMessage().getHeader(&quot;...&quot;, String.class);\r\n    \tString endpointUrl = ( Arrays.asList(&quot;PUT&quot;, &quot;DELETE&quot;).contains(httpMethod) ? &quot;url1&quot; : &quot;url2&quot; );\r\n    \te.getMessage().setHeader(&quot;nextUri&quot;, endpointUrl);\r\n    }","title":"Apache Camel: how to conditionally set header and set body with toD() without marshal too early?","body":"<p>An alternative would be to replace the (Camel) choice logic by a custom (Java) processor.</p>\n<pre><code>from(&quot;direct:demo&quot;)\n    .process( e -&gt; setDynamicUri(e) );\n    .toD(&quot;${headers.nextUri}&quot;);\n\n\nprivate void setDynamicUri(Exchange e) {\n    String httpMethod = e.getMessage().getHeader(&quot;...&quot;, String.class);\n    String endpointUrl = ( Arrays.asList(&quot;PUT&quot;, &quot;DELETE&quot;).contains(httpMethod) ? &quot;url1&quot; : &quot;url2&quot; );\n    e.getMessage().setHeader(&quot;nextUri&quot;, endpointUrl);\n}\n</code></pre>\n"}],"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":884,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74801332,"answer_count":1,"score":0,"last_activity_date":1671035183,"creation_date":1671016527,"question_id":74797416,"body_markdown":"I just realized that `choice()` in Apache Camel is for dynamic routing, so every `choice()` needs a `to()`. It is not equivalent to `if` in Java.\r\n\r\nBut, does that mean that I cannot conditionally set header to my camel exchange?\r\n\r\nI want to do something like this:\r\n\r\n\r\n```java\r\nfrom(&quot;direct:eventHttpChoice&quot;) // last step returns a composite POJO with config details and the actual message and token, let&#39;s call it MyCompositePojo\r\n    .log(....) // I see this message in log\r\n    .setHeader(&quot;Authorization&quot;, simple(&quot;Bearer ${body.token}&quot;))\r\n    .setHeader(Exchange.HTTP_METHOD, simple(&quot;${body.httpMethod.name}&quot;))\r\n    .choice()\r\n        .when(simple(&quot;${body.httpMethod.name} in &#39;PUT,DELETE&#39;&quot;))\r\n            .setHeader(Exchange.HTTP_PATH, simple(&quot;${body.newEvent.number}&quot;))\r\n        .endChoice()\r\n    .end()\r\n    .choice()\r\n        .when(simple(&quot;${body.httpMethod.name} in &#39;POST,PUT&#39;&quot;))\r\n            .setHeader(HttpHeaders.CONTENT_TYPE, constant(MediaType.APPLICATION_JSON))\r\n            .setBody(simple(&quot;${body.newEvent}&quot;)).marshal().json(JsonLibrary.Jsonb) // marshall here as toD() needs InputStream; and I believe here it converts my message to MyMessagePojo, the actual payload to send\r\n        .endChoice()\r\n        .otherwise() // DELETE\r\n            .when(simple(&quot;${body.configDetail.http.deleteSomeField} == &#39;true&#39; &amp;&amp; ${body.newEvent.someField} != null &amp;&amp; ${body.newEvent.someField} != &#39;&#39;&quot;))\r\n                .setHeader(Exchange.HTTP_QUERY, simple(&quot;someField=${body.newEvent.someField}&amp;operationId=${body.newEvent.operationId}&quot;))\r\n            .endChoice()\r\n            .otherwise()\r\n                .setHeader(Exchange.HTTP_QUERY, simple(&quot;operationId=${body.newEvent.operationId}&quot;))\r\n            .endChoice()\r\n        .endChoice()\r\n    .end()\r\n    .log(LoggingLevel.INFO, &quot;Sending to this url: ${body.configDetail.url}&quot;) // I don&#39;t see this log\r\n    .toD(&quot;${body.configDetail.url}&quot;, 10) // only cache at most 10 urls; I still need MyCompositePojo here\r\n```\r\n\r\nBut I receive error:\r\n\r\n&gt; 2022-12-14 10:44:49,213 ERROR [org.apa.cam.pro.err.DefaultErrorHandler] (Camel (camel-1) thread #6 - JmsConsumer[my.queue]) Failed delivery for (MessageId: A9371D97F55900C-0000000000000001 on ExchangeId: A9371D97F55900C-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.language.bean.RuntimeBeanExpressionException: Failed to invoke method: configDetail on null due to: org.apache.camel.component.bean.MethodNotFoundException: Method with name: configDetail not found on bean: [B@330cd22d of type: [B on the exchange: Exchange[A9371D97F55900C-0000000000000001]\r\n\r\nMyCompositePojo has this field. But I don&#39;t know where I get it wrong. \r\n\r\nIf you think I am doing `marshall()` too early, but if not like this, how can I set body? Because without `.marshal()` I see this error:\r\n\r\n&gt; 2022-12-14 12:25:41,772 ERROR [org.apa.cam.pro.err.DefaultErrorHandler] (Camel (camel-1) thread #7 - JmsConsumer[page.large.sm.provisioning.events.online]) Failed delivery for (MessageId: 65FF01C9FC61E66-0000000000000011 on ExchangeId: 65FF01C9FC61E66-0000000000000011). Exhausted after delivery attempt: 1 caught: org.apache.camel.language.bean.RuntimeBeanExpressionException: Failed to invoke method: configDetail on null due to: org.apache.camel.component.bean.MethodNotFoundException: Method with name: configDetail not found on bean: MyPojo{xxx=xxx, ...} of type: com.example.MyPojo on the exchange: Exchange[65FF01C9FC61E66-0000000000000011]\r\n\r\nSo, it means without `.marshal()`, it is changing the body to my MessagePojo; but I don&#39;t want it, I just need body to be part of my original body, and when it&#39;s HTTP DELETE, I don&#39;t want to set body. And, later in the route, I still need my composite pojo. I mean, I want to set the HTTP body and only conditionally, I don&#39;t want to change the exchange body. \r\n\r\nSo, how to conditionally set header and send to dynamic URL and set body?\r\n\r\n\r\n\r\n\r\n\r\n","title":"Apache Camel: how to conditionally set header and set body with toD() without marshal too early?","body":"<p>I just realized that <code>choice()</code> in Apache Camel is for dynamic routing, so every <code>choice()</code> needs a <code>to()</code>. It is not equivalent to <code>if</code> in Java.</p>\n<p>But, does that mean that I cannot conditionally set header to my camel exchange?</p>\n<p>I want to do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>from(&quot;direct:eventHttpChoice&quot;) // last step returns a composite POJO with config details and the actual message and token, let's call it MyCompositePojo\n    .log(....) // I see this message in log\n    .setHeader(&quot;Authorization&quot;, simple(&quot;Bearer ${body.token}&quot;))\n    .setHeader(Exchange.HTTP_METHOD, simple(&quot;${body.httpMethod.name}&quot;))\n    .choice()\n        .when(simple(&quot;${body.httpMethod.name} in 'PUT,DELETE'&quot;))\n            .setHeader(Exchange.HTTP_PATH, simple(&quot;${body.newEvent.number}&quot;))\n        .endChoice()\n    .end()\n    .choice()\n        .when(simple(&quot;${body.httpMethod.name} in 'POST,PUT'&quot;))\n            .setHeader(HttpHeaders.CONTENT_TYPE, constant(MediaType.APPLICATION_JSON))\n            .setBody(simple(&quot;${body.newEvent}&quot;)).marshal().json(JsonLibrary.Jsonb) // marshall here as toD() needs InputStream; and I believe here it converts my message to MyMessagePojo, the actual payload to send\n        .endChoice()\n        .otherwise() // DELETE\n            .when(simple(&quot;${body.configDetail.http.deleteSomeField} == 'true' &amp;&amp; ${body.newEvent.someField} != null &amp;&amp; ${body.newEvent.someField} != ''&quot;))\n                .setHeader(Exchange.HTTP_QUERY, simple(&quot;someField=${body.newEvent.someField}&amp;operationId=${body.newEvent.operationId}&quot;))\n            .endChoice()\n            .otherwise()\n                .setHeader(Exchange.HTTP_QUERY, simple(&quot;operationId=${body.newEvent.operationId}&quot;))\n            .endChoice()\n        .endChoice()\n    .end()\n    .log(LoggingLevel.INFO, &quot;Sending to this url: ${body.configDetail.url}&quot;) // I don't see this log\n    .toD(&quot;${body.configDetail.url}&quot;, 10) // only cache at most 10 urls; I still need MyCompositePojo here\n</code></pre>\n<p>But I receive error:</p>\n<blockquote>\n<p>2022-12-14 10:44:49,213 ERROR [org.apa.cam.pro.err.DefaultErrorHandler] (Camel (camel-1) thread #6 - JmsConsumer[my.queue]) Failed delivery for (MessageId: A9371D97F55900C-0000000000000001 on ExchangeId: A9371D97F55900C-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.language.bean.RuntimeBeanExpressionException: Failed to invoke method: configDetail on null due to: org.apache.camel.component.bean.MethodNotFoundException: Method with name: configDetail not found on bean: [B@330cd22d of type: [B on the exchange: Exchange[A9371D97F55900C-0000000000000001]</p>\n</blockquote>\n<p>MyCompositePojo has this field. But I don't know where I get it wrong.</p>\n<p>If you think I am doing <code>marshall()</code> too early, but if not like this, how can I set body? Because without <code>.marshal()</code> I see this error:</p>\n<blockquote>\n<p>2022-12-14 12:25:41,772 ERROR [org.apa.cam.pro.err.DefaultErrorHandler] (Camel (camel-1) thread #7 - JmsConsumer[page.large.sm.provisioning.events.online]) Failed delivery for (MessageId: 65FF01C9FC61E66-0000000000000011 on ExchangeId: 65FF01C9FC61E66-0000000000000011). Exhausted after delivery attempt: 1 caught: org.apache.camel.language.bean.RuntimeBeanExpressionException: Failed to invoke method: configDetail on null due to: org.apache.camel.component.bean.MethodNotFoundException: Method with name: configDetail not found on bean: MyPojo{xxx=xxx, ...} of type: com.example.MyPojo on the exchange: Exchange[65FF01C9FC61E66-0000000000000011]</p>\n</blockquote>\n<p>So, it means without <code>.marshal()</code>, it is changing the body to my MessagePojo; but I don't want it, I just need body to be part of my original body, and when it's HTTP DELETE, I don't want to set body. And, later in the route, I still need my composite pojo. I mean, I want to set the HTTP body and only conditionally, I don't want to change the exchange body.</p>\n<p>So, how to conditionally set header and send to dynamic URL and set body?</p>\n"},{"tags":["java","eclipse","tomcat","tomcat9"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1671035779,"post_id":74796488,"comment_id":132012053,"body_markdown":"Is tomcat-native in homebrew actually compiled for aarch64? Is the version of Java you&#39;re using to run tomcat-native also aarch64? They&#39;d need to match.","body":"Is tomcat-native in homebrew actually compiled for aarch64? Is the version of Java you&#39;re using to run tomcat-native also aarch64? They&#39;d need to match."},{"owner":{"account_id":27249462,"reputation":1,"user_id":20774176,"display_name":"Florian"},"score":0,"creation_date":1671090953,"post_id":74796488,"comment_id":132023937,"body_markdown":"=) Tomcat-native ist compiled in aarch64. But I installed the wrong coretto. After I installed the version aarch64 the tomcat native is working perfect. so thank you for your support!","body":"=) Tomcat-native ist compiled in aarch64. But I installed the wrong coretto. After I installed the version aarch64 the tomcat native is working perfect. so thank you for your support!"}],"owner":{"account_id":27249462,"reputation":1,"user_id":20774176,"display_name":"Florian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671035130,"creation_date":1671012173,"question_id":74796488,"body_markdown":"This is my first posting here. I am using a new Apple M1 Pro and I installed Eclipse, java 11 from amazon, tomcat 9 and tomcat-native via homebrew. \r\n\r\nMy configuration of tomcat works fine, but I want to add tomcat-native to use SSL. \r\n\r\nI installed tomcat-native via homebrew to this directory:\r\n`/opt/homebrew/opt/tomcat-native/lib/` which links to `/opt/homebrew/Cellar/tomcat-native/2.0.2/lib`\r\n\r\nThen I added in the eclipse configuration the JVM-Parameter:  \r\n`-Djava.library.path=/opt/homebrew/opt/tomcat-native/lib/`\r\n\r\nWhen I start the tomcat service via eclipse tomcat plugin (version 9.1.4) I get the following exception:\r\n&gt;WARNING: The Apache Tomcat Native library failed to load. The error reported was [no tcnative-2 in java.library.path: [/opt/homebrew/opt/tomcat-native/lib/]]\r\njava.lang.UnsatisfiedLinkError: no tcnative-2 in java.library.path: [/opt/homebrew/opt/tomcat-native/lib/]\r\n\r\nI used this configuration on my &quot;older&quot; macbook and it works. Has someone an idea, so that we can solve my problem? \r\n\r\nregards  \r\nFlorian\r\n\r\nNotes:  \r\nI tried to reinstall all components, update the components, change to another newest eclipse version, search for the failure, but didn&#39;t found any solution, especially on Mac M1 Pro.","title":"Using tomcat-native (homebrew) with eclipse (Java 11) on Apple M1 Pro","body":"<p>This is my first posting here. I am using a new Apple M1 Pro and I installed Eclipse, java 11 from amazon, tomcat 9 and tomcat-native via homebrew.</p>\n<p>My configuration of tomcat works fine, but I want to add tomcat-native to use SSL.</p>\n<p>I installed tomcat-native via homebrew to this directory:\n<code>/opt/homebrew/opt/tomcat-native/lib/</code> which links to <code>/opt/homebrew/Cellar/tomcat-native/2.0.2/lib</code></p>\n<p>Then I added in the eclipse configuration the JVM-Parameter:<br />\n<code>-Djava.library.path=/opt/homebrew/opt/tomcat-native/lib/</code></p>\n<p>When I start the tomcat service via eclipse tomcat plugin (version 9.1.4) I get the following exception:</p>\n<blockquote>\n<p>WARNING: The Apache Tomcat Native library failed to load. The error reported was [no tcnative-2 in java.library.path: [/opt/homebrew/opt/tomcat-native/lib/]]\njava.lang.UnsatisfiedLinkError: no tcnative-2 in java.library.path: [/opt/homebrew/opt/tomcat-native/lib/]</p>\n</blockquote>\n<p>I used this configuration on my &quot;older&quot; macbook and it works. Has someone an idea, so that we can solve my problem?</p>\n<p>regards<br />\nFlorian</p>\n<p>Notes:<br />\nI tried to reinstall all components, update the components, change to another newest eclipse version, search for the failure, but didn't found any solution, especially on Mac M1 Pro.</p>\n"},{"tags":["java","android"],"owner":{"account_id":20152820,"reputation":1,"user_id":14779745,"display_name":"sachin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671034738,"creation_date":1671034738,"question_id":74801238,"body_markdown":"In Android 13 unable to open chrome browser using html text[enter image description here](https://i.stack.imgur.com/Elv8C.jpg)\r\n\r\n\r\nI am trying to open chrome browser in Android 13 using html text on UriParse but not working show the error unable to find explicitly activity class {Android package name}\r\n[Code screen shot](https://i.stack.imgur.com/oBqEb.jpg)\r\n","title":"Chrome issue in Android 13","body":"<p>In Android 13 unable to open chrome browser using html text<a href=\"https://i.stack.imgur.com/Elv8C.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I am trying to open chrome browser in Android 13 using html text on UriParse but not working show the error unable to find explicitly activity class {Android package name}\n<a href=\"https://i.stack.imgur.com/oBqEb.jpg\" rel=\"nofollow noreferrer\">Code screen shot</a></p>\n"},{"tags":["java","spring-boot","jackson","secret-key"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1671041125,"post_id":74800896,"comment_id":132013920,"body_markdown":"Which implementation of the `SecretKey` interface you&#39;re using in your application?","body":"Which implementation of the <code>SecretKey</code> interface you&#39;re using in your application?"}],"answers":[{"tags":[],"owner":{"account_id":7369804,"reputation":1147,"user_id":5610358,"display_name":"rhowell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671034609,"creation_date":1671034130,"answer_id":74801102,"question_id":74800896,"body_markdown":"`javax.crypto.SecretKey` is an interface and the compiler is telling you to use an implementation of that interface. \r\n\r\nYou can see what implementations you can use here - https://docs.oracle.com/javase/8/docs/api/javax/crypto/SecretKey.html \r\n\r\n(you probably want an instance of `SecretKeySpec`)","title":"How to serialize Secret key in Java","body":"<p><code>javax.crypto.SecretKey</code> is an interface and the compiler is telling you to use an implementation of that interface.</p>\n<p>You can see what implementations you can use here - <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/crypto/SecretKey.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/javax/crypto/SecretKey.html</a></p>\n<p>(you probably want an instance of <code>SecretKeySpec</code>)</p>\n"}],"owner":{"account_id":26726814,"reputation":29,"user_id":20329827,"display_name":"Sinnedkid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":318,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671034609,"creation_date":1671033205,"question_id":74800896,"body_markdown":"I am working on a keystore implementation for an API with Spring Boot\r\n\r\nThis is my endpoint in the controller:\r\n```\r\n\r\n    @PostMapping(path = {&quot;/sec-crypto/store/key&quot;}, consumes = TYPE_JSON, produces = TYPE_JSON)\r\n    public void storeSecretKey(@RequestBody final KeystoreSecretKeyWrapper keystoreSecretKeyWrapper) throws CertificateException, IOException, NoSuchAlgorithmException, KeyStoreException, NoSuchProviderException{...}\r\n```\r\n\r\nThe wrapper class contains a SecretKeyDTO object which looks like this \r\n\r\n```\r\n\r\n\r\nimport javax.crypto.SecretKey;\r\n\r\npublic class SecretKeyDTO {\r\n    private String cryptoProvider;\r\n    private String secretKeyAlias;\r\n    private SecretKey secretKey;\r\n    private char[] keyPassword;\r\n\r\n    public SecretKeyDTO() {\r\n\r\n    }\r\n\r\n    // Getter &amp; Setter\r\n}\r\n```\r\n\r\nand a object ob KeyStoreRequest which looks like this \r\n```\r\n\r\n\r\nimport java.io.InputStream;\r\n\r\npublic class KeyStoreRequest {\r\n\r\n    public static String cryptoProvider;\r\n    public static String keyStoreType;\r\n\r\n    public static char[] keyStorePassword;\r\n    public static String keyStoreName;\r\n\r\n    public KeyStoreRequest() {\r\n    }\r\n\r\n    //Getter &amp; Setter\r\n\r\n}\r\n```\r\n\r\nNow if i call the API with following JSON request body \r\n\r\n```\r\n    {\r\n    \t&quot;keyStoreRequest&quot;: {\r\n    \t\t&quot;cryptoProvider&quot; : &quot;BC&quot;,\r\n    \t\t&quot;keyStoreType&quot; : &quot;PKCS12&quot;,\r\n    \t\t&quot;keyStorePassword&quot; : &quot;topsecret&quot;,\r\n    \t\t&quot;keyStoreName&quot; : &quot;keystore&quot;\r\n    \t},\r\n    \t&quot;secretKeyDTO&quot; : {\r\n    \t\t&quot;cryptoProvider&quot; : &quot;BC&quot;,\r\n    \t\t&quot;secretKeyAlias&quot; : &quot;myKey&quot;,\r\n    \t\t&quot;secretKey&quot; :&quot;Zoxc7wp6iEOPdK3sgBpLn71j59Sacm+7I2uRcMuRGjtDid63IiNh7zZ/HzbRk/1lOy9uwvrYVIAxJkmNTAbw/qPRC2ZeXWy1Fw0yu/CAQn4exLTZmMV784QWLej1az4r05WeoPs55hEddCOQm+3KBKLhA/fCdVf+7HYEa5TKksAM0/6KlPZZGALOdcf6Qn6ZJM+TL8HQ71d+jyb0l7Ye92S+UnNwP3H4UW6T2QtD8rix+c019me0q3/EdtFdV2vnGhyM+L8gvkck6Cn9Yeg4mMSib8RYYCx0nRPCqx7C4cbU2QuYKT9oTHlZl/IH3osFf2oM+sRqu4aRqby2PrHm7w==&quot;,\r\n    \t\t&quot;keyPassword&quot;:&quot;topsecret&quot;\r\n    \t}\r\n    }```\r\n    \r\nI get a *InvalidDefinitionException*. Cannot construct instance of javax.crypto.SecretKey (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information. \r\n    \r\nI saw some related questions where they put @JsonTypeInfo and @JsonSubTypes for solving the issue, but i do not know if they are necessary here too and if yes, where to put them.\r\n    \r\nI also tried providing the complete information from key generation into the request with algorithm information, format etc. but it still did not work.\r\n\r\nMust have to do something with the serialization of the Secretkey but i can not help how to serialize it correctly. \r\n\r\nPlease help if possible.\r\n\r\n","title":"How to serialize Secret key in Java","body":"<p>I am working on a keystore implementation for an API with Spring Boot</p>\n<p>This is my endpoint in the controller:</p>\n<pre><code>\n    @PostMapping(path = {&quot;/sec-crypto/store/key&quot;}, consumes = TYPE_JSON, produces = TYPE_JSON)\n    public void storeSecretKey(@RequestBody final KeystoreSecretKeyWrapper keystoreSecretKeyWrapper) throws CertificateException, IOException, NoSuchAlgorithmException, KeyStoreException, NoSuchProviderException{...}\n</code></pre>\n<p>The wrapper class contains a SecretKeyDTO object which looks like this</p>\n<pre><code>\n\nimport javax.crypto.SecretKey;\n\npublic class SecretKeyDTO {\n    private String cryptoProvider;\n    private String secretKeyAlias;\n    private SecretKey secretKey;\n    private char[] keyPassword;\n\n    public SecretKeyDTO() {\n\n    }\n\n    // Getter &amp; Setter\n}\n</code></pre>\n<p>and a object ob KeyStoreRequest which looks like this</p>\n<pre><code>\n\nimport java.io.InputStream;\n\npublic class KeyStoreRequest {\n\n    public static String cryptoProvider;\n    public static String keyStoreType;\n\n    public static char[] keyStorePassword;\n    public static String keyStoreName;\n\n    public KeyStoreRequest() {\n    }\n\n    //Getter &amp; Setter\n\n}\n</code></pre>\n<p>Now if i call the API with following JSON request body</p>\n<pre><code>    {\n        &quot;keyStoreRequest&quot;: {\n            &quot;cryptoProvider&quot; : &quot;BC&quot;,\n            &quot;keyStoreType&quot; : &quot;PKCS12&quot;,\n            &quot;keyStorePassword&quot; : &quot;topsecret&quot;,\n            &quot;keyStoreName&quot; : &quot;keystore&quot;\n        },\n        &quot;secretKeyDTO&quot; : {\n            &quot;cryptoProvider&quot; : &quot;BC&quot;,\n            &quot;secretKeyAlias&quot; : &quot;myKey&quot;,\n            &quot;secretKey&quot; :&quot;Zoxc7wp6iEOPdK3sgBpLn71j59Sacm+7I2uRcMuRGjtDid63IiNh7zZ/HzbRk/1lOy9uwvrYVIAxJkmNTAbw/qPRC2ZeXWy1Fw0yu/CAQn4exLTZmMV784QWLej1az4r05WeoPs55hEddCOQm+3KBKLhA/fCdVf+7HYEa5TKksAM0/6KlPZZGALOdcf6Qn6ZJM+TL8HQ71d+jyb0l7Ye92S+UnNwP3H4UW6T2QtD8rix+c019me0q3/EdtFdV2vnGhyM+L8gvkck6Cn9Yeg4mMSib8RYYCx0nRPCqx7C4cbU2QuYKT9oTHlZl/IH3osFf2oM+sRqu4aRqby2PrHm7w==&quot;,\n            &quot;keyPassword&quot;:&quot;topsecret&quot;\n        }\n    }```\n    \nI get a *InvalidDefinitionException*. Cannot construct instance of javax.crypto.SecretKey (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information. \n    \nI saw some related questions where they put @JsonTypeInfo and @JsonSubTypes for solving the issue, but i do not know if they are necessary here too and if yes, where to put them.\n    \nI also tried providing the complete information from key generation into the request with algorithm information, format etc. but it still did not work.\n\nMust have to do something with the serialization of the Secretkey but i can not help how to serialize it correctly. \n\nPlease help if possible.\n\n</code></pre>\n"},{"tags":["java","spring","urlencode","query-string"],"answers":[{"tags":[],"owner":{"account_id":1397403,"reputation":12323,"user_id":1326913,"accept_rate":89,"display_name":"ᴇʟᴇvᴀтᴇ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649095194,"creation_date":1649094792,"answer_id":71741682,"question_id":71741344,"body_markdown":"Everything after the hash is called the &quot;fragment&quot;.\r\nThe URI syntax (defined in [RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986#section-3)) puts the query parameters before the fragment.\r\n\r\n    URI = scheme &quot;:&quot; hier-part [ &quot;?&quot; query ] [ &quot;#&quot; fragment ]\r\n\r\nSo the `UriComponentsBuilder` is doing the correct thing according to the spec.\r\n\r\nIt looks like your system has its own method of using the fragment to provide *pseudo* query parameters within the fragment. Unfortunately, if you want to do this, you are going to have to manage (and encode) such &quot;parameters&quot; yourself and then set the fragment appropriately.\r\n\r\n    UriComponentsBuilder.fromUri(&quot;http://example.com/&quot;)\r\n                    .fragment(&quot;/login?param1=hi&quot;)\r\n                    .build();\r\n\r\nYou might be able to do it by using a *second* UriComponentsBuilder to manage the path and parameters that you want to end up in the fragment. Then `build()` that one and extract the parts you want and put them in the fragment.\r\n\r\n\r\n    UriComponents fragmentUri = UriComponentsBuilder.fromUri(&quot;http://unused/&quot;)\r\n                    .path(&quot;/login&quot;)\r\n                    .queryParam(&quot;param1&quot;, &quot;hi&quot;)\r\n                    .build();\r\n\r\n    UriComponents uri = UriComponentsBuilder.fromUri(&quot;http://example.com/&quot;)\r\n                    .fragment(fragmentUri.getPath() + &quot;?&quot; + fragmentUri.getQuery())\r\n                    .build();\r\n\r\n(Untested code, but hopefully gives you the idea.)\r\n","title":"UriComponentsBuilder construct a URI from existing URI without hardcoding URI variables","body":"<p>Everything after the hash is called the &quot;fragment&quot;.\nThe URI syntax (defined in <a href=\"https://datatracker.ietf.org/doc/html/rfc3986#section-3\" rel=\"nofollow noreferrer\">RFC 3986</a>) puts the query parameters before the fragment.</p>\n<pre><code>URI = scheme &quot;:&quot; hier-part [ &quot;?&quot; query ] [ &quot;#&quot; fragment ]\n</code></pre>\n<p>So the <code>UriComponentsBuilder</code> is doing the correct thing according to the spec.</p>\n<p>It looks like your system has its own method of using the fragment to provide <em>pseudo</em> query parameters within the fragment. Unfortunately, if you want to do this, you are going to have to manage (and encode) such &quot;parameters&quot; yourself and then set the fragment appropriately.</p>\n<pre><code>UriComponentsBuilder.fromUri(&quot;http://example.com/&quot;)\n                .fragment(&quot;/login?param1=hi&quot;)\n                .build();\n</code></pre>\n<p>You might be able to do it by using a <em>second</em> UriComponentsBuilder to manage the path and parameters that you want to end up in the fragment. Then <code>build()</code> that one and extract the parts you want and put them in the fragment.</p>\n<pre><code>UriComponents fragmentUri = UriComponentsBuilder.fromUri(&quot;http://unused/&quot;)\n                .path(&quot;/login&quot;)\n                .queryParam(&quot;param1&quot;, &quot;hi&quot;)\n                .build();\n\nUriComponents uri = UriComponentsBuilder.fromUri(&quot;http://example.com/&quot;)\n                .fragment(fragmentUri.getPath() + &quot;?&quot; + fragmentUri.getQuery())\n                .build();\n</code></pre>\n<p>(Untested code, but hopefully gives you the idea.)</p>\n"},{"tags":[],"owner":{"account_id":25141176,"reputation":65,"user_id":18987492,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671034538,"creation_date":1671025155,"answer_id":74799140,"question_id":71741344,"body_markdown":"    var uriBuilder = UriComponentsBuilder.fromHttpUrl(&quot;http://example.com&quot;).path(&quot;#/login&quot;);\r\n    uriBuilder.queryParam(&quot;email&quot;, emailReciepient);\r\n    uriBuilder.queryParam(&quot;key&quot;, jobKey).build().toString();\r\n\r\n\r\nthis is the way to do it, as path will be read as it is, ","title":"UriComponentsBuilder construct a URI from existing URI without hardcoding URI variables","body":"<pre><code>var uriBuilder = UriComponentsBuilder.fromHttpUrl(&quot;http://example.com&quot;).path(&quot;#/login&quot;);\nuriBuilder.queryParam(&quot;email&quot;, emailReciepient);\nuriBuilder.queryParam(&quot;key&quot;, jobKey).build().toString();\n</code></pre>\n<p>this is the way to do it, as path will be read as it is,</p>\n"}],"owner":{"account_id":3600664,"reputation":2545,"user_id":3004041,"accept_rate":34,"display_name":"covfefe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":673,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1671034538,"creation_date":1649093217,"question_id":71741344,"body_markdown":"I&#39;m receiving a redirect URI as a String which is something like this - `http://example.com/#/login`.\r\n\r\nIt can also be some arbitrary URI String like this - \r\n\r\n`http://example.com/#/login?param1=hi` or this - `http://example.com` \r\n\r\nand I have to take that URI as is and add some query parameters to it.\r\n\r\nSo I&#39;m constructing the URI like so.\r\n\r\n\r\n    UriComponentsBuilder.fromUri(&quot;http://example.com/#/login&quot;)\r\n                        .queryParam(&quot;param1&quot;, &quot;hi&quot;)\r\n                        .build();\r\n\r\nBut when I build, the output looks like this:\r\n\r\n`http://example.com?param1=hi#/login`\r\n\r\ninstead of the expected output which is this:\r\n\r\n`http://example.com/#/login?param1=hi`\r\n\r\nHow can I make sure the redirect URI I receive is parsed correctly and query parameters added at the end?","title":"UriComponentsBuilder construct a URI from existing URI without hardcoding URI variables","body":"<p>I'm receiving a redirect URI as a String which is something like this - <code>http://example.com/#/login</code>.</p>\n<p>It can also be some arbitrary URI String like this -</p>\n<p><code>http://example.com/#/login?param1=hi</code> or this - <code>http://example.com</code></p>\n<p>and I have to take that URI as is and add some query parameters to it.</p>\n<p>So I'm constructing the URI like so.</p>\n<pre><code>UriComponentsBuilder.fromUri(&quot;http://example.com/#/login&quot;)\n                    .queryParam(&quot;param1&quot;, &quot;hi&quot;)\n                    .build();\n</code></pre>\n<p>But when I build, the output looks like this:</p>\n<p><code>http://example.com?param1=hi#/login</code></p>\n<p>instead of the expected output which is this:</p>\n<p><code>http://example.com/#/login?param1=hi</code></p>\n<p>How can I make sure the redirect URI I receive is parsed correctly and query parameters added at the end?</p>\n"},{"tags":["java","selenium","selenium-webdriver","xpath","drop-down-menu"],"comments":[{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1671031893,"post_id":74800542,"comment_id":132010464,"body_markdown":"Without actual link we can&#39;t help, I&#39;m sorry.","body":"Without actual link we can&#39;t help, I&#39;m sorry."},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1671032205,"post_id":74800542,"comment_id":132010588,"body_markdown":"Hey @Prophet do you see anything wrong in my code? Based on what is presented.. what would you do?","body":"Hey @Prophet do you see anything wrong in my code? Based on what is presented.. what would you do?"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1671032298,"post_id":74800542,"comment_id":132010625,"body_markdown":"I don&#39;t know. There are several possible things that may make this not working","body":"I don&#39;t know. There are several possible things that may make this not working"},{"owner":{"account_id":13920126,"reputation":1489,"user_id":10050775,"display_name":"Jaky Ruby"},"score":1,"creation_date":1671033606,"post_id":74800542,"comment_id":132011182,"body_markdown":"If you use sleep before clicking the option? Maybe your problem is that the element is not still present. Also, try this `driver.findElement(By.xpath(&quot;//span[@data-bind=&#39;text: option().label&#39; and text()=&#39;E.BOSCH2&#39;]&quot;)).click();` instead of `driver.findElement(By.xpath(&quot;//li[@class=&#39;admin__action-group-optgroup&#39; and contains(.,&#39;E.BOSCH&#39;)]&quot;)).click();`","body":"If you use sleep before clicking the option? Maybe your problem is that the element is not still present. Also, try this <code>driver.findElement(By.xpath(&quot;&#47;&#47;span[@data-bind=&#39;text: option().label&#39; and text()=&#39;E.BOSCH2&#39;]&quot;)).click();</code> instead of <code>driver.findElement(By.xpath(&quot;&#47;&#47;li[@class=&#39;admin__action-grou&zwnj;&#8203;p-optgroup&#39; and contains(.,&#39;E.BOSCH&#39;)]&quot;)).click();</code>"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1671034146,"post_id":74800542,"comment_id":132011417,"body_markdown":"@JakyRuby Thank you!!, it worked for me. But please.. could you explain to me and &quot;us&quot; why my method did not worked?. You rock!","body":"@JakyRuby Thank you!!, it worked for me. But please.. could you explain to me and &quot;us&quot; why my method did not worked?. You rock!"},{"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"score":0,"creation_date":1671034214,"post_id":74800542,"comment_id":132011439,"body_markdown":"I used driver.findElement(By.xpath(&quot;//span[@data-bind=&#39;text: option().label&#39; and text()=&#39;E.BOSCH2&#39;]&quot;)).click();","body":"I used driver.findElement(By.xpath(&quot;//span[@data-bind=&#39;text: option().label&#39; and text()=&#39;E.BOSCH2&#39;]&quot;)).click();"}],"answers":[{"tags":[],"owner":{"account_id":13920126,"reputation":1489,"user_id":10050775,"display_name":"Jaky Ruby"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671034297,"creation_date":1671034297,"answer_id":74801137,"question_id":74800542,"body_markdown":"Use\r\n\r\n    driver.findElement(By.xpath(&quot;//span[@data-bind=&#39;text: option().label&#39; and text()=&#39;E.BOSCH2&#39;]&quot;)).click();\r\n\r\ninstead of \r\n\r\n    driver.findElement(By.xpath(&quot;//li[@class=&#39;admin__action-group-optgroup&#39; and contains(.,&#39;E.BOSCH&#39;)]&quot;)).click();\r\n\r\n\r\nProblem is that your xpath did not work because the elemnt that contains the text `E.BOSCH` is not an `li`, actually is an `span`.","title":"Cannot select option from dropdown list in Selenium &amp; java","body":"<p>Use</p>\n<pre><code>driver.findElement(By.xpath(&quot;//span[@data-bind='text: option().label' and text()='E.BOSCH2']&quot;)).click();\n</code></pre>\n<p>instead of</p>\n<pre><code>driver.findElement(By.xpath(&quot;//li[@class='admin__action-group-optgroup' and contains(.,'E.BOSCH')]&quot;)).click();\n</code></pre>\n<p>Problem is that your xpath did not work because the elemnt that contains the text <code>E.BOSCH</code> is not an <code>li</code>, actually is an <code>span</code>.</p>\n"}],"owner":{"account_id":10668049,"reputation":773,"user_id":15061831,"display_name":"JustToKnow"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74801137,"answer_count":1,"score":-1,"last_activity_date":1671034297,"creation_date":1671031664,"question_id":74800542,"body_markdown":"I cannot click on a specific option thrown by a dropdown menu:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nCustomer group has this:\r\n\r\n    &lt;div class=&quot;admin__action-group-wrap admin__action-multiselect-wrap action-select-wrap _active&quot; data-role=&quot;wrap-ui-group&quot; tabindex=&quot;0&quot; data-bind=&quot;\r\n            attr: {\r\n                id: uid,\r\n                name: inputName\r\n            },\r\n            css: {\r\n                _active: listVisible,\r\n                _disabled: disabled,\r\n                _focus: hasFocus,\r\n                _multiple: multiple\r\n            },\r\n            event: {\r\n                keydown: keydownSwitcher,\r\n                focusin: onFocusIn,\r\n                focusout: onFocusOut\r\n            },\r\n            outerClick: outerClick.bind($data)\r\n    &quot; id=&quot;PR1R77P&quot; name=&quot;settings[customer_group_id]&quot;&gt;\r\n        &lt;div class=&quot;admin__action-multiselect action-select&quot; data-action=&quot;open-search&quot; data-bind=&quot;click: toggleListVisible&quot;&gt;\r\n            &lt;!--ko ifnot: multiple--&gt;\r\n                &lt;div class=&quot;admin__action-multiselect-text&quot; data-role=&quot;selected-option&quot; data-bind=&quot;text: resultLabel&quot;&gt;Teleweb&lt;/div&gt;\r\n            &lt;!-- /ko--&gt;\r\n            &lt;!--ko if: multiple--&gt;&lt;!-- /ko --&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;admin__action-group-list action-select-list action-menu _active&quot; data-bind=&quot;css: { _active: listVisible }&quot;&gt;\r\n            &lt;div class=&quot;admin__action-multiselect-search-wrap&quot;&gt;\r\n                &lt;input class=&quot;admin__control-text admin__action-multiselect-search&quot; data-bind=&quot;\r\n                        hasFocus: searchFocus,\r\n                        event: {\r\n                            keyup: filterOptionsKeydown\r\n                        },\r\n                        valueUpdate: &#39;afterkeydown&#39;,\r\n                        value: filterInputValue&quot; type=&quot;text&quot;&gt;\r\n                &lt;label class=&quot;admin__action-multiselect-search-label&quot; data-action=&quot;advanced-select-search&quot; data-bind=&quot;attr: {for: uid}, visible: !isSearchActive()\r\n                &quot; for=&quot;PR1R77P&quot;&gt;&lt;/label&gt;\r\n                &lt;label class=&quot;admin__action-multiselect-remove-label&quot; data-action=&quot;advanced-select-search&quot; data-bind=&quot;click: clearSearch, visible: isSearchActive\r\n                &quot; style=&quot;display: none;&quot;&gt;&lt;/label&gt;\r\n                &lt;div class=&quot;admin__action-multiselect-search-count&quot; data-bind=&quot;visible: quantitySearchItems\r\n                    &quot;&gt;\r\n                    &lt;!--ko ifnot: multiple--&gt;\r\n                        &lt;span data-bind=&quot;text: quantitySearchItems&quot;&gt;17&lt;/span&gt;\r\n                        &lt;span data-bind=&quot;i18n: &#39;options&#39;&quot;&gt;options&lt;/span&gt;\r\n                    &lt;!-- /ko--&gt;\r\n                    &lt;!--ko if: multiple--&gt;&lt;!-- /ko--&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;!--ko if: group--&gt;\r\n                &lt;!--ko repeat: { foreach: convertedOptions, item: &#39;optgroup&#39;}--&gt;&lt;ul class=&quot;admin__action-multiselect-menu-inner _root&quot; data-repeat-index=&quot;0&quot;&gt;\r\n                    &lt;li class=&quot;admin__action-group-optgroup&quot;&gt;\r\n                        &lt;strong data-bind=&quot;text: optgroup().label&quot;&gt;Customer Groups&lt;/strong&gt;\r\n                    &lt;/li&gt;\r\n                    &lt;!-- ko repeat: { foreach: optgroup().value, item: &#39;option&#39;}  --&gt;&lt;li data-role=&quot;option&quot; class=&quot;admin__action-group-option&quot; tabindex=&quot;-1&quot; data-bind=&quot;\r\n                            click: setSelected.bind($context.$data, option().value),\r\n                            event: {\r\n                                hover: resetHover\r\n                            },\r\n                            attr: {\r\n                                &#39;data-value&#39;: option().value\r\n                            }&quot; data-repeat-index=&quot;0&quot; data-value=&quot;11&quot;&gt;\r\n                            &lt;div class=&quot;action-menu-item _with-checkbox&quot; data-bind=&quot;\r\n                                            css: {\r\n                                                _selected: isSelected(option().value)\r\n                                            },\r\n                                            clickBubble: false\r\n                                    &quot;&gt;\r\n                                &lt;!--ko if: multiple--&gt;&lt;!-- /ko--&gt;\r\n                                &lt;label class=&quot;admin__action-multiselect-label&quot;&gt;\r\n                                    &lt;span data-bind=&quot;text: option().label&quot;&gt;E.BOSCH&lt;/span&gt;\r\n                                &lt;/label&gt;\r\n                            &lt;/div&gt;\r\n                        &lt;/li&gt;&lt;li data-role=&quot;option&quot; class=&quot;admin__action-group-option&quot; tabindex=&quot;-1&quot; data-bind=&quot;\r\n                            click: setSelected.bind($context.$data, option().value),\r\n                            event: {\r\n                                hover: resetHover\r\n                            },\r\n                            attr: {\r\n                                &#39;data-value&#39;: option().value\r\n                            }&quot; data-repeat-index=&quot;1&quot; data-value=&quot;8&quot;&gt;\r\n                            &lt;div class=&quot;action-menu-item _with-checkbox&quot; data-bind=&quot;\r\n                                            css: {\r\n                                                _selected: isSelected(option().value)\r\n                                            },\r\n                                            clickBubble: false\r\n                                    &quot;&gt;\r\n                                &lt;!--ko if: multiple--&gt;&lt;!-- /ko--&gt;\r\n                                &lt;label class=&quot;admin__action-multiselect-label&quot;&gt;\r\n                                    &lt;span data-bind=&quot;text: option().label&quot;&gt;E.BOSCH2&lt;/span&gt;\r\n                                &lt;/label&gt;\r\n                            &lt;/div&gt;\r\n                        &lt;/li&gt;&lt;!-- /ko --&gt;\r\n                &lt;/ul&gt;&lt;!--/ko--&gt;\r\n            &lt;!-- /ko--&gt;\r\n            &lt;!--ko ifnot: group--&gt;&lt;!-- /ko--&gt;\r\n            &lt;!--ko if: multiple--&gt;&lt;!-- /ko --&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\nI can click the button by doing this:\r\n\r\n    driver.findElement(By.name(&quot;settings[customer_group_id]&quot;)).click();\r\n\r\nI tried to click a specific option using this:\r\n\r\n    driver.findElement(By.xpath(&quot;//li[@class=&#39;admin__action-group-optgroup&#39; and contains(.,&#39;E.BOSCH&#39;)]&quot;)).click();\r\n\r\nbut it does not do anything at all.\r\n\r\nWhat am i doing wrong? Why i cannot click on the desired option?.\r\n\r\nNote: i cannot post the URL because it is hidden\r\n\r\n  [1]: https://i.stack.imgur.com/onRBY.png\r\n","title":"Cannot select option from dropdown list in Selenium &amp; java","body":"<p>I cannot click on a specific option thrown by a dropdown menu:</p>\n<p><a href=\"https://i.stack.imgur.com/onRBY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/onRBY.png\" alt=\"enter image description here\" /></a></p>\n<p>Customer group has this:</p>\n<pre><code>&lt;div class=&quot;admin__action-group-wrap admin__action-multiselect-wrap action-select-wrap _active&quot; data-role=&quot;wrap-ui-group&quot; tabindex=&quot;0&quot; data-bind=&quot;\n        attr: {\n            id: uid,\n            name: inputName\n        },\n        css: {\n            _active: listVisible,\n            _disabled: disabled,\n            _focus: hasFocus,\n            _multiple: multiple\n        },\n        event: {\n            keydown: keydownSwitcher,\n            focusin: onFocusIn,\n            focusout: onFocusOut\n        },\n        outerClick: outerClick.bind($data)\n&quot; id=&quot;PR1R77P&quot; name=&quot;settings[customer_group_id]&quot;&gt;\n    &lt;div class=&quot;admin__action-multiselect action-select&quot; data-action=&quot;open-search&quot; data-bind=&quot;click: toggleListVisible&quot;&gt;\n        &lt;!--ko ifnot: multiple--&gt;\n            &lt;div class=&quot;admin__action-multiselect-text&quot; data-role=&quot;selected-option&quot; data-bind=&quot;text: resultLabel&quot;&gt;Teleweb&lt;/div&gt;\n        &lt;!-- /ko--&gt;\n        &lt;!--ko if: multiple--&gt;&lt;!-- /ko --&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;admin__action-group-list action-select-list action-menu _active&quot; data-bind=&quot;css: { _active: listVisible }&quot;&gt;\n        &lt;div class=&quot;admin__action-multiselect-search-wrap&quot;&gt;\n            &lt;input class=&quot;admin__control-text admin__action-multiselect-search&quot; data-bind=&quot;\n                    hasFocus: searchFocus,\n                    event: {\n                        keyup: filterOptionsKeydown\n                    },\n                    valueUpdate: 'afterkeydown',\n                    value: filterInputValue&quot; type=&quot;text&quot;&gt;\n            &lt;label class=&quot;admin__action-multiselect-search-label&quot; data-action=&quot;advanced-select-search&quot; data-bind=&quot;attr: {for: uid}, visible: !isSearchActive()\n            &quot; for=&quot;PR1R77P&quot;&gt;&lt;/label&gt;\n            &lt;label class=&quot;admin__action-multiselect-remove-label&quot; data-action=&quot;advanced-select-search&quot; data-bind=&quot;click: clearSearch, visible: isSearchActive\n            &quot; style=&quot;display: none;&quot;&gt;&lt;/label&gt;\n            &lt;div class=&quot;admin__action-multiselect-search-count&quot; data-bind=&quot;visible: quantitySearchItems\n                &quot;&gt;\n                &lt;!--ko ifnot: multiple--&gt;\n                    &lt;span data-bind=&quot;text: quantitySearchItems&quot;&gt;17&lt;/span&gt;\n                    &lt;span data-bind=&quot;i18n: 'options'&quot;&gt;options&lt;/span&gt;\n                &lt;!-- /ko--&gt;\n                &lt;!--ko if: multiple--&gt;&lt;!-- /ko--&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;!--ko if: group--&gt;\n            &lt;!--ko repeat: { foreach: convertedOptions, item: 'optgroup'}--&gt;&lt;ul class=&quot;admin__action-multiselect-menu-inner _root&quot; data-repeat-index=&quot;0&quot;&gt;\n                &lt;li class=&quot;admin__action-group-optgroup&quot;&gt;\n                    &lt;strong data-bind=&quot;text: optgroup().label&quot;&gt;Customer Groups&lt;/strong&gt;\n                &lt;/li&gt;\n                &lt;!-- ko repeat: { foreach: optgroup().value, item: 'option'}  --&gt;&lt;li data-role=&quot;option&quot; class=&quot;admin__action-group-option&quot; tabindex=&quot;-1&quot; data-bind=&quot;\n                        click: setSelected.bind($context.$data, option().value),\n                        event: {\n                            hover: resetHover\n                        },\n                        attr: {\n                            'data-value': option().value\n                        }&quot; data-repeat-index=&quot;0&quot; data-value=&quot;11&quot;&gt;\n                        &lt;div class=&quot;action-menu-item _with-checkbox&quot; data-bind=&quot;\n                                        css: {\n                                            _selected: isSelected(option().value)\n                                        },\n                                        clickBubble: false\n                                &quot;&gt;\n                            &lt;!--ko if: multiple--&gt;&lt;!-- /ko--&gt;\n                            &lt;label class=&quot;admin__action-multiselect-label&quot;&gt;\n                                &lt;span data-bind=&quot;text: option().label&quot;&gt;E.BOSCH&lt;/span&gt;\n                            &lt;/label&gt;\n                        &lt;/div&gt;\n                    &lt;/li&gt;&lt;li data-role=&quot;option&quot; class=&quot;admin__action-group-option&quot; tabindex=&quot;-1&quot; data-bind=&quot;\n                        click: setSelected.bind($context.$data, option().value),\n                        event: {\n                            hover: resetHover\n                        },\n                        attr: {\n                            'data-value': option().value\n                        }&quot; data-repeat-index=&quot;1&quot; data-value=&quot;8&quot;&gt;\n                        &lt;div class=&quot;action-menu-item _with-checkbox&quot; data-bind=&quot;\n                                        css: {\n                                            _selected: isSelected(option().value)\n                                        },\n                                        clickBubble: false\n                                &quot;&gt;\n                            &lt;!--ko if: multiple--&gt;&lt;!-- /ko--&gt;\n                            &lt;label class=&quot;admin__action-multiselect-label&quot;&gt;\n                                &lt;span data-bind=&quot;text: option().label&quot;&gt;E.BOSCH2&lt;/span&gt;\n                            &lt;/label&gt;\n                        &lt;/div&gt;\n                    &lt;/li&gt;&lt;!-- /ko --&gt;\n            &lt;/ul&gt;&lt;!--/ko--&gt;\n        &lt;!-- /ko--&gt;\n        &lt;!--ko ifnot: group--&gt;&lt;!-- /ko--&gt;\n        &lt;!--ko if: multiple--&gt;&lt;!-- /ko --&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>I can click the button by doing this:</p>\n<pre><code>driver.findElement(By.name(&quot;settings[customer_group_id]&quot;)).click();\n</code></pre>\n<p>I tried to click a specific option using this:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//li[@class='admin__action-group-optgroup' and contains(.,'E.BOSCH')]&quot;)).click();\n</code></pre>\n<p>but it does not do anything at all.</p>\n<p>What am i doing wrong? Why i cannot click on the desired option?.</p>\n<p>Note: i cannot post the URL because it is hidden</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9184,"page":808,"page_size":100}
