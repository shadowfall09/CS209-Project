{"items":[{"tags":["java","probability"],"comments":[{"owner":{"account_id":365517,"reputation":9220,"user_id":710480,"accept_rate":88,"display_name":"勿绮语"},"score":4,"creation_date":1321626017,"post_id":8183840,"comment_id":11785611,"body_markdown":"check out java Random class. That allows you to generate random number, and you can go from there...","body":"check out java Random class. That allows you to generate random number, and you can go from there..."}],"answers":[{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1321626363,"post_id":8183867,"comment_id":10053547,"body_markdown":"+1: Placing the `new Random()` in a field or variable and reusing it would help efficiency.","body":"+1: Placing the <code>new Random()</code> in a field or variable and reusing it would help efficiency."},{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":0,"creation_date":1321626542,"post_id":8183867,"comment_id":10053612,"body_markdown":"@PeterLawrey you are correct of course, I&#39;ve edited the answer appropriately. I just put it that way as a 1 line example!","body":"@PeterLawrey you are correct of course, I&#39;ve edited the answer appropriately. I just put it that way as a 1 line example!"}],"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"comment_count":2,"down_vote_count":0,"up_vote_count":74,"is_accepted":true,"score":74,"last_activity_date":1334585320,"creation_date":1321625948,"answer_id":8183867,"question_id":8183840,"body_markdown":"You&#39;d use [Random][1] to generate a random number, then test it against a literal to match the probability you&#39;re trying to achieve.\r\n\r\nSo given:\r\n\r\n    boolean val = new Random().nextInt(25)==0;\r\n\r\n`val` will have a 1/25 probability of being true (since `nextInt()` has an even probability of returning any number starting at 0 and up to, but not including, 25.)\r\n\r\nYou would of course have to `import java.util.Random;` as well.\r\n\r\nAs pointed out below, if you&#39;re getting more than one random number it&#39;d be more efficient to reuse the Random object rather than recreating it all the time:\r\n\r\n    Random rand = new Random();\r\n    boolean val = rand.nextInt(25)==0;\r\n\r\n..\r\n\r\n    boolean val2 = rand.nextInt(25)==0;\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/7/docs/api/java/util/Random.html","title":"Probability in Java","body":"<p>You'd use <a href=\"http://download.oracle.com/javase/7/docs/api/java/util/Random.html\" rel=\"noreferrer\">Random</a> to generate a random number, then test it against a literal to match the probability you're trying to achieve.</p>\n\n<p>So given:</p>\n\n<pre><code>boolean val = new Random().nextInt(25)==0;\n</code></pre>\n\n<p><code>val</code> will have a 1/25 probability of being true (since <code>nextInt()</code> has an even probability of returning any number starting at 0 and up to, but not including, 25.)</p>\n\n<p>You would of course have to <code>import java.util.Random;</code> as well.</p>\n\n<p>As pointed out below, if you're getting more than one random number it'd be more efficient to reuse the Random object rather than recreating it all the time:</p>\n\n<pre><code>Random rand = new Random();\nboolean val = rand.nextInt(25)==0;\n</code></pre>\n\n<p>..</p>\n\n<pre><code>boolean val2 = rand.nextInt(25)==0;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4568662,"reputation":745,"user_id":3708977,"display_name":"shiri"},"score":3,"creation_date":1472500907,"post_id":8183871,"comment_id":65767243,"body_markdown":"In the general case, this solution using rand.nextDouble() is better than the accepted answer, as it can apply to any arbitrary probability (rather than just to 1/x for a given integer x).\n\nFor example, if your target probability is 33.5%, there is no simple, clean solution using rand.nextInt().","body":"In the general case, this solution using rand.nextDouble() is better than the accepted answer, as it can apply to any arbitrary probability (rather than just to 1/x for a given integer x).  For example, if your target probability is 33.5%, there is no simple, clean solution using rand.nextInt()."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1473061402,"post_id":8183871,"comment_id":65983347,"body_markdown":"@shiri that depends due to potential precision issues. Using integers you could create an integer between 0 and 1000 and check for the value being below 335.","body":"@shiri that depends due to potential precision issues. Using integers you could create an integer between 0 and 1000 and check for the value being below 335."},{"owner":{"account_id":4568662,"reputation":745,"user_id":3708977,"display_name":"shiri"},"score":2,"creation_date":1473267185,"post_id":8183871,"comment_id":66078854,"body_markdown":"agreed, I suppose it comes down to a matter of preference. When I think of probabilities I tend to think in terms of numbers in the range of [0,1], so I find nextDouble() &lt;= X to be cleaner.","body":"agreed, I suppose it comes down to a matter of preference. When I think of probabilities I tend to think in terms of numbers in the range of [0,1], so I find nextDouble() &lt;= X to be cleaner."},{"owner":{"account_id":1092127,"reputation":10061,"user_id":1086540,"accept_rate":86,"display_name":"Hilikus"},"score":0,"creation_date":1634852775,"post_id":8183871,"comment_id":123145671,"body_markdown":"does it make sense to use &lt;= (instead of &lt;) given that == is misleading in floats due to precision?","body":"does it make sense to use &lt;= (instead of &lt;) given that == is misleading in floats due to precision?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1634903985,"post_id":8183871,"comment_id":123158472,"body_markdown":"@Hilikus for small values the precision would be good enough for `==` but you can do it how you like. Whether the boundary is included or not should not make a huge difference.","body":"@Hilikus for small values the precision would be good enough for <code>==</code> but you can do it how you like. Whether the boundary is included or not should not make a huge difference."},{"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"score":0,"creation_date":1665793514,"post_id":8183871,"comment_id":130788582,"body_markdown":"What if a chance is `0%`? Your code would still consider it a success, because it&#39;s `&lt;=`","body":"What if a chance is <code>0%</code>? Your code would still consider it a success, because it&#39;s <code>&lt;=</code>"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1665952663,"post_id":8183871,"comment_id":130814328,"body_markdown":"@parsecer you&#39;re right albeit I&#39;d not agree with your argument of a 0% chance. I&#39;d not even test probability for anything that has 0% chance because that will _alway_ fail. However, `&lt;` instead of `&lt;=` is more accurate as the upper boundary is exclusive.","body":"@parsecer you&#39;re right albeit I&#39;d not agree with your argument of a 0% chance. I&#39;d not even test probability for anything that has 0% chance because that will <i>alway</i> fail. However, <code>&lt;</code> instead of <code>&lt;=</code> is more accurate as the upper boundary is exclusive."},{"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"score":0,"creation_date":1666031506,"post_id":8183871,"comment_id":130834454,"body_markdown":"@Thomas I solve my task of simulating a random event occurring with k * 100% probability (represented by variable `k` - in rage `0 - 1`):\n\n`int randomNumber = new Random().nextInt(100);\ndouble diceRoll = randomNumber / (double) 100;\nif (diceRoll &lt; k) {//event occurred}`\n\nTherefore for `k = 0`, `randomNumber` would always be greater or equal to `0`, thus event won&#39;t occur. For `k = 1`, `randomNumber` will always be less than that, thus even would occur","body":"@Thomas I solve my task of simulating a random event occurring with k * 100% probability (represented by variable <code>k</code> - in rage <code>0 - 1</code>):  <code>int randomNumber = new Random().nextInt(100); double diceRoll = randomNumber &#47; (double) 100; if (diceRoll &lt; k) {&#47;&#47;event occurred}</code>  Therefore for <code>k = 0</code>, <code>randomNumber</code> would always be greater or equal to <code>0</code>, thus event won&#39;t occur. For <code>k = 1</code>, <code>randomNumber</code> will always be less than that, thus even would occur"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1666073169,"post_id":8183871,"comment_id":130842458,"body_markdown":"@parsecer fair enough. You code looks like it would be part of a game and I assume probability can change so you&#39;d not know whether it would be 0% beforehand. Btw, your code seems not to have fractional percentages as `randomNumber` is an integer and thus it could be optimized to do integer comparisons, i.e. `k * 100` would probably need to be recalculated less often than `randomNumber / 100`.","body":"@parsecer fair enough. You code looks like it would be part of a game and I assume probability can change so you&#39;d not know whether it would be 0% beforehand. Btw, your code seems not to have fractional percentages as <code>randomNumber</code> is an integer and thus it could be optimized to do integer comparisons, i.e. <code>k * 100</code> would probably need to be recalculated less often than <code>randomNumber &#47; 100</code>."}],"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":9,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1665952802,"creation_date":1321625959,"answer_id":8183871,"question_id":8183840,"body_markdown":"Generally you use a random number generator. Most of those return a number in the interval [0,1[ so you would then check whether that number is &lt; 0.04 or not. \r\n\r\n    if( new Random().nextDouble() &lt; 0.04 ) {  //you might want to cache the Random instance\r\n       //we hit the 1/25 ( 4% ) case.\r\n    }\r\n\r\nOr \r\n\r\n    if( Math.random() &lt; 0.04 ) {\r\n      //we hit the 1/25 ( 4% ) case.\r\n    }\r\n\r\nNote that there are multiple random number generators that have different properties, but for simple applications the `Random` class should be sufficient.\r\n\r\n_Edit:_ I changed the condition from `&lt;=` to `&lt;` because the upper boundary of the random number is exlusive, i.e. the largest returned value will still be &lt; 1.0. Hence `x &lt;= 0.04` would actually be slightly more than a 4% chance, while `x &lt; 0.04` would be accurate (or as accurate as floating point math can be).","title":"Probability in Java","body":"<p>Generally you use a random number generator. Most of those return a number in the interval [0,1[ so you would then check whether that number is &lt; 0.04 or not.</p>\n<pre><code>if( new Random().nextDouble() &lt; 0.04 ) {  //you might want to cache the Random instance\n   //we hit the 1/25 ( 4% ) case.\n}\n</code></pre>\n<p>Or</p>\n<pre><code>if( Math.random() &lt; 0.04 ) {\n  //we hit the 1/25 ( 4% ) case.\n}\n</code></pre>\n<p>Note that there are multiple random number generators that have different properties, but for simple applications the <code>Random</code> class should be sufficient.</p>\n<p><em>Edit:</em> I changed the condition from <code>&lt;=</code> to <code>&lt;</code> because the upper boundary of the random number is exlusive, i.e. the largest returned value will still be &lt; 1.0. Hence <code>x &lt;= 0.04</code> would actually be slightly more than a 4% chance, while <code>x &lt; 0.04</code> would be accurate (or as accurate as floating point math can be).</p>\n"},{"tags":[],"owner":{"account_id":24285,"reputation":32181,"user_id":61663,"accept_rate":92,"display_name":"Jack Edmonds"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1321625996,"creation_date":1321625996,"answer_id":8183876,"question_id":8183840,"body_markdown":"Java has a class called [`java.util.Random`][1] which can generate random numbers.  If you want something to happen with probability 1/25, simply generate a random number between 1 and 25 (or 0 and 24 inclusive) and check whether that number is equal to 1.\r\n\r\n    if(new java.util.Random().nextInt(25)==0){\r\n        //Do something.\r\n    }\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1,5,0/docs/api/java/util/Random.html","title":"Probability in Java","body":"<p>Java has a class called <a href=\"http://download.oracle.com/javase/1,5,0/docs/api/java/util/Random.html\" rel=\"noreferrer\"><code>java.util.Random</code></a> which can generate random numbers.  If you want something to happen with probability 1/25, simply generate a random number between 1 and 25 (or 0 and 24 inclusive) and check whether that number is equal to 1.</p>\n\n<pre><code>if(new java.util.Random().nextInt(25)==0){\n    //Do something.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1047162,"reputation":4175,"user_id":1051927,"accept_rate":77,"display_name":"narek.gevorgyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1321626130,"creation_date":1321626130,"answer_id":8183905,"question_id":8183840,"body_markdown":" \r\nMaybe you can implement this with generating random numbers.\r\n  \r\n\r\n      Random rn = new Random();\r\n        double d = rn.nextDouble();     // random value in range 0.0 - 1.0\r\n        if(d&lt;=0.04){\r\n        doSomeThing();\r\n        }","title":"Probability in Java","body":"<p>Maybe you can implement this with generating random numbers.</p>\n\n<pre><code>  Random rn = new Random();\n    double d = rn.nextDouble();     // random value in range 0.0 - 1.0\n    if(d&lt;=0.04){\n    doSomeThing();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2830374,"reputation":69,"user_id":2432079,"display_name":"Wald"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1403766294,"creation_date":1403766294,"answer_id":24424357,"question_id":8183840,"body_markdown":"Since 1.7 it&#39;s better to use (in concurrent environment at least):\r\n\r\n    ThreadLocalRandom.current().nextInt(25) == 0\r\n\r\n\r\n[Javadoc][1]\r\n\r\nA random number generator isolated to the current thread. Like the global Random generator used by the Math class, a ThreadLocalRandom is initialized with an internally generated seed that may not otherwise be modified. When applicable, use of ThreadLocalRandom rather than shared Random objects in concurrent programs will typically encounter much less overhead and contention. Use of ThreadLocalRandom is particularly appropriate when multiple tasks (for example, each a ForkJoinTask) use random numbers in parallel in thread pools.\r\nUsages of this class should typically be of the form: ThreadLocalRandom.current().nextX(...) (where X is Int, Long, etc). When all usages are of this form, it is never possible to accidently share a ThreadLocalRandom across multiple threads.\r\n\r\nThis class also provides additional commonly used bounded random generation methods.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html","title":"Probability in Java","body":"<p>Since 1.7 it's better to use (in concurrent environment at least):</p>\n\n<pre><code>ThreadLocalRandom.current().nextInt(25) == 0\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html\" rel=\"noreferrer\">Javadoc</a></p>\n\n<p>A random number generator isolated to the current thread. Like the global Random generator used by the Math class, a ThreadLocalRandom is initialized with an internally generated seed that may not otherwise be modified. When applicable, use of ThreadLocalRandom rather than shared Random objects in concurrent programs will typically encounter much less overhead and contention. Use of ThreadLocalRandom is particularly appropriate when multiple tasks (for example, each a ForkJoinTask) use random numbers in parallel in thread pools.\nUsages of this class should typically be of the form: ThreadLocalRandom.current().nextX(...) (where X is Int, Long, etc). When all usages are of this form, it is never possible to accidently share a ThreadLocalRandom across multiple threads.</p>\n\n<p>This class also provides additional commonly used bounded random generation methods.</p>\n"}],"owner":{"account_id":347193,"reputation":3284,"user_id":681159,"accept_rate":98,"display_name":"Jeel Shah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86747,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":8183867,"answer_count":5,"score":44,"last_activity_date":1665952802,"creation_date":1321625825,"question_id":8183840,"body_markdown":"I was curious to know, how do I implement probability in Java? For example, if the chances of a variable showing is 1/25, then how would I implement that? Or any other probability? Please point me in the general direction.","title":"Probability in Java","body":"<p>I was curious to know, how do I implement probability in Java? For example, if the chances of a variable showing is 1/25, then how would I implement that? Or any other probability? Please point me in the general direction.</p>\n"},{"tags":["java","arrays","string"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665596735,"post_id":74045631,"comment_id":130740279,"body_markdown":"what exactly are you expecting in the array?","body":"what exactly are you expecting in the array?"},{"owner":{"account_id":3056450,"reputation":1,"user_id":2751790,"display_name":"user2453"},"score":0,"creation_date":1665614035,"post_id":74045631,"comment_id":130744592,"body_markdown":"I am expecting  **&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;** from the input String **new String[]{&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;}**","body":"I am expecting  <b>&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;</b> from the input String <b>new String[]{&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;}</b>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665652908,"post_id":74045631,"comment_id":130751858,"body_markdown":"basically `myString.replaceFirst(&quot;^\\\\Qnew String[]{\\&quot;\\\\E&quot;,&quot;&quot;).replaceFirst(&quot;\\\\Q\\&quot;}\\\\E$&quot;,&quot;&quot;).split(&quot;\\&quot;,\\&quot;&quot;, -1)` ? (assuming the quotes should NOT be included in the strings)","body":"basically <code>myString.replaceFirst(&quot;^\\\\Qnew String[]{\\&quot;\\\\E&quot;,&quot;&quot;).replaceFirst(&quot;\\\\Q\\&quot;}\\\\E$&quot;,&quot;&quot;).split(&quot;\\&quot;,&zwnj;&#8203;\\&quot;&quot;, -1)</code> ? (assuming the quotes should NOT be included in the strings)"}],"answers":[{"comments":[{"owner":{"account_id":3056450,"reputation":1,"user_id":2751790,"display_name":"user2453"},"score":0,"creation_date":1665595224,"post_id":74045669,"comment_id":130739788,"body_markdown":"User wants exactly the same input as I have described, I have the solution for remaining all possible variants of the input. Thank you for quick response.","body":"User wants exactly the same input as I have described, I have the solution for remaining all possible variants of the input. Thank you for quick response."}],"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665594696,"creation_date":1665594696,"answer_id":74045669,"question_id":74045631,"body_markdown":"If you literally type `n`, `e`, `w`, ` `, `S`, etcetera (you type in `new String[] {&quot;A:22&quot;, &quot;D:3&quot;}` and you want a method on scanner such that you get a string with that data), that is incredibly complicated and involves linking a java compiler in. If you&#39;re asking this kind of question, likely well beyond your current skill level.\r\n\r\nWhat you can do, however, is simply ask the user to enter something like:\r\n\r\n&gt; A:22 D:3 C:4 A:-22\r\n\r\nSimply `.nextLine().split(&quot; &quot;)` and voila: First read a line, then split that line into a string array by looking for spaces as separators.\r\n\r\n","title":"Converting String returned from Scanner nextLine() to String array","body":"<p>If you literally type <code>n</code>, <code>e</code>, <code>w</code>, <code> </code>, <code>S</code>, etcetera (you type in <code>new String[] {&quot;A:22&quot;, &quot;D:3&quot;}</code> and you want a method on scanner such that you get a string with that data), that is incredibly complicated and involves linking a java compiler in. If you're asking this kind of question, likely well beyond your current skill level.</p>\n<p>What you can do, however, is simply ask the user to enter something like:</p>\n<blockquote>\n<p>A:22 D:3 C:4 A:-22</p>\n</blockquote>\n<p>Simply <code>.nextLine().split(&quot; &quot;)</code> and voila: First read a line, then split that line into a string array by looking for spaces as separators.</p>\n"},{"comments":[{"owner":{"account_id":3056450,"reputation":1,"user_id":2751790,"display_name":"user2453"},"score":0,"creation_date":1665613915,"post_id":74046245,"comment_id":130744561,"body_markdown":"Thank you. From my input string I need to extract only **&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;**  Input String: **new String[]{&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;}**","body":"Thank you. From my input string I need to extract only <b>&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;</b>  Input String: <b>new String[]{&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;}</b>"}],"tags":[],"owner":{"account_id":23073129,"reputation":847,"user_id":17186475,"display_name":"human bean"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665598103,"creation_date":1665598103,"answer_id":74046245,"question_id":74045631,"body_markdown":"```java\r\nScanner sc = new Scanner(System.in); \r\nString myString = sc.nextLine(); \r\n\r\nString[] arr = myString.replaceAll(&quot;[ \\&quot;{}]&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n```\r\n\r\n**Explanation:**\r\nThe regex in `replaceAll` replaces the characters `&quot;`, `{`, &#39;}`, and ` ` (space character) with an empty string. Then you simply split the string along all the commas, and you get a String array containing all the tokens the user entered.\r\n\r\n**Note:** the regex removes all spaces as well, so if your tokens have spaces in them, then they will get removed. However, from what I gathered from your question, there won&#39;t be any spaces in the elements of the array.\r\n","title":"Converting String returned from Scanner nextLine() to String array","body":"<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in); \nString myString = sc.nextLine(); \n\nString[] arr = myString.replaceAll(&quot;[ \\&quot;{}]&quot;, &quot;&quot;).split(&quot;,&quot;);\n</code></pre>\n<p><strong>Explanation:</strong>\nThe regex in <code>replaceAll</code> replaces the characters <code>&quot;</code>, <code>{</code>, '}<code>, and </code> ` (space character) with an empty string. Then you simply split the string along all the commas, and you get a String array containing all the tokens the user entered.</p>\n<p><strong>Note:</strong> the regex removes all spaces as well, so if your tokens have spaces in them, then they will get removed. However, from what I gathered from your question, there won't be any spaces in the elements of the array.</p>\n"},{"tags":[],"owner":{"account_id":3056450,"reputation":1,"user_id":2751790,"display_name":"user2453"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665952750,"creation_date":1665617127,"answer_id":74048954,"question_id":74045631,"body_markdown":"Modified the regex pattern in `replaceAll()` method :\r\n```\r\nString[] strArr = s.nextLine().replaceAll(&quot;[ \\&quot;{}\\\\]\\\\[(new|String)]&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n```\r\nOutput on printing the String Array strArr:\r\n```\r\nA:22 \r\nD:3\r\nC:4\r\nA:-22\r\n```","title":"Converting String returned from Scanner nextLine() to String array","body":"<p>Modified the regex pattern in <code>replaceAll()</code> method :</p>\n<pre><code>String[] strArr = s.nextLine().replaceAll(&quot;[ \\&quot;{}\\\\]\\\\[(new|String)]&quot;, &quot;&quot;).split(&quot;,&quot;);\n</code></pre>\n<p>Output on printing the String Array strArr:</p>\n<pre><code>A:22 \nD:3\nC:4\nA:-22\n</code></pre>\n"}],"owner":{"account_id":3056450,"reputation":1,"user_id":2751790,"display_name":"user2453"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1665952750,"creation_date":1665594498,"question_id":74045631,"body_markdown":"My requirement is that I need to convert a string input taken from a Scanner&#39;s nextLine() method, to a string array:\r\n\r\nMy code: \r\n\r\n    Scanner sc= new Scanner(System.in); \r\n    String myString = sc.nextLine(); \r\n\r\nThe above code works fine, when I give input in the console as :  **new String[]{&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;}** \r\n\r\nbut my challenge is to read scanner input and assign it to String array like this:\r\n\r\n    String[] consoleInput=sc.nextLine();\r\n\r\nI have an incompatible type error, which is normal as String cannot be converted to String array. Is there a way to convert sc.nextLine() to String array in the above line?\r\n","title":"Converting String returned from Scanner nextLine() to String array","body":"<p>My requirement is that I need to convert a string input taken from a Scanner's nextLine() method, to a string array:</p>\n<p>My code:</p>\n<pre><code>Scanner sc= new Scanner(System.in); \nString myString = sc.nextLine(); \n</code></pre>\n<p>The above code works fine, when I give input in the console as :  <strong>new String[]{&quot;A:22&quot;,&quot;D:3&quot;,&quot;C:4&quot;,&quot;A:-22&quot;}</strong></p>\n<p>but my challenge is to read scanner input and assign it to String array like this:</p>\n<pre><code>String[] consoleInput=sc.nextLine();\n</code></pre>\n<p>I have an incompatible type error, which is normal as String cannot be converted to String array. Is there a way to convert sc.nextLine() to String array in the above line?</p>\n"},{"tags":["java","search","lucene"],"comments":[{"owner":{"account_id":59390,"reputation":9292,"user_id":177710,"accept_rate":40,"display_name":"Oliver"},"score":0,"creation_date":1464346426,"post_id":9066347,"comment_id":62459817,"body_markdown":"Special character can be found here: http://lucene.apache.org/core/3_5_0/queryparsersyntax.html#N10180.","body":"Special character can be found here: <a href=\"http://lucene.apache.org/core/3_5_0/queryparsersyntax.html#N10180\" rel=\"nofollow noreferrer\">lucene.apache.org/core/3_5_0/queryparsersyntax.html#N10180</a>."}],"answers":[{"tags":[],"owner":{"account_id":362788,"reputation":5274,"user_id":706171,"display_name":"Artur Nowak"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1327962692,"creation_date":1327962692,"answer_id":9071806,"question_id":9066347,"body_markdown":"The reason why you don&#39;t get your documents back is that while indexing you&#39;re using `StandardAnalyzer`, which converts tokens to lowercase and removes stop words. So the only term that gets indexed for your example is &#39;crescent&#39;. However, wildcard queries are not analyzed, so &#39;the&#39; is included as mandatory part of the query. The same goes for phrase queries in your scenario.\r\n\r\n`KeywordAnalyzer` is probably not very suitable for your use case, because it takes whole field content as a single token. You can use `SimpleAnalyzer` for the street field -- it will split the input on all non-letter characters and then convert them to lowercase. You can also consider using `WhitespaceAnalyzer` with `LowerCaseFilter`. You need to try different options and work out what works best for your data and users.\r\n\r\nAlso, you can use different analyzers per field (e.g. with [`PerFieldAnalyzerWrapper`][1]) if changing analyzer for that field breaks other searches.\r\n\r\n\r\n  [1]: http://lucene.apache.org/java/3_5_0/api/all/org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html","title":"Lucene: Multi-word phrases as search terms","body":"<p>The reason why you don't get your documents back is that while indexing you're using <code>StandardAnalyzer</code>, which converts tokens to lowercase and removes stop words. So the only term that gets indexed for your example is 'crescent'. However, wildcard queries are not analyzed, so 'the' is included as mandatory part of the query. The same goes for phrase queries in your scenario.</p>\n\n<p><code>KeywordAnalyzer</code> is probably not very suitable for your use case, because it takes whole field content as a single token. You can use <code>SimpleAnalyzer</code> for the street field -- it will split the input on all non-letter characters and then convert them to lowercase. You can also consider using <code>WhitespaceAnalyzer</code> with <code>LowerCaseFilter</code>. You need to try different options and work out what works best for your data and users.</p>\n\n<p>Also, you can use different analyzers per field (e.g. with <a href=\"http://lucene.apache.org/java/3_5_0/api/all/org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html\"><code>PerFieldAnalyzerWrapper</code></a>) if changing analyzer for that field breaks other searches.</p>\n"},{"comments":[{"owner":{"account_id":362788,"reputation":5274,"user_id":706171,"display_name":"Artur Nowak"},"score":1,"creation_date":1328097937,"post_id":9074393,"comment_id":11422856,"body_markdown":"This is not a good solution -- this way, you would need to always include &#39;the&#39; in the query to get this result.","body":"This is not a good solution -- this way, you would need to always include &#39;the&#39; in the query to get this result."},{"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"score":0,"creation_date":1328149138,"post_id":9074393,"comment_id":11439240,"body_markdown":"@Artur Nowak: Vote your answer up. A suitable Analyzer is the point.","body":"@Artur Nowak: Vote your answer up. A suitable Analyzer is the point."}],"tags":[],"owner":{"account_id":109733,"reputation":31428,"user_id":290629,"accept_rate":88,"display_name":"卢声远 Shengyuan Lu"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1327987275,"creation_date":1327984111,"answer_id":9074393,"question_id":9066347,"body_markdown":"If you want an exact words match the street, you could set Field &quot;Street&quot; NOT_ANALYZED which will not filter stop word &quot;the&quot;.\r\n\r\n    doc.add(new Field(&quot;Street&quot;, &quot;the crescent&quot;, Field.Store.YES, Field.Index.Not_Analyzed);","title":"Lucene: Multi-word phrases as search terms","body":"<p>If you want an exact words match the street, you could set Field \"Street\" NOT_ANALYZED which will not filter stop word \"the\".</p>\n\n<pre><code>doc.add(new Field(\"Street\", \"the crescent\", Field.Store.YES, Field.Index.Not_Analyzed);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":362788,"reputation":5274,"user_id":706171,"display_name":"Artur Nowak"},"score":1,"creation_date":1328097762,"post_id":9084178,"comment_id":11422793,"body_markdown":"Removing stop words from street names is incorrect. Think about names like [Both Street](http://g.co/maps/r5rnc). I&#39;m sure that you can find more vivid examples. Just why remove something if it doesn&#39;t make sense?","body":"Removing stop words from street names is incorrect. Think about names like <a href=\"http://g.co/maps/r5rnc\" rel=\"nofollow noreferrer\">Both Street</a>. I&#39;m sure that you can find more vivid examples. Just why remove something if it doesn&#39;t make sense?"}],"tags":[],"owner":{"account_id":203038,"reputation":3595,"user_id":450460,"accept_rate":77,"display_name":"RikSaunderson"},"comment_count":1,"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1328031289,"creation_date":1328031289,"answer_id":9084178,"question_id":9066347,"body_markdown":"I found that my attempt to generate a query without using a QueryParser was not working, so I stopped trying to create my own queries and used a QueryParser instead.  All of the recomendations that I saw online showed that you should use the same Analyzer in the QueryParser that you use during indexing, so I used a StandardAnalyzer to build the QueryParser.\r\n\r\nThis works on this example because the StandardAnalyzer removes the word &quot;the&quot; from the street &quot;the crescent&quot; during indexing, and hence we can&#39;t search for it because it isn&#39;t in the index.  \r\n\r\nHowever, if we choose to search for &quot;Grove Road&quot;, we have a problem with the out-of-the-box functionality, namely that the query will return all of the results containing either &quot;Grove&quot; OR &quot;Road&quot;.  This is easily fixed by setting up the QueryParser so that it&#39;s default operation is AND instead of OR.  \r\n\r\nIn the end, the correct solution was the following:\r\n\r\n    int numberOfHits = 200;\r\n    String LocationOfDirectory = &quot;C:\\\\dir\\\\index&quot;;\r\n    TopScoreDocCollector collector = TopScoreDocCollector.create(numberOfHits, true);\r\n    Directory directory = new SimpleFSDirectory(new File(LocationOfDirectory));\r\n    IndexSearcher searcher = new IndexSearcher(IndexReader.open(directory);\r\n\r\n    StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_35);\r\n\r\n    //WildcardQuery q = new WildcardQuery(new Term(&quot;Street&quot;, &quot;the crescent&quot;);\r\n    QueryParser qp = new QueryParser(Version.LUCENE_35, &quot;Street&quot;, analyzer);\r\n    qp.setDefaultOperator(QueryParser.Operator.AND);\r\n\r\n    Query q = qp.parse(&quot;grove road&quot;);\r\n\r\n    searcher.search(q, collector);\r\n    ScoreDoc[] hits = collector.topDocs().scoreDocs;","title":"Lucene: Multi-word phrases as search terms","body":"<p>I found that my attempt to generate a query without using a QueryParser was not working, so I stopped trying to create my own queries and used a QueryParser instead.  All of the recomendations that I saw online showed that you should use the same Analyzer in the QueryParser that you use during indexing, so I used a StandardAnalyzer to build the QueryParser.</p>\n\n<p>This works on this example because the StandardAnalyzer removes the word \"the\" from the street \"the crescent\" during indexing, and hence we can't search for it because it isn't in the index.  </p>\n\n<p>However, if we choose to search for \"Grove Road\", we have a problem with the out-of-the-box functionality, namely that the query will return all of the results containing either \"Grove\" OR \"Road\".  This is easily fixed by setting up the QueryParser so that it's default operation is AND instead of OR.  </p>\n\n<p>In the end, the correct solution was the following:</p>\n\n<pre><code>int numberOfHits = 200;\nString LocationOfDirectory = \"C:\\\\dir\\\\index\";\nTopScoreDocCollector collector = TopScoreDocCollector.create(numberOfHits, true);\nDirectory directory = new SimpleFSDirectory(new File(LocationOfDirectory));\nIndexSearcher searcher = new IndexSearcher(IndexReader.open(directory);\n\nStandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_35);\n\n//WildcardQuery q = new WildcardQuery(new Term(\"Street\", \"the crescent\");\nQueryParser qp = new QueryParser(Version.LUCENE_35, \"Street\", analyzer);\nqp.setDefaultOperator(QueryParser.Operator.AND);\n\nQuery q = qp.parse(\"grove road\");\n\nsearcher.search(q, collector);\nScoreDoc[] hits = collector.topDocs().scoreDocs;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9463169,"reputation":131,"user_id":7036377,"accept_rate":75,"display_name":"Gopi Krishna Seeram"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1493637684,"creation_date":1493637684,"answer_id":43718295,"question_id":9066347,"body_markdown":"There is no need of using any `Analyzer` here coz Hibernate implicitly uses `StandardAnalyzer` which will split the words based on `white spaces` so the solution here is set the `Analyze` to `NO` it will automatically performs `Multi Phrase Search` \r\n   \r\n\r\n\r\n     @Column(name=&quot;skill&quot;)\r\n     \t@Field(index=Index.YES, analyze=Analyze.NO, store=Store.NO)\r\n    \t@Analyzer(definition=&quot;SkillsAnalyzer&quot;)\r\n    \tprivate String skill;","title":"Lucene: Multi-word phrases as search terms","body":"<p>There is no need of using any <code>Analyzer</code> here coz Hibernate implicitly uses <code>StandardAnalyzer</code> which will split the words based on <code>white spaces</code> so the solution here is set the <code>Analyze</code> to <code>NO</code> it will automatically performs <code>Multi Phrase Search</code> </p>\n\n<pre><code> @Column(name=\"skill\")\n    @Field(index=Index.YES, analyze=Analyze.NO, store=Store.NO)\n    @Analyzer(definition=\"SkillsAnalyzer\")\n    private String skill;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21667524,"reputation":1,"user_id":15985651,"display_name":"Teron"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665952358,"creation_date":1665952179,"answer_id":74090523,"question_id":9066347,"body_markdown":"@RikSaunderson&#39;s solution for searching documents where **all** subqueries of a query have to occur, is still working with Lucene 9. \r\n\r\n    QueryParser queryParser = new QueryParser(LuceneConstants.CONTENTS, new StandardAnalyzer());\r\n    queryParser.setDefaultOperator(QueryParser.Operator.AND);","title":"Lucene: Multi-word phrases as search terms","body":"<p>@RikSaunderson's solution for searching documents where <strong>all</strong> subqueries of a query have to occur, is still working with Lucene 9.</p>\n<pre><code>QueryParser queryParser = new QueryParser(LuceneConstants.CONTENTS, new StandardAnalyzer());\nqueryParser.setDefaultOperator(QueryParser.Operator.AND);\n</code></pre>\n"}],"owner":{"account_id":203038,"reputation":3595,"user_id":450460,"accept_rate":77,"display_name":"RikSaunderson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27751,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":9084178,"answer_count":5,"score":9,"last_activity_date":1665952358,"creation_date":1327937511,"question_id":9066347,"body_markdown":"I&#39;m trying to make a searchable phone/local business directory using Apache Lucene.\r\n\r\nI have fields for street name, business name, phone number etc.  The problem that I&#39;m having is that when I try to search by street where the street name has multiple words (e.g. &#39;the crescent&#39;), no results are returned.  But if I try to search with just one word, e.g &#39;crescent&#39;, I get all the results that I want.\r\n\r\nI&#39;m indexing the data with the following:\r\n\r\n    String LocationOfDirectory = &quot;C:\\\\dir\\\\index&quot;;\r\n\r\n    StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_34);\r\n    Directory Index = new SimpleFSDirectory(LocationOfDirectory);\r\n    \r\n    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE.34, analyzer);\r\n    IndexWriter w = new IndexWriter(index, config);\r\n\r\n\r\n    Document doc = new Document();\r\n    doc.add(new Field(&quot;Street&quot;, &quot;the crescent&quot;, Field.Store.YES, Field.Index.Analyzed);\r\n\r\n    w.add(doc);\r\n    w.close();\r\n\r\n\r\nMy searches work like this:\r\n\r\n    int numberOfHits = 200;\r\n    String LocationOfDirectory = &quot;C:\\\\dir\\\\index&quot;;\r\n    TopScoreDocCollector collector = TopScoreDocCollector.create(numberOfHits, true);\r\n    Directory directory = new SimpleFSDirectory(new File(LocationOfDirectory));\r\n    IndexSearcher searcher = new IndexSearcher(IndexReader.open(directory);\r\n\r\n    WildcardQuery q = new WildcardQuery(new Term(&quot;Street&quot;, &quot;the crescent&quot;);\r\n\r\n    searcher.search(q, collector);\r\n    ScoreDoc[] hits = collector.topDocs().scoreDocs;\r\n\r\nI have tried swapping the wildcard query for a phrase query, first with the entire string and then splitting the string up on white space and wrapping them in a BooleanQuery like this:\r\n\r\n    String term = &quot;the crescent&quot;;\r\n    BooleanQuery b = new BooleanQuery();\r\n    PhraseQuery p = new PhraseQuery();\r\n    String[] tokens = term.split(&quot; &quot;);\r\n    for(int i = 0 ; i &lt; tokens.length ; ++i)\r\n    {\r\n        p.add(new Term(&quot;Street&quot;, tokens[i]));\r\n    }\r\n    b.add(p, BooleanClause.Occur.MUST);\r\n\r\nHowever, this didn&#39;t work.  I tried using a KeywordAnalyzer instead of a StandardAnalyzer, but then all other types of search stopped working as well.  I have tried replacing spaces with other characters (+ and @), and converting queries to and from this form, but that still doesn&#39;t work.  I think it doesn&#39;t work because + and @ are special characters which are not indexed, but I can&#39;t seem to find a list anywhere of which characters are like that.  \r\n\r\nI&#39;m beginning to go slightly mad, does anyone know what I&#39;m doing wrong?\r\n\r\n\r\n      ","title":"Lucene: Multi-word phrases as search terms","body":"<p>I'm trying to make a searchable phone/local business directory using Apache Lucene.</p>\n\n<p>I have fields for street name, business name, phone number etc.  The problem that I'm having is that when I try to search by street where the street name has multiple words (e.g. 'the crescent'), no results are returned.  But if I try to search with just one word, e.g 'crescent', I get all the results that I want.</p>\n\n<p>I'm indexing the data with the following:</p>\n\n<pre><code>String LocationOfDirectory = \"C:\\\\dir\\\\index\";\n\nStandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_34);\nDirectory Index = new SimpleFSDirectory(LocationOfDirectory);\n\nIndexWriterConfig config = new IndexWriterConfig(Version.LUCENE.34, analyzer);\nIndexWriter w = new IndexWriter(index, config);\n\n\nDocument doc = new Document();\ndoc.add(new Field(\"Street\", \"the crescent\", Field.Store.YES, Field.Index.Analyzed);\n\nw.add(doc);\nw.close();\n</code></pre>\n\n<p>My searches work like this:</p>\n\n<pre><code>int numberOfHits = 200;\nString LocationOfDirectory = \"C:\\\\dir\\\\index\";\nTopScoreDocCollector collector = TopScoreDocCollector.create(numberOfHits, true);\nDirectory directory = new SimpleFSDirectory(new File(LocationOfDirectory));\nIndexSearcher searcher = new IndexSearcher(IndexReader.open(directory);\n\nWildcardQuery q = new WildcardQuery(new Term(\"Street\", \"the crescent\");\n\nsearcher.search(q, collector);\nScoreDoc[] hits = collector.topDocs().scoreDocs;\n</code></pre>\n\n<p>I have tried swapping the wildcard query for a phrase query, first with the entire string and then splitting the string up on white space and wrapping them in a BooleanQuery like this:</p>\n\n<pre><code>String term = \"the crescent\";\nBooleanQuery b = new BooleanQuery();\nPhraseQuery p = new PhraseQuery();\nString[] tokens = term.split(\" \");\nfor(int i = 0 ; i &lt; tokens.length ; ++i)\n{\n    p.add(new Term(\"Street\", tokens[i]));\n}\nb.add(p, BooleanClause.Occur.MUST);\n</code></pre>\n\n<p>However, this didn't work.  I tried using a KeywordAnalyzer instead of a StandardAnalyzer, but then all other types of search stopped working as well.  I have tried replacing spaces with other characters (+ and @), and converting queries to and from this form, but that still doesn't work.  I think it doesn't work because + and @ are special characters which are not indexed, but I can't seem to find a list anywhere of which characters are like that.  </p>\n\n<p>I'm beginning to go slightly mad, does anyone know what I'm doing wrong?</p>\n"},{"tags":["java","spring-boot","docker","git-lfs","dockerhub"],"comments":[{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":1,"creation_date":1664870631,"post_id":73944739,"comment_id":130563445,"body_markdown":"I feel its problem with build process, problem zeroes down to how jar is built.\nI am not sure how your jar build process is setup but I feel you need to look at debug output at that level\n\nalso if you say you are uploading files via git lfs, is it rejecting any files while uploading? you should see some debug output","body":"I feel its problem with build process, problem zeroes down to how jar is built. I am not sure how your jar build process is setup but I feel you need to look at debug output at that level  also if you say you are uploading files via git lfs, is it rejecting any files while uploading? you should see some debug output"},{"owner":{"account_id":12991286,"reputation":420,"user_id":9390432,"display_name":"Kevin O."},"score":0,"creation_date":1664871137,"post_id":73944739,"comment_id":130563611,"body_markdown":"@swapyonubuntu I build the .JAR with Maven in IntelliJ. The upload to Git LFS via command line in IntelliJ is successfully, without errors. If I look at the Giuthub repository I can see the .JAR with the note &quot;Stored on Git LFS&quot; with the correct file-size. Even the build process on Docker Hub is successfully without an error.","body":"@swapyonubuntu I build the .JAR with Maven in IntelliJ. The upload to Git LFS via command line in IntelliJ is successfully, without errors. If I look at the Giuthub repository I can see the .JAR with the note &quot;Stored on Git LFS&quot; with the correct file-size. Even the build process on Docker Hub is successfully without an error."},{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":0,"creation_date":1664882386,"post_id":73944739,"comment_id":130567092,"body_markdown":"Since you said jar file is corrupt, Can you try both cases running both jars manually with java -jar, \nif this fails(and jar is corrupt and does not run) means that we can isolate docker build process altogether and focus on jar build process.","body":"Since you said jar file is corrupt, Can you try both cases running both jars manually with java -jar,  if this fails(and jar is corrupt and does not run) means that we can isolate docker build process altogether and focus on jar build process."},{"owner":{"account_id":12991286,"reputation":420,"user_id":9390432,"display_name":"Kevin O."},"score":0,"creation_date":1664883645,"post_id":73944739,"comment_id":130567481,"body_markdown":"@swapyonubuntu If the JAR file is not on Git&#39;s LFS (just normally pushed to Github), then the JAR file is not corrupt and the Docker image is working properly. I updated the thread, got an answer from Github support.","body":"@swapyonubuntu If the JAR file is not on Git&#39;s LFS (just normally pushed to Github), then the JAR file is not corrupt and the Docker image is working properly. I updated the thread, got an answer from Github support."}],"owner":{"account_id":12991286,"reputation":420,"user_id":9390432,"display_name":"Kevin O."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665952151,"creation_date":1664870327,"question_id":73944739,"body_markdown":"**Java .JAR file in Docker image is corrupt since Git LFS**\r\n\r\nSince I use Git LFS to upload files to Github, the Docker image created on Docker Hub (https://hub.docker.com) contains a corrupt Java .JAR file.\r\n\r\nIf I disable Git LFS and push the Java .JAR file the Docker Hub, the Docker image works properly.\r\n\r\n - I use IntelliJ IDEA\r\n - I setup the Git LFS based on this tutorial: https://docs.github.com/en/repositories/working-with-files/managing-large-files\r\n\r\nThe .JAR is builded with Maven in IntelliJ. The upload to Git LFS via command line in IntelliJ, based on the official tutorial mentioned above, is successfully without errors. If I look at the Giuthub repository I can see the .JAR with the note &quot;Stored on Git LFS&quot; with the correct file-size. Even the build process on Docker Hub is successfully without an error.\r\n\r\nThe Dockerfile on Docker Hub is:\r\n```Dockerfile\r\nFROM amazoncorretto:18.0.2\r\nARG JAR_FILE=./target/myapp.jar\r\nCOPY ${JAR_FILE} /myapp.jar\r\nWORKDIR /\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;, &quot;myapp.jar&quot;]\r\n```\r\n\r\nThe build process on Docker Hub is successfully without an error.\r\n\r\nI can also download the Docker image to my server and execute the Docker image. Then, the console output of the Docker container is: `Error: Java .JAR file is corrupt`\r\n\r\n**UPDATE #1**\r\n\r\nI created a support ticket on Github and got a answer from the support:\r\n\r\n&gt; Hi there,\r\n&gt; \r\n&gt; Thanks for getting in touch. This appears to be [a longstanding issue\r\n&gt; with Dockerhub][1].\r\n&gt; \r\n&gt; You may want to reach out to them to find out if they intend on adding\r\n&gt; support for LFS.\r\n&gt; \r\n&gt; Thanks,\r\n&gt; \r\n&gt; Fiona\r\n\r\nThe link she mentioned is: https://github.com/docker/hub-feedback/issues/500\r\n\r\nSeems that problems exists for a while and is still not resloved.\r\n\r\n**UPDATE #2**\r\n\r\nGot an answer from the Docker support\r\n\r\n\r\n&gt; Hello,\r\n&gt; \r\n&gt; Thank you for contacting Docker Support.\r\n&gt; \r\n&gt; Currently Docker Hub does not support Git LFS  :\r\n&gt; https://docker-docs.netlify.app/docker-hub/builds/  Regards,\r\n&gt; \r\n&gt; Docker Support\r\n\r\nI checked the link that was provided by the support and found this:\r\n\r\n&gt; Currently Docker Hub does not support Git LFS (Large File Storage). If\r\n&gt; you have binaries in your build context that are managed by Git LFS,\r\n&gt; only the pointer file is present in the clone made during the\r\n&gt; automated build, which is not what you want.\r\n&gt; \r\n&gt; Subscribe to the [GitHub issue][1] tracking this limitation.\r\n\r\n\r\n  [1]: https://github.com/docker/hub-feedback/issues/500\r\n\r\nThe link to the mentioned Github issue on this page is: https://github.com/docker/hub-feedback/issues/500\r\n\r\nSadly, the issue is open since 7 years.","title":"Spring Boot Java .JAR file corrupt in Docker image (via Docker Hub) since using Git LFS","body":"<p><strong>Java .JAR file in Docker image is corrupt since Git LFS</strong></p>\n<p>Since I use Git LFS to upload files to Github, the Docker image created on Docker Hub (<a href=\"https://hub.docker.com\" rel=\"nofollow noreferrer\">https://hub.docker.com</a>) contains a corrupt Java .JAR file.</p>\n<p>If I disable Git LFS and push the Java .JAR file the Docker Hub, the Docker image works properly.</p>\n<ul>\n<li>I use IntelliJ IDEA</li>\n<li>I setup the Git LFS based on this tutorial: <a href=\"https://docs.github.com/en/repositories/working-with-files/managing-large-files\" rel=\"nofollow noreferrer\">https://docs.github.com/en/repositories/working-with-files/managing-large-files</a></li>\n</ul>\n<p>The .JAR is builded with Maven in IntelliJ. The upload to Git LFS via command line in IntelliJ, based on the official tutorial mentioned above, is successfully without errors. If I look at the Giuthub repository I can see the .JAR with the note &quot;Stored on Git LFS&quot; with the correct file-size. Even the build process on Docker Hub is successfully without an error.</p>\n<p>The Dockerfile on Docker Hub is:</p>\n<pre><code>FROM amazoncorretto:18.0.2\nARG JAR_FILE=./target/myapp.jar\nCOPY ${JAR_FILE} /myapp.jar\nWORKDIR /\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;, &quot;myapp.jar&quot;]\n</code></pre>\n<p>The build process on Docker Hub is successfully without an error.</p>\n<p>I can also download the Docker image to my server and execute the Docker image. Then, the console output of the Docker container is: <code>Error: Java .JAR file is corrupt</code></p>\n<p><strong>UPDATE #1</strong></p>\n<p>I created a support ticket on Github and got a answer from the support:</p>\n<blockquote>\n<p>Hi there,</p>\n<p>Thanks for getting in touch. This appears to be <a href=\"https://github.com/docker/hub-feedback/issues/500\" rel=\"nofollow noreferrer\">a longstanding issue\nwith Dockerhub</a>.</p>\n<p>You may want to reach out to them to find out if they intend on adding\nsupport for LFS.</p>\n<p>Thanks,</p>\n<p>Fiona</p>\n</blockquote>\n<p>The link she mentioned is: <a href=\"https://github.com/docker/hub-feedback/issues/500\" rel=\"nofollow noreferrer\">https://github.com/docker/hub-feedback/issues/500</a></p>\n<p>Seems that problems exists for a while and is still not resloved.</p>\n<p><strong>UPDATE #2</strong></p>\n<p>Got an answer from the Docker support</p>\n<blockquote>\n<p>Hello,</p>\n<p>Thank you for contacting Docker Support.</p>\n<p>Currently Docker Hub does not support Git LFS  :\n<a href=\"https://docker-docs.netlify.app/docker-hub/builds/\" rel=\"nofollow noreferrer\">https://docker-docs.netlify.app/docker-hub/builds/</a>  Regards,</p>\n<p>Docker Support</p>\n</blockquote>\n<p>I checked the link that was provided by the support and found this:</p>\n<blockquote>\n<p>Currently Docker Hub does not support Git LFS (Large File Storage). If\nyou have binaries in your build context that are managed by Git LFS,\nonly the pointer file is present in the clone made during the\nautomated build, which is not what you want.</p>\n<p>Subscribe to the <a href=\"https://github.com/docker/hub-feedback/issues/500\" rel=\"nofollow noreferrer\">GitHub issue</a> tracking this limitation.</p>\n</blockquote>\n<p>The link to the mentioned Github issue on this page is: <a href=\"https://github.com/docker/hub-feedback/issues/500\" rel=\"nofollow noreferrer\">https://github.com/docker/hub-feedback/issues/500</a></p>\n<p>Sadly, the issue is open since 7 years.</p>\n"},{"tags":["java","spring-boot","docker","github","github-actions"],"comments":[{"owner":{"account_id":11598503,"reputation":17267,"user_id":8496462,"display_name":"GuiFalourd"},"score":0,"creation_date":1665868271,"post_id":74081375,"comment_id":130801055,"body_markdown":"Could you try using another action to write the properties file to check if the problem is with the action or the secrets? My suggestion: https://github.com/christian-draeger/write-properties","body":"Could you try using another action to write the properties file to check if the problem is with the action or the secrets? My suggestion: <a href=\"https://github.com/christian-draeger/write-properties\" rel=\"nofollow noreferrer\">github.com/christian-draeger/write-properties</a>"},{"owner":{"account_id":22957134,"reputation":21,"user_id":17087542,"display_name":"MaxDev"},"score":0,"creation_date":1665918745,"post_id":74081375,"comment_id":130807221,"body_markdown":"Hello, I try your solution but It does not work :/  The datas don&#39;t write on properties file","body":"Hello, I try your solution but It does not work :/  The datas don&#39;t write on properties file"}],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665950907,"creation_date":1665913108,"answer_id":74086023,"question_id":74081375,"body_markdown":"The &quot;[Set build-time variables (`--build-arg`)][1]&quot; `docker build` man page section includes:\r\n\r\n&gt; The [`ARG` instruction][2] lets Dockerfile authors define values that users can set at build-time using the `--build-arg` flag.  \r\nThis flag allows you to pass the build-time variables that are accessed like regular environment variables in the RUN instruction of the Dockerfile.  \r\nAlso, these values don’t persist in the intermediate or final images like [`ENV` values][3] do.\r\n\r\nSo make sure your Dockerfile includes:\r\n\r\n```\r\nARG server_port\r\nARG url\r\nARG username\r\nARG password\r\nRUN echo &quot;spring.datasource.url=${url}&quot;&gt;&gt;application.properties &amp;&amp; \\\r\n    echo &quot;spring.datasource.username=${username}&quot;&gt;&gt;application.properties &amp;&amp; \\\r\n    echo &quot;spring.datasource.password=${password}&quot;&gt;&gt;application.properties\r\n```\r\n\r\n---\r\n\r\n&gt;  I don&#39;t know if my syntax if incorrect or it&#39;s a problem with the GitHub secrets reading. \r\n\r\nActually, inside the Dockerfile, the GitHub Action secrets, like `${{ secrets.URL_DEV }}` would not apply.  \r\nOnly `${url}`, meaning the `ARG` name, would be available.\r\n\r\nSo if you input text into `application.properties` in the Dockerfile, use the `ARG` variable names, not the GitHub Action secrets name.\r\n\r\nBut when you call `docker build` (*outside the Dockerfile, since docker build uses the Dockerfile), then yes, use the GitHub Action secrets:\r\n\r\n    docker build ----build-arg url=${{ secrets.URL_DEV }}\r\n\r\n\r\n  [1]: https://docs.docker.com/engine/reference/commandline/build/#set-build-time-variables---build-arg\r\n  [2]: https://docs.docker.com/engine/reference/builder/#arg\r\n  [3]: https://docs.docker.com/engine/reference/builder/#env","title":"GitHub secrets are not sent and read correctly from file","body":"<p>The &quot;<a href=\"https://docs.docker.com/engine/reference/commandline/build/#set-build-time-variables---build-arg\" rel=\"nofollow noreferrer\">Set build-time variables (<code>--build-arg</code>)</a>&quot; <code>docker build</code> man page section includes:</p>\n<blockquote>\n<p>The <a href=\"https://docs.docker.com/engine/reference/builder/#arg\" rel=\"nofollow noreferrer\"><code>ARG</code> instruction</a> lets Dockerfile authors define values that users can set at build-time using the <code>--build-arg</code> flag.<br />\nThis flag allows you to pass the build-time variables that are accessed like regular environment variables in the RUN instruction of the Dockerfile.<br />\nAlso, these values don’t persist in the intermediate or final images like <a href=\"https://docs.docker.com/engine/reference/builder/#env\" rel=\"nofollow noreferrer\"><code>ENV</code> values</a> do.</p>\n</blockquote>\n<p>So make sure your Dockerfile includes:</p>\n<pre><code>ARG server_port\nARG url\nARG username\nARG password\nRUN echo &quot;spring.datasource.url=${url}&quot;&gt;&gt;application.properties &amp;&amp; \\\n    echo &quot;spring.datasource.username=${username}&quot;&gt;&gt;application.properties &amp;&amp; \\\n    echo &quot;spring.datasource.password=${password}&quot;&gt;&gt;application.properties\n</code></pre>\n<hr />\n<blockquote>\n<p>I don't know if my syntax if incorrect or it's a problem with the GitHub secrets reading.</p>\n</blockquote>\n<p>Actually, inside the Dockerfile, the GitHub Action secrets, like <code>${{ secrets.URL_DEV }}</code> would not apply.<br />\nOnly <code>${url}</code>, meaning the <code>ARG</code> name, would be available.</p>\n<p>So if you input text into <code>application.properties</code> in the Dockerfile, use the <code>ARG</code> variable names, not the GitHub Action secrets name.</p>\n<p>But when you call <code>docker build</code> (*outside the Dockerfile, since docker build uses the Dockerfile), then yes, use the GitHub Action secrets:</p>\n<pre><code>docker build ----build-arg url=${{ secrets.URL_DEV }}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1665937100,"post_id":74088122,"comment_id":130810981,"body_markdown":"Do you have the ARG lines, though, as I mentioned in my answer?","body":"Do you have the ARG lines, though, as I mentioned in my answer?"},{"owner":{"account_id":22957134,"reputation":21,"user_id":17087542,"display_name":"MaxDev"},"score":0,"creation_date":1665937309,"post_id":74088122,"comment_id":130811020,"body_markdown":"Yes of course : ARG server_port\nARG url\nARG username\nARG password\nARG hello\n\nFROM openjdk:11-jdk\n\n\nRUN mkdir /app\nWORKDIR ./app\nCOPY . .\n\n#Write the 3 args in a src/main/resources/application.properties file\nRUN echo &quot;spring.datasource.url=$url&quot; &gt;&gt; src/main/resources/application.properties\nRUN echo &quot;spring.datasource.username=$username&quot; &gt;&gt; src/main/resources/application.properties\nRUN echo &quot;spring.datasource.password=$password&quot; &gt;&gt; src/main/resources/application.properties\nRUN echo &quot;test=$hello&quot; &gt;&gt; src/main/resources/application.properties","body":"Yes of course : ARG server_port ARG url ARG username ARG password ARG hello  FROM openjdk:11-jdk   RUN mkdir /app WORKDIR ./app COPY . .  #Write the 3 args in a src/main/resources/application.properties file RUN echo &quot;spring.datasource.url=$url&quot; &gt;&gt; src/main/resources/application.properties RUN echo &quot;spring.datasource.username=$username&quot; &gt;&gt; src/main/resources/application.properties RUN echo &quot;spring.datasource.password=$password&quot; &gt;&gt; src/main/resources/application.properties RUN echo &quot;test=$hello&quot; &gt;&gt; src/main/resources/application.properties"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1665938664,"post_id":74088122,"comment_id":130811349,"body_markdown":"Would a simple echo of those variables display the right values? Just for testing.","body":"Would a simple echo of those variables display the right values? Just for testing."},{"owner":{"account_id":22957134,"reputation":21,"user_id":17087542,"display_name":"MaxDev"},"score":0,"creation_date":1665940413,"post_id":74088122,"comment_id":130811728,"body_markdown":"Test : \nbuild-args: |\n            server_port=${{ secrets.SERVER_PORT_DEV }}\n            url=${{ secrets.URL_DEV }}\n            username=${{ secrets.USERNAME_DEV }}\nARG username\n#5 [ 2/10] RUN echo &quot;USERNAME ==&gt; $username&quot;\n#5 0.218 USERNAME ==&gt; \n#5 DONE 0.2s","body":"Test :  build-args: |             server_port=${{ secrets.SERVER_PORT_DEV }}             url=${{ secrets.URL_DEV }}             username=${{ secrets.USERNAME_DEV }} ARG username #5 [ 2/10] RUN echo &quot;USERNAME ==&gt; $username&quot; #5 0.218 USERNAME ==&gt;  #5 DONE 0.2s"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1665944012,"post_id":74088122,"comment_id":130812533,"body_markdown":"So... does it display the actual value, or just the default value #5?","body":"So... does it display the actual value, or just the default value #5?"},{"owner":{"account_id":22957134,"reputation":21,"user_id":17087542,"display_name":"MaxDev"},"score":0,"creation_date":1665947050,"post_id":74088122,"comment_id":130813172,"body_markdown":"No, the #5 is just the dockerfile step showing by Github Action. The result of echo &quot;USERNAME ==&gt; $username&quot; is USERNAME ==&gt; \nI don&#39;t know if my syntax if incorrect or it&#39;s a problem with the github secrets reading.","body":"No, the #5 is just the dockerfile step showing by Github Action. The result of echo &quot;USERNAME ==&gt; $username&quot; is USERNAME ==&gt;  I don&#39;t know if my syntax if incorrect or it&#39;s a problem with the github secrets reading."},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1665950701,"post_id":74088122,"comment_id":130813926,"body_markdown":"Can you try `echo &quot;url=&#39;${url}&#39;&quot;` instead of `echo &quot;url=&#39;${{ secrets.URL_DEV}}&#39;&quot;`?","body":"Can you try <code>echo &quot;url=&#39;${url}&#39;&quot;</code> instead of <code>echo &quot;url=&#39;${{ secrets.URL_DEV}}&#39;&quot;</code>?"},{"owner":{"account_id":22957134,"reputation":21,"user_id":17087542,"display_name":"MaxDev"},"score":0,"creation_date":1666007428,"post_id":74088122,"comment_id":130825558,"body_markdown":"The echo command is the dockerfile command, not a github action command. When I try by github action the result is :\n      - name: &quot;Echo env&quot;\n        run: echo &quot;URL--&gt;${{ secrets.URL_DEV }}&quot;\nRun echo &quot;URL--&gt;***&quot;\nURL--&gt;***","body":"The echo command is the dockerfile command, not a github action command. When I try by github action the result is :       - name: &quot;Echo env&quot;         run: echo &quot;URL--&gt;${{ secrets.URL_DEV }}&quot; Run echo &quot;URL--&gt;***&quot; URL--&gt;***"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1666007887,"post_id":74088122,"comment_id":130825721,"body_markdown":"Yes, that is what I meant: can you try those echo in the Dockerfile, using url, not secrets.URL_DEV? Read my edited answer.","body":"Yes, that is what I meant: can you try those echo in the Dockerfile, using url, not secrets.URL_DEV? Read my edited answer."}],"tags":[],"owner":{"account_id":22957134,"reputation":21,"user_id":17087542,"display_name":"MaxDev"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665932251,"creation_date":1665932251,"answer_id":74088122,"question_id":74081375,"body_markdown":"Yes, in my Dockerfile I have this informations : \r\n\r\n    #Write the 3 args in a src/main/resources/application.properties file\r\n    RUN echo &quot;spring.datasource.url=${url}&quot; &gt;&gt; src/main/resources/application.properties\r\n    RUN echo &quot;spring.datasource.username=${username}&quot; &gt;&gt; src/main/resources/application.properties\r\n    RUN echo &quot;spring.datasource.password=${password}&quot; &gt;&gt; src/main/resources/application.properties\r\n    \r\n    #Print the content of the file to check if it&#39;s ok\r\n    RUN cat src/main/resources/application.properties\r\n\r\nI don&#39;t understand why my secrets doesn&#39;t in my file, i&#39;m so confuse","title":"GitHub secrets are not sent and read correctly from file","body":"<p>Yes, in my Dockerfile I have this informations :</p>\n<pre><code>#Write the 3 args in a src/main/resources/application.properties file\nRUN echo &quot;spring.datasource.url=${url}&quot; &gt;&gt; src/main/resources/application.properties\nRUN echo &quot;spring.datasource.username=${username}&quot; &gt;&gt; src/main/resources/application.properties\nRUN echo &quot;spring.datasource.password=${password}&quot; &gt;&gt; src/main/resources/application.properties\n\n#Print the content of the file to check if it's ok\nRUN cat src/main/resources/application.properties\n</code></pre>\n<p>I don't understand why my secrets doesn't in my file, i'm so confuse</p>\n"}],"owner":{"account_id":22957134,"reputation":21,"user_id":17087542,"display_name":"MaxDev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1665950907,"creation_date":1665852860,"question_id":74081375,"body_markdown":"In my personal project, I try to deploy my backend spring boot with github actions and a Dockerfile\r\n\r\nFor more security, I save my properties in the Github secrets and in my Dockerfile, i get the configuration (url, username and password)\r\n\r\n        - name: Build and push Docker image\r\n        uses: docker/build-push-action@v2\r\n        with:\r\n          username: ${{ github.actor }}\r\n          password: ${{ secrets.GITHUB_TOKEN }}\r\n          push: true\r\n          file: ./Dockerfile\r\n          tags: ${{ env.REGISTRY }}/***\r\n          build-args: |\r\n            server_port=${{ secrets.SERVER_PORT_DEV }}\r\n            url=${{ secrets.URL_DEV }}\r\n            username=${{ secrets.USERNAME_DEV }}\r\n            password=${{ secrets.PASSWORD_DEV }}\r\n\r\nAnd my spring boot doesn&#39;t run because the url, username and password are missing in my application.properties.\r\nSo, I try to cat the properties file in my github actions and here is what i got : \r\n\r\n    #11 0.281 # Secrets\r\n    #11 0.281 spring.datasource.url=\r\n    #11 0.281 spring.datasource.username=\r\n    #11 0.281 spring.datasource.password=\r\n\r\nDo you have any idea why Github secrets are not read?\r\n2nd more general question: is it good practice to use this method? Or are there better ones?\r\n\r\nThank you very much for your precious help and good day to all of you who would help me :)","title":"GitHub secrets are not sent and read correctly from file","body":"<p>In my personal project, I try to deploy my backend spring boot with github actions and a Dockerfile</p>\n<p>For more security, I save my properties in the Github secrets and in my Dockerfile, i get the configuration (url, username and password)</p>\n<pre><code>    - name: Build and push Docker image\n    uses: docker/build-push-action@v2\n    with:\n      username: ${{ github.actor }}\n      password: ${{ secrets.GITHUB_TOKEN }}\n      push: true\n      file: ./Dockerfile\n      tags: ${{ env.REGISTRY }}/***\n      build-args: |\n        server_port=${{ secrets.SERVER_PORT_DEV }}\n        url=${{ secrets.URL_DEV }}\n        username=${{ secrets.USERNAME_DEV }}\n        password=${{ secrets.PASSWORD_DEV }}\n</code></pre>\n<p>And my spring boot doesn't run because the url, username and password are missing in my application.properties.\nSo, I try to cat the properties file in my github actions and here is what i got :</p>\n<pre><code>#11 0.281 # Secrets\n#11 0.281 spring.datasource.url=\n#11 0.281 spring.datasource.username=\n#11 0.281 spring.datasource.password=\n</code></pre>\n<p>Do you have any idea why Github secrets are not read?\n2nd more general question: is it good practice to use this method? Or are there better ones?</p>\n<p>Thank you very much for your precious help and good day to all of you who would help me :)</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1665666992,"post_id":74055827,"comment_id":130756572,"body_markdown":"Why do you need to spy? Couldn&#39;t you simply assert that `requestContext.getSecurityContext().getUserPrincipal().getName()` is equal to &quot;myUserName&quot;? Why jump through hoops via spys?","body":"Why do you need to spy? Couldn&#39;t you simply assert that <code>requestContext.getSecurityContext().getUserPrincipal().getNa&zwnj;&#8203;me()</code> is equal to &quot;myUserName&quot;? Why jump through hoops via spys?"},{"owner":{"account_id":9681050,"reputation":67,"user_id":7182733,"display_name":"texmelex"},"score":0,"creation_date":1665733970,"post_id":74055827,"comment_id":130771755,"body_markdown":"I also need to stub some methods of the ContainerRequestContext, that is why I am using a spy object.","body":"I also need to stub some methods of the ContainerRequestContext, that is why I am using a spy object."}],"answers":[{"tags":[],"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665950889,"creation_date":1665950889,"answer_id":74090400,"question_id":74055827,"body_markdown":"Try to use Mockito.argThat instead and see if it changes it:\r\n\r\n    verify(requestContext).setSecurityContext(Mockito.argThat(x -&gt; x.getValue().getUserPrincipal().getName().equals(&quot;myUserName&quot;))); ","title":"Mockito: set value to spy object but get null","body":"<p>Try to use Mockito.argThat instead and see if it changes it:</p>\n<pre><code>verify(requestContext).setSecurityContext(Mockito.argThat(x -&gt; x.getValue().getUserPrincipal().getName().equals(&quot;myUserName&quot;))); \n</code></pre>\n"}],"owner":{"account_id":9681050,"reputation":67,"user_id":7182733,"display_name":"texmelex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":431,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665950889,"creation_date":1665664269,"question_id":74055827,"body_markdown":"I have a test case where I want to see if a property is set correctly during the execution:\r\n\r\n    ContainerRequestContext requestContext = spy(ContainerRequestContext.class);\r\n    someMethodThatSetsTheSecurityContext(requestContext);\r\n\r\n    verify(requestContext).setSecurityContext(argument.capture());\r\n    assertEquals(&quot;myUserName&quot;, argument.getValue().getUserPrincipal().getName());\r\n    assertNotNull(requestContext.getSecurityContext());\r\n\r\nNow if I run this, the verify() and assertEquals() methods return true, but for some reason the requestContext.getSecurityContext() is null.\r\nI understand that for mocked object there is no real implementation behind, but I thought the spied object should work in this case.","title":"Mockito: set value to spy object but get null","body":"<p>I have a test case where I want to see if a property is set correctly during the execution:</p>\n<pre><code>ContainerRequestContext requestContext = spy(ContainerRequestContext.class);\nsomeMethodThatSetsTheSecurityContext(requestContext);\n\nverify(requestContext).setSecurityContext(argument.capture());\nassertEquals(&quot;myUserName&quot;, argument.getValue().getUserPrincipal().getName());\nassertNotNull(requestContext.getSecurityContext());\n</code></pre>\n<p>Now if I run this, the verify() and assertEquals() methods return true, but for some reason the requestContext.getSecurityContext() is null.\nI understand that for mocked object there is no real implementation behind, but I thought the spied object should work in this case.</p>\n"},{"tags":["java","mocking","mockito","junit4"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1665815664,"post_id":74077220,"comment_id":130791012,"body_markdown":"Are you certain that you are calling `abc` *on the mock*?","body":"Are you certain that you are calling <code>abc</code> <i>on the mock</i>?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1665820056,"post_id":74077220,"comment_id":130791647,"body_markdown":"Does this answer your question? [Why is my class not using my mock in unit test?](https://stackoverflow.com/questions/74027324/why-is-my-class-not-using-my-mock-in-unit-test)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/74027324/why-is-my-class-not-using-my-mock-in-unit-test\">Why is my class not using my mock in unit test?</a>"},{"owner":{"account_id":18530506,"reputation":15,"user_id":13501419,"display_name":"Rohan verma"},"score":0,"creation_date":1665821466,"post_id":74077220,"comment_id":130791869,"body_markdown":"Yes @tgdavies. Please help me out with the Mockito.lenient().when(…) issue if you can","body":"Yes @tgdavies. Please help me out with the Mockito.lenient().when(…) issue if you can"},{"owner":{"account_id":18530506,"reputation":15,"user_id":13501419,"display_name":"Rohan verma"},"score":0,"creation_date":1665821506,"post_id":74077220,"comment_id":130791877,"body_markdown":"I got the answer present there but it was not a solution of this question @knittl","body":"I got the answer present there but it was not a solution of this question @knittl"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1665821669,"post_id":74077220,"comment_id":130791912,"body_markdown":"@Rohanverma your question is not answerable. You are not showing the actual test, you are not showing how and where `mockRandom` is used in your SUT. And if you got the answer from the linked question, then why is the answer not a/the solution for this question?","body":"@Rohanverma your question is not answerable. You are not showing the actual test, you are not showing how and where <code>mockRandom</code> is used in your SUT. And if you got the answer from the linked question, then why is the answer not a/the solution for this question?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1665829485,"post_id":74077220,"comment_id":130793264,"body_markdown":"Please edit your question to include a complete example showing the test and the class under test.","body":"Please edit your question to include a complete example showing the test and the class under test."}],"answers":[{"tags":[],"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665950645,"creation_date":1665950645,"answer_id":74090365,"question_id":74077220,"body_markdown":"There are two things here which i can think of:\r\n\r\n1. try to use any() instead. It could happen that your arguments are of another type. I think the map.class could be the issue since this is actually a Map&lt;Object,Object&gt; at runtime.\r\n\r\n2. Another thing is that your Random class is final (if you use Lombok @Value for example), so the fix is to make this class not final","title":"Mockito lenient() when method not working","body":"<p>There are two things here which i can think of:</p>\n<ol>\n<li><p>try to use any() instead. It could happen that your arguments are of another type. I think the map.class could be the issue since this is actually a Map&lt;Object,Object&gt; at runtime.</p>\n</li>\n<li><p>Another thing is that your Random class is final (if you use Lombok @Value for example), so the fix is to make this class not final</p>\n</li>\n</ol>\n"}],"owner":{"account_id":18530506,"reputation":15,"user_id":13501419,"display_name":"Rohan verma"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1391,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1665950645,"creation_date":1665815436,"question_id":74077220,"body_markdown":"I am having one class like this,\r\n\r\n```\r\nclass Random {\r\n  public String abc(String one, String two, Map&lt;String, String&gt; three){\r\n    ..\r\n  }\r\n}\r\n```\r\nNow from test class I have created a mock object like \r\n\r\n```\r\n@Mock\r\nprivate Random mockRandom;\r\n\r\n```\r\n\r\nThen I am trying to mock this like\r\n`Mockito.lenient().when(mockRandom.abc(any(String.class),any(String.class),any(Map.class))).thenReturn(“Test value”); `\r\n\r\n\r\nAfter this also when I am running a test case then this abc method is not giving “Test value”.","title":"Mockito lenient() when method not working","body":"<p>I am having one class like this,</p>\n<pre><code>class Random {\n  public String abc(String one, String two, Map&lt;String, String&gt; three){\n    ..\n  }\n}\n</code></pre>\n<p>Now from test class I have created a mock object like</p>\n<pre><code>@Mock\nprivate Random mockRandom;\n\n</code></pre>\n<p>Then I am trying to mock this like\n<code>Mockito.lenient().when(mockRandom.abc(any(String.class),any(String.class),any(Map.class))).thenReturn(“Test value”); </code></p>\n<p>After this also when I am running a test case then this abc method is not giving “Test value”.</p>\n"},{"tags":["java","spring","junit","mockito"],"answers":[{"comments":[{"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"score":0,"creation_date":1666002784,"post_id":74090304,"comment_id":130823891,"body_markdown":"argThat takes in a predicate lambda and whenever the result is true, the matcher will activate. You havent provided any code, so i cannot help here","body":"argThat takes in a predicate lambda and whenever the result is true, the matcher will activate. You havent provided any code, so i cannot help here"}],"tags":[],"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665950153,"creation_date":1665950153,"answer_id":74090304,"question_id":74090244,"body_markdown":"You can use Mockito.argThat for this:\r\n\r\n    Mockito.when(obj.testMethod(Mockito.argThat(x -&gt; &quot;input1&quot;.equals(x)))).thenReturn(&quot;whatever&quot;);\r\n    Mockito.when(obj.testMethod(Mockito.argThat(x -&gt; &quot;input2&quot;.equals(x)))).thenReturn(&quot;whatever2&quot;);\r\n\r\n    var substring = obj.testMethod(&quot;input1&quot;); //this is &quot;whatever&quot;\r\n    var substring2 = obj.testMethod(&quot;input2&quot;); //this is &quot;whatever2&quot;","title":"Mockito - matcher based on a specific property","body":"<p>You can use Mockito.argThat for this:</p>\n<pre><code>Mockito.when(obj.testMethod(Mockito.argThat(x -&gt; &quot;input1&quot;.equals(x)))).thenReturn(&quot;whatever&quot;);\nMockito.when(obj.testMethod(Mockito.argThat(x -&gt; &quot;input2&quot;.equals(x)))).thenReturn(&quot;whatever2&quot;);\n\nvar substring = obj.testMethod(&quot;input1&quot;); //this is &quot;whatever&quot;\nvar substring2 = obj.testMethod(&quot;input2&quot;); //this is &quot;whatever2&quot;\n</code></pre>\n"}],"owner":{"account_id":3785271,"reputation":592,"user_id":3671893,"accept_rate":88,"display_name":"Ansar Samad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665950153,"creation_date":1665949504,"question_id":74090244,"body_markdown":"I have a operationService class with executeOperation method which accept a databaserequest object .This databaserequest object has 4 properties , one of them is operation . I want to return different responses while calling operationService.executeOperation based on the databaserequest.operation field . Please help me on this .\r\nThis is what iam trying to achieve\r\n\r\n   \r\n\r\n     when(operationService.executeOperation(anyDatabaserequest object with operation as &#39;DEMO&#39;)).thenReturn(&#39;DEMO_RESPONSE&#39;);\r\n     when(operationService.executeOperation(anyDatabaserequest object with operation as &#39;PILOT&#39;)).thenReturn(&#39;PILOT_RESPONSE&#39;);\r\n\r\n ","title":"Mockito - matcher based on a specific property","body":"<p>I have a operationService class with executeOperation method which accept a databaserequest object .This databaserequest object has 4 properties , one of them is operation . I want to return different responses while calling operationService.executeOperation based on the databaserequest.operation field . Please help me on this .\nThis is what iam trying to achieve</p>\n<pre><code> when(operationService.executeOperation(anyDatabaserequest object with operation as 'DEMO')).thenReturn('DEMO_RESPONSE');\n when(operationService.executeOperation(anyDatabaserequest object with operation as 'PILOT')).thenReturn('PILOT_RESPONSE');\n</code></pre>\n"},{"tags":["java","spring","asynchronous","project-reactor"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1640636593,"post_id":70499623,"comment_id":124622767,"body_markdown":"You cannot truly get from a synchronous API like InputStream to an asynchronous API.  You can &quot;pretend&quot; it&#39;s asynchronous by having it do its work in another thread, but that doesn&#39;t truly make it asynchronous.","body":"You cannot truly get from a synchronous API like InputStream to an asynchronous API.  You can &quot;pretend&quot; it&#39;s asynchronous by having it do its work in another thread, but that doesn&#39;t truly make it asynchronous."}],"answers":[{"tags":[],"owner":{"account_id":10230140,"reputation":659,"user_id":7551211,"display_name":"user7551211"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665949878,"creation_date":1640722008,"answer_id":70512011,"question_id":70499623,"body_markdown":"Since `InputStream` is a synchronous API, you have 2 choices, and that&#39;s true about any other synchronous API:\r\n\r\n 1. To switch to another API. This may be a good and possible solution for many problems. The reactive concepts and asynchronous in general are very common and for most of the needs, there is an alternative async library that will do the same thing. In your case, you can use `java.nio2`, or functions from the [Reactor-Netty library, which has great solutions for this use case](https://projectreactor.io/docs/netty/release/api/reactor/netty/ByteBufFlux.html#fromPath-java.nio.file.Path-).\r\n 2. Use another scheduler. Project reactor suggests that all of your asynchronous calls will operate on one non-blocking scheduler, and for synchronous calls, use another (blocking) thread-per-request scheduler. There are two schedulers like this that you can use: `single()` and `boundedElastic()`. The difference is that `boundedElastic()` limits the number of threads that you can open, so you will end up using your threads as blocking queues, which is safer than `single()`.","title":"is there a way to read a InputStream asynchronously with Reactor or transform to bytes?","body":"<p>Since <code>InputStream</code> is a synchronous API, you have 2 choices, and that's true about any other synchronous API:</p>\n<ol>\n<li>To switch to another API. This may be a good and possible solution for many problems. The reactive concepts and asynchronous in general are very common and for most of the needs, there is an alternative async library that will do the same thing. In your case, you can use <code>java.nio2</code>, or functions from the <a href=\"https://projectreactor.io/docs/netty/release/api/reactor/netty/ByteBufFlux.html#fromPath-java.nio.file.Path-\" rel=\"nofollow noreferrer\">Reactor-Netty library, which has great solutions for this use case</a>.</li>\n<li>Use another scheduler. Project reactor suggests that all of your asynchronous calls will operate on one non-blocking scheduler, and for synchronous calls, use another (blocking) thread-per-request scheduler. There are two schedulers like this that you can use: <code>single()</code> and <code>boundedElastic()</code>. The difference is that <code>boundedElastic()</code> limits the number of threads that you can open, so you will end up using your threads as blocking queues, which is safer than <code>single()</code>.</li>\n</ol>\n"}],"owner":{"account_id":23760146,"reputation":51,"user_id":17775678,"display_name":"Daniel Fernando Gomez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1665949878,"creation_date":1640633243,"question_id":70499623,"body_markdown":"I&#39;m trying to upload a file to S3, but JVM says that i have a thread-blocking method calls in code fragments where threads should not be blocked when calling file.readAllBytes(), so is there a way to is there a way to make the method asynchronous with Flux or Mono? or any other way to solve that problem?\r\n\r\n    private Mono&lt;Boolean&gt; uploadFile(InputStream file, String bucket, String name) {\r\n            try {\r\n                return uploadAdapter.uploadObject(bucket,name,file.readAllBytes());\r\n            } catch (IOException e) {\r\n                return Mono.just(false);\r\n            }\r\n        }\r\n    @Override\r\n        public Mono&lt;Boolean&gt; uploadObject(String bucketName, String objectKey, byte[] fileContent) {\r\n            return Mono.fromFuture(\r\n                            s3AsyncClient.putObject(configurePutObject(bucketName, objectKey),\r\n                                    AsyncRequestBody.fromBytes(fileContent)))\r\n                    .map(response -&gt; response.sdkHttpResponse().isSuccessful());\r\n        }","title":"is there a way to read a InputStream asynchronously with Reactor or transform to bytes?","body":"<p>I'm trying to upload a file to S3, but JVM says that i have a thread-blocking method calls in code fragments where threads should not be blocked when calling file.readAllBytes(), so is there a way to is there a way to make the method asynchronous with Flux or Mono? or any other way to solve that problem?</p>\n<pre><code>private Mono&lt;Boolean&gt; uploadFile(InputStream file, String bucket, String name) {\n        try {\n            return uploadAdapter.uploadObject(bucket,name,file.readAllBytes());\n        } catch (IOException e) {\n            return Mono.just(false);\n        }\n    }\n@Override\n    public Mono&lt;Boolean&gt; uploadObject(String bucketName, String objectKey, byte[] fileContent) {\n        return Mono.fromFuture(\n                        s3AsyncClient.putObject(configurePutObject(bucketName, objectKey),\n                                AsyncRequestBody.fromBytes(fileContent)))\n                .map(response -&gt; response.sdkHttpResponse().isSuccessful());\n    }\n</code></pre>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1665951139,"post_id":74090263,"comment_id":130814027,"body_markdown":"If the dual lists solution is required by a schoolwork assignment, say so. Otherwise an entirely different solution would be appropriate.","body":"If the dual lists solution is required by a schoolwork assignment, say so. Otherwise an entirely different solution would be appropriate."},{"owner":{"account_id":21863689,"reputation":1,"user_id":16154178,"display_name":"J Cordeiro"},"score":0,"creation_date":1666046395,"post_id":74090263,"comment_id":130838506,"body_markdown":"Hi, it was a schoolwork assignment. I wasn&#39;t sorting the student list. Noticed that earlier today and fixed the issue. Thanks anyways","body":"Hi, it was a schoolwork assignment. I wasn&#39;t sorting the student list. Noticed that earlier today and fixed the issue. Thanks anyways"}],"owner":{"account_id":21863689,"reputation":1,"user_id":16154178,"display_name":"J Cordeiro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665949765,"creation_date":1665949677,"question_id":74090263,"body_markdown":"i&#39;m trying to code a grading program using 2 arraylists, one for the student name, and the other for the grades. However, when trying to sort the 2 array by having them ordered by best grade and its student to the worst grade and it student, the output of the grade arraylist is correct but the student one isn&#39;t.\r\n\r\nFor example:\r\n\r\nIf the arraylist have the names J, A, B and D, whose grades are 13, 20, 7, 11, the sorting result with be:\r\n\r\n20, 13, 11 and 7, but the names order will remain J, A, B and D.    \r\n\r\n    import java.util.*;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            ArrayList&lt;String&gt; student = new ArrayList&lt;String&gt;();\r\n            ArrayList&lt;Integer&gt; grade = new ArrayList&lt;Integer&gt;();\r\n            int choice = 0;\r\n            do{\r\n    \r\n    \r\n                System.out.println(&quot;____________&quot;);\r\n                System.out.println(&quot;   MENU   &quot;);\r\n                System.out.println(&quot;____________&quot;);\r\n                System.out.println(&quot;1. Add Students &amp; Grades&quot;);\r\n                System.out.println(&quot;2. Order By Name&quot;);\r\n                System.out.println(&quot;3. Order by Grade&quot;);\r\n                System.out.println(&quot;4. &quot;);\r\n                System.out.println(&quot;5. exit&quot;);\r\n                System.out.println(&quot;Select Option:&quot;);\r\n                Scanner scanchoice = new Scanner(System.in);\r\n                choice = scanchoice.nextInt();\r\n    \r\n                if (choice ==1){\r\n                    int s;\r\n                    Scanner size = new Scanner(System.in);\r\n                System.out.println(&quot;What&#39;s the classe&#39;s size?&quot;);\r\n                    s = size.nextInt();\r\n                    Scanner name = new Scanner(System.in);\r\n                    Scanner number = new Scanner(System.in);\r\n                for (int i=0;i&lt;=s-1;i++){\r\n    \r\n                System.out.println(&quot;Please enter the student&#39;s name&quot;);\r\n                student.add(name.next());\r\n                System.out.println(&quot;Please enter the student&#39;s grade:&quot;);\r\n                grade.add(number.nextInt());\r\n                }\r\n    \r\n                }\r\n    \r\n    \r\n                if(choice==2){\r\n                    System.out.println(&quot;Ordering by Name...&quot;);\r\n    \r\n                    int i = 0;\r\n                    Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n                    for (String num : student) {\r\n                        map.put(num, i);\r\n                        i++;\r\n                    }\r\n                    Collections.sort(student);\r\n                    for (String num : student) {\r\n                        System.out.println(num + &quot; &quot; + grade.get(map.get(num)));\r\n                    }\r\n    \r\n    \r\n    \r\n                    }\r\n    \r\n\r\nThis the part related to the issue.\r\n    \r\n                if (choice ==3){\r\n                    int temp = 0;\r\n                    System.out.println(&quot;Ordering by Grade...&quot;);\r\n                    // System.out.println(grade.get(i));\r\n                    for (int i = 0; i &lt; grade.size(); i++) {\r\n                        for (int j = i+1; j &lt; grade.size(); j++) {\r\n                            if(grade.get(i) &lt; grade.get(j)) {\r\n                                temp = grade.get(i);\r\n                                grade.set(i, grade.get(j));\r\n                                grade.set(j, temp);\r\n                            }\r\n                        }\r\n                    }\r\n                    for (int i = 0; i &lt; grade.size(); i++) {\r\n                        System.out.print(grade.get(i) + &quot; &quot;+student.get(i));\r\n                    }\r\n                }\r\n                if (choice ==4){\r\n                }\r\n            }while(choice!=5);\r\n        }\r\n    }","title":"How can i organize 2 arraylists using a loop?","body":"<p>i'm trying to code a grading program using 2 arraylists, one for the student name, and the other for the grades. However, when trying to sort the 2 array by having them ordered by best grade and its student to the worst grade and it student, the output of the grade arraylist is correct but the student one isn't.</p>\n<p>For example:</p>\n<p>If the arraylist have the names J, A, B and D, whose grades are 13, 20, 7, 11, the sorting result with be:</p>\n<p>20, 13, 11 and 7, but the names order will remain J, A, B and D.</p>\n<pre><code>import java.util.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        ArrayList&lt;String&gt; student = new ArrayList&lt;String&gt;();\n        ArrayList&lt;Integer&gt; grade = new ArrayList&lt;Integer&gt;();\n        int choice = 0;\n        do{\n\n\n            System.out.println(&quot;____________&quot;);\n            System.out.println(&quot;   MENU   &quot;);\n            System.out.println(&quot;____________&quot;);\n            System.out.println(&quot;1. Add Students &amp; Grades&quot;);\n            System.out.println(&quot;2. Order By Name&quot;);\n            System.out.println(&quot;3. Order by Grade&quot;);\n            System.out.println(&quot;4. &quot;);\n            System.out.println(&quot;5. exit&quot;);\n            System.out.println(&quot;Select Option:&quot;);\n            Scanner scanchoice = new Scanner(System.in);\n            choice = scanchoice.nextInt();\n\n            if (choice ==1){\n                int s;\n                Scanner size = new Scanner(System.in);\n            System.out.println(&quot;What's the classe's size?&quot;);\n                s = size.nextInt();\n                Scanner name = new Scanner(System.in);\n                Scanner number = new Scanner(System.in);\n            for (int i=0;i&lt;=s-1;i++){\n\n            System.out.println(&quot;Please enter the student's name&quot;);\n            student.add(name.next());\n            System.out.println(&quot;Please enter the student's grade:&quot;);\n            grade.add(number.nextInt());\n            }\n\n            }\n\n\n            if(choice==2){\n                System.out.println(&quot;Ordering by Name...&quot;);\n\n                int i = 0;\n                Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\n                for (String num : student) {\n                    map.put(num, i);\n                    i++;\n                }\n                Collections.sort(student);\n                for (String num : student) {\n                    System.out.println(num + &quot; &quot; + grade.get(map.get(num)));\n                }\n\n\n\n                }\n</code></pre>\n<p>This the part related to the issue.</p>\n<pre><code>            if (choice ==3){\n                int temp = 0;\n                System.out.println(&quot;Ordering by Grade...&quot;);\n                // System.out.println(grade.get(i));\n                for (int i = 0; i &lt; grade.size(); i++) {\n                    for (int j = i+1; j &lt; grade.size(); j++) {\n                        if(grade.get(i) &lt; grade.get(j)) {\n                            temp = grade.get(i);\n                            grade.set(i, grade.get(j));\n                            grade.set(j, temp);\n                        }\n                    }\n                }\n                for (int i = 0; i &lt; grade.size(); i++) {\n                    System.out.print(grade.get(i) + &quot; &quot;+student.get(i));\n                }\n            }\n            if (choice ==4){\n            }\n        }while(choice!=5);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jms","mqtt","spring-integration-mqtt"],"comments":[{"owner":{"account_id":236814,"reputation":55993,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"score":0,"creation_date":1665934643,"post_id":74087354,"comment_id":130810423,"body_markdown":"So your question is really how to prevent each instance of the client receiving all the massages on a given topic? If so you need to look and see if Amazon MQ supports MQTT shared subscriptions","body":"So your question is really how to prevent each instance of the client receiving all the massages on a given topic? If so you need to look and see if Amazon MQ supports MQTT shared subscriptions"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1665942590,"post_id":74087354,"comment_id":130812219,"body_markdown":"Shared subscriptions was added in MQTT 5 and neither ActiveMQ &quot;Classic&quot; nor RabbitMQ (both of which are used by Amazon MQ) supports MQTT 5.","body":"Shared subscriptions was added in MQTT 5 and neither ActiveMQ &quot;Classic&quot; nor RabbitMQ (both of which are used by Amazon MQ) supports MQTT 5."},{"owner":{"account_id":236814,"reputation":55993,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"score":0,"creation_date":1665991327,"post_id":74087354,"comment_id":130820070,"body_markdown":"While formalised in MQTT v5 several brokers had implemented shared subscriptions as a proprietary add on to v3.1.1","body":"While formalised in MQTT v5 several brokers had implemented shared subscriptions as a proprietary add on to v3.1.1"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1666116007,"post_id":74087354,"comment_id":130857849,"body_markdown":"@hardillb, fair enough. Did either ActiveMQ &quot;Classic&quot; or RabbitMQ implement shared subscriptions as a proprietary add on to 3.1.1?","body":"@hardillb, fair enough. Did either ActiveMQ &quot;Classic&quot; or RabbitMQ implement shared subscriptions as a proprietary add on to 3.1.1?"}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665949553,"creation_date":1665944285,"answer_id":74089643,"question_id":74087354,"body_markdown":"What you&#39;re seeing is the expected behavior. MQTT is fundamentally a pub/sub protocol where **all** the subscribers on a particular topic (or set of topics) get **every** message published to that topic (or set of topics). \r\n\r\nI see two ways to tackle the problem of duplicate entries in your database.\r\n\r\n 1. Make the insertions into the database idempotent.\r\n 2. Coordinate each instance of this application so that only one instance is ever active at any point in time.\r\n\r\nIf you used a broker that supported MQTT 5 (e.g. [ActiveMQ Artemis][1]) then you could use a &quot;shared&quot; subscription in which case the applications should _share_ all the messages published to the topic (or set of topics) and there would be no duplicate consumption or database inserts.\r\n\r\n\r\n  [1]: https://activemq.apache.org/components/artemis/","title":"MQTT Listener to listen to a topic and insert data to database on multiple instance pointing to same database","body":"<p>What you're seeing is the expected behavior. MQTT is fundamentally a pub/sub protocol where <strong>all</strong> the subscribers on a particular topic (or set of topics) get <strong>every</strong> message published to that topic (or set of topics).</p>\n<p>I see two ways to tackle the problem of duplicate entries in your database.</p>\n<ol>\n<li>Make the insertions into the database idempotent.</li>\n<li>Coordinate each instance of this application so that only one instance is ever active at any point in time.</li>\n</ol>\n<p>If you used a broker that supported MQTT 5 (e.g. <a href=\"https://activemq.apache.org/components/artemis/\" rel=\"nofollow noreferrer\">ActiveMQ Artemis</a>) then you could use a &quot;shared&quot; subscription in which case the applications should <em>share</em> all the messages published to the topic (or set of topics) and there would be no duplicate consumption or database inserts.</p>\n"}],"owner":{"account_id":17968963,"reputation":1,"user_id":13058223,"display_name":"Inder Bhushan Jha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665949553,"creation_date":1665925546,"question_id":74087354,"body_markdown":"So I&#39;ve made a chat application using Java Spring Boot and MQTT. I&#39;ve made an MQTT listener which listens to all the messages under the `abc` topic (i.e. `abc/#`). For MQTT broker I&#39;m using Amazon MQ.\r\n\r\nSo what this application does is it listens to all the message and insert the data to the database which is working fine but when I deployed this application on multiple instance I&#39;m facing duplicate data entries because both the instance is pointing to same database which is AWS RDS how to overcome this??\r\n```java\r\npublic void subscribe(String topic) throws MqttException {\r\n    logger.info(&quot;client connected&quot;);\r\n\r\n    mqttClient.subscribeWithResponse(topic, (currentTopic, msg) -&gt; {\r\n\r\n        logger.info(&quot;listened : &quot; + new String(msg.getPayload()));\r\n\r\n        try {\r\n            Gson gson = new Gson();\r\n            if (currentTopic.equals(&quot;Abc/onlineStatus&quot;)) {\r\n                UserOnlineStatusVO userOnlineStatusVO = gson.fromJson(new String(msg.getPayload()), UserOnlineStatusVO.class);\r\n                User user = userRepository.findById(userOnlineStatusVO.getUserId()).orElseThrow(() -&gt; new Exception(&quot;user does not exist&quot;));\r\n                LocalDateTime lastSeen = LocalDateTime.parse(userOnlineStatusVO.getLastSeen(), format);\r\n                user.setLastSeen(lastSeen);\r\n                user.setOnlineStatus(userOnlineStatusVO.getOnlineStatus());\r\n                userRepository.save(user);\r\n            } else {\r\n                GroupChatMessage groupChatMessage = gson.fromJson(new String(msg.getPayload()), GroupChatMessage.class);\r\n                if (Boolean.FALSE.equals(groupChatMessage.getIsTesting())) {\r\n                    LocalDateTime sendingAt = LocalDateTime.parse(groupChatMessage.getPublishedAt(), sendingAtFormat);\r\n                    groupChatMessage.setSendingAt(sendingAt);\r\n                    groupChatMessageRepository.save(groupChatMessage);\r\n                    logger.info(&quot;data inserted : &quot; + groupChatMessage);\r\n\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            System.err.println(e.getMessage());\r\n        }\r\n    });\r\n}\r\n```","title":"MQTT Listener to listen to a topic and insert data to database on multiple instance pointing to same database","body":"<p>So I've made a chat application using Java Spring Boot and MQTT. I've made an MQTT listener which listens to all the messages under the <code>abc</code> topic (i.e. <code>abc/#</code>). For MQTT broker I'm using Amazon MQ.</p>\n<p>So what this application does is it listens to all the message and insert the data to the database which is working fine but when I deployed this application on multiple instance I'm facing duplicate data entries because both the instance is pointing to same database which is AWS RDS how to overcome this??</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void subscribe(String topic) throws MqttException {\n    logger.info(&quot;client connected&quot;);\n\n    mqttClient.subscribeWithResponse(topic, (currentTopic, msg) -&gt; {\n\n        logger.info(&quot;listened : &quot; + new String(msg.getPayload()));\n\n        try {\n            Gson gson = new Gson();\n            if (currentTopic.equals(&quot;Abc/onlineStatus&quot;)) {\n                UserOnlineStatusVO userOnlineStatusVO = gson.fromJson(new String(msg.getPayload()), UserOnlineStatusVO.class);\n                User user = userRepository.findById(userOnlineStatusVO.getUserId()).orElseThrow(() -&gt; new Exception(&quot;user does not exist&quot;));\n                LocalDateTime lastSeen = LocalDateTime.parse(userOnlineStatusVO.getLastSeen(), format);\n                user.setLastSeen(lastSeen);\n                user.setOnlineStatus(userOnlineStatusVO.getOnlineStatus());\n                userRepository.save(user);\n            } else {\n                GroupChatMessage groupChatMessage = gson.fromJson(new String(msg.getPayload()), GroupChatMessage.class);\n                if (Boolean.FALSE.equals(groupChatMessage.getIsTesting())) {\n                    LocalDateTime sendingAt = LocalDateTime.parse(groupChatMessage.getPublishedAt(), sendingAtFormat);\n                    groupChatMessage.setSendingAt(sendingAt);\n                    groupChatMessageRepository.save(groupChatMessage);\n                    logger.info(&quot;data inserted : &quot; + groupChatMessage);\n\n                }\n            }\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","applet"],"comments":[{"owner":{"account_id":8620,"reputation":22142,"user_id":15619,"accept_rate":91,"display_name":"Riduidel"},"score":1,"creation_date":1290070595,"post_id":4213040,"comment_id":4557015,"body_markdown":"What OS you and your friends are using ? With which Java versions ?","body":"What OS you and your friends are using ? With which Java versions ?"},{"owner":{"account_id":56883,"reputation":66574,"user_id":170365,"accept_rate":77,"display_name":"Strawberry"},"score":0,"creation_date":1290070814,"post_id":4213040,"comment_id":4557053,"body_markdown":"I am using Windows, my friends are using Windows. My friends are using the latest Java (he had to install it on his computer to see it). I was using eclipse. It worked, so I uploaded it to my website, and it worked on both chrome and firefox even after I did a hard refresh.","body":"I am using Windows, my friends are using Windows. My friends are using the latest Java (he had to install it on his computer to see it). I was using eclipse. It worked, so I uploaded it to my website, and it worked on both chrome and firefox even after I did a hard refresh."}],"answers":[{"comments":[{"owner":{"account_id":56883,"reputation":66574,"user_id":170365,"accept_rate":77,"display_name":"Strawberry"},"score":0,"creation_date":1290071245,"post_id":4213114,"comment_id":4557114,"body_markdown":"That is actually my goal. I am inverting it so it goes the opposite direction.","body":"That is actually my goal. I am inverting it so it goes the opposite direction."},{"owner":{"account_id":196734,"reputation":19254,"user_id":440336,"accept_rate":90,"display_name":"Jason Rogers"},"score":0,"creation_date":1290071523,"post_id":4213114,"comment_id":4557147,"body_markdown":"I think the logic of not supporting negative pixels is stupid but this example shows that not all versions are the same unfortunately.","body":"I think the logic of not supporting negative pixels is stupid but this example shows that not all versions are the same unfortunately."}],"tags":[],"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1290073604,"creation_date":1290071125,"answer_id":4213114,"question_id":4213040,"body_markdown":"There are two schools of thought on this.  \r\n\r\nOne is that any polygon with a negative dimension is nonsensical and should not be rendered - what do you mean it&#39;s -10 pixels wide??\r\n\r\nThe other is that a negative dimension simply inverts the polygon on that dimension&#39;s axis.\r\n\r\nMost painting systems apply the latter logic.  My experience in painting with Java has always been this, though I would not often have had negative dimensions, so my experience might not count for much.\r\n\r\nAs to what you can do:\r\n\r\n  1. You might need to have your friend update his Java version.\r\n  2. Otherwise you must perform the inversion yourself, by checking for a negative dimension and transposing your x,y origin in order to make the dimension positive.  That is, the rectangle [10,10,-5,5] is spatially equivalent to [5,10,5,5].  The negative dimension is added to the origin coordinate, and then made absolute.  Note, this can result in a negative origin, but hopefully the drawing system is not *quite* that messed up.\r\n\r\nPersonally, I would prefer to require a newer JVM, if possible.\r\n\r\nOtherwise my recommended code would be:\r\n\r\n    public void fillRect(Graphics gc, int x, int y, int width, int height) {\r\n        if(width &lt;0) { x+=width;  width =-width;  }\r\n        if(height&lt;0) { x+=height; height=-height; }\r\n        gc.fillRect(x,y,width,height);\r\n        }\r\n\r\nAlso, note that you&#39;ll need similar for other drawing operations.\r\n\r\nLastly, I would be suspicious of another mistake in all this, since the behavior is very surprising - I would simplify everything down to a minimal test program, with debug output and verify before wrapping a crap load of painting primitives.","title":"Negative Number in fillRect()","body":"<p>There are two schools of thought on this.  </p>\n\n<p>One is that any polygon with a negative dimension is nonsensical and should not be rendered - what do you mean it's -10 pixels wide??</p>\n\n<p>The other is that a negative dimension simply inverts the polygon on that dimension's axis.</p>\n\n<p>Most painting systems apply the latter logic.  My experience in painting with Java has always been this, though I would not often have had negative dimensions, so my experience might not count for much.</p>\n\n<p>As to what you can do:</p>\n\n<ol>\n<li>You might need to have your friend update his Java version.</li>\n<li>Otherwise you must perform the inversion yourself, by checking for a negative dimension and transposing your x,y origin in order to make the dimension positive.  That is, the rectangle [10,10,-5,5] is spatially equivalent to [5,10,5,5].  The negative dimension is added to the origin coordinate, and then made absolute.  Note, this can result in a negative origin, but hopefully the drawing system is not <em>quite</em> that messed up.</li>\n</ol>\n\n<p>Personally, I would prefer to require a newer JVM, if possible.</p>\n\n<p>Otherwise my recommended code would be:</p>\n\n<pre><code>public void fillRect(Graphics gc, int x, int y, int width, int height) {\n    if(width &lt;0) { x+=width;  width =-width;  }\n    if(height&lt;0) { x+=height; height=-height; }\n    gc.fillRect(x,y,width,height);\n    }\n</code></pre>\n\n<p>Also, note that you'll need similar for other drawing operations.</p>\n\n<p>Lastly, I would be suspicious of another mistake in all this, since the behavior is very surprising - I would simplify everything down to a minimal test program, with debug output and verify before wrapping a crap load of painting primitives.</p>\n"},{"comments":[{"owner":{"account_id":56883,"reputation":66574,"user_id":170365,"accept_rate":77,"display_name":"Strawberry"},"score":0,"creation_date":1290071840,"post_id":4213129,"comment_id":4557183,"body_markdown":"Okay, so its a bar graph, so I want it to go towards the negative direction.","body":"Okay, so its a bar graph, so I want it to go towards the negative direction."},{"owner":{"account_id":196734,"reputation":19254,"user_id":440336,"accept_rate":90,"display_name":"Jason Rogers"},"score":0,"creation_date":1290072105,"post_id":4213129,"comment_id":4557228,"body_markdown":"With the solutions I poster it will do that. instead of asking it to paint a rectangle backwards, you&#39;ll simply be painting it forwards but from further back thus giving you the same effect. am I missing another issue ?","body":"With the solutions I poster it will do that. instead of asking it to paint a rectangle backwards, you&#39;ll simply be painting it forwards but from further back thus giving you the same effect. am I missing another issue ?"},{"owner":{"account_id":196734,"reputation":19254,"user_id":440336,"accept_rate":90,"display_name":"Jason Rogers"},"score":0,"creation_date":1290072542,"post_id":4213129,"comment_id":4557301,"body_markdown":"helped and be helped ^^. (the &quot;deserve&quot; a green mark makes me think of the gold stars system you have in kinder garden :P)","body":"helped and be helped ^^. (the &quot;deserve&quot; a green mark makes me think of the gold stars system you have in kinder garden :P)"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":0,"creation_date":1290073273,"post_id":4213129,"comment_id":4557426,"body_markdown":"There is, of course, no need to abs the dimensions twice; adding the negative amount will have the same effect: `if(width&lt;0) { x+=width; width=-width; }` is more efficient and just as clear.","body":"There is, of course, no need to abs the dimensions twice; adding the negative amount will have the same effect: <code>if(width&lt;0) { x+=width; width=-width; }</code> is more efficient and just as clear."},{"owner":{"account_id":196734,"reputation":19254,"user_id":440336,"accept_rate":90,"display_name":"Jason Rogers"},"score":0,"creation_date":1290133230,"post_id":4213129,"comment_id":4567869,"body_markdown":"I know I originally put a quicker/shorter version if(width&lt;0)x+=width... but then I realized it might be confusing the logic I was explaining, so I preferred a clearer version.","body":"I know I originally put a quicker/shorter version if(width&lt;0)x+=width... but then I realized it might be confusing the logic I was explaining, so I preferred a clearer version."}],"tags":[],"owner":{"account_id":196734,"reputation":19254,"user_id":440336,"accept_rate":90,"display_name":"Jason Rogers"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1290071914,"creation_date":1290071267,"answer_id":4213129,"question_id":4213040,"body_markdown":"My guess is that you and your freind are using 2 different versions of Java. your supports fillrect with a negative value and your freind&#39;s doesn&#39;t. (or even sdk vs jre).\r\n\r\nwhat that shows is that you should write this a different way to have your applet run on all versions.\r\n\r\nwhy not simply move your x of -5 ?\r\n\r\nif you want to do it in a more neat way\r\n\r\n    public void myfillRect(graphics page, int x, int y, int width, int height){\r\n        if(width &lt;0)\r\n            x-=Math.abs(width);\r\n        if(height &lt;0)\r\n            y-=Math.abs(height);\r\n    \r\n        page.rectfill(x,y,Math.abs(width), Math.abs(height));\r\n    } ","title":"Negative Number in fillRect()","body":"<p>My guess is that you and your freind are using 2 different versions of Java. your supports fillrect with a negative value and your freind's doesn't. (or even sdk vs jre).</p>\n\n<p>what that shows is that you should write this a different way to have your applet run on all versions.</p>\n\n<p>why not simply move your x of -5 ?</p>\n\n<p>if you want to do it in a more neat way</p>\n\n<pre><code>public void myfillRect(graphics page, int x, int y, int width, int height){\n    if(width &lt;0)\n        x-=Math.abs(width);\n    if(height &lt;0)\n        y-=Math.abs(height);\n\n    page.rectfill(x,y,Math.abs(width), Math.abs(height));\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16453115,"reputation":484,"user_id":11886045,"display_name":"YazanGhafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665949316,"creation_date":1665949316,"answer_id":74090222,"question_id":4213040,"body_markdown":"Just indicating a small issue in Lawrence code that appear when you drag up the rect which give wrong height value. \r\n\r\nThe problem is in the row\r\n\r\n    if(height&lt;0) { x+=height; height=-height; }\r\n\r\nand it has to be y not x\r\n\r\n    if(height&lt;0) { y+=height; height=-height; }\r\n\r\nin total:\r\n\r\n    public void fillRect(Graphics gc, int x, int y, int width, int height) {\r\n        if(width &lt;0) { x+=width;  width =-width;  }\r\n        if(height&lt;0) { y+=height; height=-height; }\r\n        gc.fillRect(x,y,width,height);\r\n    }","title":"Negative Number in fillRect()","body":"<p>Just indicating a small issue in Lawrence code that appear when you drag up the rect which give wrong height value.</p>\n<p>The problem is in the row</p>\n<pre><code>if(height&lt;0) { x+=height; height=-height; }\n</code></pre>\n<p>and it has to be y not x</p>\n<pre><code>if(height&lt;0) { y+=height; height=-height; }\n</code></pre>\n<p>in total:</p>\n<pre><code>public void fillRect(Graphics gc, int x, int y, int width, int height) {\n    if(width &lt;0) { x+=width;  width =-width;  }\n    if(height&lt;0) { y+=height; height=-height; }\n    gc.fillRect(x,y,width,height);\n}\n</code></pre>\n"}],"owner":{"account_id":56883,"reputation":66574,"user_id":170365,"accept_rate":77,"display_name":"Strawberry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2561,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":4213129,"answer_count":3,"score":4,"last_activity_date":1665949316,"creation_date":1290070418,"question_id":4213040,"body_markdown":"I am using a negative number to have `fillRect()` go the opposite way. It works well on my computer, but my friends cannot see it working properly. What do I do?\r\n\r\n    page.fillRect (12, 12, -5, 10);","title":"Negative Number in fillRect()","body":"<p>I am using a negative number to have <code>fillRect()</code> go the opposite way. It works well on my computer, but my friends cannot see it working properly. What do I do?</p>\n\n<pre><code>page.fillRect (12, 12, -5, 10);\n</code></pre>\n"},{"tags":["java","string","class","enums"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1665916854,"post_id":74086337,"comment_id":130806838,"body_markdown":"do you mean the code should use the `description` instead of `zodiacType.name()`?","body":"do you mean the code should use the <code>description</code> instead of <code>zodiacType.name()</code>?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665917381,"post_id":74086337,"comment_id":130806937,"body_markdown":"Yes, introduce/override: `ZodiacType#toString()`, which (does:)`return description.name();`","body":"Yes, introduce/override: <code>ZodiacType#toString()</code>, which (does:)<code>return description.name();</code>"},{"owner":{"account_id":18771646,"reputation":19,"user_id":13688338,"display_name":"Ming Liang"},"score":0,"creation_date":1665917592,"post_id":74086337,"comment_id":130806977,"body_markdown":"But if I introduce a new toString in enum, it might messed up my first output `Here is an example of set\n    A = {LEO, CAN, VIR, GEM, SAG, TAU, CAP}\n    All elements in set are distinct and random number`","body":"But if I introduce a new toString in enum, it might messed up my first output <code>Here is an example of set     A = {LEO, CAN, VIR, GEM, SAG, TAU, CAP}     All elements in set are distinct and random number</code>"},{"owner":{"account_id":18771646,"reputation":19,"user_id":13688338,"display_name":"Ming Liang"},"score":0,"creation_date":1665917902,"post_id":74086337,"comment_id":130807046,"body_markdown":"user16320675, yes I want to directly use `description` instead of `zodiacType.name()` but I can&#39;t in this case.","body":"user16320675, yes I want to directly use <code>description</code> instead of <code>zodiacType.name()</code> but I can&#39;t in this case."}],"answers":[{"comments":[{"owner":{"account_id":18771646,"reputation":19,"user_id":13688338,"display_name":"Ming Liang"},"score":0,"creation_date":1665917790,"post_id":74086410,"comment_id":130807022,"body_markdown":"This is the format that I want: `Notation in enum format\nA = {Gemini, Libra, Cancer, Pisces, Scorpio, Aries, Virgo}\n......................................................` but the thing I should take it from the constructor in enum which is the ZodiacInfo description attribute.","body":"This is the format that I want: <code>Notation in enum format A = {Gemini, Libra, Cancer, Pisces, Scorpio, Aries, Virgo} ......................................................</code> but the thing I should take it from the constructor in enum which is the ZodiacInfo description attribute."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1665918193,"post_id":74086410,"comment_id":130807100,"body_markdown":"@MingLiang You want to use `description` instead of `Enum.name()`, is that correct? If yes, can you provide your `ZodiacInfo` enum in the question?","body":"@MingLiang You want to use <code>description</code> instead of <code>Enum.name()</code>, is that correct? If yes, can you provide your <code>ZodiacInfo</code> enum in the question?"},{"owner":{"account_id":18771646,"reputation":19,"user_id":13688338,"display_name":"Ming Liang"},"score":0,"creation_date":1665919355,"post_id":74086410,"comment_id":130807318,"body_markdown":"okie I already provide my `ZodiacInfo` in my question, thanks for giving the solution.","body":"okie I already provide my <code>ZodiacInfo</code> in my question, thanks for giving the solution."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1665919981,"post_id":74086410,"comment_id":130807434,"body_markdown":"@MingLiang But I still don&#39;t see the code of the in your question `ZodiacInfo`. Note, that enum names like `ZodiacInfo.Aries` are unconventional. The name that compliant with the [Java naming convention](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html) would be `ZodiacInfo.ARIES`","body":"@MingLiang But I still don&#39;t see the code of the in your question <code>ZodiacInfo</code>. Note, that enum names like <code>ZodiacInfo.Aries</code> are unconventional. The name that compliant with the <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java naming convention</a> would be <code>ZodiacInfo.ARIES</code>"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1665920248,"post_id":74086410,"comment_id":130807486,"body_markdown":"@MingLiang If for some reason you don&#39;t want the name to adhere to the convention and keep it like `Aries`, `Virgo`, then you don&#39;t need the logic for capitalizing the name. In the code above, you can directly use the name of a `ZodiacInfo` constant `strings.add(zodiacType.description().name());`","body":"@MingLiang If for some reason you don&#39;t want the name to adhere to the convention and keep it like <code>Aries</code>, <code>Virgo</code>, then you don&#39;t need the logic for capitalizing the name. In the code above, you can directly use the name of a <code>ZodiacInfo</code> constant <code>strings.add(zodiacType.description().name());</code>"}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665921136,"creation_date":1665917033,"answer_id":74086410,"question_id":74086337,"body_markdown":"You can achieve the required string representation by using [`StringJoiner`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/StringJoiner.html).\r\n\r\nOne of its constructors allows specifying the *delimiter*, as well as the *prefix* and the *suffix* which would be used in the joined string.\r\n\r\nMethod [`StringJoiner.add()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/StringJoiner.html#add(java.lang.CharSequence)) is used to add a new string to `StringJoiner`. And method [`StringJoiner.toString()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/StringJoiner.html#toString()) generates the resulting string.\r\n\r\nAssuming that members `ZodiacInfo` have converntional **upper-case** names (ARIES, VIRGO, etc.), you can use the following code to join capitalized descriptions together:\r\n\r\n    public String getStringZodiacInfoFormat() {\r\n        \r\n        StringJoiner strings = new StringJoiner(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;);\r\n        \r\n        for (ZodiacType zodiacType: s) {\r\n            \r\n            String type = zodiacType.description().name();\r\n            strings.add(type.charAt(0) + type.substring(1).toLowerCase());\r\n        }\r\n        return strings.toString();\r\n    }\r\n\r\n**Note:** the cleaner approach would be to place the logic for creating capitalized `ZodiacInfo` name into the `toString()` implementation of the `ZodiacType` enum, or if you want to display dates in the `toString()` as well, then introduce a separate method, let&#39;s say `getZodiacName()`.\r\n\r\nThat&#39;s how such method might look like:\r\n\r\n    public enum ZodiacType {\r\n        // enum-members, etc.\r\n        \r\n        public String getZodiacName() {\r\n            String type = description.name();\r\n            return type.charAt(0) + type.substring(1).toLowerCase();\r\n        }\r\n    }\r\n_____________________________________________________\r\n\r\nJudging by your code, the names of `ZodiacInfo` members are not aligned with the [Java naming convention](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html) (i.e. `ZodiacInfo.Aries` instead of recommended `ZodiacInfo.ARIES`).\r\n\r\nIf for some reason you want to keep them like that (`Aries`, `Virgo`), then you don&#39;t need the logic for capitalizing the name.\r\n\r\nAnd the method `getStringZodiacInfoFormat()` can be written like this:\r\n\r\n    public String getStringZodiacInfoFormat() {\r\n        \r\n        StringJoiner strings = new StringJoiner(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;);\r\n        \r\n        for (ZodiacType zodiacType: s) {\r\n            \r\n            strings.add(zodiacType.description().name());\r\n        }\r\n        return strings.toString();\r\n    }","title":"How can I format the names of enum-constants from ZodiacInfo inside another enum?","body":"<p>You can achieve the required string representation by using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/StringJoiner.html\" rel=\"nofollow noreferrer\"><code>StringJoiner</code></a>.</p>\n<p>One of its constructors allows specifying the <em>delimiter</em>, as well as the <em>prefix</em> and the <em>suffix</em> which would be used in the joined string.</p>\n<p>Method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/StringJoiner.html#add(java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>StringJoiner.add()</code></a> is used to add a new string to <code>StringJoiner</code>. And method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/StringJoiner.html#toString()\" rel=\"nofollow noreferrer\"><code>StringJoiner.toString()</code></a> generates the resulting string.</p>\n<p>Assuming that members <code>ZodiacInfo</code> have converntional <strong>upper-case</strong> names (ARIES, VIRGO, etc.), you can use the following code to join capitalized descriptions together:</p>\n<pre><code>public String getStringZodiacInfoFormat() {\n    \n    StringJoiner strings = new StringJoiner(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;);\n    \n    for (ZodiacType zodiacType: s) {\n        \n        String type = zodiacType.description().name();\n        strings.add(type.charAt(0) + type.substring(1).toLowerCase());\n    }\n    return strings.toString();\n}\n</code></pre>\n<p><strong>Note:</strong> the cleaner approach would be to place the logic for creating capitalized <code>ZodiacInfo</code> name into the <code>toString()</code> implementation of the <code>ZodiacType</code> enum, or if you want to display dates in the <code>toString()</code> as well, then introduce a separate method, let's say <code>getZodiacName()</code>.</p>\n<p>That's how such method might look like:</p>\n<pre><code>public enum ZodiacType {\n    // enum-members, etc.\n    \n    public String getZodiacName() {\n        String type = description.name();\n        return type.charAt(0) + type.substring(1).toLowerCase();\n    }\n}\n</code></pre>\n<hr />\n<p>Judging by your code, the names of <code>ZodiacInfo</code> members are not aligned with the <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java naming convention</a> (i.e. <code>ZodiacInfo.Aries</code> instead of recommended <code>ZodiacInfo.ARIES</code>).</p>\n<p>If for some reason you want to keep them like that (<code>Aries</code>, <code>Virgo</code>), then you don't need the logic for capitalizing the name.</p>\n<p>And the method <code>getStringZodiacInfoFormat()</code> can be written like this:</p>\n<pre><code>public String getStringZodiacInfoFormat() {\n    \n    StringJoiner strings = new StringJoiner(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;);\n    \n    for (ZodiacType zodiacType: s) {\n        \n        strings.add(zodiacType.description().name());\n    }\n    return strings.toString();\n}\n</code></pre>\n"}],"owner":{"account_id":18771646,"reputation":19,"user_id":13688338,"display_name":"Ming Liang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665948828,"creation_date":1665916424,"question_id":74086337,"body_markdown":"My program has an enum which contains a constructor.\r\n\r\n    public enum ZodiacType {\r\n        ARI(ZodiacInfo.Aries, &quot;March 21&quot;, &quot;April 19&quot;),\r\n        TAU(ZodiacInfo.Taurus, &quot;April 20&quot;, &quot;May 20&quot;),\r\n        GEM(ZodiacInfo.Gemini, &quot;May 21&quot;, &quot;June 20&quot;),\r\n        CAN(ZodiacInfo.Cancer, &quot;June 21&quot;, &quot;July 22&quot;),\r\n        LEO(ZodiacInfo.Leo, &quot;July 23&quot;, &quot;August 22&quot;),\r\n        VIR(ZodiacInfo.Virgo, &quot;August 23&quot;, &quot;September 22&quot;),\r\n        LIB(ZodiacInfo.Libra, &quot;September 23&quot;, &quot;October 22&quot;),\r\n        SCO(ZodiacInfo.Scorpio, &quot;October 23&quot;, &quot;November 21&quot;),\r\n        SAG(ZodiacInfo.Sagittarius, &quot;November 22&quot;, &quot;December 21&quot;),\r\n        CAP(ZodiacInfo.Capricorn, &quot;December 22&quot;, &quot;January 19&quot;),\r\n        AQU(ZodiacInfo.Aquarius, &quot;January 20&quot;, &quot;February 18&quot;),\r\n        PIS(ZodiacInfo.Pisces, &quot;February 19&quot;, &quot;March 20&quot;);\r\n\r\n        private final ZodiacInfo description;\r\n        private final String startDate;\r\n        private final String toDate;\r\n    \r\n        ZodiacType(ZodiacInfo description, String startDate, String toDate) {\r\n            this.description = description;\r\n            this.startDate = startDate;\r\n            this.toDate = toDate;\r\n        }\r\n    }\r\n\r\nHere is my output currently that I made thanks to the past solutions.\r\n\r\nHere is an example of a Set:\r\n```\r\nA = {LEO, CAN, VIR, GEM, SAG, TAU, CAP}\r\n// All elements in set are distinct and random number\r\n```\r\nMy custom class `Set`:\r\n\r\n    public class Set {\r\n        private ArrayList&lt;ZodiacType&gt; s;\r\n    \r\n        public Set() {\r\n            s = new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;A = {%s}&quot;,\r\n                s.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;));\r\n        }\r\n    }\r\n    \r\nHere is the method that I developed.\r\n\r\n    public String getStringZodiacInfoFormat() {\r\n        // not correct to put arrayList\r\n        ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;();\r\n        for (ZodiacType zodiacType: s) {\r\n            strings.add(zodiacType.name());\r\n        }\r\n        return String.format(&quot;A = {%s}&quot;,\r\n                strings.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;))\r\n    }\r\nThe question is I can&#39;t convert it and the result is:\r\n\r\n    Notation in enum format\r\n\tA = {GEM, LIB, CAN, PIS, SCO, ARI, VIR}\r\n    ......................................................\r\nInstead of this:\r\n\r\n    Notation in enum format\r\n    A = {Gemini, Libra, Cancer, Pisces, Scorpio, Aries, Virgo}\r\n    ......................................................\r\nI can learn new things from any given solutions. Thank you\r\n","title":"How can I format the names of enum-constants from ZodiacInfo inside another enum?","body":"<p>My program has an enum which contains a constructor.</p>\n<pre><code>public enum ZodiacType {\n    ARI(ZodiacInfo.Aries, &quot;March 21&quot;, &quot;April 19&quot;),\n    TAU(ZodiacInfo.Taurus, &quot;April 20&quot;, &quot;May 20&quot;),\n    GEM(ZodiacInfo.Gemini, &quot;May 21&quot;, &quot;June 20&quot;),\n    CAN(ZodiacInfo.Cancer, &quot;June 21&quot;, &quot;July 22&quot;),\n    LEO(ZodiacInfo.Leo, &quot;July 23&quot;, &quot;August 22&quot;),\n    VIR(ZodiacInfo.Virgo, &quot;August 23&quot;, &quot;September 22&quot;),\n    LIB(ZodiacInfo.Libra, &quot;September 23&quot;, &quot;October 22&quot;),\n    SCO(ZodiacInfo.Scorpio, &quot;October 23&quot;, &quot;November 21&quot;),\n    SAG(ZodiacInfo.Sagittarius, &quot;November 22&quot;, &quot;December 21&quot;),\n    CAP(ZodiacInfo.Capricorn, &quot;December 22&quot;, &quot;January 19&quot;),\n    AQU(ZodiacInfo.Aquarius, &quot;January 20&quot;, &quot;February 18&quot;),\n    PIS(ZodiacInfo.Pisces, &quot;February 19&quot;, &quot;March 20&quot;);\n\n    private final ZodiacInfo description;\n    private final String startDate;\n    private final String toDate;\n\n    ZodiacType(ZodiacInfo description, String startDate, String toDate) {\n        this.description = description;\n        this.startDate = startDate;\n        this.toDate = toDate;\n    }\n}\n</code></pre>\n<p>Here is my output currently that I made thanks to the past solutions.</p>\n<p>Here is an example of a Set:</p>\n<pre><code>A = {LEO, CAN, VIR, GEM, SAG, TAU, CAP}\n// All elements in set are distinct and random number\n</code></pre>\n<p>My custom class <code>Set</code>:</p>\n<pre><code>public class Set {\n    private ArrayList&lt;ZodiacType&gt; s;\n\n    public Set() {\n        s = new ArrayList&lt;&gt;();\n    }\n\n    @Override\n    public String toString() {\n        return String.format(&quot;A = {%s}&quot;,\n            s.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;));\n    }\n}\n</code></pre>\n<p>Here is the method that I developed.</p>\n<pre><code>public String getStringZodiacInfoFormat() {\n    // not correct to put arrayList\n    ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;();\n    for (ZodiacType zodiacType: s) {\n        strings.add(zodiacType.name());\n    }\n    return String.format(&quot;A = {%s}&quot;,\n            strings.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;))\n}\n</code></pre>\n<p>The question is I can't convert it and the result is:</p>\n<pre><code>Notation in enum format\nA = {GEM, LIB, CAN, PIS, SCO, ARI, VIR}\n......................................................\n</code></pre>\n<p>Instead of this:</p>\n<pre><code>Notation in enum format\nA = {Gemini, Libra, Cancer, Pisces, Scorpio, Aries, Virgo}\n......................................................\n</code></pre>\n<p>I can learn new things from any given solutions. Thank you</p>\n"},{"tags":["java","jls"],"comments":[{"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"score":0,"creation_date":1537808564,"post_id":52484048,"comment_id":91909729,"body_markdown":"@Thomas It is a theoretical use case. Java allows to have multiple labels of a loop but there is an inconsistency in handling those multiple labels by `continue` and `brake` statements.","body":"@Thomas It is a theoretical use case. Java allows to have multiple labels of a loop but there is an inconsistency in handling those multiple labels by <code>continue</code> and <code>brake</code> statements."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1537808613,"post_id":52484048,"comment_id":91909750,"body_markdown":"Just reread the [specification](https://docs.oracle.com/javase/specs/jls/se10/html/jls-14.html#jls-14.7): it defines &quot;LabeledStatement&quot; as &quot;label: statement&quot; where &quot;statement&quot; can be a &quot;LabeledStatement&quot; and thus &quot;labelA: labelB: statment&quot; _should_ be allowed (albeit it doesn&#39;t make much sense and I might miss something). Just to be complete: a label is _not_ a statement in itself but can be part of one.","body":"Just reread the <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-14.html#jls-14.7\" rel=\"nofollow noreferrer\">specification</a>: it defines &quot;LabeledStatement&quot; as &quot;label: statement&quot; where &quot;statement&quot; can be a &quot;LabeledStatement&quot; and thus &quot;labelA: labelB: statment&quot; <i>should</i> be allowed (albeit it doesn&#39;t make much sense and I might miss something). Just to be complete: a label is <i>not</i> a statement in itself but can be part of one."}],"answers":[{"comments":[{"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"score":0,"creation_date":1537810174,"post_id":52484303,"comment_id":91910494,"body_markdown":"How you&#39;ve got to a conclusion that labeled while/do/for statement isn&#39;t a while/do/for statement? Where JLS defines it so? And why it isn&#39;t a problem with `brake`?","body":"How you&#39;ve got to a conclusion that labeled while/do/for statement isn&#39;t a while/do/for statement? Where JLS defines it so? And why it isn&#39;t a problem with <code>brake</code>?"},{"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"score":1,"creation_date":1537810693,"post_id":52484303,"comment_id":91910721,"body_markdown":"I&#39;ve added an explanation for `break`.  Also, apparently a &quot;wdf&quot; statement inside of a labeled statement is still just a labeled statement.  There is no provision for a &quot;wdf&quot; statement being inside a labeled statement.  If it needs to refer to me, then it can&#39;t refer to my house, even if I&#39;m inside my house.","body":"I&#39;ve added an explanation for <code>break</code>.  Also, apparently a &quot;wdf&quot; statement inside of a labeled statement is still just a labeled statement.  There is no provision for a &quot;wdf&quot; statement being inside a labeled statement.  If it needs to refer to me, then it can&#39;t refer to my house, even if I&#39;m inside my house."}],"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1537810619,"creation_date":1537809216,"answer_id":52484303,"question_id":52484048,"body_markdown":"The [JLS, Section 14.16][1], talks about the `continue` statement:\n\n&gt; The continue target must be a `while`, `do`, or `for` statement, or a compile-time error occurs.\n\nSimple enough, but let&#39;s look at the grammar for a labeled statement ([Section 14.7][2]).\n\n&gt; LabeledStatement:\n&gt;\n&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Identifier : Statement\n\nIt can contain another statements in general, which in turn may be a `while`, `do`, or `for` (&quot;wdf&quot;) statement, or another labeled statement (Section 14.5) (or other kinds of statements).\n\nBut the label by itself is not a statement; it needs the other statement as part of itself.\n\nNext, nested labeled statements _are_ allowed, so in general you can do something like:\n\n    A: B: yourStatementHere;\n\nYou can nest it further if you want:\n\n    A: B: C: D: E: F: G: yourStatementHere;\n\nHowever, with \n\n    A: B: while (true) continue A;\n\nThe statement that `A:` labels is _another_ labeled statement, not a &quot;wdf&quot; statement, even if the `B:` labeled statement itself _contains_ a `while` statement.\n\nIf you put on your lawyer hat, you can argue that the sentence above about the `continue` statement needing to refer to a &quot;wdf&quot; statement says nothing about the &quot;wdf&quot; statement being nested in a labeled statement, so it should be a compiler error.  \n\nThat seems very picky to me; perhaps the JLS should have had a clause indicating that the &quot;wdf&quot; statement could be itself nested in a labeled statement.\n\nBut until that happens, this appears to be a correct, if unintended, consequence of the wording the JLS provides, quoted above.\n\n**So why is `break` allowed to do this?**\n\n    A: B: while (true) break A;  // no error\n\nThere is no corresponding line in Section 14.15 of the JLS, which talks about the `break` statement, that enforces that the target of a `break` statement must be a &quot;wdf&quot; statement.  A `break` statement must still be within a &quot;wdf&quot; statement (or a `switch` statement), but there is no corresponding requirement that its label refer to a specific kind of statement.\n\n[1]: https://docs.oracle.com/javase/specs/jls/se10/html/jls-14.html#jls-14.16\n[2]: https://docs.oracle.com/javase/specs/jls/se10/html/jls-14.html#jls-14.7","title":"Is a label a Java statement or not?","body":"<p>The <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-14.html#jls-14.16\" rel=\"nofollow noreferrer\">JLS, Section 14.16</a>, talks about the <code>continue</code> statement:</p>\n<blockquote>\n<p>The continue target must be a <code>while</code>, <code>do</code>, or <code>for</code> statement, or a compile-time error occurs.</p>\n</blockquote>\n<p>Simple enough, but let's look at the grammar for a labeled statement (<a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-14.html#jls-14.7\" rel=\"nofollow noreferrer\">Section 14.7</a>).</p>\n<blockquote>\n<p>LabeledStatement:</p>\n<p>    Identifier : Statement</p>\n</blockquote>\n<p>It can contain another statements in general, which in turn may be a <code>while</code>, <code>do</code>, or <code>for</code> (&quot;wdf&quot;) statement, or another labeled statement (Section 14.5) (or other kinds of statements).</p>\n<p>But the label by itself is not a statement; it needs the other statement as part of itself.</p>\n<p>Next, nested labeled statements <em>are</em> allowed, so in general you can do something like:</p>\n<pre><code>A: B: yourStatementHere;\n</code></pre>\n<p>You can nest it further if you want:</p>\n<pre><code>A: B: C: D: E: F: G: yourStatementHere;\n</code></pre>\n<p>However, with</p>\n<pre><code>A: B: while (true) continue A;\n</code></pre>\n<p>The statement that <code>A:</code> labels is <em>another</em> labeled statement, not a &quot;wdf&quot; statement, even if the <code>B:</code> labeled statement itself <em>contains</em> a <code>while</code> statement.</p>\n<p>If you put on your lawyer hat, you can argue that the sentence above about the <code>continue</code> statement needing to refer to a &quot;wdf&quot; statement says nothing about the &quot;wdf&quot; statement being nested in a labeled statement, so it should be a compiler error.</p>\n<p>That seems very picky to me; perhaps the JLS should have had a clause indicating that the &quot;wdf&quot; statement could be itself nested in a labeled statement.</p>\n<p>But until that happens, this appears to be a correct, if unintended, consequence of the wording the JLS provides, quoted above.</p>\n<p><strong>So why is <code>break</code> allowed to do this?</strong></p>\n<pre><code>A: B: while (true) break A;  // no error\n</code></pre>\n<p>There is no corresponding line in Section 14.15 of the JLS, which talks about the <code>break</code> statement, that enforces that the target of a <code>break</code> statement must be a &quot;wdf&quot; statement.  A <code>break</code> statement must still be within a &quot;wdf&quot; statement (or a <code>switch</code> statement), but there is no corresponding requirement that its label refer to a specific kind of statement.</p>\n"},{"comments":[{"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"score":0,"creation_date":1537809761,"post_id":52484310,"comment_id":91910318,"body_markdown":"I repeat my additional question. Isn&#39;t **labeled** while/do/for statement in Java a while/do/for statement?","body":"I repeat my additional question. Isn&#39;t <b>labeled</b> while/do/for statement in Java a while/do/for statement?"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1537809978,"post_id":52484310,"comment_id":91910422,"body_markdown":"@RostislavKrasny no, why would it? A labeled statement is a labeled statement, a labeled loop is a labeled loop.","body":"@RostislavKrasny no, why would it? A labeled statement is a labeled statement, a labeled loop is a labeled loop."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1537809980,"post_id":52484310,"comment_id":91910423,"body_markdown":"@RostislavKrasny No, a labeled while/do/for statement is not a while/do/for statement.","body":"@RostislavKrasny No, a labeled while/do/for statement is not a while/do/for statement."},{"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"score":0,"creation_date":1537810312,"post_id":52484310,"comment_id":91910558,"body_markdown":"@luk2302 Are you trying to say that labeled loop isn&#39;t a loop? A named cat isn&#39;t a cat? :-)","body":"@luk2302 Are you trying to say that labeled loop isn&#39;t a loop? A named cat isn&#39;t a cat? :-)"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1537810584,"post_id":52484310,"comment_id":91910677,"body_markdown":"@RostislavKrasny in language specification / grammar terms: yes, a &quot;named cat&quot; is not a &quot;cat&quot;, it is a &quot;named&quot;.","body":"@RostislavKrasny in language specification / grammar terms: yes, a &quot;named cat&quot; is not a &quot;cat&quot;, it is a &quot;named&quot;."},{"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"score":0,"creation_date":1537810963,"post_id":52484310,"comment_id":91910814,"body_markdown":"@luk2302 then a label is a statement and a &quot;named&quot; is an animal, aren&#39;t they? But wait, a label itself isn&#39;t a statement but an identifier, right? Where JLS allows a labeled statement to be used with `brake`?","body":"@luk2302 then a label is a statement and a &quot;named&quot; is an animal, aren&#39;t they? But wait, a label itself isn&#39;t a statement but an identifier, right? Where JLS allows a labeled statement to be used with <code>brake</code>?"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1537811358,"post_id":52484310,"comment_id":91910977,"body_markdown":"@RostislavKrasny you need to get clear about what words you use, what exact sequence of letters is the thing you call &quot;label&quot;? In `l: if(...) { ... }` the entire thing is a Statement, and in this case it even is a LabeledStatement with the `if ...` part being a nested Statement, `l` is an Idetifier labeling the `if` statement. Your last question does not make sense because `break` does not &quot;use&quot; a &quot;labeled statement&quot;, [the expansion rule is `break Identifier(opt)`](https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15)","body":"@RostislavKrasny you need to get clear about what words you use, what exact sequence of letters is the thing you call &quot;label&quot;? In <code>l: if(...) { ... }</code> the entire thing is a Statement, and in this case it even is a LabeledStatement with the <code>if ...</code> part being a nested Statement, <code>l</code> is an Idetifier labeling the <code>if</code> statement. Your last question does not make sense because <code>break</code> does not &quot;use&quot; a &quot;labeled statement&quot;, <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15\" rel=\"nofollow noreferrer\">the expansion rule is <code>break Identifier(opt)</code></a>"}],"tags":[],"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"comment_count":7,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1665947947,"creation_date":1537809263,"answer_id":52484310,"question_id":52484048,"body_markdown":"Following the [JLS](https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.5) a `Statement` can be\r\n\r\n    StatementWithoutTrailingSubstatement\r\n    LabeledStatement\r\n    IfThenStatement\r\n    IfThenElseStatement\r\n    WhileStatement\r\n    ForStatement\r\n\r\nwith `LabeledStatement` being\r\n\r\n    Identifier : Statement\r\n\r\nand stated\r\n\r\n&gt;The Identifier is declared to be the label of the immediately contained Statement\r\n\r\nso in case of a loop like\r\n\r\n    public void method() {\r\n        loop1: loop2: while (true) {\r\n            if (true) {\r\n                break loop1;\r\n            } else {\r\n                continue loop1;\r\n            }\r\n        }\r\n    }\r\n\r\nthe `Statement` of the `Label` `loop1` is the entire `loop2 ...` stuff.\r\n\r\nAnd if we look at the definition of `break` it is stated that \r\n\r\n&gt;the break target need not be a switch, while, do, or for statement.\r\n\r\nwhereas for the `continue` it states\r\n\r\n&gt;The continue target must be a while, do, or for statement, or a compile-time error occurs.\r\n\r\nThese definitions are properly in line with the compiler giving a compiler error for the `continue loop1` statement and letting `break loop1` be valid since `loop2: ...` is **not** a *&quot;while, do, or for statement&quot;*.\r\n\r\n---\r\n\r\nRegarding your actual question: *Is label a Java statement or not?* \r\n\r\nThe following code is perfectly legal and compiles fine\r\n\r\n    public void method() {\r\n        loop:;\r\n    }\r\n\r\nThis follows the expansion of `Statement` -&gt; `LabeledStatement` -&gt; `Identifier` : `Statement` -&gt; loop : `Statement` -&gt; loop : `StatementWithoutTrailingSubstatement` -&gt; loop : `EmptyStatement` -&gt;\r\n\r\n    loop : ;\r\n\r\nNo, a label is no statement by itself, an identifier (which is then called &quot;label&quot;) plus a column plus an `EmptyStatement` (`;`) however is.\r\n\r\n---\r\n\r\n*Isn&#39;t labeled while/do/for statement in Java a while/do/for statement?*\r\n\r\n**No!**  \r\n\r\nA `LabeledStatement` is exactly that: a `LabeledStatement`. A labeled while is `Statement -&gt; Label -&gt; Identifier : Statement -&gt; Identifier : WhileStatement` which is something fundamentally different than `Statement -&gt; WhileStatement`!","title":"Is a label a Java statement or not?","body":"<p>Following the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.5\" rel=\"nofollow noreferrer\">JLS</a> a <code>Statement</code> can be</p>\n<pre><code>StatementWithoutTrailingSubstatement\nLabeledStatement\nIfThenStatement\nIfThenElseStatement\nWhileStatement\nForStatement\n</code></pre>\n<p>with <code>LabeledStatement</code> being</p>\n<pre><code>Identifier : Statement\n</code></pre>\n<p>and stated</p>\n<blockquote>\n<p>The Identifier is declared to be the label of the immediately contained Statement</p>\n</blockquote>\n<p>so in case of a loop like</p>\n<pre><code>public void method() {\n    loop1: loop2: while (true) {\n        if (true) {\n            break loop1;\n        } else {\n            continue loop1;\n        }\n    }\n}\n</code></pre>\n<p>the <code>Statement</code> of the <code>Label</code> <code>loop1</code> is the entire <code>loop2 ...</code> stuff.</p>\n<p>And if we look at the definition of <code>break</code> it is stated that</p>\n<blockquote>\n<p>the break target need not be a switch, while, do, or for statement.</p>\n</blockquote>\n<p>whereas for the <code>continue</code> it states</p>\n<blockquote>\n<p>The continue target must be a while, do, or for statement, or a compile-time error occurs.</p>\n</blockquote>\n<p>These definitions are properly in line with the compiler giving a compiler error for the <code>continue loop1</code> statement and letting <code>break loop1</code> be valid since <code>loop2: ...</code> is <strong>not</strong> a <em>&quot;while, do, or for statement&quot;</em>.</p>\n<hr />\n<p>Regarding your actual question: <em>Is label a Java statement or not?</em></p>\n<p>The following code is perfectly legal and compiles fine</p>\n<pre><code>public void method() {\n    loop:;\n}\n</code></pre>\n<p>This follows the expansion of <code>Statement</code> -&gt; <code>LabeledStatement</code> -&gt; <code>Identifier</code> : <code>Statement</code> -&gt; loop : <code>Statement</code> -&gt; loop : <code>StatementWithoutTrailingSubstatement</code> -&gt; loop : <code>EmptyStatement</code> -&gt;</p>\n<pre><code>loop : ;\n</code></pre>\n<p>No, a label is no statement by itself, an identifier (which is then called &quot;label&quot;) plus a column plus an <code>EmptyStatement</code> (<code>;</code>) however is.</p>\n<hr />\n<p><em>Isn't labeled while/do/for statement in Java a while/do/for statement?</em></p>\n<p><strong>No!</strong></p>\n<p>A <code>LabeledStatement</code> is exactly that: a <code>LabeledStatement</code>. A labeled while is <code>Statement -&gt; Label -&gt; Identifier : Statement -&gt; Identifier : WhileStatement</code> which is something fundamentally different than <code>Statement -&gt; WhileStatement</code>!</p>\n"}],"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":2,"score":4,"last_activity_date":1665947947,"creation_date":1537808073,"question_id":52484048,"body_markdown":"Is a label a Java statement or not and if a label is a statement where is it defined as a statement in the Java Language Specification?\r\n\r\nMy question relates to the following reply of Jan Lahoda in the bug report that I&#39;ve sent to Oracle. I&#39;m unable to discuss it there because I can&#39;t get an account in the OpenJDK Jira.\r\n\r\nhttps://bugs.openjdk.java.net/browse/JDK-8211052\r\n&gt; In case of e.g.:\r\n`A: B: while (true) continue A;` the statement on which the &quot;continue&quot; is applied is not &quot;`while (true) continue A;`&quot;, but &quot;`B: while (true) continue A;`&quot;, and the spec requires the target for continue is a while/do/for statement, which is not fulfilled here. Hence the compile-time error.\r\n\r\nI think a label in Java is not a statement and in Jan&#39;s example both the `A` and the `B` labels relate to the same while-loop statement and then no compile time error should be triggered.\r\n\r\n**Addition:**\r\n\r\nIsn&#39;t a **labeled** while/do/for statement in Java a while/do/for statement?","title":"Is a label a Java statement or not?","body":"<p>Is a label a Java statement or not and if a label is a statement where is it defined as a statement in the Java Language Specification?</p>\n\n<p>My question relates to the following reply of Jan Lahoda in the bug report that I've sent to Oracle. I'm unable to discuss it there because I can't get an account in the OpenJDK Jira.</p>\n\n<p><a href=\"https://bugs.openjdk.java.net/browse/JDK-8211052\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8211052</a></p>\n\n<blockquote>\n  <p>In case of e.g.:\n  <code>A: B: while (true) continue A;</code> the statement on which the \"continue\" is applied is not \"<code>while (true) continue A;</code>\", but \"<code>B: while (true) continue A;</code>\", and the spec requires the target for continue is a while/do/for statement, which is not fulfilled here. Hence the compile-time error.</p>\n</blockquote>\n\n<p>I think a label in Java is not a statement and in Jan's example both the <code>A</code> and the <code>B</code> labels relate to the same while-loop statement and then no compile time error should be triggered.</p>\n\n<p><strong>Addition:</strong></p>\n\n<p>Isn't a <strong>labeled</strong> while/do/for statement in Java a while/do/for statement?</p>\n"},{"tags":["java","spring","spring-boot","algorithm","reactive-programming"],"answers":[{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665944618,"creation_date":1665942970,"answer_id":74089485,"question_id":74089067,"body_markdown":"First, build the model, automatic here https://codebeautify.org/json-to-java-converter.\r\n\r\nThen read data with the model\r\n\r\n    .bodyToMono(MyData.class)\r\n\r\nThen decide how you want evaluate the requirement `find the first true value under security, address, account and mobile`.\r\n\r\nWhat means &quot;first&quot; ? JSON has no natural order without indicating explicity (e.g. field &quot;order&quot;: 2).\r\n\r\nN.B. &quot;true&quot;, &quot;false&quot; of the response are Strings, not booleans. \r\n\r\nOnce you have the model with data, you may do:\r\n\r\n    Object firstTrue(GeneralDetails gd)  {\r\n        // No null checks here\r\n        if (&quot;true&quot;.equals(gd.getSecurtity().isLockedAccount())) return gd.getSecurtity();\r\n        if (&quot;true&quot;.equals(gd.getAddress().isAddressExists())) return gd.getAddress();\r\n        if (&quot;true&quot;.equals(gd.getAccount().isAccountExists()) || &quot;true&quot;.equals(gd.getAccount().isAccountValid())) return gd.getAccount();\r\n        if (&quot;true&quot;.equals(gd.getMobile().isMobileExists())) return gd.getMobile();\r\n\r\n        return null;\r\n    }","title":"Deeply nested JSON response from third party","body":"<p>First, build the model, automatic here <a href=\"https://codebeautify.org/json-to-java-converter\" rel=\"nofollow noreferrer\">https://codebeautify.org/json-to-java-converter</a>.</p>\n<p>Then read data with the model</p>\n<pre><code>.bodyToMono(MyData.class)\n</code></pre>\n<p>Then decide how you want evaluate the requirement <code>find the first true value under security, address, account and mobile</code>.</p>\n<p>What means &quot;first&quot; ? JSON has no natural order without indicating explicity (e.g. field &quot;order&quot;: 2).</p>\n<p>N.B. &quot;true&quot;, &quot;false&quot; of the response are Strings, not booleans.</p>\n<p>Once you have the model with data, you may do:</p>\n<pre><code>Object firstTrue(GeneralDetails gd)  {\n    // No null checks here\n    if (&quot;true&quot;.equals(gd.getSecurtity().isLockedAccount())) return gd.getSecurtity();\n    if (&quot;true&quot;.equals(gd.getAddress().isAddressExists())) return gd.getAddress();\n    if (&quot;true&quot;.equals(gd.getAccount().isAccountExists()) || &quot;true&quot;.equals(gd.getAccount().isAccountValid())) return gd.getAccount();\n    if (&quot;true&quot;.equals(gd.getMobile().isMobileExists())) return gd.getMobile();\n\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665947816,"creation_date":1665947480,"answer_id":74090011,"question_id":74089067,"body_markdown":"https://github.com/octomix/josson\r\n\r\nDeserialization\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;info_code\\&quot;: \\&quot;201\\&quot;,&quot; +\r\n        &quot;    \\&quot;info_description\\&quot;: \\&quot;info description\\&quot;,&quot; +\r\n        &quot;    \\&quot;data\\&quot;: {&quot; +\r\n        &quot;        \\&quot;status\\&quot;: \\&quot;here goes the status\\&quot;,&quot; +\r\n        &quot;        \\&quot;failure_data\\&quot;: {&quot; +\r\n        &quot;            \\&quot;source\\&quot;: \\&quot;anySource\\&quot;,&quot; +\r\n        &quot;            \\&quot;details\\&quot;: {&quot; +\r\n        &quot;                \\&quot;data\\&quot;: {&quot; +\r\n        &quot;                    \\&quot;server_response\\&quot;: {&quot; +\r\n        &quot;                        \\&quot;generalDetails\\&quot;: {&quot; +\r\n        &quot;                            \\&quot;security\\&quot;: {&quot; +\r\n        &quot;                                \\&quot;isAccountLocked\\&quot;: \\&quot;false\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            \\&quot;address\\&quot;: {&quot; +\r\n        &quot;                                \\&quot;isAddresExists\\&quot;: \\&quot;true\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            \\&quot;account\\&quot;: {&quot; +\r\n        &quot;                                \\&quot;accountExists\\&quot;: \\&quot;true\\&quot;,&quot; +\r\n        &quot;                                \\&quot;isValidAccount\\&quot;: \\&quot;true\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            \\&quot;mobile\\&quot;: {&quot; +\r\n        &quot;                                \\&quot;mobileExists\\&quot;: \\&quot;true\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        }&quot; +\r\n        &quot;                    }&quot; +\r\n        &quot;                }&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;}&quot;);\r\n\r\nQuery\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;data.failure_data.details.data.server_response&quot; +\r\n        &quot;.generalDetails.**.mergeObjects().assort().[*]&quot;);\r\n    System.out.println(node.toPrettyString());\r\n    \r\nOutput\r\n\r\n    {\r\n      &quot;isAddresExists&quot; : &quot;true&quot;\r\n    }\r\n\r\nIf changed `isAddresExists` and `accountExists` to `false`\r\n\r\n        &quot;                        \\&quot;generalDetails\\&quot;: {&quot; +\r\n        &quot;                            \\&quot;security\\&quot;: {&quot; +\r\n        &quot;                                \\&quot;isAccountLocked\\&quot;: \\&quot;false\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            \\&quot;address\\&quot;: {&quot; +\r\n        &quot;                                \\&quot;isAddresExists\\&quot;: \\&quot;false\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            \\&quot;account\\&quot;: {&quot; +\r\n        &quot;                                \\&quot;accountExists\\&quot;: \\&quot;false\\&quot;,&quot; +\r\n        &quot;                                \\&quot;isValidAccount\\&quot;: \\&quot;true\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            \\&quot;mobile\\&quot;: {&quot; +\r\n        &quot;                                \\&quot;mobileExists\\&quot;: \\&quot;true\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        }&quot; +\r\n\r\nOutput\r\n\r\n    {\r\n      &quot;isValidAccount&quot; : &quot;true&quot;\r\n    }\r\n\r\nIf you only want the key name\r\n\r\n    String firstTureKey = josson.getString(\r\n        &quot;data.failure_data.details.data.server_response&quot; +\r\n        &quot;.generalDetails.**.mergeObjects().assort().[*].keys().[0]&quot;);\r\n    System.out.println(firstTureKey);\r\n\r\nOutput\r\n\r\n    isValidAccount","title":"Deeply nested JSON response from third party","body":"<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p>Deserialization</p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;info_code\\&quot;: \\&quot;201\\&quot;,&quot; +\n    &quot;    \\&quot;info_description\\&quot;: \\&quot;info description\\&quot;,&quot; +\n    &quot;    \\&quot;data\\&quot;: {&quot; +\n    &quot;        \\&quot;status\\&quot;: \\&quot;here goes the status\\&quot;,&quot; +\n    &quot;        \\&quot;failure_data\\&quot;: {&quot; +\n    &quot;            \\&quot;source\\&quot;: \\&quot;anySource\\&quot;,&quot; +\n    &quot;            \\&quot;details\\&quot;: {&quot; +\n    &quot;                \\&quot;data\\&quot;: {&quot; +\n    &quot;                    \\&quot;server_response\\&quot;: {&quot; +\n    &quot;                        \\&quot;generalDetails\\&quot;: {&quot; +\n    &quot;                            \\&quot;security\\&quot;: {&quot; +\n    &quot;                                \\&quot;isAccountLocked\\&quot;: \\&quot;false\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            \\&quot;address\\&quot;: {&quot; +\n    &quot;                                \\&quot;isAddresExists\\&quot;: \\&quot;true\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            \\&quot;account\\&quot;: {&quot; +\n    &quot;                                \\&quot;accountExists\\&quot;: \\&quot;true\\&quot;,&quot; +\n    &quot;                                \\&quot;isValidAccount\\&quot;: \\&quot;true\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            \\&quot;mobile\\&quot;: {&quot; +\n    &quot;                                \\&quot;mobileExists\\&quot;: \\&quot;true\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        }&quot; +\n    &quot;                    }&quot; +\n    &quot;                }&quot; +\n    &quot;            }&quot; +\n    &quot;        }&quot; +\n    &quot;    }&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p>Query</p>\n<pre><code>JsonNode node = josson.getNode(\n    &quot;data.failure_data.details.data.server_response&quot; +\n    &quot;.generalDetails.**.mergeObjects().assort().[*]&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p>Output</p>\n<pre><code>{\n  &quot;isAddresExists&quot; : &quot;true&quot;\n}\n</code></pre>\n<p>If changed <code>isAddresExists</code> and <code>accountExists</code> to <code>false</code></p>\n<pre><code>    &quot;                        \\&quot;generalDetails\\&quot;: {&quot; +\n    &quot;                            \\&quot;security\\&quot;: {&quot; +\n    &quot;                                \\&quot;isAccountLocked\\&quot;: \\&quot;false\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            \\&quot;address\\&quot;: {&quot; +\n    &quot;                                \\&quot;isAddresExists\\&quot;: \\&quot;false\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            \\&quot;account\\&quot;: {&quot; +\n    &quot;                                \\&quot;accountExists\\&quot;: \\&quot;false\\&quot;,&quot; +\n    &quot;                                \\&quot;isValidAccount\\&quot;: \\&quot;true\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            \\&quot;mobile\\&quot;: {&quot; +\n    &quot;                                \\&quot;mobileExists\\&quot;: \\&quot;true\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        }&quot; +\n</code></pre>\n<p>Output</p>\n<pre><code>{\n  &quot;isValidAccount&quot; : &quot;true&quot;\n}\n</code></pre>\n<p>If you only want the key name</p>\n<pre><code>String firstTureKey = josson.getString(\n    &quot;data.failure_data.details.data.server_response&quot; +\n    &quot;.generalDetails.**.mergeObjects().assort().[*].keys().[0]&quot;);\nSystem.out.println(firstTureKey);\n</code></pre>\n<p>Output</p>\n<pre><code>isValidAccount\n</code></pre>\n"}],"owner":{"account_id":5347729,"reputation":727,"user_id":4262784,"display_name":"Andres"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74089485,"answer_count":2,"score":0,"last_activity_date":1665947816,"creation_date":1665939401,"question_id":74089067,"body_markdown":"I&#39;m getting this deeply nested JSON response from an api that I have no control,\r\n\r\nWhat should be the best way to get to &quot;generalDetails&quot; and then find the first true value under security, address, account and mobile?\r\n\r\n```\r\n{\r\n    &quot;info_code&quot;: &quot;201&quot;,\r\n    &quot;info_description&quot;: &quot;info description&quot;,\r\n    &quot;data&quot;: {\r\n        &quot;status&quot;: &quot;here goes the status&quot;,\r\n        &quot;failure_data&quot;: {\r\n            &quot;source&quot;: &quot;anySource&quot;,\r\n            &quot;details&quot;: {\r\n                &quot;data&quot;: {\r\n                    &quot;server_response&quot;: {\r\n                        &quot;generalDetails&quot;: {\r\n                            &quot;security&quot;: {\r\n                                &quot;isAccountLocked&quot;: &quot;false&quot;\r\n                            },\r\n                            &quot;address&quot;: {\r\n                                &quot;isAddresExists&quot;: &quot;true&quot;\r\n                            },\r\n                            &quot;account&quot;: {\r\n                                &quot;accountExists&quot;: &quot;true&quot;,\r\n                                &quot;isValidAccount&quot;: &quot;true&quot;\r\n                            },\r\n                            &quot;mobile&quot;: {\r\n                                &quot;mobileExists&quot;: &quot;true&quot;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nMy request looks like:\r\n\r\n```\r\n@Autowired\r\nprivate WebClient.Builder webClientBuilder;\r\n\r\n\r\nString resp = webClientBuilder.build().get().uri(URL)\r\n                    .accept(MediaType.APPLICATION_JSON)\r\n                    .retrieve()\r\n                    .bodyToMono(String.class).block();\r\n\r\n```","title":"Deeply nested JSON response from third party","body":"<p>I'm getting this deeply nested JSON response from an api that I have no control,</p>\n<p>What should be the best way to get to &quot;generalDetails&quot; and then find the first true value under security, address, account and mobile?</p>\n<pre><code>{\n    &quot;info_code&quot;: &quot;201&quot;,\n    &quot;info_description&quot;: &quot;info description&quot;,\n    &quot;data&quot;: {\n        &quot;status&quot;: &quot;here goes the status&quot;,\n        &quot;failure_data&quot;: {\n            &quot;source&quot;: &quot;anySource&quot;,\n            &quot;details&quot;: {\n                &quot;data&quot;: {\n                    &quot;server_response&quot;: {\n                        &quot;generalDetails&quot;: {\n                            &quot;security&quot;: {\n                                &quot;isAccountLocked&quot;: &quot;false&quot;\n                            },\n                            &quot;address&quot;: {\n                                &quot;isAddresExists&quot;: &quot;true&quot;\n                            },\n                            &quot;account&quot;: {\n                                &quot;accountExists&quot;: &quot;true&quot;,\n                                &quot;isValidAccount&quot;: &quot;true&quot;\n                            },\n                            &quot;mobile&quot;: {\n                                &quot;mobileExists&quot;: &quot;true&quot;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>My request looks like:</p>\n<pre><code>@Autowired\nprivate WebClient.Builder webClientBuilder;\n\n\nString resp = webClientBuilder.build().get().uri(URL)\n                    .accept(MediaType.APPLICATION_JSON)\n                    .retrieve()\n                    .bodyToMono(String.class).block();\n\n</code></pre>\n"},{"tags":["java","android","object","reference","tinydb"],"answers":[{"comments":[{"owner":{"account_id":13095366,"reputation":129,"user_id":9461437,"display_name":"Hadi Ahmadi"},"score":0,"creation_date":1521268002,"post_id":49333135,"comment_id":85668026,"body_markdown":"not working . error :                                                                               Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.content.SharedPreferences android.content.Context.getSharedPreferences(java.lang.String, int)&#39; on a null object reference","body":"not working . error :                                                                               Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.content.SharedPreferences android.content.Context.getSharedPreferences(java.lang.Strin&zwnj;&#8203;g, int)&#39; on a null object reference"},{"owner":{"account_id":13095366,"reputation":129,"user_id":9461437,"display_name":"Hadi Ahmadi"},"score":0,"creation_date":1521268052,"post_id":49333135,"comment_id":85668033,"body_markdown":"error line in tinydb class : line 51 .line 51 code : &quot;preferences = PreferenceManager.getDefaultSharedPreferences(appContext);\n&quot;","body":"error line in tinydb class : line 51 .line 51 code : &quot;preferences = PreferenceManager.getDefaultSharedPreferences(appContext); &quot;"},{"owner":{"account_id":11771693,"reputation":248,"user_id":8743921,"display_name":"Xay"},"score":0,"creation_date":1521268217,"post_id":49333135,"comment_id":85668060,"body_markdown":"now you are getting N.P.E. on SharedPreference  ..Post Shared Preference code","body":"now you are getting N.P.E. on SharedPreference  ..Post Shared Preference code"},{"owner":{"account_id":13095366,"reputation":129,"user_id":9461437,"display_name":"Hadi Ahmadi"},"score":0,"creation_date":1521268272,"post_id":49333135,"comment_id":85668069,"body_markdown":"TinyDB tinyDB = new TinyDB(Myactivity.this);","body":"TinyDB tinyDB = new TinyDB(Myactivity.this);"},{"owner":{"account_id":13095366,"reputation":129,"user_id":9461437,"display_name":"Hadi Ahmadi"},"score":0,"creation_date":1521268394,"post_id":49333135,"comment_id":85668091,"body_markdown":"i just use this code . &quot;        tinyDB.putInt(&quot;hadi&quot; , 10);\n&quot;","body":"i just use this code . &quot;        tinyDB.putInt(&quot;hadi&quot; , 10); &quot;"},{"owner":{"account_id":11771693,"reputation":248,"user_id":8743921,"display_name":"Xay"},"score":0,"creation_date":1521268588,"post_id":49333135,"comment_id":85668133,"body_markdown":"If you have only that much of code than why this line generating error! preferences = PreferenceManager.getDefaultSharedPreferences(appContext);","body":"If you have only that much of code than why this line generating error! preferences = PreferenceManager.getDefaultSharedPreferences(appContext);"},{"owner":{"account_id":13095366,"reputation":129,"user_id":9461437,"display_name":"Hadi Ahmadi"},"score":0,"creation_date":1521268741,"post_id":49333135,"comment_id":85668165,"body_markdown":"im using tinyDB class . that error is in that class","body":"im using tinyDB class . that error is in that class"},{"owner":{"account_id":13095366,"reputation":129,"user_id":9461437,"display_name":"Hadi Ahmadi"},"score":0,"creation_date":1521268758,"post_id":49333135,"comment_id":85668172,"body_markdown":"this is the hole class http address  : https://github.com/kcochibili/TinyDB--Android-Shared-Preferences-Turbo","body":"this is the hole class http address  : <a href=\"https://github.com/kcochibili/TinyDB--Android-Shared-Preferences-Turbo\" rel=\"nofollow noreferrer\">github.com/kcochibili/TinyDB--Android-Shared-Preferences-Tur&zwnj;&#8203;bo</a>"}],"tags":[],"owner":{"account_id":11771693,"reputation":248,"user_id":8743921,"display_name":"Xay"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1521267659,"creation_date":1521267659,"answer_id":49333135,"question_id":49333116,"body_markdown":" You have to create Object of Your TinyDB class like :-\r\n\r\n    TinyDB tinyDB = new TinyDB();\r\n\r\n ","title":"TinyDB error putint null object reference android","body":"<p>You have to create Object of Your TinyDB class like :-</p>\n\n<pre><code>TinyDB tinyDB = new TinyDB();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8835542,"reputation":3375,"user_id":6600000,"display_name":"Keivan Esbati"},"score":0,"creation_date":1521270299,"post_id":49333349,"comment_id":85668478,"body_markdown":"you are welcome! just remember to pass the right context to tiny db! else your app can crash when activity or fragment is destroyed..","body":"you are welcome! just remember to pass the right context to tiny db! else your app can crash when activity or fragment is destroyed.."},{"owner":{"account_id":13095366,"reputation":129,"user_id":9461437,"display_name":"Hadi Ahmadi"},"score":0,"creation_date":1521271015,"post_id":49333349,"comment_id":85668625,"body_markdown":"roger that . Thank you so much","body":"roger that . Thank you so much"}],"tags":[],"owner":{"account_id":8835542,"reputation":3375,"user_id":6600000,"display_name":"Keivan Esbati"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521269498,"creation_date":1521269498,"answer_id":49333349,"question_id":49333116,"body_markdown":"You should properly initiate your **TinyDB** before using it!\r\n\r\nFor Example in `Activity`:\r\n\r\n    TinyDB tinyDB = new TinyDB(this); \r\n    tinyDB.putInt(&quot;hadi&quot; , 10);\r\n\r\nor in `Fragment`:\r\n\r\n    TinyDB tinyDB = new TinyDB(getContext()); \r\n    tinyDB.putInt(&quot;hadi&quot; , 10);\r\n\r\n**TinyDB** is just a simple wrapper around `SharedPreferences` so it is important that you provide a valid `Context` to it to initiate `SharedPreferences`","title":"TinyDB error putint null object reference android","body":"<p>You should properly initiate your <strong>TinyDB</strong> before using it!</p>\n\n<p>For Example in <code>Activity</code>:</p>\n\n<pre><code>TinyDB tinyDB = new TinyDB(this); \ntinyDB.putInt(\"hadi\" , 10);\n</code></pre>\n\n<p>or in <code>Fragment</code>:</p>\n\n<pre><code>TinyDB tinyDB = new TinyDB(getContext()); \ntinyDB.putInt(\"hadi\" , 10);\n</code></pre>\n\n<p><strong>TinyDB</strong> is just a simple wrapper around <code>SharedPreferences</code> so it is important that you provide a valid <code>Context</code> to it to initiate <code>SharedPreferences</code></p>\n"},{"tags":[],"owner":{"account_id":22070162,"reputation":19,"user_id":16331278,"display_name":"ratim shariar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665947789,"creation_date":1665947789,"answer_id":74090053,"question_id":49333116,"body_markdown":"You are getting error because you are passing context before Oncreate just pass the context after oncreate donot make it global variable.","title":"TinyDB error putint null object reference android","body":"<p>You are getting error because you are passing context before Oncreate just pass the context after oncreate donot make it global variable.</p>\n"}],"owner":{"account_id":13095366,"reputation":129,"user_id":9461437,"display_name":"Hadi Ahmadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":382,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":49333135,"answer_count":3,"score":-1,"last_activity_date":1665947789,"creation_date":1521267497,"question_id":49333116,"body_markdown":"[TinyDb class is here][1]\r\n\r\nim using it simply by default codes like : `TinyDB tinyDB = new TinyDB(MyActivity.this);` and `        tinyDB.putInt(&quot;hadi&quot; , 10);`\r\n\r\nbut im getting an error that i cant understand . it say tinyDB is  null object reference . you can see the error below : \r\n\r\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void com.example.ahmadi.TinyDB.TinyDB.putInt(java.lang.String, int)&#39; on a null object reference\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/kcochibili/TinyDB--Android-Shared-Preferences-Turbo","title":"TinyDB error putint null object reference android","body":"<p><a href=\"https://github.com/kcochibili/TinyDB--Android-Shared-Preferences-Turbo\" rel=\"nofollow noreferrer\">TinyDb class is here</a></p>\n\n<p>im using it simply by default codes like : <code>TinyDB tinyDB = new TinyDB(MyActivity.this);</code> and <code>tinyDB.putInt(\"hadi\" , 10);</code></p>\n\n<p>but im getting an error that i cant understand . it say tinyDB is  null object reference . you can see the error below : </p>\n\n<pre><code>Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void com.example.ahmadi.TinyDB.TinyDB.putInt(java.lang.String, int)' on a null object reference\n</code></pre>\n"},{"tags":["java","xml","xpath"],"comments":[{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":0,"creation_date":1665946491,"post_id":74089806,"comment_id":130813051,"body_markdown":"What about `count(/html/body/hr)`  ?","body":"What about <code>count(&#47;html&#47;body&#47;hr)</code>  ?"},{"owner":{"account_id":66042,"reputation":5303,"user_id":193980,"accept_rate":48,"display_name":"Phlip"},"score":0,"creation_date":1665947274,"post_id":74089806,"comment_id":130813226,"body_markdown":"thanks; that worked and I&#39;m getting a `XPathConstants.NUMBER` now. I will leave my question up because I think `/html/body/count(hr)` should have been the equivalent","body":"thanks; that worked and I&#39;m getting a <code>XPathConstants.NUMBER</code> now. I will leave my question up because I think <code>&#47;html&#47;body&#47;count(hr)</code> should have been the equivalent"},{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":0,"creation_date":1665947689,"post_id":74089806,"comment_id":130813319,"body_markdown":"Pleased to be able to help. I expanded my comment into a full answer. Please accept :)","body":"Pleased to be able to help. I expanded my comment into a full answer. Please accept :)"}],"answers":[{"comments":[{"owner":{"account_id":66042,"reputation":5303,"user_id":193980,"accept_rate":48,"display_name":"Phlip"},"score":0,"creation_date":1665949212,"post_id":74090037,"comment_id":130813641,"body_markdown":"I figured out how to express what I&#39;m stuck on. I think that `/html/body/count(hr)` should return a list of all counts relative to each &lt;body&gt; tag, such as for if there weren&#39;t only just one. No biggie; the code works now tx all","body":"I figured out how to express what I&#39;m stuck on. I think that <code>&#47;html&#47;body&#47;count(hr)</code> should return a list of all counts relative to each &lt;body&gt; tag, such as for if there weren&#39;t only just one. No biggie; the code works now tx all"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":1,"creation_date":1666005020,"post_id":74090037,"comment_id":130824672,"body_markdown":"@Phlip, your syntax `/html/body/count(hr)` is indeed possible, but only in XPath 2 and later, not in XPath 1.0. To use XPath 2 or later in Java you need Saxon 9 or 10 or 11 or any of the XQuery engines/implementations in Java, like BaseX or eXist-db.","body":"@Phlip, your syntax <code>&#47;html&#47;body&#47;count(hr)</code> is indeed possible, but only in XPath 2 and later, not in XPath 1.0. To use XPath 2 or later in Java you need Saxon 9 or 10 or 11 or any of the XQuery engines/implementations in Java, like BaseX or eXist-db."},{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":0,"creation_date":1666011320,"post_id":74090037,"comment_id":130827005,"body_markdown":"@MartinHonnen  Sounds like that could be a legit first class answer, and an even better one than mine  :)","body":"@MartinHonnen  Sounds like that could be a legit first class answer, and an even better one than mine  :)"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":1,"creation_date":1666011454,"post_id":74090037,"comment_id":130827049,"body_markdown":"@Stewart, in the general context of Java and XPath I agree, but as the poster said he wants to work with built-in libraries on Android I guess that means he wouldn&#39;t want to try to introduce a dependency on Saxon.","body":"@Stewart, in the general context of Java and XPath I agree, but as the poster said he wants to work with built-in libraries on Android I guess that means he wouldn&#39;t want to try to introduce a dependency on Saxon."},{"owner":{"account_id":66042,"reputation":5303,"user_id":193980,"accept_rate":48,"display_name":"Phlip"},"score":0,"creation_date":1666023524,"post_id":74090037,"comment_id":130831879,"body_markdown":"thanks all. For those of you who test (pristine) XHTML inside Android, or otherwise without Saxon etc, here&#39;s my assertions that spot-check details in your web page without getting stuck on the intermediate tags: https://stackoverflow.com/a/61831914/193980","body":"thanks all. For those of you who test (pristine) XHTML inside Android, or otherwise without Saxon etc, here&#39;s my assertions that spot-check details in your web page without getting stuck on the intermediate tags: <a href=\"https://stackoverflow.com/a/61831914/193980\">stackoverflow.com/a/61831914/193980</a>"}],"tags":[],"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665947664,"creation_date":1665947664,"answer_id":74090037,"question_id":74089806,"body_markdown":"You need a count of the tags at that path. The path is `/html/body/hr`.\r\n\r\n`count()` is a function, not a tag or part of a path. So `count()` cannot come after `/html/body/` because then it&#39;s looking for a `count` tag, and probably doesn&#39;t know what the `()` is.\r\n\r\nSo try:\r\n\r\n    count(/html/body/hr)","title":"how can (Java) XPath return a number?","body":"<p>You need a count of the tags at that path. The path is <code>/html/body/hr</code>.</p>\n<p><code>count()</code> is a function, not a tag or part of a path. So <code>count()</code> cannot come after <code>/html/body/</code> because then it's looking for a <code>count</code> tag, and probably doesn't know what the <code>()</code> is.</p>\n<p>So try:</p>\n<pre><code>count(/html/body/hr)\n</code></pre>\n"}],"owner":{"account_id":66042,"reputation":5303,"user_id":193980,"accept_rate":48,"display_name":"Phlip"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74090037,"answer_count":1,"score":0,"last_activity_date":1665947664,"creation_date":1665945662,"question_id":74089806,"body_markdown":"My XPath is just `/html/body/count(hr)`. I want to count the number of XHTML horizontal rules. This is for a test assertion, so if the number changes I want the assertion diagnostic text to reflect the number.\r\n\r\nBut `xpath.compile(xpathExpression)` throws &quot;javax.xml.transform.TransformerException: Unknown nodetype: count&quot;\r\n\r\nEl Goog says that an XPath expression can return a number; so can (Java&#39;s) XPath mechanics access it?\r\n\r\n----\r\n\r\nalso this must fit inside an Android tablet&#39;s tests, so I can&#39;t use any third party XML parser that would destabilize my build. Saxon could do it\r\n","title":"how can (Java) XPath return a number?","body":"<p>My XPath is just <code>/html/body/count(hr)</code>. I want to count the number of XHTML horizontal rules. This is for a test assertion, so if the number changes I want the assertion diagnostic text to reflect the number.</p>\n<p>But <code>xpath.compile(xpathExpression)</code> throws &quot;javax.xml.transform.TransformerException: Unknown nodetype: count&quot;</p>\n<p>El Goog says that an XPath expression can return a number; so can (Java's) XPath mechanics access it?</p>\n<hr />\n<p>also this must fit inside an Android tablet's tests, so I can't use any third party XML parser that would destabilize my build. Saxon could do it</p>\n"},{"tags":["java","list","duplicates","boolean"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665942408,"creation_date":1665942090,"answer_id":74089387,"question_id":74089281,"body_markdown":"If I understood the problem correctly, you want to reject existing `Customer`s based on their `phone` while adding a *new customer* int the `CabCustomerService`.\r\n\r\nFor that you can maintain a [`HashSet`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HashSet.html), which a hash-based collection of unique elements, containing a *phone* of all *current customers* and before adding a *new customer* to the *list* offer their *phone* to the *set*. The *customer* should be added only if their *phone* would not be rejected by the *set*, i.e. if [`Set.add()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#add(E)) would return `true`.\r\n\r\n    public class CabCustomerService {\r\n        private List&lt;CabCustomer&gt; customerList = new ArrayList&lt;&gt;();\r\n        private Set&lt;String&gt; customerPhones = new HashSet&lt;&gt;();\r\n        \r\n        public void addCabCustomer(CabCustomer customer) {\r\n            if (customerPhones.add(customer.getPhone())) {\r\n                customerList.add(customer);\r\n            }\r\n        }\r\n    }\r\n\r\nYou also might want to learn what are the benefits of using abstractions like `List` instead of concrete classes. See https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface","title":"Check for duplicate in a List of class objects and return list of boolean values","body":"<p>If I understood the problem correctly, you want to reject existing <code>Customer</code>s based on their <code>phone</code> while adding a <em>new customer</em> int the <code>CabCustomerService</code>.</p>\n<p>For that you can maintain a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HashSet.html\" rel=\"nofollow noreferrer\"><code>HashSet</code></a>, which a hash-based collection of unique elements, containing a <em>phone</em> of all <em>current customers</em> and before adding a <em>new customer</em> to the <em>list</em> offer their <em>phone</em> to the <em>set</em>. The <em>customer</em> should be added only if their <em>phone</em> would not be rejected by the <em>set</em>, i.e. if <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html#add(E)\" rel=\"nofollow noreferrer\"><code>Set.add()</code></a> would return <code>true</code>.</p>\n<pre><code>public class CabCustomerService {\n    private List&lt;CabCustomer&gt; customerList = new ArrayList&lt;&gt;();\n    private Set&lt;String&gt; customerPhones = new HashSet&lt;&gt;();\n    \n    public void addCabCustomer(CabCustomer customer) {\n        if (customerPhones.add(customer.getPhone())) {\n            customerList.add(customer);\n        }\n    }\n}\n</code></pre>\n<p>You also might want to learn what are the benefits of using abstractions like <code>List</code> instead of concrete classes. See <a href=\"https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface\">What does it mean to &quot;program to an interface&quot;?</a></p>\n"},{"tags":[],"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665946644,"creation_date":1665946644,"answer_id":74089925,"question_id":74089281,"body_markdown":"**You can try the below approach in order to get the desired list of boolean values corresponding to the customer data.**\r\n\r\n**Approach:**\r\n\r\n*Here in `addCabCustomer(CabCustomer customer)` method, I have checked whether the customerList contains any customer with the same phone number of the customer that needs to be add.If not then add the upcoming customer in the customerList and updated the flag accordingly*\r\n\r\n**CabCustomerService.java**\r\n\r\n    public class CabCustomerService {\r\n        \r\n        private List&lt;CabCustomer&gt; customerList = new ArrayList&lt;&gt;();\r\n    \r\n        public boolean addCabCustomer(CabCustomer customer) {\r\n            boolean added = false;\r\n            if(!customerList.stream().map(CabCustomer::getPhone)\r\n                    .collect(Collectors.toList()).contains(customer.getPhone())){\r\n                added = true;\r\n                customerList.add(customer);\r\n            }\r\n            return added;\r\n        }\r\n    \r\n        public List&lt;CabCustomer&gt; getCustomerList() {\r\n            return customerList;\r\n        }\r\n    }\r\n\r\n**CabCustomerServiceTester.java**\r\n\r\n    public class CabCustomerServiceTester {\r\n        public static void main(String[] args) {\r\n            CabCustomer cb=new CabCustomer(101, &quot;David&quot;, &quot;Jersey&quot;, &quot;New York&quot;, 1, &quot;123&quot;);\r\n            CabCustomer cb1=new CabCustomer(102, &quot;John&quot;, &quot;Houston&quot;, &quot;Boston&quot;, 3, &quot;000&quot;);\r\n            CabCustomer cb2=new CabCustomer(103, &quot;Connor&quot;,&quot;California&quot;, &quot;Alaska&quot;, 4, &quot;123&quot;);\r\n            CabCustomer cb3=new CabCustomer(104, &quot;Mark&quot;, &quot;Los Angeles&quot;, &quot;Nevada&quot;, 5, &quot;321&quot;);\r\n        \r\n            List&lt;CabCustomer&gt; listInitial = Arrays.asList(cb,cb1,cb2,cb3);\r\n        \r\n            CabCustomerService ccs= new CabCustomerService();\r\n            List&lt;Boolean&gt; customerAddedFlagList = new ArrayList&lt;&gt;();\r\n        \r\n            listInitial.forEach(cabCustomer -&gt; customerAddedFlagList.add(ccs.addCabCustomer(cabCustomer)));\r\n            System.out.println(&quot;list indicating whether customer is added or not:: &quot; + customerAddedFlagList);\r\n            System.out.println(&quot;list with unique customer data:: &quot; + ccs.getCustomerList());\r\n            }\r\n    }\r\n\r\n**Output::**\r\n\r\n    list indicating whether customer is added or not:: [true, true, false, true]\r\n    list with unique customer data:: \r\n    [CabCustomer{custId=101, distance=1, customerName=&#39;David&#39;, pickupLocation=&#39;Jersey&#39;, dropLocation=&#39;New York&#39;, phone=&#39;123&#39;}, CabCustomer{custId=102, distance=3, customerName=&#39;John&#39;, pickupLocation=&#39;Houston&#39;, dropLocation=&#39;Boston&#39;, phone=&#39;000&#39;}, CabCustomer{custId=104, distance=5, customerName=&#39;Mark&#39;, pickupLocation=&#39;Los Angeles&#39;, dropLocation=&#39;Nevada&#39;, phone=&#39;321&#39;}]\r\n\r\n","title":"Check for duplicate in a List of class objects and return list of boolean values","body":"<p><strong>You can try the below approach in order to get the desired list of boolean values corresponding to the customer data.</strong></p>\n<p><strong>Approach:</strong></p>\n<p><em>Here in <code>addCabCustomer(CabCustomer customer)</code> method, I have checked whether the customerList contains any customer with the same phone number of the customer that needs to be add.If not then add the upcoming customer in the customerList and updated the flag accordingly</em></p>\n<p><strong>CabCustomerService.java</strong></p>\n<pre><code>public class CabCustomerService {\n    \n    private List&lt;CabCustomer&gt; customerList = new ArrayList&lt;&gt;();\n\n    public boolean addCabCustomer(CabCustomer customer) {\n        boolean added = false;\n        if(!customerList.stream().map(CabCustomer::getPhone)\n                .collect(Collectors.toList()).contains(customer.getPhone())){\n            added = true;\n            customerList.add(customer);\n        }\n        return added;\n    }\n\n    public List&lt;CabCustomer&gt; getCustomerList() {\n        return customerList;\n    }\n}\n</code></pre>\n<p><strong>CabCustomerServiceTester.java</strong></p>\n<pre><code>public class CabCustomerServiceTester {\n    public static void main(String[] args) {\n        CabCustomer cb=new CabCustomer(101, &quot;David&quot;, &quot;Jersey&quot;, &quot;New York&quot;, 1, &quot;123&quot;);\n        CabCustomer cb1=new CabCustomer(102, &quot;John&quot;, &quot;Houston&quot;, &quot;Boston&quot;, 3, &quot;000&quot;);\n        CabCustomer cb2=new CabCustomer(103, &quot;Connor&quot;,&quot;California&quot;, &quot;Alaska&quot;, 4, &quot;123&quot;);\n        CabCustomer cb3=new CabCustomer(104, &quot;Mark&quot;, &quot;Los Angeles&quot;, &quot;Nevada&quot;, 5, &quot;321&quot;);\n    \n        List&lt;CabCustomer&gt; listInitial = Arrays.asList(cb,cb1,cb2,cb3);\n    \n        CabCustomerService ccs= new CabCustomerService();\n        List&lt;Boolean&gt; customerAddedFlagList = new ArrayList&lt;&gt;();\n    \n        listInitial.forEach(cabCustomer -&gt; customerAddedFlagList.add(ccs.addCabCustomer(cabCustomer)));\n        System.out.println(&quot;list indicating whether customer is added or not:: &quot; + customerAddedFlagList);\n        System.out.println(&quot;list with unique customer data:: &quot; + ccs.getCustomerList());\n        }\n}\n</code></pre>\n<p><strong>Output::</strong></p>\n<pre><code>list indicating whether customer is added or not:: [true, true, false, true]\nlist with unique customer data:: \n[CabCustomer{custId=101, distance=1, customerName='David', pickupLocation='Jersey', dropLocation='New York', phone='123'}, CabCustomer{custId=102, distance=3, customerName='John', pickupLocation='Houston', dropLocation='Boston', phone='000'}, CabCustomer{custId=104, distance=5, customerName='Mark', pickupLocation='Los Angeles', dropLocation='Nevada', phone='321'}]\n</code></pre>\n"}],"owner":{"account_id":17142615,"reputation":13,"user_id":12406267,"display_name":"Vikas Tiwari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1665946644,"creation_date":1665941087,"question_id":74089281,"body_markdown":"I want a list of boolean values corresponding to the values in an ArrayList. For ex- I have a class of customer with data like name, address, phone, etc. **The phono is in String Format**. Now I&#39;m taking an ArrayList to store customer objects. Now I&#39;d want to know which customers are new and which customers are existing based on their phono, if their phono is repeated in ArrayList then a method should return false or else true.\r\n\r\n    package cabServiceProgram;\r\n    \r\n    class CabCustomer\r\n    {\r\n    private int custId, distance;\r\n    private String customerName, pickupLocation, dropLocation, phone;\r\n    \r\n    public CabCustomer()\r\n    {\r\n    \tthis.custId         = 0;\r\n    \tthis.distance       = 0;\r\n    \tthis.customerName   = null;\r\n    \tthis.pickupLocation = null;\r\n    \tthis.dropLocation   = null;\r\n    \tthis.phone          = null;\r\n    }\r\n    \r\n    public CabCustomer(int custId, String customerName,String pickupLocation,String dropLocation, int distance,\r\n    \t\tString phone)\r\n    {\r\n    \tthis.custId         = custId;\r\n    \tthis.distance       = distance;\r\n    \tthis.customerName   = customerName;\r\n    \tthis.pickupLocation = pickupLocation;\r\n    \tthis.dropLocation   = dropLocation;\r\n    \tthis.phone          = phone;\r\n    }\r\n    public int getCustId()\r\n    {\r\n    \treturn custId;\r\n    }\r\n    public void setCustId(int custId)\r\n    {\r\n    \tthis.custId = custId;\r\n    }\r\n    public int getDistance()\r\n    {\r\n    \treturn distance;\r\n    }\r\n    public void setDistance(int distance)\r\n    {\r\n    \tthis.distance = distance;\r\n    }\r\n    public String getCustomerName()\r\n    {\r\n    \treturn customerName;\r\n    }\r\n    public void setCustomerName(String customerName)\r\n    {\r\n    \tthis.customerName = customerName;\r\n    }\r\n    public String getPickupLocation()\r\n    {\r\n    \treturn pickupLocation;\r\n    }\r\n    public void setPickupLocation(String pickupLocation)\r\n    {\r\n    \tthis.pickupLocation = pickupLocation;\r\n    }\r\n    public String getDropLocation()\r\n    {\r\n    \treturn dropLocation;\r\n    }\r\n    public void setDropLocation(String dropLocation)\r\n    {\r\n    \tthis.dropLocation = dropLocation;\r\n    }\r\n    public String getPhone()\r\n    {\r\n    \treturn phone;\r\n    }\r\n    public void setPhone(String phone)\r\n    {\r\n    \tthis.phone = phone;\r\n    }\r\n    }\r\n\r\n    package cabServiceProgram;\r\n\r\n    class CabCustomerService\r\n    {\r\n    \tprivate ArrayList&lt;CabCustomer&gt; customerList = new ArrayList&lt;CabCustomer&gt;();\r\n    \r\n    \tpublic void addCabCustomer(CabCustomer customer)\r\n    \t{\r\n    \t\tcustomerList.add(customer);\r\n    \t}\r\n    }\r\n\r\n    package cabServiceProgram;\r\n   \r\n    public class CabCustomerServiceTester\r\n    {\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tCabCustomer cb=new CabCustomer(101, &quot;David&quot;, &quot;Jersey&quot;, &quot;New York&quot;, 1, &quot;123&quot;);\r\n\t\tCabCustomer cb1=new CabCustomer(102, &quot;John&quot;, &quot;Houston&quot;, &quot;Boston&quot;, 3, &quot;000&quot;);\r\n\t\tCabCustomer cb2=new CabCustomer(103, &quot;Connor&quot;,&quot;California&quot;, &quot;Alaska&quot;, 4, &quot;123&quot;);\r\n\t\tCabCustomer cb3=new CabCustomer(104, &quot;Mark&quot;, &quot;Los Angeles&quot;, &quot;Nevada&quot;, 5, &quot;321&quot;);\r\n\t\tCabCustomerService ccs= new CabCustomerService();\r\n\t\tccs.addCabCustomer(cb);\r\n\t\tccs.addCabCustomer(cb1);\r\n\t\tccs.addCabCustomer(cb2);\r\n\t\tccs.addCabCustomer(cb3);\r\n\t}\r\n    }\r\n","title":"Check for duplicate in a List of class objects and return list of boolean values","body":"<p>I want a list of boolean values corresponding to the values in an ArrayList. For ex- I have a class of customer with data like name, address, phone, etc. <strong>The phono is in String Format</strong>. Now I'm taking an ArrayList to store customer objects. Now I'd want to know which customers are new and which customers are existing based on their phono, if their phono is repeated in ArrayList then a method should return false or else true.</p>\n<pre><code>package cabServiceProgram;\n\nclass CabCustomer\n{\nprivate int custId, distance;\nprivate String customerName, pickupLocation, dropLocation, phone;\n\npublic CabCustomer()\n{\n    this.custId         = 0;\n    this.distance       = 0;\n    this.customerName   = null;\n    this.pickupLocation = null;\n    this.dropLocation   = null;\n    this.phone          = null;\n}\n\npublic CabCustomer(int custId, String customerName,String pickupLocation,String dropLocation, int distance,\n        String phone)\n{\n    this.custId         = custId;\n    this.distance       = distance;\n    this.customerName   = customerName;\n    this.pickupLocation = pickupLocation;\n    this.dropLocation   = dropLocation;\n    this.phone          = phone;\n}\npublic int getCustId()\n{\n    return custId;\n}\npublic void setCustId(int custId)\n{\n    this.custId = custId;\n}\npublic int getDistance()\n{\n    return distance;\n}\npublic void setDistance(int distance)\n{\n    this.distance = distance;\n}\npublic String getCustomerName()\n{\n    return customerName;\n}\npublic void setCustomerName(String customerName)\n{\n    this.customerName = customerName;\n}\npublic String getPickupLocation()\n{\n    return pickupLocation;\n}\npublic void setPickupLocation(String pickupLocation)\n{\n    this.pickupLocation = pickupLocation;\n}\npublic String getDropLocation()\n{\n    return dropLocation;\n}\npublic void setDropLocation(String dropLocation)\n{\n    this.dropLocation = dropLocation;\n}\npublic String getPhone()\n{\n    return phone;\n}\npublic void setPhone(String phone)\n{\n    this.phone = phone;\n}\n}\n\npackage cabServiceProgram;\n\nclass CabCustomerService\n{\n    private ArrayList&lt;CabCustomer&gt; customerList = new ArrayList&lt;CabCustomer&gt;();\n\n    public void addCabCustomer(CabCustomer customer)\n    {\n        customerList.add(customer);\n    }\n}\n\npackage cabServiceProgram;\n\npublic class CabCustomerServiceTester\n{\npublic static void main(String[] args)\n{\n    CabCustomer cb=new CabCustomer(101, &quot;David&quot;, &quot;Jersey&quot;, &quot;New York&quot;, 1, &quot;123&quot;);\n    CabCustomer cb1=new CabCustomer(102, &quot;John&quot;, &quot;Houston&quot;, &quot;Boston&quot;, 3, &quot;000&quot;);\n    CabCustomer cb2=new CabCustomer(103, &quot;Connor&quot;,&quot;California&quot;, &quot;Alaska&quot;, 4, &quot;123&quot;);\n    CabCustomer cb3=new CabCustomer(104, &quot;Mark&quot;, &quot;Los Angeles&quot;, &quot;Nevada&quot;, 5, &quot;321&quot;);\n    CabCustomerService ccs= new CabCustomerService();\n    ccs.addCabCustomer(cb);\n    ccs.addCabCustomer(cb1);\n    ccs.addCabCustomer(cb2);\n    ccs.addCabCustomer(cb3);\n}\n}\n</code></pre>\n"},{"tags":["java","string","repeat"],"comments":[{"owner":{"account_id":12942920,"reputation":463,"user_id":9358141,"display_name":"Shiva Sai"},"score":1,"creation_date":1665899917,"post_id":74084898,"comment_id":130804354,"body_markdown":"brother please use two pointer technique,\n\ni =0;\nj=0;\n\nand make code to run until I is less than string length.\nwhile(i&lt;str.length())\n\nand in the while loop, please increment J until there is duplicate character, and keep track of the count. once you find the unique char. change value of i = j; and so on","body":"brother please use two pointer technique,  i =0; j=0;  and make code to run until I is less than string length. while(i&lt;str.length())  and in the while loop, please increment J until there is duplicate character, and keep track of the count. once you find the unique char. change value of i = j; and so on"}],"answers":[{"comments":[{"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"score":0,"creation_date":1665901261,"post_id":74085015,"comment_id":130804507,"body_markdown":"There is not need to pass the `result`. Simply do, `+=` when calling function","body":"There is not need to pass the <code>result</code>. Simply do, <code>+=</code> when calling function"},{"owner":{"account_id":16571275,"reputation":405,"user_id":11974339,"display_name":"aekit"},"score":0,"creation_date":1665904300,"post_id":74085015,"comment_id":130804898,"body_markdown":"I don&#39;t want to use the function. my bad I should have mentioned it in the question.","body":"I don&#39;t want to use the function. my bad I should have mentioned it in the question."}],"tags":[],"owner":{"account_id":20854541,"reputation":1009,"user_id":15318227,"display_name":"Gurkirat Singh Guliani"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665901067,"creation_date":1665901067,"answer_id":74085015,"question_id":74084898,"body_markdown":"You can use a function which has the following 3 parameters : result, anch, count  .\r\n\r\nsomething of this sort: \r\n \r\n\r\n      private static String extractedFunction(String result,int count, char anch) {\r\n                   \r\n                    return count ==1 ? (result + anch) : (result +anch+Integer.toString(count) );\r\n                }\r\n\r\nmake a function call from those two points like this : \r\n  \r\n\r\n    result = extractedFunction(result,count,anch);\r\n                      ","title":"How to remove repeating code in this solution?","body":"<p>You can use a function which has the following 3 parameters : result, anch, count  .</p>\n<p>something of this sort:</p>\n<pre><code>  private static String extractedFunction(String result,int count, char anch) {\n               \n                return count ==1 ? (result + anch) : (result +anch+Integer.toString(count) );\n            }\n</code></pre>\n<p>make a function call from those two points like this :</p>\n<pre><code>result = extractedFunction(result,count,anch);\n                  \n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user17233545"},"score":0,"creation_date":1665903205,"post_id":74085051,"comment_id":130804728,"body_markdown":"Your code returns `a3` for `aaab` instead of `a3b`.","body":"Your code returns <code>a3</code> for <code>aaab</code> instead of <code>a3b</code>."},{"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"score":0,"creation_date":1665903971,"post_id":74085051,"comment_id":130804846,"body_markdown":"Updated the answer. Thanks for pointing out the issue.","body":"Updated the answer. Thanks for pointing out the issue."},{"owner":{"display_name":"user17233545"},"score":0,"creation_date":1665904138,"post_id":74085051,"comment_id":130804871,"body_markdown":"Now it returns `a3a` for `aaa` instead of `a3`.","body":"Now it returns <code>a3a</code> for <code>aaa</code> instead of <code>a3</code>."},{"owner":{"account_id":16571275,"reputation":405,"user_id":11974339,"display_name":"aekit"},"score":0,"creation_date":1665904431,"post_id":74085051,"comment_id":130804922,"body_markdown":"I tried this same approach and was stuck with these same wrong answers.","body":"I tried this same approach and was stuck with these same wrong answers."},{"owner":{"display_name":"user17233545"},"score":1,"creation_date":1665904748,"post_id":74085051,"comment_id":130804987,"body_markdown":"It returns `a` for `ab`.","body":"It returns <code>a</code> for <code>ab</code>."},{"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"score":1,"creation_date":1665905166,"post_id":74085051,"comment_id":130805047,"body_markdown":"It is returning `a2b2` for `aabbc`","body":"It is returning <code>a2b2</code> for <code>aabbc</code>"},{"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"score":1,"creation_date":1665906443,"post_id":74085051,"comment_id":130805234,"body_markdown":"I have updated it and tested for all these use cases.","body":"I have updated it and tested for all these use cases."}],"tags":[],"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665907906,"creation_date":1665901622,"answer_id":74085051,"question_id":74084898,"body_markdown":"Since, the body of the `else` and second `if` is the same, so we can merge them by updating the condition. The updated body of the function will be:\r\n```java\r\nString result = &quot;&quot;;\r\nchar anch = str.charAt(0);\r\nint count = 0;\r\n\r\nchar ch = str.charAt(0); // declare ch outside the loop, and initialize to avoid error\r\nfor (int i = 0; i &lt; str.length(); i++) {\r\n    ch = str.charAt(i);\r\n\r\n    if (ch == anch) {\r\n        count++;\r\n    }\r\n    // check if the second condition is false, or if we are at the end of the string\r\n    if (ch != anch || i == str.length() - 1) {\r\n        if (count == 1) { // from here\r\n            result += anch;\r\n        } else {\r\n            result += anch + Integer.toString(count);\r\n        } // to here\r\n        anch = ch;\r\n        count = 1;\r\n    }\r\n}\r\n\r\n// add the condition\r\n// if count is greater than or\r\n// if the last character added already to the result\r\nif (count &gt; 1 || (len &lt; 2 || result.charAt(len - 2) != ch)) {\r\n    result += ch;\r\n}\r\n\r\nreturn result;\r\n```\r\n### Test Cases:\r\nI have tested the solution on the following inputs: \r\n```\r\naaabbccdsa -&gt; a3b2c2dsa\r\naaab -&gt; a3b\r\naaa -&gt; a3\r\nab -&gt; ab\r\naabbc -&gt; a2b2c\r\n```\r\n\r\n### Optional\r\nIf you want to make it shorter, you can update these 2 conditions.\r\n```java\r\nif (count == 1) { // from here\r\n    result += anch;\r\n} else {\r\n    result += anch + Integer.toString(count);\r\n} // to here\r\n```\r\nas\r\n```java\r\nresult += anch;\r\nif (count != 1) { // from here\r\n    result += count;// no need to convert (implicit conversion)\r\n} // to here\r\n```","title":"How to remove repeating code in this solution?","body":"<p>Since, the body of the <code>else</code> and second <code>if</code> is the same, so we can merge them by updating the condition. The updated body of the function will be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String result = &quot;&quot;;\nchar anch = str.charAt(0);\nint count = 0;\n\nchar ch = str.charAt(0); // declare ch outside the loop, and initialize to avoid error\nfor (int i = 0; i &lt; str.length(); i++) {\n    ch = str.charAt(i);\n\n    if (ch == anch) {\n        count++;\n    }\n    // check if the second condition is false, or if we are at the end of the string\n    if (ch != anch || i == str.length() - 1) {\n        if (count == 1) { // from here\n            result += anch;\n        } else {\n            result += anch + Integer.toString(count);\n        } // to here\n        anch = ch;\n        count = 1;\n    }\n}\n\n// add the condition\n// if count is greater than or\n// if the last character added already to the result\nif (count &gt; 1 || (len &lt; 2 || result.charAt(len - 2) != ch)) {\n    result += ch;\n}\n\nreturn result;\n</code></pre>\n<h3>Test Cases:</h3>\n<p>I have tested the solution on the following inputs:</p>\n<pre><code>aaabbccdsa -&gt; a3b2c2dsa\naaab -&gt; a3b\naaa -&gt; a3\nab -&gt; ab\naabbc -&gt; a2b2c\n</code></pre>\n<h3>Optional</h3>\n<p>If you want to make it shorter, you can update these 2 conditions.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (count == 1) { // from here\n    result += anch;\n} else {\n    result += anch + Integer.toString(count);\n} // to here\n</code></pre>\n<p>as</p>\n<pre class=\"lang-java prettyprint-override\"><code>result += anch;\nif (count != 1) { // from here\n    result += count;// no need to convert (implicit conversion)\n} // to here\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16571275,"reputation":405,"user_id":11974339,"display_name":"aekit"},"score":0,"creation_date":1665904278,"post_id":74085180,"comment_id":130804894,"body_markdown":"I don&#39;t want to use the function. my bad I should have mentioned it in the question.","body":"I don&#39;t want to use the function. my bad I should have mentioned it in the question."},{"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"score":0,"creation_date":1665904415,"post_id":74085180,"comment_id":130804921,"body_markdown":"@&#230;kit It is just the extracted method , created to replace the common repeated code.","body":"@&#230;kit It is just the extracted method , created to replace the common repeated code."},{"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"score":0,"creation_date":1665904743,"post_id":74085180,"comment_id":130804986,"body_markdown":"@&#230;kit Updated the code with out using function.","body":"@&#230;kit Updated the code with out using function."},{"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"score":1,"creation_date":1665912286,"post_id":74085180,"comment_id":130806118,"body_markdown":"@girdhar The code is repeted too in this answer and it is just shortened.","body":"@girdhar The code is repeted too in this answer and it is just shortened."}],"tags":[],"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665904675,"creation_date":1665903668,"answer_id":74085180,"question_id":74084898,"body_markdown":"***You can use this approach as explained below:***\r\n\r\n**Code:**\r\n\r\n  \r\n\r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            String s = &quot;aaabbccdsaccbbaaadsa&quot;;\r\n            char[] strArray = s.toCharArray();\r\n            char ch0 = strArray[0];\r\n            int counter = 0;\r\n            StringBuilder sb = new StringBuilder();\r\n            for(int i=0;i&lt;strArray.length;i++){\r\n                if(ch0 == strArray[i]){//check for consecutive characters and increment the counter\r\n                    counter++;\r\n                } else { // when character changes while iterating\r\n                    sb.append(ch0 + &quot;&quot; + (counter &gt; 1 ? counter : &quot;&quot;));\r\n                    counter = 1; // reset the counter to 1\r\n                    ch0 = strArray[i]; // reset the ch0 with the current character\r\n                }\r\n                if(i == strArray.length-1){// case for last element of the string\r\n                    sb.append(ch0 + &quot;&quot; + (counter &gt; 1 ? counter : &quot;&quot;));\r\n                }\r\n            }\r\n            System.out.println(sb);\r\n        }\r\n    }\r\n\r\n**Sample Input/Output:**\r\n\r\n    Input:: aaabbccdsaccbbaaadsa\r\n    Output:: a3b2c2dsac2b2a3dsa\r\n\r\n    Input:: abcdaaaaa\r\n    Output:: abcda5","title":"How to remove repeating code in this solution?","body":"<p><em><strong>You can use this approach as explained below:</strong></em></p>\n<p><strong>Code:</strong></p>\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        String s = &quot;aaabbccdsaccbbaaadsa&quot;;\n        char[] strArray = s.toCharArray();\n        char ch0 = strArray[0];\n        int counter = 0;\n        StringBuilder sb = new StringBuilder();\n        for(int i=0;i&lt;strArray.length;i++){\n            if(ch0 == strArray[i]){//check for consecutive characters and increment the counter\n                counter++;\n            } else { // when character changes while iterating\n                sb.append(ch0 + &quot;&quot; + (counter &gt; 1 ? counter : &quot;&quot;));\n                counter = 1; // reset the counter to 1\n                ch0 = strArray[i]; // reset the ch0 with the current character\n            }\n            if(i == strArray.length-1){// case for last element of the string\n                sb.append(ch0 + &quot;&quot; + (counter &gt; 1 ? counter : &quot;&quot;));\n            }\n        }\n        System.out.println(sb);\n    }\n}\n</code></pre>\n<p><strong>Sample Input/Output:</strong></p>\n<pre><code>Input:: aaabbccdsaccbbaaadsa\nOutput:: a3b2c2dsac2b2a3dsa\n\nInput:: abcdaaaaa\nOutput:: abcda5\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16571275,"reputation":405,"user_id":11974339,"display_name":"aekit"},"score":0,"creation_date":1665905438,"post_id":74085242,"comment_id":130805093,"body_markdown":"that&#39;s great edit but can you please explain your code? I am having a difficult time understanding this as this code is totally different from mine specially here `if (i + 1 &lt; str.length() &amp;&amp; str.charAt(i) == str.charAt(i + 1))`.","body":"that&#39;s great edit but can you please explain your code? I am having a difficult time understanding this as this code is totally different from mine specially here <code>if (i + 1 &lt; str.length() &amp;&amp; str.charAt(i) == str.charAt(i + 1))</code>."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":2,"creation_date":1665909994,"post_id":74085242,"comment_id":130805733,"body_markdown":"@&#230;kit Condition `i + 1 &lt; str.length()` guards against accessing the index that doesn&#39;t exist (which would raise an exception), and the second part `str.charAt(i) == str.charAt(i + 1)` checks whether the character at index `i` is equals to the next one.","body":"@&#230;kit Condition <code>i + 1 &lt; str.length()</code> guards against accessing the index that doesn&#39;t exist (which would raise an exception), and the second part <code>str.charAt(i) == str.charAt(i + 1)</code> checks whether the character at index <code>i</code> is equals to the next one."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":3,"creation_date":1665910748,"post_id":74085242,"comment_id":130805859,"body_markdown":"Also, it would be better to use `StringBuilder` instead of string concatenation because continuation based solution would have quadratic time complexity `O(n^2)` (**reminder:** strings are *immutable*, hence every concatenation results in redundant copying the contents of the previous string into a new one).","body":"Also, it would be better to use <code>StringBuilder</code> instead of string concatenation because continuation based solution would have quadratic time complexity <code>O(n^2)</code> (<b>reminder:</b> strings are <i>immutable</i>, hence every concatenation results in redundant copying the contents of the previous string into a new one)."}],"tags":[],"owner":{"account_id":21049065,"reputation":192,"user_id":15469806,"display_name":"Nibras Shami"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665904417,"creation_date":1665904417,"answer_id":74085242,"question_id":74084898,"body_markdown":"You can do something like this:\r\n```java\r\npublic static String getCompressedString(String str) {\r\n        String result = &quot;&quot;;\r\n        int count = 1;\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            if (i + 1 &lt; str.length() &amp;&amp; str.charAt(i) == str.charAt(i + 1)) {\r\n                count++;\r\n            } else {\r\n                if (count == 1) {\r\n                    result += str.charAt(i);\r\n                } else {\r\n                    result += str.charAt(i) + &quot;&quot; + count;\r\n                    count = 1;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n```\r\n\r\nI got rid of the repeated code, and it do as intended.","title":"How to remove repeating code in this solution?","body":"<p>You can do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String getCompressedString(String str) {\n        String result = &quot;&quot;;\n        int count = 1;\n        for (int i = 0; i &lt; str.length(); i++) {\n            if (i + 1 &lt; str.length() &amp;&amp; str.charAt(i) == str.charAt(i + 1)) {\n                count++;\n            } else {\n                if (count == 1) {\n                    result += str.charAt(i);\n                } else {\n                    result += str.charAt(i) + &quot;&quot; + count;\n                    count = 1;\n                }\n            }\n        }\n        return result;\n    }\n</code></pre>\n<p>I got rid of the repeated code, and it do as intended.</p>\n"},{"comments":[{"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"score":0,"creation_date":1665906358,"post_id":74085325,"comment_id":130805226,"body_markdown":"I think this approach will have time complexity `O(n2)` instead `O(n)`","body":"I think this approach will have time complexity <code>O(n2)</code> instead <code>O(n)</code>"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":1,"creation_date":1665906664,"post_id":74085325,"comment_id":130805263,"body_markdown":"It&#39;s O(n).  The outer loop and the inner loop are really working together as one loop.","body":"It&#39;s O(n).  The outer loop and the inner loop are really working together as one loop."}],"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665906603,"creation_date":1665905485,"answer_id":74085325,"question_id":74084898,"body_markdown":"You could do away with the if statements.\r\n\r\n```java\r\n   public static String getCompressedString(String str) {\r\n        char[] a = str.toCharArray();\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tfor(int i=0,j=0; i&lt;a.length; i=j){\r\n\t\t   for(j=i+1;j &lt; a.length &amp;&amp; a[i] == a[j]; j++);\r\n\t\t   sb.append(a[i]).append(j-i==1?&quot;&quot;:j-i);\r\n\t\t}\r\n\t\treturn sb.toString();\r\n   }\r\n}\r\n```","title":"How to remove repeating code in this solution?","body":"<p>You could do away with the if statements.</p>\n<pre class=\"lang-java prettyprint-override\"><code>   public static String getCompressedString(String str) {\n        char[] a = str.toCharArray();\n        StringBuilder sb = new StringBuilder();\n        for(int i=0,j=0; i&lt;a.length; i=j){\n           for(j=i+1;j &lt; a.length &amp;&amp; a[i] == a[j]; j++);\n           sb.append(a[i]).append(j-i==1?&quot;&quot;:j-i);\n        }\n        return sb.toString();\n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16571275,"reputation":405,"user_id":11974339,"display_name":"aekit"},"score":0,"creation_date":1665909099,"post_id":74085452,"comment_id":130805592,"body_markdown":"OMG, that&#39;s too advance for me to understand and use in daily coding but that one is a great answer with an explanation. Can you PLEASE explain [this](https://stackoverflow.com/a/74085242/11974339) solution to me as this looks easy and Nibras haven&#39;t explained it.","body":"OMG, that&#39;s too advance for me to understand and use in daily coding but that one is a great answer with an explanation. Can you PLEASE explain <a href=\"https://stackoverflow.com/a/74085242/11974339\">this</a> solution to me as this looks easy and Nibras haven&#39;t explained it."}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665908474,"creation_date":1665907105,"answer_id":74085452,"question_id":74084898,"body_markdown":"Here&#39;s a single-statement solution using Stream API and regular expressions:\r\n\r\n    public static final Pattern GROUP_OF_ONE_OR_MORE = Pattern.compile(&quot;(.)\\\\1*&quot;);\r\n    \r\n    public static String getCompressedString(String str) {\r\n        \r\n        return GROUP_OF_ONE_OR_MORE.matcher(str).results()\r\n            .map(MatchResult::group)\r\n            .map(s -&gt; s.charAt(0) + (s.length() == 1 ? &quot;&quot; : String.valueOf(s.length())))\r\n            .collect(Collectors.joining());\r\n    }\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(getCompressedString(&quot;aaabbccdsa&quot;));\r\n        System.out.println(getCompressedString(&quot;awswwwhhhp&quot;));\r\n    }\r\n\r\n*Output:*\r\n```\r\na3b2c2dsa   // &quot;aaabbccdsa&quot;\r\nawsw3h3p    // &quot;awswwwhhhp&quot;\r\n```\r\n\r\n&lt;h3&gt;How does it work&lt;/h3&gt;\r\n\r\nA regular expression `&quot;(.)\\\\1*&quot;` is capturing a group `(.)` of identical characters of length `1` or greater. Where `.` - denotes any symbol, and `\\\\1` is a [back reference](https://www.regular-expressions.info/backref.html) to the group.\r\n\r\nMethod [`Matcher.results()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Matcher.html#results()) *&quot;returns a stream of match results for each subsequence of the input sequence that matches the pattern&quot;*.\r\n\r\nThe only thing left is to evaluate the length of each group and transform it accordingly before collecting into the resulting String.\r\n\r\n***Links:***\r\n\r\n* &lt;sup&gt;A quick [tutorial](https://www.vogella.com/tutorials/JavaRegularExpressions/article.html) on Regular Expressions.&lt;/sup&gt;\r\n* &lt;sup&gt;Official tutorials on [lambda expressions](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html) and [streams](https://docs.oracle.com/javase/tutorial/collections/streams/index.html)&lt;/sup&gt;","title":"How to remove repeating code in this solution?","body":"<p>Here's a single-statement solution using Stream API and regular expressions:</p>\n<pre><code>public static final Pattern GROUP_OF_ONE_OR_MORE = Pattern.compile(&quot;(.)\\\\1*&quot;);\n\npublic static String getCompressedString(String str) {\n    \n    return GROUP_OF_ONE_OR_MORE.matcher(str).results()\n        .map(MatchResult::group)\n        .map(s -&gt; s.charAt(0) + (s.length() == 1 ? &quot;&quot; : String.valueOf(s.length())))\n        .collect(Collectors.joining());\n}\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    System.out.println(getCompressedString(&quot;aaabbccdsa&quot;));\n    System.out.println(getCompressedString(&quot;awswwwhhhp&quot;));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>a3b2c2dsa   // &quot;aaabbccdsa&quot;\nawsw3h3p    // &quot;awswwwhhhp&quot;\n</code></pre>\n<h3>How does it work</h3>\n<p>A regular expression <code>&quot;(.)\\\\1*&quot;</code> is capturing a group <code>(.)</code> of identical characters of length <code>1</code> or greater. Where <code>.</code> - denotes any symbol, and <code>\\\\1</code> is a <a href=\"https://www.regular-expressions.info/backref.html\" rel=\"nofollow noreferrer\">back reference</a> to the group.</p>\n<p>Method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Matcher.html#results()\" rel=\"nofollow noreferrer\"><code>Matcher.results()</code></a> <em>&quot;returns a stream of match results for each subsequence of the input sequence that matches the pattern&quot;</em>.</p>\n<p>The only thing left is to evaluate the length of each group and transform it accordingly before collecting into the resulting String.</p>\n<p><em><strong>Links:</strong></em></p>\n<ul>\n<li><sup>A quick <a href=\"https://www.vogella.com/tutorials/JavaRegularExpressions/article.html\" rel=\"nofollow noreferrer\">tutorial</a> on Regular Expressions.</sup></li>\n<li><sup>Official tutorials on <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">lambda expressions</a> and <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/index.html\" rel=\"nofollow noreferrer\">streams</a></sup></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1665911032,"post_id":74085542,"comment_id":130805902,"body_markdown":"Although you&#39;re not obliged to, it&#39;s a good practice from the perspective of the code of conduct, adding a mention when you&#39;re building your solution based on an existing one.","body":"Although you&#39;re not obliged to, it&#39;s a good practice from the perspective of the code of conduct, adding a mention when you&#39;re building your solution based on an existing one."}],"tags":[],"owner":{"display_name":"user17233545"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665917181,"creation_date":1665908338,"answer_id":74085542,"question_id":74084898,"body_markdown":"Try this.\r\n\r\n    static final Pattern PAT = Pattern.compile(&quot;(.)\\\\1*&quot;);\r\n\r\n    static String getCompressedString(String str) {\r\n        return PAT.matcher(str)\r\n            .replaceAll(m -&gt; m.group(1)\r\n                + (m.group().length() == 1 ? &quot;&quot; : m.group().length()));\r\n    }\r\n\r\n\r\nTest cases:\r\n\r\n    @Test\r\n    public void testGetCompressedString() {\r\n        assertEquals(&quot;&quot;, getCompressedString(&quot;&quot;));\r\n        assertEquals(&quot;a&quot;, getCompressedString(&quot;a&quot;));\r\n        assertEquals(&quot;abc&quot;, getCompressedString(&quot;abc&quot;));\r\n        assertEquals(&quot;abc3&quot;, getCompressedString(&quot;abccc&quot;));\r\n        assertEquals(&quot;a3b2c2dsa&quot;, getCompressedString(&quot;aaabbccdsa&quot;));\r\n    }\r\n\r\n\r\nThe regular expression `&quot;(.)\\\\1*&quot;` used here matches any sequence of identical characters. `.replaceAll()` takes a lambda expression as an argument, evaluates the lambda expression each time the pattern matches, and replaces the original string with the result.\r\nThe lambda expression is passed a `Matcher` object containing the results of the match. Here we are receiving this object in the variable `m`. `m.group()` returns the entire matched substring, `m.group(1)` returns its first character.\r\n\r\nIf the input string is `&quot;aaabbccdsa&quot;`, it will be processed as follows.\r\n\r\n    m.group(1)   m.group()  returned by lambda\r\n     a            aaa        a3\r\n     b            bb         b2\r\n     c            cc         c2\r\n     d            d          d\r\n     s            s          s\r\n     a            a          a","title":"How to remove repeating code in this solution?","body":"<p>Try this.</p>\n<pre><code>static final Pattern PAT = Pattern.compile(&quot;(.)\\\\1*&quot;);\n\nstatic String getCompressedString(String str) {\n    return PAT.matcher(str)\n        .replaceAll(m -&gt; m.group(1)\n            + (m.group().length() == 1 ? &quot;&quot; : m.group().length()));\n}\n</code></pre>\n<p>Test cases:</p>\n<pre><code>@Test\npublic void testGetCompressedString() {\n    assertEquals(&quot;&quot;, getCompressedString(&quot;&quot;));\n    assertEquals(&quot;a&quot;, getCompressedString(&quot;a&quot;));\n    assertEquals(&quot;abc&quot;, getCompressedString(&quot;abc&quot;));\n    assertEquals(&quot;abc3&quot;, getCompressedString(&quot;abccc&quot;));\n    assertEquals(&quot;a3b2c2dsa&quot;, getCompressedString(&quot;aaabbccdsa&quot;));\n}\n</code></pre>\n<p>The regular expression <code>&quot;(.)\\\\1*&quot;</code> used here matches any sequence of identical characters. <code>.replaceAll()</code> takes a lambda expression as an argument, evaluates the lambda expression each time the pattern matches, and replaces the original string with the result.\nThe lambda expression is passed a <code>Matcher</code> object containing the results of the match. Here we are receiving this object in the variable <code>m</code>. <code>m.group()</code> returns the entire matched substring, <code>m.group(1)</code> returns its first character.</p>\n<p>If the input string is <code>&quot;aaabbccdsa&quot;</code>, it will be processed as follows.</p>\n<pre><code>m.group(1)   m.group()  returned by lambda\n a            aaa        a3\n b            bb         b2\n c            cc         c2\n d            d          d\n s            s          s\n a            a          a\n</code></pre>\n"}],"owner":{"account_id":16571275,"reputation":405,"user_id":11974339,"display_name":"aekit"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74085242,"answer_count":7,"score":1,"last_activity_date":1665944492,"creation_date":1665899518,"question_id":74084898,"body_markdown":"I have this code which compresses characters in the given string and replaces *repeated adjacent characters* with their **count**.\r\n\r\nConsider the following example:\r\n\r\n*Input:* \r\n```\r\naaabbccdsa\r\n```\r\n*Expecting output:*\r\n```\r\na3b2c2dsa\r\n```\r\nMy code is working properly but I think repeating if condition can be removed.\r\n```\r\npublic class Solution {\r\n\tpublic static String getCompressedString(String str) {\r\n\t\tString result = &quot;&quot;;\r\n        char anch = str.charAt(0);\r\n        int count = 0;\r\n\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            char ch = str.charAt(i);\r\n\r\n            if (ch == anch) {\r\n                count++;\r\n            } else {\r\n                if (count == 1) {           // from here\r\n                \tresult += anch;\r\n                } else {\r\n                \tresult += anch + Integer.toString(count);                    \r\n                }                         // to here\r\n\r\n                anch = ch;\r\n                count = 1;\r\n            }\r\n\r\n            if (i == str.length() - 1) {\r\n                if (count == 1) {           // from here\r\n                \tresult += anch;\r\n                } else {\r\n                \tresult += anch + Integer.toString(count);                    \r\n                }                         // to here\r\n            }\r\n        }\r\n\r\n        return result;\r\n\t}\r\n}\r\n```\r\n\r\nIn this solution code below is repeated two times\r\n```\r\nif (count == 1) {\r\n    result += anch;\r\n} else {\r\n    result += anch + Integer.toString(count);                    \r\n}\r\n```\r\n\r\nPlease, **note**, I **don&#39;t** want to use a separate method for repeating logic.","title":"How to remove repeating code in this solution?","body":"<p>I have this code which compresses characters in the given string and replaces <em>repeated adjacent characters</em> with their <strong>count</strong>.</p>\n<p>Consider the following example:</p>\n<p><em>Input:</em></p>\n<pre><code>aaabbccdsa\n</code></pre>\n<p><em>Expecting output:</em></p>\n<pre><code>a3b2c2dsa\n</code></pre>\n<p>My code is working properly but I think repeating if condition can be removed.</p>\n<pre><code>public class Solution {\n    public static String getCompressedString(String str) {\n        String result = &quot;&quot;;\n        char anch = str.charAt(0);\n        int count = 0;\n\n        for (int i = 0; i &lt; str.length(); i++) {\n            char ch = str.charAt(i);\n\n            if (ch == anch) {\n                count++;\n            } else {\n                if (count == 1) {           // from here\n                    result += anch;\n                } else {\n                    result += anch + Integer.toString(count);                    \n                }                         // to here\n\n                anch = ch;\n                count = 1;\n            }\n\n            if (i == str.length() - 1) {\n                if (count == 1) {           // from here\n                    result += anch;\n                } else {\n                    result += anch + Integer.toString(count);                    \n                }                         // to here\n            }\n        }\n\n        return result;\n    }\n}\n</code></pre>\n<p>In this solution code below is repeated two times</p>\n<pre><code>if (count == 1) {\n    result += anch;\n} else {\n    result += anch + Integer.toString(count);                    \n}\n</code></pre>\n<p>Please, <strong>note</strong>, I <strong>don't</strong> want to use a separate method for repeating logic.</p>\n"},{"tags":["java","image","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":78549,"reputation":46986,"user_id":223478,"accept_rate":94,"display_name":"Neil McGuigan"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1454706659,"creation_date":1454706659,"answer_id":35233581,"question_id":35227208,"body_markdown":"Why don&#39;t you resize it on the client before upload? That will save some bandwidth\r\n\r\n[BlueImp JQuery Upload][1] can do this\r\n\r\n\r\n  [1]: https://github.com/blueimp/jQuery-File-Upload/wiki/Client-side-Image-Resizing","title":"How to reduce size of a multipart file in java","body":"<p>Why don't you resize it on the client before upload? That will save some bandwidth</p>\n\n<p><a href=\"https://github.com/blueimp/jQuery-File-Upload/wiki/Client-side-Image-Resizing\" rel=\"nofollow\">BlueImp JQuery Upload</a> can do this</p>\n"},{"tags":[],"owner":{"account_id":8057896,"reputation":11,"user_id":6074381,"display_name":"gov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614067458,"creation_date":1614067458,"answer_id":66329237,"question_id":35227208,"body_markdown":"It was my first time taking a deep dive into the ImageIO package. I came across the MemoryCacheImageOutputStream, which allows you to write an image output stream to an output stream, i.e. ByteArrayOutputStream. From there, The data can be retrieved using toByteArray() and toString(), after compression. I used toByteArray, as I am storing images to postgresql and it stores the images as a byte array. I know this is late, but I hope it helps someone.\r\n\r\n    private byte[] compressImage(MultipartFile mpFile) {\r\n        float quality = 0.3f;\r\n        String imageName = mpFile.getOriginalFilename();\r\n        String imageExtension = imageName.substring(imageName.lastIndexOf(&quot;.&quot;) + 1);\r\n        // Returns an Iterator containing all currently registered ImageWriters that claim to be able to encode the named format.\r\n        // You don&#39;t have to register one yourself; some are provided.\r\n        ImageWriter imageWriter = ImageIO.getImageWritersByFormatName(imageExtension).next();\r\n        ImageWriteParam imageWriteParam = imageWriter.getDefaultWriteParam();\r\n        imageWriteParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT); // Check the api value that suites your needs.\r\n        // A compression quality setting of 0.0 is most generically interpreted as &quot;high compression is important,&quot;\r\n        // while a setting of 1.0 is most generically interpreted as &quot;high image quality is important.&quot;\r\n        imageWriteParam.setCompressionQuality(quality);\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        // MemoryCacheImageOutputStream: An implementation of ImageOutputStream that writes its output to a regular\r\n        // OutputStream, i.e. the ByteArrayOutputStream.\r\n        ImageOutputStream imageOutputStream = new MemoryCacheImageOutputStream(baos);\r\n        // Sets the destination to the given ImageOutputStream or other Object.\r\n        imageWriter.setOutput(imageOutputStream);\r\n        BufferedImage originalImage = null;\r\n        try (InputStream inputStream = mpFile.getInputStream()) {\r\n            originalImage = ImageIO.read(inputStream); \r\n        } catch (IOException e) {\r\n            String info = String.format(&quot;compressImage - bufferedImage (file %s)- IOException - message: %s &quot;, imageName, e.getMessage());\r\n            logger.error(info);\r\n            return baos.toByteArray();\r\n        }\r\n        IIOImage image = new IIOImage(originalImage, null, null);\r\n        try {\r\n            imageWriter.write(null, image, imageWriteParam);\r\n        } catch (IOException e) {\r\n            String info = String.format(&quot;compressImage - imageWriter (file %s)- IOException - message: %s &quot;, imageName, e.getMessage());\r\n            logger.error(info);\r\n        } finally {\r\n            imageWriter.dispose();\r\n        }\r\n        return baos.toByteArray();\r\n    }","title":"How to reduce size of a multipart file in java","body":"<p>It was my first time taking a deep dive into the ImageIO package. I came across the MemoryCacheImageOutputStream, which allows you to write an image output stream to an output stream, i.e. ByteArrayOutputStream. From there, The data can be retrieved using toByteArray() and toString(), after compression. I used toByteArray, as I am storing images to postgresql and it stores the images as a byte array. I know this is late, but I hope it helps someone.</p>\n<pre><code>private byte[] compressImage(MultipartFile mpFile) {\n    float quality = 0.3f;\n    String imageName = mpFile.getOriginalFilename();\n    String imageExtension = imageName.substring(imageName.lastIndexOf(&quot;.&quot;) + 1);\n    // Returns an Iterator containing all currently registered ImageWriters that claim to be able to encode the named format.\n    // You don't have to register one yourself; some are provided.\n    ImageWriter imageWriter = ImageIO.getImageWritersByFormatName(imageExtension).next();\n    ImageWriteParam imageWriteParam = imageWriter.getDefaultWriteParam();\n    imageWriteParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT); // Check the api value that suites your needs.\n    // A compression quality setting of 0.0 is most generically interpreted as &quot;high compression is important,&quot;\n    // while a setting of 1.0 is most generically interpreted as &quot;high image quality is important.&quot;\n    imageWriteParam.setCompressionQuality(quality);\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    // MemoryCacheImageOutputStream: An implementation of ImageOutputStream that writes its output to a regular\n    // OutputStream, i.e. the ByteArrayOutputStream.\n    ImageOutputStream imageOutputStream = new MemoryCacheImageOutputStream(baos);\n    // Sets the destination to the given ImageOutputStream or other Object.\n    imageWriter.setOutput(imageOutputStream);\n    BufferedImage originalImage = null;\n    try (InputStream inputStream = mpFile.getInputStream()) {\n        originalImage = ImageIO.read(inputStream); \n    } catch (IOException e) {\n        String info = String.format(&quot;compressImage - bufferedImage (file %s)- IOException - message: %s &quot;, imageName, e.getMessage());\n        logger.error(info);\n        return baos.toByteArray();\n    }\n    IIOImage image = new IIOImage(originalImage, null, null);\n    try {\n        imageWriter.write(null, image, imageWriteParam);\n    } catch (IOException e) {\n        String info = String.format(&quot;compressImage - imageWriter (file %s)- IOException - message: %s &quot;, imageName, e.getMessage());\n        logger.error(info);\n    } finally {\n        imageWriter.dispose();\n    }\n    return baos.toByteArray();\n}\n</code></pre>\n"}],"owner":{"account_id":5616470,"reputation":1139,"user_id":4447614,"accept_rate":47,"display_name":"Geo Thomas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6512,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1665943402,"creation_date":1454684517,"question_id":35227208,"body_markdown":"I have `Java` `Spring MVC`  application in which there is an option to upload an image and save to the server. i have the following method:\r\n\r\n    @RequestMapping(value = &quot;/uploaddocimagecontentsubmit&quot;, method = RequestMethod.POST)\r\n    public String createUpdateFileImageContentSubmit(@RequestParam(&quot;file&quot;) MultipartFile file, ModelMap model)\r\n    {\r\n    //methods to handle file upload\r\n    }\r\n\r\nI am now trying to reduce the size of the image refering the following:\r\n\r\n[increasing-resolution-and-reducing-size-of-an-image-in-java][1] and [decrease-image-resolution-in-java][2]\r\nThe problem I am facing is that in the above examples, we are dealing with `java.io.File` Objects which are saved to a specified location. I dont want to save the image. Is there any way that I can use something similar to compress my Multipart Image file and continue with the upload.\r\n\r\n  [1]: https://stackoverflow.com/questions/13977858/increasing-resolution-and-reducing-size-of-an-image-in-java/14050844#14050844\r\n  [2]: https://stackoverflow.com/questions/6390964/decrease-image-resolution-in-java","title":"How to reduce size of a multipart file in java","body":"<p>I have <code>Java</code> <code>Spring MVC</code>  application in which there is an option to upload an image and save to the server. i have the following method:</p>\n\n<pre><code>@RequestMapping(value = \"/uploaddocimagecontentsubmit\", method = RequestMethod.POST)\npublic String createUpdateFileImageContentSubmit(@RequestParam(\"file\") MultipartFile file, ModelMap model)\n{\n//methods to handle file upload\n}\n</code></pre>\n\n<p>I am now trying to reduce the size of the image refering the following:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13977858/increasing-resolution-and-reducing-size-of-an-image-in-java/14050844#14050844\">increasing-resolution-and-reducing-size-of-an-image-in-java</a> and <a href=\"https://stackoverflow.com/questions/6390964/decrease-image-resolution-in-java\">decrease-image-resolution-in-java</a>\nThe problem I am facing is that in the above examples, we are dealing with <code>java.io.File</code> Objects which are saved to a specified location. I dont want to save the image. Is there any way that I can use something similar to compress my Multipart Image file and continue with the upload.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1667928595,"post_id":74086990,"comment_id":131283309,"body_markdown":"if my answer helps request you to please accept it so that it helps others as well.","body":"if my answer helps request you to please accept it so that it helps others as well."}],"answers":[{"tags":[],"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665943196,"creation_date":1665943196,"answer_id":74089508,"question_id":74086990,"body_markdown":"You can achieve this using ```@ConfigurationProperties``` annotation itself. Here is the solution.\r\n\r\n```yaml\r\nintegration:\r\n  mapping:\r\n    - producer:\r\n        name: somename1\r\n        topic: sometopic1\r\n        replyTopic: sometopic1\r\n        replyPartition: 1\r\n      consumer:\r\n        name: somename1\r\n        field_1: ...\r\n        field_2: ...\r\n    - producer:\r\n        name: somename2\r\n        topic: sometopic2\r\n        replyTopic: sometopic2\r\n        replyPartition: 1\r\n      consumer:\r\n        name: somename2\r\n        field_1: ...\r\n        field_2: ...\r\n```\r\n\r\n```java\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;integration&quot;)\r\npublic class AppConfig {\r\n    private List&lt;Mapping&gt; mapping;\r\n\r\n    public List&lt;Mapping&gt; getMapping() {\r\n        return mapping;\r\n    }\r\n\r\n    public void setMapping(List&lt;Mapping&gt; mapping) {\r\n        this.mapping = mapping;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic class Mapping {\r\n    private Producer producer;\r\n\r\n    private Consumer consumer;\r\n\r\n    public Producer getProducer() {\r\n        return producer;\r\n    }\r\n\r\n    public void setProducer(Producer producer) {\r\n        this.producer = producer;\r\n    }\r\n\r\n\r\n    public Consumer getConsumer() {\r\n        return consumer;\r\n    }\r\n\r\n    public void setConsumer(Consumer consumer) {\r\n        this.consumer = consumer;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Mapping{&quot; +\r\n                &quot;producer=&quot; + producer +\r\n                &quot;, consumer=&quot; + consumer +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic class Producer {\r\n    private String replyTopic;\r\n\r\n    public String getReplyTopic() {\r\n        return replyTopic;\r\n    }\r\n\r\n    public void setReplyTopic(String replyTopic) {\r\n        this.replyTopic = replyTopic;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Producer{&quot; +\r\n                &quot;replyTopic=&#39;&quot; + replyTopic + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic class Consumer {\r\n    private String name;\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Consumer{&quot; +\r\n                &quot;name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@SpringBootApplication\r\npublic class DemoApplication implements CommandLineRunner {\r\n\r\n\t@Autowired\r\n\tprivate AppConfig appConfig;\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\tfinal List&lt;Mapping&gt; mapping = appConfig.getMapping();\r\n\t\tfinal List&lt;String&gt; replyTopics = mapping.stream()\r\n\t\t\t\t.map(Mapping::getProducer)\r\n\t\t\t\t.map(Producer::getReplyTopic)\r\n\t\t\t\t.collect(Collectors.toList());\r\n\t\tSystem.out.println(replyTopics);\r\n\t}\r\n}\r\n```\r\n\r\n**Output**\r\n\r\n[sometopic1, sometopic2]\r\n\r\n*I hope this solves your query.*","title":"Parse only specific field from application.yml","body":"<p>You can achieve this using <code>@ConfigurationProperties</code> annotation itself. Here is the solution.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>integration:\n  mapping:\n    - producer:\n        name: somename1\n        topic: sometopic1\n        replyTopic: sometopic1\n        replyPartition: 1\n      consumer:\n        name: somename1\n        field_1: ...\n        field_2: ...\n    - producer:\n        name: somename2\n        topic: sometopic2\n        replyTopic: sometopic2\n        replyPartition: 1\n      consumer:\n        name: somename2\n        field_1: ...\n        field_2: ...\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ConfigurationProperties(prefix = &quot;integration&quot;)\npublic class AppConfig {\n    private List&lt;Mapping&gt; mapping;\n\n    public List&lt;Mapping&gt; getMapping() {\n        return mapping;\n    }\n\n    public void setMapping(List&lt;Mapping&gt; mapping) {\n        this.mapping = mapping;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Mapping {\n    private Producer producer;\n\n    private Consumer consumer;\n\n    public Producer getProducer() {\n        return producer;\n    }\n\n    public void setProducer(Producer producer) {\n        this.producer = producer;\n    }\n\n\n    public Consumer getConsumer() {\n        return consumer;\n    }\n\n    public void setConsumer(Consumer consumer) {\n        this.consumer = consumer;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Mapping{&quot; +\n                &quot;producer=&quot; + producer +\n                &quot;, consumer=&quot; + consumer +\n                '}';\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Producer {\n    private String replyTopic;\n\n    public String getReplyTopic() {\n        return replyTopic;\n    }\n\n    public void setReplyTopic(String replyTopic) {\n        this.replyTopic = replyTopic;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Producer{&quot; +\n                &quot;replyTopic='&quot; + replyTopic + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Consumer {\n    private String name;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Consumer{&quot; +\n                &quot;name='&quot; + name + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class DemoApplication implements CommandLineRunner {\n\n    @Autowired\n    private AppConfig appConfig;\n\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        final List&lt;Mapping&gt; mapping = appConfig.getMapping();\n        final List&lt;String&gt; replyTopics = mapping.stream()\n                .map(Mapping::getProducer)\n                .map(Producer::getReplyTopic)\n                .collect(Collectors.toList());\n        System.out.println(replyTopics);\n    }\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<p>[sometopic1, sometopic2]</p>\n<p><em>I hope this solves your query.</em></p>\n"}],"owner":{"account_id":26639359,"reputation":1,"user_id":20255299,"display_name":"nilibag"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665943196,"creation_date":1665922196,"question_id":74086990,"body_markdown":"I need help with my Spring application configuration file.\r\n\r\nI have configuration looks like this:\r\n\r\n    integration\r\n\tmapping:\r\n\t\t- producer:\r\n\t\t\tname: somename\r\n\t\t\ttopic: sometopic\r\n\t\t\treplyTopic: sometopic\r\n\t\t\treplyPartition: 1\r\n\t\tconsumer:\r\n\t\t\tname: somename\r\n\t\t\tfield_1: ...\r\n\t\t\tfield_2: ...\r\n\t\t- producer:\r\n\t\t\tname: somename\r\n\t\t\ttopic: sometopic\r\n\t\t\treplyTopic: sometopic\r\n\t\t\treplyPartition: 1\r\n\t\tconsumer:\r\n\t\t\tname: somename\r\n\t\t\tfield_1: ...\r\n\t\t\tfield_2: ...\r\n\r\nAnd i need to extract all of the fields &#39;replyTopic&#39; from this configuration. I understand that i can map all of this configs to class with ConfigurationProperties annotation, but i wanna only field replyTopic in order to put this in @KafkaListener annotation, which requires to get topic names in the startup of the application.\r\n\r\nSo basically i want something like this:\r\n\r\n    @KafkaListener(topics = &#39;*some expression to extract all of replyTopic from congiration*&#39;)\r\n\r\nThanks!","title":"Parse only specific field from application.yml","body":"<p>I need help with my Spring application configuration file.</p>\n<p>I have configuration looks like this:</p>\n<pre><code>integration\nmapping:\n    - producer:\n        name: somename\n        topic: sometopic\n        replyTopic: sometopic\n        replyPartition: 1\n    consumer:\n        name: somename\n        field_1: ...\n        field_2: ...\n    - producer:\n        name: somename\n        topic: sometopic\n        replyTopic: sometopic\n        replyPartition: 1\n    consumer:\n        name: somename\n        field_1: ...\n        field_2: ...\n</code></pre>\n<p>And i need to extract all of the fields 'replyTopic' from this configuration. I understand that i can map all of this configs to class with ConfigurationProperties annotation, but i wanna only field replyTopic in order to put this in @KafkaListener annotation, which requires to get topic names in the startup of the application.</p>\n<p>So basically i want something like this:</p>\n<pre><code>@KafkaListener(topics = '*some expression to extract all of replyTopic from congiration*')\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","android","sockets"],"comments":[{"owner":{"account_id":1243610,"reputation":2400,"user_id":1205577,"accept_rate":83,"display_name":"user1205577"},"score":0,"creation_date":1396004006,"post_id":22709676,"comment_id":34606905,"body_markdown":"Have you tried using a FlushedInputStream? Check out this thread: http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html","body":"Have you tried using a FlushedInputStream? Check out this thread: <a href=\"http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html\" rel=\"nofollow noreferrer\">android-developers.blogspot.com/2010/07/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":3470298,"reputation":2646,"user_id":2904829,"display_name":"Nicolas Defranoux"},"score":0,"creation_date":1396117149,"post_id":22711767,"comment_id":34650613,"body_markdown":"I revised my answer ;)","body":"I revised my answer ;)"},{"owner":{"account_id":3371945,"reputation":111,"user_id":2830981,"accept_rate":44,"display_name":"Tony"},"score":0,"creation_date":1396166776,"post_id":22711767,"comment_id":34662279,"body_markdown":"I revised my code like you suggested and I&#39;m so sorry , I didn&#39;t check clinet LogCat , it has an exception , maybe was the exception cause server stuck .","body":"I revised my code like you suggested and I&#39;m so sorry , I didn&#39;t check clinet LogCat , it has an exception , maybe was the exception cause server stuck ."},{"owner":{"account_id":3371945,"reputation":111,"user_id":2830981,"accept_rate":44,"display_name":"Tony"},"score":0,"creation_date":1396237001,"post_id":22711767,"comment_id":34683419,"body_markdown":"I use java try to do same thing , it&#39;s work , why android got exception ?","body":"I use java try to do same thing , it&#39;s work , why android got exception ?"}],"tags":[],"owner":{"account_id":3470298,"reputation":2646,"user_id":2904829,"display_name":"Nicolas Defranoux"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1396117099,"creation_date":1396006589,"answer_id":22711767,"question_id":22709676,"body_markdown":"You should serialize the image before sending it to `ObjectOutputStream`, which is expected to handle serializable objects.\r\n\r\nTry to use bitmap.compress (with a `ByteArrayOutputStream`) then send the byte array to the server, and ois should return a byte array that imageFactory should be able to decode.\r\n\r\n**edited to follow the edited code:**\r\nYou must send your object with writeObject rather than write, then on the receive end you will get a byte array:\r\n\r\nClient:\r\n\r\n    byte[] compressedImage = baos.toByteArray();\r\n    oos.writeObject(compressedImage);\r\n\r\nServer:\r\n\r\n    byte[] compressedBitmap = (byte[]) ois.readObject();\r\n    Bitmap bitmap = BitmapFactory.decodeByteArray(compressedBitmap, 0, compressedBitmap.length);\r\n","title":"Android - Socket NullPointerException","body":"<p>You should serialize the image before sending it to <code>ObjectOutputStream</code>, which is expected to handle serializable objects.</p>\n\n<p>Try to use bitmap.compress (with a <code>ByteArrayOutputStream</code>) then send the byte array to the server, and ois should return a byte array that imageFactory should be able to decode.</p>\n\n<p><strong>edited to follow the edited code:</strong>\nYou must send your object with writeObject rather than write, then on the receive end you will get a byte array:</p>\n\n<p>Client:</p>\n\n<pre><code>byte[] compressedImage = baos.toByteArray();\noos.writeObject(compressedImage);\n</code></pre>\n\n<p>Server:</p>\n\n<pre><code>byte[] compressedBitmap = (byte[]) ois.readObject();\nBitmap bitmap = BitmapFactory.decodeByteArray(compressedBitmap, 0, compressedBitmap.length);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3371945,"reputation":111,"user_id":2830981,"accept_rate":44,"display_name":"Tony"},"score":0,"creation_date":1396097469,"post_id":22730272,"comment_id":34644117,"body_markdown":"Should I import some package? I can&#39;t use BitmapDescriptorFactory","body":"Should I import some package? I can&#39;t use BitmapDescriptorFactory"}],"tags":[],"owner":{"account_id":4220398,"reputation":14,"user_id":3455323,"accept_rate":0,"display_name":"Akhil0181"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1396102529,"creation_date":1396091244,"answer_id":22730272,"question_id":22709676,"body_markdown":"You should use `BitmapDescriptorFactory` instead of `BitmapFactory`.","title":"Android - Socket NullPointerException","body":"<p>You should use <code>BitmapDescriptorFactory</code> instead of <code>BitmapFactory</code>.</p>\n"},{"tags":[],"owner":{"account_id":4220398,"reputation":14,"user_id":3455323,"accept_rate":0,"display_name":"Akhil0181"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1396102517,"creation_date":1396100493,"answer_id":22731849,"question_id":22709676,"body_markdown":"You should import this class:\r\n\r\n    import com.google.android.gms.maps.model.BitmapDescriptorFactory;","title":"Android - Socket NullPointerException","body":"<p>You should import this class:</p>\n\n<pre><code>import com.google.android.gms.maps.model.BitmapDescriptorFactory;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3371945,"reputation":111,"user_id":2830981,"accept_rate":44,"display_name":"Tony"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665942205,"creation_date":1396267349,"answer_id":22761038,"question_id":22709676,"body_markdown":"Revise Clinet code like this \r\n\r\n    \tpublic void SendImage(){\r\n\t\ttry {\r\n\t\t\tInetAddress address = InetAddress.getByName(ServerIP);\r\n\t\t\tclientSocket = new Socket(address, 3000);\r\n\t\t\tObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());\r\n\t\t\tbitmap = BitmapFactory.decodeResource(this.getResources(), R.drawable.image);\r\n\t\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\t\tbitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);\r\n\t\t\tbyte[] compressedImage = baos.toByteArray();\r\n\t\t\toos.writeObject(compressedImage);\r\n\t\t\toos.flush();\r\n\t\t\tObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());\r\n\t\t\tString respond = (String)ois.readObject();\r\n\t\t\tLog.d(&quot;ObjectInputStream&quot;, respond);\t\t\t\r\n\t\t\toos.close();\r\n\t\t\tois.close();\r\n\t\t} catch (Exception e) {\r\n\t\t\tLog.e(&quot;SendImage&quot;, e.toString());\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nit works !","title":"Android - Socket NullPointerException","body":"<p>Revise Clinet code like this</p>\n<pre><code>    public void SendImage(){\n    try {\n        InetAddress address = InetAddress.getByName(ServerIP);\n        clientSocket = new Socket(address, 3000);\n        ObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());\n        bitmap = BitmapFactory.decodeResource(this.getResources(), R.drawable.image);\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);\n        byte[] compressedImage = baos.toByteArray();\n        oos.writeObject(compressedImage);\n        oos.flush();\n        ObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());\n        String respond = (String)ois.readObject();\n        Log.d(&quot;ObjectInputStream&quot;, respond);            \n        oos.close();\n        ois.close();\n    } catch (Exception e) {\n        Log.e(&quot;SendImage&quot;, e.toString());\n    }\n    \n}\n</code></pre>\n<p>it works !</p>\n"}],"owner":{"account_id":3371945,"reputation":111,"user_id":2830981,"accept_rate":44,"display_name":"Tony"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":877,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":22761038,"answer_count":4,"score":0,"last_activity_date":1665942205,"creation_date":1396001252,"question_id":22709676,"body_markdown":"I want to send a image from client to server , when I start sending , server stuck at \r\n\r\n     bitmap = BitmapFactory.decodeStream(ois);\r\n\r\nand after I kill the client activity LogCat show this \r\n\r\n \r\n\r\n    03-28 17:59:41.102: D/skia(12173): --- SkImageDecoder::Factory returned null \r\n     03-28 17:59:41.102: D/ReceiveImage(12173): After BitmapFactory\r\n     03-28 17:59:41.112: D/runOnUiThread(12173): Setting Image \r\n     03-28 17:59:41.142: E/initTCPServer(12173): java.net.SocketException: sendto failed: EPIPE (Broken pipe)\r\n\r\n**EDIT:**\r\n\r\nServer code :\r\n\r\n    \tpublic void ReceiveImage(){\r\n\t\ttry {\r\n\t\t\tserverSocket = new ServerSocket(3000);\r\n\t\t\tSocket clientmessage = serverSocket.accept();\r\n\t\t\tObjectInputStream ois = new ObjectInputStream(clientmessage.getInputStream());\r\n\t\t\t//Object ImageObject = ois.readObject();\t\t\t\r\n\t\t\t//ois.read(image);\r\n\t\t\tLog.d(&quot;ReceiveImage&quot;, &quot;Befor BitmapFactory&quot;);\r\n\t\t\tbyte[] compressedBitmap = (byte[]) ois.readObject();\r\n\t\t\tbitmap = BitmapFactory.decodeByteArray(compressedBitmap, 0, compressedBitmap.length);\r\n\t\t\t//bitmap = BitmapFactory.decodeStream(clientmessage.getInputStream());\r\n\t\t\tLog.d(&quot;ReceiveImage&quot;, &quot;After BitmapFactory&quot;);\r\n\t\t\trunOnUiThread(new Runnable() {\r\n\t\t\t\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\t\tLog.d(&quot;runOnUiThread&quot;, &quot;Setting Image&quot;);\r\n\t\t\t\t\timage.setImageBitmap(bitmap);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tObjectOutputStream oos = new ObjectOutputStream(clientmessage.getOutputStream());\r\n\t\t\toos.writeObject(&quot;Received&quot;);\r\n\t\t\tois.close();\r\n\t\t\toos.close();\r\n\t\t} catch (Exception e) {\r\n\t\t\tLog.e(&quot;initTCPServer&quot;, e.toString());\r\n\t\t}\r\n\t}\r\n\r\n\r\nClient code : \r\n\r\n    \tpublic void SendImage(){\r\n\t\ttry {\r\n\t\t\tclientSocket = new Socket(ServerIP, 3000);\r\n\t\t\tObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());\r\n\t\t\tImageView imageView = (ImageView)findViewById(R.drawable.lena);\r\n\t\t\timageView.setImageBitmap(bitmap);\r\n\t\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\t\tbitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);\r\n\t\t\tbyte[] compressedImage = baos.toByteArray();\r\n\t\t\toos.writeObject(compressedImage);\r\n\t\t\toos.flush();\r\n\t\t\tObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());\r\n\t\t\tString respond = (String)ois.readObject();\r\n\t\t\tLog.d(&quot;ObjectInputStream&quot;, respond);\t\t\t\r\n\t\t\toos.close();\r\n\t\t\tois.close();\r\n\t\t} catch (Exception e) {\r\n\t\t\tLog.e(&quot;SendImage&quot;, e.toString());\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n&gt; 03-30 15:59:22.013: E/SendImage(18664): java.lang.NullPointerException\r\n\r\n\r\nWhat I&#39;m doing wrong?\r\n(Image size : 10KB)","title":"Android - Socket NullPointerException","body":"<p>I want to send a image from client to server , when I start sending , server stuck at </p>\n\n<pre><code> bitmap = BitmapFactory.decodeStream(ois);\n</code></pre>\n\n<p>and after I kill the client activity LogCat show this </p>\n\n<pre><code>03-28 17:59:41.102: D/skia(12173): --- SkImageDecoder::Factory returned null \n 03-28 17:59:41.102: D/ReceiveImage(12173): After BitmapFactory\n 03-28 17:59:41.112: D/runOnUiThread(12173): Setting Image \n 03-28 17:59:41.142: E/initTCPServer(12173): java.net.SocketException: sendto failed: EPIPE (Broken pipe)\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Server code :</p>\n\n<pre><code>    public void ReceiveImage(){\n    try {\n        serverSocket = new ServerSocket(3000);\n        Socket clientmessage = serverSocket.accept();\n        ObjectInputStream ois = new ObjectInputStream(clientmessage.getInputStream());\n        //Object ImageObject = ois.readObject();            \n        //ois.read(image);\n        Log.d(\"ReceiveImage\", \"Befor BitmapFactory\");\n        byte[] compressedBitmap = (byte[]) ois.readObject();\n        bitmap = BitmapFactory.decodeByteArray(compressedBitmap, 0, compressedBitmap.length);\n        //bitmap = BitmapFactory.decodeStream(clientmessage.getInputStream());\n        Log.d(\"ReceiveImage\", \"After BitmapFactory\");\n        runOnUiThread(new Runnable() {\n\n            @Override\n            public void run() {\n                // TODO Auto-generated method stub\n                Log.d(\"runOnUiThread\", \"Setting Image\");\n                image.setImageBitmap(bitmap);\n            }\n        });\n\n        ObjectOutputStream oos = new ObjectOutputStream(clientmessage.getOutputStream());\n        oos.writeObject(\"Received\");\n        ois.close();\n        oos.close();\n    } catch (Exception e) {\n        Log.e(\"initTCPServer\", e.toString());\n    }\n}\n</code></pre>\n\n<p>Client code : </p>\n\n<pre><code>    public void SendImage(){\n    try {\n        clientSocket = new Socket(ServerIP, 3000);\n        ObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());\n        ImageView imageView = (ImageView)findViewById(R.drawable.lena);\n        imageView.setImageBitmap(bitmap);\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);\n        byte[] compressedImage = baos.toByteArray();\n        oos.writeObject(compressedImage);\n        oos.flush();\n        ObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());\n        String respond = (String)ois.readObject();\n        Log.d(\"ObjectInputStream\", respond);            \n        oos.close();\n        ois.close();\n    } catch (Exception e) {\n        Log.e(\"SendImage\", e.toString());\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>03-30 15:59:22.013: E/SendImage(18664): java.lang.NullPointerException</p>\n</blockquote>\n\n<p>What I'm doing wrong?\n(Image size : 10KB)</p>\n"},{"tags":["java","java.util.scanner","lexical-analysis"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665853745,"post_id":74081406,"comment_id":130798195,"body_markdown":"```scanner.useDelimiter(&quot;[!#]&quot;);```  springs to mind. Untested","body":"<code>scanner.useDelimiter(&quot;[!#]&quot;);</code>  springs to mind. Untested"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665854118,"post_id":74081406,"comment_id":130798272,"body_markdown":"Tested: `next()` output in loop: 10,6,4,3,4","body":"Tested: <code>next()</code> output in loop: 10,6,4,3,4"},{"owner":{"account_id":4340307,"reputation":163,"user_id":3543696,"display_name":"redmoncoreyl"},"score":0,"creation_date":1665854278,"post_id":74081406,"comment_id":130798307,"body_markdown":"@g00se the problem with that is I think it will take away the `!` from the value of `scanner.next(totalPattern)` which in this toy example is not a problem, but will be a problem for me down the road.","body":"@g00se the problem with that is I think it will take away the <code>!</code> from the value of <code>scanner.next(totalPattern)</code> which in this toy example is not a problem, but will be a problem for me down the road."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665854387,"post_id":74081406,"comment_id":130798327,"body_markdown":"Well I&#39;m mystified ;) It would be the first token in the line and you know it&#39;s always there don&#39;t you - or maybe it isn&#39;t?","body":"Well I&#39;m mystified ;) It would be the first token in the line and you know it&#39;s always there don&#39;t you - or maybe it isn&#39;t?"},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":1,"creation_date":1665854892,"post_id":74081406,"comment_id":130798435,"body_markdown":"I wouldn&#39;t be using a Scanner at all. Open the input file, read the whole content, and then parse it.","body":"I wouldn&#39;t be using a Scanner at all. Open the input file, read the whole content, and then parse it."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1665855150,"post_id":74081406,"comment_id":130798499,"body_markdown":"The problem we&#39;re facing is that you&#39;re drip feeding the real problem which has the effect of changing the goalposts. Ultimately that&#39;s just wasting time","body":"The problem we&#39;re facing is that you&#39;re drip feeding the real problem which has the effect of changing the goalposts. Ultimately that&#39;s just wasting time"},{"owner":{"account_id":17000499,"reputation":48417,"user_id":12299000,"display_name":"kaya3"},"score":1,"creation_date":1665855434,"post_id":74081406,"comment_id":130798561,"body_markdown":"It sounds like you just want to iterate over all matches of the regex `([!]+|[#]+)[0-9]+` in the input file. If that&#39;s the case, `Scanner` is the wrong tool, you can just do `Pattern.compile(...).matcher(text)` and call `.find` in a loop.","body":"It sounds like you just want to iterate over all matches of the regex <code>([!]+|[#]+)[0-9]+</code> in the input file. If that&#39;s the case, <code>Scanner</code> is the wrong tool, you can just do <code>Pattern.compile(...).matcher(text)</code> and call <code>.find</code> in a loop."},{"owner":{"account_id":1707439,"reputation":236126,"user_id":1566221,"accept_rate":86,"display_name":"rici"},"score":0,"creation_date":1665955265,"post_id":74081406,"comment_id":130814849,"body_markdown":"If you have a non-trivial lexical analysis problem, consider using a tool designed to help you with non-trivial lexical analysis problems. Like, for example, [JFlex](https://www.jflex.de/). I&#39;m sure there are others; I&#39;m not very familiar with the Java environment.","body":"If you have a non-trivial lexical analysis problem, consider using a tool designed to help you with non-trivial lexical analysis problems. Like, for example, <a href=\"https://www.jflex.de/\" rel=\"nofollow noreferrer\">JFlex</a>. I&#39;m sure there are others; I&#39;m not very familiar with the Java environment."}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665857720,"creation_date":1665857720,"answer_id":74081938,"question_id":74081406,"body_markdown":"To parse the example strings you provided, you could do something like this:\r\n\r\n    String s = &quot;!!!10#6###4!!3#4&quot;;\r\n        \r\n    StringBuilder sb = new StringBuilder(&quot;&quot;);\r\n        \r\n    /* Iterate through the tags after spliting the \r\n       string using the numbers as delimiter.   */\r\n    for (String tag : s.split(&quot;\\\\d{1,}&quot;)) {\r\n        /* Replace any one (or more in sequence) ! with \r\n           the word &quot;total &quot; in the current tag element\r\n           and on the same hand, if the current tag element\r\n           contains # replace any one (or more in sequence) \r\n           # with the word &quot;value &quot;                    */\r\n        sb.append(tag.replaceAll(&quot;[!]{1,}&quot;, &quot;total &quot;).replaceAll(&quot;[#]{1,}&quot;, &quot;value &quot;));\r\n    }\r\n        \r\n    String output = sb.toString().trim();\r\n    System.out.println(output);\r\n\r\nIf `s` contained `!10#6#4!3#4` then the console display will show `total value value total value`. If the variable `s` contained `!!!10#6###4!!3#4` then again, the console display will show `total value value total value`.","title":"How can I scan a file with no delimiter between tokens in Java?","body":"<p>To parse the example strings you provided, you could do something like this:</p>\n<pre><code>String s = &quot;!!!10#6###4!!3#4&quot;;\n    \nStringBuilder sb = new StringBuilder(&quot;&quot;);\n    \n/* Iterate through the tags after spliting the \n   string using the numbers as delimiter.   */\nfor (String tag : s.split(&quot;\\\\d{1,}&quot;)) {\n    /* Replace any one (or more in sequence) ! with \n       the word &quot;total &quot; in the current tag element\n       and on the same hand, if the current tag element\n       contains # replace any one (or more in sequence) \n       # with the word &quot;value &quot;                    */\n    sb.append(tag.replaceAll(&quot;[!]{1,}&quot;, &quot;total &quot;).replaceAll(&quot;[#]{1,}&quot;, &quot;value &quot;));\n}\n    \nString output = sb.toString().trim();\nSystem.out.println(output);\n</code></pre>\n<p>If <code>s</code> contained <code>!10#6#4!3#4</code> then the console display will show <code>total value value total value</code>. If the variable <code>s</code> contained <code>!!!10#6###4!!3#4</code> then again, the console display will show <code>total value value total value</code>.</p>\n"},{"tags":[],"owner":{"account_id":4340307,"reputation":163,"user_id":3543696,"display_name":"redmoncoreyl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665941968,"creation_date":1665941968,"answer_id":74089379,"question_id":74081406,"body_markdown":"What I have described as my desired solution in the last edit is called [lexical analysis.][1]\r\n\r\nI decided that the best choice was to take inspiration from [this SO post for making a Java Lexer.][2]\r\n\r\nAdditionally, as this [SO answer describes][3], lexing large files could be a problem, so using a buffer that I can add on to when a match isn&#39;t found might be a good idea also.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Lexical_analysis\r\n  [2]: https://stackoverflow.com/q/43067869/3543696\r\n  [3]: https://stackoverflow.com/a/47577075/3543696","title":"How can I scan a file with no delimiter between tokens in Java?","body":"<p>What I have described as my desired solution in the last edit is called <a href=\"https://en.wikipedia.org/wiki/Lexical_analysis\" rel=\"nofollow noreferrer\">lexical analysis.</a></p>\n<p>I decided that the best choice was to take inspiration from <a href=\"https://stackoverflow.com/q/43067869/3543696\">this SO post for making a Java Lexer.</a></p>\n<p>Additionally, as this <a href=\"https://stackoverflow.com/a/47577075/3543696\">SO answer describes</a>, lexing large files could be a problem, so using a buffer that I can add on to when a match isn't found might be a good idea also.</p>\n"}],"owner":{"account_id":4340307,"reputation":163,"user_id":3543696,"display_name":"redmoncoreyl"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1665942138,"creation_date":1665853112,"question_id":74081406,"body_markdown":"I have text input which looks like this:\r\n\r\n```lan-txt\r\n!10#6#4!3#4\r\n```\r\n\r\nI have two patterns for the two types of data found in the input above:\r\n\r\n```lang-java\r\nPattern totalPattern = Pattern.compile(&quot;![0-9]+&quot;);\r\nPattern valuePattern = Pattern.compile(&quot;#[0-9]+&quot;);\r\n```\r\n\r\nI wanted to get the following output from the input above:\r\n\r\n```lang-txt\r\ntotal value value total value\r\n```\r\n\r\nSo I wrote the following code to solve this problem:\r\n\r\n```lang-java\r\ntry (Scanner scanner = new Scanner(inputFile)) {\r\n    while (scanner.hasNext()) {\r\n        if (scanner.hasNext(totalPattern) {\r\n            System.out.print(&quot;total &quot;);\r\n            scanner.next(totalPattern);\r\n        } else if (scanner.hasNext(valuePattern)) {\r\n            System.out.print(&quot;value &quot;);\r\n            scanner.next(valuePattern);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBut this obviously did not work because it couldn&#39;t separate the input into tokens because there are no delimiters in the input. The scanner sees the entire input as one big single token. I know I could change the input to have spaces before the `#` and `!`, but I&#39;m not allowed to change the input for this problem. I tried messing with the scanner to change the delimiter but couldn&#39;t get it to work. I kind of think that the Scanner isn&#39;t the right tool for this job, but I&#39;m not really sure what is.\r\n\r\n**Edit**\r\n\r\nAs g00se pointed out, I could use `!` and `#` as delimiters. In the above example  that wouldn&#39;t be a problem, but to change the problem slightly, suppose the input was:\r\n\r\n```lang-txt\r\n!!!10#6###4!!3#4\r\n```\r\n\r\nThe patterns would be:\r\n\r\n```lang-java\r\nPattern totalPattern = Pattern.compile(&quot;[!]+[0-9]+&quot;);\r\nPattern valuePattern = Pattern.compile(&quot;[#]+[0-9]+&quot;);\r\n```\r\n\r\nIf I wanted to use the number of `!` or `#` as part of the information encoded in the data, using `!` and `#` as delimiters doesn&#39;t work. I still think Scanner is not the right tool, I just don&#39;t know what is.\r\n\r\n**Edit 2**\r\n\r\nOkay, I realize that I didn&#39;t really write this question in the right way and I have waisted some time. Ultimately I wanted a solution that is more general purpose. The solution should take in a series of patterns, and consume the input from the front and return a series of tokens that it can break the input into. The two patters from above are just examples. I realize now though that because I didn&#39;t specify the type of solution I wanted, I got some great answers which solved the problem given above in the simplest way possible.","title":"How can I scan a file with no delimiter between tokens in Java?","body":"<p>I have text input which looks like this:</p>\n<pre><code>!10#6#4!3#4\n</code></pre>\n<p>I have two patterns for the two types of data found in the input above:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Pattern totalPattern = Pattern.compile(&quot;![0-9]+&quot;);\nPattern valuePattern = Pattern.compile(&quot;#[0-9]+&quot;);\n</code></pre>\n<p>I wanted to get the following output from the input above:</p>\n<pre class=\"lang-txt prettyprint-override\"><code>total value value total value\n</code></pre>\n<p>So I wrote the following code to solve this problem:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (Scanner scanner = new Scanner(inputFile)) {\n    while (scanner.hasNext()) {\n        if (scanner.hasNext(totalPattern) {\n            System.out.print(&quot;total &quot;);\n            scanner.next(totalPattern);\n        } else if (scanner.hasNext(valuePattern)) {\n            System.out.print(&quot;value &quot;);\n            scanner.next(valuePattern);\n        }\n    }\n}\n</code></pre>\n<p>But this obviously did not work because it couldn't separate the input into tokens because there are no delimiters in the input. The scanner sees the entire input as one big single token. I know I could change the input to have spaces before the <code>#</code> and <code>!</code>, but I'm not allowed to change the input for this problem. I tried messing with the scanner to change the delimiter but couldn't get it to work. I kind of think that the Scanner isn't the right tool for this job, but I'm not really sure what is.</p>\n<p><strong>Edit</strong></p>\n<p>As g00se pointed out, I could use <code>!</code> and <code>#</code> as delimiters. In the above example  that wouldn't be a problem, but to change the problem slightly, suppose the input was:</p>\n<pre class=\"lang-txt prettyprint-override\"><code>!!!10#6###4!!3#4\n</code></pre>\n<p>The patterns would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Pattern totalPattern = Pattern.compile(&quot;[!]+[0-9]+&quot;);\nPattern valuePattern = Pattern.compile(&quot;[#]+[0-9]+&quot;);\n</code></pre>\n<p>If I wanted to use the number of <code>!</code> or <code>#</code> as part of the information encoded in the data, using <code>!</code> and <code>#</code> as delimiters doesn't work. I still think Scanner is not the right tool, I just don't know what is.</p>\n<p><strong>Edit 2</strong></p>\n<p>Okay, I realize that I didn't really write this question in the right way and I have waisted some time. Ultimately I wanted a solution that is more general purpose. The solution should take in a series of patterns, and consume the input from the front and return a series of tokens that it can break the input into. The two patters from above are just examples. I realize now though that because I didn't specify the type of solution I wanted, I got some great answers which solved the problem given above in the simplest way possible.</p>\n"},{"tags":["java","postgresql","hibernate","jpa"],"comments":[{"owner":{"account_id":9513375,"reputation":16527,"user_id":7070613,"display_name":"Adrian Klaver"},"score":0,"creation_date":1665855056,"post_id":74081466,"comment_id":130798472,"body_markdown":"In short I think you are over complicating this. 1) Why not use `json_array_elements_text()` that will return `text` and save a cast? 2) What is the value that `d.data-&gt;&gt;&#39;categorys&#39;` is returning? Because `-&gt;&gt;` returns `text`. Add information as update to question.","body":"In short I think you are over complicating this. 1) Why not use <code>json_array_elements_text()</code> that will return <code>text</code> and save a cast? 2) What is the value that <code>d.data-&gt;&gt;&#39;categorys&#39;</code> is returning? Because <code>-&gt;&gt;</code> returns <code>text</code>. Add information as update to question."},{"owner":{"account_id":15201372,"reputation":11,"user_id":10969269,"display_name":"Eduardojls"},"score":0,"creation_date":1665861565,"post_id":74081466,"comment_id":130799763,"body_markdown":"In one hand I already edited the post in order to fulfilled your suggestion.\n\nIn the other hand, yes, you are right, I saved a cast using `json_array_elements_text()`, but now it throws the following error message: `operator does not exist: integer = bytea`. Any idea what&#39;s wrong?","body":"In one hand I already edited the post in order to fulfilled your suggestion.  In the other hand, yes, you are right, I saved a cast using <code>json_array_elements_text()</code>, but now it throws the following error message: <code>operator does not exist: integer = bytea</code>. Any idea what&#39;s wrong?"}],"answers":[{"tags":[],"owner":{"account_id":15201372,"reputation":11,"user_id":10969269,"display_name":"Eduardojls"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665867306,"creation_date":1665867306,"answer_id":74082962,"question_id":74081466,"body_markdown":"I found the solution to this:\r\n\r\n 1. I saved from casting each element twice by using `json_array_elements_text` instead of `json_array_elements`, the first one returns the values already as Strings. The second one was producing this error message: `No dialect for mapping 1111` due to a bad cast syntax made by me. This thanks to the wonderful suggestion from @AdrianKlaver\r\n 2. Doing `select d.data` seemed not to work, because it was returning an unknown data type for Hibernate, instead I returned `d.id`because I was really expecting each categoryId as Long type.\r\n 3. Used this `CAST(e as int4)` instead of this `as Integer`\r\n 4. Removed an extra @Param (id) of my **yest()** method\r\n\r\nThe final query is as shown below:\r\n\r\n    @Query(\r\n            nativeQuery = true,\r\n            value = &quot;SELECT distinct d.id FROM myScheme.myTable d, myScheme.mySecondTable g &quot; +\r\n                    &quot;,json_array_elements_text(d.data-&gt;&gt;&#39;categorys&#39;) e &quot; +\r\n                    &quot;where d.data-&gt;&gt;&#39;categorys&#39; is not null &quot; +\r\n                    &quot;AND CAST(e as int4) in (g.id_product_category_magento) &quot; +\r\n                    &quot;AND CAST(e as int4) in (:categories)&quot;\r\n    )\r\n    List&lt;Long&gt; yest(List&lt;Long&gt; categories);\r\n\r\nHope this helps someone in the future. :)","title":"How to CAST twice an element in a row JPA","body":"<p>I found the solution to this:</p>\n<ol>\n<li>I saved from casting each element twice by using <code>json_array_elements_text</code> instead of <code>json_array_elements</code>, the first one returns the values already as Strings. The second one was producing this error message: <code>No dialect for mapping 1111</code> due to a bad cast syntax made by me. This thanks to the wonderful suggestion from @AdrianKlaver</li>\n<li>Doing <code>select d.data</code> seemed not to work, because it was returning an unknown data type for Hibernate, instead I returned <code>d.id</code>because I was really expecting each categoryId as Long type.</li>\n<li>Used this <code>CAST(e as int4)</code> instead of this <code>as Integer</code></li>\n<li>Removed an extra @Param (id) of my <strong>yest()</strong> method</li>\n</ol>\n<p>The final query is as shown below:</p>\n<pre><code>@Query(\n        nativeQuery = true,\n        value = &quot;SELECT distinct d.id FROM myScheme.myTable d, myScheme.mySecondTable g &quot; +\n                &quot;,json_array_elements_text(d.data-&gt;&gt;'categorys') e &quot; +\n                &quot;where d.data-&gt;&gt;'categorys' is not null &quot; +\n                &quot;AND CAST(e as int4) in (g.id_product_category_magento) &quot; +\n                &quot;AND CAST(e as int4) in (:categories)&quot;\n)\nList&lt;Long&gt; yest(List&lt;Long&gt; categories);\n</code></pre>\n<p>Hope this helps someone in the future. :)</p>\n"}],"owner":{"account_id":15201372,"reputation":11,"user_id":10969269,"display_name":"Eduardojls"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665940899,"creation_date":1665853681,"question_id":74081466,"body_markdown":"I&#39;ve done a query with PostgreSQL that retrieves certain data as I expected: (It works)\r\n\r\n``` sql\r\nSELECT distinct d.data \r\nFROM myScheme.myTable d, myScheme.mySecondTable g, json_array_elements(d.data-&gt;&gt;&#39;categorys&#39;) e \r\nwhere d.data-&gt;&gt;&#39;categorys&#39; is not null \r\nAND e::text::int in (g.id_product_category_magento)\r\nAND e::text::int IN (21718, 17);\r\n```\r\n\r\nThe problem is when I try to do the same query with Java using JPA. This is not worked script:\r\n\r\n``` java\r\n@Query(\r\n    nativeQuery = true,\r\n    value = &quot;SELECT DISTINC d.data &quot; +\r\n        &quot;FROM myScheme.myTable d, myScheme.mySecondTable g, &quot; +\r\n        &quot;json_array_elements(d.data-&gt;&gt;&#39;categorys&#39;) e &quot; +\r\n        &quot;where d.id = :id AND d.data-&gt;&gt;&#39;categorys&#39; is not null &quot; +\r\n        &quot;AND CAST(CAST(e as text) as Integer) in (g.id_product_category_magento) &quot; +\r\n        &quot;AND CAST(CAST(e as text) as Integer) IN (:categories)&quot;\r\n)\r\nList&lt;ServiceDefinition&gt; yest(Set&lt;Long&gt; categories, @Param(&quot;id&quot;) Long id);\r\n```\r\n\r\nThe stack trace throws the following error message: \r\n\r\n```\r\nNo dialect for Mapping JDBC 1111\r\n```\r\n\r\nThings to keep in mind:\r\n\r\n - b.data -&gt;&gt; &#39;categorys&#39; is an array of Strings that contains string values such as: [&#39;123&#39;, &#39;456&#39;, &#39;789&#39;] and should return each one of this values.\r\n\r\nPd: I&#39;m not sure if this is the right way to cast a value twice: `AND CAST(CAST(e as text) as Integer)`.","title":"How to CAST twice an element in a row JPA","body":"<p>I've done a query with PostgreSQL that retrieves certain data as I expected: (It works)</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT distinct d.data \nFROM myScheme.myTable d, myScheme.mySecondTable g, json_array_elements(d.data-&gt;&gt;'categorys') e \nwhere d.data-&gt;&gt;'categorys' is not null \nAND e::text::int in (g.id_product_category_magento)\nAND e::text::int IN (21718, 17);\n</code></pre>\n<p>The problem is when I try to do the same query with Java using JPA. This is not worked script:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\n    nativeQuery = true,\n    value = &quot;SELECT DISTINC d.data &quot; +\n        &quot;FROM myScheme.myTable d, myScheme.mySecondTable g, &quot; +\n        &quot;json_array_elements(d.data-&gt;&gt;'categorys') e &quot; +\n        &quot;where d.id = :id AND d.data-&gt;&gt;'categorys' is not null &quot; +\n        &quot;AND CAST(CAST(e as text) as Integer) in (g.id_product_category_magento) &quot; +\n        &quot;AND CAST(CAST(e as text) as Integer) IN (:categories)&quot;\n)\nList&lt;ServiceDefinition&gt; yest(Set&lt;Long&gt; categories, @Param(&quot;id&quot;) Long id);\n</code></pre>\n<p>The stack trace throws the following error message:</p>\n<pre><code>No dialect for Mapping JDBC 1111\n</code></pre>\n<p>Things to keep in mind:</p>\n<ul>\n<li>b.data -&gt;&gt; 'categorys' is an array of Strings that contains string values such as: ['123', '456', '789'] and should return each one of this values.</li>\n</ul>\n<p>Pd: I'm not sure if this is the right way to cast a value twice: <code>AND CAST(CAST(e as text) as Integer)</code>.</p>\n"},{"tags":["java","list","collections","duplicates"],"comments":[{"owner":{"account_id":2539,"reputation":48119,"user_id":3542,"display_name":"Rob"},"score":1,"creation_date":1225980287,"post_id":268672,"comment_id":123587,"body_markdown":"Why does it need to implement List? Sets are iterable, like lists, so I suppose the receiving method is enforcing List for some other reason.","body":"Why does it need to implement List? Sets are iterable, like lists, so I suppose the receiving method is enforcing List for some other reason."},{"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"score":0,"creation_date":1225980830,"post_id":268672,"comment_id":123600,"body_markdown":"@Rob That&#39;s right, it&#39;s an external demand, and the data structure includes a hell of a lot more than one List.","body":"@Rob That&#39;s right, it&#39;s an external demand, and the data structure includes a hell of a lot more than one List."},{"owner":{"account_id":44321,"reputation":9248,"user_id":130028,"accept_rate":79,"display_name":"marcolopes"},"score":0,"creation_date":1457064925,"post_id":268672,"comment_id":59246601,"body_markdown":"If the user wants a LIST, then it&#39;s clear that needs methods of the LIST interface that are not present um the SET interface...","body":"If the user wants a LIST, then it&#39;s clear that needs methods of the LIST interface that are not present um the SET interface..."}],"answers":[{"comments":[{"owner":{"account_id":5292,"reputation":5876,"user_id":8434,"display_name":"Calum"},"score":6,"creation_date":1225978534,"post_id":268691,"comment_id":123546,"body_markdown":"This constructor copies the contents of the Set into the new List, rather than wrapping it.","body":"This constructor copies the contents of the Set into the new List, rather than wrapping it."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1225988770,"post_id":268691,"comment_id":123911,"body_markdown":"@Calum, that is correct, but instead of worrying about not adding duplicates to a List, he can add his objects to a Set (and let the Set worry about filtering out duplicates) and just wrap that Set in a List when passing it to the external method.","body":"@Calum, that is correct, but instead of worrying about not adding duplicates to a List, he can add his objects to a Set (and let the Set worry about filtering out duplicates) and just wrap that Set in a List when passing it to the external method."},{"owner":{"account_id":143433,"reputation":8912,"user_id":351758,"accept_rate":73,"display_name":"Janning Vygen"},"score":5,"creation_date":1336048362,"post_id":268691,"comment_id":13463121,"body_markdown":"This copies a set to a list but you don&#39;t have any well-known ordering. But this what the question is all about.","body":"This copies a set to a list but you don&#39;t have any well-known ordering. But this what the question is all about."}],"tags":[],"owner":{"account_id":8891,"reputation":3425,"user_id":16193,"accept_rate":88,"display_name":"Daniel Hiller"},"comment_count":3,"down_vote_count":9,"up_vote_count":15,"is_accepted":false,"score":6,"last_activity_date":1511387519,"creation_date":1225978375,"answer_id":268691,"question_id":268672,"body_markdown":"Why not encapsulate a set with a list, sort like:\r\n\r\n    new ArrayList( new LinkedHashSet() )\r\n\r\nThis leaves the other implementation for someone who is a real master of Collections ;-)","title":"Is there a no-duplicate List implementation out there?","body":"<p>Why not encapsulate a set with a list, sort like:</p>\n\n<pre><code>new ArrayList( new LinkedHashSet() )\n</code></pre>\n\n<p>This leaves the other implementation for someone who is a real master of Collections ;-)</p>\n"},{"comments":[{"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"score":0,"creation_date":1225981020,"post_id":268700,"comment_id":123606,"body_markdown":"I specifically mentioned that I need a List implementation. Trust me, there&#39;s a reason.","body":"I specifically mentioned that I need a List implementation. Trust me, there&#39;s a reason."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1225988279,"post_id":268700,"comment_id":123889,"body_markdown":"Is the reason because you&#39;re interacting with an API that is taking a List as a parameter (instead of a Collection)? That&#39;s a bit annoying to have to deal with","body":"Is the reason because you&#39;re interacting with an API that is taking a List as a parameter (instead of a Collection)? That&#39;s a bit annoying to have to deal with"},{"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"score":0,"creation_date":1225992360,"post_id":268700,"comment_id":124053,"body_markdown":"Actually the API takes a Map&lt;AccountType, Map&lt;AccountType, List&lt;Account&gt;&gt;&gt;, which means holding somewhere in the vicinity of dozens to hundreds of lists... bah.","body":"Actually the API takes a Map&lt;AccountType, Map&lt;AccountType, List&lt;Account&gt;&gt;&gt;, which means holding somewhere in the vicinity of dozens to hundreds of lists... bah."},{"owner":{"account_id":2344761,"reputation":129,"user_id":2055311,"accept_rate":50,"display_name":"Al G Johnston"},"score":0,"creation_date":1587215738,"post_id":268700,"comment_id":108425033,"body_markdown":"Constructing probability functions with element-probability pairs can involve not have duplicates, although duplicate elements could just be merged.","body":"Constructing probability functions with element-probability pairs can involve not have duplicates, although duplicate elements could just be merged."}],"tags":[],"owner":{"account_id":16211,"reputation":41,"user_id":35082,"display_name":"Hauch"},"comment_count":4,"down_vote_count":5,"up_vote_count":5,"is_accepted":false,"score":0,"last_activity_date":1506597358,"creation_date":1225978548,"answer_id":268700,"question_id":268672,"body_markdown":"The [documentation for collection interfaces][1] says:\r\n\r\n&gt; Set — a collection that cannot contain duplicate elements.  \r\n&gt; List — an ordered collection (sometimes called a sequence). Lists can contain duplicate elements.\r\n\r\nSo if you don&#39;t want duplicates, you probably shouldn&#39;t use a list.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/collections/interfaces/index.html","title":"Is there a no-duplicate List implementation out there?","body":"<p>The <a href=\"http://docs.oracle.com/javase/tutorial/collections/interfaces/index.html\" rel=\"nofollow noreferrer\">documentation for collection interfaces</a> says:</p>\n\n<blockquote>\n  <p>Set — a collection that cannot contain duplicate elements.<br>\n  List — an ordered collection (sometimes called a sequence). Lists can contain duplicate elements.</p>\n</blockquote>\n\n<p>So if you don't want duplicates, you probably shouldn't use a list.</p>\n"},{"comments":[{"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"score":6,"creation_date":1225981172,"post_id":268713,"comment_id":123614,"body_markdown":"The Commons class is exactly what I need, but my boss told me to implement it myself eventually. 10x anyway!","body":"The Commons class is exactly what I need, but my boss told me to implement it myself eventually. 10x anyway!"},{"owner":{"account_id":5292,"reputation":5876,"user_id":8434,"display_name":"Calum"},"score":5,"creation_date":1225993234,"post_id":268713,"comment_id":124093,"body_markdown":"Ah well, nothing like reinventing the wheel! You&#39;ll know now if the need comes up again, anyway. collections15 is a pretty useful thing to have kicking around; MultiMaps in particular ease the pain of something one ends up implementing oneself a lot.","body":"Ah well, nothing like reinventing the wheel! You&#39;ll know now if the need comes up again, anyway. collections15 is a pretty useful thing to have kicking around; MultiMaps in particular ease the pain of something one ends up implementing oneself a lot."},{"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"score":20,"creation_date":1248240888,"post_id":268713,"comment_id":982533,"body_markdown":"@skaffman: he&#39;s not actually an idiot, but sometimes he makes moves that are... well, odd. Anyway, I&#39;m not gonna introduce bugs into the product. In today&#39;s market, I&#39;m happy with my job and not looking to slam doors and burn bridges, if you get my point.","body":"@skaffman: he&#39;s not actually an idiot, but sometimes he makes moves that are... well, odd. Anyway, I&#39;m not gonna introduce bugs into the product. In today&#39;s market, I&#39;m happy with my job and not looking to slam doors and burn bridges, if you get my point."},{"owner":{"account_id":85429,"reputation":9406,"user_id":238190,"accept_rate":71,"display_name":"emeraldhieu"},"score":3,"creation_date":1339993106,"post_id":268713,"comment_id":14500201,"body_markdown":"I&#39;m quite surprise when SetUniqueList doesn&#39;t have parameterized type.","body":"I&#39;m quite surprise when SetUniqueList doesn&#39;t have parameterized type."},{"owner":{"account_id":134964,"reputation":22313,"user_id":337455,"accept_rate":80,"display_name":"Jeffrey Blattman"},"score":2,"creation_date":1360263977,"post_id":268713,"comment_id":20657060,"body_markdown":"wrapping LinkedHashSet in a list doesn&#39;t make it easy or efficient to implement all of the index-based operations on a list. i don&#39;t think that&#39;s a reasonable approach. and also, there are reason not to pull in the commons things, for example, on a mobile platform where size matters.","body":"wrapping LinkedHashSet in a list doesn&#39;t make it easy or efficient to implement all of the index-based operations on a list. i don&#39;t think that&#39;s a reasonable approach. and also, there are reason not to pull in the commons things, for example, on a mobile platform where size matters."},{"owner":{"account_id":5292,"reputation":5876,"user_id":8434,"display_name":"Calum"},"score":3,"creation_date":1360595420,"post_id":268713,"comment_id":20751773,"body_markdown":"Jeffrey: On mobile platforms the system will usually remove unused classes, but sure, there&#39;s plenty of reasons you might not go down one of these &quot;normal&quot; solutions. There&#39;s always some trade-off to be made, and no solution will fix all cases.","body":"Jeffrey: On mobile platforms the system will usually remove unused classes, but sure, there&#39;s plenty of reasons you might not go down one of these &quot;normal&quot; solutions. There&#39;s always some trade-off to be made, and no solution will fix all cases."},{"owner":{"account_id":1136310,"reputation":2023,"user_id":1121324,"accept_rate":70,"display_name":"miroslavign"},"score":0,"creation_date":1528902751,"post_id":268713,"comment_id":88685038,"body_markdown":"Just keep in mind, sorting will NOT work on that &quot;list&quot;","body":"Just keep in mind, sorting will NOT work on that &quot;list&quot;"}],"tags":[],"owner":{"account_id":5292,"reputation":5876,"user_id":8434,"display_name":"Calum"},"comment_count":7,"down_vote_count":0,"up_vote_count":106,"is_accepted":true,"score":106,"last_activity_date":1506596001,"creation_date":1225978722,"answer_id":268713,"question_id":268672,"body_markdown":"There&#39;s no Java collection in the standard library to do this. [`LinkedHashSet&lt;E&gt;`][1] preserves ordering similarly to a `List`, though, so if you wrap your set in a `List` when you want to use it as a `List` you&#39;ll get the semantics you want.\r\n\r\nAlternatively, the [Commons Collections][2] (or `commons-collections4`, for the generic version) has a `List` which does what you want already: [`SetUniqueList`][3] / [`SetUniqueList&lt;E&gt;`][4].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/LinkedHashSet.html\r\n  [2]: https://commons.apache.org/proper/commons-collections/\r\n  [3]: https://commons.apache.org/proper/commons-collections/javadocs/api-3.2.2/index.html?org/apache/commons/collections/list/SetUniqueList.html\r\n  [4]: https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/list/SetUniqueList.html","title":"Is there a no-duplicate List implementation out there?","body":"<p>There's no Java collection in the standard library to do this. <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/LinkedHashSet.html\" rel=\"noreferrer\"><code>LinkedHashSet&lt;E&gt;</code></a> preserves ordering similarly to a <code>List</code>, though, so if you wrap your set in a <code>List</code> when you want to use it as a <code>List</code> you'll get the semantics you want.</p>\n\n<p>Alternatively, the <a href=\"https://commons.apache.org/proper/commons-collections/\" rel=\"noreferrer\">Commons Collections</a> (or <code>commons-collections4</code>, for the generic version) has a <code>List</code> which does what you want already: <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-3.2.2/index.html?org/apache/commons/collections/list/SetUniqueList.html\" rel=\"noreferrer\"><code>SetUniqueList</code></a> / <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/list/SetUniqueList.html\" rel=\"noreferrer\"><code>SetUniqueList&lt;E&gt;</code></a>.</p>\n"},{"comments":[{"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"score":0,"creation_date":1225992188,"post_id":268719,"comment_id":124046,"body_markdown":"I was ready to fall back to this idea (which eventually I had to) if no one suggested anything better =8-) See my own answer above.","body":"I was ready to fall back to this idea (which eventually I had to) if no one suggested anything better =8-) See my own answer above."}],"tags":[],"owner":{"account_id":8722,"reputation":10944,"user_id":15852,"accept_rate":94,"display_name":"Kieveli"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1506597229,"creation_date":1225978851,"answer_id":268719,"question_id":268672,"body_markdown":"Off the top of my head, lists allow duplicates. You could quickly implement a `UniqueArrayList` and override all the `add` / `insert` functions to check for `contains()` before you call the inherited methods. For personal use, you could only implement the `add` method you use, and override the others to throw an exception in case future programmers try to use the list in a different manner.","title":"Is there a no-duplicate List implementation out there?","body":"<p>Off the top of my head, lists allow duplicates. You could quickly implement a <code>UniqueArrayList</code> and override all the <code>add</code> / <code>insert</code> functions to check for <code>contains()</code> before you call the inherited methods. For personal use, you could only implement the <code>add</code> method you use, and override the others to throw an exception in case future programmers try to use the list in a different manner.</p>\n"},{"comments":[{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":10,"creation_date":1225988508,"post_id":268818,"comment_id":123897,"body_markdown":"Be careful - LinkedList.contains() needs to scan the entire list to determine if an object is contained in the List. This means that when you are adding objects to a large List, the entire List is scanned for each add operation (in the worst case). This can end up being SLOW.","body":"Be careful - LinkedList.contains() needs to scan the entire list to determine if an object is contained in the List. This means that when you are adding objects to a large List, the entire List is scanned for each add operation (in the worst case). This can end up being SLOW."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":8,"creation_date":1225988631,"post_id":268818,"comment_id":123903,"body_markdown":"Also, your addAll override doesn&#39;t check for duplicates in the collection being passed to addAll().","body":"Also, your addAll override doesn&#39;t check for duplicates in the collection being passed to addAll()."},{"owner":{"account_id":1260896,"reputation":1488,"user_id":1219213,"accept_rate":60,"display_name":"TheRealChx101"},"score":0,"creation_date":1554445957,"post_id":268818,"comment_id":97762411,"body_markdown":"@mattb How would you solve this problem then: On Android, when binding objects to a list item view, we are given the position of the item in the view adapter. Since sets have no index, the only way is to check whether or not the object exists when using lists is to iterate through and look for an existing copy.","body":"@mattb How would you solve this problem then: On Android, when binding objects to a list item view, we are given the position of the item in the view adapter. Since sets have no index, the only way is to check whether or not the object exists when using lists is to iterate through and look for an existing copy."},{"owner":{"account_id":143496,"reputation":1912,"user_id":351861,"display_name":"specializt"},"score":0,"creation_date":1623137826,"post_id":268818,"comment_id":119986252,"body_markdown":"the performance-problems of this solution could be fixed with a simple, additional `Set&lt;Integer&gt;` which stores the hashCodes of the elements _(instead of searching through the entire list)_ - which would require all of the elements to properly implement hashCode(), of course but with helper frameworks like Lombok, this really is no problem ... its kind of trivial, actually.\nOne could even optimize *that* solution with a red/black-tree for hashCodes ... small memory overhead for large performance gains; welcome to the world of cloud computing ;-)","body":"the performance-problems of this solution could be fixed with a simple, additional <code>Set&lt;Integer&gt;</code> which stores the hashCodes of the elements <i>(instead of searching through the entire list)</i> - which would require all of the elements to properly implement hashCode(), of course but with helper frameworks like Lombok, this really is no problem ... its kind of trivial, actually. One could even optimize <i>that</i> solution with a red/black-tree for hashCodes ... small memory overhead for large performance gains; welcome to the world of cloud computing ;-)"}],"tags":[],"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"comment_count":4,"down_vote_count":5,"up_vote_count":17,"is_accepted":false,"score":12,"last_activity_date":1311748778,"creation_date":1225980951,"answer_id":268818,"question_id":268672,"body_markdown":"So here&#39;s what I did eventually. I hope this helps someone else.\r\n\r\n\tclass NoDuplicatesList&lt;E&gt; extends LinkedList&lt;E&gt; {\r\n\t\t@Override\r\n\t\tpublic boolean add(E e) {\r\n\t\t\tif (this.contains(e)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn super.add(e);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic boolean addAll(Collection&lt;? extends E&gt; collection) {\r\n\t\t\tCollection&lt;E&gt; copy = new LinkedList&lt;E&gt;(collection);\r\n\t\t\tcopy.removeAll(this);\r\n\t\t\treturn super.addAll(copy);\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic boolean addAll(int index, Collection&lt;? extends E&gt; collection) {\r\n\t\t\tCollection&lt;E&gt; copy = new LinkedList&lt;E&gt;(collection);\r\n\t\t\tcopy.removeAll(this);\r\n\t\t\treturn super.addAll(index, copy);\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void add(int index, E element) {\r\n\t\t\tif (this.contains(element)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsuper.add(index, element);\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n","title":"Is there a no-duplicate List implementation out there?","body":"<p>So here's what I did eventually. I hope this helps someone else.</p>\n\n<pre><code>class NoDuplicatesList&lt;E&gt; extends LinkedList&lt;E&gt; {\n    @Override\n    public boolean add(E e) {\n        if (this.contains(e)) {\n            return false;\n        }\n        else {\n            return super.add(e);\n        }\n    }\n\n    @Override\n    public boolean addAll(Collection&lt;? extends E&gt; collection) {\n        Collection&lt;E&gt; copy = new LinkedList&lt;E&gt;(collection);\n        copy.removeAll(this);\n        return super.addAll(copy);\n    }\n\n    @Override\n    public boolean addAll(int index, Collection&lt;? extends E&gt; collection) {\n        Collection&lt;E&gt; copy = new LinkedList&lt;E&gt;(collection);\n        copy.removeAll(this);\n        return super.addAll(index, copy);\n    }\n\n    @Override\n    public void add(int index, E element) {\n        if (this.contains(element)) {\n            return;\n        }\n        else {\n            super.add(index, element);\n        }\n    }\n}   \n</code></pre>\n"},{"comments":[{"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"score":0,"creation_date":1225992101,"post_id":269324,"comment_id":124043,"body_markdown":"I&#39;d love to learn of these contains() issues. As for the addAll(), I create a copy of the given collection and remove all objects already in &#39;this&#39;. How does that not handle duplicates?","body":"I&#39;d love to learn of these contains() issues. As for the addAll(), I create a copy of the given collection and remove all objects already in &#39;this&#39;. How does that not handle duplicates?"},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1225997121,"post_id":269324,"comment_id":124241,"body_markdown":"As I mentioned in my comment to your class posting, contains() has to scan the entire list (in the worst case) to find if the object is contained in the list. If you have a list of 1 million items and add 10 it it individually, then (in the worst case) over ten million items are scanned.","body":"As I mentioned in my comment to your class posting, contains() has to scan the entire list (in the worst case) to find if the object is contained in the list. If you have a list of 1 million items and add 10 it it individually, then (in the worst case) over ten million items are scanned."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1225997191,"post_id":269324,"comment_id":124248,"body_markdown":"As for addAll(), if the Collection passed to addAll contains duplicates itself, they are not detected. For example: your list {A, B, C, D} parameter list {B, D, E, E, E}. You create a copy of the parameter, and after removeAll it contains {E, E, E}.","body":"As for addAll(), if the Collection passed to addAll contains duplicates itself, they are not detected. For example: your list {A, B, C, D} parameter list {B, D, E, E, E}. You create a copy of the parameter, and after removeAll it contains {E, E, E}."},{"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"score":0,"creation_date":1226179046,"post_id":269324,"comment_id":128014,"body_markdown":"The addAll() issue is not really relevant to me, as I use NoDuplicatesList throughout the procedure, and addAll() should be receiving another NoDuplicatesList as its parameter. What would you suggest to improve the contains() performance?","body":"The addAll() issue is not really relevant to me, as I use NoDuplicatesList throughout the procedure, and addAll() should be receiving another NoDuplicatesList as its parameter. What would you suggest to improve the contains() performance?"}],"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"comment_count":4,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1225988904,"creation_date":1225988904,"answer_id":269324,"question_id":268672,"body_markdown":"You should seriously consider dhiller&#39;s answer:\r\n\r\n 1. Instead of worrying about adding your objects to a duplicate-less List, add them to a Set (any implementation), which will by nature filter out the duplicates.\r\n 2. When you need to call the method that requires a List, wrap it in a `new ArrayList(set)` (or a `new LinkedList(set)`, whatever).\r\n\r\nI think that the solution you posted with the `NoDuplicatesList` has some issues, mostly with the `contains()` method, plus your class does not handle checking for duplicates in the Collection passed to your `addAll()` method.","title":"Is there a no-duplicate List implementation out there?","body":"<p>You should seriously consider dhiller's answer:</p>\n\n<ol>\n<li>Instead of worrying about adding your objects to a duplicate-less List, add them to a Set (any implementation), which will by nature filter out the duplicates.</li>\n<li>When you need to call the method that requires a List, wrap it in a <code>new ArrayList(set)</code> (or a <code>new LinkedList(set)</code>, whatever).</li>\n</ol>\n\n<p>I think that the solution you posted with the <code>NoDuplicatesList</code> has some issues, mostly with the <code>contains()</code> method, plus your class does not handle checking for duplicates in the Collection passed to your <code>addAll()</code> method.</p>\n"},{"tags":[],"owner":{"display_name":"Mohammed Sleem"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1582750244,"creation_date":1248209441,"answer_id":1161673,"question_id":268672,"body_markdown":"I needed something like that, so I went to the _commons collections_ and used the `SetUniqueList`, but when I ran some performance test, I found that it seems not optimized comparing to the case if I want to use a `Set` and obtain an `Array` using the `Set.toArray()` method. \r\n\r\nThe `SetUniqueTest` took _20:1 time_ to fill and then traverse _100,000 Strings_ comparing to the other implementation, which is a big deal difference.\r\n\r\nSo, if you worry about the performance, I recommend you to use the **Set and Get an &lt;E&gt; Array** instead of using the `SetUniqueList`, unless you really need the logic of the `SetUniqueList`, then you&#39;ll need to check other solutions...\r\n\r\n**Testing code main method**:\r\n\r\n  \r\n\r\n    public static void main(String[] args) {\r\n\r\n\r\n    SetUniqueList pq = SetUniqueList.decorate(new ArrayList());\r\n    Set s = new TreeSet();\r\n\r\n    long t1 = 0L;\r\n    long t2 = 0L;\r\n    String t;\r\n\r\n\r\n    t1 = System.nanoTime();\r\n    for (int i = 0; i &lt; 200000; i++) {\r\n        pq.add(&quot;a&quot; + Math.random());\r\n    }\r\n    while (!pq.isEmpty()) {\r\n        t = (String) pq.remove(0);\r\n    }\r\n    t1 = System.nanoTime() - t1;\r\n\r\n    t2 = System.nanoTime();\r\n    for (int i = 0; i &lt; 200000; i++) {\r\n        s.add(&quot;a&quot; + Math.random());\r\n    }\r\n    \r\n    s.clear();\r\n    String[] d = (String[]) s.toArray(new String[0]);\r\n    s.clear();\r\n    for (int i = 0; i &lt; d.length; i++) {\r\n        t = d[i];\r\n\r\n    }\r\n    t2 = System.nanoTime() - t2;\r\n\r\n    System.out.println((double)t1/1000/1000/1000); //seconds\r\n    System.out.println((double)t2/1000/1000/1000); //seconds\r\n    System.out.println(((double) t1) / t2);        //comparing results\r\n\r\n}\r\n\r\nRegards,\r\n[Mohammed Sleem](http://abusleem.net/blog)\r\n\r\n","title":"Is there a no-duplicate List implementation out there?","body":"<p>I needed something like that, so I went to the <em>commons collections</em> and used the <code>SetUniqueList</code>, but when I ran some performance test, I found that it seems not optimized comparing to the case if I want to use a <code>Set</code> and obtain an <code>Array</code> using the <code>Set.toArray()</code> method. </p>\n\n<p>The <code>SetUniqueTest</code> took <em>20:1 time</em> to fill and then traverse <em>100,000 Strings</em> comparing to the other implementation, which is a big deal difference.</p>\n\n<p>So, if you worry about the performance, I recommend you to use the <strong>Set and Get an  Array</strong> instead of using the <code>SetUniqueList</code>, unless you really need the logic of the <code>SetUniqueList</code>, then you'll need to check other solutions...</p>\n\n<p><strong>Testing code main method</strong>:</p>\n\n<pre><code>public static void main(String[] args) {\n\n\nSetUniqueList pq = SetUniqueList.decorate(new ArrayList());\nSet s = new TreeSet();\n\nlong t1 = 0L;\nlong t2 = 0L;\nString t;\n\n\nt1 = System.nanoTime();\nfor (int i = 0; i &lt; 200000; i++) {\n    pq.add(\"a\" + Math.random());\n}\nwhile (!pq.isEmpty()) {\n    t = (String) pq.remove(0);\n}\nt1 = System.nanoTime() - t1;\n\nt2 = System.nanoTime();\nfor (int i = 0; i &lt; 200000; i++) {\n    s.add(\"a\" + Math.random());\n}\n\ns.clear();\nString[] d = (String[]) s.toArray(new String[0]);\ns.clear();\nfor (int i = 0; i &lt; d.length; i++) {\n    t = d[i];\n\n}\nt2 = System.nanoTime() - t2;\n\nSystem.out.println((double)t1/1000/1000/1000); //seconds\nSystem.out.println((double)t2/1000/1000/1000); //seconds\nSystem.out.println(((double) t1) / t2);        //comparing results\n</code></pre>\n\n<p>}</p>\n\n<p>Regards,\n<a href=\"http://abusleem.net/blog\" rel=\"nofollow noreferrer\">Mohammed Sleem</a></p>\n"},{"comments":[{"owner":{"account_id":4232920,"reputation":1116,"user_id":3464870,"accept_rate":100,"display_name":"gyurix"},"score":0,"creation_date":1422196873,"post_id":7679371,"comment_id":44646918,"body_markdown":"Yeah, you should add a bit more methods to it for implementing the List interface.","body":"Yeah, you should add a bit more methods to it for implementing the List interface."}],"tags":[],"owner":{"account_id":957900,"reputation":7,"user_id":982873,"display_name":"Jonathan"},"comment_count":1,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1317928936,"creation_date":1317928936,"answer_id":7679371,"question_id":268672,"body_markdown":"I just made my own UniqueList in my own little library like this:\r\n\r\n    package com.bprog.collections;//my own little set of useful utilities and classes\r\n\r\n    import java.util.HashSet;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    /**\r\n    *\r\n    * @author Jonathan\r\n    */\r\n    public class UniqueList {\r\n    \r\n    private HashSet masterSet = new HashSet();\r\n    private ArrayList growableUniques;\r\n    private Object[] returnable;\r\n\r\n    public UniqueList() {\r\n        growableUniques = new ArrayList();\r\n    }\r\n\r\n    public UniqueList(int size) {\r\n        growableUniques = new ArrayList(size);\r\n    }\r\n\r\n    public void add(Object thing) {\r\n        if (!masterSet.contains(thing)) {\r\n            masterSet.add(thing);\r\n            growableUniques.add(thing);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Casts to an ArrayList of unique values\r\n     * @return \r\n     */\r\n    public List getList(){\r\n        return growableUniques;\r\n    }\r\n    \r\n    public Object get(int index) {\r\n        return growableUniques.get(index);\r\n    }\r\n\r\n    public Object[] toObjectArray() {\r\n        int size = growableUniques.size();\r\n        returnable = new Object[size];\r\n        for (int i = 0; i &lt; size; i++) {\r\n            returnable[i] = growableUniques.get(i);\r\n        }\r\n        return returnable;\r\n        }\r\n    }\r\n\r\nI have a TestCollections class that looks like this:\r\n\r\n    package com.bprog.collections;\r\n    import com.bprog.out.Out;\r\n    /**\r\n    *\r\n    * @author Jonathan\r\n    */\r\n    public class TestCollections {\r\n        public static void main(String[] args){\r\n            UniqueList ul = new UniqueList();\r\n            ul.add(&quot;Test&quot;);\r\n            ul.add(&quot;Test&quot;);\r\n            ul.add(&quot;Not a copy&quot;);\r\n            ul.add(&quot;Test&quot;); \r\n            //should only contain two things\r\n            Object[] content = ul.toObjectArray();\r\n            Out.pl(&quot;Array Content&quot;,content);\r\n        }\r\n    }\r\n\r\nWorks fine. All it does is it adds to a set if it does not have it already and there&#39;s an Arraylist that is returnable, as well as an object array.\r\n","title":"Is there a no-duplicate List implementation out there?","body":"<p>I just made my own UniqueList in my own little library like this:</p>\n\n<pre><code>package com.bprog.collections;//my own little set of useful utilities and classes\n\nimport java.util.HashSet;\nimport java.util.ArrayList;\nimport java.util.List;\n/**\n*\n* @author Jonathan\n*/\npublic class UniqueList {\n\nprivate HashSet masterSet = new HashSet();\nprivate ArrayList growableUniques;\nprivate Object[] returnable;\n\npublic UniqueList() {\n    growableUniques = new ArrayList();\n}\n\npublic UniqueList(int size) {\n    growableUniques = new ArrayList(size);\n}\n\npublic void add(Object thing) {\n    if (!masterSet.contains(thing)) {\n        masterSet.add(thing);\n        growableUniques.add(thing);\n    }\n}\n\n/**\n * Casts to an ArrayList of unique values\n * @return \n */\npublic List getList(){\n    return growableUniques;\n}\n\npublic Object get(int index) {\n    return growableUniques.get(index);\n}\n\npublic Object[] toObjectArray() {\n    int size = growableUniques.size();\n    returnable = new Object[size];\n    for (int i = 0; i &lt; size; i++) {\n        returnable[i] = growableUniques.get(i);\n    }\n    return returnable;\n    }\n}\n</code></pre>\n\n<p>I have a TestCollections class that looks like this:</p>\n\n<pre><code>package com.bprog.collections;\nimport com.bprog.out.Out;\n/**\n*\n* @author Jonathan\n*/\npublic class TestCollections {\n    public static void main(String[] args){\n        UniqueList ul = new UniqueList();\n        ul.add(\"Test\");\n        ul.add(\"Test\");\n        ul.add(\"Not a copy\");\n        ul.add(\"Test\"); \n        //should only contain two things\n        Object[] content = ul.toObjectArray();\n        Out.pl(\"Array Content\",content);\n    }\n}\n</code></pre>\n\n<p>Works fine. All it does is it adds to a set if it does not have it already and there's an Arraylist that is returnable, as well as an object array.</p>\n"},{"comments":[{"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"score":0,"creation_date":1506597179,"post_id":8851072,"comment_id":79890200,"body_markdown":"What is `HashSet#consist()` ?","body":"What is <code>HashSet#consist()</code> ?"}],"tags":[],"owner":{"account_id":1105583,"reputation":29,"user_id":1097044,"display_name":"neoreeprast"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1506597148,"creation_date":1326460063,"answer_id":8851072,"question_id":268672,"body_markdown":"in `add` method, why not using `HashSet.add()` to check duplicates instead of `HashSet.consist()`.\r\n`HashSet.add()` will return `true` if no duplicate and `false` otherwise.","title":"Is there a no-duplicate List implementation out there?","body":"<p>in <code>add</code> method, why not using <code>HashSet.add()</code> to check duplicates instead of <code>HashSet.consist()</code>.\n<code>HashSet.add()</code> will return <code>true</code> if no duplicate and <code>false</code> otherwise.</p>\n"},{"comments":[{"owner":{"account_id":4232920,"reputation":1116,"user_id":3464870,"accept_rate":100,"display_name":"gyurix"},"score":2,"creation_date":1422196669,"post_id":23275958,"comment_id":44646862,"body_markdown":"Yeah, I think, this is the best solution for it, you can also simply use a normal HashSet, not a Linked, and then you can use your list as you want, you can also deside what to do in some situations, like in adding an element inside a list before a specific index, you can deside that you want to move the duplicated item to this position or not.","body":"Yeah, I think, this is the best solution for it, you can also simply use a normal HashSet, not a Linked, and then you can use your list as you want, you can also deside what to do in some situations, like in adding an element inside a list before a specific index, you can deside that you want to move the duplicated item to this position or not."},{"owner":{"account_id":44321,"reputation":9248,"user_id":130028,"accept_rate":79,"display_name":"marcolopes"},"score":0,"creation_date":1457069321,"post_id":23275958,"comment_id":59247867,"body_markdown":"Best solution here... Will post my UniqueList class code","body":"Best solution here... Will post my UniqueList class code"},{"owner":{"account_id":4676792,"reputation":129,"user_id":3786841,"display_name":"Jeancarlo Fontalvo"},"score":0,"creation_date":1471748844,"post_id":23275958,"comment_id":65470492,"body_markdown":"This worked for me, in my BFS Graph algorithm. Because I had some nodes that I added to a Queue (LinkedList) just if they weren&#39;t already in.","body":"This worked for me, in my BFS Graph algorithm. Because I had some nodes that I added to a Queue (LinkedList) just if they weren&#39;t already in."}],"tags":[],"owner":{"account_id":4377363,"reputation":241,"user_id":3570018,"display_name":"user3570018"},"comment_count":3,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1654841273,"creation_date":1398360984,"answer_id":23275958,"question_id":268672,"body_markdown":"Here is what I did and it works.\r\n\r\nAssuming I have an `ArrayList` to work with the first thing I did was created a new `LinkedHashSet`.\r\n\r\n    LinkedHashSet&lt;E&gt; hashSet = new LinkedHashSet&lt;E&gt;()\r\n\r\nThen I attempt to add my new element to the `LinkedHashSet`.  The add method does not alter the `LinkedHasSet` and returns false if the new element is a duplicate.  So this becomes a condition I can test before adding to the `ArrayList`. \r\n\r\n    if (hashSet.add(E)) arrayList.add(E);\r\n\r\nThis is a simple and elegant way to prevent duplicates from being added to an array list.  If you want you can encapsulate it in and override of the add method in a class that extends the `ArrayList`.  Just remember to deal with `addAll` by looping through the elements and calling the add method. ","title":"Is there a no-duplicate List implementation out there?","body":"<p>Here is what I did and it works.</p>\n<p>Assuming I have an <code>ArrayList</code> to work with the first thing I did was created a new <code>LinkedHashSet</code>.</p>\n<pre><code>LinkedHashSet&lt;E&gt; hashSet = new LinkedHashSet&lt;E&gt;()\n</code></pre>\n<p>Then I attempt to add my new element to the <code>LinkedHashSet</code>.  The add method does not alter the <code>LinkedHasSet</code> and returns false if the new element is a duplicate.  So this becomes a condition I can test before adding to the <code>ArrayList</code>.</p>\n<pre><code>if (hashSet.add(E)) arrayList.add(E);\n</code></pre>\n<p>This is a simple and elegant way to prevent duplicates from being added to an array list.  If you want you can encapsulate it in and override of the add method in a class that extends the <code>ArrayList</code>.  Just remember to deal with <code>addAll</code> by looping through the elements and calling the add method.</p>\n"},{"tags":[],"owner":{"account_id":44321,"reputation":9248,"user_id":130028,"accept_rate":79,"display_name":"marcolopes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665940646,"creation_date":1457069524,"answer_id":35788695,"question_id":268672,"body_markdown":"My lastest implementation: https://github.com/marcolopes/dma/blob/master/org.dma.java/src/org/dma/java/util/UniqueArrayList.java\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.Collection;\r\n    import java.util.LinkedHashSet;\r\n\r\n    /**\r\n     * Extends &lt;tt&gt;ArrayList&lt;/tt&gt; and guarantees no duplicate elements\r\n     */\r\n    public class UniqueArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\r\n\r\n    \tprivate static final long serialVersionUID = 1L;\r\n\r\n    \tpublic UniqueArrayList(int initialCapacity) {\r\n    \t\tsuper(initialCapacity);\r\n    \t}\r\n\r\n    \tpublic UniqueArrayList() {\r\n    \t\tsuper();\r\n    \t}\r\n\r\n    \tpublic UniqueArrayList(T[] array) {\r\n    \t\tthis(Arrays.asList(array));\r\n    \t}\r\n\r\n    \tpublic UniqueArrayList(Collection&lt;? extends T&gt; col) {\r\n    \t\taddAll(col);\r\n    \t}\r\n\r\n\r\n    \t@Override\r\n    \tpublic void add(int index, T e) {\r\n    \t\tif (!contains(e)) super.add(index, e);\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic boolean add(T e) {\r\n    \t\treturn contains(e) ? false : super.add(e);\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic boolean addAll(Collection&lt;? extends T&gt; col) {\r\n    \t\tCollection set=new LinkedHashSet(this);\r\n    \t\tset.addAll(col);\r\n    \t\tclear();\r\n    \t\treturn super.addAll(set);\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic boolean addAll(int index, Collection&lt;? extends T&gt; col) {\r\n    \t\tCollection set=new LinkedHashSet(subList(0, index));\r\n    \t\tset.addAll(col);\r\n    \t\tset.addAll(subList(index, size()));\r\n    \t\tclear();\r\n    \t\treturn super.addAll(set);\r\n    \t}\r\n\r\n    \t@Override\r\n    \tpublic T set(int index, T e) {\r\n    \t\treturn contains(e) ? null : super.set(index, e);\r\n    \t}\r\n\r\n    \t/** Ensures element.equals(o) */\r\n    \t@Override\r\n    \tpublic int indexOf(Object o) {\r\n    \t\tint index=0;\r\n    \t\tfor(T element: this){\r\n    \t\t\tif (element.equals(o)) return index;\r\n    \t\t\tindex++;\r\n    \t\t}return -1;\r\n    \t}\r\n\r\n\r\n    }","title":"Is there a no-duplicate List implementation out there?","body":"<p>My lastest implementation: <a href=\"https://github.com/marcolopes/dma/blob/master/org.dma.java/src/org/dma/java/util/UniqueArrayList.java\" rel=\"nofollow noreferrer\">https://github.com/marcolopes/dma/blob/master/org.dma.java/src/org/dma/java/util/UniqueArrayList.java</a></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collection;\nimport java.util.LinkedHashSet;\n\n/**\n * Extends &lt;tt&gt;ArrayList&lt;/tt&gt; and guarantees no duplicate elements\n */\npublic class UniqueArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\n\n    private static final long serialVersionUID = 1L;\n\n    public UniqueArrayList(int initialCapacity) {\n        super(initialCapacity);\n    }\n\n    public UniqueArrayList() {\n        super();\n    }\n\n    public UniqueArrayList(T[] array) {\n        this(Arrays.asList(array));\n    }\n\n    public UniqueArrayList(Collection&lt;? extends T&gt; col) {\n        addAll(col);\n    }\n\n\n    @Override\n    public void add(int index, T e) {\n        if (!contains(e)) super.add(index, e);\n    }\n\n    @Override\n    public boolean add(T e) {\n        return contains(e) ? false : super.add(e);\n    }\n\n    @Override\n    public boolean addAll(Collection&lt;? extends T&gt; col) {\n        Collection set=new LinkedHashSet(this);\n        set.addAll(col);\n        clear();\n        return super.addAll(set);\n    }\n\n    @Override\n    public boolean addAll(int index, Collection&lt;? extends T&gt; col) {\n        Collection set=new LinkedHashSet(subList(0, index));\n        set.addAll(col);\n        set.addAll(subList(index, size()));\n        clear();\n        return super.addAll(set);\n    }\n\n    @Override\n    public T set(int index, T e) {\n        return contains(e) ? null : super.set(index, e);\n    }\n\n    /** Ensures element.equals(o) */\n    @Override\n    public int indexOf(Object o) {\n        int index=0;\n        for(T element: this){\n            if (element.equals(o)) return index;\n            index++;\n        }return -1;\n    }\n\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2076134,"reputation":1006,"user_id":1849430,"accept_rate":75,"display_name":"Eddie Jamsession"},"score":0,"creation_date":1651126992,"post_id":70198218,"comment_id":127289720,"body_markdown":"If we wanted to implement it ourselves, we wouldn&#39;t ask","body":"If we wanted to implement it ourselves, we wouldn&#39;t ask"}],"tags":[],"owner":{"account_id":23523861,"reputation":1,"user_id":17570655,"display_name":"GerNi"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1638446220,"creation_date":1638442855,"answer_id":70198218,"question_id":268672,"body_markdown":"What about this?\r\nJust check the list before adding with a contains for an already existing object\r\n\r\n    while (searchResult != null &amp;&amp; searchResult.hasMore()) {\r\n        SearchResult nextElement = searchResult.nextElement();\r\n        Attributes attributes = nextElement.getAttributes();\r\n\r\n        String stringName = getAttributeStringValue(attributes, SearchAttribute.*attributeName*);\r\n       \r\n       if(!List.contains(stringName)){\r\n        List.add(stringName);\r\n       }\r\n    }\r\n\r\n","title":"Is there a no-duplicate List implementation out there?","body":"<p>What about this?\nJust check the list before adding with a contains for an already existing object</p>\n<pre><code>while (searchResult != null &amp;&amp; searchResult.hasMore()) {\n    SearchResult nextElement = searchResult.nextElement();\n    Attributes attributes = nextElement.getAttributes();\n\n    String stringName = getAttributeStringValue(attributes, SearchAttribute.*attributeName*);\n   \n   if(!List.contains(stringName)){\n    List.add(stringName);\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215498,"favorite_count":0,"down_vote_count":0,"up_vote_count":102,"accepted_answer_id":268713,"answer_count":12,"score":102,"last_activity_date":1665940646,"creation_date":1225977941,"question_id":268672,"body_markdown":"I know about [`SortedSet`][1], but in my case I need something that implements `List`, and not `Set`. So is there an implementation out there, in the API or elsewhere?\r\n\r\nIt shouldn&#39;t be hard to implement myself, but I figured why not ask people here first?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/SortedSet.html","title":"Is there a no-duplicate List implementation out there?","body":"<p>I know about <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/SortedSet.html\" rel=\"noreferrer\"><code>SortedSet</code></a>, but in my case I need something that implements <code>List</code>, and not <code>Set</code>. So is there an implementation out there, in the API or elsewhere?</p>\n\n<p>It shouldn't be hard to implement myself, but I figured why not ask people here first?</p>\n"},{"tags":["java","database","hibernate","view","primary-key"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1665719151,"post_id":74061710,"comment_id":130768939,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":1988337,"reputation":598,"user_id":1782997,"display_name":"Attila T"},"score":1,"creation_date":1665766901,"post_id":74061710,"comment_id":130782561,"body_markdown":"If your domain object has to be an `@Entity` then I don&#39;t think you have any other option than try to identify a set of columns as a composite key. If this is not possible or your domain object doesn&#39;t have to be an entity then the solution depends on the technology stack you&#39;re using, i.e. here&#39;s one that&#39;s using [Spring Data JPA Projections](https://www.baeldung.com/spring-data-jpa-projections).","body":"If your domain object has to be an <code>@Entity</code> then I don&#39;t think you have any other option than try to identify a set of columns as a composite key. If this is not possible or your domain object doesn&#39;t have to be an entity then the solution depends on the technology stack you&#39;re using, i.e. here&#39;s one that&#39;s using <a href=\"https://www.baeldung.com/spring-data-jpa-projections\" rel=\"nofollow noreferrer\">Spring Data JPA Projections</a>."}],"answers":[{"tags":[],"owner":{"account_id":16839049,"reputation":21,"user_id":15363575,"display_name":"Mefistofeles"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665940567,"creation_date":1665940567,"answer_id":74089228,"question_id":74061710,"body_markdown":"I ended up using a composite key using the IdClass annotation:\r\nhttps://www.baeldung.com/jpa-composite-primary-keys","title":"Java Hibernate entity of a View without an ID","body":"<p>I ended up using a composite key using the IdClass annotation:\n<a href=\"https://www.baeldung.com/jpa-composite-primary-keys\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-composite-primary-keys</a></p>\n"}],"owner":{"account_id":16839049,"reputation":21,"user_id":15363575,"display_name":"Mefistofeles"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1061,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665940567,"creation_date":1665694527,"question_id":74061710,"body_markdown":"First of all, **I did search this question**, but every answer was simply &quot;add the ID to the view&quot;, which isn&#39;t possible in my case.\r\n\r\nTo elaborate, I have a backend written in Java, and I&#39;m using Hibernate. I need to recover data from a view with several columns, none of which are unique, which means I can&#39;t use them as an ID. Given that Hibernate demands that an @Entity have a field with an @Id annotation, this is a problem.\r\n\r\nI cannot modify the view.\r\n\r\nSo, what would be the best solution? My current idea is to write a new IdClass to use as a composite PK.","title":"Java Hibernate entity of a View without an ID","body":"<p>First of all, <strong>I did search this question</strong>, but every answer was simply &quot;add the ID to the view&quot;, which isn't possible in my case.</p>\n<p>To elaborate, I have a backend written in Java, and I'm using Hibernate. I need to recover data from a view with several columns, none of which are unique, which means I can't use them as an ID. Given that Hibernate demands that an @Entity have a field with an @Id annotation, this is a problem.</p>\n<p>I cannot modify the view.</p>\n<p>So, what would be the best solution? My current idea is to write a new IdClass to use as a composite PK.</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1665940457,"post_id":74089192,"comment_id":130811738,"body_markdown":"Your app does not have access to the contents of `Documents/` on Android 11+, except for files that your app placed there. Rather than create your own file-selection UI, use `ACTION_OPEN_DOCUMENT` / `ActivityResultContracts.OpenDocument` for a system-supplied one that *does* work with `Documents/`.","body":"Your app does not have access to the contents of <code>Documents&#47;</code> on Android 11+, except for files that your app placed there. Rather than create your own file-selection UI, use <code>ACTION_OPEN_DOCUMENT</code> / <code>ActivityResultContracts.OpenDocument</code> for a system-supplied one that <i>does</i> work with <code>Documents&#47;</code>."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1665940709,"post_id":74089192,"comment_id":130811795,"body_markdown":"`After creating this directory, I have write the code below` If you created a directory then that directory is empty. So i do not understand that you are listing files after that as you will certainly have a zero items list.","body":"<code>After creating this directory, I have write the code below</code> If you created a directory then that directory is empty. So i do not understand that you are listing files after that as you will certainly have a zero items list."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1665940836,"post_id":74089192,"comment_id":130811826,"body_markdown":"And what do you mean with &#39;a custom file path&#39;?","body":"And what do you mean with &#39;a custom file path&#39;?"},{"owner":{"account_id":19554901,"reputation":21,"user_id":14309554,"display_name":"Sk Rijaul"},"score":0,"creation_date":1666188822,"post_id":74089192,"comment_id":130877104,"body_markdown":"@blackapps the created a folder named &quot;App Name&quot; inside &quot;document&quot;. And the file path of downloaded pdf is &quot;/storage/emulated/0/Documents/AppName/xyz.pdf&quot;. How can we show all PDFs from &quot;App Name&quot; folder to a recyclerView??","body":"@blackapps the created a folder named &quot;App Name&quot; inside &quot;document&quot;. And the file path of downloaded pdf is &quot;/storage/emulated/0/Documents/AppName/xyz.pdf&quot;. How can we show all PDFs from &quot;App Name&quot; folder to a recyclerView??"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1666195076,"post_id":74089192,"comment_id":130879766,"body_markdown":"Uf you could react to the point to my comments first..","body":"Uf you could react to the point to my comments first.."}],"owner":{"account_id":19554901,"reputation":21,"user_id":14309554,"display_name":"Sk Rijaul"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665940323,"creation_date":1665940323,"question_id":74089192,"body_markdown":"I want to retrive pdf files from a custom file path and show them all recyclerview.\r\nMy Code is Here,\r\n\r\n \r\n\r\n    public static final File PDF_DIRECTORY =\r\n                new File(Environment.DIRECTORY_DOCUMENTS + File.separator + &quot;/AppName/&quot;);\r\n    \r\n    \r\n       File file;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                file = new File(Environment.DIRECTORY_DOCUMENTS, &quot;/AppName/&quot;);\r\n            } else {\r\n                file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/AppName&quot;);\r\n            }\r\n    \r\n            if (!file.exists()) {\r\n                file.mkdirs();\r\n            }\r\n\r\nAfter creating this directory, I have write the code below,\r\n\r\n    private void getPdf(View view) {\r\n    \r\n            new Thread(() -&gt; {\r\n                PDFModel pdfModel;\r\n                allFiles = PDF_DIRECTORY.listFiles();\r\n    \r\n                if (allFiles != null) {\r\n    \r\n                    try {\r\n    \r\n                        Arrays.sort(allFiles, (o1, o2) -&gt; Long.compare(o2.lastModified(), o1.lastModified()));\r\n    \r\n                        for (File file : allFiles) {\r\n                            if (file.getName().endsWith(&quot;.pdf&quot;)) {\r\n                                pdfModel = new PDFModel(\r\n                                        file.getAbsolutePath());\r\n                                pdfModelArrayList.add(pdfModel);\r\n                            }\r\n                        }\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n    \r\n                    handler.post(() -&gt; {\r\n                        if (pdfModelArrayList.size() &lt;= 0) {\r\n    \r\n    } else {\r\n                            //           noResultSwipeImage.setVisibility(View.GONE);\r\n                        }\r\n    \r\n                        pdfAdapter = new PdfAdapter(pdfModelArrayList, view.getContext());\r\n                        recyclerView.setAdapter(pdfAdapter);\r\n                        recyclerView.setHasFixedSize(true);\r\n                        pdfAdapter.notifyDataSetChanged();\r\n    \r\n                    });\r\n    \r\n                } else {\r\n                    \r\n                }\r\n    \r\n    \r\n            }).start();\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n    private void getStatusScope(View view) {\r\n    \r\n    \r\n            ContentResolver cr = requireActivity().getContentResolver();\r\n            Uri uri = MediaStore.Files.getContentUri(&quot;external&quot;);\r\n    \r\n            String[] projection = {MediaStore.Files.FileColumns._ID, MediaStore.Files.FileColumns.DISPLAY_NAME};\r\n            String selection = MediaStore.Files.FileColumns.MEDIA_TYPE + &quot;=&quot;\r\n                    + MediaStore.Files.FileColumns.MEDIA_TYPE;\r\n            String[] selectionArgs = null;\r\n            String selectionMimeType = MediaStore.Files.FileColumns.MIME_TYPE + &quot;=?&quot;;\r\n            String mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension(&quot;pdf&quot;);\r\n            String[] selectionArgsPdf = new String[]{mimeType};\r\n    \r\n            Cursor c = cr.query(uri, projection, selectionMimeType, selectionArgsPdf, null);\r\n            if (c != null) {\r\n                while (c.moveToNext()) {\r\n                    PDFModel whatsappstatusmodel = new PDFModel(c.getString(0));\r\n                    pdfModelArrayList.add(whatsappstatusmodel);\r\n                }\r\n                c.close();\r\n            }\r\n    \r\n            if (pdfModelArrayList.size() &lt;= 0) {\r\n      //Do Something Here\r\n            } else {\r\n            \r\n                pdfAdapter = new PdfAdapter(pdfModelArrayList, view.getContext());\r\n                recyclerView.setAdapter(pdfAdapter);\r\n                recyclerView.setHasFixedSize(true);\r\n                pdfAdapter.notifyDataSetChanged();\r\n            }\r\n    \r\n        }\r\n\r\n\r\n\r\n\r\n\r\nBut this code does not work! This code returns a zero-item array list, actually, I&#39;m a little confused about android scope storage, can anyone give me an example code or give me any idea about this?\r\n","title":"how to retrieve pdf files from a an custom file path, which will work perfectly on every version of android?","body":"<p>I want to retrive pdf files from a custom file path and show them all recyclerview.\nMy Code is Here,</p>\n<pre><code>public static final File PDF_DIRECTORY =\n            new File(Environment.DIRECTORY_DOCUMENTS + File.separator + &quot;/AppName/&quot;);\n\n\n   File file;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            file = new File(Environment.DIRECTORY_DOCUMENTS, &quot;/AppName/&quot;);\n        } else {\n            file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/AppName&quot;);\n        }\n\n        if (!file.exists()) {\n            file.mkdirs();\n        }\n</code></pre>\n<p>After creating this directory, I have write the code below,</p>\n<pre><code>private void getPdf(View view) {\n\n        new Thread(() -&gt; {\n            PDFModel pdfModel;\n            allFiles = PDF_DIRECTORY.listFiles();\n\n            if (allFiles != null) {\n\n                try {\n\n                    Arrays.sort(allFiles, (o1, o2) -&gt; Long.compare(o2.lastModified(), o1.lastModified()));\n\n                    for (File file : allFiles) {\n                        if (file.getName().endsWith(&quot;.pdf&quot;)) {\n                            pdfModel = new PDFModel(\n                                    file.getAbsolutePath());\n                            pdfModelArrayList.add(pdfModel);\n                        }\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n\n                handler.post(() -&gt; {\n                    if (pdfModelArrayList.size() &lt;= 0) {\n\n} else {\n                        //           noResultSwipeImage.setVisibility(View.GONE);\n                    }\n\n                    pdfAdapter = new PdfAdapter(pdfModelArrayList, view.getContext());\n                    recyclerView.setAdapter(pdfAdapter);\n                    recyclerView.setHasFixedSize(true);\n                    pdfAdapter.notifyDataSetChanged();\n\n                });\n\n            } else {\n                \n            }\n\n\n        }).start();\n\n\n    }\n\n\nprivate void getStatusScope(View view) {\n\n\n        ContentResolver cr = requireActivity().getContentResolver();\n        Uri uri = MediaStore.Files.getContentUri(&quot;external&quot;);\n\n        String[] projection = {MediaStore.Files.FileColumns._ID, MediaStore.Files.FileColumns.DISPLAY_NAME};\n        String selection = MediaStore.Files.FileColumns.MEDIA_TYPE + &quot;=&quot;\n                + MediaStore.Files.FileColumns.MEDIA_TYPE;\n        String[] selectionArgs = null;\n        String selectionMimeType = MediaStore.Files.FileColumns.MIME_TYPE + &quot;=?&quot;;\n        String mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension(&quot;pdf&quot;);\n        String[] selectionArgsPdf = new String[]{mimeType};\n\n        Cursor c = cr.query(uri, projection, selectionMimeType, selectionArgsPdf, null);\n        if (c != null) {\n            while (c.moveToNext()) {\n                PDFModel whatsappstatusmodel = new PDFModel(c.getString(0));\n                pdfModelArrayList.add(whatsappstatusmodel);\n            }\n            c.close();\n        }\n\n        if (pdfModelArrayList.size() &lt;= 0) {\n  //Do Something Here\n        } else {\n        \n            pdfAdapter = new PdfAdapter(pdfModelArrayList, view.getContext());\n            recyclerView.setAdapter(pdfAdapter);\n            recyclerView.setHasFixedSize(true);\n            pdfAdapter.notifyDataSetChanged();\n        }\n\n    }\n</code></pre>\n<p>But this code does not work! This code returns a zero-item array list, actually, I'm a little confused about android scope storage, can anyone give me an example code or give me any idea about this?</p>\n"},{"tags":["java","service-provider"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1665940222,"post_id":74089126,"comment_id":130811692,"body_markdown":"As far as I can tell, that code does what the docs claim: it returns the cached and instantiated providers first, and then uses an iterator to look up the rest. A [mre] would help.","body":"As far as I can tell, that code does what the docs claim: it returns the cached and instantiated providers first, and then uses an iterator to look up the rest. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help."},{"owner":{"account_id":9008991,"reputation":4402,"user_id":6714426,"accept_rate":74,"display_name":"Prashant Pandey"},"score":0,"creation_date":1665940355,"post_id":74089126,"comment_id":130811715,"body_markdown":"But the providers are instantiated (and cached) during bootstrap, so why is the config null when they&#39;re used (via the serve() method)?","body":"But the providers are instantiated (and cached) during bootstrap, so why is the config null when they&#39;re used (via the serve() method)?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1665940560,"post_id":74089126,"comment_id":130811759,"body_markdown":"As I said, provide a [mre] we can compile and run to see what happens.","body":"As I said, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> we can compile and run to see what happens."},{"owner":{"account_id":9008991,"reputation":4402,"user_id":6714426,"accept_rate":74,"display_name":"Prashant Pandey"},"score":0,"creation_date":1665940643,"post_id":74089126,"comment_id":130811782,"body_markdown":"Sure, composing it right now. Thanks!","body":"Sure, composing it right now. Thanks!"},{"owner":{"account_id":9008991,"reputation":4402,"user_id":6714426,"accept_rate":74,"display_name":"Prashant Pandey"},"score":1,"creation_date":1665941853,"post_id":74089126,"comment_id":130812029,"body_markdown":"@MarkRotteveel I just created a MVP and it is working as expected. The above code was a part of a large codebase, and the problem seems to be somewhere else. I&#39;ll dig more and update! Thank you for the quick help regardless :)","body":"@MarkRotteveel I just created a MVP and it is working as expected. The above code was a part of a large codebase, and the problem seems to be somewhere else. I&#39;ll dig more and update! Thank you for the quick help regardless :)"}],"owner":{"account_id":9008991,"reputation":4402,"user_id":6714426,"accept_rate":74,"display_name":"Prashant Pandey"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665940134,"creation_date":1665939881,"question_id":74089126,"body_markdown":"Say I have a service:\r\n\r\n```\r\npublic interface Svc {\r\n    public void init(Config config);\r\n    public void service();\r\n}\r\n```\r\nAnd its implementation:\r\n```\r\npublic class MySvc implements Svc {\r\n    private Config config = null;\r\n    public void init(Config config) {\r\n        this.config = config;\r\n    }\r\n    public void service() {\r\n       if (config == null) {\r\n           System.err.println(&quot;null config&quot;);\r\n       }\r\n    }\r\n}\r\n```\r\n\r\nOn application bootstrap, I do:\r\n\r\n```\r\npublic void bootstrap() {\r\n    //initialise all providers\r\n    serviceLoader.iterator().forEach(svcImpl -&gt; svcImpl.init(config));\r\n}\r\n```\r\n\r\nNow, at some other point in my code, I do (with the same `serviceLoader` object):\r\n\r\n```\r\nserviceLoader.iterator().forEach(svcImpl -&gt; svcImpl.serve());\r\n```\r\n\r\nIt prints `null config`\r\n\r\nThe docs for `iterator` say:\r\n\r\n&gt; Caching: The iterator returned by this method first yields all of the\r\n&gt; elements of the provider cache, in the order that they were loaded. It\r\n&gt; then lazily loads and instantiates any remaining service providers,\r\n&gt; adding each one to the cache in turn. If this loader&#39;s provider caches\r\n&gt; are cleared by invoking the reload method then existing iterators for\r\n&gt; this service loader should be discarded. The hasNext and next methods\r\n&gt; of the iterator throw ConcurrentModificationException if used after\r\n&gt; the provider cache has been cleared.\r\n\r\nI was of the understanding that the iterator could keep returning cached instances of the objects as per the code, but this doesn&#39;t seem to be the case here:\r\n\r\n```\r\n@Override\r\npublic S next() {\r\n    checkReloadCount();\r\n    S next;\r\n    if (index &lt; instantiatedProviders.size()) {\r\n        next = instantiatedProviders.get(index);\r\n    } else {\r\n        next = lookupIterator1.next().get();\r\n        instantiatedProviders.add(next);\r\n    }\r\n    index++;\r\n    return next;\r\n}\r\n```","title":"Java Service Loader Instance Caching","body":"<p>Say I have a service:</p>\n<pre><code>public interface Svc {\n    public void init(Config config);\n    public void service();\n}\n</code></pre>\n<p>And its implementation:</p>\n<pre><code>public class MySvc implements Svc {\n    private Config config = null;\n    public void init(Config config) {\n        this.config = config;\n    }\n    public void service() {\n       if (config == null) {\n           System.err.println(&quot;null config&quot;);\n       }\n    }\n}\n</code></pre>\n<p>On application bootstrap, I do:</p>\n<pre><code>public void bootstrap() {\n    //initialise all providers\n    serviceLoader.iterator().forEach(svcImpl -&gt; svcImpl.init(config));\n}\n</code></pre>\n<p>Now, at some other point in my code, I do (with the same <code>serviceLoader</code> object):</p>\n<pre><code>serviceLoader.iterator().forEach(svcImpl -&gt; svcImpl.serve());\n</code></pre>\n<p>It prints <code>null config</code></p>\n<p>The docs for <code>iterator</code> say:</p>\n<blockquote>\n<p>Caching: The iterator returned by this method first yields all of the\nelements of the provider cache, in the order that they were loaded. It\nthen lazily loads and instantiates any remaining service providers,\nadding each one to the cache in turn. If this loader's provider caches\nare cleared by invoking the reload method then existing iterators for\nthis service loader should be discarded. The hasNext and next methods\nof the iterator throw ConcurrentModificationException if used after\nthe provider cache has been cleared.</p>\n</blockquote>\n<p>I was of the understanding that the iterator could keep returning cached instances of the objects as per the code, but this doesn't seem to be the case here:</p>\n<pre><code>@Override\npublic S next() {\n    checkReloadCount();\n    S next;\n    if (index &lt; instantiatedProviders.size()) {\n        next = instantiatedProviders.get(index);\n    } else {\n        next = lookupIterator1.next().get();\n        instantiatedProviders.add(next);\n    }\n    index++;\n    return next;\n}\n</code></pre>\n"},{"tags":["java","swing"],"answers":[{"comments":[{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":1,"creation_date":1285350226,"post_id":3789584,"comment_id":4015178,"body_markdown":"+1.  Rectangle implements toString, so try just `System.out.println(...getBounds());` to see the whole deal.","body":"+1.  Rectangle implements toString, so try just <code>System.out.println(...getBounds());</code> to see the whole deal."}],"tags":[],"owner":{"account_id":114151,"reputation":32353,"user_id":300311,"accept_rate":88,"display_name":"Erick Robertson"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1285350215,"creation_date":1285349899,"answer_id":3789584,"question_id":3789555,"body_markdown":"This is not a bug.  The values are correct.\r\n\r\nYou are getting the bounds of each screen, and then you are getting the X and Y coordinates of each bound, which is the coordinate of the upper-left corner.  &lt;code&gt;GraphicsConfiguration.getBounds()&lt;/code&gt; returns a &lt;code&gt;Rectangle&lt;/code&gt; defining the screen boundaries. &lt;code&gt;Rectangle.getX()&lt;/code&gt; and &lt;code&gt;Rectangle.getY()&lt;/code&gt; return the coordinates of the upper-left corner of the rectangle.  &lt;code&gt;Rectangle.getWidth()&lt;/code&gt; and &lt;code&gt;Rectangle.getHeight()&lt;/code&gt; return the size.\r\n\r\nYou have two monitors.  Here are the boundaries of each monitor:\r\n\r\n&lt;pre&gt;\r\n1: X = 0   , Y = 0, Width = 1920, Height = 1080\r\n2: X = 1920, Y = 0, Width = 1280, Height = 1080\r\n&lt;/pre&gt;","title":"Java Swing; Problems with Java GraphicsConfiguration.getBounds() returning 0","body":"<p>This is not a bug.  The values are correct.</p>\n\n<p>You are getting the bounds of each screen, and then you are getting the X and Y coordinates of each bound, which is the coordinate of the upper-left corner.  <code>GraphicsConfiguration.getBounds()</code> returns a <code>Rectangle</code> defining the screen boundaries. <code>Rectangle.getX()</code> and <code>Rectangle.getY()</code> return the coordinates of the upper-left corner of the rectangle.  <code>Rectangle.getWidth()</code> and <code>Rectangle.getHeight()</code> return the size.</p>\n\n<p>You have two monitors.  Here are the boundaries of each monitor:</p>\n\n<pre>\n1: X = 0   , Y = 0, Width = 1920, Height = 1080\n2: X = 1920, Y = 0, Width = 1280, Height = 1080\n</pre>\n"},{"tags":[],"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665938994,"creation_date":1665937531,"answer_id":74088822,"question_id":3789555,"body_markdown":"On Windows 10/Java 8 the ratio of `text scaling factors` goes into coordinates of secondary screens.\r\n\r\nE.g. Two screens, widths 1920 + 1600 with common border line, both text scaling 125%\r\n\r\n`Bounds java.awt.Rectangle[x=0,y=0,width=1920,height=1080]`\r\n&lt;br&gt;`Bounds java.awt.Rectangle[x=1920,y=174,width=1600,height=900]`\r\n\r\nNow, when the text scaling of the second screen is changed to 100%, I get\r\n\r\n`Bounds java.awt.Rectangle[x=0,y=0,width=1920,height=1080]`\r\n&lt;br&gt;`Bounds java.awt.Rectangle[x=2400,y=218,width=2000,height=1125]` .\r\n\r\nThe bounds of the second screen appear scaled by 125%. This is to be considered, \r\ne.g. when capturing all screens, which independent from text scaling will produce a section\r\n\r\n`Bounds java.awt.Rectangle[x=1920,y=174,width=1600,height=900]` \r\n\r\nfor the secondary screen.\r\n\r\n&lt;h1&gt;EDIT&lt;/h1&gt;\r\n\r\n`GraphicDevice.getDisplayMode().getWidth()` delivers the text-scale-invariant value 1600 for the second screen and so the correcting factor for the rectangles reported by `GraphicsConfiguration.getBounds()`","title":"Java Swing; Problems with Java GraphicsConfiguration.getBounds() returning 0","body":"<p>On Windows 10/Java 8 the ratio of <code>text scaling factors</code> goes into coordinates of secondary screens.</p>\n<p>E.g. Two screens, widths 1920 + 1600 with common border line, both text scaling 125%</p>\n<p><code>Bounds java.awt.Rectangle[x=0,y=0,width=1920,height=1080]</code>\n<br><code>Bounds java.awt.Rectangle[x=1920,y=174,width=1600,height=900]</code></p>\n<p>Now, when the text scaling of the second screen is changed to 100%, I get</p>\n<p><code>Bounds java.awt.Rectangle[x=0,y=0,width=1920,height=1080]</code>\n<br><code>Bounds java.awt.Rectangle[x=2400,y=218,width=2000,height=1125]</code> .</p>\n<p>The bounds of the second screen appear scaled by 125%. This is to be considered,\ne.g. when capturing all screens, which independent from text scaling will produce a section</p>\n<p><code>Bounds java.awt.Rectangle[x=1920,y=174,width=1600,height=900]</code></p>\n<p>for the secondary screen.</p>\n<h1>EDIT</h1>\n<p><code>GraphicDevice.getDisplayMode().getWidth()</code> delivers the text-scale-invariant value 1600 for the second screen and so the correcting factor for the rectangles reported by <code>GraphicsConfiguration.getBounds()</code></p>\n"}],"owner":{"display_name":"user402642"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1195,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":3789584,"answer_count":2,"score":2,"last_activity_date":1665938994,"creation_date":1285349620,"question_id":3789555,"body_markdown":"It seems that the .getBounds() method of the GraphicsConfiguration class is not reporting the correct values.\r\n\r\n     \r\n\r\n       GraphicsDevice[] gdArr = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices();\r\n\r\n            int width = 0;\r\n            for (GraphicsDevice gd : gdArr)\r\n            {\r\n                if (gd.getType() == gd.TYPE_RASTER_SCREEN)                                                \r\n                    System.out.println(&quot;Value is: &quot; + gd.getDefaultConfiguration().getBounds().getX());                \r\n            }            \r\n\r\nI have two monitors: running 1920 * 1080 and 1280 * 1080.\r\n\r\nI get the following values:\r\n\r\nfor .getX() I get:\r\n\r\n    Value = 1920\r\n    Value = 0\r\n\r\nfor .getY() I get:\r\n\r\n    Value = 0\r\n    Value = 0\r\n\r\nI&#39;m running on a Linux platform with Nvidia&#39;s Twinview.  Is this a bug outside of Swing?","title":"Java Swing; Problems with Java GraphicsConfiguration.getBounds() returning 0","body":"<p>It seems that the .getBounds() method of the GraphicsConfiguration class is not reporting the correct values.</p>\n\n<pre><code>   GraphicsDevice[] gdArr = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices();\n\n        int width = 0;\n        for (GraphicsDevice gd : gdArr)\n        {\n            if (gd.getType() == gd.TYPE_RASTER_SCREEN)                                                \n                System.out.println(\"Value is: \" + gd.getDefaultConfiguration().getBounds().getX());                \n        }            \n</code></pre>\n\n<p>I have two monitors: running 1920 * 1080 and 1280 * 1080.</p>\n\n<p>I get the following values:</p>\n\n<p>for .getX() I get:</p>\n\n<pre><code>Value = 1920\nValue = 0\n</code></pre>\n\n<p>for .getY() I get:</p>\n\n<pre><code>Value = 0\nValue = 0\n</code></pre>\n\n<p>I'm running on a Linux platform with Nvidia's Twinview.  Is this a bug outside of Swing?</p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":5742767,"reputation":9245,"user_id":4534923,"display_name":"Paulo"},"score":0,"creation_date":1665943511,"post_id":74088611,"comment_id":130812430,"body_markdown":"Hi, I am assuming that your query does not work, but could you explain what is failing explicitly.","body":"Hi, I am assuming that your query does not work, but could you explain what is failing explicitly."},{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1665980386,"post_id":74088611,"comment_id":130818023,"body_markdown":"what is data type of `variables` field ? is it nested or object? can you please post your index mapping ?","body":"what is data type of <code>variables</code> field ? is it nested or object? can you please post your index mapping ?"}],"owner":{"account_id":1605331,"reputation":23,"user_id":3147473,"display_name":"user3147473"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665938976,"creation_date":1665936029,"question_id":74088611,"body_markdown":"I am using Java to perform queries on Elasticsearch, via the ElasticSearchClient. As there are big variables returned, I would like to only retrieve the ones that are relevant but the variables in _source are nested.\r\n\r\nBelow is a sample index response (multiple indexes can be returned with same _source structure)\r\n\r\n```json\r\n[\r\n    {\r\n        &quot;_index&quot;: &quot;kn-tas-20200630&quot;,\r\n        &quot;_type&quot;: &quot;_doc&quot;,\r\n        &quot;_id&quot;: &quot;1122334455&quot;,\r\n        &quot;_score&quot;: null,\r\n        &quot;_source&quot;: {\r\n            &quot;variables&quot;: [\r\n                {\r\n                    &quot;rawValue&quot;: &quot;DEFH&quot;,\r\n                    &quot;name&quot;: &quot;MANAGER&quot;\r\n                },\r\n                {\r\n                    &quot;rawValue&quot;: &quot;ABCD&quot;,\r\n                    &quot;name&quot;: &quot;EMPLOYEE&quot;\r\n                },\r\n                {\r\n                    &quot;rawValue&quot;: &quot;[{\\&quot;rowId\\&quot;:102030,\\&quot;rowType\\&quot;:\\&quot;SIM\\&quot;}]&quot;,\r\n                    &quot;name&quot;: &quot;extData&quot;\r\n                }\r\n            ]\r\n        },\r\n        &quot;sort&quot;: [\r\n            1665735632119\r\n        ]\r\n    }\r\n]\r\n```\r\n\r\nI would like to create a query using SearchSourceBuilder to query ES and only retrieve the following:\r\n\r\n - Get the rawValue by name (I provide Manager, I get &quot;DFEH&quot;)\r\n - Get the rowType value (I provide extData + row Type, I get &quot;SIM&quot;)\r\n\r\nBelow is my query:\r\n\r\n```json\r\n{\r\n    &quot;from&quot;: 0,\r\n    &quot;size&quot;: 100,\r\n    &quot;query&quot;: {\r\n        &quot;bool&quot;: {\r\n            &quot;must&quot;: [\r\n                {\r\n                    &quot;terms&quot;: {\r\n                        &quot;prcKey&quot;: [\r\n                            &quot;K-112&quot;\r\n                        ],\r\n                        &quot;boost&quot;: 1.0\r\n                    }\r\n                }\r\n            ],\r\n            &quot;must_not&quot;: [\r\n                {\r\n                    &quot;exists&quot;: {\r\n                        &quot;field&quot;: &quot;endDate&quot;,\r\n                        &quot;boost&quot;: 1.0\r\n                    }\r\n                },\r\n                {\r\n                    &quot;term&quot;: {\r\n                        &quot;personInCharge&quot;: {\r\n                            &quot;value&quot;: &quot;ABC&quot;,\r\n                            &quot;boost&quot;: 1.0\r\n                        }\r\n                    }\r\n                }\r\n            ],\r\n            &quot;adjust_pure_negative&quot;: true,\r\n            &quot;boost&quot;: 1.0\r\n        }\r\n    },\r\n    &quot;_source&quot;: {\r\n        &quot;includes&quot;: [\r\n            &quot;variables.name&quot;,\r\n            &quot;variables.rawValue&quot;\r\n        ],\r\n        &quot;excludes&quot;: []\r\n    },\r\n    &quot;sort&quot;: [\r\n        {\r\n            &quot;createTime&quot;: {\r\n                &quot;order&quot;: &quot;desc&quot;\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nHow can I fix my query? I tried using nested queries but without any luck.\r\n","title":"Searching _source and returning only needed fields using Java","body":"<p>I am using Java to perform queries on Elasticsearch, via the ElasticSearchClient. As there are big variables returned, I would like to only retrieve the ones that are relevant but the variables in _source are nested.</p>\n<p>Below is a sample index response (multiple indexes can be returned with same _source structure)</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;_index&quot;: &quot;kn-tas-20200630&quot;,\n        &quot;_type&quot;: &quot;_doc&quot;,\n        &quot;_id&quot;: &quot;1122334455&quot;,\n        &quot;_score&quot;: null,\n        &quot;_source&quot;: {\n            &quot;variables&quot;: [\n                {\n                    &quot;rawValue&quot;: &quot;DEFH&quot;,\n                    &quot;name&quot;: &quot;MANAGER&quot;\n                },\n                {\n                    &quot;rawValue&quot;: &quot;ABCD&quot;,\n                    &quot;name&quot;: &quot;EMPLOYEE&quot;\n                },\n                {\n                    &quot;rawValue&quot;: &quot;[{\\&quot;rowId\\&quot;:102030,\\&quot;rowType\\&quot;:\\&quot;SIM\\&quot;}]&quot;,\n                    &quot;name&quot;: &quot;extData&quot;\n                }\n            ]\n        },\n        &quot;sort&quot;: [\n            1665735632119\n        ]\n    }\n]\n</code></pre>\n<p>I would like to create a query using SearchSourceBuilder to query ES and only retrieve the following:</p>\n<ul>\n<li>Get the rawValue by name (I provide Manager, I get &quot;DFEH&quot;)</li>\n<li>Get the rowType value (I provide extData + row Type, I get &quot;SIM&quot;)</li>\n</ul>\n<p>Below is my query:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;from&quot;: 0,\n    &quot;size&quot;: 100,\n    &quot;query&quot;: {\n        &quot;bool&quot;: {\n            &quot;must&quot;: [\n                {\n                    &quot;terms&quot;: {\n                        &quot;prcKey&quot;: [\n                            &quot;K-112&quot;\n                        ],\n                        &quot;boost&quot;: 1.0\n                    }\n                }\n            ],\n            &quot;must_not&quot;: [\n                {\n                    &quot;exists&quot;: {\n                        &quot;field&quot;: &quot;endDate&quot;,\n                        &quot;boost&quot;: 1.0\n                    }\n                },\n                {\n                    &quot;term&quot;: {\n                        &quot;personInCharge&quot;: {\n                            &quot;value&quot;: &quot;ABC&quot;,\n                            &quot;boost&quot;: 1.0\n                        }\n                    }\n                }\n            ],\n            &quot;adjust_pure_negative&quot;: true,\n            &quot;boost&quot;: 1.0\n        }\n    },\n    &quot;_source&quot;: {\n        &quot;includes&quot;: [\n            &quot;variables.name&quot;,\n            &quot;variables.rawValue&quot;\n        ],\n        &quot;excludes&quot;: []\n    },\n    &quot;sort&quot;: [\n        {\n            &quot;createTime&quot;: {\n                &quot;order&quot;: &quot;desc&quot;\n            }\n        }\n    ]\n}\n</code></pre>\n<p>How can I fix my query? I tried using nested queries but without any luck.</p>\n"},{"tags":["java","spring","spring-boot","elasticsearch","spring-data-elasticsearch"],"comments":[{"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"score":1,"creation_date":1665810828,"post_id":74074851,"comment_id":130790418,"body_markdown":"what version of Elasticsearch is your cluster running on? Could it be that it&#39;s version 8? Spring Data Elasticsearch 4.4 (which is pulled in by Spring Boot 2.7.3) is build with the Elasticsearch libraries in version 7.17","body":"what version of Elasticsearch is your cluster running on? Could it be that it&#39;s version 8? Spring Data Elasticsearch 4.4 (which is pulled in by Spring Boot 2.7.3) is build with the Elasticsearch libraries in version 7.17"},{"owner":{"account_id":1314578,"reputation":1907,"user_id":1261764,"accept_rate":94,"display_name":"abidinberkay"},"score":0,"creation_date":1665831190,"post_id":74074851,"comment_id":130793552,"body_markdown":"@P.J.Meisch just one word, you are &quot;hero&quot;. I also checked some of your answers and was hoping answer from you, you did, and you saved my life. I used spring-boot-starter-data-elasticsearch 2.7.3 and downgraded es to 7.17.6 and it worked. Thanks again. If you do this comment as an answer than I can check as the correct answer","body":"@P.J.Meisch just one word, you are &quot;hero&quot;. I also checked some of your answers and was hoping answer from you, you did, and you saved my life. I used spring-boot-starter-data-elasticsearch 2.7.3 and downgraded es to 7.17.6 and it worked. Thanks again. If you do this comment as an answer than I can check as the correct answer"}],"answers":[{"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665938735,"creation_date":1665938735,"answer_id":74088980,"question_id":74074851,"body_markdown":"Spring Data Elasticsearch 4.4 (which is pulled in by Spring Boot 2.7.3) is build with the Elasticsearch libraries in version 7.17, this is problematic when running against an Elasticsearch cluster in version 8. Youhave basically two options:\r\n\r\n1. Downgrade your cluster to version 7.17.6 (the latest 7.17 currently available) i f this is possible.\r\n\r\n2. You can try and see if setting the compatibility headers (see the [Spring Data Elasticsearch documentation section 5.3.1](https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.configuration) for more info). This **should** work, but I encountered cases where the response from the cluster still wasn&#39;t readable with a 7.17 client. - I had issues opened with Elasticsearch and they were resolved, but there still might be hidden traps.","title":"How to use stable RestHighLevelClient with Elasticsearch?","body":"<p>Spring Data Elasticsearch 4.4 (which is pulled in by Spring Boot 2.7.3) is build with the Elasticsearch libraries in version 7.17, this is problematic when running against an Elasticsearch cluster in version 8. Youhave basically two options:</p>\n<ol>\n<li><p>Downgrade your cluster to version 7.17.6 (the latest 7.17 currently available) i f this is possible.</p>\n</li>\n<li><p>You can try and see if setting the compatibility headers (see the <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.configuration\" rel=\"nofollow noreferrer\">Spring Data Elasticsearch documentation section 5.3.1</a> for more info). This <strong>should</strong> work, but I encountered cases where the response from the cluster still wasn't readable with a 7.17 client. - I had issues opened with Elasticsearch and they were resolved, but there still might be hidden traps.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":1314578,"reputation":1907,"user_id":1261764,"accept_rate":94,"display_name":"abidinberkay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74088980,"answer_count":1,"score":0,"last_activity_date":1665938735,"creation_date":1665781457,"question_id":74074851,"body_markdown":"I have searched for so many posts but I couldn&#39;t find a proper way to use Elastic Search with spring boot application because I am totally new to elastic search.\r\n\r\nMy only dependency is:\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.7.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n\r\nMy config class is:\r\n\r\n    import org.elasticsearch.client.RestHighLevelClient;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.data.elasticsearch.client.ClientConfiguration;\r\n    import org.springframework.data.elasticsearch.client.RestClients;\r\n    import org.springframework.data.elasticsearch.config.AbstractElasticsearchConfiguration;\r\n    import org.springframework.data.elasticsearch.repository.config.EnableElasticsearchRepositories;\r\n    \r\n    @Configuration\r\n    @EnableElasticsearchRepositories(basePackages = &quot;com.backend.repository.elasticsearchrepository&quot;)\r\n    @ComponentScan(basePackages = {&quot;com.backend.model.elasticsearchmodel&quot;})\r\n    public class ElasticSearchConfig extends AbstractElasticsearchConfiguration {\r\n    \r\n        @Value(&quot;${spring.elasticsearch.url}&quot;)\r\n        public String elasticsearchUrl;\r\n    \r\n        @Value(&quot;${spring.elasticsearch.username}&quot;)\r\n        public String username;\r\n    \r\n        @Value(&quot;${spring.elasticsearch.password}&quot;)\r\n        public String password;\r\n    \r\n    \r\n        @Bean\r\n        @Override\r\n        public RestHighLevelClient elasticsearchClient() {\r\n            final ClientConfiguration config = ClientConfiguration.builder()\r\n                    .connectedTo(elasticsearchUrl)\r\n                    .withBasicAuth(username, password)\r\n                    .build();\r\n    \r\n            return RestClients.create(config).rest();\r\n        }\r\n    }\r\nHere RestHighLevelClient is shown as deprecated. And my repository class is:\r\n\r\n    package com.backend.repository.elasticsearchrepository;\r\n    \r\n    import com.backend.model.elasticsearchmodel.EsOffice;\r\n    import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\r\n    \r\n    import java.util.UUID;\r\n    \r\n    public interface ESOfficeRepository extends ElasticsearchRepository&lt;EsOffice, UUID&gt; {\r\n    }\r\n\r\nWhen I call the methods of this repository then it works fine but while storing the data it is returning error message even if it adds the data successfully.\r\n\r\n    2022-10-15 00:00:15.608 ERROR 51607 --- [nio-8080-exec-2] c.a.a.exception.GlobalExceptionHandler   : Unable to parse response body for Response{requestLine=POST /office/_doc?timeout=1m HTTP/1.1, host=http://localhost:9200, response=HTTP/1.1 201 Created}; nested exception is java.lang.RuntimeException: Unable to parse response body for Response{requestLine=POST /office/_doc?timeout=1m HTTP/1.1, host=http://localhost:9200, response=HTTP/1.1 201 Created}\r\n\r\nWhich POM dependency + what kind of repository should I use and How can I configure it in my config file ? I need these 3 that compatible with each other ?","title":"How to use stable RestHighLevelClient with Elasticsearch?","body":"<p>I have searched for so many posts but I couldn't find a proper way to use Elastic Search with spring boot application because I am totally new to elastic search.</p>\n<p>My only dependency is:\n\norg.springframework.boot\nspring-boot-starter-data-elasticsearch\n2.7.3\n</p>\n<p>My config class is:</p>\n<pre><code>import org.elasticsearch.client.RestHighLevelClient;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.elasticsearch.client.ClientConfiguration;\nimport org.springframework.data.elasticsearch.client.RestClients;\nimport org.springframework.data.elasticsearch.config.AbstractElasticsearchConfiguration;\nimport org.springframework.data.elasticsearch.repository.config.EnableElasticsearchRepositories;\n\n@Configuration\n@EnableElasticsearchRepositories(basePackages = &quot;com.backend.repository.elasticsearchrepository&quot;)\n@ComponentScan(basePackages = {&quot;com.backend.model.elasticsearchmodel&quot;})\npublic class ElasticSearchConfig extends AbstractElasticsearchConfiguration {\n\n    @Value(&quot;${spring.elasticsearch.url}&quot;)\n    public String elasticsearchUrl;\n\n    @Value(&quot;${spring.elasticsearch.username}&quot;)\n    public String username;\n\n    @Value(&quot;${spring.elasticsearch.password}&quot;)\n    public String password;\n\n\n    @Bean\n    @Override\n    public RestHighLevelClient elasticsearchClient() {\n        final ClientConfiguration config = ClientConfiguration.builder()\n                .connectedTo(elasticsearchUrl)\n                .withBasicAuth(username, password)\n                .build();\n\n        return RestClients.create(config).rest();\n    }\n}\n</code></pre>\n<p>Here RestHighLevelClient is shown as deprecated. And my repository class is:</p>\n<pre><code>package com.backend.repository.elasticsearchrepository;\n\nimport com.backend.model.elasticsearchmodel.EsOffice;\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n\nimport java.util.UUID;\n\npublic interface ESOfficeRepository extends ElasticsearchRepository&lt;EsOffice, UUID&gt; {\n}\n</code></pre>\n<p>When I call the methods of this repository then it works fine but while storing the data it is returning error message even if it adds the data successfully.</p>\n<pre><code>2022-10-15 00:00:15.608 ERROR 51607 --- [nio-8080-exec-2] c.a.a.exception.GlobalExceptionHandler   : Unable to parse response body for Response{requestLine=POST /office/_doc?timeout=1m HTTP/1.1, host=http://localhost:9200, response=HTTP/1.1 201 Created}; nested exception is java.lang.RuntimeException: Unable to parse response body for Response{requestLine=POST /office/_doc?timeout=1m HTTP/1.1, host=http://localhost:9200, response=HTTP/1.1 201 Created}\n</code></pre>\n<p>Which POM dependency + what kind of repository should I use and How can I configure it in my config file ? I need these 3 that compatible with each other ?</p>\n"},{"tags":["java","arrays","string"],"comments":[{"owner":{"account_id":18331959,"reputation":776,"user_id":13350278,"display_name":"Mohamed Elgazar"},"score":0,"creation_date":1665922533,"post_id":74087022,"comment_id":130807918,"body_markdown":"You could use a for loop to iterate through the second half of the string, and if the character is &#39;h&#39;, change it to &#39;t&#39;, and vice versa.","body":"You could use a for loop to iterate through the second half of the string, and if the character is &#39;h&#39;, change it to &#39;t&#39;, and vice versa."}],"answers":[{"comments":[{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1665922833,"post_id":74087040,"comment_id":130807967,"body_markdown":"I don&#39;t get what you did, seems nothing changed, so ?","body":"I don&#39;t get what you did, seems nothing changed, so ?"}],"tags":[],"owner":{"account_id":18331959,"reputation":776,"user_id":13350278,"display_name":"Mohamed Elgazar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665922720,"creation_date":1665922720,"answer_id":74087040,"question_id":74087022,"body_markdown":"This program splits a string into two halves, then swaps the first and second characters of the second half.\r\npublic class Tollring3 {\r\n\r\n       public static void main(String args[]) \r\n        { \r\n          \r\n           String base = &quot;httthhhtth&quot;;\r\n          int half = base.length()/2;\r\n           // int half = base.length() % 2 == 0 ? base.length()/2 : base.length()/2 + 1;\r\n           String first = base.substring(0, half);\r\n           String second = base.substring(half);\r\n           System.out.println(&quot;Actual String :- &quot;+base);\r\n           System.out.println(first);\r\n           System.out.println(second);\r\n           char[] c = second.toCharArray();\r\n    \r\n        // Replace with a &quot;swap&quot; function, if desired:\r\n        char temp = c[0];\r\n        c[0] = c[1];\r\n        c[1] = temp;\r\n    \r\n        String swappedString = new String(c);\r\n        System.out.println(swappedString);\r\n        } \r\n    }","title":"Created a string in Java, S = &quot;httthhhtth&quot;. Split it in a half and change second half &#39;H&#39; into &#39;T&#39; and &#39;T&#39; into &#39;H&#39;","body":"<p>This program splits a string into two halves, then swaps the first and second characters of the second half.\npublic class Tollring3 {</p>\n<pre><code>   public static void main(String args[]) \n    { \n      \n       String base = &quot;httthhhtth&quot;;\n      int half = base.length()/2;\n       // int half = base.length() % 2 == 0 ? base.length()/2 : base.length()/2 + 1;\n       String first = base.substring(0, half);\n       String second = base.substring(half);\n       System.out.println(&quot;Actual String :- &quot;+base);\n       System.out.println(first);\n       System.out.println(second);\n       char[] c = second.toCharArray();\n\n    // Replace with a &quot;swap&quot; function, if desired:\n    char temp = c[0];\n    c[0] = c[1];\n    c[1] = temp;\n\n    String swappedString = new String(c);\n    System.out.println(swappedString);\n    } \n}\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user17233545"},"score":1,"creation_date":1665925132,"post_id":74087086,"comment_id":130808365,"body_markdown":"Why not `for (int i = c.length / 2; i &lt; c.length; ++i)`?","body":"Why not <code>for (int i = c.length &#47; 2; i &lt; c.length; ++i)</code>?"}],"tags":[],"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665938428,"creation_date":1665923085,"answer_id":74087086,"question_id":74087022,"body_markdown":"To do the replacement you need to iterate on the chars and use `if` to test what char it is\r\n\r\n    String base = &quot;httthhhtth&quot;;\r\n    System.out.println(base);\r\n\r\n    char[] c = base.toCharArray();\r\n    for (int i = c.length / 2; i &lt; c.length; ++i) {\r\n        if (c[i] == &#39;h&#39;) {\r\n            c[i] = &#39;t&#39;;\r\n        } else if (c[i] == &#39;t&#39;) {\r\n            c[i] = &#39;h&#39;;\r\n        }\r\n    }\r\n\r\n    String swappedString = new String(c);\r\n    System.out.println(swappedString);\r\n\r\n&lt;!-- --&gt;\r\n\r\n    httthhhtth\r\n    httthtthht\r\n","title":"Created a string in Java, S = &quot;httthhhtth&quot;. Split it in a half and change second half &#39;H&#39; into &#39;T&#39; and &#39;T&#39; into &#39;H&#39;","body":"<p>To do the replacement you need to iterate on the chars and use <code>if</code> to test what char it is</p>\n<pre><code>String base = &quot;httthhhtth&quot;;\nSystem.out.println(base);\n\nchar[] c = base.toCharArray();\nfor (int i = c.length / 2; i &lt; c.length; ++i) {\n    if (c[i] == 'h') {\n        c[i] = 't';\n    } else if (c[i] == 't') {\n        c[i] = 'h';\n    }\n}\n\nString swappedString = new String(c);\nSystem.out.println(swappedString);\n</code></pre>\n\n<pre><code>httthhhtth\nhttthtthht\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665925770,"creation_date":1665925770,"answer_id":74087378,"question_id":74087022,"body_markdown":"You can define the `swap` function as follows:\r\n\r\n    String swap(String str) {\r\n        char[] arr = str.toCharArray();\r\n        char[] result = new char[arr.length];\r\n        for (int i = 0; i &lt; arr.length; i++)\r\n            result[i] = arr[i] == &#39;h&#39; ? &#39;t&#39; : arr[i] == &#39;t&#39; ? &#39;h&#39; : arr[i];\r\n    \r\n        return new String(result);\r\n    }\r\nIn the function, we have\r\n\r\n 1. split the given string (second half) into a `char` array, `arr`.\r\n 2. created another `char` array, `result` of the same size.\r\n 3. iterates `arr` to store each character from `arr` into `result` while swapping `h` and `t` with each other.\r\n 4. finally returned a new `String` created out of `result`.\r\n\r\n**Full demo**:\r\n\r\n    public class Main {\r\n        public static void main(String args[]) {\r\n            String base = &quot;httthhhtth&quot;;\r\n            int half = base.length() / 2;\r\n            // int half = base.length() % 2 == 0 ? base.length()/2 : base.length()/2 + 1;\r\n            String first = base.substring(0, half);\r\n            String second = base.substring(half);\r\n            System.out.println(&quot;Actual String :- &quot; + base);\r\n            System.out.println(first);\r\n            System.out.println(second);\r\n    \r\n            String swappedString = swap(second);\r\n            System.out.println(swappedString);\r\n        }\r\n    \r\n        static String swap(String str) {\r\n            char[] arr = str.toCharArray();\r\n            char[] result = new char[arr.length];\r\n            for (int i = 0; i &lt; arr.length; i++)\r\n                result[i] = arr[i] == &#39;h&#39; ? &#39;t&#39; : arr[i] == &#39;t&#39; ? &#39;h&#39; : arr[i];\r\n    \r\n            return new String(result);\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    Actual String :- httthhhtth\r\n    httth\r\n    hhtth\r\n    tthht\r\n\r\n \r\n\r\n","title":"Created a string in Java, S = &quot;httthhhtth&quot;. Split it in a half and change second half &#39;H&#39; into &#39;T&#39; and &#39;T&#39; into &#39;H&#39;","body":"<p>You can define the <code>swap</code> function as follows:</p>\n<pre><code>String swap(String str) {\n    char[] arr = str.toCharArray();\n    char[] result = new char[arr.length];\n    for (int i = 0; i &lt; arr.length; i++)\n        result[i] = arr[i] == 'h' ? 't' : arr[i] == 't' ? 'h' : arr[i];\n\n    return new String(result);\n}\n</code></pre>\n<p>In the function, we have</p>\n<ol>\n<li>split the given string (second half) into a <code>char</code> array, <code>arr</code>.</li>\n<li>created another <code>char</code> array, <code>result</code> of the same size.</li>\n<li>iterates <code>arr</code> to store each character from <code>arr</code> into <code>result</code> while swapping <code>h</code> and <code>t</code> with each other.</li>\n<li>finally returned a new <code>String</code> created out of <code>result</code>.</li>\n</ol>\n<p><strong>Full demo</strong>:</p>\n<pre><code>public class Main {\n    public static void main(String args[]) {\n        String base = &quot;httthhhtth&quot;;\n        int half = base.length() / 2;\n        // int half = base.length() % 2 == 0 ? base.length()/2 : base.length()/2 + 1;\n        String first = base.substring(0, half);\n        String second = base.substring(half);\n        System.out.println(&quot;Actual String :- &quot; + base);\n        System.out.println(first);\n        System.out.println(second);\n\n        String swappedString = swap(second);\n        System.out.println(swappedString);\n    }\n\n    static String swap(String str) {\n        char[] arr = str.toCharArray();\n        char[] result = new char[arr.length];\n        for (int i = 0; i &lt; arr.length; i++)\n            result[i] = arr[i] == 'h' ? 't' : arr[i] == 't' ? 'h' : arr[i];\n\n        return new String(result);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>Actual String :- httthhhtth\nhttth\nhhtth\ntthht\n</code></pre>\n"}],"owner":{"account_id":26639401,"reputation":3,"user_id":20255341,"display_name":"Ravi Ranjan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1665938428,"creation_date":1665922487,"question_id":74087022,"body_markdown":"I managed to split the string but how can I swap h with t and t with h in second half of string ?\r\n\r\n    public class Tollring3 {\r\n    \r\n       public static void main(String args[]) \r\n        { \r\n          \r\n           String base = &quot;httthhhtth&quot;;\r\n          int half = base.length()/2;\r\n           // int half = base.length() % 2 == 0 ? base.length()/2 : base.length()/2 + 1;\r\n           String first = base.substring(0, half);\r\n           String second = base.substring(half);\r\n           System.out.println(&quot;Actual String :- &quot;+base);\r\n           System.out.println(first);\r\n           System.out.println(second);\r\n           char[] c = second.toCharArray();\r\n    \r\n        // Replace with a &quot;swap&quot; function, if desired:\r\n        char temp = c[0];\r\n        c[0] = c[1];\r\n        c[1] = temp;\r\n    \r\n        String swappedString = new String(c);\r\n        System.out.println(swappedString);\r\n        } \r\n    }\r\n\r\nHow to swap h with t and t with h in second half of string","title":"Created a string in Java, S = &quot;httthhhtth&quot;. Split it in a half and change second half &#39;H&#39; into &#39;T&#39; and &#39;T&#39; into &#39;H&#39;","body":"<p>I managed to split the string but how can I swap h with t and t with h in second half of string ?</p>\n<pre><code>public class Tollring3 {\n\n   public static void main(String args[]) \n    { \n      \n       String base = &quot;httthhhtth&quot;;\n      int half = base.length()/2;\n       // int half = base.length() % 2 == 0 ? base.length()/2 : base.length()/2 + 1;\n       String first = base.substring(0, half);\n       String second = base.substring(half);\n       System.out.println(&quot;Actual String :- &quot;+base);\n       System.out.println(first);\n       System.out.println(second);\n       char[] c = second.toCharArray();\n\n    // Replace with a &quot;swap&quot; function, if desired:\n    char temp = c[0];\n    c[0] = c[1];\n    c[1] = temp;\n\n    String swappedString = new String(c);\n    System.out.println(swappedString);\n    } \n}\n</code></pre>\n<p>How to swap h with t and t with h in second half of string</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user180100"},"score":1,"creation_date":1417198217,"post_id":27193955,"comment_id":42873436,"body_markdown":"your are abusing a cast here. `(number1 % 2)` is using the ascii code of number1, not its value. For example if `number1` is `&quot;1&quot;`, `(number1 % 2)` is `(49 % 2)` not `(1 % 2)`. But you are lucky, `0` has ascii code 48.","body":"your are abusing a cast here. <code>(number1 % 2)</code> is using the ascii code of number1, not its value. For example if <code>number1</code> is <code>&quot;1&quot;</code>, <code>(number1 % 2)</code> is <code>(49 % 2)</code> not <code>(1 % 2)</code>. But you are lucky, <code>0</code> has ascii code 48."},{"owner":{"account_id":5342688,"reputation":55,"user_id":4259189,"display_name":"Louie Morris"},"score":0,"creation_date":1417198245,"post_id":27193955,"comment_id":42873448,"body_markdown":"What does that mean? :/","body":"What does that mean? :/"},{"owner":{"account_id":5342688,"reputation":55,"user_id":4259189,"display_name":"Louie Morris"},"score":0,"creation_date":1417198482,"post_id":27193955,"comment_id":42873539,"body_markdown":"Ok, thanks, but could you try to answer my question please","body":"Ok, thanks, but could you try to answer my question please"},{"owner":{"account_id":4127389,"reputation":2900,"user_id":3386144,"accept_rate":73,"display_name":"TNT"},"score":0,"creation_date":1417198517,"post_id":27193955,"comment_id":42873551,"body_markdown":"Wouldn&#39;t it be easier to check if one digit is not odd instead of if all the digits are odd?","body":"Wouldn&#39;t it be easier to check if one digit is not odd instead of if all the digits are odd?"},{"owner":{"account_id":5360530,"reputation":193,"user_id":4271928,"display_name":"Ensar Hatipoglu"},"score":0,"creation_date":1417198592,"post_id":27193955,"comment_id":42873587,"body_markdown":"Check out the code in this other thread: http://stackoverflow.com/questions/19129509/how-can-i-count-the-number-of-odd-evens-and-zeros-in-a-multiple-digit-number-i","body":"Check out the code in this other thread: <a href=\"http://stackoverflow.com/questions/19129509/how-can-i-count-the-number-of-odd-evens-and-zeros-in-a-multiple-digit-number-i\" title=\"how can i count the number of odd evens and zeros in a multiple digit number i\">stackoverflow.com/questions/19129509/&hellip;</a>"},{"owner":{"account_id":1013036,"reputation":20197,"user_id":1025201,"display_name":"mprabhat"},"score":0,"creation_date":1417198608,"post_id":27193955,"comment_id":42873596,"body_markdown":"Instead of getting individual char from String, get the digit itself, see [this](http://stackoverflow.com/questions/2051817/return-first-digit-of-an-integer). It speaks about first char but you can use it for others too","body":"Instead of getting individual char from String, get the digit itself, see <a href=\"http://stackoverflow.com/questions/2051817/return-first-digit-of-an-integer\">this</a>. It speaks about first char but you can use it for others too"}],"answers":[{"comments":[{"owner":{"account_id":5342688,"reputation":55,"user_id":4259189,"display_name":"Louie Morris"},"score":1,"creation_date":1417199050,"post_id":27194042,"comment_id":42873731,"body_markdown":"Hi, thanks, when I have the code you put, when an exception is thrown on the first part, when I run it is just keeps saying: Enter a 5 digit number...\nThat was not a number! Try again...\nEnter a 5 digit number...\nThat was not a number! Try again...\nEnter a 5 digit number...\nThat was not a number! Try again...","body":"Hi, thanks, when I have the code you put, when an exception is thrown on the first part, when I run it is just keeps saying: Enter a 5 digit number... That was not a number! Try again... Enter a 5 digit number... That was not a number! Try again... Enter a 5 digit number... That was not a number! Try again..."},{"owner":{"account_id":2972927,"reputation":1413,"user_id":2524630,"display_name":"David.Jones"},"score":0,"creation_date":1417199331,"post_id":27194042,"comment_id":42873821,"body_markdown":"I&#39;ve edited my code to fix this problem. I didn&#39;t realize a newline value might be stuck in the scanner. See my updated code above.","body":"I&#39;ve edited my code to fix this problem. I didn&#39;t realize a newline value might be stuck in the scanner. See my updated code above."},{"owner":{"account_id":2972927,"reputation":1413,"user_id":2524630,"display_name":"David.Jones"},"score":0,"creation_date":1417199778,"post_id":27194042,"comment_id":42873970,"body_markdown":"No problem! Do you understand the code? I don&#39;t want to simply solve your problem and you not understand why your code was wrong. If you would like an explanation please let me know, or feel free to ask questions...","body":"No problem! Do you understand the code? I don&#39;t want to simply solve your problem and you not understand why your code was wrong. If you would like an explanation please let me know, or feel free to ask questions..."},{"owner":{"account_id":5342688,"reputation":55,"user_id":4259189,"display_name":"Louie Morris"},"score":1,"creation_date":1417199970,"post_id":27194042,"comment_id":42874026,"body_markdown":"Yes, I do understand it ;), what were the problems with the code that you didn&#39;t put into the answer?","body":"Yes, I do understand it ;), what were the problems with the code that you didn&#39;t put into the answer?"},{"owner":{"account_id":2972927,"reputation":1413,"user_id":2524630,"display_name":"David.Jones"},"score":0,"creation_date":1417200264,"post_id":27194042,"comment_id":42874132,"body_markdown":"One example, when you get to &quot;Would you like to enter another number? (Y/N)&quot;, you only strip the first character from the response. Enter &quot;Y \\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n&quot;. This should be handled by clearing the input scanner. Also, as some stated in the comments above, your (number % 2) logic isn&#39;t actually doing what you want. Its taking the ASCII value of the number (string &quot;1&quot; is 49 in ASCII), so your code is actually doing (49 % 2), rather than (1 % 2). You should use the int value for 1, not the ASCII char representation.","body":"One example, when you get to &quot;Would you like to enter another number? (Y/N)&quot;, you only strip the first character from the response. Enter &quot;Y \\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n&quot;. This should be handled by clearing the input scanner. Also, as some stated in the comments above, your (number % 2) logic isn&#39;t actually doing what you want. Its taking the ASCII value of the number (string &quot;1&quot; is 49 in ASCII), so your code is actually doing (49 % 2), rather than (1 % 2). You should use the int value for 1, not the ASCII char representation."},{"owner":{"account_id":5342688,"reputation":55,"user_id":4259189,"display_name":"Louie Morris"},"score":1,"creation_date":1417200393,"post_id":27194042,"comment_id":42874179,"body_markdown":"I have no clue what ASCII is :(... I thought my int number1 was the first digit of the actual number?","body":"I have no clue what ASCII is :(... I thought my int number1 was the first digit of the actual number?"},{"owner":{"account_id":2972927,"reputation":1413,"user_id":2524630,"display_name":"David.Jones"},"score":0,"creation_date":1417200573,"post_id":27194042,"comment_id":42874236,"body_markdown":"The basic answer is, ASCII is the code used to represent characters. In Java, a char 1, isn&#39;t actually stored as a 1. It is stored as its ASCII value, which is 49. You should use int, rather than char, to store these values.","body":"The basic answer is, ASCII is the code used to represent characters. In Java, a char 1, isn&#39;t actually stored as a 1. It is stored as its ASCII value, which is 49. You should use int, rather than char, to store these values."},{"owner":{"account_id":166892,"reputation":4102,"user_id":391338,"display_name":"Sentry"},"score":1,"creation_date":1417200674,"post_id":27194042,"comment_id":42874271,"body_markdown":"You are reading characters and &#39;1&#39; is a character just as &#39;A&#39; or &#39;#&#39;. Each character has a code in the ASCII system (http://en.wikipedia.org/wiki/ASCII). You have to convert the character codes to their numerical meaning, if you want to use them as such.","body":"You are reading characters and &#39;1&#39; is a character just as &#39;A&#39; or &#39;#&#39;. Each character has a code in the ASCII system (<a href=\"http://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ASCII</a>). You have to convert the character codes to their numerical meaning, if you want to use them as such."},{"owner":{"account_id":5342688,"reputation":55,"user_id":4259189,"display_name":"Louie Morris"},"score":0,"creation_date":1417200687,"post_id":27194042,"comment_id":42874275,"body_markdown":"ok thank you :) Btw I upvoted your comment XD I don&#39;t know who downvoted it","body":"ok thank you :) Btw I upvoted your comment XD I don&#39;t know who downvoted it"},{"owner":{"account_id":2972927,"reputation":1413,"user_id":2524630,"display_name":"David.Jones"},"score":0,"creation_date":1417200797,"post_id":27194042,"comment_id":42874308,"body_markdown":"Exactly what @Sentry said. Thanks Louie Morris. I don&#39;t mind a down-vote, if its explained. What makes me mad is when arrogant users on here think that an answer isn&#39;t up to their standards, so they blindly down-vite without saying why. I wish SO made you comment before being able to down-vote.","body":"Exactly what @Sentry said. Thanks Louie Morris. I don&#39;t mind a down-vote, if its explained. What makes me mad is when arrogant users on here think that an answer isn&#39;t up to their standards, so they blindly down-vite without saying why. I wish SO made you comment before being able to down-vote."}],"tags":[],"owner":{"account_id":2972927,"reputation":1413,"user_id":2524630,"display_name":"David.Jones"},"comment_count":10,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665938398,"creation_date":1417198417,"answer_id":27194042,"question_id":27193955,"body_markdown":"I&#39;ve just rearranged some of your logic, and added a couple continue statements. You were very close, you just needed to rearrange some things.  \r\n\r\n\r\n    public static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        \r\n        boolean yesno = true;\r\n        while (yens == true) {\r\n            System.out.println(&quot;Enter a 5 digit number...&quot;);\r\n            try {\r\n                int number = scan.nextInt();\r\n                int length = String.valueOf(number).length();\r\n\r\n                if (length == 5) {\r\n                    String digits = String.valueOf(number);\r\n                    char number1 = digits.charAt(0);\r\n                    char number2 = digits.charAt(1);\r\n                    char number3 = digits.charAt(2);\r\n                    char number4 = digits.charAt(3);\r\n                    char number5 = digits.charAt(4);\r\n\r\n                    if (number1 % 2 != 0 &amp;&amp; number2 % 2 != 0 &amp;&amp; number3 % 2 != 0 &amp;&amp; number4 % 2 != 0 &amp;&amp; number5 % 2 != 0) {\r\n                        System.out.println(&quot;All of the numbers are odd...&quot;);\r\n                    } else {\r\n                        System.out.println(&quot;Not all of the numbers are odd...&quot;);\r\n                    }\r\n                } else {\r\n                    System.out.println(&quot;You did not enter a 5 digit number! Try again...&quot;);\r\n                    continue;\r\n                }\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;That was not a number! Try again...&quot;);\r\n                //A newline might still be stuck in the scanner, so clear it\r\n                scan.nextLine();\r\n                continue;\r\n            }\r\n            try {\r\n                System.out.println(&quot;Would you like to enter another number? (Y/N)&quot;);\r\n\r\n                char letter = scan.next().charAt(0);\r\n                if (letter == &#39;Y&#39; || letter == &#39;y&#39;) {\r\n                    continue;\r\n                } else if (letter == &#39;N&#39; || letter == &#39;n&#39;) {\r\n                    yesno = false;\r\n                } else {\r\n                    System.out.println(&quot;I will take that as a no!&quot;);\r\n                    yesno = false;\r\n                }\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;You did not enter a letter...&quot;);\r\n                scan.nextLine();\r\n            }\r\n        }\r\n        System.out.println(&quot;Goodbye!&quot;);\r\n    }\r\n\r\n\r\nBy the way, you have a lot of other issues in the code that should be addressed, but I simply answered the question that you asked, making the execution return the to top of the loop after an exception is thrown.\r\n","title":"Enter a number, That was not a number, please try again","body":"<p>I've just rearranged some of your logic, and added a couple continue statements. You were very close, you just needed to rearrange some things.</p>\n<pre><code>public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    \n    boolean yesno = true;\n    while (yens == true) {\n        System.out.println(&quot;Enter a 5 digit number...&quot;);\n        try {\n            int number = scan.nextInt();\n            int length = String.valueOf(number).length();\n\n            if (length == 5) {\n                String digits = String.valueOf(number);\n                char number1 = digits.charAt(0);\n                char number2 = digits.charAt(1);\n                char number3 = digits.charAt(2);\n                char number4 = digits.charAt(3);\n                char number5 = digits.charAt(4);\n\n                if (number1 % 2 != 0 &amp;&amp; number2 % 2 != 0 &amp;&amp; number3 % 2 != 0 &amp;&amp; number4 % 2 != 0 &amp;&amp; number5 % 2 != 0) {\n                    System.out.println(&quot;All of the numbers are odd...&quot;);\n                } else {\n                    System.out.println(&quot;Not all of the numbers are odd...&quot;);\n                }\n            } else {\n                System.out.println(&quot;You did not enter a 5 digit number! Try again...&quot;);\n                continue;\n            }\n        } catch (Exception e) {\n            System.out.println(&quot;That was not a number! Try again...&quot;);\n            //A newline might still be stuck in the scanner, so clear it\n            scan.nextLine();\n            continue;\n        }\n        try {\n            System.out.println(&quot;Would you like to enter another number? (Y/N)&quot;);\n\n            char letter = scan.next().charAt(0);\n            if (letter == 'Y' || letter == 'y') {\n                continue;\n            } else if (letter == 'N' || letter == 'n') {\n                yesno = false;\n            } else {\n                System.out.println(&quot;I will take that as a no!&quot;);\n                yesno = false;\n            }\n        } catch (Exception e) {\n            System.out.println(&quot;You did not enter a letter...&quot;);\n            scan.nextLine();\n        }\n    }\n    System.out.println(&quot;Goodbye!&quot;);\n}\n</code></pre>\n<p>By the way, you have a lot of other issues in the code that should be addressed, but I simply answered the question that you asked, making the execution return the to top of the loop after an exception is thrown.</p>\n"}],"owner":{"account_id":5342688,"reputation":55,"user_id":4259189,"display_name":"Louie Morris"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":518,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":27194042,"answer_count":1,"score":1,"last_activity_date":1665938398,"creation_date":1417197956,"question_id":27193955,"body_markdown":"basically what I am trying to do is: \r\n\r\n&gt; Get the user to enter a 5 digit number. If all of the digits in the\r\n&gt; number are Odd, it will print out &quot;All of the digits are odd&quot; and if\r\n&gt; all of the digits are not Odd, then it will print out &quot;Not all of the\r\n&gt; digits are odd&quot;, and then it will ask the user if they want to Enter a\r\n&gt; new Number by pressing Y or N and then it will ask them for another 5\r\n&gt; digit number and repeat.\r\n\r\nHere is my problem: \r\n\r\nWhen a user does not enter a 5 digit number, E.G enters a string/character, then I want it to say &quot;That was not a number, please try again&quot;, I tried to do this with try and catch, I can make it so it says try again, but I am unsure on how to make the code return back to the beginning after an error has been thrown. Sorry I am bad at java :-/\r\nI also have this problem when user does not enter Y or N and enter a number.\r\n\r\ncode:\r\n-----\r\n\r\n    package veryoddnumber;\r\n    \r\n    import java.util.*;\r\n    \r\n    public class VeryOddNumber {\r\n    \r\n        public static void main(String[] args) {\r\n            Scanner scan = new Scanner(System.in);\r\n            System.out.println(&quot;Enter a 5 digit number...&quot;);\r\n            boolean yesno;\r\n            do {\r\n    \r\n                try {\r\n                    int number = scan.nextInt();\r\n                    int length = String.valueOf(number).length();\r\n    \r\n                    if (length == 5) {\r\n                        String digits = String.valueOf(number);\r\n                        char number1 = digits.charAt(0);\r\n                        char number2 = digits.charAt(1);\r\n                        char number3 = digits.charAt(2);\r\n                        char number4 = digits.charAt(3);\r\n                        char number5 = digits.charAt(4);\r\n    \r\n                        if (number1 % 2 != 0 &amp;&amp; number2 % 2 != 0 &amp;&amp; number3 % 2 != 0 &amp;&amp; number4 % 2 != 0 &amp;&amp; number5 % 2 != 0) {\r\n                            System.out.println(&quot;All of the numbers are odd...&quot;);\r\n                        } else {\r\n                            System.out.println(&quot;Not all of the numbers are odd...&quot;);\r\n                        }\r\n    \r\n                        System.out.println(&quot;Would you like to enter another number? (Y/N)&quot;);\r\n    \r\n                    } else {\r\n                        System.out.println(&quot;You did not enter a 5 digit number! Try again...&quot;);\r\n                        System.out.println(&quot;Enter a 5 digit number...&quot;);\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(&quot;That was not a number! Try again...&quot;);\r\n    \r\n                }\r\n                try {\r\n    \r\n                    char letter = scan.next().charAt(0);\r\n                    if (letter == &#39;Y&#39; || letter == &#39;y&#39;) {\r\n                        yesno = true;\r\n                    } else if (letter == &#39;N&#39; || letter == &#39;n&#39;) {\r\n                        break;\r\n                    } else {\r\n                        System.out.println(&quot;I will take that as a no!&quot;);\r\n                        break;\r\n                    }\r\n                    System.out.println(&quot;Enter a 5 digit number...&quot;);\r\n                } catch (Exception e) {\r\n                    System.out.println(&quot;You did not enter a letter...&quot;);\r\n    \r\n                }\r\n            } while (yesno = true);\r\n            System.out.println(&quot;Goodbye!&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Enter a number, That was not a number, please try again","body":"<p>basically what I am trying to do is: </p>\n\n<blockquote>\n  <p>Get the user to enter a 5 digit number. If all of the digits in the\n  number are Odd, it will print out \"All of the digits are odd\" and if\n  all of the digits are not Odd, then it will print out \"Not all of the\n  digits are odd\", and then it will ask the user if they want to Enter a\n  new Number by pressing Y or N and then it will ask them for another 5\n  digit number and repeat.</p>\n</blockquote>\n\n<p>Here is my problem: </p>\n\n<p>When a user does not enter a 5 digit number, E.G enters a string/character, then I want it to say \"That was not a number, please try again\", I tried to do this with try and catch, I can make it so it says try again, but I am unsure on how to make the code return back to the beginning after an error has been thrown. Sorry I am bad at java :-/\nI also have this problem when user does not enter Y or N and enter a number.</p>\n\n<h2>code:</h2>\n\n<pre><code>package veryoddnumber;\n\nimport java.util.*;\n\npublic class VeryOddNumber {\n\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        System.out.println(\"Enter a 5 digit number...\");\n        boolean yesno;\n        do {\n\n            try {\n                int number = scan.nextInt();\n                int length = String.valueOf(number).length();\n\n                if (length == 5) {\n                    String digits = String.valueOf(number);\n                    char number1 = digits.charAt(0);\n                    char number2 = digits.charAt(1);\n                    char number3 = digits.charAt(2);\n                    char number4 = digits.charAt(3);\n                    char number5 = digits.charAt(4);\n\n                    if (number1 % 2 != 0 &amp;&amp; number2 % 2 != 0 &amp;&amp; number3 % 2 != 0 &amp;&amp; number4 % 2 != 0 &amp;&amp; number5 % 2 != 0) {\n                        System.out.println(\"All of the numbers are odd...\");\n                    } else {\n                        System.out.println(\"Not all of the numbers are odd...\");\n                    }\n\n                    System.out.println(\"Would you like to enter another number? (Y/N)\");\n\n                } else {\n                    System.out.println(\"You did not enter a 5 digit number! Try again...\");\n                    System.out.println(\"Enter a 5 digit number...\");\n                }\n            } catch (Exception e) {\n                System.out.println(\"That was not a number! Try again...\");\n\n            }\n            try {\n\n                char letter = scan.next().charAt(0);\n                if (letter == 'Y' || letter == 'y') {\n                    yesno = true;\n                } else if (letter == 'N' || letter == 'n') {\n                    break;\n                } else {\n                    System.out.println(\"I will take that as a no!\");\n                    break;\n                }\n                System.out.println(\"Enter a 5 digit number...\");\n            } catch (Exception e) {\n                System.out.println(\"You did not enter a letter...\");\n\n            }\n        } while (yesno = true);\n        System.out.println(\"Goodbye!\");\n    }\n\n}\n</code></pre>\n"},{"tags":["java","graph","adjacency-matrix"],"comments":[{"owner":{"account_id":1032580,"reputation":4177,"user_id":1040597,"accept_rate":91,"display_name":"Saeid"},"score":1,"creation_date":1476505741,"post_id":40054451,"comment_id":67385424,"body_markdown":"https://en.wikipedia.org/wiki/Shortest_path_problem","body":"<a href=\"https://en.wikipedia.org/wiki/Shortest_path_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Shortest_path_problem</a>"}],"answers":[{"tags":[],"owner":{"account_id":9441766,"reputation":21,"user_id":7021977,"display_name":"Mike Wern"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665938300,"creation_date":1476504801,"answer_id":40054871,"question_id":40054451,"body_markdown":"I figured it out.\r\nBasically I made an array to keep track of my Edges: \r\n\r\n    private Edge [] edges;\r\n\r\nThen I populated the array with my graph edges.\r\nNow, in my distance method I just find the edge with the give To and From Nodes, and extract it&#39;s value which is the distance I&#39;m looking for :)\r\n\r\n    public int distance(Node from, Node to) {\r\n\r\n        for(Edge edge: edges){\r\n            if(edge.getFrom().equals(from) &amp;&amp; edge.getTo().equals(to)){\r\n                return edge.getValue();\r\n            }\r\n        }\r\n        return 1;\r\n    }\r\n\r\nI must have thought about this simple solution earlier!","title":"Calculate distance between nodes in AdjacencyMatrix","body":"<p>I figured it out.\nBasically I made an array to keep track of my Edges:</p>\n<pre><code>private Edge [] edges;\n</code></pre>\n<p>Then I populated the array with my graph edges.\nNow, in my distance method I just find the edge with the give To and From Nodes, and extract it's value which is the distance I'm looking for :)</p>\n<pre><code>public int distance(Node from, Node to) {\n\n    for(Edge edge: edges){\n        if(edge.getFrom().equals(from) &amp;&amp; edge.getTo().equals(to)){\n            return edge.getValue();\n        }\n    }\n    return 1;\n}\n</code></pre>\n<p>I must have thought about this simple solution earlier!</p>\n"}],"owner":{"account_id":9441766,"reputation":21,"user_id":7021977,"display_name":"Mike Wern"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1290,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":40054871,"answer_count":1,"score":0,"last_activity_date":1665938300,"creation_date":1476500039,"question_id":40054451,"body_markdown":"I have implemented AdjacencyMatrix in java, but I am having hard time implementing the distance() method to be able to find the distance between two nodes.\r\nAny idea how I an do that?\r\nI have tried a lot of things but I don&#39;t seem to be able to get right answer.\r\n\r\nHere&#39;s my implementation\r\n\r\n    public class AdjacencyMatrix implements Representation {\r\n    private Node[] nodes;\r\n    private int[][] adjacencyMatrix;\r\n    private int numberOfNodes =0;\r\n\r\n\r\n    public AdjacencyMatrix(File file) {\r\n\r\n        Scanner inFile;\r\n        int numNodes;\r\n        try {\r\n            inFile = new Scanner(file);\r\n            numNodes = Integer.parseInt(inFile.nextLine());\r\n\r\n            adjacencyMatrix = new int[20][20];\r\n\r\n            nodes = new Node[20];\r\n            String[] line;\r\n\r\n            while (inFile.hasNextLine()) {\r\n                line = inFile.nextLine().split(&quot;:&quot;);\r\n                Node from = new Node(Integer.parseInt(line[0]));\r\n                Node to = new Node(Integer.parseInt(line[1]));\r\n                int value = Integer.parseInt(line[2]);\r\n\r\n                if(!Arrays.asList(nodes).contains(from))\r\n                    addNode(from);\r\n                if(!Arrays.asList(nodes).contains(to))\r\n                    addNode(to);\r\n\r\n\r\n                addEdge(new Edge(from, to, value));\r\n\r\n            }\r\n\r\n\r\n        } catch (FileNotFoundException e) {\r\n            System.out.print(e.getCause());\r\n        }\r\n    }\r\n    public AdjacencyMatrix() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public boolean adjacent(Node x, Node y) {\r\n        int fromIndex = findIndex(x);\r\n        int toIndex = findIndex(y);\r\n\r\n        if(adjacencyMatrix[fromIndex][toIndex] == 1 || adjacencyMatrix[toIndex][fromIndex] ==1){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public List&lt;Node&gt; neighbors(Node x) {\r\n        ArrayList&lt;Node&gt; neighbors = new ArrayList&lt;&gt;();\r\n        int fromIndex = findIndex(x);\r\n        if(x.getData().toString().equals(&quot;4&quot;)) {\r\n            System.out.println(&quot;FromIndex is: &quot; + fromIndex);\r\n        }\r\n\r\n        if(x.getData().toString().equals(&quot;4&quot;)){\r\n            for(int i =0; i &lt; nodes.length; ++i){\r\n\r\n                System.out.println(nodes[i] + &quot; &quot;);\r\n            }\r\n        }\r\n\r\n         for (int i = 0; i &lt;= numberOfNodes; i++){\r\n            if(adjacencyMatrix[fromIndex][i] == 1){\r\n\r\n                    neighbors.add(nodes[i]);\r\n                    if(x.getData().toString().equals(&quot;4&quot;)) {\r\n                    System.out.println(&quot;Match!: &quot; + i);\r\n                    System.out.println(&quot;Adding NODE: &quot; + nodes[i]);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        int [] nums = new int[neighbors.size()];\r\n        for(int i =0; i &lt; nums.length; ++i){\r\n            nums[i] = Integer.parseInt(neighbors.get(i).getData().toString());\r\n        }\r\n        Arrays.sort(nums);\r\n        ArrayList&lt;Node&gt; newNeighbors = new ArrayList&lt;&gt;();\r\n        for(int i =0; i &lt; nums.length; ++i){\r\n            newNeighbors.add(new Node(nums[i]));\r\n        }\r\n        return newNeighbors;\r\n    }\r\n\r\n    @Override\r\n    public boolean addNode(Node x) {\r\n        if(Arrays.asList(nodes).contains(x)){\r\n            return false;\r\n        }\r\n\r\n\r\n        nodes[numberOfNodes] = x;\r\n\r\n        for (int i = 0; i &lt;= numberOfNodes; i++){\r\n\r\n            adjacencyMatrix[numberOfNodes][i] = 0;\r\n            adjacencyMatrix[i][numberOfNodes] = 0;\r\n        }\r\n        numberOfNodes++;\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean removeNode(Node x) {\r\n\r\n        if (!Arrays.asList(nodes).contains(x)) {\r\n            return false;\r\n        }\r\n        for (int k = 0; k &lt; numberOfNodes; k++) {\r\n            if (x.equals(nodes[k])) {\r\n\r\n                //decrement the number of nodes\r\n                numberOfNodes--;\r\n\r\n                for (int i = k; i &lt; numberOfNodes; i++) {\r\n                    nodes[i] = nodes[i + 1];\r\n                }\r\n\r\n                for (int i = k; i &lt; numberOfNodes; i++) {\r\n                    for (int j = 0; j &lt;= numberOfNodes; j++) {\r\n                        adjacencyMatrix[i][j] = adjacencyMatrix[i + 1][j];\r\n                    }\r\n                }\r\n\r\n                for (int i = k; i &lt; numberOfNodes; i++) {\r\n                    for (int j = 0; j &lt; numberOfNodes; j++) {\r\n                        adjacencyMatrix[j][i] = adjacencyMatrix[j][i + 1];\r\n                    }\r\n                }\r\n            }\r\n\r\n            //\r\n\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean addEdge(Edge x){\r\n\r\n        int from = Integer.parseInt(x.getFrom().getData().toString());\r\n        int to = Integer.parseInt(x.getTo().getData().toString());\r\n        int fromIndex = findIndex(x.getFrom());\r\n        int toIndex = findIndex(x.getTo());\r\n\r\n        if(from == 4){\r\n            System.out.println(&quot;Adding adjecent to 4 -&gt; &quot; + to);\r\n\r\n        }\r\n        if(adjacencyMatrix[fromIndex][toIndex] == 1 ){\r\n            return false;\r\n        }\r\n\r\n        adjacencyMatrix[fromIndex][toIndex] = 1;\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean removeEdge(Edge x) {\r\n        int from = Integer.parseInt(x.getFrom().getData().toString());\r\n        int to = Integer.parseInt(x.getTo().getData().toString());\r\n        int fromIndex = findIndex(x.getFrom());\r\n        int toIndex = findIndex(x.getTo());\r\n\r\n        if(adjacencyMatrix[fromIndex][toIndex] == 0 &amp;&amp; adjacencyMatrix[toIndex][fromIndex] ==0){\r\n            return false;\r\n        }\r\n\r\n        adjacencyMatrix[fromIndex][toIndex] = 0;\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public int distance(Node from, Node to) {\r\n        return 0;\r\n    }\r\n\r\n\r\n    @Override\r\n    public Optional&lt;Node&gt; getNode(int index) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;Node&gt; getNodes() {\r\n\r\n        return Arrays.asList(nodes);\r\n    }\r\n\r\n    public int findIndex(Node node)\r\n    {\r\n        for (int i = 0; i &lt; numberOfNodes; ++i)\r\n            if (nodes[i].equals(node))\r\n                return i;\r\n        return -1;\r\n    }}\r\n\r\nAll my methods are working except distance().\r\nI am returning 0 in the distance() method since I don&#39;t know how to implement it correctly.\r\nAny help would be greatly appreciated.\r\n","title":"Calculate distance between nodes in AdjacencyMatrix","body":"<p>I have implemented AdjacencyMatrix in java, but I am having hard time implementing the distance() method to be able to find the distance between two nodes.\nAny idea how I an do that?\nI have tried a lot of things but I don't seem to be able to get right answer.</p>\n\n<p>Here's my implementation</p>\n\n<pre><code>public class AdjacencyMatrix implements Representation {\nprivate Node[] nodes;\nprivate int[][] adjacencyMatrix;\nprivate int numberOfNodes =0;\n\n\npublic AdjacencyMatrix(File file) {\n\n    Scanner inFile;\n    int numNodes;\n    try {\n        inFile = new Scanner(file);\n        numNodes = Integer.parseInt(inFile.nextLine());\n\n        adjacencyMatrix = new int[20][20];\n\n        nodes = new Node[20];\n        String[] line;\n\n        while (inFile.hasNextLine()) {\n            line = inFile.nextLine().split(\":\");\n            Node from = new Node(Integer.parseInt(line[0]));\n            Node to = new Node(Integer.parseInt(line[1]));\n            int value = Integer.parseInt(line[2]);\n\n            if(!Arrays.asList(nodes).contains(from))\n                addNode(from);\n            if(!Arrays.asList(nodes).contains(to))\n                addNode(to);\n\n\n            addEdge(new Edge(from, to, value));\n\n        }\n\n\n    } catch (FileNotFoundException e) {\n        System.out.print(e.getCause());\n    }\n}\npublic AdjacencyMatrix() {\n\n}\n\n@Override\npublic boolean adjacent(Node x, Node y) {\n    int fromIndex = findIndex(x);\n    int toIndex = findIndex(y);\n\n    if(adjacencyMatrix[fromIndex][toIndex] == 1 || adjacencyMatrix[toIndex][fromIndex] ==1){\n        return true;\n    }\n    return false;\n}\n\n@Override\npublic List&lt;Node&gt; neighbors(Node x) {\n    ArrayList&lt;Node&gt; neighbors = new ArrayList&lt;&gt;();\n    int fromIndex = findIndex(x);\n    if(x.getData().toString().equals(\"4\")) {\n        System.out.println(\"FromIndex is: \" + fromIndex);\n    }\n\n    if(x.getData().toString().equals(\"4\")){\n        for(int i =0; i &lt; nodes.length; ++i){\n\n            System.out.println(nodes[i] + \" \");\n        }\n    }\n\n     for (int i = 0; i &lt;= numberOfNodes; i++){\n        if(adjacencyMatrix[fromIndex][i] == 1){\n\n                neighbors.add(nodes[i]);\n                if(x.getData().toString().equals(\"4\")) {\n                System.out.println(\"Match!: \" + i);\n                System.out.println(\"Adding NODE: \" + nodes[i]);\n            }\n        }\n\n    }\n\n    int [] nums = new int[neighbors.size()];\n    for(int i =0; i &lt; nums.length; ++i){\n        nums[i] = Integer.parseInt(neighbors.get(i).getData().toString());\n    }\n    Arrays.sort(nums);\n    ArrayList&lt;Node&gt; newNeighbors = new ArrayList&lt;&gt;();\n    for(int i =0; i &lt; nums.length; ++i){\n        newNeighbors.add(new Node(nums[i]));\n    }\n    return newNeighbors;\n}\n\n@Override\npublic boolean addNode(Node x) {\n    if(Arrays.asList(nodes).contains(x)){\n        return false;\n    }\n\n\n    nodes[numberOfNodes] = x;\n\n    for (int i = 0; i &lt;= numberOfNodes; i++){\n\n        adjacencyMatrix[numberOfNodes][i] = 0;\n        adjacencyMatrix[i][numberOfNodes] = 0;\n    }\n    numberOfNodes++;\n    return true;\n}\n\n@Override\npublic boolean removeNode(Node x) {\n\n    if (!Arrays.asList(nodes).contains(x)) {\n        return false;\n    }\n    for (int k = 0; k &lt; numberOfNodes; k++) {\n        if (x.equals(nodes[k])) {\n\n            //decrement the number of nodes\n            numberOfNodes--;\n\n            for (int i = k; i &lt; numberOfNodes; i++) {\n                nodes[i] = nodes[i + 1];\n            }\n\n            for (int i = k; i &lt; numberOfNodes; i++) {\n                for (int j = 0; j &lt;= numberOfNodes; j++) {\n                    adjacencyMatrix[i][j] = adjacencyMatrix[i + 1][j];\n                }\n            }\n\n            for (int i = k; i &lt; numberOfNodes; i++) {\n                for (int j = 0; j &lt; numberOfNodes; j++) {\n                    adjacencyMatrix[j][i] = adjacencyMatrix[j][i + 1];\n                }\n            }\n        }\n\n        //\n\n    }\n    return true;\n}\n\n\n@Override\npublic boolean addEdge(Edge x){\n\n    int from = Integer.parseInt(x.getFrom().getData().toString());\n    int to = Integer.parseInt(x.getTo().getData().toString());\n    int fromIndex = findIndex(x.getFrom());\n    int toIndex = findIndex(x.getTo());\n\n    if(from == 4){\n        System.out.println(\"Adding adjecent to 4 -&gt; \" + to);\n\n    }\n    if(adjacencyMatrix[fromIndex][toIndex] == 1 ){\n        return false;\n    }\n\n    adjacencyMatrix[fromIndex][toIndex] = 1;\n    return true;\n}\n\n@Override\npublic boolean removeEdge(Edge x) {\n    int from = Integer.parseInt(x.getFrom().getData().toString());\n    int to = Integer.parseInt(x.getTo().getData().toString());\n    int fromIndex = findIndex(x.getFrom());\n    int toIndex = findIndex(x.getTo());\n\n    if(adjacencyMatrix[fromIndex][toIndex] == 0 &amp;&amp; adjacencyMatrix[toIndex][fromIndex] ==0){\n        return false;\n    }\n\n    adjacencyMatrix[fromIndex][toIndex] = 0;\n    return true;\n}\n\n@Override\npublic int distance(Node from, Node to) {\n    return 0;\n}\n\n\n@Override\npublic Optional&lt;Node&gt; getNode(int index) {\n    return null;\n}\n\n@Override\npublic Collection&lt;Node&gt; getNodes() {\n\n    return Arrays.asList(nodes);\n}\n\npublic int findIndex(Node node)\n{\n    for (int i = 0; i &lt; numberOfNodes; ++i)\n        if (nodes[i].equals(node))\n            return i;\n    return -1;\n}}\n</code></pre>\n\n<p>All my methods are working except distance().\nI am returning 0 in the distance() method since I don't know how to implement it correctly.\nAny help would be greatly appreciated.</p>\n"},{"tags":["java","swagger"],"comments":[{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1664639319,"post_id":73919599,"comment_id":130519987,"body_markdown":"You are missing vital information here. Start with providing the stacktrace of your application and not a screenshot showing the error at the swagger ui.","body":"You are missing vital information here. Start with providing the stacktrace of your application and not a screenshot showing the error at the swagger ui."}],"answers":[{"tags":[],"owner":{"account_id":26501274,"reputation":11,"user_id":20138177,"display_name":"Ashwini Bedwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665938195,"creation_date":1665938195,"answer_id":74088907,"question_id":73919599,"body_markdown":"The swagger version was incompatible with Jackson-databind(2.13.2.1). So, updated the swagger version too.","title":"JAVA -Getting &quot;Error 500: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet&quot; while accessing swagger UI","body":"<p>The swagger version was incompatible with Jackson-databind(2.13.2.1). So, updated the swagger version too.</p>\n"}],"owner":{"account_id":26501274,"reputation":11,"user_id":20138177,"display_name":"Ashwini Bedwal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1113,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1665938195,"creation_date":1664638320,"question_id":73919599,"body_markdown":"[refer this screenshot to see error][1]** Java - Error 500: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet**\r\n\r\nGetting this error while accessing the swagger UI. Earlier it was working fine but after upgrading Jackson-databind.jar along with its dependencies Jackson core and Jackson annotation jars from 2.10.5 to 2.13.4(also tried with versions 2.13.2.1 and 2.13.2.2)after this change unable to access swagger UI. \r\n(I have installed my build using ocp setup so, there all the pods are up and running)\r\n\r\n\r\nswagger jar version= 1.5.16\r\n\r\nLogs:\r\n\r\n[10/2/22 22:51:25:961 GMT] 00000041 com.ibm.ws.webcontainer.webapp                               E SRVE0315E: An exception occurred: java.lang.Throwable: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet\r\n        at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:5117)\r\n        at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$2.handleRequest(DynamicVirtualHost.java:316)\r\n        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1007)\r\n        at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$2.run(DynamicVirtualHost.java:281)\r\n        at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:1184)\r\n        at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.wrapHandlerAndExecute(HttpDispatcherLink.java:453)\r\n        at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.ready(HttpDispatcherLink.java:412)\r\n        at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:566)\r\n        at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleNewRequest(HttpInboundLink.java:500)\r\n        at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.processRequest(HttpInboundLink.java:360)\r\n        at com.ibm.ws.http.channel.internal.inbound.HttpICLReadCallback.complete(HttpICLReadCallback.java:70)\r\n        at com.ibm.ws.tcpchannel.internal.WorkQueueManager.requestComplete(WorkQueueManager.java:514)\r\n        at com.ibm.ws.tcpchannel.internal.WorkQueueManager.attemptIO(WorkQueueManager.java:584)\r\n        at com.ibm.ws.tcpchannel.internal.WorkQueueManager.workerRun(WorkQueueManager.java:968)\r\n        at com.ibm.ws.tcpchannel.internal.WorkQueueManager$Worker.run(WorkQueueManager.java:1057)\r\n        at com.ibm.ws.threading.internal.ExecutorServiceImpl$RunnableWrapper.run(ExecutorServiceImpl.java:245)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1160)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at java.lang.Thread.run(Thread.java:822)\r\nCaused by: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet\r\n        at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:368)\r\n        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:601)\r\n        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)\r\n        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)\r\n        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:193)\r\n        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:98)\r\n        at com.ibm.cdb.api.rest.config.RespHeaderAddFilter.doFilter(RespHeaderAddFilter.java:48)\r\n        at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:201)\r\n        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:91)\r\n        at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:1002)\r\n        at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1140)\r\n        at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:5059)\r\n        ... 18 more\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.apache.cxf.jaxrs.spring.JAXRSServerFactoryBeanDefinitionParser$SpringJAXRSServerFactoryBean---1032362584&#39;: Invocation of init method failed; nested exception is java.util.ServiceConfigurationError: io.swagger.jaxrs.ext.SwaggerExtension: Provider org.apache.cxf.jaxrs.swagger.JaxRs2Extension could not be instantiated\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\r\n        at org\r\n\r\n  [1]: https://i.stack.imgur.com/IjU5w.png\r\n","title":"JAVA -Getting &quot;Error 500: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet&quot; while accessing swagger UI","body":"<p><a href=\"https://i.stack.imgur.com/IjU5w.png\" rel=\"nofollow noreferrer\">refer this screenshot to see error</a>** Java - Error 500: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet**</p>\n<p>Getting this error while accessing the swagger UI. Earlier it was working fine but after upgrading Jackson-databind.jar along with its dependencies Jackson core and Jackson annotation jars from 2.10.5 to 2.13.4(also tried with versions 2.13.2.1 and 2.13.2.2)after this change unable to access swagger UI.\n(I have installed my build using ocp setup so, there all the pods are up and running)</p>\n<p>swagger jar version= 1.5.16</p>\n<p>Logs:</p>\n<p>[10/2/22 22:51:25:961 GMT] 00000041 com.ibm.ws.webcontainer.webapp                               E SRVE0315E: An exception occurred: java.lang.Throwable: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet\nat com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:5117)\nat com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$2.handleRequest(DynamicVirtualHost.java:316)\nat com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1007)\nat com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$2.run(DynamicVirtualHost.java:281)\nat com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:1184)\nat com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.wrapHandlerAndExecute(HttpDispatcherLink.java:453)\nat com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.ready(HttpDispatcherLink.java:412)\nat com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:566)\nat com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleNewRequest(HttpInboundLink.java:500)\nat com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.processRequest(HttpInboundLink.java:360)\nat com.ibm.ws.http.channel.internal.inbound.HttpICLReadCallback.complete(HttpICLReadCallback.java:70)\nat com.ibm.ws.tcpchannel.internal.WorkQueueManager.requestComplete(WorkQueueManager.java:514)\nat com.ibm.ws.tcpchannel.internal.WorkQueueManager.attemptIO(WorkQueueManager.java:584)\nat com.ibm.ws.tcpchannel.internal.WorkQueueManager.workerRun(WorkQueueManager.java:968)\nat com.ibm.ws.tcpchannel.internal.WorkQueueManager$Worker.run(WorkQueueManager.java:1057)\nat com.ibm.ws.threading.internal.ExecutorServiceImpl$RunnableWrapper.run(ExecutorServiceImpl.java:245)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1160)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\nat java.lang.Thread.run(Thread.java:822)\nCaused by: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet\nat com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:368)\nat com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:601)\nat com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)\nat com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)\nat com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:193)\nat com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:98)\nat com.ibm.cdb.api.rest.config.RespHeaderAddFilter.doFilter(RespHeaderAddFilter.java:48)\nat com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:201)\nat com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:91)\nat com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:1002)\nat com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1140)\nat com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:5059)\n... 18 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.cxf.jaxrs.spring.JAXRSServerFactoryBeanDefinitionParser$SpringJAXRSServerFactoryBean---1032362584': Invocation of init method failed; nested exception is java.util.ServiceConfigurationError: io.swagger.jaxrs.ext.SwaggerExtension: Provider org.apache.cxf.jaxrs.swagger.JaxRs2Extension could not be instantiated\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\nat org</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1437120171,"post_id":31470948,"comment_id":50907628,"body_markdown":"Tags don&#39;t go in titles. I&#39;ve fixed the title for you -- removed the tag, added the `new String[]` bit so people don&#39;t drive-by-downvote for not reading the `String.valueOf` docs. (That said, [the documentation](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#valueOf-int-) *does* tell you exactly what the second part of your question asks.)","body":"Tags don&#39;t go in titles. I&#39;ve fixed the title for you -- removed the tag, added the <code>new String[]</code> bit so people don&#39;t drive-by-downvote for not reading the <code>String.valueOf</code> docs. (That said, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#valueOf-int-\" rel=\"nofollow noreferrer\">the documentation</a> <i>does</i> tell you exactly what the second part of your question asks.)"},{"owner":{"account_id":6627476,"reputation":1182,"user_id":5126604,"accept_rate":82,"display_name":"BabbevDan"},"score":0,"creation_date":1437120312,"post_id":31470948,"comment_id":50907692,"body_markdown":"Thanks, I am new here :)","body":"Thanks, I am new here :)"},{"owner":{"account_id":309230,"reputation":1914,"user_id":621567,"accept_rate":85,"display_name":"Theresa Forster"},"score":0,"creation_date":1437120667,"post_id":31470948,"comment_id":50907865,"body_markdown":"I have no idea why the code is doing what it is doing? String.valueOf(x)  takes the object/int/long etc x and turns it into a string, as the value of x is hardcoded why didn&#39;t they just String[] strArray = new String[] {&quot;1&quot;};","body":"I have no idea why the code is doing what it is doing? String.valueOf(x)  takes the object/int/long etc x and turns it into a string, as the value of x is hardcoded why didn&#39;t they just String[] strArray = new String[] {&quot;1&quot;};"},{"owner":{"account_id":6627476,"reputation":1182,"user_id":5126604,"accept_rate":82,"display_name":"BabbevDan"},"score":0,"creation_date":1437120803,"post_id":31470948,"comment_id":50907933,"body_markdown":"I hardcoded it for clearness. In the original code it is a variable.","body":"I hardcoded it for clearness. In the original code it is a variable."}],"answers":[{"tags":[],"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1437120370,"creation_date":1437120370,"answer_id":31471091,"question_id":31470948,"body_markdown":"This:\n\n    String[] strArray = new String[]{\n        // ...\n    };\n\n...creates a `String` array and initializes it with the entries in the `{...}` part. In your case, there&#39;s only one entry.\n\n&gt; Why String is created like an object and what does\n&gt;\n&gt; `valueOf(1);`\n\nAs [the documentation will tell you](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#valueOf-int-), `String.valueOf(int)` creates a string representation of the integer value you pass in.\n\nSo what that code does is create an array of `String` with one entry, `&quot;1&quot;`, in it. It&#39;s unclear why the author would have written `String.valueOf(1)` rather than simply `&quot;1&quot;`.","title":"What does this new String[] and String.value() code mean?","body":"<p>This:</p>\n<pre><code>String[] strArray = new String[]{\n    // ...\n};\n</code></pre>\n<p>...creates a <code>String</code> array and initializes it with the entries in the <code>{...}</code> part. In your case, there's only one entry.</p>\n<blockquote>\n<p>Why String is created like an object and what does</p>\n<p><code>valueOf(1);</code></p>\n</blockquote>\n<p>As <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#valueOf-int-\" rel=\"nofollow noreferrer\">the documentation will tell you</a>, <code>String.valueOf(int)</code> creates a string representation of the integer value you pass in.</p>\n<p>So what that code does is create an array of <code>String</code> with one entry, <code>&quot;1&quot;</code>, in it. It's unclear why the author would have written <code>String.valueOf(1)</code> rather than simply <code>&quot;1&quot;</code>.</p>\n"},{"tags":[],"owner":{"account_id":6299828,"reputation":615,"user_id":4894814,"accept_rate":38,"display_name":"Christophe Schutz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1437120501,"creation_date":1437120501,"answer_id":31471121,"question_id":31470948,"body_markdown":"    String.valueOf(...)\r\n\r\nis a method that parses an object or a primitive, and creates a String representation of that object. For example the integer 1 will be converted to the string &quot;1&quot; (as in your example).\r\n\r\n---------------------------------\r\n\r\n    String[] strArray = new String[]{\r\n           String.valueOf(1)\r\n      };\r\n\r\n\r\nmeans that we instantiate an array of Strings (basically an array that contains multiple Strings), and we add a String containing &quot;1&quot; in it (see my explanation above).","title":"What does this new String[] and String.value() code mean?","body":"<pre><code>String.valueOf(...)\n</code></pre>\n\n<p>is a method that parses an object or a primitive, and creates a String representation of that object. For example the integer 1 will be converted to the string \"1\" (as in your example).</p>\n\n<hr>\n\n<pre><code>String[] strArray = new String[]{\n       String.valueOf(1)\n  };\n</code></pre>\n\n<p>means that we instantiate an array of Strings (basically an array that contains multiple Strings), and we add a String containing \"1\" in it (see my explanation above).</p>\n"},{"tags":[],"owner":{"account_id":4813898,"reputation":337,"user_id":3886537,"display_name":"Anil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665938085,"creation_date":1437120581,"answer_id":31471142,"question_id":31470948,"body_markdown":"The code snippet in the question looks like wrong. and I hope it should be as follows. \r\n\r\n      String[] s= new String[]{\r\n\t\t           String.valueOf(1)\r\n\t\t      };\r\n\r\nString.valueOf(1) &quot;Returns the string representation of the int argument&quot;.\r\n\r\nthe values is returned from  &quot; String.valueOf(1)&quot; is assigned to the string array object. The value &quot;1&quot; will be stored in the 0th index. \r\n","title":"What does this new String[] and String.value() code mean?","body":"<p>The code snippet in the question looks like wrong. and I hope it should be as follows.</p>\n<pre><code>  String[] s= new String[]{\n               String.valueOf(1)\n          };\n</code></pre>\n<p>String.valueOf(1) &quot;Returns the string representation of the int argument&quot;.</p>\n<p>the values is returned from  &quot; String.valueOf(1)&quot; is assigned to the string array object. The value &quot;1&quot; will be stored in the 0th index.</p>\n"}],"owner":{"account_id":6627476,"reputation":1182,"user_id":5126604,"accept_rate":82,"display_name":"BabbevDan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3150,"favorite_count":0,"down_vote_count":3,"up_vote_count":6,"accepted_answer_id":31471091,"answer_count":3,"score":3,"last_activity_date":1665938085,"creation_date":1437119814,"question_id":31470948,"body_markdown":"I am doing some Android development and I encountered this:\r\n\r\n \r\n\r\n           String[] strArray = new String[]{\r\n               String.valueOf(1)\r\n          };\r\n\r\nWhy String is created like an object and what does \r\n\r\n    valueOf(1)\r\nactually set here ?","title":"What does this new String[] and String.value() code mean?","body":"<p>I am doing some Android development and I encountered this:</p>\n\n<pre><code>       String[] strArray = new String[]{\n           String.valueOf(1)\n      };\n</code></pre>\n\n<p>Why String is created like an object and what does </p>\n\n<pre><code>valueOf(1)\n</code></pre>\n\n<p>actually set here ?</p>\n"},{"tags":["java","java-time","datetime-parsing"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1502293986,"post_id":45595169,"comment_id":78150355,"body_markdown":"That&#39;s not a `LocalDateTime`, that&#39;s only a `LocalTime`.","body":"That&#39;s not a <code>LocalDateTime</code>, that&#39;s only a <code>LocalTime</code>."},{"owner":{"account_id":11149481,"reputation":213,"user_id":8183195,"accept_rate":67,"display_name":"SVCS1994"},"score":0,"creation_date":1502295053,"post_id":45595169,"comment_id":78151006,"body_markdown":"I apologize. Let me rephrase that.","body":"I apologize. Let me rephrase that."}],"answers":[{"tags":[],"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502294187,"creation_date":1502294187,"answer_id":45595483,"question_id":45595169,"body_markdown":"Hope this will help you. I think you could do it using **DateTimeFormatter** and **LocalDateTime** parsing like below example.\r\n\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;EEEE, MMM d, yyyy HH:mm:ss a&quot;);\r\n\r\n        String date = &quot;Tuesday, Aug 13, 2017 12:10:56 PM&quot;;\r\n        LocalDateTime localDateTime = LocalDateTime.parse(date,  formatter);\r\n        System.out.println(localDateTime);\r\n        System.out.println(formatter.format(localDateTime));\r\n\r\n\r\nOutput\r\n======\r\n\r\n2017-08-13T12:10:56\r\n\r\nTuesday, Aug 13, 2017 12:10:56 PM\r\n\r\n\r\nSimilar posts would be https://stackoverflow.com/questions/39637618/java-8-trying-to-convert-string-to-localdatetime","title":"How to convert a given time (String) to a LocalTime?","body":"<p>Hope this will help you. I think you could do it using <strong>DateTimeFormatter</strong> and <strong>LocalDateTime</strong> parsing like below example.</p>\n\n<pre><code>    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"EEEE, MMM d, yyyy HH:mm:ss a\");\n\n    String date = \"Tuesday, Aug 13, 2017 12:10:56 PM\";\n    LocalDateTime localDateTime = LocalDateTime.parse(date,  formatter);\n    System.out.println(localDateTime);\n    System.out.println(formatter.format(localDateTime));\n</code></pre>\n\n<h1>Output</h1>\n\n<p>2017-08-13T12:10:56</p>\n\n<p>Tuesday, Aug 13, 2017 12:10:56 PM</p>\n\n<p>Similar posts would be <a href=\"https://stackoverflow.com/questions/39637618/java-8-trying-to-convert-string-to-localdatetime\">Java 8 - Trying to convert String to LocalDateTime</a></p>\n"},{"comments":[{"owner":{"account_id":8152242,"reputation":1031,"user_id":6138873,"display_name":"jeanr"},"score":3,"creation_date":1502294953,"post_id":45595565,"comment_id":78150941,"body_markdown":"This will only works for time exactly respecting the format hh:mma like 12:30AM but not for 5AM or 2:12PM...","body":"This will only works for time exactly respecting the format hh:mma like 12:30AM but not for 5AM or 2:12PM..."}],"tags":[],"owner":{"account_id":6676441,"reputation":979,"user_id":5150898,"accept_rate":75,"display_name":"Chinmay jain"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1502344235,"creation_date":1502294433,"answer_id":45595565,"question_id":45595169,"body_markdown":"If you want to parse time only, you should try parsing to `LocalTime`. Following is the code to implement this:\r\n\r\n    DateTimeFormatter parseFormat = new DateTimeFormatterBuilder().appendPattern(&quot;hh[:mm]a&quot;).toFormatter();\r\n\tLocalTime localTime = LocalTime.parse(timeValue, parseFormat);","title":"How to convert a given time (String) to a LocalTime?","body":"<p>If you want to parse time only, you should try parsing to <code>LocalTime</code>. Following is the code to implement this:</p>\n\n<pre><code>DateTimeFormatter parseFormat = new DateTimeFormatterBuilder().appendPattern(\"hh[:mm]a\").toFormatter();\nLocalTime localTime = LocalTime.parse(timeValue, parseFormat);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11149481,"reputation":213,"user_id":8183195,"accept_rate":67,"display_name":"SVCS1994"},"score":1,"creation_date":1502296113,"post_id":45595908,"comment_id":78151636,"body_markdown":"Obrigado Hugo. Wish I was as smart as you. Have a great day","body":"Obrigado Hugo. Wish I was as smart as you. Have a great day"}],"tags":[],"owner":{"display_name":"user7605325"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1502295496,"creation_date":1502295496,"answer_id":45595908,"question_id":45595169,"body_markdown":"Just use a `java.time.format.DateTimeFormatter`:\r\n\r\n    DateTimeFormatter parser = DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;);\r\n    LocalTime localTime = LocalTime.parse(&quot;10AM&quot;, parser);\r\n\r\nExplaining the pattern:\r\n\r\n- `h`: am/pm hour of day (from 1 to 12), with 1 or 2 digits\r\n- `[]`: delimiters for optional section (everything inside it is optional)\r\n- `:mm`: a `:` character followed by minutes with 2 digits\r\n- `a`: designator for AM/PM\r\n\r\nThis works for all your inputs.","title":"How to convert a given time (String) to a LocalTime?","body":"<p>Just use a <code>java.time.format.DateTimeFormatter</code>:</p>\n\n<pre><code>DateTimeFormatter parser = DateTimeFormatter.ofPattern(\"h[:mm]a\");\nLocalTime localTime = LocalTime.parse(\"10AM\", parser);\n</code></pre>\n\n<p>Explaining the pattern:</p>\n\n<ul>\n<li><code>h</code>: am/pm hour of day (from 1 to 12), with 1 or 2 digits</li>\n<li><code>[]</code>: delimiters for optional section (everything inside it is optional)</li>\n<li><code>:mm</code>: a <code>:</code> character followed by minutes with 2 digits</li>\n<li><code>a</code>: designator for AM/PM</li>\n</ul>\n\n<p>This works for all your inputs.</p>\n"},{"comments":[{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1669227657,"post_id":74088892,"comment_id":131599160,"body_markdown":"Excellent answer for non-English locale","body":"Excellent answer for non-English locale"}],"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665938078,"creation_date":1665938078,"answer_id":74088892,"question_id":45595169,"body_markdown":"The solution provided in the [accepted answer](https://stackoverflow.com/a/45595908/10819573) works only if you execute it on a machine with `ENGLISH` as the default `Locale`; it will fail otherwise. \r\n\r\n[Never use `SimpleDateFormat` or `DateTimeFormatter` without a Locale](https://stackoverflow.com/a/65544056/10819573) because they are `Locale`-sensitive. Use the following one to avoid failure due to the default `Locale` not matching the input.\r\n\r\n    DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;, Locale.ENGLISH);\r\n\r\n**Demo**:\r\n\r\n    import java.time.LocalTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.Locale;\r\n    import java.util.stream.Stream;\r\n    \r\n    public class Main {\r\n        public static void main(String args[]) {\r\n            DateTimeFormatter parser = DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;, Locale.ENGLISH);\r\n            Stream.of(\r\n                    &quot;10AM&quot;,\r\n                    &quot;12:30PM&quot;,\r\n                    &quot;2:47PM&quot;,\r\n                    &quot;1:09AM&quot;,\r\n                    &quot;5PM&quot;\r\n            )\r\n            .map(s -&gt; LocalTime.parse(s, parser))\r\n            .forEach(System.out::println);\r\n    \r\n            // See how it can fail with other locales\r\n            // Assuming the default Locale of the system is Locale.CHINA,\r\n            // DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;) will automatically be turned into\r\n            // DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;, Locale.CHINA) causig the parsing to\r\n            // fail\r\n            DateTimeFormatter errorProneParser = DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;, Locale.CHINA);\r\n            LocalTime localTime = LocalTime.parse(&quot;10AM&quot;, errorProneParser);\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    10:00\r\n    12:30\r\n    14:47\r\n    01:09\r\n    17:00\r\n    Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;10AM&#39; could not be parsed at index 2\r\n            at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052)\r\n            at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1954)\r\n            at java.base/java.time.LocalTime.parse(LocalTime.java:465)\r\n            at Main.main(Main.java:24)\r\n\r\n","title":"How to convert a given time (String) to a LocalTime?","body":"<p>The solution provided in the <a href=\"https://stackoverflow.com/a/45595908/10819573\">accepted answer</a> works only if you execute it on a machine with <code>ENGLISH</code> as the default <code>Locale</code>; it will fail otherwise.</p>\n<p><a href=\"https://stackoverflow.com/a/65544056/10819573\">Never use <code>SimpleDateFormat</code> or <code>DateTimeFormatter</code> without a Locale</a> because they are <code>Locale</code>-sensitive. Use the following one to avoid failure due to the default <code>Locale</code> not matching the input.</p>\n<pre><code>DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;, Locale.ENGLISH);\n</code></pre>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.time.LocalTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\nimport java.util.stream.Stream;\n\npublic class Main {\n    public static void main(String args[]) {\n        DateTimeFormatter parser = DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;, Locale.ENGLISH);\n        Stream.of(\n                &quot;10AM&quot;,\n                &quot;12:30PM&quot;,\n                &quot;2:47PM&quot;,\n                &quot;1:09AM&quot;,\n                &quot;5PM&quot;\n        )\n        .map(s -&gt; LocalTime.parse(s, parser))\n        .forEach(System.out::println);\n\n        // See how it can fail with other locales\n        // Assuming the default Locale of the system is Locale.CHINA,\n        // DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;) will automatically be turned into\n        // DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;, Locale.CHINA) causig the parsing to\n        // fail\n        DateTimeFormatter errorProneParser = DateTimeFormatter.ofPattern(&quot;h[:mm]a&quot;, Locale.CHINA);\n        LocalTime localTime = LocalTime.parse(&quot;10AM&quot;, errorProneParser);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>10:00\n12:30\n14:47\n01:09\n17:00\nException in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '10AM' could not be parsed at index 2\n        at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052)\n        at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1954)\n        at java.base/java.time.LocalTime.parse(LocalTime.java:465)\n        at Main.main(Main.java:24)\n</code></pre>\n"}],"owner":{"account_id":11149481,"reputation":213,"user_id":8183195,"accept_rate":67,"display_name":"SVCS1994"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6093,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":45595908,"answer_count":4,"score":10,"last_activity_date":1665938078,"creation_date":1502293303,"question_id":45595169,"body_markdown":"I will be asking a user to enter a specific time: 10AM, 12:30PM, 2:47PM, 1:09AM, 5PM, etc.\r\nI will be using a `Scanner` to get the user&#39;s input. \r\n\r\nHow can I parse/convert that `String` to a `LocalTime` object? Is there any built-in function in Java that will allow me to do that?\r\n","title":"How to convert a given time (String) to a LocalTime?","body":"<p>I will be asking a user to enter a specific time: 10AM, 12:30PM, 2:47PM, 1:09AM, 5PM, etc.\nI will be using a <code>Scanner</code> to get the user's input. </p>\n\n<p>How can I parse/convert that <code>String</code> to a <code>LocalTime</code> object? Is there any built-in function in Java that will allow me to do that?</p>\n"},{"tags":["java","spring","spring-boot","http-live-streaming"],"answers":[{"tags":[],"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665937968,"creation_date":1665937968,"answer_id":74088875,"question_id":74073454,"body_markdown":"Current solution is to have the client buffer streaming A/V until 32K bytes are buffered, and then I defined a `POST` endpoint in Spring Boot that accepts a `MultipartFile` in the request body (the 32K bytes).\r\n\r\nThe Java code in that resource endpoint then invokes an `@Async` service method that uses [ffmpeg-cli-wrapper](https://github.com/bramp/ffmpeg-cli-wrapper) to append the bytes in the `MultipartFile` to the end of an MP4 file I&#39;m storing in S3.\r\n\r\nThis is working but I will continue to tweak the buffer size until I have a size/configuration that is a careful balance of POST requests (the client sending chunks of the livestream as `MultipartFiles`) and video processing efficiency.","title":"Uploading and live video stream to a Spring Boot endpoint, by example","body":"<p>Current solution is to have the client buffer streaming A/V until 32K bytes are buffered, and then I defined a <code>POST</code> endpoint in Spring Boot that accepts a <code>MultipartFile</code> in the request body (the 32K bytes).</p>\n<p>The Java code in that resource endpoint then invokes an <code>@Async</code> service method that uses <a href=\"https://github.com/bramp/ffmpeg-cli-wrapper\" rel=\"nofollow noreferrer\">ffmpeg-cli-wrapper</a> to append the bytes in the <code>MultipartFile</code> to the end of an MP4 file I'm storing in S3.</p>\n<p>This is working but I will continue to tweak the buffer size until I have a size/configuration that is a careful balance of POST requests (the client sending chunks of the livestream as <code>MultipartFiles</code>) and video processing efficiency.</p>\n"}],"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1805,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74088875,"answer_count":1,"score":1,"last_activity_date":1665937968,"creation_date":1665772341,"question_id":74073454,"body_markdown":"I am interested in building a Spring Boot (Java 11) web service that has a controller/resource that exposes an API endpoint for accepting **streaming video**. Particularly I am interested in accomplishing this over HTTP/HLS. The idea is that clients could livestream a video feed to this endpoint, and the endpoint would be doing realtime video processing on it.\r\n\r\nWhen you Google &quot;java spring streaming video&quot; you get a bazillion hits for either:\r\n\r\n- Writing a Spring controller/resource (endpoint) that accepts a **single** (already recorded; a.k.a. **not live**) video file upload as a `MultiPartFile`; or\r\n- Writing a Spring controller/resource (endpoint) that downloads and streams a video by range of bytes, as a `MultiPartFile`; a.k.a. a streaming download to a video player on the client-side\r\n\r\n**But this isn&#39;t what I want.** I am curious to see how a client would livestream a video (byte after byte) to a service endpoint so that the video&#39;s `byte[]` is being constantly read and processed server-side. Maybe I want to run AI/ML detections on the video, or do some type of image/graphics processing. The application doesn&#39;t really matter, all I am curious here is how to write a Spring Boot endpoint to handle a livestream video feed from client to server (livestream upload).\r\n\r\nWould the client just send the livestream in &quot;chunks&quot; or batches of `MultiPartFile` payloads? Either way, there don&#39;t appear to be any guides on how to do this in Spring, and I&#39;m sure its definitely something that Spring could handle. **Any ideas?**","title":"Uploading and live video stream to a Spring Boot endpoint, by example","body":"<p>I am interested in building a Spring Boot (Java 11) web service that has a controller/resource that exposes an API endpoint for accepting <strong>streaming video</strong>. Particularly I am interested in accomplishing this over HTTP/HLS. The idea is that clients could livestream a video feed to this endpoint, and the endpoint would be doing realtime video processing on it.</p>\n<p>When you Google &quot;java spring streaming video&quot; you get a bazillion hits for either:</p>\n<ul>\n<li>Writing a Spring controller/resource (endpoint) that accepts a <strong>single</strong> (already recorded; a.k.a. <strong>not live</strong>) video file upload as a <code>MultiPartFile</code>; or</li>\n<li>Writing a Spring controller/resource (endpoint) that downloads and streams a video by range of bytes, as a <code>MultiPartFile</code>; a.k.a. a streaming download to a video player on the client-side</li>\n</ul>\n<p><strong>But this isn't what I want.</strong> I am curious to see how a client would livestream a video (byte after byte) to a service endpoint so that the video's <code>byte[]</code> is being constantly read and processed server-side. Maybe I want to run AI/ML detections on the video, or do some type of image/graphics processing. The application doesn't really matter, all I am curious here is how to write a Spring Boot endpoint to handle a livestream video feed from client to server (livestream upload).</p>\n<p>Would the client just send the livestream in &quot;chunks&quot; or batches of <code>MultiPartFile</code> payloads? Either way, there don't appear to be any guides on how to do this in Spring, and I'm sure its definitely something that Spring could handle. <strong>Any ideas?</strong></p>\n"},{"tags":["java","saxparser"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1665928456,"post_id":74087360,"comment_id":130809039,"body_markdown":"No recent experience with xml, but https://www.oracle.com/technical-resources/articles/wang-whitespace.html mentions some `.preserveWhitespace()` method. Coud make `.toString()` method work?","body":"No recent experience with xml, but <a href=\"https://www.oracle.com/technical-resources/articles/wang-whitespace.html\" rel=\"nofollow noreferrer\">oracle.com/technical-resources/articles/wang-whitespace.html</a> mentions some <code>.preserveWhitespace()</code> method. Coud make <code>.toString()</code> method work?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665929465,"post_id":74087360,"comment_id":130809274,"body_markdown":"*if i trim the final data, tagB fail the expect (&quot;:&quot;)* Why? The colon would remain...","body":"<i>if i trim the final data, tagB fail the expect (&quot;:&quot;)</i> Why? The colon would remain..."},{"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"score":0,"creation_date":1665929906,"post_id":74087360,"comment_id":130809375,"body_markdown":"@zapl i readed this article, but i don&#39;t have oracle xml, i&#39;m using javax.xml.parsers.SAXParser and not have .preserveWhitespace()","body":"@zapl i readed this article, but i don&#39;t have oracle xml, i&#39;m using javax.xml.parsers.SAXParser and not have .preserveWhitespace()"},{"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"score":0,"creation_date":1665929973,"post_id":74087360,"comment_id":130809385,"body_markdown":"@g00se, because i want &quot;  :  &quot;, ( due spaces before and after colon) if i trim i have &quot;:&quot;","body":"@g00se, because i want &quot;  :  &quot;, ( due spaces before and after colon) if i trim i have &quot;:&quot;"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1665930557,"post_id":74087360,"comment_id":130809505,"body_markdown":"oops, didn&#39;t know there was another one, maybe overriding the [ignorableWhitespace](https://docs.oracle.com/javase/7/docs/api/org/xml/sax/helpers/DefaultHandler.html#ignorableWhitespace(char[],%20int,%20int)) method helps instead. Xml and whitespace is kind of tricky :/ There&#39;s also maybe a way via CDATA: https://stackoverflow.com/a/27481570/995891","body":"oops, didn&#39;t know there was another one, maybe overriding the <a href=\"https://docs.oracle.com/javase/7/docs/api/org/xml/sax/helpers/DefaultHandler.html#ignorableWhitespace(char%5B%5D,%20int,%20int)\" rel=\"nofollow noreferrer\">ignorableWhitespace</a> method helps instead. Xml and whitespace is kind of tricky :/ There&#39;s also maybe a way via CDATA: <a href=\"https://stackoverflow.com/a/27481570/995891\">stackoverflow.com/a/27481570/995891</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665931164,"post_id":74087360,"comment_id":130809656,"body_markdown":"I&#39;m confused. You say *fail the expect (&quot;:&quot;)* so if you &quot;expect&quot; it, in what way does it fail? And if you want space surrounding the colon why *would* you trim in the first place and not leave it as is? Also I have to say that it&#39;s not really about xml at this point. &quot;Ignorable whitespace&quot; is to do with metadata and markup. Your whitespace is data (part of the content).","body":"I&#39;m confused. You say <i>fail the expect (&quot;:&quot;)</i> so if you &quot;expect&quot; it, in what way does it fail? And if you want space surrounding the colon why <i>would</i> you trim in the first place and not leave it as is? Also I have to say that it&#39;s not really about xml at this point. &quot;Ignorable whitespace&quot; is to do with metadata and markup. Your whitespace is data (part of the content)."},{"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"score":0,"creation_date":1665932140,"post_id":74087360,"comment_id":130809869,"body_markdown":"@g00se sorry, there is a problem with format of my post... my expect have to be &quot;  :  &quot; ( due spaces before and after colon)","body":"@g00se sorry, there is a problem with format of my post... my expect have to be &quot;  :  &quot; ( due spaces before and after colon)"},{"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"score":0,"creation_date":1665932210,"post_id":74087360,"comment_id":130809882,"body_markdown":"@zapl i receive xml file from various external provider, and i cannot ask to put CDATA :\\","body":"@zapl i receive xml file from various external provider, and i cannot ask to put CDATA :\\"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665932334,"post_id":74087360,"comment_id":130809906,"body_markdown":"OK. Still confused. You &quot;expect&quot; `&quot; : &quot; `But that&#39;s precisely what I get out of your basic code, so I still don&#39;t see what the problem is..?","body":"OK. Still confused. You &quot;expect&quot; <code>&quot; : &quot; </code>But that&#39;s precisely what I get out of your basic code, so I still don&#39;t see what the problem is..?"},{"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"score":0,"creation_date":1665932720,"post_id":74087360,"comment_id":130810000,"body_markdown":"@g00se, i try to clarify the result of code posted above is `tagA=&quot;\\n    190&quot;, tagB=&quot;\\n      :  &quot;, tagC=&quot;\\n\\t2019-07-02&quot;` - so tagA and tagC not good. If i make a trim() the result is `tagA=&quot;190&quot;, tagB=&quot;:&quot;, tagC=&quot;2019-07-02&quot;` - so tagB not good","body":"@g00se, i try to clarify the result of code posted above is <code>tagA=&quot;\\n    190&quot;, tagB=&quot;\\n      :  &quot;, tagC=&quot;\\n\\t2019-07-02&quot;</code> - so tagA and tagC not good. If i make a trim() the result is <code>tagA=&quot;190&quot;, tagB=&quot;:&quot;, tagC=&quot;2019-07-02&quot;</code> - so tagB not good"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665933349,"post_id":74087360,"comment_id":130810149,"body_markdown":"Please see simplified code posted as answer. Please use the test.xml file you posted, with a different path to it if necessary","body":"Please see simplified code posted as answer. Please use the test.xml file you posted, with a different path to it if necessary"}],"answers":[{"comments":[{"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"score":0,"creation_date":1665934551,"post_id":74088268,"comment_id":130810393,"body_markdown":"the startElement method is good idea, but work if i know the name of tag\n\nbut i don&#39;t know the name of tag, in real case i have to get values of all leaf tag or attribute, without know their name","body":"the startElement method is good idea, but work if i know the name of tag  but i don&#39;t know the name of tag, in real case i have to get values of all leaf tag or attribute, without know their name"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665935128,"post_id":74088268,"comment_id":130810537,"body_markdown":"Not a problem. To see why not, change my `if`s to ```if (true)```  and use ```System.out.printf(&quot;%s = %s%n&quot;, name, textNode.toString());``` instead of the original","body":"Not a problem. To see why not, change my <code>if</code>s to <code>if (true)</code>  and use <code>System.out.printf(&quot;%s = %s%n&quot;, name, textNode.toString());</code> instead of the original"},{"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"score":0,"creation_date":1665937989,"post_id":74088268,"comment_id":130811190,"body_markdown":"i used a new variable to check if current tag is the same of working in characters method ) i posted, what do you think ?","body":"i used a new variable to check if current tag is the same of working in characters method ) i posted, what do you think ?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665938809,"post_id":74088268,"comment_id":130811385,"body_markdown":"Seems good to me at first glance","body":"Seems good to me at first glance"}],"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665933470,"creation_date":1665933470,"answer_id":74088268,"question_id":74087360,"body_markdown":"There is really no problem with your requirement to preserve the whitespace in your data:\r\n\r\n    import java.io.*;\r\n    import javax.xml.parsers.*;\r\n    import org.xml.sax.helpers.*;\r\n    import org.xml.sax.*;\r\n    \r\n    public class FurmaxXmlHandler extends DefaultHandler {\r\n    \r\n        private boolean isTextNode = false;\r\n        private boolean collect = false;\r\n        private StringBuilder textNode = new StringBuilder();\r\n    \r\n        @Override\r\n        public void characters(char[] ch, int start, int length) throws SAXException {\r\n            if (collect) {\r\n                textNode.append(ch, start, length);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void startElement(String uri, String localName, String qName, Attributes a) throws SAXException {\r\n            if (&quot;tagB&quot;.equals(qName)) {\r\n                collect = true;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void endElement(String uri, String localName, String name) throws SAXException {\r\n            // Delegate to active handlers and deletes them if they are finished...\r\n            if (&quot;tagB&quot;.equals(name)) {\r\n                collect = false;\r\n                System.out.printf(&quot;tagB = &#39;%s&#39;%n&quot;, textNode.toString());\r\n                textNode.setLength(0);\r\n            }\r\n    \r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            try {\r\n                File file = new File(&quot;test.xml&quot;);\r\n                SAXParserFactory factory = SAXParserFactory.newInstance();\r\n                SAXParser saxParser = factory.newSAXParser();\r\n                XMLReader reader = saxParser.getXMLReader();\r\n                FurmaxXmlHandler handler = new FurmaxXmlHandler();\r\n                reader.setContentHandler(handler);\r\n                InputSource inputSource = new InputSource(new InputStreamReader(new FileInputStream(file)));\r\n                reader.parse(inputSource);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"Sax Parser preserve space in content","body":"<p>There is really no problem with your requirement to preserve the whitespace in your data:</p>\n<pre><code>import java.io.*;\nimport javax.xml.parsers.*;\nimport org.xml.sax.helpers.*;\nimport org.xml.sax.*;\n\npublic class FurmaxXmlHandler extends DefaultHandler {\n\n    private boolean isTextNode = false;\n    private boolean collect = false;\n    private StringBuilder textNode = new StringBuilder();\n\n    @Override\n    public void characters(char[] ch, int start, int length) throws SAXException {\n        if (collect) {\n            textNode.append(ch, start, length);\n        }\n    }\n\n    @Override\n    public void startElement(String uri, String localName, String qName, Attributes a) throws SAXException {\n        if (&quot;tagB&quot;.equals(qName)) {\n            collect = true;\n        }\n    }\n\n    @Override\n    public void endElement(String uri, String localName, String name) throws SAXException {\n        // Delegate to active handlers and deletes them if they are finished...\n        if (&quot;tagB&quot;.equals(name)) {\n            collect = false;\n            System.out.printf(&quot;tagB = '%s'%n&quot;, textNode.toString());\n            textNode.setLength(0);\n        }\n\n    }\n\n    public static void main(String[] args) {\n        try {\n            File file = new File(&quot;test.xml&quot;);\n            SAXParserFactory factory = SAXParserFactory.newInstance();\n            SAXParser saxParser = factory.newSAXParser();\n            XMLReader reader = saxParser.getXMLReader();\n            FurmaxXmlHandler handler = new FurmaxXmlHandler();\n            reader.setContentHandler(handler);\n            InputSource inputSource = new InputSource(new InputStreamReader(new FileInputStream(file)));\n            reader.parse(inputSource);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665937881,"creation_date":1665936385,"answer_id":74088666,"question_id":74087360,"body_markdown":"i tested with\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;main&gt;\r\n        &lt;tagA&gt;190&lt;/tagA&gt;\r\n        &lt;tagB&gt;  :  &lt;/tagB&gt;\r\n    \t&lt;tagc&gt;2019-07-02&lt;/tagc&gt;\r\n    \t&lt;tagc&gt;2018-07-02&lt;/tagc&gt;\r\n    \t&lt;fatherA&gt;\r\n    \t&lt;tagd attribute1=&quot; ciao &quot;&gt;2018-07-02&lt;/tagd&gt;\r\n    \t&lt;/fatherA&gt;\r\n        &lt;tagf&gt;&lt;/tagf&gt;\r\n    &lt;/main&gt;\r\n\r\nwith\r\n\r\n    public class FurmaxXmlHandler2 extends DefaultHandler {\r\n\r\n\tprivate StringBuilder textNode = new StringBuilder();\r\n\tprivate String currentElement = &quot;&quot;;\r\n\tprivate String workElement = &quot;&quot;;\r\n\r\n\t@Override\r\n\tpublic void characters(char[] ch, int start, int length) throws SAXException {\r\n\t\tif (workElement.equals(currentElement)) {\r\n\t\t\ttextNode.append(ch, start, length);\r\n\t\t} else {\r\n\t\t\tworkElement = currentElement;\r\n\t\t\ttextNode = new StringBuilder();\r\n\t\t\ttextNode.append(ch, start, length);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void startElement(String uri, String localName, String qName, Attributes a) throws SAXException {\r\n\t\tcurrentElement = qName;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void endElement(String uri, String localName, String name) throws SAXException {\r\n\t\t// Delegate to active handlers and deletes them if they are finished...\r\n\t\tString data = &quot;&quot;;\r\n\t\tif (currentElement.equals(workElement)) {\r\n\t\t\tdata = textNode.toString();\r\n\t\t}\r\n\t\tcurrentElement = &quot;&quot;;\r\n\t\tworkElement = &quot;&quot;;\r\n\t\tSystem.out.printf(&quot;%s = &#39;%s&#39;%n&quot;, name, data);\r\n\t\ttextNode.setLength(0);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\tFile file = new File(&quot;test.xml&quot;);\r\n\t\t\tSAXParserFactory factory = SAXParserFactory.newInstance();\r\n\t\t\tSAXParser saxParser = factory.newSAXParser();\r\n\t\t\tXMLReader reader = saxParser.getXMLReader();\r\n\t\t\tFurmaxXmlHandler2 handler = new FurmaxXmlHandler2();\r\n\t\t\treader.setContentHandler(handler);\r\n\t\t\tInputSource inputSource = new InputSource(new InputStreamReader(new FileInputStream(file)));\r\n\t\t\treader.parse(inputSource);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nresult:\r\n\r\n    tagA = &#39;190&#39;\r\n    tagB = &#39;  :  &#39;\r\n    tagc = &#39;2019-07-02&#39;\r\n    tagc = &#39;2018-07-02&#39;\r\n    tagd = &#39;2018-07-02&#39;\r\n    fatherA = &#39;\r\n    \t&#39;\r\n    tagf = &#39;&#39;\r\n    main = &#39;\r\n    &#39;\r\n\r\nwhat do you think ?\r\n","title":"Sax Parser preserve space in content","body":"<p>i tested with</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;main&gt;\n    &lt;tagA&gt;190&lt;/tagA&gt;\n    &lt;tagB&gt;  :  &lt;/tagB&gt;\n    &lt;tagc&gt;2019-07-02&lt;/tagc&gt;\n    &lt;tagc&gt;2018-07-02&lt;/tagc&gt;\n    &lt;fatherA&gt;\n    &lt;tagd attribute1=&quot; ciao &quot;&gt;2018-07-02&lt;/tagd&gt;\n    &lt;/fatherA&gt;\n    &lt;tagf&gt;&lt;/tagf&gt;\n&lt;/main&gt;\n</code></pre>\n<p>with</p>\n<pre><code>public class FurmaxXmlHandler2 extends DefaultHandler {\n\nprivate StringBuilder textNode = new StringBuilder();\nprivate String currentElement = &quot;&quot;;\nprivate String workElement = &quot;&quot;;\n\n@Override\npublic void characters(char[] ch, int start, int length) throws SAXException {\n    if (workElement.equals(currentElement)) {\n        textNode.append(ch, start, length);\n    } else {\n        workElement = currentElement;\n        textNode = new StringBuilder();\n        textNode.append(ch, start, length);\n    }\n}\n\n@Override\npublic void startElement(String uri, String localName, String qName, Attributes a) throws SAXException {\n    currentElement = qName;\n}\n\n@Override\npublic void endElement(String uri, String localName, String name) throws SAXException {\n    // Delegate to active handlers and deletes them if they are finished...\n    String data = &quot;&quot;;\n    if (currentElement.equals(workElement)) {\n        data = textNode.toString();\n    }\n    currentElement = &quot;&quot;;\n    workElement = &quot;&quot;;\n    System.out.printf(&quot;%s = '%s'%n&quot;, name, data);\n    textNode.setLength(0);\n}\n\npublic static void main(String[] args) {\n    try {\n        File file = new File(&quot;test.xml&quot;);\n        SAXParserFactory factory = SAXParserFactory.newInstance();\n        SAXParser saxParser = factory.newSAXParser();\n        XMLReader reader = saxParser.getXMLReader();\n        FurmaxXmlHandler2 handler = new FurmaxXmlHandler2();\n        reader.setContentHandler(handler);\n        InputSource inputSource = new InputSource(new InputStreamReader(new FileInputStream(file)));\n        reader.parse(inputSource);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>}</p>\n<p>result:</p>\n<pre><code>tagA = '190'\ntagB = '  :  '\ntagc = '2019-07-02'\ntagc = '2018-07-02'\ntagd = '2018-07-02'\nfatherA = '\n    '\ntagf = ''\nmain = '\n'\n</code></pre>\n<p>what do you think ?</p>\n"}],"owner":{"account_id":7295627,"reputation":57,"user_id":5560592,"display_name":"ilmagowalter"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":163,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":2,"score":0,"last_activity_date":1665937881,"creation_date":1665925595,"question_id":74087360,"body_markdown":"I have a file xml like this\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;main&gt;\r\n        &lt;tagA&gt;190&lt;/tagA&gt;\r\n        &lt;tagB&gt;  :  &lt;/tagB&gt;\r\n    \t&lt;tagc&gt;2019-07-02&lt;/tagc&gt;\r\n    &lt;/main&gt;\r\n\r\nnote that before tagA and tagB there are four spaces &quot;    &quot;, before tagC there is tab &quot;\\t&quot;\r\n\r\ni want preserve spaces in tagB content, so the expect are\r\n\r\n    tagA &quot;190&quot;\r\n    tagB &quot;  :  &quot;\r\n    tagC &quot;2019-07-02&quot;\r\n\r\nMy code:\r\n\r\n    public class FurmaxXmlHandler extends DefaultHandler {\r\n    \r\n    \tprivate boolean isTextNode = false;\r\n    \tprivate StringBuilder textNode = new StringBuilder();\r\n    \r\n    \t@Override\r\n    \tpublic void characters(char[] ch, int start, int length) throws SAXException {\r\n    \r\n    \t\tisTextNode = true;\r\n    \t\ttextNode.append(ch, start, length);\r\n    \t\t// to test only\r\n    \t\tStringBuilder tempBuilder = new StringBuilder();\r\n    \t\ttempBuilder.append(ch, start, length);\r\n    \t\tString temp = tempBuilder.toString();\r\n    \t\tSystem.out.println(&quot;single call characters -&gt; &quot; + temp + &quot;&lt;-&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void endElement(String uri, String localName, String name) throws SAXException {\r\n    \t\t// Delegate to active handlers and deletes them if they are finished...\r\n    \r\n    \t\tif (isTextNode) {\r\n    \t\t\tString data = textNode.toString();\r\n    \t\t\tSystem.out.println(&quot;value of &quot; + name + &quot; -&gt;&quot; + data + &quot;&lt;-&quot;);\r\n    \t\t\ttextNode = new StringBuilder();\r\n    \t\t\tisTextNode = false;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\ttry {\r\n    \t\t\tFile file = new File(\r\n    \t\t\t\t\t&quot;C:\\\\Workspace\\\\Progetti\\\\ProveJavaGradle\\\\src\\\\main\\\\java\\\\it\\\\furmax\\\\xml\\\\test.xml&quot;);\r\n    \t\t\tSAXParserFactory factory = SAXParserFactory.newInstance();\r\n    \t\t\tSAXParser saxParser = factory.newSAXParser();\r\n    \t\t\tXMLReader reader = saxParser.getXMLReader();\r\n    \t\t\tFurmaxXmlHandler handler = new FurmaxXmlHandler();\r\n    \t\t\treader.setContentHandler(handler);\r\n    \t\t\tInputSource inputSource = new InputSource(new InputStreamReader(new FileInputStream(file)));\r\n    \t\t\treader.parse(inputSource);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\nOutput:\r\n\r\n    single call characters -&gt;\r\n        &lt;-\r\n    single call characters -&gt;190&lt;-\r\n    value of tagA -&gt;\r\n        190&lt;-\r\n    single call characters -&gt;\r\n        &lt;-\r\n    single call characters -&gt;  :  &lt;-\r\n    value of tagB -&gt;\r\n          :  &lt;-\r\n    single call characters -&gt;\r\n    \t&lt;-\r\n    single call characters -&gt;2019-07-02&lt;-\r\n    value of tagc -&gt;\r\n    \t2019-07-02&lt;-\r\n    single call characters -&gt;\r\n    &lt;-\r\n    value of main -&gt;\r\n    &lt;-\r\n\r\nlike you see, for single tag there are more of one call of method characters, each containing some text ( &quot;\\n&quot; ot ohers ), and the final content of tag is concatenation of all.\r\n\r\n1) if i trim the final data, tagB fail the expect\r\n2) if i don&#39;t trim the final data, tagA and tagB fail the expect\r\n\r\nFurthermore I tried to change textNode with List&lt;String&gt; where add every characters call and on endelement i get the last... BUT... in a more big file i have some case with the content split in more characters call ( view image ), so i can get only the last element\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1ZneM.png\r\n\r\n\r\n\r\nlast idea is linearize all file before parse, but i have to work with very big file, i no have idea how make this safe\r\n\r\n","title":"Sax Parser preserve space in content","body":"<p>I have a file xml like this</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;main&gt;\n    &lt;tagA&gt;190&lt;/tagA&gt;\n    &lt;tagB&gt;  :  &lt;/tagB&gt;\n    &lt;tagc&gt;2019-07-02&lt;/tagc&gt;\n&lt;/main&gt;\n</code></pre>\n<p>note that before tagA and tagB there are four spaces &quot;    &quot;, before tagC there is tab &quot;\\t&quot;</p>\n<p>i want preserve spaces in tagB content, so the expect are</p>\n<pre><code>tagA &quot;190&quot;\ntagB &quot;  :  &quot;\ntagC &quot;2019-07-02&quot;\n</code></pre>\n<p>My code:</p>\n<pre><code>public class FurmaxXmlHandler extends DefaultHandler {\n\n    private boolean isTextNode = false;\n    private StringBuilder textNode = new StringBuilder();\n\n    @Override\n    public void characters(char[] ch, int start, int length) throws SAXException {\n\n        isTextNode = true;\n        textNode.append(ch, start, length);\n        // to test only\n        StringBuilder tempBuilder = new StringBuilder();\n        tempBuilder.append(ch, start, length);\n        String temp = tempBuilder.toString();\n        System.out.println(&quot;single call characters -&gt; &quot; + temp + &quot;&lt;-&quot;);\n    }\n\n    @Override\n    public void endElement(String uri, String localName, String name) throws SAXException {\n        // Delegate to active handlers and deletes them if they are finished...\n\n        if (isTextNode) {\n            String data = textNode.toString();\n            System.out.println(&quot;value of &quot; + name + &quot; -&gt;&quot; + data + &quot;&lt;-&quot;);\n            textNode = new StringBuilder();\n            isTextNode = false;\n        }\n\n    }\n\n    public static void main(String[] args) {\n\n        try {\n            File file = new File(\n                    &quot;C:\\\\Workspace\\\\Progetti\\\\ProveJavaGradle\\\\src\\\\main\\\\java\\\\it\\\\furmax\\\\xml\\\\test.xml&quot;);\n            SAXParserFactory factory = SAXParserFactory.newInstance();\n            SAXParser saxParser = factory.newSAXParser();\n            XMLReader reader = saxParser.getXMLReader();\n            FurmaxXmlHandler handler = new FurmaxXmlHandler();\n            reader.setContentHandler(handler);\n            InputSource inputSource = new InputSource(new InputStreamReader(new FileInputStream(file)));\n            reader.parse(inputSource);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>single call characters -&gt;\n    &lt;-\nsingle call characters -&gt;190&lt;-\nvalue of tagA -&gt;\n    190&lt;-\nsingle call characters -&gt;\n    &lt;-\nsingle call characters -&gt;  :  &lt;-\nvalue of tagB -&gt;\n      :  &lt;-\nsingle call characters -&gt;\n    &lt;-\nsingle call characters -&gt;2019-07-02&lt;-\nvalue of tagc -&gt;\n    2019-07-02&lt;-\nsingle call characters -&gt;\n&lt;-\nvalue of main -&gt;\n&lt;-\n</code></pre>\n<p>like you see, for single tag there are more of one call of method characters, each containing some text ( &quot;\\n&quot; ot ohers ), and the final content of tag is concatenation of all.</p>\n<ol>\n<li>if i trim the final data, tagB fail the expect</li>\n<li>if i don't trim the final data, tagA and tagB fail the expect</li>\n</ol>\n<p>Furthermore I tried to change textNode with List where add every characters call and on endelement i get the last... BUT... in a more big file i have some case with the content split in more characters call ( view image ), so i can get only the last element</p>\n<p><a href=\"https://i.stack.imgur.com/1ZneM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ZneM.png\" alt=\"enter image description here\" /></a></p>\n<p>last idea is linearize all file before parse, but i have to work with very big file, i no have idea how make this safe</p>\n"},{"tags":["java","kotlin","singleton"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665934897,"creation_date":1665934897,"answer_id":74088446,"question_id":74088167,"body_markdown":"`object` declares a singleton. Unlike Kotlin, you cannot use a type name to refer to its instance in Java. Therefore, the Kotlin compiler translates the singleton instance to a field called `INSTANCE` instead, so you can do:\r\n\r\n    MySet.INSTANCE.contains(foo);\r\n\r\nin Java.\r\n\r\nWhile you can probably find `INSTANCE` by chance, just by using the auto-complete in IntelliJ, the only place where I could find this officially documented is in the [Calling Kotlin from Java][1] page at the bottom of [this section][2], which talks about calling static methods.\r\n\r\n&gt;     object Obj {\r\n&gt;         @JvmStatic fun callStatic() {}\r\n&gt;         fun callNonStatic() {}\r\n&gt;     }\r\n&gt; \r\n&gt; In Java:\r\n&gt; \r\n&gt; \r\n&gt;     Obj.callStatic(); // works fine\r\n&gt;     Obj.callNonStatic(); // error\r\n&gt;     Obj.INSTANCE.callNonStatic(); // works, a call through the singleton instance\r\n&gt;     Obj.INSTANCE.callStatic(); // works too\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/java-to-kotlin-interop.html\r\n  [2]: https://kotlinlang.org/docs/java-to-kotlin-interop.html#static-methods","title":"How to refer to a Kotlin delegating singleton object from Java?","body":"<p><code>object</code> declares a singleton. Unlike Kotlin, you cannot use a type name to refer to its instance in Java. Therefore, the Kotlin compiler translates the singleton instance to a field called <code>INSTANCE</code> instead, so you can do:</p>\n<pre><code>MySet.INSTANCE.contains(foo);\n</code></pre>\n<p>in Java.</p>\n<p>While you can probably find <code>INSTANCE</code> by chance, just by using the auto-complete in IntelliJ, the only place where I could find this officially documented is in the <a href=\"https://kotlinlang.org/docs/java-to-kotlin-interop.html\" rel=\"nofollow noreferrer\">Calling Kotlin from Java</a> page at the bottom of <a href=\"https://kotlinlang.org/docs/java-to-kotlin-interop.html#static-methods\" rel=\"nofollow noreferrer\">this section</a>, which talks about calling static methods.</p>\n<blockquote>\n<pre><code>object Obj {\n    @JvmStatic fun callStatic() {}\n    fun callNonStatic() {}\n}\n</code></pre>\n<p>In Java:</p>\n<pre><code>Obj.callStatic(); // works fine\nObj.callNonStatic(); // error\nObj.INSTANCE.callNonStatic(); // works, a call through the singleton instance\nObj.INSTANCE.callStatic(); // works too\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74088446,"answer_count":1,"score":0,"last_activity_date":1665937120,"creation_date":1665932683,"question_id":74088167,"body_markdown":"I have a Kotlin object that delegates it&#39;s implementation, in my case to `MutableSet&lt;String&gt;` like so: \r\n\r\n```kotlin\r\nobject MySet : MutableSet&lt;String&gt; by TreeSet&lt;String&gt;() {\r\n\r\n    init {...}\r\n\r\n}\r\n```\r\n\r\n\r\nIn Java I&#39;d like to say something like `MySet.contains`. How can I do that?","title":"How to refer to a Kotlin delegating singleton object from Java?","body":"<p>I have a Kotlin object that delegates it's implementation, in my case to <code>MutableSet&lt;String&gt;</code> like so:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>object MySet : MutableSet&lt;String&gt; by TreeSet&lt;String&gt;() {\n\n    init {...}\n\n}\n</code></pre>\n<p>In Java I'd like to say something like <code>MySet.contains</code>. How can I do that?</p>\n"},{"tags":["java","frequency","linear-search","frequency-distribution","symbol-table"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665810221,"post_id":74076755,"comment_id":130790362,"body_markdown":"Prints *always* 1 because: *never* `st.containsKey(key)`!","body":"Prints <i>always</i> 1 because: <i>never</i> <code>st.containsKey(key)</code>!"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665812485,"post_id":74076755,"comment_id":130790617,"body_markdown":"[Edit] your question and post sample data from file `RandomInt.txt`","body":"<a href=\"https://stackoverflow.com/posts/74076755/edit\">Edit</a> your question and post sample data from file <code>RandomInt.txt</code>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1665814290,"post_id":74076755,"comment_id":130790826,"body_markdown":"The only keys you add to `st` are the descriptions of the ranges, so you are never going to find the numbers you read from the file, even when one appears more than once.","body":"The only keys you add to <code>st</code> are the descriptions of the ranges, so you are never going to find the numbers you read from the file, even when one appears more than once."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665818487,"post_id":74076755,"comment_id":130791404,"body_markdown":"for this specific case I would use an array for the counters: if you divide the number by `10` you almost directly get the index for such an array (some caution needed since the first range starts with `10`)","body":"for this specific case I would use an array for the counters: if you divide the number by <code>10</code> you almost directly get the index for such an array (some caution needed since the first range starts with <code>10</code>)"},{"owner":{"account_id":26628684,"reputation":1,"user_id":20246209,"display_name":"V01D"},"score":0,"creation_date":1665936805,"post_id":74076755,"comment_id":130810914,"body_markdown":"I managed to count the frequency of each integer in the file. But, I can&#39;t seem to get the range part working","body":"I managed to count the frequency of each integer in the file. But, I can&#39;t seem to get the range part working"}],"answers":[{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665834592,"post_id":74078511,"comment_id":130794135,"body_markdown":"but I meant something like `count[Integer.parseInt(key) / 10] += 1` without the use of a map or similar","body":"but I meant something like <code>count[Integer.parseInt(key) &#47; 10] += 1</code> without the use of a map or similar"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665835630,"post_id":74078511,"comment_id":130794306,"body_markdown":"Yes I know but the solution has to integrate with the existing container class(es) being used","body":"Yes I know but the solution has to integrate with the existing container class(es) being used"},{"owner":{"account_id":26628684,"reputation":1,"user_id":20246209,"display_name":"V01D"},"score":0,"creation_date":1665937185,"post_id":74078511,"comment_id":130811003,"body_markdown":"I updated my main() that reads the frequency of each item in the file. How exactly do I implement the String keyInRange?","body":"I updated my main() that reads the frequency of each item in the file. How exactly do I implement the String keyInRange?"}],"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665828380,"creation_date":1665828380,"answer_id":74078511,"question_id":74076755,"body_markdown":"As @user16320675 says, you should probably do something numeric with arrays. See the following as a fairly kludgy fix as the use of strings for something essentially numeric is not really appropriate. Instead of just `st.contains(key)` you could call `st.contains(keyInRange(key))` - the following:\r\n\r\n    public static String keyInRange(String key) {\r\n        final String[] RANGES = {\r\n            &quot;&quot;,\r\n            &quot;10 to 19&quot;,\r\n            &quot;20 to 29&quot;,\r\n            &quot;30 to 39&quot;,\r\n            &quot;40 to 49&quot;,\r\n            &quot;50 to 59&quot;\r\n        };\r\n        return RANGES[Integer.parseInt(key) / 10];\r\n    }\r\nbut beware, because you&#39;re currently `put`ting in all ranges irrespective of key for some reason.","title":"How do I count the frequency of an item in a given range?","body":"<p>As @user16320675 says, you should probably do something numeric with arrays. See the following as a fairly kludgy fix as the use of strings for something essentially numeric is not really appropriate. Instead of just <code>st.contains(key)</code> you could call <code>st.contains(keyInRange(key))</code> - the following:</p>\n<pre><code>public static String keyInRange(String key) {\n    final String[] RANGES = {\n        &quot;&quot;,\n        &quot;10 to 19&quot;,\n        &quot;20 to 29&quot;,\n        &quot;30 to 39&quot;,\n        &quot;40 to 49&quot;,\n        &quot;50 to 59&quot;\n    };\n    return RANGES[Integer.parseInt(key) / 10];\n}\n</code></pre>\n<p>but beware, because you're currently <code>put</code>ting in all ranges irrespective of key for some reason.</p>\n"}],"owner":{"account_id":26628684,"reputation":1,"user_id":20246209,"display_name":"V01D"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1665937113,"creation_date":1665809271,"question_id":74076755,"body_markdown":"I&#39;ve been given a lab where I&#39;m supposed to create a program that reads a file with 1000 random integers between 10 to 59 inclusive and generate a frequency table like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe ranges are 10 to 19, 20 to 29, 30 to 39, 40 to 49, and 50 to 59.\r\nHere is a sample from the RandomInt.txt:\r\n50\r\n11\r\n55\r\n12\r\n20\r\n13\r\n53\r\n34\r\n19\r\n39\r\n58\r\n58\r\n24\r\n59\r\n28\r\n10\r\n52\r\n18\r\n55\r\n59\r\n28\r\n29\r\n54\r\n\r\nI&#39;ve been successful at reading all the integers in a file, but for some reason my result for the frequency part is just 1 for every category. How do I put each integer in a range and count them all together within that range?\r\nSo far, here is my updated code that counts the frequency of each integer:\r\n\r\n```java\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\npublic class Demo3 \r\n{\r\n\tpublic static void main(String[] args) throws FileNotFoundException \r\n\t{\r\n\t\tFile file = new File(&quot;RandomInt.txt&quot;);\r\n\t\tScanner sc = new Scanner(file);\t\r\n\t\tSequentialSearchST&lt;String, Integer&gt; st = new SequentialSearchST&lt;String, Integer&gt;();\r\n\t\t\r\n        \r\n        int dataSet = 0;\r\n\t\twhile(sc.hasNext())\r\n\t\t{\r\n\t\t\tString key = sc.next();\r\n\t\t\tdataSet++;\r\n\t\t\t\r\n\t\t\tif(st.contains(key))\r\n\t\t\t{\r\n\t\t\t\tst.put(key, st.get(key) + 1);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tst.put(key, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (String s : st.keys())\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Integer: &quot; + s + &quot; Frequency: &quot; + st.get(s));\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Data Set Size: &quot; + dataSet);\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/jrXlW.png","title":"How do I count the frequency of an item in a given range?","body":"<p>I've been given a lab where I'm supposed to create a program that reads a file with 1000 random integers between 10 to 59 inclusive and generate a frequency table like this:</p>\n<p><a href=\"https://i.stack.imgur.com/jrXlW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jrXlW.png\" alt=\"enter image description here\" /></a></p>\n<p>The ranges are 10 to 19, 20 to 29, 30 to 39, 40 to 49, and 50 to 59.\nHere is a sample from the RandomInt.txt:\n50\n11\n55\n12\n20\n13\n53\n34\n19\n39\n58\n58\n24\n59\n28\n10\n52\n18\n55\n59\n28\n29\n54</p>\n<p>I've been successful at reading all the integers in a file, but for some reason my result for the frequency part is just 1 for every category. How do I put each integer in a range and count them all together within that range?\nSo far, here is my updated code that counts the frequency of each integer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.util.*;\n\npublic class Demo3 \n{\n    public static void main(String[] args) throws FileNotFoundException \n    {\n        File file = new File(&quot;RandomInt.txt&quot;);\n        Scanner sc = new Scanner(file); \n        SequentialSearchST&lt;String, Integer&gt; st = new SequentialSearchST&lt;String, Integer&gt;();\n        \n        \n        int dataSet = 0;\n        while(sc.hasNext())\n        {\n            String key = sc.next();\n            dataSet++;\n            \n            if(st.contains(key))\n            {\n                st.put(key, st.get(key) + 1);\n            }\n            else\n            {\n                st.put(key, 1);\n            }\n        }\n        \n        for (String s : st.keys())\n        {\n            System.out.println(&quot;Integer: &quot; + s + &quot; Frequency: &quot; + st.get(s));\n        }\n        System.out.println(&quot;Data Set Size: &quot; + dataSet);\n        \n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","combinations","permutation"],"answers":[{"tags":[],"owner":{"account_id":114004,"reputation":1554,"user_id":299990,"accept_rate":88,"display_name":"Don"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665936046,"creation_date":1665936046,"answer_id":74088612,"question_id":74083841,"body_markdown":"My Coach in Interview Kickstart helped me found out the problem in my code.  His/Her finding is \r\n&quot;In the if condition of for loop, You have written if(i&gt;pos&amp;&amp;arr.get(i).equals(arr.get(i-1))) but it should be if (i != pos &amp;&amp; (arr.get(i) == arr.get(pos) || (i &gt; 0 &amp;&amp; arr.get(i) == arr.get(i-1)))) to handle the duplicate elements correctly.&quot;\r\n\r\nI have converted the fix to what I can understand better -\r\n\r\nif (i &gt; pos &amp;&amp; (arr.get(i) == arr.get(pos) || arr.get(i) == arr.get(i-1)))\r\n\r\nEarlier I missed the case arr.get(i) == arr.get(pos).\r\n\r\nThe correct solution is\r\n\r\n        import java.util.*; \r\n        \r\n        public class test {\r\n              static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; get_permutations(ArrayList&lt;Integer&gt; arr) {\r\n                    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res=new ArrayList&lt;&gt;();\r\n                    Collections.sort(arr);\r\n                    helper(arr, 0, res);\r\n                    return res;\r\n                }\r\n                \r\n            static void helper(ArrayList&lt;Integer&gt; arr, int pos, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res){\r\n                int n=arr.size();\r\n                if(pos&gt;=n){\r\n                    res.add(new ArrayList&lt;Integer&gt;(arr));\r\n                    return;\r\n                }\r\n                \r\n                for(int i=pos; i&lt;n; i++){\r\n                    if (i &gt; pos &amp;&amp; (arr.get(i) == arr.get(pos) || arr.get(i) == arr.get(i-1)))\r\n                        continue;\r\n                    \r\n                    Collections.swap(arr, pos, i);\r\n                    helper(arr, pos+1, res);\r\n                    Collections.swap(arr, pos, i);\r\n                }\r\n            }\r\n        // Driver code\r\n        public static void main(String args[])\r\n        {\r\n            ArrayList&lt;Integer&gt; arr= new ArrayList&lt;&gt;(Arrays.asList(3,3,8,8,9,9,9));\r\n            for(var v:get_permutations(arr)){\r\n                System.out.println(v);\r\n            }\r\n        }\r\n    }","title":"Comparing neighboring integer does not work in Permute Array of Integers Duplicates Allowed","body":"<p>My Coach in Interview Kickstart helped me found out the problem in my code.  His/Her finding is\n&quot;In the if condition of for loop, You have written if(i&gt;pos&amp;&amp;arr.get(i).equals(arr.get(i-1))) but it should be if (i != pos &amp;&amp; (arr.get(i) == arr.get(pos) || (i &gt; 0 &amp;&amp; arr.get(i) == arr.get(i-1)))) to handle the duplicate elements correctly.&quot;</p>\n<p>I have converted the fix to what I can understand better -</p>\n<p>if (i &gt; pos &amp;&amp; (arr.get(i) == arr.get(pos) || arr.get(i) == arr.get(i-1)))</p>\n<p>Earlier I missed the case arr.get(i) == arr.get(pos).</p>\n<p>The correct solution is</p>\n<pre><code>    import java.util.*; \n    \n    public class test {\n          static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; get_permutations(ArrayList&lt;Integer&gt; arr) {\n                ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res=new ArrayList&lt;&gt;();\n                Collections.sort(arr);\n                helper(arr, 0, res);\n                return res;\n            }\n            \n        static void helper(ArrayList&lt;Integer&gt; arr, int pos, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res){\n            int n=arr.size();\n            if(pos&gt;=n){\n                res.add(new ArrayList&lt;Integer&gt;(arr));\n                return;\n            }\n            \n            for(int i=pos; i&lt;n; i++){\n                if (i &gt; pos &amp;&amp; (arr.get(i) == arr.get(pos) || arr.get(i) == arr.get(i-1)))\n                    continue;\n                \n                Collections.swap(arr, pos, i);\n                helper(arr, pos+1, res);\n                Collections.swap(arr, pos, i);\n            }\n        }\n    // Driver code\n    public static void main(String args[])\n    {\n        ArrayList&lt;Integer&gt; arr= new ArrayList&lt;&gt;(Arrays.asList(3,3,8,8,9,9,9));\n        for(var v:get_permutations(arr)){\n            System.out.println(v);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":114004,"reputation":1554,"user_id":299990,"accept_rate":88,"display_name":"Don"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":74088612,"answer_count":1,"score":1,"last_activity_date":1665936046,"creation_date":1665879152,"question_id":74083841,"body_markdown":"Given an array of numbers with possible duplicates, return all of its permutations in any order.\r\n\r\nIt works when I use a HashSet to skip duplicates.  \r\n\r\n        package test;\r\n    \r\n    import java.util.*; \r\n    \r\n    public class test {\r\n    \t  static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; get_permutations(ArrayList&lt;Integer&gt; arr) {\r\n    \t        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res=new ArrayList&lt;&gt;();\r\n    \t        //Collections.sort(arr);\r\n    \t        helper(arr, 0, res);\r\n    \t        return res;\r\n    \t    }\r\n    \t    \r\n    \t    static void helper(ArrayList&lt;Integer&gt; arr, int pos, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res){\r\n    \t        int n=arr.size();\r\n    \t        if(pos&gt;=n){\r\n    \t            res.add(new ArrayList&lt;Integer&gt;(arr));\r\n    \t            return;\r\n    \t        }\r\n    \t        \r\n    \t        Set&lt;Integer&gt; set=new HashSet&lt;&gt;();\r\n    \t        for(int i=pos; i&lt;n; i++){\r\n    \t            //if(i&gt;pos&amp;&amp;arr.get(i).equals(arr.get(i-1)))  \r\n    \t            if(!set.add(arr.get(i)))\r\n    \t                continue;\r\n    \t            \r\n    \t            Collections.swap(arr, pos, i);\r\n    \t            helper(arr, pos+1, res);\r\n    \t            Collections.swap(arr, pos, i);\r\n    \t        }\r\n    \t    }\r\n    \t// Driver code\r\n    \tpublic static void main(String args[])\r\n    \t{\r\n    \t\tArrayList&lt;Integer&gt; arr= new ArrayList&lt;&gt;(Arrays.asList(3,3,8,8,9,9,9));\r\n    \t\tfor(var v:get_permutations(arr)){\r\n    \t\t\tSystem.out.println(v);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nHowever, if I sorted the array and skipped the duplicates by comparing neighboring integer, it does not work for some test cases such as [3,3,8,8,9,9,9].\r\n\r\n\r\n        import java.util.*; \r\n        \r\n        public class test {\r\n        \t  static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; get_permutations(ArrayList&lt;Integer&gt; arr) {\r\n        \t        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res=new ArrayList&lt;&gt;();\r\n        \t        Collections.sort(arr);\r\n        \t        helper(arr, 0, res);\r\n        \t        return res;\r\n        \t    }\r\n        \t    \r\n    \t    static void helper(ArrayList&lt;Integer&gt; arr, int pos, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res){\r\n    \t        int n=arr.size();\r\n    \t        if(pos&gt;=n){\r\n    \t            res.add(new ArrayList&lt;Integer&gt;(arr));\r\n    \t            return;\r\n    \t        }\r\n    \t        \r\n    \t        //Set&lt;Integer&gt; set=new HashSet&lt;&gt;();\r\n    \t        for(int i=pos; i&lt;n; i++){\r\n    \t            if(i&gt;pos&amp;&amp;arr.get(i).equals(arr.get(i-1)))  \r\n    \t            //if(!set.add(arr.get(i)))\r\n    \t                continue;\r\n    \t            \r\n    \t            Collections.swap(arr, pos, i);\r\n    \t            helper(arr, pos+1, res);\r\n    \t            Collections.swap(arr, pos, i);\r\n    \t        }\r\n    \t    }\r\n    \t// Driver code\r\n    \tpublic static void main(String args[])\r\n    \t{\r\n    \t\tArrayList&lt;Integer&gt; arr= new ArrayList&lt;&gt;(Arrays.asList(3,3,8,8,9,9,9));\r\n    \t\tfor(var v:get_permutations(arr)){\r\n    \t\t\tSystem.out.println(v);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThis is opposite to [subset solution][1].\r\n\r\nThe outputs highlighted in red part are the problem.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhat did I miss here? \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74083916/using-hashset-to-filter-duplicates-does-not-work-in-subsets-with-duplicate-probl\r\n  [2]: https://i.stack.imgur.com/gt1VL.png","title":"Comparing neighboring integer does not work in Permute Array of Integers Duplicates Allowed","body":"<p>Given an array of numbers with possible duplicates, return all of its permutations in any order.</p>\n<p>It works when I use a HashSet to skip duplicates.</p>\n<pre><code>    package test;\n\nimport java.util.*; \n\npublic class test {\n      static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; get_permutations(ArrayList&lt;Integer&gt; arr) {\n            ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res=new ArrayList&lt;&gt;();\n            //Collections.sort(arr);\n            helper(arr, 0, res);\n            return res;\n        }\n        \n        static void helper(ArrayList&lt;Integer&gt; arr, int pos, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res){\n            int n=arr.size();\n            if(pos&gt;=n){\n                res.add(new ArrayList&lt;Integer&gt;(arr));\n                return;\n            }\n            \n            Set&lt;Integer&gt; set=new HashSet&lt;&gt;();\n            for(int i=pos; i&lt;n; i++){\n                //if(i&gt;pos&amp;&amp;arr.get(i).equals(arr.get(i-1)))  \n                if(!set.add(arr.get(i)))\n                    continue;\n                \n                Collections.swap(arr, pos, i);\n                helper(arr, pos+1, res);\n                Collections.swap(arr, pos, i);\n            }\n        }\n    // Driver code\n    public static void main(String args[])\n    {\n        ArrayList&lt;Integer&gt; arr= new ArrayList&lt;&gt;(Arrays.asList(3,3,8,8,9,9,9));\n        for(var v:get_permutations(arr)){\n            System.out.println(v);\n        }\n    }\n}\n</code></pre>\n<p>However, if I sorted the array and skipped the duplicates by comparing neighboring integer, it does not work for some test cases such as [3,3,8,8,9,9,9].</p>\n<pre><code>    import java.util.*; \n    \n    public class test {\n          static ArrayList&lt;ArrayList&lt;Integer&gt;&gt; get_permutations(ArrayList&lt;Integer&gt; arr) {\n                ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res=new ArrayList&lt;&gt;();\n                Collections.sort(arr);\n                helper(arr, 0, res);\n                return res;\n            }\n            \n        static void helper(ArrayList&lt;Integer&gt; arr, int pos, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res){\n            int n=arr.size();\n            if(pos&gt;=n){\n                res.add(new ArrayList&lt;Integer&gt;(arr));\n                return;\n            }\n            \n            //Set&lt;Integer&gt; set=new HashSet&lt;&gt;();\n            for(int i=pos; i&lt;n; i++){\n                if(i&gt;pos&amp;&amp;arr.get(i).equals(arr.get(i-1)))  \n                //if(!set.add(arr.get(i)))\n                    continue;\n                \n                Collections.swap(arr, pos, i);\n                helper(arr, pos+1, res);\n                Collections.swap(arr, pos, i);\n            }\n        }\n    // Driver code\n    public static void main(String args[])\n    {\n        ArrayList&lt;Integer&gt; arr= new ArrayList&lt;&gt;(Arrays.asList(3,3,8,8,9,9,9));\n        for(var v:get_permutations(arr)){\n            System.out.println(v);\n        }\n    }\n}\n</code></pre>\n<p>This is opposite to <a href=\"https://stackoverflow.com/questions/74083916/using-hashset-to-filter-duplicates-does-not-work-in-subsets-with-duplicate-probl\">subset solution</a>.</p>\n<p>The outputs highlighted in red part are the problem.</p>\n<p><a href=\"https://i.stack.imgur.com/gt1VL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gt1VL.png\" alt=\"enter image description here\" /></a></p>\n<p>What did I miss here?</p>\n"},{"tags":["java","postgresql","spring-boot","r2dbc"],"owner":{"account_id":3695262,"reputation":8590,"user_id":3391490,"accept_rate":100,"display_name":"Thirumal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1665934937,"creation_date":1665934937,"question_id":74088456,"body_markdown":"How to parse `infinity` in R2JDBC?  Getting the following error\r\n\r\n    java.time.format.DateTimeParseException: Text &#39;infinity&#39; could not be parsed at index 0\r\n    \tat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052) ~[na:na]\r\n    \tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1954) ~[na:na]\r\n    \tat io.r2dbc.postgresql.codec.PostgresqlDateTimeFormatter.parse(PostgresqlDateTimeFormatter.java:103","title":"How to parse Postgresql &#39;Infinity&#39; timestamp in R2JDBC?","body":"<p>How to parse <code>infinity</code> in R2JDBC?  Getting the following error</p>\n<pre><code>java.time.format.DateTimeParseException: Text 'infinity' could not be parsed at index 0\n    at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052) ~[na:na]\n    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1954) ~[na:na]\n    at io.r2dbc.postgresql.codec.PostgresqlDateTimeFormatter.parse(PostgresqlDateTimeFormatter.java:103\n</code></pre>\n"},{"tags":["java","spock"],"comments":[{"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"score":0,"creation_date":1665878327,"post_id":74081050,"comment_id":130802318,"body_markdown":"Please give us more information about your setup, such as what build tool you are using to build and run the tests. Is it Gradle, Maven, Ant. or something else?","body":"Please give us more information about your setup, such as what build tool you are using to build and run the tests. Is it Gradle, Maven, Ant. or something else?"},{"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"score":0,"creation_date":1665945596,"post_id":74081050,"comment_id":130812836,"body_markdown":"I would suggest to do a `reporTest` task in gradle that depends on the `test` task and does whatever you need, e.g., zip up the results and upload them somewhere or send a slack message, and then just run that task.","body":"I would suggest to do a <code>reporTest</code> task in gradle that depends on the <code>test</code> task and does whatever you need, e.g., zip up the results and upload them somewhere or send a slack message, and then just run that task."}],"owner":{"account_id":4118510,"reputation":223,"user_id":3379502,"accept_rate":22,"display_name":"user3379502"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665934478,"creation_date":1665850097,"question_id":74081050,"body_markdown":"All, I have a test suite developed using spock-groovy framework. The output of this is a set of html files. I have a requirement to run this test as part of a docker container on cloud. After the test execution, I would like to get a summary of the test results and also a link of the html files to view the details of these results.\r\nIs there a library already available for parsing the test results for spock? How can I get this done using Java from the app running in the container?\r\n\r\nBuild tool: `gradle`.\r\n\r\nI created the docker container using the Dockerfile. The entrypoint for this docker container is a shell script which sets required variables and then executes the command `gradle clean test...`. \r\n\r\nFew issues I am trying to resolve:\r\n1. The container is able to execute the tests but I am unable to get the results out of that container. I am trying the approach as mentioned in point 2 below to get the results out of the container.\r\n2. I have added `def cleanupSpec() {....}` method where I am trying to send a notification to slack channel. As I see from inside the container, this step is not getting executed. When I run this app locally, I am able to see the notification being sent. ","title":"Parsing through spock test results","body":"<p>All, I have a test suite developed using spock-groovy framework. The output of this is a set of html files. I have a requirement to run this test as part of a docker container on cloud. After the test execution, I would like to get a summary of the test results and also a link of the html files to view the details of these results.\nIs there a library already available for parsing the test results for spock? How can I get this done using Java from the app running in the container?</p>\n<p>Build tool: <code>gradle</code>.</p>\n<p>I created the docker container using the Dockerfile. The entrypoint for this docker container is a shell script which sets required variables and then executes the command <code>gradle clean test...</code>.</p>\n<p>Few issues I am trying to resolve:</p>\n<ol>\n<li>The container is able to execute the tests but I am unable to get the results out of that container. I am trying the approach as mentioned in point 2 below to get the results out of the container.</li>\n<li>I have added <code>def cleanupSpec() {....}</code> method where I am trying to send a notification to slack channel. As I see from inside the container, this step is not getting executed. When I run this app locally, I am able to see the notification being sent.</li>\n</ol>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1665813484,"post_id":74077041,"comment_id":130790741,"body_markdown":"Variable `answer` is a `String`. You are trying to compare a `String` to a `char`. You cannot do that in Java. Try: `if (&quot;Y&quot;.equalsIgnoreCase(answer))`","body":"Variable <code>answer</code> is a <code>String</code>. You are trying to compare a <code>String</code> to a <code>char</code>. You cannot do that in Java. Try: <code>if (&quot;Y&quot;.equalsIgnoreCase(answer))</code>"}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1665894391,"post_id":74077138,"comment_id":130803834,"body_markdown":"*&quot;Since the answer variable is not stored as a string, change its variable type to `char`.&quot;* - That won&#39;t work.  There is no `Scanner` method to read a single `char`.","body":"<i>&quot;Since the answer variable is not stored as a string, change its variable type to <code>char</code>.&quot;</i> - That won&#39;t work.  There is no <code>Scanner</code> method to read a single <code>char</code>."}],"tags":[],"owner":{"account_id":25783273,"reputation":97,"user_id":19528572,"display_name":"Tharindu Lakshan"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1665818824,"creation_date":1665814424,"answer_id":74077138,"question_id":74077041,"body_markdown":"Since the answer variable is not stored as a string, change its variable type to char.\r\nAlso, use the following code to get the letter entered by the user.\r\n\r\n    answer = scan.next().charAt(0);\r\n\r\nUse the following\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class FullName {\r\n\t    public static void main(String[]args) {\r\n\t\t    String firstName = &quot; &quot;, middleName = &quot; &quot;, lastName = &quot; &quot;;\r\n\t    \tString in;  // checks for input\r\n\t\t    char answer;  // checks for condition, YES OR NO\r\n\t\t    boolean ask;    // use as a loop switch\r\n\t\t\r\n\t\t    Scanner scan = new Scanner(System.in);\r\n\t\t\r\n\t    \tdo {\r\n\t\t    \tSystem.out.print(&quot;Please indicate your full name: &quot;);\r\n\t\t    \tin = scan.nextLine();\r\n\t\t    \t//ask = scan.hasNext(in);\r\n\t\t    \tString str = String.format(&quot;My name is %s %s %s &quot;, firstName, middleName, lastName);\r\n\t\t        System.out.println(&quot;Do you want to try again? (Y/N )&quot;);\r\n\t\t    \tanswer = scan.next().charAt(0);\r\n\t\t    \tif(answer==&#39;y&#39; || answer==&#39;Y&#39;) {\r\n\t\t\t    \task = true;\r\n\t\t\t    } else {\r\n\t\t\t    \task = false;\r\n\t\t\t    }\r\n\t\t    \tscan.nextLine();\r\n\t    \t} while(ask == true);\r\n\t    }\r\n    }\r\n","title":"How can I create an interactive program that ask for user&#39;s full name and display it everytime he wants to try again?","body":"<p>Since the answer variable is not stored as a string, change its variable type to char.\nAlso, use the following code to get the letter entered by the user.</p>\n<pre><code>answer = scan.next().charAt(0);\n</code></pre>\n<p>Use the following</p>\n<pre><code>import java.util.Scanner;\n\npublic class FullName {\n    public static void main(String[]args) {\n        String firstName = &quot; &quot;, middleName = &quot; &quot;, lastName = &quot; &quot;;\n        String in;  // checks for input\n        char answer;  // checks for condition, YES OR NO\n        boolean ask;    // use as a loop switch\n    \n        Scanner scan = new Scanner(System.in);\n    \n        do {\n            System.out.print(&quot;Please indicate your full name: &quot;);\n            in = scan.nextLine();\n            //ask = scan.hasNext(in);\n            String str = String.format(&quot;My name is %s %s %s &quot;, firstName, middleName, lastName);\n            System.out.println(&quot;Do you want to try again? (Y/N )&quot;);\n            answer = scan.next().charAt(0);\n            if(answer=='y' || answer=='Y') {\n                ask = true;\n            } else {\n                ask = false;\n            }\n            scan.nextLine();\n        } while(ask == true);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665819598,"creation_date":1665818847,"answer_id":74077529,"question_id":74077041,"body_markdown":"Let&#39;s just focus on these lines:\r\n\r\n        String answer;\r\n        ...\r\n        answer = scan.next();\r\n        if (answer == &#39;y&#39; || answer == &#39;Y&#39;) {\r\n\r\n1.  You will notice that I have tweaked the the style to make it more readable and consist with common Java style rules.\r\n\r\n2.  You will notice that I have fixed a compilation error by changing `Next()` to `next()`.\r\n\r\nBut now for the interesting part:\r\n\r\n      answer == &#39;y&#39; || answer == &#39;Y&#39;\r\n\r\nWhat you are trying to do here is test if the user is trying to reply in the affirmative or the negative; i.e. a response to your `&quot;(Y/N)&quot; question.\r\n\r\nThere are both technical and logical problems in the way you are doing it.  The technical problem is that `answer == &#39;y&#39;` tries to compare a `String` and a `char` using `==`.  Java doesn&#39;t allow that.  \r\n  \r\n  - This is what the compilation error about &quot;bad operand types for `==`&quot; is saying.\r\n  - `String` and `char` are different types.\r\n  - `&#39;Y&#39;` and `&quot;Y&quot;` are not the same value.\r\n  - Expressions of the form &quot;string == char&quot; or &quot;char == string&quot; are not allowed.\r\n  - You shouldn&#39;t compare strings using `==` anyway; see https://stackoverflow.com/questions/513832.\r\n\r\nSo if you were just going to compare (one character) `String` with a `char`, there are a few ways to do it; e.g.\r\n\r\n    answer.charAt(0) == &#39;y&#39; \r\n\r\nor \r\n\r\n    Character.toString(&#39;y&#39;).equals(answer)\r\n\r\n(In this context `charAt(0)` is safe.  You are using the default `Scanner` delimiter, so `next()` is going to return a `String` with length of at least 1.)\r\n\r\nBut it would be simpler to do a `String` to `String` comparison:\r\n\r\n    answer.equals(&quot;y&quot;) \r\n\r\nor \r\n   \r\n    &quot;y&quot;.equals(answer)\r\n\r\nThe latter has the advantage *in some contexts* that `&quot;y&quot;` can never be `null` so you will avoid possible NPEs.\r\n\r\nNow for the logical problem.  You have asked the user to respond to a `(Y/N)` question.  But you are actually using `Scanner` to read a word (loosely speaking) so you may get one character, or more than one.  Also, you are assuming that if the answer is not `y` or `Y`, then that means &quot;no&quot;.  But what if the user enters `&quot;yes&quot;` ... or `&quot;fish&quot;`?  There are more possible answers to consider than the ones that you are expecting.\r\n\r\nIf I was marking this exercise, I would deduct a mark or two (out of ten) for not properly validating the user&#39;s input.  ","title":"How can I create an interactive program that ask for user&#39;s full name and display it everytime he wants to try again?","body":"<p>Let's just focus on these lines:</p>\n<pre><code>    String answer;\n    ...\n    answer = scan.next();\n    if (answer == 'y' || answer == 'Y') {\n</code></pre>\n<ol>\n<li><p>You will notice that I have tweaked the the style to make it more readable and consist with common Java style rules.</p>\n</li>\n<li><p>You will notice that I have fixed a compilation error by changing <code>Next()</code> to <code>next()</code>.</p>\n</li>\n</ol>\n<p>But now for the interesting part:</p>\n<pre><code>  answer == 'y' || answer == 'Y'\n</code></pre>\n<p>What you are trying to do here is test if the user is trying to reply in the affirmative or the negative; i.e. a response to your `&quot;(Y/N)&quot; question.</p>\n<p>There are both technical and logical problems in the way you are doing it.  The technical problem is that <code>answer == 'y'</code> tries to compare a <code>String</code> and a <code>char</code> using <code>==</code>.  Java doesn't allow that.</p>\n<ul>\n<li>This is what the compilation error about &quot;bad operand types for <code>==</code>&quot; is saying.</li>\n<li><code>String</code> and <code>char</code> are different types.</li>\n<li><code>'Y'</code> and <code>&quot;Y&quot;</code> are not the same value.</li>\n<li>Expressions of the form &quot;string == char&quot; or &quot;char == string&quot; are not allowed.</li>\n<li>You shouldn't compare strings using <code>==</code> anyway; see <a href=\"https://stackoverflow.com/questions/513832\">How do I compare strings in Java?</a>.</li>\n</ul>\n<p>So if you were just going to compare (one character) <code>String</code> with a <code>char</code>, there are a few ways to do it; e.g.</p>\n<pre><code>answer.charAt(0) == 'y' \n</code></pre>\n<p>or</p>\n<pre><code>Character.toString('y').equals(answer)\n</code></pre>\n<p>(In this context <code>charAt(0)</code> is safe.  You are using the default <code>Scanner</code> delimiter, so <code>next()</code> is going to return a <code>String</code> with length of at least 1.)</p>\n<p>But it would be simpler to do a <code>String</code> to <code>String</code> comparison:</p>\n<pre><code>answer.equals(&quot;y&quot;) \n</code></pre>\n<p>or</p>\n<pre><code>&quot;y&quot;.equals(answer)\n</code></pre>\n<p>The latter has the advantage <em>in some contexts</em> that <code>&quot;y&quot;</code> can never be <code>null</code> so you will avoid possible NPEs.</p>\n<p>Now for the logical problem.  You have asked the user to respond to a <code>(Y/N)</code> question.  But you are actually using <code>Scanner</code> to read a word (loosely speaking) so you may get one character, or more than one.  Also, you are assuming that if the answer is not <code>y</code> or <code>Y</code>, then that means &quot;no&quot;.  But what if the user enters <code>&quot;yes&quot;</code> ... or <code>&quot;fish&quot;</code>?  There are more possible answers to consider than the ones that you are expecting.</p>\n<p>If I was marking this exercise, I would deduct a mark or two (out of ten) for not properly validating the user's input.</p>\n"}],"owner":{"account_id":19534879,"reputation":25,"user_id":14293869,"display_name":"Joshua Partido"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74077529,"answer_count":2,"score":-1,"last_activity_date":1665933562,"creation_date":1665813253,"question_id":74077041,"body_markdown":"My code looks like this; it get&#39;s an error on line 18 \r\n\r\n&gt; error: bad operand types for binary operator &#39;==&#39; if(answer==&#39;y&#39;||answer==&#39;Y&#39;) {\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class FullName {\r\n\r\n    public static void main(String[]args) {\r\n        String firstName = &quot; &quot;, middleName = &quot; &quot;, lastName = &quot; &quot;;\r\n        String in;  // checks for input\r\n        String answer;  // checks for condition, YES OR NO\r\n        boolean ask;    // use as a loop switch\r\n        \r\n        Scanner scan = new Scanner(System.in);\r\n        \r\n        do {\r\n            System.out.println(&quot;Please indicate your full name: &quot;);\r\n            in = scan.nextLine();\r\n            ask = scan.hasNext(in);\r\n            String str = String.format(&quot;My name is %s %s %s &quot;, firstName, middleName, lastName);\r\n            System.out.println(&quot;Do you want to try again? (Y/N )&quot;);\r\n            answer = scan.Next();\r\n            if(answer==&#39;y&#39; || answer==&#39;Y&#39;) {\r\n                ask = true;\r\n            } else {\r\n                ask = false;\r\n            }\r\n        } while(ask == true);\r\n    }\r\n}\r\n```","title":"How can I create an interactive program that ask for user&#39;s full name and display it everytime he wants to try again?","body":"<p>My code looks like this; it get's an error on line 18</p>\n<blockquote>\n<p>error: bad operand types for binary operator '==' if(answer=='y'||answer=='Y') {</p>\n</blockquote>\n<pre><code>import java.util.Scanner;\n\npublic class FullName {\n\n    public static void main(String[]args) {\n        String firstName = &quot; &quot;, middleName = &quot; &quot;, lastName = &quot; &quot;;\n        String in;  // checks for input\n        String answer;  // checks for condition, YES OR NO\n        boolean ask;    // use as a loop switch\n        \n        Scanner scan = new Scanner(System.in);\n        \n        do {\n            System.out.println(&quot;Please indicate your full name: &quot;);\n            in = scan.nextLine();\n            ask = scan.hasNext(in);\n            String str = String.format(&quot;My name is %s %s %s &quot;, firstName, middleName, lastName);\n            System.out.println(&quot;Do you want to try again? (Y/N )&quot;);\n            answer = scan.Next();\n            if(answer=='y' || answer=='Y') {\n                ask = true;\n            } else {\n                ask = false;\n            }\n        } while(ask == true);\n    }\n}\n</code></pre>\n"},{"tags":["java","scala","apache-spark","intellij-idea","sbt"],"answers":[{"comments":[{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1665944407,"post_id":74088227,"comment_id":130812615,"body_markdown":"Provided dependency are not included when packaging but they do are present when testing from the IDE. It&#39;s not clear from OP how the code is run.","body":"Provided dependency are not included when packaging but they do are present when testing from the IDE. It&#39;s not clear from OP how the code is run."}],"tags":[],"owner":{"account_id":189125,"reputation":771,"user_id":428273,"accept_rate":30,"display_name":"Muton"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665933528,"creation_date":1665933206,"answer_id":74088227,"question_id":74086869,"body_markdown":"You are defining the `spark-sql` dependency as `provided` so by default it will not be in the classpath when you execute the code locally.\r\n\r\nYou can either remove the provided scope if your intention is to just test things out or alternatively you can setup your IDE to include the provided dependencies also. In IntelliJ, this can be done from the run configuration options.","title":"Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/spark/sql/SparkSession$ in scala","body":"<p>You are defining the <code>spark-sql</code> dependency as <code>provided</code> so by default it will not be in the classpath when you execute the code locally.</p>\n<p>You can either remove the provided scope if your intention is to just test things out or alternatively you can setup your IDE to include the provided dependencies also. In IntelliJ, this can be done from the run configuration options.</p>\n"}],"owner":{"account_id":26639068,"reputation":11,"user_id":20255044,"display_name":"llD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665933528,"creation_date":1665921066,"question_id":74086869,"body_markdown":"I have built a Spark project with SBT, Scala in intelliJ and written the code:\r\n```\r\nimport org.apache.spark.sql.SparkSession\r\nobject Main {\r\n  def main(args: Array[String]): Unit = {\r\n    val spark =\r\n      SparkSession\r\n        .builder()\r\n      .master(&quot;local[1]&quot;)\r\n      .appName(&quot;SparkByExample&quot;)\r\n      .getOrCreate();\r\n\r\n  }\r\n}\r\n```\r\nand get the error :\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/spark/sql/SparkSession$\r\n\tat com.bigdata.Main$.main(Main.scala:6)\r\n\tat com.bigdata.Main.main(Main.scala)\r\nCaused by: java.lang.ClassNotFoundException: org.apache.spark.sql.SparkSession$\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n\t... 2 more\r\n```\r\n\r\nmy bulid.stb :\r\n```\r\nThisBuild / version := &quot;0.1.0-SNAPSHOT&quot;\r\n\r\nThisBuild / scalaVersion := &quot;2.12.15&quot;\r\n\r\n// https://mvnrepository.com/artifact/org.apache.spark/spark-sql\r\nlibraryDependencies += &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;3.3.0&quot; % &quot;provided&quot;\r\n\r\n// https://mvnrepository.com/artifact/org.apache.spark/spark-core\r\nlibraryDependencies += &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;3.3.0&quot;\r\n\r\n\r\nlazy val root = (project in file(&quot;.&quot;))\r\n  .settings(\r\n    name := &quot;untitled&quot;,\r\n    idePackagePrefix := Some(&quot;com.bigdata&quot;)\r\n  )\r\n\r\n```\r\nI see SPARK_HOME in path and it is fine\r\nI tried to open another project and still has the problem  ","title":"Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/spark/sql/SparkSession$ in scala","body":"<p>I have built a Spark project with SBT, Scala in intelliJ and written the code:</p>\n<pre><code>import org.apache.spark.sql.SparkSession\nobject Main {\n  def main(args: Array[String]): Unit = {\n    val spark =\n      SparkSession\n        .builder()\n      .master(&quot;local[1]&quot;)\n      .appName(&quot;SparkByExample&quot;)\n      .getOrCreate();\n\n  }\n}\n</code></pre>\n<p>and get the error :</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/spark/sql/SparkSession$\n    at com.bigdata.Main$.main(Main.scala:6)\n    at com.bigdata.Main.main(Main.scala)\nCaused by: java.lang.ClassNotFoundException: org.apache.spark.sql.SparkSession$\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n    ... 2 more\n</code></pre>\n<p>my bulid.stb :</p>\n<pre><code>ThisBuild / version := &quot;0.1.0-SNAPSHOT&quot;\n\nThisBuild / scalaVersion := &quot;2.12.15&quot;\n\n// https://mvnrepository.com/artifact/org.apache.spark/spark-sql\nlibraryDependencies += &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % &quot;3.3.0&quot; % &quot;provided&quot;\n\n// https://mvnrepository.com/artifact/org.apache.spark/spark-core\nlibraryDependencies += &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % &quot;3.3.0&quot;\n\n\nlazy val root = (project in file(&quot;.&quot;))\n  .settings(\n    name := &quot;untitled&quot;,\n    idePackagePrefix := Some(&quot;com.bigdata&quot;)\n  )\n\n</code></pre>\n<p>I see SPARK_HOME in path and it is fine\nI tried to open another project and still has the problem</p>\n"},{"tags":["java","user-interface"],"comments":[{"owner":{"account_id":19097920,"reputation":89,"user_id":13946806,"display_name":"Nili"},"score":0,"creation_date":1665856395,"post_id":74081667,"comment_id":130798772,"body_markdown":"Can you post the code where you use this class cause it seems fine?","body":"Can you post the code where you use this class cause it seems fine?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1665871685,"post_id":74081667,"comment_id":130801610,"body_markdown":"Post an [mre] demonstrating the problem. We should be able to copy/paste/compile/test to see the problem. In addition to the above we need to see how you create the frame and add the LabeledComponent to the frame. Code should be in a single source file.","body":"Post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. We should be able to copy/paste/compile/test to see the problem. In addition to the above we need to see how you create the frame and add the LabeledComponent to the frame. Code should be in a single source file."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1665873049,"post_id":74081667,"comment_id":130801758,"body_markdown":"*IllegalArgumentException* - and what does the full message say?","body":"<i>IllegalArgumentException</i> - and what does the full message say?"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1666217222,"post_id":74088254,"comment_id":130886653,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/74088254/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26218354,"reputation":27,"user_id":19896194,"display_name":"smilly"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665933389,"creation_date":1665933373,"answer_id":74088254,"question_id":74081667,"body_markdown":"new JSlider(1, 10, 21); causes IllegalArgumentException because JSlider Constructor takes minvalue, maxvalue and value. 21 is out of bounds.","title":"Adding JComponent with JLabel to another JPanel causes IllegalArgumentException","body":"<p>new JSlider(1, 10, 21); causes IllegalArgumentException because JSlider Constructor takes minvalue, maxvalue and value. 21 is out of bounds.</p>\n"}],"owner":{"account_id":26218354,"reputation":27,"user_id":19896194,"display_name":"smilly"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665933389,"creation_date":1665855417,"question_id":74081667,"body_markdown":"I was wondering how to label my buttons, sliders, etc. properly, so I came up with a solution that I found to be quiet good since I&#39;m new to gui development.\r\n\r\nThis class below should allow me to label any JComponent and set the label position to North,East,South or West of the JComponent.\r\n\r\nUnfortunately `new LabeledComponent&lt;&gt;(&quot;Depth&quot;, new JSlider(1, 10, 21), LabeledComponent.LabelPosition.North);` runs into an IllegalArgumentException but why?\r\n\r\nIs there something wrong with the Generics ?\r\n\r\n\r\n        public class LabeledComponent&lt;E extends JComponent&gt; extends JPanel {\r\n    \r\n        public enum LabelPosition {\r\n            North,\r\n            South,\r\n            East,\r\n            West\r\n        }\r\n    \r\n        public LabeledComponent(String label, E component, LabelPosition position) {\r\n            JLabel label1 = new JLabel(label);\r\n            switch (position) {\r\n                case North -&gt; {\r\n                    setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\r\n                    add(label1);\r\n                    add(component);\r\n                }\r\n                case South -&gt; {\r\n                    setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\r\n                    add(component);\r\n                    add(label1);\r\n                }\r\n                case East -&gt; {\r\n                    setLayout(new FlowLayout());\r\n                    add(component);\r\n                    add(label1);\r\n                }\r\n                case West -&gt; {\r\n                    setLayout(new FlowLayout());\r\n                    add(label1);\r\n                    add(component);\r\n                }\r\n            }\r\n    \r\n    \r\n        }\r\n    \r\n    }\r\n\r\n","title":"Adding JComponent with JLabel to another JPanel causes IllegalArgumentException","body":"<p>I was wondering how to label my buttons, sliders, etc. properly, so I came up with a solution that I found to be quiet good since I'm new to gui development.</p>\n<p>This class below should allow me to label any JComponent and set the label position to North,East,South or West of the JComponent.</p>\n<p>Unfortunately <code>new LabeledComponent&lt;&gt;(&quot;Depth&quot;, new JSlider(1, 10, 21), LabeledComponent.LabelPosition.North);</code> runs into an IllegalArgumentException but why?</p>\n<p>Is there something wrong with the Generics ?</p>\n<pre><code>    public class LabeledComponent&lt;E extends JComponent&gt; extends JPanel {\n\n    public enum LabelPosition {\n        North,\n        South,\n        East,\n        West\n    }\n\n    public LabeledComponent(String label, E component, LabelPosition position) {\n        JLabel label1 = new JLabel(label);\n        switch (position) {\n            case North -&gt; {\n                setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n                add(label1);\n                add(component);\n            }\n            case South -&gt; {\n                setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n                add(component);\n                add(label1);\n            }\n            case East -&gt; {\n                setLayout(new FlowLayout());\n                add(component);\n                add(label1);\n            }\n            case West -&gt; {\n                setLayout(new FlowLayout());\n                add(label1);\n                add(component);\n            }\n        }\n\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","xml","android-studio","android-scrollview"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1665929716,"post_id":74087757,"comment_id":130809325,"body_markdown":"Please provide code as [formatted text](https://meta.stackoverflow.com/a/285557/12567365), not as screenshots. If you have not already done so, take a look at [ask] and try to [edit] your question to provide a [mre].","body":"Please provide code as <a href=\"https://meta.stackoverflow.com/a/285557/12567365\">formatted text</a>, not as screenshots. If you have not already done so, take a look at <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and try to <a href=\"https://stackoverflow.com/posts/74087757/edit\">edit</a> your question to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1665929814,"post_id":74087757,"comment_id":130809352,"body_markdown":"You can also read the guidance provided in [How do I ask and answer homework questions?](https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions) if this is a school assignment (but even if it isn&#39;t, the guidance is still worth reading).","body":"You can also read the guidance provided in <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">How do I ask and answer homework questions?</a> if this is a school assignment (but even if it isn&#39;t, the guidance is still worth reading)."}],"owner":{"account_id":25997193,"reputation":1,"user_id":19708356,"display_name":"Joshua Musa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665933318,"creation_date":1665928966,"question_id":74087757,"body_markdown":"I have been trying to make an application for a school but I ran into some problems. I am trying to make the User Details page scrollable but the constraint layout stacks up at the top: \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/apHXl.png\r\n\r\n```XML\r\n\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\r\n&lt;ScrollView android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    tools:context=&quot;.MainActivity&quot;\r\n    android:background=&quot;#9F9F9F&quot;&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;250dp&quot;\r\n            android:background=&quot;@drawable/user_bg&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/userprofile&quot;\r\n            android:layout_width=&quot;150dp&quot;\r\n            android:layout_height=&quot;150dp&quot;\r\n            android:background=&quot;@drawable/no_profile_pic&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.27&quot;\r\n            android:contentDescription=&quot;User Profile&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/userprofilename&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:hint=&quot;Loading...&quot;\r\n            android:text=&quot;Loading...&quot;\r\n            android:textSize=&quot;17sp&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.45&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/background&quot;\r\n            android:layout_width=&quot;380dp&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:background=&quot;@drawable/button_bg&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/ic_image&quot;\r\n            android:layout_width=&quot;25dp&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:background=&quot;@drawable/ic_profile&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/background&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/background&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/background&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/background&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/userid&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:text=&quot;Loding...&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:layout_marginStart=&quot;80dp&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/background&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/background&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/background&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/background&quot;/&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/bg2&quot;\r\n            android:layout_width=&quot;380dp&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:background=&quot;@drawable/button_bg&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.63&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/ic_class&quot;\r\n            android:layout_width=&quot;25dp&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:background=&quot;@drawable/ic_baseline_class_24&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg2&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg2&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg2&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg2&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/userclass&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:text=&quot;Loding...&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:layout_marginStart=&quot;80dp&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg2&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg2&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg2&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg2&quot;/&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/bg3&quot;\r\n            android:layout_width=&quot;380dp&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:background=&quot;@drawable/button_bg&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.74&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/ic_dob&quot;\r\n            android:layout_width=&quot;25dp&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:background=&quot;@drawable/ic_birthday&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg3&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg3&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg3&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg3&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/userdob&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:text=&quot;Loding...&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:layout_marginStart=&quot;80dp&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg3&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg3&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg3&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg3&quot;/&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/bg4&quot;\r\n            android:layout_width=&quot;380dp&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:background=&quot;@drawable/button_bg&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.85&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/ic_num&quot;\r\n            android:layout_width=&quot;25dp&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:background=&quot;@drawable/ic_mobile&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg4&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg2&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg4&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg4&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/usernum&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:text=&quot;Loading...&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:layout_marginStart=&quot;80dp&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg4&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg4&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg4&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg4&quot;/&gt;\r\n\r\n        &lt;View\r\n            android:id=&quot;@+id/bg5&quot;\r\n            android:layout_width=&quot;380dp&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:background=&quot;@drawable/button_bg&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.96&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/ic_gender&quot;\r\n            android:layout_width=&quot;25dp&quot;\r\n            android:layout_height=&quot;25dp&quot;\r\n            android:background=&quot;@drawable/ic_gender&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg5&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg2&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg5&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg5&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/usergender&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:text=&quot;Loading...&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:layout_marginStart=&quot;80dp&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg5&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg5&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg5&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg5&quot;/&gt;\r\n\r\n        &lt;com.google.android.material.bottomnavigation.BottomNavigationView\r\n            android:id=&quot;@+id/bottom_nav&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;#9F9F9F&quot;\r\n            android:paddingLeft=&quot;20dp&quot;\r\n            android:paddingRight=&quot;20dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:menu=&quot;@menu/bottom_nav_menu&quot; /&gt;\r\n\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n&lt;/ScrollView&gt;\r\n```\r\n\r\nI have tried using minHeight but it doesn&#39;t give me my desired result. I have also watch many tutorials on how to create a scrollable view but none have answered my question.","title":"Constraint layout stacks at the top when using scrollview","body":"<p>I have been trying to make an application for a school but I ran into some problems. I am trying to make the User Details page scrollable but the constraint layout stacks up at the top:</p>\n<p><a href=\"https://i.stack.imgur.com/apHXl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/apHXl.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n\n&lt;ScrollView android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    tools:context=&quot;.MainActivity&quot;\n    android:background=&quot;#9F9F9F&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;250dp&quot;\n            android:background=&quot;@drawable/user_bg&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/userprofile&quot;\n            android:layout_width=&quot;150dp&quot;\n            android:layout_height=&quot;150dp&quot;\n            android:background=&quot;@drawable/no_profile_pic&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.27&quot;\n            android:contentDescription=&quot;User Profile&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/userprofilename&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:hint=&quot;Loading...&quot;\n            android:text=&quot;Loading...&quot;\n            android:textSize=&quot;17sp&quot;\n            app:layout_constraintVertical_bias=&quot;0.45&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n        &lt;View\n            android:id=&quot;@+id/background&quot;\n            android:layout_width=&quot;380dp&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:background=&quot;@drawable/button_bg&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/ic_image&quot;\n            android:layout_width=&quot;25dp&quot;\n            android:layout_height=&quot;25dp&quot;\n            android:background=&quot;@drawable/ic_profile&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/background&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/background&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/background&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/background&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/userid&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:text=&quot;Loding...&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:layout_marginStart=&quot;80dp&quot;\n            android:gravity=&quot;center_vertical&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/background&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/background&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/background&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/background&quot;/&gt;\n\n        &lt;View\n            android:id=&quot;@+id/bg2&quot;\n            android:layout_width=&quot;380dp&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:background=&quot;@drawable/button_bg&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.63&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/ic_class&quot;\n            android:layout_width=&quot;25dp&quot;\n            android:layout_height=&quot;25dp&quot;\n            android:background=&quot;@drawable/ic_baseline_class_24&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg2&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg2&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg2&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg2&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/userclass&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:text=&quot;Loding...&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:layout_marginStart=&quot;80dp&quot;\n            android:gravity=&quot;center_vertical&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg2&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg2&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg2&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg2&quot;/&gt;\n\n        &lt;View\n            android:id=&quot;@+id/bg3&quot;\n            android:layout_width=&quot;380dp&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:background=&quot;@drawable/button_bg&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.74&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/ic_dob&quot;\n            android:layout_width=&quot;25dp&quot;\n            android:layout_height=&quot;25dp&quot;\n            android:background=&quot;@drawable/ic_birthday&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg3&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg3&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg3&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg3&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/userdob&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:text=&quot;Loding...&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:layout_marginStart=&quot;80dp&quot;\n            android:gravity=&quot;center_vertical&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg3&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg3&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg3&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg3&quot;/&gt;\n\n        &lt;View\n            android:id=&quot;@+id/bg4&quot;\n            android:layout_width=&quot;380dp&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:background=&quot;@drawable/button_bg&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.85&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/ic_num&quot;\n            android:layout_width=&quot;25dp&quot;\n            android:layout_height=&quot;25dp&quot;\n            android:background=&quot;@drawable/ic_mobile&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg4&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg2&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg4&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg4&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/usernum&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:text=&quot;Loading...&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:layout_marginStart=&quot;80dp&quot;\n            android:gravity=&quot;center_vertical&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg4&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg4&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg4&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg4&quot;/&gt;\n\n        &lt;View\n            android:id=&quot;@+id/bg5&quot;\n            android:layout_width=&quot;380dp&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:background=&quot;@drawable/button_bg&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintVertical_bias=&quot;0.96&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/ic_gender&quot;\n            android:layout_width=&quot;25dp&quot;\n            android:layout_height=&quot;25dp&quot;\n            android:background=&quot;@drawable/ic_gender&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg5&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg2&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg5&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg5&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/usergender&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;60dp&quot;\n            android:text=&quot;Loading...&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:layout_marginStart=&quot;80dp&quot;\n            android:gravity=&quot;center_vertical&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.05&quot;\n            app:layout_constraintVertical_bias=&quot;0.52&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/bg5&quot;\n            app:layout_constraintEnd_toEndOf=&quot;@+id/bg5&quot;\n            app:layout_constraintStart_toStartOf=&quot;@+id/bg5&quot;\n            app:layout_constraintTop_toTopOf=&quot;@+id/bg5&quot;/&gt;\n\n        &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n            android:id=&quot;@+id/bottom_nav&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:background=&quot;#9F9F9F&quot;\n            android:paddingLeft=&quot;20dp&quot;\n            android:paddingRight=&quot;20dp&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:menu=&quot;@menu/bottom_nav_menu&quot; /&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;/ScrollView&gt;\n</code></pre>\n<p>I have tried using minHeight but it doesn't give me my desired result. I have also watch many tutorials on how to create a scrollable view but none have answered my question.</p>\n"},{"tags":["java","selenium","google-chrome","selenium-chromedriver"],"comments":[{"owner":{"account_id":18121436,"reputation":786,"user_id":13177404,"display_name":"mkhurmi"},"score":0,"creation_date":1588191199,"post_id":61510633,"comment_id":108809069,"body_markdown":"did you really want to check the flow or just want to download the pdf? For that you can use DesiredCapabilities.","body":"did you really want to check the flow or just want to download the pdf? For that you can use DesiredCapabilities."},{"owner":{"account_id":2907292,"reputation":2568,"user_id":2492264,"accept_rate":64,"display_name":"Archit Arora"},"score":0,"creation_date":1588191364,"post_id":61510633,"comment_id":108809152,"body_markdown":"I have to check the flow and interact with this window","body":"I have to check the flow and interact with this window"}],"owner":{"account_id":2907292,"reputation":2568,"user_id":2492264,"accept_rate":64,"display_name":"Archit Arora"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1953,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1665932402,"creation_date":1588190437,"question_id":61510633,"body_markdown":"I have a print button in my application. This print button opens a PDF in a new window. On top of this window is the Print icon that can be clicked to open a Chrome&#39;s print preview window where one can select &quot;Save as PDF&quot; option to save the PDF file.\r\n\r\nI would like to test this flow in selenium. \r\n\r\n--- I click the Print button on my webpage. This opens a new Chrome window with the PDF\r\n \r\n    driver.findElement(By.cssSelector(&quot;ID&quot;)).click();\r\n\r\n--- I switch to the newly opened Chrome window\r\n\r\n    driver.switchTo().window(driver.getWindowHandles().toArray()[1].toString());\r\n\r\nI can see in the Logs that selenium is indeed switching to the new window.\r\n\r\n--- I try to get the element &lt;viewer-pdf-toolbar&gt; of the new Chrome window opened \r\n\r\n    driver.findElement(By.cssSelector(&quot;viewer-pdf-toolbar&quot;))\r\n\r\nThis is where the issue is. Selenium is unable to interact with this newly opened window and cant find this element. When I inspect the newly opened window I see the following DOM structure -\r\n\r\n    &lt;body&gt; \r\n        &lt;viewer-pdf-toolbar id=&quot;toolbar&quot;&gt;&lt;/viewer-pdf-toolbar&gt;\r\n        &lt;div id=&quot;sizer&quot; style=&quot;width: 735px; height: 1092px;&quot;&gt;&lt;/div&gt;\r\n        &lt;viewer-password-screen id=&quot;password-screen&quot;&gt;&lt;/viewer-password-screen&gt;\r\n        ...\r\n        ..\r\n        .\r\n    &lt;/div&gt;\r\n\r\nThe element I&#39;m looking for does exist in the DOM structure and I can access it via Console but I cant access it using Selenium. You can view this DOM by opening any PDF file in Chrome browser and inspecting the window. \r\nAny ideas why this is happening?\r\n\r\nNote : When the new window loads, for a second or two it shows &quot;Printing, Please wait&quot; and then the PDF loaded. Not sure if this information is relevant to the problem here.\r\n\r\nAdditional Information -\r\n\r\nIn debug mode, after the Driver has switched to the new PDF window I evaluated - `driver.getCurrentUrl()` - this URL is the correct URL as displayed in the address bar of the preview window. This means that my driver is on the correct window.\r\n\r\nBut when I execute `driver.getPageSource` - I get the following output\r\n\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;/head&gt;\r\n    &lt;body style=&quot;height: 100%; width: 100%; overflow: hidden; margin:0px; background-color: rgb(82, 86, 89);&quot;&gt;\r\n    &lt;embed name=&quot;XXXXXXD474B71424EC89403FB4FA75CF&quot; style=&quot;position:absolute; left: 0; top: 0;&quot; width=&quot;100%&quot; height=&quot;100%&quot; src=&quot;about:blank&quot; type=&quot;application/pdf&quot; internalid=&quot;XXXXXXD474B71424EC89403FB4FA75CF&quot;&gt;&lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nSo the `driver` sees this as the page source whereas when I do an `inspect` on the same window I see a different DOM. Why is this happening? Is Chrome replacing the `&lt;embed&gt;` tag with the final DOM? How can selenium be made aware of this change?\r\n\r\n\r\nPlease help!","title":"Unable to access Elements of Chrome&#39;s PDF preview window using Selenium","body":"<p>I have a print button in my application. This print button opens a PDF in a new window. On top of this window is the Print icon that can be clicked to open a Chrome's print preview window where one can select \"Save as PDF\" option to save the PDF file.</p>\n\n<p>I would like to test this flow in selenium. </p>\n\n<p>--- I click the Print button on my webpage. This opens a new Chrome window with the PDF</p>\n\n<pre><code>driver.findElement(By.cssSelector(\"ID\")).click();\n</code></pre>\n\n<p>--- I switch to the newly opened Chrome window</p>\n\n<pre><code>driver.switchTo().window(driver.getWindowHandles().toArray()[1].toString());\n</code></pre>\n\n<p>I can see in the Logs that selenium is indeed switching to the new window.</p>\n\n<p>--- I try to get the element  of the new Chrome window opened </p>\n\n<pre><code>driver.findElement(By.cssSelector(\"viewer-pdf-toolbar\"))\n</code></pre>\n\n<p>This is where the issue is. Selenium is unable to interact with this newly opened window and cant find this element. When I inspect the newly opened window I see the following DOM structure -</p>\n\n<pre><code>&lt;body&gt; \n    &lt;viewer-pdf-toolbar id=\"toolbar\"&gt;&lt;/viewer-pdf-toolbar&gt;\n    &lt;div id=\"sizer\" style=\"width: 735px; height: 1092px;\"&gt;&lt;/div&gt;\n    &lt;viewer-password-screen id=\"password-screen\"&gt;&lt;/viewer-password-screen&gt;\n    ...\n    ..\n    .\n&lt;/div&gt;\n</code></pre>\n\n<p>The element I'm looking for does exist in the DOM structure and I can access it via Console but I cant access it using Selenium. You can view this DOM by opening any PDF file in Chrome browser and inspecting the window. \nAny ideas why this is happening?</p>\n\n<p>Note : When the new window loads, for a second or two it shows \"Printing, Please wait\" and then the PDF loaded. Not sure if this information is relevant to the problem here.</p>\n\n<p>Additional Information -</p>\n\n<p>In debug mode, after the Driver has switched to the new PDF window I evaluated - <code>driver.getCurrentUrl()</code> - this URL is the correct URL as displayed in the address bar of the preview window. This means that my driver is on the correct window.</p>\n\n<p>But when I execute <code>driver.getPageSource</code> - I get the following output</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body style=\"height: 100%; width: 100%; overflow: hidden; margin:0px; background-color: rgb(82, 86, 89);\"&gt;\n&lt;embed name=\"XXXXXXD474B71424EC89403FB4FA75CF\" style=\"position:absolute; left: 0; top: 0;\" width=\"100%\" height=\"100%\" src=\"about:blank\" type=\"application/pdf\" internalid=\"XXXXXXD474B71424EC89403FB4FA75CF\"&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>So the <code>driver</code> sees this as the page source whereas when I do an <code>inspect</code> on the same window I see a different DOM. Why is this happening? Is Chrome replacing the <code>&lt;embed&gt;</code> tag with the final DOM? How can selenium be made aware of this change?</p>\n\n<p>Please help!</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":1,"creation_date":1665930815,"post_id":74087719,"comment_id":130809570,"body_markdown":"You should add your curl/postman request to the question.","body":"You should add your curl/postman request to the question."}],"answers":[{"comments":[{"owner":{"account_id":20687710,"reputation":21,"user_id":15189779,"display_name":"Khaled El Attar"},"score":0,"creation_date":1665931214,"post_id":74087862,"comment_id":130809670,"body_markdown":"I added server.servlet.context-path=/api in a file.properties and edit @RequestMapping(&quot;/api/user&quot;) to @RequestMapping(&quot;/user&quot;). I still have the same problem when I send any request with the API of this project by path(for example, http://localhost:8082/api/user)","body":"I added server.servlet.context-path=/api in a file.properties and edit @RequestMapping(&quot;/api/user&quot;) to @RequestMapping(&quot;/user&quot;). I still have the same problem when I send any request with the API of this project by path(for example, <a href=\"http://localhost:8082/api/user\" rel=\"nofollow noreferrer\">localhost:8082/api/user</a>)"},{"owner":{"account_id":26308422,"reputation":126,"user_id":19972444,"display_name":"Neos"},"score":0,"creation_date":1665931319,"post_id":74087862,"comment_id":130809696,"body_markdown":"RequestMapping(&quot;/user&quot;) and have you tried localhost:8082/api/user/anyid ?","body":"RequestMapping(&quot;/user&quot;) and have you tried localhost:8082/api/user/anyid ?"},{"owner":{"account_id":20687710,"reputation":21,"user_id":15189779,"display_name":"Khaled El Attar"},"score":0,"creation_date":1665931397,"post_id":74087862,"comment_id":130809710,"body_markdown":"yes, i did that","body":"yes, i did that"},{"owner":{"account_id":26308422,"reputation":126,"user_id":19972444,"display_name":"Neos"},"score":0,"creation_date":1665931420,"post_id":74087862,"comment_id":130809713,"body_markdown":"can you show me the packages of your application ?","body":"can you show me the packages of your application ?"},{"owner":{"account_id":20687710,"reputation":21,"user_id":15189779,"display_name":"Khaled El Attar"},"score":0,"creation_date":1665931458,"post_id":74087862,"comment_id":130809722,"body_markdown":"{\n    &quot;timestamp&quot;: &quot;2022-10-16T14:43:46.845+00:00&quot;,\n    &quot;status&quot;: 404,\n    &quot;error&quot;: &quot;Not Found&quot;,\n    &quot;path&quot;: &quot;/api/user/1&quot;\n}","body":"{     &quot;timestamp&quot;: &quot;2022-10-16T14:43:46.845+00:00&quot;,     &quot;status&quot;: 404,     &quot;error&quot;: &quot;Not Found&quot;,     &quot;path&quot;: &quot;/api/user/1&quot; }"},{"owner":{"account_id":26308422,"reputation":126,"user_id":19972444,"display_name":"Neos"},"score":0,"creation_date":1665931702,"post_id":74087862,"comment_id":130809774,"body_markdown":"i need details about the packages within your application","body":"i need details about the packages within your application"},{"owner":{"account_id":20687710,"reputation":21,"user_id":15189779,"display_name":"Khaled El Attar"},"score":0,"creation_date":1665931914,"post_id":74087862,"comment_id":130809820,"body_markdown":"https://drive.google.com/file/d/1nQz50y9dDUfrmlO1kjDvB_zpbysjQtim/view?usp=sharing","body":"<a href=\"https://drive.google.com/file/d/1nQz50y9dDUfrmlO1kjDvB_zpbysjQtim/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1nQz50y9dDUfrmlO1kjDvB_zpbysjQtim/&hellip;</a>"},{"owner":{"account_id":20687710,"reputation":21,"user_id":15189779,"display_name":"Khaled El Attar"},"score":0,"creation_date":1665931984,"post_id":74087862,"comment_id":130809834,"body_markdown":"pom.xml\n\nhttps://drive.google.com/file/d/1xL37fEWYp5TvzR-rTh5neUl-d6tALSrT/view?usp=sharing","body":"pom.xml  <a href=\"https://drive.google.com/file/d/1xL37fEWYp5TvzR-rTh5neUl-d6tALSrT/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1xL37fEWYp5TvzR-rTh5neUl-d6tALSrT/&hellip;</a>"},{"owner":{"account_id":26308422,"reputation":126,"user_id":19972444,"display_name":"Neos"},"score":0,"creation_date":1665932165,"post_id":74087862,"comment_id":130809874,"body_markdown":"could you change the packages of your entities, controller and repository to com.ResgistrationAndLogin and retry for example com.ResgistrationAndLogin.controllers","body":"could you change the packages of your entities, controller and repository to com.ResgistrationAndLogin and retry for example com.ResgistrationAndLogin.controllers"},{"owner":{"account_id":20687710,"reputation":21,"user_id":15189779,"display_name":"Khaled El Attar"},"score":0,"creation_date":1665932330,"post_id":74087862,"comment_id":130809904,"body_markdown":"Wow, it worked.\nI don&#39;t know how to really thank you. Thank you very much my friend.\nBut where exactly is the problem?","body":"Wow, it worked. I don&#39;t know how to really thank you. Thank you very much my friend. But where exactly is the problem?"},{"owner":{"account_id":26308422,"reputation":126,"user_id":19972444,"display_name":"Neos"},"score":0,"creation_date":1665932529,"post_id":74087862,"comment_id":130809958,"body_markdown":"the problem is a visibility towards your controllers and repos , so scanning your application and it&#39;s components requires a that they should be set to their correct place","body":"the problem is a visibility towards your controllers and repos , so scanning your application and it&#39;s components requires a that they should be set to their correct place"}],"tags":[],"owner":{"account_id":26308422,"reputation":126,"user_id":19972444,"display_name":"Neos"},"comment_count":11,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665929851,"creation_date":1665929851,"answer_id":74087862,"question_id":74087719,"body_markdown":"as far as i understand , you since you are passing a path variable you should try the url with a adding an id that exists in your database , else there is a property that specifies the initial base url for your application when it runs in a server server.servlet.context-path=/api for Spring 2.X versions and spring.data.rest.basePath=/api With Spring Boot 1.2+ (&lt;2.0). \r\nso to avoid redundant &quot;api&quot; in your path your request mapping should be @RequestMapping(&quot;/user&quot;). \r\nPlease let me know if this helped \r\n","title":"How to Build a Spring Boot REST API with Java?","body":"<p>as far as i understand , you since you are passing a path variable you should try the url with a adding an id that exists in your database , else there is a property that specifies the initial base url for your application when it runs in a server server.servlet.context-path=/api for Spring 2.X versions and spring.data.rest.basePath=/api With Spring Boot 1.2+ (&lt;2.0).\nso to avoid redundant &quot;api&quot; in your path your request mapping should be @RequestMapping(&quot;/user&quot;).\nPlease let me know if this helped</p>\n"}],"owner":{"account_id":20687710,"reputation":21,"user_id":15189779,"display_name":"Khaled El Attar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":74087862,"answer_count":1,"score":-1,"last_activity_date":1665932090,"creation_date":1665928603,"question_id":74087719,"body_markdown":"When I try to send any request with the API of this project by path(for example, http://localhost:8082/api/user), the result is always 404Not Found in postman.\r\n\r\nwhy ???\r\n\r\n**file.propertise**\r\n```\r\nspring.datasource.url = jdbc:mysql://localhost:3306/user\r\nspring.datasource.username = user\r\nspring.datasource.password = user\r\nspring.jpa.hibernate.ddl-auto = update\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\nserver.port = 8082\r\n```\r\n\r\n**User Model**\r\n```\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n    private String name;\r\n}\r\n```\r\n\r\n**Repository Classes**\r\n\r\n```\r\n@Repository\r\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt; {}\r\n```\r\n\r\n\r\n**Controller**\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/user&quot;)\r\npublic class UserController {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @GetMapping\r\n    public List&lt;User&gt; findAllUsers() {\r\n        return userRepository.findAll();\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;User&gt; findUserById(@PathVariable(value = &quot;id&quot;) long id) {\r\n        Optional&lt;User&gt; user = userRepository.findById(id);\r\n\r\n        if(user.isPresent()) {\r\n            return ResponseEntity.ok().body(user.get());\r\n        } else {\r\n            return ResponseEntity.notFound().build();\r\n        }\r\n    }\r\n\r\n    @PostMapping\r\n    public User saveUser(@Validated @RequestBody User user) {\r\n        return userRepository.save(user);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"How to Build a Spring Boot REST API with Java?","body":"<p>When I try to send any request with the API of this project by path(for example, http://localhost:8082/api/user), the result is always 404Not Found in postman.</p>\n<p>why ???</p>\n<p><strong>file.propertise</strong></p>\n<pre><code>spring.datasource.url = jdbc:mysql://localhost:3306/user\nspring.datasource.username = user\nspring.datasource.password = user\nspring.jpa.hibernate.ddl-auto = update\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\nserver.port = 8082\n</code></pre>\n<p><strong>User Model</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;user&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    private String name;\n}\n</code></pre>\n<p><strong>Repository Classes</strong></p>\n<pre><code>@Repository\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt; {}\n</code></pre>\n<p><strong>Controller</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/user&quot;)\npublic class UserController {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @GetMapping\n    public List&lt;User&gt; findAllUsers() {\n        return userRepository.findAll();\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;User&gt; findUserById(@PathVariable(value = &quot;id&quot;) long id) {\n        Optional&lt;User&gt; user = userRepository.findById(id);\n\n        if(user.isPresent()) {\n            return ResponseEntity.ok().body(user.get());\n        } else {\n            return ResponseEntity.notFound().build();\n        }\n    }\n\n    @PostMapping\n    public User saveUser(@Validated @RequestBody User user) {\n        return userRepository.save(user);\n    }\n}\n</code></pre>\n"},{"tags":["java","binary","decimal","converters"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1665931317,"post_id":74087991,"comment_id":130809695,"body_markdown":"*doesn&#39;t work* is not an error description. Please explain what it means","body":"<i>doesn&#39;t work</i> is not an error description. Please explain what it means"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1665931341,"post_id":74087991,"comment_id":130809704,"body_markdown":"`System.out.println(Integer.toBinaryString(x) + &quot; or &quot; + Integer.toString(x, 2));`","body":"<code>System.out.println(Integer.toBinaryString(x) + &quot; or &quot; + Integer.toString(x, 2));</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665931909,"post_id":74087991,"comment_id":130809818,"body_markdown":"What you&#39;re doing doesn&#39;t actually make sense. You give your method an ```int```  and return an ```int``` . ```int``` doesn&#39;t have a format (binary, decimal, octal etc.) - that&#39;s a string thing. You should be returning a ```String```","body":"What you&#39;re doing doesn&#39;t actually make sense. You give your method an <code>int</code>  and return an <code>int</code> . <code>int</code> doesn&#39;t have a format (binary, decimal, octal etc.) - that&#39;s a string thing. You should be returning a <code>String</code>"},{"owner":{"account_id":18056451,"reputation":315,"user_id":13124794,"display_name":"odaiwa"},"score":0,"creation_date":1665933245,"post_id":74087991,"comment_id":130810125,"body_markdown":"Does this answer your question? [Converting Decimal to Binary Java](https://stackoverflow.com/questions/14784630/converting-decimal-to-binary-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/14784630/converting-decimal-to-binary-java\">Converting Decimal to Binary Java</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665933748,"post_id":74087991,"comment_id":130810220,"body_markdown":"...and actually you&#39;re producing a *different* number. Entering 8 will give you 1000 (one thousand, not binary 8)","body":"...and actually you&#39;re producing a <i>different</i> number. Entering 8 will give you 1000 (one thousand, not binary 8)"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1665935270,"post_id":74087991,"comment_id":130810572,"body_markdown":"Converting decimal to binary doesn&#39;t convert an int to an int.  It converts a string to a string.","body":"Converting decimal to binary doesn&#39;t convert an int to an int.  It converts a string to a string."},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":0,"creation_date":1665960923,"post_id":74087991,"comment_id":130815654,"body_markdown":"If your toBinary routine is to work as you expect, you can just collapnse it to `int toBinary(int num) { return num; }` --- because all you&#39;re attempting to do (and getting it wrong) is to split a number into digits, here base 2, and then combining those digits into a number.","body":"If your toBinary routine is to work as you expect, you can just collapnse it to <code>int toBinary(int num) { return num; }</code> --- because all you&#39;re attempting to do (and getting it wrong) is to split a number into digits, here base 2, and then combining those digits into a number."}],"owner":{"account_id":25283554,"reputation":11,"user_id":19111003,"display_name":"Noa"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":255,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1665931156,"creation_date":1665931156,"question_id":74087991,"body_markdown":"I am trying to convert a decimal number to binary but the code I&#39;ve written doesn&#39;t work in all test cases.\r\nHere&#39;s the code:\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Converter{\r\n    public static int toBinary(int num) {\r\n        String binary=&quot;&quot;;\r\n        while (num&gt;0){\r\n            binary = (num%2)+binary;\r\n            num /=2;\r\n        }\r\n        int bin = Integer.parseInt(binary);\r\n        return bin;\r\n    }\r\n}\r\n\r\npublic class Program {\r\n    public static void main(String[ ] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int x = sc.nextInt();\r\n        System.out.print(Converter.toBinary(x));\r\n    }\r\n}\r\n```\r\nI would be grateful if somebody could tell me what&#39;s wrong.\r\n\r\n","title":"How to convert Decimal to Binary in Java?","body":"<p>I am trying to convert a decimal number to binary but the code I've written doesn't work in all test cases.\nHere's the code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Converter{\n    public static int toBinary(int num) {\n        String binary=&quot;&quot;;\n        while (num&gt;0){\n            binary = (num%2)+binary;\n            num /=2;\n        }\n        int bin = Integer.parseInt(binary);\n        return bin;\n    }\n}\n\npublic class Program {\n    public static void main(String[ ] args) {\n        Scanner sc = new Scanner(System.in);\n        int x = sc.nextInt();\n        System.out.print(Converter.toBinary(x));\n    }\n}\n</code></pre>\n<p>I would be grateful if somebody could tell me what's wrong.</p>\n"},{"tags":["java","functional-programming","functional-interface"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1665930127,"post_id":74087863,"comment_id":130809422,"body_markdown":"Please be more specific. What is the &quot;correct way&quot;?","body":"Please be more specific. What is the &quot;correct way&quot;?"},{"owner":{"account_id":10536282,"reputation":164,"user_id":7764065,"display_name":"Javid"},"score":0,"creation_date":1665930477,"post_id":74087863,"comment_id":130809486,"body_markdown":"Well for example I am not sure if we can use default methods in java stream API and I am worry about using it in production project in stream API !","body":"Well for example I am not sure if we can use default methods in java stream API and I am worry about using it in production project in stream API !"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1665931085,"post_id":74087863,"comment_id":130809639,"body_markdown":"If your function throws a checked exception it is recommended that you catch and handle it properly. But if you just pass it on in this kind of interface, chances are high that the caller doesn&#39;t know how to handle this exception (otherwise you would use a regular interface and not this style. So my advice would be that you handle checked exceptions properly inside your function and only throw unchecked exceptions (inherit from `RuntimeException`), they should not need this trick.","body":"If your function throws a checked exception it is recommended that you catch and handle it properly. But if you just pass it on in this kind of interface, chances are high that the caller doesn&#39;t know how to handle this exception (otherwise you would use a regular interface and not this style. So my advice would be that you handle checked exceptions properly inside your function and only throw unchecked exceptions (inherit from <code>RuntimeException</code>), they should not need this trick."}],"owner":{"account_id":10536282,"reputation":164,"user_id":7764065,"display_name":"Javid"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1665930927,"creation_date":1665929865,"question_id":74087863,"body_markdown":"In our project I wanted to use Function in my method but sins the reference method is throwing exception then I looked to Function interface for creating my ThrowingFunction like this so the question here is did I implemented the interface in correct way inf default methods and can this implementation cause side effects or errors?\r\nIs this interface safe to use instead of java Function interface? because I implemented it from *`java.util.function.Function`* interface that java doesn&#39;t have Function like this so I am not sure abut that!\r\n\r\n    @FunctionalInterface\r\n\tpublic interface ThrowingFunction&lt;T, R, E extends Exception&gt; {\r\n\r\n\t\t/**\r\n\t\t * Applies this function to the given argument.\r\n\t\t * \r\n\t\t * @param t the function argument\r\n\t\t * @return the function result\r\n\t\t * @throws E the function throwing exception\r\n\t\t */\r\n\t\tR apply(T t) throws E;\r\n\r\n\t\tdefault &lt;V&gt; ThrowingFunction&lt;V, R, E&gt; compose(ThrowingFunction&lt;? super V, ? extends T, E&gt; before) {\r\n\t\t\tObjects.requireNonNull(before);\r\n\t\t\treturn (V v) -&gt; apply(before.apply(v));\r\n\t\t}\r\n\r\n\t\tdefault &lt;V&gt; ThrowingFunction&lt;T, V, E&gt; andThen(ThrowingFunction&lt;? super R, ? extends V, E&gt; after) {\r\n\t\t\tObjects.requireNonNull(after);\r\n\t\t\treturn (T t) -&gt; after.apply(apply(t));\r\n\t\t}\r\n\r\n\t\tstatic &lt;T, E extends Exception&gt; ThrowingFunction&lt;T, T, E&gt; identity() {\r\n\t\t\treturn t -&gt; t;\r\n\t\t}\r\n\t}","title":"Implementing ThrowingFunction like Function in java","body":"<p>In our project I wanted to use Function in my method but sins the reference method is throwing exception then I looked to Function interface for creating my ThrowingFunction like this so the question here is did I implemented the interface in correct way inf default methods and can this implementation cause side effects or errors?\nIs this interface safe to use instead of java Function interface? because I implemented it from <em><code>java.util.function.Function</code></em> interface that java doesn't have Function like this so I am not sure abut that!</p>\n<pre><code>@FunctionalInterface\npublic interface ThrowingFunction&lt;T, R, E extends Exception&gt; {\n\n    /**\n     * Applies this function to the given argument.\n     * \n     * @param t the function argument\n     * @return the function result\n     * @throws E the function throwing exception\n     */\n    R apply(T t) throws E;\n\n    default &lt;V&gt; ThrowingFunction&lt;V, R, E&gt; compose(ThrowingFunction&lt;? super V, ? extends T, E&gt; before) {\n        Objects.requireNonNull(before);\n        return (V v) -&gt; apply(before.apply(v));\n    }\n\n    default &lt;V&gt; ThrowingFunction&lt;T, V, E&gt; andThen(ThrowingFunction&lt;? super R, ? extends V, E&gt; after) {\n        Objects.requireNonNull(after);\n        return (T t) -&gt; after.apply(apply(t));\n    }\n\n    static &lt;T, E extends Exception&gt; ThrowingFunction&lt;T, T, E&gt; identity() {\n        return t -&gt; t;\n    }\n}\n</code></pre>\n"},{"tags":["java","jar","iostream"],"comments":[{"owner":{"account_id":3175071,"reputation":20715,"user_id":2683146,"accept_rate":85,"display_name":"Jean-Fran&#231;ois Savard"},"score":0,"creation_date":1426073315,"post_id":28985379,"comment_id":46219397,"body_markdown":"try with `getClassLoader().getResourceAsStream()` instead","body":"try with <code>getClassLoader().getResourceAsStream()</code> instead"},{"owner":{"account_id":2366187,"reputation":60172,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1426075538,"post_id":28985379,"comment_id":46220834,"body_markdown":"From the [documentation for `Files.newDirectoryStream`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newDirectoryStream-java.nio.file.Path-) _When not using the try-with-resources construct, then **directory stream&#39;s close method should be invoked** after iteration is completed so as to free any resources held for the open directory._ (emphasis added) Make sure you read the documentation and do as it says, the current code is a memory leak.","body":"From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newDirectoryStream-java.nio.file.Path-\" rel=\"nofollow noreferrer\">documentation for <code>Files.newDirectoryStream</code></a> <i>When not using the try-with-resources construct, then <b>directory stream&#39;s close method should be invoked</b> after iteration is completed so as to free any resources held for the open directory.</i> (emphasis added) Make sure you read the documentation and do as it says, the current code is a memory leak."}],"answers":[{"comments":[{"owner":{"account_id":2366187,"reputation":60172,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1426074369,"post_id":28985566,"comment_id":46220093,"body_markdown":"This is not very helpful, as the OP wants the files inside the classpath. In order to find the correct jar you would need to somehow work out where it was from inside the application.","body":"This is not very helpful, as the OP wants the files inside the classpath. In order to find the correct jar you would need to somehow work out where it was from inside the application."},{"owner":{"account_id":2366187,"reputation":60172,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1426075284,"post_id":28985566,"comment_id":46220680,"body_markdown":"Also, a [ZIP file system](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html) would be a much better approach if going down this route.","body":"Also, a <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html\" rel=\"nofollow noreferrer\">ZIP file system</a> would be a much better approach if going down this route."}],"tags":[],"owner":{"account_id":5920664,"reputation":25,"user_id":4658182,"display_name":"TV Trailers"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1426073634,"creation_date":1426073634,"answer_id":28985566,"question_id":28985379,"body_markdown":"You can read contents of a JAR file with [JARInputStream][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/jar/JarInputStream.html","title":"Java how to read folder and list files in that folder in jar environment instead of IDE","body":"<p>You can read contents of a JAR file with <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/jar/JarInputStream.html\" rel=\"nofollow\">JARInputStream</a></p>\n"},{"comments":[{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1426075704,"post_id":28985785,"comment_id":46220932,"body_markdown":"Cool hack, wasn&#39;t aware `getResourceAsStream()` worked that way, by listing folder contents. Is this documented anywhere?","body":"Cool hack, wasn&#39;t aware <code>getResourceAsStream()</code> worked that way, by listing folder contents. Is this documented anywhere?"},{"owner":{"account_id":2366187,"reputation":60172,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1426076026,"post_id":28985785,"comment_id":46221125,"body_markdown":"@haraldK this is implementation specific behaviour and is not documented in the official documentation; hence it&#39;s a hack.  It&#39;s unlikely to change however, as a large amount of existing code relies on this behaviour - Oracle don&#39;t like breaking changes.","body":"@haraldK this is implementation specific behaviour and is not documented in the official documentation; hence it&#39;s a hack.  It&#39;s unlikely to change however, as a large amount of existing code relies on this behaviour - Oracle don&#39;t like breaking changes."},{"owner":{"account_id":4850972,"reputation":133,"user_id":3913260,"display_name":"Li Yuan"},"score":1,"creation_date":1426132096,"post_id":28985785,"comment_id":46250715,"body_markdown":"@BoristheSpider I try your advice and it works pretty well in eclipse IDE. However, when I export project to a jar and run in standalone, it break down. Anyway, thank you for your suggestions. Do you have any idea about how to run correctly in jar?","body":"@BoristheSpider I try your advice and it works pretty well in eclipse IDE. However, when I export project to a jar and run in standalone, it break down. Anyway, thank you for your suggestions. Do you have any idea about how to run correctly in jar?"}],"tags":[],"owner":{"account_id":2366187,"reputation":60172,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1426074705,"creation_date":1426074296,"answer_id":28985785,"question_id":28985379,"body_markdown":"This is actually a very difficult question, as the `ClassLoader` has to take account of the fact that you might have _another_ folder called `IconResources` on the classpath at runtime.\r\n\r\nAs such, there is no &quot;official&quot; way to list an entire folder from the classpath. The solution I give below is **a hack** and currently works with the implementation of `URLClassLoader`. This is subject to change.\r\n\r\nIf you want to robust approach, you will need to use a classpath scanner. There are many of these in library form, my personal favourite is [Reflections][1], but Spring has one built in and there are many other options.\r\n\r\nOnto the hack.\r\n\r\nGenerally, if you [`getResourceAsStream`][2] on a `URLClassLoader` then it will return a stream of the resources in that folder, one on each line.  The `URLClassLoader` is the default used by the JRE so this approach should work out of the box, if you&#39;re not changing that behaviour.\r\n\r\nAssume I have a project with the following classpath structure:\r\n\r\n    /\r\n        text/\r\n            one.txt\r\n            two.txt\r\n\r\nThen running the following code:\r\n\r\n    final ClassLoader loader = Thread.currentThread().getContextClassLoader();\r\n    try(\r\n            final InputStream is = loader.getResourceAsStream(&quot;text&quot;);\r\n            final InputStreamReader isr = new InputStreamReader(is, StandardCharsets.UTF_8);\r\n            final BufferedReader br = new BufferedReader(isr)) {\r\n        br.lines().forEach(System.out::println);\r\n    }\r\n\r\nWill print:\r\n\r\n&gt; one.txt  \r\n&gt; two.txt\r\n\r\nSo, in order to get a `List&lt;URL&gt;` of the resources in that location you could use a method such as:\r\n\r\n    public static List&lt;URL&gt; getResources(final String path) throws IOException {\r\n        final ClassLoader loader = Thread.currentThread().getContextClassLoader();\r\n        try (\r\n                final InputStream is = loader.getResourceAsStream(path);\r\n                final InputStreamReader isr = new InputStreamReader(is, StandardCharsets.UTF_8);\r\n                final BufferedReader br = new BufferedReader(isr)) {\r\n            return br.lines()\r\n                    .map(l -&gt; path + &quot;/&quot; + l)\r\n                    .map(r -&gt; loader.getResource(r))\r\n                    .collect(toList());\r\n        }\r\n    }\r\n\r\nNow remember, these `URL` locations are **opaque**. They cannot be treated as files, as they might be inside a `.jar` or they might even be at an internet location.  So in order to read the contents of the resource, use the appropriate methods on `URL`:\r\n\r\n    final URL resource = ...\r\n    try(final InputStream is = resource.openStream()) {\r\n        //do stuff\r\n    }\r\n\r\n[1]: https://code.google.com/p/reflections/\r\n[2]: http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)","title":"Java how to read folder and list files in that folder in jar environment instead of IDE","body":"<p>This is actually a very difficult question, as the <code>ClassLoader</code> has to take account of the fact that you might have <em>another</em> folder called <code>IconResources</code> on the classpath at runtime.</p>\n\n<p>As such, there is no \"official\" way to list an entire folder from the classpath. The solution I give below is <strong>a hack</strong> and currently works with the implementation of <code>URLClassLoader</code>. This is subject to change.</p>\n\n<p>If you want to robust approach, you will need to use a classpath scanner. There are many of these in library form, my personal favourite is <a href=\"https://code.google.com/p/reflections/\" rel=\"noreferrer\">Reflections</a>, but Spring has one built in and there are many other options.</p>\n\n<p>Onto the hack.</p>\n\n<p>Generally, if you <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)\" rel=\"noreferrer\"><code>getResourceAsStream</code></a> on a <code>URLClassLoader</code> then it will return a stream of the resources in that folder, one on each line.  The <code>URLClassLoader</code> is the default used by the JRE so this approach should work out of the box, if you're not changing that behaviour.</p>\n\n<p>Assume I have a project with the following classpath structure:</p>\n\n<pre><code>/\n    text/\n        one.txt\n        two.txt\n</code></pre>\n\n<p>Then running the following code:</p>\n\n<pre><code>final ClassLoader loader = Thread.currentThread().getContextClassLoader();\ntry(\n        final InputStream is = loader.getResourceAsStream(\"text\");\n        final InputStreamReader isr = new InputStreamReader(is, StandardCharsets.UTF_8);\n        final BufferedReader br = new BufferedReader(isr)) {\n    br.lines().forEach(System.out::println);\n}\n</code></pre>\n\n<p>Will print:</p>\n\n<blockquote>\n  <p>one.txt<br>\n  two.txt</p>\n</blockquote>\n\n<p>So, in order to get a <code>List&lt;URL&gt;</code> of the resources in that location you could use a method such as:</p>\n\n<pre><code>public static List&lt;URL&gt; getResources(final String path) throws IOException {\n    final ClassLoader loader = Thread.currentThread().getContextClassLoader();\n    try (\n            final InputStream is = loader.getResourceAsStream(path);\n            final InputStreamReader isr = new InputStreamReader(is, StandardCharsets.UTF_8);\n            final BufferedReader br = new BufferedReader(isr)) {\n        return br.lines()\n                .map(l -&gt; path + \"/\" + l)\n                .map(r -&gt; loader.getResource(r))\n                .collect(toList());\n    }\n}\n</code></pre>\n\n<p>Now remember, these <code>URL</code> locations are <strong>opaque</strong>. They cannot be treated as files, as they might be inside a <code>.jar</code> or they might even be at an internet location.  So in order to read the contents of the resource, use the appropriate methods on <code>URL</code>:</p>\n\n<pre><code>final URL resource = ...\ntry(final InputStream is = resource.openStream()) {\n    //do stuff\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4850972,"reputation":133,"user_id":3913260,"display_name":"Li Yuan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1426226095,"creation_date":1426226095,"answer_id":29025738,"question_id":28985379,"body_markdown":"Finally I work it out. I adopt Boris the Spider&#39;s answer, and it works well in IDE but break down in exported Jar. Then I change \r\n\r\nfinal InputStream is = loader.getResourceAsStream(&quot;text&quot;);\r\n \r\nto\r\n\r\nfinal InputStream is = loader.getResourceAsStream(&quot;./text&quot;);\r\n\r\nThen it works both in IDE and JAR. ","title":"Java how to read folder and list files in that folder in jar environment instead of IDE","body":"<p>Finally I work it out. I adopt Boris the Spider's answer, and it works well in IDE but break down in exported Jar. Then I change </p>\n\n<p>final InputStream is = loader.getResourceAsStream(\"text\");</p>\n\n<p>to</p>\n\n<p>final InputStream is = loader.getResourceAsStream(\"./text\");</p>\n\n<p>Then it works both in IDE and JAR. </p>\n"},{"tags":[],"owner":{"account_id":22491546,"reputation":1,"user_id":16689204,"display_name":"Sumit Murmu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665930530,"creation_date":1665657391,"answer_id":74054370,"question_id":28985379,"body_markdown":"I tested that `final InputStream is = loader.getResourceAsStream(&quot;text&quot;);`\r\nis working.","title":"Java how to read folder and list files in that folder in jar environment instead of IDE","body":"<p>I tested that <code>final InputStream is = loader.getResourceAsStream(&quot;text&quot;);</code>\nis working.</p>\n"}],"owner":{"account_id":4850972,"reputation":133,"user_id":3913260,"display_name":"Li Yuan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17327,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":28985785,"answer_count":4,"score":10,"last_activity_date":1665930530,"creation_date":1426073123,"question_id":28985379,"body_markdown":" \r\n my problem is that I create a folder(name is IconResources) under src , in IconResources there are many pictures. Directory is like this:\r\n\r\n - ProjectName\r\n   - src\r\n     - package 1\r\n     - package 2\r\n     - IconResources(this is the target folder)\r\n\r\nI want to list all picture files name and do something with those pictures. And I found that File.list() only works in IDE, if I export project to a jar to make a standalone, it cannot work. So I searched and found that I should use inputstream and outputstream. Now I find i/o stream can works well for single file. But I want to use inputstream and outputstream to read folder(IconResource), then list the files in that folder. \r\n\r\nSo my question is how to use i/o put stream to load a folder and iterate the folder to list file names in that folder. These things should work under not only IDE but also exported jar. \r\nMy code are follows:\r\n\r\n    private void initalizeIconFiles(File projectDirectory){\r\n    \t\t\r\n    \tURL a = editor.getClass().getResource(&quot;/IconResources/&quot;);// Get Folder URL\r\n    \tList&lt;String&gt; iconFileNames=new ArrayList&lt;String&gt;();//Create a list to store file names from IconResource Folder\r\n    \tFile iconFolder = new File(a.getFile());\r\n    \tPath path=Paths.get(iconFolder.getPath());\r\n    \tDirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(path) ;\r\n    \tfor (Path entry : stream) {\r\n    \t    if (!Files.isDirectory(entry)) {\r\n    \t        System.out.println(entry.getFileName().toString());\r\n    \t        iconFileNames.add(entry.getFileName().toString());// add file name in to name list\r\n    \t    }\r\n        }\r\n    }\r\nabove code only can run under IDE but break down in exported jar.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/UdgED.png","title":"Java how to read folder and list files in that folder in jar environment instead of IDE","body":"<p>my problem is that I create a folder(name is IconResources) under src , in IconResources there are many pictures. Directory is like this:</p>\n\n<ul>\n<li>ProjectName\n\n<ul>\n<li>src\n\n<ul>\n<li>package 1</li>\n<li>package 2</li>\n<li>IconResources(this is the target folder)</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>I want to list all picture files name and do something with those pictures. And I found that File.list() only works in IDE, if I export project to a jar to make a standalone, it cannot work. So I searched and found that I should use inputstream and outputstream. Now I find i/o stream can works well for single file. But I want to use inputstream and outputstream to read folder(IconResource), then list the files in that folder. </p>\n\n<p>So my question is how to use i/o put stream to load a folder and iterate the folder to list file names in that folder. These things should work under not only IDE but also exported jar. \nMy code are follows:</p>\n\n<pre><code>private void initalizeIconFiles(File projectDirectory){\n\n    URL a = editor.getClass().getResource(\"/IconResources/\");// Get Folder URL\n    List&lt;String&gt; iconFileNames=new ArrayList&lt;String&gt;();//Create a list to store file names from IconResource Folder\n    File iconFolder = new File(a.getFile());\n    Path path=Paths.get(iconFolder.getPath());\n    DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(path) ;\n    for (Path entry : stream) {\n        if (!Files.isDirectory(entry)) {\n            System.out.println(entry.getFileName().toString());\n            iconFileNames.add(entry.getFileName().toString());// add file name in to name list\n        }\n    }\n}\n</code></pre>\n\n<p>above code only can run under IDE but break down in exported jar.</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1665929424,"post_id":74087752,"comment_id":130809265,"body_markdown":"You don&#39;t have a variable with the name `repository` defined anywhere. Perhaps you wanted to autowire it?","body":"You don&#39;t have a variable with the name <code>repository</code> defined anywhere. Perhaps you wanted to autowire it?"},{"owner":{"account_id":14203544,"reputation":942,"user_id":10260806,"display_name":"RedRum"},"score":0,"creation_date":1665929746,"post_id":74087752,"comment_id":130809331,"body_markdown":"@voidvoid correct, when I hover over the repository, I get a suggestion to create a local repository. Where would I place the ```@Autowired``` annotation though? I&#39;ve tried placing it in the Repository and Controller file but I still get the error.","body":"@voidvoid correct, when I hover over the repository, I get a suggestion to create a local repository. Where would I place the <code>@Autowired</code> annotation though? I&#39;ve tried placing it in the Repository and Controller file but I still get the error."}],"answers":[{"comments":[{"owner":{"account_id":14203544,"reputation":942,"user_id":10260806,"display_name":"RedRum"},"score":0,"creation_date":1665931163,"post_id":74087915,"comment_id":130809655,"body_markdown":"that makes sense, however I had to delete ```public``` from ```public class ApplicationRunner``` because I was getting an error saying ```Class is public, should be declared in a file named .java```... according to other SO answers, you can only have 1 public in a file... does this make sense? or would be it better to delete the ```public``` in the ```public void run(String... args) throws Exception``` ?","body":"that makes sense, however I had to delete <code>public</code> from <code>public class ApplicationRunner</code> because I was getting an error saying <code>Class is public, should be declared in a file named .java</code>... according to other SO answers, you can only have 1 public in a file... does this make sense? or would be it better to delete the <code>public</code> in the <code>public void run(String... args) throws Exception</code> ?"},{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1665931218,"post_id":74087915,"comment_id":130809672,"body_markdown":"Don&#39;t remove public, just put the class in a file named ApplicationRunner.","body":"Don&#39;t remove public, just put the class in a file named ApplicationRunner."},{"owner":{"account_id":14203544,"reputation":942,"user_id":10260806,"display_name":"RedRum"},"score":0,"creation_date":1665931707,"post_id":74087915,"comment_id":130809776,"body_markdown":"I&#39;m getting an error on the ```@Override``` when I put the code in a ApplicationRunner.java file.. but when I put it into the ```StudentCongig.java``` file, it worked now without the ```Class is public, should be declared in a file named .java``` error because I mistyped the file name as ```Studentconfig.java``` instead of ```StudentConfig.java```. The students Mariam and Alex were successfully stored in my Postgres database and I can view them with a select * statement =D","body":"I&#39;m getting an error on the <code>@Override</code> when I put the code in a ApplicationRunner.java file.. but when I put it into the <code>StudentCongig.java</code> file, it worked now without the <code>Class is public, should be declared in a file named .java</code> error because I mistyped the file name as <code>Studentconfig.java</code> instead of <code>StudentConfig.java</code>. The students Mariam and Alex were successfully stored in my Postgres database and I can view them with a select * statement =D"},{"owner":{"account_id":14203544,"reputation":942,"user_id":10260806,"display_name":"RedRum"},"score":0,"creation_date":1665931806,"post_id":74087915,"comment_id":130809796,"body_markdown":"not sure if I just did a hack way of doing it by putting it in the StudentConfig and it working but thanks!","body":"not sure if I just did a hack way of doing it by putting it in the StudentConfig and it working but thanks!"}],"tags":[],"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665930418,"creation_date":1665930418,"answer_id":74087915,"question_id":74087752,"body_markdown":"To me it seems you are trying to do this: \r\n\r\n    @Component\r\n    public class ApplicationRunner implements CommandLineRunner{\r\n    \r\n        @Autowired\r\n        private StudentRepository repository;\r\n        \r\n        @Override\r\n        public void run(String... args) throws Exception {\r\n            Student mariam = new Student(\r\n                            &quot;Mariam&quot;,\r\n                            &quot;mariam.jamal@gmail.com&quot;,\r\n                            LocalDate.of(2000, Month.JANUARY, 5)\r\n                    );\r\n            \r\n            Student alex = new Student(\r\n                    &quot;Alex&quot;,\r\n                    &quot;alex@gmail.com&quot;,\r\n                    LocalDate.of(2004, Month.JANUARY, 5)\r\n            );\r\n            \r\n            repository.saveAll(\r\n                    List.of(mariam, alex)\r\n            );\r\n        }\r\n    }\r\nNow your `StudentRepository` will get injected/autowired into your component and it will be available inside the run method.","title":"Cannot resolve symbol repository","body":"<p>To me it seems you are trying to do this:</p>\n<pre><code>@Component\npublic class ApplicationRunner implements CommandLineRunner{\n\n    @Autowired\n    private StudentRepository repository;\n    \n    @Override\n    public void run(String... args) throws Exception {\n        Student mariam = new Student(\n                        &quot;Mariam&quot;,\n                        &quot;mariam.jamal@gmail.com&quot;,\n                        LocalDate.of(2000, Month.JANUARY, 5)\n                );\n        \n        Student alex = new Student(\n                &quot;Alex&quot;,\n                &quot;alex@gmail.com&quot;,\n                LocalDate.of(2004, Month.JANUARY, 5)\n        );\n        \n        repository.saveAll(\n                List.of(mariam, alex)\n        );\n    }\n}\n</code></pre>\n<p>Now your <code>StudentRepository</code> will get injected/autowired into your component and it will be available inside the run method.</p>\n"}],"owner":{"account_id":14203544,"reputation":942,"user_id":10260806,"display_name":"RedRum"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":735,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74087915,"answer_count":1,"score":-1,"last_activity_date":1665930418,"creation_date":1665928915,"question_id":74087752,"body_markdown":"I have a StudentRepository and a Student Config file but when I try to had a ```repository.saveAll``` function in the StudentConfig file, I get an error saying ```Cannot resolve symbol &#39;repository&#39;``` . Am I missing an obvious annotation somewhere?\r\n\r\nI&#39;m following this tutorial which is good but it misses a few things which is annoying https://www.youtube.com/watch?v=9SGDpanrc8U\r\n\r\n# My Student repository file is like so:\r\npackage com.example.demo.student;\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface StudentRepository extends JpaRepository&lt;Student, Long&gt; {\r\n    }\r\n\r\n\r\n# My StudentConfig file is like so which contains the following error causer towards the bottom of the code block\r\n\r\n    repository.saveAll(\r\n                            List.of(mariam, alex)\r\n                    )\r\n\r\n: -&gt;\r\n\r\n\r\n    package com.example.demo.student;\r\n    \r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import java.time.LocalDate;\r\n    import java.time.Month;\r\n    import java.util.List;\r\n    \r\n    \r\n    @Configuration\r\n    public class Studentconfig {\r\n    \r\n        // we want this bean\r\n        @Bean\r\n        CommandLineRunner commandLineRunner() {\r\n            return args -&gt; {\r\n                Student mariam = new Student(\r\n                        &quot;Mariam&quot;,\r\n                        &quot;mariam.jamal@gmail.com&quot;,\r\n                        LocalDate.of(2000, Month.JANUARY, 5)\r\n                );\r\n    \r\n                Student alex = new Student(\r\n                        &quot;Alex&quot;,\r\n                        &quot;alex@gmail.com&quot;,\r\n                        LocalDate.of(2004, Month.JANUARY, 5)\r\n                );\r\n    \r\n                // invoke repository where we have the ability to save 1 student or list of all\r\n    \r\n                repository.saveAll(\r\n                        List.of(mariam, alex)\r\n                );\r\n            };\r\n        }\r\n    }\r\n\r\n","title":"Cannot resolve symbol repository","body":"<p>I have a StudentRepository and a Student Config file but when I try to had a <code>repository.saveAll</code> function in the StudentConfig file, I get an error saying <code>Cannot resolve symbol 'repository'</code> . Am I missing an obvious annotation somewhere?</p>\n<p>I'm following this tutorial which is good but it misses a few things which is annoying <a href=\"https://www.youtube.com/watch?v=9SGDpanrc8U\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=9SGDpanrc8U</a></p>\n<h1>My Student repository file is like so:</h1>\n<p>package com.example.demo.student;</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface StudentRepository extends JpaRepository&lt;Student, Long&gt; {\n}\n</code></pre>\n<h1>My StudentConfig file is like so which contains the following error causer towards the bottom of the code block</h1>\n<pre><code>repository.saveAll(\n                        List.of(mariam, alex)\n                )\n</code></pre>\n<p>: -&gt;</p>\n<pre><code>package com.example.demo.student;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.time.LocalDate;\nimport java.time.Month;\nimport java.util.List;\n\n\n@Configuration\npublic class Studentconfig {\n\n    // we want this bean\n    @Bean\n    CommandLineRunner commandLineRunner() {\n        return args -&gt; {\n            Student mariam = new Student(\n                    &quot;Mariam&quot;,\n                    &quot;mariam.jamal@gmail.com&quot;,\n                    LocalDate.of(2000, Month.JANUARY, 5)\n            );\n\n            Student alex = new Student(\n                    &quot;Alex&quot;,\n                    &quot;alex@gmail.com&quot;,\n                    LocalDate.of(2004, Month.JANUARY, 5)\n            );\n\n            // invoke repository where we have the ability to save 1 student or list of all\n\n            repository.saveAll(\n                    List.of(mariam, alex)\n            );\n        };\n    }\n}\n</code></pre>\n"},{"tags":["java","mockito","junit4","powermock","powermockito"],"answers":[{"tags":[],"owner":{"account_id":26639547,"reputation":1,"user_id":20255471,"display_name":"Veena"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665930245,"creation_date":1665930245,"answer_id":74087896,"question_id":74086927,"body_markdown":"UnnecessaryStubbingException indicates presence of unused stubbings. Removing unused stubbings will fix the issue.\r\nReference: https://www.javadoc.io/doc/org.mockito/mockito-core/2.6.5/org/mockito/exceptions/misusing/UnnecessaryStubbingException.html","title":"Misusing Unnecessary Stubbing Exception in Junit","body":"<p>UnnecessaryStubbingException indicates presence of unused stubbings. Removing unused stubbings will fix the issue.\nReference: <a href=\"https://www.javadoc.io/doc/org.mockito/mockito-core/2.6.5/org/mockito/exceptions/misusing/UnnecessaryStubbingException.html\" rel=\"nofollow noreferrer\">https://www.javadoc.io/doc/org.mockito/mockito-core/2.6.5/org/mockito/exceptions/misusing/UnnecessaryStubbingException.html</a></p>\n"}],"owner":{"account_id":6332220,"reputation":224,"user_id":4916829,"accept_rate":75,"display_name":"Raushan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1665930245,"creation_date":1665921610,"question_id":74086927,"body_markdown":"I am writing a Junit test case using Mockito &amp; PowerMockito in Java. Below are the code snippet:\r\n\r\nApplicationCovrgeCommonRules class has method checkForValidFormIdForCoverageTest() which needs to be tested. This method is calling another method (of same class) getCarirSysID() having return type String.\r\n\r\n    @Test\r\n    public void checkForValidFormIdForCoverageTest() throws Exception{\r\n    \t\t\tString caseId=&quot;caseId&quot;;\r\n    \t\t\tStateVO stateVO = new StateVO(); stateVO.setDeliveryState(&quot;AK&quot;);\r\n    \t\t\tMockito.when(dsBean.getStateInfo(any())).thenReturn(stateVO);\r\n    \t\t\tString carirSysID=&quot;CarirSysID&quot;; \r\n    \t\t    ApplicationCovrgeCommonRules applicationCovrgeCommonRulesMock= \r\n               Mockito.spy(applicationCovrgeCommonRules);\r\n             Mockito.doReturn(carirSysID).when(applicationCovrgeCommonRulesMock).getCarirSysID(caseId);\r\n\r\n\r\napplicationCovrgeCommonRules is defined as:\r\n\r\n    @InjectMocks\r\n    ApplicationCovrgeCommonRules applicationCovrgeCommonRules;\r\n\r\nWhile running this code, I am getting error as \r\n\r\n    &gt; unnecessary Mockito stubbings FAILED\r\n        org.mockito.exceptions.misusing.UnnecessaryStubbingException","title":"Misusing Unnecessary Stubbing Exception in Junit","body":"<p>I am writing a Junit test case using Mockito &amp; PowerMockito in Java. Below are the code snippet:</p>\n<p>ApplicationCovrgeCommonRules class has method checkForValidFormIdForCoverageTest() which needs to be tested. This method is calling another method (of same class) getCarirSysID() having return type String.</p>\n<pre><code>@Test\npublic void checkForValidFormIdForCoverageTest() throws Exception{\n            String caseId=&quot;caseId&quot;;\n            StateVO stateVO = new StateVO(); stateVO.setDeliveryState(&quot;AK&quot;);\n            Mockito.when(dsBean.getStateInfo(any())).thenReturn(stateVO);\n            String carirSysID=&quot;CarirSysID&quot;; \n            ApplicationCovrgeCommonRules applicationCovrgeCommonRulesMock= \n           Mockito.spy(applicationCovrgeCommonRules);\n         Mockito.doReturn(carirSysID).when(applicationCovrgeCommonRulesMock).getCarirSysID(caseId);\n</code></pre>\n<p>applicationCovrgeCommonRules is defined as:</p>\n<pre><code>@InjectMocks\nApplicationCovrgeCommonRules applicationCovrgeCommonRules;\n</code></pre>\n<p>While running this code, I am getting error as</p>\n<pre><code>&gt; unnecessary Mockito stubbings FAILED\n    org.mockito.exceptions.misusing.UnnecessaryStubbingException\n</code></pre>\n"},{"tags":["java","cadence-workflow","uber-cadence"],"answers":[{"comments":[{"owner":{"account_id":26577945,"reputation":1,"user_id":20203012,"display_name":"jackxu"},"score":0,"creation_date":1665929147,"post_id":74024265,"comment_id":130809197,"body_markdown":"thank you for your reply. is iwf an extension of cadence/temporal?","body":"thank you for your reply. is iwf an extension of cadence/temporal?"},{"owner":{"account_id":275586,"reputation":2166,"user_id":7823836,"display_name":"Long Quanzheng"},"score":0,"creation_date":1666019180,"post_id":74024265,"comment_id":130830088,"body_markdown":"Yes, that’s another way to look at it. It is basically providing a simplified way to use Cadence Temporal but keep the same power","body":"Yes, that’s another way to look at it. It is basically providing a simplified way to use Cadence Temporal but keep the same power"}],"tags":[],"owner":{"account_id":275586,"reputation":2166,"user_id":7823836,"display_name":"Long Quanzheng"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665472202,"creation_date":1665472202,"answer_id":74024265,"question_id":74017038,"body_markdown":"The best way is to use [iWF][1] for your Cadence/Temporal project:\r\n\r\nIt is serving [REST API for workflow operations][2]. You can use [Postman/Curl][3] to reset workflows.\r\n\r\nIt also has a [Java API for reset][4].\r\n\r\n\r\n  [1]: https://github.com/cadence-oss/iwf\r\n  [2]: https://github.com/cadence-oss/iwf-idl/blob/main/iwf.yaml#L13\r\n  [3]: https://github.com/cadence-oss/iwf/blob/f8cb9566a1a43da249335ca600f66042e901428a/script/http/local/home.http#L19\r\n  [4]: https://github.com/cadence-oss/iwf-java-sdk/blob/35604e1b1e432e0879d2c833e1cae536edba017a/src/main/java/io/github/cadenceoss/iwf/core/Client.java#L115","title":"how to reset a cadence workflow with client sdk?","body":"<p>The best way is to use <a href=\"https://github.com/cadence-oss/iwf\" rel=\"nofollow noreferrer\">iWF</a> for your Cadence/Temporal project:</p>\n<p>It is serving <a href=\"https://github.com/cadence-oss/iwf-idl/blob/main/iwf.yaml#L13\" rel=\"nofollow noreferrer\">REST API for workflow operations</a>. You can use <a href=\"https://github.com/cadence-oss/iwf/blob/f8cb9566a1a43da249335ca600f66042e901428a/script/http/local/home.http#L19\" rel=\"nofollow noreferrer\">Postman/Curl</a> to reset workflows.</p>\n<p>It also has a <a href=\"https://github.com/cadence-oss/iwf-java-sdk/blob/35604e1b1e432e0879d2c833e1cae536edba017a/src/main/java/io/github/cadenceoss/iwf/core/Client.java#L115\" rel=\"nofollow noreferrer\">Java API for reset</a>.</p>\n"},{"tags":[],"owner":{"account_id":26577945,"reputation":1,"user_id":20203012,"display_name":"jackxu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665929968,"creation_date":1665929881,"answer_id":74087865,"question_id":74017038,"body_markdown":"inside the WorkflowServiceTChannel class I found a method ResetWorkflowExecution. through it reset can be acheieved. code show as blow:\r\n&lt;br&gt;\r\n&lt;br&gt;\r\npublic void testReset(String workflowid, String runid, String completeid){\r\n&lt;br&gt;\r\n    WorkflowClient workflowClient = WorkflowClient.newInstance(\r\n        new WorkflowServiceTChannel(\r\n            ClientOptions.newBuilder().setHost(&quot;127.0.0.1&quot;).setPort(8080).setFeatureFlags(new FeatureFlags().setWorkflowExecutionAlreadyCompletedErrorEnabled(true)).build()),\r\n        WorkflowClientOptions.newBuilder().setDomain(&quot;domain-test&quot;).build());\r\n&lt;br&gt;\r\n    ResetWorkflowExecutionRequest request = new ResetWorkflowExecutionRequest();&lt;br&gt;\r\n    WorkflowExecution workflowExecution = new WorkflowExecution();&lt;br&gt;\r\n    workflowExecution.setWorkflowId(workflowid);&lt;br&gt;\r\n    workflowExecution.setRunId(runid);&lt;br&gt;\r\n    request.setRequestId(UUID.randomUUID().toString());&lt;br&gt;\r\n    request.setDomain(&quot;domain-test&quot;);&lt;br&gt;\r\n    request.setDecisionFinishEventId(Long.valueOf(completeid));&lt;br&gt;\r\n    request.setWorkflowExecution(workflowExecution);&lt;br&gt;\r\n    try {&lt;br&gt;\r\n        workflowClient.getService().ResetWorkflowExecution(request);&lt;br&gt;\r\n    } catch (TException e) {&lt;br&gt;\r\n        e.printStackTrace();&lt;br&gt;\r\n    }&lt;br&gt;\r\n}","title":"how to reset a cadence workflow with client sdk?","body":"<p>inside the WorkflowServiceTChannel class I found a method ResetWorkflowExecution. through it reset can be acheieved. code show as blow:\n<br>\n<br>\npublic void testReset(String workflowid, String runid, String completeid){\n<br>\nWorkflowClient workflowClient = WorkflowClient.newInstance(\nnew WorkflowServiceTChannel(\nClientOptions.newBuilder().setHost(&quot;127.0.0.1&quot;).setPort(8080).setFeatureFlags(new FeatureFlags().setWorkflowExecutionAlreadyCompletedErrorEnabled(true)).build()),\nWorkflowClientOptions.newBuilder().setDomain(&quot;domain-test&quot;).build());\n<br>\nResetWorkflowExecutionRequest request = new ResetWorkflowExecutionRequest();<br>\nWorkflowExecution workflowExecution = new WorkflowExecution();<br>\nworkflowExecution.setWorkflowId(workflowid);<br>\nworkflowExecution.setRunId(runid);<br>\nrequest.setRequestId(UUID.randomUUID().toString());<br>\nrequest.setDomain(&quot;domain-test&quot;);<br>\nrequest.setDecisionFinishEventId(Long.valueOf(completeid));<br>\nrequest.setWorkflowExecution(workflowExecution);<br>\ntry {<br>\nworkflowClient.getService().ResetWorkflowExecution(request);<br>\n} catch (TException e) {<br>\ne.printStackTrace();<br>\n}<br>\n}</p>\n"}],"owner":{"account_id":26577945,"reputation":1,"user_id":20203012,"display_name":"jackxu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74087865,"answer_count":2,"score":0,"last_activity_date":1665929968,"creation_date":1665414814,"question_id":74017038,"body_markdown":"i have a cadence workflow with 3 activities. Scenario. the first activity is completed while executing second, the workflow failed after retry limit reached. now the problem has been fixed. how can i restart the failed workflow.\r\n&lt;br&gt;&lt;br&gt;\r\ni have read this question &lt;a href=&quot;https://stackoverflow.com/questions/65104070/how-to-restart-a-timeouted-failed-canceled-terminated-cadence-workflow/65104071#65104071&quot;&gt;related question&lt;/a&gt;.\r\n&lt;br&gt;&lt;br&gt;\r\ni want to know that how can i use reset API in java client sdk to implement it.\r\n&lt;br&gt;&lt;br&gt;\r\ncadence-dependence: compile group: &#39;com.uber.cadence&#39;, name: &#39;cadence-client&#39;, version: &#39;3.5.0&#39;\r\n&lt;br&gt;&lt;br&gt;\r\nthanks for any help.","title":"how to reset a cadence workflow with client sdk?","body":"<p>i have a cadence workflow with 3 activities. Scenario. the first activity is completed while executing second, the workflow failed after retry limit reached. now the problem has been fixed. how can i restart the failed workflow.\n<br><br>\ni have read this question <a href=\"https://stackoverflow.com/questions/65104070/how-to-restart-a-timeouted-failed-canceled-terminated-cadence-workflow/65104071#65104071\">related question</a>.\n<br><br>\ni want to know that how can i use reset API in java client sdk to implement it.\n<br><br>\ncadence-dependence: compile group: 'com.uber.cadence', name: 'cadence-client', version: '3.5.0'\n<br><br>\nthanks for any help.</p>\n"},{"tags":["java","oop","arraylist"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1665929981,"post_id":74087787,"comment_id":130809389,"body_markdown":"can you describe in your own words, what is the goal of this assignment?","body":"can you describe in your own words, what is the goal of this assignment?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1665930742,"post_id":74087787,"comment_id":130809558,"body_markdown":"oh, and your problem is that `board.clone()` doesn&#39;t work as you expect. Try to avoid `clone` in general, it causes trouble more often than it really helps. (Yes, there are valid scenarios for using it, but very rare. This is not one of it.)","body":"oh, and your problem is that <code>board.clone()</code> doesn&#39;t work as you expect. Try to avoid <code>clone</code> in general, it causes trouble more often than it really helps. (Yes, there are valid scenarios for using it, but very rare. This is not one of it.)"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665931054,"post_id":74087787,"comment_id":130809636,"body_markdown":"`board.clone();` is not cloning the *inner* arrays - remember that `char[][]` actually is an array containing `char[]`, so when it is cloned, a new array is created, but it contains the same (reference to) instances as the original array","body":"<code>board.clone();</code> is not cloning the <i>inner</i> arrays - remember that <code>char[][]</code> actually is an array containing <code>char[]</code>, so when it is cloned, a new array is created, but it contains the same (reference to) instances as the original array"},{"owner":{"account_id":26486560,"reputation":1,"user_id":20125047,"display_name":"maksymilian wojciechowski"},"score":0,"creation_date":1665931550,"post_id":74087787,"comment_id":130809741,"body_markdown":"I&#39;m making tic tac toe game with miniMax. The code I show here is just an example of what I have.","body":"I&#39;m making tic tac toe game with miniMax. The code I show here is just an example of what I have."},{"owner":{"account_id":26486560,"reputation":1,"user_id":20125047,"display_name":"maksymilian wojciechowski"},"score":0,"creation_date":1665931698,"post_id":74087787,"comment_id":130809773,"body_markdown":"I have z class called Position, and one of the parameters is char[3][3] which stores the board&#39;s appearance. I would like to make a func that takes the current Position Object and returns a list of possible &quot;next&quot; Position Objects","body":"I have z class called Position, and one of the parameters is char[3][3] which stores the board&#39;s appearance. I would like to make a func that takes the current Position Object and returns a list of possible &quot;next&quot; Position Objects"},{"owner":{"account_id":26486560,"reputation":1,"user_id":20125047,"display_name":"maksymilian wojciechowski"},"score":0,"creation_date":1665932092,"post_id":74087787,"comment_id":130809859,"body_markdown":"And using clone() doesn&#39;t change anything. I&#39;m almost 100% sure that the problem is something with memory allocation but I don&#39;t know what to do","body":"And using clone() doesn&#39;t change anything. I&#39;m almost 100% sure that the problem is something with memory allocation but I don&#39;t know what to do"},{"owner":{"account_id":26486560,"reputation":1,"user_id":20125047,"display_name":"maksymilian wojciechowski"},"score":0,"creation_date":1666270159,"post_id":74087787,"comment_id":130899875,"body_markdown":"Yes! Thank you very much. I couldn&#39;t have done it without you. It works exactly as I intended.","body":"Yes! Thank you very much. I couldn&#39;t have done it without you. It works exactly as I intended."}],"owner":{"account_id":26486560,"reputation":1,"user_id":20125047,"display_name":"maksymilian wojciechowski"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665929792,"creation_date":1665929255,"question_id":74087787,"body_markdown":"I&#39;m trying to make an ArrayList of objects.\r\n\r\nThis is my class.\r\n``` lang-java\r\nclass Student{\r\n    char[][] charArray;\r\n   \r\n    Student(char[][] charArray){\r\n        this.charArray = charArray;\r\n    }\r\n    \r\n    void display(){\r\n        for (int i = 0; i&lt;4; i++){\r\n            System.out.println(this.charArray[i/2][i%2]);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd that&#39;s my main.\r\n\r\n``` lang-java\r\npublic class Testy {\r\n\r\n    public static void main(String[] args) {\r\n  \r\n        ArrayList&lt;Student&gt; classrom = new ArrayList&lt;&gt;();\r\n        char[][] board = {{&#39;X&#39;,&#39;-&#39;},{&#39;-&#39;,&#39;O&#39;}};        \r\n        \r\n        for (int i = 0; i&lt;4; i++){\r\n            char[][] temp = board.clone();\r\n            if(temp[i/2][i%2]!=&#39;X&#39;&amp;&amp;temp[i/2][i%2]!=&#39;O&#39;){\r\n                temp[i/2][i%2] =&#39;X&#39;;\r\n                classrom.add(new Student(temp.clone()));\r\n            }\r\n        }\r\n        \r\n        for(Student i: classrom){\r\n            System.out.println(i);\r\n            i.display();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI get this:\r\n``` lang-none\r\ntest.Student@2d98a335\r\nX\r\nX\r\nX\r\nO\r\ntest.Student@16b98e56\r\nX\r\nX\r\nX\r\nO\r\n```\r\nWhen i expect something like:\r\n``` lang-none\r\ntest.Student@2d98a335\r\nX\r\nX\r\n&#39;-&#39;\r\nO\r\ntest.Student@16b98e56\r\nX\r\n&#39;-&#39;\r\nX\r\nO\r\n```\r\nI think it&#39;s something with assigning multiple objects parameter to the same place in memory but i don&#39;t know what to do. Please help.","title":"Making objects in a for loop with 2d char arrays","body":"<p>I'm trying to make an ArrayList of objects.</p>\n<p>This is my class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Student{\n    char[][] charArray;\n   \n    Student(char[][] charArray){\n        this.charArray = charArray;\n    }\n    \n    void display(){\n        for (int i = 0; i&lt;4; i++){\n            System.out.println(this.charArray[i/2][i%2]);\n        }\n    }\n}\n</code></pre>\n<p>And that's my main.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Testy {\n\n    public static void main(String[] args) {\n  \n        ArrayList&lt;Student&gt; classrom = new ArrayList&lt;&gt;();\n        char[][] board = {{'X','-'},{'-','O'}};        \n        \n        for (int i = 0; i&lt;4; i++){\n            char[][] temp = board.clone();\n            if(temp[i/2][i%2]!='X'&amp;&amp;temp[i/2][i%2]!='O'){\n                temp[i/2][i%2] ='X';\n                classrom.add(new Student(temp.clone()));\n            }\n        }\n        \n        for(Student i: classrom){\n            System.out.println(i);\n            i.display();\n        }\n    }\n}\n</code></pre>\n<p>I get this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>test.Student@2d98a335\nX\nX\nX\nO\ntest.Student@16b98e56\nX\nX\nX\nO\n</code></pre>\n<p>When i expect something like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>test.Student@2d98a335\nX\nX\n'-'\nO\ntest.Student@16b98e56\nX\n'-'\nX\nO\n</code></pre>\n<p>I think it's something with assigning multiple objects parameter to the same place in memory but i don't know what to do. Please help.</p>\n"},{"tags":["java","integer","double"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1665929322,"post_id":74087789,"comment_id":130809238,"body_markdown":"the division is NOT using `double`, just the result is being assigned to the  `double` || specified in [JLS 15.17. Multiplicative Operators](https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.17-320): &quot;* If the promoted type is int or long, then integer arithmetic is performed.*&quot;","body":"the division is NOT using <code>double</code>, just the result is being assigned to the  <code>double</code> || specified in <a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.17-320\" rel=\"nofollow noreferrer\">JLS 15.17. Multiplicative Operators</a>: &quot;* If the promoted type is int or long, then integer arithmetic is performed.*&quot;"},{"owner":{"account_id":16545524,"reputation":97,"user_id":11955120,"display_name":"Mansour Faouziel"},"score":0,"creation_date":1665929372,"post_id":74087789,"comment_id":130809249,"body_markdown":"Use the float type","body":"Use the float type"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665929806,"post_id":74087789,"comment_id":130809346,"body_markdown":"BTW code is formatted  by using single back-ticks ` around it or, for multi-line code, using 3 (or more) back-ticks on a line before and after the code (or indenting the code by at least 4 spaces)","body":"BTW code is formatted  by using single back-ticks ` around it or, for multi-line code, using 3 (or more) back-ticks on a line before and after the code (or indenting the code by at least 4 spaces)"}],"owner":{"account_id":24172649,"reputation":31,"user_id":18134515,"display_name":"Diwash Mainali"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1665929753,"answer_count":0,"score":0,"last_activity_date":1665929355,"creation_date":1665929260,"question_id":74087789,"body_markdown":"Why [**double divide_ = 9 / 2;**] gives output of 4.0? while [**double divide = (double) 9 / 2**] gives an output of 4.5?\r\n\r\n","title":"Why does 9/2 gives 4 as an output while using double in java","body":"<p>Why [<strong>double divide_ = 9 / 2;</strong>] gives output of 4.0? while [<strong>double divide = (double) 9 / 2</strong>] gives an output of 4.5?</p>\n"},{"tags":["java","encoding","io","character-encoding","ldap"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665838476,"post_id":74079587,"comment_id":130794854,"body_markdown":"Yes you probably need to use an 7/8 bit encoding as that letter takes two bytes in UTF-8. ```String iAcute = new String(new byte[] { (byte)237 }, &quot;ISO-8859-1&quot;);```","body":"Yes you probably need to use an 7/8 bit encoding as that letter takes two bytes in UTF-8. <code>String iAcute = new String(new byte[] { (byte)237 }, &quot;ISO-8859-1&quot;);</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665838935,"post_id":74079587,"comment_id":130794970,"body_markdown":"(Which is of course the same as) ```String iAcute = new String(new byte[] { -19 }, &quot;ISO-8859-1&quot;);``` But it&#39;s probably not such a good idea to guess the encoding like I did or other characters might not be what you expect","body":"(Which is of course the same as) <code>String iAcute = new String(new byte[] { -19 }, &quot;ISO-8859-1&quot;);</code> But it&#39;s probably not such a good idea to guess the encoding like I did or other characters might not be what you expect"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":2,"creation_date":1665839041,"post_id":74079587,"comment_id":130795002,"body_markdown":"&quot;*I am writing a stream of bytes to a text file*&quot; -- well there&#39;s your problem right there.  Or at least *a* problem.  Bytes should go to a binary file.  If you want to write *text* then you need to handle encoding appropriately.  If you want the resulting file to be byte-for-byte identical to the data retrieved from LDAP then avoid converting the bytes to characters and just dump them as received.","body":"&quot;<i>I am writing a stream of bytes to a text file</i>&quot; -- well there&#39;s your problem right there.  Or at least <i>a</i> problem.  Bytes should go to a binary file.  If you want to write <i>text</i> then you need to handle encoding appropriately.  If you want the resulting file to be byte-for-byte identical to the data retrieved from LDAP then avoid converting the bytes to characters and just dump them as received."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1665839417,"post_id":74079587,"comment_id":130795112,"body_markdown":"And it&#39;s possible that your program is already doing that just fine, but whatever you&#39;re using to view the result is assuming the wrong encoding.  That could be interpreted as the resulting binary file not conforming to the text conventions of your system (*i.e.* back to binary *vs.* text).","body":"And it&#39;s possible that your program is already doing that just fine, but whatever you&#39;re using to view the result is assuming the wrong encoding.  That could be interpreted as the resulting binary file not conforming to the text conventions of your system (<i>i.e.</i> back to binary <i>vs.</i> text)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1665839708,"post_id":74079587,"comment_id":130795200,"body_markdown":"I missed this: *...to single byte ones like ASCII or UTF-8 ?* UTF-8 is *not* a single-byte encoding. It has a variable number of bytes. &#39;Regular&#39; letters and symbols might be one byte in UTF-8 but not all.","body":"I missed this: <i>...to single byte ones like ASCII or UTF-8 ?</i> UTF-8 is <i>not</i> a single-byte encoding. It has a variable number of bytes. &#39;Regular&#39; letters and symbols might be one byte in UTF-8 but not all."},{"owner":{"account_id":3398201,"reputation":970,"user_id":2851184,"accept_rate":43,"display_name":"Alok Mishra"},"score":0,"creation_date":1665840797,"post_id":74079587,"comment_id":130795427,"body_markdown":"@JohnBollinger you are right but this byte conversion is happening inside the library, I can&#39;t do much about it. The library is also not supported any more. Is there any other library to connect to LDAP without JNDI ?","body":"@JohnBollinger you are right but this byte conversion is happening inside the library, I can&#39;t do much about it. The library is also not supported any more. Is there any other library to connect to LDAP without JNDI ?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665840885,"post_id":74079587,"comment_id":130795446,"body_markdown":"Which &quot;conversion&quot; are you referring to? There actually *is* no conversion. What is happening is that *you* are *interpreting* it as a character.","body":"Which &quot;conversion&quot; are you referring to? There actually <i>is</i> no conversion. What is happening is that <i>you</i> are <i>interpreting</i> it as a character."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1665841795,"post_id":74079587,"comment_id":130795618,"body_markdown":"@AlokMishra, the code excerpt presented in the question is not itself problematic in any way.  Bytes are being read from an `InputStream` and stored in an array of `byte`s.  The cast reflects some technical details of `InputStream`s, and does not corrupt the data.  In particular, converting the `int` value of 237 to a `byte` value of -19 is the normal and expected behavior in such a case.","body":"@AlokMishra, the code excerpt presented in the question is not itself problematic in any way.  Bytes are being read from an <code>InputStream</code> and stored in an array of <code>byte</code>s.  The cast reflects some technical details of <code>InputStream</code>s, and does not corrupt the data.  In particular, converting the <code>int</code> value of 237 to a <code>byte</code> value of -19 is the normal and expected behavior in such a case."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1665842676,"post_id":74079587,"comment_id":130795810,"body_markdown":"&quot;*do I need to change the source encoding to single byte ones like ASCII or UTF-8*?&quot; - unless you instruct it otherwise, the Netscape LDAP SDK will assume that character data exchanged with the server should be / will be encoded in UTF-8.  It looks like that expectation is not being fulfilled in your case. There is probably a way to configure your LDAP connection to request that specifically, but I am not familiar enough with this 20-year-old API to give you detailed recommendations. I think these are the docs: https://docs.oracle.com/cd/E19957-01/816-5618-10/netscape/ldap/package-summary.html","body":"&quot;<i>do I need to change the source encoding to single byte ones like ASCII or UTF-8</i>?&quot; - unless you instruct it otherwise, the Netscape LDAP SDK will assume that character data exchanged with the server should be / will be encoded in UTF-8.  It looks like that expectation is not being fulfilled in your case. There is probably a way to configure your LDAP connection to request that specifically, but I am not familiar enough with this 20-year-old API to give you detailed recommendations. I think these are the docs: <a href=\"https://docs.oracle.com/cd/E19957-01/816-5618-10/netscape/ldap/package-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/816-5618-10/netscape/ldap/&hellip;</a>"},{"owner":{"account_id":3398201,"reputation":970,"user_id":2851184,"accept_rate":43,"display_name":"Alok Mishra"},"score":0,"creation_date":1665846798,"post_id":74079587,"comment_id":130796726,"body_markdown":"@g00se I was referring to int to byte conversion which is happening inside the library. This byte array is then passed to String,  new String(byte[], Charset) , this is where the overflown byte value -19 (int =237) is not being interpreted by String. Can we restore 237 from -19 ?","body":"@g00se I was referring to int to byte conversion which is happening inside the library. This byte array is then passed to String,  new String(byte[], Charset) , this is where the overflown byte value -19 (int =237) is not being interpreted by String. Can we restore 237 from -19 ?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1665850140,"post_id":74079587,"comment_id":130797402,"body_markdown":"The byte value -19 *is* 237.  They are *exactly the same bits.*  Whether a value is considered signed or unsigned is simply a matter of how the raw value is interpreted.  [Hint:  what is 256 + (−19)?]  `m_value` is completely correct.  The problem here, as others have said, is that you are viewing your file using the wrong charset.","body":"The byte value -19 <i>is</i> 237.  They are <i>exactly the same bits.</i>  Whether a value is considered signed or unsigned is simply a matter of how the raw value is interpreted.  [Hint:  what is 256 + (−19)?]  <code>m_value</code> is completely correct.  The problem here, as others have said, is that you are viewing your file using the wrong charset."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1665851575,"post_id":74079587,"comment_id":130797743,"body_markdown":"Yes. I thought I&#39;d already demonstrated that ;)","body":"Yes. I thought I&#39;d already demonstrated that ;)"},{"owner":{"account_id":3398201,"reputation":970,"user_id":2851184,"accept_rate":43,"display_name":"Alok Mishra"},"score":0,"creation_date":1665859380,"post_id":74079587,"comment_id":130799344,"body_markdown":"@g00se `new String(new byte[] { (byte)237 }, &quot;ISO-8859-1&quot;)` this is printing � on the console. Tried with UTF-8, UTF-16 ASCII as well, same result.","body":"@g00se <code>new String(new byte[] { (byte)237 }, &quot;ISO-8859-1&quot;)</code> this is printing � on the console. Tried with UTF-8, UTF-16 ASCII as well, same result."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665866458,"post_id":74079587,"comment_id":130800710,"body_markdown":"What OS and what does ```java -version``` give?","body":"What OS and what does <code>java -version</code> give?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1665929867,"post_id":74079587,"comment_id":130809365,"body_markdown":"Your &#39;bingo..&#39; is essentially no different from the code I gave, where you responded *this is printing � on the console. Tried with UTF-8, UTF-16 ASCII as well, same result.* The fact that you used Cp1252 where I used ISO-8859-1 is immaterial as the encoding is identical in each","body":"Your &#39;bingo..&#39; is essentially no different from the code I gave, where you responded <i>this is printing � on the console. Tried with UTF-8, UTF-16 ASCII as well, same result.</i> The fact that you used Cp1252 where I used ISO-8859-1 is immaterial as the encoding is identical in each"},{"owner":{"account_id":3398201,"reputation":970,"user_id":2851184,"accept_rate":43,"display_name":"Alok Mishra"},"score":0,"creation_date":1665935628,"post_id":74079587,"comment_id":130810650,"body_markdown":"It might have been my mistake, it was late night :-) when I ran your code. `new String(new byte[] { (byte)237 }, &quot;ISO-8859-1&quot;)` prints &#237;.","body":"It might have been my mistake, it was late night :-) when I ran your code. <code>new String(new byte[] { (byte)237 }, &quot;ISO-8859-1&quot;)</code> prints &#237;."}],"owner":{"account_id":3398201,"reputation":970,"user_id":2851184,"accept_rate":43,"display_name":"Alok Mishra"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665928771,"creation_date":1665838121,"question_id":74079587,"body_markdown":"I am facing a problem in which when I am writing a stream of bytes to a text file one of the characters is showing as Corrupted like this (the ugly question mark)- Ingenier�a. I am getting this byte of stream from an LDAP server. I am using Netscape&#39;s ldapsdk-4.1 library to connect to the LDAP server. While debugging I found out that for the corrupted character BufferedInputStream.read() returns 237 and the ldapsdk library is trying to convert it into a byte, like this\r\n     \r\n    m_value[i] = (byte) stream.read();        //class BEROctetString:152   \r\nand that&#39;s where the byte value overflows to to -19. \r\n\r\nMy question is, How can I fix this so that I get correct character value ? or do I need to change the source encoding to single byte ones like ASCII or UTF-8 ? Please suggest if there is any other way of fixing it.\r\n\r\nThanks in advance.\r\n\r\nEdit:\r\n\r\nI am performing a LDAP search and internally the search results are retrieved in the form of bytes using using SocketInputStream.\r\n\r\nHow can I retrieve the original search results, without any corrupted character, from the array of the bytes I received?\r\n\r\nEdit:\r\n\r\nAs suggested by JohnBollinger in the comments, I dumped the bytes to .txt file as is and opened the file in notepad++ and it displayed all the characters correctly. From notepad++ I checked the file encoding and it was ANSI(aka Cp1252). I wrote a small program to verify it programmatically and it worked. here is the method- \r\n\r\n    private static void bingoWithCpEncoding() throws IOException {\r\n        byte[] byt3 = { 73, 110, 103, 101, 110, 105, 101, 114, -19, 97 };\r\n        ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n        buffer.write(byt3);\r\n        String text = buffer.toString(&quot;Cp1252&quot;); // UTF-8 was not working\r\n        System.out.print(text);\r\n    }\r\nit prints &quot;Ingenier&#237;a&quot;. I copied the byte array while code debugging.\r\n\r\nnetscape ldapsdk&#39;s LDAPAttribute class was trying to encode these bytes in to UTF-8.\r\n\r\n    //\r\n        public Enumeration getStringValues() {\r\n            Vector v = new Vector();\r\n            synchronized(this) {\r\n                try {\r\n                    for (int i=0; i&lt;values.length; i++) {\r\n                        if ( values[i] != null ) {\r\n                            v.addElement(new String ((byte[])values[i], &quot;UTF8&quot;));\r\n                        } else {\r\n                            v.addElement( new String( &quot;&quot; ) );\r\n                        }\r\n                    }\r\n                } catch ( Exception e ) {\r\n                    return null;\r\n                }\r\n            }\r\n            return v.elements();\r\n        }\r\n","title":"garbage character showing due to encoding mismatch","body":"<p>I am facing a problem in which when I am writing a stream of bytes to a text file one of the characters is showing as Corrupted like this (the ugly question mark)- Ingenier�a. I am getting this byte of stream from an LDAP server. I am using Netscape's ldapsdk-4.1 library to connect to the LDAP server. While debugging I found out that for the corrupted character BufferedInputStream.read() returns 237 and the ldapsdk library is trying to convert it into a byte, like this</p>\n<pre><code>m_value[i] = (byte) stream.read();        //class BEROctetString:152   \n</code></pre>\n<p>and that's where the byte value overflows to to -19.</p>\n<p>My question is, How can I fix this so that I get correct character value ? or do I need to change the source encoding to single byte ones like ASCII or UTF-8 ? Please suggest if there is any other way of fixing it.</p>\n<p>Thanks in advance.</p>\n<p>Edit:</p>\n<p>I am performing a LDAP search and internally the search results are retrieved in the form of bytes using using SocketInputStream.</p>\n<p>How can I retrieve the original search results, without any corrupted character, from the array of the bytes I received?</p>\n<p>Edit:</p>\n<p>As suggested by JohnBollinger in the comments, I dumped the bytes to .txt file as is and opened the file in notepad++ and it displayed all the characters correctly. From notepad++ I checked the file encoding and it was ANSI(aka Cp1252). I wrote a small program to verify it programmatically and it worked. here is the method-</p>\n<pre><code>private static void bingoWithCpEncoding() throws IOException {\n    byte[] byt3 = { 73, 110, 103, 101, 110, 105, 101, 114, -19, 97 };\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n    buffer.write(byt3);\n    String text = buffer.toString(&quot;Cp1252&quot;); // UTF-8 was not working\n    System.out.print(text);\n}\n</code></pre>\n<p>it prints &quot;Ingeniería&quot;. I copied the byte array while code debugging.</p>\n<p>netscape ldapsdk's LDAPAttribute class was trying to encode these bytes in to UTF-8.</p>\n<pre><code>//\n    public Enumeration getStringValues() {\n        Vector v = new Vector();\n        synchronized(this) {\n            try {\n                for (int i=0; i&lt;values.length; i++) {\n                    if ( values[i] != null ) {\n                        v.addElement(new String ((byte[])values[i], &quot;UTF8&quot;));\n                    } else {\n                        v.addElement( new String( &quot;&quot; ) );\n                    }\n                }\n            } catch ( Exception e ) {\n                return null;\n            }\n        }\n        return v.elements();\n    }\n</code></pre>\n"},{"tags":["java","spring","prototype-scope"],"comments":[{"owner":{"account_id":371004,"reputation":5445,"user_id":719278,"accept_rate":75,"display_name":"Junchen Liu"},"score":1,"creation_date":1447683576,"post_id":9664810,"comment_id":55243376,"body_markdown":"I am surprised this short question with no code in it, has not been marked down as not constructive, too broad.  don&#39;t get me wrong, I think this question is great","body":"I am surprised this short question with no code in it, has not been marked down as not constructive, too broad.  don&#39;t get me wrong, I think this question is great"}],"answers":[{"comments":[{"owner":{"account_id":290097,"reputation":420,"user_id":591451,"display_name":"Neil Han"},"score":0,"creation_date":1428386385,"post_id":9665545,"comment_id":47129319,"body_markdown":"This lookup-method is explained by Spring doc:  http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-method-injection","body":"This lookup-method is explained by Spring doc:  <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-method-injection\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/spring-framework-referenc&zwnj;&#8203;e/&hellip;</a>"}],"tags":[],"owner":{"account_id":293433,"reputation":8693,"user_id":596720,"accept_rate":78,"display_name":"Abe"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1331548808,"creation_date":1331548808,"answer_id":9665545,"question_id":9664810,"body_markdown":"I have used prototype mostly in conjunction with spring `lookup-method`. My application is a [game server][1] that needs to decode incoming bytes at tcp port. Consider the following bean definition\n\n    &lt;bean id=&quot;channelBufferProtocol&quot; class=&quot;org.menacheri.protocols.impl.ChannelBufferProtocol&quot;&gt;\n        &lt;lookup-method name=&quot;createLengthBasedFrameDecoder&quot; bean=&quot;lengthFieldBasedFrameDecoder&quot;/&gt;\n        &lt;property name=&quot;eventDecoder&quot; ref=&quot;eventDecoder&quot;&gt;&lt;/property&gt;\n        &lt;property name=&quot;lengthFieldPrepender&quot; ref=&quot;lengthFieldPrepender&quot;&gt;&lt;/property&gt;\n        &lt;property name=&quot;eventEncoder&quot; ref=&quot;eventEncoder&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;\nInside the protocol implementation class, I have the following code to create the frame decoder `pipeline.addLast(&quot;lengthDecoder&quot;, createLengthBasedFrameDecoder());` When this method is invoked, spring will create a new frame decoder instance and return it.\n\nThe bean returned by `bean=&quot;lengthFieldBasedFrameDecoder&quot;` needs to be of scope `prototype`, since it is a stateful bean in my app.\n\n**Note:** A protocol is nothing but a specific set of decoders and encoders chained together. &quot;Chain of responsibility&quot; design pattern.\n\n  [1]: https://github.com/menacher/java-game-server","title":"Spring prototype scope - Use Cases?","body":"<p>I have used prototype mostly in conjunction with spring <code>lookup-method</code>. My application is a <a href=\"https://github.com/menacher/java-game-server\" rel=\"nofollow noreferrer\">game server</a> that needs to decode incoming bytes at tcp port. Consider the following bean definition</p>\n<pre><code>&lt;bean id=&quot;channelBufferProtocol&quot; class=&quot;org.menacheri.protocols.impl.ChannelBufferProtocol&quot;&gt;\n    &lt;lookup-method name=&quot;createLengthBasedFrameDecoder&quot; bean=&quot;lengthFieldBasedFrameDecoder&quot;/&gt;\n    &lt;property name=&quot;eventDecoder&quot; ref=&quot;eventDecoder&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;lengthFieldPrepender&quot; ref=&quot;lengthFieldPrepender&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;eventEncoder&quot; ref=&quot;eventEncoder&quot;&gt;&lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Inside the protocol implementation class, I have the following code to create the frame decoder <code>pipeline.addLast(&quot;lengthDecoder&quot;, createLengthBasedFrameDecoder());</code> When this method is invoked, spring will create a new frame decoder instance and return it.</p>\n<p>The bean returned by <code>bean=&quot;lengthFieldBasedFrameDecoder&quot;</code> needs to be of scope <code>prototype</code>, since it is a stateful bean in my app.</p>\n<p><strong>Note:</strong> A protocol is nothing but a specific set of decoders and encoders chained together. &quot;Chain of responsibility&quot; design pattern.</p>\n"},{"tags":[],"owner":{"account_id":226469,"reputation":12047,"user_id":487534,"accept_rate":90,"display_name":"jabal"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1331556407,"creation_date":1331556407,"answer_id":9667267,"question_id":9664810,"body_markdown":"I used prototype beans to declare configured form elements (a textbox configured to validate names, e-mail addresses for example) and get &quot;living&quot; instances of them for every form being created in my webapp. The details are not important, only the principle, that I would summarize this way:\r\n\r\n - There is a class that has many config parameters\r\n - You need to create instances of it with a set of predefined configuration (fancy1, fancy2, stc.)\r\n - Think of the `applicationContext.getBean(&quot;myBeanConfiguredFancy1&quot;)` as a **kind of factory method** that creates the instance as preconfigured in the xml\r\n\r\n\r\n","title":"Spring prototype scope - Use Cases?","body":"<p>I used prototype beans to declare configured form elements (a textbox configured to validate names, e-mail addresses for example) and get \"living\" instances of them for every form being created in my webapp. The details are not important, only the principle, that I would summarize this way:</p>\n\n<ul>\n<li>There is a class that has many config parameters</li>\n<li>You need to create instances of it with a set of predefined configuration (fancy1, fancy2, stc.)</li>\n<li>Think of the <code>applicationContext.getBean(\"myBeanConfiguredFancy1\")</code> as a <strong>kind of factory method</strong> that creates the instance as preconfigured in the xml</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":51513,"reputation":1175,"user_id":153940,"accept_rate":58,"display_name":"Kumar Manish"},"score":0,"creation_date":1484402585,"post_id":33082726,"comment_id":70500315,"body_markdown":"Then shouldn&#39;t it be request scoped instead of prototype scoped?","body":"Then shouldn&#39;t it be request scoped instead of prototype scoped?"},{"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"score":0,"creation_date":1573549002,"post_id":33082726,"comment_id":103908259,"body_markdown":"A request can have multiple instances of the same entity.","body":"A request can have multiple instances of the same entity."},{"owner":{"account_id":294084,"reputation":977,"user_id":597767,"accept_rate":75,"display_name":"Doradus"},"score":0,"creation_date":1650212887,"post_id":33082726,"comment_id":127058810,"body_markdown":"When would that make sense?","body":"When would that make sense?"}],"tags":[],"owner":{"account_id":2103434,"reputation":21,"user_id":1870419,"display_name":"Rupesh Deo"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1444657344,"creation_date":1444657344,"answer_id":33082726,"question_id":9664810,"body_markdown":"We can use prototype scope in case of model classes(also called as Entities in hibernate) as application need different instances of model class for each thread/request.","title":"Spring prototype scope - Use Cases?","body":"<p>We can use prototype scope in case of model classes(also called as Entities in hibernate) as application need different instances of model class for each thread/request.</p>\n"},{"tags":[],"owner":{"account_id":1708812,"reputation":790,"user_id":1567291,"accept_rate":77,"display_name":"bytor99999"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1665928150,"creation_date":1461174581,"answer_id":36751463,"question_id":9664810,"body_markdown":"As someone who previously worked at SpringSource and have talked to the developers on this topic. Here is my take. Prototype is great for testing things out, hence the name prototype and not create new or something more description of creating a new instance of the bean each and every time you request it from the Spring container. \r\n\r\nI have also found in my use over the years that I cannot think of any other place where prototype makes sense in any real-world production application. If your object holds state, it typically shouldn&#39;t be a Spring bean. I have found in all the applications I have worked on that all beans are Services, Repositories, and Singleton non state holding objects where I need to add features like Transactionality, JPA, JMS and the likes that give us the enterprise features that POJOs don&#39;t have.\r\n\r\nThe objects in my system that hold state are my Entities and View DTOs maybe, or other things that just make no sense to be a Spring Bean. So therefore in my applications in production there hasn&#39;t been a single &quot;prototype&quot; bean. ","title":"Spring prototype scope - Use Cases?","body":"<p>As someone who previously worked at SpringSource and have talked to the developers on this topic. Here is my take. Prototype is great for testing things out, hence the name prototype and not create new or something more description of creating a new instance of the bean each and every time you request it from the Spring container.</p>\n<p>I have also found in my use over the years that I cannot think of any other place where prototype makes sense in any real-world production application. If your object holds state, it typically shouldn't be a Spring bean. I have found in all the applications I have worked on that all beans are Services, Repositories, and Singleton non state holding objects where I need to add features like Transactionality, JPA, JMS and the likes that give us the enterprise features that POJOs don't have.</p>\n<p>The objects in my system that hold state are my Entities and View DTOs maybe, or other things that just make no sense to be a Spring Bean. So therefore in my applications in production there hasn't been a single &quot;prototype&quot; bean.</p>\n"}],"owner":{"account_id":206866,"reputation":1851,"user_id":456423,"accept_rate":58,"display_name":"Tarun Sapra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19276,"favorite_count":0,"down_vote_count":1,"up_vote_count":47,"answer_count":4,"score":46,"last_activity_date":1665928150,"creation_date":1331545784,"question_id":9664810,"body_markdown":"I have clear understanding of the various scopes of Spring beans. But I am looking for some use cases of prototype scope of a bean in enterprise tier projects. It would be great if you can share some real life use cases of the _prototype_ scope (not the _request_ scope).","title":"Spring prototype scope - Use Cases?","body":"<p>I have clear understanding of the various scopes of Spring beans. But I am looking for some use cases of prototype scope of a bean in enterprise tier projects. It would be great if you can share some real life use cases of the <em>prototype</em> scope (not the <em>request</em> scope).</p>\n"},{"tags":["java","spring-boot","socket.io","socket.io-java-client"],"comments":[{"owner":{"account_id":22540249,"reputation":911,"user_id":16730900,"display_name":"jh316"},"score":0,"creation_date":1665584151,"post_id":74037831,"comment_id":130735549,"body_markdown":"Could it be possible that the issue is that the Socket objects&#39; scope are not long enough to live after the for loop? So they&#39;re getting garbage collected and disconnecting?","body":"Could it be possible that the issue is that the Socket objects&#39; scope are not long enough to live after the for loop? So they&#39;re getting garbage collected and disconnecting?"}],"owner":{"account_id":16097021,"reputation":251,"user_id":12176903,"display_name":"Areej Fatimah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":554,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1665926385,"creation_date":1665558973,"question_id":74037831,"body_markdown":"I have implemented socket.io client side in java spring boot using [https://socketio.github.io/socket.io-client-java/installation.html][1], with thread pool executor. Now my socket connections are build successfully, but after 50s to 1 minute, they start getting disconnected. How to sustain socket connections? My code is as below\r\n\r\n    \r\n        CountDownLatch lock = new CountDownLatch(200);\r\n        ScheduledExecutorService executor = Executors.newScheduledThreadPool(200);\r\n        ScheduledFuture&lt;?&gt; future;\r\n        for(int i=1;i&lt;=200;i++) {\r\n           \r\n            future= executor.scheduleAtFixedRate(() -&gt; {\r\n\r\n                Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n                map.put(&quot;token&quot;, &quot;abc&quot;);\r\n\r\n                IO.Options options = IO.Options.builder()\r\n                        .setPath(&quot;/socket.io&quot;)\r\n                        .setTransports(new String[]{Polling.NAME,WebSocket.NAME})\r\n                        .setAuth(map)\r\n                        .build();\r\n\r\n                Socket socket = IO.socket(URI.create(&quot;wss://localhost:3000&quot;), options);\r\n\r\n                socket.on(&quot;connect_error&quot;, new Emitter.Listener() {\r\n                    @Override\r\n                    public void call(Object... args) {\r\n                        System.out.println(args[0]);\r\n                    }\r\n                });\r\n\r\n                socket.on(&quot;connect&quot;, new Emitter.Listener() {\r\n                    @Override\r\n                    public void call(Object... args) {\r\n                        System.out.println(&quot;Socket connection &quot;+i+&quot; successfully created&quot;);\r\n                    }\r\n                });\r\n                socket.on(&quot;disconnect&quot;, new Emitter.Listener() {\r\n                    @Override\r\n                    public void call(Object... args) {\r\n                        System.out.println(&quot;Socket connection &quot;+i+&quot; disconnected&quot;);\r\n                    }\r\n                });\r\n\r\n                socket.connect();\r\n                lock.countDown();\r\n            }, 1000, delay, TimeUnit.MILLISECONDS);\r\n\r\n            lock.await(delay, TimeUnit.MILLISECONDS);\r\n            future.cancel(true);\r\n\r\n        }//end of for loop\r\n        executor.shutdown();\r\nMy java `socket.io-client` implementation version is as follow that is compatible with socket.io server v4.x.\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;io.socket&lt;/groupId&gt;\r\n    &lt;artifactId&gt;socket.io-client&lt;/artifactId&gt;\r\n    &lt;version&gt;2.1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n**Output**\r\n```\r\nSocket connection 1 successfully created\r\nSocket connection 2 successfully created\r\nSocket connection 3 successfully created\r\nSocket connection 4 successfully created\r\nSocket connection 5 successfully created\r\nSocket connection 6 successfully created\r\nSocket connection 7 successfully created\r\nSocket connection 8 successfully created\r\nSocket connection 9 successfully created\r\nSocket connection 10 successfully created\r\nSocket connection 11 successfully created\r\nSocket connection 12 successfully created\r\nSocket connection 9 disconnected\r\nSocket connection 13 successfully created\r\n....\r\n....\r\n```\r\nHow to prevent these disconnections occuring after few seconds?\r\n\r\nVerifying `socket.id()`\r\n```\r\nsocket.on(&quot;connect&quot;, new Emitter.Listener() {\r\n   @Override\r\n   public void call(Object... args) {\r\n      System.out.println(socket.id()+&quot; &quot;+i+&quot; connected&quot;);\r\n   }\r\n });\r\nsocket.on(&quot;disconnect&quot;, new Emitter.Listener() {\r\n   @Override\r\n   public void call(Object... args) {\r\n      System.out.println(socket.id()+&quot; &quot;+i+&quot; disconnected&quot;);\r\n   }\r\n });\r\n```\r\n**Output** \r\n   \r\n```\r\nnull 1 connected\r\nnull 2 connected\r\nnull 3 connected\r\n....\r\nnull 4 disconnected\r\nG6yGTZp-AU2Mgy_kAAMl 35 connected\r\n....\r\nG01iFSB2Y98jrwNNAASH 78 disconnected\r\n....\r\nv08qy3AzhbB6V8LXAALL 200 connected\r\n```\r\nWhy `socket.id()` is returning a `null` value for some and valid id for some? \r\n\r\n**Edited** : Let&#39;s say if thread in a thread pool finishes its task &amp; terminates after 60 s of inactivity, that&#39;s casuing the disconnections, then which service executor is used to support long lived thread use cases? Or once a thread terminates and now is idle or waiting, the same is scheduled for next task, which cause disconnection behaviour from previous session?\r\nIf socket server &amp; client are not sending data in some time, the connection get closed due to this reason?\r\n\r\n  [1]: https://socketio.github.io/socket.io-client-java/installation.html","title":"Java socket io client connection disconnects","body":"<p>I have implemented socket.io client side in java spring boot using <a href=\"https://socketio.github.io/socket.io-client-java/installation.html\" rel=\"nofollow noreferrer\">https://socketio.github.io/socket.io-client-java/installation.html</a>, with thread pool executor. Now my socket connections are build successfully, but after 50s to 1 minute, they start getting disconnected. How to sustain socket connections? My code is as below</p>\n<pre><code>    CountDownLatch lock = new CountDownLatch(200);\n    ScheduledExecutorService executor = Executors.newScheduledThreadPool(200);\n    ScheduledFuture&lt;?&gt; future;\n    for(int i=1;i&lt;=200;i++) {\n       \n        future= executor.scheduleAtFixedRate(() -&gt; {\n\n            Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n            map.put(&quot;token&quot;, &quot;abc&quot;);\n\n            IO.Options options = IO.Options.builder()\n                    .setPath(&quot;/socket.io&quot;)\n                    .setTransports(new String[]{Polling.NAME,WebSocket.NAME})\n                    .setAuth(map)\n                    .build();\n\n            Socket socket = IO.socket(URI.create(&quot;wss://localhost:3000&quot;), options);\n\n            socket.on(&quot;connect_error&quot;, new Emitter.Listener() {\n                @Override\n                public void call(Object... args) {\n                    System.out.println(args[0]);\n                }\n            });\n\n            socket.on(&quot;connect&quot;, new Emitter.Listener() {\n                @Override\n                public void call(Object... args) {\n                    System.out.println(&quot;Socket connection &quot;+i+&quot; successfully created&quot;);\n                }\n            });\n            socket.on(&quot;disconnect&quot;, new Emitter.Listener() {\n                @Override\n                public void call(Object... args) {\n                    System.out.println(&quot;Socket connection &quot;+i+&quot; disconnected&quot;);\n                }\n            });\n\n            socket.connect();\n            lock.countDown();\n        }, 1000, delay, TimeUnit.MILLISECONDS);\n\n        lock.await(delay, TimeUnit.MILLISECONDS);\n        future.cancel(true);\n\n    }//end of for loop\n    executor.shutdown();\n</code></pre>\n<p>My java <code>socket.io-client</code> implementation version is as follow that is compatible with socket.io server v4.x.</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;io.socket&lt;/groupId&gt;\n&lt;artifactId&gt;socket.io-client&lt;/artifactId&gt;\n&lt;version&gt;2.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>Socket connection 1 successfully created\nSocket connection 2 successfully created\nSocket connection 3 successfully created\nSocket connection 4 successfully created\nSocket connection 5 successfully created\nSocket connection 6 successfully created\nSocket connection 7 successfully created\nSocket connection 8 successfully created\nSocket connection 9 successfully created\nSocket connection 10 successfully created\nSocket connection 11 successfully created\nSocket connection 12 successfully created\nSocket connection 9 disconnected\nSocket connection 13 successfully created\n....\n....\n</code></pre>\n<p>How to prevent these disconnections occuring after few seconds?</p>\n<p>Verifying <code>socket.id()</code></p>\n<pre><code>socket.on(&quot;connect&quot;, new Emitter.Listener() {\n   @Override\n   public void call(Object... args) {\n      System.out.println(socket.id()+&quot; &quot;+i+&quot; connected&quot;);\n   }\n });\nsocket.on(&quot;disconnect&quot;, new Emitter.Listener() {\n   @Override\n   public void call(Object... args) {\n      System.out.println(socket.id()+&quot; &quot;+i+&quot; disconnected&quot;);\n   }\n });\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>null 1 connected\nnull 2 connected\nnull 3 connected\n....\nnull 4 disconnected\nG6yGTZp-AU2Mgy_kAAMl 35 connected\n....\nG01iFSB2Y98jrwNNAASH 78 disconnected\n....\nv08qy3AzhbB6V8LXAALL 200 connected\n</code></pre>\n<p>Why <code>socket.id()</code> is returning a <code>null</code> value for some and valid id for some?</p>\n<p><strong>Edited</strong> : Let's say if thread in a thread pool finishes its task &amp; terminates after 60 s of inactivity, that's casuing the disconnections, then which service executor is used to support long lived thread use cases? Or once a thread terminates and now is idle or waiting, the same is scheduled for next task, which cause disconnection behaviour from previous session?\nIf socket server &amp; client are not sending data in some time, the connection get closed due to this reason?</p>\n"},{"tags":["java","ipc","processbuilder"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1665927220,"post_id":74087353,"comment_id":130808770,"body_markdown":"Hint: maybe try with `pb.inheritIO();` to see eventual errors (e.g. class not found) || BTW: `String[] args` -&gt; `args[...]` is always an instance of String or null`(you will never get a `null` when this is being started as a (normal) java application)","body":"Hint: maybe try with <code>pb.inheritIO();</code> to see eventual errors (e.g. class not found) || BTW: <code>String[] args</code> -&gt; <code>args[...]</code> is always an instance of String or null<code>(you will never get a </code>null` when this is being started as a (normal) java application)"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1665928475,"post_id":74087353,"comment_id":130809045,"body_markdown":"[description](https://docs.oracle.com/en/java/javase/19/docs/specs/man/java.html#exit-status) fo the `java` tool: &quot;*The following exit values are typically returned by the launcher when the launcher is called with the wrong arguments, serious errors, or exceptions thrown by the JVM. However, a Java application may choose to return any value by using the API call System.exit(exitValue). The values are:  - `0`: Successful completion - `&gt;0`: An error occurred*&quot; - it would be better to use negative values in `System.exit()`","body":"<a href=\"https://docs.oracle.com/en/java/javase/19/docs/specs/man/java.html#exit-status\" rel=\"nofollow noreferrer\">description</a> fo the <code>java</code> tool: &quot;<i>The following exit values are typically returned by the launcher when the launcher is called with the wrong arguments, serious errors, or exceptions thrown by the JVM. However, a Java application may choose to return any value by using the API call System.exit(exitValue). The values are:  - <code>0</code>: Successful completion - <code>&gt;0</code>: An error occurred</i>&quot; - it would be better to use negative values in <code>System.exit()</code>"},{"owner":{"account_id":26639542,"reputation":11,"user_id":20255466,"display_name":"modoroot"},"score":0,"creation_date":1665928783,"post_id":74087353,"comment_id":130809108,"body_markdown":"Oh thank you so much friend. I used that method you said ( `inheritIO()` ) and the console said these lines:\n_Class has been compiled by a more recent version of the Java Environment (class file version 62.0), this version of the Java Runtime only recognizes class file versions up to 55.0._ So I changed my Java SE version to 11 and everything works now. Really appreciate your help!","body":"Oh thank you so much friend. I used that method you said ( <code>inheritIO()</code> ) and the console said these lines: <i>Class has been compiled by a more recent version of the Java Environment (class file version 62.0), this version of the Java Runtime only recognizes class file versions up to 55.0.</i> So I changed my Java SE version to 11 and everything works now. Really appreciate your help!"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1665928912,"post_id":74087353,"comment_id":130809142,"body_markdown":"class compiled with Java 18, being run with Java 11 - the one that ProcessBuilder is calling (even if it itself is running on Java 18) - that is due to PATH settings of operating system (solutions: change path settings; or use absolute path to `java` in ProcessBuilder)","body":"class compiled with Java 18, being run with Java 11 - the one that ProcessBuilder is calling (even if it itself is running on Java 18) - that is due to PATH settings of operating system (solutions: change path settings; or use absolute path to <code>java</code> in ProcessBuilder)"},{"owner":{"account_id":26639542,"reputation":11,"user_id":20255466,"display_name":"modoroot"},"score":0,"creation_date":1665929079,"post_id":74087353,"comment_id":130809182,"body_markdown":"Yes, that was the issue, now my program looks fine for now. Thanks for the help","body":"Yes, that was the issue, now my program looks fine for now. Thanks for the help"}],"owner":{"account_id":26639542,"reputation":11,"user_id":20255466,"display_name":"modoroot"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665925813,"creation_date":1665925545,"question_id":74087353,"body_markdown":"I&#39;m currently learning Java interprocess communication and it&#39;s being pretty tough for me. I need to develop a Java program that supports parameters from the console call line and return the following values with System.exit():\r\n\r\n - If the number of parameters is &lt;1 should return 1\r\n - If it&#39;s a single string type parameter it should return 2\r\n - If the parameter is an integer &lt;0 should return 3\r\n - Other cases should return 0\r\n\r\n\r\n----------\r\nAfter doing that, I need to create a second Java program that runs the previous one, and will show on screen what has happened according to each of the parameters passed.&lt;br&gt;\r\nATM I have this, but don&#39;t know exactly how I should continue. In console always returns 1, regardless of the parameter. &lt;br&gt;\r\nParameter controller class:\r\n\r\n\tpublic class DameParam {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tif(args.length==0)\r\n\t\t\tSystem.exit(1);\r\n\t\telse if(args.length==1 &amp;&amp; args[0] instanceof String)\r\n\t\t\tSystem.exit(2);\t\t\r\n\t\telse\r\n\t\t\tSystem.exit(0);\r\n\t}\r\nConsole output class:\r\n\r\n    public class PasaParam {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tProcessBuilder pb;\r\n\t\tProcess process;\r\n\t\tint exitVal;\r\n\t\ttry {\r\n\t\t\tpb = new ProcessBuilder();\r\n\t\t\tpb.directory(new File(&quot;/home/amna/git/pspjava/PsPJava/bin/&quot;));\r\n\t\t\tpb.command(&quot;java&quot;, &quot;tema1.procesos.DameParam&quot;,&quot;1&quot;);\r\n\t\t\tprocess = pb.start();\r\n\t\t\t\r\n\t\t\texitVal = process.waitFor();\t\t\t\r\n\t\t\tSystem.out.println(&quot;One parameter: &quot; + exitVal);\r\n\t\t\t\r\n\t\t\tpb.command(&quot;java&quot;, &quot;tema1.procesos.DameParam&quot;);\r\n\t\t\tprocess = pb.start();\t\t\t\r\n\t\t\texitVal = process.waitFor();\t\t\t \r\n\t\t\tSystem.out.println(&quot;No parameter &quot; + exitVal);\t\t\t\r\n\t\t} catch (IOException | InterruptedException e) {\t\t\t\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}","title":"Interprocess communication Java","body":"<p>I'm currently learning Java interprocess communication and it's being pretty tough for me. I need to develop a Java program that supports parameters from the console call line and return the following values with System.exit():</p>\n<ul>\n<li>If the number of parameters is &lt;1 should return 1</li>\n<li>If it's a single string type parameter it should return 2</li>\n<li>If the parameter is an integer &lt;0 should return 3</li>\n<li>Other cases should return 0</li>\n</ul>\n<hr />\n<p>After doing that, I need to create a second Java program that runs the previous one, and will show on screen what has happened according to each of the parameters passed.<br>\nATM I have this, but don't know exactly how I should continue. In console always returns 1, regardless of the parameter. <br>\nParameter controller class:</p>\n<pre><code>public class DameParam {\n\npublic static void main(String[] args) {\n    if(args.length==0)\n        System.exit(1);\n    else if(args.length==1 &amp;&amp; args[0] instanceof String)\n        System.exit(2);     \n    else\n        System.exit(0);\n}\n</code></pre>\n<p>Console output class:</p>\n<pre><code>public class PasaParam {\n\npublic static void main(String[] args) {\n    ProcessBuilder pb;\n    Process process;\n    int exitVal;\n    try {\n        pb = new ProcessBuilder();\n        pb.directory(new File(&quot;/home/amna/git/pspjava/PsPJava/bin/&quot;));\n        pb.command(&quot;java&quot;, &quot;tema1.procesos.DameParam&quot;,&quot;1&quot;);\n        process = pb.start();\n        \n        exitVal = process.waitFor();            \n        System.out.println(&quot;One parameter: &quot; + exitVal);\n        \n        pb.command(&quot;java&quot;, &quot;tema1.procesos.DameParam&quot;);\n        process = pb.start();           \n        exitVal = process.waitFor();             \n        System.out.println(&quot;No parameter &quot; + exitVal);          \n    } catch (IOException | InterruptedException e) {            \n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1664448992,"post_id":73894299,"comment_id":130476681,"body_markdown":"Well, you could try `Arrays.stream(strings, i+1, strings.length)` and use a traditional for loop as the outer loop, i.e. `for (int i = 0; i &lt; strings.length; i++) { String s1 = strings[i]; Arrays.stream(strings, i+1, strings.length)... }`. However, I&#39;d still try to think about other algorithms that aren&#39;t basically O(n^2) - is similiarity just based on the number of equal chars in the same place?","body":"Well, you could try <code>Arrays.stream(strings, i+1, strings.length)</code> and use a traditional for loop as the outer loop, i.e. <code>for (int i = 0; i &lt; strings.length; i++) { String s1 = strings[i]; Arrays.stream(strings, i+1, strings.length)... }</code>. However, I&#39;d still try to think about other algorithms that aren&#39;t basically O(n^2) - is similiarity just based on the number of equal chars in the same place?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1664449227,"post_id":73894299,"comment_id":130476775,"body_markdown":"..inside `calculateSimilarity` ..utilizing thread safe data structures .. (!?;)","body":"..inside <code>calculateSimilarity</code> ..utilizing thread safe data structures .. (!?;)"},{"owner":{"account_id":1880361,"reputation":144,"user_id":1700716,"display_name":"Nikolaj Hansen"},"score":0,"creation_date":1664449534,"post_id":73894299,"comment_id":130476876,"body_markdown":"CopyOnWriteArrayList is threadsafe.","body":"CopyOnWriteArrayList is threadsafe."},{"owner":{"account_id":5826684,"reputation":2011,"user_id":4592796,"accept_rate":70,"display_name":"harry-potter"},"score":0,"creation_date":1664449559,"post_id":73894299,"comment_id":130476889,"body_markdown":"What you are asking is really similar to dynamic programming memoization:\nhttps://en.wikipedia.org/wiki/Memoization","body":"What you are asking is really similar to dynamic programming memoization: <a href=\"https://en.wikipedia.org/wiki/Memoization\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Memoization</a>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1664514890,"post_id":73894299,"comment_id":130493706,"body_markdown":"I think you can replace `.collect(toList()).stream().forEach(...)` with `.forEachOrdered(...)`.","body":"I think you can replace <code>.collect(toList()).stream().forEach(...)</code> with <code>.forEachOrdered(...)</code>."}],"answers":[{"tags":[],"owner":{"account_id":1313746,"reputation":4358,"user_id":1261166,"accept_rate":87,"display_name":"Viktor Mellgren"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1664449544,"creation_date":1664449544,"answer_id":73894488,"question_id":73894299,"body_markdown":"if you use an indexed for loop you can look at the indexes above current index only to reduce number of comparisons and skip itself\r\n\r\n    for (int i = 0; i &lt; strings.length; i++) {\r\n      String s1 = strings[i];\r\n      for (int j = i + 1; j &lt; strings.length; j++) { //&lt;--- inner loop only looks at &quot;new comparisons&quot; due to i+1\r\n        String s2 = strings[j];\r\n        if (calculateSimilarity(s1, s2)) {\r\n            matches.add(new Pair(s1, s2));\r\n        }\r\n    }","title":"Using parallel streams for finding similar strings in an array?","body":"<p>if you use an indexed for loop you can look at the indexes above current index only to reduce number of comparisons and skip itself</p>\n<pre><code>for (int i = 0; i &lt; strings.length; i++) {\n  String s1 = strings[i];\n  for (int j = i + 1; j &lt; strings.length; j++) { //&lt;--- inner loop only looks at &quot;new comparisons&quot; due to i+1\n    String s2 = strings[j];\n    if (calculateSimilarity(s1, s2)) {\n        matches.add(new Pair(s1, s2));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664457708,"creation_date":1664457708,"answer_id":73896280,"question_id":73894299,"body_markdown":"You can take advantage of knowing that similarity is idempotent, so you only need to compare from the string next position in array onwards. \r\n\r\nAlso, if possible, you can take advantage of stream parallel execution to process large arrays.\r\n\r\nThe following is an example of how you can achieve it.\r\n\r\n    final double ACCEPTED_SIMILARITY_INDEX = 0.75;\r\n    String[] strings = {&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;AA&quot;, &quot;BB&quot;};\r\n    \r\n    final Set&lt;Set&lt;ImmutablePair&lt;String, String&gt;&gt;&gt; collect = IntStream\r\n        .range(0, strings.length)\r\n        .parallel()\r\n        .mapToObj(index -&gt; new ImmutablePair&lt;&gt;(strings[index], index + 1))\r\n        .map(immutablePair -&gt; Arrays.stream(strings, immutablePair.right, strings.length).parallel()\r\n            .filter(stringToCompare -&gt; new JaccardDistance().apply(stringToCompare, immutablePair.left) &gt; ACCEPTED_SIMILARITY_INDEX)\r\n            .map(similarString -&gt; new ImmutablePair&lt;&gt;(immutablePair.left, similarString)).collect(Collectors.toSet())).filter(workingSet -&gt; !workingSet.isEmpty())\r\n        .collect(Collectors.toSet());","title":"Using parallel streams for finding similar strings in an array?","body":"<p>You can take advantage of knowing that similarity is idempotent, so you only need to compare from the string next position in array onwards.</p>\n<p>Also, if possible, you can take advantage of stream parallel execution to process large arrays.</p>\n<p>The following is an example of how you can achieve it.</p>\n<pre><code>final double ACCEPTED_SIMILARITY_INDEX = 0.75;\nString[] strings = {&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;AA&quot;, &quot;BB&quot;};\n\nfinal Set&lt;Set&lt;ImmutablePair&lt;String, String&gt;&gt;&gt; collect = IntStream\n    .range(0, strings.length)\n    .parallel()\n    .mapToObj(index -&gt; new ImmutablePair&lt;&gt;(strings[index], index + 1))\n    .map(immutablePair -&gt; Arrays.stream(strings, immutablePair.right, strings.length).parallel()\n        .filter(stringToCompare -&gt; new JaccardDistance().apply(stringToCompare, immutablePair.left) &gt; ACCEPTED_SIMILARITY_INDEX)\n        .map(similarString -&gt; new ImmutablePair&lt;&gt;(immutablePair.left, similarString)).collect(Collectors.toSet())).filter(workingSet -&gt; !workingSet.isEmpty())\n    .collect(Collectors.toSet());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1664527037,"post_id":73896717,"comment_id":130496718,"body_markdown":"…and if you want maximum performance, skip the creation of a `Pair&lt;String,String&gt;` and collecting into a `List` part and just use `toArray()`, to get a a `long[]`. Since the original array still exists, extracting the actual strings can be postponed to the time when they are needed, e.g. for printing them. I don’t think that using `int` instead of `long` has a noticeable effect on today’s machines.","body":"…and if you want maximum performance, skip the creation of a <code>Pair&lt;String,String&gt;</code> and collecting into a <code>List</code> part and just use <code>toArray()</code>, to get a a <code>long[]</code>. Since the original array still exists, extracting the actual strings can be postponed to the time when they are needed, e.g. for printing them. I don’t think that using <code>int</code> instead of <code>long</code> has a noticeable effect on today’s machines."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1664527583,"post_id":73896717,"comment_id":130496891,"body_markdown":"1) True.  But that changes the problem. 2) `int` vs `long` you are probably right, based on a quick look at this: https://www.agner.org/optimize/instruction_tables.pdf","body":"1) True.  But that changes the problem. 2) <code>int</code> vs <code>long</code> you are probably right, based on a quick look at this: <a href=\"https://www.agner.org/optimize/instruction_tables.pdf\" rel=\"nofollow noreferrer\">agner.org/optimize/instruction_tables.pdf</a>"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664514423,"creation_date":1664459603,"answer_id":73896717,"question_id":73894299,"body_markdown":"My solution is based on the approach of [this answer][1], but it uses Java 8 streams and adds some parallelism.\r\n\r\n    int len = strings.length;\r\n    List&lt;Pair&lt;String, String&gt;&gt; result = \r\n          LongStream.range(0, (long)(len) * len))\r\n                    .parallel()\r\n                    .filter(l -&gt; (l / len &gt; l % len) &amp;&amp; \r\n                                 calculateSimilarity(strings[l / len], \r\n                                                     strings[l % len]) &gt; 0.5)\r\n                    .map(l -&gt; new Pair&lt;&gt;(strings[l / len], strings[l % len])\r\n                    .collect(toList());\r\n\r\nThe approach used is to use `l` to iterate the positions of an imaginary `len` x `len` matrix flattened into 1-D.  The `(l / len)` and `(l % len)` map the 1-D coordinates to 2-D, and then the `(l / len &gt; l % len)` test checks that we are above the diagonal of the 2-D matrix.\r\n\r\nI try to avoid creating any intermediate structures (e.g. temporary arrays or a de-duping `HashSet`) and any `Pair` objects that would be discarded. \r\n\r\nNotes:\r\n\r\n  1. If we could constrain the length of `strings` to be less than 2^16, we could use an `IntStream` and `int` calculations.\r\n\r\n  2. If there are duplicates in the input `strings` array, there will be duplicates in the list of `Pair` objects.\r\n\r\n  3. This is still going to be `O(N^2)` where `N` is `strings.length`.\r\n\r\n  [1]: https://stackoverflow.com/a/73894488/139985\r\n","title":"Using parallel streams for finding similar strings in an array?","body":"<p>My solution is based on the approach of <a href=\"https://stackoverflow.com/a/73894488/139985\">this answer</a>, but it uses Java 8 streams and adds some parallelism.</p>\n<pre><code>int len = strings.length;\nList&lt;Pair&lt;String, String&gt;&gt; result = \n      LongStream.range(0, (long)(len) * len))\n                .parallel()\n                .filter(l -&gt; (l / len &gt; l % len) &amp;&amp; \n                             calculateSimilarity(strings[l / len], \n                                                 strings[l % len]) &gt; 0.5)\n                .map(l -&gt; new Pair&lt;&gt;(strings[l / len], strings[l % len])\n                .collect(toList());\n</code></pre>\n<p>The approach used is to use <code>l</code> to iterate the positions of an imaginary <code>len</code> x <code>len</code> matrix flattened into 1-D.  The <code>(l / len)</code> and <code>(l % len)</code> map the 1-D coordinates to 2-D, and then the <code>(l / len &gt; l % len)</code> test checks that we are above the diagonal of the 2-D matrix.</p>\n<p>I try to avoid creating any intermediate structures (e.g. temporary arrays or a de-duping <code>HashSet</code>) and any <code>Pair</code> objects that would be discarded.</p>\n<p>Notes:</p>\n<ol>\n<li><p>If we could constrain the length of <code>strings</code> to be less than 2^16, we could use an <code>IntStream</code> and <code>int</code> calculations.</p>\n</li>\n<li><p>If there are duplicates in the input <code>strings</code> array, there will be duplicates in the list of <code>Pair</code> objects.</p>\n</li>\n<li><p>This is still going to be <code>O(N^2)</code> where <code>N</code> is <code>strings.length</code>.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1078921,"reputation":36333,"user_id":1076463,"accept_rate":65,"display_name":"Robin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664461033,"creation_date":1664461033,"answer_id":73897079,"question_id":73894299,"body_markdown":"If you store the input strings in a `List` instead of an array, the adjusted version of your implementation that combines a `for` loop with a `Stream` is\r\n\r\n```java\r\nList&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;dsfdsf&quot;, &quot;foo&quot;, &quot;baaa&quot;, ...);\r\n\r\nfor (int index = 0; index &lt; strings.length - 1; index++) {\r\n    final String s1 = strings.get(index);\r\n    strings.subList(index+1, strings.length)\r\n        .stream()\r\n        .parallel()\r\n        .filter(s2 -&gt; calculateSimilarity(s1, s2) &gt;= 0.5)\r\n        .collect(toList())\r\n        .stream()\r\n        .forEach(s2 -&gt; matches.add(new Pair(s1, s2)));\r\n}\r\n```","title":"Using parallel streams for finding similar strings in an array?","body":"<p>If you store the input strings in a <code>List</code> instead of an array, the adjusted version of your implementation that combines a <code>for</code> loop with a <code>Stream</code> is</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;dsfdsf&quot;, &quot;foo&quot;, &quot;baaa&quot;, ...);\n\nfor (int index = 0; index &lt; strings.length - 1; index++) {\n    final String s1 = strings.get(index);\n    strings.subList(index+1, strings.length)\n        .stream()\n        .parallel()\n        .filter(s2 -&gt; calculateSimilarity(s1, s2) &gt;= 0.5)\n        .collect(toList())\n        .stream()\n        .forEach(s2 -&gt; matches.add(new Pair(s1, s2)));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2629772,"reputation":433,"user_id":2276054,"display_name":"Leszek Pachura"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665925763,"creation_date":1665925763,"answer_id":74087375,"question_id":73894299,"body_markdown":"Thanks for all the answers, they were very informative!\r\n\r\nIn the end, I went with the following implementation:\r\n\r\n````\r\nfor (int i = 0; i &lt; strings.length; i++) {\r\n    final String s1 = strings[i];\r\n    Arrays.stream(strings)\r\n        .skip(i + 1)\r\n        .parallel()\r\n        .filter(s2 -&gt; calculateSimilarity(s1, s2) &gt;= 0.5)\r\n        .collect(toList())\r\n        .stream()\r\n        .forEach(s2 -&gt; matches.add(new Pair(s1, s2)));\r\n}\r\n````\r\nIt is slightly slower than:\r\n````\r\nfor (int i = 0; i &lt; strings.length; i++) {\r\n    final String s1 = strings[i];\r\n    Arrays.stream(strings, i + 1 /* startInclusive */, strings.length /* endExclusive */)\r\n        .parallel()\r\n        .filter(s2 -&gt; calculateSimilarity(s1, s2) &gt;= 0.5)\r\n        .collect(toList())\r\n        .stream()\r\n        .forEach(s2 -&gt; matches.add(new Pair(s1, s2)));\r\n}\r\n````\r\n...but `skip()` works with any collection, not only with arrays.\r\n\r\n","title":"Using parallel streams for finding similar strings in an array?","body":"<p>Thanks for all the answers, they were very informative!</p>\n<p>In the end, I went with the following implementation:</p>\n<pre><code>for (int i = 0; i &lt; strings.length; i++) {\n    final String s1 = strings[i];\n    Arrays.stream(strings)\n        .skip(i + 1)\n        .parallel()\n        .filter(s2 -&gt; calculateSimilarity(s1, s2) &gt;= 0.5)\n        .collect(toList())\n        .stream()\n        .forEach(s2 -&gt; matches.add(new Pair(s1, s2)));\n}\n</code></pre>\n<p>It is slightly slower than:</p>\n<pre><code>for (int i = 0; i &lt; strings.length; i++) {\n    final String s1 = strings[i];\n    Arrays.stream(strings, i + 1 /* startInclusive */, strings.length /* endExclusive */)\n        .parallel()\n        .filter(s2 -&gt; calculateSimilarity(s1, s2) &gt;= 0.5)\n        .collect(toList())\n        .stream()\n        .forEach(s2 -&gt; matches.add(new Pair(s1, s2)));\n}\n</code></pre>\n<p>...but <code>skip()</code> works with any collection, not only with arrays.</p>\n"}],"owner":{"account_id":2629772,"reputation":433,"user_id":2276054,"display_name":"Leszek Pachura"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74087375,"answer_count":5,"score":1,"last_activity_date":1665925763,"creation_date":1664448654,"question_id":73894299,"body_markdown":"Let&#39;s say I have a large array of unique strings and I want **to find all pairs which are at least 50% similar**.\r\n\r\nA straightforward implementation:\r\n```\r\nfinal String[] strings = {&quot;abc&quot;, &quot;dsfdsf&quot;, &quot;foo&quot;, &quot;baaa&quot;, ...};\r\n\r\nfinal Collection&lt;Pair&lt;String, String&gt;&gt; matches = new ArrayList&lt;&gt;();\r\n\r\nfor (final String s1 : strings) {\r\n\tfor (final String s2 : strings) {\r\n\t\tif (calculateSimilarity(s1, s2) &gt;= 0.5) {\r\n\t\t\tmatches.add(new Pair(s1, s2));\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nNow, let&#39;s make it multithreaded by using parallel stream:\r\n```\r\nfor (final String s1 : strings) {\r\n\tArrays.stream(strings).parallel()\r\n\t\t.filter(s2 -&gt; calculateSimilarity(s1, s2) &gt;= 0.5)\r\n\t\t.collect(toList())\r\n\t\t.stream()\r\n\t\t.forEach(s2 -&gt; matches.add(new Pair(s1, s2)));\r\n}\r\n```\r\nEach subsequent **s1** string is compared (in parallel) with all **s2** strings. All strings matching **s1** are collected into a single list, and then they are added sequentially to **matches** (because **ArrayList** is not thread-safe).\r\n\r\nThis already works much faster than the sequential version. However, I want to introduce an improvement: avoid comparing the same two strings twice, because always **calculateSimilarity(&quot;aaa&quot;, &quot;bbb&quot;) == calculateSimilarity(&quot;bbb&quot;, &quot;aaa&quot;)**. I would also like to avoid comparing each string against itself.\r\n\r\nSo, back to the original algorithm:\r\n```\r\nfor (int i = 0; i &lt; strings.length; i++) {\r\n\tfor (int j = i + 1; j &lt; strings.length; j++) {  // &lt;--- sic! NOT int j = 0\r\n\t\t\tif (calculateSimilarity(strings[i], strings[j]) &gt;= 0.5) {\r\n\t\t\t\tmatches.add(new Pair(strings[i], strings[j]));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nNow, my question is: **how to introduce this improvement to the parallel stream version?**\r\n\r\nShould I use **.skip()** somehow?","title":"Using parallel streams for finding similar strings in an array?","body":"<p>Let's say I have a large array of unique strings and I want <strong>to find all pairs which are at least 50% similar</strong>.</p>\n<p>A straightforward implementation:</p>\n<pre><code>final String[] strings = {&quot;abc&quot;, &quot;dsfdsf&quot;, &quot;foo&quot;, &quot;baaa&quot;, ...};\n\nfinal Collection&lt;Pair&lt;String, String&gt;&gt; matches = new ArrayList&lt;&gt;();\n\nfor (final String s1 : strings) {\n    for (final String s2 : strings) {\n        if (calculateSimilarity(s1, s2) &gt;= 0.5) {\n            matches.add(new Pair(s1, s2));\n        }\n    }\n}\n</code></pre>\n<p>Now, let's make it multithreaded by using parallel stream:</p>\n<pre><code>for (final String s1 : strings) {\n    Arrays.stream(strings).parallel()\n        .filter(s2 -&gt; calculateSimilarity(s1, s2) &gt;= 0.5)\n        .collect(toList())\n        .stream()\n        .forEach(s2 -&gt; matches.add(new Pair(s1, s2)));\n}\n</code></pre>\n<p>Each subsequent <strong>s1</strong> string is compared (in parallel) with all <strong>s2</strong> strings. All strings matching <strong>s1</strong> are collected into a single list, and then they are added sequentially to <strong>matches</strong> (because <strong>ArrayList</strong> is not thread-safe).</p>\n<p>This already works much faster than the sequential version. However, I want to introduce an improvement: avoid comparing the same two strings twice, because always <strong>calculateSimilarity(&quot;aaa&quot;, &quot;bbb&quot;) == calculateSimilarity(&quot;bbb&quot;, &quot;aaa&quot;)</strong>. I would also like to avoid comparing each string against itself.</p>\n<p>So, back to the original algorithm:</p>\n<pre><code>for (int i = 0; i &lt; strings.length; i++) {\n    for (int j = i + 1; j &lt; strings.length; j++) {  // &lt;--- sic! NOT int j = 0\n            if (calculateSimilarity(strings[i], strings[j]) &gt;= 0.5) {\n                matches.add(new Pair(strings[i], strings[j]));\n            }\n        }\n    }\n}\n</code></pre>\n<p>Now, my question is: <strong>how to introduce this improvement to the parallel stream version?</strong></p>\n<p>Should I use <strong>.skip()</strong> somehow?</p>\n"},{"tags":["java","spring","caching"],"answers":[{"tags":[],"owner":{"account_id":1535484,"reputation":4254,"user_id":2365727,"accept_rate":88,"display_name":"michaldo"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1383599379,"creation_date":1383599379,"answer_id":19777165,"question_id":17749049,"body_markdown":"Answer is: No.\r\n\r\nAnd it is no easy way to achieve what you want.\r\n\r\n 1. Spring Cache annotations must be simple to be easy to implement by cache provider.\r\n 2. Efficient caching must be simple. There is a key and value. If key is found in cache use the value, otherwise compute value and put to cache. Efficient key must have fast and honest **equals()** and **hashcode()**. Assume you cached many pairs (key,value) from one tenant. For efficiency different keys should have different **hashcode()**. And you decide to evict whole tenant. It is no easy to find tenant elements in cache. You have to iterate all cached pairs and discard pairs belonging to the tenant. It is not efficient. It is rather not atomic, so it is complicated and needs some synchronization. Synchronization is not efficient.\r\n\r\nTherefore no.\r\n\r\nBut, if you find a solution tell me, because feature you want is really useful.\r\n\r\n\r\n","title":"Spring @CacheEvict using wildcards","body":"<p>Answer is: No.</p>\n\n<p>And it is no easy way to achieve what you want.</p>\n\n<ol>\n<li>Spring Cache annotations must be simple to be easy to implement by cache provider.</li>\n<li>Efficient caching must be simple. There is a key and value. If key is found in cache use the value, otherwise compute value and put to cache. Efficient key must have fast and honest <strong>equals()</strong> and <strong>hashcode()</strong>. Assume you cached many pairs (key,value) from one tenant. For efficiency different keys should have different <strong>hashcode()</strong>. And you decide to evict whole tenant. It is no easy to find tenant elements in cache. You have to iterate all cached pairs and discard pairs belonging to the tenant. It is not efficient. It is rather not atomic, so it is complicated and needs some synchronization. Synchronization is not efficient.</li>\n</ol>\n\n<p>Therefore no.</p>\n\n<p>But, if you find a solution tell me, because feature you want is really useful.</p>\n"},{"tags":[],"owner":{"account_id":126958,"reputation":3874,"user_id":323807,"accept_rate":71,"display_name":"Andre"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1479482945,"creation_date":1479482945,"answer_id":40680741,"question_id":17749049,"body_markdown":"As with 99% of every question in the universe, the answer is: it depends. If your cache manager implements something that deals with that, great. But that doesn&#39;t seem to be the case.\r\n\r\nIf you&#39;re using `SimpleCacheManager`, which is a basic in-memory cache manager provided by Spring, you&#39;re probably using `ConcurrentMapCache` that also comes with Spring. Although it&#39;s not possible to extend `ConcurrentMapCache` to deal with wildcards in keys (because the cache store is private and you can&#39;t access it), you could just use it as an inspiration for your own implementation.\r\n\r\nBelow there&#39;s a possible implementation (I didn&#39;t really test it much other than to check if it&#39;s working). This is a plain copy of `ConcurrentMapCache` with a modification on the `evict()` method. The difference is that this version of `evict()` treats the key to see if it&#39;s a regex. In that case, it iterates through all the keys in the store and evict the ones that match the regex.\r\n\r\n    package com.sigraweb.cache;\r\n    \r\n    import java.io.Serializable;\r\n    import java.util.concurrent.ConcurrentHashMap;\r\n    import java.util.concurrent.ConcurrentMap;\r\n    \r\n    import org.springframework.cache.Cache;\r\n    import org.springframework.cache.support.SimpleValueWrapper;\r\n    import org.springframework.util.Assert;\r\n    \r\n    public class RegexKeyCache implements Cache {\r\n    \tprivate static final Object NULL_HOLDER = new NullHolder();\r\n    \r\n    \tprivate final String name;\r\n    \r\n    \tprivate final ConcurrentMap&lt;Object, Object&gt; store;\r\n    \r\n    \tprivate final boolean allowNullValues;\r\n    \r\n    \tpublic RegexKeyCache(String name) {\r\n    \t\tthis(name, new ConcurrentHashMap&lt;Object, Object&gt;(256), true);\r\n    \t}\r\n    \r\n    \tpublic RegexKeyCache(String name, boolean allowNullValues) {\r\n    \t\tthis(name, new ConcurrentHashMap&lt;Object, Object&gt;(256), allowNullValues);\r\n    \t}\r\n    \r\n    \tpublic RegexKeyCache(String name, ConcurrentMap&lt;Object, Object&gt; store, boolean allowNullValues) {\r\n    \t\tAssert.notNull(name, &quot;Name must not be null&quot;);\r\n    \t\tAssert.notNull(store, &quot;Store must not be null&quot;);\r\n    \t\tthis.name = name;\r\n    \t\tthis.store = store;\r\n    \t\tthis.allowNullValues = allowNullValues;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic final String getName() {\r\n    \t\treturn this.name;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic final ConcurrentMap&lt;Object, Object&gt; getNativeCache() {\r\n    \t\treturn this.store;\r\n    \t}\r\n    \r\n    \tpublic final boolean isAllowNullValues() {\r\n    \t\treturn this.allowNullValues;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic ValueWrapper get(Object key) {\r\n    \t\tObject value = this.store.get(key);\r\n    \t\treturn toWrapper(value);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \tpublic &lt;T&gt; T get(Object key, Class&lt;T&gt; type) {\r\n    \t\tObject value = fromStoreValue(this.store.get(key));\r\n    \t\tif (value != null &amp;&amp; type != null &amp;&amp; !type.isInstance(value)) {\r\n    \t\t\tthrow new IllegalStateException(&quot;Cached value is not of required type [&quot; + type.getName() + &quot;]: &quot; + value);\r\n    \t\t}\r\n    \t\treturn (T) value;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void put(Object key, Object value) {\r\n    \t\tthis.store.put(key, toStoreValue(value));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic ValueWrapper putIfAbsent(Object key, Object value) {\r\n    \t\tObject existing = this.store.putIfAbsent(key, value);\r\n    \t\treturn toWrapper(existing);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void evict(Object key) {\r\n    \t\tthis.store.remove(key);\r\n    \t\tif (key.toString().startsWith(&quot;regex:&quot;)) {\r\n    \t\t\tString r = key.toString().replace(&quot;regex:&quot;, &quot;&quot;);\r\n    \t\t\tfor (Object k : this.store.keySet()) {\r\n    \t\t\t\tif (k.toString().matches(r)) {\r\n    \t\t\t\t\tthis.store.remove(k);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void clear() {\r\n    \t\tthis.store.clear();\r\n    \t}\r\n    \r\n    \tprotected Object fromStoreValue(Object storeValue) {\r\n    \t\tif (this.allowNullValues &amp;&amp; storeValue == NULL_HOLDER) {\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \t\treturn storeValue;\r\n    \t}\r\n    \r\n    \tprotected Object toStoreValue(Object userValue) {\r\n    \t\tif (this.allowNullValues &amp;&amp; userValue == null) {\r\n    \t\t\treturn NULL_HOLDER;\r\n    \t\t}\r\n    \t\treturn userValue;\r\n    \t}\r\n    \r\n    \tprivate ValueWrapper toWrapper(Object value) {\r\n    \t\treturn (value != null ? new SimpleValueWrapper(fromStoreValue(value)) : null);\r\n    \t}\r\n    \r\n    \t@SuppressWarnings(&quot;serial&quot;)\r\n    \tprivate static class NullHolder implements Serializable {\r\n    \t}\r\n    }\r\n\r\nI trust that readers know how to initialize the cache manager with a custom cache implementation. There&#39;s lots of documentation out there that shows you how to do that. After your project is properly configured, you can use the annotation normally like so:\r\n\r\n    @CacheEvict(value = { &quot;cacheName&quot; }, key = &quot;&#39;regex:#tenant&#39;+&#39;.*&#39;&quot;)\r\n    public myMethod(String tenant){\r\n    ...\r\n    }\r\n\r\nAgain, this is far from being properly tested, but it gives you a way to do what you want. If you&#39;re using another cache manager, you could extends its cache implementation similarly.","title":"Spring @CacheEvict using wildcards","body":"<p>As with 99% of every question in the universe, the answer is: it depends. If your cache manager implements something that deals with that, great. But that doesn't seem to be the case.</p>\n\n<p>If you're using <code>SimpleCacheManager</code>, which is a basic in-memory cache manager provided by Spring, you're probably using <code>ConcurrentMapCache</code> that also comes with Spring. Although it's not possible to extend <code>ConcurrentMapCache</code> to deal with wildcards in keys (because the cache store is private and you can't access it), you could just use it as an inspiration for your own implementation.</p>\n\n<p>Below there's a possible implementation (I didn't really test it much other than to check if it's working). This is a plain copy of <code>ConcurrentMapCache</code> with a modification on the <code>evict()</code> method. The difference is that this version of <code>evict()</code> treats the key to see if it's a regex. In that case, it iterates through all the keys in the store and evict the ones that match the regex.</p>\n\n<pre><code>package com.sigraweb.cache;\n\nimport java.io.Serializable;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.ConcurrentMap;\n\nimport org.springframework.cache.Cache;\nimport org.springframework.cache.support.SimpleValueWrapper;\nimport org.springframework.util.Assert;\n\npublic class RegexKeyCache implements Cache {\n    private static final Object NULL_HOLDER = new NullHolder();\n\n    private final String name;\n\n    private final ConcurrentMap&lt;Object, Object&gt; store;\n\n    private final boolean allowNullValues;\n\n    public RegexKeyCache(String name) {\n        this(name, new ConcurrentHashMap&lt;Object, Object&gt;(256), true);\n    }\n\n    public RegexKeyCache(String name, boolean allowNullValues) {\n        this(name, new ConcurrentHashMap&lt;Object, Object&gt;(256), allowNullValues);\n    }\n\n    public RegexKeyCache(String name, ConcurrentMap&lt;Object, Object&gt; store, boolean allowNullValues) {\n        Assert.notNull(name, \"Name must not be null\");\n        Assert.notNull(store, \"Store must not be null\");\n        this.name = name;\n        this.store = store;\n        this.allowNullValues = allowNullValues;\n    }\n\n    @Override\n    public final String getName() {\n        return this.name;\n    }\n\n    @Override\n    public final ConcurrentMap&lt;Object, Object&gt; getNativeCache() {\n        return this.store;\n    }\n\n    public final boolean isAllowNullValues() {\n        return this.allowNullValues;\n    }\n\n    @Override\n    public ValueWrapper get(Object key) {\n        Object value = this.store.get(key);\n        return toWrapper(value);\n    }\n\n    @Override\n    @SuppressWarnings(\"unchecked\")\n    public &lt;T&gt; T get(Object key, Class&lt;T&gt; type) {\n        Object value = fromStoreValue(this.store.get(key));\n        if (value != null &amp;&amp; type != null &amp;&amp; !type.isInstance(value)) {\n            throw new IllegalStateException(\"Cached value is not of required type [\" + type.getName() + \"]: \" + value);\n        }\n        return (T) value;\n    }\n\n    @Override\n    public void put(Object key, Object value) {\n        this.store.put(key, toStoreValue(value));\n    }\n\n    @Override\n    public ValueWrapper putIfAbsent(Object key, Object value) {\n        Object existing = this.store.putIfAbsent(key, value);\n        return toWrapper(existing);\n    }\n\n    @Override\n    public void evict(Object key) {\n        this.store.remove(key);\n        if (key.toString().startsWith(\"regex:\")) {\n            String r = key.toString().replace(\"regex:\", \"\");\n            for (Object k : this.store.keySet()) {\n                if (k.toString().matches(r)) {\n                    this.store.remove(k);\n                }\n            }\n        }\n    }\n\n    @Override\n    public void clear() {\n        this.store.clear();\n    }\n\n    protected Object fromStoreValue(Object storeValue) {\n        if (this.allowNullValues &amp;&amp; storeValue == NULL_HOLDER) {\n            return null;\n        }\n        return storeValue;\n    }\n\n    protected Object toStoreValue(Object userValue) {\n        if (this.allowNullValues &amp;&amp; userValue == null) {\n            return NULL_HOLDER;\n        }\n        return userValue;\n    }\n\n    private ValueWrapper toWrapper(Object value) {\n        return (value != null ? new SimpleValueWrapper(fromStoreValue(value)) : null);\n    }\n\n    @SuppressWarnings(\"serial\")\n    private static class NullHolder implements Serializable {\n    }\n}\n</code></pre>\n\n<p>I trust that readers know how to initialize the cache manager with a custom cache implementation. There's lots of documentation out there that shows you how to do that. After your project is properly configured, you can use the annotation normally like so:</p>\n\n<pre><code>@CacheEvict(value = { \"cacheName\" }, key = \"'regex:#tenant'+'.*'\")\npublic myMethod(String tenant){\n...\n}\n</code></pre>\n\n<p>Again, this is far from being properly tested, but it gives you a way to do what you want. If you're using another cache manager, you could extends its cache implementation similarly.</p>\n"},{"comments":[{"owner":{"account_id":354343,"reputation":4204,"user_id":692626,"accept_rate":14,"display_name":"dan carter"},"score":2,"creation_date":1597366472,"post_id":51025696,"comment_id":112116517,"body_markdown":"note that the keys command is not recommended for production use. &quot; This command is intended for debugging and special operations, such as changing your keyspace layout. Don&#39;t use KEYS in your regular application code. &quot; https://redis.io/commands/keys","body":"note that the keys command is not recommended for production use. &quot; This command is intended for debugging and special operations, such as changing your keyspace layout. Don&#39;t use KEYS in your regular application code. &quot; <a href=\"https://redis.io/commands/keys\" rel=\"nofollow noreferrer\">redis.io/commands/keys</a>"}],"tags":[],"owner":{"account_id":2562319,"reputation":834,"user_id":2243384,"accept_rate":41,"display_name":"masT"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1529936370,"creation_date":1529936370,"answer_id":51025696,"question_id":17749049,"body_markdown":"Below worked for me on Redis Cache.\r\nSuppose you want to delete all Cache entries with key prefix: &#39;cache-name:object-name:parentKey&#39;. Call method with key value `cache-name:object-name:parentKey*`.\r\n\r\n    import org.springframework.data.redis.core.RedisOperations;    \r\n    ...\r\n    private final RedisOperations&lt;Object, Object&gt; redisTemplate;\r\n    ...    \r\n    public void evict(Object key)\r\n    {\r\n        redisTemplate.delete(redisTemplate.keys(key));\r\n    }\r\n\r\nFrom RedisOperations.java\r\n\r\n    /**\r\n     * Delete given {@code keys}.\r\n     *\r\n     * @param keys must not be {@literal null}.\r\n     * @return The number of keys that were removed.\r\n     * @see &lt;a href=&quot;http://redis.io/commands/del&quot;&gt;Redis Documentation: DEL&lt;/a&gt;\r\n     */\r\n    void delete(Collection&lt;K&gt; keys);\r\n    \r\n    /**\r\n\t * Find all keys matching the given {@code pattern}.\r\n\t *\r\n\t * @param pattern must not be {@literal null}.\r\n\t * @return\r\n\t * @see &lt;a href=&quot;http://redis.io/commands/keys&quot;&gt;Redis Documentation: KEYS&lt;/a&gt;\r\n\t */\r\n\tSet&lt;K&gt; keys(K pattern);\r\n\r\n\r\n","title":"Spring @CacheEvict using wildcards","body":"<p>Below worked for me on Redis Cache.\nSuppose you want to delete all Cache entries with key prefix: 'cache-name:object-name:parentKey'. Call method with key value <code>cache-name:object-name:parentKey*</code>.</p>\n\n<pre><code>import org.springframework.data.redis.core.RedisOperations;    \n...\nprivate final RedisOperations&lt;Object, Object&gt; redisTemplate;\n...    \npublic void evict(Object key)\n{\n    redisTemplate.delete(redisTemplate.keys(key));\n}\n</code></pre>\n\n<p>From RedisOperations.java</p>\n\n<pre><code>/**\n * Delete given {@code keys}.\n *\n * @param keys must not be {@literal null}.\n * @return The number of keys that were removed.\n * @see &lt;a href=\"http://redis.io/commands/del\"&gt;Redis Documentation: DEL&lt;/a&gt;\n */\nvoid delete(Collection&lt;K&gt; keys);\n\n/**\n * Find all keys matching the given {@code pattern}.\n *\n * @param pattern must not be {@literal null}.\n * @return\n * @see &lt;a href=\"http://redis.io/commands/keys\"&gt;Redis Documentation: KEYS&lt;/a&gt;\n */\nSet&lt;K&gt; keys(K pattern);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":354343,"reputation":4204,"user_id":692626,"accept_rate":14,"display_name":"dan carter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598489161,"creation_date":1598489161,"answer_id":63607599,"question_id":17749049,"body_markdown":"Include the tenant as part of the cache name, by implementing a custom CacheResolver; extending and implementing `SimpleCacheResolver.getCacheName`\r\n\r\nthen do evict all keys\r\n\r\n`@CacheEvict(value = {CacheName.CACHE1, CacheName.CACHE2}, allEntries = true)`\r\n\r\nBut note that if you are using redis as your backing cache, then under the hood spring uses the KEYS command, so the solution will not scale. Once you get few 100K keys in redis, KEYS will take 150ms and the redis server will bottleneck on CPU. Naughty spring.","title":"Spring @CacheEvict using wildcards","body":"<p>Include the tenant as part of the cache name, by implementing a custom CacheResolver; extending and implementing <code>SimpleCacheResolver.getCacheName</code></p>\n<p>then do evict all keys</p>\n<p><code>@CacheEvict(value = {CacheName.CACHE1, CacheName.CACHE2}, allEntries = true)</code></p>\n<p>But note that if you are using redis as your backing cache, then under the hood spring uses the KEYS command, so the solution will not scale. Once you get few 100K keys in redis, KEYS will take 150ms and the redis server will bottleneck on CPU. Naughty spring.</p>\n"},{"tags":[],"owner":{"account_id":10775305,"reputation":668,"user_id":7927573,"display_name":"Oguzhan Cevik"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636467203,"creation_date":1636466865,"answer_id":69899617,"question_id":17749049,"body_markdown":"I had a similar issue as well. I solved it that way.\r\n\r\n**My Config Class**\r\n\r\n    @Bean\r\n    RedisTemplate redisTemplate() {\r\n        RedisTemplate template = new RedisTemplate();\r\n        template.setConnectionFactory(lettuceConnectionFactory());\r\n        template.setKeySerializer(new StringRedisSerializer());\r\n        template.setValueSerializer(new RedisSerializerGzip());\r\n        return template;\r\n    }\r\n\r\n**My Util Class**\r\n\r\n\r\n    public class CacheService {\r\n    \r\n        final RedisTemplate redisTemplate;\r\n    \r\n        public void evictCachesByPrefix(String prefix) {\r\n            Set&lt;String&gt; keys = redisTemplate.keys(prefix + &quot;*&quot;);\r\n            for (String key : keys) {\r\n                redisTemplate.delete(key);\r\n            }\r\n        }\r\n    }\r\n\r\n&gt; Warning: consider KEYS as a command that should only be used in\r\n&gt; production environments with extreme care. It may ruin performance\r\n&gt; when it is executed against large databases.\r\n&gt; https://redis.io/commands/keys","title":"Spring @CacheEvict using wildcards","body":"<p>I had a similar issue as well. I solved it that way.</p>\n<p><strong>My Config Class</strong></p>\n<pre><code>@Bean\nRedisTemplate redisTemplate() {\n    RedisTemplate template = new RedisTemplate();\n    template.setConnectionFactory(lettuceConnectionFactory());\n    template.setKeySerializer(new StringRedisSerializer());\n    template.setValueSerializer(new RedisSerializerGzip());\n    return template;\n}\n</code></pre>\n<p><strong>My Util Class</strong></p>\n<pre><code>public class CacheService {\n\n    final RedisTemplate redisTemplate;\n\n    public void evictCachesByPrefix(String prefix) {\n        Set&lt;String&gt; keys = redisTemplate.keys(prefix + &quot;*&quot;);\n        for (String key : keys) {\n            redisTemplate.delete(key);\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<p>Warning: consider KEYS as a command that should only be used in\nproduction environments with extreme care. It may ruin performance\nwhen it is executed against large databases.\n<a href=\"https://redis.io/commands/keys\" rel=\"nofollow noreferrer\">https://redis.io/commands/keys</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":16066054,"reputation":29,"user_id":11595665,"display_name":"Mishamba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641399089,"creation_date":1641399089,"answer_id":70596063,"question_id":17749049,"body_markdown":"I wanted to remove all stored orders from cache and i complited it this way.\r\n\r\n    @CacheEvict(value = &quot;List&lt;Order&gt;&quot;, allEntries = true)\r\n\r\nAs i understand this way will be removed all lists stored with this value. So you can create another structure and it also can be a kind of solution.","title":"Spring @CacheEvict using wildcards","body":"<p>I wanted to remove all stored orders from cache and i complited it this way.</p>\n<pre><code>@CacheEvict(value = &quot;List&lt;Order&gt;&quot;, allEntries = true)\n</code></pre>\n<p>As i understand this way will be removed all lists stored with this value. So you can create another structure and it also can be a kind of solution.</p>\n"},{"tags":[],"owner":{"account_id":4156256,"reputation":80,"user_id":3407477,"display_name":"Robert Fornesdale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665925540,"creation_date":1665925540,"answer_id":74087352,"question_id":17749049,"body_markdown":"I solved this by leaving the AOP-Pattern in this special case.\r\n\r\nread remains annotation-driven:\r\n\r\n    \t@Cacheable(value = &quot;imageCache&quot;, keyGenerator = &quot;imageKeyGenerator&quot;, unless=&quot;#result == null&quot;)\r\n\tpublic byte[] getImageData(int objectId, int imageType, int width, int height, boolean sizeAbsolute) { \r\n    // ... \r\n    }\r\n\r\n\r\n\tpublic boolean deleteImage(int objId, int type) {\r\n\t\tremoveFromCacheByPrefix(&quot;imageCache&quot;, ImageCacheKeyGenerator.generateKey(objId, type));\r\n\t\tint rc = jdbcTemplate.update(SQL_DELETE_IMAGE, new Object[] {objId,type});\r\n\t\treturn rc &gt; 0;\r\n\t}\r\n\r\n\r\nas you can see, the deleteImage(...) has no annotation, but calls removeFromCacheByPrefix(...).\r\nthis is a function in the superclass of the repository which looks like this:\r\n\r\n    \t\r\n\tprotected void removeFromCacheByPrefix(String cacheName, String prefix) {\r\n\t\tvar cache = this.cacheManager.getCache(cacheName);\r\n\t\tSet&lt;String&gt; keys = new HashSet&lt;String&gt;();\r\n\t\tcache.forEach(entry -&gt; {\r\n\t\t\tvar key = String.valueOf(entry.getKey());\r\n\t\t\tif (key.startsWith(prefix)) {\r\n\t\t\t\tkeys.add(String.valueOf(entry.getKey()));\r\n\t\t\t}\r\n\t\t});\r\n\t\tcache.removeAll(keys);\r\n\t}\r\n\t\r\nworks fine for me this way!","title":"Spring @CacheEvict using wildcards","body":"<p>I solved this by leaving the AOP-Pattern in this special case.</p>\n<p>read remains annotation-driven:</p>\n<pre><code>    @Cacheable(value = &quot;imageCache&quot;, keyGenerator = &quot;imageKeyGenerator&quot;, unless=&quot;#result == null&quot;)\npublic byte[] getImageData(int objectId, int imageType, int width, int height, boolean sizeAbsolute) { \n// ... \n}\n\n\npublic boolean deleteImage(int objId, int type) {\n    removeFromCacheByPrefix(&quot;imageCache&quot;, ImageCacheKeyGenerator.generateKey(objId, type));\n    int rc = jdbcTemplate.update(SQL_DELETE_IMAGE, new Object[] {objId,type});\n    return rc &gt; 0;\n}\n</code></pre>\n<p>as you can see, the deleteImage(...) has no annotation, but calls removeFromCacheByPrefix(...).\nthis is a function in the superclass of the repository which looks like this:</p>\n<pre><code>protected void removeFromCacheByPrefix(String cacheName, String prefix) {\n    var cache = this.cacheManager.getCache(cacheName);\n    Set&lt;String&gt; keys = new HashSet&lt;String&gt;();\n    cache.forEach(entry -&gt; {\n        var key = String.valueOf(entry.getKey());\n        if (key.startsWith(prefix)) {\n            keys.add(String.valueOf(entry.getKey()));\n        }\n    });\n    cache.removeAll(keys);\n}\n</code></pre>\n<p>works fine for me this way!</p>\n"}],"owner":{"account_id":1756397,"reputation":363,"user_id":1604339,"display_name":"Daniel Gomes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16058,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":40680741,"answer_count":7,"score":21,"last_activity_date":1665925540,"creation_date":1374245185,"question_id":17749049,"body_markdown":"Is there any way of using wildcards in @CacheEvict?\r\n\r\nI have an application with multi-tenancy that sometimes needs to evict all the data from the cache of the tenant, but not of all tenants in the system.\r\n\r\nConsider the following method:\r\n\r\n    @Cacheable(value=&quot;users&quot;, key=&quot;T(Security).getTenant() + #user.key&quot;)\r\n    public List&lt;User&gt; getUsers(User user) {\r\n        ...\r\n    }\r\n\r\nSo, I would like to do something like:\r\n\r\n    @CacheEvict(value=&quot;users&quot;, key=&quot;T(Security).getTenant() + *&quot;)\r\n    public void deleteOrganization(Organization organization) {\r\n        ...\r\n    }\r\n\r\nIs there anyway to do it?","title":"Spring @CacheEvict using wildcards","body":"<p>Is there any way of using wildcards in @CacheEvict?</p>\n\n<p>I have an application with multi-tenancy that sometimes needs to evict all the data from the cache of the tenant, but not of all tenants in the system.</p>\n\n<p>Consider the following method:</p>\n\n<pre><code>@Cacheable(value=\"users\", key=\"T(Security).getTenant() + #user.key\")\npublic List&lt;User&gt; getUsers(User user) {\n    ...\n}\n</code></pre>\n\n<p>So, I would like to do something like:</p>\n\n<pre><code>@CacheEvict(value=\"users\", key=\"T(Security).getTenant() + *\")\npublic void deleteOrganization(Organization organization) {\n    ...\n}\n</code></pre>\n\n<p>Is there anyway to do it?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","keycloak"],"comments":[{"owner":{"account_id":7637322,"reputation":4139,"user_id":5790498,"display_name":"Abhijeet"},"score":0,"creation_date":1650863947,"post_id":71974489,"comment_id":127214721,"body_markdown":"Please share all the logs","body":"Please share all the logs"},{"owner":{"account_id":15901899,"reputation":15,"user_id":11474049,"display_name":"Artcann"},"score":0,"creation_date":1650890931,"post_id":71974489,"comment_id":127223082,"body_markdown":"See updated post","body":"See updated post"}],"answers":[{"comments":[{"owner":{"account_id":15901899,"reputation":15,"user_id":11474049,"display_name":"Artcann"},"score":0,"creation_date":1650702354,"post_id":71977959,"comment_id":127186333,"body_markdown":"Yeah I already added the entry in etc/hosts. But I thinks the real problem is that Spring doesn&#39;t reach the right url, and I can&#39;t find why and how to change that.","body":"Yeah I already added the entry in etc/hosts. But I thinks the real problem is that Spring doesn&#39;t reach the right url, and I can&#39;t find why and how to change that."},{"owner":{"account_id":15901899,"reputation":15,"user_id":11474049,"display_name":"Artcann"},"score":0,"creation_date":1650716916,"post_id":71977959,"comment_id":127189002,"body_markdown":"I tried it and I can reach this url, but Spring is not calling the right url, as I said in my post, it&#39;s missing the /auth before the /realms, and I can&#39;t find how to change that. I specified the right base url but it looks like Spring doesn&#39;t use it.","body":"I tried it and I can reach this url, but Spring is not calling the right url, as I said in my post, it&#39;s missing the /auth before the /realms, and I can&#39;t find how to change that. I specified the right base url but it looks like Spring doesn&#39;t use it."}],"tags":[],"owner":{"account_id":127329,"reputation":2592,"user_id":324407,"accept_rate":25,"display_name":"Delta George"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1650706229,"creation_date":1650701569,"answer_id":71977959,"question_id":71974489,"body_markdown":"I see that you specified client_credentials. This means there is no browser involved which makes it simpler to troubleshoot. Please try from the command line to make sure that your Keycloak config supports this grant type:\r\n\r\n       curl -L -X POST &#39;http://localhost:8080/auth/realms/XXXXXXX/protocol/openid-connect/token&#39; \\\r\n        --header &#39;Content-Type: application/x-www-form-urlencoded&#39; \\\r\n        --data-urlencode &#39;client_id=XXXXX&#39; \\\r\n        --data-urlencode &#39;client_secret=XXXXX&#39; \\\r\n        --data-urlencode &#39;scope=email&#39; \\\r\n        --data-urlencode &#39;grant_type=client_credentials&#39;\r\n\r\nReplace XXX with your values. Spring would need to make the same call but with a keycloak host.\r\n","title":"Cannot make Keycloak work inside docker-compose with Spring Boot application","body":"<p>I see that you specified client_credentials. This means there is no browser involved which makes it simpler to troubleshoot. Please try from the command line to make sure that your Keycloak config supports this grant type:</p>\n<pre><code>   curl -L -X POST 'http://localhost:8080/auth/realms/XXXXXXX/protocol/openid-connect/token' \\\n    --header 'Content-Type: application/x-www-form-urlencoded' \\\n    --data-urlencode 'client_id=XXXXX' \\\n    --data-urlencode 'client_secret=XXXXX' \\\n    --data-urlencode 'scope=email' \\\n    --data-urlencode 'grant_type=client_credentials'\n</code></pre>\n<p>Replace XXX with your values. Spring would need to make the same call but with a keycloak host.</p>\n"},{"comments":[{"owner":{"account_id":15901899,"reputation":15,"user_id":11474049,"display_name":"Artcann"},"score":0,"creation_date":1650995913,"post_id":72008154,"comment_id":127254851,"body_markdown":"It definitely helped ! I noticed I was using the wrong version of Keycloak in my docker-compose. So now I put http://keycloak:8080 in my config, but I still have the same issue. Connection refused. But if I try to access the URL in my browser, I can see the JSON Spring is trying to get.","body":"It definitely helped ! I noticed I was using the wrong version of Keycloak in my docker-compose. So now I put <a href=\"http://keycloak:8080\" rel=\"nofollow noreferrer\">keycloak:8080</a> in my config, but I still have the same issue. Connection refused. But if I try to access the URL in my browser, I can see the JSON Spring is trying to get."},{"owner":{"account_id":15901899,"reputation":15,"user_id":11474049,"display_name":"Artcann"},"score":0,"creation_date":1650996026,"post_id":72008154,"comment_id":127254905,"body_markdown":"But shouldn&#39;t Spring try to get http://keycloak:8080/realms/ishelp/.well-known/openid-configuration instead of http://localhost:8080/realms/ishelp/.well-known/openid-configuration ?","body":"But shouldn&#39;t Spring try to get <a href=\"http://keycloak:8080/realms/ishelp/.well-known/openid-configuration\" rel=\"nofollow noreferrer\">keycloak:8080/realms/ishelp/.well-known/openid-configuration</a> instead of <a href=\"http://localhost:8080/realms/ishelp/.well-known/openid-configuration\" rel=\"nofollow noreferrer\">localhost:8080/realms/ishelp/.well-known/openid-configuratio&zwnj;&#8203;n</a> ?"},{"owner":{"account_id":7637322,"reputation":4139,"user_id":5790498,"display_name":"Abhijeet"},"score":0,"creation_date":1651031281,"post_id":72008154,"comment_id":127262490,"body_markdown":"@Artcann Which Keycloak URL spring is loading now? Also, could you try using the 15.x.x keycloak version throughout your pom?","body":"@Artcann Which Keycloak URL spring is loading now? Also, could you try using the 15.x.x keycloak version throughout your pom?"},{"owner":{"account_id":15901899,"reputation":15,"user_id":11474049,"display_name":"Artcann"},"score":0,"creation_date":1651043942,"post_id":72008154,"comment_id":127265238,"body_markdown":"Spring is trying to load the following url : localhost:8080/realms/ishelp/.well-known/openid-configuration\nThis one is the right url cause I can see the information Sprint need when I go on the url with my browser. I updated my post with more logs you should check it maybe it could help","body":"Spring is trying to load the following url : localhost:8080/realms/ishelp/.well-known/openid-configuratio&zwnj;&#8203;n This one is the right url cause I can see the information Sprint need when I go on the url with my browser. I updated my post with more logs you should check it maybe it could help"},{"owner":{"account_id":806553,"reputation":421,"user_id":896020,"accept_rate":10,"display_name":"era"},"score":0,"creation_date":1670435330,"post_id":72008154,"comment_id":131877800,"body_markdown":"@Artcann did you able to solve this issue?","body":"@Artcann did you able to solve this issue?"}],"tags":[],"owner":{"account_id":7637322,"reputation":4139,"user_id":5790498,"display_name":"Abhijeet"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650945035,"creation_date":1650945035,"answer_id":72008154,"question_id":71974489,"body_markdown":"According to your dependencies, you are using keycloak 17.0.1. For `17.0.1` version, `keycloak.auth-server-url` should be `http://keycloak:8080`. Try changing it. It should solve your issue.\r\n\r\nAlso, why are using `13.0.1` for keycloak-adapter-bom? It should be consistent with all other depedencies.","title":"Cannot make Keycloak work inside docker-compose with Spring Boot application","body":"<p>According to your dependencies, you are using keycloak 17.0.1. For <code>17.0.1</code> version, <code>keycloak.auth-server-url</code> should be <code>http://keycloak:8080</code>. Try changing it. It should solve your issue.</p>\n<p>Also, why are using <code>13.0.1</code> for keycloak-adapter-bom? It should be consistent with all other depedencies.</p>\n"},{"tags":[],"owner":{"account_id":14650812,"reputation":264,"user_id":10580886,"display_name":"mflorczak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665923547,"creation_date":1665923547,"answer_id":74087136,"question_id":71974489,"body_markdown":"Problem is that Spring boot app coudn&#39;t find keycloak service by provided hostname, because you didn&#39;t define it properly. So docker generated own custom hostname. If you will define hostname in correct way everything will be work perfect. You have to define hostname for your keycloak instance and provide this hostname to application.properties. Your code should look like this: \r\n\r\n    ...\r\n        keycloak:\r\n            image:  quay.io/keycloak/keycloak:legacy\r\n            hostname: keycloak\r\n    ...\r\n\r\nIn your application.properties you already used hostname `keycloak` so I belive it should work for you. \r\n\r\napplication.properties for keycloak &gt; 18 version\r\n\r\n    keycloak.auth-server-url=http://keycloak:8080\r\n\r\nsub path `/auth` is not more mandatory","title":"Cannot make Keycloak work inside docker-compose with Spring Boot application","body":"<p>Problem is that Spring boot app coudn't find keycloak service by provided hostname, because you didn't define it properly. So docker generated own custom hostname. If you will define hostname in correct way everything will be work perfect. You have to define hostname for your keycloak instance and provide this hostname to application.properties. Your code should look like this:</p>\n<pre><code>...\n    keycloak:\n        image:  quay.io/keycloak/keycloak:legacy\n        hostname: keycloak\n...\n</code></pre>\n<p>In your application.properties you already used hostname <code>keycloak</code> so I belive it should work for you.</p>\n<p>application.properties for keycloak &gt; 18 version</p>\n<pre><code>keycloak.auth-server-url=http://keycloak:8080\n</code></pre>\n<p>sub path <code>/auth</code> is not more mandatory</p>\n"}],"owner":{"account_id":15901899,"reputation":15,"user_id":11474049,"display_name":"Artcann"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7055,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1665923547,"creation_date":1650660591,"question_id":71974489,"body_markdown":"I&#39;m trying to use Keycloak as an authentication server for my Spring Boot application. It&#39;s working just fine when I lauch keycloak in a standalone docker and just run my application locally, but now I&#39;m trying to make everything work inside a docker-compose.\r\n\r\nWhen I&#39;m running my docker-compose I end up with the following error when trying to call my API :\r\n```\r\no.keycloak.adapters.KeycloakDeployment   : Failed to load URLs from http://localhost:8080/realms/ishelp/.well-known/openid-configuration\r\n```\r\n\r\nishelp is the name of my realm, I can access my keycloak interface on http://localhost:8080.\r\nI believe the error comes from the lack of between localhost and realms on the url Spring is trying to reach. I have a 404 on http://localhost:8080/realms/ishelp/.well-known/openid-configuration but I can reach http://localhost:8080/auth/realms/ishelp/.well-known/openid-configuration.\r\n\r\nI added **127.0.0.1 keycloak** to my *host* file and I have the following configurations files :\r\n\r\ndocker-compose.yml\r\n```\r\nversion: &quot;3&quot;\r\nservices:\r\n  postgres-db:\r\n    image: postgres:latest\r\n    ports:\r\n      - &#39;5432:5432&#39;\r\n    restart: always\r\n    env_file:\r\n      - .env\r\n    container_name: postgres-db\r\n    volumes:\r\n      - pgdata:/var/lib/postgresql/data\r\n    networks:\r\n      - web\r\n\r\n  postgres-keycloak:\r\n    image: postgres:latest\r\n    container_name: postgres-keycloak\r\n    volumes:\r\n      - pgdata-keycloak:/var/lib/postgresql/data\r\n    environment:\r\n      POSTGRES_DB: keycloak\r\n      POSTGRES_USER: keycloak\r\n      POSTGRES_PASSWORD: password\r\n    networks:\r\n      - web\r\n\r\n  user-service:\r\n    build: .\r\n    ports:\r\n      - &quot;3000:3000&quot;\r\n    container_name: user-service\r\n    depends_on:\r\n      - postgres-db\r\n    networks:\r\n      - web\r\n\r\n  keycloak:\r\n    image:  quay.io/keycloak/keycloak:legacy\r\n    container_name: keycloak\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    environment:\r\n      DB_VENDOR: POSTGRES\r\n      DB_ADDR: postgres-keycloak\r\n      DB_DATABASE: keycloak\r\n      DB_USER: keycloak\r\n      DB_SCHEMA: public\r\n      DB_PASSWORD: password\r\n      KEYCLOAK_USER: admin\r\n      KEYCLOAK_PASSWORD: admin\r\n    networks:\r\n      - web\r\n\r\nvolumes:\r\n  pgdata:\r\n  pgdata-keycloak:\r\n\r\nnetworks:\r\n  web:\r\n```\r\n\r\napplication.properties :\r\n```\r\nspring.datasource.url=jdbc:postgresql://postgres-db:5432/ishelp\r\nspring.datasource.username=postgres\r\nspring.datasource.password=postgres\r\nspring.jpa.hibernate.ddl-auto=create\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\r\n\r\nkeycloak.auth-server-url=http://keycloak:8080/auth\r\nkeycloak.realm=ishelp\r\nkeycloak.resource=user-service\r\nkeycloak.credentials.secret={{my_secret}}\r\nkeycloak.principal-attribute=preferred_username\r\nkeycloak.ssl-required=external\r\n\r\nserver.port=3000\r\n```\r\n\r\nKeycloakConfig.java\r\n```\r\n@Configuration\r\npublic class KeycloakConfig {\r\n\r\n    @Value(&quot;${keycloak.auth-server-url}&quot;)\r\n    private String SERVER_URL;\r\n\r\n    @Value(&quot;${keycloak.realm}&quot;)\r\n    private String REALM;\r\n\r\n    @Value(&quot;${keycloak.resource}&quot;)\r\n    private String CLIENT_ID;\r\n\r\n    @Value(&quot;${keycloak.credentials.secret}&quot;)\r\n    private String CLIENT_SECRET;\r\n    \r\n    @Bean\r\n    public KeycloakSpringBootConfigResolver keycloakConfigResolver() {\r\n        return new KeycloakSpringBootConfigResolver();\r\n    }\r\n\r\n    @Bean\r\n    public Keycloak keycloak() {\r\n        return KeycloakBuilder.builder()\r\n                .serverUrl(SERVER_URL)\r\n                .grantType(&quot;client_credentials&quot;)\r\n                .realm(REALM)\r\n                .clientId(CLIENT_ID)\r\n                .clientSecret(CLIENT_SECRET)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nAnd finally KeycloakWebSecurityConfigurer.java :\r\n```\r\n@KeycloakConfiguration\r\n@EnableGlobalMethodSecurity(jsr250Enabled = true)\r\npublic class KeycloakWebSecurityConfigurer extends KeycloakWebSecurityConfigurerAdapter {\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        super.configure(http);\r\n        http.authorizeRequests()\r\n                .anyRequest()\r\n                .permitAll();\r\n        http.csrf().disable();\r\n    }\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) {\r\n        SimpleAuthorityMapper grantedAuthorityMapper = new SimpleAuthorityMapper();\r\n        grantedAuthorityMapper.setPrefix(&quot;ROLE_&quot;);\r\n\r\n        KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\r\n        keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(grantedAuthorityMapper);\r\n        auth.authenticationProvider(keycloakAuthenticationProvider);\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n    }\r\n\r\n}\r\n```\r\n\r\nThanks for you help !\r\n\r\nEdit 1: As requested, here&#39;s my POM.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;fr.isep&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;user-service&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;user-service&lt;/name&gt;\r\n\t&lt;description&gt;Authentication server for the project&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;keycloak-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;keycloak-spring-security-adapter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;17.0.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;keycloak-admin-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;17.0.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.modelmapper.extensions&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;modelmapper-spring&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.keycloak.bom&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;keycloak-adapter-bom&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;13.0.1&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nEdit 2: The logs of the error. I believe Spring should try to load http://localhost:8080/auth/realms/ishelp/.well-known/openid-configuration but I can&#39;t make it happen.\r\n\r\n```\r\nuser-service         | 2022-04-25 12:46:22.105  INFO 1 --- [nio-3000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\nuser-service         | 2022-04-25 12:46:22.105  INFO 1 --- [nio-3000-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\nuser-service         | 2022-04-25 12:46:22.109  INFO 1 --- [nio-3000-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms\r\nuser-service         | 2022-04-25 12:46:22.226  WARN 1 --- [nio-3000-exec-2] o.keycloak.adapters.KeycloakDeployment   : Failed to load URLs from http://localhost:8080/realms/ishelp/.well-known/openid-configuration\r\nuser-service         |\r\nuser-service         | java.net.ConnectException: Connection refused\r\nuser-service         |  at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]\r\nuser-service         |  at java.base/sun.nio.ch.Net.connect(Net.java:579) ~[na:na]\r\nuser-service         |  at java.base/sun.nio.ch.Net.connect(Net.java:568) ~[na:na]\r\nuser-service         |  at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588) ~[na:na]\r\nuser-service         |  at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\r\nuser-service         |  at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\r\nuser-service         |  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:605) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:440) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.keycloak.adapters.KeycloakDeployment.getOidcConfiguration(KeycloakDeployment.java:230) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.KeycloakDeployment.resolveUrls(KeycloakDeployment.java:182) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.KeycloakDeployment.getRealmInfoUrl(KeycloakDeployment.java:246) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.createVerifier(AdapterTokenVerifier.java:107) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.verifyToken(AdapterTokenVerifier.java:47) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticateToken(BearerTokenRequestAuthenticator.java:103) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticate(BearerTokenRequestAuthenticator.java:88) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:67) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.attemptAuthentication(KeycloakAuthenticationProcessingFilter.java:154) ~[keycloak-spring-security-adapter-17.0.1.jar!/:17.0.1]\r\nuser-service         |  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96) ~[keycloak-spring-security-adapter-17.0.1.jar!/:17.0.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar!/:2.6.3]\r\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.keycloak.adapters.tomcat.AbstractAuthenticatedActionsValve.invoke(AbstractAuthenticatedActionsValve.java:67) ~[spring-boot-container-bundle-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:181) ~[spring-boot-container-bundle-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n```\r\n\r\nEDIT 3 : Adding more logs, I think it could be useful but I can&#39;t get how and why\r\n\r\n```\r\nuser-service         | java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;this.input&quot; is null\r\nuser-service         |  at java.base/java.net.URI$Parser.parse(URI.java:3165) ~[na:na]\r\nuser-service         |  at java.base/java.net.URI.&lt;init&gt;(URI.java:623) ~[na:na]\r\nuser-service         |  at java.base/java.net.URI.create(URI.java:904) ~[na:na]\r\nuser-service         |  at org.apache.http.client.methods.HttpGet.&lt;init&gt;(HttpGet.java:66) ~[httpclient-4.5.13.jar!/:4.5.13]\r\nuser-service         |  at org.keycloak.adapters.rotation.JWKPublicKeyLocator.sendRequest(JWKPublicKeyLocator.java:97) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.rotation.JWKPublicKeyLocator.getPublicKey(JWKPublicKeyLocator.java:63) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.getPublicKey(AdapterTokenVerifier.java:121) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.createVerifier(AdapterTokenVerifier.java:111) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.verifyToken(AdapterTokenVerifier.java:47) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticateToken(BearerTokenRequestAuthenticator.java:103) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticate(BearerTokenRequestAuthenticator.java:88) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:67) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\r\nuser-service         |  at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.attemptAuthentication(KeycloakAuthenticationProcessingFilter.java:154) ~[keycloak-spring-security-adapter-17.0.1.jar!/:17.0.1]\r\nuser-service         |  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96) ~[keycloak-spring-security-adapter-17.0.1.jar!/:17.0.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar!/:5.6.1]\r\nuser-service         |  at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar!/:5.3.15]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\r\nuser-service         |  at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar!/:5.3.15]\r\n```","title":"Cannot make Keycloak work inside docker-compose with Spring Boot application","body":"<p>I'm trying to use Keycloak as an authentication server for my Spring Boot application. It's working just fine when I lauch keycloak in a standalone docker and just run my application locally, but now I'm trying to make everything work inside a docker-compose.</p>\n<p>When I'm running my docker-compose I end up with the following error when trying to call my API :</p>\n<pre><code>o.keycloak.adapters.KeycloakDeployment   : Failed to load URLs from http://localhost:8080/realms/ishelp/.well-known/openid-configuration\n</code></pre>\n<p>ishelp is the name of my realm, I can access my keycloak interface on http://localhost:8080.\nI believe the error comes from the lack of between localhost and realms on the url Spring is trying to reach. I have a 404 on http://localhost:8080/realms/ishelp/.well-known/openid-configuration but I can reach http://localhost:8080/auth/realms/ishelp/.well-known/openid-configuration.</p>\n<p>I added <strong>127.0.0.1 keycloak</strong> to my <em>host</em> file and I have the following configurations files :</p>\n<p>docker-compose.yml</p>\n<pre><code>version: &quot;3&quot;\nservices:\n  postgres-db:\n    image: postgres:latest\n    ports:\n      - '5432:5432'\n    restart: always\n    env_file:\n      - .env\n    container_name: postgres-db\n    volumes:\n      - pgdata:/var/lib/postgresql/data\n    networks:\n      - web\n\n  postgres-keycloak:\n    image: postgres:latest\n    container_name: postgres-keycloak\n    volumes:\n      - pgdata-keycloak:/var/lib/postgresql/data\n    environment:\n      POSTGRES_DB: keycloak\n      POSTGRES_USER: keycloak\n      POSTGRES_PASSWORD: password\n    networks:\n      - web\n\n  user-service:\n    build: .\n    ports:\n      - &quot;3000:3000&quot;\n    container_name: user-service\n    depends_on:\n      - postgres-db\n    networks:\n      - web\n\n  keycloak:\n    image:  quay.io/keycloak/keycloak:legacy\n    container_name: keycloak\n    ports:\n      - &quot;8080:8080&quot;\n    environment:\n      DB_VENDOR: POSTGRES\n      DB_ADDR: postgres-keycloak\n      DB_DATABASE: keycloak\n      DB_USER: keycloak\n      DB_SCHEMA: public\n      DB_PASSWORD: password\n      KEYCLOAK_USER: admin\n      KEYCLOAK_PASSWORD: admin\n    networks:\n      - web\n\nvolumes:\n  pgdata:\n  pgdata-keycloak:\n\nnetworks:\n  web:\n</code></pre>\n<p>application.properties :</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://postgres-db:5432/ishelp\nspring.datasource.username=postgres\nspring.datasource.password=postgres\nspring.jpa.hibernate.ddl-auto=create\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.properties.hibernate.format_sql=true\n\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\n\nkeycloak.auth-server-url=http://keycloak:8080/auth\nkeycloak.realm=ishelp\nkeycloak.resource=user-service\nkeycloak.credentials.secret={{my_secret}}\nkeycloak.principal-attribute=preferred_username\nkeycloak.ssl-required=external\n\nserver.port=3000\n</code></pre>\n<p>KeycloakConfig.java</p>\n<pre><code>@Configuration\npublic class KeycloakConfig {\n\n    @Value(&quot;${keycloak.auth-server-url}&quot;)\n    private String SERVER_URL;\n\n    @Value(&quot;${keycloak.realm}&quot;)\n    private String REALM;\n\n    @Value(&quot;${keycloak.resource}&quot;)\n    private String CLIENT_ID;\n\n    @Value(&quot;${keycloak.credentials.secret}&quot;)\n    private String CLIENT_SECRET;\n    \n    @Bean\n    public KeycloakSpringBootConfigResolver keycloakConfigResolver() {\n        return new KeycloakSpringBootConfigResolver();\n    }\n\n    @Bean\n    public Keycloak keycloak() {\n        return KeycloakBuilder.builder()\n                .serverUrl(SERVER_URL)\n                .grantType(&quot;client_credentials&quot;)\n                .realm(REALM)\n                .clientId(CLIENT_ID)\n                .clientSecret(CLIENT_SECRET)\n                .build();\n    }\n}\n</code></pre>\n<p>And finally KeycloakWebSecurityConfigurer.java :</p>\n<pre><code>@KeycloakConfiguration\n@EnableGlobalMethodSecurity(jsr250Enabled = true)\npublic class KeycloakWebSecurityConfigurer extends KeycloakWebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        super.configure(http);\n        http.authorizeRequests()\n                .anyRequest()\n                .permitAll();\n        http.csrf().disable();\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) {\n        SimpleAuthorityMapper grantedAuthorityMapper = new SimpleAuthorityMapper();\n        grantedAuthorityMapper.setPrefix(&quot;ROLE_&quot;);\n\n        KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\n        keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(grantedAuthorityMapper);\n        auth.authenticationProvider(keycloakAuthenticationProvider);\n    }\n\n    @Bean\n    @Override\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n    }\n\n}\n</code></pre>\n<p>Thanks for you help !</p>\n<p>Edit 1: As requested, here's my POM.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;fr.isep&lt;/groupId&gt;\n    &lt;artifactId&gt;user-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;user-service&lt;/name&gt;\n    &lt;description&gt;Authentication server for the project&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-spring-security-adapter&lt;/artifactId&gt;\n            &lt;version&gt;17.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-admin-client&lt;/artifactId&gt;\n            &lt;version&gt;17.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper.extensions&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper-spring&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.keycloak.bom&lt;/groupId&gt;\n                &lt;artifactId&gt;keycloak-adapter-bom&lt;/artifactId&gt;\n                &lt;version&gt;13.0.1&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Edit 2: The logs of the error. I believe Spring should try to load http://localhost:8080/auth/realms/ishelp/.well-known/openid-configuration but I can't make it happen.</p>\n<pre><code>user-service         | 2022-04-25 12:46:22.105  INFO 1 --- [nio-3000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\nuser-service         | 2022-04-25 12:46:22.105  INFO 1 --- [nio-3000-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\nuser-service         | 2022-04-25 12:46:22.109  INFO 1 --- [nio-3000-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms\nuser-service         | 2022-04-25 12:46:22.226  WARN 1 --- [nio-3000-exec-2] o.keycloak.adapters.KeycloakDeployment   : Failed to load URLs from http://localhost:8080/realms/ishelp/.well-known/openid-configuration\nuser-service         |\nuser-service         | java.net.ConnectException: Connection refused\nuser-service         |  at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]\nuser-service         |  at java.base/sun.nio.ch.Net.connect(Net.java:579) ~[na:na]\nuser-service         |  at java.base/sun.nio.ch.Net.connect(Net.java:568) ~[na:na]\nuser-service         |  at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588) ~[na:na]\nuser-service         |  at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\nuser-service         |  at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\nuser-service         |  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:605) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:440) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.keycloak.adapters.KeycloakDeployment.getOidcConfiguration(KeycloakDeployment.java:230) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.KeycloakDeployment.resolveUrls(KeycloakDeployment.java:182) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.KeycloakDeployment.getRealmInfoUrl(KeycloakDeployment.java:246) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.createVerifier(AdapterTokenVerifier.java:107) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.verifyToken(AdapterTokenVerifier.java:47) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticateToken(BearerTokenRequestAuthenticator.java:103) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticate(BearerTokenRequestAuthenticator.java:88) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:67) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.attemptAuthentication(KeycloakAuthenticationProcessingFilter.java:154) ~[keycloak-spring-security-adapter-17.0.1.jar!/:17.0.1]\nuser-service         |  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96) ~[keycloak-spring-security-adapter-17.0.1.jar!/:17.0.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar!/:2.6.3]\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.keycloak.adapters.tomcat.AbstractAuthenticatedActionsValve.invoke(AbstractAuthenticatedActionsValve.java:67) ~[spring-boot-container-bundle-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:181) ~[spring-boot-container-bundle-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n</code></pre>\n<p>EDIT 3 : Adding more logs, I think it could be useful but I can't get how and why</p>\n<pre><code>user-service         | java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;this.input&quot; is null\nuser-service         |  at java.base/java.net.URI$Parser.parse(URI.java:3165) ~[na:na]\nuser-service         |  at java.base/java.net.URI.&lt;init&gt;(URI.java:623) ~[na:na]\nuser-service         |  at java.base/java.net.URI.create(URI.java:904) ~[na:na]\nuser-service         |  at org.apache.http.client.methods.HttpGet.&lt;init&gt;(HttpGet.java:66) ~[httpclient-4.5.13.jar!/:4.5.13]\nuser-service         |  at org.keycloak.adapters.rotation.JWKPublicKeyLocator.sendRequest(JWKPublicKeyLocator.java:97) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.rotation.JWKPublicKeyLocator.getPublicKey(JWKPublicKeyLocator.java:63) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.getPublicKey(AdapterTokenVerifier.java:121) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.createVerifier(AdapterTokenVerifier.java:111) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.rotation.AdapterTokenVerifier.verifyToken(AdapterTokenVerifier.java:47) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticateToken(BearerTokenRequestAuthenticator.java:103) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.BearerTokenRequestAuthenticator.authenticate(BearerTokenRequestAuthenticator.java:88) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:67) ~[keycloak-adapter-core-13.0.1.jar!/:13.0.1]\nuser-service         |  at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.attemptAuthentication(KeycloakAuthenticationProcessingFilter.java:154) ~[keycloak-spring-security-adapter-17.0.1.jar!/:17.0.1]\nuser-service         |  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96) ~[keycloak-spring-security-adapter-17.0.1.jar!/:17.0.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar!/:5.6.1]\nuser-service         |  at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar!/:5.3.15]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar!/:na]\nuser-service         |  at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar!/:5.3.15]\n</code></pre>\n"},{"tags":["java","udp","desktop-sharing"],"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1269012929,"post_id":2478422,"comment_id":2469895,"body_markdown":"Don&#39;t d&#243; this in java. The operating system integration is not suited for this.","body":"Don&#39;t d&#243; this in java. The operating system integration is not suited for this."},{"owner":{"account_id":73540,"reputation":12600,"user_id":211701,"accept_rate":94,"display_name":"Andrei Ciobanu"},"score":0,"creation_date":1269013173,"post_id":2478422,"comment_id":2469926,"body_markdown":"I have portability in mind, but Windows over Linux. Should i try to look into C++ or C# instead ?","body":"I have portability in mind, but Windows over Linux. Should i try to look into C++ or C# instead ?"},{"owner":{"account_id":13389,"reputation":8289,"user_id":26853,"accept_rate":100,"display_name":"Mat Nadrofsky"},"score":0,"creation_date":1269013345,"post_id":2478422,"comment_id":2469950,"body_markdown":"One of the reasons I mention Ultra VNC is that you&#39;ve got a ton of C++ in the Ultra VNC project to check out as well.","body":"One of the reasons I mention Ultra VNC is that you&#39;ve got a ton of C++ in the Ultra VNC project to check out as well."}],"answers":[{"tags":[],"owner":{"account_id":13389,"reputation":8289,"user_id":26853,"accept_rate":100,"display_name":"Mat Nadrofsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1269012377,"creation_date":1269012377,"answer_id":2478460,"question_id":2478422,"body_markdown":"Have a good long look at the [Ultra VNC project][1] on SourceForge. Great place to start.\r\n\r\n\r\n  [1]: http://sourceforge.net/projects/ultravnc/develop","title":"How do I write my own desktop sharing application in java?","body":"<p>Have a good long look at the <a href=\"http://sourceforge.net/projects/ultravnc/develop\" rel=\"noreferrer\">Ultra VNC project</a> on SourceForge. Great place to start.</p>\n"},{"tags":[],"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665923491,"creation_date":1665923491,"answer_id":74087128,"question_id":2478422,"body_markdown":"In pure Java you cannot access structured information on system windows, nor monitor all relevant system events, so the performance of the display synchronization will not be optimal. Also there are privileged windows, which do not accept mouse or key events from Robot. Remote video streaming is not an option!\r\n\r\nWith named restrictions your attempt with the &lt;code&gt;Robot&lt;/code&gt; class is valid.\r\n&lt;code&gt;Robot.createScreenCapture(Rectangle)&lt;/code&gt; will put a Desktop section into a &lt;code&gt;BufferedImage&lt;/code&gt;, which you can send to the client window.\r\nOn client side you can capture keyboard and mouse events and send them to a Robot object on the server side.\r\n\r\nWithout knowing the actual extent of system windows, it will makes sense to work on a grid of Desktop tiles:\r\n- captured BufferedImage-s of tiles may fit into the buffer of the transfer protocol.\r\n- capturing period may locally be optimized for tiles with high entropy (-&gt; Capturing Strategy).\r\n\r\nFurther traffic minimization\r\n- Consider differences of subsequent Desktop contents, only\r\n- Compression of tiles by PNG or a PCX-like method\r\n\r\nFor sharing over internet, Peer-to-Peer connection may be established by \r\n - a public proxy server\r\n - UDP hole punching with, for connection establishing, a necessarily public mediator server\r\n\r\nIn any case the protocol needs to be secured and delivery asserted.\r\n\r\n\r\n","title":"How do I write my own desktop sharing application in java?","body":"<p>In pure Java you cannot access structured information on system windows, nor monitor all relevant system events, so the performance of the display synchronization will not be optimal. Also there are privileged windows, which do not accept mouse or key events from Robot. Remote video streaming is not an option!</p>\n<p>With named restrictions your attempt with the <code>Robot</code> class is valid.\n<code>Robot.createScreenCapture(Rectangle)</code> will put a Desktop section into a <code>BufferedImage</code>, which you can send to the client window.\nOn client side you can capture keyboard and mouse events and send them to a Robot object on the server side.</p>\n<p>Without knowing the actual extent of system windows, it will makes sense to work on a grid of Desktop tiles:</p>\n<ul>\n<li>captured BufferedImage-s of tiles may fit into the buffer of the transfer protocol.</li>\n<li>capturing period may locally be optimized for tiles with high entropy (-&gt; Capturing Strategy).</li>\n</ul>\n<p>Further traffic minimization</p>\n<ul>\n<li>Consider differences of subsequent Desktop contents, only</li>\n<li>Compression of tiles by PNG or a PCX-like method</li>\n</ul>\n<p>For sharing over internet, Peer-to-Peer connection may be established by</p>\n<ul>\n<li>a public proxy server</li>\n<li>UDP hole punching with, for connection establishing, a necessarily public mediator server</li>\n</ul>\n<p>In any case the protocol needs to be secured and delivery asserted.</p>\n"}],"owner":{"account_id":73540,"reputation":12600,"user_id":211701,"accept_rate":94,"display_name":"Andrei Ciobanu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2782,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":2478460,"answer_count":2,"score":5,"last_activity_date":1665923491,"creation_date":1269011996,"question_id":2478422,"body_markdown":"Hello I want write my own desktop sharing application in Java. \r\n\r\nThe application should have some very default features:\r\n\r\n - Capture screen;\r\n\r\n - Allow a remote connected user to click / edit fields.\r\n\r\nI was thinking to use [Java Robot][1] class for mouse movements / key pressing.\r\nThe problem is i don&#39;t know what screen capture strategy to use.\r\n\r\nShould I make sequentially screen captures (on the hosting computer) every second, and send those captures with UDP via network, so that the clients can intercept the data-grams ? Isn&#39;t this a little overkill for the network ?\r\n\r\nWhat other strategies are available ? (Except trying an already existing app).\r\n\r\nPS: If necessary I can even write native code using JNI (still that&#39;s the last thing I planning to do).\r\n\r\nLater edit:\r\nAfter some investigation I&#39;ve come to the conclusion of @Thorbj&#248;rn Ravn Andersen . Java is probably not the best choice for this kind of application. I can try to use JNI, but that code will cover 75%+ of my project. \r\n\r\nI will try to find other alternatives.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/awt/Robot.html","title":"How do I write my own desktop sharing application in java?","body":"<p>Hello I want write my own desktop sharing application in Java. </p>\n\n<p>The application should have some very default features:</p>\n\n<ul>\n<li><p>Capture screen;</p></li>\n<li><p>Allow a remote connected user to click / edit fields.</p></li>\n</ul>\n\n<p>I was thinking to use <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/awt/Robot.html\" rel=\"nofollow noreferrer\">Java Robot</a> class for mouse movements / key pressing.\nThe problem is i don't know what screen capture strategy to use.</p>\n\n<p>Should I make sequentially screen captures (on the hosting computer) every second, and send those captures with UDP via network, so that the clients can intercept the data-grams ? Isn't this a little overkill for the network ?</p>\n\n<p>What other strategies are available ? (Except trying an already existing app).</p>\n\n<p>PS: If necessary I can even write native code using JNI (still that's the last thing I planning to do).</p>\n\n<p>Later edit:\nAfter some investigation I've come to the conclusion of @Thorbjørn Ravn Andersen . Java is probably not the best choice for this kind of application. I can try to use JNI, but that code will cover 75%+ of my project. </p>\n\n<p>I will try to find other alternatives.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":20275861,"reputation":41,"user_id":14870908,"display_name":"buriedpot"},"score":0,"creation_date":1665924781,"post_id":74087126,"comment_id":130808306,"body_markdown":"When I use maven-dependency-tree 2.0+, I can use org.apache.maven.shared.dependency.tree.DependencyNode to get PremanagedVersion. But Maven 3.0+ APIs seem to abandon this class and only reserve org.apache.maven.shared.dependency.graph.DependencyNode. So the question can also be stated as &quot;How can I get a dependencyNode&#39;s premanagedVersion with the class &quot;org.apache.maven.shared.dependency.graph.DependencyNode&quot;?","body":"When I use maven-dependency-tree 2.0+, I can use org.apache.maven.shared.dependency.tree.DependencyNode to get PremanagedVersion. But Maven 3.0+ APIs seem to abandon this class and only reserve org.apache.maven.shared.dependency.graph.DependencyNode. So the question can also be stated as &quot;How can I get a dependencyNode&#39;s premanagedVersion with the class &quot;org.apache.maven.shared.dependency.graph.DependencyNode&quot;?"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1665998167,"post_id":74087126,"comment_id":130822277,"body_markdown":"Can you explain why you need that?","body":"Can you explain why you need that?"},{"owner":{"account_id":20275861,"reputation":41,"user_id":14870908,"display_name":"buriedpot"},"score":0,"creation_date":1666005340,"post_id":74087126,"comment_id":130824772,"body_markdown":"For some research purposes. I just need that for some dependency tree structure&#39;s analysis.","body":"For some research purposes. I just need that for some dependency tree structure&#39;s analysis."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1666007275,"post_id":74087126,"comment_id":130825492,"body_markdown":"What about looking into maven dependency plugin https://maven.apache.org/plugins/maven-dependency-plugin/ (https://github.com/apache/maven-dependency-plugin/)","body":"What about looking into maven dependency plugin <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-dependency-plugin</a> (<a href=\"https://github.com/apache/maven-dependency-plugin/\" rel=\"nofollow noreferrer\">github.com/apache/maven-dependency-plugin</a>)"}],"owner":{"account_id":20275861,"reputation":41,"user_id":14870908,"display_name":"buriedpot"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665923470,"creation_date":1665923470,"question_id":74087126,"body_markdown":"I have a pom-packaging project called &quot;testMultiManage&quot;. The following content is in its pom.xml:\r\n```xml\r\n...\r\n    &lt;modules&gt;\r\n        &lt;module&gt;sub1&lt;/module&gt;\r\n        &lt;module&gt;sub1/subsub1&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;groupC&lt;/groupId&gt;\r\n                &lt;artifactId&gt;C&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n...\r\n```\r\nIn its sub project &quot;sub1&quot;, the content in the pom.xml is\r\n```xml\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;groupB&lt;/groupId&gt;\r\n            &lt;artifactId&gt;B&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\nAnd what in B-1.0.pom is\r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;groupC&lt;/groupId&gt;\r\n        &lt;artifactId&gt;C&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n...\r\n&lt;dependencies&gt;\r\n```\r\n\r\nSo, according to maven&#39;s management control rules, &quot;sub1&quot; will depend on B-1.0, and then transitively depend on C-2.0.\r\n\r\nWhen I use the following code to get the DependencyGraph with Maven 3.0+ API\r\n```java\r\nDefaultProjectBuildingRequest defaultProjectBuildingRequest = new DefaultProjectBuildingRequest();\r\ndefaultProjectBuildingRequest.setRepositorySession(getVerboseRepositorySession(project));\r\ndefaultProjectBuildingRequest.setProject(project);\r\ndefaultProjectBuildingRequest.setRemoteRepositories(remoteRepositories);\r\ndefaultProjectBuildingRequest.setResolveDependencies(true);\r\norg.apache.maven.shared.dependency.graph.DependencyNode dependencyNode = dependencyGraphBuilder.buildDependencyGraph(defaultProjectBuildingRequest, null);\r\n```\r\n\r\n, I get the dependency relationships correctly for project &quot;sub1&quot;. However, **the premanagedVersion of &quot;C-2.0&quot; is null**. \r\n\r\n[![what is shown in debugger][2]][2]\r\nSo how can I use Maven 3.0+ API to get a dependency node&#39;s premanagedVersion? Thanks a lot!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ptViQ.png\r\n  [2]: https://i.stack.imgur.com/5Woqr.png","title":"How can I get a dependencyNode&#39;s premanagedVersion in Maven 3.0+ API?","body":"<p>I have a pom-packaging project called &quot;testMultiManage&quot;. The following content is in its pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n    &lt;modules&gt;\n        &lt;module&gt;sub1&lt;/module&gt;\n        &lt;module&gt;sub1/subsub1&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;groupC&lt;/groupId&gt;\n                &lt;artifactId&gt;C&lt;/artifactId&gt;\n                &lt;version&gt;2.0&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n...\n</code></pre>\n<p>In its sub project &quot;sub1&quot;, the content in the pom.xml is</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;groupB&lt;/groupId&gt;\n            &lt;artifactId&gt;B&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>And what in B-1.0.pom is</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;groupC&lt;/groupId&gt;\n        &lt;artifactId&gt;C&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n...\n&lt;dependencies&gt;\n</code></pre>\n<p>So, according to maven's management control rules, &quot;sub1&quot; will depend on B-1.0, and then transitively depend on C-2.0.</p>\n<p>When I use the following code to get the DependencyGraph with Maven 3.0+ API</p>\n<pre class=\"lang-java prettyprint-override\"><code>DefaultProjectBuildingRequest defaultProjectBuildingRequest = new DefaultProjectBuildingRequest();\ndefaultProjectBuildingRequest.setRepositorySession(getVerboseRepositorySession(project));\ndefaultProjectBuildingRequest.setProject(project);\ndefaultProjectBuildingRequest.setRemoteRepositories(remoteRepositories);\ndefaultProjectBuildingRequest.setResolveDependencies(true);\norg.apache.maven.shared.dependency.graph.DependencyNode dependencyNode = dependencyGraphBuilder.buildDependencyGraph(defaultProjectBuildingRequest, null);\n</code></pre>\n<p>, I get the dependency relationships correctly for project &quot;sub1&quot;. However, <strong>the premanagedVersion of &quot;C-2.0&quot; is null</strong>.</p>\n<p><a href=\"https://i.stack.imgur.com/5Woqr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Woqr.png\" alt=\"what is shown in debugger\" /></a>\nSo how can I use Maven 3.0+ API to get a dependency node's premanagedVersion? Thanks a lot!</p>\n"},{"tags":["java","android","android-studio","android-loadermanager","android-loader"],"answers":[{"tags":[],"owner":{"account_id":6467782,"reputation":680,"user_id":5009024,"display_name":"lyncx"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1621821139,"creation_date":1621821139,"answer_id":67665858,"question_id":67665749,"body_markdown":"`getLoaderManager` has been depreciated, use `getSupportLoaderManager` instead like this:\r\n\r\n    getSupportLoaderManager().initLoader(0, null, this); \r\n\r\nHowever if you still want to use this, it is due to an incorrect import. Import loader call back and it should fix the issue\r\n\r\n    android.app.LoaderCallbacks","title":"getLoaderManager().initLoader error in this callback","body":"<p><code>getLoaderManager</code> has been depreciated, use <code>getSupportLoaderManager</code> instead like this:</p>\n<pre><code>getSupportLoaderManager().initLoader(0, null, this); \n</code></pre>\n<p>However if you still want to use this, it is due to an incorrect import. Import loader call back and it should fix the issue</p>\n<pre><code>android.app.LoaderCallbacks\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22079906,"reputation":1,"user_id":16339629,"display_name":"Gautam Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665922798,"creation_date":1665922746,"answer_id":74087044,"question_id":67665749,"body_markdown":"I also face the same problem but it can solve by using\r\nMainActivity.this insted of simple this.","title":"getLoaderManager().initLoader error in this callback","body":"<p>I also face the same problem but it can solve by using\nMainActivity.this insted of simple this.</p>\n"}],"owner":{"account_id":20659786,"reputation":39,"user_id":15168003,"display_name":"user15168003"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":595,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67665858,"answer_count":2,"score":1,"last_activity_date":1665922798,"creation_date":1621819862,"question_id":67665749,"body_markdown":"it&#39;s the first time I&#39;m using Loader. After calling the method \r\n\r\n`getLoaderManager().initLoader(0, null, this);` I&#39;m getting an error in the argument &quot;this&quot;. \r\n\r\nError after compiling:\r\n\r\n&gt; error: method initLoader in class LoaderManager cannot be applied to given types;\r\n            getLoaderManager().initLoader(0, null, this);\r\n                              ^\r\n  required: int,Bundle,LoaderCallbacks&lt;D&gt;\r\n  found: int,&lt;null&gt;,MainActivity\r\n  reason: cannot infer type-variable(s) D\r\n    (argument mismatch; MainActivity cannot be converted to LoaderCallbacks&lt;D&gt;)\r\n  where D is a type-variable:\r\n    D extends Object declared in method &lt;D&gt;initLoader(int,Bundle,LoaderCallbacks&lt;D&gt;)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jlAWd.png\r\n\r\nMy code:\r\n\r\n    package com.example.newsapp;\r\n\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.net.ConnectivityManager;\r\n    import android.net.NetworkInfo;\r\n    import android.net.Uri;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.widget.AdapterView;\r\n    import android.widget.ListView;\r\n    import android.widget.TextView;\r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.loader.app.LoaderManager;\r\n    import androidx.loader.content.Loader;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n\r\n\r\n\r\n    public class MainActivity extends AppCompatActivity implements LoaderManager.LoaderCallbacks&lt;List&lt;News&gt;&gt; {\r\n\r\n    private static final String URL = &quot;http://content.guardianapis.com/search&quot;;\r\n    private NewsAdapter newsAdapter;\r\n    private TextView emptyListStateTextView;\r\n    private Intent intent;\r\n    ListView newsListView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        Log.e(&quot;MainActivity&quot;, &quot;RUN onCreate...&quot;);\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        newsListView = findViewById(R.id.listView);\r\n        emptyListStateTextView = findViewById(R.id.defautView);\r\n        newsListView.setEmptyView(emptyListStateTextView);\r\n\r\n        newsAdapter = new NewsAdapter(this, new ArrayList&lt;News&gt;());\r\n        newsListView.setAdapter(newsAdapter);\r\n\r\n        newsListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n\r\n                News currentNews = newsAdapter.getItem(position);\r\n\r\n                Uri uri = Uri.parse(currentNews.getUrl());\r\n\r\n                intent= new Intent(Intent.ACTION_VIEW, uri);\r\n\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        ConnectivityManager connMgr = (ConnectivityManager)\r\n                getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();\r\n\r\n        if (networkInfo == null) {\r\n            View loadingIndicator = findViewById(R.id.loading_bar);\r\n            loadingIndicator.setVisibility(View.GONE);\r\n\r\n            emptyListStateTextView.setText(&quot;No internet connection&quot;);\r\n        }else{\r\n\r\n            getLoaderManager().initLoader(0, null, this);\r\n        }\r\n        Log.e(&quot;MainActivity&quot;, &quot;DONE onCreate...&quot;);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Loader&lt;List&lt;News&gt;&gt; onCreateLoader(int i, Bundle args) {\r\n        Log.e(&quot;MainActivity&quot;, &quot;RUN onCreateLoader...&quot;);\r\n\r\n        //TEST\r\n        Uri baseUri = Uri.parse(URL);\r\n        Uri.Builder uriBuilder = baseUri.buildUpon();\r\n\r\n        uriBuilder.appendQueryParameter(&quot;show-tags&quot;, &quot;contributor&quot;);\r\n        uriBuilder.appendQueryParameter(&quot;section&quot;, &quot;technology&quot;);\r\n        uriBuilder.appendQueryParameter(&quot;order-by&quot;, &quot;newest&quot;);\r\n        uriBuilder.appendQueryParameter(&quot;from-date&quot;, &quot;2018-01-01&quot;);\r\n        uriBuilder.appendQueryParameter(&quot;api-key&quot;, &quot;test&quot;);\r\n\r\n        Log.v(&quot;my_tag&quot;, &quot;url created is: &quot;+uriBuilder.toString());\r\n        //TEST\r\n        Log.e(&quot;MainActivity&quot;, &quot;DONE onCreateLoader...&quot;);\r\n        return new NewsLoader(this, uriBuilder.toString());\r\n    }\r\n\r\n    @Override\r\n    public void onLoadFinished(@NonNull Loader&lt;List&lt;News&gt;&gt; loader, List&lt;News&gt; data) {\r\n        Log.e(&quot;MainActivity&quot;, &quot;RUN onLoadFinished...&quot;);\r\n        View loadingBar = findViewById(R.id.loading_bar);\r\n        loadingBar.setVisibility(View.GONE);\r\n\r\n        newsAdapter.clear();\r\n\r\n        if(data != null &amp;&amp; !data.isEmpty()){\r\n            newsAdapter.addAll(data);\r\n        }\r\n        Log.e(&quot;MainActivity&quot;, &quot;DONE onLoadFinished...&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onLoaderReset(@NonNull Loader&lt;List&lt;News&gt;&gt; loader) {\r\n        Log.e(&quot;MainActivity&quot;, &quot;RUN onLoaderReset...&quot;);\r\n        newsAdapter.clear();\r\n        Log.e(&quot;MainActivity&quot;, &quot;DONE onLoaderReset...&quot;);\r\n       }\r\n    }\r\n\r\nI personally believe, that the problem must be somewhere at the imports. Even though I will really appreciate any kind of help. \r\n\r\nThank you!","title":"getLoaderManager().initLoader error in this callback","body":"<p>it's the first time I'm using Loader. After calling the method</p>\n<p><code>getLoaderManager().initLoader(0, null, this);</code> I'm getting an error in the argument &quot;this&quot;.</p>\n<p>Error after compiling:</p>\n<blockquote>\n<p>error: method initLoader in class LoaderManager cannot be applied to given types;\ngetLoaderManager().initLoader(0, null, this);\n^\nrequired: int,Bundle,LoaderCallbacks\nfound: int,,MainActivity\nreason: cannot infer type-variable(s) D\n(argument mismatch; MainActivity cannot be converted to LoaderCallbacks)\nwhere D is a type-variable:\nD extends Object declared in method initLoader(int,Bundle,LoaderCallbacks)</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/jlAWd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jlAWd.png\" alt=\"enter image description here\" /></a></p>\n<p>My code:</p>\n<pre><code>package com.example.newsapp;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.ListView;\nimport android.widget.TextView;\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.loader.app.LoaderManager;\nimport androidx.loader.content.Loader;\nimport java.util.ArrayList;\nimport java.util.List;\n\n\n\n\npublic class MainActivity extends AppCompatActivity implements LoaderManager.LoaderCallbacks&lt;List&lt;News&gt;&gt; {\n\nprivate static final String URL = &quot;http://content.guardianapis.com/search&quot;;\nprivate NewsAdapter newsAdapter;\nprivate TextView emptyListStateTextView;\nprivate Intent intent;\nListView newsListView;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    Log.e(&quot;MainActivity&quot;, &quot;RUN onCreate...&quot;);\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    newsListView = findViewById(R.id.listView);\n    emptyListStateTextView = findViewById(R.id.defautView);\n    newsListView.setEmptyView(emptyListStateTextView);\n\n    newsAdapter = new NewsAdapter(this, new ArrayList&lt;News&gt;());\n    newsListView.setAdapter(newsAdapter);\n\n    newsListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n        @Override\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n\n            News currentNews = newsAdapter.getItem(position);\n\n            Uri uri = Uri.parse(currentNews.getUrl());\n\n            intent= new Intent(Intent.ACTION_VIEW, uri);\n\n            startActivity(intent);\n        }\n    });\n\n    ConnectivityManager connMgr = (ConnectivityManager)\n            getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();\n\n    if (networkInfo == null) {\n        View loadingIndicator = findViewById(R.id.loading_bar);\n        loadingIndicator.setVisibility(View.GONE);\n\n        emptyListStateTextView.setText(&quot;No internet connection&quot;);\n    }else{\n\n        getLoaderManager().initLoader(0, null, this);\n    }\n    Log.e(&quot;MainActivity&quot;, &quot;DONE onCreate...&quot;);\n}\n\n@NonNull\n@Override\npublic Loader&lt;List&lt;News&gt;&gt; onCreateLoader(int i, Bundle args) {\n    Log.e(&quot;MainActivity&quot;, &quot;RUN onCreateLoader...&quot;);\n\n    //TEST\n    Uri baseUri = Uri.parse(URL);\n    Uri.Builder uriBuilder = baseUri.buildUpon();\n\n    uriBuilder.appendQueryParameter(&quot;show-tags&quot;, &quot;contributor&quot;);\n    uriBuilder.appendQueryParameter(&quot;section&quot;, &quot;technology&quot;);\n    uriBuilder.appendQueryParameter(&quot;order-by&quot;, &quot;newest&quot;);\n    uriBuilder.appendQueryParameter(&quot;from-date&quot;, &quot;2018-01-01&quot;);\n    uriBuilder.appendQueryParameter(&quot;api-key&quot;, &quot;test&quot;);\n\n    Log.v(&quot;my_tag&quot;, &quot;url created is: &quot;+uriBuilder.toString());\n    //TEST\n    Log.e(&quot;MainActivity&quot;, &quot;DONE onCreateLoader...&quot;);\n    return new NewsLoader(this, uriBuilder.toString());\n}\n\n@Override\npublic void onLoadFinished(@NonNull Loader&lt;List&lt;News&gt;&gt; loader, List&lt;News&gt; data) {\n    Log.e(&quot;MainActivity&quot;, &quot;RUN onLoadFinished...&quot;);\n    View loadingBar = findViewById(R.id.loading_bar);\n    loadingBar.setVisibility(View.GONE);\n\n    newsAdapter.clear();\n\n    if(data != null &amp;&amp; !data.isEmpty()){\n        newsAdapter.addAll(data);\n    }\n    Log.e(&quot;MainActivity&quot;, &quot;DONE onLoadFinished...&quot;);\n}\n\n@Override\npublic void onLoaderReset(@NonNull Loader&lt;List&lt;News&gt;&gt; loader) {\n    Log.e(&quot;MainActivity&quot;, &quot;RUN onLoaderReset...&quot;);\n    newsAdapter.clear();\n    Log.e(&quot;MainActivity&quot;, &quot;DONE onLoaderReset...&quot;);\n   }\n}\n</code></pre>\n<p>I personally believe, that the problem must be somewhere at the imports. Even though I will really appreciate any kind of help.</p>\n<p>Thank you!</p>\n"},{"tags":["java","android","sqlite"],"comments":[{"owner":{"account_id":1892898,"reputation":467,"user_id":1713366,"accept_rate":97,"display_name":"Jcorretjer"},"score":0,"creation_date":1665893922,"post_id":74083714,"comment_id":130803786,"body_markdown":"I suggest you learn to use Room(https://developer.android.com/training/data-storage/room/) as soon as possible. It&#39;s much easier than working with sqlite directly. 1st, plan out how everything is going to work. 2nd, build your database connections. 3rd, start adding crud operations. Create an operation, test with dummy data, and repeat until you&#39;ve got a stable flow. Lastly, replace dummy data with real data and you&#39;re done","body":"I suggest you learn to use Room(<a href=\"https://developer.android.com/training/data-storage/room/\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/room</a>) as soon as possible. It&#39;s much easier than working with sqlite directly. 1st, plan out how everything is going to work. 2nd, build your database connections. 3rd, start adding crud operations. Create an operation, test with dummy data, and repeat until you&#39;ve got a stable flow. Lastly, replace dummy data with real data and you&#39;re done"}],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665922444,"creation_date":1665921759,"answer_id":74086942,"question_id":74083714,"body_markdown":"&gt; Any suggestions would be very helpful.\r\n\r\n***Perhaps consider the following.***\r\n\r\nFirst rather than have an asset (pre-packaged database) the demo creates the database and loads some data (for convenience). \r\n\r\nAs the schama isn&#39;t available this has been made up (this answer is about the principle as opposed to the actual data which is not available).\r\n\r\nThe table is called **pet** it has 5 columns:-\r\n- **_id** (the android standard for the id column that uniquely identifies a row)\r\n- **type** for the type of pet (dog, cat ....)\r\n- **breed** e.g. alsatian\r\n- **lifestage** newborn, old ....\r\n- **cost** \r\n\r\nSome data is loaded (in the onCreate method, ***Note** instead of **SQLiteAssetHelper** the stock **SQliteOpenHelper** has been used as there is no asset to load*)\r\n\r\nSo purely for convenience DBHelper is :-\r\n\r\n    public class DBHelper extends SQLiteOpenHelper /* changed for simulation of asset */ {\r\n    \r\n       public static final String DBNAME = &quot;PetAdoption.db&quot;;\r\n       public static final int DBVERSION = 1;\r\n    \r\n       private static String[] testdata1 = new String[]{&quot;Dog&quot;,&quot;Alsatian&quot;,&quot;old&quot;,&quot;100&quot;};\r\n       private static String[] testdata2 = new String[]{&quot;Dog&quot;,&quot;Golden Retriever&quot;,&quot;newborn&quot;,&quot;200&quot;};\r\n       private static String[] testdata3 = new String[]{&quot;Cat&quot;,&quot;Siamese&quot;,&quot;young&quot;,&quot;150&quot;};\r\n       private static String[] testdata4 = new String[]{&quot;Cat&quot;,&quot;Burmese&quot;,&quot;mature&quot;,&quot;110&quot;};\r\n       private static String[] testdata5 = new String[]{&quot;Cat&quot;,&quot;Persian&quot;,&quot;old&quot;,&quot;75&quot;};\r\n       private static String[] testdata6 = new String[]{&quot;Dog&quot;,&quot;Corgi&quot;,&quot;mature&quot;,&quot;300&quot;};\r\n    \r\n       public DBHelper(Context context) {\r\n          super(context,DBNAME,null,DBVERSION);\r\n       }\r\n    \r\n       /* ADDED to simulate getting data from asset */\r\n       @Override\r\n       public void onCreate(SQLiteDatabase sqLiteDatabase) {\r\n          sqLiteDatabase.execSQL(&quot;CREATE TABLE IF NOT EXISTS pet (&quot; +\r\n                  BaseColumns._ID + &quot; INTEGER PRIMARY KEY&quot; +\r\n                  &quot;,&quot; + &quot;type TEXT&quot; +\r\n                  &quot;,&quot; + &quot;breed TEXT&quot; +\r\n                  &quot;,&quot; + &quot;lifestage TEXT&quot; +\r\n                  &quot;,&quot; + &quot;cost REAL&quot; +\r\n                  &quot;)&quot;\r\n          );\r\n          insertTestData(sqLiteDatabase,testdata1);\r\n          insertTestData(sqLiteDatabase,testdata2);\r\n          insertTestData(sqLiteDatabase,testdata3);\r\n          insertTestData(sqLiteDatabase,testdata4);\r\n          insertTestData(sqLiteDatabase,testdata5);\r\n          insertTestData(sqLiteDatabase,testdata6);\r\n    \r\n       }\r\n    \r\n       private void insertTestData(SQLiteDatabase db, String[] data) {\r\n          if (data.length != 4) return;\r\n          ContentValues cv = new ContentValues();\r\n          cv.put(&quot;type&quot;,data[0]);\r\n          cv.put(&quot;breed&quot;,data[1]);\r\n          cv.put(&quot;lifestage&quot;,data[2]);\r\n          cv.put(&quot;cost&quot;,data[3]);\r\n          db.insert(&quot;pet&quot;,null,cv);\r\n       }\r\n    \r\n       @Override\r\n       public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\r\n       }\r\n    }\r\n\r\n\r\nThe resultant **pet** table will then be:-\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nTo give an idea of what could be done to select data with some flexibility **MainActivity** has been changed to be:-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        //private Context context;\r\n        //private String query;\r\n    \r\n        private String typeSelection = &quot;dog&quot;;\r\n        private String breedSelection = &quot;alsatian&quot;;\r\n        private String lifeStageSelection = &quot;young&quot;;\r\n        private String lowerCostRangeSelection = &quot;0.0&quot;;\r\n        private String upperCostRangeSelection = &quot;150&quot;;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n            /*\r\n            DatabaseAccess databaseAccess = DatabaseAccess.getInstance(context);\r\n            databaseAccess.openDatabase();\r\n            Cursor cursor = databaseAccess.getWritableDatabase().rawQuery(query, null);\r\n             */\r\n            DatabaseUtils.dumpCursor(\r\n                    getSelection(typeSelection,breedSelection,lifeStageSelection,lowerCostRangeSelection,upperCostRangeSelection)\r\n            );\r\n            DatabaseUtils.dumpCursor(\r\n                    getSelection(&quot;Dog&quot;,null,null,null,null)\r\n            );\r\n            DatabaseUtils.dumpCursor(\r\n                    getSelection(&quot;Cat&quot;,null,null,null,null)\r\n            );\r\n            DatabaseUtils.dumpCursor(\r\n                    getSelection(null,null,null,null,null)\r\n            );\r\n        }\r\n    \r\n    \r\n        private Cursor getSelection(String type, String breed, String lifeStage, String lowerCost, String upperCost ) {\r\n            String[] args = null;\r\n            ArrayList&lt;String&gt; argsArrayList = new ArrayList&lt;&gt;();\r\n            StringBuilder whereClause = new StringBuilder();\r\n            if (type != null &amp;&amp; type.length() &gt; 0) {\r\n                if (whereClause.length() &lt; 1) whereClause.append(&quot; &quot;);\r\n                else whereClause.append(&quot; AND &quot;);\r\n                whereClause.append(&quot; type=?&quot;);\r\n                argsArrayList.add(type);\r\n            }\r\n            if (breed != null &amp;&amp; breed.length() &gt; 0) {\r\n                if (whereClause.length() &lt; 1) whereClause.append(&quot; &quot;);\r\n                else whereClause.append(&quot; AND &quot;);\r\n                whereClause.append(&quot; breed=?&quot;);\r\n                argsArrayList.add(breed);\r\n            }\r\n            if (lifeStage != null &amp;&amp; type.length() &gt; 0) {\r\n                if (whereClause.length() &lt; 1) whereClause.append(&quot; &quot;);\r\n                else whereClause.append(&quot; AND &quot;);\r\n                whereClause.append(&quot; lifestage=?&quot;);\r\n                argsArrayList.add(lifeStage);\r\n            }\r\n            if (lowerCost != null &amp;&amp; upperCost != null &amp;&amp; lowerCost.length() &gt; 0 &amp;&amp; upperCost.length() &gt; 0) {\r\n                if (whereClause.length() &lt; 1) whereClause.append(&quot; &quot;);\r\n                else whereClause.append(&quot; AND &quot;);\r\n                whereClause.append(&quot; cost BETWEEN ? AND ?&quot;);\r\n                argsArrayList.add(lowerCost);\r\n                argsArrayList.add(upperCost);\r\n            }\r\n            if (whereClause.length() &gt; 1) {\r\n                args = new String[argsArrayList.size()];\r\n                int i = 0;\r\n                for (String s: argsArrayList) {\r\n                    args[i++] = s;\r\n                }\r\n            }\r\n            return DatabaseAccess.getInstance(this).getWritableDatabase().query(&quot;pet&quot;,null,whereClause.toString(),args,null,null,null);\r\n        }\r\n    }\r\n\r\nthe **getSelection** method being the main addition i.e. the code that allows selection according to, in this case, 5 values:-\r\n\r\n- the type\r\n- the breed\r\n- the lifestage\r\n- the lower cost and and the upper cost (i.e. a range selection)\r\n\r\n- the SQLiteDatabase conveneince **query** method has been used, this is recommended over rawQuery.\r\n\r\nThe method is designed to be flexible and allow selection by none are all values. None would select every row.\r\n\r\n- Note that lower and upper cost must both be provided as they are a range.\r\n\r\n\r\nThe code within the onCreate method simply calls the **getSelection** method to reflect various selections.\r\n\r\nThe first of the 4, will retrieve nothing as no row would match all the given criteria.\r\nThe second will select rows where **type** is **Dog** (3 rows).\r\nThe third will select rows where the **type** is **Cat** (the other 3 rows).\r\nThe fourth returns all rows (as nulls are passed which equates to no selections criteria).\r\n\r\n- Note the method hasn&#39;t undergone comprehensive testing and is meant as a pointer.\r\n\r\n- DatabaseUtils is a class that as it&#39;s name suggests has some useful utilities, like, as demonstrated dumping a Cursor.\r\n\r\n\r\nThe **Result** as output to the log being:-\r\n\r\n    2022-10-16 22:56:51.850 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@9c8df94\r\n    2022-10-16 22:56:51.850 I/System.out: &lt;&lt;&lt;&lt;&lt;\r\n    \r\n    \r\n    2022-10-16 22:56:51.851 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@f1e7a3d\r\n    2022-10-16 22:56:51.852 I/System.out: 0 {\r\n    2022-10-16 22:56:51.852 I/System.out:    _id=1\r\n    2022-10-16 22:56:51.852 I/System.out:    type=Dog\r\n    2022-10-16 22:56:51.852 I/System.out:    breed=Alsatian\r\n    2022-10-16 22:56:51.853 I/System.out:    lifestage=old\r\n    2022-10-16 22:56:51.853 I/System.out:    cost=100\r\n    2022-10-16 22:56:51.853 I/System.out: }\r\n    2022-10-16 22:56:51.853 I/System.out: 1 {\r\n    2022-10-16 22:56:51.853 I/System.out:    _id=2\r\n    2022-10-16 22:56:51.853 I/System.out:    type=Dog\r\n    2022-10-16 22:56:51.853 I/System.out:    breed=Golden Retriever\r\n    2022-10-16 22:56:51.853 I/System.out:    lifestage=newborn\r\n    2022-10-16 22:56:51.853 I/System.out:    cost=200\r\n    2022-10-16 22:56:51.854 I/System.out: }\r\n    2022-10-16 22:56:51.854 I/System.out: 2 {\r\n    2022-10-16 22:56:51.854 I/System.out:    _id=6\r\n    2022-10-16 22:56:51.854 I/System.out:    type=Dog\r\n    2022-10-16 22:56:51.854 I/System.out:    breed=Corgi\r\n    2022-10-16 22:56:51.854 I/System.out:    lifestage=mature\r\n    2022-10-16 22:56:51.854 I/System.out:    cost=300\r\n    2022-10-16 22:56:51.854 I/System.out: }\r\n    2022-10-16 22:56:51.854 I/System.out: &lt;&lt;&lt;&lt;&lt;\r\n    \r\n    \r\n    2022-10-16 22:56:51.854 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@166d232\r\n    2022-10-16 22:56:51.855 I/System.out: 0 {\r\n    2022-10-16 22:56:51.855 I/System.out:    _id=3\r\n    2022-10-16 22:56:51.856 I/System.out:    type=Cat\r\n    2022-10-16 22:56:51.856 I/System.out:    breed=Siamese\r\n    2022-10-16 22:56:51.856 I/System.out:    lifestage=young\r\n    2022-10-16 22:56:51.856 I/System.out:    cost=150\r\n    2022-10-16 22:56:51.856 I/System.out: }\r\n    2022-10-16 22:56:51.856 I/System.out: 1 {\r\n    2022-10-16 22:56:51.856 I/System.out:    _id=4\r\n    2022-10-16 22:56:51.856 I/System.out:    type=Cat\r\n    2022-10-16 22:56:51.856 I/System.out:    breed=Burmese\r\n    2022-10-16 22:56:51.856 I/System.out:    lifestage=mature\r\n    2022-10-16 22:56:51.856 I/System.out:    cost=110\r\n    2022-10-16 22:56:51.856 I/System.out: }\r\n    2022-10-16 22:56:51.856 I/System.out: 2 {\r\n    2022-10-16 22:56:51.856 I/System.out:    _id=5\r\n    2022-10-16 22:56:51.856 I/System.out:    type=Cat\r\n    2022-10-16 22:56:51.856 I/System.out:    breed=Persian\r\n    2022-10-16 22:56:51.856 I/System.out:    lifestage=old\r\n    2022-10-16 22:56:51.856 I/System.out:    cost=75\r\n    2022-10-16 22:56:51.856 I/System.out: }\r\n    2022-10-16 22:56:51.856 I/System.out: &lt;&lt;&lt;&lt;&lt;\r\n    \r\n    \r\n    2022-10-16 22:56:51.857 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@17eeb83\r\n    2022-10-16 22:56:51.857 I/System.out: 0 {\r\n    2022-10-16 22:56:51.857 I/System.out:    _id=1\r\n    2022-10-16 22:56:51.857 I/System.out:    type=Dog\r\n    2022-10-16 22:56:51.857 I/System.out:    breed=Alsatian\r\n    2022-10-16 22:56:51.857 I/System.out:    lifestage=old\r\n    2022-10-16 22:56:51.858 I/System.out:    cost=100\r\n    2022-10-16 22:56:51.858 I/System.out: }\r\n    2022-10-16 22:56:51.858 I/System.out: 1 {\r\n    2022-10-16 22:56:51.858 I/System.out:    _id=2\r\n    2022-10-16 22:56:51.858 I/System.out:    type=Dog\r\n    2022-10-16 22:56:51.858 I/System.out:    breed=Golden Retriever\r\n    2022-10-16 22:56:51.858 I/System.out:    lifestage=newborn\r\n    2022-10-16 22:56:51.858 I/System.out:    cost=200\r\n    2022-10-16 22:56:51.858 I/System.out: }\r\n    2022-10-16 22:56:51.858 I/System.out: 2 {\r\n    2022-10-16 22:56:51.858 I/System.out:    _id=3\r\n    2022-10-16 22:56:51.858 I/System.out:    type=Cat\r\n    2022-10-16 22:56:51.858 I/System.out:    breed=Siamese\r\n    2022-10-16 22:56:51.858 I/System.out:    lifestage=young\r\n    2022-10-16 22:56:51.858 I/System.out:    cost=150\r\n    2022-10-16 22:56:51.858 I/System.out: }\r\n    2022-10-16 22:56:51.858 I/System.out: 3 {\r\n    2022-10-16 22:56:51.858 I/System.out:    _id=4\r\n    2022-10-16 22:56:51.858 I/System.out:    type=Cat\r\n    2022-10-16 22:56:51.858 I/System.out:    breed=Burmese\r\n    2022-10-16 22:56:51.858 I/System.out:    lifestage=mature\r\n    2022-10-16 22:56:51.859 I/System.out:    cost=110\r\n    2022-10-16 22:56:51.859 I/System.out: }\r\n    2022-10-16 22:56:51.859 I/System.out: 4 {\r\n    2022-10-16 22:56:51.859 I/System.out:    _id=5\r\n    2022-10-16 22:56:51.859 I/System.out:    type=Cat\r\n    2022-10-16 22:56:51.859 I/System.out:    breed=Persian\r\n    2022-10-16 22:56:51.859 I/System.out:    lifestage=old\r\n    2022-10-16 22:56:51.859 I/System.out:    cost=75\r\n    2022-10-16 22:56:51.859 I/System.out: }\r\n    2022-10-16 22:56:51.859 I/System.out: 5 {\r\n    2022-10-16 22:56:51.859 I/System.out:    _id=6\r\n    2022-10-16 22:56:51.859 I/System.out:    type=Dog\r\n    2022-10-16 22:56:51.859 I/System.out:    breed=Corgi\r\n    2022-10-16 22:56:51.859 I/System.out:    lifestage=mature\r\n    2022-10-16 22:56:51.859 I/System.out:    cost=300\r\n    2022-10-16 22:56:51.859 I/System.out: }\r\n    2022-10-16 22:56:51.859 I/System.out: &lt;&lt;&lt;&lt;&lt;\r\n\r\n  [1]: https://i.stack.imgur.com/fYGoZ.png","title":"Android Studio SQLite database asset into Recyclerview but only showing specific data","body":"<blockquote>\n<p>Any suggestions would be very helpful.</p>\n</blockquote>\n<p><em><strong>Perhaps consider the following.</strong></em></p>\n<p>First rather than have an asset (pre-packaged database) the demo creates the database and loads some data (for convenience).</p>\n<p>As the schama isn't available this has been made up (this answer is about the principle as opposed to the actual data which is not available).</p>\n<p>The table is called <strong>pet</strong> it has 5 columns:-</p>\n<ul>\n<li><strong>_id</strong> (the android standard for the id column that uniquely identifies a row)</li>\n<li><strong>type</strong> for the type of pet (dog, cat ....)</li>\n<li><strong>breed</strong> e.g. alsatian</li>\n<li><strong>lifestage</strong> newborn, old ....</li>\n<li><strong>cost</strong></li>\n</ul>\n<p>Some data is loaded (in the onCreate method, <em><strong>Note</strong> instead of <strong>SQLiteAssetHelper</strong> the stock <strong>SQliteOpenHelper</strong> has been used as there is no asset to load</em>)</p>\n<p>So purely for convenience DBHelper is :-</p>\n<pre><code>public class DBHelper extends SQLiteOpenHelper /* changed for simulation of asset */ {\n\n   public static final String DBNAME = &quot;PetAdoption.db&quot;;\n   public static final int DBVERSION = 1;\n\n   private static String[] testdata1 = new String[]{&quot;Dog&quot;,&quot;Alsatian&quot;,&quot;old&quot;,&quot;100&quot;};\n   private static String[] testdata2 = new String[]{&quot;Dog&quot;,&quot;Golden Retriever&quot;,&quot;newborn&quot;,&quot;200&quot;};\n   private static String[] testdata3 = new String[]{&quot;Cat&quot;,&quot;Siamese&quot;,&quot;young&quot;,&quot;150&quot;};\n   private static String[] testdata4 = new String[]{&quot;Cat&quot;,&quot;Burmese&quot;,&quot;mature&quot;,&quot;110&quot;};\n   private static String[] testdata5 = new String[]{&quot;Cat&quot;,&quot;Persian&quot;,&quot;old&quot;,&quot;75&quot;};\n   private static String[] testdata6 = new String[]{&quot;Dog&quot;,&quot;Corgi&quot;,&quot;mature&quot;,&quot;300&quot;};\n\n   public DBHelper(Context context) {\n      super(context,DBNAME,null,DBVERSION);\n   }\n\n   /* ADDED to simulate getting data from asset */\n   @Override\n   public void onCreate(SQLiteDatabase sqLiteDatabase) {\n      sqLiteDatabase.execSQL(&quot;CREATE TABLE IF NOT EXISTS pet (&quot; +\n              BaseColumns._ID + &quot; INTEGER PRIMARY KEY&quot; +\n              &quot;,&quot; + &quot;type TEXT&quot; +\n              &quot;,&quot; + &quot;breed TEXT&quot; +\n              &quot;,&quot; + &quot;lifestage TEXT&quot; +\n              &quot;,&quot; + &quot;cost REAL&quot; +\n              &quot;)&quot;\n      );\n      insertTestData(sqLiteDatabase,testdata1);\n      insertTestData(sqLiteDatabase,testdata2);\n      insertTestData(sqLiteDatabase,testdata3);\n      insertTestData(sqLiteDatabase,testdata4);\n      insertTestData(sqLiteDatabase,testdata5);\n      insertTestData(sqLiteDatabase,testdata6);\n\n   }\n\n   private void insertTestData(SQLiteDatabase db, String[] data) {\n      if (data.length != 4) return;\n      ContentValues cv = new ContentValues();\n      cv.put(&quot;type&quot;,data[0]);\n      cv.put(&quot;breed&quot;,data[1]);\n      cv.put(&quot;lifestage&quot;,data[2]);\n      cv.put(&quot;cost&quot;,data[3]);\n      db.insert(&quot;pet&quot;,null,cv);\n   }\n\n   @Override\n   public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\n   }\n}\n</code></pre>\n<p>The resultant <strong>pet</strong> table will then be:-</p>\n<p><a href=\"https://i.stack.imgur.com/fYGoZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fYGoZ.png\" alt=\"enter image description here\" /></a></p>\n<p>To give an idea of what could be done to select data with some flexibility <strong>MainActivity</strong> has been changed to be:-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    //private Context context;\n    //private String query;\n\n    private String typeSelection = &quot;dog&quot;;\n    private String breedSelection = &quot;alsatian&quot;;\n    private String lifeStageSelection = &quot;young&quot;;\n    private String lowerCostRangeSelection = &quot;0.0&quot;;\n    private String upperCostRangeSelection = &quot;150&quot;;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        /*\n        DatabaseAccess databaseAccess = DatabaseAccess.getInstance(context);\n        databaseAccess.openDatabase();\n        Cursor cursor = databaseAccess.getWritableDatabase().rawQuery(query, null);\n         */\n        DatabaseUtils.dumpCursor(\n                getSelection(typeSelection,breedSelection,lifeStageSelection,lowerCostRangeSelection,upperCostRangeSelection)\n        );\n        DatabaseUtils.dumpCursor(\n                getSelection(&quot;Dog&quot;,null,null,null,null)\n        );\n        DatabaseUtils.dumpCursor(\n                getSelection(&quot;Cat&quot;,null,null,null,null)\n        );\n        DatabaseUtils.dumpCursor(\n                getSelection(null,null,null,null,null)\n        );\n    }\n\n\n    private Cursor getSelection(String type, String breed, String lifeStage, String lowerCost, String upperCost ) {\n        String[] args = null;\n        ArrayList&lt;String&gt; argsArrayList = new ArrayList&lt;&gt;();\n        StringBuilder whereClause = new StringBuilder();\n        if (type != null &amp;&amp; type.length() &gt; 0) {\n            if (whereClause.length() &lt; 1) whereClause.append(&quot; &quot;);\n            else whereClause.append(&quot; AND &quot;);\n            whereClause.append(&quot; type=?&quot;);\n            argsArrayList.add(type);\n        }\n        if (breed != null &amp;&amp; breed.length() &gt; 0) {\n            if (whereClause.length() &lt; 1) whereClause.append(&quot; &quot;);\n            else whereClause.append(&quot; AND &quot;);\n            whereClause.append(&quot; breed=?&quot;);\n            argsArrayList.add(breed);\n        }\n        if (lifeStage != null &amp;&amp; type.length() &gt; 0) {\n            if (whereClause.length() &lt; 1) whereClause.append(&quot; &quot;);\n            else whereClause.append(&quot; AND &quot;);\n            whereClause.append(&quot; lifestage=?&quot;);\n            argsArrayList.add(lifeStage);\n        }\n        if (lowerCost != null &amp;&amp; upperCost != null &amp;&amp; lowerCost.length() &gt; 0 &amp;&amp; upperCost.length() &gt; 0) {\n            if (whereClause.length() &lt; 1) whereClause.append(&quot; &quot;);\n            else whereClause.append(&quot; AND &quot;);\n            whereClause.append(&quot; cost BETWEEN ? AND ?&quot;);\n            argsArrayList.add(lowerCost);\n            argsArrayList.add(upperCost);\n        }\n        if (whereClause.length() &gt; 1) {\n            args = new String[argsArrayList.size()];\n            int i = 0;\n            for (String s: argsArrayList) {\n                args[i++] = s;\n            }\n        }\n        return DatabaseAccess.getInstance(this).getWritableDatabase().query(&quot;pet&quot;,null,whereClause.toString(),args,null,null,null);\n    }\n}\n</code></pre>\n<p>the <strong>getSelection</strong> method being the main addition i.e. the code that allows selection according to, in this case, 5 values:-</p>\n<ul>\n<li><p>the type</p>\n</li>\n<li><p>the breed</p>\n</li>\n<li><p>the lifestage</p>\n</li>\n<li><p>the lower cost and and the upper cost (i.e. a range selection)</p>\n</li>\n<li><p>the SQLiteDatabase conveneince <strong>query</strong> method has been used, this is recommended over rawQuery.</p>\n</li>\n</ul>\n<p>The method is designed to be flexible and allow selection by none are all values. None would select every row.</p>\n<ul>\n<li>Note that lower and upper cost must both be provided as they are a range.</li>\n</ul>\n<p>The code within the onCreate method simply calls the <strong>getSelection</strong> method to reflect various selections.</p>\n<p>The first of the 4, will retrieve nothing as no row would match all the given criteria.\nThe second will select rows where <strong>type</strong> is <strong>Dog</strong> (3 rows).\nThe third will select rows where the <strong>type</strong> is <strong>Cat</strong> (the other 3 rows).\nThe fourth returns all rows (as nulls are passed which equates to no selections criteria).</p>\n<ul>\n<li><p>Note the method hasn't undergone comprehensive testing and is meant as a pointer.</p>\n</li>\n<li><p>DatabaseUtils is a class that as it's name suggests has some useful utilities, like, as demonstrated dumping a Cursor.</p>\n</li>\n</ul>\n<p>The <strong>Result</strong> as output to the log being:-</p>\n<pre><code>2022-10-16 22:56:51.850 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@9c8df94\n2022-10-16 22:56:51.850 I/System.out: &lt;&lt;&lt;&lt;&lt;\n\n\n2022-10-16 22:56:51.851 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@f1e7a3d\n2022-10-16 22:56:51.852 I/System.out: 0 {\n2022-10-16 22:56:51.852 I/System.out:    _id=1\n2022-10-16 22:56:51.852 I/System.out:    type=Dog\n2022-10-16 22:56:51.852 I/System.out:    breed=Alsatian\n2022-10-16 22:56:51.853 I/System.out:    lifestage=old\n2022-10-16 22:56:51.853 I/System.out:    cost=100\n2022-10-16 22:56:51.853 I/System.out: }\n2022-10-16 22:56:51.853 I/System.out: 1 {\n2022-10-16 22:56:51.853 I/System.out:    _id=2\n2022-10-16 22:56:51.853 I/System.out:    type=Dog\n2022-10-16 22:56:51.853 I/System.out:    breed=Golden Retriever\n2022-10-16 22:56:51.853 I/System.out:    lifestage=newborn\n2022-10-16 22:56:51.853 I/System.out:    cost=200\n2022-10-16 22:56:51.854 I/System.out: }\n2022-10-16 22:56:51.854 I/System.out: 2 {\n2022-10-16 22:56:51.854 I/System.out:    _id=6\n2022-10-16 22:56:51.854 I/System.out:    type=Dog\n2022-10-16 22:56:51.854 I/System.out:    breed=Corgi\n2022-10-16 22:56:51.854 I/System.out:    lifestage=mature\n2022-10-16 22:56:51.854 I/System.out:    cost=300\n2022-10-16 22:56:51.854 I/System.out: }\n2022-10-16 22:56:51.854 I/System.out: &lt;&lt;&lt;&lt;&lt;\n\n\n2022-10-16 22:56:51.854 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@166d232\n2022-10-16 22:56:51.855 I/System.out: 0 {\n2022-10-16 22:56:51.855 I/System.out:    _id=3\n2022-10-16 22:56:51.856 I/System.out:    type=Cat\n2022-10-16 22:56:51.856 I/System.out:    breed=Siamese\n2022-10-16 22:56:51.856 I/System.out:    lifestage=young\n2022-10-16 22:56:51.856 I/System.out:    cost=150\n2022-10-16 22:56:51.856 I/System.out: }\n2022-10-16 22:56:51.856 I/System.out: 1 {\n2022-10-16 22:56:51.856 I/System.out:    _id=4\n2022-10-16 22:56:51.856 I/System.out:    type=Cat\n2022-10-16 22:56:51.856 I/System.out:    breed=Burmese\n2022-10-16 22:56:51.856 I/System.out:    lifestage=mature\n2022-10-16 22:56:51.856 I/System.out:    cost=110\n2022-10-16 22:56:51.856 I/System.out: }\n2022-10-16 22:56:51.856 I/System.out: 2 {\n2022-10-16 22:56:51.856 I/System.out:    _id=5\n2022-10-16 22:56:51.856 I/System.out:    type=Cat\n2022-10-16 22:56:51.856 I/System.out:    breed=Persian\n2022-10-16 22:56:51.856 I/System.out:    lifestage=old\n2022-10-16 22:56:51.856 I/System.out:    cost=75\n2022-10-16 22:56:51.856 I/System.out: }\n2022-10-16 22:56:51.856 I/System.out: &lt;&lt;&lt;&lt;&lt;\n\n\n2022-10-16 22:56:51.857 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@17eeb83\n2022-10-16 22:56:51.857 I/System.out: 0 {\n2022-10-16 22:56:51.857 I/System.out:    _id=1\n2022-10-16 22:56:51.857 I/System.out:    type=Dog\n2022-10-16 22:56:51.857 I/System.out:    breed=Alsatian\n2022-10-16 22:56:51.857 I/System.out:    lifestage=old\n2022-10-16 22:56:51.858 I/System.out:    cost=100\n2022-10-16 22:56:51.858 I/System.out: }\n2022-10-16 22:56:51.858 I/System.out: 1 {\n2022-10-16 22:56:51.858 I/System.out:    _id=2\n2022-10-16 22:56:51.858 I/System.out:    type=Dog\n2022-10-16 22:56:51.858 I/System.out:    breed=Golden Retriever\n2022-10-16 22:56:51.858 I/System.out:    lifestage=newborn\n2022-10-16 22:56:51.858 I/System.out:    cost=200\n2022-10-16 22:56:51.858 I/System.out: }\n2022-10-16 22:56:51.858 I/System.out: 2 {\n2022-10-16 22:56:51.858 I/System.out:    _id=3\n2022-10-16 22:56:51.858 I/System.out:    type=Cat\n2022-10-16 22:56:51.858 I/System.out:    breed=Siamese\n2022-10-16 22:56:51.858 I/System.out:    lifestage=young\n2022-10-16 22:56:51.858 I/System.out:    cost=150\n2022-10-16 22:56:51.858 I/System.out: }\n2022-10-16 22:56:51.858 I/System.out: 3 {\n2022-10-16 22:56:51.858 I/System.out:    _id=4\n2022-10-16 22:56:51.858 I/System.out:    type=Cat\n2022-10-16 22:56:51.858 I/System.out:    breed=Burmese\n2022-10-16 22:56:51.858 I/System.out:    lifestage=mature\n2022-10-16 22:56:51.859 I/System.out:    cost=110\n2022-10-16 22:56:51.859 I/System.out: }\n2022-10-16 22:56:51.859 I/System.out: 4 {\n2022-10-16 22:56:51.859 I/System.out:    _id=5\n2022-10-16 22:56:51.859 I/System.out:    type=Cat\n2022-10-16 22:56:51.859 I/System.out:    breed=Persian\n2022-10-16 22:56:51.859 I/System.out:    lifestage=old\n2022-10-16 22:56:51.859 I/System.out:    cost=75\n2022-10-16 22:56:51.859 I/System.out: }\n2022-10-16 22:56:51.859 I/System.out: 5 {\n2022-10-16 22:56:51.859 I/System.out:    _id=6\n2022-10-16 22:56:51.859 I/System.out:    type=Dog\n2022-10-16 22:56:51.859 I/System.out:    breed=Corgi\n2022-10-16 22:56:51.859 I/System.out:    lifestage=mature\n2022-10-16 22:56:51.859 I/System.out:    cost=300\n2022-10-16 22:56:51.859 I/System.out: }\n2022-10-16 22:56:51.859 I/System.out: &lt;&lt;&lt;&lt;&lt;\n</code></pre>\n"}],"owner":{"account_id":26635501,"reputation":13,"user_id":20251996,"display_name":"Uzume316"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665922444,"creation_date":1665877075,"question_id":74083714,"body_markdown":"I&#39;m new to Android Studio having only worked with it for two months and been coding with Java for a year. \r\n\r\nCurrently I&#39;m working on a pet adoption application where the goal is to have the user answer four questions about the kind of pet they want and based on the checkboxes the application will show a list of pets that match the user&#39;s wants. \r\n\r\nI thought I could use SQLite as the database to add the pets in and then when the user checks the checkbox and submits the application can review the database and send the pet&#39;s name, age, and gender in a Recyclerview. \r\n\r\nI&#39;m finding out it is not as easy as I thought and can use some outside suggestions as I only have two more weeks to work on it. Here is what I have so far:\r\n\r\n[Main Activity][1]\r\n\r\n**DataBaseHelper**\r\n\r\n    import android.content.Context;\r\n    import com.readystatesoftware.sqliteasset.SQLiteAssetHelper;\r\n    \r\n    public class DBHelper extends SQLiteAssetHelper {\r\n    \r\n        public static final String DBNAME = &quot;PetAdoption.db&quot;;\r\n        public static final int DBVERSION = 1;\r\n    \r\n        public DBHelper(Context context) {\r\n    \r\n            super(context,DBNAME,null,DBVERSION);\r\n        }\r\n    }\r\n\r\n \r\n**DatabaseAccess**\r\n\r\n    import android.content.Context;\r\n    import android.database.sqlite.SQLiteDatabase;\r\n    import android.database.sqlite.SQLiteOpenHelper;\r\n    \r\n    public class DatabaseAccess {\r\n    \r\n        private SQLiteOpenHelper openHelper;\r\n        private SQLiteDatabase database;\r\n        private static DatabaseAccess instance;\r\n    \r\n        /**\r\n         * Private constructor to avoid object creation from outside classes.\r\n         *\r\n         * @param context\r\n         */\r\n        private DatabaseAccess(Context context) {\r\n            this.openHelper = new DBHelper(context);\r\n        }\r\n    \r\n        /**\r\n         * Return a singleton instance of DatabaseAccess.\r\n         *\r\n         * @param context the Context\r\n         * @return the instance of DatabaseAccess\r\n         */\r\n        public static DatabaseAccess getInstance(Context context) {\r\n            if (instance == null) {\r\n                instance = new DatabaseAccess(context);\r\n            }\r\n            return instance;\r\n        }\r\n    \r\n        /**\r\n         * Open the database connection.\r\n         */\r\n        public void openDatabase() {\r\n    \r\n            this.database = openHelper.getWritableDatabase();\r\n    \r\n    \r\n        }\r\n    \r\n        public SQLiteDatabase getWritableDatabase() {\r\n    \r\n            return openHelper.getWritableDatabase();\r\n    \r\n        }\r\n    \r\n        public SQLiteDatabase getReadableDataBase() {\r\n            return openHelper.getReadableDatabase();\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Close the database connection.\r\n         */\r\n        public void closeDatabase() {\r\n            if (database != null) {\r\n                this.database.close();\r\n            }\r\n        }\r\n    }\r\n\r\n**Main Activity**\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private Context context;\r\n        private String query;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            DatabaseAccess databaseAccess = DatabaseAccess.getInstance(context);\r\n            databaseAccess.openDatabase();\r\n            Cursor cursor = databaseAccess.getWritableDatabase().rawQuery(query, null);\r\n    \r\n        }\r\n    }\r\n\r\nI know I still need a model for the Recylerview and specific code to pull the pets that match the checkboxes, but I&#39;m not sure I&#39;m even going in the right direction. Any suggestions would be very helpful.\r\n\r\n  [1]: https://i.stack.imgur.com/ImSlW.jpg","title":"Android Studio SQLite database asset into Recyclerview but only showing specific data","body":"<p>I'm new to Android Studio having only worked with it for two months and been coding with Java for a year.</p>\n<p>Currently I'm working on a pet adoption application where the goal is to have the user answer four questions about the kind of pet they want and based on the checkboxes the application will show a list of pets that match the user's wants.</p>\n<p>I thought I could use SQLite as the database to add the pets in and then when the user checks the checkbox and submits the application can review the database and send the pet's name, age, and gender in a Recyclerview.</p>\n<p>I'm finding out it is not as easy as I thought and can use some outside suggestions as I only have two more weeks to work on it. Here is what I have so far:</p>\n<p><a href=\"https://i.stack.imgur.com/ImSlW.jpg\" rel=\"nofollow noreferrer\">Main Activity</a></p>\n<p><strong>DataBaseHelper</strong></p>\n<pre><code>import android.content.Context;\nimport com.readystatesoftware.sqliteasset.SQLiteAssetHelper;\n\npublic class DBHelper extends SQLiteAssetHelper {\n\n    public static final String DBNAME = &quot;PetAdoption.db&quot;;\n    public static final int DBVERSION = 1;\n\n    public DBHelper(Context context) {\n\n        super(context,DBNAME,null,DBVERSION);\n    }\n}\n</code></pre>\n<p><strong>DatabaseAccess</strong></p>\n<pre><code>import android.content.Context;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\n\npublic class DatabaseAccess {\n\n    private SQLiteOpenHelper openHelper;\n    private SQLiteDatabase database;\n    private static DatabaseAccess instance;\n\n    /**\n     * Private constructor to avoid object creation from outside classes.\n     *\n     * @param context\n     */\n    private DatabaseAccess(Context context) {\n        this.openHelper = new DBHelper(context);\n    }\n\n    /**\n     * Return a singleton instance of DatabaseAccess.\n     *\n     * @param context the Context\n     * @return the instance of DatabaseAccess\n     */\n    public static DatabaseAccess getInstance(Context context) {\n        if (instance == null) {\n            instance = new DatabaseAccess(context);\n        }\n        return instance;\n    }\n\n    /**\n     * Open the database connection.\n     */\n    public void openDatabase() {\n\n        this.database = openHelper.getWritableDatabase();\n\n\n    }\n\n    public SQLiteDatabase getWritableDatabase() {\n\n        return openHelper.getWritableDatabase();\n\n    }\n\n    public SQLiteDatabase getReadableDataBase() {\n        return openHelper.getReadableDatabase();\n    }\n\n\n    /**\n     * Close the database connection.\n     */\n    public void closeDatabase() {\n        if (database != null) {\n            this.database.close();\n        }\n    }\n}\n</code></pre>\n<p><strong>Main Activity</strong></p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private Context context;\n    private String query;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        DatabaseAccess databaseAccess = DatabaseAccess.getInstance(context);\n        databaseAccess.openDatabase();\n        Cursor cursor = databaseAccess.getWritableDatabase().rawQuery(query, null);\n\n    }\n}\n</code></pre>\n<p>I know I still need a model for the Recylerview and specific code to pull the pets that match the checkboxes, but I'm not sure I'm even going in the right direction. Any suggestions would be very helpful.</p>\n"},{"tags":["java","android","flutter","exif"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1665595594,"post_id":74045508,"comment_id":130739911,"body_markdown":"You set an attrbute on the exifinterface. But after that you have to update the exif header in the image file.","body":"You set an attrbute on the exifinterface. But after that you have to update the exif header in the image file."},{"owner":{"account_id":12023734,"reputation":2598,"user_id":11665178,"display_name":"Tom3652"},"score":0,"creation_date":1665599853,"post_id":74045508,"comment_id":130741243,"body_markdown":"Thanks for your comment. I don&#39;t know what it means, could you elaborate please or give an example of the &quot;exif header&quot; in the image file ?","body":"Thanks for your comment. I don&#39;t know what it means, could you elaborate please or give an example of the &quot;exif header&quot; in the image file ?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1665605229,"post_id":74045508,"comment_id":130742771,"body_markdown":"Your image file, probably a jpg file, contains an exif header. The class ExifInterfae reads this exif header. You changed the exif info in memory in the ExifInterface instance. But now you have to update the file with the new info. I see no code for that. Or lets say i think that saveAttributes() is not updating the file. (But maybe i&#39;m mistaken, never done that). What is type of `path` and how does it look like?","body":"Your image file, probably a jpg file, contains an exif header. The class ExifInterfae reads this exif header. You changed the exif info in memory in the ExifInterface instance. But now you have to update the file with the new info. I see no code for that. Or lets say i think that saveAttributes() is not updating the file. (But maybe i&#39;m mistaken, never done that). What is type of <code>path</code> and how does it look like?"},{"owner":{"account_id":12023734,"reputation":2598,"user_id":11665178,"display_name":"Tom3652"},"score":0,"creation_date":1665657848,"post_id":74045508,"comment_id":130753449,"body_markdown":"`path` is the local path of the image in the `temporary` directory, and indeed a `.jpg`. \nI have access to this file if that&#39;s your question, what do you want me to do ?\nI will give an example later if you really need it but i am not sure why it matters. \nIndeed i have not updated the file with the new info because i don&#39;t know how to do so :/ I thought the `exif.saveAttributes()` was doing this job but i guess i was wrong..","body":"<code>path</code> is the local path of the image in the <code>temporary</code> directory, and indeed a <code>.jpg</code>.  I have access to this file if that&#39;s your question, what do you want me to do ? I will give an example later if you really need it but i am not sure why it matters.  Indeed i have not updated the file with the new info because i don&#39;t know how to do so :/ I thought the <code>exif.saveAttributes()</code> was doing this job but i guess i was wrong.."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1665661436,"post_id":74045508,"comment_id":130754561,"body_markdown":"`I have access to this file` You were able to read it. But have you permission to write it? Check before with File.canWrite(). I also do think now that saveAttributes() should update the file.","body":"<code>I have access to this file</code> You were able to read it. But have you permission to write it? Check before with File.canWrite(). I also do think now that saveAttributes() should update the file."},{"owner":{"account_id":12023734,"reputation":2598,"user_id":11665178,"display_name":"Tom3652"},"score":0,"creation_date":1665740454,"post_id":74045508,"comment_id":130773752,"body_markdown":"Sorry for the late answer and thanks for your time. Yes i have the permission to write it because i save it myself in the external storage directory if the user chose to do so (in his phone&#39;s gallery) AND inside the app document directory.","body":"Sorry for the late answer and thanks for your time. Yes i have the permission to write it because i save it myself in the external storage directory if the user chose to do so (in his phone&#39;s gallery) AND inside the app document directory."},{"owner":{"account_id":12023734,"reputation":2598,"user_id":11665178,"display_name":"Tom3652"},"score":0,"creation_date":1665741121,"post_id":74045508,"comment_id":130773975,"body_markdown":"I edit the question with a new test i have made.","body":"I edit the question with a new test i have made."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1665753401,"post_id":74045508,"comment_id":130777860,"body_markdown":"`I have printed the EXIF of the image right after the saveAttributes() :` I think you mean: I have printed the exif tags of exifinfo right after the saveAttributes(). (You did not create a new exifinfo from the saved file and printed then)","body":"<code>I have printed the EXIF of the image right after the saveAttributes() :</code> I think you mean: I have printed the exif tags of exifinfo right after the saveAttributes(). (You did not create a new exifinfo from the saved file and printed then)"},{"owner":{"account_id":12023734,"reputation":2598,"user_id":11665178,"display_name":"Tom3652"},"score":0,"creation_date":1665753493,"post_id":74045508,"comment_id":130777900,"body_markdown":"yes exactly sorry for my sentences.","body":"yes exactly sorry for my sentences."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1665753563,"post_id":74045508,"comment_id":130777928,"body_markdown":"Strange that not all tags are there when you try to read them from the newly created file. Oh no. Not newly created.. you write to the original file!?","body":"Strange that not all tags are there when you try to read them from the newly created file. Oh no. Not newly created.. you write to the original file!?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1665753667,"post_id":74045508,"comment_id":130777974,"body_markdown":"`When copying a file to another place, the exif is not kept at all.` Well than i wonder how you copy a file. Using an intermediate bitmap or so? The wrong approach. A normal file copy preserves all bytes","body":"<code>When copying a file to another place, the exif is not kept at all.</code> Well than i wonder how you copy a file. Using an intermediate bitmap or so? The wrong approach. A normal file copy preserves all bytes"},{"owner":{"account_id":12023734,"reputation":2598,"user_id":11665178,"display_name":"Tom3652"},"score":0,"creation_date":1665753829,"post_id":74045508,"comment_id":130778036,"body_markdown":"I edit the question with the requested information !","body":"I edit the question with the requested information !"},{"owner":{"account_id":12023734,"reputation":2598,"user_id":11665178,"display_name":"Tom3652"},"score":0,"creation_date":1665845531,"post_id":74045508,"comment_id":130796447,"body_markdown":"I have found the issue for the &quot;copying a file removes some exif params&quot;, this was coming from a compression library i was using. \nThe main/real issue is about custom tags not being saved.","body":"I have found the issue for the &quot;copying a file removes some exif params&quot;, this was coming from a compression library i was using.  The main/real issue is about custom tags not being saved."}],"owner":{"account_id":12023734,"reputation":2598,"user_id":11665178,"display_name":"Tom3652"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665922259,"creation_date":1665593824,"question_id":74045508,"body_markdown":"I am currently facing a real issue while trying to set custom attributes to my image EXIF on android. \r\n\r\nI have the following lines : \r\n\r\n```\r\nExifInterface exifInterface = new ExifInterface(path);\r\nexifInterface.setAttribute(ExifInterface.TAG_FOCAL_PLANE_X_RESOLUTION, &quot;330&quot;);\r\n```\r\n\r\nBut it simply doesn&#39;t work. I have tried with many different tags from the [documentation][1] but none is working.\r\n\r\nAm i not understanding something correctly ? \r\nI have also tried :  \r\n\r\n```\r\nExifInterface exifInterface = new ExifInterface(path);\r\nexifInterface.setAttribute(&quot;FocalPlaneXResolution&quot;, &quot;330&quot;);\r\n```\r\n\r\nI also need to save the values of `Yaw`, `Pitch` and `Roll` in the exif, should the following be working ? \r\n\r\n```\r\nExifInterface exifInterface = new ExifInterface(path);\r\nexifInterface.setAttribute(&quot;Yaw&quot;, &quot;0.3&quot;);\r\n```\r\n\r\nI am saving the attributes using `exifInterface.saveAttributes()`\r\n\r\nEDIT : \r\n\r\nI have printed the `EXIF` of the image right after the `saveAttributes()` : \r\n\r\n```\r\nI/flutter (12318): EXIF FOR FILE : /storage/emulated/0/Android/media/com.example.android/projectName/2022-10-14-11-51-07-810.jpg\r\nI/flutter (12318): Image YResolution: 72\r\nI/flutter (12318): Image XResolution: 72\r\nI/flutter (12318): Image ImageWidth: 1920\r\nI/flutter (12318): Image Model: CPH1931\r\nI/flutter (12318): Image Make: OPPO\r\nI/flutter (12318): Image Software: unknown-user 10 QKQ1.200209.002 unknown release-keys\r\nI/flutter (12318): Image ImageLength: 1080\r\nI/flutter (12318): Image YCbCrPositioning: Centered\r\nI/flutter (12318): Image ExifOffset: 260\r\nI/flutter (12318): Image Orientation: 90\r\nI/flutter (12318): Image ResolutionUnit: Pixels/Inch\r\nI/flutter (12318): Image DateTime: 2022:10:14 11:51:08\r\nI/flutter (12318): EXIF ExifVersion: 0220\r\nI/flutter (12318): EXIF ApertureValue: 169/100\r\nI/flutter (12318): EXIF SceneType: 63\r\nI/flutter (12318): EXIF ExposureProgram: Unidentified\r\nI/flutter (12318): EXIF ColorSpace: sRGB\r\nI/flutter (12318): EXIF ExifImageLength: 1080\r\nI/flutter (12318): EXIF BrightnessValue: -27/25\r\nI/flutter (12318): EXIF DateTimeOriginal: 2022:10:14 11:51:08\r\nI/flutter (12318): EXIF FlashPixVersion: 0100\r\nI/flutter (12318): EXIF SubSecTimeOriginal: 199953\r\nI/flutter (12318): EXIF WhiteBalance: Auto\r\nI/flutter (12318): Interoperability InteroperabilityIndex: R98\r\nI/flutter (12318): EXIF InteroperabilityOffset: 726\r\nI/flutter (12318): EXIF ExposureMode: Auto Exposure\r\nI/flutter (12318): EXIF ExposureTime: 1/25\r\nI/flutter (12318): EXIF Flash: Flash did not fire, compulsory flash mode\r\nI/flutter (12318): EXIF SubSecTime: 341\r\nI/flutter (12318): EXIF FNumber: 9/5\r\nI/flutter (12318): EXIF ExifImageWidth: 1920\r\nI/flutter (12318): EXIF ISOSpeedRatings: 361\r\nI/flutter (12318): EXIF ComponentsConfiguration: 636363\r\nI/flutter (12318): EXIF FocalLengthIn35mmFilm: 0\r\nI/flutter (12318): EXIF SubSecTimeDigitized: 199953\r\nI/flutter (12318): EXIF DateTimeDigitized: 2022:10:14 11:51:08\r\nI/flutter (12318): EXIF ShutterSpeedValue: 4643/1000\r\nI/flutter (12318): EXIF MeteringMode: CenterWeightedAverage\r\nI/flutter (12318): EXIF FocalLength: 4047/1000\r\nI/flutter (12318): EXIF SceneCaptureType: Standard\r\nI/flutter (12318): EXIF LightSource: Unknown\r\nI/flutter (12318): EXIF SensingMethod: 0\r\n```\r\n\r\nThe custom tag `Yaw` didn&#39;t seem to be registered, and i have added another existing tag `TAG_FOCAL_PLANE_X_RESOLUTION` that is also missing while setting correctly. \r\n\r\n\r\nEDIT : I have found that writing custom attributes that do not exists in the documentation will never work and fail silently... So `Yaw` in my issue description will never be written.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/androidx/exifinterface/media/ExifInterface#setAttribute(java.lang.String,java.lang.String)","title":"Set custom attribute to exif android not working","body":"<p>I am currently facing a real issue while trying to set custom attributes to my image EXIF on android.</p>\n<p>I have the following lines :</p>\n<pre><code>ExifInterface exifInterface = new ExifInterface(path);\nexifInterface.setAttribute(ExifInterface.TAG_FOCAL_PLANE_X_RESOLUTION, &quot;330&quot;);\n</code></pre>\n<p>But it simply doesn't work. I have tried with many different tags from the <a href=\"https://developer.android.com/reference/androidx/exifinterface/media/ExifInterface#setAttribute(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">documentation</a> but none is working.</p>\n<p>Am i not understanding something correctly ?\nI have also tried :</p>\n<pre><code>ExifInterface exifInterface = new ExifInterface(path);\nexifInterface.setAttribute(&quot;FocalPlaneXResolution&quot;, &quot;330&quot;);\n</code></pre>\n<p>I also need to save the values of <code>Yaw</code>, <code>Pitch</code> and <code>Roll</code> in the exif, should the following be working ?</p>\n<pre><code>ExifInterface exifInterface = new ExifInterface(path);\nexifInterface.setAttribute(&quot;Yaw&quot;, &quot;0.3&quot;);\n</code></pre>\n<p>I am saving the attributes using <code>exifInterface.saveAttributes()</code></p>\n<p>EDIT :</p>\n<p>I have printed the <code>EXIF</code> of the image right after the <code>saveAttributes()</code> :</p>\n<pre><code>I/flutter (12318): EXIF FOR FILE : /storage/emulated/0/Android/media/com.example.android/projectName/2022-10-14-11-51-07-810.jpg\nI/flutter (12318): Image YResolution: 72\nI/flutter (12318): Image XResolution: 72\nI/flutter (12318): Image ImageWidth: 1920\nI/flutter (12318): Image Model: CPH1931\nI/flutter (12318): Image Make: OPPO\nI/flutter (12318): Image Software: unknown-user 10 QKQ1.200209.002 unknown release-keys\nI/flutter (12318): Image ImageLength: 1080\nI/flutter (12318): Image YCbCrPositioning: Centered\nI/flutter (12318): Image ExifOffset: 260\nI/flutter (12318): Image Orientation: 90\nI/flutter (12318): Image ResolutionUnit: Pixels/Inch\nI/flutter (12318): Image DateTime: 2022:10:14 11:51:08\nI/flutter (12318): EXIF ExifVersion: 0220\nI/flutter (12318): EXIF ApertureValue: 169/100\nI/flutter (12318): EXIF SceneType: 63\nI/flutter (12318): EXIF ExposureProgram: Unidentified\nI/flutter (12318): EXIF ColorSpace: sRGB\nI/flutter (12318): EXIF ExifImageLength: 1080\nI/flutter (12318): EXIF BrightnessValue: -27/25\nI/flutter (12318): EXIF DateTimeOriginal: 2022:10:14 11:51:08\nI/flutter (12318): EXIF FlashPixVersion: 0100\nI/flutter (12318): EXIF SubSecTimeOriginal: 199953\nI/flutter (12318): EXIF WhiteBalance: Auto\nI/flutter (12318): Interoperability InteroperabilityIndex: R98\nI/flutter (12318): EXIF InteroperabilityOffset: 726\nI/flutter (12318): EXIF ExposureMode: Auto Exposure\nI/flutter (12318): EXIF ExposureTime: 1/25\nI/flutter (12318): EXIF Flash: Flash did not fire, compulsory flash mode\nI/flutter (12318): EXIF SubSecTime: 341\nI/flutter (12318): EXIF FNumber: 9/5\nI/flutter (12318): EXIF ExifImageWidth: 1920\nI/flutter (12318): EXIF ISOSpeedRatings: 361\nI/flutter (12318): EXIF ComponentsConfiguration: 636363\nI/flutter (12318): EXIF FocalLengthIn35mmFilm: 0\nI/flutter (12318): EXIF SubSecTimeDigitized: 199953\nI/flutter (12318): EXIF DateTimeDigitized: 2022:10:14 11:51:08\nI/flutter (12318): EXIF ShutterSpeedValue: 4643/1000\nI/flutter (12318): EXIF MeteringMode: CenterWeightedAverage\nI/flutter (12318): EXIF FocalLength: 4047/1000\nI/flutter (12318): EXIF SceneCaptureType: Standard\nI/flutter (12318): EXIF LightSource: Unknown\nI/flutter (12318): EXIF SensingMethod: 0\n</code></pre>\n<p>The custom tag <code>Yaw</code> didn't seem to be registered, and i have added another existing tag <code>TAG_FOCAL_PLANE_X_RESOLUTION</code> that is also missing while setting correctly.</p>\n<p>EDIT : I have found that writing custom attributes that do not exists in the documentation will never work and fail silently... So <code>Yaw</code> in my issue description will never be written.</p>\n"},{"tags":["java","gradle","tomcat","jersey"],"comments":[{"owner":{"account_id":15790667,"reputation":90,"user_id":11394009,"display_name":"Praveen kumar"},"score":0,"creation_date":1665904482,"post_id":74083547,"comment_id":130804931,"body_markdown":"Try by creating transaction object then execute your query.","body":"Try by creating transaction object then execute your query."},{"owner":{"account_id":26635285,"reputation":1,"user_id":20251817,"display_name":"Olorono"},"score":0,"creation_date":1665917229,"post_id":74083547,"comment_id":130806905,"body_markdown":"Tried to do the query in transaction. It doesn&#39;t help.","body":"Tried to do the query in transaction. It doesn&#39;t help."},{"owner":{"account_id":26635285,"reputation":1,"user_id":20251817,"display_name":"Olorono"},"score":0,"creation_date":1665917260,"post_id":74083547,"comment_id":130806912,"body_markdown":"Session session = SessionUtil.getSession();\n        Transaction transaction = session.beginTransaction();\n        Query query = session.createQuery(&quot;from Employee&quot;);\n        List&lt;Employee&gt; employees =  query.list();\n        transaction.commit();\n        session.close();\n        return employees;\n\nReturn empty list (","body":"Session session = SessionUtil.getSession();         Transaction transaction = session.beginTransaction();         Query query = session.createQuery(&quot;from Employee&quot;);         List&lt;Employee&gt; employees =  query.list();         transaction.commit();         session.close();         return employees;  Return empty list ("},{"owner":{"account_id":15790667,"reputation":90,"user_id":11394009,"display_name":"Praveen kumar"},"score":0,"creation_date":1665931574,"post_id":74083547,"comment_id":130809744,"body_markdown":"Can you please post the table name from which you are getting data and hibernate query which generated by hibernate.","body":"Can you please post the table name from which you are getting data and hibernate query which generated by hibernate."}],"owner":{"account_id":26635285,"reputation":1,"user_id":20251817,"display_name":"Olorono"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665922139,"creation_date":1665874230,"question_id":74083547,"body_markdown":"I have REST API which get data from H2 database using Hibernate.  I added some data to database, but Query with select return empty list from database. I don&#39;t understand why the \r\nquery returns empty result in one case, but it returns correct data from main method. How to fix it?\r\n\r\n```\r\n@Path(&quot;/drones&quot;)\r\npublic class DroneResource {\r\n\r\n    @GET\r\n    @Produces(&quot;application/json&quot;)\r\n    public List&lt;Employee&gt; getEmployee() {\r\n        EmployeeDAO dao = new EmployeeDAO();\r\n         **// Return empty list **\r\n        List employees = dao.getEmployees();\r\n        return employees;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        EmployeeDAO dao = new EmployeeDAO();\r\n       **// Return correct data from db **\r\n       List employees = dao.getEmployees(); \r\n\r\n    }\r\n}\r\n```\r\n\r\nhibernate.cfg.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory name=&quot;hibernateSessionFactory&quot;&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.H2Dialect&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;org.h2.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:h2:./h2db;AUTO_SERVER=TRUE&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;admin&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;admin&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.format_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.server_timezone&quot;&gt;UTC&lt;/property&gt;\r\n\r\n        &lt;mapping class=&quot;com.gitlab.olorini.test.Employee&quot;/&gt;\r\n\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\nweb.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;\r\n         version=&quot;5.0&quot;&gt;\r\n    &lt;display-name&gt;Drones manager&lt;/display-name&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;Example API&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;com.sun.jersey.spi.container.servlet.ServletContainer&lt;/servlet-class&gt;\r\n\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;com.sun.jersey.config.property.packages&lt;/param-name&gt;\r\n            &lt;param-value&gt;com.gitlab.olorini.web.services.endpoints&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;com.sun.jersey.api.json.POJOMappingFeature&lt;/param-name&gt;\r\n            &lt;param-value&gt;true&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n    &lt;/servlet&gt;\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;Example API&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n\r\n```\r\n\r\nClass of db entity\r\n\r\n\r\n```\r\n@Entity\r\npublic class Employee {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    private int id;\r\n    @Column\r\n    private String name;\r\n    @Column\r\n    private int age;\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n    public String getName() {\r\n        return name;\r\n    }\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n    public int getAge() {\r\n        return age;\r\n    }\r\n    public void setAge(int age) {\r\n        this.age = age;\r\n    }\r\n\r\n}\r\n```\r\n\r\nDAO\r\n```\r\npublic class EmployeeDAO {\r\n\r\n   public List&lt;Employee&gt; getEmployees(){\r\n        Session session = SessionUtil.getSession();\r\n        Query query = session.createQuery(&quot;from Employee&quot;);\r\n        List&lt;Employee&gt; employees =  query.list();\r\n        session.close();\r\n        return employees;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class SessionUtil {\r\n\r\n    private static SessionUtil instance=new SessionUtil();\r\n    private SessionFactory sessionFactory;\r\n\r\n    public static SessionUtil getInstance(){\r\n        return instance;\r\n    }\r\n\r\n    private SessionUtil(){\r\n        Configuration configuration = new Configuration();\r\n        configuration.configure(&quot;hibernate.cfg.xml&quot;);\r\n\r\n        sessionFactory = configuration.buildSessionFactory();\r\n    }\r\n\r\n    public static Session getSession(){\r\n        Session session =  getInstance().sessionFactory.openSession();\r\n\r\n        return session;\r\n    }\r\n}\r\n```\r\n\r\n\r\nbuild.gradle\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;war&#39;\r\n}\r\n\r\ngroup &#39;com.github.olorini&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\nsourceCompatibility = &#39;1.8&#39;\r\nproject.webAppDirName = &#39;web&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    flatDir {\r\n        dirs &#39;lib&#39;\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;log4j:log4j:1.2.17&#39;\r\n    implementation &#39;org.hibernate:hibernate-core:5.6.12.Final&#39;\r\n    implementation &#39;javax.validation:validation-api:2.0.1.Final&#39;\r\n    runtimeOnly &#39;com.h2database:h2:2.1.214&#39;\r\n    implementation &#39;com.sun.jersey:jersey-bundle:1.19.4&#39;\r\n    implementation &#39;com.sun.jersey:jersey-json:1.19.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\nProject structure\r\n\r\n\r\n\r\n","title":"H2 database return empty query result in REST api","body":"<p>I have REST API which get data from H2 database using Hibernate.  I added some data to database, but Query with select return empty list from database. I don't understand why the\nquery returns empty result in one case, but it returns correct data from main method. How to fix it?</p>\n<pre><code>@Path(&quot;/drones&quot;)\npublic class DroneResource {\n\n    @GET\n    @Produces(&quot;application/json&quot;)\n    public List&lt;Employee&gt; getEmployee() {\n        EmployeeDAO dao = new EmployeeDAO();\n         **// Return empty list **\n        List employees = dao.getEmployees();\n        return employees;\n    }\n\n    public static void main(String[] args) {\n        EmployeeDAO dao = new EmployeeDAO();\n       **// Return correct data from db **\n       List employees = dao.getEmployees(); \n\n    }\n}\n</code></pre>\n<p>hibernate.cfg.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory name=&quot;hibernateSessionFactory&quot;&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.H2Dialect&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;org.h2.Driver&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:h2:./h2db;AUTO_SERVER=TRUE&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;admin&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;admin&lt;/property&gt;\n        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;hibernate.format_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.server_timezone&quot;&gt;UTC&lt;/property&gt;\n\n        &lt;mapping class=&quot;com.gitlab.olorini.test.Employee&quot;/&gt;\n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;\n         version=&quot;5.0&quot;&gt;\n    &lt;display-name&gt;Drones manager&lt;/display-name&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Example API&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;com.sun.jersey.spi.container.servlet.ServletContainer&lt;/servlet-class&gt;\n\n        &lt;init-param&gt;\n            &lt;param-name&gt;com.sun.jersey.config.property.packages&lt;/param-name&gt;\n            &lt;param-value&gt;com.gitlab.olorini.web.services.endpoints&lt;/param-value&gt;\n        &lt;/init-param&gt;\n\n        &lt;init-param&gt;\n            &lt;param-name&gt;com.sun.jersey.api.json.POJOMappingFeature&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Example API&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n\n</code></pre>\n<p>Class of db entity</p>\n<pre><code>@Entity\npublic class Employee {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private int id;\n    @Column\n    private String name;\n    @Column\n    private int age;\n\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public int getAge() {\n        return age;\n    }\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n}\n</code></pre>\n<p>DAO</p>\n<pre><code>public class EmployeeDAO {\n\n   public List&lt;Employee&gt; getEmployees(){\n        Session session = SessionUtil.getSession();\n        Query query = session.createQuery(&quot;from Employee&quot;);\n        List&lt;Employee&gt; employees =  query.list();\n        session.close();\n        return employees;\n    }\n}\n</code></pre>\n<pre><code>public class SessionUtil {\n\n    private static SessionUtil instance=new SessionUtil();\n    private SessionFactory sessionFactory;\n\n    public static SessionUtil getInstance(){\n        return instance;\n    }\n\n    private SessionUtil(){\n        Configuration configuration = new Configuration();\n        configuration.configure(&quot;hibernate.cfg.xml&quot;);\n\n        sessionFactory = configuration.buildSessionFactory();\n    }\n\n    public static Session getSession(){\n        Session session =  getInstance().sessionFactory.openSession();\n\n        return session;\n    }\n}\n</code></pre>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'java'\n    id 'war'\n}\n\ngroup 'com.github.olorini'\nversion '1.0-SNAPSHOT'\n\nsourceCompatibility = '1.8'\nproject.webAppDirName = 'web'\n\nrepositories {\n    mavenCentral()\n    flatDir {\n        dirs 'lib'\n    }\n}\n\ndependencies {\n    implementation 'log4j:log4j:1.2.17'\n    implementation 'org.hibernate:hibernate-core:5.6.12.Final'\n    implementation 'javax.validation:validation-api:2.0.1.Final'\n    runtimeOnly 'com.h2database:h2:2.1.214'\n    implementation 'com.sun.jersey:jersey-bundle:1.19.4'\n    implementation 'com.sun.jersey:jersey-json:1.19.4'\n    testImplementation 'junit:junit:4.13.2'\n}\n\ntest {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>Project structure</p>\n"},{"tags":["java","postgresql","spring-data-jpa","multi-tenant"],"answers":[{"comments":[{"owner":{"account_id":12593681,"reputation":23,"user_id":9159263,"display_name":"Ş&#252;kr&#252; AYDINLIK"},"score":0,"creation_date":1665921010,"post_id":74086850,"comment_id":130807644,"body_markdown":"thank you for your comment. I am using this property for default tenant. But, when it comes to executing queries for other tenants, this approach won&#39;t work. Somehow, I have to change this property on the fly","body":"thank you for your comment. I am using this property for default tenant. But, when it comes to executing queries for other tenants, this approach won&#39;t work. Somehow, I have to change this property on the fly"},{"owner":{"account_id":18331959,"reputation":776,"user_id":13350278,"display_name":"Mohamed Elgazar"},"score":0,"creation_date":1665921075,"post_id":74086850,"comment_id":130807655,"body_markdown":"You can try using a TenantAwareRoutingDataSource. This will allow you to set the search_path on a per-tenant basis.","body":"You can try using a TenantAwareRoutingDataSource. This will allow you to set the search_path on a per-tenant basis."},{"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"score":0,"creation_date":1665927828,"post_id":74086850,"comment_id":130808907,"body_markdown":"@Ş&#252;kr&#252;AYDINLIK: You can even change the search_path multi times within a single transaction. Whatever you need, just do it, it&#39;s standard functionality. SET search_path TO some_schema;","body":"@Ş&#252;kr&#252;AYDINLIK: You can even change the search_path multi times within a single transaction. Whatever you need, just do it, it&#39;s standard functionality. SET search_path TO some_schema;"},{"owner":{"account_id":12593681,"reputation":23,"user_id":9159263,"display_name":"Ş&#252;kr&#252; AYDINLIK"},"score":0,"creation_date":1665946652,"post_id":74086850,"comment_id":130813093,"body_markdown":"@Frank Heikens how can achieve such a behaviour? How can I interfere before every query?","body":"@Frank Heikens how can achieve such a behaviour? How can I interfere before every query?"},{"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"score":0,"creation_date":1665946749,"post_id":74086850,"comment_id":130813110,"body_markdown":"@Ş&#252;kr&#252;AYDINLIK: execute a query like this: SET search_path TO something;","body":"@Ş&#252;kr&#252;AYDINLIK: execute a query like this: SET search_path TO something;"}],"tags":[],"owner":{"account_id":18331959,"reputation":776,"user_id":13350278,"display_name":"Mohamed Elgazar"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665920857,"creation_date":1665920857,"answer_id":74086850,"question_id":74086830,"body_markdown":"The search_path setting in PostgreSQL controls the order in which schemas are searched when resolving names. By default, it is set to &quot;$user&quot;, meaning that names will be resolved in the current user&#39;s schema first, followed by the public schema.\r\n\r\nYou can override the default search_path by setting it in your application.properties file. The example above sets it to &quot;my_schema&quot;. This will cause names to be resolved in the &quot;my_schema&quot;\r\n\r\nYou can try using the search_path setting in PostgreSQL. You can set it in your application.properties file like this:\r\n\r\n    spring.jpa.properties.hibernate.default_schema=my_schema","title":"change postgresql schema on the fly","body":"<p>The search_path setting in PostgreSQL controls the order in which schemas are searched when resolving names. By default, it is set to &quot;$user&quot;, meaning that names will be resolved in the current user's schema first, followed by the public schema.</p>\n<p>You can override the default search_path by setting it in your application.properties file. The example above sets it to &quot;my_schema&quot;. This will cause names to be resolved in the &quot;my_schema&quot;</p>\n<p>You can try using the search_path setting in PostgreSQL. You can set it in your application.properties file like this:</p>\n<pre><code>spring.jpa.properties.hibernate.default_schema=my_schema\n</code></pre>\n"}],"owner":{"account_id":12593681,"reputation":23,"user_id":9159263,"display_name":"Ş&#252;kr&#252; AYDINLIK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665920857,"creation_date":1665920675,"question_id":74086830,"body_markdown":"I am developing a multi-tenancy app with Spring Boot. Recently, I am trying to switch to PostgreSQL over MySQL. I want to use same database but different schema. However, I couldn&#39;t find a way to change schema on Spring Boot. On MySQL, it is possible via jdbc url by replacing the database name. On Postgre, I tried using currentSchema but it doesn&#39;t work. What could be the issue or how else can I solve it? ","title":"change postgresql schema on the fly","body":"<p>I am developing a multi-tenancy app with Spring Boot. Recently, I am trying to switch to PostgreSQL over MySQL. I want to use same database but different schema. However, I couldn't find a way to change schema on Spring Boot. On MySQL, it is possible via jdbc url by replacing the database name. On Postgre, I tried using currentSchema but it doesn't work. What could be the issue or how else can I solve it?</p>\n"},{"tags":["java","garbage-collection","garbage"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1484174401,"post_id":41601705,"comment_id":70406732,"body_markdown":"[`unlinkLast()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/LinkedList.java#LinkedList.unlinkLast%28java.util.LinkedList.Node%29) has a similar quirk: `l.prev = null; // help GC`","body":"<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/LinkedList.java#LinkedList.unlinkLast%28java.util.LinkedList.Node%29\" rel=\"nofollow noreferrer\"><code>unlinkLast()</code></a> has a similar quirk: <code>l.prev = null; &#47;&#47; help GC</code>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1484176202,"post_id":41601705,"comment_id":70407374,"body_markdown":"Say that more than one element is removed through repeated calls to `unlinkFirst()`. The garbage collector *could*  collect them all, but it does quite an effort (in the so-called train algorithm) to keep track of which objects are eligible for collection in such cases. My guess is it’s easier and hence less costly to collect them one at a time without caring about references from other eligible objects.","body":"Say that more than one element is removed through repeated calls to <code>unlinkFirst()</code>. The garbage collector <i>could</i>  collect them all, but it does quite an effort (in the so-called train algorithm) to keep track of which objects are eligible for collection in such cases. My guess is it’s easier and hence less costly to collect them one at a time without caring about references from other eligible objects."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1484176337,"post_id":41601705,"comment_id":70407415,"body_markdown":"This _isn&#39;t_ needed.","body":"This <i>isn&#39;t</i> needed."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1484176543,"post_id":41601705,"comment_id":70407510,"body_markdown":"Possible duplicate of [Why isn&#39;t LinkedList.Clear() O(1)](http://stackoverflow.com/questions/5161031/why-isnt-linkedlist-clear-o1)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/5161031/why-isnt-linkedlist-clear-o1\">Why isn&#39;t LinkedList.Clear() O(1)</a>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1484176613,"post_id":41601705,"comment_id":70407532,"body_markdown":"See also: http://stackoverflow.com/a/32513361/1553851","body":"See also: <a href=\"http://stackoverflow.com/a/32513361/1553851\">stackoverflow.com/a/32513361/1553851</a>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1484176970,"post_id":41601705,"comment_id":70407659,"body_markdown":"@LouisWasserman Are you disputing the source, or nitpicking the question?","body":"@LouisWasserman Are you disputing the source, or nitpicking the question?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1484177500,"post_id":41601705,"comment_id":70407836,"body_markdown":"Not only is it not needed, it has no effect. `f` itself can be garbage-collected anyway once there are no reachable references to it, and the former value of `f.next` is still reachable via `next` and subsequently `first`. It *might* make the internal workings of GC slightly more efficient, but it is formally redundant.","body":"Not only is it not needed, it has no effect. <code>f</code> itself can be garbage-collected anyway once there are no reachable references to it, and the former value of <code>f.next</code> is still reachable via <code>next</code> and subsequently <code>first</code>. It <i>might</i> make the internal workings of GC slightly more efficient, but it is formally redundant."}],"answers":[{"tags":[],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665920216,"creation_date":1665919209,"answer_id":74086675,"question_id":41601705,"body_markdown":"The main purpose of setting `null` is to trigger earlier GC.\r\n\r\nSee, some objects could be in an old generation and if they point to objects in a new generation VM cannot reclaim those new object till full GC. VM even might be forced to propagate young objects to a long-lived object storage (eden =&gt; survival, or survival =&gt; tenured).\r\n\r\nMinor GC might occur each second, major GC each 10 minutes. Holding an object for 10 minutes could be a dumb thing to do.\r\n\r\nResetting links via `null` sometimes serves for documentation purposes, like in C we write `(void) printf(...);` to denote we ignore return value.","title":"Is an object not GC&#39;d even if it has references to other object?","body":"<p>The main purpose of setting <code>null</code> is to trigger earlier GC.</p>\n<p>See, some objects could be in an old generation and if they point to objects in a new generation VM cannot reclaim those new object till full GC. VM even might be forced to propagate young objects to a long-lived object storage (eden =&gt; survival, or survival =&gt; tenured).</p>\n<p>Minor GC might occur each second, major GC each 10 minutes. Holding an object for 10 minutes could be a dumb thing to do.</p>\n<p>Resetting links via <code>null</code> sometimes serves for documentation purposes, like in C we write <code>(void) printf(...);</code> to denote we ignore return value.</p>\n"}],"owner":{"account_id":1452830,"reputation":3936,"user_id":1597944,"accept_rate":36,"display_name":"Harish Kayarohanam"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1665920216,"creation_date":1484172973,"question_id":41601705,"body_markdown":"I thought that an object is eligible for Garbage Collection once it is not referenced by any other thing (object or variable).\nref : https://stackoverflow.com/a/13144938\n\nBut In Java linked list [source code][1] \n\n[![enter image description here][2]][2]\n\n\nHere not only the author removes any references to it, but he also goes on to remove what it refers to .\nWhy is this needed ?\nAm I missing something in my understanding about Garbage Collection ?\n\n  [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/LinkedList.java#LinkedList.unlinkFirst%28java.util.LinkedList.Node%29\n  [2]: https://i.stack.imgur.com/bnuqE.png","title":"Is an object not GC&#39;d even if it has references to other object?","body":"<p>I thought that an object is eligible for Garbage Collection once it is not referenced by any other thing (object or variable).\nref : <a href=\"https://stackoverflow.com/a/13144938\">https://stackoverflow.com/a/13144938</a></p>\n<p>But In Java linked list <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/LinkedList.java#LinkedList.unlinkFirst%28java.util.LinkedList.Node%29\" rel=\"nofollow noreferrer\">source code</a></p>\n<p><a href=\"https://i.stack.imgur.com/bnuqE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bnuqE.png\" alt=\"enter image description here\" /></a></p>\n<p>Here not only the author removes any references to it, but he also goes on to remove what it refers to .\nWhy is this needed ?\nAm I missing something in my understanding about Garbage Collection ?</p>\n"},{"tags":["java","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":13679211,"reputation":58,"user_id":9869967,"display_name":"Binary Enigma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665920138,"creation_date":1665920138,"answer_id":74086773,"question_id":74086276,"body_markdown":"`XWPFDocument` has the method `removeBodyElement`, but since not every element needs to be a Paragraph, we can filter the body elements and then remove the specific paragraph like so:\r\n```java\r\nList&lt;IBodyElement&gt; elements = doc.getBodyElements();\r\nfor (int i = 0; i &lt; elements.size(); i++) {\r\n    var elem = elements.get(i);\r\n    if(!elem.getElementType().equals(BodyElementType.PARAGRAPH)) continue;\r\n\r\n    String line = ((XWPFParagraph) elem).getText();\r\n    if (line != null &amp;&amp; line.contains(&quot;@@THE_LINE_WILL_BE_DELETED@@&quot;)) {\r\n        doc.removeBodyElement(i);\r\n    }\r\n}\r\n```","title":"How to delete a line in docx with Apache POI?","body":"<p><code>XWPFDocument</code> has the method <code>removeBodyElement</code>, but since not every element needs to be a Paragraph, we can filter the body elements and then remove the specific paragraph like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;IBodyElement&gt; elements = doc.getBodyElements();\nfor (int i = 0; i &lt; elements.size(); i++) {\n    var elem = elements.get(i);\n    if(!elem.getElementType().equals(BodyElementType.PARAGRAPH)) continue;\n\n    String line = ((XWPFParagraph) elem).getText();\n    if (line != null &amp;&amp; line.contains(&quot;@@THE_LINE_WILL_BE_DELETED@@&quot;)) {\n        doc.removeBodyElement(i);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26312513,"reputation":23,"user_id":19975818,"display_name":"sretkaya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665920138,"creation_date":1665915984,"question_id":74086276,"body_markdown":"I am trying to delete a line in .docx file with apachi poi but I cannot.&lt;br&gt;\r\nI can change a line and make it &quot;null&quot; but the line is being empty, not deleted.&lt;br&gt;\r\nI have a code like below but it is only making a line empty.\r\n\r\n    XWPFDocument doc = new XWPFDocument(OPCPackage.open(templatesPath + templateName));\r\n    for (XWPFParagraph p : doc.getParagraphs()) {\r\n        List&lt;XWPFRun&gt; runs = p.getRuns();\r\n        if(runs != null){\r\n            for(int i = 0; i &lt; runs.size(); i++){\r\n                String line = p.getText();\r\n\r\n                if(line != null &amp;&amp; line.contains(&quot;@@THE_LINE_WILL_BE_DELETED@@&quot;)){\r\n                    runs.get(i).setText(null,0);\r\n                    // Here I need to delete the instead of setting as a null.\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nI you have an idea about how can I delete the lines which I want in docx? I searched a lot among other questions or forums but I cannot find?","title":"How to delete a line in docx with Apache POI?","body":"<p>I am trying to delete a line in .docx file with apachi poi but I cannot.<br>\nI can change a line and make it &quot;null&quot; but the line is being empty, not deleted.<br>\nI have a code like below but it is only making a line empty.</p>\n<pre><code>XWPFDocument doc = new XWPFDocument(OPCPackage.open(templatesPath + templateName));\nfor (XWPFParagraph p : doc.getParagraphs()) {\n    List&lt;XWPFRun&gt; runs = p.getRuns();\n    if(runs != null){\n        for(int i = 0; i &lt; runs.size(); i++){\n            String line = p.getText();\n\n            if(line != null &amp;&amp; line.contains(&quot;@@THE_LINE_WILL_BE_DELETED@@&quot;)){\n                runs.get(i).setText(null,0);\n                // Here I need to delete the instead of setting as a null.\n            }\n        }\n    }\n}\n</code></pre>\n<p>I you have an idea about how can I delete the lines which I want in docx? I searched a lot among other questions or forums but I cannot find?</p>\n"},{"tags":["java","hibernate","schemaexport"],"answers":[{"tags":[],"owner":{"account_id":921911,"reputation":1,"user_id":5753567,"display_name":"Tamer Sezgin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665920115,"creation_date":1665920115,"answer_id":74086768,"question_id":33595094,"body_markdown":"It seems Hibernate looks &quot;**hibernate.cfg.xml**&quot; file in classpath **root folder**. You can try the following:\r\n\r\n 1. copy &quot;`hibernate.cfg.xml`&quot; file to the current folder (where you run `java ...` command)\r\n 2. add current folder (&#39;`.`&#39;) to the classpath. (Note: you need to add classpath delimiter char too. It is &#39;`:`&#39; on Linux, and &#39;`;`&#39; on Windows)\r\n\r\nSo the final command (on Linux) should be: \r\n\r\n    java -cp &quot;.:lib/*&quot; org.hibernate.tool.hbm2ddl.SchemaExport --config=hibernate.cfg.xml --create src/hello/Message.hbm.xml","title":"Hibernate SchemaExport from the Commandline","body":"<p>It seems Hibernate looks &quot;<strong>hibernate.cfg.xml</strong>&quot; file in classpath <strong>root folder</strong>. You can try the following:</p>\n<ol>\n<li>copy &quot;<code>hibernate.cfg.xml</code>&quot; file to the current folder (where you run <code>java ...</code> command)</li>\n<li>add current folder ('<code>.</code>') to the classpath. (Note: you need to add classpath delimiter char too. It is '<code>:</code>' on Linux, and '<code>;</code>' on Windows)</li>\n</ol>\n<p>So the final command (on Linux) should be:</p>\n<pre><code>java -cp &quot;.:lib/*&quot; org.hibernate.tool.hbm2ddl.SchemaExport --config=hibernate.cfg.xml --create src/hello/Message.hbm.xml\n</code></pre>\n"}],"owner":{"account_id":337036,"reputation":184,"user_id":665060,"display_name":"Samih3"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665920115,"creation_date":1446993208,"question_id":33595094,"body_markdown":"I&#39;m new to hibernate and have been attempting to run the SchemaExport hdm2ddl tool from the command line (windows) as:\r\n`java -cp &quot;lib/*&quot; org.hibernate.tool.hbm2ddl.SchemaExport --config=src/hibernate.cfg.xml --create src/hello/Message.hbm.xml`\r\n\r\nMy directory structure is as follows:\r\n\r\n    - HelloWorld\r\n        - bin\r\n        - lib (all of the required jars - list omitted for brevity)\r\n        - src\r\n            - hello (HelloWorld.java, Message.java &amp; Message.hbm.xml)\r\n            - persistence (HibernateUtil.java)\r\n            - hibernate.cfg.xml\r\n            - log4j.properties\r\n\r\nAttempting to run the command yields the error below:\r\n\r\n    log4j:WARN No appenders could be found for logger (org.jboss.logging).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n    org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [src/hibernate.cfg.xml]\r\n            at org.hibernate.boot.cfgxml.internal.ConfigLoader.loadConfigXmlResource(ConfigLoader.java:53)\r\n            at org.hibernate.boot.registry.StandardServiceRegistryBuilder.configure(StandardServiceRegistryBuilder.java:163)\r\n            at org.hibernate.tool.hbm2ddl.SchemaExport.buildStandardServiceRegistry(SchemaExport.java:579)\r\n            at org.hibernate.tool.hbm2ddl.SchemaExport.main(SchemaExport.java:546)\r\n\r\nMy research so far:\r\n\r\n1. The command cannot find the hibernate.cfg.xml file. changing the spelling of the file in the command to a wrong spelling yields the same error.\r\n2. Copied the cfg.xml file into both the classpath (lib) and the HelloWorld directories. The error persisted.\r\n\r\nThis is basically the example from &quot;Java Persistence with Hibernate&quot; but running it from the command line instead of using ant.","title":"Hibernate SchemaExport from the Commandline","body":"<p>I'm new to hibernate and have been attempting to run the SchemaExport hdm2ddl tool from the command line (windows) as:\n<code>java -cp \"lib/*\" org.hibernate.tool.hbm2ddl.SchemaExport --config=src/hibernate.cfg.xml --create src/hello/Message.hbm.xml</code></p>\n\n<p>My directory structure is as follows:</p>\n\n<pre><code>- HelloWorld\n    - bin\n    - lib (all of the required jars - list omitted for brevity)\n    - src\n        - hello (HelloWorld.java, Message.java &amp; Message.hbm.xml)\n        - persistence (HibernateUtil.java)\n        - hibernate.cfg.xml\n        - log4j.properties\n</code></pre>\n\n<p>Attempting to run the command yields the error below:</p>\n\n<pre><code>log4j:WARN No appenders could be found for logger (org.jboss.logging).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\norg.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [src/hibernate.cfg.xml]\n        at org.hibernate.boot.cfgxml.internal.ConfigLoader.loadConfigXmlResource(ConfigLoader.java:53)\n        at org.hibernate.boot.registry.StandardServiceRegistryBuilder.configure(StandardServiceRegistryBuilder.java:163)\n        at org.hibernate.tool.hbm2ddl.SchemaExport.buildStandardServiceRegistry(SchemaExport.java:579)\n        at org.hibernate.tool.hbm2ddl.SchemaExport.main(SchemaExport.java:546)\n</code></pre>\n\n<p>My research so far:</p>\n\n<ol>\n<li>The command cannot find the hibernate.cfg.xml file. changing the spelling of the file in the command to a wrong spelling yields the same error.</li>\n<li>Copied the cfg.xml file into both the classpath (lib) and the HelloWorld directories. The error persisted.</li>\n</ol>\n\n<p>This is basically the example from \"Java Persistence with Hibernate\" but running it from the command line instead of using ant.</p>\n"},{"tags":["java","android-studio","wear-os","samsung-galaxy-watch-4"],"answers":[{"tags":[],"owner":{"account_id":1481915,"reputation":12601,"user_id":1542667,"accept_rate":75,"display_name":"Yuri Schimke"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665918938,"creation_date":1665918938,"answer_id":74086636,"question_id":74083594,"body_markdown":"For Compose you can use the onRotaryInputAccumulated modifier from Horologist \r\n\r\nExample for volume control\r\n\r\nhttps://github.com/google/horologist/blob/94552e13ea45613cc9b804ee7080b4aa92311d54/audio-ui/src/main/java/com/google/android/horologist/audio/ui/VolumeScreen.kt#L108-L114\r\n\r\nThe raw events come from onRotaryScrollEvent https://stackoverflow.com/questions/70060650/how-to-implement-positionindicator-for-bezel-galaxy-watch-4-classic-wear-os-3/70062947#70062947\r\n\r\nFor Views use https://developer.android.com/training/wearables/user-input/rotary-input","title":"Samsung Galaxy 4 classic bezel rotation detection in Android Studio (Java)","body":"<p>For Compose you can use the onRotaryInputAccumulated modifier from Horologist</p>\n<p>Example for volume control</p>\n<p><a href=\"https://github.com/google/horologist/blob/94552e13ea45613cc9b804ee7080b4aa92311d54/audio-ui/src/main/java/com/google/android/horologist/audio/ui/VolumeScreen.kt#L108-L114\" rel=\"nofollow noreferrer\">https://github.com/google/horologist/blob/94552e13ea45613cc9b804ee7080b4aa92311d54/audio-ui/src/main/java/com/google/android/horologist/audio/ui/VolumeScreen.kt#L108-L114</a></p>\n<p>The raw events come from onRotaryScrollEvent <a href=\"https://stackoverflow.com/questions/70060650/how-to-implement-positionindicator-for-bezel-galaxy-watch-4-classic-wear-os-3/70062947#70062947\">how to implement positionindicator for bezel (Galaxy watch 4 Classic) wear os 3.0 (jetpack compose)?</a></p>\n<p>For Views use <a href=\"https://developer.android.com/training/wearables/user-input/rotary-input\" rel=\"nofollow noreferrer\">https://developer.android.com/training/wearables/user-input/rotary-input</a></p>\n"}],"owner":{"account_id":26635470,"reputation":11,"user_id":20251974,"display_name":"Aschtr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665918938,"creation_date":1665875155,"question_id":74083594,"body_markdown":"I want to be able to add a value to an integral that I have:\r\n\r\nRotating clockwise would increase the value by one\r\n\r\nRotating counter-clockwise would decrease the value by one\r\n\r\nI tried searching and I found &quot;rotary input&quot;, but I didn&#39;t really manage to put it in practice (I mostly found it all talking about scrollview)\r\n\r\nHow can I achieve it?","title":"Samsung Galaxy 4 classic bezel rotation detection in Android Studio (Java)","body":"<p>I want to be able to add a value to an integral that I have:</p>\n<p>Rotating clockwise would increase the value by one</p>\n<p>Rotating counter-clockwise would decrease the value by one</p>\n<p>I tried searching and I found &quot;rotary input&quot;, but I didn't really manage to put it in practice (I mostly found it all talking about scrollview)</p>\n<p>How can I achieve it?</p>\n"},{"tags":["java","multithreading","spring-boot","executorservice","callable"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1665913731,"post_id":74085974,"comment_id":130806341,"body_markdown":"when a new Thread is needed. The Executor will maintain a pool (collection) of threads to run the tasks. These Threads are re-used for new tasks, that is, they do not need to be started for every task&#185;. If the pool has no available Thread and its capacity is not yet fully used, a new Thread will (may be) created and started when `submit` is called. Also consult the [documentation](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/Executors.html#newFixedThreadPool(int)) of `newFixedThreadPool`, and of related classes. || **&#185;** A Thread can only be started once","body":"when a new Thread is needed. The Executor will maintain a pool (collection) of threads to run the tasks. These Threads are re-used for new tasks, that is, they do not need to be started for every task&#185;. If the pool has no available Thread and its capacity is not yet fully used, a new Thread will (may be) created and started when <code>submit</code> is called. Also consult the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/Executors.html#newFixedThreadPool(int)\" rel=\"nofollow noreferrer\">documentation</a> of <code>newFixedThreadPool</code>, and of related classes. || <b>&#185;</b> A Thread can only be started once"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1665915023,"post_id":74085974,"comment_id":130806553,"body_markdown":"I think you&#39;re confusing (or conflating) the method `run` of `Runnable` for the method `start` of `Thread`.","body":"I think you&#39;re confusing (or conflating) the method <code>run</code> of <code>Runnable</code> for the method <code>start</code> of <code>Thread</code>."}],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1665997273,"post_id":74086576,"comment_id":130821995,"body_markdown":"Generally, executor services do not start a thread when you submit a job, they - usually - already have a pool of threads to run submitted jobs (using a queue for the jobs).","body":"Generally, executor services do not start a thread when you submit a job, they - usually - already have a pool of threads to run submitted jobs (using a queue for the jobs)."}],"tags":[],"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665918441,"creation_date":1665918441,"answer_id":74086576,"question_id":74085974,"body_markdown":"ExecutorService is another layer on top of Threads.\r\n\r\nYou dont have to manage the threads yourself, the ExecutorService is doing this for you.\r\n\r\n    Future&lt;Accounts&gt; accountFuture = executorService.submit(() -&gt; accountsRepository.findByCustomerId(customer.getCustomerId()));\r\n\r\nthis is already starting a new thread. You get a future returned to tell you the state of the computation (if its finished, the result etc).\r\n\r\nUnder the hood the ExecutorService is doing the new Thread().start() things automatically.","title":"When is start method invoked by ExecutorService in Java?","body":"<p>ExecutorService is another layer on top of Threads.</p>\n<p>You dont have to manage the threads yourself, the ExecutorService is doing this for you.</p>\n<pre><code>Future&lt;Accounts&gt; accountFuture = executorService.submit(() -&gt; accountsRepository.findByCustomerId(customer.getCustomerId()));\n</code></pre>\n<p>this is already starting a new thread. You get a future returned to tell you the state of the computation (if its finished, the result etc).</p>\n<p>Under the hood the ExecutorService is doing the new Thread().start() things automatically.</p>\n"}],"owner":{"account_id":2090997,"reputation":844,"user_id":7516740,"display_name":"elvis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1665918441,"creation_date":1665912588,"question_id":74085974,"body_markdown":"I&#39;m learning about `ExecutorService` in a simple Spring Boot project. And I know that `ExecutorService` uses `submit` method to submit tasks and it will uses different threads for every task. And I don&#39;t understand where exactly are the new threads started. I know that a thread is started using method `start`. Can somebody explain me where is invoked the `start` method? \r\n\r\nFor example, this is my code:\r\n\r\n    try {\r\n        ExecutorService executorService = Executors.newFixedThreadPool(3);\r\n        Future&lt;Accounts&gt; accountFuture =\r\n                executorService.submit(\r\n                        () -&gt; accountsRepository.findByCustomerId(customer.getCustomerId()));\r\n\r\n        Future&lt;List&lt;Loans&gt;&gt; loansFuture =\r\n                executorService.submit(\r\n                        () -&gt; loansFeignClient.getLoansDetails(correlationId, customer));\r\n\r\n        Future&lt;List&lt;Cards&gt;&gt; cardsFuture =\r\n                executorService.submit(\r\n                        () -&gt; cardsFeignClient.getCardDetails(correlationId, customer));\r\n\r\n        executorService.shutdown();\r\n        Accounts account;\r\n\r\n        try {\r\n            executorService.awaitTermination(3, TimeUnit.SECONDS);\r\n            account = accountFuture.get();\r\n        } catch (ExecutionException | InterruptedException ex) {\r\n            logger.warn(&quot;Exception for accountFuture.get() = {}&quot;, ex);\r\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).build();\r\n        }\r\n\r\n        List&lt;Loans&gt; loansList = new ArrayList&lt;&gt;();\r\n        List&lt;Cards&gt; cardsList = new ArrayList&lt;&gt;();\r\n\r\n        try {\r\n            loansList.addAll(loansFuture.get());\r\n        } catch (ExecutionException | InterruptedException ex) {\r\n            logger.warn(ex.toString());\r\n            logger.warn(&quot;The call to GET loans details failed! Returning empty contactDetails body!&quot;);\r\n        }\r\n\r\n        try {\r\n            cardsList.addAll(cardsFuture.get());\r\n        } catch (ExecutionException | InterruptedException ex) {\r\n            logger.warn(ex.toString());\r\n            logger.warn(&quot;The call to GET cards details failed! Returning empty contactDetails body!&quot;);\r\n        }\r\n\r\n        ...\r\n\r\n \r\nIs the new thread started when the `submit` method is invoked or when the `get` method is invoked? And when is invoked the `start` method?\r\nThank you! Any feedback will be appreciated!","title":"When is start method invoked by ExecutorService in Java?","body":"<p>I'm learning about <code>ExecutorService</code> in a simple Spring Boot project. And I know that <code>ExecutorService</code> uses <code>submit</code> method to submit tasks and it will uses different threads for every task. And I don't understand where exactly are the new threads started. I know that a thread is started using method <code>start</code>. Can somebody explain me where is invoked the <code>start</code> method?</p>\n<p>For example, this is my code:</p>\n<pre><code>try {\n    ExecutorService executorService = Executors.newFixedThreadPool(3);\n    Future&lt;Accounts&gt; accountFuture =\n            executorService.submit(\n                    () -&gt; accountsRepository.findByCustomerId(customer.getCustomerId()));\n\n    Future&lt;List&lt;Loans&gt;&gt; loansFuture =\n            executorService.submit(\n                    () -&gt; loansFeignClient.getLoansDetails(correlationId, customer));\n\n    Future&lt;List&lt;Cards&gt;&gt; cardsFuture =\n            executorService.submit(\n                    () -&gt; cardsFeignClient.getCardDetails(correlationId, customer));\n\n    executorService.shutdown();\n    Accounts account;\n\n    try {\n        executorService.awaitTermination(3, TimeUnit.SECONDS);\n        account = accountFuture.get();\n    } catch (ExecutionException | InterruptedException ex) {\n        logger.warn(&quot;Exception for accountFuture.get() = {}&quot;, ex);\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).build();\n    }\n\n    List&lt;Loans&gt; loansList = new ArrayList&lt;&gt;();\n    List&lt;Cards&gt; cardsList = new ArrayList&lt;&gt;();\n\n    try {\n        loansList.addAll(loansFuture.get());\n    } catch (ExecutionException | InterruptedException ex) {\n        logger.warn(ex.toString());\n        logger.warn(&quot;The call to GET loans details failed! Returning empty contactDetails body!&quot;);\n    }\n\n    try {\n        cardsList.addAll(cardsFuture.get());\n    } catch (ExecutionException | InterruptedException ex) {\n        logger.warn(ex.toString());\n        logger.warn(&quot;The call to GET cards details failed! Returning empty contactDetails body!&quot;);\n    }\n\n    ...\n</code></pre>\n<p>Is the new thread started when the <code>submit</code> method is invoked or when the <code>get</code> method is invoked? And when is invoked the <code>start</code> method?\nThank you! Any feedback will be appreciated!</p>\n"},{"tags":["java","ubuntu","groovy","java-11"],"comments":[{"owner":{"account_id":11454057,"reputation":1114,"user_id":8395666,"display_name":"emilles"},"score":0,"creation_date":1640055059,"post_id":70427604,"comment_id":124499259,"body_markdown":"Groovy 2.4.21 has a number of these issues. Groovy 2.5 and 3 and very soon 4 each make strides to use method handles and other proper access mechanisms.","body":"Groovy 2.4.21 has a number of these issues. Groovy 2.5 and 3 and very soon 4 each make strides to use method handles and other proper access mechanisms."},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":1,"creation_date":1640056386,"post_id":70427604,"comment_id":124499397,"body_markdown":"to work with java 11 better to use groovy 3.0. java 9 started to be supported in groovy 2.5. groovy 2.4 designed for java 8. https://groovy-lang.org/releasenotes/groovy-2.5.html","body":"to work with java 11 better to use groovy 3.0. java 9 started to be supported in groovy 2.5. groovy 2.4 designed for java 8. <a href=\"https://groovy-lang.org/releasenotes/groovy-2.5.html\" rel=\"nofollow noreferrer\">groovy-lang.org/releasenotes/groovy-2.5.html</a>"},{"owner":{"account_id":2435926,"reputation":21167,"user_id":2125837,"accept_rate":83,"display_name":"xpt"},"score":0,"creation_date":1640058177,"post_id":70427604,"comment_id":124499642,"body_markdown":"Thanks @daggett, I think you&#39;ve nailed it. Just that my latest Ubuntu 21.10 is still only providing groovy-2.4.21. And for this particular reason, I think I&#39;ll use the java 8 (provided by openjdk-8-jdk:amd64) instead of installing groovy 3.0 using the external `sdkman` tool, because I just need something to work, no need to be the latest and greatest, and java 8 is fine with me. THX!","body":"Thanks @daggett, I think you&#39;ve nailed it. Just that my latest Ubuntu 21.10 is still only providing groovy-2.4.21. And for this particular reason, I think I&#39;ll use the java 8 (provided by openjdk-8-jdk:amd64) instead of installing groovy 3.0 using the external <code>sdkman</code> tool, because I just need something to work, no need to be the latest and greatest, and java 8 is fine with me. THX!"}],"answers":[{"comments":[{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":0,"creation_date":1640053834,"post_id":70429902,"comment_id":124499089,"body_markdown":"It seems that --add-opens isn&#39;t enough.  I&#39;ve updated my answer as I get a different result from you.  And I see groovy doesn&#39;t complain with Java 17.","body":"It seems that --add-opens isn&#39;t enough.  I&#39;ve updated my answer as I get a different result from you.  And I see groovy doesn&#39;t complain with Java 17."},{"owner":{"account_id":2435926,"reputation":21167,"user_id":2125837,"accept_rate":83,"display_name":"xpt"},"score":0,"creation_date":1640057463,"post_id":70429902,"comment_id":124499529,"body_markdown":"thx, can you list your java / groovy versions and your OS details as well pls?","body":"thx, can you list your java / groovy versions and your OS details as well pls?"},{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":0,"creation_date":1640098653,"post_id":70429902,"comment_id":124511698,"body_markdown":"@xpt Java 17.0.1,  groovy 2.4.17, Ubuntu 20.04","body":"@xpt Java 17.0.1,  groovy 2.4.17, Ubuntu 20.04"},{"owner":{"account_id":2435926,"reputation":21167,"user_id":2125837,"accept_rate":83,"display_name":"xpt"},"score":0,"creation_date":1640100475,"post_id":70429902,"comment_id":124512487,"body_markdown":"thx, and _&quot;I actually still get the reflective access warnings&quot;_, what&#39;s the Java version for that pls?","body":"thx, and <i>&quot;I actually still get the reflective access warnings&quot;</i>, what&#39;s the Java version for that pls?"},{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":0,"creation_date":1640108504,"post_id":70429902,"comment_id":124515728,"body_markdown":"@xpt Was still getting the warnings with JVM 11.0.13","body":"@xpt Was still getting the warnings with JVM 11.0.13"}],"tags":[],"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640053769,"creation_date":1640052145,"answer_id":70429902,"question_id":70427604,"body_markdown":"It&#39;s clear from the FileNotFound exception that the --add-opens was not used as a JVM flag.\r\nHave you tried setting JAVA_OPTS?  Like so:\r\n```\r\nexport JAVA_OPTS=&quot;--add-opens java.base/java.lang=ALL-UNNAMED&quot;\r\ngroovy --version\r\n```\r\n\r\nI don&#39;t get the same error as you.  I actually still get the reflective access warnings, not an error about ```--add-opens``` being unrecognized.\r\nEven with ```--illegal-access=permit``` I still see the warnings. Odd.  I&#39;m sure the JAVA_OPTS value is being used as it does complain if I set it to an invalid flag.\r\n\r\nDo you have JAVA_HOME defined? I noticed groovy also picks up that value to choose the JVM.\r\n\r\nWith Java 17 I get no warnings or errors.\r\n","title":"groovy WARNING: An illegal reflective access operation has occurred under Ubuntu","body":"<p>It's clear from the FileNotFound exception that the --add-opens was not used as a JVM flag.\nHave you tried setting JAVA_OPTS?  Like so:</p>\n<pre><code>export JAVA_OPTS=&quot;--add-opens java.base/java.lang=ALL-UNNAMED&quot;\ngroovy --version\n</code></pre>\n<p>I don't get the same error as you.  I actually still get the reflective access warnings, not an error about <code>--add-opens</code> being unrecognized.\nEven with <code>--illegal-access=permit</code> I still see the warnings. Odd.  I'm sure the JAVA_OPTS value is being used as it does complain if I set it to an invalid flag.</p>\n<p>Do you have JAVA_HOME defined? I noticed groovy also picks up that value to choose the JVM.</p>\n<p>With Java 17 I get no warnings or errors.</p>\n"},{"tags":[],"owner":{"account_id":26099213,"reputation":11,"user_id":19794910,"display_name":"temecom"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660833624,"creation_date":1660833624,"answer_id":73404990,"question_id":70427604,"body_markdown":"Follow the instructions here: https://groovy-lang.org/install.html\r\nThis will: \r\n\r\n - Install sdkman \r\n   - Manages multiple JDKs and extensions\r\n - Install groovy in the current JDK\r\n\r\nWorked for me on:\r\n\r\n - openjdk 11.0.11 2021-04-20\r\n - OpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)\r\n - OpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)","title":"groovy WARNING: An illegal reflective access operation has occurred under Ubuntu","body":"<p>Follow the instructions here: <a href=\"https://groovy-lang.org/install.html\" rel=\"nofollow noreferrer\">https://groovy-lang.org/install.html</a>\nThis will:</p>\n<ul>\n<li>Install sdkman\n<ul>\n<li>Manages multiple JDKs and extensions</li>\n</ul>\n</li>\n<li>Install groovy in the current JDK</li>\n</ul>\n<p>Worked for me on:</p>\n<ul>\n<li>openjdk 11.0.11 2021-04-20</li>\n<li>OpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)</li>\n<li>OpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)</li>\n</ul>\n"}],"owner":{"account_id":2435926,"reputation":21167,"user_id":2125837,"accept_rate":83,"display_name":"xpt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4528,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70429902,"answer_count":2,"score":0,"last_activity_date":1665917981,"creation_date":1640031806,"question_id":70427604,"body_markdown":"Same issue as \r\nhttps://stackoverflow.com/questions/47935772/groovy-warning-an-illegal-reflective-access-operation-has-occurred, just that\r\n\r\n- This is in Ubuntu 21.10\r\n- And most importantly that solution (of passing `--add-opens` to the JVM), I&#39;m not able to make it working for me.\r\n\r\n```sh\r\n$ groovy -version\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by org.codehaus.groovy.reflection.CachedClass (file:/usr/share/groovy/lib/groovy-2.4.21.jar) to method java.lang.Object.finalize()\r\nWARNING: Please consider reporting this to the maintainers of org.codehaus.groovy.reflection.CachedClass\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\nGroovy Version: 2.4.21 JVM: 11.0.12 Vendor: Ubuntu OS: Linux\r\n\r\n$ java -version\r\nopenjdk version &quot;11.0.12&quot; 2021-07-20\r\nOpenJDK Runtime Environment (build 11.0.12+7-Ubuntu-0ubuntu3)\r\nOpenJDK 64-Bit Server VM (build 11.0.12+7-Ubuntu-0ubuntu3, mixed mode, sharing)\r\n\r\n$ java --add-opens java.base/java.lang=ALL-UNNAMED -version\r\nopenjdk version &quot;11.0.12&quot; 2021-07-20\r\nOpenJDK Runtime Environment (build 11.0.12+7-Ubuntu-0ubuntu3)\r\nOpenJDK 64-Bit Server VM (build 11.0.12+7-Ubuntu-0ubuntu3, mixed mode, sharing)\r\n\r\n$ groovy --add-opens java.base/java.lang=ALL-UNNAMED -version\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by org.codehaus.groovy.reflection.CachedClass (file:/usr/share/groovy/lib/groovy-2.4.21.jar) to method java.lang.Object.finalize()\r\nWARNING: Please consider reporting this to the maintainers of org.codehaus.groovy.reflection.CachedClass\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\nCaught: java.io.FileNotFoundException: /export/home/me/--add-opens (/export/home/me/--add-opens)\r\njava.io.FileNotFoundException: /export/home/me/--add-opens (/export/home/me/--add-opens)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\r\n$ apt-cache policy groovy\r\ngroovy:\r\n  Installed: 2.4.21-1\r\n  Candidate: 2.4.21-1\r\n  Version table:\r\n *** 2.4.21-1 500\r\n        500 http://archive.ubuntu.com/ubuntu impish/universe amd64 Packages\r\n        500 http://archive.ubuntu.com/ubuntu impish/universe i386 Packages\r\n        100 /var/lib/dpkg/status\r\n\r\n\r\n$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 21.10\r\nRelease:        21.10\r\nCodename:       impish\r\n```\r\n\r\n**Update,** I&#39;ve tried to set `JAVA_OPTS` as well:\r\n\r\n```sh\r\nexport JAVA_OPTS=&quot;--add-opens java.base/java.lang=ALL-UNNAMED&quot;\r\n\r\n$ groovy -version\r\nUnrecognized option: --add-opens\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n```\r\n\r\n\r\nHow to get rid of that warning message?\r\n","title":"groovy WARNING: An illegal reflective access operation has occurred under Ubuntu","body":"<p>Same issue as\n<a href=\"https://stackoverflow.com/questions/47935772/groovy-warning-an-illegal-reflective-access-operation-has-occurred\">Groovy - WARNING: An illegal reflective access operation has occurred</a>, just that</p>\n<ul>\n<li>This is in Ubuntu 21.10</li>\n<li>And most importantly that solution (of passing <code>--add-opens</code> to the JVM), I'm not able to make it working for me.</li>\n</ul>\n<pre class=\"lang-sh prettyprint-override\"><code>$ groovy -version\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by org.codehaus.groovy.reflection.CachedClass (file:/usr/share/groovy/lib/groovy-2.4.21.jar) to method java.lang.Object.finalize()\nWARNING: Please consider reporting this to the maintainers of org.codehaus.groovy.reflection.CachedClass\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\nGroovy Version: 2.4.21 JVM: 11.0.12 Vendor: Ubuntu OS: Linux\n\n$ java -version\nopenjdk version &quot;11.0.12&quot; 2021-07-20\nOpenJDK Runtime Environment (build 11.0.12+7-Ubuntu-0ubuntu3)\nOpenJDK 64-Bit Server VM (build 11.0.12+7-Ubuntu-0ubuntu3, mixed mode, sharing)\n\n$ java --add-opens java.base/java.lang=ALL-UNNAMED -version\nopenjdk version &quot;11.0.12&quot; 2021-07-20\nOpenJDK Runtime Environment (build 11.0.12+7-Ubuntu-0ubuntu3)\nOpenJDK 64-Bit Server VM (build 11.0.12+7-Ubuntu-0ubuntu3, mixed mode, sharing)\n\n$ groovy --add-opens java.base/java.lang=ALL-UNNAMED -version\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by org.codehaus.groovy.reflection.CachedClass (file:/usr/share/groovy/lib/groovy-2.4.21.jar) to method java.lang.Object.finalize()\nWARNING: Please consider reporting this to the maintainers of org.codehaus.groovy.reflection.CachedClass\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\nCaught: java.io.FileNotFoundException: /export/home/me/--add-opens (/export/home/me/--add-opens)\njava.io.FileNotFoundException: /export/home/me/--add-opens (/export/home/me/--add-opens)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\n$ apt-cache policy groovy\ngroovy:\n  Installed: 2.4.21-1\n  Candidate: 2.4.21-1\n  Version table:\n *** 2.4.21-1 500\n        500 http://archive.ubuntu.com/ubuntu impish/universe amd64 Packages\n        500 http://archive.ubuntu.com/ubuntu impish/universe i386 Packages\n        100 /var/lib/dpkg/status\n\n\n$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 21.10\nRelease:        21.10\nCodename:       impish\n</code></pre>\n<p><strong>Update,</strong> I've tried to set <code>JAVA_OPTS</code> as well:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>export JAVA_OPTS=&quot;--add-opens java.base/java.lang=ALL-UNNAMED&quot;\n\n$ groovy -version\nUnrecognized option: --add-opens\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n<p>How to get rid of that warning message?</p>\n"},{"tags":["java","environment-variables"],"comments":[{"owner":{"account_id":9899777,"reputation":1892,"user_id":9255006,"display_name":"Zankrut Parmar"},"score":0,"creation_date":1665915829,"post_id":74086248,"comment_id":130806675,"body_markdown":"Does this answer your question? [Switch between Prod and Dev environment](https://stackoverflow.com/questions/43305246/switch-between-prod-and-dev-environment)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/43305246/switch-between-prod-and-dev-environment\">Switch between Prod and Dev environment</a>"},{"owner":{"account_id":17000499,"reputation":48417,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1665916005,"post_id":74086248,"comment_id":130806708,"body_markdown":"This isn&#39;t a Java concept; are you using a framework which supports different settings for development/production/testing, or do you just want to know how to read an environment variable in Java?","body":"This isn&#39;t a Java concept; are you using a framework which supports different settings for development/production/testing, or do you just want to know how to read an environment variable in Java?"},{"owner":{"account_id":25709237,"reputation":61,"user_id":19468052,"display_name":"vktop"},"score":0,"creation_date":1665916323,"post_id":74086248,"comment_id":130806763,"body_markdown":"Thanks but no, that post is interesting but it doesn&#39;t help me much since the idea is to learn how environments work without having to get into Spring (Spring is too advanced for a junior).\nIsn&#39;t there a native Java way to work with .env files or something?","body":"Thanks but no, that post is interesting but it doesn&#39;t help me much since the idea is to learn how environments work without having to get into Spring (Spring is too advanced for a junior). Isn&#39;t there a native Java way to work with .env files or something?"},{"owner":{"account_id":25709237,"reputation":61,"user_id":19468052,"display_name":"vktop"},"score":0,"creation_date":1665916436,"post_id":74086248,"comment_id":130806781,"body_markdown":"I know environments are not unique to Java, but I&#39;m looking for a way to implement them in Java. I don&#39;t use any framework apart from JavaFX. It is a simple application to learn programming. And I would like to know how to work with environments without reaching levels as advanced as Spring","body":"I know environments are not unique to Java, but I&#39;m looking for a way to implement them in Java. I don&#39;t use any framework apart from JavaFX. It is a simple application to learn programming. And I would like to know how to work with environments without reaching levels as advanced as Spring"},{"owner":{"account_id":17000499,"reputation":48417,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1665917133,"post_id":74086248,"comment_id":130806883,"body_markdown":"So then you just want to [read an environment variable](https://stackoverflow.com/q/20610080/12299000)?","body":"So then you just want to <a href=\"https://stackoverflow.com/q/20610080/12299000\">read an environment variable</a>?"},{"owner":{"account_id":25709237,"reputation":61,"user_id":19468052,"display_name":"vktop"},"score":0,"creation_date":1665917449,"post_id":74086248,"comment_id":130806951,"body_markdown":"To better explain myself, I will give an example. In javascript, you can create files like .env , .env.development, etc. And inside them you put key value pairs. You can then retrieve that in your code. It dynamically returns the value depending on whether you are in development or production. I&#39;m looking to do the same thing in Java but in a simple way. Without having to use Spring as it is extremely advanced","body":"To better explain myself, I will give an example. In javascript, you can create files like .env , .env.development, etc. And inside them you put key value pairs. You can then retrieve that in your code. It dynamically returns the value depending on whether you are in development or production. I&#39;m looking to do the same thing in Java but in a simple way. Without having to use Spring as it is extremely advanced"},{"owner":{"account_id":25709237,"reputation":61,"user_id":19468052,"display_name":"vktop"},"score":0,"creation_date":1665918181,"post_id":74086248,"comment_id":130807094,"body_markdown":"I am not sure, but i think System.getEnvironment is nor what i am looking for since it returns you variables like JAVA_HOME. https://stackoverflow.com/questions/531694/how-can-i-get-system-variable-value-in-java","body":"I am not sure, but i think System.getEnvironment is nor what i am looking for since it returns you variables like JAVA_HOME. <a href=\"https://stackoverflow.com/questions/531694/how-can-i-get-system-variable-value-in-java\" title=\"how can i get system variable value in java\">stackoverflow.com/questions/531694/&hellip;</a>"},{"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"score":1,"creation_date":1665918223,"post_id":74086248,"comment_id":130807109,"body_markdown":"System.getEnvironment is exactly what you want. You will have to pass different variables depending on which system you are on.","body":"System.getEnvironment is exactly what you want. You will have to pass different variables depending on which system you are on."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1665918295,"post_id":74086248,"comment_id":130807125,"body_markdown":"It returns things like `java_home`...but also things like `my_db_pwd` or (better) `my_app_environment...` ;) ..these you&#39;d *have to set* on the according env./pass as cmd arguments/...(e.g. `java ... MyApp -Dmy_env=prod`;)","body":"It returns things like <code>java_home</code>...but also things like <code>my_db_pwd</code> or (better) <code>my_app_environment...</code> ;) ..these you&#39;d <i>have to set</i> on the according env./pass as cmd arguments/...(e.g. <code>java ... MyApp -Dmy_env=prod</code>;)"},{"owner":{"account_id":25709237,"reputation":61,"user_id":19468052,"display_name":"vktop"},"score":0,"creation_date":1665918661,"post_id":74086248,"comment_id":130807204,"body_markdown":"Is there any documentation or course that I can consult to learn how to work with the environments? When I search for &quot;java environment variables&quot; the only thing I find is how to install JAVA_HOME in the","body":"Is there any documentation or course that I can consult to learn how to work with the environments? When I search for &quot;java environment variables&quot; the only thing I find is how to install JAVA_HOME in the"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665918805,"post_id":74086248,"comment_id":130807233,"body_markdown":"..without spring or maven (plain (ole) java), you&#39;d (mimic &quot;spring profiles&quot;): introduce (multiple/hirarchical) `my_domain[_env].properties` (google: &quot;java.util.properties&quot;) ..some (custom) piece of code would &quot;load&quot; you these (regarding structure/according to `env`), and make it available to &quot;your app&quot;.","body":"..without spring or maven (plain (ole) java), you&#39;d (mimic &quot;spring profiles&quot;): introduce (multiple/hirarchical) <code>my_domain[_env].properties</code> (google: &quot;java.util.properties&quot;) ..some (custom) piece of code would &quot;load&quot; you these (regarding structure/according to <code>env</code>), and make it available to &quot;your app&quot;."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665918975,"post_id":74086248,"comment_id":130807260,"body_markdown":"Then &quot;your app&quot; could do (environment independently) things like: `myProps.get(&quot;my_domain_custom_config_password_etc&quot;);` (which would refer to some entry(key!) of your *deployed* `my_domain[_env].properties` files..)","body":"Then &quot;your app&quot; could do (environment independently) things like: <code>myProps.get(&quot;my_domain_custom_config_password_etc&quot;);</code> (which would refer to some entry(key!) of your <i>deployed</i> <code>my_domain[_env].properties</code> files..)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665919230,"post_id":74086248,"comment_id":130807293,"body_markdown":"But for &quot;few properties&quot;, just ensure: to set them correctly (on the target environment) and read them correctly. :-)","body":"But for &quot;few properties&quot;, just ensure: to set them correctly (on the target environment) and read them correctly. :-)"},{"owner":{"account_id":25709237,"reputation":61,"user_id":19468052,"display_name":"vktop"},"score":1,"creation_date":1665919302,"post_id":74086248,"comment_id":130807311,"body_markdown":"thanks, i will try to find more info on what you said.","body":"thanks, i will try to find more info on what you said."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665919849,"post_id":74086248,"comment_id":130807400,"body_markdown":"Also note (subtle) difference between `System.getenv()` (these refers to &quot;OS  (env) vars&quot;) and `System.getProperties()` (which is a &quot;JVM Thing&quot;..and can be set via cmd/programmatically)","body":"Also note (subtle) difference between <code>System.getenv()</code> (these refers to &quot;OS  (env) vars&quot;) and <code>System.getProperties()</code> (which is a &quot;JVM Thing&quot;..and can be set via cmd/programmatically)"}],"owner":{"account_id":25709237,"reputation":61,"user_id":19468052,"display_name":"vktop"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":321,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665917505,"creation_date":1665915686,"question_id":74086248,"body_markdown":"I can&#39;t find anything on how to work with Java environments (production, development, etc) since every time I search for &quot;java environment variables&quot; I get results of how to install Java on windows and windows environment variables (JAVA_HOME) or similar things.\r\nCould someone explain how Java environments work and where to find official documentation?\r\n\r\nTo put you in context, I&#39;m a junior developer and I want to set a few different paths for my embedded database depending on whether I&#39;m in production or development.\r\nMy project doesn&#39;t have anything from spring or maven.\r\n\r\n\r\nTo better explain myself, I will give an example. In javascript, you can create files like .env , .env.development, etc. And inside them you put key value pairs. You can then retrieve that in your code. It dynamically returns the value depending on whether you are in development or production. I&#39;m looking to do the same thing in Java but in a simple way. Without having to use Spring as it is extremely advanced","title":"How to work with environements in Java (dev,prod,etc)","body":"<p>I can't find anything on how to work with Java environments (production, development, etc) since every time I search for &quot;java environment variables&quot; I get results of how to install Java on windows and windows environment variables (JAVA_HOME) or similar things.\nCould someone explain how Java environments work and where to find official documentation?</p>\n<p>To put you in context, I'm a junior developer and I want to set a few different paths for my embedded database depending on whether I'm in production or development.\nMy project doesn't have anything from spring or maven.</p>\n<p>To better explain myself, I will give an example. In javascript, you can create files like .env , .env.development, etc. And inside them you put key value pairs. You can then retrieve that in your code. It dynamically returns the value depending on whether you are in development or production. I'm looking to do the same thing in Java but in a simple way. Without having to use Spring as it is extremely advanced</p>\n"},{"tags":["java","android","react-native"],"comments":[{"owner":{"account_id":9208740,"reputation":797,"user_id":6842921,"display_name":"Usama Shahid"},"score":0,"creation_date":1665930851,"post_id":74086383,"comment_id":130809581,"body_markdown":"This library is old and was not updated from long time. Try using some one else.","body":"This library is old and was not updated from long time. Try using some one else."},{"owner":{"account_id":9208740,"reputation":797,"user_id":6842921,"display_name":"Usama Shahid"},"score":0,"creation_date":1665930868,"post_id":74086383,"comment_id":130809588,"body_markdown":"This library is old and was not updated from long time. Try using some one else.","body":"This library is old and was not updated from long time. Try using some one else."},{"owner":{"account_id":26638791,"reputation":1,"user_id":20254815,"display_name":"Jack Teng"},"score":0,"creation_date":1665979386,"post_id":74086383,"comment_id":130817909,"body_markdown":"I have found the component library of **react-native-scrollable-tab-view-forked**, but it doesn&#39;t have a ts version, so I can&#39;t use it;","body":"I have found the component library of <b>react-native-scrollable-tab-view-forked</b>, but it doesn&#39;t have a ts version, so I can&#39;t use it;"},{"owner":{"account_id":26638791,"reputation":1,"user_id":20254815,"display_name":"Jack Teng"},"score":0,"creation_date":1669257213,"post_id":74086383,"comment_id":131605360,"body_markdown":"Finally, I used the components provided by React native for secondary packaging. The usage is the same as react-native-scrollable-tab-view, and finally solved this problem.","body":"Finally, I used the components provided by React native for secondary packaging. The usage is the same as react-native-scrollable-tab-view, and finally solved this problem."}],"owner":{"account_id":26638791,"reputation":1,"user_id":20254815,"display_name":"Jack Teng"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665916747,"creation_date":1665916747,"question_id":74086383,"body_markdown":"```\r\nException java.lang.NullPointerException:\r\n  at androidx.viewpager2.adapter.FragmentStateAdapter.&lt;init&gt; (FragmentStateAdapter.java:102)\r\n  at com.reactnativecommunity.viewpager.FragmentAdapter.&lt;init&gt; (FragmentAdapter.java:19)\r\n  at com.reactnativecommunity.viewpager.ReactViewPagerManager.createViewInstance (ReactViewPagerManager.java:58)\r\n  at com.reactnativecommunity.viewpager.ReactViewPagerManager.createViewInstance (ReactViewPagerManager.java:40)\r\n  at com.facebook.react.uimanager.ViewManager.createViewInstance (ViewManager.java:140)\r\n  at com.facebook.react.uimanager.ViewManager.createView (ViewManager.java:77)\r\n  at com.facebook.react.uimanager.NativeViewHierarchyManager.createView (NativeViewHierarchyManager.java:282)\r\n  at com.facebook.react.uimanager.UIViewOperationQueue$CreateViewOperation.execute (UIViewOperationQueue.java:194)\r\n  at com.facebook.react.uimanager.UIViewOperationQueue$1.run (UIViewOperationQueue.java:908)\r\n  at com.facebook.react.uimanager.UIViewOperationQueue.flushPendingBatches (UIViewOperationQueue.java:1025)\r\n  at com.facebook.react.uimanager.UIViewOperationQueue.access$2600 (UIViewOperationQueue.java:47)\r\n  at com.facebook.react.uimanager.UIViewOperationQueue$2.runGuarded (UIViewOperationQueue.java:983)\r\n  at com.facebook.react.bridge.GuardedRunnable.run (GuardedRunnable.java:31)\r\n  at android.os.Handler.handleCallback (Handler.java:938)\r\n  at android.os.Handler.dispatchMessage (Handler.java:99)\r\n  at android.os.Looper.loopOnce (Looper.java:233)\r\n  at android.os.Looper.loop (Looper.java:344)\r\n  at android.app.ActivityThread.main (ActivityThread.java:8212)\r\n  at java.lang.reflect.Method.invoke (Method.java)\r\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:584)\r\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1034)\r\n```\r\n\r\n\r\n\r\n**My problem should be caused by it, but I don&#39;t know the specific reason. Can anyone please help me and how should I solve this problem;**\r\n\r\npackage.json\r\n ```\r\n&quot;react-native-scrollable-tab-view&quot;: &quot;^1.0.0&quot;\r\n```","title":"React Native com.reactnativecommunity.viewpager.FragmentAdapter.&lt;init&gt; ( android ANR)","body":"<pre><code>Exception java.lang.NullPointerException:\n  at androidx.viewpager2.adapter.FragmentStateAdapter.&lt;init&gt; (FragmentStateAdapter.java:102)\n  at com.reactnativecommunity.viewpager.FragmentAdapter.&lt;init&gt; (FragmentAdapter.java:19)\n  at com.reactnativecommunity.viewpager.ReactViewPagerManager.createViewInstance (ReactViewPagerManager.java:58)\n  at com.reactnativecommunity.viewpager.ReactViewPagerManager.createViewInstance (ReactViewPagerManager.java:40)\n  at com.facebook.react.uimanager.ViewManager.createViewInstance (ViewManager.java:140)\n  at com.facebook.react.uimanager.ViewManager.createView (ViewManager.java:77)\n  at com.facebook.react.uimanager.NativeViewHierarchyManager.createView (NativeViewHierarchyManager.java:282)\n  at com.facebook.react.uimanager.UIViewOperationQueue$CreateViewOperation.execute (UIViewOperationQueue.java:194)\n  at com.facebook.react.uimanager.UIViewOperationQueue$1.run (UIViewOperationQueue.java:908)\n  at com.facebook.react.uimanager.UIViewOperationQueue.flushPendingBatches (UIViewOperationQueue.java:1025)\n  at com.facebook.react.uimanager.UIViewOperationQueue.access$2600 (UIViewOperationQueue.java:47)\n  at com.facebook.react.uimanager.UIViewOperationQueue$2.runGuarded (UIViewOperationQueue.java:983)\n  at com.facebook.react.bridge.GuardedRunnable.run (GuardedRunnable.java:31)\n  at android.os.Handler.handleCallback (Handler.java:938)\n  at android.os.Handler.dispatchMessage (Handler.java:99)\n  at android.os.Looper.loopOnce (Looper.java:233)\n  at android.os.Looper.loop (Looper.java:344)\n  at android.app.ActivityThread.main (ActivityThread.java:8212)\n  at java.lang.reflect.Method.invoke (Method.java)\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:584)\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1034)\n</code></pre>\n<p><strong>My problem should be caused by it, but I don't know the specific reason. Can anyone please help me and how should I solve this problem;</strong></p>\n<p>package.json</p>\n<pre><code>&quot;react-native-scrollable-tab-view&quot;: &quot;^1.0.0&quot;\n</code></pre>\n"},{"tags":["java","windowbuilder"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665919128,"post_id":74086327,"comment_id":130807283,"body_markdown":"What Eclipse version are you using? What Java version are you using? What platform are you on?","body":"What Eclipse version are you using? What Java version are you using? What platform are you on?"},{"owner":{"account_id":26606397,"reputation":1,"user_id":20227156,"display_name":"Prakash Irom"},"score":0,"creation_date":1665922793,"post_id":74086327,"comment_id":130807963,"body_markdown":"@Abra Java version is 8 but for eclipse I don&#39;t know which version but it&#39;s released date is 2022/09, Windows 11","body":"@Abra Java version is 8 but for eclipse I don&#39;t know which version but it&#39;s released date is 2022/09, Windows 11"},{"owner":{"account_id":26606397,"reputation":1,"user_id":20227156,"display_name":"Prakash Irom"},"score":0,"creation_date":1665984345,"post_id":74086327,"comment_id":130818525,"body_markdown":"@Abra can u please help me resolve this","body":"@Abra can u please help me resolve this"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1665984550,"post_id":74086327,"comment_id":130818555,"body_markdown":"No, I can&#39;t. Try  the _WindowBuilder_ [forum](https://www.eclipse.org/forums/index.php?t=thread&amp;frm_id=214)","body":"No, I can&#39;t. Try  the <i>WindowBuilder</i> <a href=\"https://www.eclipse.org/forums/index.php?t=thread&amp;frm_id=214\" rel=\"nofollow noreferrer\">forum</a>"}],"owner":{"account_id":26606397,"reputation":1,"user_id":20227156,"display_name":"Prakash Irom"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665916456,"creation_date":1665916337,"question_id":74086327,"body_markdown":"I have installed window builder on my eclipse and when I tried to use the design tab, the window is not showing properly and I cannot use any of the features present in the palette window. And you can see it from the photo that the minimize,maximize,close is missing in the window.\r\n\r\n\r\n\r\n  [issue photo here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u2S0e.png","title":"How can I solve this window builder issue in eclipse?","body":"<p>I have installed window builder on my eclipse and when I tried to use the design tab, the window is not showing properly and I cannot use any of the features present in the palette window. And you can see it from the photo that the minimize,maximize,close is missing in the window.</p>\n<p><a href=\"https://i.stack.imgur.com/u2S0e.png\" rel=\"nofollow noreferrer\">issue photo here</a></p>\n"},{"tags":["java","eclipse","eclipse-plugin","pydev"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1665824858,"post_id":74077053,"comment_id":130792444,"body_markdown":"What happens? What does the right click &quot;Open With...&quot; menu show?","body":"What happens? What does the right click &quot;Open With...&quot; menu show?"},{"owner":{"display_name":"user18070793"},"score":0,"creation_date":1665829880,"post_id":74077053,"comment_id":130793330,"body_markdown":"It&#39;s set to java editor. Also right click menu and clicking &quot;Open&quot; works","body":"It&#39;s set to java editor. Also right click menu and clicking &quot;Open&quot; works"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1665882409,"post_id":74077053,"comment_id":130802744,"body_markdown":"What happens instead of opening? Does anything get added to the Error Log?","body":"What happens instead of opening? Does anything get added to the Error Log?"},{"owner":{"display_name":"user18070793"},"score":0,"creation_date":1665889578,"post_id":74077053,"comment_id":130803411,"body_markdown":"Nope, Nothing added to error log, Just does nothing.","body":"Nope, Nothing added to error log, Just does nothing."}],"answers":[{"comments":[{"owner":{"account_id":38479,"reputation":24939,"user_id":110451,"accept_rate":75,"display_name":"Fabio Zadrozny"},"score":0,"creation_date":1665919355,"post_id":74086344,"comment_id":130807319,"body_markdown":"As a note, I&#39;ve just fixed this in https://github.com/fabioz/Pydev/commit/86dc8967daa3ca1dcd5c5585a0398dde3f9c8d36 (so, a fix will be available in the next release -- probably in something as `PyDev 10.0.1`).","body":"As a note, I&#39;ve just fixed this in <a href=\"https://github.com/fabioz/Pydev/commit/86dc8967daa3ca1dcd5c5585a0398dde3f9c8d36\" rel=\"nofollow noreferrer\">github.com/fabioz/Pydev/commit/&hellip;</a> (so, a fix will be available in the next release -- probably in something as <code>PyDev 10.0.1</code>)."},{"owner":{"display_name":"user18070793"},"score":0,"creation_date":1665948427,"post_id":74086344,"comment_id":130813480,"body_markdown":"Where can I get PyDev 10.0.1?","body":"Where can I get PyDev 10.0.1?"},{"owner":{"account_id":38479,"reputation":24939,"user_id":110451,"accept_rate":75,"display_name":"Fabio Zadrozny"},"score":0,"creation_date":1666000395,"post_id":74086344,"comment_id":130823060,"body_markdown":"When the next release is done (it&#39;s still not released).","body":"When the next release is done (it&#39;s still not released)."}],"tags":[],"owner":{"account_id":38479,"reputation":24939,"user_id":110451,"accept_rate":75,"display_name":"Fabio Zadrozny"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665916450,"creation_date":1665916450,"answer_id":74086344,"question_id":74077053,"body_markdown":"This was some regression en Eclipse itself (as nothing changed in the area in PyDev in many years but Eclipse `2022-03` started misbehaving when the `PyDev Navigator Content` is enabled in the `Project Explorer` -- or maybe they fixed some bug that PyDev relied on \t&#128516;).\r\n\r\nI still need to investigate if this is fixable in the PyDev side...\r\n\r\nRight now the workarounds available are:\r\n\r\n1. Don&#39;t use the `Project Explorer` (i.e.: keep to the `Package Explorer` or `PyDev Package Explorer`).\r\n2. Disable `PyDev Navigator Content` in the `Project Explorer` (see image below).\r\n\r\n[![Disable PyDev Navigator Content in the `Project Explorer`][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bzUwT.png","title":"Unable to open *.java files in eclipse after installing PyDev","body":"<p>This was some regression en Eclipse itself (as nothing changed in the area in PyDev in many years but Eclipse <code>2022-03</code> started misbehaving when the <code>PyDev Navigator Content</code> is enabled in the <code>Project Explorer</code> -- or maybe they fixed some bug that PyDev relied on    😄).</p>\n<p>I still need to investigate if this is fixable in the PyDev side...</p>\n<p>Right now the workarounds available are:</p>\n<ol>\n<li>Don't use the <code>Project Explorer</code> (i.e.: keep to the <code>Package Explorer</code> or <code>PyDev Package Explorer</code>).</li>\n<li>Disable <code>PyDev Navigator Content</code> in the <code>Project Explorer</code> (see image below).</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/bzUwT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bzUwT.png\" alt=\"Disable PyDev Navigator Content in the Project Explorer\" /></a></p>\n"}],"owner":{"display_name":"user18070793"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1666009128,"accepted_answer_id":74086344,"answer_count":1,"score":0,"last_activity_date":1665916450,"creation_date":1665813433,"question_id":74077053,"body_markdown":"I installed PyDev in eclipse to add support for python,\r\n\r\nit&#39;s was going great until I found out I cannot open *.java files anymore, but when I uninstall PyDev, I can open *.java files.\r\n\r\nCan anyone explain?","title":"Unable to open *.java files in eclipse after installing PyDev","body":"<p>I installed PyDev in eclipse to add support for python,</p>\n<p>it's was going great until I found out I cannot open *.java files anymore, but when I uninstall PyDev, I can open *.java files.</p>\n<p>Can anyone explain?</p>\n"},{"tags":["java","css","gluon-mobile","javafx-11"],"comments":[{"owner":{"account_id":24388177,"reputation":3,"user_id":18318589,"display_name":"Joseph Sekwa"},"score":0,"creation_date":1665826174,"post_id":74078187,"comment_id":130792680,"body_markdown":"@Jos&#233; Pereda I have searched to gluon documentation without any success, now I need you assist. Thanks","body":"@Jos&#233; Pereda I have searched to gluon documentation without any success, now I need you assist. Thanks"}],"answers":[{"comments":[{"owner":{"account_id":24388177,"reputation":3,"user_id":18318589,"display_name":"Joseph Sekwa"},"score":0,"creation_date":1665852079,"post_id":74080036,"comment_id":130797867,"body_markdown":"Thanks you so much @Jos&#233; Pereda everything is working fine now.","body":"Thanks you so much @Jos&#233; Pereda everything is working fine now."}],"tags":[],"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665841981,"creation_date":1665841981,"answer_id":74080036,"question_id":74078187,"body_markdown":"To style any JavaFX node with CSS, you mainly need to know its CSS style class, and the ones from its ancestors.\r\n\r\nOne way to know this is by printing out the hierarchy involved in the `NavigationDrawer`, like:\r\n\r\n```\r\n    @Override\r\n    public void init() {\r\n        AppViewManager.registerViewsAndDrawer();\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n        appManager.start(primaryStage);\r\n\r\n        appManager.getDrawer().getStyleClass()\r\n                .forEach(css -&gt; System.out.println(&quot;drawer css = &quot; + css));\r\n        appManager.getDrawer().getItems()\r\n                .forEach(item -&gt; item.getStyleClass()\r\n                        .forEach(css -&gt; System.out.println(&quot;  - item css = &quot; + css)));\r\n    }\r\n```\r\n\r\nthat will print:\r\n```\r\ndrawer css = navigation-drawer\r\n  - item css = item\r\n  - item css = item\r\n  - item css = item\r\n```\r\n\r\nSo now, for instance, you could add this to your `style.css` file:\r\n\r\n```\r\n.navigation-drawer .item .label {\r\n    -fx-font-size: 18px;\r\n    -fx-text-fill: red;\r\n}\r\n```\r\nand that will give you:\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/ET7kL.png&quot; width=&quot;300&quot;&gt;&lt;/img&gt;\r\n\r\nWhile the font color is changed, the font size isn&#39;t. This is because there is a more restrictive rule that comes from Gluon Mobile stylesheets that takes precedence. \r\n\r\nThis means that you need to find out the full chain of ancestors. For this, it comes in handy [Scenic View](https://github.com/JonathanGiles/scenic-view).\r\n\r\nYou can download it for your OS from [here](https://github.com/JonathanGiles/scenic-view#build-status).\r\nIt requires that JavaFX Swing dependency is added to your project (at least while testing).\r\n\r\nThen launch Scenic View, and start your project, you should be able to see the tree of nodes showing up.\r\n\r\n[![scenic view][1]][1]\r\n\r\nIf you check one by one the ancestors of the label, you can come up with this:\r\n\r\n```\r\n.navigation-drawer &gt; BorderPane &gt; .scroll-pane &gt; .viewport .container &gt; .item &gt; .item-content &gt; .text-box &gt; .label {\r\n    -fx-font-size: 18px;\r\n    -fx-text-fill: red;\r\n}\r\n```\r\nthat will give you:\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/wlhWi.png&quot; width=&quot;300&quot;&gt;&lt;/img&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/H2xyG.jpg\r\n","title":"How to change font size of navigation drawer items title in gluon mobile javafx with css?","body":"<p>To style any JavaFX node with CSS, you mainly need to know its CSS style class, and the ones from its ancestors.</p>\n<p>One way to know this is by printing out the hierarchy involved in the <code>NavigationDrawer</code>, like:</p>\n<pre><code>    @Override\n    public void init() {\n        AppViewManager.registerViewsAndDrawer();\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        appManager.start(primaryStage);\n\n        appManager.getDrawer().getStyleClass()\n                .forEach(css -&gt; System.out.println(&quot;drawer css = &quot; + css));\n        appManager.getDrawer().getItems()\n                .forEach(item -&gt; item.getStyleClass()\n                        .forEach(css -&gt; System.out.println(&quot;  - item css = &quot; + css)));\n    }\n</code></pre>\n<p>that will print:</p>\n<pre><code>drawer css = navigation-drawer\n  - item css = item\n  - item css = item\n  - item css = item\n</code></pre>\n<p>So now, for instance, you could add this to your <code>style.css</code> file:</p>\n<pre><code>.navigation-drawer .item .label {\n    -fx-font-size: 18px;\n    -fx-text-fill: red;\n}\n</code></pre>\n<p>and that will give you:</p>\n<p><img src=\"https://i.stack.imgur.com/ET7kL.png\" width=\"300\"></p>\n<p>While the font color is changed, the font size isn't. This is because there is a more restrictive rule that comes from Gluon Mobile stylesheets that takes precedence.</p>\n<p>This means that you need to find out the full chain of ancestors. For this, it comes in handy <a href=\"https://github.com/JonathanGiles/scenic-view\" rel=\"nofollow noreferrer\">Scenic View</a>.</p>\n<p>You can download it for your OS from <a href=\"https://github.com/JonathanGiles/scenic-view#build-status\" rel=\"nofollow noreferrer\">here</a>.\nIt requires that JavaFX Swing dependency is added to your project (at least while testing).</p>\n<p>Then launch Scenic View, and start your project, you should be able to see the tree of nodes showing up.</p>\n<p><a href=\"https://i.stack.imgur.com/H2xyG.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H2xyG.jpg\" alt=\"scenic view\" /></a></p>\n<p>If you check one by one the ancestors of the label, you can come up with this:</p>\n<pre><code>.navigation-drawer &gt; BorderPane &gt; .scroll-pane &gt; .viewport .container &gt; .item &gt; .item-content &gt; .text-box &gt; .label {\n    -fx-font-size: 18px;\n    -fx-text-fill: red;\n}\n</code></pre>\n<p>that will give you:</p>\n<p><img src=\"https://i.stack.imgur.com/wlhWi.png\" width=\"300\"></p>\n"}],"owner":{"account_id":24388177,"reputation":3,"user_id":18318589,"display_name":"Joseph Sekwa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":74080036,"answer_count":1,"score":-2,"last_activity_date":1665915661,"creation_date":1665825693,"question_id":74078187,"body_markdown":"I am developing a simple mobile application with gluon mobile javafx, unfortunately I have came accross to a problem of styling navigation drawer items&#39; title with css. If anyone knows how to do that, he or she may help me. Thanks.","title":"How to change font size of navigation drawer items title in gluon mobile javafx with css?","body":"<p>I am developing a simple mobile application with gluon mobile javafx, unfortunately I have came accross to a problem of styling navigation drawer items' title with css. If anyone knows how to do that, he or she may help me. Thanks.</p>\n"},{"tags":["java","algorithm","matrix","time-complexity"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1665095359,"post_id":73980567,"comment_id":130625743,"body_markdown":"What have you tried so far, even if you regard it as inefficient?","body":"What have you tried so far, even if you regard it as inefficient?"},{"owner":{"account_id":365547,"reputation":4033,"user_id":710530,"accept_rate":67,"display_name":"DavidA"},"score":3,"creation_date":1665095788,"post_id":73980567,"comment_id":130625818,"body_markdown":"How far can you keep dividing?  Seems to me that answer #1 could continue to divide the 2x2 grid.  And if you can keep dividing, what is the smallest grid that can&#39;t be divided?  1x1, or 1x2 and 2x1, or what?","body":"How far can you keep dividing?  Seems to me that answer #1 could continue to divide the 2x2 grid.  And if you can keep dividing, what is the smallest grid that can&#39;t be divided?  1x1, or 1x2 and 2x1, or what?"},{"owner":{"account_id":365547,"reputation":4033,"user_id":710530,"accept_rate":67,"display_name":"DavidA"},"score":2,"creation_date":1665096009,"post_id":73980567,"comment_id":130625861,"body_markdown":"Also, when you say &#39;efficiently&#39; do you mean from a programming perspective, or from a runtime perspective?","body":"Also, when you say &#39;efficiently&#39; do you mean from a programming perspective, or from a runtime perspective?"},{"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"score":0,"creation_date":1665096095,"post_id":73980567,"comment_id":130625877,"body_markdown":"@DavidA, I updated the post with required information now","body":"@DavidA, I updated the post with required information now"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1665684793,"post_id":73980567,"comment_id":130762797,"body_markdown":"Off topic: I  don&#39;t yet see how converting it to a binary matrix helps. There isn&#39;t going to be much difference in `if (mat [i][j] ==2)`, `if (mat [i][j] == 1)`, or `if (mat [i][j])` where `mat` is `int [][]` in the first two, and `boolean [][]` in the third.","body":"Off topic: I  don&#39;t yet see how converting it to a binary matrix helps. There isn&#39;t going to be much difference in <code>if (mat [i][j] ==2)</code>, <code>if (mat [i][j] == 1)</code>, or <code>if (mat [i][j])</code> where <code>mat</code> is <code>int [][]</code> in the first two, and <code>boolean [][]</code> in the third."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1665684868,"post_id":73980567,"comment_id":130762815,"body_markdown":"If a matrix contains no cell with value `2`, what should the result be?  If it contains exactly 1 cell with value `2`?","body":"If a matrix contains no cell with value <code>2</code>, what should the result be?  If it contains exactly 1 cell with value <code>2</code>?"}],"answers":[{"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1665471304,"post_id":74011984,"comment_id":130701610,"body_markdown":"@greybeard OK, I have updated my answer to support two vertical splits or two horizontal splits, but in this case there are 6 possibilities.","body":"@greybeard OK, I have updated my answer to support two vertical splits or two horizontal splits, but in this case there are 6 possibilities."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":1,"creation_date":1665484153,"post_id":74011984,"comment_id":130705886,"body_markdown":"(6 distinct sequences of divisions/splits leading to five distinct configurations of &quot;single-2-parts&quot;: What *is* one *possibility*?)","body":"(6 distinct sequences of divisions/splits leading to five distinct configurations of &quot;single-2-parts&quot;: What <i>is</i> one <i>possibility</i>?)"},{"owner":{"account_id":7359583,"reputation":11343,"user_id":5603247,"display_name":"Hans Olsson"},"score":0,"creation_date":1665487436,"post_id":74011984,"comment_id":130707034,"body_markdown":"True, and it&#39;s both five distinct configurations of single-2-parts and five distinct division-drawings in that case (ignoring the order they are drawn in). But for a 2x2 grid filled by 2s there is only one configuration of single-2-parts, but two different division-drawings (horizontal or vertical unbroken).","body":"True, and it&#39;s both five distinct configurations of single-2-parts and five distinct division-drawings in that case (ignoring the order they are drawn in). But for a 2x2 grid filled by 2s there is only one configuration of single-2-parts, but two different division-drawings (horizontal or vertical unbroken)."}],"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665471137,"creation_date":1665389968,"answer_id":74011984,"question_id":73980567,"body_markdown":"I&#39;m not sur I understand your question fully, but here are my two cents:\r\n\r\nStart by defining a method that checks that a subgrid contains at least one 2:\r\n\r\n\r\n    public static boolean contains2(int[][] grid, int rs, int re, int cs, int ce) {\r\n        for (int i = rs; i &lt; re; i++) {\r\n            for (int j = cs; j &lt; ce; j++) {\r\n                if (grid[i][j] == 2) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\nNext, you can define a method returning the number of possible horizontal splits of a subgrid:\r\n\r\n\r\n    public static int splitCountH(int[][] grid, int rs, int re, int cs, int ce) {\r\n        int result = 0;\r\n        for (int i = rs+1; i &lt; re; ++i) {\r\n            if (contains2(grid, rs, i, cs, ce) &amp;&amp; contains2(grid, i, re, cs, ce)) {\r\n                ++result;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nand another one giving the number of possible vertical splits:\r\n\r\n    public static int splitCountV(int[][] grid, int rs, int re, int cs, int ce) {\r\n        int result = 0;\r\n        for (int j = cs+1; j &lt; ce; ++j) {\r\n            if (contains2(grid, rs, re, cs, j) &amp;&amp; contains2(grid, rs, re, j, ce)) {\r\n                ++result;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nNext method gives the number of possible combinations of a horizontal split followed by a vertical split or a vertical split followed by a horizontal split:\r\n\r\n    public static int process(int[][] grid, int rs, int re, int cs, int ce) {\r\n        int result = 0;\r\n        for (int i = rs+1; i &lt; re; ++i) {\r\n            if (contains2(grid, rs, i, cs, ce) &amp;&amp; contains2(grid, i, re, cs, ce)) {\r\n                result += splitCountV(grid, rs, i, cs, ce)\r\n                        + splitCountV(grid, i, re, cs, ce);\r\n            }\r\n        }\r\n        for (int j = cs+1; j &lt; ce; ++j) {\r\n            if (contains2(grid, rs, re, cs, j) &amp;&amp; contains2(grid, rs, re, j, ce)) {\r\n                result += splitCountH(grid, rs, re, cs, j)\r\n                        + splitCountH(grid, rs, re, j, ce);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nYour process method becomes:\r\n\r\n    public static int process(int[][] grid) {\r\n        return process(grid, 0, grid.length, 0, grid[0].length);\r\n    }\r\n\r\nUPDATE:\r\n\r\nIf you want to authorize two horizontal splits or two vertical splits, you can add the following method:\r\n\r\n\r\n    public static int splitCount(int[][] grid, int rs, int re, int cs, int ce) {\r\n        return splitCountH(grid, rs, re, cs, ce)\r\n                + splitCountV(grid, rs, re, cs, ce);\r\n    }\r\n\r\nAnd modify the `process` method:\r\n\r\n\r\n    public static int process(int[][] grid, int rs, int re, int cs, int ce) {\r\n        int result = 0;\r\n        for (int i = rs+1; i &lt; re; ++i) {\r\n            if (contains2(grid, rs, i, cs, ce) &amp;&amp; contains2(grid, i, re, cs, ce)) {\r\n                result += splitCount(grid, rs, i, cs, ce)\r\n                        + splitCount(grid, i, re, cs, ce);\r\n            }\r\n        }\r\n        for (int j = cs+1; j &lt; ce; ++j) {\r\n            if (contains2(grid, rs, re, cs, j) &amp;&amp; contains2(grid, rs, re, j, ce)) {\r\n                result += splitCount(grid, rs, re, cs, j)\r\n                        + splitCount(grid, rs, re, j, ce);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nBut in this case, you would have 6 possibilities for your example.\r\n","title":"Divide a grid into several possibilities","body":"<p>I'm not sur I understand your question fully, but here are my two cents:</p>\n<p>Start by defining a method that checks that a subgrid contains at least one 2:</p>\n<pre><code>public static boolean contains2(int[][] grid, int rs, int re, int cs, int ce) {\n    for (int i = rs; i &lt; re; i++) {\n        for (int j = cs; j &lt; ce; j++) {\n            if (grid[i][j] == 2) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n</code></pre>\n<p>Next, you can define a method returning the number of possible horizontal splits of a subgrid:</p>\n<pre><code>public static int splitCountH(int[][] grid, int rs, int re, int cs, int ce) {\n    int result = 0;\n    for (int i = rs+1; i &lt; re; ++i) {\n        if (contains2(grid, rs, i, cs, ce) &amp;&amp; contains2(grid, i, re, cs, ce)) {\n            ++result;\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>and another one giving the number of possible vertical splits:</p>\n<pre><code>public static int splitCountV(int[][] grid, int rs, int re, int cs, int ce) {\n    int result = 0;\n    for (int j = cs+1; j &lt; ce; ++j) {\n        if (contains2(grid, rs, re, cs, j) &amp;&amp; contains2(grid, rs, re, j, ce)) {\n            ++result;\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>Next method gives the number of possible combinations of a horizontal split followed by a vertical split or a vertical split followed by a horizontal split:</p>\n<pre><code>public static int process(int[][] grid, int rs, int re, int cs, int ce) {\n    int result = 0;\n    for (int i = rs+1; i &lt; re; ++i) {\n        if (contains2(grid, rs, i, cs, ce) &amp;&amp; contains2(grid, i, re, cs, ce)) {\n            result += splitCountV(grid, rs, i, cs, ce)\n                    + splitCountV(grid, i, re, cs, ce);\n        }\n    }\n    for (int j = cs+1; j &lt; ce; ++j) {\n        if (contains2(grid, rs, re, cs, j) &amp;&amp; contains2(grid, rs, re, j, ce)) {\n            result += splitCountH(grid, rs, re, cs, j)\n                    + splitCountH(grid, rs, re, j, ce);\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>Your process method becomes:</p>\n<pre><code>public static int process(int[][] grid) {\n    return process(grid, 0, grid.length, 0, grid[0].length);\n}\n</code></pre>\n<p>UPDATE:</p>\n<p>If you want to authorize two horizontal splits or two vertical splits, you can add the following method:</p>\n<pre><code>public static int splitCount(int[][] grid, int rs, int re, int cs, int ce) {\n    return splitCountH(grid, rs, re, cs, ce)\n            + splitCountV(grid, rs, re, cs, ce);\n}\n</code></pre>\n<p>And modify the <code>process</code> method:</p>\n<pre><code>public static int process(int[][] grid, int rs, int re, int cs, int ce) {\n    int result = 0;\n    for (int i = rs+1; i &lt; re; ++i) {\n        if (contains2(grid, rs, i, cs, ce) &amp;&amp; contains2(grid, i, re, cs, ce)) {\n            result += splitCount(grid, rs, i, cs, ce)\n                    + splitCount(grid, i, re, cs, ce);\n        }\n    }\n    for (int j = cs+1; j &lt; ce; ++j) {\n        if (contains2(grid, rs, re, cs, j) &amp;&amp; contains2(grid, rs, re, j, ce)) {\n            result += splitCount(grid, rs, re, cs, j)\n                    + splitCount(grid, rs, re, j, ce);\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>But in this case, you would have 6 possibilities for your example.</p>\n"},{"comments":[{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":1,"creation_date":1665480998,"post_id":74025972,"comment_id":130704812,"body_markdown":"*&quot;Specification&quot; by example* is error-prone.","body":"<i>&quot;Specification&quot; by example</i> is error-prone."},{"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"score":0,"creation_date":1665530125,"post_id":74025972,"comment_id":130721135,"body_markdown":"We have to divide horizontally then next sub divisions. Otherwise divide it vertically then sub divisions. In that case we can get only 4 possibilities. The new combination mentioned here is not valid one.","body":"We have to divide horizontally then next sub divisions. Otherwise divide it vertically then sub divisions. In that case we can get only 4 possibilities. The new combination mentioned here is not valid one."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1665550794,"post_id":74025972,"comment_id":130724125,"body_markdown":"&quot;The new combination&quot; is first divide vertically in two left columns and one right column, containing a single 2 and not divisible any further. Then divide the two left columns into a top row and a two-by-two &quot;bottom&quot; sub-matrix. It is to &quot;possibility (4)&quot; what 2 is to 1. Every part shown contains a 2. *How* would this combination be *not* valid? If it is invalid, and you don&#39;t find the *why* in the question, please add it *there*.","body":"&quot;The new combination&quot; is first divide vertically in two left columns and one right column, containing a single 2 and not divisible any further. Then divide the two left columns into a top row and a two-by-two &quot;bottom&quot; sub-matrix. It is to &quot;possibility (4)&quot; what 2 is to 1. Every part shown contains a 2. <i>How</i> would this combination be <i>not</i> valid? If it is invalid, and you don&#39;t find the <i>why</i> in the question, please add it <i>there</i>."}],"tags":[],"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665915256,"creation_date":1665480950,"answer_id":74025972,"question_id":73980567,"body_markdown":"&gt; **Below are the 4 possibilities.**\r\n&gt; &lt;pre&gt;\r\n&gt;  (1)    (2)    (3)    (4)\r\n&gt; \r\n&gt; 1 2 3  1 2 3  1|2|3  1|2 3\r\n&gt; -----  -----   | |    |---\r\n&gt; 2|1 2  2 1|2  2|1|2  2|1 2\r\n&gt;  |        |    | |    |\r\n&gt; 3|1 1  3 1|1  3|1|1  3|1 1\r\n&gt; &lt;/pre&gt;\r\n\r\nWhat about\r\n&lt;pre&gt;\r\n (V)\r\n\r\n1 2|3\r\n---| \r\n2 1|2\r\n   | \r\n3 1|1\r\n&lt;/pre&gt;\r\n?\r\n&lt;pre&gt;\r\n (VI)  (VII)  (VIII)\r\n1 2 3  1 2|3  1|2 3\r\n-----     |    |\r\n2 1 2  2 1|2  2|1 2\r\n          |    |\r\n3 1 1  3 1|1  3|1 1\r\n&lt;/pre&gt;\r\n? *each division must contain **at least** one cell with value 2*","title":"Divide a grid into several possibilities","body":"<blockquote>\n<p><strong>Below are the 4 possibilities.</strong></p>\n<pre>\n (1)    (2)    (3)    (4)\n\n1 2 3  1 2 3  1|2|3  1|2 3\n-----  -----   | |    |---\n2|1 2  2 1|2  2|1|2  2|1 2\n |        |    | |    |\n3|1 1  3 1|1  3|1|1  3|1 1\n</pre>\n</blockquote>\n<p>What about</p>\n<pre>\n (V)\n\n1 2|3\n---| \n2 1|2\n   | \n3 1|1\n</pre>\n<p>?</p>\n<pre>\n (VI)  (VII)  (VIII)\n1 2 3  1 2|3  1|2 3\n-----     |    |\n2 1 2  2 1|2  2|1 2\n          |    |\n3 1 1  3 1|1  3|1 1\n</pre>\n<p>? <em>each division must contain <strong>at least</strong> one cell with value 2</em></p>\n"},{"comments":[{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1665902267,"post_id":74073356,"comment_id":130804616,"body_markdown":"So, *how many divisions are possible for given grid values* in this example?","body":"So, <i>how many divisions are possible for given grid values</i> in this example?"},{"owner":{"account_id":82668,"reputation":174,"user_id":232259,"display_name":"Jason Brown"},"score":0,"creation_date":1665930302,"post_id":74073356,"comment_id":130809458,"body_markdown":"Depends on how you count it. The original question isn’t super clear on what counts. Do you count divisions that could then be sub divided or only unique patterns once all divisions have been made?","body":"Depends on how you count it. The original question isn’t super clear on what counts. Do you count divisions that could then be sub divided or only unique patterns once all divisions have been made?"},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1665933821,"post_id":74073356,"comment_id":130810239,"body_markdown":"I [tried for a week](https://stackoverflow.com/a/74025972/3789665) to get the question improved there. My money would be on 5 for the equivalence of the &quot;single column possibilities&quot; arrived at in two different sequences.","body":"I <a href=\"https://stackoverflow.com/a/74025972/3789665\">tried for a week</a> to get the question improved there. My money would be on 5 for the equivalence of the &quot;single column possibilities&quot; arrived at in two different sequences."}],"tags":[],"owner":{"account_id":82668,"reputation":174,"user_id":232259,"display_name":"Jason Brown"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665772019,"creation_date":1665771715,"answer_id":74073356,"question_id":73980567,"body_markdown":"Recursion is going to be your friend here.  Sorry I did this in Python instead of Java, but the algorithm will be the same.  Essentially, divide the grid and test to see if there&#39;s a 2 on either side.  If there is, recurse each side until there&#39;s not.\r\n\r\n```python\r\nimport itertools\r\n\r\ngrid = [ 1, 2, 3\r\n       , 2, 1, 2\r\n       , 3, 1, 1 ]\r\n    \r\ndef print_horz( top, trows, bottom, brows, columns, depth ):\r\n    for m in range( trows ):\r\n        print( &#39;    &#39; * depth, top[ m * columns : ( m + 1 ) * columns ] )\r\n    print( &#39;    &#39; * depth, &#39;-&#39; * columns )\r\n    for m in range( brows ):\r\n        print( &#39;    &#39; * depth, bottom[ m * columns : ( m + 1 ) * columns ] )\r\n    print()\r\n    \r\ndef print_vert( left, lcolumns, right, rcolumns, rows, depth ):\r\n    for m in range( rows ):\r\n        print( &#39;    &#39; * depth\r\n            , left[ m * lcolumns : ( m + 1 ) * lcolumns ]\r\n            , &#39;|&#39;\r\n            , right[ m * rcolumns : ( m + 1 ) * rcolumns ] )\r\n    print()\r\n    \r\ndef divide_grid( grid, rows, columns, depth = 0 ):\r\n    if grid.count( 2 ) &lt; 2:\r\n        return\r\n    \r\n    #print( &#39;    &#39; * depth, &#39;grid&#39;, grid, depth )\r\n    for m in range( rows - 1 ):\r\n        top = grid[ : ( m + 1 ) * columns ]\r\n        bottom = grid[ ( m + 1 ) * columns : ]\r\n        #print( &#39;    &#39; * depth, &#39;horz {}/{}/{}&#39;.format( m, rows - 1, depth), top, ( m + 1 ), bottom, rows - ( m + 1 ), columns )\r\n        if 2 in top and 2 in bottom:\r\n            print_horz( top, ( m + 1 ), bottom, rows - ( m + 1 ), columns, depth )\r\n    \r\n            divide_grid( top, ( m + 1 ), columns, depth + 1 )\r\n            divide_grid( bottom, rows - ( m + 1 ), columns, depth + 1 )\r\n    \r\n    for n in range( columns - 1 ):\r\n        left = list( itertools.chain.from_iterable(\r\n            [ grid[ m * columns : ( m + 1 ) * columns ][ : ( n + 1 ) ] for m in range( rows ) ] ) )\r\n        right = list( itertools.chain.from_iterable(\r\n            [ grid[ m * columns : ( m + 1 ) * columns ][ ( n + 1 ) : ] for m in range( rows ) ] ) )\r\n        #print( &#39;    &#39; * depth, &#39;vert {}/{}/{}&#39;.format( n, columns - 1, depth), left, ( n + 1 ), right, columns - ( n + 1 ), rows )\r\n        if 2 in left and 2 in right:\r\n            print_vert( left, ( n + 1 ), right, columns - ( n + 1 ), rows, depth )\r\n    \r\n            divide_grid( left, rows, ( n + 1 ), depth + 1 )\r\n            divide_grid( right, rows, columns - ( n + 1 ), depth + 1 )\r\n    \r\ndivide_grid( grid, 3, 3 )\r\n```\r\n\r\nResults\r\n\r\n     [1, 2, 3]\r\n     ---\r\n     [2, 1, 2]\r\n     [3, 1, 1]\r\n    \r\n         [2] | [1, 2]\r\n         [3] | [1, 1]\r\n    \r\n         [2, 1] | [2]\r\n         [3, 1] | [1]\r\n    \r\n     [1] | [2, 3]\r\n     [2] | [1, 2]\r\n     [3] | [1, 1]\r\n    \r\n         [2, 3]\r\n         --\r\n         [1, 2]\r\n         [1, 1]\r\n    \r\n         [2] | [3]\r\n         [1] | [2]\r\n         [1] | [1]\r\n    \r\n     [1, 2] | [3]\r\n     [2, 1] | [2]\r\n     [3, 1] | [1]\r\n    \r\n         [1, 2]\r\n         --\r\n         [2, 1]\r\n         [3, 1]\r\n    \r\n         [1] | [2]\r\n         [2] | [1]\r\n         [3] | [1]","title":"Divide a grid into several possibilities","body":"<p>Recursion is going to be your friend here.  Sorry I did this in Python instead of Java, but the algorithm will be the same.  Essentially, divide the grid and test to see if there's a 2 on either side.  If there is, recurse each side until there's not.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import itertools\n\ngrid = [ 1, 2, 3\n       , 2, 1, 2\n       , 3, 1, 1 ]\n    \ndef print_horz( top, trows, bottom, brows, columns, depth ):\n    for m in range( trows ):\n        print( '    ' * depth, top[ m * columns : ( m + 1 ) * columns ] )\n    print( '    ' * depth, '-' * columns )\n    for m in range( brows ):\n        print( '    ' * depth, bottom[ m * columns : ( m + 1 ) * columns ] )\n    print()\n    \ndef print_vert( left, lcolumns, right, rcolumns, rows, depth ):\n    for m in range( rows ):\n        print( '    ' * depth\n            , left[ m * lcolumns : ( m + 1 ) * lcolumns ]\n            , '|'\n            , right[ m * rcolumns : ( m + 1 ) * rcolumns ] )\n    print()\n    \ndef divide_grid( grid, rows, columns, depth = 0 ):\n    if grid.count( 2 ) &lt; 2:\n        return\n    \n    #print( '    ' * depth, 'grid', grid, depth )\n    for m in range( rows - 1 ):\n        top = grid[ : ( m + 1 ) * columns ]\n        bottom = grid[ ( m + 1 ) * columns : ]\n        #print( '    ' * depth, 'horz {}/{}/{}'.format( m, rows - 1, depth), top, ( m + 1 ), bottom, rows - ( m + 1 ), columns )\n        if 2 in top and 2 in bottom:\n            print_horz( top, ( m + 1 ), bottom, rows - ( m + 1 ), columns, depth )\n    \n            divide_grid( top, ( m + 1 ), columns, depth + 1 )\n            divide_grid( bottom, rows - ( m + 1 ), columns, depth + 1 )\n    \n    for n in range( columns - 1 ):\n        left = list( itertools.chain.from_iterable(\n            [ grid[ m * columns : ( m + 1 ) * columns ][ : ( n + 1 ) ] for m in range( rows ) ] ) )\n        right = list( itertools.chain.from_iterable(\n            [ grid[ m * columns : ( m + 1 ) * columns ][ ( n + 1 ) : ] for m in range( rows ) ] ) )\n        #print( '    ' * depth, 'vert {}/{}/{}'.format( n, columns - 1, depth), left, ( n + 1 ), right, columns - ( n + 1 ), rows )\n        if 2 in left and 2 in right:\n            print_vert( left, ( n + 1 ), right, columns - ( n + 1 ), rows, depth )\n    \n            divide_grid( left, rows, ( n + 1 ), depth + 1 )\n            divide_grid( right, rows, columns - ( n + 1 ), depth + 1 )\n    \ndivide_grid( grid, 3, 3 )\n</code></pre>\n<p>Results</p>\n<pre><code> [1, 2, 3]\n ---\n [2, 1, 2]\n [3, 1, 1]\n\n     [2] | [1, 2]\n     [3] | [1, 1]\n\n     [2, 1] | [2]\n     [3, 1] | [1]\n\n [1] | [2, 3]\n [2] | [1, 2]\n [3] | [1, 1]\n\n     [2, 3]\n     --\n     [1, 2]\n     [1, 1]\n\n     [2] | [3]\n     [1] | [2]\n     [1] | [1]\n\n [1, 2] | [3]\n [2, 1] | [2]\n [3, 1] | [1]\n\n     [1, 2]\n     --\n     [2, 1]\n     [3, 1]\n\n     [1] | [2]\n     [2] | [1]\n     [3] | [1]\n</code></pre>\n"}],"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":391,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1665915256,"creation_date":1665094790,"question_id":73980567,"body_markdown":"A grid of size m*n is provided with numbers 1, 2, 3 only, where m is the number of rows and n is the number of columns.\r\n\r\nDivide the grid into two parts either horizontally or vertically such that each division must contain at least one cell with value 2. Once divided we can further divide to get other combinations.\r\nFind how many divisions are possible for given grid values.\r\n\r\nFor example, if the input grid:\r\n\r\n    1,2,3\r\n    2,1,2\r\n    3,1,1\r\n\r\n**Output is** `4`.\r\n\r\n**Below are the 4 possibilities.**\r\n\r\n    Possibility (1)\r\n     1,2,3\r\n    -------\r\n     2,1,2\r\n     3,1,1\r\n     \r\n      |\r\n    2,|1,2\r\n    3,|1,1\r\n      |\r\n      \r\n    Possibility (2)\r\n      \r\n     1,2,3\r\n    -------\r\n     2,1,2\r\n     3,1,1\r\n    \t\r\n    \t|\r\n    2,1,|2\r\n    3,1,|1\r\n    \t|\r\n    Possibility (3)\r\n      |\r\n    1,|2,3\r\n    2,|1,2\r\n    3,|1,1\r\n      |\r\n     \r\n      | \r\n    2,|3\r\n    1,|2\r\n    1,|1  \r\n      |\r\n      \r\n    Possibility (4) \r\n      |\r\n    1,|2,3\r\n    2,|1,2\r\n    3,|1,1\r\n      |\r\n     \r\n     2,3\r\n    -----\r\n     1,2\r\n     1,1 \r\n     \r\n  How to solve this efficiently in terms of runtime complexity.\r\n\r\nAs a first step, I have modified the grid by setting the value to 0 when an element is 1 or 3. Then set the value to 1 when an element is 2. So I have converted it to a binary matrix. But I am not able to find a way to get the possible combinations. \r\n\r\n    public int process(int[][] grid) {\r\n       int m = grid.length, n = grid[0].length;\r\n       int result = 0;\r\n       for(int i=0; i&lt;m; i++) {\r\n          for(int j=0; j&lt;n; j++) {\r\n             int e = grid[i][j];\r\n             if(e == 2) grid[i][j] = 1;\r\n             else grid[i][j] = 0;\r\n          }\r\n       }\r\n       //.....todo...\r\n       return result;\r\n    }","title":"Divide a grid into several possibilities","body":"<p>A grid of size m*n is provided with numbers 1, 2, 3 only, where m is the number of rows and n is the number of columns.</p>\n<p>Divide the grid into two parts either horizontally or vertically such that each division must contain at least one cell with value 2. Once divided we can further divide to get other combinations.\nFind how many divisions are possible for given grid values.</p>\n<p>For example, if the input grid:</p>\n<pre><code>1,2,3\n2,1,2\n3,1,1\n</code></pre>\n<p><strong>Output is</strong> <code>4</code>.</p>\n<p><strong>Below are the 4 possibilities.</strong></p>\n<pre><code>Possibility (1)\n 1,2,3\n-------\n 2,1,2\n 3,1,1\n \n  |\n2,|1,2\n3,|1,1\n  |\n  \nPossibility (2)\n  \n 1,2,3\n-------\n 2,1,2\n 3,1,1\n    \n    |\n2,1,|2\n3,1,|1\n    |\nPossibility (3)\n  |\n1,|2,3\n2,|1,2\n3,|1,1\n  |\n \n  | \n2,|3\n1,|2\n1,|1  \n  |\n  \nPossibility (4) \n  |\n1,|2,3\n2,|1,2\n3,|1,1\n  |\n \n 2,3\n-----\n 1,2\n 1,1 \n \n</code></pre>\n<p>How to solve this efficiently in terms of runtime complexity.</p>\n<p>As a first step, I have modified the grid by setting the value to 0 when an element is 1 or 3. Then set the value to 1 when an element is 2. So I have converted it to a binary matrix. But I am not able to find a way to get the possible combinations.</p>\n<pre><code>public int process(int[][] grid) {\n   int m = grid.length, n = grid[0].length;\n   int result = 0;\n   for(int i=0; i&lt;m; i++) {\n      for(int j=0; j&lt;n; j++) {\n         int e = grid[i][j];\n         if(e == 2) grid[i][j] = 1;\n         else grid[i][j] = 0;\n      }\n   }\n   //.....todo...\n   return result;\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa","jakarta-ee"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1665916130,"post_id":74086154,"comment_id":130806729,"body_markdown":"[Access Strategies in JPA and Hibernate](https://thorben-janssen.com/access-strategies-in-jpa-and-hibernate/)","body":"<a href=\"https://thorben-janssen.com/access-strategies-in-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">Access Strategies in JPA and Hibernate</a>"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":2,"creation_date":1665942261,"post_id":74086154,"comment_id":130812137,"body_markdown":"You cannot mix and match annotations - by putting it on your property, it then ignores annotations on the field and so does not see the GeneratedValue annotation, and so requires you to manually assign IDs.","body":"You cannot mix and match annotations - by putting it on your property, it then ignores annotations on the field and so does not see the GeneratedValue annotation, and so requires you to manually assign IDs."}],"owner":{"account_id":20927542,"reputation":16,"user_id":15374651,"display_name":"hamza maimi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665914567,"creation_date":1665914567,"question_id":74086154,"body_markdown":"I want to understand why when I insert an @Id annotation on the getId () method it throws an error on the auto increment ID column, this is the error:\r\n```\r\nType Exception Report\r\n\r\nMessage Converting `org.hibernate.id.IdentifierGenerationException` to JPA `PersistenceException` : ids for this class must be manually assigned before calling save(): models.User\r\n\r\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n\r\nException\r\n\r\njakarta.persistence.PersistenceException: Converting `org.hibernate.id.IdentifierGenerationException` to JPA `PersistenceException` : ids for this class must be manually assigned before calling save(): models.User\r\n\torg.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:165)\r\n\torg.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:175)\r\n\torg.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:182)\r\n\torg.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:741)\r\n\torg.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)\r\n\tservlets.Authentication.doGet(Authentication.java:30)\r\n\tjakarta.servlet.http.HttpServlet.service(HttpServlet.java:668)\r\n\tjakarta.servlet.http.HttpServlet.service(HttpServlet.java:777)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\nRoot Cause\r\n\r\norg.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save(): models.User\r\n\torg.hibernate.id.Assigned.generate(Assigned.java:33)\r\n\torg.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:114)\r\n\torg.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)\r\n\torg.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)\r\n\torg.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)\r\n\torg.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\torg.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)\r\n\torg.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)\r\n\tservlets.Authentication.doGet(Authentication.java:30)\r\n\tjakarta.servlet.http.HttpServlet.service(HttpServlet.java:668)\r\n\tjakarta.servlet.http.HttpServlet.service(HttpServlet.java:777)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n```\r\n\r\nthis is my model class:\r\n```\r\n\r\npackage models;\r\n\r\nimport jakarta.persistence.*;\r\n\r\nimport java.math.BigInteger;\r\nimport java.sql.Date;\r\n\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\r\n    private int id;\r\n    @Column(name = &quot;nome&quot;, nullable = false)\r\n    private String nome;\r\n    @Column(name = &quot;cognome&quot;, nullable = false)\r\n    private String cognome;\r\n    @Column(name = &quot;mail&quot;, nullable = false)\r\n    private String mail;\r\n    @Column(name = &quot;password&quot;, nullable = false)\r\n    private String password;\r\n    @Column(name = &quot;token&quot;, nullable = true)\r\n    private String token;\r\n    @Column(name = &quot;dataCreazioneToken&quot;, nullable = true)\r\n    private Date dataCreazioneToken;\r\n\r\n\r\n\r\n    public User() {}\r\n\r\n    public User(String nome, String cognome, String mail, String password) {\r\n        this.nome = nome;\r\n        this.cognome = cognome;\r\n        this.mail = mail;\r\n        this.password = password;\r\n    }\r\n\r\n    public Date getDataCreazioneToken() {\r\n        return dataCreazioneToken;\r\n    }\r\n\r\n    public void setDataCreazioneToken(Date creazioneToken) {\r\n        this.dataCreazioneToken = creazioneToken;\r\n    }\r\n\r\n    public String getToken() {\r\n        return token;\r\n    }\r\n\r\n    public void setToken(String token) {\r\n        this.token = token;\r\n    }\r\n\r\n    public String getNome() {\r\n        return nome;\r\n    }\r\n\r\n    public void setNome(String nome) {\r\n        this.nome = nome;\r\n    }\r\n\r\n    public String getCognome() {\r\n        return cognome;\r\n    }\r\n\r\n    public void setCognome(String cognome) {\r\n        this.cognome = cognome;\r\n    }\r\n\r\n    public String getMail() {\r\n        return mail;\r\n    }\r\n\r\n    public void setMail(String mail) {\r\n        this.mail = mail;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n\r\n    public void setId (int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    @Id\r\n    public int getId() {\r\n        return id;\r\n    }\r\n}\r\n```\r\nSo if I remove the @Id annotation on the getId () method, the error will not be raised and the id is generated automatically. i can&#39;t understand why","title":"@Id annotation on getId() method catch an Exception on autoincrement column","body":"<p>I want to understand why when I insert an @Id annotation on the getId () method it throws an error on the auto increment ID column, this is the error:</p>\n<pre><code>Type Exception Report\n\nMessage Converting `org.hibernate.id.IdentifierGenerationException` to JPA `PersistenceException` : ids for this class must be manually assigned before calling save(): models.User\n\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\n\nException\n\njakarta.persistence.PersistenceException: Converting `org.hibernate.id.IdentifierGenerationException` to JPA `PersistenceException` : ids for this class must be manually assigned before calling save(): models.User\n    org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:165)\n    org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:175)\n    org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:182)\n    org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:741)\n    org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)\n    servlets.Authentication.doGet(Authentication.java:30)\n    jakarta.servlet.http.HttpServlet.service(HttpServlet.java:668)\n    jakarta.servlet.http.HttpServlet.service(HttpServlet.java:777)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nRoot Cause\n\norg.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save(): models.User\n    org.hibernate.id.Assigned.generate(Assigned.java:33)\n    org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:114)\n    org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)\n    org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)\n    org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)\n    org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n    org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)\n    org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)\n    servlets.Authentication.doGet(Authentication.java:30)\n    jakarta.servlet.http.HttpServlet.service(HttpServlet.java:668)\n    jakarta.servlet.http.HttpServlet.service(HttpServlet.java:777)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n</code></pre>\n<p>this is my model class:</p>\n<pre><code>\npackage models;\n\nimport jakarta.persistence.*;\n\nimport java.math.BigInteger;\nimport java.sql.Date;\n\n@Entity\n@Table(name = &quot;user&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\n    private int id;\n    @Column(name = &quot;nome&quot;, nullable = false)\n    private String nome;\n    @Column(name = &quot;cognome&quot;, nullable = false)\n    private String cognome;\n    @Column(name = &quot;mail&quot;, nullable = false)\n    private String mail;\n    @Column(name = &quot;password&quot;, nullable = false)\n    private String password;\n    @Column(name = &quot;token&quot;, nullable = true)\n    private String token;\n    @Column(name = &quot;dataCreazioneToken&quot;, nullable = true)\n    private Date dataCreazioneToken;\n\n\n\n    public User() {}\n\n    public User(String nome, String cognome, String mail, String password) {\n        this.nome = nome;\n        this.cognome = cognome;\n        this.mail = mail;\n        this.password = password;\n    }\n\n    public Date getDataCreazioneToken() {\n        return dataCreazioneToken;\n    }\n\n    public void setDataCreazioneToken(Date creazioneToken) {\n        this.dataCreazioneToken = creazioneToken;\n    }\n\n    public String getToken() {\n        return token;\n    }\n\n    public void setToken(String token) {\n        this.token = token;\n    }\n\n    public String getNome() {\n        return nome;\n    }\n\n    public void setNome(String nome) {\n        this.nome = nome;\n    }\n\n    public String getCognome() {\n        return cognome;\n    }\n\n    public void setCognome(String cognome) {\n        this.cognome = cognome;\n    }\n\n    public String getMail() {\n        return mail;\n    }\n\n    public void setMail(String mail) {\n        this.mail = mail;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n\n    public void setId (int id) {\n        this.id = id;\n    }\n\n    @Id\n    public int getId() {\n        return id;\n    }\n}\n</code></pre>\n<p>So if I remove the @Id annotation on the getId () method, the error will not be raised and the id is generated automatically. i can't understand why</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"score":0,"creation_date":1665914026,"post_id":74086013,"comment_id":130806388,"body_markdown":"Please take a 2 minute tour of the site over [here](https://stackoverflow.com/tour)","body":"Please take a 2 minute tour of the site over <a href=\"https://stackoverflow.com/tour\">here</a>"}],"answers":[{"comments":[{"owner":{"account_id":23488890,"reputation":23,"user_id":17540139,"display_name":"netti169"},"score":1,"creation_date":1666187467,"post_id":74086096,"comment_id":130876514,"body_markdown":"Thank you! Your solution was right but i had to transform the variable into an array like this:\n`final String[] weight = {&quot;&quot;};`","body":"Thank you! Your solution was right but i had to transform the variable into an array like this: <code>final String[] weight = {&quot;&quot;};</code>"}],"tags":[],"owner":{"account_id":22564906,"reputation":3594,"user_id":17133283,"display_name":"Sambhav Khandelwal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665913984,"creation_date":1665913984,"answer_id":74086096,"question_id":74086013,"body_markdown":"### Problem\r\n---\r\n\r\nThe problem is in this line:\r\n```\r\nString weight = edtNumber.getText().toString();\r\n```\r\n\r\nyou care calling that line of code as soon as the activity is created where it has no value. You want to get value only if the button is clicked.\r\n\r\n### Solution\r\n---\r\nYou will have to add this line to your `onClick` method. Finally, the code will look like this:\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private TextView txtDate;\r\n    private Button addBtn;\r\n    private EditText edtNumber;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        txtDate = findViewById(R.id.txtDate);\r\n        addBtn = findViewById(R.id.addBtn);\r\n        edtNumber = findViewById(R.id.edtNumber);\r\n        String weight = &quot;&quot;;\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;&#39;Date\\n&#39;dd-MM-yyyy HH:mm:ss&quot;);\r\n        String currentDateAndTime = sdf.format(new Date());\r\n        txtDate.setText(currentDateAndTime);\r\n\r\n\r\n        addBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                weight = edtNumber.getText().toString()\r\n                Toast.makeText(MainActivity.this, &quot;Weight:&quot;+ weight + &quot;\\n&quot; + currentDateAndTime, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n}\r\n```","title":"how to pass a decimal value using number type Edittext in Android Studio?","body":"<h3>Problem</h3>\n<hr />\n<p>The problem is in this line:</p>\n<pre><code>String weight = edtNumber.getText().toString();\n</code></pre>\n<p>you care calling that line of code as soon as the activity is created where it has no value. You want to get value only if the button is clicked.</p>\n<h3>Solution</h3>\n<hr />\n<p>You will have to add this line to your <code>onClick</code> method. Finally, the code will look like this:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private TextView txtDate;\n    private Button addBtn;\n    private EditText edtNumber;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        txtDate = findViewById(R.id.txtDate);\n        addBtn = findViewById(R.id.addBtn);\n        edtNumber = findViewById(R.id.edtNumber);\n        String weight = &quot;&quot;;\n\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;'Date\\n'dd-MM-yyyy HH:mm:ss&quot;);\n        String currentDateAndTime = sdf.format(new Date());\n        txtDate.setText(currentDateAndTime);\n\n\n        addBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                weight = edtNumber.getText().toString()\n                Toast.makeText(MainActivity.this, &quot;Weight:&quot;+ weight + &quot;\\n&quot; + currentDateAndTime, Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23488890,"reputation":23,"user_id":17540139,"display_name":"netti169"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74086096,"answer_count":1,"score":0,"last_activity_date":1665913984,"creation_date":1665913034,"question_id":74086013,"body_markdown":"I&#39;m trying to pass a decimal number (edtNumber) to a Toast but when i running the app the number doesn&#39;t appear in the Toast.\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private TextView txtDate;\r\n    private Button addBtn;\r\n    private EditText edtNumber;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        txtDate = findViewById(R.id.txtDate);\r\n        addBtn = findViewById(R.id.addBtn);\r\n        edtNumber = findViewById(R.id.edtNumber);\r\n        String weight = edtNumber.getText().toString();\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;&#39;Date\\n&#39;dd-MM-yyyy HH:mm:ss&quot;);\r\n        String currentDateAndTime = sdf.format(new Date());\r\n        txtDate.setText(currentDateAndTime);\r\n\r\n\r\n        addBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, &quot;Weight:&quot;+ weight + &quot;\\n&quot; + currentDateAndTime, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n```","title":"how to pass a decimal value using number type Edittext in Android Studio?","body":"<p>I'm trying to pass a decimal number (edtNumber) to a Toast but when i running the app the number doesn't appear in the Toast.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private TextView txtDate;\n    private Button addBtn;\n    private EditText edtNumber;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        txtDate = findViewById(R.id.txtDate);\n        addBtn = findViewById(R.id.addBtn);\n        edtNumber = findViewById(R.id.edtNumber);\n        String weight = edtNumber.getText().toString();\n\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;'Date\\n'dd-MM-yyyy HH:mm:ss&quot;);\n        String currentDateAndTime = sdf.format(new Date());\n        txtDate.setText(currentDateAndTime);\n\n\n        addBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Toast.makeText(MainActivity.this, &quot;Weight:&quot;+ weight + &quot;\\n&quot; + currentDateAndTime, Toast.LENGTH_SHORT).show();\n            }\n        });\n</code></pre>\n"},{"tags":["java","redis"],"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1665913059,"creation_date":1665913059,"question_id":74086015,"body_markdown":"When I want to deserilize the ArticleZSet list that fetched from redis, shows error like this:\r\n\r\n\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat java.lang.Thread.run(Thread.java:836) [?:?]\r\n    Caused by: org.springframework.data.redis.serializer.SerializationException: Could not read JSON: Unexpected token (VALUE_NUMBER_INT), expected START_ARRAY: need JSON Array to contain As.WRAPPER_ARRAY type information for class misc.model.auth.article.ArticleZSet\r\n     at [Source: (byte[])&quot;3231787&quot;; line: 1, column: 1]; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (VALUE_NUMBER_INT), expected START_ARRAY: need JSON Array to contain As.WRAPPER_ARRAY type information for class misc.model.auth.article.ArticleZSet\r\n     at [Source: (byte[])&quot;3231787&quot;; line: 1, column: 1]\r\n    \tat org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer.deserialize(Jackson2JsonRedisSerializer.java:75) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\r\n    \tat org.springframework.data.redis.serializer.SerializationUtils.deserializeValues(SerializationUtils.java:54) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\r\n    \tat org.springframework.data.redis.serializer.SerializationUtils.deserialize(SerializationUtils.java:62) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\r\n    \tat org.springframework.data.redis.core.AbstractOperations.deserializeValues(AbstractOperations.java:224) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\r\n    \tat org.springframework.data.redis.core.DefaultZSetOperations.reverseRangeByScore(DefaultZSetOperations.java:346) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\r\n    \tat com.dolphin.soa.post.service.impl.article.ArticleService.getArticleImpl(ArticleService.java:174) ~[classes!/:?]\r\n    \tat com.dolphin.soa.post.service.impl.article.ArticleService.pageByCache(ArticleService.java:112) ~[classes!/:?]\r\n    \tat com.dolphin.soa.post.controller.impl.article.ArticleController.newStories(ArticleController.java:102) ~[classes!/:?]\r\n    \tat com.dolphin.soa.post.controller.impl.article.ArticleController$$FastClassBySpringCGLIB$$660ab6b6.invoke(&lt;generated&gt;) ~[classes!/:?]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123) ~[spring-context-5.\r\n\r\n\r\n\r\n\r\nthis is the code that defined the deserilize process:\r\n\r\n\r\n\r\n\r\n    @Bean(name = &quot;redisZSetTemplate&quot;)\r\n        RedisTemplate&lt;String, ArticleZSet&gt; redisTemplateZSet(RedisConnectionFactory redisConnectionFactory) {\r\n            RedisTemplate&lt;String, ArticleZSet&gt; template = new RedisTemplate&lt;&gt;();\r\n            template.setConnectionFactory(redisConnectionFactory);\r\n            template.setEnableTransactionSupport(true);\r\n            Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(ArticleZSet.class);\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\r\n            mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\r\n            serializer.setObjectMapper(mapper);\r\n            template.setValueSerializer(serializer);\r\n            template.setKeySerializer(new StringRedisSerializer());\r\n            template.setHashKeySerializer(serializer);\r\n            template.setHashValueSerializer(serializer);\r\n            template.afterPropertiesSet();\r\n            return template;\r\n        }\r\n\r\n\r\nam I missing something? what should I do to fixed this problem?\r\n","title":"Unexpected token (VALUE_NUMBER_INT), expected START_ARRAY: need JSON Array to contain As.WRAPPER_ARRAY type information for class","body":"<p>When I want to deserilize the ArticleZSet list that fetched from redis, shows error like this:</p>\n<pre><code>    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.62.jar!/:?]\n    at java.lang.Thread.run(Thread.java:836) [?:?]\nCaused by: org.springframework.data.redis.serializer.SerializationException: Could not read JSON: Unexpected token (VALUE_NUMBER_INT), expected START_ARRAY: need JSON Array to contain As.WRAPPER_ARRAY type information for class misc.model.auth.article.ArticleZSet\n at [Source: (byte[])&quot;3231787&quot;; line: 1, column: 1]; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (VALUE_NUMBER_INT), expected START_ARRAY: need JSON Array to contain As.WRAPPER_ARRAY type information for class misc.model.auth.article.ArticleZSet\n at [Source: (byte[])&quot;3231787&quot;; line: 1, column: 1]\n    at org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer.deserialize(Jackson2JsonRedisSerializer.java:75) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\n    at org.springframework.data.redis.serializer.SerializationUtils.deserializeValues(SerializationUtils.java:54) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\n    at org.springframework.data.redis.serializer.SerializationUtils.deserialize(SerializationUtils.java:62) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\n    at org.springframework.data.redis.core.AbstractOperations.deserializeValues(AbstractOperations.java:224) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\n    at org.springframework.data.redis.core.DefaultZSetOperations.reverseRangeByScore(DefaultZSetOperations.java:346) ~[spring-data-redis-2.7.2.jar!/:2.7.2]\n    at com.dolphin.soa.post.service.impl.article.ArticleService.getArticleImpl(ArticleService.java:174) ~[classes!/:?]\n    at com.dolphin.soa.post.service.impl.article.ArticleService.pageByCache(ArticleService.java:112) ~[classes!/:?]\n    at com.dolphin.soa.post.controller.impl.article.ArticleController.newStories(ArticleController.java:102) ~[classes!/:?]\n    at com.dolphin.soa.post.controller.impl.article.ArticleController$$FastClassBySpringCGLIB$$660ab6b6.invoke(&lt;generated&gt;) ~[classes!/:?]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.19.jar!/:5.3.19]\n    at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123) ~[spring-context-5.\n</code></pre>\n<p>this is the code that defined the deserilize process:</p>\n<pre><code>@Bean(name = &quot;redisZSetTemplate&quot;)\n    RedisTemplate&lt;String, ArticleZSet&gt; redisTemplateZSet(RedisConnectionFactory redisConnectionFactory) {\n        RedisTemplate&lt;String, ArticleZSet&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(redisConnectionFactory);\n        template.setEnableTransactionSupport(true);\n        Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(ArticleZSet.class);\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\n        mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n        serializer.setObjectMapper(mapper);\n        template.setValueSerializer(serializer);\n        template.setKeySerializer(new StringRedisSerializer());\n        template.setHashKeySerializer(serializer);\n        template.setHashValueSerializer(serializer);\n        template.afterPropertiesSet();\n        return template;\n    }\n</code></pre>\n<p>am I missing something? what should I do to fixed this problem?</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":25621,"reputation":21842,"user_id":65977,"accept_rate":79,"display_name":"Tyler"},"score":2,"creation_date":1307035803,"post_id":6217935,"comment_id":7241349,"body_markdown":"wild guess: Look at your import statements and make sure the annotation is `org.junit.Ignore` or whatever it&#39;s supposed to be, and not some other annotation from a totally different package which just happens to have the same name.","body":"wild guess: Look at your import statements and make sure the annotation is <code>org.junit.Ignore</code> or whatever it&#39;s supposed to be, and not some other annotation from a totally different package which just happens to have the same name."},{"owner":{"account_id":42117,"reputation":30319,"user_id":122607,"accept_rate":92,"display_name":"Pops"},"score":0,"creation_date":1307036126,"post_id":6217935,"comment_id":7241441,"body_markdown":"@Matrix, good thought, but I do have the right import.","body":"@Matrix, good thought, but I do have the right import."},{"owner":{"account_id":385369,"reputation":28737,"user_id":742469,"accept_rate":92,"display_name":"Op De Cirkel"},"score":0,"creation_date":1307036436,"post_id":6217935,"comment_id":7241523,"body_markdown":"Do you run JUnit 3 or Junit 4? JUnit 3 will ignore the annotation. To find out, rename the method to do not start with `test` and remove the @Ignore annotation and try again. If the test is not executed means that you are running Junit 3","body":"Do you run JUnit 3 or Junit 4? JUnit 3 will ignore the annotation. To find out, rename the method to do not start with <code>test</code> and remove the @Ignore annotation and try again. If the test is not executed means that you are running Junit 3"},{"owner":{"account_id":42117,"reputation":30319,"user_id":122607,"accept_rate":92,"display_name":"Pops"},"score":0,"creation_date":1307036544,"post_id":6217935,"comment_id":7241563,"body_markdown":"As I stated in the initial and edited versions of the post, I am using JUnit 4.","body":"As I stated in the initial and edited versions of the post, I am using JUnit 4."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":1,"creation_date":1307036956,"post_id":6217935,"comment_id":7241672,"body_markdown":"How are you running the tests - in the IDE, from Maven, Ant, etc? How did you verify that the tests are run with a JUnit 4 runner?","body":"How are you running the tests - in the IDE, from Maven, Ant, etc? How did you verify that the tests are run with a JUnit 4 runner?"},{"owner":{"account_id":42117,"reputation":30319,"user_id":122607,"accept_rate":92,"display_name":"Pops"},"score":0,"creation_date":1307037332,"post_id":6217935,"comment_id":7241765,"body_markdown":"@matt, I moved this comment (my reply to you) to the body of the question.","body":"@matt, I moved this comment (my reply to you) to the body of the question."}],"answers":[{"comments":[{"owner":{"account_id":42117,"reputation":30319,"user_id":122607,"accept_rate":92,"display_name":"Pops"},"score":0,"creation_date":1307038481,"post_id":6218012,"comment_id":7242112,"body_markdown":"I did try that, but you realize the page you linked to has both, right? &quot;For example: `@Ignore @Test public void something() { ...`&quot;","body":"I did try that, but you realize the page you linked to has both, right? &quot;For example: <code>@Ignore @Test public void something() { ...</code>&quot;"}],"tags":[],"owner":{"account_id":396294,"reputation":7040,"user_id":759762,"accept_rate":86,"display_name":"RMT"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1307035901,"creation_date":1307035901,"answer_id":6218012,"question_id":6217935,"body_markdown":"I think its just @Ignore that will skip the test\r\n\r\n[JUnit Ignore][1]\r\n\r\n\r\n  [1]: http://junit.sourceforge.net/javadoc/org/junit/Ignore.html","title":"What can cause JUnit to disregard @Ignore annotations?","body":"<p>I think its just @Ignore that will skip the test</p>\n\n<p><a href=\"http://junit.sourceforge.net/javadoc/org/junit/Ignore.html\" rel=\"nofollow\">JUnit Ignore</a></p>\n"},{"comments":[{"owner":{"account_id":42117,"reputation":30319,"user_id":122607,"accept_rate":92,"display_name":"Pops"},"score":0,"creation_date":1307036455,"post_id":6218119,"comment_id":7241532,"body_markdown":"I am, and it is; I updated my post while you were writing this answer. Thanks, though!","body":"I am, and it is; I updated my post while you were writing this answer. Thanks, though!"},{"owner":{"account_id":42117,"reputation":30319,"user_id":122607,"accept_rate":92,"display_name":"Pops"},"score":3,"creation_date":1307058176,"post_id":6218119,"comment_id":7246472,"body_markdown":"Argh, this turned out to be right! Someone else modified a superclass to be JUnit 3 while I was working and I didn&#39;t know about it.","body":"Argh, this turned out to be right! Someone else modified a superclass to be JUnit 3 while I was working and I didn&#39;t know about it."}],"tags":[],"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"comment_count":2,"down_vote_count":0,"up_vote_count":51,"is_accepted":true,"score":51,"last_activity_date":1324576157,"creation_date":1307036398,"answer_id":6218119,"question_id":6217935,"body_markdown":"1. Make sure you are importing the right `@Ignore`. To be sure use `@org.junit.Ignore` explicitly.\r\n\r\n2. Double check if your test is being executed by JUnit 4, not 3. The easiest way to do this is to either change the test name so it is not prefixed by `test` (now it shouldn&#39;t be executed at all and JUnit 4 does not need this prefix anyway) or examine your test case inheritance hierarchy: it **shouldn&#39;t** extend directly or indirectly from `junit.framework.TestCase` (Junit 3 requirement).","title":"What can cause JUnit to disregard @Ignore annotations?","body":"<ol>\n<li><p>Make sure you are importing the right <code>@Ignore</code>. To be sure use <code>@org.junit.Ignore</code> explicitly.</p></li>\n<li><p>Double check if your test is being executed by JUnit 4, not 3. The easiest way to do this is to either change the test name so it is not prefixed by <code>test</code> (now it shouldn't be executed at all and JUnit 4 does not need this prefix anyway) or examine your test case inheritance hierarchy: it <strong>shouldn't</strong> extend directly or indirectly from <code>junit.framework.TestCase</code> (Junit 3 requirement).</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":25621,"reputation":21842,"user_id":65977,"accept_rate":79,"display_name":"Tyler"},"score":0,"creation_date":1307037167,"post_id":6218207,"comment_id":7241724,"body_markdown":"or just using Project &gt; Clean","body":"or just using Project &gt; Clean"},{"owner":{"account_id":181901,"reputation":25638,"user_id":416224,"accept_rate":96,"display_name":"Kijewski"},"score":1,"creation_date":1307037596,"post_id":6218207,"comment_id":7241832,"body_markdown":"@MatrixFrog: I kind of dislike `mvn clean`: deleting `target` is always faster than invoking clean. Also if you have a project with many classes and generated code, clean deletes more than appropriate.","body":"@MatrixFrog: I kind of dislike <code>mvn clean</code>: deleting <code>target</code> is always faster than invoking clean. Also if you have a project with many classes and generated code, clean deletes more than appropriate."},{"owner":{"account_id":42117,"reputation":30319,"user_id":122607,"accept_rate":92,"display_name":"Pops"},"score":0,"creation_date":1307043169,"post_id":6218207,"comment_id":7243352,"body_markdown":"Took me a while to find them (it&#39;s someone else&#39;s build script and I&#39;m not familiar with it yet) but this doesn&#39;t seem to be my issue.","body":"Took me a while to find them (it&#39;s someone else&#39;s build script and I&#39;m not familiar with it yet) but this doesn&#39;t seem to be my issue."}],"tags":[],"owner":{"account_id":181901,"reputation":25638,"user_id":416224,"accept_rate":96,"display_name":"Kijewski"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1307036865,"creation_date":1307036865,"answer_id":6218207,"question_id":6217935,"body_markdown":"Are you sure the test classes were recompiled?\r\n\r\nIt&#39;s a quite common problem, that the recompilation fails because there was typo somewhere in the sources (like a missing semicolon), and the IDE does not tell you that compiling failed.\r\n\r\nTry deleting the `target/test-classes` folder.","title":"What can cause JUnit to disregard @Ignore annotations?","body":"<p>Are you sure the test classes were recompiled?</p>\n\n<p>It's a quite common problem, that the recompilation fails because there was typo somewhere in the sources (like a missing semicolon), and the IDE does not tell you that compiling failed.</p>\n\n<p>Try deleting the <code>target/test-classes</code> folder.</p>\n"},{"comments":[{"owner":{"account_id":538077,"reputation":2302,"user_id":906264,"display_name":"Andrei"},"score":0,"creation_date":1464248234,"post_id":9611034,"comment_id":62409203,"body_markdown":"Superb, this helped. It was getting frustrating because the maven builds were ignoring the @ignore and then failed. Thank you!","body":"Superb, this helped. It was getting frustrating because the maven builds were ignoring the @ignore and then failed. Thank you!"},{"owner":{"account_id":214378,"reputation":2516,"user_id":468315,"accept_rate":33,"display_name":"barryku"},"score":0,"creation_date":1469583912,"post_id":9611034,"comment_id":64592396,"body_markdown":"One other thing I noticed is that new version of surefire plugin (version &gt;=2.8) works with testXyz that&#39;s annotated with @Ignore, so you don&#39;t need to rename methods.","body":"One other thing I noticed is that new version of surefire plugin (version &gt;=2.8) works with testXyz that&#39;s annotated with @Ignore, so you don&#39;t need to rename methods."}],"tags":[],"owner":{"account_id":117526,"reputation":918,"user_id":307743,"accept_rate":75,"display_name":"compiledweird"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1331164603,"creation_date":1331164603,"answer_id":9611034,"question_id":6217935,"body_markdown":"I had this problem also even though JUnit 3 was not on my classpath. I believe that compatibility mode on Junit 4 picks up on the &#39;test&#39; prefix in your testname and thus operates as JUnit 3 would rather than picking up the @Ignore. The solution is to rename your test. ","title":"What can cause JUnit to disregard @Ignore annotations?","body":"<p>I had this problem also even though JUnit 3 was not on my classpath. I believe that compatibility mode on Junit 4 picks up on the 'test' prefix in your testname and thus operates as JUnit 3 would rather than picking up the @Ignore. The solution is to rename your test. </p>\n"},{"tags":[],"owner":{"account_id":7683475,"reputation":11,"user_id":5822047,"display_name":"Mateusz Dyszkiewicz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485510435,"creation_date":1485510435,"answer_id":41890986,"question_id":6217935,"body_markdown":"In my case I found my IDE was executing the test disregarding the `@Ignore` annotation. When I ran `mvn install` (or any other maven phase) the test was skipped and that&#39;s what I was actually aiming for (see attached ilustration).\r\n\r\n[Ilustration of ways of execution][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Sqp1o.png","title":"What can cause JUnit to disregard @Ignore annotations?","body":"<p>In my case I found my IDE was executing the test disregarding the <code>@Ignore</code> annotation. When I ran <code>mvn install</code> (or any other maven phase) the test was skipped and that's what I was actually aiming for (see attached ilustration).</p>\n\n<p><a href=\"https://i.stack.imgur.com/Sqp1o.png\" rel=\"nofollow noreferrer\">Ilustration of ways of execution</a></p>\n"},{"tags":[],"owner":{"account_id":5908222,"reputation":2527,"user_id":8371844,"display_name":"mtotowamkwe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591740674,"creation_date":1591740674,"answer_id":62292712,"question_id":6217935,"body_markdown":"Ensuring the test class is also imported fixed the issue for me i.e. \r\n\r\n````\r\nimport org.junit.Ignore;\r\nimport org.junit.Test;\r\n````","title":"What can cause JUnit to disregard @Ignore annotations?","body":"<p>Ensuring the test class is also imported fixed the issue for me i.e. </p>\n\n<pre><code>import org.junit.Ignore;\nimport org.junit.Test;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"score":0,"creation_date":1665830280,"post_id":70360501,"comment_id":130793398,"body_markdown":"there&#39;s a typo, instead of &quot;disable&quot;, it is &quot;@Disabled&quot;","body":"there&#39;s a typo, instead of &quot;disable&quot;, it is &quot;@Disabled&quot;"}],"tags":[],"owner":{"account_id":11296599,"reputation":10778,"user_id":8283938,"display_name":"Falke Design"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1665912708,"creation_date":1639557093,"answer_id":70360501,"question_id":6217935,"body_markdown":"In JUnit5 use `@Disabled` or `@Disabled(&quot;Reason text&quot;)`","title":"What can cause JUnit to disregard @Ignore annotations?","body":"<p>In JUnit5 use <code>@Disabled</code> or <code>@Disabled(&quot;Reason text&quot;)</code></p>\n"}],"owner":{"account_id":42117,"reputation":30319,"user_id":122607,"accept_rate":92,"display_name":"Pops"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33133,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":6218119,"answer_count":7,"score":37,"last_activity_date":1665912708,"creation_date":1307035592,"question_id":6217935,"body_markdown":"I just used MyEclipse to automatically generate some JUnit test cases. One of the generated methods looks like this:\r\n\r\n    @Ignore(&quot;Ignored&quot;) @Test\r\n    public void testCreateRevision()\r\n    {\r\n        fail(&quot;Not yet implemented&quot;); // TODO\r\n    }\r\n\r\nI added the `@Ignore` annotation manually. However, when I run the test, JUnit lists that method, and others like it, under &quot;failures,&quot; rather than ignoring them (related: https://stackoverflow.com/questions/3425995/whats-the-difference-between-failure-and-error-in-junit). And it displays the &quot;Not yet implemented&quot; message instead of the &quot;Ignored&quot; message. Clearly, `fail()` must be getting called, and therefore, the `@Ignore` assertion is not working.\r\n\r\nWhat&#39;s going on here? Is there a setting I need to enable for this to work?\r\n\r\n__EDIT :__  \r\nThings I have considered/tried so far:\r\n\r\n- I am using JUnit 4, so it&#39;s not a version problem.\r\n- I am importing `org.junit.Ignore`, so it&#39;s not a case of the wrong `Ignore` being used.\r\n- I have tried using `@Ignore` alone, `@Ignore @Test` and `@Ignore(&quot;message&quot;) @Test`; all fail.\r\n\r\n__EDIT 2 :__  \r\nI created the tests with MyEclipse, via `New &gt; Other; Java &gt; JUnit &gt; JUnit Test Case; New JUnit 4 test`, and the library in my build path is JUnit 4. I&#39;m building with ant and actually running the case with MyEclipse.","title":"What can cause JUnit to disregard @Ignore annotations?","body":"<p>I just used MyEclipse to automatically generate some JUnit test cases. One of the generated methods looks like this:</p>\n\n<pre><code>@Ignore(\"Ignored\") @Test\npublic void testCreateRevision()\n{\n    fail(\"Not yet implemented\"); // TODO\n}\n</code></pre>\n\n<p>I added the <code>@Ignore</code> annotation manually. However, when I run the test, JUnit lists that method, and others like it, under \"failures,\" rather than ignoring them (related: <a href=\"https://stackoverflow.com/questions/3425995/whats-the-difference-between-failure-and-error-in-junit\">What&#39;s the difference between failure and error in JUnit?</a>). And it displays the \"Not yet implemented\" message instead of the \"Ignored\" message. Clearly, <code>fail()</code> must be getting called, and therefore, the <code>@Ignore</code> assertion is not working.</p>\n\n<p>What's going on here? Is there a setting I need to enable for this to work?</p>\n\n<p><strong>EDIT :</strong><br>\nThings I have considered/tried so far:</p>\n\n<ul>\n<li>I am using JUnit 4, so it's not a version problem.</li>\n<li>I am importing <code>org.junit.Ignore</code>, so it's not a case of the wrong <code>Ignore</code> being used.</li>\n<li>I have tried using <code>@Ignore</code> alone, <code>@Ignore @Test</code> and <code>@Ignore(\"message\") @Test</code>; all fail.</li>\n</ul>\n\n<p><strong>EDIT 2 :</strong><br>\nI created the tests with MyEclipse, via <code>New &gt; Other; Java &gt; JUnit &gt; JUnit Test Case; New JUnit 4 test</code>, and the library in my build path is JUnit 4. I'm building with ant and actually running the case with MyEclipse.</p>\n"},{"tags":["java","spring","spring-data-jpa","derby"],"comments":[{"owner":{"account_id":1424249,"reputation":187,"user_id":1348199,"accept_rate":80,"display_name":"cattox"},"score":0,"creation_date":1665915803,"post_id":74079553,"comment_id":130806672,"body_markdown":"Actually the not creating database tables was pretty simple, just turning &quot;setGenerateDdl&quot; to true.. The only problem now is the racing condition. I wonder if I have any way of triggering database creation/update at startup instead of waiting for first database query...","body":"Actually the not creating database tables was pretty simple, just turning &quot;setGenerateDdl&quot; to true.. The only problem now is the racing condition. I wonder if I have any way of triggering database creation/update at startup instead of waiting for first database query..."}],"answers":[{"comments":[{"owner":{"account_id":1424249,"reputation":187,"user_id":1348199,"accept_rate":80,"display_name":"cattox"},"score":0,"creation_date":1665909350,"post_id":74081435,"comment_id":130805633,"body_markdown":"Hi Bryan, thanks for your response. I&#39;m using java 11 to compile as you can see by the parent pom. To execute I tried java 11 and java 18. This seems to be happening during the instrumentation, so you might be right pointing out dependencies and java version compatibility issue. But it&#39;s not a low java version for sure..\nThanks again","body":"Hi Bryan, thanks for your response. I&#39;m using java 11 to compile as you can see by the parent pom. To execute I tried java 11 and java 18. This seems to be happening during the instrumentation, so you might be right pointing out dependencies and java version compatibility issue. But it&#39;s not a low java version for sure.. Thanks again"}],"tags":[],"owner":{"account_id":65826,"reputation":16198,"user_id":193453,"display_name":"Bryan Pendleton"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665853394,"creation_date":1665853394,"answer_id":74081435,"question_id":74079553,"body_markdown":"Check which version of Java you are using. IllegalClassFormatException generally means that you are using jar files which require a *newer* version of Java than the version you are running.\r\n\r\nIn your pom.xml, it appears you are running Derby 10.15. There are 3 different releases of Derby available right now:\r\n\r\n - Derby 10.14 requires Java 8+\r\n - Derby 10.15 requires Java 9+\r\n - Derby 10.16 requires Java 17+\r\n\r\nSo I&#39;m guessing you&#39;re running Java 8. In that case, you can either\r\n - switch to Derby 10.14,\r\n - or, upgrade to Java 9 or higher.","title":"java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException using Spring JPA","body":"<p>Check which version of Java you are using. IllegalClassFormatException generally means that you are using jar files which require a <em>newer</em> version of Java than the version you are running.</p>\n<p>In your pom.xml, it appears you are running Derby 10.15. There are 3 different releases of Derby available right now:</p>\n<ul>\n<li>Derby 10.14 requires Java 8+</li>\n<li>Derby 10.15 requires Java 9+</li>\n<li>Derby 10.16 requires Java 17+</li>\n</ul>\n<p>So I'm guessing you're running Java 8. In that case, you can either</p>\n<ul>\n<li>switch to Derby 10.14,</li>\n<li>or, upgrade to Java 9 or higher.</li>\n</ul>\n"}],"owner":{"account_id":1424249,"reputation":187,"user_id":1348199,"accept_rate":80,"display_name":"cattox"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":534,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1665911234,"creation_date":1665837850,"question_id":74079553,"body_markdown":"I&#39;m trying to initialize a derby database on startup using Spring jpa.\r\nI have a couple of basic entities. Relevant code follows:\r\n\r\n**PersistenceConfiguration class**\r\n\r\n    package org.afsilva.etimer.persistence;\r\n    \r\n    import java.io.File;\r\n    import javax.sql.DataSource;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.PropertySource;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    import org.springframework.jdbc.datasource.DriverManagerDataSource;\r\n    import org.springframework.orm.jpa.JpaTransactionManager;\r\n    import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\n    import org.springframework.orm.jpa.vendor.Database;\r\n    import org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\n    import org.springframework.transaction.PlatformTransactionManager;\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(&quot;org.afsilva.etimer.persistence&quot;)\r\n    @PropertySource(&quot;org/afsilva/etimer/persistence/application.properties&quot;)\r\n    public class PersistenceConfiguration {\r\n\r\n\t    private static final String DRIVER_CLASS_NAME = &quot;org.apache.derby.iapi.jdbc.AutoloadedDriver&quot;;\r\n\t    private static final String DATA_SOURCE_DRIVER_URL = &quot;jdbc:derby:eTimer;create=true&quot;;\r\n\t    private static final String DATA_SOURCE_USER = null;\r\n    \tprivate static final String DATA_SOURCE_PASSWORD = null;\r\n\r\n\t    @Bean(&quot;entityManagerFactory&quot;)\r\n    \tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n\t\t\r\n\t    \tSystem.setProperty(&quot;derby.system.home&quot;, System.getProperty(&quot;user.home&quot;) + File.separatorChar + &quot;eTimer&quot;);\r\n\t\t\r\n\t\t    LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\r\n\t\t    entityManagerFactoryBean.setPackagesToScan(&quot;org.afsilva.etimer.persistence&quot;);\r\n\t\t    entityManagerFactoryBean.setPersistenceUnitName(&quot;system&quot;);\r\n\t\t    entityManagerFactoryBean.setDataSource(systemDataSource());\r\n\r\n    \t\tHibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\r\n\t    \tadapter.setDatabase(Database.DERBY);\r\n\t\t    adapter.setShowSql(true);\r\n    \t\tadapter.setGenerateDdl(false);\r\n\r\n\t    \tentityManagerFactoryBean.setJpaVendorAdapter(adapter);\r\n\r\n\t\t    return entityManagerFactoryBean;\r\n    \t}\r\n\r\n\t    @Bean\r\n\t    DataSource systemDataSource() {\r\n\t\t    DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n\t\t    dataSource.setDriverClassName(DRIVER_CLASS_NAME);\r\n\t\t    dataSource.setUrl(DATA_SOURCE_DRIVER_URL);\r\n\t\t    dataSource.setUsername(DATA_SOURCE_USER);\r\n    \t\tdataSource.setPassword(DATA_SOURCE_PASSWORD);\r\n\r\n\t    \treturn dataSource;\r\n\t    }\r\n\r\n\t    @Bean\r\n\t    public PlatformTransactionManager systemTransactionManager() {\r\n\t\t    JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n\t\t \r\n            transactionManager.setEntityManagerFactory((entityManagerFactory().getObject()));\r\n\r\n\t\t    return transactionManager;\r\n\t    }\r\n    }\r\n\r\napplication.properties\r\n\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n\r\n**pom.xml**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;artifactId&gt;e-timer-persistence&lt;/artifactId&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.afsilva.etimer&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;e-timer&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;derby.version&gt;10.15.2.0&lt;/derby.version&gt;\r\n    \t\t&lt;hibernate.version&gt;5.6.12.Final&lt;/hibernate.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${spring.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${spring.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${spring-data.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-instrument --&gt;\r\n    \t\t&lt;dependency&gt;\r\n        \t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\r\n        \t\t&lt;version&gt;${spring.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.derby/derby --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;derby&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${derby.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.derby/derbytools --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;derbytools&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${derby.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.afsilva.etimer&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;e-timer-model&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${project.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n**parent pom**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;org.afsilva.etimer&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;e-timer&lt;/artifactId&gt;\r\n    \t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n    \t\t\r\n    \t\t&lt;spring-data.version&gt;2.7.3&lt;/spring-data.version&gt;\r\n    \t\t&lt;spring.version&gt;5.3.23&lt;/spring.version&gt;\r\n    \t\t&lt;log4j.version&gt;2.18.0&lt;/log4j.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t\r\n    \t&lt;modules&gt;\r\n    \t\t&lt;module&gt;e-timer-model&lt;/module&gt;\r\n    \t\t&lt;module&gt;e-timer-persistence&lt;/module&gt;\r\n    \t\t&lt;module&gt;e-timer-service&lt;/module&gt;\r\n    \t\t&lt;module&gt;e-timer-standalone&lt;/module&gt;\r\n    \t&lt;/modules&gt;\r\n    \t\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.8.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;release&gt;11&lt;/release&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n**module-info**\r\n\r\n    module org.afsilva.etimer.persistence {\r\n    \trequires java.persistence;\r\n    \trequires spring.data.commons;\r\n    \trequires spring.context;\r\n    \trequires transitive org.afsilva.etimer.model;\r\n    \trequires spring.data.jpa;\r\n    \trequires spring.orm;\r\n    \trequires spring.beans;\r\n    \trequires java.sql;\r\n    \trequires spring.jdbc;\r\n    \trequires spring.core;\r\n    \trequires spring.tx;\r\n    \trequires spring.instrument;\r\n    \t\r\n    \texports org.afsilva.etimer.persistence.task;\r\n    \texports org.afsilva.etimer.persistence;\r\n    \t\r\n    \topens org.afsilva.etimer.persistence.task;\r\n    \topens org.afsilva.etimer.persistence.project;\r\n    \topens org.afsilva.etimer.persistence.workentry;\r\n    \topens org.afsilva.etimer.persistence;\r\n    }\r\n\r\nSpring application context is being initialized like this\r\n\r\n    appCtx = new AnnotationConfigApplicationContext(ServiceConfig.class);\r\n\r\nServiceConfig class\r\n\r\n    package org.afsilva.etimer.service;\r\n    \r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    @ComponentScan(basePackages = &quot;org.afsilva.etimer&quot;)\r\n    public class ServiceConfig {\r\n    \r\n    }\r\n\r\nwhen I try to run the application I get\r\n\r\n    13:21:39.466 [JavaFX Application Thread] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    Exception in thread &quot;JavaFX Application Thread&quot; java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\r\n    \tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1857)\r\n    \tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1724)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\r\n    \tat javafx.base@18.0.2/javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.graphics@18.0.2/javafx.scene.Node.fireEvent(Node.java:8797)\r\n    \tat javafx.controls@18.0.2/javafx.scene.control.Button.fire(Button.java:203)\r\n    \tat javafx.controls@18.0.2/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:208)\r\n    \tat javafx.controls@18.0.2/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\r\n    \tat javafx.base@18.0.2/javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.graphics@18.0.2/javafx.scene.Scene$MouseHandler.process(Scene.java:3881)\r\n    \tat javafx.graphics@18.0.2/javafx.scene.Scene.processMouseEvent(Scene.java:1874)\r\n    \tat javafx.graphics@18.0.2/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2607)\r\n    \tat javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\r\n    \tat javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\r\n    \tat javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\r\n    \tat javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\r\n    \tat javafx.graphics@18.0.2/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\r\n    \tat javafx.graphics@18.0.2/com.sun.glass.ui.View.notifyMouse(View.java:937)\r\n    \tat javafx.graphics@18.0.2/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\r\n    \tat javafx.graphics@18.0.2/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:316)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:77)\r\n    \tat jdk.internal.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat javafx.base@18.0.2/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:275)\r\n    \tat javafx.fxml@18.0.2/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\r\n    \tat javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1854)\r\n    \t... 46 more\r\n    Caused by: java.lang.NoClassDefFoundError: java/lang/instrument/IllegalClassFormatException\r\n    \tat spring.data.jpa@2.7.3/org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension.getConfigurationInspectionClassLoader(JpaRepositoryConfigExtension.java:239)\r\n    \tat spring.data.commons@2.7.3/org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:97)\r\n    \tat spring.data.commons@2.7.3/org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:159)\r\n    \tat spring.data.commons@2.7.3/org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport.registerBeanDefinitions(RepositoryBeanDefinitionRegistrarSupport.java:106)\r\n    \tat spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:396)\r\n    \tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\r\n    \tat spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:395)\r\n    \tat spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:157)\r\n    \tat spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:129)\r\n    \tat spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:343)\r\n    \tat spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247)\r\n    \tat spring.context@5.3.23/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311)\r\n    \tat spring.context@5.3.23/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112)\r\n    \tat spring.context@5.3.23/org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)\r\n    \tat spring.context@5.3.23/org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)\r\n    \tat spring.context@5.3.23/org.springframework.context.annotation.AnnotationConfigApplicationContext.&lt;init&gt;(AnnotationConfigApplicationContext.java:93)\r\n    \tat org.afsilva.etimer.app/org.afsilva.etimer.ApplicationContext.&lt;clinit&gt;(ApplicationContext.java:12)\r\n    \tat org.afsilva.etimer.app/org.afsilva.etimer.task.TaskListDialog.initializeTaskList(TaskListDialog.java:62)\r\n    \tat org.afsilva.etimer.app/org.afsilva.etimer.task.TaskListDialog.&lt;init&gt;(TaskListDialog.java:53)\r\n    \tat org.afsilva.etimer.app/org.afsilva.etimer.myday.MyDayPane.listTasks(MyDayPane.java:39)\r\n    \t... 57 more\r\n    Caused by: java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \t... 77 more\r\n\r\nThis is a javafx application, I suppose it has no influence on this issue.\r\n\r\nPlease help\r\n\r\n=== Edit ===\r\n\r\nThere is a strange behavior here. If I debug the application and go step by step through the initialization code the error does not occur. I wonder if this is some kind of race condition.. Even then I have another issue, which is a query to the database says that the table does not exist, so it seems that &quot;spring.jpa.hibernate.ddl-auto=update&quot; is not working.. :(","title":"java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException using Spring JPA","body":"<p>I'm trying to initialize a derby database on startup using Spring jpa.\nI have a couple of basic entities. Relevant code follows:</p>\n<p><strong>PersistenceConfiguration class</strong></p>\n<pre><code>package org.afsilva.etimer.persistence;\n\nimport java.io.File;\nimport javax.sql.DataSource;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.Database;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\n\n@Configuration\n@EnableJpaRepositories(&quot;org.afsilva.etimer.persistence&quot;)\n@PropertySource(&quot;org/afsilva/etimer/persistence/application.properties&quot;)\npublic class PersistenceConfiguration {\n\n    private static final String DRIVER_CLASS_NAME = &quot;org.apache.derby.iapi.jdbc.AutoloadedDriver&quot;;\n    private static final String DATA_SOURCE_DRIVER_URL = &quot;jdbc:derby:eTimer;create=true&quot;;\n    private static final String DATA_SOURCE_USER = null;\n    private static final String DATA_SOURCE_PASSWORD = null;\n\n    @Bean(&quot;entityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n    \n        System.setProperty(&quot;derby.system.home&quot;, System.getProperty(&quot;user.home&quot;) + File.separatorChar + &quot;eTimer&quot;);\n    \n        LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\n        entityManagerFactoryBean.setPackagesToScan(&quot;org.afsilva.etimer.persistence&quot;);\n        entityManagerFactoryBean.setPersistenceUnitName(&quot;system&quot;);\n        entityManagerFactoryBean.setDataSource(systemDataSource());\n\n        HibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\n        adapter.setDatabase(Database.DERBY);\n        adapter.setShowSql(true);\n        adapter.setGenerateDdl(false);\n\n        entityManagerFactoryBean.setJpaVendorAdapter(adapter);\n\n        return entityManagerFactoryBean;\n    }\n\n    @Bean\n    DataSource systemDataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(DRIVER_CLASS_NAME);\n        dataSource.setUrl(DATA_SOURCE_DRIVER_URL);\n        dataSource.setUsername(DATA_SOURCE_USER);\n        dataSource.setPassword(DATA_SOURCE_PASSWORD);\n\n        return dataSource;\n    }\n\n    @Bean\n    public PlatformTransactionManager systemTransactionManager() {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n     \n        transactionManager.setEntityManagerFactory((entityManagerFactory().getObject()));\n\n        return transactionManager;\n    }\n}\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;artifactId&gt;e-timer-persistence&lt;/artifactId&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.afsilva.etimer&lt;/groupId&gt;\n        &lt;artifactId&gt;e-timer&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;properties&gt;\n        &lt;derby.version&gt;10.15.2.0&lt;/derby.version&gt;\n        &lt;hibernate.version&gt;5.6.12.Final&lt;/hibernate.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${spring-data.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-instrument --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.derby/derby --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\n            &lt;artifactId&gt;derby&lt;/artifactId&gt;\n            &lt;version&gt;${derby.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.derby/derbytools --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\n            &lt;artifactId&gt;derbytools&lt;/artifactId&gt;\n            &lt;version&gt;${derby.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-entitymanager --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.afsilva.etimer&lt;/groupId&gt;\n            &lt;artifactId&gt;e-timer-model&lt;/artifactId&gt;\n            &lt;version&gt;${project.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>parent pom</strong></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.afsilva.etimer&lt;/groupId&gt;\n    &lt;artifactId&gt;e-timer&lt;/artifactId&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        \n        &lt;spring-data.version&gt;2.7.3&lt;/spring-data.version&gt;\n        &lt;spring.version&gt;5.3.23&lt;/spring.version&gt;\n        &lt;log4j.version&gt;2.18.0&lt;/log4j.version&gt;\n    &lt;/properties&gt;\n    \n    &lt;modules&gt;\n        &lt;module&gt;e-timer-model&lt;/module&gt;\n        &lt;module&gt;e-timer-persistence&lt;/module&gt;\n        &lt;module&gt;e-timer-service&lt;/module&gt;\n        &lt;module&gt;e-timer-standalone&lt;/module&gt;\n    &lt;/modules&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>module-info</strong></p>\n<pre><code>module org.afsilva.etimer.persistence {\n    requires java.persistence;\n    requires spring.data.commons;\n    requires spring.context;\n    requires transitive org.afsilva.etimer.model;\n    requires spring.data.jpa;\n    requires spring.orm;\n    requires spring.beans;\n    requires java.sql;\n    requires spring.jdbc;\n    requires spring.core;\n    requires spring.tx;\n    requires spring.instrument;\n    \n    exports org.afsilva.etimer.persistence.task;\n    exports org.afsilva.etimer.persistence;\n    \n    opens org.afsilva.etimer.persistence.task;\n    opens org.afsilva.etimer.persistence.project;\n    opens org.afsilva.etimer.persistence.workentry;\n    opens org.afsilva.etimer.persistence;\n}\n</code></pre>\n<p>Spring application context is being initialized like this</p>\n<pre><code>appCtx = new AnnotationConfigApplicationContext(ServiceConfig.class);\n</code></pre>\n<p>ServiceConfig class</p>\n<pre><code>package org.afsilva.etimer.service;\n\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ComponentScan(basePackages = &quot;org.afsilva.etimer&quot;)\npublic class ServiceConfig {\n\n}\n</code></pre>\n<p>when I try to run the application I get</p>\n<pre><code>13:21:39.466 [JavaFX Application Thread] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.\nException in thread &quot;JavaFX Application Thread&quot; java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1857)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1724)\n    at javafx.base@18.0.2/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base@18.0.2/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\n    at javafx.base@18.0.2/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics@18.0.2/javafx.scene.Node.fireEvent(Node.java:8797)\n    at javafx.controls@18.0.2/javafx.scene.control.Button.fire(Button.java:203)\n    at javafx.controls@18.0.2/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:208)\n    at javafx.controls@18.0.2/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)\n    at javafx.base@18.0.2/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\n    at javafx.base@18.0.2/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base@18.0.2/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.2/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base@18.0.2/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.base@18.0.2/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics@18.0.2/javafx.scene.Scene$MouseHandler.process(Scene.java:3881)\n    at javafx.graphics@18.0.2/javafx.scene.Scene.processMouseEvent(Scene.java:1874)\n    at javafx.graphics@18.0.2/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2607)\n    at javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\n    at javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\n    at javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\n    at javafx.graphics@18.0.2/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\n    at javafx.graphics@18.0.2/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\n    at javafx.graphics@18.0.2/com.sun.glass.ui.View.notifyMouse(View.java:937)\n    at javafx.graphics@18.0.2/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\n    at javafx.graphics@18.0.2/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:316)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:77)\n    at jdk.internal.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.base@18.0.2/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:275)\n    at javafx.fxml@18.0.2/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\n    at javafx.fxml@18.0.2/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1854)\n    ... 46 more\nCaused by: java.lang.NoClassDefFoundError: java/lang/instrument/IllegalClassFormatException\n    at spring.data.jpa@2.7.3/org.springframework.data.jpa.repository.config.JpaRepositoryConfigExtension.getConfigurationInspectionClassLoader(JpaRepositoryConfigExtension.java:239)\n    at spring.data.commons@2.7.3/org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:97)\n    at spring.data.commons@2.7.3/org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:159)\n    at spring.data.commons@2.7.3/org.springframework.data.repository.config.RepositoryBeanDefinitionRegistrarSupport.registerBeanDefinitions(RepositoryBeanDefinitionRegistrarSupport.java:106)\n    at spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:396)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\n    at spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:395)\n    at spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:157)\n    at spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:129)\n    at spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:343)\n    at spring.context@5.3.23/org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247)\n    at spring.context@5.3.23/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311)\n    at spring.context@5.3.23/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112)\n    at spring.context@5.3.23/org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)\n    at spring.context@5.3.23/org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)\n    at spring.context@5.3.23/org.springframework.context.annotation.AnnotationConfigApplicationContext.&lt;init&gt;(AnnotationConfigApplicationContext.java:93)\n    at org.afsilva.etimer.app/org.afsilva.etimer.ApplicationContext.&lt;clinit&gt;(ApplicationContext.java:12)\n    at org.afsilva.etimer.app/org.afsilva.etimer.task.TaskListDialog.initializeTaskList(TaskListDialog.java:62)\n    at org.afsilva.etimer.app/org.afsilva.etimer.task.TaskListDialog.&lt;init&gt;(TaskListDialog.java:53)\n    at org.afsilva.etimer.app/org.afsilva.etimer.myday.MyDayPane.listTasks(MyDayPane.java:39)\n    ... 57 more\nCaused by: java.lang.ClassNotFoundException: java.lang.instrument.IllegalClassFormatException\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 77 more\n</code></pre>\n<p>This is a javafx application, I suppose it has no influence on this issue.</p>\n<p>Please help</p>\n<p>=== Edit ===</p>\n<p>There is a strange behavior here. If I debug the application and go step by step through the initialization code the error does not occur. I wonder if this is some kind of race condition.. Even then I have another issue, which is a query to the database says that the table does not exist, so it seems that &quot;spring.jpa.hibernate.ddl-auto=update&quot; is not working.. :(</p>\n"},{"tags":["java","junit","mockito"],"answers":[{"comments":[{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":0,"creation_date":1363687615,"post_id":15494996,"comment_id":21939125,"body_markdown":"Be careful though, the annotations are useful but they don&#39;t protect you against to craft poor OO design (or to degrade it). Personally while I&#39;m happy to reduce boilerplate code, I loose the pain of code (or PITA) that is the trigger to change the design to a better one, so I and the team are paying attention to OO design. I feel that following OO design with principles like SOLID design or the GOOS ideas is much more important that choosing how to instantiate mocks.","body":"Be careful though, the annotations are useful but they don&#39;t protect you against to craft poor OO design (or to degrade it). Personally while I&#39;m happy to reduce boilerplate code, I loose the pain of code (or PITA) that is the trigger to change the design to a better one, so I and the team are paying attention to OO design. I feel that following OO design with principles like SOLID design or the GOOS ideas is much more important that choosing how to instantiate mocks."},{"owner":{"account_id":1744405,"reputation":28870,"user_id":1594933,"accept_rate":74,"display_name":"gontard"},"score":0,"creation_date":1363687627,"post_id":15494996,"comment_id":21939133,"body_markdown":"@Brice why ? if the class under test (`ArticleManager`) have too much dependencies, i will clearly see it. And this is off the subject, the question is just about &quot;how to instantiate mocks ?&quot;","body":"@Brice why ? if the class under test (<code>ArticleManager</code>) have too much dependencies, i will clearly see it. And this is off the subject, the question is just about &quot;how to instantiate mocks ?&quot;"},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":0,"creation_date":1363690239,"post_id":15494996,"comment_id":21940723,"body_markdown":"I should have said &quot;less obvious&quot; :) So actually @injectMocks will try it&#39;s best to inject mocks automatically without the user having to wire things (like we are used to do in spring or guice), so the object instantiation is hidden, you don&#39;t know if it&#39;s constructor injection or setter injection, that could be bothersome for the future usage of this object (reusability is one of the main benefit of good OO design).","body":"I should have said &quot;less obvious&quot; :) So actually @injectMocks will try it&#39;s best to inject mocks automatically without the user having to wire things (like we are used to do in spring or guice), so the object instantiation is hidden, you don&#39;t know if it&#39;s constructor injection or setter injection, that could be bothersome for the future usage of this object (reusability is one of the main benefit of good OO design)."},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":1,"creation_date":1363690276,"post_id":15494996,"comment_id":21940750,"body_markdown":"(follow up) If you don&#39;t see how this object is created you don&#39;t feel the pain about it, and future programmers might not react well if new functionality should be added. Anyway that is arguable both ways, I&#39;m just saying to be careful about it.","body":"(follow up) If you don&#39;t see how this object is created you don&#39;t feel the pain about it, and future programmers might not react well if new functionality should be added. Anyway that is arguable both ways, I&#39;m just saying to be careful about it."},{"owner":{"account_id":1744405,"reputation":28870,"user_id":1594933,"accept_rate":74,"display_name":"gontard"},"score":0,"creation_date":1363690764,"post_id":15494996,"comment_id":21941000,"body_markdown":"I am agree with you. I like the PITA idea. And thanks, i didn&#39;t know GOOS, it seems very interresting. Personnaly in my company, we use only constructor injection (no public setter | immutable object), so when i use `InjectMocks`, i really understand what it does. Although, i prefer the way described by @mlk in its answer (self contained tests).","body":"I am agree with you. I like the PITA idea. And thanks, i didn&#39;t know GOOS, it seems very interresting. Personnaly in my company, we use only constructor injection (no public setter | immutable object), so when i use <code>InjectMocks</code>, i really understand what it does. Although, i prefer the way described by @mlk in its answer (self contained tests)."},{"owner":{"account_id":1744250,"reputation":6709,"user_id":1594817,"accept_rate":69,"display_name":"Vinay Veluri"},"score":0,"creation_date":1363697275,"post_id":15494996,"comment_id":21945063,"body_markdown":"@Brice I agree with your comment,","body":"@Brice I agree with your comment,"},{"owner":{"account_id":1744250,"reputation":6709,"user_id":1594817,"accept_rate":69,"display_name":"Vinay Veluri"},"score":0,"creation_date":1363697394,"post_id":15494996,"comment_id":21945148,"body_markdown":"@Gontard, I understood the latter one more clear,  bottom line is to make test case more understandable, is that what it mean ?","body":"@Gontard, I understood the latter one more clear,  bottom line is to make test case more understandable, is that what it mean ?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":8,"creation_date":1363698142,"post_id":15494996,"comment_id":21945700,"body_markdown":"It is NOT CORRECT that these two are equivalent.  It is NOT TRUE that simpler code is the only advantage to using `MockitoJUnitRunner`.  For more information about the differences, see the question at http://stackoverflow.com/questions/10806345/runwithmockitojunitrunner-class-vs-mockitoannotations-initmocksthis/10812752#10812752 and my answer to it.","body":"It is NOT CORRECT that these two are equivalent.  It is NOT TRUE that simpler code is the only advantage to using <code>MockitoJUnitRunner</code>.  For more information about the differences, see the question at <a href=\"http://stackoverflow.com/questions/10806345/runwithmockitojunitrunner-class-vs-mockitoannotations-initmocksthis/10812752#10812752\" title=\"runwithmockitojunitrunner class vs mockitoannotations initmocksthis\">stackoverflow.com/questions/10806345/&hellip;</a> and my answer to it."},{"owner":{"account_id":1744405,"reputation":28870,"user_id":1594933,"accept_rate":74,"display_name":"gontard"},"score":0,"creation_date":1363701277,"post_id":15494996,"comment_id":21947902,"body_markdown":"@DavidWallace i correct my answer. Thanks for noticing it. And i learn something too :) Feel free to edit and improve my answer.","body":"@DavidWallace i correct my answer. Thanks for noticing it. And i learn something too :) Feel free to edit and improve my answer."},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":0,"creation_date":1363705756,"post_id":15494996,"comment_id":21951192,"body_markdown":"@gontard Even using constructor injection could become wrong. `@InjectMocks` isn&#39;t picky and try to choose the best matching, so it depends on the number of dependencies, and the constructors code anyway, but again the coder might not feel the experience of instantiating and wiring these collaborators. And might miss an opportunity to use other approaches like a builder approach (the Joshua Bloch ones) or using providers (same as guava&#39;s suppliers).","body":"@gontard Even using constructor injection could become wrong. <code>@InjectMocks</code> isn&#39;t picky and try to choose the best matching, so it depends on the number of dependencies, and the constructors code anyway, but again the coder might not feel the experience of instantiating and wiring these collaborators. And might miss an opportunity to use other approaches like a builder approach (the Joshua Bloch ones) or using providers (same as guava&#39;s suppliers)."},{"owner":{"account_id":1744405,"reputation":28870,"user_id":1594933,"accept_rate":74,"display_name":"gontard"},"score":0,"creation_date":1363706067,"post_id":15494996,"comment_id":21951395,"body_markdown":"IMHO the number of dependencies is clearly visible in the test. And the purpose of a unit test is to test a class not its builder.","body":"IMHO the number of dependencies is clearly visible in the test. And the purpose of a unit test is to test a class not its builder."},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":2,"creation_date":1363706110,"post_id":15494996,"comment_id":21951429,"body_markdown":"@Gontard Yeah sure dependencies are visible, but I&#39;ve seen code gone wrong using this approach. About using the `Collaborator collab = mock(Collaborator.class)`, in my opinion this way is certainly a valid approach. While this might tend to be verbose, you can gain in understandability and refactorability of the tests. Both ways have their pros and cons, I&#39;ve not yet decided which approach is better. Amyway it&#39;s always possible to write crap, and probably depends on the context and the coder.","body":"@Gontard Yeah sure dependencies are visible, but I&#39;ve seen code gone wrong using this approach. About using the <code>Collaborator collab = mock(Collaborator.class)</code>, in my opinion this way is certainly a valid approach. While this might tend to be verbose, you can gain in understandability and refactorability of the tests. Both ways have their pros and cons, I&#39;ve not yet decided which approach is better. Amyway it&#39;s always possible to write crap, and probably depends on the context and the coder."},{"owner":{"account_id":1744250,"reputation":6709,"user_id":1594817,"accept_rate":69,"display_name":"Vinay Veluri"},"score":0,"creation_date":1363761908,"post_id":15494996,"comment_id":21976081,"body_markdown":"@DavidWallace a valid point in your answer. what about the third one ? is that method suggested ?","body":"@DavidWallace a valid point in your answer. what about the third one ? is that method suggested ?"},{"owner":{"account_id":52748,"reputation":14581,"user_id":157672,"accept_rate":86,"display_name":"Michael Lloyd Lee mlk"},"score":0,"creation_date":1363772592,"post_id":15494996,"comment_id":21981356,"body_markdown":"@gontard On the point as to what unit tests are for: I disagree, the point of a test (in TDD) is to aid in the design of the class. It also gives quick feedback on if the class works as expected true, and a very good reason to write tests, but not the (only) reason for doing them.","body":"@gontard On the point as to what unit tests are for: I disagree, the point of a test (in TDD) is to aid in the design of the class. It also gives quick feedback on if the class works as expected true, and a very good reason to write tests, but not the (only) reason for doing them."},{"owner":{"account_id":1744405,"reputation":28870,"user_id":1594933,"accept_rate":74,"display_name":"gontard"},"score":1,"creation_date":1363773040,"post_id":15494996,"comment_id":21981600,"body_markdown":"@mlk i am totally agree with you. My english is not very good and it lacks nuances. My point was to insist on the UNIT word.","body":"@mlk i am totally agree with you. My english is not very good and it lacks nuances. My point was to insist on the UNIT word."},{"owner":{"account_id":6969149,"reputation":5128,"user_id":5346096,"display_name":"George Kargakis"},"score":0,"creation_date":1596205561,"post_id":15494996,"comment_id":111746260,"body_markdown":"In Junit5 there is the option of using [extension model](https://blog.codefx.org/design/architecture/junit-5-extension-model/). As described in [answer](https://stackoverflow.com/questions/40961057/how-to-use-mockito-with-junit5)","body":"In Junit5 there is the option of using <a href=\"https://blog.codefx.org/design/architecture/junit-5-extension-model/\" rel=\"nofollow noreferrer\">extension model</a>. As described in <a href=\"https://stackoverflow.com/questions/40961057/how-to-use-mockito-with-junit5\">answer</a>"}],"tags":[],"owner":{"account_id":1744405,"reputation":28870,"user_id":1594933,"accept_rate":74,"display_name":"gontard"},"comment_count":16,"down_vote_count":0,"up_vote_count":187,"is_accepted":true,"score":187,"last_activity_date":1606215007,"creation_date":1363683220,"answer_id":15494996,"question_id":15494926,"body_markdown":"**For the mocks initialization**, using the runner or the `MockitoAnnotations.initMocks` are strictly equivalent solutions. From the javadoc of the [MockitoJUnitRunner](https://www.javadoc.io/doc/org.mockito/mockito-core/2.2.28/org/mockito/junit/MockitoJUnitRunner.html) :\r\n\r\n&gt; JUnit 4.5 runner initializes mocks annotated with Mock, so that explicit usage of MockitoAnnotations.initMocks(Object) is not necessary. Mocks are initialized before each test method.\r\n\r\n----------\r\n\r\nThe first solution (with the `MockitoAnnotations.initMocks`) could be used when you have already configured a specific runner (`SpringJUnit4ClassRunner` for example) on your test case.\r\n\r\nThe second solution (with the `MockitoJUnitRunner`) is the more classic and my favorite. The code is simpler. Using a runner provides the great advantage of **[automatic validation of framework usage](https://www.javadoc.io/doc/org.mockito/mockito-core/2.2.28/org/mockito/Mockito.html#validateMockitoUsage())** (described by [@David Wallace](https://stackoverflow.com/users/1081110/david-wallace) in [this answer][1]).\r\n\r\nBoth solutions allows to share the mocks (and spies) between the test methods. Coupled with the [`@InjectMocks`](http://docs.mockito.googlecode.com/hg/latest/org/mockito/InjectMocks.html), they allow to write unit tests very quickly. The boilerplate mocking code is reduced, the tests are easier to read. For example:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class ArticleManagerTest {\r\n\r\n        @Mock private ArticleCalculator calculator;\r\n        @Mock(name = &quot;database&quot;) private ArticleDatabase dbMock;\r\n        @Spy private UserProvider userProvider = new ConsumerUserProvider();\r\n\r\n        @InjectMocks private ArticleManager manager;\r\n\r\n        @Test public void shouldDoSomething() {\r\n            manager.initiateArticle();\r\n            verify(database).addListener(any(ArticleListener.class));\r\n        }\r\n\r\n        @Test public void shouldDoSomethingElse() {\r\n            manager.finishArticle();\r\n            verify(database).removeListener(any(ArticleListener.class));\r\n        }\r\n    }\r\n\r\nPros: The code is minimal \r\n\r\nCons: Black magic. IMO it is mainly due to the @InjectMocks annotation. With this annotation  *&quot;you loose the pain of code&quot;* (see the great comments of [@Brice](https://stackoverflow.com/users/48136/brice))\r\n\r\n----------\r\n\r\nThe third solution is to create your mock on each test method. \r\nIt allow as explained by [@mlk](https://stackoverflow.com/users/157672/mlk) in its answer to have &quot;*self contained test*&quot;.\r\n\r\n    public class ArticleManagerTest {\r\n\r\n        @Test public void shouldDoSomething() {\r\n            // given\r\n            ArticleCalculator calculator = mock(ArticleCalculator.class);\r\n            ArticleDatabase database = mock(ArticleDatabase.class);\r\n            UserProvider userProvider = spy(new ConsumerUserProvider());\r\n            ArticleManager manager = new ArticleManager(calculator, \r\n                                                        userProvider, \r\n                                                        database);\r\n\r\n            // when \r\n            manager.initiateArticle();\r\n\r\n            // then \r\n            verify(database).addListener(any(ArticleListener.class));\r\n        }\r\n\r\n        @Test public void shouldDoSomethingElse() {\r\n            // given\r\n            ArticleCalculator calculator = mock(ArticleCalculator.class);\r\n            ArticleDatabase database = mock(ArticleDatabase.class);\r\n            UserProvider userProvider = spy(new ConsumerUserProvider());\r\n            ArticleManager manager = new ArticleManager(calculator, \r\n                                                        userProvider, \r\n                                                        database);\r\n\r\n            // when \r\n            manager.finishArticle();\r\n\r\n            // then\r\n            verify(database).removeListener(any(ArticleListener.class));\r\n        }\r\n    }\r\n\r\nPros: You clearly demonstrate how your api works (BDD...)\r\n\r\nCons: there is more boilerplate code. (The mocks creation)\r\n\r\n\r\n----------\r\n\r\n**My** recommandation is a compromise. Use the `@Mock` annotation with the `@RunWith(MockitoJUnitRunner.class)`, but do not use the `@InjectMocks` :\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class ArticleManagerTest {\r\n\r\n        @Mock private ArticleCalculator calculator;\r\n        @Mock private ArticleDatabase database;\r\n        @Spy private UserProvider userProvider = new ConsumerUserProvider();\r\n\r\n        @Test public void shouldDoSomething() {\r\n            // given\r\n            ArticleManager manager = new ArticleManager(calculator, \r\n                                                        userProvider, \r\n                                                        database);\r\n\r\n            // when \r\n            manager.initiateArticle();\r\n\r\n            // then \r\n            verify(database).addListener(any(ArticleListener.class));\r\n        }\r\n\r\n        @Test public void shouldDoSomethingElse() {\r\n            // given\r\n            ArticleManager manager = new ArticleManager(calculator, \r\n                                                        userProvider, \r\n                                                        database);\r\n\r\n            // when \r\n            manager.finishArticle();\r\n\r\n            // then \r\n            verify(database).removeListener(any(ArticleListener.class));\r\n        }\r\n    }\r\n\r\nPros: You clearly demonstrate how your api works (How my `ArticleManager` is instantiated). No boilerplate code.\r\n\r\nCons: The test is not self contained, less pain of code\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/10806345/runwithmockitojunitrunner-class-vs-mockitoannotations-initmocksthis/10812752#10812752","title":"Initialising mock objects - Mockito","body":"<p><strong>For the mocks initialization</strong>, using the runner or the <code>MockitoAnnotations.initMocks</code> are strictly equivalent solutions. From the javadoc of the <a href=\"https://www.javadoc.io/doc/org.mockito/mockito-core/2.2.28/org/mockito/junit/MockitoJUnitRunner.html\" rel=\"noreferrer\">MockitoJUnitRunner</a> :</p>\n<blockquote>\n<p>JUnit 4.5 runner initializes mocks annotated with Mock, so that explicit usage of MockitoAnnotations.initMocks(Object) is not necessary. Mocks are initialized before each test method.</p>\n</blockquote>\n<hr />\n<p>The first solution (with the <code>MockitoAnnotations.initMocks</code>) could be used when you have already configured a specific runner (<code>SpringJUnit4ClassRunner</code> for example) on your test case.</p>\n<p>The second solution (with the <code>MockitoJUnitRunner</code>) is the more classic and my favorite. The code is simpler. Using a runner provides the great advantage of <strong><a href=\"https://www.javadoc.io/doc/org.mockito/mockito-core/2.2.28/org/mockito/Mockito.html#validateMockitoUsage()\" rel=\"noreferrer\">automatic validation of framework usage</a></strong> (described by <a href=\"https://stackoverflow.com/users/1081110/david-wallace\">@David Wallace</a> in <a href=\"https://stackoverflow.com/questions/10806345/runwithmockitojunitrunner-class-vs-mockitoannotations-initmocksthis/10812752#10812752\">this answer</a>).</p>\n<p>Both solutions allows to share the mocks (and spies) between the test methods. Coupled with the <a href=\"http://docs.mockito.googlecode.com/hg/latest/org/mockito/InjectMocks.html\" rel=\"noreferrer\"><code>@InjectMocks</code></a>, they allow to write unit tests very quickly. The boilerplate mocking code is reduced, the tests are easier to read. For example:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class ArticleManagerTest {\n\n    @Mock private ArticleCalculator calculator;\n    @Mock(name = &quot;database&quot;) private ArticleDatabase dbMock;\n    @Spy private UserProvider userProvider = new ConsumerUserProvider();\n\n    @InjectMocks private ArticleManager manager;\n\n    @Test public void shouldDoSomething() {\n        manager.initiateArticle();\n        verify(database).addListener(any(ArticleListener.class));\n    }\n\n    @Test public void shouldDoSomethingElse() {\n        manager.finishArticle();\n        verify(database).removeListener(any(ArticleListener.class));\n    }\n}\n</code></pre>\n<p>Pros: The code is minimal</p>\n<p>Cons: Black magic. IMO it is mainly due to the @InjectMocks annotation. With this annotation  <em>&quot;you loose the pain of code&quot;</em> (see the great comments of <a href=\"https://stackoverflow.com/users/48136/brice\">@Brice</a>)</p>\n<hr />\n<p>The third solution is to create your mock on each test method.\nIt allow as explained by <a href=\"https://stackoverflow.com/users/157672/mlk\">@mlk</a> in its answer to have &quot;<em>self contained test</em>&quot;.</p>\n<pre><code>public class ArticleManagerTest {\n\n    @Test public void shouldDoSomething() {\n        // given\n        ArticleCalculator calculator = mock(ArticleCalculator.class);\n        ArticleDatabase database = mock(ArticleDatabase.class);\n        UserProvider userProvider = spy(new ConsumerUserProvider());\n        ArticleManager manager = new ArticleManager(calculator, \n                                                    userProvider, \n                                                    database);\n\n        // when \n        manager.initiateArticle();\n\n        // then \n        verify(database).addListener(any(ArticleListener.class));\n    }\n\n    @Test public void shouldDoSomethingElse() {\n        // given\n        ArticleCalculator calculator = mock(ArticleCalculator.class);\n        ArticleDatabase database = mock(ArticleDatabase.class);\n        UserProvider userProvider = spy(new ConsumerUserProvider());\n        ArticleManager manager = new ArticleManager(calculator, \n                                                    userProvider, \n                                                    database);\n\n        // when \n        manager.finishArticle();\n\n        // then\n        verify(database).removeListener(any(ArticleListener.class));\n    }\n}\n</code></pre>\n<p>Pros: You clearly demonstrate how your api works (BDD...)</p>\n<p>Cons: there is more boilerplate code. (The mocks creation)</p>\n<hr />\n<p><strong>My</strong> recommandation is a compromise. Use the <code>@Mock</code> annotation with the <code>@RunWith(MockitoJUnitRunner.class)</code>, but do not use the <code>@InjectMocks</code> :</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class ArticleManagerTest {\n\n    @Mock private ArticleCalculator calculator;\n    @Mock private ArticleDatabase database;\n    @Spy private UserProvider userProvider = new ConsumerUserProvider();\n\n    @Test public void shouldDoSomething() {\n        // given\n        ArticleManager manager = new ArticleManager(calculator, \n                                                    userProvider, \n                                                    database);\n\n        // when \n        manager.initiateArticle();\n\n        // then \n        verify(database).addListener(any(ArticleListener.class));\n    }\n\n    @Test public void shouldDoSomethingElse() {\n        // given\n        ArticleManager manager = new ArticleManager(calculator, \n                                                    userProvider, \n                                                    database);\n\n        // when \n        manager.finishArticle();\n\n        // then \n        verify(database).removeListener(any(ArticleListener.class));\n    }\n}\n</code></pre>\n<p>Pros: You clearly demonstrate how your api works (How my <code>ArticleManager</code> is instantiated). No boilerplate code.</p>\n<p>Cons: The test is not self contained, less pain of code</p>\n"},{"comments":[{"owner":{"account_id":1744250,"reputation":6709,"user_id":1594817,"accept_rate":69,"display_name":"Vinay Veluri"},"score":1,"creation_date":1363696920,"post_id":15496064,"comment_id":21944811,"body_markdown":"If MOCK is involved in Integration tests also, will it makes sense ?","body":"If MOCK is involved in Integration tests also, will it makes sense ?"},{"owner":{"account_id":2503008,"reputation":740,"user_id":2177580,"display_name":"emd"},"score":2,"creation_date":1363697330,"post_id":15496064,"comment_id":21945103,"body_markdown":"actually it won&#39;t, your right. I just wanted to show to possibilities of Mockito. For instance if your use RESTFuse you have to user their runner so you can initialize mocks with  MockitoAnnotations.initMocks(this);","body":"actually it won&#39;t, your right. I just wanted to show to possibilities of Mockito. For instance if your use RESTFuse you have to user their runner so you can initialize mocks with  MockitoAnnotations.initMocks(this);"}],"tags":[],"owner":{"account_id":2503008,"reputation":740,"user_id":2177580,"display_name":"emd"},"comment_count":2,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1363697417,"creation_date":1363686492,"answer_id":15496064,"question_id":15494926,"body_markdown":"There is a neat way of doing this.\r\n\r\n - If it&#39;s an Unit Test you can do this:\r\n\r\n        @RunWith(MockitoJUnitRunner.class)\r\n        public class MyUnitTest {\r\n\r\n            @Mock\r\n            private MyFirstMock myFirstMock;\r\n\r\n            @Mock\r\n            private MySecondMock mySecondMock;\r\n\r\n            @Spy\r\n            private MySpiedClass mySpiedClass = new MySpiedClass();\r\n\r\n            // It&#39;s gonna inject the 2 mocks and the spied object per reflection to this object\r\n            // The java doc of @InjectMocks explains it really well how and when it does the injection\r\n            @InjectMocks\r\n            private MyClassToTest myClassToTest;\r\n\r\n            @Test\r\n            public void testSomething() {\r\n            }\r\n        }\r\n\r\n - EDIT: If it&#39;s an Integration test you can do this(not intended to be used that way with Spring. Just showcase that you can initialize mocks with diferent Runners):\r\n\r\n        @RunWith(SpringJUnit4ClassRunner.class)\r\n        @ContextConfiguration(&quot;aplicationContext.xml&quot;)\r\n        public class MyIntegrationTest {\r\n\r\n            @Mock\r\n            private MyFirstMock myFirstMock;\r\n\r\n            @Mock\r\n            private MySecondMock mySecondMock;\r\n\r\n            @Spy\r\n            private MySpiedClass mySpiedClass = new MySpiedClass();\r\n\r\n            // It&#39;s gonna inject the 2 mocks and the spied object per reflection to this object\r\n            // The java doc of @InjectMocks explains it really well how and when it does the injection\r\n            @InjectMocks\r\n            private MyClassToTest myClassToTest;\r\n\r\n            @Before\r\n            public void setUp() throws Exception {\r\n                  MockitoAnnotations.initMocks(this);\r\n            }\r\n\r\n            @Test\r\n            public void testSomething() {\r\n            }\r\n        }","title":"Initialising mock objects - Mockito","body":"<p>There is a neat way of doing this.</p>\n\n<ul>\n<li><p>If it's an Unit Test you can do this:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class MyUnitTest {\n\n    @Mock\n    private MyFirstMock myFirstMock;\n\n    @Mock\n    private MySecondMock mySecondMock;\n\n    @Spy\n    private MySpiedClass mySpiedClass = new MySpiedClass();\n\n    // It's gonna inject the 2 mocks and the spied object per reflection to this object\n    // The java doc of @InjectMocks explains it really well how and when it does the injection\n    @InjectMocks\n    private MyClassToTest myClassToTest;\n\n    @Test\n    public void testSomething() {\n    }\n}\n</code></pre></li>\n<li><p>EDIT: If it's an Integration test you can do this(not intended to be used that way with Spring. Just showcase that you can initialize mocks with diferent Runners):</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(\"aplicationContext.xml\")\npublic class MyIntegrationTest {\n\n    @Mock\n    private MyFirstMock myFirstMock;\n\n    @Mock\n    private MySecondMock mySecondMock;\n\n    @Spy\n    private MySpiedClass mySpiedClass = new MySpiedClass();\n\n    // It's gonna inject the 2 mocks and the spied object per reflection to this object\n    // The java doc of @InjectMocks explains it really well how and when it does the injection\n    @InjectMocks\n    private MyClassToTest myClassToTest;\n\n    @Before\n    public void setUp() throws Exception {\n          MockitoAnnotations.initMocks(this);\n    }\n\n    @Test\n    public void testSomething() {\n    }\n}\n</code></pre></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1744250,"reputation":6709,"user_id":1594817,"accept_rate":69,"display_name":"Vinay Veluri"},"score":0,"creation_date":1363697021,"post_id":15496489,"comment_id":21944869,"body_markdown":"Is there any other advantage over using mock(XX.class) except making the test case to be self contained ?","body":"Is there any other advantage over using mock(XX.class) except making the test case to be self contained ?"},{"owner":{"account_id":475146,"reputation":4521,"user_id":885306,"accept_rate":85,"display_name":"Karu"},"score":4,"creation_date":1433218449,"post_id":15496489,"comment_id":49243818,"body_markdown":"Less magic to have to understand in order to read the test. You declare the variable, and give it a value - no annotations, reflection etc.","body":"Less magic to have to understand in order to read the test. You declare the variable, and give it a value - no annotations, reflection etc."}],"tags":[],"owner":{"account_id":52748,"reputation":14581,"user_id":157672,"accept_rate":86,"display_name":"Michael Lloyd Lee mlk"},"comment_count":2,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1363687616,"creation_date":1363687616,"answer_id":15496489,"question_id":15494926,"body_markdown":"MockitoAnnotations &amp; the runner have been well discussed above, so I&#39;m going to throw in my tuppence for the unloved:\r\n\r\n    XXX mockedXxx = mock(XXX.class);\r\n\r\nI use this because I find it a little bit more descriptive and I prefer (not out right ban) unit tests not to use member variables as I like my tests to be (as much as they can be) self contained.","title":"Initialising mock objects - Mockito","body":"<p>MockitoAnnotations &amp; the runner have been well discussed above, so I'm going to throw in my tuppence for the unloved:</p>\n\n<pre><code>XXX mockedXxx = mock(XXX.class);\n</code></pre>\n\n<p>I use this because I find it a little bit more descriptive and I prefer (not out right ban) unit tests not to use member variables as I like my tests to be (as much as they can be) self contained.</p>\n"},{"comments":[{"owner":{"account_id":165872,"reputation":12769,"user_id":389649,"display_name":"Cristan"},"score":5,"creation_date":1521028272,"post_id":31575978,"comment_id":85556381,"body_markdown":"In Kotlin, the rule looks like this:\n`@get:Rule val mockitoRule: MockitoRule = MockitoJUnit.rule()`","body":"In Kotlin, the rule looks like this: <code>@get:Rule val mockitoRule: MockitoRule = MockitoJUnit.rule()</code>"}],"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"comment_count":1,"down_vote_count":1,"up_vote_count":34,"is_accepted":false,"score":33,"last_activity_date":1458402111,"creation_date":1437609397,"answer_id":31575978,"question_id":15494926,"body_markdown":"There is now (as of v1.10.7) a fourth way to instantiate mocks, which is using a JUnit4 _rule_ called [MockitoRule][rule].\r\n\r\n    @RunWith(JUnit4.class)   // or a different runner of your choice\r\n    public class YourTest\r\n      @Rule public MockitoRule rule = MockitoJUnit.rule();\r\n      @Mock public YourMock yourMock;\r\n\r\n      @Test public void yourTestMethod() { /* ... */ }\r\n    }\r\n\r\nJUnit looks for [subclasses of TestRule annotated with @Rule][testrule], and uses them to _wrap the test Statements that the Runner provides_. The upshot of this is that you can extract @Before methods, @After methods, and even try...catch wrappers into rules. You can even interact with these from within your test, the way that [ExpectedException][] does.\r\n\r\nMockitoRule behaves _almost exactly like MockitoJUnitRunner_, except that you can use any other runner, such as [Parameterized][] (which allows your test constructors to take arguments so your tests can be run multiple times), or Robolectric&#39;s test runner (so its classloader can provide Java replacements for Android native classes). This makes it strictly more flexible to use in recent JUnit and Mockito versions.\r\n\r\nIn summary:\r\n\r\n - `Mockito.mock()`: Direct invocation with no annotation support or usage validation.\r\n - `MockitoAnnotations.initMocks(this)`: Annotation support, no usage validation.\r\n - `MockitoJUnitRunner`: Annotation support and usage validation, but you must use that runner.\r\n - `MockitoRule`: Annotation support and usage validation with any JUnit runner.\r\n\r\nSee also: [How JUnit @Rule works?][rule-so]\r\n\r\n[rule]: http://site.mockito.org/mockito/docs/current/org/mockito/junit/MockitoRule.html\r\n[testrule]: http://junit.org/apidocs/org/junit/Rule.html\r\n[expectedexception]: http://junit.org/apidocs/org/junit/rules/ExpectedException.html\r\n[parameterized]: http://junit.org/apidocs/org/junit/runners/Parameterized.html\r\n[rule-so]: https://stackoverflow.com/q/13489388/1426891","title":"Initialising mock objects - Mockito","body":"<p>There is now (as of v1.10.7) a fourth way to instantiate mocks, which is using a JUnit4 <em>rule</em> called <a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/junit/MockitoRule.html\" rel=\"noreferrer\">MockitoRule</a>.</p>\n\n<pre><code>@RunWith(JUnit4.class)   // or a different runner of your choice\npublic class YourTest\n  @Rule public MockitoRule rule = MockitoJUnit.rule();\n  @Mock public YourMock yourMock;\n\n  @Test public void yourTestMethod() { /* ... */ }\n}\n</code></pre>\n\n<p>JUnit looks for <a href=\"http://junit.org/apidocs/org/junit/Rule.html\" rel=\"noreferrer\">subclasses of TestRule annotated with @Rule</a>, and uses them to <em>wrap the test Statements that the Runner provides</em>. The upshot of this is that you can extract @Before methods, @After methods, and even try...catch wrappers into rules. You can even interact with these from within your test, the way that <a href=\"http://junit.org/apidocs/org/junit/rules/ExpectedException.html\" rel=\"noreferrer\">ExpectedException</a> does.</p>\n\n<p>MockitoRule behaves <em>almost exactly like MockitoJUnitRunner</em>, except that you can use any other runner, such as <a href=\"http://junit.org/apidocs/org/junit/runners/Parameterized.html\" rel=\"noreferrer\">Parameterized</a> (which allows your test constructors to take arguments so your tests can be run multiple times), or Robolectric's test runner (so its classloader can provide Java replacements for Android native classes). This makes it strictly more flexible to use in recent JUnit and Mockito versions.</p>\n\n<p>In summary:</p>\n\n<ul>\n<li><code>Mockito.mock()</code>: Direct invocation with no annotation support or usage validation.</li>\n<li><code>MockitoAnnotations.initMocks(this)</code>: Annotation support, no usage validation.</li>\n<li><code>MockitoJUnitRunner</code>: Annotation support and usage validation, but you must use that runner.</li>\n<li><code>MockitoRule</code>: Annotation support and usage validation with any JUnit runner.</li>\n</ul>\n\n<p>See also: <a href=\"https://stackoverflow.com/q/13489388/1426891\">How JUnit @Rule works?</a></p>\n"},{"tags":[],"owner":{"account_id":187950,"reputation":2035,"user_id":426371,"accept_rate":82,"display_name":"neXus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542977076,"creation_date":1542977076,"answer_id":53446957,"question_id":15494926,"body_markdown":"The other answers are great and contain more detail if you want/need them.  \r\nIn addition to those, I would like to add a TL;DR:\r\n\r\n 1. Prefer to use\r\n    - `@RunWith(MockitoJUnitRunner.class)`\r\n 2. If you cannot (because you already use a different runner), prefer to use\r\n    - `@Rule public MockitoRule rule = MockitoJUnit.rule();`\r\n 3. Similar to (2), but you should **not** use this anymore:\r\n    - ```@Before public void initMocks() {\r\n            MockitoAnnotations.initMocks(this);\r\n        }\r\n      ```\r\n 4. If you want to use a mock in just one of the tests and don&#39;t want to expose it to other tests in the same test class, use\r\n    - `X x = mock(X.class)`\r\n\r\n(1) and (2) and (3) are mutually exclusive.  \r\n(4) can be used in combination with the others.","title":"Initialising mock objects - Mockito","body":"<p>The other answers are great and contain more detail if you want/need them.<br>\nIn addition to those, I would like to add a TL;DR:</p>\n\n<ol>\n<li>Prefer to use\n\n<ul>\n<li><code>@RunWith(MockitoJUnitRunner.class)</code></li>\n</ul></li>\n<li>If you cannot (because you already use a different runner), prefer to use\n\n<ul>\n<li><code>@Rule public MockitoRule rule = MockitoJUnit.rule();</code></li>\n</ul></li>\n<li>Similar to (2), but you should <strong>not</strong> use this anymore:\n\n<ul>\n<li><code>@Before public void initMocks() {\n    MockitoAnnotations.initMocks(this);\n}\n</code></li>\n</ul></li>\n<li>If you want to use a mock in just one of the tests and don't want to expose it to other tests in the same test class, use\n\n<ul>\n<li><code>X x = mock(X.class)</code></li>\n</ul></li>\n</ol>\n\n<p>(1) and (2) and (3) are mutually exclusive.<br>\n(4) can be used in combination with the others.</p>\n"},{"tags":[],"owner":{"account_id":1964307,"reputation":3683,"user_id":1764947,"display_name":"fl0w"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1585735242,"creation_date":1585735242,"answer_id":60968283,"question_id":15494926,"body_markdown":"A little example for JUnit 5 Jupiter, the &quot;RunWith&quot; was removed you now need to use the Extensions using the &quot;@ExtendWith&quot; Annotation.\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class FooTest {\r\n\r\n      @InjectMocks\r\n      ClassUnderTest test = new ClassUnderTest();\r\n\r\n      @Spy\r\n      SomeInject bla = new SomeInject();\r\n    }\r\n","title":"Initialising mock objects - Mockito","body":"<p>A little example for JUnit 5 Jupiter, the \"RunWith\" was removed you now need to use the Extensions using the \"@ExtendWith\" Annotation.</p>\n\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass FooTest {\n\n  @InjectMocks\n  ClassUnderTest test = new ClassUnderTest();\n\n  @Spy\n  SomeInject bla = new SomeInject();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3793708,"reputation":7679,"user_id":3149528,"accept_rate":50,"display_name":"Slawomir Jaranowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1614722262,"creation_date":1614722262,"answer_id":66447754,"question_id":15494926,"body_markdown":"In te lastest version of `Mockito` the method [`MockitoAnnotations.initMocks`][1] is deprecated\r\n\r\nPreferred way is use\r\n - [`MockitoJUnitRunner`][2] or [`MockitoRule`][3] for `JUnit4`\r\n - [`MockitoExtension`][4] for `JUnit5`\r\n - [`MockitoTestNGListener`][5] for `TestNG`\r\n\r\nIf you can not use dedicated runner/extension you can use [`MockitoSession`][6]\r\n\r\n[1]: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockitoAnnotations.html\r\n[2]: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/junit/MockitoJUnitRunner.html\r\n[3]: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/junit/MockitoRule.html\r\n[4]: https://javadoc.io/doc/org.mockito/mockito-junit-jupiter/latest/org/mockito/junit/jupiter/MockitoExtension.html\r\n[5]: https://javadoc.io/doc/org.mockito/mockito-testng/latest/org/mockito/testng/MockitoTestNGListener.html\r\n[6]: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockitoSession.html","title":"Initialising mock objects - Mockito","body":"<p>In te lastest version of <code>Mockito</code> the method <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockitoAnnotations.html\" rel=\"noreferrer\"><code>MockitoAnnotations.initMocks</code></a> is deprecated</p>\n<p>Preferred way is use</p>\n<ul>\n<li><a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/junit/MockitoJUnitRunner.html\" rel=\"noreferrer\"><code>MockitoJUnitRunner</code></a> or <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/junit/MockitoRule.html\" rel=\"noreferrer\"><code>MockitoRule</code></a> for <code>JUnit4</code></li>\n<li><a href=\"https://javadoc.io/doc/org.mockito/mockito-junit-jupiter/latest/org/mockito/junit/jupiter/MockitoExtension.html\" rel=\"noreferrer\"><code>MockitoExtension</code></a> for <code>JUnit5</code></li>\n<li><a href=\"https://javadoc.io/doc/org.mockito/mockito-testng/latest/org/mockito/testng/MockitoTestNGListener.html\" rel=\"noreferrer\"><code>MockitoTestNGListener</code></a> for <code>TestNG</code></li>\n</ul>\n<p>If you can not use dedicated runner/extension you can use <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockitoSession.html\" rel=\"noreferrer\"><code>MockitoSession</code></a></p>\n"},{"comments":[{"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"score":0,"creation_date":1647364835,"post_id":68701517,"comment_id":126350880,"body_markdown":"I am converting code that uses JUnit4 and Mockito 2 to Jupiter and Mockito 3. Thank you for this up-to-date answer! Updating  `MockitoAnnotations.initMocks(this);` to example 1 worked great. Most of the other answers are now obsolete.","body":"I am converting code that uses JUnit4 and Mockito 2 to Jupiter and Mockito 3. Thank you for this up-to-date answer! Updating  <code>MockitoAnnotations.initMocks(this);</code> to example 1 worked great. Most of the other answers are now obsolete."},{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":2,"creation_date":1652169386,"post_id":68701517,"comment_id":127534619,"body_markdown":"Actually it has been deprecated in [Mockito 3.4.0](https://www.javadoc.io/doc/org.mockito/mockito-core/3.4.0/org/mockito/MockitoAnnotations.html), not in Mockito 3. You won&#39;t find `openMocks` method in [Mockito 3.3.0](https://www.javadoc.io/doc/org.mockito/mockito-core/3.3.0/org/mockito/MockitoAnnotations.html)","body":"Actually it has been deprecated in <a href=\"https://www.javadoc.io/doc/org.mockito/mockito-core/3.4.0/org/mockito/MockitoAnnotations.html\" rel=\"nofollow noreferrer\">Mockito 3.4.0</a>, not in Mockito 3. You won&#39;t find <code>openMocks</code> method in <a href=\"https://www.javadoc.io/doc/org.mockito/mockito-core/3.3.0/org/mockito/MockitoAnnotations.html\" rel=\"nofollow noreferrer\">Mockito 3.3.0</a>"}],"tags":[],"owner":{"account_id":12565201,"reputation":4559,"user_id":9141437,"display_name":"Thanthu"},"comment_count":2,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1628525103,"creation_date":1628431414,"answer_id":68701517,"question_id":15494926,"body_markdown":"**1. Using MockitoAnnotations.openMocks()**:\r\n\r\nThe `MockitoAnnotations.initMock()` method in Mockito 2 is deprecated and replaced with `MockitoAnnotations.openMocks()` in Mockito 3. The `MockitoAnnotations.openMocks()` method returns an instance of `AutoClosable` which can be used to close the resource after the test. Below is an example using `MockitoAnnotations.openMocks()`.\r\n\r\n    import static org.junit.jupiter.api.Assertions.*;\r\n    import static org.mockito.Mockito.times;\r\n    import static org.mockito.Mockito.verify;\r\n    import static org.mockito.Mockito.when;\r\n    \r\n    import org.junit.jupiter.api.AfterEach;\r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.mockito.Mock;\r\n    import org.mockito.MockitoAnnotations;\r\n    \r\n    \r\n    class MyTestClass {\r\n    \r\n    \tAutoCloseable openMocks;\r\n    \r\n    \t@BeforeEach\r\n    \tvoid setUp() {\r\n    \t\topenMocks = MockitoAnnotations.openMocks(this);\r\n    \t\t// my setup code...\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tvoid myTest() {\r\n    \t\t// my test code...\r\n    \t\t\r\n    \t}\r\n    \r\n    \t@AfterEach\r\n    \tvoid tearDown() throws Exception {\r\n            // my tear down code...\r\n    \t\topenMocks.close();\r\n    \t}\r\n    \r\n    }\r\n\r\n**2. Using @ExtendWith(MockitoExtension.class)**:\r\n\r\nAs of JUnit5 `@RunWith` has been removed. Below is an example using `@ExtendWith`:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class MyTestClass {\r\n    \r\n        @BeforeEach\r\n        void setUp() {\r\n            // my setup code...\r\n        }\r\n    \r\n        @Test\r\n        void myTest() {\r\n            // my test code...\r\n    \r\n        }\r\n    \r\n        @AfterEach\r\n        void tearDown() throws Exception {\r\n            // my tear down code...\r\n        }\r\n    \r\n    }\r\n\r\n\r\n","title":"Initialising mock objects - Mockito","body":"<p><strong>1. Using MockitoAnnotations.openMocks()</strong>:</p>\n<p>The <code>MockitoAnnotations.initMock()</code> method in Mockito 2 is deprecated and replaced with <code>MockitoAnnotations.openMocks()</code> in Mockito 3. The <code>MockitoAnnotations.openMocks()</code> method returns an instance of <code>AutoClosable</code> which can be used to close the resource after the test. Below is an example using <code>MockitoAnnotations.openMocks()</code>.</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.times;\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\n\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\n\n\nclass MyTestClass {\n\n    AutoCloseable openMocks;\n\n    @BeforeEach\n    void setUp() {\n        openMocks = MockitoAnnotations.openMocks(this);\n        // my setup code...\n    }\n\n    @Test\n    void myTest() {\n        // my test code...\n        \n    }\n\n    @AfterEach\n    void tearDown() throws Exception {\n        // my tear down code...\n        openMocks.close();\n    }\n\n}\n</code></pre>\n<p><strong>2. Using @ExtendWith(MockitoExtension.class)</strong>:</p>\n<p>As of JUnit5 <code>@RunWith</code> has been removed. Below is an example using <code>@ExtendWith</code>:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass MyTestClass {\n\n    @BeforeEach\n    void setUp() {\n        // my setup code...\n    }\n\n    @Test\n    void myTest() {\n        // my test code...\n\n    }\n\n    @AfterEach\n    void tearDown() throws Exception {\n        // my tear down code...\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1744250,"reputation":6709,"user_id":1594817,"accept_rate":69,"display_name":"Vinay Veluri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366551,"favorite_count":0,"down_vote_count":0,"up_vote_count":174,"accepted_answer_id":15494996,"answer_count":8,"score":174,"last_activity_date":1665910889,"creation_date":1363682962,"question_id":15494926,"body_markdown":"There are many ways to initialize a mock object using MockIto.\r\nWhat is best way among these ?\r\n\r\n1.\r\n\r\n     public class SampleBaseTestCase {\r\n   \r\n       @Before public void initMocks() {\r\n           MockitoAnnotations.initMocks(this);\r\n       }\r\n\r\n2.\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n\r\n3.\r\n\r\n    mock(XXX.class);\r\n\r\n \r\nsuggest me if there are any other ways better than these... ","title":"Initialising mock objects - Mockito","body":"<p>There are many ways to initialize a mock object using MockIto.\nWhat is best way among these ?</p>\n<p>1.</p>\n<pre><code> public class SampleBaseTestCase {\n\n   @Before public void initMocks() {\n       MockitoAnnotations.initMocks(this);\n   }\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\n</code></pre>\n<ol start=\"3\">\n<li></li>\n</ol>\n<pre><code>mock(XXX.class);\n</code></pre>\n<p>suggest me if there are any other ways better than these...</p>\n"},{"tags":["java","spring","spring-security","spring-test","spring-security-test"],"answers":[{"comments":[{"owner":{"account_id":11410663,"reputation":23,"user_id":8364897,"display_name":"odxrs"},"score":0,"creation_date":1666109227,"post_id":74083610,"comment_id":130855536,"body_markdown":"Ahh that has solved my problem. Thanks! The problem was that I was passing CustommUserDetails object to the UsernamePasswordAuthenticationToken. Instead it should have been principal which is String. Thanks for helping :)","body":"Ahh that has solved my problem. Thanks! The problem was that I was passing CustommUserDetails object to the UsernamePasswordAuthenticationToken. Instead it should have been principal which is String. Thanks for helping :)"}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665875386,"creation_date":1665875386,"answer_id":74083610,"question_id":74078683,"body_markdown":"You right. It is because the authentication logic in your production codes are different from the test. In production codes it configure a string type principal to the `Authentication` while `@WithMockUser` / `@WithUserDetails` configure a non-string type principal.\r\n\r\nImplement a custom `@WithMockCustomUser` should work as long as you configure a string type principal to `Authentication`. \r\n\r\nThe following implementation should solve your problem :\r\n\r\n``` java\r\n@Target({ ElementType.METHOD, ElementType.TYPE })\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Inherited\r\n@WithSecurityContext(factory = WithMockCustomUserSecurityContextFactory.class)\r\npublic @interface WithMockCustomUser {\r\n\r\n\tString[] authorities() default {};\r\n\r\n\tString principal() default &quot;foo-principal&quot;;\r\n\r\n}\r\n```\r\n\r\n``` java\r\npublic class WithMockCustomUserSecurityContextFactory\r\n\t\timplements WithSecurityContextFactory&lt;WithMockCustomUser&gt; {\r\n\r\n\t@Override\r\n\tpublic SecurityContext createSecurityContext(WithMockCustomUser withUser) {\r\n\r\n\t\tList&lt;GrantedAuthority&gt; grantedAuthorities = new ArrayList&lt;&gt;();\r\n\t\tfor (String authority : withUser.authorities()) {\r\n\t\t\tgrantedAuthorities.add(new SimpleGrantedAuthority(authority));\r\n\t\t}\r\n\r\n\t\tAuthentication authentication = UsernamePasswordAuthenticationToken.authenticated(withUser.principal(),\r\n\t\t\t\t&quot;somePassword&quot;, grantedAuthorities);\r\n\t\tSecurityContext context = SecurityContextHolder.createEmptyContext();\r\n\t\tcontext.setAuthentication(authentication);\r\n\t\treturn context;\r\n\t}\r\n}\r\n```\r\n\r\nAnd use it in your test :\r\n\r\n``` java\r\n@Test\r\n@WithMockCustomUser(principal=&quot;janedoe&quot;)\r\npublic void test() {\r\n    // your test code\r\n}\r\n```","title":"Spring Security testing: .getPrincipal() returning different objects in app and tests","body":"<p>You right. It is because the authentication logic in your production codes are different from the test. In production codes it configure a string type principal to the <code>Authentication</code> while <code>@WithMockUser</code> / <code>@WithUserDetails</code> configure a non-string type principal.</p>\n<p>Implement a custom <code>@WithMockCustomUser</code> should work as long as you configure a string type principal to <code>Authentication</code>.</p>\n<p>The following implementation should solve your problem :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target({ ElementType.METHOD, ElementType.TYPE })\n@Retention(RetentionPolicy.RUNTIME)\n@Inherited\n@WithSecurityContext(factory = WithMockCustomUserSecurityContextFactory.class)\npublic @interface WithMockCustomUser {\n\n    String[] authorities() default {};\n\n    String principal() default &quot;foo-principal&quot;;\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class WithMockCustomUserSecurityContextFactory\n        implements WithSecurityContextFactory&lt;WithMockCustomUser&gt; {\n\n    @Override\n    public SecurityContext createSecurityContext(WithMockCustomUser withUser) {\n\n        List&lt;GrantedAuthority&gt; grantedAuthorities = new ArrayList&lt;&gt;();\n        for (String authority : withUser.authorities()) {\n            grantedAuthorities.add(new SimpleGrantedAuthority(authority));\n        }\n\n        Authentication authentication = UsernamePasswordAuthenticationToken.authenticated(withUser.principal(),\n                &quot;somePassword&quot;, grantedAuthorities);\n        SecurityContext context = SecurityContextHolder.createEmptyContext();\n        context.setAuthentication(authentication);\n        return context;\n    }\n}\n</code></pre>\n<p>And use it in your test :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\n@WithMockCustomUser(principal=&quot;janedoe&quot;)\npublic void test() {\n    // your test code\n}\n</code></pre>\n"}],"owner":{"account_id":11410663,"reputation":23,"user_id":8364897,"display_name":"odxrs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74083610,"answer_count":1,"score":1,"last_activity_date":1665910520,"creation_date":1665830133,"question_id":74078683,"body_markdown":"I&#39;m making a Reddit clone as one of the projects for my portfolio.\r\n\r\nThe problem I&#39;m unable to solve (I&#39;m a beginner) is this:\r\n\r\nI have a CommentController (REST) that&#39;s handling all the api calls regarding comments. There&#39;s an endpoint for creating a comment:\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;Comment&gt; createComment(@Valid @RequestBody CommentDto commentDto, BindingResult bindingResult) {\r\n        if (bindingResult.hasErrors()) throw new DtoValidationException(bindingResult.getAllErrors());\r\n        URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/comments/&quot;).toUriString());\r\n        Comment comment = commentService.save(commentDto);\r\n        return ResponseEntity.created(uri).body(comment);\r\n    }\r\n\r\nIn my CommentService class, this is the method for saving a comment made by currently logged in user:\r\n\r\n    @Override\r\n    public Comment save(CommentDto commentDto) {\r\n        Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n        Optional&lt;User&gt; userOptional = userRepository.findUserByUsername((String) principal);\r\n        if (userOptional.isPresent()) {\r\n            User user = userOptional.get();\r\n            Optional&lt;Post&gt; postOptional = postRepository.findById(commentDto.getPostId());\r\n            if (postOptional.isPresent()) {\r\n                Post post = postOptional.get();\r\n                Comment comment = new Comment(user, commentDto.getText(), post);\r\n                user.getComments().add(comment);\r\n                post.getComments().add(comment);\r\n                post.setCommentsCounter(post.getCommentsCounter());\r\n                return comment;\r\n            } else {\r\n                throw new PostNotFoundException(commentDto.getPostId());\r\n            }\r\n        } else {\r\n            throw new UserNotFoundException((String) principal);\r\n        }\r\n    }\r\n\r\nThe app is running normally with no exceptions, and comment is saved to the database.\r\n\r\nI&#39;m writing an integration test for that controller, I used @WithMockUser(username = &quot;janedoe&quot;, password = &quot;password&quot;) on a test class, and I kept getting this exception:\r\n\r\n    ClassCastException: UserDetails can not be converted to String\r\n\r\nI realized that the problem is with this two lines in save method:\r\n\r\n    Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n    Optional&lt;User&gt; userOptional = userRepository.findUserByUsername((String) principal);\r\n\r\nWhat I don&#39;t get is why are those to lines throwing exception *only* in tests. When the app is running, everything is okay.\r\n\r\nI guess that for some reason in tests the .getPrincipal() method is not returning a String (username), but the whole UserDetails object. I&#39;m not sure how to make it return username in tests.\r\n\r\nWhat have I tried to solve it:\r\n\r\n1. Changing @WithMockUser to @WithUserDetails\r\n2. Using both @WithMockUser and @WithUserDetails on both class- and method-level\r\n3. Creating custom @WithMockCustomUser annotation:\r\n\r\n    ```\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @WithSecurityContext(factory = WithMockCustomUserSecurityContextFactory.class)\r\n    public @interface WithMockCustomUser {\r\n\r\n    String username() default &quot;janedoe&quot;;\r\n    String principal() default &quot;janedoe&quot;;\r\n}\r\n  ```\r\n\r\nWhich just gives me the same ClassCastException with different text:\r\nclass com.reddit.controller.CustomUserDetails cannot be cast to class java.lang.String (com.reddit.controller.CustomUserDetails is in unnamed module of loader &#39;app&#39;; java.lang.String is in module java.base of loader &#39;bootstrap&#39;)\r\n\r\nAny help is appreciated :)","title":"Spring Security testing: .getPrincipal() returning different objects in app and tests","body":"<p>I'm making a Reddit clone as one of the projects for my portfolio.</p>\n<p>The problem I'm unable to solve (I'm a beginner) is this:</p>\n<p>I have a CommentController (REST) that's handling all the api calls regarding comments. There's an endpoint for creating a comment:</p>\n<pre><code>@PostMapping\npublic ResponseEntity&lt;Comment&gt; createComment(@Valid @RequestBody CommentDto commentDto, BindingResult bindingResult) {\n    if (bindingResult.hasErrors()) throw new DtoValidationException(bindingResult.getAllErrors());\n    URI uri = URI.create(ServletUriComponentsBuilder.fromCurrentContextPath().path(&quot;/api/comments/&quot;).toUriString());\n    Comment comment = commentService.save(commentDto);\n    return ResponseEntity.created(uri).body(comment);\n}\n</code></pre>\n<p>In my CommentService class, this is the method for saving a comment made by currently logged in user:</p>\n<pre><code>@Override\npublic Comment save(CommentDto commentDto) {\n    Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n    Optional&lt;User&gt; userOptional = userRepository.findUserByUsername((String) principal);\n    if (userOptional.isPresent()) {\n        User user = userOptional.get();\n        Optional&lt;Post&gt; postOptional = postRepository.findById(commentDto.getPostId());\n        if (postOptional.isPresent()) {\n            Post post = postOptional.get();\n            Comment comment = new Comment(user, commentDto.getText(), post);\n            user.getComments().add(comment);\n            post.getComments().add(comment);\n            post.setCommentsCounter(post.getCommentsCounter());\n            return comment;\n        } else {\n            throw new PostNotFoundException(commentDto.getPostId());\n        }\n    } else {\n        throw new UserNotFoundException((String) principal);\n    }\n}\n</code></pre>\n<p>The app is running normally with no exceptions, and comment is saved to the database.</p>\n<p>I'm writing an integration test for that controller, I used @WithMockUser(username = &quot;janedoe&quot;, password = &quot;password&quot;) on a test class, and I kept getting this exception:</p>\n<pre><code>ClassCastException: UserDetails can not be converted to String\n</code></pre>\n<p>I realized that the problem is with this two lines in save method:</p>\n<pre><code>Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\nOptional&lt;User&gt; userOptional = userRepository.findUserByUsername((String) principal);\n</code></pre>\n<p>What I don't get is why are those to lines throwing exception <em>only</em> in tests. When the app is running, everything is okay.</p>\n<p>I guess that for some reason in tests the .getPrincipal() method is not returning a String (username), but the whole UserDetails object. I'm not sure how to make it return username in tests.</p>\n<p>What have I tried to solve it:</p>\n<ol>\n<li><p>Changing @WithMockUser to @WithUserDetails</p>\n</li>\n<li><p>Using both @WithMockUser and @WithUserDetails on both class- and method-level</p>\n</li>\n<li><p>Creating custom @WithMockCustomUser annotation:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@WithSecurityContext(factory = WithMockCustomUserSecurityContextFactory.class)\npublic @interface WithMockCustomUser {\n\nString username() default &quot;janedoe&quot;;\nString principal() default &quot;janedoe&quot;;\n</code></pre>\n</li>\n</ol>\n<p>}</p>\n<pre><code>\nWhich just gives me the same ClassCastException with different text:\nclass com.reddit.controller.CustomUserDetails cannot be cast to class java.lang.String (com.reddit.controller.CustomUserDetails is in unnamed module of loader 'app'; java.lang.String is in module java.base of loader 'bootstrap')\n\nAny help is appreciated :)\n</code></pre>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1665389085,"post_id":74010270,"comment_id":130680102,"body_markdown":"Correct me if I&#39;m wrong, but `ImmutableCollections` is not a part of the public API, so we can&#39;t represent a list in the code as `ImmutableCollections.ListN`. Java doesn&#39;t support read-only or immutable collections in its type system as Kotlin does, in Java read-only/immutability is implementation details.","body":"Correct me if I&#39;m wrong, but <code>ImmutableCollections</code> is not a part of the public API, so we can&#39;t represent a list in the code as <code>ImmutableCollections.ListN</code>. Java doesn&#39;t support read-only or immutable collections in its type system as Kotlin does, in Java read-only/immutability is implementation details."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1665389502,"post_id":74010270,"comment_id":130680237,"body_markdown":"@broot While true, I think the OP is more wondering why `listOf(...)` doesn&#39;t compile to `List.of(...)` when targeting the JVM/Android.","body":"@broot While true, I think the OP is more wondering why <code>listOf(...)</code> doesn&#39;t compile to <code>List.of(...)</code> when targeting the JVM/Android."},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1665389820,"post_id":74010270,"comment_id":130680334,"body_markdown":"@Slaw My impression is that OP suggested `ImmutableCollections.ListN` is somehow &quot;more immutable&quot; than Kotlin&#39;s implementation (&quot;Kotlin&#39;s listOf method is immutable only in Kotlin&quot;, &quot;ImmutableCollections.ListN, which is actually immutable&quot;). But they&#39;re pretty much the same - they are both represented as just `List` and throw when being modified. &quot;Kotlin&#39;s listOf method is immutable only in Kotlin&quot; - the same can be said about `ImmutableCollections`. They are seen as immutable only in the stdlib internally while initializing them, but anywhere else they are &quot;mutable&quot;.","body":"@Slaw My impression is that OP suggested <code>ImmutableCollections.ListN</code> is somehow &quot;more immutable&quot; than Kotlin&#39;s implementation (&quot;Kotlin&#39;s listOf method is immutable only in Kotlin&quot;, &quot;ImmutableCollections.ListN, which is actually immutable&quot;). But they&#39;re pretty much the same - they are both represented as just <code>List</code> and throw when being modified. &quot;Kotlin&#39;s listOf method is immutable only in Kotlin&quot; - the same can be said about <code>ImmutableCollections</code>. They are seen as immutable only in the stdlib internally while initializing them, but anywhere else they are &quot;mutable&quot;."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1665390895,"post_id":74010270,"comment_id":130680720,"body_markdown":"@broot The problem the OP has, from what I understand, comes from passing a Kotlin `List` to a Java API. In Kotlin, the `List` interface has no mutator methods. Pass it to Java, however, and it sees a `java.util.List`, which does have mutator methods. The OP would, if I&#39;m not mistaken, like an `UnsupportedOperationException` to be thrown in the scenario where the Java API attempts to modify the list by calling those mutator methods.","body":"@broot The problem the OP has, from what I understand, comes from passing a Kotlin <code>List</code> to a Java API. In Kotlin, the <code>List</code> interface has no mutator methods. Pass it to Java, however, and it sees a <code>java.util.List</code>, which does have mutator methods. The OP would, if I&#39;m not mistaken, like an <code>UnsupportedOperationException</code> to be thrown in the scenario where the Java API attempts to modify the list by calling those mutator methods."},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1665391832,"post_id":74010270,"comment_id":130681044,"body_markdown":"@Slaw And this is exactly what happens right now. Lists created with `listOf()` are immutable, meaning they throw UOE on modification. I think OP&#39;s point is that from the Java code it is not possible to distinguish read-only and mutable list, but this is because Java doesn&#39;t have a concept of read-only lists. And the problem is the same no matter if we use immutable lists created in Kotlin or we don&#39;t at all use any Kotlin code and we create immutable list with e.g. `List.of()`. We just can&#39;t do this from Java. Well, let&#39;s wait for OP ;-)","body":"@Slaw And this is exactly what happens right now. Lists created with <code>listOf()</code> are immutable, meaning they throw UOE on modification. I think OP&#39;s point is that from the Java code it is not possible to distinguish read-only and mutable list, but this is because Java doesn&#39;t have a concept of read-only lists. And the problem is the same no matter if we use immutable lists created in Kotlin or we don&#39;t at all use any Kotlin code and we create immutable list with e.g. <code>List.of()</code>. We just can&#39;t do this from Java. Well, let&#39;s wait for OP ;-)"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1665392007,"post_id":74010270,"comment_id":130681110,"body_markdown":"@broot Maybe you&#39;re right. I&#39;m not as familiar with all the intricacies of Kotlin. However, the OP said, &quot;_Whenever I use the codebase in Java I get an ArrayList_&quot;. So, if the OP is right and `listOf(arguments...)` is creating a `java.util.ArrayList` under the hood, then I don&#39;t see how UOEs would be thrown upon modification. That implementation is not immutable.","body":"@broot Maybe you&#39;re right. I&#39;m not as familiar with all the intricacies of Kotlin. However, the OP said, &quot;<i>Whenever I use the codebase in Java I get an ArrayList</i>&quot;. So, if the OP is right and <code>listOf(arguments...)</code> is creating a <code>java.util.ArrayList</code> under the hood, then I don&#39;t see how UOEs would be thrown upon modification. That implementation is not immutable."},{"owner":{"account_id":5863496,"reputation":8458,"user_id":4618331,"display_name":"Sam"},"score":0,"creation_date":1665395764,"post_id":74010270,"comment_id":130682383,"body_markdown":"There are some mentions on YouTrack, e.g. [this comment](https://youtrack.jetbrains.com/issue/KT-9959/listOf-mapOf-setOf-should-return-collections-with-a-consistent-mutability#focus=Comments-27-2829635.0-0) mentioning support for null elements as a possible blocker","body":"There are some mentions on YouTrack, e.g. <a href=\"https://youtrack.jetbrains.com/issue/KT-9959/listOf-mapOf-setOf-should-return-collections-with-a-consistent-mutability#focus=Comments-27-2829635.0-0\" rel=\"nofollow noreferrer\">this comment</a> mentioning support for null elements as a possible blocker"},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1665400106,"post_id":74010270,"comment_id":130683730,"body_markdown":"Ok, I just realized I wasn&#39;t right about `listOf()` being fully immutable. It throws UOE for operations changing its size, so add, insert, remove, but set is still allowed.","body":"Ok, I just realized I wasn&#39;t right about <code>listOf()</code> being fully immutable. It throws UOE for operations changing its size, so add, insert, remove, but set is still allowed."},{"owner":{"account_id":17553238,"reputation":93,"user_id":12733218,"display_name":"funazol"},"score":0,"creation_date":1665504072,"post_id":74010270,"comment_id":130713891,"body_markdown":"@broot @Slaw Ok, yeah I&#39;m getting UOEs when trying to add elements to it. \nI was expecting it would just be a normal ArrayList since\n`println(listOf(1,2,3)::class.qualifiedName)` prints out `java.util.Arrays.ArrayList`","body":"@broot @Slaw Ok, yeah I&#39;m getting UOEs when trying to add elements to it.  I was expecting it would just be a normal ArrayList since <code>println(listOf(1,2,3)::class.qualifiedName)</code> prints out <code>java.util.Arrays.ArrayList</code>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1665516547,"post_id":74010270,"comment_id":130717956,"body_markdown":"@funazol The `java.util.Arrays.ArrayList` and `java.util.ArrayList` classes are different implementations of `List`. The former is what&#39;s returned by the `Arrays.asList(T...)` method, and it is a **fixed-size** list. In other words, you cannot add or remove elements to or from the list, but you can replace elements (with the `set` method). Any method which would result in the size changing will throw a UOE; but still, the list is not truly immutable.","body":"@funazol The <code>java.util.Arrays.ArrayList</code> and <code>java.util.ArrayList</code> classes are different implementations of <code>List</code>. The former is what&#39;s returned by the <code>Arrays.asList(T...)</code> method, and it is a <b>fixed-size</b> list. In other words, you cannot add or remove elements to or from the list, but you can replace elements (with the <code>set</code> method). Any method which would result in the size changing will throw a UOE; but still, the list is not truly immutable."}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665910008,"creation_date":1665710994,"answer_id":74063422,"question_id":74010270,"body_markdown":"I have traced it down and indeed the implementation chosen from Kotlin looks strange.\r\n\r\n1) [ListOf(elements)][1] will call `elements.asList()` \r\n2) which will land [here][2] as the varargs input will be an array of objects. \r\n3) Then as you could see [here][3] which is the last part it ends up invoking `Arrays.asList(array)` from `java.util.Arrays`.\r\n\r\nKeep in mind that the `Arrays.asList()` produces an `ArrayList` from the class `java.util.Arrays.class` which is a different class from the normal `ArrayList` which exists in `java.util.ArrayList.class`.\r\n\r\nIndependent of this, still the chosen class from Kotlin from `java.util.Arrays.class -&gt; nested class ArrayList` is not a fully immutable list. It is a list with fixed size as it is directly backed by an array, meaning you could not modify the length of the list by adding more elements but you can modify the existing elements inside.\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/JetBrains/kotlin/blob/f3385fbdcb8b9dc29661a8a4973c855cdcf73767/libraries/stdlib/src/kotlin/collections/Collections.kt#L77\r\n  [2]: https://github.com/JetBrains/kotlin/blob/f3385fbdcb8b9dc29661a8a4973c855cdcf73767/libraries/stdlib/jvm/src/generated/_ArraysJvm.kt#L132\r\n  [3]: https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/src/kotlin/collections/ArraysUtilJVM.java","title":"Why doesn&#39;t Kotlin compile listOf to ImmutableCollections.ListN?","body":"<p>I have traced it down and indeed the implementation chosen from Kotlin looks strange.</p>\n<ol>\n<li><a href=\"https://github.com/JetBrains/kotlin/blob/f3385fbdcb8b9dc29661a8a4973c855cdcf73767/libraries/stdlib/src/kotlin/collections/Collections.kt#L77\" rel=\"nofollow noreferrer\">ListOf(elements)</a> will call <code>elements.asList()</code></li>\n<li>which will land <a href=\"https://github.com/JetBrains/kotlin/blob/f3385fbdcb8b9dc29661a8a4973c855cdcf73767/libraries/stdlib/jvm/src/generated/_ArraysJvm.kt#L132\" rel=\"nofollow noreferrer\">here</a> as the varargs input will be an array of objects.</li>\n<li>Then as you could see <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/src/kotlin/collections/ArraysUtilJVM.java\" rel=\"nofollow noreferrer\">here</a> which is the last part it ends up invoking <code>Arrays.asList(array)</code> from <code>java.util.Arrays</code>.</li>\n</ol>\n<p>Keep in mind that the <code>Arrays.asList()</code> produces an <code>ArrayList</code> from the class <code>java.util.Arrays.class</code> which is a different class from the normal <code>ArrayList</code> which exists in <code>java.util.ArrayList.class</code>.</p>\n<p>Independent of this, still the chosen class from Kotlin from <code>java.util.Arrays.class -&gt; nested class ArrayList</code> is not a fully immutable list. It is a list with fixed size as it is directly backed by an array, meaning you could not modify the length of the list by adding more elements but you can modify the existing elements inside.</p>\n"}],"owner":{"account_id":17553238,"reputation":93,"user_id":12733218,"display_name":"funazol"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1665910008,"creation_date":1665376907,"question_id":74010270,"body_markdown":"I&#39;m trying to use Kotlin alongside Java and but Kotlin&#39;s listOf method is immutable only in Kotlin. Whenever I use the codebase in Java I get an ArrayList instead of Java11&#39;s ImmutableCollections.ListN, which is actually immutable. \r\nSo I was wondering why Kotlin uses ArrayLists internally instead of ImmutableCollections.ListN and is there a way to overwrite this?","title":"Why doesn&#39;t Kotlin compile listOf to ImmutableCollections.ListN?","body":"<p>I'm trying to use Kotlin alongside Java and but Kotlin's listOf method is immutable only in Kotlin. Whenever I use the codebase in Java I get an ArrayList instead of Java11's ImmutableCollections.ListN, which is actually immutable.\nSo I was wondering why Kotlin uses ArrayLists internally instead of ImmutableCollections.ListN and is there a way to overwrite this?</p>\n"},{"tags":["java","jsp","struts","struts-1"],"comments":[{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1372247555,"post_id":17318013,"comment_id":25120159,"body_markdown":"Can you please specify what error are you getting exactly in Google Chrome?","body":"Can you please specify what error are you getting exactly in Google Chrome?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1372253759,"post_id":17318013,"comment_id":25124207,"body_markdown":"I don&#39;t understand the point of the JavaScript. What happens if you take out the question mark? It&#39;s not necessary and it all seems rather redundant.","body":"I don&#39;t understand the point of the JavaScript. What happens if you take out the question mark? It&#39;s not necessary and it all seems rather redundant."}],"answers":[{"comments":[{"owner":{"account_id":3339315,"reputation":2719,"user_id":2805971,"display_name":"Rohit Heera"},"score":0,"creation_date":1492254353,"post_id":22344214,"comment_id":73908630,"body_markdown":"if we have multiple submit button then how we can handle","body":"if we have multiple submit button then how we can handle"}],"tags":[],"owner":{"account_id":1784876,"reputation":123,"user_id":2020499,"accept_rate":20,"display_name":"real gadha"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1394607765,"creation_date":1394607765,"answer_id":22344214,"question_id":17318013,"body_markdown":"I think as you have not mentioned the parameter &#39;method&#39; in the URL, you are getting the error. I am not sure how IE and FF is working, but if you construct the URL something like\r\n&lt;code&gt;UsrAction.do?method=lodable&lt;/code&gt; I believe, it should work in chrome as well. ","title":"Request[/UsrAction] does not contain handler parameter named &#39;method&#39;. This may be caused by whitespace in the label text","body":"<p>I think as you have not mentioned the parameter 'method' in the URL, you are getting the error. I am not sure how IE and FF is working, but if you construct the URL something like\n<code>UsrAction.do?method=lodable</code> I believe, it should work in chrome as well. </p>\n"},{"tags":[],"owner":{"account_id":1507235,"reputation":6056,"user_id":1410342,"accept_rate":95,"display_name":"NoNaMe"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1431925707,"creation_date":1431925707,"answer_id":30295481,"question_id":17318013,"body_markdown":"The reason of the exception is that you have added a param `parameter=&quot;method&quot;`  in your Struts config file and system is now looking for method name in that variable which is not supplied by you in the code.\r\n\r\nYou should use hidden from property to provide the method name to avoid the exception. \r\n\r\n    &lt;input type=&quot;hidden&quot; name=&quot;method&quot; value=&quot;YourMethodName&quot;/&gt;\r\n\r\nHope this will help someone,\r\n","title":"Request[/UsrAction] does not contain handler parameter named &#39;method&#39;. This may be caused by whitespace in the label text","body":"<p>The reason of the exception is that you have added a param <code>parameter=\"method\"</code>  in your Struts config file and system is now looking for method name in that variable which is not supplied by you in the code.</p>\n\n<p>You should use hidden from property to provide the method name to avoid the exception. </p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"method\" value=\"YourMethodName\"/&gt;\n</code></pre>\n\n<p>Hope this will help someone,</p>\n"},{"tags":[],"owner":{"account_id":1507235,"reputation":6056,"user_id":1410342,"accept_rate":95,"display_name":"NoNaMe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665908985,"creation_date":1665908985,"answer_id":74085599,"question_id":17318013,"body_markdown":"I have faced the same issue because of a Javascript error, in my FormBean coming from action class, I put a new variable and have not put that to from, and then I was trying to get it from the form like \r\n\r\n    document.forms[0].VARIABLE_NAME.value\r\n\r\nas this variable was not present in the Form but it was there in the FormBean so JS was unable to find it and was not submitting the form properly. \r\n\r\nSo, to fix the issue I used hidden form fields and put the new variable in the form and then used it from there. fixed my issue. \r\n","title":"Request[/UsrAction] does not contain handler parameter named &#39;method&#39;. This may be caused by whitespace in the label text","body":"<p>I have faced the same issue because of a Javascript error, in my FormBean coming from action class, I put a new variable and have not put that to from, and then I was trying to get it from the form like</p>\n<pre><code>document.forms[0].VARIABLE_NAME.value\n</code></pre>\n<p>as this variable was not present in the Form but it was there in the FormBean so JS was unable to find it and was not submitting the form properly.</p>\n<p>So, to fix the issue I used hidden form fields and put the new variable in the form and then used it from there. fixed my issue.</p>\n"}],"owner":{"account_id":958625,"reputation":3960,"user_id":983436,"accept_rate":65,"display_name":"Code Hungry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20859,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1665908985,"creation_date":1372243681,"question_id":17318013,"body_markdown":"Below Code is working fine in Mozila Firefox, Internet Explorer but giving above error in google chrome. \r\n\r\n**adminlogin.jsp**\r\n\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\r\n    &lt;title&gt;Admin Role Page&lt;/title&gt;\r\n    &lt;script type=&quot;text/javascript&quot;&gt;\r\n    function submitForm()\r\n    {\r\n    document.forms[0].action = &quot;UsrAction.do?&quot;;\r\n    document.forms[0].submit();\r\n    }\r\n    &lt;/script&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;html:form action=&quot;/UsrAction&quot; &gt;\r\n    &lt;html:submit property=&quot;method&quot; value=&quot;lodable&quot; onclick=&quot;submitForm() &quot; /&gt;\r\n    &lt;html:submit property=&quot;method&quot; value=&quot;adduser&quot; onclick=&quot;submitForm()&quot; /&gt; \r\n    &lt;html:submit  property=&quot;method&quot; value=&quot;addprogram&quot; onclick=&quot;submitForm()&quot;/&gt;\r\n    &lt;/html:form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**struts-config.xml**\r\n\r\n    &lt;action input=&quot;/adminLogin.jsp&quot; parameter=&quot;method&quot; name=&quot;UsrForm&quot; path=&quot;/UsrAction&quot; scope=&quot;session&quot; type=&quot;com.me.action.UsrAction&quot;&gt;\r\n    &lt;forward name=&quot;lodable&quot; path=&quot;/pages/Lodable.jsp&quot; /&gt;\r\n    &lt;forward name=&quot;adduser&quot; path=&quot;/pages/add.jsp&quot; /&gt;\r\n    &lt;forward name=&quot;addprog&quot; path=&quot;/pages/program.jsp&quot; /&gt;\r\n    &lt;/action&gt;\r\n\r\n**UerAction.java**\r\n\r\n    public class UsrAction extends DispatchAction {\r\n    private final static String lodable = &quot;lodable&quot;;\r\n    private final static String adduser = &quot;adduser&quot;;\r\n    private final static String addprog = &quot;addprog&quot;;\r\n    public ActionForward lodable(ActionMapping mapping, ActionForm form,HttpServletRequest request, HttpServletResponse response)throws Exception {\r\n    UsrForm userForm = (UsrForm) form;\r\n    lgnDTO login = new lgnDTO();\r\n    request.setAttribute(&quot;login&quot;, login.getUsername());  \r\n    return mapping.findForward(lodable);\r\n    }\r\n        \r\n    public ActionForward adduser(ActionMapping mapping, ActionForm form,HttpServletRequest request, HttpServletResponse response)throws Exception {\r\n    UsrForm userForm = (UsrForm) form;\r\n    lgnDTO login = new lgnDTO();\r\n    return mapping.findForward(addprog);\r\n    }\r\n        \r\n    public ActionForward addprogram(ActionMapping mapping, ActionForm form,HttpServletRequest request, HttpServletResponse response)throws Exception {\r\n    UsrForm userForm = (UsrForm) form;\r\n    lgnDTO login = new lgnDTO();\r\n    return mapping.findForward(adduser);\r\n    }\r\n    }\r\n\r\n\r\n**Error Log**\r\n\r\n    type Exception report\r\n    \r\n    message Request[/UsrAction] does not contain handler parameter named &#39;method&#39;. This may be caused by whitespace in the label text.\r\n    \r\n    description The server encountered an internal error that prevented it from fulfilling this request.\r\n    \r\n    exception\r\n    \r\n    javax.servlet.ServletException: Request[/UsrAction] does not contain handler parameter named &#39;method&#39;.  This may be caused by whitespace in the label text.\r\n    \torg.apache.struts.actions.DispatchAction.unspecified(DispatchAction.java:197)\r\n    \torg.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:245)\r\n    \torg.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\r\n    \torg.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)\r\n    \torg.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)\r\n    \torg.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\r\n    \torg.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n    note The full stack trace of the root cause is available in the Apache Tomcat/7.0.39 logs.","title":"Request[/UsrAction] does not contain handler parameter named &#39;method&#39;. This may be caused by whitespace in the label text","body":"<p>Below Code is working fine in Mozila Firefox, Internet Explorer but giving above error in google chrome. </p>\n\n<p><strong>adminlogin.jsp</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n&lt;title&gt;Admin Role Page&lt;/title&gt;\n&lt;script type=\"text/javascript\"&gt;\nfunction submitForm()\n{\ndocument.forms[0].action = \"UsrAction.do?\";\ndocument.forms[0].submit();\n}\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;html:form action=\"/UsrAction\" &gt;\n&lt;html:submit property=\"method\" value=\"lodable\" onclick=\"submitForm() \" /&gt;\n&lt;html:submit property=\"method\" value=\"adduser\" onclick=\"submitForm()\" /&gt; \n&lt;html:submit  property=\"method\" value=\"addprogram\" onclick=\"submitForm()\"/&gt;\n&lt;/html:form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>struts-config.xml</strong></p>\n\n<pre><code>&lt;action input=\"/adminLogin.jsp\" parameter=\"method\" name=\"UsrForm\" path=\"/UsrAction\" scope=\"session\" type=\"com.me.action.UsrAction\"&gt;\n&lt;forward name=\"lodable\" path=\"/pages/Lodable.jsp\" /&gt;\n&lt;forward name=\"adduser\" path=\"/pages/add.jsp\" /&gt;\n&lt;forward name=\"addprog\" path=\"/pages/program.jsp\" /&gt;\n&lt;/action&gt;\n</code></pre>\n\n<p><strong>UerAction.java</strong></p>\n\n<pre><code>public class UsrAction extends DispatchAction {\nprivate final static String lodable = \"lodable\";\nprivate final static String adduser = \"adduser\";\nprivate final static String addprog = \"addprog\";\npublic ActionForward lodable(ActionMapping mapping, ActionForm form,HttpServletRequest request, HttpServletResponse response)throws Exception {\nUsrForm userForm = (UsrForm) form;\nlgnDTO login = new lgnDTO();\nrequest.setAttribute(\"login\", login.getUsername());  \nreturn mapping.findForward(lodable);\n}\n\npublic ActionForward adduser(ActionMapping mapping, ActionForm form,HttpServletRequest request, HttpServletResponse response)throws Exception {\nUsrForm userForm = (UsrForm) form;\nlgnDTO login = new lgnDTO();\nreturn mapping.findForward(addprog);\n}\n\npublic ActionForward addprogram(ActionMapping mapping, ActionForm form,HttpServletRequest request, HttpServletResponse response)throws Exception {\nUsrForm userForm = (UsrForm) form;\nlgnDTO login = new lgnDTO();\nreturn mapping.findForward(adduser);\n}\n}\n</code></pre>\n\n<p><strong>Error Log</strong></p>\n\n<pre><code>type Exception report\n\nmessage Request[/UsrAction] does not contain handler parameter named 'method'. This may be caused by whitespace in the label text.\n\ndescription The server encountered an internal error that prevented it from fulfilling this request.\n\nexception\n\njavax.servlet.ServletException: Request[/UsrAction] does not contain handler parameter named 'method'.  This may be caused by whitespace in the label text.\n    org.apache.struts.actions.DispatchAction.unspecified(DispatchAction.java:197)\n    org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:245)\n    org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\n    org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)\n    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)\n    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n    org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\nnote The full stack trace of the root cause is available in the Apache Tomcat/7.0.39 logs.\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665909377,"post_id":74085479,"comment_id":130805637,"body_markdown":"Why do you think, it &quot;should throw...&quot;? (If you have more information, please share! If not: i don&#39;t agree!)","body":"Why do you think, it &quot;should throw...&quot;? (If you have more information, please share! If not: i don&#39;t agree!)"},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1665909750,"post_id":74085479,"comment_id":130805683,"body_markdown":"You&#39;re most probably experiencing [type erasure](https://stackoverflow.com/q/339699/5515060) and some type inference shenanigans. The `getBean` method returns some type `T` which the compiler resolves as `Factory&lt;String, Map&lt;FCName, Boolean&gt;&gt;` and because `AppleFactory` is a subtype of the former it still works. Also the `getBean` method (probably) does an unchecked cast (i.e. `return (T) someObj;`) which is just ignored at runtime","body":"You&#39;re most probably experiencing <a href=\"https://stackoverflow.com/q/339699/5515060\">type erasure</a> and some type inference shenanigans. The <code>getBean</code> method returns some type <code>T</code> which the compiler resolves as <code>Factory&lt;String, Map&lt;FCName, Boolean&gt;&gt;</code> and because <code>AppleFactory</code> is a subtype of the former it still works. Also the <code>getBean</code> method (probably) does an unchecked cast (i.e. <code>return (T) someObj;</code>) which is just ignored at runtime"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1665911983,"post_id":74085479,"comment_id":130806075,"body_markdown":"The code you&#39;ve shown doesn&#39;t contain any casts.","body":"The code you&#39;ve shown doesn&#39;t contain any casts."},{"owner":{"account_id":14948827,"reputation":39,"user_id":10793241,"display_name":"Golu"},"score":0,"creation_date":1665950286,"post_id":74085479,"comment_id":130813844,"body_markdown":"@tgdavies , is it not trying to cast the `appleFactory` object (which is of type OrangeFactory in the xml) to `AppleFactory.class` in the getBean method?","body":"@tgdavies , is it not trying to cast the <code>appleFactory</code> object (which is of type OrangeFactory in the xml) to <code>AppleFactory.class</code> in the getBean method?"},{"owner":{"account_id":14948827,"reputation":39,"user_id":10793241,"display_name":"Golu"},"score":0,"creation_date":1665950371,"post_id":74085479,"comment_id":130813858,"body_markdown":"@xerx593 , what more you need? and why you don&#39;t agree it show throw Classcast for the above code - can you elaborate/explain a bit? Will help me understand.","body":"@xerx593 , what more you need? and why you don&#39;t agree it show throw Classcast for the above code - can you elaborate/explain a bit? Will help me understand."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665952545,"post_id":74085479,"comment_id":130814301,"body_markdown":"i don&#39;t agree, because (with this information): Why should it throw!???","body":"i don&#39;t agree, because (with this information): Why should it throw!???"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665952723,"post_id":74085479,"comment_id":130814339,"body_markdown":"`String` is (obviously) legal as `K` ..and `Map&lt;what, ever&gt;` legal `V`, please elaborate: why not","body":"<code>String</code> is (obviously) legal as <code>K</code> ..and <code>Map&lt;what, ever&gt;</code> legal <code>V</code>, please elaborate: why not"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665952791,"post_id":74085479,"comment_id":130814354,"body_markdown":"`AppleFactory` is just confusing..in OP","body":"<code>AppleFactory</code> is just confusing..in OP"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1665953945,"post_id":74085479,"comment_id":130814597,"body_markdown":"Have a look at the source of getBean and see whether there&#39;s a cast.","body":"Have a look at the source of getBean and see whether there&#39;s a cast."},{"owner":{"account_id":14948827,"reputation":39,"user_id":10793241,"display_name":"Golu"},"score":0,"creation_date":1665974371,"post_id":74085479,"comment_id":130817278,"body_markdown":"@tgdavies this is ths source - it is trying to cast  the object from xml into T in this case OrangeFactory object to AppleFactory object? So should throw ClasscastException as both are separate classes (and OrangeFactory is not a child of AppleFactory)? \n\nBelow is the code ------&gt;\n\n\n`public &lt;T&gt; T getBean(String beanId, Class&lt;T&gt; clazz) {\n        try {\n            return (T) springContext.getBean(beanId);\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;Exception while loading beanId=&quot; + beanId, e);\n        }\n    }`","body":"@tgdavies this is ths source - it is trying to cast  the object from xml into T in this case OrangeFactory object to AppleFactory object? So should throw ClasscastException as both are separate classes (and OrangeFactory is not a child of AppleFactory)?   Below is the code ------&gt;   <code>public &lt;T&gt; T getBean(String beanId, Class&lt;T&gt; clazz) {         try {             return (T) springContext.getBean(beanId);         } catch (Exception e) {             throw new RuntimeException(&quot;Exception while loading beanId=&quot; + beanId, e);         }     }</code>"}],"owner":{"account_id":14948827,"reputation":39,"user_id":10793241,"display_name":"Golu"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1665907534,"creation_date":1665907534,"question_id":74085479,"body_markdown":"I have a code like below where the Factory interface is implemented by two sub classes, in spring xml the bean defines itself as an object of one of the class(OrangeFactory in below example) while in getBean it tries to cast as AppleFactory, shouldn&#39;t getBean throw Class cast Exception during runtime in this case?\r\n\r\nBut Strangely it doesn&#39;t - what am I missing here?\r\n\r\n```\r\npublic interface Factory&lt;K, V&gt; {\r\n    V get(K key);\r\n}\r\n```\r\n\r\n```\r\npublic class AppleFactory implements Factory&lt;String, Map&lt;FCName, Boolean&gt;&gt; {\r\n   \r\n @Override\r\n    public Map&lt;FCName, Boolean&gt; get(String identifier) {\r\n           //doSomething and\r\n      return &lt;some map&gt;;\r\n }\r\n}\r\n```\r\n```\r\npublic class OrangeFactory&lt;K, V&gt; implements Factory&lt;K, V&gt; {\r\n\r\n @Override\r\n    public V get(K key) {\r\n         //doSomething and\r\n    return &lt;some map&gt;;\r\n }\r\n}\r\n```\r\n\r\nand XML:\r\n\r\n```\r\n&lt;bean id=&quot;appleFactory&quot; class=&quot;OrangeFactory&quot;&gt;  \r\n&lt;/bean&gt;\r\n```\r\n\r\n\r\nBelow method should throw ClassCast Exception during runtime? - But it seem to work fine...\r\n\r\n\r\n```\r\npublic Factory&lt;String, Map&lt;FCName, Boolean&gt;&gt; getAppleFactory() {\r\n        return getBean(&quot;appleFactory&quot;, AppleFactory.class);\r\n}\r\n```\r\n\r\n","title":"Why Spring getBean method NOT Throwing ClassCast Exception?","body":"<p>I have a code like below where the Factory interface is implemented by two sub classes, in spring xml the bean defines itself as an object of one of the class(OrangeFactory in below example) while in getBean it tries to cast as AppleFactory, shouldn't getBean throw Class cast Exception during runtime in this case?</p>\n<p>But Strangely it doesn't - what am I missing here?</p>\n<pre><code>public interface Factory&lt;K, V&gt; {\n    V get(K key);\n}\n</code></pre>\n<pre><code>public class AppleFactory implements Factory&lt;String, Map&lt;FCName, Boolean&gt;&gt; {\n   \n @Override\n    public Map&lt;FCName, Boolean&gt; get(String identifier) {\n           //doSomething and\n      return &lt;some map&gt;;\n }\n}\n</code></pre>\n<pre><code>public class OrangeFactory&lt;K, V&gt; implements Factory&lt;K, V&gt; {\n\n @Override\n    public V get(K key) {\n         //doSomething and\n    return &lt;some map&gt;;\n }\n}\n</code></pre>\n<p>and XML:</p>\n<pre><code>&lt;bean id=&quot;appleFactory&quot; class=&quot;OrangeFactory&quot;&gt;  \n&lt;/bean&gt;\n</code></pre>\n<p>Below method should throw ClassCast Exception during runtime? - But it seem to work fine...</p>\n<pre><code>public Factory&lt;String, Map&lt;FCName, Boolean&gt;&gt; getAppleFactory() {\n        return getBean(&quot;appleFactory&quot;, AppleFactory.class);\n}\n</code></pre>\n"},{"tags":["java","redis"],"comments":[{"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"score":0,"creation_date":1665904643,"post_id":74085198,"comment_id":130804961,"body_markdown":"no, I have already read this question and it could not solve this problem. @kaya3","body":"no, I have already read this question and it could not solve this problem. @kaya3"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1665904781,"post_id":74085198,"comment_id":130804992,"body_markdown":"Please expand your example to explain why you want to get the type.","body":"Please expand your example to explain why you want to get the type."},{"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"score":0,"creation_date":1665905155,"post_id":74085198,"comment_id":130805045,"body_markdown":"I have added some content that explained why I want to get the T type, when I deserilized the date fetched from redis zset, I need to deserilized it and using in the next step. @tgdavies","body":"I have added some content that explained why I want to get the T type, when I deserilized the date fetched from redis zset, I need to deserilized it and using in the next step. @tgdavies"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1665905462,"post_id":74085198,"comment_id":130805096,"body_markdown":"Presumably when you call `redisTemplateZSet` you know what T is. Can you just pass the class as a parameter?","body":"Presumably when you call <code>redisTemplateZSet</code> you know what T is. Can you just pass the class as a parameter?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1665905753,"post_id":74085198,"comment_id":130805142,"body_markdown":"In fact ... tdavies&#39;s suggestion is the only generic approach that is going to work.  And it is the solution that is suggested by https://stackoverflow.com/a/3437930/139985.  So in fact, the dup link suggested by kaya3 is the correct link ... and ... you haven&#39;t read it properly.","body":"In fact ... tdavies&#39;s suggestion is the only generic approach that is going to work.  And it is the solution that is suggested by <a href=\"https://stackoverflow.com/a/3437930/139985\">stackoverflow.com/a/3437930/139985</a>.  So in fact, the dup link suggested by kaya3 is the correct link ... and ... you haven&#39;t read it properly."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1665906028,"post_id":74085198,"comment_id":130805183,"body_markdown":"While it might be difficult to apply the solution in your use-case, it is the only generic solution.  You might be able to do something hacky with a custom deserializer class that tests the serialized data and chooses a class for `T` based on what it finds.","body":"While it might be difficult to apply the solution in your use-case, it is the only generic solution.  You might be able to do something hacky with a custom deserializer class that tests the serialized data and chooses a class for <code>T</code> based on what it finds."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1665906215,"post_id":74085198,"comment_id":130805201,"body_markdown":"Or ... you could try to apply https://github.com/spring-projects/spring-data-redis/pull/2375 to a local build of Redis.","body":"Or ... you could try to apply <a href=\"https://github.com/spring-projects/spring-data-redis/pull/2375\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-data-redis/pull/2375</a> to a local build of Redis."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1665907446,"creation_date":1665906640,"answer_id":74085414,"question_id":74085198,"body_markdown":"&gt; Is it possible to get the type from generic type in java.\r\n\r\nThe answer to the general question is No, as explained in \r\n\r\n  - https://stackoverflow.com/questions/3437897,\r\n  - https://stackoverflow.com/questions/14953359, \r\n\r\nand similar questions.  Basically, you can&#39;t get the class of `T` at runtime.  If you need to know the class at runtime, it needs to be either passed as a `java.lang.Class` parameter, or inferred from an actual instance of the `T` type.  (And the latter can only be done reliably if `T` is a leaf class.)\r\n\r\n---------------\r\n\r\nThere is no direct solution in the Redis use-case either, as of the time of writing.  \r\n\r\nHowever, I came across an unmerged Pull Request that claims to support this in the Spring-Data Redis binding; see pull request [#2375](https://github.com/spring-projects/spring-data-redis/pull/2375).  If you want to try it, you will need to figure out how to apply the change to ... whatever version of whatever Redis binding you are actually using.  That will probably involve creating a (temporary) fork.\r\n\r\n  ","title":"is it possible to get the type from generic type in java","body":"<blockquote>\n<p>Is it possible to get the type from generic type in java.</p>\n</blockquote>\n<p>The answer to the general question is No, as explained in</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3437897\">How do I get a class instance of generic type T?</a>,</li>\n<li><a href=\"https://stackoverflow.com/questions/14953359\">How to get type arguments class of generic method parameter?</a>,</li>\n</ul>\n<p>and similar questions.  Basically, you can't get the class of <code>T</code> at runtime.  If you need to know the class at runtime, it needs to be either passed as a <code>java.lang.Class</code> parameter, or inferred from an actual instance of the <code>T</code> type.  (And the latter can only be done reliably if <code>T</code> is a leaf class.)</p>\n<hr />\n<p>There is no direct solution in the Redis use-case either, as of the time of writing.</p>\n<p>However, I came across an unmerged Pull Request that claims to support this in the Spring-Data Redis binding; see pull request <a href=\"https://github.com/spring-projects/spring-data-redis/pull/2375\" rel=\"nofollow noreferrer\">#2375</a>.  If you want to try it, you will need to figure out how to apply the change to ... whatever version of whatever Redis binding you are actually using.  That will probably involve creating a (temporary) fork.</p>\n"}],"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":1,"down_vote_count":0,"up_vote_count":0,"closed_date":1665907564,"accepted_answer_id":74085414,"answer_count":1,"score":0,"last_activity_date":1665907497,"creation_date":1665903937,"question_id":74085198,"body_markdown":"I have a method like this in Java:\r\n\r\n\r\n\r\n    @Bean(name = &quot;redisZSetTemplate&quot;)\r\n        &lt;T&gt; RedisTemplate&lt;String, T&gt; redisTemplateZSet(RedisConnectionFactory redisConnectionFactory) {\r\n    }\r\n\r\n\r\nwhat should I do to get the T type like `T.getClass()` or `T.class`? I have tried this way, add `import com.fasterxml.jackson.core.type.TypeReference;`, then get the T class like this:\r\n\r\n\r\n    Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(new TypeReference&lt;T&gt;(){}.getClass());\r\n\r\n\r\nseems the `new TypeReference&lt;T&gt;(){}.getClass()` get current method class. not the type of T class。 I want to get the type because I want to parse the data type when fetched from redis. this is the full code looks like:\r\n\r\n\r\n    @Bean(name = &quot;redisZSetTemplate&quot;)\r\n        &lt;T&gt; RedisTemplate&lt;String, T&gt; redisTemplateZSet(RedisConnectionFactory redisConnectionFactory) {\r\n            RedisTemplate&lt;String, T&gt; template = new RedisTemplate&lt;&gt;();\r\n            template.setConnectionFactory(redisConnectionFactory);\r\n            template.setEnableTransactionSupport(true);\r\n            Class&lt;T&gt; tClass = (Class&lt;T&gt;)((ParameterizedType)getClass().getGenericSuperclass()).getActualTypeArguments()[0];\r\n            Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(tClass);\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\r\n            mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\r\n            serializer.setObjectMapper(mapper);\r\n            template.setValueSerializer(serializer);\r\n            template.setKeySerializer(new StringRedisSerializer());\r\n            template.setHashKeySerializer(serializer);\r\n            template.setHashValueSerializer(serializer);\r\n            template.afterPropertiesSet();\r\n            return template;\r\n        }\r\n\r\n\r\n\r\nstore the ArticleZSet object into redis zset and deserilized it from redis. Actually I think define the T is more simplicity, what I am doing like this way:\r\n\r\n\r\n\r\n    @Bean(name = &quot;redisObjectTemplate&quot;)\r\n        RedisTemplate&lt;String, Object&gt; redisTemplateObject(RedisConnectionFactory redisConnectionFactory) {\r\n            RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\r\n            template.setConnectionFactory(redisConnectionFactory);\r\n            template.setEnableTransactionSupport(true);\r\n            Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(Object.class);\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\r\n            mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\r\n            serializer.setObjectMapper(mapper);\r\n            template.setValueSerializer(serializer);\r\n            template.setKeySerializer(new StringRedisSerializer());\r\n            template.setHashKeySerializer(serializer);\r\n            template.setHashValueSerializer(serializer);\r\n            template.afterPropertiesSet();\r\n            return template;\r\n        }\r\n    \r\n        /**\r\n         * @return\r\n         */\r\n        @Bean(name = &quot;redisIntegerTemplate&quot;)\r\n        RedisTemplate&lt;String, Integer&gt; redisTemplateInt(RedisConnectionFactory redisConnectionFactory) {\r\n            RedisTemplate&lt;String, Integer&gt; template = new RedisTemplate&lt;&gt;();\r\n            template.setConnectionFactory(redisConnectionFactory);\r\n            template.setEnableTransactionSupport(true);\r\n            Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(Object.class);\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\r\n            mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\r\n            serializer.setObjectMapper(mapper);\r\n            template.setValueSerializer(serializer);\r\n            template.setKeySerializer(new StringRedisSerializer());\r\n            template.setHashKeySerializer(serializer);\r\n            template.setHashValueSerializer(serializer);\r\n            template.afterPropertiesSet();\r\n            return template;\r\n        }\r\n    \r\n        /**\r\n         * @return\r\n         */\r\n        @Bean(name = &quot;redisLongTemplate&quot;)\r\n        RedisTemplate&lt;String, Long&gt; redisTemplateLong(RedisConnectionFactory redisConnectionFactory) {\r\n            RedisTemplate&lt;String, Long&gt; template = new RedisTemplate&lt;&gt;();\r\n            template.setConnectionFactory(redisConnectionFactory);\r\n            template.setEnableTransactionSupport(true);\r\n            Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(Long.class);\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\r\n            mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\r\n            serializer.setObjectMapper(mapper);\r\n            template.setValueSerializer(serializer);\r\n            template.setKeySerializer(new StringRedisSerializer());\r\n            template.setHashKeySerializer(serializer);\r\n            template.setHashValueSerializer(serializer);\r\n            template.afterPropertiesSet();\r\n            return template;\r\n        }\r\n\r\n\r\n\r\n\r\nI have to define each template for different data type, that make the code ugly. More simple way, I want to just define 1 template and with the generic data type that could make the code more simplicity and reuseable.\r\n\r\n\r\n","title":"is it possible to get the type from generic type in java","body":"<p>I have a method like this in Java:</p>\n<pre><code>@Bean(name = &quot;redisZSetTemplate&quot;)\n    &lt;T&gt; RedisTemplate&lt;String, T&gt; redisTemplateZSet(RedisConnectionFactory redisConnectionFactory) {\n}\n</code></pre>\n<p>what should I do to get the T type like <code>T.getClass()</code> or <code>T.class</code>? I have tried this way, add <code>import com.fasterxml.jackson.core.type.TypeReference;</code>, then get the T class like this:</p>\n<pre><code>Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(new TypeReference&lt;T&gt;(){}.getClass());\n</code></pre>\n<p>seems the <code>new TypeReference&lt;T&gt;(){}.getClass()</code> get current method class. not the type of T class。 I want to get the type because I want to parse the data type when fetched from redis. this is the full code looks like:</p>\n<pre><code>@Bean(name = &quot;redisZSetTemplate&quot;)\n    &lt;T&gt; RedisTemplate&lt;String, T&gt; redisTemplateZSet(RedisConnectionFactory redisConnectionFactory) {\n        RedisTemplate&lt;String, T&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(redisConnectionFactory);\n        template.setEnableTransactionSupport(true);\n        Class&lt;T&gt; tClass = (Class&lt;T&gt;)((ParameterizedType)getClass().getGenericSuperclass()).getActualTypeArguments()[0];\n        Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(tClass);\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\n        mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n        serializer.setObjectMapper(mapper);\n        template.setValueSerializer(serializer);\n        template.setKeySerializer(new StringRedisSerializer());\n        template.setHashKeySerializer(serializer);\n        template.setHashValueSerializer(serializer);\n        template.afterPropertiesSet();\n        return template;\n    }\n</code></pre>\n<p>store the ArticleZSet object into redis zset and deserilized it from redis. Actually I think define the T is more simplicity, what I am doing like this way:</p>\n<pre><code>@Bean(name = &quot;redisObjectTemplate&quot;)\n    RedisTemplate&lt;String, Object&gt; redisTemplateObject(RedisConnectionFactory redisConnectionFactory) {\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(redisConnectionFactory);\n        template.setEnableTransactionSupport(true);\n        Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(Object.class);\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\n        mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n        serializer.setObjectMapper(mapper);\n        template.setValueSerializer(serializer);\n        template.setKeySerializer(new StringRedisSerializer());\n        template.setHashKeySerializer(serializer);\n        template.setHashValueSerializer(serializer);\n        template.afterPropertiesSet();\n        return template;\n    }\n\n    /**\n     * @return\n     */\n    @Bean(name = &quot;redisIntegerTemplate&quot;)\n    RedisTemplate&lt;String, Integer&gt; redisTemplateInt(RedisConnectionFactory redisConnectionFactory) {\n        RedisTemplate&lt;String, Integer&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(redisConnectionFactory);\n        template.setEnableTransactionSupport(true);\n        Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(Object.class);\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\n        mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n        serializer.setObjectMapper(mapper);\n        template.setValueSerializer(serializer);\n        template.setKeySerializer(new StringRedisSerializer());\n        template.setHashKeySerializer(serializer);\n        template.setHashValueSerializer(serializer);\n        template.afterPropertiesSet();\n        return template;\n    }\n\n    /**\n     * @return\n     */\n    @Bean(name = &quot;redisLongTemplate&quot;)\n    RedisTemplate&lt;String, Long&gt; redisTemplateLong(RedisConnectionFactory redisConnectionFactory) {\n        RedisTemplate&lt;String, Long&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(redisConnectionFactory);\n        template.setEnableTransactionSupport(true);\n        Jackson2JsonRedisSerializer serializer = new Jackson2JsonRedisSerializer(Long.class);\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.WRAPPER_ARRAY);\n        mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n        serializer.setObjectMapper(mapper);\n        template.setValueSerializer(serializer);\n        template.setKeySerializer(new StringRedisSerializer());\n        template.setHashKeySerializer(serializer);\n        template.setHashValueSerializer(serializer);\n        template.afterPropertiesSet();\n        return template;\n    }\n</code></pre>\n<p>I have to define each template for different data type, that make the code ugly. More simple way, I want to just define 1 template and with the generic data type that could make the code more simplicity and reuseable.</p>\n"},{"tags":["java","date","jodatime"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1460347906,"post_id":36539700,"comment_id":60681544,"body_markdown":"Are you saying you want the result to be rounded up, rather than down?","body":"Are you saying you want the result to be rounded up, rather than down?"},{"owner":{"display_name":"user4458270"},"score":0,"creation_date":1460348058,"post_id":36539700,"comment_id":60681573,"body_markdown":"@David Wallace, exactly","body":"@David Wallace, exactly"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1460349029,"post_id":36539700,"comment_id":60681793,"body_markdown":"You could just add one to the result if the end time isn&#39;t the same as the start time.","body":"You could just add one to the result if the end time isn&#39;t the same as the start time."},{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":1,"creation_date":1460350498,"post_id":36539700,"comment_id":60682228,"body_markdown":"Note that you should not use `LocalDate` if you&#39;re interested in sub-date timespans - `LocalDate` drops the time component of your start and end dates leaving you with an exact number of days. `LocalDateTime` includes times but drops time zones, while `DateTime` also ensures the time zone is persisted. In this case I would probably use `DateTime`.","body":"Note that you should not use <code>LocalDate</code> if you&#39;re interested in sub-date timespans - <code>LocalDate</code> drops the time component of your start and end dates leaving you with an exact number of days. <code>LocalDateTime</code> includes times but drops time zones, while <code>DateTime</code> also ensures the time zone is persisted. In this case I would probably use <code>DateTime</code>."},{"owner":{"account_id":958617,"reputation":4858,"user_id":983430,"accept_rate":100,"display_name":"Amos M. Carpenter"},"score":0,"creation_date":1460350759,"post_id":36539700,"comment_id":60682300,"body_markdown":"Good point, @dimo414 - and why I&#39;m using `LocalDateTime` in the example in my answer instead of `LocalDate`.","body":"Good point, @dimo414 - and why I&#39;m using <code>LocalDateTime</code> in the example in my answer instead of <code>LocalDate</code>."}],"answers":[{"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":4,"creation_date":1460348770,"post_id":36539804,"comment_id":60681736,"body_markdown":"But a day is NOT necessarily 86400000 milliseconds.  When daylight savings starts, we get a 23-hour day; and when daylight savings ends, we get a 25-hour day.  The Joda and java.time libraries take account of that in their calculations.  If you don&#39;t use one of them, you&#39;ll more-than-likely get this badly wrong.","body":"But a day is NOT necessarily 86400000 milliseconds.  When daylight savings starts, we get a 23-hour day; and when daylight savings ends, we get a 25-hour day.  The Joda and java.time libraries take account of that in their calculations.  If you don&#39;t use one of them, you&#39;ll more-than-likely get this badly wrong."},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":2,"creation_date":1460348888,"post_id":36539804,"comment_id":60681767,"body_markdown":"It depends on how you define a day.  In local time, when time zone offsets are applied, the period between midnight to midnight may contain 23, 24, or 25 hours depending on whether a transition occurs.  However, in UTC no time zone offsets ever apply and so a day is always 86400 seconds.","body":"It depends on how you define a day.  In local time, when time zone offsets are applied, the period between midnight to midnight may contain 23, 24, or 25 hours depending on whether a transition occurs.  However, in UTC no time zone offsets ever apply and so a day is always 86400 seconds."}],"tags":[],"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460348497,"creation_date":1460348497,"answer_id":36539804,"question_id":36539700,"body_markdown":"No absolute need to use Joda time, or java.time, here.  A day is (86400 * 1000) milliseconds.  Java `Date`s give you the current time as UTC milliseconds in the Posix epoch. So ...\r\n\r\n    long diffMillis = endDate.getTime() - startDate.getTime();\r\n    int deltaDays = (int) Math.ceil(diffMillis / (86400.0 * 1000.0));","title":"How to get the number of days between two java dates, comparing both the date and also time","body":"<p>No absolute need to use Joda time, or java.time, here.  A day is (86400 * 1000) milliseconds.  Java <code>Date</code>s give you the current time as UTC milliseconds in the Posix epoch. So ...</p>\n\n<pre><code>long diffMillis = endDate.getTime() - startDate.getTime();\nint deltaDays = (int) Math.ceil(diffMillis / (86400.0 * 1000.0));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":958617,"reputation":4858,"user_id":983430,"accept_rate":100,"display_name":"Amos M. Carpenter"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1665907271,"creation_date":1460349743,"answer_id":36539981,"question_id":36539700,"body_markdown":"The [JavaDoc][1] for `Days.daysBetween()` says (emphasis mine):\r\n\r\n&gt; Creates a Days representing the **number of whole days** between the two\r\n&gt; specified partial datetimes.\r\n\r\nSo just check whether there are any &quot;left-overs&quot;, and increase if that&#39;s the case:\r\n\r\n    LocalDateTime now = new LocalDateTime();\r\n    LocalDateTime then = now.minusDays(2).minusMinutes(5);\r\n    int numberOfDaysBetween = Days.daysBetween(then, now).getDays();\r\n    LocalDateTime fullDayTime = then.plusDays(numberOfDaysBetween);\r\n    if (fullDayTime.isBefore(now)) {\r\n        numberOfDaysBetween++;\r\n    }\r\n\r\nThis should end up with `numberOfDaysBetween` being 3, since `then` is 2 days *and 5 minutes* before `now`.\n\n [1]: https://joda-time.sourceforge.net/apidocs/org/joda/time/Days.html#daysBetween(org.joda.time.ReadablePartial,org.joda.time.ReadablePartial)","title":"How to get the number of days between two java dates, comparing both the date and also time","body":"<p>The <a href=\"https://joda-time.sourceforge.net/apidocs/org/joda/time/Days.html#daysBetween(org.joda.time.ReadablePartial,org.joda.time.ReadablePartial)\" rel=\"nofollow noreferrer\">JavaDoc</a> for <code>Days.daysBetween()</code> says (emphasis mine):</p>\n<blockquote>\n<p>Creates a Days representing the <strong>number of whole days</strong> between the two\nspecified partial datetimes.</p>\n</blockquote>\n<p>So just check whether there are any &quot;left-overs&quot;, and increase if that's the case:</p>\n<pre><code>LocalDateTime now = new LocalDateTime();\nLocalDateTime then = now.minusDays(2).minusMinutes(5);\nint numberOfDaysBetween = Days.daysBetween(then, now).getDays();\nLocalDateTime fullDayTime = then.plusDays(numberOfDaysBetween);\nif (fullDayTime.isBefore(now)) {\n    numberOfDaysBetween++;\n}\n</code></pre>\n<p>This should end up with <code>numberOfDaysBetween</code> being 3, since <code>then</code> is 2 days <em>and 5 minutes</em> before <code>now</code>.</p>\n"}],"owner":{"display_name":"user4458270"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1195,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36539981,"answer_count":2,"score":2,"last_activity_date":1665907271,"creation_date":1460347693,"question_id":36539700,"body_markdown":"I am trying to calculate the number of days between two java `date` objects using the following code:\r\n\r\n    public static int daysBetweenDates(Date startDate, Date endDate)\r\n    \t{\r\n    \t\treturn Days.daysBetween( new LocalDate(startDate.getTime()), new LocalDate(endDate.getTime())).getDays(); \r\n    \t}\r\n\r\nI am using the `Joda` time here. But my problem is that when I compare two dates, example : Mon Apr 11 09:04:00 IST 2016 and Wed Apr 13 11:04:00 IST 2016, the result I get is 2. In fact the result I am expecting is 3 since there is more than 2 days between the given dates. Is there any way to do that.","title":"How to get the number of days between two java dates, comparing both the date and also time","body":"<p>I am trying to calculate the number of days between two java <code>date</code> objects using the following code:</p>\n\n<pre><code>public static int daysBetweenDates(Date startDate, Date endDate)\n    {\n        return Days.daysBetween( new LocalDate(startDate.getTime()), new LocalDate(endDate.getTime())).getDays(); \n    }\n</code></pre>\n\n<p>I am using the <code>Joda</code> time here. But my problem is that when I compare two dates, example : Mon Apr 11 09:04:00 IST 2016 and Wed Apr 13 11:04:00 IST 2016, the result I get is 2. In fact the result I am expecting is 3 since there is more than 2 days between the given dates. Is there any way to do that.</p>\n"},{"tags":["java","thread-safety","atomicinteger"],"comments":[{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":4,"creation_date":1623149458,"post_id":67885351,"comment_id":119989797,"body_markdown":"This code should work because `getAndIncrement` is thread-safe, are you sure it prints only 98 or 99 times?","body":"This code should work because <code>getAndIncrement</code> is thread-safe, are you sure it prints only 98 or 99 times?"},{"owner":{"account_id":19972020,"reputation":299,"user_id":14637258,"display_name":"Anne Maier"},"score":0,"creation_date":1623153733,"post_id":67885351,"comment_id":119991244,"body_markdown":"Thanks Karol. Could the IDE or other programs running in the background be affecting the output? I tried to reproduce the problem but was unable to. I had copied the console output in Excel and I am sure that it was once 98 and the other 99 lines.","body":"Thanks Karol. Could the IDE or other programs running in the background be affecting the output? I tried to reproduce the problem but was unable to. I had copied the console output in Excel and I am sure that it was once 98 and the other 99 lines."},{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1623153802,"post_id":67885351,"comment_id":119991282,"body_markdown":"I couldn&#39;t reproduce your problem and the code looks correct, I don&#39;t know how you could have received 98 or 99 instead of 100.","body":"I couldn&#39;t reproduce your problem and the code looks correct, I don&#39;t know how you could have received 98 or 99 instead of 100."},{"owner":{"account_id":21579655,"reputation":1318,"user_id":15911053,"display_name":"iggy"},"score":4,"creation_date":1623157580,"post_id":67885351,"comment_id":119993049,"body_markdown":"The counting part looks ok to me.  I have a tiny smidgen of doubt about the parallel println calls; the [description](https://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println(java.lang.Object)) suggests that printing the value and printing the line terminator are distinct actions, which I suppose *may* result in two values followed by two newlines - but then you&#39;d have obviously-wrong output.","body":"The counting part looks ok to me.  I have a tiny smidgen of doubt about the parallel println calls; the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println(java.lang.Object)\" rel=\"nofollow noreferrer\">description</a> suggests that printing the value and printing the line terminator are distinct actions, which I suppose <i>may</i> result in two values followed by two newlines - but then you&#39;d have obviously-wrong output."},{"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"score":0,"creation_date":1665831451,"post_id":67885351,"comment_id":130793595,"body_markdown":"I agree with @iggy, this is likely an artefact with `println`. To confirm, try incrementing another `AtomicInteger` in the body of the `if` statement and observe its final value.","body":"I agree with @iggy, this is likely an artefact with <code>println</code>. To confirm, try incrementing another <code>AtomicInteger</code> in the body of the <code>if</code> statement and observe its final value."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665909870,"post_id":67885351,"comment_id":130805708,"body_markdown":"[ExecutorCompletionService](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html) ..since java 1.5!;)","body":"<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html\" rel=\"nofollow noreferrer\">ExecutorCompletionService</a> ..since java 1.5!;)"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623191424,"creation_date":1623190500,"answer_id":67895210,"question_id":67885351,"body_markdown":"Unable to replicate your reported experience.\r\n\r\nIn my mind’s debugger, that seems correct as I cannot see any thread-safety fault in your code.\r\n\r\nTo automate further testing, I altered your code as follows. Rather than call `System.out.println`, I added the thread ID to a `List` of `Long`. I made the list a [`CopyOnWriteArrayList`][1] for thread-safety. I can programmatically detect if the resulting list is not exactly 100 elements in size.\r\n\r\n\r\n```java\r\npackage work.basil.demo;\r\n\r\nimport java.time.Instant;\r\nimport java.util.ArrayList;\r\nimport java.util.concurrent.CopyOnWriteArrayList;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\npublic class Print implements Runnable\r\n{\r\n    static AtomicInteger atomicInteger = new AtomicInteger( 0 );\r\n    static CopyOnWriteArrayList &lt; Long &gt; list = new CopyOnWriteArrayList &lt;&gt;();\r\n\r\n    @Override\r\n    public void run ( )\r\n    {\r\n        while ( atomicInteger.getAndIncrement() &lt; 100 )\r\n            //System.out.println(Thread.currentThread());\r\n            list.add( Thread.currentThread().getId() );\r\n    }\r\n\r\n    public static void main ( String[] args ) throws InterruptedException\r\n    {\r\n        System.out.println( &quot;INFO - demo starting. &quot; + Instant.now() );\r\n        for ( int cycle = 0 ; cycle &lt; 1_000_000 ; cycle++ )\r\n        {\r\n            ArrayList &lt; Thread &gt; threads = new ArrayList &lt;&gt;();\r\n\r\n            for ( int i = 0 ; i &lt; 5 ; i++ )\r\n                threads.add( new Thread( new Print() ) );\r\n\r\n            for ( Thread thread : threads )\r\n                thread.start();\r\n\r\n            for ( Thread thread : threads )\r\n                thread.join();\r\n\r\n//            System.out.println( &quot;list.size() = &quot; + list.size() );\r\n//            if ( list.size() == 100 ) { System.out.println( &quot;DEBUG list.size() = &quot; + ( list.size() ) ); }\r\n            if ( list.size() != 100 ) { System.out.println( &quot;DEBUG list.size() = &quot; + ( list.size() ) ); }\r\n        }\r\n        System.out.println( &quot;INFO - demo done. &quot; + Instant.now() );\r\n    }\r\n}\r\n```\r\n\r\nWhen run on a Mac mini (2018) 3 GHz Intel Core i5 with six real cores and no hyper-threading, and 32 GB 2667 MHz DDR4, using Java 16 within IntelliJ. Running `cycle` to a million takes about 5 minutes.\r\n\r\n```none\r\nINFO - demo starting. 2021-06-08T22:11:56.010181Z\r\nINFO - demo done. 2021-06-08T22:16:26.982616Z\r\n```\r\n\r\n## `ExecutorService`\r\n\r\nBy the way, in modern Java we rarely need to address the `Thread` class directly. Instead, use the [Executors][2] framework added to Java 5. \r\n\r\nHere is revised version of the code above, rejiggered to use an executor service.\r\n\r\n```java\r\npublic static void main ( String[] args ) throws InterruptedException\r\n{\r\n    System.out.println( &quot;INFO - demo starting. &quot; + Instant.now() );\r\n    for ( int cycle = 0 ; cycle &lt; 1_000_000 ; cycle++ )\r\n    {\r\n        ExecutorService executorService = Executors.newFixedThreadPool( 5 );\r\n\r\n        int countTasks = 5;\r\n        for ( int i = 0 ; i &lt; countTasks ; i++ )\r\n        {\r\n            executorService.submit( new Print2() );\r\n        }\r\n\r\n        executorService.shutdown();\r\n        executorService.awaitTermination( Duration.ofMinutes( 7 ).toSeconds() , TimeUnit.SECONDS );\r\n\r\n//            System.out.println( &quot;list.size() = &quot; + list.size() );\r\n//            if ( list.size() == 100 ) { System.out.println( &quot;DEBUG list.size() = &quot; + ( list.size() ) ); }\r\n        if ( list.size() != 100 ) { System.out.println( &quot;DEBUG list.size() = &quot; + ( list.size() ) ); }\r\n    }\r\n    System.out.println( &quot;INFO - demo done. &quot; + Instant.now() );\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html","title":"AtomicInteger thread safety","body":"<p>Unable to replicate your reported experience.</p>\n<p>In my mind’s debugger, that seems correct as I cannot see any thread-safety fault in your code.</p>\n<p>To automate further testing, I altered your code as follows. Rather than call <code>System.out.println</code>, I added the thread ID to a <code>List</code> of <code>Long</code>. I made the list a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"nofollow noreferrer\"><code>CopyOnWriteArrayList</code></a> for thread-safety. I can programmatically detect if the resulting list is not exactly 100 elements in size.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.demo;\n\nimport java.time.Instant;\nimport java.util.ArrayList;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Print implements Runnable\n{\n    static AtomicInteger atomicInteger = new AtomicInteger( 0 );\n    static CopyOnWriteArrayList &lt; Long &gt; list = new CopyOnWriteArrayList &lt;&gt;();\n\n    @Override\n    public void run ( )\n    {\n        while ( atomicInteger.getAndIncrement() &lt; 100 )\n            //System.out.println(Thread.currentThread());\n            list.add( Thread.currentThread().getId() );\n    }\n\n    public static void main ( String[] args ) throws InterruptedException\n    {\n        System.out.println( &quot;INFO - demo starting. &quot; + Instant.now() );\n        for ( int cycle = 0 ; cycle &lt; 1_000_000 ; cycle++ )\n        {\n            ArrayList &lt; Thread &gt; threads = new ArrayList &lt;&gt;();\n\n            for ( int i = 0 ; i &lt; 5 ; i++ )\n                threads.add( new Thread( new Print() ) );\n\n            for ( Thread thread : threads )\n                thread.start();\n\n            for ( Thread thread : threads )\n                thread.join();\n\n//            System.out.println( &quot;list.size() = &quot; + list.size() );\n//            if ( list.size() == 100 ) { System.out.println( &quot;DEBUG list.size() = &quot; + ( list.size() ) ); }\n            if ( list.size() != 100 ) { System.out.println( &quot;DEBUG list.size() = &quot; + ( list.size() ) ); }\n        }\n        System.out.println( &quot;INFO - demo done. &quot; + Instant.now() );\n    }\n}\n</code></pre>\n<p>When run on a Mac mini (2018) 3 GHz Intel Core i5 with six real cores and no hyper-threading, and 32 GB 2667 MHz DDR4, using Java 16 within IntelliJ. Running <code>cycle</code> to a million takes about 5 minutes.</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO - demo starting. 2021-06-08T22:11:56.010181Z\nINFO - demo done. 2021-06-08T22:16:26.982616Z\n</code></pre>\n<h2><code>ExecutorService</code></h2>\n<p>By the way, in modern Java we rarely need to address the <code>Thread</code> class directly. Instead, use the <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html\" rel=\"nofollow noreferrer\">Executors</a> framework added to Java 5.</p>\n<p>Here is revised version of the code above, rejiggered to use an executor service.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main ( String[] args ) throws InterruptedException\n{\n    System.out.println( &quot;INFO - demo starting. &quot; + Instant.now() );\n    for ( int cycle = 0 ; cycle &lt; 1_000_000 ; cycle++ )\n    {\n        ExecutorService executorService = Executors.newFixedThreadPool( 5 );\n\n        int countTasks = 5;\n        for ( int i = 0 ; i &lt; countTasks ; i++ )\n        {\n            executorService.submit( new Print2() );\n        }\n\n        executorService.shutdown();\n        executorService.awaitTermination( Duration.ofMinutes( 7 ).toSeconds() , TimeUnit.SECONDS );\n\n//            System.out.println( &quot;list.size() = &quot; + list.size() );\n//            if ( list.size() == 100 ) { System.out.println( &quot;DEBUG list.size() = &quot; + ( list.size() ) ); }\n        if ( list.size() != 100 ) { System.out.println( &quot;DEBUG list.size() = &quot; + ( list.size() ) ); }\n    }\n    System.out.println( &quot;INFO - demo done. &quot; + Instant.now() );\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1665738856,"post_id":74066129,"comment_id":130773221,"body_markdown":"That won&#39;t work correctly, if thread 1 arrives and increments to 101 (and receive 100), thread 2 can arrive and increment to 102 (and receive 101), and so on for threads 3 - 5.","body":"That won&#39;t work correctly, if thread 1 arrives and increments to 101 (and receive 100), thread 2 can arrive and increment to 102 (and receive 101), and so on for threads 3 - 5."},{"owner":{"account_id":14463579,"reputation":111,"user_id":13213920,"display_name":"mailtime"},"score":0,"creation_date":1665829201,"post_id":74066129,"comment_id":130793220,"body_markdown":"Please remove the word &quot;static for the variable atomicInteger. This is my print for 3threads and while !=5 gyazo.com/bb8a712e1d32934c362e1a662d0b3a80","body":"Please remove the word &quot;static for the variable atomicInteger. This is my print for 3threads and while !=5 gyazo.com/bb8a712e1d32934c362e1a662d0b3a80"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1665835455,"post_id":74066129,"comment_id":130794271,"body_markdown":"The use static is required for the problem the OP tries to implement (or they would need to pass a single instance of the `AtomicInteger` to each instance of `Print`), as the shared use of the `AtomicInteger` is the whole point.","body":"The use static is required for the problem the OP tries to implement (or they would need to pass a single instance of the <code>AtomicInteger</code> to each instance of <code>Print</code>), as the shared use of the <code>AtomicInteger</code> is the whole point."},{"owner":{"account_id":14463579,"reputation":111,"user_id":13213920,"display_name":"mailtime"},"score":0,"creation_date":1665839018,"post_id":74066129,"comment_id":130794993,"body_markdown":"I supplemented the answer if static is important in the context of this question","body":"I supplemented the answer if static is important in the context of this question"}],"tags":[],"owner":{"account_id":14463579,"reputation":111,"user_id":13213920,"display_name":"mailtime"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665907226,"creation_date":1665734505,"answer_id":74066129,"question_id":67885351,"body_markdown":" ```java\r\n     static AtomicInteger atomicInteger = new AtomicInteger(0); change to\r\n     AtomicInteger atomicInteger = new AtomicInteger(1);// 0-&gt;1 no static\r\n   \r\n     while (atomicInteger.getAndIncrement() &lt; 100) //change to:\r\n     while (atomicInteger.getAndIncrement() != 101)//100-&gt;101\r\n\r\n```\r\nremove &quot;static&quot; for the variable atomicInteger.&lt;/br&gt;\r\nif you need to get exactly 1...100 (not 0...99) set the atomic value to 1 and in the loop set !=101\r\nmy print \r\nhttps://gyazo.com/6762c78ae44c0b06d05e316768114167\r\n\r\nThe comment clarified the question: the key point is the use of statics. use a semaphore\r\n```java\r\nimport java.util.*;\r\nimport java.util.concurrent.*;\r\nimport java.util.concurrent.atomic.*;\r\n\r\npublic class Print implements Runnable {\r\n    static AtomicInteger atomicInteger = new AtomicInteger(1);\r\n\r\n    private final Semaphore semaphore;\r\n\r\n    public Print(final Semaphore semaphore) {\r\n        this.semaphore = semaphore;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        int count = 0;\r\n        try {\r\n            semaphore.acquire();\r\n            while ((count = atomicInteger.getAndIncrement()) != 101) {\r\n            System.out.println(\r\n            &quot;COUNT::&quot; + count + &quot;::&quot; + Thread.currentThread());\r\n        }\r\n           atomicInteger.set(1);\r\n            \r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        } finally {\r\n            semaphore.release();\r\n        }\r\n\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\r\n        Semaphore semaphore = new Semaphore(1);\r\n        for (int i = 0; i &lt; 5; i++)\r\n            threads.add(new Thread(new Print(semaphore)));\r\n        for (Thread thread : threads)\r\n            thread.start();\r\n        for (Thread thread : threads)\r\n            thread.join();\r\n    }\r\n}\r\n```\r\n","title":"AtomicInteger thread safety","body":"<pre class=\"lang-java prettyprint-override\"><code>    static AtomicInteger atomicInteger = new AtomicInteger(0); change to\n    AtomicInteger atomicInteger = new AtomicInteger(1);// 0-&gt;1 no static\n  \n    while (atomicInteger.getAndIncrement() &lt; 100) //change to:\n    while (atomicInteger.getAndIncrement() != 101)//100-&gt;101\n\n</code></pre>\n<p>remove &quot;static&quot; for the variable atomicInteger.\nif you need to get exactly 1...100 (not 0...99) set the atomic value to 1 and in the loop set !=101\nmy print\n<a href=\"https://gyazo.com/6762c78ae44c0b06d05e316768114167\" rel=\"nofollow noreferrer\">https://gyazo.com/6762c78ae44c0b06d05e316768114167</a></p>\n<p>The comment clarified the question: the key point is the use of statics. use a semaphore</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\nimport java.util.concurrent.*;\nimport java.util.concurrent.atomic.*;\n\npublic class Print implements Runnable {\n    static AtomicInteger atomicInteger = new AtomicInteger(1);\n\n    private final Semaphore semaphore;\n\n    public Print(final Semaphore semaphore) {\n        this.semaphore = semaphore;\n    }\n\n    @Override\n    public void run() {\n        int count = 0;\n        try {\n            semaphore.acquire();\n            while ((count = atomicInteger.getAndIncrement()) != 101) {\n            System.out.println(\n            &quot;COUNT::&quot; + count + &quot;::&quot; + Thread.currentThread());\n        }\n           atomicInteger.set(1);\n            \n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        } finally {\n            semaphore.release();\n        }\n\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\n        Semaphore semaphore = new Semaphore(1);\n        for (int i = 0; i &lt; 5; i++)\n            threads.add(new Thread(new Print(semaphore)));\n        for (Thread thread : threads)\n            thread.start();\n        for (Thread thread : threads)\n            thread.join();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19972020,"reputation":299,"user_id":14637258,"display_name":"Anne Maier"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":590,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1665907226,"creation_date":1623146182,"question_id":67885351,"body_markdown":"How can I achieve that the while loop here is always executed exactly 100 times. When I execute the code, in rare cases it prints 99 or 98 lines on the console and not always 100, which I do not understand.\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\npublic class Print implements Runnable {\r\n    static AtomicInteger atomicInteger = new AtomicInteger(0);\r\n\r\n    @Override\r\n    public void run() {\r\n        while (atomicInteger.getAndIncrement() &lt; 100)\r\n            System.out.println(Thread.currentThread());\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        ArrayList&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; 5; i++)\r\n            threads.add(new Thread(new Print()));\r\n\r\n        for (Thread thread : threads)\r\n            thread.start();\r\n\r\n        for (Thread thread : threads)\r\n            thread.join();\r\n    }\r\n}\r\n```","title":"AtomicInteger thread safety","body":"<p>How can I achieve that the while loop here is always executed exactly 100 times. When I execute the code, in rare cases it prints 99 or 98 lines on the console and not always 100, which I do not understand.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Print implements Runnable {\n    static AtomicInteger atomicInteger = new AtomicInteger(0);\n\n    @Override\n    public void run() {\n        while (atomicInteger.getAndIncrement() &lt; 100)\n            System.out.println(Thread.currentThread());\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        ArrayList&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; 5; i++)\n            threads.add(new Thread(new Print()));\n\n        for (Thread thread : threads)\n            thread.start();\n\n        for (Thread thread : threads)\n            thread.join();\n    }\n}\n</code></pre>\n"},{"tags":["java","netbeans","glassfish"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1665917134,"post_id":74081487,"comment_id":130806884,"body_markdown":"Java 10 went out of support in September 2018. Use a supported version like Java 8, 11, 17 or 19.","body":"Java 10 went out of support in September 2018. Use a supported version like Java 8, 11, 17 or 19."}],"answers":[{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665907096,"creation_date":1665907096,"answer_id":74085451,"question_id":74081487,"body_markdown":"It is tricky to ensure that you are using an appropriate version combination of  NetBeans, Java and GlassFish. I don&#39;t know of any single piece of documentation that helps, but this is what you can do:\r\n- Refer to the Release Notes for your NetBeans installation (e.g. [Downloading Apache NetBeans 15][1]) to determine which Java versions it supports.\r\n- Refer to the [Eclipse GlassFish documentation][2] to determine which Java versions GlassFish 6.x supports.\r\n\r\nIn your case, although you don&#39;t mention you GlassFish version, since you are using NetBeans 15 you must use a JDK &gt;= 11. [From the Release Notes for NetBeans 15][1]:\r\n\r\n&gt; The Apache NetBeans 15 binary releases require JDK 11+, and officially\r\n&gt; support running on JDK 11 and JDK 17.\r\n\r\nSo your current NetBeans environment which uses JDK 10 is invalid. GlassFish is not your biggest concern; you need to update NetBeans to use a valid JDK first. \r\n\r\n[This answer][3] summarizes GlassFish 6.x &lt;=&gt; JDK compatibility. If you are using a GlassFish release &lt; 6 then you must use JDK 8 which is not supported by any recent release of NetBeans.\r\n\r\nAnd regardless of all that, unless you have a compelling reason for doing so, you should stop using JDK 10. It is unsupported, may present security risks, and is definitely problematic for a working NetBeans/Java/GlassFish environment. Once you have installed a valid JDK, also ensure that you remove all traces of JDK 10 from your environment.\r\n\r\nOne stable combination you might consider is NetBeans 15 + JDK 11 + GlassFish 6.1, but there are plenty of other possibilities.\r\n\r\nUpdate your question if you still have problems after upgrading your JDK. \r\n\r\n\r\n  [1]: https://netbeans.apache.org/download/nb15/\r\n  [2]: https://glassfish.org/download\r\n  [3]: https://stackoverflow.com/a/73299930/2985643","title":"What glassfish version is suitable for jdk 10","body":"<p>It is tricky to ensure that you are using an appropriate version combination of  NetBeans, Java and GlassFish. I don't know of any single piece of documentation that helps, but this is what you can do:</p>\n<ul>\n<li>Refer to the Release Notes for your NetBeans installation (e.g. <a href=\"https://netbeans.apache.org/download/nb15/\" rel=\"nofollow noreferrer\">Downloading Apache NetBeans 15</a>) to determine which Java versions it supports.</li>\n<li>Refer to the <a href=\"https://glassfish.org/download\" rel=\"nofollow noreferrer\">Eclipse GlassFish documentation</a> to determine which Java versions GlassFish 6.x supports.</li>\n</ul>\n<p>In your case, although you don't mention you GlassFish version, since you are using NetBeans 15 you must use a JDK &gt;= 11. <a href=\"https://netbeans.apache.org/download/nb15/\" rel=\"nofollow noreferrer\">From the Release Notes for NetBeans 15</a>:</p>\n<blockquote>\n<p>The Apache NetBeans 15 binary releases require JDK 11+, and officially\nsupport running on JDK 11 and JDK 17.</p>\n</blockquote>\n<p>So your current NetBeans environment which uses JDK 10 is invalid. GlassFish is not your biggest concern; you need to update NetBeans to use a valid JDK first.</p>\n<p><a href=\"https://stackoverflow.com/a/73299930/2985643\">This answer</a> summarizes GlassFish 6.x &lt;=&gt; JDK compatibility. If you are using a GlassFish release &lt; 6 then you must use JDK 8 which is not supported by any recent release of NetBeans.</p>\n<p>And regardless of all that, unless you have a compelling reason for doing so, you should stop using JDK 10. It is unsupported, may present security risks, and is definitely problematic for a working NetBeans/Java/GlassFish environment. Once you have installed a valid JDK, also ensure that you remove all traces of JDK 10 from your environment.</p>\n<p>One stable combination you might consider is NetBeans 15 + JDK 11 + GlassFish 6.1, but there are plenty of other possibilities.</p>\n<p>Update your question if you still have problems after upgrading your JDK.</p>\n"}],"owner":{"account_id":8832558,"reputation":1,"user_id":6598297,"display_name":"user6598297"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1665907096,"creation_date":1665853772,"question_id":74081487,"body_markdown":"I am trying to setup netbeans 15 for Java development but the glassfish installed could not be added. The wizard asked me to create domain manually on command prompt but while trying to do that I got the error message: \r\n\r\n&gt;glassfish requires version 6 but your jdk version is 0. \r\n\r\nI have ensured my environment variables are well set ","title":"What glassfish version is suitable for jdk 10","body":"<p>I am trying to setup netbeans 15 for Java development but the glassfish installed could not be added. The wizard asked me to create domain manually on command prompt but while trying to do that I got the error message:</p>\n<blockquote>\n<p>glassfish requires version 6 but your jdk version is 0.</p>\n</blockquote>\n<p>I have ensured my environment variables are well set</p>\n"},{"tags":["java","mysql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":6950003,"reputation":1952,"user_id":5332914,"accept_rate":75,"display_name":"user404"},"score":0,"creation_date":1665908249,"post_id":40900547,"comment_id":130805485,"body_markdown":"can you change your fieldName to camelCase? Like `firstName` instead of `first_name`? And, also change the setter getter method accordingly? You don&#39;t need to change the column definition btw.\nYour setter methods seem not being recognized.","body":"can you change your fieldName to camelCase? Like <code>firstName</code> instead of <code>first_name</code>? And, also change the setter getter method accordingly? You don&#39;t need to change the column definition btw. Your setter methods seem not being recognized."}],"answers":[{"comments":[{"owner":{"account_id":1432958,"reputation":8299,"user_id":1354934,"accept_rate":56,"display_name":"user1354934"},"score":0,"creation_date":1480552000,"post_id":40900599,"comment_id":69015081,"body_markdown":"thanks!  I tried that, but I am still getting the error :(","body":"thanks!  I tried that, but I am still getting the error :("}],"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480551993,"creation_date":1480551679,"answer_id":40900599,"question_id":40900547,"body_markdown":"All JPA entity classes should have the empty constructors and **your `User` class is missing empty constructor** which is causing this issue, so change your `User` Entity class as shown below and add `User()` constructor:\r\n\r\n    public class User {\r\n    \r\n        public User() {//empty constructor\r\n        }\r\n    \r\n        //add existing code here\r\n    \r\n    }\r\n\r\n&gt; The entity class must have a no-arg constructor. The entity class may\r\n&gt; have other constructors as well. The no-arg constructor must be public\r\n&gt; or protected. \r\n\r\nYou can look [here][1] for the spec.\r\n\r\n\r\n  [1]: http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html","title":"Messing around with JPA and getting an Error creating user - could not set field value","body":"<p>All JPA entity classes should have the empty constructors and <strong>your <code>User</code> class is missing empty constructor</strong> which is causing this issue, so change your <code>User</code> Entity class as shown below and add <code>User()</code> constructor:</p>\n\n<pre><code>public class User {\n\n    public User() {//empty constructor\n    }\n\n    //add existing code here\n\n}\n</code></pre>\n\n<blockquote>\n  <p>The entity class must have a no-arg constructor. The entity class may\n  have other constructors as well. The no-arg constructor must be public\n  or protected. </p>\n</blockquote>\n\n<p>You can look <a href=\"http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html\" rel=\"nofollow noreferrer\">here</a> for the spec.</p>\n"},{"tags":[],"owner":{"account_id":15154412,"reputation":21,"user_id":10935755,"display_name":"Andrzej Foltyński"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1547870452,"creation_date":1547870452,"answer_id":54263943,"question_id":40900547,"body_markdown":"I had the same problem. Your strategy in @GenericGenerator is set incorrectly.\r\n\r\nTry:\r\n\r\n    @GenericGenerator(name = &quot;system-uuid&quot;, strategy = &quot;org.hibernate.id.UUIDGenerator&quot;)","title":"Messing around with JPA and getting an Error creating user - could not set field value","body":"<p>I had the same problem. Your strategy in @GenericGenerator is set incorrectly.</p>\n\n<p>Try:</p>\n\n<pre><code>@GenericGenerator(name = \"system-uuid\", strategy = \"org.hibernate.id.UUIDGenerator\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15567971,"reputation":11,"user_id":11231187,"display_name":"G. Ionut"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665906691,"creation_date":1665906691,"answer_id":74085418,"question_id":40900547,"body_markdown":"in dataBase exists UUID type, try to use UUID instead of varchar(36). ","title":"Messing around with JPA and getting an Error creating user - could not set field value","body":"<p>in dataBase exists UUID type, try to use UUID instead of varchar(36).</p>\n"}],"owner":{"account_id":1432958,"reputation":8299,"user_id":1354934,"accept_rate":56,"display_name":"user1354934"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1328,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1665906691,"creation_date":1480551276,"question_id":40900547,"body_markdown":"I am following the Spring tutorial to get started with JPA, and I have a basic mysql db with a `user` table.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI&#39;ve set up `User.java` as follows:\r\n\r\n    package com.test.models;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Table;\r\n    import javax.persistence.Column;\r\n    import javax.persistence.GeneratedValue;\r\n    import org.hibernate.annotations.GenericGenerator;\r\n    import javax.persistence.Id;\r\n    import java.util.UUID;\r\n    \r\n    @Entity\r\n    @Table(name=&quot;user&quot;)\r\n    public class User {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(generator=&quot;system-uuid&quot;)\r\n    \t@GenericGenerator(name=&quot;system-uuid&quot;, strategy = &quot;uuid&quot;)\r\n        @Column(name=&quot;id&quot;)\r\n        private UUID id;\r\n    \r\n        @Column(name=&quot;first_name&quot;)\r\n        String first_name;\r\n    \r\n        @Column(name=&quot;last_name&quot;)\r\n        String last_name;\r\n    \r\n        @Column(name=&quot;username&quot;)\r\n        String username;\r\n    \r\n        public User(String first_name, String last_name, String username) {\r\n            this.first_name = first_name;\r\n            this.last_name = last_name;\r\n            this.username = username;\r\n        }\r\n\r\n        public User() { } \r\n    \r\n        public UUID getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(UUID id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getFirst_name() {\r\n            return first_name;\r\n        }\r\n    \r\n        public void setFirst_name(String first_name) {\r\n            this.first_name = first_name;\r\n        }\r\n    \r\n        public String getLast_name() {\r\n            return last_name;\r\n        }\r\n    \r\n        public void setLast_name(String last_name) {\r\n            this.last_name = last_name;\r\n        }\r\n    \r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n    \r\n        public void setUsername(String username) {\r\n            this.username = username;\r\n        }\r\n    }\r\n\r\nI&#39;ve set up the `UserRepo.java`:\r\n\r\n    package com.test.models;\r\n    \r\n    \r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.data.rest.core.annotation.RepositoryRestResource;\r\n    \r\n    import java.util.UUID;\r\n    \r\n    @RepositoryRestResource\r\n    public interface UserRepo extends CrudRepository&lt;User, UUID&gt;{\r\n        User findByUsername(String username);\r\n\r\n}\r\n\r\nAnd finally the `UserController.java`:\r\n\r\n    package com.test.controllers;\r\n    \r\n    import com.test.models.UserRepo;\r\n    import com.test.models.User;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.ResponseBody;\r\n    \r\n    @Controller\r\n    public class UserController {\r\n    \r\n        @Autowired\r\n        private UserRepo userRepo;\r\n    \r\n        @RequestMapping(&quot;/create&quot;)\r\n        @ResponseBody\r\n        public String create(String first_name, String last_name, String username) {\r\n            String userId = &quot;&quot;;\r\n            try {\r\n                User user = new User(first_name, last_name, username);\r\n                userRepo.save(user);\r\n                userId = String.valueOf(user.getId());\r\n            }\r\n            catch (Exception ex) {\r\n                return &quot;Error creating the user: &quot; + ex.toString();\r\n            }\r\n            return &quot;User successfully created with id = &quot; + userId;\r\n        }\r\n    \r\n    }\r\n\r\nI&#39;ve also set up my db connection:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/test?autoReconnect=true&amp;useSSL=false\r\n    spring.datasource.username=root\r\n    spring.datasource.password=fakepass\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n\r\nHowever, when I use postman to make a POST to localhost:8080/create with\r\n\r\n    {\r\n    \t&quot;first_name&quot;: &quot;Jim&quot;,\r\n    \t&quot;last_name&quot;: &quot;Smith&quot;,\r\n    \t&quot;username&quot;: &quot;jim.smith&quot;\r\n    }\r\n\r\nI get this error:\r\n\r\n&gt; Error creating the user:\r\n&gt; org.springframework.orm.jpa.JpaSystemException: Could not set field\r\n&gt; value [ff80818158b79f8e0158b7a285b60001] value by reflection : [class\r\n&gt; com.test.models.User.id] setter of com.test.models.User.id; nested\r\n&gt; exception is org.hibernate.PropertyAccessException: Could not set\r\n&gt; field value [ff80818158b79f8e0158b7a285b60001] value by reflection :\r\n&gt; [class com.test.models.User.id] setter of com.test.models.User.id\r\n\r\n  [1]: https://i.stack.imgur.com/jR8Vw.png\r\n\r\n","title":"Messing around with JPA and getting an Error creating user - could not set field value","body":"<p>I am following the Spring tutorial to get started with JPA, and I have a basic mysql db with a <code>user</code> table.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jR8Vw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jR8Vw.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've set up <code>User.java</code> as follows:</p>\n\n<pre><code>package com.test.models;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Table;\nimport javax.persistence.Column;\nimport javax.persistence.GeneratedValue;\nimport org.hibernate.annotations.GenericGenerator;\nimport javax.persistence.Id;\nimport java.util.UUID;\n\n@Entity\n@Table(name=\"user\")\npublic class User {\n\n    @Id\n    @GeneratedValue(generator=\"system-uuid\")\n    @GenericGenerator(name=\"system-uuid\", strategy = \"uuid\")\n    @Column(name=\"id\")\n    private UUID id;\n\n    @Column(name=\"first_name\")\n    String first_name;\n\n    @Column(name=\"last_name\")\n    String last_name;\n\n    @Column(name=\"username\")\n    String username;\n\n    public User(String first_name, String last_name, String username) {\n        this.first_name = first_name;\n        this.last_name = last_name;\n        this.username = username;\n    }\n\n    public User() { } \n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirst_name() {\n        return first_name;\n    }\n\n    public void setFirst_name(String first_name) {\n        this.first_name = first_name;\n    }\n\n    public String getLast_name() {\n        return last_name;\n    }\n\n    public void setLast_name(String last_name) {\n        this.last_name = last_name;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n}\n</code></pre>\n\n<p>I've set up the <code>UserRepo.java</code>:</p>\n\n<pre><code>package com.test.models;\n\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.data.rest.core.annotation.RepositoryRestResource;\n\nimport java.util.UUID;\n\n@RepositoryRestResource\npublic interface UserRepo extends CrudRepository&lt;User, UUID&gt;{\n    User findByUsername(String username);\n</code></pre>\n\n<p>}</p>\n\n<p>And finally the <code>UserController.java</code>:</p>\n\n<pre><code>package com.test.controllers;\n\nimport com.test.models.UserRepo;\nimport com.test.models.User;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\n@Controller\npublic class UserController {\n\n    @Autowired\n    private UserRepo userRepo;\n\n    @RequestMapping(\"/create\")\n    @ResponseBody\n    public String create(String first_name, String last_name, String username) {\n        String userId = \"\";\n        try {\n            User user = new User(first_name, last_name, username);\n            userRepo.save(user);\n            userId = String.valueOf(user.getId());\n        }\n        catch (Exception ex) {\n            return \"Error creating the user: \" + ex.toString();\n        }\n        return \"User successfully created with id = \" + userId;\n    }\n\n}\n</code></pre>\n\n<p>I've also set up my db connection:</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/test?autoReconnect=true&amp;useSSL=false\nspring.datasource.username=root\nspring.datasource.password=fakepass\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n</code></pre>\n\n<p>However, when I use postman to make a POST to localhost:8080/create with</p>\n\n<pre><code>{\n    \"first_name\": \"Jim\",\n    \"last_name\": \"Smith\",\n    \"username\": \"jim.smith\"\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>Error creating the user:\n  org.springframework.orm.jpa.JpaSystemException: Could not set field\n  value [ff80818158b79f8e0158b7a285b60001] value by reflection : [class\n  com.test.models.User.id] setter of com.test.models.User.id; nested\n  exception is org.hibernate.PropertyAccessException: Could not set\n  field value [ff80818158b79f8e0158b7a285b60001] value by reflection :\n  [class com.test.models.User.id] setter of com.test.models.User.id</p>\n</blockquote>\n"},{"tags":["java","rest","jersey","http-headers","jersey-client"],"comments":[{"owner":{"account_id":1278293,"reputation":1865,"user_id":1241176,"accept_rate":90,"display_name":"Balkrishna Rawool"},"score":0,"creation_date":1474639514,"post_id":39661821,"comment_id":66627309,"body_markdown":"&quot;But failed miserably so far.&quot;. What problem/error are you getting?","body":"&quot;But failed miserably so far.&quot;. What problem/error are you getting?"},{"owner":{"account_id":1988551,"reputation":1300,"user_id":1783165,"accept_rate":82,"display_name":"ihaider"},"score":0,"creation_date":1474653499,"post_id":39661821,"comment_id":66635264,"body_markdown":"I am trying to add more than one header to the POST call, but while calling one one header (always the last one in map) is attached with the call instead of three.","body":"I am trying to add more than one header to the POST call, but while calling one one header (always the last one in map) is attached with the call instead of three."},{"owner":{"account_id":1278293,"reputation":1865,"user_id":1241176,"accept_rate":90,"display_name":"Balkrishna Rawool"},"score":0,"creation_date":1474664758,"post_id":39661821,"comment_id":66640650,"body_markdown":"The code looks good. Add some logging statements in the for loop for `headers` to see if the entries added in headers are still maintained.","body":"The code looks good. Add some logging statements in the for loop for <code>headers</code> to see if the entries added in headers are still maintained."},{"owner":{"account_id":1988551,"reputation":1300,"user_id":1783165,"accept_rate":82,"display_name":"ihaider"},"score":0,"creation_date":1474704784,"post_id":39661821,"comment_id":66648857,"body_markdown":"only the last entry in the loop is added.","body":"only the last entry in the loop is added."},{"owner":{"account_id":1278293,"reputation":1865,"user_id":1241176,"accept_rate":90,"display_name":"Balkrishna Rawool"},"score":0,"creation_date":1474706089,"post_id":39661821,"comment_id":66649158,"body_markdown":"What I mean is, in the first code-snippet you&#39;re adding entries to `headers`. Could you add logging statements in the loop in second code-snippet and show us the output to ensure that all the entries added in first snippet are still maintained?","body":"What I mean is, in the first code-snippet you&#39;re adding entries to <code>headers</code>. Could you add logging statements in the loop in second code-snippet and show us the output to ensure that all the entries added in first snippet are still maintained?"},{"owner":{"account_id":1988551,"reputation":1300,"user_id":1783165,"accept_rate":82,"display_name":"ihaider"},"score":0,"creation_date":1474734873,"post_id":39661821,"comment_id":66657409,"body_markdown":"Yes they are maintained :) the loop runs three time but only the last header gets persisted once the loop in 2nd snippet finishes. It&#39;s kind of over-riding the header","body":"Yes they are maintained :) the loop runs three time but only the last header gets persisted once the loop in 2nd snippet finishes. It&#39;s kind of over-riding the header"},{"owner":{"account_id":1988551,"reputation":1300,"user_id":1783165,"accept_rate":82,"display_name":"ihaider"},"score":0,"creation_date":1474737948,"post_id":39661821,"comment_id":66658373,"body_markdown":"Furthermore, if I remove the loop in second snippet that are setting the headers like below. The call works fine.\n\n{code}\n        builder.header(&quot;authorization&quot;, &quot;Basic 132342sdf&quot;);\n        builder.header(&quot;API-Version&quot;, &quot;5.2&quot;);\n        builder.header(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON);\n{code}","body":"Furthermore, if I remove the loop in second snippet that are setting the headers like below. The call works fine.  {code}         builder.header(&quot;authorization&quot;, &quot;Basic 132342sdf&quot;);         builder.header(&quot;API-Version&quot;, &quot;5.2&quot;);         builder.header(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON); {code}"},{"owner":{"account_id":1278293,"reputation":1865,"user_id":1241176,"accept_rate":90,"display_name":"Balkrishna Rawool"},"score":0,"creation_date":1474739549,"post_id":39661821,"comment_id":66658888,"body_markdown":"Not sure if this will solve it. But you can try. Instead of `builder = builder.header(entry.getKey(), entry.getValue());` do just `builder.header(entry.getKey(), entry.getValue());`. Remove the `builder = ` part.","body":"Not sure if this will solve it. But you can try. Instead of <code>builder = builder.header(entry.getKey(), entry.getValue());</code> do just <code>builder.header(entry.getKey(), entry.getValue());</code>. Remove the <code>builder = </code> part."},{"owner":{"account_id":1988551,"reputation":1300,"user_id":1783165,"accept_rate":82,"display_name":"ihaider"},"score":0,"creation_date":1474740218,"post_id":39661821,"comment_id":66659119,"body_markdown":"did this already, no luck :(","body":"did this already, no luck :("},{"owner":{"account_id":1278293,"reputation":1865,"user_id":1241176,"accept_rate":90,"display_name":"Balkrishna Rawool"},"score":0,"creation_date":1474742009,"post_id":39661821,"comment_id":66659631,"body_markdown":"If the code is exactly what you have shown here then I don&#39;t see any problem. Perhaps it is somewhere else. Only advice I can give you now is try debugging tools.","body":"If the code is exactly what you have shown here then I don&#39;t see any problem. Perhaps it is somewhere else. Only advice I can give you now is try debugging tools."},{"owner":{"account_id":1988551,"reputation":1300,"user_id":1783165,"accept_rate":82,"display_name":"ihaider"},"score":0,"creation_date":1474742972,"post_id":39661821,"comment_id":66659919,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/124117/discussion-between-maningreen-and-balkrishna-rawool).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/124117/discussion-between-maningreen-and-balkrishna-rawool\">continue this discussion in chat</a>."},{"owner":{"account_id":5028986,"reputation":1194,"user_id":4039840,"display_name":"TuyenNTA"},"score":1,"creation_date":1493971550,"post_id":39661821,"comment_id":74639096,"body_markdown":"@ManinGreen did you get the right answer for your problem? Please share it!","body":"@ManinGreen did you get the right answer for your problem? Please share it!"},{"owner":{"account_id":1021804,"reputation":12885,"user_id":1031945,"accept_rate":83,"display_name":"Aniket Kulkarni"},"score":0,"creation_date":1525844596,"post_id":39661821,"comment_id":87509892,"body_markdown":"https://dzone.com/articles/jersey-webresource-header-dont","body":"<a href=\"https://dzone.com/articles/jersey-webresource-header-dont\" rel=\"nofollow noreferrer\">dzone.com/articles/jersey-webresource-header-dont</a>"}],"answers":[{"comments":[{"owner":{"account_id":1988551,"reputation":1300,"user_id":1783165,"accept_rate":82,"display_name":"ihaider"},"score":0,"creation_date":1474653555,"post_id":39664577,"comment_id":66635304,"body_markdown":"my question is not related to authorization. please re-read the question.","body":"my question is not related to authorization. please re-read the question."},{"owner":{"account_id":6392843,"reputation":1977,"user_id":4958332,"accept_rate":38,"display_name":"Karan Khanna"},"score":0,"creation_date":1521557497,"post_id":39664577,"comment_id":85776024,"body_markdown":"this don&#39;t answers the question.","body":"this don&#39;t answers the question."}],"tags":[],"owner":{"account_id":957088,"reputation":3922,"user_id":982198,"accept_rate":79,"display_name":"ddarellis"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1474644800,"creation_date":1474644800,"answer_id":39664577,"question_id":39661821,"body_markdown":"Basic auth is like: Authorization  = &quot;Authorization&quot; &quot;:&quot; credentials\r\n\r\nan example\r\n\r\n    byte[] loginBytes = (&quot;1&quot; + &quot;:&quot; + &quot;1&quot;).getBytes();\r\n    StringBuilder authString = new StringBuilder().append(&quot;Basic &quot;)\r\n                    .append(Base64.encodeToString(loginBytes, Base64.NO_WRAP));\r\n\r\n    _headers.put(&quot;Authorization&quot;, authString );","title":"Adding multiple headers while calling REST api via Jersey clients","body":"<p>Basic auth is like: Authorization  = \"Authorization\" \":\" credentials</p>\n\n<p>an example</p>\n\n<pre><code>byte[] loginBytes = (\"1\" + \":\" + \"1\").getBytes();\nStringBuilder authString = new StringBuilder().append(\"Basic \")\n                .append(Base64.encodeToString(loginBytes, Base64.NO_WRAP));\n\n_headers.put(\"Authorization\", authString );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6792992,"reputation":166,"user_id":5229380,"display_name":"Unnati Solanki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640167260,"creation_date":1640166803,"answer_id":70447157,"question_id":39661821,"body_markdown":"I think the issue here is, type of MAP that you are trying to access. \r\n\r\n    Map&lt;String, Object&gt; headers = new HashMap&lt;String, Object&gt;();\r\n\r\nThe WebSource builder accepts header(String,Object). So Try with changing the map type.","title":"Adding multiple headers while calling REST api via Jersey clients","body":"<p>I think the issue here is, type of MAP that you are trying to access.</p>\n<pre><code>Map&lt;String, Object&gt; headers = new HashMap&lt;String, Object&gt;();\n</code></pre>\n<p>The WebSource builder accepts header(String,Object). So Try with changing the map type.</p>\n"},{"tags":[],"owner":{"account_id":21182455,"reputation":19,"user_id":15576568,"display_name":"Yasser Helmy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665906382,"creation_date":1665906071,"answer_id":74085375,"question_id":39661821,"body_markdown":"The header method does change the builder object. It creates a new object and the existing builder is not affected.\r\n\r\n    for(Map.Entry&lt;String, String&gt; entry : headers.entrySet()) {\r\n      builder = builder.header(entry.getKey(), entry.getValue());\r\n    }","title":"Adding multiple headers while calling REST api via Jersey clients","body":"<p>The header method does change the builder object. It creates a new object and the existing builder is not affected.</p>\n<pre><code>for(Map.Entry&lt;String, String&gt; entry : headers.entrySet()) {\n  builder = builder.header(entry.getKey(), entry.getValue());\n}\n</code></pre>\n"}],"owner":{"account_id":1988551,"reputation":1300,"user_id":1783165,"accept_rate":82,"display_name":"ihaider"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3614,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1665906382,"creation_date":1474636734,"question_id":39661821,"body_markdown":"I am trying to add multiple header. But failed miserably so far. I had tried lots of code tweaking but failed. Can someone help me fix the code or at least tell me what&#39;s wrong ?\r\n\r\nHeader mapping code:\r\n\r\n        Map&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\r\n\r\n        headers.put(&quot;authorization&quot;, authToken);\r\n        headers.put(&quot;API-Version&quot;, apiVersion);\r\n        headers.put(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON);\r\n\r\nactual calling code:\r\n\r\n        String serviceUrl = serviceHostUrl;\r\n        Client client = Client.create();\r\n        WebResource webResource = client.resource(serviceUrl).path(path);\r\n\r\n        WebResource.Builder builder = webResource.getRequestBuilder();\r\n        if(headers != null &amp;&amp; !headers.isEmpty()) {\r\n            for(Map.Entry&lt;String, String&gt; entry : headers.entrySet()) {\r\n                builder.header(entry.getKey(), entry.getValue());\r\n            }\r\n        }\r\n\r\n        ClientResponse response = builder.post(ClientResponse.class, input);\r\n\r\n\r\n**UPDATE**\r\n\r\nif in second snippet I use below code instead of setting headers in loop, it works fine. That&#39;s really weird. \r\n\r\n   \r\n        builder.header(&quot;authorization&quot;, &quot;Basic SDFSFSDFSDFSDFSDFSDFSDF&quot;);\r\n        builder.header(&quot;API-Version&quot;, &quot;5.2&quot;);\r\n        builder.header(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON);","title":"Adding multiple headers while calling REST api via Jersey clients","body":"<p>I am trying to add multiple header. But failed miserably so far. I had tried lots of code tweaking but failed. Can someone help me fix the code or at least tell me what's wrong ?</p>\n\n<p>Header mapping code:</p>\n\n<pre><code>    Map&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\n\n    headers.put(\"authorization\", authToken);\n    headers.put(\"API-Version\", apiVersion);\n    headers.put(\"Content-Type\", MediaType.APPLICATION_JSON);\n</code></pre>\n\n<p>actual calling code:</p>\n\n<pre><code>    String serviceUrl = serviceHostUrl;\n    Client client = Client.create();\n    WebResource webResource = client.resource(serviceUrl).path(path);\n\n    WebResource.Builder builder = webResource.getRequestBuilder();\n    if(headers != null &amp;&amp; !headers.isEmpty()) {\n        for(Map.Entry&lt;String, String&gt; entry : headers.entrySet()) {\n            builder.header(entry.getKey(), entry.getValue());\n        }\n    }\n\n    ClientResponse response = builder.post(ClientResponse.class, input);\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>if in second snippet I use below code instead of setting headers in loop, it works fine. That's really weird. </p>\n\n<pre><code>    builder.header(\"authorization\", \"Basic SDFSFSDFSDFSDFSDFSDFSDF\");\n    builder.header(\"API-Version\", \"5.2\");\n    builder.header(\"Content-Type\", MediaType.APPLICATION_JSON);\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9265,"page":958,"page_size":100}
